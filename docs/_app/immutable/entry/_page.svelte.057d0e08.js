import{J as Ot,S as Xe,i as et,s as tt,k as q,q as Se,a as Ee,l as W,m as R,r as Be,h as M,c as Ae,n as S,K as Qe,b as se,G as T,L as _e,H as Me,M as zt,I as Ge,N as ut,O as st,y as Ve,z as je,A as ze,g as fe,d as ve,B as qe,p as Bt,u as fr,P as y0,C as Du,v as ir,f as ar,D as yu,E as wu,F as Eu,e as Ft,Q as Au,R as Rn,T as Zn,U as xi,V as Ma,W as rn,X as xp,Y as sy,Z as oy,_ as Fa,$ as Os,a0 as Np,a1 as Lp,o as ly,a2 as Pi,a3 as cy}from"../chunks/index.f38d4254.js";import{w as ur,d as Cu}from"../chunks/index.4c6e4564.js";var gt=(t=>(t.Circle="circle",t.Ring="ring",t.Bars="bars",t.Embed="embed",t.Pie="pie",t.Random="random",t))(gt||{}),Dr=(t=>(t.Build="build",t.Concept="concept",t.History="history",t))(Dr||{}),Gn=(t=>(t.List="list",t.Map="map",t))(Gn||{});const Tl="appStage";function fy(){const t=ur(Dr.Build),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Tl]||Dr.Build),{subscribe:e,update:a=>{!a||!i||(localStorage[Tl]=a,r(a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[Tl],r(Dr.Build))}}}const gc=fy();function hy(t){let e,r,n,i,a,o,s,l,p,c,f;return{c(){e=q("div"),r=q("button"),n=Se("Build"),i=Ee(),a=q("button"),o=Se("Concept"),s=Ee(),l=q("button"),p=Se("History"),this.h()},l(d){e=W(d,"DIV",{class:!0});var g=R(e);r=W(g,"BUTTON",{class:!0});var b=R(r);n=Be(b,"Build"),b.forEach(M),i=Ae(g),a=W(g,"BUTTON",{class:!0});var v=R(a);o=Be(v,"Concept"),v.forEach(M),s=Ae(g),l=W(g,"BUTTON",{class:!0});var m=R(l);p=Be(m,"History"),m.forEach(M),g.forEach(M),this.h()},h(){S(r,"class","btn btn-sm"),Qe(r,"btn-active",t[0]===Dr.Build),S(a,"class","btn btn-sm"),Qe(a,"btn-active",t[0]===Dr.Concept),S(l,"class","btn btn-sm"),Qe(l,"btn-active",t[0]===Dr.History),S(e,"class","btn-group btn-group-horizontal p-2")},m(d,g){se(d,e,g),T(e,r),T(r,n),T(e,i),T(e,a),T(a,o),T(e,s),T(e,l),T(l,p),c||(f=[_e(r,"click",t[2]),_e(a,"click",t[3]),_e(l,"click",t[4])],c=!0)},p(d,[g]){g&1&&Qe(r,"btn-active",d[0]===Dr.Build),g&1&&Qe(a,"btn-active",d[0]===Dr.Concept),g&1&&Qe(l,"btn-active",d[0]===Dr.History)},i:Me,o:Me,d(d){d&&M(e),c=!1,zt(f)}}}function dy(t,e,r){let n;Ge(t,gc,l=>r(0,n=l));function i(l){gc.update(l)}return[n,i,()=>i(Dr.Build),()=>i(Dr.Concept),()=>i(Dr.History)]}class py extends Xe{constructor(e){super(),et(this,e,dy,hy,tt,{})}}function gy(t){let e,r;return{c(){e=ut("svg"),r=ut("circle"),this.h()},l(n){e=st(n,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var i=R(e);r=st(i,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(r).forEach(M),i.forEach(M),this.h()},h(){S(r,"cx","25"),S(r,"cy","25"),S(r,"r","20"),S(r,"fill","rgba(255,255,255, 0.7)"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"fill","rgba(255,255,255, 0.7)"),S(e,"class","h-6 w-6"),S(e,"viewBox","0 0 50 50")},m(n,i){se(n,e,i),T(e,r)},p:Me,i:Me,o:Me,d(n){n&&M(e)}}}class vy extends Xe{constructor(e){super(),et(this,e,null,gy,tt,{})}}function my(t){let e,r,n,i,a,o;return{c(){e=ut("svg"),r=ut("circle"),n=ut("circle"),i=ut("circle"),a=ut("circle"),o=ut("circle"),this.h()},l(s){e=st(s,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var l=R(e);r=st(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(r).forEach(M),n=st(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(n).forEach(M),i=st(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(i).forEach(M),a=st(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(a).forEach(M),o=st(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(o).forEach(M),l.forEach(M),this.h()},h(){S(r,"cx","20"),S(r,"cy","80"),S(r,"r","5"),S(r,"fill","rgba(255,255,255, 0.7)"),S(n,"cx","40"),S(n,"cy","40"),S(n,"r","5"),S(n,"fill","rgba(255,255,255, 0.7)"),S(i,"cx","70"),S(i,"cy","20"),S(i,"r","5"),S(i,"fill","rgba(255,255,255, 0.7)"),S(a,"cx","80"),S(a,"cy","60"),S(a,"r","5"),S(a,"fill","rgba(255,255,255, 0.7)"),S(o,"cx","60"),S(o,"cy","75"),S(o,"r","5"),S(o,"fill","rgba(255,255,255, 0.7)"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"fill","rgba(255,255,255, 0.7)"),S(e,"class","h-6 w-6"),S(e,"viewBox","0 0 100 100")},m(s,l){se(s,e,l),T(e,r),T(e,n),T(e,i),T(e,a),T(e,o)},p:Me,i:Me,o:Me,d(s){s&&M(e)}}}class Rp extends Xe{constructor(e){super(),et(this,e,null,my,tt,{})}}const Il="selectedPrompt";function _y(){const t=ur(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Il]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[Il]=a,r(a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[Il],r(""))}}}const Qi=_y();function by(){const t=ur({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith("prompt_")){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=Ot(t),p={...s[a]||{},...o};i&&(localStorage[`prompt_${a}`]=JSON.stringify(p));const c={...s,[a]:p};r(c)},get:a=>Ot(t)[a],delete:a=>{i&&delete localStorage[`prompt_${a}`];const o={...Ot(t)};delete o[a],r(o)}}}const du=by(),Dy=Cu(du,t=>Object.entries(Ot(du))),gs="activePrompt";function Tr(t,e,r,n=1){return{id:t,text:e,barWeight:n,parsedWeight:r,randomWeight:Math.random()}}function w0(){return{0:Tr(0,"Magic potion in a mystical bottle",1),1:Tr(1,"A crystalline decanter",1),2:Tr(2,"An ornate tequila bottle",1),3:Tr(3,"An antique sake bottle",1),4:Tr(4,"A colorful perfume bottle",1),5:Tr(5,"A glass vase full of vibrant flowers",1),6:Tr(6,"A minimalist glass tea kettle",1),7:Tr(7,"Chihuly glass art",1),8:Tr(8,"A fine wine bottle",1),9:Tr(9,"A gourmet vinegar bottle",1),10:Tr(10,"A stunning fishbowl",1),11:Tr(11,"A striking piece of tourmaline",1),12:Tr(12,"A finely cut piece of sapphire",1),13:Tr(13,"Iittala glass art",1)}}function Si(t,e=gt.Pie){return{weightedPrompts:t||{},weightMode:e,pieAngles:{},ringAngles:{},ringStartAngle:0,ringReverse:!1,ringWeightScaling:2,ringExponentialScaling:!0,circleAngles:{},circleMarker:[270,.33],circleWeightScaling:2,circleExponentialScaling:!0,embedWeightScaling:2,embedExponentialScaling:!0,embedClusters:0,embedPromptLimit:Object.keys(t).length,randomPromptLimit:Object.keys(t).length}}function yy(){const t=ur({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",a=i&&localStorage[gs]?JSON.parse(localStorage[gs]):Si(w0());return r({...Si({}),...a}),{subscribe:e,update:o=>{const s=Qi.get();s&&du.update(s,o),!(!o||!i)&&(localStorage[gs]=JSON.stringify(o),r({...Si({}),...o}))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[gs],r(Si(w0())))}}}const ot=yy();function wy(t){let e,r,n,i;return{c(){e=ut("svg"),r=ut("path"),n=ut("path"),i=ut("path"),this.h()},l(a){e=st(a,"svg",{class:!0,fill:!0,viewBox:!0,version:!0,xmlns:!0});var o=R(e);r=st(o,"path",{d:!0}),R(r).forEach(M),n=st(o,"path",{d:!0}),R(n).forEach(M),i=st(o,"path",{d:!0}),R(i).forEach(M),o.forEach(M),this.h()},h(){S(r,"d","M341.333333 385.706667c-11.946667 0-22.186667-4.266667-30.72-12.8-7.970133-7.970133-11.946667-17.92-11.946666-29.866667s3.976533-22.186667 11.946666-30.72c8.533333-7.953067 18.773333-11.946667 30.72-11.946667s21.896533 3.976533 29.866667 11.946667c8.533333 8.533333 12.8 18.773333 12.8 30.72s-4.266667 21.896533-12.8 29.866667c-7.970133 8.533333-17.92 12.8-29.866667 12.8z m128-213.333334c11.946667 0 21.896533 3.976533 29.866667 11.946667 8.533333 8.533333 12.8 18.773333 12.8 30.72s-4.266667 21.896533-12.8 29.866667c-7.970133 8.533333-17.92 12.8-29.866667 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.970133-11.946667-17.92-11.946666-29.866667s3.976533-22.186667 11.946666-30.72c8.533333-7.970133 18.773333-11.946667 30.72-11.946667zM243.2 500.906667c-7.970133 8.533333-17.92 12.8-29.866667 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.970133-11.946667-17.92-11.946666-29.866667s3.976533-22.186667 11.946666-30.72c8.533333-7.953067 18.773333-11.946667 30.72-11.946667s21.896533 3.976533 29.866667 11.946667c8.533333 8.533333 12.8 18.773333 12.8 30.72s-4.266667 21.896533-12.8 29.866667z"),S(n,"d","M512 954.026667c-27.0336-0.682667-50.176-10.683733-69.239467-29.730134-19.3024-19.3536-30.429867-42.666667-33.0752-69.2736L409.6 616.106667H170.666667c-27.0336-0.682667-50.176-10.683733-69.239467-29.730134-19.285333-19.319467-30.4128-42.615467-33.0752-69.256533L68.266667 169.813333c2.082133-27.562667 12.629333-50.414933 31.4368-69.239466 19.626667-19.626667 43.3664-29.917867 70.536533-30.583467h344.302933c27.016533 0.682667 50.158933 10.666667 69.239467 29.730133 19.643733 19.626667 29.934933 43.349333 30.6176 70.519467V407.893333h241.493333c27.050667 0.7168 50.176 10.7008 69.239467 29.7472 19.6096 19.626667 29.917867 43.3664 30.600533 70.519467V854.186667c-2.065067 27.5456-12.612267 50.397867-31.453866 69.256533-19.643733 19.626667-43.3664 29.917867-70.536534 30.600533H512z m-68.266667-354.986667V853.333333c1.792 17.152 9.403733 33.041067 23.176534 46.848 12.817067 12.817067 27.716267 19.268267 45.5168 19.712H853.333333c17.937067-0.443733 33.399467-7.202133 46.813867-20.599466 13.073067-13.090133 20.1216-28.279467 21.504-46.421334L921.6 508.586667c-0.443733-17.954133-7.202133-33.399467-20.599467-46.813867-12.834133-12.817067-27.733333-19.285333-45.550933-19.7632L512 442.026667c-17.937067 0.4608-33.399467 7.202133-46.830933 20.616533-13.056 13.073067-20.087467 28.245333-21.486934 46.404267L443.733333 599.04zM123.8528 124.706133c-13.073067 13.073067-20.104533 28.2624-21.504 46.421334L102.4 515.413333c1.792 17.169067 9.403733 33.058133 23.159467 46.813867 12.817067 12.834133 27.733333 19.285333 45.533866 19.729067H409.6v-74.24c2.082133-27.562667 12.629333-50.414933 31.4368-69.239467 19.643733-19.6096 43.3664-29.9008 70.519467-30.583467h68.693333V170.666667c-0.443733-17.954133-7.202133-33.399467-20.599467-46.813867-12.834133-12.8512-27.733333-19.3024-45.5168-19.746133H170.666667c-17.954133 0.443733-33.399467 7.185067-46.813867 20.599466z"),S(i,"d","M840.533333 522.24c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.9872-7.953067-11.946667-17.92-11.946667-29.866667s3.959467-22.203733 11.946667-30.737067c8.533333-7.970133 18.773333-11.963733 30.72-11.963733s21.896533 4.027733 29.866666 11.9808z m0 128c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.9872-7.953067-11.946667-17.92-11.946667-29.866667s3.959467-22.203733 11.946667-30.737067c8.533333-7.970133 18.773333-11.9296 30.72-11.9296s21.896533 3.9936 29.866666 11.946667z m-60.586666 128c8.533333-7.953067 18.773333-11.9296 30.72-11.9296s21.896533 3.976533 29.866666 11.9296c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.9872-7.953067-11.946667-17.92-11.946667-29.866667s3.959467-22.186667 11.946667-30.72zM597.333333 552.96c0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.953067-11.946667-17.92-11.946667-29.866667s3.976533-22.203733 11.946667-30.737067c8.533333-7.970133 18.773333-11.963733 30.72-11.963733s21.896533 3.9936 29.866666 11.963733c8.533333 8.5504 12.8 18.7904 12.8 30.737067z m-73.386666 225.28c8.533333-7.953067 18.773333-11.9296 30.72-11.9296s21.896533 3.976533 29.866666 11.9296c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.953067-11.946667-17.92-11.946667-29.866667s3.976533-22.186667 11.946667-30.72z m-11.946667-97.28c0-11.946667 3.976533-22.203733 11.946667-30.737067 8.533333-7.970133 18.773333-11.9296 30.72-11.9296s21.896533 3.959467 29.866666 11.9296c8.533333 8.5504 12.8 18.7904 12.8 30.737067 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.953067-11.946667-17.92-11.946667-29.866667z"),S(e,"class","h-5 w-5"),S(e,"fill","rgba(255,255,255, 0.7)"),S(e,"viewBox","0 0 1024 1024"),S(e,"version","1.1"),S(e,"xmlns","http://www.w3.org/2000/svg")},m(a,o){se(a,e,o),T(e,r),T(e,n),T(e,i)},p:Me,i:Me,o:Me,d(a){a&&M(e)}}}class Ey extends Xe{constructor(e){super(),et(this,e,null,wy,tt,{})}}function Ay(t){let e,r,n,i,a,o,s,l,p,c,f,d;return n=new Ey({}),o=new vy({}),p=new Rp({}),{c(){e=q("div"),r=q("button"),Ve(n.$$.fragment),i=Ee(),a=q("button"),Ve(o.$$.fragment),s=Ee(),l=q("button"),Ve(p.$$.fragment),this.h()},l(g){e=W(g,"DIV",{class:!0});var b=R(e);r=W(b,"BUTTON",{class:!0});var v=R(r);je(n.$$.fragment,v),v.forEach(M),i=Ae(b),a=W(b,"BUTTON",{class:!0});var m=R(a);je(o.$$.fragment,m),m.forEach(M),s=Ae(b),l=W(b,"BUTTON",{class:!0});var D=R(l);je(p.$$.fragment,D),D.forEach(M),b.forEach(M),this.h()},h(){S(r,"class","btn btn-sm"),Qe(r,"btn-active",t[0].weightMode===gt.Random),S(a,"class","btn btn-sm"),Qe(a,"btn-active",t[0].weightMode===gt.Circle||t[0].weightMode===gt.Pie||t[0].weightMode===gt.Ring),S(l,"class","btn btn-sm"),Qe(l,"btn-active",t[0].weightMode===gt.Embed),S(e,"class","btn-group btn-group-horizontal w-full flex justify-end p-2")},m(g,b){se(g,e,b),T(e,r),ze(n,r,null),T(e,i),T(e,a),ze(o,a,null),T(e,s),T(e,l),ze(p,l,null),c=!0,f||(d=[_e(r,"click",t[2]),_e(a,"click",t[3]),_e(l,"click",t[4])],f=!0)},p(g,[b]){(!c||b&1)&&Qe(r,"btn-active",g[0].weightMode===gt.Random),(!c||b&1)&&Qe(a,"btn-active",g[0].weightMode===gt.Circle||g[0].weightMode===gt.Pie||g[0].weightMode===gt.Ring),(!c||b&1)&&Qe(l,"btn-active",g[0].weightMode===gt.Embed)},i(g){c||(fe(n.$$.fragment,g),fe(o.$$.fragment,g),fe(p.$$.fragment,g),c=!0)},o(g){ve(n.$$.fragment,g),ve(o.$$.fragment,g),ve(p.$$.fragment,g),c=!1},d(g){g&&M(e),qe(n),qe(o),qe(p),f=!1,zt(d)}}}function Cy(t,e,r){let n;Ge(t,ot,l=>r(0,n=l));function i(l){const p={...n,weightMode:l};ot.update(p)}return[n,i,()=>i(gt.Random),()=>i(gt.Pie),()=>i(gt.Embed)]}class Fy extends Xe{constructor(e){super(),et(this,e,Cy,Ay,tt,{})}}function Sy(t){let e,r,n,i;return{c(){e=ut("svg"),r=ut("path"),n=ut("path"),i=ut("path"),this.h()},l(a){e=st(a,"svg",{xmlns:!0,class:!0,viewBox:!0});var o=R(e);r=st(o,"path",{d:!0,fill:!0}),R(r).forEach(M),n=st(o,"path",{d:!0,fill:!0}),R(n).forEach(M),i=st(o,"path",{d:!0,fill:!0}),R(i).forEach(M),o.forEach(M),this.h()},h(){S(r,"d","M50 50 L50 10 A40 40 0 0 1 90 50 z"),S(r,"fill","rgba(255,255,255, 0.7)"),S(n,"d","M50 50 L90 50 A40 40 0 0 1 50 90 z"),S(n,"fill","rgba(255,255,255, 0.3)"),S(i,"d","M50 50 L50 90 A40 40 0 0 1 10 50 z"),S(i,"fill","rgba(255,255,255, 0.9)"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"class","h-5 w-5"),S(e,"viewBox","0 0 100 100")},m(a,o){se(a,e,o),T(e,r),T(e,n),T(e,i)},p:Me,i:Me,o:Me,d(a){a&&M(e)}}}class By extends Xe{constructor(e){super(),et(this,e,null,Sy,tt,{})}}function Oy(t){let e,r,n;return{c(){e=ut("svg"),r=ut("circle"),n=ut("circle"),this.h()},l(i){e=st(i,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var a=R(e);r=st(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),R(r).forEach(M),n=st(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),R(n).forEach(M),a.forEach(M),this.h()},h(){S(r,"cx","25"),S(r,"cy","25"),S(r,"r","20"),S(r,"stroke","rgba(255,255,255, 0.7)"),S(r,"stroke-width","4"),S(r,"fill","none"),S(n,"cx","25"),S(n,"cy","25"),S(n,"r","4"),S(n,"stroke","rgba(255,255,255, 0.7)"),S(n,"stroke-width","1"),S(n,"fill","rgba(255,255,255, 0.7)"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"fill","rgba(255,255,255, 0.7)"),S(e,"class","h-5 w-5"),S(e,"viewBox","0 0 50 50")},m(i,a){se(i,e,a),T(e,r),T(e,n)},p:Me,i:Me,o:Me,d(i){i&&M(e)}}}class My extends Xe{constructor(e){super(),et(this,e,null,Oy,tt,{})}}function Py(t){let e,r,n,i,a;return{c(){e=ut("svg"),r=ut("mask"),n=ut("circle"),i=ut("path"),a=ut("circle"),this.h()},l(o){e=st(o,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var s=R(e);r=st(s,"mask",{id:!0});var l=R(r);n=st(l,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),R(n).forEach(M),i=st(l,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),R(i).forEach(M),l.forEach(M),a=st(s,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,mask:!0}),R(a).forEach(M),s.forEach(M),this.h()},h(){S(n,"cx","25"),S(n,"cy","25"),S(n,"r","20"),S(n,"stroke","white"),S(n,"stroke-width","6"),S(n,"fill","none"),S(i,"d","M40,22 L45,27 L50,22"),S(i,"stroke","black"),S(i,"stroke-width","4"),S(i,"fill","none"),S(r,"id","hole"),S(a,"cx","25"),S(a,"cy","25"),S(a,"r","20"),S(a,"stroke","rgba(255,255,255, 0.7)"),S(a,"stroke-width","4"),S(a,"fill","none"),S(a,"mask","url(#hole)"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"fill","rgba(255,255,255, 0.7)"),S(e,"class","h-5 w-5"),S(e,"viewBox","0 0 50 50")},m(o,s){se(o,e,s),T(e,r),T(r,n),T(r,i),T(e,a)},p:Me,i:Me,o:Me,d(o){o&&M(e)}}}class ky extends Xe{constructor(e){super(),et(this,e,null,Py,tt,{})}}function Ty(t){let e,r,n,i,a,o,s,l,p,c,f,d;return n=new By({}),o=new My({}),p=new ky({}),{c(){e=q("div"),r=q("button"),Ve(n.$$.fragment),i=Ee(),a=q("button"),Ve(o.$$.fragment),s=Ee(),l=q("button"),Ve(p.$$.fragment),this.h()},l(g){e=W(g,"DIV",{class:!0});var b=R(e);r=W(b,"BUTTON",{class:!0});var v=R(r);je(n.$$.fragment,v),v.forEach(M),i=Ae(b),a=W(b,"BUTTON",{class:!0});var m=R(a);je(o.$$.fragment,m),m.forEach(M),s=Ae(b),l=W(b,"BUTTON",{class:!0});var D=R(l);je(p.$$.fragment,D),D.forEach(M),b.forEach(M),this.h()},h(){S(r,"class","btn btn-xs"),Qe(r,"btn-active",t[0].weightMode===gt.Pie),S(a,"class","btn btn-xs"),Qe(a,"btn-active",t[0].weightMode===gt.Circle),S(l,"class","btn btn-xs"),Qe(l,"btn-active",t[0].weightMode===gt.Ring),S(e,"class","btn-group btn-group-horizontal w-full flex justify-center p-1")},m(g,b){se(g,e,b),T(e,r),ze(n,r,null),T(e,i),T(e,a),ze(o,a,null),T(e,s),T(e,l),ze(p,l,null),c=!0,f||(d=[_e(r,"click",t[2]),_e(a,"click",t[3]),_e(l,"click",t[4])],f=!0)},p(g,[b]){(!c||b&1)&&Qe(r,"btn-active",g[0].weightMode===gt.Pie),(!c||b&1)&&Qe(a,"btn-active",g[0].weightMode===gt.Circle),(!c||b&1)&&Qe(l,"btn-active",g[0].weightMode===gt.Ring)},i(g){c||(fe(n.$$.fragment,g),fe(o.$$.fragment,g),fe(p.$$.fragment,g),c=!0)},o(g){ve(n.$$.fragment,g),ve(o.$$.fragment,g),ve(p.$$.fragment,g),c=!1},d(g){g&&M(e),qe(n),qe(o),qe(p),f=!1,zt(d)}}}function Iy(t,e,r){let n;Ge(t,ot,l=>r(0,n=l));function i(l){const p={...n,weightMode:l};ot.update(p)}return[n,i,()=>i(gt.Pie),()=>i(gt.Circle),()=>i(gt.Ring)]}class xy extends Xe{constructor(e){super(),et(this,e,Iy,Ty,tt,{})}}function vc(){return vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vc.apply(this,arguments)}var Up={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function Qt(t){return typeof t=="number"}function Sn(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function Vp(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function jp(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function zp(t){return t&&t.constructor.prototype.isUnit===!0||!1}function $n(t){return typeof t=="string"}var Zt=Array.isArray;function Yr(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Ms(t){return Array.isArray(t)||Yr(t)}function Ny(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Ly(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Ry(t){return t&&t.constructor.prototype.isRange===!0||!1}function jc(t){return t&&t.constructor.prototype.isIndex===!0||!1}function Uy(t){return typeof t=="boolean"}function Vy(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function jy(t){return t&&t.constructor.prototype.isHelp===!0||!1}function zy(t){return typeof t=="function"}function qy(t){return t instanceof Date}function Wy(t){return t instanceof RegExp}function Hy(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!Vp(t)&&!jp(t))}function $y(t){return t===null}function zc(t){return t===void 0}function Gy(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ky(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function Yy(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Zy(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function Jy(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Qy(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function Xy(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function ew(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function tw(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function rw(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function nw(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function iw(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function aw(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function uw(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function sw(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function ow(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function lw(t){return t&&t.constructor.prototype.isChain===!0||!1}function hu(t){var e=typeof t;return e==="object"?t===null?"null":Sn(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Fr(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return Fr(r)});if(t instanceof Date)return new Date(t.valueOf());if(Sn(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return cw(t,Fr)}function cw(t,e){var r={};for(var n in t)pu(t,n)&&(r[n]=e(t[n]));return r}function fw(t,e){for(var r in e)pu(e,r)&&(t[r]=e[r]);return t}function Ps(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!Ps(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!Ps(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function pu(t,e){return t&&Object.hasOwnProperty.call(t,e)}function hw(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],a=t[i];a!==void 0&&(r[i]=a)}return r}var dw=["Matrix","Array"],pw=["number","BigNumber","Fraction"],io=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Up)};vc(io,Up,{MATRIX_OPTIONS:dw,NUMBER_OPTIONS:pw});function In(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=gw(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){r=r.call(t)},n:function(){var p=r.next();return a=p.done,p},e:function(p){o=!0,s=p},f:function(){try{!a&&r.return!=null&&r.return()}finally{if(o)throw s}}}}function gw(t,e){if(t){if(typeof t=="string")return E0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E0(t,e)}}function E0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wa(t){return wa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wa(t)}function A0(){return!0}function Fn(){return!1}function ma(){}var C0="Argument is not a typed-function.";function qp(){function t(G){return wa(G)==="object"&&G!==null&&G.constructor===Object}var e=[{name:"number",test:function(Z){return typeof Z=="number"}},{name:"string",test:function(Z){return typeof Z=="string"}},{name:"boolean",test:function(Z){return typeof Z=="boolean"}},{name:"Function",test:function(Z){return typeof Z=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(Z){return Z instanceof Date}},{name:"RegExp",test:function(Z){return Z instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(Z){return Z===null}},{name:"undefined",test:function(Z){return Z===void 0}}],r={name:"any",test:A0,isAny:!0},n,i,a=0,o={createCount:0};function s(G){var Z=n.get(G);if(Z)return Z;var ie='Unknown type "'+G+'"',de=G.toLowerCase(),ue,me=In(i),ce;try{for(me.s();!(ce=me.n()).done;)if(ue=ce.value,ue.toLowerCase()===de){ie+='. Did you mean "'+ue+'" ?';break}}catch(he){me.e(he)}finally{me.f()}throw new TypeError(ie)}function l(G){for(var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",ie=Z?s(Z).index:i.length,de=[],ue=0;ue<G.length;++ue){if(!G[ue]||typeof G[ue].name!="string"||typeof G[ue].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var me=G[ue].name;if(n.has(me))throw new TypeError('Duplicate type name "'+me+'"');de.push(me),n.set(me,{name:me,test:G[ue].test,isAny:G[ue].isAny,index:ie+ue,conversionsTo:[]})}var ce=i.slice(ie);i=i.slice(0,ie).concat(de).concat(ce);for(var he=ie+de.length;he<i.length;++he)n.get(i[he]).index=he}function p(){n=new Map,i=[],a=0,l([r],!1)}p(),l(e);function c(){var G,Z=In(i),ie;try{for(Z.s();!(ie=Z.n()).done;)G=ie.value,n.get(G).conversionsTo=[]}catch(de){Z.e(de)}finally{Z.f()}a=0}function f(G){var Z=i.filter(function(ie){var de=n.get(ie);return!de.isAny&&de.test(G)});return Z.length?Z:["any"]}function d(G){return G&&typeof G=="function"&&"_typedFunctionData"in G}function g(G,Z,ie){if(!d(G))throw new TypeError(C0);var de=ie&&ie.exact,ue=Array.isArray(Z)?Z.join(","):Z,me=C(ue),ce=m(me);if(!de||ce in G.signatures){var he=G._typedFunctionData.signatureMap.get(ce);if(he)return he}var ke=me.length,He;if(de){He=[];var ct;for(ct in G.signatures)He.push(G._typedFunctionData.signatureMap.get(ct))}else He=G._typedFunctionData.signatures;for(var Ie=0;Ie<ke;++Ie){var $t=me[Ie],Vt=[],er=void 0,Gt=In(He),wr;try{for(Gt.s();!(wr=Gt.n()).done;){er=wr.value;var Kt=A(er.params,Ie);if(!(!Kt||$t.restParam&&!Kt.restParam)){if(!Kt.hasAny){var Er=function(){var vr=w(Kt);if($t.types.some(function(Bn){return!vr.has(Bn.name)}))return"continue"}();if(Er==="continue")continue}Vt.push(er)}}}catch(vr){Gt.e(vr)}finally{Gt.f()}if(He=Vt,He.length===0)break}var dr,pr=In(He),gn;try{for(pr.s();!(gn=pr.n()).done;)if(dr=gn.value,dr.params.length<=ke)return dr}catch(vr){pr.e(vr)}finally{pr.f()}throw new TypeError("Signature not found (signature: "+(G.name||"unnamed")+"("+m(me,", ")+"))")}function b(G,Z,ie){return g(G,Z,ie).implementation}function v(G,Z){var ie=s(Z);if(ie.test(G))return G;var de=ie.conversionsTo;if(de.length===0)throw new Error("There are no conversions to "+Z+" defined.");for(var ue=0;ue<de.length;ue++){var me=s(de[ue].from);if(me.test(G))return de[ue].convert(G)}throw new Error("Cannot convert "+G+" to "+Z)}function m(G){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return G.map(function(ie){return ie.name}).join(Z)}function D(G){var Z=G.indexOf("...")===0,ie=Z?G.length>3?G.slice(3):"any":G,de=ie.split("|").map(function(he){return s(he.trim())}),ue=!1,me=Z?"...":"",ce=de.map(function(he){return ue=he.isAny||ue,me+=he.name+"|",{name:he.name,typeIndex:he.index,test:he.test,isAny:he.isAny,conversion:null,conversionIndex:-1}});return{types:ce,name:me.slice(0,-1),hasAny:ue,hasConversion:!1,restParam:Z}}function B(G){var Z=G.types.map(function(ce){return ce.name}),ie=Q(Z),de=G.hasAny,ue=G.name,me=ie.map(function(ce){var he=s(ce.from);return de=he.isAny||de,ue+="|"+ce.from,{name:ce.from,typeIndex:he.index,test:he.test,isAny:he.isAny,conversion:ce,conversionIndex:ce.index}});return{types:G.types.concat(me),name:ue,hasAny:de,hasConversion:me.length>0,restParam:G.restParam}}function w(G){return G.typeSet||(G.typeSet=new Set,G.types.forEach(function(Z){return G.typeSet.add(Z.name)})),G.typeSet}function C(G){var Z=[];if(typeof G!="string")throw new TypeError("Signatures must be strings");var ie=G.trim();if(ie==="")return Z;for(var de=ie.split(","),ue=0;ue<de.length;++ue){var me=D(de[ue].trim());if(me.restParam&&ue!==de.length-1)throw new SyntaxError('Unexpected rest parameter "'+de[ue]+'": only allowed for the last parameter');if(me.types.length===0)return null;Z.push(me)}return Z}function F(G){var Z=Ye(G);return Z?Z.restParam:!1}function k(G){if(!G||G.types.length===0)return A0;if(G.types.length===1)return s(G.types[0].name).test;if(G.types.length===2){var Z=s(G.types[0].name).test,ie=s(G.types[1].name).test;return function(me){return Z(me)||ie(me)}}else{var de=G.types.map(function(ue){return s(ue.name).test});return function(me){for(var ce=0;ce<de.length;ce++)if(de[ce](me))return!0;return!1}}}function O(G){var Z,ie,de;if(F(G)){Z=We(G).map(k);var ue=Z.length,me=k(Ye(G)),ce=function(ke){for(var He=ue;He<ke.length;He++)if(!me(ke[He]))return!1;return!0};return function(ke){for(var He=0;He<Z.length;He++)if(!Z[He](ke[He]))return!1;return ce(ke)&&ke.length>=ue+1}}else return G.length===0?function(ke){return ke.length===0}:G.length===1?(ie=k(G[0]),function(ke){return ie(ke[0])&&ke.length===1}):G.length===2?(ie=k(G[0]),de=k(G[1]),function(ke){return ie(ke[0])&&de(ke[1])&&ke.length===2}):(Z=G.map(k),function(ke){for(var He=0;He<Z.length;He++)if(!Z[He](ke[He]))return!1;return ke.length===Z.length})}function A(G,Z){return Z<G.length?G[Z]:F(G)?Ye(G):null}function x(G,Z){var ie=A(G,Z);return ie?w(ie):new Set}function U(G){return G.conversion===null||G.conversion===void 0}function K(G,Z){var ie=new Set;return G.forEach(function(de){var ue=x(de.params,Z),me,ce=In(ue),he;try{for(ce.s();!(he=ce.n()).done;)me=he.value,ie.add(me)}catch(ke){ce.e(ke)}finally{ce.f()}}),ie.has("any")?["any"]:Array.from(ie)}function J(G,Z,ie){var de,ue,me=G||"unnamed",ce=ie,he,ke=function(){var Gt=[];if(ce.forEach(function(Kt){var Er=A(Kt.params,he),dr=k(Er);(he<Kt.params.length||F(Kt.params))&&dr(Z[he])&&Gt.push(Kt)}),Gt.length===0){if(ue=K(ce,he),ue.length>0){var wr=f(Z[he]);return de=new TypeError("Unexpected type of argument in function "+me+" (expected: "+ue.join(" or ")+", actual: "+wr.join(" | ")+", index: "+he+")"),de.data={category:"wrongType",fn:me,index:he,actual:wr,expected:ue},{v:de}}}else ce=Gt};for(he=0;he<Z.length;he++){var He=ke();if(wa(He)==="object")return He.v}var ct=ce.map(function(er){return F(er.params)?1/0:er.params.length});if(Z.length<Math.min.apply(null,ct))return ue=K(ce,he),de=new TypeError("Too few arguments in function "+me+" (expected: "+ue.join(" or ")+", index: "+Z.length+")"),de.data={category:"tooFewArgs",fn:me,index:Z.length,expected:ue},de;var Ie=Math.max.apply(null,ct);if(Z.length>Ie)return de=new TypeError("Too many arguments in function "+me+" (expected: "+Ie+", actual: "+Z.length+")"),de.data={category:"tooManyArgs",fn:me,index:Z.length,expectedLength:Ie},de;for(var $t=[],Vt=0;Vt<Z.length;++Vt)$t.push(f(Z[Vt]).join("|"));return de=new TypeError('Arguments of type "'+$t.join(", ")+'" do not match any of the defined signatures of function '+me+"."),de.data={category:"mismatch",actual:$t},de}function j(G){for(var Z=i.length+1,ie=0;ie<G.types.length;ie++)U(G.types[ie])&&(Z=Math.min(Z,G.types[ie].typeIndex));return Z}function V(G){for(var Z=a+1,ie=0;ie<G.types.length;ie++)U(G.types[ie])||(Z=Math.min(Z,G.types[ie].conversionIndex));return Z}function H(G,Z){if(G.hasAny){if(!Z.hasAny)return 1}else if(Z.hasAny)return-1;if(G.restParam){if(!Z.restParam)return 1}else if(Z.restParam)return-1;if(G.hasConversion){if(!Z.hasConversion)return 1}else if(Z.hasConversion)return-1;var ie=j(G)-j(Z);if(ie<0)return-1;if(ie>0)return 1;var de=V(G)-V(Z);return de<0?-1:de>0?1:0}function z(G,Z){var ie=G.params,de=Z.params,ue=Ye(ie),me=Ye(de),ce=F(ie),he=F(de);if(ce&&ue.hasAny){if(!he||!me.hasAny)return 1}else if(he&&me.hasAny)return-1;var ke=0,He=0,ct,Ie=In(ie),$t;try{for(Ie.s();!($t=Ie.n()).done;)ct=$t.value,ct.hasAny&&++ke,ct.hasConversion&&++He}catch(Un){Ie.e(Un)}finally{Ie.f()}var Vt=0,er=0,Gt=In(de),wr;try{for(Gt.s();!(wr=Gt.n()).done;)ct=wr.value,ct.hasAny&&++Vt,ct.hasConversion&&++er}catch(Un){Gt.e(Un)}finally{Gt.f()}if(ke!==Vt)return ke-Vt;if(ce&&ue.hasConversion){if(!he||!me.hasConversion)return 1}else if(he&&me.hasConversion)return-1;if(He!==er)return He-er;if(ce){if(!he)return 1}else if(he)return-1;var Kt=(ie.length-de.length)*(ce?-1:1);if(Kt!==0)return Kt;for(var Er=[],dr=0,pr=0;pr<ie.length;++pr){var gn=H(ie[pr],de[pr]);Er.push(gn),dr+=gn}if(dr!==0)return dr;for(var vr,Bn=0,Qn=Er;Bn<Qn.length;Bn++)if(vr=Qn[Bn],vr!==0)return vr;return 0}function Q(G){if(G.length===0)return[];var Z=G.map(s);G.length>1&&Z.sort(function(ke,He){return ke.index-He.index});var ie=Z[0].conversionsTo;if(G.length===1)return ie;ie=ie.concat([]);for(var de=new Set(G),ue=1;ue<Z.length;++ue){var me=void 0,ce=In(Z[ue].conversionsTo),he;try{for(ce.s();!(he=ce.n()).done;)me=he.value,de.has(me.from)||(ie.push(me),de.add(me.from))}catch(ke){ce.e(ke)}finally{ce.f()}}return ie}function X(G,Z){var ie=Z;if(G.some(function(he){return he.hasConversion})){var de=F(G),ue=G.map(te);ie=function(){for(var ke=[],He=de?arguments.length-1:arguments.length,ct=0;ct<He;ct++)ke[ct]=ue[ct](arguments[ct]);return de&&(ke[He]=arguments[He].map(ue[He])),Z.apply(this,ke)}}var me=ie;if(F(G)){var ce=G.length-1;me=function(){return ie.apply(this,xe(arguments,0,ce).concat([xe(arguments,ce)]))}}return me}function te(G){var Z,ie,de,ue,me=[],ce=[];switch(G.types.forEach(function(he){he.conversion&&(me.push(s(he.conversion.from).test),ce.push(he.conversion.convert))}),ce.length){case 0:return function(ke){return ke};case 1:return Z=me[0],de=ce[0],function(ke){return Z(ke)?de(ke):ke};case 2:return Z=me[0],ie=me[1],de=ce[0],ue=ce[1],function(ke){return Z(ke)?de(ke):ie(ke)?ue(ke):ke};default:return function(ke){for(var He=0;He<ce.length;He++)if(me[He](ke))return ce[He](ke);return ke}}}function le(G){function Z(ie,de,ue){if(de<ie.length){var me=ie[de],ce=[];if(me.restParam){var he=me.types.filter(U);he.length<me.types.length&&ce.push({types:he,name:"..."+he.map(function(ke){return ke.name}).join("|"),hasAny:he.some(function(ke){return ke.isAny}),hasConversion:!1,restParam:!0}),ce.push(me)}else ce=me.types.map(function(ke){return{types:[ke],name:ke.name,hasAny:ke.isAny,hasConversion:ke.conversion,restParam:!1}});return Et(ce,function(ke){return Z(ie,de+1,ue.concat([ke]))})}else return[ue]}return Z(G,0,[])}function be(G,Z){for(var ie=Math.max(G.length,Z.length),de=0;de<ie;de++){var ue=x(G,de),me=x(Z,de),ce=!1,he=void 0,ke=In(me),He;try{for(ke.s();!(He=ke.n()).done;)if(he=He.value,ue.has(he)){ce=!0;break}}catch(er){ke.e(er)}finally{ke.f()}if(!ce)return!1}var ct=G.length,Ie=Z.length,$t=F(G),Vt=F(Z);return $t?Vt?ct===Ie:Ie>=ct:Vt?ct>=Ie:ct===Ie}function we(G){return G.map(function(Z){return It(Z)?Pt(Z.referToSelf.callback):yr(Z)?lt(Z.referTo.references,Z.referTo.callback):Z})}function Oe(G,Z,ie){var de=[],ue,me=In(G),ce;try{for(me.s();!(ce=me.n()).done;){ue=ce.value;var he=ie[ue];if(typeof he!="number")throw new TypeError('No definition for referenced signature "'+ue+'"');if(he=Z[he],typeof he!="function")return!1;de.push(he)}}catch(ke){me.e(ke)}finally{me.f()}return de}function Pe(G,Z,ie){for(var de=we(G),ue=new Array(de.length).fill(!1),me=!0;me;){me=!1;for(var ce=!0,he=0;he<de.length;++he)if(!ue[he]){var ke=de[he];if(It(ke))de[he]=ke.referToSelf.callback(ie),de[he].referToSelf=ke.referToSelf,ue[he]=!0,ce=!1;else if(yr(ke)){var He=Oe(ke.referTo.references,de,Z);He?(de[he]=ke.referTo.callback.apply(this,He),de[he].referTo=ke.referTo,ue[he]=!0,ce=!1):me=!0}}if(ce&&me)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return de}function Te(G){var Z=/\bthis(\(|\.signatures\b)/;Object.keys(G).forEach(function(ie){var de=G[ie];if(Z.test(de.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Re(G,Z){if(o.createCount++,Object.keys(Z).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&Te(Z);var ie=[],de=[],ue={},me=[],ce,he=function(){if(!Object.prototype.hasOwnProperty.call(Z,ce))return"continue";var sr=C(ce);if(!sr)return"continue";ie.forEach(function(mn){if(be(mn,sr))throw new TypeError('Conflicting signatures "'+m(mn)+'" and "'+m(sr)+'".')}),ie.push(sr);var Hr=de.length;de.push(Z[ce]);var Vi=sr.map(B),ei=void 0,zn=In(le(Vi)),ji;try{for(zn.s();!(ji=zn.n()).done;){ei=ji.value;var On=m(ei);me.push({params:ei,name:On,fn:Hr}),ei.every(function(mn){return!mn.hasConversion})&&(ue[On]=Hr)}}catch(mn){zn.e(mn)}finally{zn.f()}};for(ce in Z)var ke=he();me.sort(z);var He=Pe(de,ue,jn),ct;for(ct in ue)Object.prototype.hasOwnProperty.call(ue,ct)&&(ue[ct]=He[ue[ct]]);for(var Ie=[],$t=new Map,Vt=0,er=me;Vt<er.length;Vt++)ct=er[Vt],$t.has(ct.name)||(ct.fn=He[ct.fn],Ie.push(ct),$t.set(ct.name,ct));for(var Gt=Ie[0]&&Ie[0].params.length<=2&&!F(Ie[0].params),wr=Ie[1]&&Ie[1].params.length<=2&&!F(Ie[1].params),Kt=Ie[2]&&Ie[2].params.length<=2&&!F(Ie[2].params),Er=Ie[3]&&Ie[3].params.length<=2&&!F(Ie[3].params),dr=Ie[4]&&Ie[4].params.length<=2&&!F(Ie[4].params),pr=Ie[5]&&Ie[5].params.length<=2&&!F(Ie[5].params),gn=Gt&&wr&&Kt&&Er&&dr&&pr,vr=0;vr<Ie.length;++vr)Ie[vr].test=O(Ie[vr].params);for(var Bn=Gt?k(Ie[0].params[0]):Fn,Qn=wr?k(Ie[1].params[0]):Fn,Un=Kt?k(Ie[2].params[0]):Fn,Vn=Er?k(Ie[3].params[0]):Fn,ea=dr?k(Ie[4].params[0]):Fn,Ri=pr?k(Ie[5].params[0]):Fn,Ia=Gt?k(Ie[0].params[1]):Fn,Br=wr?k(Ie[1].params[1]):Fn,tr=Kt?k(Ie[2].params[1]):Fn,xa=Er?k(Ie[3].params[1]):Fn,pi=dr?k(Ie[4].params[1]):Fn,vn=pr?k(Ie[5].params[1]):Fn,Xn=0;Xn<Ie.length;++Xn)Ie[Xn].implementation=X(Ie[Xn].params,Ie[Xn].fn);var Ui=Gt?Ie[0].implementation:ma,Na=wr?Ie[1].implementation:ma,La=Kt?Ie[2].implementation:ma,ta=Er?Ie[3].implementation:ma,Ra=dr?Ie[4].implementation:ma,Ua=pr?Ie[5].implementation:ma,Va=Gt?Ie[0].params.length:-1,ja=wr?Ie[1].params.length:-1,za=Kt?Ie[2].params.length:-1,qa=Er?Ie[3].params.length:-1,gi=dr?Ie[4].params.length:-1,Wa=pr?Ie[5].params.length:-1,vi=gn?6:0,Ha=Ie.length,$a=Ie.map(function(Ar){return Ar.test}),Ga=Ie.map(function(Ar){return Ar.implementation}),ra=function(){for(var sr=vi;sr<Ha;sr++)if($a[sr](arguments))return Ga[sr].apply(this,arguments);return o.onMismatch(G,arguments,Ie)};function jn(Ar,sr){return arguments.length===Va&&Bn(Ar)&&Ia(sr)?Ui.apply(this,arguments):arguments.length===ja&&Qn(Ar)&&Br(sr)?Na.apply(this,arguments):arguments.length===za&&Un(Ar)&&tr(sr)?La.apply(this,arguments):arguments.length===qa&&Vn(Ar)&&xa(sr)?ta.apply(this,arguments):arguments.length===gi&&ea(Ar)&&pi(sr)?Ra.apply(this,arguments):arguments.length===Wa&&Ri(Ar)&&vn(sr)?Ua.apply(this,arguments):ra.apply(this,arguments)}try{Object.defineProperty(jn,"name",{value:G})}catch{}return jn.signatures=ue,jn._typedFunctionData={signatures:Ie,signatureMap:$t},jn}function Ue(G,Z,ie){throw J(G,Z,ie)}function We(G){return xe(G,0,G.length-1)}function Ye(G){return G[G.length-1]}function xe(G,Z,ie){return Array.prototype.slice.call(G,Z,ie)}function Dt(G,Z){for(var ie=0;ie<G.length;ie++)if(Z(G[ie]))return G[ie]}function Et(G,Z){return Array.prototype.concat.apply([],G.map(Z))}function ht(){var G=We(arguments).map(function(ie){return m(C(ie))}),Z=Ye(arguments);if(typeof Z!="function")throw new TypeError("Callback function expected as last argument");return lt(G,Z)}function lt(G,Z){return{referTo:{references:G,callback:Z}}}function Pt(G){if(typeof G!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:G}}}function yr(G){return G&&wa(G.referTo)==="object"&&Array.isArray(G.referTo.references)&&typeof G.referTo.callback=="function"}function It(G){return G&&wa(G.referToSelf)==="object"&&typeof G.referToSelf.callback=="function"}function hr(G,Z){if(!G)return Z;if(Z&&Z!==G){var ie=new Error("Function names do not match (expected: "+G+", actual: "+Z+")");throw ie.data={actual:Z,expected:G},ie}return G}function Ze(G){var Z;for(var ie in G)Object.prototype.hasOwnProperty.call(G,ie)&&(d(G[ie])||typeof G[ie].signature=="string")&&(Z=hr(Z,G[ie].name));return Z}function Xt(G,Z){var ie;for(ie in Z)if(Object.prototype.hasOwnProperty.call(Z,ie)){if(ie in G&&Z[ie]!==G[ie]){var de=new Error('Signature "'+ie+'" is defined twice');throw de.data={signature:ie,sourceFunction:Z[ie],destFunction:G[ie]},de}G[ie]=Z[ie]}}var Nt=o;o=function(Z){for(var ie=typeof Z=="string",de=ie?1:0,ue=ie?Z:"",me={},ce=de;ce<arguments.length;++ce){var he=arguments[ce],ke={},He=void 0;if(typeof he=="function"?(He=he.name,typeof he.signature=="string"?ke[he.signature]=he:d(he)&&(ke=he.signatures)):t(he)&&(ke=he,ie||(He=Ze(he))),Object.keys(ke).length===0){var ct=new TypeError("Argument to 'typed' at index "+ce+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw ct.data={index:ce,argument:he},ct}ie||(ue=hr(ue,He)),Xt(me,ke)}return Re(ue||"",me)},o.create=qp,o.createCount=Nt.createCount,o.onMismatch=Ue,o.throwMismatchError=Ue,o.createError=J,o.clear=p,o.clearConversions=c,o.addTypes=l,o._findType=s,o.referTo=ht,o.referToSelf=Pt,o.convert=v,o.findSignature=g,o.find=b,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function(G,Z){var ie="any";Z!==!1&&n.has("Object")&&(ie="Object"),o.addTypes([G],ie)};function Zr(G){if(!G||typeof G.from!="string"||typeof G.to!="string"||typeof G.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(G.to===G.from)throw new SyntaxError('Illegal to define conversion from "'+G.from+'" to itself.')}return o.addConversion=function(G){Zr(G);var Z=s(G.to);if(Z.conversionsTo.every(function(ie){return ie.from!==G.from}))Z.conversionsTo.push({from:G.from,convert:G.convert,index:a++});else throw new Error('There is already a conversion from "'+G.from+'" to "'+Z.name+'"')},o.addConversions=function(G){G.forEach(o.addConversion)},o.removeConversion=function(G){Zr(G);var Z=s(G.to),ie=Dt(Z.conversionsTo,function(ue){return ue.from===G.from});if(!ie)throw new Error("Attempt to remove nonexistent conversion from "+G.from+" to "+G.to);if(ie.convert!==G.convert)throw new Error("Conversion to remove does not match existing conversion");var de=Z.conversionsTo.indexOf(ie);Z.conversionsTo.splice(de,1)},o.resolve=function(G,Z){if(!d(G))throw new TypeError(C0);for(var ie=G._typedFunctionData.signatures,de=0;de<ie.length;++de)if(ie[de].test(Z))return ie[de];return null},o}const F0=qp();function Sr(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function xl(t,e,r){var n={2:"0b",8:"0o",16:"0x"},i=n[e],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Sr(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Sr(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),a="i".concat(r)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(i).concat(t.toString(e)).concat(a)}function mc(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",n,i;if(e&&(e.notation&&(r=e.notation),Qt(e)?n=e:Qt(e.precision)&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return mw(t,n);case"exponential":return Wp(t,n);case"engineering":return vw(t,n);case"bin":return xl(t,2,i);case"oct":return xl(t,8,i);case"hex":return xl(t,16,i);case"auto":return _w(t,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],o=arguments[4];return a!=="."?a+o:o});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function ao(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),a=n.indexOf(".");i+=a!==-1?a-1:n.length-1;var o=n.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return o.length===0&&(o.push(0),i++),{sign:r,coefficients:o,exponent:i}}function vw(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=ao(t),n=uo(r,e),i=n.exponent,a=n.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(Qt(e))for(;e>a.length||i-o+1>a.length;)a.push(0);else for(var s=Math.abs(i-o)-(a.length-1),l=0;l<s;l++)a.push(0);for(var p=Math.abs(i-o),c=1;p>0;)c++,p--;var f=a.slice(c).join(""),d=Qt(e)&&f.length||f.match(/[1-9]/)?"."+f:"",g=a.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+o.toString();return n.sign+g}function mw(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=ao(t),n=typeof e=="number"?uo(r,r.exponent+1+e):r,i=n.coefficients,a=n.exponent+1,o=a+(e||0);return i.length<o&&(i=i.concat(Aa(o-i.length))),a<0&&(i=Aa(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),n.sign+i.join("")}function Wp(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=ao(t),n=e?uo(r,e):r,i=n.coefficients,a=n.exponent;i.length<e&&(i=i.concat(Aa(e-i.length)));var o=i.shift();return n.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function _w(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=r&&r.lowerExp!==void 0?r.lowerExp:-3,i=r&&r.upperExp!==void 0?r.upperExp:5,a=ao(t),o=e?uo(a,e):a;if(o.exponent<n||o.exponent>=i)return Wp(t,e);var s=o.coefficients,l=o.exponent;s.length<e&&(s=s.concat(Aa(e-s.length))),s=s.concat(Aa(l-s.length+1+(s.length<e?e-s.length:0))),s=Aa(-l).concat(s);var p=l>0?l:0;return p<s.length-1&&s.splice(p+1,0,"."),o.sign+s.join("")}function uo(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var a=e-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),r.exponent++,a++),a--,n[a]++}}return r}function Aa(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function bw(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Dw=Number.EPSILON||2220446049250313e-31;function ks(t,e,r){if(r==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var n=Math.abs(t-e);return n<Dw?!0:n<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}function Nl(t,e,r){var n=t.constructor,i=new n(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Sr(r))throw new Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),a="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function yw(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",n,i;if(e!==void 0&&(e.notation&&(r=e.notation),typeof e=="number"?n=e:e.precision&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Ew(t,n);case"exponential":return S0(t,n);case"engineering":return ww(t,n);case"bin":return Nl(t,2,i);case"oct":return Nl(t,8,i);case"hex":return Nl(t,16,i);case"auto":{var a=e&&e.lowerExp!==void 0?e.lowerExp:-3,o=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var s,l=t.toSignificantDigits(n),p=l.e;return p>=a&&p<o?s=l.toFixed():s=S0(t,n),s.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function ww(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),a=i.toPrecision(e);return a.indexOf("e")!==-1&&(a=i.toString()),a+"e"+(r>=0?"+":"")+n.toString()}function S0(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function Ew(t,e){return t.toFixed(e)}function tn(t,e){var r=Aw(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function Aw(t,e){if(typeof t=="number")return mc(t,e);if(Sn(t))return yw(t,e);if(Cw(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return Hp(t,e);if($n(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>'"'+n+'": '+tn(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function Hp(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=Hp(t[i],e);return r+="]",r}else return tn(t,e)}function Cw(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function Tt(t,e,r){if(!(this instanceof Tt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Tt.prototype=new RangeError;Tt.prototype.constructor=RangeError;Tt.prototype.name="DimensionError";Tt.prototype.isDimensionError=!0;function Xi(t,e,r){if(!(this instanceof Xi))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Xi.prototype=new RangeError;Xi.prototype.constructor=RangeError;Xi.prototype.name="IndexError";Xi.prototype.isIndexError=!0;function ki(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function $p(t,e,r){var n,i=t.length;if(i!==e[r])throw new Tt(i,e[r]);if(r<e.length-1){var a=r+1;for(n=0;n<i;n++){var o=t[n];if(!Array.isArray(o))throw new Tt(e.length-1,e.length,"<");$p(t[n],e,a)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new Tt(e.length+1,e.length,">")}function B0(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new Tt(t.length,0)}else $p(t,e,0)}function Jt(t,e){if(!Qt(t)||!Sr(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Xi(t,e)}function O0(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!Qt(i)||!Sr(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+tn(e)+")")});var n=r!==void 0?r:0;return _c(t,e,0,n),t}function _c(t,e,r,n){var i,a,o=t.length,s=e[r],l=Math.min(o,s);if(t.length=s,r<e.length-1){var p=r+1;for(i=0;i<l;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),_c(a,e,p,n);for(i=l;i<s;i++)a=[],t[i]=a,_c(a,e,p,n)}else{for(i=0;i<l;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=l;i<s;i++)t[i]=n}}function Fw(t,e){var r=Bw(t),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Tt(0,n,"!=");e=qc(e,n);var i=Gp(e);if(n!==i)throw new Tt(i,n,"!=");try{return Sw(r,e)}catch(a){throw a instanceof Tt?new Tt(i,n,"!="):a}}function qc(t,e){var r=Gp(t),n=t.slice(),i=-1,a=t.indexOf(i),o=t.indexOf(i,a+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var s=a>=0,l=e%r===0;if(s)if(l)n[a]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function Gp(t){return t.reduce((e,r)=>e*r,1)}function Sw(t,e){for(var r=t,n,i=e.length-1;i>0;i--){var a=e[i];n=[];for(var o=r.length/a,s=0;s<o;s++)n.push(r.slice(s*a,(s+1)*a));r=n}return r}function Kp(t,e,r,n){var i=n||ki(t);if(r)for(var a=0;a<r;a++)t=[t],i.unshift(1);for(t=Yp(t,e,0);i.length<e;)i.push(1);return t}function Yp(t,e,r){var n,i;if(Array.isArray(t)){var a=r+1;for(n=0,i=t.length;n<i;n++)t[n]=Yp(t[n],e,a)}else for(var o=r;o<e;o++)t=[t];return t}function Bw(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function r(n){Array.isArray(n)?n.forEach(r):e.push(n)}),e}function Ts(t,e){for(var r,n=0,i=0;i<t.length;i++){var a=t[i],o=Array.isArray(a);if(i===0&&o&&(n=a.length),o&&a.length!==n)return;var s=o?Ts(a,e):e(a);if(r===void 0)r=s;else if(r!==s)return"mixed"}return r}function St(t,e,r,n){function i(a){var o=hw(a,e.map(Pw));return Ow(t,e,a),r(o)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Ow(t,e,r){var n=e.filter(a=>!Mw(a)).every(a=>r[a]!==void 0);if(!n){var i=e.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function Mw(t){return t&&t[0]==="?"}function Pw(t){return t&&t[0]==="?"?t.slice(1):t}function kw(t,e){if(Jp(t)&&Zp(t,e))return t[e];throw typeof t[e]=="function"&&xw(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Tw(t,e,r){if(Jp(t)&&Zp(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function Iw(t,e){return e in t}function Zp(t,e){return!t||typeof t!="object"?!1:pu(Nw,e)?!0:!(e in Object.prototype||e in Function.prototype)}function xw(t,e){return t==null||typeof t[e]!="function"||pu(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:pu(Lw,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Jp(t){return typeof t=="object"&&t&&t.constructor===Object}var Nw={length:!0,name:!0},Lw={toString:!0,valueOf:!0,toLocaleString:!0};class Rw{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return kw(this.wrappedObject,e)}set(e,r){return Tw(this.wrappedObject,e,r),this}has(e){return Iw(this.wrappedObject,e)}}function Uw(t){return t?t instanceof Map||t instanceof Rw||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var Qp=function(){return Qp=F0.create,F0},Vw=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],jw=St("typed",Vw,function(e){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:a}=e,o=Qp();return o.clear(),o.addTypes([{name:"number",test:Qt},{name:"Complex",test:Vp},{name:"BigNumber",test:Sn},{name:"Fraction",test:jp},{name:"Unit",test:zp},{name:"identifier",test:s=>$n&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(s)},{name:"string",test:$n},{name:"Chain",test:lw},{name:"Array",test:Zt},{name:"Matrix",test:Yr},{name:"DenseMatrix",test:Ny},{name:"SparseMatrix",test:Ly},{name:"Range",test:Ry},{name:"Index",test:jc},{name:"boolean",test:Uy},{name:"ResultSet",test:Vy},{name:"Help",test:jy},{name:"function",test:zy},{name:"Date",test:qy},{name:"RegExp",test:Wy},{name:"null",test:$y},{name:"undefined",test:zc},{name:"AccessorNode",test:Gy},{name:"ArrayNode",test:Ky},{name:"AssignmentNode",test:Yy},{name:"BlockNode",test:Zy},{name:"ConditionalNode",test:Jy},{name:"ConstantNode",test:Qy},{name:"FunctionNode",test:ew},{name:"FunctionAssignmentNode",test:Xy},{name:"IndexNode",test:tw},{name:"Node",test:rw},{name:"ObjectNode",test:nw},{name:"OperatorNode",test:iw},{name:"ParenthesisNode",test:aw},{name:"RangeNode",test:uw},{name:"RelationalNode",test:sw},{name:"SymbolNode",test:ow},{name:"Map",test:Uw},{name:"Object",test:Hy}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(r||Ll(l),bw(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new r(l)}},{from:"number",to:"Complex",convert:function(l){return n||vs(l),new n(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return n||vs(l),new n(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return n||vs(l),new n(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){a||Rl(l);var p=new a(l);if(p.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return p}},{from:"string",to:"number",convert:function(l){var p=Number(l);if(isNaN(p))throw new Error('Cannot convert "'+l+'" to a number');return p}},{from:"string",to:"BigNumber",convert:function(l){r||Ll(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){a||Rl(l);try{return new a(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){n||vs(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return r||Ll(l),new r(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return a||Rl(l),new a(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||zw(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),o.onMismatch=(s,l,p)=>{var c=o.createError(s,l,p);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Ms(l[0])&&p.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(s,l,p)=>{var c=o.createError(s,l,p);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Ms(l[0])&&p.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o});function Ll(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function vs(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function zw(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Rl(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Ea=9e15,Ni=1e9,bc="0123456789abcdef",Is="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",xs="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Dc={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ea,maxE:Ea,crypto:!1},Xp,fi,ft=!0,so="[DecimalError] ",Ti=so+"Invalid argument: ",e1=so+"Precision limit exceeded",t1=so+"crypto unavailable",r1="[object Decimal]",Wr=Math.floor,br=Math.pow,qw=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Ww=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Hw=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,n1=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ln=1e7,nt=7,$w=9007199254740991,Gw=Is.length-1,yc=xs.length-1,Ce={toStringTag:r1};Ce.absoluteValue=Ce.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Je(t)};Ce.ceil=function(){return Je(new this.constructor(this),this.e+1,2)};Ce.clampedTo=Ce.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Ti+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};Ce.comparedTo=Ce.cmp=function(t){var e,r,n,i,a=this,o=a.d,s=(t=new a.constructor(t)).d,l=a.s,p=t.s;if(!o||!s)return!l||!p?NaN:l!==p?l:o===s?0:!o^l<0?1:-1;if(!o[0]||!s[0])return o[0]?l:s[0]?-p:0;if(l!==p)return l;if(a.e!==t.e)return a.e>t.e^l<0?1:-1;for(n=o.length,i=s.length,e=0,r=n<i?n:i;e<r;++e)if(o[e]!==s[e])return o[e]>s[e]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1};Ce.cosine=Ce.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+nt,n.rounding=1,r=Kw(n,o1(n,r)),n.precision=t,n.rounding=e,Je(fi==2||fi==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};Ce.cubeRoot=Ce.cbrt=function(){var t,e,r,n,i,a,o,s,l,p,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(ft=!1,a=c.s*br(c.s*c,1/3),!a||Math.abs(a)==1/0?(r=Lr(c.d),t=c.e,(a=(t-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=br(r,1/3),t=Wr((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?r="5e"+t:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new f(r),n.s=c.s):n=new f(a.toString()),o=(t=f.precision)+3;;)if(s=n,l=s.times(s).times(s),p=l.plus(c),n=Ut(p.plus(c).times(s),p.plus(l),o+2,1),Lr(s.d).slice(0,o)===(r=Lr(n.d)).slice(0,o))if(r=r.slice(o-3,o+1),r=="9999"||!i&&r=="4999"){if(!i&&(Je(s,t+1,0),s.times(s).times(s).eq(c))){n=s;break}o+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Je(n,t+1,1),e=!n.times(n).times(n).eq(c));break}return ft=!0,Je(n,t,f.rounding,e)};Ce.decimalPlaces=Ce.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-Wr(this.e/nt))*nt,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};Ce.dividedBy=Ce.div=function(t){return Ut(this,new this.constructor(t))};Ce.dividedToIntegerBy=Ce.divToInt=function(t){var e=this,r=e.constructor;return Je(Ut(e,new r(t),0,1,1),r.precision,r.rounding)};Ce.equals=Ce.eq=function(t){return this.cmp(t)===0};Ce.floor=function(){return Je(new this.constructor(this),this.e+1,3)};Ce.greaterThan=Ce.gt=function(t){return this.cmp(t)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(t){var e=this.cmp(t);return e==1||e===0};Ce.hyperbolicCosine=Ce.cosh=function(){var t,e,r,n,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;r=o.precision,n=o.rounding,o.precision=r+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/lo(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=Sa(o,1,a.times(e),new o(1),!0);for(var l,p=t,c=new o(8);p--;)l=a.times(a),a=s.minus(l.times(c.minus(l.times(c))));return Je(a,o.precision=r,o.rounding=n,!0)};Ce.hyperbolicSine=Ce.sinh=function(){var t,e,r,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,r=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=Sa(a,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/lo(5,t)),i=Sa(a,2,i,i,!0);for(var o,s=new a(5),l=new a(16),p=new a(20);t--;)o=i.times(i),i=i.times(s.plus(o.times(l.times(o).plus(p))))}return a.precision=e,a.rounding=r,Je(i,e,r,!0)};Ce.hyperbolicTangent=Ce.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,Ut(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};Ce.inverseCosine=Ce.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),i=r.precision,a=r.rounding;return n!==-1?n===0?e.isNeg()?xn(r,i,a):new r(0):new r(NaN):e.isZero()?xn(r,i+4,a).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),t=xn(r,i+4,a).times(.5),r.precision=i,r.rounding=a,t.minus(e))};Ce.inverseHyperbolicCosine=Ce.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,ft=!1,r=r.times(r).minus(1).sqrt().plus(r),ft=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};Ce.inverseHyperbolicSine=Ce.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,ft=!1,r=r.times(r).plus(1).sqrt().plus(r),ft=!0,n.precision=t,n.rounding=e,r.ln())};Ce.inverseHyperbolicTangent=Ce.atanh=function(){var t,e,r,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?Je(new a(i),t,e,!0):(a.precision=r=n-i.e,i=Ut(i.plus(1),new a(1).minus(i),r+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};Ce.inverseSine=Ce.asin=function(){var t,e,r,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),r=a.precision,n=a.rounding,e!==-1?e===0?(t=xn(a,r+4,n).times(.5),t.s=i.s,t):new a(NaN):(a.precision=r+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,i.times(2)))};Ce.inverseTangent=Ce.atan=function(){var t,e,r,n,i,a,o,s,l,p=this,c=p.constructor,f=c.precision,d=c.rounding;if(p.isFinite()){if(p.isZero())return new c(p);if(p.abs().eq(1)&&f+4<=yc)return o=xn(c,f+4,d).times(.25),o.s=p.s,o}else{if(!p.s)return new c(NaN);if(f+4<=yc)return o=xn(c,f+4,d).times(.5),o.s=p.s,o}for(c.precision=s=f+10,c.rounding=1,r=Math.min(28,s/nt+2|0),t=r;t;--t)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(ft=!1,e=Math.ceil(s/nt),n=1,l=p.times(p),o=new c(p),i=p;t!==-1;)if(i=i.times(l),a=o.minus(i.div(n+=2)),i=i.times(l),o=a.plus(i.div(n+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return r&&(o=o.times(2<<r-1)),ft=!0,Je(o,c.precision=f,c.rounding=d,!0)};Ce.isFinite=function(){return!!this.d};Ce.isInteger=Ce.isInt=function(){return!!this.d&&Wr(this.e/nt)>this.d.length-2};Ce.isNaN=function(){return!this.s};Ce.isNegative=Ce.isNeg=function(){return this.s<0};Ce.isPositive=Ce.isPos=function(){return this.s>0};Ce.isZero=function(){return!!this.d&&this.d[0]===0};Ce.lessThan=Ce.lt=function(t){return this.cmp(t)<0};Ce.lessThanOrEqualTo=Ce.lte=function(t){return this.cmp(t)<1};Ce.logarithm=Ce.log=function(t){var e,r,n,i,a,o,s,l,p=this,c=p.constructor,f=c.precision,d=c.rounding,g=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(r=p.d,p.s<0||!r||!r[0]||p.eq(1))return new c(r&&!r[0]?-1/0:p.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)a=!0;else{for(i=r[0];i%10===0;)i/=10;a=i!==1}if(ft=!1,s=f+g,o=Bi(p,s),n=e?Ns(c,s+10):Bi(t,s),l=Ut(o,n,s,1),gu(l.d,i=f,d))do if(s+=10,o=Bi(p,s),n=e?Ns(c,s+10):Bi(t,s),l=Ut(o,n,s,1),!a){+Lr(l.d).slice(i+1,i+15)+1==1e14&&(l=Je(l,f+1,0));break}while(gu(l.d,i+=10,d));return ft=!0,Je(l,f,d)};Ce.minus=Ce.sub=function(t){var e,r,n,i,a,o,s,l,p,c,f,d,g=this,b=g.constructor;if(t=new b(t),!g.d||!t.d)return!g.s||!t.s?t=new b(NaN):g.d?t.s=-t.s:t=new b(t.d||g.s!==t.s?g:NaN),t;if(g.s!=t.s)return t.s=-t.s,g.plus(t);if(p=g.d,d=t.d,s=b.precision,l=b.rounding,!p[0]||!d[0]){if(d[0])t.s=-t.s;else if(p[0])t=new b(g);else return new b(l===3?-0:0);return ft?Je(t,s,l):t}if(r=Wr(t.e/nt),c=Wr(g.e/nt),p=p.slice(),a=c-r,a){for(f=a<0,f?(e=p,a=-a,o=d.length):(e=d,r=c,o=p.length),n=Math.max(Math.ceil(s/nt),o)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=p.length,o=d.length,f=n<o,f&&(o=n),n=0;n<o;n++)if(p[n]!=d[n]){f=p[n]<d[n];break}a=0}for(f&&(e=p,p=d,d=e,t.s=-t.s),o=p.length,n=d.length-o;n>0;--n)p[o++]=0;for(n=d.length;n>a;){if(p[--n]<d[n]){for(i=n;i&&p[--i]===0;)p[i]=Ln-1;--p[i],p[n]+=Ln}p[n]-=d[n]}for(;p[--o]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=oo(p,r),ft?Je(t,s,l):t):new b(l===3?-0:0)};Ce.modulo=Ce.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?Je(new n(r),n.precision,n.rounding):(ft=!1,n.modulo==9?(e=Ut(r,t.abs(),0,3,1),e.s*=t.s):e=Ut(r,t,0,n.modulo,1),e=e.times(t),ft=!0,r.minus(e))};Ce.naturalExponential=Ce.exp=function(){return wc(this)};Ce.naturalLogarithm=Ce.ln=function(){return Bi(this)};Ce.negated=Ce.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Je(t)};Ce.plus=Ce.add=function(t){var e,r,n,i,a,o,s,l,p,c,f=this,d=f.constructor;if(t=new d(t),!f.d||!t.d)return!f.s||!t.s?t=new d(NaN):f.d||(t=new d(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(p=f.d,c=t.d,s=d.precision,l=d.rounding,!p[0]||!c[0])return c[0]||(t=new d(f)),ft?Je(t,s,l):t;if(a=Wr(f.e/nt),n=Wr(t.e/nt),p=p.slice(),i=a-n,i){for(i<0?(r=p,i=-i,o=c.length):(r=c,n=a,o=p.length),a=Math.ceil(s/nt),o=a>o?a+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=p.length,i=c.length,o-i<0&&(i=o,r=c,c=p,p=r),e=0;i;)e=(p[--i]=p[i]+c[i]+e)/Ln|0,p[i]%=Ln;for(e&&(p.unshift(e),++n),o=p.length;p[--o]==0;)p.pop();return t.d=p,t.e=oo(p,n),ft?Je(t,s,l):t};Ce.precision=Ce.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ti+t);return r.d?(e=i1(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};Ce.round=function(){var t=this,e=t.constructor;return Je(new e(t),t.e+1,e.rounding)};Ce.sine=Ce.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+nt,n.rounding=1,r=Zw(n,o1(n,r)),n.precision=t,n.rounding=e,Je(fi>2?r.neg():r,t,e,!0)):new n(NaN)};Ce.squareRoot=Ce.sqrt=function(){var t,e,r,n,i,a,o=this,s=o.d,l=o.e,p=o.s,c=o.constructor;if(p!==1||!s||!s[0])return new c(!p||p<0&&(!s||s[0])?NaN:s?o:1/0);for(ft=!1,p=Math.sqrt(+o),p==0||p==1/0?(e=Lr(s),(e.length+l)%2==0&&(e+="0"),p=Math.sqrt(e),l=Wr((l+1)/2)-(l<0||l%2),p==1/0?e="5e"+l:(e=p.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new c(e)):n=new c(p.toString()),r=(l=c.precision)+3;;)if(a=n,n=a.plus(Ut(o,a,r+2,1)).times(.5),Lr(a.d).slice(0,r)===(e=Lr(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(Je(a,l+1,0),a.times(a).eq(o))){n=a;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Je(n,l+1,1),t=!n.times(n).eq(o));break}return ft=!0,Je(n,l,c.rounding,t)};Ce.tangent=Ce.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=Ut(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,Je(fi==2||fi==4?r.neg():r,t,e,!0)):new n(NaN)};Ce.times=Ce.mul=function(t){var e,r,n,i,a,o,s,l,p,c=this,f=c.constructor,d=c.d,g=(t=new f(t)).d;if(t.s*=c.s,!d||!d[0]||!g||!g[0])return new f(!t.s||d&&!d[0]&&!g||g&&!g[0]&&!d?NaN:!d||!g?t.s/0:t.s*0);for(r=Wr(c.e/nt)+Wr(t.e/nt),l=d.length,p=g.length,l<p&&(a=d,d=g,g=a,o=l,l=p,p=o),a=[],o=l+p,n=o;n--;)a.push(0);for(n=p;--n>=0;){for(e=0,i=l+n;i>n;)s=a[i]+g[n]*d[i-n-1]+e,a[i--]=s%Ln|0,e=s/Ln|0;a[i]=(a[i]+e)%Ln|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=oo(a,r),ft?Je(t,f.precision,f.rounding):t};Ce.toBinary=function(t,e){return Wc(this,2,t,e)};Ce.toDecimalPlaces=Ce.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(an(t,0,Ni),e===void 0?e=n.rounding:an(e,0,8),Je(r,t+r.e+1,e))};Ce.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Yn(n,!0):(an(t,0,Ni),e===void 0?e=i.rounding:an(e,0,8),n=Je(new i(n),t+1,e),r=Yn(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};Ce.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?r=Yn(i):(an(t,0,Ni),e===void 0?e=a.rounding:an(e,0,8),n=Je(new a(i),t+i.e+1,e),r=Yn(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};Ce.toFraction=function(t){var e,r,n,i,a,o,s,l,p,c,f,d,g=this,b=g.d,v=g.constructor;if(!b)return new v(g);if(p=r=new v(1),n=l=new v(0),e=new v(n),a=e.e=i1(b)-g.e-1,o=a%nt,e.d[0]=br(10,o<0?nt+o:o),t==null)t=a>0?e:p;else{if(s=new v(t),!s.isInt()||s.lt(p))throw Error(Ti+s);t=s.gt(e)?a>0?e:p:s}for(ft=!1,s=new v(Lr(b)),c=v.precision,v.precision=a=b.length*nt*2;f=Ut(s,e,0,1,1),i=r.plus(f.times(n)),i.cmp(t)!=1;)r=n,n=i,i=p,p=l.plus(f.times(i)),l=i,i=e,e=s.minus(f.times(i)),s=i;return i=Ut(t.minus(r),n,0,1,1),l=l.plus(i.times(p)),r=r.plus(i.times(n)),l.s=p.s=g.s,d=Ut(p,n,a,1).minus(g).abs().cmp(Ut(l,r,a,1).minus(g).abs())<1?[p,n]:[l,r],v.precision=c,ft=!0,d};Ce.toHexadecimal=Ce.toHex=function(t,e){return Wc(this,16,t,e)};Ce.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:an(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(ft=!1,r=Ut(r,t,0,e,1).times(t),ft=!0,Je(r)):(t.s=r.s,r=t),r};Ce.toNumber=function(){return+this};Ce.toOctal=function(t,e){return Wc(this,8,t,e)};Ce.toPower=Ce.pow=function(t){var e,r,n,i,a,o,s=this,l=s.constructor,p=+(t=new l(t));if(!s.d||!t.d||!s.d[0]||!t.d[0])return new l(br(+s,p));if(s=new l(s),s.eq(1))return s;if(n=l.precision,a=l.rounding,t.eq(1))return Je(s,n,a);if(e=Wr(t.e/nt),e>=t.d.length-1&&(r=p<0?-p:p)<=$w)return i=a1(l,s,r,n),t.s<0?new l(1).div(i):Je(i,n,a);if(o=s.s,o<0){if(e<t.d.length-1)return new l(NaN);if(t.d[e]&1||(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return r=br(+s,p),e=r==0||!isFinite(r)?Wr(p*(Math.log("0."+Lr(s.d))/Math.LN10+s.e+1)):new l(r+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?o/0:0):(ft=!1,l.rounding=s.s=1,r=Math.min(12,(e+"").length),i=wc(t.times(Bi(s,n+r)),n),i.d&&(i=Je(i,n+5,1),gu(i.d,n,a)&&(e=n+10,i=Je(wc(t.times(Bi(s,e+r)),e),e+5,1),+Lr(i.d).slice(n+1,n+15)+1==1e14&&(i=Je(i,n+1,0)))),i.s=o,ft=!0,l.rounding=a,Je(i,n,a))};Ce.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Yn(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(an(t,1,Ni),e===void 0?e=i.rounding:an(e,0,8),n=Je(new i(n),t,e),r=Yn(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};Ce.toSignificantDigits=Ce.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(an(t,1,Ni),e===void 0?e=n.rounding:an(e,0,8)),Je(new n(r),t,e)};Ce.toString=function(){var t=this,e=t.constructor,r=Yn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};Ce.truncated=Ce.trunc=function(){return Je(new this.constructor(this),this.e+1,1)};Ce.valueOf=Ce.toJSON=function(){var t=this,e=t.constructor,r=Yn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function Lr(t){var e,r,n,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)n=t[e]+"",r=nt-n.length,r&&(a+=Fi(r)),a+=n;o=t[e],n=o+"",r=nt-n.length,r&&(a+=Fi(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function an(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Ti+t)}function gu(t,e,r,n){var i,a,o,s;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=nt,i=0):(i=Math.ceil((e+1)/nt),e%=nt),a=br(10,nt-e),s=t[i]%a|0,n==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=r<4&&s==99999||r>3&&s==49999||s==5e4||s==0):o=(r<4&&s+1==a||r>3&&s+1==a/2)&&(t[i+1]/a/100|0)==br(10,e-2)-1||(s==a/2||s==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(n||r<4)&&s==9999||!n&&r>3&&s==4999):o=((n||r<4)&&s+1==a||!n&&r>3&&s+1==a/2)&&(t[i+1]/a/1e3|0)==br(10,e-3)-1,o}function As(t,e,r){for(var n,i=[0],a,o=0,s=t.length;o<s;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=bc.indexOf(t.charAt(o++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function Kw(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/lo(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=Sa(t,1,e.times(i),new t(1));for(var a=r;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=r,e}var Ut=function(){function t(n,i,a){var o,s=0,l=n.length;for(n=n.slice();l--;)o=n[l]*i+s,n[l]=o%a|0,s=o/a|0;return s&&n.unshift(s),n}function e(n,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(n[s]!=i[s]){l=n[s]>i[s]?1:-1;break}return l}function r(n,i,a,o){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*o+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o,s,l){var p,c,f,d,g,b,v,m,D,B,w,C,F,k,O,A,x,U,K,J,j=n.constructor,V=n.s==i.s?1:-1,H=n.d,z=i.d;if(!H||!H[0]||!z||!z[0])return new j(!n.s||!i.s||(H?z&&H[0]==z[0]:!z)?NaN:H&&H[0]==0||!z?V*0:V/0);for(l?(g=1,c=n.e-i.e):(l=Ln,g=nt,c=Wr(n.e/g)-Wr(i.e/g)),K=z.length,x=H.length,D=new j(V),B=D.d=[],f=0;z[f]==(H[f]||0);f++);if(z[f]>(H[f]||0)&&c--,a==null?(k=a=j.precision,o=j.rounding):s?k=a+(n.e-i.e)+1:k=a,k<0)B.push(1),b=!0;else{if(k=k/g+2|0,f=0,K==1){for(d=0,z=z[0],k++;(f<x||d)&&k--;f++)O=d*l+(H[f]||0),B[f]=O/z|0,d=O%z|0;b=d||f<x}else{for(d=l/(z[0]+1)|0,d>1&&(z=t(z,d,l),H=t(H,d,l),K=z.length,x=H.length),A=K,w=H.slice(0,K),C=w.length;C<K;)w[C++]=0;J=z.slice(),J.unshift(0),U=z[0],z[1]>=l/2&&++U;do d=0,p=e(z,w,K,C),p<0?(F=w[0],K!=C&&(F=F*l+(w[1]||0)),d=F/U|0,d>1?(d>=l&&(d=l-1),v=t(z,d,l),m=v.length,C=w.length,p=e(v,w,m,C),p==1&&(d--,r(v,K<m?J:z,m,l))):(d==0&&(p=d=1),v=z.slice()),m=v.length,m<C&&v.unshift(0),r(w,v,C,l),p==-1&&(C=w.length,p=e(z,w,K,C),p<1&&(d++,r(w,K<C?J:z,C,l))),C=w.length):p===0&&(d++,w=[0]),B[f++]=d,p&&w[0]?w[C++]=H[A]||0:(w=[H[A]],C=1);while((A++<x||w[0]!==void 0)&&k--);b=w[0]!==void 0}B[0]||B.shift()}if(g==1)D.e=c,Xp=b;else{for(f=1,d=B[0];d>=10;d/=10)f++;D.e=f+c*g-1,Je(D,s?a+D.e+1:a,o,b)}return D}}();function Je(t,e,r,n){var i,a,o,s,l,p,c,f,d,g=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(i=1,s=f[0];s>=10;s/=10)i++;if(a=e-i,a<0)a+=nt,o=e,c=f[d=0],l=c/br(10,i-o-1)%10|0;else if(d=Math.ceil((a+1)/nt),s=f.length,d>=s)if(n){for(;s++<=d;)f.push(0);c=l=0,i=1,a%=nt,o=a-nt+1}else break e;else{for(c=s=f[d],i=1;s>=10;s/=10)i++;a%=nt,o=a-nt+i,l=o<0?0:c/br(10,i-o-1)%10|0}if(n=n||e<0||f[d+1]!==void 0||(o<0?c:c%br(10,i-o-1)),p=r<4?(l||n)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||n||r==6&&(a>0?o>0?c/br(10,i-o):0:f[d-1])%10&1||r==(t.s<0?8:7)),e<1||!f[0])return f.length=0,p?(e-=t.e+1,f[0]=br(10,(nt-e%nt)%nt),t.e=-e||0):f[0]=t.e=0,t;if(a==0?(f.length=d,s=1,d--):(f.length=d+1,s=br(10,nt-a),f[d]=o>0?(c/br(10,i-o)%br(10,o)|0)*s:0),p)for(;;)if(d==0){for(a=1,o=f[0];o>=10;o/=10)a++;for(o=f[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(t.e++,f[0]==Ln&&(f[0]=1));break}else{if(f[d]+=s,f[d]!=Ln)break;f[d--]=0,s=1}for(a=f.length;f[--a]===0;)f.pop()}return ft&&(t.e>g.maxE?(t.d=null,t.e=NaN):t.e<g.minE&&(t.e=0,t.d=[0])),t}function Yn(t,e,r){if(!t.isFinite())return s1(t);var n,i=t.e,a=Lr(t.d),o=a.length;return e?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+Fi(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+Fi(-i-1)+a,r&&(n=r-o)>0&&(a+=Fi(n))):i>=o?(a+=Fi(i+1-o),r&&(n=r-i-1)>0&&(a=a+"."+Fi(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(a+="."),a+=Fi(n))),a}function oo(t,e){var r=t[0];for(e*=nt;r>=10;r/=10)e++;return e}function Ns(t,e,r){if(e>Gw)throw ft=!0,r&&(t.precision=r),Error(e1);return Je(new t(Is),e,1,!0)}function xn(t,e,r){if(e>yc)throw Error(e1);return Je(new t(xs),e,r,!0)}function i1(t){var e=t.length-1,r=e*nt+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function Fi(t){for(var e="";t--;)e+="0";return e}function a1(t,e,r,n){var i,a=new t(1),o=Math.ceil(n/nt+4);for(ft=!1;;){if(r%2&&(a=a.times(e),P0(a.d,o)&&(i=!0)),r=Wr(r/2),r===0){r=a.d.length-1,i&&a.d[r]===0&&++a.d[r];break}e=e.times(e),P0(e.d,o)}return ft=!0,a}function M0(t){return t.d[t.d.length-1]&1}function u1(t,e,r){for(var n,i=new t(e[0]),a=0;++a<e.length;)if(n=new t(e[a]),n.s)i[r](n)&&(i=n);else{i=n;break}return i}function wc(t,e){var r,n,i,a,o,s,l,p=0,c=0,f=0,d=t.constructor,g=d.rounding,b=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(ft=!1,l=b):l=e,s=new d(.03125);t.e>-2;)t=t.times(s),f+=5;for(n=Math.log(br(2,f))/Math.LN10*2+5|0,l+=n,r=a=o=new d(1),d.precision=l;;){if(a=Je(a.times(t),l,1),r=r.times(++c),s=o.plus(Ut(a,r,l,1)),Lr(s.d).slice(0,l)===Lr(o.d).slice(0,l)){for(i=f;i--;)o=Je(o.times(o),l,1);if(e==null)if(p<3&&gu(o.d,l-n,g,p))d.precision=l+=10,r=a=s=new d(1),c=0,p++;else return Je(o,d.precision=b,g,ft=!0);else return d.precision=b,o}o=s}}function Bi(t,e){var r,n,i,a,o,s,l,p,c,f,d,g=1,b=10,v=t,m=v.d,D=v.constructor,B=D.rounding,w=D.precision;if(v.s<0||!m||!m[0]||!v.e&&m[0]==1&&m.length==1)return new D(m&&!m[0]?-1/0:v.s!=1?NaN:m?0:v);if(e==null?(ft=!1,c=w):c=e,D.precision=c+=b,r=Lr(m),n=r.charAt(0),Math.abs(a=v.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(t),r=Lr(v.d),n=r.charAt(0),g++;a=v.e,n>1?(v=new D("0."+r),a++):v=new D(n+"."+r.slice(1))}else return p=Ns(D,c+2,w).times(a+""),v=Bi(new D(n+"."+r.slice(1)),c-b).plus(p),D.precision=w,e==null?Je(v,w,B,ft=!0):v;for(f=v,l=o=v=Ut(v.minus(1),v.plus(1),c,1),d=Je(v.times(v),c,1),i=3;;){if(o=Je(o.times(d),c,1),p=l.plus(Ut(o,new D(i),c,1)),Lr(p.d).slice(0,c)===Lr(l.d).slice(0,c))if(l=l.times(2),a!==0&&(l=l.plus(Ns(D,c+2,w).times(a+""))),l=Ut(l,new D(g),c,1),e==null)if(gu(l.d,c-b,B,s))D.precision=c+=b,p=o=v=Ut(f.minus(1),f.plus(1),c,1),d=Je(v.times(v),c,1),i=s=1;else return Je(l,D.precision=w,B,ft=!0);else return D.precision=w,l;l=p,i+=2}}function s1(t){return String(t.s*t.s/0)}function Ec(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%nt,r<0&&(n+=nt),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=nt;n<i;)t.d.push(+e.slice(n,n+=nt));e=e.slice(n),n=nt-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),ft&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Yw(t,e){var r,n,i,a,o,s,l,p,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),n1.test(e))return Ec(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(Ww.test(e))r=16,e=e.toLowerCase();else if(qw.test(e))r=2;else if(Hw.test(e))r=8;else throw Error(Ti+e);for(a=e.search(/p/i),a>0?(l=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,n=t.constructor,o&&(e=e.replace(".",""),s=e.length,a=s-a,i=a1(n,new n(r),a,a*2)),p=As(e,r,Ln),c=p.length-1,a=c;p[a]===0;--a)p.pop();return a<0?new n(t.s*0):(t.e=oo(p,c),t.d=p,ft=!1,o&&(t=Ut(t,i,s*4)),l&&(t=t.times(Math.abs(l)<54?br(2,l):Ba.pow(2,l))),ft=!0,t)}function Zw(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:Sa(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/lo(5,r)),e=Sa(t,2,e,e);for(var i,a=new t(5),o=new t(16),s=new t(20);r--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(s))));return e}function Sa(t,e,r,n,i){var a,o,s,l,p=t.precision,c=Math.ceil(p/nt);for(ft=!1,l=r.times(r),s=new t(n);;){if(o=Ut(s.times(l),new t(e++*e++),p,1),s=i?n.plus(o):n.minus(o),n=Ut(o.times(l),new t(e++*e++),p,1),o=s.plus(n),o.d[c]!==void 0){for(a=c;o.d[a]===s.d[a]&&a--;);if(a==-1)break}a=s,s=n,n=o,o=a}return ft=!0,o.d.length=c+1,o}function lo(t,e){for(var r=t;--e;)r*=t;return r}function o1(t,e){var r,n=e.s<0,i=xn(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return fi=n?4:1,e;if(r=e.divToInt(i),r.isZero())fi=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(a))return fi=M0(r)?n?2:3:n?4:1,e;fi=M0(r)?n?1:4:n?3:2}return e.minus(i).abs()}function Wc(t,e,r,n){var i,a,o,s,l,p,c,f,d,g=t.constructor,b=r!==void 0;if(b?(an(r,1,Ni),n===void 0?n=g.rounding:an(n,0,8)):(r=g.precision,n=g.rounding),!t.isFinite())c=s1(t);else{for(c=Yn(t),o=c.indexOf("."),b?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,o>=0&&(c=c.replace(".",""),d=new g(1),d.e=c.length-o,d.d=As(Yn(d),10,i),d.e=d.d.length),f=As(c,10,i),a=l=f.length;f[--l]==0;)f.pop();if(!f[0])c=b?"0p+0":"0";else{if(o<0?a--:(t=new g(t),t.d=f,t.e=a,t=Ut(t,d,r,n,0,i),f=t.d,a=t.e,p=Xp),o=f[r],s=i/2,p=p||f[r+1]!==void 0,p=n<4?(o!==void 0||p)&&(n===0||n===(t.s<0?3:2)):o>s||o===s&&(n===4||p||n===6&&f[r-1]&1||n===(t.s<0?8:7)),f.length=r,p)for(;++f[--r]>i-1;)f[r]=0,r||(++a,f.unshift(1));for(l=f.length;!f[l-1];--l);for(o=0,c="";o<l;o++)c+=bc.charAt(f[o]);if(b){if(l>1)if(e==16||e==8){for(o=e==16?4:3,--l;l%o;l++)c+="0";for(f=As(c,i,e),l=f.length;!f[l-1];--l);for(o=1,c="1.";o<l;o++)c+=bc.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>l)for(a-=l;a--;)c+="0";else a<l&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function P0(t,e){if(t.length>e)return t.length=e,!0}function Jw(t){return new this(t).abs()}function Qw(t){return new this(t).acos()}function Xw(t){return new this(t).acosh()}function eE(t,e){return new this(t).plus(e)}function tE(t){return new this(t).asin()}function rE(t){return new this(t).asinh()}function nE(t){return new this(t).atan()}function iE(t){return new this(t).atanh()}function aE(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,a=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=xn(this,a,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?xn(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=xn(this,a,1).times(.5),r.s=t.s):e.s<0?(this.precision=a,this.rounding=1,r=this.atan(Ut(t,e,a,1)),e=xn(this,a,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(Ut(t,e,a,1)),r}function uE(t){return new this(t).cbrt()}function sE(t){return Je(t=new this(t),t.e+1,2)}function oE(t,e,r){return new this(t).clamp(e,r)}function lE(t){if(!t||typeof t!="object")throw Error(so+"Object expected");var e,r,n,i=t.defaults===!0,a=["precision",1,Ni,"rounding",0,8,"toExpNeg",-Ea,0,"toExpPos",0,Ea,"maxE",0,Ea,"minE",-Ea,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(r=a[e],i&&(this[r]=Dc[r]),(n=t[r])!==void 0)if(Wr(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Ti+r+": "+n);if(r="crypto",i&&(this[r]=Dc[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(t1);else this[r]=!1;else throw Error(Ti+r+": "+n);return this}function cE(t){return new this(t).cos()}function fE(t){return new this(t).cosh()}function l1(t){var e,r,n;function i(a){var o,s,l,p=this;if(!(p instanceof i))return new i(a);if(p.constructor=i,k0(a)){p.s=a.s,ft?!a.d||a.e>i.maxE?(p.e=NaN,p.d=null):a.e<i.minE?(p.e=0,p.d=[0]):(p.e=a.e,p.d=a.d.slice()):(p.e=a.e,p.d=a.d?a.d.slice():a.d);return}if(l=typeof a,l==="number"){if(a===0){p.s=1/a<0?-1:1,p.e=0,p.d=[0];return}if(a<0?(a=-a,p.s=-1):p.s=1,a===~~a&&a<1e7){for(o=0,s=a;s>=10;s/=10)o++;ft?o>i.maxE?(p.e=NaN,p.d=null):o<i.minE?(p.e=0,p.d=[0]):(p.e=o,p.d=[a]):(p.e=o,p.d=[a]);return}else if(a*0!==0){a||(p.s=NaN),p.e=NaN,p.d=null;return}return Ec(p,a.toString())}else if(l!=="string")throw Error(Ti+a);return(s=a.charCodeAt(0))===45?(a=a.slice(1),p.s=-1):(s===43&&(a=a.slice(1)),p.s=1),n1.test(a)?Ec(p,a):Yw(p,a)}if(i.prototype=Ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=lE,i.clone=l1,i.isDecimal=k0,i.abs=Jw,i.acos=Qw,i.acosh=Xw,i.add=eE,i.asin=tE,i.asinh=rE,i.atan=nE,i.atanh=iE,i.atan2=aE,i.cbrt=uE,i.ceil=sE,i.clamp=oE,i.cos=cE,i.cosh=fE,i.div=hE,i.exp=dE,i.floor=pE,i.hypot=gE,i.ln=vE,i.log=mE,i.log10=bE,i.log2=_E,i.max=DE,i.min=yE,i.mod=wE,i.mul=EE,i.pow=AE,i.random=CE,i.round=FE,i.sign=SE,i.sin=BE,i.sinh=OE,i.sqrt=ME,i.sub=PE,i.sum=kE,i.tan=TE,i.tanh=IE,i.trunc=xE,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function hE(t,e){return new this(t).div(e)}function dE(t){return new this(t).exp()}function pE(t){return Je(t=new this(t),t.e+1,3)}function gE(){var t,e,r=new this(0);for(ft=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return ft=!0,new this(1/0);r=e}return ft=!0,r.sqrt()}function k0(t){return t instanceof Ba||t&&t.toStringTag===r1||!1}function vE(t){return new this(t).ln()}function mE(t,e){return new this(t).log(e)}function _E(t){return new this(t).log(2)}function bE(t){return new this(t).log(10)}function DE(){return u1(this,arguments,"lt")}function yE(){return u1(this,arguments,"gt")}function wE(t,e){return new this(t).mod(e)}function EE(t,e){return new this(t).mul(e)}function AE(t,e){return new this(t).pow(e)}function CE(t){var e,r,n,i,a=0,o=new this(1),s=[];if(t===void 0?t=this.precision:an(t,1,Ni),n=Math.ceil(t/nt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(s.push(i%1e7),a+=4);a=n/4}else throw Error(t1);else for(;a<n;)s[a++]=Math.random()*1e7|0;for(n=s[--a],t%=nt,n&&t&&(i=br(10,nt-t),s[a]=(n/i|0)*i);s[a]===0;a--)s.pop();if(a<0)r=0,s=[0];else{for(r=-1;s[0]===0;r-=nt)s.shift();for(n=1,i=s[0];i>=10;i/=10)n++;n<nt&&(r-=nt-n)}return o.e=r,o.d=s,o}function FE(t){return Je(t=new this(t),t.e+1,this.rounding)}function SE(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function BE(t){return new this(t).sin()}function OE(t){return new this(t).sinh()}function ME(t){return new this(t).sqrt()}function PE(t,e){return new this(t).sub(e)}function kE(){var t=0,e=arguments,r=new this(e[t]);for(ft=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return ft=!0,Je(r,this.precision,this.rounding)}function TE(t){return new this(t).tan()}function IE(t){return new this(t).tanh()}function xE(t){return Je(t=new this(t),t.e+1,1)}Ce[Symbol.for("nodejs.util.inspect.custom")]=Ce.toString;Ce[Symbol.toStringTag]="Decimal";var Ba=Ce.constructor=l1(Dc);Is=new Ba(Is);xs=new Ba(xs);var NE="BigNumber",LE=["?on","config"],RE=St(NE,LE,t=>{var{on:e,config:r}=t,n=Ba.clone({precision:r.precision,modulo:Ba.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&n.config({precision:i.precision})}),n},{isClass:!0}),gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ac={},UE={get exports(){return Ac},set exports(t){Ac=t}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=Math.cosh||function(f){return Math.abs(f)<1e-9?1-f:(Math.exp(f)+Math.exp(-f))*.5},i=Math.sinh||function(f){return Math.abs(f)<1e-9?f:(Math.exp(f)-Math.exp(-f))*.5},a=function(f){var d=Math.PI/4;if(-d>f||f>d)return Math.cos(f)-1;var g=f*f;return g*(g*(g*(g*(g*(g*(g*(g/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(f,d){var g=Math.abs(f),b=Math.abs(d);return g<3e3&&b<3e3?Math.sqrt(g*g+b*b):(g<b?(g=b,b=f/d):b=d/f,g*Math.sqrt(1+b*b))},s=function(){throw SyntaxError("Invalid Param")};function l(f,d){var g=Math.abs(f),b=Math.abs(d);return f===0?Math.log(b):d===0?Math.log(g):g<3e3&&b<3e3?Math.log(f*f+d*d)*.5:(f=f/2,d=d/2,.5*Math.log(f*f+d*d)+Math.LN2)}var p=function(f,d){var g={re:0,im:0};if(f==null)g.re=g.im=0;else if(d!==void 0)g.re=f,g.im=d;else switch(typeof f){case"object":if("im"in f&&"re"in f)g.re=f.re,g.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return c.INFINITY;g.re=f.abs*Math.cos(f.arg),g.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return c.INFINITY;g.re=f.r*Math.cos(f.phi),g.im=f.r*Math.sin(f.phi)}else f.length===2?(g.re=f[0],g.im=f[1]):s();break;case"string":g.im=g.re=0;var b=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,m=0;b===null&&s();for(var D=0;D<b.length;D++){var B=b[D];B===" "||B==="	"||B===`
`||(B==="+"?v++:B==="-"?m++:B==="i"||B==="I"?(v+m===0&&s(),b[D+1]!==" "&&!isNaN(b[D+1])?(g.im+=parseFloat((m%2?"-":"")+b[D+1]),D++):g.im+=parseFloat((m%2?"-":"")+"1"),v=m=0):((v+m===0||isNaN(B))&&s(),b[D+1]==="i"||b[D+1]==="I"?(g.im+=parseFloat((m%2?"-":"")+B),D++):g.re+=parseFloat((m%2?"-":"")+B),v=m=0))}v+m>0&&s();break;case"number":g.im=0,g.re=f;break;default:s()}return isNaN(g.re)||isNaN(g.im),g};function c(f,d){if(!(this instanceof c))return new c(f,d);var g=p(f,d);this.re=g.re,this.im=g.im}c.prototype={re:0,im:0,sign:function(){var f=this.abs();return new c(this.re/f,this.im/f)},add:function(f,d){var g=new c(f,d);return this.isInfinite()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:new c(this.re+g.re,this.im+g.im)},sub:function(f,d){var g=new c(f,d);return this.isInfinite()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:new c(this.re-g.re,this.im-g.im)},mul:function(f,d){var g=new c(f,d);return this.isInfinite()&&g.isZero()||this.isZero()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:g.im===0&&this.im===0?new c(this.re*g.re,0):new c(this.re*g.re-this.im*g.im,this.re*g.im+this.im*g.re)},div:function(f,d){var g=new c(f,d);if(this.isZero()&&g.isZero()||this.isInfinite()&&g.isInfinite())return c.NAN;if(this.isInfinite()||g.isZero())return c.INFINITY;if(this.isZero()||g.isInfinite())return c.ZERO;f=this.re,d=this.im;var b=g.re,v=g.im,m,D;return v===0?new c(f/b,d/b):Math.abs(b)<Math.abs(v)?(D=b/v,m=b*D+v,new c((f*D+d)/m,(d*D-f)/m)):(D=v/b,m=v*D+b,new c((f+d*D)/m,(d-f*D)/m))},pow:function(f,d){var g=new c(f,d);if(f=this.re,d=this.im,g.isZero())return c.ONE;if(g.im===0){if(d===0&&f>0)return new c(Math.pow(f,g.re),0);if(f===0)switch((g.re%4+4)%4){case 0:return new c(Math.pow(d,g.re),0);case 1:return new c(0,Math.pow(d,g.re));case 2:return new c(-Math.pow(d,g.re),0);case 3:return new c(0,-Math.pow(d,g.re))}}if(f===0&&d===0&&g.re>0&&g.im>=0)return c.ZERO;var b=Math.atan2(d,f),v=l(f,d);return f=Math.exp(g.re*v-g.im*b),d=g.im*v+g.re*b,new c(f*Math.cos(d),f*Math.sin(d))},sqrt:function(){var f=this.re,d=this.im,g=this.abs(),b,v;if(f>=0){if(d===0)return new c(Math.sqrt(f),0);b=.5*Math.sqrt(2*(g+f))}else b=Math.abs(d)/Math.sqrt(2*(g-f));return f<=0?v=.5*Math.sqrt(2*(g-f)):v=Math.abs(d)/Math.sqrt(2*(g+f)),new c(b,d<0?-v:v)},exp:function(){var f=Math.exp(this.re);return this.im,new c(f*Math.cos(this.im),f*Math.sin(this.im))},expm1:function(){var f=this.re,d=this.im;return new c(Math.expm1(f)*Math.cos(d)+a(d),Math.exp(f)*Math.sin(d))},log:function(){var f=this.re,d=this.im;return new c(l(f,d),Math.atan2(d,f))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var f=this.re,d=this.im;return new c(Math.sin(f)*n(d),Math.cos(f)*i(d))},cos:function(){var f=this.re,d=this.im;return new c(Math.cos(f)*n(d),-Math.sin(f)*i(d))},tan:function(){var f=2*this.re,d=2*this.im,g=Math.cos(f)+n(d);return new c(Math.sin(f)/g,i(d)/g)},cot:function(){var f=2*this.re,d=2*this.im,g=Math.cos(f)-n(d);return new c(-Math.sin(f)/g,i(d)/g)},sec:function(){var f=this.re,d=this.im,g=.5*n(2*d)+.5*Math.cos(2*f);return new c(Math.cos(f)*n(d)/g,Math.sin(f)*i(d)/g)},csc:function(){var f=this.re,d=this.im,g=.5*n(2*d)-.5*Math.cos(2*f);return new c(Math.sin(f)*n(d)/g,-Math.cos(f)*i(d)/g)},asin:function(){var f=this.re,d=this.im,g=new c(d*d-f*f+1,-2*f*d).sqrt(),b=new c(g.re-d,g.im+f).log();return new c(b.im,-b.re)},acos:function(){var f=this.re,d=this.im,g=new c(d*d-f*f+1,-2*f*d).sqrt(),b=new c(g.re-d,g.im+f).log();return new c(Math.PI/2-b.im,b.re)},atan:function(){var f=this.re,d=this.im;if(f===0){if(d===1)return new c(0,1/0);if(d===-1)return new c(0,-1/0)}var g=f*f+(1-d)*(1-d),b=new c((1-d*d-f*f)/g,-2*f/g).log();return new c(-.5*b.im,.5*b.re)},acot:function(){var f=this.re,d=this.im;if(d===0)return new c(Math.atan2(1,f),0);var g=f*f+d*d;return g!==0?new c(f/g,-d/g).atan():new c(f!==0?f/0:0,d!==0?-d/0:0).atan()},asec:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,1/0);var g=f*f+d*d;return g!==0?new c(f/g,-d/g).acos():new c(f!==0?f/0:0,d!==0?-d/0:0).acos()},acsc:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(Math.PI/2,1/0);var g=f*f+d*d;return g!==0?new c(f/g,-d/g).asin():new c(f!==0?f/0:0,d!==0?-d/0:0).asin()},sinh:function(){var f=this.re,d=this.im;return new c(i(f)*Math.cos(d),n(f)*Math.sin(d))},cosh:function(){var f=this.re,d=this.im;return new c(n(f)*Math.cos(d),i(f)*Math.sin(d))},tanh:function(){var f=2*this.re,d=2*this.im,g=n(f)+Math.cos(d);return new c(i(f)/g,Math.sin(d)/g)},coth:function(){var f=2*this.re,d=2*this.im,g=n(f)-Math.cos(d);return new c(i(f)/g,-Math.sin(d)/g)},csch:function(){var f=this.re,d=this.im,g=Math.cos(2*d)-n(2*f);return new c(-2*i(f)*Math.cos(d)/g,2*n(f)*Math.sin(d)/g)},sech:function(){var f=this.re,d=this.im,g=Math.cos(2*d)+n(2*f);return new c(2*n(f)*Math.cos(d)/g,-2*i(f)*Math.sin(d)/g)},asinh:function(){var f=this.im;this.im=-this.re,this.re=f;var d=this.asin();return this.re=-this.im,this.im=f,f=d.re,d.re=-d.im,d.im=f,d},acosh:function(){var f=this.acos();if(f.im<=0){var d=f.re;f.re=-f.im,f.im=d}else{var d=f.im;f.im=-f.re,f.re=d}return f},atanh:function(){var f=this.re,d=this.im,g=f>1&&d===0,b=1-f,v=1+f,m=b*b+d*d,D=m!==0?new c((v*b-d*d)/m,(d*b+v*d)/m):new c(f!==-1?f/0:0,d!==0?d/0:0),B=D.re;return D.re=l(D.re,D.im)/2,D.im=Math.atan2(D.im,B)/2,g&&(D.im=-D.im),D},acoth:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,Math.PI/2);var g=f*f+d*d;return g!==0?new c(f/g,-d/g).atanh():new c(f!==0?f/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var f=this.re,d=this.im;if(d===0)return new c(f!==0?Math.log(f+Math.sqrt(f*f+1)):1/0,0);var g=f*f+d*d;return g!==0?new c(f/g,-d/g).asinh():new c(f!==0?f/0:0,d!==0?-d/0:0).asinh()},asech:function(){var f=this.re,d=this.im;if(this.isZero())return c.INFINITY;var g=f*f+d*d;return g!==0?new c(f/g,-d/g).acosh():new c(f!==0?f/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var f=this.re,d=this.im,g=f*f+d*d;return new c(f/g,-d/g)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(f){return f=Math.pow(10,f||0),new c(Math.ceil(this.re*f)/f,Math.ceil(this.im*f)/f)},floor:function(f){return f=Math.pow(10,f||0),new c(Math.floor(this.re*f)/f,Math.floor(this.im*f)/f)},round:function(f){return f=Math.pow(10,f||0),new c(Math.round(this.re*f)/f,Math.round(this.im*f)/f)},equals:function(f,d){var g=new c(f,d);return Math.abs(g.re-this.re)<=c.EPSILON&&Math.abs(g.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var f=this.re,d=this.im,g="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(f)<c.EPSILON&&(f=0),Math.abs(d)<c.EPSILON&&(d=0),d===0?g+f:(f!==0?(g+=f,g+=" ",d<0?(d=-d,g+="-"):g+="+",g+=" "):d<0&&(d=-d,g+="-"),d!==1&&(g+=d),g+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,t.exports=c})()})(UE);const Pr=Hc(Ac);var VE="Complex",jE=[],zE=St(VE,jE,()=>(Object.defineProperty(Pr,"name",{value:"Complex"}),Pr.prototype.constructor=Pr,Pr.prototype.type="Complex",Pr.prototype.isComplex=!0,Pr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Pr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Pr.prototype.format=function(t){var e="",r=this.im,n=this.re,i=mc(this.re,t),a=mc(this.im,t),o=Qt(t)?t:t?t.precision:null;if(o!==null){var s=Math.pow(10,-o);Math.abs(n/r)<s&&(n=0),Math.abs(r/n)<s&&(r=0)}return r===0?e=i:n===0?r===1?e="i":r===-1?e="-i":e=a+"i":r<0?r===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+a+"i",e},Pr.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Pr(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(Qt(r)){if(zp(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),Qt(n))return new Pr({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Pr.prototype.valueOf=Pr.prototype.toString,Pr.fromJSON=function(t){return new Pr(t)},Pr.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Pr),{isClass:!0}),Cc={},qE={get exports(){return Cc},set exports(t){Cc=t}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=2e3,i={s:1,n:0,d:1};function a(b,v){if(isNaN(b=parseInt(b,10)))throw g.InvalidParameter;return b*v}function o(b,v){if(v===0)throw g.DivisionByZero;var m=Object.create(g.prototype);m.s=b<0?-1:1,b=b<0?-b:b;var D=d(b,v);return m.n=b/D,m.d=v/D,m}function s(b){for(var v={},m=b,D=2,B=4;B<=m;){for(;m%D===0;)m/=D,v[D]=(v[D]||0)+1;B+=1+2*D++}return m!==b?m>1&&(v[m]=(v[m]||0)+1):v[b]=(v[b]||0)+1,v}var l=function(b,v){var m=0,D=1,B=1,w=0,C=0,F=0,k=1,O=1,A=0,x=1,U=1,K=1,J=1e7,j;if(b!=null)if(v!==void 0){if(m=b,D=v,B=m*D,m%1!==0||D%1!==0)throw g.NonIntegerParameter}else switch(typeof b){case"object":{if("d"in b&&"n"in b)m=b.n,D=b.d,"s"in b&&(m*=b.s);else if(0 in b)m=b[0],1 in b&&(D=b[1]);else throw g.InvalidParameter;B=m*D;break}case"number":{if(b<0&&(B=b,b=-b),b%1===0)m=b;else if(b>0){for(b>=1&&(O=Math.pow(10,Math.floor(1+Math.log(b)/Math.LN10)),b/=O);x<=J&&K<=J;)if(j=(A+U)/(x+K),b===j){x+K<=J?(m=A+U,D=x+K):K>x?(m=U,D=K):(m=A,D=x);break}else b>j?(A+=U,x+=K):(U+=A,K+=x),x>J?(m=U,D=K):(m=A,D=x);m*=O}else(isNaN(b)||isNaN(v))&&(D=m=NaN);break}case"string":{if(x=b.match(/\d+|./g),x===null)throw g.InvalidParameter;if(x[A]==="-"?(B=-1,A++):x[A]==="+"&&A++,x.length===A+1?C=a(x[A++],B):x[A+1]==="."||x[A]==="."?(x[A]!=="."&&(w=a(x[A++],B)),A++,(A+1===x.length||x[A+1]==="("&&x[A+3]===")"||x[A+1]==="'"&&x[A+3]==="'")&&(C=a(x[A],B),k=Math.pow(10,x[A].length),A++),(x[A]==="("&&x[A+2]===")"||x[A]==="'"&&x[A+2]==="'")&&(F=a(x[A+1],B),O=Math.pow(10,x[A+1].length)-1,A+=3)):x[A+1]==="/"||x[A+1]===":"?(C=a(x[A],B),k=a(x[A+2],1),A+=3):x[A+3]==="/"&&x[A+1]===" "&&(w=a(x[A],B),C=a(x[A+2],B),k=a(x[A+4],1),A+=5),x.length<=A){D=k*O,B=m=F+D*w+O*C;break}}default:throw g.InvalidParameter}if(D===0)throw g.DivisionByZero;i.s=B<0?-1:1,i.n=Math.abs(m),i.d=Math.abs(D)};function p(b,v,m){for(var D=1;v>0;b=b*b%m,v>>=1)v&1&&(D=D*b%m);return D}function c(b,v){for(;v%2===0;v/=2);for(;v%5===0;v/=5);if(v===1)return 0;for(var m=10%v,D=1;m!==1;D++)if(m=m*10%v,D>n)return 0;return D}function f(b,v,m){for(var D=1,B=p(10,m,v),w=0;w<300;w++){if(D===B)return w;D=D*10%v,B=B*10%v}return 0}function d(b,v){if(!b)return v;if(!v)return b;for(;;){if(b%=v,!b)return v;if(v%=b,!v)return b}}function g(b,v){if(l(b,v),this instanceof g)b=d(i.d,i.n),this.s=i.s,this.n=i.n/b,this.d=i.d/b;else return o(i.s*i.n,i.d)}g.DivisionByZero=new Error("Division by Zero"),g.InvalidParameter=new Error("Invalid argument"),g.NonIntegerParameter=new Error("Parameters must be integer"),g.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(b,v){return l(b,v),o(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(b,v){return l(b,v),o(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(b,v){return l(b,v),o(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(b,v){return l(b,v),o(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(b,v){if(isNaN(this.n)||isNaN(this.d))return new g(NaN);if(b===void 0)return o(this.s*this.n%this.d,1);if(l(b,v),i.n===0&&this.d===0)throw g.DivisionByZero;return o(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(b,v){return l(b,v),o(d(i.n,this.n)*d(i.d,this.d),i.d*this.d)},lcm:function(b,v){return l(b,v),i.n===0&&this.n===0?o(0,1):o(i.n*this.n,d(i.n,this.n)*d(i.d,this.d))},ceil:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.ceil(b*this.s*this.n/this.d),b)},floor:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.floor(b*this.s*this.n/this.d),b)},round:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.round(b*this.s*this.n/this.d),b)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(b,v){if(l(b,v),i.d===1)return i.s<0?o(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):o(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var m=s(this.n),D=s(this.d),B=1,w=1;for(var C in m)if(C!=="1"){if(C==="0"){B=0;break}if(m[C]*=i.n,m[C]%i.d===0)m[C]/=i.d;else return null;B*=Math.pow(C,m[C])}for(var C in D)if(C!=="1"){if(D[C]*=i.n,D[C]%i.d===0)D[C]/=i.d;else return null;w*=Math.pow(C,D[C])}return i.s<0?o(w,B):o(B,w)},equals:function(b,v){return l(b,v),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(b,v){l(b,v);var m=this.s*this.n*i.d-i.s*i.n*this.d;return(0<m)-(m<0)},simplify:function(b){if(isNaN(this.n)||isNaN(this.d))return this;b=b||.001;for(var v=this.abs(),m=v.toContinued(),D=1;D<m.length;D++){for(var B=o(m[D-1],1),w=D-2;w>=0;w--)B=B.inverse().add(m[w]);if(B.sub(v).abs().valueOf()<b)return B.mul(this.s)}return this},divisible:function(b,v){return l(b,v),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(b){var v,m="",D=this.n,B=this.d;return this.s<0&&(m+="-"),B===1?m+=D:(b&&(v=Math.floor(D/B))>0&&(m+=v,m+=" ",D%=B),m+=D,m+="/",m+=B),m},toLatex:function(b){var v,m="",D=this.n,B=this.d;return this.s<0&&(m+="-"),B===1?m+=D:(b&&(v=Math.floor(D/B))>0&&(m+=v,D%=B),m+="\\frac{",m+=D,m+="}{",m+=B,m+="}"),m},toContinued:function(){var b,v=this.n,m=this.d,D=[];if(isNaN(v)||isNaN(m))return D;do D.push(Math.floor(v/m)),b=v%m,v=m,m=b;while(v!==1);return D},toString:function(b){var v=this.n,m=this.d;if(isNaN(v)||isNaN(m))return"NaN";b=b||15;var D=c(v,m),B=f(v,m,D),w=this.s<0?"-":"";if(w+=v/m|0,v%=m,v*=10,v&&(w+="."),D){for(var C=B;C--;)w+=v/m|0,v%=m,v*=10;w+="(";for(var C=D;C--;)w+=v/m|0,v%=m,v*=10;w+=")"}else for(var C=b;v&&C--;)w+=v/m|0,v%=m,v*=10;return w}},Object.defineProperty(g,"__esModule",{value:!0}),g.default=g,g.Fraction=g,t.exports=g})()})(qE);const ci=Hc(Cc);var WE="Fraction",HE=[],$E=St(WE,HE,()=>(Object.defineProperty(ci,"name",{value:"Fraction"}),ci.prototype.constructor=ci,ci.prototype.type="Fraction",ci.prototype.isFraction=!0,ci.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},ci.fromJSON=function(t){return new ci(t)},ci),{isClass:!0}),GE="Matrix",KE=[],YE=St(GE,KE,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function c1(t){return Object.keys(t.signatures||{}).reduce(function(e,r){var n=(r.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var ZE="DenseMatrix",JE=["Matrix"],QE=St(ZE,JE,t=>{var{Matrix:e}=t;function r(c,f){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!$n(f))throw new Error("Invalid datatype: "+f);if(Yr(c))c.type==="DenseMatrix"?(this._data=Fr(c._data),this._size=Fr(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&Zt(c.data)&&Zt(c.size))this._data=c.data,this._size=c.size,B0(this._data,this._size),this._datatype=f||c.datatype;else if(Zt(c))this._data=p(c),this._size=ki(this._data),B0(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+hu(c)+")");this._data=[],this._size=[0],this._datatype=f}}r.prototype=new e,r.prototype.createDenseMatrix=function(c,f){return new r(c,f)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return Ts(this._data,hu)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(c,f){return new r(c,f)},r.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return n(this,c);case 2:case 3:return a(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(c){if(!Zt(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new Tt(c.length,this._size.length);for(var f=0;f<c.length;f++)Jt(c[f],this._size[f]);for(var d=this._data,g=0,b=c.length;g<b;g++){var v=c[g];Jt(v,d.length),d=d[v]}return d},r.prototype.set=function(c,f,d){if(!Zt(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new Tt(c.length,this._size.length,"<");var g,b,v,m=c.map(function(B){return B+1});l(this,m,d);var D=this._data;for(g=0,b=c.length-1;g<b;g++)v=c[g],Jt(v,D.length),D=D[v];return v=c[c.length-1],Jt(v,D.length),D[v]=f,this};function n(c,f){if(!jc(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var g=f.size();if(g.length!==c._size.length)throw new Tt(g.length,c._size.length);for(var b=f.min(),v=f.max(),m=0,D=c._size.length;m<D;m++)Jt(b[m],c._size[m]),Jt(v[m],c._size[m]);return new r(i(c._data,f,g.length,0),c._datatype)}function i(c,f,d,g){var b=g===d-1,v=f.dimension(g);return b?v.map(function(m){return Jt(m,c.length),c[m]}).valueOf():v.map(function(m){Jt(m,c.length);var D=c[m];return i(D,f,d,g+1)}).valueOf()}function a(c,f,d,g){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var b=f.size(),v=f.isScalar(),m;if(Yr(d)?(m=d.size(),d=d.valueOf()):m=ki(d),v){if(m.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,g)}else{if(b.length<c._size.length)throw new Tt(b.length,c._size.length,"<");if(m.length<b.length){for(var D=0,B=0;b[D]===1&&m[D]===1;)D++;for(;b[D]===1;)B++,D++;d=Kp(d,b.length,B,m)}if(!Ps(b,m))throw new Tt(b,m,">");var w=f.max().map(function(k){return k+1});l(c,w,g);var C=b.length,F=0;o(c._data,f,d,C,F)}return c}function o(c,f,d,g,b){var v=b===g-1,m=f.dimension(b);v?m.forEach(function(D,B){Jt(D),c[D]=d[B[0]]}):m.forEach(function(D,B){Jt(D),o(c[D],f,d[B[0]],g,b+1)})}r.prototype.resize=function(c,f,d){if(!Ms(c))throw new TypeError("Array or Matrix expected");var g=c.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),b=d?this.clone():this;return s(b,g,f)};function s(c,f,d){if(f.length===0){for(var g=c._data;Zt(g);)g=g[0];return g}return c._size=f.slice(0),c._data=O0(c._data,c._size,d),c}r.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=Fw(d._data,c);var g=d._size.reduce((b,v)=>b*v);return d._size=qc(c,g),d};function l(c,f,d){for(var g=c._size.slice(0),b=!1;g.length<f.length;)g.push(0),b=!0;for(var v=0,m=f.length;v<m;v++)f[v]>g[v]&&(g[v]=f[v],b=!0);b&&s(c,g,d)}r.prototype.clone=function(){var c=new r({data:Fr(this._data),size:Fr(this._size),datatype:this._datatype});return c},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(c){var f=this,d=c1(c),g=function m(D,B){return Zt(D)?D.map(function(w,C){return m(w,B.concat(C))}):d===1?c(D):d===2?c(D,B):c(D,B,f)},b=g(this._data,[]),v=this._datatype!==void 0?Ts(b,hu):void 0;return new r(b,v)},r.prototype.forEach=function(c){var f=this,d=function g(b,v){Zt(b)?b.forEach(function(m,D){g(m,v.concat(D))}):c(b,v,f)};d(this._data,[])},r.prototype[Symbol.iterator]=function*(){var c=function*f(d,g){if(Zt(d))for(var b=0;b<d.length;b++)yield*f(d[b],g.concat(b));else yield{value:d,index:g}};yield*c(this._data,[])},r.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var g of d)c.push(new r([g],this._datatype));return c},r.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var g=this._data,b=function(D){var B=g.map(w=>[w[D]]);f.push(new r(B,c._datatype))},v=0;v<d[1];v++)b(v);return f},r.prototype.toArray=function(){return Fr(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(c){return tn(this._data,c)},r.prototype.toString=function(){return tn(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(c){if(c){if(Sn(c)&&(c=c.toNumber()),!Qt(c)||!Sr(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,g=this._size[0],b=this._size[1],v=Math.min(g-d,b-f),m=[],D=0;D<v;D++)m[D]=this._data[D+d][D+f];return new r({data:m,size:[v],datatype:this._datatype})},r.diagonal=function(c,f,d,g){if(!Zt(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(O){if(Sn(O)&&(O=O.toNumber()),!Qt(O)||!Sr(O)||O<1)throw new Error("Size values must be positive integers");return O}),d){if(Sn(d)&&(d=d.toNumber()),!Qt(d)||!Sr(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var b=d>0?d:0,v=d<0?-d:0,m=c[0],D=c[1],B=Math.min(m-v,D-b),w;if(Zt(f)){if(f.length!==B)throw new Error("Invalid value array length");w=function(A){return f[A]}}else if(Yr(f)){var C=f.size();if(C.length!==1||C[0]!==B)throw new Error("Invalid matrix length");w=function(A){return f.get([A])}}else w=function(){return f};g||(g=Sn(w(0))?w(0).mul(0):0);var F=[];if(c.length>0){F=O0(F,c,g);for(var k=0;k<B;k++)F[k+v][k+b]=w(k)}return new r({data:F,size:[m,D]})},r.fromJSON=function(c){return new r(c)},r.prototype.swapRows=function(c,f){if(!Qt(c)||!Sr(c)||!Qt(f)||!Sr(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Jt(c,this._size[0]),Jt(f,this._size[0]),r._swapRows(c,f,this._data),this},r._swapRows=function(c,f,d){var g=d[c];d[c]=d[f],d[f]=g};function p(c){for(var f=0,d=c.length;f<d;f++){var g=c[f];Zt(g)?c[f]=p(g):g&&g.isMatrix===!0&&(c[f]=p(g.valueOf()))}return c}return r},{isClass:!0});function co(t,e,r){return t&&typeof t.map=="function"?t.map(function(n){return co(n,e)}):e(t)}var T0="isInteger",XE=["typed"],eA=St(T0,XE,t=>{var{typed:e}=t;return e(T0,{number:Sr,BigNumber:function(n){return n.isInt()},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":e.referToSelf(r=>n=>co(n,r))})}),tA="number",f1="number, number";function h1(t,e){return t+e}h1.signature=f1;function d1(t,e){return t*e}d1.signature=f1;function p1(t){return-t}p1.signature=tA;function rA(t,e,r){if(r==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return n.lte(i.times(r))}return!1}function nA(t,e,r){return ks(t.re,e.re,r)&&ks(t.im,e.im,r)}var iA=St("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),Ls="equalScalar",aA=["typed","config"],uA=St(Ls,aA,t=>{var{typed:e,config:r}=t,n=iA({typed:e});return e(Ls,{"boolean, boolean":function(a,o){return a===o},"number, number":function(a,o){return ks(a,o,r.epsilon)},"BigNumber, BigNumber":function(a,o){return a.eq(o)||rA(a,o,r.epsilon)},"Fraction, Fraction":function(a,o){return a.equals(o)},"Complex, Complex":function(a,o){return nA(a,o,r.epsilon)}},n)});St(Ls,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Ls,{"number, number":function(i,a){return ks(i,a,r.epsilon)}})});var sA="SparseMatrix",oA=["typed","equalScalar","Matrix"],lA=St(sA,oA,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(v,m){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!$n(m))throw new Error("Invalid datatype: "+m);if(Yr(v))a(this,v,m);else if(v&&Zt(v.index)&&Zt(v.ptr)&&Zt(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=m||v.datatype;else if(Zt(v))o(this,v,m);else{if(v)throw new TypeError("Unsupported type of data ("+hu(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function a(v,m,D){m.type==="SparseMatrix"?(v._values=m._values?Fr(m._values):void 0,v._index=Fr(m._index),v._ptr=Fr(m._ptr),v._size=Fr(m._size),v._datatype=D||m._datatype):o(v,m.valueOf(),D||m._datatype)}function o(v,m,D){v._values=[],v._index=[],v._ptr=[],v._datatype=D;var B=m.length,w=0,C=r,F=0;if($n(D)&&(C=e.find(r,[D,D])||r,F=e.convert(0,D)),B>0){var k=0;do{v._ptr.push(v._index.length);for(var O=0;O<B;O++){var A=m[O];if(Zt(A)){if(k===0&&w<A.length&&(w=A.length),k<A.length){var x=A[k];C(x,F)||(v._values.push(x),v._index.push(O))}}else k===0&&w<1&&(w=1),C(A,F)||(v._values.push(A),v._index.push(O))}k++}while(k<w)}v._ptr.push(v._index.length),v._size=[B,w]}i.prototype=new n,i.prototype.createSparseMatrix=function(v,m){return new i(v,m)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Ts(this._values,hu)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(v,m){return new i(v,m)},i.prototype.density=function(){var v=this._size[0],m=this._size[1];return v!==0&&m!==0?this._index.length/(v*m):0},i.prototype.subset=function(v,m,D){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,v);case 2:case 3:return l(this,v,m,D);default:throw new SyntaxError("Wrong number of arguments")}};function s(v,m){if(!jc(m))throw new TypeError("Invalid index");var D=m.isScalar();if(D)return v.get(m.min());var B=m.size();if(B.length!==v._size.length)throw new Tt(B.length,v._size.length);var w,C,F,k,O=m.min(),A=m.max();for(w=0,C=v._size.length;w<C;w++)Jt(O[w],v._size[w]),Jt(A[w],v._size[w]);var x=v._values,U=v._index,K=v._ptr,J=m.dimension(0),j=m.dimension(1),V=[],H=[];J.forEach(function(te,le){H[te]=le[0],V[te]=!0});var z=x?[]:void 0,Q=[],X=[];return j.forEach(function(te){for(X.push(Q.length),F=K[te],k=K[te+1];F<k;F++)w=U[F],V[w]===!0&&(Q.push(H[w]),z&&z.push(x[F]))}),X.push(Q.length),new i({values:z,index:Q,ptr:X,size:B,datatype:v._datatype})}function l(v,m,D,B){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var w=m.size(),C=m.isScalar(),F;if(Yr(D)?(F=D.size(),D=D.toArray()):F=ki(D),C){if(F.length!==0)throw new TypeError("Scalar expected");v.set(m.min(),D,B)}else{if(w.length!==1&&w.length!==2)throw new Tt(w.length,v._size.length,"<");if(F.length<w.length){for(var k=0,O=0;w[k]===1&&F[k]===1;)k++;for(;w[k]===1;)O++,k++;D=Kp(D,w.length,O,F)}if(!Ps(w,F))throw new Tt(w,F,">");if(w.length===1){var A=m.dimension(0);A.forEach(function(K,J){Jt(K),v.set([K,0],D[J[0]],B)})}else{var x=m.dimension(0),U=m.dimension(1);x.forEach(function(K,J){Jt(K),U.forEach(function(j,V){Jt(j),v.set([K,j],D[J[0]][V[0]],B)})})}}return v}i.prototype.get=function(v){if(!Zt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Tt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=v[0],D=v[1];Jt(m,this._size[0]),Jt(D,this._size[1]);var B=p(m,this._ptr[D],this._ptr[D+1],this._index);return B<this._ptr[D+1]&&this._index[B]===m?this._values[B]:0},i.prototype.set=function(v,m,D){if(!Zt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Tt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var B=v[0],w=v[1],C=this._size[0],F=this._size[1],k=r,O=0;$n(this._datatype)&&(k=e.find(r,[this._datatype,this._datatype])||r,O=e.convert(0,this._datatype)),(B>C-1||w>F-1)&&(d(this,Math.max(B+1,C),Math.max(w+1,F),D),C=this._size[0],F=this._size[1]),Jt(B,C),Jt(w,F);var A=p(B,this._ptr[w],this._ptr[w+1],this._index);return A<this._ptr[w+1]&&this._index[A]===B?k(m,O)?c(A,w,this._values,this._index,this._ptr):this._values[A]=m:k(m,O)||f(A,B,w,m,this._values,this._index,this._ptr),this};function p(v,m,D,B){if(D-m===0)return D;for(var w=m;w<D;w++)if(B[w]===v)return w;return m}function c(v,m,D,B,w){D.splice(v,1),B.splice(v,1);for(var C=m+1;C<w.length;C++)w[C]--}function f(v,m,D,B,w,C,F){w.splice(v,0,B),C.splice(v,0,m);for(var k=D+1;k<F.length;k++)F[k]++}i.prototype.resize=function(v,m,D){if(!Ms(v))throw new TypeError("Array or Matrix expected");var B=v.valueOf().map(C=>Array.isArray(C)&&C.length===1?C[0]:C);if(B.length!==2)throw new Error("Only two dimensions matrix are supported");B.forEach(function(C){if(!Qt(C)||!Sr(C)||C<0)throw new TypeError("Invalid size, must contain positive integers (size: "+tn(B)+")")});var w=D?this.clone():this;return d(w,B[0],B[1],m)};function d(v,m,D,B){var w=B||0,C=r,F=0;$n(v._datatype)&&(C=e.find(r,[v._datatype,v._datatype])||r,F=e.convert(0,v._datatype),w=e.convert(w,v._datatype));var k=!C(w,F),O=v._size[0],A=v._size[1],x,U,K;if(D>A){for(U=A;U<D;U++)if(v._ptr[U]=v._values.length,k)for(x=0;x<O;x++)v._values.push(w),v._index.push(x);v._ptr[D]=v._values.length}else D<A&&(v._ptr.splice(D+1,A-D),v._values.splice(v._ptr[D],v._values.length),v._index.splice(v._ptr[D],v._index.length));if(A=D,m>O){if(k){var J=0;for(U=0;U<A;U++){v._ptr[U]=v._ptr[U]+J,K=v._ptr[U+1]+J;var j=0;for(x=O;x<m;x++,j++)v._values.splice(K+j,0,w),v._index.splice(K+j,0,x),J++}v._ptr[A]=v._values.length}}else if(m<O){var V=0;for(U=0;U<A;U++){v._ptr[U]=v._ptr[U]-V;var H=v._ptr[U],z=v._ptr[U+1]-V;for(K=H;K<z;K++)x=v._index[K],x>m-1&&(v._values.splice(K,1),v._index.splice(K,1),V++)}v._ptr[U]=v._values.length}return v._size[0]=m,v._size[1]=D,v}i.prototype.reshape=function(v,m){if(!Zt(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(te){if(!Qt(te)||!Sr(te)||te<=-2||te===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+tn(v)+")")});var D=this._size[0]*this._size[1];v=qc(v,D);var B=v[0]*v[1];if(D!==B)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=m?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return w;for(var C=[],F=0;F<w._ptr.length;F++)for(var k=0;k<w._ptr[F+1]-w._ptr[F];k++)C.push(F);for(var O=w._values.slice(),A=w._index.slice(),x=0;x<w._index.length;x++){var U=A[x],K=C[x],J=U*w._size[1]+K;C[x]=J%v[1],A[x]=Math.floor(J/v[1])}w._values.length=0,w._index.length=0,w._ptr.length=v[1]+1,w._size=v.slice();for(var j=0;j<w._ptr.length;j++)w._ptr[j]=0;for(var V=0;V<O.length;V++){var H=A[V],z=C[V],Q=O[V],X=p(H,w._ptr[z],w._ptr[z+1],w._index);f(X,H,z,Q,w._values,w._index,w._ptr)}return w},i.prototype.clone=function(){var v=new i({values:this._values?Fr(this._values):void 0,index:Fr(this._index),ptr:Fr(this._ptr),size:Fr(this._size),datatype:this._datatype});return v},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(v,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var D=this,B=this._size[0],w=this._size[1],C=c1(v),F=function(O,A,x){return C===1?v(O):C===2?v(O,[A,x]):v(O,[A,x],D)};return g(this,0,B-1,0,w-1,F,m)};function g(v,m,D,B,w,C,F){var k=[],O=[],A=[],x=r,U=0;$n(v._datatype)&&(x=e.find(r,[v._datatype,v._datatype])||r,U=e.convert(0,v._datatype));for(var K=function(Oe,Pe,Te){Oe=C(Oe,Pe,Te),x(Oe,U)||(k.push(Oe),O.push(Pe))},J=B;J<=w;J++){A.push(k.length);var j=v._ptr[J],V=v._ptr[J+1];if(F)for(var H=j;H<V;H++){var z=v._index[H];z>=m&&z<=D&&K(v._values[H],z-m,J-B)}else{for(var Q={},X=j;X<V;X++){var te=v._index[X];Q[te]=v._values[X]}for(var le=m;le<=D;le++){var be=le in Q?Q[le]:0;K(be,le-m,J-B)}}}return A.push(k.length),new i({values:k,index:O,ptr:A,size:[D-m+1,w-B+1]})}i.prototype.forEach=function(v,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var D=this,B=this._size[0],w=this._size[1],C=0;C<w;C++){var F=this._ptr[C],k=this._ptr[C+1];if(m)for(var O=F;O<k;O++){var A=this._index[O];v(this._values[O],[A,C],D)}else{for(var x={},U=F;U<k;U++){var K=this._index[U];x[K]=this._values[U]}for(var J=0;J<B;J++){var j=J in x?x[J]:0;v(j,[J,C],D)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],m=0;m<v;m++)for(var D=this._ptr[m],B=this._ptr[m+1],w=D;w<B;w++){var C=this._index[w];yield{value:this._values[w],index:[C,m]}}},i.prototype.toArray=function(){return b(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return b(this._values,this._index,this._ptr,this._size,!1)};function b(v,m,D,B,w){var C=B[0],F=B[1],k=[],O,A;for(O=0;O<C;O++)for(k[O]=[],A=0;A<F;A++)k[O][A]=0;for(A=0;A<F;A++)for(var x=D[A],U=D[A+1],K=x;K<U;K++)O=m[K],k[O][A]=v?w?Fr(v[K]):v[K]:1;return k}return i.prototype.format=function(v){for(var m=this._size[0],D=this._size[1],B=this.density(),w="Sparse Matrix ["+tn(m,v)+" x "+tn(D,v)+"] density: "+tn(B,v)+`
`,C=0;C<D;C++)for(var F=this._ptr[C],k=this._ptr[C+1],O=F;O<k;O++){var A=this._index[O];w+=`
    (`+tn(A,v)+", "+tn(C,v)+") ==> "+(this._values?tn(this._values[O],v):"X")}return w},i.prototype.toString=function(){return tn(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(v){if(v){if(Sn(v)&&(v=v.toNumber()),!Qt(v)||!Sr(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var m=v>0?v:0,D=v<0?-v:0,B=this._size[0],w=this._size[1],C=Math.min(B-D,w-m),F=[],k=[],O=[];O[0]=0;for(var A=m;A<w&&F.length<C;A++)for(var x=this._ptr[A],U=this._ptr[A+1],K=x;K<U;K++){var J=this._index[K];if(J===A-m+D){F.push(this._values[K]),k[F.length-1]=J-D;break}}return O.push(F.length),new i({values:F,index:k,ptr:O,size:[C,1]})},i.fromJSON=function(v){return new i(v)},i.diagonal=function(v,m,D,B,w){if(!Zt(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(te){if(Sn(te)&&(te=te.toNumber()),!Qt(te)||!Sr(te)||te<1)throw new Error("Size values must be positive integers");return te}),D){if(Sn(D)&&(D=D.toNumber()),!Qt(D)||!Sr(D))throw new TypeError("The parameter k must be an integer number")}else D=0;var C=r,F=0;$n(w)&&(C=e.find(r,[w,w])||r,F=e.convert(0,w));var k=D>0?D:0,O=D<0?-D:0,A=v[0],x=v[1],U=Math.min(A-O,x-k),K;if(Zt(m)){if(m.length!==U)throw new Error("Invalid value array length");K=function(le){return m[le]}}else if(Yr(m)){var J=m.size();if(J.length!==1||J[0]!==U)throw new Error("Invalid matrix length");K=function(le){return m.get([le])}}else K=function(){return m};for(var j=[],V=[],H=[],z=0;z<x;z++){H.push(j.length);var Q=z-k;if(Q>=0&&Q<U){var X=K(Q);C(X,F)||(V.push(Q+O),j.push(X))}}return H.push(j.length),new i({values:j,index:V,ptr:H,size:[A,x]})},i.prototype.swapRows=function(v,m){if(!Qt(v)||!Sr(v)||!Qt(m)||!Sr(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Jt(v,this._size[0]),Jt(m,this._size[0]),i._swapRows(v,m,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(v,m,D,B,w){for(var C=B[v],F=B[v+1],k=C;k<F;k++)w(D[k],m[k])},i._swapRows=function(v,m,D,B,w,C){for(var F=0;F<D;F++){var k=C[F],O=C[F+1],A=p(v,k,O,w),x=p(m,k,O,w);if(A<O&&x<O&&w[A]===v&&w[x]===m){if(B){var U=B[A];B[A]=B[x],B[x]=U}continue}if(A<O&&w[A]===v&&(x>=O||w[x]!==m)){var K=B?B[A]:void 0;w.splice(x,0,m),B&&B.splice(x,0,K),w.splice(x<=A?A+1:A,1),B&&B.splice(x<=A?A+1:A,1);continue}if(x<O&&w[x]===m&&(A>=O||w[A]!==v)){var J=B?B[x]:void 0;w.splice(A,0,v),B&&B.splice(A,0,J),w.splice(A<=x?x+1:x,1),B&&B.splice(A<=x?x+1:x,1)}}},i},{isClass:!0}),I0="matrix",cA=["typed","Matrix","DenseMatrix","SparseMatrix"],fA=St(I0,cA,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(I0,{"":function(){return a([])},string:function(s){return a([],s)},"string, string":function(s,l){return a([],s,l)},Array:function(s){return a(s)},Matrix:function(s){return a(s,s.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(o,s,l){if(s==="dense"||s==="default"||s===void 0)return new n(o,l);if(s==="sparse")return new i(o,l);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),x0="unaryMinus",hA=["typed"],dA=St(x0,hA,t=>{var{typed:e}=t;return e(x0,{number:p1,"Complex | BigNumber | Fraction":r=>r.neg(),Unit:e.referToSelf(r=>n=>{var i=n.clone();return i.value=e.find(r,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(r=>n=>co(n,r))})}),N0="addScalar",pA=["typed"],gA=St(N0,pA,t=>{var{typed:e}=t;return e(N0,{"number, number":h1,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),vA="matAlgo11xS0s",mA=["typed","equalScalar"],_A=St(vA,mA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o,s){var l=i._values,p=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=f[0],b=f[1],v,m=r,D=0,B=o;typeof d=="string"&&(v=d,m=e.find(r,[v,v]),D=e.convert(0,v),a=e.convert(a,v),B=e.find(o,[v,v]));for(var w=[],C=[],F=[],k=0;k<b;k++){F[k]=C.length;for(var O=c[k],A=c[k+1],x=O;x<A;x++){var U=p[x],K=s?B(a,l[x]):B(l[x],a);m(K,D)||(C.push(U),w.push(K))}}return F[b]=C.length,i.createSparseMatrix({values:w,index:C,ptr:F,size:[g,b],datatype:v})}}),bA="matAlgo12xSfs",DA=["typed","DenseMatrix"],yA=St(bA,DA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,o,s){var l=i._values,p=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=f[0],b=f[1],v,m=o;typeof d=="string"&&(v=d,a=e.convert(a,v),m=e.find(o,[v,v]));for(var D=[],B=[],w=[],C=0;C<b;C++){for(var F=C+1,k=c[C],O=c[C+1],A=k;A<O;A++){var x=p[A];B[x]=l[A],w[x]=F}for(var U=0;U<g;U++)C===0&&(D[U]=[]),w[U]===F?D[U][C]=s?m(a,B[U]):m(B[U],a):D[U][C]=s?m(a,0):m(0,a)}return new r({data:D,size:[g,b],datatype:v})}}),wA="matAlgo14xDs",EA=["typed"],g1=St(wA,EA,t=>{var{typed:e}=t;return function(i,a,o,s){var l=i._data,p=i._size,c=i._datatype,f,d=o;typeof c=="string"&&(f=c,a=e.convert(a,f),d=e.find(o,[f,f]));var g=p.length>0?r(d,0,p,p[0],l,a,s):[];return i.createDenseMatrix({data:g,size:Fr(p),datatype:f})};function r(n,i,a,o,s,l,p){var c=[];if(i===a.length-1)for(var f=0;f<o;f++)c[f]=p?n(l,s[f]):n(s[f],l);else for(var d=0;d<o;d++)c[d]=r(n,i+1,a,a[i+1],s[d],l,p);return c}}),AA="matAlgo01xDSid",CA=["typed"],v1=St(AA,CA,t=>{var{typed:e}=t;return function(n,i,a,o){var s=n._data,l=n._size,p=n._datatype,c=i._values,f=i._index,d=i._ptr,g=i._size,b=i._datatype;if(l.length!==g.length)throw new Tt(l.length,g.length);if(l[0]!==g[0]||l[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+g+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],m=l[1],D=typeof p=="string"&&p===b?p:void 0,B=D?e.find(a,[D,D]):a,w,C,F=[];for(w=0;w<v;w++)F[w]=[];var k=[],O=[];for(C=0;C<m;C++){for(var A=C+1,x=d[C],U=d[C+1],K=x;K<U;K++)w=f[K],k[w]=o?B(c[K],s[w][C]):B(s[w][C],c[K]),O[w]=A;for(w=0;w<v;w++)O[w]===A?F[w][C]=k[w]:F[w][C]=s[w][C]}return n.createDenseMatrix({data:F,size:[v,m],datatype:D})}}),FA="matAlgo04xSidSid",SA=["typed","equalScalar"],BA=St(FA,SA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,l=i._index,p=i._ptr,c=i._size,f=i._datatype,d=a._values,g=a._index,b=a._ptr,v=a._size,m=a._datatype;if(c.length!==v.length)throw new Tt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var D=c[0],B=c[1],w,C=r,F=0,k=o;typeof f=="string"&&f===m&&(w=f,C=e.find(r,[w,w]),F=e.convert(0,w),k=e.find(o,[w,w]));var O=s&&d?[]:void 0,A=[],x=[],U=s&&d?[]:void 0,K=s&&d?[]:void 0,J=[],j=[],V,H,z,Q,X;for(H=0;H<B;H++){x[H]=A.length;var te=H+1;for(Q=p[H],X=p[H+1],z=Q;z<X;z++)V=l[z],A.push(V),J[V]=te,U&&(U[V]=s[z]);for(Q=b[H],X=b[H+1],z=Q;z<X;z++)if(V=g[z],J[V]===te){if(U){var le=k(U[V],d[z]);C(le,F)?J[V]=null:U[V]=le}}else A.push(V),j[V]=te,K&&(K[V]=d[z]);if(U&&K)for(z=x[H];z<A.length;)V=A[z],J[V]===te?(O[z]=U[V],z++):j[V]===te?(O[z]=K[V],z++):A.splice(z,1)}return x[B]=A.length,i.createSparseMatrix({values:O,index:A,ptr:x,size:[D,B],datatype:w})}}),OA="matAlgo10xSids",MA=["typed","DenseMatrix"],m1=St(OA,MA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,o,s){var l=i._values,p=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=f[0],b=f[1],v,m=o;typeof d=="string"&&(v=d,a=e.convert(a,v),m=e.find(o,[v,v]));for(var D=[],B=[],w=[],C=0;C<b;C++){for(var F=C+1,k=c[C],O=c[C+1],A=k;A<O;A++){var x=p[A];B[x]=l[A],w[x]=F}for(var U=0;U<g;U++)C===0&&(D[U]=[]),w[U]===F?D[U][C]=s?m(a,B[U]):m(B[U],a):D[U][C]=a}return new r({data:D,size:[g,b],datatype:v})}}),PA="matAlgo13xDD",kA=["typed"],TA=St(PA,kA,t=>{var{typed:e}=t;return function(i,a,o){var s=i._data,l=i._size,p=i._datatype,c=a._data,f=a._size,d=a._datatype,g=[];if(l.length!==f.length)throw new Tt(l.length,f.length);for(var b=0;b<l.length;b++){if(l[b]!==f[b])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");g[b]=l[b]}var v,m=o;typeof p=="string"&&p===d&&(v=p,m=e.find(o,[v,v]));var D=g.length>0?r(m,0,g,g[0],s,c):[];return i.createDenseMatrix({data:D,size:g,datatype:v})};function r(n,i,a,o,s,l){var p=[];if(i===a.length-1)for(var c=0;c<o;c++)p[c]=n(s[c],l[c]);else for(var f=0;f<o;f++)p[f]=r(n,i+1,a,a[i+1],s[f],l[f]);return p}}),IA="broadcast",xA=["concat"],NA=St(IA,xA,t=>{var{concat:e}=t;return function(a,o){var s=Math.max(a._size.length,o._size.length);if(a._size.length===o._size.length&&a._size.every((m,D)=>m===o._size[D]))return[a,o];for(var l=r(a._size,s,0),p=r(o._size,s,0),c=[],f=0;f<s;f++)c[f]=Math.max(l[f],p[f]);for(var d=0;d<s;d++)i(l,c,d),i(p,c,d);var g=a.clone(),b=o.clone();g._size.length<s?g.reshape(r(g._size,s,1)):b._size.length<s&&b.reshape(r(b._size,s,1));for(var v=0;v<s;v++)g._size[v]<c[v]&&(g=n(g,c[v],v)),b._size[v]<c[v]&&(b=n(b,c[v],v));return[g,b]};function r(a,o,s){return[...Array(o-a.length).fill(s),...a]}function n(a,o,s){return e(...Array(o).fill(a),s)}function i(a,o,s){if(a[s]<o[s]&a[s]>1)throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(a,") not possible to broadcast dimension ").concat(s," with size ").concat(a[s]," to size ").concat(o[s]))}}),LA="matrixAlgorithmSuite",RA=["typed","matrix","concat"],_1=St(LA,RA,t=>{var{typed:e,matrix:r,concat:n}=t,i=TA({typed:e}),a=g1({typed:e}),o=NA({concat:n});return function(l){var p=l.elop,c=l.SD||l.DS,f;p?(f={"DenseMatrix, DenseMatrix":(v,m)=>i(...o(v,m),p),"Array, Array":(v,m)=>i(...o(r(v),r(m)),p).valueOf(),"Array, DenseMatrix":(v,m)=>i(...o(r(v),m),p),"DenseMatrix, Array":(v,m)=>i(...o(v,r(m)),p)},l.SS&&(f["SparseMatrix, SparseMatrix"]=(v,m)=>l.SS(...o(v,m),p,!1)),l.DS&&(f["DenseMatrix, SparseMatrix"]=(v,m)=>l.DS(...o(v,m),p,!1),f["Array, SparseMatrix"]=(v,m)=>l.DS(...o(r(v),m),p,!1)),c&&(f["SparseMatrix, DenseMatrix"]=(v,m)=>c(...o(m,v),p,!0),f["SparseMatrix, Array"]=(v,m)=>c(...o(r(m),v),p,!0))):(f={"DenseMatrix, DenseMatrix":e.referToSelf(v=>(m,D)=>i(...o(m,D),v)),"Array, Array":e.referToSelf(v=>(m,D)=>i(...o(r(m),r(D)),v).valueOf()),"Array, DenseMatrix":e.referToSelf(v=>(m,D)=>i(...o(r(m),D),v)),"DenseMatrix, Array":e.referToSelf(v=>(m,D)=>i(...o(m,r(D)),v))},l.SS&&(f["SparseMatrix, SparseMatrix"]=e.referToSelf(v=>(m,D)=>l.SS(...o(m,D),v,!1))),l.DS&&(f["DenseMatrix, SparseMatrix"]=e.referToSelf(v=>(m,D)=>l.DS(...o(m,D),v,!1)),f["Array, SparseMatrix"]=e.referToSelf(v=>(m,D)=>l.DS(...o(r(m),D),v,!1))),c&&(f["SparseMatrix, DenseMatrix"]=e.referToSelf(v=>(m,D)=>c(...o(D,m),v,!0)),f["SparseMatrix, Array"]=e.referToSelf(v=>(m,D)=>c(...o(r(D),m),v,!0))));var d=l.scalar||"any",g=l.Ds||l.Ss;g&&(p?(f["DenseMatrix,"+d]=(v,m)=>a(v,m,p,!1),f[d+", DenseMatrix"]=(v,m)=>a(m,v,p,!0),f["Array,"+d]=(v,m)=>a(r(v),m,p,!1).valueOf(),f[d+", Array"]=(v,m)=>a(r(m),v,p,!0).valueOf()):(f["DenseMatrix,"+d]=e.referToSelf(v=>(m,D)=>a(m,D,v,!1)),f[d+", DenseMatrix"]=e.referToSelf(v=>(m,D)=>a(D,m,v,!0)),f["Array,"+d]=e.referToSelf(v=>(m,D)=>a(r(m),D,v,!1).valueOf()),f[d+", Array"]=e.referToSelf(v=>(m,D)=>a(r(D),m,v,!0).valueOf())));var b=l.sS!==void 0?l.sS:l.Ss;return p?(l.Ss&&(f["SparseMatrix,"+d]=(v,m)=>l.Ss(v,m,p,!1)),b&&(f[d+", SparseMatrix"]=(v,m)=>b(m,v,p,!0))):(l.Ss&&(f["SparseMatrix,"+d]=e.referToSelf(v=>(m,D)=>l.Ss(m,D,v,!1))),b&&(f[d+", SparseMatrix"]=e.referToSelf(v=>(m,D)=>b(D,m,v,!0)))),p&&p.signatures&&fw(f,p.signatures),f}}),UA="matAlgo03xDSf",VA=["typed"],jA=St(UA,VA,t=>{var{typed:e}=t;return function(n,i,a,o){var s=n._data,l=n._size,p=n._datatype,c=i._values,f=i._index,d=i._ptr,g=i._size,b=i._datatype;if(l.length!==g.length)throw new Tt(l.length,g.length);if(l[0]!==g[0]||l[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+g+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],m=l[1],D,B=0,w=a;typeof p=="string"&&p===b&&(D=p,B=e.convert(0,D),w=e.find(a,[D,D]));for(var C=[],F=0;F<v;F++)C[F]=[];for(var k=[],O=[],A=0;A<m;A++){for(var x=A+1,U=d[A],K=d[A+1],J=U;J<K;J++){var j=f[J];k[j]=o?w(c[J],s[j][A]):w(s[j][A],c[J]),O[j]=x}for(var V=0;V<v;V++)O[V]===x?C[V][A]=k[V]:C[V][A]=o?w(B,s[V][A]):w(s[V][A],B)}return n.createDenseMatrix({data:C,size:[v,m],datatype:D})}}),zA="matAlgo05xSfSf",qA=["typed","equalScalar"],WA=St(zA,qA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,l=i._index,p=i._ptr,c=i._size,f=i._datatype,d=a._values,g=a._index,b=a._ptr,v=a._size,m=a._datatype;if(c.length!==v.length)throw new Tt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var D=c[0],B=c[1],w,C=r,F=0,k=o;typeof f=="string"&&f===m&&(w=f,C=e.find(r,[w,w]),F=e.convert(0,w),k=e.find(o,[w,w]));var O=s&&d?[]:void 0,A=[],x=[],U=O?[]:void 0,K=O?[]:void 0,J=[],j=[],V,H,z,Q;for(H=0;H<B;H++){x[H]=A.length;var X=H+1;for(z=p[H],Q=p[H+1];z<Q;z++)V=l[z],A.push(V),J[V]=X,U&&(U[V]=s[z]);for(z=b[H],Q=b[H+1];z<Q;z++)V=g[z],J[V]!==X&&A.push(V),j[V]=X,K&&(K[V]=d[z]);if(O)for(z=x[H];z<A.length;){V=A[z];var te=J[V],le=j[V];if(te===X||le===X){var be=te===X?U[V]:F,we=le===X?K[V]:F,Oe=k(be,we);C(Oe,F)?A.splice(z,1):(O.push(Oe),z++)}}}return x[B]=A.length,i.createSparseMatrix({values:O,index:A,ptr:x,size:[D,B],datatype:w})}}),HA="multiplyScalar",$A=["typed"],GA=St(HA,$A,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":d1,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),L0="multiply",KA=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],YA=St(L0,KA,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:a,dot:o}=t,s=_A({typed:e,equalScalar:a}),l=g1({typed:e});function p(F,k){switch(F.length){case 1:switch(k.length){case 1:if(F[0]!==k[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(F[0]!==k[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+F[0]+") must match Matrix rows ("+k[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+k.length+" dimensions)")}break;case 2:switch(k.length){case 1:if(F[1]!==k[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+F[1]+") must match Vector length ("+k[0]+")");break;case 2:if(F[1]!==k[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+F[1]+") must match Matrix B rows ("+k[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+k.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+F.length+" dimensions)")}}function c(F,k,O){if(O===0)throw new Error("Cannot multiply two empty vectors");return o(F,k)}function f(F,k){if(k.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(F,k)}function d(F,k){var O=F._data,A=F._size,x=F._datatype,U=k._data,K=k._size,J=k._datatype,j=A[0],V=K[1],H,z=n,Q=i;x&&J&&x===J&&typeof x=="string"&&(H=x,z=e.find(n,[H,H]),Q=e.find(i,[H,H]));for(var X=[],te=0;te<V;te++){for(var le=Q(O[0],U[0][te]),be=1;be<j;be++)le=z(le,Q(O[be],U[be][te]));X[te]=le}return F.createDenseMatrix({data:X,size:[V],datatype:H})}var g=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":B}),b=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":D,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":C});function v(F,k){var O=F._data,A=F._size,x=F._datatype,U=k._data,K=k._datatype,J=A[0],j=A[1],V,H=n,z=i;x&&K&&x===K&&typeof x=="string"&&(V=x,H=e.find(n,[V,V]),z=e.find(i,[V,V]));for(var Q=[],X=0;X<J;X++){for(var te=O[X],le=z(te[0],U[0]),be=1;be<j;be++)le=H(le,z(te[be],U[be]));Q[X]=le}return F.createDenseMatrix({data:Q,size:[J],datatype:V})}function m(F,k){var O=F._data,A=F._size,x=F._datatype,U=k._data,K=k._size,J=k._datatype,j=A[0],V=A[1],H=K[1],z,Q=n,X=i;x&&J&&x===J&&typeof x=="string"&&(z=x,Q=e.find(n,[z,z]),X=e.find(i,[z,z]));for(var te=[],le=0;le<j;le++){var be=O[le];te[le]=[];for(var we=0;we<H;we++){for(var Oe=X(be[0],U[0][we]),Pe=1;Pe<V;Pe++)Oe=Q(Oe,X(be[Pe],U[Pe][we]));te[le][we]=Oe}}return F.createDenseMatrix({data:te,size:[j,H],datatype:z})}function D(F,k){var O=F._data,A=F._size,x=F._datatype,U=k._values,K=k._index,J=k._ptr,j=k._size,V=k._datatype;if(!U)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var H=A[0],z=j[1],Q,X=n,te=i,le=a,be=0;x&&V&&x===V&&typeof x=="string"&&(Q=x,X=e.find(n,[Q,Q]),te=e.find(i,[Q,Q]),le=e.find(a,[Q,Q]),be=e.convert(0,Q));for(var we=[],Oe=[],Pe=[],Te=k.createSparseMatrix({values:we,index:Oe,ptr:Pe,size:[H,z],datatype:Q}),Re=0;Re<z;Re++){Pe[Re]=Oe.length;var Ue=J[Re],We=J[Re+1];if(We>Ue)for(var Ye=0,xe=0;xe<H;xe++){for(var Dt=xe+1,Et=void 0,ht=Ue;ht<We;ht++){var lt=K[ht];Ye!==Dt?(Et=te(O[xe][lt],U[ht]),Ye=Dt):Et=X(Et,te(O[xe][lt],U[ht]))}Ye===Dt&&!le(Et,be)&&(Oe.push(xe),we.push(Et))}}return Pe[z]=Oe.length,Te}function B(F,k){var O=F._values,A=F._index,x=F._ptr,U=F._datatype;if(!O)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var K=k._data,J=k._datatype,j=F._size[0],V=k._size[0],H=[],z=[],Q=[],X,te=n,le=i,be=a,we=0;U&&J&&U===J&&typeof U=="string"&&(X=U,te=e.find(n,[X,X]),le=e.find(i,[X,X]),be=e.find(a,[X,X]),we=e.convert(0,X));var Oe=[],Pe=[];Q[0]=0;for(var Te=0;Te<V;Te++){var Re=K[Te];if(!be(Re,we))for(var Ue=x[Te],We=x[Te+1],Ye=Ue;Ye<We;Ye++){var xe=A[Ye];Pe[xe]?Oe[xe]=te(Oe[xe],le(Re,O[Ye])):(Pe[xe]=!0,z.push(xe),Oe[xe]=le(Re,O[Ye]))}}for(var Dt=z.length,Et=0;Et<Dt;Et++){var ht=z[Et];H[Et]=Oe[ht]}return Q[1]=z.length,F.createSparseMatrix({values:H,index:z,ptr:Q,size:[j,1],datatype:X})}function w(F,k){var O=F._values,A=F._index,x=F._ptr,U=F._datatype;if(!O)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var K=k._data,J=k._datatype,j=F._size[0],V=k._size[0],H=k._size[1],z,Q=n,X=i,te=a,le=0;U&&J&&U===J&&typeof U=="string"&&(z=U,Q=e.find(n,[z,z]),X=e.find(i,[z,z]),te=e.find(a,[z,z]),le=e.convert(0,z));for(var be=[],we=[],Oe=[],Pe=F.createSparseMatrix({values:be,index:we,ptr:Oe,size:[j,H],datatype:z}),Te=[],Re=[],Ue=0;Ue<H;Ue++){Oe[Ue]=we.length;for(var We=Ue+1,Ye=0;Ye<V;Ye++){var xe=K[Ye][Ue];if(!te(xe,le))for(var Dt=x[Ye],Et=x[Ye+1],ht=Dt;ht<Et;ht++){var lt=A[ht];Re[lt]!==We?(Re[lt]=We,we.push(lt),Te[lt]=X(xe,O[ht])):Te[lt]=Q(Te[lt],X(xe,O[ht]))}}for(var Pt=Oe[Ue],yr=we.length,It=Pt;It<yr;It++){var hr=we[It];be[It]=Te[hr]}}return Oe[H]=we.length,Pe}function C(F,k){var O=F._values,A=F._index,x=F._ptr,U=F._datatype,K=k._values,J=k._index,j=k._ptr,V=k._datatype,H=F._size[0],z=k._size[1],Q=O&&K,X,te=n,le=i;U&&V&&U===V&&typeof U=="string"&&(X=U,te=e.find(n,[X,X]),le=e.find(i,[X,X]));for(var be=Q?[]:void 0,we=[],Oe=[],Pe=F.createSparseMatrix({values:be,index:we,ptr:Oe,size:[H,z],datatype:X}),Te=Q?[]:void 0,Re=[],Ue,We,Ye,xe,Dt,Et,ht,lt,Pt=0;Pt<z;Pt++){Oe[Pt]=we.length;var yr=Pt+1;for(Dt=j[Pt],Et=j[Pt+1],xe=Dt;xe<Et;xe++)if(lt=J[xe],Q)for(We=x[lt],Ye=x[lt+1],Ue=We;Ue<Ye;Ue++)ht=A[Ue],Re[ht]!==yr?(Re[ht]=yr,we.push(ht),Te[ht]=le(K[xe],O[Ue])):Te[ht]=te(Te[ht],le(K[xe],O[Ue]));else for(We=x[lt],Ye=x[lt+1],Ue=We;Ue<Ye;Ue++)ht=A[Ue],Re[ht]!==yr&&(Re[ht]=yr,we.push(ht));if(Q)for(var It=Oe[Pt],hr=we.length,Ze=It;Ze<hr;Ze++){var Xt=we[Ze];be[Ze]=Te[Xt]}}return Oe[z]=we.length,Pe}return e(L0,i,{"Array, Array":e.referTo("Matrix, Matrix",F=>(k,O)=>{p(ki(k),ki(O));var A=F(r(k),r(O));return Yr(A)?A.valueOf():A}),"Matrix, Matrix":function(k,O){var A=k.size(),x=O.size();return p(A,x),A.length===1?x.length===1?c(k,O,A[0]):f(k,O):x.length===1?g(k,O):b(k,O)},"Matrix, Array":e.referTo("Matrix,Matrix",F=>(k,O)=>F(k,r(O))),"Array, Matrix":e.referToSelf(F=>(k,O)=>F(r(k,O.storage()),O)),"SparseMatrix, any":function(k,O){return s(k,O,i,!1)},"DenseMatrix, any":function(k,O){return l(k,O,i,!1)},"any, SparseMatrix":function(k,O){return s(O,k,i,!0)},"any, DenseMatrix":function(k,O){return l(O,k,i,!0)},"Array, any":function(k,O){return l(r(k),O,i,!1).valueOf()},"any, Array":function(k,O){return l(r(O),k,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(F=>(k,O,A)=>{for(var x=F(k,O),U=0;U<A.length;U++)x=F(x,A[U]);return x})})}),R0="subtract",ZA=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix","concat"],JA=St(R0,ZA,t=>{var{typed:e,matrix:r,equalScalar:n,addScalar:i,unaryMinus:a,DenseMatrix:o,concat:s}=t,l=v1({typed:e}),p=jA({typed:e}),c=WA({typed:e,equalScalar:n}),f=m1({typed:e,DenseMatrix:o}),d=yA({typed:e,DenseMatrix:o}),g=_1({typed:e,matrix:r,concat:s});return e(R0,{"number, number":(b,v)=>b-v,"Complex, Complex":(b,v)=>b.sub(v),"BigNumber, BigNumber":(b,v)=>b.minus(v),"Fraction, Fraction":(b,v)=>b.sub(v),"Unit, Unit":e.referToSelf(b=>(v,m)=>{if(v.value===null)throw new Error("Parameter x contains a unit with undefined value");if(m.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!v.equalBase(m))throw new Error("Units do not match");var D=v.clone();return D.value=e.find(b,[D.valueType(),m.valueType()])(D.value,m.value),D.fixPrefix=!1,D})},g({SS:c,DS:l,SD:p,Ss:d,sS:f}))}),U0="conj",QA=["typed"],XA=St(U0,QA,t=>{var{typed:e}=t;return e(U0,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":e.referToSelf(r=>n=>co(n,r))})}),V0="concat",e3=["typed","matrix","isInteger"],t3=St(V0,e3,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(V0,{"...Array | Matrix | number | BigNumber":function(a){var o,s=a.length,l=-1,p,c=!1,f=[];for(o=0;o<s;o++){var d=a[o];if(Yr(d)&&(c=!0),Qt(d)||Sn(d)){if(o!==s-1)throw new Error("Dimension must be specified as last argument");if(p=l,l=d.valueOf(),!n(l))throw new TypeError("Integer number expected for dimension");if(l<0||o>0&&l>p)throw new Xi(l,p+1)}else{var g=Fr(d).valueOf(),b=ki(g);if(f[o]=g,p=l,l=b.length-1,o>0&&l!==p)throw new Tt(p+1,l+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var v=f.shift();f.length;)v=b1(v,f.shift(),l,0);return c?r(v):v},"...string":function(a){return a.join("")}})});function b1(t,e,r,n){if(n<r){if(t.length!==e.length)throw new Tt(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=b1(t[a],e[a],r,n+1);return i}else return t.concat(e)}function r3(){throw new Error('No "matrix" implementation available')}var j0="size",n3=["typed","config","?matrix"],i3=St(j0,n3,t=>{var{typed:e,config:r,matrix:n}=t;return e(j0,{Matrix:function(a){return a.create(a.size())},Array:ki,string:function(a){return r.matrix==="Array"?[a.length]:n([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return r.matrix==="Array"?[]:n?n([]):r3()}})}),z0="add",a3=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],u3=St(z0,a3,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:a,SparseMatrix:o,concat:s}=t,l=v1({typed:e}),p=BA({typed:e,equalScalar:i}),c=m1({typed:e,DenseMatrix:a}),f=_1({typed:e,matrix:r,concat:s});return e(z0,{"any, any":n,"any, any, ...any":e.referToSelf(d=>(g,b,v)=>{for(var m=d(g,b),D=0;D<v.length;D++)m=d(m,v[D]);return m})},f({elop:n,DS:l,SS:p,Ss:c}))}),q0="dot",s3=["typed","addScalar","multiplyScalar","conj","size"],o3=St(q0,s3,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:a}=t;return e(q0,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":l});function o(c,f){var d=p(c),g=p(f),b,v;if(d.length===1)b=d[0];else if(d.length===2&&d[1]===1)b=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(g.length===1)v=g[0];else if(g.length===2&&g[1]===1)v=g[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+g.join(", ")+")");if(b!==v)throw new RangeError("Vectors must have equal length ("+b+" != "+v+")");if(b===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return b}function s(c,f){var d=o(c,f),g=Yr(c)?c._data:c,b=Yr(c)?c._datatype:void 0,v=Yr(f)?f._data:f,m=Yr(f)?f._datatype:void 0,D=p(c).length===2,B=p(f).length===2,w=r,C=n;if(b&&m&&b===m&&typeof b=="string"){var F=b;w=e.find(r,[F,F]),C=e.find(n,[F,F])}if(!D&&!B){for(var k=C(i(g[0]),v[0]),O=1;O<d;O++)k=w(k,C(i(g[O]),v[O]));return k}if(!D&&B){for(var A=C(i(g[0]),v[0][0]),x=1;x<d;x++)A=w(A,C(i(g[x]),v[x][0]));return A}if(D&&!B){for(var U=C(i(g[0][0]),v[0]),K=1;K<d;K++)U=w(U,C(i(g[K][0]),v[K]));return U}if(D&&B){for(var J=C(i(g[0][0]),v[0][0]),j=1;j<d;j++)J=w(J,C(i(g[j][0]),v[j][0]));return J}}function l(c,f){o(c,f);for(var d=c._index,g=c._values,b=f._index,v=f._values,m=0,D=r,B=n,w=0,C=0;w<d.length&&C<b.length;){var F=d[w],k=b[C];if(F<k){w++;continue}if(F>k){C++;continue}F===k&&(m=D(m,B(g[w],v[C])),w++,C++)}return m}function p(c){return Yr(c)?c.size():a(c)}}),l3=RE({config:io}),c3=zE({}),f3=$E({}),$c=YE({}),fo=QE({Matrix:$c}),un=jw({BigNumber:l3,Complex:c3,DenseMatrix:fo,Fraction:f3}),ho=gA({typed:un}),h3=XA({typed:un}),po=uA({config:io,typed:un}),d3=eA({typed:un}),D1=GA({typed:un}),y1=lA({Matrix:$c,equalScalar:po,typed:un}),p3=dA({typed:un}),Fu=fA({DenseMatrix:fo,Matrix:$c,SparseMatrix:y1,typed:un}),g3=i3({matrix:Fu,config:io,typed:un}),w1=t3({isInteger:d3,matrix:Fu,typed:un}),xr=u3({DenseMatrix:fo,SparseMatrix:y1,addScalar:ho,concat:w1,equalScalar:po,matrix:Fu,typed:un}),v3=o3({addScalar:ho,conj:h3,multiplyScalar:D1,size:g3,typed:un}),zr=YA({addScalar:ho,dot:v3,equalScalar:po,matrix:Fu,multiplyScalar:D1,typed:un}),ms=JA({DenseMatrix:fo,addScalar:ho,concat:w1,equalScalar:po,matrix:Fu,typed:un,unaryMinus:p3});function m3(t){let e,r,n;return{c(){e=ut("circle"),this.h()},l(i){e=st(i,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),R(e).forEach(M),this.h()},h(){S(e,"cx",r=t[0][0]),S(e,"cy",n=t[0][1]),S(e,"r",t[1]),S(e,"stroke",t[3]),S(e,"stroke-width",t[2]),Bt(e,"fill","rgba(0,0,0,0)")},m(i,a){se(i,e,a)},p(i,[a]){a&1&&r!==(r=i[0][0])&&S(e,"cx",r),a&1&&n!==(n=i[0][1])&&S(e,"cy",n),a&2&&S(e,"r",i[1]),a&8&&S(e,"stroke",i[3]),a&4&&S(e,"stroke-width",i[2])},i:Me,o:Me,d(i){i&&M(e)}}}function _3(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class Gc extends Xe{constructor(e){super(),et(this,e,_3,m3,tt,{xy:0,radius:1,stroke:2,color:3})}}function b3(t){let e,r,n,i,a;return{c(){e=ut("circle"),this.h()},l(o){e=st(o,"circle",{cx:!0,cy:!0,r:!0}),R(e).forEach(M),this.h()},h(){S(e,"cx",r=t[0][0]),S(e,"cy",n=t[0][1]),S(e,"r",t[1]),Bt(e,"fill",t[2])},m(o,s){se(o,e,s),i||(a=[_e(e,"mouseover",t[3]),_e(e,"mouseout",t[4]),_e(e,"mousedown",t[5]),_e(e,"touchstart",t[5])],i=!0)},p(o,[s]){s&1&&r!==(r=o[0][0])&&S(e,"cx",r),s&1&&n!==(n=o[0][1])&&S(e,"cy",n),s&2&&S(e,"r",o[1]),s&4&&Bt(e,"fill",o[2])},i:Me,o:Me,d(o){o&&M(e),i=!1,zt(a)}}}function D3(t,e,r){let{xy:n=[100,100]}=e,{radius:i=5}=e,{color:a="black"}=e,{hoverColor:o="white"}=e,{handleMouseDown:s=d=>{}}=e,l=a;function p(){r(2,l=o)}function c(){r(2,l=a)}function f(d){s(d)}return t.$$set=d=>{"xy"in d&&r(0,n=d.xy),"radius"in d&&r(1,i=d.radius),"color"in d&&r(6,a=d.color),"hoverColor"in d&&r(7,o=d.hoverColor),"handleMouseDown"in d&&r(8,s=d.handleMouseDown)},[n,i,l,p,c,f,a,o,s]}class Pa extends Xe{constructor(e){super(),et(this,e,D3,b3,tt,{xy:0,radius:1,color:6,hoverColor:7,handleMouseDown:8})}}function y3(t){let e,r,n,i,a;return{c(){e=ut("line"),this.h()},l(o){e=st(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-dasharray":!0,"stroke-width":!0}),R(e).forEach(M),this.h()},h(){S(e,"x1",r=t[0][0]),S(e,"y1",n=t[0][1]),S(e,"x2",i=t[1][0]),S(e,"y2",a=t[1][1]),S(e,"stroke",t[3]),S(e,"stroke-dasharray","10,10"),S(e,"stroke-width",t[2])},m(o,s){se(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&S(e,"x1",r),s&1&&n!==(n=o[0][1])&&S(e,"y1",n),s&2&&i!==(i=o[1][0])&&S(e,"x2",i),s&2&&a!==(a=o[1][1])&&S(e,"y2",a),s&8&&S(e,"stroke",o[3]),s&4&&S(e,"stroke-width",o[2])},i:Me,o:Me,d(o){o&&M(e)}}}function w3(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class E1 extends Xe{constructor(e){super(),et(this,e,w3,y3,tt,{p1:0,p2:1,stroke:2,color:3})}}function E3(t){let e,r;return{c(){e=q("p"),r=Se(t[6]),this.h()},l(n){e=W(n,"P",{});var i=R(e);r=Be(i,t[6]),i.forEach(M),this.h()},h(){Bt(e,"color",t[3]),Bt(e,"user-select","none"),Bt(e,"margin","0"),Bt(e,"pointer-events","none"),Bt(e,"text-align",t[4]),Bt(e,"font-size",`${t[5]}px`),Bt(e,"font-family","sans-serif"),Bt(e,"font-style","italic")},m(n,i){se(n,e,i),T(e,r)},p(n,i){i&64&&fr(r,n[6]),i&8&&Bt(e,"color",n[3]),i&16&&Bt(e,"text-align",n[4]),i&32&&Bt(e,"font-size",`${n[5]}px`)},d(n){n&&M(e)}}}function A3(t){let e,r;return{c(){e=q("img"),this.h()},l(n){e=W(n,"IMG",{src:!0}),this.h()},h(){y0(e.src,r=t[2])||S(e,"src",r),Bt(e,"user-select","none"),Bt(e,"width","100%"),Bt(e,"height","100%"),Bt(e,"object-fit","contain")},m(n,i){se(n,e,i)},p(n,i){i&4&&!y0(e.src,r=n[2])&&S(e,"src",r)},d(n){n&&M(e)}}}function C3(t){let e,r,n,i,a,o,s;function l(f,d){return d&4&&(n=null),n==null&&(n=!!f[2].startsWith("http")),n?A3:E3}let p=l(t,-1),c=p(t);return{c(){e=ut("foreignObject"),r=q("div"),c.c(),this.h()},l(f){e=st(f,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var d=R(e);r=W(d,"DIV",{class:!0});var g=R(r);c.l(g),g.forEach(M),d.forEach(M),this.h()},h(){S(r,"class","h-full flex flex-col justify-center"),S(e,"x",i=t[0][0]),S(e,"y",a=t[0][1]),S(e,"width",o=t[1][0]),S(e,"height",s=t[1][1])},m(f,d){se(f,e,d),T(e,r),c.m(r,null)},p(f,[d]){p===(p=l(f,d))&&c?c.p(f,d):(c.d(1),c=p(f),c&&(c.c(),c.m(r,null))),d&1&&i!==(i=f[0][0])&&S(e,"x",i),d&1&&a!==(a=f[0][1])&&S(e,"y",a),d&2&&o!==(o=f[1][0])&&S(e,"width",o),d&2&&s!==(s=f[1][1])&&S(e,"height",s)},i:Me,o:Me,d(f){f&&M(e),c.d()}}}function F3(t,e,r){let{xy:n=[100,100]}=e,{wh:i=[100,100]}=e,{text:a=""}=e,{color:o="rgba(96,117,151, 1)"}=e,{textAlign:s="center"}=e,{fontSize:l=12}=e,p=a;if(a.length>40){const c=a.split(",");c.length>1?p=c[0]+"...":p=a.slice(0,20)+"..."}return t.$$set=c=>{"xy"in c&&r(0,n=c.xy),"wh"in c&&r(1,i=c.wh),"text"in c&&r(2,a=c.text),"color"in c&&r(3,o=c.color),"textAlign"in c&&r(4,s=c.textAlign),"fontSize"in c&&r(5,l=c.fontSize)},[n,i,a,o,s,l,p]}class go extends Xe{constructor(e){super(),et(this,e,F3,C3,tt,{xy:0,wh:1,text:2,color:3,textAlign:4,fontSize:5})}}function S3(t){let e,r,n,i,a,o,s,l,p,c,f;return{c(){e=ut("circle"),i=Ee(),a=ut("foreignObject"),o=q("p"),s=Se(t[4]),this.h()},l(d){e=st(d,"circle",{cx:!0,cy:!0,r:!0}),R(e).forEach(M),i=Ae(d),a=st(d,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var g=R(a);o=W(g,"P",{style:!0,class:!0});var b=R(o);s=Be(b,t[4]),b.forEach(M),g.forEach(M),this.h()},h(){S(e,"cx",r=t[0][0]),S(e,"cy",n=t[0][1]),S(e,"r",t[1]),Bt(e,"fill",t[3]),Bt(o,"color",t[2]),Bt(o,"user-select","none"),Bt(o,"margin","0"),S(o,"class","heavy svelte-6if1p2"),S(a,"x",l=t[0][0]-t[1]),S(a,"y",p=t[0][1]-t[1]),S(a,"width",c=t[1]*2),S(a,"height",f=t[1]*2)},m(d,g){se(d,e,g),se(d,i,g),se(d,a,g),T(a,o),T(o,s)},p(d,[g]){g&1&&r!==(r=d[0][0])&&S(e,"cx",r),g&1&&n!==(n=d[0][1])&&S(e,"cy",n),g&2&&S(e,"r",d[1]),g&8&&Bt(e,"fill",d[3]),g&16&&fr(s,d[4]),g&4&&Bt(o,"color",d[2]),g&3&&l!==(l=d[0][0]-d[1])&&S(a,"x",l),g&3&&p!==(p=d[0][1]-d[1])&&S(a,"y",p),g&2&&c!==(c=d[1]*2)&&S(a,"width",c),g&2&&f!==(f=d[1]*2)&&S(a,"height",f)},i:Me,o:Me,d(d){d&&M(e),d&&M(i),d&&M(a)}}}function B3(t,e,r){let{xy:n=[100,100]}=e,{radius:i=25}=e,{textColor:a="rgba(96,117,151, 1)"}=e,{bgColor:o="black"}=e,{weight:s=""}=e;return t.$$set=l=>{"xy"in l&&r(0,n=l.xy),"radius"in l&&r(1,i=l.radius),"textColor"in l&&r(2,a=l.textColor),"bgColor"in l&&r(3,o=l.bgColor),"weight"in l&&r(4,s=l.weight)},[n,i,a,o,s]}class O3 extends Xe{constructor(e){super(),et(this,e,B3,S3,tt,{xy:0,radius:1,textColor:2,bgColor:3,weight:4})}}function Nn(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=360+Math.atan2(i,n)*180/Math.PI,o=Math.sqrt(n*n+i*i);return[a%360,o/r]}function Nr(t,e,r){const n=e[0]%360*Math.PI/180,i=[r*e[1]*Math.cos(n),r*e[1]*Math.sin(n)];return xr(t,i)}function vu(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=Math.sqrt(n*n+i*i),o=r/a,s=e[0]+n*o,l=e[1]+i*o;return[s,l]}function M3(t,e,r){const n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)<r}function Kc(t,e){const r=e%360*Math.PI/180;let n,i;const a=Math.cos(r),o=Math.sin(r);return n=(t[0]+5)*-1.2*a,i=(t[1]+5)*-1.2*o,n-=t[0],i-=t[1],[n,i]}function jr(t){return t<0?360+-1*(Math.abs(t)%360):t>360?t%360:t}function P3(t){return Math.round(t*100)}function nn(t){return Math.round(Math.max(1-Math.pow(1-t,2),.25)*100)/100}function vo(t){let e="parsedWeight";switch(t){case gt.Circle:e="circleWeight";break;case gt.Bars:e="barWeight";break;case gt.Embed:e="embedWeight";break;case gt.Pie:e="pieWeight";break;case gt.Ring:e="ringWeight";break;case gt.Random:e="randomWeight";break}return e}function k3(t){const e=t.weightMode,r=vo(e);return t.weightedPrompts?Math.max(...Object.values(t.weightedPrompts).map(n=>n[r])):0}function T3(t){const e=t.weightMode,r=vo(e);return t.weightedPrompts?Object.values(t.weightedPrompts).reduce((n,i)=>n+i[r],0):0}function W0(t,e){const r=t.weightMode,n=vo(r);return t.weightedPrompts[e]?t.weightedPrompts[e][n]/k3(t):0}function Kn(t,e){const r=t.weightMode,n=vo(r);if(!t.weightedPrompts[e])return 0;const i=t.weightedPrompts[e][n];return P3((i||0)/T3(t))}function I3(t,e,r){const a=r*.6,o=Math.floor(t/a);return Math.ceil(e/o)*r*1.2}function qr(t,e,r){const n=I3(t,e,r)+10;return[t,n]}function Oa(t,e){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function ka(t){return zr(t,.5)}function Mi(t){const e=t.currentTarget;if(!e)throw new Error("No SVG element found");var r=e.createSVGPoint();t instanceof TouchEvent?(r.x=t.touches[0].clientX,r.y=t.touches[0].clientY):(r.x=t.clientX,r.y=t.clientY);const n=e.getScreenCTM();if(!n)throw new Error("No DOM Matrix found");const i=r.matrixTransform(n.inverse());return[i.x,i.y]}function Rs(t){const e=t.reduce((r,n)=>xr(r,n),[0,0]);return zr(e,1/t.length)}function H0(t,e,r){const n=t.slice();return n[20]=e[r][0],n[21]=e[r][1],n}function $0(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,a;e=new Gc({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),s=[];for(let c=0;c<o.length;c+=1)s[c]=G0(H0(t,o,c));const l=c=>ve(s[c],1,1,()=>{s[c]=null});let p=n&&K0(t);return{c(){Ve(e.$$.fragment);for(let c=0;c<s.length;c+=1)s[c].c();r=Ft(),p&&p.c(),i=Ft()},l(c){je(e.$$.fragment,c);for(let f=0;f<s.length;f+=1)s[f].l(c);r=Ft(),p&&p.l(c),i=Ft()},m(c,f){ze(e,c,f);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(c,f);se(c,r,f),p&&p.m(c,f),se(c,i,f),a=!0},p(c,f){const d={};if(f&1&&(d.xy=c[0]),f&2&&(d.radius=c[1]),e.$set(d),f&895){o=Object.entries(c[5].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=H0(c,o,g);s[g]?(s[g].p(b,f),fe(s[g],1)):(s[g]=G0(b),s[g].c(),fe(s[g],1),s[g].m(r.parentNode,r))}for(ir(),g=o.length;g<s.length;g+=1)l(g);ar()}f&32&&(n=Object.entries(c[5].weightedPrompts).length>0),n?p?(p.p(c,f),f&32&&fe(p,1)):(p=K0(c),p.c(),fe(p,1),p.m(i.parentNode,i)):p&&(ir(),ve(p,1,1,()=>{p=null}),ar())},i(c){if(!a){fe(e.$$.fragment,c);for(let f=0;f<o.length;f+=1)fe(s[f]);fe(p),a=!0}},o(c){ve(e.$$.fragment,c),s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)ve(s[f]);ve(p),a=!1},d(c){qe(e,c),Au(s,c),c&&M(r),p&&p.d(c),c&&M(i)}}}function G0(t){let e,r,n,i,a;e=new E1({props:{p1:Nr(t[0],t[5].circleMarker,t[1]),p2:t[6][t[20]].xy}});function o(){return t[14](t[20])}return r=new Pa({props:{xy:t[6][t[20]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:o}}),n=new go({props:{xy:t[9](t[6][t[20]].xy,qr(t[3],t[21].text.length,t[4])),color:`rgba(255,255,255,${nn(t[6][t[20]].unitWeight)}`,wh:qr(t[3],t[21].text.length,t[4]),fontSize:t[4],text:t[21].text}}),i=new O3({props:{xy:zr(xr(Nr(t[0],t[5].circleMarker,t[1]),t[6][t[20]].xy),.5),weight:Kn(t[5],t[20]),radius:15,textColor:`rgba(255,255,255,${nn(t[6][t[20]].unitWeight)}`,bgColor:"rgb(8, 11, 22)"}}),{c(){Ve(e.$$.fragment),Ve(r.$$.fragment),Ve(n.$$.fragment),Ve(i.$$.fragment)},l(s){je(e.$$.fragment,s),je(r.$$.fragment,s),je(n.$$.fragment,s),je(i.$$.fragment,s)},m(s,l){ze(e,s,l),ze(r,s,l),ze(n,s,l),ze(i,s,l),a=!0},p(s,l){t=s;const p={};l&35&&(p.p1=Nr(t[0],t[5].circleMarker,t[1])),l&96&&(p.p2=t[6][t[20]].xy),e.$set(p);const c={};l&96&&(c.xy=t[6][t[20]].xy),l&4&&(c.radius=t[2]),l&32&&(c.handleMouseDown=o),r.$set(c);const f={};l&120&&(f.xy=t[9](t[6][t[20]].xy,qr(t[3],t[21].text.length,t[4]))),l&96&&(f.color=`rgba(255,255,255,${nn(t[6][t[20]].unitWeight)}`),l&56&&(f.wh=qr(t[3],t[21].text.length,t[4])),l&16&&(f.fontSize=t[4]),l&32&&(f.text=t[21].text),n.$set(f);const d={};l&99&&(d.xy=zr(xr(Nr(t[0],t[5].circleMarker,t[1]),t[6][t[20]].xy),.5)),l&32&&(d.weight=Kn(t[5],t[20])),l&96&&(d.textColor=`rgba(255,255,255,${nn(t[6][t[20]].unitWeight)}`),i.$set(d)},i(s){a||(fe(e.$$.fragment,s),fe(r.$$.fragment,s),fe(n.$$.fragment,s),fe(i.$$.fragment,s),a=!0)},o(s){ve(e.$$.fragment,s),ve(r.$$.fragment,s),ve(n.$$.fragment,s),ve(i.$$.fragment,s),a=!1},d(s){qe(e,s),qe(r,s),qe(n,s),qe(i,s)}}}function K0(t){let e,r;return e=new Pa({props:{xy:Nr(t[0],t[5].circleMarker,t[1]),radius:10,color:"rgba(136,157,191, 1)",handleMouseDown:t[15]}}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p(n,i){const a={};i&35&&(a.xy=Nr(n[0],n[5].circleMarker,n[1])),e.$set(a)},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function x3(t){let e,r,n,i,a,o=t[6]&&t[5].weightedPrompts&&$0(t);const s=t[13].default,l=Du(s,t,t[12],null);return{c(){e=ut("svg"),o&&o.c(),r=Ee(),l&&l.c(),this.h()},l(p){e=st(p,"svg",{id:!0,class:!0});var c=R(e);o&&o.l(c),c.forEach(M),r=Ae(p),l&&l.l(p),this.h()},h(){S(e,"id","svg"),S(e,"class","w-full h-full")},m(p,c){se(p,e,c),o&&o.m(e,null),se(p,r,c),l&&l.m(p,c),n=!0,i||(a=[_e(e,"mousemove",t[10]),_e(e,"touchmove",t[10]),_e(e,"mouseup",t[7]),_e(e,"touchend",t[7]),_e(e,"dblclick",t[11])],i=!0)},p(p,[c]){p[6]&&p[5].weightedPrompts?o?(o.p(p,c),c&96&&fe(o,1)):(o=$0(p),o.c(),fe(o,1),o.m(e,null)):o&&(ir(),ve(o,1,1,()=>{o=null}),ar()),l&&l.p&&(!n||c&4096)&&yu(l,s,p,p[12],n?Eu(s,p[12],c,null):wu(p[12]),null)},i(p){n||(fe(o),fe(l,p),n=!0)},o(p){ve(o),ve(l,p),n=!1},d(p){p&&M(e),o&&o.d(),p&&M(r),l&&l.d(p),i=!1,zt(a)}}}function Y0(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const o=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function N3(t,e,r){let n,i;Ge(t,ot,O=>r(5,i=O));let{$$slots:a={},$$scope:o}=e,{center:s=[450,450]}=e,{radius:l=250}=e,{pointRadius:p=10}=e,{textWidth:c=150}=e,{fontSize:f=13}=e,d=[0,0],g=null;function b(O){g=null}function v(O){g=O}function m(O,A){let x=Nn(O,s,l)[0]-180;x<0&&(x+=360);const U=Kc(ka(A),x);return xr(O,U)}function D(O){const A=M3(O,s,l)?Nn(O,s,l):Nn(vu(O,s,l),s,l);r(6,n=C(i.weightedPrompts,s,l,i.circleWeightScaling,i.circleExponentialScaling,A,i.circleAngles))}function B(O){if(d=Mi(O),g==="main")D(d);else if(g){const A={...i.weightedPrompts[g]},x=vu(d,s,l),U=Nn(x,s,l)[0],K={...i.circleAngles};K[A.id]=U;const J={...i.weightedPrompts};J[g]=A,r(6,n=C(J,s,l,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,K))}}function w(O){d=Mi(O),D(d)}function C(O,A,x,U,K,J,j){if(!O||!A||!x||!U||!J)return null;let V=Object.entries(O).reduce((Q,[X,te])=>(Q[X]={xy:Nr(A,[j[X],1],x)},Q),{});V=Object.entries(V).reduce((Q,[X,te])=>(Q[X]={...Q[X],distance:Oa(te.xy,Nr(A,J,x))},Q),V);const H=Object.values(V).reduce((Q,X)=>Q+X.distance,0);V=Object.entries(V).reduce((Q,[X,te])=>(Q[X]={...Q[X],unitDistance:Math.round(te.distance/H*100)/100},Q),V),V=Object.entries(V).reduce((Q,[X,te])=>(Q[X]={...Q[X],invertedUnitDistance:Math.round((1-te.unitDistance)*100)/100},Q),V),V=Object.entries(V).reduce((Q,[X,te])=>(K?Q[X]={...Q[X],unitWeight:Math.round(Math.pow(1-te.distance/(2*x),U)*100)/100}:Q[X]={...Q[X],unitWeight:Math.round((1-te.distance/(2*x))*100)/100},Q),V);const z={...O};return Object.entries(V).forEach(([Q,X])=>{z[Q].circleWeight=X.unitWeight}),ot.update({...i,circleMarker:J,weightedPrompts:z,circleAngles:j}),V}const F=O=>v(O),k=()=>v("main");return t.$$set=O=>{"center"in O&&r(0,s=O.center),"radius"in O&&r(1,l=O.radius),"pointRadius"in O&&r(2,p=O.pointRadius),"textWidth"in O&&r(3,c=O.textWidth),"fontSize"in O&&r(4,f=O.fontSize),"$$scope"in O&&r(12,o=O.$$scope)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(i.circleAngles).length!==Object.keys(i.weightedPrompts).length&&ot.update({...i,circleAngles:Y0(i.weightedPrompts,{})}),t.$$.dirty&35&&r(6,n=C(i.weightedPrompts,s,l,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,i.circleAngles||Y0(i.weightedPrompts,{})))},[s,l,p,c,f,i,n,b,v,m,B,w,o,a,F,k]}class L3 extends Xe{constructor(e){super(),et(this,e,N3,x3,tt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}let _s;const R3=new Uint8Array(16);function U3(){if(!_s&&(_s=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _s(R3)}const kr=[];for(let t=0;t<256;++t)kr.push((t+256).toString(16).slice(1));function V3(t,e=0){return(kr[t[e+0]]+kr[t[e+1]]+kr[t[e+2]]+kr[t[e+3]]+"-"+kr[t[e+4]]+kr[t[e+5]]+"-"+kr[t[e+6]]+kr[t[e+7]]+"-"+kr[t[e+8]]+kr[t[e+9]]+"-"+kr[t[e+10]]+kr[t[e+11]]+kr[t[e+12]]+kr[t[e+13]]+kr[t[e+14]]+kr[t[e+15]]).toLowerCase()}const j3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Z0={randomUUID:j3};function mo(t,e,r){if(Z0.randomUUID&&!e&&!t)return Z0.randomUUID();t=t||{};const n=t.random||(t.rng||U3)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return V3(n)}const bs="showZeroPrompts";function z3(){const t=ur(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[bs]?JSON.parse(localStorage[bs]):!1),{subscribe:e,update:a=>{i&&(localStorage[bs]=JSON.stringify(!!a),r(!!a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[bs],r(!1))}}}const Us=z3(),Ds="useWeightOrdering";function q3(){const t=ur(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Ds]?JSON.parse(localStorage[Ds]):!1),{subscribe:e,update:a=>{i&&(localStorage[Ds]=JSON.stringify(!!a),r(!!a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[Ds],r(!1))}}}const Fc=q3(),Yc=Cu(Fc,t=>Ot(Fc));var Sc=function(t,e){return Sc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Sc(t,e)};function Zc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Sc(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Bc,Jc=function(){function t(){}return t._xfnv1a=function(e){for(var r=2166136261,n=0;n<e.length;n++)r=Math.imul(r^e.charCodeAt(n),16777619);return function(){return r+=r<<13,r^=r>>>7,r+=r<<3,r^=r>>>17,(r+=r<<5)>>>0}},t}(),W3=function(t){function e(r){var n=t.call(this)||this;return n.a=e._xfnv1a(r)(),n}return Zc(e,t),e.prototype.next=function(){var r=this.a+=1831565813;return r=Math.imul(r^r>>>15,1|r),(((r^=r+Math.imul(r^r>>>7,61|r))^r>>>14)>>>0)/4294967296},e}(Jc),H3=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Zc(e,t),e.prototype.next=function(){this.a>>>=0,this.b>>>=0,this.c>>>=0,this.d>>>=0;var r=this.a+this.b|0;return this.a=this.b^this.b>>>9,this.b=this.c+(this.c<<3)|0,this.c=this.c<<21|this.c>>>11,this.d=this.d+1|0,r=r+this.d|0,this.c=this.c+r|0,(r>>>0)/4294967296},e}(Jc),$3=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Zc(e,t),e.prototype.next=function(){var r=this.b<<9,n=5*this.a;return n=n<<7|9*(n>>>25),this.c^=this.a,this.d^=this.b,this.b^=this.c,this.a^=this.d,this.c^=r,this.d=this.d<<11|this.d>>>21,(n>>>0)/4294967296},e}(Jc);(function(t){t.sfc32="sfc32",t.mulberry32="mulberry32",t.xoshiro128ss="xoshiro128ss"})(Bc||(Bc={}));var G3=function(){function t(e,r){r===void 0&&(r=Bc.sfc32),this.str=e,this.prng=r,this.generator=this._initializeGenerator()}return t.prototype.next=function(){return this.generator.next()},t.prototype._initializeGenerator=function(){if(function(r){return r===null}(e=this.str)||function(r){return r===void 0}(e))return this.wrap();var e;switch(this.prng){case"sfc32":return new H3(this.str);case"mulberry32":return new W3(this.str);case"xoshiro128ss":return new $3(this.str);default:return this.wrap()}},t.prototype.wrap=function(){return{next:function(){return Math.random()}}},t}();const Ul="slotSet";function K3(){const t=ur({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith(Ul)){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=Ot(t),p={...s[a]||{},...o};i&&(localStorage[`${Ul}_${a}`]=JSON.stringify(p));const c={...s,[a]:p};r(c)},get:a=>Ot(t)[a],getAll:()=>Ot(t),delete:a=>{i&&delete localStorage[`${Ul}_${a}`];const o={...Ot(t)};delete o[a],r(o)}}}const Ji=K3();function J0(){return(Math.random()*1e6).toFixed(0)}function Y3(){const t=ur(J0()),{subscribe:e,set:r}=t;return{subscribe:e,get:()=>Ot(t),shuffle:()=>{r(J0())}}}const Ii=Y3();function Vs(t){let e=t.replace(/\s+/g,"_");return e=e.toUpperCase(),"$"+e}function Q0(t){const e=t.length>0&&t.length<32,r=/^[a-zA-Z0-9 ]+$/.test(t),n=/^[a-zA-Z]/.test(t),i=/[a-zA-Z0-9]$/.test(t);return e&&r&&n&&i}function Z3(){const t=Ji.getAll();return Object.values(t).reduce((r,n)=>{const i=Vs(n.name);return i&&(r[i]=[...n.values]),r},{})}function J3(t,e){const r=new G3(e);return Object.entries(t).reduce((i,[a,o])=>(i[a]=[...o].sort(()=>r.next()-.5),i),{})}function mu(t,e){let r=J3(Z3(),e),n=t;for(const[i,a]of Object.entries(r)){if(a.length===0)continue;let o=0;for(;n.includes(i);)o>=a.length&&(o=0),n=n.replace(i,a[o]),o++}return n}function Q3(t){const e=[],r=/((?:[^:]+|:(?!:))+)(?:::(\d+(?:\.\d+)?))?(?=\s|$)/g;let n;for(;(n=r.exec(t))!==null;){const i=n[1].trim(),a=n[2]?parseFloat(n[2]):1;i&&e.push([i,a])}return e}function Vl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=t.length-1;let r=t;for(;r[e]===",";)r=r.slice(0,e);return r}function jl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=["-","#","*","•","◦",">","<","+","^","~","(",")","[","]","{","}"];let r=t.trim();for(;e.includes(r[0]);)r=r.slice(1).trim();return/^\d+(\.|\))\s/.test(r)&&(r=r.replace(/^\d+(\.|\))\s/,"")),r}function _u(t){if(t=t.replace(/^\n+|\n+$/g,""),t.includes("::"))return Q3(t);if(t.includes(`
`))return t.split(`
`).map(a=>jl(Vl(a))).filter(a=>a.length>0).map(a=>[a,1]);const e=t.match(/[^.!?]+[.!?]+/g)||[],r=e.length,n=t.split(",").map(a=>jl(Vl(a))).filter(a=>a.length>0),i=n.length-1;return r>i?e.map(a=>jl(Vl(a))).filter(a=>a.length>0).map(a=>[a,1]):n.map(a=>[a,1])}function js(t,e,r){let n=Object.entries(t.weightedPrompts);return e&&(n=n.sort((i,a)=>Kn(t,parseInt(a[0]))-Kn(t,parseInt(i[0])))),r||(n=n.filter(i=>r||Kn(t,parseInt(i[0])))),n}function X3(t){return t.trim().endsWith(".")}function e6(t){let e="",r=[];return t.forEach((n,i)=>{X3(n)?(r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+". ",r=[]),e+=n+" "):r.push(n.trim())}),r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+"."),e.trim()}function Oc(t,e,r,n,i){if(r)return js(t,n,i).map(([o,s],l)=>`${mu(s.text,`${e}${o}${l}`)}::${Kn(t,parseInt(o))}`).join(" ");const a=js(t,n,i).map(([o,s],l)=>mu(s.text,`${e}${o}${l}`));return e6(a)}function X0(t,e,r){const n=t.slice();return n[4]=e[r][0],n[5]=e[r][1],n[7]=r,n}function ed(t,e){let r,n=mu(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"",i,a,o,s=Kn(e[0],parseInt(e[4]))+"",l,p,c;return{key:t,first:null,c(){r=q("span"),i=Se(n),a=Se("::"),o=q("b"),l=Se(s),p=Ee(),this.h()},l(f){r=W(f,"SPAN",{style:!0});var d=R(r);i=Be(d,n),a=Be(d,"::"),o=W(d,"B",{});var g=R(o);l=Be(g,s),p=Ae(g),g.forEach(M),d.forEach(M),this.h()},h(){S(r,"style",c=`color: rgba(255,255,255,${Math.max(.25,W0(e[0],parseInt(e[4])))});`),this.first=r},m(f,d){se(f,r,d),T(r,i),T(r,a),T(r,o),T(o,l),T(o,p)},p(f,d){e=f,d&15&&n!==(n=mu(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"")&&fr(i,n),d&7&&s!==(s=Kn(e[0],parseInt(e[4]))+"")&&fr(l,s),d&7&&c!==(c=`color: rgba(255,255,255,${Math.max(.25,W0(e[0],parseInt(e[4])))});`)&&S(r,"style",c)},d(f){f&&M(r)}}}function t6(t){let e,r,n=[],i=new Map,a=js(t[0],t[1],t[2]);const o=s=>s[4];for(let s=0;s<a.length;s+=1){let l=X0(t,a,s),p=o(l);i.set(p,n[s]=ed(p,l))}return{c(){e=q("div"),r=q("p");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=W(s,"DIV",{class:!0});var l=R(e);r=W(l,"P",{class:!0});var p=R(r);for(let c=0;c<n.length;c+=1)n[c].l(p);p.forEach(M),l.forEach(M),this.h()},h(){S(r,"class","text-sm select-none"),S(e,"class","overflow-y-auto h-full")},m(s,l){se(s,e,l),T(e,r);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(r,null)},p(s,[l]){l&15&&(a=js(s[0],s[1],s[2]),n=Rn(n,l,o,1,s,a,i,r,Zn,ed,null,X0))},i:Me,o:Me,d(s){s&&M(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function r6(t,e,r){let n,i,a,o;return Ge(t,ot,s=>r(0,n=s)),Ge(t,Yc,s=>r(1,i=s)),Ge(t,Us,s=>r(2,a=s)),Ge(t,Ii,s=>r(3,o=s)),[n,i,a,o]}class n6 extends Xe{constructor(e){super(),et(this,e,r6,t6,tt,{})}}const ys="outputMultiPrompt";function i6(){const t=ur(!0),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[ys]?JSON.parse(localStorage[ys]):!1),{subscribe:e,update:a=>{i&&(localStorage[ys]=JSON.stringify(!!a),r(!!a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[ys],r(!0))}}}const Mc=i6();function a6(t){let e,r,n,i=Oc(t[0],t[1],t[2],t[3],t[4])+"",a;return{c(){e=q("div"),r=q("p"),n=q("span"),a=Se(i),this.h()},l(o){e=W(o,"DIV",{class:!0});var s=R(e);r=W(s,"P",{class:!0});var l=R(r);n=W(l,"SPAN",{style:!0});var p=R(n);a=Be(p,i),p.forEach(M),l.forEach(M),s.forEach(M),this.h()},h(){S(n,"style","color: rgba(255,255,255,0.75});"),S(r,"class","text-sm select-none"),S(e,"class","overflow-y-auto h-full")},m(o,s){se(o,e,s),T(e,r),T(r,n),T(n,a)},p(o,[s]){s&31&&i!==(i=Oc(o[0],o[1],o[2],o[3],o[4])+"")&&fr(a,i)},i:Me,o:Me,d(o){o&&M(e)}}}function u6(t,e,r){let n,i,a,o,s;return Ge(t,ot,l=>r(0,n=l)),Ge(t,Ii,l=>r(1,i=l)),Ge(t,Mc,l=>r(2,a=l)),Ge(t,Yc,l=>r(3,o=l)),Ge(t,Us,l=>r(4,s=l)),[n,i,a,o,s]}class s6 extends Xe{constructor(e){super(),et(this,e,u6,a6,tt,{})}}const cu="promptHistory";function o6(){const t=ur([]),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",a=(i&&JSON.parse(localStorage[cu]||"[]")||[]).map(o=>({...o,date:new Date(o.date)}));return r(a),{subscribe:e,add:o=>{if(!o||!i)return;const l=[...Ot(t),o];localStorage[cu]=JSON.stringify(l),r(l)},update:o=>{!o||!i||(localStorage[cu]=o,r(o))},get:()=>Ot(t),remove:o=>{if(!i)return;const l=Ot(t).filter(p=>p.id!==o);localStorage[cu]=JSON.stringify(l),r(l)},delete:()=>{i&&(delete localStorage[cu],r([]))}}}const Qc=o6();function l6(t){let e,r;return e=new s6({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function c6(t){let e,r;return e=new n6({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function f6(t){let e,r,n,i,a,o,s,l,p,c,f,d=t[2]?"Multi":"Single",g,b,v,m,D,B,w,C,F,k,O,A,x,U,K,J,j,V;const H=[c6,l6],z=[];function Q(X,te){return X[2]?0:1}return n=Q(t),i=z[n]=H[n](t),{c(){e=q("div"),r=q("div"),i.c(),a=Ee(),o=q("div"),s=q("div"),l=q("input"),p=Ee(),c=q("label"),f=q("span"),g=Se(d),b=Ee(),v=q("div"),m=q("input"),D=Ee(),B=q("label"),w=q("span"),C=Se("Use Weight Ordering"),F=Ee(),k=q("div"),O=q("input"),A=Ee(),x=q("label"),U=q("span"),K=Se("Include Zero Weights"),this.h()},l(X){e=W(X,"DIV",{class:!0});var te=R(e);r=W(te,"DIV",{class:!0});var le=R(r);i.l(le),le.forEach(M),a=Ae(te),o=W(te,"DIV",{class:!0});var be=R(o);s=W(be,"DIV",{class:!0});var we=R(s);l=W(we,"INPUT",{type:!0,class:!0}),p=Ae(we),c=W(we,"LABEL",{class:!0});var Oe=R(c);f=W(Oe,"SPAN",{class:!0});var Pe=R(f);g=Be(Pe,d),Pe.forEach(M),Oe.forEach(M),we.forEach(M),b=Ae(be),v=W(be,"DIV",{class:!0});var Te=R(v);m=W(Te,"INPUT",{type:!0,class:!0}),D=Ae(Te),B=W(Te,"LABEL",{class:!0});var Re=R(B);w=W(Re,"SPAN",{class:!0});var Ue=R(w);C=Be(Ue,"Use Weight Ordering"),Ue.forEach(M),Re.forEach(M),Te.forEach(M),F=Ae(be),k=W(be,"DIV",{class:!0});var We=R(k);O=W(We,"INPUT",{type:!0,class:!0}),A=Ae(We),x=W(We,"LABEL",{class:!0});var Ye=R(x);U=W(Ye,"SPAN",{class:!0});var xe=R(U);K=Be(xe,"Include Zero Weights"),xe.forEach(M),Ye.forEach(M),We.forEach(M),be.forEach(M),te.forEach(M),this.h()},h(){S(r,"class","normal-case font-light text-left cursor-copy bg-slate-900 rounded-t-md rounded-br-md p-4 w-full h-28 active:bg-slate-950 hover:bg-slate-800"),l.checked=t[2],S(l,"type","checkbox"),S(l,"class","toggle toggle-sm mt-2 mr-2"),S(f,"class","label-text"),S(c,"class","label w-10"),S(s,"class","mx-2 flex"),m.checked=t[1],S(m,"type","checkbox"),S(m,"class","toggle toggle-sm mt-2 mr-2"),S(w,"class","label-text"),S(B,"class","label"),S(v,"class","mx-2 flex"),O.checked=t[0],S(O,"type","checkbox"),S(O,"class","toggle toggle-sm mt-2 mr-2"),S(U,"class","label-text"),S(x,"class","label"),S(k,"class","mx-2 flex"),S(o,"class","w-full rounded-b-md flex pl-2 justify-start bg-slate-900"),S(e,"class","h-48 p-4")},m(X,te){se(X,e,te),T(e,r),z[n].m(r,null),T(e,a),T(e,o),T(o,s),T(s,l),T(s,p),T(s,c),T(c,f),T(f,g),T(o,b),T(o,v),T(v,m),T(v,D),T(v,B),T(B,w),T(w,C),T(o,F),T(o,k),T(k,O),T(k,A),T(k,x),T(x,U),T(U,K),J=!0,j||(V=[_e(r,"click",t[3]),_e(l,"change",t[4]),_e(m,"change",t[5]),_e(O,"change",t[6])],j=!0)},p(X,[te]){let le=n;n=Q(X),n!==le&&(ir(),ve(z[le],1,1,()=>{z[le]=null}),ar(),i=z[n],i||(i=z[n]=H[n](X),i.c()),fe(i,1),i.m(r,null)),(!J||te&4)&&(l.checked=X[2]),(!J||te&4)&&d!==(d=X[2]?"Multi":"Single")&&fr(g,d),(!J||te&2)&&(m.checked=X[1]),(!J||te&1)&&(O.checked=X[0])},i(X){J||(fe(i),J=!0)},o(X){ve(i),J=!1},d(X){X&&M(e),z[n].d(),j=!1,zt(V)}}}function h6(t,e,r){let n,i,a,o,s;Ge(t,Us,d=>r(0,n=d)),Ge(t,Yc,d=>r(1,i=d)),Ge(t,Mc,d=>r(2,a=d)),Ge(t,Ii,d=>r(7,o=d)),Ge(t,ot,d=>r(8,s=d));function l(){const d=Oc(s,o,a,i,n);navigator.clipboard.writeText(d),Ii.shuffle(),Qc.add({id:mo(),prompt:d,date:new Date})}function p(){Mc.update(!a)}function c(){Fc.update(!i)}function f(){Us.update(!n)}return[n,i,a,l,p,c,f]}class Su extends Xe{constructor(e){super(),et(this,e,h6,f6,tt,{})}}function td(t){let e,r,n,i,a,o,s,l;return{c(){e=q("div"),r=q("label"),n=q("span"),i=Se("Scaling Power"),a=Ee(),o=q("input"),this.h()},l(p){e=W(p,"DIV",{class:!0});var c=R(e);r=W(c,"LABEL",{class:!0});var f=R(r);n=W(f,"SPAN",{class:!0});var d=R(n);i=Be(d,"Scaling Power"),d.forEach(M),f.forEach(M),a=Ae(c),o=W(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(M),this.h()},h(){S(n,"class","label-text"),S(r,"class","label"),S(o,"type","range"),S(o,"min","0.5"),S(o,"max","3"),S(o,"step","0.1"),S(o,"class","range range-xs"),S(e,"class","w-full px-2")},m(p,c){se(p,e,c),T(e,r),T(r,n),T(n,i),T(e,a),T(e,o),rn(o,t[0]),s||(l=[_e(o,"change",t[6]),_e(o,"input",t[6])],s=!0)},p(p,c){c&1&&rn(o,p[0])},d(p){p&&M(e),s=!1,zt(l)}}}function d6(t){let e,r,n,i,a,o,s,l,p,c,f,d,g,b,v,m,D;r=new L3({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let B=t[1]&&td(t);return b=new Su({}),{c(){e=q("div"),Ve(r.$$.fragment),i=Ee(),a=q("div"),o=q("div"),s=q("label"),l=q("span"),p=Se("Exponential Scaling"),c=Ee(),f=q("input"),d=Ee(),B&&B.c(),g=Ee(),Ve(b.$$.fragment),this.h()},l(w){e=W(w,"DIV",{class:!0});var C=R(e);je(r.$$.fragment,C),C.forEach(M),i=Ae(w),a=W(w,"DIV",{class:!0});var F=R(a);o=W(F,"DIV",{class:!0});var k=R(o);s=W(k,"LABEL",{class:!0});var O=R(s);l=W(O,"SPAN",{class:!0});var A=R(l);p=Be(A,"Exponential Scaling"),A.forEach(M),O.forEach(M),c=Ae(k),f=W(k,"INPUT",{type:!0,class:!0}),k.forEach(M),d=Ae(F),B&&B.l(F),F.forEach(M),g=Ae(w),je(b.$$.fragment,w),this.h()},h(){S(e,"class","w-full h-full"),xi(()=>t[4].call(e)),S(l,"class","label-text"),S(s,"class","label"),S(f,"type","checkbox"),S(f,"class","toggle toggle-xs"),S(o,"class","w-52 px-2"),S(a,"class","px-2 py-4 pb-0 flex")},m(w,C){se(w,e,C),ze(r,e,null),n=Ma(e,t[4].bind(e)),se(w,i,C),se(w,a,C),T(a,o),T(o,s),T(s,l),T(l,p),T(o,c),T(o,f),f.checked=t[1],T(a,d),B&&B.m(a,null),se(w,g,C),ze(b,w,C),v=!0,m||(D=_e(f,"change",t[5]),m=!0)},p(w,[C]){const F={};C&12&&(F.center=[Math.round(w[2]/2),Math.round(w[3]/2)]),C&12&&(F.radius=Math.round(Math.min(w[2],w[3])/2)-150),r.$set(F),C&2&&(f.checked=w[1]),w[1]?B?B.p(w,C):(B=td(w),B.c(),B.m(a,null)):B&&(B.d(1),B=null)},i(w){v||(fe(r.$$.fragment,w),fe(b.$$.fragment,w),v=!0)},o(w){ve(r.$$.fragment,w),ve(b.$$.fragment,w),v=!1},d(w){w&&M(e),qe(r),n(),w&&M(i),w&&M(a),B&&B.d(),w&&M(g),qe(b,w),m=!1,D()}}}function p6(t,e,r){let n;Ge(t,ot,f=>r(7,n=f));let i,a,o=n.circleWeightScaling||2,s=zc(n.circleExponentialScaling)?!0:n.circleExponentialScaling;function l(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function p(){s=this.checked,r(1,s)}function c(){o=xp(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&ot.update({...ot.get(),circleExponentialScaling:s,circleWeightScaling:o})},[o,s,i,a,l,p,c]}class g6 extends Xe{constructor(e){super(),et(this,e,p6,d6,tt,{})}}function v6(t){let e,r,n,i,a;return{c(){e=ut("line"),this.h()},l(o){e=st(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),R(e).forEach(M),this.h()},h(){S(e,"x1",r=t[0][0]),S(e,"y1",n=t[0][1]),S(e,"x2",i=t[1][0]),S(e,"y2",a=t[1][1]),S(e,"stroke",t[3]),S(e,"stroke-width",t[2])},m(o,s){se(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&S(e,"x1",r),s&1&&n!==(n=o[0][1])&&S(e,"y1",n),s&2&&i!==(i=o[1][0])&&S(e,"x2",i),s&2&&a!==(a=o[1][1])&&S(e,"y2",a),s&8&&S(e,"stroke",o[3]),s&4&&S(e,"stroke-width",o[2])},i:Me,o:Me,d(o){o&&M(e)}}}function m6(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class _6 extends Xe{constructor(e){super(),et(this,e,m6,v6,tt,{p1:0,p2:1,stroke:2,color:3})}}function rd(t,e,r){const n=t.slice();return n[29]=e[r][0],n[30]=e[r][1],n}function nd(t){let e,r,n;e=new Gc({props:{xy:t[0],radius:t[1]}});let i=Object.entries(t[5].weightedPrompts),a=[];for(let s=0;s<i.length;s+=1)a[s]=id(rd(t,i,s));const o=s=>ve(a[s],1,1,()=>{a[s]=null});return{c(){Ve(e.$$.fragment);for(let s=0;s<a.length;s+=1)a[s].c();r=Ft()},l(s){je(e.$$.fragment,s);for(let l=0;l<a.length;l+=1)a[l].l(s);r=Ft()},m(s,l){ze(e,s,l);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,l);se(s,r,l),n=!0},p(s,l){const p={};if(l[0]&1&&(p.xy=s[0]),l[0]&2&&(p.radius=s[1]),e.$set(p),l[0]&6015){i=Object.entries(s[5].weightedPrompts);let c;for(c=0;c<i.length;c+=1){const f=rd(s,i,c);a[c]?(a[c].p(f,l),fe(a[c],1)):(a[c]=id(f),a[c].c(),fe(a[c],1),a[c].m(r.parentNode,r))}for(ir(),c=i.length;c<a.length;c+=1)o(c);ar()}},i(s){if(!n){fe(e.$$.fragment,s);for(let l=0;l<i.length;l+=1)fe(a[l]);n=!0}},o(s){ve(e.$$.fragment,s),a=a.filter(Boolean);for(let l=0;l<a.length;l+=1)ve(a[l]);n=!1},d(s){qe(e,s),Au(a,s),s&&M(r)}}}function id(t){let e,r,n,i,a,o,s,l,p;e=new _6({props:{p1:t[0],p2:t[6][t[29]].xy}});function c(...b){return t[15](t[29],...b)}function f(...b){return t[16](t[29],...b)}function d(...b){return t[17](t[29],...b)}function g(){return t[18](t[29])}return a=new Pa({props:{xy:t[6][t[29]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:g}}),o=new go({props:{xy:t[9](t[6][t[29]].textXY,qr(t[3],t[30].text.length,t[4])),color:`rgba(255,255,255,${nn(t[6][t[29]].unitWeight)}`,wh:qr(t[3],t[30].text.length,t[4]),fontSize:t[4],text:t[30].text}}),{c(){Ve(e.$$.fragment),r=ut("path"),Ve(a.$$.fragment),Ve(o.$$.fragment),this.h()},l(b){je(e.$$.fragment,b),r=st(b,"path",{d:!0,fill:!0}),R(r).forEach(M),je(a.$$.fragment,b),je(o.$$.fragment,b),this.h()},h(){S(r,"d",n=ad(t[0],t[1],t[6][t[29]].angle,t[6][t[29]].angle+t[6][t[29]].angleDiff)),S(r,"fill",i=`rgba(26,47,91,${nn(t[6][t[29]].unitWeight)/4}`)},m(b,v){ze(e,b,v),se(b,r,v),ze(a,b,v),ze(o,b,v),s=!0,l||(p=[_e(r,"mousewheel",c),_e(r,"touchstart",f),_e(r,"mousedown",d)],l=!0)},p(b,v){t=b;const m={};v[0]&1&&(m.p1=t[0]),v[0]&96&&(m.p2=t[6][t[29]].xy),e.$set(m),(!s||v[0]&99&&n!==(n=ad(t[0],t[1],t[6][t[29]].angle,t[6][t[29]].angle+t[6][t[29]].angleDiff)))&&S(r,"d",n),(!s||v[0]&96&&i!==(i=`rgba(26,47,91,${nn(t[6][t[29]].unitWeight)/4}`))&&S(r,"fill",i);const D={};v[0]&96&&(D.xy=t[6][t[29]].xy),v[0]&4&&(D.radius=t[2]),v[0]&32&&(D.handleMouseDown=g),a.$set(D);const B={};v[0]&120&&(B.xy=t[9](t[6][t[29]].textXY,qr(t[3],t[30].text.length,t[4]))),v[0]&96&&(B.color=`rgba(255,255,255,${nn(t[6][t[29]].unitWeight)}`),v[0]&56&&(B.wh=qr(t[3],t[30].text.length,t[4])),v[0]&16&&(B.fontSize=t[4]),v[0]&32&&(B.text=t[30].text),o.$set(B)},i(b){s||(fe(e.$$.fragment,b),fe(a.$$.fragment,b),fe(o.$$.fragment,b),s=!0)},o(b){ve(e.$$.fragment,b),ve(a.$$.fragment,b),ve(o.$$.fragment,b),s=!1},d(b){qe(e,b),b&&M(r),qe(a,b),qe(o,b),l=!1,zt(p)}}}function b6(t){let e,r,n,i,a,o=t[6]&&t[5].weightedPrompts&&nd(t);const s=t[14].default,l=Du(s,t,t[13],null);return{c(){e=ut("svg"),o&&o.c(),r=Ee(),l&&l.c(),this.h()},l(p){e=st(p,"svg",{id:!0,class:!0});var c=R(e);o&&o.l(c),c.forEach(M),r=Ae(p),l&&l.l(p),this.h()},h(){S(e,"id","svg"),S(e,"class","w-full h-full")},m(p,c){se(p,e,c),o&&o.m(e,null),se(p,r,c),l&&l.m(p,c),n=!0,i||(a=[_e(e,"mousemove",t[11]),_e(e,"touchmove",t[11]),_e(e,"mouseup",t[7]),_e(e,"touchend",t[7])],i=!0)},p(p,c){p[6]&&p[5].weightedPrompts?o?(o.p(p,c),c[0]&96&&fe(o,1)):(o=nd(p),o.c(),fe(o,1),o.m(e,null)):o&&(ir(),ve(o,1,1,()=>{o=null}),ar()),l&&l.p&&(!n||c[0]&8192)&&yu(l,s,p,p[13],n?Eu(s,p[13],c,null):wu(p[13]),null)},i(p){n||(fe(o),fe(l,p),n=!0)},o(p){ve(o),ve(l,p),n=!1},d(p){p&&M(e),o&&o.d(),p&&M(r),l&&l.d(p),i=!1,zt(a)}}}function D6(t,e){if(t.length!==e.length)return!1;const r=t.length;let n=-1;for(let i=0;i<r;i++)if(e[i]===t[0]){n=i;break}if(n===-1)return!1;for(let i=0;i<r;i++)if(t[i]!==e[(i+n)%r])return!1;return!0}function ad(t,e,r,n){const i=t[0]+e*Math.cos(r*Math.PI/180),a=t[1]+e*Math.sin(r*Math.PI/180),o=t[0]+e*Math.cos(n*Math.PI/180),s=t[1]+e*Math.sin(n*Math.PI/180),l=n-r<=180?"0":"1";return`M${t[0]},${t[1]} L${i},${a} A${e},${e} 0 ${l} 1 ${o},${s} Z`}function y6(t,e,r){let n,i;Ge(t,ot,H=>r(5,i=H));let{$$slots:a={},$$scope:o}=e,{center:s=[450,450]}=e,{radius:l=250}=e,{pointRadius:p=10}=e,{textWidth:c=150}=e,{fontSize:f=13}=e,d=[0,0],g=null,b={},v=null,m;function D(H){v=null,m=null,g=null,b={}}function B(H){v=H}function w(H,z){let Q=Nn(H,s,l)[0]-180;Q<0&&(Q+=360);const X=Kc(ka(z),Q);return xr(H,X)}function C(H,z){return H?Object.entries(H).reduce((Q,[X,te],le)=>{const be=Q[X]||le*(360/Object.keys(H).length)-90;return Q[X]=jr(be),Q},z):null}function F(H,z){m=z}function k(H){const z=m,Q={...i.pieAngles},X=Object.entries(Q).sort((Ue,We)=>jr(Ue[1])-jr(We[1])).map(Ue=>Ue[0]),te=X.indexOf(z),le=te+1===X.length?0:te+1,be=X[le];b[z]||(b[z]=Q[z]),b[be]||(b[be]=Q[be]);const Oe=Nn(H,s,l)[0]-g,Pe={...Q};Pe[z]=jr(Oe+b[z]),Pe[be]=jr(Oe+b[be]);const Te=Object.entries(Pe).sort((Ue,We)=>jr(Ue[1])-jr(We[1])).map(Ue=>Ue[0]);D6(X,Te)&&r(6,n=U(i.weightedPrompts,s,l,Pe))}function O(H){const z={...i.weightedPrompts[v]},Q=vu(H,s,l),X=jr(Nn(Q,s,l)[0]),te={...i.pieAngles};te[z.id]=X;const le={...i.weightedPrompts};le[v]=z,r(6,n=U(le,s,l,te))}function A(H){H.preventDefault(),d=Mi(H),v?O(d):m?k(d):g=Nn(d,s,l)[0]}function x(H,z){H.preventDefault();const Q={...i.pieAngles},X=Object.entries(Q).sort((we,Oe)=>jr(we[1])-jr(Oe[1])).map(we=>we[0]),te=X.indexOf(z),le=te+1===X.length?0:te+1,be=X[le];Q[z]=jr(Q[z]-H.deltaY/100),Q[be]=jr(Q[be]+H.deltaY/100),r(6,n=U(i.weightedPrompts,s,l,Q))}function U(H,z,Q,X){if(!H||!z||!Q)return null;const te=Object.entries(H).sort((Pe,Te)=>jr(X[Pe[0]])-jr(X[Te[0]])),le=te.map((Pe,Te)=>{const Re=Te+1===te.length?0:Te+1,Ue=X[te[Re][0]]-X[te[Te][0]];return Ue<0?[Pe[0],360+Ue]:[Pe[0],Ue]}),be=Math.max(...le.map(Pe=>Pe[1])),we=le.reduce((Pe,[Te,Re])=>{({...H[Te]});const Ue=X[Te],We=Nr(z,[Ue,1],Q),Ye=Nr(z,[Ue+.5*Re,1],Q),xe=Re/be;return Pe[Te]={xy:We,textXY:Ye,angle:Ue,angleDiff:Re,unitWeight:xe},Pe},{}),Oe={...H};return Object.entries(we).forEach(([Pe,Te])=>{Oe[Pe].pieWeight=Te.unitWeight}),ot.update({...i,weightedPrompts:Oe,pieAngles:X}),we}const K=(H,z)=>x(z,H),J=(H,z)=>F(z,H),j=(H,z)=>F(z,H),V=H=>B(H);return t.$$set=H=>{"center"in H&&r(0,s=H.center),"radius"in H&&r(1,l=H.radius),"pointRadius"in H&&r(2,p=H.pointRadius),"textWidth"in H&&r(3,c=H.textWidth),"fontSize"in H&&r(4,f=H.fontSize),"$$scope"in H&&r(13,o=H.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&32&&Object.keys(i.pieAngles||{}).length!==Object.keys(i.weightedPrompts).length&&ot.update({...i,pieAngles:C(i.weightedPrompts,{})}),t.$$.dirty[0]&35&&r(6,n=U(i.weightedPrompts,s,l,i.pieAngles||C(i.weightedPrompts,{})))},[s,l,p,c,f,i,n,D,B,w,F,A,x,o,a,K,J,j,V]}class w6 extends Xe{constructor(e){super(),et(this,e,y6,b6,tt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4},null,[-1,-1])}}function E6(t){let e,r,n,i,a,o;return r=new w6({props:{center:[Math.round(t[0]/2),Math.round(t[1]/2)],radius:Math.round(Math.min(t[0],t[1])/2)-150}}),a=new Su({}),{c(){e=q("div"),Ve(r.$$.fragment),i=Ee(),Ve(a.$$.fragment),this.h()},l(s){e=W(s,"DIV",{class:!0});var l=R(e);je(r.$$.fragment,l),l.forEach(M),i=Ae(s),je(a.$$.fragment,s),this.h()},h(){S(e,"class","w-full h-full"),xi(()=>t[2].call(e))},m(s,l){se(s,e,l),ze(r,e,null),n=Ma(e,t[2].bind(e)),se(s,i,l),ze(a,s,l),o=!0},p(s,[l]){const p={};l&3&&(p.center=[Math.round(s[0]/2),Math.round(s[1]/2)]),l&3&&(p.radius=Math.round(Math.min(s[0],s[1])/2)-150),r.$set(p)},i(s){o||(fe(r.$$.fragment,s),fe(a.$$.fragment,s),o=!0)},o(s){ve(r.$$.fragment,s),ve(a.$$.fragment,s),o=!1},d(s){s&&M(e),qe(r),n(),s&&M(i),qe(a,s)}}}function A6(t,e,r){let n,i;function a(){n=this.clientWidth,i=this.clientHeight,r(0,n),r(1,i)}return[n,i,a]}class C6 extends Xe{constructor(e){super(),et(this,e,A6,E6,tt,{})}}const{window:F6}=sy;function ud(t,e,r){const n=t.slice();return n[26]=e[r][0],n[27]=e[r][1],n}function sd(t){let e=[],r=new Map,n,i,a,o=Object.entries(t[1]);const s=l=>l[26];for(let l=0;l<o.length;l+=1){let p=ud(t,o,l),c=s(p);r.set(c,e[l]=ld(c,p))}return i=new Pa({props:{xy:t[17](t[0],t[6],t[10],t[9],!0),radius:t[3],color:"rgba(136,157,191, 1)",handleMouseDown:t[22]}}),{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=Ft(),Ve(i.$$.fragment)},l(l){for(let p=0;p<e.length;p+=1)e[p].l(l);n=Ft(),je(i.$$.fragment,l)},m(l,p){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(l,p);se(l,n,p),ze(i,l,p),a=!0},p(l,p){p&132983&&(o=Object.entries(l[1]),ir(),e=Rn(e,p,s,1,l,o,r,n.parentNode,oy,ld,n,ud),ar());const c={};p&1601&&(c.xy=l[17](l[0],l[6],l[10],l[9],!0)),p&8&&(c.radius=l[3]),p&128&&(c.handleMouseDown=l[22]),i.$set(c)},i(l){if(!a){for(let p=0;p<o.length;p+=1)fe(e[p]);fe(i.$$.fragment,l),a=!0}},o(l){for(let p=0;p<e.length;p+=1)ve(e[p]);ve(i.$$.fragment,l),a=!1},d(l){for(let p=0;p<e.length;p+=1)e[p].d(l);l&&M(n),qe(i,l)}}}function od(t){let e,r;return e=new E1({props:{p1:t[17](t[27].xy,t[6],t[10],t[9],!0),p2:t[17](t[0],t[6],t[10],t[9],!0)}}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p(n,i){const a={};i&1602&&(a.p1=n[17](n[27].xy,n[6],n[10],n[9],!0)),i&1601&&(a.p2=n[17](n[0],n[6],n[10],n[9],!0)),e.$set(a)},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function ld(t,e){let r,n,i,a,o,s=e[27].connected&&od(e);return i=new Pa({props:{xy:e[17](e[27].xy,e[6],e[10],e[9],!0),radius:e[2],color:"rgba(136,157,191, 1)"}}),a=new go({props:{xy:[(e[27].xy[0]*e[8][0]+e[6][0])*e[9]+e[10][0]-qr(e[4],e[27].text.length,e[5])[0]/2,(e[27].xy[1]*e[8][1]+e[6][1])*e[9]+e[10][1]+e[2]],color:`rgba(255,255,255,${e[27].opacity}`,wh:qr(e[4],e[27].text.length,e[5]),fontSize:e[5],text:e[27].text}}),{key:t,first:null,c(){r=Ft(),s&&s.c(),n=Ft(),Ve(i.$$.fragment),Ve(a.$$.fragment),this.h()},l(l){r=Ft(),s&&s.l(l),n=Ft(),je(i.$$.fragment,l),je(a.$$.fragment,l),this.h()},h(){this.first=r},m(l,p){se(l,r,p),s&&s.m(l,p),se(l,n,p),ze(i,l,p),ze(a,l,p),o=!0},p(l,p){e=l,e[27].connected?s?(s.p(e,p),p&2&&fe(s,1)):(s=od(e),s.c(),fe(s,1),s.m(n.parentNode,n)):s&&(ir(),ve(s,1,1,()=>{s=null}),ar());const c={};p&1602&&(c.xy=e[17](e[27].xy,e[6],e[10],e[9],!0)),p&4&&(c.radius=e[2]),i.$set(c);const f={};p&1910&&(f.xy=[(e[27].xy[0]*e[8][0]+e[6][0])*e[9]+e[10][0]-qr(e[4],e[27].text.length,e[5])[0]/2,(e[27].xy[1]*e[8][1]+e[6][1])*e[9]+e[10][1]+e[2]]),p&2&&(f.color=`rgba(255,255,255,${e[27].opacity}`),p&50&&(f.wh=qr(e[4],e[27].text.length,e[5])),p&32&&(f.fontSize=e[5]),p&2&&(f.text=e[27].text),a.$set(f)},i(l){o||(fe(s),fe(i.$$.fragment,l),fe(a.$$.fragment,l),o=!0)},o(l){ve(s),ve(i.$$.fragment,l),ve(a.$$.fragment,l),o=!1},d(l){l&&M(r),s&&s.d(l),l&&M(n),qe(i,l),qe(a,l)}}}function S6(t){let e,r,n=Object.entries(t[1]).length>0,i,a,o,s=n&&sd(t);return{c(){e=q("div"),r=ut("svg"),s&&s.c(),this.h()},l(l){e=W(l,"DIV",{class:!0});var p=R(e);r=st(p,"svg",{id:!0,class:!0});var c=R(r);s&&s.l(c),c.forEach(M),p.forEach(M),this.h()},h(){S(r,"id","svg"),S(r,"class","w-full h-full outline-none"),S(e,"class","w-full h-full")},m(l,p){se(l,e,p),T(e,r),s&&s.m(r,null),i=!0,a||(o=[_e(F6,"keydown",t[16]),_e(r,"mousewheel",t[15]),_e(r,"mousemove",t[13]),_e(r,"touchmove",t[13]),_e(r,"mouseup",t[14]),_e(r,"touchend",t[14]),_e(r,"dblclick",t[12]),_e(r,"focusin",t[23]),_e(r,"focusout",t[24])],a=!0)},p(l,[p]){p&2&&(n=Object.entries(l[1]).length>0),n?s?(s.p(l,p),p&2&&fe(s,1)):(s=sd(l),s.c(),fe(s,1),s.m(r,null)):s&&(ir(),ve(s,1,1,()=>{s=null}),ar())},i(l){i||(fe(s),i=!0)},o(l){ve(s),i=!1},d(l){l&&M(e),s&&s.d(),a=!1,zt(o)}}}function B6(t){var e=!1;return t.deltaY?t.deltaY===t.deltaY*-3&&(e=!0):t.deltaMode===0&&(e=!0),e}function O6(t,e,r){let{onMarkerMove:n=j=>{}}=e,{dataPoints:i}=e,{center:a=[100,100]}=e,{dimensions:o=[100,100]}=e,{pointRadius:s=4}=e,{markerRadius:l=10}=e,{textWidth:p=150}=e,{fontSize:c=12}=e,{innerPad:f=100}=e,{markerLocation:d=[.5,.5]}=e,g=!1,b=o,v=[0,0],m=1,D=[0,0],B=!0;function w(j){const V=Mi(j);r(0,d=A(zr(ms(V,D),1/m))),n(d)}function C(j){if(g){const V=Mi(j);r(0,d=A(zr(ms(V,D),1/m))),n(d)}}function F(j){r(7,g=!1)}function k(j){j.preventDefault();const V=B6(j),H=Mi(j),z=zr(ms(H,D),1/m);r(9,m=Math.min(Math.max(m+(V?-1:1)*j.deltaY*-.01,.5),20)),r(10,D=[H[0]-z[0]*m,H[1]-z[1]*m])}function O(j){B&&(j=j||window.event,j.key==="ArrowUp"||j.key==="w"?r(10,D[1]+=10,D):j.key=="ArrowDown"||j.key=="s"?r(10,D[1]-=10,D):j.key=="ArrowLeft"||j.key=="a"?r(10,D[0]+=10,D):(j.key=="ArrowRight"||j.key=="d")&&r(10,D[0]-=10,D))}function A(j){let V=ms(j,v);return[V[0]/b[0],V[1]/b[1]]}function x(j,V,H,z,Q=!1){let X=j;return Q&&(X=xr(V,[j[0]*b[0],j[1]*b[1]])),xr(zr(X,z),H)}const U=()=>r(7,g=!0),K=()=>r(11,B=!0),J=()=>r(11,B=!1);return t.$$set=j=>{"onMarkerMove"in j&&r(18,n=j.onMarkerMove),"dataPoints"in j&&r(1,i=j.dataPoints),"center"in j&&r(19,a=j.center),"dimensions"in j&&r(20,o=j.dimensions),"pointRadius"in j&&r(2,s=j.pointRadius),"markerRadius"in j&&r(3,l=j.markerRadius),"textWidth"in j&&r(4,p=j.textWidth),"fontSize"in j&&r(5,c=j.fontSize),"innerPad"in j&&r(21,f=j.innerPad),"markerLocation"in j&&r(0,d=j.markerLocation)},t.$$.update=()=>{if(t.$$.dirty&3145792){const j=Math.min(...o),V=o[0]===j,H=o[1]===j;r(6,v=[Math.max(V?0:(o[0]-j)/2,f),Math.max(H?0:(o[1]-j)/2,f)]),r(8,b=[o[0]-2*v[0],o[1]-2*v[1]])}},[d,i,s,l,p,c,v,g,b,m,D,B,w,C,F,k,O,x,n,a,o,f,U,K,J]}class A1 extends Xe{constructor(e){super(),et(this,e,O6,S6,tt,{onMarkerMove:18,dataPoints:1,center:19,dimensions:20,pointRadius:2,markerRadius:3,textWidth:4,fontSize:5,innerPad:21,markerLocation:0})}}function cd(t){let e,r,n,i,a,o,s,l;return{c(){e=q("div"),r=q("label"),n=q("span"),i=Se("Scaling Power"),a=Ee(),o=q("input"),this.h()},l(p){e=W(p,"DIV",{class:!0});var c=R(e);r=W(c,"LABEL",{class:!0});var f=R(r);n=W(f,"SPAN",{class:!0});var d=R(n);i=Be(d,"Scaling Power"),d.forEach(M),f.forEach(M),a=Ae(c),o=W(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(M),this.h()},h(){S(n,"class","label-text"),S(r,"class","label"),o.value=t[2],S(o,"type","range"),S(o,"min","0.5"),S(o,"max","3"),S(o,"step","0.1"),S(o,"class","range range-sm"),S(e,"class","w-full px-2")},m(p,c){se(p,e,c),T(e,r),T(r,n),T(n,i),T(e,a),T(e,o),s||(l=_e(o,"change",t[11]),s=!0)},p(p,c){c&4&&(o.value=p[2])},d(p){p&&M(e),s=!1,l()}}}function M6(t){let e,r,n,i,a,o,s,l,p,c,f,d,g,b,v,m,D,B,w,C,F,k,O,A,x,U,K,J,j,V,H,z,Q,X,te,le,be,we,Oe,Pe,Te,Re,Ue,We=t[0]&&cd(t);return{c(){e=q("div"),r=q("div"),n=q("label"),i=q("span"),a=Se("Exponential Scaling"),o=Ee(),s=q("input"),l=Ee(),We&&We.c(),p=Ee(),c=q("div"),f=q("label"),d=q("span"),g=Se("# Prompts"),b=Ee(),v=q("input"),m=Ee(),D=q("div"),B=q("div"),w=q("label"),C=q("span"),F=Se("Clusters"),k=Ee(),O=q("div"),A=q("button"),x=Se("0"),U=Ee(),K=q("button"),J=Se("2"),j=Ee(),V=q("button"),H=Se("4"),z=Ee(),Q=q("button"),X=Se("6"),te=Ee(),le=q("button"),be=Se("8"),we=Ee(),Oe=q("div"),Pe=q("button"),Te=Se("Shuffle"),this.h()},l(Ye){e=W(Ye,"DIV",{class:!0});var xe=R(e);r=W(xe,"DIV",{class:!0});var Dt=R(r);n=W(Dt,"LABEL",{class:!0});var Et=R(n);i=W(Et,"SPAN",{class:!0});var ht=R(i);a=Be(ht,"Exponential Scaling"),ht.forEach(M),Et.forEach(M),o=Ae(Dt),s=W(Dt,"INPUT",{type:!0,class:!0}),Dt.forEach(M),l=Ae(xe),We&&We.l(xe),p=Ae(xe),c=W(xe,"DIV",{class:!0});var lt=R(c);f=W(lt,"LABEL",{class:!0});var Pt=R(f);d=W(Pt,"SPAN",{class:!0});var yr=R(d);g=Be(yr,"# Prompts"),yr.forEach(M),Pt.forEach(M),b=Ae(lt),v=W(lt,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),lt.forEach(M),m=Ae(xe),D=W(xe,"DIV",{class:!0});var It=R(D);B=W(It,"DIV",{class:!0});var hr=R(B);w=W(hr,"LABEL",{class:!0});var Ze=R(w);C=W(Ze,"SPAN",{class:!0});var Xt=R(C);F=Be(Xt,"Clusters"),Xt.forEach(M),Ze.forEach(M),k=Ae(hr),O=W(hr,"DIV",{class:!0});var Nt=R(O);A=W(Nt,"BUTTON",{class:!0});var Zr=R(A);x=Be(Zr,"0"),Zr.forEach(M),U=Ae(Nt),K=W(Nt,"BUTTON",{class:!0});var G=R(K);J=Be(G,"2"),G.forEach(M),j=Ae(Nt),V=W(Nt,"BUTTON",{class:!0});var Z=R(V);H=Be(Z,"4"),Z.forEach(M),z=Ae(Nt),Q=W(Nt,"BUTTON",{class:!0});var ie=R(Q);X=Be(ie,"6"),ie.forEach(M),te=Ae(Nt),le=W(Nt,"BUTTON",{class:!0});var de=R(le);be=Be(de,"8"),de.forEach(M),Nt.forEach(M),hr.forEach(M),It.forEach(M),we=Ae(xe),Oe=W(xe,"DIV",{class:!0});var ue=R(Oe);Pe=W(ue,"BUTTON",{class:!0});var me=R(Pe);Te=Be(me,"Shuffle"),me.forEach(M),ue.forEach(M),xe.forEach(M),this.h()},h(){S(i,"class","label-text"),S(n,"class","label"),S(s,"type","checkbox"),S(s,"class","toggle toggle-sm"),s.checked=t[0],S(r,"class","min-w-max px-2"),S(d,"class","label-text"),S(f,"class","label"),v.value=t[4],S(v,"type","range"),S(v,"min","1"),S(v,"max",t[5]),S(v,"step","1"),S(v,"class","range range-sm"),S(c,"class","w-full px-2"),S(C,"class","label-text"),S(w,"class","label pb-1 m-0"),S(A,"class","btn btn-xs"),Qe(A,"btn-active",t[7]===0),S(K,"class","btn btn-xs"),Qe(K,"btn-active",t[7]===2),Qe(K,"btn-disabled",t[9]<2),S(V,"class","btn btn-xs"),Qe(V,"btn-active",t[7]===4),Qe(V,"btn-disabled",t[9]<4),S(Q,"class","btn btn-xs"),Qe(Q,"btn-active",t[7]===6),Qe(Q,"btn-disabled",t[9]<6),S(le,"class","btn btn-xs"),Qe(le,"btn-active",t[7]===8),Qe(le,"btn-disabled",t[9]<8),S(O,"class","btn-group btn-group-horizontal p-0"),S(B,"class",""),S(D,"class",""),S(Pe,"class","btn btn-xs btn-primary"),S(Oe,"class","w-32 px-2 pb-1 flex flex-col justify-end"),S(e,"class","px-2 py-4 pb-0 flex")},m(Ye,xe){se(Ye,e,xe),T(e,r),T(r,n),T(n,i),T(i,a),T(r,o),T(r,s),T(e,l),We&&We.m(e,null),T(e,p),T(e,c),T(c,f),T(f,d),T(d,g),T(c,b),T(c,v),T(e,m),T(e,D),T(D,B),T(B,w),T(w,C),T(C,F),T(B,k),T(B,O),T(O,A),T(A,x),T(O,U),T(O,K),T(K,J),T(O,j),T(O,V),T(V,H),T(O,z),T(O,Q),T(Q,X),T(O,te),T(O,le),T(le,be),T(e,we),T(e,Oe),T(Oe,Pe),T(Pe,Te),Re||(Ue=[_e(s,"change",function(){Fa(t[1])&&t[1].apply(this,arguments)}),_e(v,"change",t[12]),_e(A,"click",t[13]),_e(K,"click",t[14]),_e(V,"click",t[15]),_e(Q,"click",t[16]),_e(le,"click",t[17]),_e(Pe,"click",function(){Fa(t[10])&&t[10].apply(this,arguments)})],Re=!0)},p(Ye,[xe]){t=Ye,xe&1&&(s.checked=t[0]),t[0]?We?We.p(t,xe):(We=cd(t),We.c(),We.m(e,p)):We&&(We.d(1),We=null),xe&16&&(v.value=t[4]),xe&32&&S(v,"max",t[5]),xe&128&&Qe(A,"btn-active",t[7]===0),xe&128&&Qe(K,"btn-active",t[7]===2),xe&512&&Qe(K,"btn-disabled",t[9]<2),xe&128&&Qe(V,"btn-active",t[7]===4),xe&512&&Qe(V,"btn-disabled",t[9]<4),xe&128&&Qe(Q,"btn-active",t[7]===6),xe&512&&Qe(Q,"btn-disabled",t[9]<6),xe&128&&Qe(le,"btn-active",t[7]===8),xe&512&&Qe(le,"btn-disabled",t[9]<8)},i:Me,o:Me,d(Ye){Ye&&M(e),We&&We.d(),Re=!1,zt(Ue)}}}function P6(t,e,r){let{useExponentialScaling:n=!1}=e,{toggleExponentialScaling:i=()=>{}}=e,{exponentialScaling:a=2}=e,{setExponentialScaling:o=()=>{}}=e,{connectionLimit:s=1}=e,{maxConnectionLimit:l=1}=e,{setConnectionLimit:p=()=>{}}=e,{clusterCount:c=0}=e,{setClusterCount:f=()=>{}}=e,{maxClusterCount:d=0}=e,{onShuffle:g=()=>{}}=e;const b=F=>o(parseFloat(F.target.value)),v=F=>p(parseInt(F.target.value)),m=()=>f(0),D=()=>f(2),B=()=>f(4),w=()=>f(6),C=()=>f(8);return t.$$set=F=>{"useExponentialScaling"in F&&r(0,n=F.useExponentialScaling),"toggleExponentialScaling"in F&&r(1,i=F.toggleExponentialScaling),"exponentialScaling"in F&&r(2,a=F.exponentialScaling),"setExponentialScaling"in F&&r(3,o=F.setExponentialScaling),"connectionLimit"in F&&r(4,s=F.connectionLimit),"maxConnectionLimit"in F&&r(5,l=F.maxConnectionLimit),"setConnectionLimit"in F&&r(6,p=F.setConnectionLimit),"clusterCount"in F&&r(7,c=F.clusterCount),"setClusterCount"in F&&r(8,f=F.setClusterCount),"maxClusterCount"in F&&r(9,d=F.maxClusterCount),"onShuffle"in F&&r(10,g=F.onShuffle)},[n,i,a,o,s,l,p,c,f,d,g,b,v,m,D,B,w,C]}class C1 extends Xe{constructor(e){super(),et(this,e,P6,M6,tt,{useExponentialScaling:0,toggleExponentialScaling:1,exponentialScaling:2,setExponentialScaling:3,connectionLimit:4,maxConnectionLimit:5,setConnectionLimit:6,clusterCount:7,setClusterCount:8,maxClusterCount:9,onShuffle:10})}}const Pc=ur({});var kc={},k6={get exports(){return kc},set exports(t){kc=t}},zs={},T6={get exports(){return zs},set exports(t){zs=t}},fd;function I6(){return fd||(fd=1,function(t){function e(r,n,i,a){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,i,a)}e.prototype.run=function(r,n,i,a){this._init(r,n,i,a);for(var o=0;o<this._datasetLength;o++)if(this._visited[o]!==1){this._visited[o]=1;var s=this._regionQuery(o);if(s.length<this.minPts)this.noise.push(o);else{var l=this.clusters.length;this.clusters.push([]),this._addToCluster(o,l),this._expandCluster(l,s)}}return this.clusters},e.prototype._init=function(r,n,i,a){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),i&&(this.minPts=i),a&&(this.distance=a)},e.prototype._expandCluster=function(r,n){for(var i=0;i<n.length;i++){var a=n[i];if(this._visited[a]!==1){this._visited[a]=1;var o=this._regionQuery(a);o.length>=this.minPts&&(n=this._mergeArrays(n,o))}this._assigned[a]!==1&&this._addToCluster(a,r)}},e.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1},e.prototype._regionQuery=function(r){for(var n=[],i=0;i<this._datasetLength;i++){var a=this.distance(this.dataset[r],this.dataset[i]);a<this.epsilon&&n.push(i)}return n},e.prototype._mergeArrays=function(r,n){for(var i=n.length,a=0;a<i;a++){var o=n[a];r.indexOf(o)<0&&r.push(o)}return r},e.prototype._euclideanDistance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;)i+=(r[a]-n[a])*(r[a]-n[a]);return Math.sqrt(i)},t.exports&&(t.exports=e)}(T6)),zs}var qs={},x6={get exports(){return qs},set exports(t){qs=t}},hd;function N6(){return hd||(hd=1,function(t){function e(r,n,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,i)}e.prototype.init=function(r,n,i){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof i<"u"&&(this.distance=i)},e.prototype.run=function(r,n){this.init(r,n);for(var i=this.dataset.length,a=0;a<this.k;a++)this.centroids[a]=this.randomCentroid();for(var o=!0;o;){o=this.assign();for(var s=0;s<this.k;s++){for(var l=new Array(d),p=0,c=0;c<d;c++)l[c]=0;for(var f=0;f<i;f++){var d=this.dataset[f].length;if(s===this.assignments[f]){for(var c=0;c<d;c++)l[c]+=this.dataset[f][c];p++}}if(p>0){for(var c=0;c<d;c++)l[c]/=p;this.centroids[s]=l}else this.centroids[s]=this.randomCentroid(),o=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,i;do i=Math.round(Math.random()*r),n=this.dataset[i];while(this.centroids.indexOf(n)>=0);return n},e.prototype.assign=function(){for(var r=!1,n=this.dataset.length,i,a=0;a<n;a++)i=this.argmin(this.dataset[a],this.centroids,this.distance),i!=this.assignments[a]&&(this.assignments[a]=i,r=!0);return r},e.prototype.getClusters=function(){for(var r=new Array(this.k),n,i=0;i<this.assignments.length;i++)n=this.assignments[i],typeof r[n]>"u"&&(r[n]=[]),r[n].push(i);return r},e.prototype.argmin=function(r,n,i){for(var a=Number.MAX_VALUE,o=0,s=n.length,l,p=0;p<s;p++)l=i(r,n[p]),l<a&&(a=l,o=p);return o},e.prototype.distance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;){var o=r[a]-n[a];i+=o*o}return Math.sqrt(i)},t.exports&&(t.exports=e)}(x6)),qs}var Ws={},L6={get exports(){return Ws},set exports(t){Ws=t}},Hs={},R6={get exports(){return Hs},set exports(t){Hs=t}},dd;function F1(){return dd||(dd=1,function(t){function e(r,n,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,i)}e.prototype.insert=function(r,n){for(var i=this._queue.length,a=i;a--;){var o=this._priorities[a];this._sorting==="desc"?n>o&&(i=a):n<o&&(i=a)}this._insertAt(r,n,i)},e.prototype.remove=function(r){for(var n=this._queue.length;n--;){var i=this._queue[n];if(r===i){this._queue.splice(n,1),this._priorities.splice(n,1);break}}},e.prototype.forEach=function(r){this._queue.forEach(r)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(r){return this._priorities[r]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,i=this._queue.length;n<i;n++)r.push([this._queue[n],this._priorities[n]]);return r},e.prototype._init=function(r,n,i){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var a=0;a<r.length;a++)this.insert(r[a],n[a])}i&&(this._sorting=i)},e.prototype._insertAt=function(r,n,i){this._queue.length===i?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(i,0,r),this._priorities.splice(i,0,n))},t.exports&&(t.exports=e)}(R6)),Hs}var pd;function U6(){return pd||(pd=1,function(t){if(t.exports)var e=F1();function r(n,i,a,o){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,i,a,o)}r.prototype.run=function(n,i,a,o){this._init(n,i,a,o);for(var s=0,l=this.dataset.length;s<l;s++)if(this._processed[s]!==1){this._processed[s]=1,this.clusters.push([s]);var p=this.clusters.length-1;this._orderedList.push(s);var c=new e(null,null,"asc"),f=this._regionQuery(s);this._distanceToCore(s)!==void 0&&(this._updateQueue(s,f,c),this._expandCluster(p,c))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var n=[],i=0,a=this._orderedList.length;i<a;i++){var o=this._orderedList[i],s=this._reachability[o];n.push([o,s])}return n},r.prototype._init=function(n,i,a,o){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}i&&(this.epsilon=i),a&&(this.minPts=a),o&&(this.distance=o)},r.prototype._updateQueue=function(n,i,a){var o=this;this._coreDistance=this._distanceToCore(n),i.forEach(function(s){if(o._processed[s]===void 0){var l=o.distance(o.dataset[n],o.dataset[s]),p=Math.max(o._coreDistance,l);o._reachability[s]===void 0?(o._reachability[s]=p,a.insert(s,p)):p<o._reachability[s]&&(o._reachability[s]=p,a.remove(s),a.insert(s,p))}})},r.prototype._expandCluster=function(n,i){for(var a=i.getElements(),o=0,s=a.length;o<s;o++){var l=a[o];if(this._processed[l]===void 0){var p=this._regionQuery(l);this._processed[l]=1,this.clusters[n].push(l),this._orderedList.push(l),this._distanceToCore(l)!==void 0&&(this._updateQueue(l,p,i),this._expandCluster(n,i))}}},r.prototype._distanceToCore=function(n){for(var i=this.epsilon,a=0;a<i;a++){var o=this._regionQuery(n,a);if(o.length>=this.minPts)return a}},r.prototype._regionQuery=function(n,i){i=i||this.epsilon;for(var a=[],o=0,s=this.dataset.length;o<s;o++)this.distance(this.dataset[n],this.dataset[o])<i&&a.push(o);return a},r.prototype._euclideanDistance=function(n,i){for(var a=0,o=Math.min(n.length,i.length);o--;)a+=(n[o]-i[o])*(n[o]-i[o]);return Math.sqrt(a)},t.exports&&(t.exports=r)}(L6)),Ws}(function(t){t.exports&&(t.exports={DBSCAN:I6(),KMEANS:N6(),OPTICS:U6(),PriorityQueue:F1()})})(k6);var $s={},V6={get exports(){return $s},set exports(t){$s=t}},Gs={},j6={get exports(){return Gs},set exports(t){Gs=t}},Ca=typeof Reflect=="object"?Reflect:null,gd=Ca&&typeof Ca.apply=="function"?Ca.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Cs;Ca&&typeof Ca.ownKeys=="function"?Cs=Ca.ownKeys:Object.getOwnPropertySymbols?Cs=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Cs=function(e){return Object.getOwnPropertyNames(e)};function z6(t){console&&console.warn&&console.warn(t)}var S1=Number.isNaN||function(e){return e!==e};function Lt(){Lt.init.call(this)}j6.exports=Lt;Gs.once=$6;Lt.EventEmitter=Lt;Lt.prototype._events=void 0;Lt.prototype._eventsCount=0;Lt.prototype._maxListeners=void 0;var vd=10;function _o(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Lt,"defaultMaxListeners",{enumerable:!0,get:function(){return vd},set:function(t){if(typeof t!="number"||t<0||S1(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");vd=t}});Lt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Lt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||S1(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function B1(t){return t._maxListeners===void 0?Lt.defaultMaxListeners:t._maxListeners}Lt.prototype.getMaxListeners=function(){return B1(this)};Lt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[e];if(l===void 0)return!1;if(typeof l=="function")gd(l,this,r);else for(var p=l.length,c=T1(l,p),n=0;n<p;++n)gd(c[n],this,r);return!0};function O1(t,e,r,n){var i,a,o;if(_o(r),a=t._events,a===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),o=a[e]),o===void 0)o=a[e]=r,++t._eventsCount;else if(typeof o=="function"?o=a[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=B1(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=o.length,z6(s)}return t}Lt.prototype.addListener=function(e,r){return O1(this,e,r,!1)};Lt.prototype.on=Lt.prototype.addListener;Lt.prototype.prependListener=function(e,r){return O1(this,e,r,!0)};function q6(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function M1(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=q6.bind(n);return i.listener=r,n.wrapFn=i,i}Lt.prototype.once=function(e,r){return _o(r),this.on(e,M1(this,e,r)),this};Lt.prototype.prependOnceListener=function(e,r){return _o(r),this.prependListener(e,M1(this,e,r)),this};Lt.prototype.removeListener=function(e,r){var n,i,a,o,s;if(_o(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){s=n[o].listener,a=o;break}if(a<0)return this;a===0?n.shift():W6(n,a),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this};Lt.prototype.off=Lt.prototype.removeListener;Lt.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var a=Object.keys(n),o;for(i=0;i<a.length;++i)o=a[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function P1(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?H6(i):T1(i,i.length)}Lt.prototype.listeners=function(e){return P1(this,e,!0)};Lt.prototype.rawListeners=function(e){return P1(this,e,!1)};Lt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):k1.call(t,e)};Lt.prototype.listenerCount=k1;function k1(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Lt.prototype.eventNames=function(){return this._eventsCount>0?Cs(this._events):[]};function T1(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function W6(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function H6(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function $6(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,a),n(o)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}I1(t,e,a,{once:!0}),e!=="error"&&G6(t,i,{once:!0})})}function G6(t,e,r){typeof t.on=="function"&&I1(t,"error",e,r)}function I1(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(a){n.once&&t.removeEventListener(e,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}function K6(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}var Y6=K6;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Z6=function(t){return t!=null&&(x1(t)||J6(t)||!!t._isBuffer)};function x1(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function J6(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&x1(t.slice(0,0))}var Q6=Y6,X6=Z6,eC=typeof Float64Array<"u";function tC(t,e){return t[0]-e[0]}function rC(){var t=this.stride,e=new Array(t.length),r;for(r=0;r<e.length;++r)e[r]=[Math.abs(t[r]),r];e.sort(tC);var n=new Array(e.length);for(r=0;r<n.length;++r)n[r]=e[r][1];return n}function nC(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n=t==="generic";if(e===-1){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",v=new Function(i);return v()}else if(e===0){var i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",v=new Function("TrivialArray",i);return v(Ks[t][0])}var i=["'use strict'"],a=Q6(e),o=a.map(function(m){return"i"+m}),s="this.offset+"+a.map(function(m){return"this.stride["+m+"]*i"+m}).join("+"),l=a.map(function(m){return"b"+m}).join(","),p=a.map(function(m){return"c"+m}).join(",");i.push("function "+r+"(a,"+l+","+p+",d){this.data=a","this.shape=["+l+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(m){return"this.shape["+m+"]"}).join("*"),"}})"),e===1?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+r+"_order(){"),e===2?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+o.join(",")+",v){"),n?i.push("return this.data.set("+s+",v)}"):i.push("return this.data["+s+"]=v}"),i.push("proto.get=function "+r+"_get("+o.join(",")+"){"),n?i.push("return this.data.get("+s+")}"):i.push("return this.data["+s+"]}"),i.push("proto.index=function "+r+"_index(",o.join(),"){return "+s+"}"),i.push("proto.hi=function "+r+"_hi("+o.join(",")+"){return new "+r+"(this.data,"+a.map(function(m){return["(typeof i",m,"!=='number'||i",m,"<0)?this.shape[",m,"]:i",m,"|0"].join("")}).join(",")+","+a.map(function(m){return"this.stride["+m+"]"}).join(",")+",this.offset)}");var c=a.map(function(m){return"a"+m+"=this.shape["+m+"]"}),f=a.map(function(m){return"c"+m+"=this.stride["+m+"]"});i.push("proto.lo=function "+r+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+c.join(",")+","+f.join(","));for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");i.push("return new "+r+"(this.data,"+a.map(function(m){return"a"+m}).join(",")+","+a.map(function(m){return"c"+m}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+o.join(",")+"){var "+a.map(function(m){return"a"+m+"=this.shape["+m+"]"}).join(",")+","+a.map(function(m){return"b"+m+"=this.stride["+m+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");i.push("return new "+r+"(this.data,"+a.map(function(m){return"a"+m}).join(",")+","+a.map(function(m){return"b"+m}).join(",")+",c)}");for(var g=new Array(e),b=new Array(e),d=0;d<e;++d)g[d]="a[i"+d+"]",b[d]="b[i"+d+"]";i.push("proto.transpose=function "+r+"_transpose("+o+"){"+o.map(function(m,D){return m+"=("+m+"===undefined?"+D+":"+m+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+b.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+o+"){var a=[],b=[],c=this.offset");for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(m){return"shape["+m+"]"}).join(",")+","+a.map(function(m){return"stride["+m+"]"}).join(",")+",offset)}");var v=new Function("CTOR_LIST","ORDER",i.join(`
`));return v(Ks[t],rC)}function iC(t){if(X6(t))return"buffer";if(eC)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var Ks={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function aC(t,e,r,n){if(t===void 0){var p=Ks.array[0];return p([])}else typeof t=="number"&&(t=[t]);e===void 0&&(e=[t.length]);var i=e.length;if(r===void 0){r=new Array(i);for(var a=i-1,o=1;a>=0;--a)r[a]=o,o*=e[a]}if(n===void 0){n=0;for(var a=0;a<i;++a)r[a]<0&&(n-=(e[a]-1)*r[a])}for(var s=iC(t),l=Ks[s];l.length<=i+1;)l.push(nC(s,l.length-1));var p=l[i+1];return p(t,e,r,n)}var Ta=aC,bo={};function uC(t,e){for(var r=1,n=t.length,i=t[0],a=t[0],o=1;o<n;++o)if(a=i,i=t[o],e(i,a)){if(o===r){r++;continue}t[r++]=i}return t.length=r,t}function sC(t){for(var e=1,r=t.length,n=t[0],i=t[0],a=1;a<r;++a,i=n)if(i=n,n=t[a],n!==i){if(a===e){e++;continue}t[e++]=n}return t.length=e,t}function oC(t,e,r){return t.length===0?t:e?(r||t.sort(e),uC(t,e)):(r||t.sort(),sC(t))}var N1=oC,lC=N1;function L1(t,e,r){var n=t.length,i=e.arrayArgs.length,a=e.indexArgs.length>0,o=[],s=[],l=0,p=0,c,f;for(c=0;c<n;++c)s.push(["i",c,"=0"].join(""));for(f=0;f<i;++f)for(c=0;c<n;++c)p=l,l=t[c],c===0?s.push(["d",f,"s",c,"=t",f,"p",l].join("")):s.push(["d",f,"s",c,"=(t",f,"p",l,"-s",p,"*t",f,"p",p,")"].join(""));for(s.length>0&&o.push("var "+s.join(",")),c=n-1;c>=0;--c)l=t[c],o.push(["for(i",c,"=0;i",c,"<s",l,";++i",c,"){"].join(""));for(o.push(r),c=0;c<n;++c){for(p=l,l=t[c],f=0;f<i;++f)o.push(["p",f,"+=d",f,"s",c].join(""));a&&(c>0&&o.push(["index[",p,"]-=s",p].join("")),o.push(["++index[",l,"]"].join(""))),o.push("}")}return o.join(`
`)}function cC(t,e,r,n){for(var i=e.length,a=r.arrayArgs.length,o=r.blockSize,s=r.indexArgs.length>0,l=[],p=0;p<a;++p)l.push(["var offset",p,"=p",p].join(""));for(var p=t;p<i;++p)l.push(["for(var j"+p+"=SS[",e[p],"]|0;j",p,">0;){"].join("")),l.push(["if(j",p,"<",o,"){"].join("")),l.push(["s",e[p],"=j",p].join("")),l.push(["j",p,"=0"].join("")),l.push(["}else{s",e[p],"=",o].join("")),l.push(["j",p,"-=",o,"}"].join("")),s&&l.push(["index[",e[p],"]=j",p].join(""));for(var p=0;p<a;++p){for(var c=["offset"+p],f=t;f<i;++f)c.push(["j",f,"*t",p,"p",e[f]].join(""));l.push(["p",p,"=(",c.join("+"),")"].join(""))}l.push(L1(e,r,n));for(var p=t;p<i;++p)l.push("}");return l.join(`
`)}function fC(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}function zl(t,e,r){for(var n=t.body,i=[],a=[],o=0;o<t.args.length;++o){var s=t.args[o];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),p="",c=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var f=e.offsetArgIndex.indexOf(o),d=e.offsetArgs[f];c=d.array,p="+q"+f;case"array":p="p"+c+p;var g="l"+o,b="a"+c;if(e.arrayBlockIndices[c]===0)s.count===1?r[c]==="generic"?s.lvalue?(i.push(["var ",g,"=",b,".get(",p,")"].join("")),n=n.replace(l,g),a.push([b,".set(",p,",",g,")"].join(""))):n=n.replace(l,[b,".get(",p,")"].join("")):n=n.replace(l,[b,"[",p,"]"].join("")):r[c]==="generic"?(i.push(["var ",g,"=",b,".get(",p,")"].join("")),n=n.replace(l,g),s.lvalue&&a.push([b,".set(",p,",",g,")"].join(""))):(i.push(["var ",g,"=",b,"[",p,"]"].join("")),n=n.replace(l,g),s.lvalue&&a.push([b,"[",p,"]=",g].join("")));else{for(var v=[s.name],m=[p],D=0;D<Math.abs(e.arrayBlockIndices[c]);D++)v.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(D+1)+"*t"+c+"b"+D);if(l=new RegExp(v.join(""),"g"),p=m.join("+"),r[c]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(l,[b,"[",p,"]"].join(""))}break;case"scalar":n=n.replace(l,"Y"+e.scalarArgs.indexOf(o));break;case"index":n=n.replace(l,"index");break;case"shape":n=n.replace(l,"shape");break}}}return[i.join(`
`),n,a.join(`
`)].join(`
`).trim()}function hC(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],a=i.match(/\d+/);a?a=a[0]:a="",i.charAt(0)===0?e[n]="u"+i.charAt(1)+a:e[n]=i.charAt(0)+a,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}function dC(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,n=new Array(t.arrayArgs.length),i=new Array(t.arrayArgs.length),a=0;a<t.arrayArgs.length;++a)i[a]=e[2*a],n[a]=e[2*a+1];for(var o=[],s=[],l=[],p=[],c=[],a=0;a<t.arrayArgs.length;++a){t.arrayBlockIndices[a]<0?(l.push(0),p.push(r),o.push(r),s.push(r+t.arrayBlockIndices[a])):(l.push(t.arrayBlockIndices[a]),p.push(t.arrayBlockIndices[a]+r),o.push(0),s.push(t.arrayBlockIndices[a]));for(var f=[],d=0;d<n[a].length;d++)l[a]<=n[a][d]&&n[a][d]<p[a]&&f.push(n[a][d]-l[a]);c.push(f)}for(var g=["SS"],b=["'use strict'"],v=[],d=0;d<r;++d)v.push(["s",d,"=SS[",d,"]"].join(""));for(var a=0;a<t.arrayArgs.length;++a){g.push("a"+a),g.push("t"+a),g.push("p"+a);for(var d=0;d<r;++d)v.push(["t",a,"p",d,"=t",a,"[",l[a]+d,"]"].join(""));for(var d=0;d<Math.abs(t.arrayBlockIndices[a]);++d)v.push(["t",a,"b",d,"=t",a,"[",o[a]+d,"]"].join(""))}for(var a=0;a<t.scalarArgs.length;++a)g.push("Y"+a);if(t.shapeArgs.length>0&&v.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var m=new Array(r),a=0;a<r;++a)m[a]="0";v.push(["index=[",m.join(","),"]"].join(""))}for(var a=0;a<t.offsetArgs.length;++a){for(var D=t.offsetArgs[a],B=[],d=0;d<D.offset.length;++d)D.offset[d]!==0&&(D.offset[d]===1?B.push(["t",D.array,"p",d].join("")):B.push([D.offset[d],"*t",D.array,"p",d].join("")));B.length===0?v.push("q"+a+"=0"):v.push(["q",a,"=",B.join("+")].join(""))}var w=lC([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));v=v.concat(w),v.length>0&&b.push("var "+v.join(","));for(var a=0;a<t.arrayArgs.length;++a)b.push("p"+a+"|=0");t.pre.body.length>3&&b.push(zl(t.pre,t,i));var C=zl(t.body,t,i),F=fC(c);F<r?b.push(cC(F,c[0],t,C)):b.push(L1(c[0],t,C)),t.post.body.length>3&&b.push(zl(t.post,t,i)),t.debug&&console.log("-----Generated cwise routine for ",e,`:
`+b.join(`
`)+`
----------`);var k=[t.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",F,hC(i)].join(""),O=new Function(["function ",k,"(",g.join(","),"){",b.join(`
`),"} return ",k].join(""));return O()}var pC=dC,gC=pC;function vC(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var i=[],a=[],o=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],s=[],l=[],p=0;p<t.arrayArgs.length;++p){var c=t.arrayArgs[p];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),i.push("t"+c),i.push("r"+c),a.push("t"+c),a.push("r"+c+".join()"),o.push("array"+c+".data"),o.push("array"+c+".stride"),o.push("array"+c+".offset|0"),p>0&&(s.push("array"+t.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[p]))),l.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[p])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var p=0;p<t.scalarArgs.length;++p)o.push("scalar"+t.scalarArgs[p]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",o.join(","),")}"].join("")),t.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var f=new Function("compile",e.join(`
`));return f(gC.bind(void 0,t))}var mC=vC,_C=mC;function bC(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function DC(t){var e=new bC;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var n=0;n<r.length;++n){var i=r[n];if(i==="array"||typeof i=="object"&&i.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(i==="scalar")e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if(i==="index"){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(i==="shape"){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof i=="object"&&i.offset)e.argTypes[n]="offset",e.offsetArgs.push({array:i.array,offset:i.offset}),e.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+r[n])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,_C(e)}var Xc=DC;(function(t){var e=Xc,r={body:"",args:[],thisVars:[],localVars:[]};function n(d){if(!d)return r;for(var g=0;g<d.args.length;++g){var b=d.args[g];g===0?d.args[g]={name:b,lvalue:!0,rvalue:!!d.rvalue,count:d.count||1}:d.args[g]={name:b,lvalue:!1,rvalue:!0,count:1}}return d.thisVars||(d.thisVars=[]),d.localVars||(d.localVars=[]),d}function i(d){return e({args:d.args,pre:n(d.pre),body:n(d.body),post:n(d.proc),funcName:d.funcName})}function a(d){for(var g=[],b=0;b<d.args.length;++b)g.push("a"+b);var v=new Function("P",["return function ",d.funcName,"_ndarrayops(",g.join(","),") {P(",g.join(","),");return a0}"].join(""));return v(i(d))}var o={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var d in o){var g=o[d];t[d]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:d}),t[d+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+g+"=b"},rvalue:!0,funcName:d+"eq"}),t[d+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:d+"s"}),t[d+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+g+"=s"},rvalue:!0,funcName:d+"seq"})}})();var s={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var d in s){var g=s[d];t[d]=a({args:["array","array"],body:{args:["a","b"],body:"a="+g+"b"},funcName:d}),t[d+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+g+"a"},rvalue:!0,count:2,funcName:d+"eq"})}})();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var d in l){var g=l[d];t[d]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:d}),t[d+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:d+"s"}),t[d+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+g+"b"},rvalue:!0,count:2,funcName:d+"eq"}),t[d+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+g+"s"},rvalue:!0,count:2,funcName:d+"seq"})}})();var p=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var d=0;d<p.length;++d){var g=p[d];t[g]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:g}),t[g+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"})}})();var c=["max","min","atan2","pow"];(function(){for(var d=0;d<c.length;++d){var g=c[d];t[g]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g}),t[g+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g+"s"}),t[g+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"}),t[g+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"seq"})}})();var f=["atan2","pow"];(function(){for(var d=0;d<f.length;++d){var g=f[d];t[g+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"op"}),t[g+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"ops"}),t[g+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opeq"}),t[g+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opseq"})}})(),t.any=e({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=e({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=e({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(bo);var yC=Xc({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64}),md=Ta,wC=yC,EC=function(e,r){for(var n=[],i=e,a=1;Array.isArray(i);)n.push(i.length),a*=i.length,i=i[0];return n.length===0?md():(r||(r=md(new Float64Array(a),n)),wC(r,e),r)};function R1(t,e,r){var n=t[r]|0;if(n<=0)return[];var i=new Array(n),a;if(r===t.length-1)for(a=0;a<n;++a)i[a]=e;else for(a=0;a<n;++a)i[a]=R1(t,e,r+1);return i}function AC(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function CC(t,e){switch(typeof e>"u"&&(e=0),typeof t){case"number":if(t>0)return AC(t|0,e);break;case"object":if(typeof t.length=="number")return R1(t,e,0);break}return[]}var FC=CC,U1={};(function(t){(function(e,r){r(t)})(gr,function(e){var r,n,i,a,o,s,l,p,c,f,d,g,b,v,m,D,B,w;r={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},n={},n[r.BooleanLiteral]="Boolean",n[r.EOF]="<end>",n[r.Identifier]="Identifier",n[r.Keyword]="Keyword",n[r.NullLiteral]="Null",n[r.NumericLiteral]="Numeric",n[r.Punctuator]="Punctuator",n[r.StringLiteral]="String",n[r.RegularExpression]="RegularExpression",i=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},o={Data:1,Get:2,Set:4},s={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},l={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function C(y,P){if(!y)throw new Error("ASSERT: "+P)}function F(y){return y>=48&&y<=57}function k(y){return"0123456789abcdefABCDEF".indexOf(y)>=0}function O(y){return"01234567".indexOf(y)>=0}function A(y){return y===32||y===9||y===11||y===12||y===160||y>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(y)>=0}function x(y){return y===10||y===13||y===8232||y===8233}function U(y){return y===36||y===95||y>=65&&y<=90||y>=97&&y<=122||y===92||y>=128&&l.NonAsciiIdentifierStart.test(String.fromCharCode(y))}function K(y){return y===36||y===95||y>=65&&y<=90||y>=97&&y<=122||y>=48&&y<=57||y===92||y>=128&&l.NonAsciiIdentifierPart.test(String.fromCharCode(y))}function J(y){switch(y){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function j(y){switch(y){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function V(y){return y==="eval"||y==="arguments"}function H(y){if(f&&j(y))return!0;switch(y.length){case 2:return y==="if"||y==="in"||y==="do";case 3:return y==="var"||y==="for"||y==="new"||y==="try"||y==="let";case 4:return y==="this"||y==="else"||y==="case"||y==="void"||y==="with"||y==="enum";case 5:return y==="while"||y==="break"||y==="catch"||y==="throw"||y==="const"||y==="yield"||y==="class"||y==="super";case 6:return y==="return"||y==="typeof"||y==="delete"||y==="switch"||y==="export"||y==="import";case 7:return y==="default"||y==="finally"||y==="extends";case 8:return y==="function"||y==="continue"||y==="debugger";case 10:return y==="instanceof";default:return!1}}function z(y,P,$,re,ge){var Ne;C(typeof $=="number","Comment must have valid position"),!(B.lastCommentStart>=$)&&(B.lastCommentStart=$,Ne={type:y,value:P},w.range&&(Ne.range=[$,re]),w.loc&&(Ne.loc=ge),w.comments.push(Ne),w.attachComment&&(w.leadingComments.push(Ne),w.trailingComments.push(Ne)))}function Q(y){var P,$,re,ge;for(P=d-y,$={start:{line:g,column:d-b-y}};d<v;)if(re=c.charCodeAt(d),++d,x(re)){w.comments&&(ge=c.slice(P+y,d-1),$.end={line:g,column:d-b-1},z("Line",ge,P,d-1,$)),re===13&&c.charCodeAt(d)===10&&++d,++g,b=d;return}w.comments&&(ge=c.slice(P+y,d),$.end={line:g,column:d-b},z("Line",ge,P,d,$))}function X(){var y,P,$,re;for(w.comments&&(y=d-2,P={start:{line:g,column:d-b-2}});d<v;)if($=c.charCodeAt(d),x($))$===13&&c.charCodeAt(d+1)===10&&++d,++g,++d,b=d,d>=v&&Z({},s.UnexpectedToken,"ILLEGAL");else if($===42){if(c.charCodeAt(d+1)===47){++d,++d,w.comments&&(re=c.slice(y+2,d-2),P.end={line:g,column:d-b},z("Block",re,y,d,P));return}++d}else++d;Z({},s.UnexpectedToken,"ILLEGAL")}function te(){var y,P;for(P=d===0;d<v;)if(y=c.charCodeAt(d),A(y))++d;else if(x(y))++d,y===13&&c.charCodeAt(d)===10&&++d,++g,b=d,P=!0;else if(y===47)if(y=c.charCodeAt(d+1),y===47)++d,++d,Q(2),P=!0;else if(y===42)++d,++d,X();else break;else if(P&&y===45)if(c.charCodeAt(d+1)===45&&c.charCodeAt(d+2)===62)d+=3,Q(3);else break;else if(y===60)if(c.slice(d+1,d+4)==="!--")++d,++d,++d,++d,Q(4);else break;else break}function le(y){var P,$,re,ge=0;for($=y==="u"?4:2,P=0;P<$;++P)if(d<v&&k(c[d]))re=c[d++],ge=ge*16+"0123456789abcdef".indexOf(re.toLowerCase());else return"";return String.fromCharCode(ge)}function be(){var y,P;for(y=c.charCodeAt(d++),P=String.fromCharCode(y),y===92&&(c.charCodeAt(d)!==117&&Z({},s.UnexpectedToken,"ILLEGAL"),++d,y=le("u"),(!y||y==="\\"||!U(y.charCodeAt(0)))&&Z({},s.UnexpectedToken,"ILLEGAL"),P=y);d<v&&(y=c.charCodeAt(d),!!K(y));)++d,P+=String.fromCharCode(y),y===92&&(P=P.substr(0,P.length-1),c.charCodeAt(d)!==117&&Z({},s.UnexpectedToken,"ILLEGAL"),++d,y=le("u"),(!y||y==="\\"||!K(y.charCodeAt(0)))&&Z({},s.UnexpectedToken,"ILLEGAL"),P+=y);return P}function we(){var y,P;for(y=d++;d<v;){if(P=c.charCodeAt(d),P===92)return d=y,be();if(K(P))++d;else break}return c.slice(y,d)}function Oe(){var y,P,$;return y=d,P=c.charCodeAt(d)===92?be():we(),P.length===1?$=r.Identifier:H(P)?$=r.Keyword:P==="null"?$=r.NullLiteral:P==="true"||P==="false"?$=r.BooleanLiteral:$=r.Identifier,{type:$,value:P,lineNumber:g,lineStart:b,start:y,end:d}}function Pe(){var y=d,P=c.charCodeAt(d),$,re=c[d],ge,Ne,vt;switch(P){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++d,w.tokenize&&(P===40?w.openParenToken=w.tokens.length:P===123&&(w.openCurlyToken=w.tokens.length)),{type:r.Punctuator,value:String.fromCharCode(P),lineNumber:g,lineStart:b,start:y,end:d};default:if($=c.charCodeAt(d+1),$===61)switch(P){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return d+=2,{type:r.Punctuator,value:String.fromCharCode(P)+String.fromCharCode($),lineNumber:g,lineStart:b,start:y,end:d};case 33:case 61:return d+=2,c.charCodeAt(d)===61&&++d,{type:r.Punctuator,value:c.slice(y,d),lineNumber:g,lineStart:b,start:y,end:d}}}if(vt=c.substr(d,4),vt===">>>=")return d+=4,{type:r.Punctuator,value:vt,lineNumber:g,lineStart:b,start:y,end:d};if(Ne=vt.substr(0,3),Ne===">>>"||Ne==="<<="||Ne===">>=")return d+=3,{type:r.Punctuator,value:Ne,lineNumber:g,lineStart:b,start:y,end:d};if(ge=Ne.substr(0,2),re===ge[1]&&"+-<>&|".indexOf(re)>=0||ge==="=>")return d+=2,{type:r.Punctuator,value:ge,lineNumber:g,lineStart:b,start:y,end:d};if("<>=!+-*%&|^/".indexOf(re)>=0)return++d,{type:r.Punctuator,value:re,lineNumber:g,lineStart:b,start:y,end:d};Z({},s.UnexpectedToken,"ILLEGAL")}function Te(y){for(var P="";d<v&&k(c[d]);)P+=c[d++];return P.length===0&&Z({},s.UnexpectedToken,"ILLEGAL"),U(c.charCodeAt(d))&&Z({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt("0x"+P,16),lineNumber:g,lineStart:b,start:y,end:d}}function Re(y){for(var P="0"+c[d++];d<v&&O(c[d]);)P+=c[d++];return(U(c.charCodeAt(d))||F(c.charCodeAt(d)))&&Z({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt(P,8),octal:!0,lineNumber:g,lineStart:b,start:y,end:d}}function Ue(){var y,P;for(y=d+1;y<v;++y){if(P=c[y],P==="8"||P==="9")return!1;if(!O(P))return!0}return!0}function We(){var y,P,$;if($=c[d],C(F($.charCodeAt(0))||$===".","Numeric literal must start with a decimal digit or a decimal point"),P=d,y="",$!=="."){if(y=c[d++],$=c[d],y==="0"){if($==="x"||$==="X")return++d,Te(P);if(O($)&&Ue())return Re(P)}for(;F(c.charCodeAt(d));)y+=c[d++];$=c[d]}if($==="."){for(y+=c[d++];F(c.charCodeAt(d));)y+=c[d++];$=c[d]}if($==="e"||$==="E")if(y+=c[d++],$=c[d],($==="+"||$==="-")&&(y+=c[d++]),F(c.charCodeAt(d)))for(;F(c.charCodeAt(d));)y+=c[d++];else Z({},s.UnexpectedToken,"ILLEGAL");return U(c.charCodeAt(d))&&Z({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseFloat(y),lineNumber:g,lineStart:b,start:P,end:d}}function Ye(){var y="",P,$,re,ge,Ne,vt,At=!1,Wt,or;for(Wt=g,or=b,P=c[d],C(P==="'"||P==='"',"String literal must starts with a quote"),$=d,++d;d<v;)if(re=c[d++],re===P){P="";break}else if(re==="\\")if(re=c[d++],!re||!x(re.charCodeAt(0)))switch(re){case"u":case"x":vt=d,Ne=le(re),Ne?y+=Ne:(d=vt,y+=re);break;case"n":y+=`
`;break;case"r":y+="\r";break;case"t":y+="	";break;case"b":y+="\b";break;case"f":y+="\f";break;case"v":y+="\v";break;default:O(re)?(ge="01234567".indexOf(re),ge!==0&&(At=!0),d<v&&O(c[d])&&(At=!0,ge=ge*8+"01234567".indexOf(c[d++]),"0123".indexOf(re)>=0&&d<v&&O(c[d])&&(ge=ge*8+"01234567".indexOf(c[d++]))),y+=String.fromCharCode(ge)):y+=re;break}else++g,re==="\r"&&c[d]===`
`&&++d,b=d;else{if(x(re.charCodeAt(0)))break;y+=re}return P!==""&&Z({},s.UnexpectedToken,"ILLEGAL"),{type:r.StringLiteral,value:y,octal:At,startLineNumber:Wt,startLineStart:or,lineNumber:g,lineStart:b,start:$,end:d}}function xe(y,P){var $;try{$=new RegExp(y,P)}catch{Z({},s.InvalidRegExp)}return $}function Dt(){var y,P,$,re,ge;for(y=c[d],C(y==="/","Regular expression literal must start with a slash"),P=c[d++],$=!1,re=!1;d<v;)if(y=c[d++],P+=y,y==="\\")y=c[d++],x(y.charCodeAt(0))&&Z({},s.UnterminatedRegExp),P+=y;else if(x(y.charCodeAt(0)))Z({},s.UnterminatedRegExp);else if($)y==="]"&&($=!1);else if(y==="/"){re=!0;break}else y==="["&&($=!0);return re||Z({},s.UnterminatedRegExp),ge=P.substr(1,P.length-2),{value:ge,literal:P}}function Et(){var y,P,$,re;for(P="",$="";d<v&&(y=c[d],!!K(y.charCodeAt(0)));)if(++d,y==="\\"&&d<v)if(y=c[d],y==="u"){if(++d,re=d,y=le("u"),y)for($+=y,P+="\\u";re<d;++re)P+=c[re];else d=re,$+="u",P+="\\u";ie({},s.UnexpectedToken,"ILLEGAL")}else P+="\\",ie({},s.UnexpectedToken,"ILLEGAL");else $+=y,P+=y;return{value:$,literal:P}}function ht(){var y,P,$,re;return D=null,te(),y=d,P=Dt(),$=Et(),re=xe(P.value,$.value),w.tokenize?{type:r.RegularExpression,value:re,lineNumber:g,lineStart:b,start:y,end:d}:{literal:P.literal+$.literal,value:re,start:y,end:d}}function lt(){var y,P,$,re;return te(),y=d,P={start:{line:g,column:d-b}},$=ht(),P.end={line:g,column:d-b},w.tokenize||(w.tokens.length>0&&(re=w.tokens[w.tokens.length-1],re.range[0]===y&&re.type==="Punctuator"&&(re.value==="/"||re.value==="/=")&&w.tokens.pop()),w.tokens.push({type:"RegularExpression",value:$.literal,range:[y,d],loc:P})),$}function Pt(y){return y.type===r.Identifier||y.type===r.Keyword||y.type===r.BooleanLiteral||y.type===r.NullLiteral}function yr(){var y,P;if(y=w.tokens[w.tokens.length-1],!y)return lt();if(y.type==="Punctuator"){if(y.value==="]")return Pe();if(y.value===")")return P=w.tokens[w.openParenToken-1],P&&P.type==="Keyword"&&(P.value==="if"||P.value==="while"||P.value==="for"||P.value==="with")?lt():Pe();if(y.value==="}"){if(w.tokens[w.openCurlyToken-3]&&w.tokens[w.openCurlyToken-3].type==="Keyword"){if(P=w.tokens[w.openCurlyToken-4],!P)return Pe()}else if(w.tokens[w.openCurlyToken-4]&&w.tokens[w.openCurlyToken-4].type==="Keyword"){if(P=w.tokens[w.openCurlyToken-5],!P)return lt()}else return Pe();return i.indexOf(P.value)>=0?Pe():lt()}return lt()}return y.type==="Keyword"&&y.value!=="this"?lt():Pe()}function It(){var y;return te(),d>=v?{type:r.EOF,lineNumber:g,lineStart:b,start:d,end:d}:(y=c.charCodeAt(d),U(y)?Oe():y===40||y===41||y===59?Pe():y===39||y===34?Ye():y===46?F(c.charCodeAt(d+1))?We():Pe():F(y)?We():w.tokenize&&y===47?yr():Pe())}function hr(){var y,P,$;return te(),y={start:{line:g,column:d-b}},P=It(),y.end={line:g,column:d-b},P.type!==r.EOF&&($=c.slice(P.start,P.end),w.tokens.push({type:n[P.type],value:$,range:[P.start,P.end],loc:y})),P}function Ze(){var y;return y=D,d=y.end,g=y.lineNumber,b=y.lineStart,D=typeof w.tokens<"u"?hr():It(),d=y.end,g=y.lineNumber,b=y.lineStart,y}function Xt(){var y,P,$;y=d,P=g,$=b,D=typeof w.tokens<"u"?hr():It(),d=y,g=P,b=$}function Nt(y,P){this.line=y,this.column=P}function Zr(y,P,$,re){this.start=new Nt(y,P),this.end=new Nt($,re)}p={name:"SyntaxTree",processComment:function(y){var P,$;if(!(y.type===a.Program&&y.body.length>0)){for(w.trailingComments.length>0?w.trailingComments[0].range[0]>=y.range[1]?($=w.trailingComments,w.trailingComments=[]):w.trailingComments.length=0:w.bottomRightStack.length>0&&w.bottomRightStack[w.bottomRightStack.length-1].trailingComments&&w.bottomRightStack[w.bottomRightStack.length-1].trailingComments[0].range[0]>=y.range[1]&&($=w.bottomRightStack[w.bottomRightStack.length-1].trailingComments,delete w.bottomRightStack[w.bottomRightStack.length-1].trailingComments);w.bottomRightStack.length>0&&w.bottomRightStack[w.bottomRightStack.length-1].range[0]>=y.range[0];)P=w.bottomRightStack.pop();P?P.leadingComments&&P.leadingComments[P.leadingComments.length-1].range[1]<=y.range[0]&&(y.leadingComments=P.leadingComments,delete P.leadingComments):w.leadingComments.length>0&&w.leadingComments[w.leadingComments.length-1].range[1]<=y.range[0]&&(y.leadingComments=w.leadingComments,w.leadingComments=[]),$&&(y.trailingComments=$),w.bottomRightStack.push(y)}},markEnd:function(y,P){return w.range&&(y.range=[P.start,d]),w.loc&&(y.loc=new Zr(P.startLineNumber===void 0?P.lineNumber:P.startLineNumber,P.start-(P.startLineStart===void 0?P.lineStart:P.startLineStart),g,d-b),this.postProcess(y)),w.attachComment&&this.processComment(y),y},postProcess:function(y){return w.source&&(y.loc.source=w.source),y},createArrayExpression:function(y){return{type:a.ArrayExpression,elements:y}},createAssignmentExpression:function(y,P,$){return{type:a.AssignmentExpression,operator:y,left:P,right:$}},createBinaryExpression:function(y,P,$){var re=y==="||"||y==="&&"?a.LogicalExpression:a.BinaryExpression;return{type:re,operator:y,left:P,right:$}},createBlockStatement:function(y){return{type:a.BlockStatement,body:y}},createBreakStatement:function(y){return{type:a.BreakStatement,label:y}},createCallExpression:function(y,P){return{type:a.CallExpression,callee:y,arguments:P}},createCatchClause:function(y,P){return{type:a.CatchClause,param:y,body:P}},createConditionalExpression:function(y,P,$){return{type:a.ConditionalExpression,test:y,consequent:P,alternate:$}},createContinueStatement:function(y){return{type:a.ContinueStatement,label:y}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(y,P){return{type:a.DoWhileStatement,body:y,test:P}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(y){return{type:a.ExpressionStatement,expression:y}},createForStatement:function(y,P,$,re){return{type:a.ForStatement,init:y,test:P,update:$,body:re}},createForInStatement:function(y,P,$){return{type:a.ForInStatement,left:y,right:P,body:$,each:!1}},createFunctionDeclaration:function(y,P,$,re){return{type:a.FunctionDeclaration,id:y,params:P,defaults:$,body:re,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(y,P,$,re){return{type:a.FunctionExpression,id:y,params:P,defaults:$,body:re,rest:null,generator:!1,expression:!1}},createIdentifier:function(y){return{type:a.Identifier,name:y}},createIfStatement:function(y,P,$){return{type:a.IfStatement,test:y,consequent:P,alternate:$}},createLabeledStatement:function(y,P){return{type:a.LabeledStatement,label:y,body:P}},createLiteral:function(y){return{type:a.Literal,value:y.value,raw:c.slice(y.start,y.end)}},createMemberExpression:function(y,P,$){return{type:a.MemberExpression,computed:y==="[",object:P,property:$}},createNewExpression:function(y,P){return{type:a.NewExpression,callee:y,arguments:P}},createObjectExpression:function(y){return{type:a.ObjectExpression,properties:y}},createPostfixExpression:function(y,P){return{type:a.UpdateExpression,operator:y,argument:P,prefix:!1}},createProgram:function(y){return{type:a.Program,body:y}},createProperty:function(y,P,$){return{type:a.Property,key:P,value:$,kind:y}},createReturnStatement:function(y){return{type:a.ReturnStatement,argument:y}},createSequenceExpression:function(y){return{type:a.SequenceExpression,expressions:y}},createSwitchCase:function(y,P){return{type:a.SwitchCase,test:y,consequent:P}},createSwitchStatement:function(y,P){return{type:a.SwitchStatement,discriminant:y,cases:P}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(y){return{type:a.ThrowStatement,argument:y}},createTryStatement:function(y,P,$,re){return{type:a.TryStatement,block:y,guardedHandlers:P,handlers:$,finalizer:re}},createUnaryExpression:function(y,P){return y==="++"||y==="--"?{type:a.UpdateExpression,operator:y,argument:P,prefix:!0}:{type:a.UnaryExpression,operator:y,argument:P,prefix:!0}},createVariableDeclaration:function(y,P){return{type:a.VariableDeclaration,declarations:y,kind:P}},createVariableDeclarator:function(y,P){return{type:a.VariableDeclarator,id:y,init:P}},createWhileStatement:function(y,P){return{type:a.WhileStatement,test:y,body:P}},createWithStatement:function(y,P){return{type:a.WithStatement,object:y,body:P}}};function G(){var y,P,$,re;return y=d,P=g,$=b,te(),re=g!==P,d=y,g=P,b=$,re}function Z(y,P){var $,re=Array.prototype.slice.call(arguments,2),ge=P.replace(/%(\d)/g,function(Ne,vt){return C(vt<re.length,"Message reference must be in range"),re[vt]});throw typeof y.lineNumber=="number"?($=new Error("Line "+y.lineNumber+": "+ge),$.index=y.start,$.lineNumber=y.lineNumber,$.column=y.start-b+1):($=new Error("Line "+g+": "+ge),$.index=d,$.lineNumber=g,$.column=d-b+1),$.description=ge,$}function ie(){try{Z.apply(null,arguments)}catch(y){if(w.errors)w.errors.push(y);else throw y}}function de(y){if(y.type===r.EOF&&Z(y,s.UnexpectedEOS),y.type===r.NumericLiteral&&Z(y,s.UnexpectedNumber),y.type===r.StringLiteral&&Z(y,s.UnexpectedString),y.type===r.Identifier&&Z(y,s.UnexpectedIdentifier),y.type===r.Keyword){if(J(y.value))Z(y,s.UnexpectedReserved);else if(f&&j(y.value)){ie(y,s.StrictReservedWord);return}Z(y,s.UnexpectedToken,y.value)}Z(y,s.UnexpectedToken,y.value)}function ue(y){var P=Ze();(P.type!==r.Punctuator||P.value!==y)&&de(P)}function me(y){var P=Ze();(P.type!==r.Keyword||P.value!==y)&&de(P)}function ce(y){return D.type===r.Punctuator&&D.value===y}function he(y){return D.type===r.Keyword&&D.value===y}function ke(){var y;return D.type!==r.Punctuator?!1:(y=D.value,y==="="||y==="*="||y==="/="||y==="%="||y==="+="||y==="-="||y==="<<="||y===">>="||y===">>>="||y==="&="||y==="^="||y==="|=")}function He(){var y,P=d,$=g,re=b,ge=D;if(c.charCodeAt(d)===59||ce(";")){Ze();return}if(y=g,te(),g!==y){d=P,g=$,b=re,D=ge;return}D.type!==r.EOF&&!ce("}")&&de(D)}function ct(y){return y.type===a.Identifier||y.type===a.MemberExpression}function Ie(){var y=[],P;for(P=D,ue("[");!ce("]");)ce(",")?(Ze(),y.push(null)):(y.push(Br()),ce("]")||ue(","));return Ze(),m.markEnd(m.createArrayExpression(y),P)}function $t(y,P){var $,re,ge;return $=f,ge=D,re=Vi(),P&&f&&V(y[0].name)&&ie(P,s.StrictParamName),f=$,m.markEnd(m.createFunctionExpression(null,y,[],re),ge)}function Vt(){var y,P;return P=D,y=Ze(),y.type===r.StringLiteral||y.type===r.NumericLiteral?(f&&y.octal&&ie(y,s.StrictOctalLiteral),m.markEnd(m.createLiteral(y),P)):m.markEnd(m.createIdentifier(y.value),P)}function er(){var y,P,$,re,ge,Ne;if(y=D,Ne=D,y.type===r.Identifier)return $=Vt(),y.value==="get"&&!ce(":")?(P=Vt(),ue("("),ue(")"),re=$t([]),m.markEnd(m.createProperty("get",P,re),Ne)):y.value==="set"&&!ce(":")?(P=Vt(),ue("("),y=D,y.type!==r.Identifier?(ue(")"),ie(y,s.UnexpectedToken,y.value),re=$t([])):(ge=[vn()],ue(")"),re=$t(ge,y)),m.markEnd(m.createProperty("set",P,re),Ne)):(ue(":"),re=Br(),m.markEnd(m.createProperty("init",$,re),Ne));if(y.type===r.EOF||y.type===r.Punctuator)de(y);else return P=Vt(),ue(":"),re=Br(),m.markEnd(m.createProperty("init",P,re),Ne)}function Gt(){var y=[],P,$,re,ge,Ne={},vt=String,At;for(At=D,ue("{");!ce("}");)P=er(),P.key.type===a.Identifier?$=P.key.name:$=vt(P.key.value),ge=P.kind==="init"?o.Data:P.kind==="get"?o.Get:o.Set,re="$"+$,Object.prototype.hasOwnProperty.call(Ne,re)?(Ne[re]===o.Data?f&&ge===o.Data?ie({},s.StrictDuplicateProperty):ge!==o.Data&&ie({},s.AccessorDataProperty):ge===o.Data?ie({},s.AccessorDataProperty):Ne[re]&ge&&ie({},s.AccessorGetSet),Ne[re]|=ge):Ne[re]=ge,y.push(P),ce("}")||ue(",");return ue("}"),m.markEnd(m.createObjectExpression(y),At)}function wr(){var y;return ue("("),y=tr(),ue(")"),y}function Kt(){var y,P,$,re;if(ce("("))return wr();if(ce("["))return Ie();if(ce("{"))return Gt();if(y=D.type,re=D,y===r.Identifier)$=m.createIdentifier(Ze().value);else if(y===r.StringLiteral||y===r.NumericLiteral)f&&D.octal&&ie(D,s.StrictOctalLiteral),$=m.createLiteral(Ze());else if(y===r.Keyword){if(he("function"))return ji();he("this")?(Ze(),$=m.createThisExpression()):de(Ze())}else y===r.BooleanLiteral?(P=Ze(),P.value=P.value==="true",$=m.createLiteral(P)):y===r.NullLiteral?(P=Ze(),P.value=null,$=m.createLiteral(P)):ce("/")||ce("/=")?(typeof w.tokens<"u"?$=m.createLiteral(lt()):$=m.createLiteral(ht()),Xt()):de(Ze());return m.markEnd($,re)}function Er(){var y=[];if(ue("("),!ce(")"))for(;d<v&&(y.push(Br()),!ce(")"));)ue(",");return ue(")"),y}function dr(){var y,P;return P=D,y=Ze(),Pt(y)||de(y),m.markEnd(m.createIdentifier(y.value),P)}function pr(){return ue("."),dr()}function gn(){var y;return ue("["),y=tr(),ue("]"),y}function vr(){var y,P,$;return $=D,me("new"),y=Qn(),P=ce("(")?Er():[],m.markEnd(m.createNewExpression(y,P),$)}function Bn(){var y,P,$,re,ge=B.allowIn;for(re=D,B.allowIn=!0,y=he("new")?vr():Kt();;){if(ce("."))$=pr(),y=m.createMemberExpression(".",y,$);else if(ce("("))P=Er(),y=m.createCallExpression(y,P);else if(ce("["))$=gn(),y=m.createMemberExpression("[",y,$);else break;m.markEnd(y,re)}return B.allowIn=ge,y}function Qn(){var y,P,$;for(C(B.allowIn,"callee of new expression always allow in keyword."),$=D,y=he("new")?vr():Kt();ce(".")||ce("[");)ce("[")?(P=gn(),y=m.createMemberExpression("[",y,P)):(P=pr(),y=m.createMemberExpression(".",y,P)),m.markEnd(y,$);return y}function Un(){var y,P,$=D;return y=Bn(),D.type===r.Punctuator&&(ce("++")||ce("--"))&&!G()&&(f&&y.type===a.Identifier&&V(y.name)&&ie({},s.StrictLHSPostfix),ct(y)||ie({},s.InvalidLHSInAssignment),P=Ze(),y=m.markEnd(m.createPostfixExpression(P.value,y),$)),y}function Vn(){var y,P,$;return D.type!==r.Punctuator&&D.type!==r.Keyword?P=Un():ce("++")||ce("--")?($=D,y=Ze(),P=Vn(),f&&P.type===a.Identifier&&V(P.name)&&ie({},s.StrictLHSPrefix),ct(P)||ie({},s.InvalidLHSInAssignment),P=m.createUnaryExpression(y.value,P),P=m.markEnd(P,$)):ce("+")||ce("-")||ce("~")||ce("!")?($=D,y=Ze(),P=Vn(),P=m.createUnaryExpression(y.value,P),P=m.markEnd(P,$)):he("delete")||he("void")||he("typeof")?($=D,y=Ze(),P=Vn(),P=m.createUnaryExpression(y.value,P),P=m.markEnd(P,$),f&&P.operator==="delete"&&P.argument.type===a.Identifier&&ie({},s.StrictDelete)):P=Un(),P}function ea(y,P){var $=0;if(y.type!==r.Punctuator&&y.type!==r.Keyword)return 0;switch(y.value){case"||":$=1;break;case"&&":$=2;break;case"|":$=3;break;case"^":$=4;break;case"&":$=5;break;case"==":case"!=":case"===":case"!==":$=6;break;case"<":case">":case"<=":case">=":case"instanceof":$=7;break;case"in":$=P?7:0;break;case"<<":case">>":case">>>":$=8;break;case"+":case"-":$=9;break;case"*":case"/":case"%":$=11;break}return $}function Ri(){var y,P,$,re,ge,Ne,vt,At,Wt,or;if(y=D,Wt=Vn(),re=D,ge=ea(re,B.allowIn),ge===0)return Wt;for(re.prec=ge,Ze(),P=[y,D],vt=Vn(),Ne=[Wt,re,vt];(ge=ea(D,B.allowIn))>0;){for(;Ne.length>2&&ge<=Ne[Ne.length-2].prec;)vt=Ne.pop(),At=Ne.pop().value,Wt=Ne.pop(),$=m.createBinaryExpression(At,Wt,vt),P.pop(),y=P[P.length-1],m.markEnd($,y),Ne.push($);re=Ze(),re.prec=ge,Ne.push(re),P.push(D),$=Vn(),Ne.push($)}for(or=Ne.length-1,$=Ne[or],P.pop();or>1;)$=m.createBinaryExpression(Ne[or-1].value,Ne[or-2],$),or-=2,y=P.pop(),m.markEnd($,y);return $}function Ia(){var y,P,$,re,ge;return ge=D,y=Ri(),ce("?")&&(Ze(),P=B.allowIn,B.allowIn=!0,$=Br(),B.allowIn=P,ue(":"),re=Br(),y=m.createConditionalExpression(y,$,re),m.markEnd(y,ge)),y}function Br(){var y,P,$,re,ge;return y=D,ge=D,re=P=Ia(),ke()&&(ct(P)||ie({},s.InvalidLHSInAssignment),f&&P.type===a.Identifier&&V(P.name)&&ie(y,s.StrictLHSAssignment),y=Ze(),$=Br(),re=m.markEnd(m.createAssignmentExpression(y.value,P,$),ge)),re}function tr(){var y,P=D;if(y=Br(),ce(",")){for(y=m.createSequenceExpression([y]);d<v&&ce(",");)Ze(),y.expressions.push(Br());m.markEnd(y,P)}return y}function xa(){for(var y=[],P;d<v&&!(ce("}")||(P=On(),typeof P>"u"));)y.push(P);return y}function pi(){var y,P;return P=D,ue("{"),y=xa(),ue("}"),m.markEnd(m.createBlockStatement(y),P)}function vn(){var y,P;return P=D,y=Ze(),y.type!==r.Identifier&&de(y),m.markEnd(m.createIdentifier(y.value),P)}function Xn(y){var P=null,$,re;return re=D,$=vn(),f&&V($.name)&&ie({},s.StrictVarName),y==="const"?(ue("="),P=Br()):ce("=")&&(Ze(),P=Br()),m.markEnd(m.createVariableDeclarator($,P),re)}function Ui(y){var P=[];do{if(P.push(Xn(y)),!ce(","))break;Ze()}while(d<v);return P}function Na(){var y;return me("var"),y=Ui(),He(),m.createVariableDeclaration(y,"var")}function La(y){var P,$;return $=D,me(y),P=Ui(y),He(),m.markEnd(m.createVariableDeclaration(P,y),$)}function ta(){return ue(";"),m.createEmptyStatement()}function Ra(){var y=tr();return He(),m.createExpressionStatement(y)}function Ua(){var y,P,$;return me("if"),ue("("),y=tr(),ue(")"),P=Hr(),he("else")?(Ze(),$=Hr()):$=null,m.createIfStatement(y,P,$)}function Va(){var y,P,$;return me("do"),$=B.inIteration,B.inIteration=!0,y=Hr(),B.inIteration=$,me("while"),ue("("),P=tr(),ue(")"),ce(";")&&Ze(),m.createDoWhileStatement(y,P)}function ja(){var y,P,$;return me("while"),ue("("),y=tr(),ue(")"),$=B.inIteration,B.inIteration=!0,P=Hr(),B.inIteration=$,m.createWhileStatement(y,P)}function za(){var y,P,$;return $=D,y=Ze(),P=Ui(),m.markEnd(m.createVariableDeclaration(P,y.value),$)}function qa(){var y,P,$,re,ge,Ne,vt,At=B.allowIn;return y=P=$=null,me("for"),ue("("),ce(";")?Ze():(he("var")||he("let")?(B.allowIn=!1,y=za(),B.allowIn=At,y.declarations.length===1&&he("in")&&(Ze(),re=y,ge=tr(),y=null)):(B.allowIn=!1,y=tr(),B.allowIn=At,he("in")&&(ct(y)||ie({},s.InvalidLHSInForIn),Ze(),re=y,ge=tr(),y=null)),typeof re>"u"&&ue(";")),typeof re>"u"&&(ce(";")||(P=tr()),ue(";"),ce(")")||($=tr())),ue(")"),vt=B.inIteration,B.inIteration=!0,Ne=Hr(),B.inIteration=vt,typeof re>"u"?m.createForStatement(y,P,$,Ne):m.createForInStatement(re,ge,Ne)}function gi(){var y=null,P;return me("continue"),c.charCodeAt(d)===59?(Ze(),B.inIteration||Z({},s.IllegalContinue),m.createContinueStatement(null)):G()?(B.inIteration||Z({},s.IllegalContinue),m.createContinueStatement(null)):(D.type===r.Identifier&&(y=vn(),P="$"+y.name,Object.prototype.hasOwnProperty.call(B.labelSet,P)||Z({},s.UnknownLabel,y.name)),He(),y===null&&!B.inIteration&&Z({},s.IllegalContinue),m.createContinueStatement(y))}function Wa(){var y=null,P;return me("break"),c.charCodeAt(d)===59?(Ze(),B.inIteration||B.inSwitch||Z({},s.IllegalBreak),m.createBreakStatement(null)):G()?(B.inIteration||B.inSwitch||Z({},s.IllegalBreak),m.createBreakStatement(null)):(D.type===r.Identifier&&(y=vn(),P="$"+y.name,Object.prototype.hasOwnProperty.call(B.labelSet,P)||Z({},s.UnknownLabel,y.name)),He(),y===null&&!(B.inIteration||B.inSwitch)&&Z({},s.IllegalBreak),m.createBreakStatement(y))}function vi(){var y=null;return me("return"),B.inFunctionBody||ie({},s.IllegalReturn),c.charCodeAt(d)===32&&U(c.charCodeAt(d+1))?(y=tr(),He(),m.createReturnStatement(y)):G()?m.createReturnStatement(null):(ce(";")||!ce("}")&&D.type!==r.EOF&&(y=tr()),He(),m.createReturnStatement(y))}function Ha(){var y,P;return f&&(te(),ie({},s.StrictModeWith)),me("with"),ue("("),y=tr(),ue(")"),P=Hr(),m.createWithStatement(y,P)}function $a(){var y,P=[],$,re;for(re=D,he("default")?(Ze(),y=null):(me("case"),y=tr()),ue(":");d<v&&!(ce("}")||he("default")||he("case"));)$=Hr(),P.push($);return m.markEnd(m.createSwitchCase(y,P),re)}function Ga(){var y,P,$,re,ge;if(me("switch"),ue("("),y=tr(),ue(")"),ue("{"),P=[],ce("}"))return Ze(),m.createSwitchStatement(y,P);for(re=B.inSwitch,B.inSwitch=!0,ge=!1;d<v&&!ce("}");)$=$a(),$.test===null&&(ge&&Z({},s.MultipleDefaultsInSwitch),ge=!0),P.push($);return B.inSwitch=re,ue("}"),m.createSwitchStatement(y,P)}function ra(){var y;return me("throw"),G()&&Z({},s.NewlineAfterThrow),y=tr(),He(),m.createThrowStatement(y)}function jn(){var y,P,$;return $=D,me("catch"),ue("("),ce(")")&&de(D),y=vn(),f&&V(y.name)&&ie({},s.StrictCatchVariable),ue(")"),P=pi(),m.markEnd(m.createCatchClause(y,P),$)}function Ar(){var y,P=[],$=null;return me("try"),y=pi(),he("catch")&&P.push(jn()),he("finally")&&(Ze(),$=pi()),P.length===0&&!$&&Z({},s.NoCatchOrFinally),m.createTryStatement(y,[],P,$)}function sr(){return me("debugger"),He(),m.createDebuggerStatement()}function Hr(){var y=D.type,P,$,re,ge;if(y===r.EOF&&de(D),y===r.Punctuator&&D.value==="{")return pi();if(ge=D,y===r.Punctuator)switch(D.value){case";":return m.markEnd(ta(),ge);case"(":return m.markEnd(Ra(),ge)}if(y===r.Keyword)switch(D.value){case"break":return m.markEnd(Wa(),ge);case"continue":return m.markEnd(gi(),ge);case"debugger":return m.markEnd(sr(),ge);case"do":return m.markEnd(Va(),ge);case"for":return m.markEnd(qa(),ge);case"function":return m.markEnd(zn(),ge);case"if":return m.markEnd(Ua(),ge);case"return":return m.markEnd(vi(),ge);case"switch":return m.markEnd(Ga(),ge);case"throw":return m.markEnd(ra(),ge);case"try":return m.markEnd(Ar(),ge);case"var":return m.markEnd(Na(),ge);case"while":return m.markEnd(ja(),ge);case"with":return m.markEnd(Ha(),ge)}return P=tr(),P.type===a.Identifier&&ce(":")?(Ze(),re="$"+P.name,Object.prototype.hasOwnProperty.call(B.labelSet,re)&&Z({},s.Redeclaration,"Label",P.name),B.labelSet[re]=!0,$=Hr(),delete B.labelSet[re],m.markEnd(m.createLabeledStatement(P,$),ge)):(He(),m.markEnd(m.createExpressionStatement(P),ge))}function Vi(){var y,P=[],$,re,ge,Ne,vt,At,Wt,or;for(or=D,ue("{");d<v&&!(D.type!==r.StringLiteral||($=D,y=On(),P.push(y),y.expression.type!==a.Literal));)re=c.slice($.start+1,$.end-1),re==="use strict"?(f=!0,ge&&ie(ge,s.StrictOctalLiteral)):!ge&&$.octal&&(ge=$);for(Ne=B.labelSet,vt=B.inIteration,At=B.inSwitch,Wt=B.inFunctionBody,B.labelSet={},B.inIteration=!1,B.inSwitch=!1,B.inFunctionBody=!0;d<v&&!(ce("}")||(y=On(),typeof y>"u"));)P.push(y);return ue("}"),B.labelSet=Ne,B.inIteration=vt,B.inSwitch=At,B.inFunctionBody=Wt,m.markEnd(m.createBlockStatement(P),or)}function ei(y){var P,$=[],re,ge,Ne,vt,At;if(ue("("),!ce(")"))for(Ne={};d<v&&(re=D,P=vn(),vt="$"+re.value,f?(V(re.value)&&(ge=re,At=s.StrictParamName),Object.prototype.hasOwnProperty.call(Ne,vt)&&(ge=re,At=s.StrictParamDupe)):y||(V(re.value)?(y=re,At=s.StrictParamName):j(re.value)?(y=re,At=s.StrictReservedWord):Object.prototype.hasOwnProperty.call(Ne,vt)&&(y=re,At=s.StrictParamDupe)),$.push(P),Ne[vt]=!0,!ce(")"));)ue(",");return ue(")"),{params:$,stricted:ge,firstRestricted:y,message:At}}function zn(){var y,P=[],$,re,ge,Ne,vt,At,Wt,or;return or=D,me("function"),re=D,y=vn(),f?V(re.value)&&ie(re,s.StrictFunctionName):V(re.value)?(vt=re,At=s.StrictFunctionName):j(re.value)&&(vt=re,At=s.StrictReservedWord),Ne=ei(vt),P=Ne.params,ge=Ne.stricted,vt=Ne.firstRestricted,Ne.message&&(At=Ne.message),Wt=f,$=Vi(),f&&vt&&Z(vt,At),f&&ge&&ie(ge,At),f=Wt,m.markEnd(m.createFunctionDeclaration(y,P,[],$),or)}function ji(){var y,P=null,$,re,ge,Ne,vt=[],At,Wt,or;return or=D,me("function"),ce("(")||(y=D,P=vn(),f?V(y.value)&&ie(y,s.StrictFunctionName):V(y.value)?(re=y,ge=s.StrictFunctionName):j(y.value)&&(re=y,ge=s.StrictReservedWord)),Ne=ei(re),vt=Ne.params,$=Ne.stricted,re=Ne.firstRestricted,Ne.message&&(ge=Ne.message),Wt=f,At=Vi(),f&&re&&Z(re,ge),f&&$&&ie($,ge),f=Wt,m.markEnd(m.createFunctionExpression(P,vt,[],At),or)}function On(){if(D.type===r.Keyword)switch(D.value){case"const":case"let":return La(D.value);case"function":return zn();default:return Hr()}if(D.type!==r.EOF)return Hr()}function mn(){for(var y,P=[],$,re,ge;d<v&&($=D,!($.type!==r.StringLiteral||(y=On(),P.push(y),y.expression.type!==a.Literal)));)re=c.slice($.start+1,$.end-1),re==="use strict"?(f=!0,ge&&ie(ge,s.StrictOctalLiteral)):!ge&&$.octal&&(ge=$);for(;d<v&&(y=On(),!(typeof y>"u"));)P.push(y);return P}function Fo(){var y,P;return te(),Xt(),P=D,f=!1,y=mn(),m.markEnd(m.createProgram(y),P)}function Ka(){var y,P,$,re=[];for(y=0;y<w.tokens.length;++y)P=w.tokens[y],$={type:P.type,value:P.value},w.range&&($.range=P.range),w.loc&&($.loc=P.loc),re.push($);w.tokens=re}function na(y,P){var $,re,ge;$=String,typeof y!="string"&&!(y instanceof String)&&(y=$(y)),m=p,c=y,d=0,g=c.length>0?1:0,b=0,v=c.length,D=null,B={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},w={},P=P||{},P.tokens=!0,w.tokens=[],w.tokenize=!0,w.openParenToken=-1,w.openCurlyToken=-1,w.range=typeof P.range=="boolean"&&P.range,w.loc=typeof P.loc=="boolean"&&P.loc,typeof P.comment=="boolean"&&P.comment&&(w.comments=[]),typeof P.tolerant=="boolean"&&P.tolerant&&(w.errors=[]);try{if(Xt(),D.type===r.EOF)return w.tokens;for(re=Ze();D.type!==r.EOF;)try{re=Ze()}catch(Ne){if(re=D,w.errors){w.errors.push(Ne);break}else throw Ne}Ka(),ge=w.tokens,typeof w.comments<"u"&&(ge.comments=w.comments),typeof w.errors<"u"&&(ge.errors=w.errors)}catch(Ne){throw Ne}finally{w={}}return ge}function Ou(y,P){var $,re;re=String,typeof y!="string"&&!(y instanceof String)&&(y=re(y)),m=p,c=y,d=0,g=c.length>0?1:0,b=0,v=c.length,D=null,B={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},w={},typeof P<"u"&&(w.range=typeof P.range=="boolean"&&P.range,w.loc=typeof P.loc=="boolean"&&P.loc,w.attachComment=typeof P.attachComment=="boolean"&&P.attachComment,w.loc&&P.source!==null&&P.source!==void 0&&(w.source=re(P.source)),typeof P.tokens=="boolean"&&P.tokens&&(w.tokens=[]),typeof P.comment=="boolean"&&P.comment&&(w.comments=[]),typeof P.tolerant=="boolean"&&P.tolerant&&(w.errors=[]),w.attachComment&&(w.range=!0,w.comments=[],w.bottomRightStack=[],w.trailingComments=[],w.leadingComments=[]));try{$=Fo(),typeof w.comments<"u"&&($.comments=w.comments),typeof w.tokens<"u"&&(Ka(),$.tokens=w.tokens),typeof w.errors<"u"&&($.errors=w.errors)}catch(ge){throw ge}finally{w={}}return $}e.version="1.2.5",e.tokenize=na,e.parse=Ou,e.Syntax=function(){var y,P={};typeof Object.create=="function"&&(P=Object.create(null));for(y in a)a.hasOwnProperty(y)&&(P[y]=a[y]);return typeof Object.freeze=="function"&&Object.freeze(P),P}()})})(U1);var SC=U1,_d=N1,BC=0;function OC(t,e,r){this.name=t,this.lvalue=e,this.rvalue=r,this.count=0}function MC(t,e,r,n){this.body=t,this.args=e,this.thisVars=r,this.localVars=n}function PC(t){if(t==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?t in window:typeof gr<"u"?t in gr:typeof self<"u"?t in self:!1}function kC(t){for(var e=t.body[0].expression.callee.params,r=new Array(e.length),n=0;n<e.length;++n)r[n]=e[n].name;return r}function TC(t){for(var e=["(",t,")()"].join(""),r=SC.parse(e,{range:!0}),n="_inline_"+BC+++"_",i=kC(r),a=new Array(i.length),o=0;o<i.length;++o)a[o]=new OC([n,"arg",o,"_"].join(""),!1,!1);for(var s=new Array(e.length),o=0,l=e.length;o<l;++o)s[o]=e.charAt(o);var p=[],c=[];function f(C){var F=n+C.replace(/\_/g,"__");return p.push(F),F}function d(C){var F="this_"+C.replace(/\_/g,"__");return c.push(F),F}function g(C,F){for(var k=C.range[0],O=C.range[1],A=k+1;A<O;++A)s[A]="";s[k]=F}function b(C){return"'"+C.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function v(C){return s.slice(C.range[0],C.range[1]).join("")}var m=1,D=2;function B(C){return C.parent.type==="AssignmentExpression"&&C.parent.left===C?C.parent.operator==="="?m:m|D:C.parent.type==="UpdateExpression"?m|D:D}(function C(F,k){if(F.parent=k,F.type==="MemberExpression")F.computed?(C(F.object,F),C(F.property,F)):F.object.type==="ThisExpression"?g(F,d(F.property.name)):C(F.object,F);else{if(F.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(F.type==="Identifier"){var O=F.name,A=i.indexOf(O);if(A>=0){var x=a[A],U=B(F);U&m&&(x.lvalue=!0),U&D&&(x.rvalue=!0),++x.count,g(F,x.name)}else PC(O)||g(F,f(O))}else if(F.type==="Literal")typeof F.value=="string"&&g(F,b(F.value));else{if(F.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var K=Object.keys(F),J=0,j=K.length;J<j;++J)if(K[J]!=="parent"){var V=F[K[J]];if(V)if(V instanceof Array)for(var H=0;H<V.length;++H)V[H]&&typeof V[H].type=="string"&&C(V[H],F);else typeof V.type=="string"&&C(V,F)}}}})(r.body[0].expression.callee.body,void 0),_d(p),_d(c);var w=new MC(v(r.body[0].expression.callee.body),a,c,p);return w}var IC=TC,ql=IC,xC=Xc,ws=["args","body"],NC=["pre","post","printCode","funcName","blockSize"];function LC(t){for(var e in t)ws.indexOf(e)<0&&NC.indexOf(e)<0&&console.warn("cwise: Unknown argument '"+e+"' passed to expression compiler");for(var r=0;r<ws.length;++r)if(!t[ws[r]])throw new Error("cwise: Missing argument: "+ws[r]);return xC({args:t.args,pre:ql(t.pre||function(){}),body:ql(t.body),post:ql(t.post||function(){}),debug:!!t.printCode,funcName:t.funcName||t.body.name||"cwise",blockSize:t.blockSize||64})}var Do=LC,RC=FC,UC=Do,VC=UC({args:["array","scalar","index"],body:function(e,r,n){var i=r,a;for(a=0;a<n.length-1;++a)i=i[n[a]];i[n[n.length-1]]=e}}),jC=function(e){var r=RC(e.shape);return VC(e,r),r},Ys={},zC={get exports(){return Ys},set exports(t){Ys=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(o,s){for(var l=new Float64Array(o*s),p=0;p<l.length;p++)l[p]=a()*1e-4;return(0,n.default)(l,[o,s])};var r=Ta,n=i(r);function i(o){return o&&o.__esModule?o:{default:o}}function a(){var o=2*Math.random()-1,s=2*Math.random()-1,l=o*o+s*s;return l==0||l>1?a():o*Math.sqrt(-2*Math.log(l)/l)}t.exports=e.default})(zC,Ys);var bu={},qC={get exports(){return bu},set exports(t){bu=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(f,d){var g=f.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]);switch(d){case"euclidean":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=s(f.pick(v,null),f.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break;case"manhattan":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=l(f.pick(v,null),f.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break;case"jaccard":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=p(f.pick(v,null),f.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break;case"dice":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=c(f.pick(v,null),f.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break}return b};var r=Ta,n=o(r),i=Do,a=o(i);function o(f){return f&&f.__esModule?f:{default:f}}var s=(0,a.default)({args:["array","array"],pre:function(d,g){this.sum=0},body:function(d,g){var b=d-g;this.sum+=b*b},post:function(d,g){return Math.sqrt(this.sum)}}),l=(0,a.default)({args:["array","array"],pre:function(d,g){this.sum=0},body:function(d,g){this.sum+=Math.abs(d-g)},post:function(d,g){return this.sum}}),p=(0,a.default)({args:["array","array"],pre:function(d,g){this.tf=0,this.tt=0},body:function(d,g){var b=Math.round(d),v=Math.round(g);this.tf+=+(b!=v),this.tt+=+(b==1&&v==1)},post:function(d,g){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),c=(0,a.default)({args:["array","array"],pre:function(d,g){this.tf=0,this.tt=0},body:function(d,g){var b=Math.round(d),v=Math.round(g);this.tf+=+(b!=v),this.tt+=+(b==1&&v==1)},post:function(d,g){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});t.exports=e.default})(qC,bu);var Zs={},WC={get exports(){return Zs},set exports(t){Zs=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(c,f){for(var d=100,g=c.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]),v=(0,n.default)(new Float64Array(g*g),[g,g]),m=void 0,D=void 0,B=1/0,w=Math.log(f),C=void 0,F=void 0,k=void 0,O=void 0,A=0;A<g;A++){m=1,D=-1/0,B=1/0;for(var x=0;x<d;x++){for(var U=0;U<g;U++)b.set(A,U,Math.exp(-c.get(A,U)*m));b.set(A,A,0),k=0;for(var U=0;U<g;U++)k+=b.get(A,U);k==0&&(k=s),O=0;for(var U=0;U<g;U++)b.set(A,U,b.get(A,U)/k),O+=c.get(A,U)*b.get(A,U);if(F=Math.log(k)+m*O,C=F-w,Math.abs(C)<=p)break;C>0?(D=m,B==1/0?m=m*2:m=(m+B)/2):(B=m,D==-1/0?m=m/2:m=(m+D)/2)}}a.default.add(v,b,b.transpose(1,0));var K=Math.max(a.default.sum(v),l);return a.default.divseq(v,K),a.default.maxseq(v,l),v};var r=Ta,n=o(r),i=bo,a=o(i);function o(c){return c&&c.__esModule?c:{default:c}}var s=1e-7,l=Number.EPSILON||2220446049250313e-31,p=1e-5;t.exports=e.default})(WC,Zs);var Js={},HC={get exports(){return Js},set exports(t){Js=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(g,b,v){var m=g.shape[0],D=g.shape[1],B=(0,n.default)(new Float64Array(m*m),[m,m]),w=(0,p.default)(g,"euclidean");d(w);var C=(v+1)/-2;a.default.powseq(a.default.divseq(a.default.addseq(w,1),v),C);for(var F=0;F<m;F++)w.set(F,F,0);var k=Math.max(a.default.sum(w),f);a.default.divs(B,w,k),a.default.maxseq(B,f);var O=(0,n.default)(new Float64Array(m*m),[m,m]),A=(0,n.default)(new Float64Array(m*m),[m,m]);a.default.div(O,b,B),a.default.logeq(O),a.default.assign(A,b);var x=a.default.sum(a.default.muleq(O,A)),U=(0,n.default)(new Float64Array(g.size),g.shape),K=(0,n.default)(new Float64Array(m*m),[m,m]);a.default.sub(K,b,B),a.default.muleq(K,w);for(var F=0;F<m;F++)for(var J=0;J<D;J++){var j=(0,n.default)(new Float64Array(g.shape[0]),[g.shape[0]]);a.default.assign(j,g.pick(null,J)),a.default.addseq(a.default.negeq(j),g.get(F,J)),a.default.muleq(j,K.pick(F,null)),U.set(F,J,a.default.sum(j))}var V=2*(v+1)/v;return a.default.mulseq(U,V),[x,U]};var r=Ta,n=c(r),i=bo,a=c(i),o=Do,s=c(o),l=bu,p=c(l);function c(g){return g&&g.__esModule?g:{default:g}}var f=Number.EPSILON||2220446049250313e-31,d=(0,s.default)({args:["array"],body:function(b){}});t.exports=e.default})(HC,Js);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function j(V,H){var z=[],Q=!0,X=!1,te=void 0;try{for(var le=V[Symbol.iterator](),be;!(Q=(be=le.next()).done)&&(z.push(be.value),!(H&&z.length===H));Q=!0);}catch(we){X=!0,te=we}finally{try{!Q&&le.return&&le.return()}finally{if(X)throw te}}return z}return function(V,H){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return j(V,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function j(V,H){for(var z=0;z<H.length;z++){var Q=H[z];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(V,Q.key,Q)}}return function(V,H,z){return H&&j(V.prototype,H),z&&j(V,z),V}}(),i=Gs,a=Ta,o=O(a),s=bo,l=O(s),p=EC,c=O(p),f=jC,d=O(f),g=Do,b=O(g),v=Ys,m=O(v),D=bu,B=O(D),w=Zs,C=O(w),F=Js,k=O(F);function O(j){return j&&j.__esModule?j:{default:j}}function A(j){if(Array.isArray(j)){for(var V=0,H=Array(j.length);V<j.length;V++)H[V]=j[V];return H}else return Array.from(j)}function x(j,V){if(!(j instanceof V))throw new TypeError("Cannot call a class as a function")}function U(j,V){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:j}function K(j,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);j.prototype=Object.create(V&&V.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(j,V):j.__proto__=V)}var J=function(j){K(V,j);function V(H){x(this,V);var z=U(this,Object.getPrototypeOf(V).call(this));return H=H||{},z.dim=H.dim||2,z.perplexity=H.perplexity||30,z.earlyExaggeration=H.earlyExaggeration||4,z.learningRate=H.learningRate||1e3,z.nIter=H.nIter||1e3,z.metric=H.metric||"euclidean",z.barneshut=H.barneshut||!1,z.inputData=null,z.outputEmbedding=null,z}return n(V,[{key:"init",value:function(z){z=z||{};var Q=z.data||[],X=z.type||"dense";if(X==="dense")this.inputData=(0,c.default)(Q);else if(X==="sparse"){for(var te=[],le=1,be=function(Dt){var Et=Math.max.apply(null,Q.map(function(ht){return ht[Dt]}))+1;te.push(Et),le*=Et},we=0;we<Q[0].length;we++)be(we);this.inputData=(0,o.default)(new Float64Array(le),te);var Oe=!0,Pe=!1,Te=void 0;try{for(var Re=Q[Symbol.iterator](),Ue;!(Oe=(Ue=Re.next()).done);Oe=!0){var We,Ye=Ue.value;(We=this.inputData).set.apply(We,A(Ye).concat([1]))}}catch(xe){Pe=!0,Te=xe}finally{try{!Oe&&Re.return&&Re.return()}finally{if(Pe)throw Te}}}else throw new Error("input data type must be dense or sparse");this.outputEmbedding=(0,m.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,B.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,C.default)(this.distances,this.perplexity);var z=Number.MAX_VALUE,Q=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),l.default.mulseq(this.P,this.earlyExaggeration);var X=this._gradDesc(Q,50,.5,0,0),te=r(X,2);z=te[0],Q=te[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var le=this._gradDesc(Q+1,100,.8,0,0),be=r(le,2);z=be[0],Q=be[1],this.emit("progressStatus","Final optimization with momentum 0.8"),l.default.divseq(this.P,this.earlyExaggeration);var we=this._gradDesc(Q+1,this.nIter,.8,1e-6,1e-6),Oe=r(we,2);return z=Oe[0],Q=Oe[1],this.emit("progressStatus","Optimization end"),[z,Q]}},{key:"rerun",value:function(){this.outputEmbedding=(0,m.default)(this.inputData.shape[0],this.dim);var z=this.run(),Q=r(z,2),X=Q[0],te=Q[1];return[X,te]}},{key:"getOutput",value:function(){return(0,d.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var z=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),Q=(0,o.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),X=0;X<this.outputEmbedding.shape[1];X++){var te=l.default.sup(l.default.abs(Q,this.outputEmbedding.pick(null,X)));l.default.divs(z.pick(null,X),this.outputEmbedding.pick(null,X),te)}return(0,d.default)(z)}},{key:"_gradDesc",value:function(z,Q,X){for(var te=arguments.length<=3||arguments[3]===void 0?1e-6:arguments[3],le=arguments.length<=4||arguments[4]===void 0?1e-6:arguments[4],be=30,we=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),Oe=new Float64Array(this.outputEmbedding.size),Pe=0;Pe<Oe.length;Pe++)Oe[Pe]=1;var Te=(0,o.default)(Oe,this.outputEmbedding.shape),Re=Number.MAX_VALUE,Ue=Number.MAX_VALUE,We=0,Ye=(0,b.default)({args:["array"],pre:function(Xt){this.sum=0},body:function(Xt){this.sum+=Xt*Xt},post:function(Xt){return Math.sqrt(this.sum)}}),xe=(0,b.default)({args:["array","array","array"],body:function(Xt,Nt,Zr){}}),Dt=void 0;for(Dt=z;Dt<Q;Dt++){var Et=(0,k.default)(this.outputEmbedding,this.P,this.alpha),ht=r(Et,2),lt=ht[0],Pt=ht[1],yr=Math.abs(lt-Re);Re=lt;var It=Ye(Pt);if(this.emit("progressIter",[Dt,Re,It]),Re<Ue)Ue=Re,We=Dt;else if(Dt-We>be)break;if(te>=It||le>=yr)break;xe(Te,we,Pt),l.default.muleq(Pt,Te);var hr=(0,o.default)(new Float64Array(Pt.size),Pt.shape);l.default.muls(hr,Pt,this.learningRate),l.default.mulseq(we,X),l.default.subeq(we,hr),l.default.addeq(this.outputEmbedding,we),this.emit("progressData",this.getOutputScaled())}return[Re,Dt]}}]),V}(i.EventEmitter);e.default=J,t.exports=e.default})(V6,$s);const $C=Hc($s);var Tc={},GC={get exports(){return Tc},set exports(t){Tc=t}};(function(t){var e=parseInt(Number.MAX_SAFE_INTEGER/2)||4503599627370496,r=0;function n(){this.C=null,this.row_covered=[],this.col_covered=[],this.n=0,this.Z0_r=0,this.Z0_c=0,this.marked=null,this.path=null}n.prototype.pad_matrix=function(s,l){l=l||r;var p=0,c=s.length,f;for(f=0;f<c;++f)s[f].length>p&&(p=s[f].length);c=p>c?p:c;var d=[];for(f=0;f<c;++f){for(var g=s[f]||[],b=g.slice();c>b.length;)b.push(l);d.push(b)}return d},n.prototype.compute=function(s,l){l=l||{},l.padValue=l.padValue||r,this.C=this.pad_matrix(s,l.padValue),this.n=this.C.length,this.original_length=s.length,this.original_width=s[0].length;for(var p=[];p.length<this.n;)p.push(!1);this.row_covered=p.slice(),this.col_covered=p.slice(),this.Z0_r=0,this.Z0_c=0,this.path=this.__make_matrix(this.n*2,0),this.marked=this.__make_matrix(this.n,0);for(var c=1,f={1:this.__step1,2:this.__step2,3:this.__step3,4:this.__step4,5:this.__step5,6:this.__step6};;){var d=f[c];if(!d)break;c=d.apply(this)}for(var g=[],b=0;b<this.original_length;++b)for(var v=0;v<this.original_width;++v)this.marked[b][v]==1&&g.push([b,v]);return g},n.prototype.__make_matrix=function(s,l){for(var p=[],c=0;c<s;++c){p[c]=[];for(var f=0;f<s;++f)p[c][f]=l}return p},n.prototype.__step1=function(){for(var s=0;s<this.n;++s)for(var l=Math.min.apply(Math,this.C[s]),p=0;p<this.n;++p)this.C[s][p]-=l;return 2},n.prototype.__step2=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)if(this.C[s][l]===0&&!this.col_covered[l]&&!this.row_covered[s]){this.marked[s][l]=1,this.col_covered[l]=!0,this.row_covered[s]=!0;break}return this.__clear_covers(),3},n.prototype.__step3=function(){for(var s=0,l=0;l<this.n;++l)for(var p=0;p<this.n;++p)this.marked[l][p]==1&&this.col_covered[p]==!1&&(this.col_covered[p]=!0,++s);return s>=this.n?7:4},n.prototype.__step4=function(){for(var s=!1,l=-1,p=-1,c=-1;!s;){var f=this.__find_a_zero();if(l=f[0],p=f[1],l<0)return 6;if(this.marked[l][p]=2,c=this.__find_star_in_row(l),c>=0)p=c,this.row_covered[l]=!0,this.col_covered[p]=!1;else return this.Z0_r=l,this.Z0_c=p,5}},n.prototype.__step5=function(){var s=0;this.path[s][0]=this.Z0_r,this.path[s][1]=this.Z0_c;for(var l=!1;!l;){var p=this.__find_star_in_col(this.path[s][1]);if(p>=0?(s++,this.path[s][0]=p,this.path[s][1]=this.path[s-1][1]):l=!0,!l){var c=this.__find_prime_in_row(this.path[s][0]);s++,this.path[s][0]=this.path[s-1][0],this.path[s][1]=c}}return this.__convert_path(this.path,s),this.__clear_covers(),this.__erase_primes(),3},n.prototype.__step6=function(){for(var s=this.__find_smallest(),l=0;l<this.n;++l)for(var p=0;p<this.n;++p)this.row_covered[l]&&(this.C[l][p]+=s),this.col_covered[p]||(this.C[l][p]-=s);return 4},n.prototype.__find_smallest=function(){for(var s=e,l=0;l<this.n;++l)for(var p=0;p<this.n;++p)!this.row_covered[l]&&!this.col_covered[p]&&s>this.C[l][p]&&(s=this.C[l][p]);return s},n.prototype.__find_a_zero=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)if(this.C[s][l]===0&&!this.row_covered[s]&&!this.col_covered[l])return[s,l];return[-1,-1]},n.prototype.__find_star_in_row=function(s){for(var l=0;l<this.n;++l)if(this.marked[s][l]==1)return l;return-1},n.prototype.__find_star_in_col=function(s){for(var l=0;l<this.n;++l)if(this.marked[l][s]==1)return l;return-1},n.prototype.__find_prime_in_row=function(s){for(var l=0;l<this.n;++l)if(this.marked[s][l]==2)return l;return-1},n.prototype.__convert_path=function(s,l){for(var p=0;p<=l;++p)this.marked[s[p][0]][s[p][1]]=this.marked[s[p][0]][s[p][1]]==1?0:1},n.prototype.__clear_covers=function(){for(var s=0;s<this.n;++s)this.row_covered[s]=!1,this.col_covered[s]=!1},n.prototype.__erase_primes=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)this.marked[s][l]==2&&(this.marked[s][l]=0)};function i(s,l){var p,c;if(!l){var f=-1/0;for(p=0;p<s.length;++p)for(c=0;c<s[p].length;++c)s[p][c]>f&&(f=s[p][c]);l=function(b){return f-b}}var d=[];for(p=0;p<s.length;++p){var g=s[p];for(d[p]=[],c=0;c<g.length;++c)d[p][c]=l(s[p][c])}return d}function a(s){var l=[],p,c;for(p=0;p<s.length;++p)for(c=0;c<s[p].length;++c){var f=String(s[p][c]).length;(!l[c]||f>=l[c])&&(l[c]=f)}var d="";for(p=0;p<s.length;++p){for(c=0;c<s[p].length;++c){for(var g=String(s[p][c]);g.length<l[c];)g=" "+g;d+=g,c!=s[p].length-1&&(d+=" ")}p!=s[p].length-1&&(d+=`
`)}return d}function o(s,l){var p=new n;return p.compute(s,l)}o.version="1.2.2",o.format_matrix=a,o.make_cost_matrix=i,o.Munkres=n,t.exports&&(t.exports=o)})(GC);const KC=Tc;function V1(t){return t<2?0:t<4?2:t<6?4:t<8?6:8}function Oi(t,e){return new kc.KMEANS().run(t,e)}function YC(t,e){return t.map(r=>e.map(n=>Oa(r,n)))}function j1(t){switch(t){case 2:return[zr(xr([0,0],[0,1]),.5),zr(xr([1,0],[1,1]),.5)];case 4:return[[0,0],[0,1],[1,1],[1,0]];case 6:return[zr(xr([0,0],[0,1]),.5),zr(xr([1,0],[1,1]),.5),[0,0],[0,1],[1,1],[1,0]];case 8:return[zr(xr([0,0],[0,1]),.5),zr(xr([1,0],[1,1]),.5),[0,0],[0,1],[1,1],[1,0],zr(xr([0,0],[1,0]),.5),zr(xr([0,1],[1,1]),.5)];default:return[]}}function z1(t,e){if(t.length!==e.length)throw new Error("Both sets should have the same number of points");const r=YC(t,e),n=KC(r);return n?n.map(([i,a])=>({ids:[i,a],points:[t[i],e[a]]})):null}function ef(t){let e=new $C({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:5e3,metric:"euclidean"});const r=Object.keys(t),n=Object.values(t);e.init({data:n,type:"dense"}),e.run();let a=e.getOutputScaled().map(([s,l])=>[(s+1)/2,(l+1)/2]);return r.reduce((s,l,p)=>(s[l]=a[p],s),{})}function ZC(t){let e,r,n,i,a,o,s;r=new A1({props:{center:t[6],dimensions:t[2],onMarkerMove:t[7],dataPoints:t[4]}}),a=new C1({props:{useExponentialScaling:t[3].embedExponentialScaling,toggleExponentialScaling:t[9],exponentialScaling:t[3].embedWeightScaling,setExponentialScaling:t[10],connectionLimit:t[3].embedPromptLimit||t[5],setConnectionLimit:t[8],maxConnectionLimit:t[5],clusterCount:t[3].embedClusters||0,setClusterCount:t[11],maxClusterCount:t[5],onShuffle:t[12]}});const l=t[18].default,p=Du(l,t,t[17],null);return{c(){e=q("div"),Ve(r.$$.fragment),i=Ee(),Ve(a.$$.fragment),o=Ee(),p&&p.c(),this.h()},l(c){e=W(c,"DIV",{class:!0});var f=R(e);je(r.$$.fragment,f),f.forEach(M),i=Ae(c),je(a.$$.fragment,c),o=Ae(c),p&&p.l(c),this.h()},h(){S(e,"class","w-full h-full"),xi(()=>t[19].call(e))},m(c,f){se(c,e,f),ze(r,e,null),n=Ma(e,t[19].bind(e)),se(c,i,f),ze(a,c,f),se(c,o,f),p&&p.m(c,f),s=!0},p(c,[f]){const d={};f&64&&(d.center=c[6]),f&4&&(d.dimensions=c[2]),f&16&&(d.dataPoints=c[4]),r.$set(d);const g={};f&8&&(g.useExponentialScaling=c[3].embedExponentialScaling),f&8&&(g.exponentialScaling=c[3].embedWeightScaling),f&40&&(g.connectionLimit=c[3].embedPromptLimit||c[5]),f&32&&(g.maxConnectionLimit=c[5]),f&8&&(g.clusterCount=c[3].embedClusters||0),f&32&&(g.maxClusterCount=c[5]),a.$set(g),p&&p.p&&(!s||f&131072)&&yu(p,l,c,c[17],s?Eu(l,c[17],f,null):wu(c[17]),null)},i(c){s||(fe(r.$$.fragment,c),fe(a.$$.fragment,c),fe(p,c),s=!0)},o(c){ve(r.$$.fragment,c),ve(a.$$.fragment,c),ve(p,c),s=!1},d(c){c&&M(e),qe(r),n(),c&&M(i),qe(a,c),c&&M(o),p&&p.d(c)}}}function JC(t,e,r){let n,i,a,o,s,l,p,c,f;Ge(t,Pc,j=>r(16,c=j)),Ge(t,ot,j=>r(3,f=j));let{$$slots:d={},$$scope:g}=e,b=0,v=0,m={};function D(j){c&&f.scaledEmbedMappings&&(F(),C(o,l,p,j))}function B(j,V){j&&V&&(F(),C(o,l,p,s))}function w(j,V){C(o,j,V,s)}function C(j,V,H,z){if(!m)return;let Q={...f.weightedPrompts},X=0;Object.values(m).forEach(we=>{Object.values(m).forEach(Oe=>{const Pe=Oa(we.xy,Oe.xy);Pe>X&&(X=Pe)})});const te=Object.entries(m).reduce((we,[Oe,Pe])=>{const Te=Oa(j,Pe.xy);return we[parseInt(Oe)]=Te,we},{}),le=(we,Oe)=>{const Pe=we?Math.round(Math.pow(1-Oe/X,H)*100)/100:0;return Pe<0?0:Pe},be=(we,Oe)=>{const Pe=we?Math.round((1-Oe/X)*100)/100:0;return Pe<0?0:Pe};Object.entries(te).sort((we,Oe)=>we[1]-Oe[1]).forEach(([we,Oe],Pe)=>{if(!Q[parseInt(we)])return;const Te=Pe<z,Re=V?le(Te,Oe):be(Te,Oe);Q[parseInt(we)]={...Q[parseInt(we)],embedWeight:Re},r(4,m[parseInt(we)].opacity=nn(Re),m),r(4,m[parseInt(we)].connected=Te,m)}),ot.update({...f,embedMarker:o,weightedPrompts:Q})}function F(){if(!c||!f.scaledEmbedMappings)return;const j=Object.keys(f.scaledEmbedMappings),V=z=>{if(!z.length)return i;const Q=z.map(X=>H[X].xy);return Rs(Q)},H=j.reduce((z,Q,X)=>(z[Q]={xy:f.scaledEmbedMappings[X],text:f.weightedPrompts[X].text,connected:!0,opacity:1},z),{});if(f.embedClusters&&f.embedClusterSets){const z=f.embedClusters,Q=f.embedClusterSets[z];let X=Q.map(be=>V(be));const te=j1(z),le=z1(X,te);le&&le.forEach(be=>{const we=be.ids[0],Oe=be.points[1];Q[we].forEach(Pe=>{H[Pe].xy=Rs([H[Pe].xy,Oe])})})}r(4,m=H)}function k(j){o=j,C(o,l,p,s)}function O(j){j>0&&j<=a&&ot.update({...f,embedPromptLimit:j})}function A(){ot.update({...f,embedExponentialScaling:!f.embedExponentialScaling})}function x(j){ot.update({...f,embedWeightScaling:j})}function U(j){[0,2,4,6,8].indexOf(j)!==-1&&ot.update({...f,embedClusters:j})}async function K(){ot.update({...f,scaledEmbedMappings:ef(c)})}function J(){b=this.clientWidth,v=this.clientHeight,r(0,b),r(1,v)}return t.$$set=j=>{"$$scope"in j&&r(17,g=j.$$scope)},t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[b||250,v||250]),t.$$.dirty&4&&r(6,i=ka(n)),t.$$.dirty&8&&r(5,a=Object.keys(f.weightedPrompts||{}).length),t.$$.dirty&8&&(o=f.embedMarker||[.5,.5]),t.$$.dirty&8&&r(13,s=f.embedPromptLimit||Object.keys(f.weightedPrompts).length),t.$$.dirty&8&&r(15,l=f.embedExponentialScaling),t.$$.dirty&8&&r(14,p=f.embedWeightScaling),t.$$.dirty&65544&&c&&Object.keys(c).length<f.embedClusters&&U(V1(Object.keys(c).length)),t.$$.dirty&49152&&w(l,p),t.$$.dirty&65544&&B(c,f.scaledEmbedMappings),t.$$.dirty&8192&&D(s)},[b,v,n,f,m,a,i,k,O,A,x,U,K,s,p,l,c,g,d,J]}class QC extends Xe{constructor(e){super(),et(this,e,JC,ZC,tt,{})}}const Wl="oKey";function XC(){const t=ur(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Wl]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[Wl]=a,r(a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[Wl],r(""))}}}const hi=XC(),bd="concept";function eF(){const t=ur({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith(bd+"_")){const s=o.split(/_(.*)/s)[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{if(!a||!i)return;const s=Ot(t);s[a]=o,localStorage[`concept_${a}`]=JSON.stringify(o),r(s)},get:()=>Ot(t),remove:a=>{if(!a||!i)return;const o=Ot(t);delete o[a],delete localStorage[`concept_${a}`],r(o)},delete:()=>{i&&(delete localStorage[bd],r({}))}}}const Rr=eF(),tF=Cu(Rr,t=>Object.entries(t).reduce((e,[r,n])=>(n&&(e[r]=n),e),{}));function rF(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!0,pending:uF,then:aF,catch:iF,value:7,error:8,blocks:[,,,]};return Os(r=t[2],i),{c(){e=Ft(),i.block.c()},l(a){e=Ft(),i.block.l(a)},m(a,o){se(a,e,o),i.block.m(a,i.anchor=o),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(a,o){t=a,i.ctx=t,o&4&&r!==(r=t[2])&&Os(r,i)||Np(i,t,o)},i(a){n||(fe(i.block),n=!0)},o(a){for(let o=0;o<3;o+=1){const s=i.blocks[o];ve(s)}n=!1},d(a){a&&M(e),i.block.d(a),i.token=null,i=null}}}function nF(t){let e,r,n,i,a;return{c(){e=q("div"),r=q("div"),n=q("div"),i=q("p"),a=Se("Set OpenAI key in settings to use embedding map."),this.h()},l(o){e=W(o,"DIV",{class:!0});var s=R(e);r=W(s,"DIV",{class:!0});var l=R(r);n=W(l,"DIV",{class:!0});var p=R(n);i=W(p,"P",{class:!0});var c=R(i);a=Be(c,"Set OpenAI key in settings to use embedding map."),c.forEach(M),p.forEach(M),l.forEach(M),s.forEach(M),this.h()},h(){S(i,"class","text-center text-lg"),S(n,"class","h-20 w-52"),S(r,"class","flex flex-col justify-center"),S(e,"class","w-full h-full flex justify-center")},m(o,s){se(o,e,s),T(e,r),T(r,n),T(n,i),T(i,a)},p:Me,i:Me,o:Me,d(o){o&&M(e)}}}function iF(t){let e,r=t[8].message+"",n;return{c(){e=q("p"),n=Se(r),this.h()},l(i){e=W(i,"P",{style:!0});var a=R(e);n=Be(a,r),a.forEach(M),this.h()},h(){Bt(e,"color","red")},m(i,a){se(i,e,a),T(e,n)},p(i,a){a&4&&r!==(r=i[8].message+"")&&fr(n,r)},i:Me,o:Me,d(i){i&&M(e)}}}function aF(t){let e,r;return e=new QC({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p:Me,i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function uF(t){let e,r,n,i,a,o;return{c(){e=q("div"),r=q("div"),n=q("div"),i=q("progress"),this.h()},l(s){e=W(s,"DIV",{class:!0});var l=R(e);r=W(l,"DIV",{class:!0});var p=R(r);n=W(p,"DIV",{class:!0});var c=R(n);i=W(c,"PROGRESS",{class:!0,max:!0}),R(i).forEach(M),c.forEach(M),p.forEach(M),l.forEach(M),this.h()},h(){S(i,"class","progress progress-primary w-56"),i.value=a=Object.keys(t[3]).length,S(i,"max",o=Object.keys(t[0].weightedPrompts).length),S(n,"class","h-20 w-52"),S(r,"class","flex flex-col justify-center"),S(e,"class","w-full h-full flex justify-center")},m(s,l){se(s,e,l),T(e,r),T(r,n),T(n,i)},p(s,l){l&8&&a!==(a=Object.keys(s[3]).length)&&(i.value=a),l&1&&o!==(o=Object.keys(s[0].weightedPrompts).length)&&S(i,"max",o)},i:Me,o:Me,d(s){s&&M(e)}}}function sF(t){let e,r,n,i,a;const o=[nF,rF],s=[];function l(p,c){return p[1]?1:0}return e=l(t),r=s[e]=o[e](t),i=new Su({}),{c(){r.c(),n=Ee(),Ve(i.$$.fragment)},l(p){r.l(p),n=Ae(p),je(i.$$.fragment,p)},m(p,c){s[e].m(p,c),se(p,n,c),ze(i,p,c),a=!0},p(p,[c]){let f=e;e=l(p),e===f?s[e].p(p,c):(ir(),ve(s[f],1,1,()=>{s[f]=null}),ar(),r=s[e],r?r.p(p,c):(r=s[e]=o[e](p),r.c()),fe(r,1),r.m(n.parentNode,n))},i(p){a||(fe(r),fe(i.$$.fragment,p),a=!0)},o(p){ve(r),ve(i.$$.fragment,p),a=!1},d(p){s[e].d(p),p&&M(n),qe(i,p)}}}function oF(t,e){return e?t.embedClusterSets?Object.entries(e).length!==Object.entries(t.weightedPrompts).length?(console.log("embeddings length mismatch",Object.entries(e).length,Object.entries(t.weightedPrompts).length),!0):(t.lastPromptChange||0)>(t.lastEmbeddingChange||0)?(console.log("prompt change after embedding change"),!0):!1:(console.log("no active cluster sets"),!0):(console.log("no active embeddings"),!0)}function lF(t,e,r){let n,i,a;Ge(t,ot,c=>r(0,n=c)),Ge(t,hi,c=>r(1,i=c)),Ge(t,Pc,c=>r(4,a=c));let o=null,s={};async function l(c){return console.log("waiting for embedding for",c),new Promise((f,d)=>{const g=()=>{const b=Rr.get()[c];console.log("embeddingFromConcept",b),b?f(b):b===null?setTimeout(g,500):b===void 0?(console.log("setting embedding to null for",c),Rr.update(c,null),setTimeout(g,5e3)):(console.log("not found embedding for",c,b),d(b))};g()})}async function p(){if(console.log("fetching embeddings"),!i||!n.weightedPrompts)return;const c=Object.entries(n.weightedPrompts).map(([D,B])=>[D,B.text]);r(3,s={});for(let D of c){console.log("fetching embedding for",D[1]);const B=await l(D[1]);r(3,s[D[0]]=B,s)}let f=Object.entries(s).sort((D,B)=>D[0]-B[0]);const d=D=>new Array(D).fill(null).map(()=>[]);console.log("clustering embeddings");const g=f.length>=2?Oi(f.map(D=>D[1]),2):[f.map(D=>D[0])];console.log("set of 2 complete");const b=f.length>=4?Oi(f.map(D=>D[1]),4):g;console.log("set of 4 complete");const v=f.length>=6?Oi(f.map(D=>D[1]),6):b;console.log("set of 6 complete");const m=f.length>=8?Oi(f.map(D=>D[1]),8):v;console.log("set of 8 complete"),ot.update({...n,embedClusterSets:{2:[...g,...d(2-g.length)],4:[...b,...d(4-b.length)],6:[...v,...d(6-v.length)],8:[...m,...d(8-m.length)]},lastEmbeddingChange:Date.now(),scaledEmbedMappings:ef(s)}),Pc.set(s),console.log("embeddings complete")}return t.$$.update=()=>{t.$$.dirty&19&&i&&oF(n,a)&&(console.log("Embeddings require update"),r(2,o=p()))},[n,i,o,s,a]}class cF extends Xe{constructor(e){super(),et(this,e,lF,sF,tt,{})}}function fF(t){let e,r,n,i;return{c(){e=ut("g"),r=ut("circle"),this.h()},l(a){e=st(a,"g",{});var o=R(e);r=st(o,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),R(r).forEach(M),o.forEach(M),this.h()},h(){S(r,"cx",n=t[0][0]),S(r,"cy",i=t[0][1]),S(r,"r",t[1]),S(r,"stroke",t[3]),S(r,"stroke-width",t[2]),Bt(r,"fill","rgba(0,0,0,0)")},m(a,o){se(a,e,o),T(e,r)},p(a,[o]){o&1&&n!==(n=a[0][0])&&S(r,"cx",n),o&1&&i!==(i=a[0][1])&&S(r,"cy",i),o&2&&S(r,"r",a[1]),o&8&&S(r,"stroke",a[3]),o&4&&S(r,"stroke-width",a[2])},i:Me,o:Me,d(a){a&&M(e)}}}function hF(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=20}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class dF extends Xe{constructor(e){super(),et(this,e,hF,fF,tt,{xy:0,radius:1,stroke:2,color:3})}}function pF(t){let e,r,n,i,a;return{c(){e=ut("polygon"),this.h()},l(o){e=st(o,"polygon",{points:!0,"stroke-width":!0,fill:!0,transform:!0}),R(e).forEach(M),this.h()},h(){S(e,"points",r=`${t[7][0]},${t[7][1]} ${t[9][0]},${t[9][1]} ${t[8][0]},${t[8][1]} ${t[6][0]},${t[6][1]} ${t[4][0]},${t[4][1]} ${t[5][0]},${t[5][1]}`),S(e,"stroke-width",4),S(e,"fill",t[3]),S(e,"transform",n=`rotate(${t[1].toFixed(2)} ${t[0][0]} ${t[0][1]}) rotate(${t[2]?"180":"0"} ${(t[7][0]+t[6][0])/2} ${(t[7][1]+t[6][1])/2})`)},m(o,s){se(o,e,s),i||(a=[_e(e,"mouseover",t[10]),_e(e,"mouseout",t[11]),_e(e,"mousedown",t[12]),_e(e,"touchstart",t[12])],i=!0)},p(o,[s]){s&1008&&r!==(r=`${o[7][0]},${o[7][1]} ${o[9][0]},${o[9][1]} ${o[8][0]},${o[8][1]} ${o[6][0]},${o[6][1]} ${o[4][0]},${o[4][1]} ${o[5][0]},${o[5][1]}`)&&S(e,"points",r),s&8&&S(e,"fill",o[3]),s&199&&n!==(n=`rotate(${o[1].toFixed(2)} ${o[0][0]} ${o[0][1]}) rotate(${o[2]?"180":"0"} ${(o[7][0]+o[6][0])/2} ${(o[7][1]+o[6][1])/2})`)&&S(e,"transform",n)},i:Me,o:Me,d(o){o&&M(e),i=!1,zt(a)}}}function gF(t,e,r){let n,i,a,o,s,l,{xy:p=[500,500]}=e,{radius:c=400}=e,{stroke:f=20}=e,{color:d="rgba(46,67,101, 0.4)"}=e,{hoverColor:g="white"}=e,{angle:b=0}=e,{handleMouseDown:v=F=>{}}=e,{reverse:m=!1}=e,D=d;function B(){r(3,D=g)}function w(){r(3,D=d)}function C(F){v(F)}return t.$$set=F=>{"xy"in F&&r(0,p=F.xy),"radius"in F&&r(13,c=F.radius),"stroke"in F&&r(14,f=F.stroke),"color"in F&&r(15,d=F.color),"hoverColor"in F&&r(16,g=F.hoverColor),"angle"in F&&r(1,b=F.angle),"handleMouseDown"in F&&r(17,v=F.handleMouseDown),"reverse"in F&&r(2,m=F.reverse)},t.$$.update=()=>{t.$$.dirty&24577&&r(9,n=Nr(p,[-4,1],c-f/2)),t.$$.dirty&24577&&r(8,i=Nr(p,[1,1],c-f/2)),t.$$.dirty&8193&&r(7,a=Nr(p,[0,1],c)),t.$$.dirty&8193&&r(6,o=Nr(p,[4,1],c)),t.$$.dirty&24577&&r(5,s=Nr(p,[-3,1],c+f/2)),t.$$.dirty&24577&&r(4,l=Nr(p,[1,1],c+f/2))},[p,b,m,D,l,s,o,a,i,n,B,w,C,c,f,d,g,v]}class vF extends Xe{constructor(e){super(),et(this,e,gF,pF,tt,{xy:0,radius:13,stroke:14,color:15,hoverColor:16,angle:1,handleMouseDown:17,reverse:2})}}function Dd(t,e,r){const n=t.slice();return n[21]=e[r][0],n[22]=e[r][1],n}function yd(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,a;e=new Gc({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),s=[];for(let c=0;c<o.length;c+=1)s[c]=wd(Dd(t,o,c));const l=c=>ve(s[c],1,1,()=>{s[c]=null});let p=n&&Ed(t);return{c(){Ve(e.$$.fragment);for(let c=0;c<s.length;c+=1)s[c].c();r=Ft(),p&&p.c(),i=Ft()},l(c){je(e.$$.fragment,c);for(let f=0;f<s.length;f+=1)s[f].l(c);r=Ft(),p&&p.l(c),i=Ft()},m(c,f){ze(e,c,f);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(c,f);se(c,r,f),p&&p.m(c,f),se(c,i,f),a=!0},p(c,f){const d={};if(f&1&&(d.xy=c[0]),f&2&&(d.radius=c[1]),e.$set(d),f&1660){o=Object.entries(c[5].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=Dd(c,o,g);s[g]?(s[g].p(b,f),fe(s[g],1)):(s[g]=wd(b),s[g].c(),fe(s[g],1),s[g].m(r.parentNode,r))}for(ir(),g=o.length;g<s.length;g+=1)l(g);ar()}f&32&&(n=Object.entries(c[5].weightedPrompts).length>0),n?p?(p.p(c,f),f&32&&fe(p,1)):(p=Ed(c),p.c(),fe(p,1),p.m(i.parentNode,i)):p&&(ir(),ve(p,1,1,()=>{p=null}),ar())},i(c){if(!a){fe(e.$$.fragment,c);for(let f=0;f<o.length;f+=1)fe(s[f]);fe(p),a=!0}},o(c){ve(e.$$.fragment,c),s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)ve(s[f]);ve(p),a=!1},d(c){qe(e,c),Au(s,c),c&&M(r),p&&p.d(c),c&&M(i)}}}function wd(t){let e,r,n;e=new go({props:{xy:t[10](t[6][t[21]].xy,qr(t[3],t[22].text.length,t[4])),color:`rgba(255,255,255,${nn(t[6][t[21]].unitWeight)}`,wh:qr(t[3],t[22].text.length,t[4]),fontSize:t[4],text:t[22].text}});function i(){return t[15](t[21])}return r=new Pa({props:{xy:t[6][t[21]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:i}}),{c(){Ve(e.$$.fragment),Ve(r.$$.fragment)},l(a){je(e.$$.fragment,a),je(r.$$.fragment,a)},m(a,o){ze(e,a,o),ze(r,a,o),n=!0},p(a,o){t=a;const s={};o&120&&(s.xy=t[10](t[6][t[21]].xy,qr(t[3],t[22].text.length,t[4]))),o&96&&(s.color=`rgba(255,255,255,${nn(t[6][t[21]].unitWeight)}`),o&56&&(s.wh=qr(t[3],t[22].text.length,t[4])),o&16&&(s.fontSize=t[4]),o&32&&(s.text=t[22].text),e.$set(s);const l={};o&96&&(l.xy=t[6][t[21]].xy),o&4&&(l.radius=t[2]),o&32&&(l.handleMouseDown=i),r.$set(l)},i(a){n||(fe(e.$$.fragment,a),fe(r.$$.fragment,a),n=!0)},o(a){ve(e.$$.fragment,a),ve(r.$$.fragment,a),n=!1},d(a){qe(e,a),qe(r,a)}}}function Ed(t){let e,r,n;return e=new dF({props:{xy:t[0],radius:t[7],stroke:30}}),r=new vF({props:{reverse:t[5].ringReverse,xy:t[0],radius:t[7],stroke:30,angle:t[5].ringStartAngle,color:"rgba(136,157,191, 1)",handleMouseDown:t[16]}}),{c(){Ve(e.$$.fragment),Ve(r.$$.fragment)},l(i){je(e.$$.fragment,i),je(r.$$.fragment,i)},m(i,a){ze(e,i,a),ze(r,i,a),n=!0},p(i,a){const o={};a&1&&(o.xy=i[0]),a&128&&(o.radius=i[7]),e.$set(o);const s={};a&32&&(s.reverse=i[5].ringReverse),a&1&&(s.xy=i[0]),a&128&&(s.radius=i[7]),a&32&&(s.angle=i[5].ringStartAngle),r.$set(s)},i(i){n||(fe(e.$$.fragment,i),fe(r.$$.fragment,i),n=!0)},o(i){ve(e.$$.fragment,i),ve(r.$$.fragment,i),n=!1},d(i){qe(e,i),qe(r,i)}}}function mF(t){let e,r,n,i,a,o=t[6]&&t[5].weightedPrompts&&yd(t);const s=t[14].default,l=Du(s,t,t[13],null);return{c(){e=ut("svg"),o&&o.c(),r=Ee(),l&&l.c(),this.h()},l(p){e=st(p,"svg",{id:!0,class:!0});var c=R(e);o&&o.l(c),c.forEach(M),r=Ae(p),l&&l.l(p),this.h()},h(){S(e,"id","svg"),S(e,"class","w-full h-full")},m(p,c){se(p,e,c),o&&o.m(e,null),se(p,r,c),l&&l.m(p,c),n=!0,i||(a=[_e(e,"mousemove",t[11]),_e(e,"touchmove",t[11]),_e(e,"mouseup",t[8]),_e(e,"touchend",t[8]),_e(e,"dblclick",t[12])],i=!0)},p(p,[c]){p[6]&&p[5].weightedPrompts?o?(o.p(p,c),c&96&&fe(o,1)):(o=yd(p),o.c(),fe(o,1),o.m(e,null)):o&&(ir(),ve(o,1,1,()=>{o=null}),ar()),l&&l.p&&(!n||c&8192)&&yu(l,s,p,p[13],n?Eu(s,p[13],c,null):wu(p[13]),null)},i(p){n||(fe(o),fe(l,p),n=!0)},o(p){ve(o),ve(l,p),n=!1},d(p){p&&M(e),o&&o.d(),p&&M(r),l&&l.d(p),i=!1,zt(a)}}}function Ad(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const o=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function _F(t,e,r){let n,i,a;Ge(t,ot,A=>r(5,a=A));let{$$slots:o={},$$scope:s}=e,{center:l=[450,450]}=e,{radius:p=250}=e,{pointRadius:c=10}=e,{textWidth:f=150}=e,{fontSize:d=13}=e,g=[0,0],b=null;function v(A){b=null}function m(A){b=A}function D(A,x){let U=Nn(A,l,p)[0]-180;U<0&&(U+=360);const K=Kc(ka(x),U);return xr(A,K)}function B(A){console.log(p,n);const x=jr(Nn(vu(A,l,n),l,n)[0]);r(6,i=F(a.weightedPrompts,l,p,a.ringWeightScaling,a.ringExponentialScaling,x,a.ringAngles))}function w(A){if(g=Mi(A),b==="main")B(g);else if(b){const x={...a.weightedPrompts[b]},U=vu(g,l,p),K=Nn(U,l,p)[0],J={...a.ringAngles};J[x.id]=K;const j={...a.weightedPrompts};j[b]=x,r(6,i=F(j,l,p,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,J))}}function C(A){g=Mi(A),B(g)}function F(A,x,U,K,J,j,V){if(!A||!x||!U||!K)return null;let H=Object.entries(A).reduce((Q,[X,te])=>{const be=a.ringReverse?j-V[X]:V[X]-j,we=jr(be),Oe=Math.pow(1-we/360,J?K:1);return Q[X]={angleDifference:we,xy:Nr(x,[V[X],1],U),unitWeight:Oe},Q},{});const z={...A};return Object.entries(H).forEach(([Q,X])=>{z[Q].ringWeight=X.unitWeight}),ot.update({...a,ringStartAngle:j,weightedPrompts:z,ringAngles:V}),H}const k=A=>m(A),O=()=>m("main");return t.$$set=A=>{"center"in A&&r(0,l=A.center),"radius"in A&&r(1,p=A.radius),"pointRadius"in A&&r(2,c=A.pointRadius),"textWidth"in A&&r(3,f=A.textWidth),"fontSize"in A&&r(4,d=A.fontSize),"$$scope"in A&&r(13,s=A.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&r(7,n=p-30),t.$$.dirty&32&&Object.keys(a.ringAngles).length!==Object.keys(a.weightedPrompts).length&&ot.update({...a,ringAngles:Ad(a.weightedPrompts,{})}),t.$$.dirty&35&&r(6,i=F(a.weightedPrompts,l,p,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,a.ringAngles||Ad(a.weightedPrompts,{})))},[l,p,c,f,d,a,i,n,v,m,D,w,C,s,o,k,O]}class bF extends Xe{constructor(e){super(),et(this,e,_F,mF,tt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function Cd(t){let e,r,n,i,a,o,s,l;return{c(){e=q("div"),r=q("label"),n=q("span"),i=Se("Scaling Power"),a=Ee(),o=q("input"),this.h()},l(p){e=W(p,"DIV",{class:!0});var c=R(e);r=W(c,"LABEL",{class:!0});var f=R(r);n=W(f,"SPAN",{class:!0});var d=R(n);i=Be(d,"Scaling Power"),d.forEach(M),f.forEach(M),a=Ae(c),o=W(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(M),this.h()},h(){S(n,"class","label-text"),S(r,"class","label"),S(o,"type","range"),S(o,"min","0.5"),S(o,"max","5"),S(o,"step","0.1"),S(o,"class","range range-xs"),S(e,"class","w-full px-2")},m(p,c){se(p,e,c),T(e,r),T(r,n),T(n,i),T(e,a),T(e,o),rn(o,t[0]),s||(l=[_e(o,"change",t[7]),_e(o,"input",t[7])],s=!0)},p(p,c){c&1&&rn(o,p[0])},d(p){p&&M(e),s=!1,zt(l)}}}function DF(t){let e,r,n,i,a,o,s,l,p,c,f,d,g,b,v,m,D,B,w,C,F;r=new bF({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let k=t[1]&&Cd(t);return B=new Su({}),{c(){e=q("div"),Ve(r.$$.fragment),i=Ee(),a=q("div"),o=q("div"),s=q("label"),l=q("span"),p=Se("Exponential Scaling"),c=Ee(),f=q("input"),d=Ee(),k&&k.c(),g=Ee(),b=q("div"),v=q("button"),m=Se("Reverse"),D=Ee(),Ve(B.$$.fragment),this.h()},l(O){e=W(O,"DIV",{class:!0});var A=R(e);je(r.$$.fragment,A),A.forEach(M),i=Ae(O),a=W(O,"DIV",{class:!0});var x=R(a);o=W(x,"DIV",{class:!0});var U=R(o);s=W(U,"LABEL",{class:!0});var K=R(s);l=W(K,"SPAN",{class:!0});var J=R(l);p=Be(J,"Exponential Scaling"),J.forEach(M),K.forEach(M),c=Ae(U),f=W(U,"INPUT",{type:!0,class:!0}),U.forEach(M),d=Ae(x),k&&k.l(x),g=Ae(x),b=W(x,"DIV",{class:!0});var j=R(b);v=W(j,"BUTTON",{class:!0});var V=R(v);m=Be(V,"Reverse"),V.forEach(M),j.forEach(M),x.forEach(M),D=Ae(O),je(B.$$.fragment,O),this.h()},h(){S(e,"class","w-full h-full"),xi(()=>t[5].call(e)),S(l,"class","label-text"),S(s,"class","label"),S(f,"type","checkbox"),S(f,"class","toggle toggle-xs"),S(o,"class","w-52 px-2"),S(v,"class","btn btn-xs btn-primary"),S(b,"class","w-32 px-2 pb-1 flex flex-col justify-end"),S(a,"class","px-2 py-4 pb-0 flex")},m(O,A){se(O,e,A),ze(r,e,null),n=Ma(e,t[5].bind(e)),se(O,i,A),se(O,a,A),T(a,o),T(o,s),T(s,l),T(l,p),T(o,c),T(o,f),f.checked=t[1],T(a,d),k&&k.m(a,null),T(a,g),T(a,b),T(b,v),T(v,m),se(O,D,A),ze(B,O,A),w=!0,C||(F=[_e(f,"change",t[6]),_e(v,"click",t[4])],C=!0)},p(O,[A]){const x={};A&12&&(x.center=[Math.round(O[2]/2),Math.round(O[3]/2)]),A&12&&(x.radius=Math.round(Math.min(O[2],O[3])/2)-150),r.$set(x),A&2&&(f.checked=O[1]),O[1]?k?k.p(O,A):(k=Cd(O),k.c(),k.m(a,g)):k&&(k.d(1),k=null)},i(O){w||(fe(r.$$.fragment,O),fe(B.$$.fragment,O),w=!0)},o(O){ve(r.$$.fragment,O),ve(B.$$.fragment,O),w=!1},d(O){O&&M(e),qe(r),n(),O&&M(i),O&&M(a),k&&k.d(),O&&M(D),qe(B,O),C=!1,zt(F)}}}function yF(t,e,r){let n;Ge(t,ot,d=>r(8,n=d));let i,a,o=n.ringWeightScaling||2,s=zc(n.ringExponentialScaling)?!0:n.ringExponentialScaling;function l(){ot.update({...ot.get(),ringReverse:!n.ringReverse})}function p(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function c(){s=this.checked,r(1,s)}function f(){o=xp(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&ot.update({...ot.get(),ringExponentialScaling:s,ringWeightScaling:o})},[o,s,i,a,l,p,c,f]}class wF extends Xe{constructor(e){super(),et(this,e,yF,DF,tt,{})}}function Fd(t,e,r){const n=t.slice();return n[21]=e[r][0],n[22]=e[r][1],n}function Sd(t){let e,r,n=t[0][t[21]][2].text+"",i,a,o=Kn(t[1],t[21])+"",s,l,p;return{c(){e=q("div"),r=q("p"),i=Se(n),a=Se(":"),s=Se(o),p=Ee(),this.h()},l(c){e=W(c,"DIV",{class:!0});var f=R(e);r=W(f,"P",{style:!0});var d=R(r);i=Be(d,n),a=Be(d,":"),s=Be(d,o),d.forEach(M),p=Ae(f),f.forEach(M),this.h()},h(){S(r,"style",l=`color: rgba(255,255,255, ${nn(t[22])});`),S(e,"class","hover:bg-slate-800 rounded-md p-2 text-xs")},m(c,f){se(c,e,f),T(e,r),T(r,i),T(r,a),T(r,s),T(e,p)},p(c,f){f&5&&n!==(n=c[0][c[21]][2].text+"")&&fr(i,n),f&6&&o!==(o=Kn(c[1],c[21])+"")&&fr(s,o),f&4&&l!==(l=`color: rgba(255,255,255, ${nn(c[22])});`)&&S(r,"style",l)},d(c){c&&M(e)}}}function EF(t){let e,r,n,i,a,o,s,l,p,c,f,d,g,b,v,m,D,B,w,C=t[2],F=[];for(let A=0;A<C.length;A+=1)F[A]=Sd(Fd(t,C,A));const k=t[18].default,O=Du(k,t,t[17],null);return{c(){e=q("div"),r=q("div");for(let A=0;A<F.length;A+=1)F[A].c();n=Ee(),i=q("div"),a=q("div"),o=q("label"),s=q("span"),l=Se("# Prompts"),p=Ee(),c=q("input"),d=Ee(),g=q("div"),b=q("button"),v=Se("Shuffle"),m=Ee(),O&&O.c(),this.h()},l(A){e=W(A,"DIV",{class:!0});var x=R(e);r=W(x,"DIV",{class:!0});var U=R(r);for(let Q=0;Q<F.length;Q+=1)F[Q].l(U);U.forEach(M),n=Ae(x),i=W(x,"DIV",{class:!0});var K=R(i);a=W(K,"DIV",{class:!0});var J=R(a);o=W(J,"LABEL",{class:!0});var j=R(o);s=W(j,"SPAN",{class:!0});var V=R(s);l=Be(V,"# Prompts"),V.forEach(M),j.forEach(M),p=Ae(J),c=W(J,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),J.forEach(M),d=Ae(K),g=W(K,"DIV",{class:!0});var H=R(g);b=W(H,"BUTTON",{class:!0});var z=R(b);v=Be(z,"Shuffle"),z.forEach(M),H.forEach(M),K.forEach(M),m=Ae(x),O&&O.l(x),x.forEach(M),this.h()},h(){S(r,"class","p-4 w-full h-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-y-auto"),S(s,"class","label-text"),S(o,"class","label"),c.value=f=t[1].randomPromptLimit||t[3](),S(c,"type","range"),S(c,"min","1"),S(c,"max",t[3]()),S(c,"step","1"),S(c,"class","range range-sm"),S(a,"class","w-full px-2"),S(b,"class","btn btn-xs btn-primary"),S(g,"class","w-32 px-2 pb-1 flex flex-col justify-end"),S(i,"class","px-2 py-4 pb-0 flex"),S(e,"class","w-full h-full flex flex-col")},m(A,x){se(A,e,x),T(e,r);for(let U=0;U<F.length;U+=1)F[U]&&F[U].m(r,null);T(e,n),T(e,i),T(i,a),T(a,o),T(o,s),T(s,l),T(a,p),T(a,c),T(i,d),T(i,g),T(g,b),T(b,v),T(e,m),O&&O.m(e,null),D=!0,B||(w=[_e(c,"change",t[19]),_e(b,"click",t[5])],B=!0)},p(A,[x]){if(x&7){C=A[2];let U;for(U=0;U<C.length;U+=1){const K=Fd(A,C,U);F[U]?F[U].p(K,x):(F[U]=Sd(K),F[U].c(),F[U].m(r,null))}for(;U<F.length;U+=1)F[U].d(1);F.length=C.length}(!D||x&2&&f!==(f=A[1].randomPromptLimit||A[3]()))&&(c.value=f),O&&O.p&&(!D||x&131072)&&yu(O,k,A,A[17],D?Eu(k,A[17],x,null):wu(A[17]),null)},i(A){D||(fe(O,A),D=!0)},o(A){ve(O,A),D=!1},d(A){A&&M(e),Au(F,A),O&&O.d(A),B=!1,zt(w)}}}function AF(t,e,r){let n,i,a,o;Ge(t,ot,A=>r(1,o=A));let{$$slots:s={},$$scope:l}=e,{center:p=[0,0]}=e,{dimensions:c=[100,100]}=e,{maxWidth:f=1e3}=e,{pointRadius:d=10}=e,{textWidth:g=250}=e,{horizontalPad:b=20}=e,{verticalPad:v=2}=e,{textBarPad:m=10}=e,{fontSize:D=13}=e,{handleWidth:B=20}=e;function w(){return Object.keys(o.weightedPrompts).length}const C=Ii.subscribe(()=>{k()});Lp(()=>{C()});function F(A){ot.update({...o,randomPromptLimit:A}),k()}function k(){const A=Object.entries(o.weightedPrompts).sort((x,U)=>Math.random()-.5).reduce((x,[U,K],J)=>(x[U]={...K,randomWeight:J<(o.randomPromptLimit||w())?Math.random():0},x),{});ot.update({...o,weightedPrompts:A})}const O=A=>F(parseInt(A.target.value));return t.$$set=A=>{"center"in A&&r(6,p=A.center),"dimensions"in A&&r(7,c=A.dimensions),"maxWidth"in A&&r(8,f=A.maxWidth),"pointRadius"in A&&r(9,d=A.pointRadius),"textWidth"in A&&r(10,g=A.textWidth),"horizontalPad"in A&&r(11,b=A.horizontalPad),"verticalPad"in A&&r(12,v=A.verticalPad),"textBarPad"in A&&r(13,m=A.textBarPad),"fontSize"in A&&r(14,D=A.fontSize),"handleWidth"in A&&r(15,B=A.handleWidth),"$$scope"in A&&r(17,l=A.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&r(0,n=Object.entries(o.weightedPrompts).map(([A,x],U)=>[parseInt(A),U,x])),t.$$.dirty&1&&r(16,i=n.map(([A,x,U])=>[A,U.randomWeight||0])),t.$$.dirty&65536&&r(2,a=i.sort((A,x)=>x[1]-A[1]))},[n,o,a,w,F,k,p,c,f,d,g,b,v,m,D,B,i,l,s,O]}class CF extends Xe{constructor(e){super(),et(this,e,AF,EF,tt,{center:6,dimensions:7,maxWidth:8,pointRadius:9,textWidth:10,horizontalPad:11,verticalPad:12,textBarPad:13,fontSize:14,handleWidth:15})}}function FF(t){let e,r;return e=new Su({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function SF(t){let e,r,n,i;return r=new CF({props:{dimensions:t[2],center:t[3],$$slots:{default:[FF]},$$scope:{ctx:t}}}),{c(){e=q("div"),Ve(r.$$.fragment),this.h()},l(a){e=W(a,"DIV",{class:!0});var o=R(e);je(r.$$.fragment,o),o.forEach(M),this.h()},h(){S(e,"class","w-full h-full pt-10"),xi(()=>t[4].call(e))},m(a,o){se(a,e,o),ze(r,e,null),n=Ma(e,t[4].bind(e)),i=!0},p(a,[o]){const s={};o&4&&(s.dimensions=a[2]),o&8&&(s.center=a[3]),o&32&&(s.$$scope={dirty:o,ctx:a}),r.$set(s)},i(a){i||(fe(r.$$.fragment,a),i=!0)},o(a){ve(r.$$.fragment,a),i=!1},d(a){a&&M(e),qe(r),n()}}}function BF(t,e,r){let n,i,a,o;function s(){a=this.clientWidth,o=this.clientHeight,r(0,a),r(1,o)}return t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[a||0,o||0]),t.$$.dirty&4&&r(3,i=ka(n))},[a,o,n,i,s]}class OF extends Xe{constructor(e){super(),et(this,e,BF,SF,tt,{})}}function MF(t){let e,r;return e=new cF({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function PF(t){let e,r;return e=new wF({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function kF(t){let e,r;return e=new g6({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function TF(t){let e,r;return e=new C6({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function IF(t){let e,r;return e=new OF({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function xF(t){let e,r,n,i;const a=[IF,TF,kF,PF,MF],o=[];function s(l,p){return l[0].weightMode===gt.Random?0:l[0].weightMode===gt.Pie?1:l[0].weightMode===gt.Circle?2:l[0].weightMode===gt.Ring?3:l[0].weightMode===gt.Embed?4:-1}return~(r=s(t))&&(n=o[r]=a[r](t)),{c(){e=q("div"),n&&n.c(),this.h()},l(l){e=W(l,"DIV",{class:!0});var p=R(e);n&&n.l(p),p.forEach(M),this.h()},h(){S(e,"class","w-full h-full flex flex-col")},m(l,p){se(l,e,p),~r&&o[r].m(e,null),i=!0},p(l,[p]){let c=r;r=s(l),r!==c&&(n&&(ir(),ve(o[c],1,1,()=>{o[c]=null}),ar()),~r?(n=o[r],n||(n=o[r]=a[r](l),n.c()),fe(n,1),n.m(e,null)):n=null)},i(l){i||(fe(n),i=!0)},o(l){ve(n),i=!1},d(l){l&&M(e),~r&&o[r].d()}}}function NF(t,e,r){let n;return Ge(t,ot,i=>r(0,n=i)),[n]}class LF extends Xe{constructor(e){super(),et(this,e,NF,xF,tt,{})}}function RF(t){let e,r,n,i,a="<<",o,s,l="<",p,c,f,d,g,b=">",v,m,D=">>",B,w,C,F,k,O,A,x,U,K,J,j,V,H,z,Q,X;return{c(){e=q("div"),r=q("div"),n=q("div"),i=q("button"),o=Se(a),s=q("button"),p=Se(l),c=Ee(),f=q("button"),d=Se(t[1]),g=q("button"),v=Se(b),m=q("button"),B=Se(D),w=Ee(),C=q("div"),F=q("label"),k=Se("Page Size"),O=Ee(),A=q("select"),x=q("option"),U=Se("10"),K=q("option"),J=Se("25"),j=q("option"),V=Se("50"),H=q("option"),z=Se("100"),this.h()},l(te){e=W(te,"DIV",{class:!0});var le=R(e);r=W(le,"DIV",{class:!0});var be=R(r);n=W(be,"DIV",{class:!0});var we=R(n);i=W(we,"BUTTON",{class:!0});var Oe=R(i);o=Be(Oe,a),Oe.forEach(M),s=W(we,"BUTTON",{class:!0});var Pe=R(s);p=Be(Pe,l),Pe.forEach(M),c=Ae(we),f=W(we,"BUTTON",{class:!0});var Te=R(f);d=Be(Te,t[1]),Te.forEach(M),g=W(we,"BUTTON",{class:!0});var Re=R(g);v=Be(Re,b),Re.forEach(M),m=W(we,"BUTTON",{class:!0});var Ue=R(m);B=Be(Ue,D),Ue.forEach(M),we.forEach(M),be.forEach(M),w=Ae(le),C=W(le,"DIV",{class:!0});var We=R(C);F=W(We,"LABEL",{for:!0,class:!0});var Ye=R(F);k=Be(Ye,"Page Size"),Ye.forEach(M),O=Ae(We),A=W(We,"SELECT",{class:!0});var xe=R(A);x=W(xe,"OPTION",{});var Dt=R(x);U=Be(Dt,"10"),Dt.forEach(M),K=W(xe,"OPTION",{});var Et=R(K);J=Be(Et,"25"),Et.forEach(M),j=W(xe,"OPTION",{});var ht=R(j);V=Be(ht,"50"),ht.forEach(M),H=W(xe,"OPTION",{});var lt=R(H);z=Be(lt,"100"),lt.forEach(M),xe.forEach(M),We.forEach(M),le.forEach(M),this.h()},h(){S(i,"class","btn"),Qe(i,"btn-disabled",t[1]===1),S(s,"class","btn"),Qe(s,"btn-disabled",t[1]===1),S(f,"class","btn"),Qe(f,"btn-disabled",t[0]===0),S(g,"class","btn"),Qe(g,"btn-disabled",t[0]===0||t[1]===t[0]),S(m,"class","btn"),Qe(m,"btn-disabled",t[0]===0||t[1]===t[0]),S(n,"class","btn-group"),S(r,"class","flex justify-start"),S(F,"for","page-size"),S(F,"class","p-2 text-md min-w-xs"),x.__value=10,x.value=x.__value,K.__value=25,K.value=K.__value,j.__value=50,j.value=j.__value,H.__value=100,H.value=H.__value,S(A,"class","select max-w-xs"),S(C,"class","flex"),S(e,"class","w-full flex justify-between p-4")},m(te,le){se(te,e,le),T(e,r),T(r,n),T(n,i),T(i,o),T(n,s),T(s,p),T(n,c),T(n,f),T(f,d),T(n,g),T(g,v),T(n,m),T(m,B),T(e,w),T(e,C),T(C,F),T(F,k),T(C,O),T(C,A),T(A,x),T(x,U),T(A,K),T(K,J),T(A,j),T(j,V),T(A,H),T(H,z),Q||(X=[_e(i,"click",t[5]),_e(s,"click",t[6]),_e(f,"click",t[7]),_e(g,"click",t[8]),_e(m,"click",t[9]),_e(A,"change",t[10])],Q=!0)},p(te,[le]){le&2&&Qe(i,"btn-disabled",te[1]===1),le&2&&Qe(s,"btn-disabled",te[1]===1),le&2&&fr(d,te[1]),le&1&&Qe(f,"btn-disabled",te[0]===0),le&3&&Qe(g,"btn-disabled",te[0]===0||te[1]===te[0]),le&3&&Qe(m,"btn-disabled",te[0]===0||te[1]===te[0])},i:Me,o:Me,d(te){te&&M(e),Q=!1,zt(X)}}}function UF(t,e,r){let{total:n}=e,{current:i}=e,{size:a}=e,{onChange:o}=e,{onResize:s}=e;const l=()=>o(1),p=()=>o(i-1),c=()=>o(i),f=()=>o(i+1),d=()=>o(n),g=b=>s(b.target.value);return t.$$set=b=>{"total"in b&&r(0,n=b.total),"current"in b&&r(1,i=b.current),"size"in b&&r(4,a=b.size),"onChange"in b&&r(2,o=b.onChange),"onResize"in b&&r(3,s=b.onResize)},[n,i,o,s,a,l,p,c,f,d,g]}class q1 extends Xe{constructor(e){super(),et(this,e,UF,RF,tt,{total:0,current:1,size:4,onChange:2,onResize:3})}}function Bd(t,e,r){const n=t.slice();return n[7]=e[r],n[9]=r,n}function Od(t,e){let r,n,i=e[7].date.toDateString()+"",a,o,s,l,p=e[7].prompt+"",c,f,d,g;function b(){return e[6](e[7])}return{key:t,first:null,c(){r=q("tr"),n=q("td"),a=Se(i),o=Ee(),s=q("td"),l=q("span"),c=Se(p),f=Ee(),this.h()},l(v){r=W(v,"TR",{});var m=R(r);n=W(m,"TD",{style:!0,class:!0});var D=R(n);a=Be(D,i),D.forEach(M),o=Ae(m),s=W(m,"TD",{style:!0,class:!0});var B=R(s);l=W(B,"SPAN",{});var w=R(l);c=Be(w,p),w.forEach(M),B.forEach(M),f=Ae(m),m.forEach(M),this.h()},h(){Bt(n,"max-width","10rem"),Bt(n,"width","20rem"),S(n,"class","whitespace-nowrap"),Bt(s,"max-width","20px"),S(s,"class","cursor-copy text-ellipsis whitespace-nowrap overflow-hidden select-none hover:text-white"),this.first=r},m(v,m){se(v,r,m),T(r,n),T(n,a),T(r,o),T(r,s),T(s,l),T(l,c),T(r,f),d||(g=_e(s,"click",b),d=!0)},p(v,m){e=v,m&8&&i!==(i=e[7].date.toDateString()+"")&&fr(a,i),m&8&&p!==(p=e[7].prompt+"")&&fr(c,p)},d(v){v&&M(r),d=!1,g()}}}function VF(t){let e,r,n,i,a,o,s,l,p,c,f,d,g,b=[],v=new Map,m;e=new q1({props:{total:Math.ceil(t[2].length/t[1]),current:t[0],size:t[1],onChange:t[4],onResize:t[5]}});let D=t[3];const B=w=>w[9];for(let w=0;w<D.length;w+=1){let C=Bd(t,D,w),F=B(C);v.set(F,b[w]=Od(F,C))}return{c(){Ve(e.$$.fragment),r=Ee(),n=q("div"),i=q("table"),a=q("thead"),o=q("tr"),s=q("th"),l=Se("Date"),p=Ee(),c=q("th"),f=Se("Prompt"),d=Ee(),g=q("tbody");for(let w=0;w<b.length;w+=1)b[w].c();this.h()},l(w){je(e.$$.fragment,w),r=Ae(w),n=W(w,"DIV",{class:!0});var C=R(n);i=W(C,"TABLE",{class:!0});var F=R(i);a=W(F,"THEAD",{});var k=R(a);o=W(k,"TR",{});var O=R(o);s=W(O,"TH",{});var A=R(s);l=Be(A,"Date"),A.forEach(M),p=Ae(O),c=W(O,"TH",{});var x=R(c);f=Be(x,"Prompt"),x.forEach(M),O.forEach(M),k.forEach(M),d=Ae(F),g=W(F,"TBODY",{});var U=R(g);for(let K=0;K<b.length;K+=1)b[K].l(U);U.forEach(M),F.forEach(M),C.forEach(M),this.h()},h(){S(i,"class","table w-full"),S(n,"class","w-full px-4 overflow-y-auto")},m(w,C){ze(e,w,C),se(w,r,C),se(w,n,C),T(n,i),T(i,a),T(a,o),T(o,s),T(s,l),T(o,p),T(o,c),T(c,f),T(i,d),T(i,g);for(let F=0;F<b.length;F+=1)b[F]&&b[F].m(g,null);m=!0},p(w,[C]){const F={};C&6&&(F.total=Math.ceil(w[2].length/w[1])),C&1&&(F.current=w[0]),C&2&&(F.size=w[1]),e.$set(F),C&8&&(D=w[3],b=Rn(b,C,B,1,w,D,v,g,Zn,Od,null,Bd))},i(w){m||(fe(e.$$.fragment,w),m=!0)},o(w){ve(e.$$.fragment,w),m=!1},d(w){qe(e,w),w&&M(r),w&&M(n);for(let C=0;C<b.length;C+=1)b[C].d()}}}function jF(t){navigator.clipboard.writeText(t)}function zF(t,e,r){let n;Ge(t,Qc,c=>r(2,n=c));let i=1,a=10,o=[];function s(c){r(0,i=c)}function l(c){r(0,i=1),r(1,a=c)}const p=c=>jF(c.prompt);return t.$$.update=()=>{t.$$.dirty&7&&r(3,o=n.slice((i-1)*a,i*a))},[i,a,n,o,s,l,p]}class qF extends Xe{constructor(e){super(),et(this,e,zF,VF,tt,{})}}const Fs=ur(Gn.List),Da=ur({});function WF(t){let e,r,n,i,a,o;return r=new A1({props:{center:t[9],dimensions:t[7],onMarkerMove:t[10],dataPoints:t[8]}}),a=new C1({props:{useExponentialScaling:t[3],toggleExponentialScaling:t[12],exponentialScaling:t[4],setExponentialScaling:t[13],connectionLimit:t[2],setConnectionLimit:t[11],maxConnectionLimit:t[6],clusterCount:t[5],setClusterCount:t[14],maxClusterCount:t[6],onShuffle:t[15]}}),{c(){e=q("div"),Ve(r.$$.fragment),i=Ee(),Ve(a.$$.fragment),this.h()},l(s){e=W(s,"DIV",{class:!0});var l=R(e);je(r.$$.fragment,l),l.forEach(M),i=Ae(s),je(a.$$.fragment,s),this.h()},h(){S(e,"class","w-full h-full"),xi(()=>t[18].call(e))},m(s,l){se(s,e,l),ze(r,e,null),n=Ma(e,t[18].bind(e)),se(s,i,l),ze(a,s,l),o=!0},p(s,[l]){const p={};l&512&&(p.center=s[9]),l&128&&(p.dimensions=s[7]),l&256&&(p.dataPoints=s[8]),r.$set(p);const c={};l&8&&(c.useExponentialScaling=s[3]),l&16&&(c.exponentialScaling=s[4]),l&4&&(c.connectionLimit=s[2]),l&64&&(c.maxConnectionLimit=s[6]),l&32&&(c.clusterCount=s[5]),l&64&&(c.maxClusterCount=s[6]),a.$set(c)},i(s){o||(fe(r.$$.fragment,s),fe(a.$$.fragment,s),o=!0)},o(s){ve(r.$$.fragment,s),ve(a.$$.fragment,s),o=!1},d(s){s&&M(e),qe(r),n(),s&&M(i),qe(a,s)}}}function HF(t,e,r){let n,i,a,o;Ge(t,tF,H=>r(17,o=H));let s=0,l=0,p={},c=[.5,.5],f=10,d=!1,g=2,b=0,v,m={},D={};function B(H){o&&v?(O(),F(c,d,g,H)):console.log("no concepts or mappings")}function w(H,z){H&&z?(O(),F(c,d,g,f)):console.log("no concepts or mappings")}function C(H,z){F(c,H,z,f)}function F(H,z,Q,X){if(console.log("recomputing weights"),!p)return;let te=0;const le={...m};Object.values(p).forEach(Te=>{Object.values(p).forEach(Re=>{const Ue=Oa(Te.xy,Re.xy);Ue>te&&(te=Ue)})});const be=Object.entries(p).reduce((Te,[Re,Ue])=>{const We=Oa(H,Ue.xy);return Te[Re]=We,Te},{}),we=(Te,Re)=>{const Ue=Te?Math.round(Math.pow(1-Re/te,Q)*100)/100:0;return Ue<0?0:Ue},Oe=(Te,Re)=>{const Ue=Te?Math.round((1-Re/te)*100)/100:0;return Ue<0?0:Ue},Pe={...p};Object.entries(be).sort((Te,Re)=>Te[1]-Re[1]).forEach(([Te,Re],Ue)=>{if(!o[Te])return;const We=Ue<X,Ye=z?we(We,Re):Oe(We,Re);le[Te]=Ye;const xe={...Pe[Te]};xe.opacity=nn(Ye),xe.connected=We,Pe[Te]=xe}),console.log("weights updated"),m=le,r(8,p=Pe)}function k(){let H=Object.entries(o);const z=be=>new Array(be).fill(null).map(()=>[]);console.log("clustering embeddings");const Q=H.length>=2?Oi(H.map(be=>be[1]),2):[H.map(be=>be[0])];console.log("set of 2 complete");const X=H.length>=4?Oi(H.map(be=>be[1]),4):Q;console.log("set of 4 complete");const te=H.length>=6?Oi(H.map(be=>be[1]),6):X;console.log("set of 6 complete");const le=H.length>=8?Oi(H.map(be=>be[1]),8):te;return console.log("set of 8 complete"),{2:[...Q,...z(2-Q.length)],4:[...X,...z(4-X.length)],6:[...te,...z(6-te.length)],8:[...le,...z(8-le.length)]}}function O(){if(console.log("updating data points"),!o||!v)return;const H=Object.keys(v),z=X=>{if(!X.length)return i;const te=X.map(le=>Q[le].xy);return Rs(te)},Q=H.reduce((X,te,le)=>(X[te]={xy:v[te],text:te,connected:!0,opacity:1},X),{});if(D=k(),b&&D){const X=b,te=D[X];let le=te.map(Oe=>z(Oe));const be=j1(X),we=z1(le,be);we&&we.forEach(Oe=>{const Pe=Oe.ids[0],Te=Oe.points[1];te[Pe].forEach(Re=>{Q[Re].xy=Rs([Q[Re].xy,Te])})})}r(8,p=Q)}function A(H){c=H,F(c,d,g,f)}function x(H){H>0&&H<=a&&r(2,f=Math.round(H))}function U(){r(3,d=!d)}function K(H){r(4,g=H)}function J(H){[0,2,4,6,8].indexOf(H)!==-1&&r(5,b=H)}async function j(){r(16,v=ef(o))}ly(()=>{j()});function V(){s=this.clientWidth,l=this.clientHeight,r(0,s),r(1,l)}return t.$$.update=()=>{t.$$.dirty&3&&r(7,n=[s||250,l||250]),t.$$.dirty&128&&r(9,i=ka(n)),t.$$.dirty&131072&&r(6,a=Object.keys(o).length),t.$$.dirty&131168&&o&&a<b&&J(V1(a)),t.$$.dirty&24&&C(d,g),t.$$.dirty&196608&&w(o,v),t.$$.dirty&4&&B(f)},[s,l,f,d,g,b,a,n,p,i,A,x,U,K,J,j,v,o,V]}class $F extends Xe{constructor(e){super(),et(this,e,HF,WF,tt,{})}}function GF(t){let e,r;return e=new $F({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p:Me,i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function KF(t){let e,r,n,i,a,o;return{c(){e=q("div"),r=q("div"),n=q("div"),i=q("progress"),this.h()},l(s){e=W(s,"DIV",{class:!0});var l=R(e);r=W(l,"DIV",{class:!0});var p=R(r);n=W(p,"DIV",{class:!0});var c=R(n);i=W(c,"PROGRESS",{class:!0,max:!0}),R(i).forEach(M),c.forEach(M),p.forEach(M),l.forEach(M),this.h()},h(){S(i,"class","progress progress-primary w-56"),i.value=a=Object.keys(t[2]).length-Object.keys(t[1]).length,S(i,"max",o=Object.keys(t[2]).length),S(n,"class","h-20 w-52"),S(r,"class","flex flex-col justify-center"),S(e,"class","w-full h-full flex justify-center")},m(s,l){se(s,e,l),T(e,r),T(r,n),T(n,i)},p(s,l){l&6&&a!==(a=Object.keys(s[2]).length-Object.keys(s[1]).length)&&(i.value=a),l&4&&o!==(o=Object.keys(s[2]).length)&&S(i,"max",o)},i:Me,o:Me,d(s){s&&M(e)}}}function YF(t){let e,r,n,i,a;return{c(){e=q("div"),r=q("div"),n=q("div"),i=q("p"),a=Se("Set OpenAI key in settings to use concept map."),this.h()},l(o){e=W(o,"DIV",{class:!0});var s=R(e);r=W(s,"DIV",{class:!0});var l=R(r);n=W(l,"DIV",{class:!0});var p=R(n);i=W(p,"P",{class:!0});var c=R(i);a=Be(c,"Set OpenAI key in settings to use concept map."),c.forEach(M),p.forEach(M),l.forEach(M),s.forEach(M),this.h()},h(){S(i,"class","text-center text-lg"),S(n,"class","h-20 w-52"),S(r,"class","flex flex-col justify-center"),S(e,"class","w-full h-full flex justify-center")},m(o,s){se(o,e,s),T(e,r),T(r,n),T(n,i),T(i,a)},p:Me,i:Me,o:Me,d(o){o&&M(e)}}}function ZF(t){let e,r,n,i,a;const o=[YF,KF,GF],s=[];function l(p,c){return c&2&&(e=null),p[0]?(e==null&&(e=Object.keys(p[1]).length>0),e?1:2):0}return r=l(t,-1),n=s[r]=o[r](t),{c(){n.c(),i=Ft()},l(p){n.l(p),i=Ft()},m(p,c){s[r].m(p,c),se(p,i,c),a=!0},p(p,[c]){let f=r;r=l(p,c),r===f?s[r].p(p,c):(ir(),ve(s[f],1,1,()=>{s[f]=null}),ar(),n=s[r],n?n.p(p,c):(n=s[r]=o[r](p),n.c()),fe(n,1),n.m(i.parentNode,i))},i(p){a||(fe(n),a=!0)},o(p){ve(n),a=!1},d(p){s[r].d(p),p&&M(i)}}}function JF(t,e,r){let n,i,a;return Ge(t,hi,o=>r(0,n=o)),Ge(t,Da,o=>r(1,i=o)),Ge(t,Rr,o=>r(2,a=o)),[n,i,a]}class QF extends Xe{constructor(e){super(),et(this,e,JF,ZF,tt,{})}}function XF(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var W1=XF,e5=typeof gr=="object"&&gr&&gr.Object===Object&&gr,t5=e5,r5=t5,n5=typeof self=="object"&&self&&self.Object===Object&&self,i5=r5||n5||Function("return this")(),H1=i5,a5=H1,u5=function(){return a5.Date.now()},s5=u5,o5=/\s/;function l5(t){for(var e=t.length;e--&&o5.test(t.charAt(e)););return e}var c5=l5,f5=c5,h5=/^\s+/;function d5(t){return t&&t.slice(0,f5(t)+1).replace(h5,"")}var p5=d5,g5=H1,v5=g5.Symbol,$1=v5,Md=$1,G1=Object.prototype,m5=G1.hasOwnProperty,_5=G1.toString,fu=Md?Md.toStringTag:void 0;function b5(t){var e=m5.call(t,fu),r=t[fu];try{t[fu]=void 0;var n=!0}catch{}var i=_5.call(t);return n&&(e?t[fu]=r:delete t[fu]),i}var D5=b5,y5=Object.prototype,w5=y5.toString;function E5(t){return w5.call(t)}var A5=E5,Pd=$1,C5=D5,F5=A5,S5="[object Null]",B5="[object Undefined]",kd=Pd?Pd.toStringTag:void 0;function O5(t){return t==null?t===void 0?B5:S5:kd&&kd in Object(t)?C5(t):F5(t)}var M5=O5;function P5(t){return t!=null&&typeof t=="object"}var k5=P5,T5=M5,I5=k5,x5="[object Symbol]";function N5(t){return typeof t=="symbol"||I5(t)&&T5(t)==x5}var L5=N5,R5=p5,Td=W1,U5=L5,Id=0/0,V5=/^[-+]0x[0-9a-f]+$/i,j5=/^0b[01]+$/i,z5=/^0o[0-7]+$/i,q5=parseInt;function W5(t){if(typeof t=="number")return t;if(U5(t))return Id;if(Td(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Td(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=R5(t);var r=j5.test(t);return r||z5.test(t)?q5(t.slice(2),r?2:8):V5.test(t)?Id:+t}var H5=W5,$5=W1,Hl=s5,xd=H5,G5="Expected a function",K5=Math.max,Y5=Math.min;function Z5(t,e,r){var n,i,a,o,s,l,p=0,c=!1,f=!1,d=!0;if(typeof t!="function")throw new TypeError(G5);e=xd(e)||0,$5(r)&&(c=!!r.leading,f="maxWait"in r,a=f?K5(xd(r.maxWait)||0,e):a,d="trailing"in r?!!r.trailing:d);function g(k){var O=n,A=i;return n=i=void 0,p=k,o=t.apply(A,O),o}function b(k){return p=k,s=setTimeout(D,e),c?g(k):o}function v(k){var O=k-l,A=k-p,x=e-O;return f?Y5(x,a-A):x}function m(k){var O=k-l,A=k-p;return l===void 0||O>=e||O<0||f&&A>=a}function D(){var k=Hl();if(m(k))return B(k);s=setTimeout(D,v(k))}function B(k){return s=void 0,d&&n?g(k):(n=i=void 0,o)}function w(){s!==void 0&&clearTimeout(s),p=0,n=l=i=s=void 0}function C(){return s===void 0?o:B(Hl())}function F(){var k=Hl(),O=m(k);if(n=arguments,i=this,l=k,O){if(s===void 0)return b(l);if(f)return clearTimeout(s),s=setTimeout(D,e),g(l)}return s===void 0&&(s=setTimeout(D,e)),o}return F.cancel=w,F.flush=C,F}var Qs=Z5;function Nd(t,e,r){const n=t.slice();return n[13]=e[r],n[15]=r,n}function Ld(t,e){let r,n,i=e[13]+"",a,o,s,l,p,c,f,d,g;function b(){return e[10](e[13])}function v(){return e[12](e[13])}return{key:t,first:null,c(){r=q("tr"),n=q("td"),a=Se(i),o=Ee(),s=q("td"),l=q("button"),p=ut("svg"),c=ut("path"),f=Ee(),this.h()},l(m){r=W(m,"TR",{});var D=R(r);n=W(D,"TD",{style:!0,class:!0});var B=R(n);a=Be(B,i),B.forEach(M),o=Ae(D),s=W(D,"TD",{style:!0,class:!0});var w=R(s);l=W(w,"BUTTON",{class:!0});var C=R(l);p=st(C,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var F=R(p);c=st(F,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),R(c).forEach(M),F.forEach(M),C.forEach(M),w.forEach(M),f=Ae(D),D.forEach(M),this.h()},h(){Bt(n,"max-width","20px"),S(n,"class","text-ellipsis cursor-copy whitespace-nowrap overflow-hidden select-none hover:text-white"),S(c,"stroke-linecap","round"),S(c,"stroke-linejoin","round"),S(c,"stroke-width","2"),S(c,"d","M6 18L18 6M6 6l12 12"),S(p,"xmlns","http://www.w3.org/2000/svg"),S(p,"class","h-6 w-6"),S(p,"fill","none"),S(p,"viewBox","0 0 24 24"),S(p,"stroke","red"),S(l,"class","btn btn-sm btn-circle btn-outline"),Bt(s,"max-width","4rem"),Bt(s,"width","4rem"),S(s,"class",""),this.first=r},m(m,D){se(m,r,D),T(r,n),T(n,a),T(r,o),T(r,s),T(s,l),T(l,p),T(p,c),T(r,f),d||(g=[_e(n,"click",b),_e(n,"change",e[11]),_e(s,"click",v)],d=!0)},p(m,D){e=m,D&4&&i!==(i=e[13]+"")&&fr(a,i)},d(m){m&&M(r),d=!1,zt(g)}}}function J5(t){let e,r,n,i,a,o,s,l,p,c,f,d,g=[],b=new Map,v,m,D;e=new q1({props:{total:t[3],current:t[0],size:t[1],onChange:t[5],onResize:t[6]}});let B=t[2];const w=C=>C[15];for(let C=0;C<B.length;C+=1){let F=Nd(t,B,C),k=w(F);b.set(k,g[C]=Ld(k,F))}return{c(){Ve(e.$$.fragment),r=Ee(),n=q("div"),i=q("table"),a=q("thead"),o=q("tr"),s=q("th"),l=Se("Concept"),p=Ee(),c=q("th"),f=Ee(),d=q("tbody");for(let C=0;C<g.length;C+=1)g[C].c();this.h()},l(C){je(e.$$.fragment,C),r=Ae(C),n=W(C,"DIV",{class:!0});var F=R(n);i=W(F,"TABLE",{class:!0});var k=R(i);a=W(k,"THEAD",{});var O=R(a);o=W(O,"TR",{});var A=R(o);s=W(A,"TH",{});var x=R(s);l=Be(x,"Concept"),x.forEach(M),p=Ae(A),c=W(A,"TH",{}),R(c).forEach(M),A.forEach(M),O.forEach(M),f=Ae(k),d=W(k,"TBODY",{});var U=R(d);for(let K=0;K<g.length;K+=1)g[K].l(U);U.forEach(M),k.forEach(M),F.forEach(M),this.h()},h(){S(i,"class","table w-full"),S(n,"class","w-full px-4 overflow-y-auto")},m(C,F){ze(e,C,F),se(C,r,F),se(C,n,F),T(n,i),T(i,a),T(a,o),T(o,s),T(s,l),T(o,p),T(o,c),T(i,f),T(i,d);for(let k=0;k<g.length;k+=1)g[k]&&g[k].m(d,null);v=!0,m||(D=_e(n,"paste",t[4]),m=!0)},p(C,[F]){const k={};F&8&&(k.total=C[3]),F&1&&(k.current=C[0]),F&2&&(k.size=C[1]),e.$set(k),F&132&&(B=C[2],g=Rn(g,F,w,1,C,B,b,d,Zn,Ld,null,Nd))},i(C){v||(fe(e.$$.fragment,C),v=!0)},o(C){ve(e.$$.fragment,C),v=!1},d(C){qe(e,C),C&&M(r),C&&M(n);for(let F=0;F<g.length;F+=1)g[F].d();m=!1,D()}}}function Q5(t){navigator.clipboard.writeText(t)}function X5(t,e,r){let n,i,a,o;Ge(t,Rr,m=>r(9,o=m));let s=1,l=10;function p(){console.log("pasted"),navigator.clipboard.readText().then(m=>{const D=_u(m).map(w=>w[0]),B=o;D.forEach(w=>{B[w]||Rr.update(w,null)})})}function c(m){r(0,s=m)}function f(m){r(0,s=1),r(1,l=m)}const d=Qs(m=>{Rr.update(m,null)},500),g=m=>Q5(m),b=m=>d(m.target.value),v=m=>Rr.remove(m);return t.$$.update=()=>{t.$$.dirty&512&&r(8,n=Object.keys(o)),t.$$.dirty&258&&r(3,i=Math.ceil(n.length/l)),t.$$.dirty&259&&r(2,a=Array.from(n).sort().slice((s-1)*l,s*l))},[s,l,a,i,p,c,f,d,n,o,g,b,v]}class eS extends Xe{constructor(e){super(),et(this,e,X5,J5,tt,{})}}function tS(t){let e,r;return e=new QF({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function rS(t){let e,r;return e=new eS({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function nS(t){let e,r,n,i;const a=[rS,tS],o=[];function s(l,p){return l[0]===Gn.List?0:l[0]===Gn.Map?1:-1}return~(e=s(t))&&(r=o[e]=a[e](t)),{c(){r&&r.c(),n=Ft()},l(l){r&&r.l(l),n=Ft()},m(l,p){~e&&o[e].m(l,p),se(l,n,p),i=!0},p(l,[p]){let c=e;e=s(l),e!==c&&(r&&(ir(),ve(o[c],1,1,()=>{o[c]=null}),ar()),~e?(r=o[e],r||(r=o[e]=a[e](l),r.c()),fe(r,1),r.m(n.parentNode,n)):r=null)},i(l){i||(fe(r),i=!0)},o(l){ve(r),i=!1},d(l){~e&&o[e].d(l),l&&M(n)}}}function iS(t,e,r){let n;return Ge(t,Fs,i=>r(0,n=i)),[n]}class aS extends Xe{constructor(e){super(),et(this,e,iS,nS,tt,{})}}var Ic={},K1={},Xs={},uS={get exports(){return Xs},set exports(t){Xs=t}},eo={},sS={get exports(){return eo},set exports(t){eo=t}},Y1=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}},oS=Y1,Li=Object.prototype.toString;function tf(t){return Array.isArray(t)}function xc(t){return typeof t>"u"}function lS(t){return t!==null&&!xc(t)&&t.constructor!==null&&!xc(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Z1(t){return Li.call(t)==="[object ArrayBuffer]"}function cS(t){return Li.call(t)==="[object FormData]"}function fS(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Z1(t.buffer),e}function hS(t){return typeof t=="string"}function dS(t){return typeof t=="number"}function J1(t){return t!==null&&typeof t=="object"}function Ss(t){if(Li.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function pS(t){return Li.call(t)==="[object Date]"}function gS(t){return Li.call(t)==="[object File]"}function vS(t){return Li.call(t)==="[object Blob]"}function Q1(t){return Li.call(t)==="[object Function]"}function mS(t){return J1(t)&&Q1(t.pipe)}function _S(t){return Li.call(t)==="[object URLSearchParams]"}function bS(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function DS(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function rf(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),tf(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Nc(){var t={};function e(i,a){Ss(t[a])&&Ss(i)?t[a]=Nc(t[a],i):Ss(i)?t[a]=Nc({},i):tf(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)rf(arguments[r],e);return t}function yS(t,e,r){return rf(e,function(i,a){r&&typeof i=="function"?t[a]=oS(i,r):t[a]=i}),t}function wS(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var sn={isArray:tf,isArrayBuffer:Z1,isBuffer:lS,isFormData:cS,isArrayBufferView:fS,isString:hS,isNumber:dS,isObject:J1,isPlainObject:Ss,isUndefined:xc,isDate:pS,isFile:gS,isBlob:vS,isFunction:Q1,isStream:mS,isURLSearchParams:_S,isStandardBrowserEnv:DS,forEach:rf,merge:Nc,extend:yS,trim:bS,stripBOM:wS},_a=sn;function Rd(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var X1=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(_a.isURLSearchParams(r))i=r.toString();else{var a=[];_a.forEach(r,function(l,p){l===null||typeof l>"u"||(_a.isArray(l)?p=p+"[]":l=[l],_a.forEach(l,function(f){_a.isDate(f)?f=f.toISOString():_a.isObject(f)&&(f=JSON.stringify(f)),a.push(Rd(p)+"="+Rd(f))}))}),i=a.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},ES=sn;function yo(){this.handlers=[]}yo.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};yo.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};yo.prototype.forEach=function(e){ES.forEach(this.handlers,function(n){n!==null&&e(n)})};var AS=yo,CS=sn,FS=function(e,r){CS.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})},eg=function(e,r,n,i,a){return e.config=r,n&&(e.code=n),e.request=i,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},tg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$l,Ud;function rg(){if(Ud)return $l;Ud=1;var t=eg;return $l=function(r,n,i,a,o){var s=new Error(r);return t(s,n,i,a,o)},$l}var Gl,Vd;function SS(){if(Vd)return Gl;Vd=1;var t=rg();return Gl=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},Gl}var Kl,jd;function BS(){if(jd)return Kl;jd=1;var t=sn;return Kl=t.isStandardBrowserEnv()?function(){return{write:function(n,i,a,o,s,l){var p=[];p.push(n+"="+encodeURIComponent(i)),t.isNumber(a)&&p.push("expires="+new Date(a).toGMTString()),t.isString(o)&&p.push("path="+o),t.isString(s)&&p.push("domain="+s),l===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Kl}var Yl,zd;function OS(){return zd||(zd=1,Yl=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),Yl}var Zl,qd;function MS(){return qd||(qd=1,Zl=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Zl}var Jl,Wd;function PS(){if(Wd)return Jl;Wd=1;var t=OS(),e=MS();return Jl=function(n,i){return n&&!t(i)?e(n,i):i},Jl}var Ql,Hd;function kS(){if(Hd)return Ql;Hd=1;var t=sn,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Ql=function(n){var i={},a,o,s;return n&&t.forEach(n.split(`
`),function(p){if(s=p.indexOf(":"),a=t.trim(p.substr(0,s)).toLowerCase(),o=t.trim(p.substr(s+1)),a){if(i[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([o]):i[a]=i[a]?i[a]+", "+o:o}}),i},Ql}var Xl,$d;function TS(){if($d)return Xl;$d=1;var t=sn;return Xl=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(o){var s=o;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(s){var l=t.isString(s)?a(s):s;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),Xl}var ec,Gd;function wo(){if(Gd)return ec;Gd=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,ec=t,ec}var tc,Kd;function Yd(){if(Kd)return tc;Kd=1;var t=sn,e=SS(),r=BS(),n=X1,i=PS(),a=kS(),o=TS(),s=rg(),l=tg,p=wo();return tc=function(f){return new Promise(function(g,b){var v=f.data,m=f.headers,D=f.responseType,B;function w(){f.cancelToken&&f.cancelToken.unsubscribe(B),f.signal&&f.signal.removeEventListener("abort",B)}t.isFormData(v)&&delete m["Content-Type"];var C=new XMLHttpRequest;if(f.auth){var F=f.auth.username||"",k=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";m.Authorization="Basic "+btoa(F+":"+k)}var O=i(f.baseURL,f.url);C.open(f.method.toUpperCase(),n(O,f.params,f.paramsSerializer),!0),C.timeout=f.timeout;function A(){if(C){var U="getAllResponseHeaders"in C?a(C.getAllResponseHeaders()):null,K=!D||D==="text"||D==="json"?C.responseText:C.response,J={data:K,status:C.status,statusText:C.statusText,headers:U,config:f,request:C};e(function(V){g(V),w()},function(V){b(V),w()},J),C=null}}if("onloadend"in C?C.onloadend=A:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(A)},C.onabort=function(){C&&(b(s("Request aborted",f,"ECONNABORTED",C)),C=null)},C.onerror=function(){b(s("Network Error",f,null,C)),C=null},C.ontimeout=function(){var K=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",J=f.transitional||l;f.timeoutErrorMessage&&(K=f.timeoutErrorMessage),b(s(K,f,J.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",C)),C=null},t.isStandardBrowserEnv()){var x=(f.withCredentials||o(O))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;x&&(m[f.xsrfHeaderName]=x)}"setRequestHeader"in C&&t.forEach(m,function(K,J){typeof v>"u"&&J.toLowerCase()==="content-type"?delete m[J]:C.setRequestHeader(J,K)}),t.isUndefined(f.withCredentials)||(C.withCredentials=!!f.withCredentials),D&&D!=="json"&&(C.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&C.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(B=function(U){C&&(b(!U||U&&U.type?new p("canceled"):U),C.abort(),C=null)},f.cancelToken&&f.cancelToken.subscribe(B),f.signal&&(f.signal.aborted?B():f.signal.addEventListener("abort",B))),v||(v=null),C.send(v)})},tc}var Ir=sn,Zd=FS,IS=eg,xS=tg,NS={"Content-Type":"application/x-www-form-urlencoded"};function Jd(t,e){!Ir.isUndefined(t)&&Ir.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function LS(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Yd()),t}function RS(t,e,r){if(Ir.isString(t))try{return(e||JSON.parse)(t),Ir.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Eo={transitional:xS,adapter:LS(),transformRequest:[function(e,r){return Zd(r,"Accept"),Zd(r,"Content-Type"),Ir.isFormData(e)||Ir.isArrayBuffer(e)||Ir.isBuffer(e)||Ir.isStream(e)||Ir.isFile(e)||Ir.isBlob(e)?e:Ir.isArrayBufferView(e)?e.buffer:Ir.isURLSearchParams(e)?(Jd(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Ir.isObject(e)||r&&r["Content-Type"]==="application/json"?(Jd(r,"application/json"),RS(e)):e}],transformResponse:[function(e){var r=this.transitional||Eo.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&Ir.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?IS(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ir.forEach(["delete","get","head"],function(e){Eo.headers[e]={}});Ir.forEach(["post","put","patch"],function(e){Eo.headers[e]=Ir.merge(NS)});var nf=Eo,US=sn,VS=nf,jS=function(e,r,n){var i=this||VS;return US.forEach(n,function(o){e=o.call(i,e,r)}),e},rc,Qd;function ng(){return Qd||(Qd=1,rc=function(e){return!!(e&&e.__CANCEL__)}),rc}var Xd=sn,nc=jS,zS=ng(),qS=nf,WS=wo();function ic(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new WS("canceled")}var HS=function(e){ic(e),e.headers=e.headers||{},e.data=nc.call(e,e.data,e.headers,e.transformRequest),e.headers=Xd.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Xd.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||qS.adapter;return r(e).then(function(i){return ic(e),i.data=nc.call(e,i.data,i.headers,e.transformResponse),i},function(i){return zS(i)||(ic(e),i&&i.response&&(i.response.data=nc.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},pn=sn,ig=function(e,r){r=r||{};var n={};function i(c,f){return pn.isPlainObject(c)&&pn.isPlainObject(f)?pn.merge(c,f):pn.isPlainObject(f)?pn.merge({},f):pn.isArray(f)?f.slice():f}function a(c){if(pn.isUndefined(r[c])){if(!pn.isUndefined(e[c]))return i(void 0,e[c])}else return i(e[c],r[c])}function o(c){if(!pn.isUndefined(r[c]))return i(void 0,r[c])}function s(c){if(pn.isUndefined(r[c])){if(!pn.isUndefined(e[c]))return i(void 0,e[c])}else return i(void 0,r[c])}function l(c){if(c in r)return i(e[c],r[c]);if(c in e)return i(void 0,e[c])}var p={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l};return pn.forEach(Object.keys(e).concat(Object.keys(r)),function(f){var d=p[f]||a,g=d(f);pn.isUndefined(g)&&d!==l||(n[f]=g)}),n},ac,ep;function ag(){return ep||(ep=1,ac={version:"0.26.1"}),ac}var $S=ag().version,af={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){af[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var tp={};af.transitional=function(e,r,n){function i(a,o){return"[Axios v"+$S+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,s){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!tp[o]&&(tp[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,s):!0}};function GS(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],o=e[a];if(o){var s=t[a],l=s===void 0||o(s,a,t);if(l!==!0)throw new TypeError("option "+a+" must be "+l);continue}if(r!==!0)throw Error("Unknown option "+a)}}var KS={assertOptions:GS,validators:af},ug=sn,YS=X1,rp=AS,np=HS,Ao=ig,sg=KS,ba=sg.validators;function Bu(t){this.defaults=t,this.interceptors={request:new rp,response:new rp}}Bu.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Ao(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&sg.assertOptions(n,{silentJSONParsing:ba.transitional(ba.boolean),forcedJSONParsing:ba.transitional(ba.boolean),clarifyTimeoutError:ba.transitional(ba.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(a=a&&g.synchronous,i.unshift(g.fulfilled,g.rejected))});var o=[];this.interceptors.response.forEach(function(g){o.push(g.fulfilled,g.rejected)});var s;if(!a){var l=[np,void 0];for(Array.prototype.unshift.apply(l,i),l=l.concat(o),s=Promise.resolve(r);l.length;)s=s.then(l.shift(),l.shift());return s}for(var p=r;i.length;){var c=i.shift(),f=i.shift();try{p=c(p)}catch(d){f(d);break}}try{s=np(p)}catch(d){return Promise.reject(d)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};Bu.prototype.getUri=function(e){return e=Ao(this.defaults,e),YS(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};ug.forEach(["delete","get","head","options"],function(e){Bu.prototype[e]=function(r,n){return this.request(Ao(n||{},{method:e,url:r,data:(n||{}).data}))}});ug.forEach(["post","put","patch"],function(e){Bu.prototype[e]=function(r,n,i){return this.request(Ao(i||{},{method:e,url:r,data:n}))}});var ZS=Bu,uc,ip;function JS(){if(ip)return uc;ip=1;var t=wo();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(a){if(i._listeners){var o,s=i._listeners.length;for(o=0;o<s;o++)i._listeners[o](a);i._listeners=null}}),this.promise.then=function(a){var o,s=new Promise(function(l){i.subscribe(l),o=l}).then(a);return s.cancel=function(){i.unsubscribe(o)},s},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},uc=e,uc}var sc,ap;function QS(){return ap||(ap=1,sc=function(e){return function(n){return e.apply(null,n)}}),sc}var oc,up;function XS(){if(up)return oc;up=1;var t=sn;return oc=function(r){return t.isObject(r)&&r.isAxiosError===!0},oc}var sp=sn,e8=Y1,Bs=ZS,t8=ig,r8=nf;function og(t){var e=new Bs(t),r=e8(Bs.prototype.request,e);return sp.extend(r,Bs.prototype,e),sp.extend(r,e),r.create=function(i){return og(t8(t,i))},r}var Jn=og(r8);Jn.Axios=Bs;Jn.Cancel=wo();Jn.CancelToken=JS();Jn.isCancel=ng();Jn.VERSION=ag().version;Jn.all=function(e){return Promise.all(e)};Jn.spread=QS();Jn.isAxiosError=XS();sS.exports=Jn;eo.default=Jn;(function(t){t.exports=eo})(uS);var nr={},uf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RequiredError=t.BaseAPI=t.COLLECTION_FORMATS=t.BASE_PATH=void 0;const e=Xs;t.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class r{constructor(a,o=t.BASE_PATH,s=e.default){this.basePath=o,this.axios=s,a&&(this.configuration=a,this.basePath=a.basePath||this.basePath)}}t.BaseAPI=r;class n extends Error{constructor(a,o){super(o),this.field=a,this.name="RequiredError"}}t.RequiredError=n})(uf);var sf=gr&&gr.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{p(n.next(c))}catch(f){o(f)}}function l(c){try{p(n.throw(c))}catch(f){o(f)}}function p(c){c.done?a(c.value):i(c.value).then(s,l)}p((n=n.apply(t,e||[])).next())})};Object.defineProperty(nr,"__esModule",{value:!0});nr.createRequestFunction=nr.toPathString=nr.serializeDataIfNeeded=nr.setSearchParams=nr.setOAuthToObject=nr.setBearerAuthToObject=nr.setBasicAuthToObject=nr.setApiKeyToObject=nr.assertParamExists=nr.DUMMY_BASE_URL=void 0;const n8=uf;nr.DUMMY_BASE_URL="https://example.com";nr.assertParamExists=function(t,e,r){if(r==null)throw new n8.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};nr.setApiKeyToObject=function(t,e,r){return sf(this,void 0,void 0,function*(){if(r&&r.apiKey){const n=typeof r.apiKey=="function"?yield r.apiKey(e):yield r.apiKey;t[e]=n}})};nr.setBasicAuthToObject=function(t,e){e&&(e.username||e.password)&&(t.auth={username:e.username,password:e.password})};nr.setBearerAuthToObject=function(t,e){return sf(this,void 0,void 0,function*(){if(e&&e.accessToken){const r=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;t.Authorization="Bearer "+r}})};nr.setOAuthToObject=function(t,e,r,n){return sf(this,void 0,void 0,function*(){if(n&&n.accessToken){const i=typeof n.accessToken=="function"?yield n.accessToken(e,r):yield n.accessToken;t.Authorization="Bearer "+i}})};function Lc(t,e,r=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(n=>Lc(t,n,r)):Object.keys(e).forEach(n=>Lc(t,e[n],`${r}${r!==""?".":""}${n}`)):t.has(r)?t.append(r,e):t.set(r,e))}nr.setSearchParams=function(t,...e){const r=new URLSearchParams(t.search);Lc(r,e),t.search=r.toString()};nr.serializeDataIfNeeded=function(t,e,r){const n=typeof t!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(t!==void 0?t:{}):t||""};nr.toPathString=function(t){return t.pathname+t.search+t.hash};nr.createRequestFunction=function(t,e,r,n){return(i=e,a=r)=>{const o=Object.assign(Object.assign({},t.options),{url:((n==null?void 0:n.basePath)||a)+t.url});return i.request(o)}};(function(t){var e=gr&&gr.__awaiter||function(o,s,l,p){function c(f){return f instanceof l?f:new l(function(d){d(f)})}return new(l||(l=Promise))(function(f,d){function g(m){try{v(p.next(m))}catch(D){d(D)}}function b(m){try{v(p.throw(m))}catch(D){d(D)}}function v(m){m.done?f(m.value):c(m.value).then(g,b)}v((p=p.apply(o,s||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIApi=t.OpenAIApiFactory=t.OpenAIApiFp=t.OpenAIApiAxiosParamCreator=t.CreateImageRequestResponseFormatEnum=t.CreateImageRequestSizeEnum=t.ChatCompletionResponseMessageRoleEnum=t.ChatCompletionRequestMessageRoleEnum=void 0;const r=Xs,n=nr,i=uf;t.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},t.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},t.OpenAIApiAxiosParamCreator=function(o){return{cancelFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("cancelFineTune","fineTuneId",s);const p="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:d}}),createAnswer:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createAnswer","createAnswerRequest",s);const p="/answers",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createChatCompletion:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createChatCompletion","createChatCompletionRequest",s);const p="/chat/completions",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createClassification:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createClassification","createClassificationRequest",s);const p="/classifications",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createCompletion:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createCompletion","createCompletionRequest",s);const p="/completions",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createEdit:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEdit","createEditRequest",s);const p="/edits",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createEmbedding:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEmbedding","createEmbeddingRequest",s);const p="/embeddings",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createFile:(s,l,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFile","file",s),n.assertParamExists("createFile","purpose",l);const c="/files",f=new URL(c,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},d),p),b={},v={},m=new(o&&o.formDataCtor||FormData);s!==void 0&&m.append("file",s),l!==void 0&&m.append("purpose",l),b["Content-Type"]="multipart/form-data",n.setSearchParams(f,v);let D=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),m.getHeaders()),D),p.headers),g.data=m,{url:n.toPathString(f),options:g}}),createFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFineTune","createFineTuneRequest",s);const p="/fine-tunes",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createImage:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImage","createImageRequest",s);const p="/images/generations",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createImageEdit:(s,l,p,c,f,d,g,b={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageEdit","image",s),n.assertParamExists("createImageEdit","prompt",l);const v="/images/edits",m=new URL(v,n.DUMMY_BASE_URL);let D;o&&(D=o.baseOptions);const B=Object.assign(Object.assign({method:"POST"},D),b),w={},C={},F=new(o&&o.formDataCtor||FormData);s!==void 0&&F.append("image",s),p!==void 0&&F.append("mask",p),l!==void 0&&F.append("prompt",l),c!==void 0&&F.append("n",c),f!==void 0&&F.append("size",f),d!==void 0&&F.append("response_format",d),g!==void 0&&F.append("user",g),w["Content-Type"]="multipart/form-data",n.setSearchParams(m,C);let k=D&&D.headers?D.headers:{};return B.headers=Object.assign(Object.assign(Object.assign(Object.assign({},w),F.getHeaders()),k),b.headers),B.data=F,{url:n.toPathString(m),options:B}}),createImageVariation:(s,l,p,c,f,d={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageVariation","image",s);const g="/images/variations",b=new URL(g,n.DUMMY_BASE_URL);let v;o&&(v=o.baseOptions);const m=Object.assign(Object.assign({method:"POST"},v),d),D={},B={},w=new(o&&o.formDataCtor||FormData);s!==void 0&&w.append("image",s),l!==void 0&&w.append("n",l),p!==void 0&&w.append("size",p),c!==void 0&&w.append("response_format",c),f!==void 0&&w.append("user",f),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,B);let C=v&&v.headers?v.headers:{};return m.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),w.getHeaders()),C),d.headers),m.data=w,{url:n.toPathString(b),options:m}}),createModeration:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createModeration","createModerationRequest",s);const p="/moderations",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createSearch:(s,l,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createSearch","engineId",s),n.assertParamExists("createSearch","createSearchRequest",l);const c="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(s))),f=new URL(c,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},d),p),b={},v={};b["Content-Type"]="application/json",n.setSearchParams(f,v);let m=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),m),p.headers),g.data=n.serializeDataIfNeeded(l,g,o),{url:n.toPathString(f),options:g}}),createTranscription:(s,l,p,c,f,d,g={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranscription","file",s),n.assertParamExists("createTranscription","model",l);const b="/audio/transcriptions",v=new URL(b,n.DUMMY_BASE_URL);let m;o&&(m=o.baseOptions);const D=Object.assign(Object.assign({method:"POST"},m),g),B={},w={},C=new(o&&o.formDataCtor||FormData);s!==void 0&&C.append("file",s),l!==void 0&&C.append("model",l),p!==void 0&&C.append("prompt",p),c!==void 0&&C.append("response_format",c),f!==void 0&&C.append("temperature",f),d!==void 0&&C.append("language",d),B["Content-Type"]="multipart/form-data",n.setSearchParams(v,w);let F=m&&m.headers?m.headers:{};return D.headers=Object.assign(Object.assign(Object.assign(Object.assign({},B),C.getHeaders()),F),g.headers),D.data=C,{url:n.toPathString(v),options:D}}),createTranslation:(s,l,p,c,f,d={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranslation","file",s),n.assertParamExists("createTranslation","model",l);const g="/audio/translations",b=new URL(g,n.DUMMY_BASE_URL);let v;o&&(v=o.baseOptions);const m=Object.assign(Object.assign({method:"POST"},v),d),D={},B={},w=new(o&&o.formDataCtor||FormData);s!==void 0&&w.append("file",s),l!==void 0&&w.append("model",l),p!==void 0&&w.append("prompt",p),c!==void 0&&w.append("response_format",c),f!==void 0&&w.append("temperature",f),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,B);let C=v&&v.headers?v.headers:{};return m.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),w.getHeaders()),C),d.headers),m.data=w,{url:n.toPathString(b),options:m}}),deleteFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteFile","fileId",s);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:d}}),deleteModel:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteModel","model",s);const p="/models/{model}".replace("{model}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:d}}),downloadFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("downloadFile","fileId",s);const p="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:d}}),listEngines:(s={})=>e(this,void 0,void 0,function*(){const l="/engines",p=new URL(l,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),s),d={},g={};n.setSearchParams(p,g);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:f}}),listFiles:(s={})=>e(this,void 0,void 0,function*(){const l="/files",p=new URL(l,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),s),d={},g={};n.setSearchParams(p,g);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:f}}),listFineTuneEvents:(s,l,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("listFineTuneEvents","fineTuneId",s);const c="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(s))),f=new URL(c,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"GET"},d),p),b={},v={};l!==void 0&&(v.stream=l),n.setSearchParams(f,v);let m=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),m),p.headers),{url:n.toPathString(f),options:g}}),listFineTunes:(s={})=>e(this,void 0,void 0,function*(){const l="/fine-tunes",p=new URL(l,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),s),d={},g={};n.setSearchParams(p,g);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:f}}),listModels:(s={})=>e(this,void 0,void 0,function*(){const l="/models",p=new URL(l,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),s),d={},g={};n.setSearchParams(p,g);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:f}}),retrieveEngine:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveEngine","engineId",s);const p="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:d}}),retrieveFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFile","fileId",s);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:d}}),retrieveFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFineTune","fineTuneId",s);const p="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:d}}),retrieveModel:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveModel","model",s);const p="/models/{model}".replace("{model}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:d}})}},t.OpenAIApiFp=function(o){const s=t.OpenAIApiAxiosParamCreator(o);return{cancelFineTune(l,p){return e(this,void 0,void 0,function*(){const c=yield s.cancelFineTune(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createAnswer(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createAnswer(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createChatCompletion(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createChatCompletion(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createClassification(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createClassification(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createCompletion(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createCompletion(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createEdit(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createEdit(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createEmbedding(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createEmbedding(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createFile(l,p,c){return e(this,void 0,void 0,function*(){const f=yield s.createFile(l,p,c);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createFineTune(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createFineTune(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createImage(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createImage(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createImageEdit(l,p,c,f,d,g,b,v){return e(this,void 0,void 0,function*(){const m=yield s.createImageEdit(l,p,c,f,d,g,b,v);return n.createRequestFunction(m,r.default,i.BASE_PATH,o)})},createImageVariation(l,p,c,f,d,g){return e(this,void 0,void 0,function*(){const b=yield s.createImageVariation(l,p,c,f,d,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},createModeration(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createModeration(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createSearch(l,p,c){return e(this,void 0,void 0,function*(){const f=yield s.createSearch(l,p,c);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createTranscription(l,p,c,f,d,g,b){return e(this,void 0,void 0,function*(){const v=yield s.createTranscription(l,p,c,f,d,g,b);return n.createRequestFunction(v,r.default,i.BASE_PATH,o)})},createTranslation(l,p,c,f,d,g){return e(this,void 0,void 0,function*(){const b=yield s.createTranslation(l,p,c,f,d,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},deleteFile(l,p){return e(this,void 0,void 0,function*(){const c=yield s.deleteFile(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},deleteModel(l,p){return e(this,void 0,void 0,function*(){const c=yield s.deleteModel(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},downloadFile(l,p){return e(this,void 0,void 0,function*(){const c=yield s.downloadFile(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},listEngines(l){return e(this,void 0,void 0,function*(){const p=yield s.listEngines(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listFiles(l){return e(this,void 0,void 0,function*(){const p=yield s.listFiles(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listFineTuneEvents(l,p,c){return e(this,void 0,void 0,function*(){const f=yield s.listFineTuneEvents(l,p,c);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},listFineTunes(l){return e(this,void 0,void 0,function*(){const p=yield s.listFineTunes(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listModels(l){return e(this,void 0,void 0,function*(){const p=yield s.listModels(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},retrieveEngine(l,p){return e(this,void 0,void 0,function*(){const c=yield s.retrieveEngine(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},retrieveFile(l,p){return e(this,void 0,void 0,function*(){const c=yield s.retrieveFile(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},retrieveFineTune(l,p){return e(this,void 0,void 0,function*(){const c=yield s.retrieveFineTune(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},retrieveModel(l,p){return e(this,void 0,void 0,function*(){const c=yield s.retrieveModel(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})}}},t.OpenAIApiFactory=function(o,s,l){const p=t.OpenAIApiFp(o);return{cancelFineTune(c,f){return p.cancelFineTune(c,f).then(d=>d(l,s))},createAnswer(c,f){return p.createAnswer(c,f).then(d=>d(l,s))},createChatCompletion(c,f){return p.createChatCompletion(c,f).then(d=>d(l,s))},createClassification(c,f){return p.createClassification(c,f).then(d=>d(l,s))},createCompletion(c,f){return p.createCompletion(c,f).then(d=>d(l,s))},createEdit(c,f){return p.createEdit(c,f).then(d=>d(l,s))},createEmbedding(c,f){return p.createEmbedding(c,f).then(d=>d(l,s))},createFile(c,f,d){return p.createFile(c,f,d).then(g=>g(l,s))},createFineTune(c,f){return p.createFineTune(c,f).then(d=>d(l,s))},createImage(c,f){return p.createImage(c,f).then(d=>d(l,s))},createImageEdit(c,f,d,g,b,v,m,D){return p.createImageEdit(c,f,d,g,b,v,m,D).then(B=>B(l,s))},createImageVariation(c,f,d,g,b,v){return p.createImageVariation(c,f,d,g,b,v).then(m=>m(l,s))},createModeration(c,f){return p.createModeration(c,f).then(d=>d(l,s))},createSearch(c,f,d){return p.createSearch(c,f,d).then(g=>g(l,s))},createTranscription(c,f,d,g,b,v,m){return p.createTranscription(c,f,d,g,b,v,m).then(D=>D(l,s))},createTranslation(c,f,d,g,b,v){return p.createTranslation(c,f,d,g,b,v).then(m=>m(l,s))},deleteFile(c,f){return p.deleteFile(c,f).then(d=>d(l,s))},deleteModel(c,f){return p.deleteModel(c,f).then(d=>d(l,s))},downloadFile(c,f){return p.downloadFile(c,f).then(d=>d(l,s))},listEngines(c){return p.listEngines(c).then(f=>f(l,s))},listFiles(c){return p.listFiles(c).then(f=>f(l,s))},listFineTuneEvents(c,f,d){return p.listFineTuneEvents(c,f,d).then(g=>g(l,s))},listFineTunes(c){return p.listFineTunes(c).then(f=>f(l,s))},listModels(c){return p.listModels(c).then(f=>f(l,s))},retrieveEngine(c,f){return p.retrieveEngine(c,f).then(d=>d(l,s))},retrieveFile(c,f){return p.retrieveFile(c,f).then(d=>d(l,s))},retrieveFineTune(c,f){return p.retrieveFineTune(c,f).then(d=>d(l,s))},retrieveModel(c,f){return p.retrieveModel(c,f).then(d=>d(l,s))}}};class a extends i.BaseAPI{cancelFineTune(s,l){return t.OpenAIApiFp(this.configuration).cancelFineTune(s,l).then(p=>p(this.axios,this.basePath))}createAnswer(s,l){return t.OpenAIApiFp(this.configuration).createAnswer(s,l).then(p=>p(this.axios,this.basePath))}createChatCompletion(s,l){return t.OpenAIApiFp(this.configuration).createChatCompletion(s,l).then(p=>p(this.axios,this.basePath))}createClassification(s,l){return t.OpenAIApiFp(this.configuration).createClassification(s,l).then(p=>p(this.axios,this.basePath))}createCompletion(s,l){return t.OpenAIApiFp(this.configuration).createCompletion(s,l).then(p=>p(this.axios,this.basePath))}createEdit(s,l){return t.OpenAIApiFp(this.configuration).createEdit(s,l).then(p=>p(this.axios,this.basePath))}createEmbedding(s,l){return t.OpenAIApiFp(this.configuration).createEmbedding(s,l).then(p=>p(this.axios,this.basePath))}createFile(s,l,p){return t.OpenAIApiFp(this.configuration).createFile(s,l,p).then(c=>c(this.axios,this.basePath))}createFineTune(s,l){return t.OpenAIApiFp(this.configuration).createFineTune(s,l).then(p=>p(this.axios,this.basePath))}createImage(s,l){return t.OpenAIApiFp(this.configuration).createImage(s,l).then(p=>p(this.axios,this.basePath))}createImageEdit(s,l,p,c,f,d,g,b){return t.OpenAIApiFp(this.configuration).createImageEdit(s,l,p,c,f,d,g,b).then(v=>v(this.axios,this.basePath))}createImageVariation(s,l,p,c,f,d){return t.OpenAIApiFp(this.configuration).createImageVariation(s,l,p,c,f,d).then(g=>g(this.axios,this.basePath))}createModeration(s,l){return t.OpenAIApiFp(this.configuration).createModeration(s,l).then(p=>p(this.axios,this.basePath))}createSearch(s,l,p){return t.OpenAIApiFp(this.configuration).createSearch(s,l,p).then(c=>c(this.axios,this.basePath))}createTranscription(s,l,p,c,f,d,g){return t.OpenAIApiFp(this.configuration).createTranscription(s,l,p,c,f,d,g).then(b=>b(this.axios,this.basePath))}createTranslation(s,l,p,c,f,d){return t.OpenAIApiFp(this.configuration).createTranslation(s,l,p,c,f,d).then(g=>g(this.axios,this.basePath))}deleteFile(s,l){return t.OpenAIApiFp(this.configuration).deleteFile(s,l).then(p=>p(this.axios,this.basePath))}deleteModel(s,l){return t.OpenAIApiFp(this.configuration).deleteModel(s,l).then(p=>p(this.axios,this.basePath))}downloadFile(s,l){return t.OpenAIApiFp(this.configuration).downloadFile(s,l).then(p=>p(this.axios,this.basePath))}listEngines(s){return t.OpenAIApiFp(this.configuration).listEngines(s).then(l=>l(this.axios,this.basePath))}listFiles(s){return t.OpenAIApiFp(this.configuration).listFiles(s).then(l=>l(this.axios,this.basePath))}listFineTuneEvents(s,l,p){return t.OpenAIApiFp(this.configuration).listFineTuneEvents(s,l,p).then(c=>c(this.axios,this.basePath))}listFineTunes(s){return t.OpenAIApiFp(this.configuration).listFineTunes(s).then(l=>l(this.axios,this.basePath))}listModels(s){return t.OpenAIApiFp(this.configuration).listModels(s).then(l=>l(this.axios,this.basePath))}retrieveEngine(s,l){return t.OpenAIApiFp(this.configuration).retrieveEngine(s,l).then(p=>p(this.axios,this.basePath))}retrieveFile(s,l){return t.OpenAIApiFp(this.configuration).retrieveFile(s,l).then(p=>p(this.axios,this.basePath))}retrieveFineTune(s,l){return t.OpenAIApiFp(this.configuration).retrieveFineTune(s,l).then(p=>p(this.axios,this.basePath))}retrieveModel(s,l){return t.OpenAIApiFp(this.configuration).retrieveModel(s,l).then(p=>p(this.axios,this.basePath))}}t.OpenAIApi=a})(K1);var Co={};const i8="openai",a8="3.2.1",u8="Node.js library for the OpenAI API",s8={type:"git",url:"git@github.com:openai/openai-node.git"},o8=["openai","open","ai","gpt-3","gpt3"],l8="OpenAI",c8="MIT",f8="./dist/index.js",h8="./dist/index.d.ts",d8={build:"tsc --outDir dist/"},p8={axios:"^0.26.0","form-data":"^4.0.0"},g8={"@types/node":"^12.11.5",typescript:"^3.6.4"},v8={name:i8,version:a8,description:u8,repository:s8,keywords:o8,author:l8,license:c8,main:f8,types:h8,scripts:d8,dependencies:p8,devDependencies:g8};var lc,op;function m8(){return op||(op=1,lc=typeof self=="object"?self.FormData:window.FormData),lc}Object.defineProperty(Co,"__esModule",{value:!0});Co.Configuration=void 0;const _8=v8;class b8{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${_8.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=m8())}isJsonMime(e){const r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(r.test(e)||e.toLowerCase()==="application/json-patch+json")}}Co.Configuration=b8;(function(t){var e=gr&&gr.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=gr&&gr.__exportStar||function(n,i){for(var a in n)a!=="default"&&!i.hasOwnProperty(a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(K1,t),r(Co,t)})(Ic);function to(t){const e=new Ic.Configuration({apiKey:t});return new Ic.OpenAIApi(e)}async function D8(t,e,r="text-davinci-003"){return await t.createCompletion({model:r,prompt:e,temperature:.8,max_tokens:250})}async function y8(t,e,r="gpt-3.5-turbo"){return await t.createChatCompletion({model:r,messages:[{role:"user",content:e}],temperature:.8,max_tokens:250})}async function w8(t,e,r="text-embedding-ada-002"){return await t.createEmbedding({model:r,input:e})}async function E8(t){return await t.listModels()}const cc="preferredEmbeddingModel";function A8(){const t=ur(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[cc]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[cc]=a,r(a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[cc],r(""))}}}const Rc=A8();async function C8(t){const e=to(hi.get());return(await w8(e,t,Rc.get()||"text-embedding-ada-002")).data.data[0].embedding}function F8(t){let e,r,n,i;return{c(){e=q("div"),r=q("div"),n=q("p"),i=Se("Some features require OpenAI Key"),this.h()},l(a){e=W(a,"DIV",{class:!0});var o=R(e);r=W(o,"DIV",{class:!0});var s=R(r);n=W(s,"P",{class:!0});var l=R(n);i=Be(l,"Some features require OpenAI Key"),l.forEach(M),s.forEach(M),o.forEach(M),this.h()},h(){S(n,"class","text-xs"),S(r,"class","flex flex-col justify-start mr-5"),S(e,"class","w-full flex justify-center p-4")},m(a,o){se(a,e,o),T(e,r),T(r,n),T(n,i)},d(a){a&&M(e)}}}function S8(t){let e,r,n,i,a,o,s;return{c(){e=q("div"),r=q("div"),n=q("progress"),i=Ee(),a=q("div"),o=q("p"),s=Se("Embedding..."),this.h()},l(l){e=W(l,"DIV",{class:!0});var p=R(e);r=W(p,"DIV",{class:!0});var c=R(r);n=W(c,"PROGRESS",{class:!0}),R(n).forEach(M),c.forEach(M),i=Ae(p),a=W(p,"DIV",{class:!0});var f=R(a);o=W(f,"P",{class:!0});var d=R(o);s=Be(d,"Embedding..."),d.forEach(M),f.forEach(M),p.forEach(M),this.h()},h(){S(n,"class","progress progress-primary w-20"),S(r,"class","flex flex-col justify-start mr-5"),S(o,"class","text-xs"),S(a,"class","flex flex-col justify-start mr-5"),S(e,"class","w-full flex justify-center p-4")},m(l,p){se(l,e,p),T(e,r),T(r,n),T(e,i),T(e,a),T(a,o),T(o,s)},d(l){l&&M(e)}}}function B8(t){let e;function r(a,o){if(a[0])return S8;if(!a[1])return F8}let n=r(t),i=n&&n(t);return{c(){i&&i.c(),e=Ft()},l(a){i&&i.l(a),e=Ft()},m(a,o){i&&i.m(a,o),se(a,e,o)},p(a,[o]){n!==(n=r(a))&&(i&&i.d(1),i=n&&n(a),i&&(i.c(),i.m(e.parentNode,e)))},i:Me,o:Me,d(a){i&&i.d(a),a&&M(e)}}}function O8(t,e,r){let n,i;Ge(t,Da,c=>r(2,n=c)),Ge(t,hi,c=>r(1,i=c));let a=!1;function o(){return Object.keys(n).length}const s=Rr.subscribe(c=>{const f=Object.entries(c).filter(([d,g])=>!g);i&&f.length>0&&f.forEach(([d,g])=>{Da.update(b=>(b[d]=!1,b))})}),l=Da.subscribe(c=>{!!(hi.get()&&o()>0&&!a)&&(r(0,a=!0),p())});function p(){console.log("start embedding");const c=Object.keys(n)[0];Da.update(f=>(f[c]=!0,f)),C8(c).then(f=>{Rr.update(c,f);const d={...n};delete d[c],Da.set(d),o()>0?p():r(0,a=!1)})}return Lp(()=>{s(),l()}),[a,i]}class M8 extends Xe{constructor(e){super(),et(this,e,O8,B8,tt,{})}}function P8(t){let e,r,n,i,a,o,s;return{c(){e=ut("svg"),r=ut("circle"),n=ut("circle"),i=ut("circle"),a=ut("rect"),o=ut("rect"),s=ut("rect"),this.h()},l(l){e=st(l,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var p=R(e);r=st(p,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(r).forEach(M),n=st(p,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(n).forEach(M),i=st(p,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(i).forEach(M),a=st(p,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),R(a).forEach(M),o=st(p,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),R(o).forEach(M),s=st(p,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),R(s).forEach(M),p.forEach(M),this.h()},h(){S(r,"cx","5"),S(r,"cy","14"),S(r,"r","2"),S(r,"fill","rgba(255,255,255, 0.7)"),S(n,"cx","5"),S(n,"cy","25"),S(n,"r","2"),S(n,"fill","rgba(255,255,255, 0.7)"),S(i,"cx","5"),S(i,"cy","36"),S(i,"r","2"),S(i,"fill","rgba(255,255,255, 0.7)"),S(a,"x","10"),S(a,"y","12"),S(a,"width","35"),S(a,"height","4"),S(a,"fill","rgba(255,255,255, 0.7)"),S(o,"x","10"),S(o,"y","23"),S(o,"width","35"),S(o,"height","4"),S(o,"fill","rgba(255,255,255, 0.7)"),S(s,"x","10"),S(s,"y","34"),S(s,"width","35"),S(s,"height","4"),S(s,"fill","rgba(255,255,255, 0.7)"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"fill","rgba(255,255,255, 0.7)"),S(e,"class","h-6 w-6"),S(e,"viewBox","0 0 50 50")},m(l,p){se(l,e,p),T(e,r),T(e,n),T(e,i),T(e,a),T(e,o),T(e,s)},p:Me,i:Me,o:Me,d(l){l&&M(e)}}}class k8 extends Xe{constructor(e){super(),et(this,e,null,P8,tt,{})}}function T8(t){let e,r,n,i,a,o,s,l,p,c,f,d,g;return i=new k8({}),s=new Rp({}),{c(){e=q("div"),r=q("div"),n=q("button"),Ve(i.$$.fragment),a=Ee(),o=q("button"),Ve(s.$$.fragment),l=Ee(),p=q("button"),c=Se("Paste"),this.h()},l(b){e=W(b,"DIV",{class:!0});var v=R(e);r=W(v,"DIV",{class:!0});var m=R(r);n=W(m,"BUTTON",{class:!0});var D=R(n);je(i.$$.fragment,D),D.forEach(M),a=Ae(m),o=W(m,"BUTTON",{class:!0});var B=R(o);je(s.$$.fragment,B),B.forEach(M),m.forEach(M),l=Ae(v),p=W(v,"BUTTON",{class:!0});var w=R(p);c=Be(w,"Paste"),w.forEach(M),v.forEach(M),this.h()},h(){S(n,"class","btn btn-sm"),Qe(n,"btn-active",t[0]===Gn.List),S(o,"class","btn btn-sm"),Qe(o,"btn-active",t[0]===Gn.Map),S(r,"class","btn-group btn-group-horizontal w-full flex justify-end"),S(p,"class","btn btn-sm btn-info ml-2"),S(e,"class","flex justify-center p-2")},m(b,v){se(b,e,v),T(e,r),T(r,n),ze(i,n,null),T(r,a),T(r,o),ze(s,o,null),T(e,l),T(e,p),T(p,c),f=!0,d||(g=[_e(n,"click",t[2]),_e(o,"click",t[3]),_e(p,"click",t[1])],d=!0)},p(b,[v]){(!f||v&1)&&Qe(n,"btn-active",b[0]===Gn.List),(!f||v&1)&&Qe(o,"btn-active",b[0]===Gn.Map)},i(b){f||(fe(i.$$.fragment,b),fe(s.$$.fragment,b),f=!0)},o(b){ve(i.$$.fragment,b),ve(s.$$.fragment,b),f=!1},d(b){b&&M(e),qe(i),qe(s),d=!1,zt(g)}}}function I8(t,e,r){let n,i;Ge(t,Rr,l=>r(4,n=l)),Ge(t,Fs,l=>r(0,i=l));function a(){console.log("pasted"),navigator.clipboard.readText().then(l=>{const p=_u(l).map(f=>f[0]),c=n;p.forEach(f=>{c[f]||Rr.update(f,null)})})}return[i,a,()=>Fs.set(Gn.List),()=>Fs.set(Gn.Map)]}class x8 extends Xe{constructor(e){super(),et(this,e,I8,T8,tt,{})}}function N8(t){let e,r,n,i,a;return{c(){e=q("div"),r=q("button"),n=Se("Delete History"),this.h()},l(o){e=W(o,"DIV",{class:!0});var s=R(e);r=W(s,"BUTTON",{class:!0});var l=R(r);n=Be(l,"Delete History"),l.forEach(M),s.forEach(M),this.h()},h(){S(r,"class","btn btn-sm btn-error"),S(e,"class","flex justify-end p-2")},m(o,s){se(o,e,s),T(e,r),T(r,n),i||(a=_e(r,"click",t[0]),i=!0)},p:Me,i:Me,o:Me,d(o){o&&M(e),i=!1,a()}}}function L8(t){function e(){Qc.delete()}return[e]}class R8 extends Xe{constructor(e){super(),et(this,e,L8,N8,tt,{})}}function U8(t){let e,r;return e=new R8({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p:Me,i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function V8(t){let e,r;return e=new x8({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p:Me,i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function j8(t){let e,r,n,i;r=new Fy({});let a=(t[1].weightMode===gt.Circle||t[1].weightMode===gt.Pie||t[1].weightMode===gt.Ring)&&lp();return{c(){e=q("div"),Ve(r.$$.fragment),n=Ee(),a&&a.c()},l(o){e=W(o,"DIV",{});var s=R(e);je(r.$$.fragment,s),n=Ae(s),a&&a.l(s),s.forEach(M)},m(o,s){se(o,e,s),ze(r,e,null),T(e,n),a&&a.m(e,null),i=!0},p(o,s){o[1].weightMode===gt.Circle||o[1].weightMode===gt.Pie||o[1].weightMode===gt.Ring?a?s&2&&fe(a,1):(a=lp(),a.c(),fe(a,1),a.m(e,null)):a&&(ir(),ve(a,1,1,()=>{a=null}),ar())},i(o){i||(fe(r.$$.fragment,o),fe(a),i=!0)},o(o){ve(r.$$.fragment,o),ve(a),i=!1},d(o){o&&M(e),qe(r),a&&a.d()}}}function lp(t){let e,r;return e=new xy({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function z8(t){let e,r,n;return r=new qF({}),{c(){e=q("div"),Ve(r.$$.fragment),this.h()},l(i){e=W(i,"DIV",{class:!0});var a=R(e);je(r.$$.fragment,a),a.forEach(M),this.h()},h(){S(e,"class","flex flex-col h-full mt-10 overflow-hidden")},m(i,a){se(i,e,a),ze(r,e,null),n=!0},i(i){n||(fe(r.$$.fragment,i),n=!0)},o(i){ve(r.$$.fragment,i),n=!1},d(i){i&&M(e),qe(r)}}}function q8(t){let e,r,n;return r=new aS({}),{c(){e=q("div"),Ve(r.$$.fragment),this.h()},l(i){e=W(i,"DIV",{class:!0});var a=R(e);je(r.$$.fragment,a),a.forEach(M),this.h()},h(){S(e,"class","flex flex-col h-full mt-10 overflow-hidden")},m(i,a){se(i,e,a),ze(r,e,null),n=!0},i(i){n||(fe(r.$$.fragment,i),n=!0)},o(i){ve(r.$$.fragment,i),n=!1},d(i){i&&M(e),qe(r)}}}function W8(t){let e,r,n;return r=new LF({}),{c(){e=q("div"),Ve(r.$$.fragment),this.h()},l(i){e=W(i,"DIV",{class:!0});var a=R(e);je(r.$$.fragment,a),a.forEach(M),this.h()},h(){S(e,"class","flex flex-col h-full place-content-between")},m(i,a){se(i,e,a),ze(r,e,null),n=!0},i(i){n||(fe(r.$$.fragment,i),n=!0)},o(i){ve(r.$$.fragment,i),n=!1},d(i){i&&M(e),qe(r)}}}function H8(t){let e,r,n,i,a,o,s,l,p,c,f,d,g;i=new py({}),o=new M8({});const b=[j8,V8,U8],v=[];function m(C,F){return C[0]===Dr.Build?0:C[0]===Dr.Concept?1:C[0]===Dr.History?2:-1}~(l=m(t))&&(p=v[l]=b[l](t));const D=[W8,q8,z8],B=[];function w(C,F){return C[0]===Dr.Build?0:C[0]===Dr.Concept?1:C[0]===Dr.History?2:-1}return~(f=w(t))&&(d=B[f]=D[f](t)),{c(){e=q("div"),r=q("div"),n=q("div"),Ve(i.$$.fragment),a=Ee(),Ve(o.$$.fragment),s=Ee(),p&&p.c(),c=Ee(),d&&d.c(),this.h()},l(C){e=W(C,"DIV",{class:!0});var F=R(e);r=W(F,"DIV",{class:!0});var k=R(r);n=W(k,"DIV",{class:!0});var O=R(n);je(i.$$.fragment,O),a=Ae(O),je(o.$$.fragment,O),s=Ae(O),p&&p.l(O),O.forEach(M),k.forEach(M),c=Ae(F),d&&d.l(F),F.forEach(M),this.h()},h(){S(n,"class","w-full flex justify-between"),S(r,"class","w-full absolute top-0 z-10"),S(e,"class","relative w-full h-screen flex flex-col")},m(C,F){se(C,e,F),T(e,r),T(r,n),ze(i,n,null),T(n,a),ze(o,n,null),T(n,s),~l&&v[l].m(n,null),T(e,c),~f&&B[f].m(e,null),g=!0},p(C,[F]){let k=l;l=m(C),l===k?~l&&v[l].p(C,F):(p&&(ir(),ve(v[k],1,1,()=>{v[k]=null}),ar()),~l?(p=v[l],p?p.p(C,F):(p=v[l]=b[l](C),p.c()),fe(p,1),p.m(n,null)):p=null);let O=f;f=w(C),f!==O&&(d&&(ir(),ve(B[O],1,1,()=>{B[O]=null}),ar()),~f?(d=B[f],d||(d=B[f]=D[f](C),d.c()),fe(d,1),d.m(e,null)):d=null)},i(C){g||(fe(i.$$.fragment,C),fe(o.$$.fragment,C),fe(p),fe(d),g=!0)},o(C){ve(i.$$.fragment,C),ve(o.$$.fragment,C),ve(p),ve(d),g=!1},d(C){C&&M(e),qe(i),qe(o),~l&&v[l].d(),~f&&B[f].d()}}}function $8(t,e,r){let n,i;return Ge(t,gc,a=>r(0,n=a)),Ge(t,ot,a=>r(1,i=a)),[n,i]}class G8 extends Xe{constructor(e){super(),et(this,e,$8,H8,tt,{})}}var ro={},K8={get exports(){return ro},set exports(t){ro=t}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var r,n="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",s="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",p=500,c="__lodash_placeholder__",f=1,d=2,g=4,b=1,v=2,m=1,D=2,B=4,w=8,C=16,F=32,k=64,O=128,A=256,x=512,U=30,K="...",J=800,j=16,V=1,H=2,z=3,Q=1/0,X=9007199254740991,te=17976931348623157e292,le=0/0,be=4294967295,we=be-1,Oe=be>>>1,Pe=[["ary",O],["bind",m],["bindKey",D],["curry",w],["curryRight",C],["flip",x],["partial",F],["partialRight",k],["rearg",A]],Te="[object Arguments]",Re="[object Array]",Ue="[object AsyncFunction]",We="[object Boolean]",Ye="[object Date]",xe="[object DOMException]",Dt="[object Error]",Et="[object Function]",ht="[object GeneratorFunction]",lt="[object Map]",Pt="[object Number]",yr="[object Null]",It="[object Object]",hr="[object Promise]",Ze="[object Proxy]",Xt="[object RegExp]",Nt="[object Set]",Zr="[object String]",G="[object Symbol]",Z="[object Undefined]",ie="[object WeakMap]",de="[object WeakSet]",ue="[object ArrayBuffer]",me="[object DataView]",ce="[object Float32Array]",he="[object Float64Array]",ke="[object Int8Array]",He="[object Int16Array]",ct="[object Int32Array]",Ie="[object Uint8Array]",$t="[object Uint8ClampedArray]",Vt="[object Uint16Array]",er="[object Uint32Array]",Gt=/\b__p \+= '';/g,wr=/\b(__p \+=) '' \+/g,Kt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Er=/&(?:amp|lt|gt|quot|#39);/g,dr=/[&<>"']/g,pr=RegExp(Er.source),gn=RegExp(dr.source),vr=/<%-([\s\S]+?)%>/g,Bn=/<%([\s\S]+?)%>/g,Qn=/<%=([\s\S]+?)%>/g,Un=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vn=/^\w*$/,ea=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ri=/[\\^$.*+?()[\]{}|]/g,Ia=RegExp(Ri.source),Br=/^\s+/,tr=/\s/,xa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,pi=/\{\n\/\* \[wrapped with (.+)\] \*/,vn=/,? & /,Xn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ui=/[()=,{}\[\]\/\s]/,Na=/\\(\\)?/g,La=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ta=/\w*$/,Ra=/^[-+]0x[0-9a-f]+$/i,Ua=/^0b[01]+$/i,Va=/^\[object .+?Constructor\]$/,ja=/^0o[0-7]+$/i,za=/^(?:0|[1-9]\d*)$/,qa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gi=/($^)/,Wa=/['\n\r\u2028\u2029\\]/g,vi="\\ud800-\\udfff",Ha="\\u0300-\\u036f",$a="\\ufe20-\\ufe2f",Ga="\\u20d0-\\u20ff",ra=Ha+$a+Ga,jn="\\u2700-\\u27bf",Ar="a-z\\xdf-\\xf6\\xf8-\\xff",sr="\\xac\\xb1\\xd7\\xf7",Hr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Vi="\\u2000-\\u206f",ei=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zn="A-Z\\xc0-\\xd6\\xd8-\\xde",ji="\\ufe0e\\ufe0f",On=sr+Hr+Vi+ei,mn="['’]",Fo="["+vi+"]",Ka="["+On+"]",na="["+ra+"]",Ou="\\d+",y="["+jn+"]",P="["+Ar+"]",$="[^"+vi+On+Ou+jn+Ar+zn+"]",re="\\ud83c[\\udffb-\\udfff]",ge="(?:"+na+"|"+re+")",Ne="[^"+vi+"]",vt="(?:\\ud83c[\\udde6-\\uddff]){2}",At="[\\ud800-\\udbff][\\udc00-\\udfff]",Wt="["+zn+"]",or="\\u200d",of="(?:"+P+"|"+$+")",cg="(?:"+Wt+"|"+$+")",lf="(?:"+mn+"(?:d|ll|m|re|s|t|ve))?",cf="(?:"+mn+"(?:D|LL|M|RE|S|T|VE))?",ff=ge+"?",hf="["+ji+"]?",fg="(?:"+or+"(?:"+[Ne,vt,At].join("|")+")"+hf+ff+")*",hg="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",dg="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",df=hf+ff+fg,pg="(?:"+[y,vt,At].join("|")+")"+df,gg="(?:"+[Ne+na+"?",na,vt,At,Fo].join("|")+")",vg=RegExp(mn,"g"),mg=RegExp(na,"g"),So=RegExp(re+"(?="+re+")|"+gg+df,"g"),_g=RegExp([Wt+"?"+P+"+"+lf+"(?="+[Ka,Wt,"$"].join("|")+")",cg+"+"+cf+"(?="+[Ka,Wt+of,"$"].join("|")+")",Wt+"?"+of+"+"+lf,Wt+"+"+cf,dg,hg,Ou,pg].join("|"),"g"),bg=RegExp("["+or+vi+ra+ji+"]"),Dg=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,yg=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wg=-1,qt={};qt[ce]=qt[he]=qt[ke]=qt[He]=qt[ct]=qt[Ie]=qt[$t]=qt[Vt]=qt[er]=!0,qt[Te]=qt[Re]=qt[ue]=qt[We]=qt[me]=qt[Ye]=qt[Dt]=qt[Et]=qt[lt]=qt[Pt]=qt[It]=qt[Xt]=qt[Nt]=qt[Zr]=qt[ie]=!1;var jt={};jt[Te]=jt[Re]=jt[ue]=jt[me]=jt[We]=jt[Ye]=jt[ce]=jt[he]=jt[ke]=jt[He]=jt[ct]=jt[lt]=jt[Pt]=jt[It]=jt[Xt]=jt[Nt]=jt[Zr]=jt[G]=jt[Ie]=jt[$t]=jt[Vt]=jt[er]=!0,jt[Dt]=jt[Et]=jt[ie]=!1;var Eg={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ag={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Cg={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Fg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Sg=parseFloat,Bg=parseInt,pf=typeof gr=="object"&&gr&&gr.Object===Object&&gr,Og=typeof self=="object"&&self&&self.Object===Object&&self,Or=pf||Og||Function("return this")(),Bo=e&&!e.nodeType&&e,zi=Bo&&!0&&t&&!t.nodeType&&t,gf=zi&&zi.exports===Bo,Oo=gf&&pf.process,_n=function(){try{var ne=zi&&zi.require&&zi.require("util").types;return ne||Oo&&Oo.binding&&Oo.binding("util")}catch{}}(),vf=_n&&_n.isArrayBuffer,mf=_n&&_n.isDate,_f=_n&&_n.isMap,bf=_n&&_n.isRegExp,Df=_n&&_n.isSet,yf=_n&&_n.isTypedArray;function on(ne,pe,oe){switch(oe.length){case 0:return ne.call(pe);case 1:return ne.call(pe,oe[0]);case 2:return ne.call(pe,oe[0],oe[1]);case 3:return ne.call(pe,oe[0],oe[1],oe[2])}return ne.apply(pe,oe)}function Mg(ne,pe,oe,$e){for(var dt=-1,Mt=ne==null?0:ne.length;++dt<Mt;){var mr=ne[dt];pe($e,mr,oe(mr),ne)}return $e}function bn(ne,pe){for(var oe=-1,$e=ne==null?0:ne.length;++oe<$e&&pe(ne[oe],oe,ne)!==!1;);return ne}function Pg(ne,pe){for(var oe=ne==null?0:ne.length;oe--&&pe(ne[oe],oe,ne)!==!1;);return ne}function wf(ne,pe){for(var oe=-1,$e=ne==null?0:ne.length;++oe<$e;)if(!pe(ne[oe],oe,ne))return!1;return!0}function mi(ne,pe){for(var oe=-1,$e=ne==null?0:ne.length,dt=0,Mt=[];++oe<$e;){var mr=ne[oe];pe(mr,oe,ne)&&(Mt[dt++]=mr)}return Mt}function Mu(ne,pe){var oe=ne==null?0:ne.length;return!!oe&&ia(ne,pe,0)>-1}function Mo(ne,pe,oe){for(var $e=-1,dt=ne==null?0:ne.length;++$e<dt;)if(oe(pe,ne[$e]))return!0;return!1}function Ht(ne,pe){for(var oe=-1,$e=ne==null?0:ne.length,dt=Array($e);++oe<$e;)dt[oe]=pe(ne[oe],oe,ne);return dt}function _i(ne,pe){for(var oe=-1,$e=pe.length,dt=ne.length;++oe<$e;)ne[dt+oe]=pe[oe];return ne}function Po(ne,pe,oe,$e){var dt=-1,Mt=ne==null?0:ne.length;for($e&&Mt&&(oe=ne[++dt]);++dt<Mt;)oe=pe(oe,ne[dt],dt,ne);return oe}function kg(ne,pe,oe,$e){var dt=ne==null?0:ne.length;for($e&&dt&&(oe=ne[--dt]);dt--;)oe=pe(oe,ne[dt],dt,ne);return oe}function ko(ne,pe){for(var oe=-1,$e=ne==null?0:ne.length;++oe<$e;)if(pe(ne[oe],oe,ne))return!0;return!1}var Tg=To("length");function Ig(ne){return ne.split("")}function xg(ne){return ne.match(Xn)||[]}function Ef(ne,pe,oe){var $e;return oe(ne,function(dt,Mt,mr){if(pe(dt,Mt,mr))return $e=Mt,!1}),$e}function Pu(ne,pe,oe,$e){for(var dt=ne.length,Mt=oe+($e?1:-1);$e?Mt--:++Mt<dt;)if(pe(ne[Mt],Mt,ne))return Mt;return-1}function ia(ne,pe,oe){return pe===pe?Gg(ne,pe,oe):Pu(ne,Af,oe)}function Ng(ne,pe,oe,$e){for(var dt=oe-1,Mt=ne.length;++dt<Mt;)if($e(ne[dt],pe))return dt;return-1}function Af(ne){return ne!==ne}function Cf(ne,pe){var oe=ne==null?0:ne.length;return oe?xo(ne,pe)/oe:le}function To(ne){return function(pe){return pe==null?r:pe[ne]}}function Io(ne){return function(pe){return ne==null?r:ne[pe]}}function Ff(ne,pe,oe,$e,dt){return dt(ne,function(Mt,mr,Rt){oe=$e?($e=!1,Mt):pe(oe,Mt,mr,Rt)}),oe}function Lg(ne,pe){var oe=ne.length;for(ne.sort(pe);oe--;)ne[oe]=ne[oe].value;return ne}function xo(ne,pe){for(var oe,$e=-1,dt=ne.length;++$e<dt;){var Mt=pe(ne[$e]);Mt!==r&&(oe=oe===r?Mt:oe+Mt)}return oe}function No(ne,pe){for(var oe=-1,$e=Array(ne);++oe<ne;)$e[oe]=pe(oe);return $e}function Rg(ne,pe){return Ht(pe,function(oe){return[oe,ne[oe]]})}function Sf(ne){return ne&&ne.slice(0,Pf(ne)+1).replace(Br,"")}function ln(ne){return function(pe){return ne(pe)}}function Lo(ne,pe){return Ht(pe,function(oe){return ne[oe]})}function Ya(ne,pe){return ne.has(pe)}function Bf(ne,pe){for(var oe=-1,$e=ne.length;++oe<$e&&ia(pe,ne[oe],0)>-1;);return oe}function Of(ne,pe){for(var oe=ne.length;oe--&&ia(pe,ne[oe],0)>-1;);return oe}function Ug(ne,pe){for(var oe=ne.length,$e=0;oe--;)ne[oe]===pe&&++$e;return $e}var Vg=Io(Eg),jg=Io(Ag);function zg(ne){return"\\"+Fg[ne]}function qg(ne,pe){return ne==null?r:ne[pe]}function aa(ne){return bg.test(ne)}function Wg(ne){return Dg.test(ne)}function Hg(ne){for(var pe,oe=[];!(pe=ne.next()).done;)oe.push(pe.value);return oe}function Ro(ne){var pe=-1,oe=Array(ne.size);return ne.forEach(function($e,dt){oe[++pe]=[dt,$e]}),oe}function Mf(ne,pe){return function(oe){return ne(pe(oe))}}function bi(ne,pe){for(var oe=-1,$e=ne.length,dt=0,Mt=[];++oe<$e;){var mr=ne[oe];(mr===pe||mr===c)&&(ne[oe]=c,Mt[dt++]=oe)}return Mt}function ku(ne){var pe=-1,oe=Array(ne.size);return ne.forEach(function($e){oe[++pe]=$e}),oe}function $g(ne){var pe=-1,oe=Array(ne.size);return ne.forEach(function($e){oe[++pe]=[$e,$e]}),oe}function Gg(ne,pe,oe){for(var $e=oe-1,dt=ne.length;++$e<dt;)if(ne[$e]===pe)return $e;return-1}function Kg(ne,pe,oe){for(var $e=oe+1;$e--;)if(ne[$e]===pe)return $e;return $e}function ua(ne){return aa(ne)?Zg(ne):Tg(ne)}function Mn(ne){return aa(ne)?Jg(ne):Ig(ne)}function Pf(ne){for(var pe=ne.length;pe--&&tr.test(ne.charAt(pe)););return pe}var Yg=Io(Cg);function Zg(ne){for(var pe=So.lastIndex=0;So.test(ne);)++pe;return pe}function Jg(ne){return ne.match(So)||[]}function Qg(ne){return ne.match(_g)||[]}var Xg=function ne(pe){pe=pe==null?Or:sa.defaults(Or.Object(),pe,sa.pick(Or,yg));var oe=pe.Array,$e=pe.Date,dt=pe.Error,Mt=pe.Function,mr=pe.Math,Rt=pe.Object,Uo=pe.RegExp,ev=pe.String,Dn=pe.TypeError,Tu=oe.prototype,tv=Mt.prototype,oa=Rt.prototype,Iu=pe["__core-js_shared__"],xu=tv.toString,xt=oa.hasOwnProperty,rv=0,kf=function(){var u=/[^.]+$/.exec(Iu&&Iu.keys&&Iu.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),Nu=oa.toString,nv=xu.call(Rt),iv=Or._,av=Uo("^"+xu.call(xt).replace(Ri,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lu=gf?pe.Buffer:r,Di=pe.Symbol,Ru=pe.Uint8Array,Tf=Lu?Lu.allocUnsafe:r,Uu=Mf(Rt.getPrototypeOf,Rt),If=Rt.create,xf=oa.propertyIsEnumerable,Vu=Tu.splice,Nf=Di?Di.isConcatSpreadable:r,Za=Di?Di.iterator:r,qi=Di?Di.toStringTag:r,ju=function(){try{var u=Ki(Rt,"defineProperty");return u({},"",{}),u}catch{}}(),uv=pe.clearTimeout!==Or.clearTimeout&&pe.clearTimeout,sv=$e&&$e.now!==Or.Date.now&&$e.now,ov=pe.setTimeout!==Or.setTimeout&&pe.setTimeout,zu=mr.ceil,qu=mr.floor,Vo=Rt.getOwnPropertySymbols,lv=Lu?Lu.isBuffer:r,Lf=pe.isFinite,cv=Tu.join,fv=Mf(Rt.keys,Rt),_r=mr.max,Ur=mr.min,hv=$e.now,dv=pe.parseInt,Rf=mr.random,pv=Tu.reverse,jo=Ki(pe,"DataView"),Ja=Ki(pe,"Map"),zo=Ki(pe,"Promise"),la=Ki(pe,"Set"),Qa=Ki(pe,"WeakMap"),Xa=Ki(Rt,"create"),Wu=Qa&&new Qa,ca={},gv=Yi(jo),vv=Yi(Ja),mv=Yi(zo),_v=Yi(la),bv=Yi(Qa),Hu=Di?Di.prototype:r,eu=Hu?Hu.valueOf:r,Uf=Hu?Hu.toString:r;function N(u){if(rr(u)&&!pt(u)&&!(u instanceof wt)){if(u instanceof yn)return u;if(xt.call(u,"__wrapped__"))return Vh(u)}return new yn(u)}var fa=function(){function u(){}return function(h){if(!Yt(h))return{};if(If)return If(h);u.prototype=h;var _=new u;return u.prototype=r,_}}();function $u(){}function yn(u,h){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=r}N.templateSettings={escape:vr,evaluate:Bn,interpolate:Qn,variable:"",imports:{_:N}},N.prototype=$u.prototype,N.prototype.constructor=N,yn.prototype=fa($u.prototype),yn.prototype.constructor=yn;function wt(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=be,this.__views__=[]}function Dv(){var u=new wt(this.__wrapped__);return u.__actions__=Jr(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Jr(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Jr(this.__views__),u}function yv(){if(this.__filtered__){var u=new wt(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function wv(){var u=this.__wrapped__.value(),h=this.__dir__,_=pt(u),E=h<0,I=_?u.length:0,L=Im(0,I,this.__views__),Y=L.start,ee=L.end,ae=ee-Y,De=E?ee:Y-1,ye=this.__iteratees__,Fe=ye.length,Le=0,Ke=Ur(ae,this.__takeCount__);if(!_||!E&&I==ae&&Ke==ae)return lh(u,this.__actions__);var it=[];e:for(;ae--&&Le<Ke;){De+=h;for(var _t=-1,at=u[De];++_t<Fe;){var yt=ye[_t],Ct=yt.iteratee,hn=yt.type,Kr=Ct(at);if(hn==H)at=Kr;else if(!Kr){if(hn==V)continue e;break e}}it[Le++]=at}return it}wt.prototype=fa($u.prototype),wt.prototype.constructor=wt;function Wi(u){var h=-1,_=u==null?0:u.length;for(this.clear();++h<_;){var E=u[h];this.set(E[0],E[1])}}function Ev(){this.__data__=Xa?Xa(null):{},this.size=0}function Av(u){var h=this.has(u)&&delete this.__data__[u];return this.size-=h?1:0,h}function Cv(u){var h=this.__data__;if(Xa){var _=h[u];return _===l?r:_}return xt.call(h,u)?h[u]:r}function Fv(u){var h=this.__data__;return Xa?h[u]!==r:xt.call(h,u)}function Sv(u,h){var _=this.__data__;return this.size+=this.has(u)?0:1,_[u]=Xa&&h===r?l:h,this}Wi.prototype.clear=Ev,Wi.prototype.delete=Av,Wi.prototype.get=Cv,Wi.prototype.has=Fv,Wi.prototype.set=Sv;function ti(u){var h=-1,_=u==null?0:u.length;for(this.clear();++h<_;){var E=u[h];this.set(E[0],E[1])}}function Bv(){this.__data__=[],this.size=0}function Ov(u){var h=this.__data__,_=Gu(h,u);if(_<0)return!1;var E=h.length-1;return _==E?h.pop():Vu.call(h,_,1),--this.size,!0}function Mv(u){var h=this.__data__,_=Gu(h,u);return _<0?r:h[_][1]}function Pv(u){return Gu(this.__data__,u)>-1}function kv(u,h){var _=this.__data__,E=Gu(_,u);return E<0?(++this.size,_.push([u,h])):_[E][1]=h,this}ti.prototype.clear=Bv,ti.prototype.delete=Ov,ti.prototype.get=Mv,ti.prototype.has=Pv,ti.prototype.set=kv;function ri(u){var h=-1,_=u==null?0:u.length;for(this.clear();++h<_;){var E=u[h];this.set(E[0],E[1])}}function Tv(){this.size=0,this.__data__={hash:new Wi,map:new(Ja||ti),string:new Wi}}function Iv(u){var h=as(this,u).delete(u);return this.size-=h?1:0,h}function xv(u){return as(this,u).get(u)}function Nv(u){return as(this,u).has(u)}function Lv(u,h){var _=as(this,u),E=_.size;return _.set(u,h),this.size+=_.size==E?0:1,this}ri.prototype.clear=Tv,ri.prototype.delete=Iv,ri.prototype.get=xv,ri.prototype.has=Nv,ri.prototype.set=Lv;function Hi(u){var h=-1,_=u==null?0:u.length;for(this.__data__=new ri;++h<_;)this.add(u[h])}function Rv(u){return this.__data__.set(u,l),this}function Uv(u){return this.__data__.has(u)}Hi.prototype.add=Hi.prototype.push=Rv,Hi.prototype.has=Uv;function Pn(u){var h=this.__data__=new ti(u);this.size=h.size}function Vv(){this.__data__=new ti,this.size=0}function jv(u){var h=this.__data__,_=h.delete(u);return this.size=h.size,_}function zv(u){return this.__data__.get(u)}function qv(u){return this.__data__.has(u)}function Wv(u,h){var _=this.__data__;if(_ instanceof ti){var E=_.__data__;if(!Ja||E.length<i-1)return E.push([u,h]),this.size=++_.size,this;_=this.__data__=new ri(E)}return _.set(u,h),this.size=_.size,this}Pn.prototype.clear=Vv,Pn.prototype.delete=jv,Pn.prototype.get=zv,Pn.prototype.has=qv,Pn.prototype.set=Wv;function Vf(u,h){var _=pt(u),E=!_&&Zi(u),I=!_&&!E&&Ci(u),L=!_&&!E&&!I&&ga(u),Y=_||E||I||L,ee=Y?No(u.length,ev):[],ae=ee.length;for(var De in u)(h||xt.call(u,De))&&!(Y&&(De=="length"||I&&(De=="offset"||De=="parent")||L&&(De=="buffer"||De=="byteLength"||De=="byteOffset")||ui(De,ae)))&&ee.push(De);return ee}function jf(u){var h=u.length;return h?u[Xo(0,h-1)]:r}function Hv(u,h){return us(Jr(u),$i(h,0,u.length))}function $v(u){return us(Jr(u))}function qo(u,h,_){(_!==r&&!kn(u[h],_)||_===r&&!(h in u))&&ni(u,h,_)}function tu(u,h,_){var E=u[h];(!(xt.call(u,h)&&kn(E,_))||_===r&&!(h in u))&&ni(u,h,_)}function Gu(u,h){for(var _=u.length;_--;)if(kn(u[_][0],h))return _;return-1}function Gv(u,h,_,E){return yi(u,function(I,L,Y){h(E,I,_(I),Y)}),E}function zf(u,h){return u&&Wn(h,Cr(h),u)}function Kv(u,h){return u&&Wn(h,Xr(h),u)}function ni(u,h,_){h=="__proto__"&&ju?ju(u,h,{configurable:!0,enumerable:!0,value:_,writable:!0}):u[h]=_}function Wo(u,h){for(var _=-1,E=h.length,I=oe(E),L=u==null;++_<E;)I[_]=L?r:Al(u,h[_]);return I}function $i(u,h,_){return u===u&&(_!==r&&(u=u<=_?u:_),h!==r&&(u=u>=h?u:h)),u}function wn(u,h,_,E,I,L){var Y,ee=h&f,ae=h&d,De=h&g;if(_&&(Y=I?_(u,E,I,L):_(u)),Y!==r)return Y;if(!Yt(u))return u;var ye=pt(u);if(ye){if(Y=Nm(u),!ee)return Jr(u,Y)}else{var Fe=Vr(u),Le=Fe==Et||Fe==ht;if(Ci(u))return hh(u,ee);if(Fe==It||Fe==Te||Le&&!I){if(Y=ae||Le?{}:Ph(u),!ee)return ae?Cm(u,Kv(Y,u)):Am(u,zf(Y,u))}else{if(!jt[Fe])return I?u:{};Y=Lm(u,Fe,ee)}}L||(L=new Pn);var Ke=L.get(u);if(Ke)return Ke;L.set(u,Y),u0(u)?u.forEach(function(at){Y.add(wn(at,h,_,at,u,L))}):i0(u)&&u.forEach(function(at,yt){Y.set(yt,wn(at,h,_,yt,u,L))});var it=De?ae?cl:ll:ae?Xr:Cr,_t=ye?r:it(u);return bn(_t||u,function(at,yt){_t&&(yt=at,at=u[yt]),tu(Y,yt,wn(at,h,_,yt,u,L))}),Y}function Yv(u){var h=Cr(u);return function(_){return qf(_,u,h)}}function qf(u,h,_){var E=_.length;if(u==null)return!E;for(u=Rt(u);E--;){var I=_[E],L=h[I],Y=u[I];if(Y===r&&!(I in u)||!L(Y))return!1}return!0}function Wf(u,h,_){if(typeof u!="function")throw new Dn(o);return ou(function(){u.apply(r,_)},h)}function ru(u,h,_,E){var I=-1,L=Mu,Y=!0,ee=u.length,ae=[],De=h.length;if(!ee)return ae;_&&(h=Ht(h,ln(_))),E?(L=Mo,Y=!1):h.length>=i&&(L=Ya,Y=!1,h=new Hi(h));e:for(;++I<ee;){var ye=u[I],Fe=_==null?ye:_(ye);if(ye=E||ye!==0?ye:0,Y&&Fe===Fe){for(var Le=De;Le--;)if(h[Le]===Fe)continue e;ae.push(ye)}else L(h,Fe,E)||ae.push(ye)}return ae}var yi=mh(qn),Hf=mh($o,!0);function Zv(u,h){var _=!0;return yi(u,function(E,I,L){return _=!!h(E,I,L),_}),_}function Ku(u,h,_){for(var E=-1,I=u.length;++E<I;){var L=u[E],Y=h(L);if(Y!=null&&(ee===r?Y===Y&&!fn(Y):_(Y,ee)))var ee=Y,ae=L}return ae}function Jv(u,h,_,E){var I=u.length;for(_=mt(_),_<0&&(_=-_>I?0:I+_),E=E===r||E>I?I:mt(E),E<0&&(E+=I),E=_>E?0:o0(E);_<E;)u[_++]=h;return u}function $f(u,h){var _=[];return yi(u,function(E,I,L){h(E,I,L)&&_.push(E)}),_}function Mr(u,h,_,E,I){var L=-1,Y=u.length;for(_||(_=Um),I||(I=[]);++L<Y;){var ee=u[L];h>0&&_(ee)?h>1?Mr(ee,h-1,_,E,I):_i(I,ee):E||(I[I.length]=ee)}return I}var Ho=_h(),Gf=_h(!0);function qn(u,h){return u&&Ho(u,h,Cr)}function $o(u,h){return u&&Gf(u,h,Cr)}function Yu(u,h){return mi(h,function(_){return si(u[_])})}function Gi(u,h){h=Ei(h,u);for(var _=0,E=h.length;u!=null&&_<E;)u=u[Hn(h[_++])];return _&&_==E?u:r}function Kf(u,h,_){var E=h(u);return pt(u)?E:_i(E,_(u))}function $r(u){return u==null?u===r?Z:yr:qi&&qi in Rt(u)?Tm(u):$m(u)}function Go(u,h){return u>h}function Qv(u,h){return u!=null&&xt.call(u,h)}function Xv(u,h){return u!=null&&h in Rt(u)}function em(u,h,_){return u>=Ur(h,_)&&u<_r(h,_)}function Ko(u,h,_){for(var E=_?Mo:Mu,I=u[0].length,L=u.length,Y=L,ee=oe(L),ae=1/0,De=[];Y--;){var ye=u[Y];Y&&h&&(ye=Ht(ye,ln(h))),ae=Ur(ye.length,ae),ee[Y]=!_&&(h||I>=120&&ye.length>=120)?new Hi(Y&&ye):r}ye=u[0];var Fe=-1,Le=ee[0];e:for(;++Fe<I&&De.length<ae;){var Ke=ye[Fe],it=h?h(Ke):Ke;if(Ke=_||Ke!==0?Ke:0,!(Le?Ya(Le,it):E(De,it,_))){for(Y=L;--Y;){var _t=ee[Y];if(!(_t?Ya(_t,it):E(u[Y],it,_)))continue e}Le&&Le.push(it),De.push(Ke)}}return De}function tm(u,h,_,E){return qn(u,function(I,L,Y){h(E,_(I),L,Y)}),E}function nu(u,h,_){h=Ei(h,u),u=xh(u,h);var E=u==null?u:u[Hn(An(h))];return E==null?r:on(E,u,_)}function Yf(u){return rr(u)&&$r(u)==Te}function rm(u){return rr(u)&&$r(u)==ue}function nm(u){return rr(u)&&$r(u)==Ye}function iu(u,h,_,E,I){return u===h?!0:u==null||h==null||!rr(u)&&!rr(h)?u!==u&&h!==h:im(u,h,_,E,iu,I)}function im(u,h,_,E,I,L){var Y=pt(u),ee=pt(h),ae=Y?Re:Vr(u),De=ee?Re:Vr(h);ae=ae==Te?It:ae,De=De==Te?It:De;var ye=ae==It,Fe=De==It,Le=ae==De;if(Le&&Ci(u)){if(!Ci(h))return!1;Y=!0,ye=!1}if(Le&&!ye)return L||(L=new Pn),Y||ga(u)?Bh(u,h,_,E,I,L):Pm(u,h,ae,_,E,I,L);if(!(_&b)){var Ke=ye&&xt.call(u,"__wrapped__"),it=Fe&&xt.call(h,"__wrapped__");if(Ke||it){var _t=Ke?u.value():u,at=it?h.value():h;return L||(L=new Pn),I(_t,at,_,E,L)}}return Le?(L||(L=new Pn),km(u,h,_,E,I,L)):!1}function am(u){return rr(u)&&Vr(u)==lt}function Yo(u,h,_,E){var I=_.length,L=I,Y=!E;if(u==null)return!L;for(u=Rt(u);I--;){var ee=_[I];if(Y&&ee[2]?ee[1]!==u[ee[0]]:!(ee[0]in u))return!1}for(;++I<L;){ee=_[I];var ae=ee[0],De=u[ae],ye=ee[1];if(Y&&ee[2]){if(De===r&&!(ae in u))return!1}else{var Fe=new Pn;if(E)var Le=E(De,ye,ae,u,h,Fe);if(!(Le===r?iu(ye,De,b|v,E,Fe):Le))return!1}}return!0}function Zf(u){if(!Yt(u)||jm(u))return!1;var h=si(u)?av:Va;return h.test(Yi(u))}function um(u){return rr(u)&&$r(u)==Xt}function sm(u){return rr(u)&&Vr(u)==Nt}function om(u){return rr(u)&&hs(u.length)&&!!qt[$r(u)]}function Jf(u){return typeof u=="function"?u:u==null?en:typeof u=="object"?pt(u)?eh(u[0],u[1]):Xf(u):b0(u)}function Zo(u){if(!su(u))return fv(u);var h=[];for(var _ in Rt(u))xt.call(u,_)&&_!="constructor"&&h.push(_);return h}function lm(u){if(!Yt(u))return Hm(u);var h=su(u),_=[];for(var E in u)E=="constructor"&&(h||!xt.call(u,E))||_.push(E);return _}function Jo(u,h){return u<h}function Qf(u,h){var _=-1,E=Qr(u)?oe(u.length):[];return yi(u,function(I,L,Y){E[++_]=h(I,L,Y)}),E}function Xf(u){var h=hl(u);return h.length==1&&h[0][2]?Th(h[0][0],h[0][1]):function(_){return _===u||Yo(_,u,h)}}function eh(u,h){return pl(u)&&kh(h)?Th(Hn(u),h):function(_){var E=Al(_,u);return E===r&&E===h?Cl(_,u):iu(h,E,b|v)}}function Zu(u,h,_,E,I){u!==h&&Ho(h,function(L,Y){if(I||(I=new Pn),Yt(L))cm(u,h,Y,_,Zu,E,I);else{var ee=E?E(vl(u,Y),L,Y+"",u,h,I):r;ee===r&&(ee=L),qo(u,Y,ee)}},Xr)}function cm(u,h,_,E,I,L,Y){var ee=vl(u,_),ae=vl(h,_),De=Y.get(ae);if(De){qo(u,_,De);return}var ye=L?L(ee,ae,_+"",u,h,Y):r,Fe=ye===r;if(Fe){var Le=pt(ae),Ke=!Le&&Ci(ae),it=!Le&&!Ke&&ga(ae);ye=ae,Le||Ke||it?pt(ee)?ye=ee:lr(ee)?ye=Jr(ee):Ke?(Fe=!1,ye=hh(ae,!0)):it?(Fe=!1,ye=dh(ae,!0)):ye=[]:lu(ae)||Zi(ae)?(ye=ee,Zi(ee)?ye=l0(ee):(!Yt(ee)||si(ee))&&(ye=Ph(ae))):Fe=!1}Fe&&(Y.set(ae,ye),I(ye,ae,E,L,Y),Y.delete(ae)),qo(u,_,ye)}function th(u,h){var _=u.length;if(_)return h+=h<0?_:0,ui(h,_)?u[h]:r}function rh(u,h,_){h.length?h=Ht(h,function(L){return pt(L)?function(Y){return Gi(Y,L.length===1?L[0]:L)}:L}):h=[en];var E=-1;h=Ht(h,ln(rt()));var I=Qf(u,function(L,Y,ee){var ae=Ht(h,function(De){return De(L)});return{criteria:ae,index:++E,value:L}});return Lg(I,function(L,Y){return Em(L,Y,_)})}function fm(u,h){return nh(u,h,function(_,E){return Cl(u,E)})}function nh(u,h,_){for(var E=-1,I=h.length,L={};++E<I;){var Y=h[E],ee=Gi(u,Y);_(ee,Y)&&au(L,Ei(Y,u),ee)}return L}function hm(u){return function(h){return Gi(h,u)}}function Qo(u,h,_,E){var I=E?Ng:ia,L=-1,Y=h.length,ee=u;for(u===h&&(h=Jr(h)),_&&(ee=Ht(u,ln(_)));++L<Y;)for(var ae=0,De=h[L],ye=_?_(De):De;(ae=I(ee,ye,ae,E))>-1;)ee!==u&&Vu.call(ee,ae,1),Vu.call(u,ae,1);return u}function ih(u,h){for(var _=u?h.length:0,E=_-1;_--;){var I=h[_];if(_==E||I!==L){var L=I;ui(I)?Vu.call(u,I,1):rl(u,I)}}return u}function Xo(u,h){return u+qu(Rf()*(h-u+1))}function dm(u,h,_,E){for(var I=-1,L=_r(zu((h-u)/(_||1)),0),Y=oe(L);L--;)Y[E?L:++I]=u,u+=_;return Y}function el(u,h){var _="";if(!u||h<1||h>X)return _;do h%2&&(_+=u),h=qu(h/2),h&&(u+=u);while(h);return _}function bt(u,h){return ml(Ih(u,h,en),u+"")}function pm(u){return jf(va(u))}function gm(u,h){var _=va(u);return us(_,$i(h,0,_.length))}function au(u,h,_,E){if(!Yt(u))return u;h=Ei(h,u);for(var I=-1,L=h.length,Y=L-1,ee=u;ee!=null&&++I<L;){var ae=Hn(h[I]),De=_;if(ae==="__proto__"||ae==="constructor"||ae==="prototype")return u;if(I!=Y){var ye=ee[ae];De=E?E(ye,ae,ee):r,De===r&&(De=Yt(ye)?ye:ui(h[I+1])?[]:{})}tu(ee,ae,De),ee=ee[ae]}return u}var ah=Wu?function(u,h){return Wu.set(u,h),u}:en,vm=ju?function(u,h){return ju(u,"toString",{configurable:!0,enumerable:!1,value:Sl(h),writable:!0})}:en;function mm(u){return us(va(u))}function En(u,h,_){var E=-1,I=u.length;h<0&&(h=-h>I?0:I+h),_=_>I?I:_,_<0&&(_+=I),I=h>_?0:_-h>>>0,h>>>=0;for(var L=oe(I);++E<I;)L[E]=u[E+h];return L}function _m(u,h){var _;return yi(u,function(E,I,L){return _=h(E,I,L),!_}),!!_}function Ju(u,h,_){var E=0,I=u==null?E:u.length;if(typeof h=="number"&&h===h&&I<=Oe){for(;E<I;){var L=E+I>>>1,Y=u[L];Y!==null&&!fn(Y)&&(_?Y<=h:Y<h)?E=L+1:I=L}return I}return tl(u,h,en,_)}function tl(u,h,_,E){var I=0,L=u==null?0:u.length;if(L===0)return 0;h=_(h);for(var Y=h!==h,ee=h===null,ae=fn(h),De=h===r;I<L;){var ye=qu((I+L)/2),Fe=_(u[ye]),Le=Fe!==r,Ke=Fe===null,it=Fe===Fe,_t=fn(Fe);if(Y)var at=E||it;else De?at=it&&(E||Le):ee?at=it&&Le&&(E||!Ke):ae?at=it&&Le&&!Ke&&(E||!_t):Ke||_t?at=!1:at=E?Fe<=h:Fe<h;at?I=ye+1:L=ye}return Ur(L,we)}function uh(u,h){for(var _=-1,E=u.length,I=0,L=[];++_<E;){var Y=u[_],ee=h?h(Y):Y;if(!_||!kn(ee,ae)){var ae=ee;L[I++]=Y===0?0:Y}}return L}function sh(u){return typeof u=="number"?u:fn(u)?le:+u}function cn(u){if(typeof u=="string")return u;if(pt(u))return Ht(u,cn)+"";if(fn(u))return Uf?Uf.call(u):"";var h=u+"";return h=="0"&&1/u==-Q?"-0":h}function wi(u,h,_){var E=-1,I=Mu,L=u.length,Y=!0,ee=[],ae=ee;if(_)Y=!1,I=Mo;else if(L>=i){var De=h?null:Om(u);if(De)return ku(De);Y=!1,I=Ya,ae=new Hi}else ae=h?[]:ee;e:for(;++E<L;){var ye=u[E],Fe=h?h(ye):ye;if(ye=_||ye!==0?ye:0,Y&&Fe===Fe){for(var Le=ae.length;Le--;)if(ae[Le]===Fe)continue e;h&&ae.push(Fe),ee.push(ye)}else I(ae,Fe,_)||(ae!==ee&&ae.push(Fe),ee.push(ye))}return ee}function rl(u,h){return h=Ei(h,u),u=xh(u,h),u==null||delete u[Hn(An(h))]}function oh(u,h,_,E){return au(u,h,_(Gi(u,h)),E)}function Qu(u,h,_,E){for(var I=u.length,L=E?I:-1;(E?L--:++L<I)&&h(u[L],L,u););return _?En(u,E?0:L,E?L+1:I):En(u,E?L+1:0,E?I:L)}function lh(u,h){var _=u;return _ instanceof wt&&(_=_.value()),Po(h,function(E,I){return I.func.apply(I.thisArg,_i([E],I.args))},_)}function nl(u,h,_){var E=u.length;if(E<2)return E?wi(u[0]):[];for(var I=-1,L=oe(E);++I<E;)for(var Y=u[I],ee=-1;++ee<E;)ee!=I&&(L[I]=ru(L[I]||Y,u[ee],h,_));return wi(Mr(L,1),h,_)}function ch(u,h,_){for(var E=-1,I=u.length,L=h.length,Y={};++E<I;){var ee=E<L?h[E]:r;_(Y,u[E],ee)}return Y}function il(u){return lr(u)?u:[]}function al(u){return typeof u=="function"?u:en}function Ei(u,h){return pt(u)?u:pl(u,h)?[u]:Uh(kt(u))}var bm=bt;function Ai(u,h,_){var E=u.length;return _=_===r?E:_,!h&&_>=E?u:En(u,h,_)}var fh=uv||function(u){return Or.clearTimeout(u)};function hh(u,h){if(h)return u.slice();var _=u.length,E=Tf?Tf(_):new u.constructor(_);return u.copy(E),E}function ul(u){var h=new u.constructor(u.byteLength);return new Ru(h).set(new Ru(u)),h}function Dm(u,h){var _=h?ul(u.buffer):u.buffer;return new u.constructor(_,u.byteOffset,u.byteLength)}function ym(u){var h=new u.constructor(u.source,ta.exec(u));return h.lastIndex=u.lastIndex,h}function wm(u){return eu?Rt(eu.call(u)):{}}function dh(u,h){var _=h?ul(u.buffer):u.buffer;return new u.constructor(_,u.byteOffset,u.length)}function ph(u,h){if(u!==h){var _=u!==r,E=u===null,I=u===u,L=fn(u),Y=h!==r,ee=h===null,ae=h===h,De=fn(h);if(!ee&&!De&&!L&&u>h||L&&Y&&ae&&!ee&&!De||E&&Y&&ae||!_&&ae||!I)return 1;if(!E&&!L&&!De&&u<h||De&&_&&I&&!E&&!L||ee&&_&&I||!Y&&I||!ae)return-1}return 0}function Em(u,h,_){for(var E=-1,I=u.criteria,L=h.criteria,Y=I.length,ee=_.length;++E<Y;){var ae=ph(I[E],L[E]);if(ae){if(E>=ee)return ae;var De=_[E];return ae*(De=="desc"?-1:1)}}return u.index-h.index}function gh(u,h,_,E){for(var I=-1,L=u.length,Y=_.length,ee=-1,ae=h.length,De=_r(L-Y,0),ye=oe(ae+De),Fe=!E;++ee<ae;)ye[ee]=h[ee];for(;++I<Y;)(Fe||I<L)&&(ye[_[I]]=u[I]);for(;De--;)ye[ee++]=u[I++];return ye}function vh(u,h,_,E){for(var I=-1,L=u.length,Y=-1,ee=_.length,ae=-1,De=h.length,ye=_r(L-ee,0),Fe=oe(ye+De),Le=!E;++I<ye;)Fe[I]=u[I];for(var Ke=I;++ae<De;)Fe[Ke+ae]=h[ae];for(;++Y<ee;)(Le||I<L)&&(Fe[Ke+_[Y]]=u[I++]);return Fe}function Jr(u,h){var _=-1,E=u.length;for(h||(h=oe(E));++_<E;)h[_]=u[_];return h}function Wn(u,h,_,E){var I=!_;_||(_={});for(var L=-1,Y=h.length;++L<Y;){var ee=h[L],ae=E?E(_[ee],u[ee],ee,_,u):r;ae===r&&(ae=u[ee]),I?ni(_,ee,ae):tu(_,ee,ae)}return _}function Am(u,h){return Wn(u,dl(u),h)}function Cm(u,h){return Wn(u,Oh(u),h)}function Xu(u,h){return function(_,E){var I=pt(_)?Mg:Gv,L=h?h():{};return I(_,u,rt(E,2),L)}}function ha(u){return bt(function(h,_){var E=-1,I=_.length,L=I>1?_[I-1]:r,Y=I>2?_[2]:r;for(L=u.length>3&&typeof L=="function"?(I--,L):r,Y&&Gr(_[0],_[1],Y)&&(L=I<3?r:L,I=1),h=Rt(h);++E<I;){var ee=_[E];ee&&u(h,ee,E,L)}return h})}function mh(u,h){return function(_,E){if(_==null)return _;if(!Qr(_))return u(_,E);for(var I=_.length,L=h?I:-1,Y=Rt(_);(h?L--:++L<I)&&E(Y[L],L,Y)!==!1;);return _}}function _h(u){return function(h,_,E){for(var I=-1,L=Rt(h),Y=E(h),ee=Y.length;ee--;){var ae=Y[u?ee:++I];if(_(L[ae],ae,L)===!1)break}return h}}function Fm(u,h,_){var E=h&m,I=uu(u);function L(){var Y=this&&this!==Or&&this instanceof L?I:u;return Y.apply(E?_:this,arguments)}return L}function bh(u){return function(h){h=kt(h);var _=aa(h)?Mn(h):r,E=_?_[0]:h.charAt(0),I=_?Ai(_,1).join(""):h.slice(1);return E[u]()+I}}function da(u){return function(h){return Po(m0(v0(h).replace(vg,"")),u,"")}}function uu(u){return function(){var h=arguments;switch(h.length){case 0:return new u;case 1:return new u(h[0]);case 2:return new u(h[0],h[1]);case 3:return new u(h[0],h[1],h[2]);case 4:return new u(h[0],h[1],h[2],h[3]);case 5:return new u(h[0],h[1],h[2],h[3],h[4]);case 6:return new u(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new u(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var _=fa(u.prototype),E=u.apply(_,h);return Yt(E)?E:_}}function Sm(u,h,_){var E=uu(u);function I(){for(var L=arguments.length,Y=oe(L),ee=L,ae=pa(I);ee--;)Y[ee]=arguments[ee];var De=L<3&&Y[0]!==ae&&Y[L-1]!==ae?[]:bi(Y,ae);if(L-=De.length,L<_)return Ah(u,h,es,I.placeholder,r,Y,De,r,r,_-L);var ye=this&&this!==Or&&this instanceof I?E:u;return on(ye,this,Y)}return I}function Dh(u){return function(h,_,E){var I=Rt(h);if(!Qr(h)){var L=rt(_,3);h=Cr(h),_=function(ee){return L(I[ee],ee,I)}}var Y=u(h,_,E);return Y>-1?I[L?h[Y]:Y]:r}}function yh(u){return ai(function(h){var _=h.length,E=_,I=yn.prototype.thru;for(u&&h.reverse();E--;){var L=h[E];if(typeof L!="function")throw new Dn(o);if(I&&!Y&&is(L)=="wrapper")var Y=new yn([],!0)}for(E=Y?E:_;++E<_;){L=h[E];var ee=is(L),ae=ee=="wrapper"?fl(L):r;ae&&gl(ae[0])&&ae[1]==(O|w|F|A)&&!ae[4].length&&ae[9]==1?Y=Y[is(ae[0])].apply(Y,ae[3]):Y=L.length==1&&gl(L)?Y[ee]():Y.thru(L)}return function(){var De=arguments,ye=De[0];if(Y&&De.length==1&&pt(ye))return Y.plant(ye).value();for(var Fe=0,Le=_?h[Fe].apply(this,De):ye;++Fe<_;)Le=h[Fe].call(this,Le);return Le}})}function es(u,h,_,E,I,L,Y,ee,ae,De){var ye=h&O,Fe=h&m,Le=h&D,Ke=h&(w|C),it=h&x,_t=Le?r:uu(u);function at(){for(var yt=arguments.length,Ct=oe(yt),hn=yt;hn--;)Ct[hn]=arguments[hn];if(Ke)var Kr=pa(at),dn=Ug(Ct,Kr);if(E&&(Ct=gh(Ct,E,I,Ke)),L&&(Ct=vh(Ct,L,Y,Ke)),yt-=dn,Ke&&yt<De){var cr=bi(Ct,Kr);return Ah(u,h,es,at.placeholder,_,Ct,cr,ee,ae,De-yt)}var Tn=Fe?_:this,li=Le?Tn[u]:u;return yt=Ct.length,ee?Ct=Gm(Ct,ee):it&&yt>1&&Ct.reverse(),ye&&ae<yt&&(Ct.length=ae),this&&this!==Or&&this instanceof at&&(li=_t||uu(li)),li.apply(Tn,Ct)}return at}function wh(u,h){return function(_,E){return tm(_,u,h(E),{})}}function ts(u,h){return function(_,E){var I;if(_===r&&E===r)return h;if(_!==r&&(I=_),E!==r){if(I===r)return E;typeof _=="string"||typeof E=="string"?(_=cn(_),E=cn(E)):(_=sh(_),E=sh(E)),I=u(_,E)}return I}}function sl(u){return ai(function(h){return h=Ht(h,ln(rt())),bt(function(_){var E=this;return u(h,function(I){return on(I,E,_)})})})}function rs(u,h){h=h===r?" ":cn(h);var _=h.length;if(_<2)return _?el(h,u):h;var E=el(h,zu(u/ua(h)));return aa(h)?Ai(Mn(E),0,u).join(""):E.slice(0,u)}function Bm(u,h,_,E){var I=h&m,L=uu(u);function Y(){for(var ee=-1,ae=arguments.length,De=-1,ye=E.length,Fe=oe(ye+ae),Le=this&&this!==Or&&this instanceof Y?L:u;++De<ye;)Fe[De]=E[De];for(;ae--;)Fe[De++]=arguments[++ee];return on(Le,I?_:this,Fe)}return Y}function Eh(u){return function(h,_,E){return E&&typeof E!="number"&&Gr(h,_,E)&&(_=E=r),h=oi(h),_===r?(_=h,h=0):_=oi(_),E=E===r?h<_?1:-1:oi(E),dm(h,_,E,u)}}function ns(u){return function(h,_){return typeof h=="string"&&typeof _=="string"||(h=Cn(h),_=Cn(_)),u(h,_)}}function Ah(u,h,_,E,I,L,Y,ee,ae,De){var ye=h&w,Fe=ye?Y:r,Le=ye?r:Y,Ke=ye?L:r,it=ye?r:L;h|=ye?F:k,h&=~(ye?k:F),h&B||(h&=~(m|D));var _t=[u,h,I,Ke,Fe,it,Le,ee,ae,De],at=_.apply(r,_t);return gl(u)&&Nh(at,_t),at.placeholder=E,Lh(at,u,h)}function ol(u){var h=mr[u];return function(_,E){if(_=Cn(_),E=E==null?0:Ur(mt(E),292),E&&Lf(_)){var I=(kt(_)+"e").split("e"),L=h(I[0]+"e"+(+I[1]+E));return I=(kt(L)+"e").split("e"),+(I[0]+"e"+(+I[1]-E))}return h(_)}}var Om=la&&1/ku(new la([,-0]))[1]==Q?function(u){return new la(u)}:Ml;function Ch(u){return function(h){var _=Vr(h);return _==lt?Ro(h):_==Nt?$g(h):Rg(h,u(h))}}function ii(u,h,_,E,I,L,Y,ee){var ae=h&D;if(!ae&&typeof u!="function")throw new Dn(o);var De=E?E.length:0;if(De||(h&=~(F|k),E=I=r),Y=Y===r?Y:_r(mt(Y),0),ee=ee===r?ee:mt(ee),De-=I?I.length:0,h&k){var ye=E,Fe=I;E=I=r}var Le=ae?r:fl(u),Ke=[u,h,_,E,I,ye,Fe,L,Y,ee];if(Le&&Wm(Ke,Le),u=Ke[0],h=Ke[1],_=Ke[2],E=Ke[3],I=Ke[4],ee=Ke[9]=Ke[9]===r?ae?0:u.length:_r(Ke[9]-De,0),!ee&&h&(w|C)&&(h&=~(w|C)),!h||h==m)var it=Fm(u,h,_);else h==w||h==C?it=Sm(u,h,ee):(h==F||h==(m|F))&&!I.length?it=Bm(u,h,_,E):it=es.apply(r,Ke);var _t=Le?ah:Nh;return Lh(_t(it,Ke),u,h)}function Fh(u,h,_,E){return u===r||kn(u,oa[_])&&!xt.call(E,_)?h:u}function Sh(u,h,_,E,I,L){return Yt(u)&&Yt(h)&&(L.set(h,u),Zu(u,h,r,Sh,L),L.delete(h)),u}function Mm(u){return lu(u)?r:u}function Bh(u,h,_,E,I,L){var Y=_&b,ee=u.length,ae=h.length;if(ee!=ae&&!(Y&&ae>ee))return!1;var De=L.get(u),ye=L.get(h);if(De&&ye)return De==h&&ye==u;var Fe=-1,Le=!0,Ke=_&v?new Hi:r;for(L.set(u,h),L.set(h,u);++Fe<ee;){var it=u[Fe],_t=h[Fe];if(E)var at=Y?E(_t,it,Fe,h,u,L):E(it,_t,Fe,u,h,L);if(at!==r){if(at)continue;Le=!1;break}if(Ke){if(!ko(h,function(yt,Ct){if(!Ya(Ke,Ct)&&(it===yt||I(it,yt,_,E,L)))return Ke.push(Ct)})){Le=!1;break}}else if(!(it===_t||I(it,_t,_,E,L))){Le=!1;break}}return L.delete(u),L.delete(h),Le}function Pm(u,h,_,E,I,L,Y){switch(_){case me:if(u.byteLength!=h.byteLength||u.byteOffset!=h.byteOffset)return!1;u=u.buffer,h=h.buffer;case ue:return!(u.byteLength!=h.byteLength||!L(new Ru(u),new Ru(h)));case We:case Ye:case Pt:return kn(+u,+h);case Dt:return u.name==h.name&&u.message==h.message;case Xt:case Zr:return u==h+"";case lt:var ee=Ro;case Nt:var ae=E&b;if(ee||(ee=ku),u.size!=h.size&&!ae)return!1;var De=Y.get(u);if(De)return De==h;E|=v,Y.set(u,h);var ye=Bh(ee(u),ee(h),E,I,L,Y);return Y.delete(u),ye;case G:if(eu)return eu.call(u)==eu.call(h)}return!1}function km(u,h,_,E,I,L){var Y=_&b,ee=ll(u),ae=ee.length,De=ll(h),ye=De.length;if(ae!=ye&&!Y)return!1;for(var Fe=ae;Fe--;){var Le=ee[Fe];if(!(Y?Le in h:xt.call(h,Le)))return!1}var Ke=L.get(u),it=L.get(h);if(Ke&&it)return Ke==h&&it==u;var _t=!0;L.set(u,h),L.set(h,u);for(var at=Y;++Fe<ae;){Le=ee[Fe];var yt=u[Le],Ct=h[Le];if(E)var hn=Y?E(Ct,yt,Le,h,u,L):E(yt,Ct,Le,u,h,L);if(!(hn===r?yt===Ct||I(yt,Ct,_,E,L):hn)){_t=!1;break}at||(at=Le=="constructor")}if(_t&&!at){var Kr=u.constructor,dn=h.constructor;Kr!=dn&&"constructor"in u&&"constructor"in h&&!(typeof Kr=="function"&&Kr instanceof Kr&&typeof dn=="function"&&dn instanceof dn)&&(_t=!1)}return L.delete(u),L.delete(h),_t}function ai(u){return ml(Ih(u,r,qh),u+"")}function ll(u){return Kf(u,Cr,dl)}function cl(u){return Kf(u,Xr,Oh)}var fl=Wu?function(u){return Wu.get(u)}:Ml;function is(u){for(var h=u.name+"",_=ca[h],E=xt.call(ca,h)?_.length:0;E--;){var I=_[E],L=I.func;if(L==null||L==u)return I.name}return h}function pa(u){var h=xt.call(N,"placeholder")?N:u;return h.placeholder}function rt(){var u=N.iteratee||Bl;return u=u===Bl?Jf:u,arguments.length?u(arguments[0],arguments[1]):u}function as(u,h){var _=u.__data__;return Vm(h)?_[typeof h=="string"?"string":"hash"]:_.map}function hl(u){for(var h=Cr(u),_=h.length;_--;){var E=h[_],I=u[E];h[_]=[E,I,kh(I)]}return h}function Ki(u,h){var _=qg(u,h);return Zf(_)?_:r}function Tm(u){var h=xt.call(u,qi),_=u[qi];try{u[qi]=r;var E=!0}catch{}var I=Nu.call(u);return E&&(h?u[qi]=_:delete u[qi]),I}var dl=Vo?function(u){return u==null?[]:(u=Rt(u),mi(Vo(u),function(h){return xf.call(u,h)}))}:Pl,Oh=Vo?function(u){for(var h=[];u;)_i(h,dl(u)),u=Uu(u);return h}:Pl,Vr=$r;(jo&&Vr(new jo(new ArrayBuffer(1)))!=me||Ja&&Vr(new Ja)!=lt||zo&&Vr(zo.resolve())!=hr||la&&Vr(new la)!=Nt||Qa&&Vr(new Qa)!=ie)&&(Vr=function(u){var h=$r(u),_=h==It?u.constructor:r,E=_?Yi(_):"";if(E)switch(E){case gv:return me;case vv:return lt;case mv:return hr;case _v:return Nt;case bv:return ie}return h});function Im(u,h,_){for(var E=-1,I=_.length;++E<I;){var L=_[E],Y=L.size;switch(L.type){case"drop":u+=Y;break;case"dropRight":h-=Y;break;case"take":h=Ur(h,u+Y);break;case"takeRight":u=_r(u,h-Y);break}}return{start:u,end:h}}function xm(u){var h=u.match(pi);return h?h[1].split(vn):[]}function Mh(u,h,_){h=Ei(h,u);for(var E=-1,I=h.length,L=!1;++E<I;){var Y=Hn(h[E]);if(!(L=u!=null&&_(u,Y)))break;u=u[Y]}return L||++E!=I?L:(I=u==null?0:u.length,!!I&&hs(I)&&ui(Y,I)&&(pt(u)||Zi(u)))}function Nm(u){var h=u.length,_=new u.constructor(h);return h&&typeof u[0]=="string"&&xt.call(u,"index")&&(_.index=u.index,_.input=u.input),_}function Ph(u){return typeof u.constructor=="function"&&!su(u)?fa(Uu(u)):{}}function Lm(u,h,_){var E=u.constructor;switch(h){case ue:return ul(u);case We:case Ye:return new E(+u);case me:return Dm(u,_);case ce:case he:case ke:case He:case ct:case Ie:case $t:case Vt:case er:return dh(u,_);case lt:return new E;case Pt:case Zr:return new E(u);case Xt:return ym(u);case Nt:return new E;case G:return wm(u)}}function Rm(u,h){var _=h.length;if(!_)return u;var E=_-1;return h[E]=(_>1?"& ":"")+h[E],h=h.join(_>2?", ":" "),u.replace(xa,`{
/* [wrapped with `+h+`] */
`)}function Um(u){return pt(u)||Zi(u)||!!(Nf&&u&&u[Nf])}function ui(u,h){var _=typeof u;return h=h??X,!!h&&(_=="number"||_!="symbol"&&za.test(u))&&u>-1&&u%1==0&&u<h}function Gr(u,h,_){if(!Yt(_))return!1;var E=typeof h;return(E=="number"?Qr(_)&&ui(h,_.length):E=="string"&&h in _)?kn(_[h],u):!1}function pl(u,h){if(pt(u))return!1;var _=typeof u;return _=="number"||_=="symbol"||_=="boolean"||u==null||fn(u)?!0:Vn.test(u)||!Un.test(u)||h!=null&&u in Rt(h)}function Vm(u){var h=typeof u;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?u!=="__proto__":u===null}function gl(u){var h=is(u),_=N[h];if(typeof _!="function"||!(h in wt.prototype))return!1;if(u===_)return!0;var E=fl(_);return!!E&&u===E[0]}function jm(u){return!!kf&&kf in u}var zm=Iu?si:kl;function su(u){var h=u&&u.constructor,_=typeof h=="function"&&h.prototype||oa;return u===_}function kh(u){return u===u&&!Yt(u)}function Th(u,h){return function(_){return _==null?!1:_[u]===h&&(h!==r||u in Rt(_))}}function qm(u){var h=cs(u,function(E){return _.size===p&&_.clear(),E}),_=h.cache;return h}function Wm(u,h){var _=u[1],E=h[1],I=_|E,L=I<(m|D|O),Y=E==O&&_==w||E==O&&_==A&&u[7].length<=h[8]||E==(O|A)&&h[7].length<=h[8]&&_==w;if(!(L||Y))return u;E&m&&(u[2]=h[2],I|=_&m?0:B);var ee=h[3];if(ee){var ae=u[3];u[3]=ae?gh(ae,ee,h[4]):ee,u[4]=ae?bi(u[3],c):h[4]}return ee=h[5],ee&&(ae=u[5],u[5]=ae?vh(ae,ee,h[6]):ee,u[6]=ae?bi(u[5],c):h[6]),ee=h[7],ee&&(u[7]=ee),E&O&&(u[8]=u[8]==null?h[8]:Ur(u[8],h[8])),u[9]==null&&(u[9]=h[9]),u[0]=h[0],u[1]=I,u}function Hm(u){var h=[];if(u!=null)for(var _ in Rt(u))h.push(_);return h}function $m(u){return Nu.call(u)}function Ih(u,h,_){return h=_r(h===r?u.length-1:h,0),function(){for(var E=arguments,I=-1,L=_r(E.length-h,0),Y=oe(L);++I<L;)Y[I]=E[h+I];I=-1;for(var ee=oe(h+1);++I<h;)ee[I]=E[I];return ee[h]=_(Y),on(u,this,ee)}}function xh(u,h){return h.length<2?u:Gi(u,En(h,0,-1))}function Gm(u,h){for(var _=u.length,E=Ur(h.length,_),I=Jr(u);E--;){var L=h[E];u[E]=ui(L,_)?I[L]:r}return u}function vl(u,h){if(!(h==="constructor"&&typeof u[h]=="function")&&h!="__proto__")return u[h]}var Nh=Rh(ah),ou=ov||function(u,h){return Or.setTimeout(u,h)},ml=Rh(vm);function Lh(u,h,_){var E=h+"";return ml(u,Rm(E,Km(xm(E),_)))}function Rh(u){var h=0,_=0;return function(){var E=hv(),I=j-(E-_);if(_=E,I>0){if(++h>=J)return arguments[0]}else h=0;return u.apply(r,arguments)}}function us(u,h){var _=-1,E=u.length,I=E-1;for(h=h===r?E:h;++_<h;){var L=Xo(_,I),Y=u[L];u[L]=u[_],u[_]=Y}return u.length=h,u}var Uh=qm(function(u){var h=[];return u.charCodeAt(0)===46&&h.push(""),u.replace(ea,function(_,E,I,L){h.push(I?L.replace(Na,"$1"):E||_)}),h});function Hn(u){if(typeof u=="string"||fn(u))return u;var h=u+"";return h=="0"&&1/u==-Q?"-0":h}function Yi(u){if(u!=null){try{return xu.call(u)}catch{}try{return u+""}catch{}}return""}function Km(u,h){return bn(Pe,function(_){var E="_."+_[0];h&_[1]&&!Mu(u,E)&&u.push(E)}),u.sort()}function Vh(u){if(u instanceof wt)return u.clone();var h=new yn(u.__wrapped__,u.__chain__);return h.__actions__=Jr(u.__actions__),h.__index__=u.__index__,h.__values__=u.__values__,h}function Ym(u,h,_){(_?Gr(u,h,_):h===r)?h=1:h=_r(mt(h),0);var E=u==null?0:u.length;if(!E||h<1)return[];for(var I=0,L=0,Y=oe(zu(E/h));I<E;)Y[L++]=En(u,I,I+=h);return Y}function Zm(u){for(var h=-1,_=u==null?0:u.length,E=0,I=[];++h<_;){var L=u[h];L&&(I[E++]=L)}return I}function Jm(){var u=arguments.length;if(!u)return[];for(var h=oe(u-1),_=arguments[0],E=u;E--;)h[E-1]=arguments[E];return _i(pt(_)?Jr(_):[_],Mr(h,1))}var Qm=bt(function(u,h){return lr(u)?ru(u,Mr(h,1,lr,!0)):[]}),Xm=bt(function(u,h){var _=An(h);return lr(_)&&(_=r),lr(u)?ru(u,Mr(h,1,lr,!0),rt(_,2)):[]}),e_=bt(function(u,h){var _=An(h);return lr(_)&&(_=r),lr(u)?ru(u,Mr(h,1,lr,!0),r,_):[]});function t_(u,h,_){var E=u==null?0:u.length;return E?(h=_||h===r?1:mt(h),En(u,h<0?0:h,E)):[]}function r_(u,h,_){var E=u==null?0:u.length;return E?(h=_||h===r?1:mt(h),h=E-h,En(u,0,h<0?0:h)):[]}function n_(u,h){return u&&u.length?Qu(u,rt(h,3),!0,!0):[]}function i_(u,h){return u&&u.length?Qu(u,rt(h,3),!0):[]}function a_(u,h,_,E){var I=u==null?0:u.length;return I?(_&&typeof _!="number"&&Gr(u,h,_)&&(_=0,E=I),Jv(u,h,_,E)):[]}function jh(u,h,_){var E=u==null?0:u.length;if(!E)return-1;var I=_==null?0:mt(_);return I<0&&(I=_r(E+I,0)),Pu(u,rt(h,3),I)}function zh(u,h,_){var E=u==null?0:u.length;if(!E)return-1;var I=E-1;return _!==r&&(I=mt(_),I=_<0?_r(E+I,0):Ur(I,E-1)),Pu(u,rt(h,3),I,!0)}function qh(u){var h=u==null?0:u.length;return h?Mr(u,1):[]}function u_(u){var h=u==null?0:u.length;return h?Mr(u,Q):[]}function s_(u,h){var _=u==null?0:u.length;return _?(h=h===r?1:mt(h),Mr(u,h)):[]}function o_(u){for(var h=-1,_=u==null?0:u.length,E={};++h<_;){var I=u[h];E[I[0]]=I[1]}return E}function Wh(u){return u&&u.length?u[0]:r}function l_(u,h,_){var E=u==null?0:u.length;if(!E)return-1;var I=_==null?0:mt(_);return I<0&&(I=_r(E+I,0)),ia(u,h,I)}function c_(u){var h=u==null?0:u.length;return h?En(u,0,-1):[]}var f_=bt(function(u){var h=Ht(u,il);return h.length&&h[0]===u[0]?Ko(h):[]}),h_=bt(function(u){var h=An(u),_=Ht(u,il);return h===An(_)?h=r:_.pop(),_.length&&_[0]===u[0]?Ko(_,rt(h,2)):[]}),d_=bt(function(u){var h=An(u),_=Ht(u,il);return h=typeof h=="function"?h:r,h&&_.pop(),_.length&&_[0]===u[0]?Ko(_,r,h):[]});function p_(u,h){return u==null?"":cv.call(u,h)}function An(u){var h=u==null?0:u.length;return h?u[h-1]:r}function g_(u,h,_){var E=u==null?0:u.length;if(!E)return-1;var I=E;return _!==r&&(I=mt(_),I=I<0?_r(E+I,0):Ur(I,E-1)),h===h?Kg(u,h,I):Pu(u,Af,I,!0)}function v_(u,h){return u&&u.length?th(u,mt(h)):r}var m_=bt(Hh);function Hh(u,h){return u&&u.length&&h&&h.length?Qo(u,h):u}function __(u,h,_){return u&&u.length&&h&&h.length?Qo(u,h,rt(_,2)):u}function b_(u,h,_){return u&&u.length&&h&&h.length?Qo(u,h,r,_):u}var D_=ai(function(u,h){var _=u==null?0:u.length,E=Wo(u,h);return ih(u,Ht(h,function(I){return ui(I,_)?+I:I}).sort(ph)),E});function y_(u,h){var _=[];if(!(u&&u.length))return _;var E=-1,I=[],L=u.length;for(h=rt(h,3);++E<L;){var Y=u[E];h(Y,E,u)&&(_.push(Y),I.push(E))}return ih(u,I),_}function _l(u){return u==null?u:pv.call(u)}function w_(u,h,_){var E=u==null?0:u.length;return E?(_&&typeof _!="number"&&Gr(u,h,_)?(h=0,_=E):(h=h==null?0:mt(h),_=_===r?E:mt(_)),En(u,h,_)):[]}function E_(u,h){return Ju(u,h)}function A_(u,h,_){return tl(u,h,rt(_,2))}function C_(u,h){var _=u==null?0:u.length;if(_){var E=Ju(u,h);if(E<_&&kn(u[E],h))return E}return-1}function F_(u,h){return Ju(u,h,!0)}function S_(u,h,_){return tl(u,h,rt(_,2),!0)}function B_(u,h){var _=u==null?0:u.length;if(_){var E=Ju(u,h,!0)-1;if(kn(u[E],h))return E}return-1}function O_(u){return u&&u.length?uh(u):[]}function M_(u,h){return u&&u.length?uh(u,rt(h,2)):[]}function P_(u){var h=u==null?0:u.length;return h?En(u,1,h):[]}function k_(u,h,_){return u&&u.length?(h=_||h===r?1:mt(h),En(u,0,h<0?0:h)):[]}function T_(u,h,_){var E=u==null?0:u.length;return E?(h=_||h===r?1:mt(h),h=E-h,En(u,h<0?0:h,E)):[]}function I_(u,h){return u&&u.length?Qu(u,rt(h,3),!1,!0):[]}function x_(u,h){return u&&u.length?Qu(u,rt(h,3)):[]}var N_=bt(function(u){return wi(Mr(u,1,lr,!0))}),L_=bt(function(u){var h=An(u);return lr(h)&&(h=r),wi(Mr(u,1,lr,!0),rt(h,2))}),R_=bt(function(u){var h=An(u);return h=typeof h=="function"?h:r,wi(Mr(u,1,lr,!0),r,h)});function U_(u){return u&&u.length?wi(u):[]}function V_(u,h){return u&&u.length?wi(u,rt(h,2)):[]}function j_(u,h){return h=typeof h=="function"?h:r,u&&u.length?wi(u,r,h):[]}function bl(u){if(!(u&&u.length))return[];var h=0;return u=mi(u,function(_){if(lr(_))return h=_r(_.length,h),!0}),No(h,function(_){return Ht(u,To(_))})}function $h(u,h){if(!(u&&u.length))return[];var _=bl(u);return h==null?_:Ht(_,function(E){return on(h,r,E)})}var z_=bt(function(u,h){return lr(u)?ru(u,h):[]}),q_=bt(function(u){return nl(mi(u,lr))}),W_=bt(function(u){var h=An(u);return lr(h)&&(h=r),nl(mi(u,lr),rt(h,2))}),H_=bt(function(u){var h=An(u);return h=typeof h=="function"?h:r,nl(mi(u,lr),r,h)}),$_=bt(bl);function G_(u,h){return ch(u||[],h||[],tu)}function K_(u,h){return ch(u||[],h||[],au)}var Y_=bt(function(u){var h=u.length,_=h>1?u[h-1]:r;return _=typeof _=="function"?(u.pop(),_):r,$h(u,_)});function Gh(u){var h=N(u);return h.__chain__=!0,h}function Z_(u,h){return h(u),u}function ss(u,h){return h(u)}var J_=ai(function(u){var h=u.length,_=h?u[0]:0,E=this.__wrapped__,I=function(L){return Wo(L,u)};return h>1||this.__actions__.length||!(E instanceof wt)||!ui(_)?this.thru(I):(E=E.slice(_,+_+(h?1:0)),E.__actions__.push({func:ss,args:[I],thisArg:r}),new yn(E,this.__chain__).thru(function(L){return h&&!L.length&&L.push(r),L}))});function Q_(){return Gh(this)}function X_(){return new yn(this.value(),this.__chain__)}function e2(){this.__values__===r&&(this.__values__=s0(this.value()));var u=this.__index__>=this.__values__.length,h=u?r:this.__values__[this.__index__++];return{done:u,value:h}}function t2(){return this}function r2(u){for(var h,_=this;_ instanceof $u;){var E=Vh(_);E.__index__=0,E.__values__=r,h?I.__wrapped__=E:h=E;var I=E;_=_.__wrapped__}return I.__wrapped__=u,h}function n2(){var u=this.__wrapped__;if(u instanceof wt){var h=u;return this.__actions__.length&&(h=new wt(this)),h=h.reverse(),h.__actions__.push({func:ss,args:[_l],thisArg:r}),new yn(h,this.__chain__)}return this.thru(_l)}function i2(){return lh(this.__wrapped__,this.__actions__)}var a2=Xu(function(u,h,_){xt.call(u,_)?++u[_]:ni(u,_,1)});function u2(u,h,_){var E=pt(u)?wf:Zv;return _&&Gr(u,h,_)&&(h=r),E(u,rt(h,3))}function s2(u,h){var _=pt(u)?mi:$f;return _(u,rt(h,3))}var o2=Dh(jh),l2=Dh(zh);function c2(u,h){return Mr(os(u,h),1)}function f2(u,h){return Mr(os(u,h),Q)}function h2(u,h,_){return _=_===r?1:mt(_),Mr(os(u,h),_)}function Kh(u,h){var _=pt(u)?bn:yi;return _(u,rt(h,3))}function Yh(u,h){var _=pt(u)?Pg:Hf;return _(u,rt(h,3))}var d2=Xu(function(u,h,_){xt.call(u,_)?u[_].push(h):ni(u,_,[h])});function p2(u,h,_,E){u=Qr(u)?u:va(u),_=_&&!E?mt(_):0;var I=u.length;return _<0&&(_=_r(I+_,0)),ds(u)?_<=I&&u.indexOf(h,_)>-1:!!I&&ia(u,h,_)>-1}var g2=bt(function(u,h,_){var E=-1,I=typeof h=="function",L=Qr(u)?oe(u.length):[];return yi(u,function(Y){L[++E]=I?on(h,Y,_):nu(Y,h,_)}),L}),v2=Xu(function(u,h,_){ni(u,_,h)});function os(u,h){var _=pt(u)?Ht:Qf;return _(u,rt(h,3))}function m2(u,h,_,E){return u==null?[]:(pt(h)||(h=h==null?[]:[h]),_=E?r:_,pt(_)||(_=_==null?[]:[_]),rh(u,h,_))}var _2=Xu(function(u,h,_){u[_?0:1].push(h)},function(){return[[],[]]});function b2(u,h,_){var E=pt(u)?Po:Ff,I=arguments.length<3;return E(u,rt(h,4),_,I,yi)}function D2(u,h,_){var E=pt(u)?kg:Ff,I=arguments.length<3;return E(u,rt(h,4),_,I,Hf)}function y2(u,h){var _=pt(u)?mi:$f;return _(u,fs(rt(h,3)))}function w2(u){var h=pt(u)?jf:pm;return h(u)}function E2(u,h,_){(_?Gr(u,h,_):h===r)?h=1:h=mt(h);var E=pt(u)?Hv:gm;return E(u,h)}function A2(u){var h=pt(u)?$v:mm;return h(u)}function C2(u){if(u==null)return 0;if(Qr(u))return ds(u)?ua(u):u.length;var h=Vr(u);return h==lt||h==Nt?u.size:Zo(u).length}function F2(u,h,_){var E=pt(u)?ko:_m;return _&&Gr(u,h,_)&&(h=r),E(u,rt(h,3))}var S2=bt(function(u,h){if(u==null)return[];var _=h.length;return _>1&&Gr(u,h[0],h[1])?h=[]:_>2&&Gr(h[0],h[1],h[2])&&(h=[h[0]]),rh(u,Mr(h,1),[])}),ls=sv||function(){return Or.Date.now()};function B2(u,h){if(typeof h!="function")throw new Dn(o);return u=mt(u),function(){if(--u<1)return h.apply(this,arguments)}}function Zh(u,h,_){return h=_?r:h,h=u&&h==null?u.length:h,ii(u,O,r,r,r,r,h)}function Jh(u,h){var _;if(typeof h!="function")throw new Dn(o);return u=mt(u),function(){return--u>0&&(_=h.apply(this,arguments)),u<=1&&(h=r),_}}var Dl=bt(function(u,h,_){var E=m;if(_.length){var I=bi(_,pa(Dl));E|=F}return ii(u,E,h,_,I)}),Qh=bt(function(u,h,_){var E=m|D;if(_.length){var I=bi(_,pa(Qh));E|=F}return ii(h,E,u,_,I)});function Xh(u,h,_){h=_?r:h;var E=ii(u,w,r,r,r,r,r,h);return E.placeholder=Xh.placeholder,E}function e0(u,h,_){h=_?r:h;var E=ii(u,C,r,r,r,r,r,h);return E.placeholder=e0.placeholder,E}function t0(u,h,_){var E,I,L,Y,ee,ae,De=0,ye=!1,Fe=!1,Le=!0;if(typeof u!="function")throw new Dn(o);h=Cn(h)||0,Yt(_)&&(ye=!!_.leading,Fe="maxWait"in _,L=Fe?_r(Cn(_.maxWait)||0,h):L,Le="trailing"in _?!!_.trailing:Le);function Ke(cr){var Tn=E,li=I;return E=I=r,De=cr,Y=u.apply(li,Tn),Y}function it(cr){return De=cr,ee=ou(yt,h),ye?Ke(cr):Y}function _t(cr){var Tn=cr-ae,li=cr-De,D0=h-Tn;return Fe?Ur(D0,L-li):D0}function at(cr){var Tn=cr-ae,li=cr-De;return ae===r||Tn>=h||Tn<0||Fe&&li>=L}function yt(){var cr=ls();if(at(cr))return Ct(cr);ee=ou(yt,_t(cr))}function Ct(cr){return ee=r,Le&&E?Ke(cr):(E=I=r,Y)}function hn(){ee!==r&&fh(ee),De=0,E=ae=I=ee=r}function Kr(){return ee===r?Y:Ct(ls())}function dn(){var cr=ls(),Tn=at(cr);if(E=arguments,I=this,ae=cr,Tn){if(ee===r)return it(ae);if(Fe)return fh(ee),ee=ou(yt,h),Ke(ae)}return ee===r&&(ee=ou(yt,h)),Y}return dn.cancel=hn,dn.flush=Kr,dn}var O2=bt(function(u,h){return Wf(u,1,h)}),M2=bt(function(u,h,_){return Wf(u,Cn(h)||0,_)});function P2(u){return ii(u,x)}function cs(u,h){if(typeof u!="function"||h!=null&&typeof h!="function")throw new Dn(o);var _=function(){var E=arguments,I=h?h.apply(this,E):E[0],L=_.cache;if(L.has(I))return L.get(I);var Y=u.apply(this,E);return _.cache=L.set(I,Y)||L,Y};return _.cache=new(cs.Cache||ri),_}cs.Cache=ri;function fs(u){if(typeof u!="function")throw new Dn(o);return function(){var h=arguments;switch(h.length){case 0:return!u.call(this);case 1:return!u.call(this,h[0]);case 2:return!u.call(this,h[0],h[1]);case 3:return!u.call(this,h[0],h[1],h[2])}return!u.apply(this,h)}}function k2(u){return Jh(2,u)}var T2=bm(function(u,h){h=h.length==1&&pt(h[0])?Ht(h[0],ln(rt())):Ht(Mr(h,1),ln(rt()));var _=h.length;return bt(function(E){for(var I=-1,L=Ur(E.length,_);++I<L;)E[I]=h[I].call(this,E[I]);return on(u,this,E)})}),yl=bt(function(u,h){var _=bi(h,pa(yl));return ii(u,F,r,h,_)}),r0=bt(function(u,h){var _=bi(h,pa(r0));return ii(u,k,r,h,_)}),I2=ai(function(u,h){return ii(u,A,r,r,r,h)});function x2(u,h){if(typeof u!="function")throw new Dn(o);return h=h===r?h:mt(h),bt(u,h)}function N2(u,h){if(typeof u!="function")throw new Dn(o);return h=h==null?0:_r(mt(h),0),bt(function(_){var E=_[h],I=Ai(_,0,h);return E&&_i(I,E),on(u,this,I)})}function L2(u,h,_){var E=!0,I=!0;if(typeof u!="function")throw new Dn(o);return Yt(_)&&(E="leading"in _?!!_.leading:E,I="trailing"in _?!!_.trailing:I),t0(u,h,{leading:E,maxWait:h,trailing:I})}function R2(u){return Zh(u,1)}function U2(u,h){return yl(al(h),u)}function V2(){if(!arguments.length)return[];var u=arguments[0];return pt(u)?u:[u]}function j2(u){return wn(u,g)}function z2(u,h){return h=typeof h=="function"?h:r,wn(u,g,h)}function q2(u){return wn(u,f|g)}function W2(u,h){return h=typeof h=="function"?h:r,wn(u,f|g,h)}function H2(u,h){return h==null||qf(u,h,Cr(h))}function kn(u,h){return u===h||u!==u&&h!==h}var $2=ns(Go),G2=ns(function(u,h){return u>=h}),Zi=Yf(function(){return arguments}())?Yf:function(u){return rr(u)&&xt.call(u,"callee")&&!xf.call(u,"callee")},pt=oe.isArray,K2=vf?ln(vf):rm;function Qr(u){return u!=null&&hs(u.length)&&!si(u)}function lr(u){return rr(u)&&Qr(u)}function Y2(u){return u===!0||u===!1||rr(u)&&$r(u)==We}var Ci=lv||kl,Z2=mf?ln(mf):nm;function J2(u){return rr(u)&&u.nodeType===1&&!lu(u)}function Q2(u){if(u==null)return!0;if(Qr(u)&&(pt(u)||typeof u=="string"||typeof u.splice=="function"||Ci(u)||ga(u)||Zi(u)))return!u.length;var h=Vr(u);if(h==lt||h==Nt)return!u.size;if(su(u))return!Zo(u).length;for(var _ in u)if(xt.call(u,_))return!1;return!0}function X2(u,h){return iu(u,h)}function eb(u,h,_){_=typeof _=="function"?_:r;var E=_?_(u,h):r;return E===r?iu(u,h,r,_):!!E}function wl(u){if(!rr(u))return!1;var h=$r(u);return h==Dt||h==xe||typeof u.message=="string"&&typeof u.name=="string"&&!lu(u)}function tb(u){return typeof u=="number"&&Lf(u)}function si(u){if(!Yt(u))return!1;var h=$r(u);return h==Et||h==ht||h==Ue||h==Ze}function n0(u){return typeof u=="number"&&u==mt(u)}function hs(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=X}function Yt(u){var h=typeof u;return u!=null&&(h=="object"||h=="function")}function rr(u){return u!=null&&typeof u=="object"}var i0=_f?ln(_f):am;function rb(u,h){return u===h||Yo(u,h,hl(h))}function nb(u,h,_){return _=typeof _=="function"?_:r,Yo(u,h,hl(h),_)}function ib(u){return a0(u)&&u!=+u}function ab(u){if(zm(u))throw new dt(a);return Zf(u)}function ub(u){return u===null}function sb(u){return u==null}function a0(u){return typeof u=="number"||rr(u)&&$r(u)==Pt}function lu(u){if(!rr(u)||$r(u)!=It)return!1;var h=Uu(u);if(h===null)return!0;var _=xt.call(h,"constructor")&&h.constructor;return typeof _=="function"&&_ instanceof _&&xu.call(_)==nv}var El=bf?ln(bf):um;function ob(u){return n0(u)&&u>=-X&&u<=X}var u0=Df?ln(Df):sm;function ds(u){return typeof u=="string"||!pt(u)&&rr(u)&&$r(u)==Zr}function fn(u){return typeof u=="symbol"||rr(u)&&$r(u)==G}var ga=yf?ln(yf):om;function lb(u){return u===r}function cb(u){return rr(u)&&Vr(u)==ie}function fb(u){return rr(u)&&$r(u)==de}var hb=ns(Jo),db=ns(function(u,h){return u<=h});function s0(u){if(!u)return[];if(Qr(u))return ds(u)?Mn(u):Jr(u);if(Za&&u[Za])return Hg(u[Za]());var h=Vr(u),_=h==lt?Ro:h==Nt?ku:va;return _(u)}function oi(u){if(!u)return u===0?u:0;if(u=Cn(u),u===Q||u===-Q){var h=u<0?-1:1;return h*te}return u===u?u:0}function mt(u){var h=oi(u),_=h%1;return h===h?_?h-_:h:0}function o0(u){return u?$i(mt(u),0,be):0}function Cn(u){if(typeof u=="number")return u;if(fn(u))return le;if(Yt(u)){var h=typeof u.valueOf=="function"?u.valueOf():u;u=Yt(h)?h+"":h}if(typeof u!="string")return u===0?u:+u;u=Sf(u);var _=Ua.test(u);return _||ja.test(u)?Bg(u.slice(2),_?2:8):Ra.test(u)?le:+u}function l0(u){return Wn(u,Xr(u))}function pb(u){return u?$i(mt(u),-X,X):u===0?u:0}function kt(u){return u==null?"":cn(u)}var gb=ha(function(u,h){if(su(h)||Qr(h)){Wn(h,Cr(h),u);return}for(var _ in h)xt.call(h,_)&&tu(u,_,h[_])}),c0=ha(function(u,h){Wn(h,Xr(h),u)}),ps=ha(function(u,h,_,E){Wn(h,Xr(h),u,E)}),vb=ha(function(u,h,_,E){Wn(h,Cr(h),u,E)}),mb=ai(Wo);function _b(u,h){var _=fa(u);return h==null?_:zf(_,h)}var bb=bt(function(u,h){u=Rt(u);var _=-1,E=h.length,I=E>2?h[2]:r;for(I&&Gr(h[0],h[1],I)&&(E=1);++_<E;)for(var L=h[_],Y=Xr(L),ee=-1,ae=Y.length;++ee<ae;){var De=Y[ee],ye=u[De];(ye===r||kn(ye,oa[De])&&!xt.call(u,De))&&(u[De]=L[De])}return u}),Db=bt(function(u){return u.push(r,Sh),on(f0,r,u)});function yb(u,h){return Ef(u,rt(h,3),qn)}function wb(u,h){return Ef(u,rt(h,3),$o)}function Eb(u,h){return u==null?u:Ho(u,rt(h,3),Xr)}function Ab(u,h){return u==null?u:Gf(u,rt(h,3),Xr)}function Cb(u,h){return u&&qn(u,rt(h,3))}function Fb(u,h){return u&&$o(u,rt(h,3))}function Sb(u){return u==null?[]:Yu(u,Cr(u))}function Bb(u){return u==null?[]:Yu(u,Xr(u))}function Al(u,h,_){var E=u==null?r:Gi(u,h);return E===r?_:E}function Ob(u,h){return u!=null&&Mh(u,h,Qv)}function Cl(u,h){return u!=null&&Mh(u,h,Xv)}var Mb=wh(function(u,h,_){h!=null&&typeof h.toString!="function"&&(h=Nu.call(h)),u[h]=_},Sl(en)),Pb=wh(function(u,h,_){h!=null&&typeof h.toString!="function"&&(h=Nu.call(h)),xt.call(u,h)?u[h].push(_):u[h]=[_]},rt),kb=bt(nu);function Cr(u){return Qr(u)?Vf(u):Zo(u)}function Xr(u){return Qr(u)?Vf(u,!0):lm(u)}function Tb(u,h){var _={};return h=rt(h,3),qn(u,function(E,I,L){ni(_,h(E,I,L),E)}),_}function Ib(u,h){var _={};return h=rt(h,3),qn(u,function(E,I,L){ni(_,I,h(E,I,L))}),_}var xb=ha(function(u,h,_){Zu(u,h,_)}),f0=ha(function(u,h,_,E){Zu(u,h,_,E)}),Nb=ai(function(u,h){var _={};if(u==null)return _;var E=!1;h=Ht(h,function(L){return L=Ei(L,u),E||(E=L.length>1),L}),Wn(u,cl(u),_),E&&(_=wn(_,f|d|g,Mm));for(var I=h.length;I--;)rl(_,h[I]);return _});function Lb(u,h){return h0(u,fs(rt(h)))}var Rb=ai(function(u,h){return u==null?{}:fm(u,h)});function h0(u,h){if(u==null)return{};var _=Ht(cl(u),function(E){return[E]});return h=rt(h),nh(u,_,function(E,I){return h(E,I[0])})}function Ub(u,h,_){h=Ei(h,u);var E=-1,I=h.length;for(I||(I=1,u=r);++E<I;){var L=u==null?r:u[Hn(h[E])];L===r&&(E=I,L=_),u=si(L)?L.call(u):L}return u}function Vb(u,h,_){return u==null?u:au(u,h,_)}function jb(u,h,_,E){return E=typeof E=="function"?E:r,u==null?u:au(u,h,_,E)}var d0=Ch(Cr),p0=Ch(Xr);function zb(u,h,_){var E=pt(u),I=E||Ci(u)||ga(u);if(h=rt(h,4),_==null){var L=u&&u.constructor;I?_=E?new L:[]:Yt(u)?_=si(L)?fa(Uu(u)):{}:_={}}return(I?bn:qn)(u,function(Y,ee,ae){return h(_,Y,ee,ae)}),_}function qb(u,h){return u==null?!0:rl(u,h)}function Wb(u,h,_){return u==null?u:oh(u,h,al(_))}function Hb(u,h,_,E){return E=typeof E=="function"?E:r,u==null?u:oh(u,h,al(_),E)}function va(u){return u==null?[]:Lo(u,Cr(u))}function $b(u){return u==null?[]:Lo(u,Xr(u))}function Gb(u,h,_){return _===r&&(_=h,h=r),_!==r&&(_=Cn(_),_=_===_?_:0),h!==r&&(h=Cn(h),h=h===h?h:0),$i(Cn(u),h,_)}function Kb(u,h,_){return h=oi(h),_===r?(_=h,h=0):_=oi(_),u=Cn(u),em(u,h,_)}function Yb(u,h,_){if(_&&typeof _!="boolean"&&Gr(u,h,_)&&(h=_=r),_===r&&(typeof h=="boolean"?(_=h,h=r):typeof u=="boolean"&&(_=u,u=r)),u===r&&h===r?(u=0,h=1):(u=oi(u),h===r?(h=u,u=0):h=oi(h)),u>h){var E=u;u=h,h=E}if(_||u%1||h%1){var I=Rf();return Ur(u+I*(h-u+Sg("1e-"+((I+"").length-1))),h)}return Xo(u,h)}var Zb=da(function(u,h,_){return h=h.toLowerCase(),u+(_?g0(h):h)});function g0(u){return Fl(kt(u).toLowerCase())}function v0(u){return u=kt(u),u&&u.replace(qa,Vg).replace(mg,"")}function Jb(u,h,_){u=kt(u),h=cn(h);var E=u.length;_=_===r?E:$i(mt(_),0,E);var I=_;return _-=h.length,_>=0&&u.slice(_,I)==h}function Qb(u){return u=kt(u),u&&gn.test(u)?u.replace(dr,jg):u}function Xb(u){return u=kt(u),u&&Ia.test(u)?u.replace(Ri,"\\$&"):u}var eD=da(function(u,h,_){return u+(_?"-":"")+h.toLowerCase()}),tD=da(function(u,h,_){return u+(_?" ":"")+h.toLowerCase()}),rD=bh("toLowerCase");function nD(u,h,_){u=kt(u),h=mt(h);var E=h?ua(u):0;if(!h||E>=h)return u;var I=(h-E)/2;return rs(qu(I),_)+u+rs(zu(I),_)}function iD(u,h,_){u=kt(u),h=mt(h);var E=h?ua(u):0;return h&&E<h?u+rs(h-E,_):u}function aD(u,h,_){u=kt(u),h=mt(h);var E=h?ua(u):0;return h&&E<h?rs(h-E,_)+u:u}function uD(u,h,_){return _||h==null?h=0:h&&(h=+h),dv(kt(u).replace(Br,""),h||0)}function sD(u,h,_){return(_?Gr(u,h,_):h===r)?h=1:h=mt(h),el(kt(u),h)}function oD(){var u=arguments,h=kt(u[0]);return u.length<3?h:h.replace(u[1],u[2])}var lD=da(function(u,h,_){return u+(_?"_":"")+h.toLowerCase()});function cD(u,h,_){return _&&typeof _!="number"&&Gr(u,h,_)&&(h=_=r),_=_===r?be:_>>>0,_?(u=kt(u),u&&(typeof h=="string"||h!=null&&!El(h))&&(h=cn(h),!h&&aa(u))?Ai(Mn(u),0,_):u.split(h,_)):[]}var fD=da(function(u,h,_){return u+(_?" ":"")+Fl(h)});function hD(u,h,_){return u=kt(u),_=_==null?0:$i(mt(_),0,u.length),h=cn(h),u.slice(_,_+h.length)==h}function dD(u,h,_){var E=N.templateSettings;_&&Gr(u,h,_)&&(h=r),u=kt(u),h=ps({},h,E,Fh);var I=ps({},h.imports,E.imports,Fh),L=Cr(I),Y=Lo(I,L),ee,ae,De=0,ye=h.interpolate||gi,Fe="__p += '",Le=Uo((h.escape||gi).source+"|"+ye.source+"|"+(ye===Qn?La:gi).source+"|"+(h.evaluate||gi).source+"|$","g"),Ke="//# sourceURL="+(xt.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++wg+"]")+`
`;u.replace(Le,function(at,yt,Ct,hn,Kr,dn){return Ct||(Ct=hn),Fe+=u.slice(De,dn).replace(Wa,zg),yt&&(ee=!0,Fe+=`' +
__e(`+yt+`) +
'`),Kr&&(ae=!0,Fe+=`';
`+Kr+`;
__p += '`),Ct&&(Fe+=`' +
((__t = (`+Ct+`)) == null ? '' : __t) +
'`),De=dn+at.length,at}),Fe+=`';
`;var it=xt.call(h,"variable")&&h.variable;if(!it)Fe=`with (obj) {
`+Fe+`
}
`;else if(Ui.test(it))throw new dt(s);Fe=(ae?Fe.replace(Gt,""):Fe).replace(wr,"$1").replace(Kt,"$1;"),Fe="function("+(it||"obj")+`) {
`+(it?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ee?", __e = _.escape":"")+(ae?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Fe+`return __p
}`;var _t=_0(function(){return Mt(L,Ke+"return "+Fe).apply(r,Y)});if(_t.source=Fe,wl(_t))throw _t;return _t}function pD(u){return kt(u).toLowerCase()}function gD(u){return kt(u).toUpperCase()}function vD(u,h,_){if(u=kt(u),u&&(_||h===r))return Sf(u);if(!u||!(h=cn(h)))return u;var E=Mn(u),I=Mn(h),L=Bf(E,I),Y=Of(E,I)+1;return Ai(E,L,Y).join("")}function mD(u,h,_){if(u=kt(u),u&&(_||h===r))return u.slice(0,Pf(u)+1);if(!u||!(h=cn(h)))return u;var E=Mn(u),I=Of(E,Mn(h))+1;return Ai(E,0,I).join("")}function _D(u,h,_){if(u=kt(u),u&&(_||h===r))return u.replace(Br,"");if(!u||!(h=cn(h)))return u;var E=Mn(u),I=Bf(E,Mn(h));return Ai(E,I).join("")}function bD(u,h){var _=U,E=K;if(Yt(h)){var I="separator"in h?h.separator:I;_="length"in h?mt(h.length):_,E="omission"in h?cn(h.omission):E}u=kt(u);var L=u.length;if(aa(u)){var Y=Mn(u);L=Y.length}if(_>=L)return u;var ee=_-ua(E);if(ee<1)return E;var ae=Y?Ai(Y,0,ee).join(""):u.slice(0,ee);if(I===r)return ae+E;if(Y&&(ee+=ae.length-ee),El(I)){if(u.slice(ee).search(I)){var De,ye=ae;for(I.global||(I=Uo(I.source,kt(ta.exec(I))+"g")),I.lastIndex=0;De=I.exec(ye);)var Fe=De.index;ae=ae.slice(0,Fe===r?ee:Fe)}}else if(u.indexOf(cn(I),ee)!=ee){var Le=ae.lastIndexOf(I);Le>-1&&(ae=ae.slice(0,Le))}return ae+E}function DD(u){return u=kt(u),u&&pr.test(u)?u.replace(Er,Yg):u}var yD=da(function(u,h,_){return u+(_?" ":"")+h.toUpperCase()}),Fl=bh("toUpperCase");function m0(u,h,_){return u=kt(u),h=_?r:h,h===r?Wg(u)?Qg(u):xg(u):u.match(h)||[]}var _0=bt(function(u,h){try{return on(u,r,h)}catch(_){return wl(_)?_:new dt(_)}}),wD=ai(function(u,h){return bn(h,function(_){_=Hn(_),ni(u,_,Dl(u[_],u))}),u});function ED(u){var h=u==null?0:u.length,_=rt();return u=h?Ht(u,function(E){if(typeof E[1]!="function")throw new Dn(o);return[_(E[0]),E[1]]}):[],bt(function(E){for(var I=-1;++I<h;){var L=u[I];if(on(L[0],this,E))return on(L[1],this,E)}})}function AD(u){return Yv(wn(u,f))}function Sl(u){return function(){return u}}function CD(u,h){return u==null||u!==u?h:u}var FD=yh(),SD=yh(!0);function en(u){return u}function Bl(u){return Jf(typeof u=="function"?u:wn(u,f))}function BD(u){return Xf(wn(u,f))}function OD(u,h){return eh(u,wn(h,f))}var MD=bt(function(u,h){return function(_){return nu(_,u,h)}}),PD=bt(function(u,h){return function(_){return nu(u,_,h)}});function Ol(u,h,_){var E=Cr(h),I=Yu(h,E);_==null&&!(Yt(h)&&(I.length||!E.length))&&(_=h,h=u,u=this,I=Yu(h,Cr(h)));var L=!(Yt(_)&&"chain"in _)||!!_.chain,Y=si(u);return bn(I,function(ee){var ae=h[ee];u[ee]=ae,Y&&(u.prototype[ee]=function(){var De=this.__chain__;if(L||De){var ye=u(this.__wrapped__),Fe=ye.__actions__=Jr(this.__actions__);return Fe.push({func:ae,args:arguments,thisArg:u}),ye.__chain__=De,ye}return ae.apply(u,_i([this.value()],arguments))})}),u}function kD(){return Or._===this&&(Or._=iv),this}function Ml(){}function TD(u){return u=mt(u),bt(function(h){return th(h,u)})}var ID=sl(Ht),xD=sl(wf),ND=sl(ko);function b0(u){return pl(u)?To(Hn(u)):hm(u)}function LD(u){return function(h){return u==null?r:Gi(u,h)}}var RD=Eh(),UD=Eh(!0);function Pl(){return[]}function kl(){return!1}function VD(){return{}}function jD(){return""}function zD(){return!0}function qD(u,h){if(u=mt(u),u<1||u>X)return[];var _=be,E=Ur(u,be);h=rt(h),u-=be;for(var I=No(E,h);++_<u;)h(_);return I}function WD(u){return pt(u)?Ht(u,Hn):fn(u)?[u]:Jr(Uh(kt(u)))}function HD(u){var h=++rv;return kt(u)+h}var $D=ts(function(u,h){return u+h},0),GD=ol("ceil"),KD=ts(function(u,h){return u/h},1),YD=ol("floor");function ZD(u){return u&&u.length?Ku(u,en,Go):r}function JD(u,h){return u&&u.length?Ku(u,rt(h,2),Go):r}function QD(u){return Cf(u,en)}function XD(u,h){return Cf(u,rt(h,2))}function ey(u){return u&&u.length?Ku(u,en,Jo):r}function ty(u,h){return u&&u.length?Ku(u,rt(h,2),Jo):r}var ry=ts(function(u,h){return u*h},1),ny=ol("round"),iy=ts(function(u,h){return u-h},0);function ay(u){return u&&u.length?xo(u,en):0}function uy(u,h){return u&&u.length?xo(u,rt(h,2)):0}return N.after=B2,N.ary=Zh,N.assign=gb,N.assignIn=c0,N.assignInWith=ps,N.assignWith=vb,N.at=mb,N.before=Jh,N.bind=Dl,N.bindAll=wD,N.bindKey=Qh,N.castArray=V2,N.chain=Gh,N.chunk=Ym,N.compact=Zm,N.concat=Jm,N.cond=ED,N.conforms=AD,N.constant=Sl,N.countBy=a2,N.create=_b,N.curry=Xh,N.curryRight=e0,N.debounce=t0,N.defaults=bb,N.defaultsDeep=Db,N.defer=O2,N.delay=M2,N.difference=Qm,N.differenceBy=Xm,N.differenceWith=e_,N.drop=t_,N.dropRight=r_,N.dropRightWhile=n_,N.dropWhile=i_,N.fill=a_,N.filter=s2,N.flatMap=c2,N.flatMapDeep=f2,N.flatMapDepth=h2,N.flatten=qh,N.flattenDeep=u_,N.flattenDepth=s_,N.flip=P2,N.flow=FD,N.flowRight=SD,N.fromPairs=o_,N.functions=Sb,N.functionsIn=Bb,N.groupBy=d2,N.initial=c_,N.intersection=f_,N.intersectionBy=h_,N.intersectionWith=d_,N.invert=Mb,N.invertBy=Pb,N.invokeMap=g2,N.iteratee=Bl,N.keyBy=v2,N.keys=Cr,N.keysIn=Xr,N.map=os,N.mapKeys=Tb,N.mapValues=Ib,N.matches=BD,N.matchesProperty=OD,N.memoize=cs,N.merge=xb,N.mergeWith=f0,N.method=MD,N.methodOf=PD,N.mixin=Ol,N.negate=fs,N.nthArg=TD,N.omit=Nb,N.omitBy=Lb,N.once=k2,N.orderBy=m2,N.over=ID,N.overArgs=T2,N.overEvery=xD,N.overSome=ND,N.partial=yl,N.partialRight=r0,N.partition=_2,N.pick=Rb,N.pickBy=h0,N.property=b0,N.propertyOf=LD,N.pull=m_,N.pullAll=Hh,N.pullAllBy=__,N.pullAllWith=b_,N.pullAt=D_,N.range=RD,N.rangeRight=UD,N.rearg=I2,N.reject=y2,N.remove=y_,N.rest=x2,N.reverse=_l,N.sampleSize=E2,N.set=Vb,N.setWith=jb,N.shuffle=A2,N.slice=w_,N.sortBy=S2,N.sortedUniq=O_,N.sortedUniqBy=M_,N.split=cD,N.spread=N2,N.tail=P_,N.take=k_,N.takeRight=T_,N.takeRightWhile=I_,N.takeWhile=x_,N.tap=Z_,N.throttle=L2,N.thru=ss,N.toArray=s0,N.toPairs=d0,N.toPairsIn=p0,N.toPath=WD,N.toPlainObject=l0,N.transform=zb,N.unary=R2,N.union=N_,N.unionBy=L_,N.unionWith=R_,N.uniq=U_,N.uniqBy=V_,N.uniqWith=j_,N.unset=qb,N.unzip=bl,N.unzipWith=$h,N.update=Wb,N.updateWith=Hb,N.values=va,N.valuesIn=$b,N.without=z_,N.words=m0,N.wrap=U2,N.xor=q_,N.xorBy=W_,N.xorWith=H_,N.zip=$_,N.zipObject=G_,N.zipObjectDeep=K_,N.zipWith=Y_,N.entries=d0,N.entriesIn=p0,N.extend=c0,N.extendWith=ps,Ol(N,N),N.add=$D,N.attempt=_0,N.camelCase=Zb,N.capitalize=g0,N.ceil=GD,N.clamp=Gb,N.clone=j2,N.cloneDeep=q2,N.cloneDeepWith=W2,N.cloneWith=z2,N.conformsTo=H2,N.deburr=v0,N.defaultTo=CD,N.divide=KD,N.endsWith=Jb,N.eq=kn,N.escape=Qb,N.escapeRegExp=Xb,N.every=u2,N.find=o2,N.findIndex=jh,N.findKey=yb,N.findLast=l2,N.findLastIndex=zh,N.findLastKey=wb,N.floor=YD,N.forEach=Kh,N.forEachRight=Yh,N.forIn=Eb,N.forInRight=Ab,N.forOwn=Cb,N.forOwnRight=Fb,N.get=Al,N.gt=$2,N.gte=G2,N.has=Ob,N.hasIn=Cl,N.head=Wh,N.identity=en,N.includes=p2,N.indexOf=l_,N.inRange=Kb,N.invoke=kb,N.isArguments=Zi,N.isArray=pt,N.isArrayBuffer=K2,N.isArrayLike=Qr,N.isArrayLikeObject=lr,N.isBoolean=Y2,N.isBuffer=Ci,N.isDate=Z2,N.isElement=J2,N.isEmpty=Q2,N.isEqual=X2,N.isEqualWith=eb,N.isError=wl,N.isFinite=tb,N.isFunction=si,N.isInteger=n0,N.isLength=hs,N.isMap=i0,N.isMatch=rb,N.isMatchWith=nb,N.isNaN=ib,N.isNative=ab,N.isNil=sb,N.isNull=ub,N.isNumber=a0,N.isObject=Yt,N.isObjectLike=rr,N.isPlainObject=lu,N.isRegExp=El,N.isSafeInteger=ob,N.isSet=u0,N.isString=ds,N.isSymbol=fn,N.isTypedArray=ga,N.isUndefined=lb,N.isWeakMap=cb,N.isWeakSet=fb,N.join=p_,N.kebabCase=eD,N.last=An,N.lastIndexOf=g_,N.lowerCase=tD,N.lowerFirst=rD,N.lt=hb,N.lte=db,N.max=ZD,N.maxBy=JD,N.mean=QD,N.meanBy=XD,N.min=ey,N.minBy=ty,N.stubArray=Pl,N.stubFalse=kl,N.stubObject=VD,N.stubString=jD,N.stubTrue=zD,N.multiply=ry,N.nth=v_,N.noConflict=kD,N.noop=Ml,N.now=ls,N.pad=nD,N.padEnd=iD,N.padStart=aD,N.parseInt=uD,N.random=Yb,N.reduce=b2,N.reduceRight=D2,N.repeat=sD,N.replace=oD,N.result=Ub,N.round=ny,N.runInContext=ne,N.sample=w2,N.size=C2,N.snakeCase=lD,N.some=F2,N.sortedIndex=E_,N.sortedIndexBy=A_,N.sortedIndexOf=C_,N.sortedLastIndex=F_,N.sortedLastIndexBy=S_,N.sortedLastIndexOf=B_,N.startCase=fD,N.startsWith=hD,N.subtract=iy,N.sum=ay,N.sumBy=uy,N.template=dD,N.times=qD,N.toFinite=oi,N.toInteger=mt,N.toLength=o0,N.toLower=pD,N.toNumber=Cn,N.toSafeInteger=pb,N.toString=kt,N.toUpper=gD,N.trim=vD,N.trimEnd=mD,N.trimStart=_D,N.truncate=bD,N.unescape=DD,N.uniqueId=HD,N.upperCase=yD,N.upperFirst=Fl,N.each=Kh,N.eachRight=Yh,N.first=Wh,Ol(N,function(){var u={};return qn(N,function(h,_){xt.call(N.prototype,_)||(u[_]=h)}),u}(),{chain:!1}),N.VERSION=n,bn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){N[u].placeholder=N}),bn(["drop","take"],function(u,h){wt.prototype[u]=function(_){_=_===r?1:_r(mt(_),0);var E=this.__filtered__&&!h?new wt(this):this.clone();return E.__filtered__?E.__takeCount__=Ur(_,E.__takeCount__):E.__views__.push({size:Ur(_,be),type:u+(E.__dir__<0?"Right":"")}),E},wt.prototype[u+"Right"]=function(_){return this.reverse()[u](_).reverse()}}),bn(["filter","map","takeWhile"],function(u,h){var _=h+1,E=_==V||_==z;wt.prototype[u]=function(I){var L=this.clone();return L.__iteratees__.push({iteratee:rt(I,3),type:_}),L.__filtered__=L.__filtered__||E,L}}),bn(["head","last"],function(u,h){var _="take"+(h?"Right":"");wt.prototype[u]=function(){return this[_](1).value()[0]}}),bn(["initial","tail"],function(u,h){var _="drop"+(h?"":"Right");wt.prototype[u]=function(){return this.__filtered__?new wt(this):this[_](1)}}),wt.prototype.compact=function(){return this.filter(en)},wt.prototype.find=function(u){return this.filter(u).head()},wt.prototype.findLast=function(u){return this.reverse().find(u)},wt.prototype.invokeMap=bt(function(u,h){return typeof u=="function"?new wt(this):this.map(function(_){return nu(_,u,h)})}),wt.prototype.reject=function(u){return this.filter(fs(rt(u)))},wt.prototype.slice=function(u,h){u=mt(u);var _=this;return _.__filtered__&&(u>0||h<0)?new wt(_):(u<0?_=_.takeRight(-u):u&&(_=_.drop(u)),h!==r&&(h=mt(h),_=h<0?_.dropRight(-h):_.take(h-u)),_)},wt.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},wt.prototype.toArray=function(){return this.take(be)},qn(wt.prototype,function(u,h){var _=/^(?:filter|find|map|reject)|While$/.test(h),E=/^(?:head|last)$/.test(h),I=N[E?"take"+(h=="last"?"Right":""):h],L=E||/^find/.test(h);I&&(N.prototype[h]=function(){var Y=this.__wrapped__,ee=E?[1]:arguments,ae=Y instanceof wt,De=ee[0],ye=ae||pt(Y),Fe=function(yt){var Ct=I.apply(N,_i([yt],ee));return E&&Le?Ct[0]:Ct};ye&&_&&typeof De=="function"&&De.length!=1&&(ae=ye=!1);var Le=this.__chain__,Ke=!!this.__actions__.length,it=L&&!Le,_t=ae&&!Ke;if(!L&&ye){Y=_t?Y:new wt(this);var at=u.apply(Y,ee);return at.__actions__.push({func:ss,args:[Fe],thisArg:r}),new yn(at,Le)}return it&&_t?u.apply(this,ee):(at=this.thru(Fe),it?E?at.value()[0]:at.value():at)})}),bn(["pop","push","shift","sort","splice","unshift"],function(u){var h=Tu[u],_=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",E=/^(?:pop|shift)$/.test(u);N.prototype[u]=function(){var I=arguments;if(E&&!this.__chain__){var L=this.value();return h.apply(pt(L)?L:[],I)}return this[_](function(Y){return h.apply(pt(Y)?Y:[],I)})}}),qn(wt.prototype,function(u,h){var _=N[h];if(_){var E=_.name+"";xt.call(ca,E)||(ca[E]=[]),ca[E].push({name:h,func:_})}}),ca[es(r,D).name]=[{name:"wrapper",func:r}],wt.prototype.clone=Dv,wt.prototype.reverse=yv,wt.prototype.value=wv,N.prototype.at=J_,N.prototype.chain=Q_,N.prototype.commit=X_,N.prototype.next=e2,N.prototype.plant=r2,N.prototype.reverse=n2,N.prototype.toJSON=N.prototype.valueOf=N.prototype.value=i2,N.prototype.first=N.prototype.head,Za&&(N.prototype[Za]=t2),N},sa=Xg();zi?((zi.exports=sa)._=sa,Bo._=sa):Or._=sa}).call(gr)})(K8,ro);const Y8=ro,fc="panelMode";function Z8(){const t=ur("select"),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[fc]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[fc]=a,r(a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[fc],r("select"))}}}const di=Z8();function cp(t,e,r){const n=t.slice();return n[7]=e[r][0],n[8]=e[r][1],n}function fp(t,e,r){const n=t.slice();return n[11]=e[r][0],n[12]=e[r][1],n}function hp(t){let e=t[12].text+"",r,n,i,a;return{c(){r=Se(e),n=q("b"),i=Se("::"),a=Ee()},l(o){r=Be(o,e),n=W(o,"B",{});var s=R(n);i=Be(s,"::"),s.forEach(M),a=Ae(o)},m(o,s){se(o,r,s),se(o,n,s),T(n,i),se(o,a,s)},p(o,s){s&1&&e!==(e=o[12].text+"")&&fr(r,e)},d(o){o&&M(r),o&&M(n),o&&M(a)}}}function dp(t,e){let r,n,i,a,o,s=Object.entries(e[8].weightedPrompts),l=[];for(let c=0;c<s.length;c+=1)l[c]=hp(fp(e,s,c));function p(){return e[5](e[7],e[8])}return{key:t,first:null,c(){r=q("li"),n=q("a");for(let c=0;c<l.length;c+=1)l[c].c();i=Ee(),this.h()},l(c){r=W(c,"LI",{});var f=R(r);n=W(f,"A",{class:!0});var d=R(n);for(let g=0;g<l.length;g+=1)l[g].l(d);d.forEach(M),i=Ae(f),f.forEach(M),this.h()},h(){S(n,"class","text-xs inline-block"),Qe(n,"active",e[1]===e[7]),this.first=r},m(c,f){se(c,r,f),T(r,n);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(n,null);T(r,i),a||(o=_e(n,"click",p),a=!0)},p(c,f){if(e=c,f&5){s=Object.entries(e[8].weightedPrompts);let d;for(d=0;d<s.length;d+=1){const g=fp(e,s,d);l[d]?l[d].p(g,f):(l[d]=hp(g),l[d].c(),l[d].m(n,null))}for(;d<l.length;d+=1)l[d].d(1);l.length=s.length}f&7&&Qe(n,"active",e[1]===e[7])},d(c){c&&M(r),Au(l,c),a=!1,o()}}}function J8(t){let e,r,n,i,a,o=[],s=new Map,l,p,c=t[2](t[0],pp,"desc");const f=d=>d[7];for(let d=0;d<c.length;d+=1){let g=cp(t,c,d),b=f(g);s.set(b,o[d]=dp(b,g))}return{c(){e=q("ul"),r=q("li"),n=q("a"),i=Se("New +"),a=Ee();for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=W(d,"UL",{class:!0});var g=R(e);r=W(g,"LI",{});var b=R(r);n=W(b,"A",{class:!0});var v=R(n);i=Be(v,"New +"),v.forEach(M),b.forEach(M),a=Ae(g);for(let m=0;m<o.length;m+=1)o[m].l(g);g.forEach(M),this.h()},h(){S(n,"class","text-xs inline-block"),S(e,"class","menu h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(d,g){se(d,e,g),T(e,r),T(r,n),T(n,i),T(e,a);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(e,null);l||(p=_e(n,"click",t[3]),l=!0)},p(d,[g]){g&23&&(c=d[2](d[0],pp,"desc"),o=Rn(o,g,f,1,d,c,s,e,Zn,dp,null,cp))},i:Me,o:Me,d(d){d&&M(e);for(let g=0;g<o.length;g+=1)o[g].d();l=!1,p()}}}const pp=t=>t[1].date;function Q8(t,e,r){let n,i,a;Ge(t,ot,c=>r(6,n=c)),Ge(t,Dy,c=>r(0,i=c)),Ge(t,Qi,c=>r(1,a=c));const{orderBy:o}=Y8;function s(){Qi.delete(),ot.update(Si({},n.weightMode)),di.update("edit")}function l(c,f){Qi.update(c),ot.update({...f}),di.update("edit")}return[i,a,o,s,l,(c,f)=>l(c,f)]}class X8 extends Xe{constructor(e){super(),et(this,e,Q8,J8,tt,{})}}function gp(t,e,r){const n=t.slice();return n[21]=e[r].id,n[22]=e[r].text,n}function vp(t,e){let r,n,i,a,o;function s(...p){return e[10](e[21],...p)}function l(...p){return e[11](e[21],...p)}return{key:t,first:null,c(){r=q("li"),n=q("input"),this.h()},l(p){r=W(p,"LI",{class:!0});var c=R(r);n=W(c,"INPUT",{type:!0,placeholder:!0,class:!0}),c.forEach(M),this.h()},h(){n.value=i=e[22],S(n,"type","text"),S(n,"placeholder",""),S(n,"class","input input-bordered input-sm w-full"),S(r,"class","p-1"),this.first=r},m(p,c){se(p,r,c),T(r,n),a||(o=[_e(n,"input",s),_e(n,"keydown",l),_e(n,"keyup",e[12])],a=!0)},p(p,c){e=p,c&4&&i!==(i=e[22])&&n.value!==i&&(n.value=i)},d(p){p&&M(r),a=!1,zt(o)}}}function e7(t){let e,r,n,i,a,o,s,l,p,c,f,d=[],g=new Map,b,v,m,D,B,w,C,F,k,O,A,x,U=t[2];const K=J=>J[21];for(let J=0;J<U.length;J+=1){let j=gp(t,U,J),V=K(j);g.set(V,d[J]=vp(V,j))}return{c(){e=q("div"),r=q("button"),n=Se("Paste"),i=Ee(),a=q("button"),o=Se("Save"),s=Ee(),l=q("button"),p=Se("Delete"),c=Ee(),f=q("ul");for(let J=0;J<d.length;J+=1)d[J].c();b=Ee(),v=q("li"),m=q("input"),D=Ee(),B=q("div"),w=q("p"),C=Se("Shift+Enter to add a line"),F=Ee(),k=q("p"),O=Se("Bksp to remove an empty line"),this.h()},l(J){e=W(J,"DIV",{class:!0});var j=R(e);r=W(j,"BUTTON",{class:!0});var V=R(r);n=Be(V,"Paste"),V.forEach(M),i=Ae(j),a=W(j,"BUTTON",{class:!0});var H=R(a);o=Be(H,"Save"),H.forEach(M),s=Ae(j),l=W(j,"BUTTON",{class:!0});var z=R(l);p=Be(z,"Delete"),z.forEach(M),j.forEach(M),c=Ae(J),f=W(J,"UL",{class:!0});var Q=R(f);for(let we=0;we<d.length;we+=1)d[we].l(Q);b=Ae(Q),v=W(Q,"LI",{class:!0});var X=R(v);m=W(X,"INPUT",{type:!0,placeholder:!0,class:!0}),X.forEach(M),Q.forEach(M),D=Ae(J),B=W(J,"DIV",{class:!0});var te=R(B);w=W(te,"P",{});var le=R(w);C=Be(le,"Shift+Enter to add a line"),le.forEach(M),F=Ae(te),k=W(te,"P",{});var be=R(k);O=Be(be,"Bksp to remove an empty line"),be.forEach(M),te.forEach(M),this.h()},h(){S(r,"class","btn btn-sm btn-info mx-2"),S(a,"class","btn btn-sm btn-success mx-2"),S(l,"class","btn btn-sm btn-error mx-2"),S(e,"class","flex px-8 py-2 justify-center bg-base-100"),S(m,"type","text"),S(m,"placeholder","Add prompt"),S(m,"class","input input-bordered input-sm w-full italic"),S(v,"class","p-1"),S(f,"class","h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block"),S(B,"class","w-full justify-end bg-base-100 p-2 text-xs select-none")},m(J,j){se(J,e,j),T(e,r),T(r,n),T(e,i),T(e,a),T(a,o),T(e,s),T(e,l),T(l,p),se(J,c,j),se(J,f,j);for(let V=0;V<d.length;V+=1)d[V]&&d[V].m(f,null);T(f,b),T(f,v),T(v,m),rn(m,t[0]),se(J,D,j),se(J,B,j),T(B,w),T(w,C),T(B,F),T(B,k),T(k,O),A||(x=[_e(r,"click",t[4]),_e(a,"click",t[3]),_e(l,"click",t[5]),_e(m,"input",t[13]),_e(m,"keydown",t[14])],A=!0)},p(J,[j]){j&198&&(U=J[2],d=Rn(d,j,K,1,J,U,g,f,Zn,vp,b,gp)),j&1&&m.value!==J[0]&&rn(m,J[0])},i:Me,o:Me,d(J){J&&M(e),J&&M(c),J&&M(f);for(let j=0;j<d.length;j+=1)d[j].d();J&&M(D),J&&M(B),A=!1,zt(x)}}}function t7(t,e,r){let n,i,a,o;Ge(t,ot,A=>r(9,i=A)),Ge(t,Qi,A=>r(15,a=A)),Ge(t,Rr,A=>r(16,o=A));let s="",l=Object.keys(i.weightedPrompts).length,p=!1;function c(){du.update(mo(),{...i,date:Date.now()}),di.update("select")}function f(){navigator.clipboard.readText().then(A=>{const x=_u(A);d(x)})}function d(A){const x=Math.max(...A.map(([K,J])=>J)),U=A.reduce((K,[J,j],V)=>(K[V]=Tr(V,J,j,j/x),o[J]||Rr.update(J,null),K),{});Qi.delete(),ot.update(Si(U,i.weightMode)),r(0,s="")}function g(){a&&du.delete(a),Qi.delete(),ot.delete(),di.update("select")}function b(A){console.log("remove",A);const U=Object.entries(i.weightedPrompts).filter(([K])=>K!==A).map(([K,J])=>[J.text,J.parsedWeight]);return d(U)}function v(A,x){console.log("change",A);let U={...i.weightedPrompts};const K={...U[A],text:x};U[A]=K,ot.update({...i,weightedPrompts:U})}const m=Qs(v,500);function D(A){console.log("new",A);const x=Object.entries(i.weightedPrompts).map(([U,K])=>[K.text,K.parsedWeight]);return x.push([A,1]),d(x)}function B(A,x=null){const U=A.key,K=A.target.value;if(U==="Shift"){r(1,p=!0);return}if(x!==null){if(U==="Enter"&&K!==""?v(x,K):U==="Backspace"&&K===""&&b(x),U==="Enter"&&p){const j=Object.entries(i.weightedPrompts).map(([H,z])=>[z.text,z.parsedWeight]),V=parseInt(x)+1;return console.log("adding prompt at",x+1),j.splice(V,0,["",1]),d(j)}}else U==="Enter"&&K!==""&&D(K)}const w=(A,x)=>m(A,x.target.value),C=(A,x)=>B(x,A),F=A=>{A.key==="Shift"&&r(1,p=!1)};function k(){s=this.value,r(0,s),r(9,i),r(8,l)}const O=A=>B(A);return t.$$.update=()=>{if(t.$$.dirty&768){const A=Object.keys(i.weightedPrompts).length;A>l&&(r(8,l=A),r(0,s=""))}t.$$.dirty&512&&r(2,n=Object.entries(i.weightedPrompts).map(([A,x])=>({id:A,text:x.text})))},[s,p,n,c,f,g,m,B,l,i,w,C,F,k,O]}class r7 extends Xe{constructor(e){super(),et(this,e,t7,e7,tt,{})}}const n7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. The first sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. The middle three sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. The final sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,i7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 10 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. Four sentences should describe the subject.
    d. Four sentences should describe the scene.
    e. Tow sentences should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,a7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 10 concepts.
    a. Each concept should be 10 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
`,u7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 20 concepts.
    a. Each concept should be 5 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
3. Do not use hyphens to mark list items.
4. Do not title the list.
`,s7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. One sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. Two sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. One sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
    f. One sentence should be a poetic concept or feeling. Example: The unfathomable depths of a lover's sigh.
        i. The poetic concept should be intense.
        ii. The poetic concept should be emotional.
        iii. The poetic concept should include abstract words.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`;function o7(){const t=ur({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith("directive")){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=Ot(t),p={...s[a]||{},...o};i&&(localStorage[`directive_${a}`]=JSON.stringify(p));const c={...s,[a]:p};r(c)},get:a=>Ot(t)[a],delete:a=>{i&&delete localStorage[`directive_${a}`];const o={...Ot(t)};delete o[a],r(o)}}}const no=o7(),l7=Cu(no,t=>Object.entries(Ot(no))),hc="preferredDirective";function c7(){const t=ur(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[hc]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[hc]=a,r(a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[hc],r(""))}}}const Es=c7(),dc="metaPrompt";function f7(){const t=ur(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[dc]||""),{subscribe:e,update:a=>{i&&(localStorage[dc]=a,r(a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[dc],r(""))}}}const Uc=f7(),ya=ur("");function mp(t,e,r){const n=t.slice();return n[21]=e[r][0],n[22]=e[r][1],n}function _p(t,e){let r,n=e[22].name+"",i,a=e[22].builtIn?" (Built-In)":" (User)",o,s,l;return{key:t,first:null,c(){r=q("option"),i=Se(n),o=Se(a),this.h()},l(p){r=W(p,"OPTION",{});var c=R(r);i=Be(c,n),o=Be(c,a),c.forEach(M),this.h()},h(){r.__value=s=e[21],r.value=r.__value,r.selected=l=e[3]===e[21],this.first=r},m(p,c){se(p,r,c),T(r,i),T(r,o)},p(p,c){e=p,c&16&&n!==(n=e[22].name+"")&&fr(i,n),c&16&&a!==(a=e[22].builtIn?" (Built-In)":" (User)")&&fr(o,a),c&16&&s!==(s=e[21])&&(r.__value=s,r.value=r.__value),c&24&&l!==(l=e[3]===e[21])&&(r.selected=l)},d(p){p&&M(r)}}}function bp(t){let e,r,n,i,a,o,s,l,p,c,f,d,g,b,v=!t[7]&&Dp(t),m=t[6]&&yp(t);function D(C,F){return C[1]?d7:h7}let B=D(t),w=B(t);return{c(){v&&v.c(),e=Ee(),r=q("div"),n=q("textarea"),i=Ee(),a=q("div"),o=q("textarea"),s=Ee(),l=q("div"),m&&m.c(),p=Ee(),c=q("button"),f=Se("Preview"),d=Ee(),w.c(),this.h()},l(C){v&&v.l(C),e=Ae(C),r=W(C,"DIV",{class:!0});var F=R(r);n=W(F,"TEXTAREA",{class:!0,placeholder:!0}),R(n).forEach(M),F.forEach(M),i=Ae(C),a=W(C,"DIV",{class:!0});var k=R(a);o=W(k,"TEXTAREA",{class:!0,placeholder:!0}),R(o).forEach(M),k.forEach(M),s=Ae(C),l=W(C,"DIV",{class:!0});var O=R(l);m&&m.l(O),p=Ae(O),c=W(O,"BUTTON",{class:!0});var A=R(c);f=Be(A,"Preview"),A.forEach(M),d=Ae(O),w.l(O),O.forEach(M),this.h()},h(){S(n,"class","font-mono text-xs textarea textarea-bordered w-full h-full resize-none"),S(n,"placeholder","GPT Directives"),S(r,"class","w-full p-2 h-1/2"),o.value=t[9],S(o,"class","textarea textarea-bordered w-full h-full resize-none"),S(o,"placeholder","Describe the prompt to generate."),S(a,"class","w-full p-2 h-1/5"),S(c,"class","btn btn-sm btn btn-info"),S(l,"class","w-full p-2 h-12 flex justify-between")},m(C,F){v&&v.m(C,F),se(C,e,F),se(C,r,F),T(r,n),rn(n,t[8]),se(C,i,F),se(C,a,F),T(a,o),se(C,s,F),se(C,l,F),m&&m.m(l,null),T(l,p),T(l,c),T(c,f),T(l,d),w.m(l,null),g||(b=[_e(n,"input",t[17]),_e(o,"input",t[18]),_e(c,"click",function(){Fa(t[0])&&t[0].apply(this,arguments)})],g=!0)},p(C,F){t=C,t[7]?v&&(v.d(1),v=null):v?v.p(t,F):(v=Dp(t),v.c(),v.m(e.parentNode,e)),F&256&&rn(n,t[8]),F&512&&(o.value=t[9]),t[6]?m?m.p(t,F):(m=yp(t),m.c(),m.m(l,p)):m&&(m.d(1),m=null),B===(B=D(t))&&w?w.p(t,F):(w.d(1),w=B(t),w&&(w.c(),w.m(l,null)))},d(C){v&&v.d(C),C&&M(e),C&&M(r),C&&M(i),C&&M(a),C&&M(s),C&&M(l),m&&m.d(),w.d(),g=!1,zt(b)}}}function Dp(t){let e,r,n,i,a,o,s;return{c(){e=q("div"),r=q("input"),n=Ee(),i=q("button"),a=Se("Save"),this.h()},l(l){e=W(l,"DIV",{class:!0});var p=R(e);r=W(p,"INPUT",{type:!0,placeholder:!0,class:!0}),n=Ae(p),i=W(p,"BUTTON",{class:!0});var c=R(i);a=Be(c,"Save"),c.forEach(M),p.forEach(M),this.h()},h(){S(r,"type","text"),S(r,"placeholder","Name"),S(r,"class","input input-bordered input-sm w-full max-w-xs"),S(i,"class","btn btn-sm btn-primary ml-4"),S(e,"class","w-full p-2 h-12 flex justify-between")},m(l,p){se(l,e,p),T(e,r),rn(r,t[5]),T(e,n),T(e,i),T(i,a),o||(s=[_e(r,"input",t[16]),_e(i,"click",t[10])],o=!0)},p(l,p){p&32&&r.value!==l[5]&&rn(r,l[5])},d(l){l&&M(e),o=!1,zt(s)}}}function yp(t){let e,r,n,i;return{c(){e=q("button"),r=Se("Delete"),this.h()},l(a){e=W(a,"BUTTON",{class:!0});var o=R(e);r=Be(o,"Delete"),o.forEach(M),this.h()},h(){S(e,"class","btn btn-sm btn-error")},m(a,o){se(a,e,o),T(e,r),n||(i=_e(e,"click",t[11]),n=!0)},p:Me,d(a){a&&M(e),n=!1,i()}}}function h7(t){let e,r,n,i;return{c(){e=q("button"),r=Se("Generate"),this.h()},l(a){e=W(a,"BUTTON",{class:!0});var o=R(e);r=Be(o,"Generate"),o.forEach(M),this.h()},h(){S(e,"class","btn btn-sm btn-primary")},m(a,o){se(a,e,o),T(e,r),n||(i=_e(e,"click",function(){Fa(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(a,o){t=a},d(a){a&&M(e),n=!1,i()}}}function d7(t){let e,r;return{c(){e=q("button"),r=Se("Generating"),this.h()},l(n){e=W(n,"BUTTON",{class:!0});var i=R(e);r=Be(i,"Generating"),i.forEach(M),this.h()},h(){S(e,"class","btn btn-sm btn disabled")},m(n,i){se(n,e,i),T(e,r)},p:Me,d(n){n&&M(e)}}}function p7(t){let e,r,n,i,a,o,s,l,p,c,f=[],d=new Map,g,b,v,m,D,B,w,C=Object.entries(t[4]);const F=O=>O[21];for(let O=0;O<C.length;O+=1){let A=mp(t,C,O),x=F(A);d.set(x,f[O]=_p(x,A))}let k=t[3]&&bp(t);return{c(){e=q("div"),r=q("div"),n=q("label"),i=q("span"),a=Se("Pick a directive for prompt creation"),o=Ee(),s=q("select"),l=q("option"),p=Se("Pick one");for(let O=0;O<f.length;O+=1)f[O].c();g=q("option"),b=Se("New"),m=Ee(),k&&k.c(),D=Ft(),this.h()},l(O){e=W(O,"DIV",{class:!0});var A=R(e);r=W(A,"DIV",{class:!0});var x=R(r);n=W(x,"LABEL",{class:!0});var U=R(n);i=W(U,"SPAN",{class:!0});var K=R(i);a=Be(K,"Pick a directive for prompt creation"),K.forEach(M),U.forEach(M),o=Ae(x),s=W(x,"SELECT",{class:!0});var J=R(s);l=W(J,"OPTION",{});var j=R(l);p=Be(j,"Pick one"),j.forEach(M);for(let H=0;H<f.length;H+=1)f[H].l(J);g=W(J,"OPTION",{});var V=R(g);b=Be(V,"New"),V.forEach(M),J.forEach(M),x.forEach(M),A.forEach(M),m=Ae(O),k&&k.l(O),D=Ft(),this.h()},h(){S(i,"class","label-text"),S(n,"class","label"),l.disabled=!0,l.selected=c=t[3]===null,l.__value="Pick one",l.value=l.__value,g.__value="new",g.value=g.__value,g.selected=v=t[3]==="new",S(s,"class","select select-bordered"),S(r,"class","form-control w-full max-w-xs mb-4"),S(e,"class","flex justify-center")},m(O,A){se(O,e,A),T(e,r),T(r,n),T(n,i),T(i,a),T(r,o),T(r,s),T(s,l),T(l,p);for(let x=0;x<f.length;x+=1)f[x]&&f[x].m(s,null);T(s,g),T(g,b),Pi(s,t[3]),se(O,m,A),k&&k.m(O,A),se(O,D,A),B||(w=_e(s,"change",t[12]),B=!0)},p(O,[A]){A&24&&c!==(c=O[3]===null)&&(l.selected=c),A&24&&(C=Object.entries(O[4]),f=Rn(f,A,F,1,O,C,d,s,Zn,_p,g,mp)),A&24&&v!==(v=O[3]==="new")&&(g.selected=v),A&24&&Pi(s,O[3]),O[3]?k?k.p(O,A):(k=bp(O),k.c(),k.m(D.parentNode,D)):k&&(k.d(1),k=null)},i:Me,o:Me,d(O){O&&M(e);for(let A=0;A<f.length;A+=1)f[A].d();O&&M(m),k&&k.d(O),O&&M(D),B=!1,w()}}}function g7(t,e,r){let n,i,a,o,s,l,p,c;Ge(t,ya,A=>r(8,s=A)),Ge(t,Es,A=>r(14,l=A)),Ge(t,l7,A=>r(15,p=A)),Ge(t,Uc,A=>r(9,c=A));let{togglePreview:f=()=>{}}=e,{isGenerating:d=!1}=e,{handleGeneratePrompt:g=()=>{}}=e,b={C:{name:"Five Sentences",text:n7,builtIn:!0},D:{name:"Ten Sentences",text:i7,builtIn:!0},E:{name:"Fragments",text:a7,builtIn:!0},F:{name:"Concept Shotgun",text:u7,builtIn:!0},G:{name:"Poetic Accents",text:s7,builtIn:!0}},v=null,m="";function D(){const A=v==="new"?mo():v;no.update(A,{name:m,text:s,builtIn:!1}),v==="new"&&(r(3,v=A),Es.update(A))}function B(){no.delete(v),r(3,v=null),r(5,m=""),ya.set(""),Es.delete()}function w(A){r(3,v=A),Es.update(A),A&&A!=="new"?(r(5,m=i[A].name),ya.set(i[A].text)):A==="new"&&(r(5,m=""),ya.set(""))}function C(A){w(A.target.value)}function F(){m=this.value,r(5,m)}function k(){s=this.value,ya.set(s)}const O=A=>Uc.update(A.target.value);return t.$$set=A=>{"togglePreview"in A&&r(0,f=A.togglePreview),"isGenerating"in A&&r(1,d=A.isGenerating),"handleGeneratePrompt"in A&&r(2,g=A.handleGeneratePrompt)},t.$$.update=()=>{t.$$.dirty&32768&&r(13,n=p.reduce((A,[x,U])=>(A[x]={name:U.name,text:U.text,builtIn:!1},A),{})),t.$$.dirty&8192&&r(4,i=Object.entries({...b,...n}).reduce((A,[x,U])=>(A[x]=U,A),{})),t.$$.dirty&16392&&v===null&&l&&(r(3,v=l),w(v)),t.$$.dirty&24&&r(7,a=v&&v!=="new"&&i[v].builtIn),t.$$.dirty&24&&r(6,o=v&&v!=="new"&&!i[v].builtIn)},[f,d,g,v,i,m,o,a,s,c,D,B,C,n,l,p,F,k,O]}class v7 extends Xe{constructor(e){super(),et(this,e,g7,p7,tt,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}function m7(t,e){return`${t}

Use the following text to generate output based on the instructions above:

${e}`}const lg=Cu([ya,Uc,Ii],t=>mu(m7(t[0],t[1]),t[2]));function _7(t){let e,r,n,i;return{c(){e=q("button"),r=Se("Generate"),this.h()},l(a){e=W(a,"BUTTON",{class:!0});var o=R(e);r=Be(o,"Generate"),o.forEach(M),this.h()},h(){S(e,"class","btn btn-sm btn-primary")},m(a,o){se(a,e,o),T(e,r),n||(i=_e(e,"click",function(){Fa(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(a,o){t=a},d(a){a&&M(e),n=!1,i()}}}function b7(t){let e,r;return{c(){e=q("button"),r=Se("Generating"),this.h()},l(n){e=W(n,"BUTTON",{class:!0});var i=R(e);r=Be(i,"Generating"),i.forEach(M),this.h()},h(){S(e,"class","btn btn-sm btn disabled")},m(n,i){se(n,e,i),T(e,r)},p:Me,d(n){n&&M(e)}}}function D7(t){let e,r,n,i,a,o,s,l,p,c;function f(b,v){return b[1]?b7:_7}let d=f(t),g=d(t);return{c(){e=q("div"),r=q("p"),n=Se(t[3]),i=Ee(),a=q("div"),o=q("button"),s=Se("Back"),l=Ee(),g.c(),this.h()},l(b){e=W(b,"DIV",{class:!0});var v=R(e);r=W(v,"P",{class:!0});var m=R(r);n=Be(m,t[3]),m.forEach(M),v.forEach(M),i=Ae(b),a=W(b,"DIV",{class:!0});var D=R(a);o=W(D,"BUTTON",{class:!0});var B=R(o);s=Be(B,"Back"),B.forEach(M),l=Ae(D),g.l(D),D.forEach(M),this.h()},h(){S(r,"class","font-mono text-xs whitespace-pre-wrap"),S(e,"class","p-4 overflow-y-auto"),S(o,"class","btn btn-sm btn btn-info"),S(a,"class","w-full p-2 h-12 flex justify-between")},m(b,v){se(b,e,v),T(e,r),T(r,n),se(b,i,v),se(b,a,v),T(a,o),T(o,s),T(a,l),g.m(a,null),p||(c=_e(o,"click",function(){Fa(t[0])&&t[0].apply(this,arguments)}),p=!0)},p(b,[v]){t=b,v&8&&fr(n,t[3]),d===(d=f(t))&&g?g.p(t,v):(g.d(1),g=d(t),g&&(g.c(),g.m(a,null)))},i:Me,o:Me,d(b){b&&M(e),b&&M(i),b&&M(a),g.d(),p=!1,c()}}}function y7(t,e,r){let n;Ge(t,lg,s=>r(3,n=s));let{togglePreview:i=()=>{}}=e,{isGenerating:a=!1}=e,{handleGeneratePrompt:o=()=>{}}=e;return t.$$set=s=>{"togglePreview"in s&&r(0,i=s.togglePreview),"isGenerating"in s&&r(1,a=s.isGenerating),"handleGeneratePrompt"in s&&r(2,o=s.handleGeneratePrompt)},[i,a,o,n]}class w7 extends Xe{constructor(e){super(),et(this,e,y7,D7,tt,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}const pc="preferredModel";function E7(){const t=ur(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[pc]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[pc]=a,r(a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[pc],r(""))}}}const Vc=E7();function A7(t){let e,r,n;return{c(){e=q("div"),r=q("p"),n=Se("Set Open AI Key in settings for GPT generation."),this.h()},l(i){e=W(i,"DIV",{class:!0});var a=R(e);r=W(a,"P",{class:!0});var o=R(r);n=Be(o,"Set Open AI Key in settings for GPT generation."),o.forEach(M),a.forEach(M),this.h()},h(){S(r,"class","text-center"),S(e,"class","w-full p-2 flex justify-center")},m(i,a){se(i,e,a),T(e,r),T(r,n)},p:Me,i:Me,o:Me,d(i){i&&M(e)}}}function C7(t){let e,r,n,i;const a=[S7,F7],o=[];function s(l,p){return l[1]?0:1}return e=s(t),r=o[e]=a[e](t),{c(){r.c(),n=Ft()},l(l){r.l(l),n=Ft()},m(l,p){o[e].m(l,p),se(l,n,p),i=!0},p(l,p){let c=e;e=s(l),e===c?o[e].p(l,p):(ir(),ve(o[c],1,1,()=>{o[c]=null}),ar(),r=o[e],r?r.p(l,p):(r=o[e]=a[e](l),r.c()),fe(r,1),r.m(n.parentNode,n))},i(l){i||(fe(r),i=!0)},o(l){ve(r),i=!1},d(l){o[e].d(l),l&&M(n)}}}function F7(t){let e,r;return e=new v7({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p(n,i){const a={};i&1&&(a.isGenerating=n[0]),e.$set(a)},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function S7(t){let e,r;return e=new w7({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p(n,i){const a={};i&1&&(a.isGenerating=n[0]),e.$set(a)},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function B7(t){let e,r,n,i;const a=[C7,A7],o=[];function s(l,p){return l[2]?0:1}return r=s(t),n=o[r]=a[r](t),{c(){e=q("div"),n.c(),this.h()},l(l){e=W(l,"DIV",{class:!0});var p=R(e);n.l(p),p.forEach(M),this.h()},h(){S(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(l,p){se(l,e,p),o[r].m(e,null),i=!0},p(l,[p]){n.p(l,p)},i(l){i||(fe(n),i=!0)},o(l){ve(n),i=!1},d(l){l&&M(e),o[r].d()}}}function O7(t,e,r){let n,i,a,o,s,l;Ge(t,lg,D=>r(7,i=D)),Ge(t,ot,D=>r(8,a=D)),Ge(t,Rr,D=>r(9,o=D)),Ge(t,Vc,D=>r(5,s=D)),Ge(t,hi,D=>r(10,l=D));const p=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001"];let c=!1,f=l,d=!1;function g(D,B){const w=to(D),C=n||"gpt-3.5-turbo";r(0,c=!0),y8(w,B,C).then(F=>{console.log(F),F.data.choices.forEach((k,O)=>{const A=_u(k.message.content);console.log(A);const x=A.reduce((U,[K,J],j)=>(U[j]=Tr(j,K,J),o[K]||Rr.update(K,null),U),{});ot.update(Si(x,a.weightMode)),di.update("edit"),Ii.shuffle()})}).finally(()=>{r(0,c=!1)})}function b(D,B){const w=to(D),C=n||"text-davinci-003";r(0,c=!0),D8(w,B,C).then(F=>{console.log(F),F.data.choices.forEach((k,O)=>{const A=_u(k.text);console.log(A);const x=A.reduce((U,[K,J],j)=>(U[j]=Tr(j,K,J),o[K]||Rr.update(K,null),U),{});ot.update(Si(x,a.weightMode)),di.update("edit"),Ii.shuffle()})}).finally(()=>{r(0,c=!1)})}function v(){f&&(p.includes(n)?b(f,i):g(f,i))}function m(){console.log(i),r(1,d=!d)}return t.$$.update=()=>{t.$$.dirty&32&&(n=s||null)},[c,d,f,v,m,s]}class M7 extends Xe{constructor(e){super(),et(this,e,O7,B7,tt,{})}}function wp(t,e,r){const n=t.slice();return n[18]=e[r],n}function Ep(t,e,r){const n=t.slice();return n[18]=e[r],n}function P7(t){return{c:Me,l:Me,m:Me,p:Me,d:Me}}function k7(t){let e,r,n=t[0].length>0&&Ap(t),i=t[1].length>0&&Fp(t);return{c(){n&&n.c(),e=Ee(),i&&i.c(),r=Ft()},l(a){n&&n.l(a),e=Ae(a),i&&i.l(a),r=Ft()},m(a,o){n&&n.m(a,o),se(a,e,o),i&&i.m(a,o),se(a,r,o)},p(a,o){a[0].length>0?n?n.p(a,o):(n=Ap(a),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),a[1].length>0?i?i.p(a,o):(i=Fp(a),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){n&&n.d(a),a&&M(e),i&&i.d(a),a&&M(r)}}}function Ap(t){let e,r,n,i,a,o,s,l,p,c,f=[],d=new Map,g,b,v=t[0];const m=D=>D[18];for(let D=0;D<v.length;D+=1){let B=Ep(t,v,D),w=m(B);d.set(w,f[D]=Cp(w,B))}return{c(){e=q("div"),r=q("div"),n=q("label"),i=q("span"),a=Se("Pick a model to use for model generation"),o=Ee(),s=q("select"),l=q("option"),p=Se("Pick one");for(let D=0;D<f.length;D+=1)f[D].c();this.h()},l(D){e=W(D,"DIV",{class:!0});var B=R(e);r=W(B,"DIV",{class:!0});var w=R(r);n=W(w,"LABEL",{class:!0});var C=R(n);i=W(C,"SPAN",{class:!0});var F=R(i);a=Be(F,"Pick a model to use for model generation"),F.forEach(M),C.forEach(M),o=Ae(w),s=W(w,"SELECT",{class:!0});var k=R(s);l=W(k,"OPTION",{});var O=R(l);p=Be(O,"Pick one"),O.forEach(M);for(let A=0;A<f.length;A+=1)f[A].l(k);k.forEach(M),w.forEach(M),B.forEach(M),this.h()},h(){S(i,"class","label-text"),S(n,"class","label"),l.disabled=!0,l.selected=c=t[2]===null,l.__value="Pick one",l.value=l.__value,S(s,"class","select select-bordered"),S(r,"class","form-control w-full max-w-xs mb-4"),S(e,"class","flex justify-center")},m(D,B){se(D,e,B),T(e,r),T(r,n),T(n,i),T(i,a),T(r,o),T(r,s),T(s,l),T(l,p);for(let w=0;w<f.length;w+=1)f[w]&&f[w].m(s,null);Pi(s,t[2]),g||(b=_e(s,"change",t[6]),g=!0)},p(D,B){B&5&&c!==(c=D[2]===null)&&(l.selected=c),B&5&&(v=D[0],f=Rn(f,B,m,1,D,v,d,s,Zn,Cp,null,Ep)),B&5&&Pi(s,D[2])},d(D){D&&M(e);for(let B=0;B<f.length;B+=1)f[B].d();g=!1,b()}}}function Cp(t,e){let r,n=e[18]+"",i,a,o;return{key:t,first:null,c(){r=q("option"),i=Se(n),this.h()},l(s){r=W(s,"OPTION",{});var l=R(r);i=Be(l,n),l.forEach(M),this.h()},h(){r.__value=a=e[18],r.value=r.__value,r.selected=o=e[2]===e[18],this.first=r},m(s,l){se(s,r,l),T(r,i)},p(s,l){e=s,l&1&&n!==(n=e[18]+"")&&fr(i,n),l&1&&a!==(a=e[18])&&(r.__value=a,r.value=r.__value),l&5&&o!==(o=e[2]===e[18])&&(r.selected=o)},d(s){s&&M(r)}}}function Fp(t){let e,r,n,i,a,o,s,l,p,c,f=[],d=new Map,g,b,v=t[1];const m=D=>D[18];for(let D=0;D<v.length;D+=1){let B=wp(t,v,D),w=m(B);d.set(w,f[D]=Sp(w,B))}return{c(){e=q("div"),r=q("div"),n=q("label"),i=q("span"),a=Se("Pick a model to use for prompt embedding"),o=Ee(),s=q("select"),l=q("option"),p=Se("Pick one");for(let D=0;D<f.length;D+=1)f[D].c();this.h()},l(D){e=W(D,"DIV",{class:!0});var B=R(e);r=W(B,"DIV",{class:!0});var w=R(r);n=W(w,"LABEL",{class:!0});var C=R(n);i=W(C,"SPAN",{class:!0});var F=R(i);a=Be(F,"Pick a model to use for prompt embedding"),F.forEach(M),C.forEach(M),o=Ae(w),s=W(w,"SELECT",{class:!0});var k=R(s);l=W(k,"OPTION",{});var O=R(l);p=Be(O,"Pick one"),O.forEach(M);for(let A=0;A<f.length;A+=1)f[A].l(k);k.forEach(M),w.forEach(M),B.forEach(M),this.h()},h(){S(i,"class","label-text"),S(n,"class","label"),l.disabled=!0,l.selected=c=t[3]===null,l.__value="Pick one",l.value=l.__value,S(s,"class","select select-bordered"),S(r,"class","form-control w-full max-w-xs mb-4"),S(e,"class","flex justify-center")},m(D,B){se(D,e,B),T(e,r),T(r,n),T(n,i),T(i,a),T(r,o),T(r,s),T(s,l),T(l,p);for(let w=0;w<f.length;w+=1)f[w]&&f[w].m(s,null);Pi(s,t[3]),g||(b=_e(s,"change",t[7]),g=!0)},p(D,B){B&10&&c!==(c=D[3]===null)&&(l.selected=c),B&10&&(v=D[1],f=Rn(f,B,m,1,D,v,d,s,Zn,Sp,null,wp)),B&10&&Pi(s,D[3])},d(D){D&&M(e);for(let B=0;B<f.length;B+=1)f[B].d();g=!1,b()}}}function Sp(t,e){let r,n=e[18]+"",i,a,o;return{key:t,first:null,c(){r=q("option"),i=Se(n),this.h()},l(s){r=W(s,"OPTION",{});var l=R(r);i=Be(l,n),l.forEach(M),this.h()},h(){r.__value=a=e[18],r.value=r.__value,r.selected=o=e[3]===e[18],this.first=r},m(s,l){se(s,r,l),T(r,i)},p(s,l){e=s,l&2&&n!==(n=e[18]+"")&&fr(i,n),l&2&&a!==(a=e[18])&&(r.__value=a,r.value=r.__value),l&10&&o!==(o=e[3]===e[18])&&(r.selected=o)},d(s){s&&M(r)}}}function T7(t){let e,r,n;return{c(){e=q("div"),r=q("div"),n=q("progress"),this.h()},l(i){e=W(i,"DIV",{class:!0});var a=R(e);r=W(a,"DIV",{class:!0});var o=R(r);n=W(o,"PROGRESS",{class:!0}),R(n).forEach(M),o.forEach(M),a.forEach(M),this.h()},h(){S(n,"class","progress progress-primary w-56"),S(r,"class","form-control w-full flex flex-col max-w-xs"),S(e,"class","py-10 flex justify-center")},m(i,a){se(i,e,a),T(e,r),T(r,n)},p:Me,d(i){i&&M(e)}}}function I7(t){let e,r,n,i,a,o,s,l,p,c,f,d,g,b,v,m,D={ctx:t,current:null,token:null,hasCatch:!1,pending:T7,then:k7,catch:P7,value:17};return Os(b=t[4],D),{c(){e=q("div"),r=q("div"),n=q("div"),i=q("label"),a=q("span"),o=Se("Open AI Key"),s=Ee(),l=q("input"),p=Ee(),c=q("label"),f=q("button"),d=Se("Clear"),g=Ee(),D.block.c(),this.h()},l(B){e=W(B,"DIV",{class:!0});var w=R(e);r=W(w,"DIV",{class:!0});var C=R(r);n=W(C,"DIV",{class:!0});var F=R(n);i=W(F,"LABEL",{class:!0});var k=R(i);a=W(k,"SPAN",{class:!0});var O=R(a);o=Be(O,"Open AI Key"),O.forEach(M),k.forEach(M),s=Ae(F),l=W(F,"INPUT",{type:!0,placeholder:!0,class:!0}),p=Ae(F),c=W(F,"LABEL",{class:!0});var A=R(c);f=W(A,"BUTTON",{class:!0});var x=R(f);d=Be(x,"Clear"),x.forEach(M),A.forEach(M),F.forEach(M),C.forEach(M),g=Ae(w),D.block.l(w),w.forEach(M),this.h()},h(){S(a,"class","label-text-alt"),S(i,"class","label"),l.value=t[5],S(l,"type","password"),S(l,"placeholder","Open AI Key"),S(l,"class","input input-bordered w-full max-w-xs"),S(f,"class","btn btn-xs btn-error"),S(c,"class","label"),S(n,"class","form-control w-full max-w-xs"),S(r,"class","flex justify-center"),S(e,"class","h-full p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(B,w){se(B,e,w),T(e,r),T(r,n),T(n,i),T(i,a),T(a,o),T(n,s),T(n,l),T(n,p),T(n,c),T(c,f),T(f,d),T(e,g),D.block.m(e,D.anchor=null),D.mount=()=>e,D.anchor=null,v||(m=[_e(l,"input",t[8]),_e(f,"click",t[9])],v=!0)},p(B,[w]){t=B,w&32&&l.value!==t[5]&&(l.value=t[5]),D.ctx=t,w&16&&b!==(b=t[4])&&Os(b,D)||Np(D,t,w)},i:Me,o:Me,d(B){B&&M(e),D.block.d(),D.token=null,D=null,v=!1,zt(m)}}}function x7(t,e,r){let n,i,a,o;Ge(t,ot,C=>r(11,n=C)),Ge(t,Rc,C=>r(12,i=C)),Ge(t,Vc,C=>r(13,a=C)),Ge(t,hi,C=>r(5,o=C));const s=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001","gpt-3.5-turbo","gpt-3.5-turbo-0301"],l=["text-embedding-ada-002"];let p=o,c=[],f=[],d=a,g=i,b=null;async function v(C){if(!C||c.length&&f.length)return;const F=to(C);r(4,b=E8(F));const k=await b;k.data&&r(0,c=k.data.data.map(({id:O})=>O).filter(O=>s.includes(O))),r(1,f=k.data.data.map(({id:O})=>O).filter(O=>l.includes(O)))}function m(C){r(2,d=C.target.value),Vc.update(d)}function D(C){r(3,g=C.target.value),Rc.update(g)}function B(C){const F=C.target.value;hi.update(F),F.length===51&&v(F),F.length===0&&w()}function w(){hi.delete(),r(10,p=""),r(0,c=[]),r(1,f=[]),n.weightMode===gt.Embed&&ot.update({...n,weightMode:gt.Circle})}return t.$$.update=()=>{t.$$.dirty&1024&&v(p)},[c,f,d,g,b,o,m,D,B,w,p]}class N7 extends Xe{constructor(e){super(),et(this,e,x7,I7,tt,{})}}function L7(t){let e,r;return{c(){e=ut("svg"),r=ut("path"),this.h()},l(n){e=st(n,"svg",{xmlns:!0,class:!0,viewBox:!0});var i=R(e);r=st(i,"path",{fill:!0,d:!0}),R(r).forEach(M),i.forEach(M),this.h()},h(){S(r,"fill","rgba(255,255,255, 0.7)"),S(r,"d","M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"class","h-4 w-4"),S(e,"viewBox","0 0 24 24")},m(n,i){se(n,e,i),T(e,r)},p:Me,i:Me,o:Me,d(n){n&&M(e)}}}class R7 extends Xe{constructor(e){super(),et(this,e,null,L7,tt,{})}}function Bp(t,e,r){const n=t.slice();return n[17]=e[r],n[19]=r,n}function Op(t,e,r){const n=t.slice();return n[20]=e[r][0],n[21]=e[r][1],n}function Mp(t,e){let r,n=e[21].name+"",i,a,o;return{key:t,first:null,c(){r=q("option"),i=Se(n),this.h()},l(s){r=W(s,"OPTION",{});var l=R(r);i=Be(l,n),l.forEach(M),this.h()},h(){r.__value=a=e[20],r.value=r.__value,r.selected=o=e[0]===e[20],this.first=r},m(s,l){se(s,r,l),T(r,i)},p(s,l){e=s,l&16&&n!==(n=e[21].name+"")&&fr(i,n),l&16&&a!==(a=e[20])&&(r.__value=a,r.value=r.__value),l&17&&o!==(o=e[0]===e[20])&&(r.selected=o)},d(s){s&&M(r)}}}function Pp(t){let e,r,n,i,a,o,s,l,p,c=Vs(t[1])+"",f,d,g=(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1]),b,v,m,D,B,w,C,F,k,O,A,x,U,K,J=g&&kp(),j=t[3]&&Tp(t);return{c(){e=q("div"),r=q("div"),n=q("input"),i=Ee(),a=q("div"),o=q("label"),s=q("span"),l=Se("Alias: "),p=q("b"),f=Se(c),d=Ee(),J&&J.c(),b=Ee(),v=q("button"),m=Se("Save"),D=Ee(),B=q("ul"),j&&j.c(),w=Ee(),C=q("li"),F=q("input"),k=Ee(),O=q("div"),A=q("button"),x=Se("Delete"),this.h()},l(V){e=W(V,"DIV",{class:!0});var H=R(e);r=W(H,"DIV",{class:!0});var z=R(r);n=W(z,"INPUT",{type:!0,placeholder:!0,class:!0}),i=Ae(z),a=W(z,"DIV",{class:!0,"data-tip":!0});var Q=R(a);o=W(Q,"LABEL",{class:!0});var X=R(o);s=W(X,"SPAN",{class:!0});var te=R(s);l=Be(te,"Alias: "),p=W(te,"B",{class:!0});var le=R(p);f=Be(le,c),le.forEach(M),te.forEach(M),X.forEach(M),Q.forEach(M),d=Ae(z),J&&J.l(z),z.forEach(M),b=Ae(H),v=W(H,"BUTTON",{class:!0});var be=R(v);m=Be(be,"Save"),be.forEach(M),H.forEach(M),D=Ae(V),B=W(V,"UL",{class:!0});var we=R(B);j&&j.l(we),w=Ae(we),C=W(we,"LI",{class:!0});var Oe=R(C);F=W(Oe,"INPUT",{type:!0,placeholder:!0,class:!0}),Oe.forEach(M),we.forEach(M),k=Ae(V),O=W(V,"DIV",{class:!0});var Pe=R(O);A=W(Pe,"BUTTON",{class:!0});var Te=R(A);x=Be(Te,"Delete"),Te.forEach(M),Pe.forEach(M),this.h()},h(){S(n,"type","text"),S(n,"placeholder","Name"),S(n,"class","input input-bordered input-sm w-full max-w-xs"),S(p,"class","text-white cursor-copy"),S(s,"class","label-text"),S(o,"class","label"),S(a,"class","tooltip tooltip-primary tooltip-bottom"),S(a,"data-tip","Use in prompts or directives to get random slot."),S(r,"class","flex flex-col w-full pr-2 "),S(v,"class","btn btn-sm btn-primary"),Qe(v,"btn-disabled",!Q0(t[1])||(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1])),S(e,"class","w-full p-2 flex justify-between"),S(F,"type","text"),S(F,"placeholder","Add slot"),S(F,"class","input input-bordered input-sm w-full italic"),S(C,"class","p-1"),S(B,"class","px-4 py-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block"),S(A,"class","btn btn-sm btn-error ml-4"),S(O,"class","w-full p-2 h-12 flex justify-between")},m(V,H){se(V,e,H),T(e,r),T(r,n),rn(n,t[1]),T(r,i),T(r,a),T(a,o),T(o,s),T(s,l),T(s,p),T(p,f),T(r,d),J&&J.m(r,null),T(e,b),T(e,v),T(v,m),se(V,D,H),se(V,B,H),j&&j.m(B,null),T(B,w),T(B,C),T(C,F),rn(F,t[2]),se(V,k,H),se(V,O,H),T(O,A),T(A,x),U||(K=[_e(n,"input",t[11]),_e(p,"click",t[12]),_e(v,"click",t[6]),_e(F,"input",t[14]),_e(F,"input",t[15]),_e(A,"click",t[7])],U=!0)},p(V,H){H&2&&n.value!==V[1]&&rn(n,V[1]),H&2&&c!==(c=Vs(V[1])+"")&&fr(f,c),H&11&&(g=(V[0]==="new"||V[3]&&V[3].name!==V[1])&&!V[5](V[1])),g?J||(J=kp(),J.c(),J.m(r,null)):J&&(J.d(1),J=null),H&43&&Qe(v,"btn-disabled",!Q0(V[1])||(V[0]==="new"||V[3]&&V[3].name!==V[1])&&!V[5](V[1])),V[3]?j?j.p(V,H):(j=Tp(V),j.c(),j.m(B,w)):j&&(j.d(1),j=null),H&4&&F.value!==V[2]&&rn(F,V[2])},d(V){V&&M(e),J&&J.d(),V&&M(D),V&&M(B),j&&j.d(),V&&M(k),V&&M(O),U=!1,zt(K)}}}function kp(t){let e,r,n;return{c(){e=q("label"),r=q("span"),n=Se("Name In Use"),this.h()},l(i){e=W(i,"LABEL",{class:!0});var a=R(e);r=W(a,"SPAN",{class:!0});var o=R(r);n=Be(o,"Name In Use"),o.forEach(M),a.forEach(M),this.h()},h(){S(r,"class","label-text text-orange-300"),S(e,"class","label")},m(i,a){se(i,e,a),T(e,r),T(r,n)},d(i){i&&M(e)}}}function Tp(t){let e=[],r=new Map,n,i=t[3].values;const a=o=>o[19];for(let o=0;o<i.length;o+=1){let s=Bp(t,i,o),l=a(s);r.set(l,e[o]=Ip(l,s))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();n=Ft()},l(o){for(let s=0;s<e.length;s+=1)e[s].l(o);n=Ft()},m(o,s){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(o,s);se(o,n,s)},p(o,s){s&264&&(i=o[3].values,e=Rn(e,s,a,1,o,i,r,n.parentNode,Zn,Ip,n,Bp))},d(o){for(let s=0;s<e.length;s+=1)e[s].d(o);o&&M(n)}}}function Ip(t,e){let r,n,i,a,o,s;function l(...p){return e[13](e[19],...p)}return{key:t,first:null,c(){r=q("li"),n=q("input"),a=Ee(),this.h()},l(p){r=W(p,"LI",{class:!0});var c=R(r);n=W(c,"INPUT",{type:!0,placeholder:!0,class:!0}),a=Ae(c),c.forEach(M),this.h()},h(){n.value=i=e[17],S(n,"type","text"),S(n,"placeholder",""),S(n,"class","input input-bordered input-sm w-full"),S(r,"class","p-1"),this.first=r},m(p,c){se(p,r,c),T(r,n),T(r,a),o||(s=_e(n,"input",l),o=!0)},p(p,c){e=p,c&8&&i!==(i=e[17])&&n.value!==i&&(n.value=i)},d(p){p&&M(r),o=!1,s()}}}function U7(t){let e,r,n,i,a,o,s,l,p,c,f,d=[],g=new Map,b,v,m,D,B,w,C=Object.entries(t[4]);const F=O=>O[20];for(let O=0;O<C.length;O+=1){let A=Op(t,C,O),x=F(A);g.set(x,d[O]=Mp(x,A))}let k=t[0]&&Pp(t);return{c(){e=q("div"),r=q("div"),n=q("div"),i=q("label"),a=q("span"),o=Se("Edit Slots"),s=Ee(),l=q("select"),p=q("option"),c=Se("Pick one");for(let O=0;O<d.length;O+=1)d[O].c();b=q("option"),v=Se("New"),D=Ee(),k&&k.c(),this.h()},l(O){e=W(O,"DIV",{class:!0});var A=R(e);r=W(A,"DIV",{class:!0});var x=R(r);n=W(x,"DIV",{class:!0});var U=R(n);i=W(U,"LABEL",{class:!0});var K=R(i);a=W(K,"SPAN",{class:!0});var J=R(a);o=Be(J,"Edit Slots"),J.forEach(M),K.forEach(M),s=Ae(U),l=W(U,"SELECT",{class:!0});var j=R(l);p=W(j,"OPTION",{});var V=R(p);c=Be(V,"Pick one"),V.forEach(M);for(let z=0;z<d.length;z+=1)d[z].l(j);b=W(j,"OPTION",{});var H=R(b);v=Be(H,"New"),H.forEach(M),j.forEach(M),U.forEach(M),x.forEach(M),D=Ae(A),k&&k.l(A),A.forEach(M),this.h()},h(){S(a,"class","label-text"),S(i,"class","label"),p.disabled=!0,p.selected=f=t[0]===null,p.__value="Pick one",p.value=p.__value,b.__value="new",b.value=b.__value,b.selected=m=t[0]==="new",S(l,"class","select select-bordered"),t[0]===void 0&&xi(()=>t[10].call(l)),S(n,"class","form-control w-full max-w-xs mb-4"),S(r,"class","flex justify-center"),S(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(O,A){se(O,e,A),T(e,r),T(r,n),T(n,i),T(i,a),T(a,o),T(n,s),T(n,l),T(l,p),T(p,c);for(let x=0;x<d.length;x+=1)d[x]&&d[x].m(l,null);T(l,b),T(b,v),Pi(l,t[0],!0),T(e,D),k&&k.m(e,null),B||(w=_e(l,"change",t[10]),B=!0)},p(O,[A]){A&17&&f!==(f=O[0]===null)&&(p.selected=f),A&17&&(C=Object.entries(O[4]),d=Rn(d,A,F,1,O,C,g,l,Zn,Mp,b,Op)),A&17&&m!==(m=O[0]==="new")&&(b.selected=m),A&17&&Pi(l,O[0]),O[0]?k?k.p(O,A):(k=Pp(O),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},i:Me,o:Me,d(O){O&&M(e);for(let A=0;A<d.length;A+=1)d[A].d();k&&k.d(),B=!1,w()}}}function V7(t,e,r){let n;Ge(t,Ji,C=>r(4,n=C));let i=null,a="",o="",s=null;function l(C){r(3,s=C&&C!=="new"?{...n[C]}:C==="new"?{name:"New Slot Set",values:[]}:null),r(1,a=s?s.name:"")}function p(C){return Object.values(n).every(k=>k.name!==C)}function c(){if(s)if(i&&i!=="new")Ji.update(i,{...s,name:a});else{if(!p()){alert("Name already in use");return}const F=mo();Ji.update(F,{...s,name:a}),r(0,i=F)}}function f(){Ji.delete(i),r(1,a=""),r(2,o=""),r(0,i=null),r(3,s=null)}const d=Qs((C,F)=>{if(!s||!i)return;const k=[...s.values];F.length===0?k.splice(C,1):k[C]=F,r(3,s.values=k,s),i!=="new"&&Ji.update(i,s)},1e3),g=Qs(C=>{if(!s||!i)return;const F=[...s.values];C.length>0&&(F.push(C),r(3,s.values=F,s),r(2,o=""),i!=="new"&&Ji.update(i,s))},1e3);function b(){i=cy(this),r(0,i)}function v(){a=this.value,r(1,a)}const m=()=>navigator.clipboard.writeText(Vs(a)),D=(C,F)=>d(C,F.target.value);function B(){o=this.value,r(2,o)}const w=C=>g(C.target.value);return t.$$.update=()=>{t.$$.dirty&1&&l(i)},[i,a,o,s,n,p,c,f,d,g,b,v,m,D,B,w]}class j7 extends Xe{constructor(e){super(),et(this,e,V7,U7,tt,{})}}function z7(t){let e,r;return e=new N7({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function q7(t){let e,r;return e=new j7({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function W7(t){let e,r;return e=new M7({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function H7(t){let e,r;return e=new r7({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function $7(t){let e,r;return e=new X8({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function G7(t){let e,r,n,i,a,o,s,l,p,c,f,d,g,b,v,m,D,B,w,C,F,k,O,A,x,U,K,J;F=new R7({});const j=[$7,H7,W7,q7,z7],V=[];function H(z,Q){return z[0]==="select"?0:z[0]==="edit"?1:z[0]==="generate"?2:z[0]==="slots"?3:z[0]==="settings"?4:-1}return~(A=H(t))&&(x=V[A]=j[A](t)),{c(){e=q("div"),r=q("div"),n=q("div"),i=q("button"),a=Se("Select"),s=Ee(),l=q("button"),p=Se("Edit"),f=Ee(),d=q("button"),g=Se("Generate"),v=Ee(),m=q("button"),D=Se("Slots"),w=Ee(),C=q("button"),Ve(F.$$.fragment),O=Ee(),x&&x.c(),this.h()},l(z){e=W(z,"DIV",{class:!0});var Q=R(e);r=W(Q,"DIV",{class:!0});var X=R(r);n=W(X,"DIV",{class:!0});var te=R(n);i=W(te,"BUTTON",{class:!0});var le=R(i);a=Be(le,"Select"),le.forEach(M),s=Ae(te),l=W(te,"BUTTON",{class:!0});var be=R(l);p=Be(be,"Edit"),be.forEach(M),f=Ae(te),d=W(te,"BUTTON",{class:!0});var we=R(d);g=Be(we,"Generate"),we.forEach(M),v=Ae(te),m=W(te,"BUTTON",{class:!0});var Oe=R(m);D=Be(Oe,"Slots"),Oe.forEach(M),w=Ae(te),C=W(te,"BUTTON",{class:!0});var Pe=R(C);je(F.$$.fragment,Pe),Pe.forEach(M),te.forEach(M),O=Ae(X),x&&x.l(X),X.forEach(M),Q.forEach(M),this.h()},h(){S(i,"class",o=t[0]==="select"?"btn btn-active":"btn"),S(l,"class",c=t[0]==="edit"?"btn btn-active":"btn"),S(d,"class",b=t[0]==="generate"?"btn btn-active":"btn"),S(m,"class",B=t[0]==="slots"?"btn btn-active":"btn"),S(C,"class",k=t[0]==="settings"?"btn btn-active":"btn"),S(n,"class","btn-group btn-group-vertical sm:btn-group-horizontal bg-base-100 w-full flex justify-center p-2"),S(r,"class","h-screen overflow-y-auto flex flex-col"),S(e,"class","max-w-md w-1/2 h-screen")},m(z,Q){se(z,e,Q),T(e,r),T(r,n),T(n,i),T(i,a),T(n,s),T(n,l),T(l,p),T(n,f),T(n,d),T(d,g),T(n,v),T(n,m),T(m,D),T(n,w),T(n,C),ze(F,C,null),T(r,O),~A&&V[A].m(r,null),U=!0,K||(J=[_e(i,"click",t[2]),_e(l,"click",t[3]),_e(d,"click",t[4]),_e(m,"click",t[5]),_e(C,"click",t[6])],K=!0)},p(z,[Q]){(!U||Q&1&&o!==(o=z[0]==="select"?"btn btn-active":"btn"))&&S(i,"class",o),(!U||Q&1&&c!==(c=z[0]==="edit"?"btn btn-active":"btn"))&&S(l,"class",c),(!U||Q&1&&b!==(b=z[0]==="generate"?"btn btn-active":"btn"))&&S(d,"class",b),(!U||Q&1&&B!==(B=z[0]==="slots"?"btn btn-active":"btn"))&&S(m,"class",B),(!U||Q&1&&k!==(k=z[0]==="settings"?"btn btn-active":"btn"))&&S(C,"class",k);let X=A;A=H(z),A!==X&&(x&&(ir(),ve(V[X],1,1,()=>{V[X]=null}),ar()),~A?(x=V[A],x||(x=V[A]=j[A](z),x.c()),fe(x,1),x.m(r,null)):x=null)},i(z){U||(fe(F.$$.fragment,z),fe(x),U=!0)},o(z){ve(F.$$.fragment,z),ve(x),U=!1},d(z){z&&M(e),qe(F),~A&&V[A].d(),K=!1,zt(J)}}}function K7(t,e,r){let n;Ge(t,di,c=>r(0,n=c));function i(c){di.update(c)}const a=()=>i("select"),o=()=>i("edit"),s=()=>i("generate"),l=()=>i("slots"),p=()=>i("settings");return t.$$.update=()=>{t.$$.dirty&1&&(n||di.update("select"))},[n,i,a,o,s,l,p]}class Y7 extends Xe{constructor(e){super(),et(this,e,K7,G7,tt,{})}}function Z7(t){let e,r;return{c(){e=q("p"),r=Se("Loading..."),this.h()},l(n){e=W(n,"P",{class:!0});var i=R(e);r=Be(i,"Loading..."),i.forEach(M),this.h()},h(){S(e,"class","text-lg")},m(n,i){se(n,e,i),T(e,r)},i:Me,o:Me,d(n){n&&M(e)}}}function J7(t){let e,r;return{c(){e=q("p"),r=Se("This tool is not optimized for small screens or mobile devices."),this.h()},l(n){e=W(n,"P",{class:!0});var i=R(e);r=Be(i,"This tool is not optimized for small screens or mobile devices."),i.forEach(M),this.h()},h(){S(e,"class","text-lg")},m(n,i){se(n,e,i),T(e,r)},i:Me,o:Me,d(n){n&&M(e)}}}function Q7(t){let e,r,n,i;return e=new Y7({}),n=new G8({}),{c(){Ve(e.$$.fragment),r=Ee(),Ve(n.$$.fragment)},l(a){je(e.$$.fragment,a),r=Ae(a),je(n.$$.fragment,a)},m(a,o){ze(e,a,o),se(a,r,o),ze(n,a,o),i=!0},i(a){i||(fe(e.$$.fragment,a),fe(n.$$.fragment,a),i=!0)},o(a){ve(e.$$.fragment,a),ve(n.$$.fragment,a),i=!1},d(a){qe(e,a),a&&M(r),qe(n,a)}}}function X7(t){let e,r,n,i,a,o;xi(t[2]);const s=[Q7,J7,Z7],l=[];function p(c,f){return c[0]&&c[1]&&c[0]>1024&&c[1]>800?0:c[0]&&c[1]?1:2}return e=p(t),r=l[e]=s[e](t),{c(){r.c(),n=Ft()},l(c){r.l(c),n=Ft()},m(c,f){l[e].m(c,f),se(c,n,f),i=!0,a||(o=_e(window,"resize",t[2]),a=!0)},p(c,[f]){let d=e;e=p(c),e!==d&&(ir(),ve(l[d],1,1,()=>{l[d]=null}),ar(),r=l[e],r||(r=l[e]=s[e](c),r.c()),fe(r,1),r.m(n.parentNode,n))},i(c){i||(fe(r),i=!0)},o(c){ve(r),i=!1},d(c){l[e].d(c),c&&M(n),a=!1,o()}}}function e4(t,e,r){let n=null,i=null;function a(){r(0,n=window.innerWidth),r(1,i=window.innerHeight)}return[n,i,a]}class n4 extends Xe{constructor(e){super(),et(this,e,e4,X7,tt,{})}}export{n4 as default};
