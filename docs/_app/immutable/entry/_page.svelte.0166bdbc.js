import{S as wt,i as At,s as Et,J as vt,K as mt,m as $,h as k,n as M,b as be,G as j,H as Me,L as xt,k as ie,y as tt,a as Le,l as ue,z as rt,c as Ue,M as Tt,A as nt,N as Oe,g as we,d as Se,B as it,O as fr,I as Dt,p as Yt,q as We,r as He,u as Cn,v as Nr,f as Rr,e as Rt,P as Is,Q as aa,R as sa,T as Hn,U as Gd,V as al,W as Oi,X as Kd,Y as Fi,Z as ks,_ as bu,$ as mu}from"../chunks/index.c98c9b2d.js";import{d as ln,w as fn}from"../chunks/index.db6a43ba.js";var dt=(t=>(t.Circle="circle",t.Ring="ring",t.Bars="bars",t.Embed="embed",t.Pie="pie",t))(dt||{});function ly(t){let e,r,n,i;return{c(){e=vt("svg"),r=vt("rect"),n=vt("rect"),i=vt("rect"),this.h()},l(a){e=mt(a,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var o=$(e);r=mt(o,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),$(r).forEach(k),n=mt(o,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),$(n).forEach(k),i=mt(o,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),$(i).forEach(k),o.forEach(k),this.h()},h(){M(r,"x","5"),M(r,"y","12"),M(r,"width","40"),M(r,"height","4"),M(r,"fill","rgba(255,255,255, 0.7)"),M(n,"x","5"),M(n,"y","23"),M(n,"width","30"),M(n,"height","4"),M(n,"fill","rgba(255,255,255, 0.7)"),M(i,"x","5"),M(i,"y","34"),M(i,"width","35"),M(i,"height","4"),M(i,"fill","rgba(255,255,255, 0.7)"),M(e,"xmlns","http://www.w3.org/2000/svg"),M(e,"fill","rgba(255,255,255, 0.7)"),M(e,"class","h-6 w-6"),M(e,"viewBox","0 0 50 50")},m(a,o){be(a,e,o),j(e,r),j(e,n),j(e,i)},p:Me,i:Me,o:Me,d(a){a&&k(e)}}}class fy extends wt{constructor(e){super(),At(this,e,null,ly,Et,{})}}function cy(t){let e,r;return{c(){e=vt("svg"),r=vt("circle"),this.h()},l(n){e=mt(n,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var i=$(e);r=mt(i,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),$(r).forEach(k),i.forEach(k),this.h()},h(){M(r,"cx","25"),M(r,"cy","25"),M(r,"r","20"),M(r,"fill","rgba(255,255,255, 0.7)"),M(e,"xmlns","http://www.w3.org/2000/svg"),M(e,"fill","rgba(255,255,255, 0.7)"),M(e,"class","h-6 w-6"),M(e,"viewBox","0 0 50 50")},m(n,i){be(n,e,i),j(e,r)},p:Me,i:Me,o:Me,d(n){n&&k(e)}}}class hy extends wt{constructor(e){super(),At(this,e,null,cy,Et,{})}}function dy(t){let e,r,n,i,a,o;return{c(){e=vt("svg"),r=vt("circle"),n=vt("circle"),i=vt("circle"),a=vt("circle"),o=vt("circle"),this.h()},l(s){e=mt(s,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var c=$(e);r=mt(c,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),$(r).forEach(k),n=mt(c,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),$(n).forEach(k),i=mt(c,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),$(i).forEach(k),a=mt(c,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),$(a).forEach(k),o=mt(c,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),$(o).forEach(k),c.forEach(k),this.h()},h(){M(r,"cx","20"),M(r,"cy","80"),M(r,"r","5"),M(r,"fill","rgba(255,255,255, 0.7)"),M(n,"cx","40"),M(n,"cy","40"),M(n,"r","5"),M(n,"fill","rgba(255,255,255, 0.7)"),M(i,"cx","70"),M(i,"cy","20"),M(i,"r","5"),M(i,"fill","rgba(255,255,255, 0.7)"),M(a,"cx","80"),M(a,"cy","60"),M(a,"r","5"),M(a,"fill","rgba(255,255,255, 0.7)"),M(o,"cx","60"),M(o,"cy","75"),M(o,"r","5"),M(o,"fill","rgba(255,255,255, 0.7)"),M(e,"xmlns","http://www.w3.org/2000/svg"),M(e,"fill","rgba(255,255,255, 0.7)"),M(e,"class","h-6 w-6"),M(e,"viewBox","0 0 100 100")},m(s,c){be(s,e,c),j(e,r),j(e,n),j(e,i),j(e,a),j(e,o)},p:Me,i:Me,o:Me,d(s){s&&k(e)}}}class py extends wt{constructor(e){super(),At(this,e,null,dy,Et,{})}}const sl="selectedPromptStore";function gy(){const t=fn(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[sl]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[sl]=a,r(a))},get:()=>xt(t),delete:()=>{i&&(delete localStorage[sl],r(""))}}}const Hi=gy(),$d=ln(Hi,t=>xt(Hi));function vy(){const t=fn({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith("prompt")){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=xt(t),p={...s[a]||{},...o};i&&(localStorage[`prompt_${a}`]=JSON.stringify(p));const f={...s,[a]:p};r(f)},get:a=>xt(t)[a],delete:a=>{i&&delete localStorage[`prompt_${a}`];const o={...xt(t)};delete o[a],r(o)}}}const ta=vy(),my=ln(ta,t=>Object.entries(xt(ta))),Xa="activePromptStore";function Pr(t,e,r,n=1){return{id:t,text:e,barWeight:n,parsedWeight:r}}function Yh(){return{0:Pr(0,"Magic potion in a mystical bottle",1),1:Pr(1,"A crystalline decanter",1),2:Pr(2,"An ornate tequila bottle",1),3:Pr(3,"An antique sake bottle",1),4:Pr(4,"A colorful perfume bottle",1),5:Pr(5,"A glass vase full of vibrant flowers",1),6:Pr(6,"A minimalist glass tea kettle",1),7:Pr(7,"Chihuly glass art",1),8:Pr(8,"A fine wine bottle",1),9:Pr(9,"A gourmet vinegar bottle",1),10:Pr(10,"A stunning fishbowl",1),11:Pr(11,"A striking piece of tourmaline",1),12:Pr(12,"A finely cut piece of sapphire",1),13:Pr(13,"Iittala glass art",1)}}function Ai(t,e=dt.Pie){return{weightedPrompts:t||{},weightMode:e,pieAngles:{},ringAngles:{},ringStartAngle:0,ringReverse:!1,ringWeightScaling:2,ringExponentialScaling:!0,circleAngles:{},circleMarker:[270,.33],circleWeightScaling:2,circleExponentialScaling:!0,embeddings:{},embedWeightScaling:2,embedExponentialScaling:!0,embedClusters:0,embedPromptLimit:Object.keys(t).length}}function _y(){const t=fn({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",a=i&&localStorage[Xa]?JSON.parse(localStorage[Xa]):Ai(Yh());return r({...Ai({}),...a}),{subscribe:e,update:o=>{const s=Hi.get();s&&ta.update(s,o),!(!o||!i)&&(localStorage[Xa]=JSON.stringify(o),r({...Ai({}),...o}))},get:()=>xt(t),delete:()=>{i&&(delete localStorage[Xa],r(Ai(Yh())))}}}const Ot=_y(),Cr=ln(Ot,t=>xt(Ot));function Dy(t){let e,r,n,i,a,o,s,c,p,f,h,d;return n=new fy({}),o=new hy({}),p=new py({}),{c(){e=ie("div"),r=ie("button"),tt(n.$$.fragment),i=Le(),a=ie("button"),tt(o.$$.fragment),s=Le(),c=ie("button"),tt(p.$$.fragment),this.h()},l(g){e=ue(g,"DIV",{class:!0});var b=$(e);r=ue(b,"BUTTON",{class:!0});var m=$(r);rt(n.$$.fragment,m),m.forEach(k),i=Ue(b),a=ue(b,"BUTTON",{class:!0});var _=$(a);rt(o.$$.fragment,_),_.forEach(k),s=Ue(b),c=ue(b,"BUTTON",{class:!0});var D=$(c);rt(p.$$.fragment,D),D.forEach(k),b.forEach(k),this.h()},h(){M(r,"class","btn btn-sm"),Tt(r,"btn-active",t[0].weightMode===dt.Bars),M(a,"class","btn btn-sm"),Tt(a,"btn-active",t[0].weightMode===dt.Circle||t[0].weightMode===dt.Pie||t[0].weightMode===dt.Ring),M(c,"class","btn btn-sm"),Tt(c,"btn-active",t[0].weightMode===dt.Embed),M(e,"class","btn-group btn-group-horizontal w-full flex justify-end p-2")},m(g,b){be(g,e,b),j(e,r),nt(n,r,null),j(e,i),j(e,a),nt(o,a,null),j(e,s),j(e,c),nt(p,c,null),f=!0,h||(d=[Oe(r,"click",t[2]),Oe(a,"click",t[3]),Oe(c,"click",t[4])],h=!0)},p(g,[b]){(!f||b&1)&&Tt(r,"btn-active",g[0].weightMode===dt.Bars),(!f||b&1)&&Tt(a,"btn-active",g[0].weightMode===dt.Circle||g[0].weightMode===dt.Pie||g[0].weightMode===dt.Ring),(!f||b&1)&&Tt(c,"btn-active",g[0].weightMode===dt.Embed)},i(g){f||(we(n.$$.fragment,g),we(o.$$.fragment,g),we(p.$$.fragment,g),f=!0)},o(g){Se(n.$$.fragment,g),Se(o.$$.fragment,g),Se(p.$$.fragment,g),f=!1},d(g){g&&k(e),it(n),it(o),it(p),h=!1,fr(d)}}}function by(t,e,r){let n;Dt(t,Cr,c=>r(0,n=c));function i(c){const p={...n,weightMode:c};Ot.update(p)}return[n,i,()=>i(dt.Bars),()=>i(dt.Pie),()=>i(dt.Embed)]}class yy extends wt{constructor(e){super(),At(this,e,by,Dy,Et,{})}}function wy(t){let e,r,n,i;return{c(){e=vt("svg"),r=vt("path"),n=vt("path"),i=vt("path"),this.h()},l(a){e=mt(a,"svg",{xmlns:!0,class:!0,viewBox:!0});var o=$(e);r=mt(o,"path",{d:!0,fill:!0}),$(r).forEach(k),n=mt(o,"path",{d:!0,fill:!0}),$(n).forEach(k),i=mt(o,"path",{d:!0,fill:!0}),$(i).forEach(k),o.forEach(k),this.h()},h(){M(r,"d","M50 50 L50 10 A40 40 0 0 1 90 50 z"),M(r,"fill","rgba(255,255,255, 0.7)"),M(n,"d","M50 50 L90 50 A40 40 0 0 1 50 90 z"),M(n,"fill","rgba(255,255,255, 0.3)"),M(i,"d","M50 50 L50 90 A40 40 0 0 1 10 50 z"),M(i,"fill","rgba(255,255,255, 0.9)"),M(e,"xmlns","http://www.w3.org/2000/svg"),M(e,"class","h-5 w-5"),M(e,"viewBox","0 0 100 100")},m(a,o){be(a,e,o),j(e,r),j(e,n),j(e,i)},p:Me,i:Me,o:Me,d(a){a&&k(e)}}}class Ay extends wt{constructor(e){super(),At(this,e,null,wy,Et,{})}}function Ey(t){let e,r,n;return{c(){e=vt("svg"),r=vt("circle"),n=vt("circle"),this.h()},l(i){e=mt(i,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var a=$(e);r=mt(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),$(r).forEach(k),n=mt(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),$(n).forEach(k),a.forEach(k),this.h()},h(){M(r,"cx","25"),M(r,"cy","25"),M(r,"r","20"),M(r,"stroke","rgba(255,255,255, 0.7)"),M(r,"stroke-width","4"),M(r,"fill","none"),M(n,"cx","25"),M(n,"cy","25"),M(n,"r","4"),M(n,"stroke","rgba(255,255,255, 0.7)"),M(n,"stroke-width","1"),M(n,"fill","rgba(255,255,255, 0.7)"),M(e,"xmlns","http://www.w3.org/2000/svg"),M(e,"fill","rgba(255,255,255, 0.7)"),M(e,"class","h-5 w-5"),M(e,"viewBox","0 0 50 50")},m(i,a){be(i,e,a),j(e,r),j(e,n)},p:Me,i:Me,o:Me,d(i){i&&k(e)}}}class Cy extends wt{constructor(e){super(),At(this,e,null,Ey,Et,{})}}function Fy(t){let e,r,n,i,a;return{c(){e=vt("svg"),r=vt("mask"),n=vt("circle"),i=vt("path"),a=vt("circle"),this.h()},l(o){e=mt(o,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var s=$(e);r=mt(s,"mask",{id:!0});var c=$(r);n=mt(c,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),$(n).forEach(k),i=mt(c,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),$(i).forEach(k),c.forEach(k),a=mt(s,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,mask:!0}),$(a).forEach(k),s.forEach(k),this.h()},h(){M(n,"cx","25"),M(n,"cy","25"),M(n,"r","20"),M(n,"stroke","white"),M(n,"stroke-width","6"),M(n,"fill","none"),M(i,"d","M40,22 L45,27 L50,22"),M(i,"stroke","black"),M(i,"stroke-width","4"),M(i,"fill","none"),M(r,"id","hole"),M(a,"cx","25"),M(a,"cy","25"),M(a,"r","20"),M(a,"stroke","rgba(255,255,255, 0.7)"),M(a,"stroke-width","4"),M(a,"fill","none"),M(a,"mask","url(#hole)"),M(e,"xmlns","http://www.w3.org/2000/svg"),M(e,"fill","rgba(255,255,255, 0.7)"),M(e,"class","h-5 w-5"),M(e,"viewBox","0 0 50 50")},m(o,s){be(o,e,s),j(e,r),j(r,n),j(r,i),j(e,a)},p:Me,i:Me,o:Me,d(o){o&&k(e)}}}class Sy extends wt{constructor(e){super(),At(this,e,null,Fy,Et,{})}}function By(t){let e,r,n,i,a,o,s,c,p,f,h,d;return n=new Ay({}),o=new Cy({}),p=new Sy({}),{c(){e=ie("div"),r=ie("button"),tt(n.$$.fragment),i=Le(),a=ie("button"),tt(o.$$.fragment),s=Le(),c=ie("button"),tt(p.$$.fragment),this.h()},l(g){e=ue(g,"DIV",{class:!0});var b=$(e);r=ue(b,"BUTTON",{class:!0});var m=$(r);rt(n.$$.fragment,m),m.forEach(k),i=Ue(b),a=ue(b,"BUTTON",{class:!0});var _=$(a);rt(o.$$.fragment,_),_.forEach(k),s=Ue(b),c=ue(b,"BUTTON",{class:!0});var D=$(c);rt(p.$$.fragment,D),D.forEach(k),b.forEach(k),this.h()},h(){M(r,"class","btn btn-xs"),Tt(r,"btn-active",t[0].weightMode===dt.Pie),M(a,"class","btn btn-xs"),Tt(a,"btn-active",t[0].weightMode===dt.Circle),M(c,"class","btn btn-xs"),Tt(c,"btn-active",t[0].weightMode===dt.Ring),M(e,"class","btn-group btn-group-horizontal w-full flex justify-center p-1")},m(g,b){be(g,e,b),j(e,r),nt(n,r,null),j(e,i),j(e,a),nt(o,a,null),j(e,s),j(e,c),nt(p,c,null),f=!0,h||(d=[Oe(r,"click",t[2]),Oe(a,"click",t[3]),Oe(c,"click",t[4])],h=!0)},p(g,[b]){(!f||b&1)&&Tt(r,"btn-active",g[0].weightMode===dt.Pie),(!f||b&1)&&Tt(a,"btn-active",g[0].weightMode===dt.Circle),(!f||b&1)&&Tt(c,"btn-active",g[0].weightMode===dt.Ring)},i(g){f||(we(n.$$.fragment,g),we(o.$$.fragment,g),we(p.$$.fragment,g),f=!0)},o(g){Se(n.$$.fragment,g),Se(o.$$.fragment,g),Se(p.$$.fragment,g),f=!1},d(g){g&&k(e),it(n),it(o),it(p),h=!1,fr(d)}}}function Oy(t,e,r){let n;Dt(t,Cr,c=>r(0,n=c));function i(c){const p={...n,weightMode:c};Ot.update(p)}return[n,i,()=>i(dt.Pie),()=>i(dt.Circle),()=>i(dt.Ring)]}class My extends wt{constructor(e){super(),At(this,e,Oy,By,Et,{})}}function ql(){return ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ql.apply(this,arguments)}var Yd={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function tr(t){return typeof t=="number"}function En(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function Zd(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function Xd(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Jd(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Wn(t){return typeof t=="string"}var Qt=Array.isArray;function Kr(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function ls(t){return Array.isArray(t)||Kr(t)}function Py(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Ty(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function xy(t){return t&&t.constructor.prototype.isRange===!0||!1}function df(t){return t&&t.constructor.prototype.isIndex===!0||!1}function Iy(t){return typeof t=="boolean"}function ky(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function Ny(t){return t&&t.constructor.prototype.isHelp===!0||!1}function Ry(t){return typeof t=="function"}function Ly(t){return t instanceof Date}function Uy(t){return t instanceof RegExp}function Vy(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!Zd(t)&&!Xd(t))}function jy(t){return t===null}function pf(t){return t===void 0}function qy(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function zy(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function Wy(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Hy(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function Gy(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ky(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function $y(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Yy(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function Zy(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function Xy(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function Jy(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function Qy(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function ew(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function tw(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function rw(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function nw(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function iw(t){return t&&t.constructor.prototype.isChain===!0||!1}function ea(t){var e=typeof t;return e==="object"?t===null?"null":En(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function wr(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return wr(r)});if(t instanceof Date)return new Date(t.valueOf());if(En(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return uw(t,wr)}function uw(t,e){var r={};for(var n in t)ra(t,n)&&(r[n]=e(t[n]));return r}function aw(t,e){for(var r in e)ra(e,r)&&(t[r]=e[r]);return t}function fs(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!fs(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!fs(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function ra(t,e){return t&&Object.hasOwnProperty.call(t,e)}function sw(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],a=t[i];a!==void 0&&(r[i]=a)}return r}var ow=["Matrix","Array"],lw=["number","BigNumber","Fraction"],Ns=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Yd)};ql(Ns,Yd,{MATRIX_OPTIONS:ow,NUMBER_OPTIONS:lw});function xn(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=fw(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){r=r.call(t)},n:function(){var p=r.next();return a=p.done,p},e:function(p){o=!0,s=p},f:function(){try{!a&&r.return!=null&&r.return()}finally{if(o)throw s}}}}function fw(t,e){if(t){if(typeof t=="string")return Zh(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zh(t,e)}}function Zh(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function du(t){return du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},du(t)}function Xh(){return!0}function wn(){return!1}function fu(){}var Jh="Argument is not a typed-function.";function Qd(){function t(L){return du(L)==="object"&&L!==null&&L.constructor===Object}var e=[{name:"number",test:function(z){return typeof z=="number"}},{name:"string",test:function(z){return typeof z=="string"}},{name:"boolean",test:function(z){return typeof z=="boolean"}},{name:"Function",test:function(z){return typeof z=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(z){return z instanceof Date}},{name:"RegExp",test:function(z){return z instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(z){return z===null}},{name:"undefined",test:function(z){return z===void 0}}],r={name:"any",test:Xh,isAny:!0},n,i,a=0,o={createCount:0};function s(L){var z=n.get(L);if(z)return z;var Z='Unknown type "'+L+'"',fe=L.toLowerCase(),ae,he=xn(i),se;try{for(he.s();!(se=he.n()).done;)if(ae=se.value,ae.toLowerCase()===fe){Z+='. Did you mean "'+ae+'" ?';break}}catch(ce){he.e(ce)}finally{he.f()}throw new TypeError(Z)}function c(L){for(var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",Z=z?s(z).index:i.length,fe=[],ae=0;ae<L.length;++ae){if(!L[ae]||typeof L[ae].name!="string"||typeof L[ae].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var he=L[ae].name;if(n.has(he))throw new TypeError('Duplicate type name "'+he+'"');fe.push(he),n.set(he,{name:he,test:L[ae].test,isAny:L[ae].isAny,index:Z+ae,conversionsTo:[]})}var se=i.slice(Z);i=i.slice(0,Z).concat(fe).concat(se);for(var ce=Z+fe.length;ce<i.length;++ce)n.get(i[ce]).index=ce}function p(){n=new Map,i=[],a=0,c([r],!1)}p(),c(e);function f(){var L,z=xn(i),Z;try{for(z.s();!(Z=z.n()).done;)L=Z.value,n.get(L).conversionsTo=[]}catch(fe){z.e(fe)}finally{z.f()}a=0}function h(L){var z=i.filter(function(Z){var fe=n.get(Z);return!fe.isAny&&fe.test(L)});return z.length?z:["any"]}function d(L){return L&&typeof L=="function"&&"_typedFunctionData"in L}function g(L,z,Z){if(!d(L))throw new TypeError(Jh);var fe=Z&&Z.exact,ae=Array.isArray(z)?z.join(","):z,he=B(ae),se=_(he);if(!fe||se in L.signatures){var ce=L._typedFunctionData.signatureMap.get(se);if(ce)return ce}var ye=he.length,ke;if(fe){ke=[];var Je;for(Je in L.signatures)ke.push(L._typedFunctionData.signatureMap.get(Je))}else ke=L._typedFunctionData.signatures;for(var Fe=0;Fe<ye;++Fe){var zt=he[Fe],It=[],rr=void 0,Zt=xn(ke),_r;try{for(Zt.s();!(_r=Zt.n()).done;){rr=_r.value;var Xt=x(rr.params,Fe);if(!(!Xt||zt.restParam&&!Xt.restParam)){if(!Xt.hasAny){var Dr=function(){var pr=A(Xt);if(zt.types.some(function(Sn){return!pr.has(Sn.name)}))return"continue"}();if(Dr==="continue")continue}It.push(rr)}}}catch(pr){Zt.e(pr)}finally{Zt.f()}if(ke=It,ke.length===0)break}var cr,hr=xn(ke),cn;try{for(hr.s();!(cn=hr.n()).done;)if(cr=cn.value,cr.params.length<=ye)return cr}catch(pr){hr.e(pr)}finally{hr.f()}throw new TypeError("Signature not found (signature: "+(L.name||"unnamed")+"("+_(he,", ")+"))")}function b(L,z,Z){return g(L,z,Z).implementation}function m(L,z){var Z=s(z);if(Z.test(L))return L;var fe=Z.conversionsTo;if(fe.length===0)throw new Error("There are no conversions to "+z+" defined.");for(var ae=0;ae<fe.length;ae++){var he=s(fe[ae].from);if(he.test(L))return fe[ae].convert(L)}throw new Error("Cannot convert "+L+" to "+z)}function _(L){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return L.map(function(Z){return Z.name}).join(z)}function D(L){var z=L.indexOf("...")===0,Z=z?L.length>3?L.slice(3):"any":L,fe=Z.split("|").map(function(ce){return s(ce.trim())}),ae=!1,he=z?"...":"",se=fe.map(function(ce){return ae=ce.isAny||ae,he+=ce.name+"|",{name:ce.name,typeIndex:ce.index,test:ce.test,isAny:ce.isAny,conversion:null,conversionIndex:-1}});return{types:se,name:he.slice(0,-1),hasAny:ae,hasConversion:!1,restParam:z}}function C(L){var z=L.types.map(function(se){return se.name}),Z=Q(z),fe=L.hasAny,ae=L.name,he=Z.map(function(se){var ce=s(se.from);return fe=ce.isAny||fe,ae+="|"+se.from,{name:se.from,typeIndex:ce.index,test:ce.test,isAny:ce.isAny,conversion:se,conversionIndex:se.index}});return{types:L.types.concat(he),name:ae,hasAny:fe,hasConversion:he.length>0,restParam:L.restParam}}function A(L){return L.typeSet||(L.typeSet=new Set,L.types.forEach(function(z){return L.typeSet.add(z.name)})),L.typeSet}function B(L){var z=[];if(typeof L!="string")throw new TypeError("Signatures must be strings");var Z=L.trim();if(Z==="")return z;for(var fe=Z.split(","),ae=0;ae<fe.length;++ae){var he=D(fe[ae].trim());if(he.restParam&&ae!==fe.length-1)throw new SyntaxError('Unexpected rest parameter "'+fe[ae]+'": only allowed for the last parameter');if(he.types.length===0)return null;z.push(he)}return z}function E(L){var z=Re(L);return z?z.restParam:!1}function O(L){if(!L||L.types.length===0)return Xh;if(L.types.length===1)return s(L.types[0].name).test;if(L.types.length===2){var z=s(L.types[0].name).test,Z=s(L.types[1].name).test;return function(he){return z(he)||Z(he)}}else{var fe=L.types.map(function(ae){return s(ae.name).test});return function(he){for(var se=0;se<fe.length;se++)if(fe[se](he))return!0;return!1}}}function P(L){var z,Z,fe;if(E(L)){z=ze(L).map(O);var ae=z.length,he=O(Re(L)),se=function(ye){for(var ke=ae;ke<ye.length;ke++)if(!he(ye[ke]))return!1;return!0};return function(ye){for(var ke=0;ke<z.length;ke++)if(!z[ke](ye[ke]))return!1;return se(ye)&&ye.length>=ae+1}}else return L.length===0?function(ye){return ye.length===0}:L.length===1?(Z=O(L[0]),function(ye){return Z(ye[0])&&ye.length===1}):L.length===2?(Z=O(L[0]),fe=O(L[1]),function(ye){return Z(ye[0])&&fe(ye[1])&&ye.length===2}):(z=L.map(O),function(ye){for(var ke=0;ke<z.length;ke++)if(!z[ke](ye[ke]))return!1;return ye.length===z.length})}function x(L,z){return z<L.length?L[z]:E(L)?Re(L):null}function R(L,z){var Z=x(L,z);return Z?A(Z):new Set}function G(L){return L.conversion===null||L.conversion===void 0}function re(L,z){var Z=new Set;return L.forEach(function(fe){var ae=R(fe.params,z),he,se=xn(ae),ce;try{for(se.s();!(ce=se.n()).done;)he=ce.value,Z.add(he)}catch(ye){se.e(ye)}finally{se.f()}}),Z.has("any")?["any"]:Array.from(Z)}function U(L,z,Z){var fe,ae,he=L||"unnamed",se=Z,ce,ye=function(){var Zt=[];if(se.forEach(function(Xt){var Dr=x(Xt.params,ce),cr=O(Dr);(ce<Xt.params.length||E(Xt.params))&&cr(z[ce])&&Zt.push(Xt)}),Zt.length===0){if(ae=re(se,ce),ae.length>0){var _r=h(z[ce]);return fe=new TypeError("Unexpected type of argument in function "+he+" (expected: "+ae.join(" or ")+", actual: "+_r.join(" | ")+", index: "+ce+")"),fe.data={category:"wrongType",fn:he,index:ce,actual:_r,expected:ae},{v:fe}}}else se=Zt};for(ce=0;ce<z.length;ce++){var ke=ye();if(du(ke)==="object")return ke.v}var Je=se.map(function(rr){return E(rr.params)?1/0:rr.params.length});if(z.length<Math.min.apply(null,Je))return ae=re(se,ce),fe=new TypeError("Too few arguments in function "+he+" (expected: "+ae.join(" or ")+", index: "+z.length+")"),fe.data={category:"tooFewArgs",fn:he,index:z.length,expected:ae},fe;var Fe=Math.max.apply(null,Je);if(z.length>Fe)return fe=new TypeError("Too many arguments in function "+he+" (expected: "+Fe+", actual: "+z.length+")"),fe.data={category:"tooManyArgs",fn:he,index:z.length,expectedLength:Fe},fe;for(var zt=[],It=0;It<z.length;++It)zt.push(h(z[It]).join("|"));return fe=new TypeError('Arguments of type "'+zt.join(", ")+'" do not match any of the defined signatures of function '+he+"."),fe.data={category:"mismatch",actual:zt},fe}function X(L){for(var z=i.length+1,Z=0;Z<L.types.length;Z++)G(L.types[Z])&&(z=Math.min(z,L.types[Z].typeIndex));return z}function H(L){for(var z=a+1,Z=0;Z<L.types.length;Z++)G(L.types[Z])||(z=Math.min(z,L.types[Z].conversionIndex));return z}function V(L,z){if(L.hasAny){if(!z.hasAny)return 1}else if(z.hasAny)return-1;if(L.restParam){if(!z.restParam)return 1}else if(z.restParam)return-1;if(L.hasConversion){if(!z.hasConversion)return 1}else if(z.hasConversion)return-1;var Z=X(L)-X(z);if(Z<0)return-1;if(Z>0)return 1;var fe=H(L)-H(z);return fe<0?-1:fe>0?1:0}function W(L,z){var Z=L.params,fe=z.params,ae=Re(Z),he=Re(fe),se=E(Z),ce=E(fe);if(se&&ae.hasAny){if(!ce||!he.hasAny)return 1}else if(ce&&he.hasAny)return-1;var ye=0,ke=0,Je,Fe=xn(Z),zt;try{for(Fe.s();!(zt=Fe.n()).done;)Je=zt.value,Je.hasAny&&++ye,Je.hasConversion&&++ke}catch(Rn){Fe.e(Rn)}finally{Fe.f()}var It=0,rr=0,Zt=xn(fe),_r;try{for(Zt.s();!(_r=Zt.n()).done;)Je=_r.value,Je.hasAny&&++It,Je.hasConversion&&++rr}catch(Rn){Zt.e(Rn)}finally{Zt.f()}if(ye!==It)return ye-It;if(se&&ae.hasConversion){if(!ce||!he.hasConversion)return 1}else if(ce&&he.hasConversion)return-1;if(ke!==rr)return ke-rr;if(se){if(!ce)return 1}else if(ce)return-1;var Xt=(Z.length-fe.length)*(se?-1:1);if(Xt!==0)return Xt;for(var Dr=[],cr=0,hr=0;hr<Z.length;++hr){var cn=V(Z[hr],fe[hr]);Dr.push(cn),cr+=cn}if(cr!==0)return cr;for(var pr,Sn=0,Yn=Dr;Sn<Yn.length;Sn++)if(pr=Yn[Sn],pr!==0)return pr;return 0}function Q(L){if(L.length===0)return[];var z=L.map(s);L.length>1&&z.sort(function(ye,ke){return ye.index-ke.index});var Z=z[0].conversionsTo;if(L.length===1)return Z;Z=Z.concat([]);for(var fe=new Set(L),ae=1;ae<z.length;++ae){var he=void 0,se=xn(z[ae].conversionsTo),ce;try{for(se.s();!(ce=se.n()).done;)he=ce.value,fe.has(he.from)||(Z.push(he),fe.add(he.from))}catch(ye){se.e(ye)}finally{se.f()}}return Z}function Y(L,z){var Z=z;if(L.some(function(ce){return ce.hasConversion})){var fe=E(L),ae=L.map(J);Z=function(){for(var ye=[],ke=fe?arguments.length-1:arguments.length,Je=0;Je<ke;Je++)ye[Je]=ae[Je](arguments[Je]);return fe&&(ye[ke]=arguments[ke].map(ae[ke])),z.apply(this,ye)}}var he=Z;if(E(L)){var se=L.length-1;he=function(){return Z.apply(this,je(arguments,0,se).concat([je(arguments,se)]))}}return he}function J(L){var z,Z,fe,ae,he=[],se=[];switch(L.types.forEach(function(ce){ce.conversion&&(he.push(s(ce.conversion.from).test),se.push(ce.conversion.convert))}),se.length){case 0:return function(ye){return ye};case 1:return z=he[0],fe=se[0],function(ye){return z(ye)?fe(ye):ye};case 2:return z=he[0],Z=he[1],fe=se[0],ae=se[1],function(ye){return z(ye)?fe(ye):Z(ye)?ae(ye):ye};default:return function(ye){for(var ke=0;ke<se.length;ke++)if(he[ke](ye))return se[ke](ye);return ye}}}function le(L){function z(Z,fe,ae){if(fe<Z.length){var he=Z[fe],se=[];if(he.restParam){var ce=he.types.filter(G);ce.length<he.types.length&&se.push({types:ce,name:"..."+ce.map(function(ye){return ye.name}).join("|"),hasAny:ce.some(function(ye){return ye.isAny}),hasConversion:!1,restParam:!0}),se.push(he)}else se=he.types.map(function(ye){return{types:[ye],name:ye.name,hasAny:ye.isAny,hasConversion:ye.conversion,restParam:!1}});return ut(se,function(ye){return z(Z,fe+1,ae.concat([ye]))})}else return[ae]}return z(L,0,[])}function me(L,z){for(var Z=Math.max(L.length,z.length),fe=0;fe<Z;fe++){var ae=R(L,fe),he=R(z,fe),se=!1,ce=void 0,ye=xn(he),ke;try{for(ye.s();!(ke=ye.n()).done;)if(ce=ke.value,ae.has(ce)){se=!0;break}}catch(rr){ye.e(rr)}finally{ye.f()}if(!se)return!1}var Je=L.length,Fe=z.length,zt=E(L),It=E(z);return zt?It?Je===Fe:Fe>=Je:It?Je>=Fe:Je===Fe}function Ce(L){return L.map(function(z){return $e(z)?st(z.referToSelf.callback):Ke(z)?at(z.referTo.references,z.referTo.callback):z})}function Ae(L,z,Z){var fe=[],ae,he=xn(L),se;try{for(he.s();!(se=he.n()).done;){ae=se.value;var ce=Z[ae];if(typeof ce!="number")throw new TypeError('No definition for referenced signature "'+ae+'"');if(ce=z[ce],typeof ce!="function")return!1;fe.push(ce)}}catch(ye){he.e(ye)}finally{he.f()}return fe}function Pe(L,z,Z){for(var fe=Ce(L),ae=new Array(fe.length).fill(!1),he=!0;he;){he=!1;for(var se=!0,ce=0;ce<fe.length;++ce)if(!ae[ce]){var ye=fe[ce];if($e(ye))fe[ce]=ye.referToSelf.callback(Z),fe[ce].referToSelf=ye.referToSelf,ae[ce]=!0,se=!1;else if(Ke(ye)){var ke=Ae(ye.referTo.references,fe,z);ke?(fe[ce]=ye.referTo.callback.apply(this,ke),fe[ce].referTo=ye.referTo,ae[ce]=!0,se=!1):he=!0}}if(se&&he)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return fe}function Ve(L){var z=/\bthis(\(|\.signatures\b)/;Object.keys(L).forEach(function(Z){var fe=L[Z];if(z.test(fe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Ie(L,z){if(o.createCount++,Object.keys(z).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&Ve(z);var Z=[],fe=[],ae={},he=[],se,ce=function(){if(!Object.prototype.hasOwnProperty.call(z,se))return"continue";var ar=B(se);if(!ar)return"continue";Z.forEach(function(dn){if(me(dn,ar))throw new TypeError('Conflicting signatures "'+_(dn)+'" and "'+_(ar)+'".')}),Z.push(ar);var qr=fe.length;fe.push(z[se]);var Ii=ar.map(C),Xn=void 0,Vn=xn(le(Ii)),ki;try{for(Vn.s();!(ki=Vn.n()).done;){Xn=ki.value;var Bn=_(Xn);he.push({params:Xn,name:Bn,fn:qr}),Xn.every(function(dn){return!dn.hasConversion})&&(ae[Bn]=qr)}}catch(dn){Vn.e(dn)}finally{Vn.f()}};for(se in z)var ye=ce();he.sort(W);var ke=Pe(fe,ae,Un),Je;for(Je in ae)Object.prototype.hasOwnProperty.call(ae,Je)&&(ae[Je]=ke[ae[Je]]);for(var Fe=[],zt=new Map,It=0,rr=he;It<rr.length;It++)Je=rr[It],zt.has(Je.name)||(Je.fn=ke[Je.fn],Fe.push(Je),zt.set(Je.name,Je));for(var Zt=Fe[0]&&Fe[0].params.length<=2&&!E(Fe[0].params),_r=Fe[1]&&Fe[1].params.length<=2&&!E(Fe[1].params),Xt=Fe[2]&&Fe[2].params.length<=2&&!E(Fe[2].params),Dr=Fe[3]&&Fe[3].params.length<=2&&!E(Fe[3].params),cr=Fe[4]&&Fe[4].params.length<=2&&!E(Fe[4].params),hr=Fe[5]&&Fe[5].params.length<=2&&!E(Fe[5].params),cn=Zt&&_r&&Xt&&Dr&&cr&&hr,pr=0;pr<Fe.length;++pr)Fe[pr].test=P(Fe[pr].params);for(var Sn=Zt?O(Fe[0].params[0]):wn,Yn=_r?O(Fe[1].params[0]):wn,Rn=Xt?O(Fe[2].params[0]):wn,Ln=Dr?O(Fe[3].params[0]):wn,Ki=cr?O(Fe[4].params[0]):wn,Ti=hr?O(Fe[5].params[0]):wn,Au=Zt?O(Fe[0].params[1]):wn,Fr=_r?O(Fe[1].params[1]):wn,nr=Xt?O(Fe[2].params[1]):wn,Eu=Dr?O(Fe[3].params[1]):wn,fi=cr?O(Fe[4].params[1]):wn,hn=hr?O(Fe[5].params[1]):wn,Zn=0;Zn<Fe.length;++Zn)Fe[Zn].implementation=Y(Fe[Zn].params,Fe[Zn].fn);var xi=Zt?Fe[0].implementation:fu,Cu=_r?Fe[1].implementation:fu,Fu=Xt?Fe[2].implementation:fu,$i=Dr?Fe[3].implementation:fu,Su=cr?Fe[4].implementation:fu,Bu=hr?Fe[5].implementation:fu,Ou=Zt?Fe[0].params.length:-1,Mu=_r?Fe[1].params.length:-1,Pu=Xt?Fe[2].params.length:-1,Tu=Dr?Fe[3].params.length:-1,ci=cr?Fe[4].params.length:-1,xu=hr?Fe[5].params.length:-1,hi=cn?6:0,Iu=Fe.length,ku=Fe.map(function(br){return br.test}),Nu=Fe.map(function(br){return br.implementation}),Yi=function(){for(var ar=hi;ar<Iu;ar++)if(ku[ar](arguments))return Nu[ar].apply(this,arguments);return o.onMismatch(L,arguments,Fe)};function Un(br,ar){return arguments.length===Ou&&Sn(br)&&Au(ar)?xi.apply(this,arguments):arguments.length===Mu&&Yn(br)&&Fr(ar)?Cu.apply(this,arguments):arguments.length===Pu&&Rn(br)&&nr(ar)?Fu.apply(this,arguments):arguments.length===Tu&&Ln(br)&&Eu(ar)?$i.apply(this,arguments):arguments.length===ci&&Ki(br)&&fi(ar)?Su.apply(this,arguments):arguments.length===xu&&Ti(br)&&hn(ar)?Bu.apply(this,arguments):Yi.apply(this,arguments)}try{Object.defineProperty(Un,"name",{value:L})}catch{}return Un.signatures=ae,Un._typedFunctionData={signatures:Fe,signatureMap:zt},Un}function Xe(L,z,Z){throw U(L,z,Z)}function ze(L){return je(L,0,L.length-1)}function Re(L){return L[L.length-1]}function je(L,z,Z){return Array.prototype.slice.call(L,z,Z)}function pt(L,z){for(var Z=0;Z<L.length;Z++)if(z(L[Z]))return L[Z]}function ut(L,z){return Array.prototype.concat.apply([],L.map(z))}function lt(){var L=ze(arguments).map(function(Z){return _(B(Z))}),z=Re(arguments);if(typeof z!="function")throw new TypeError("Callback function expected as last argument");return at(L,z)}function at(L,z){return{referTo:{references:L,callback:z}}}function st(L){if(typeof L!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:L}}}function Ke(L){return L&&du(L.referTo)==="object"&&Array.isArray(L.referTo.references)&&typeof L.referTo.callback=="function"}function $e(L){return L&&du(L.referToSelf)==="object"&&typeof L.referToSelf.callback=="function"}function Ee(L,z){if(!L)return z;if(z&&z!==L){var Z=new Error("Function names do not match (expected: "+L+", actual: "+z+")");throw Z.data={actual:z,expected:L},Z}return L}function Te(L){var z;for(var Z in L)Object.prototype.hasOwnProperty.call(L,Z)&&(d(L[Z])||typeof L[Z].signature=="string")&&(z=Ee(z,L[Z].name));return z}function Bt(L,z){var Z;for(Z in z)if(Object.prototype.hasOwnProperty.call(z,Z)){if(Z in L&&z[Z]!==L[Z]){var fe=new Error('Signature "'+Z+'" is defined twice');throw fe.data={signature:Z,sourceFunction:z[Z],destFunction:L[Z]},fe}L[Z]=z[Z]}}var Vt=o;o=function(z){for(var Z=typeof z=="string",fe=Z?1:0,ae=Z?z:"",he={},se=fe;se<arguments.length;++se){var ce=arguments[se],ye={},ke=void 0;if(typeof ce=="function"?(ke=ce.name,typeof ce.signature=="string"?ye[ce.signature]=ce:d(ce)&&(ye=ce.signatures)):t(ce)&&(ye=ce,Z||(ke=Te(ce))),Object.keys(ye).length===0){var Je=new TypeError("Argument to 'typed' at index "+se+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Je.data={index:se,argument:ce},Je}Z||(ae=Ee(ae,ke)),Bt(he,ye)}return Ie(ae||"",he)},o.create=Qd,o.createCount=Vt.createCount,o.onMismatch=Xe,o.throwMismatchError=Xe,o.createError=U,o.clear=p,o.clearConversions=f,o.addTypes=c,o._findType=s,o.referTo=lt,o.referToSelf=st,o.convert=m,o.findSignature=g,o.find=b,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function(L,z){var Z="any";z!==!1&&n.has("Object")&&(Z="Object"),o.addTypes([L],Z)};function Ht(L){if(!L||typeof L.from!="string"||typeof L.to!="string"||typeof L.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(L.to===L.from)throw new SyntaxError('Illegal to define conversion from "'+L.from+'" to itself.')}return o.addConversion=function(L){Ht(L);var z=s(L.to);if(z.conversionsTo.every(function(Z){return Z.from!==L.from}))z.conversionsTo.push({from:L.from,convert:L.convert,index:a++});else throw new Error('There is already a conversion from "'+L.from+'" to "'+z.name+'"')},o.addConversions=function(L){L.forEach(o.addConversion)},o.removeConversion=function(L){Ht(L);var z=s(L.to),Z=pt(z.conversionsTo,function(ae){return ae.from===L.from});if(!Z)throw new Error("Attempt to remove nonexistent conversion from "+L.from+" to "+L.to);if(Z.convert!==L.convert)throw new Error("Conversion to remove does not match existing conversion");var fe=z.conversionsTo.indexOf(Z);z.conversionsTo.splice(fe,1)},o.resolve=function(L,z){if(!d(L))throw new TypeError(Jh);for(var Z=L._typedFunctionData.signatures,fe=0;fe<Z.length;++fe)if(Z[fe].test(z))return Z[fe];return null},o}const Qh=Qd();function Ar(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function ol(t,e,r){var n={2:"0b",8:"0o",16:"0x"},i=n[e],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Ar(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Ar(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),a="i".concat(r)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(i).concat(t.toString(e)).concat(a)}function zl(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",n,i;if(e&&(e.notation&&(r=e.notation),tr(e)?n=e:tr(e.precision)&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return hw(t,n);case"exponential":return ep(t,n);case"engineering":return cw(t,n);case"bin":return ol(t,2,i);case"oct":return ol(t,8,i);case"hex":return ol(t,16,i);case"auto":return dw(t,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],o=arguments[4];return a!=="."?a+o:o});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Rs(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),a=n.indexOf(".");i+=a!==-1?a-1:n.length-1;var o=n.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return o.length===0&&(o.push(0),i++),{sign:r,coefficients:o,exponent:i}}function cw(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Rs(t),n=Ls(r,e),i=n.exponent,a=n.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(tr(e))for(;e>a.length||i-o+1>a.length;)a.push(0);else for(var s=Math.abs(i-o)-(a.length-1),c=0;c<s;c++)a.push(0);for(var p=Math.abs(i-o),f=1;p>0;)f++,p--;var h=a.slice(f).join(""),d=tr(e)&&h.length||h.match(/[1-9]/)?"."+h:"",g=a.slice(0,f).join("")+d+"e"+(i>=0?"+":"")+o.toString();return n.sign+g}function hw(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Rs(t),n=typeof e=="number"?Ls(r,r.exponent+1+e):r,i=n.coefficients,a=n.exponent+1,o=a+(e||0);return i.length<o&&(i=i.concat(gu(o-i.length))),a<0&&(i=gu(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),n.sign+i.join("")}function ep(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Rs(t),n=e?Ls(r,e):r,i=n.coefficients,a=n.exponent;i.length<e&&(i=i.concat(gu(e-i.length)));var o=i.shift();return n.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function dw(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=r&&r.lowerExp!==void 0?r.lowerExp:-3,i=r&&r.upperExp!==void 0?r.upperExp:5,a=Rs(t),o=e?Ls(a,e):a;if(o.exponent<n||o.exponent>=i)return ep(t,e);var s=o.coefficients,c=o.exponent;s.length<e&&(s=s.concat(gu(e-s.length))),s=s.concat(gu(c-s.length+1+(s.length<e?e-s.length:0))),s=gu(-c).concat(s);var p=c>0?c:0;return p<s.length-1&&s.splice(p+1,0,"."),o.sign+s.join("")}function Ls(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var a=e-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),r.exponent++,a++),a--,n[a]++}}return r}function gu(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function pw(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var gw=Number.EPSILON||2220446049250313e-31;function cs(t,e,r){if(r==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var n=Math.abs(t-e);return n<gw?!0:n<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}function ll(t,e,r){var n=t.constructor,i=new n(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Ar(r))throw new Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),a="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function vw(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",n,i;if(e!==void 0&&(e.notation&&(r=e.notation),typeof e=="number"?n=e:e.precision&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return _w(t,n);case"exponential":return e0(t,n);case"engineering":return mw(t,n);case"bin":return ll(t,2,i);case"oct":return ll(t,8,i);case"hex":return ll(t,16,i);case"auto":{var a=e&&e.lowerExp!==void 0?e.lowerExp:-3,o=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var s,c=t.toSignificantDigits(n),p=c.e;return p>=a&&p<o?s=c.toFixed():s=e0(t,n),s.replace(/((\.\d*?)(0+))($|e)/,function(){var f=arguments[2],h=arguments[4];return f!=="."?f+h:h})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function mw(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),a=i.toPrecision(e);return a.indexOf("e")!==-1&&(a=i.toString()),a+"e"+(r>=0?"+":"")+n.toString()}function e0(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function _w(t,e){return t.toFixed(e)}function Jr(t,e){var r=Dw(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function Dw(t,e){if(typeof t=="number")return zl(t,e);if(En(t))return vw(t,e);if(bw(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return tp(t,e);if(Wn(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>'"'+n+'": '+Jr(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function tp(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=tp(t[i],e);return r+="]",r}else return Jr(t,e)}function bw(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function Nt(t,e,r){if(!(this instanceof Nt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Nt.prototype=new RangeError;Nt.prototype.constructor=RangeError;Nt.prototype.name="DimensionError";Nt.prototype.isDimensionError=!0;function Gi(t,e,r){if(!(this instanceof Gi))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Gi.prototype=new RangeError;Gi.prototype.constructor=RangeError;Gi.prototype.name="IndexError";Gi.prototype.isIndexError=!0;function Si(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function rp(t,e,r){var n,i=t.length;if(i!==e[r])throw new Nt(i,e[r]);if(r<e.length-1){var a=r+1;for(n=0;n<i;n++){var o=t[n];if(!Array.isArray(o))throw new Nt(e.length-1,e.length,"<");rp(t[n],e,a)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new Nt(e.length+1,e.length,">")}function t0(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new Nt(t.length,0)}else rp(t,e,0)}function er(t,e){if(!tr(t)||!Ar(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Gi(t,e)}function r0(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!tr(i)||!Ar(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Jr(e)+")")});var n=r!==void 0?r:0;return Wl(t,e,0,n),t}function Wl(t,e,r,n){var i,a,o=t.length,s=e[r],c=Math.min(o,s);if(t.length=s,r<e.length-1){var p=r+1;for(i=0;i<c;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),Wl(a,e,p,n);for(i=c;i<s;i++)a=[],t[i]=a,Wl(a,e,p,n)}else{for(i=0;i<c;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=c;i<s;i++)t[i]=n}}function yw(t,e){var r=Aw(t),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Nt(0,n,"!=");e=gf(e,n);var i=np(e);if(n!==i)throw new Nt(i,n,"!=");try{return ww(r,e)}catch(a){throw a instanceof Nt?new Nt(i,n,"!="):a}}function gf(t,e){var r=np(t),n=t.slice(),i=-1,a=t.indexOf(i),o=t.indexOf(i,a+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var s=a>=0,c=e%r===0;if(s)if(c)n[a]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function np(t){return t.reduce((e,r)=>e*r,1)}function ww(t,e){for(var r=t,n,i=e.length-1;i>0;i--){var a=e[i];n=[];for(var o=r.length/a,s=0;s<o;s++)n.push(r.slice(s*a,(s+1)*a));r=n}return r}function ip(t,e,r,n){var i=n||Si(t);if(r)for(var a=0;a<r;a++)t=[t],i.unshift(1);for(t=up(t,e,0);i.length<e;)i.push(1);return t}function up(t,e,r){var n,i;if(Array.isArray(t)){var a=r+1;for(n=0,i=t.length;n<i;n++)t[n]=up(t[n],e,a)}else for(var o=r;o<e;o++)t=[t];return t}function Aw(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function r(n){Array.isArray(n)?n.forEach(r):e.push(n)}),e}function hs(t,e){for(var r,n=0,i=0;i<t.length;i++){var a=t[i],o=Array.isArray(a);if(i===0&&o&&(n=a.length),o&&a.length!==n)return;var s=o?hs(a,e):e(a);if(r===void 0)r=s;else if(r!==s)return"mixed"}return r}function Ut(t,e,r,n){function i(a){var o=sw(a,e.map(Fw));return Ew(t,e,a),r(o)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Ew(t,e,r){var n=e.filter(a=>!Cw(a)).every(a=>r[a]!==void 0);if(!n){var i=e.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function Cw(t){return t&&t[0]==="?"}function Fw(t){return t&&t[0]==="?"?t.slice(1):t}function Sw(t,e){if(sp(t)&&ap(t,e))return t[e];throw typeof t[e]=="function"&&Mw(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Bw(t,e,r){if(sp(t)&&ap(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function Ow(t,e){return e in t}function ap(t,e){return!t||typeof t!="object"?!1:ra(Pw,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Mw(t,e){return t==null||typeof t[e]!="function"||ra(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:ra(Tw,e)?!0:!(e in Object.prototype||e in Function.prototype)}function sp(t){return typeof t=="object"&&t&&t.constructor===Object}var Pw={length:!0,name:!0},Tw={toString:!0,valueOf:!0,toLocaleString:!0};class xw{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return Sw(this.wrappedObject,e)}set(e,r){return Bw(this.wrappedObject,e,r),this}has(e){return Ow(this.wrappedObject,e)}}function Iw(t){return t?t instanceof Map||t instanceof xw||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var op=function(){return op=Qh.create,Qh},kw=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Nw=Ut("typed",kw,function(e){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:a}=e,o=op();return o.clear(),o.addTypes([{name:"number",test:tr},{name:"Complex",test:Zd},{name:"BigNumber",test:En},{name:"Fraction",test:Xd},{name:"Unit",test:Jd},{name:"identifier",test:s=>Wn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(s)},{name:"string",test:Wn},{name:"Chain",test:iw},{name:"Array",test:Qt},{name:"Matrix",test:Kr},{name:"DenseMatrix",test:Py},{name:"SparseMatrix",test:Ty},{name:"Range",test:xy},{name:"Index",test:df},{name:"boolean",test:Iy},{name:"ResultSet",test:ky},{name:"Help",test:Ny},{name:"function",test:Ry},{name:"Date",test:Ly},{name:"RegExp",test:Uy},{name:"null",test:jy},{name:"undefined",test:pf},{name:"AccessorNode",test:qy},{name:"ArrayNode",test:zy},{name:"AssignmentNode",test:Wy},{name:"BlockNode",test:Hy},{name:"ConditionalNode",test:Gy},{name:"ConstantNode",test:Ky},{name:"FunctionNode",test:Yy},{name:"FunctionAssignmentNode",test:$y},{name:"IndexNode",test:Zy},{name:"Node",test:Xy},{name:"ObjectNode",test:Jy},{name:"OperatorNode",test:Qy},{name:"ParenthesisNode",test:ew},{name:"RangeNode",test:tw},{name:"RelationalNode",test:rw},{name:"SymbolNode",test:nw},{name:"Map",test:Iw},{name:"Object",test:Vy}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(c){if(r||fl(c),pw(c)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+c+"). Use function bignumber(x) to convert to BigNumber.");return new r(c)}},{from:"number",to:"Complex",convert:function(c){return n||Ja(c),new n(c,0)}},{from:"BigNumber",to:"Complex",convert:function(c){return n||Ja(c),new n(c.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(c){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(c){return n||Ja(c),new n(c.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(c){a||cl(c);var p=new a(c);if(p.valueOf()!==c)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+c+"). Use function fraction(x) to convert to Fraction.");return p}},{from:"string",to:"number",convert:function(c){var p=Number(c);if(isNaN(p))throw new Error('Cannot convert "'+c+'" to a number');return p}},{from:"string",to:"BigNumber",convert:function(c){r||fl(c);try{return new r(c)}catch{throw new Error('Cannot convert "'+c+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(c){a||cl(c);try{return new a(c)}catch{throw new Error('Cannot convert "'+c+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(c){n||Ja(c);try{return new n(c)}catch{throw new Error('Cannot convert "'+c+'" to Complex')}}},{from:"boolean",to:"number",convert:function(c){return+c}},{from:"boolean",to:"BigNumber",convert:function(c){return r||fl(c),new r(+c)}},{from:"boolean",to:"Fraction",convert:function(c){return a||cl(c),new a(+c)}},{from:"boolean",to:"string",convert:function(c){return String(c)}},{from:"Array",to:"Matrix",convert:function(c){return i||Rw(),new i(c)}},{from:"Matrix",to:"Array",convert:function(c){return c.valueOf()}}]),o.onMismatch=(s,c,p)=>{var f=o.createError(s,c,p);if(["wrongType","mismatch"].includes(f.data.category)&&c.length===1&&ls(c[0])&&p.some(d=>!d.params.includes(","))){var h=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw h.data=f.data,h}throw f},o.onMismatch=(s,c,p)=>{var f=o.createError(s,c,p);if(["wrongType","mismatch"].includes(f.data.category)&&c.length===1&&ls(c[0])&&p.some(d=>!d.params.includes(","))){var h=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw h.data=f.data,h}throw f},o});function fl(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Ja(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function Rw(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function cl(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var pu=9e15,Mi=1e9,Hl="0123456789abcdef",ds="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",ps="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Gl={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-pu,maxE:pu,crypto:!1},lp,oi,ot=!0,Us="[DecimalError] ",Bi=Us+"Invalid argument: ",fp=Us+"Precision limit exceeded",cp=Us+"crypto unavailable",hp="[object Decimal]",jr=Math.floor,mr=Math.pow,Lw=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Uw=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Vw=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,dp=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Nn=1e7,Ze=7,jw=9007199254740991,qw=ds.length-1,Kl=ps.length-1,_e={toStringTag:hp};_e.absoluteValue=_e.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Ge(t)};_e.ceil=function(){return Ge(new this.constructor(this),this.e+1,2)};_e.clampedTo=_e.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Bi+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};_e.comparedTo=_e.cmp=function(t){var e,r,n,i,a=this,o=a.d,s=(t=new a.constructor(t)).d,c=a.s,p=t.s;if(!o||!s)return!c||!p?NaN:c!==p?c:o===s?0:!o^c<0?1:-1;if(!o[0]||!s[0])return o[0]?c:s[0]?-p:0;if(c!==p)return c;if(a.e!==t.e)return a.e>t.e^c<0?1:-1;for(n=o.length,i=s.length,e=0,r=n<i?n:i;e<r;++e)if(o[e]!==s[e])return o[e]>s[e]^c<0?1:-1;return n===i?0:n>i^c<0?1:-1};_e.cosine=_e.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+Ze,n.rounding=1,r=zw(n,_p(n,r)),n.precision=t,n.rounding=e,Ge(oi==2||oi==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};_e.cubeRoot=_e.cbrt=function(){var t,e,r,n,i,a,o,s,c,p,f=this,h=f.constructor;if(!f.isFinite()||f.isZero())return new h(f);for(ot=!1,a=f.s*mr(f.s*f,1/3),!a||Math.abs(a)==1/0?(r=Ir(f.d),t=f.e,(a=(t-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=mr(r,1/3),t=jr((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?r="5e"+t:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new h(r),n.s=f.s):n=new h(a.toString()),o=(t=h.precision)+3;;)if(s=n,c=s.times(s).times(s),p=c.plus(f),n=qt(p.plus(f).times(s),p.plus(c),o+2,1),Ir(s.d).slice(0,o)===(r=Ir(n.d)).slice(0,o))if(r=r.slice(o-3,o+1),r=="9999"||!i&&r=="4999"){if(!i&&(Ge(s,t+1,0),s.times(s).times(s).eq(f))){n=s;break}o+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Ge(n,t+1,1),e=!n.times(n).times(n).eq(f));break}return ot=!0,Ge(n,t,h.rounding,e)};_e.decimalPlaces=_e.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-jr(this.e/Ze))*Ze,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};_e.dividedBy=_e.div=function(t){return qt(this,new this.constructor(t))};_e.dividedToIntegerBy=_e.divToInt=function(t){var e=this,r=e.constructor;return Ge(qt(e,new r(t),0,1,1),r.precision,r.rounding)};_e.equals=_e.eq=function(t){return this.cmp(t)===0};_e.floor=function(){return Ge(new this.constructor(this),this.e+1,3)};_e.greaterThan=_e.gt=function(t){return this.cmp(t)>0};_e.greaterThanOrEqualTo=_e.gte=function(t){var e=this.cmp(t);return e==1||e===0};_e.hyperbolicCosine=_e.cosh=function(){var t,e,r,n,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;r=o.precision,n=o.rounding,o.precision=r+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/js(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=_u(o,1,a.times(e),new o(1),!0);for(var c,p=t,f=new o(8);p--;)c=a.times(a),a=s.minus(c.times(f.minus(c.times(f))));return Ge(a,o.precision=r,o.rounding=n,!0)};_e.hyperbolicSine=_e.sinh=function(){var t,e,r,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,r=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=_u(a,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/js(5,t)),i=_u(a,2,i,i,!0);for(var o,s=new a(5),c=new a(16),p=new a(20);t--;)o=i.times(i),i=i.times(s.plus(o.times(c.times(o).plus(p))))}return a.precision=e,a.rounding=r,Ge(i,e,r,!0)};_e.hyperbolicTangent=_e.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,qt(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};_e.inverseCosine=_e.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),i=r.precision,a=r.rounding;return n!==-1?n===0?e.isNeg()?In(r,i,a):new r(0):new r(NaN):e.isZero()?In(r,i+4,a).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),t=In(r,i+4,a).times(.5),r.precision=i,r.rounding=a,t.minus(e))};_e.inverseHyperbolicCosine=_e.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,ot=!1,r=r.times(r).minus(1).sqrt().plus(r),ot=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};_e.inverseHyperbolicSine=_e.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,ot=!1,r=r.times(r).plus(1).sqrt().plus(r),ot=!0,n.precision=t,n.rounding=e,r.ln())};_e.inverseHyperbolicTangent=_e.atanh=function(){var t,e,r,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?Ge(new a(i),t,e,!0):(a.precision=r=n-i.e,i=qt(i.plus(1),new a(1).minus(i),r+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};_e.inverseSine=_e.asin=function(){var t,e,r,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),r=a.precision,n=a.rounding,e!==-1?e===0?(t=In(a,r+4,n).times(.5),t.s=i.s,t):new a(NaN):(a.precision=r+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,i.times(2)))};_e.inverseTangent=_e.atan=function(){var t,e,r,n,i,a,o,s,c,p=this,f=p.constructor,h=f.precision,d=f.rounding;if(p.isFinite()){if(p.isZero())return new f(p);if(p.abs().eq(1)&&h+4<=Kl)return o=In(f,h+4,d).times(.25),o.s=p.s,o}else{if(!p.s)return new f(NaN);if(h+4<=Kl)return o=In(f,h+4,d).times(.5),o.s=p.s,o}for(f.precision=s=h+10,f.rounding=1,r=Math.min(28,s/Ze+2|0),t=r;t;--t)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(ot=!1,e=Math.ceil(s/Ze),n=1,c=p.times(p),o=new f(p),i=p;t!==-1;)if(i=i.times(c),a=o.minus(i.div(n+=2)),i=i.times(c),o=a.plus(i.div(n+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return r&&(o=o.times(2<<r-1)),ot=!0,Ge(o,f.precision=h,f.rounding=d,!0)};_e.isFinite=function(){return!!this.d};_e.isInteger=_e.isInt=function(){return!!this.d&&jr(this.e/Ze)>this.d.length-2};_e.isNaN=function(){return!this.s};_e.isNegative=_e.isNeg=function(){return this.s<0};_e.isPositive=_e.isPos=function(){return this.s>0};_e.isZero=function(){return!!this.d&&this.d[0]===0};_e.lessThan=_e.lt=function(t){return this.cmp(t)<0};_e.lessThanOrEqualTo=_e.lte=function(t){return this.cmp(t)<1};_e.logarithm=_e.log=function(t){var e,r,n,i,a,o,s,c,p=this,f=p.constructor,h=f.precision,d=f.rounding,g=5;if(t==null)t=new f(10),e=!0;else{if(t=new f(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new f(NaN);e=t.eq(10)}if(r=p.d,p.s<0||!r||!r[0]||p.eq(1))return new f(r&&!r[0]?-1/0:p.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)a=!0;else{for(i=r[0];i%10===0;)i/=10;a=i!==1}if(ot=!1,s=h+g,o=Ei(p,s),n=e?gs(f,s+10):Ei(t,s),c=qt(o,n,s,1),na(c.d,i=h,d))do if(s+=10,o=Ei(p,s),n=e?gs(f,s+10):Ei(t,s),c=qt(o,n,s,1),!a){+Ir(c.d).slice(i+1,i+15)+1==1e14&&(c=Ge(c,h+1,0));break}while(na(c.d,i+=10,d));return ot=!0,Ge(c,h,d)};_e.minus=_e.sub=function(t){var e,r,n,i,a,o,s,c,p,f,h,d,g=this,b=g.constructor;if(t=new b(t),!g.d||!t.d)return!g.s||!t.s?t=new b(NaN):g.d?t.s=-t.s:t=new b(t.d||g.s!==t.s?g:NaN),t;if(g.s!=t.s)return t.s=-t.s,g.plus(t);if(p=g.d,d=t.d,s=b.precision,c=b.rounding,!p[0]||!d[0]){if(d[0])t.s=-t.s;else if(p[0])t=new b(g);else return new b(c===3?-0:0);return ot?Ge(t,s,c):t}if(r=jr(t.e/Ze),f=jr(g.e/Ze),p=p.slice(),a=f-r,a){for(h=a<0,h?(e=p,a=-a,o=d.length):(e=d,r=f,o=p.length),n=Math.max(Math.ceil(s/Ze),o)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=p.length,o=d.length,h=n<o,h&&(o=n),n=0;n<o;n++)if(p[n]!=d[n]){h=p[n]<d[n];break}a=0}for(h&&(e=p,p=d,d=e,t.s=-t.s),o=p.length,n=d.length-o;n>0;--n)p[o++]=0;for(n=d.length;n>a;){if(p[--n]<d[n]){for(i=n;i&&p[--i]===0;)p[i]=Nn-1;--p[i],p[n]+=Nn}p[n]-=d[n]}for(;p[--o]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=Vs(p,r),ot?Ge(t,s,c):t):new b(c===3?-0:0)};_e.modulo=_e.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?Ge(new n(r),n.precision,n.rounding):(ot=!1,n.modulo==9?(e=qt(r,t.abs(),0,3,1),e.s*=t.s):e=qt(r,t,0,n.modulo,1),e=e.times(t),ot=!0,r.minus(e))};_e.naturalExponential=_e.exp=function(){return $l(this)};_e.naturalLogarithm=_e.ln=function(){return Ei(this)};_e.negated=_e.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Ge(t)};_e.plus=_e.add=function(t){var e,r,n,i,a,o,s,c,p,f,h=this,d=h.constructor;if(t=new d(t),!h.d||!t.d)return!h.s||!t.s?t=new d(NaN):h.d||(t=new d(t.d||h.s===t.s?h:NaN)),t;if(h.s!=t.s)return t.s=-t.s,h.minus(t);if(p=h.d,f=t.d,s=d.precision,c=d.rounding,!p[0]||!f[0])return f[0]||(t=new d(h)),ot?Ge(t,s,c):t;if(a=jr(h.e/Ze),n=jr(t.e/Ze),p=p.slice(),i=a-n,i){for(i<0?(r=p,i=-i,o=f.length):(r=f,n=a,o=p.length),a=Math.ceil(s/Ze),o=a>o?a+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=p.length,i=f.length,o-i<0&&(i=o,r=f,f=p,p=r),e=0;i;)e=(p[--i]=p[i]+f[i]+e)/Nn|0,p[i]%=Nn;for(e&&(p.unshift(e),++n),o=p.length;p[--o]==0;)p.pop();return t.d=p,t.e=Vs(p,n),ot?Ge(t,s,c):t};_e.precision=_e.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Bi+t);return r.d?(e=pp(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};_e.round=function(){var t=this,e=t.constructor;return Ge(new e(t),t.e+1,e.rounding)};_e.sine=_e.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+Ze,n.rounding=1,r=Hw(n,_p(n,r)),n.precision=t,n.rounding=e,Ge(oi>2?r.neg():r,t,e,!0)):new n(NaN)};_e.squareRoot=_e.sqrt=function(){var t,e,r,n,i,a,o=this,s=o.d,c=o.e,p=o.s,f=o.constructor;if(p!==1||!s||!s[0])return new f(!p||p<0&&(!s||s[0])?NaN:s?o:1/0);for(ot=!1,p=Math.sqrt(+o),p==0||p==1/0?(e=Ir(s),(e.length+c)%2==0&&(e+="0"),p=Math.sqrt(e),c=jr((c+1)/2)-(c<0||c%2),p==1/0?e="5e"+c:(e=p.toExponential(),e=e.slice(0,e.indexOf("e")+1)+c),n=new f(e)):n=new f(p.toString()),r=(c=f.precision)+3;;)if(a=n,n=a.plus(qt(o,a,r+2,1)).times(.5),Ir(a.d).slice(0,r)===(e=Ir(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(Ge(a,c+1,0),a.times(a).eq(o))){n=a;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ge(n,c+1,1),t=!n.times(n).eq(o));break}return ot=!0,Ge(n,c,f.rounding,t)};_e.tangent=_e.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=qt(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,Ge(oi==2||oi==4?r.neg():r,t,e,!0)):new n(NaN)};_e.times=_e.mul=function(t){var e,r,n,i,a,o,s,c,p,f=this,h=f.constructor,d=f.d,g=(t=new h(t)).d;if(t.s*=f.s,!d||!d[0]||!g||!g[0])return new h(!t.s||d&&!d[0]&&!g||g&&!g[0]&&!d?NaN:!d||!g?t.s/0:t.s*0);for(r=jr(f.e/Ze)+jr(t.e/Ze),c=d.length,p=g.length,c<p&&(a=d,d=g,g=a,o=c,c=p,p=o),a=[],o=c+p,n=o;n--;)a.push(0);for(n=p;--n>=0;){for(e=0,i=c+n;i>n;)s=a[i]+g[n]*d[i-n-1]+e,a[i--]=s%Nn|0,e=s/Nn|0;a[i]=(a[i]+e)%Nn|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=Vs(a,r),ot?Ge(t,h.precision,h.rounding):t};_e.toBinary=function(t,e){return vf(this,2,t,e)};_e.toDecimalPlaces=_e.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Qr(t,0,Mi),e===void 0?e=n.rounding:Qr(e,0,8),Ge(r,t+r.e+1,e))};_e.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Gn(n,!0):(Qr(t,0,Mi),e===void 0?e=i.rounding:Qr(e,0,8),n=Ge(new i(n),t+1,e),r=Gn(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};_e.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?r=Gn(i):(Qr(t,0,Mi),e===void 0?e=a.rounding:Qr(e,0,8),n=Ge(new a(i),t+i.e+1,e),r=Gn(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};_e.toFraction=function(t){var e,r,n,i,a,o,s,c,p,f,h,d,g=this,b=g.d,m=g.constructor;if(!b)return new m(g);if(p=r=new m(1),n=c=new m(0),e=new m(n),a=e.e=pp(b)-g.e-1,o=a%Ze,e.d[0]=mr(10,o<0?Ze+o:o),t==null)t=a>0?e:p;else{if(s=new m(t),!s.isInt()||s.lt(p))throw Error(Bi+s);t=s.gt(e)?a>0?e:p:s}for(ot=!1,s=new m(Ir(b)),f=m.precision,m.precision=a=b.length*Ze*2;h=qt(s,e,0,1,1),i=r.plus(h.times(n)),i.cmp(t)!=1;)r=n,n=i,i=p,p=c.plus(h.times(i)),c=i,i=e,e=s.minus(h.times(i)),s=i;return i=qt(t.minus(r),n,0,1,1),c=c.plus(i.times(p)),r=r.plus(i.times(n)),c.s=p.s=g.s,d=qt(p,n,a,1).minus(g).abs().cmp(qt(c,r,a,1).minus(g).abs())<1?[p,n]:[c,r],m.precision=f,ot=!0,d};_e.toHexadecimal=_e.toHex=function(t,e){return vf(this,16,t,e)};_e.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:Qr(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(ot=!1,r=qt(r,t,0,e,1).times(t),ot=!0,Ge(r)):(t.s=r.s,r=t),r};_e.toNumber=function(){return+this};_e.toOctal=function(t,e){return vf(this,8,t,e)};_e.toPower=_e.pow=function(t){var e,r,n,i,a,o,s=this,c=s.constructor,p=+(t=new c(t));if(!s.d||!t.d||!s.d[0]||!t.d[0])return new c(mr(+s,p));if(s=new c(s),s.eq(1))return s;if(n=c.precision,a=c.rounding,t.eq(1))return Ge(s,n,a);if(e=jr(t.e/Ze),e>=t.d.length-1&&(r=p<0?-p:p)<=jw)return i=gp(c,s,r,n),t.s<0?new c(1).div(i):Ge(i,n,a);if(o=s.s,o<0){if(e<t.d.length-1)return new c(NaN);if(t.d[e]&1||(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return r=mr(+s,p),e=r==0||!isFinite(r)?jr(p*(Math.log("0."+Ir(s.d))/Math.LN10+s.e+1)):new c(r+"").e,e>c.maxE+1||e<c.minE-1?new c(e>0?o/0:0):(ot=!1,c.rounding=s.s=1,r=Math.min(12,(e+"").length),i=$l(t.times(Ei(s,n+r)),n),i.d&&(i=Ge(i,n+5,1),na(i.d,n,a)&&(e=n+10,i=Ge($l(t.times(Ei(s,e+r)),e),e+5,1),+Ir(i.d).slice(n+1,n+15)+1==1e14&&(i=Ge(i,n+1,0)))),i.s=o,ot=!0,c.rounding=a,Ge(i,n,a))};_e.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Gn(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(Qr(t,1,Mi),e===void 0?e=i.rounding:Qr(e,0,8),n=Ge(new i(n),t,e),r=Gn(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};_e.toSignificantDigits=_e.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Qr(t,1,Mi),e===void 0?e=n.rounding:Qr(e,0,8)),Ge(new n(r),t,e)};_e.toString=function(){var t=this,e=t.constructor,r=Gn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};_e.truncated=_e.trunc=function(){return Ge(new this.constructor(this),this.e+1,1)};_e.valueOf=_e.toJSON=function(){var t=this,e=t.constructor,r=Gn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function Ir(t){var e,r,n,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)n=t[e]+"",r=Ze-n.length,r&&(a+=wi(r)),a+=n;o=t[e],n=o+"",r=Ze-n.length,r&&(a+=wi(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function Qr(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Bi+t)}function na(t,e,r,n){var i,a,o,s;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=Ze,i=0):(i=Math.ceil((e+1)/Ze),e%=Ze),a=mr(10,Ze-e),s=t[i]%a|0,n==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=r<4&&s==99999||r>3&&s==49999||s==5e4||s==0):o=(r<4&&s+1==a||r>3&&s+1==a/2)&&(t[i+1]/a/100|0)==mr(10,e-2)-1||(s==a/2||s==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(n||r<4)&&s==9999||!n&&r>3&&s==4999):o=((n||r<4)&&s+1==a||!n&&r>3&&s+1==a/2)&&(t[i+1]/a/1e3|0)==mr(10,e-3)-1,o}function is(t,e,r){for(var n,i=[0],a,o=0,s=t.length;o<s;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=Hl.indexOf(t.charAt(o++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function zw(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/js(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=_u(t,1,e.times(i),new t(1));for(var a=r;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=r,e}var qt=function(){function t(n,i,a){var o,s=0,c=n.length;for(n=n.slice();c--;)o=n[c]*i+s,n[c]=o%a|0,s=o/a|0;return s&&n.unshift(s),n}function e(n,i,a,o){var s,c;if(a!=o)c=a>o?1:-1;else for(s=c=0;s<a;s++)if(n[s]!=i[s]){c=n[s]>i[s]?1:-1;break}return c}function r(n,i,a,o){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*o+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o,s,c){var p,f,h,d,g,b,m,_,D,C,A,B,E,O,P,x,R,G,re,U,X=n.constructor,H=n.s==i.s?1:-1,V=n.d,W=i.d;if(!V||!V[0]||!W||!W[0])return new X(!n.s||!i.s||(V?W&&V[0]==W[0]:!W)?NaN:V&&V[0]==0||!W?H*0:H/0);for(c?(g=1,f=n.e-i.e):(c=Nn,g=Ze,f=jr(n.e/g)-jr(i.e/g)),re=W.length,R=V.length,D=new X(H),C=D.d=[],h=0;W[h]==(V[h]||0);h++);if(W[h]>(V[h]||0)&&f--,a==null?(O=a=X.precision,o=X.rounding):s?O=a+(n.e-i.e)+1:O=a,O<0)C.push(1),b=!0;else{if(O=O/g+2|0,h=0,re==1){for(d=0,W=W[0],O++;(h<R||d)&&O--;h++)P=d*c+(V[h]||0),C[h]=P/W|0,d=P%W|0;b=d||h<R}else{for(d=c/(W[0]+1)|0,d>1&&(W=t(W,d,c),V=t(V,d,c),re=W.length,R=V.length),x=re,A=V.slice(0,re),B=A.length;B<re;)A[B++]=0;U=W.slice(),U.unshift(0),G=W[0],W[1]>=c/2&&++G;do d=0,p=e(W,A,re,B),p<0?(E=A[0],re!=B&&(E=E*c+(A[1]||0)),d=E/G|0,d>1?(d>=c&&(d=c-1),m=t(W,d,c),_=m.length,B=A.length,p=e(m,A,_,B),p==1&&(d--,r(m,re<_?U:W,_,c))):(d==0&&(p=d=1),m=W.slice()),_=m.length,_<B&&m.unshift(0),r(A,m,B,c),p==-1&&(B=A.length,p=e(W,A,re,B),p<1&&(d++,r(A,re<B?U:W,B,c))),B=A.length):p===0&&(d++,A=[0]),C[h++]=d,p&&A[0]?A[B++]=V[x]||0:(A=[V[x]],B=1);while((x++<R||A[0]!==void 0)&&O--);b=A[0]!==void 0}C[0]||C.shift()}if(g==1)D.e=f,lp=b;else{for(h=1,d=C[0];d>=10;d/=10)h++;D.e=h+f*g-1,Ge(D,s?a+D.e+1:a,o,b)}return D}}();function Ge(t,e,r,n){var i,a,o,s,c,p,f,h,d,g=t.constructor;e:if(e!=null){if(h=t.d,!h)return t;for(i=1,s=h[0];s>=10;s/=10)i++;if(a=e-i,a<0)a+=Ze,o=e,f=h[d=0],c=f/mr(10,i-o-1)%10|0;else if(d=Math.ceil((a+1)/Ze),s=h.length,d>=s)if(n){for(;s++<=d;)h.push(0);f=c=0,i=1,a%=Ze,o=a-Ze+1}else break e;else{for(f=s=h[d],i=1;s>=10;s/=10)i++;a%=Ze,o=a-Ze+i,c=o<0?0:f/mr(10,i-o-1)%10|0}if(n=n||e<0||h[d+1]!==void 0||(o<0?f:f%mr(10,i-o-1)),p=r<4?(c||n)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||n||r==6&&(a>0?o>0?f/mr(10,i-o):0:h[d-1])%10&1||r==(t.s<0?8:7)),e<1||!h[0])return h.length=0,p?(e-=t.e+1,h[0]=mr(10,(Ze-e%Ze)%Ze),t.e=-e||0):h[0]=t.e=0,t;if(a==0?(h.length=d,s=1,d--):(h.length=d+1,s=mr(10,Ze-a),h[d]=o>0?(f/mr(10,i-o)%mr(10,o)|0)*s:0),p)for(;;)if(d==0){for(a=1,o=h[0];o>=10;o/=10)a++;for(o=h[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(t.e++,h[0]==Nn&&(h[0]=1));break}else{if(h[d]+=s,h[d]!=Nn)break;h[d--]=0,s=1}for(a=h.length;h[--a]===0;)h.pop()}return ot&&(t.e>g.maxE?(t.d=null,t.e=NaN):t.e<g.minE&&(t.e=0,t.d=[0])),t}function Gn(t,e,r){if(!t.isFinite())return mp(t);var n,i=t.e,a=Ir(t.d),o=a.length;return e?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+wi(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+wi(-i-1)+a,r&&(n=r-o)>0&&(a+=wi(n))):i>=o?(a+=wi(i+1-o),r&&(n=r-i-1)>0&&(a=a+"."+wi(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(a+="."),a+=wi(n))),a}function Vs(t,e){var r=t[0];for(e*=Ze;r>=10;r/=10)e++;return e}function gs(t,e,r){if(e>qw)throw ot=!0,r&&(t.precision=r),Error(fp);return Ge(new t(ds),e,1,!0)}function In(t,e,r){if(e>Kl)throw Error(fp);return Ge(new t(ps),e,r,!0)}function pp(t){var e=t.length-1,r=e*Ze+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function wi(t){for(var e="";t--;)e+="0";return e}function gp(t,e,r,n){var i,a=new t(1),o=Math.ceil(n/Ze+4);for(ot=!1;;){if(r%2&&(a=a.times(e),i0(a.d,o)&&(i=!0)),r=jr(r/2),r===0){r=a.d.length-1,i&&a.d[r]===0&&++a.d[r];break}e=e.times(e),i0(e.d,o)}return ot=!0,a}function n0(t){return t.d[t.d.length-1]&1}function vp(t,e,r){for(var n,i=new t(e[0]),a=0;++a<e.length;)if(n=new t(e[a]),n.s)i[r](n)&&(i=n);else{i=n;break}return i}function $l(t,e){var r,n,i,a,o,s,c,p=0,f=0,h=0,d=t.constructor,g=d.rounding,b=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(ot=!1,c=b):c=e,s=new d(.03125);t.e>-2;)t=t.times(s),h+=5;for(n=Math.log(mr(2,h))/Math.LN10*2+5|0,c+=n,r=a=o=new d(1),d.precision=c;;){if(a=Ge(a.times(t),c,1),r=r.times(++f),s=o.plus(qt(a,r,c,1)),Ir(s.d).slice(0,c)===Ir(o.d).slice(0,c)){for(i=h;i--;)o=Ge(o.times(o),c,1);if(e==null)if(p<3&&na(o.d,c-n,g,p))d.precision=c+=10,r=a=s=new d(1),f=0,p++;else return Ge(o,d.precision=b,g,ot=!0);else return d.precision=b,o}o=s}}function Ei(t,e){var r,n,i,a,o,s,c,p,f,h,d,g=1,b=10,m=t,_=m.d,D=m.constructor,C=D.rounding,A=D.precision;if(m.s<0||!_||!_[0]||!m.e&&_[0]==1&&_.length==1)return new D(_&&!_[0]?-1/0:m.s!=1?NaN:_?0:m);if(e==null?(ot=!1,f=A):f=e,D.precision=f+=b,r=Ir(_),n=r.charAt(0),Math.abs(a=m.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(t),r=Ir(m.d),n=r.charAt(0),g++;a=m.e,n>1?(m=new D("0."+r),a++):m=new D(n+"."+r.slice(1))}else return p=gs(D,f+2,A).times(a+""),m=Ei(new D(n+"."+r.slice(1)),f-b).plus(p),D.precision=A,e==null?Ge(m,A,C,ot=!0):m;for(h=m,c=o=m=qt(m.minus(1),m.plus(1),f,1),d=Ge(m.times(m),f,1),i=3;;){if(o=Ge(o.times(d),f,1),p=c.plus(qt(o,new D(i),f,1)),Ir(p.d).slice(0,f)===Ir(c.d).slice(0,f))if(c=c.times(2),a!==0&&(c=c.plus(gs(D,f+2,A).times(a+""))),c=qt(c,new D(g),f,1),e==null)if(na(c.d,f-b,C,s))D.precision=f+=b,p=o=m=qt(h.minus(1),h.plus(1),f,1),d=Ge(m.times(m),f,1),i=s=1;else return Ge(c,D.precision=A,C,ot=!0);else return D.precision=A,c;c=p,i+=2}}function mp(t){return String(t.s*t.s/0)}function Yl(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%Ze,r<0&&(n+=Ze),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=Ze;n<i;)t.d.push(+e.slice(n,n+=Ze));e=e.slice(n),n=Ze-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),ot&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Ww(t,e){var r,n,i,a,o,s,c,p,f;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),dp.test(e))return Yl(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(Uw.test(e))r=16,e=e.toLowerCase();else if(Lw.test(e))r=2;else if(Vw.test(e))r=8;else throw Error(Bi+e);for(a=e.search(/p/i),a>0?(c=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,n=t.constructor,o&&(e=e.replace(".",""),s=e.length,a=s-a,i=gp(n,new n(r),a,a*2)),p=is(e,r,Nn),f=p.length-1,a=f;p[a]===0;--a)p.pop();return a<0?new n(t.s*0):(t.e=Vs(p,f),t.d=p,ot=!1,o&&(t=qt(t,i,s*4)),c&&(t=t.times(Math.abs(c)<54?mr(2,c):Du.pow(2,c))),ot=!0,t)}function Hw(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:_u(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/js(5,r)),e=_u(t,2,e,e);for(var i,a=new t(5),o=new t(16),s=new t(20);r--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(s))));return e}function _u(t,e,r,n,i){var a,o,s,c,p=t.precision,f=Math.ceil(p/Ze);for(ot=!1,c=r.times(r),s=new t(n);;){if(o=qt(s.times(c),new t(e++*e++),p,1),s=i?n.plus(o):n.minus(o),n=qt(o.times(c),new t(e++*e++),p,1),o=s.plus(n),o.d[f]!==void 0){for(a=f;o.d[a]===s.d[a]&&a--;);if(a==-1)break}a=s,s=n,n=o,o=a}return ot=!0,o.d.length=f+1,o}function js(t,e){for(var r=t;--e;)r*=t;return r}function _p(t,e){var r,n=e.s<0,i=In(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return oi=n?4:1,e;if(r=e.divToInt(i),r.isZero())oi=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(a))return oi=n0(r)?n?2:3:n?4:1,e;oi=n0(r)?n?1:4:n?3:2}return e.minus(i).abs()}function vf(t,e,r,n){var i,a,o,s,c,p,f,h,d,g=t.constructor,b=r!==void 0;if(b?(Qr(r,1,Mi),n===void 0?n=g.rounding:Qr(n,0,8)):(r=g.precision,n=g.rounding),!t.isFinite())f=mp(t);else{for(f=Gn(t),o=f.indexOf("."),b?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,o>=0&&(f=f.replace(".",""),d=new g(1),d.e=f.length-o,d.d=is(Gn(d),10,i),d.e=d.d.length),h=is(f,10,i),a=c=h.length;h[--c]==0;)h.pop();if(!h[0])f=b?"0p+0":"0";else{if(o<0?a--:(t=new g(t),t.d=h,t.e=a,t=qt(t,d,r,n,0,i),h=t.d,a=t.e,p=lp),o=h[r],s=i/2,p=p||h[r+1]!==void 0,p=n<4?(o!==void 0||p)&&(n===0||n===(t.s<0?3:2)):o>s||o===s&&(n===4||p||n===6&&h[r-1]&1||n===(t.s<0?8:7)),h.length=r,p)for(;++h[--r]>i-1;)h[r]=0,r||(++a,h.unshift(1));for(c=h.length;!h[c-1];--c);for(o=0,f="";o<c;o++)f+=Hl.charAt(h[o]);if(b){if(c>1)if(e==16||e==8){for(o=e==16?4:3,--c;c%o;c++)f+="0";for(h=is(f,i,e),c=h.length;!h[c-1];--c);for(o=1,f="1.";o<c;o++)f+=Hl.charAt(h[o])}else f=f.charAt(0)+"."+f.slice(1);f=f+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)f="0"+f;f="0."+f}else if(++a>c)for(a-=c;a--;)f+="0";else a<c&&(f=f.slice(0,a)+"."+f.slice(a))}f=(e==16?"0x":e==2?"0b":e==8?"0o":"")+f}return t.s<0?"-"+f:f}function i0(t,e){if(t.length>e)return t.length=e,!0}function Gw(t){return new this(t).abs()}function Kw(t){return new this(t).acos()}function $w(t){return new this(t).acosh()}function Yw(t,e){return new this(t).plus(e)}function Zw(t){return new this(t).asin()}function Xw(t){return new this(t).asinh()}function Jw(t){return new this(t).atan()}function Qw(t){return new this(t).atanh()}function eA(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,a=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=In(this,a,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?In(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=In(this,a,1).times(.5),r.s=t.s):e.s<0?(this.precision=a,this.rounding=1,r=this.atan(qt(t,e,a,1)),e=In(this,a,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(qt(t,e,a,1)),r}function tA(t){return new this(t).cbrt()}function rA(t){return Ge(t=new this(t),t.e+1,2)}function nA(t,e,r){return new this(t).clamp(e,r)}function iA(t){if(!t||typeof t!="object")throw Error(Us+"Object expected");var e,r,n,i=t.defaults===!0,a=["precision",1,Mi,"rounding",0,8,"toExpNeg",-pu,0,"toExpPos",0,pu,"maxE",0,pu,"minE",-pu,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(r=a[e],i&&(this[r]=Gl[r]),(n=t[r])!==void 0)if(jr(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Bi+r+": "+n);if(r="crypto",i&&(this[r]=Gl[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(cp);else this[r]=!1;else throw Error(Bi+r+": "+n);return this}function uA(t){return new this(t).cos()}function aA(t){return new this(t).cosh()}function Dp(t){var e,r,n;function i(a){var o,s,c,p=this;if(!(p instanceof i))return new i(a);if(p.constructor=i,u0(a)){p.s=a.s,ot?!a.d||a.e>i.maxE?(p.e=NaN,p.d=null):a.e<i.minE?(p.e=0,p.d=[0]):(p.e=a.e,p.d=a.d.slice()):(p.e=a.e,p.d=a.d?a.d.slice():a.d);return}if(c=typeof a,c==="number"){if(a===0){p.s=1/a<0?-1:1,p.e=0,p.d=[0];return}if(a<0?(a=-a,p.s=-1):p.s=1,a===~~a&&a<1e7){for(o=0,s=a;s>=10;s/=10)o++;ot?o>i.maxE?(p.e=NaN,p.d=null):o<i.minE?(p.e=0,p.d=[0]):(p.e=o,p.d=[a]):(p.e=o,p.d=[a]);return}else if(a*0!==0){a||(p.s=NaN),p.e=NaN,p.d=null;return}return Yl(p,a.toString())}else if(c!=="string")throw Error(Bi+a);return(s=a.charCodeAt(0))===45?(a=a.slice(1),p.s=-1):(s===43&&(a=a.slice(1)),p.s=1),dp.test(a)?Yl(p,a):Ww(p,a)}if(i.prototype=_e,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=iA,i.clone=Dp,i.isDecimal=u0,i.abs=Gw,i.acos=Kw,i.acosh=$w,i.add=Yw,i.asin=Zw,i.asinh=Xw,i.atan=Jw,i.atanh=Qw,i.atan2=eA,i.cbrt=tA,i.ceil=rA,i.clamp=nA,i.cos=uA,i.cosh=aA,i.div=sA,i.exp=oA,i.floor=lA,i.hypot=fA,i.ln=cA,i.log=hA,i.log10=pA,i.log2=dA,i.max=gA,i.min=vA,i.mod=mA,i.mul=_A,i.pow=DA,i.random=bA,i.round=yA,i.sign=wA,i.sin=AA,i.sinh=EA,i.sqrt=CA,i.sub=FA,i.sum=SA,i.tan=BA,i.tanh=OA,i.trunc=MA,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function sA(t,e){return new this(t).div(e)}function oA(t){return new this(t).exp()}function lA(t){return Ge(t=new this(t),t.e+1,3)}function fA(){var t,e,r=new this(0);for(ot=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return ot=!0,new this(1/0);r=e}return ot=!0,r.sqrt()}function u0(t){return t instanceof Du||t&&t.toStringTag===hp||!1}function cA(t){return new this(t).ln()}function hA(t,e){return new this(t).log(e)}function dA(t){return new this(t).log(2)}function pA(t){return new this(t).log(10)}function gA(){return vp(this,arguments,"lt")}function vA(){return vp(this,arguments,"gt")}function mA(t,e){return new this(t).mod(e)}function _A(t,e){return new this(t).mul(e)}function DA(t,e){return new this(t).pow(e)}function bA(t){var e,r,n,i,a=0,o=new this(1),s=[];if(t===void 0?t=this.precision:Qr(t,1,Mi),n=Math.ceil(t/Ze),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(s.push(i%1e7),a+=4);a=n/4}else throw Error(cp);else for(;a<n;)s[a++]=Math.random()*1e7|0;for(n=s[--a],t%=Ze,n&&t&&(i=mr(10,Ze-t),s[a]=(n/i|0)*i);s[a]===0;a--)s.pop();if(a<0)r=0,s=[0];else{for(r=-1;s[0]===0;r-=Ze)s.shift();for(n=1,i=s[0];i>=10;i/=10)n++;n<Ze&&(r-=Ze-n)}return o.e=r,o.d=s,o}function yA(t){return Ge(t=new this(t),t.e+1,this.rounding)}function wA(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function AA(t){return new this(t).sin()}function EA(t){return new this(t).sinh()}function CA(t){return new this(t).sqrt()}function FA(t,e){return new this(t).sub(e)}function SA(){var t=0,e=arguments,r=new this(e[t]);for(ot=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return ot=!0,Ge(r,this.precision,this.rounding)}function BA(t){return new this(t).tan()}function OA(t){return new this(t).tanh()}function MA(t){return Ge(t=new this(t),t.e+1,1)}_e[Symbol.for("nodejs.util.inspect.custom")]=_e.toString;_e[Symbol.toStringTag]="Decimal";var Du=_e.constructor=Dp(Gl);ds=new Du(ds);ps=new Du(ps);var PA="BigNumber",TA=["?on","config"],xA=Ut(PA,TA,t=>{var{on:e,config:r}=t,n=Du.clone({precision:r.precision,modulo:Du.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&n.config({precision:i.precision})}),n},{isClass:!0}),dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zl={},IA={get exports(){return Zl},set exports(t){Zl=t}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=Math.cosh||function(h){return Math.abs(h)<1e-9?1-h:(Math.exp(h)+Math.exp(-h))*.5},i=Math.sinh||function(h){return Math.abs(h)<1e-9?h:(Math.exp(h)-Math.exp(-h))*.5},a=function(h){var d=Math.PI/4;if(-d>h||h>d)return Math.cos(h)-1;var g=h*h;return g*(g*(g*(g*(g*(g*(g*(g/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(h,d){var g=Math.abs(h),b=Math.abs(d);return g<3e3&&b<3e3?Math.sqrt(g*g+b*b):(g<b?(g=b,b=h/d):b=d/h,g*Math.sqrt(1+b*b))},s=function(){throw SyntaxError("Invalid Param")};function c(h,d){var g=Math.abs(h),b=Math.abs(d);return h===0?Math.log(b):d===0?Math.log(g):g<3e3&&b<3e3?Math.log(h*h+d*d)*.5:(h=h/2,d=d/2,.5*Math.log(h*h+d*d)+Math.LN2)}var p=function(h,d){var g={re:0,im:0};if(h==null)g.re=g.im=0;else if(d!==void 0)g.re=h,g.im=d;else switch(typeof h){case"object":if("im"in h&&"re"in h)g.re=h.re,g.im=h.im;else if("abs"in h&&"arg"in h){if(!Number.isFinite(h.abs)&&Number.isFinite(h.arg))return f.INFINITY;g.re=h.abs*Math.cos(h.arg),g.im=h.abs*Math.sin(h.arg)}else if("r"in h&&"phi"in h){if(!Number.isFinite(h.r)&&Number.isFinite(h.phi))return f.INFINITY;g.re=h.r*Math.cos(h.phi),g.im=h.r*Math.sin(h.phi)}else h.length===2?(g.re=h[0],g.im=h[1]):s();break;case"string":g.im=g.re=0;var b=h.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),m=1,_=0;b===null&&s();for(var D=0;D<b.length;D++){var C=b[D];C===" "||C==="	"||C===`
`||(C==="+"?m++:C==="-"?_++:C==="i"||C==="I"?(m+_===0&&s(),b[D+1]!==" "&&!isNaN(b[D+1])?(g.im+=parseFloat((_%2?"-":"")+b[D+1]),D++):g.im+=parseFloat((_%2?"-":"")+"1"),m=_=0):((m+_===0||isNaN(C))&&s(),b[D+1]==="i"||b[D+1]==="I"?(g.im+=parseFloat((_%2?"-":"")+C),D++):g.re+=parseFloat((_%2?"-":"")+C),m=_=0))}m+_>0&&s();break;case"number":g.im=0,g.re=h;break;default:s()}return isNaN(g.re)||isNaN(g.im),g};function f(h,d){if(!(this instanceof f))return new f(h,d);var g=p(h,d);this.re=g.re,this.im=g.im}f.prototype={re:0,im:0,sign:function(){var h=this.abs();return new f(this.re/h,this.im/h)},add:function(h,d){var g=new f(h,d);return this.isInfinite()&&g.isInfinite()?f.NAN:this.isInfinite()||g.isInfinite()?f.INFINITY:new f(this.re+g.re,this.im+g.im)},sub:function(h,d){var g=new f(h,d);return this.isInfinite()&&g.isInfinite()?f.NAN:this.isInfinite()||g.isInfinite()?f.INFINITY:new f(this.re-g.re,this.im-g.im)},mul:function(h,d){var g=new f(h,d);return this.isInfinite()&&g.isZero()||this.isZero()&&g.isInfinite()?f.NAN:this.isInfinite()||g.isInfinite()?f.INFINITY:g.im===0&&this.im===0?new f(this.re*g.re,0):new f(this.re*g.re-this.im*g.im,this.re*g.im+this.im*g.re)},div:function(h,d){var g=new f(h,d);if(this.isZero()&&g.isZero()||this.isInfinite()&&g.isInfinite())return f.NAN;if(this.isInfinite()||g.isZero())return f.INFINITY;if(this.isZero()||g.isInfinite())return f.ZERO;h=this.re,d=this.im;var b=g.re,m=g.im,_,D;return m===0?new f(h/b,d/b):Math.abs(b)<Math.abs(m)?(D=b/m,_=b*D+m,new f((h*D+d)/_,(d*D-h)/_)):(D=m/b,_=m*D+b,new f((h+d*D)/_,(d-h*D)/_))},pow:function(h,d){var g=new f(h,d);if(h=this.re,d=this.im,g.isZero())return f.ONE;if(g.im===0){if(d===0&&h>0)return new f(Math.pow(h,g.re),0);if(h===0)switch((g.re%4+4)%4){case 0:return new f(Math.pow(d,g.re),0);case 1:return new f(0,Math.pow(d,g.re));case 2:return new f(-Math.pow(d,g.re),0);case 3:return new f(0,-Math.pow(d,g.re))}}if(h===0&&d===0&&g.re>0&&g.im>=0)return f.ZERO;var b=Math.atan2(d,h),m=c(h,d);return h=Math.exp(g.re*m-g.im*b),d=g.im*m+g.re*b,new f(h*Math.cos(d),h*Math.sin(d))},sqrt:function(){var h=this.re,d=this.im,g=this.abs(),b,m;if(h>=0){if(d===0)return new f(Math.sqrt(h),0);b=.5*Math.sqrt(2*(g+h))}else b=Math.abs(d)/Math.sqrt(2*(g-h));return h<=0?m=.5*Math.sqrt(2*(g-h)):m=Math.abs(d)/Math.sqrt(2*(g+h)),new f(b,d<0?-m:m)},exp:function(){var h=Math.exp(this.re);return this.im,new f(h*Math.cos(this.im),h*Math.sin(this.im))},expm1:function(){var h=this.re,d=this.im;return new f(Math.expm1(h)*Math.cos(d)+a(d),Math.exp(h)*Math.sin(d))},log:function(){var h=this.re,d=this.im;return new f(c(h,d),Math.atan2(d,h))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var h=this.re,d=this.im;return new f(Math.sin(h)*n(d),Math.cos(h)*i(d))},cos:function(){var h=this.re,d=this.im;return new f(Math.cos(h)*n(d),-Math.sin(h)*i(d))},tan:function(){var h=2*this.re,d=2*this.im,g=Math.cos(h)+n(d);return new f(Math.sin(h)/g,i(d)/g)},cot:function(){var h=2*this.re,d=2*this.im,g=Math.cos(h)-n(d);return new f(-Math.sin(h)/g,i(d)/g)},sec:function(){var h=this.re,d=this.im,g=.5*n(2*d)+.5*Math.cos(2*h);return new f(Math.cos(h)*n(d)/g,Math.sin(h)*i(d)/g)},csc:function(){var h=this.re,d=this.im,g=.5*n(2*d)-.5*Math.cos(2*h);return new f(Math.sin(h)*n(d)/g,-Math.cos(h)*i(d)/g)},asin:function(){var h=this.re,d=this.im,g=new f(d*d-h*h+1,-2*h*d).sqrt(),b=new f(g.re-d,g.im+h).log();return new f(b.im,-b.re)},acos:function(){var h=this.re,d=this.im,g=new f(d*d-h*h+1,-2*h*d).sqrt(),b=new f(g.re-d,g.im+h).log();return new f(Math.PI/2-b.im,b.re)},atan:function(){var h=this.re,d=this.im;if(h===0){if(d===1)return new f(0,1/0);if(d===-1)return new f(0,-1/0)}var g=h*h+(1-d)*(1-d),b=new f((1-d*d-h*h)/g,-2*h/g).log();return new f(-.5*b.im,.5*b.re)},acot:function(){var h=this.re,d=this.im;if(d===0)return new f(Math.atan2(1,h),0);var g=h*h+d*d;return g!==0?new f(h/g,-d/g).atan():new f(h!==0?h/0:0,d!==0?-d/0:0).atan()},asec:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new f(0,1/0);var g=h*h+d*d;return g!==0?new f(h/g,-d/g).acos():new f(h!==0?h/0:0,d!==0?-d/0:0).acos()},acsc:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new f(Math.PI/2,1/0);var g=h*h+d*d;return g!==0?new f(h/g,-d/g).asin():new f(h!==0?h/0:0,d!==0?-d/0:0).asin()},sinh:function(){var h=this.re,d=this.im;return new f(i(h)*Math.cos(d),n(h)*Math.sin(d))},cosh:function(){var h=this.re,d=this.im;return new f(n(h)*Math.cos(d),i(h)*Math.sin(d))},tanh:function(){var h=2*this.re,d=2*this.im,g=n(h)+Math.cos(d);return new f(i(h)/g,Math.sin(d)/g)},coth:function(){var h=2*this.re,d=2*this.im,g=n(h)-Math.cos(d);return new f(i(h)/g,-Math.sin(d)/g)},csch:function(){var h=this.re,d=this.im,g=Math.cos(2*d)-n(2*h);return new f(-2*i(h)*Math.cos(d)/g,2*n(h)*Math.sin(d)/g)},sech:function(){var h=this.re,d=this.im,g=Math.cos(2*d)+n(2*h);return new f(2*n(h)*Math.cos(d)/g,-2*i(h)*Math.sin(d)/g)},asinh:function(){var h=this.im;this.im=-this.re,this.re=h;var d=this.asin();return this.re=-this.im,this.im=h,h=d.re,d.re=-d.im,d.im=h,d},acosh:function(){var h=this.acos();if(h.im<=0){var d=h.re;h.re=-h.im,h.im=d}else{var d=h.im;h.im=-h.re,h.re=d}return h},atanh:function(){var h=this.re,d=this.im,g=h>1&&d===0,b=1-h,m=1+h,_=b*b+d*d,D=_!==0?new f((m*b-d*d)/_,(d*b+m*d)/_):new f(h!==-1?h/0:0,d!==0?d/0:0),C=D.re;return D.re=c(D.re,D.im)/2,D.im=Math.atan2(D.im,C)/2,g&&(D.im=-D.im),D},acoth:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new f(0,Math.PI/2);var g=h*h+d*d;return g!==0?new f(h/g,-d/g).atanh():new f(h!==0?h/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var h=this.re,d=this.im;if(d===0)return new f(h!==0?Math.log(h+Math.sqrt(h*h+1)):1/0,0);var g=h*h+d*d;return g!==0?new f(h/g,-d/g).asinh():new f(h!==0?h/0:0,d!==0?-d/0:0).asinh()},asech:function(){var h=this.re,d=this.im;if(this.isZero())return f.INFINITY;var g=h*h+d*d;return g!==0?new f(h/g,-d/g).acosh():new f(h!==0?h/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return f.INFINITY;if(this.isInfinite())return f.ZERO;var h=this.re,d=this.im,g=h*h+d*d;return new f(h/g,-d/g)},conjugate:function(){return new f(this.re,-this.im)},neg:function(){return new f(-this.re,-this.im)},ceil:function(h){return h=Math.pow(10,h||0),new f(Math.ceil(this.re*h)/h,Math.ceil(this.im*h)/h)},floor:function(h){return h=Math.pow(10,h||0),new f(Math.floor(this.re*h)/h,Math.floor(this.im*h)/h)},round:function(h){return h=Math.pow(10,h||0),new f(Math.round(this.re*h)/h,Math.round(this.im*h)/h)},equals:function(h,d){var g=new f(h,d);return Math.abs(g.re-this.re)<=f.EPSILON&&Math.abs(g.im-this.im)<=f.EPSILON},clone:function(){return new f(this.re,this.im)},toString:function(){var h=this.re,d=this.im,g="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(h)<f.EPSILON&&(h=0),Math.abs(d)<f.EPSILON&&(d=0),d===0?g+h:(h!==0?(g+=h,g+=" ",d<0?(d=-d,g+="-"):g+="+",g+=" "):d<0&&(d=-d,g+="-"),d!==1&&(g+=d),g+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},f.ZERO=new f(0,0),f.ONE=new f(1,0),f.I=new f(0,1),f.PI=new f(Math.PI,0),f.E=new f(Math.E,0),f.INFINITY=new f(1/0,1/0),f.NAN=new f(NaN,NaN),f.EPSILON=1e-15,Object.defineProperty(f,"__esModule",{value:!0}),f.default=f,f.Complex=f,t.exports=f})()})(IA);const Or=mf(Zl);var kA="Complex",NA=[],RA=Ut(kA,NA,()=>(Object.defineProperty(Or,"name",{value:"Complex"}),Or.prototype.constructor=Or,Or.prototype.type="Complex",Or.prototype.isComplex=!0,Or.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Or.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Or.prototype.format=function(t){var e="",r=this.im,n=this.re,i=zl(this.re,t),a=zl(this.im,t),o=tr(t)?t:t?t.precision:null;if(o!==null){var s=Math.pow(10,-o);Math.abs(n/r)<s&&(n=0),Math.abs(r/n)<s&&(r=0)}return r===0?e=i:n===0?r===1?e="i":r===-1?e="-i":e=a+"i":r<0?r===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+a+"i",e},Or.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Or(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(tr(r)){if(Jd(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),tr(n))return new Or({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Or.prototype.valueOf=Or.prototype.toString,Or.fromJSON=function(t){return new Or(t)},Or.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Or),{isClass:!0}),Xl={},LA={get exports(){return Xl},set exports(t){Xl=t}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=2e3,i={s:1,n:0,d:1};function a(b,m){if(isNaN(b=parseInt(b,10)))throw g.InvalidParameter;return b*m}function o(b,m){if(m===0)throw g.DivisionByZero;var _=Object.create(g.prototype);_.s=b<0?-1:1,b=b<0?-b:b;var D=d(b,m);return _.n=b/D,_.d=m/D,_}function s(b){for(var m={},_=b,D=2,C=4;C<=_;){for(;_%D===0;)_/=D,m[D]=(m[D]||0)+1;C+=1+2*D++}return _!==b?_>1&&(m[_]=(m[_]||0)+1):m[b]=(m[b]||0)+1,m}var c=function(b,m){var _=0,D=1,C=1,A=0,B=0,E=0,O=1,P=1,x=0,R=1,G=1,re=1,U=1e7,X;if(b!=null)if(m!==void 0){if(_=b,D=m,C=_*D,_%1!==0||D%1!==0)throw g.NonIntegerParameter}else switch(typeof b){case"object":{if("d"in b&&"n"in b)_=b.n,D=b.d,"s"in b&&(_*=b.s);else if(0 in b)_=b[0],1 in b&&(D=b[1]);else throw g.InvalidParameter;C=_*D;break}case"number":{if(b<0&&(C=b,b=-b),b%1===0)_=b;else if(b>0){for(b>=1&&(P=Math.pow(10,Math.floor(1+Math.log(b)/Math.LN10)),b/=P);R<=U&&re<=U;)if(X=(x+G)/(R+re),b===X){R+re<=U?(_=x+G,D=R+re):re>R?(_=G,D=re):(_=x,D=R);break}else b>X?(x+=G,R+=re):(G+=x,re+=R),R>U?(_=G,D=re):(_=x,D=R);_*=P}else(isNaN(b)||isNaN(m))&&(D=_=NaN);break}case"string":{if(R=b.match(/\d+|./g),R===null)throw g.InvalidParameter;if(R[x]==="-"?(C=-1,x++):R[x]==="+"&&x++,R.length===x+1?B=a(R[x++],C):R[x+1]==="."||R[x]==="."?(R[x]!=="."&&(A=a(R[x++],C)),x++,(x+1===R.length||R[x+1]==="("&&R[x+3]===")"||R[x+1]==="'"&&R[x+3]==="'")&&(B=a(R[x],C),O=Math.pow(10,R[x].length),x++),(R[x]==="("&&R[x+2]===")"||R[x]==="'"&&R[x+2]==="'")&&(E=a(R[x+1],C),P=Math.pow(10,R[x+1].length)-1,x+=3)):R[x+1]==="/"||R[x+1]===":"?(B=a(R[x],C),O=a(R[x+2],1),x+=3):R[x+3]==="/"&&R[x+1]===" "&&(A=a(R[x],C),B=a(R[x+2],C),O=a(R[x+4],1),x+=5),R.length<=x){D=O*P,C=_=E+D*A+P*B;break}}default:throw g.InvalidParameter}if(D===0)throw g.DivisionByZero;i.s=C<0?-1:1,i.n=Math.abs(_),i.d=Math.abs(D)};function p(b,m,_){for(var D=1;m>0;b=b*b%_,m>>=1)m&1&&(D=D*b%_);return D}function f(b,m){for(;m%2===0;m/=2);for(;m%5===0;m/=5);if(m===1)return 0;for(var _=10%m,D=1;_!==1;D++)if(_=_*10%m,D>n)return 0;return D}function h(b,m,_){for(var D=1,C=p(10,_,m),A=0;A<300;A++){if(D===C)return A;D=D*10%m,C=C*10%m}return 0}function d(b,m){if(!b)return m;if(!m)return b;for(;;){if(b%=m,!b)return m;if(m%=b,!m)return b}}function g(b,m){if(c(b,m),this instanceof g)b=d(i.d,i.n),this.s=i.s,this.n=i.n/b,this.d=i.d/b;else return o(i.s*i.n,i.d)}g.DivisionByZero=new Error("Division by Zero"),g.InvalidParameter=new Error("Invalid argument"),g.NonIntegerParameter=new Error("Parameters must be integer"),g.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(b,m){return c(b,m),o(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(b,m){return c(b,m),o(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(b,m){return c(b,m),o(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(b,m){return c(b,m),o(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(b,m){if(isNaN(this.n)||isNaN(this.d))return new g(NaN);if(b===void 0)return o(this.s*this.n%this.d,1);if(c(b,m),i.n===0&&this.d===0)throw g.DivisionByZero;return o(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(b,m){return c(b,m),o(d(i.n,this.n)*d(i.d,this.d),i.d*this.d)},lcm:function(b,m){return c(b,m),i.n===0&&this.n===0?o(0,1):o(i.n*this.n,d(i.n,this.n)*d(i.d,this.d))},ceil:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.ceil(b*this.s*this.n/this.d),b)},floor:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.floor(b*this.s*this.n/this.d),b)},round:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.round(b*this.s*this.n/this.d),b)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(b,m){if(c(b,m),i.d===1)return i.s<0?o(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):o(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var _=s(this.n),D=s(this.d),C=1,A=1;for(var B in _)if(B!=="1"){if(B==="0"){C=0;break}if(_[B]*=i.n,_[B]%i.d===0)_[B]/=i.d;else return null;C*=Math.pow(B,_[B])}for(var B in D)if(B!=="1"){if(D[B]*=i.n,D[B]%i.d===0)D[B]/=i.d;else return null;A*=Math.pow(B,D[B])}return i.s<0?o(A,C):o(C,A)},equals:function(b,m){return c(b,m),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(b,m){c(b,m);var _=this.s*this.n*i.d-i.s*i.n*this.d;return(0<_)-(_<0)},simplify:function(b){if(isNaN(this.n)||isNaN(this.d))return this;b=b||.001;for(var m=this.abs(),_=m.toContinued(),D=1;D<_.length;D++){for(var C=o(_[D-1],1),A=D-2;A>=0;A--)C=C.inverse().add(_[A]);if(C.sub(m).abs().valueOf()<b)return C.mul(this.s)}return this},divisible:function(b,m){return c(b,m),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(b){var m,_="",D=this.n,C=this.d;return this.s<0&&(_+="-"),C===1?_+=D:(b&&(m=Math.floor(D/C))>0&&(_+=m,_+=" ",D%=C),_+=D,_+="/",_+=C),_},toLatex:function(b){var m,_="",D=this.n,C=this.d;return this.s<0&&(_+="-"),C===1?_+=D:(b&&(m=Math.floor(D/C))>0&&(_+=m,D%=C),_+="\\frac{",_+=D,_+="}{",_+=C,_+="}"),_},toContinued:function(){var b,m=this.n,_=this.d,D=[];if(isNaN(m)||isNaN(_))return D;do D.push(Math.floor(m/_)),b=m%_,m=_,_=b;while(m!==1);return D},toString:function(b){var m=this.n,_=this.d;if(isNaN(m)||isNaN(_))return"NaN";b=b||15;var D=f(m,_),C=h(m,_,D),A=this.s<0?"-":"";if(A+=m/_|0,m%=_,m*=10,m&&(A+="."),D){for(var B=C;B--;)A+=m/_|0,m%=_,m*=10;A+="(";for(var B=D;B--;)A+=m/_|0,m%=_,m*=10;A+=")"}else for(var B=b;m&&B--;)A+=m/_|0,m%=_,m*=10;return A}},Object.defineProperty(g,"__esModule",{value:!0}),g.default=g,g.Fraction=g,t.exports=g})()})(LA);const si=mf(Xl);var UA="Fraction",VA=[],jA=Ut(UA,VA,()=>(Object.defineProperty(si,"name",{value:"Fraction"}),si.prototype.constructor=si,si.prototype.type="Fraction",si.prototype.isFraction=!0,si.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},si.fromJSON=function(t){return new si(t)},si),{isClass:!0}),qA="Matrix",zA=[],WA=Ut(qA,zA,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function bp(t){return Object.keys(t.signatures||{}).reduce(function(e,r){var n=(r.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var HA="DenseMatrix",GA=["Matrix"],KA=Ut(HA,GA,t=>{var{Matrix:e}=t;function r(f,h){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(h&&!Wn(h))throw new Error("Invalid datatype: "+h);if(Kr(f))f.type==="DenseMatrix"?(this._data=wr(f._data),this._size=wr(f._size),this._datatype=h||f._datatype):(this._data=f.toArray(),this._size=f.size(),this._datatype=h||f._datatype);else if(f&&Qt(f.data)&&Qt(f.size))this._data=f.data,this._size=f.size,t0(this._data,this._size),this._datatype=h||f.datatype;else if(Qt(f))this._data=p(f),this._size=Si(this._data),t0(this._data,this._size),this._datatype=h;else{if(f)throw new TypeError("Unsupported type of data ("+ea(f)+")");this._data=[],this._size=[0],this._datatype=h}}r.prototype=new e,r.prototype.createDenseMatrix=function(f,h){return new r(f,h)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return hs(this._data,ea)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(f,h){return new r(f,h)},r.prototype.subset=function(f,h,d){switch(arguments.length){case 1:return n(this,f);case 2:case 3:return a(this,f,h,d);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(f){if(!Qt(f))throw new TypeError("Array expected");if(f.length!==this._size.length)throw new Nt(f.length,this._size.length);for(var h=0;h<f.length;h++)er(f[h],this._size[h]);for(var d=this._data,g=0,b=f.length;g<b;g++){var m=f[g];er(m,d.length),d=d[m]}return d},r.prototype.set=function(f,h,d){if(!Qt(f))throw new TypeError("Array expected");if(f.length<this._size.length)throw new Nt(f.length,this._size.length,"<");var g,b,m,_=f.map(function(C){return C+1});c(this,_,d);var D=this._data;for(g=0,b=f.length-1;g<b;g++)m=f[g],er(m,D.length),D=D[m];return m=f[f.length-1],er(m,D.length),D[m]=h,this};function n(f,h){if(!df(h))throw new TypeError("Invalid index");var d=h.isScalar();if(d)return f.get(h.min());var g=h.size();if(g.length!==f._size.length)throw new Nt(g.length,f._size.length);for(var b=h.min(),m=h.max(),_=0,D=f._size.length;_<D;_++)er(b[_],f._size[_]),er(m[_],f._size[_]);return new r(i(f._data,h,g.length,0),f._datatype)}function i(f,h,d,g){var b=g===d-1,m=h.dimension(g);return b?m.map(function(_){return er(_,f.length),f[_]}).valueOf():m.map(function(_){er(_,f.length);var D=f[_];return i(D,h,d,g+1)}).valueOf()}function a(f,h,d,g){if(!h||h.isIndex!==!0)throw new TypeError("Invalid index");var b=h.size(),m=h.isScalar(),_;if(Kr(d)?(_=d.size(),d=d.valueOf()):_=Si(d),m){if(_.length!==0)throw new TypeError("Scalar expected");f.set(h.min(),d,g)}else{if(b.length<f._size.length)throw new Nt(b.length,f._size.length,"<");if(_.length<b.length){for(var D=0,C=0;b[D]===1&&_[D]===1;)D++;for(;b[D]===1;)C++,D++;d=ip(d,b.length,C,_)}if(!fs(b,_))throw new Nt(b,_,">");var A=h.max().map(function(O){return O+1});c(f,A,g);var B=b.length,E=0;o(f._data,h,d,B,E)}return f}function o(f,h,d,g,b){var m=b===g-1,_=h.dimension(b);m?_.forEach(function(D,C){er(D),f[D]=d[C[0]]}):_.forEach(function(D,C){er(D),o(f[D],h,d[C[0]],g,b+1)})}r.prototype.resize=function(f,h,d){if(!ls(f))throw new TypeError("Array or Matrix expected");var g=f.valueOf().map(m=>Array.isArray(m)&&m.length===1?m[0]:m),b=d?this.clone():this;return s(b,g,h)};function s(f,h,d){if(h.length===0){for(var g=f._data;Qt(g);)g=g[0];return g}return f._size=h.slice(0),f._data=r0(f._data,f._size,d),f}r.prototype.reshape=function(f,h){var d=h?this.clone():this;d._data=yw(d._data,f);var g=d._size.reduce((b,m)=>b*m);return d._size=gf(f,g),d};function c(f,h,d){for(var g=f._size.slice(0),b=!1;g.length<h.length;)g.push(0),b=!0;for(var m=0,_=h.length;m<_;m++)h[m]>g[m]&&(g[m]=h[m],b=!0);b&&s(f,g,d)}r.prototype.clone=function(){var f=new r({data:wr(this._data),size:wr(this._size),datatype:this._datatype});return f},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(f){var h=this,d=bp(f),g=function _(D,C){return Qt(D)?D.map(function(A,B){return _(A,C.concat(B))}):d===1?f(D):d===2?f(D,C):f(D,C,h)},b=g(this._data,[]),m=this._datatype!==void 0?hs(b,ea):void 0;return new r(b,m)},r.prototype.forEach=function(f){var h=this,d=function g(b,m){Qt(b)?b.forEach(function(_,D){g(_,m.concat(D))}):f(b,m,h)};d(this._data,[])},r.prototype[Symbol.iterator]=function*(){var f=function*h(d,g){if(Qt(d))for(var b=0;b<d.length;b++)yield*h(d[b],g.concat(b));else yield{value:d,index:g}};yield*f(this._data,[])},r.prototype.rows=function(){var f=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var g of d)f.push(new r([g],this._datatype));return f},r.prototype.columns=function(){var f=this,h=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var g=this._data,b=function(D){var C=g.map(A=>[A[D]]);h.push(new r(C,f._datatype))},m=0;m<d[1];m++)b(m);return h},r.prototype.toArray=function(){return wr(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(f){return Jr(this._data,f)},r.prototype.toString=function(){return Jr(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(f){if(f){if(En(f)&&(f=f.toNumber()),!tr(f)||!Ar(f))throw new TypeError("The parameter k must be an integer number")}else f=0;for(var h=f>0?f:0,d=f<0?-f:0,g=this._size[0],b=this._size[1],m=Math.min(g-d,b-h),_=[],D=0;D<m;D++)_[D]=this._data[D+d][D+h];return new r({data:_,size:[m],datatype:this._datatype})},r.diagonal=function(f,h,d,g){if(!Qt(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(P){if(En(P)&&(P=P.toNumber()),!tr(P)||!Ar(P)||P<1)throw new Error("Size values must be positive integers");return P}),d){if(En(d)&&(d=d.toNumber()),!tr(d)||!Ar(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var b=d>0?d:0,m=d<0?-d:0,_=f[0],D=f[1],C=Math.min(_-m,D-b),A;if(Qt(h)){if(h.length!==C)throw new Error("Invalid value array length");A=function(x){return h[x]}}else if(Kr(h)){var B=h.size();if(B.length!==1||B[0]!==C)throw new Error("Invalid matrix length");A=function(x){return h.get([x])}}else A=function(){return h};g||(g=En(A(0))?A(0).mul(0):0);var E=[];if(f.length>0){E=r0(E,f,g);for(var O=0;O<C;O++)E[O+m][O+b]=A(O)}return new r({data:E,size:[_,D]})},r.fromJSON=function(f){return new r(f)},r.prototype.swapRows=function(f,h){if(!tr(f)||!Ar(f)||!tr(h)||!Ar(h))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return er(f,this._size[0]),er(h,this._size[0]),r._swapRows(f,h,this._data),this},r._swapRows=function(f,h,d){var g=d[f];d[f]=d[h],d[h]=g};function p(f){for(var h=0,d=f.length;h<d;h++){var g=f[h];Qt(g)?f[h]=p(g):g&&g.isMatrix===!0&&(f[h]=p(g.valueOf()))}return f}return r},{isClass:!0});function _f(t,e,r){return t&&typeof t.map=="function"?t.map(function(n){return _f(n,e)}):e(t)}var a0="isInteger",$A=["typed"],YA=Ut(a0,$A,t=>{var{typed:e}=t;return e(a0,{number:Ar,BigNumber:function(n){return n.isInt()},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":e.referToSelf(r=>n=>_f(n,r))})}),yp="number, number";function wp(t,e){return t+e}wp.signature=yp;function Ap(t,e){return t*e}Ap.signature=yp;function ZA(t,e,r){if(r==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return n.lte(i.times(r))}return!1}function XA(t,e,r){return cs(t.re,e.re,r)&&cs(t.im,e.im,r)}var JA=Ut("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),vs="equalScalar",QA=["typed","config"],eE=Ut(vs,QA,t=>{var{typed:e,config:r}=t,n=JA({typed:e});return e(vs,{"boolean, boolean":function(a,o){return a===o},"number, number":function(a,o){return cs(a,o,r.epsilon)},"BigNumber, BigNumber":function(a,o){return a.eq(o)||ZA(a,o,r.epsilon)},"Fraction, Fraction":function(a,o){return a.equals(o)},"Complex, Complex":function(a,o){return XA(a,o,r.epsilon)}},n)});Ut(vs,["typed","config"],t=>{var{typed:e,config:r}=t;return e(vs,{"number, number":function(i,a){return cs(i,a,r.epsilon)}})});var tE="SparseMatrix",rE=["typed","equalScalar","Matrix"],nE=Ut(tE,rE,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(m,_){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(_&&!Wn(_))throw new Error("Invalid datatype: "+_);if(Kr(m))a(this,m,_);else if(m&&Qt(m.index)&&Qt(m.ptr)&&Qt(m.size))this._values=m.values,this._index=m.index,this._ptr=m.ptr,this._size=m.size,this._datatype=_||m.datatype;else if(Qt(m))o(this,m,_);else{if(m)throw new TypeError("Unsupported type of data ("+ea(m)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=_}}function a(m,_,D){_.type==="SparseMatrix"?(m._values=_._values?wr(_._values):void 0,m._index=wr(_._index),m._ptr=wr(_._ptr),m._size=wr(_._size),m._datatype=D||_._datatype):o(m,_.valueOf(),D||_._datatype)}function o(m,_,D){m._values=[],m._index=[],m._ptr=[],m._datatype=D;var C=_.length,A=0,B=r,E=0;if(Wn(D)&&(B=e.find(r,[D,D])||r,E=e.convert(0,D)),C>0){var O=0;do{m._ptr.push(m._index.length);for(var P=0;P<C;P++){var x=_[P];if(Qt(x)){if(O===0&&A<x.length&&(A=x.length),O<x.length){var R=x[O];B(R,E)||(m._values.push(R),m._index.push(P))}}else O===0&&A<1&&(A=1),B(x,E)||(m._values.push(x),m._index.push(P))}O++}while(O<A)}m._ptr.push(m._index.length),m._size=[C,A]}i.prototype=new n,i.prototype.createSparseMatrix=function(m,_){return new i(m,_)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return hs(this._values,ea)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(m,_){return new i(m,_)},i.prototype.density=function(){var m=this._size[0],_=this._size[1];return m!==0&&_!==0?this._index.length/(m*_):0},i.prototype.subset=function(m,_,D){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,m);case 2:case 3:return c(this,m,_,D);default:throw new SyntaxError("Wrong number of arguments")}};function s(m,_){if(!df(_))throw new TypeError("Invalid index");var D=_.isScalar();if(D)return m.get(_.min());var C=_.size();if(C.length!==m._size.length)throw new Nt(C.length,m._size.length);var A,B,E,O,P=_.min(),x=_.max();for(A=0,B=m._size.length;A<B;A++)er(P[A],m._size[A]),er(x[A],m._size[A]);var R=m._values,G=m._index,re=m._ptr,U=_.dimension(0),X=_.dimension(1),H=[],V=[];U.forEach(function(J,le){V[J]=le[0],H[J]=!0});var W=R?[]:void 0,Q=[],Y=[];return X.forEach(function(J){for(Y.push(Q.length),E=re[J],O=re[J+1];E<O;E++)A=G[E],H[A]===!0&&(Q.push(V[A]),W&&W.push(R[E]))}),Y.push(Q.length),new i({values:W,index:Q,ptr:Y,size:C,datatype:m._datatype})}function c(m,_,D,C){if(!_||_.isIndex!==!0)throw new TypeError("Invalid index");var A=_.size(),B=_.isScalar(),E;if(Kr(D)?(E=D.size(),D=D.toArray()):E=Si(D),B){if(E.length!==0)throw new TypeError("Scalar expected");m.set(_.min(),D,C)}else{if(A.length!==1&&A.length!==2)throw new Nt(A.length,m._size.length,"<");if(E.length<A.length){for(var O=0,P=0;A[O]===1&&E[O]===1;)O++;for(;A[O]===1;)P++,O++;D=ip(D,A.length,P,E)}if(!fs(A,E))throw new Nt(A,E,">");if(A.length===1){var x=_.dimension(0);x.forEach(function(re,U){er(re),m.set([re,0],D[U[0]],C)})}else{var R=_.dimension(0),G=_.dimension(1);R.forEach(function(re,U){er(re),G.forEach(function(X,H){er(X),m.set([re,X],D[U[0]][H[0]],C)})})}}return m}i.prototype.get=function(m){if(!Qt(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new Nt(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var _=m[0],D=m[1];er(_,this._size[0]),er(D,this._size[1]);var C=p(_,this._ptr[D],this._ptr[D+1],this._index);return C<this._ptr[D+1]&&this._index[C]===_?this._values[C]:0},i.prototype.set=function(m,_,D){if(!Qt(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new Nt(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var C=m[0],A=m[1],B=this._size[0],E=this._size[1],O=r,P=0;Wn(this._datatype)&&(O=e.find(r,[this._datatype,this._datatype])||r,P=e.convert(0,this._datatype)),(C>B-1||A>E-1)&&(d(this,Math.max(C+1,B),Math.max(A+1,E),D),B=this._size[0],E=this._size[1]),er(C,B),er(A,E);var x=p(C,this._ptr[A],this._ptr[A+1],this._index);return x<this._ptr[A+1]&&this._index[x]===C?O(_,P)?f(x,A,this._values,this._index,this._ptr):this._values[x]=_:O(_,P)||h(x,C,A,_,this._values,this._index,this._ptr),this};function p(m,_,D,C){if(D-_===0)return D;for(var A=_;A<D;A++)if(C[A]===m)return A;return _}function f(m,_,D,C,A){D.splice(m,1),C.splice(m,1);for(var B=_+1;B<A.length;B++)A[B]--}function h(m,_,D,C,A,B,E){A.splice(m,0,C),B.splice(m,0,_);for(var O=D+1;O<E.length;O++)E[O]++}i.prototype.resize=function(m,_,D){if(!ls(m))throw new TypeError("Array or Matrix expected");var C=m.valueOf().map(B=>Array.isArray(B)&&B.length===1?B[0]:B);if(C.length!==2)throw new Error("Only two dimensions matrix are supported");C.forEach(function(B){if(!tr(B)||!Ar(B)||B<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Jr(C)+")")});var A=D?this.clone():this;return d(A,C[0],C[1],_)};function d(m,_,D,C){var A=C||0,B=r,E=0;Wn(m._datatype)&&(B=e.find(r,[m._datatype,m._datatype])||r,E=e.convert(0,m._datatype),A=e.convert(A,m._datatype));var O=!B(A,E),P=m._size[0],x=m._size[1],R,G,re;if(D>x){for(G=x;G<D;G++)if(m._ptr[G]=m._values.length,O)for(R=0;R<P;R++)m._values.push(A),m._index.push(R);m._ptr[D]=m._values.length}else D<x&&(m._ptr.splice(D+1,x-D),m._values.splice(m._ptr[D],m._values.length),m._index.splice(m._ptr[D],m._index.length));if(x=D,_>P){if(O){var U=0;for(G=0;G<x;G++){m._ptr[G]=m._ptr[G]+U,re=m._ptr[G+1]+U;var X=0;for(R=P;R<_;R++,X++)m._values.splice(re+X,0,A),m._index.splice(re+X,0,R),U++}m._ptr[x]=m._values.length}}else if(_<P){var H=0;for(G=0;G<x;G++){m._ptr[G]=m._ptr[G]-H;var V=m._ptr[G],W=m._ptr[G+1]-H;for(re=V;re<W;re++)R=m._index[re],R>_-1&&(m._values.splice(re,1),m._index.splice(re,1),H++)}m._ptr[G]=m._values.length}return m._size[0]=_,m._size[1]=D,m}i.prototype.reshape=function(m,_){if(!Qt(m))throw new TypeError("Array expected");if(m.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");m.forEach(function(J){if(!tr(J)||!Ar(J)||J<=-2||J===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Jr(m)+")")});var D=this._size[0]*this._size[1];m=gf(m,D);var C=m[0]*m[1];if(D!==C)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var A=_?this.clone():this;if(this._size[0]===m[0]&&this._size[1]===m[1])return A;for(var B=[],E=0;E<A._ptr.length;E++)for(var O=0;O<A._ptr[E+1]-A._ptr[E];O++)B.push(E);for(var P=A._values.slice(),x=A._index.slice(),R=0;R<A._index.length;R++){var G=x[R],re=B[R],U=G*A._size[1]+re;B[R]=U%m[1],x[R]=Math.floor(U/m[1])}A._values.length=0,A._index.length=0,A._ptr.length=m[1]+1,A._size=m.slice();for(var X=0;X<A._ptr.length;X++)A._ptr[X]=0;for(var H=0;H<P.length;H++){var V=x[H],W=B[H],Q=P[H],Y=p(V,A._ptr[W],A._ptr[W+1],A._index);h(Y,V,W,Q,A._values,A._index,A._ptr)}return A},i.prototype.clone=function(){var m=new i({values:this._values?wr(this._values):void 0,index:wr(this._index),ptr:wr(this._ptr),size:wr(this._size),datatype:this._datatype});return m},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(m,_){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var D=this,C=this._size[0],A=this._size[1],B=bp(m),E=function(P,x,R){return B===1?m(P):B===2?m(P,[x,R]):m(P,[x,R],D)};return g(this,0,C-1,0,A-1,E,_)};function g(m,_,D,C,A,B,E){var O=[],P=[],x=[],R=r,G=0;Wn(m._datatype)&&(R=e.find(r,[m._datatype,m._datatype])||r,G=e.convert(0,m._datatype));for(var re=function(Ae,Pe,Ve){Ae=B(Ae,Pe,Ve),R(Ae,G)||(O.push(Ae),P.push(Pe))},U=C;U<=A;U++){x.push(O.length);var X=m._ptr[U],H=m._ptr[U+1];if(E)for(var V=X;V<H;V++){var W=m._index[V];W>=_&&W<=D&&re(m._values[V],W-_,U-C)}else{for(var Q={},Y=X;Y<H;Y++){var J=m._index[Y];Q[J]=m._values[Y]}for(var le=_;le<=D;le++){var me=le in Q?Q[le]:0;re(me,le-_,U-C)}}}return x.push(O.length),new i({values:O,index:P,ptr:x,size:[D-_+1,A-C+1]})}i.prototype.forEach=function(m,_){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var D=this,C=this._size[0],A=this._size[1],B=0;B<A;B++){var E=this._ptr[B],O=this._ptr[B+1];if(_)for(var P=E;P<O;P++){var x=this._index[P];m(this._values[P],[x,B],D)}else{for(var R={},G=E;G<O;G++){var re=this._index[G];R[re]=this._values[G]}for(var U=0;U<C;U++){var X=U in R?R[U]:0;m(X,[U,B],D)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var m=this._size[1],_=0;_<m;_++)for(var D=this._ptr[_],C=this._ptr[_+1],A=D;A<C;A++){var B=this._index[A];yield{value:this._values[A],index:[B,_]}}},i.prototype.toArray=function(){return b(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return b(this._values,this._index,this._ptr,this._size,!1)};function b(m,_,D,C,A){var B=C[0],E=C[1],O=[],P,x;for(P=0;P<B;P++)for(O[P]=[],x=0;x<E;x++)O[P][x]=0;for(x=0;x<E;x++)for(var R=D[x],G=D[x+1],re=R;re<G;re++)P=_[re],O[P][x]=m?A?wr(m[re]):m[re]:1;return O}return i.prototype.format=function(m){for(var _=this._size[0],D=this._size[1],C=this.density(),A="Sparse Matrix ["+Jr(_,m)+" x "+Jr(D,m)+"] density: "+Jr(C,m)+`
`,B=0;B<D;B++)for(var E=this._ptr[B],O=this._ptr[B+1],P=E;P<O;P++){var x=this._index[P];A+=`
    (`+Jr(x,m)+", "+Jr(B,m)+") ==> "+(this._values?Jr(this._values[P],m):"X")}return A},i.prototype.toString=function(){return Jr(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(m){if(m){if(En(m)&&(m=m.toNumber()),!tr(m)||!Ar(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var _=m>0?m:0,D=m<0?-m:0,C=this._size[0],A=this._size[1],B=Math.min(C-D,A-_),E=[],O=[],P=[];P[0]=0;for(var x=_;x<A&&E.length<B;x++)for(var R=this._ptr[x],G=this._ptr[x+1],re=R;re<G;re++){var U=this._index[re];if(U===x-_+D){E.push(this._values[re]),O[E.length-1]=U-D;break}}return P.push(E.length),new i({values:E,index:O,ptr:P,size:[B,1]})},i.fromJSON=function(m){return new i(m)},i.diagonal=function(m,_,D,C,A){if(!Qt(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(J){if(En(J)&&(J=J.toNumber()),!tr(J)||!Ar(J)||J<1)throw new Error("Size values must be positive integers");return J}),D){if(En(D)&&(D=D.toNumber()),!tr(D)||!Ar(D))throw new TypeError("The parameter k must be an integer number")}else D=0;var B=r,E=0;Wn(A)&&(B=e.find(r,[A,A])||r,E=e.convert(0,A));var O=D>0?D:0,P=D<0?-D:0,x=m[0],R=m[1],G=Math.min(x-P,R-O),re;if(Qt(_)){if(_.length!==G)throw new Error("Invalid value array length");re=function(le){return _[le]}}else if(Kr(_)){var U=_.size();if(U.length!==1||U[0]!==G)throw new Error("Invalid matrix length");re=function(le){return _.get([le])}}else re=function(){return _};for(var X=[],H=[],V=[],W=0;W<R;W++){V.push(X.length);var Q=W-O;if(Q>=0&&Q<G){var Y=re(Q);B(Y,E)||(H.push(Q+P),X.push(Y))}}return V.push(X.length),new i({values:X,index:H,ptr:V,size:[x,R]})},i.prototype.swapRows=function(m,_){if(!tr(m)||!Ar(m)||!tr(_)||!Ar(_))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return er(m,this._size[0]),er(_,this._size[0]),i._swapRows(m,_,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(m,_,D,C,A){for(var B=C[m],E=C[m+1],O=B;O<E;O++)A(D[O],_[O])},i._swapRows=function(m,_,D,C,A,B){for(var E=0;E<D;E++){var O=B[E],P=B[E+1],x=p(m,O,P,A),R=p(_,O,P,A);if(x<P&&R<P&&A[x]===m&&A[R]===_){if(C){var G=C[x];C[x]=C[R],C[R]=G}continue}if(x<P&&A[x]===m&&(R>=P||A[R]!==_)){var re=C?C[x]:void 0;A.splice(R,0,_),C&&C.splice(R,0,re),A.splice(R<=x?x+1:x,1),C&&C.splice(R<=x?x+1:x,1);continue}if(R<P&&A[R]===_&&(x>=P||A[x]!==m)){var U=C?C[R]:void 0;A.splice(x,0,m),C&&C.splice(x,0,U),A.splice(x<=R?R+1:R,1),C&&C.splice(x<=R?R+1:R,1)}}},i},{isClass:!0}),s0="matrix",iE=["typed","Matrix","DenseMatrix","SparseMatrix"],uE=Ut(s0,iE,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(s0,{"":function(){return a([])},string:function(s){return a([],s)},"string, string":function(s,c){return a([],s,c)},Array:function(s){return a(s)},Matrix:function(s){return a(s,s.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(o,s,c){if(s==="dense"||s==="default"||s===void 0)return new n(o,c);if(s==="sparse")return new i(o,c);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),o0="addScalar",aE=["typed"],sE=Ut(o0,aE,t=>{var{typed:e}=t;return e(o0,{"number, number":wp,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),oE="matAlgo11xS0s",lE=["typed","equalScalar"],fE=Ut(oE,lE,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o,s){var c=i._values,p=i._index,f=i._ptr,h=i._size,d=i._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=h[0],b=h[1],m,_=r,D=0,C=o;typeof d=="string"&&(m=d,_=e.find(r,[m,m]),D=e.convert(0,m),a=e.convert(a,m),C=e.find(o,[m,m]));for(var A=[],B=[],E=[],O=0;O<b;O++){E[O]=B.length;for(var P=f[O],x=f[O+1],R=P;R<x;R++){var G=p[R],re=s?C(a,c[R]):C(c[R],a);_(re,D)||(B.push(G),A.push(re))}}return E[b]=B.length,i.createSparseMatrix({values:A,index:B,ptr:E,size:[g,b],datatype:m})}}),cE="matAlgo14xDs",hE=["typed"],Ep=Ut(cE,hE,t=>{var{typed:e}=t;return function(i,a,o,s){var c=i._data,p=i._size,f=i._datatype,h,d=o;typeof f=="string"&&(h=f,a=e.convert(a,h),d=e.find(o,[h,h]));var g=p.length>0?r(d,0,p,p[0],c,a,s):[];return i.createDenseMatrix({data:g,size:wr(p),datatype:h})};function r(n,i,a,o,s,c,p){var f=[];if(i===a.length-1)for(var h=0;h<o;h++)f[h]=p?n(c,s[h]):n(s[h],c);else for(var d=0;d<o;d++)f[d]=r(n,i+1,a,a[i+1],s[d],c,p);return f}}),dE="matAlgo01xDSid",pE=["typed"],gE=Ut(dE,pE,t=>{var{typed:e}=t;return function(n,i,a,o){var s=n._data,c=n._size,p=n._datatype,f=i._values,h=i._index,d=i._ptr,g=i._size,b=i._datatype;if(c.length!==g.length)throw new Nt(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=c[0],_=c[1],D=typeof p=="string"&&p===b?p:void 0,C=D?e.find(a,[D,D]):a,A,B,E=[];for(A=0;A<m;A++)E[A]=[];var O=[],P=[];for(B=0;B<_;B++){for(var x=B+1,R=d[B],G=d[B+1],re=R;re<G;re++)A=h[re],O[A]=o?C(f[re],s[A][B]):C(s[A][B],f[re]),P[A]=x;for(A=0;A<m;A++)P[A]===x?E[A][B]=O[A]:E[A][B]=s[A][B]}return n.createDenseMatrix({data:E,size:[m,_],datatype:D})}}),vE="matAlgo04xSidSid",mE=["typed","equalScalar"],_E=Ut(vE,mE,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,c=i._index,p=i._ptr,f=i._size,h=i._datatype,d=a._values,g=a._index,b=a._ptr,m=a._size,_=a._datatype;if(f.length!==m.length)throw new Nt(f.length,m.length);if(f[0]!==m[0]||f[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+m+")");var D=f[0],C=f[1],A,B=r,E=0,O=o;typeof h=="string"&&h===_&&(A=h,B=e.find(r,[A,A]),E=e.convert(0,A),O=e.find(o,[A,A]));var P=s&&d?[]:void 0,x=[],R=[],G=s&&d?[]:void 0,re=s&&d?[]:void 0,U=[],X=[],H,V,W,Q,Y;for(V=0;V<C;V++){R[V]=x.length;var J=V+1;for(Q=p[V],Y=p[V+1],W=Q;W<Y;W++)H=c[W],x.push(H),U[H]=J,G&&(G[H]=s[W]);for(Q=b[V],Y=b[V+1],W=Q;W<Y;W++)if(H=g[W],U[H]===J){if(G){var le=O(G[H],d[W]);B(le,E)?U[H]=null:G[H]=le}}else x.push(H),X[H]=J,re&&(re[H]=d[W]);if(G&&re)for(W=R[V];W<x.length;)H=x[W],U[H]===J?(P[W]=G[H],W++):X[H]===J?(P[W]=re[H],W++):x.splice(W,1)}return R[C]=x.length,i.createSparseMatrix({values:P,index:x,ptr:R,size:[D,C],datatype:A})}}),DE="matAlgo10xSids",bE=["typed","DenseMatrix"],yE=Ut(DE,bE,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,o,s){var c=i._values,p=i._index,f=i._ptr,h=i._size,d=i._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=h[0],b=h[1],m,_=o;typeof d=="string"&&(m=d,a=e.convert(a,m),_=e.find(o,[m,m]));for(var D=[],C=[],A=[],B=0;B<b;B++){for(var E=B+1,O=f[B],P=f[B+1],x=O;x<P;x++){var R=p[x];C[R]=c[x],A[R]=E}for(var G=0;G<g;G++)B===0&&(D[G]=[]),A[G]===E?D[G][B]=s?_(a,C[G]):_(C[G],a):D[G][B]=a}return new r({data:D,size:[g,b],datatype:m})}}),wE="matAlgo13xDD",AE=["typed"],EE=Ut(wE,AE,t=>{var{typed:e}=t;return function(i,a,o){var s=i._data,c=i._size,p=i._datatype,f=a._data,h=a._size,d=a._datatype,g=[];if(c.length!==h.length)throw new Nt(c.length,h.length);for(var b=0;b<c.length;b++){if(c[b]!==h[b])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+h+")");g[b]=c[b]}var m,_=o;typeof p=="string"&&p===d&&(m=p,_=e.find(o,[m,m]));var D=g.length>0?r(_,0,g,g[0],s,f):[];return i.createDenseMatrix({data:D,size:g,datatype:m})};function r(n,i,a,o,s,c){var p=[];if(i===a.length-1)for(var f=0;f<o;f++)p[f]=n(s[f],c[f]);else for(var h=0;h<o;h++)p[h]=r(n,i+1,a,a[i+1],s[h],c[h]);return p}}),CE="broadcast",FE=["concat"],SE=Ut(CE,FE,t=>{var{concat:e}=t;return function(a,o){var s=Math.max(a._size.length,o._size.length);if(a._size.length===o._size.length&&a._size.every((_,D)=>_===o._size[D]))return[a,o];for(var c=r(a._size,s,0),p=r(o._size,s,0),f=[],h=0;h<s;h++)f[h]=Math.max(c[h],p[h]);for(var d=0;d<s;d++)i(c,f,d),i(p,f,d);var g=a.clone(),b=o.clone();g._size.length<s?g.reshape(r(g._size,s,1)):b._size.length<s&&b.reshape(r(b._size,s,1));for(var m=0;m<s;m++)g._size[m]<f[m]&&(g=n(g,f[m],m)),b._size[m]<f[m]&&(b=n(b,f[m],m));return[g,b]};function r(a,o,s){return[...Array(o-a.length).fill(s),...a]}function n(a,o,s){return e(...Array(o).fill(a),s)}function i(a,o,s){if(a[s]<o[s]&a[s]>1)throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(a,") not possible to broadcast dimension ").concat(s," with size ").concat(a[s]," to size ").concat(o[s]))}}),BE="matrixAlgorithmSuite",OE=["typed","matrix","concat"],ME=Ut(BE,OE,t=>{var{typed:e,matrix:r,concat:n}=t,i=EE({typed:e}),a=Ep({typed:e}),o=SE({concat:n});return function(c){var p=c.elop,f=c.SD||c.DS,h;p?(h={"DenseMatrix, DenseMatrix":(m,_)=>i(...o(m,_),p),"Array, Array":(m,_)=>i(...o(r(m),r(_)),p).valueOf(),"Array, DenseMatrix":(m,_)=>i(...o(r(m),_),p),"DenseMatrix, Array":(m,_)=>i(...o(m,r(_)),p)},c.SS&&(h["SparseMatrix, SparseMatrix"]=(m,_)=>c.SS(...o(m,_),p,!1)),c.DS&&(h["DenseMatrix, SparseMatrix"]=(m,_)=>c.DS(...o(m,_),p,!1),h["Array, SparseMatrix"]=(m,_)=>c.DS(...o(r(m),_),p,!1)),f&&(h["SparseMatrix, DenseMatrix"]=(m,_)=>f(...o(_,m),p,!0),h["SparseMatrix, Array"]=(m,_)=>f(...o(r(_),m),p,!0))):(h={"DenseMatrix, DenseMatrix":e.referToSelf(m=>(_,D)=>i(...o(_,D),m)),"Array, Array":e.referToSelf(m=>(_,D)=>i(...o(r(_),r(D)),m).valueOf()),"Array, DenseMatrix":e.referToSelf(m=>(_,D)=>i(...o(r(_),D),m)),"DenseMatrix, Array":e.referToSelf(m=>(_,D)=>i(...o(_,r(D)),m))},c.SS&&(h["SparseMatrix, SparseMatrix"]=e.referToSelf(m=>(_,D)=>c.SS(...o(_,D),m,!1))),c.DS&&(h["DenseMatrix, SparseMatrix"]=e.referToSelf(m=>(_,D)=>c.DS(...o(_,D),m,!1)),h["Array, SparseMatrix"]=e.referToSelf(m=>(_,D)=>c.DS(...o(r(_),D),m,!1))),f&&(h["SparseMatrix, DenseMatrix"]=e.referToSelf(m=>(_,D)=>f(...o(D,_),m,!0)),h["SparseMatrix, Array"]=e.referToSelf(m=>(_,D)=>f(...o(r(D),_),m,!0))));var d=c.scalar||"any",g=c.Ds||c.Ss;g&&(p?(h["DenseMatrix,"+d]=(m,_)=>a(m,_,p,!1),h[d+", DenseMatrix"]=(m,_)=>a(_,m,p,!0),h["Array,"+d]=(m,_)=>a(r(m),_,p,!1).valueOf(),h[d+", Array"]=(m,_)=>a(r(_),m,p,!0).valueOf()):(h["DenseMatrix,"+d]=e.referToSelf(m=>(_,D)=>a(_,D,m,!1)),h[d+", DenseMatrix"]=e.referToSelf(m=>(_,D)=>a(D,_,m,!0)),h["Array,"+d]=e.referToSelf(m=>(_,D)=>a(r(_),D,m,!1).valueOf()),h[d+", Array"]=e.referToSelf(m=>(_,D)=>a(r(D),_,m,!0).valueOf())));var b=c.sS!==void 0?c.sS:c.Ss;return p?(c.Ss&&(h["SparseMatrix,"+d]=(m,_)=>c.Ss(m,_,p,!1)),b&&(h[d+", SparseMatrix"]=(m,_)=>b(_,m,p,!0))):(c.Ss&&(h["SparseMatrix,"+d]=e.referToSelf(m=>(_,D)=>c.Ss(_,D,m,!1))),b&&(h[d+", SparseMatrix"]=e.referToSelf(m=>(_,D)=>b(D,_,m,!0)))),p&&p.signatures&&aw(h,p.signatures),h}}),PE="multiplyScalar",TE=["typed"],xE=Ut(PE,TE,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":Ap,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),l0="multiply",IE=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],kE=Ut(l0,IE,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:a,dot:o}=t,s=fE({typed:e,equalScalar:a}),c=Ep({typed:e});function p(E,O){switch(E.length){case 1:switch(O.length){case 1:if(E[0]!==O[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(E[0]!==O[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+E[0]+") must match Matrix rows ("+O[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+O.length+" dimensions)")}break;case 2:switch(O.length){case 1:if(E[1]!==O[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+E[1]+") must match Vector length ("+O[0]+")");break;case 2:if(E[1]!==O[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+E[1]+") must match Matrix B rows ("+O[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+O.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+E.length+" dimensions)")}}function f(E,O,P){if(P===0)throw new Error("Cannot multiply two empty vectors");return o(E,O)}function h(E,O){if(O.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(E,O)}function d(E,O){var P=E._data,x=E._size,R=E._datatype,G=O._data,re=O._size,U=O._datatype,X=x[0],H=re[1],V,W=n,Q=i;R&&U&&R===U&&typeof R=="string"&&(V=R,W=e.find(n,[V,V]),Q=e.find(i,[V,V]));for(var Y=[],J=0;J<H;J++){for(var le=Q(P[0],G[0][J]),me=1;me<X;me++)le=W(le,Q(P[me],G[me][J]));Y[J]=le}return E.createDenseMatrix({data:Y,size:[H],datatype:V})}var g=e("_multiplyMatrixVector",{"DenseMatrix, any":m,"SparseMatrix, any":C}),b=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":_,"DenseMatrix, SparseMatrix":D,"SparseMatrix, DenseMatrix":A,"SparseMatrix, SparseMatrix":B});function m(E,O){var P=E._data,x=E._size,R=E._datatype,G=O._data,re=O._datatype,U=x[0],X=x[1],H,V=n,W=i;R&&re&&R===re&&typeof R=="string"&&(H=R,V=e.find(n,[H,H]),W=e.find(i,[H,H]));for(var Q=[],Y=0;Y<U;Y++){for(var J=P[Y],le=W(J[0],G[0]),me=1;me<X;me++)le=V(le,W(J[me],G[me]));Q[Y]=le}return E.createDenseMatrix({data:Q,size:[U],datatype:H})}function _(E,O){var P=E._data,x=E._size,R=E._datatype,G=O._data,re=O._size,U=O._datatype,X=x[0],H=x[1],V=re[1],W,Q=n,Y=i;R&&U&&R===U&&typeof R=="string"&&(W=R,Q=e.find(n,[W,W]),Y=e.find(i,[W,W]));for(var J=[],le=0;le<X;le++){var me=P[le];J[le]=[];for(var Ce=0;Ce<V;Ce++){for(var Ae=Y(me[0],G[0][Ce]),Pe=1;Pe<H;Pe++)Ae=Q(Ae,Y(me[Pe],G[Pe][Ce]));J[le][Ce]=Ae}}return E.createDenseMatrix({data:J,size:[X,V],datatype:W})}function D(E,O){var P=E._data,x=E._size,R=E._datatype,G=O._values,re=O._index,U=O._ptr,X=O._size,H=O._datatype;if(!G)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var V=x[0],W=X[1],Q,Y=n,J=i,le=a,me=0;R&&H&&R===H&&typeof R=="string"&&(Q=R,Y=e.find(n,[Q,Q]),J=e.find(i,[Q,Q]),le=e.find(a,[Q,Q]),me=e.convert(0,Q));for(var Ce=[],Ae=[],Pe=[],Ve=O.createSparseMatrix({values:Ce,index:Ae,ptr:Pe,size:[V,W],datatype:Q}),Ie=0;Ie<W;Ie++){Pe[Ie]=Ae.length;var Xe=U[Ie],ze=U[Ie+1];if(ze>Xe)for(var Re=0,je=0;je<V;je++){for(var pt=je+1,ut=void 0,lt=Xe;lt<ze;lt++){var at=re[lt];Re!==pt?(ut=J(P[je][at],G[lt]),Re=pt):ut=Y(ut,J(P[je][at],G[lt]))}Re===pt&&!le(ut,me)&&(Ae.push(je),Ce.push(ut))}}return Pe[W]=Ae.length,Ve}function C(E,O){var P=E._values,x=E._index,R=E._ptr,G=E._datatype;if(!P)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var re=O._data,U=O._datatype,X=E._size[0],H=O._size[0],V=[],W=[],Q=[],Y,J=n,le=i,me=a,Ce=0;G&&U&&G===U&&typeof G=="string"&&(Y=G,J=e.find(n,[Y,Y]),le=e.find(i,[Y,Y]),me=e.find(a,[Y,Y]),Ce=e.convert(0,Y));var Ae=[],Pe=[];Q[0]=0;for(var Ve=0;Ve<H;Ve++){var Ie=re[Ve];if(!me(Ie,Ce))for(var Xe=R[Ve],ze=R[Ve+1],Re=Xe;Re<ze;Re++){var je=x[Re];Pe[je]?Ae[je]=J(Ae[je],le(Ie,P[Re])):(Pe[je]=!0,W.push(je),Ae[je]=le(Ie,P[Re]))}}for(var pt=W.length,ut=0;ut<pt;ut++){var lt=W[ut];V[ut]=Ae[lt]}return Q[1]=W.length,E.createSparseMatrix({values:V,index:W,ptr:Q,size:[X,1],datatype:Y})}function A(E,O){var P=E._values,x=E._index,R=E._ptr,G=E._datatype;if(!P)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var re=O._data,U=O._datatype,X=E._size[0],H=O._size[0],V=O._size[1],W,Q=n,Y=i,J=a,le=0;G&&U&&G===U&&typeof G=="string"&&(W=G,Q=e.find(n,[W,W]),Y=e.find(i,[W,W]),J=e.find(a,[W,W]),le=e.convert(0,W));for(var me=[],Ce=[],Ae=[],Pe=E.createSparseMatrix({values:me,index:Ce,ptr:Ae,size:[X,V],datatype:W}),Ve=[],Ie=[],Xe=0;Xe<V;Xe++){Ae[Xe]=Ce.length;for(var ze=Xe+1,Re=0;Re<H;Re++){var je=re[Re][Xe];if(!J(je,le))for(var pt=R[Re],ut=R[Re+1],lt=pt;lt<ut;lt++){var at=x[lt];Ie[at]!==ze?(Ie[at]=ze,Ce.push(at),Ve[at]=Y(je,P[lt])):Ve[at]=Q(Ve[at],Y(je,P[lt]))}}for(var st=Ae[Xe],Ke=Ce.length,$e=st;$e<Ke;$e++){var Ee=Ce[$e];me[$e]=Ve[Ee]}}return Ae[V]=Ce.length,Pe}function B(E,O){var P=E._values,x=E._index,R=E._ptr,G=E._datatype,re=O._values,U=O._index,X=O._ptr,H=O._datatype,V=E._size[0],W=O._size[1],Q=P&&re,Y,J=n,le=i;G&&H&&G===H&&typeof G=="string"&&(Y=G,J=e.find(n,[Y,Y]),le=e.find(i,[Y,Y]));for(var me=Q?[]:void 0,Ce=[],Ae=[],Pe=E.createSparseMatrix({values:me,index:Ce,ptr:Ae,size:[V,W],datatype:Y}),Ve=Q?[]:void 0,Ie=[],Xe,ze,Re,je,pt,ut,lt,at,st=0;st<W;st++){Ae[st]=Ce.length;var Ke=st+1;for(pt=X[st],ut=X[st+1],je=pt;je<ut;je++)if(at=U[je],Q)for(ze=R[at],Re=R[at+1],Xe=ze;Xe<Re;Xe++)lt=x[Xe],Ie[lt]!==Ke?(Ie[lt]=Ke,Ce.push(lt),Ve[lt]=le(re[je],P[Xe])):Ve[lt]=J(Ve[lt],le(re[je],P[Xe]));else for(ze=R[at],Re=R[at+1],Xe=ze;Xe<Re;Xe++)lt=x[Xe],Ie[lt]!==Ke&&(Ie[lt]=Ke,Ce.push(lt));if(Q)for(var $e=Ae[st],Ee=Ce.length,Te=$e;Te<Ee;Te++){var Bt=Ce[Te];me[Te]=Ve[Bt]}}return Ae[W]=Ce.length,Pe}return e(l0,i,{"Array, Array":e.referTo("Matrix, Matrix",E=>(O,P)=>{p(Si(O),Si(P));var x=E(r(O),r(P));return Kr(x)?x.valueOf():x}),"Matrix, Matrix":function(O,P){var x=O.size(),R=P.size();return p(x,R),x.length===1?R.length===1?f(O,P,x[0]):h(O,P):R.length===1?g(O,P):b(O,P)},"Matrix, Array":e.referTo("Matrix,Matrix",E=>(O,P)=>E(O,r(P))),"Array, Matrix":e.referToSelf(E=>(O,P)=>E(r(O,P.storage()),P)),"SparseMatrix, any":function(O,P){return s(O,P,i,!1)},"DenseMatrix, any":function(O,P){return c(O,P,i,!1)},"any, SparseMatrix":function(O,P){return s(P,O,i,!0)},"any, DenseMatrix":function(O,P){return c(P,O,i,!0)},"Array, any":function(O,P){return c(r(O),P,i,!1).valueOf()},"any, Array":function(O,P){return c(r(P),O,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(E=>(O,P,x)=>{for(var R=E(O,P),G=0;G<x.length;G++)R=E(R,x[G]);return R})})}),f0="conj",NE=["typed"],RE=Ut(f0,NE,t=>{var{typed:e}=t;return e(f0,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":e.referToSelf(r=>n=>_f(n,r))})}),c0="concat",LE=["typed","matrix","isInteger"],UE=Ut(c0,LE,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(c0,{"...Array | Matrix | number | BigNumber":function(a){var o,s=a.length,c=-1,p,f=!1,h=[];for(o=0;o<s;o++){var d=a[o];if(Kr(d)&&(f=!0),tr(d)||En(d)){if(o!==s-1)throw new Error("Dimension must be specified as last argument");if(p=c,c=d.valueOf(),!n(c))throw new TypeError("Integer number expected for dimension");if(c<0||o>0&&c>p)throw new Gi(c,p+1)}else{var g=wr(d).valueOf(),b=Si(g);if(h[o]=g,p=c,c=b.length-1,o>0&&c!==p)throw new Nt(p+1,c+1)}}if(h.length===0)throw new SyntaxError("At least one matrix expected");for(var m=h.shift();h.length;)m=Cp(m,h.shift(),c,0);return f?r(m):m},"...string":function(a){return a.join("")}})});function Cp(t,e,r,n){if(n<r){if(t.length!==e.length)throw new Nt(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=Cp(t[a],e[a],r,n+1);return i}else return t.concat(e)}function VE(){throw new Error('No "matrix" implementation available')}var h0="size",jE=["typed","config","?matrix"],qE=Ut(h0,jE,t=>{var{typed:e,config:r,matrix:n}=t;return e(h0,{Matrix:function(a){return a.create(a.size())},Array:Si,string:function(a){return r.matrix==="Array"?[a.length]:n([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return r.matrix==="Array"?[]:n?n([]):VE()}})}),d0="add",zE=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],WE=Ut(d0,zE,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:a,SparseMatrix:o,concat:s}=t,c=gE({typed:e}),p=_E({typed:e,equalScalar:i}),f=yE({typed:e,DenseMatrix:a}),h=ME({typed:e,matrix:r,concat:s});return e(d0,{"any, any":n,"any, any, ...any":e.referToSelf(d=>(g,b,m)=>{for(var _=d(g,b),D=0;D<m.length;D++)_=d(_,m[D]);return _})},h({elop:n,DS:c,SS:p,Ss:f}))}),p0="dot",HE=["typed","addScalar","multiplyScalar","conj","size"],GE=Ut(p0,HE,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:a}=t;return e(p0,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":c});function o(f,h){var d=p(f),g=p(h),b,m;if(d.length===1)b=d[0];else if(d.length===2&&d[1]===1)b=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(g.length===1)m=g[0];else if(g.length===2&&g[1]===1)m=g[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+g.join(", ")+")");if(b!==m)throw new RangeError("Vectors must have equal length ("+b+" != "+m+")");if(b===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return b}function s(f,h){var d=o(f,h),g=Kr(f)?f._data:f,b=Kr(f)?f._datatype:void 0,m=Kr(h)?h._data:h,_=Kr(h)?h._datatype:void 0,D=p(f).length===2,C=p(h).length===2,A=r,B=n;if(b&&_&&b===_&&typeof b=="string"){var E=b;A=e.find(r,[E,E]),B=e.find(n,[E,E])}if(!D&&!C){for(var O=B(i(g[0]),m[0]),P=1;P<d;P++)O=A(O,B(i(g[P]),m[P]));return O}if(!D&&C){for(var x=B(i(g[0]),m[0][0]),R=1;R<d;R++)x=A(x,B(i(g[R]),m[R][0]));return x}if(D&&!C){for(var G=B(i(g[0][0]),m[0]),re=1;re<d;re++)G=A(G,B(i(g[re][0]),m[re]));return G}if(D&&C){for(var U=B(i(g[0][0]),m[0][0]),X=1;X<d;X++)U=A(U,B(i(g[X][0]),m[X][0]));return U}}function c(f,h){o(f,h);for(var d=f._index,g=f._values,b=h._index,m=h._values,_=0,D=r,C=n,A=0,B=0;A<d.length&&B<b.length;){var E=d[A],O=b[B];if(E<O){A++;continue}if(E>O){B++;continue}E===O&&(_=D(_,C(g[A],m[B])),A++,B++)}return _}function p(f){return Kr(f)?f.size():a(f)}}),KE=xA({config:Ns}),$E=RA({}),YE=jA({}),Df=WA({}),bf=KA({Matrix:Df}),Fn=Nw({BigNumber:KE,Complex:$E,DenseMatrix:bf,Fraction:YE}),yf=sE({typed:Fn}),ZE=RE({typed:Fn}),wf=eE({config:Ns,typed:Fn}),XE=YA({typed:Fn}),Fp=xE({typed:Fn}),Sp=nE({Matrix:Df,equalScalar:wf,typed:Fn}),qs=uE({DenseMatrix:bf,Matrix:Df,SparseMatrix:Sp,typed:Fn}),JE=qE({matrix:qs,config:Ns,typed:Fn}),QE=UE({isInteger:XE,matrix:qs,typed:Fn}),Gr=WE({DenseMatrix:bf,SparseMatrix:Sp,addScalar:yf,concat:QE,equalScalar:wf,matrix:qs,typed:Fn}),e2=GE({addScalar:yf,conj:ZE,multiplyScalar:Fp,size:JE,typed:Fn}),An=kE({addScalar:yf,dot:e2,equalScalar:wf,matrix:qs,multiplyScalar:Fp,typed:Fn});function t2(t){let e,r,n;return{c(){e=vt("circle"),this.h()},l(i){e=mt(i,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),$(e).forEach(k),this.h()},h(){M(e,"cx",r=t[0][0]),M(e,"cy",n=t[0][1]),M(e,"r",t[1]),M(e,"stroke",t[3]),M(e,"stroke-width",t[2]),Yt(e,"fill","rgba(0,0,0,0)")},m(i,a){be(i,e,a)},p(i,[a]){a&1&&r!==(r=i[0][0])&&M(e,"cx",r),a&1&&n!==(n=i[0][1])&&M(e,"cy",n),a&2&&M(e,"r",i[1]),a&8&&M(e,"stroke",i[3]),a&4&&M(e,"stroke-width",i[2])},i:Me,o:Me,d(i){i&&k(e)}}}function r2(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class Af extends wt{constructor(e){super(),At(this,e,r2,t2,Et,{xy:0,radius:1,stroke:2,color:3})}}function n2(t){let e,r,n,i,a;return{c(){e=vt("circle"),this.h()},l(o){e=mt(o,"circle",{cx:!0,cy:!0,r:!0}),$(e).forEach(k),this.h()},h(){M(e,"cx",r=t[0][0]),M(e,"cy",n=t[0][1]),M(e,"r",t[1]),Yt(e,"fill",t[2])},m(o,s){be(o,e,s),i||(a=[Oe(e,"mouseover",t[3]),Oe(e,"mouseout",t[4]),Oe(e,"mousedown",t[5])],i=!0)},p(o,[s]){s&1&&r!==(r=o[0][0])&&M(e,"cx",r),s&1&&n!==(n=o[0][1])&&M(e,"cy",n),s&2&&M(e,"r",o[1]),s&4&&Yt(e,"fill",o[2])},i:Me,o:Me,d(o){o&&k(e),i=!1,fr(a)}}}function i2(t,e,r){let{xy:n=[100,100]}=e,{radius:i=5}=e,{color:a="black"}=e,{hoverColor:o="white"}=e,{handleMouseDown:s=d=>{}}=e,c=a;function p(){r(2,c=o)}function f(){r(2,c=a)}function h(d){s(d)}return t.$$set=d=>{"xy"in d&&r(0,n=d.xy),"radius"in d&&r(1,i=d.radius),"color"in d&&r(6,a=d.color),"hoverColor"in d&&r(7,o=d.hoverColor),"handleMouseDown"in d&&r(8,s=d.handleMouseDown)},[n,i,c,p,f,h,a,o,s]}class yu extends wt{constructor(e){super(),At(this,e,i2,n2,Et,{xy:0,radius:1,color:6,hoverColor:7,handleMouseDown:8})}}function u2(t){let e,r,n,i,a;return{c(){e=vt("line"),this.h()},l(o){e=mt(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-dasharray":!0,"stroke-width":!0}),$(e).forEach(k),this.h()},h(){M(e,"x1",r=t[0][0]),M(e,"y1",n=t[0][1]),M(e,"x2",i=t[1][0]),M(e,"y2",a=t[1][1]),M(e,"stroke",t[3]),M(e,"stroke-dasharray","10,10"),M(e,"stroke-width",t[2])},m(o,s){be(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&M(e,"x1",r),s&1&&n!==(n=o[0][1])&&M(e,"y1",n),s&2&&i!==(i=o[1][0])&&M(e,"x2",i),s&2&&a!==(a=o[1][1])&&M(e,"y2",a),s&8&&M(e,"stroke",o[3]),s&4&&M(e,"stroke-width",o[2])},i:Me,o:Me,d(o){o&&k(e)}}}function a2(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class Bp extends wt{constructor(e){super(),At(this,e,a2,u2,Et,{p1:0,p2:1,stroke:2,color:3})}}function s2(t){let e,r,n,i,a,o,s,c;return{c(){e=vt("foreignObject"),r=ie("div"),n=ie("p"),i=We(t[2]),this.h()},l(p){e=mt(p,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var f=$(e);r=ue(f,"DIV",{class:!0});var h=$(r);n=ue(h,"P",{});var d=$(n);i=He(d,t[2]),d.forEach(k),h.forEach(k),f.forEach(k),this.h()},h(){Yt(n,"color",t[3]),Yt(n,"user-select","none"),Yt(n,"margin","0"),Yt(n,"pointer-events","none"),Yt(n,"text-align",t[4]),Yt(n,"font-size",`${t[5]}px`),Yt(n,"font-family","sans-serif"),Yt(n,"font-style","italic"),M(r,"class","h-full flex flex-col justify-center"),M(e,"x",a=t[0][0]),M(e,"y",o=t[0][1]),M(e,"width",s=t[1][0]),M(e,"height",c=t[1][1])},m(p,f){be(p,e,f),j(e,r),j(r,n),j(n,i)},p(p,[f]){f&4&&Cn(i,p[2]),f&8&&Yt(n,"color",p[3]),f&16&&Yt(n,"text-align",p[4]),f&32&&Yt(n,"font-size",`${p[5]}px`),f&1&&a!==(a=p[0][0])&&M(e,"x",a),f&1&&o!==(o=p[0][1])&&M(e,"y",o),f&2&&s!==(s=p[1][0])&&M(e,"width",s),f&2&&c!==(c=p[1][1])&&M(e,"height",c)},i:Me,o:Me,d(p){p&&k(e)}}}function o2(t,e,r){let{xy:n=[100,100]}=e,{wh:i=[100,100]}=e,{text:a=""}=e,{color:o="rgba(96,117,151, 1)"}=e,{textAlign:s="center"}=e,{fontSize:c=12}=e;return t.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,i=p.wh),"text"in p&&r(2,a=p.text),"color"in p&&r(3,o=p.color),"textAlign"in p&&r(4,s=p.textAlign),"fontSize"in p&&r(5,c=p.fontSize)},[n,i,a,o,s,c]}class oa extends wt{constructor(e){super(),At(this,e,o2,s2,Et,{xy:0,wh:1,text:2,color:3,textAlign:4,fontSize:5})}}function l2(t){let e,r,n,i,a,o,s,c,p,f,h;return{c(){e=vt("circle"),i=Le(),a=vt("foreignObject"),o=ie("p"),s=We(t[4]),this.h()},l(d){e=mt(d,"circle",{cx:!0,cy:!0,r:!0}),$(e).forEach(k),i=Ue(d),a=mt(d,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var g=$(a);o=ue(g,"P",{style:!0,class:!0});var b=$(o);s=He(b,t[4]),b.forEach(k),g.forEach(k),this.h()},h(){M(e,"cx",r=t[0][0]),M(e,"cy",n=t[0][1]),M(e,"r",t[1]),Yt(e,"fill",t[3]),Yt(o,"color",t[2]),Yt(o,"user-select","none"),Yt(o,"margin","0"),M(o,"class","heavy svelte-6if1p2"),M(a,"x",c=t[0][0]-t[1]),M(a,"y",p=t[0][1]-t[1]),M(a,"width",f=t[1]*2),M(a,"height",h=t[1]*2)},m(d,g){be(d,e,g),be(d,i,g),be(d,a,g),j(a,o),j(o,s)},p(d,[g]){g&1&&r!==(r=d[0][0])&&M(e,"cx",r),g&1&&n!==(n=d[0][1])&&M(e,"cy",n),g&2&&M(e,"r",d[1]),g&8&&Yt(e,"fill",d[3]),g&16&&Cn(s,d[4]),g&4&&Yt(o,"color",d[2]),g&3&&c!==(c=d[0][0]-d[1])&&M(a,"x",c),g&3&&p!==(p=d[0][1]-d[1])&&M(a,"y",p),g&2&&f!==(f=d[1]*2)&&M(a,"width",f),g&2&&h!==(h=d[1]*2)&&M(a,"height",h)},i:Me,o:Me,d(d){d&&k(e),d&&k(i),d&&k(a)}}}function f2(t,e,r){let{xy:n=[100,100]}=e,{radius:i=25}=e,{textColor:a="rgba(96,117,151, 1)"}=e,{bgColor:o="black"}=e,{weight:s=""}=e;return t.$$set=c=>{"xy"in c&&r(0,n=c.xy),"radius"in c&&r(1,i=c.radius),"textColor"in c&&r(2,a=c.textColor),"bgColor"in c&&r(3,o=c.bgColor),"weight"in c&&r(4,s=c.weight)},[n,i,a,o,s]}class c2 extends wt{constructor(e){super(),At(this,e,f2,l2,Et,{xy:0,radius:1,textColor:2,bgColor:3,weight:4})}}function kn(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=360+Math.atan2(i,n)*180/Math.PI,o=Math.sqrt(n*n+i*i);return[a%360,o/r]}function xr(t,e,r){const n=e[0]%360*Math.PI/180,i=[r*e[1]*Math.cos(n),r*e[1]*Math.sin(n)];return Gr(t,i)}function ia(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=Math.sqrt(n*n+i*i),o=r/a,s=e[0]+n*o,c=e[1]+i*o;return[s,c]}function h2(t,e,r){const n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)<r}function Ef(t,e){const r=e%360*Math.PI/180;let n,i;const a=Math.cos(r),o=Math.sin(r);return n=(t[0]+5)*-1.2*a,i=(t[1]+5)*-1.2*o,n-=t[0],i-=t[1],[n,i]}function Vr(t){return t<0?360+-1*(Math.abs(t)%360):t>360?t%360:t}function d2(t){return Math.round(t*100)}function Er(t){return Math.round(Math.max(1-Math.pow(1-t,2),.25)*100)/100}function zs(t){let e="parsedWeight";switch(t){case dt.Circle:e="circleWeight";break;case dt.Bars:e="barWeight";break;case dt.Embed:e="embedWeight";break;case dt.Pie:e="pieWeight";break;case dt.Ring:e="ringWeight";break}return e}function p2(t){const e=t.weightMode,r=zs(e);return t.weightedPrompts?Math.max(...Object.values(t.weightedPrompts).map(n=>n[r])):0}function g2(t){const e=t.weightMode,r=zs(e);return t.weightedPrompts?Object.values(t.weightedPrompts).reduce((n,i)=>n+i[r],0):0}function g0(t,e){const r=t.weightMode,n=zs(r);return t.weightedPrompts[e]?t.weightedPrompts[e][n]/p2(t):0}function Ci(t,e){const r=t.weightMode,n=zs(r);if(!t.weightedPrompts[e])return 0;const i=t.weightedPrompts[e][n];return d2((i||0)/g2(t))}function v2(t,e,r){const a=r*.6,o=Math.floor(t/a);return Math.ceil(e/o)*r*1.2}function kr(t,e,r){const n=v2(t,e,r)+10;return[t,n]}function us(t,e){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function la(t){return An(t,.5)}function li(t){const e=t.currentTarget;if(!e)throw new Error("No SVG element found");var r=e.createSVGPoint();r.x=t.clientX,r.y=t.clientY;const n=e.getScreenCTM();if(!n)throw new Error("No DOM Matrix found");const i=r.matrixTransform(n.inverse());return[i.x,i.y]}function v0(t,e,r){const n=t.slice();return n[18]=e[r][0],n[19]=e[r][1],n}function m0(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,a;e=new Af({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),s=[];for(let f=0;f<o.length;f+=1)s[f]=_0(v0(t,o,f));const c=f=>Se(s[f],1,1,()=>{s[f]=null});let p=n&&D0(t);return{c(){tt(e.$$.fragment);for(let f=0;f<s.length;f+=1)s[f].c();r=Rt(),p&&p.c(),i=Rt()},l(f){rt(e.$$.fragment,f);for(let h=0;h<s.length;h+=1)s[h].l(f);r=Rt(),p&&p.l(f),i=Rt()},m(f,h){nt(e,f,h);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(f,h);be(f,r,h),p&&p.m(f,h),be(f,i,h),a=!0},p(f,h){const d={};if(h&1&&(d.xy=f[0]),h&2&&(d.radius=f[1]),e.$set(d),h&895){o=Object.entries(f[5].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=v0(f,o,g);s[g]?(s[g].p(b,h),we(s[g],1)):(s[g]=_0(b),s[g].c(),we(s[g],1),s[g].m(r.parentNode,r))}for(Nr(),g=o.length;g<s.length;g+=1)c(g);Rr()}h&32&&(n=Object.entries(f[5].weightedPrompts).length>0),n?p?(p.p(f,h),h&32&&we(p,1)):(p=D0(f),p.c(),we(p,1),p.m(i.parentNode,i)):p&&(Nr(),Se(p,1,1,()=>{p=null}),Rr())},i(f){if(!a){we(e.$$.fragment,f);for(let h=0;h<o.length;h+=1)we(s[h]);we(p),a=!0}},o(f){Se(e.$$.fragment,f),s=s.filter(Boolean);for(let h=0;h<s.length;h+=1)Se(s[h]);Se(p),a=!1},d(f){it(e,f),Is(s,f),f&&k(r),p&&p.d(f),f&&k(i)}}}function _0(t){let e,r,n,i,a;e=new Bp({props:{p1:xr(t[0],t[5].circleMarker,t[1]),p2:t[6][t[18]].xy}});function o(){return t[12](t[18])}return r=new yu({props:{xy:t[6][t[18]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:o}}),n=new oa({props:{xy:t[9](t[6][t[18]].xy,kr(t[3],t[19].text.length,t[4])),color:`rgba(255,255,255,${Er(t[6][t[18]].unitWeight)}`,wh:kr(t[3],t[19].text.length,t[4]),fontSize:t[4],text:t[19].text}}),i=new c2({props:{xy:An(Gr(xr(t[0],t[5].circleMarker,t[1]),t[6][t[18]].xy),.5),weight:Ci(t[5],t[18]),radius:15,textColor:`rgba(255,255,255,${Er(t[6][t[18]].unitWeight)}`,bgColor:"rgb(8, 11, 22)"}}),{c(){tt(e.$$.fragment),tt(r.$$.fragment),tt(n.$$.fragment),tt(i.$$.fragment)},l(s){rt(e.$$.fragment,s),rt(r.$$.fragment,s),rt(n.$$.fragment,s),rt(i.$$.fragment,s)},m(s,c){nt(e,s,c),nt(r,s,c),nt(n,s,c),nt(i,s,c),a=!0},p(s,c){t=s;const p={};c&35&&(p.p1=xr(t[0],t[5].circleMarker,t[1])),c&96&&(p.p2=t[6][t[18]].xy),e.$set(p);const f={};c&96&&(f.xy=t[6][t[18]].xy),c&4&&(f.radius=t[2]),c&32&&(f.handleMouseDown=o),r.$set(f);const h={};c&120&&(h.xy=t[9](t[6][t[18]].xy,kr(t[3],t[19].text.length,t[4]))),c&96&&(h.color=`rgba(255,255,255,${Er(t[6][t[18]].unitWeight)}`),c&56&&(h.wh=kr(t[3],t[19].text.length,t[4])),c&16&&(h.fontSize=t[4]),c&32&&(h.text=t[19].text),n.$set(h);const d={};c&99&&(d.xy=An(Gr(xr(t[0],t[5].circleMarker,t[1]),t[6][t[18]].xy),.5)),c&32&&(d.weight=Ci(t[5],t[18])),c&96&&(d.textColor=`rgba(255,255,255,${Er(t[6][t[18]].unitWeight)}`),i.$set(d)},i(s){a||(we(e.$$.fragment,s),we(r.$$.fragment,s),we(n.$$.fragment,s),we(i.$$.fragment,s),a=!0)},o(s){Se(e.$$.fragment,s),Se(r.$$.fragment,s),Se(n.$$.fragment,s),Se(i.$$.fragment,s),a=!1},d(s){it(e,s),it(r,s),it(n,s),it(i,s)}}}function D0(t){let e,r;return e=new yu({props:{xy:xr(t[0],t[5].circleMarker,t[1]),radius:10,color:"rgba(136,157,191, 1)",handleMouseDown:t[13]}}),{c(){tt(e.$$.fragment)},l(n){rt(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},p(n,i){const a={};i&35&&(a.xy=xr(n[0],n[5].circleMarker,n[1])),e.$set(a)},i(n){r||(we(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){it(e,n)}}}function m2(t){let e,r,n,i,a=t[6]&&t[5].weightedPrompts&&m0(t);return{c(){e=vt("svg"),a&&a.c(),this.h()},l(o){e=mt(o,"svg",{id:!0,class:!0});var s=$(e);a&&a.l(s),s.forEach(k),this.h()},h(){M(e,"id","svg"),M(e,"class","w-full h-full")},m(o,s){be(o,e,s),a&&a.m(e,null),r=!0,n||(i=[Oe(e,"mousemove",t[10]),Oe(e,"mouseup",t[7]),Oe(e,"dblclick",t[11])],n=!0)},p(o,[s]){o[6]&&o[5].weightedPrompts?a?(a.p(o,s),s&96&&we(a,1)):(a=m0(o),a.c(),we(a,1),a.m(e,null)):a&&(Nr(),Se(a,1,1,()=>{a=null}),Rr())},i(o){r||(we(a),r=!0)},o(o){Se(a),r=!1},d(o){o&&k(e),a&&a.d(),n=!1,fr(i)}}}function b0(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const o=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function _2(t,e,r){let n,i;Dt(t,Cr,E=>r(5,i=E));let{center:a=[450,450]}=e,{radius:o=250}=e,{pointRadius:s=10}=e,{textWidth:c=150}=e,{fontSize:p=13}=e,f=[0,0],h=null;function d(E){h=null}function g(E){h=E}function b(E,O){let P=kn(E,a,o)[0]-180;P<0&&(P+=360);const x=Ef(la(O),P);return Gr(E,x)}function m(E){const O=h2(E,a,o)?kn(E,a,o):kn(ia(E,a,o),a,o);r(6,n=C(i.weightedPrompts,a,o,i.circleWeightScaling,i.circleExponentialScaling,O,i.circleAngles))}function _(E){if(f=li(E),h==="main")m(f);else if(h){const O={...i.weightedPrompts[h]},P=ia(f,a,o),x=kn(P,a,o)[0],R={...i.circleAngles};R[O.id]=x;const G={...i.weightedPrompts};G[h]=O,r(6,n=C(G,a,o,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,R))}}function D(E){f=li(E),m(f)}function C(E,O,P,x,R,G,re){if(!E||!O||!P||!x||!G)return null;let U=Object.entries(E).reduce((V,[W,Q])=>(V[W]={xy:xr(O,[re[W],1],P)},V),{});U=Object.entries(U).reduce((V,[W,Q])=>(V[W]={...V[W],distance:us(Q.xy,xr(O,G,P))},V),U);const X=Object.values(U).reduce((V,W)=>V+W.distance,0);U=Object.entries(U).reduce((V,[W,Q])=>(V[W]={...V[W],unitDistance:Math.round(Q.distance/X*100)/100},V),U),U=Object.entries(U).reduce((V,[W,Q])=>(V[W]={...V[W],invertedUnitDistance:Math.round((1-Q.unitDistance)*100)/100},V),U),U=Object.entries(U).reduce((V,[W,Q])=>(R?V[W]={...V[W],unitWeight:Math.round(Math.pow(1-Q.distance/(2*P),x)*100)/100}:V[W]={...V[W],unitWeight:Math.round((1-Q.distance/(2*P))*100)/100},V),U);const H={...E};return Object.entries(U).forEach(([V,W])=>{H[V].circleWeight=W.unitWeight}),Ot.update({...i,circleMarker:G,weightedPrompts:H,circleAngles:re}),U}const A=E=>g(E),B=()=>g("main");return t.$$set=E=>{"center"in E&&r(0,a=E.center),"radius"in E&&r(1,o=E.radius),"pointRadius"in E&&r(2,s=E.pointRadius),"textWidth"in E&&r(3,c=E.textWidth),"fontSize"in E&&r(4,p=E.fontSize)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(i.circleAngles).length!==Object.keys(i.weightedPrompts).length&&Ot.update({...i,circleAngles:b0(i.weightedPrompts,{})}),t.$$.dirty&35&&r(6,n=C(i.weightedPrompts,a,o,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,i.circleAngles||b0(i.weightedPrompts,{})))},[a,o,s,c,p,i,n,d,g,b,_,D,A,B]}class D2 extends wt{constructor(e){super(),At(this,e,_2,m2,Et,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function y0(t){let e,r,n,i,a,o,s,c;return{c(){e=ie("div"),r=ie("label"),n=ie("span"),i=We("Scaling Power"),a=Le(),o=ie("input"),this.h()},l(p){e=ue(p,"DIV",{class:!0});var f=$(e);r=ue(f,"LABEL",{class:!0});var h=$(r);n=ue(h,"SPAN",{class:!0});var d=$(n);i=He(d,"Scaling Power"),d.forEach(k),h.forEach(k),a=Ue(f),o=ue(f,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),f.forEach(k),this.h()},h(){M(n,"class","label-text"),M(r,"class","label"),M(o,"type","range"),M(o,"min","0.5"),M(o,"max","3"),M(o,"step","0.1"),M(o,"class","range range-xs"),M(e,"class","w-full px-2")},m(p,f){be(p,e,f),j(e,r),j(r,n),j(n,i),j(e,a),j(e,o),Hn(o,t[0]),s||(c=[Oe(o,"change",t[6]),Oe(o,"input",t[6])],s=!0)},p(p,f){f&1&&Hn(o,p[0])},d(p){p&&k(e),s=!1,fr(c)}}}function b2(t){let e,r,n,i,a,o,s,c,p,f,h,d,g,b,m;r=new D2({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let _=t[1]&&y0(t);return{c(){e=ie("div"),tt(r.$$.fragment),i=Le(),a=ie("div"),o=ie("div"),s=ie("label"),c=ie("span"),p=We("Exponential Scaling"),f=Le(),h=ie("input"),d=Le(),_&&_.c(),this.h()},l(D){e=ue(D,"DIV",{class:!0});var C=$(e);rt(r.$$.fragment,C),C.forEach(k),i=Ue(D),a=ue(D,"DIV",{class:!0});var A=$(a);o=ue(A,"DIV",{class:!0});var B=$(o);s=ue(B,"LABEL",{class:!0});var E=$(s);c=ue(E,"SPAN",{class:!0});var O=$(c);p=He(O,"Exponential Scaling"),O.forEach(k),E.forEach(k),f=Ue(B),h=ue(B,"INPUT",{type:!0,class:!0}),B.forEach(k),d=Ue(A),_&&_.l(A),A.forEach(k),this.h()},h(){M(e,"class","w-full h-full"),aa(()=>t[4].call(e)),M(c,"class","label-text"),M(s,"class","label"),M(h,"type","checkbox"),M(h,"class","toggle toggle-xs"),M(o,"class","w-52 px-2"),M(a,"class","px-2 py-4 pb-0 flex")},m(D,C){be(D,e,C),nt(r,e,null),n=sa(e,t[4].bind(e)),be(D,i,C),be(D,a,C),j(a,o),j(o,s),j(s,c),j(c,p),j(o,f),j(o,h),h.checked=t[1],j(a,d),_&&_.m(a,null),g=!0,b||(m=Oe(h,"change",t[5]),b=!0)},p(D,[C]){const A={};C&12&&(A.center=[Math.round(D[2]/2),Math.round(D[3]/2)]),C&12&&(A.radius=Math.round(Math.min(D[2],D[3])/2)-150),r.$set(A),C&2&&(h.checked=D[1]),D[1]?_?_.p(D,C):(_=y0(D),_.c(),_.m(a,null)):_&&(_.d(1),_=null)},i(D){g||(we(r.$$.fragment,D),g=!0)},o(D){Se(r.$$.fragment,D),g=!1},d(D){D&&k(e),it(r),n(),D&&k(i),D&&k(a),_&&_.d(),b=!1,m()}}}function y2(t,e,r){let n;Dt(t,Cr,h=>r(7,n=h));let i,a,o=n.circleWeightScaling||2,s=pf(n.circleExponentialScaling)?!0:n.circleExponentialScaling;function c(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function p(){s=this.checked,r(1,s)}function f(){o=Gd(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&Ot.update({...Ot.get(),circleExponentialScaling:s,circleWeightScaling:o})},[o,s,i,a,c,p,f]}class w2 extends wt{constructor(e){super(),At(this,e,y2,b2,Et,{})}}function A2(t){let e,r,n,i,a,o,s;return{c(){e=vt("rect"),this.h()},l(c){e=mt(c,"rect",{x:!0,y:!0,width:!0,height:!0}),$(e).forEach(k),this.h()},h(){M(e,"x",r=t[0][0]),M(e,"y",n=t[0][1]),M(e,"width",i=Math.max(t[1][0],0)),M(e,"height",a=Math.max(t[1][1],0)),Yt(e,"fill",t[2])},m(c,p){be(c,e,p),o||(s=[Oe(e,"mouseover",function(){al(t[4])&&t[4].apply(this,arguments)}),Oe(e,"mouseout",function(){al(t[5])&&t[5].apply(this,arguments)}),Oe(e,"mousedown",function(){al(t[3])&&t[3].apply(this,arguments)})],o=!0)},p(c,[p]){t=c,p&1&&r!==(r=t[0][0])&&M(e,"x",r),p&1&&n!==(n=t[0][1])&&M(e,"y",n),p&2&&i!==(i=Math.max(t[1][0],0))&&M(e,"width",i),p&2&&a!==(a=Math.max(t[1][1],0))&&M(e,"height",a),p&4&&Yt(e,"fill",t[2])},i:Me,o:Me,d(c){c&&k(e),o=!1,fr(s)}}}function E2(t,e,r){let{xy:n=[500,500]}=e,{wh:i=[100,100]}=e,{color:a="rgba(46,67,101, 0.4)"}=e,{handleMouseDown:o=p=>{}}=e,{handleMouseOver:s=p=>{}}=e,{handleMouseOut:c=p=>{}}=e;return t.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,i=p.wh),"color"in p&&r(2,a=p.color),"handleMouseDown"in p&&r(3,o=p.handleMouseDown),"handleMouseOver"in p&&r(4,s=p.handleMouseOver),"handleMouseOut"in p&&r(5,c=p.handleMouseOut)},[n,i,a,o,s,c]}class hl extends wt{constructor(e){super(),At(this,e,E2,A2,Et,{xy:0,wh:1,color:2,handleMouseDown:3,handleMouseOver:4,handleMouseOut:5})}}function w0(t,e,r){const n=t.slice();return n[51]=e[r][0],n[52]=e[r][1],n[53]=e[r][2],n}function A0(t,e){let r,n,i,a,o,s;n=new oa({props:{xy:[e[3][0]+e[0],e[3][1]+e[52]*e[4]+e[52]],color:`rgba(255,255,255,${Er(e[53].barWeight/e[12]||0)})`,wh:e[5][e[51]],text:e[53].text,textAlign:"right",fontSize:e[1]}});function c(...d){return e[39](e[51],...d)}i=new hl({props:{color:e[13](0),handleMouseOver:c,handleMouseOut:e[40],xy:[e[10],e[3][1]+e[52]*e[4]+e[52]],wh:[e[11],e[4]-2]}});function p(...d){return e[41](e[51],...d)}a=new hl({props:{color:e[8]===e[51]||e[7]===e[51]||e[9]===e[51]?e[13](Er((e[53].barWeight||0)/e[12]+.15)):e[13](Er(e[53].barWeight||0)),handleMouseOver:p,handleMouseOut:e[42],xy:[e[10],e[3][1]+e[52]*e[4]+e[52]],wh:[(e[53].barWeight||0)*e[11],e[4]-2]}});function f(...d){return e[43](e[51],...d)}function h(...d){return e[45](e[51],...d)}return o=new hl({props:{color:e[9]===e[51]?e[15]:e[14],handleMouseOver:f,handleMouseOut:e[44],handleMouseDown:h,xy:[e[10]+(e[53].barWeight||0)*e[11],e[3][1]+e[52]*e[4]+e[52]],wh:[e[2],e[4]-2]}}),{key:t,first:null,c(){r=Rt(),tt(n.$$.fragment),tt(i.$$.fragment),tt(a.$$.fragment),tt(o.$$.fragment),this.h()},l(d){r=Rt(),rt(n.$$.fragment,d),rt(i.$$.fragment,d),rt(a.$$.fragment,d),rt(o.$$.fragment,d),this.h()},h(){this.first=r},m(d,g){be(d,r,g),nt(n,d,g),nt(i,d,g),nt(a,d,g),nt(o,d,g),s=!0},p(d,g){e=d;const b={};g[0]&89&&(b.xy=[e[3][0]+e[0],e[3][1]+e[52]*e[4]+e[52]]),g[0]&4160&&(b.color=`rgba(255,255,255,${Er(e[53].barWeight/e[12]||0)})`),g[0]&96&&(b.wh=e[5][e[51]]),g[0]&64&&(b.text=e[53].text),g[0]&2&&(b.fontSize=e[1]),n.$set(b);const m={};g[0]&64&&(m.handleMouseOver=c),g[0]&1112&&(m.xy=[e[10],e[3][1]+e[52]*e[4]+e[52]]),g[0]&2064&&(m.wh=[e[11],e[4]-2]),i.$set(m);const _={};g[0]&5056&&(_.color=e[8]===e[51]||e[7]===e[51]||e[9]===e[51]?e[13](Er((e[53].barWeight||0)/e[12]+.15)):e[13](Er(e[53].barWeight||0))),g[0]&64&&(_.handleMouseOver=p),g[0]&1112&&(_.xy=[e[10],e[3][1]+e[52]*e[4]+e[52]]),g[0]&2128&&(_.wh=[(e[53].barWeight||0)*e[11],e[4]-2]),a.$set(_);const D={};g[0]&576&&(D.color=e[9]===e[51]?e[15]:e[14]),g[0]&64&&(D.handleMouseOver=f),g[0]&64&&(D.handleMouseDown=h),g[0]&3160&&(D.xy=[e[10]+(e[53].barWeight||0)*e[11],e[3][1]+e[52]*e[4]+e[52]]),g[0]&20&&(D.wh=[e[2],e[4]-2]),o.$set(D)},i(d){s||(we(n.$$.fragment,d),we(i.$$.fragment,d),we(a.$$.fragment,d),we(o.$$.fragment,d),s=!0)},o(d){Se(n.$$.fragment,d),Se(i.$$.fragment,d),Se(a.$$.fragment,d),Se(o.$$.fragment,d),s=!1},d(d){d&&k(r),it(n,d),it(i,d),it(a,d),it(o,d)}}}function C2(t){let e,r=[],n=new Map,i,a,o,s=t[6];const c=p=>p[51];for(let p=0;p<s.length;p+=1){let f=w0(t,s,p),h=c(f);n.set(h,r[p]=A0(h,f))}return{c(){e=vt("svg");for(let p=0;p<r.length;p+=1)r[p].c();this.h()},l(p){e=mt(p,"svg",{id:!0,class:!0});var f=$(e);for(let h=0;h<r.length;h+=1)r[h].l(f);f.forEach(k),this.h()},h(){M(e,"id","svg"),M(e,"class","w-full h-full")},m(p,f){be(p,e,f);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(e,null);i=!0,a||(o=[Oe(e,"mousemove",t[25]),Oe(e,"mouseup",t[24]),Oe(e,"dblclick",t[23])],a=!0)},p(p,f){f[0]&8388607&&(s=p[6],Nr(),r=Oi(r,f,c,1,p,s,n,e,Kd,A0,null,w0),Rr())},i(p){if(!i){for(let f=0;f<s.length;f+=1)we(r[f]);i=!0}},o(p){for(let f=0;f<r.length;f+=1)Se(r[f]);i=!1},d(p){p&&k(e);for(let f=0;f<r.length;f+=1)r[f].d();a=!1,fr(o)}}}function F2(t,e,r){let n,i,a,o,s,c,p,f,h,d,g,b,m;Dt(t,Cr,Ee=>r(38,m=Ee));let{center:_=[0,0]}=e,{dimensions:D=[100,100]}=e,{maxWidth:C=1e3}=e,{pointRadius:A=10}=e,{textWidth:B=250}=e,{horizontalPad:E=20}=e,{verticalPad:O=2}=e,{textBarPad:P=10}=e,{fontSize:x=13}=e,{handleWidth:R=20}=e,G=Ee=>`rgba(46,67,101, ${Ee})`,re=Ee=>`rgba(76,97,131, ${Ee})`,U=null,X=null,H=null,V=re(.3),W=re(.8),Q=null,Y=null,J=null;function le(Ee){r(8,X=Ee)}function me(Ee){r(7,U=Ee)}function Ce(Ee){r(9,H=Ee)}function Ae(){r(8,X=null)}function Pe(){r(7,U=null)}function Ve(){r(9,H=null)}function Ie(Ee){Q=Ee}function Xe(Ee){let Te=Q!==null?Q:X!==null?X:H!==null?H:U!==null?U:null;if(Te===null)return;const Bt=li(Ee);Re(Te,Bt)}function ze(){Q=null,Y&&clearInterval(Y),Y=null,J=null}function Re(Ee,Te){let Vt=Math.min(d,Math.max(0,Te[0]-g))/d,Ht={...m.weightedPrompts},L={...Ht[Ee]};L.barWeight=Vt,Ht[Ee]=L,Ot.update({...m,weightedPrompts:Ht})}function je(Ee){let Te=Q;if(Te===null)return;const Bt=li(Ee);if(Re(Te,Bt),Q!==null){let Vt=g+d+R,Ht=g;Bt[0]>Vt&&!Y?(J=Date.now(),Y=setInterval(()=>{if(!J||Date.now()-J<1e3)return;let L={...m.weightedPrompts};const z=Object.entries(L).reduce((Z,[fe,ae])=>{const he=parseInt(fe);return he!==Q?Z[he]={...ae,barWeight:Math.max(0,(ae.barWeight||0)-.01)}:Z[he]={...ae,barWeight:Math.min(1,(ae.barWeight||0)+.01)},Z},{});Ot.update({...m,weightedPrompts:z})},100)):Bt[0]<Ht&&!Y?(J=Date.now(),Y=setInterval(()=>{if(!J||Date.now()-J<1e3)return;let L={...m.weightedPrompts};const z=Object.entries(L).reduce((Z,[fe,ae])=>{const he=parseInt(fe);return he!==Q?Z[he]={...ae,barWeight:Math.min(1,(ae.barWeight||0)+.01)}:Z[he]={...ae,barWeight:Math.max(0,(ae.barWeight||0)-.01)},Z},{});Ot.update({...m,weightedPrompts:z})},100)):Bt[0]<Vt&&Bt[0]>Ht&&Y&&(clearInterval(Y),Y=null,J=null)}}const pt=(Ee,Te)=>me(Ee),ut=Ee=>Pe(),lt=(Ee,Te)=>le(Ee),at=Ee=>Ae(),st=(Ee,Te)=>Ce(Ee),Ke=Ee=>Ve(),$e=(Ee,Te)=>Ie(Ee);return t.$$set=Ee=>{"center"in Ee&&r(26,_=Ee.center),"dimensions"in Ee&&r(27,D=Ee.dimensions),"maxWidth"in Ee&&r(28,C=Ee.maxWidth),"pointRadius"in Ee&&r(29,A=Ee.pointRadius),"textWidth"in Ee&&r(30,B=Ee.textWidth),"horizontalPad"in Ee&&r(0,E=Ee.horizontalPad),"verticalPad"in Ee&&r(31,O=Ee.verticalPad),"textBarPad"in Ee&&r(32,P=Ee.textBarPad),"fontSize"in Ee&&r(1,x=Ee.fontSize),"handleWidth"in Ee&&r(2,R=Ee.handleWidth)},t.$$.update=()=>{t.$$.dirty[1]&128&&r(6,n=Object.entries(m.weightedPrompts).map(([Ee,Te],Bt)=>[parseInt(Ee),Bt,Te])),t.$$.dirty[1]&128&&r(36,i=Object.keys(m.weightedPrompts).length),t.$$.dirty[0]&134217728&&r(35,a=[D[0]-50,D[1]-50]),t.$$.dirty[0]&1073741890&&r(5,o=n.reduce((Ee,[Te,Bt,Vt])=>{const[Ht,L]=kr(B,Vt.text.length,x);return Ee[Te]=[Ht,L],Ee},{})),t.$$.dirty[0]&32&&r(37,s=Math.max(...Object.values(o).map(([Ee,Te])=>Te))),t.$$.dirty[1]&112&&r(4,c=Math.min(a[1]/i,s)),t.$$.dirty[0]&16|t.$$.dirty[1]&33&&r(34,p=c*i+O*Math.max(i-1,0)),t.$$.dirty[0]&268435456|t.$$.dirty[1]&16&&r(33,f=Math.min(a[0],C)),t.$$.dirty[0]&67108864|t.$$.dirty[1]&12&&r(3,h=[_[0]-f/2,_[1]-p/2]),t.$$.dirty[0]&1073741829|t.$$.dirty[1]&6&&r(11,d=f-P-B-2*E-R),t.$$.dirty[0]&1073741833|t.$$.dirty[1]&2&&r(10,g=h[0]+P+B+E),t.$$.dirty[1]&128&&r(12,b=Math.max(...Object.values(m.weightedPrompts).map(Ee=>Ee.barWeight||0)))},[E,x,R,h,c,o,n,U,X,H,g,d,b,G,V,W,le,me,Ce,Ae,Pe,Ve,Ie,Xe,ze,je,_,D,C,A,B,O,P,f,p,a,i,s,m,pt,ut,lt,at,st,Ke,$e]}class S2 extends wt{constructor(e){super(),At(this,e,F2,C2,Et,{center:26,dimensions:27,maxWidth:28,pointRadius:29,textWidth:30,horizontalPad:0,verticalPad:31,textBarPad:32,fontSize:1,handleWidth:2},null,[-1,-1])}}function B2(t){let e,r,n,i;return r=new S2({props:{dimensions:t[2],center:t[3]}}),{c(){e=ie("div"),tt(r.$$.fragment),this.h()},l(a){e=ue(a,"DIV",{class:!0});var o=$(e);rt(r.$$.fragment,o),o.forEach(k),this.h()},h(){M(e,"class","w-full h-full pt-10"),aa(()=>t[4].call(e))},m(a,o){be(a,e,o),nt(r,e,null),n=sa(e,t[4].bind(e)),i=!0},p(a,[o]){const s={};o&4&&(s.dimensions=a[2]),o&8&&(s.center=a[3]),r.$set(s)},i(a){i||(we(r.$$.fragment,a),i=!0)},o(a){Se(r.$$.fragment,a),i=!1},d(a){a&&k(e),it(r),n()}}}function O2(t,e,r){let n,i,a,o;function s(){a=this.clientWidth,o=this.clientHeight,r(0,a),r(1,o)}return t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[a||0,o||0]),t.$$.dirty&4&&r(3,i=la(n))},[a,o,n,i,s]}class M2 extends wt{constructor(e){super(),At(this,e,O2,B2,Et,{})}}function P2(t){let e,r,n,i,a;return{c(){e=vt("line"),this.h()},l(o){e=mt(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),$(e).forEach(k),this.h()},h(){M(e,"x1",r=t[0][0]),M(e,"y1",n=t[0][1]),M(e,"x2",i=t[1][0]),M(e,"y2",a=t[1][1]),M(e,"stroke",t[3]),M(e,"stroke-width",t[2])},m(o,s){be(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&M(e,"x1",r),s&1&&n!==(n=o[0][1])&&M(e,"y1",n),s&2&&i!==(i=o[1][0])&&M(e,"x2",i),s&2&&a!==(a=o[1][1])&&M(e,"y2",a),s&8&&M(e,"stroke",o[3]),s&4&&M(e,"stroke-width",o[2])},i:Me,o:Me,d(o){o&&k(e)}}}function T2(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class x2 extends wt{constructor(e){super(),At(this,e,T2,P2,Et,{p1:0,p2:1,stroke:2,color:3})}}function E0(t,e,r){const n=t.slice();return n[26]=e[r][0],n[27]=e[r][1],n}function C0(t){let e,r,n;e=new Af({props:{xy:t[0],radius:t[1]}});let i=Object.entries(t[5].weightedPrompts),a=[];for(let s=0;s<i.length;s+=1)a[s]=F0(E0(t,i,s));const o=s=>Se(a[s],1,1,()=>{a[s]=null});return{c(){tt(e.$$.fragment);for(let s=0;s<a.length;s+=1)a[s].c();r=Rt()},l(s){rt(e.$$.fragment,s);for(let c=0;c<a.length;c+=1)a[c].l(s);r=Rt()},m(s,c){nt(e,s,c);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,c);be(s,r,c),n=!0},p(s,c){const p={};if(c&1&&(p.xy=s[0]),c&2&&(p.radius=s[1]),e.$set(p),c&6015){i=Object.entries(s[5].weightedPrompts);let f;for(f=0;f<i.length;f+=1){const h=E0(s,i,f);a[f]?(a[f].p(h,c),we(a[f],1)):(a[f]=F0(h),a[f].c(),we(a[f],1),a[f].m(r.parentNode,r))}for(Nr(),f=i.length;f<a.length;f+=1)o(f);Rr()}},i(s){if(!n){we(e.$$.fragment,s);for(let c=0;c<i.length;c+=1)we(a[c]);n=!0}},o(s){Se(e.$$.fragment,s),a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)Se(a[c]);n=!1},d(s){it(e,s),Is(a,s),s&&k(r)}}}function F0(t){let e,r,n,i,a,o,s,c,p;e=new x2({props:{p1:t[0],p2:t[6][t[26]].xy}});function f(...g){return t[13](t[26],...g)}function h(...g){return t[14](t[26],...g)}function d(){return t[15](t[26])}return a=new yu({props:{xy:t[6][t[26]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:d}}),o=new oa({props:{xy:t[9](t[6][t[26]].textXY,kr(t[3],t[27].text.length,t[4])),color:`rgba(255,255,255,${Er(t[6][t[26]].unitWeight)}`,wh:kr(t[3],t[27].text.length,t[4]),fontSize:t[4],text:t[27].text}}),{c(){tt(e.$$.fragment),r=vt("path"),tt(a.$$.fragment),tt(o.$$.fragment),this.h()},l(g){rt(e.$$.fragment,g),r=mt(g,"path",{d:!0,fill:!0}),$(r).forEach(k),rt(a.$$.fragment,g),rt(o.$$.fragment,g),this.h()},h(){M(r,"d",n=S0(t[0],t[1],t[6][t[26]].angle,t[6][t[26]].angle+t[6][t[26]].angleDiff)),M(r,"fill",i=`rgba(26,47,91,${Er(t[6][t[26]].unitWeight)/4}`)},m(g,b){nt(e,g,b),be(g,r,b),nt(a,g,b),nt(o,g,b),s=!0,c||(p=[Oe(r,"mousewheel",f),Oe(r,"mousedown",h)],c=!0)},p(g,b){t=g;const m={};b&1&&(m.p1=t[0]),b&96&&(m.p2=t[6][t[26]].xy),e.$set(m),(!s||b&99&&n!==(n=S0(t[0],t[1],t[6][t[26]].angle,t[6][t[26]].angle+t[6][t[26]].angleDiff)))&&M(r,"d",n),(!s||b&96&&i!==(i=`rgba(26,47,91,${Er(t[6][t[26]].unitWeight)/4}`))&&M(r,"fill",i);const _={};b&96&&(_.xy=t[6][t[26]].xy),b&4&&(_.radius=t[2]),b&32&&(_.handleMouseDown=d),a.$set(_);const D={};b&120&&(D.xy=t[9](t[6][t[26]].textXY,kr(t[3],t[27].text.length,t[4]))),b&96&&(D.color=`rgba(255,255,255,${Er(t[6][t[26]].unitWeight)}`),b&56&&(D.wh=kr(t[3],t[27].text.length,t[4])),b&16&&(D.fontSize=t[4]),b&32&&(D.text=t[27].text),o.$set(D)},i(g){s||(we(e.$$.fragment,g),we(a.$$.fragment,g),we(o.$$.fragment,g),s=!0)},o(g){Se(e.$$.fragment,g),Se(a.$$.fragment,g),Se(o.$$.fragment,g),s=!1},d(g){it(e,g),g&&k(r),it(a,g),it(o,g),c=!1,fr(p)}}}function I2(t){let e,r,n,i,a=t[6]&&t[5].weightedPrompts&&C0(t);return{c(){e=vt("svg"),a&&a.c(),this.h()},l(o){e=mt(o,"svg",{id:!0,class:!0});var s=$(e);a&&a.l(s),s.forEach(k),this.h()},h(){M(e,"id","svg"),M(e,"class","w-full h-full")},m(o,s){be(o,e,s),a&&a.m(e,null),r=!0,n||(i=[Oe(e,"mousemove",t[11]),Oe(e,"mouseup",t[7])],n=!0)},p(o,[s]){o[6]&&o[5].weightedPrompts?a?(a.p(o,s),s&96&&we(a,1)):(a=C0(o),a.c(),we(a,1),a.m(e,null)):a&&(Nr(),Se(a,1,1,()=>{a=null}),Rr())},i(o){r||(we(a),r=!0)},o(o){Se(a),r=!1},d(o){o&&k(e),a&&a.d(),n=!1,fr(i)}}}function k2(t,e){if(t.length!==e.length)return!1;const r=t.length;let n=-1;for(let i=0;i<r;i++)if(e[i]===t[0]){n=i;break}if(n===-1)return!1;for(let i=0;i<r;i++)if(t[i]!==e[(i+n)%r])return!1;return!0}function S0(t,e,r,n){const i=t[0]+e*Math.cos(r*Math.PI/180),a=t[1]+e*Math.sin(r*Math.PI/180),o=t[0]+e*Math.cos(n*Math.PI/180),s=t[1]+e*Math.sin(n*Math.PI/180),c=n-r<=180?"0":"1";return`M${t[0]},${t[1]} L${i},${a} A${e},${e} 0 ${c} 1 ${o},${s} Z`}function N2(t,e,r){let n,i;Dt(t,Cr,U=>r(5,i=U));let{center:a=[450,450]}=e,{radius:o=250}=e,{pointRadius:s=10}=e,{textWidth:c=150}=e,{fontSize:p=13}=e,f=[0,0],h=null,d={},g=null,b;function m(U){g=null,b=null,h=null,d={}}function _(U){g=U}function D(U,X){let H=kn(U,a,o)[0]-180;H<0&&(H+=360);const V=Ef(la(X),H);return Gr(U,V)}function C(U,X){return U?Object.entries(U).reduce((H,[V,W],Q)=>{const Y=H[V]||Q*(360/Object.keys(U).length)-90;return H[V]=Vr(Y),H},X):null}function A(U,X){b=X}function B(U){const X=b,H={...i.pieAngles},V=Object.entries(H).sort((Pe,Ve)=>Vr(Pe[1])-Vr(Ve[1])).map(Pe=>Pe[0]),W=V.indexOf(X),Q=W+1===V.length?0:W+1,Y=V[Q];d[X]||(d[X]=H[X]),d[Y]||(d[Y]=H[Y]);const le=kn(U,a,o)[0]-h,me={...H};me[X]=Vr(le+d[X]),me[Y]=Vr(le+d[Y]);const Ce=Object.entries(me).sort((Pe,Ve)=>Vr(Pe[1])-Vr(Ve[1])).map(Pe=>Pe[0]);k2(V,Ce)&&r(6,n=x(i.weightedPrompts,a,o,me))}function E(U){const X={...i.weightedPrompts[g]},H=ia(U,a,o),V=Vr(kn(H,a,o)[0]),W={...i.pieAngles};W[X.id]=V;const Q={...i.weightedPrompts};Q[g]=X,r(6,n=x(Q,a,o,W))}function O(U){U.preventDefault(),f=li(U),g?E(f):b?B(f):h=kn(f,a,o)[0]}function P(U,X){U.preventDefault();const H={...i.pieAngles},V=Object.entries(H).sort((J,le)=>Vr(J[1])-Vr(le[1])).map(J=>J[0]),W=V.indexOf(X),Q=W+1===V.length?0:W+1,Y=V[Q];H[X]=Vr(H[X]-U.deltaY/100),H[Y]=Vr(H[Y]+U.deltaY/100),r(6,n=x(i.weightedPrompts,a,o,H))}function x(U,X,H,V){if(!U||!X||!H)return null;const W=Object.entries(U).sort((me,Ce)=>Vr(V[me[0]])-Vr(V[Ce[0]])),Q=W.map((me,Ce)=>{const Ae=Ce+1===W.length?0:Ce+1,Pe=V[W[Ae][0]]-V[W[Ce][0]];return Pe<0?[me[0],360+Pe]:[me[0],Pe]}),Y=Math.max(...Q.map(me=>me[1])),J=Q.reduce((me,[Ce,Ae])=>{({...U[Ce]});const Pe=V[Ce],Ve=xr(X,[Pe,1],H),Ie=xr(X,[Pe+.5*Ae,1],H),Xe=Ae/Y;return me[Ce]={xy:Ve,textXY:Ie,angle:Pe,angleDiff:Ae,unitWeight:Xe},me},{}),le={...U};return Object.entries(J).forEach(([me,Ce])=>{le[me].pieWeight=Ce.unitWeight}),Ot.update({...i,weightedPrompts:le,pieAngles:V}),J}const R=(U,X)=>P(X,U),G=(U,X)=>A(X,U),re=U=>_(U);return t.$$set=U=>{"center"in U&&r(0,a=U.center),"radius"in U&&r(1,o=U.radius),"pointRadius"in U&&r(2,s=U.pointRadius),"textWidth"in U&&r(3,c=U.textWidth),"fontSize"in U&&r(4,p=U.fontSize)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(i.pieAngles||{}).length!==Object.keys(i.weightedPrompts).length&&Ot.update({...i,pieAngles:C(i.weightedPrompts,{})}),t.$$.dirty&35&&r(6,n=x(i.weightedPrompts,a,o,i.pieAngles||C(i.weightedPrompts,{})))},[a,o,s,c,p,i,n,m,_,D,A,O,P,R,G,re]}class R2 extends wt{constructor(e){super(),At(this,e,N2,I2,Et,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function L2(t){let e,r,n,i;return r=new R2({props:{center:[Math.round(t[0]/2),Math.round(t[1]/2)],radius:Math.round(Math.min(t[0],t[1])/2)-150}}),{c(){e=ie("div"),tt(r.$$.fragment),this.h()},l(a){e=ue(a,"DIV",{class:!0});var o=$(e);rt(r.$$.fragment,o),o.forEach(k),this.h()},h(){M(e,"class","w-full h-full"),aa(()=>t[2].call(e))},m(a,o){be(a,e,o),nt(r,e,null),n=sa(e,t[2].bind(e)),i=!0},p(a,[o]){const s={};o&3&&(s.center=[Math.round(a[0]/2),Math.round(a[1]/2)]),o&3&&(s.radius=Math.round(Math.min(a[0],a[1])/2)-150),r.$set(s)},i(a){i||(we(r.$$.fragment,a),i=!0)},o(a){Se(r.$$.fragment,a),i=!1},d(a){a&&k(e),it(r),n()}}}function U2(t,e,r){let n,i;function a(){n=this.clientWidth,i=this.clientHeight,r(0,n),r(1,i)}return[n,i,a]}class V2 extends wt{constructor(e){super(),At(this,e,U2,L2,Et,{})}}var ms={},j2={get exports(){return ms},set exports(t){ms=t}},_s={},q2={get exports(){return _s},set exports(t){_s=t}},vu=typeof Reflect=="object"?Reflect:null,B0=vu&&typeof vu.apply=="function"?vu.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},as;vu&&typeof vu.ownKeys=="function"?as=vu.ownKeys:Object.getOwnPropertySymbols?as=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:as=function(e){return Object.getOwnPropertyNames(e)};function z2(t){console&&console.warn&&console.warn(t)}var Op=Number.isNaN||function(e){return e!==e};function Lt(){Lt.init.call(this)}q2.exports=Lt;_s.once=K2;Lt.EventEmitter=Lt;Lt.prototype._events=void 0;Lt.prototype._eventsCount=0;Lt.prototype._maxListeners=void 0;var O0=10;function Ws(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Lt,"defaultMaxListeners",{enumerable:!0,get:function(){return O0},set:function(t){if(typeof t!="number"||t<0||Op(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");O0=t}});Lt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Lt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Op(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Mp(t){return t._maxListeners===void 0?Lt.defaultMaxListeners:t._maxListeners}Lt.prototype.getMaxListeners=function(){return Mp(this)};Lt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var c=a[e];if(c===void 0)return!1;if(typeof c=="function")B0(c,this,r);else for(var p=c.length,f=kp(c,p),n=0;n<p;++n)B0(f[n],this,r);return!0};function Pp(t,e,r,n){var i,a,o;if(Ws(r),a=t._events,a===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),o=a[e]),o===void 0)o=a[e]=r,++t._eventsCount;else if(typeof o=="function"?o=a[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Mp(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=o.length,z2(s)}return t}Lt.prototype.addListener=function(e,r){return Pp(this,e,r,!1)};Lt.prototype.on=Lt.prototype.addListener;Lt.prototype.prependListener=function(e,r){return Pp(this,e,r,!0)};function W2(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Tp(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=W2.bind(n);return i.listener=r,n.wrapFn=i,i}Lt.prototype.once=function(e,r){return Ws(r),this.on(e,Tp(this,e,r)),this};Lt.prototype.prependOnceListener=function(e,r){return Ws(r),this.prependListener(e,Tp(this,e,r)),this};Lt.prototype.removeListener=function(e,r){var n,i,a,o,s;if(Ws(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){s=n[o].listener,a=o;break}if(a<0)return this;a===0?n.shift():H2(n,a),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this};Lt.prototype.off=Lt.prototype.removeListener;Lt.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var a=Object.keys(n),o;for(i=0;i<a.length;++i)o=a[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function xp(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?G2(i):kp(i,i.length)}Lt.prototype.listeners=function(e){return xp(this,e,!0)};Lt.prototype.rawListeners=function(e){return xp(this,e,!1)};Lt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Ip.call(t,e)};Lt.prototype.listenerCount=Ip;function Ip(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Lt.prototype.eventNames=function(){return this._eventsCount>0?as(this._events):[]};function kp(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function H2(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function G2(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function K2(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,a),n(o)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}Np(t,e,a,{once:!0}),e!=="error"&&$2(t,i,{once:!0})})}function $2(t,e,r){typeof t.on=="function"&&Np(t,"error",e,r)}function Np(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(a){n.once&&t.removeEventListener(e,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}function Y2(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}var Z2=Y2;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var X2=function(t){return t!=null&&(Rp(t)||J2(t)||!!t._isBuffer)};function Rp(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function J2(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&Rp(t.slice(0,0))}var Q2=Z2,eC=X2,tC=typeof Float64Array<"u";function rC(t,e){return t[0]-e[0]}function nC(){var t=this.stride,e=new Array(t.length),r;for(r=0;r<e.length;++r)e[r]=[Math.abs(t[r]),r];e.sort(rC);var n=new Array(e.length);for(r=0;r<n.length;++r)n[r]=e[r][1];return n}function iC(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n=t==="generic";if(e===-1){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",m=new Function(i);return m()}else if(e===0){var i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",m=new Function("TrivialArray",i);return m(Ds[t][0])}var i=["'use strict'"],a=Q2(e),o=a.map(function(_){return"i"+_}),s="this.offset+"+a.map(function(_){return"this.stride["+_+"]*i"+_}).join("+"),c=a.map(function(_){return"b"+_}).join(","),p=a.map(function(_){return"c"+_}).join(",");i.push("function "+r+"(a,"+c+","+p+",d){this.data=a","this.shape=["+c+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(_){return"this.shape["+_+"]"}).join("*"),"}})"),e===1?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+r+"_order(){"),e===2?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+o.join(",")+",v){"),n?i.push("return this.data.set("+s+",v)}"):i.push("return this.data["+s+"]=v}"),i.push("proto.get=function "+r+"_get("+o.join(",")+"){"),n?i.push("return this.data.get("+s+")}"):i.push("return this.data["+s+"]}"),i.push("proto.index=function "+r+"_index(",o.join(),"){return "+s+"}"),i.push("proto.hi=function "+r+"_hi("+o.join(",")+"){return new "+r+"(this.data,"+a.map(function(_){return["(typeof i",_,"!=='number'||i",_,"<0)?this.shape[",_,"]:i",_,"|0"].join("")}).join(",")+","+a.map(function(_){return"this.stride["+_+"]"}).join(",")+",this.offset)}");var f=a.map(function(_){return"a"+_+"=this.shape["+_+"]"}),h=a.map(function(_){return"c"+_+"=this.stride["+_+"]"});i.push("proto.lo=function "+r+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+f.join(",")+","+h.join(","));for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");i.push("return new "+r+"(this.data,"+a.map(function(_){return"a"+_}).join(",")+","+a.map(function(_){return"c"+_}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+o.join(",")+"){var "+a.map(function(_){return"a"+_+"=this.shape["+_+"]"}).join(",")+","+a.map(function(_){return"b"+_+"=this.stride["+_+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");i.push("return new "+r+"(this.data,"+a.map(function(_){return"a"+_}).join(",")+","+a.map(function(_){return"b"+_}).join(",")+",c)}");for(var g=new Array(e),b=new Array(e),d=0;d<e;++d)g[d]="a[i"+d+"]",b[d]="b[i"+d+"]";i.push("proto.transpose=function "+r+"_transpose("+o+"){"+o.map(function(_,D){return _+"=("+_+"===undefined?"+D+":"+_+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+b.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+o+"){var a=[],b=[],c=this.offset");for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(_){return"shape["+_+"]"}).join(",")+","+a.map(function(_){return"stride["+_+"]"}).join(",")+",offset)}");var m=new Function("CTOR_LIST","ORDER",i.join(`
`));return m(Ds[t],nC)}function uC(t){if(eC(t))return"buffer";if(tC)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var Ds={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function aC(t,e,r,n){if(t===void 0){var p=Ds.array[0];return p([])}else typeof t=="number"&&(t=[t]);e===void 0&&(e=[t.length]);var i=e.length;if(r===void 0){r=new Array(i);for(var a=i-1,o=1;a>=0;--a)r[a]=o,o*=e[a]}if(n===void 0){n=0;for(var a=0;a<i;++a)r[a]<0&&(n-=(e[a]-1)*r[a])}for(var s=uC(t),c=Ds[s];c.length<=i+1;)c.push(iC(s,c.length-1));var p=c[i+1];return p(t,e,r,n)}var wu=aC,Hs={};function sC(t,e){for(var r=1,n=t.length,i=t[0],a=t[0],o=1;o<n;++o)if(a=i,i=t[o],e(i,a)){if(o===r){r++;continue}t[r++]=i}return t.length=r,t}function oC(t){for(var e=1,r=t.length,n=t[0],i=t[0],a=1;a<r;++a,i=n)if(i=n,n=t[a],n!==i){if(a===e){e++;continue}t[e++]=n}return t.length=e,t}function lC(t,e,r){return t.length===0?t:e?(r||t.sort(e),sC(t,e)):(r||t.sort(),oC(t))}var Lp=lC,fC=Lp;function Up(t,e,r){var n=t.length,i=e.arrayArgs.length,a=e.indexArgs.length>0,o=[],s=[],c=0,p=0,f,h;for(f=0;f<n;++f)s.push(["i",f,"=0"].join(""));for(h=0;h<i;++h)for(f=0;f<n;++f)p=c,c=t[f],f===0?s.push(["d",h,"s",f,"=t",h,"p",c].join("")):s.push(["d",h,"s",f,"=(t",h,"p",c,"-s",p,"*t",h,"p",p,")"].join(""));for(s.length>0&&o.push("var "+s.join(",")),f=n-1;f>=0;--f)c=t[f],o.push(["for(i",f,"=0;i",f,"<s",c,";++i",f,"){"].join(""));for(o.push(r),f=0;f<n;++f){for(p=c,c=t[f],h=0;h<i;++h)o.push(["p",h,"+=d",h,"s",f].join(""));a&&(f>0&&o.push(["index[",p,"]-=s",p].join("")),o.push(["++index[",c,"]"].join(""))),o.push("}")}return o.join(`
`)}function cC(t,e,r,n){for(var i=e.length,a=r.arrayArgs.length,o=r.blockSize,s=r.indexArgs.length>0,c=[],p=0;p<a;++p)c.push(["var offset",p,"=p",p].join(""));for(var p=t;p<i;++p)c.push(["for(var j"+p+"=SS[",e[p],"]|0;j",p,">0;){"].join("")),c.push(["if(j",p,"<",o,"){"].join("")),c.push(["s",e[p],"=j",p].join("")),c.push(["j",p,"=0"].join("")),c.push(["}else{s",e[p],"=",o].join("")),c.push(["j",p,"-=",o,"}"].join("")),s&&c.push(["index[",e[p],"]=j",p].join(""));for(var p=0;p<a;++p){for(var f=["offset"+p],h=t;h<i;++h)f.push(["j",h,"*t",p,"p",e[h]].join(""));c.push(["p",p,"=(",f.join("+"),")"].join(""))}c.push(Up(e,r,n));for(var p=t;p<i;++p)c.push("}");return c.join(`
`)}function hC(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}function dl(t,e,r){for(var n=t.body,i=[],a=[],o=0;o<t.args.length;++o){var s=t.args[o];if(!(s.count<=0)){var c=new RegExp(s.name,"g"),p="",f=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var h=e.offsetArgIndex.indexOf(o),d=e.offsetArgs[h];f=d.array,p="+q"+h;case"array":p="p"+f+p;var g="l"+o,b="a"+f;if(e.arrayBlockIndices[f]===0)s.count===1?r[f]==="generic"?s.lvalue?(i.push(["var ",g,"=",b,".get(",p,")"].join("")),n=n.replace(c,g),a.push([b,".set(",p,",",g,")"].join(""))):n=n.replace(c,[b,".get(",p,")"].join("")):n=n.replace(c,[b,"[",p,"]"].join("")):r[f]==="generic"?(i.push(["var ",g,"=",b,".get(",p,")"].join("")),n=n.replace(c,g),s.lvalue&&a.push([b,".set(",p,",",g,")"].join(""))):(i.push(["var ",g,"=",b,"[",p,"]"].join("")),n=n.replace(c,g),s.lvalue&&a.push([b,"[",p,"]=",g].join("")));else{for(var m=[s.name],_=[p],D=0;D<Math.abs(e.arrayBlockIndices[f]);D++)m.push("\\s*\\[([^\\]]+)\\]"),_.push("$"+(D+1)+"*t"+f+"b"+D);if(c=new RegExp(m.join(""),"g"),p=_.join("+"),r[f]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(c,[b,"[",p,"]"].join(""))}break;case"scalar":n=n.replace(c,"Y"+e.scalarArgs.indexOf(o));break;case"index":n=n.replace(c,"index");break;case"shape":n=n.replace(c,"shape");break}}}return[i.join(`
`),n,a.join(`
`)].join(`
`).trim()}function dC(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],a=i.match(/\d+/);a?a=a[0]:a="",i.charAt(0)===0?e[n]="u"+i.charAt(1)+a:e[n]=i.charAt(0)+a,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}function pC(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,n=new Array(t.arrayArgs.length),i=new Array(t.arrayArgs.length),a=0;a<t.arrayArgs.length;++a)i[a]=e[2*a],n[a]=e[2*a+1];for(var o=[],s=[],c=[],p=[],f=[],a=0;a<t.arrayArgs.length;++a){t.arrayBlockIndices[a]<0?(c.push(0),p.push(r),o.push(r),s.push(r+t.arrayBlockIndices[a])):(c.push(t.arrayBlockIndices[a]),p.push(t.arrayBlockIndices[a]+r),o.push(0),s.push(t.arrayBlockIndices[a]));for(var h=[],d=0;d<n[a].length;d++)c[a]<=n[a][d]&&n[a][d]<p[a]&&h.push(n[a][d]-c[a]);f.push(h)}for(var g=["SS"],b=["'use strict'"],m=[],d=0;d<r;++d)m.push(["s",d,"=SS[",d,"]"].join(""));for(var a=0;a<t.arrayArgs.length;++a){g.push("a"+a),g.push("t"+a),g.push("p"+a);for(var d=0;d<r;++d)m.push(["t",a,"p",d,"=t",a,"[",c[a]+d,"]"].join(""));for(var d=0;d<Math.abs(t.arrayBlockIndices[a]);++d)m.push(["t",a,"b",d,"=t",a,"[",o[a]+d,"]"].join(""))}for(var a=0;a<t.scalarArgs.length;++a)g.push("Y"+a);if(t.shapeArgs.length>0&&m.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var _=new Array(r),a=0;a<r;++a)_[a]="0";m.push(["index=[",_.join(","),"]"].join(""))}for(var a=0;a<t.offsetArgs.length;++a){for(var D=t.offsetArgs[a],C=[],d=0;d<D.offset.length;++d)D.offset[d]!==0&&(D.offset[d]===1?C.push(["t",D.array,"p",d].join("")):C.push([D.offset[d],"*t",D.array,"p",d].join("")));C.length===0?m.push("q"+a+"=0"):m.push(["q",a,"=",C.join("+")].join(""))}var A=fC([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));m=m.concat(A),m.length>0&&b.push("var "+m.join(","));for(var a=0;a<t.arrayArgs.length;++a)b.push("p"+a+"|=0");t.pre.body.length>3&&b.push(dl(t.pre,t,i));var B=dl(t.body,t,i),E=hC(f);E<r?b.push(cC(E,f[0],t,B)):b.push(Up(f[0],t,B)),t.post.body.length>3&&b.push(dl(t.post,t,i)),t.debug&&console.log("-----Generated cwise routine for ",e,`:
`+b.join(`
`)+`
----------`);var O=[t.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",E,dC(i)].join(""),P=new Function(["function ",O,"(",g.join(","),"){",b.join(`
`),"} return ",O].join(""));return P()}var gC=pC,vC=gC;function mC(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var i=[],a=[],o=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],s=[],c=[],p=0;p<t.arrayArgs.length;++p){var f=t.arrayArgs[p];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),i.push("t"+f),i.push("r"+f),a.push("t"+f),a.push("r"+f+".join()"),o.push("array"+f+".data"),o.push("array"+f+".stride"),o.push("array"+f+".offset|0"),p>0&&(s.push("array"+t.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[p]))),c.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[p])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var p=0;p<t.scalarArgs.length;++p)o.push("scalar"+t.scalarArgs[p]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",o.join(","),")}"].join("")),t.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var h=new Function("compile",e.join(`
`));return h(vC.bind(void 0,t))}var _C=mC,DC=_C;function bC(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function yC(t){var e=new bC;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var n=0;n<r.length;++n){var i=r[n];if(i==="array"||typeof i=="object"&&i.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(i==="scalar")e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if(i==="index"){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(i==="shape"){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof i=="object"&&i.offset)e.argTypes[n]="offset",e.offsetArgs.push({array:i.array,offset:i.offset}),e.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+r[n])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,DC(e)}var Cf=yC;(function(t){var e=Cf,r={body:"",args:[],thisVars:[],localVars:[]};function n(d){if(!d)return r;for(var g=0;g<d.args.length;++g){var b=d.args[g];g===0?d.args[g]={name:b,lvalue:!0,rvalue:!!d.rvalue,count:d.count||1}:d.args[g]={name:b,lvalue:!1,rvalue:!0,count:1}}return d.thisVars||(d.thisVars=[]),d.localVars||(d.localVars=[]),d}function i(d){return e({args:d.args,pre:n(d.pre),body:n(d.body),post:n(d.proc),funcName:d.funcName})}function a(d){for(var g=[],b=0;b<d.args.length;++b)g.push("a"+b);var m=new Function("P",["return function ",d.funcName,"_ndarrayops(",g.join(","),") {P(",g.join(","),");return a0}"].join(""));return m(i(d))}var o={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var d in o){var g=o[d];t[d]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:d}),t[d+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+g+"=b"},rvalue:!0,funcName:d+"eq"}),t[d+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:d+"s"}),t[d+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+g+"=s"},rvalue:!0,funcName:d+"seq"})}})();var s={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var d in s){var g=s[d];t[d]=a({args:["array","array"],body:{args:["a","b"],body:"a="+g+"b"},funcName:d}),t[d+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+g+"a"},rvalue:!0,count:2,funcName:d+"eq"})}})();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var d in c){var g=c[d];t[d]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:d}),t[d+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:d+"s"}),t[d+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+g+"b"},rvalue:!0,count:2,funcName:d+"eq"}),t[d+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+g+"s"},rvalue:!0,count:2,funcName:d+"seq"})}})();var p=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var d=0;d<p.length;++d){var g=p[d];t[g]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:g}),t[g+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"})}})();var f=["max","min","atan2","pow"];(function(){for(var d=0;d<f.length;++d){var g=f[d];t[g]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g}),t[g+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g+"s"}),t[g+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"}),t[g+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"seq"})}})();var h=["atan2","pow"];(function(){for(var d=0;d<h.length;++d){var g=h[d];t[g+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"op"}),t[g+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"ops"}),t[g+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opeq"}),t[g+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opseq"})}})(),t.any=e({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=e({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=e({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(Hs);var wC=Cf({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64}),M0=wu,AC=wC,EC=function(e,r){for(var n=[],i=e,a=1;Array.isArray(i);)n.push(i.length),a*=i.length,i=i[0];return n.length===0?M0():(r||(r=M0(new Float64Array(a),n)),AC(r,e),r)};function Vp(t,e,r){var n=t[r]|0;if(n<=0)return[];var i=new Array(n),a;if(r===t.length-1)for(a=0;a<n;++a)i[a]=e;else for(a=0;a<n;++a)i[a]=Vp(t,e,r+1);return i}function CC(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function FC(t,e){switch(typeof e>"u"&&(e=0),typeof t){case"number":if(t>0)return CC(t|0,e);break;case"object":if(typeof t.length=="number")return Vp(t,e,0);break}return[]}var SC=FC,jp={};(function(t){(function(e,r){r(t)})(dr,function(e){var r,n,i,a,o,s,c,p,f,h,d,g,b,m,_,D,C,A;r={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},n={},n[r.BooleanLiteral]="Boolean",n[r.EOF]="<end>",n[r.Identifier]="Identifier",n[r.Keyword]="Keyword",n[r.NullLiteral]="Null",n[r.NumericLiteral]="Numeric",n[r.Punctuator]="Punctuator",n[r.StringLiteral]="String",n[r.RegularExpression]="RegularExpression",i=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},o={Data:1,Get:2,Set:4},s={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},c={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function B(y,F){if(!y)throw new Error("ASSERT: "+F)}function E(y){return y>=48&&y<=57}function O(y){return"0123456789abcdefABCDEF".indexOf(y)>=0}function P(y){return"01234567".indexOf(y)>=0}function x(y){return y===32||y===9||y===11||y===12||y===160||y>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(y)>=0}function R(y){return y===10||y===13||y===8232||y===8233}function G(y){return y===36||y===95||y>=65&&y<=90||y>=97&&y<=122||y===92||y>=128&&c.NonAsciiIdentifierStart.test(String.fromCharCode(y))}function re(y){return y===36||y===95||y>=65&&y<=90||y>=97&&y<=122||y>=48&&y<=57||y===92||y>=128&&c.NonAsciiIdentifierPart.test(String.fromCharCode(y))}function U(y){switch(y){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function X(y){switch(y){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function H(y){return y==="eval"||y==="arguments"}function V(y){if(h&&X(y))return!0;switch(y.length){case 2:return y==="if"||y==="in"||y==="do";case 3:return y==="var"||y==="for"||y==="new"||y==="try"||y==="let";case 4:return y==="this"||y==="else"||y==="case"||y==="void"||y==="with"||y==="enum";case 5:return y==="while"||y==="break"||y==="catch"||y==="throw"||y==="const"||y==="yield"||y==="class"||y==="super";case 6:return y==="return"||y==="typeof"||y==="delete"||y==="switch"||y==="export"||y==="import";case 7:return y==="default"||y==="finally"||y==="extends";case 8:return y==="function"||y==="continue"||y==="debugger";case 10:return y==="instanceof";default:return!1}}function W(y,F,N,ee,pe){var Be;B(typeof N=="number","Comment must have valid position"),!(C.lastCommentStart>=N)&&(C.lastCommentStart=N,Be={type:y,value:F},A.range&&(Be.range=[N,ee]),A.loc&&(Be.loc=pe),A.comments.push(Be),A.attachComment&&(A.leadingComments.push(Be),A.trailingComments.push(Be)))}function Q(y){var F,N,ee,pe;for(F=d-y,N={start:{line:g,column:d-b-y}};d<m;)if(ee=f.charCodeAt(d),++d,R(ee)){A.comments&&(pe=f.slice(F+y,d-1),N.end={line:g,column:d-b-1},W("Line",pe,F,d-1,N)),ee===13&&f.charCodeAt(d)===10&&++d,++g,b=d;return}A.comments&&(pe=f.slice(F+y,d),N.end={line:g,column:d-b},W("Line",pe,F,d,N))}function Y(){var y,F,N,ee;for(A.comments&&(y=d-2,F={start:{line:g,column:d-b-2}});d<m;)if(N=f.charCodeAt(d),R(N))N===13&&f.charCodeAt(d+1)===10&&++d,++g,++d,b=d,d>=m&&z({},s.UnexpectedToken,"ILLEGAL");else if(N===42){if(f.charCodeAt(d+1)===47){++d,++d,A.comments&&(ee=f.slice(y+2,d-2),F.end={line:g,column:d-b},W("Block",ee,y,d,F));return}++d}else++d;z({},s.UnexpectedToken,"ILLEGAL")}function J(){var y,F;for(F=d===0;d<m;)if(y=f.charCodeAt(d),x(y))++d;else if(R(y))++d,y===13&&f.charCodeAt(d)===10&&++d,++g,b=d,F=!0;else if(y===47)if(y=f.charCodeAt(d+1),y===47)++d,++d,Q(2),F=!0;else if(y===42)++d,++d,Y();else break;else if(F&&y===45)if(f.charCodeAt(d+1)===45&&f.charCodeAt(d+2)===62)d+=3,Q(3);else break;else if(y===60)if(f.slice(d+1,d+4)==="!--")++d,++d,++d,++d,Q(4);else break;else break}function le(y){var F,N,ee,pe=0;for(N=y==="u"?4:2,F=0;F<N;++F)if(d<m&&O(f[d]))ee=f[d++],pe=pe*16+"0123456789abcdef".indexOf(ee.toLowerCase());else return"";return String.fromCharCode(pe)}function me(){var y,F;for(y=f.charCodeAt(d++),F=String.fromCharCode(y),y===92&&(f.charCodeAt(d)!==117&&z({},s.UnexpectedToken,"ILLEGAL"),++d,y=le("u"),(!y||y==="\\"||!G(y.charCodeAt(0)))&&z({},s.UnexpectedToken,"ILLEGAL"),F=y);d<m&&(y=f.charCodeAt(d),!!re(y));)++d,F+=String.fromCharCode(y),y===92&&(F=F.substr(0,F.length-1),f.charCodeAt(d)!==117&&z({},s.UnexpectedToken,"ILLEGAL"),++d,y=le("u"),(!y||y==="\\"||!re(y.charCodeAt(0)))&&z({},s.UnexpectedToken,"ILLEGAL"),F+=y);return F}function Ce(){var y,F;for(y=d++;d<m;){if(F=f.charCodeAt(d),F===92)return d=y,me();if(re(F))++d;else break}return f.slice(y,d)}function Ae(){var y,F,N;return y=d,F=f.charCodeAt(d)===92?me():Ce(),F.length===1?N=r.Identifier:V(F)?N=r.Keyword:F==="null"?N=r.NullLiteral:F==="true"||F==="false"?N=r.BooleanLiteral:N=r.Identifier,{type:N,value:F,lineNumber:g,lineStart:b,start:y,end:d}}function Pe(){var y=d,F=f.charCodeAt(d),N,ee=f[d],pe,Be,ht;switch(F){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++d,A.tokenize&&(F===40?A.openParenToken=A.tokens.length:F===123&&(A.openCurlyToken=A.tokens.length)),{type:r.Punctuator,value:String.fromCharCode(F),lineNumber:g,lineStart:b,start:y,end:d};default:if(N=f.charCodeAt(d+1),N===61)switch(F){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return d+=2,{type:r.Punctuator,value:String.fromCharCode(F)+String.fromCharCode(N),lineNumber:g,lineStart:b,start:y,end:d};case 33:case 61:return d+=2,f.charCodeAt(d)===61&&++d,{type:r.Punctuator,value:f.slice(y,d),lineNumber:g,lineStart:b,start:y,end:d}}}if(ht=f.substr(d,4),ht===">>>=")return d+=4,{type:r.Punctuator,value:ht,lineNumber:g,lineStart:b,start:y,end:d};if(Be=ht.substr(0,3),Be===">>>"||Be==="<<="||Be===">>=")return d+=3,{type:r.Punctuator,value:Be,lineNumber:g,lineStart:b,start:y,end:d};if(pe=Be.substr(0,2),ee===pe[1]&&"+-<>&|".indexOf(ee)>=0||pe==="=>")return d+=2,{type:r.Punctuator,value:pe,lineNumber:g,lineStart:b,start:y,end:d};if("<>=!+-*%&|^/".indexOf(ee)>=0)return++d,{type:r.Punctuator,value:ee,lineNumber:g,lineStart:b,start:y,end:d};z({},s.UnexpectedToken,"ILLEGAL")}function Ve(y){for(var F="";d<m&&O(f[d]);)F+=f[d++];return F.length===0&&z({},s.UnexpectedToken,"ILLEGAL"),G(f.charCodeAt(d))&&z({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt("0x"+F,16),lineNumber:g,lineStart:b,start:y,end:d}}function Ie(y){for(var F="0"+f[d++];d<m&&P(f[d]);)F+=f[d++];return(G(f.charCodeAt(d))||E(f.charCodeAt(d)))&&z({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt(F,8),octal:!0,lineNumber:g,lineStart:b,start:y,end:d}}function Xe(){var y,F;for(y=d+1;y<m;++y){if(F=f[y],F==="8"||F==="9")return!1;if(!P(F))return!0}return!0}function ze(){var y,F,N;if(N=f[d],B(E(N.charCodeAt(0))||N===".","Numeric literal must start with a decimal digit or a decimal point"),F=d,y="",N!=="."){if(y=f[d++],N=f[d],y==="0"){if(N==="x"||N==="X")return++d,Ve(F);if(P(N)&&Xe())return Ie(F)}for(;E(f.charCodeAt(d));)y+=f[d++];N=f[d]}if(N==="."){for(y+=f[d++];E(f.charCodeAt(d));)y+=f[d++];N=f[d]}if(N==="e"||N==="E")if(y+=f[d++],N=f[d],(N==="+"||N==="-")&&(y+=f[d++]),E(f.charCodeAt(d)))for(;E(f.charCodeAt(d));)y+=f[d++];else z({},s.UnexpectedToken,"ILLEGAL");return G(f.charCodeAt(d))&&z({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseFloat(y),lineNumber:g,lineStart:b,start:F,end:d}}function Re(){var y="",F,N,ee,pe,Be,ht,Ft=!1,Kt,sr;for(Kt=g,sr=b,F=f[d],B(F==="'"||F==='"',"String literal must starts with a quote"),N=d,++d;d<m;)if(ee=f[d++],ee===F){F="";break}else if(ee==="\\")if(ee=f[d++],!ee||!R(ee.charCodeAt(0)))switch(ee){case"u":case"x":ht=d,Be=le(ee),Be?y+=Be:(d=ht,y+=ee);break;case"n":y+=`
`;break;case"r":y+="\r";break;case"t":y+="	";break;case"b":y+="\b";break;case"f":y+="\f";break;case"v":y+="\v";break;default:P(ee)?(pe="01234567".indexOf(ee),pe!==0&&(Ft=!0),d<m&&P(f[d])&&(Ft=!0,pe=pe*8+"01234567".indexOf(f[d++]),"0123".indexOf(ee)>=0&&d<m&&P(f[d])&&(pe=pe*8+"01234567".indexOf(f[d++]))),y+=String.fromCharCode(pe)):y+=ee;break}else++g,ee==="\r"&&f[d]===`
`&&++d,b=d;else{if(R(ee.charCodeAt(0)))break;y+=ee}return F!==""&&z({},s.UnexpectedToken,"ILLEGAL"),{type:r.StringLiteral,value:y,octal:Ft,startLineNumber:Kt,startLineStart:sr,lineNumber:g,lineStart:b,start:N,end:d}}function je(y,F){var N;try{N=new RegExp(y,F)}catch{z({},s.InvalidRegExp)}return N}function pt(){var y,F,N,ee,pe;for(y=f[d],B(y==="/","Regular expression literal must start with a slash"),F=f[d++],N=!1,ee=!1;d<m;)if(y=f[d++],F+=y,y==="\\")y=f[d++],R(y.charCodeAt(0))&&z({},s.UnterminatedRegExp),F+=y;else if(R(y.charCodeAt(0)))z({},s.UnterminatedRegExp);else if(N)y==="]"&&(N=!1);else if(y==="/"){ee=!0;break}else y==="["&&(N=!0);return ee||z({},s.UnterminatedRegExp),pe=F.substr(1,F.length-2),{value:pe,literal:F}}function ut(){var y,F,N,ee;for(F="",N="";d<m&&(y=f[d],!!re(y.charCodeAt(0)));)if(++d,y==="\\"&&d<m)if(y=f[d],y==="u"){if(++d,ee=d,y=le("u"),y)for(N+=y,F+="\\u";ee<d;++ee)F+=f[ee];else d=ee,N+="u",F+="\\u";Z({},s.UnexpectedToken,"ILLEGAL")}else F+="\\",Z({},s.UnexpectedToken,"ILLEGAL");else N+=y,F+=y;return{value:N,literal:F}}function lt(){var y,F,N,ee;return D=null,J(),y=d,F=pt(),N=ut(),ee=je(F.value,N.value),A.tokenize?{type:r.RegularExpression,value:ee,lineNumber:g,lineStart:b,start:y,end:d}:{literal:F.literal+N.literal,value:ee,start:y,end:d}}function at(){var y,F,N,ee;return J(),y=d,F={start:{line:g,column:d-b}},N=lt(),F.end={line:g,column:d-b},A.tokenize||(A.tokens.length>0&&(ee=A.tokens[A.tokens.length-1],ee.range[0]===y&&ee.type==="Punctuator"&&(ee.value==="/"||ee.value==="/=")&&A.tokens.pop()),A.tokens.push({type:"RegularExpression",value:N.literal,range:[y,d],loc:F})),N}function st(y){return y.type===r.Identifier||y.type===r.Keyword||y.type===r.BooleanLiteral||y.type===r.NullLiteral}function Ke(){var y,F;if(y=A.tokens[A.tokens.length-1],!y)return at();if(y.type==="Punctuator"){if(y.value==="]")return Pe();if(y.value===")")return F=A.tokens[A.openParenToken-1],F&&F.type==="Keyword"&&(F.value==="if"||F.value==="while"||F.value==="for"||F.value==="with")?at():Pe();if(y.value==="}"){if(A.tokens[A.openCurlyToken-3]&&A.tokens[A.openCurlyToken-3].type==="Keyword"){if(F=A.tokens[A.openCurlyToken-4],!F)return Pe()}else if(A.tokens[A.openCurlyToken-4]&&A.tokens[A.openCurlyToken-4].type==="Keyword"){if(F=A.tokens[A.openCurlyToken-5],!F)return at()}else return Pe();return i.indexOf(F.value)>=0?Pe():at()}return at()}return y.type==="Keyword"&&y.value!=="this"?at():Pe()}function $e(){var y;return J(),d>=m?{type:r.EOF,lineNumber:g,lineStart:b,start:d,end:d}:(y=f.charCodeAt(d),G(y)?Ae():y===40||y===41||y===59?Pe():y===39||y===34?Re():y===46?E(f.charCodeAt(d+1))?ze():Pe():E(y)?ze():A.tokenize&&y===47?Ke():Pe())}function Ee(){var y,F,N;return J(),y={start:{line:g,column:d-b}},F=$e(),y.end={line:g,column:d-b},F.type!==r.EOF&&(N=f.slice(F.start,F.end),A.tokens.push({type:n[F.type],value:N,range:[F.start,F.end],loc:y})),F}function Te(){var y;return y=D,d=y.end,g=y.lineNumber,b=y.lineStart,D=typeof A.tokens<"u"?Ee():$e(),d=y.end,g=y.lineNumber,b=y.lineStart,y}function Bt(){var y,F,N;y=d,F=g,N=b,D=typeof A.tokens<"u"?Ee():$e(),d=y,g=F,b=N}function Vt(y,F){this.line=y,this.column=F}function Ht(y,F,N,ee){this.start=new Vt(y,F),this.end=new Vt(N,ee)}p={name:"SyntaxTree",processComment:function(y){var F,N;if(!(y.type===a.Program&&y.body.length>0)){for(A.trailingComments.length>0?A.trailingComments[0].range[0]>=y.range[1]?(N=A.trailingComments,A.trailingComments=[]):A.trailingComments.length=0:A.bottomRightStack.length>0&&A.bottomRightStack[A.bottomRightStack.length-1].trailingComments&&A.bottomRightStack[A.bottomRightStack.length-1].trailingComments[0].range[0]>=y.range[1]&&(N=A.bottomRightStack[A.bottomRightStack.length-1].trailingComments,delete A.bottomRightStack[A.bottomRightStack.length-1].trailingComments);A.bottomRightStack.length>0&&A.bottomRightStack[A.bottomRightStack.length-1].range[0]>=y.range[0];)F=A.bottomRightStack.pop();F?F.leadingComments&&F.leadingComments[F.leadingComments.length-1].range[1]<=y.range[0]&&(y.leadingComments=F.leadingComments,delete F.leadingComments):A.leadingComments.length>0&&A.leadingComments[A.leadingComments.length-1].range[1]<=y.range[0]&&(y.leadingComments=A.leadingComments,A.leadingComments=[]),N&&(y.trailingComments=N),A.bottomRightStack.push(y)}},markEnd:function(y,F){return A.range&&(y.range=[F.start,d]),A.loc&&(y.loc=new Ht(F.startLineNumber===void 0?F.lineNumber:F.startLineNumber,F.start-(F.startLineStart===void 0?F.lineStart:F.startLineStart),g,d-b),this.postProcess(y)),A.attachComment&&this.processComment(y),y},postProcess:function(y){return A.source&&(y.loc.source=A.source),y},createArrayExpression:function(y){return{type:a.ArrayExpression,elements:y}},createAssignmentExpression:function(y,F,N){return{type:a.AssignmentExpression,operator:y,left:F,right:N}},createBinaryExpression:function(y,F,N){var ee=y==="||"||y==="&&"?a.LogicalExpression:a.BinaryExpression;return{type:ee,operator:y,left:F,right:N}},createBlockStatement:function(y){return{type:a.BlockStatement,body:y}},createBreakStatement:function(y){return{type:a.BreakStatement,label:y}},createCallExpression:function(y,F){return{type:a.CallExpression,callee:y,arguments:F}},createCatchClause:function(y,F){return{type:a.CatchClause,param:y,body:F}},createConditionalExpression:function(y,F,N){return{type:a.ConditionalExpression,test:y,consequent:F,alternate:N}},createContinueStatement:function(y){return{type:a.ContinueStatement,label:y}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(y,F){return{type:a.DoWhileStatement,body:y,test:F}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(y){return{type:a.ExpressionStatement,expression:y}},createForStatement:function(y,F,N,ee){return{type:a.ForStatement,init:y,test:F,update:N,body:ee}},createForInStatement:function(y,F,N){return{type:a.ForInStatement,left:y,right:F,body:N,each:!1}},createFunctionDeclaration:function(y,F,N,ee){return{type:a.FunctionDeclaration,id:y,params:F,defaults:N,body:ee,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(y,F,N,ee){return{type:a.FunctionExpression,id:y,params:F,defaults:N,body:ee,rest:null,generator:!1,expression:!1}},createIdentifier:function(y){return{type:a.Identifier,name:y}},createIfStatement:function(y,F,N){return{type:a.IfStatement,test:y,consequent:F,alternate:N}},createLabeledStatement:function(y,F){return{type:a.LabeledStatement,label:y,body:F}},createLiteral:function(y){return{type:a.Literal,value:y.value,raw:f.slice(y.start,y.end)}},createMemberExpression:function(y,F,N){return{type:a.MemberExpression,computed:y==="[",object:F,property:N}},createNewExpression:function(y,F){return{type:a.NewExpression,callee:y,arguments:F}},createObjectExpression:function(y){return{type:a.ObjectExpression,properties:y}},createPostfixExpression:function(y,F){return{type:a.UpdateExpression,operator:y,argument:F,prefix:!1}},createProgram:function(y){return{type:a.Program,body:y}},createProperty:function(y,F,N){return{type:a.Property,key:F,value:N,kind:y}},createReturnStatement:function(y){return{type:a.ReturnStatement,argument:y}},createSequenceExpression:function(y){return{type:a.SequenceExpression,expressions:y}},createSwitchCase:function(y,F){return{type:a.SwitchCase,test:y,consequent:F}},createSwitchStatement:function(y,F){return{type:a.SwitchStatement,discriminant:y,cases:F}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(y){return{type:a.ThrowStatement,argument:y}},createTryStatement:function(y,F,N,ee){return{type:a.TryStatement,block:y,guardedHandlers:F,handlers:N,finalizer:ee}},createUnaryExpression:function(y,F){return y==="++"||y==="--"?{type:a.UpdateExpression,operator:y,argument:F,prefix:!0}:{type:a.UnaryExpression,operator:y,argument:F,prefix:!0}},createVariableDeclaration:function(y,F){return{type:a.VariableDeclaration,declarations:y,kind:F}},createVariableDeclarator:function(y,F){return{type:a.VariableDeclarator,id:y,init:F}},createWhileStatement:function(y,F){return{type:a.WhileStatement,test:y,body:F}},createWithStatement:function(y,F){return{type:a.WithStatement,object:y,body:F}}};function L(){var y,F,N,ee;return y=d,F=g,N=b,J(),ee=g!==F,d=y,g=F,b=N,ee}function z(y,F){var N,ee=Array.prototype.slice.call(arguments,2),pe=F.replace(/%(\d)/g,function(Be,ht){return B(ht<ee.length,"Message reference must be in range"),ee[ht]});throw typeof y.lineNumber=="number"?(N=new Error("Line "+y.lineNumber+": "+pe),N.index=y.start,N.lineNumber=y.lineNumber,N.column=y.start-b+1):(N=new Error("Line "+g+": "+pe),N.index=d,N.lineNumber=g,N.column=d-b+1),N.description=pe,N}function Z(){try{z.apply(null,arguments)}catch(y){if(A.errors)A.errors.push(y);else throw y}}function fe(y){if(y.type===r.EOF&&z(y,s.UnexpectedEOS),y.type===r.NumericLiteral&&z(y,s.UnexpectedNumber),y.type===r.StringLiteral&&z(y,s.UnexpectedString),y.type===r.Identifier&&z(y,s.UnexpectedIdentifier),y.type===r.Keyword){if(U(y.value))z(y,s.UnexpectedReserved);else if(h&&X(y.value)){Z(y,s.StrictReservedWord);return}z(y,s.UnexpectedToken,y.value)}z(y,s.UnexpectedToken,y.value)}function ae(y){var F=Te();(F.type!==r.Punctuator||F.value!==y)&&fe(F)}function he(y){var F=Te();(F.type!==r.Keyword||F.value!==y)&&fe(F)}function se(y){return D.type===r.Punctuator&&D.value===y}function ce(y){return D.type===r.Keyword&&D.value===y}function ye(){var y;return D.type!==r.Punctuator?!1:(y=D.value,y==="="||y==="*="||y==="/="||y==="%="||y==="+="||y==="-="||y==="<<="||y===">>="||y===">>>="||y==="&="||y==="^="||y==="|=")}function ke(){var y,F=d,N=g,ee=b,pe=D;if(f.charCodeAt(d)===59||se(";")){Te();return}if(y=g,J(),g!==y){d=F,g=N,b=ee,D=pe;return}D.type!==r.EOF&&!se("}")&&fe(D)}function Je(y){return y.type===a.Identifier||y.type===a.MemberExpression}function Fe(){var y=[],F;for(F=D,ae("[");!se("]");)se(",")?(Te(),y.push(null)):(y.push(Fr()),se("]")||ae(","));return Te(),_.markEnd(_.createArrayExpression(y),F)}function zt(y,F){var N,ee,pe;return N=h,pe=D,ee=Ii(),F&&h&&H(y[0].name)&&Z(F,s.StrictParamName),h=N,_.markEnd(_.createFunctionExpression(null,y,[],ee),pe)}function It(){var y,F;return F=D,y=Te(),y.type===r.StringLiteral||y.type===r.NumericLiteral?(h&&y.octal&&Z(y,s.StrictOctalLiteral),_.markEnd(_.createLiteral(y),F)):_.markEnd(_.createIdentifier(y.value),F)}function rr(){var y,F,N,ee,pe,Be;if(y=D,Be=D,y.type===r.Identifier)return N=It(),y.value==="get"&&!se(":")?(F=It(),ae("("),ae(")"),ee=zt([]),_.markEnd(_.createProperty("get",F,ee),Be)):y.value==="set"&&!se(":")?(F=It(),ae("("),y=D,y.type!==r.Identifier?(ae(")"),Z(y,s.UnexpectedToken,y.value),ee=zt([])):(pe=[hn()],ae(")"),ee=zt(pe,y)),_.markEnd(_.createProperty("set",F,ee),Be)):(ae(":"),ee=Fr(),_.markEnd(_.createProperty("init",N,ee),Be));if(y.type===r.EOF||y.type===r.Punctuator)fe(y);else return F=It(),ae(":"),ee=Fr(),_.markEnd(_.createProperty("init",F,ee),Be)}function Zt(){var y=[],F,N,ee,pe,Be={},ht=String,Ft;for(Ft=D,ae("{");!se("}");)F=rr(),F.key.type===a.Identifier?N=F.key.name:N=ht(F.key.value),pe=F.kind==="init"?o.Data:F.kind==="get"?o.Get:o.Set,ee="$"+N,Object.prototype.hasOwnProperty.call(Be,ee)?(Be[ee]===o.Data?h&&pe===o.Data?Z({},s.StrictDuplicateProperty):pe!==o.Data&&Z({},s.AccessorDataProperty):pe===o.Data?Z({},s.AccessorDataProperty):Be[ee]&pe&&Z({},s.AccessorGetSet),Be[ee]|=pe):Be[ee]=pe,y.push(F),se("}")||ae(",");return ae("}"),_.markEnd(_.createObjectExpression(y),Ft)}function _r(){var y;return ae("("),y=nr(),ae(")"),y}function Xt(){var y,F,N,ee;if(se("("))return _r();if(se("["))return Fe();if(se("{"))return Zt();if(y=D.type,ee=D,y===r.Identifier)N=_.createIdentifier(Te().value);else if(y===r.StringLiteral||y===r.NumericLiteral)h&&D.octal&&Z(D,s.StrictOctalLiteral),N=_.createLiteral(Te());else if(y===r.Keyword){if(ce("function"))return ki();ce("this")?(Te(),N=_.createThisExpression()):fe(Te())}else y===r.BooleanLiteral?(F=Te(),F.value=F.value==="true",N=_.createLiteral(F)):y===r.NullLiteral?(F=Te(),F.value=null,N=_.createLiteral(F)):se("/")||se("/=")?(typeof A.tokens<"u"?N=_.createLiteral(at()):N=_.createLiteral(lt()),Bt()):fe(Te());return _.markEnd(N,ee)}function Dr(){var y=[];if(ae("("),!se(")"))for(;d<m&&(y.push(Fr()),!se(")"));)ae(",");return ae(")"),y}function cr(){var y,F;return F=D,y=Te(),st(y)||fe(y),_.markEnd(_.createIdentifier(y.value),F)}function hr(){return ae("."),cr()}function cn(){var y;return ae("["),y=nr(),ae("]"),y}function pr(){var y,F,N;return N=D,he("new"),y=Yn(),F=se("(")?Dr():[],_.markEnd(_.createNewExpression(y,F),N)}function Sn(){var y,F,N,ee,pe=C.allowIn;for(ee=D,C.allowIn=!0,y=ce("new")?pr():Xt();;){if(se("."))N=hr(),y=_.createMemberExpression(".",y,N);else if(se("("))F=Dr(),y=_.createCallExpression(y,F);else if(se("["))N=cn(),y=_.createMemberExpression("[",y,N);else break;_.markEnd(y,ee)}return C.allowIn=pe,y}function Yn(){var y,F,N;for(B(C.allowIn,"callee of new expression always allow in keyword."),N=D,y=ce("new")?pr():Xt();se(".")||se("[");)se("[")?(F=cn(),y=_.createMemberExpression("[",y,F)):(F=hr(),y=_.createMemberExpression(".",y,F)),_.markEnd(y,N);return y}function Rn(){var y,F,N=D;return y=Sn(),D.type===r.Punctuator&&(se("++")||se("--"))&&!L()&&(h&&y.type===a.Identifier&&H(y.name)&&Z({},s.StrictLHSPostfix),Je(y)||Z({},s.InvalidLHSInAssignment),F=Te(),y=_.markEnd(_.createPostfixExpression(F.value,y),N)),y}function Ln(){var y,F,N;return D.type!==r.Punctuator&&D.type!==r.Keyword?F=Rn():se("++")||se("--")?(N=D,y=Te(),F=Ln(),h&&F.type===a.Identifier&&H(F.name)&&Z({},s.StrictLHSPrefix),Je(F)||Z({},s.InvalidLHSInAssignment),F=_.createUnaryExpression(y.value,F),F=_.markEnd(F,N)):se("+")||se("-")||se("~")||se("!")?(N=D,y=Te(),F=Ln(),F=_.createUnaryExpression(y.value,F),F=_.markEnd(F,N)):ce("delete")||ce("void")||ce("typeof")?(N=D,y=Te(),F=Ln(),F=_.createUnaryExpression(y.value,F),F=_.markEnd(F,N),h&&F.operator==="delete"&&F.argument.type===a.Identifier&&Z({},s.StrictDelete)):F=Rn(),F}function Ki(y,F){var N=0;if(y.type!==r.Punctuator&&y.type!==r.Keyword)return 0;switch(y.value){case"||":N=1;break;case"&&":N=2;break;case"|":N=3;break;case"^":N=4;break;case"&":N=5;break;case"==":case"!=":case"===":case"!==":N=6;break;case"<":case">":case"<=":case">=":case"instanceof":N=7;break;case"in":N=F?7:0;break;case"<<":case">>":case">>>":N=8;break;case"+":case"-":N=9;break;case"*":case"/":case"%":N=11;break}return N}function Ti(){var y,F,N,ee,pe,Be,ht,Ft,Kt,sr;if(y=D,Kt=Ln(),ee=D,pe=Ki(ee,C.allowIn),pe===0)return Kt;for(ee.prec=pe,Te(),F=[y,D],ht=Ln(),Be=[Kt,ee,ht];(pe=Ki(D,C.allowIn))>0;){for(;Be.length>2&&pe<=Be[Be.length-2].prec;)ht=Be.pop(),Ft=Be.pop().value,Kt=Be.pop(),N=_.createBinaryExpression(Ft,Kt,ht),F.pop(),y=F[F.length-1],_.markEnd(N,y),Be.push(N);ee=Te(),ee.prec=pe,Be.push(ee),F.push(D),N=Ln(),Be.push(N)}for(sr=Be.length-1,N=Be[sr],F.pop();sr>1;)N=_.createBinaryExpression(Be[sr-1].value,Be[sr-2],N),sr-=2,y=F.pop(),_.markEnd(N,y);return N}function Au(){var y,F,N,ee,pe;return pe=D,y=Ti(),se("?")&&(Te(),F=C.allowIn,C.allowIn=!0,N=Fr(),C.allowIn=F,ae(":"),ee=Fr(),y=_.createConditionalExpression(y,N,ee),_.markEnd(y,pe)),y}function Fr(){var y,F,N,ee,pe;return y=D,pe=D,ee=F=Au(),ye()&&(Je(F)||Z({},s.InvalidLHSInAssignment),h&&F.type===a.Identifier&&H(F.name)&&Z(y,s.StrictLHSAssignment),y=Te(),N=Fr(),ee=_.markEnd(_.createAssignmentExpression(y.value,F,N),pe)),ee}function nr(){var y,F=D;if(y=Fr(),se(",")){for(y=_.createSequenceExpression([y]);d<m&&se(",");)Te(),y.expressions.push(Fr());_.markEnd(y,F)}return y}function Eu(){for(var y=[],F;d<m&&!(se("}")||(F=Bn(),typeof F>"u"));)y.push(F);return y}function fi(){var y,F;return F=D,ae("{"),y=Eu(),ae("}"),_.markEnd(_.createBlockStatement(y),F)}function hn(){var y,F;return F=D,y=Te(),y.type!==r.Identifier&&fe(y),_.markEnd(_.createIdentifier(y.value),F)}function Zn(y){var F=null,N,ee;return ee=D,N=hn(),h&&H(N.name)&&Z({},s.StrictVarName),y==="const"?(ae("="),F=Fr()):se("=")&&(Te(),F=Fr()),_.markEnd(_.createVariableDeclarator(N,F),ee)}function xi(y){var F=[];do{if(F.push(Zn(y)),!se(","))break;Te()}while(d<m);return F}function Cu(){var y;return he("var"),y=xi(),ke(),_.createVariableDeclaration(y,"var")}function Fu(y){var F,N;return N=D,he(y),F=xi(y),ke(),_.markEnd(_.createVariableDeclaration(F,y),N)}function $i(){return ae(";"),_.createEmptyStatement()}function Su(){var y=nr();return ke(),_.createExpressionStatement(y)}function Bu(){var y,F,N;return he("if"),ae("("),y=nr(),ae(")"),F=qr(),ce("else")?(Te(),N=qr()):N=null,_.createIfStatement(y,F,N)}function Ou(){var y,F,N;return he("do"),N=C.inIteration,C.inIteration=!0,y=qr(),C.inIteration=N,he("while"),ae("("),F=nr(),ae(")"),se(";")&&Te(),_.createDoWhileStatement(y,F)}function Mu(){var y,F,N;return he("while"),ae("("),y=nr(),ae(")"),N=C.inIteration,C.inIteration=!0,F=qr(),C.inIteration=N,_.createWhileStatement(y,F)}function Pu(){var y,F,N;return N=D,y=Te(),F=xi(),_.markEnd(_.createVariableDeclaration(F,y.value),N)}function Tu(){var y,F,N,ee,pe,Be,ht,Ft=C.allowIn;return y=F=N=null,he("for"),ae("("),se(";")?Te():(ce("var")||ce("let")?(C.allowIn=!1,y=Pu(),C.allowIn=Ft,y.declarations.length===1&&ce("in")&&(Te(),ee=y,pe=nr(),y=null)):(C.allowIn=!1,y=nr(),C.allowIn=Ft,ce("in")&&(Je(y)||Z({},s.InvalidLHSInForIn),Te(),ee=y,pe=nr(),y=null)),typeof ee>"u"&&ae(";")),typeof ee>"u"&&(se(";")||(F=nr()),ae(";"),se(")")||(N=nr())),ae(")"),ht=C.inIteration,C.inIteration=!0,Be=qr(),C.inIteration=ht,typeof ee>"u"?_.createForStatement(y,F,N,Be):_.createForInStatement(ee,pe,Be)}function ci(){var y=null,F;return he("continue"),f.charCodeAt(d)===59?(Te(),C.inIteration||z({},s.IllegalContinue),_.createContinueStatement(null)):L()?(C.inIteration||z({},s.IllegalContinue),_.createContinueStatement(null)):(D.type===r.Identifier&&(y=hn(),F="$"+y.name,Object.prototype.hasOwnProperty.call(C.labelSet,F)||z({},s.UnknownLabel,y.name)),ke(),y===null&&!C.inIteration&&z({},s.IllegalContinue),_.createContinueStatement(y))}function xu(){var y=null,F;return he("break"),f.charCodeAt(d)===59?(Te(),C.inIteration||C.inSwitch||z({},s.IllegalBreak),_.createBreakStatement(null)):L()?(C.inIteration||C.inSwitch||z({},s.IllegalBreak),_.createBreakStatement(null)):(D.type===r.Identifier&&(y=hn(),F="$"+y.name,Object.prototype.hasOwnProperty.call(C.labelSet,F)||z({},s.UnknownLabel,y.name)),ke(),y===null&&!(C.inIteration||C.inSwitch)&&z({},s.IllegalBreak),_.createBreakStatement(y))}function hi(){var y=null;return he("return"),C.inFunctionBody||Z({},s.IllegalReturn),f.charCodeAt(d)===32&&G(f.charCodeAt(d+1))?(y=nr(),ke(),_.createReturnStatement(y)):L()?_.createReturnStatement(null):(se(";")||!se("}")&&D.type!==r.EOF&&(y=nr()),ke(),_.createReturnStatement(y))}function Iu(){var y,F;return h&&(J(),Z({},s.StrictModeWith)),he("with"),ae("("),y=nr(),ae(")"),F=qr(),_.createWithStatement(y,F)}function ku(){var y,F=[],N,ee;for(ee=D,ce("default")?(Te(),y=null):(he("case"),y=nr()),ae(":");d<m&&!(se("}")||ce("default")||ce("case"));)N=qr(),F.push(N);return _.markEnd(_.createSwitchCase(y,F),ee)}function Nu(){var y,F,N,ee,pe;if(he("switch"),ae("("),y=nr(),ae(")"),ae("{"),F=[],se("}"))return Te(),_.createSwitchStatement(y,F);for(ee=C.inSwitch,C.inSwitch=!0,pe=!1;d<m&&!se("}");)N=ku(),N.test===null&&(pe&&z({},s.MultipleDefaultsInSwitch),pe=!0),F.push(N);return C.inSwitch=ee,ae("}"),_.createSwitchStatement(y,F)}function Yi(){var y;return he("throw"),L()&&z({},s.NewlineAfterThrow),y=nr(),ke(),_.createThrowStatement(y)}function Un(){var y,F,N;return N=D,he("catch"),ae("("),se(")")&&fe(D),y=hn(),h&&H(y.name)&&Z({},s.StrictCatchVariable),ae(")"),F=fi(),_.markEnd(_.createCatchClause(y,F),N)}function br(){var y,F=[],N=null;return he("try"),y=fi(),ce("catch")&&F.push(Un()),ce("finally")&&(Te(),N=fi()),F.length===0&&!N&&z({},s.NoCatchOrFinally),_.createTryStatement(y,[],F,N)}function ar(){return he("debugger"),ke(),_.createDebuggerStatement()}function qr(){var y=D.type,F,N,ee,pe;if(y===r.EOF&&fe(D),y===r.Punctuator&&D.value==="{")return fi();if(pe=D,y===r.Punctuator)switch(D.value){case";":return _.markEnd($i(),pe);case"(":return _.markEnd(Su(),pe)}if(y===r.Keyword)switch(D.value){case"break":return _.markEnd(xu(),pe);case"continue":return _.markEnd(ci(),pe);case"debugger":return _.markEnd(ar(),pe);case"do":return _.markEnd(Ou(),pe);case"for":return _.markEnd(Tu(),pe);case"function":return _.markEnd(Vn(),pe);case"if":return _.markEnd(Bu(),pe);case"return":return _.markEnd(hi(),pe);case"switch":return _.markEnd(Nu(),pe);case"throw":return _.markEnd(Yi(),pe);case"try":return _.markEnd(br(),pe);case"var":return _.markEnd(Cu(),pe);case"while":return _.markEnd(Mu(),pe);case"with":return _.markEnd(Iu(),pe)}return F=nr(),F.type===a.Identifier&&se(":")?(Te(),ee="$"+F.name,Object.prototype.hasOwnProperty.call(C.labelSet,ee)&&z({},s.Redeclaration,"Label",F.name),C.labelSet[ee]=!0,N=qr(),delete C.labelSet[ee],_.markEnd(_.createLabeledStatement(F,N),pe)):(ke(),_.markEnd(_.createExpressionStatement(F),pe))}function Ii(){var y,F=[],N,ee,pe,Be,ht,Ft,Kt,sr;for(sr=D,ae("{");d<m&&!(D.type!==r.StringLiteral||(N=D,y=Bn(),F.push(y),y.expression.type!==a.Literal));)ee=f.slice(N.start+1,N.end-1),ee==="use strict"?(h=!0,pe&&Z(pe,s.StrictOctalLiteral)):!pe&&N.octal&&(pe=N);for(Be=C.labelSet,ht=C.inIteration,Ft=C.inSwitch,Kt=C.inFunctionBody,C.labelSet={},C.inIteration=!1,C.inSwitch=!1,C.inFunctionBody=!0;d<m&&!(se("}")||(y=Bn(),typeof y>"u"));)F.push(y);return ae("}"),C.labelSet=Be,C.inIteration=ht,C.inSwitch=Ft,C.inFunctionBody=Kt,_.markEnd(_.createBlockStatement(F),sr)}function Xn(y){var F,N=[],ee,pe,Be,ht,Ft;if(ae("("),!se(")"))for(Be={};d<m&&(ee=D,F=hn(),ht="$"+ee.value,h?(H(ee.value)&&(pe=ee,Ft=s.StrictParamName),Object.prototype.hasOwnProperty.call(Be,ht)&&(pe=ee,Ft=s.StrictParamDupe)):y||(H(ee.value)?(y=ee,Ft=s.StrictParamName):X(ee.value)?(y=ee,Ft=s.StrictReservedWord):Object.prototype.hasOwnProperty.call(Be,ht)&&(y=ee,Ft=s.StrictParamDupe)),N.push(F),Be[ht]=!0,!se(")"));)ae(",");return ae(")"),{params:N,stricted:pe,firstRestricted:y,message:Ft}}function Vn(){var y,F=[],N,ee,pe,Be,ht,Ft,Kt,sr;return sr=D,he("function"),ee=D,y=hn(),h?H(ee.value)&&Z(ee,s.StrictFunctionName):H(ee.value)?(ht=ee,Ft=s.StrictFunctionName):X(ee.value)&&(ht=ee,Ft=s.StrictReservedWord),Be=Xn(ht),F=Be.params,pe=Be.stricted,ht=Be.firstRestricted,Be.message&&(Ft=Be.message),Kt=h,N=Ii(),h&&ht&&z(ht,Ft),h&&pe&&Z(pe,Ft),h=Kt,_.markEnd(_.createFunctionDeclaration(y,F,[],N),sr)}function ki(){var y,F=null,N,ee,pe,Be,ht=[],Ft,Kt,sr;return sr=D,he("function"),se("(")||(y=D,F=hn(),h?H(y.value)&&Z(y,s.StrictFunctionName):H(y.value)?(ee=y,pe=s.StrictFunctionName):X(y.value)&&(ee=y,pe=s.StrictReservedWord)),Be=Xn(ee),ht=Be.params,N=Be.stricted,ee=Be.firstRestricted,Be.message&&(pe=Be.message),Kt=h,Ft=Ii(),h&&ee&&z(ee,pe),h&&N&&Z(N,pe),h=Kt,_.markEnd(_.createFunctionExpression(F,ht,[],Ft),sr)}function Bn(){if(D.type===r.Keyword)switch(D.value){case"const":case"let":return Fu(D.value);case"function":return Vn();default:return qr()}if(D.type!==r.EOF)return qr()}function dn(){for(var y,F=[],N,ee,pe;d<m&&(N=D,!(N.type!==r.StringLiteral||(y=Bn(),F.push(y),y.expression.type!==a.Literal)));)ee=f.slice(N.start+1,N.end-1),ee==="use strict"?(h=!0,pe&&Z(pe,s.StrictOctalLiteral)):!pe&&N.octal&&(pe=N);for(;d<m&&(y=Bn(),!(typeof y>"u"));)F.push(y);return F}function Js(){var y,F;return J(),Bt(),F=D,h=!1,y=dn(),_.markEnd(_.createProgram(y),F)}function Ru(){var y,F,N,ee=[];for(y=0;y<A.tokens.length;++y)F=A.tokens[y],N={type:F.type,value:F.value},A.range&&(N.range=F.range),A.loc&&(N.loc=F.loc),ee.push(N);A.tokens=ee}function Zi(y,F){var N,ee,pe;N=String,typeof y!="string"&&!(y instanceof String)&&(y=N(y)),_=p,f=y,d=0,g=f.length>0?1:0,b=0,m=f.length,D=null,C={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},A={},F=F||{},F.tokens=!0,A.tokens=[],A.tokenize=!0,A.openParenToken=-1,A.openCurlyToken=-1,A.range=typeof F.range=="boolean"&&F.range,A.loc=typeof F.loc=="boolean"&&F.loc,typeof F.comment=="boolean"&&F.comment&&(A.comments=[]),typeof F.tolerant=="boolean"&&F.tolerant&&(A.errors=[]);try{if(Bt(),D.type===r.EOF)return A.tokens;for(ee=Te();D.type!==r.EOF;)try{ee=Te()}catch(Be){if(ee=D,A.errors){A.errors.push(Be);break}else throw Be}Ru(),pe=A.tokens,typeof A.comments<"u"&&(pe.comments=A.comments),typeof A.errors<"u"&&(pe.errors=A.errors)}catch(Be){throw Be}finally{A={}}return pe}function ca(y,F){var N,ee;ee=String,typeof y!="string"&&!(y instanceof String)&&(y=ee(y)),_=p,f=y,d=0,g=f.length>0?1:0,b=0,m=f.length,D=null,C={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},A={},typeof F<"u"&&(A.range=typeof F.range=="boolean"&&F.range,A.loc=typeof F.loc=="boolean"&&F.loc,A.attachComment=typeof F.attachComment=="boolean"&&F.attachComment,A.loc&&F.source!==null&&F.source!==void 0&&(A.source=ee(F.source)),typeof F.tokens=="boolean"&&F.tokens&&(A.tokens=[]),typeof F.comment=="boolean"&&F.comment&&(A.comments=[]),typeof F.tolerant=="boolean"&&F.tolerant&&(A.errors=[]),A.attachComment&&(A.range=!0,A.comments=[],A.bottomRightStack=[],A.trailingComments=[],A.leadingComments=[]));try{N=Js(),typeof A.comments<"u"&&(N.comments=A.comments),typeof A.tokens<"u"&&(Ru(),N.tokens=A.tokens),typeof A.errors<"u"&&(N.errors=A.errors)}catch(pe){throw pe}finally{A={}}return N}e.version="1.2.5",e.tokenize=Zi,e.parse=ca,e.Syntax=function(){var y,F={};typeof Object.create=="function"&&(F=Object.create(null));for(y in a)a.hasOwnProperty(y)&&(F[y]=a[y]);return typeof Object.freeze=="function"&&Object.freeze(F),F}()})})(jp);var BC=jp,P0=Lp,OC=0;function MC(t,e,r){this.name=t,this.lvalue=e,this.rvalue=r,this.count=0}function PC(t,e,r,n){this.body=t,this.args=e,this.thisVars=r,this.localVars=n}function TC(t){if(t==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?t in window:typeof dr<"u"?t in dr:typeof self<"u"?t in self:!1}function xC(t){for(var e=t.body[0].expression.callee.params,r=new Array(e.length),n=0;n<e.length;++n)r[n]=e[n].name;return r}function IC(t){for(var e=["(",t,")()"].join(""),r=BC.parse(e,{range:!0}),n="_inline_"+OC+++"_",i=xC(r),a=new Array(i.length),o=0;o<i.length;++o)a[o]=new MC([n,"arg",o,"_"].join(""),!1,!1);for(var s=new Array(e.length),o=0,c=e.length;o<c;++o)s[o]=e.charAt(o);var p=[],f=[];function h(B){var E=n+B.replace(/\_/g,"__");return p.push(E),E}function d(B){var E="this_"+B.replace(/\_/g,"__");return f.push(E),E}function g(B,E){for(var O=B.range[0],P=B.range[1],x=O+1;x<P;++x)s[x]="";s[O]=E}function b(B){return"'"+B.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function m(B){return s.slice(B.range[0],B.range[1]).join("")}var _=1,D=2;function C(B){return B.parent.type==="AssignmentExpression"&&B.parent.left===B?B.parent.operator==="="?_:_|D:B.parent.type==="UpdateExpression"?_|D:D}(function B(E,O){if(E.parent=O,E.type==="MemberExpression")E.computed?(B(E.object,E),B(E.property,E)):E.object.type==="ThisExpression"?g(E,d(E.property.name)):B(E.object,E);else{if(E.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(E.type==="Identifier"){var P=E.name,x=i.indexOf(P);if(x>=0){var R=a[x],G=C(E);G&_&&(R.lvalue=!0),G&D&&(R.rvalue=!0),++R.count,g(E,R.name)}else TC(P)||g(E,h(P))}else if(E.type==="Literal")typeof E.value=="string"&&g(E,b(E.value));else{if(E.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var re=Object.keys(E),U=0,X=re.length;U<X;++U)if(re[U]!=="parent"){var H=E[re[U]];if(H)if(H instanceof Array)for(var V=0;V<H.length;++V)H[V]&&typeof H[V].type=="string"&&B(H[V],E);else typeof H.type=="string"&&B(H,E)}}}})(r.body[0].expression.callee.body,void 0),P0(p),P0(f);var A=new PC(m(r.body[0].expression.callee.body),a,f,p);return A}var kC=IC,pl=kC,NC=Cf,Qa=["args","body"],RC=["pre","post","printCode","funcName","blockSize"];function LC(t){for(var e in t)Qa.indexOf(e)<0&&RC.indexOf(e)<0&&console.warn("cwise: Unknown argument '"+e+"' passed to expression compiler");for(var r=0;r<Qa.length;++r)if(!t[Qa[r]])throw new Error("cwise: Missing argument: "+Qa[r]);return NC({args:t.args,pre:pl(t.pre||function(){}),body:pl(t.body),post:pl(t.post||function(){}),debug:!!t.printCode,funcName:t.funcName||t.body.name||"cwise",blockSize:t.blockSize||64})}var Gs=LC,UC=SC,VC=Gs,jC=VC({args:["array","scalar","index"],body:function(e,r,n){var i=r,a;for(a=0;a<n.length-1;++a)i=i[n[a]];i[n[n.length-1]]=e}}),qC=function(e){var r=UC(e.shape);return jC(e,r),r},bs={},zC={get exports(){return bs},set exports(t){bs=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(o,s){for(var c=new Float64Array(o*s),p=0;p<c.length;p++)c[p]=a()*1e-4;return(0,n.default)(c,[o,s])};var r=wu,n=i(r);function i(o){return o&&o.__esModule?o:{default:o}}function a(){var o=2*Math.random()-1,s=2*Math.random()-1,c=o*o+s*s;return c==0||c>1?a():o*Math.sqrt(-2*Math.log(c)/c)}t.exports=e.default})(zC,bs);var ua={},WC={get exports(){return ua},set exports(t){ua=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(h,d){var g=h.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]);switch(d){case"euclidean":for(var m=0;m<g;m++)for(var _=m+1;_<g;_++){var D=s(h.pick(m,null),h.pick(_,null));b.set(m,_,D),b.set(_,m,D)}break;case"manhattan":for(var m=0;m<g;m++)for(var _=m+1;_<g;_++){var D=c(h.pick(m,null),h.pick(_,null));b.set(m,_,D),b.set(_,m,D)}break;case"jaccard":for(var m=0;m<g;m++)for(var _=m+1;_<g;_++){var D=p(h.pick(m,null),h.pick(_,null));b.set(m,_,D),b.set(_,m,D)}break;case"dice":for(var m=0;m<g;m++)for(var _=m+1;_<g;_++){var D=f(h.pick(m,null),h.pick(_,null));b.set(m,_,D),b.set(_,m,D)}break}return b};var r=wu,n=o(r),i=Gs,a=o(i);function o(h){return h&&h.__esModule?h:{default:h}}var s=(0,a.default)({args:["array","array"],pre:function(d,g){this.sum=0},body:function(d,g){var b=d-g;this.sum+=b*b},post:function(d,g){return Math.sqrt(this.sum)}}),c=(0,a.default)({args:["array","array"],pre:function(d,g){this.sum=0},body:function(d,g){this.sum+=Math.abs(d-g)},post:function(d,g){return this.sum}}),p=(0,a.default)({args:["array","array"],pre:function(d,g){this.tf=0,this.tt=0},body:function(d,g){var b=Math.round(d),m=Math.round(g);this.tf+=+(b!=m),this.tt+=+(b==1&&m==1)},post:function(d,g){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),f=(0,a.default)({args:["array","array"],pre:function(d,g){this.tf=0,this.tt=0},body:function(d,g){var b=Math.round(d),m=Math.round(g);this.tf+=+(b!=m),this.tt+=+(b==1&&m==1)},post:function(d,g){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});t.exports=e.default})(WC,ua);var ys={},HC={get exports(){return ys},set exports(t){ys=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(f,h){for(var d=100,g=f.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]),m=(0,n.default)(new Float64Array(g*g),[g,g]),_=void 0,D=void 0,C=1/0,A=Math.log(h),B=void 0,E=void 0,O=void 0,P=void 0,x=0;x<g;x++){_=1,D=-1/0,C=1/0;for(var R=0;R<d;R++){for(var G=0;G<g;G++)b.set(x,G,Math.exp(-f.get(x,G)*_));b.set(x,x,0),O=0;for(var G=0;G<g;G++)O+=b.get(x,G);O==0&&(O=s),P=0;for(var G=0;G<g;G++)b.set(x,G,b.get(x,G)/O),P+=f.get(x,G)*b.get(x,G);if(E=Math.log(O)+_*P,B=E-A,Math.abs(B)<=p)break;B>0?(D=_,C==1/0?_=_*2:_=(_+C)/2):(C=_,D==-1/0?_=_/2:_=(_+D)/2)}}a.default.add(m,b,b.transpose(1,0));var re=Math.max(a.default.sum(m),c);return a.default.divseq(m,re),a.default.maxseq(m,c),m};var r=wu,n=o(r),i=Hs,a=o(i);function o(f){return f&&f.__esModule?f:{default:f}}var s=1e-7,c=Number.EPSILON||2220446049250313e-31,p=1e-5;t.exports=e.default})(HC,ys);var ws={},GC={get exports(){return ws},set exports(t){ws=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(g,b,m){var _=g.shape[0],D=g.shape[1],C=(0,n.default)(new Float64Array(_*_),[_,_]),A=(0,p.default)(g,"euclidean");d(A);var B=(m+1)/-2;a.default.powseq(a.default.divseq(a.default.addseq(A,1),m),B);for(var E=0;E<_;E++)A.set(E,E,0);var O=Math.max(a.default.sum(A),h);a.default.divs(C,A,O),a.default.maxseq(C,h);var P=(0,n.default)(new Float64Array(_*_),[_,_]),x=(0,n.default)(new Float64Array(_*_),[_,_]);a.default.div(P,b,C),a.default.logeq(P),a.default.assign(x,b);var R=a.default.sum(a.default.muleq(P,x)),G=(0,n.default)(new Float64Array(g.size),g.shape),re=(0,n.default)(new Float64Array(_*_),[_,_]);a.default.sub(re,b,C),a.default.muleq(re,A);for(var E=0;E<_;E++)for(var U=0;U<D;U++){var X=(0,n.default)(new Float64Array(g.shape[0]),[g.shape[0]]);a.default.assign(X,g.pick(null,U)),a.default.addseq(a.default.negeq(X),g.get(E,U)),a.default.muleq(X,re.pick(E,null)),G.set(E,U,a.default.sum(X))}var H=2*(m+1)/m;return a.default.mulseq(G,H),[R,G]};var r=wu,n=f(r),i=Hs,a=f(i),o=Gs,s=f(o),c=ua,p=f(c);function f(g){return g&&g.__esModule?g:{default:g}}var h=Number.EPSILON||2220446049250313e-31,d=(0,s.default)({args:["array"],body:function(b){}});t.exports=e.default})(GC,ws);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function X(H,V){var W=[],Q=!0,Y=!1,J=void 0;try{for(var le=H[Symbol.iterator](),me;!(Q=(me=le.next()).done)&&(W.push(me.value),!(V&&W.length===V));Q=!0);}catch(Ce){Y=!0,J=Ce}finally{try{!Q&&le.return&&le.return()}finally{if(Y)throw J}}return W}return function(H,V){if(Array.isArray(H))return H;if(Symbol.iterator in Object(H))return X(H,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function X(H,V){for(var W=0;W<V.length;W++){var Q=V[W];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(H,Q.key,Q)}}return function(H,V,W){return V&&X(H.prototype,V),W&&X(H,W),H}}(),i=_s,a=wu,o=P(a),s=Hs,c=P(s),p=EC,f=P(p),h=qC,d=P(h),g=Gs,b=P(g),m=bs,_=P(m),D=ua,C=P(D),A=ys,B=P(A),E=ws,O=P(E);function P(X){return X&&X.__esModule?X:{default:X}}function x(X){if(Array.isArray(X)){for(var H=0,V=Array(X.length);H<X.length;H++)V[H]=X[H];return V}else return Array.from(X)}function R(X,H){if(!(X instanceof H))throw new TypeError("Cannot call a class as a function")}function G(X,H){if(!X)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:X}function re(X,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);X.prototype=Object.create(H&&H.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(X,H):X.__proto__=H)}var U=function(X){re(H,X);function H(V){R(this,H);var W=G(this,Object.getPrototypeOf(H).call(this));return V=V||{},W.dim=V.dim||2,W.perplexity=V.perplexity||30,W.earlyExaggeration=V.earlyExaggeration||4,W.learningRate=V.learningRate||1e3,W.nIter=V.nIter||1e3,W.metric=V.metric||"euclidean",W.barneshut=V.barneshut||!1,W.inputData=null,W.outputEmbedding=null,W}return n(H,[{key:"init",value:function(W){W=W||{};var Q=W.data||[],Y=W.type||"dense";if(Y==="dense")this.inputData=(0,f.default)(Q);else if(Y==="sparse"){for(var J=[],le=1,me=function(pt){var ut=Math.max.apply(null,Q.map(function(lt){return lt[pt]}))+1;J.push(ut),le*=ut},Ce=0;Ce<Q[0].length;Ce++)me(Ce);this.inputData=(0,o.default)(new Float64Array(le),J);var Ae=!0,Pe=!1,Ve=void 0;try{for(var Ie=Q[Symbol.iterator](),Xe;!(Ae=(Xe=Ie.next()).done);Ae=!0){var ze,Re=Xe.value;(ze=this.inputData).set.apply(ze,x(Re).concat([1]))}}catch(je){Pe=!0,Ve=je}finally{try{!Ae&&Ie.return&&Ie.return()}finally{if(Pe)throw Ve}}}else throw new Error("input data type must be dense or sparse");this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,C.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,B.default)(this.distances,this.perplexity);var W=Number.MAX_VALUE,Q=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),c.default.mulseq(this.P,this.earlyExaggeration);var Y=this._gradDesc(Q,50,.5,0,0),J=r(Y,2);W=J[0],Q=J[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var le=this._gradDesc(Q+1,100,.8,0,0),me=r(le,2);W=me[0],Q=me[1],this.emit("progressStatus","Final optimization with momentum 0.8"),c.default.divseq(this.P,this.earlyExaggeration);var Ce=this._gradDesc(Q+1,this.nIter,.8,1e-6,1e-6),Ae=r(Ce,2);return W=Ae[0],Q=Ae[1],this.emit("progressStatus","Optimization end"),[W,Q]}},{key:"rerun",value:function(){this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim);var W=this.run(),Q=r(W,2),Y=Q[0],J=Q[1];return[Y,J]}},{key:"getOutput",value:function(){return(0,d.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var W=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),Q=(0,o.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),Y=0;Y<this.outputEmbedding.shape[1];Y++){var J=c.default.sup(c.default.abs(Q,this.outputEmbedding.pick(null,Y)));c.default.divs(W.pick(null,Y),this.outputEmbedding.pick(null,Y),J)}return(0,d.default)(W)}},{key:"_gradDesc",value:function(W,Q,Y){for(var J=arguments.length<=3||arguments[3]===void 0?1e-6:arguments[3],le=arguments.length<=4||arguments[4]===void 0?1e-6:arguments[4],me=30,Ce=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),Ae=new Float64Array(this.outputEmbedding.size),Pe=0;Pe<Ae.length;Pe++)Ae[Pe]=1;var Ve=(0,o.default)(Ae,this.outputEmbedding.shape),Ie=Number.MAX_VALUE,Xe=Number.MAX_VALUE,ze=0,Re=(0,b.default)({args:["array"],pre:function(Bt){this.sum=0},body:function(Bt){this.sum+=Bt*Bt},post:function(Bt){return Math.sqrt(this.sum)}}),je=(0,b.default)({args:["array","array","array"],body:function(Bt,Vt,Ht){}}),pt=void 0;for(pt=W;pt<Q;pt++){var ut=(0,O.default)(this.outputEmbedding,this.P,this.alpha),lt=r(ut,2),at=lt[0],st=lt[1],Ke=Math.abs(at-Ie);Ie=at;var $e=Re(st);if(this.emit("progressIter",[pt,Ie,$e]),Ie<Xe)Xe=Ie,ze=pt;else if(pt-ze>me)break;if(J>=$e||le>=Ke)break;je(Ve,Ce,st),c.default.muleq(st,Ve);var Ee=(0,o.default)(new Float64Array(st.size),st.shape);c.default.muls(Ee,st,this.learningRate),c.default.mulseq(Ce,Y),c.default.subeq(Ce,Ee),c.default.addeq(this.outputEmbedding,Ce),this.emit("progressData",this.getOutputScaled())}return[Ie,pt]}}]),H}(i.EventEmitter);e.default=U,t.exports=e.default})(j2,ms);const KC=mf(ms);var Jl={},$C={get exports(){return Jl},set exports(t){Jl=t}},As={},YC={get exports(){return As},set exports(t){As=t}},T0;function ZC(){return T0||(T0=1,function(t){function e(r,n,i,a){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,i,a)}e.prototype.run=function(r,n,i,a){this._init(r,n,i,a);for(var o=0;o<this._datasetLength;o++)if(this._visited[o]!==1){this._visited[o]=1;var s=this._regionQuery(o);if(s.length<this.minPts)this.noise.push(o);else{var c=this.clusters.length;this.clusters.push([]),this._addToCluster(o,c),this._expandCluster(c,s)}}return this.clusters},e.prototype._init=function(r,n,i,a){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),i&&(this.minPts=i),a&&(this.distance=a)},e.prototype._expandCluster=function(r,n){for(var i=0;i<n.length;i++){var a=n[i];if(this._visited[a]!==1){this._visited[a]=1;var o=this._regionQuery(a);o.length>=this.minPts&&(n=this._mergeArrays(n,o))}this._assigned[a]!==1&&this._addToCluster(a,r)}},e.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1},e.prototype._regionQuery=function(r){for(var n=[],i=0;i<this._datasetLength;i++){var a=this.distance(this.dataset[r],this.dataset[i]);a<this.epsilon&&n.push(i)}return n},e.prototype._mergeArrays=function(r,n){for(var i=n.length,a=0;a<i;a++){var o=n[a];r.indexOf(o)<0&&r.push(o)}return r},e.prototype._euclideanDistance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;)i+=(r[a]-n[a])*(r[a]-n[a]);return Math.sqrt(i)},t.exports&&(t.exports=e)}(YC)),As}var Es={},XC={get exports(){return Es},set exports(t){Es=t}},x0;function JC(){return x0||(x0=1,function(t){function e(r,n,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,i)}e.prototype.init=function(r,n,i){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof i<"u"&&(this.distance=i)},e.prototype.run=function(r,n){this.init(r,n);for(var i=this.dataset.length,a=0;a<this.k;a++)this.centroids[a]=this.randomCentroid();for(var o=!0;o;){o=this.assign();for(var s=0;s<this.k;s++){for(var c=new Array(d),p=0,f=0;f<d;f++)c[f]=0;for(var h=0;h<i;h++){var d=this.dataset[h].length;if(s===this.assignments[h]){for(var f=0;f<d;f++)c[f]+=this.dataset[h][f];p++}}if(p>0){for(var f=0;f<d;f++)c[f]/=p;this.centroids[s]=c}else this.centroids[s]=this.randomCentroid(),o=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,i;do i=Math.round(Math.random()*r),n=this.dataset[i];while(this.centroids.indexOf(n)>=0);return n},e.prototype.assign=function(){for(var r=!1,n=this.dataset.length,i,a=0;a<n;a++)i=this.argmin(this.dataset[a],this.centroids,this.distance),i!=this.assignments[a]&&(this.assignments[a]=i,r=!0);return r},e.prototype.getClusters=function(){for(var r=new Array(this.k),n,i=0;i<this.assignments.length;i++)n=this.assignments[i],typeof r[n]>"u"&&(r[n]=[]),r[n].push(i);return r},e.prototype.argmin=function(r,n,i){for(var a=Number.MAX_VALUE,o=0,s=n.length,c,p=0;p<s;p++)c=i(r,n[p]),c<a&&(a=c,o=p);return o},e.prototype.distance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;){var o=r[a]-n[a];i+=o*o}return Math.sqrt(i)},t.exports&&(t.exports=e)}(XC)),Es}var Cs={},QC={get exports(){return Cs},set exports(t){Cs=t}},Fs={},eF={get exports(){return Fs},set exports(t){Fs=t}},I0;function qp(){return I0||(I0=1,function(t){function e(r,n,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,i)}e.prototype.insert=function(r,n){for(var i=this._queue.length,a=i;a--;){var o=this._priorities[a];this._sorting==="desc"?n>o&&(i=a):n<o&&(i=a)}this._insertAt(r,n,i)},e.prototype.remove=function(r){for(var n=this._queue.length;n--;){var i=this._queue[n];if(r===i){this._queue.splice(n,1),this._priorities.splice(n,1);break}}},e.prototype.forEach=function(r){this._queue.forEach(r)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(r){return this._priorities[r]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,i=this._queue.length;n<i;n++)r.push([this._queue[n],this._priorities[n]]);return r},e.prototype._init=function(r,n,i){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var a=0;a<r.length;a++)this.insert(r[a],n[a])}i&&(this._sorting=i)},e.prototype._insertAt=function(r,n,i){this._queue.length===i?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(i,0,r),this._priorities.splice(i,0,n))},t.exports&&(t.exports=e)}(eF)),Fs}var k0;function tF(){return k0||(k0=1,function(t){if(t.exports)var e=qp();function r(n,i,a,o){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,i,a,o)}r.prototype.run=function(n,i,a,o){this._init(n,i,a,o);for(var s=0,c=this.dataset.length;s<c;s++)if(this._processed[s]!==1){this._processed[s]=1,this.clusters.push([s]);var p=this.clusters.length-1;this._orderedList.push(s);var f=new e(null,null,"asc"),h=this._regionQuery(s);this._distanceToCore(s)!==void 0&&(this._updateQueue(s,h,f),this._expandCluster(p,f))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var n=[],i=0,a=this._orderedList.length;i<a;i++){var o=this._orderedList[i],s=this._reachability[o];n.push([o,s])}return n},r.prototype._init=function(n,i,a,o){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}i&&(this.epsilon=i),a&&(this.minPts=a),o&&(this.distance=o)},r.prototype._updateQueue=function(n,i,a){var o=this;this._coreDistance=this._distanceToCore(n),i.forEach(function(s){if(o._processed[s]===void 0){var c=o.distance(o.dataset[n],o.dataset[s]),p=Math.max(o._coreDistance,c);o._reachability[s]===void 0?(o._reachability[s]=p,a.insert(s,p)):p<o._reachability[s]&&(o._reachability[s]=p,a.remove(s),a.insert(s,p))}})},r.prototype._expandCluster=function(n,i){for(var a=i.getElements(),o=0,s=a.length;o<s;o++){var c=a[o];if(this._processed[c]===void 0){var p=this._regionQuery(c);this._processed[c]=1,this.clusters[n].push(c),this._orderedList.push(c),this._distanceToCore(c)!==void 0&&(this._updateQueue(c,p,i),this._expandCluster(n,i))}}},r.prototype._distanceToCore=function(n){for(var i=this.epsilon,a=0;a<i;a++){var o=this._regionQuery(n,a);if(o.length>=this.minPts)return a}},r.prototype._regionQuery=function(n,i){i=i||this.epsilon;for(var a=[],o=0,s=this.dataset.length;o<s;o++)this.distance(this.dataset[n],this.dataset[o])<i&&a.push(o);return a},r.prototype._euclideanDistance=function(n,i){for(var a=0,o=Math.min(n.length,i.length);o--;)a+=(n[o]-i[o])*(n[o]-i[o]);return Math.sqrt(a)},t.exports&&(t.exports=r)}(QC)),Cs}(function(t){t.exports&&(t.exports={DBSCAN:ZC(),KMEANS:JC(),OPTICS:tF(),PriorityQueue:qp()})})($C);var Ql={},rF={get exports(){return Ql},set exports(t){Ql=t}};(function(t){var e=parseInt(Number.MAX_SAFE_INTEGER/2)||4503599627370496,r=0;function n(){this.C=null,this.row_covered=[],this.col_covered=[],this.n=0,this.Z0_r=0,this.Z0_c=0,this.marked=null,this.path=null}n.prototype.pad_matrix=function(s,c){c=c||r;var p=0,f=s.length,h;for(h=0;h<f;++h)s[h].length>p&&(p=s[h].length);f=p>f?p:f;var d=[];for(h=0;h<f;++h){for(var g=s[h]||[],b=g.slice();f>b.length;)b.push(c);d.push(b)}return d},n.prototype.compute=function(s,c){c=c||{},c.padValue=c.padValue||r,this.C=this.pad_matrix(s,c.padValue),this.n=this.C.length,this.original_length=s.length,this.original_width=s[0].length;for(var p=[];p.length<this.n;)p.push(!1);this.row_covered=p.slice(),this.col_covered=p.slice(),this.Z0_r=0,this.Z0_c=0,this.path=this.__make_matrix(this.n*2,0),this.marked=this.__make_matrix(this.n,0);for(var f=1,h={1:this.__step1,2:this.__step2,3:this.__step3,4:this.__step4,5:this.__step5,6:this.__step6};;){var d=h[f];if(!d)break;f=d.apply(this)}for(var g=[],b=0;b<this.original_length;++b)for(var m=0;m<this.original_width;++m)this.marked[b][m]==1&&g.push([b,m]);return g},n.prototype.__make_matrix=function(s,c){for(var p=[],f=0;f<s;++f){p[f]=[];for(var h=0;h<s;++h)p[f][h]=c}return p},n.prototype.__step1=function(){for(var s=0;s<this.n;++s)for(var c=Math.min.apply(Math,this.C[s]),p=0;p<this.n;++p)this.C[s][p]-=c;return 2},n.prototype.__step2=function(){for(var s=0;s<this.n;++s)for(var c=0;c<this.n;++c)if(this.C[s][c]===0&&!this.col_covered[c]&&!this.row_covered[s]){this.marked[s][c]=1,this.col_covered[c]=!0,this.row_covered[s]=!0;break}return this.__clear_covers(),3},n.prototype.__step3=function(){for(var s=0,c=0;c<this.n;++c)for(var p=0;p<this.n;++p)this.marked[c][p]==1&&this.col_covered[p]==!1&&(this.col_covered[p]=!0,++s);return s>=this.n?7:4},n.prototype.__step4=function(){for(var s=!1,c=-1,p=-1,f=-1;!s;){var h=this.__find_a_zero();if(c=h[0],p=h[1],c<0)return 6;if(this.marked[c][p]=2,f=this.__find_star_in_row(c),f>=0)p=f,this.row_covered[c]=!0,this.col_covered[p]=!1;else return this.Z0_r=c,this.Z0_c=p,5}},n.prototype.__step5=function(){var s=0;this.path[s][0]=this.Z0_r,this.path[s][1]=this.Z0_c;for(var c=!1;!c;){var p=this.__find_star_in_col(this.path[s][1]);if(p>=0?(s++,this.path[s][0]=p,this.path[s][1]=this.path[s-1][1]):c=!0,!c){var f=this.__find_prime_in_row(this.path[s][0]);s++,this.path[s][0]=this.path[s-1][0],this.path[s][1]=f}}return this.__convert_path(this.path,s),this.__clear_covers(),this.__erase_primes(),3},n.prototype.__step6=function(){for(var s=this.__find_smallest(),c=0;c<this.n;++c)for(var p=0;p<this.n;++p)this.row_covered[c]&&(this.C[c][p]+=s),this.col_covered[p]||(this.C[c][p]-=s);return 4},n.prototype.__find_smallest=function(){for(var s=e,c=0;c<this.n;++c)for(var p=0;p<this.n;++p)!this.row_covered[c]&&!this.col_covered[p]&&s>this.C[c][p]&&(s=this.C[c][p]);return s},n.prototype.__find_a_zero=function(){for(var s=0;s<this.n;++s)for(var c=0;c<this.n;++c)if(this.C[s][c]===0&&!this.row_covered[s]&&!this.col_covered[c])return[s,c];return[-1,-1]},n.prototype.__find_star_in_row=function(s){for(var c=0;c<this.n;++c)if(this.marked[s][c]==1)return c;return-1},n.prototype.__find_star_in_col=function(s){for(var c=0;c<this.n;++c)if(this.marked[c][s]==1)return c;return-1},n.prototype.__find_prime_in_row=function(s){for(var c=0;c<this.n;++c)if(this.marked[s][c]==2)return c;return-1},n.prototype.__convert_path=function(s,c){for(var p=0;p<=c;++p)this.marked[s[p][0]][s[p][1]]=this.marked[s[p][0]][s[p][1]]==1?0:1},n.prototype.__clear_covers=function(){for(var s=0;s<this.n;++s)this.row_covered[s]=!1,this.col_covered[s]=!1},n.prototype.__erase_primes=function(){for(var s=0;s<this.n;++s)for(var c=0;c<this.n;++c)this.marked[s][c]==2&&(this.marked[s][c]=0)};function i(s,c){var p,f;if(!c){var h=-1/0;for(p=0;p<s.length;++p)for(f=0;f<s[p].length;++f)s[p][f]>h&&(h=s[p][f]);c=function(b){return h-b}}var d=[];for(p=0;p<s.length;++p){var g=s[p];for(d[p]=[],f=0;f<g.length;++f)d[p][f]=c(s[p][f])}return d}function a(s){var c=[],p,f;for(p=0;p<s.length;++p)for(f=0;f<s[p].length;++f){var h=String(s[p][f]).length;(!c[f]||h>=c[f])&&(c[f]=h)}var d="";for(p=0;p<s.length;++p){for(f=0;f<s[p].length;++f){for(var g=String(s[p][f]);g.length<c[f];)g=" "+g;d+=g,f!=s[p].length-1&&(d+=" ")}p!=s[p].length-1&&(d+=`
`)}return d}function o(s,c){var p=new n;return p.compute(s,c)}o.version="1.2.2",o.format_matrix=a,o.make_cost_matrix=i,o.Munkres=n,t.exports&&(t.exports=o)})(rF);const nF=Ql;function N0(t,e,r){const n=t.slice();return n[31]=e[r][0],n[32]=e[r][1],n}function R0(t){let e=[],r=new Map,n,i,a,o=Object.entries(t[4].weightedPrompts);const s=c=>c[31];for(let c=0;c<o.length;c+=1){let p=N0(t,o,c),f=s(p);r.set(f,e[c]=U0(f,p))}return i=new yu({props:{xy:t[7],radius:t[1],color:"rgba(136,157,191, 1)",handleMouseDown:t[19]}}),{c(){for(let c=0;c<e.length;c+=1)e[c].c();n=Rt(),tt(i.$$.fragment)},l(c){for(let p=0;p<e.length;p+=1)e[p].l(c);n=Rt(),rt(i.$$.fragment,c)},m(c,p){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(c,p);be(c,n,p),nt(i,c,p),a=!0},p(c,p){p[0]&221&&(o=Object.entries(c[4].weightedPrompts),Nr(),e=Oi(e,p,s,1,c,o,r,n.parentNode,Kd,U0,n,N0),Rr());const f={};p[0]&128&&(f.xy=c[7]),p[0]&2&&(f.radius=c[1]),p[0]&32&&(f.handleMouseDown=c[19]),i.$set(f)},i(c){if(!a){for(let p=0;p<o.length;p+=1)we(e[p]);we(i.$$.fragment,c),a=!0}},o(c){for(let p=0;p<e.length;p+=1)Se(e[p]);Se(i.$$.fragment,c),a=!1},d(c){for(let p=0;p<e.length;p+=1)e[p].d(c);c&&k(n),it(i,c)}}}function L0(t){let e,r;return e=new Bp({props:{p1:t[6][t[31]].embedXY,p2:t[7]}}),{c(){tt(e.$$.fragment)},l(n){rt(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},p(n,i){const a={};i[0]&80&&(a.p1=n[6][n[31]].embedXY),i[0]&128&&(a.p2=n[7]),e.$set(a)},i(n){r||(we(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){it(e,n)}}}function U0(t,e){let r,n,i,a,o,s=e[32].embedActive&&L0(e);return i=new yu({props:{xy:e[6][e[31]].embedXY,radius:e[0],color:"rgba(136,157,191, 1)"}}),a=new oa({props:{xy:[e[6][e[31]].embedXY[0]-kr(e[2],e[32].text.length,e[3])[0]/2,e[6][e[31]].embedXY[1]+e[0]],color:`rgba(255,255,255,${Er(e[32].embedWeight)}`,wh:kr(e[2],e[32].text.length,e[3]),fontSize:e[3],text:e[32].text}}),{key:t,first:null,c(){r=Rt(),s&&s.c(),n=Rt(),tt(i.$$.fragment),tt(a.$$.fragment),this.h()},l(c){r=Rt(),s&&s.l(c),n=Rt(),rt(i.$$.fragment,c),rt(a.$$.fragment,c),this.h()},h(){this.first=r},m(c,p){be(c,r,p),s&&s.m(c,p),be(c,n,p),nt(i,c,p),nt(a,c,p),o=!0},p(c,p){e=c,e[32].embedActive?s?(s.p(e,p),p[0]&16&&we(s,1)):(s=L0(e),s.c(),we(s,1),s.m(n.parentNode,n)):s&&(Nr(),Se(s,1,1,()=>{s=null}),Rr());const f={};p[0]&80&&(f.xy=e[6][e[31]].embedXY),p[0]&1&&(f.radius=e[0]),i.$set(f);const h={};p[0]&93&&(h.xy=[e[6][e[31]].embedXY[0]-kr(e[2],e[32].text.length,e[3])[0]/2,e[6][e[31]].embedXY[1]+e[0]]),p[0]&16&&(h.color=`rgba(255,255,255,${Er(e[32].embedWeight)}`),p[0]&28&&(h.wh=kr(e[2],e[32].text.length,e[3])),p[0]&8&&(h.fontSize=e[3]),p[0]&16&&(h.text=e[32].text),a.$set(h)},i(c){o||(we(s),we(i.$$.fragment,c),we(a.$$.fragment,c),o=!0)},o(c){Se(s),Se(i.$$.fragment,c),Se(a.$$.fragment,c),o=!1},d(c){c&&k(r),s&&s.d(c),c&&k(n),it(i,c),it(a,c)}}}function iF(t){let e,r=Object.entries(t[4].weightedPrompts).length>0&&Object.entries(t[6]||{}).length>0,n,i,a,o=r&&R0(t);return{c(){e=vt("svg"),o&&o.c(),this.h()},l(s){e=mt(s,"svg",{id:!0,class:!0});var c=$(e);o&&o.l(c),c.forEach(k),this.h()},h(){M(e,"id","svg"),M(e,"class","w-full h-full")},m(s,c){be(s,e,c),o&&o.m(e,null),n=!0,i||(a=[Oe(e,"mousemove",t[9]),Oe(e,"mouseup",t[10]),Oe(e,"dblclick",t[8])],i=!0)},p(s,c){c[0]&80&&(r=Object.entries(s[4].weightedPrompts).length>0&&Object.entries(s[6]||{}).length>0),r?o?(o.p(s,c),c[0]&80&&we(o,1)):(o=R0(s),o.c(),we(o,1),o.m(e,null)):o&&(Nr(),Se(o,1,1,()=>{o=null}),Rr())},i(s){n||(we(o),n=!0)},o(s){Se(o),n=!1},d(s){s&&k(e),o&&o.d(),i=!1,fr(a)}}}function uF(t,e,r){let n,i,a,o,s;Dt(t,Cr,Y=>r(4,s=Y));let{center:c=[100,100]}=e,{dimensions:p=[100,100]}=e,{pointRadius:f=4}=e,{markerRadius:h=10}=e,{textWidth:d=150}=e,{fontSize:g=12}=e,{innerPad:b=100}=e,m=!1,_=null,D=p,C=[0,0];function A(){return{"00":[C[0],C[1]],"01":[C[0],C[1]+D[1]],11:[C[0]+D[0],C[1]+D[1]],10:[C[0]+D[0],C[1]]}}function B(Y,J){return Y.map(le=>J.map(me=>us(le,me)))}function E(Y,J){if(Y.length!==J.length)throw new Error("Both sets should have the same number of points");const le=B(Y,J),me=nF(le);return me?me.map(([Ce,Ae])=>({ids:[Ce,Ae],points:[Y[Ce],J[Ae]]})):null}function O(Y){const J=Y.reduce((le,me)=>Gr(le,me),[0,0]);return An(J,1/Y.length)}function P(Y){const J=A();switch(Y){case 2:return[An(Gr(J["00"],J["01"]),.5),An(Gr(J[10],J[11]),.5)];case 4:return[J["00"],J["01"],J[11],J[10]];case 6:return[An(Gr(J["00"],J["01"]),.5),An(Gr(J[10],J[11]),.5),J["00"],J["01"],J[11],J[10]];case 8:return[An(Gr(J["00"],J["01"]),.5),An(Gr(J[10],J[11]),.5),J["00"],J["01"],J[11],J[10],An(Gr(J["00"],J[10]),.5),An(Gr(J["01"],J[11]),.5)];default:return null}}function x(Y){s.embeddings&&s.scaledEmbedMappings&&(W(),U(n,i,a,D,Y))}function R(Y,J){Y&&J&&(W(),U(n,i,a,D,o))}function G(Y,J){U(n,Y,J,D,o)}function re(Y){s.embeddings&&s.scaledEmbedMappings&&(W(),U(n,i,a,Y,o))}function U(Y,J,le,me,Ce){if(!_)return;let Ae={...s.weightedPrompts},Pe=0;Object.values(_).forEach(ze=>{Object.values(_).forEach(Re=>{const je=us(ze.embedXY,Re.embedXY);je>Pe&&(Pe=je)})});const Ve=Object.entries(_).reduce((ze,[Re,je])=>{const pt=us(Y,je.embedXY);return ze[Re]=pt,ze},{}),Ie=(ze,Re)=>{const je=ze?Math.round(Math.pow(1-Re/Pe,le)*100)/100:0;return je<0?0:je},Xe=(ze,Re)=>{const je=ze?Math.round((1-Re/Pe)*100)/100:0;return je<0?0:je};Object.entries(Ve).sort((ze,Re)=>ze[1]-Re[1]).forEach(([ze,Re],je)=>{if(!Ae[ze])return;const pt=je<Ce;Ae[ze]={...Ae[ze],embedWeight:J?Ie(pt,Re):Xe(pt,Re),embedActive:pt}}),Ot.update({...s,embedMarker:n,weightedPrompts:Ae})}function X(Y){const J=li(Y,svg);r(7,n=J),U(n,i,a,D,o)}function H(Y){if(m){const J=li(Y,svg);r(7,n=J),U(n,i,a,D,o)}}function V(Y){r(5,m=!1)}function W(){const J=Object.keys(s.scaledEmbedMappings).reduce((me,Ce,Ae)=>(me[Ce]={embedXY:[C[0]+D[0]*s.scaledEmbedMappings[Ae][0],C[1]+D[1]*s.scaledEmbedMappings[Ae][1]]},me),{}),le=me=>{if(!me.length)return c;const Ce=me.map(Ae=>J[Ae].embedXY);return O(Ce)};if(s.embedClusters){const me=s.embedClusters,Ce=s.embedClusterSets[me];let Ae=Ce.map(Ie=>le(Ie));const Pe=P(me),Ve=E(Ae,Pe);Ve&&Ve.forEach(Ie=>{const Xe=Ie.ids[0],ze=Ie.points[1];Ce[Xe].forEach(Re=>{J[Re].embedXY=O([J[Re].embedXY,ze])})})}r(6,_=J)}const Q=()=>r(5,m=!0);return t.$$set=Y=>{"center"in Y&&r(11,c=Y.center),"dimensions"in Y&&r(12,p=Y.dimensions),"pointRadius"in Y&&r(0,f=Y.pointRadius),"markerRadius"in Y&&r(1,h=Y.markerRadius),"textWidth"in Y&&r(2,d=Y.textWidth),"fontSize"in Y&&r(3,g=Y.fontSize),"innerPad"in Y&&r(13,b=Y.innerPad)},t.$$.update=()=>{if(t.$$.dirty[0]&2064&&r(7,n=s.embedMarker||c),t.$$.dirty[0]&16&&r(18,i=s.embedExponentialScaling),t.$$.dirty[0]&16&&r(17,a=s.embedWeightScaling),t.$$.dirty[0]&16&&r(16,o=s.embedPromptLimit||Object.keys(s.weightedPrompts).length),t.$$.dirty[0]&393216&&G(i,a),t.$$.dirty[0]&16&&R(s.embeddings,s.scaledEmbedMappings),t.$$.dirty[0]&45056){const Y=Math.min(...p),J=p[0]===Y,le=p[1]===Y;r(15,C=[Math.max(J?0:(p[0]-Y)/2,b),Math.max(le?0:(p[1]-Y)/2,b)]),r(14,D=[p[0]-2*C[0],p[1]-2*C[1]])}t.$$.dirty[0]&16384&&re(D),t.$$.dirty[0]&65536&&x(o)},[f,h,d,g,s,m,_,n,X,H,V,c,p,b,D,C,o,a,i,Q]}class aF extends wt{constructor(e){super(),At(this,e,uF,iF,Et,{center:11,dimensions:12,pointRadius:0,markerRadius:1,textWidth:2,fontSize:3,innerPad:13},null,[-1,-1])}}var ef={},zp={},Ss={},sF={get exports(){return Ss},set exports(t){Ss=t}},Bs={},oF={get exports(){return Bs},set exports(t){Bs=t}},Wp=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}},lF=Wp,Pi=Object.prototype.toString;function Ff(t){return Array.isArray(t)}function tf(t){return typeof t>"u"}function fF(t){return t!==null&&!tf(t)&&t.constructor!==null&&!tf(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Hp(t){return Pi.call(t)==="[object ArrayBuffer]"}function cF(t){return Pi.call(t)==="[object FormData]"}function hF(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Hp(t.buffer),e}function dF(t){return typeof t=="string"}function pF(t){return typeof t=="number"}function Gp(t){return t!==null&&typeof t=="object"}function ss(t){if(Pi.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function gF(t){return Pi.call(t)==="[object Date]"}function vF(t){return Pi.call(t)==="[object File]"}function mF(t){return Pi.call(t)==="[object Blob]"}function Kp(t){return Pi.call(t)==="[object Function]"}function _F(t){return Gp(t)&&Kp(t.pipe)}function DF(t){return Pi.call(t)==="[object URLSearchParams]"}function bF(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function yF(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Sf(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Ff(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function rf(){var t={};function e(i,a){ss(t[a])&&ss(i)?t[a]=rf(t[a],i):ss(i)?t[a]=rf({},i):Ff(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)Sf(arguments[r],e);return t}function wF(t,e,r){return Sf(e,function(i,a){r&&typeof i=="function"?t[a]=lF(i,r):t[a]=i}),t}function AF(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var en={isArray:Ff,isArrayBuffer:Hp,isBuffer:fF,isFormData:cF,isArrayBufferView:hF,isString:dF,isNumber:pF,isObject:Gp,isPlainObject:ss,isUndefined:tf,isDate:gF,isFile:vF,isBlob:mF,isFunction:Kp,isStream:_F,isURLSearchParams:DF,isStandardBrowserEnv:yF,forEach:Sf,merge:rf,extend:wF,trim:bF,stripBOM:AF},cu=en;function V0(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var $p=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(cu.isURLSearchParams(r))i=r.toString();else{var a=[];cu.forEach(r,function(c,p){c===null||typeof c>"u"||(cu.isArray(c)?p=p+"[]":c=[c],cu.forEach(c,function(h){cu.isDate(h)?h=h.toISOString():cu.isObject(h)&&(h=JSON.stringify(h)),a.push(V0(p)+"="+V0(h))}))}),i=a.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},EF=en;function Ks(){this.handlers=[]}Ks.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Ks.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Ks.prototype.forEach=function(e){EF.forEach(this.handlers,function(n){n!==null&&e(n)})};var CF=Ks,FF=en,SF=function(e,r){FF.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})},Yp=function(e,r,n,i,a){return e.config=r,n&&(e.code=n),e.request=i,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Zp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},gl,j0;function Xp(){if(j0)return gl;j0=1;var t=Yp;return gl=function(r,n,i,a,o){var s=new Error(r);return t(s,n,i,a,o)},gl}var vl,q0;function BF(){if(q0)return vl;q0=1;var t=Xp();return vl=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},vl}var ml,z0;function OF(){if(z0)return ml;z0=1;var t=en;return ml=t.isStandardBrowserEnv()?function(){return{write:function(n,i,a,o,s,c){var p=[];p.push(n+"="+encodeURIComponent(i)),t.isNumber(a)&&p.push("expires="+new Date(a).toGMTString()),t.isString(o)&&p.push("path="+o),t.isString(s)&&p.push("domain="+s),c===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),ml}var _l,W0;function MF(){return W0||(W0=1,_l=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),_l}var Dl,H0;function PF(){return H0||(H0=1,Dl=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Dl}var bl,G0;function TF(){if(G0)return bl;G0=1;var t=MF(),e=PF();return bl=function(n,i){return n&&!t(i)?e(n,i):i},bl}var yl,K0;function xF(){if(K0)return yl;K0=1;var t=en,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return yl=function(n){var i={},a,o,s;return n&&t.forEach(n.split(`
`),function(p){if(s=p.indexOf(":"),a=t.trim(p.substr(0,s)).toLowerCase(),o=t.trim(p.substr(s+1)),a){if(i[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([o]):i[a]=i[a]?i[a]+", "+o:o}}),i},yl}var wl,$0;function IF(){if($0)return wl;$0=1;var t=en;return wl=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(o){var s=o;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(s){var c=t.isString(s)?a(s):s;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),wl}var Al,Y0;function $s(){if(Y0)return Al;Y0=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Al=t,Al}var El,Z0;function X0(){if(Z0)return El;Z0=1;var t=en,e=BF(),r=OF(),n=$p,i=TF(),a=xF(),o=IF(),s=Xp(),c=Zp,p=$s();return El=function(h){return new Promise(function(g,b){var m=h.data,_=h.headers,D=h.responseType,C;function A(){h.cancelToken&&h.cancelToken.unsubscribe(C),h.signal&&h.signal.removeEventListener("abort",C)}t.isFormData(m)&&delete _["Content-Type"];var B=new XMLHttpRequest;if(h.auth){var E=h.auth.username||"",O=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";_.Authorization="Basic "+btoa(E+":"+O)}var P=i(h.baseURL,h.url);B.open(h.method.toUpperCase(),n(P,h.params,h.paramsSerializer),!0),B.timeout=h.timeout;function x(){if(B){var G="getAllResponseHeaders"in B?a(B.getAllResponseHeaders()):null,re=!D||D==="text"||D==="json"?B.responseText:B.response,U={data:re,status:B.status,statusText:B.statusText,headers:G,config:h,request:B};e(function(H){g(H),A()},function(H){b(H),A()},U),B=null}}if("onloadend"in B?B.onloadend=x:B.onreadystatechange=function(){!B||B.readyState!==4||B.status===0&&!(B.responseURL&&B.responseURL.indexOf("file:")===0)||setTimeout(x)},B.onabort=function(){B&&(b(s("Request aborted",h,"ECONNABORTED",B)),B=null)},B.onerror=function(){b(s("Network Error",h,null,B)),B=null},B.ontimeout=function(){var re=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",U=h.transitional||c;h.timeoutErrorMessage&&(re=h.timeoutErrorMessage),b(s(re,h,U.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",B)),B=null},t.isStandardBrowserEnv()){var R=(h.withCredentials||o(P))&&h.xsrfCookieName?r.read(h.xsrfCookieName):void 0;R&&(_[h.xsrfHeaderName]=R)}"setRequestHeader"in B&&t.forEach(_,function(re,U){typeof m>"u"&&U.toLowerCase()==="content-type"?delete _[U]:B.setRequestHeader(U,re)}),t.isUndefined(h.withCredentials)||(B.withCredentials=!!h.withCredentials),D&&D!=="json"&&(B.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&B.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&B.upload&&B.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(C=function(G){B&&(b(!G||G&&G.type?new p("canceled"):G),B.abort(),B=null)},h.cancelToken&&h.cancelToken.subscribe(C),h.signal&&(h.signal.aborted?C():h.signal.addEventListener("abort",C))),m||(m=null),B.send(m)})},El}var Tr=en,J0=SF,kF=Yp,NF=Zp,RF={"Content-Type":"application/x-www-form-urlencoded"};function Q0(t,e){!Tr.isUndefined(t)&&Tr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function LF(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=X0()),t}function UF(t,e,r){if(Tr.isString(t))try{return(e||JSON.parse)(t),Tr.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Ys={transitional:NF,adapter:LF(),transformRequest:[function(e,r){return J0(r,"Accept"),J0(r,"Content-Type"),Tr.isFormData(e)||Tr.isArrayBuffer(e)||Tr.isBuffer(e)||Tr.isStream(e)||Tr.isFile(e)||Tr.isBlob(e)?e:Tr.isArrayBufferView(e)?e.buffer:Tr.isURLSearchParams(e)?(Q0(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Tr.isObject(e)||r&&r["Content-Type"]==="application/json"?(Q0(r,"application/json"),UF(e)):e}],transformResponse:[function(e){var r=this.transitional||Ys.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&Tr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?kF(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Tr.forEach(["delete","get","head"],function(e){Ys.headers[e]={}});Tr.forEach(["post","put","patch"],function(e){Ys.headers[e]=Tr.merge(RF)});var Bf=Ys,VF=en,jF=Bf,qF=function(e,r,n){var i=this||jF;return VF.forEach(n,function(o){e=o.call(i,e,r)}),e},Cl,ed;function Jp(){return ed||(ed=1,Cl=function(e){return!!(e&&e.__CANCEL__)}),Cl}var td=en,Fl=qF,zF=Jp(),WF=Bf,HF=$s();function Sl(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new HF("canceled")}var GF=function(e){Sl(e),e.headers=e.headers||{},e.data=Fl.call(e,e.data,e.headers,e.transformRequest),e.headers=td.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),td.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||WF.adapter;return r(e).then(function(i){return Sl(e),i.data=Fl.call(e,i.data,i.headers,e.transformResponse),i},function(i){return zF(i)||(Sl(e),i&&i.response&&(i.response.data=Fl.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},on=en,Qp=function(e,r){r=r||{};var n={};function i(f,h){return on.isPlainObject(f)&&on.isPlainObject(h)?on.merge(f,h):on.isPlainObject(h)?on.merge({},h):on.isArray(h)?h.slice():h}function a(f){if(on.isUndefined(r[f])){if(!on.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function o(f){if(!on.isUndefined(r[f]))return i(void 0,r[f])}function s(f){if(on.isUndefined(r[f])){if(!on.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function c(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var p={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return on.forEach(Object.keys(e).concat(Object.keys(r)),function(h){var d=p[h]||a,g=d(h);on.isUndefined(g)&&d!==c||(n[h]=g)}),n},Bl,rd;function e1(){return rd||(rd=1,Bl={version:"0.26.1"}),Bl}var KF=e1().version,Of={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Of[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var nd={};Of.transitional=function(e,r,n){function i(a,o){return"[Axios v"+KF+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,s){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!nd[o]&&(nd[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,s):!0}};function $F(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],o=e[a];if(o){var s=t[a],c=s===void 0||o(s,a,t);if(c!==!0)throw new TypeError("option "+a+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+a)}}var YF={assertOptions:$F,validators:Of},t1=en,ZF=$p,id=CF,ud=GF,Zs=Qp,r1=YF,hu=r1.validators;function fa(t){this.defaults=t,this.interceptors={request:new id,response:new id}}fa.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Zs(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&r1.assertOptions(n,{silentJSONParsing:hu.transitional(hu.boolean),forcedJSONParsing:hu.transitional(hu.boolean),clarifyTimeoutError:hu.transitional(hu.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(a=a&&g.synchronous,i.unshift(g.fulfilled,g.rejected))});var o=[];this.interceptors.response.forEach(function(g){o.push(g.fulfilled,g.rejected)});var s;if(!a){var c=[ud,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(o),s=Promise.resolve(r);c.length;)s=s.then(c.shift(),c.shift());return s}for(var p=r;i.length;){var f=i.shift(),h=i.shift();try{p=f(p)}catch(d){h(d);break}}try{s=ud(p)}catch(d){return Promise.reject(d)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};fa.prototype.getUri=function(e){return e=Zs(this.defaults,e),ZF(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};t1.forEach(["delete","get","head","options"],function(e){fa.prototype[e]=function(r,n){return this.request(Zs(n||{},{method:e,url:r,data:(n||{}).data}))}});t1.forEach(["post","put","patch"],function(e){fa.prototype[e]=function(r,n,i){return this.request(Zs(i||{},{method:e,url:r,data:n}))}});var XF=fa,Ol,ad;function JF(){if(ad)return Ol;ad=1;var t=$s();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(a){if(i._listeners){var o,s=i._listeners.length;for(o=0;o<s;o++)i._listeners[o](a);i._listeners=null}}),this.promise.then=function(a){var o,s=new Promise(function(c){i.subscribe(c),o=c}).then(a);return s.cancel=function(){i.unsubscribe(o)},s},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},Ol=e,Ol}var Ml,sd;function QF(){return sd||(sd=1,Ml=function(e){return function(n){return e.apply(null,n)}}),Ml}var Pl,od;function e3(){if(od)return Pl;od=1;var t=en;return Pl=function(r){return t.isObject(r)&&r.isAxiosError===!0},Pl}var ld=en,t3=Wp,os=XF,r3=Qp,n3=Bf;function n1(t){var e=new os(t),r=t3(os.prototype.request,e);return ld.extend(r,os.prototype,e),ld.extend(r,e),r.create=function(i){return n1(r3(t,i))},r}var $n=n1(n3);$n.Axios=os;$n.Cancel=$s();$n.CancelToken=JF();$n.isCancel=Jp();$n.VERSION=e1().version;$n.all=function(e){return Promise.all(e)};$n.spread=QF();$n.isAxiosError=e3();oF.exports=$n;Bs.default=$n;(function(t){t.exports=Bs})(sF);var ur={},Mf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RequiredError=t.BaseAPI=t.COLLECTION_FORMATS=t.BASE_PATH=void 0;const e=Ss;t.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class r{constructor(a,o=t.BASE_PATH,s=e.default){this.basePath=o,this.axios=s,a&&(this.configuration=a,this.basePath=a.basePath||this.basePath)}}t.BaseAPI=r;class n extends Error{constructor(a,o){super(o),this.field=a,this.name="RequiredError"}}t.RequiredError=n})(Mf);var Pf=dr&&dr.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(f){try{p(n.next(f))}catch(h){o(h)}}function c(f){try{p(n.throw(f))}catch(h){o(h)}}function p(f){f.done?a(f.value):i(f.value).then(s,c)}p((n=n.apply(t,e||[])).next())})};Object.defineProperty(ur,"__esModule",{value:!0});ur.createRequestFunction=ur.toPathString=ur.serializeDataIfNeeded=ur.setSearchParams=ur.setOAuthToObject=ur.setBearerAuthToObject=ur.setBasicAuthToObject=ur.setApiKeyToObject=ur.assertParamExists=ur.DUMMY_BASE_URL=void 0;const i3=Mf;ur.DUMMY_BASE_URL="https://example.com";ur.assertParamExists=function(t,e,r){if(r==null)throw new i3.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};ur.setApiKeyToObject=function(t,e,r){return Pf(this,void 0,void 0,function*(){if(r&&r.apiKey){const n=typeof r.apiKey=="function"?yield r.apiKey(e):yield r.apiKey;t[e]=n}})};ur.setBasicAuthToObject=function(t,e){e&&(e.username||e.password)&&(t.auth={username:e.username,password:e.password})};ur.setBearerAuthToObject=function(t,e){return Pf(this,void 0,void 0,function*(){if(e&&e.accessToken){const r=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;t.Authorization="Bearer "+r}})};ur.setOAuthToObject=function(t,e,r,n){return Pf(this,void 0,void 0,function*(){if(n&&n.accessToken){const i=typeof n.accessToken=="function"?yield n.accessToken(e,r):yield n.accessToken;t.Authorization="Bearer "+i}})};function nf(t,e,r=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(n=>nf(t,n,r)):Object.keys(e).forEach(n=>nf(t,e[n],`${r}${r!==""?".":""}${n}`)):t.has(r)?t.append(r,e):t.set(r,e))}ur.setSearchParams=function(t,...e){const r=new URLSearchParams(t.search);nf(r,e),t.search=r.toString()};ur.serializeDataIfNeeded=function(t,e,r){const n=typeof t!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(t!==void 0?t:{}):t||""};ur.toPathString=function(t){return t.pathname+t.search+t.hash};ur.createRequestFunction=function(t,e,r,n){return(i=e,a=r)=>{const o=Object.assign(Object.assign({},t.options),{url:((n==null?void 0:n.basePath)||a)+t.url});return i.request(o)}};(function(t){var e=dr&&dr.__awaiter||function(o,s,c,p){function f(h){return h instanceof c?h:new c(function(d){d(h)})}return new(c||(c=Promise))(function(h,d){function g(_){try{m(p.next(_))}catch(D){d(D)}}function b(_){try{m(p.throw(_))}catch(D){d(D)}}function m(_){_.done?h(_.value):f(_.value).then(g,b)}m((p=p.apply(o,s||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIApi=t.OpenAIApiFactory=t.OpenAIApiFp=t.OpenAIApiAxiosParamCreator=t.CreateImageRequestResponseFormatEnum=t.CreateImageRequestSizeEnum=t.ChatCompletionResponseMessageRoleEnum=t.ChatCompletionRequestMessageRoleEnum=void 0;const r=Ss,n=ur,i=Mf;t.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},t.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},t.OpenAIApiAxiosParamCreator=function(o){return{cancelFineTune:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("cancelFineTune","fineTuneId",s);const p="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),{url:n.toPathString(f),options:d}}),createAnswer:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createAnswer","createAnswerRequest",s);const p="/answers",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createChatCompletion:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createChatCompletion","createChatCompletionRequest",s);const p="/chat/completions",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createClassification:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createClassification","createClassificationRequest",s);const p="/classifications",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createCompletion:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createCompletion","createCompletionRequest",s);const p="/completions",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createEdit:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEdit","createEditRequest",s);const p="/edits",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createEmbedding:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEmbedding","createEmbeddingRequest",s);const p="/embeddings",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createFile:(s,c,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFile","file",s),n.assertParamExists("createFile","purpose",c);const f="/files",h=new URL(f,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},d),p),b={},m={},_=new(o&&o.formDataCtor||FormData);s!==void 0&&_.append("file",s),c!==void 0&&_.append("purpose",c),b["Content-Type"]="multipart/form-data",n.setSearchParams(h,m);let D=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),_.getHeaders()),D),p.headers),g.data=_,{url:n.toPathString(h),options:g}}),createFineTune:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFineTune","createFineTuneRequest",s);const p="/fine-tunes",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createImage:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImage","createImageRequest",s);const p="/images/generations",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createImageEdit:(s,c,p,f,h,d,g,b={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageEdit","image",s),n.assertParamExists("createImageEdit","prompt",c);const m="/images/edits",_=new URL(m,n.DUMMY_BASE_URL);let D;o&&(D=o.baseOptions);const C=Object.assign(Object.assign({method:"POST"},D),b),A={},B={},E=new(o&&o.formDataCtor||FormData);s!==void 0&&E.append("image",s),p!==void 0&&E.append("mask",p),c!==void 0&&E.append("prompt",c),f!==void 0&&E.append("n",f),h!==void 0&&E.append("size",h),d!==void 0&&E.append("response_format",d),g!==void 0&&E.append("user",g),A["Content-Type"]="multipart/form-data",n.setSearchParams(_,B);let O=D&&D.headers?D.headers:{};return C.headers=Object.assign(Object.assign(Object.assign(Object.assign({},A),E.getHeaders()),O),b.headers),C.data=E,{url:n.toPathString(_),options:C}}),createImageVariation:(s,c,p,f,h,d={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageVariation","image",s);const g="/images/variations",b=new URL(g,n.DUMMY_BASE_URL);let m;o&&(m=o.baseOptions);const _=Object.assign(Object.assign({method:"POST"},m),d),D={},C={},A=new(o&&o.formDataCtor||FormData);s!==void 0&&A.append("image",s),c!==void 0&&A.append("n",c),p!==void 0&&A.append("size",p),f!==void 0&&A.append("response_format",f),h!==void 0&&A.append("user",h),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,C);let B=m&&m.headers?m.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),A.getHeaders()),B),d.headers),_.data=A,{url:n.toPathString(b),options:_}}),createModeration:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createModeration","createModerationRequest",s);const p="/moderations",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createSearch:(s,c,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createSearch","engineId",s),n.assertParamExists("createSearch","createSearchRequest",c);const f="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(s))),h=new URL(f,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},d),p),b={},m={};b["Content-Type"]="application/json",n.setSearchParams(h,m);let _=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),_),p.headers),g.data=n.serializeDataIfNeeded(c,g,o),{url:n.toPathString(h),options:g}}),createTranscription:(s,c,p,f,h,d,g={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranscription","file",s),n.assertParamExists("createTranscription","model",c);const b="/audio/transcriptions",m=new URL(b,n.DUMMY_BASE_URL);let _;o&&(_=o.baseOptions);const D=Object.assign(Object.assign({method:"POST"},_),g),C={},A={},B=new(o&&o.formDataCtor||FormData);s!==void 0&&B.append("file",s),c!==void 0&&B.append("model",c),p!==void 0&&B.append("prompt",p),f!==void 0&&B.append("response_format",f),h!==void 0&&B.append("temperature",h),d!==void 0&&B.append("language",d),C["Content-Type"]="multipart/form-data",n.setSearchParams(m,A);let E=_&&_.headers?_.headers:{};return D.headers=Object.assign(Object.assign(Object.assign(Object.assign({},C),B.getHeaders()),E),g.headers),D.data=B,{url:n.toPathString(m),options:D}}),createTranslation:(s,c,p,f,h,d={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranslation","file",s),n.assertParamExists("createTranslation","model",c);const g="/audio/translations",b=new URL(g,n.DUMMY_BASE_URL);let m;o&&(m=o.baseOptions);const _=Object.assign(Object.assign({method:"POST"},m),d),D={},C={},A=new(o&&o.formDataCtor||FormData);s!==void 0&&A.append("file",s),c!==void 0&&A.append("model",c),p!==void 0&&A.append("prompt",p),f!==void 0&&A.append("response_format",f),h!==void 0&&A.append("temperature",h),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,C);let B=m&&m.headers?m.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),A.getHeaders()),B),d.headers),_.data=A,{url:n.toPathString(b),options:_}}),deleteFile:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteFile","fileId",s);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},h),c),g={},b={};n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),{url:n.toPathString(f),options:d}}),deleteModel:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteModel","model",s);const p="/models/{model}".replace("{model}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},h),c),g={},b={};n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),{url:n.toPathString(f),options:d}}),downloadFile:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("downloadFile","fileId",s);const p="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),c),g={},b={};n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),{url:n.toPathString(f),options:d}}),listEngines:(s={})=>e(this,void 0,void 0,function*(){const c="/engines",p=new URL(c,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),s),d={},g={};n.setSearchParams(p,g);let b=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:h}}),listFiles:(s={})=>e(this,void 0,void 0,function*(){const c="/files",p=new URL(c,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),s),d={},g={};n.setSearchParams(p,g);let b=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:h}}),listFineTuneEvents:(s,c,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("listFineTuneEvents","fineTuneId",s);const f="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(s))),h=new URL(f,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"GET"},d),p),b={},m={};c!==void 0&&(m.stream=c),n.setSearchParams(h,m);let _=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),_),p.headers),{url:n.toPathString(h),options:g}}),listFineTunes:(s={})=>e(this,void 0,void 0,function*(){const c="/fine-tunes",p=new URL(c,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),s),d={},g={};n.setSearchParams(p,g);let b=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:h}}),listModels:(s={})=>e(this,void 0,void 0,function*(){const c="/models",p=new URL(c,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),s),d={},g={};n.setSearchParams(p,g);let b=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:h}}),retrieveEngine:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveEngine","engineId",s);const p="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),c),g={},b={};n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),{url:n.toPathString(f),options:d}}),retrieveFile:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFile","fileId",s);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),c),g={},b={};n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),{url:n.toPathString(f),options:d}}),retrieveFineTune:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFineTune","fineTuneId",s);const p="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),c),g={},b={};n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),{url:n.toPathString(f),options:d}}),retrieveModel:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveModel","model",s);const p="/models/{model}".replace("{model}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),c),g={},b={};n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),{url:n.toPathString(f),options:d}})}},t.OpenAIApiFp=function(o){const s=t.OpenAIApiAxiosParamCreator(o);return{cancelFineTune(c,p){return e(this,void 0,void 0,function*(){const f=yield s.cancelFineTune(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createAnswer(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createAnswer(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createChatCompletion(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createChatCompletion(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createClassification(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createClassification(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createCompletion(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createCompletion(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createEdit(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createEdit(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createEmbedding(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createEmbedding(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createFile(c,p,f){return e(this,void 0,void 0,function*(){const h=yield s.createFile(c,p,f);return n.createRequestFunction(h,r.default,i.BASE_PATH,o)})},createFineTune(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createFineTune(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createImage(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createImage(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createImageEdit(c,p,f,h,d,g,b,m){return e(this,void 0,void 0,function*(){const _=yield s.createImageEdit(c,p,f,h,d,g,b,m);return n.createRequestFunction(_,r.default,i.BASE_PATH,o)})},createImageVariation(c,p,f,h,d,g){return e(this,void 0,void 0,function*(){const b=yield s.createImageVariation(c,p,f,h,d,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},createModeration(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createModeration(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createSearch(c,p,f){return e(this,void 0,void 0,function*(){const h=yield s.createSearch(c,p,f);return n.createRequestFunction(h,r.default,i.BASE_PATH,o)})},createTranscription(c,p,f,h,d,g,b){return e(this,void 0,void 0,function*(){const m=yield s.createTranscription(c,p,f,h,d,g,b);return n.createRequestFunction(m,r.default,i.BASE_PATH,o)})},createTranslation(c,p,f,h,d,g){return e(this,void 0,void 0,function*(){const b=yield s.createTranslation(c,p,f,h,d,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},deleteFile(c,p){return e(this,void 0,void 0,function*(){const f=yield s.deleteFile(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},deleteModel(c,p){return e(this,void 0,void 0,function*(){const f=yield s.deleteModel(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},downloadFile(c,p){return e(this,void 0,void 0,function*(){const f=yield s.downloadFile(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},listEngines(c){return e(this,void 0,void 0,function*(){const p=yield s.listEngines(c);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listFiles(c){return e(this,void 0,void 0,function*(){const p=yield s.listFiles(c);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listFineTuneEvents(c,p,f){return e(this,void 0,void 0,function*(){const h=yield s.listFineTuneEvents(c,p,f);return n.createRequestFunction(h,r.default,i.BASE_PATH,o)})},listFineTunes(c){return e(this,void 0,void 0,function*(){const p=yield s.listFineTunes(c);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listModels(c){return e(this,void 0,void 0,function*(){const p=yield s.listModels(c);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},retrieveEngine(c,p){return e(this,void 0,void 0,function*(){const f=yield s.retrieveEngine(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},retrieveFile(c,p){return e(this,void 0,void 0,function*(){const f=yield s.retrieveFile(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},retrieveFineTune(c,p){return e(this,void 0,void 0,function*(){const f=yield s.retrieveFineTune(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},retrieveModel(c,p){return e(this,void 0,void 0,function*(){const f=yield s.retrieveModel(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})}}},t.OpenAIApiFactory=function(o,s,c){const p=t.OpenAIApiFp(o);return{cancelFineTune(f,h){return p.cancelFineTune(f,h).then(d=>d(c,s))},createAnswer(f,h){return p.createAnswer(f,h).then(d=>d(c,s))},createChatCompletion(f,h){return p.createChatCompletion(f,h).then(d=>d(c,s))},createClassification(f,h){return p.createClassification(f,h).then(d=>d(c,s))},createCompletion(f,h){return p.createCompletion(f,h).then(d=>d(c,s))},createEdit(f,h){return p.createEdit(f,h).then(d=>d(c,s))},createEmbedding(f,h){return p.createEmbedding(f,h).then(d=>d(c,s))},createFile(f,h,d){return p.createFile(f,h,d).then(g=>g(c,s))},createFineTune(f,h){return p.createFineTune(f,h).then(d=>d(c,s))},createImage(f,h){return p.createImage(f,h).then(d=>d(c,s))},createImageEdit(f,h,d,g,b,m,_,D){return p.createImageEdit(f,h,d,g,b,m,_,D).then(C=>C(c,s))},createImageVariation(f,h,d,g,b,m){return p.createImageVariation(f,h,d,g,b,m).then(_=>_(c,s))},createModeration(f,h){return p.createModeration(f,h).then(d=>d(c,s))},createSearch(f,h,d){return p.createSearch(f,h,d).then(g=>g(c,s))},createTranscription(f,h,d,g,b,m,_){return p.createTranscription(f,h,d,g,b,m,_).then(D=>D(c,s))},createTranslation(f,h,d,g,b,m){return p.createTranslation(f,h,d,g,b,m).then(_=>_(c,s))},deleteFile(f,h){return p.deleteFile(f,h).then(d=>d(c,s))},deleteModel(f,h){return p.deleteModel(f,h).then(d=>d(c,s))},downloadFile(f,h){return p.downloadFile(f,h).then(d=>d(c,s))},listEngines(f){return p.listEngines(f).then(h=>h(c,s))},listFiles(f){return p.listFiles(f).then(h=>h(c,s))},listFineTuneEvents(f,h,d){return p.listFineTuneEvents(f,h,d).then(g=>g(c,s))},listFineTunes(f){return p.listFineTunes(f).then(h=>h(c,s))},listModels(f){return p.listModels(f).then(h=>h(c,s))},retrieveEngine(f,h){return p.retrieveEngine(f,h).then(d=>d(c,s))},retrieveFile(f,h){return p.retrieveFile(f,h).then(d=>d(c,s))},retrieveFineTune(f,h){return p.retrieveFineTune(f,h).then(d=>d(c,s))},retrieveModel(f,h){return p.retrieveModel(f,h).then(d=>d(c,s))}}};class a extends i.BaseAPI{cancelFineTune(s,c){return t.OpenAIApiFp(this.configuration).cancelFineTune(s,c).then(p=>p(this.axios,this.basePath))}createAnswer(s,c){return t.OpenAIApiFp(this.configuration).createAnswer(s,c).then(p=>p(this.axios,this.basePath))}createChatCompletion(s,c){return t.OpenAIApiFp(this.configuration).createChatCompletion(s,c).then(p=>p(this.axios,this.basePath))}createClassification(s,c){return t.OpenAIApiFp(this.configuration).createClassification(s,c).then(p=>p(this.axios,this.basePath))}createCompletion(s,c){return t.OpenAIApiFp(this.configuration).createCompletion(s,c).then(p=>p(this.axios,this.basePath))}createEdit(s,c){return t.OpenAIApiFp(this.configuration).createEdit(s,c).then(p=>p(this.axios,this.basePath))}createEmbedding(s,c){return t.OpenAIApiFp(this.configuration).createEmbedding(s,c).then(p=>p(this.axios,this.basePath))}createFile(s,c,p){return t.OpenAIApiFp(this.configuration).createFile(s,c,p).then(f=>f(this.axios,this.basePath))}createFineTune(s,c){return t.OpenAIApiFp(this.configuration).createFineTune(s,c).then(p=>p(this.axios,this.basePath))}createImage(s,c){return t.OpenAIApiFp(this.configuration).createImage(s,c).then(p=>p(this.axios,this.basePath))}createImageEdit(s,c,p,f,h,d,g,b){return t.OpenAIApiFp(this.configuration).createImageEdit(s,c,p,f,h,d,g,b).then(m=>m(this.axios,this.basePath))}createImageVariation(s,c,p,f,h,d){return t.OpenAIApiFp(this.configuration).createImageVariation(s,c,p,f,h,d).then(g=>g(this.axios,this.basePath))}createModeration(s,c){return t.OpenAIApiFp(this.configuration).createModeration(s,c).then(p=>p(this.axios,this.basePath))}createSearch(s,c,p){return t.OpenAIApiFp(this.configuration).createSearch(s,c,p).then(f=>f(this.axios,this.basePath))}createTranscription(s,c,p,f,h,d,g){return t.OpenAIApiFp(this.configuration).createTranscription(s,c,p,f,h,d,g).then(b=>b(this.axios,this.basePath))}createTranslation(s,c,p,f,h,d){return t.OpenAIApiFp(this.configuration).createTranslation(s,c,p,f,h,d).then(g=>g(this.axios,this.basePath))}deleteFile(s,c){return t.OpenAIApiFp(this.configuration).deleteFile(s,c).then(p=>p(this.axios,this.basePath))}deleteModel(s,c){return t.OpenAIApiFp(this.configuration).deleteModel(s,c).then(p=>p(this.axios,this.basePath))}downloadFile(s,c){return t.OpenAIApiFp(this.configuration).downloadFile(s,c).then(p=>p(this.axios,this.basePath))}listEngines(s){return t.OpenAIApiFp(this.configuration).listEngines(s).then(c=>c(this.axios,this.basePath))}listFiles(s){return t.OpenAIApiFp(this.configuration).listFiles(s).then(c=>c(this.axios,this.basePath))}listFineTuneEvents(s,c,p){return t.OpenAIApiFp(this.configuration).listFineTuneEvents(s,c,p).then(f=>f(this.axios,this.basePath))}listFineTunes(s){return t.OpenAIApiFp(this.configuration).listFineTunes(s).then(c=>c(this.axios,this.basePath))}listModels(s){return t.OpenAIApiFp(this.configuration).listModels(s).then(c=>c(this.axios,this.basePath))}retrieveEngine(s,c){return t.OpenAIApiFp(this.configuration).retrieveEngine(s,c).then(p=>p(this.axios,this.basePath))}retrieveFile(s,c){return t.OpenAIApiFp(this.configuration).retrieveFile(s,c).then(p=>p(this.axios,this.basePath))}retrieveFineTune(s,c){return t.OpenAIApiFp(this.configuration).retrieveFineTune(s,c).then(p=>p(this.axios,this.basePath))}retrieveModel(s,c){return t.OpenAIApiFp(this.configuration).retrieveModel(s,c).then(p=>p(this.axios,this.basePath))}}t.OpenAIApi=a})(zp);var Xs={};const u3="openai",a3="3.2.1",s3="Node.js library for the OpenAI API",o3={type:"git",url:"git@github.com:openai/openai-node.git"},l3=["openai","open","ai","gpt-3","gpt3"],f3="OpenAI",c3="MIT",h3="./dist/index.js",d3="./dist/index.d.ts",p3={build:"tsc --outDir dist/"},g3={axios:"^0.26.0","form-data":"^4.0.0"},v3={"@types/node":"^12.11.5",typescript:"^3.6.4"},m3={name:u3,version:a3,description:s3,repository:o3,keywords:l3,author:f3,license:c3,main:h3,types:d3,scripts:p3,dependencies:g3,devDependencies:v3};var Tl,fd;function _3(){return fd||(fd=1,Tl=typeof self=="object"?self.FormData:window.FormData),Tl}Object.defineProperty(Xs,"__esModule",{value:!0});Xs.Configuration=void 0;const D3=m3;class b3{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${D3.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=_3())}isJsonMime(e){const r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(r.test(e)||e.toLowerCase()==="application/json-patch+json")}}Xs.Configuration=b3;(function(t){var e=dr&&dr.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=dr&&dr.__exportStar||function(n,i){for(var a in n)a!=="default"&&!i.hasOwnProperty(a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(zp,t),r(Xs,t)})(ef);function Tf(t){const e=new ef.Configuration({apiKey:t});return new ef.OpenAIApi(e)}async function y3(t,e,r="text-davinci-003"){return await t.createCompletion({model:r,prompt:e,temperature:.8,max_tokens:250})}async function w3(t,e,r="gpt-3.5-turbo"){return await t.createChatCompletion({model:r,messages:[{role:"user",content:e}],temperature:.8,max_tokens:250})}async function A3(t,e,r="text-embedding-ada-002"){return await t.createEmbedding({model:r,input:e})}async function E3(t){return await t.listModels()}const xl="preferredEmbeddingModelStore";function C3(){const t=fn(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[xl]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[xl]=a,r(a))},get:()=>xt(t),delete:()=>{i&&(delete localStorage[xl],r(""))}}}const uf=C3(),i1=ln(uf,t=>xt(uf)),Il="oKeyStore";function F3(){const t=fn(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Il]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[Il]=a,r(a))},get:()=>xt(t),delete:()=>{i&&(delete localStorage[Il],r(""))}}}const Os=F3(),xf=ln(Os,t=>xt(Os));function S3(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!0,pending:P3,then:M3,catch:O3,value:25,error:26,blocks:[,,,]};return Fi(r=t[6],i),{c(){e=Rt(),i.block.c()},l(a){e=Rt(),i.block.l(a)},m(a,o){be(a,e,o),i.block.m(a,i.anchor=o),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(a,o){t=a,i.ctx=t,o&64&&r!==(r=t[6])&&Fi(r,i)||ks(i,t,o)},i(a){n||(we(i.block),n=!0)},o(a){for(let o=0;o<3;o+=1){const s=i.blocks[o];Se(s)}n=!1},d(a){a&&k(e),i.block.d(a),i.token=null,i=null}}}function B3(t){let e,r,n,i,a;return{c(){e=ie("div"),r=ie("div"),n=ie("div"),i=ie("p"),a=We("Set OpenAI key in settings to use embedding map."),this.h()},l(o){e=ue(o,"DIV",{class:!0});var s=$(e);r=ue(s,"DIV",{class:!0});var c=$(r);n=ue(c,"DIV",{class:!0});var p=$(n);i=ue(p,"P",{class:!0});var f=$(i);a=He(f,"Set OpenAI key in settings to use embedding map."),f.forEach(k),p.forEach(k),c.forEach(k),s.forEach(k),this.h()},h(){M(i,"class","text-center text-lg"),M(n,"class","h-20 w-52"),M(r,"class","flex flex-col justify-center"),M(e,"class","w-full h-full flex justify-center")},m(o,s){be(o,e,s),j(e,r),j(r,n),j(n,i),j(i,a)},p:Me,i:Me,o:Me,d(o){o&&k(e)}}}function O3(t){let e,r=t[26].message+"",n;return{c(){e=ie("p"),n=We(r),this.h()},l(i){e=ue(i,"P",{style:!0});var a=$(e);n=He(a,r),a.forEach(k),this.h()},h(){Yt(e,"color","red")},m(i,a){be(i,e,a),j(e,n)},p(i,a){a&64&&r!==(r=i[26].message+"")&&Cn(n,r)},i:Me,o:Me,d(i){i&&k(e)}}}function M3(t){let e,r,n,i,a,o,s,c,p,f,h,d,g,b,m,_,D,C,A,B,E,O,P,x,R,G,re,U,X,H,V,W,Q,Y,J,le,me,Ce,Ae,Pe,Ve,Ie,Xe,ze,Re,je,pt,ut,lt,at;r=new aF({props:{dimensions:t[3],center:t[8]}});let st=t[4].embedExponentialScaling&&cd(t);return{c(){e=ie("div"),tt(r.$$.fragment),i=Le(),a=ie("div"),o=ie("div"),s=ie("label"),c=ie("span"),p=We("Exponential Scaling"),f=Le(),h=ie("input"),g=Le(),st&&st.c(),b=Le(),m=ie("div"),_=ie("label"),D=ie("span"),C=We("# Prompts"),A=Le(),B=ie("input"),E=Le(),O=ie("div"),P=ie("div"),x=ie("label"),R=ie("span"),G=We("Clusters"),re=Le(),U=ie("div"),X=ie("button"),H=We("0"),W=Le(),Q=ie("button"),Y=We("2"),J=Le(),le=ie("button"),me=We("4"),Ce=Le(),Ae=ie("button"),Pe=We("6"),Ve=Le(),Ie=ie("button"),Xe=We("8"),ze=Le(),Re=ie("div"),je=ie("button"),pt=We("Shuffle"),this.h()},l(Ke){e=ue(Ke,"DIV",{class:!0});var $e=$(e);rt(r.$$.fragment,$e),$e.forEach(k),i=Ue(Ke),a=ue(Ke,"DIV",{class:!0});var Ee=$(a);o=ue(Ee,"DIV",{class:!0});var Te=$(o);s=ue(Te,"LABEL",{class:!0});var Bt=$(s);c=ue(Bt,"SPAN",{class:!0});var Vt=$(c);p=He(Vt,"Exponential Scaling"),Vt.forEach(k),Bt.forEach(k),f=Ue(Te),h=ue(Te,"INPUT",{type:!0,class:!0}),Te.forEach(k),g=Ue(Ee),st&&st.l(Ee),b=Ue(Ee),m=ue(Ee,"DIV",{class:!0});var Ht=$(m);_=ue(Ht,"LABEL",{class:!0});var L=$(_);D=ue(L,"SPAN",{class:!0});var z=$(D);C=He(z,"# Prompts"),z.forEach(k),L.forEach(k),A=Ue(Ht),B=ue(Ht,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Ht.forEach(k),E=Ue(Ee),O=ue(Ee,"DIV",{class:!0});var Z=$(O);P=ue(Z,"DIV",{class:!0});var fe=$(P);x=ue(fe,"LABEL",{class:!0});var ae=$(x);R=ue(ae,"SPAN",{class:!0});var he=$(R);G=He(he,"Clusters"),he.forEach(k),ae.forEach(k),re=Ue(fe),U=ue(fe,"DIV",{class:!0});var se=$(U);X=ue(se,"BUTTON",{class:!0});var ce=$(X);H=He(ce,"0"),ce.forEach(k),W=Ue(se),Q=ue(se,"BUTTON",{class:!0});var ye=$(Q);Y=He(ye,"2"),ye.forEach(k),J=Ue(se),le=ue(se,"BUTTON",{class:!0});var ke=$(le);me=He(ke,"4"),ke.forEach(k),Ce=Ue(se),Ae=ue(se,"BUTTON",{class:!0});var Je=$(Ae);Pe=He(Je,"6"),Je.forEach(k),Ve=Ue(se),Ie=ue(se,"BUTTON",{class:!0});var Fe=$(Ie);Xe=He(Fe,"8"),Fe.forEach(k),se.forEach(k),fe.forEach(k),Z.forEach(k),ze=Ue(Ee),Re=ue(Ee,"DIV",{class:!0});var zt=$(Re);je=ue(zt,"BUTTON",{class:!0});var It=$(je);pt=He(It,"Shuffle"),It.forEach(k),zt.forEach(k),Ee.forEach(k),this.h()},h(){M(e,"class","w-full h-full"),aa(()=>t[15].call(e)),M(c,"class","label-text"),M(s,"class","label"),M(h,"type","checkbox"),M(h,"class","toggle toggle-sm"),h.checked=d=t[4].embedExponentialScaling,M(o,"class","min-w-max px-2"),M(D,"class","label-text"),M(_,"class","label"),B.value=t[9],M(B,"type","range"),M(B,"min","1"),M(B,"max",t[2]),M(B,"step","1"),M(B,"class","range range-sm"),M(m,"class","w-full px-2"),M(R,"class","label-text"),M(x,"class","label pb-1 m-0"),M(X,"class",V=(t[4].embedClusters||0)===0?"btn btn-xs btn-active":"btn btn-xs"),M(Q,"class","btn btn-xs"),Tt(Q,"btn-active",t[4].embedClusters===2),Tt(Q,"btn-disabled",Object.keys(t[4].embeddings).length<2),M(le,"class","btn btn-xs"),Tt(le,"btn-active",t[4].embedClusters===4),Tt(le,"btn-disabled",Object.keys(t[4].embeddings).length<4),M(Ae,"class","btn btn-xs"),Tt(Ae,"btn-active",t[4].embedClusters===6),Tt(Ae,"btn-disabled",Object.keys(t[4].embeddings).length<6),M(Ie,"class","btn btn-xs"),Tt(Ie,"btn-active",t[4].embedClusters===8),Tt(Ie,"btn-disabled",Object.keys(t[4].embeddings).length<8),M(U,"class","btn-group btn-group-horizontal p-0"),M(P,"class",""),M(O,"class",""),M(je,"class","btn btn-xs btn-primary"),M(Re,"class","w-32 px-2 pb-1 flex flex-col justify-end"),M(a,"class","px-2 py-4 pb-0 flex")},m(Ke,$e){be(Ke,e,$e),nt(r,e,null),n=sa(e,t[15].bind(e)),be(Ke,i,$e),be(Ke,a,$e),j(a,o),j(o,s),j(s,c),j(c,p),j(o,f),j(o,h),j(a,g),st&&st.m(a,null),j(a,b),j(a,m),j(m,_),j(_,D),j(D,C),j(m,A),j(m,B),j(a,E),j(a,O),j(O,P),j(P,x),j(x,R),j(R,G),j(P,re),j(P,U),j(U,X),j(X,H),j(U,W),j(U,Q),j(Q,Y),j(U,J),j(U,le),j(le,me),j(U,Ce),j(U,Ae),j(Ae,Pe),j(U,Ve),j(U,Ie),j(Ie,Xe),j(a,ze),j(a,Re),j(Re,je),j(je,pt),ut=!0,lt||(at=[Oe(h,"change",t[11]),Oe(B,"change",t[10]),Oe(X,"click",t[16]),Oe(Q,"click",t[17]),Oe(le,"click",t[18]),Oe(Ae,"click",t[19]),Oe(Ie,"click",t[20]),Oe(je,"click",t[14])],lt=!0)},p(Ke,$e){const Ee={};$e&8&&(Ee.dimensions=Ke[3]),$e&256&&(Ee.center=Ke[8]),r.$set(Ee),(!ut||$e&16&&d!==(d=Ke[4].embedExponentialScaling))&&(h.checked=d),Ke[4].embedExponentialScaling?st?st.p(Ke,$e):(st=cd(Ke),st.c(),st.m(a,b)):st&&(st.d(1),st=null),(!ut||$e&512)&&(B.value=Ke[9]),(!ut||$e&4)&&M(B,"max",Ke[2]),(!ut||$e&16&&V!==(V=(Ke[4].embedClusters||0)===0?"btn btn-xs btn-active":"btn btn-xs"))&&M(X,"class",V),(!ut||$e&16)&&Tt(Q,"btn-active",Ke[4].embedClusters===2),(!ut||$e&16)&&Tt(Q,"btn-disabled",Object.keys(Ke[4].embeddings).length<2),(!ut||$e&16)&&Tt(le,"btn-active",Ke[4].embedClusters===4),(!ut||$e&16)&&Tt(le,"btn-disabled",Object.keys(Ke[4].embeddings).length<4),(!ut||$e&16)&&Tt(Ae,"btn-active",Ke[4].embedClusters===6),(!ut||$e&16)&&Tt(Ae,"btn-disabled",Object.keys(Ke[4].embeddings).length<6),(!ut||$e&16)&&Tt(Ie,"btn-active",Ke[4].embedClusters===8),(!ut||$e&16)&&Tt(Ie,"btn-disabled",Object.keys(Ke[4].embeddings).length<8)},i(Ke){ut||(we(r.$$.fragment,Ke),ut=!0)},o(Ke){Se(r.$$.fragment,Ke),ut=!1},d(Ke){Ke&&k(e),it(r),n(),Ke&&k(i),Ke&&k(a),st&&st.d(),lt=!1,fr(at)}}}function cd(t){let e,r,n,i,a,o,s,c,p;return{c(){e=ie("div"),r=ie("label"),n=ie("span"),i=We("Scaling Power"),a=Le(),o=ie("input"),this.h()},l(f){e=ue(f,"DIV",{class:!0});var h=$(e);r=ue(h,"LABEL",{class:!0});var d=$(r);n=ue(d,"SPAN",{class:!0});var g=$(n);i=He(g,"Scaling Power"),g.forEach(k),d.forEach(k),a=Ue(h),o=ue(h,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),h.forEach(k),this.h()},h(){M(n,"class","label-text"),M(r,"class","label"),o.value=s=t[4].embedWeightScaling,M(o,"type","range"),M(o,"min","0.5"),M(o,"max","3"),M(o,"step","0.1"),M(o,"class","range range-sm"),M(e,"class","w-full px-2")},m(f,h){be(f,e,h),j(e,r),j(r,n),j(n,i),j(e,a),j(e,o),c||(p=Oe(o,"change",t[12]),c=!0)},p(f,h){h&16&&s!==(s=f[4].embedWeightScaling)&&(o.value=s)},d(f){f&&k(e),c=!1,p()}}}function P3(t){let e,r,n,i,a,o;return{c(){e=ie("div"),r=ie("div"),n=ie("div"),i=ie("progress"),this.h()},l(s){e=ue(s,"DIV",{class:!0});var c=$(e);r=ue(c,"DIV",{class:!0});var p=$(r);n=ue(p,"DIV",{class:!0});var f=$(n);i=ue(f,"PROGRESS",{class:!0,max:!0}),$(i).forEach(k),f.forEach(k),p.forEach(k),c.forEach(k),this.h()},h(){M(i,"class","progress progress-primary w-56"),i.value=a=Object.keys(t[7]).length,M(i,"max",o=Object.keys(t[4].weightedPrompts).length),M(n,"class","h-20 w-52"),M(r,"class","flex flex-col justify-center"),M(e,"class","w-full h-full flex justify-center")},m(s,c){be(s,e,c),j(e,r),j(r,n),j(n,i)},p(s,c){c&128&&a!==(a=Object.keys(s[7]).length)&&(i.value=a),c&16&&o!==(o=Object.keys(s[4].weightedPrompts).length)&&M(i,"max",o)},i:Me,o:Me,d(s){s&&k(e)}}}function T3(t){let e,r,n,i;const a=[B3,S3],o=[];function s(c,p){return c[5]?1:0}return e=s(t),r=o[e]=a[e](t),{c(){r.c(),n=Rt()},l(c){r.l(c),n=Rt()},m(c,p){o[e].m(c,p),be(c,n,p),i=!0},p(c,[p]){let f=e;e=s(c),e===f?o[e].p(c,p):(Nr(),Se(o[f],1,1,()=>{o[f]=null}),Rr(),r=o[e],r?r.p(c,p):(r=o[e]=a[e](c),r.c()),we(r,1),r.m(n.parentNode,n))},i(c){i||(we(r),i=!0)},o(c){Se(r),i=!1},d(c){o[e].d(c),c&&k(n)}}}function x3(t){return t<2?0:t<4?2:t<6?4:t<8?6:8}function I3(t){return!t.embeddings||!t.embedClusterSets||Object.entries(t.embeddings).length!==Object.entries(t.weightedPrompts).length||(t.lastPromptChange||0)>(t.lastEmbeddingChange||0)}function k3(t,e,r){let n,i,a,o,s,c,p;Dt(t,Cr,U=>r(4,s=U)),Dt(t,i1,U=>r(21,c=U)),Dt(t,xf,U=>r(5,p=U));let f=0,h=0,d=null,g={};function b(U){const{target:X}=U;if(!X)return;const H=X;if(!H.value)return;const V=parseInt(H.value);V>0&&V<=n&&Ot.update({...s,embedPromptLimit:V})}function m(){Ot.update({...s,embedExponentialScaling:!s.embedExponentialScaling})}function _(U){const{target:X}=U;if(!X)return;const H=X;if(!H.value)return;const V=parseInt(H.value);Ot.update({...s,embedWeightScaling:V})}function D(U){[0,2,4,6,8].indexOf(U)!==-1&&Ot.update({...s,embedClusters:U})}function C(U){let X=new KC({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:5e3,metric:"euclidean"});const H=Object.keys(U),V=Object.values(U);X.init({data:V,type:"dense"}),X.run();let Q=X.getOutputScaled().map(([J,le])=>[(J+1)/2,(le+1)/2]);return H.reduce((J,le,me)=>(J[le]=Q[me],J),{})}function A(U,X){return new Jl.KMEANS().run(U,X)}async function B(){Ot.update({...s,scaledEmbedMappings:C(s.embeddings)})}async function E(){if(console.log("fetching embeddings"),!p||!s.weightedPrompts)return;const U=Object.entries(s.weightedPrompts).map(([le,me])=>[le,me.text]),X=Tf(p);r(7,g={});for(let le of U){const me=await A3(X,le[1],c);r(7,g[le[0]]=me.data.data[0].embedding,g)}let H=Object.entries(g).sort((le,me)=>le[0]-me[0]);const V=le=>new Array(le).fill(null).map(()=>[]);console.log("clustering embeddings");const W=H.length>=2?A(H.map(le=>le[1]),2):[H.map(le=>le[0])];console.log("set of 2 complete");const Q=H.length>=4?A(H.map(le=>le[1]),4):W;console.log("set of 4 complete");const Y=H.length>=6?A(H.map(le=>le[1]),6):Q;console.log("set of 6 complete");const J=H.length>=8?A(H.map(le=>le[1]),8):Y;console.log("set of 8 complete"),Ot.update({...s,embeddings:g,embedClusterSets:{2:[...W,...V(2-W.length)],4:[...Q,...V(4-Q.length)],6:[...Y,...V(6-Y.length)],8:[...J,...V(8-J.length)]},lastEmbeddingChange:Date.now(),scaledEmbedMappings:C(g)}),console.log("embeddings complete")}function O(){f=this.clientWidth,h=this.clientHeight,r(0,f),r(1,h)}const P=()=>D(0),x=()=>D(2),R=()=>D(4),G=()=>D(6),re=()=>D(8);return t.$$.update=()=>{t.$$.dirty&16&&r(2,n=Object.keys(s.weightedPrompts||{}).length),t.$$.dirty&20&&r(9,i=s.embedPromptLimit||n),t.$$.dirty&3&&r(3,a=[f||250,h||250]),t.$$.dirty&8&&r(8,o=la(a)),t.$$.dirty&16&&s.embeddings&&Object.keys(s.embeddings).length<s.embedClusters&&D(x3(Object.keys(s.embeddings).length)),t.$$.dirty&48&&p&&I3(s)&&r(6,d=E())},[f,h,n,a,s,p,d,g,o,i,b,m,_,D,B,O,P,x,R,G,re]}class N3 extends wt{constructor(e){super(),At(this,e,k3,T3,Et,{})}}const es="showZeroPrompts";function R3(){const t=fn(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[es]?JSON.parse(localStorage[es]):!1),{subscribe:e,update:a=>{i&&(localStorage[es]=JSON.stringify(!!a),r(!!a))},get:()=>xt(t),delete:()=>{i&&(delete localStorage[es],r(!1))}}}const af=R3(),If=ln(af,t=>xt(af)),ts="useWeightOrdering";function L3(){const t=fn(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[ts]?JSON.parse(localStorage[ts]):!1),{subscribe:e,update:a=>{i&&(localStorage[ts]=JSON.stringify(!!a),r(!!a))},get:()=>xt(t),delete:()=>{i&&(delete localStorage[ts],r(!1))}}}const sf=L3(),kf=ln(sf,t=>xt(sf));function U3(t){const e=[],r=/((?:[^:]+|:(?!:))+)(?:::(\d+(?:\.\d+)?))?(?=\s|$)/g;let n;for(;(n=r.exec(t))!==null;){const i=n[1].trim(),a=n[2]?parseFloat(n[2]):1;i&&e.push([i,a])}return e}function kl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=t.length-1;let r=t;for(;r[e]===",";)r=r.slice(0,e);return r}function Nl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=["-","#","*","•","◦",">","<","+","^","~","(",")","[","]","{","}"];let r=t.trim();for(;e.includes(r[0]);)r=r.slice(1).trim();return/^\d+(\.|\))\s/.test(r)&&(r=r.replace(/^\d+(\.|\))\s/,"")),r}function of(t){if(t=t.replace(/^\n+|\n+$/g,""),t.includes("::"))return U3(t);if(t.includes(`
`))return t.split(`
`).map(a=>Nl(kl(a))).filter(a=>a.length>0).map(a=>[a,1]);const e=t.match(/[^.!?]+[.!?]+/g)||[],r=e.length,n=t.split(",").map(a=>Nl(kl(a))).filter(a=>a.length>0),i=n.length-1;return r>i?e.map(a=>Nl(kl(a))).filter(a=>a.length>0).map(a=>[a,1]):n.map(a=>[a,1])}function Ms(t,e,r){let n=Object.entries(t.weightedPrompts);return e&&(n=n.sort((i,a)=>Ci(t,parseInt(a[0]))-Ci(t,parseInt(i[0])))),r||(n=n.filter(i=>r||Ci(t,parseInt(i[0])))),n}function V3(t){return t.trim().endsWith(".")}function j3(t){let e="",r=[];return t.forEach((n,i)=>{V3(n)?(r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+". ",r=[]),e+=n+" "):r.push(n.trim())}),r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+"."),e.trim()}function lf(t,e,r,n){if(e)return Ms(t,r,n).map(([a,o])=>`${o.text}::${Ci(t,parseInt(a))}`).join(" ");const i=Ms(t,r,n).map(([a,o])=>o.text);return j3(i)}function hd(t,e,r){const n=t.slice();return n[3]=e[r][0],n[4]=e[r][1],n}function dd(t,e){let r,n=e[4].text+"",i,a,o,s=Ci(e[0],parseInt(e[3]))+"",c,p,f;return{key:t,first:null,c(){r=ie("span"),i=We(n),a=We("::"),o=ie("b"),c=We(s),p=Le(),this.h()},l(h){r=ue(h,"SPAN",{style:!0});var d=$(r);i=He(d,n),a=He(d,"::"),o=ue(d,"B",{});var g=$(o);c=He(g,s),p=Ue(g),g.forEach(k),d.forEach(k),this.h()},h(){M(r,"style",f=`color: rgba(255,255,255,${Math.max(.25,g0(e[0],parseInt(e[3])))});`),this.first=r},m(h,d){be(h,r,d),j(r,i),j(r,a),j(r,o),j(o,c),j(o,p)},p(h,d){e=h,d&7&&n!==(n=e[4].text+"")&&Cn(i,n),d&7&&s!==(s=Ci(e[0],parseInt(e[3]))+"")&&Cn(c,s),d&7&&f!==(f=`color: rgba(255,255,255,${Math.max(.25,g0(e[0],parseInt(e[3])))});`)&&M(r,"style",f)},d(h){h&&k(r)}}}function q3(t){let e,r,n=[],i=new Map,a=Ms(t[0],t[1],t[2]);const o=s=>s[3];for(let s=0;s<a.length;s+=1){let c=hd(t,a,s),p=o(c);i.set(p,n[s]=dd(p,c))}return{c(){e=ie("div"),r=ie("p");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=ue(s,"DIV",{class:!0});var c=$(e);r=ue(c,"P",{class:!0});var p=$(r);for(let f=0;f<n.length;f+=1)n[f].l(p);p.forEach(k),c.forEach(k),this.h()},h(){M(r,"class","text-sm select-none"),M(e,"class","overflow-y-auto h-full")},m(s,c){be(s,e,c),j(e,r);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(r,null)},p(s,[c]){c&7&&(a=Ms(s[0],s[1],s[2]),n=Oi(n,c,o,1,s,a,i,r,bu,dd,null,hd))},i:Me,o:Me,d(s){s&&k(e);for(let c=0;c<n.length;c+=1)n[c].d()}}}function z3(t,e,r){let n,i,a;return Dt(t,Cr,o=>r(0,n=o)),Dt(t,kf,o=>r(1,i=o)),Dt(t,If,o=>r(2,a=o)),[n,i,a]}class W3 extends wt{constructor(e){super(),At(this,e,z3,q3,Et,{})}}const rs="outputMultiPrompt";function H3(){const t=fn(!0),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[rs]?JSON.parse(localStorage[rs]):!1),{subscribe:e,update:a=>{i&&(localStorage[rs]=JSON.stringify(!!a),r(!!a))},get:()=>xt(t),delete:()=>{i&&(delete localStorage[rs],r(!0))}}}const ff=H3(),u1=ln(ff,t=>xt(ff));function G3(t){let e,r,n,i=lf(t[0],t[1],t[2],t[3])+"",a;return{c(){e=ie("div"),r=ie("p"),n=ie("span"),a=We(i),this.h()},l(o){e=ue(o,"DIV",{class:!0});var s=$(e);r=ue(s,"P",{class:!0});var c=$(r);n=ue(c,"SPAN",{style:!0});var p=$(n);a=He(p,i),p.forEach(k),c.forEach(k),s.forEach(k),this.h()},h(){M(n,"style","color: rgba(255,255,255,0.75});"),M(r,"class","text-sm select-none"),M(e,"class","overflow-y-auto h-full")},m(o,s){be(o,e,s),j(e,r),j(r,n),j(n,a)},p(o,[s]){s&15&&i!==(i=lf(o[0],o[1],o[2],o[3])+"")&&Cn(a,i)},i:Me,o:Me,d(o){o&&k(e)}}}function K3(t,e,r){let n,i,a,o;return Dt(t,Cr,s=>r(0,n=s)),Dt(t,u1,s=>r(1,i=s)),Dt(t,kf,s=>r(2,a=s)),Dt(t,If,s=>r(3,o=s)),[n,i,a,o]}class $3 extends wt{constructor(e){super(),At(this,e,K3,G3,Et,{})}}function Y3(t){let e,r;return e=new $3({}),{c(){tt(e.$$.fragment)},l(n){rt(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},i(n){r||(we(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){it(e,n)}}}function Z3(t){let e,r;return e=new W3({}),{c(){tt(e.$$.fragment)},l(n){rt(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},i(n){r||(we(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){it(e,n)}}}function X3(t){let e,r,n,i,a,o,s,c,p,f,h=t[2]?"Multi":"Single",d,g,b,m,_,D,C,A,B,E,O,P,x,R,G,re,U,X;const H=[Z3,Y3],V=[];function W(Q,Y){return Q[2]?0:1}return r=W(t),n=V[r]=H[r](t),{c(){e=ie("div"),n.c(),i=Le(),a=ie("div"),o=ie("div"),s=ie("input"),c=Le(),p=ie("label"),f=ie("span"),d=We(h),g=Le(),b=ie("div"),m=ie("input"),_=Le(),D=ie("label"),C=ie("span"),A=We("Use Weight Ordering"),B=Le(),E=ie("div"),O=ie("input"),P=Le(),x=ie("label"),R=ie("span"),G=We("Include Zero Weights"),this.h()},l(Q){e=ue(Q,"DIV",{class:!0});var Y=$(e);n.l(Y),Y.forEach(k),i=Ue(Q),a=ue(Q,"DIV",{class:!0});var J=$(a);o=ue(J,"DIV",{class:!0});var le=$(o);s=ue(le,"INPUT",{type:!0,class:!0}),c=Ue(le),p=ue(le,"LABEL",{class:!0});var me=$(p);f=ue(me,"SPAN",{class:!0});var Ce=$(f);d=He(Ce,h),Ce.forEach(k),me.forEach(k),le.forEach(k),g=Ue(J),b=ue(J,"DIV",{class:!0});var Ae=$(b);m=ue(Ae,"INPUT",{type:!0,class:!0}),_=Ue(Ae),D=ue(Ae,"LABEL",{class:!0});var Pe=$(D);C=ue(Pe,"SPAN",{class:!0});var Ve=$(C);A=He(Ve,"Use Weight Ordering"),Ve.forEach(k),Pe.forEach(k),Ae.forEach(k),B=Ue(J),E=ue(J,"DIV",{class:!0});var Ie=$(E);O=ue(Ie,"INPUT",{type:!0,class:!0}),P=Ue(Ie),x=ue(Ie,"LABEL",{class:!0});var Xe=$(x);R=ue(Xe,"SPAN",{class:!0});var ze=$(R);G=He(ze,"Include Zero Weights"),ze.forEach(k),Xe.forEach(k),Ie.forEach(k),J.forEach(k),this.h()},h(){M(e,"class","normal-case font-light text-left cursor-copy bg-slate-900 rounded-t-md rounded-br-md p-4 w-full h-28 active:bg-slate-950 hover:bg-slate-800"),s.checked=t[2],M(s,"type","checkbox"),M(s,"class","toggle toggle-sm mt-2 mr-2"),M(f,"class","label-text"),M(p,"class","label w-10"),M(o,"class","mx-2 flex"),m.checked=t[1],M(m,"type","checkbox"),M(m,"class","toggle toggle-sm mt-2 mr-2"),M(C,"class","label-text"),M(D,"class","label"),M(b,"class","mx-2 flex"),O.checked=t[0],M(O,"type","checkbox"),M(O,"class","toggle toggle-sm mt-2 mr-2"),M(R,"class","label-text"),M(x,"class","label"),M(E,"class","mx-2 flex"),M(a,"class","w-full rounded-b-md flex pl-2 justify-start bg-slate-900")},m(Q,Y){be(Q,e,Y),V[r].m(e,null),be(Q,i,Y),be(Q,a,Y),j(a,o),j(o,s),j(o,c),j(o,p),j(p,f),j(f,d),j(a,g),j(a,b),j(b,m),j(b,_),j(b,D),j(D,C),j(C,A),j(a,B),j(a,E),j(E,O),j(E,P),j(E,x),j(x,R),j(R,G),re=!0,U||(X=[Oe(e,"click",t[3]),Oe(s,"change",t[4]),Oe(m,"change",t[5]),Oe(O,"change",t[6])],U=!0)},p(Q,[Y]){let J=r;r=W(Q),r!==J&&(Nr(),Se(V[J],1,1,()=>{V[J]=null}),Rr(),n=V[r],n||(n=V[r]=H[r](Q),n.c()),we(n,1),n.m(e,null)),(!re||Y&4)&&(s.checked=Q[2]),(!re||Y&4)&&h!==(h=Q[2]?"Multi":"Single")&&Cn(d,h),(!re||Y&2)&&(m.checked=Q[1]),(!re||Y&1)&&(O.checked=Q[0])},i(Q){re||(we(n),re=!0)},o(Q){Se(n),re=!1},d(Q){Q&&k(e),V[r].d(),Q&&k(i),Q&&k(a),U=!1,fr(X)}}}function J3(t,e,r){let n,i,a,o;Dt(t,If,h=>r(0,n=h)),Dt(t,kf,h=>r(1,i=h)),Dt(t,u1,h=>r(2,a=h)),Dt(t,Cr,h=>r(7,o=h));function s(){const h=lf(o,a,i,n);navigator.clipboard.writeText(h)}function c(){ff.update(!a)}function p(){sf.update(!i)}function f(){af.update(!n)}return[n,i,a,s,c,p,f]}class Q3 extends wt{constructor(e){super(),At(this,e,J3,X3,Et,{})}}function eS(t){let e,r,n,i;return{c(){e=vt("g"),r=vt("circle"),this.h()},l(a){e=mt(a,"g",{});var o=$(e);r=mt(o,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),$(r).forEach(k),o.forEach(k),this.h()},h(){M(r,"cx",n=t[0][0]),M(r,"cy",i=t[0][1]),M(r,"r",t[1]),M(r,"stroke",t[3]),M(r,"stroke-width",t[2]),Yt(r,"fill","rgba(0,0,0,0)")},m(a,o){be(a,e,o),j(e,r)},p(a,[o]){o&1&&n!==(n=a[0][0])&&M(r,"cx",n),o&1&&i!==(i=a[0][1])&&M(r,"cy",i),o&2&&M(r,"r",a[1]),o&8&&M(r,"stroke",a[3]),o&4&&M(r,"stroke-width",a[2])},i:Me,o:Me,d(a){a&&k(e)}}}function tS(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=20}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class rS extends wt{constructor(e){super(),At(this,e,tS,eS,Et,{xy:0,radius:1,stroke:2,color:3})}}function nS(t){let e,r,n,i,a;return{c(){e=vt("polygon"),this.h()},l(o){e=mt(o,"polygon",{points:!0,"stroke-width":!0,fill:!0,transform:!0}),$(e).forEach(k),this.h()},h(){M(e,"points",r=`${t[7][0]},${t[7][1]} ${t[9][0]},${t[9][1]} ${t[8][0]},${t[8][1]} ${t[6][0]},${t[6][1]} ${t[4][0]},${t[4][1]} ${t[5][0]},${t[5][1]}`),M(e,"stroke-width",4),M(e,"fill",t[3]),M(e,"transform",n=`rotate(${t[1].toFixed(2)} ${t[0][0]} ${t[0][1]}) rotate(${t[2]?"180":"0"} ${(t[7][0]+t[6][0])/2} ${(t[7][1]+t[6][1])/2})`)},m(o,s){be(o,e,s),i||(a=[Oe(e,"mouseover",t[10]),Oe(e,"mouseout",t[11]),Oe(e,"mousedown",t[12])],i=!0)},p(o,[s]){s&1008&&r!==(r=`${o[7][0]},${o[7][1]} ${o[9][0]},${o[9][1]} ${o[8][0]},${o[8][1]} ${o[6][0]},${o[6][1]} ${o[4][0]},${o[4][1]} ${o[5][0]},${o[5][1]}`)&&M(e,"points",r),s&8&&M(e,"fill",o[3]),s&199&&n!==(n=`rotate(${o[1].toFixed(2)} ${o[0][0]} ${o[0][1]}) rotate(${o[2]?"180":"0"} ${(o[7][0]+o[6][0])/2} ${(o[7][1]+o[6][1])/2})`)&&M(e,"transform",n)},i:Me,o:Me,d(o){o&&k(e),i=!1,fr(a)}}}function iS(t,e,r){let n,i,a,o,s,c,{xy:p=[500,500]}=e,{radius:f=400}=e,{stroke:h=20}=e,{color:d="rgba(46,67,101, 0.4)"}=e,{hoverColor:g="white"}=e,{angle:b=0}=e,{handleMouseDown:m=E=>{}}=e,{reverse:_=!1}=e,D=d;function C(){r(3,D=g)}function A(){r(3,D=d)}function B(E){m(E)}return t.$$set=E=>{"xy"in E&&r(0,p=E.xy),"radius"in E&&r(13,f=E.radius),"stroke"in E&&r(14,h=E.stroke),"color"in E&&r(15,d=E.color),"hoverColor"in E&&r(16,g=E.hoverColor),"angle"in E&&r(1,b=E.angle),"handleMouseDown"in E&&r(17,m=E.handleMouseDown),"reverse"in E&&r(2,_=E.reverse)},t.$$.update=()=>{t.$$.dirty&24577&&r(9,n=xr(p,[-4,1],f-h/2)),t.$$.dirty&24577&&r(8,i=xr(p,[1,1],f-h/2)),t.$$.dirty&8193&&r(7,a=xr(p,[0,1],f)),t.$$.dirty&8193&&r(6,o=xr(p,[4,1],f)),t.$$.dirty&24577&&r(5,s=xr(p,[-3,1],f+h/2)),t.$$.dirty&24577&&r(4,c=xr(p,[1,1],f+h/2))},[p,b,_,D,c,s,o,a,i,n,C,A,B,f,h,d,g,m]}class uS extends wt{constructor(e){super(),At(this,e,iS,nS,Et,{xy:0,radius:13,stroke:14,color:15,hoverColor:16,angle:1,handleMouseDown:17,reverse:2})}}function pd(t,e,r){const n=t.slice();return n[19]=e[r][0],n[20]=e[r][1],n}function gd(t){let e,r,n=Object.entries(t[6].weightedPrompts).length>0,i,a;e=new Af({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[6].weightedPrompts),s=[];for(let f=0;f<o.length;f+=1)s[f]=vd(pd(t,o,f));const c=f=>Se(s[f],1,1,()=>{s[f]=null});let p=n&&md(t);return{c(){tt(e.$$.fragment);for(let f=0;f<s.length;f+=1)s[f].c();r=Rt(),p&&p.c(),i=Rt()},l(f){rt(e.$$.fragment,f);for(let h=0;h<s.length;h+=1)s[h].l(f);r=Rt(),p&&p.l(f),i=Rt()},m(f,h){nt(e,f,h);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(f,h);be(f,r,h),p&&p.m(f,h),be(f,i,h),a=!0},p(f,h){const d={};if(h&1&&(d.xy=f[0]),h&2&&(d.radius=f[1]),e.$set(d),h&1660){o=Object.entries(f[6].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=pd(f,o,g);s[g]?(s[g].p(b,h),we(s[g],1)):(s[g]=vd(b),s[g].c(),we(s[g],1),s[g].m(r.parentNode,r))}for(Nr(),g=o.length;g<s.length;g+=1)c(g);Rr()}h&64&&(n=Object.entries(f[6].weightedPrompts).length>0),n?p?(p.p(f,h),h&64&&we(p,1)):(p=md(f),p.c(),we(p,1),p.m(i.parentNode,i)):p&&(Nr(),Se(p,1,1,()=>{p=null}),Rr())},i(f){if(!a){we(e.$$.fragment,f);for(let h=0;h<o.length;h+=1)we(s[h]);we(p),a=!0}},o(f){Se(e.$$.fragment,f),s=s.filter(Boolean);for(let h=0;h<s.length;h+=1)Se(s[h]);Se(p),a=!1},d(f){it(e,f),Is(s,f),f&&k(r),p&&p.d(f),f&&k(i)}}}function vd(t){let e,r,n;e=new oa({props:{xy:t[10](t[5][t[19]].xy,kr(t[3],t[20].text.length,t[4])),color:`rgba(255,255,255,${Er(t[5][t[19]].unitWeight)}`,wh:kr(t[3],t[20].text.length,t[4]),fontSize:t[4],text:t[20].text}});function i(){return t[13](t[19])}return r=new yu({props:{xy:t[5][t[19]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:i}}),{c(){tt(e.$$.fragment),tt(r.$$.fragment)},l(a){rt(e.$$.fragment,a),rt(r.$$.fragment,a)},m(a,o){nt(e,a,o),nt(r,a,o),n=!0},p(a,o){t=a;const s={};o&120&&(s.xy=t[10](t[5][t[19]].xy,kr(t[3],t[20].text.length,t[4]))),o&96&&(s.color=`rgba(255,255,255,${Er(t[5][t[19]].unitWeight)}`),o&88&&(s.wh=kr(t[3],t[20].text.length,t[4])),o&16&&(s.fontSize=t[4]),o&64&&(s.text=t[20].text),e.$set(s);const c={};o&96&&(c.xy=t[5][t[19]].xy),o&4&&(c.radius=t[2]),o&64&&(c.handleMouseDown=i),r.$set(c)},i(a){n||(we(e.$$.fragment,a),we(r.$$.fragment,a),n=!0)},o(a){Se(e.$$.fragment,a),Se(r.$$.fragment,a),n=!1},d(a){it(e,a),it(r,a)}}}function md(t){let e,r,n;return e=new rS({props:{xy:t[0],radius:t[7],stroke:30}}),r=new uS({props:{reverse:t[6].ringReverse,xy:t[0],radius:t[7],stroke:30,angle:t[6].ringStartAngle,color:"rgba(136,157,191, 1)",handleMouseDown:t[14]}}),{c(){tt(e.$$.fragment),tt(r.$$.fragment)},l(i){rt(e.$$.fragment,i),rt(r.$$.fragment,i)},m(i,a){nt(e,i,a),nt(r,i,a),n=!0},p(i,a){const o={};a&1&&(o.xy=i[0]),a&128&&(o.radius=i[7]),e.$set(o);const s={};a&64&&(s.reverse=i[6].ringReverse),a&1&&(s.xy=i[0]),a&128&&(s.radius=i[7]),a&64&&(s.angle=i[6].ringStartAngle),r.$set(s)},i(i){n||(we(e.$$.fragment,i),we(r.$$.fragment,i),n=!0)},o(i){Se(e.$$.fragment,i),Se(r.$$.fragment,i),n=!1},d(i){it(e,i),it(r,i)}}}function aS(t){let e,r,n,i,a=t[5]&&t[6].weightedPrompts&&gd(t);return{c(){e=vt("svg"),a&&a.c(),this.h()},l(o){e=mt(o,"svg",{id:!0,class:!0});var s=$(e);a&&a.l(s),s.forEach(k),this.h()},h(){M(e,"id","svg"),M(e,"class","w-full h-full")},m(o,s){be(o,e,s),a&&a.m(e,null),r=!0,n||(i=[Oe(e,"mousemove",t[11]),Oe(e,"mouseup",t[8]),Oe(e,"dblclick",t[12])],n=!0)},p(o,[s]){o[5]&&o[6].weightedPrompts?a?(a.p(o,s),s&96&&we(a,1)):(a=gd(o),a.c(),we(a,1),a.m(e,null)):a&&(Nr(),Se(a,1,1,()=>{a=null}),Rr())},i(o){r||(we(a),r=!0)},o(o){Se(a),r=!1},d(o){o&&k(e),a&&a.d(),n=!1,fr(i)}}}function _d(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const o=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function sS(t,e,r){let n,i,a;Dt(t,Cr,O=>r(6,a=O));let{center:o=[450,450]}=e,{radius:s=250}=e,{pointRadius:c=10}=e,{textWidth:p=150}=e,{fontSize:f=13}=e,h=[0,0],d=null;function g(O){d=null}function b(O){d=O}function m(O,P){let x=kn(O,o,s)[0]-180;x<0&&(x+=360);const R=Ef(la(P),x);return Gr(O,R)}function _(O){console.log(s,n);const P=Vr(kn(ia(O,o,n),o,n)[0]);r(5,i=A(a.weightedPrompts,o,s,a.ringWeightScaling,a.ringExponentialScaling,P,a.ringAngles))}function D(O){if(h=li(O),d==="main")_(h);else if(d){const P={...a.weightedPrompts[d]},x=ia(h,o,s),R=kn(x,o,s)[0],G={...a.ringAngles};G[P.id]=R;const re={...a.weightedPrompts};re[d]=P,r(5,i=A(re,o,s,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,G))}}function C(O){h=li(O),_(h)}function A(O,P,x,R,G,re,U){if(!O||!P||!x||!R)return null;let X=Object.entries(O).reduce((V,[W,Q])=>{const J=a.ringReverse?re-U[W]:U[W]-re,le=Vr(J),me=Math.pow(1-le/360,G?R:1);return V[W]={angleDifference:le,xy:xr(P,[U[W],1],x),unitWeight:me},V},{});console.log("relativeAngles",X);const H={...O};return Object.entries(X).forEach(([V,W])=>{H[V].ringWeight=W.unitWeight}),console.log("ringStartAngle",re),Ot.update({...a,ringStartAngle:re,weightedPrompts:H,ringAngles:U}),X}const B=O=>b(O),E=()=>b("main");return t.$$set=O=>{"center"in O&&r(0,o=O.center),"radius"in O&&r(1,s=O.radius),"pointRadius"in O&&r(2,c=O.pointRadius),"textWidth"in O&&r(3,p=O.textWidth),"fontSize"in O&&r(4,f=O.fontSize)},t.$$.update=()=>{t.$$.dirty&2&&r(7,n=s-30),t.$$.dirty&64&&Object.keys(a.ringAngles).length!==Object.keys(a.weightedPrompts).length&&Ot.update({...a,ringAngles:_d(a.weightedPrompts,{})}),t.$$.dirty&67&&r(5,i=A(a.weightedPrompts,o,s,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,a.ringAngles||_d(a.weightedPrompts,{}))),t.$$.dirty&96&&(console.log("pointData",i),console.log("weightedPrompts",a.weightedPrompts))},[o,s,c,p,f,i,a,n,g,b,m,D,C,B,E]}class oS extends wt{constructor(e){super(),At(this,e,sS,aS,Et,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function Dd(t){let e,r,n,i,a,o,s,c;return{c(){e=ie("div"),r=ie("label"),n=ie("span"),i=We("Scaling Power"),a=Le(),o=ie("input"),this.h()},l(p){e=ue(p,"DIV",{class:!0});var f=$(e);r=ue(f,"LABEL",{class:!0});var h=$(r);n=ue(h,"SPAN",{class:!0});var d=$(n);i=He(d,"Scaling Power"),d.forEach(k),h.forEach(k),a=Ue(f),o=ue(f,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),f.forEach(k),this.h()},h(){M(n,"class","label-text"),M(r,"class","label"),M(o,"type","range"),M(o,"min","0.5"),M(o,"max","5"),M(o,"step","0.1"),M(o,"class","range range-xs"),M(e,"class","w-full px-2")},m(p,f){be(p,e,f),j(e,r),j(r,n),j(n,i),j(e,a),j(e,o),Hn(o,t[0]),s||(c=[Oe(o,"change",t[7]),Oe(o,"input",t[7])],s=!0)},p(p,f){f&1&&Hn(o,p[0])},d(p){p&&k(e),s=!1,fr(c)}}}function lS(t){let e,r,n,i,a,o,s,c,p,f,h,d,g,b,m,_,D,C,A;r=new oS({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let B=t[1]&&Dd(t);return{c(){e=ie("div"),tt(r.$$.fragment),i=Le(),a=ie("div"),o=ie("div"),s=ie("label"),c=ie("span"),p=We("Exponential Scaling"),f=Le(),h=ie("input"),d=Le(),B&&B.c(),g=Le(),b=ie("div"),m=ie("button"),_=We("Reverse"),this.h()},l(E){e=ue(E,"DIV",{class:!0});var O=$(e);rt(r.$$.fragment,O),O.forEach(k),i=Ue(E),a=ue(E,"DIV",{class:!0});var P=$(a);o=ue(P,"DIV",{class:!0});var x=$(o);s=ue(x,"LABEL",{class:!0});var R=$(s);c=ue(R,"SPAN",{class:!0});var G=$(c);p=He(G,"Exponential Scaling"),G.forEach(k),R.forEach(k),f=Ue(x),h=ue(x,"INPUT",{type:!0,class:!0}),x.forEach(k),d=Ue(P),B&&B.l(P),g=Ue(P),b=ue(P,"DIV",{class:!0});var re=$(b);m=ue(re,"BUTTON",{class:!0});var U=$(m);_=He(U,"Reverse"),U.forEach(k),re.forEach(k),P.forEach(k),this.h()},h(){M(e,"class","w-full h-full"),aa(()=>t[5].call(e)),M(c,"class","label-text"),M(s,"class","label"),M(h,"type","checkbox"),M(h,"class","toggle toggle-xs"),M(o,"class","w-52 px-2"),M(m,"class","btn btn-xs btn-primary"),M(b,"class","w-32 px-2 pb-1 flex flex-col justify-end"),M(a,"class","px-2 py-4 pb-0 flex")},m(E,O){be(E,e,O),nt(r,e,null),n=sa(e,t[5].bind(e)),be(E,i,O),be(E,a,O),j(a,o),j(o,s),j(s,c),j(c,p),j(o,f),j(o,h),h.checked=t[1],j(a,d),B&&B.m(a,null),j(a,g),j(a,b),j(b,m),j(m,_),D=!0,C||(A=[Oe(h,"change",t[6]),Oe(m,"click",t[4])],C=!0)},p(E,[O]){const P={};O&12&&(P.center=[Math.round(E[2]/2),Math.round(E[3]/2)]),O&12&&(P.radius=Math.round(Math.min(E[2],E[3])/2)-150),r.$set(P),O&2&&(h.checked=E[1]),E[1]?B?B.p(E,O):(B=Dd(E),B.c(),B.m(a,g)):B&&(B.d(1),B=null)},i(E){D||(we(r.$$.fragment,E),D=!0)},o(E){Se(r.$$.fragment,E),D=!1},d(E){E&&k(e),it(r),n(),E&&k(i),E&&k(a),B&&B.d(),C=!1,fr(A)}}}function fS(t,e,r){let n;Dt(t,Cr,d=>r(8,n=d));let i,a,o=n.ringWeightScaling||2,s=pf(n.ringExponentialScaling)?!0:n.ringExponentialScaling;function c(){Ot.update({...Ot.get(),ringReverse:!n.ringReverse})}function p(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function f(){s=this.checked,r(1,s)}function h(){o=Gd(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&Ot.update({...Ot.get(),ringExponentialScaling:s,ringWeightScaling:o})},[o,s,i,a,c,p,f,h]}class cS extends wt{constructor(e){super(),At(this,e,fS,lS,Et,{})}}function bd(t){let e,r;return e=new My({}),{c(){tt(e.$$.fragment)},l(n){rt(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},i(n){r||(we(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){it(e,n)}}}function hS(t){let e,r;return e=new N3({}),{c(){tt(e.$$.fragment)},l(n){rt(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},i(n){r||(we(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){it(e,n)}}}function dS(t){let e,r;return e=new cS({}),{c(){tt(e.$$.fragment)},l(n){rt(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},i(n){r||(we(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){it(e,n)}}}function pS(t){let e,r;return e=new w2({}),{c(){tt(e.$$.fragment)},l(n){rt(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},i(n){r||(we(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){it(e,n)}}}function gS(t){let e,r;return e=new V2({}),{c(){tt(e.$$.fragment)},l(n){rt(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},i(n){r||(we(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){it(e,n)}}}function vS(t){let e,r;return e=new M2({}),{c(){tt(e.$$.fragment)},l(n){rt(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},i(n){r||(we(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){it(e,n)}}}function mS(t){let e,r,n,i,a,o,s,c,p,f,h,d;i=new yy({});let g=(t[0].weightMode===dt.Circle||t[0].weightMode===dt.Pie||t[0].weightMode===dt.Ring)&&bd();const b=[vS,gS,pS,dS,hS],m=[];function _(D,C){return D[0].weightMode===dt.Bars?0:D[0].weightMode===dt.Pie?1:D[0].weightMode===dt.Circle?2:D[0].weightMode===dt.Ring?3:D[0].weightMode===dt.Embed?4:-1}return~(s=_(t))&&(c=m[s]=b[s](t)),h=new Q3({}),{c(){e=ie("div"),r=ie("div"),n=ie("div"),tt(i.$$.fragment),a=Le(),g&&g.c(),o=Le(),c&&c.c(),p=Le(),f=ie("div"),tt(h.$$.fragment),this.h()},l(D){e=ue(D,"DIV",{class:!0});var C=$(e);r=ue(C,"DIV",{class:!0});var A=$(r);n=ue(A,"DIV",{class:!0});var B=$(n);rt(i.$$.fragment,B),a=Ue(B),g&&g.l(B),B.forEach(k),o=Ue(A),c&&c.l(A),p=Ue(A),f=ue(A,"DIV",{class:!0});var E=$(f);rt(h.$$.fragment,E),E.forEach(k),A.forEach(k),C.forEach(k),this.h()},h(){M(n,"class","absolute top-0 right-0 z-10"),M(f,"class","h-48 w-full p-4 flex flex-col"),M(r,"class","flex flex-col h-full place-content-between"),M(e,"class","relative w-full h-full flex flex-col")},m(D,C){be(D,e,C),j(e,r),j(r,n),nt(i,n,null),j(n,a),g&&g.m(n,null),j(r,o),~s&&m[s].m(r,null),j(r,p),j(r,f),nt(h,f,null),d=!0},p(D,[C]){D[0].weightMode===dt.Circle||D[0].weightMode===dt.Pie||D[0].weightMode===dt.Ring?g?C&1&&we(g,1):(g=bd(),g.c(),we(g,1),g.m(n,null)):g&&(Nr(),Se(g,1,1,()=>{g=null}),Rr());let A=s;s=_(D),s!==A&&(c&&(Nr(),Se(m[A],1,1,()=>{m[A]=null}),Rr()),~s?(c=m[s],c||(c=m[s]=b[s](D),c.c()),we(c,1),c.m(r,p)):c=null)},i(D){d||(we(i.$$.fragment,D),we(g),we(c),we(h.$$.fragment,D),d=!0)},o(D){Se(i.$$.fragment,D),Se(g),Se(c),Se(h.$$.fragment,D),d=!1},d(D){D&&k(e),it(i),g&&g.d(),~s&&m[s].d(),it(h)}}}function _S(t,e,r){let n;return Dt(t,Cr,i=>r(0,n=i)),[n]}class DS extends wt{constructor(e){super(),At(this,e,_S,mS,Et,{})}}var Ps={},bS={get exports(){return Ps},set exports(t){Ps=t}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var r,n="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",s="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",p=500,f="__lodash_placeholder__",h=1,d=2,g=4,b=1,m=2,_=1,D=2,C=4,A=8,B=16,E=32,O=64,P=128,x=256,R=512,G=30,re="...",U=800,X=16,H=1,V=2,W=3,Q=1/0,Y=9007199254740991,J=17976931348623157e292,le=0/0,me=4294967295,Ce=me-1,Ae=me>>>1,Pe=[["ary",P],["bind",_],["bindKey",D],["curry",A],["curryRight",B],["flip",R],["partial",E],["partialRight",O],["rearg",x]],Ve="[object Arguments]",Ie="[object Array]",Xe="[object AsyncFunction]",ze="[object Boolean]",Re="[object Date]",je="[object DOMException]",pt="[object Error]",ut="[object Function]",lt="[object GeneratorFunction]",at="[object Map]",st="[object Number]",Ke="[object Null]",$e="[object Object]",Ee="[object Promise]",Te="[object Proxy]",Bt="[object RegExp]",Vt="[object Set]",Ht="[object String]",L="[object Symbol]",z="[object Undefined]",Z="[object WeakMap]",fe="[object WeakSet]",ae="[object ArrayBuffer]",he="[object DataView]",se="[object Float32Array]",ce="[object Float64Array]",ye="[object Int8Array]",ke="[object Int16Array]",Je="[object Int32Array]",Fe="[object Uint8Array]",zt="[object Uint8ClampedArray]",It="[object Uint16Array]",rr="[object Uint32Array]",Zt=/\b__p \+= '';/g,_r=/\b(__p \+=) '' \+/g,Xt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Dr=/&(?:amp|lt|gt|quot|#39);/g,cr=/[&<>"']/g,hr=RegExp(Dr.source),cn=RegExp(cr.source),pr=/<%-([\s\S]+?)%>/g,Sn=/<%([\s\S]+?)%>/g,Yn=/<%=([\s\S]+?)%>/g,Rn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ln=/^\w*$/,Ki=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ti=/[\\^$.*+?()[\]{}|]/g,Au=RegExp(Ti.source),Fr=/^\s+/,nr=/\s/,Eu=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,fi=/\{\n\/\* \[wrapped with (.+)\] \*/,hn=/,? & /,Zn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xi=/[()=,{}\[\]\/\s]/,Cu=/\\(\\)?/g,Fu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$i=/\w*$/,Su=/^[-+]0x[0-9a-f]+$/i,Bu=/^0b[01]+$/i,Ou=/^\[object .+?Constructor\]$/,Mu=/^0o[0-7]+$/i,Pu=/^(?:0|[1-9]\d*)$/,Tu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ci=/($^)/,xu=/['\n\r\u2028\u2029\\]/g,hi="\\ud800-\\udfff",Iu="\\u0300-\\u036f",ku="\\ufe20-\\ufe2f",Nu="\\u20d0-\\u20ff",Yi=Iu+ku+Nu,Un="\\u2700-\\u27bf",br="a-z\\xdf-\\xf6\\xf8-\\xff",ar="\\xac\\xb1\\xd7\\xf7",qr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ii="\\u2000-\\u206f",Xn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vn="A-Z\\xc0-\\xd6\\xd8-\\xde",ki="\\ufe0e\\ufe0f",Bn=ar+qr+Ii+Xn,dn="['’]",Js="["+hi+"]",Ru="["+Bn+"]",Zi="["+Yi+"]",ca="\\d+",y="["+Un+"]",F="["+br+"]",N="[^"+hi+Bn+ca+Un+br+Vn+"]",ee="\\ud83c[\\udffb-\\udfff]",pe="(?:"+Zi+"|"+ee+")",Be="[^"+hi+"]",ht="(?:\\ud83c[\\udde6-\\uddff]){2}",Ft="[\\ud800-\\udbff][\\udc00-\\udfff]",Kt="["+Vn+"]",sr="\\u200d",Nf="(?:"+F+"|"+N+")",h1="(?:"+Kt+"|"+N+")",Rf="(?:"+dn+"(?:d|ll|m|re|s|t|ve))?",Lf="(?:"+dn+"(?:D|LL|M|RE|S|T|VE))?",Uf=pe+"?",Vf="["+ki+"]?",d1="(?:"+sr+"(?:"+[Be,ht,Ft].join("|")+")"+Vf+Uf+")*",p1="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",g1="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",jf=Vf+Uf+d1,v1="(?:"+[y,ht,Ft].join("|")+")"+jf,m1="(?:"+[Be+Zi+"?",Zi,ht,Ft,Js].join("|")+")",_1=RegExp(dn,"g"),D1=RegExp(Zi,"g"),Qs=RegExp(ee+"(?="+ee+")|"+m1+jf,"g"),b1=RegExp([Kt+"?"+F+"+"+Rf+"(?="+[Ru,Kt,"$"].join("|")+")",h1+"+"+Lf+"(?="+[Ru,Kt+Nf,"$"].join("|")+")",Kt+"?"+Nf+"+"+Rf,Kt+"+"+Lf,g1,p1,ca,v1].join("|"),"g"),y1=RegExp("["+sr+hi+Yi+ki+"]"),w1=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,A1=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],E1=-1,Gt={};Gt[se]=Gt[ce]=Gt[ye]=Gt[ke]=Gt[Je]=Gt[Fe]=Gt[zt]=Gt[It]=Gt[rr]=!0,Gt[Ve]=Gt[Ie]=Gt[ae]=Gt[ze]=Gt[he]=Gt[Re]=Gt[pt]=Gt[ut]=Gt[at]=Gt[st]=Gt[$e]=Gt[Bt]=Gt[Vt]=Gt[Ht]=Gt[Z]=!1;var Wt={};Wt[Ve]=Wt[Ie]=Wt[ae]=Wt[he]=Wt[ze]=Wt[Re]=Wt[se]=Wt[ce]=Wt[ye]=Wt[ke]=Wt[Je]=Wt[at]=Wt[st]=Wt[$e]=Wt[Bt]=Wt[Vt]=Wt[Ht]=Wt[L]=Wt[Fe]=Wt[zt]=Wt[It]=Wt[rr]=!0,Wt[pt]=Wt[ut]=Wt[Z]=!1;var C1={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},F1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},S1={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},B1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},O1=parseFloat,M1=parseInt,qf=typeof dr=="object"&&dr&&dr.Object===Object&&dr,P1=typeof self=="object"&&self&&self.Object===Object&&self,Sr=qf||P1||Function("return this")(),eo=e&&!e.nodeType&&e,Ni=eo&&!0&&t&&!t.nodeType&&t,zf=Ni&&Ni.exports===eo,to=zf&&qf.process,pn=function(){try{var te=Ni&&Ni.require&&Ni.require("util").types;return te||to&&to.binding&&to.binding("util")}catch{}}(),Wf=pn&&pn.isArrayBuffer,Hf=pn&&pn.isDate,Gf=pn&&pn.isMap,Kf=pn&&pn.isRegExp,$f=pn&&pn.isSet,Yf=pn&&pn.isTypedArray;function tn(te,de,oe){switch(oe.length){case 0:return te.call(de);case 1:return te.call(de,oe[0]);case 2:return te.call(de,oe[0],oe[1]);case 3:return te.call(de,oe[0],oe[1],oe[2])}return te.apply(de,oe)}function T1(te,de,oe,Ne){for(var ft=-1,Mt=te==null?0:te.length;++ft<Mt;){var gr=te[ft];de(Ne,gr,oe(gr),te)}return Ne}function gn(te,de){for(var oe=-1,Ne=te==null?0:te.length;++oe<Ne&&de(te[oe],oe,te)!==!1;);return te}function x1(te,de){for(var oe=te==null?0:te.length;oe--&&de(te[oe],oe,te)!==!1;);return te}function Zf(te,de){for(var oe=-1,Ne=te==null?0:te.length;++oe<Ne;)if(!de(te[oe],oe,te))return!1;return!0}function di(te,de){for(var oe=-1,Ne=te==null?0:te.length,ft=0,Mt=[];++oe<Ne;){var gr=te[oe];de(gr,oe,te)&&(Mt[ft++]=gr)}return Mt}function ha(te,de){var oe=te==null?0:te.length;return!!oe&&Xi(te,de,0)>-1}function ro(te,de,oe){for(var Ne=-1,ft=te==null?0:te.length;++Ne<ft;)if(oe(de,te[Ne]))return!0;return!1}function $t(te,de){for(var oe=-1,Ne=te==null?0:te.length,ft=Array(Ne);++oe<Ne;)ft[oe]=de(te[oe],oe,te);return ft}function pi(te,de){for(var oe=-1,Ne=de.length,ft=te.length;++oe<Ne;)te[ft+oe]=de[oe];return te}function no(te,de,oe,Ne){var ft=-1,Mt=te==null?0:te.length;for(Ne&&Mt&&(oe=te[++ft]);++ft<Mt;)oe=de(oe,te[ft],ft,te);return oe}function I1(te,de,oe,Ne){var ft=te==null?0:te.length;for(Ne&&ft&&(oe=te[--ft]);ft--;)oe=de(oe,te[ft],ft,te);return oe}function io(te,de){for(var oe=-1,Ne=te==null?0:te.length;++oe<Ne;)if(de(te[oe],oe,te))return!0;return!1}var k1=uo("length");function N1(te){return te.split("")}function R1(te){return te.match(Zn)||[]}function Xf(te,de,oe){var Ne;return oe(te,function(ft,Mt,gr){if(de(ft,Mt,gr))return Ne=Mt,!1}),Ne}function da(te,de,oe,Ne){for(var ft=te.length,Mt=oe+(Ne?1:-1);Ne?Mt--:++Mt<ft;)if(de(te[Mt],Mt,te))return Mt;return-1}function Xi(te,de,oe){return de===de?Y1(te,de,oe):da(te,Jf,oe)}function L1(te,de,oe,Ne){for(var ft=oe-1,Mt=te.length;++ft<Mt;)if(Ne(te[ft],de))return ft;return-1}function Jf(te){return te!==te}function Qf(te,de){var oe=te==null?0:te.length;return oe?so(te,de)/oe:le}function uo(te){return function(de){return de==null?r:de[te]}}function ao(te){return function(de){return te==null?r:te[de]}}function ec(te,de,oe,Ne,ft){return ft(te,function(Mt,gr,jt){oe=Ne?(Ne=!1,Mt):de(oe,Mt,gr,jt)}),oe}function U1(te,de){var oe=te.length;for(te.sort(de);oe--;)te[oe]=te[oe].value;return te}function so(te,de){for(var oe,Ne=-1,ft=te.length;++Ne<ft;){var Mt=de(te[Ne]);Mt!==r&&(oe=oe===r?Mt:oe+Mt)}return oe}function oo(te,de){for(var oe=-1,Ne=Array(te);++oe<te;)Ne[oe]=de(oe);return Ne}function V1(te,de){return $t(de,function(oe){return[oe,te[oe]]})}function tc(te){return te&&te.slice(0,uc(te)+1).replace(Fr,"")}function rn(te){return function(de){return te(de)}}function lo(te,de){return $t(de,function(oe){return te[oe]})}function Lu(te,de){return te.has(de)}function rc(te,de){for(var oe=-1,Ne=te.length;++oe<Ne&&Xi(de,te[oe],0)>-1;);return oe}function nc(te,de){for(var oe=te.length;oe--&&Xi(de,te[oe],0)>-1;);return oe}function j1(te,de){for(var oe=te.length,Ne=0;oe--;)te[oe]===de&&++Ne;return Ne}var q1=ao(C1),z1=ao(F1);function W1(te){return"\\"+B1[te]}function H1(te,de){return te==null?r:te[de]}function Ji(te){return y1.test(te)}function G1(te){return w1.test(te)}function K1(te){for(var de,oe=[];!(de=te.next()).done;)oe.push(de.value);return oe}function fo(te){var de=-1,oe=Array(te.size);return te.forEach(function(Ne,ft){oe[++de]=[ft,Ne]}),oe}function ic(te,de){return function(oe){return te(de(oe))}}function gi(te,de){for(var oe=-1,Ne=te.length,ft=0,Mt=[];++oe<Ne;){var gr=te[oe];(gr===de||gr===f)&&(te[oe]=f,Mt[ft++]=oe)}return Mt}function pa(te){var de=-1,oe=Array(te.size);return te.forEach(function(Ne){oe[++de]=Ne}),oe}function $1(te){var de=-1,oe=Array(te.size);return te.forEach(function(Ne){oe[++de]=[Ne,Ne]}),oe}function Y1(te,de,oe){for(var Ne=oe-1,ft=te.length;++Ne<ft;)if(te[Ne]===de)return Ne;return-1}function Z1(te,de,oe){for(var Ne=oe+1;Ne--;)if(te[Ne]===de)return Ne;return Ne}function Qi(te){return Ji(te)?J1(te):k1(te)}function On(te){return Ji(te)?Q1(te):N1(te)}function uc(te){for(var de=te.length;de--&&nr.test(te.charAt(de)););return de}var X1=ao(S1);function J1(te){for(var de=Qs.lastIndex=0;Qs.test(te);)++de;return de}function Q1(te){return te.match(Qs)||[]}function eg(te){return te.match(b1)||[]}var tg=function te(de){de=de==null?Sr:eu.defaults(Sr.Object(),de,eu.pick(Sr,A1));var oe=de.Array,Ne=de.Date,ft=de.Error,Mt=de.Function,gr=de.Math,jt=de.Object,co=de.RegExp,rg=de.String,vn=de.TypeError,ga=oe.prototype,ng=Mt.prototype,tu=jt.prototype,va=de["__core-js_shared__"],ma=ng.toString,kt=tu.hasOwnProperty,ig=0,ac=function(){var u=/[^.]+$/.exec(va&&va.keys&&va.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),_a=tu.toString,ug=ma.call(jt),ag=Sr._,sg=co("^"+ma.call(kt).replace(Ti,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Da=zf?de.Buffer:r,vi=de.Symbol,ba=de.Uint8Array,sc=Da?Da.allocUnsafe:r,ya=ic(jt.getPrototypeOf,jt),oc=jt.create,lc=tu.propertyIsEnumerable,wa=ga.splice,fc=vi?vi.isConcatSpreadable:r,Uu=vi?vi.iterator:r,Ri=vi?vi.toStringTag:r,Aa=function(){try{var u=qi(jt,"defineProperty");return u({},"",{}),u}catch{}}(),og=de.clearTimeout!==Sr.clearTimeout&&de.clearTimeout,lg=Ne&&Ne.now!==Sr.Date.now&&Ne.now,fg=de.setTimeout!==Sr.setTimeout&&de.setTimeout,Ea=gr.ceil,Ca=gr.floor,ho=jt.getOwnPropertySymbols,cg=Da?Da.isBuffer:r,cc=de.isFinite,hg=ga.join,dg=ic(jt.keys,jt),vr=gr.max,Lr=gr.min,pg=Ne.now,gg=de.parseInt,hc=gr.random,vg=ga.reverse,po=qi(de,"DataView"),Vu=qi(de,"Map"),go=qi(de,"Promise"),ru=qi(de,"Set"),ju=qi(de,"WeakMap"),qu=qi(jt,"create"),Fa=ju&&new ju,nu={},mg=zi(po),_g=zi(Vu),Dg=zi(go),bg=zi(ru),yg=zi(ju),Sa=vi?vi.prototype:r,zu=Sa?Sa.valueOf:r,dc=Sa?Sa.toString:r;function T(u){if(ir(u)&&!ct(u)&&!(u instanceof Ct)){if(u instanceof mn)return u;if(kt.call(u,"__wrapped__"))return ph(u)}return new mn(u)}var iu=function(){function u(){}return function(l){if(!Jt(l))return{};if(oc)return oc(l);u.prototype=l;var v=new u;return u.prototype=r,v}}();function Ba(){}function mn(u,l){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=r}T.templateSettings={escape:pr,evaluate:Sn,interpolate:Yn,variable:"",imports:{_:T}},T.prototype=Ba.prototype,T.prototype.constructor=T,mn.prototype=iu(Ba.prototype),mn.prototype.constructor=mn;function Ct(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=me,this.__views__=[]}function wg(){var u=new Ct(this.__wrapped__);return u.__actions__=$r(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=$r(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=$r(this.__views__),u}function Ag(){if(this.__filtered__){var u=new Ct(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function Eg(){var u=this.__wrapped__.value(),l=this.__dir__,v=ct(u),w=l<0,S=v?u.length:0,I=Nv(0,S,this.__views__),q=I.start,K=I.end,ne=K-q,ge=w?K:q-1,ve=this.__iteratees__,De=ve.length,xe=0,qe=Lr(ne,this.__takeCount__);if(!v||!w&&S==ne&&qe==ne)return Rc(u,this.__actions__);var Qe=[];e:for(;ne--&&xe<qe;){ge+=l;for(var _t=-1,et=u[ge];++_t<De;){var yt=ve[_t],St=yt.iteratee,an=yt.type,Hr=St(et);if(an==V)et=Hr;else if(!Hr){if(an==H)continue e;break e}}Qe[xe++]=et}return Qe}Ct.prototype=iu(Ba.prototype),Ct.prototype.constructor=Ct;function Li(u){var l=-1,v=u==null?0:u.length;for(this.clear();++l<v;){var w=u[l];this.set(w[0],w[1])}}function Cg(){this.__data__=qu?qu(null):{},this.size=0}function Fg(u){var l=this.has(u)&&delete this.__data__[u];return this.size-=l?1:0,l}function Sg(u){var l=this.__data__;if(qu){var v=l[u];return v===c?r:v}return kt.call(l,u)?l[u]:r}function Bg(u){var l=this.__data__;return qu?l[u]!==r:kt.call(l,u)}function Og(u,l){var v=this.__data__;return this.size+=this.has(u)?0:1,v[u]=qu&&l===r?c:l,this}Li.prototype.clear=Cg,Li.prototype.delete=Fg,Li.prototype.get=Sg,Li.prototype.has=Bg,Li.prototype.set=Og;function Jn(u){var l=-1,v=u==null?0:u.length;for(this.clear();++l<v;){var w=u[l];this.set(w[0],w[1])}}function Mg(){this.__data__=[],this.size=0}function Pg(u){var l=this.__data__,v=Oa(l,u);if(v<0)return!1;var w=l.length-1;return v==w?l.pop():wa.call(l,v,1),--this.size,!0}function Tg(u){var l=this.__data__,v=Oa(l,u);return v<0?r:l[v][1]}function xg(u){return Oa(this.__data__,u)>-1}function Ig(u,l){var v=this.__data__,w=Oa(v,u);return w<0?(++this.size,v.push([u,l])):v[w][1]=l,this}Jn.prototype.clear=Mg,Jn.prototype.delete=Pg,Jn.prototype.get=Tg,Jn.prototype.has=xg,Jn.prototype.set=Ig;function Qn(u){var l=-1,v=u==null?0:u.length;for(this.clear();++l<v;){var w=u[l];this.set(w[0],w[1])}}function kg(){this.size=0,this.__data__={hash:new Li,map:new(Vu||Jn),string:new Li}}function Ng(u){var l=ja(this,u).delete(u);return this.size-=l?1:0,l}function Rg(u){return ja(this,u).get(u)}function Lg(u){return ja(this,u).has(u)}function Ug(u,l){var v=ja(this,u),w=v.size;return v.set(u,l),this.size+=v.size==w?0:1,this}Qn.prototype.clear=kg,Qn.prototype.delete=Ng,Qn.prototype.get=Rg,Qn.prototype.has=Lg,Qn.prototype.set=Ug;function Ui(u){var l=-1,v=u==null?0:u.length;for(this.__data__=new Qn;++l<v;)this.add(u[l])}function Vg(u){return this.__data__.set(u,c),this}function jg(u){return this.__data__.has(u)}Ui.prototype.add=Ui.prototype.push=Vg,Ui.prototype.has=jg;function Mn(u){var l=this.__data__=new Jn(u);this.size=l.size}function qg(){this.__data__=new Jn,this.size=0}function zg(u){var l=this.__data__,v=l.delete(u);return this.size=l.size,v}function Wg(u){return this.__data__.get(u)}function Hg(u){return this.__data__.has(u)}function Gg(u,l){var v=this.__data__;if(v instanceof Jn){var w=v.__data__;if(!Vu||w.length<i-1)return w.push([u,l]),this.size=++v.size,this;v=this.__data__=new Qn(w)}return v.set(u,l),this.size=v.size,this}Mn.prototype.clear=qg,Mn.prototype.delete=zg,Mn.prototype.get=Wg,Mn.prototype.has=Hg,Mn.prototype.set=Gg;function pc(u,l){var v=ct(u),w=!v&&Wi(u),S=!v&&!w&&yi(u),I=!v&&!w&&!S&&ou(u),q=v||w||S||I,K=q?oo(u.length,rg):[],ne=K.length;for(var ge in u)(l||kt.call(u,ge))&&!(q&&(ge=="length"||S&&(ge=="offset"||ge=="parent")||I&&(ge=="buffer"||ge=="byteLength"||ge=="byteOffset")||ni(ge,ne)))&&K.push(ge);return K}function gc(u){var l=u.length;return l?u[Fo(0,l-1)]:r}function Kg(u,l){return qa($r(u),Vi(l,0,u.length))}function $g(u){return qa($r(u))}function vo(u,l,v){(v!==r&&!Pn(u[l],v)||v===r&&!(l in u))&&ei(u,l,v)}function Wu(u,l,v){var w=u[l];(!(kt.call(u,l)&&Pn(w,v))||v===r&&!(l in u))&&ei(u,l,v)}function Oa(u,l){for(var v=u.length;v--;)if(Pn(u[v][0],l))return v;return-1}function Yg(u,l,v,w){return mi(u,function(S,I,q){l(w,S,v(S),q)}),w}function vc(u,l){return u&&qn(l,yr(l),u)}function Zg(u,l){return u&&qn(l,Zr(l),u)}function ei(u,l,v){l=="__proto__"&&Aa?Aa(u,l,{configurable:!0,enumerable:!0,value:v,writable:!0}):u[l]=v}function mo(u,l){for(var v=-1,w=l.length,S=oe(w),I=u==null;++v<w;)S[v]=I?r:Xo(u,l[v]);return S}function Vi(u,l,v){return u===u&&(v!==r&&(u=u<=v?u:v),l!==r&&(u=u>=l?u:l)),u}function _n(u,l,v,w,S,I){var q,K=l&h,ne=l&d,ge=l&g;if(v&&(q=S?v(u,w,S,I):v(u)),q!==r)return q;if(!Jt(u))return u;var ve=ct(u);if(ve){if(q=Lv(u),!K)return $r(u,q)}else{var De=Ur(u),xe=De==ut||De==lt;if(yi(u))return Vc(u,K);if(De==$e||De==Ve||xe&&!S){if(q=ne||xe?{}:uh(u),!K)return ne?Sv(u,Zg(q,u)):Fv(u,vc(q,u))}else{if(!Wt[De])return S?u:{};q=Uv(u,De,K)}}I||(I=new Mn);var qe=I.get(u);if(qe)return qe;I.set(u,q),Ih(u)?u.forEach(function(et){q.add(_n(et,l,v,et,u,I))}):Th(u)&&u.forEach(function(et,yt){q.set(yt,_n(et,l,v,yt,u,I))});var Qe=ge?ne?Ro:No:ne?Zr:yr,_t=ve?r:Qe(u);return gn(_t||u,function(et,yt){_t&&(yt=et,et=u[yt]),Wu(q,yt,_n(et,l,v,yt,u,I))}),q}function Xg(u){var l=yr(u);return function(v){return mc(v,u,l)}}function mc(u,l,v){var w=v.length;if(u==null)return!w;for(u=jt(u);w--;){var S=v[w],I=l[S],q=u[S];if(q===r&&!(S in u)||!I(q))return!1}return!0}function _c(u,l,v){if(typeof u!="function")throw new vn(o);return Xu(function(){u.apply(r,v)},l)}function Hu(u,l,v,w){var S=-1,I=ha,q=!0,K=u.length,ne=[],ge=l.length;if(!K)return ne;v&&(l=$t(l,rn(v))),w?(I=ro,q=!1):l.length>=i&&(I=Lu,q=!1,l=new Ui(l));e:for(;++S<K;){var ve=u[S],De=v==null?ve:v(ve);if(ve=w||ve!==0?ve:0,q&&De===De){for(var xe=ge;xe--;)if(l[xe]===De)continue e;ne.push(ve)}else I(l,De,w)||ne.push(ve)}return ne}var mi=Hc(jn),Dc=Hc(Do,!0);function Jg(u,l){var v=!0;return mi(u,function(w,S,I){return v=!!l(w,S,I),v}),v}function Ma(u,l,v){for(var w=-1,S=u.length;++w<S;){var I=u[w],q=l(I);if(q!=null&&(K===r?q===q&&!un(q):v(q,K)))var K=q,ne=I}return ne}function Qg(u,l,v,w){var S=u.length;for(v=gt(v),v<0&&(v=-v>S?0:S+v),w=w===r||w>S?S:gt(w),w<0&&(w+=S),w=v>w?0:Nh(w);v<w;)u[v++]=l;return u}function bc(u,l){var v=[];return mi(u,function(w,S,I){l(w,S,I)&&v.push(w)}),v}function Br(u,l,v,w,S){var I=-1,q=u.length;for(v||(v=jv),S||(S=[]);++I<q;){var K=u[I];l>0&&v(K)?l>1?Br(K,l-1,v,w,S):pi(S,K):w||(S[S.length]=K)}return S}var _o=Gc(),yc=Gc(!0);function jn(u,l){return u&&_o(u,l,yr)}function Do(u,l){return u&&yc(u,l,yr)}function Pa(u,l){return di(l,function(v){return ii(u[v])})}function ji(u,l){l=Di(l,u);for(var v=0,w=l.length;u!=null&&v<w;)u=u[zn(l[v++])];return v&&v==w?u:r}function wc(u,l,v){var w=l(u);return ct(u)?w:pi(w,v(u))}function zr(u){return u==null?u===r?z:Ke:Ri&&Ri in jt(u)?kv(u):$v(u)}function bo(u,l){return u>l}function ev(u,l){return u!=null&&kt.call(u,l)}function tv(u,l){return u!=null&&l in jt(u)}function rv(u,l,v){return u>=Lr(l,v)&&u<vr(l,v)}function yo(u,l,v){for(var w=v?ro:ha,S=u[0].length,I=u.length,q=I,K=oe(I),ne=1/0,ge=[];q--;){var ve=u[q];q&&l&&(ve=$t(ve,rn(l))),ne=Lr(ve.length,ne),K[q]=!v&&(l||S>=120&&ve.length>=120)?new Ui(q&&ve):r}ve=u[0];var De=-1,xe=K[0];e:for(;++De<S&&ge.length<ne;){var qe=ve[De],Qe=l?l(qe):qe;if(qe=v||qe!==0?qe:0,!(xe?Lu(xe,Qe):w(ge,Qe,v))){for(q=I;--q;){var _t=K[q];if(!(_t?Lu(_t,Qe):w(u[q],Qe,v)))continue e}xe&&xe.push(Qe),ge.push(qe)}}return ge}function nv(u,l,v,w){return jn(u,function(S,I,q){l(w,v(S),I,q)}),w}function Gu(u,l,v){l=Di(l,u),u=lh(u,l);var w=u==null?u:u[zn(bn(l))];return w==null?r:tn(w,u,v)}function Ac(u){return ir(u)&&zr(u)==Ve}function iv(u){return ir(u)&&zr(u)==ae}function uv(u){return ir(u)&&zr(u)==Re}function Ku(u,l,v,w,S){return u===l?!0:u==null||l==null||!ir(u)&&!ir(l)?u!==u&&l!==l:av(u,l,v,w,Ku,S)}function av(u,l,v,w,S,I){var q=ct(u),K=ct(l),ne=q?Ie:Ur(u),ge=K?Ie:Ur(l);ne=ne==Ve?$e:ne,ge=ge==Ve?$e:ge;var ve=ne==$e,De=ge==$e,xe=ne==ge;if(xe&&yi(u)){if(!yi(l))return!1;q=!0,ve=!1}if(xe&&!ve)return I||(I=new Mn),q||ou(u)?rh(u,l,v,w,S,I):xv(u,l,ne,v,w,S,I);if(!(v&b)){var qe=ve&&kt.call(u,"__wrapped__"),Qe=De&&kt.call(l,"__wrapped__");if(qe||Qe){var _t=qe?u.value():u,et=Qe?l.value():l;return I||(I=new Mn),S(_t,et,v,w,I)}}return xe?(I||(I=new Mn),Iv(u,l,v,w,S,I)):!1}function sv(u){return ir(u)&&Ur(u)==at}function wo(u,l,v,w){var S=v.length,I=S,q=!w;if(u==null)return!I;for(u=jt(u);S--;){var K=v[S];if(q&&K[2]?K[1]!==u[K[0]]:!(K[0]in u))return!1}for(;++S<I;){K=v[S];var ne=K[0],ge=u[ne],ve=K[1];if(q&&K[2]){if(ge===r&&!(ne in u))return!1}else{var De=new Mn;if(w)var xe=w(ge,ve,ne,u,l,De);if(!(xe===r?Ku(ve,ge,b|m,w,De):xe))return!1}}return!0}function Ec(u){if(!Jt(u)||zv(u))return!1;var l=ii(u)?sg:Ou;return l.test(zi(u))}function ov(u){return ir(u)&&zr(u)==Bt}function lv(u){return ir(u)&&Ur(u)==Vt}function fv(u){return ir(u)&&$a(u.length)&&!!Gt[zr(u)]}function Cc(u){return typeof u=="function"?u:u==null?Xr:typeof u=="object"?ct(u)?Bc(u[0],u[1]):Sc(u):Kh(u)}function Ao(u){if(!Zu(u))return dg(u);var l=[];for(var v in jt(u))kt.call(u,v)&&v!="constructor"&&l.push(v);return l}function cv(u){if(!Jt(u))return Kv(u);var l=Zu(u),v=[];for(var w in u)w=="constructor"&&(l||!kt.call(u,w))||v.push(w);return v}function Eo(u,l){return u<l}function Fc(u,l){var v=-1,w=Yr(u)?oe(u.length):[];return mi(u,function(S,I,q){w[++v]=l(S,I,q)}),w}function Sc(u){var l=Uo(u);return l.length==1&&l[0][2]?sh(l[0][0],l[0][1]):function(v){return v===u||wo(v,u,l)}}function Bc(u,l){return jo(u)&&ah(l)?sh(zn(u),l):function(v){var w=Xo(v,u);return w===r&&w===l?Jo(v,u):Ku(l,w,b|m)}}function Ta(u,l,v,w,S){u!==l&&_o(l,function(I,q){if(S||(S=new Mn),Jt(I))hv(u,l,q,v,Ta,w,S);else{var K=w?w(zo(u,q),I,q+"",u,l,S):r;K===r&&(K=I),vo(u,q,K)}},Zr)}function hv(u,l,v,w,S,I,q){var K=zo(u,v),ne=zo(l,v),ge=q.get(ne);if(ge){vo(u,v,ge);return}var ve=I?I(K,ne,v+"",u,l,q):r,De=ve===r;if(De){var xe=ct(ne),qe=!xe&&yi(ne),Qe=!xe&&!qe&&ou(ne);ve=ne,xe||qe||Qe?ct(K)?ve=K:or(K)?ve=$r(K):qe?(De=!1,ve=Vc(ne,!0)):Qe?(De=!1,ve=jc(ne,!0)):ve=[]:Ju(ne)||Wi(ne)?(ve=K,Wi(K)?ve=Rh(K):(!Jt(K)||ii(K))&&(ve=uh(ne))):De=!1}De&&(q.set(ne,ve),S(ve,ne,w,I,q),q.delete(ne)),vo(u,v,ve)}function Oc(u,l){var v=u.length;if(v)return l+=l<0?v:0,ni(l,v)?u[l]:r}function Mc(u,l,v){l.length?l=$t(l,function(I){return ct(I)?function(q){return ji(q,I.length===1?I[0]:I)}:I}):l=[Xr];var w=-1;l=$t(l,rn(Ye()));var S=Fc(u,function(I,q,K){var ne=$t(l,function(ge){return ge(I)});return{criteria:ne,index:++w,value:I}});return U1(S,function(I,q){return Cv(I,q,v)})}function dv(u,l){return Pc(u,l,function(v,w){return Jo(u,w)})}function Pc(u,l,v){for(var w=-1,S=l.length,I={};++w<S;){var q=l[w],K=ji(u,q);v(K,q)&&$u(I,Di(q,u),K)}return I}function pv(u){return function(l){return ji(l,u)}}function Co(u,l,v,w){var S=w?L1:Xi,I=-1,q=l.length,K=u;for(u===l&&(l=$r(l)),v&&(K=$t(u,rn(v)));++I<q;)for(var ne=0,ge=l[I],ve=v?v(ge):ge;(ne=S(K,ve,ne,w))>-1;)K!==u&&wa.call(K,ne,1),wa.call(u,ne,1);return u}function Tc(u,l){for(var v=u?l.length:0,w=v-1;v--;){var S=l[v];if(v==w||S!==I){var I=S;ni(S)?wa.call(u,S,1):Oo(u,S)}}return u}function Fo(u,l){return u+Ca(hc()*(l-u+1))}function gv(u,l,v,w){for(var S=-1,I=vr(Ea((l-u)/(v||1)),0),q=oe(I);I--;)q[w?I:++S]=u,u+=v;return q}function So(u,l){var v="";if(!u||l<1||l>Y)return v;do l%2&&(v+=u),l=Ca(l/2),l&&(u+=u);while(l);return v}function bt(u,l){return Wo(oh(u,l,Xr),u+"")}function vv(u){return gc(lu(u))}function mv(u,l){var v=lu(u);return qa(v,Vi(l,0,v.length))}function $u(u,l,v,w){if(!Jt(u))return u;l=Di(l,u);for(var S=-1,I=l.length,q=I-1,K=u;K!=null&&++S<I;){var ne=zn(l[S]),ge=v;if(ne==="__proto__"||ne==="constructor"||ne==="prototype")return u;if(S!=q){var ve=K[ne];ge=w?w(ve,ne,K):r,ge===r&&(ge=Jt(ve)?ve:ni(l[S+1])?[]:{})}Wu(K,ne,ge),K=K[ne]}return u}var xc=Fa?function(u,l){return Fa.set(u,l),u}:Xr,_v=Aa?function(u,l){return Aa(u,"toString",{configurable:!0,enumerable:!1,value:el(l),writable:!0})}:Xr;function Dv(u){return qa(lu(u))}function Dn(u,l,v){var w=-1,S=u.length;l<0&&(l=-l>S?0:S+l),v=v>S?S:v,v<0&&(v+=S),S=l>v?0:v-l>>>0,l>>>=0;for(var I=oe(S);++w<S;)I[w]=u[w+l];return I}function bv(u,l){var v;return mi(u,function(w,S,I){return v=l(w,S,I),!v}),!!v}function xa(u,l,v){var w=0,S=u==null?w:u.length;if(typeof l=="number"&&l===l&&S<=Ae){for(;w<S;){var I=w+S>>>1,q=u[I];q!==null&&!un(q)&&(v?q<=l:q<l)?w=I+1:S=I}return S}return Bo(u,l,Xr,v)}function Bo(u,l,v,w){var S=0,I=u==null?0:u.length;if(I===0)return 0;l=v(l);for(var q=l!==l,K=l===null,ne=un(l),ge=l===r;S<I;){var ve=Ca((S+I)/2),De=v(u[ve]),xe=De!==r,qe=De===null,Qe=De===De,_t=un(De);if(q)var et=w||Qe;else ge?et=Qe&&(w||xe):K?et=Qe&&xe&&(w||!qe):ne?et=Qe&&xe&&!qe&&(w||!_t):qe||_t?et=!1:et=w?De<=l:De<l;et?S=ve+1:I=ve}return Lr(I,Ce)}function Ic(u,l){for(var v=-1,w=u.length,S=0,I=[];++v<w;){var q=u[v],K=l?l(q):q;if(!v||!Pn(K,ne)){var ne=K;I[S++]=q===0?0:q}}return I}function kc(u){return typeof u=="number"?u:un(u)?le:+u}function nn(u){if(typeof u=="string")return u;if(ct(u))return $t(u,nn)+"";if(un(u))return dc?dc.call(u):"";var l=u+"";return l=="0"&&1/u==-Q?"-0":l}function _i(u,l,v){var w=-1,S=ha,I=u.length,q=!0,K=[],ne=K;if(v)q=!1,S=ro;else if(I>=i){var ge=l?null:Pv(u);if(ge)return pa(ge);q=!1,S=Lu,ne=new Ui}else ne=l?[]:K;e:for(;++w<I;){var ve=u[w],De=l?l(ve):ve;if(ve=v||ve!==0?ve:0,q&&De===De){for(var xe=ne.length;xe--;)if(ne[xe]===De)continue e;l&&ne.push(De),K.push(ve)}else S(ne,De,v)||(ne!==K&&ne.push(De),K.push(ve))}return K}function Oo(u,l){return l=Di(l,u),u=lh(u,l),u==null||delete u[zn(bn(l))]}function Nc(u,l,v,w){return $u(u,l,v(ji(u,l)),w)}function Ia(u,l,v,w){for(var S=u.length,I=w?S:-1;(w?I--:++I<S)&&l(u[I],I,u););return v?Dn(u,w?0:I,w?I+1:S):Dn(u,w?I+1:0,w?S:I)}function Rc(u,l){var v=u;return v instanceof Ct&&(v=v.value()),no(l,function(w,S){return S.func.apply(S.thisArg,pi([w],S.args))},v)}function Mo(u,l,v){var w=u.length;if(w<2)return w?_i(u[0]):[];for(var S=-1,I=oe(w);++S<w;)for(var q=u[S],K=-1;++K<w;)K!=S&&(I[S]=Hu(I[S]||q,u[K],l,v));return _i(Br(I,1),l,v)}function Lc(u,l,v){for(var w=-1,S=u.length,I=l.length,q={};++w<S;){var K=w<I?l[w]:r;v(q,u[w],K)}return q}function Po(u){return or(u)?u:[]}function To(u){return typeof u=="function"?u:Xr}function Di(u,l){return ct(u)?u:jo(u,l)?[u]:dh(Pt(u))}var yv=bt;function bi(u,l,v){var w=u.length;return v=v===r?w:v,!l&&v>=w?u:Dn(u,l,v)}var Uc=og||function(u){return Sr.clearTimeout(u)};function Vc(u,l){if(l)return u.slice();var v=u.length,w=sc?sc(v):new u.constructor(v);return u.copy(w),w}function xo(u){var l=new u.constructor(u.byteLength);return new ba(l).set(new ba(u)),l}function wv(u,l){var v=l?xo(u.buffer):u.buffer;return new u.constructor(v,u.byteOffset,u.byteLength)}function Av(u){var l=new u.constructor(u.source,$i.exec(u));return l.lastIndex=u.lastIndex,l}function Ev(u){return zu?jt(zu.call(u)):{}}function jc(u,l){var v=l?xo(u.buffer):u.buffer;return new u.constructor(v,u.byteOffset,u.length)}function qc(u,l){if(u!==l){var v=u!==r,w=u===null,S=u===u,I=un(u),q=l!==r,K=l===null,ne=l===l,ge=un(l);if(!K&&!ge&&!I&&u>l||I&&q&&ne&&!K&&!ge||w&&q&&ne||!v&&ne||!S)return 1;if(!w&&!I&&!ge&&u<l||ge&&v&&S&&!w&&!I||K&&v&&S||!q&&S||!ne)return-1}return 0}function Cv(u,l,v){for(var w=-1,S=u.criteria,I=l.criteria,q=S.length,K=v.length;++w<q;){var ne=qc(S[w],I[w]);if(ne){if(w>=K)return ne;var ge=v[w];return ne*(ge=="desc"?-1:1)}}return u.index-l.index}function zc(u,l,v,w){for(var S=-1,I=u.length,q=v.length,K=-1,ne=l.length,ge=vr(I-q,0),ve=oe(ne+ge),De=!w;++K<ne;)ve[K]=l[K];for(;++S<q;)(De||S<I)&&(ve[v[S]]=u[S]);for(;ge--;)ve[K++]=u[S++];return ve}function Wc(u,l,v,w){for(var S=-1,I=u.length,q=-1,K=v.length,ne=-1,ge=l.length,ve=vr(I-K,0),De=oe(ve+ge),xe=!w;++S<ve;)De[S]=u[S];for(var qe=S;++ne<ge;)De[qe+ne]=l[ne];for(;++q<K;)(xe||S<I)&&(De[qe+v[q]]=u[S++]);return De}function $r(u,l){var v=-1,w=u.length;for(l||(l=oe(w));++v<w;)l[v]=u[v];return l}function qn(u,l,v,w){var S=!v;v||(v={});for(var I=-1,q=l.length;++I<q;){var K=l[I],ne=w?w(v[K],u[K],K,v,u):r;ne===r&&(ne=u[K]),S?ei(v,K,ne):Wu(v,K,ne)}return v}function Fv(u,l){return qn(u,Vo(u),l)}function Sv(u,l){return qn(u,nh(u),l)}function ka(u,l){return function(v,w){var S=ct(v)?T1:Yg,I=l?l():{};return S(v,u,Ye(w,2),I)}}function uu(u){return bt(function(l,v){var w=-1,S=v.length,I=S>1?v[S-1]:r,q=S>2?v[2]:r;for(I=u.length>3&&typeof I=="function"?(S--,I):r,q&&Wr(v[0],v[1],q)&&(I=S<3?r:I,S=1),l=jt(l);++w<S;){var K=v[w];K&&u(l,K,w,I)}return l})}function Hc(u,l){return function(v,w){if(v==null)return v;if(!Yr(v))return u(v,w);for(var S=v.length,I=l?S:-1,q=jt(v);(l?I--:++I<S)&&w(q[I],I,q)!==!1;);return v}}function Gc(u){return function(l,v,w){for(var S=-1,I=jt(l),q=w(l),K=q.length;K--;){var ne=q[u?K:++S];if(v(I[ne],ne,I)===!1)break}return l}}function Bv(u,l,v){var w=l&_,S=Yu(u);function I(){var q=this&&this!==Sr&&this instanceof I?S:u;return q.apply(w?v:this,arguments)}return I}function Kc(u){return function(l){l=Pt(l);var v=Ji(l)?On(l):r,w=v?v[0]:l.charAt(0),S=v?bi(v,1).join(""):l.slice(1);return w[u]()+S}}function au(u){return function(l){return no(Hh(Wh(l).replace(_1,"")),u,"")}}function Yu(u){return function(){var l=arguments;switch(l.length){case 0:return new u;case 1:return new u(l[0]);case 2:return new u(l[0],l[1]);case 3:return new u(l[0],l[1],l[2]);case 4:return new u(l[0],l[1],l[2],l[3]);case 5:return new u(l[0],l[1],l[2],l[3],l[4]);case 6:return new u(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new u(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var v=iu(u.prototype),w=u.apply(v,l);return Jt(w)?w:v}}function Ov(u,l,v){var w=Yu(u);function S(){for(var I=arguments.length,q=oe(I),K=I,ne=su(S);K--;)q[K]=arguments[K];var ge=I<3&&q[0]!==ne&&q[I-1]!==ne?[]:gi(q,ne);if(I-=ge.length,I<v)return Jc(u,l,Na,S.placeholder,r,q,ge,r,r,v-I);var ve=this&&this!==Sr&&this instanceof S?w:u;return tn(ve,this,q)}return S}function $c(u){return function(l,v,w){var S=jt(l);if(!Yr(l)){var I=Ye(v,3);l=yr(l),v=function(K){return I(S[K],K,S)}}var q=u(l,v,w);return q>-1?S[I?l[q]:q]:r}}function Yc(u){return ri(function(l){var v=l.length,w=v,S=mn.prototype.thru;for(u&&l.reverse();w--;){var I=l[w];if(typeof I!="function")throw new vn(o);if(S&&!q&&Va(I)=="wrapper")var q=new mn([],!0)}for(w=q?w:v;++w<v;){I=l[w];var K=Va(I),ne=K=="wrapper"?Lo(I):r;ne&&qo(ne[0])&&ne[1]==(P|A|E|x)&&!ne[4].length&&ne[9]==1?q=q[Va(ne[0])].apply(q,ne[3]):q=I.length==1&&qo(I)?q[K]():q.thru(I)}return function(){var ge=arguments,ve=ge[0];if(q&&ge.length==1&&ct(ve))return q.plant(ve).value();for(var De=0,xe=v?l[De].apply(this,ge):ve;++De<v;)xe=l[De].call(this,xe);return xe}})}function Na(u,l,v,w,S,I,q,K,ne,ge){var ve=l&P,De=l&_,xe=l&D,qe=l&(A|B),Qe=l&R,_t=xe?r:Yu(u);function et(){for(var yt=arguments.length,St=oe(yt),an=yt;an--;)St[an]=arguments[an];if(qe)var Hr=su(et),sn=j1(St,Hr);if(w&&(St=zc(St,w,S,qe)),I&&(St=Wc(St,I,q,qe)),yt-=sn,qe&&yt<ge){var lr=gi(St,Hr);return Jc(u,l,Na,et.placeholder,v,St,lr,K,ne,ge-yt)}var Tn=De?v:this,ai=xe?Tn[u]:u;return yt=St.length,K?St=Yv(St,K):Qe&&yt>1&&St.reverse(),ve&&ne<yt&&(St.length=ne),this&&this!==Sr&&this instanceof et&&(ai=_t||Yu(ai)),ai.apply(Tn,St)}return et}function Zc(u,l){return function(v,w){return nv(v,u,l(w),{})}}function Ra(u,l){return function(v,w){var S;if(v===r&&w===r)return l;if(v!==r&&(S=v),w!==r){if(S===r)return w;typeof v=="string"||typeof w=="string"?(v=nn(v),w=nn(w)):(v=kc(v),w=kc(w)),S=u(v,w)}return S}}function Io(u){return ri(function(l){return l=$t(l,rn(Ye())),bt(function(v){var w=this;return u(l,function(S){return tn(S,w,v)})})})}function La(u,l){l=l===r?" ":nn(l);var v=l.length;if(v<2)return v?So(l,u):l;var w=So(l,Ea(u/Qi(l)));return Ji(l)?bi(On(w),0,u).join(""):w.slice(0,u)}function Mv(u,l,v,w){var S=l&_,I=Yu(u);function q(){for(var K=-1,ne=arguments.length,ge=-1,ve=w.length,De=oe(ve+ne),xe=this&&this!==Sr&&this instanceof q?I:u;++ge<ve;)De[ge]=w[ge];for(;ne--;)De[ge++]=arguments[++K];return tn(xe,S?v:this,De)}return q}function Xc(u){return function(l,v,w){return w&&typeof w!="number"&&Wr(l,v,w)&&(v=w=r),l=ui(l),v===r?(v=l,l=0):v=ui(v),w=w===r?l<v?1:-1:ui(w),gv(l,v,w,u)}}function Ua(u){return function(l,v){return typeof l=="string"&&typeof v=="string"||(l=yn(l),v=yn(v)),u(l,v)}}function Jc(u,l,v,w,S,I,q,K,ne,ge){var ve=l&A,De=ve?q:r,xe=ve?r:q,qe=ve?I:r,Qe=ve?r:I;l|=ve?E:O,l&=~(ve?O:E),l&C||(l&=~(_|D));var _t=[u,l,S,qe,De,Qe,xe,K,ne,ge],et=v.apply(r,_t);return qo(u)&&fh(et,_t),et.placeholder=w,ch(et,u,l)}function ko(u){var l=gr[u];return function(v,w){if(v=yn(v),w=w==null?0:Lr(gt(w),292),w&&cc(v)){var S=(Pt(v)+"e").split("e"),I=l(S[0]+"e"+(+S[1]+w));return S=(Pt(I)+"e").split("e"),+(S[0]+"e"+(+S[1]-w))}return l(v)}}var Pv=ru&&1/pa(new ru([,-0]))[1]==Q?function(u){return new ru(u)}:nl;function Qc(u){return function(l){var v=Ur(l);return v==at?fo(l):v==Vt?$1(l):V1(l,u(l))}}function ti(u,l,v,w,S,I,q,K){var ne=l&D;if(!ne&&typeof u!="function")throw new vn(o);var ge=w?w.length:0;if(ge||(l&=~(E|O),w=S=r),q=q===r?q:vr(gt(q),0),K=K===r?K:gt(K),ge-=S?S.length:0,l&O){var ve=w,De=S;w=S=r}var xe=ne?r:Lo(u),qe=[u,l,v,w,S,ve,De,I,q,K];if(xe&&Gv(qe,xe),u=qe[0],l=qe[1],v=qe[2],w=qe[3],S=qe[4],K=qe[9]=qe[9]===r?ne?0:u.length:vr(qe[9]-ge,0),!K&&l&(A|B)&&(l&=~(A|B)),!l||l==_)var Qe=Bv(u,l,v);else l==A||l==B?Qe=Ov(u,l,K):(l==E||l==(_|E))&&!S.length?Qe=Mv(u,l,v,w):Qe=Na.apply(r,qe);var _t=xe?xc:fh;return ch(_t(Qe,qe),u,l)}function eh(u,l,v,w){return u===r||Pn(u,tu[v])&&!kt.call(w,v)?l:u}function th(u,l,v,w,S,I){return Jt(u)&&Jt(l)&&(I.set(l,u),Ta(u,l,r,th,I),I.delete(l)),u}function Tv(u){return Ju(u)?r:u}function rh(u,l,v,w,S,I){var q=v&b,K=u.length,ne=l.length;if(K!=ne&&!(q&&ne>K))return!1;var ge=I.get(u),ve=I.get(l);if(ge&&ve)return ge==l&&ve==u;var De=-1,xe=!0,qe=v&m?new Ui:r;for(I.set(u,l),I.set(l,u);++De<K;){var Qe=u[De],_t=l[De];if(w)var et=q?w(_t,Qe,De,l,u,I):w(Qe,_t,De,u,l,I);if(et!==r){if(et)continue;xe=!1;break}if(qe){if(!io(l,function(yt,St){if(!Lu(qe,St)&&(Qe===yt||S(Qe,yt,v,w,I)))return qe.push(St)})){xe=!1;break}}else if(!(Qe===_t||S(Qe,_t,v,w,I))){xe=!1;break}}return I.delete(u),I.delete(l),xe}function xv(u,l,v,w,S,I,q){switch(v){case he:if(u.byteLength!=l.byteLength||u.byteOffset!=l.byteOffset)return!1;u=u.buffer,l=l.buffer;case ae:return!(u.byteLength!=l.byteLength||!I(new ba(u),new ba(l)));case ze:case Re:case st:return Pn(+u,+l);case pt:return u.name==l.name&&u.message==l.message;case Bt:case Ht:return u==l+"";case at:var K=fo;case Vt:var ne=w&b;if(K||(K=pa),u.size!=l.size&&!ne)return!1;var ge=q.get(u);if(ge)return ge==l;w|=m,q.set(u,l);var ve=rh(K(u),K(l),w,S,I,q);return q.delete(u),ve;case L:if(zu)return zu.call(u)==zu.call(l)}return!1}function Iv(u,l,v,w,S,I){var q=v&b,K=No(u),ne=K.length,ge=No(l),ve=ge.length;if(ne!=ve&&!q)return!1;for(var De=ne;De--;){var xe=K[De];if(!(q?xe in l:kt.call(l,xe)))return!1}var qe=I.get(u),Qe=I.get(l);if(qe&&Qe)return qe==l&&Qe==u;var _t=!0;I.set(u,l),I.set(l,u);for(var et=q;++De<ne;){xe=K[De];var yt=u[xe],St=l[xe];if(w)var an=q?w(St,yt,xe,l,u,I):w(yt,St,xe,u,l,I);if(!(an===r?yt===St||S(yt,St,v,w,I):an)){_t=!1;break}et||(et=xe=="constructor")}if(_t&&!et){var Hr=u.constructor,sn=l.constructor;Hr!=sn&&"constructor"in u&&"constructor"in l&&!(typeof Hr=="function"&&Hr instanceof Hr&&typeof sn=="function"&&sn instanceof sn)&&(_t=!1)}return I.delete(u),I.delete(l),_t}function ri(u){return Wo(oh(u,r,mh),u+"")}function No(u){return wc(u,yr,Vo)}function Ro(u){return wc(u,Zr,nh)}var Lo=Fa?function(u){return Fa.get(u)}:nl;function Va(u){for(var l=u.name+"",v=nu[l],w=kt.call(nu,l)?v.length:0;w--;){var S=v[w],I=S.func;if(I==null||I==u)return S.name}return l}function su(u){var l=kt.call(T,"placeholder")?T:u;return l.placeholder}function Ye(){var u=T.iteratee||tl;return u=u===tl?Cc:u,arguments.length?u(arguments[0],arguments[1]):u}function ja(u,l){var v=u.__data__;return qv(l)?v[typeof l=="string"?"string":"hash"]:v.map}function Uo(u){for(var l=yr(u),v=l.length;v--;){var w=l[v],S=u[w];l[v]=[w,S,ah(S)]}return l}function qi(u,l){var v=H1(u,l);return Ec(v)?v:r}function kv(u){var l=kt.call(u,Ri),v=u[Ri];try{u[Ri]=r;var w=!0}catch{}var S=_a.call(u);return w&&(l?u[Ri]=v:delete u[Ri]),S}var Vo=ho?function(u){return u==null?[]:(u=jt(u),di(ho(u),function(l){return lc.call(u,l)}))}:il,nh=ho?function(u){for(var l=[];u;)pi(l,Vo(u)),u=ya(u);return l}:il,Ur=zr;(po&&Ur(new po(new ArrayBuffer(1)))!=he||Vu&&Ur(new Vu)!=at||go&&Ur(go.resolve())!=Ee||ru&&Ur(new ru)!=Vt||ju&&Ur(new ju)!=Z)&&(Ur=function(u){var l=zr(u),v=l==$e?u.constructor:r,w=v?zi(v):"";if(w)switch(w){case mg:return he;case _g:return at;case Dg:return Ee;case bg:return Vt;case yg:return Z}return l});function Nv(u,l,v){for(var w=-1,S=v.length;++w<S;){var I=v[w],q=I.size;switch(I.type){case"drop":u+=q;break;case"dropRight":l-=q;break;case"take":l=Lr(l,u+q);break;case"takeRight":u=vr(u,l-q);break}}return{start:u,end:l}}function Rv(u){var l=u.match(fi);return l?l[1].split(hn):[]}function ih(u,l,v){l=Di(l,u);for(var w=-1,S=l.length,I=!1;++w<S;){var q=zn(l[w]);if(!(I=u!=null&&v(u,q)))break;u=u[q]}return I||++w!=S?I:(S=u==null?0:u.length,!!S&&$a(S)&&ni(q,S)&&(ct(u)||Wi(u)))}function Lv(u){var l=u.length,v=new u.constructor(l);return l&&typeof u[0]=="string"&&kt.call(u,"index")&&(v.index=u.index,v.input=u.input),v}function uh(u){return typeof u.constructor=="function"&&!Zu(u)?iu(ya(u)):{}}function Uv(u,l,v){var w=u.constructor;switch(l){case ae:return xo(u);case ze:case Re:return new w(+u);case he:return wv(u,v);case se:case ce:case ye:case ke:case Je:case Fe:case zt:case It:case rr:return jc(u,v);case at:return new w;case st:case Ht:return new w(u);case Bt:return Av(u);case Vt:return new w;case L:return Ev(u)}}function Vv(u,l){var v=l.length;if(!v)return u;var w=v-1;return l[w]=(v>1?"& ":"")+l[w],l=l.join(v>2?", ":" "),u.replace(Eu,`{
/* [wrapped with `+l+`] */
`)}function jv(u){return ct(u)||Wi(u)||!!(fc&&u&&u[fc])}function ni(u,l){var v=typeof u;return l=l??Y,!!l&&(v=="number"||v!="symbol"&&Pu.test(u))&&u>-1&&u%1==0&&u<l}function Wr(u,l,v){if(!Jt(v))return!1;var w=typeof l;return(w=="number"?Yr(v)&&ni(l,v.length):w=="string"&&l in v)?Pn(v[l],u):!1}function jo(u,l){if(ct(u))return!1;var v=typeof u;return v=="number"||v=="symbol"||v=="boolean"||u==null||un(u)?!0:Ln.test(u)||!Rn.test(u)||l!=null&&u in jt(l)}function qv(u){var l=typeof u;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?u!=="__proto__":u===null}function qo(u){var l=Va(u),v=T[l];if(typeof v!="function"||!(l in Ct.prototype))return!1;if(u===v)return!0;var w=Lo(v);return!!w&&u===w[0]}function zv(u){return!!ac&&ac in u}var Wv=va?ii:ul;function Zu(u){var l=u&&u.constructor,v=typeof l=="function"&&l.prototype||tu;return u===v}function ah(u){return u===u&&!Jt(u)}function sh(u,l){return function(v){return v==null?!1:v[u]===l&&(l!==r||u in jt(v))}}function Hv(u){var l=Ga(u,function(w){return v.size===p&&v.clear(),w}),v=l.cache;return l}function Gv(u,l){var v=u[1],w=l[1],S=v|w,I=S<(_|D|P),q=w==P&&v==A||w==P&&v==x&&u[7].length<=l[8]||w==(P|x)&&l[7].length<=l[8]&&v==A;if(!(I||q))return u;w&_&&(u[2]=l[2],S|=v&_?0:C);var K=l[3];if(K){var ne=u[3];u[3]=ne?zc(ne,K,l[4]):K,u[4]=ne?gi(u[3],f):l[4]}return K=l[5],K&&(ne=u[5],u[5]=ne?Wc(ne,K,l[6]):K,u[6]=ne?gi(u[5],f):l[6]),K=l[7],K&&(u[7]=K),w&P&&(u[8]=u[8]==null?l[8]:Lr(u[8],l[8])),u[9]==null&&(u[9]=l[9]),u[0]=l[0],u[1]=S,u}function Kv(u){var l=[];if(u!=null)for(var v in jt(u))l.push(v);return l}function $v(u){return _a.call(u)}function oh(u,l,v){return l=vr(l===r?u.length-1:l,0),function(){for(var w=arguments,S=-1,I=vr(w.length-l,0),q=oe(I);++S<I;)q[S]=w[l+S];S=-1;for(var K=oe(l+1);++S<l;)K[S]=w[S];return K[l]=v(q),tn(u,this,K)}}function lh(u,l){return l.length<2?u:ji(u,Dn(l,0,-1))}function Yv(u,l){for(var v=u.length,w=Lr(l.length,v),S=$r(u);w--;){var I=l[w];u[w]=ni(I,v)?S[I]:r}return u}function zo(u,l){if(!(l==="constructor"&&typeof u[l]=="function")&&l!="__proto__")return u[l]}var fh=hh(xc),Xu=fg||function(u,l){return Sr.setTimeout(u,l)},Wo=hh(_v);function ch(u,l,v){var w=l+"";return Wo(u,Vv(w,Zv(Rv(w),v)))}function hh(u){var l=0,v=0;return function(){var w=pg(),S=X-(w-v);if(v=w,S>0){if(++l>=U)return arguments[0]}else l=0;return u.apply(r,arguments)}}function qa(u,l){var v=-1,w=u.length,S=w-1;for(l=l===r?w:l;++v<l;){var I=Fo(v,S),q=u[I];u[I]=u[v],u[v]=q}return u.length=l,u}var dh=Hv(function(u){var l=[];return u.charCodeAt(0)===46&&l.push(""),u.replace(Ki,function(v,w,S,I){l.push(S?I.replace(Cu,"$1"):w||v)}),l});function zn(u){if(typeof u=="string"||un(u))return u;var l=u+"";return l=="0"&&1/u==-Q?"-0":l}function zi(u){if(u!=null){try{return ma.call(u)}catch{}try{return u+""}catch{}}return""}function Zv(u,l){return gn(Pe,function(v){var w="_."+v[0];l&v[1]&&!ha(u,w)&&u.push(w)}),u.sort()}function ph(u){if(u instanceof Ct)return u.clone();var l=new mn(u.__wrapped__,u.__chain__);return l.__actions__=$r(u.__actions__),l.__index__=u.__index__,l.__values__=u.__values__,l}function Xv(u,l,v){(v?Wr(u,l,v):l===r)?l=1:l=vr(gt(l),0);var w=u==null?0:u.length;if(!w||l<1)return[];for(var S=0,I=0,q=oe(Ea(w/l));S<w;)q[I++]=Dn(u,S,S+=l);return q}function Jv(u){for(var l=-1,v=u==null?0:u.length,w=0,S=[];++l<v;){var I=u[l];I&&(S[w++]=I)}return S}function Qv(){var u=arguments.length;if(!u)return[];for(var l=oe(u-1),v=arguments[0],w=u;w--;)l[w-1]=arguments[w];return pi(ct(v)?$r(v):[v],Br(l,1))}var em=bt(function(u,l){return or(u)?Hu(u,Br(l,1,or,!0)):[]}),tm=bt(function(u,l){var v=bn(l);return or(v)&&(v=r),or(u)?Hu(u,Br(l,1,or,!0),Ye(v,2)):[]}),rm=bt(function(u,l){var v=bn(l);return or(v)&&(v=r),or(u)?Hu(u,Br(l,1,or,!0),r,v):[]});function nm(u,l,v){var w=u==null?0:u.length;return w?(l=v||l===r?1:gt(l),Dn(u,l<0?0:l,w)):[]}function im(u,l,v){var w=u==null?0:u.length;return w?(l=v||l===r?1:gt(l),l=w-l,Dn(u,0,l<0?0:l)):[]}function um(u,l){return u&&u.length?Ia(u,Ye(l,3),!0,!0):[]}function am(u,l){return u&&u.length?Ia(u,Ye(l,3),!0):[]}function sm(u,l,v,w){var S=u==null?0:u.length;return S?(v&&typeof v!="number"&&Wr(u,l,v)&&(v=0,w=S),Qg(u,l,v,w)):[]}function gh(u,l,v){var w=u==null?0:u.length;if(!w)return-1;var S=v==null?0:gt(v);return S<0&&(S=vr(w+S,0)),da(u,Ye(l,3),S)}function vh(u,l,v){var w=u==null?0:u.length;if(!w)return-1;var S=w-1;return v!==r&&(S=gt(v),S=v<0?vr(w+S,0):Lr(S,w-1)),da(u,Ye(l,3),S,!0)}function mh(u){var l=u==null?0:u.length;return l?Br(u,1):[]}function om(u){var l=u==null?0:u.length;return l?Br(u,Q):[]}function lm(u,l){var v=u==null?0:u.length;return v?(l=l===r?1:gt(l),Br(u,l)):[]}function fm(u){for(var l=-1,v=u==null?0:u.length,w={};++l<v;){var S=u[l];w[S[0]]=S[1]}return w}function _h(u){return u&&u.length?u[0]:r}function cm(u,l,v){var w=u==null?0:u.length;if(!w)return-1;var S=v==null?0:gt(v);return S<0&&(S=vr(w+S,0)),Xi(u,l,S)}function hm(u){var l=u==null?0:u.length;return l?Dn(u,0,-1):[]}var dm=bt(function(u){var l=$t(u,Po);return l.length&&l[0]===u[0]?yo(l):[]}),pm=bt(function(u){var l=bn(u),v=$t(u,Po);return l===bn(v)?l=r:v.pop(),v.length&&v[0]===u[0]?yo(v,Ye(l,2)):[]}),gm=bt(function(u){var l=bn(u),v=$t(u,Po);return l=typeof l=="function"?l:r,l&&v.pop(),v.length&&v[0]===u[0]?yo(v,r,l):[]});function vm(u,l){return u==null?"":hg.call(u,l)}function bn(u){var l=u==null?0:u.length;return l?u[l-1]:r}function mm(u,l,v){var w=u==null?0:u.length;if(!w)return-1;var S=w;return v!==r&&(S=gt(v),S=S<0?vr(w+S,0):Lr(S,w-1)),l===l?Z1(u,l,S):da(u,Jf,S,!0)}function _m(u,l){return u&&u.length?Oc(u,gt(l)):r}var Dm=bt(Dh);function Dh(u,l){return u&&u.length&&l&&l.length?Co(u,l):u}function bm(u,l,v){return u&&u.length&&l&&l.length?Co(u,l,Ye(v,2)):u}function ym(u,l,v){return u&&u.length&&l&&l.length?Co(u,l,r,v):u}var wm=ri(function(u,l){var v=u==null?0:u.length,w=mo(u,l);return Tc(u,$t(l,function(S){return ni(S,v)?+S:S}).sort(qc)),w});function Am(u,l){var v=[];if(!(u&&u.length))return v;var w=-1,S=[],I=u.length;for(l=Ye(l,3);++w<I;){var q=u[w];l(q,w,u)&&(v.push(q),S.push(w))}return Tc(u,S),v}function Ho(u){return u==null?u:vg.call(u)}function Em(u,l,v){var w=u==null?0:u.length;return w?(v&&typeof v!="number"&&Wr(u,l,v)?(l=0,v=w):(l=l==null?0:gt(l),v=v===r?w:gt(v)),Dn(u,l,v)):[]}function Cm(u,l){return xa(u,l)}function Fm(u,l,v){return Bo(u,l,Ye(v,2))}function Sm(u,l){var v=u==null?0:u.length;if(v){var w=xa(u,l);if(w<v&&Pn(u[w],l))return w}return-1}function Bm(u,l){return xa(u,l,!0)}function Om(u,l,v){return Bo(u,l,Ye(v,2),!0)}function Mm(u,l){var v=u==null?0:u.length;if(v){var w=xa(u,l,!0)-1;if(Pn(u[w],l))return w}return-1}function Pm(u){return u&&u.length?Ic(u):[]}function Tm(u,l){return u&&u.length?Ic(u,Ye(l,2)):[]}function xm(u){var l=u==null?0:u.length;return l?Dn(u,1,l):[]}function Im(u,l,v){return u&&u.length?(l=v||l===r?1:gt(l),Dn(u,0,l<0?0:l)):[]}function km(u,l,v){var w=u==null?0:u.length;return w?(l=v||l===r?1:gt(l),l=w-l,Dn(u,l<0?0:l,w)):[]}function Nm(u,l){return u&&u.length?Ia(u,Ye(l,3),!1,!0):[]}function Rm(u,l){return u&&u.length?Ia(u,Ye(l,3)):[]}var Lm=bt(function(u){return _i(Br(u,1,or,!0))}),Um=bt(function(u){var l=bn(u);return or(l)&&(l=r),_i(Br(u,1,or,!0),Ye(l,2))}),Vm=bt(function(u){var l=bn(u);return l=typeof l=="function"?l:r,_i(Br(u,1,or,!0),r,l)});function jm(u){return u&&u.length?_i(u):[]}function qm(u,l){return u&&u.length?_i(u,Ye(l,2)):[]}function zm(u,l){return l=typeof l=="function"?l:r,u&&u.length?_i(u,r,l):[]}function Go(u){if(!(u&&u.length))return[];var l=0;return u=di(u,function(v){if(or(v))return l=vr(v.length,l),!0}),oo(l,function(v){return $t(u,uo(v))})}function bh(u,l){if(!(u&&u.length))return[];var v=Go(u);return l==null?v:$t(v,function(w){return tn(l,r,w)})}var Wm=bt(function(u,l){return or(u)?Hu(u,l):[]}),Hm=bt(function(u){return Mo(di(u,or))}),Gm=bt(function(u){var l=bn(u);return or(l)&&(l=r),Mo(di(u,or),Ye(l,2))}),Km=bt(function(u){var l=bn(u);return l=typeof l=="function"?l:r,Mo(di(u,or),r,l)}),$m=bt(Go);function Ym(u,l){return Lc(u||[],l||[],Wu)}function Zm(u,l){return Lc(u||[],l||[],$u)}var Xm=bt(function(u){var l=u.length,v=l>1?u[l-1]:r;return v=typeof v=="function"?(u.pop(),v):r,bh(u,v)});function yh(u){var l=T(u);return l.__chain__=!0,l}function Jm(u,l){return l(u),u}function za(u,l){return l(u)}var Qm=ri(function(u){var l=u.length,v=l?u[0]:0,w=this.__wrapped__,S=function(I){return mo(I,u)};return l>1||this.__actions__.length||!(w instanceof Ct)||!ni(v)?this.thru(S):(w=w.slice(v,+v+(l?1:0)),w.__actions__.push({func:za,args:[S],thisArg:r}),new mn(w,this.__chain__).thru(function(I){return l&&!I.length&&I.push(r),I}))});function e_(){return yh(this)}function t_(){return new mn(this.value(),this.__chain__)}function r_(){this.__values__===r&&(this.__values__=kh(this.value()));var u=this.__index__>=this.__values__.length,l=u?r:this.__values__[this.__index__++];return{done:u,value:l}}function n_(){return this}function i_(u){for(var l,v=this;v instanceof Ba;){var w=ph(v);w.__index__=0,w.__values__=r,l?S.__wrapped__=w:l=w;var S=w;v=v.__wrapped__}return S.__wrapped__=u,l}function u_(){var u=this.__wrapped__;if(u instanceof Ct){var l=u;return this.__actions__.length&&(l=new Ct(this)),l=l.reverse(),l.__actions__.push({func:za,args:[Ho],thisArg:r}),new mn(l,this.__chain__)}return this.thru(Ho)}function a_(){return Rc(this.__wrapped__,this.__actions__)}var s_=ka(function(u,l,v){kt.call(u,v)?++u[v]:ei(u,v,1)});function o_(u,l,v){var w=ct(u)?Zf:Jg;return v&&Wr(u,l,v)&&(l=r),w(u,Ye(l,3))}function l_(u,l){var v=ct(u)?di:bc;return v(u,Ye(l,3))}var f_=$c(gh),c_=$c(vh);function h_(u,l){return Br(Wa(u,l),1)}function d_(u,l){return Br(Wa(u,l),Q)}function p_(u,l,v){return v=v===r?1:gt(v),Br(Wa(u,l),v)}function wh(u,l){var v=ct(u)?gn:mi;return v(u,Ye(l,3))}function Ah(u,l){var v=ct(u)?x1:Dc;return v(u,Ye(l,3))}var g_=ka(function(u,l,v){kt.call(u,v)?u[v].push(l):ei(u,v,[l])});function v_(u,l,v,w){u=Yr(u)?u:lu(u),v=v&&!w?gt(v):0;var S=u.length;return v<0&&(v=vr(S+v,0)),Ya(u)?v<=S&&u.indexOf(l,v)>-1:!!S&&Xi(u,l,v)>-1}var m_=bt(function(u,l,v){var w=-1,S=typeof l=="function",I=Yr(u)?oe(u.length):[];return mi(u,function(q){I[++w]=S?tn(l,q,v):Gu(q,l,v)}),I}),__=ka(function(u,l,v){ei(u,v,l)});function Wa(u,l){var v=ct(u)?$t:Fc;return v(u,Ye(l,3))}function D_(u,l,v,w){return u==null?[]:(ct(l)||(l=l==null?[]:[l]),v=w?r:v,ct(v)||(v=v==null?[]:[v]),Mc(u,l,v))}var b_=ka(function(u,l,v){u[v?0:1].push(l)},function(){return[[],[]]});function y_(u,l,v){var w=ct(u)?no:ec,S=arguments.length<3;return w(u,Ye(l,4),v,S,mi)}function w_(u,l,v){var w=ct(u)?I1:ec,S=arguments.length<3;return w(u,Ye(l,4),v,S,Dc)}function A_(u,l){var v=ct(u)?di:bc;return v(u,Ka(Ye(l,3)))}function E_(u){var l=ct(u)?gc:vv;return l(u)}function C_(u,l,v){(v?Wr(u,l,v):l===r)?l=1:l=gt(l);var w=ct(u)?Kg:mv;return w(u,l)}function F_(u){var l=ct(u)?$g:Dv;return l(u)}function S_(u){if(u==null)return 0;if(Yr(u))return Ya(u)?Qi(u):u.length;var l=Ur(u);return l==at||l==Vt?u.size:Ao(u).length}function B_(u,l,v){var w=ct(u)?io:bv;return v&&Wr(u,l,v)&&(l=r),w(u,Ye(l,3))}var O_=bt(function(u,l){if(u==null)return[];var v=l.length;return v>1&&Wr(u,l[0],l[1])?l=[]:v>2&&Wr(l[0],l[1],l[2])&&(l=[l[0]]),Mc(u,Br(l,1),[])}),Ha=lg||function(){return Sr.Date.now()};function M_(u,l){if(typeof l!="function")throw new vn(o);return u=gt(u),function(){if(--u<1)return l.apply(this,arguments)}}function Eh(u,l,v){return l=v?r:l,l=u&&l==null?u.length:l,ti(u,P,r,r,r,r,l)}function Ch(u,l){var v;if(typeof l!="function")throw new vn(o);return u=gt(u),function(){return--u>0&&(v=l.apply(this,arguments)),u<=1&&(l=r),v}}var Ko=bt(function(u,l,v){var w=_;if(v.length){var S=gi(v,su(Ko));w|=E}return ti(u,w,l,v,S)}),Fh=bt(function(u,l,v){var w=_|D;if(v.length){var S=gi(v,su(Fh));w|=E}return ti(l,w,u,v,S)});function Sh(u,l,v){l=v?r:l;var w=ti(u,A,r,r,r,r,r,l);return w.placeholder=Sh.placeholder,w}function Bh(u,l,v){l=v?r:l;var w=ti(u,B,r,r,r,r,r,l);return w.placeholder=Bh.placeholder,w}function Oh(u,l,v){var w,S,I,q,K,ne,ge=0,ve=!1,De=!1,xe=!0;if(typeof u!="function")throw new vn(o);l=yn(l)||0,Jt(v)&&(ve=!!v.leading,De="maxWait"in v,I=De?vr(yn(v.maxWait)||0,l):I,xe="trailing"in v?!!v.trailing:xe);function qe(lr){var Tn=w,ai=S;return w=S=r,ge=lr,q=u.apply(ai,Tn),q}function Qe(lr){return ge=lr,K=Xu(yt,l),ve?qe(lr):q}function _t(lr){var Tn=lr-ne,ai=lr-ge,$h=l-Tn;return De?Lr($h,I-ai):$h}function et(lr){var Tn=lr-ne,ai=lr-ge;return ne===r||Tn>=l||Tn<0||De&&ai>=I}function yt(){var lr=Ha();if(et(lr))return St(lr);K=Xu(yt,_t(lr))}function St(lr){return K=r,xe&&w?qe(lr):(w=S=r,q)}function an(){K!==r&&Uc(K),ge=0,w=ne=S=K=r}function Hr(){return K===r?q:St(Ha())}function sn(){var lr=Ha(),Tn=et(lr);if(w=arguments,S=this,ne=lr,Tn){if(K===r)return Qe(ne);if(De)return Uc(K),K=Xu(yt,l),qe(ne)}return K===r&&(K=Xu(yt,l)),q}return sn.cancel=an,sn.flush=Hr,sn}var P_=bt(function(u,l){return _c(u,1,l)}),T_=bt(function(u,l,v){return _c(u,yn(l)||0,v)});function x_(u){return ti(u,R)}function Ga(u,l){if(typeof u!="function"||l!=null&&typeof l!="function")throw new vn(o);var v=function(){var w=arguments,S=l?l.apply(this,w):w[0],I=v.cache;if(I.has(S))return I.get(S);var q=u.apply(this,w);return v.cache=I.set(S,q)||I,q};return v.cache=new(Ga.Cache||Qn),v}Ga.Cache=Qn;function Ka(u){if(typeof u!="function")throw new vn(o);return function(){var l=arguments;switch(l.length){case 0:return!u.call(this);case 1:return!u.call(this,l[0]);case 2:return!u.call(this,l[0],l[1]);case 3:return!u.call(this,l[0],l[1],l[2])}return!u.apply(this,l)}}function I_(u){return Ch(2,u)}var k_=yv(function(u,l){l=l.length==1&&ct(l[0])?$t(l[0],rn(Ye())):$t(Br(l,1),rn(Ye()));var v=l.length;return bt(function(w){for(var S=-1,I=Lr(w.length,v);++S<I;)w[S]=l[S].call(this,w[S]);return tn(u,this,w)})}),$o=bt(function(u,l){var v=gi(l,su($o));return ti(u,E,r,l,v)}),Mh=bt(function(u,l){var v=gi(l,su(Mh));return ti(u,O,r,l,v)}),N_=ri(function(u,l){return ti(u,x,r,r,r,l)});function R_(u,l){if(typeof u!="function")throw new vn(o);return l=l===r?l:gt(l),bt(u,l)}function L_(u,l){if(typeof u!="function")throw new vn(o);return l=l==null?0:vr(gt(l),0),bt(function(v){var w=v[l],S=bi(v,0,l);return w&&pi(S,w),tn(u,this,S)})}function U_(u,l,v){var w=!0,S=!0;if(typeof u!="function")throw new vn(o);return Jt(v)&&(w="leading"in v?!!v.leading:w,S="trailing"in v?!!v.trailing:S),Oh(u,l,{leading:w,maxWait:l,trailing:S})}function V_(u){return Eh(u,1)}function j_(u,l){return $o(To(l),u)}function q_(){if(!arguments.length)return[];var u=arguments[0];return ct(u)?u:[u]}function z_(u){return _n(u,g)}function W_(u,l){return l=typeof l=="function"?l:r,_n(u,g,l)}function H_(u){return _n(u,h|g)}function G_(u,l){return l=typeof l=="function"?l:r,_n(u,h|g,l)}function K_(u,l){return l==null||mc(u,l,yr(l))}function Pn(u,l){return u===l||u!==u&&l!==l}var $_=Ua(bo),Y_=Ua(function(u,l){return u>=l}),Wi=Ac(function(){return arguments}())?Ac:function(u){return ir(u)&&kt.call(u,"callee")&&!lc.call(u,"callee")},ct=oe.isArray,Z_=Wf?rn(Wf):iv;function Yr(u){return u!=null&&$a(u.length)&&!ii(u)}function or(u){return ir(u)&&Yr(u)}function X_(u){return u===!0||u===!1||ir(u)&&zr(u)==ze}var yi=cg||ul,J_=Hf?rn(Hf):uv;function Q_(u){return ir(u)&&u.nodeType===1&&!Ju(u)}function eD(u){if(u==null)return!0;if(Yr(u)&&(ct(u)||typeof u=="string"||typeof u.splice=="function"||yi(u)||ou(u)||Wi(u)))return!u.length;var l=Ur(u);if(l==at||l==Vt)return!u.size;if(Zu(u))return!Ao(u).length;for(var v in u)if(kt.call(u,v))return!1;return!0}function tD(u,l){return Ku(u,l)}function rD(u,l,v){v=typeof v=="function"?v:r;var w=v?v(u,l):r;return w===r?Ku(u,l,r,v):!!w}function Yo(u){if(!ir(u))return!1;var l=zr(u);return l==pt||l==je||typeof u.message=="string"&&typeof u.name=="string"&&!Ju(u)}function nD(u){return typeof u=="number"&&cc(u)}function ii(u){if(!Jt(u))return!1;var l=zr(u);return l==ut||l==lt||l==Xe||l==Te}function Ph(u){return typeof u=="number"&&u==gt(u)}function $a(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=Y}function Jt(u){var l=typeof u;return u!=null&&(l=="object"||l=="function")}function ir(u){return u!=null&&typeof u=="object"}var Th=Gf?rn(Gf):sv;function iD(u,l){return u===l||wo(u,l,Uo(l))}function uD(u,l,v){return v=typeof v=="function"?v:r,wo(u,l,Uo(l),v)}function aD(u){return xh(u)&&u!=+u}function sD(u){if(Wv(u))throw new ft(a);return Ec(u)}function oD(u){return u===null}function lD(u){return u==null}function xh(u){return typeof u=="number"||ir(u)&&zr(u)==st}function Ju(u){if(!ir(u)||zr(u)!=$e)return!1;var l=ya(u);if(l===null)return!0;var v=kt.call(l,"constructor")&&l.constructor;return typeof v=="function"&&v instanceof v&&ma.call(v)==ug}var Zo=Kf?rn(Kf):ov;function fD(u){return Ph(u)&&u>=-Y&&u<=Y}var Ih=$f?rn($f):lv;function Ya(u){return typeof u=="string"||!ct(u)&&ir(u)&&zr(u)==Ht}function un(u){return typeof u=="symbol"||ir(u)&&zr(u)==L}var ou=Yf?rn(Yf):fv;function cD(u){return u===r}function hD(u){return ir(u)&&Ur(u)==Z}function dD(u){return ir(u)&&zr(u)==fe}var pD=Ua(Eo),gD=Ua(function(u,l){return u<=l});function kh(u){if(!u)return[];if(Yr(u))return Ya(u)?On(u):$r(u);if(Uu&&u[Uu])return K1(u[Uu]());var l=Ur(u),v=l==at?fo:l==Vt?pa:lu;return v(u)}function ui(u){if(!u)return u===0?u:0;if(u=yn(u),u===Q||u===-Q){var l=u<0?-1:1;return l*J}return u===u?u:0}function gt(u){var l=ui(u),v=l%1;return l===l?v?l-v:l:0}function Nh(u){return u?Vi(gt(u),0,me):0}function yn(u){if(typeof u=="number")return u;if(un(u))return le;if(Jt(u)){var l=typeof u.valueOf=="function"?u.valueOf():u;u=Jt(l)?l+"":l}if(typeof u!="string")return u===0?u:+u;u=tc(u);var v=Bu.test(u);return v||Mu.test(u)?M1(u.slice(2),v?2:8):Su.test(u)?le:+u}function Rh(u){return qn(u,Zr(u))}function vD(u){return u?Vi(gt(u),-Y,Y):u===0?u:0}function Pt(u){return u==null?"":nn(u)}var mD=uu(function(u,l){if(Zu(l)||Yr(l)){qn(l,yr(l),u);return}for(var v in l)kt.call(l,v)&&Wu(u,v,l[v])}),Lh=uu(function(u,l){qn(l,Zr(l),u)}),Za=uu(function(u,l,v,w){qn(l,Zr(l),u,w)}),_D=uu(function(u,l,v,w){qn(l,yr(l),u,w)}),DD=ri(mo);function bD(u,l){var v=iu(u);return l==null?v:vc(v,l)}var yD=bt(function(u,l){u=jt(u);var v=-1,w=l.length,S=w>2?l[2]:r;for(S&&Wr(l[0],l[1],S)&&(w=1);++v<w;)for(var I=l[v],q=Zr(I),K=-1,ne=q.length;++K<ne;){var ge=q[K],ve=u[ge];(ve===r||Pn(ve,tu[ge])&&!kt.call(u,ge))&&(u[ge]=I[ge])}return u}),wD=bt(function(u){return u.push(r,th),tn(Uh,r,u)});function AD(u,l){return Xf(u,Ye(l,3),jn)}function ED(u,l){return Xf(u,Ye(l,3),Do)}function CD(u,l){return u==null?u:_o(u,Ye(l,3),Zr)}function FD(u,l){return u==null?u:yc(u,Ye(l,3),Zr)}function SD(u,l){return u&&jn(u,Ye(l,3))}function BD(u,l){return u&&Do(u,Ye(l,3))}function OD(u){return u==null?[]:Pa(u,yr(u))}function MD(u){return u==null?[]:Pa(u,Zr(u))}function Xo(u,l,v){var w=u==null?r:ji(u,l);return w===r?v:w}function PD(u,l){return u!=null&&ih(u,l,ev)}function Jo(u,l){return u!=null&&ih(u,l,tv)}var TD=Zc(function(u,l,v){l!=null&&typeof l.toString!="function"&&(l=_a.call(l)),u[l]=v},el(Xr)),xD=Zc(function(u,l,v){l!=null&&typeof l.toString!="function"&&(l=_a.call(l)),kt.call(u,l)?u[l].push(v):u[l]=[v]},Ye),ID=bt(Gu);function yr(u){return Yr(u)?pc(u):Ao(u)}function Zr(u){return Yr(u)?pc(u,!0):cv(u)}function kD(u,l){var v={};return l=Ye(l,3),jn(u,function(w,S,I){ei(v,l(w,S,I),w)}),v}function ND(u,l){var v={};return l=Ye(l,3),jn(u,function(w,S,I){ei(v,S,l(w,S,I))}),v}var RD=uu(function(u,l,v){Ta(u,l,v)}),Uh=uu(function(u,l,v,w){Ta(u,l,v,w)}),LD=ri(function(u,l){var v={};if(u==null)return v;var w=!1;l=$t(l,function(I){return I=Di(I,u),w||(w=I.length>1),I}),qn(u,Ro(u),v),w&&(v=_n(v,h|d|g,Tv));for(var S=l.length;S--;)Oo(v,l[S]);return v});function UD(u,l){return Vh(u,Ka(Ye(l)))}var VD=ri(function(u,l){return u==null?{}:dv(u,l)});function Vh(u,l){if(u==null)return{};var v=$t(Ro(u),function(w){return[w]});return l=Ye(l),Pc(u,v,function(w,S){return l(w,S[0])})}function jD(u,l,v){l=Di(l,u);var w=-1,S=l.length;for(S||(S=1,u=r);++w<S;){var I=u==null?r:u[zn(l[w])];I===r&&(w=S,I=v),u=ii(I)?I.call(u):I}return u}function qD(u,l,v){return u==null?u:$u(u,l,v)}function zD(u,l,v,w){return w=typeof w=="function"?w:r,u==null?u:$u(u,l,v,w)}var jh=Qc(yr),qh=Qc(Zr);function WD(u,l,v){var w=ct(u),S=w||yi(u)||ou(u);if(l=Ye(l,4),v==null){var I=u&&u.constructor;S?v=w?new I:[]:Jt(u)?v=ii(I)?iu(ya(u)):{}:v={}}return(S?gn:jn)(u,function(q,K,ne){return l(v,q,K,ne)}),v}function HD(u,l){return u==null?!0:Oo(u,l)}function GD(u,l,v){return u==null?u:Nc(u,l,To(v))}function KD(u,l,v,w){return w=typeof w=="function"?w:r,u==null?u:Nc(u,l,To(v),w)}function lu(u){return u==null?[]:lo(u,yr(u))}function $D(u){return u==null?[]:lo(u,Zr(u))}function YD(u,l,v){return v===r&&(v=l,l=r),v!==r&&(v=yn(v),v=v===v?v:0),l!==r&&(l=yn(l),l=l===l?l:0),Vi(yn(u),l,v)}function ZD(u,l,v){return l=ui(l),v===r?(v=l,l=0):v=ui(v),u=yn(u),rv(u,l,v)}function XD(u,l,v){if(v&&typeof v!="boolean"&&Wr(u,l,v)&&(l=v=r),v===r&&(typeof l=="boolean"?(v=l,l=r):typeof u=="boolean"&&(v=u,u=r)),u===r&&l===r?(u=0,l=1):(u=ui(u),l===r?(l=u,u=0):l=ui(l)),u>l){var w=u;u=l,l=w}if(v||u%1||l%1){var S=hc();return Lr(u+S*(l-u+O1("1e-"+((S+"").length-1))),l)}return Fo(u,l)}var JD=au(function(u,l,v){return l=l.toLowerCase(),u+(v?zh(l):l)});function zh(u){return Qo(Pt(u).toLowerCase())}function Wh(u){return u=Pt(u),u&&u.replace(Tu,q1).replace(D1,"")}function QD(u,l,v){u=Pt(u),l=nn(l);var w=u.length;v=v===r?w:Vi(gt(v),0,w);var S=v;return v-=l.length,v>=0&&u.slice(v,S)==l}function eb(u){return u=Pt(u),u&&cn.test(u)?u.replace(cr,z1):u}function tb(u){return u=Pt(u),u&&Au.test(u)?u.replace(Ti,"\\$&"):u}var rb=au(function(u,l,v){return u+(v?"-":"")+l.toLowerCase()}),nb=au(function(u,l,v){return u+(v?" ":"")+l.toLowerCase()}),ib=Kc("toLowerCase");function ub(u,l,v){u=Pt(u),l=gt(l);var w=l?Qi(u):0;if(!l||w>=l)return u;var S=(l-w)/2;return La(Ca(S),v)+u+La(Ea(S),v)}function ab(u,l,v){u=Pt(u),l=gt(l);var w=l?Qi(u):0;return l&&w<l?u+La(l-w,v):u}function sb(u,l,v){u=Pt(u),l=gt(l);var w=l?Qi(u):0;return l&&w<l?La(l-w,v)+u:u}function ob(u,l,v){return v||l==null?l=0:l&&(l=+l),gg(Pt(u).replace(Fr,""),l||0)}function lb(u,l,v){return(v?Wr(u,l,v):l===r)?l=1:l=gt(l),So(Pt(u),l)}function fb(){var u=arguments,l=Pt(u[0]);return u.length<3?l:l.replace(u[1],u[2])}var cb=au(function(u,l,v){return u+(v?"_":"")+l.toLowerCase()});function hb(u,l,v){return v&&typeof v!="number"&&Wr(u,l,v)&&(l=v=r),v=v===r?me:v>>>0,v?(u=Pt(u),u&&(typeof l=="string"||l!=null&&!Zo(l))&&(l=nn(l),!l&&Ji(u))?bi(On(u),0,v):u.split(l,v)):[]}var db=au(function(u,l,v){return u+(v?" ":"")+Qo(l)});function pb(u,l,v){return u=Pt(u),v=v==null?0:Vi(gt(v),0,u.length),l=nn(l),u.slice(v,v+l.length)==l}function gb(u,l,v){var w=T.templateSettings;v&&Wr(u,l,v)&&(l=r),u=Pt(u),l=Za({},l,w,eh);var S=Za({},l.imports,w.imports,eh),I=yr(S),q=lo(S,I),K,ne,ge=0,ve=l.interpolate||ci,De="__p += '",xe=co((l.escape||ci).source+"|"+ve.source+"|"+(ve===Yn?Fu:ci).source+"|"+(l.evaluate||ci).source+"|$","g"),qe="//# sourceURL="+(kt.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++E1+"]")+`
`;u.replace(xe,function(et,yt,St,an,Hr,sn){return St||(St=an),De+=u.slice(ge,sn).replace(xu,W1),yt&&(K=!0,De+=`' +
__e(`+yt+`) +
'`),Hr&&(ne=!0,De+=`';
`+Hr+`;
__p += '`),St&&(De+=`' +
((__t = (`+St+`)) == null ? '' : __t) +
'`),ge=sn+et.length,et}),De+=`';
`;var Qe=kt.call(l,"variable")&&l.variable;if(!Qe)De=`with (obj) {
`+De+`
}
`;else if(xi.test(Qe))throw new ft(s);De=(ne?De.replace(Zt,""):De).replace(_r,"$1").replace(Xt,"$1;"),De="function("+(Qe||"obj")+`) {
`+(Qe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(K?", __e = _.escape":"")+(ne?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+De+`return __p
}`;var _t=Gh(function(){return Mt(I,qe+"return "+De).apply(r,q)});if(_t.source=De,Yo(_t))throw _t;return _t}function vb(u){return Pt(u).toLowerCase()}function mb(u){return Pt(u).toUpperCase()}function _b(u,l,v){if(u=Pt(u),u&&(v||l===r))return tc(u);if(!u||!(l=nn(l)))return u;var w=On(u),S=On(l),I=rc(w,S),q=nc(w,S)+1;return bi(w,I,q).join("")}function Db(u,l,v){if(u=Pt(u),u&&(v||l===r))return u.slice(0,uc(u)+1);if(!u||!(l=nn(l)))return u;var w=On(u),S=nc(w,On(l))+1;return bi(w,0,S).join("")}function bb(u,l,v){if(u=Pt(u),u&&(v||l===r))return u.replace(Fr,"");if(!u||!(l=nn(l)))return u;var w=On(u),S=rc(w,On(l));return bi(w,S).join("")}function yb(u,l){var v=G,w=re;if(Jt(l)){var S="separator"in l?l.separator:S;v="length"in l?gt(l.length):v,w="omission"in l?nn(l.omission):w}u=Pt(u);var I=u.length;if(Ji(u)){var q=On(u);I=q.length}if(v>=I)return u;var K=v-Qi(w);if(K<1)return w;var ne=q?bi(q,0,K).join(""):u.slice(0,K);if(S===r)return ne+w;if(q&&(K+=ne.length-K),Zo(S)){if(u.slice(K).search(S)){var ge,ve=ne;for(S.global||(S=co(S.source,Pt($i.exec(S))+"g")),S.lastIndex=0;ge=S.exec(ve);)var De=ge.index;ne=ne.slice(0,De===r?K:De)}}else if(u.indexOf(nn(S),K)!=K){var xe=ne.lastIndexOf(S);xe>-1&&(ne=ne.slice(0,xe))}return ne+w}function wb(u){return u=Pt(u),u&&hr.test(u)?u.replace(Dr,X1):u}var Ab=au(function(u,l,v){return u+(v?" ":"")+l.toUpperCase()}),Qo=Kc("toUpperCase");function Hh(u,l,v){return u=Pt(u),l=v?r:l,l===r?G1(u)?eg(u):R1(u):u.match(l)||[]}var Gh=bt(function(u,l){try{return tn(u,r,l)}catch(v){return Yo(v)?v:new ft(v)}}),Eb=ri(function(u,l){return gn(l,function(v){v=zn(v),ei(u,v,Ko(u[v],u))}),u});function Cb(u){var l=u==null?0:u.length,v=Ye();return u=l?$t(u,function(w){if(typeof w[1]!="function")throw new vn(o);return[v(w[0]),w[1]]}):[],bt(function(w){for(var S=-1;++S<l;){var I=u[S];if(tn(I[0],this,w))return tn(I[1],this,w)}})}function Fb(u){return Xg(_n(u,h))}function el(u){return function(){return u}}function Sb(u,l){return u==null||u!==u?l:u}var Bb=Yc(),Ob=Yc(!0);function Xr(u){return u}function tl(u){return Cc(typeof u=="function"?u:_n(u,h))}function Mb(u){return Sc(_n(u,h))}function Pb(u,l){return Bc(u,_n(l,h))}var Tb=bt(function(u,l){return function(v){return Gu(v,u,l)}}),xb=bt(function(u,l){return function(v){return Gu(u,v,l)}});function rl(u,l,v){var w=yr(l),S=Pa(l,w);v==null&&!(Jt(l)&&(S.length||!w.length))&&(v=l,l=u,u=this,S=Pa(l,yr(l)));var I=!(Jt(v)&&"chain"in v)||!!v.chain,q=ii(u);return gn(S,function(K){var ne=l[K];u[K]=ne,q&&(u.prototype[K]=function(){var ge=this.__chain__;if(I||ge){var ve=u(this.__wrapped__),De=ve.__actions__=$r(this.__actions__);return De.push({func:ne,args:arguments,thisArg:u}),ve.__chain__=ge,ve}return ne.apply(u,pi([this.value()],arguments))})}),u}function Ib(){return Sr._===this&&(Sr._=ag),this}function nl(){}function kb(u){return u=gt(u),bt(function(l){return Oc(l,u)})}var Nb=Io($t),Rb=Io(Zf),Lb=Io(io);function Kh(u){return jo(u)?uo(zn(u)):pv(u)}function Ub(u){return function(l){return u==null?r:ji(u,l)}}var Vb=Xc(),jb=Xc(!0);function il(){return[]}function ul(){return!1}function qb(){return{}}function zb(){return""}function Wb(){return!0}function Hb(u,l){if(u=gt(u),u<1||u>Y)return[];var v=me,w=Lr(u,me);l=Ye(l),u-=me;for(var S=oo(w,l);++v<u;)l(v);return S}function Gb(u){return ct(u)?$t(u,zn):un(u)?[u]:$r(dh(Pt(u)))}function Kb(u){var l=++ig;return Pt(u)+l}var $b=Ra(function(u,l){return u+l},0),Yb=ko("ceil"),Zb=Ra(function(u,l){return u/l},1),Xb=ko("floor");function Jb(u){return u&&u.length?Ma(u,Xr,bo):r}function Qb(u,l){return u&&u.length?Ma(u,Ye(l,2),bo):r}function ey(u){return Qf(u,Xr)}function ty(u,l){return Qf(u,Ye(l,2))}function ry(u){return u&&u.length?Ma(u,Xr,Eo):r}function ny(u,l){return u&&u.length?Ma(u,Ye(l,2),Eo):r}var iy=Ra(function(u,l){return u*l},1),uy=ko("round"),ay=Ra(function(u,l){return u-l},0);function sy(u){return u&&u.length?so(u,Xr):0}function oy(u,l){return u&&u.length?so(u,Ye(l,2)):0}return T.after=M_,T.ary=Eh,T.assign=mD,T.assignIn=Lh,T.assignInWith=Za,T.assignWith=_D,T.at=DD,T.before=Ch,T.bind=Ko,T.bindAll=Eb,T.bindKey=Fh,T.castArray=q_,T.chain=yh,T.chunk=Xv,T.compact=Jv,T.concat=Qv,T.cond=Cb,T.conforms=Fb,T.constant=el,T.countBy=s_,T.create=bD,T.curry=Sh,T.curryRight=Bh,T.debounce=Oh,T.defaults=yD,T.defaultsDeep=wD,T.defer=P_,T.delay=T_,T.difference=em,T.differenceBy=tm,T.differenceWith=rm,T.drop=nm,T.dropRight=im,T.dropRightWhile=um,T.dropWhile=am,T.fill=sm,T.filter=l_,T.flatMap=h_,T.flatMapDeep=d_,T.flatMapDepth=p_,T.flatten=mh,T.flattenDeep=om,T.flattenDepth=lm,T.flip=x_,T.flow=Bb,T.flowRight=Ob,T.fromPairs=fm,T.functions=OD,T.functionsIn=MD,T.groupBy=g_,T.initial=hm,T.intersection=dm,T.intersectionBy=pm,T.intersectionWith=gm,T.invert=TD,T.invertBy=xD,T.invokeMap=m_,T.iteratee=tl,T.keyBy=__,T.keys=yr,T.keysIn=Zr,T.map=Wa,T.mapKeys=kD,T.mapValues=ND,T.matches=Mb,T.matchesProperty=Pb,T.memoize=Ga,T.merge=RD,T.mergeWith=Uh,T.method=Tb,T.methodOf=xb,T.mixin=rl,T.negate=Ka,T.nthArg=kb,T.omit=LD,T.omitBy=UD,T.once=I_,T.orderBy=D_,T.over=Nb,T.overArgs=k_,T.overEvery=Rb,T.overSome=Lb,T.partial=$o,T.partialRight=Mh,T.partition=b_,T.pick=VD,T.pickBy=Vh,T.property=Kh,T.propertyOf=Ub,T.pull=Dm,T.pullAll=Dh,T.pullAllBy=bm,T.pullAllWith=ym,T.pullAt=wm,T.range=Vb,T.rangeRight=jb,T.rearg=N_,T.reject=A_,T.remove=Am,T.rest=R_,T.reverse=Ho,T.sampleSize=C_,T.set=qD,T.setWith=zD,T.shuffle=F_,T.slice=Em,T.sortBy=O_,T.sortedUniq=Pm,T.sortedUniqBy=Tm,T.split=hb,T.spread=L_,T.tail=xm,T.take=Im,T.takeRight=km,T.takeRightWhile=Nm,T.takeWhile=Rm,T.tap=Jm,T.throttle=U_,T.thru=za,T.toArray=kh,T.toPairs=jh,T.toPairsIn=qh,T.toPath=Gb,T.toPlainObject=Rh,T.transform=WD,T.unary=V_,T.union=Lm,T.unionBy=Um,T.unionWith=Vm,T.uniq=jm,T.uniqBy=qm,T.uniqWith=zm,T.unset=HD,T.unzip=Go,T.unzipWith=bh,T.update=GD,T.updateWith=KD,T.values=lu,T.valuesIn=$D,T.without=Wm,T.words=Hh,T.wrap=j_,T.xor=Hm,T.xorBy=Gm,T.xorWith=Km,T.zip=$m,T.zipObject=Ym,T.zipObjectDeep=Zm,T.zipWith=Xm,T.entries=jh,T.entriesIn=qh,T.extend=Lh,T.extendWith=Za,rl(T,T),T.add=$b,T.attempt=Gh,T.camelCase=JD,T.capitalize=zh,T.ceil=Yb,T.clamp=YD,T.clone=z_,T.cloneDeep=H_,T.cloneDeepWith=G_,T.cloneWith=W_,T.conformsTo=K_,T.deburr=Wh,T.defaultTo=Sb,T.divide=Zb,T.endsWith=QD,T.eq=Pn,T.escape=eb,T.escapeRegExp=tb,T.every=o_,T.find=f_,T.findIndex=gh,T.findKey=AD,T.findLast=c_,T.findLastIndex=vh,T.findLastKey=ED,T.floor=Xb,T.forEach=wh,T.forEachRight=Ah,T.forIn=CD,T.forInRight=FD,T.forOwn=SD,T.forOwnRight=BD,T.get=Xo,T.gt=$_,T.gte=Y_,T.has=PD,T.hasIn=Jo,T.head=_h,T.identity=Xr,T.includes=v_,T.indexOf=cm,T.inRange=ZD,T.invoke=ID,T.isArguments=Wi,T.isArray=ct,T.isArrayBuffer=Z_,T.isArrayLike=Yr,T.isArrayLikeObject=or,T.isBoolean=X_,T.isBuffer=yi,T.isDate=J_,T.isElement=Q_,T.isEmpty=eD,T.isEqual=tD,T.isEqualWith=rD,T.isError=Yo,T.isFinite=nD,T.isFunction=ii,T.isInteger=Ph,T.isLength=$a,T.isMap=Th,T.isMatch=iD,T.isMatchWith=uD,T.isNaN=aD,T.isNative=sD,T.isNil=lD,T.isNull=oD,T.isNumber=xh,T.isObject=Jt,T.isObjectLike=ir,T.isPlainObject=Ju,T.isRegExp=Zo,T.isSafeInteger=fD,T.isSet=Ih,T.isString=Ya,T.isSymbol=un,T.isTypedArray=ou,T.isUndefined=cD,T.isWeakMap=hD,T.isWeakSet=dD,T.join=vm,T.kebabCase=rb,T.last=bn,T.lastIndexOf=mm,T.lowerCase=nb,T.lowerFirst=ib,T.lt=pD,T.lte=gD,T.max=Jb,T.maxBy=Qb,T.mean=ey,T.meanBy=ty,T.min=ry,T.minBy=ny,T.stubArray=il,T.stubFalse=ul,T.stubObject=qb,T.stubString=zb,T.stubTrue=Wb,T.multiply=iy,T.nth=_m,T.noConflict=Ib,T.noop=nl,T.now=Ha,T.pad=ub,T.padEnd=ab,T.padStart=sb,T.parseInt=ob,T.random=XD,T.reduce=y_,T.reduceRight=w_,T.repeat=lb,T.replace=fb,T.result=jD,T.round=uy,T.runInContext=te,T.sample=E_,T.size=S_,T.snakeCase=cb,T.some=B_,T.sortedIndex=Cm,T.sortedIndexBy=Fm,T.sortedIndexOf=Sm,T.sortedLastIndex=Bm,T.sortedLastIndexBy=Om,T.sortedLastIndexOf=Mm,T.startCase=db,T.startsWith=pb,T.subtract=ay,T.sum=sy,T.sumBy=oy,T.template=gb,T.times=Hb,T.toFinite=ui,T.toInteger=gt,T.toLength=Nh,T.toLower=vb,T.toNumber=yn,T.toSafeInteger=vD,T.toString=Pt,T.toUpper=mb,T.trim=_b,T.trimEnd=Db,T.trimStart=bb,T.truncate=yb,T.unescape=wb,T.uniqueId=Kb,T.upperCase=Ab,T.upperFirst=Qo,T.each=wh,T.eachRight=Ah,T.first=_h,rl(T,function(){var u={};return jn(T,function(l,v){kt.call(T.prototype,v)||(u[v]=l)}),u}(),{chain:!1}),T.VERSION=n,gn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){T[u].placeholder=T}),gn(["drop","take"],function(u,l){Ct.prototype[u]=function(v){v=v===r?1:vr(gt(v),0);var w=this.__filtered__&&!l?new Ct(this):this.clone();return w.__filtered__?w.__takeCount__=Lr(v,w.__takeCount__):w.__views__.push({size:Lr(v,me),type:u+(w.__dir__<0?"Right":"")}),w},Ct.prototype[u+"Right"]=function(v){return this.reverse()[u](v).reverse()}}),gn(["filter","map","takeWhile"],function(u,l){var v=l+1,w=v==H||v==W;Ct.prototype[u]=function(S){var I=this.clone();return I.__iteratees__.push({iteratee:Ye(S,3),type:v}),I.__filtered__=I.__filtered__||w,I}}),gn(["head","last"],function(u,l){var v="take"+(l?"Right":"");Ct.prototype[u]=function(){return this[v](1).value()[0]}}),gn(["initial","tail"],function(u,l){var v="drop"+(l?"":"Right");Ct.prototype[u]=function(){return this.__filtered__?new Ct(this):this[v](1)}}),Ct.prototype.compact=function(){return this.filter(Xr)},Ct.prototype.find=function(u){return this.filter(u).head()},Ct.prototype.findLast=function(u){return this.reverse().find(u)},Ct.prototype.invokeMap=bt(function(u,l){return typeof u=="function"?new Ct(this):this.map(function(v){return Gu(v,u,l)})}),Ct.prototype.reject=function(u){return this.filter(Ka(Ye(u)))},Ct.prototype.slice=function(u,l){u=gt(u);var v=this;return v.__filtered__&&(u>0||l<0)?new Ct(v):(u<0?v=v.takeRight(-u):u&&(v=v.drop(u)),l!==r&&(l=gt(l),v=l<0?v.dropRight(-l):v.take(l-u)),v)},Ct.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},Ct.prototype.toArray=function(){return this.take(me)},jn(Ct.prototype,function(u,l){var v=/^(?:filter|find|map|reject)|While$/.test(l),w=/^(?:head|last)$/.test(l),S=T[w?"take"+(l=="last"?"Right":""):l],I=w||/^find/.test(l);S&&(T.prototype[l]=function(){var q=this.__wrapped__,K=w?[1]:arguments,ne=q instanceof Ct,ge=K[0],ve=ne||ct(q),De=function(yt){var St=S.apply(T,pi([yt],K));return w&&xe?St[0]:St};ve&&v&&typeof ge=="function"&&ge.length!=1&&(ne=ve=!1);var xe=this.__chain__,qe=!!this.__actions__.length,Qe=I&&!xe,_t=ne&&!qe;if(!I&&ve){q=_t?q:new Ct(this);var et=u.apply(q,K);return et.__actions__.push({func:za,args:[De],thisArg:r}),new mn(et,xe)}return Qe&&_t?u.apply(this,K):(et=this.thru(De),Qe?w?et.value()[0]:et.value():et)})}),gn(["pop","push","shift","sort","splice","unshift"],function(u){var l=ga[u],v=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",w=/^(?:pop|shift)$/.test(u);T.prototype[u]=function(){var S=arguments;if(w&&!this.__chain__){var I=this.value();return l.apply(ct(I)?I:[],S)}return this[v](function(q){return l.apply(ct(q)?q:[],S)})}}),jn(Ct.prototype,function(u,l){var v=T[l];if(v){var w=v.name+"";kt.call(nu,w)||(nu[w]=[]),nu[w].push({name:l,func:v})}}),nu[Na(r,D).name]=[{name:"wrapper",func:r}],Ct.prototype.clone=wg,Ct.prototype.reverse=Ag,Ct.prototype.value=Eg,T.prototype.at=Qm,T.prototype.chain=e_,T.prototype.commit=t_,T.prototype.next=r_,T.prototype.plant=i_,T.prototype.reverse=u_,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=a_,T.prototype.first=T.prototype.head,Uu&&(T.prototype[Uu]=n_),T},eu=tg();Ni?((Ni.exports=eu)._=eu,eo._=eu):Sr._=eu}).call(dr)})(bS,Ps);const yS=Ps,Rl="panelModeStore";function wS(){const t=fn("select"),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Rl]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[Rl]=a,r(a))},get:()=>xt(t),delete:()=>{i&&(delete localStorage[Rl],r("select"))}}}const Kn=wS(),AS=ln(Kn,t=>xt(Kn));function yd(t,e,r){const n=t.slice();return n[7]=e[r][0],n[8]=e[r][1],n}function wd(t,e,r){const n=t.slice();return n[11]=e[r][0],n[12]=e[r][1],n}function Ad(t){let e=t[12].text+"",r,n,i,a;return{c(){r=We(e),n=ie("b"),i=We("::"),a=Le()},l(o){r=He(o,e),n=ue(o,"B",{});var s=$(n);i=He(s,"::"),s.forEach(k),a=Ue(o)},m(o,s){be(o,r,s),be(o,n,s),j(n,i),be(o,a,s)},p(o,s){s&1&&e!==(e=o[12].text+"")&&Cn(r,e)},d(o){o&&k(r),o&&k(n),o&&k(a)}}}function Ed(t,e){let r,n,i,a,o,s=Object.entries(e[8].weightedPrompts),c=[];for(let f=0;f<s.length;f+=1)c[f]=Ad(wd(e,s,f));function p(){return e[5](e[7],e[8])}return{key:t,first:null,c(){r=ie("li"),n=ie("a");for(let f=0;f<c.length;f+=1)c[f].c();i=Le(),this.h()},l(f){r=ue(f,"LI",{});var h=$(r);n=ue(h,"A",{class:!0});var d=$(n);for(let g=0;g<c.length;g+=1)c[g].l(d);d.forEach(k),i=Ue(h),h.forEach(k),this.h()},h(){M(n,"class","text-xs inline-block"),Tt(n,"active",e[1]===e[7]),this.first=r},m(f,h){be(f,r,h),j(r,n);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(n,null);j(r,i),a||(o=Oe(n,"click",p),a=!0)},p(f,h){if(e=f,h&5){s=Object.entries(e[8].weightedPrompts);let d;for(d=0;d<s.length;d+=1){const g=wd(e,s,d);c[d]?c[d].p(g,h):(c[d]=Ad(g),c[d].c(),c[d].m(n,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=s.length}h&7&&Tt(n,"active",e[1]===e[7])},d(f){f&&k(r),Is(c,f),a=!1,o()}}}function ES(t){let e,r,n,i,a,o=[],s=new Map,c,p,f=t[2](t[0],Cd,"desc");const h=d=>d[7];for(let d=0;d<f.length;d+=1){let g=yd(t,f,d),b=h(g);s.set(b,o[d]=Ed(b,g))}return{c(){e=ie("ul"),r=ie("li"),n=ie("a"),i=We("New +"),a=Le();for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=ue(d,"UL",{class:!0});var g=$(e);r=ue(g,"LI",{});var b=$(r);n=ue(b,"A",{class:!0});var m=$(n);i=He(m,"New +"),m.forEach(k),b.forEach(k),a=Ue(g);for(let _=0;_<o.length;_+=1)o[_].l(g);g.forEach(k),this.h()},h(){M(n,"class","text-xs inline-block"),M(e,"class","menu h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(d,g){be(d,e,g),j(e,r),j(r,n),j(n,i),j(e,a);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(e,null);c||(p=Oe(n,"click",t[3]),c=!0)},p(d,[g]){g&23&&(f=d[2](d[0],Cd,"desc"),o=Oi(o,g,h,1,d,f,s,e,bu,Ed,null,yd))},i:Me,o:Me,d(d){d&&k(e);for(let g=0;g<o.length;g+=1)o[g].d();c=!1,p()}}}const Cd=t=>t[1].date;function CS(t,e,r){let n,i,a;Dt(t,Cr,f=>r(6,n=f)),Dt(t,my,f=>r(0,i=f)),Dt(t,$d,f=>r(1,a=f));const{orderBy:o}=yS;function s(){Hi.delete(),Ot.update(Ai({},n.weightMode)),Kn.update("edit")}function c(f,h){Hi.update(f),Ot.update({...h}),Kn.update("edit")}return[i,a,o,s,c,(f,h)=>c(f,h)]}class FS extends wt{constructor(e){super(),At(this,e,CS,ES,Et,{})}}let ns;const SS=new Uint8Array(16);function BS(){if(!ns&&(ns=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ns))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ns(SS)}const Mr=[];for(let t=0;t<256;++t)Mr.push((t+256).toString(16).slice(1));function OS(t,e=0){return(Mr[t[e+0]]+Mr[t[e+1]]+Mr[t[e+2]]+Mr[t[e+3]]+"-"+Mr[t[e+4]]+Mr[t[e+5]]+"-"+Mr[t[e+6]]+Mr[t[e+7]]+"-"+Mr[t[e+8]]+Mr[t[e+9]]+"-"+Mr[t[e+10]]+Mr[t[e+11]]+Mr[t[e+12]]+Mr[t[e+13]]+Mr[t[e+14]]+Mr[t[e+15]]).toLowerCase()}const MS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Fd={randomUUID:MS};function a1(t,e,r){if(Fd.randomUUID&&!e&&!t)return Fd.randomUUID();t=t||{};const n=t.random||(t.rng||BS)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return OS(n)}function PS(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var s1=PS,TS=typeof dr=="object"&&dr&&dr.Object===Object&&dr,xS=TS,IS=xS,kS=typeof self=="object"&&self&&self.Object===Object&&self,NS=IS||kS||Function("return this")(),o1=NS,RS=o1,LS=function(){return RS.Date.now()},US=LS,VS=/\s/;function jS(t){for(var e=t.length;e--&&VS.test(t.charAt(e)););return e}var qS=jS,zS=qS,WS=/^\s+/;function HS(t){return t&&t.slice(0,zS(t)+1).replace(WS,"")}var GS=HS,KS=o1,$S=KS.Symbol,l1=$S,Sd=l1,f1=Object.prototype,YS=f1.hasOwnProperty,ZS=f1.toString,Qu=Sd?Sd.toStringTag:void 0;function XS(t){var e=YS.call(t,Qu),r=t[Qu];try{t[Qu]=void 0;var n=!0}catch{}var i=ZS.call(t);return n&&(e?t[Qu]=r:delete t[Qu]),i}var JS=XS,QS=Object.prototype,e5=QS.toString;function t5(t){return e5.call(t)}var r5=t5,Bd=l1,n5=JS,i5=r5,u5="[object Null]",a5="[object Undefined]",Od=Bd?Bd.toStringTag:void 0;function s5(t){return t==null?t===void 0?a5:u5:Od&&Od in Object(t)?n5(t):i5(t)}var o5=s5;function l5(t){return t!=null&&typeof t=="object"}var f5=l5,c5=o5,h5=f5,d5="[object Symbol]";function p5(t){return typeof t=="symbol"||h5(t)&&c5(t)==d5}var g5=p5,v5=GS,Md=s1,m5=g5,Pd=0/0,_5=/^[-+]0x[0-9a-f]+$/i,D5=/^0b[01]+$/i,b5=/^0o[0-7]+$/i,y5=parseInt;function w5(t){if(typeof t=="number")return t;if(m5(t))return Pd;if(Md(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Md(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=v5(t);var r=D5.test(t);return r||b5.test(t)?y5(t.slice(2),r?2:8):_5.test(t)?Pd:+t}var A5=w5,E5=s1,Ll=US,Td=A5,C5="Expected a function",F5=Math.max,S5=Math.min;function B5(t,e,r){var n,i,a,o,s,c,p=0,f=!1,h=!1,d=!0;if(typeof t!="function")throw new TypeError(C5);e=Td(e)||0,E5(r)&&(f=!!r.leading,h="maxWait"in r,a=h?F5(Td(r.maxWait)||0,e):a,d="trailing"in r?!!r.trailing:d);function g(O){var P=n,x=i;return n=i=void 0,p=O,o=t.apply(x,P),o}function b(O){return p=O,s=setTimeout(D,e),f?g(O):o}function m(O){var P=O-c,x=O-p,R=e-P;return h?S5(R,a-x):R}function _(O){var P=O-c,x=O-p;return c===void 0||P>=e||P<0||h&&x>=a}function D(){var O=Ll();if(_(O))return C(O);s=setTimeout(D,m(O))}function C(O){return s=void 0,d&&n?g(O):(n=i=void 0,o)}function A(){s!==void 0&&clearTimeout(s),p=0,n=c=i=s=void 0}function B(){return s===void 0?o:C(Ll())}function E(){var O=Ll(),P=_(O);if(n=arguments,i=this,c=O,P){if(s===void 0)return b(c);if(h)return clearTimeout(s),s=setTimeout(D,e),g(c)}return s===void 0&&(s=setTimeout(D,e)),o}return E.cancel=A,E.flush=B,E}var xd=B5;function Id(t,e,r){const n=t.slice();return n[14]=e[r].id,n[15]=e[r].text,n}function kd(t,e){let r,n,i,a,o;function s(...c){return e[9](e[14],...c)}return{key:t,first:null,c(){r=ie("li"),n=ie("input"),this.h()},l(c){r=ue(c,"LI",{class:!0});var p=$(r);n=ue(p,"INPUT",{type:!0,placeholder:!0,class:!0}),p.forEach(k),this.h()},h(){n.value=i=e[15],M(n,"type","text"),M(n,"placeholder",""),M(n,"class","input input-bordered input-sm w-full"),M(r,"class","p-1"),this.first=r},m(c,p){be(c,r,p),j(r,n),a||(o=Oe(n,"input",s),a=!0)},p(c,p){e=c,p&2&&i!==(i=e[15])&&n.value!==i&&(n.value=i)},d(c){c&&k(r),a=!1,o()}}}function O5(t){let e,r,n,i,a,o,s,c,p,f,h,d=[],g=new Map,b,m,_,D,C,A=t[1];const B=E=>E[14];for(let E=0;E<A.length;E+=1){let O=Id(t,A,E),P=B(O);g.set(P,d[E]=kd(P,O))}return{c(){e=ie("div"),r=ie("button"),n=We("Paste"),i=Le(),a=ie("button"),o=We("Save"),s=Le(),c=ie("button"),p=We("Delete"),f=Le(),h=ie("ul");for(let E=0;E<d.length;E+=1)d[E].c();b=Le(),m=ie("li"),_=ie("input"),this.h()},l(E){e=ue(E,"DIV",{class:!0});var O=$(e);r=ue(O,"BUTTON",{class:!0});var P=$(r);n=He(P,"Paste"),P.forEach(k),i=Ue(O),a=ue(O,"BUTTON",{class:!0});var x=$(a);o=He(x,"Save"),x.forEach(k),s=Ue(O),c=ue(O,"BUTTON",{class:!0});var R=$(c);p=He(R,"Delete"),R.forEach(k),O.forEach(k),f=Ue(E),h=ue(E,"UL",{class:!0});var G=$(h);for(let U=0;U<d.length;U+=1)d[U].l(G);b=Ue(G),m=ue(G,"LI",{class:!0});var re=$(m);_=ue(re,"INPUT",{type:!0,placeholder:!0,class:!0}),re.forEach(k),G.forEach(k),this.h()},h(){M(r,"class","btn btn-sm btn-info mx-2"),M(a,"class","btn btn-sm btn-success mx-2"),M(c,"class","btn btn-sm btn-error mx-2"),M(e,"class","flex px-8 py-2 justify-center bg-base-100"),M(_,"type","text"),M(_,"placeholder","Add prompt"),M(_,"class","input input-bordered input-sm w-full italic"),M(m,"class","p-1"),M(h,"class","h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(E,O){be(E,e,O),j(e,r),j(r,n),j(e,i),j(e,a),j(a,o),j(e,s),j(e,c),j(c,p),be(E,f,O),be(E,h,O);for(let P=0;P<d.length;P+=1)d[P]&&d[P].m(h,null);j(h,b),j(h,m),j(m,_),Hn(_,t[0]),D||(C=[Oe(r,"click",t[3]),Oe(a,"click",t[2]),Oe(c,"click",t[4]),Oe(_,"input",t[10]),Oe(_,"input",t[11])],D=!0)},p(E,[O]){O&34&&(A=E[1],d=Oi(d,O,B,1,E,A,g,h,bu,kd,b,Id)),O&1&&_.value!==E[0]&&Hn(_,E[0])},i:Me,o:Me,d(E){E&&k(e),E&&k(f),E&&k(h);for(let O=0;O<d.length;O+=1)d[O].d();D=!1,fr(C)}}}function M5(t,e,r){let n,i,a;Dt(t,Cr,D=>r(8,i=D)),Dt(t,$d,D=>r(12,a=D));let o="",s=Object.keys(i.weightedPrompts).length;function c(){ta.update(a1(),{...i,date:Date.now()}),Kn.update("select")}function p(){navigator.clipboard.readText().then(D=>{const C=of(D);f(C)})}function f(D){const C=Math.max(...D.map(([B,E])=>E)),A=D.reduce((B,[E,O],P)=>(B[P]=Pr(P,E,O,O/C),B),{});Hi.delete(),Ot.update(Ai(A,i.weightMode)),r(0,o="")}function h(){a&&ta.delete(a),Hi.delete(),Ot.delete(),Kn.update("select")}const d=xd((D,C)=>{let A={...i.weightedPrompts};if(!C){const O=Object.entries(i.weightedPrompts).filter(([P])=>P!==D).map(([P,x])=>[x.text,x.parsedWeight]);return f(O)}const B={...A[D],text:C};A[D]=B,Ot.update({...i,weightedPrompts:A})},1e3),g=xd(D=>{const C=Object.entries(i.weightedPrompts).map(([A,B])=>[B.text,B.parsedWeight]);return C.push([D,1]),f(C)},1e3),b=(D,C)=>d(D,C.target.value);function m(){o=this.value,r(0,o),r(8,i),r(7,s)}const _=D=>g(D.target.value);return t.$$.update=()=>{if(t.$$.dirty&384){const D=Object.keys(i.weightedPrompts).length;D>s&&(r(7,s=D),r(0,o=""))}t.$$.dirty&256&&r(1,n=Object.entries(i.weightedPrompts).map(([D,C])=>({id:D,text:C.text})))},[o,n,c,p,h,d,g,s,i,b,m,_]}class P5 extends wt{constructor(e){super(),At(this,e,M5,O5,Et,{})}}const T5=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. The first sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. The middle three sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. The final sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,x5=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 10 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. Four sentences should describe the subject.
    d. Four sentences should describe the scene.
    e. Tow sentences should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,I5=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 10 concepts.
    a. Each concept should be 10 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
`,k5=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 20 concepts.
    a. Each concept should be 5 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
3. Do not use hyphens to mark list items.
4. Do not title the list.
`,N5=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. One sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. Two sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. One sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
    f. One sentence should be a poetic concept or feeling. Example: The unfathomable depths of a lover's sigh.
        i. The poetic concept should be intense.
        ii. The poetic concept should be emotional.
        iii. The poetic concept should include abstract words.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`;function R5(){const t=fn({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith("directive")){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=xt(t),p={...s[a]||{},...o};i&&(localStorage[`directive_${a}`]=JSON.stringify(p));const f={...s,[a]:p};r(f)},get:a=>xt(t)[a],delete:a=>{i&&delete localStorage[`directive_${a}`];const o={...xt(t)};delete o[a],r(o)}}}const Ts=R5(),L5=ln(Ts,t=>Object.entries(xt(Ts))),Ul="preferredModelStore";function U5(){const t=fn(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Ul]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[Ul]=a,r(a))},get:()=>xt(t),delete:()=>{i&&(delete localStorage[Ul],r(""))}}}const cf=U5(),c1=ln(cf,t=>xt(cf)),Vl="preferredDirectiveStore";function V5(){const t=fn(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Vl]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[Vl]=a,r(a))},get:()=>xt(t),delete:()=>{i&&(delete localStorage[Vl],r(""))}}}const xs=V5(),j5=ln(xs,t=>xt(xs)),jl="metaPromptStore";function q5(){const t=fn(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[jl]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[jl]=a,r(a))},get:()=>xt(t),delete:()=>{i&&(delete localStorage[jl],r(""))}}}const hf=q5(),z5=ln(hf,t=>xt(hf));function Nd(t,e,r){const n=t.slice();return n[30]=e[r][0],n[31]=e[r][1],n}function W5(t){let e,r,n;return{c(){e=ie("div"),r=ie("p"),n=We("Set Open AI Key in settings for GPT generation."),this.h()},l(i){e=ue(i,"DIV",{class:!0});var a=$(e);r=ue(a,"P",{class:!0});var o=$(r);n=He(o,"Set Open AI Key in settings for GPT generation."),o.forEach(k),a.forEach(k),this.h()},h(){M(r,"class","text-center"),M(e,"class","w-full p-2 flex justify-center")},m(i,a){be(i,e,a),j(e,r),j(r,n)},p:Me,d(i){i&&k(e)}}}function H5(t){let e,r,n,i,a,o,s,c,p,f,h=[],d=new Map,g,b,m,_,D,C,A,B=Object.entries(t[1]);const E=P=>P[30];for(let P=0;P<B.length;P+=1){let x=Nd(t,B,P),R=E(x);d.set(R,h[P]=Rd(R,x))}let O=t[0]&&Ld(t);return{c(){e=ie("div"),r=ie("div"),n=ie("label"),i=ie("span"),a=We("Pick a directive for prompt creation"),o=Le(),s=ie("select"),c=ie("option"),p=We("Pick one");for(let P=0;P<h.length;P+=1)h[P].c();g=ie("option"),b=We("New"),_=Le(),O&&O.c(),D=Rt(),this.h()},l(P){e=ue(P,"DIV",{class:!0});var x=$(e);r=ue(x,"DIV",{class:!0});var R=$(r);n=ue(R,"LABEL",{class:!0});var G=$(n);i=ue(G,"SPAN",{class:!0});var re=$(i);a=He(re,"Pick a directive for prompt creation"),re.forEach(k),G.forEach(k),o=Ue(R),s=ue(R,"SELECT",{class:!0});var U=$(s);c=ue(U,"OPTION",{});var X=$(c);p=He(X,"Pick one"),X.forEach(k);for(let V=0;V<h.length;V+=1)h[V].l(U);g=ue(U,"OPTION",{});var H=$(g);b=He(H,"New"),H.forEach(k),U.forEach(k),R.forEach(k),x.forEach(k),_=Ue(P),O&&O.l(P),D=Rt(),this.h()},h(){M(i,"class","label-text"),M(n,"class","label"),c.disabled=!0,c.selected=f=t[0]===null,c.__value="Pick one",c.value=c.__value,g.__value="new",g.value=g.__value,g.selected=m=t[0]==="new",M(s,"class","select select-bordered"),M(r,"class","form-control w-full max-w-xs mb-4"),M(e,"class","flex justify-center")},m(P,x){be(P,e,x),j(e,r),j(r,n),j(n,i),j(i,a),j(r,o),j(r,s),j(s,c),j(c,p);for(let R=0;R<h.length;R+=1)h[R]&&h[R].m(s,null);j(s,g),j(g,b),mu(s,t[0]),be(P,_,x),O&&O.m(P,x),be(P,D,x),C||(A=Oe(s,"change",t[11]),C=!0)},p(P,x){x[0]&3&&f!==(f=P[0]===null)&&(c.selected=f),x[0]&3&&(B=Object.entries(P[1]),h=Oi(h,x,E,1,P,B,d,s,bu,Rd,g,Nd)),x[0]&3&&m!==(m=P[0]==="new")&&(g.selected=m),x[0]&3&&mu(s,P[0]),P[0]?O?O.p(P,x):(O=Ld(P),O.c(),O.m(D.parentNode,D)):O&&(O.d(1),O=null)},d(P){P&&k(e);for(let x=0;x<h.length;x+=1)h[x].d();P&&k(_),O&&O.d(P),P&&k(D),C=!1,A()}}}function Rd(t,e){let r,n=e[31].name+"",i,a=e[31].builtIn?" (Built-In)":" (User)",o,s,c;return{key:t,first:null,c(){r=ie("option"),i=We(n),o=We(a),this.h()},l(p){r=ue(p,"OPTION",{});var f=$(r);i=He(f,n),o=He(f,a),f.forEach(k),this.h()},h(){r.__value=s=e[30],r.value=r.__value,r.selected=c=e[0]===e[30],this.first=r},m(p,f){be(p,r,f),j(r,i),j(r,o)},p(p,f){e=p,f[0]&2&&n!==(n=e[31].name+"")&&Cn(i,n),f[0]&2&&a!==(a=e[31].builtIn?" (Built-In)":" (User)")&&Cn(o,a),f[0]&2&&s!==(s=e[30])&&(r.__value=s,r.value=r.__value),f[0]&3&&c!==(c=e[0]===e[30])&&(r.selected=c)},d(p){p&&k(r)}}}function Ld(t){let e,r,n,i,a,o,s,c,p,f,h=!t[6]&&Ud(t);function d(m,_){return m[5]?K5:G5}let g=d(t),b=g(t);return{c(){h&&h.c(),e=Le(),r=ie("div"),n=ie("textarea"),i=Le(),a=ie("div"),o=ie("textarea"),s=Le(),b.c(),c=Rt(),this.h()},l(m){h&&h.l(m),e=Ue(m),r=ue(m,"DIV",{class:!0});var _=$(r);n=ue(_,"TEXTAREA",{class:!0,placeholder:!0}),$(n).forEach(k),_.forEach(k),i=Ue(m),a=ue(m,"DIV",{class:!0});var D=$(a);o=ue(D,"TEXTAREA",{class:!0,placeholder:!0}),$(o).forEach(k),D.forEach(k),s=Ue(m),b.l(m),c=Rt(),this.h()},h(){M(n,"class","textarea textarea-bordered w-full h-full"),M(n,"placeholder","GPT Directives"),M(r,"class","w-full p-2 h-1/2"),o.value=t[7],M(o,"class","textarea textarea-bordered w-full h-full"),M(o,"placeholder","Describe the prompt to generate."),M(a,"class","w-full p-2 h-1/5")},m(m,_){h&&h.m(m,_),be(m,e,_),be(m,r,_),j(r,n),Hn(n,t[4]),be(m,i,_),be(m,a,_),j(a,o),be(m,s,_),b.m(m,_),be(m,c,_),p||(f=[Oe(n,"input",t[17]),Oe(o,"input",t[18])],p=!0)},p(m,_){m[6]?h&&(h.d(1),h=null):h?h.p(m,_):(h=Ud(m),h.c(),h.m(e.parentNode,e)),_[0]&16&&Hn(n,m[4]),_[0]&128&&(o.value=m[7]),g===(g=d(m))&&b?b.p(m,_):(b.d(1),b=g(m),b&&(b.c(),b.m(c.parentNode,c)))},d(m){h&&h.d(m),m&&k(e),m&&k(r),m&&k(i),m&&k(a),m&&k(s),b.d(m),m&&k(c),p=!1,fr(f)}}}function Ud(t){let e,r,n,i,a,o,s;return{c(){e=ie("div"),r=ie("input"),n=Le(),i=ie("button"),a=We("Save"),this.h()},l(c){e=ue(c,"DIV",{class:!0});var p=$(e);r=ue(p,"INPUT",{type:!0,placeholder:!0,class:!0}),n=Ue(p),i=ue(p,"BUTTON",{class:!0});var f=$(i);a=He(f,"Save"),f.forEach(k),p.forEach(k),this.h()},h(){M(r,"type","text"),M(r,"placeholder","Name"),M(r,"class","input input-bordered input-sm w-full max-w-xs"),M(i,"class","btn btn-sm btn-primary ml-4"),M(e,"class","w-full p-2 h-12 flex justify-between")},m(c,p){be(c,e,p),j(e,r),Hn(r,t[3]),j(e,n),j(e,i),j(i,a),o||(s=[Oe(r,"input",t[16]),Oe(i,"click",t[9])],o=!0)},p(c,p){p[0]&8&&r.value!==c[3]&&Hn(r,c[3])},d(c){c&&k(e),o=!1,fr(s)}}}function G5(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!1,pending:Z5,then:Y5,catch:$5,value:29};return Fi(r=t[2],n),{c(){e=ie("div"),n.block.c(),this.h()},l(i){e=ue(i,"DIV",{class:!0});var a=$(e);n.block.l(a),a.forEach(k),this.h()},h(){M(e,"class","w-full p-2 h-12 flex justify-end")},m(i,a){be(i,e,a),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(i,a){t=i,n.ctx=t,a[0]&4&&r!==(r=t[2])&&Fi(r,n)||ks(n,t,a)},d(i){i&&k(e),n.block.d(),n.token=null,n=null}}}function K5(t){let e,r,n,i,a,o,s,c={ctx:t,current:null,token:null,hasCatch:!1,pending:Q5,then:J5,catch:X5,value:29};return Fi(a=t[2],c),{c(){e=ie("div"),r=ie("button"),n=We("Delete"),i=Le(),c.block.c(),this.h()},l(p){e=ue(p,"DIV",{class:!0});var f=$(e);r=ue(f,"BUTTON",{class:!0});var h=$(r);n=He(h,"Delete"),h.forEach(k),i=Ue(f),c.block.l(f),f.forEach(k),this.h()},h(){M(r,"class","btn btn-sm btn-error ml-4"),M(e,"class","w-full p-2 h-12 flex justify-between")},m(p,f){be(p,e,f),j(e,r),j(r,n),j(e,i),c.block.m(e,c.anchor=null),c.mount=()=>e,c.anchor=null,o||(s=Oe(r,"click",t[10]),o=!0)},p(p,f){t=p,c.ctx=t,f[0]&4&&a!==(a=t[2])&&Fi(a,c)||ks(c,t,f)},d(p){p&&k(e),c.block.d(),c.token=null,c=null,o=!1,s()}}}function $5(t){return{c:Me,l:Me,m:Me,p:Me,d:Me}}function Y5(t){let e,r,n,i;return{c(){e=ie("button"),r=We("Generate"),this.h()},l(a){e=ue(a,"BUTTON",{class:!0});var o=$(e);r=He(o,"Generate"),o.forEach(k),this.h()},h(){M(e,"class","btn btn-sm btn-primary ml-4")},m(a,o){be(a,e,o),j(e,r),n||(i=Oe(e,"click",t[12]),n=!0)},p:Me,d(a){a&&k(e),n=!1,i()}}}function Z5(t){let e,r,n,i;return{c(){e=ie("button"),r=We("Generating"),this.h()},l(a){e=ue(a,"BUTTON",{class:!0});var o=$(e);r=He(o,"Generating"),o.forEach(k),this.h()},h(){M(e,"class","btn btn-sm btn ml-4 disabled")},m(a,o){be(a,e,o),j(e,r),n||(i=Oe(e,"click",t[12]),n=!0)},p:Me,d(a){a&&k(e),n=!1,i()}}}function X5(t){return{c:Me,l:Me,m:Me,p:Me,d:Me}}function J5(t){let e,r,n,i;return{c(){e=ie("button"),r=We("Generate"),this.h()},l(a){e=ue(a,"BUTTON",{class:!0});var o=$(e);r=He(o,"Generate"),o.forEach(k),this.h()},h(){M(e,"class","btn btn-sm btn-primary ml-4")},m(a,o){be(a,e,o),j(e,r),n||(i=Oe(e,"click",t[12]),n=!0)},p:Me,d(a){a&&k(e),n=!1,i()}}}function Q5(t){let e,r,n,i;return{c(){e=ie("button"),r=We("Generating"),this.h()},l(a){e=ue(a,"BUTTON",{class:!0});var o=$(e);r=He(o,"Generating"),o.forEach(k),this.h()},h(){M(e,"class","btn btn-sm btn ml-4 disabled")},m(a,o){be(a,e,o),j(e,r),n||(i=Oe(e,"click",t[12]),n=!0)},p:Me,d(a){a&&k(e),n=!1,i()}}}function e8(t){let e;function r(a,o){return a[8]?H5:W5}let i=r(t)(t);return{c(){e=ie("div"),i.c(),this.h()},l(a){e=ue(a,"DIV",{class:!0});var o=$(e);i.l(o),o.forEach(k),this.h()},h(){M(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(a,o){be(a,e,o),i.m(e,null)},p(a,o){i.p(a,o)},i:Me,o:Me,d(a){a&&k(e),i.d()}}}function t8(t,e,r){let n,i,a,o,s,c,p,f,h,d;Dt(t,z5,V=>r(7,s=V)),Dt(t,Cr,V=>r(19,c=V)),Dt(t,j5,V=>r(14,p=V)),Dt(t,L5,V=>r(15,f=V)),Dt(t,c1,V=>r(20,h=V)),Dt(t,xf,V=>r(21,d=V));let g=d,b=h,m=null;const _=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001"];let D={C:{name:"Five Sentences",text:T5,builtIn:!0},D:{name:"Ten Sentences",text:x5,builtIn:!0},E:{name:"Fragments",text:I5,builtIn:!0},F:{name:"Concept Shotgun",text:k5,builtIn:!0},G:{name:"Poetic Accents",text:N5,builtIn:!0}},C=null,A="",B="";function E(){const V=C==="new"?a1():C;Ts.update(V,{name:A,text:B,builtIn:!1}),C==="new"&&r(0,C=V)}function O(){Ts.delete(C),r(0,C=null),r(3,A=""),r(4,B=""),xs.delete()}function P(V){r(0,C=V),xs.update(V),V&&V!=="new"?(r(3,A=i[V].name),r(4,B=i[V].text)):V==="new"&&(r(3,A=""),r(4,B=""))}function x(V){P(V.target.value)}function R(V,W){r(2,m=w3(V,W,b||"gpt-3.5-turbo")),m.then(Y=>{console.log(Y),Y.data.choices.forEach((J,le)=>{const me=of(J.message.content);console.log(me);const Ce=me.reduce((Ae,[Pe,Ve],Ie)=>(Ae[Ie]=Pr(Ie,Pe,Ve),Ae),{});Ot.update(Ai(Ce,c.weightMode)),Kn.update("edit")})})}function G(V,W){r(2,m=y3(V,W,b||"text-davinci-003")),m.then(Y=>{console.log(Y),Y.data.choices.forEach((J,le)=>{const me=of(J.text);console.log(me);const Ce=me.reduce((Ae,[Pe,Ve],Ie)=>(Ae[Ie]=Pr(Ie,Pe,Ve),Ae),{});Ot.update(Ai(Ce,c.weightMode)),Kn.update("edit")})})}function re(){if(!g||!B||!s)return;const V=Tf(g),W=`${B}

        Using the above rules create a prompt from:
        ${s}
        `;_.includes(b)?G(V,W):R(V,W)}function U(){A=this.value,r(3,A)}function X(){B=this.value,r(4,B)}const H=V=>hf.update(V.target.value);return t.$$.update=()=>{t.$$.dirty[0]&32768&&r(13,n=f.reduce((V,[W,Q])=>(V[W]={name:Q.name,text:Q.text,builtIn:!1},V),{})),t.$$.dirty[0]&8192&&r(1,i=Object.entries({...D,...n}).reduce((V,[W,Q])=>(V[W]=Q,V),{})),t.$$.dirty[0]&16385&&(C===null&&r(0,C=p),P(C)),t.$$.dirty[0]&3&&r(6,a=C&&C!=="new"&&i[C].builtIn),t.$$.dirty[0]&3&&r(5,o=C&&C!=="new"&&!i[C].builtIn)},[C,i,m,A,B,o,a,s,g,E,O,x,re,n,p,f,U,X,H]}class r8 extends wt{constructor(e){super(),At(this,e,t8,e8,Et,{},null,[-1,-1])}}function Vd(t,e,r){const n=t.slice();return n[18]=e[r],n}function jd(t,e,r){const n=t.slice();return n[18]=e[r],n}function n8(t){return{c:Me,l:Me,m:Me,p:Me,d:Me}}function i8(t){let e,r,n=t[0].length>0&&qd(t),i=t[1].length>0&&Wd(t);return{c(){n&&n.c(),e=Le(),i&&i.c(),r=Rt()},l(a){n&&n.l(a),e=Ue(a),i&&i.l(a),r=Rt()},m(a,o){n&&n.m(a,o),be(a,e,o),i&&i.m(a,o),be(a,r,o)},p(a,o){a[0].length>0?n?n.p(a,o):(n=qd(a),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),a[1].length>0?i?i.p(a,o):(i=Wd(a),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){n&&n.d(a),a&&k(e),i&&i.d(a),a&&k(r)}}}function qd(t){let e,r,n,i,a,o,s,c,p,f,h=[],d=new Map,g,b,m=t[0];const _=D=>D[18];for(let D=0;D<m.length;D+=1){let C=jd(t,m,D),A=_(C);d.set(A,h[D]=zd(A,C))}return{c(){e=ie("div"),r=ie("div"),n=ie("label"),i=ie("span"),a=We("Pick a model to use for model generation"),o=Le(),s=ie("select"),c=ie("option"),p=We("Pick one");for(let D=0;D<h.length;D+=1)h[D].c();this.h()},l(D){e=ue(D,"DIV",{class:!0});var C=$(e);r=ue(C,"DIV",{class:!0});var A=$(r);n=ue(A,"LABEL",{class:!0});var B=$(n);i=ue(B,"SPAN",{class:!0});var E=$(i);a=He(E,"Pick a model to use for model generation"),E.forEach(k),B.forEach(k),o=Ue(A),s=ue(A,"SELECT",{class:!0});var O=$(s);c=ue(O,"OPTION",{});var P=$(c);p=He(P,"Pick one"),P.forEach(k);for(let x=0;x<h.length;x+=1)h[x].l(O);O.forEach(k),A.forEach(k),C.forEach(k),this.h()},h(){M(i,"class","label-text"),M(n,"class","label"),c.disabled=!0,c.selected=f=t[2]===null,c.__value="Pick one",c.value=c.__value,M(s,"class","select select-bordered"),M(r,"class","form-control w-full max-w-xs mb-4"),M(e,"class","flex justify-center")},m(D,C){be(D,e,C),j(e,r),j(r,n),j(n,i),j(i,a),j(r,o),j(r,s),j(s,c),j(c,p);for(let A=0;A<h.length;A+=1)h[A]&&h[A].m(s,null);mu(s,t[2]),g||(b=Oe(s,"change",t[6]),g=!0)},p(D,C){C&5&&f!==(f=D[2]===null)&&(c.selected=f),C&5&&(m=D[0],h=Oi(h,C,_,1,D,m,d,s,bu,zd,null,jd)),C&5&&mu(s,D[2])},d(D){D&&k(e);for(let C=0;C<h.length;C+=1)h[C].d();g=!1,b()}}}function zd(t,e){let r,n=e[18]+"",i,a,o;return{key:t,first:null,c(){r=ie("option"),i=We(n),this.h()},l(s){r=ue(s,"OPTION",{});var c=$(r);i=He(c,n),c.forEach(k),this.h()},h(){r.__value=a=e[18],r.value=r.__value,r.selected=o=e[2]===e[18],this.first=r},m(s,c){be(s,r,c),j(r,i)},p(s,c){e=s,c&1&&n!==(n=e[18]+"")&&Cn(i,n),c&1&&a!==(a=e[18])&&(r.__value=a,r.value=r.__value),c&5&&o!==(o=e[2]===e[18])&&(r.selected=o)},d(s){s&&k(r)}}}function Wd(t){let e,r,n,i,a,o,s,c,p,f,h=[],d=new Map,g,b,m=t[1];const _=D=>D[18];for(let D=0;D<m.length;D+=1){let C=Vd(t,m,D),A=_(C);d.set(A,h[D]=Hd(A,C))}return{c(){e=ie("div"),r=ie("div"),n=ie("label"),i=ie("span"),a=We("Pick a model to use for prompt embedding"),o=Le(),s=ie("select"),c=ie("option"),p=We("Pick one");for(let D=0;D<h.length;D+=1)h[D].c();this.h()},l(D){e=ue(D,"DIV",{class:!0});var C=$(e);r=ue(C,"DIV",{class:!0});var A=$(r);n=ue(A,"LABEL",{class:!0});var B=$(n);i=ue(B,"SPAN",{class:!0});var E=$(i);a=He(E,"Pick a model to use for prompt embedding"),E.forEach(k),B.forEach(k),o=Ue(A),s=ue(A,"SELECT",{class:!0});var O=$(s);c=ue(O,"OPTION",{});var P=$(c);p=He(P,"Pick one"),P.forEach(k);for(let x=0;x<h.length;x+=1)h[x].l(O);O.forEach(k),A.forEach(k),C.forEach(k),this.h()},h(){M(i,"class","label-text"),M(n,"class","label"),c.disabled=!0,c.selected=f=t[3]===null,c.__value="Pick one",c.value=c.__value,M(s,"class","select select-bordered"),M(r,"class","form-control w-full max-w-xs mb-4"),M(e,"class","flex justify-center")},m(D,C){be(D,e,C),j(e,r),j(r,n),j(n,i),j(i,a),j(r,o),j(r,s),j(s,c),j(c,p);for(let A=0;A<h.length;A+=1)h[A]&&h[A].m(s,null);mu(s,t[3]),g||(b=Oe(s,"change",t[7]),g=!0)},p(D,C){C&10&&f!==(f=D[3]===null)&&(c.selected=f),C&10&&(m=D[1],h=Oi(h,C,_,1,D,m,d,s,bu,Hd,null,Vd)),C&10&&mu(s,D[3])},d(D){D&&k(e);for(let C=0;C<h.length;C+=1)h[C].d();g=!1,b()}}}function Hd(t,e){let r,n=e[18]+"",i,a,o;return{key:t,first:null,c(){r=ie("option"),i=We(n),this.h()},l(s){r=ue(s,"OPTION",{});var c=$(r);i=He(c,n),c.forEach(k),this.h()},h(){r.__value=a=e[18],r.value=r.__value,r.selected=o=e[3]===e[18],this.first=r},m(s,c){be(s,r,c),j(r,i)},p(s,c){e=s,c&2&&n!==(n=e[18]+"")&&Cn(i,n),c&2&&a!==(a=e[18])&&(r.__value=a,r.value=r.__value),c&10&&o!==(o=e[3]===e[18])&&(r.selected=o)},d(s){s&&k(r)}}}function u8(t){let e,r,n;return{c(){e=ie("div"),r=ie("div"),n=ie("progress"),this.h()},l(i){e=ue(i,"DIV",{class:!0});var a=$(e);r=ue(a,"DIV",{class:!0});var o=$(r);n=ue(o,"PROGRESS",{class:!0}),$(n).forEach(k),o.forEach(k),a.forEach(k),this.h()},h(){M(n,"class","progress progress-primary w-56"),M(r,"class","form-control w-full flex flex-col max-w-xs"),M(e,"class","py-10 flex justify-center")},m(i,a){be(i,e,a),j(e,r),j(r,n)},p:Me,d(i){i&&k(e)}}}function a8(t){let e,r,n,i,a,o,s,c,p,f,h,d,g,b,m,_,D={ctx:t,current:null,token:null,hasCatch:!1,pending:u8,then:i8,catch:n8,value:17};return Fi(b=t[4],D),{c(){e=ie("div"),r=ie("div"),n=ie("div"),i=ie("label"),a=ie("span"),o=We("Open AI Key"),s=Le(),c=ie("input"),p=Le(),f=ie("label"),h=ie("button"),d=We("Clear"),g=Le(),D.block.c(),this.h()},l(C){e=ue(C,"DIV",{class:!0});var A=$(e);r=ue(A,"DIV",{class:!0});var B=$(r);n=ue(B,"DIV",{class:!0});var E=$(n);i=ue(E,"LABEL",{class:!0});var O=$(i);a=ue(O,"SPAN",{class:!0});var P=$(a);o=He(P,"Open AI Key"),P.forEach(k),O.forEach(k),s=Ue(E),c=ue(E,"INPUT",{type:!0,placeholder:!0,class:!0}),p=Ue(E),f=ue(E,"LABEL",{class:!0});var x=$(f);h=ue(x,"BUTTON",{class:!0});var R=$(h);d=He(R,"Clear"),R.forEach(k),x.forEach(k),E.forEach(k),B.forEach(k),g=Ue(A),D.block.l(A),A.forEach(k),this.h()},h(){M(a,"class","label-text-alt"),M(i,"class","label"),c.value=t[5],M(c,"type","password"),M(c,"placeholder","Open AI Key"),M(c,"class","input input-bordered w-full max-w-xs"),M(h,"class","btn btn-xs btn-error"),M(f,"class","label"),M(n,"class","form-control w-full max-w-xs"),M(r,"class","flex justify-center"),M(e,"class","h-full p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(C,A){be(C,e,A),j(e,r),j(r,n),j(n,i),j(i,a),j(a,o),j(n,s),j(n,c),j(n,p),j(n,f),j(f,h),j(h,d),j(e,g),D.block.m(e,D.anchor=null),D.mount=()=>e,D.anchor=null,m||(_=[Oe(c,"input",t[8]),Oe(h,"click",t[9])],m=!0)},p(C,[A]){t=C,A&32&&c.value!==t[5]&&(c.value=t[5]),D.ctx=t,A&16&&b!==(b=t[4])&&Fi(b,D)||ks(D,t,A)},i:Me,o:Me,d(C){C&&k(e),D.block.d(),D.token=null,D=null,m=!1,fr(_)}}}function s8(t,e,r){let n,i,a,o;Dt(t,Cr,B=>r(11,n=B)),Dt(t,i1,B=>r(12,i=B)),Dt(t,c1,B=>r(13,a=B)),Dt(t,xf,B=>r(5,o=B));const s=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001","gpt-3.5-turbo","gpt-3.5-turbo-0301"],c=["text-embedding-ada-002"];let p=o,f=[],h=[],d=a,g=i,b=null;async function m(B){if(!B||f.length&&h.length)return;const E=Tf(B);r(4,b=E3(E));const O=await b;O.data&&r(0,f=O.data.data.map(({id:P})=>P).filter(P=>s.includes(P))),r(1,h=O.data.data.map(({id:P})=>P).filter(P=>c.includes(P)))}function _(B){r(2,d=B.target.value),cf.update(d)}function D(B){r(3,g=B.target.value),uf.update(g)}function C(B){const E=B.target.value;Os.update(E),E.length===51&&m(E),E.length===0&&A()}function A(){Os.delete(),r(10,p=""),r(0,f=[]),r(1,h=[]),n.weightMode===dt.Embed&&Ot.update({...n,weightMode:dt.Circle})}return t.$$.update=()=>{t.$$.dirty&1024&&m(p)},[f,h,d,g,b,o,_,D,C,A,p]}class o8 extends wt{constructor(e){super(),At(this,e,s8,a8,Et,{})}}function l8(t){let e,r;return e=new o8({}),{c(){tt(e.$$.fragment)},l(n){rt(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},i(n){r||(we(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){it(e,n)}}}function f8(t){let e,r;return e=new r8({}),{c(){tt(e.$$.fragment)},l(n){rt(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},i(n){r||(we(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){it(e,n)}}}function c8(t){let e,r;return e=new P5({}),{c(){tt(e.$$.fragment)},l(n){rt(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},i(n){r||(we(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){it(e,n)}}}function h8(t){let e,r;return e=new FS({}),{c(){tt(e.$$.fragment)},l(n){rt(e.$$.fragment,n)},m(n,i){nt(e,n,i),r=!0},i(n){r||(we(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){it(e,n)}}}function d8(t){let e,r,n,i,a,o,s,c,p,f,h,d,g,b,m,_,D,C,A,B,E,O,P,x;const R=[h8,c8,f8,l8],G=[];function re(U,X){return U[0]==="select"?0:U[0]==="edit"?1:U[0]==="generate"?2:U[0]==="settings"?3:-1}return~(B=re(t))&&(E=G[B]=R[B](t)),{c(){e=ie("div"),r=ie("div"),n=ie("div"),i=ie("button"),a=We("Select"),s=Le(),c=ie("button"),p=We("Edit"),h=Le(),d=ie("button"),g=We("Generate"),m=Le(),_=ie("button"),D=We("Settings"),A=Le(),E&&E.c(),this.h()},l(U){e=ue(U,"DIV",{class:!0});var X=$(e);r=ue(X,"DIV",{class:!0});var H=$(r);n=ue(H,"DIV",{class:!0});var V=$(n);i=ue(V,"BUTTON",{class:!0});var W=$(i);a=He(W,"Select"),W.forEach(k),s=Ue(V),c=ue(V,"BUTTON",{class:!0});var Q=$(c);p=He(Q,"Edit"),Q.forEach(k),h=Ue(V),d=ue(V,"BUTTON",{class:!0});var Y=$(d);g=He(Y,"Generate"),Y.forEach(k),m=Ue(V),_=ue(V,"BUTTON",{class:!0});var J=$(_);D=He(J,"Settings"),J.forEach(k),V.forEach(k),A=Ue(H),E&&E.l(H),H.forEach(k),X.forEach(k),this.h()},h(){M(i,"class",o=t[0]==="select"?"btn btn-active":"btn"),M(c,"class",f=t[0]==="edit"?"btn btn-active":"btn"),M(d,"class",b=t[0]==="generate"?"btn btn-active":"btn"),M(_,"class",C=t[0]==="settings"?"btn btn-active":"btn"),M(n,"class","btn-group btn-group-vertical sm:btn-group-horizontal bg-base-100 w-full flex justify-center p-2"),M(r,"class","h-screen overflow-y-auto flex flex-col"),M(e,"class","max-w-md w-1/2 h-screen overflow-y-auto")},m(U,X){be(U,e,X),j(e,r),j(r,n),j(n,i),j(i,a),j(n,s),j(n,c),j(c,p),j(n,h),j(n,d),j(d,g),j(n,m),j(n,_),j(_,D),j(r,A),~B&&G[B].m(r,null),O=!0,P||(x=[Oe(i,"click",t[2]),Oe(c,"click",t[3]),Oe(d,"click",t[4]),Oe(_,"click",t[5])],P=!0)},p(U,[X]){(!O||X&1&&o!==(o=U[0]==="select"?"btn btn-active":"btn"))&&M(i,"class",o),(!O||X&1&&f!==(f=U[0]==="edit"?"btn btn-active":"btn"))&&M(c,"class",f),(!O||X&1&&b!==(b=U[0]==="generate"?"btn btn-active":"btn"))&&M(d,"class",b),(!O||X&1&&C!==(C=U[0]==="settings"?"btn btn-active":"btn"))&&M(_,"class",C);let H=B;B=re(U),B!==H&&(E&&(Nr(),Se(G[H],1,1,()=>{G[H]=null}),Rr()),~B?(E=G[B],E||(E=G[B]=R[B](U),E.c()),we(E,1),E.m(r,null)):E=null)},i(U){O||(we(E),O=!0)},o(U){Se(E),O=!1},d(U){U&&k(e),~B&&G[B].d(),P=!1,fr(x)}}}function p8(t,e,r){let n;Dt(t,AS,p=>r(0,n=p));function i(p){Kn.update(p)}const a=()=>i("select"),o=()=>i("edit"),s=()=>i("generate"),c=()=>i("settings");return t.$$.update=()=>{t.$$.dirty&1&&(n||Kn.update("select"))},[n,i,a,o,s,c]}class g8 extends wt{constructor(e){super(),At(this,e,p8,d8,Et,{})}}function v8(t){let e,r,n,i;return e=new g8({}),n=new DS({}),{c(){tt(e.$$.fragment),r=Le(),tt(n.$$.fragment)},l(a){rt(e.$$.fragment,a),r=Ue(a),rt(n.$$.fragment,a)},m(a,o){nt(e,a,o),be(a,r,o),nt(n,a,o),i=!0},p:Me,i(a){i||(we(e.$$.fragment,a),we(n.$$.fragment,a),i=!0)},o(a){Se(e.$$.fragment,a),Se(n.$$.fragment,a),i=!1},d(a){it(e,a),a&&k(r),it(n,a)}}}class D8 extends wt{constructor(e){super(),At(this,e,null,v8,Et,{})}}export{D8 as default};
