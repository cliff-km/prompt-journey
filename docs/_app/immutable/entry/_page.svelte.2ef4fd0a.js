import{J as bt,S as at,i as ut,s as st,k as Y,q as ke,a as Me,l as Z,m as H,r as Ie,h as k,c as Pe,n as O,K as Ft,b as fe,G as L,L as be,H as Se,M as rr,I as tt,N as vt,O as gt,y as ze,z as We,A as He,g as _e,d as we,B as $e,p as Yt,u as Fr,v as pr,f as vr,e as Tt,P as pu,Q as Zi,R as vu,T as nn,U as Cp,V as Si,W as Un,X as Fp,Y as Yy,Z as bs,_ as Sp,$ as hi,a0 as Pi,a1 as Zy}from"../chunks/index.58e9e286.js";import{d as jr,w as Sr}from"../chunks/index.05e4a026.js";function sf(){return sf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sf.apply(this,arguments)}var Bp={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function tr(t){return typeof t=="number"}function Bn(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function Op(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function Mp(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Pp(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Gn(t){return typeof t=="string"}var Xt=Array.isArray;function Jr(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Ds(t){return Array.isArray(t)||Jr(t)}function Jy(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Qy(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Xy(t){return t&&t.constructor.prototype.isRange===!0||!1}function Tf(t){return t&&t.constructor.prototype.isIndex===!0||!1}function ew(t){return typeof t=="boolean"}function tw(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function rw(t){return t&&t.constructor.prototype.isHelp===!0||!1}function nw(t){return typeof t=="function"}function iw(t){return t instanceof Date}function aw(t){return t instanceof RegExp}function uw(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!Op(t)&&!Mp(t))}function sw(t){return t===null}function kf(t){return t===void 0}function ow(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function lw(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function fw(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function cw(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function hw(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function dw(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function pw(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function vw(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function gw(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function mw(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function _w(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function bw(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Dw(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function yw(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function ww(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Aw(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ew(t){return t&&t.constructor.prototype.isChain===!0||!1}function uu(t){var e=typeof t;return e==="object"?t===null?"null":Bn(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Er(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return Er(r)});if(t instanceof Date)return new Date(t.valueOf());if(Bn(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return Cw(t,Er)}function Cw(t,e){var r={};for(var n in t)ou(t,n)&&(r[n]=e(t[n]));return r}function Fw(t,e){for(var r in e)ou(e,r)&&(t[r]=e[r]);return t}function ys(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!ys(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!ys(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function ou(t,e){return t&&Object.hasOwnProperty.call(t,e)}function Sw(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],a=t[i];a!==void 0&&(r[i]=a)}return r}var Bw=["Matrix","Array"],Ow=["number","BigNumber","Fraction"],Ys=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Bp)};sf(Ys,Bp,{MATRIX_OPTIONS:Bw,NUMBER_OPTIONS:Ow});function Nn(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Mw(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,s=!1,o;return{s:function(){r=r.call(t)},n:function(){var p=r.next();return a=p.done,p},e:function(p){s=!0,o=p},f:function(){try{!a&&r.return!=null&&r.return()}finally{if(s)throw o}}}}function Mw(t,e){if(t){if(typeof t=="string")return d0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d0(t,e)}}function d0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ba(t){return ba=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ba(t)}function p0(){return!0}function Sn(){return!1}function va(){}var v0="Argument is not a typed-function.";function Tp(){function t(W){return ba(W)==="object"&&W!==null&&W.constructor===Object}var e=[{name:"number",test:function(G){return typeof G=="number"}},{name:"string",test:function(G){return typeof G=="string"}},{name:"boolean",test:function(G){return typeof G=="boolean"}},{name:"Function",test:function(G){return typeof G=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(G){return G instanceof Date}},{name:"RegExp",test:function(G){return G instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(G){return G===null}},{name:"undefined",test:function(G){return G===void 0}}],r={name:"any",test:p0,isAny:!0},n,i,a=0,s={createCount:0};function o(W){var G=n.get(W);if(G)return G;var ee='Unknown type "'+W+'"',le=W.toLowerCase(),ie,de=Nn(i),ue;try{for(de.s();!(ue=de.n()).done;)if(ie=ue.value,ie.toLowerCase()===le){ee+='. Did you mean "'+ie+'" ?';break}}catch(ce){de.e(ce)}finally{de.f()}throw new TypeError(ee)}function f(W){for(var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",ee=G?o(G).index:i.length,le=[],ie=0;ie<W.length;++ie){if(!W[ie]||typeof W[ie].name!="string"||typeof W[ie].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var de=W[ie].name;if(n.has(de))throw new TypeError('Duplicate type name "'+de+'"');le.push(de),n.set(de,{name:de,test:W[ie].test,isAny:W[ie].isAny,index:ee+ie,conversionsTo:[]})}var ue=i.slice(ee);i=i.slice(0,ee).concat(le).concat(ue);for(var ce=ee+le.length;ce<i.length;++ce)n.get(i[ce]).index=ce}function p(){n=new Map,i=[],a=0,f([r],!1)}p(),f(e);function c(){var W,G=Nn(i),ee;try{for(G.s();!(ee=G.n()).done;)W=ee.value,n.get(W).conversionsTo=[]}catch(le){G.e(le)}finally{G.f()}a=0}function h(W){var G=i.filter(function(ee){var le=n.get(ee);return!le.isAny&&le.test(W)});return G.length?G:["any"]}function d(W){return W&&typeof W=="function"&&"_typedFunctionData"in W}function g(W,G,ee){if(!d(W))throw new TypeError(v0);var le=ee&&ee.exact,ie=Array.isArray(G)?G.join(","):G,de=C(ie),ue=_(de);if(!le||ue in W.signatures){var ce=W._typedFunctionData.signatureMap.get(ue);if(ce)return ce}var Ae=de.length,Re;if(le){Re=[];var Qe;for(Qe in W.signatures)Re.push(W._typedFunctionData.signatureMap.get(Qe))}else Re=W._typedFunctionData.signatures;for(var Oe=0;Oe<Ae;++Oe){var zt=de[Oe],Rt=[],nr=void 0,Zt=Nn(Re),Dr;try{for(Zt.s();!(Dr=Zt.n()).done;){nr=Dr.value;var Jt=B(nr.params,Oe);if(!(!Jt||zt.restParam&&!Jt.restParam)){if(!Jt.hasAny){var yr=function(){var gr=E(Jt);if(zt.types.some(function(On){return!gr.has(On.name)}))return"continue"}();if(yr==="continue")continue}Rt.push(nr)}}}catch(gr){Zt.e(gr)}finally{Zt.f()}if(Re=Rt,Re.length===0)break}var cr,hr=Nn(Re),gn;try{for(hr.s();!(gn=hr.n()).done;)if(cr=gn.value,cr.params.length<=Ae)return cr}catch(gr){hr.e(gr)}finally{hr.f()}throw new TypeError("Signature not found (signature: "+(W.name||"unnamed")+"("+_(de,", ")+"))")}function b(W,G,ee){return g(W,G,ee).implementation}function v(W,G){var ee=o(G);if(ee.test(W))return W;var le=ee.conversionsTo;if(le.length===0)throw new Error("There are no conversions to "+G+" defined.");for(var ie=0;ie<le.length;ie++){var de=o(le[ie].from);if(de.test(W))return le[ie].convert(W)}throw new Error("Cannot convert "+W+" to "+G)}function _(W){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return W.map(function(ee){return ee.name}).join(G)}function D(W){var G=W.indexOf("...")===0,ee=G?W.length>3?W.slice(3):"any":W,le=ee.split("|").map(function(ce){return o(ce.trim())}),ie=!1,de=G?"...":"",ue=le.map(function(ce){return ie=ce.isAny||ie,de+=ce.name+"|",{name:ce.name,typeIndex:ce.index,test:ce.test,isAny:ce.isAny,conversion:null,conversionIndex:-1}});return{types:ue,name:de.slice(0,-1),hasAny:ie,hasConversion:!1,restParam:G}}function F(W){var G=W.types.map(function(ue){return ue.name}),ee=Q(G),le=W.hasAny,ie=W.name,de=ee.map(function(ue){var ce=o(ue.from);return le=ce.isAny||le,ie+="|"+ue.from,{name:ue.from,typeIndex:ce.index,test:ce.test,isAny:ce.isAny,conversion:ue,conversionIndex:ue.index}});return{types:W.types.concat(de),name:ie,hasAny:le,hasConversion:de.length>0,restParam:W.restParam}}function E(W){return W.typeSet||(W.typeSet=new Set,W.types.forEach(function(G){return W.typeSet.add(G.name)})),W.typeSet}function C(W){var G=[];if(typeof W!="string")throw new TypeError("Signatures must be strings");var ee=W.trim();if(ee==="")return G;for(var le=ee.split(","),ie=0;ie<le.length;++ie){var de=D(le[ie].trim());if(de.restParam&&ie!==le.length-1)throw new SyntaxError('Unexpected rest parameter "'+le[ie]+'": only allowed for the last parameter');if(de.types.length===0)return null;G.push(de)}return G}function A(W){var G=rt(W);return G?G.restParam:!1}function S(W){if(!W||W.types.length===0)return p0;if(W.types.length===1)return o(W.types[0].name).test;if(W.types.length===2){var G=o(W.types[0].name).test,ee=o(W.types[1].name).test;return function(de){return G(de)||ee(de)}}else{var le=W.types.map(function(ie){return o(ie.name).test});return function(de){for(var ue=0;ue<le.length;ue++)if(le[ue](de))return!0;return!1}}}function P(W){var G,ee,le;if(A(W)){G=Dt(W).map(S);var ie=G.length,de=S(rt(W)),ue=function(Ae){for(var Re=ie;Re<Ae.length;Re++)if(!de(Ae[Re]))return!1;return!0};return function(Ae){for(var Re=0;Re<G.length;Re++)if(!G[Re](Ae[Re]))return!1;return ue(Ae)&&Ae.length>=ie+1}}else return W.length===0?function(Ae){return Ae.length===0}:W.length===1?(ee=S(W[0]),function(Ae){return ee(Ae[0])&&Ae.length===1}):W.length===2?(ee=S(W[0]),le=S(W[1]),function(Ae){return ee(Ae[0])&&le(Ae[1])&&Ae.length===2}):(G=W.map(S),function(Ae){for(var Re=0;Re<G.length;Re++)if(!G[Re](Ae[Re]))return!1;return Ae.length===G.length})}function B(W,G){return G<W.length?W[G]:A(W)?rt(W):null}function N(W,G){var ee=B(W,G);return ee?E(ee):new Set}function q(W){return W.conversion===null||W.conversion===void 0}function X(W,G){var ee=new Set;return W.forEach(function(le){var ie=N(le.params,G),de,ue=Nn(ie),ce;try{for(ue.s();!(ce=ue.n()).done;)de=ce.value,ee.add(de)}catch(Ae){ue.e(Ae)}finally{ue.f()}}),ee.has("any")?["any"]:Array.from(ee)}function K(W,G,ee){var le,ie,de=W||"unnamed",ue=ee,ce,Ae=function(){var Zt=[];if(ue.forEach(function(Jt){var yr=B(Jt.params,ce),cr=S(yr);(ce<Jt.params.length||A(Jt.params))&&cr(G[ce])&&Zt.push(Jt)}),Zt.length===0){if(ie=X(ue,ce),ie.length>0){var Dr=h(G[ce]);return le=new TypeError("Unexpected type of argument in function "+de+" (expected: "+ie.join(" or ")+", actual: "+Dr.join(" | ")+", index: "+ce+")"),le.data={category:"wrongType",fn:de,index:ce,actual:Dr,expected:ie},{v:le}}}else ue=Zt};for(ce=0;ce<G.length;ce++){var Re=Ae();if(ba(Re)==="object")return Re.v}var Qe=ue.map(function(nr){return A(nr.params)?1/0:nr.params.length});if(G.length<Math.min.apply(null,Qe))return ie=X(ue,ce),le=new TypeError("Too few arguments in function "+de+" (expected: "+ie.join(" or ")+", index: "+G.length+")"),le.data={category:"tooFewArgs",fn:de,index:G.length,expected:ie},le;var Oe=Math.max.apply(null,Qe);if(G.length>Oe)return le=new TypeError("Too many arguments in function "+de+" (expected: "+Oe+", actual: "+G.length+")"),le.data={category:"tooManyArgs",fn:de,index:G.length,expectedLength:Oe},le;for(var zt=[],Rt=0;Rt<G.length;++Rt)zt.push(h(G[Rt]).join("|"));return le=new TypeError('Arguments of type "'+zt.join(", ")+'" do not match any of the defined signatures of function '+de+"."),le.data={category:"mismatch",actual:zt},le}function U(W){for(var G=i.length+1,ee=0;ee<W.types.length;ee++)q(W.types[ee])&&(G=Math.min(G,W.types[ee].typeIndex));return G}function R(W){for(var G=a+1,ee=0;ee<W.types.length;ee++)q(W.types[ee])||(G=Math.min(G,W.types[ee].conversionIndex));return G}function z(W,G){if(W.hasAny){if(!G.hasAny)return 1}else if(G.hasAny)return-1;if(W.restParam){if(!G.restParam)return 1}else if(G.restParam)return-1;if(W.hasConversion){if(!G.hasConversion)return 1}else if(G.hasConversion)return-1;var ee=U(W)-U(G);if(ee<0)return-1;if(ee>0)return 1;var le=R(W)-R(G);return le<0?-1:le>0?1:0}function V(W,G){var ee=W.params,le=G.params,ie=rt(ee),de=rt(le),ue=A(ee),ce=A(le);if(ue&&ie.hasAny){if(!ce||!de.hasAny)return 1}else if(ce&&de.hasAny)return-1;var Ae=0,Re=0,Qe,Oe=Nn(ee),zt;try{for(Oe.s();!(zt=Oe.n()).done;)Qe=zt.value,Qe.hasAny&&++Ae,Qe.hasConversion&&++Re}catch(Vn){Oe.e(Vn)}finally{Oe.f()}var Rt=0,nr=0,Zt=Nn(le),Dr;try{for(Zt.s();!(Dr=Zt.n()).done;)Qe=Dr.value,Qe.hasAny&&++Rt,Qe.hasConversion&&++nr}catch(Vn){Zt.e(Vn)}finally{Zt.f()}if(Ae!==Rt)return Ae-Rt;if(ue&&ie.hasConversion){if(!ce||!de.hasConversion)return 1}else if(ce&&de.hasConversion)return-1;if(Re!==nr)return Re-nr;if(ue){if(!ce)return 1}else if(ce)return-1;var Jt=(ee.length-le.length)*(ue?-1:1);if(Jt!==0)return Jt;for(var yr=[],cr=0,hr=0;hr<ee.length;++hr){var gn=z(ee[hr],le[hr]);yr.push(gn),cr+=gn}if(cr!==0)return cr;for(var gr,On=0,Qn=yr;On<Qn.length;On++)if(gr=Qn[On],gr!==0)return gr;return 0}function Q(W){if(W.length===0)return[];var G=W.map(o);W.length>1&&G.sort(function(Ae,Re){return Ae.index-Re.index});var ee=G[0].conversionsTo;if(W.length===1)return ee;ee=ee.concat([]);for(var le=new Set(W),ie=1;ie<G.length;++ie){var de=void 0,ue=Nn(G[ie].conversionsTo),ce;try{for(ue.s();!(ce=ue.n()).done;)de=ce.value,le.has(de.from)||(ee.push(de),le.add(de.from))}catch(Ae){ue.e(Ae)}finally{ue.f()}}return ee}function ae(W,G){var ee=G;if(W.some(function(ce){return ce.hasConversion})){var le=A(W),ie=W.map(se);ee=function(){for(var Ae=[],Re=le?arguments.length-1:arguments.length,Qe=0;Qe<Re;Qe++)Ae[Qe]=ie[Qe](arguments[Qe]);return le&&(Ae[Re]=arguments[Re].map(ie[Re])),G.apply(this,Ae)}}var de=ee;if(A(W)){var ue=W.length-1;de=function(){return ee.apply(this,it(arguments,0,ue).concat([it(arguments,ue)]))}}return de}function se(W){var G,ee,le,ie,de=[],ue=[];switch(W.types.forEach(function(ce){ce.conversion&&(de.push(o(ce.conversion.from).test),ue.push(ce.conversion.convert))}),ue.length){case 0:return function(Ae){return Ae};case 1:return G=de[0],le=ue[0],function(Ae){return G(Ae)?le(Ae):Ae};case 2:return G=de[0],ee=de[1],le=ue[0],ie=ue[1],function(Ae){return G(Ae)?le(Ae):ee(Ae)?ie(Ae):Ae};default:return function(Ae){for(var Re=0;Re<ue.length;Re++)if(de[Re](Ae))return ue[Re](Ae);return Ae}}}function he(W){function G(ee,le,ie){if(le<ee.length){var de=ee[le],ue=[];if(de.restParam){var ce=de.types.filter(q);ce.length<de.types.length&&ue.push({types:ce,name:"..."+ce.map(function(Ae){return Ae.name}).join("|"),hasAny:ce.some(function(Ae){return Ae.isAny}),hasConversion:!1,restParam:!0}),ue.push(de)}else ue=de.types.map(function(Ae){return{types:[Ae],name:Ae.name,hasAny:Ae.isAny,hasConversion:Ae.conversion,restParam:!1}});return nt(ue,function(Ae){return G(ee,le+1,ie.concat([Ae]))})}else return[ie]}return G(W,0,[])}function Ce(W,G){for(var ee=Math.max(W.length,G.length),le=0;le<ee;le++){var ie=N(W,le),de=N(G,le),ue=!1,ce=void 0,Ae=Nn(de),Re;try{for(Ae.s();!(Re=Ae.n()).done;)if(ce=Re.value,ie.has(ce)){ue=!0;break}}catch(nr){Ae.e(nr)}finally{Ae.f()}if(!ue)return!1}var Qe=W.length,Oe=G.length,zt=A(W),Rt=A(G);return zt?Rt?Qe===Oe:Oe>=Qe:Rt?Qe>=Oe:Qe===Oe}function Be(W){return W.map(function(G){return Ye(G)?ft(G.referToSelf.callback):Ke(G)?lt(G.referTo.references,G.referTo.callback):G})}function Fe(W,G,ee){var le=[],ie,de=Nn(W),ue;try{for(de.s();!(ue=de.n()).done;){ie=ue.value;var ce=ee[ie];if(typeof ce!="number")throw new TypeError('No definition for referenced signature "'+ie+'"');if(ce=G[ce],typeof ce!="function")return!1;le.push(ce)}}catch(Ae){de.e(Ae)}finally{de.f()}return le}function je(W,G,ee){for(var le=Be(W),ie=new Array(le.length).fill(!1),de=!0;de;){de=!1;for(var ue=!0,ce=0;ce<le.length;++ce)if(!ie[ce]){var Ae=le[ce];if(Ye(Ae))le[ce]=Ae.referToSelf.callback(ee),le[ce].referToSelf=Ae.referToSelf,ie[ce]=!0,ue=!1;else if(Ke(Ae)){var Re=Fe(Ae.referTo.references,le,G);Re?(le[ce]=Ae.referTo.callback.apply(this,Re),le[ce].referTo=Ae.referTo,ie[ce]=!0,ue=!1):de=!0}}if(ue&&de)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return le}function Ue(W){var G=/\bthis(\(|\.signatures\b)/;Object.keys(W).forEach(function(ee){var le=W[ee];if(G.test(le.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Ve(W,G){if(s.createCount++,Object.keys(G).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&Ue(G);var ee=[],le=[],ie={},de=[],ue,ce=function(){if(!Object.prototype.hasOwnProperty.call(G,ue))return"continue";var sr=C(ue);if(!sr)return"continue";ee.forEach(function(_n){if(Ce(_n,sr))throw new TypeError('Conflicting signatures "'+_(_n)+'" and "'+_(sr)+'".')}),ee.push(sr);var Gr=le.length;le.push(G[ue]);var Li=sr.map(F),ei=void 0,zn=Nn(he(Li)),Ui;try{for(zn.s();!(Ui=zn.n()).done;){ei=Ui.value;var Mn=_(ei);de.push({params:ei,name:Mn,fn:Gr}),ei.every(function(_n){return!_n.hasConversion})&&(ie[Mn]=Gr)}}catch(_n){zn.e(_n)}finally{zn.f()}};for(ue in G)var Ae=ce();de.sort(V);var Re=je(le,ie,qn),Qe;for(Qe in ie)Object.prototype.hasOwnProperty.call(ie,Qe)&&(ie[Qe]=Re[ie[Qe]]);for(var Oe=[],zt=new Map,Rt=0,nr=de;Rt<nr.length;Rt++)Qe=nr[Rt],zt.has(Qe.name)||(Qe.fn=Re[Qe.fn],Oe.push(Qe),zt.set(Qe.name,Qe));for(var Zt=Oe[0]&&Oe[0].params.length<=2&&!A(Oe[0].params),Dr=Oe[1]&&Oe[1].params.length<=2&&!A(Oe[1].params),Jt=Oe[2]&&Oe[2].params.length<=2&&!A(Oe[2].params),yr=Oe[3]&&Oe[3].params.length<=2&&!A(Oe[3].params),cr=Oe[4]&&Oe[4].params.length<=2&&!A(Oe[4].params),hr=Oe[5]&&Oe[5].params.length<=2&&!A(Oe[5].params),gn=Zt&&Dr&&Jt&&yr&&cr&&hr,gr=0;gr<Oe.length;++gr)Oe[gr].test=P(Oe[gr].params);for(var On=Zt?S(Oe[0].params[0]):Sn,Qn=Dr?S(Oe[1].params[0]):Sn,Vn=Jt?S(Oe[2].params[0]):Sn,jn=yr?S(Oe[3].params[0]):Sn,Qi=cr?S(Oe[4].params[0]):Sn,xi=hr?S(Oe[5].params[0]):Sn,Ba=Zt?S(Oe[0].params[1]):Sn,Or=Dr?S(Oe[1].params[1]):Sn,ir=Jt?S(Oe[2].params[1]):Sn,Oa=yr?S(Oe[3].params[1]):Sn,di=cr?S(Oe[4].params[1]):Sn,mn=hr?S(Oe[5].params[1]):Sn,Xn=0;Xn<Oe.length;++Xn)Oe[Xn].implementation=ae(Oe[Xn].params,Oe[Xn].fn);var Ri=Zt?Oe[0].implementation:va,Ma=Dr?Oe[1].implementation:va,Pa=Jt?Oe[2].implementation:va,Xi=yr?Oe[3].implementation:va,Ta=cr?Oe[4].implementation:va,ka=hr?Oe[5].implementation:va,Ia=Zt?Oe[0].params.length:-1,Na=Dr?Oe[1].params.length:-1,xa=Jt?Oe[2].params.length:-1,Ra=yr?Oe[3].params.length:-1,pi=cr?Oe[4].params.length:-1,La=hr?Oe[5].params.length:-1,vi=gn?6:0,Ua=Oe.length,Va=Oe.map(function(wr){return wr.test}),ja=Oe.map(function(wr){return wr.implementation}),ea=function(){for(var sr=vi;sr<Ua;sr++)if(Va[sr](arguments))return ja[sr].apply(this,arguments);return s.onMismatch(W,arguments,Oe)};function qn(wr,sr){return arguments.length===Ia&&On(wr)&&Ba(sr)?Ri.apply(this,arguments):arguments.length===Na&&Qn(wr)&&Or(sr)?Ma.apply(this,arguments):arguments.length===xa&&Vn(wr)&&ir(sr)?Pa.apply(this,arguments):arguments.length===Ra&&jn(wr)&&Oa(sr)?Xi.apply(this,arguments):arguments.length===pi&&Qi(wr)&&di(sr)?Ta.apply(this,arguments):arguments.length===La&&xi(wr)&&mn(sr)?ka.apply(this,arguments):ea.apply(this,arguments)}try{Object.defineProperty(qn,"name",{value:W})}catch{}return qn.signatures=ie,qn._typedFunctionData={signatures:Oe,signatureMap:zt},qn}function ot(W,G,ee){throw K(W,G,ee)}function Dt(W){return it(W,0,W.length-1)}function rt(W){return W[W.length-1]}function it(W,G,ee){return Array.prototype.slice.call(W,G,ee)}function St(W,G){for(var ee=0;ee<W.length;ee++)if(G(W[ee]))return W[ee]}function nt(W,G){return Array.prototype.concat.apply([],W.map(G))}function ht(){var W=Dt(arguments).map(function(ee){return _(C(ee))}),G=rt(arguments);if(typeof G!="function")throw new TypeError("Callback function expected as last argument");return lt(W,G)}function lt(W,G){return{referTo:{references:W,callback:G}}}function ft(W){if(typeof W!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:W}}}function Ke(W){return W&&ba(W.referTo)==="object"&&Array.isArray(W.referTo.references)&&typeof W.referTo.callback=="function"}function Ye(W){return W&&ba(W.referToSelf)==="object"&&typeof W.referToSelf.callback=="function"}function Ee(W,G){if(!W)return G;if(G&&G!==W){var ee=new Error("Function names do not match (expected: "+W+", actual: "+G+")");throw ee.data={actual:G,expected:W},ee}return W}function Ne(W){var G;for(var ee in W)Object.prototype.hasOwnProperty.call(W,ee)&&(d(W[ee])||typeof W[ee].signature=="string")&&(G=Ee(G,W[ee].name));return G}function Mt(W,G){var ee;for(ee in G)if(Object.prototype.hasOwnProperty.call(G,ee)){if(ee in W&&G[ee]!==W[ee]){var le=new Error('Signature "'+ee+'" is defined twice');throw le.data={signature:ee,sourceFunction:G[ee],destFunction:W[ee]},le}W[ee]=G[ee]}}var Vt=s;s=function(G){for(var ee=typeof G=="string",le=ee?1:0,ie=ee?G:"",de={},ue=le;ue<arguments.length;++ue){var ce=arguments[ue],Ae={},Re=void 0;if(typeof ce=="function"?(Re=ce.name,typeof ce.signature=="string"?Ae[ce.signature]=ce:d(ce)&&(Ae=ce.signatures)):t(ce)&&(Ae=ce,ee||(Re=Ne(ce))),Object.keys(Ae).length===0){var Qe=new TypeError("Argument to 'typed' at index "+ue+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Qe.data={index:ue,argument:ce},Qe}ee||(ie=Ee(ie,Re)),Mt(de,Ae)}return Ve(ie||"",de)},s.create=Tp,s.createCount=Vt.createCount,s.onMismatch=ot,s.throwMismatchError=ot,s.createError=K,s.clear=p,s.clearConversions=c,s.addTypes=f,s._findType=o,s.referTo=ht,s.referToSelf=ft,s.convert=v,s.findSignature=g,s.find=b,s.isTypedFunction=d,s.warnAgainstDeprecatedThis=!0,s.addType=function(W,G){var ee="any";G!==!1&&n.has("Object")&&(ee="Object"),s.addTypes([W],ee)};function Ht(W){if(!W||typeof W.from!="string"||typeof W.to!="string"||typeof W.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(W.to===W.from)throw new SyntaxError('Illegal to define conversion from "'+W.from+'" to itself.')}return s.addConversion=function(W){Ht(W);var G=o(W.to);if(G.conversionsTo.every(function(ee){return ee.from!==W.from}))G.conversionsTo.push({from:W.from,convert:W.convert,index:a++});else throw new Error('There is already a conversion from "'+W.from+'" to "'+G.name+'"')},s.addConversions=function(W){W.forEach(s.addConversion)},s.removeConversion=function(W){Ht(W);var G=o(W.to),ee=St(G.conversionsTo,function(ie){return ie.from===W.from});if(!ee)throw new Error("Attempt to remove nonexistent conversion from "+W.from+" to "+W.to);if(ee.convert!==W.convert)throw new Error("Conversion to remove does not match existing conversion");var le=G.conversionsTo.indexOf(ee);G.conversionsTo.splice(le,1)},s.resolve=function(W,G){if(!d(W))throw new TypeError(v0);for(var ee=W._typedFunctionData.signatures,le=0;le<ee.length;++le)if(ee[le].test(G))return ee[le];return null},s}const g0=Tp();function Cr(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function Al(t,e,r){var n={2:"0b",8:"0o",16:"0x"},i=n[e],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Cr(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Cr(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),a="i".concat(r)}var s="";return t<0&&(t=-t,s="-"),"".concat(s).concat(i).concat(t.toString(e)).concat(a)}function of(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",n,i;if(e&&(e.notation&&(r=e.notation),tr(e)?n=e:tr(e.precision)&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Tw(t,n);case"exponential":return kp(t,n);case"engineering":return Pw(t,n);case"bin":return Al(t,2,i);case"oct":return Al(t,8,i);case"hex":return Al(t,16,i);case"auto":return kw(t,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],s=arguments[4];return a!=="."?a+s:s});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Zs(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),a=n.indexOf(".");i+=a!==-1?a-1:n.length-1;var s=n.replace(".","").replace(/^0*/,function(o){return i-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return s.length===0&&(s.push(0),i++),{sign:r,coefficients:s,exponent:i}}function Pw(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Zs(t),n=Js(r,e),i=n.exponent,a=n.coefficients,s=i%3===0?i:i<0?i-3-i%3:i-i%3;if(tr(e))for(;e>a.length||i-s+1>a.length;)a.push(0);else for(var o=Math.abs(i-s)-(a.length-1),f=0;f<o;f++)a.push(0);for(var p=Math.abs(i-s),c=1;p>0;)c++,p--;var h=a.slice(c).join(""),d=tr(e)&&h.length||h.match(/[1-9]/)?"."+h:"",g=a.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+s.toString();return n.sign+g}function Tw(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Zs(t),n=typeof e=="number"?Js(r,r.exponent+1+e):r,i=n.coefficients,a=n.exponent+1,s=a+(e||0);return i.length<s&&(i=i.concat(ya(s-i.length))),a<0&&(i=ya(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),n.sign+i.join("")}function kp(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Zs(t),n=e?Js(r,e):r,i=n.coefficients,a=n.exponent;i.length<e&&(i=i.concat(ya(e-i.length)));var s=i.shift();return n.sign+s+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function kw(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=r&&r.lowerExp!==void 0?r.lowerExp:-3,i=r&&r.upperExp!==void 0?r.upperExp:5,a=Zs(t),s=e?Js(a,e):a;if(s.exponent<n||s.exponent>=i)return kp(t,e);var o=s.coefficients,f=s.exponent;o.length<e&&(o=o.concat(ya(e-o.length))),o=o.concat(ya(f-o.length+1+(o.length<e?e-o.length:0))),o=ya(-f).concat(o);var p=f>0?f:0;return p<o.length-1&&o.splice(p+1,0,"."),s.sign+o.join("")}function Js(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var a=e-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),r.exponent++,a++),a--,n[a]++}}return r}function ya(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function Iw(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Nw=Number.EPSILON||2220446049250313e-31;function ws(t,e,r){if(r==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var n=Math.abs(t-e);return n<Nw?!0:n<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}function El(t,e,r){var n=t.constructor,i=new n(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Cr(r))throw new Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),a="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function xw(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",n,i;if(e!==void 0&&(e.notation&&(r=e.notation),typeof e=="number"?n=e:e.precision&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Lw(t,n);case"exponential":return m0(t,n);case"engineering":return Rw(t,n);case"bin":return El(t,2,i);case"oct":return El(t,8,i);case"hex":return El(t,16,i);case"auto":{var a=e&&e.lowerExp!==void 0?e.lowerExp:-3,s=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var o,f=t.toSignificantDigits(n),p=f.e;return p>=a&&p<s?o=f.toFixed():o=m0(t,n),o.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],h=arguments[4];return c!=="."?c+h:h})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Rw(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),a=i.toPrecision(e);return a.indexOf("e")!==-1&&(a=i.toString()),a+"e"+(r>=0?"+":"")+n.toString()}function m0(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function Lw(t,e){return t.toFixed(e)}function rn(t,e){var r=Uw(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function Uw(t,e){if(typeof t=="number")return of(t,e);if(Bn(t))return xw(t,e);if(Vw(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return Ip(t,e);if(Gn(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>'"'+n+'": '+rn(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function Ip(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=Ip(t[i],e);return r+="]",r}else return rn(t,e)}function Vw(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function xt(t,e,r){if(!(this instanceof xt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}xt.prototype=new RangeError;xt.prototype.constructor=RangeError;xt.prototype.name="DimensionError";xt.prototype.isDimensionError=!0;function Ji(t,e,r){if(!(this instanceof Ji))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Ji.prototype=new RangeError;Ji.prototype.constructor=RangeError;Ji.prototype.name="IndexError";Ji.prototype.isIndexError=!0;function Ti(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function Np(t,e,r){var n,i=t.length;if(i!==e[r])throw new xt(i,e[r]);if(r<e.length-1){var a=r+1;for(n=0;n<i;n++){var s=t[n];if(!Array.isArray(s))throw new xt(e.length-1,e.length,"<");Np(t[n],e,a)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new xt(e.length+1,e.length,">")}function _0(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new xt(t.length,0)}else Np(t,e,0)}function er(t,e){if(!tr(t)||!Cr(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Ji(t,e)}function b0(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!tr(i)||!Cr(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+rn(e)+")")});var n=r!==void 0?r:0;return lf(t,e,0,n),t}function lf(t,e,r,n){var i,a,s=t.length,o=e[r],f=Math.min(s,o);if(t.length=o,r<e.length-1){var p=r+1;for(i=0;i<f;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),lf(a,e,p,n);for(i=f;i<o;i++)a=[],t[i]=a,lf(a,e,p,n)}else{for(i=0;i<f;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=f;i<o;i++)t[i]=n}}function jw(t,e){var r=zw(t),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new xt(0,n,"!=");e=If(e,n);var i=xp(e);if(n!==i)throw new xt(i,n,"!=");try{return qw(r,e)}catch(a){throw a instanceof xt?new xt(i,n,"!="):a}}function If(t,e){var r=xp(t),n=t.slice(),i=-1,a=t.indexOf(i),s=t.indexOf(i,a+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var o=a>=0,f=e%r===0;if(o)if(f)n[a]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function xp(t){return t.reduce((e,r)=>e*r,1)}function qw(t,e){for(var r=t,n,i=e.length-1;i>0;i--){var a=e[i];n=[];for(var s=r.length/a,o=0;o<s;o++)n.push(r.slice(o*a,(o+1)*a));r=n}return r}function Rp(t,e,r,n){var i=n||Ti(t);if(r)for(var a=0;a<r;a++)t=[t],i.unshift(1);for(t=Lp(t,e,0);i.length<e;)i.push(1);return t}function Lp(t,e,r){var n,i;if(Array.isArray(t)){var a=r+1;for(n=0,i=t.length;n<i;n++)t[n]=Lp(t[n],e,a)}else for(var s=r;s<e;s++)t=[t];return t}function zw(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function r(n){Array.isArray(n)?n.forEach(r):e.push(n)}),e}function As(t,e){for(var r,n=0,i=0;i<t.length;i++){var a=t[i],s=Array.isArray(a);if(i===0&&s&&(n=a.length),s&&a.length!==n)return;var o=s?As(a,e):e(a);if(r===void 0)r=o;else if(r!==o)return"mixed"}return r}function kt(t,e,r,n){function i(a){var s=Sw(a,e.map($w));return Ww(t,e,a),r(s)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Ww(t,e,r){var n=e.filter(a=>!Hw(a)).every(a=>r[a]!==void 0);if(!n){var i=e.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function Hw(t){return t&&t[0]==="?"}function $w(t){return t&&t[0]==="?"?t.slice(1):t}function Gw(t,e){if(Vp(t)&&Up(t,e))return t[e];throw typeof t[e]=="function"&&Zw(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Kw(t,e,r){if(Vp(t)&&Up(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function Yw(t,e){return e in t}function Up(t,e){return!t||typeof t!="object"?!1:ou(Jw,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Zw(t,e){return t==null||typeof t[e]!="function"||ou(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:ou(Qw,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Vp(t){return typeof t=="object"&&t&&t.constructor===Object}var Jw={length:!0,name:!0},Qw={toString:!0,valueOf:!0,toLocaleString:!0};class Xw{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return Gw(this.wrappedObject,e)}set(e,r){return Kw(this.wrappedObject,e,r),this}has(e){return Yw(this.wrappedObject,e)}}function e2(t){return t?t instanceof Map||t instanceof Xw||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var jp=function(){return jp=g0.create,g0},t2=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],r2=kt("typed",t2,function(e){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:a}=e,s=jp();return s.clear(),s.addTypes([{name:"number",test:tr},{name:"Complex",test:Op},{name:"BigNumber",test:Bn},{name:"Fraction",test:Mp},{name:"Unit",test:Pp},{name:"identifier",test:o=>Gn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(o)},{name:"string",test:Gn},{name:"Chain",test:Ew},{name:"Array",test:Xt},{name:"Matrix",test:Jr},{name:"DenseMatrix",test:Jy},{name:"SparseMatrix",test:Qy},{name:"Range",test:Xy},{name:"Index",test:Tf},{name:"boolean",test:ew},{name:"ResultSet",test:tw},{name:"Help",test:rw},{name:"function",test:nw},{name:"Date",test:iw},{name:"RegExp",test:aw},{name:"null",test:sw},{name:"undefined",test:kf},{name:"AccessorNode",test:ow},{name:"ArrayNode",test:lw},{name:"AssignmentNode",test:fw},{name:"BlockNode",test:cw},{name:"ConditionalNode",test:hw},{name:"ConstantNode",test:dw},{name:"FunctionNode",test:vw},{name:"FunctionAssignmentNode",test:pw},{name:"IndexNode",test:gw},{name:"Node",test:mw},{name:"ObjectNode",test:_w},{name:"OperatorNode",test:bw},{name:"ParenthesisNode",test:Dw},{name:"RangeNode",test:yw},{name:"RelationalNode",test:ww},{name:"SymbolNode",test:Aw},{name:"Map",test:e2},{name:"Object",test:uw}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(f){if(r||Cl(f),Iw(f)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+f+"). Use function bignumber(x) to convert to BigNumber.");return new r(f)}},{from:"number",to:"Complex",convert:function(f){return n||us(f),new n(f,0)}},{from:"BigNumber",to:"Complex",convert:function(f){return n||us(f),new n(f.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(f){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(f){return n||us(f),new n(f.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(f){a||Fl(f);var p=new a(f);if(p.valueOf()!==f)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+f+"). Use function fraction(x) to convert to Fraction.");return p}},{from:"string",to:"number",convert:function(f){var p=Number(f);if(isNaN(p))throw new Error('Cannot convert "'+f+'" to a number');return p}},{from:"string",to:"BigNumber",convert:function(f){r||Cl(f);try{return new r(f)}catch{throw new Error('Cannot convert "'+f+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(f){a||Fl(f);try{return new a(f)}catch{throw new Error('Cannot convert "'+f+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(f){n||us(f);try{return new n(f)}catch{throw new Error('Cannot convert "'+f+'" to Complex')}}},{from:"boolean",to:"number",convert:function(f){return+f}},{from:"boolean",to:"BigNumber",convert:function(f){return r||Cl(f),new r(+f)}},{from:"boolean",to:"Fraction",convert:function(f){return a||Fl(f),new a(+f)}},{from:"boolean",to:"string",convert:function(f){return String(f)}},{from:"Array",to:"Matrix",convert:function(f){return i||n2(),new i(f)}},{from:"Matrix",to:"Array",convert:function(f){return f.valueOf()}}]),s.onMismatch=(o,f,p)=>{var c=s.createError(o,f,p);if(["wrongType","mismatch"].includes(c.data.category)&&f.length===1&&Ds(f[0])&&p.some(d=>!d.params.includes(","))){var h=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw h.data=c.data,h}throw c},s.onMismatch=(o,f,p)=>{var c=s.createError(o,f,p);if(["wrongType","mismatch"].includes(c.data.category)&&f.length===1&&Ds(f[0])&&p.some(d=>!d.params.includes(","))){var h=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw h.data=c.data,h}throw c},s});function Cl(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function us(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function n2(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Fl(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Da=9e15,Ii=1e9,ff="0123456789abcdef",Es="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Cs="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",cf={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Da,maxE:Da,crypto:!1},qp,ci,ct=!0,Qs="[DecimalError] ",ki=Qs+"Invalid argument: ",zp=Qs+"Precision limit exceeded",Wp=Qs+"crypto unavailable",Hp="[object Decimal]",$r=Math.floor,br=Math.pow,i2=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,a2=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,u2=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,$p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ln=1e7,Je=7,s2=9007199254740991,o2=Es.length-1,hf=Cs.length-1,De={toStringTag:Hp};De.absoluteValue=De.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Ge(t)};De.ceil=function(){return Ge(new this.constructor(this),this.e+1,2)};De.clampedTo=De.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(ki+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};De.comparedTo=De.cmp=function(t){var e,r,n,i,a=this,s=a.d,o=(t=new a.constructor(t)).d,f=a.s,p=t.s;if(!s||!o)return!f||!p?NaN:f!==p?f:s===o?0:!s^f<0?1:-1;if(!s[0]||!o[0])return s[0]?f:o[0]?-p:0;if(f!==p)return f;if(a.e!==t.e)return a.e>t.e^f<0?1:-1;for(n=s.length,i=o.length,e=0,r=n<i?n:i;e<r;++e)if(s[e]!==o[e])return s[e]>o[e]^f<0?1:-1;return n===i?0:n>i^f<0?1:-1};De.cosine=De.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+Je,n.rounding=1,r=l2(n,Jp(n,r)),n.precision=t,n.rounding=e,Ge(ci==2||ci==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};De.cubeRoot=De.cbrt=function(){var t,e,r,n,i,a,s,o,f,p,c=this,h=c.constructor;if(!c.isFinite()||c.isZero())return new h(c);for(ct=!1,a=c.s*br(c.s*c,1/3),!a||Math.abs(a)==1/0?(r=Ur(c.d),t=c.e,(a=(t-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=br(r,1/3),t=$r((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?r="5e"+t:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new h(r),n.s=c.s):n=new h(a.toString()),s=(t=h.precision)+3;;)if(o=n,f=o.times(o).times(o),p=f.plus(c),n=qt(p.plus(c).times(o),p.plus(f),s+2,1),Ur(o.d).slice(0,s)===(r=Ur(n.d)).slice(0,s))if(r=r.slice(s-3,s+1),r=="9999"||!i&&r=="4999"){if(!i&&(Ge(o,t+1,0),o.times(o).times(o).eq(c))){n=o;break}s+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Ge(n,t+1,1),e=!n.times(n).times(n).eq(c));break}return ct=!0,Ge(n,t,h.rounding,e)};De.decimalPlaces=De.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-$r(this.e/Je))*Je,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};De.dividedBy=De.div=function(t){return qt(this,new this.constructor(t))};De.dividedToIntegerBy=De.divToInt=function(t){var e=this,r=e.constructor;return Ge(qt(e,new r(t),0,1,1),r.precision,r.rounding)};De.equals=De.eq=function(t){return this.cmp(t)===0};De.floor=function(){return Ge(new this.constructor(this),this.e+1,3)};De.greaterThan=De.gt=function(t){return this.cmp(t)>0};De.greaterThanOrEqualTo=De.gte=function(t){var e=this.cmp(t);return e==1||e===0};De.hyperbolicCosine=De.cosh=function(){var t,e,r,n,i,a=this,s=a.constructor,o=new s(1);if(!a.isFinite())return new s(a.s?1/0:NaN);if(a.isZero())return o;r=s.precision,n=s.rounding,s.precision=r+Math.max(a.e,a.sd())+4,s.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/eo(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=Aa(s,1,a.times(e),new s(1),!0);for(var f,p=t,c=new s(8);p--;)f=a.times(a),a=o.minus(f.times(c.minus(f.times(c))));return Ge(a,s.precision=r,s.rounding=n,!0)};De.hyperbolicSine=De.sinh=function(){var t,e,r,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,r=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=Aa(a,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/eo(5,t)),i=Aa(a,2,i,i,!0);for(var s,o=new a(5),f=new a(16),p=new a(20);t--;)s=i.times(i),i=i.times(o.plus(s.times(f.times(s).plus(p))))}return a.precision=e,a.rounding=r,Ge(i,e,r,!0)};De.hyperbolicTangent=De.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,qt(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};De.inverseCosine=De.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),i=r.precision,a=r.rounding;return n!==-1?n===0?e.isNeg()?xn(r,i,a):new r(0):new r(NaN):e.isZero()?xn(r,i+4,a).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),t=xn(r,i+4,a).times(.5),r.precision=i,r.rounding=a,t.minus(e))};De.inverseHyperbolicCosine=De.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,ct=!1,r=r.times(r).minus(1).sqrt().plus(r),ct=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};De.inverseHyperbolicSine=De.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,ct=!1,r=r.times(r).plus(1).sqrt().plus(r),ct=!0,n.precision=t,n.rounding=e,r.ln())};De.inverseHyperbolicTangent=De.atanh=function(){var t,e,r,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?Ge(new a(i),t,e,!0):(a.precision=r=n-i.e,i=qt(i.plus(1),new a(1).minus(i),r+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};De.inverseSine=De.asin=function(){var t,e,r,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),r=a.precision,n=a.rounding,e!==-1?e===0?(t=xn(a,r+4,n).times(.5),t.s=i.s,t):new a(NaN):(a.precision=r+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,i.times(2)))};De.inverseTangent=De.atan=function(){var t,e,r,n,i,a,s,o,f,p=this,c=p.constructor,h=c.precision,d=c.rounding;if(p.isFinite()){if(p.isZero())return new c(p);if(p.abs().eq(1)&&h+4<=hf)return s=xn(c,h+4,d).times(.25),s.s=p.s,s}else{if(!p.s)return new c(NaN);if(h+4<=hf)return s=xn(c,h+4,d).times(.5),s.s=p.s,s}for(c.precision=o=h+10,c.rounding=1,r=Math.min(28,o/Je+2|0),t=r;t;--t)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(ct=!1,e=Math.ceil(o/Je),n=1,f=p.times(p),s=new c(p),i=p;t!==-1;)if(i=i.times(f),a=s.minus(i.div(n+=2)),i=i.times(f),s=a.plus(i.div(n+=2)),s.d[e]!==void 0)for(t=e;s.d[t]===a.d[t]&&t--;);return r&&(s=s.times(2<<r-1)),ct=!0,Ge(s,c.precision=h,c.rounding=d,!0)};De.isFinite=function(){return!!this.d};De.isInteger=De.isInt=function(){return!!this.d&&$r(this.e/Je)>this.d.length-2};De.isNaN=function(){return!this.s};De.isNegative=De.isNeg=function(){return this.s<0};De.isPositive=De.isPos=function(){return this.s>0};De.isZero=function(){return!!this.d&&this.d[0]===0};De.lessThan=De.lt=function(t){return this.cmp(t)<0};De.lessThanOrEqualTo=De.lte=function(t){return this.cmp(t)<1};De.logarithm=De.log=function(t){var e,r,n,i,a,s,o,f,p=this,c=p.constructor,h=c.precision,d=c.rounding,g=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(r=p.d,p.s<0||!r||!r[0]||p.eq(1))return new c(r&&!r[0]?-1/0:p.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)a=!0;else{for(i=r[0];i%10===0;)i/=10;a=i!==1}if(ct=!1,o=h+g,s=Bi(p,o),n=e?Fs(c,o+10):Bi(t,o),f=qt(s,n,o,1),lu(f.d,i=h,d))do if(o+=10,s=Bi(p,o),n=e?Fs(c,o+10):Bi(t,o),f=qt(s,n,o,1),!a){+Ur(f.d).slice(i+1,i+15)+1==1e14&&(f=Ge(f,h+1,0));break}while(lu(f.d,i+=10,d));return ct=!0,Ge(f,h,d)};De.minus=De.sub=function(t){var e,r,n,i,a,s,o,f,p,c,h,d,g=this,b=g.constructor;if(t=new b(t),!g.d||!t.d)return!g.s||!t.s?t=new b(NaN):g.d?t.s=-t.s:t=new b(t.d||g.s!==t.s?g:NaN),t;if(g.s!=t.s)return t.s=-t.s,g.plus(t);if(p=g.d,d=t.d,o=b.precision,f=b.rounding,!p[0]||!d[0]){if(d[0])t.s=-t.s;else if(p[0])t=new b(g);else return new b(f===3?-0:0);return ct?Ge(t,o,f):t}if(r=$r(t.e/Je),c=$r(g.e/Je),p=p.slice(),a=c-r,a){for(h=a<0,h?(e=p,a=-a,s=d.length):(e=d,r=c,s=p.length),n=Math.max(Math.ceil(o/Je),s)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=p.length,s=d.length,h=n<s,h&&(s=n),n=0;n<s;n++)if(p[n]!=d[n]){h=p[n]<d[n];break}a=0}for(h&&(e=p,p=d,d=e,t.s=-t.s),s=p.length,n=d.length-s;n>0;--n)p[s++]=0;for(n=d.length;n>a;){if(p[--n]<d[n]){for(i=n;i&&p[--i]===0;)p[i]=Ln-1;--p[i],p[n]+=Ln}p[n]-=d[n]}for(;p[--s]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=Xs(p,r),ct?Ge(t,o,f):t):new b(f===3?-0:0)};De.modulo=De.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?Ge(new n(r),n.precision,n.rounding):(ct=!1,n.modulo==9?(e=qt(r,t.abs(),0,3,1),e.s*=t.s):e=qt(r,t,0,n.modulo,1),e=e.times(t),ct=!0,r.minus(e))};De.naturalExponential=De.exp=function(){return df(this)};De.naturalLogarithm=De.ln=function(){return Bi(this)};De.negated=De.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Ge(t)};De.plus=De.add=function(t){var e,r,n,i,a,s,o,f,p,c,h=this,d=h.constructor;if(t=new d(t),!h.d||!t.d)return!h.s||!t.s?t=new d(NaN):h.d||(t=new d(t.d||h.s===t.s?h:NaN)),t;if(h.s!=t.s)return t.s=-t.s,h.minus(t);if(p=h.d,c=t.d,o=d.precision,f=d.rounding,!p[0]||!c[0])return c[0]||(t=new d(h)),ct?Ge(t,o,f):t;if(a=$r(h.e/Je),n=$r(t.e/Je),p=p.slice(),i=a-n,i){for(i<0?(r=p,i=-i,s=c.length):(r=c,n=a,s=p.length),a=Math.ceil(o/Je),s=a>s?a+1:s+1,i>s&&(i=s,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(s=p.length,i=c.length,s-i<0&&(i=s,r=c,c=p,p=r),e=0;i;)e=(p[--i]=p[i]+c[i]+e)/Ln|0,p[i]%=Ln;for(e&&(p.unshift(e),++n),s=p.length;p[--s]==0;)p.pop();return t.d=p,t.e=Xs(p,n),ct?Ge(t,o,f):t};De.precision=De.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ki+t);return r.d?(e=Gp(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};De.round=function(){var t=this,e=t.constructor;return Ge(new e(t),t.e+1,e.rounding)};De.sine=De.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+Je,n.rounding=1,r=c2(n,Jp(n,r)),n.precision=t,n.rounding=e,Ge(ci>2?r.neg():r,t,e,!0)):new n(NaN)};De.squareRoot=De.sqrt=function(){var t,e,r,n,i,a,s=this,o=s.d,f=s.e,p=s.s,c=s.constructor;if(p!==1||!o||!o[0])return new c(!p||p<0&&(!o||o[0])?NaN:o?s:1/0);for(ct=!1,p=Math.sqrt(+s),p==0||p==1/0?(e=Ur(o),(e.length+f)%2==0&&(e+="0"),p=Math.sqrt(e),f=$r((f+1)/2)-(f<0||f%2),p==1/0?e="5e"+f:(e=p.toExponential(),e=e.slice(0,e.indexOf("e")+1)+f),n=new c(e)):n=new c(p.toString()),r=(f=c.precision)+3;;)if(a=n,n=a.plus(qt(s,a,r+2,1)).times(.5),Ur(a.d).slice(0,r)===(e=Ur(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(Ge(a,f+1,0),a.times(a).eq(s))){n=a;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ge(n,f+1,1),t=!n.times(n).eq(s));break}return ct=!0,Ge(n,f,c.rounding,t)};De.tangent=De.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=qt(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,Ge(ci==2||ci==4?r.neg():r,t,e,!0)):new n(NaN)};De.times=De.mul=function(t){var e,r,n,i,a,s,o,f,p,c=this,h=c.constructor,d=c.d,g=(t=new h(t)).d;if(t.s*=c.s,!d||!d[0]||!g||!g[0])return new h(!t.s||d&&!d[0]&&!g||g&&!g[0]&&!d?NaN:!d||!g?t.s/0:t.s*0);for(r=$r(c.e/Je)+$r(t.e/Je),f=d.length,p=g.length,f<p&&(a=d,d=g,g=a,s=f,f=p,p=s),a=[],s=f+p,n=s;n--;)a.push(0);for(n=p;--n>=0;){for(e=0,i=f+n;i>n;)o=a[i]+g[n]*d[i-n-1]+e,a[i--]=o%Ln|0,e=o/Ln|0;a[i]=(a[i]+e)%Ln|0}for(;!a[--s];)a.pop();return e?++r:a.shift(),t.d=a,t.e=Xs(a,r),ct?Ge(t,h.precision,h.rounding):t};De.toBinary=function(t,e){return Nf(this,2,t,e)};De.toDecimalPlaces=De.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(an(t,0,Ii),e===void 0?e=n.rounding:an(e,0,8),Ge(r,t+r.e+1,e))};De.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Yn(n,!0):(an(t,0,Ii),e===void 0?e=i.rounding:an(e,0,8),n=Ge(new i(n),t+1,e),r=Yn(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};De.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?r=Yn(i):(an(t,0,Ii),e===void 0?e=a.rounding:an(e,0,8),n=Ge(new a(i),t+i.e+1,e),r=Yn(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};De.toFraction=function(t){var e,r,n,i,a,s,o,f,p,c,h,d,g=this,b=g.d,v=g.constructor;if(!b)return new v(g);if(p=r=new v(1),n=f=new v(0),e=new v(n),a=e.e=Gp(b)-g.e-1,s=a%Je,e.d[0]=br(10,s<0?Je+s:s),t==null)t=a>0?e:p;else{if(o=new v(t),!o.isInt()||o.lt(p))throw Error(ki+o);t=o.gt(e)?a>0?e:p:o}for(ct=!1,o=new v(Ur(b)),c=v.precision,v.precision=a=b.length*Je*2;h=qt(o,e,0,1,1),i=r.plus(h.times(n)),i.cmp(t)!=1;)r=n,n=i,i=p,p=f.plus(h.times(i)),f=i,i=e,e=o.minus(h.times(i)),o=i;return i=qt(t.minus(r),n,0,1,1),f=f.plus(i.times(p)),r=r.plus(i.times(n)),f.s=p.s=g.s,d=qt(p,n,a,1).minus(g).abs().cmp(qt(f,r,a,1).minus(g).abs())<1?[p,n]:[f,r],v.precision=c,ct=!0,d};De.toHexadecimal=De.toHex=function(t,e){return Nf(this,16,t,e)};De.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:an(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(ct=!1,r=qt(r,t,0,e,1).times(t),ct=!0,Ge(r)):(t.s=r.s,r=t),r};De.toNumber=function(){return+this};De.toOctal=function(t,e){return Nf(this,8,t,e)};De.toPower=De.pow=function(t){var e,r,n,i,a,s,o=this,f=o.constructor,p=+(t=new f(t));if(!o.d||!t.d||!o.d[0]||!t.d[0])return new f(br(+o,p));if(o=new f(o),o.eq(1))return o;if(n=f.precision,a=f.rounding,t.eq(1))return Ge(o,n,a);if(e=$r(t.e/Je),e>=t.d.length-1&&(r=p<0?-p:p)<=s2)return i=Kp(f,o,r,n),t.s<0?new f(1).div(i):Ge(i,n,a);if(s=o.s,s<0){if(e<t.d.length-1)return new f(NaN);if(t.d[e]&1||(s=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=s,o}return r=br(+o,p),e=r==0||!isFinite(r)?$r(p*(Math.log("0."+Ur(o.d))/Math.LN10+o.e+1)):new f(r+"").e,e>f.maxE+1||e<f.minE-1?new f(e>0?s/0:0):(ct=!1,f.rounding=o.s=1,r=Math.min(12,(e+"").length),i=df(t.times(Bi(o,n+r)),n),i.d&&(i=Ge(i,n+5,1),lu(i.d,n,a)&&(e=n+10,i=Ge(df(t.times(Bi(o,e+r)),e),e+5,1),+Ur(i.d).slice(n+1,n+15)+1==1e14&&(i=Ge(i,n+1,0)))),i.s=s,ct=!0,f.rounding=a,Ge(i,n,a))};De.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Yn(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(an(t,1,Ii),e===void 0?e=i.rounding:an(e,0,8),n=Ge(new i(n),t,e),r=Yn(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};De.toSignificantDigits=De.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(an(t,1,Ii),e===void 0?e=n.rounding:an(e,0,8)),Ge(new n(r),t,e)};De.toString=function(){var t=this,e=t.constructor,r=Yn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};De.truncated=De.trunc=function(){return Ge(new this.constructor(this),this.e+1,1)};De.valueOf=De.toJSON=function(){var t=this,e=t.constructor,r=Yn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function Ur(t){var e,r,n,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)n=t[e]+"",r=Je-n.length,r&&(a+=Ci(r)),a+=n;s=t[e],n=s+"",r=Je-n.length,r&&(a+=Ci(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}function an(t,e,r){if(t!==~~t||t<e||t>r)throw Error(ki+t)}function lu(t,e,r,n){var i,a,s,o;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=Je,i=0):(i=Math.ceil((e+1)/Je),e%=Je),a=br(10,Je-e),o=t[i]%a|0,n==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),s=r<4&&o==99999||r>3&&o==49999||o==5e4||o==0):s=(r<4&&o+1==a||r>3&&o+1==a/2)&&(t[i+1]/a/100|0)==br(10,e-2)-1||(o==a/2||o==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),s=(n||r<4)&&o==9999||!n&&r>3&&o==4999):s=((n||r<4)&&o+1==a||!n&&r>3&&o+1==a/2)&&(t[i+1]/a/1e3|0)==br(10,e-3)-1,s}function ps(t,e,r){for(var n,i=[0],a,s=0,o=t.length;s<o;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=ff.indexOf(t.charAt(s++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function l2(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/eo(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=Aa(t,1,e.times(i),new t(1));for(var a=r;a--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=r,e}var qt=function(){function t(n,i,a){var s,o=0,f=n.length;for(n=n.slice();f--;)s=n[f]*i+o,n[f]=s%a|0,o=s/a|0;return o&&n.unshift(o),n}function e(n,i,a,s){var o,f;if(a!=s)f=a>s?1:-1;else for(o=f=0;o<a;o++)if(n[o]!=i[o]){f=n[o]>i[o]?1:-1;break}return f}function r(n,i,a,s){for(var o=0;a--;)n[a]-=o,o=n[a]<i[a]?1:0,n[a]=o*s+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s,o,f){var p,c,h,d,g,b,v,_,D,F,E,C,A,S,P,B,N,q,X,K,U=n.constructor,R=n.s==i.s?1:-1,z=n.d,V=i.d;if(!z||!z[0]||!V||!V[0])return new U(!n.s||!i.s||(z?V&&z[0]==V[0]:!V)?NaN:z&&z[0]==0||!V?R*0:R/0);for(f?(g=1,c=n.e-i.e):(f=Ln,g=Je,c=$r(n.e/g)-$r(i.e/g)),X=V.length,N=z.length,D=new U(R),F=D.d=[],h=0;V[h]==(z[h]||0);h++);if(V[h]>(z[h]||0)&&c--,a==null?(S=a=U.precision,s=U.rounding):o?S=a+(n.e-i.e)+1:S=a,S<0)F.push(1),b=!0;else{if(S=S/g+2|0,h=0,X==1){for(d=0,V=V[0],S++;(h<N||d)&&S--;h++)P=d*f+(z[h]||0),F[h]=P/V|0,d=P%V|0;b=d||h<N}else{for(d=f/(V[0]+1)|0,d>1&&(V=t(V,d,f),z=t(z,d,f),X=V.length,N=z.length),B=X,E=z.slice(0,X),C=E.length;C<X;)E[C++]=0;K=V.slice(),K.unshift(0),q=V[0],V[1]>=f/2&&++q;do d=0,p=e(V,E,X,C),p<0?(A=E[0],X!=C&&(A=A*f+(E[1]||0)),d=A/q|0,d>1?(d>=f&&(d=f-1),v=t(V,d,f),_=v.length,C=E.length,p=e(v,E,_,C),p==1&&(d--,r(v,X<_?K:V,_,f))):(d==0&&(p=d=1),v=V.slice()),_=v.length,_<C&&v.unshift(0),r(E,v,C,f),p==-1&&(C=E.length,p=e(V,E,X,C),p<1&&(d++,r(E,X<C?K:V,C,f))),C=E.length):p===0&&(d++,E=[0]),F[h++]=d,p&&E[0]?E[C++]=z[B]||0:(E=[z[B]],C=1);while((B++<N||E[0]!==void 0)&&S--);b=E[0]!==void 0}F[0]||F.shift()}if(g==1)D.e=c,qp=b;else{for(h=1,d=F[0];d>=10;d/=10)h++;D.e=h+c*g-1,Ge(D,o?a+D.e+1:a,s,b)}return D}}();function Ge(t,e,r,n){var i,a,s,o,f,p,c,h,d,g=t.constructor;e:if(e!=null){if(h=t.d,!h)return t;for(i=1,o=h[0];o>=10;o/=10)i++;if(a=e-i,a<0)a+=Je,s=e,c=h[d=0],f=c/br(10,i-s-1)%10|0;else if(d=Math.ceil((a+1)/Je),o=h.length,d>=o)if(n){for(;o++<=d;)h.push(0);c=f=0,i=1,a%=Je,s=a-Je+1}else break e;else{for(c=o=h[d],i=1;o>=10;o/=10)i++;a%=Je,s=a-Je+i,f=s<0?0:c/br(10,i-s-1)%10|0}if(n=n||e<0||h[d+1]!==void 0||(s<0?c:c%br(10,i-s-1)),p=r<4?(f||n)&&(r==0||r==(t.s<0?3:2)):f>5||f==5&&(r==4||n||r==6&&(a>0?s>0?c/br(10,i-s):0:h[d-1])%10&1||r==(t.s<0?8:7)),e<1||!h[0])return h.length=0,p?(e-=t.e+1,h[0]=br(10,(Je-e%Je)%Je),t.e=-e||0):h[0]=t.e=0,t;if(a==0?(h.length=d,o=1,d--):(h.length=d+1,o=br(10,Je-a),h[d]=s>0?(c/br(10,i-s)%br(10,s)|0)*o:0),p)for(;;)if(d==0){for(a=1,s=h[0];s>=10;s/=10)a++;for(s=h[0]+=o,o=1;s>=10;s/=10)o++;a!=o&&(t.e++,h[0]==Ln&&(h[0]=1));break}else{if(h[d]+=o,h[d]!=Ln)break;h[d--]=0,o=1}for(a=h.length;h[--a]===0;)h.pop()}return ct&&(t.e>g.maxE?(t.d=null,t.e=NaN):t.e<g.minE&&(t.e=0,t.d=[0])),t}function Yn(t,e,r){if(!t.isFinite())return Zp(t);var n,i=t.e,a=Ur(t.d),s=a.length;return e?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+Ci(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+Ci(-i-1)+a,r&&(n=r-s)>0&&(a+=Ci(n))):i>=s?(a+=Ci(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+Ci(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=Ci(n))),a}function Xs(t,e){var r=t[0];for(e*=Je;r>=10;r/=10)e++;return e}function Fs(t,e,r){if(e>o2)throw ct=!0,r&&(t.precision=r),Error(zp);return Ge(new t(Es),e,1,!0)}function xn(t,e,r){if(e>hf)throw Error(zp);return Ge(new t(Cs),e,r,!0)}function Gp(t){var e=t.length-1,r=e*Je+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function Ci(t){for(var e="";t--;)e+="0";return e}function Kp(t,e,r,n){var i,a=new t(1),s=Math.ceil(n/Je+4);for(ct=!1;;){if(r%2&&(a=a.times(e),y0(a.d,s)&&(i=!0)),r=$r(r/2),r===0){r=a.d.length-1,i&&a.d[r]===0&&++a.d[r];break}e=e.times(e),y0(e.d,s)}return ct=!0,a}function D0(t){return t.d[t.d.length-1]&1}function Yp(t,e,r){for(var n,i=new t(e[0]),a=0;++a<e.length;)if(n=new t(e[a]),n.s)i[r](n)&&(i=n);else{i=n;break}return i}function df(t,e){var r,n,i,a,s,o,f,p=0,c=0,h=0,d=t.constructor,g=d.rounding,b=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(ct=!1,f=b):f=e,o=new d(.03125);t.e>-2;)t=t.times(o),h+=5;for(n=Math.log(br(2,h))/Math.LN10*2+5|0,f+=n,r=a=s=new d(1),d.precision=f;;){if(a=Ge(a.times(t),f,1),r=r.times(++c),o=s.plus(qt(a,r,f,1)),Ur(o.d).slice(0,f)===Ur(s.d).slice(0,f)){for(i=h;i--;)s=Ge(s.times(s),f,1);if(e==null)if(p<3&&lu(s.d,f-n,g,p))d.precision=f+=10,r=a=o=new d(1),c=0,p++;else return Ge(s,d.precision=b,g,ct=!0);else return d.precision=b,s}s=o}}function Bi(t,e){var r,n,i,a,s,o,f,p,c,h,d,g=1,b=10,v=t,_=v.d,D=v.constructor,F=D.rounding,E=D.precision;if(v.s<0||!_||!_[0]||!v.e&&_[0]==1&&_.length==1)return new D(_&&!_[0]?-1/0:v.s!=1?NaN:_?0:v);if(e==null?(ct=!1,c=E):c=e,D.precision=c+=b,r=Ur(_),n=r.charAt(0),Math.abs(a=v.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(t),r=Ur(v.d),n=r.charAt(0),g++;a=v.e,n>1?(v=new D("0."+r),a++):v=new D(n+"."+r.slice(1))}else return p=Fs(D,c+2,E).times(a+""),v=Bi(new D(n+"."+r.slice(1)),c-b).plus(p),D.precision=E,e==null?Ge(v,E,F,ct=!0):v;for(h=v,f=s=v=qt(v.minus(1),v.plus(1),c,1),d=Ge(v.times(v),c,1),i=3;;){if(s=Ge(s.times(d),c,1),p=f.plus(qt(s,new D(i),c,1)),Ur(p.d).slice(0,c)===Ur(f.d).slice(0,c))if(f=f.times(2),a!==0&&(f=f.plus(Fs(D,c+2,E).times(a+""))),f=qt(f,new D(g),c,1),e==null)if(lu(f.d,c-b,F,o))D.precision=c+=b,p=s=v=qt(h.minus(1),h.plus(1),c,1),d=Ge(v.times(v),c,1),i=o=1;else return Ge(f,D.precision=E,F,ct=!0);else return D.precision=E,f;f=p,i+=2}}function Zp(t){return String(t.s*t.s/0)}function pf(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%Je,r<0&&(n+=Je),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=Je;n<i;)t.d.push(+e.slice(n,n+=Je));e=e.slice(n),n=Je-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),ct&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function f2(t,e){var r,n,i,a,s,o,f,p,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),$p.test(e))return pf(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(a2.test(e))r=16,e=e.toLowerCase();else if(i2.test(e))r=2;else if(u2.test(e))r=8;else throw Error(ki+e);for(a=e.search(/p/i),a>0?(f=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),s=a>=0,n=t.constructor,s&&(e=e.replace(".",""),o=e.length,a=o-a,i=Kp(n,new n(r),a,a*2)),p=ps(e,r,Ln),c=p.length-1,a=c;p[a]===0;--a)p.pop();return a<0?new n(t.s*0):(t.e=Xs(p,c),t.d=p,ct=!1,s&&(t=qt(t,i,o*4)),f&&(t=t.times(Math.abs(f)<54?br(2,f):Ea.pow(2,f))),ct=!0,t)}function c2(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:Aa(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/eo(5,r)),e=Aa(t,2,e,e);for(var i,a=new t(5),s=new t(16),o=new t(20);r--;)i=e.times(e),e=e.times(a.plus(i.times(s.times(i).minus(o))));return e}function Aa(t,e,r,n,i){var a,s,o,f,p=t.precision,c=Math.ceil(p/Je);for(ct=!1,f=r.times(r),o=new t(n);;){if(s=qt(o.times(f),new t(e++*e++),p,1),o=i?n.plus(s):n.minus(s),n=qt(s.times(f),new t(e++*e++),p,1),s=o.plus(n),s.d[c]!==void 0){for(a=c;s.d[a]===o.d[a]&&a--;);if(a==-1)break}a=o,o=n,n=s,s=a}return ct=!0,s.d.length=c+1,s}function eo(t,e){for(var r=t;--e;)r*=t;return r}function Jp(t,e){var r,n=e.s<0,i=xn(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return ci=n?4:1,e;if(r=e.divToInt(i),r.isZero())ci=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(a))return ci=D0(r)?n?2:3:n?4:1,e;ci=D0(r)?n?1:4:n?3:2}return e.minus(i).abs()}function Nf(t,e,r,n){var i,a,s,o,f,p,c,h,d,g=t.constructor,b=r!==void 0;if(b?(an(r,1,Ii),n===void 0?n=g.rounding:an(n,0,8)):(r=g.precision,n=g.rounding),!t.isFinite())c=Zp(t);else{for(c=Yn(t),s=c.indexOf("."),b?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,s>=0&&(c=c.replace(".",""),d=new g(1),d.e=c.length-s,d.d=ps(Yn(d),10,i),d.e=d.d.length),h=ps(c,10,i),a=f=h.length;h[--f]==0;)h.pop();if(!h[0])c=b?"0p+0":"0";else{if(s<0?a--:(t=new g(t),t.d=h,t.e=a,t=qt(t,d,r,n,0,i),h=t.d,a=t.e,p=qp),s=h[r],o=i/2,p=p||h[r+1]!==void 0,p=n<4?(s!==void 0||p)&&(n===0||n===(t.s<0?3:2)):s>o||s===o&&(n===4||p||n===6&&h[r-1]&1||n===(t.s<0?8:7)),h.length=r,p)for(;++h[--r]>i-1;)h[r]=0,r||(++a,h.unshift(1));for(f=h.length;!h[f-1];--f);for(s=0,c="";s<f;s++)c+=ff.charAt(h[s]);if(b){if(f>1)if(e==16||e==8){for(s=e==16?4:3,--f;f%s;f++)c+="0";for(h=ps(c,i,e),f=h.length;!h[f-1];--f);for(s=1,c="1.";s<f;s++)c+=ff.charAt(h[s])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>f)for(a-=f;a--;)c+="0";else a<f&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function y0(t,e){if(t.length>e)return t.length=e,!0}function h2(t){return new this(t).abs()}function d2(t){return new this(t).acos()}function p2(t){return new this(t).acosh()}function v2(t,e){return new this(t).plus(e)}function g2(t){return new this(t).asin()}function m2(t){return new this(t).asinh()}function _2(t){return new this(t).atan()}function b2(t){return new this(t).atanh()}function D2(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,a=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=xn(this,a,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?xn(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=xn(this,a,1).times(.5),r.s=t.s):e.s<0?(this.precision=a,this.rounding=1,r=this.atan(qt(t,e,a,1)),e=xn(this,a,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(qt(t,e,a,1)),r}function y2(t){return new this(t).cbrt()}function w2(t){return Ge(t=new this(t),t.e+1,2)}function A2(t,e,r){return new this(t).clamp(e,r)}function E2(t){if(!t||typeof t!="object")throw Error(Qs+"Object expected");var e,r,n,i=t.defaults===!0,a=["precision",1,Ii,"rounding",0,8,"toExpNeg",-Da,0,"toExpPos",0,Da,"maxE",0,Da,"minE",-Da,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(r=a[e],i&&(this[r]=cf[r]),(n=t[r])!==void 0)if($r(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(ki+r+": "+n);if(r="crypto",i&&(this[r]=cf[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Wp);else this[r]=!1;else throw Error(ki+r+": "+n);return this}function C2(t){return new this(t).cos()}function F2(t){return new this(t).cosh()}function Qp(t){var e,r,n;function i(a){var s,o,f,p=this;if(!(p instanceof i))return new i(a);if(p.constructor=i,w0(a)){p.s=a.s,ct?!a.d||a.e>i.maxE?(p.e=NaN,p.d=null):a.e<i.minE?(p.e=0,p.d=[0]):(p.e=a.e,p.d=a.d.slice()):(p.e=a.e,p.d=a.d?a.d.slice():a.d);return}if(f=typeof a,f==="number"){if(a===0){p.s=1/a<0?-1:1,p.e=0,p.d=[0];return}if(a<0?(a=-a,p.s=-1):p.s=1,a===~~a&&a<1e7){for(s=0,o=a;o>=10;o/=10)s++;ct?s>i.maxE?(p.e=NaN,p.d=null):s<i.minE?(p.e=0,p.d=[0]):(p.e=s,p.d=[a]):(p.e=s,p.d=[a]);return}else if(a*0!==0){a||(p.s=NaN),p.e=NaN,p.d=null;return}return pf(p,a.toString())}else if(f!=="string")throw Error(ki+a);return(o=a.charCodeAt(0))===45?(a=a.slice(1),p.s=-1):(o===43&&(a=a.slice(1)),p.s=1),$p.test(a)?pf(p,a):f2(p,a)}if(i.prototype=De,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=E2,i.clone=Qp,i.isDecimal=w0,i.abs=h2,i.acos=d2,i.acosh=p2,i.add=v2,i.asin=g2,i.asinh=m2,i.atan=_2,i.atanh=b2,i.atan2=D2,i.cbrt=y2,i.ceil=w2,i.clamp=A2,i.cos=C2,i.cosh=F2,i.div=S2,i.exp=B2,i.floor=O2,i.hypot=M2,i.ln=P2,i.log=T2,i.log10=I2,i.log2=k2,i.max=N2,i.min=x2,i.mod=R2,i.mul=L2,i.pow=U2,i.random=V2,i.round=j2,i.sign=q2,i.sin=z2,i.sinh=W2,i.sqrt=H2,i.sub=$2,i.sum=G2,i.tan=K2,i.tanh=Y2,i.trunc=Z2,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function S2(t,e){return new this(t).div(e)}function B2(t){return new this(t).exp()}function O2(t){return Ge(t=new this(t),t.e+1,3)}function M2(){var t,e,r=new this(0);for(ct=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return ct=!0,new this(1/0);r=e}return ct=!0,r.sqrt()}function w0(t){return t instanceof Ea||t&&t.toStringTag===Hp||!1}function P2(t){return new this(t).ln()}function T2(t,e){return new this(t).log(e)}function k2(t){return new this(t).log(2)}function I2(t){return new this(t).log(10)}function N2(){return Yp(this,arguments,"lt")}function x2(){return Yp(this,arguments,"gt")}function R2(t,e){return new this(t).mod(e)}function L2(t,e){return new this(t).mul(e)}function U2(t,e){return new this(t).pow(e)}function V2(t){var e,r,n,i,a=0,s=new this(1),o=[];if(t===void 0?t=this.precision:an(t,1,Ii),n=Math.ceil(t/Je),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(o.push(i%1e7),a+=4);a=n/4}else throw Error(Wp);else for(;a<n;)o[a++]=Math.random()*1e7|0;for(n=o[--a],t%=Je,n&&t&&(i=br(10,Je-t),o[a]=(n/i|0)*i);o[a]===0;a--)o.pop();if(a<0)r=0,o=[0];else{for(r=-1;o[0]===0;r-=Je)o.shift();for(n=1,i=o[0];i>=10;i/=10)n++;n<Je&&(r-=Je-n)}return s.e=r,s.d=o,s}function j2(t){return Ge(t=new this(t),t.e+1,this.rounding)}function q2(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function z2(t){return new this(t).sin()}function W2(t){return new this(t).sinh()}function H2(t){return new this(t).sqrt()}function $2(t,e){return new this(t).sub(e)}function G2(){var t=0,e=arguments,r=new this(e[t]);for(ct=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return ct=!0,Ge(r,this.precision,this.rounding)}function K2(t){return new this(t).tan()}function Y2(t){return new this(t).tanh()}function Z2(t){return Ge(t=new this(t),t.e+1,1)}De[Symbol.for("nodejs.util.inspect.custom")]=De.toString;De[Symbol.toStringTag]="Decimal";var Ea=De.constructor=Qp(cf);Es=new Ea(Es);Cs=new Ea(Cs);var J2="BigNumber",Q2=["?on","config"],X2=kt(J2,Q2,t=>{var{on:e,config:r}=t,n=Ea.clone({precision:r.precision,modulo:Ea.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&n.config({precision:i.precision})}),n},{isClass:!0}),dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vf={},eA={get exports(){return vf},set exports(t){vf=t}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=Math.cosh||function(h){return Math.abs(h)<1e-9?1-h:(Math.exp(h)+Math.exp(-h))*.5},i=Math.sinh||function(h){return Math.abs(h)<1e-9?h:(Math.exp(h)-Math.exp(-h))*.5},a=function(h){var d=Math.PI/4;if(-d>h||h>d)return Math.cos(h)-1;var g=h*h;return g*(g*(g*(g*(g*(g*(g*(g/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},s=function(h,d){var g=Math.abs(h),b=Math.abs(d);return g<3e3&&b<3e3?Math.sqrt(g*g+b*b):(g<b?(g=b,b=h/d):b=d/h,g*Math.sqrt(1+b*b))},o=function(){throw SyntaxError("Invalid Param")};function f(h,d){var g=Math.abs(h),b=Math.abs(d);return h===0?Math.log(b):d===0?Math.log(g):g<3e3&&b<3e3?Math.log(h*h+d*d)*.5:(h=h/2,d=d/2,.5*Math.log(h*h+d*d)+Math.LN2)}var p=function(h,d){var g={re:0,im:0};if(h==null)g.re=g.im=0;else if(d!==void 0)g.re=h,g.im=d;else switch(typeof h){case"object":if("im"in h&&"re"in h)g.re=h.re,g.im=h.im;else if("abs"in h&&"arg"in h){if(!Number.isFinite(h.abs)&&Number.isFinite(h.arg))return c.INFINITY;g.re=h.abs*Math.cos(h.arg),g.im=h.abs*Math.sin(h.arg)}else if("r"in h&&"phi"in h){if(!Number.isFinite(h.r)&&Number.isFinite(h.phi))return c.INFINITY;g.re=h.r*Math.cos(h.phi),g.im=h.r*Math.sin(h.phi)}else h.length===2?(g.re=h[0],g.im=h[1]):o();break;case"string":g.im=g.re=0;var b=h.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,_=0;b===null&&o();for(var D=0;D<b.length;D++){var F=b[D];F===" "||F==="	"||F===`
`||(F==="+"?v++:F==="-"?_++:F==="i"||F==="I"?(v+_===0&&o(),b[D+1]!==" "&&!isNaN(b[D+1])?(g.im+=parseFloat((_%2?"-":"")+b[D+1]),D++):g.im+=parseFloat((_%2?"-":"")+"1"),v=_=0):((v+_===0||isNaN(F))&&o(),b[D+1]==="i"||b[D+1]==="I"?(g.im+=parseFloat((_%2?"-":"")+F),D++):g.re+=parseFloat((_%2?"-":"")+F),v=_=0))}v+_>0&&o();break;case"number":g.im=0,g.re=h;break;default:o()}return isNaN(g.re)||isNaN(g.im),g};function c(h,d){if(!(this instanceof c))return new c(h,d);var g=p(h,d);this.re=g.re,this.im=g.im}c.prototype={re:0,im:0,sign:function(){var h=this.abs();return new c(this.re/h,this.im/h)},add:function(h,d){var g=new c(h,d);return this.isInfinite()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:new c(this.re+g.re,this.im+g.im)},sub:function(h,d){var g=new c(h,d);return this.isInfinite()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:new c(this.re-g.re,this.im-g.im)},mul:function(h,d){var g=new c(h,d);return this.isInfinite()&&g.isZero()||this.isZero()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:g.im===0&&this.im===0?new c(this.re*g.re,0):new c(this.re*g.re-this.im*g.im,this.re*g.im+this.im*g.re)},div:function(h,d){var g=new c(h,d);if(this.isZero()&&g.isZero()||this.isInfinite()&&g.isInfinite())return c.NAN;if(this.isInfinite()||g.isZero())return c.INFINITY;if(this.isZero()||g.isInfinite())return c.ZERO;h=this.re,d=this.im;var b=g.re,v=g.im,_,D;return v===0?new c(h/b,d/b):Math.abs(b)<Math.abs(v)?(D=b/v,_=b*D+v,new c((h*D+d)/_,(d*D-h)/_)):(D=v/b,_=v*D+b,new c((h+d*D)/_,(d-h*D)/_))},pow:function(h,d){var g=new c(h,d);if(h=this.re,d=this.im,g.isZero())return c.ONE;if(g.im===0){if(d===0&&h>0)return new c(Math.pow(h,g.re),0);if(h===0)switch((g.re%4+4)%4){case 0:return new c(Math.pow(d,g.re),0);case 1:return new c(0,Math.pow(d,g.re));case 2:return new c(-Math.pow(d,g.re),0);case 3:return new c(0,-Math.pow(d,g.re))}}if(h===0&&d===0&&g.re>0&&g.im>=0)return c.ZERO;var b=Math.atan2(d,h),v=f(h,d);return h=Math.exp(g.re*v-g.im*b),d=g.im*v+g.re*b,new c(h*Math.cos(d),h*Math.sin(d))},sqrt:function(){var h=this.re,d=this.im,g=this.abs(),b,v;if(h>=0){if(d===0)return new c(Math.sqrt(h),0);b=.5*Math.sqrt(2*(g+h))}else b=Math.abs(d)/Math.sqrt(2*(g-h));return h<=0?v=.5*Math.sqrt(2*(g-h)):v=Math.abs(d)/Math.sqrt(2*(g+h)),new c(b,d<0?-v:v)},exp:function(){var h=Math.exp(this.re);return this.im,new c(h*Math.cos(this.im),h*Math.sin(this.im))},expm1:function(){var h=this.re,d=this.im;return new c(Math.expm1(h)*Math.cos(d)+a(d),Math.exp(h)*Math.sin(d))},log:function(){var h=this.re,d=this.im;return new c(f(h,d),Math.atan2(d,h))},abs:function(){return s(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var h=this.re,d=this.im;return new c(Math.sin(h)*n(d),Math.cos(h)*i(d))},cos:function(){var h=this.re,d=this.im;return new c(Math.cos(h)*n(d),-Math.sin(h)*i(d))},tan:function(){var h=2*this.re,d=2*this.im,g=Math.cos(h)+n(d);return new c(Math.sin(h)/g,i(d)/g)},cot:function(){var h=2*this.re,d=2*this.im,g=Math.cos(h)-n(d);return new c(-Math.sin(h)/g,i(d)/g)},sec:function(){var h=this.re,d=this.im,g=.5*n(2*d)+.5*Math.cos(2*h);return new c(Math.cos(h)*n(d)/g,Math.sin(h)*i(d)/g)},csc:function(){var h=this.re,d=this.im,g=.5*n(2*d)-.5*Math.cos(2*h);return new c(Math.sin(h)*n(d)/g,-Math.cos(h)*i(d)/g)},asin:function(){var h=this.re,d=this.im,g=new c(d*d-h*h+1,-2*h*d).sqrt(),b=new c(g.re-d,g.im+h).log();return new c(b.im,-b.re)},acos:function(){var h=this.re,d=this.im,g=new c(d*d-h*h+1,-2*h*d).sqrt(),b=new c(g.re-d,g.im+h).log();return new c(Math.PI/2-b.im,b.re)},atan:function(){var h=this.re,d=this.im;if(h===0){if(d===1)return new c(0,1/0);if(d===-1)return new c(0,-1/0)}var g=h*h+(1-d)*(1-d),b=new c((1-d*d-h*h)/g,-2*h/g).log();return new c(-.5*b.im,.5*b.re)},acot:function(){var h=this.re,d=this.im;if(d===0)return new c(Math.atan2(1,h),0);var g=h*h+d*d;return g!==0?new c(h/g,-d/g).atan():new c(h!==0?h/0:0,d!==0?-d/0:0).atan()},asec:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new c(0,1/0);var g=h*h+d*d;return g!==0?new c(h/g,-d/g).acos():new c(h!==0?h/0:0,d!==0?-d/0:0).acos()},acsc:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new c(Math.PI/2,1/0);var g=h*h+d*d;return g!==0?new c(h/g,-d/g).asin():new c(h!==0?h/0:0,d!==0?-d/0:0).asin()},sinh:function(){var h=this.re,d=this.im;return new c(i(h)*Math.cos(d),n(h)*Math.sin(d))},cosh:function(){var h=this.re,d=this.im;return new c(n(h)*Math.cos(d),i(h)*Math.sin(d))},tanh:function(){var h=2*this.re,d=2*this.im,g=n(h)+Math.cos(d);return new c(i(h)/g,Math.sin(d)/g)},coth:function(){var h=2*this.re,d=2*this.im,g=n(h)-Math.cos(d);return new c(i(h)/g,-Math.sin(d)/g)},csch:function(){var h=this.re,d=this.im,g=Math.cos(2*d)-n(2*h);return new c(-2*i(h)*Math.cos(d)/g,2*n(h)*Math.sin(d)/g)},sech:function(){var h=this.re,d=this.im,g=Math.cos(2*d)+n(2*h);return new c(2*n(h)*Math.cos(d)/g,-2*i(h)*Math.sin(d)/g)},asinh:function(){var h=this.im;this.im=-this.re,this.re=h;var d=this.asin();return this.re=-this.im,this.im=h,h=d.re,d.re=-d.im,d.im=h,d},acosh:function(){var h=this.acos();if(h.im<=0){var d=h.re;h.re=-h.im,h.im=d}else{var d=h.im;h.im=-h.re,h.re=d}return h},atanh:function(){var h=this.re,d=this.im,g=h>1&&d===0,b=1-h,v=1+h,_=b*b+d*d,D=_!==0?new c((v*b-d*d)/_,(d*b+v*d)/_):new c(h!==-1?h/0:0,d!==0?d/0:0),F=D.re;return D.re=f(D.re,D.im)/2,D.im=Math.atan2(D.im,F)/2,g&&(D.im=-D.im),D},acoth:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new c(0,Math.PI/2);var g=h*h+d*d;return g!==0?new c(h/g,-d/g).atanh():new c(h!==0?h/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var h=this.re,d=this.im;if(d===0)return new c(h!==0?Math.log(h+Math.sqrt(h*h+1)):1/0,0);var g=h*h+d*d;return g!==0?new c(h/g,-d/g).asinh():new c(h!==0?h/0:0,d!==0?-d/0:0).asinh()},asech:function(){var h=this.re,d=this.im;if(this.isZero())return c.INFINITY;var g=h*h+d*d;return g!==0?new c(h/g,-d/g).acosh():new c(h!==0?h/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var h=this.re,d=this.im,g=h*h+d*d;return new c(h/g,-d/g)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(h){return h=Math.pow(10,h||0),new c(Math.ceil(this.re*h)/h,Math.ceil(this.im*h)/h)},floor:function(h){return h=Math.pow(10,h||0),new c(Math.floor(this.re*h)/h,Math.floor(this.im*h)/h)},round:function(h){return h=Math.pow(10,h||0),new c(Math.round(this.re*h)/h,Math.round(this.im*h)/h)},equals:function(h,d){var g=new c(h,d);return Math.abs(g.re-this.re)<=c.EPSILON&&Math.abs(g.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var h=this.re,d=this.im,g="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(h)<c.EPSILON&&(h=0),Math.abs(d)<c.EPSILON&&(d=0),d===0?g+h:(h!==0?(g+=h,g+=" ",d<0?(d=-d,g+="-"):g+="+",g+=" "):d<0&&(d=-d,g+="-"),d!==1&&(g+=d),g+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,t.exports=c})()})(eA);const Tr=xf(vf);var tA="Complex",rA=[],nA=kt(tA,rA,()=>(Object.defineProperty(Tr,"name",{value:"Complex"}),Tr.prototype.constructor=Tr,Tr.prototype.type="Complex",Tr.prototype.isComplex=!0,Tr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Tr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Tr.prototype.format=function(t){var e="",r=this.im,n=this.re,i=of(this.re,t),a=of(this.im,t),s=tr(t)?t:t?t.precision:null;if(s!==null){var o=Math.pow(10,-s);Math.abs(n/r)<o&&(n=0),Math.abs(r/n)<o&&(r=0)}return r===0?e=i:n===0?r===1?e="i":r===-1?e="-i":e=a+"i":r<0?r===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+a+"i",e},Tr.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Tr(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(tr(r)){if(Pp(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),tr(n))return new Tr({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Tr.prototype.valueOf=Tr.prototype.toString,Tr.fromJSON=function(t){return new Tr(t)},Tr.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Tr),{isClass:!0}),gf={},iA={get exports(){return gf},set exports(t){gf=t}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=2e3,i={s:1,n:0,d:1};function a(b,v){if(isNaN(b=parseInt(b,10)))throw g.InvalidParameter;return b*v}function s(b,v){if(v===0)throw g.DivisionByZero;var _=Object.create(g.prototype);_.s=b<0?-1:1,b=b<0?-b:b;var D=d(b,v);return _.n=b/D,_.d=v/D,_}function o(b){for(var v={},_=b,D=2,F=4;F<=_;){for(;_%D===0;)_/=D,v[D]=(v[D]||0)+1;F+=1+2*D++}return _!==b?_>1&&(v[_]=(v[_]||0)+1):v[b]=(v[b]||0)+1,v}var f=function(b,v){var _=0,D=1,F=1,E=0,C=0,A=0,S=1,P=1,B=0,N=1,q=1,X=1,K=1e7,U;if(b!=null)if(v!==void 0){if(_=b,D=v,F=_*D,_%1!==0||D%1!==0)throw g.NonIntegerParameter}else switch(typeof b){case"object":{if("d"in b&&"n"in b)_=b.n,D=b.d,"s"in b&&(_*=b.s);else if(0 in b)_=b[0],1 in b&&(D=b[1]);else throw g.InvalidParameter;F=_*D;break}case"number":{if(b<0&&(F=b,b=-b),b%1===0)_=b;else if(b>0){for(b>=1&&(P=Math.pow(10,Math.floor(1+Math.log(b)/Math.LN10)),b/=P);N<=K&&X<=K;)if(U=(B+q)/(N+X),b===U){N+X<=K?(_=B+q,D=N+X):X>N?(_=q,D=X):(_=B,D=N);break}else b>U?(B+=q,N+=X):(q+=B,X+=N),N>K?(_=q,D=X):(_=B,D=N);_*=P}else(isNaN(b)||isNaN(v))&&(D=_=NaN);break}case"string":{if(N=b.match(/\d+|./g),N===null)throw g.InvalidParameter;if(N[B]==="-"?(F=-1,B++):N[B]==="+"&&B++,N.length===B+1?C=a(N[B++],F):N[B+1]==="."||N[B]==="."?(N[B]!=="."&&(E=a(N[B++],F)),B++,(B+1===N.length||N[B+1]==="("&&N[B+3]===")"||N[B+1]==="'"&&N[B+3]==="'")&&(C=a(N[B],F),S=Math.pow(10,N[B].length),B++),(N[B]==="("&&N[B+2]===")"||N[B]==="'"&&N[B+2]==="'")&&(A=a(N[B+1],F),P=Math.pow(10,N[B+1].length)-1,B+=3)):N[B+1]==="/"||N[B+1]===":"?(C=a(N[B],F),S=a(N[B+2],1),B+=3):N[B+3]==="/"&&N[B+1]===" "&&(E=a(N[B],F),C=a(N[B+2],F),S=a(N[B+4],1),B+=5),N.length<=B){D=S*P,F=_=A+D*E+P*C;break}}default:throw g.InvalidParameter}if(D===0)throw g.DivisionByZero;i.s=F<0?-1:1,i.n=Math.abs(_),i.d=Math.abs(D)};function p(b,v,_){for(var D=1;v>0;b=b*b%_,v>>=1)v&1&&(D=D*b%_);return D}function c(b,v){for(;v%2===0;v/=2);for(;v%5===0;v/=5);if(v===1)return 0;for(var _=10%v,D=1;_!==1;D++)if(_=_*10%v,D>n)return 0;return D}function h(b,v,_){for(var D=1,F=p(10,_,v),E=0;E<300;E++){if(D===F)return E;D=D*10%v,F=F*10%v}return 0}function d(b,v){if(!b)return v;if(!v)return b;for(;;){if(b%=v,!b)return v;if(v%=b,!v)return b}}function g(b,v){if(f(b,v),this instanceof g)b=d(i.d,i.n),this.s=i.s,this.n=i.n/b,this.d=i.d/b;else return s(i.s*i.n,i.d)}g.DivisionByZero=new Error("Division by Zero"),g.InvalidParameter=new Error("Invalid argument"),g.NonIntegerParameter=new Error("Parameters must be integer"),g.prototype={s:1,n:0,d:1,abs:function(){return s(this.n,this.d)},neg:function(){return s(-this.s*this.n,this.d)},add:function(b,v){return f(b,v),s(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(b,v){return f(b,v),s(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(b,v){return f(b,v),s(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(b,v){return f(b,v),s(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return s(this.s*this.n,this.d)},mod:function(b,v){if(isNaN(this.n)||isNaN(this.d))return new g(NaN);if(b===void 0)return s(this.s*this.n%this.d,1);if(f(b,v),i.n===0&&this.d===0)throw g.DivisionByZero;return s(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(b,v){return f(b,v),s(d(i.n,this.n)*d(i.d,this.d),i.d*this.d)},lcm:function(b,v){return f(b,v),i.n===0&&this.n===0?s(0,1):s(i.n*this.n,d(i.n,this.n)*d(i.d,this.d))},ceil:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):s(Math.ceil(b*this.s*this.n/this.d),b)},floor:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):s(Math.floor(b*this.s*this.n/this.d),b)},round:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):s(Math.round(b*this.s*this.n/this.d),b)},inverse:function(){return s(this.s*this.d,this.n)},pow:function(b,v){if(f(b,v),i.d===1)return i.s<0?s(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):s(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var _=o(this.n),D=o(this.d),F=1,E=1;for(var C in _)if(C!=="1"){if(C==="0"){F=0;break}if(_[C]*=i.n,_[C]%i.d===0)_[C]/=i.d;else return null;F*=Math.pow(C,_[C])}for(var C in D)if(C!=="1"){if(D[C]*=i.n,D[C]%i.d===0)D[C]/=i.d;else return null;E*=Math.pow(C,D[C])}return i.s<0?s(E,F):s(F,E)},equals:function(b,v){return f(b,v),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(b,v){f(b,v);var _=this.s*this.n*i.d-i.s*i.n*this.d;return(0<_)-(_<0)},simplify:function(b){if(isNaN(this.n)||isNaN(this.d))return this;b=b||.001;for(var v=this.abs(),_=v.toContinued(),D=1;D<_.length;D++){for(var F=s(_[D-1],1),E=D-2;E>=0;E--)F=F.inverse().add(_[E]);if(F.sub(v).abs().valueOf()<b)return F.mul(this.s)}return this},divisible:function(b,v){return f(b,v),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(b){var v,_="",D=this.n,F=this.d;return this.s<0&&(_+="-"),F===1?_+=D:(b&&(v=Math.floor(D/F))>0&&(_+=v,_+=" ",D%=F),_+=D,_+="/",_+=F),_},toLatex:function(b){var v,_="",D=this.n,F=this.d;return this.s<0&&(_+="-"),F===1?_+=D:(b&&(v=Math.floor(D/F))>0&&(_+=v,D%=F),_+="\\frac{",_+=D,_+="}{",_+=F,_+="}"),_},toContinued:function(){var b,v=this.n,_=this.d,D=[];if(isNaN(v)||isNaN(_))return D;do D.push(Math.floor(v/_)),b=v%_,v=_,_=b;while(v!==1);return D},toString:function(b){var v=this.n,_=this.d;if(isNaN(v)||isNaN(_))return"NaN";b=b||15;var D=c(v,_),F=h(v,_,D),E=this.s<0?"-":"";if(E+=v/_|0,v%=_,v*=10,v&&(E+="."),D){for(var C=F;C--;)E+=v/_|0,v%=_,v*=10;E+="(";for(var C=D;C--;)E+=v/_|0,v%=_,v*=10;E+=")"}else for(var C=b;v&&C--;)E+=v/_|0,v%=_,v*=10;return E}},Object.defineProperty(g,"__esModule",{value:!0}),g.default=g,g.Fraction=g,t.exports=g})()})(iA);const fi=xf(gf);var aA="Fraction",uA=[],sA=kt(aA,uA,()=>(Object.defineProperty(fi,"name",{value:"Fraction"}),fi.prototype.constructor=fi,fi.prototype.type="Fraction",fi.prototype.isFraction=!0,fi.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},fi.fromJSON=function(t){return new fi(t)},fi),{isClass:!0}),oA="Matrix",lA=[],fA=kt(oA,lA,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function Xp(t){return Object.keys(t.signatures||{}).reduce(function(e,r){var n=(r.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var cA="DenseMatrix",hA=["Matrix"],dA=kt(cA,hA,t=>{var{Matrix:e}=t;function r(c,h){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(h&&!Gn(h))throw new Error("Invalid datatype: "+h);if(Jr(c))c.type==="DenseMatrix"?(this._data=Er(c._data),this._size=Er(c._size),this._datatype=h||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=h||c._datatype);else if(c&&Xt(c.data)&&Xt(c.size))this._data=c.data,this._size=c.size,_0(this._data,this._size),this._datatype=h||c.datatype;else if(Xt(c))this._data=p(c),this._size=Ti(this._data),_0(this._data,this._size),this._datatype=h;else{if(c)throw new TypeError("Unsupported type of data ("+uu(c)+")");this._data=[],this._size=[0],this._datatype=h}}r.prototype=new e,r.prototype.createDenseMatrix=function(c,h){return new r(c,h)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return As(this._data,uu)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(c,h){return new r(c,h)},r.prototype.subset=function(c,h,d){switch(arguments.length){case 1:return n(this,c);case 2:case 3:return a(this,c,h,d);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(c){if(!Xt(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new xt(c.length,this._size.length);for(var h=0;h<c.length;h++)er(c[h],this._size[h]);for(var d=this._data,g=0,b=c.length;g<b;g++){var v=c[g];er(v,d.length),d=d[v]}return d},r.prototype.set=function(c,h,d){if(!Xt(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new xt(c.length,this._size.length,"<");var g,b,v,_=c.map(function(F){return F+1});f(this,_,d);var D=this._data;for(g=0,b=c.length-1;g<b;g++)v=c[g],er(v,D.length),D=D[v];return v=c[c.length-1],er(v,D.length),D[v]=h,this};function n(c,h){if(!Tf(h))throw new TypeError("Invalid index");var d=h.isScalar();if(d)return c.get(h.min());var g=h.size();if(g.length!==c._size.length)throw new xt(g.length,c._size.length);for(var b=h.min(),v=h.max(),_=0,D=c._size.length;_<D;_++)er(b[_],c._size[_]),er(v[_],c._size[_]);return new r(i(c._data,h,g.length,0),c._datatype)}function i(c,h,d,g){var b=g===d-1,v=h.dimension(g);return b?v.map(function(_){return er(_,c.length),c[_]}).valueOf():v.map(function(_){er(_,c.length);var D=c[_];return i(D,h,d,g+1)}).valueOf()}function a(c,h,d,g){if(!h||h.isIndex!==!0)throw new TypeError("Invalid index");var b=h.size(),v=h.isScalar(),_;if(Jr(d)?(_=d.size(),d=d.valueOf()):_=Ti(d),v){if(_.length!==0)throw new TypeError("Scalar expected");c.set(h.min(),d,g)}else{if(b.length<c._size.length)throw new xt(b.length,c._size.length,"<");if(_.length<b.length){for(var D=0,F=0;b[D]===1&&_[D]===1;)D++;for(;b[D]===1;)F++,D++;d=Rp(d,b.length,F,_)}if(!ys(b,_))throw new xt(b,_,">");var E=h.max().map(function(S){return S+1});f(c,E,g);var C=b.length,A=0;s(c._data,h,d,C,A)}return c}function s(c,h,d,g,b){var v=b===g-1,_=h.dimension(b);v?_.forEach(function(D,F){er(D),c[D]=d[F[0]]}):_.forEach(function(D,F){er(D),s(c[D],h,d[F[0]],g,b+1)})}r.prototype.resize=function(c,h,d){if(!Ds(c))throw new TypeError("Array or Matrix expected");var g=c.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),b=d?this.clone():this;return o(b,g,h)};function o(c,h,d){if(h.length===0){for(var g=c._data;Xt(g);)g=g[0];return g}return c._size=h.slice(0),c._data=b0(c._data,c._size,d),c}r.prototype.reshape=function(c,h){var d=h?this.clone():this;d._data=jw(d._data,c);var g=d._size.reduce((b,v)=>b*v);return d._size=If(c,g),d};function f(c,h,d){for(var g=c._size.slice(0),b=!1;g.length<h.length;)g.push(0),b=!0;for(var v=0,_=h.length;v<_;v++)h[v]>g[v]&&(g[v]=h[v],b=!0);b&&o(c,g,d)}r.prototype.clone=function(){var c=new r({data:Er(this._data),size:Er(this._size),datatype:this._datatype});return c},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(c){var h=this,d=Xp(c),g=function _(D,F){return Xt(D)?D.map(function(E,C){return _(E,F.concat(C))}):d===1?c(D):d===2?c(D,F):c(D,F,h)},b=g(this._data,[]),v=this._datatype!==void 0?As(b,uu):void 0;return new r(b,v)},r.prototype.forEach=function(c){var h=this,d=function g(b,v){Xt(b)?b.forEach(function(_,D){g(_,v.concat(D))}):c(b,v,h)};d(this._data,[])},r.prototype[Symbol.iterator]=function*(){var c=function*h(d,g){if(Xt(d))for(var b=0;b<d.length;b++)yield*h(d[b],g.concat(b));else yield{value:d,index:g}};yield*c(this._data,[])},r.prototype.rows=function(){var c=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var g of d)c.push(new r([g],this._datatype));return c},r.prototype.columns=function(){var c=this,h=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var g=this._data,b=function(D){var F=g.map(E=>[E[D]]);h.push(new r(F,c._datatype))},v=0;v<d[1];v++)b(v);return h},r.prototype.toArray=function(){return Er(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(c){return rn(this._data,c)},r.prototype.toString=function(){return rn(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(c){if(c){if(Bn(c)&&(c=c.toNumber()),!tr(c)||!Cr(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var h=c>0?c:0,d=c<0?-c:0,g=this._size[0],b=this._size[1],v=Math.min(g-d,b-h),_=[],D=0;D<v;D++)_[D]=this._data[D+d][D+h];return new r({data:_,size:[v],datatype:this._datatype})},r.diagonal=function(c,h,d,g){if(!Xt(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(P){if(Bn(P)&&(P=P.toNumber()),!tr(P)||!Cr(P)||P<1)throw new Error("Size values must be positive integers");return P}),d){if(Bn(d)&&(d=d.toNumber()),!tr(d)||!Cr(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var b=d>0?d:0,v=d<0?-d:0,_=c[0],D=c[1],F=Math.min(_-v,D-b),E;if(Xt(h)){if(h.length!==F)throw new Error("Invalid value array length");E=function(B){return h[B]}}else if(Jr(h)){var C=h.size();if(C.length!==1||C[0]!==F)throw new Error("Invalid matrix length");E=function(B){return h.get([B])}}else E=function(){return h};g||(g=Bn(E(0))?E(0).mul(0):0);var A=[];if(c.length>0){A=b0(A,c,g);for(var S=0;S<F;S++)A[S+v][S+b]=E(S)}return new r({data:A,size:[_,D]})},r.fromJSON=function(c){return new r(c)},r.prototype.swapRows=function(c,h){if(!tr(c)||!Cr(c)||!tr(h)||!Cr(h))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return er(c,this._size[0]),er(h,this._size[0]),r._swapRows(c,h,this._data),this},r._swapRows=function(c,h,d){var g=d[c];d[c]=d[h],d[h]=g};function p(c){for(var h=0,d=c.length;h<d;h++){var g=c[h];Xt(g)?c[h]=p(g):g&&g.isMatrix===!0&&(c[h]=p(g.valueOf()))}return c}return r},{isClass:!0});function to(t,e,r){return t&&typeof t.map=="function"?t.map(function(n){return to(n,e)}):e(t)}var A0="isInteger",pA=["typed"],vA=kt(A0,pA,t=>{var{typed:e}=t;return e(A0,{number:Cr,BigNumber:function(n){return n.isInt()},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":e.referToSelf(r=>n=>to(n,r))})}),gA="number",e1="number, number";function t1(t,e){return t+e}t1.signature=e1;function r1(t,e){return t*e}r1.signature=e1;function n1(t){return-t}n1.signature=gA;function mA(t,e,r){if(r==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return n.lte(i.times(r))}return!1}function _A(t,e,r){return ws(t.re,e.re,r)&&ws(t.im,e.im,r)}var bA=kt("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),Ss="equalScalar",DA=["typed","config"],yA=kt(Ss,DA,t=>{var{typed:e,config:r}=t,n=bA({typed:e});return e(Ss,{"boolean, boolean":function(a,s){return a===s},"number, number":function(a,s){return ws(a,s,r.epsilon)},"BigNumber, BigNumber":function(a,s){return a.eq(s)||mA(a,s,r.epsilon)},"Fraction, Fraction":function(a,s){return a.equals(s)},"Complex, Complex":function(a,s){return _A(a,s,r.epsilon)}},n)});kt(Ss,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Ss,{"number, number":function(i,a){return ws(i,a,r.epsilon)}})});var wA="SparseMatrix",AA=["typed","equalScalar","Matrix"],EA=kt(wA,AA,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(v,_){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(_&&!Gn(_))throw new Error("Invalid datatype: "+_);if(Jr(v))a(this,v,_);else if(v&&Xt(v.index)&&Xt(v.ptr)&&Xt(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=_||v.datatype;else if(Xt(v))s(this,v,_);else{if(v)throw new TypeError("Unsupported type of data ("+uu(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=_}}function a(v,_,D){_.type==="SparseMatrix"?(v._values=_._values?Er(_._values):void 0,v._index=Er(_._index),v._ptr=Er(_._ptr),v._size=Er(_._size),v._datatype=D||_._datatype):s(v,_.valueOf(),D||_._datatype)}function s(v,_,D){v._values=[],v._index=[],v._ptr=[],v._datatype=D;var F=_.length,E=0,C=r,A=0;if(Gn(D)&&(C=e.find(r,[D,D])||r,A=e.convert(0,D)),F>0){var S=0;do{v._ptr.push(v._index.length);for(var P=0;P<F;P++){var B=_[P];if(Xt(B)){if(S===0&&E<B.length&&(E=B.length),S<B.length){var N=B[S];C(N,A)||(v._values.push(N),v._index.push(P))}}else S===0&&E<1&&(E=1),C(B,A)||(v._values.push(B),v._index.push(P))}S++}while(S<E)}v._ptr.push(v._index.length),v._size=[F,E]}i.prototype=new n,i.prototype.createSparseMatrix=function(v,_){return new i(v,_)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return As(this._values,uu)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(v,_){return new i(v,_)},i.prototype.density=function(){var v=this._size[0],_=this._size[1];return v!==0&&_!==0?this._index.length/(v*_):0},i.prototype.subset=function(v,_,D){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,v);case 2:case 3:return f(this,v,_,D);default:throw new SyntaxError("Wrong number of arguments")}};function o(v,_){if(!Tf(_))throw new TypeError("Invalid index");var D=_.isScalar();if(D)return v.get(_.min());var F=_.size();if(F.length!==v._size.length)throw new xt(F.length,v._size.length);var E,C,A,S,P=_.min(),B=_.max();for(E=0,C=v._size.length;E<C;E++)er(P[E],v._size[E]),er(B[E],v._size[E]);var N=v._values,q=v._index,X=v._ptr,K=_.dimension(0),U=_.dimension(1),R=[],z=[];K.forEach(function(se,he){z[se]=he[0],R[se]=!0});var V=N?[]:void 0,Q=[],ae=[];return U.forEach(function(se){for(ae.push(Q.length),A=X[se],S=X[se+1];A<S;A++)E=q[A],R[E]===!0&&(Q.push(z[E]),V&&V.push(N[A]))}),ae.push(Q.length),new i({values:V,index:Q,ptr:ae,size:F,datatype:v._datatype})}function f(v,_,D,F){if(!_||_.isIndex!==!0)throw new TypeError("Invalid index");var E=_.size(),C=_.isScalar(),A;if(Jr(D)?(A=D.size(),D=D.toArray()):A=Ti(D),C){if(A.length!==0)throw new TypeError("Scalar expected");v.set(_.min(),D,F)}else{if(E.length!==1&&E.length!==2)throw new xt(E.length,v._size.length,"<");if(A.length<E.length){for(var S=0,P=0;E[S]===1&&A[S]===1;)S++;for(;E[S]===1;)P++,S++;D=Rp(D,E.length,P,A)}if(!ys(E,A))throw new xt(E,A,">");if(E.length===1){var B=_.dimension(0);B.forEach(function(X,K){er(X),v.set([X,0],D[K[0]],F)})}else{var N=_.dimension(0),q=_.dimension(1);N.forEach(function(X,K){er(X),q.forEach(function(U,R){er(U),v.set([X,U],D[K[0]][R[0]],F)})})}}return v}i.prototype.get=function(v){if(!Xt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new xt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var _=v[0],D=v[1];er(_,this._size[0]),er(D,this._size[1]);var F=p(_,this._ptr[D],this._ptr[D+1],this._index);return F<this._ptr[D+1]&&this._index[F]===_?this._values[F]:0},i.prototype.set=function(v,_,D){if(!Xt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new xt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var F=v[0],E=v[1],C=this._size[0],A=this._size[1],S=r,P=0;Gn(this._datatype)&&(S=e.find(r,[this._datatype,this._datatype])||r,P=e.convert(0,this._datatype)),(F>C-1||E>A-1)&&(d(this,Math.max(F+1,C),Math.max(E+1,A),D),C=this._size[0],A=this._size[1]),er(F,C),er(E,A);var B=p(F,this._ptr[E],this._ptr[E+1],this._index);return B<this._ptr[E+1]&&this._index[B]===F?S(_,P)?c(B,E,this._values,this._index,this._ptr):this._values[B]=_:S(_,P)||h(B,F,E,_,this._values,this._index,this._ptr),this};function p(v,_,D,F){if(D-_===0)return D;for(var E=_;E<D;E++)if(F[E]===v)return E;return _}function c(v,_,D,F,E){D.splice(v,1),F.splice(v,1);for(var C=_+1;C<E.length;C++)E[C]--}function h(v,_,D,F,E,C,A){E.splice(v,0,F),C.splice(v,0,_);for(var S=D+1;S<A.length;S++)A[S]++}i.prototype.resize=function(v,_,D){if(!Ds(v))throw new TypeError("Array or Matrix expected");var F=v.valueOf().map(C=>Array.isArray(C)&&C.length===1?C[0]:C);if(F.length!==2)throw new Error("Only two dimensions matrix are supported");F.forEach(function(C){if(!tr(C)||!Cr(C)||C<0)throw new TypeError("Invalid size, must contain positive integers (size: "+rn(F)+")")});var E=D?this.clone():this;return d(E,F[0],F[1],_)};function d(v,_,D,F){var E=F||0,C=r,A=0;Gn(v._datatype)&&(C=e.find(r,[v._datatype,v._datatype])||r,A=e.convert(0,v._datatype),E=e.convert(E,v._datatype));var S=!C(E,A),P=v._size[0],B=v._size[1],N,q,X;if(D>B){for(q=B;q<D;q++)if(v._ptr[q]=v._values.length,S)for(N=0;N<P;N++)v._values.push(E),v._index.push(N);v._ptr[D]=v._values.length}else D<B&&(v._ptr.splice(D+1,B-D),v._values.splice(v._ptr[D],v._values.length),v._index.splice(v._ptr[D],v._index.length));if(B=D,_>P){if(S){var K=0;for(q=0;q<B;q++){v._ptr[q]=v._ptr[q]+K,X=v._ptr[q+1]+K;var U=0;for(N=P;N<_;N++,U++)v._values.splice(X+U,0,E),v._index.splice(X+U,0,N),K++}v._ptr[B]=v._values.length}}else if(_<P){var R=0;for(q=0;q<B;q++){v._ptr[q]=v._ptr[q]-R;var z=v._ptr[q],V=v._ptr[q+1]-R;for(X=z;X<V;X++)N=v._index[X],N>_-1&&(v._values.splice(X,1),v._index.splice(X,1),R++)}v._ptr[q]=v._values.length}return v._size[0]=_,v._size[1]=D,v}i.prototype.reshape=function(v,_){if(!Xt(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(se){if(!tr(se)||!Cr(se)||se<=-2||se===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+rn(v)+")")});var D=this._size[0]*this._size[1];v=If(v,D);var F=v[0]*v[1];if(D!==F)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var E=_?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return E;for(var C=[],A=0;A<E._ptr.length;A++)for(var S=0;S<E._ptr[A+1]-E._ptr[A];S++)C.push(A);for(var P=E._values.slice(),B=E._index.slice(),N=0;N<E._index.length;N++){var q=B[N],X=C[N],K=q*E._size[1]+X;C[N]=K%v[1],B[N]=Math.floor(K/v[1])}E._values.length=0,E._index.length=0,E._ptr.length=v[1]+1,E._size=v.slice();for(var U=0;U<E._ptr.length;U++)E._ptr[U]=0;for(var R=0;R<P.length;R++){var z=B[R],V=C[R],Q=P[R],ae=p(z,E._ptr[V],E._ptr[V+1],E._index);h(ae,z,V,Q,E._values,E._index,E._ptr)}return E},i.prototype.clone=function(){var v=new i({values:this._values?Er(this._values):void 0,index:Er(this._index),ptr:Er(this._ptr),size:Er(this._size),datatype:this._datatype});return v},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(v,_){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var D=this,F=this._size[0],E=this._size[1],C=Xp(v),A=function(P,B,N){return C===1?v(P):C===2?v(P,[B,N]):v(P,[B,N],D)};return g(this,0,F-1,0,E-1,A,_)};function g(v,_,D,F,E,C,A){var S=[],P=[],B=[],N=r,q=0;Gn(v._datatype)&&(N=e.find(r,[v._datatype,v._datatype])||r,q=e.convert(0,v._datatype));for(var X=function(Fe,je,Ue){Fe=C(Fe,je,Ue),N(Fe,q)||(S.push(Fe),P.push(je))},K=F;K<=E;K++){B.push(S.length);var U=v._ptr[K],R=v._ptr[K+1];if(A)for(var z=U;z<R;z++){var V=v._index[z];V>=_&&V<=D&&X(v._values[z],V-_,K-F)}else{for(var Q={},ae=U;ae<R;ae++){var se=v._index[ae];Q[se]=v._values[ae]}for(var he=_;he<=D;he++){var Ce=he in Q?Q[he]:0;X(Ce,he-_,K-F)}}}return B.push(S.length),new i({values:S,index:P,ptr:B,size:[D-_+1,E-F+1]})}i.prototype.forEach=function(v,_){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var D=this,F=this._size[0],E=this._size[1],C=0;C<E;C++){var A=this._ptr[C],S=this._ptr[C+1];if(_)for(var P=A;P<S;P++){var B=this._index[P];v(this._values[P],[B,C],D)}else{for(var N={},q=A;q<S;q++){var X=this._index[q];N[X]=this._values[q]}for(var K=0;K<F;K++){var U=K in N?N[K]:0;v(U,[K,C],D)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],_=0;_<v;_++)for(var D=this._ptr[_],F=this._ptr[_+1],E=D;E<F;E++){var C=this._index[E];yield{value:this._values[E],index:[C,_]}}},i.prototype.toArray=function(){return b(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return b(this._values,this._index,this._ptr,this._size,!1)};function b(v,_,D,F,E){var C=F[0],A=F[1],S=[],P,B;for(P=0;P<C;P++)for(S[P]=[],B=0;B<A;B++)S[P][B]=0;for(B=0;B<A;B++)for(var N=D[B],q=D[B+1],X=N;X<q;X++)P=_[X],S[P][B]=v?E?Er(v[X]):v[X]:1;return S}return i.prototype.format=function(v){for(var _=this._size[0],D=this._size[1],F=this.density(),E="Sparse Matrix ["+rn(_,v)+" x "+rn(D,v)+"] density: "+rn(F,v)+`
`,C=0;C<D;C++)for(var A=this._ptr[C],S=this._ptr[C+1],P=A;P<S;P++){var B=this._index[P];E+=`
    (`+rn(B,v)+", "+rn(C,v)+") ==> "+(this._values?rn(this._values[P],v):"X")}return E},i.prototype.toString=function(){return rn(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(v){if(v){if(Bn(v)&&(v=v.toNumber()),!tr(v)||!Cr(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var _=v>0?v:0,D=v<0?-v:0,F=this._size[0],E=this._size[1],C=Math.min(F-D,E-_),A=[],S=[],P=[];P[0]=0;for(var B=_;B<E&&A.length<C;B++)for(var N=this._ptr[B],q=this._ptr[B+1],X=N;X<q;X++){var K=this._index[X];if(K===B-_+D){A.push(this._values[X]),S[A.length-1]=K-D;break}}return P.push(A.length),new i({values:A,index:S,ptr:P,size:[C,1]})},i.fromJSON=function(v){return new i(v)},i.diagonal=function(v,_,D,F,E){if(!Xt(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(se){if(Bn(se)&&(se=se.toNumber()),!tr(se)||!Cr(se)||se<1)throw new Error("Size values must be positive integers");return se}),D){if(Bn(D)&&(D=D.toNumber()),!tr(D)||!Cr(D))throw new TypeError("The parameter k must be an integer number")}else D=0;var C=r,A=0;Gn(E)&&(C=e.find(r,[E,E])||r,A=e.convert(0,E));var S=D>0?D:0,P=D<0?-D:0,B=v[0],N=v[1],q=Math.min(B-P,N-S),X;if(Xt(_)){if(_.length!==q)throw new Error("Invalid value array length");X=function(he){return _[he]}}else if(Jr(_)){var K=_.size();if(K.length!==1||K[0]!==q)throw new Error("Invalid matrix length");X=function(he){return _.get([he])}}else X=function(){return _};for(var U=[],R=[],z=[],V=0;V<N;V++){z.push(U.length);var Q=V-S;if(Q>=0&&Q<q){var ae=X(Q);C(ae,A)||(R.push(Q+P),U.push(ae))}}return z.push(U.length),new i({values:U,index:R,ptr:z,size:[B,N]})},i.prototype.swapRows=function(v,_){if(!tr(v)||!Cr(v)||!tr(_)||!Cr(_))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return er(v,this._size[0]),er(_,this._size[0]),i._swapRows(v,_,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(v,_,D,F,E){for(var C=F[v],A=F[v+1],S=C;S<A;S++)E(D[S],_[S])},i._swapRows=function(v,_,D,F,E,C){for(var A=0;A<D;A++){var S=C[A],P=C[A+1],B=p(v,S,P,E),N=p(_,S,P,E);if(B<P&&N<P&&E[B]===v&&E[N]===_){if(F){var q=F[B];F[B]=F[N],F[N]=q}continue}if(B<P&&E[B]===v&&(N>=P||E[N]!==_)){var X=F?F[B]:void 0;E.splice(N,0,_),F&&F.splice(N,0,X),E.splice(N<=B?B+1:B,1),F&&F.splice(N<=B?B+1:B,1);continue}if(N<P&&E[N]===_&&(B>=P||E[B]!==v)){var K=F?F[N]:void 0;E.splice(B,0,v),F&&F.splice(B,0,K),E.splice(B<=N?N+1:N,1),F&&F.splice(B<=N?N+1:N,1)}}},i},{isClass:!0}),E0="matrix",CA=["typed","Matrix","DenseMatrix","SparseMatrix"],FA=kt(E0,CA,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(E0,{"":function(){return a([])},string:function(o){return a([],o)},"string, string":function(o,f){return a([],o,f)},Array:function(o){return a(o)},Matrix:function(o){return a(o,o.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(s,o,f){if(o==="dense"||o==="default"||o===void 0)return new n(s,f);if(o==="sparse")return new i(s,f);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),C0="unaryMinus",SA=["typed"],BA=kt(C0,SA,t=>{var{typed:e}=t;return e(C0,{number:n1,"Complex | BigNumber | Fraction":r=>r.neg(),Unit:e.referToSelf(r=>n=>{var i=n.clone();return i.value=e.find(r,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(r=>n=>to(n,r))})}),F0="addScalar",OA=["typed"],MA=kt(F0,OA,t=>{var{typed:e}=t;return e(F0,{"number, number":t1,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),PA="matAlgo11xS0s",TA=["typed","equalScalar"],kA=kt(PA,TA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s,o){var f=i._values,p=i._index,c=i._ptr,h=i._size,d=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=h[0],b=h[1],v,_=r,D=0,F=s;typeof d=="string"&&(v=d,_=e.find(r,[v,v]),D=e.convert(0,v),a=e.convert(a,v),F=e.find(s,[v,v]));for(var E=[],C=[],A=[],S=0;S<b;S++){A[S]=C.length;for(var P=c[S],B=c[S+1],N=P;N<B;N++){var q=p[N],X=o?F(a,f[N]):F(f[N],a);_(X,D)||(C.push(q),E.push(X))}}return A[b]=C.length,i.createSparseMatrix({values:E,index:C,ptr:A,size:[g,b],datatype:v})}}),IA="matAlgo12xSfs",NA=["typed","DenseMatrix"],xA=kt(IA,NA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,s,o){var f=i._values,p=i._index,c=i._ptr,h=i._size,d=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=h[0],b=h[1],v,_=s;typeof d=="string"&&(v=d,a=e.convert(a,v),_=e.find(s,[v,v]));for(var D=[],F=[],E=[],C=0;C<b;C++){for(var A=C+1,S=c[C],P=c[C+1],B=S;B<P;B++){var N=p[B];F[N]=f[B],E[N]=A}for(var q=0;q<g;q++)C===0&&(D[q]=[]),E[q]===A?D[q][C]=o?_(a,F[q]):_(F[q],a):D[q][C]=o?_(a,0):_(0,a)}return new r({data:D,size:[g,b],datatype:v})}}),RA="matAlgo14xDs",LA=["typed"],i1=kt(RA,LA,t=>{var{typed:e}=t;return function(i,a,s,o){var f=i._data,p=i._size,c=i._datatype,h,d=s;typeof c=="string"&&(h=c,a=e.convert(a,h),d=e.find(s,[h,h]));var g=p.length>0?r(d,0,p,p[0],f,a,o):[];return i.createDenseMatrix({data:g,size:Er(p),datatype:h})};function r(n,i,a,s,o,f,p){var c=[];if(i===a.length-1)for(var h=0;h<s;h++)c[h]=p?n(f,o[h]):n(o[h],f);else for(var d=0;d<s;d++)c[d]=r(n,i+1,a,a[i+1],o[d],f,p);return c}}),UA="matAlgo01xDSid",VA=["typed"],a1=kt(UA,VA,t=>{var{typed:e}=t;return function(n,i,a,s){var o=n._data,f=n._size,p=n._datatype,c=i._values,h=i._index,d=i._ptr,g=i._size,b=i._datatype;if(f.length!==g.length)throw new xt(f.length,g.length);if(f[0]!==g[0]||f[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+g+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=f[0],_=f[1],D=typeof p=="string"&&p===b?p:void 0,F=D?e.find(a,[D,D]):a,E,C,A=[];for(E=0;E<v;E++)A[E]=[];var S=[],P=[];for(C=0;C<_;C++){for(var B=C+1,N=d[C],q=d[C+1],X=N;X<q;X++)E=h[X],S[E]=s?F(c[X],o[E][C]):F(o[E][C],c[X]),P[E]=B;for(E=0;E<v;E++)P[E]===B?A[E][C]=S[E]:A[E][C]=o[E][C]}return n.createDenseMatrix({data:A,size:[v,_],datatype:D})}}),jA="matAlgo04xSidSid",qA=["typed","equalScalar"],zA=kt(jA,qA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s){var o=i._values,f=i._index,p=i._ptr,c=i._size,h=i._datatype,d=a._values,g=a._index,b=a._ptr,v=a._size,_=a._datatype;if(c.length!==v.length)throw new xt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var D=c[0],F=c[1],E,C=r,A=0,S=s;typeof h=="string"&&h===_&&(E=h,C=e.find(r,[E,E]),A=e.convert(0,E),S=e.find(s,[E,E]));var P=o&&d?[]:void 0,B=[],N=[],q=o&&d?[]:void 0,X=o&&d?[]:void 0,K=[],U=[],R,z,V,Q,ae;for(z=0;z<F;z++){N[z]=B.length;var se=z+1;for(Q=p[z],ae=p[z+1],V=Q;V<ae;V++)R=f[V],B.push(R),K[R]=se,q&&(q[R]=o[V]);for(Q=b[z],ae=b[z+1],V=Q;V<ae;V++)if(R=g[V],K[R]===se){if(q){var he=S(q[R],d[V]);C(he,A)?K[R]=null:q[R]=he}}else B.push(R),U[R]=se,X&&(X[R]=d[V]);if(q&&X)for(V=N[z];V<B.length;)R=B[V],K[R]===se?(P[V]=q[R],V++):U[R]===se?(P[V]=X[R],V++):B.splice(V,1)}return N[F]=B.length,i.createSparseMatrix({values:P,index:B,ptr:N,size:[D,F],datatype:E})}}),WA="matAlgo10xSids",HA=["typed","DenseMatrix"],u1=kt(WA,HA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,s,o){var f=i._values,p=i._index,c=i._ptr,h=i._size,d=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=h[0],b=h[1],v,_=s;typeof d=="string"&&(v=d,a=e.convert(a,v),_=e.find(s,[v,v]));for(var D=[],F=[],E=[],C=0;C<b;C++){for(var A=C+1,S=c[C],P=c[C+1],B=S;B<P;B++){var N=p[B];F[N]=f[B],E[N]=A}for(var q=0;q<g;q++)C===0&&(D[q]=[]),E[q]===A?D[q][C]=o?_(a,F[q]):_(F[q],a):D[q][C]=a}return new r({data:D,size:[g,b],datatype:v})}}),$A="matAlgo13xDD",GA=["typed"],KA=kt($A,GA,t=>{var{typed:e}=t;return function(i,a,s){var o=i._data,f=i._size,p=i._datatype,c=a._data,h=a._size,d=a._datatype,g=[];if(f.length!==h.length)throw new xt(f.length,h.length);for(var b=0;b<f.length;b++){if(f[b]!==h[b])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+h+")");g[b]=f[b]}var v,_=s;typeof p=="string"&&p===d&&(v=p,_=e.find(s,[v,v]));var D=g.length>0?r(_,0,g,g[0],o,c):[];return i.createDenseMatrix({data:D,size:g,datatype:v})};function r(n,i,a,s,o,f){var p=[];if(i===a.length-1)for(var c=0;c<s;c++)p[c]=n(o[c],f[c]);else for(var h=0;h<s;h++)p[h]=r(n,i+1,a,a[i+1],o[h],f[h]);return p}}),YA="broadcast",ZA=["concat"],JA=kt(YA,ZA,t=>{var{concat:e}=t;return function(a,s){var o=Math.max(a._size.length,s._size.length);if(a._size.length===s._size.length&&a._size.every((_,D)=>_===s._size[D]))return[a,s];for(var f=r(a._size,o,0),p=r(s._size,o,0),c=[],h=0;h<o;h++)c[h]=Math.max(f[h],p[h]);for(var d=0;d<o;d++)i(f,c,d),i(p,c,d);var g=a.clone(),b=s.clone();g._size.length<o?g.reshape(r(g._size,o,1)):b._size.length<o&&b.reshape(r(b._size,o,1));for(var v=0;v<o;v++)g._size[v]<c[v]&&(g=n(g,c[v],v)),b._size[v]<c[v]&&(b=n(b,c[v],v));return[g,b]};function r(a,s,o){return[...Array(s-a.length).fill(o),...a]}function n(a,s,o){return e(...Array(s).fill(a),o)}function i(a,s,o){if(a[o]<s[o]&a[o]>1)throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(a,") not possible to broadcast dimension ").concat(o," with size ").concat(a[o]," to size ").concat(s[o]))}}),QA="matrixAlgorithmSuite",XA=["typed","matrix","concat"],s1=kt(QA,XA,t=>{var{typed:e,matrix:r,concat:n}=t,i=KA({typed:e}),a=i1({typed:e}),s=JA({concat:n});return function(f){var p=f.elop,c=f.SD||f.DS,h;p?(h={"DenseMatrix, DenseMatrix":(v,_)=>i(...s(v,_),p),"Array, Array":(v,_)=>i(...s(r(v),r(_)),p).valueOf(),"Array, DenseMatrix":(v,_)=>i(...s(r(v),_),p),"DenseMatrix, Array":(v,_)=>i(...s(v,r(_)),p)},f.SS&&(h["SparseMatrix, SparseMatrix"]=(v,_)=>f.SS(...s(v,_),p,!1)),f.DS&&(h["DenseMatrix, SparseMatrix"]=(v,_)=>f.DS(...s(v,_),p,!1),h["Array, SparseMatrix"]=(v,_)=>f.DS(...s(r(v),_),p,!1)),c&&(h["SparseMatrix, DenseMatrix"]=(v,_)=>c(...s(_,v),p,!0),h["SparseMatrix, Array"]=(v,_)=>c(...s(r(_),v),p,!0))):(h={"DenseMatrix, DenseMatrix":e.referToSelf(v=>(_,D)=>i(...s(_,D),v)),"Array, Array":e.referToSelf(v=>(_,D)=>i(...s(r(_),r(D)),v).valueOf()),"Array, DenseMatrix":e.referToSelf(v=>(_,D)=>i(...s(r(_),D),v)),"DenseMatrix, Array":e.referToSelf(v=>(_,D)=>i(...s(_,r(D)),v))},f.SS&&(h["SparseMatrix, SparseMatrix"]=e.referToSelf(v=>(_,D)=>f.SS(...s(_,D),v,!1))),f.DS&&(h["DenseMatrix, SparseMatrix"]=e.referToSelf(v=>(_,D)=>f.DS(...s(_,D),v,!1)),h["Array, SparseMatrix"]=e.referToSelf(v=>(_,D)=>f.DS(...s(r(_),D),v,!1))),c&&(h["SparseMatrix, DenseMatrix"]=e.referToSelf(v=>(_,D)=>c(...s(D,_),v,!0)),h["SparseMatrix, Array"]=e.referToSelf(v=>(_,D)=>c(...s(r(D),_),v,!0))));var d=f.scalar||"any",g=f.Ds||f.Ss;g&&(p?(h["DenseMatrix,"+d]=(v,_)=>a(v,_,p,!1),h[d+", DenseMatrix"]=(v,_)=>a(_,v,p,!0),h["Array,"+d]=(v,_)=>a(r(v),_,p,!1).valueOf(),h[d+", Array"]=(v,_)=>a(r(_),v,p,!0).valueOf()):(h["DenseMatrix,"+d]=e.referToSelf(v=>(_,D)=>a(_,D,v,!1)),h[d+", DenseMatrix"]=e.referToSelf(v=>(_,D)=>a(D,_,v,!0)),h["Array,"+d]=e.referToSelf(v=>(_,D)=>a(r(_),D,v,!1).valueOf()),h[d+", Array"]=e.referToSelf(v=>(_,D)=>a(r(D),_,v,!0).valueOf())));var b=f.sS!==void 0?f.sS:f.Ss;return p?(f.Ss&&(h["SparseMatrix,"+d]=(v,_)=>f.Ss(v,_,p,!1)),b&&(h[d+", SparseMatrix"]=(v,_)=>b(_,v,p,!0))):(f.Ss&&(h["SparseMatrix,"+d]=e.referToSelf(v=>(_,D)=>f.Ss(_,D,v,!1))),b&&(h[d+", SparseMatrix"]=e.referToSelf(v=>(_,D)=>b(D,_,v,!0)))),p&&p.signatures&&Fw(h,p.signatures),h}}),eE="matAlgo03xDSf",tE=["typed"],rE=kt(eE,tE,t=>{var{typed:e}=t;return function(n,i,a,s){var o=n._data,f=n._size,p=n._datatype,c=i._values,h=i._index,d=i._ptr,g=i._size,b=i._datatype;if(f.length!==g.length)throw new xt(f.length,g.length);if(f[0]!==g[0]||f[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+g+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=f[0],_=f[1],D,F=0,E=a;typeof p=="string"&&p===b&&(D=p,F=e.convert(0,D),E=e.find(a,[D,D]));for(var C=[],A=0;A<v;A++)C[A]=[];for(var S=[],P=[],B=0;B<_;B++){for(var N=B+1,q=d[B],X=d[B+1],K=q;K<X;K++){var U=h[K];S[U]=s?E(c[K],o[U][B]):E(o[U][B],c[K]),P[U]=N}for(var R=0;R<v;R++)P[R]===N?C[R][B]=S[R]:C[R][B]=s?E(F,o[R][B]):E(o[R][B],F)}return n.createDenseMatrix({data:C,size:[v,_],datatype:D})}}),nE="matAlgo05xSfSf",iE=["typed","equalScalar"],aE=kt(nE,iE,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s){var o=i._values,f=i._index,p=i._ptr,c=i._size,h=i._datatype,d=a._values,g=a._index,b=a._ptr,v=a._size,_=a._datatype;if(c.length!==v.length)throw new xt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var D=c[0],F=c[1],E,C=r,A=0,S=s;typeof h=="string"&&h===_&&(E=h,C=e.find(r,[E,E]),A=e.convert(0,E),S=e.find(s,[E,E]));var P=o&&d?[]:void 0,B=[],N=[],q=P?[]:void 0,X=P?[]:void 0,K=[],U=[],R,z,V,Q;for(z=0;z<F;z++){N[z]=B.length;var ae=z+1;for(V=p[z],Q=p[z+1];V<Q;V++)R=f[V],B.push(R),K[R]=ae,q&&(q[R]=o[V]);for(V=b[z],Q=b[z+1];V<Q;V++)R=g[V],K[R]!==ae&&B.push(R),U[R]=ae,X&&(X[R]=d[V]);if(P)for(V=N[z];V<B.length;){R=B[V];var se=K[R],he=U[R];if(se===ae||he===ae){var Ce=se===ae?q[R]:A,Be=he===ae?X[R]:A,Fe=S(Ce,Be);C(Fe,A)?B.splice(V,1):(P.push(Fe),V++)}}}return N[F]=B.length,i.createSparseMatrix({values:P,index:B,ptr:N,size:[D,F],datatype:E})}}),uE="multiplyScalar",sE=["typed"],oE=kt(uE,sE,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":r1,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),S0="multiply",lE=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],fE=kt(S0,lE,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:a,dot:s}=t,o=kA({typed:e,equalScalar:a}),f=i1({typed:e});function p(A,S){switch(A.length){case 1:switch(S.length){case 1:if(A[0]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(A[0]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+A[0]+") must match Matrix rows ("+S[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+S.length+" dimensions)")}break;case 2:switch(S.length){case 1:if(A[1]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+A[1]+") must match Vector length ("+S[0]+")");break;case 2:if(A[1]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+A[1]+") must match Matrix B rows ("+S[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+S.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+A.length+" dimensions)")}}function c(A,S,P){if(P===0)throw new Error("Cannot multiply two empty vectors");return s(A,S)}function h(A,S){if(S.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(A,S)}function d(A,S){var P=A._data,B=A._size,N=A._datatype,q=S._data,X=S._size,K=S._datatype,U=B[0],R=X[1],z,V=n,Q=i;N&&K&&N===K&&typeof N=="string"&&(z=N,V=e.find(n,[z,z]),Q=e.find(i,[z,z]));for(var ae=[],se=0;se<R;se++){for(var he=Q(P[0],q[0][se]),Ce=1;Ce<U;Ce++)he=V(he,Q(P[Ce],q[Ce][se]));ae[se]=he}return A.createDenseMatrix({data:ae,size:[R],datatype:z})}var g=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":F}),b=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":_,"DenseMatrix, SparseMatrix":D,"SparseMatrix, DenseMatrix":E,"SparseMatrix, SparseMatrix":C});function v(A,S){var P=A._data,B=A._size,N=A._datatype,q=S._data,X=S._datatype,K=B[0],U=B[1],R,z=n,V=i;N&&X&&N===X&&typeof N=="string"&&(R=N,z=e.find(n,[R,R]),V=e.find(i,[R,R]));for(var Q=[],ae=0;ae<K;ae++){for(var se=P[ae],he=V(se[0],q[0]),Ce=1;Ce<U;Ce++)he=z(he,V(se[Ce],q[Ce]));Q[ae]=he}return A.createDenseMatrix({data:Q,size:[K],datatype:R})}function _(A,S){var P=A._data,B=A._size,N=A._datatype,q=S._data,X=S._size,K=S._datatype,U=B[0],R=B[1],z=X[1],V,Q=n,ae=i;N&&K&&N===K&&typeof N=="string"&&(V=N,Q=e.find(n,[V,V]),ae=e.find(i,[V,V]));for(var se=[],he=0;he<U;he++){var Ce=P[he];se[he]=[];for(var Be=0;Be<z;Be++){for(var Fe=ae(Ce[0],q[0][Be]),je=1;je<R;je++)Fe=Q(Fe,ae(Ce[je],q[je][Be]));se[he][Be]=Fe}}return A.createDenseMatrix({data:se,size:[U,z],datatype:V})}function D(A,S){var P=A._data,B=A._size,N=A._datatype,q=S._values,X=S._index,K=S._ptr,U=S._size,R=S._datatype;if(!q)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var z=B[0],V=U[1],Q,ae=n,se=i,he=a,Ce=0;N&&R&&N===R&&typeof N=="string"&&(Q=N,ae=e.find(n,[Q,Q]),se=e.find(i,[Q,Q]),he=e.find(a,[Q,Q]),Ce=e.convert(0,Q));for(var Be=[],Fe=[],je=[],Ue=S.createSparseMatrix({values:Be,index:Fe,ptr:je,size:[z,V],datatype:Q}),Ve=0;Ve<V;Ve++){je[Ve]=Fe.length;var ot=K[Ve],Dt=K[Ve+1];if(Dt>ot)for(var rt=0,it=0;it<z;it++){for(var St=it+1,nt=void 0,ht=ot;ht<Dt;ht++){var lt=X[ht];rt!==St?(nt=se(P[it][lt],q[ht]),rt=St):nt=ae(nt,se(P[it][lt],q[ht]))}rt===St&&!he(nt,Ce)&&(Fe.push(it),Be.push(nt))}}return je[V]=Fe.length,Ue}function F(A,S){var P=A._values,B=A._index,N=A._ptr,q=A._datatype;if(!P)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var X=S._data,K=S._datatype,U=A._size[0],R=S._size[0],z=[],V=[],Q=[],ae,se=n,he=i,Ce=a,Be=0;q&&K&&q===K&&typeof q=="string"&&(ae=q,se=e.find(n,[ae,ae]),he=e.find(i,[ae,ae]),Ce=e.find(a,[ae,ae]),Be=e.convert(0,ae));var Fe=[],je=[];Q[0]=0;for(var Ue=0;Ue<R;Ue++){var Ve=X[Ue];if(!Ce(Ve,Be))for(var ot=N[Ue],Dt=N[Ue+1],rt=ot;rt<Dt;rt++){var it=B[rt];je[it]?Fe[it]=se(Fe[it],he(Ve,P[rt])):(je[it]=!0,V.push(it),Fe[it]=he(Ve,P[rt]))}}for(var St=V.length,nt=0;nt<St;nt++){var ht=V[nt];z[nt]=Fe[ht]}return Q[1]=V.length,A.createSparseMatrix({values:z,index:V,ptr:Q,size:[U,1],datatype:ae})}function E(A,S){var P=A._values,B=A._index,N=A._ptr,q=A._datatype;if(!P)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var X=S._data,K=S._datatype,U=A._size[0],R=S._size[0],z=S._size[1],V,Q=n,ae=i,se=a,he=0;q&&K&&q===K&&typeof q=="string"&&(V=q,Q=e.find(n,[V,V]),ae=e.find(i,[V,V]),se=e.find(a,[V,V]),he=e.convert(0,V));for(var Ce=[],Be=[],Fe=[],je=A.createSparseMatrix({values:Ce,index:Be,ptr:Fe,size:[U,z],datatype:V}),Ue=[],Ve=[],ot=0;ot<z;ot++){Fe[ot]=Be.length;for(var Dt=ot+1,rt=0;rt<R;rt++){var it=X[rt][ot];if(!se(it,he))for(var St=N[rt],nt=N[rt+1],ht=St;ht<nt;ht++){var lt=B[ht];Ve[lt]!==Dt?(Ve[lt]=Dt,Be.push(lt),Ue[lt]=ae(it,P[ht])):Ue[lt]=Q(Ue[lt],ae(it,P[ht]))}}for(var ft=Fe[ot],Ke=Be.length,Ye=ft;Ye<Ke;Ye++){var Ee=Be[Ye];Ce[Ye]=Ue[Ee]}}return Fe[z]=Be.length,je}function C(A,S){var P=A._values,B=A._index,N=A._ptr,q=A._datatype,X=S._values,K=S._index,U=S._ptr,R=S._datatype,z=A._size[0],V=S._size[1],Q=P&&X,ae,se=n,he=i;q&&R&&q===R&&typeof q=="string"&&(ae=q,se=e.find(n,[ae,ae]),he=e.find(i,[ae,ae]));for(var Ce=Q?[]:void 0,Be=[],Fe=[],je=A.createSparseMatrix({values:Ce,index:Be,ptr:Fe,size:[z,V],datatype:ae}),Ue=Q?[]:void 0,Ve=[],ot,Dt,rt,it,St,nt,ht,lt,ft=0;ft<V;ft++){Fe[ft]=Be.length;var Ke=ft+1;for(St=U[ft],nt=U[ft+1],it=St;it<nt;it++)if(lt=K[it],Q)for(Dt=N[lt],rt=N[lt+1],ot=Dt;ot<rt;ot++)ht=B[ot],Ve[ht]!==Ke?(Ve[ht]=Ke,Be.push(ht),Ue[ht]=he(X[it],P[ot])):Ue[ht]=se(Ue[ht],he(X[it],P[ot]));else for(Dt=N[lt],rt=N[lt+1],ot=Dt;ot<rt;ot++)ht=B[ot],Ve[ht]!==Ke&&(Ve[ht]=Ke,Be.push(ht));if(Q)for(var Ye=Fe[ft],Ee=Be.length,Ne=Ye;Ne<Ee;Ne++){var Mt=Be[Ne];Ce[Ne]=Ue[Mt]}}return Fe[V]=Be.length,je}return e(S0,i,{"Array, Array":e.referTo("Matrix, Matrix",A=>(S,P)=>{p(Ti(S),Ti(P));var B=A(r(S),r(P));return Jr(B)?B.valueOf():B}),"Matrix, Matrix":function(S,P){var B=S.size(),N=P.size();return p(B,N),B.length===1?N.length===1?c(S,P,B[0]):h(S,P):N.length===1?g(S,P):b(S,P)},"Matrix, Array":e.referTo("Matrix,Matrix",A=>(S,P)=>A(S,r(P))),"Array, Matrix":e.referToSelf(A=>(S,P)=>A(r(S,P.storage()),P)),"SparseMatrix, any":function(S,P){return o(S,P,i,!1)},"DenseMatrix, any":function(S,P){return f(S,P,i,!1)},"any, SparseMatrix":function(S,P){return o(P,S,i,!0)},"any, DenseMatrix":function(S,P){return f(P,S,i,!0)},"Array, any":function(S,P){return f(r(S),P,i,!1).valueOf()},"any, Array":function(S,P){return f(r(P),S,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(A=>(S,P,B)=>{for(var N=A(S,P),q=0;q<B.length;q++)N=A(N,B[q]);return N})})}),B0="subtract",cE=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix","concat"],hE=kt(B0,cE,t=>{var{typed:e,matrix:r,equalScalar:n,addScalar:i,unaryMinus:a,DenseMatrix:s,concat:o}=t,f=a1({typed:e}),p=rE({typed:e}),c=aE({typed:e,equalScalar:n}),h=u1({typed:e,DenseMatrix:s}),d=xA({typed:e,DenseMatrix:s}),g=s1({typed:e,matrix:r,concat:o});return e(B0,{"number, number":(b,v)=>b-v,"Complex, Complex":(b,v)=>b.sub(v),"BigNumber, BigNumber":(b,v)=>b.minus(v),"Fraction, Fraction":(b,v)=>b.sub(v),"Unit, Unit":e.referToSelf(b=>(v,_)=>{if(v.value===null)throw new Error("Parameter x contains a unit with undefined value");if(_.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!v.equalBase(_))throw new Error("Units do not match");var D=v.clone();return D.value=e.find(b,[D.valueType(),_.valueType()])(D.value,_.value),D.fixPrefix=!1,D})},g({SS:c,DS:f,SD:p,Ss:d,sS:h}))}),O0="conj",dE=["typed"],pE=kt(O0,dE,t=>{var{typed:e}=t;return e(O0,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":e.referToSelf(r=>n=>to(n,r))})}),M0="concat",vE=["typed","matrix","isInteger"],gE=kt(M0,vE,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(M0,{"...Array | Matrix | number | BigNumber":function(a){var s,o=a.length,f=-1,p,c=!1,h=[];for(s=0;s<o;s++){var d=a[s];if(Jr(d)&&(c=!0),tr(d)||Bn(d)){if(s!==o-1)throw new Error("Dimension must be specified as last argument");if(p=f,f=d.valueOf(),!n(f))throw new TypeError("Integer number expected for dimension");if(f<0||s>0&&f>p)throw new Ji(f,p+1)}else{var g=Er(d).valueOf(),b=Ti(g);if(h[s]=g,p=f,f=b.length-1,s>0&&f!==p)throw new xt(p+1,f+1)}}if(h.length===0)throw new SyntaxError("At least one matrix expected");for(var v=h.shift();h.length;)v=o1(v,h.shift(),f,0);return c?r(v):v},"...string":function(a){return a.join("")}})});function o1(t,e,r,n){if(n<r){if(t.length!==e.length)throw new xt(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=o1(t[a],e[a],r,n+1);return i}else return t.concat(e)}function mE(){throw new Error('No "matrix" implementation available')}var P0="size",_E=["typed","config","?matrix"],bE=kt(P0,_E,t=>{var{typed:e,config:r,matrix:n}=t;return e(P0,{Matrix:function(a){return a.create(a.size())},Array:Ti,string:function(a){return r.matrix==="Array"?[a.length]:n([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return r.matrix==="Array"?[]:n?n([]):mE()}})}),T0="add",DE=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],yE=kt(T0,DE,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:a,SparseMatrix:s,concat:o}=t,f=a1({typed:e}),p=zA({typed:e,equalScalar:i}),c=u1({typed:e,DenseMatrix:a}),h=s1({typed:e,matrix:r,concat:o});return e(T0,{"any, any":n,"any, any, ...any":e.referToSelf(d=>(g,b,v)=>{for(var _=d(g,b),D=0;D<v.length;D++)_=d(_,v[D]);return _})},h({elop:n,DS:f,SS:p,Ss:c}))}),k0="dot",wE=["typed","addScalar","multiplyScalar","conj","size"],AE=kt(k0,wE,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:a}=t;return e(k0,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":f});function s(c,h){var d=p(c),g=p(h),b,v;if(d.length===1)b=d[0];else if(d.length===2&&d[1]===1)b=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(g.length===1)v=g[0];else if(g.length===2&&g[1]===1)v=g[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+g.join(", ")+")");if(b!==v)throw new RangeError("Vectors must have equal length ("+b+" != "+v+")");if(b===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return b}function o(c,h){var d=s(c,h),g=Jr(c)?c._data:c,b=Jr(c)?c._datatype:void 0,v=Jr(h)?h._data:h,_=Jr(h)?h._datatype:void 0,D=p(c).length===2,F=p(h).length===2,E=r,C=n;if(b&&_&&b===_&&typeof b=="string"){var A=b;E=e.find(r,[A,A]),C=e.find(n,[A,A])}if(!D&&!F){for(var S=C(i(g[0]),v[0]),P=1;P<d;P++)S=E(S,C(i(g[P]),v[P]));return S}if(!D&&F){for(var B=C(i(g[0]),v[0][0]),N=1;N<d;N++)B=E(B,C(i(g[N]),v[N][0]));return B}if(D&&!F){for(var q=C(i(g[0][0]),v[0]),X=1;X<d;X++)q=E(q,C(i(g[X][0]),v[X]));return q}if(D&&F){for(var K=C(i(g[0][0]),v[0][0]),U=1;U<d;U++)K=E(K,C(i(g[U][0]),v[U][0]));return K}}function f(c,h){s(c,h);for(var d=c._index,g=c._values,b=h._index,v=h._values,_=0,D=r,F=n,E=0,C=0;E<d.length&&C<b.length;){var A=d[E],S=b[C];if(A<S){E++;continue}if(A>S){C++;continue}A===S&&(_=D(_,F(g[E],v[C])),E++,C++)}return _}function p(c){return Jr(c)?c.size():a(c)}}),EE=X2({config:Ys}),CE=nA({}),FE=sA({}),Rf=fA({}),ro=dA({Matrix:Rf}),un=r2({BigNumber:EE,Complex:CE,DenseMatrix:ro,Fraction:FE}),no=MA({typed:un}),SE=pE({typed:un}),io=yA({config:Ys,typed:un}),BE=vA({typed:un}),l1=oE({typed:un}),f1=EA({Matrix:Rf,equalScalar:io,typed:un}),OE=BA({typed:un}),gu=FA({DenseMatrix:ro,Matrix:Rf,SparseMatrix:f1,typed:un}),ME=bE({matrix:gu,config:Ys,typed:un}),c1=gE({isInteger:BE,matrix:gu,typed:un}),xr=yE({DenseMatrix:ro,SparseMatrix:f1,addScalar:no,concat:c1,equalScalar:io,matrix:gu,typed:un}),PE=AE({addScalar:no,conj:SE,multiplyScalar:l1,size:ME,typed:un}),Hr=fE({addScalar:no,dot:PE,equalScalar:io,matrix:gu,multiplyScalar:l1,typed:un}),ss=hE({DenseMatrix:ro,addScalar:no,concat:c1,equalScalar:io,matrix:gu,typed:un,unaryMinus:OE}),_t=(t=>(t.Circle="circle",t.Ring="ring",t.Bars="bars",t.Embed="embed",t.Pie="pie",t))(_t||{}),vn=(t=>(t.Build="build",t.Concept="concept",t.History="history",t))(vn||{});const Sl="appState";function TE(){const t=Sr(vn.Build),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Sl]||vn.Build),{subscribe:e,update:a=>{!a||!i||(localStorage[Sl]=a,r(a))},get:()=>bt(t),delete:()=>{i&&(delete localStorage[Sl],r(vn.Build))}}}const mf=TE(),h1=jr(mf,t=>bt(mf));function kE(t){let e,r,n,i,a,s,o,f;return{c(){e=Y("div"),r=Y("button"),n=ke("Build"),i=Me(),a=Y("button"),s=ke("History"),this.h()},l(p){e=Z(p,"DIV",{class:!0});var c=H(e);r=Z(c,"BUTTON",{class:!0});var h=H(r);n=Ie(h,"Build"),h.forEach(k),i=Pe(c),a=Z(c,"BUTTON",{class:!0});var d=H(a);s=Ie(d,"History"),d.forEach(k),c.forEach(k),this.h()},h(){O(r,"class","btn btn-sm"),Ft(r,"btn-active",t[0]===vn.Build),O(a,"class","btn btn-sm"),Ft(a,"btn-active",t[0]===vn.History),O(e,"class","btn-group btn-group-horizontal w-full flex justify-end p-2")},m(p,c){fe(p,e,c),L(e,r),L(r,n),L(e,i),L(e,a),L(a,s),o||(f=[be(r,"click",t[2]),be(a,"click",t[3])],o=!0)},p(p,[c]){c&1&&Ft(r,"btn-active",p[0]===vn.Build),c&1&&Ft(a,"btn-active",p[0]===vn.History)},i:Se,o:Se,d(p){p&&k(e),o=!1,rr(f)}}}function IE(t,e,r){let n;tt(t,h1,o=>r(0,n=o));function i(o){mf.update(o)}return[n,i,()=>i(vn.Build),()=>i(vn.History)]}class NE extends at{constructor(e){super(),ut(this,e,IE,kE,st,{})}}function xE(t){let e,r,n,i;return{c(){e=vt("svg"),r=vt("rect"),n=vt("rect"),i=vt("rect"),this.h()},l(a){e=gt(a,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var s=H(e);r=gt(s,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),H(r).forEach(k),n=gt(s,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),H(n).forEach(k),i=gt(s,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),H(i).forEach(k),s.forEach(k),this.h()},h(){O(r,"x","5"),O(r,"y","12"),O(r,"width","40"),O(r,"height","4"),O(r,"fill","rgba(255,255,255, 0.7)"),O(n,"x","5"),O(n,"y","23"),O(n,"width","30"),O(n,"height","4"),O(n,"fill","rgba(255,255,255, 0.7)"),O(i,"x","5"),O(i,"y","34"),O(i,"width","35"),O(i,"height","4"),O(i,"fill","rgba(255,255,255, 0.7)"),O(e,"xmlns","http://www.w3.org/2000/svg"),O(e,"fill","rgba(255,255,255, 0.7)"),O(e,"class","h-6 w-6"),O(e,"viewBox","0 0 50 50")},m(a,s){fe(a,e,s),L(e,r),L(e,n),L(e,i)},p:Se,i:Se,o:Se,d(a){a&&k(e)}}}class RE extends at{constructor(e){super(),ut(this,e,null,xE,st,{})}}function LE(t){let e,r;return{c(){e=vt("svg"),r=vt("circle"),this.h()},l(n){e=gt(n,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var i=H(e);r=gt(i,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),H(r).forEach(k),i.forEach(k),this.h()},h(){O(r,"cx","25"),O(r,"cy","25"),O(r,"r","20"),O(r,"fill","rgba(255,255,255, 0.7)"),O(e,"xmlns","http://www.w3.org/2000/svg"),O(e,"fill","rgba(255,255,255, 0.7)"),O(e,"class","h-6 w-6"),O(e,"viewBox","0 0 50 50")},m(n,i){fe(n,e,i),L(e,r)},p:Se,i:Se,o:Se,d(n){n&&k(e)}}}class UE extends at{constructor(e){super(),ut(this,e,null,LE,st,{})}}function VE(t){let e,r,n,i,a,s;return{c(){e=vt("svg"),r=vt("circle"),n=vt("circle"),i=vt("circle"),a=vt("circle"),s=vt("circle"),this.h()},l(o){e=gt(o,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var f=H(e);r=gt(f,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),H(r).forEach(k),n=gt(f,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),H(n).forEach(k),i=gt(f,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),H(i).forEach(k),a=gt(f,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),H(a).forEach(k),s=gt(f,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),H(s).forEach(k),f.forEach(k),this.h()},h(){O(r,"cx","20"),O(r,"cy","80"),O(r,"r","5"),O(r,"fill","rgba(255,255,255, 0.7)"),O(n,"cx","40"),O(n,"cy","40"),O(n,"r","5"),O(n,"fill","rgba(255,255,255, 0.7)"),O(i,"cx","70"),O(i,"cy","20"),O(i,"r","5"),O(i,"fill","rgba(255,255,255, 0.7)"),O(a,"cx","80"),O(a,"cy","60"),O(a,"r","5"),O(a,"fill","rgba(255,255,255, 0.7)"),O(s,"cx","60"),O(s,"cy","75"),O(s,"r","5"),O(s,"fill","rgba(255,255,255, 0.7)"),O(e,"xmlns","http://www.w3.org/2000/svg"),O(e,"fill","rgba(255,255,255, 0.7)"),O(e,"class","h-6 w-6"),O(e,"viewBox","0 0 100 100")},m(o,f){fe(o,e,f),L(e,r),L(e,n),L(e,i),L(e,a),L(e,s)},p:Se,i:Se,o:Se,d(o){o&&k(e)}}}class jE extends at{constructor(e){super(),ut(this,e,null,VE,st,{})}}const Bl="selectedPromptStore";function qE(){const t=Sr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Bl]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[Bl]=a,r(a))},get:()=>bt(t),delete:()=>{i&&(delete localStorage[Bl],r(""))}}}const Yi=qE(),d1=jr(Yi,t=>bt(Yi));function zE(){const t=Sr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,s)=>{if(s.startsWith("prompt_")){const o=s.split("_")[1];a[o]=JSON.parse(localStorage[s])}return a},{})||{}),{subscribe:e,update:(a,s)=>{const o=bt(t),p={...o[a]||{},...s};i&&(localStorage[`prompt_${a}`]=JSON.stringify(p));const c={...o,[a]:p};r(c)},get:a=>bt(t)[a],delete:a=>{i&&delete localStorage[`prompt_${a}`];const s={...bt(t)};delete s[a],r(s)}}}const fu=zE(),WE=jr(fu,t=>Object.entries(bt(fu))),os="activePromptStore";function Ir(t,e,r,n=1){return{id:t,text:e,barWeight:n,parsedWeight:r}}function I0(){return{0:Ir(0,"Magic potion in a mystical bottle",1),1:Ir(1,"A crystalline decanter",1),2:Ir(2,"An ornate tequila bottle",1),3:Ir(3,"An antique sake bottle",1),4:Ir(4,"A colorful perfume bottle",1),5:Ir(5,"A glass vase full of vibrant flowers",1),6:Ir(6,"A minimalist glass tea kettle",1),7:Ir(7,"Chihuly glass art",1),8:Ir(8,"A fine wine bottle",1),9:Ir(9,"A gourmet vinegar bottle",1),10:Ir(10,"A stunning fishbowl",1),11:Ir(11,"A striking piece of tourmaline",1),12:Ir(12,"A finely cut piece of sapphire",1),13:Ir(13,"Iittala glass art",1)}}function Oi(t,e=_t.Pie){return{weightedPrompts:t||{},weightMode:e,pieAngles:{},ringAngles:{},ringStartAngle:0,ringReverse:!1,ringWeightScaling:2,ringExponentialScaling:!0,circleAngles:{},circleMarker:[270,.33],circleWeightScaling:2,circleExponentialScaling:!0,embeddings:{},embedWeightScaling:2,embedExponentialScaling:!0,embedClusters:0,embedPromptLimit:Object.keys(t).length}}function HE(){const t=Sr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",a=i&&localStorage[os]?JSON.parse(localStorage[os]):Oi(I0());return r({...Oi({}),...a}),{subscribe:e,update:s=>{const o=Yi.get();o&&fu.update(o,s),!(!s||!i)&&(localStorage[os]=JSON.stringify(s),r({...Oi({}),...s}))},get:()=>bt(t),delete:()=>{i&&(delete localStorage[os],r(Oi(I0())))}}}const Pt=HE(),Br=jr(Pt,t=>bt(Pt));function $E(t){let e,r,n,i,a,s,o,f,p,c,h,d;return n=new RE({}),s=new UE({}),p=new jE({}),{c(){e=Y("div"),r=Y("button"),ze(n.$$.fragment),i=Me(),a=Y("button"),ze(s.$$.fragment),o=Me(),f=Y("button"),ze(p.$$.fragment),this.h()},l(g){e=Z(g,"DIV",{class:!0});var b=H(e);r=Z(b,"BUTTON",{class:!0});var v=H(r);We(n.$$.fragment,v),v.forEach(k),i=Pe(b),a=Z(b,"BUTTON",{class:!0});var _=H(a);We(s.$$.fragment,_),_.forEach(k),o=Pe(b),f=Z(b,"BUTTON",{class:!0});var D=H(f);We(p.$$.fragment,D),D.forEach(k),b.forEach(k),this.h()},h(){O(r,"class","btn btn-sm"),Ft(r,"btn-active",t[0].weightMode===_t.Bars),O(a,"class","btn btn-sm"),Ft(a,"btn-active",t[0].weightMode===_t.Circle||t[0].weightMode===_t.Pie||t[0].weightMode===_t.Ring),O(f,"class","btn btn-sm"),Ft(f,"btn-active",t[0].weightMode===_t.Embed),O(e,"class","btn-group btn-group-horizontal w-full flex justify-end p-2")},m(g,b){fe(g,e,b),L(e,r),He(n,r,null),L(e,i),L(e,a),He(s,a,null),L(e,o),L(e,f),He(p,f,null),c=!0,h||(d=[be(r,"click",t[2]),be(a,"click",t[3]),be(f,"click",t[4])],h=!0)},p(g,[b]){(!c||b&1)&&Ft(r,"btn-active",g[0].weightMode===_t.Bars),(!c||b&1)&&Ft(a,"btn-active",g[0].weightMode===_t.Circle||g[0].weightMode===_t.Pie||g[0].weightMode===_t.Ring),(!c||b&1)&&Ft(f,"btn-active",g[0].weightMode===_t.Embed)},i(g){c||(_e(n.$$.fragment,g),_e(s.$$.fragment,g),_e(p.$$.fragment,g),c=!0)},o(g){we(n.$$.fragment,g),we(s.$$.fragment,g),we(p.$$.fragment,g),c=!1},d(g){g&&k(e),$e(n),$e(s),$e(p),h=!1,rr(d)}}}function GE(t,e,r){let n;tt(t,Br,f=>r(0,n=f));function i(f){const p={...n,weightMode:f};Pt.update(p)}return[n,i,()=>i(_t.Bars),()=>i(_t.Pie),()=>i(_t.Embed)]}class KE extends at{constructor(e){super(),ut(this,e,GE,$E,st,{})}}function YE(t){let e,r,n,i;return{c(){e=vt("svg"),r=vt("path"),n=vt("path"),i=vt("path"),this.h()},l(a){e=gt(a,"svg",{xmlns:!0,class:!0,viewBox:!0});var s=H(e);r=gt(s,"path",{d:!0,fill:!0}),H(r).forEach(k),n=gt(s,"path",{d:!0,fill:!0}),H(n).forEach(k),i=gt(s,"path",{d:!0,fill:!0}),H(i).forEach(k),s.forEach(k),this.h()},h(){O(r,"d","M50 50 L50 10 A40 40 0 0 1 90 50 z"),O(r,"fill","rgba(255,255,255, 0.7)"),O(n,"d","M50 50 L90 50 A40 40 0 0 1 50 90 z"),O(n,"fill","rgba(255,255,255, 0.3)"),O(i,"d","M50 50 L50 90 A40 40 0 0 1 10 50 z"),O(i,"fill","rgba(255,255,255, 0.9)"),O(e,"xmlns","http://www.w3.org/2000/svg"),O(e,"class","h-5 w-5"),O(e,"viewBox","0 0 100 100")},m(a,s){fe(a,e,s),L(e,r),L(e,n),L(e,i)},p:Se,i:Se,o:Se,d(a){a&&k(e)}}}class ZE extends at{constructor(e){super(),ut(this,e,null,YE,st,{})}}function JE(t){let e,r,n;return{c(){e=vt("svg"),r=vt("circle"),n=vt("circle"),this.h()},l(i){e=gt(i,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var a=H(e);r=gt(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),H(r).forEach(k),n=gt(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),H(n).forEach(k),a.forEach(k),this.h()},h(){O(r,"cx","25"),O(r,"cy","25"),O(r,"r","20"),O(r,"stroke","rgba(255,255,255, 0.7)"),O(r,"stroke-width","4"),O(r,"fill","none"),O(n,"cx","25"),O(n,"cy","25"),O(n,"r","4"),O(n,"stroke","rgba(255,255,255, 0.7)"),O(n,"stroke-width","1"),O(n,"fill","rgba(255,255,255, 0.7)"),O(e,"xmlns","http://www.w3.org/2000/svg"),O(e,"fill","rgba(255,255,255, 0.7)"),O(e,"class","h-5 w-5"),O(e,"viewBox","0 0 50 50")},m(i,a){fe(i,e,a),L(e,r),L(e,n)},p:Se,i:Se,o:Se,d(i){i&&k(e)}}}class QE extends at{constructor(e){super(),ut(this,e,null,JE,st,{})}}function XE(t){let e,r,n,i,a;return{c(){e=vt("svg"),r=vt("mask"),n=vt("circle"),i=vt("path"),a=vt("circle"),this.h()},l(s){e=gt(s,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var o=H(e);r=gt(o,"mask",{id:!0});var f=H(r);n=gt(f,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),H(n).forEach(k),i=gt(f,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),H(i).forEach(k),f.forEach(k),a=gt(o,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,mask:!0}),H(a).forEach(k),o.forEach(k),this.h()},h(){O(n,"cx","25"),O(n,"cy","25"),O(n,"r","20"),O(n,"stroke","white"),O(n,"stroke-width","6"),O(n,"fill","none"),O(i,"d","M40,22 L45,27 L50,22"),O(i,"stroke","black"),O(i,"stroke-width","4"),O(i,"fill","none"),O(r,"id","hole"),O(a,"cx","25"),O(a,"cy","25"),O(a,"r","20"),O(a,"stroke","rgba(255,255,255, 0.7)"),O(a,"stroke-width","4"),O(a,"fill","none"),O(a,"mask","url(#hole)"),O(e,"xmlns","http://www.w3.org/2000/svg"),O(e,"fill","rgba(255,255,255, 0.7)"),O(e,"class","h-5 w-5"),O(e,"viewBox","0 0 50 50")},m(s,o){fe(s,e,o),L(e,r),L(r,n),L(r,i),L(e,a)},p:Se,i:Se,o:Se,d(s){s&&k(e)}}}class eC extends at{constructor(e){super(),ut(this,e,null,XE,st,{})}}function tC(t){let e,r,n,i,a,s,o,f,p,c,h,d;return n=new ZE({}),s=new QE({}),p=new eC({}),{c(){e=Y("div"),r=Y("button"),ze(n.$$.fragment),i=Me(),a=Y("button"),ze(s.$$.fragment),o=Me(),f=Y("button"),ze(p.$$.fragment),this.h()},l(g){e=Z(g,"DIV",{class:!0});var b=H(e);r=Z(b,"BUTTON",{class:!0});var v=H(r);We(n.$$.fragment,v),v.forEach(k),i=Pe(b),a=Z(b,"BUTTON",{class:!0});var _=H(a);We(s.$$.fragment,_),_.forEach(k),o=Pe(b),f=Z(b,"BUTTON",{class:!0});var D=H(f);We(p.$$.fragment,D),D.forEach(k),b.forEach(k),this.h()},h(){O(r,"class","btn btn-xs"),Ft(r,"btn-active",t[0].weightMode===_t.Pie),O(a,"class","btn btn-xs"),Ft(a,"btn-active",t[0].weightMode===_t.Circle),O(f,"class","btn btn-xs"),Ft(f,"btn-active",t[0].weightMode===_t.Ring),O(e,"class","btn-group btn-group-horizontal w-full flex justify-center p-1")},m(g,b){fe(g,e,b),L(e,r),He(n,r,null),L(e,i),L(e,a),He(s,a,null),L(e,o),L(e,f),He(p,f,null),c=!0,h||(d=[be(r,"click",t[2]),be(a,"click",t[3]),be(f,"click",t[4])],h=!0)},p(g,[b]){(!c||b&1)&&Ft(r,"btn-active",g[0].weightMode===_t.Pie),(!c||b&1)&&Ft(a,"btn-active",g[0].weightMode===_t.Circle),(!c||b&1)&&Ft(f,"btn-active",g[0].weightMode===_t.Ring)},i(g){c||(_e(n.$$.fragment,g),_e(s.$$.fragment,g),_e(p.$$.fragment,g),c=!0)},o(g){we(n.$$.fragment,g),we(s.$$.fragment,g),we(p.$$.fragment,g),c=!1},d(g){g&&k(e),$e(n),$e(s),$e(p),h=!1,rr(d)}}}function rC(t,e,r){let n;tt(t,Br,f=>r(0,n=f));function i(f){const p={...n,weightMode:f};Pt.update(p)}return[n,i,()=>i(_t.Pie),()=>i(_t.Circle),()=>i(_t.Ring)]}class nC extends at{constructor(e){super(),ut(this,e,rC,tC,st,{})}}function iC(t){let e,r,n;return{c(){e=vt("circle"),this.h()},l(i){e=gt(i,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),H(e).forEach(k),this.h()},h(){O(e,"cx",r=t[0][0]),O(e,"cy",n=t[0][1]),O(e,"r",t[1]),O(e,"stroke",t[3]),O(e,"stroke-width",t[2]),Yt(e,"fill","rgba(0,0,0,0)")},m(i,a){fe(i,e,a)},p(i,[a]){a&1&&r!==(r=i[0][0])&&O(e,"cx",r),a&1&&n!==(n=i[0][1])&&O(e,"cy",n),a&2&&O(e,"r",i[1]),a&8&&O(e,"stroke",i[3]),a&4&&O(e,"stroke-width",i[2])},i:Se,o:Se,d(i){i&&k(e)}}}function aC(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=2}=e,{color:s="rgba(46,67,101, 0.4)"}=e;return t.$$set=o=>{"xy"in o&&r(0,n=o.xy),"radius"in o&&r(1,i=o.radius),"stroke"in o&&r(2,a=o.stroke),"color"in o&&r(3,s=o.color)},[n,i,a,s]}class Lf extends at{constructor(e){super(),ut(this,e,aC,iC,st,{xy:0,radius:1,stroke:2,color:3})}}function uC(t){let e,r,n,i,a;return{c(){e=vt("circle"),this.h()},l(s){e=gt(s,"circle",{cx:!0,cy:!0,r:!0}),H(e).forEach(k),this.h()},h(){O(e,"cx",r=t[0][0]),O(e,"cy",n=t[0][1]),O(e,"r",t[1]),Yt(e,"fill",t[2])},m(s,o){fe(s,e,o),i||(a=[be(e,"mouseover",t[3]),be(e,"mouseout",t[4]),be(e,"mousedown",t[5]),be(e,"touchstart",t[5])],i=!0)},p(s,[o]){o&1&&r!==(r=s[0][0])&&O(e,"cx",r),o&1&&n!==(n=s[0][1])&&O(e,"cy",n),o&2&&O(e,"r",s[1]),o&4&&Yt(e,"fill",s[2])},i:Se,o:Se,d(s){s&&k(e),i=!1,rr(a)}}}function sC(t,e,r){let{xy:n=[100,100]}=e,{radius:i=5}=e,{color:a="black"}=e,{hoverColor:s="white"}=e,{handleMouseDown:o=d=>{}}=e,f=a;function p(){r(2,f=s)}function c(){r(2,f=a)}function h(d){o(d)}return t.$$set=d=>{"xy"in d&&r(0,n=d.xy),"radius"in d&&r(1,i=d.radius),"color"in d&&r(6,a=d.color),"hoverColor"in d&&r(7,s=d.hoverColor),"handleMouseDown"in d&&r(8,o=d.handleMouseDown)},[n,i,f,p,c,h,a,s,o]}class Fa extends at{constructor(e){super(),ut(this,e,sC,uC,st,{xy:0,radius:1,color:6,hoverColor:7,handleMouseDown:8})}}function oC(t){let e,r,n,i,a;return{c(){e=vt("line"),this.h()},l(s){e=gt(s,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-dasharray":!0,"stroke-width":!0}),H(e).forEach(k),this.h()},h(){O(e,"x1",r=t[0][0]),O(e,"y1",n=t[0][1]),O(e,"x2",i=t[1][0]),O(e,"y2",a=t[1][1]),O(e,"stroke",t[3]),O(e,"stroke-dasharray","10,10"),O(e,"stroke-width",t[2])},m(s,o){fe(s,e,o)},p(s,[o]){o&1&&r!==(r=s[0][0])&&O(e,"x1",r),o&1&&n!==(n=s[0][1])&&O(e,"y1",n),o&2&&i!==(i=s[1][0])&&O(e,"x2",i),o&2&&a!==(a=s[1][1])&&O(e,"y2",a),o&8&&O(e,"stroke",s[3]),o&4&&O(e,"stroke-width",s[2])},i:Se,o:Se,d(s){s&&k(e)}}}function lC(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:s="rgba(46,67,101, 0.4)"}=e;return t.$$set=o=>{"p1"in o&&r(0,n=o.p1),"p2"in o&&r(1,i=o.p2),"stroke"in o&&r(2,a=o.stroke),"color"in o&&r(3,s=o.color)},[n,i,a,s]}class p1 extends at{constructor(e){super(),ut(this,e,lC,oC,st,{p1:0,p2:1,stroke:2,color:3})}}function fC(t){let e,r,n,i,a,s,o,f;return{c(){e=vt("foreignObject"),r=Y("div"),n=Y("p"),i=ke(t[2]),this.h()},l(p){e=gt(p,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var c=H(e);r=Z(c,"DIV",{class:!0});var h=H(r);n=Z(h,"P",{});var d=H(n);i=Ie(d,t[2]),d.forEach(k),h.forEach(k),c.forEach(k),this.h()},h(){Yt(n,"color",t[3]),Yt(n,"user-select","none"),Yt(n,"margin","0"),Yt(n,"pointer-events","none"),Yt(n,"text-align",t[4]),Yt(n,"font-size",`${t[5]}px`),Yt(n,"font-family","sans-serif"),Yt(n,"font-style","italic"),O(r,"class","h-full flex flex-col justify-center"),O(e,"x",a=t[0][0]),O(e,"y",s=t[0][1]),O(e,"width",o=t[1][0]),O(e,"height",f=t[1][1])},m(p,c){fe(p,e,c),L(e,r),L(r,n),L(n,i)},p(p,[c]){c&4&&Fr(i,p[2]),c&8&&Yt(n,"color",p[3]),c&16&&Yt(n,"text-align",p[4]),c&32&&Yt(n,"font-size",`${p[5]}px`),c&1&&a!==(a=p[0][0])&&O(e,"x",a),c&1&&s!==(s=p[0][1])&&O(e,"y",s),c&2&&o!==(o=p[1][0])&&O(e,"width",o),c&2&&f!==(f=p[1][1])&&O(e,"height",f)},i:Se,o:Se,d(p){p&&k(e)}}}function cC(t,e,r){let{xy:n=[100,100]}=e,{wh:i=[100,100]}=e,{text:a=""}=e,{color:s="rgba(96,117,151, 1)"}=e,{textAlign:o="center"}=e,{fontSize:f=12}=e;return t.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,i=p.wh),"text"in p&&r(2,a=p.text),"color"in p&&r(3,s=p.color),"textAlign"in p&&r(4,o=p.textAlign),"fontSize"in p&&r(5,f=p.fontSize)},[n,i,a,s,o,f]}class mu extends at{constructor(e){super(),ut(this,e,cC,fC,st,{xy:0,wh:1,text:2,color:3,textAlign:4,fontSize:5})}}function hC(t){let e,r,n,i,a,s,o,f,p,c,h;return{c(){e=vt("circle"),i=Me(),a=vt("foreignObject"),s=Y("p"),o=ke(t[4]),this.h()},l(d){e=gt(d,"circle",{cx:!0,cy:!0,r:!0}),H(e).forEach(k),i=Pe(d),a=gt(d,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var g=H(a);s=Z(g,"P",{style:!0,class:!0});var b=H(s);o=Ie(b,t[4]),b.forEach(k),g.forEach(k),this.h()},h(){O(e,"cx",r=t[0][0]),O(e,"cy",n=t[0][1]),O(e,"r",t[1]),Yt(e,"fill",t[3]),Yt(s,"color",t[2]),Yt(s,"user-select","none"),Yt(s,"margin","0"),O(s,"class","heavy svelte-6if1p2"),O(a,"x",f=t[0][0]-t[1]),O(a,"y",p=t[0][1]-t[1]),O(a,"width",c=t[1]*2),O(a,"height",h=t[1]*2)},m(d,g){fe(d,e,g),fe(d,i,g),fe(d,a,g),L(a,s),L(s,o)},p(d,[g]){g&1&&r!==(r=d[0][0])&&O(e,"cx",r),g&1&&n!==(n=d[0][1])&&O(e,"cy",n),g&2&&O(e,"r",d[1]),g&8&&Yt(e,"fill",d[3]),g&16&&Fr(o,d[4]),g&4&&Yt(s,"color",d[2]),g&3&&f!==(f=d[0][0]-d[1])&&O(a,"x",f),g&3&&p!==(p=d[0][1]-d[1])&&O(a,"y",p),g&2&&c!==(c=d[1]*2)&&O(a,"width",c),g&2&&h!==(h=d[1]*2)&&O(a,"height",h)},i:Se,o:Se,d(d){d&&k(e),d&&k(i),d&&k(a)}}}function dC(t,e,r){let{xy:n=[100,100]}=e,{radius:i=25}=e,{textColor:a="rgba(96,117,151, 1)"}=e,{bgColor:s="black"}=e,{weight:o=""}=e;return t.$$set=f=>{"xy"in f&&r(0,n=f.xy),"radius"in f&&r(1,i=f.radius),"textColor"in f&&r(2,a=f.textColor),"bgColor"in f&&r(3,s=f.bgColor),"weight"in f&&r(4,o=f.weight)},[n,i,a,s,o]}class pC extends at{constructor(e){super(),ut(this,e,dC,hC,st,{xy:0,radius:1,textColor:2,bgColor:3,weight:4})}}function Rn(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=360+Math.atan2(i,n)*180/Math.PI,s=Math.sqrt(n*n+i*i);return[a%360,s/r]}function Rr(t,e,r){const n=e[0]%360*Math.PI/180,i=[r*e[1]*Math.cos(n),r*e[1]*Math.sin(n)];return xr(t,i)}function cu(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=Math.sqrt(n*n+i*i),s=r/a,o=e[0]+n*s,f=e[1]+i*s;return[o,f]}function vC(t,e,r){const n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)<r}function Uf(t,e){const r=e%360*Math.PI/180;let n,i;const a=Math.cos(r),s=Math.sin(r);return n=(t[0]+5)*-1.2*a,i=(t[1]+5)*-1.2*s,n-=t[0],i-=t[1],[n,i]}function Wr(t){return t<0?360+-1*(Math.abs(t)%360):t>360?t%360:t}function gC(t){return Math.round(t*100)}function Lr(t){return Math.round(Math.max(1-Math.pow(1-t,2),.25)*100)/100}function ao(t){let e="parsedWeight";switch(t){case _t.Circle:e="circleWeight";break;case _t.Bars:e="barWeight";break;case _t.Embed:e="embedWeight";break;case _t.Pie:e="pieWeight";break;case _t.Ring:e="ringWeight";break}return e}function mC(t){const e=t.weightMode,r=ao(e);return t.weightedPrompts?Math.max(...Object.values(t.weightedPrompts).map(n=>n[r])):0}function _C(t){const e=t.weightMode,r=ao(e);return t.weightedPrompts?Object.values(t.weightedPrompts).reduce((n,i)=>n+i[r],0):0}function N0(t,e){const r=t.weightMode,n=ao(r);return t.weightedPrompts[e]?t.weightedPrompts[e][n]/mC(t):0}function Mi(t,e){const r=t.weightMode,n=ao(r);if(!t.weightedPrompts[e])return 0;const i=t.weightedPrompts[e][n];return gC((i||0)/_C(t))}function bC(t,e,r){const a=r*.6,s=Math.floor(t/a);return Math.ceil(e/s)*r*1.2}function Vr(t,e,r){const n=bC(t,e,r)+10;return[t,n]}function vs(t,e){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function _u(t){return Hr(t,.5)}function Kn(t){const e=t.currentTarget;if(!e)throw new Error("No SVG element found");var r=e.createSVGPoint();t instanceof TouchEvent?(r.x=t.touches[0].clientX,r.y=t.touches[0].clientY):(r.x=t.clientX,r.y=t.clientY);const n=e.getScreenCTM();if(!n)throw new Error("No DOM Matrix found");const i=r.matrixTransform(n.inverse());return[i.x,i.y]}function x0(t,e,r){const n=t.slice();return n[18]=e[r][0],n[19]=e[r][1],n}function R0(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,a;e=new Lf({props:{xy:t[0],radius:t[1]}});let s=Object.entries(t[5].weightedPrompts),o=[];for(let c=0;c<s.length;c+=1)o[c]=L0(x0(t,s,c));const f=c=>we(o[c],1,1,()=>{o[c]=null});let p=n&&U0(t);return{c(){ze(e.$$.fragment);for(let c=0;c<o.length;c+=1)o[c].c();r=Tt(),p&&p.c(),i=Tt()},l(c){We(e.$$.fragment,c);for(let h=0;h<o.length;h+=1)o[h].l(c);r=Tt(),p&&p.l(c),i=Tt()},m(c,h){He(e,c,h);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(c,h);fe(c,r,h),p&&p.m(c,h),fe(c,i,h),a=!0},p(c,h){const d={};if(h&1&&(d.xy=c[0]),h&2&&(d.radius=c[1]),e.$set(d),h&895){s=Object.entries(c[5].weightedPrompts);let g;for(g=0;g<s.length;g+=1){const b=x0(c,s,g);o[g]?(o[g].p(b,h),_e(o[g],1)):(o[g]=L0(b),o[g].c(),_e(o[g],1),o[g].m(r.parentNode,r))}for(pr(),g=s.length;g<o.length;g+=1)f(g);vr()}h&32&&(n=Object.entries(c[5].weightedPrompts).length>0),n?p?(p.p(c,h),h&32&&_e(p,1)):(p=U0(c),p.c(),_e(p,1),p.m(i.parentNode,i)):p&&(pr(),we(p,1,1,()=>{p=null}),vr())},i(c){if(!a){_e(e.$$.fragment,c);for(let h=0;h<s.length;h+=1)_e(o[h]);_e(p),a=!0}},o(c){we(e.$$.fragment,c),o=o.filter(Boolean);for(let h=0;h<o.length;h+=1)we(o[h]);we(p),a=!1},d(c){$e(e,c),pu(o,c),c&&k(r),p&&p.d(c),c&&k(i)}}}function L0(t){let e,r,n,i,a;e=new p1({props:{p1:Rr(t[0],t[5].circleMarker,t[1]),p2:t[6][t[18]].xy}});function s(){return t[12](t[18])}return r=new Fa({props:{xy:t[6][t[18]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:s}}),n=new mu({props:{xy:t[9](t[6][t[18]].xy,Vr(t[3],t[19].text.length,t[4])),color:`rgba(255,255,255,${Lr(t[6][t[18]].unitWeight)}`,wh:Vr(t[3],t[19].text.length,t[4]),fontSize:t[4],text:t[19].text}}),i=new pC({props:{xy:Hr(xr(Rr(t[0],t[5].circleMarker,t[1]),t[6][t[18]].xy),.5),weight:Mi(t[5],t[18]),radius:15,textColor:`rgba(255,255,255,${Lr(t[6][t[18]].unitWeight)}`,bgColor:"rgb(8, 11, 22)"}}),{c(){ze(e.$$.fragment),ze(r.$$.fragment),ze(n.$$.fragment),ze(i.$$.fragment)},l(o){We(e.$$.fragment,o),We(r.$$.fragment,o),We(n.$$.fragment,o),We(i.$$.fragment,o)},m(o,f){He(e,o,f),He(r,o,f),He(n,o,f),He(i,o,f),a=!0},p(o,f){t=o;const p={};f&35&&(p.p1=Rr(t[0],t[5].circleMarker,t[1])),f&96&&(p.p2=t[6][t[18]].xy),e.$set(p);const c={};f&96&&(c.xy=t[6][t[18]].xy),f&4&&(c.radius=t[2]),f&32&&(c.handleMouseDown=s),r.$set(c);const h={};f&120&&(h.xy=t[9](t[6][t[18]].xy,Vr(t[3],t[19].text.length,t[4]))),f&96&&(h.color=`rgba(255,255,255,${Lr(t[6][t[18]].unitWeight)}`),f&56&&(h.wh=Vr(t[3],t[19].text.length,t[4])),f&16&&(h.fontSize=t[4]),f&32&&(h.text=t[19].text),n.$set(h);const d={};f&99&&(d.xy=Hr(xr(Rr(t[0],t[5].circleMarker,t[1]),t[6][t[18]].xy),.5)),f&32&&(d.weight=Mi(t[5],t[18])),f&96&&(d.textColor=`rgba(255,255,255,${Lr(t[6][t[18]].unitWeight)}`),i.$set(d)},i(o){a||(_e(e.$$.fragment,o),_e(r.$$.fragment,o),_e(n.$$.fragment,o),_e(i.$$.fragment,o),a=!0)},o(o){we(e.$$.fragment,o),we(r.$$.fragment,o),we(n.$$.fragment,o),we(i.$$.fragment,o),a=!1},d(o){$e(e,o),$e(r,o),$e(n,o),$e(i,o)}}}function U0(t){let e,r;return e=new Fa({props:{xy:Rr(t[0],t[5].circleMarker,t[1]),radius:10,color:"rgba(136,157,191, 1)",handleMouseDown:t[13]}}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},p(n,i){const a={};i&35&&(a.xy=Rr(n[0],n[5].circleMarker,n[1])),e.$set(a)},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function DC(t){let e,r,n,i,a=t[6]&&t[5].weightedPrompts&&R0(t);return{c(){e=vt("svg"),a&&a.c(),this.h()},l(s){e=gt(s,"svg",{id:!0,class:!0});var o=H(e);a&&a.l(o),o.forEach(k),this.h()},h(){O(e,"id","svg"),O(e,"class","w-full h-full")},m(s,o){fe(s,e,o),a&&a.m(e,null),r=!0,n||(i=[be(e,"mousemove",t[10]),be(e,"touchmove",t[10]),be(e,"mouseup",t[7]),be(e,"touchend",t[7]),be(e,"dblclick",t[11])],n=!0)},p(s,[o]){s[6]&&s[5].weightedPrompts?a?(a.p(s,o),o&96&&_e(a,1)):(a=R0(s),a.c(),_e(a,1),a.m(e,null)):a&&(pr(),we(a,1,1,()=>{a=null}),vr())},i(s){r||(_e(a),r=!0)},o(s){we(a),r=!1},d(s){s&&k(e),a&&a.d(),n=!1,rr(i)}}}function V0(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const s=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=s,r},e):null}function yC(t,e,r){let n,i;tt(t,Br,A=>r(5,i=A));let{center:a=[450,450]}=e,{radius:s=250}=e,{pointRadius:o=10}=e,{textWidth:f=150}=e,{fontSize:p=13}=e,c=[0,0],h=null;function d(A){h=null}function g(A){h=A}function b(A,S){let P=Rn(A,a,s)[0]-180;P<0&&(P+=360);const B=Uf(_u(S),P);return xr(A,B)}function v(A){const S=vC(A,a,s)?Rn(A,a,s):Rn(cu(A,a,s),a,s);r(6,n=F(i.weightedPrompts,a,s,i.circleWeightScaling,i.circleExponentialScaling,S,i.circleAngles))}function _(A){if(c=Kn(A),h==="main")v(c);else if(h){const S={...i.weightedPrompts[h]},P=cu(c,a,s),B=Rn(P,a,s)[0],N={...i.circleAngles};N[S.id]=B;const q={...i.weightedPrompts};q[h]=S,r(6,n=F(q,a,s,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,N))}}function D(A){c=Kn(A),v(c)}function F(A,S,P,B,N,q,X){if(!A||!S||!P||!B||!q)return null;let K=Object.entries(A).reduce((z,[V,Q])=>(z[V]={xy:Rr(S,[X[V],1],P)},z),{});K=Object.entries(K).reduce((z,[V,Q])=>(z[V]={...z[V],distance:vs(Q.xy,Rr(S,q,P))},z),K);const U=Object.values(K).reduce((z,V)=>z+V.distance,0);K=Object.entries(K).reduce((z,[V,Q])=>(z[V]={...z[V],unitDistance:Math.round(Q.distance/U*100)/100},z),K),K=Object.entries(K).reduce((z,[V,Q])=>(z[V]={...z[V],invertedUnitDistance:Math.round((1-Q.unitDistance)*100)/100},z),K),K=Object.entries(K).reduce((z,[V,Q])=>(N?z[V]={...z[V],unitWeight:Math.round(Math.pow(1-Q.distance/(2*P),B)*100)/100}:z[V]={...z[V],unitWeight:Math.round((1-Q.distance/(2*P))*100)/100},z),K);const R={...A};return Object.entries(K).forEach(([z,V])=>{R[z].circleWeight=V.unitWeight}),Pt.update({...i,circleMarker:q,weightedPrompts:R,circleAngles:X}),K}const E=A=>g(A),C=()=>g("main");return t.$$set=A=>{"center"in A&&r(0,a=A.center),"radius"in A&&r(1,s=A.radius),"pointRadius"in A&&r(2,o=A.pointRadius),"textWidth"in A&&r(3,f=A.textWidth),"fontSize"in A&&r(4,p=A.fontSize)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(i.circleAngles).length!==Object.keys(i.weightedPrompts).length&&Pt.update({...i,circleAngles:V0(i.weightedPrompts,{})}),t.$$.dirty&35&&r(6,n=F(i.weightedPrompts,a,s,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,i.circleAngles||V0(i.weightedPrompts,{})))},[a,s,o,f,p,i,n,d,g,b,_,D,E,C]}class wC extends at{constructor(e){super(),ut(this,e,yC,DC,st,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function j0(t){let e,r,n,i,a,s,o,f;return{c(){e=Y("div"),r=Y("label"),n=Y("span"),i=ke("Scaling Power"),a=Me(),s=Y("input"),this.h()},l(p){e=Z(p,"DIV",{class:!0});var c=H(e);r=Z(c,"LABEL",{class:!0});var h=H(r);n=Z(h,"SPAN",{class:!0});var d=H(n);i=Ie(d,"Scaling Power"),d.forEach(k),h.forEach(k),a=Pe(c),s=Z(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(k),this.h()},h(){O(n,"class","label-text"),O(r,"class","label"),O(s,"type","range"),O(s,"min","0.5"),O(s,"max","3"),O(s,"step","0.1"),O(s,"class","range range-xs"),O(e,"class","w-full px-2")},m(p,c){fe(p,e,c),L(e,r),L(r,n),L(n,i),L(e,a),L(e,s),nn(s,t[0]),o||(f=[be(s,"change",t[6]),be(s,"input",t[6])],o=!0)},p(p,c){c&1&&nn(s,p[0])},d(p){p&&k(e),o=!1,rr(f)}}}function AC(t){let e,r,n,i,a,s,o,f,p,c,h,d,g,b,v;r=new wC({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let _=t[1]&&j0(t);return{c(){e=Y("div"),ze(r.$$.fragment),i=Me(),a=Y("div"),s=Y("div"),o=Y("label"),f=Y("span"),p=ke("Exponential Scaling"),c=Me(),h=Y("input"),d=Me(),_&&_.c(),this.h()},l(D){e=Z(D,"DIV",{class:!0});var F=H(e);We(r.$$.fragment,F),F.forEach(k),i=Pe(D),a=Z(D,"DIV",{class:!0});var E=H(a);s=Z(E,"DIV",{class:!0});var C=H(s);o=Z(C,"LABEL",{class:!0});var A=H(o);f=Z(A,"SPAN",{class:!0});var S=H(f);p=Ie(S,"Exponential Scaling"),S.forEach(k),A.forEach(k),c=Pe(C),h=Z(C,"INPUT",{type:!0,class:!0}),C.forEach(k),d=Pe(E),_&&_.l(E),E.forEach(k),this.h()},h(){O(e,"class","w-full h-full"),Zi(()=>t[4].call(e)),O(f,"class","label-text"),O(o,"class","label"),O(h,"type","checkbox"),O(h,"class","toggle toggle-xs"),O(s,"class","w-52 px-2"),O(a,"class","px-2 py-4 pb-0 flex")},m(D,F){fe(D,e,F),He(r,e,null),n=vu(e,t[4].bind(e)),fe(D,i,F),fe(D,a,F),L(a,s),L(s,o),L(o,f),L(f,p),L(s,c),L(s,h),h.checked=t[1],L(a,d),_&&_.m(a,null),g=!0,b||(v=be(h,"change",t[5]),b=!0)},p(D,[F]){const E={};F&12&&(E.center=[Math.round(D[2]/2),Math.round(D[3]/2)]),F&12&&(E.radius=Math.round(Math.min(D[2],D[3])/2)-150),r.$set(E),F&2&&(h.checked=D[1]),D[1]?_?_.p(D,F):(_=j0(D),_.c(),_.m(a,null)):_&&(_.d(1),_=null)},i(D){g||(_e(r.$$.fragment,D),g=!0)},o(D){we(r.$$.fragment,D),g=!1},d(D){D&&k(e),$e(r),n(),D&&k(i),D&&k(a),_&&_.d(),b=!1,v()}}}function EC(t,e,r){let n;tt(t,Br,h=>r(7,n=h));let i,a,s=n.circleWeightScaling||2,o=kf(n.circleExponentialScaling)?!0:n.circleExponentialScaling;function f(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function p(){o=this.checked,r(1,o)}function c(){s=Cp(this.value),r(0,s)}return t.$$.update=()=>{t.$$.dirty&3&&Pt.update({...Pt.get(),circleExponentialScaling:o,circleWeightScaling:s})},[s,o,i,a,f,p,c]}class CC extends at{constructor(e){super(),ut(this,e,EC,AC,st,{})}}function FC(t){let e,r,n,i,a,s,o;return{c(){e=vt("rect"),this.h()},l(f){e=gt(f,"rect",{x:!0,y:!0,width:!0,height:!0}),H(e).forEach(k),this.h()},h(){O(e,"x",r=t[0][0]),O(e,"y",n=t[0][1]),O(e,"width",i=Math.max(t[1][0],0)),O(e,"height",a=Math.max(t[1][1],0)),Yt(e,"fill",t[2])},m(f,p){fe(f,e,p),s||(o=[be(e,"mouseover",function(){Si(t[4])&&t[4].apply(this,arguments)}),be(e,"mouseout",function(){Si(t[5])&&t[5].apply(this,arguments)}),be(e,"mousedown",function(){Si(t[3])&&t[3].apply(this,arguments)}),be(e,"touchstart",function(){Si(t[3])&&t[3].apply(this,arguments)})],s=!0)},p(f,[p]){t=f,p&1&&r!==(r=t[0][0])&&O(e,"x",r),p&1&&n!==(n=t[0][1])&&O(e,"y",n),p&2&&i!==(i=Math.max(t[1][0],0))&&O(e,"width",i),p&2&&a!==(a=Math.max(t[1][1],0))&&O(e,"height",a),p&4&&Yt(e,"fill",t[2])},i:Se,o:Se,d(f){f&&k(e),s=!1,rr(o)}}}function SC(t,e,r){let{xy:n=[500,500]}=e,{wh:i=[100,100]}=e,{color:a="rgba(46,67,101, 0.4)"}=e,{handleMouseDown:s=p=>{}}=e,{handleMouseOver:o=p=>{}}=e,{handleMouseOut:f=p=>{}}=e;return t.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,i=p.wh),"color"in p&&r(2,a=p.color),"handleMouseDown"in p&&r(3,s=p.handleMouseDown),"handleMouseOver"in p&&r(4,o=p.handleMouseOver),"handleMouseOut"in p&&r(5,f=p.handleMouseOut)},[n,i,a,s,o,f]}class Ol extends at{constructor(e){super(),ut(this,e,SC,FC,st,{xy:0,wh:1,color:2,handleMouseDown:3,handleMouseOver:4,handleMouseOut:5})}}function q0(t,e,r){const n=t.slice();return n[51]=e[r][0],n[52]=e[r][1],n[53]=e[r][2],n}function z0(t,e){let r,n,i,a,s,o;n=new mu({props:{xy:[e[3][0]+e[0],e[3][1]+e[52]*e[4]+e[52]],color:`rgba(255,255,255,${Lr(e[53].barWeight/e[12]||0)})`,wh:e[5][e[51]],text:e[53].text,textAlign:"right",fontSize:e[1]}});function f(...d){return e[39](e[51],...d)}i=new Ol({props:{color:e[13](0),handleMouseOver:f,handleMouseOut:e[40],xy:[e[10],e[3][1]+e[52]*e[4]+e[52]],wh:[e[11],e[4]-2]}});function p(...d){return e[41](e[51],...d)}a=new Ol({props:{color:e[8]===e[51]||e[7]===e[51]||e[9]===e[51]?e[13](Lr((e[53].barWeight||0)/e[12]+.15)):e[13](Lr(e[53].barWeight||0)),handleMouseOver:p,handleMouseOut:e[42],xy:[e[10],e[3][1]+e[52]*e[4]+e[52]],wh:[(e[53].barWeight||0)*e[11],e[4]-2]}});function c(...d){return e[43](e[51],...d)}function h(...d){return e[45](e[51],...d)}return s=new Ol({props:{color:e[9]===e[51]?e[15]:e[14],handleMouseOver:c,handleMouseOut:e[44],handleMouseDown:h,xy:[e[10]+(e[53].barWeight||0)*e[11],e[3][1]+e[52]*e[4]+e[52]],wh:[e[2],e[4]-2]}}),{key:t,first:null,c(){r=Tt(),ze(n.$$.fragment),ze(i.$$.fragment),ze(a.$$.fragment),ze(s.$$.fragment),this.h()},l(d){r=Tt(),We(n.$$.fragment,d),We(i.$$.fragment,d),We(a.$$.fragment,d),We(s.$$.fragment,d),this.h()},h(){this.first=r},m(d,g){fe(d,r,g),He(n,d,g),He(i,d,g),He(a,d,g),He(s,d,g),o=!0},p(d,g){e=d;const b={};g[0]&89&&(b.xy=[e[3][0]+e[0],e[3][1]+e[52]*e[4]+e[52]]),g[0]&4160&&(b.color=`rgba(255,255,255,${Lr(e[53].barWeight/e[12]||0)})`),g[0]&96&&(b.wh=e[5][e[51]]),g[0]&64&&(b.text=e[53].text),g[0]&2&&(b.fontSize=e[1]),n.$set(b);const v={};g[0]&64&&(v.handleMouseOver=f),g[0]&1112&&(v.xy=[e[10],e[3][1]+e[52]*e[4]+e[52]]),g[0]&2064&&(v.wh=[e[11],e[4]-2]),i.$set(v);const _={};g[0]&5056&&(_.color=e[8]===e[51]||e[7]===e[51]||e[9]===e[51]?e[13](Lr((e[53].barWeight||0)/e[12]+.15)):e[13](Lr(e[53].barWeight||0))),g[0]&64&&(_.handleMouseOver=p),g[0]&1112&&(_.xy=[e[10],e[3][1]+e[52]*e[4]+e[52]]),g[0]&2128&&(_.wh=[(e[53].barWeight||0)*e[11],e[4]-2]),a.$set(_);const D={};g[0]&576&&(D.color=e[9]===e[51]?e[15]:e[14]),g[0]&64&&(D.handleMouseOver=c),g[0]&64&&(D.handleMouseDown=h),g[0]&3160&&(D.xy=[e[10]+(e[53].barWeight||0)*e[11],e[3][1]+e[52]*e[4]+e[52]]),g[0]&20&&(D.wh=[e[2],e[4]-2]),s.$set(D)},i(d){o||(_e(n.$$.fragment,d),_e(i.$$.fragment,d),_e(a.$$.fragment,d),_e(s.$$.fragment,d),o=!0)},o(d){we(n.$$.fragment,d),we(i.$$.fragment,d),we(a.$$.fragment,d),we(s.$$.fragment,d),o=!1},d(d){d&&k(r),$e(n,d),$e(i,d),$e(a,d),$e(s,d)}}}function BC(t){let e,r=[],n=new Map,i,a,s,o=t[6];const f=p=>p[51];for(let p=0;p<o.length;p+=1){let c=q0(t,o,p),h=f(c);n.set(h,r[p]=z0(h,c))}return{c(){e=vt("svg");for(let p=0;p<r.length;p+=1)r[p].c();this.h()},l(p){e=gt(p,"svg",{id:!0,class:!0});var c=H(e);for(let h=0;h<r.length;h+=1)r[h].l(c);c.forEach(k),this.h()},h(){O(e,"id","svg"),O(e,"class","w-full h-full")},m(p,c){fe(p,e,c);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(e,null);i=!0,a||(s=[be(e,"mousemove",t[25]),be(e,"mouseup",t[24]),be(e,"touchend",t[24],{passive:!0}),be(e,"touchmove",t[25]),be(e,"dblclick",t[23])],a=!0)},p(p,c){c[0]&8388607&&(o=p[6],pr(),r=Un(r,c,f,1,p,o,n,e,Fp,z0,null,q0),vr())},i(p){if(!i){for(let c=0;c<o.length;c+=1)_e(r[c]);i=!0}},o(p){for(let c=0;c<r.length;c+=1)we(r[c]);i=!1},d(p){p&&k(e);for(let c=0;c<r.length;c+=1)r[c].d();a=!1,rr(s)}}}function OC(t,e,r){let n,i,a,s,o,f,p,c,h,d,g,b,v;tt(t,Br,Ee=>r(38,v=Ee));let{center:_=[0,0]}=e,{dimensions:D=[100,100]}=e,{maxWidth:F=1e3}=e,{pointRadius:E=10}=e,{textWidth:C=250}=e,{horizontalPad:A=20}=e,{verticalPad:S=2}=e,{textBarPad:P=10}=e,{fontSize:B=13}=e,{handleWidth:N=20}=e,q=Ee=>`rgba(46,67,101, ${Ee})`,X=Ee=>`rgba(76,97,131, ${Ee})`,K=null,U=null,R=null,z=X(.3),V=X(.8),Q=null,ae=null,se=null;function he(Ee){r(8,U=Ee)}function Ce(Ee){r(7,K=Ee)}function Be(Ee){r(9,R=Ee)}function Fe(){r(8,U=null)}function je(){r(7,K=null)}function Ue(){r(9,R=null)}function Ve(Ee){Q=Ee}function ot(Ee){let Ne=Q!==null?Q:U!==null?U:R!==null?R:K!==null?K:null;if(Ne===null)return;const Mt=Kn(Ee);rt(Ne,Mt)}function Dt(){Q=null,ae&&clearInterval(ae),ae=null,se=null}function rt(Ee,Ne){let Vt=Math.min(d,Math.max(0,Ne[0]-g))/d,Ht={...v.weightedPrompts},W={...Ht[Ee]};W.barWeight=Vt,Ht[Ee]=W,Pt.update({...v,weightedPrompts:Ht})}function it(Ee){let Ne=Q;if(Ne===null)return;const Mt=Kn(Ee);if(rt(Ne,Mt),Q!==null){let Vt=g+d+N,Ht=g;Mt[0]>Vt&&!ae?(se=Date.now(),ae=setInterval(()=>{if(!se||Date.now()-se<1e3)return;let W={...v.weightedPrompts};const G=Object.entries(W).reduce((ee,[le,ie])=>{const de=parseInt(le);return de!==Q?ee[de]={...ie,barWeight:Math.max(0,(ie.barWeight||0)-.01)}:ee[de]={...ie,barWeight:Math.min(1,(ie.barWeight||0)+.01)},ee},{});Pt.update({...v,weightedPrompts:G})},100)):Mt[0]<Ht&&!ae?(se=Date.now(),ae=setInterval(()=>{if(!se||Date.now()-se<1e3)return;let W={...v.weightedPrompts};const G=Object.entries(W).reduce((ee,[le,ie])=>{const de=parseInt(le);return de!==Q?ee[de]={...ie,barWeight:Math.min(1,(ie.barWeight||0)+.01)}:ee[de]={...ie,barWeight:Math.max(0,(ie.barWeight||0)-.01)},ee},{});Pt.update({...v,weightedPrompts:G})},100)):Mt[0]<Vt&&Mt[0]>Ht&&ae&&(clearInterval(ae),ae=null,se=null)}}const St=(Ee,Ne)=>Ce(Ee),nt=Ee=>je(),ht=(Ee,Ne)=>he(Ee),lt=Ee=>Fe(),ft=(Ee,Ne)=>Be(Ee),Ke=Ee=>Ue(),Ye=(Ee,Ne)=>Ve(Ee);return t.$$set=Ee=>{"center"in Ee&&r(26,_=Ee.center),"dimensions"in Ee&&r(27,D=Ee.dimensions),"maxWidth"in Ee&&r(28,F=Ee.maxWidth),"pointRadius"in Ee&&r(29,E=Ee.pointRadius),"textWidth"in Ee&&r(30,C=Ee.textWidth),"horizontalPad"in Ee&&r(0,A=Ee.horizontalPad),"verticalPad"in Ee&&r(31,S=Ee.verticalPad),"textBarPad"in Ee&&r(32,P=Ee.textBarPad),"fontSize"in Ee&&r(1,B=Ee.fontSize),"handleWidth"in Ee&&r(2,N=Ee.handleWidth)},t.$$.update=()=>{t.$$.dirty[1]&128&&r(6,n=Object.entries(v.weightedPrompts).map(([Ee,Ne],Mt)=>[parseInt(Ee),Mt,Ne])),t.$$.dirty[1]&128&&r(36,i=Object.keys(v.weightedPrompts).length),t.$$.dirty[0]&134217728&&r(35,a=[D[0]-50,D[1]-50]),t.$$.dirty[0]&1073741890&&r(5,s=n.reduce((Ee,[Ne,Mt,Vt])=>{const[Ht,W]=Vr(C,Vt.text.length,B);return Ee[Ne]=[Ht,W],Ee},{})),t.$$.dirty[0]&32&&r(37,o=Math.max(...Object.values(s).map(([Ee,Ne])=>Ne))),t.$$.dirty[1]&112&&r(4,f=Math.min(a[1]/i,o)),t.$$.dirty[0]&16|t.$$.dirty[1]&33&&r(34,p=f*i+S*Math.max(i-1,0)),t.$$.dirty[0]&268435456|t.$$.dirty[1]&16&&r(33,c=Math.min(a[0],F)),t.$$.dirty[0]&67108864|t.$$.dirty[1]&12&&r(3,h=[_[0]-c/2,_[1]-p/2]),t.$$.dirty[0]&1073741829|t.$$.dirty[1]&6&&r(11,d=c-P-C-2*A-N),t.$$.dirty[0]&1073741833|t.$$.dirty[1]&2&&r(10,g=h[0]+P+C+A),t.$$.dirty[1]&128&&r(12,b=Math.max(...Object.values(v.weightedPrompts).map(Ee=>Ee.barWeight||0)))},[A,B,N,h,f,s,n,K,U,R,g,d,b,q,z,V,he,Ce,Be,Fe,je,Ue,Ve,ot,Dt,it,_,D,F,E,C,S,P,c,p,a,i,o,v,St,nt,ht,lt,ft,Ke,Ye]}class MC extends at{constructor(e){super(),ut(this,e,OC,BC,st,{center:26,dimensions:27,maxWidth:28,pointRadius:29,textWidth:30,horizontalPad:0,verticalPad:31,textBarPad:32,fontSize:1,handleWidth:2},null,[-1,-1])}}function PC(t){let e,r,n,i;return r=new MC({props:{dimensions:t[2],center:t[3]}}),{c(){e=Y("div"),ze(r.$$.fragment),this.h()},l(a){e=Z(a,"DIV",{class:!0});var s=H(e);We(r.$$.fragment,s),s.forEach(k),this.h()},h(){O(e,"class","w-full h-full pt-10"),Zi(()=>t[4].call(e))},m(a,s){fe(a,e,s),He(r,e,null),n=vu(e,t[4].bind(e)),i=!0},p(a,[s]){const o={};s&4&&(o.dimensions=a[2]),s&8&&(o.center=a[3]),r.$set(o)},i(a){i||(_e(r.$$.fragment,a),i=!0)},o(a){we(r.$$.fragment,a),i=!1},d(a){a&&k(e),$e(r),n()}}}function TC(t,e,r){let n,i,a,s;function o(){a=this.clientWidth,s=this.clientHeight,r(0,a),r(1,s)}return t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[a||0,s||0]),t.$$.dirty&4&&r(3,i=_u(n))},[a,s,n,i,o]}class kC extends at{constructor(e){super(),ut(this,e,TC,PC,st,{})}}function IC(t){let e,r,n,i,a;return{c(){e=vt("line"),this.h()},l(s){e=gt(s,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),H(e).forEach(k),this.h()},h(){O(e,"x1",r=t[0][0]),O(e,"y1",n=t[0][1]),O(e,"x2",i=t[1][0]),O(e,"y2",a=t[1][1]),O(e,"stroke",t[3]),O(e,"stroke-width",t[2])},m(s,o){fe(s,e,o)},p(s,[o]){o&1&&r!==(r=s[0][0])&&O(e,"x1",r),o&1&&n!==(n=s[0][1])&&O(e,"y1",n),o&2&&i!==(i=s[1][0])&&O(e,"x2",i),o&2&&a!==(a=s[1][1])&&O(e,"y2",a),o&8&&O(e,"stroke",s[3]),o&4&&O(e,"stroke-width",s[2])},i:Se,o:Se,d(s){s&&k(e)}}}function NC(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:s="rgba(46,67,101, 0.4)"}=e;return t.$$set=o=>{"p1"in o&&r(0,n=o.p1),"p2"in o&&r(1,i=o.p2),"stroke"in o&&r(2,a=o.stroke),"color"in o&&r(3,s=o.color)},[n,i,a,s]}class xC extends at{constructor(e){super(),ut(this,e,NC,IC,st,{p1:0,p2:1,stroke:2,color:3})}}function W0(t,e,r){const n=t.slice();return n[27]=e[r][0],n[28]=e[r][1],n}function H0(t){let e,r,n;e=new Lf({props:{xy:t[0],radius:t[1]}});let i=Object.entries(t[5].weightedPrompts),a=[];for(let o=0;o<i.length;o+=1)a[o]=$0(W0(t,i,o));const s=o=>we(a[o],1,1,()=>{a[o]=null});return{c(){ze(e.$$.fragment);for(let o=0;o<a.length;o+=1)a[o].c();r=Tt()},l(o){We(e.$$.fragment,o);for(let f=0;f<a.length;f+=1)a[f].l(o);r=Tt()},m(o,f){He(e,o,f);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(o,f);fe(o,r,f),n=!0},p(o,f){const p={};if(f&1&&(p.xy=o[0]),f&2&&(p.radius=o[1]),e.$set(p),f&6015){i=Object.entries(o[5].weightedPrompts);let c;for(c=0;c<i.length;c+=1){const h=W0(o,i,c);a[c]?(a[c].p(h,f),_e(a[c],1)):(a[c]=$0(h),a[c].c(),_e(a[c],1),a[c].m(r.parentNode,r))}for(pr(),c=i.length;c<a.length;c+=1)s(c);vr()}},i(o){if(!n){_e(e.$$.fragment,o);for(let f=0;f<i.length;f+=1)_e(a[f]);n=!0}},o(o){we(e.$$.fragment,o),a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)we(a[f]);n=!1},d(o){$e(e,o),pu(a,o),o&&k(r)}}}function $0(t){let e,r,n,i,a,s,o,f,p;e=new xC({props:{p1:t[0],p2:t[6][t[27]].xy}});function c(...b){return t[13](t[27],...b)}function h(...b){return t[14](t[27],...b)}function d(...b){return t[15](t[27],...b)}function g(){return t[16](t[27])}return a=new Fa({props:{xy:t[6][t[27]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:g}}),s=new mu({props:{xy:t[9](t[6][t[27]].textXY,Vr(t[3],t[28].text.length,t[4])),color:`rgba(255,255,255,${Lr(t[6][t[27]].unitWeight)}`,wh:Vr(t[3],t[28].text.length,t[4]),fontSize:t[4],text:t[28].text}}),{c(){ze(e.$$.fragment),r=vt("path"),ze(a.$$.fragment),ze(s.$$.fragment),this.h()},l(b){We(e.$$.fragment,b),r=gt(b,"path",{d:!0,fill:!0}),H(r).forEach(k),We(a.$$.fragment,b),We(s.$$.fragment,b),this.h()},h(){O(r,"d",n=G0(t[0],t[1],t[6][t[27]].angle,t[6][t[27]].angle+t[6][t[27]].angleDiff)),O(r,"fill",i=`rgba(26,47,91,${Lr(t[6][t[27]].unitWeight)/4}`)},m(b,v){He(e,b,v),fe(b,r,v),He(a,b,v),He(s,b,v),o=!0,f||(p=[be(r,"mousewheel",c),be(r,"touchstart",h),be(r,"mousedown",d)],f=!0)},p(b,v){t=b;const _={};v&1&&(_.p1=t[0]),v&96&&(_.p2=t[6][t[27]].xy),e.$set(_),(!o||v&99&&n!==(n=G0(t[0],t[1],t[6][t[27]].angle,t[6][t[27]].angle+t[6][t[27]].angleDiff)))&&O(r,"d",n),(!o||v&96&&i!==(i=`rgba(26,47,91,${Lr(t[6][t[27]].unitWeight)/4}`))&&O(r,"fill",i);const D={};v&96&&(D.xy=t[6][t[27]].xy),v&4&&(D.radius=t[2]),v&32&&(D.handleMouseDown=g),a.$set(D);const F={};v&120&&(F.xy=t[9](t[6][t[27]].textXY,Vr(t[3],t[28].text.length,t[4]))),v&96&&(F.color=`rgba(255,255,255,${Lr(t[6][t[27]].unitWeight)}`),v&56&&(F.wh=Vr(t[3],t[28].text.length,t[4])),v&16&&(F.fontSize=t[4]),v&32&&(F.text=t[28].text),s.$set(F)},i(b){o||(_e(e.$$.fragment,b),_e(a.$$.fragment,b),_e(s.$$.fragment,b),o=!0)},o(b){we(e.$$.fragment,b),we(a.$$.fragment,b),we(s.$$.fragment,b),o=!1},d(b){$e(e,b),b&&k(r),$e(a,b),$e(s,b),f=!1,rr(p)}}}function RC(t){let e,r,n,i,a=t[6]&&t[5].weightedPrompts&&H0(t);return{c(){e=vt("svg"),a&&a.c(),this.h()},l(s){e=gt(s,"svg",{id:!0,class:!0});var o=H(e);a&&a.l(o),o.forEach(k),this.h()},h(){O(e,"id","svg"),O(e,"class","w-full h-full")},m(s,o){fe(s,e,o),a&&a.m(e,null),r=!0,n||(i=[be(e,"mousemove",t[11]),be(e,"touchmove",t[11]),be(e,"mouseup",t[7]),be(e,"touchend",t[7])],n=!0)},p(s,[o]){s[6]&&s[5].weightedPrompts?a?(a.p(s,o),o&96&&_e(a,1)):(a=H0(s),a.c(),_e(a,1),a.m(e,null)):a&&(pr(),we(a,1,1,()=>{a=null}),vr())},i(s){r||(_e(a),r=!0)},o(s){we(a),r=!1},d(s){s&&k(e),a&&a.d(),n=!1,rr(i)}}}function LC(t,e){if(t.length!==e.length)return!1;const r=t.length;let n=-1;for(let i=0;i<r;i++)if(e[i]===t[0]){n=i;break}if(n===-1)return!1;for(let i=0;i<r;i++)if(t[i]!==e[(i+n)%r])return!1;return!0}function G0(t,e,r,n){const i=t[0]+e*Math.cos(r*Math.PI/180),a=t[1]+e*Math.sin(r*Math.PI/180),s=t[0]+e*Math.cos(n*Math.PI/180),o=t[1]+e*Math.sin(n*Math.PI/180),f=n-r<=180?"0":"1";return`M${t[0]},${t[1]} L${i},${a} A${e},${e} 0 ${f} 1 ${s},${o} Z`}function UC(t,e,r){let n,i;tt(t,Br,U=>r(5,i=U));let{center:a=[450,450]}=e,{radius:s=250}=e,{pointRadius:o=10}=e,{textWidth:f=150}=e,{fontSize:p=13}=e,c=[0,0],h=null,d={},g=null,b;function v(U){g=null,b=null,h=null,d={}}function _(U){g=U}function D(U,R){let z=Rn(U,a,s)[0]-180;z<0&&(z+=360);const V=Uf(_u(R),z);return xr(U,V)}function F(U,R){return U?Object.entries(U).reduce((z,[V,Q],ae)=>{const se=z[V]||ae*(360/Object.keys(U).length)-90;return z[V]=Wr(se),z},R):null}function E(U,R){b=R}function C(U){const R=b,z={...i.pieAngles},V=Object.entries(z).sort((Ue,Ve)=>Wr(Ue[1])-Wr(Ve[1])).map(Ue=>Ue[0]),Q=V.indexOf(R),ae=Q+1===V.length?0:Q+1,se=V[ae];d[R]||(d[R]=z[R]),d[se]||(d[se]=z[se]);const Ce=Rn(U,a,s)[0]-h,Be={...z};Be[R]=Wr(Ce+d[R]),Be[se]=Wr(Ce+d[se]);const Fe=Object.entries(Be).sort((Ue,Ve)=>Wr(Ue[1])-Wr(Ve[1])).map(Ue=>Ue[0]);LC(V,Fe)&&r(6,n=B(i.weightedPrompts,a,s,Be))}function A(U){const R={...i.weightedPrompts[g]},z=cu(U,a,s),V=Wr(Rn(z,a,s)[0]),Q={...i.pieAngles};Q[R.id]=V;const ae={...i.weightedPrompts};ae[g]=R,r(6,n=B(ae,a,s,Q))}function S(U){U.preventDefault(),c=Kn(U),g?A(c):b?C(c):h=Rn(c,a,s)[0]}function P(U,R){U.preventDefault();const z={...i.pieAngles},V=Object.entries(z).sort((he,Ce)=>Wr(he[1])-Wr(Ce[1])).map(he=>he[0]),Q=V.indexOf(R),ae=Q+1===V.length?0:Q+1,se=V[ae];z[R]=Wr(z[R]-U.deltaY/100),z[se]=Wr(z[se]+U.deltaY/100),r(6,n=B(i.weightedPrompts,a,s,z))}function B(U,R,z,V){if(!U||!R||!z)return null;const Q=Object.entries(U).sort((Be,Fe)=>Wr(V[Be[0]])-Wr(V[Fe[0]])),ae=Q.map((Be,Fe)=>{const je=Fe+1===Q.length?0:Fe+1,Ue=V[Q[je][0]]-V[Q[Fe][0]];return Ue<0?[Be[0],360+Ue]:[Be[0],Ue]}),se=Math.max(...ae.map(Be=>Be[1])),he=ae.reduce((Be,[Fe,je])=>{({...U[Fe]});const Ue=V[Fe],Ve=Rr(R,[Ue,1],z),ot=Rr(R,[Ue+.5*je,1],z),Dt=je/se;return Be[Fe]={xy:Ve,textXY:ot,angle:Ue,angleDiff:je,unitWeight:Dt},Be},{}),Ce={...U};return Object.entries(he).forEach(([Be,Fe])=>{Ce[Be].pieWeight=Fe.unitWeight}),Pt.update({...i,weightedPrompts:Ce,pieAngles:V}),he}const N=(U,R)=>P(R,U),q=(U,R)=>E(R,U),X=(U,R)=>E(R,U),K=U=>_(U);return t.$$set=U=>{"center"in U&&r(0,a=U.center),"radius"in U&&r(1,s=U.radius),"pointRadius"in U&&r(2,o=U.pointRadius),"textWidth"in U&&r(3,f=U.textWidth),"fontSize"in U&&r(4,p=U.fontSize)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(i.pieAngles||{}).length!==Object.keys(i.weightedPrompts).length&&Pt.update({...i,pieAngles:F(i.weightedPrompts,{})}),t.$$.dirty&35&&r(6,n=B(i.weightedPrompts,a,s,i.pieAngles||F(i.weightedPrompts,{})))},[a,s,o,f,p,i,n,v,_,D,E,S,P,N,q,X,K]}class VC extends at{constructor(e){super(),ut(this,e,UC,RC,st,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function jC(t){let e,r,n,i;return r=new VC({props:{center:[Math.round(t[0]/2),Math.round(t[1]/2)],radius:Math.round(Math.min(t[0],t[1])/2)-150}}),{c(){e=Y("div"),ze(r.$$.fragment),this.h()},l(a){e=Z(a,"DIV",{class:!0});var s=H(e);We(r.$$.fragment,s),s.forEach(k),this.h()},h(){O(e,"class","w-full h-full"),Zi(()=>t[2].call(e))},m(a,s){fe(a,e,s),He(r,e,null),n=vu(e,t[2].bind(e)),i=!0},p(a,[s]){const o={};s&3&&(o.center=[Math.round(a[0]/2),Math.round(a[1]/2)]),s&3&&(o.radius=Math.round(Math.min(a[0],a[1])/2)-150),r.$set(o)},i(a){i||(_e(r.$$.fragment,a),i=!0)},o(a){we(r.$$.fragment,a),i=!1},d(a){a&&k(e),$e(r),n()}}}function qC(t,e,r){let n,i;function a(){n=this.clientWidth,i=this.clientHeight,r(0,n),r(1,i)}return[n,i,a]}class zC extends at{constructor(e){super(),ut(this,e,qC,jC,st,{})}}var Bs={},WC={get exports(){return Bs},set exports(t){Bs=t}},Os={},HC={get exports(){return Os},set exports(t){Os=t}},wa=typeof Reflect=="object"?Reflect:null,K0=wa&&typeof wa.apply=="function"?wa.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},gs;wa&&typeof wa.ownKeys=="function"?gs=wa.ownKeys:Object.getOwnPropertySymbols?gs=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:gs=function(e){return Object.getOwnPropertyNames(e)};function $C(t){console&&console.warn&&console.warn(t)}var v1=Number.isNaN||function(e){return e!==e};function Ut(){Ut.init.call(this)}HC.exports=Ut;Os.once=ZC;Ut.EventEmitter=Ut;Ut.prototype._events=void 0;Ut.prototype._eventsCount=0;Ut.prototype._maxListeners=void 0;var Y0=10;function uo(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Ut,"defaultMaxListeners",{enumerable:!0,get:function(){return Y0},set:function(t){if(typeof t!="number"||t<0||v1(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Y0=t}});Ut.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ut.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||v1(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function g1(t){return t._maxListeners===void 0?Ut.defaultMaxListeners:t._maxListeners}Ut.prototype.getMaxListeners=function(){return g1(this)};Ut.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var f=a[e];if(f===void 0)return!1;if(typeof f=="function")K0(f,this,r);else for(var p=f.length,c=y1(f,p),n=0;n<p;++n)K0(c[n],this,r);return!0};function m1(t,e,r,n){var i,a,s;if(uo(r),a=t._events,a===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),s=a[e]),s===void 0)s=a[e]=r,++t._eventsCount;else if(typeof s=="function"?s=a[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=g1(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=s.length,$C(o)}return t}Ut.prototype.addListener=function(e,r){return m1(this,e,r,!1)};Ut.prototype.on=Ut.prototype.addListener;Ut.prototype.prependListener=function(e,r){return m1(this,e,r,!0)};function GC(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _1(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=GC.bind(n);return i.listener=r,n.wrapFn=i,i}Ut.prototype.once=function(e,r){return uo(r),this.on(e,_1(this,e,r)),this};Ut.prototype.prependOnceListener=function(e,r){return uo(r),this.prependListener(e,_1(this,e,r)),this};Ut.prototype.removeListener=function(e,r){var n,i,a,s,o;if(uo(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(a=-1,s=n.length-1;s>=0;s--)if(n[s]===r||n[s].listener===r){o=n[s].listener,a=s;break}if(a<0)return this;a===0?n.shift():KC(n,a),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,o||r)}return this};Ut.prototype.off=Ut.prototype.removeListener;Ut.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var a=Object.keys(n),s;for(i=0;i<a.length;++i)s=a[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function b1(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?YC(i):y1(i,i.length)}Ut.prototype.listeners=function(e){return b1(this,e,!0)};Ut.prototype.rawListeners=function(e){return b1(this,e,!1)};Ut.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):D1.call(t,e)};Ut.prototype.listenerCount=D1;function D1(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Ut.prototype.eventNames=function(){return this._eventsCount>0?gs(this._events):[]};function y1(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function KC(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function YC(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function ZC(t,e){return new Promise(function(r,n){function i(s){t.removeListener(e,a),n(s)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}w1(t,e,a,{once:!0}),e!=="error"&&JC(t,i,{once:!0})})}function JC(t,e,r){typeof t.on=="function"&&w1(t,"error",e,r)}function w1(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(a){n.once&&t.removeEventListener(e,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}function QC(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}var XC=QC;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var eF=function(t){return t!=null&&(A1(t)||tF(t)||!!t._isBuffer)};function A1(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function tF(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&A1(t.slice(0,0))}var rF=XC,nF=eF,iF=typeof Float64Array<"u";function aF(t,e){return t[0]-e[0]}function uF(){var t=this.stride,e=new Array(t.length),r;for(r=0;r<e.length;++r)e[r]=[Math.abs(t[r]),r];e.sort(aF);var n=new Array(e.length);for(r=0;r<n.length;++r)n[r]=e[r][1];return n}function sF(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n=t==="generic";if(e===-1){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",v=new Function(i);return v()}else if(e===0){var i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",v=new Function("TrivialArray",i);return v(Ms[t][0])}var i=["'use strict'"],a=rF(e),s=a.map(function(_){return"i"+_}),o="this.offset+"+a.map(function(_){return"this.stride["+_+"]*i"+_}).join("+"),f=a.map(function(_){return"b"+_}).join(","),p=a.map(function(_){return"c"+_}).join(",");i.push("function "+r+"(a,"+f+","+p+",d){this.data=a","this.shape=["+f+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(_){return"this.shape["+_+"]"}).join("*"),"}})"),e===1?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+r+"_order(){"),e===2?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+s.join(",")+",v){"),n?i.push("return this.data.set("+o+",v)}"):i.push("return this.data["+o+"]=v}"),i.push("proto.get=function "+r+"_get("+s.join(",")+"){"),n?i.push("return this.data.get("+o+")}"):i.push("return this.data["+o+"]}"),i.push("proto.index=function "+r+"_index(",s.join(),"){return "+o+"}"),i.push("proto.hi=function "+r+"_hi("+s.join(",")+"){return new "+r+"(this.data,"+a.map(function(_){return["(typeof i",_,"!=='number'||i",_,"<0)?this.shape[",_,"]:i",_,"|0"].join("")}).join(",")+","+a.map(function(_){return"this.stride["+_+"]"}).join(",")+",this.offset)}");var c=a.map(function(_){return"a"+_+"=this.shape["+_+"]"}),h=a.map(function(_){return"c"+_+"=this.stride["+_+"]"});i.push("proto.lo=function "+r+"_lo("+s.join(",")+"){var b=this.offset,d=0,"+c.join(",")+","+h.join(","));for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");i.push("return new "+r+"(this.data,"+a.map(function(_){return"a"+_}).join(",")+","+a.map(function(_){return"c"+_}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+s.join(",")+"){var "+a.map(function(_){return"a"+_+"=this.shape["+_+"]"}).join(",")+","+a.map(function(_){return"b"+_+"=this.stride["+_+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");i.push("return new "+r+"(this.data,"+a.map(function(_){return"a"+_}).join(",")+","+a.map(function(_){return"b"+_}).join(",")+",c)}");for(var g=new Array(e),b=new Array(e),d=0;d<e;++d)g[d]="a[i"+d+"]",b[d]="b[i"+d+"]";i.push("proto.transpose=function "+r+"_transpose("+s+"){"+s.map(function(_,D){return _+"=("+_+"===undefined?"+D+":"+_+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+b.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+s+"){var a=[],b=[],c=this.offset");for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(_){return"shape["+_+"]"}).join(",")+","+a.map(function(_){return"stride["+_+"]"}).join(",")+",offset)}");var v=new Function("CTOR_LIST","ORDER",i.join(`
`));return v(Ms[t],uF)}function oF(t){if(nF(t))return"buffer";if(iF)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var Ms={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function lF(t,e,r,n){if(t===void 0){var p=Ms.array[0];return p([])}else typeof t=="number"&&(t=[t]);e===void 0&&(e=[t.length]);var i=e.length;if(r===void 0){r=new Array(i);for(var a=i-1,s=1;a>=0;--a)r[a]=s,s*=e[a]}if(n===void 0){n=0;for(var a=0;a<i;++a)r[a]<0&&(n-=(e[a]-1)*r[a])}for(var o=oF(t),f=Ms[o];f.length<=i+1;)f.push(sF(o,f.length-1));var p=f[i+1];return p(t,e,r,n)}var Sa=lF,so={};function fF(t,e){for(var r=1,n=t.length,i=t[0],a=t[0],s=1;s<n;++s)if(a=i,i=t[s],e(i,a)){if(s===r){r++;continue}t[r++]=i}return t.length=r,t}function cF(t){for(var e=1,r=t.length,n=t[0],i=t[0],a=1;a<r;++a,i=n)if(i=n,n=t[a],n!==i){if(a===e){e++;continue}t[e++]=n}return t.length=e,t}function hF(t,e,r){return t.length===0?t:e?(r||t.sort(e),fF(t,e)):(r||t.sort(),cF(t))}var E1=hF,dF=E1;function C1(t,e,r){var n=t.length,i=e.arrayArgs.length,a=e.indexArgs.length>0,s=[],o=[],f=0,p=0,c,h;for(c=0;c<n;++c)o.push(["i",c,"=0"].join(""));for(h=0;h<i;++h)for(c=0;c<n;++c)p=f,f=t[c],c===0?o.push(["d",h,"s",c,"=t",h,"p",f].join("")):o.push(["d",h,"s",c,"=(t",h,"p",f,"-s",p,"*t",h,"p",p,")"].join(""));for(o.length>0&&s.push("var "+o.join(",")),c=n-1;c>=0;--c)f=t[c],s.push(["for(i",c,"=0;i",c,"<s",f,";++i",c,"){"].join(""));for(s.push(r),c=0;c<n;++c){for(p=f,f=t[c],h=0;h<i;++h)s.push(["p",h,"+=d",h,"s",c].join(""));a&&(c>0&&s.push(["index[",p,"]-=s",p].join("")),s.push(["++index[",f,"]"].join(""))),s.push("}")}return s.join(`
`)}function pF(t,e,r,n){for(var i=e.length,a=r.arrayArgs.length,s=r.blockSize,o=r.indexArgs.length>0,f=[],p=0;p<a;++p)f.push(["var offset",p,"=p",p].join(""));for(var p=t;p<i;++p)f.push(["for(var j"+p+"=SS[",e[p],"]|0;j",p,">0;){"].join("")),f.push(["if(j",p,"<",s,"){"].join("")),f.push(["s",e[p],"=j",p].join("")),f.push(["j",p,"=0"].join("")),f.push(["}else{s",e[p],"=",s].join("")),f.push(["j",p,"-=",s,"}"].join("")),o&&f.push(["index[",e[p],"]=j",p].join(""));for(var p=0;p<a;++p){for(var c=["offset"+p],h=t;h<i;++h)c.push(["j",h,"*t",p,"p",e[h]].join(""));f.push(["p",p,"=(",c.join("+"),")"].join(""))}f.push(C1(e,r,n));for(var p=t;p<i;++p)f.push("}");return f.join(`
`)}function vF(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}function Ml(t,e,r){for(var n=t.body,i=[],a=[],s=0;s<t.args.length;++s){var o=t.args[s];if(!(o.count<=0)){var f=new RegExp(o.name,"g"),p="",c=e.arrayArgs.indexOf(s);switch(e.argTypes[s]){case"offset":var h=e.offsetArgIndex.indexOf(s),d=e.offsetArgs[h];c=d.array,p="+q"+h;case"array":p="p"+c+p;var g="l"+s,b="a"+c;if(e.arrayBlockIndices[c]===0)o.count===1?r[c]==="generic"?o.lvalue?(i.push(["var ",g,"=",b,".get(",p,")"].join("")),n=n.replace(f,g),a.push([b,".set(",p,",",g,")"].join(""))):n=n.replace(f,[b,".get(",p,")"].join("")):n=n.replace(f,[b,"[",p,"]"].join("")):r[c]==="generic"?(i.push(["var ",g,"=",b,".get(",p,")"].join("")),n=n.replace(f,g),o.lvalue&&a.push([b,".set(",p,",",g,")"].join(""))):(i.push(["var ",g,"=",b,"[",p,"]"].join("")),n=n.replace(f,g),o.lvalue&&a.push([b,"[",p,"]=",g].join("")));else{for(var v=[o.name],_=[p],D=0;D<Math.abs(e.arrayBlockIndices[c]);D++)v.push("\\s*\\[([^\\]]+)\\]"),_.push("$"+(D+1)+"*t"+c+"b"+D);if(f=new RegExp(v.join(""),"g"),p=_.join("+"),r[c]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(f,[b,"[",p,"]"].join(""))}break;case"scalar":n=n.replace(f,"Y"+e.scalarArgs.indexOf(s));break;case"index":n=n.replace(f,"index");break;case"shape":n=n.replace(f,"shape");break}}}return[i.join(`
`),n,a.join(`
`)].join(`
`).trim()}function gF(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],a=i.match(/\d+/);a?a=a[0]:a="",i.charAt(0)===0?e[n]="u"+i.charAt(1)+a:e[n]=i.charAt(0)+a,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}function mF(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,n=new Array(t.arrayArgs.length),i=new Array(t.arrayArgs.length),a=0;a<t.arrayArgs.length;++a)i[a]=e[2*a],n[a]=e[2*a+1];for(var s=[],o=[],f=[],p=[],c=[],a=0;a<t.arrayArgs.length;++a){t.arrayBlockIndices[a]<0?(f.push(0),p.push(r),s.push(r),o.push(r+t.arrayBlockIndices[a])):(f.push(t.arrayBlockIndices[a]),p.push(t.arrayBlockIndices[a]+r),s.push(0),o.push(t.arrayBlockIndices[a]));for(var h=[],d=0;d<n[a].length;d++)f[a]<=n[a][d]&&n[a][d]<p[a]&&h.push(n[a][d]-f[a]);c.push(h)}for(var g=["SS"],b=["'use strict'"],v=[],d=0;d<r;++d)v.push(["s",d,"=SS[",d,"]"].join(""));for(var a=0;a<t.arrayArgs.length;++a){g.push("a"+a),g.push("t"+a),g.push("p"+a);for(var d=0;d<r;++d)v.push(["t",a,"p",d,"=t",a,"[",f[a]+d,"]"].join(""));for(var d=0;d<Math.abs(t.arrayBlockIndices[a]);++d)v.push(["t",a,"b",d,"=t",a,"[",s[a]+d,"]"].join(""))}for(var a=0;a<t.scalarArgs.length;++a)g.push("Y"+a);if(t.shapeArgs.length>0&&v.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var _=new Array(r),a=0;a<r;++a)_[a]="0";v.push(["index=[",_.join(","),"]"].join(""))}for(var a=0;a<t.offsetArgs.length;++a){for(var D=t.offsetArgs[a],F=[],d=0;d<D.offset.length;++d)D.offset[d]!==0&&(D.offset[d]===1?F.push(["t",D.array,"p",d].join("")):F.push([D.offset[d],"*t",D.array,"p",d].join("")));F.length===0?v.push("q"+a+"=0"):v.push(["q",a,"=",F.join("+")].join(""))}var E=dF([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));v=v.concat(E),v.length>0&&b.push("var "+v.join(","));for(var a=0;a<t.arrayArgs.length;++a)b.push("p"+a+"|=0");t.pre.body.length>3&&b.push(Ml(t.pre,t,i));var C=Ml(t.body,t,i),A=vF(c);A<r?b.push(pF(A,c[0],t,C)):b.push(C1(c[0],t,C)),t.post.body.length>3&&b.push(Ml(t.post,t,i)),t.debug&&console.log("-----Generated cwise routine for ",e,`:
`+b.join(`
`)+`
----------`);var S=[t.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",A,gF(i)].join(""),P=new Function(["function ",S,"(",g.join(","),"){",b.join(`
`),"} return ",S].join(""));return P()}var _F=mF,bF=_F;function DF(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var i=[],a=[],s=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],o=[],f=[],p=0;p<t.arrayArgs.length;++p){var c=t.arrayArgs[p];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),i.push("t"+c),i.push("r"+c),a.push("t"+c),a.push("r"+c+".join()"),s.push("array"+c+".data"),s.push("array"+c+".stride"),s.push("array"+c+".offset|0"),p>0&&(o.push("array"+t.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[p]))),f.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[p])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+o.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+f.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var p=0;p<t.scalarArgs.length;++p)s.push("scalar"+t.scalarArgs[p]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",s.join(","),")}"].join("")),t.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var h=new Function("compile",e.join(`
`));return h(bF.bind(void 0,t))}var yF=DF,wF=yF;function AF(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function EF(t){var e=new AF;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var n=0;n<r.length;++n){var i=r[n];if(i==="array"||typeof i=="object"&&i.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(i==="scalar")e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if(i==="index"){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(i==="shape"){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof i=="object"&&i.offset)e.argTypes[n]="offset",e.offsetArgs.push({array:i.array,offset:i.offset}),e.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+r[n])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,wF(e)}var Vf=EF;(function(t){var e=Vf,r={body:"",args:[],thisVars:[],localVars:[]};function n(d){if(!d)return r;for(var g=0;g<d.args.length;++g){var b=d.args[g];g===0?d.args[g]={name:b,lvalue:!0,rvalue:!!d.rvalue,count:d.count||1}:d.args[g]={name:b,lvalue:!1,rvalue:!0,count:1}}return d.thisVars||(d.thisVars=[]),d.localVars||(d.localVars=[]),d}function i(d){return e({args:d.args,pre:n(d.pre),body:n(d.body),post:n(d.proc),funcName:d.funcName})}function a(d){for(var g=[],b=0;b<d.args.length;++b)g.push("a"+b);var v=new Function("P",["return function ",d.funcName,"_ndarrayops(",g.join(","),") {P(",g.join(","),");return a0}"].join(""));return v(i(d))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var d in s){var g=s[d];t[d]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:d}),t[d+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+g+"=b"},rvalue:!0,funcName:d+"eq"}),t[d+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:d+"s"}),t[d+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+g+"=s"},rvalue:!0,funcName:d+"seq"})}})();var o={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var d in o){var g=o[d];t[d]=a({args:["array","array"],body:{args:["a","b"],body:"a="+g+"b"},funcName:d}),t[d+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+g+"a"},rvalue:!0,count:2,funcName:d+"eq"})}})();var f={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var d in f){var g=f[d];t[d]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:d}),t[d+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:d+"s"}),t[d+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+g+"b"},rvalue:!0,count:2,funcName:d+"eq"}),t[d+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+g+"s"},rvalue:!0,count:2,funcName:d+"seq"})}})();var p=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var d=0;d<p.length;++d){var g=p[d];t[g]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:g}),t[g+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"})}})();var c=["max","min","atan2","pow"];(function(){for(var d=0;d<c.length;++d){var g=c[d];t[g]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g}),t[g+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g+"s"}),t[g+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"}),t[g+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"seq"})}})();var h=["atan2","pow"];(function(){for(var d=0;d<h.length;++d){var g=h[d];t[g+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"op"}),t[g+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"ops"}),t[g+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opeq"}),t[g+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opseq"})}})(),t.any=e({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=e({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=e({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(so);var CF=Vf({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64}),Z0=Sa,FF=CF,SF=function(e,r){for(var n=[],i=e,a=1;Array.isArray(i);)n.push(i.length),a*=i.length,i=i[0];return n.length===0?Z0():(r||(r=Z0(new Float64Array(a),n)),FF(r,e),r)};function F1(t,e,r){var n=t[r]|0;if(n<=0)return[];var i=new Array(n),a;if(r===t.length-1)for(a=0;a<n;++a)i[a]=e;else for(a=0;a<n;++a)i[a]=F1(t,e,r+1);return i}function BF(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function OF(t,e){switch(typeof e>"u"&&(e=0),typeof t){case"number":if(t>0)return BF(t|0,e);break;case"object":if(typeof t.length=="number")return F1(t,e,0);break}return[]}var MF=OF,S1={};(function(t){(function(e,r){r(t)})(dr,function(e){var r,n,i,a,s,o,f,p,c,h,d,g,b,v,_,D,F,E;r={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},n={},n[r.BooleanLiteral]="Boolean",n[r.EOF]="<end>",n[r.Identifier]="Identifier",n[r.Keyword]="Keyword",n[r.NullLiteral]="Null",n[r.NumericLiteral]="Numeric",n[r.Punctuator]="Punctuator",n[r.StringLiteral]="String",n[r.RegularExpression]="RegularExpression",i=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},s={Data:1,Get:2,Set:4},o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},f={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function C(y,M){if(!y)throw new Error("ASSERT: "+M)}function A(y){return y>=48&&y<=57}function S(y){return"0123456789abcdefABCDEF".indexOf(y)>=0}function P(y){return"01234567".indexOf(y)>=0}function B(y){return y===32||y===9||y===11||y===12||y===160||y>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(y)>=0}function N(y){return y===10||y===13||y===8232||y===8233}function q(y){return y===36||y===95||y>=65&&y<=90||y>=97&&y<=122||y===92||y>=128&&f.NonAsciiIdentifierStart.test(String.fromCharCode(y))}function X(y){return y===36||y===95||y>=65&&y<=90||y>=97&&y<=122||y>=48&&y<=57||y===92||y>=128&&f.NonAsciiIdentifierPart.test(String.fromCharCode(y))}function K(y){switch(y){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function U(y){switch(y){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function R(y){return y==="eval"||y==="arguments"}function z(y){if(h&&U(y))return!0;switch(y.length){case 2:return y==="if"||y==="in"||y==="do";case 3:return y==="var"||y==="for"||y==="new"||y==="try"||y==="let";case 4:return y==="this"||y==="else"||y==="case"||y==="void"||y==="with"||y==="enum";case 5:return y==="while"||y==="break"||y==="catch"||y==="throw"||y==="const"||y==="yield"||y==="class"||y==="super";case 6:return y==="return"||y==="typeof"||y==="delete"||y==="switch"||y==="export"||y==="import";case 7:return y==="default"||y==="finally"||y==="extends";case 8:return y==="function"||y==="continue"||y==="debugger";case 10:return y==="instanceof";default:return!1}}function V(y,M,j,te,ve){var Te;C(typeof j=="number","Comment must have valid position"),!(F.lastCommentStart>=j)&&(F.lastCommentStart=j,Te={type:y,value:M},E.range&&(Te.range=[j,te]),E.loc&&(Te.loc=ve),E.comments.push(Te),E.attachComment&&(E.leadingComments.push(Te),E.trailingComments.push(Te)))}function Q(y){var M,j,te,ve;for(M=d-y,j={start:{line:g,column:d-b-y}};d<v;)if(te=c.charCodeAt(d),++d,N(te)){E.comments&&(ve=c.slice(M+y,d-1),j.end={line:g,column:d-b-1},V("Line",ve,M,d-1,j)),te===13&&c.charCodeAt(d)===10&&++d,++g,b=d;return}E.comments&&(ve=c.slice(M+y,d),j.end={line:g,column:d-b},V("Line",ve,M,d,j))}function ae(){var y,M,j,te;for(E.comments&&(y=d-2,M={start:{line:g,column:d-b-2}});d<v;)if(j=c.charCodeAt(d),N(j))j===13&&c.charCodeAt(d+1)===10&&++d,++g,++d,b=d,d>=v&&G({},o.UnexpectedToken,"ILLEGAL");else if(j===42){if(c.charCodeAt(d+1)===47){++d,++d,E.comments&&(te=c.slice(y+2,d-2),M.end={line:g,column:d-b},V("Block",te,y,d,M));return}++d}else++d;G({},o.UnexpectedToken,"ILLEGAL")}function se(){var y,M;for(M=d===0;d<v;)if(y=c.charCodeAt(d),B(y))++d;else if(N(y))++d,y===13&&c.charCodeAt(d)===10&&++d,++g,b=d,M=!0;else if(y===47)if(y=c.charCodeAt(d+1),y===47)++d,++d,Q(2),M=!0;else if(y===42)++d,++d,ae();else break;else if(M&&y===45)if(c.charCodeAt(d+1)===45&&c.charCodeAt(d+2)===62)d+=3,Q(3);else break;else if(y===60)if(c.slice(d+1,d+4)==="!--")++d,++d,++d,++d,Q(4);else break;else break}function he(y){var M,j,te,ve=0;for(j=y==="u"?4:2,M=0;M<j;++M)if(d<v&&S(c[d]))te=c[d++],ve=ve*16+"0123456789abcdef".indexOf(te.toLowerCase());else return"";return String.fromCharCode(ve)}function Ce(){var y,M;for(y=c.charCodeAt(d++),M=String.fromCharCode(y),y===92&&(c.charCodeAt(d)!==117&&G({},o.UnexpectedToken,"ILLEGAL"),++d,y=he("u"),(!y||y==="\\"||!q(y.charCodeAt(0)))&&G({},o.UnexpectedToken,"ILLEGAL"),M=y);d<v&&(y=c.charCodeAt(d),!!X(y));)++d,M+=String.fromCharCode(y),y===92&&(M=M.substr(0,M.length-1),c.charCodeAt(d)!==117&&G({},o.UnexpectedToken,"ILLEGAL"),++d,y=he("u"),(!y||y==="\\"||!X(y.charCodeAt(0)))&&G({},o.UnexpectedToken,"ILLEGAL"),M+=y);return M}function Be(){var y,M;for(y=d++;d<v;){if(M=c.charCodeAt(d),M===92)return d=y,Ce();if(X(M))++d;else break}return c.slice(y,d)}function Fe(){var y,M,j;return y=d,M=c.charCodeAt(d)===92?Ce():Be(),M.length===1?j=r.Identifier:z(M)?j=r.Keyword:M==="null"?j=r.NullLiteral:M==="true"||M==="false"?j=r.BooleanLiteral:j=r.Identifier,{type:j,value:M,lineNumber:g,lineStart:b,start:y,end:d}}function je(){var y=d,M=c.charCodeAt(d),j,te=c[d],ve,Te,mt;switch(M){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++d,E.tokenize&&(M===40?E.openParenToken=E.tokens.length:M===123&&(E.openCurlyToken=E.tokens.length)),{type:r.Punctuator,value:String.fromCharCode(M),lineNumber:g,lineStart:b,start:y,end:d};default:if(j=c.charCodeAt(d+1),j===61)switch(M){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return d+=2,{type:r.Punctuator,value:String.fromCharCode(M)+String.fromCharCode(j),lineNumber:g,lineStart:b,start:y,end:d};case 33:case 61:return d+=2,c.charCodeAt(d)===61&&++d,{type:r.Punctuator,value:c.slice(y,d),lineNumber:g,lineStart:b,start:y,end:d}}}if(mt=c.substr(d,4),mt===">>>=")return d+=4,{type:r.Punctuator,value:mt,lineNumber:g,lineStart:b,start:y,end:d};if(Te=mt.substr(0,3),Te===">>>"||Te==="<<="||Te===">>=")return d+=3,{type:r.Punctuator,value:Te,lineNumber:g,lineStart:b,start:y,end:d};if(ve=Te.substr(0,2),te===ve[1]&&"+-<>&|".indexOf(te)>=0||ve==="=>")return d+=2,{type:r.Punctuator,value:ve,lineNumber:g,lineStart:b,start:y,end:d};if("<>=!+-*%&|^/".indexOf(te)>=0)return++d,{type:r.Punctuator,value:te,lineNumber:g,lineStart:b,start:y,end:d};G({},o.UnexpectedToken,"ILLEGAL")}function Ue(y){for(var M="";d<v&&S(c[d]);)M+=c[d++];return M.length===0&&G({},o.UnexpectedToken,"ILLEGAL"),q(c.charCodeAt(d))&&G({},o.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt("0x"+M,16),lineNumber:g,lineStart:b,start:y,end:d}}function Ve(y){for(var M="0"+c[d++];d<v&&P(c[d]);)M+=c[d++];return(q(c.charCodeAt(d))||A(c.charCodeAt(d)))&&G({},o.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt(M,8),octal:!0,lineNumber:g,lineStart:b,start:y,end:d}}function ot(){var y,M;for(y=d+1;y<v;++y){if(M=c[y],M==="8"||M==="9")return!1;if(!P(M))return!0}return!0}function Dt(){var y,M,j;if(j=c[d],C(A(j.charCodeAt(0))||j===".","Numeric literal must start with a decimal digit or a decimal point"),M=d,y="",j!=="."){if(y=c[d++],j=c[d],y==="0"){if(j==="x"||j==="X")return++d,Ue(M);if(P(j)&&ot())return Ve(M)}for(;A(c.charCodeAt(d));)y+=c[d++];j=c[d]}if(j==="."){for(y+=c[d++];A(c.charCodeAt(d));)y+=c[d++];j=c[d]}if(j==="e"||j==="E")if(y+=c[d++],j=c[d],(j==="+"||j==="-")&&(y+=c[d++]),A(c.charCodeAt(d)))for(;A(c.charCodeAt(d));)y+=c[d++];else G({},o.UnexpectedToken,"ILLEGAL");return q(c.charCodeAt(d))&&G({},o.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseFloat(y),lineNumber:g,lineStart:b,start:M,end:d}}function rt(){var y="",M,j,te,ve,Te,mt,Bt=!1,Gt,or;for(Gt=g,or=b,M=c[d],C(M==="'"||M==='"',"String literal must starts with a quote"),j=d,++d;d<v;)if(te=c[d++],te===M){M="";break}else if(te==="\\")if(te=c[d++],!te||!N(te.charCodeAt(0)))switch(te){case"u":case"x":mt=d,Te=he(te),Te?y+=Te:(d=mt,y+=te);break;case"n":y+=`
`;break;case"r":y+="\r";break;case"t":y+="	";break;case"b":y+="\b";break;case"f":y+="\f";break;case"v":y+="\v";break;default:P(te)?(ve="01234567".indexOf(te),ve!==0&&(Bt=!0),d<v&&P(c[d])&&(Bt=!0,ve=ve*8+"01234567".indexOf(c[d++]),"0123".indexOf(te)>=0&&d<v&&P(c[d])&&(ve=ve*8+"01234567".indexOf(c[d++]))),y+=String.fromCharCode(ve)):y+=te;break}else++g,te==="\r"&&c[d]===`
`&&++d,b=d;else{if(N(te.charCodeAt(0)))break;y+=te}return M!==""&&G({},o.UnexpectedToken,"ILLEGAL"),{type:r.StringLiteral,value:y,octal:Bt,startLineNumber:Gt,startLineStart:or,lineNumber:g,lineStart:b,start:j,end:d}}function it(y,M){var j;try{j=new RegExp(y,M)}catch{G({},o.InvalidRegExp)}return j}function St(){var y,M,j,te,ve;for(y=c[d],C(y==="/","Regular expression literal must start with a slash"),M=c[d++],j=!1,te=!1;d<v;)if(y=c[d++],M+=y,y==="\\")y=c[d++],N(y.charCodeAt(0))&&G({},o.UnterminatedRegExp),M+=y;else if(N(y.charCodeAt(0)))G({},o.UnterminatedRegExp);else if(j)y==="]"&&(j=!1);else if(y==="/"){te=!0;break}else y==="["&&(j=!0);return te||G({},o.UnterminatedRegExp),ve=M.substr(1,M.length-2),{value:ve,literal:M}}function nt(){var y,M,j,te;for(M="",j="";d<v&&(y=c[d],!!X(y.charCodeAt(0)));)if(++d,y==="\\"&&d<v)if(y=c[d],y==="u"){if(++d,te=d,y=he("u"),y)for(j+=y,M+="\\u";te<d;++te)M+=c[te];else d=te,j+="u",M+="\\u";ee({},o.UnexpectedToken,"ILLEGAL")}else M+="\\",ee({},o.UnexpectedToken,"ILLEGAL");else j+=y,M+=y;return{value:j,literal:M}}function ht(){var y,M,j,te;return D=null,se(),y=d,M=St(),j=nt(),te=it(M.value,j.value),E.tokenize?{type:r.RegularExpression,value:te,lineNumber:g,lineStart:b,start:y,end:d}:{literal:M.literal+j.literal,value:te,start:y,end:d}}function lt(){var y,M,j,te;return se(),y=d,M={start:{line:g,column:d-b}},j=ht(),M.end={line:g,column:d-b},E.tokenize||(E.tokens.length>0&&(te=E.tokens[E.tokens.length-1],te.range[0]===y&&te.type==="Punctuator"&&(te.value==="/"||te.value==="/=")&&E.tokens.pop()),E.tokens.push({type:"RegularExpression",value:j.literal,range:[y,d],loc:M})),j}function ft(y){return y.type===r.Identifier||y.type===r.Keyword||y.type===r.BooleanLiteral||y.type===r.NullLiteral}function Ke(){var y,M;if(y=E.tokens[E.tokens.length-1],!y)return lt();if(y.type==="Punctuator"){if(y.value==="]")return je();if(y.value===")")return M=E.tokens[E.openParenToken-1],M&&M.type==="Keyword"&&(M.value==="if"||M.value==="while"||M.value==="for"||M.value==="with")?lt():je();if(y.value==="}"){if(E.tokens[E.openCurlyToken-3]&&E.tokens[E.openCurlyToken-3].type==="Keyword"){if(M=E.tokens[E.openCurlyToken-4],!M)return je()}else if(E.tokens[E.openCurlyToken-4]&&E.tokens[E.openCurlyToken-4].type==="Keyword"){if(M=E.tokens[E.openCurlyToken-5],!M)return lt()}else return je();return i.indexOf(M.value)>=0?je():lt()}return lt()}return y.type==="Keyword"&&y.value!=="this"?lt():je()}function Ye(){var y;return se(),d>=v?{type:r.EOF,lineNumber:g,lineStart:b,start:d,end:d}:(y=c.charCodeAt(d),q(y)?Fe():y===40||y===41||y===59?je():y===39||y===34?rt():y===46?A(c.charCodeAt(d+1))?Dt():je():A(y)?Dt():E.tokenize&&y===47?Ke():je())}function Ee(){var y,M,j;return se(),y={start:{line:g,column:d-b}},M=Ye(),y.end={line:g,column:d-b},M.type!==r.EOF&&(j=c.slice(M.start,M.end),E.tokens.push({type:n[M.type],value:j,range:[M.start,M.end],loc:y})),M}function Ne(){var y;return y=D,d=y.end,g=y.lineNumber,b=y.lineStart,D=typeof E.tokens<"u"?Ee():Ye(),d=y.end,g=y.lineNumber,b=y.lineStart,y}function Mt(){var y,M,j;y=d,M=g,j=b,D=typeof E.tokens<"u"?Ee():Ye(),d=y,g=M,b=j}function Vt(y,M){this.line=y,this.column=M}function Ht(y,M,j,te){this.start=new Vt(y,M),this.end=new Vt(j,te)}p={name:"SyntaxTree",processComment:function(y){var M,j;if(!(y.type===a.Program&&y.body.length>0)){for(E.trailingComments.length>0?E.trailingComments[0].range[0]>=y.range[1]?(j=E.trailingComments,E.trailingComments=[]):E.trailingComments.length=0:E.bottomRightStack.length>0&&E.bottomRightStack[E.bottomRightStack.length-1].trailingComments&&E.bottomRightStack[E.bottomRightStack.length-1].trailingComments[0].range[0]>=y.range[1]&&(j=E.bottomRightStack[E.bottomRightStack.length-1].trailingComments,delete E.bottomRightStack[E.bottomRightStack.length-1].trailingComments);E.bottomRightStack.length>0&&E.bottomRightStack[E.bottomRightStack.length-1].range[0]>=y.range[0];)M=E.bottomRightStack.pop();M?M.leadingComments&&M.leadingComments[M.leadingComments.length-1].range[1]<=y.range[0]&&(y.leadingComments=M.leadingComments,delete M.leadingComments):E.leadingComments.length>0&&E.leadingComments[E.leadingComments.length-1].range[1]<=y.range[0]&&(y.leadingComments=E.leadingComments,E.leadingComments=[]),j&&(y.trailingComments=j),E.bottomRightStack.push(y)}},markEnd:function(y,M){return E.range&&(y.range=[M.start,d]),E.loc&&(y.loc=new Ht(M.startLineNumber===void 0?M.lineNumber:M.startLineNumber,M.start-(M.startLineStart===void 0?M.lineStart:M.startLineStart),g,d-b),this.postProcess(y)),E.attachComment&&this.processComment(y),y},postProcess:function(y){return E.source&&(y.loc.source=E.source),y},createArrayExpression:function(y){return{type:a.ArrayExpression,elements:y}},createAssignmentExpression:function(y,M,j){return{type:a.AssignmentExpression,operator:y,left:M,right:j}},createBinaryExpression:function(y,M,j){var te=y==="||"||y==="&&"?a.LogicalExpression:a.BinaryExpression;return{type:te,operator:y,left:M,right:j}},createBlockStatement:function(y){return{type:a.BlockStatement,body:y}},createBreakStatement:function(y){return{type:a.BreakStatement,label:y}},createCallExpression:function(y,M){return{type:a.CallExpression,callee:y,arguments:M}},createCatchClause:function(y,M){return{type:a.CatchClause,param:y,body:M}},createConditionalExpression:function(y,M,j){return{type:a.ConditionalExpression,test:y,consequent:M,alternate:j}},createContinueStatement:function(y){return{type:a.ContinueStatement,label:y}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(y,M){return{type:a.DoWhileStatement,body:y,test:M}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(y){return{type:a.ExpressionStatement,expression:y}},createForStatement:function(y,M,j,te){return{type:a.ForStatement,init:y,test:M,update:j,body:te}},createForInStatement:function(y,M,j){return{type:a.ForInStatement,left:y,right:M,body:j,each:!1}},createFunctionDeclaration:function(y,M,j,te){return{type:a.FunctionDeclaration,id:y,params:M,defaults:j,body:te,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(y,M,j,te){return{type:a.FunctionExpression,id:y,params:M,defaults:j,body:te,rest:null,generator:!1,expression:!1}},createIdentifier:function(y){return{type:a.Identifier,name:y}},createIfStatement:function(y,M,j){return{type:a.IfStatement,test:y,consequent:M,alternate:j}},createLabeledStatement:function(y,M){return{type:a.LabeledStatement,label:y,body:M}},createLiteral:function(y){return{type:a.Literal,value:y.value,raw:c.slice(y.start,y.end)}},createMemberExpression:function(y,M,j){return{type:a.MemberExpression,computed:y==="[",object:M,property:j}},createNewExpression:function(y,M){return{type:a.NewExpression,callee:y,arguments:M}},createObjectExpression:function(y){return{type:a.ObjectExpression,properties:y}},createPostfixExpression:function(y,M){return{type:a.UpdateExpression,operator:y,argument:M,prefix:!1}},createProgram:function(y){return{type:a.Program,body:y}},createProperty:function(y,M,j){return{type:a.Property,key:M,value:j,kind:y}},createReturnStatement:function(y){return{type:a.ReturnStatement,argument:y}},createSequenceExpression:function(y){return{type:a.SequenceExpression,expressions:y}},createSwitchCase:function(y,M){return{type:a.SwitchCase,test:y,consequent:M}},createSwitchStatement:function(y,M){return{type:a.SwitchStatement,discriminant:y,cases:M}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(y){return{type:a.ThrowStatement,argument:y}},createTryStatement:function(y,M,j,te){return{type:a.TryStatement,block:y,guardedHandlers:M,handlers:j,finalizer:te}},createUnaryExpression:function(y,M){return y==="++"||y==="--"?{type:a.UpdateExpression,operator:y,argument:M,prefix:!0}:{type:a.UnaryExpression,operator:y,argument:M,prefix:!0}},createVariableDeclaration:function(y,M){return{type:a.VariableDeclaration,declarations:y,kind:M}},createVariableDeclarator:function(y,M){return{type:a.VariableDeclarator,id:y,init:M}},createWhileStatement:function(y,M){return{type:a.WhileStatement,test:y,body:M}},createWithStatement:function(y,M){return{type:a.WithStatement,object:y,body:M}}};function W(){var y,M,j,te;return y=d,M=g,j=b,se(),te=g!==M,d=y,g=M,b=j,te}function G(y,M){var j,te=Array.prototype.slice.call(arguments,2),ve=M.replace(/%(\d)/g,function(Te,mt){return C(mt<te.length,"Message reference must be in range"),te[mt]});throw typeof y.lineNumber=="number"?(j=new Error("Line "+y.lineNumber+": "+ve),j.index=y.start,j.lineNumber=y.lineNumber,j.column=y.start-b+1):(j=new Error("Line "+g+": "+ve),j.index=d,j.lineNumber=g,j.column=d-b+1),j.description=ve,j}function ee(){try{G.apply(null,arguments)}catch(y){if(E.errors)E.errors.push(y);else throw y}}function le(y){if(y.type===r.EOF&&G(y,o.UnexpectedEOS),y.type===r.NumericLiteral&&G(y,o.UnexpectedNumber),y.type===r.StringLiteral&&G(y,o.UnexpectedString),y.type===r.Identifier&&G(y,o.UnexpectedIdentifier),y.type===r.Keyword){if(K(y.value))G(y,o.UnexpectedReserved);else if(h&&U(y.value)){ee(y,o.StrictReservedWord);return}G(y,o.UnexpectedToken,y.value)}G(y,o.UnexpectedToken,y.value)}function ie(y){var M=Ne();(M.type!==r.Punctuator||M.value!==y)&&le(M)}function de(y){var M=Ne();(M.type!==r.Keyword||M.value!==y)&&le(M)}function ue(y){return D.type===r.Punctuator&&D.value===y}function ce(y){return D.type===r.Keyword&&D.value===y}function Ae(){var y;return D.type!==r.Punctuator?!1:(y=D.value,y==="="||y==="*="||y==="/="||y==="%="||y==="+="||y==="-="||y==="<<="||y===">>="||y===">>>="||y==="&="||y==="^="||y==="|=")}function Re(){var y,M=d,j=g,te=b,ve=D;if(c.charCodeAt(d)===59||ue(";")){Ne();return}if(y=g,se(),g!==y){d=M,g=j,b=te,D=ve;return}D.type!==r.EOF&&!ue("}")&&le(D)}function Qe(y){return y.type===a.Identifier||y.type===a.MemberExpression}function Oe(){var y=[],M;for(M=D,ie("[");!ue("]");)ue(",")?(Ne(),y.push(null)):(y.push(Or()),ue("]")||ie(","));return Ne(),_.markEnd(_.createArrayExpression(y),M)}function zt(y,M){var j,te,ve;return j=h,ve=D,te=Li(),M&&h&&R(y[0].name)&&ee(M,o.StrictParamName),h=j,_.markEnd(_.createFunctionExpression(null,y,[],te),ve)}function Rt(){var y,M;return M=D,y=Ne(),y.type===r.StringLiteral||y.type===r.NumericLiteral?(h&&y.octal&&ee(y,o.StrictOctalLiteral),_.markEnd(_.createLiteral(y),M)):_.markEnd(_.createIdentifier(y.value),M)}function nr(){var y,M,j,te,ve,Te;if(y=D,Te=D,y.type===r.Identifier)return j=Rt(),y.value==="get"&&!ue(":")?(M=Rt(),ie("("),ie(")"),te=zt([]),_.markEnd(_.createProperty("get",M,te),Te)):y.value==="set"&&!ue(":")?(M=Rt(),ie("("),y=D,y.type!==r.Identifier?(ie(")"),ee(y,o.UnexpectedToken,y.value),te=zt([])):(ve=[mn()],ie(")"),te=zt(ve,y)),_.markEnd(_.createProperty("set",M,te),Te)):(ie(":"),te=Or(),_.markEnd(_.createProperty("init",j,te),Te));if(y.type===r.EOF||y.type===r.Punctuator)le(y);else return M=Rt(),ie(":"),te=Or(),_.markEnd(_.createProperty("init",M,te),Te)}function Zt(){var y=[],M,j,te,ve,Te={},mt=String,Bt;for(Bt=D,ie("{");!ue("}");)M=nr(),M.key.type===a.Identifier?j=M.key.name:j=mt(M.key.value),ve=M.kind==="init"?s.Data:M.kind==="get"?s.Get:s.Set,te="$"+j,Object.prototype.hasOwnProperty.call(Te,te)?(Te[te]===s.Data?h&&ve===s.Data?ee({},o.StrictDuplicateProperty):ve!==s.Data&&ee({},o.AccessorDataProperty):ve===s.Data?ee({},o.AccessorDataProperty):Te[te]&ve&&ee({},o.AccessorGetSet),Te[te]|=ve):Te[te]=ve,y.push(M),ue("}")||ie(",");return ie("}"),_.markEnd(_.createObjectExpression(y),Bt)}function Dr(){var y;return ie("("),y=ir(),ie(")"),y}function Jt(){var y,M,j,te;if(ue("("))return Dr();if(ue("["))return Oe();if(ue("{"))return Zt();if(y=D.type,te=D,y===r.Identifier)j=_.createIdentifier(Ne().value);else if(y===r.StringLiteral||y===r.NumericLiteral)h&&D.octal&&ee(D,o.StrictOctalLiteral),j=_.createLiteral(Ne());else if(y===r.Keyword){if(ce("function"))return Ui();ce("this")?(Ne(),j=_.createThisExpression()):le(Ne())}else y===r.BooleanLiteral?(M=Ne(),M.value=M.value==="true",j=_.createLiteral(M)):y===r.NullLiteral?(M=Ne(),M.value=null,j=_.createLiteral(M)):ue("/")||ue("/=")?(typeof E.tokens<"u"?j=_.createLiteral(lt()):j=_.createLiteral(ht()),Mt()):le(Ne());return _.markEnd(j,te)}function yr(){var y=[];if(ie("("),!ue(")"))for(;d<v&&(y.push(Or()),!ue(")"));)ie(",");return ie(")"),y}function cr(){var y,M;return M=D,y=Ne(),ft(y)||le(y),_.markEnd(_.createIdentifier(y.value),M)}function hr(){return ie("."),cr()}function gn(){var y;return ie("["),y=ir(),ie("]"),y}function gr(){var y,M,j;return j=D,de("new"),y=Qn(),M=ue("(")?yr():[],_.markEnd(_.createNewExpression(y,M),j)}function On(){var y,M,j,te,ve=F.allowIn;for(te=D,F.allowIn=!0,y=ce("new")?gr():Jt();;){if(ue("."))j=hr(),y=_.createMemberExpression(".",y,j);else if(ue("("))M=yr(),y=_.createCallExpression(y,M);else if(ue("["))j=gn(),y=_.createMemberExpression("[",y,j);else break;_.markEnd(y,te)}return F.allowIn=ve,y}function Qn(){var y,M,j;for(C(F.allowIn,"callee of new expression always allow in keyword."),j=D,y=ce("new")?gr():Jt();ue(".")||ue("[");)ue("[")?(M=gn(),y=_.createMemberExpression("[",y,M)):(M=hr(),y=_.createMemberExpression(".",y,M)),_.markEnd(y,j);return y}function Vn(){var y,M,j=D;return y=On(),D.type===r.Punctuator&&(ue("++")||ue("--"))&&!W()&&(h&&y.type===a.Identifier&&R(y.name)&&ee({},o.StrictLHSPostfix),Qe(y)||ee({},o.InvalidLHSInAssignment),M=Ne(),y=_.markEnd(_.createPostfixExpression(M.value,y),j)),y}function jn(){var y,M,j;return D.type!==r.Punctuator&&D.type!==r.Keyword?M=Vn():ue("++")||ue("--")?(j=D,y=Ne(),M=jn(),h&&M.type===a.Identifier&&R(M.name)&&ee({},o.StrictLHSPrefix),Qe(M)||ee({},o.InvalidLHSInAssignment),M=_.createUnaryExpression(y.value,M),M=_.markEnd(M,j)):ue("+")||ue("-")||ue("~")||ue("!")?(j=D,y=Ne(),M=jn(),M=_.createUnaryExpression(y.value,M),M=_.markEnd(M,j)):ce("delete")||ce("void")||ce("typeof")?(j=D,y=Ne(),M=jn(),M=_.createUnaryExpression(y.value,M),M=_.markEnd(M,j),h&&M.operator==="delete"&&M.argument.type===a.Identifier&&ee({},o.StrictDelete)):M=Vn(),M}function Qi(y,M){var j=0;if(y.type!==r.Punctuator&&y.type!==r.Keyword)return 0;switch(y.value){case"||":j=1;break;case"&&":j=2;break;case"|":j=3;break;case"^":j=4;break;case"&":j=5;break;case"==":case"!=":case"===":case"!==":j=6;break;case"<":case">":case"<=":case">=":case"instanceof":j=7;break;case"in":j=M?7:0;break;case"<<":case">>":case">>>":j=8;break;case"+":case"-":j=9;break;case"*":case"/":case"%":j=11;break}return j}function xi(){var y,M,j,te,ve,Te,mt,Bt,Gt,or;if(y=D,Gt=jn(),te=D,ve=Qi(te,F.allowIn),ve===0)return Gt;for(te.prec=ve,Ne(),M=[y,D],mt=jn(),Te=[Gt,te,mt];(ve=Qi(D,F.allowIn))>0;){for(;Te.length>2&&ve<=Te[Te.length-2].prec;)mt=Te.pop(),Bt=Te.pop().value,Gt=Te.pop(),j=_.createBinaryExpression(Bt,Gt,mt),M.pop(),y=M[M.length-1],_.markEnd(j,y),Te.push(j);te=Ne(),te.prec=ve,Te.push(te),M.push(D),j=jn(),Te.push(j)}for(or=Te.length-1,j=Te[or],M.pop();or>1;)j=_.createBinaryExpression(Te[or-1].value,Te[or-2],j),or-=2,y=M.pop(),_.markEnd(j,y);return j}function Ba(){var y,M,j,te,ve;return ve=D,y=xi(),ue("?")&&(Ne(),M=F.allowIn,F.allowIn=!0,j=Or(),F.allowIn=M,ie(":"),te=Or(),y=_.createConditionalExpression(y,j,te),_.markEnd(y,ve)),y}function Or(){var y,M,j,te,ve;return y=D,ve=D,te=M=Ba(),Ae()&&(Qe(M)||ee({},o.InvalidLHSInAssignment),h&&M.type===a.Identifier&&R(M.name)&&ee(y,o.StrictLHSAssignment),y=Ne(),j=Or(),te=_.markEnd(_.createAssignmentExpression(y.value,M,j),ve)),te}function ir(){var y,M=D;if(y=Or(),ue(",")){for(y=_.createSequenceExpression([y]);d<v&&ue(",");)Ne(),y.expressions.push(Or());_.markEnd(y,M)}return y}function Oa(){for(var y=[],M;d<v&&!(ue("}")||(M=Mn(),typeof M>"u"));)y.push(M);return y}function di(){var y,M;return M=D,ie("{"),y=Oa(),ie("}"),_.markEnd(_.createBlockStatement(y),M)}function mn(){var y,M;return M=D,y=Ne(),y.type!==r.Identifier&&le(y),_.markEnd(_.createIdentifier(y.value),M)}function Xn(y){var M=null,j,te;return te=D,j=mn(),h&&R(j.name)&&ee({},o.StrictVarName),y==="const"?(ie("="),M=Or()):ue("=")&&(Ne(),M=Or()),_.markEnd(_.createVariableDeclarator(j,M),te)}function Ri(y){var M=[];do{if(M.push(Xn(y)),!ue(","))break;Ne()}while(d<v);return M}function Ma(){var y;return de("var"),y=Ri(),Re(),_.createVariableDeclaration(y,"var")}function Pa(y){var M,j;return j=D,de(y),M=Ri(y),Re(),_.markEnd(_.createVariableDeclaration(M,y),j)}function Xi(){return ie(";"),_.createEmptyStatement()}function Ta(){var y=ir();return Re(),_.createExpressionStatement(y)}function ka(){var y,M,j;return de("if"),ie("("),y=ir(),ie(")"),M=Gr(),ce("else")?(Ne(),j=Gr()):j=null,_.createIfStatement(y,M,j)}function Ia(){var y,M,j;return de("do"),j=F.inIteration,F.inIteration=!0,y=Gr(),F.inIteration=j,de("while"),ie("("),M=ir(),ie(")"),ue(";")&&Ne(),_.createDoWhileStatement(y,M)}function Na(){var y,M,j;return de("while"),ie("("),y=ir(),ie(")"),j=F.inIteration,F.inIteration=!0,M=Gr(),F.inIteration=j,_.createWhileStatement(y,M)}function xa(){var y,M,j;return j=D,y=Ne(),M=Ri(),_.markEnd(_.createVariableDeclaration(M,y.value),j)}function Ra(){var y,M,j,te,ve,Te,mt,Bt=F.allowIn;return y=M=j=null,de("for"),ie("("),ue(";")?Ne():(ce("var")||ce("let")?(F.allowIn=!1,y=xa(),F.allowIn=Bt,y.declarations.length===1&&ce("in")&&(Ne(),te=y,ve=ir(),y=null)):(F.allowIn=!1,y=ir(),F.allowIn=Bt,ce("in")&&(Qe(y)||ee({},o.InvalidLHSInForIn),Ne(),te=y,ve=ir(),y=null)),typeof te>"u"&&ie(";")),typeof te>"u"&&(ue(";")||(M=ir()),ie(";"),ue(")")||(j=ir())),ie(")"),mt=F.inIteration,F.inIteration=!0,Te=Gr(),F.inIteration=mt,typeof te>"u"?_.createForStatement(y,M,j,Te):_.createForInStatement(te,ve,Te)}function pi(){var y=null,M;return de("continue"),c.charCodeAt(d)===59?(Ne(),F.inIteration||G({},o.IllegalContinue),_.createContinueStatement(null)):W()?(F.inIteration||G({},o.IllegalContinue),_.createContinueStatement(null)):(D.type===r.Identifier&&(y=mn(),M="$"+y.name,Object.prototype.hasOwnProperty.call(F.labelSet,M)||G({},o.UnknownLabel,y.name)),Re(),y===null&&!F.inIteration&&G({},o.IllegalContinue),_.createContinueStatement(y))}function La(){var y=null,M;return de("break"),c.charCodeAt(d)===59?(Ne(),F.inIteration||F.inSwitch||G({},o.IllegalBreak),_.createBreakStatement(null)):W()?(F.inIteration||F.inSwitch||G({},o.IllegalBreak),_.createBreakStatement(null)):(D.type===r.Identifier&&(y=mn(),M="$"+y.name,Object.prototype.hasOwnProperty.call(F.labelSet,M)||G({},o.UnknownLabel,y.name)),Re(),y===null&&!(F.inIteration||F.inSwitch)&&G({},o.IllegalBreak),_.createBreakStatement(y))}function vi(){var y=null;return de("return"),F.inFunctionBody||ee({},o.IllegalReturn),c.charCodeAt(d)===32&&q(c.charCodeAt(d+1))?(y=ir(),Re(),_.createReturnStatement(y)):W()?_.createReturnStatement(null):(ue(";")||!ue("}")&&D.type!==r.EOF&&(y=ir()),Re(),_.createReturnStatement(y))}function Ua(){var y,M;return h&&(se(),ee({},o.StrictModeWith)),de("with"),ie("("),y=ir(),ie(")"),M=Gr(),_.createWithStatement(y,M)}function Va(){var y,M=[],j,te;for(te=D,ce("default")?(Ne(),y=null):(de("case"),y=ir()),ie(":");d<v&&!(ue("}")||ce("default")||ce("case"));)j=Gr(),M.push(j);return _.markEnd(_.createSwitchCase(y,M),te)}function ja(){var y,M,j,te,ve;if(de("switch"),ie("("),y=ir(),ie(")"),ie("{"),M=[],ue("}"))return Ne(),_.createSwitchStatement(y,M);for(te=F.inSwitch,F.inSwitch=!0,ve=!1;d<v&&!ue("}");)j=Va(),j.test===null&&(ve&&G({},o.MultipleDefaultsInSwitch),ve=!0),M.push(j);return F.inSwitch=te,ie("}"),_.createSwitchStatement(y,M)}function ea(){var y;return de("throw"),W()&&G({},o.NewlineAfterThrow),y=ir(),Re(),_.createThrowStatement(y)}function qn(){var y,M,j;return j=D,de("catch"),ie("("),ue(")")&&le(D),y=mn(),h&&R(y.name)&&ee({},o.StrictCatchVariable),ie(")"),M=di(),_.markEnd(_.createCatchClause(y,M),j)}function wr(){var y,M=[],j=null;return de("try"),y=di(),ce("catch")&&M.push(qn()),ce("finally")&&(Ne(),j=di()),M.length===0&&!j&&G({},o.NoCatchOrFinally),_.createTryStatement(y,[],M,j)}function sr(){return de("debugger"),Re(),_.createDebuggerStatement()}function Gr(){var y=D.type,M,j,te,ve;if(y===r.EOF&&le(D),y===r.Punctuator&&D.value==="{")return di();if(ve=D,y===r.Punctuator)switch(D.value){case";":return _.markEnd(Xi(),ve);case"(":return _.markEnd(Ta(),ve)}if(y===r.Keyword)switch(D.value){case"break":return _.markEnd(La(),ve);case"continue":return _.markEnd(pi(),ve);case"debugger":return _.markEnd(sr(),ve);case"do":return _.markEnd(Ia(),ve);case"for":return _.markEnd(Ra(),ve);case"function":return _.markEnd(zn(),ve);case"if":return _.markEnd(ka(),ve);case"return":return _.markEnd(vi(),ve);case"switch":return _.markEnd(ja(),ve);case"throw":return _.markEnd(ea(),ve);case"try":return _.markEnd(wr(),ve);case"var":return _.markEnd(Ma(),ve);case"while":return _.markEnd(Na(),ve);case"with":return _.markEnd(Ua(),ve)}return M=ir(),M.type===a.Identifier&&ue(":")?(Ne(),te="$"+M.name,Object.prototype.hasOwnProperty.call(F.labelSet,te)&&G({},o.Redeclaration,"Label",M.name),F.labelSet[te]=!0,j=Gr(),delete F.labelSet[te],_.markEnd(_.createLabeledStatement(M,j),ve)):(Re(),_.markEnd(_.createExpressionStatement(M),ve))}function Li(){var y,M=[],j,te,ve,Te,mt,Bt,Gt,or;for(or=D,ie("{");d<v&&!(D.type!==r.StringLiteral||(j=D,y=Mn(),M.push(y),y.expression.type!==a.Literal));)te=c.slice(j.start+1,j.end-1),te==="use strict"?(h=!0,ve&&ee(ve,o.StrictOctalLiteral)):!ve&&j.octal&&(ve=j);for(Te=F.labelSet,mt=F.inIteration,Bt=F.inSwitch,Gt=F.inFunctionBody,F.labelSet={},F.inIteration=!1,F.inSwitch=!1,F.inFunctionBody=!0;d<v&&!(ue("}")||(y=Mn(),typeof y>"u"));)M.push(y);return ie("}"),F.labelSet=Te,F.inIteration=mt,F.inSwitch=Bt,F.inFunctionBody=Gt,_.markEnd(_.createBlockStatement(M),or)}function ei(y){var M,j=[],te,ve,Te,mt,Bt;if(ie("("),!ue(")"))for(Te={};d<v&&(te=D,M=mn(),mt="$"+te.value,h?(R(te.value)&&(ve=te,Bt=o.StrictParamName),Object.prototype.hasOwnProperty.call(Te,mt)&&(ve=te,Bt=o.StrictParamDupe)):y||(R(te.value)?(y=te,Bt=o.StrictParamName):U(te.value)?(y=te,Bt=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(Te,mt)&&(y=te,Bt=o.StrictParamDupe)),j.push(M),Te[mt]=!0,!ue(")"));)ie(",");return ie(")"),{params:j,stricted:ve,firstRestricted:y,message:Bt}}function zn(){var y,M=[],j,te,ve,Te,mt,Bt,Gt,or;return or=D,de("function"),te=D,y=mn(),h?R(te.value)&&ee(te,o.StrictFunctionName):R(te.value)?(mt=te,Bt=o.StrictFunctionName):U(te.value)&&(mt=te,Bt=o.StrictReservedWord),Te=ei(mt),M=Te.params,ve=Te.stricted,mt=Te.firstRestricted,Te.message&&(Bt=Te.message),Gt=h,j=Li(),h&&mt&&G(mt,Bt),h&&ve&&ee(ve,Bt),h=Gt,_.markEnd(_.createFunctionDeclaration(y,M,[],j),or)}function Ui(){var y,M=null,j,te,ve,Te,mt=[],Bt,Gt,or;return or=D,de("function"),ue("(")||(y=D,M=mn(),h?R(y.value)&&ee(y,o.StrictFunctionName):R(y.value)?(te=y,ve=o.StrictFunctionName):U(y.value)&&(te=y,ve=o.StrictReservedWord)),Te=ei(te),mt=Te.params,j=Te.stricted,te=Te.firstRestricted,Te.message&&(ve=Te.message),Gt=h,Bt=Li(),h&&te&&G(te,ve),h&&j&&ee(j,ve),h=Gt,_.markEnd(_.createFunctionExpression(M,mt,[],Bt),or)}function Mn(){if(D.type===r.Keyword)switch(D.value){case"const":case"let":return Pa(D.value);case"function":return zn();default:return Gr()}if(D.type!==r.EOF)return Gr()}function _n(){for(var y,M=[],j,te,ve;d<v&&(j=D,!(j.type!==r.StringLiteral||(y=Mn(),M.push(y),y.expression.type!==a.Literal)));)te=c.slice(j.start+1,j.end-1),te==="use strict"?(h=!0,ve&&ee(ve,o.StrictOctalLiteral)):!ve&&j.octal&&(ve=j);for(;d<v&&(y=Mn(),!(typeof y>"u"));)M.push(y);return M}function go(){var y,M;return se(),Mt(),M=D,h=!1,y=_n(),_.markEnd(_.createProgram(y),M)}function qa(){var y,M,j,te=[];for(y=0;y<E.tokens.length;++y)M=E.tokens[y],j={type:M.type,value:M.value},E.range&&(j.range=M.range),E.loc&&(j.loc=M.loc),te.push(j);E.tokens=te}function ta(y,M){var j,te,ve;j=String,typeof y!="string"&&!(y instanceof String)&&(y=j(y)),_=p,c=y,d=0,g=c.length>0?1:0,b=0,v=c.length,D=null,F={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},E={},M=M||{},M.tokens=!0,E.tokens=[],E.tokenize=!0,E.openParenToken=-1,E.openCurlyToken=-1,E.range=typeof M.range=="boolean"&&M.range,E.loc=typeof M.loc=="boolean"&&M.loc,typeof M.comment=="boolean"&&M.comment&&(E.comments=[]),typeof M.tolerant=="boolean"&&M.tolerant&&(E.errors=[]);try{if(Mt(),D.type===r.EOF)return E.tokens;for(te=Ne();D.type!==r.EOF;)try{te=Ne()}catch(Te){if(te=D,E.errors){E.errors.push(Te);break}else throw Te}qa(),ve=E.tokens,typeof E.comments<"u"&&(ve.comments=E.comments),typeof E.errors<"u"&&(ve.errors=E.errors)}catch(Te){throw Te}finally{E={}}return ve}function Du(y,M){var j,te;te=String,typeof y!="string"&&!(y instanceof String)&&(y=te(y)),_=p,c=y,d=0,g=c.length>0?1:0,b=0,v=c.length,D=null,F={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},E={},typeof M<"u"&&(E.range=typeof M.range=="boolean"&&M.range,E.loc=typeof M.loc=="boolean"&&M.loc,E.attachComment=typeof M.attachComment=="boolean"&&M.attachComment,E.loc&&M.source!==null&&M.source!==void 0&&(E.source=te(M.source)),typeof M.tokens=="boolean"&&M.tokens&&(E.tokens=[]),typeof M.comment=="boolean"&&M.comment&&(E.comments=[]),typeof M.tolerant=="boolean"&&M.tolerant&&(E.errors=[]),E.attachComment&&(E.range=!0,E.comments=[],E.bottomRightStack=[],E.trailingComments=[],E.leadingComments=[]));try{j=go(),typeof E.comments<"u"&&(j.comments=E.comments),typeof E.tokens<"u"&&(qa(),j.tokens=E.tokens),typeof E.errors<"u"&&(j.errors=E.errors)}catch(ve){throw ve}finally{E={}}return j}e.version="1.2.5",e.tokenize=ta,e.parse=Du,e.Syntax=function(){var y,M={};typeof Object.create=="function"&&(M=Object.create(null));for(y in a)a.hasOwnProperty(y)&&(M[y]=a[y]);return typeof Object.freeze=="function"&&Object.freeze(M),M}()})})(S1);var PF=S1,J0=E1,TF=0;function kF(t,e,r){this.name=t,this.lvalue=e,this.rvalue=r,this.count=0}function IF(t,e,r,n){this.body=t,this.args=e,this.thisVars=r,this.localVars=n}function NF(t){if(t==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?t in window:typeof dr<"u"?t in dr:typeof self<"u"?t in self:!1}function xF(t){for(var e=t.body[0].expression.callee.params,r=new Array(e.length),n=0;n<e.length;++n)r[n]=e[n].name;return r}function RF(t){for(var e=["(",t,")()"].join(""),r=PF.parse(e,{range:!0}),n="_inline_"+TF+++"_",i=xF(r),a=new Array(i.length),s=0;s<i.length;++s)a[s]=new kF([n,"arg",s,"_"].join(""),!1,!1);for(var o=new Array(e.length),s=0,f=e.length;s<f;++s)o[s]=e.charAt(s);var p=[],c=[];function h(C){var A=n+C.replace(/\_/g,"__");return p.push(A),A}function d(C){var A="this_"+C.replace(/\_/g,"__");return c.push(A),A}function g(C,A){for(var S=C.range[0],P=C.range[1],B=S+1;B<P;++B)o[B]="";o[S]=A}function b(C){return"'"+C.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function v(C){return o.slice(C.range[0],C.range[1]).join("")}var _=1,D=2;function F(C){return C.parent.type==="AssignmentExpression"&&C.parent.left===C?C.parent.operator==="="?_:_|D:C.parent.type==="UpdateExpression"?_|D:D}(function C(A,S){if(A.parent=S,A.type==="MemberExpression")A.computed?(C(A.object,A),C(A.property,A)):A.object.type==="ThisExpression"?g(A,d(A.property.name)):C(A.object,A);else{if(A.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(A.type==="Identifier"){var P=A.name,B=i.indexOf(P);if(B>=0){var N=a[B],q=F(A);q&_&&(N.lvalue=!0),q&D&&(N.rvalue=!0),++N.count,g(A,N.name)}else NF(P)||g(A,h(P))}else if(A.type==="Literal")typeof A.value=="string"&&g(A,b(A.value));else{if(A.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var X=Object.keys(A),K=0,U=X.length;K<U;++K)if(X[K]!=="parent"){var R=A[X[K]];if(R)if(R instanceof Array)for(var z=0;z<R.length;++z)R[z]&&typeof R[z].type=="string"&&C(R[z],A);else typeof R.type=="string"&&C(R,A)}}}})(r.body[0].expression.callee.body,void 0),J0(p),J0(c);var E=new IF(v(r.body[0].expression.callee.body),a,c,p);return E}var LF=RF,Pl=LF,UF=Vf,ls=["args","body"],VF=["pre","post","printCode","funcName","blockSize"];function jF(t){for(var e in t)ls.indexOf(e)<0&&VF.indexOf(e)<0&&console.warn("cwise: Unknown argument '"+e+"' passed to expression compiler");for(var r=0;r<ls.length;++r)if(!t[ls[r]])throw new Error("cwise: Missing argument: "+ls[r]);return UF({args:t.args,pre:Pl(t.pre||function(){}),body:Pl(t.body),post:Pl(t.post||function(){}),debug:!!t.printCode,funcName:t.funcName||t.body.name||"cwise",blockSize:t.blockSize||64})}var oo=jF,qF=MF,zF=oo,WF=zF({args:["array","scalar","index"],body:function(e,r,n){var i=r,a;for(a=0;a<n.length-1;++a)i=i[n[a]];i[n[n.length-1]]=e}}),HF=function(e){var r=qF(e.shape);return WF(e,r),r},Ps={},$F={get exports(){return Ps},set exports(t){Ps=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(s,o){for(var f=new Float64Array(s*o),p=0;p<f.length;p++)f[p]=a()*1e-4;return(0,n.default)(f,[s,o])};var r=Sa,n=i(r);function i(s){return s&&s.__esModule?s:{default:s}}function a(){var s=2*Math.random()-1,o=2*Math.random()-1,f=s*s+o*o;return f==0||f>1?a():s*Math.sqrt(-2*Math.log(f)/f)}t.exports=e.default})($F,Ps);var hu={},GF={get exports(){return hu},set exports(t){hu=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(h,d){var g=h.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]);switch(d){case"euclidean":for(var v=0;v<g;v++)for(var _=v+1;_<g;_++){var D=o(h.pick(v,null),h.pick(_,null));b.set(v,_,D),b.set(_,v,D)}break;case"manhattan":for(var v=0;v<g;v++)for(var _=v+1;_<g;_++){var D=f(h.pick(v,null),h.pick(_,null));b.set(v,_,D),b.set(_,v,D)}break;case"jaccard":for(var v=0;v<g;v++)for(var _=v+1;_<g;_++){var D=p(h.pick(v,null),h.pick(_,null));b.set(v,_,D),b.set(_,v,D)}break;case"dice":for(var v=0;v<g;v++)for(var _=v+1;_<g;_++){var D=c(h.pick(v,null),h.pick(_,null));b.set(v,_,D),b.set(_,v,D)}break}return b};var r=Sa,n=s(r),i=oo,a=s(i);function s(h){return h&&h.__esModule?h:{default:h}}var o=(0,a.default)({args:["array","array"],pre:function(d,g){this.sum=0},body:function(d,g){var b=d-g;this.sum+=b*b},post:function(d,g){return Math.sqrt(this.sum)}}),f=(0,a.default)({args:["array","array"],pre:function(d,g){this.sum=0},body:function(d,g){this.sum+=Math.abs(d-g)},post:function(d,g){return this.sum}}),p=(0,a.default)({args:["array","array"],pre:function(d,g){this.tf=0,this.tt=0},body:function(d,g){var b=Math.round(d),v=Math.round(g);this.tf+=+(b!=v),this.tt+=+(b==1&&v==1)},post:function(d,g){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),c=(0,a.default)({args:["array","array"],pre:function(d,g){this.tf=0,this.tt=0},body:function(d,g){var b=Math.round(d),v=Math.round(g);this.tf+=+(b!=v),this.tt+=+(b==1&&v==1)},post:function(d,g){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});t.exports=e.default})(GF,hu);var Ts={},KF={get exports(){return Ts},set exports(t){Ts=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(c,h){for(var d=100,g=c.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]),v=(0,n.default)(new Float64Array(g*g),[g,g]),_=void 0,D=void 0,F=1/0,E=Math.log(h),C=void 0,A=void 0,S=void 0,P=void 0,B=0;B<g;B++){_=1,D=-1/0,F=1/0;for(var N=0;N<d;N++){for(var q=0;q<g;q++)b.set(B,q,Math.exp(-c.get(B,q)*_));b.set(B,B,0),S=0;for(var q=0;q<g;q++)S+=b.get(B,q);S==0&&(S=o),P=0;for(var q=0;q<g;q++)b.set(B,q,b.get(B,q)/S),P+=c.get(B,q)*b.get(B,q);if(A=Math.log(S)+_*P,C=A-E,Math.abs(C)<=p)break;C>0?(D=_,F==1/0?_=_*2:_=(_+F)/2):(F=_,D==-1/0?_=_/2:_=(_+D)/2)}}a.default.add(v,b,b.transpose(1,0));var X=Math.max(a.default.sum(v),f);return a.default.divseq(v,X),a.default.maxseq(v,f),v};var r=Sa,n=s(r),i=so,a=s(i);function s(c){return c&&c.__esModule?c:{default:c}}var o=1e-7,f=Number.EPSILON||2220446049250313e-31,p=1e-5;t.exports=e.default})(KF,Ts);var ks={},YF={get exports(){return ks},set exports(t){ks=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(g,b,v){var _=g.shape[0],D=g.shape[1],F=(0,n.default)(new Float64Array(_*_),[_,_]),E=(0,p.default)(g,"euclidean");d(E);var C=(v+1)/-2;a.default.powseq(a.default.divseq(a.default.addseq(E,1),v),C);for(var A=0;A<_;A++)E.set(A,A,0);var S=Math.max(a.default.sum(E),h);a.default.divs(F,E,S),a.default.maxseq(F,h);var P=(0,n.default)(new Float64Array(_*_),[_,_]),B=(0,n.default)(new Float64Array(_*_),[_,_]);a.default.div(P,b,F),a.default.logeq(P),a.default.assign(B,b);var N=a.default.sum(a.default.muleq(P,B)),q=(0,n.default)(new Float64Array(g.size),g.shape),X=(0,n.default)(new Float64Array(_*_),[_,_]);a.default.sub(X,b,F),a.default.muleq(X,E);for(var A=0;A<_;A++)for(var K=0;K<D;K++){var U=(0,n.default)(new Float64Array(g.shape[0]),[g.shape[0]]);a.default.assign(U,g.pick(null,K)),a.default.addseq(a.default.negeq(U),g.get(A,K)),a.default.muleq(U,X.pick(A,null)),q.set(A,K,a.default.sum(U))}var R=2*(v+1)/v;return a.default.mulseq(q,R),[N,q]};var r=Sa,n=c(r),i=so,a=c(i),s=oo,o=c(s),f=hu,p=c(f);function c(g){return g&&g.__esModule?g:{default:g}}var h=Number.EPSILON||2220446049250313e-31,d=(0,o.default)({args:["array"],body:function(b){}});t.exports=e.default})(YF,ks);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function U(R,z){var V=[],Q=!0,ae=!1,se=void 0;try{for(var he=R[Symbol.iterator](),Ce;!(Q=(Ce=he.next()).done)&&(V.push(Ce.value),!(z&&V.length===z));Q=!0);}catch(Be){ae=!0,se=Be}finally{try{!Q&&he.return&&he.return()}finally{if(ae)throw se}}return V}return function(R,z){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return U(R,z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function U(R,z){for(var V=0;V<z.length;V++){var Q=z[V];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(R,Q.key,Q)}}return function(R,z,V){return z&&U(R.prototype,z),V&&U(R,V),R}}(),i=Os,a=Sa,s=P(a),o=so,f=P(o),p=SF,c=P(p),h=HF,d=P(h),g=oo,b=P(g),v=Ps,_=P(v),D=hu,F=P(D),E=Ts,C=P(E),A=ks,S=P(A);function P(U){return U&&U.__esModule?U:{default:U}}function B(U){if(Array.isArray(U)){for(var R=0,z=Array(U.length);R<U.length;R++)z[R]=U[R];return z}else return Array.from(U)}function N(U,R){if(!(U instanceof R))throw new TypeError("Cannot call a class as a function")}function q(U,R){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:U}function X(U,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);U.prototype=Object.create(R&&R.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(U,R):U.__proto__=R)}var K=function(U){X(R,U);function R(z){N(this,R);var V=q(this,Object.getPrototypeOf(R).call(this));return z=z||{},V.dim=z.dim||2,V.perplexity=z.perplexity||30,V.earlyExaggeration=z.earlyExaggeration||4,V.learningRate=z.learningRate||1e3,V.nIter=z.nIter||1e3,V.metric=z.metric||"euclidean",V.barneshut=z.barneshut||!1,V.inputData=null,V.outputEmbedding=null,V}return n(R,[{key:"init",value:function(V){V=V||{};var Q=V.data||[],ae=V.type||"dense";if(ae==="dense")this.inputData=(0,c.default)(Q);else if(ae==="sparse"){for(var se=[],he=1,Ce=function(St){var nt=Math.max.apply(null,Q.map(function(ht){return ht[St]}))+1;se.push(nt),he*=nt},Be=0;Be<Q[0].length;Be++)Ce(Be);this.inputData=(0,s.default)(new Float64Array(he),se);var Fe=!0,je=!1,Ue=void 0;try{for(var Ve=Q[Symbol.iterator](),ot;!(Fe=(ot=Ve.next()).done);Fe=!0){var Dt,rt=ot.value;(Dt=this.inputData).set.apply(Dt,B(rt).concat([1]))}}catch(it){je=!0,Ue=it}finally{try{!Fe&&Ve.return&&Ve.return()}finally{if(je)throw Ue}}}else throw new Error("input data type must be dense or sparse");this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,F.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,C.default)(this.distances,this.perplexity);var V=Number.MAX_VALUE,Q=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),f.default.mulseq(this.P,this.earlyExaggeration);var ae=this._gradDesc(Q,50,.5,0,0),se=r(ae,2);V=se[0],Q=se[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var he=this._gradDesc(Q+1,100,.8,0,0),Ce=r(he,2);V=Ce[0],Q=Ce[1],this.emit("progressStatus","Final optimization with momentum 0.8"),f.default.divseq(this.P,this.earlyExaggeration);var Be=this._gradDesc(Q+1,this.nIter,.8,1e-6,1e-6),Fe=r(Be,2);return V=Fe[0],Q=Fe[1],this.emit("progressStatus","Optimization end"),[V,Q]}},{key:"rerun",value:function(){this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim);var V=this.run(),Q=r(V,2),ae=Q[0],se=Q[1];return[ae,se]}},{key:"getOutput",value:function(){return(0,d.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var V=(0,s.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),Q=(0,s.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),ae=0;ae<this.outputEmbedding.shape[1];ae++){var se=f.default.sup(f.default.abs(Q,this.outputEmbedding.pick(null,ae)));f.default.divs(V.pick(null,ae),this.outputEmbedding.pick(null,ae),se)}return(0,d.default)(V)}},{key:"_gradDesc",value:function(V,Q,ae){for(var se=arguments.length<=3||arguments[3]===void 0?1e-6:arguments[3],he=arguments.length<=4||arguments[4]===void 0?1e-6:arguments[4],Ce=30,Be=(0,s.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),Fe=new Float64Array(this.outputEmbedding.size),je=0;je<Fe.length;je++)Fe[je]=1;var Ue=(0,s.default)(Fe,this.outputEmbedding.shape),Ve=Number.MAX_VALUE,ot=Number.MAX_VALUE,Dt=0,rt=(0,b.default)({args:["array"],pre:function(Mt){this.sum=0},body:function(Mt){this.sum+=Mt*Mt},post:function(Mt){return Math.sqrt(this.sum)}}),it=(0,b.default)({args:["array","array","array"],body:function(Mt,Vt,Ht){}}),St=void 0;for(St=V;St<Q;St++){var nt=(0,S.default)(this.outputEmbedding,this.P,this.alpha),ht=r(nt,2),lt=ht[0],ft=ht[1],Ke=Math.abs(lt-Ve);Ve=lt;var Ye=rt(ft);if(this.emit("progressIter",[St,Ve,Ye]),Ve<ot)ot=Ve,Dt=St;else if(St-Dt>Ce)break;if(se>=Ye||he>=Ke)break;it(Ue,Be,ft),f.default.muleq(ft,Ue);var Ee=(0,s.default)(new Float64Array(ft.size),ft.shape);f.default.muls(Ee,ft,this.learningRate),f.default.mulseq(Be,ae),f.default.subeq(Be,Ee),f.default.addeq(this.outputEmbedding,Be),this.emit("progressData",this.getOutputScaled())}return[Ve,St]}}]),R}(i.EventEmitter);e.default=K,t.exports=e.default})(WC,Bs);const ZF=xf(Bs);var _f={},JF={get exports(){return _f},set exports(t){_f=t}},Is={},QF={get exports(){return Is},set exports(t){Is=t}},Q0;function XF(){return Q0||(Q0=1,function(t){function e(r,n,i,a){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,i,a)}e.prototype.run=function(r,n,i,a){this._init(r,n,i,a);for(var s=0;s<this._datasetLength;s++)if(this._visited[s]!==1){this._visited[s]=1;var o=this._regionQuery(s);if(o.length<this.minPts)this.noise.push(s);else{var f=this.clusters.length;this.clusters.push([]),this._addToCluster(s,f),this._expandCluster(f,o)}}return this.clusters},e.prototype._init=function(r,n,i,a){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),i&&(this.minPts=i),a&&(this.distance=a)},e.prototype._expandCluster=function(r,n){for(var i=0;i<n.length;i++){var a=n[i];if(this._visited[a]!==1){this._visited[a]=1;var s=this._regionQuery(a);s.length>=this.minPts&&(n=this._mergeArrays(n,s))}this._assigned[a]!==1&&this._addToCluster(a,r)}},e.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1},e.prototype._regionQuery=function(r){for(var n=[],i=0;i<this._datasetLength;i++){var a=this.distance(this.dataset[r],this.dataset[i]);a<this.epsilon&&n.push(i)}return n},e.prototype._mergeArrays=function(r,n){for(var i=n.length,a=0;a<i;a++){var s=n[a];r.indexOf(s)<0&&r.push(s)}return r},e.prototype._euclideanDistance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;)i+=(r[a]-n[a])*(r[a]-n[a]);return Math.sqrt(i)},t.exports&&(t.exports=e)}(QF)),Is}var Ns={},eS={get exports(){return Ns},set exports(t){Ns=t}},X0;function tS(){return X0||(X0=1,function(t){function e(r,n,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,i)}e.prototype.init=function(r,n,i){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof i<"u"&&(this.distance=i)},e.prototype.run=function(r,n){this.init(r,n);for(var i=this.dataset.length,a=0;a<this.k;a++)this.centroids[a]=this.randomCentroid();for(var s=!0;s;){s=this.assign();for(var o=0;o<this.k;o++){for(var f=new Array(d),p=0,c=0;c<d;c++)f[c]=0;for(var h=0;h<i;h++){var d=this.dataset[h].length;if(o===this.assignments[h]){for(var c=0;c<d;c++)f[c]+=this.dataset[h][c];p++}}if(p>0){for(var c=0;c<d;c++)f[c]/=p;this.centroids[o]=f}else this.centroids[o]=this.randomCentroid(),s=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,i;do i=Math.round(Math.random()*r),n=this.dataset[i];while(this.centroids.indexOf(n)>=0);return n},e.prototype.assign=function(){for(var r=!1,n=this.dataset.length,i,a=0;a<n;a++)i=this.argmin(this.dataset[a],this.centroids,this.distance),i!=this.assignments[a]&&(this.assignments[a]=i,r=!0);return r},e.prototype.getClusters=function(){for(var r=new Array(this.k),n,i=0;i<this.assignments.length;i++)n=this.assignments[i],typeof r[n]>"u"&&(r[n]=[]),r[n].push(i);return r},e.prototype.argmin=function(r,n,i){for(var a=Number.MAX_VALUE,s=0,o=n.length,f,p=0;p<o;p++)f=i(r,n[p]),f<a&&(a=f,s=p);return s},e.prototype.distance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;){var s=r[a]-n[a];i+=s*s}return Math.sqrt(i)},t.exports&&(t.exports=e)}(eS)),Ns}var xs={},rS={get exports(){return xs},set exports(t){xs=t}},Rs={},nS={get exports(){return Rs},set exports(t){Rs=t}},ed;function B1(){return ed||(ed=1,function(t){function e(r,n,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,i)}e.prototype.insert=function(r,n){for(var i=this._queue.length,a=i;a--;){var s=this._priorities[a];this._sorting==="desc"?n>s&&(i=a):n<s&&(i=a)}this._insertAt(r,n,i)},e.prototype.remove=function(r){for(var n=this._queue.length;n--;){var i=this._queue[n];if(r===i){this._queue.splice(n,1),this._priorities.splice(n,1);break}}},e.prototype.forEach=function(r){this._queue.forEach(r)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(r){return this._priorities[r]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,i=this._queue.length;n<i;n++)r.push([this._queue[n],this._priorities[n]]);return r},e.prototype._init=function(r,n,i){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var a=0;a<r.length;a++)this.insert(r[a],n[a])}i&&(this._sorting=i)},e.prototype._insertAt=function(r,n,i){this._queue.length===i?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(i,0,r),this._priorities.splice(i,0,n))},t.exports&&(t.exports=e)}(nS)),Rs}var td;function iS(){return td||(td=1,function(t){if(t.exports)var e=B1();function r(n,i,a,s){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,i,a,s)}r.prototype.run=function(n,i,a,s){this._init(n,i,a,s);for(var o=0,f=this.dataset.length;o<f;o++)if(this._processed[o]!==1){this._processed[o]=1,this.clusters.push([o]);var p=this.clusters.length-1;this._orderedList.push(o);var c=new e(null,null,"asc"),h=this._regionQuery(o);this._distanceToCore(o)!==void 0&&(this._updateQueue(o,h,c),this._expandCluster(p,c))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var n=[],i=0,a=this._orderedList.length;i<a;i++){var s=this._orderedList[i],o=this._reachability[s];n.push([s,o])}return n},r.prototype._init=function(n,i,a,s){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}i&&(this.epsilon=i),a&&(this.minPts=a),s&&(this.distance=s)},r.prototype._updateQueue=function(n,i,a){var s=this;this._coreDistance=this._distanceToCore(n),i.forEach(function(o){if(s._processed[o]===void 0){var f=s.distance(s.dataset[n],s.dataset[o]),p=Math.max(s._coreDistance,f);s._reachability[o]===void 0?(s._reachability[o]=p,a.insert(o,p)):p<s._reachability[o]&&(s._reachability[o]=p,a.remove(o),a.insert(o,p))}})},r.prototype._expandCluster=function(n,i){for(var a=i.getElements(),s=0,o=a.length;s<o;s++){var f=a[s];if(this._processed[f]===void 0){var p=this._regionQuery(f);this._processed[f]=1,this.clusters[n].push(f),this._orderedList.push(f),this._distanceToCore(f)!==void 0&&(this._updateQueue(f,p,i),this._expandCluster(n,i))}}},r.prototype._distanceToCore=function(n){for(var i=this.epsilon,a=0;a<i;a++){var s=this._regionQuery(n,a);if(s.length>=this.minPts)return a}},r.prototype._regionQuery=function(n,i){i=i||this.epsilon;for(var a=[],s=0,o=this.dataset.length;s<o;s++)this.distance(this.dataset[n],this.dataset[s])<i&&a.push(s);return a},r.prototype._euclideanDistance=function(n,i){for(var a=0,s=Math.min(n.length,i.length);s--;)a+=(n[s]-i[s])*(n[s]-i[s]);return Math.sqrt(a)},t.exports&&(t.exports=r)}(rS)),xs}(function(t){t.exports&&(t.exports={DBSCAN:XF(),KMEANS:tS(),OPTICS:iS(),PriorityQueue:B1()})})(JF);const{window:aS}=Yy;function rd(t,e,r){const n=t.slice();return n[26]=e[r][0],n[27]=e[r][1],n}function nd(t){let e=[],r=new Map,n,i,a,s=Object.entries(t[1]);const o=f=>f[26];for(let f=0;f<s.length;f+=1){let p=rd(t,s,f),c=o(p);r.set(c,e[f]=ad(c,p))}return i=new Fa({props:{xy:t[17](t[0],t[6],t[10],t[9],!0),radius:t[3],color:"rgba(136,157,191, 1)",handleMouseDown:t[22]}}),{c(){for(let f=0;f<e.length;f+=1)e[f].c();n=Tt(),ze(i.$$.fragment)},l(f){for(let p=0;p<e.length;p+=1)e[p].l(f);n=Tt(),We(i.$$.fragment,f)},m(f,p){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(f,p);fe(f,n,p),He(i,f,p),a=!0},p(f,p){p&132983&&(s=Object.entries(f[1]),pr(),e=Un(e,p,o,1,f,s,r,n.parentNode,Fp,ad,n,rd),vr());const c={};p&1601&&(c.xy=f[17](f[0],f[6],f[10],f[9],!0)),p&8&&(c.radius=f[3]),p&128&&(c.handleMouseDown=f[22]),i.$set(c)},i(f){if(!a){for(let p=0;p<s.length;p+=1)_e(e[p]);_e(i.$$.fragment,f),a=!0}},o(f){for(let p=0;p<e.length;p+=1)we(e[p]);we(i.$$.fragment,f),a=!1},d(f){for(let p=0;p<e.length;p+=1)e[p].d(f);f&&k(n),$e(i,f)}}}function id(t){let e,r;return e=new p1({props:{p1:t[17](t[27].xy,t[6],t[10],t[9],!0),p2:t[17](t[0],t[6],t[10],t[9],!0)}}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},p(n,i){const a={};i&1602&&(a.p1=n[17](n[27].xy,n[6],n[10],n[9],!0)),i&1601&&(a.p2=n[17](n[0],n[6],n[10],n[9],!0)),e.$set(a)},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function ad(t,e){let r,n,i,a,s,o=e[27].connected&&id(e);return i=new Fa({props:{xy:e[17](e[27].xy,e[6],e[10],e[9],!0),radius:e[2],color:"rgba(136,157,191, 1)"}}),a=new mu({props:{xy:[(e[27].xy[0]*e[8][0]+e[6][0])*e[9]+e[10][0]-Vr(e[4],e[27].text.length,e[5])[0]/2,(e[27].xy[1]*e[8][1]+e[6][1])*e[9]+e[10][1]+e[2]],color:`rgba(255,255,255,${e[27].opacity}`,wh:Vr(e[4],e[27].text.length,e[5]),fontSize:e[5],text:e[27].text}}),{key:t,first:null,c(){r=Tt(),o&&o.c(),n=Tt(),ze(i.$$.fragment),ze(a.$$.fragment),this.h()},l(f){r=Tt(),o&&o.l(f),n=Tt(),We(i.$$.fragment,f),We(a.$$.fragment,f),this.h()},h(){this.first=r},m(f,p){fe(f,r,p),o&&o.m(f,p),fe(f,n,p),He(i,f,p),He(a,f,p),s=!0},p(f,p){e=f,e[27].connected?o?(o.p(e,p),p&2&&_e(o,1)):(o=id(e),o.c(),_e(o,1),o.m(n.parentNode,n)):o&&(pr(),we(o,1,1,()=>{o=null}),vr());const c={};p&1602&&(c.xy=e[17](e[27].xy,e[6],e[10],e[9],!0)),p&4&&(c.radius=e[2]),i.$set(c);const h={};p&1910&&(h.xy=[(e[27].xy[0]*e[8][0]+e[6][0])*e[9]+e[10][0]-Vr(e[4],e[27].text.length,e[5])[0]/2,(e[27].xy[1]*e[8][1]+e[6][1])*e[9]+e[10][1]+e[2]]),p&2&&(h.color=`rgba(255,255,255,${e[27].opacity}`),p&50&&(h.wh=Vr(e[4],e[27].text.length,e[5])),p&32&&(h.fontSize=e[5]),p&2&&(h.text=e[27].text),a.$set(h)},i(f){s||(_e(o),_e(i.$$.fragment,f),_e(a.$$.fragment,f),s=!0)},o(f){we(o),we(i.$$.fragment,f),we(a.$$.fragment,f),s=!1},d(f){f&&k(r),o&&o.d(f),f&&k(n),$e(i,f),$e(a,f)}}}function uS(t){let e,r,n=Object.entries(t[1]).length>0,i,a,s,o=n&&nd(t);return{c(){e=Y("div"),r=vt("svg"),o&&o.c(),this.h()},l(f){e=Z(f,"DIV",{class:!0});var p=H(e);r=gt(p,"svg",{id:!0,class:!0});var c=H(r);o&&o.l(c),c.forEach(k),p.forEach(k),this.h()},h(){O(r,"id","svg"),O(r,"class","w-full h-full outline-none"),O(e,"class","w-full h-full")},m(f,p){fe(f,e,p),L(e,r),o&&o.m(r,null),i=!0,a||(s=[be(aS,"keydown",t[16]),be(r,"mousewheel",t[15]),be(r,"mousemove",t[13]),be(r,"touchmove",t[13]),be(r,"mouseup",t[14]),be(r,"touchend",t[14]),be(r,"dblclick",t[12]),be(r,"focusin",t[23]),be(r,"focusout",t[24])],a=!0)},p(f,[p]){p&2&&(n=Object.entries(f[1]).length>0),n?o?(o.p(f,p),p&2&&_e(o,1)):(o=nd(f),o.c(),_e(o,1),o.m(r,null)):o&&(pr(),we(o,1,1,()=>{o=null}),vr())},i(f){i||(_e(o),i=!0)},o(f){we(o),i=!1},d(f){f&&k(e),o&&o.d(),a=!1,rr(s)}}}function sS(t){var e=!1;return t.deltaY?t.deltaY===t.deltaY*-3&&(e=!0):t.deltaMode===0&&(e=!0),e}function oS(t,e,r){let{onMarkerMove:n=U=>{}}=e,{dataPoints:i={}}=e,{center:a=[100,100]}=e,{dimensions:s=[100,100]}=e,{pointRadius:o=4}=e,{markerRadius:f=10}=e,{textWidth:p=150}=e,{fontSize:c=12}=e,{innerPad:h=100}=e,{markerLocation:d=[.5,.5]}=e,g=!1,b=s,v=[0,0],_=1,D=[0,0],F=!0;function E(U){const R=Kn(U);r(0,d=B(Hr(ss(R,D),1/_))),n(d)}function C(U){if(g){const R=Kn(U);r(0,d=B(Hr(ss(R,D),1/_))),n(d)}}function A(U){r(7,g=!1)}function S(U){U.preventDefault();const R=sS(U),z=Kn(U),V=Hr(ss(z,D),1/_);r(9,_=Math.min(Math.max(_+(R?-1:1)*U.deltaY*-.01,.5),20)),r(10,D=[z[0]-V[0]*_,z[1]-V[1]*_])}function P(U){F&&(U=U||window.event,U.key==="ArrowUp"||U.key==="w"?r(10,D[1]+=10,D):U.key=="ArrowDown"||U.key=="s"?r(10,D[1]-=10,D):U.key=="ArrowLeft"||U.key=="a"?r(10,D[0]+=10,D):(U.key=="ArrowRight"||U.key=="d")&&r(10,D[0]-=10,D))}function B(U){let R=ss(U,v);return[R[0]/b[0],R[1]/b[1]]}function N(U,R,z,V,Q=!1){let ae=U;return Q&&(ae=xr(R,[U[0]*b[0],U[1]*b[1]])),xr(Hr(ae,V),z)}const q=()=>r(7,g=!0),X=()=>r(11,F=!0),K=()=>r(11,F=!1);return t.$$set=U=>{"onMarkerMove"in U&&r(18,n=U.onMarkerMove),"dataPoints"in U&&r(1,i=U.dataPoints),"center"in U&&r(19,a=U.center),"dimensions"in U&&r(20,s=U.dimensions),"pointRadius"in U&&r(2,o=U.pointRadius),"markerRadius"in U&&r(3,f=U.markerRadius),"textWidth"in U&&r(4,p=U.textWidth),"fontSize"in U&&r(5,c=U.fontSize),"innerPad"in U&&r(21,h=U.innerPad),"markerLocation"in U&&r(0,d=U.markerLocation)},t.$$.update=()=>{if(t.$$.dirty&3145792){const U=Math.min(...s),R=s[0]===U,z=s[1]===U;r(6,v=[Math.max(R?0:(s[0]-U)/2,h),Math.max(z?0:(s[1]-U)/2,h)]),r(8,b=[s[0]-2*v[0],s[1]-2*v[1]])}},[d,i,o,f,p,c,v,g,b,_,D,F,E,C,A,S,P,N,n,a,s,h,q,X,K]}class lS extends at{constructor(e){super(),ut(this,e,oS,uS,st,{onMarkerMove:18,dataPoints:1,center:19,dimensions:20,pointRadius:2,markerRadius:3,textWidth:4,fontSize:5,innerPad:21,markerLocation:0})}}var bf={},fS={get exports(){return bf},set exports(t){bf=t}};(function(t){var e=parseInt(Number.MAX_SAFE_INTEGER/2)||4503599627370496,r=0;function n(){this.C=null,this.row_covered=[],this.col_covered=[],this.n=0,this.Z0_r=0,this.Z0_c=0,this.marked=null,this.path=null}n.prototype.pad_matrix=function(o,f){f=f||r;var p=0,c=o.length,h;for(h=0;h<c;++h)o[h].length>p&&(p=o[h].length);c=p>c?p:c;var d=[];for(h=0;h<c;++h){for(var g=o[h]||[],b=g.slice();c>b.length;)b.push(f);d.push(b)}return d},n.prototype.compute=function(o,f){f=f||{},f.padValue=f.padValue||r,this.C=this.pad_matrix(o,f.padValue),this.n=this.C.length,this.original_length=o.length,this.original_width=o[0].length;for(var p=[];p.length<this.n;)p.push(!1);this.row_covered=p.slice(),this.col_covered=p.slice(),this.Z0_r=0,this.Z0_c=0,this.path=this.__make_matrix(this.n*2,0),this.marked=this.__make_matrix(this.n,0);for(var c=1,h={1:this.__step1,2:this.__step2,3:this.__step3,4:this.__step4,5:this.__step5,6:this.__step6};;){var d=h[c];if(!d)break;c=d.apply(this)}for(var g=[],b=0;b<this.original_length;++b)for(var v=0;v<this.original_width;++v)this.marked[b][v]==1&&g.push([b,v]);return g},n.prototype.__make_matrix=function(o,f){for(var p=[],c=0;c<o;++c){p[c]=[];for(var h=0;h<o;++h)p[c][h]=f}return p},n.prototype.__step1=function(){for(var o=0;o<this.n;++o)for(var f=Math.min.apply(Math,this.C[o]),p=0;p<this.n;++p)this.C[o][p]-=f;return 2},n.prototype.__step2=function(){for(var o=0;o<this.n;++o)for(var f=0;f<this.n;++f)if(this.C[o][f]===0&&!this.col_covered[f]&&!this.row_covered[o]){this.marked[o][f]=1,this.col_covered[f]=!0,this.row_covered[o]=!0;break}return this.__clear_covers(),3},n.prototype.__step3=function(){for(var o=0,f=0;f<this.n;++f)for(var p=0;p<this.n;++p)this.marked[f][p]==1&&this.col_covered[p]==!1&&(this.col_covered[p]=!0,++o);return o>=this.n?7:4},n.prototype.__step4=function(){for(var o=!1,f=-1,p=-1,c=-1;!o;){var h=this.__find_a_zero();if(f=h[0],p=h[1],f<0)return 6;if(this.marked[f][p]=2,c=this.__find_star_in_row(f),c>=0)p=c,this.row_covered[f]=!0,this.col_covered[p]=!1;else return this.Z0_r=f,this.Z0_c=p,5}},n.prototype.__step5=function(){var o=0;this.path[o][0]=this.Z0_r,this.path[o][1]=this.Z0_c;for(var f=!1;!f;){var p=this.__find_star_in_col(this.path[o][1]);if(p>=0?(o++,this.path[o][0]=p,this.path[o][1]=this.path[o-1][1]):f=!0,!f){var c=this.__find_prime_in_row(this.path[o][0]);o++,this.path[o][0]=this.path[o-1][0],this.path[o][1]=c}}return this.__convert_path(this.path,o),this.__clear_covers(),this.__erase_primes(),3},n.prototype.__step6=function(){for(var o=this.__find_smallest(),f=0;f<this.n;++f)for(var p=0;p<this.n;++p)this.row_covered[f]&&(this.C[f][p]+=o),this.col_covered[p]||(this.C[f][p]-=o);return 4},n.prototype.__find_smallest=function(){for(var o=e,f=0;f<this.n;++f)for(var p=0;p<this.n;++p)!this.row_covered[f]&&!this.col_covered[p]&&o>this.C[f][p]&&(o=this.C[f][p]);return o},n.prototype.__find_a_zero=function(){for(var o=0;o<this.n;++o)for(var f=0;f<this.n;++f)if(this.C[o][f]===0&&!this.row_covered[o]&&!this.col_covered[f])return[o,f];return[-1,-1]},n.prototype.__find_star_in_row=function(o){for(var f=0;f<this.n;++f)if(this.marked[o][f]==1)return f;return-1},n.prototype.__find_star_in_col=function(o){for(var f=0;f<this.n;++f)if(this.marked[f][o]==1)return f;return-1},n.prototype.__find_prime_in_row=function(o){for(var f=0;f<this.n;++f)if(this.marked[o][f]==2)return f;return-1},n.prototype.__convert_path=function(o,f){for(var p=0;p<=f;++p)this.marked[o[p][0]][o[p][1]]=this.marked[o[p][0]][o[p][1]]==1?0:1},n.prototype.__clear_covers=function(){for(var o=0;o<this.n;++o)this.row_covered[o]=!1,this.col_covered[o]=!1},n.prototype.__erase_primes=function(){for(var o=0;o<this.n;++o)for(var f=0;f<this.n;++f)this.marked[o][f]==2&&(this.marked[o][f]=0)};function i(o,f){var p,c;if(!f){var h=-1/0;for(p=0;p<o.length;++p)for(c=0;c<o[p].length;++c)o[p][c]>h&&(h=o[p][c]);f=function(b){return h-b}}var d=[];for(p=0;p<o.length;++p){var g=o[p];for(d[p]=[],c=0;c<g.length;++c)d[p][c]=f(o[p][c])}return d}function a(o){var f=[],p,c;for(p=0;p<o.length;++p)for(c=0;c<o[p].length;++c){var h=String(o[p][c]).length;(!f[c]||h>=f[c])&&(f[c]=h)}var d="";for(p=0;p<o.length;++p){for(c=0;c<o[p].length;++c){for(var g=String(o[p][c]);g.length<f[c];)g=" "+g;d+=g,c!=o[p].length-1&&(d+=" ")}p!=o[p].length-1&&(d+=`
`)}return d}function s(o,f){var p=new n;return p.compute(o,f)}s.version="1.2.2",s.format_matrix=a,s.make_cost_matrix=i,s.Munkres=n,t.exports&&(t.exports=s)})(fS);const cS=bf;function hS(t){let e,r;return e=new lS({props:{center:t[0],dimensions:t[1],onMarkerMove:t[3],dataPoints:t[2]}}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},p(n,[i]){const a={};i&1&&(a.center=n[0]),i&2&&(a.dimensions=n[1]),i&4&&(a.dataPoints=n[2]),e.$set(a)},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function dS(t,e,r){let n,i,a,s,o;tt(t,Br,A=>r(7,o=A));let{center:f=[100,100]}=e,{dimensions:p=[100,100]}=e,c={};function h(A){switch(A){case 2:return[Hr(xr([0,0],[0,1]),.5),Hr(xr([1,0],[1,1]),.5)];case 4:return[[0,0],[0,1],[1,1],[1,0]];case 6:return[Hr(xr([0,0],[0,1]),.5),Hr(xr([1,0],[1,1]),.5),[0,0],[0,1],[1,1],[1,0]];case 8:return[Hr(xr([0,0],[0,1]),.5),Hr(xr([1,0],[1,1]),.5),[0,0],[0,1],[1,1],[1,0],Hr(xr([0,0],[1,0]),.5),Hr(xr([0,1],[1,1]),.5)];default:return[]}}function d(A,S){return A.map(P=>S.map(B=>vs(P,B)))}function g(A,S){if(A.length!==S.length)throw new Error("Both sets should have the same number of points");const P=d(A,S),B=cS(P);return B?B.map(([N,q])=>({ids:[N,q],points:[A[N],S[q]]})):null}function b(A){const S=A.reduce((P,B)=>xr(P,B),[0,0]);return Hr(S,1/A.length)}function v(A){o.embeddings&&o.scaledEmbedMappings&&(E(),F(n,a,s,A))}function _(A,S){A&&S&&(E(),F(n,a,s,i))}function D(A,S){F(n,A,S,i)}function F(A,S,P,B){if(!c)return;let N={...o.weightedPrompts},q=0;Object.values(c).forEach(R=>{Object.values(c).forEach(z=>{const V=vs(R.xy,z.xy);V>q&&(q=V)})});const X=Object.entries(c).reduce((R,[z,V])=>{const Q=vs(A,V.xy);return R[parseInt(z)]=Q,R},{}),K=(R,z)=>{const V=R?Math.round(Math.pow(1-z/q,P)*100)/100:0;return V<0?0:V},U=(R,z)=>{const V=R?Math.round((1-z/q)*100)/100:0;return V<0?0:V};Object.entries(X).sort((R,z)=>R[1]-z[1]).forEach(([R,z],V)=>{if(!N[parseInt(R)])return;const Q=V<B,ae=S?K(Q,z):U(Q,z);N[parseInt(R)]={...N[parseInt(R)],embedWeight:ae},r(2,c[parseInt(R)].opacity=Lr(ae),c),r(2,c[parseInt(R)].connected=Q,c)}),Pt.update({...o,embedMarker:n,weightedPrompts:N})}function E(){if(!o.embeddings||!o.scaledEmbedMappings)return;const A=Object.keys(o.scaledEmbedMappings),S=B=>{if(!B.length)return f;const N=B.map(q=>P[q].xy);return b(N)},P=A.reduce((B,N,q)=>(B[N]={xy:o.scaledEmbedMappings[q],text:o.weightedPrompts[q].text,connected:!0,opacity:1},B),{});if(o.embedClusters&&o.embedClusterSets){const B=o.embedClusters,N=o.embedClusterSets[B];let q=N.map(U=>S(U));const X=h(B),K=g(q,X);K&&K.forEach(U=>{const R=U.ids[0],z=U.points[1];N[R].forEach(V=>{P[V].xy=b([P[V].xy,z])})})}r(2,c=P)}function C(A){n=A,F(n,a,s,i)}return t.$$set=A=>{"center"in A&&r(0,f=A.center),"dimensions"in A&&r(1,p=A.dimensions)},t.$$.update=()=>{t.$$.dirty&128&&(n=o.embedMarker||[.5,.5]),t.$$.dirty&128&&r(4,i=o.embedPromptLimit||Object.keys(o.weightedPrompts).length),t.$$.dirty&128&&r(6,a=o.embedExponentialScaling),t.$$.dirty&128&&r(5,s=o.embedWeightScaling),t.$$.dirty&96&&D(a,s),t.$$.dirty&128&&_(o.embeddings,o.scaledEmbedMappings),t.$$.dirty&16&&v(i)},[f,p,c,C,i,s,a,o]}class pS extends at{constructor(e){super(),ut(this,e,dS,hS,st,{center:0,dimensions:1})}}var Df={},O1={},Ls={},vS={get exports(){return Ls},set exports(t){Ls=t}},Us={},gS={get exports(){return Us},set exports(t){Us=t}},M1=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}},mS=M1,Ni=Object.prototype.toString;function jf(t){return Array.isArray(t)}function yf(t){return typeof t>"u"}function _S(t){return t!==null&&!yf(t)&&t.constructor!==null&&!yf(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function P1(t){return Ni.call(t)==="[object ArrayBuffer]"}function bS(t){return Ni.call(t)==="[object FormData]"}function DS(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&P1(t.buffer),e}function yS(t){return typeof t=="string"}function wS(t){return typeof t=="number"}function T1(t){return t!==null&&typeof t=="object"}function ms(t){if(Ni.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function AS(t){return Ni.call(t)==="[object Date]"}function ES(t){return Ni.call(t)==="[object File]"}function CS(t){return Ni.call(t)==="[object Blob]"}function k1(t){return Ni.call(t)==="[object Function]"}function FS(t){return T1(t)&&k1(t.pipe)}function SS(t){return Ni.call(t)==="[object URLSearchParams]"}function BS(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function OS(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function qf(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),jf(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function wf(){var t={};function e(i,a){ms(t[a])&&ms(i)?t[a]=wf(t[a],i):ms(i)?t[a]=wf({},i):jf(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)qf(arguments[r],e);return t}function MS(t,e,r){return qf(e,function(i,a){r&&typeof i=="function"?t[a]=mS(i,r):t[a]=i}),t}function PS(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var sn={isArray:jf,isArrayBuffer:P1,isBuffer:_S,isFormData:bS,isArrayBufferView:DS,isString:yS,isNumber:wS,isObject:T1,isPlainObject:ms,isUndefined:yf,isDate:AS,isFile:ES,isBlob:CS,isFunction:k1,isStream:FS,isURLSearchParams:SS,isStandardBrowserEnv:OS,forEach:qf,merge:wf,extend:MS,trim:BS,stripBOM:PS},ga=sn;function ud(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var I1=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(ga.isURLSearchParams(r))i=r.toString();else{var a=[];ga.forEach(r,function(f,p){f===null||typeof f>"u"||(ga.isArray(f)?p=p+"[]":f=[f],ga.forEach(f,function(h){ga.isDate(h)?h=h.toISOString():ga.isObject(h)&&(h=JSON.stringify(h)),a.push(ud(p)+"="+ud(h))}))}),i=a.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},TS=sn;function lo(){this.handlers=[]}lo.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};lo.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};lo.prototype.forEach=function(e){TS.forEach(this.handlers,function(n){n!==null&&e(n)})};var kS=lo,IS=sn,NS=function(e,r){IS.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})},N1=function(e,r,n,i,a){return e.config=r,n&&(e.code=n),e.request=i,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},x1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Tl,sd;function R1(){if(sd)return Tl;sd=1;var t=N1;return Tl=function(r,n,i,a,s){var o=new Error(r);return t(o,n,i,a,s)},Tl}var kl,od;function xS(){if(od)return kl;od=1;var t=R1();return kl=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},kl}var Il,ld;function RS(){if(ld)return Il;ld=1;var t=sn;return Il=t.isStandardBrowserEnv()?function(){return{write:function(n,i,a,s,o,f){var p=[];p.push(n+"="+encodeURIComponent(i)),t.isNumber(a)&&p.push("expires="+new Date(a).toGMTString()),t.isString(s)&&p.push("path="+s),t.isString(o)&&p.push("domain="+o),f===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Il}var Nl,fd;function LS(){return fd||(fd=1,Nl=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),Nl}var xl,cd;function US(){return cd||(cd=1,xl=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),xl}var Rl,hd;function VS(){if(hd)return Rl;hd=1;var t=LS(),e=US();return Rl=function(n,i){return n&&!t(i)?e(n,i):i},Rl}var Ll,dd;function jS(){if(dd)return Ll;dd=1;var t=sn,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Ll=function(n){var i={},a,s,o;return n&&t.forEach(n.split(`
`),function(p){if(o=p.indexOf(":"),a=t.trim(p.substr(0,o)).toLowerCase(),s=t.trim(p.substr(o+1)),a){if(i[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([s]):i[a]=i[a]?i[a]+", "+s:s}}),i},Ll}var Ul,pd;function qS(){if(pd)return Ul;pd=1;var t=sn;return Ul=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(s){var o=s;return r&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(o){var f=t.isString(o)?a(o):o;return f.protocol===i.protocol&&f.host===i.host}}():function(){return function(){return!0}}(),Ul}var Vl,vd;function fo(){if(vd)return Vl;vd=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Vl=t,Vl}var jl,gd;function md(){if(gd)return jl;gd=1;var t=sn,e=xS(),r=RS(),n=I1,i=VS(),a=jS(),s=qS(),o=R1(),f=x1,p=fo();return jl=function(h){return new Promise(function(g,b){var v=h.data,_=h.headers,D=h.responseType,F;function E(){h.cancelToken&&h.cancelToken.unsubscribe(F),h.signal&&h.signal.removeEventListener("abort",F)}t.isFormData(v)&&delete _["Content-Type"];var C=new XMLHttpRequest;if(h.auth){var A=h.auth.username||"",S=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";_.Authorization="Basic "+btoa(A+":"+S)}var P=i(h.baseURL,h.url);C.open(h.method.toUpperCase(),n(P,h.params,h.paramsSerializer),!0),C.timeout=h.timeout;function B(){if(C){var q="getAllResponseHeaders"in C?a(C.getAllResponseHeaders()):null,X=!D||D==="text"||D==="json"?C.responseText:C.response,K={data:X,status:C.status,statusText:C.statusText,headers:q,config:h,request:C};e(function(R){g(R),E()},function(R){b(R),E()},K),C=null}}if("onloadend"in C?C.onloadend=B:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(B)},C.onabort=function(){C&&(b(o("Request aborted",h,"ECONNABORTED",C)),C=null)},C.onerror=function(){b(o("Network Error",h,null,C)),C=null},C.ontimeout=function(){var X=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",K=h.transitional||f;h.timeoutErrorMessage&&(X=h.timeoutErrorMessage),b(o(X,h,K.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",C)),C=null},t.isStandardBrowserEnv()){var N=(h.withCredentials||s(P))&&h.xsrfCookieName?r.read(h.xsrfCookieName):void 0;N&&(_[h.xsrfHeaderName]=N)}"setRequestHeader"in C&&t.forEach(_,function(X,K){typeof v>"u"&&K.toLowerCase()==="content-type"?delete _[K]:C.setRequestHeader(K,X)}),t.isUndefined(h.withCredentials)||(C.withCredentials=!!h.withCredentials),D&&D!=="json"&&(C.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&C.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(F=function(q){C&&(b(!q||q&&q.type?new p("canceled"):q),C.abort(),C=null)},h.cancelToken&&h.cancelToken.subscribe(F),h.signal&&(h.signal.aborted?F():h.signal.addEventListener("abort",F))),v||(v=null),C.send(v)})},jl}var Nr=sn,_d=NS,zS=N1,WS=x1,HS={"Content-Type":"application/x-www-form-urlencoded"};function bd(t,e){!Nr.isUndefined(t)&&Nr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function $S(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=md()),t}function GS(t,e,r){if(Nr.isString(t))try{return(e||JSON.parse)(t),Nr.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var co={transitional:WS,adapter:$S(),transformRequest:[function(e,r){return _d(r,"Accept"),_d(r,"Content-Type"),Nr.isFormData(e)||Nr.isArrayBuffer(e)||Nr.isBuffer(e)||Nr.isStream(e)||Nr.isFile(e)||Nr.isBlob(e)?e:Nr.isArrayBufferView(e)?e.buffer:Nr.isURLSearchParams(e)?(bd(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Nr.isObject(e)||r&&r["Content-Type"]==="application/json"?(bd(r,"application/json"),GS(e)):e}],transformResponse:[function(e){var r=this.transitional||co.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&Nr.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(a)throw s.name==="SyntaxError"?zS(s,this,"E_JSON_PARSE"):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Nr.forEach(["delete","get","head"],function(e){co.headers[e]={}});Nr.forEach(["post","put","patch"],function(e){co.headers[e]=Nr.merge(HS)});var zf=co,KS=sn,YS=zf,ZS=function(e,r,n){var i=this||YS;return KS.forEach(n,function(s){e=s.call(i,e,r)}),e},ql,Dd;function L1(){return Dd||(Dd=1,ql=function(e){return!!(e&&e.__CANCEL__)}),ql}var yd=sn,zl=ZS,JS=L1(),QS=zf,XS=fo();function Wl(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new XS("canceled")}var e3=function(e){Wl(e),e.headers=e.headers||{},e.data=zl.call(e,e.data,e.headers,e.transformRequest),e.headers=yd.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),yd.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||QS.adapter;return r(e).then(function(i){return Wl(e),i.data=zl.call(e,i.data,i.headers,e.transformResponse),i},function(i){return JS(i)||(Wl(e),i&&i.response&&(i.response.data=zl.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},pn=sn,U1=function(e,r){r=r||{};var n={};function i(c,h){return pn.isPlainObject(c)&&pn.isPlainObject(h)?pn.merge(c,h):pn.isPlainObject(h)?pn.merge({},h):pn.isArray(h)?h.slice():h}function a(c){if(pn.isUndefined(r[c])){if(!pn.isUndefined(e[c]))return i(void 0,e[c])}else return i(e[c],r[c])}function s(c){if(!pn.isUndefined(r[c]))return i(void 0,r[c])}function o(c){if(pn.isUndefined(r[c])){if(!pn.isUndefined(e[c]))return i(void 0,e[c])}else return i(void 0,r[c])}function f(c){if(c in r)return i(e[c],r[c]);if(c in e)return i(void 0,e[c])}var p={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:f};return pn.forEach(Object.keys(e).concat(Object.keys(r)),function(h){var d=p[h]||a,g=d(h);pn.isUndefined(g)&&d!==f||(n[h]=g)}),n},Hl,wd;function V1(){return wd||(wd=1,Hl={version:"0.26.1"}),Hl}var t3=V1().version,Wf={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Wf[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Ad={};Wf.transitional=function(e,r,n){function i(a,s){return"[Axios v"+t3+"] Transitional option '"+a+"'"+s+(n?". "+n:"")}return function(a,s,o){if(e===!1)throw new Error(i(s," has been removed"+(r?" in "+r:"")));return r&&!Ad[s]&&(Ad[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,s,o):!0}};function r3(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],s=e[a];if(s){var o=t[a],f=o===void 0||s(o,a,t);if(f!==!0)throw new TypeError("option "+a+" must be "+f);continue}if(r!==!0)throw Error("Unknown option "+a)}}var n3={assertOptions:r3,validators:Wf},j1=sn,i3=I1,Ed=kS,Cd=e3,ho=U1,q1=n3,ma=q1.validators;function bu(t){this.defaults=t,this.interceptors={request:new Ed,response:new Ed}}bu.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=ho(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&q1.assertOptions(n,{silentJSONParsing:ma.transitional(ma.boolean),forcedJSONParsing:ma.transitional(ma.boolean),clarifyTimeoutError:ma.transitional(ma.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(a=a&&g.synchronous,i.unshift(g.fulfilled,g.rejected))});var s=[];this.interceptors.response.forEach(function(g){s.push(g.fulfilled,g.rejected)});var o;if(!a){var f=[Cd,void 0];for(Array.prototype.unshift.apply(f,i),f=f.concat(s),o=Promise.resolve(r);f.length;)o=o.then(f.shift(),f.shift());return o}for(var p=r;i.length;){var c=i.shift(),h=i.shift();try{p=c(p)}catch(d){h(d);break}}try{o=Cd(p)}catch(d){return Promise.reject(d)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};bu.prototype.getUri=function(e){return e=ho(this.defaults,e),i3(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};j1.forEach(["delete","get","head","options"],function(e){bu.prototype[e]=function(r,n){return this.request(ho(n||{},{method:e,url:r,data:(n||{}).data}))}});j1.forEach(["post","put","patch"],function(e){bu.prototype[e]=function(r,n,i){return this.request(ho(i||{},{method:e,url:r,data:n}))}});var a3=bu,$l,Fd;function u3(){if(Fd)return $l;Fd=1;var t=fo();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(s){n=s});var i=this;this.promise.then(function(a){if(i._listeners){var s,o=i._listeners.length;for(s=0;s<o;s++)i._listeners[s](a);i._listeners=null}}),this.promise.then=function(a){var s,o=new Promise(function(f){i.subscribe(f),s=f}).then(a);return o.cancel=function(){i.unsubscribe(s)},o},r(function(s){i.reason||(i.reason=new t(s),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(s){n=s});return{token:i,cancel:n}},$l=e,$l}var Gl,Sd;function s3(){return Sd||(Sd=1,Gl=function(e){return function(n){return e.apply(null,n)}}),Gl}var Kl,Bd;function o3(){if(Bd)return Kl;Bd=1;var t=sn;return Kl=function(r){return t.isObject(r)&&r.isAxiosError===!0},Kl}var Od=sn,l3=M1,_s=a3,f3=U1,c3=zf;function z1(t){var e=new _s(t),r=l3(_s.prototype.request,e);return Od.extend(r,_s.prototype,e),Od.extend(r,e),r.create=function(i){return z1(f3(t,i))},r}var Jn=z1(c3);Jn.Axios=_s;Jn.Cancel=fo();Jn.CancelToken=u3();Jn.isCancel=L1();Jn.VERSION=V1().version;Jn.all=function(e){return Promise.all(e)};Jn.spread=s3();Jn.isAxiosError=o3();gS.exports=Jn;Us.default=Jn;(function(t){t.exports=Us})(vS);var ur={},Hf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RequiredError=t.BaseAPI=t.COLLECTION_FORMATS=t.BASE_PATH=void 0;const e=Ls;t.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class r{constructor(a,s=t.BASE_PATH,o=e.default){this.basePath=s,this.axios=o,a&&(this.configuration=a,this.basePath=a.basePath||this.basePath)}}t.BaseAPI=r;class n extends Error{constructor(a,s){super(s),this.field=a,this.name="RequiredError"}}t.RequiredError=n})(Hf);var $f=dr&&dr.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(c){try{p(n.next(c))}catch(h){s(h)}}function f(c){try{p(n.throw(c))}catch(h){s(h)}}function p(c){c.done?a(c.value):i(c.value).then(o,f)}p((n=n.apply(t,e||[])).next())})};Object.defineProperty(ur,"__esModule",{value:!0});ur.createRequestFunction=ur.toPathString=ur.serializeDataIfNeeded=ur.setSearchParams=ur.setOAuthToObject=ur.setBearerAuthToObject=ur.setBasicAuthToObject=ur.setApiKeyToObject=ur.assertParamExists=ur.DUMMY_BASE_URL=void 0;const h3=Hf;ur.DUMMY_BASE_URL="https://example.com";ur.assertParamExists=function(t,e,r){if(r==null)throw new h3.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};ur.setApiKeyToObject=function(t,e,r){return $f(this,void 0,void 0,function*(){if(r&&r.apiKey){const n=typeof r.apiKey=="function"?yield r.apiKey(e):yield r.apiKey;t[e]=n}})};ur.setBasicAuthToObject=function(t,e){e&&(e.username||e.password)&&(t.auth={username:e.username,password:e.password})};ur.setBearerAuthToObject=function(t,e){return $f(this,void 0,void 0,function*(){if(e&&e.accessToken){const r=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;t.Authorization="Bearer "+r}})};ur.setOAuthToObject=function(t,e,r,n){return $f(this,void 0,void 0,function*(){if(n&&n.accessToken){const i=typeof n.accessToken=="function"?yield n.accessToken(e,r):yield n.accessToken;t.Authorization="Bearer "+i}})};function Af(t,e,r=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(n=>Af(t,n,r)):Object.keys(e).forEach(n=>Af(t,e[n],`${r}${r!==""?".":""}${n}`)):t.has(r)?t.append(r,e):t.set(r,e))}ur.setSearchParams=function(t,...e){const r=new URLSearchParams(t.search);Af(r,e),t.search=r.toString()};ur.serializeDataIfNeeded=function(t,e,r){const n=typeof t!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(t!==void 0?t:{}):t||""};ur.toPathString=function(t){return t.pathname+t.search+t.hash};ur.createRequestFunction=function(t,e,r,n){return(i=e,a=r)=>{const s=Object.assign(Object.assign({},t.options),{url:((n==null?void 0:n.basePath)||a)+t.url});return i.request(s)}};(function(t){var e=dr&&dr.__awaiter||function(s,o,f,p){function c(h){return h instanceof f?h:new f(function(d){d(h)})}return new(f||(f=Promise))(function(h,d){function g(_){try{v(p.next(_))}catch(D){d(D)}}function b(_){try{v(p.throw(_))}catch(D){d(D)}}function v(_){_.done?h(_.value):c(_.value).then(g,b)}v((p=p.apply(s,o||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIApi=t.OpenAIApiFactory=t.OpenAIApiFp=t.OpenAIApiAxiosParamCreator=t.CreateImageRequestResponseFormatEnum=t.CreateImageRequestSizeEnum=t.ChatCompletionResponseMessageRoleEnum=t.ChatCompletionRequestMessageRoleEnum=void 0;const r=Ls,n=ur,i=Hf;t.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},t.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},t.OpenAIApiAxiosParamCreator=function(s){return{cancelFineTune:(o,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("cancelFineTune","fineTuneId",o);const p="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(o))),c=new URL(p,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),f),g={},b={};n.setSearchParams(c,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),{url:n.toPathString(c),options:d}}),createAnswer:(o,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createAnswer","createAnswerRequest",o);const p="/answers",c=new URL(p,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),d.data=n.serializeDataIfNeeded(o,d,s),{url:n.toPathString(c),options:d}}),createChatCompletion:(o,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createChatCompletion","createChatCompletionRequest",o);const p="/chat/completions",c=new URL(p,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),d.data=n.serializeDataIfNeeded(o,d,s),{url:n.toPathString(c),options:d}}),createClassification:(o,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createClassification","createClassificationRequest",o);const p="/classifications",c=new URL(p,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),d.data=n.serializeDataIfNeeded(o,d,s),{url:n.toPathString(c),options:d}}),createCompletion:(o,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createCompletion","createCompletionRequest",o);const p="/completions",c=new URL(p,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),d.data=n.serializeDataIfNeeded(o,d,s),{url:n.toPathString(c),options:d}}),createEdit:(o,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEdit","createEditRequest",o);const p="/edits",c=new URL(p,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),d.data=n.serializeDataIfNeeded(o,d,s),{url:n.toPathString(c),options:d}}),createEmbedding:(o,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEmbedding","createEmbeddingRequest",o);const p="/embeddings",c=new URL(p,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),d.data=n.serializeDataIfNeeded(o,d,s),{url:n.toPathString(c),options:d}}),createFile:(o,f,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFile","file",o),n.assertParamExists("createFile","purpose",f);const c="/files",h=new URL(c,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const g=Object.assign(Object.assign({method:"POST"},d),p),b={},v={},_=new(s&&s.formDataCtor||FormData);o!==void 0&&_.append("file",o),f!==void 0&&_.append("purpose",f),b["Content-Type"]="multipart/form-data",n.setSearchParams(h,v);let D=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),_.getHeaders()),D),p.headers),g.data=_,{url:n.toPathString(h),options:g}}),createFineTune:(o,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFineTune","createFineTuneRequest",o);const p="/fine-tunes",c=new URL(p,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),d.data=n.serializeDataIfNeeded(o,d,s),{url:n.toPathString(c),options:d}}),createImage:(o,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImage","createImageRequest",o);const p="/images/generations",c=new URL(p,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),d.data=n.serializeDataIfNeeded(o,d,s),{url:n.toPathString(c),options:d}}),createImageEdit:(o,f,p,c,h,d,g,b={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageEdit","image",o),n.assertParamExists("createImageEdit","prompt",f);const v="/images/edits",_=new URL(v,n.DUMMY_BASE_URL);let D;s&&(D=s.baseOptions);const F=Object.assign(Object.assign({method:"POST"},D),b),E={},C={},A=new(s&&s.formDataCtor||FormData);o!==void 0&&A.append("image",o),p!==void 0&&A.append("mask",p),f!==void 0&&A.append("prompt",f),c!==void 0&&A.append("n",c),h!==void 0&&A.append("size",h),d!==void 0&&A.append("response_format",d),g!==void 0&&A.append("user",g),E["Content-Type"]="multipart/form-data",n.setSearchParams(_,C);let S=D&&D.headers?D.headers:{};return F.headers=Object.assign(Object.assign(Object.assign(Object.assign({},E),A.getHeaders()),S),b.headers),F.data=A,{url:n.toPathString(_),options:F}}),createImageVariation:(o,f,p,c,h,d={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageVariation","image",o);const g="/images/variations",b=new URL(g,n.DUMMY_BASE_URL);let v;s&&(v=s.baseOptions);const _=Object.assign(Object.assign({method:"POST"},v),d),D={},F={},E=new(s&&s.formDataCtor||FormData);o!==void 0&&E.append("image",o),f!==void 0&&E.append("n",f),p!==void 0&&E.append("size",p),c!==void 0&&E.append("response_format",c),h!==void 0&&E.append("user",h),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,F);let C=v&&v.headers?v.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),E.getHeaders()),C),d.headers),_.data=E,{url:n.toPathString(b),options:_}}),createModeration:(o,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createModeration","createModerationRequest",o);const p="/moderations",c=new URL(p,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),d.data=n.serializeDataIfNeeded(o,d,s),{url:n.toPathString(c),options:d}}),createSearch:(o,f,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createSearch","engineId",o),n.assertParamExists("createSearch","createSearchRequest",f);const c="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(o))),h=new URL(c,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const g=Object.assign(Object.assign({method:"POST"},d),p),b={},v={};b["Content-Type"]="application/json",n.setSearchParams(h,v);let _=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),_),p.headers),g.data=n.serializeDataIfNeeded(f,g,s),{url:n.toPathString(h),options:g}}),createTranscription:(o,f,p,c,h,d,g={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranscription","file",o),n.assertParamExists("createTranscription","model",f);const b="/audio/transcriptions",v=new URL(b,n.DUMMY_BASE_URL);let _;s&&(_=s.baseOptions);const D=Object.assign(Object.assign({method:"POST"},_),g),F={},E={},C=new(s&&s.formDataCtor||FormData);o!==void 0&&C.append("file",o),f!==void 0&&C.append("model",f),p!==void 0&&C.append("prompt",p),c!==void 0&&C.append("response_format",c),h!==void 0&&C.append("temperature",h),d!==void 0&&C.append("language",d),F["Content-Type"]="multipart/form-data",n.setSearchParams(v,E);let A=_&&_.headers?_.headers:{};return D.headers=Object.assign(Object.assign(Object.assign(Object.assign({},F),C.getHeaders()),A),g.headers),D.data=C,{url:n.toPathString(v),options:D}}),createTranslation:(o,f,p,c,h,d={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranslation","file",o),n.assertParamExists("createTranslation","model",f);const g="/audio/translations",b=new URL(g,n.DUMMY_BASE_URL);let v;s&&(v=s.baseOptions);const _=Object.assign(Object.assign({method:"POST"},v),d),D={},F={},E=new(s&&s.formDataCtor||FormData);o!==void 0&&E.append("file",o),f!==void 0&&E.append("model",f),p!==void 0&&E.append("prompt",p),c!==void 0&&E.append("response_format",c),h!==void 0&&E.append("temperature",h),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,F);let C=v&&v.headers?v.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),E.getHeaders()),C),d.headers),_.data=E,{url:n.toPathString(b),options:_}}),deleteFile:(o,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteFile","fileId",o);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(o))),c=new URL(p,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},h),f),g={},b={};n.setSearchParams(c,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),{url:n.toPathString(c),options:d}}),deleteModel:(o,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteModel","model",o);const p="/models/{model}".replace("{model}",encodeURIComponent(String(o))),c=new URL(p,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},h),f),g={},b={};n.setSearchParams(c,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),{url:n.toPathString(c),options:d}}),downloadFile:(o,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("downloadFile","fileId",o);const p="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(o))),c=new URL(p,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),f),g={},b={};n.setSearchParams(c,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),{url:n.toPathString(c),options:d}}),listEngines:(o={})=>e(this,void 0,void 0,function*(){const f="/engines",p=new URL(f,n.DUMMY_BASE_URL);let c;s&&(c=s.baseOptions);const h=Object.assign(Object.assign({method:"GET"},c),o),d={},g={};n.setSearchParams(p,g);let b=c&&c.headers?c.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),b),o.headers),{url:n.toPathString(p),options:h}}),listFiles:(o={})=>e(this,void 0,void 0,function*(){const f="/files",p=new URL(f,n.DUMMY_BASE_URL);let c;s&&(c=s.baseOptions);const h=Object.assign(Object.assign({method:"GET"},c),o),d={},g={};n.setSearchParams(p,g);let b=c&&c.headers?c.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),b),o.headers),{url:n.toPathString(p),options:h}}),listFineTuneEvents:(o,f,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("listFineTuneEvents","fineTuneId",o);const c="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(o))),h=new URL(c,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const g=Object.assign(Object.assign({method:"GET"},d),p),b={},v={};f!==void 0&&(v.stream=f),n.setSearchParams(h,v);let _=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),_),p.headers),{url:n.toPathString(h),options:g}}),listFineTunes:(o={})=>e(this,void 0,void 0,function*(){const f="/fine-tunes",p=new URL(f,n.DUMMY_BASE_URL);let c;s&&(c=s.baseOptions);const h=Object.assign(Object.assign({method:"GET"},c),o),d={},g={};n.setSearchParams(p,g);let b=c&&c.headers?c.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),b),o.headers),{url:n.toPathString(p),options:h}}),listModels:(o={})=>e(this,void 0,void 0,function*(){const f="/models",p=new URL(f,n.DUMMY_BASE_URL);let c;s&&(c=s.baseOptions);const h=Object.assign(Object.assign({method:"GET"},c),o),d={},g={};n.setSearchParams(p,g);let b=c&&c.headers?c.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),b),o.headers),{url:n.toPathString(p),options:h}}),retrieveEngine:(o,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveEngine","engineId",o);const p="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(o))),c=new URL(p,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),f),g={},b={};n.setSearchParams(c,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),{url:n.toPathString(c),options:d}}),retrieveFile:(o,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFile","fileId",o);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(o))),c=new URL(p,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),f),g={},b={};n.setSearchParams(c,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),{url:n.toPathString(c),options:d}}),retrieveFineTune:(o,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFineTune","fineTuneId",o);const p="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(o))),c=new URL(p,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),f),g={},b={};n.setSearchParams(c,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),{url:n.toPathString(c),options:d}}),retrieveModel:(o,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveModel","model",o);const p="/models/{model}".replace("{model}",encodeURIComponent(String(o))),c=new URL(p,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),f),g={},b={};n.setSearchParams(c,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),{url:n.toPathString(c),options:d}})}},t.OpenAIApiFp=function(s){const o=t.OpenAIApiAxiosParamCreator(s);return{cancelFineTune(f,p){return e(this,void 0,void 0,function*(){const c=yield o.cancelFineTune(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,s)})},createAnswer(f,p){return e(this,void 0,void 0,function*(){const c=yield o.createAnswer(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,s)})},createChatCompletion(f,p){return e(this,void 0,void 0,function*(){const c=yield o.createChatCompletion(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,s)})},createClassification(f,p){return e(this,void 0,void 0,function*(){const c=yield o.createClassification(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,s)})},createCompletion(f,p){return e(this,void 0,void 0,function*(){const c=yield o.createCompletion(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,s)})},createEdit(f,p){return e(this,void 0,void 0,function*(){const c=yield o.createEdit(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,s)})},createEmbedding(f,p){return e(this,void 0,void 0,function*(){const c=yield o.createEmbedding(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,s)})},createFile(f,p,c){return e(this,void 0,void 0,function*(){const h=yield o.createFile(f,p,c);return n.createRequestFunction(h,r.default,i.BASE_PATH,s)})},createFineTune(f,p){return e(this,void 0,void 0,function*(){const c=yield o.createFineTune(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,s)})},createImage(f,p){return e(this,void 0,void 0,function*(){const c=yield o.createImage(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,s)})},createImageEdit(f,p,c,h,d,g,b,v){return e(this,void 0,void 0,function*(){const _=yield o.createImageEdit(f,p,c,h,d,g,b,v);return n.createRequestFunction(_,r.default,i.BASE_PATH,s)})},createImageVariation(f,p,c,h,d,g){return e(this,void 0,void 0,function*(){const b=yield o.createImageVariation(f,p,c,h,d,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,s)})},createModeration(f,p){return e(this,void 0,void 0,function*(){const c=yield o.createModeration(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,s)})},createSearch(f,p,c){return e(this,void 0,void 0,function*(){const h=yield o.createSearch(f,p,c);return n.createRequestFunction(h,r.default,i.BASE_PATH,s)})},createTranscription(f,p,c,h,d,g,b){return e(this,void 0,void 0,function*(){const v=yield o.createTranscription(f,p,c,h,d,g,b);return n.createRequestFunction(v,r.default,i.BASE_PATH,s)})},createTranslation(f,p,c,h,d,g){return e(this,void 0,void 0,function*(){const b=yield o.createTranslation(f,p,c,h,d,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,s)})},deleteFile(f,p){return e(this,void 0,void 0,function*(){const c=yield o.deleteFile(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,s)})},deleteModel(f,p){return e(this,void 0,void 0,function*(){const c=yield o.deleteModel(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,s)})},downloadFile(f,p){return e(this,void 0,void 0,function*(){const c=yield o.downloadFile(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,s)})},listEngines(f){return e(this,void 0,void 0,function*(){const p=yield o.listEngines(f);return n.createRequestFunction(p,r.default,i.BASE_PATH,s)})},listFiles(f){return e(this,void 0,void 0,function*(){const p=yield o.listFiles(f);return n.createRequestFunction(p,r.default,i.BASE_PATH,s)})},listFineTuneEvents(f,p,c){return e(this,void 0,void 0,function*(){const h=yield o.listFineTuneEvents(f,p,c);return n.createRequestFunction(h,r.default,i.BASE_PATH,s)})},listFineTunes(f){return e(this,void 0,void 0,function*(){const p=yield o.listFineTunes(f);return n.createRequestFunction(p,r.default,i.BASE_PATH,s)})},listModels(f){return e(this,void 0,void 0,function*(){const p=yield o.listModels(f);return n.createRequestFunction(p,r.default,i.BASE_PATH,s)})},retrieveEngine(f,p){return e(this,void 0,void 0,function*(){const c=yield o.retrieveEngine(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,s)})},retrieveFile(f,p){return e(this,void 0,void 0,function*(){const c=yield o.retrieveFile(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,s)})},retrieveFineTune(f,p){return e(this,void 0,void 0,function*(){const c=yield o.retrieveFineTune(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,s)})},retrieveModel(f,p){return e(this,void 0,void 0,function*(){const c=yield o.retrieveModel(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,s)})}}},t.OpenAIApiFactory=function(s,o,f){const p=t.OpenAIApiFp(s);return{cancelFineTune(c,h){return p.cancelFineTune(c,h).then(d=>d(f,o))},createAnswer(c,h){return p.createAnswer(c,h).then(d=>d(f,o))},createChatCompletion(c,h){return p.createChatCompletion(c,h).then(d=>d(f,o))},createClassification(c,h){return p.createClassification(c,h).then(d=>d(f,o))},createCompletion(c,h){return p.createCompletion(c,h).then(d=>d(f,o))},createEdit(c,h){return p.createEdit(c,h).then(d=>d(f,o))},createEmbedding(c,h){return p.createEmbedding(c,h).then(d=>d(f,o))},createFile(c,h,d){return p.createFile(c,h,d).then(g=>g(f,o))},createFineTune(c,h){return p.createFineTune(c,h).then(d=>d(f,o))},createImage(c,h){return p.createImage(c,h).then(d=>d(f,o))},createImageEdit(c,h,d,g,b,v,_,D){return p.createImageEdit(c,h,d,g,b,v,_,D).then(F=>F(f,o))},createImageVariation(c,h,d,g,b,v){return p.createImageVariation(c,h,d,g,b,v).then(_=>_(f,o))},createModeration(c,h){return p.createModeration(c,h).then(d=>d(f,o))},createSearch(c,h,d){return p.createSearch(c,h,d).then(g=>g(f,o))},createTranscription(c,h,d,g,b,v,_){return p.createTranscription(c,h,d,g,b,v,_).then(D=>D(f,o))},createTranslation(c,h,d,g,b,v){return p.createTranslation(c,h,d,g,b,v).then(_=>_(f,o))},deleteFile(c,h){return p.deleteFile(c,h).then(d=>d(f,o))},deleteModel(c,h){return p.deleteModel(c,h).then(d=>d(f,o))},downloadFile(c,h){return p.downloadFile(c,h).then(d=>d(f,o))},listEngines(c){return p.listEngines(c).then(h=>h(f,o))},listFiles(c){return p.listFiles(c).then(h=>h(f,o))},listFineTuneEvents(c,h,d){return p.listFineTuneEvents(c,h,d).then(g=>g(f,o))},listFineTunes(c){return p.listFineTunes(c).then(h=>h(f,o))},listModels(c){return p.listModels(c).then(h=>h(f,o))},retrieveEngine(c,h){return p.retrieveEngine(c,h).then(d=>d(f,o))},retrieveFile(c,h){return p.retrieveFile(c,h).then(d=>d(f,o))},retrieveFineTune(c,h){return p.retrieveFineTune(c,h).then(d=>d(f,o))},retrieveModel(c,h){return p.retrieveModel(c,h).then(d=>d(f,o))}}};class a extends i.BaseAPI{cancelFineTune(o,f){return t.OpenAIApiFp(this.configuration).cancelFineTune(o,f).then(p=>p(this.axios,this.basePath))}createAnswer(o,f){return t.OpenAIApiFp(this.configuration).createAnswer(o,f).then(p=>p(this.axios,this.basePath))}createChatCompletion(o,f){return t.OpenAIApiFp(this.configuration).createChatCompletion(o,f).then(p=>p(this.axios,this.basePath))}createClassification(o,f){return t.OpenAIApiFp(this.configuration).createClassification(o,f).then(p=>p(this.axios,this.basePath))}createCompletion(o,f){return t.OpenAIApiFp(this.configuration).createCompletion(o,f).then(p=>p(this.axios,this.basePath))}createEdit(o,f){return t.OpenAIApiFp(this.configuration).createEdit(o,f).then(p=>p(this.axios,this.basePath))}createEmbedding(o,f){return t.OpenAIApiFp(this.configuration).createEmbedding(o,f).then(p=>p(this.axios,this.basePath))}createFile(o,f,p){return t.OpenAIApiFp(this.configuration).createFile(o,f,p).then(c=>c(this.axios,this.basePath))}createFineTune(o,f){return t.OpenAIApiFp(this.configuration).createFineTune(o,f).then(p=>p(this.axios,this.basePath))}createImage(o,f){return t.OpenAIApiFp(this.configuration).createImage(o,f).then(p=>p(this.axios,this.basePath))}createImageEdit(o,f,p,c,h,d,g,b){return t.OpenAIApiFp(this.configuration).createImageEdit(o,f,p,c,h,d,g,b).then(v=>v(this.axios,this.basePath))}createImageVariation(o,f,p,c,h,d){return t.OpenAIApiFp(this.configuration).createImageVariation(o,f,p,c,h,d).then(g=>g(this.axios,this.basePath))}createModeration(o,f){return t.OpenAIApiFp(this.configuration).createModeration(o,f).then(p=>p(this.axios,this.basePath))}createSearch(o,f,p){return t.OpenAIApiFp(this.configuration).createSearch(o,f,p).then(c=>c(this.axios,this.basePath))}createTranscription(o,f,p,c,h,d,g){return t.OpenAIApiFp(this.configuration).createTranscription(o,f,p,c,h,d,g).then(b=>b(this.axios,this.basePath))}createTranslation(o,f,p,c,h,d){return t.OpenAIApiFp(this.configuration).createTranslation(o,f,p,c,h,d).then(g=>g(this.axios,this.basePath))}deleteFile(o,f){return t.OpenAIApiFp(this.configuration).deleteFile(o,f).then(p=>p(this.axios,this.basePath))}deleteModel(o,f){return t.OpenAIApiFp(this.configuration).deleteModel(o,f).then(p=>p(this.axios,this.basePath))}downloadFile(o,f){return t.OpenAIApiFp(this.configuration).downloadFile(o,f).then(p=>p(this.axios,this.basePath))}listEngines(o){return t.OpenAIApiFp(this.configuration).listEngines(o).then(f=>f(this.axios,this.basePath))}listFiles(o){return t.OpenAIApiFp(this.configuration).listFiles(o).then(f=>f(this.axios,this.basePath))}listFineTuneEvents(o,f,p){return t.OpenAIApiFp(this.configuration).listFineTuneEvents(o,f,p).then(c=>c(this.axios,this.basePath))}listFineTunes(o){return t.OpenAIApiFp(this.configuration).listFineTunes(o).then(f=>f(this.axios,this.basePath))}listModels(o){return t.OpenAIApiFp(this.configuration).listModels(o).then(f=>f(this.axios,this.basePath))}retrieveEngine(o,f){return t.OpenAIApiFp(this.configuration).retrieveEngine(o,f).then(p=>p(this.axios,this.basePath))}retrieveFile(o,f){return t.OpenAIApiFp(this.configuration).retrieveFile(o,f).then(p=>p(this.axios,this.basePath))}retrieveFineTune(o,f){return t.OpenAIApiFp(this.configuration).retrieveFineTune(o,f).then(p=>p(this.axios,this.basePath))}retrieveModel(o,f){return t.OpenAIApiFp(this.configuration).retrieveModel(o,f).then(p=>p(this.axios,this.basePath))}}t.OpenAIApi=a})(O1);var po={};const d3="openai",p3="3.2.1",v3="Node.js library for the OpenAI API",g3={type:"git",url:"git@github.com:openai/openai-node.git"},m3=["openai","open","ai","gpt-3","gpt3"],_3="OpenAI",b3="MIT",D3="./dist/index.js",y3="./dist/index.d.ts",w3={build:"tsc --outDir dist/"},A3={axios:"^0.26.0","form-data":"^4.0.0"},E3={"@types/node":"^12.11.5",typescript:"^3.6.4"},C3={name:d3,version:p3,description:v3,repository:g3,keywords:m3,author:_3,license:b3,main:D3,types:y3,scripts:w3,dependencies:A3,devDependencies:E3};var Yl,Md;function F3(){return Md||(Md=1,Yl=typeof self=="object"?self.FormData:window.FormData),Yl}Object.defineProperty(po,"__esModule",{value:!0});po.Configuration=void 0;const S3=C3;class B3{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${S3.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=F3())}isJsonMime(e){const r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(r.test(e)||e.toLowerCase()==="application/json-patch+json")}}po.Configuration=B3;(function(t){var e=dr&&dr.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=dr&&dr.__exportStar||function(n,i){for(var a in n)a!=="default"&&!i.hasOwnProperty(a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(O1,t),r(po,t)})(Df);function Vs(t){const e=new Df.Configuration({apiKey:t});return new Df.OpenAIApi(e)}async function O3(t,e,r="text-davinci-003"){return await t.createCompletion({model:r,prompt:e,temperature:.8,max_tokens:250})}async function M3(t,e,r="gpt-3.5-turbo"){return await t.createChatCompletion({model:r,messages:[{role:"user",content:e}],temperature:.8,max_tokens:250})}async function P3(t,e,r="text-embedding-ada-002"){return await t.createEmbedding({model:r,input:e})}async function T3(t){return await t.listModels()}const Zl="preferredEmbeddingModelStore";function k3(){const t=Sr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Zl]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[Zl]=a,r(a))},get:()=>bt(t),delete:()=>{i&&(delete localStorage[Zl],r(""))}}}const Ef=k3(),W1=jr(Ef,t=>bt(Ef)),Jl="oKeyStore";function I3(){const t=Sr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Jl]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[Jl]=a,r(a))},get:()=>bt(t),delete:()=>{i&&(delete localStorage[Jl],r(""))}}}const js=I3(),Gf=jr(js,t=>bt(js));function N3(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!0,pending:U3,then:L3,catch:R3,value:25,error:26,blocks:[,,,]};return bs(r=t[6],i),{c(){e=Tt(),i.block.c()},l(a){e=Tt(),i.block.l(a)},m(a,s){fe(a,e,s),i.block.m(a,i.anchor=s),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(a,s){t=a,i.ctx=t,s&64&&r!==(r=t[6])&&bs(r,i)||Sp(i,t,s)},i(a){n||(_e(i.block),n=!0)},o(a){for(let s=0;s<3;s+=1){const o=i.blocks[s];we(o)}n=!1},d(a){a&&k(e),i.block.d(a),i.token=null,i=null}}}function x3(t){let e,r,n,i,a;return{c(){e=Y("div"),r=Y("div"),n=Y("div"),i=Y("p"),a=ke("Set OpenAI key in settings to use embedding map."),this.h()},l(s){e=Z(s,"DIV",{class:!0});var o=H(e);r=Z(o,"DIV",{class:!0});var f=H(r);n=Z(f,"DIV",{class:!0});var p=H(n);i=Z(p,"P",{class:!0});var c=H(i);a=Ie(c,"Set OpenAI key in settings to use embedding map."),c.forEach(k),p.forEach(k),f.forEach(k),o.forEach(k),this.h()},h(){O(i,"class","text-center text-lg"),O(n,"class","h-20 w-52"),O(r,"class","flex flex-col justify-center"),O(e,"class","w-full h-full flex justify-center")},m(s,o){fe(s,e,o),L(e,r),L(r,n),L(n,i),L(i,a)},p:Se,i:Se,o:Se,d(s){s&&k(e)}}}function R3(t){let e,r=t[26].message+"",n;return{c(){e=Y("p"),n=ke(r),this.h()},l(i){e=Z(i,"P",{style:!0});var a=H(e);n=Ie(a,r),a.forEach(k),this.h()},h(){Yt(e,"color","red")},m(i,a){fe(i,e,a),L(e,n)},p(i,a){a&64&&r!==(r=i[26].message+"")&&Fr(n,r)},i:Se,o:Se,d(i){i&&k(e)}}}function L3(t){let e,r,n,i,a,s,o,f,p,c,h,d,g,b,v,_,D,F,E,C,A,S,P,B,N,q,X,K,U,R,z,V,Q,ae,se,he,Ce,Be,Fe,je,Ue,Ve,ot,Dt,rt,it,St,nt,ht,lt;r=new pS({props:{dimensions:t[3],center:t[8]}});let ft=t[4].embedExponentialScaling&&Pd(t);return{c(){e=Y("div"),ze(r.$$.fragment),i=Me(),a=Y("div"),s=Y("div"),o=Y("label"),f=Y("span"),p=ke("Exponential Scaling"),c=Me(),h=Y("input"),g=Me(),ft&&ft.c(),b=Me(),v=Y("div"),_=Y("label"),D=Y("span"),F=ke("# Prompts"),E=Me(),C=Y("input"),A=Me(),S=Y("div"),P=Y("div"),B=Y("label"),N=Y("span"),q=ke("Clusters"),X=Me(),K=Y("div"),U=Y("button"),R=ke("0"),V=Me(),Q=Y("button"),ae=ke("2"),se=Me(),he=Y("button"),Ce=ke("4"),Be=Me(),Fe=Y("button"),je=ke("6"),Ue=Me(),Ve=Y("button"),ot=ke("8"),Dt=Me(),rt=Y("div"),it=Y("button"),St=ke("Shuffle"),this.h()},l(Ke){e=Z(Ke,"DIV",{class:!0});var Ye=H(e);We(r.$$.fragment,Ye),Ye.forEach(k),i=Pe(Ke),a=Z(Ke,"DIV",{class:!0});var Ee=H(a);s=Z(Ee,"DIV",{class:!0});var Ne=H(s);o=Z(Ne,"LABEL",{class:!0});var Mt=H(o);f=Z(Mt,"SPAN",{class:!0});var Vt=H(f);p=Ie(Vt,"Exponential Scaling"),Vt.forEach(k),Mt.forEach(k),c=Pe(Ne),h=Z(Ne,"INPUT",{type:!0,class:!0}),Ne.forEach(k),g=Pe(Ee),ft&&ft.l(Ee),b=Pe(Ee),v=Z(Ee,"DIV",{class:!0});var Ht=H(v);_=Z(Ht,"LABEL",{class:!0});var W=H(_);D=Z(W,"SPAN",{class:!0});var G=H(D);F=Ie(G,"# Prompts"),G.forEach(k),W.forEach(k),E=Pe(Ht),C=Z(Ht,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Ht.forEach(k),A=Pe(Ee),S=Z(Ee,"DIV",{class:!0});var ee=H(S);P=Z(ee,"DIV",{class:!0});var le=H(P);B=Z(le,"LABEL",{class:!0});var ie=H(B);N=Z(ie,"SPAN",{class:!0});var de=H(N);q=Ie(de,"Clusters"),de.forEach(k),ie.forEach(k),X=Pe(le),K=Z(le,"DIV",{class:!0});var ue=H(K);U=Z(ue,"BUTTON",{class:!0});var ce=H(U);R=Ie(ce,"0"),ce.forEach(k),V=Pe(ue),Q=Z(ue,"BUTTON",{class:!0});var Ae=H(Q);ae=Ie(Ae,"2"),Ae.forEach(k),se=Pe(ue),he=Z(ue,"BUTTON",{class:!0});var Re=H(he);Ce=Ie(Re,"4"),Re.forEach(k),Be=Pe(ue),Fe=Z(ue,"BUTTON",{class:!0});var Qe=H(Fe);je=Ie(Qe,"6"),Qe.forEach(k),Ue=Pe(ue),Ve=Z(ue,"BUTTON",{class:!0});var Oe=H(Ve);ot=Ie(Oe,"8"),Oe.forEach(k),ue.forEach(k),le.forEach(k),ee.forEach(k),Dt=Pe(Ee),rt=Z(Ee,"DIV",{class:!0});var zt=H(rt);it=Z(zt,"BUTTON",{class:!0});var Rt=H(it);St=Ie(Rt,"Shuffle"),Rt.forEach(k),zt.forEach(k),Ee.forEach(k),this.h()},h(){O(e,"class","w-full h-full"),Zi(()=>t[15].call(e)),O(f,"class","label-text"),O(o,"class","label"),O(h,"type","checkbox"),O(h,"class","toggle toggle-sm"),h.checked=d=t[4].embedExponentialScaling,O(s,"class","min-w-max px-2"),O(D,"class","label-text"),O(_,"class","label"),C.value=t[9],O(C,"type","range"),O(C,"min","1"),O(C,"max",t[2]),O(C,"step","1"),O(C,"class","range range-sm"),O(v,"class","w-full px-2"),O(N,"class","label-text"),O(B,"class","label pb-1 m-0"),O(U,"class",z=(t[4].embedClusters||0)===0?"btn btn-xs btn-active":"btn btn-xs"),O(Q,"class","btn btn-xs"),Ft(Q,"btn-active",t[4].embedClusters===2),Ft(Q,"btn-disabled",Object.keys(t[4].embeddings).length<2),O(he,"class","btn btn-xs"),Ft(he,"btn-active",t[4].embedClusters===4),Ft(he,"btn-disabled",Object.keys(t[4].embeddings).length<4),O(Fe,"class","btn btn-xs"),Ft(Fe,"btn-active",t[4].embedClusters===6),Ft(Fe,"btn-disabled",Object.keys(t[4].embeddings).length<6),O(Ve,"class","btn btn-xs"),Ft(Ve,"btn-active",t[4].embedClusters===8),Ft(Ve,"btn-disabled",Object.keys(t[4].embeddings).length<8),O(K,"class","btn-group btn-group-horizontal p-0"),O(P,"class",""),O(S,"class",""),O(it,"class","btn btn-xs btn-primary"),O(rt,"class","w-32 px-2 pb-1 flex flex-col justify-end"),O(a,"class","px-2 py-4 pb-0 flex")},m(Ke,Ye){fe(Ke,e,Ye),He(r,e,null),n=vu(e,t[15].bind(e)),fe(Ke,i,Ye),fe(Ke,a,Ye),L(a,s),L(s,o),L(o,f),L(f,p),L(s,c),L(s,h),L(a,g),ft&&ft.m(a,null),L(a,b),L(a,v),L(v,_),L(_,D),L(D,F),L(v,E),L(v,C),L(a,A),L(a,S),L(S,P),L(P,B),L(B,N),L(N,q),L(P,X),L(P,K),L(K,U),L(U,R),L(K,V),L(K,Q),L(Q,ae),L(K,se),L(K,he),L(he,Ce),L(K,Be),L(K,Fe),L(Fe,je),L(K,Ue),L(K,Ve),L(Ve,ot),L(a,Dt),L(a,rt),L(rt,it),L(it,St),nt=!0,ht||(lt=[be(h,"change",t[11]),be(C,"change",t[10]),be(U,"click",t[16]),be(Q,"click",t[17]),be(he,"click",t[18]),be(Fe,"click",t[19]),be(Ve,"click",t[20]),be(it,"click",t[14])],ht=!0)},p(Ke,Ye){const Ee={};Ye&8&&(Ee.dimensions=Ke[3]),Ye&256&&(Ee.center=Ke[8]),r.$set(Ee),(!nt||Ye&16&&d!==(d=Ke[4].embedExponentialScaling))&&(h.checked=d),Ke[4].embedExponentialScaling?ft?ft.p(Ke,Ye):(ft=Pd(Ke),ft.c(),ft.m(a,b)):ft&&(ft.d(1),ft=null),(!nt||Ye&512)&&(C.value=Ke[9]),(!nt||Ye&4)&&O(C,"max",Ke[2]),(!nt||Ye&16&&z!==(z=(Ke[4].embedClusters||0)===0?"btn btn-xs btn-active":"btn btn-xs"))&&O(U,"class",z),(!nt||Ye&16)&&Ft(Q,"btn-active",Ke[4].embedClusters===2),(!nt||Ye&16)&&Ft(Q,"btn-disabled",Object.keys(Ke[4].embeddings).length<2),(!nt||Ye&16)&&Ft(he,"btn-active",Ke[4].embedClusters===4),(!nt||Ye&16)&&Ft(he,"btn-disabled",Object.keys(Ke[4].embeddings).length<4),(!nt||Ye&16)&&Ft(Fe,"btn-active",Ke[4].embedClusters===6),(!nt||Ye&16)&&Ft(Fe,"btn-disabled",Object.keys(Ke[4].embeddings).length<6),(!nt||Ye&16)&&Ft(Ve,"btn-active",Ke[4].embedClusters===8),(!nt||Ye&16)&&Ft(Ve,"btn-disabled",Object.keys(Ke[4].embeddings).length<8)},i(Ke){nt||(_e(r.$$.fragment,Ke),nt=!0)},o(Ke){we(r.$$.fragment,Ke),nt=!1},d(Ke){Ke&&k(e),$e(r),n(),Ke&&k(i),Ke&&k(a),ft&&ft.d(),ht=!1,rr(lt)}}}function Pd(t){let e,r,n,i,a,s,o,f,p;return{c(){e=Y("div"),r=Y("label"),n=Y("span"),i=ke("Scaling Power"),a=Me(),s=Y("input"),this.h()},l(c){e=Z(c,"DIV",{class:!0});var h=H(e);r=Z(h,"LABEL",{class:!0});var d=H(r);n=Z(d,"SPAN",{class:!0});var g=H(n);i=Ie(g,"Scaling Power"),g.forEach(k),d.forEach(k),a=Pe(h),s=Z(h,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),h.forEach(k),this.h()},h(){O(n,"class","label-text"),O(r,"class","label"),s.value=o=t[4].embedWeightScaling,O(s,"type","range"),O(s,"min","0.5"),O(s,"max","3"),O(s,"step","0.1"),O(s,"class","range range-sm"),O(e,"class","w-full px-2")},m(c,h){fe(c,e,h),L(e,r),L(r,n),L(n,i),L(e,a),L(e,s),f||(p=be(s,"change",t[12]),f=!0)},p(c,h){h&16&&o!==(o=c[4].embedWeightScaling)&&(s.value=o)},d(c){c&&k(e),f=!1,p()}}}function U3(t){let e,r,n,i,a,s;return{c(){e=Y("div"),r=Y("div"),n=Y("div"),i=Y("progress"),this.h()},l(o){e=Z(o,"DIV",{class:!0});var f=H(e);r=Z(f,"DIV",{class:!0});var p=H(r);n=Z(p,"DIV",{class:!0});var c=H(n);i=Z(c,"PROGRESS",{class:!0,max:!0}),H(i).forEach(k),c.forEach(k),p.forEach(k),f.forEach(k),this.h()},h(){O(i,"class","progress progress-primary w-56"),i.value=a=Object.keys(t[7]).length,O(i,"max",s=Object.keys(t[4].weightedPrompts).length),O(n,"class","h-20 w-52"),O(r,"class","flex flex-col justify-center"),O(e,"class","w-full h-full flex justify-center")},m(o,f){fe(o,e,f),L(e,r),L(r,n),L(n,i)},p(o,f){f&128&&a!==(a=Object.keys(o[7]).length)&&(i.value=a),f&16&&s!==(s=Object.keys(o[4].weightedPrompts).length)&&O(i,"max",s)},i:Se,o:Se,d(o){o&&k(e)}}}function V3(t){let e,r,n,i;const a=[x3,N3],s=[];function o(f,p){return f[5]?1:0}return e=o(t),r=s[e]=a[e](t),{c(){r.c(),n=Tt()},l(f){r.l(f),n=Tt()},m(f,p){s[e].m(f,p),fe(f,n,p),i=!0},p(f,[p]){let c=e;e=o(f),e===c?s[e].p(f,p):(pr(),we(s[c],1,1,()=>{s[c]=null}),vr(),r=s[e],r?r.p(f,p):(r=s[e]=a[e](f),r.c()),_e(r,1),r.m(n.parentNode,n))},i(f){i||(_e(r),i=!0)},o(f){we(r),i=!1},d(f){s[e].d(f),f&&k(n)}}}function j3(t){return t<2?0:t<4?2:t<6?4:t<8?6:8}function q3(t){return!t.embeddings||!t.embedClusterSets||Object.entries(t.embeddings).length!==Object.entries(t.weightedPrompts).length||(t.lastPromptChange||0)>(t.lastEmbeddingChange||0)}function z3(t,e,r){let n,i,a,s,o,f,p;tt(t,Br,K=>r(4,o=K)),tt(t,W1,K=>r(21,f=K)),tt(t,Gf,K=>r(5,p=K));let c=0,h=0,d=null,g={};function b(K){const{target:U}=K;if(!U)return;const R=U;if(!R.value)return;const z=parseInt(R.value);z>0&&z<=n&&Pt.update({...o,embedPromptLimit:z})}function v(){Pt.update({...o,embedExponentialScaling:!o.embedExponentialScaling})}function _(K){const{target:U}=K;if(!U)return;const R=U;if(!R.value)return;const z=parseInt(R.value);Pt.update({...o,embedWeightScaling:z})}function D(K){[0,2,4,6,8].indexOf(K)!==-1&&Pt.update({...o,embedClusters:K})}function F(K){let U=new ZF({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:5e3,metric:"euclidean"});const R=Object.keys(K),z=Object.values(K);U.init({data:z,type:"dense"}),U.run();let Q=U.getOutputScaled().map(([se,he])=>[(se+1)/2,(he+1)/2]);return R.reduce((se,he,Ce)=>(se[he]=Q[Ce],se),{})}function E(K,U){return new _f.KMEANS().run(K,U)}async function C(){Pt.update({...o,scaledEmbedMappings:F(o.embeddings)})}async function A(){if(console.log("fetching embeddings"),!p||!o.weightedPrompts)return;const K=Object.entries(o.weightedPrompts).map(([he,Ce])=>[he,Ce.text]),U=Vs(p);r(7,g={});for(let he of K){const Ce=await P3(U,he[1],f);r(7,g[he[0]]=Ce.data.data[0].embedding,g)}let R=Object.entries(g).sort((he,Ce)=>he[0]-Ce[0]);const z=he=>new Array(he).fill(null).map(()=>[]);console.log("clustering embeddings");const V=R.length>=2?E(R.map(he=>he[1]),2):[R.map(he=>he[0])];console.log("set of 2 complete");const Q=R.length>=4?E(R.map(he=>he[1]),4):V;console.log("set of 4 complete");const ae=R.length>=6?E(R.map(he=>he[1]),6):Q;console.log("set of 6 complete");const se=R.length>=8?E(R.map(he=>he[1]),8):ae;console.log("set of 8 complete"),Pt.update({...o,embeddings:g,embedClusterSets:{2:[...V,...z(2-V.length)],4:[...Q,...z(4-Q.length)],6:[...ae,...z(6-ae.length)],8:[...se,...z(8-se.length)]},lastEmbeddingChange:Date.now(),scaledEmbedMappings:F(g)}),console.log("embeddings complete")}function S(){c=this.clientWidth,h=this.clientHeight,r(0,c),r(1,h)}const P=()=>D(0),B=()=>D(2),N=()=>D(4),q=()=>D(6),X=()=>D(8);return t.$$.update=()=>{t.$$.dirty&16&&r(2,n=Object.keys(o.weightedPrompts||{}).length),t.$$.dirty&20&&r(9,i=o.embedPromptLimit||n),t.$$.dirty&3&&r(3,a=[c||250,h||250]),t.$$.dirty&8&&r(8,s=_u(a)),t.$$.dirty&16&&o.embeddings&&Object.keys(o.embeddings).length<o.embedClusters&&D(j3(Object.keys(o.embeddings).length)),t.$$.dirty&48&&p&&q3(o)&&r(6,d=A())},[c,h,n,a,o,p,d,g,s,i,b,v,_,D,C,S,P,B,N,q,X]}class W3 extends at{constructor(e){super(),ut(this,e,z3,V3,st,{})}}let fs;const H3=new Uint8Array(16);function $3(){if(!fs&&(fs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!fs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fs(H3)}const kr=[];for(let t=0;t<256;++t)kr.push((t+256).toString(16).slice(1));function G3(t,e=0){return(kr[t[e+0]]+kr[t[e+1]]+kr[t[e+2]]+kr[t[e+3]]+"-"+kr[t[e+4]]+kr[t[e+5]]+"-"+kr[t[e+6]]+kr[t[e+7]]+"-"+kr[t[e+8]]+kr[t[e+9]]+"-"+kr[t[e+10]]+kr[t[e+11]]+kr[t[e+12]]+kr[t[e+13]]+kr[t[e+14]]+kr[t[e+15]]).toLowerCase()}const K3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Td={randomUUID:K3};function vo(t,e,r){if(Td.randomUUID&&!e&&!t)return Td.randomUUID();t=t||{};const n=t.random||(t.rng||$3)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return G3(n)}const cs="showZeroPrompts";function Y3(){const t=Sr(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[cs]?JSON.parse(localStorage[cs]):!1),{subscribe:e,update:a=>{i&&(localStorage[cs]=JSON.stringify(!!a),r(!!a))},get:()=>bt(t),delete:()=>{i&&(delete localStorage[cs],r(!1))}}}const Cf=Y3(),Kf=jr(Cf,t=>bt(Cf)),hs="useWeightOrdering";function Z3(){const t=Sr(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[hs]?JSON.parse(localStorage[hs]):!1),{subscribe:e,update:a=>{i&&(localStorage[hs]=JSON.stringify(!!a),r(!!a))},get:()=>bt(t),delete:()=>{i&&(delete localStorage[hs],r(!1))}}}const Ff=Z3(),Yf=jr(Ff,t=>bt(Ff));var Sf=function(t,e){return Sf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Sf(t,e)};function Zf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Sf(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Bf,Jf=function(){function t(){}return t._xfnv1a=function(e){for(var r=2166136261,n=0;n<e.length;n++)r=Math.imul(r^e.charCodeAt(n),16777619);return function(){return r+=r<<13,r^=r>>>7,r+=r<<3,r^=r>>>17,(r+=r<<5)>>>0}},t}(),J3=function(t){function e(r){var n=t.call(this)||this;return n.a=e._xfnv1a(r)(),n}return Zf(e,t),e.prototype.next=function(){var r=this.a+=1831565813;return r=Math.imul(r^r>>>15,1|r),(((r^=r+Math.imul(r^r>>>7,61|r))^r>>>14)>>>0)/4294967296},e}(Jf),Q3=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Zf(e,t),e.prototype.next=function(){this.a>>>=0,this.b>>>=0,this.c>>>=0,this.d>>>=0;var r=this.a+this.b|0;return this.a=this.b^this.b>>>9,this.b=this.c+(this.c<<3)|0,this.c=this.c<<21|this.c>>>11,this.d=this.d+1|0,r=r+this.d|0,this.c=this.c+r|0,(r>>>0)/4294967296},e}(Jf),X3=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Zf(e,t),e.prototype.next=function(){var r=this.b<<9,n=5*this.a;return n=n<<7|9*(n>>>25),this.c^=this.a,this.d^=this.b,this.b^=this.c,this.a^=this.d,this.c^=r,this.d=this.d<<11|this.d>>>21,(n>>>0)/4294967296},e}(Jf);(function(t){t.sfc32="sfc32",t.mulberry32="mulberry32",t.xoshiro128ss="xoshiro128ss"})(Bf||(Bf={}));var e5=function(){function t(e,r){r===void 0&&(r=Bf.sfc32),this.str=e,this.prng=r,this.generator=this._initializeGenerator()}return t.prototype.next=function(){return this.generator.next()},t.prototype._initializeGenerator=function(){if(function(r){return r===null}(e=this.str)||function(r){return r===void 0}(e))return this.wrap();var e;switch(this.prng){case"sfc32":return new Q3(this.str);case"mulberry32":return new J3(this.str);case"xoshiro128ss":return new X3(this.str);default:return this.wrap()}},t.prototype.wrap=function(){return{next:function(){return Math.random()}}},t}();const Ql="slotSet";function t5(){const t=Sr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,s)=>{if(s.startsWith(Ql)){const o=s.split("_")[1];a[o]=JSON.parse(localStorage[s])}return a},{})||{}),{subscribe:e,update:(a,s)=>{const o=bt(t),p={...o[a]||{},...s};i&&(localStorage[`${Ql}_${a}`]=JSON.stringify(p));const c={...o,[a]:p};r(c)},get:a=>bt(t)[a],getAll:()=>bt(t),delete:a=>{i&&delete localStorage[`${Ql}_${a}`];const s={...bt(t)};delete s[a],r(s)}}}const Fi=t5(),r5=jr(Fi,t=>bt(Fi));function kd(){return(Math.random()*1e6).toFixed(0)}function n5(){const t=Sr(kd()),{subscribe:e,set:r}=t;return{subscribe:e,get:()=>bt(t),shuffle:()=>{r(kd())}}}const Ca=n5(),Qf=jr(Ca,t=>bt(Ca));function qs(t){let e=t.replace(/\s+/g,"_");return e=e.toUpperCase(),"$"+e}function Id(t){const e=t.length>0&&t.length<32,r=/^[a-zA-Z0-9 ]+$/.test(t),n=/^[a-zA-Z]/.test(t),i=/[a-zA-Z0-9]$/.test(t);return e&&r&&n&&i}function i5(){const t=Fi.getAll();return Object.values(t).reduce((r,n)=>{const i=qs(n.name);return i&&(r[i]=[...n.values]),r},{})}function a5(t,e){const r=new e5(e);return Object.entries(t).reduce((i,[a,s])=>(i[a]=[...s].sort(()=>r.next()-.5),i),{})}function du(t,e){let r=a5(i5(),e),n=t;for(const[i,a]of Object.entries(r)){if(a.length===0)continue;let s=0;for(;n.includes(i);)s>=a.length&&(s=0),n=n.replace(i,a[s]),s++}return n}function u5(t){const e=[],r=/((?:[^:]+|:(?!:))+)(?:::(\d+(?:\.\d+)?))?(?=\s|$)/g;let n;for(;(n=r.exec(t))!==null;){const i=n[1].trim(),a=n[2]?parseFloat(n[2]):1;i&&e.push([i,a])}return e}function Xl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=t.length-1;let r=t;for(;r[e]===",";)r=r.slice(0,e);return r}function ef(t){if(typeof t!="string")throw new Error("Input must be a string");const e=["-","#","*","•","◦",">","<","+","^","~","(",")","[","]","{","}"];let r=t.trim();for(;e.includes(r[0]);)r=r.slice(1).trim();return/^\d+(\.|\))\s/.test(r)&&(r=r.replace(/^\d+(\.|\))\s/,"")),r}function zs(t){if(t=t.replace(/^\n+|\n+$/g,""),t.includes("::"))return u5(t);if(t.includes(`
`))return t.split(`
`).map(a=>ef(Xl(a))).filter(a=>a.length>0).map(a=>[a,1]);const e=t.match(/[^.!?]+[.!?]+/g)||[],r=e.length,n=t.split(",").map(a=>ef(Xl(a))).filter(a=>a.length>0),i=n.length-1;return r>i?e.map(a=>ef(Xl(a))).filter(a=>a.length>0).map(a=>[a,1]):n.map(a=>[a,1])}function Ws(t,e,r){let n=Object.entries(t.weightedPrompts);return e&&(n=n.sort((i,a)=>Mi(t,parseInt(a[0]))-Mi(t,parseInt(i[0])))),r||(n=n.filter(i=>r||Mi(t,parseInt(i[0])))),n}function s5(t){return t.trim().endsWith(".")}function o5(t){let e="",r=[];return t.forEach((n,i)=>{s5(n)?(r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+". ",r=[]),e+=n+" "):r.push(n.trim())}),r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+"."),e.trim()}function Of(t,e,r,n,i){if(r)return Ws(t,n,i).map(([s,o],f)=>`${du(o.text,`${e}${s}${f}`)}::${Mi(t,parseInt(s))}`).join(" ");const a=Ws(t,n,i).map(([s,o],f)=>du(o.text,`${e}${s}${f}`));return o5(a)}function Nd(t,e,r){const n=t.slice();return n[4]=e[r][0],n[5]=e[r][1],n[7]=r,n}function xd(t,e){let r,n=du(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"",i,a,s,o=Mi(e[0],parseInt(e[4]))+"",f,p,c;return{key:t,first:null,c(){r=Y("span"),i=ke(n),a=ke("::"),s=Y("b"),f=ke(o),p=Me(),this.h()},l(h){r=Z(h,"SPAN",{style:!0});var d=H(r);i=Ie(d,n),a=Ie(d,"::"),s=Z(d,"B",{});var g=H(s);f=Ie(g,o),p=Pe(g),g.forEach(k),d.forEach(k),this.h()},h(){O(r,"style",c=`color: rgba(255,255,255,${Math.max(.25,N0(e[0],parseInt(e[4])))});`),this.first=r},m(h,d){fe(h,r,d),L(r,i),L(r,a),L(r,s),L(s,f),L(s,p)},p(h,d){e=h,d&15&&n!==(n=du(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"")&&Fr(i,n),d&7&&o!==(o=Mi(e[0],parseInt(e[4]))+"")&&Fr(f,o),d&7&&c!==(c=`color: rgba(255,255,255,${Math.max(.25,N0(e[0],parseInt(e[4])))});`)&&O(r,"style",c)},d(h){h&&k(r)}}}function l5(t){let e,r,n=[],i=new Map,a=Ws(t[0],t[1],t[2]);const s=o=>o[4];for(let o=0;o<a.length;o+=1){let f=Nd(t,a,o),p=s(f);i.set(p,n[o]=xd(p,f))}return{c(){e=Y("div"),r=Y("p");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=Z(o,"DIV",{class:!0});var f=H(e);r=Z(f,"P",{class:!0});var p=H(r);for(let c=0;c<n.length;c+=1)n[c].l(p);p.forEach(k),f.forEach(k),this.h()},h(){O(r,"class","text-sm select-none"),O(e,"class","overflow-y-auto h-full")},m(o,f){fe(o,e,f),L(e,r);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(r,null)},p(o,[f]){f&15&&(a=Ws(o[0],o[1],o[2]),n=Un(n,f,s,1,o,a,i,r,hi,xd,null,Nd))},i:Se,o:Se,d(o){o&&k(e);for(let f=0;f<n.length;f+=1)n[f].d()}}}function f5(t,e,r){let n,i,a,s;return tt(t,Br,o=>r(0,n=o)),tt(t,Yf,o=>r(1,i=o)),tt(t,Kf,o=>r(2,a=o)),tt(t,Qf,o=>r(3,s=o)),[n,i,a,s]}class c5 extends at{constructor(e){super(),ut(this,e,f5,l5,st,{})}}const ds="outputMultiPrompt";function h5(){const t=Sr(!0),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[ds]?JSON.parse(localStorage[ds]):!1),{subscribe:e,update:a=>{i&&(localStorage[ds]=JSON.stringify(!!a),r(!!a))},get:()=>bt(t),delete:()=>{i&&(delete localStorage[ds],r(!0))}}}const Mf=h5(),H1=jr(Mf,t=>bt(Mf));function d5(t){let e,r,n,i=Of(t[0],t[1],t[2],t[3],t[4])+"",a;return{c(){e=Y("div"),r=Y("p"),n=Y("span"),a=ke(i),this.h()},l(s){e=Z(s,"DIV",{class:!0});var o=H(e);r=Z(o,"P",{class:!0});var f=H(r);n=Z(f,"SPAN",{style:!0});var p=H(n);a=Ie(p,i),p.forEach(k),f.forEach(k),o.forEach(k),this.h()},h(){O(n,"style","color: rgba(255,255,255,0.75});"),O(r,"class","text-sm select-none"),O(e,"class","overflow-y-auto h-full")},m(s,o){fe(s,e,o),L(e,r),L(r,n),L(n,a)},p(s,[o]){o&31&&i!==(i=Of(s[0],s[1],s[2],s[3],s[4])+"")&&Fr(a,i)},i:Se,o:Se,d(s){s&&k(e)}}}function p5(t,e,r){let n,i,a,s,o;return tt(t,Br,f=>r(0,n=f)),tt(t,Qf,f=>r(1,i=f)),tt(t,H1,f=>r(2,a=f)),tt(t,Yf,f=>r(3,s=f)),tt(t,Kf,f=>r(4,o=f)),[n,i,a,s,o]}class v5 extends at{constructor(e){super(),ut(this,e,p5,d5,st,{})}}const iu="promptHistory";function g5(){const t=Sr([]),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",a=(i&&JSON.parse(localStorage[iu]||"[]")||[]).map(s=>({...s,date:new Date(s.date)}));return r(a),{subscribe:e,add:s=>{if(!s||!i)return;const f=[...bt(t),s];localStorage[iu]=JSON.stringify(f),r(f)},update:s=>{!s||!i||(localStorage[iu]=s,r(s))},get:()=>bt(t),remove:s=>{if(!i)return;const f=bt(t).filter(p=>p.id!==s);localStorage[iu]=JSON.stringify(f),r(f)},delete:()=>{i&&(delete localStorage[iu],r([]))}}}const Xf=g5();function m5(t){let e,r;return e=new v5({}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function _5(t){let e,r;return e=new c5({}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function b5(t){let e,r,n,i,a,s,o,f,p,c,h=t[2]?"Multi":"Single",d,g,b,v,_,D,F,E,C,A,S,P,B,N,q,X,K,U;const R=[_5,m5],z=[];function V(Q,ae){return Q[2]?0:1}return r=V(t),n=z[r]=R[r](t),{c(){e=Y("div"),n.c(),i=Me(),a=Y("div"),s=Y("div"),o=Y("input"),f=Me(),p=Y("label"),c=Y("span"),d=ke(h),g=Me(),b=Y("div"),v=Y("input"),_=Me(),D=Y("label"),F=Y("span"),E=ke("Use Weight Ordering"),C=Me(),A=Y("div"),S=Y("input"),P=Me(),B=Y("label"),N=Y("span"),q=ke("Include Zero Weights"),this.h()},l(Q){e=Z(Q,"DIV",{class:!0});var ae=H(e);n.l(ae),ae.forEach(k),i=Pe(Q),a=Z(Q,"DIV",{class:!0});var se=H(a);s=Z(se,"DIV",{class:!0});var he=H(s);o=Z(he,"INPUT",{type:!0,class:!0}),f=Pe(he),p=Z(he,"LABEL",{class:!0});var Ce=H(p);c=Z(Ce,"SPAN",{class:!0});var Be=H(c);d=Ie(Be,h),Be.forEach(k),Ce.forEach(k),he.forEach(k),g=Pe(se),b=Z(se,"DIV",{class:!0});var Fe=H(b);v=Z(Fe,"INPUT",{type:!0,class:!0}),_=Pe(Fe),D=Z(Fe,"LABEL",{class:!0});var je=H(D);F=Z(je,"SPAN",{class:!0});var Ue=H(F);E=Ie(Ue,"Use Weight Ordering"),Ue.forEach(k),je.forEach(k),Fe.forEach(k),C=Pe(se),A=Z(se,"DIV",{class:!0});var Ve=H(A);S=Z(Ve,"INPUT",{type:!0,class:!0}),P=Pe(Ve),B=Z(Ve,"LABEL",{class:!0});var ot=H(B);N=Z(ot,"SPAN",{class:!0});var Dt=H(N);q=Ie(Dt,"Include Zero Weights"),Dt.forEach(k),ot.forEach(k),Ve.forEach(k),se.forEach(k),this.h()},h(){O(e,"class","normal-case font-light text-left cursor-copy bg-slate-900 rounded-t-md rounded-br-md p-4 w-full h-28 active:bg-slate-950 hover:bg-slate-800"),o.checked=t[2],O(o,"type","checkbox"),O(o,"class","toggle toggle-sm mt-2 mr-2"),O(c,"class","label-text"),O(p,"class","label w-10"),O(s,"class","mx-2 flex"),v.checked=t[1],O(v,"type","checkbox"),O(v,"class","toggle toggle-sm mt-2 mr-2"),O(F,"class","label-text"),O(D,"class","label"),O(b,"class","mx-2 flex"),S.checked=t[0],O(S,"type","checkbox"),O(S,"class","toggle toggle-sm mt-2 mr-2"),O(N,"class","label-text"),O(B,"class","label"),O(A,"class","mx-2 flex"),O(a,"class","w-full rounded-b-md flex pl-2 justify-start bg-slate-900")},m(Q,ae){fe(Q,e,ae),z[r].m(e,null),fe(Q,i,ae),fe(Q,a,ae),L(a,s),L(s,o),L(s,f),L(s,p),L(p,c),L(c,d),L(a,g),L(a,b),L(b,v),L(b,_),L(b,D),L(D,F),L(F,E),L(a,C),L(a,A),L(A,S),L(A,P),L(A,B),L(B,N),L(N,q),X=!0,K||(U=[be(e,"click",t[3]),be(o,"change",t[4]),be(v,"change",t[5]),be(S,"change",t[6])],K=!0)},p(Q,[ae]){let se=r;r=V(Q),r!==se&&(pr(),we(z[se],1,1,()=>{z[se]=null}),vr(),n=z[r],n||(n=z[r]=R[r](Q),n.c()),_e(n,1),n.m(e,null)),(!X||ae&4)&&(o.checked=Q[2]),(!X||ae&4)&&h!==(h=Q[2]?"Multi":"Single")&&Fr(d,h),(!X||ae&2)&&(v.checked=Q[1]),(!X||ae&1)&&(S.checked=Q[0])},i(Q){X||(_e(n),X=!0)},o(Q){we(n),X=!1},d(Q){Q&&k(e),z[r].d(),Q&&k(i),Q&&k(a),K=!1,rr(U)}}}function D5(t,e,r){let n,i,a,s,o;tt(t,Kf,d=>r(0,n=d)),tt(t,Yf,d=>r(1,i=d)),tt(t,H1,d=>r(2,a=d)),tt(t,Qf,d=>r(7,s=d)),tt(t,Br,d=>r(8,o=d));function f(){const d=Of(o,s,a,i,n);navigator.clipboard.writeText(d),Ca.shuffle(),Xf.add({id:vo(),prompt:d,date:new Date})}function p(){Mf.update(!a)}function c(){Ff.update(!i)}function h(){Cf.update(!n)}return[n,i,a,f,p,c,h]}class y5 extends at{constructor(e){super(),ut(this,e,D5,b5,st,{})}}function w5(t){let e,r,n,i;return{c(){e=vt("g"),r=vt("circle"),this.h()},l(a){e=gt(a,"g",{});var s=H(e);r=gt(s,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),H(r).forEach(k),s.forEach(k),this.h()},h(){O(r,"cx",n=t[0][0]),O(r,"cy",i=t[0][1]),O(r,"r",t[1]),O(r,"stroke",t[3]),O(r,"stroke-width",t[2]),Yt(r,"fill","rgba(0,0,0,0)")},m(a,s){fe(a,e,s),L(e,r)},p(a,[s]){s&1&&n!==(n=a[0][0])&&O(r,"cx",n),s&1&&i!==(i=a[0][1])&&O(r,"cy",i),s&2&&O(r,"r",a[1]),s&8&&O(r,"stroke",a[3]),s&4&&O(r,"stroke-width",a[2])},i:Se,o:Se,d(a){a&&k(e)}}}function A5(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=20}=e,{color:s="rgba(46,67,101, 0.4)"}=e;return t.$$set=o=>{"xy"in o&&r(0,n=o.xy),"radius"in o&&r(1,i=o.radius),"stroke"in o&&r(2,a=o.stroke),"color"in o&&r(3,s=o.color)},[n,i,a,s]}class E5 extends at{constructor(e){super(),ut(this,e,A5,w5,st,{xy:0,radius:1,stroke:2,color:3})}}function C5(t){let e,r,n,i,a;return{c(){e=vt("polygon"),this.h()},l(s){e=gt(s,"polygon",{points:!0,"stroke-width":!0,fill:!0,transform:!0}),H(e).forEach(k),this.h()},h(){O(e,"points",r=`${t[7][0]},${t[7][1]} ${t[9][0]},${t[9][1]} ${t[8][0]},${t[8][1]} ${t[6][0]},${t[6][1]} ${t[4][0]},${t[4][1]} ${t[5][0]},${t[5][1]}`),O(e,"stroke-width",4),O(e,"fill",t[3]),O(e,"transform",n=`rotate(${t[1].toFixed(2)} ${t[0][0]} ${t[0][1]}) rotate(${t[2]?"180":"0"} ${(t[7][0]+t[6][0])/2} ${(t[7][1]+t[6][1])/2})`)},m(s,o){fe(s,e,o),i||(a=[be(e,"mouseover",t[10]),be(e,"mouseout",t[11]),be(e,"mousedown",t[12]),be(e,"touchstart",t[12])],i=!0)},p(s,[o]){o&1008&&r!==(r=`${s[7][0]},${s[7][1]} ${s[9][0]},${s[9][1]} ${s[8][0]},${s[8][1]} ${s[6][0]},${s[6][1]} ${s[4][0]},${s[4][1]} ${s[5][0]},${s[5][1]}`)&&O(e,"points",r),o&8&&O(e,"fill",s[3]),o&199&&n!==(n=`rotate(${s[1].toFixed(2)} ${s[0][0]} ${s[0][1]}) rotate(${s[2]?"180":"0"} ${(s[7][0]+s[6][0])/2} ${(s[7][1]+s[6][1])/2})`)&&O(e,"transform",n)},i:Se,o:Se,d(s){s&&k(e),i=!1,rr(a)}}}function F5(t,e,r){let n,i,a,s,o,f,{xy:p=[500,500]}=e,{radius:c=400}=e,{stroke:h=20}=e,{color:d="rgba(46,67,101, 0.4)"}=e,{hoverColor:g="white"}=e,{angle:b=0}=e,{handleMouseDown:v=A=>{}}=e,{reverse:_=!1}=e,D=d;function F(){r(3,D=g)}function E(){r(3,D=d)}function C(A){v(A)}return t.$$set=A=>{"xy"in A&&r(0,p=A.xy),"radius"in A&&r(13,c=A.radius),"stroke"in A&&r(14,h=A.stroke),"color"in A&&r(15,d=A.color),"hoverColor"in A&&r(16,g=A.hoverColor),"angle"in A&&r(1,b=A.angle),"handleMouseDown"in A&&r(17,v=A.handleMouseDown),"reverse"in A&&r(2,_=A.reverse)},t.$$.update=()=>{t.$$.dirty&24577&&r(9,n=Rr(p,[-4,1],c-h/2)),t.$$.dirty&24577&&r(8,i=Rr(p,[1,1],c-h/2)),t.$$.dirty&8193&&r(7,a=Rr(p,[0,1],c)),t.$$.dirty&8193&&r(6,s=Rr(p,[4,1],c)),t.$$.dirty&24577&&r(5,o=Rr(p,[-3,1],c+h/2)),t.$$.dirty&24577&&r(4,f=Rr(p,[1,1],c+h/2))},[p,b,_,D,f,o,s,a,i,n,F,E,C,c,h,d,g,v]}class S5 extends at{constructor(e){super(),ut(this,e,F5,C5,st,{xy:0,radius:13,stroke:14,color:15,hoverColor:16,angle:1,handleMouseDown:17,reverse:2})}}function Rd(t,e,r){const n=t.slice();return n[19]=e[r][0],n[20]=e[r][1],n}function Ld(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,a;e=new Lf({props:{xy:t[0],radius:t[1]}});let s=Object.entries(t[5].weightedPrompts),o=[];for(let c=0;c<s.length;c+=1)o[c]=Ud(Rd(t,s,c));const f=c=>we(o[c],1,1,()=>{o[c]=null});let p=n&&Vd(t);return{c(){ze(e.$$.fragment);for(let c=0;c<o.length;c+=1)o[c].c();r=Tt(),p&&p.c(),i=Tt()},l(c){We(e.$$.fragment,c);for(let h=0;h<o.length;h+=1)o[h].l(c);r=Tt(),p&&p.l(c),i=Tt()},m(c,h){He(e,c,h);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(c,h);fe(c,r,h),p&&p.m(c,h),fe(c,i,h),a=!0},p(c,h){const d={};if(h&1&&(d.xy=c[0]),h&2&&(d.radius=c[1]),e.$set(d),h&1660){s=Object.entries(c[5].weightedPrompts);let g;for(g=0;g<s.length;g+=1){const b=Rd(c,s,g);o[g]?(o[g].p(b,h),_e(o[g],1)):(o[g]=Ud(b),o[g].c(),_e(o[g],1),o[g].m(r.parentNode,r))}for(pr(),g=s.length;g<o.length;g+=1)f(g);vr()}h&32&&(n=Object.entries(c[5].weightedPrompts).length>0),n?p?(p.p(c,h),h&32&&_e(p,1)):(p=Vd(c),p.c(),_e(p,1),p.m(i.parentNode,i)):p&&(pr(),we(p,1,1,()=>{p=null}),vr())},i(c){if(!a){_e(e.$$.fragment,c);for(let h=0;h<s.length;h+=1)_e(o[h]);_e(p),a=!0}},o(c){we(e.$$.fragment,c),o=o.filter(Boolean);for(let h=0;h<o.length;h+=1)we(o[h]);we(p),a=!1},d(c){$e(e,c),pu(o,c),c&&k(r),p&&p.d(c),c&&k(i)}}}function Ud(t){let e,r,n;e=new mu({props:{xy:t[10](t[6][t[19]].xy,Vr(t[3],t[20].text.length,t[4])),color:`rgba(255,255,255,${Lr(t[6][t[19]].unitWeight)}`,wh:Vr(t[3],t[20].text.length,t[4]),fontSize:t[4],text:t[20].text}});function i(){return t[13](t[19])}return r=new Fa({props:{xy:t[6][t[19]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:i}}),{c(){ze(e.$$.fragment),ze(r.$$.fragment)},l(a){We(e.$$.fragment,a),We(r.$$.fragment,a)},m(a,s){He(e,a,s),He(r,a,s),n=!0},p(a,s){t=a;const o={};s&120&&(o.xy=t[10](t[6][t[19]].xy,Vr(t[3],t[20].text.length,t[4]))),s&96&&(o.color=`rgba(255,255,255,${Lr(t[6][t[19]].unitWeight)}`),s&56&&(o.wh=Vr(t[3],t[20].text.length,t[4])),s&16&&(o.fontSize=t[4]),s&32&&(o.text=t[20].text),e.$set(o);const f={};s&96&&(f.xy=t[6][t[19]].xy),s&4&&(f.radius=t[2]),s&32&&(f.handleMouseDown=i),r.$set(f)},i(a){n||(_e(e.$$.fragment,a),_e(r.$$.fragment,a),n=!0)},o(a){we(e.$$.fragment,a),we(r.$$.fragment,a),n=!1},d(a){$e(e,a),$e(r,a)}}}function Vd(t){let e,r,n;return e=new E5({props:{xy:t[0],radius:t[7],stroke:30}}),r=new S5({props:{reverse:t[5].ringReverse,xy:t[0],radius:t[7],stroke:30,angle:t[5].ringStartAngle,color:"rgba(136,157,191, 1)",handleMouseDown:t[14]}}),{c(){ze(e.$$.fragment),ze(r.$$.fragment)},l(i){We(e.$$.fragment,i),We(r.$$.fragment,i)},m(i,a){He(e,i,a),He(r,i,a),n=!0},p(i,a){const s={};a&1&&(s.xy=i[0]),a&128&&(s.radius=i[7]),e.$set(s);const o={};a&32&&(o.reverse=i[5].ringReverse),a&1&&(o.xy=i[0]),a&128&&(o.radius=i[7]),a&32&&(o.angle=i[5].ringStartAngle),r.$set(o)},i(i){n||(_e(e.$$.fragment,i),_e(r.$$.fragment,i),n=!0)},o(i){we(e.$$.fragment,i),we(r.$$.fragment,i),n=!1},d(i){$e(e,i),$e(r,i)}}}function B5(t){let e,r,n,i,a=t[6]&&t[5].weightedPrompts&&Ld(t);return{c(){e=vt("svg"),a&&a.c(),this.h()},l(s){e=gt(s,"svg",{id:!0,class:!0});var o=H(e);a&&a.l(o),o.forEach(k),this.h()},h(){O(e,"id","svg"),O(e,"class","w-full h-full")},m(s,o){fe(s,e,o),a&&a.m(e,null),r=!0,n||(i=[be(e,"mousemove",t[11]),be(e,"touchmove",t[11]),be(e,"mouseup",t[8]),be(e,"touchend",t[8]),be(e,"dblclick",t[12])],n=!0)},p(s,[o]){s[6]&&s[5].weightedPrompts?a?(a.p(s,o),o&96&&_e(a,1)):(a=Ld(s),a.c(),_e(a,1),a.m(e,null)):a&&(pr(),we(a,1,1,()=>{a=null}),vr())},i(s){r||(_e(a),r=!0)},o(s){we(a),r=!1},d(s){s&&k(e),a&&a.d(),n=!1,rr(i)}}}function jd(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const s=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=s,r},e):null}function O5(t,e,r){let n,i,a;tt(t,Br,S=>r(5,a=S));let{center:s=[450,450]}=e,{radius:o=250}=e,{pointRadius:f=10}=e,{textWidth:p=150}=e,{fontSize:c=13}=e,h=[0,0],d=null;function g(S){d=null}function b(S){d=S}function v(S,P){let B=Rn(S,s,o)[0]-180;B<0&&(B+=360);const N=Uf(_u(P),B);return xr(S,N)}function _(S){console.log(o,n);const P=Wr(Rn(cu(S,s,n),s,n)[0]);r(6,i=E(a.weightedPrompts,s,o,a.ringWeightScaling,a.ringExponentialScaling,P,a.ringAngles))}function D(S){if(h=Kn(S),d==="main")_(h);else if(d){const P={...a.weightedPrompts[d]},B=cu(h,s,o),N=Rn(B,s,o)[0],q={...a.ringAngles};q[P.id]=N;const X={...a.weightedPrompts};X[d]=P,r(6,i=E(X,s,o,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,q))}}function F(S){h=Kn(S),_(h)}function E(S,P,B,N,q,X,K){if(!S||!P||!B||!N)return null;let U=Object.entries(S).reduce((z,[V,Q])=>{const se=a.ringReverse?X-K[V]:K[V]-X,he=Wr(se),Ce=Math.pow(1-he/360,q?N:1);return z[V]={angleDifference:he,xy:Rr(P,[K[V],1],B),unitWeight:Ce},z},{});const R={...S};return Object.entries(U).forEach(([z,V])=>{R[z].ringWeight=V.unitWeight}),Pt.update({...a,ringStartAngle:X,weightedPrompts:R,ringAngles:K}),U}const C=S=>b(S),A=()=>b("main");return t.$$set=S=>{"center"in S&&r(0,s=S.center),"radius"in S&&r(1,o=S.radius),"pointRadius"in S&&r(2,f=S.pointRadius),"textWidth"in S&&r(3,p=S.textWidth),"fontSize"in S&&r(4,c=S.fontSize)},t.$$.update=()=>{t.$$.dirty&2&&r(7,n=o-30),t.$$.dirty&32&&Object.keys(a.ringAngles).length!==Object.keys(a.weightedPrompts).length&&Pt.update({...a,ringAngles:jd(a.weightedPrompts,{})}),t.$$.dirty&35&&r(6,i=E(a.weightedPrompts,s,o,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,a.ringAngles||jd(a.weightedPrompts,{})))},[s,o,f,p,c,a,i,n,g,b,v,D,F,C,A]}class M5 extends at{constructor(e){super(),ut(this,e,O5,B5,st,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function qd(t){let e,r,n,i,a,s,o,f;return{c(){e=Y("div"),r=Y("label"),n=Y("span"),i=ke("Scaling Power"),a=Me(),s=Y("input"),this.h()},l(p){e=Z(p,"DIV",{class:!0});var c=H(e);r=Z(c,"LABEL",{class:!0});var h=H(r);n=Z(h,"SPAN",{class:!0});var d=H(n);i=Ie(d,"Scaling Power"),d.forEach(k),h.forEach(k),a=Pe(c),s=Z(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(k),this.h()},h(){O(n,"class","label-text"),O(r,"class","label"),O(s,"type","range"),O(s,"min","0.5"),O(s,"max","5"),O(s,"step","0.1"),O(s,"class","range range-xs"),O(e,"class","w-full px-2")},m(p,c){fe(p,e,c),L(e,r),L(r,n),L(n,i),L(e,a),L(e,s),nn(s,t[0]),o||(f=[be(s,"change",t[7]),be(s,"input",t[7])],o=!0)},p(p,c){c&1&&nn(s,p[0])},d(p){p&&k(e),o=!1,rr(f)}}}function P5(t){let e,r,n,i,a,s,o,f,p,c,h,d,g,b,v,_,D,F,E;r=new M5({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let C=t[1]&&qd(t);return{c(){e=Y("div"),ze(r.$$.fragment),i=Me(),a=Y("div"),s=Y("div"),o=Y("label"),f=Y("span"),p=ke("Exponential Scaling"),c=Me(),h=Y("input"),d=Me(),C&&C.c(),g=Me(),b=Y("div"),v=Y("button"),_=ke("Reverse"),this.h()},l(A){e=Z(A,"DIV",{class:!0});var S=H(e);We(r.$$.fragment,S),S.forEach(k),i=Pe(A),a=Z(A,"DIV",{class:!0});var P=H(a);s=Z(P,"DIV",{class:!0});var B=H(s);o=Z(B,"LABEL",{class:!0});var N=H(o);f=Z(N,"SPAN",{class:!0});var q=H(f);p=Ie(q,"Exponential Scaling"),q.forEach(k),N.forEach(k),c=Pe(B),h=Z(B,"INPUT",{type:!0,class:!0}),B.forEach(k),d=Pe(P),C&&C.l(P),g=Pe(P),b=Z(P,"DIV",{class:!0});var X=H(b);v=Z(X,"BUTTON",{class:!0});var K=H(v);_=Ie(K,"Reverse"),K.forEach(k),X.forEach(k),P.forEach(k),this.h()},h(){O(e,"class","w-full h-full"),Zi(()=>t[5].call(e)),O(f,"class","label-text"),O(o,"class","label"),O(h,"type","checkbox"),O(h,"class","toggle toggle-xs"),O(s,"class","w-52 px-2"),O(v,"class","btn btn-xs btn-primary"),O(b,"class","w-32 px-2 pb-1 flex flex-col justify-end"),O(a,"class","px-2 py-4 pb-0 flex")},m(A,S){fe(A,e,S),He(r,e,null),n=vu(e,t[5].bind(e)),fe(A,i,S),fe(A,a,S),L(a,s),L(s,o),L(o,f),L(f,p),L(s,c),L(s,h),h.checked=t[1],L(a,d),C&&C.m(a,null),L(a,g),L(a,b),L(b,v),L(v,_),D=!0,F||(E=[be(h,"change",t[6]),be(v,"click",t[4])],F=!0)},p(A,[S]){const P={};S&12&&(P.center=[Math.round(A[2]/2),Math.round(A[3]/2)]),S&12&&(P.radius=Math.round(Math.min(A[2],A[3])/2)-150),r.$set(P),S&2&&(h.checked=A[1]),A[1]?C?C.p(A,S):(C=qd(A),C.c(),C.m(a,g)):C&&(C.d(1),C=null)},i(A){D||(_e(r.$$.fragment,A),D=!0)},o(A){we(r.$$.fragment,A),D=!1},d(A){A&&k(e),$e(r),n(),A&&k(i),A&&k(a),C&&C.d(),F=!1,rr(E)}}}function T5(t,e,r){let n;tt(t,Br,d=>r(8,n=d));let i,a,s=n.ringWeightScaling||2,o=kf(n.ringExponentialScaling)?!0:n.ringExponentialScaling;function f(){Pt.update({...Pt.get(),ringReverse:!n.ringReverse})}function p(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function c(){o=this.checked,r(1,o)}function h(){s=Cp(this.value),r(0,s)}return t.$$.update=()=>{t.$$.dirty&3&&Pt.update({...Pt.get(),ringExponentialScaling:o,ringWeightScaling:s})},[s,o,i,a,f,p,c,h]}class k5 extends at{constructor(e){super(),ut(this,e,T5,P5,st,{})}}function zd(t){let e,r;return e=new nC({}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function I5(t){let e,r;return e=new W3({}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function N5(t){let e,r;return e=new k5({}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function x5(t){let e,r;return e=new CC({}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function R5(t){let e,r;return e=new zC({}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function L5(t){let e,r;return e=new kC({}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function U5(t){let e,r,n,i,a,s,o,f,p,c;r=new KE({});let h=(t[0].weightMode===_t.Circle||t[0].weightMode===_t.Pie||t[0].weightMode===_t.Ring)&&zd();const d=[L5,R5,x5,N5,I5],g=[];function b(v,_){return v[0].weightMode===_t.Bars?0:v[0].weightMode===_t.Pie?1:v[0].weightMode===_t.Circle?2:v[0].weightMode===_t.Ring?3:v[0].weightMode===_t.Embed?4:-1}return~(a=b(t))&&(s=g[a]=d[a](t)),p=new y5({}),{c(){e=Y("div"),ze(r.$$.fragment),n=Me(),h&&h.c(),i=Me(),s&&s.c(),o=Me(),f=Y("div"),ze(p.$$.fragment),this.h()},l(v){e=Z(v,"DIV",{class:!0});var _=H(e);We(r.$$.fragment,_),n=Pe(_),h&&h.l(_),_.forEach(k),i=Pe(v),s&&s.l(v),o=Pe(v),f=Z(v,"DIV",{class:!0});var D=H(f);We(p.$$.fragment,D),D.forEach(k),this.h()},h(){O(e,"class","absolute top-0 right-0 z-10"),O(f,"class","h-48 w-full p-4 flex flex-col")},m(v,_){fe(v,e,_),He(r,e,null),L(e,n),h&&h.m(e,null),fe(v,i,_),~a&&g[a].m(v,_),fe(v,o,_),fe(v,f,_),He(p,f,null),c=!0},p(v,[_]){v[0].weightMode===_t.Circle||v[0].weightMode===_t.Pie||v[0].weightMode===_t.Ring?h?_&1&&_e(h,1):(h=zd(),h.c(),_e(h,1),h.m(e,null)):h&&(pr(),we(h,1,1,()=>{h=null}),vr());let D=a;a=b(v),a!==D&&(s&&(pr(),we(g[D],1,1,()=>{g[D]=null}),vr()),~a?(s=g[a],s||(s=g[a]=d[a](v),s.c()),_e(s,1),s.m(o.parentNode,o)):s=null)},i(v){c||(_e(r.$$.fragment,v),_e(h),_e(s),_e(p.$$.fragment,v),c=!0)},o(v){we(r.$$.fragment,v),we(h),we(s),we(p.$$.fragment,v),c=!1},d(v){v&&k(e),$e(r),h&&h.d(),v&&k(i),~a&&g[a].d(v),v&&k(o),v&&k(f),$e(p)}}}function V5(t,e,r){let n;return tt(t,Br,i=>r(0,n=i)),[n]}class j5 extends at{constructor(e){super(),ut(this,e,V5,U5,st,{})}}function q5(t){let e,r,n,i,a;return{c(){e=Y("div"),r=Y("button"),n=ke("Delete History"),this.h()},l(s){e=Z(s,"DIV",{class:!0});var o=H(e);r=Z(o,"BUTTON",{class:!0});var f=H(r);n=Ie(f,"Delete History"),f.forEach(k),o.forEach(k),this.h()},h(){O(r,"class","btn btn-sm btn-error"),O(e,"class","w-full flex justify-end p-2")},m(s,o){fe(s,e,o),L(e,r),L(r,n),i||(a=be(r,"click",t[0]),i=!0)},p:Se,i:Se,o:Se,d(s){s&&k(e),i=!1,a()}}}function z5(t){function e(){Xf.delete()}return[e]}class W5 extends at{constructor(e){super(),ut(this,e,z5,q5,st,{})}}function Wd(t,e,r){const n=t.slice();return n[2]=e[r],n[4]=r,n}function Hd(t,e){let r,n,i=e[2].date+"",a,s,o,f,p=e[2].prompt+"",c,h,d,g;function b(){return e[1](e[2])}return{key:t,first:null,c(){r=Y("tr"),n=Y("td"),a=ke(i),s=Me(),o=Y("td"),f=Y("span"),c=ke(p),h=Me(),this.h()},l(v){r=Z(v,"TR",{});var _=H(r);n=Z(_,"TD",{});var D=H(n);a=Ie(D,i),D.forEach(k),s=Pe(_),o=Z(_,"TD",{class:!0});var F=H(o);f=Z(F,"SPAN",{});var E=H(f);c=Ie(E,p),E.forEach(k),F.forEach(k),h=Pe(_),_.forEach(k),this.h()},h(){O(o,"class","cursor-copy max-w-xl text-ellipsis whitespace-nowrap overflow-hidden select-none hover:text-white"),this.first=r},m(v,_){fe(v,r,_),L(r,n),L(n,a),L(r,s),L(r,o),L(o,f),L(f,c),L(r,h),d||(g=be(o,"click",b),d=!0)},p(v,_){e=v,_&1&&i!==(i=e[2].date+"")&&Fr(a,i),_&1&&p!==(p=e[2].prompt+"")&&Fr(c,p)},d(v){v&&k(r),d=!1,g()}}}function H5(t){let e,r,n,i,a,s,o,f,p,c,h,d,g,b,v=[],_=new Map,D;r=new W5({});let F=t[0];const E=C=>C[4];for(let C=0;C<F.length;C+=1){let A=Wd(t,F,C),S=E(A);_.set(S,v[C]=Hd(S,A))}return{c(){e=Y("div"),ze(r.$$.fragment),n=Me(),i=Y("div"),a=Y("table"),s=Y("thead"),o=Y("tr"),f=Y("th"),p=ke("Date"),c=Me(),h=Y("th"),d=ke("Prompt"),g=Me(),b=Y("tbody");for(let C=0;C<v.length;C+=1)v[C].c();this.h()},l(C){e=Z(C,"DIV",{class:!0});var A=H(e);We(r.$$.fragment,A),A.forEach(k),n=Pe(C),i=Z(C,"DIV",{class:!0});var S=H(i);a=Z(S,"TABLE",{class:!0});var P=H(a);s=Z(P,"THEAD",{});var B=H(s);o=Z(B,"TR",{});var N=H(o);f=Z(N,"TH",{});var q=H(f);p=Ie(q,"Date"),q.forEach(k),c=Pe(N),h=Z(N,"TH",{});var X=H(h);d=Ie(X,"Prompt"),X.forEach(k),N.forEach(k),B.forEach(k),g=Pe(P),b=Z(P,"TBODY",{});var K=H(b);for(let U=0;U<v.length;U+=1)v[U].l(K);K.forEach(k),P.forEach(k),S.forEach(k),this.h()},h(){O(e,"class","absolute top-0 right-0 z-10"),O(a,"class","table w-full"),O(i,"class","w-full p-4 overflow-y-auto")},m(C,A){fe(C,e,A),He(r,e,null),fe(C,n,A),fe(C,i,A),L(i,a),L(a,s),L(s,o),L(o,f),L(f,p),L(o,c),L(o,h),L(h,d),L(a,g),L(a,b);for(let S=0;S<v.length;S+=1)v[S]&&v[S].m(b,null);D=!0},p(C,[A]){A&1&&(F=C[0],v=Un(v,A,E,1,C,F,_,b,hi,Hd,null,Wd))},i(C){D||(_e(r.$$.fragment,C),D=!0)},o(C){we(r.$$.fragment,C),D=!1},d(C){C&&k(e),$e(r),C&&k(n),C&&k(i);for(let A=0;A<v.length;A+=1)v[A].d()}}}function $5(t){navigator.clipboard.writeText(t)}function G5(t,e,r){let n;return tt(t,Xf,a=>r(0,n=a)),[n,a=>$5(a.prompt)]}class K5 extends at{constructor(e){super(),ut(this,e,G5,H5,st,{})}}function $d(t,e,r){const n=t.slice();return n[2]=e[r],n}function Y5(t){let e,r=Array.from(t[0]).sort(),n=[];for(let i=0;i<r.length;i+=1)n[i]=Gd($d(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=Tt()},l(i){for(let a=0;a<n.length;a+=1)n[a].l(i);e=Tt()},m(i,a){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(i,a);fe(i,e,a)},p(i,a){if(a&1){r=Array.from(i[0]).sort();let s;for(s=0;s<r.length;s+=1){const o=$d(i,r,s);n[s]?n[s].p(o,a):(n[s]=Gd(o),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){pu(n,i),i&&k(e)}}}function Z5(t){let e,r;return{c(){e=Y("p"),r=ke("Concepts will appear here when you paste them.")},l(n){e=Z(n,"P",{});var i=H(e);r=Ie(i,"Concepts will appear here when you paste them."),i.forEach(k)},m(n,i){fe(n,e,i),L(e,r)},p:Se,d(n){n&&k(e)}}}function Gd(t){let e,r=t[2]+"",n;return{c(){e=Y("p"),n=ke(r)},l(i){e=Z(i,"P",{});var a=H(e);n=Ie(a,r),a.forEach(k)},m(i,a){fe(i,e,a),L(e,n)},p(i,a){a&1&&r!==(r=i[2]+"")&&Fr(n,r)},d(i){i&&k(e)}}}function J5(t){let e,r,n;function i(o,f){return o[0].size===0?Z5:Y5}let a=i(t),s=a(t);return{c(){e=Y("div"),s.c(),this.h()},l(o){e=Z(o,"DIV",{class:!0});var f=H(e);s.l(f),f.forEach(k),this.h()},h(){O(e,"class","w-full h-full p-4 mt-12 overflow-y-auto")},m(o,f){fe(o,e,f),s.m(e,null),r||(n=be(e,"paste",t[1]),r=!0)},p(o,[f]){a===(a=i(o))&&s?s.p(o,f):(s.d(1),s=a(o),s&&(s.c(),s.m(e,null)))},i:Se,o:Se,d(o){o&&k(e),s.d(),r=!1,n()}}}function Q5(t,e,r){let n=new Set;function i(){console.log("pasted"),navigator.clipboard.readText().then(a=>{const s=zs(a).map(f=>f[0]),o=new Set(n);s.forEach(f=>{o.add(f)}),r(0,n=o)})}return[n,i]}class X5 extends at{constructor(e){super(),ut(this,e,Q5,J5,st,{})}}function e8(t){let e,r,n;return r=new K5({}),{c(){e=Y("div"),ze(r.$$.fragment),this.h()},l(i){e=Z(i,"DIV",{class:!0});var a=H(e);We(r.$$.fragment,a),a.forEach(k),this.h()},h(){O(e,"class","mt-10")},m(i,a){fe(i,e,a),He(r,e,null),n=!0},i(i){n||(_e(r.$$.fragment,i),n=!0)},o(i){we(r.$$.fragment,i),n=!1},d(i){i&&k(e),$e(r)}}}function t8(t){let e,r,n;return r=new X5({}),{c(){e=Y("div"),ze(r.$$.fragment),this.h()},l(i){e=Z(i,"DIV",{class:!0});var a=H(e);We(r.$$.fragment,a),a.forEach(k),this.h()},h(){O(e,"class","h-full w-full flex flex-col justify-center items-center")},m(i,a){fe(i,e,a),He(r,e,null),n=!0},i(i){n||(_e(r.$$.fragment,i),n=!0)},o(i){we(r.$$.fragment,i),n=!1},d(i){i&&k(e),$e(r)}}}function r8(t){let e,r,n;return r=new j5({}),{c(){e=Y("div"),ze(r.$$.fragment),this.h()},l(i){e=Z(i,"DIV",{class:!0});var a=H(e);We(r.$$.fragment,a),a.forEach(k),this.h()},h(){O(e,"class","flex flex-col h-full place-content-between")},m(i,a){fe(i,e,a),He(r,e,null),n=!0},i(i){n||(_e(r.$$.fragment,i),n=!0)},o(i){we(r.$$.fragment,i),n=!1},d(i){i&&k(e),$e(r)}}}function n8(t){let e,r,n,i,a,s,o;n=new NE({});const f=[r8,t8,e8],p=[];function c(h,d){return h[0]===vn.Build?0:h[0]===vn.Concept?1:h[0]===vn.History?2:-1}return~(a=c(t))&&(s=p[a]=f[a](t)),{c(){e=Y("div"),r=Y("div"),ze(n.$$.fragment),i=Me(),s&&s.c(),this.h()},l(h){e=Z(h,"DIV",{class:!0});var d=H(e);r=Z(d,"DIV",{class:!0});var g=H(r);We(n.$$.fragment,g),g.forEach(k),i=Pe(d),s&&s.l(d),d.forEach(k),this.h()},h(){O(r,"class","absolute top-0 left-0 z-10"),O(e,"class","relative w-full h-full flex flex-col")},m(h,d){fe(h,e,d),L(e,r),He(n,r,null),L(e,i),~a&&p[a].m(e,null),o=!0},p(h,[d]){let g=a;a=c(h),a!==g&&(s&&(pr(),we(p[g],1,1,()=>{p[g]=null}),vr()),~a?(s=p[a],s||(s=p[a]=f[a](h),s.c()),_e(s,1),s.m(e,null)):s=null)},i(h){o||(_e(n.$$.fragment,h),_e(s),o=!0)},o(h){we(n.$$.fragment,h),we(s),o=!1},d(h){h&&k(e),$e(n),~a&&p[a].d()}}}function i8(t,e,r){let n;return tt(t,h1,i=>r(0,n=i)),[n]}class a8 extends at{constructor(e){super(),ut(this,e,i8,n8,st,{})}}var Hs={},u8={get exports(){return Hs},set exports(t){Hs=t}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var r,n="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",o="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",p=500,c="__lodash_placeholder__",h=1,d=2,g=4,b=1,v=2,_=1,D=2,F=4,E=8,C=16,A=32,S=64,P=128,B=256,N=512,q=30,X="...",K=800,U=16,R=1,z=2,V=3,Q=1/0,ae=9007199254740991,se=17976931348623157e292,he=0/0,Ce=4294967295,Be=Ce-1,Fe=Ce>>>1,je=[["ary",P],["bind",_],["bindKey",D],["curry",E],["curryRight",C],["flip",N],["partial",A],["partialRight",S],["rearg",B]],Ue="[object Arguments]",Ve="[object Array]",ot="[object AsyncFunction]",Dt="[object Boolean]",rt="[object Date]",it="[object DOMException]",St="[object Error]",nt="[object Function]",ht="[object GeneratorFunction]",lt="[object Map]",ft="[object Number]",Ke="[object Null]",Ye="[object Object]",Ee="[object Promise]",Ne="[object Proxy]",Mt="[object RegExp]",Vt="[object Set]",Ht="[object String]",W="[object Symbol]",G="[object Undefined]",ee="[object WeakMap]",le="[object WeakSet]",ie="[object ArrayBuffer]",de="[object DataView]",ue="[object Float32Array]",ce="[object Float64Array]",Ae="[object Int8Array]",Re="[object Int16Array]",Qe="[object Int32Array]",Oe="[object Uint8Array]",zt="[object Uint8ClampedArray]",Rt="[object Uint16Array]",nr="[object Uint32Array]",Zt=/\b__p \+= '';/g,Dr=/\b(__p \+=) '' \+/g,Jt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yr=/&(?:amp|lt|gt|quot|#39);/g,cr=/[&<>"']/g,hr=RegExp(yr.source),gn=RegExp(cr.source),gr=/<%-([\s\S]+?)%>/g,On=/<%([\s\S]+?)%>/g,Qn=/<%=([\s\S]+?)%>/g,Vn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jn=/^\w*$/,Qi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xi=/[\\^$.*+?()[\]{}|]/g,Ba=RegExp(xi.source),Or=/^\s+/,ir=/\s/,Oa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,di=/\{\n\/\* \[wrapped with (.+)\] \*/,mn=/,? & /,Xn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ri=/[()=,{}\[\]\/\s]/,Ma=/\\(\\)?/g,Pa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xi=/\w*$/,Ta=/^[-+]0x[0-9a-f]+$/i,ka=/^0b[01]+$/i,Ia=/^\[object .+?Constructor\]$/,Na=/^0o[0-7]+$/i,xa=/^(?:0|[1-9]\d*)$/,Ra=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pi=/($^)/,La=/['\n\r\u2028\u2029\\]/g,vi="\\ud800-\\udfff",Ua="\\u0300-\\u036f",Va="\\ufe20-\\ufe2f",ja="\\u20d0-\\u20ff",ea=Ua+Va+ja,qn="\\u2700-\\u27bf",wr="a-z\\xdf-\\xf6\\xf8-\\xff",sr="\\xac\\xb1\\xd7\\xf7",Gr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Li="\\u2000-\\u206f",ei=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zn="A-Z\\xc0-\\xd6\\xd8-\\xde",Ui="\\ufe0e\\ufe0f",Mn=sr+Gr+Li+ei,_n="['’]",go="["+vi+"]",qa="["+Mn+"]",ta="["+ea+"]",Du="\\d+",y="["+qn+"]",M="["+wr+"]",j="[^"+vi+Mn+Du+qn+wr+zn+"]",te="\\ud83c[\\udffb-\\udfff]",ve="(?:"+ta+"|"+te+")",Te="[^"+vi+"]",mt="(?:\\ud83c[\\udde6-\\uddff]){2}",Bt="[\\ud800-\\udbff][\\udc00-\\udfff]",Gt="["+zn+"]",or="\\u200d",ec="(?:"+M+"|"+j+")",Q1="(?:"+Gt+"|"+j+")",tc="(?:"+_n+"(?:d|ll|m|re|s|t|ve))?",rc="(?:"+_n+"(?:D|LL|M|RE|S|T|VE))?",nc=ve+"?",ic="["+Ui+"]?",X1="(?:"+or+"(?:"+[Te,mt,Bt].join("|")+")"+ic+nc+")*",ev="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tv="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ac=ic+nc+X1,rv="(?:"+[y,mt,Bt].join("|")+")"+ac,nv="(?:"+[Te+ta+"?",ta,mt,Bt,go].join("|")+")",iv=RegExp(_n,"g"),av=RegExp(ta,"g"),mo=RegExp(te+"(?="+te+")|"+nv+ac,"g"),uv=RegExp([Gt+"?"+M+"+"+tc+"(?="+[qa,Gt,"$"].join("|")+")",Q1+"+"+rc+"(?="+[qa,Gt+ec,"$"].join("|")+")",Gt+"?"+ec+"+"+tc,Gt+"+"+rc,tv,ev,Du,rv].join("|"),"g"),sv=RegExp("["+or+vi+ea+Ui+"]"),ov=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,lv=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],fv=-1,$t={};$t[ue]=$t[ce]=$t[Ae]=$t[Re]=$t[Qe]=$t[Oe]=$t[zt]=$t[Rt]=$t[nr]=!0,$t[Ue]=$t[Ve]=$t[ie]=$t[Dt]=$t[de]=$t[rt]=$t[St]=$t[nt]=$t[lt]=$t[ft]=$t[Ye]=$t[Mt]=$t[Vt]=$t[Ht]=$t[ee]=!1;var Wt={};Wt[Ue]=Wt[Ve]=Wt[ie]=Wt[de]=Wt[Dt]=Wt[rt]=Wt[ue]=Wt[ce]=Wt[Ae]=Wt[Re]=Wt[Qe]=Wt[lt]=Wt[ft]=Wt[Ye]=Wt[Mt]=Wt[Vt]=Wt[Ht]=Wt[W]=Wt[Oe]=Wt[zt]=Wt[Rt]=Wt[nr]=!0,Wt[St]=Wt[nt]=Wt[ee]=!1;var cv={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},hv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dv={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},vv=parseFloat,gv=parseInt,uc=typeof dr=="object"&&dr&&dr.Object===Object&&dr,mv=typeof self=="object"&&self&&self.Object===Object&&self,Mr=uc||mv||Function("return this")(),_o=e&&!e.nodeType&&e,Vi=_o&&!0&&t&&!t.nodeType&&t,sc=Vi&&Vi.exports===_o,bo=sc&&uc.process,bn=function(){try{var re=Vi&&Vi.require&&Vi.require("util").types;return re||bo&&bo.binding&&bo.binding("util")}catch{}}(),oc=bn&&bn.isArrayBuffer,lc=bn&&bn.isDate,fc=bn&&bn.isMap,cc=bn&&bn.isRegExp,hc=bn&&bn.isSet,dc=bn&&bn.isTypedArray;function on(re,pe,oe){switch(oe.length){case 0:return re.call(pe);case 1:return re.call(pe,oe[0]);case 2:return re.call(pe,oe[0],oe[1]);case 3:return re.call(pe,oe[0],oe[1],oe[2])}return re.apply(pe,oe)}function _v(re,pe,oe,Le){for(var dt=-1,It=re==null?0:re.length;++dt<It;){var mr=re[dt];pe(Le,mr,oe(mr),re)}return Le}function Dn(re,pe){for(var oe=-1,Le=re==null?0:re.length;++oe<Le&&pe(re[oe],oe,re)!==!1;);return re}function bv(re,pe){for(var oe=re==null?0:re.length;oe--&&pe(re[oe],oe,re)!==!1;);return re}function pc(re,pe){for(var oe=-1,Le=re==null?0:re.length;++oe<Le;)if(!pe(re[oe],oe,re))return!1;return!0}function gi(re,pe){for(var oe=-1,Le=re==null?0:re.length,dt=0,It=[];++oe<Le;){var mr=re[oe];pe(mr,oe,re)&&(It[dt++]=mr)}return It}function yu(re,pe){var oe=re==null?0:re.length;return!!oe&&ra(re,pe,0)>-1}function Do(re,pe,oe){for(var Le=-1,dt=re==null?0:re.length;++Le<dt;)if(oe(pe,re[Le]))return!0;return!1}function Kt(re,pe){for(var oe=-1,Le=re==null?0:re.length,dt=Array(Le);++oe<Le;)dt[oe]=pe(re[oe],oe,re);return dt}function mi(re,pe){for(var oe=-1,Le=pe.length,dt=re.length;++oe<Le;)re[dt+oe]=pe[oe];return re}function yo(re,pe,oe,Le){var dt=-1,It=re==null?0:re.length;for(Le&&It&&(oe=re[++dt]);++dt<It;)oe=pe(oe,re[dt],dt,re);return oe}function Dv(re,pe,oe,Le){var dt=re==null?0:re.length;for(Le&&dt&&(oe=re[--dt]);dt--;)oe=pe(oe,re[dt],dt,re);return oe}function wo(re,pe){for(var oe=-1,Le=re==null?0:re.length;++oe<Le;)if(pe(re[oe],oe,re))return!0;return!1}var yv=Ao("length");function wv(re){return re.split("")}function Av(re){return re.match(Xn)||[]}function vc(re,pe,oe){var Le;return oe(re,function(dt,It,mr){if(pe(dt,It,mr))return Le=It,!1}),Le}function wu(re,pe,oe,Le){for(var dt=re.length,It=oe+(Le?1:-1);Le?It--:++It<dt;)if(pe(re[It],It,re))return It;return-1}function ra(re,pe,oe){return pe===pe?Nv(re,pe,oe):wu(re,gc,oe)}function Ev(re,pe,oe,Le){for(var dt=oe-1,It=re.length;++dt<It;)if(Le(re[dt],pe))return dt;return-1}function gc(re){return re!==re}function mc(re,pe){var oe=re==null?0:re.length;return oe?Co(re,pe)/oe:he}function Ao(re){return function(pe){return pe==null?r:pe[re]}}function Eo(re){return function(pe){return re==null?r:re[pe]}}function _c(re,pe,oe,Le,dt){return dt(re,function(It,mr,jt){oe=Le?(Le=!1,It):pe(oe,It,mr,jt)}),oe}function Cv(re,pe){var oe=re.length;for(re.sort(pe);oe--;)re[oe]=re[oe].value;return re}function Co(re,pe){for(var oe,Le=-1,dt=re.length;++Le<dt;){var It=pe(re[Le]);It!==r&&(oe=oe===r?It:oe+It)}return oe}function Fo(re,pe){for(var oe=-1,Le=Array(re);++oe<re;)Le[oe]=pe(oe);return Le}function Fv(re,pe){return Kt(pe,function(oe){return[oe,re[oe]]})}function bc(re){return re&&re.slice(0,Ac(re)+1).replace(Or,"")}function ln(re){return function(pe){return re(pe)}}function So(re,pe){return Kt(pe,function(oe){return re[oe]})}function za(re,pe){return re.has(pe)}function Dc(re,pe){for(var oe=-1,Le=re.length;++oe<Le&&ra(pe,re[oe],0)>-1;);return oe}function yc(re,pe){for(var oe=re.length;oe--&&ra(pe,re[oe],0)>-1;);return oe}function Sv(re,pe){for(var oe=re.length,Le=0;oe--;)re[oe]===pe&&++Le;return Le}var Bv=Eo(cv),Ov=Eo(hv);function Mv(re){return"\\"+pv[re]}function Pv(re,pe){return re==null?r:re[pe]}function na(re){return sv.test(re)}function Tv(re){return ov.test(re)}function kv(re){for(var pe,oe=[];!(pe=re.next()).done;)oe.push(pe.value);return oe}function Bo(re){var pe=-1,oe=Array(re.size);return re.forEach(function(Le,dt){oe[++pe]=[dt,Le]}),oe}function wc(re,pe){return function(oe){return re(pe(oe))}}function _i(re,pe){for(var oe=-1,Le=re.length,dt=0,It=[];++oe<Le;){var mr=re[oe];(mr===pe||mr===c)&&(re[oe]=c,It[dt++]=oe)}return It}function Au(re){var pe=-1,oe=Array(re.size);return re.forEach(function(Le){oe[++pe]=Le}),oe}function Iv(re){var pe=-1,oe=Array(re.size);return re.forEach(function(Le){oe[++pe]=[Le,Le]}),oe}function Nv(re,pe,oe){for(var Le=oe-1,dt=re.length;++Le<dt;)if(re[Le]===pe)return Le;return-1}function xv(re,pe,oe){for(var Le=oe+1;Le--;)if(re[Le]===pe)return Le;return Le}function ia(re){return na(re)?Lv(re):yv(re)}function Pn(re){return na(re)?Uv(re):wv(re)}function Ac(re){for(var pe=re.length;pe--&&ir.test(re.charAt(pe)););return pe}var Rv=Eo(dv);function Lv(re){for(var pe=mo.lastIndex=0;mo.test(re);)++pe;return pe}function Uv(re){return re.match(mo)||[]}function Vv(re){return re.match(uv)||[]}var jv=function re(pe){pe=pe==null?Mr:aa.defaults(Mr.Object(),pe,aa.pick(Mr,lv));var oe=pe.Array,Le=pe.Date,dt=pe.Error,It=pe.Function,mr=pe.Math,jt=pe.Object,Oo=pe.RegExp,qv=pe.String,yn=pe.TypeError,Eu=oe.prototype,zv=It.prototype,ua=jt.prototype,Cu=pe["__core-js_shared__"],Fu=zv.toString,Lt=ua.hasOwnProperty,Wv=0,Ec=function(){var u=/[^.]+$/.exec(Cu&&Cu.keys&&Cu.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),Su=ua.toString,Hv=Fu.call(jt),$v=Mr._,Gv=Oo("^"+Fu.call(Lt).replace(xi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bu=sc?pe.Buffer:r,bi=pe.Symbol,Ou=pe.Uint8Array,Cc=Bu?Bu.allocUnsafe:r,Mu=wc(jt.getPrototypeOf,jt),Fc=jt.create,Sc=ua.propertyIsEnumerable,Pu=Eu.splice,Bc=bi?bi.isConcatSpreadable:r,Wa=bi?bi.iterator:r,ji=bi?bi.toStringTag:r,Tu=function(){try{var u=$i(jt,"defineProperty");return u({},"",{}),u}catch{}}(),Kv=pe.clearTimeout!==Mr.clearTimeout&&pe.clearTimeout,Yv=Le&&Le.now!==Mr.Date.now&&Le.now,Zv=pe.setTimeout!==Mr.setTimeout&&pe.setTimeout,ku=mr.ceil,Iu=mr.floor,Mo=jt.getOwnPropertySymbols,Jv=Bu?Bu.isBuffer:r,Oc=pe.isFinite,Qv=Eu.join,Xv=wc(jt.keys,jt),_r=mr.max,qr=mr.min,eg=Le.now,tg=pe.parseInt,Mc=mr.random,rg=Eu.reverse,Po=$i(pe,"DataView"),Ha=$i(pe,"Map"),To=$i(pe,"Promise"),sa=$i(pe,"Set"),$a=$i(pe,"WeakMap"),Ga=$i(jt,"create"),Nu=$a&&new $a,oa={},ng=Gi(Po),ig=Gi(Ha),ag=Gi(To),ug=Gi(sa),sg=Gi($a),xu=bi?bi.prototype:r,Ka=xu?xu.valueOf:r,Pc=xu?xu.toString:r;function I(u){if(ar(u)&&!pt(u)&&!(u instanceof Ct)){if(u instanceof wn)return u;if(Lt.call(u,"__wrapped__"))return Th(u)}return new wn(u)}var la=function(){function u(){}return function(l){if(!Qt(l))return{};if(Fc)return Fc(l);u.prototype=l;var m=new u;return u.prototype=r,m}}();function Ru(){}function wn(u,l){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=r}I.templateSettings={escape:gr,evaluate:On,interpolate:Qn,variable:"",imports:{_:I}},I.prototype=Ru.prototype,I.prototype.constructor=I,wn.prototype=la(Ru.prototype),wn.prototype.constructor=wn;function Ct(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ce,this.__views__=[]}function og(){var u=new Ct(this.__wrapped__);return u.__actions__=Qr(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Qr(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Qr(this.__views__),u}function lg(){if(this.__filtered__){var u=new Ct(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function fg(){var u=this.__wrapped__.value(),l=this.__dir__,m=pt(u),w=l<0,T=m?u.length:0,x=wm(0,T,this.__views__),$=x.start,J=x.end,ne=J-$,ge=w?J:$-1,me=this.__iteratees__,ye=me.length,xe=0,qe=qr(ne,this.__takeCount__);if(!m||!w&&T==ne&&qe==ne)return th(u,this.__actions__);var Xe=[];e:for(;ne--&&xe<qe;){ge+=l;for(var wt=-1,et=u[ge];++wt<ye;){var Et=me[wt],Ot=Et.iteratee,hn=Et.type,Zr=Ot(et);if(hn==z)et=Zr;else if(!Zr){if(hn==R)continue e;break e}}Xe[xe++]=et}return Xe}Ct.prototype=la(Ru.prototype),Ct.prototype.constructor=Ct;function qi(u){var l=-1,m=u==null?0:u.length;for(this.clear();++l<m;){var w=u[l];this.set(w[0],w[1])}}function cg(){this.__data__=Ga?Ga(null):{},this.size=0}function hg(u){var l=this.has(u)&&delete this.__data__[u];return this.size-=l?1:0,l}function dg(u){var l=this.__data__;if(Ga){var m=l[u];return m===f?r:m}return Lt.call(l,u)?l[u]:r}function pg(u){var l=this.__data__;return Ga?l[u]!==r:Lt.call(l,u)}function vg(u,l){var m=this.__data__;return this.size+=this.has(u)?0:1,m[u]=Ga&&l===r?f:l,this}qi.prototype.clear=cg,qi.prototype.delete=hg,qi.prototype.get=dg,qi.prototype.has=pg,qi.prototype.set=vg;function ti(u){var l=-1,m=u==null?0:u.length;for(this.clear();++l<m;){var w=u[l];this.set(w[0],w[1])}}function gg(){this.__data__=[],this.size=0}function mg(u){var l=this.__data__,m=Lu(l,u);if(m<0)return!1;var w=l.length-1;return m==w?l.pop():Pu.call(l,m,1),--this.size,!0}function _g(u){var l=this.__data__,m=Lu(l,u);return m<0?r:l[m][1]}function bg(u){return Lu(this.__data__,u)>-1}function Dg(u,l){var m=this.__data__,w=Lu(m,u);return w<0?(++this.size,m.push([u,l])):m[w][1]=l,this}ti.prototype.clear=gg,ti.prototype.delete=mg,ti.prototype.get=_g,ti.prototype.has=bg,ti.prototype.set=Dg;function ri(u){var l=-1,m=u==null?0:u.length;for(this.clear();++l<m;){var w=u[l];this.set(w[0],w[1])}}function yg(){this.size=0,this.__data__={hash:new qi,map:new(Ha||ti),string:new qi}}function wg(u){var l=Zu(this,u).delete(u);return this.size-=l?1:0,l}function Ag(u){return Zu(this,u).get(u)}function Eg(u){return Zu(this,u).has(u)}function Cg(u,l){var m=Zu(this,u),w=m.size;return m.set(u,l),this.size+=m.size==w?0:1,this}ri.prototype.clear=yg,ri.prototype.delete=wg,ri.prototype.get=Ag,ri.prototype.has=Eg,ri.prototype.set=Cg;function zi(u){var l=-1,m=u==null?0:u.length;for(this.__data__=new ri;++l<m;)this.add(u[l])}function Fg(u){return this.__data__.set(u,f),this}function Sg(u){return this.__data__.has(u)}zi.prototype.add=zi.prototype.push=Fg,zi.prototype.has=Sg;function Tn(u){var l=this.__data__=new ti(u);this.size=l.size}function Bg(){this.__data__=new ti,this.size=0}function Og(u){var l=this.__data__,m=l.delete(u);return this.size=l.size,m}function Mg(u){return this.__data__.get(u)}function Pg(u){return this.__data__.has(u)}function Tg(u,l){var m=this.__data__;if(m instanceof ti){var w=m.__data__;if(!Ha||w.length<i-1)return w.push([u,l]),this.size=++m.size,this;m=this.__data__=new ri(w)}return m.set(u,l),this.size=m.size,this}Tn.prototype.clear=Bg,Tn.prototype.delete=Og,Tn.prototype.get=Mg,Tn.prototype.has=Pg,Tn.prototype.set=Tg;function Tc(u,l){var m=pt(u),w=!m&&Ki(u),T=!m&&!w&&Ei(u),x=!m&&!w&&!T&&da(u),$=m||w||T||x,J=$?Fo(u.length,qv):[],ne=J.length;for(var ge in u)(l||Lt.call(u,ge))&&!($&&(ge=="length"||T&&(ge=="offset"||ge=="parent")||x&&(ge=="buffer"||ge=="byteLength"||ge=="byteOffset")||ui(ge,ne)))&&J.push(ge);return J}function kc(u){var l=u.length;return l?u[zo(0,l-1)]:r}function kg(u,l){return Ju(Qr(u),Wi(l,0,u.length))}function Ig(u){return Ju(Qr(u))}function ko(u,l,m){(m!==r&&!kn(u[l],m)||m===r&&!(l in u))&&ni(u,l,m)}function Ya(u,l,m){var w=u[l];(!(Lt.call(u,l)&&kn(w,m))||m===r&&!(l in u))&&ni(u,l,m)}function Lu(u,l){for(var m=u.length;m--;)if(kn(u[m][0],l))return m;return-1}function Ng(u,l,m,w){return Di(u,function(T,x,$){l(w,T,m(T),$)}),w}function Ic(u,l){return u&&Hn(l,Ar(l),u)}function xg(u,l){return u&&Hn(l,en(l),u)}function ni(u,l,m){l=="__proto__"&&Tu?Tu(u,l,{configurable:!0,enumerable:!0,value:m,writable:!0}):u[l]=m}function Io(u,l){for(var m=-1,w=l.length,T=oe(w),x=u==null;++m<w;)T[m]=x?r:pl(u,l[m]);return T}function Wi(u,l,m){return u===u&&(m!==r&&(u=u<=m?u:m),l!==r&&(u=u>=l?u:l)),u}function An(u,l,m,w,T,x){var $,J=l&h,ne=l&d,ge=l&g;if(m&&($=T?m(u,w,T,x):m(u)),$!==r)return $;if(!Qt(u))return u;var me=pt(u);if(me){if($=Em(u),!J)return Qr(u,$)}else{var ye=zr(u),xe=ye==nt||ye==ht;if(Ei(u))return ih(u,J);if(ye==Ye||ye==Ue||xe&&!T){if($=ne||xe?{}:Ah(u),!J)return ne?dm(u,xg($,u)):hm(u,Ic($,u))}else{if(!Wt[ye])return T?u:{};$=Cm(u,ye,J)}}x||(x=new Tn);var qe=x.get(u);if(qe)return qe;x.set(u,$),Qh(u)?u.forEach(function(et){$.add(An(et,l,m,et,u,x))}):Zh(u)&&u.forEach(function(et,Et){$.set(Et,An(et,l,m,Et,u,x))});var Xe=ge?ne?el:Xo:ne?en:Ar,wt=me?r:Xe(u);return Dn(wt||u,function(et,Et){wt&&(Et=et,et=u[Et]),Ya($,Et,An(et,l,m,Et,u,x))}),$}function Rg(u){var l=Ar(u);return function(m){return Nc(m,u,l)}}function Nc(u,l,m){var w=m.length;if(u==null)return!w;for(u=jt(u);w--;){var T=m[w],x=l[T],$=u[T];if($===r&&!(T in u)||!x($))return!1}return!0}function xc(u,l,m){if(typeof u!="function")throw new yn(s);return ru(function(){u.apply(r,m)},l)}function Za(u,l,m,w){var T=-1,x=yu,$=!0,J=u.length,ne=[],ge=l.length;if(!J)return ne;m&&(l=Kt(l,ln(m))),w?(x=Do,$=!1):l.length>=i&&(x=za,$=!1,l=new zi(l));e:for(;++T<J;){var me=u[T],ye=m==null?me:m(me);if(me=w||me!==0?me:0,$&&ye===ye){for(var xe=ge;xe--;)if(l[xe]===ye)continue e;ne.push(me)}else x(l,ye,w)||ne.push(me)}return ne}var Di=lh(Wn),Rc=lh(xo,!0);function Lg(u,l){var m=!0;return Di(u,function(w,T,x){return m=!!l(w,T,x),m}),m}function Uu(u,l,m){for(var w=-1,T=u.length;++w<T;){var x=u[w],$=l(x);if($!=null&&(J===r?$===$&&!cn($):m($,J)))var J=$,ne=x}return ne}function Ug(u,l,m,w){var T=u.length;for(m=yt(m),m<0&&(m=-m>T?0:T+m),w=w===r||w>T?T:yt(w),w<0&&(w+=T),w=m>w?0:e0(w);m<w;)u[m++]=l;return u}function Lc(u,l){var m=[];return Di(u,function(w,T,x){l(w,T,x)&&m.push(w)}),m}function Pr(u,l,m,w,T){var x=-1,$=u.length;for(m||(m=Sm),T||(T=[]);++x<$;){var J=u[x];l>0&&m(J)?l>1?Pr(J,l-1,m,w,T):mi(T,J):w||(T[T.length]=J)}return T}var No=fh(),Uc=fh(!0);function Wn(u,l){return u&&No(u,l,Ar)}function xo(u,l){return u&&Uc(u,l,Ar)}function Vu(u,l){return gi(l,function(m){return si(u[m])})}function Hi(u,l){l=wi(l,u);for(var m=0,w=l.length;u!=null&&m<w;)u=u[$n(l[m++])];return m&&m==w?u:r}function Vc(u,l,m){var w=l(u);return pt(u)?w:mi(w,m(u))}function Kr(u){return u==null?u===r?G:Ke:ji&&ji in jt(u)?ym(u):Im(u)}function Ro(u,l){return u>l}function Vg(u,l){return u!=null&&Lt.call(u,l)}function jg(u,l){return u!=null&&l in jt(u)}function qg(u,l,m){return u>=qr(l,m)&&u<_r(l,m)}function Lo(u,l,m){for(var w=m?Do:yu,T=u[0].length,x=u.length,$=x,J=oe(x),ne=1/0,ge=[];$--;){var me=u[$];$&&l&&(me=Kt(me,ln(l))),ne=qr(me.length,ne),J[$]=!m&&(l||T>=120&&me.length>=120)?new zi($&&me):r}me=u[0];var ye=-1,xe=J[0];e:for(;++ye<T&&ge.length<ne;){var qe=me[ye],Xe=l?l(qe):qe;if(qe=m||qe!==0?qe:0,!(xe?za(xe,Xe):w(ge,Xe,m))){for($=x;--$;){var wt=J[$];if(!(wt?za(wt,Xe):w(u[$],Xe,m)))continue e}xe&&xe.push(Xe),ge.push(qe)}}return ge}function zg(u,l,m,w){return Wn(u,function(T,x,$){l(w,m(T),x,$)}),w}function Ja(u,l,m){l=wi(l,u),u=Sh(u,l);var w=u==null?u:u[$n(Cn(l))];return w==null?r:on(w,u,m)}function jc(u){return ar(u)&&Kr(u)==Ue}function Wg(u){return ar(u)&&Kr(u)==ie}function Hg(u){return ar(u)&&Kr(u)==rt}function Qa(u,l,m,w,T){return u===l?!0:u==null||l==null||!ar(u)&&!ar(l)?u!==u&&l!==l:$g(u,l,m,w,Qa,T)}function $g(u,l,m,w,T,x){var $=pt(u),J=pt(l),ne=$?Ve:zr(u),ge=J?Ve:zr(l);ne=ne==Ue?Ye:ne,ge=ge==Ue?Ye:ge;var me=ne==Ye,ye=ge==Ye,xe=ne==ge;if(xe&&Ei(u)){if(!Ei(l))return!1;$=!0,me=!1}if(xe&&!me)return x||(x=new Tn),$||da(u)?Dh(u,l,m,w,T,x):bm(u,l,ne,m,w,T,x);if(!(m&b)){var qe=me&&Lt.call(u,"__wrapped__"),Xe=ye&&Lt.call(l,"__wrapped__");if(qe||Xe){var wt=qe?u.value():u,et=Xe?l.value():l;return x||(x=new Tn),T(wt,et,m,w,x)}}return xe?(x||(x=new Tn),Dm(u,l,m,w,T,x)):!1}function Gg(u){return ar(u)&&zr(u)==lt}function Uo(u,l,m,w){var T=m.length,x=T,$=!w;if(u==null)return!x;for(u=jt(u);T--;){var J=m[T];if($&&J[2]?J[1]!==u[J[0]]:!(J[0]in u))return!1}for(;++T<x;){J=m[T];var ne=J[0],ge=u[ne],me=J[1];if($&&J[2]){if(ge===r&&!(ne in u))return!1}else{var ye=new Tn;if(w)var xe=w(ge,me,ne,u,l,ye);if(!(xe===r?Qa(me,ge,b|v,w,ye):xe))return!1}}return!0}function qc(u){if(!Qt(u)||Om(u))return!1;var l=si(u)?Gv:Ia;return l.test(Gi(u))}function Kg(u){return ar(u)&&Kr(u)==Mt}function Yg(u){return ar(u)&&zr(u)==Vt}function Zg(u){return ar(u)&&ns(u.length)&&!!$t[Kr(u)]}function zc(u){return typeof u=="function"?u:u==null?tn:typeof u=="object"?pt(u)?$c(u[0],u[1]):Hc(u):c0(u)}function Vo(u){if(!tu(u))return Xv(u);var l=[];for(var m in jt(u))Lt.call(u,m)&&m!="constructor"&&l.push(m);return l}function Jg(u){if(!Qt(u))return km(u);var l=tu(u),m=[];for(var w in u)w=="constructor"&&(l||!Lt.call(u,w))||m.push(w);return m}function jo(u,l){return u<l}function Wc(u,l){var m=-1,w=Xr(u)?oe(u.length):[];return Di(u,function(T,x,$){w[++m]=l(T,x,$)}),w}function Hc(u){var l=rl(u);return l.length==1&&l[0][2]?Ch(l[0][0],l[0][1]):function(m){return m===u||Uo(m,u,l)}}function $c(u,l){return il(u)&&Eh(l)?Ch($n(u),l):function(m){var w=pl(m,u);return w===r&&w===l?vl(m,u):Qa(l,w,b|v)}}function ju(u,l,m,w,T){u!==l&&No(l,function(x,$){if(T||(T=new Tn),Qt(x))Qg(u,l,$,m,ju,w,T);else{var J=w?w(ul(u,$),x,$+"",u,l,T):r;J===r&&(J=x),ko(u,$,J)}},en)}function Qg(u,l,m,w,T,x,$){var J=ul(u,m),ne=ul(l,m),ge=$.get(ne);if(ge){ko(u,m,ge);return}var me=x?x(J,ne,m+"",u,l,$):r,ye=me===r;if(ye){var xe=pt(ne),qe=!xe&&Ei(ne),Xe=!xe&&!qe&&da(ne);me=ne,xe||qe||Xe?pt(J)?me=J:lr(J)?me=Qr(J):qe?(ye=!1,me=ih(ne,!0)):Xe?(ye=!1,me=ah(ne,!0)):me=[]:nu(ne)||Ki(ne)?(me=J,Ki(J)?me=t0(J):(!Qt(J)||si(J))&&(me=Ah(ne))):ye=!1}ye&&($.set(ne,me),T(me,ne,w,x,$),$.delete(ne)),ko(u,m,me)}function Gc(u,l){var m=u.length;if(m)return l+=l<0?m:0,ui(l,m)?u[l]:r}function Kc(u,l,m){l.length?l=Kt(l,function(x){return pt(x)?function($){return Hi($,x.length===1?x[0]:x)}:x}):l=[tn];var w=-1;l=Kt(l,ln(Ze()));var T=Wc(u,function(x,$,J){var ne=Kt(l,function(ge){return ge(x)});return{criteria:ne,index:++w,value:x}});return Cv(T,function(x,$){return cm(x,$,m)})}function Xg(u,l){return Yc(u,l,function(m,w){return vl(u,w)})}function Yc(u,l,m){for(var w=-1,T=l.length,x={};++w<T;){var $=l[w],J=Hi(u,$);m(J,$)&&Xa(x,wi($,u),J)}return x}function em(u){return function(l){return Hi(l,u)}}function qo(u,l,m,w){var T=w?Ev:ra,x=-1,$=l.length,J=u;for(u===l&&(l=Qr(l)),m&&(J=Kt(u,ln(m)));++x<$;)for(var ne=0,ge=l[x],me=m?m(ge):ge;(ne=T(J,me,ne,w))>-1;)J!==u&&Pu.call(J,ne,1),Pu.call(u,ne,1);return u}function Zc(u,l){for(var m=u?l.length:0,w=m-1;m--;){var T=l[m];if(m==w||T!==x){var x=T;ui(T)?Pu.call(u,T,1):$o(u,T)}}return u}function zo(u,l){return u+Iu(Mc()*(l-u+1))}function tm(u,l,m,w){for(var T=-1,x=_r(ku((l-u)/(m||1)),0),$=oe(x);x--;)$[w?x:++T]=u,u+=m;return $}function Wo(u,l){var m="";if(!u||l<1||l>ae)return m;do l%2&&(m+=u),l=Iu(l/2),l&&(u+=u);while(l);return m}function At(u,l){return sl(Fh(u,l,tn),u+"")}function rm(u){return kc(pa(u))}function nm(u,l){var m=pa(u);return Ju(m,Wi(l,0,m.length))}function Xa(u,l,m,w){if(!Qt(u))return u;l=wi(l,u);for(var T=-1,x=l.length,$=x-1,J=u;J!=null&&++T<x;){var ne=$n(l[T]),ge=m;if(ne==="__proto__"||ne==="constructor"||ne==="prototype")return u;if(T!=$){var me=J[ne];ge=w?w(me,ne,J):r,ge===r&&(ge=Qt(me)?me:ui(l[T+1])?[]:{})}Ya(J,ne,ge),J=J[ne]}return u}var Jc=Nu?function(u,l){return Nu.set(u,l),u}:tn,im=Tu?function(u,l){return Tu(u,"toString",{configurable:!0,enumerable:!1,value:ml(l),writable:!0})}:tn;function am(u){return Ju(pa(u))}function En(u,l,m){var w=-1,T=u.length;l<0&&(l=-l>T?0:T+l),m=m>T?T:m,m<0&&(m+=T),T=l>m?0:m-l>>>0,l>>>=0;for(var x=oe(T);++w<T;)x[w]=u[w+l];return x}function um(u,l){var m;return Di(u,function(w,T,x){return m=l(w,T,x),!m}),!!m}function qu(u,l,m){var w=0,T=u==null?w:u.length;if(typeof l=="number"&&l===l&&T<=Fe){for(;w<T;){var x=w+T>>>1,$=u[x];$!==null&&!cn($)&&(m?$<=l:$<l)?w=x+1:T=x}return T}return Ho(u,l,tn,m)}function Ho(u,l,m,w){var T=0,x=u==null?0:u.length;if(x===0)return 0;l=m(l);for(var $=l!==l,J=l===null,ne=cn(l),ge=l===r;T<x;){var me=Iu((T+x)/2),ye=m(u[me]),xe=ye!==r,qe=ye===null,Xe=ye===ye,wt=cn(ye);if($)var et=w||Xe;else ge?et=Xe&&(w||xe):J?et=Xe&&xe&&(w||!qe):ne?et=Xe&&xe&&!qe&&(w||!wt):qe||wt?et=!1:et=w?ye<=l:ye<l;et?T=me+1:x=me}return qr(x,Be)}function Qc(u,l){for(var m=-1,w=u.length,T=0,x=[];++m<w;){var $=u[m],J=l?l($):$;if(!m||!kn(J,ne)){var ne=J;x[T++]=$===0?0:$}}return x}function Xc(u){return typeof u=="number"?u:cn(u)?he:+u}function fn(u){if(typeof u=="string")return u;if(pt(u))return Kt(u,fn)+"";if(cn(u))return Pc?Pc.call(u):"";var l=u+"";return l=="0"&&1/u==-Q?"-0":l}function yi(u,l,m){var w=-1,T=yu,x=u.length,$=!0,J=[],ne=J;if(m)$=!1,T=Do;else if(x>=i){var ge=l?null:mm(u);if(ge)return Au(ge);$=!1,T=za,ne=new zi}else ne=l?[]:J;e:for(;++w<x;){var me=u[w],ye=l?l(me):me;if(me=m||me!==0?me:0,$&&ye===ye){for(var xe=ne.length;xe--;)if(ne[xe]===ye)continue e;l&&ne.push(ye),J.push(me)}else T(ne,ye,m)||(ne!==J&&ne.push(ye),J.push(me))}return J}function $o(u,l){return l=wi(l,u),u=Sh(u,l),u==null||delete u[$n(Cn(l))]}function eh(u,l,m,w){return Xa(u,l,m(Hi(u,l)),w)}function zu(u,l,m,w){for(var T=u.length,x=w?T:-1;(w?x--:++x<T)&&l(u[x],x,u););return m?En(u,w?0:x,w?x+1:T):En(u,w?x+1:0,w?T:x)}function th(u,l){var m=u;return m instanceof Ct&&(m=m.value()),yo(l,function(w,T){return T.func.apply(T.thisArg,mi([w],T.args))},m)}function Go(u,l,m){var w=u.length;if(w<2)return w?yi(u[0]):[];for(var T=-1,x=oe(w);++T<w;)for(var $=u[T],J=-1;++J<w;)J!=T&&(x[T]=Za(x[T]||$,u[J],l,m));return yi(Pr(x,1),l,m)}function rh(u,l,m){for(var w=-1,T=u.length,x=l.length,$={};++w<T;){var J=w<x?l[w]:r;m($,u[w],J)}return $}function Ko(u){return lr(u)?u:[]}function Yo(u){return typeof u=="function"?u:tn}function wi(u,l){return pt(u)?u:il(u,l)?[u]:Ph(Nt(u))}var sm=At;function Ai(u,l,m){var w=u.length;return m=m===r?w:m,!l&&m>=w?u:En(u,l,m)}var nh=Kv||function(u){return Mr.clearTimeout(u)};function ih(u,l){if(l)return u.slice();var m=u.length,w=Cc?Cc(m):new u.constructor(m);return u.copy(w),w}function Zo(u){var l=new u.constructor(u.byteLength);return new Ou(l).set(new Ou(u)),l}function om(u,l){var m=l?Zo(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.byteLength)}function lm(u){var l=new u.constructor(u.source,Xi.exec(u));return l.lastIndex=u.lastIndex,l}function fm(u){return Ka?jt(Ka.call(u)):{}}function ah(u,l){var m=l?Zo(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.length)}function uh(u,l){if(u!==l){var m=u!==r,w=u===null,T=u===u,x=cn(u),$=l!==r,J=l===null,ne=l===l,ge=cn(l);if(!J&&!ge&&!x&&u>l||x&&$&&ne&&!J&&!ge||w&&$&&ne||!m&&ne||!T)return 1;if(!w&&!x&&!ge&&u<l||ge&&m&&T&&!w&&!x||J&&m&&T||!$&&T||!ne)return-1}return 0}function cm(u,l,m){for(var w=-1,T=u.criteria,x=l.criteria,$=T.length,J=m.length;++w<$;){var ne=uh(T[w],x[w]);if(ne){if(w>=J)return ne;var ge=m[w];return ne*(ge=="desc"?-1:1)}}return u.index-l.index}function sh(u,l,m,w){for(var T=-1,x=u.length,$=m.length,J=-1,ne=l.length,ge=_r(x-$,0),me=oe(ne+ge),ye=!w;++J<ne;)me[J]=l[J];for(;++T<$;)(ye||T<x)&&(me[m[T]]=u[T]);for(;ge--;)me[J++]=u[T++];return me}function oh(u,l,m,w){for(var T=-1,x=u.length,$=-1,J=m.length,ne=-1,ge=l.length,me=_r(x-J,0),ye=oe(me+ge),xe=!w;++T<me;)ye[T]=u[T];for(var qe=T;++ne<ge;)ye[qe+ne]=l[ne];for(;++$<J;)(xe||T<x)&&(ye[qe+m[$]]=u[T++]);return ye}function Qr(u,l){var m=-1,w=u.length;for(l||(l=oe(w));++m<w;)l[m]=u[m];return l}function Hn(u,l,m,w){var T=!m;m||(m={});for(var x=-1,$=l.length;++x<$;){var J=l[x],ne=w?w(m[J],u[J],J,m,u):r;ne===r&&(ne=u[J]),T?ni(m,J,ne):Ya(m,J,ne)}return m}function hm(u,l){return Hn(u,nl(u),l)}function dm(u,l){return Hn(u,yh(u),l)}function Wu(u,l){return function(m,w){var T=pt(m)?_v:Ng,x=l?l():{};return T(m,u,Ze(w,2),x)}}function fa(u){return At(function(l,m){var w=-1,T=m.length,x=T>1?m[T-1]:r,$=T>2?m[2]:r;for(x=u.length>3&&typeof x=="function"?(T--,x):r,$&&Yr(m[0],m[1],$)&&(x=T<3?r:x,T=1),l=jt(l);++w<T;){var J=m[w];J&&u(l,J,w,x)}return l})}function lh(u,l){return function(m,w){if(m==null)return m;if(!Xr(m))return u(m,w);for(var T=m.length,x=l?T:-1,$=jt(m);(l?x--:++x<T)&&w($[x],x,$)!==!1;);return m}}function fh(u){return function(l,m,w){for(var T=-1,x=jt(l),$=w(l),J=$.length;J--;){var ne=$[u?J:++T];if(m(x[ne],ne,x)===!1)break}return l}}function pm(u,l,m){var w=l&_,T=eu(u);function x(){var $=this&&this!==Mr&&this instanceof x?T:u;return $.apply(w?m:this,arguments)}return x}function ch(u){return function(l){l=Nt(l);var m=na(l)?Pn(l):r,w=m?m[0]:l.charAt(0),T=m?Ai(m,1).join(""):l.slice(1);return w[u]()+T}}function ca(u){return function(l){return yo(l0(o0(l).replace(iv,"")),u,"")}}function eu(u){return function(){var l=arguments;switch(l.length){case 0:return new u;case 1:return new u(l[0]);case 2:return new u(l[0],l[1]);case 3:return new u(l[0],l[1],l[2]);case 4:return new u(l[0],l[1],l[2],l[3]);case 5:return new u(l[0],l[1],l[2],l[3],l[4]);case 6:return new u(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new u(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var m=la(u.prototype),w=u.apply(m,l);return Qt(w)?w:m}}function vm(u,l,m){var w=eu(u);function T(){for(var x=arguments.length,$=oe(x),J=x,ne=ha(T);J--;)$[J]=arguments[J];var ge=x<3&&$[0]!==ne&&$[x-1]!==ne?[]:_i($,ne);if(x-=ge.length,x<m)return gh(u,l,Hu,T.placeholder,r,$,ge,r,r,m-x);var me=this&&this!==Mr&&this instanceof T?w:u;return on(me,this,$)}return T}function hh(u){return function(l,m,w){var T=jt(l);if(!Xr(l)){var x=Ze(m,3);l=Ar(l),m=function(J){return x(T[J],J,T)}}var $=u(l,m,w);return $>-1?T[x?l[$]:$]:r}}function dh(u){return ai(function(l){var m=l.length,w=m,T=wn.prototype.thru;for(u&&l.reverse();w--;){var x=l[w];if(typeof x!="function")throw new yn(s);if(T&&!$&&Yu(x)=="wrapper")var $=new wn([],!0)}for(w=$?w:m;++w<m;){x=l[w];var J=Yu(x),ne=J=="wrapper"?tl(x):r;ne&&al(ne[0])&&ne[1]==(P|E|A|B)&&!ne[4].length&&ne[9]==1?$=$[Yu(ne[0])].apply($,ne[3]):$=x.length==1&&al(x)?$[J]():$.thru(x)}return function(){var ge=arguments,me=ge[0];if($&&ge.length==1&&pt(me))return $.plant(me).value();for(var ye=0,xe=m?l[ye].apply(this,ge):me;++ye<m;)xe=l[ye].call(this,xe);return xe}})}function Hu(u,l,m,w,T,x,$,J,ne,ge){var me=l&P,ye=l&_,xe=l&D,qe=l&(E|C),Xe=l&N,wt=xe?r:eu(u);function et(){for(var Et=arguments.length,Ot=oe(Et),hn=Et;hn--;)Ot[hn]=arguments[hn];if(qe)var Zr=ha(et),dn=Sv(Ot,Zr);if(w&&(Ot=sh(Ot,w,T,qe)),x&&(Ot=oh(Ot,x,$,qe)),Et-=dn,qe&&Et<ge){var fr=_i(Ot,Zr);return gh(u,l,Hu,et.placeholder,m,Ot,fr,J,ne,ge-Et)}var In=ye?m:this,li=xe?In[u]:u;return Et=Ot.length,J?Ot=Nm(Ot,J):Xe&&Et>1&&Ot.reverse(),me&&ne<Et&&(Ot.length=ne),this&&this!==Mr&&this instanceof et&&(li=wt||eu(li)),li.apply(In,Ot)}return et}function ph(u,l){return function(m,w){return zg(m,u,l(w),{})}}function $u(u,l){return function(m,w){var T;if(m===r&&w===r)return l;if(m!==r&&(T=m),w!==r){if(T===r)return w;typeof m=="string"||typeof w=="string"?(m=fn(m),w=fn(w)):(m=Xc(m),w=Xc(w)),T=u(m,w)}return T}}function Jo(u){return ai(function(l){return l=Kt(l,ln(Ze())),At(function(m){var w=this;return u(l,function(T){return on(T,w,m)})})})}function Gu(u,l){l=l===r?" ":fn(l);var m=l.length;if(m<2)return m?Wo(l,u):l;var w=Wo(l,ku(u/ia(l)));return na(l)?Ai(Pn(w),0,u).join(""):w.slice(0,u)}function gm(u,l,m,w){var T=l&_,x=eu(u);function $(){for(var J=-1,ne=arguments.length,ge=-1,me=w.length,ye=oe(me+ne),xe=this&&this!==Mr&&this instanceof $?x:u;++ge<me;)ye[ge]=w[ge];for(;ne--;)ye[ge++]=arguments[++J];return on(xe,T?m:this,ye)}return $}function vh(u){return function(l,m,w){return w&&typeof w!="number"&&Yr(l,m,w)&&(m=w=r),l=oi(l),m===r?(m=l,l=0):m=oi(m),w=w===r?l<m?1:-1:oi(w),tm(l,m,w,u)}}function Ku(u){return function(l,m){return typeof l=="string"&&typeof m=="string"||(l=Fn(l),m=Fn(m)),u(l,m)}}function gh(u,l,m,w,T,x,$,J,ne,ge){var me=l&E,ye=me?$:r,xe=me?r:$,qe=me?x:r,Xe=me?r:x;l|=me?A:S,l&=~(me?S:A),l&F||(l&=~(_|D));var wt=[u,l,T,qe,ye,Xe,xe,J,ne,ge],et=m.apply(r,wt);return al(u)&&Bh(et,wt),et.placeholder=w,Oh(et,u,l)}function Qo(u){var l=mr[u];return function(m,w){if(m=Fn(m),w=w==null?0:qr(yt(w),292),w&&Oc(m)){var T=(Nt(m)+"e").split("e"),x=l(T[0]+"e"+(+T[1]+w));return T=(Nt(x)+"e").split("e"),+(T[0]+"e"+(+T[1]-w))}return l(m)}}var mm=sa&&1/Au(new sa([,-0]))[1]==Q?function(u){return new sa(u)}:Dl;function mh(u){return function(l){var m=zr(l);return m==lt?Bo(l):m==Vt?Iv(l):Fv(l,u(l))}}function ii(u,l,m,w,T,x,$,J){var ne=l&D;if(!ne&&typeof u!="function")throw new yn(s);var ge=w?w.length:0;if(ge||(l&=~(A|S),w=T=r),$=$===r?$:_r(yt($),0),J=J===r?J:yt(J),ge-=T?T.length:0,l&S){var me=w,ye=T;w=T=r}var xe=ne?r:tl(u),qe=[u,l,m,w,T,me,ye,x,$,J];if(xe&&Tm(qe,xe),u=qe[0],l=qe[1],m=qe[2],w=qe[3],T=qe[4],J=qe[9]=qe[9]===r?ne?0:u.length:_r(qe[9]-ge,0),!J&&l&(E|C)&&(l&=~(E|C)),!l||l==_)var Xe=pm(u,l,m);else l==E||l==C?Xe=vm(u,l,J):(l==A||l==(_|A))&&!T.length?Xe=gm(u,l,m,w):Xe=Hu.apply(r,qe);var wt=xe?Jc:Bh;return Oh(wt(Xe,qe),u,l)}function _h(u,l,m,w){return u===r||kn(u,ua[m])&&!Lt.call(w,m)?l:u}function bh(u,l,m,w,T,x){return Qt(u)&&Qt(l)&&(x.set(l,u),ju(u,l,r,bh,x),x.delete(l)),u}function _m(u){return nu(u)?r:u}function Dh(u,l,m,w,T,x){var $=m&b,J=u.length,ne=l.length;if(J!=ne&&!($&&ne>J))return!1;var ge=x.get(u),me=x.get(l);if(ge&&me)return ge==l&&me==u;var ye=-1,xe=!0,qe=m&v?new zi:r;for(x.set(u,l),x.set(l,u);++ye<J;){var Xe=u[ye],wt=l[ye];if(w)var et=$?w(wt,Xe,ye,l,u,x):w(Xe,wt,ye,u,l,x);if(et!==r){if(et)continue;xe=!1;break}if(qe){if(!wo(l,function(Et,Ot){if(!za(qe,Ot)&&(Xe===Et||T(Xe,Et,m,w,x)))return qe.push(Ot)})){xe=!1;break}}else if(!(Xe===wt||T(Xe,wt,m,w,x))){xe=!1;break}}return x.delete(u),x.delete(l),xe}function bm(u,l,m,w,T,x,$){switch(m){case de:if(u.byteLength!=l.byteLength||u.byteOffset!=l.byteOffset)return!1;u=u.buffer,l=l.buffer;case ie:return!(u.byteLength!=l.byteLength||!x(new Ou(u),new Ou(l)));case Dt:case rt:case ft:return kn(+u,+l);case St:return u.name==l.name&&u.message==l.message;case Mt:case Ht:return u==l+"";case lt:var J=Bo;case Vt:var ne=w&b;if(J||(J=Au),u.size!=l.size&&!ne)return!1;var ge=$.get(u);if(ge)return ge==l;w|=v,$.set(u,l);var me=Dh(J(u),J(l),w,T,x,$);return $.delete(u),me;case W:if(Ka)return Ka.call(u)==Ka.call(l)}return!1}function Dm(u,l,m,w,T,x){var $=m&b,J=Xo(u),ne=J.length,ge=Xo(l),me=ge.length;if(ne!=me&&!$)return!1;for(var ye=ne;ye--;){var xe=J[ye];if(!($?xe in l:Lt.call(l,xe)))return!1}var qe=x.get(u),Xe=x.get(l);if(qe&&Xe)return qe==l&&Xe==u;var wt=!0;x.set(u,l),x.set(l,u);for(var et=$;++ye<ne;){xe=J[ye];var Et=u[xe],Ot=l[xe];if(w)var hn=$?w(Ot,Et,xe,l,u,x):w(Et,Ot,xe,u,l,x);if(!(hn===r?Et===Ot||T(Et,Ot,m,w,x):hn)){wt=!1;break}et||(et=xe=="constructor")}if(wt&&!et){var Zr=u.constructor,dn=l.constructor;Zr!=dn&&"constructor"in u&&"constructor"in l&&!(typeof Zr=="function"&&Zr instanceof Zr&&typeof dn=="function"&&dn instanceof dn)&&(wt=!1)}return x.delete(u),x.delete(l),wt}function ai(u){return sl(Fh(u,r,Nh),u+"")}function Xo(u){return Vc(u,Ar,nl)}function el(u){return Vc(u,en,yh)}var tl=Nu?function(u){return Nu.get(u)}:Dl;function Yu(u){for(var l=u.name+"",m=oa[l],w=Lt.call(oa,l)?m.length:0;w--;){var T=m[w],x=T.func;if(x==null||x==u)return T.name}return l}function ha(u){var l=Lt.call(I,"placeholder")?I:u;return l.placeholder}function Ze(){var u=I.iteratee||_l;return u=u===_l?zc:u,arguments.length?u(arguments[0],arguments[1]):u}function Zu(u,l){var m=u.__data__;return Bm(l)?m[typeof l=="string"?"string":"hash"]:m.map}function rl(u){for(var l=Ar(u),m=l.length;m--;){var w=l[m],T=u[w];l[m]=[w,T,Eh(T)]}return l}function $i(u,l){var m=Pv(u,l);return qc(m)?m:r}function ym(u){var l=Lt.call(u,ji),m=u[ji];try{u[ji]=r;var w=!0}catch{}var T=Su.call(u);return w&&(l?u[ji]=m:delete u[ji]),T}var nl=Mo?function(u){return u==null?[]:(u=jt(u),gi(Mo(u),function(l){return Sc.call(u,l)}))}:yl,yh=Mo?function(u){for(var l=[];u;)mi(l,nl(u)),u=Mu(u);return l}:yl,zr=Kr;(Po&&zr(new Po(new ArrayBuffer(1)))!=de||Ha&&zr(new Ha)!=lt||To&&zr(To.resolve())!=Ee||sa&&zr(new sa)!=Vt||$a&&zr(new $a)!=ee)&&(zr=function(u){var l=Kr(u),m=l==Ye?u.constructor:r,w=m?Gi(m):"";if(w)switch(w){case ng:return de;case ig:return lt;case ag:return Ee;case ug:return Vt;case sg:return ee}return l});function wm(u,l,m){for(var w=-1,T=m.length;++w<T;){var x=m[w],$=x.size;switch(x.type){case"drop":u+=$;break;case"dropRight":l-=$;break;case"take":l=qr(l,u+$);break;case"takeRight":u=_r(u,l-$);break}}return{start:u,end:l}}function Am(u){var l=u.match(di);return l?l[1].split(mn):[]}function wh(u,l,m){l=wi(l,u);for(var w=-1,T=l.length,x=!1;++w<T;){var $=$n(l[w]);if(!(x=u!=null&&m(u,$)))break;u=u[$]}return x||++w!=T?x:(T=u==null?0:u.length,!!T&&ns(T)&&ui($,T)&&(pt(u)||Ki(u)))}function Em(u){var l=u.length,m=new u.constructor(l);return l&&typeof u[0]=="string"&&Lt.call(u,"index")&&(m.index=u.index,m.input=u.input),m}function Ah(u){return typeof u.constructor=="function"&&!tu(u)?la(Mu(u)):{}}function Cm(u,l,m){var w=u.constructor;switch(l){case ie:return Zo(u);case Dt:case rt:return new w(+u);case de:return om(u,m);case ue:case ce:case Ae:case Re:case Qe:case Oe:case zt:case Rt:case nr:return ah(u,m);case lt:return new w;case ft:case Ht:return new w(u);case Mt:return lm(u);case Vt:return new w;case W:return fm(u)}}function Fm(u,l){var m=l.length;if(!m)return u;var w=m-1;return l[w]=(m>1?"& ":"")+l[w],l=l.join(m>2?", ":" "),u.replace(Oa,`{
/* [wrapped with `+l+`] */
`)}function Sm(u){return pt(u)||Ki(u)||!!(Bc&&u&&u[Bc])}function ui(u,l){var m=typeof u;return l=l??ae,!!l&&(m=="number"||m!="symbol"&&xa.test(u))&&u>-1&&u%1==0&&u<l}function Yr(u,l,m){if(!Qt(m))return!1;var w=typeof l;return(w=="number"?Xr(m)&&ui(l,m.length):w=="string"&&l in m)?kn(m[l],u):!1}function il(u,l){if(pt(u))return!1;var m=typeof u;return m=="number"||m=="symbol"||m=="boolean"||u==null||cn(u)?!0:jn.test(u)||!Vn.test(u)||l!=null&&u in jt(l)}function Bm(u){var l=typeof u;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?u!=="__proto__":u===null}function al(u){var l=Yu(u),m=I[l];if(typeof m!="function"||!(l in Ct.prototype))return!1;if(u===m)return!0;var w=tl(m);return!!w&&u===w[0]}function Om(u){return!!Ec&&Ec in u}var Mm=Cu?si:wl;function tu(u){var l=u&&u.constructor,m=typeof l=="function"&&l.prototype||ua;return u===m}function Eh(u){return u===u&&!Qt(u)}function Ch(u,l){return function(m){return m==null?!1:m[u]===l&&(l!==r||u in jt(m))}}function Pm(u){var l=ts(u,function(w){return m.size===p&&m.clear(),w}),m=l.cache;return l}function Tm(u,l){var m=u[1],w=l[1],T=m|w,x=T<(_|D|P),$=w==P&&m==E||w==P&&m==B&&u[7].length<=l[8]||w==(P|B)&&l[7].length<=l[8]&&m==E;if(!(x||$))return u;w&_&&(u[2]=l[2],T|=m&_?0:F);var J=l[3];if(J){var ne=u[3];u[3]=ne?sh(ne,J,l[4]):J,u[4]=ne?_i(u[3],c):l[4]}return J=l[5],J&&(ne=u[5],u[5]=ne?oh(ne,J,l[6]):J,u[6]=ne?_i(u[5],c):l[6]),J=l[7],J&&(u[7]=J),w&P&&(u[8]=u[8]==null?l[8]:qr(u[8],l[8])),u[9]==null&&(u[9]=l[9]),u[0]=l[0],u[1]=T,u}function km(u){var l=[];if(u!=null)for(var m in jt(u))l.push(m);return l}function Im(u){return Su.call(u)}function Fh(u,l,m){return l=_r(l===r?u.length-1:l,0),function(){for(var w=arguments,T=-1,x=_r(w.length-l,0),$=oe(x);++T<x;)$[T]=w[l+T];T=-1;for(var J=oe(l+1);++T<l;)J[T]=w[T];return J[l]=m($),on(u,this,J)}}function Sh(u,l){return l.length<2?u:Hi(u,En(l,0,-1))}function Nm(u,l){for(var m=u.length,w=qr(l.length,m),T=Qr(u);w--;){var x=l[w];u[w]=ui(x,m)?T[x]:r}return u}function ul(u,l){if(!(l==="constructor"&&typeof u[l]=="function")&&l!="__proto__")return u[l]}var Bh=Mh(Jc),ru=Zv||function(u,l){return Mr.setTimeout(u,l)},sl=Mh(im);function Oh(u,l,m){var w=l+"";return sl(u,Fm(w,xm(Am(w),m)))}function Mh(u){var l=0,m=0;return function(){var w=eg(),T=U-(w-m);if(m=w,T>0){if(++l>=K)return arguments[0]}else l=0;return u.apply(r,arguments)}}function Ju(u,l){var m=-1,w=u.length,T=w-1;for(l=l===r?w:l;++m<l;){var x=zo(m,T),$=u[x];u[x]=u[m],u[m]=$}return u.length=l,u}var Ph=Pm(function(u){var l=[];return u.charCodeAt(0)===46&&l.push(""),u.replace(Qi,function(m,w,T,x){l.push(T?x.replace(Ma,"$1"):w||m)}),l});function $n(u){if(typeof u=="string"||cn(u))return u;var l=u+"";return l=="0"&&1/u==-Q?"-0":l}function Gi(u){if(u!=null){try{return Fu.call(u)}catch{}try{return u+""}catch{}}return""}function xm(u,l){return Dn(je,function(m){var w="_."+m[0];l&m[1]&&!yu(u,w)&&u.push(w)}),u.sort()}function Th(u){if(u instanceof Ct)return u.clone();var l=new wn(u.__wrapped__,u.__chain__);return l.__actions__=Qr(u.__actions__),l.__index__=u.__index__,l.__values__=u.__values__,l}function Rm(u,l,m){(m?Yr(u,l,m):l===r)?l=1:l=_r(yt(l),0);var w=u==null?0:u.length;if(!w||l<1)return[];for(var T=0,x=0,$=oe(ku(w/l));T<w;)$[x++]=En(u,T,T+=l);return $}function Lm(u){for(var l=-1,m=u==null?0:u.length,w=0,T=[];++l<m;){var x=u[l];x&&(T[w++]=x)}return T}function Um(){var u=arguments.length;if(!u)return[];for(var l=oe(u-1),m=arguments[0],w=u;w--;)l[w-1]=arguments[w];return mi(pt(m)?Qr(m):[m],Pr(l,1))}var Vm=At(function(u,l){return lr(u)?Za(u,Pr(l,1,lr,!0)):[]}),jm=At(function(u,l){var m=Cn(l);return lr(m)&&(m=r),lr(u)?Za(u,Pr(l,1,lr,!0),Ze(m,2)):[]}),qm=At(function(u,l){var m=Cn(l);return lr(m)&&(m=r),lr(u)?Za(u,Pr(l,1,lr,!0),r,m):[]});function zm(u,l,m){var w=u==null?0:u.length;return w?(l=m||l===r?1:yt(l),En(u,l<0?0:l,w)):[]}function Wm(u,l,m){var w=u==null?0:u.length;return w?(l=m||l===r?1:yt(l),l=w-l,En(u,0,l<0?0:l)):[]}function Hm(u,l){return u&&u.length?zu(u,Ze(l,3),!0,!0):[]}function $m(u,l){return u&&u.length?zu(u,Ze(l,3),!0):[]}function Gm(u,l,m,w){var T=u==null?0:u.length;return T?(m&&typeof m!="number"&&Yr(u,l,m)&&(m=0,w=T),Ug(u,l,m,w)):[]}function kh(u,l,m){var w=u==null?0:u.length;if(!w)return-1;var T=m==null?0:yt(m);return T<0&&(T=_r(w+T,0)),wu(u,Ze(l,3),T)}function Ih(u,l,m){var w=u==null?0:u.length;if(!w)return-1;var T=w-1;return m!==r&&(T=yt(m),T=m<0?_r(w+T,0):qr(T,w-1)),wu(u,Ze(l,3),T,!0)}function Nh(u){var l=u==null?0:u.length;return l?Pr(u,1):[]}function Km(u){var l=u==null?0:u.length;return l?Pr(u,Q):[]}function Ym(u,l){var m=u==null?0:u.length;return m?(l=l===r?1:yt(l),Pr(u,l)):[]}function Zm(u){for(var l=-1,m=u==null?0:u.length,w={};++l<m;){var T=u[l];w[T[0]]=T[1]}return w}function xh(u){return u&&u.length?u[0]:r}function Jm(u,l,m){var w=u==null?0:u.length;if(!w)return-1;var T=m==null?0:yt(m);return T<0&&(T=_r(w+T,0)),ra(u,l,T)}function Qm(u){var l=u==null?0:u.length;return l?En(u,0,-1):[]}var Xm=At(function(u){var l=Kt(u,Ko);return l.length&&l[0]===u[0]?Lo(l):[]}),e_=At(function(u){var l=Cn(u),m=Kt(u,Ko);return l===Cn(m)?l=r:m.pop(),m.length&&m[0]===u[0]?Lo(m,Ze(l,2)):[]}),t_=At(function(u){var l=Cn(u),m=Kt(u,Ko);return l=typeof l=="function"?l:r,l&&m.pop(),m.length&&m[0]===u[0]?Lo(m,r,l):[]});function r_(u,l){return u==null?"":Qv.call(u,l)}function Cn(u){var l=u==null?0:u.length;return l?u[l-1]:r}function n_(u,l,m){var w=u==null?0:u.length;if(!w)return-1;var T=w;return m!==r&&(T=yt(m),T=T<0?_r(w+T,0):qr(T,w-1)),l===l?xv(u,l,T):wu(u,gc,T,!0)}function i_(u,l){return u&&u.length?Gc(u,yt(l)):r}var a_=At(Rh);function Rh(u,l){return u&&u.length&&l&&l.length?qo(u,l):u}function u_(u,l,m){return u&&u.length&&l&&l.length?qo(u,l,Ze(m,2)):u}function s_(u,l,m){return u&&u.length&&l&&l.length?qo(u,l,r,m):u}var o_=ai(function(u,l){var m=u==null?0:u.length,w=Io(u,l);return Zc(u,Kt(l,function(T){return ui(T,m)?+T:T}).sort(uh)),w});function l_(u,l){var m=[];if(!(u&&u.length))return m;var w=-1,T=[],x=u.length;for(l=Ze(l,3);++w<x;){var $=u[w];l($,w,u)&&(m.push($),T.push(w))}return Zc(u,T),m}function ol(u){return u==null?u:rg.call(u)}function f_(u,l,m){var w=u==null?0:u.length;return w?(m&&typeof m!="number"&&Yr(u,l,m)?(l=0,m=w):(l=l==null?0:yt(l),m=m===r?w:yt(m)),En(u,l,m)):[]}function c_(u,l){return qu(u,l)}function h_(u,l,m){return Ho(u,l,Ze(m,2))}function d_(u,l){var m=u==null?0:u.length;if(m){var w=qu(u,l);if(w<m&&kn(u[w],l))return w}return-1}function p_(u,l){return qu(u,l,!0)}function v_(u,l,m){return Ho(u,l,Ze(m,2),!0)}function g_(u,l){var m=u==null?0:u.length;if(m){var w=qu(u,l,!0)-1;if(kn(u[w],l))return w}return-1}function m_(u){return u&&u.length?Qc(u):[]}function __(u,l){return u&&u.length?Qc(u,Ze(l,2)):[]}function b_(u){var l=u==null?0:u.length;return l?En(u,1,l):[]}function D_(u,l,m){return u&&u.length?(l=m||l===r?1:yt(l),En(u,0,l<0?0:l)):[]}function y_(u,l,m){var w=u==null?0:u.length;return w?(l=m||l===r?1:yt(l),l=w-l,En(u,l<0?0:l,w)):[]}function w_(u,l){return u&&u.length?zu(u,Ze(l,3),!1,!0):[]}function A_(u,l){return u&&u.length?zu(u,Ze(l,3)):[]}var E_=At(function(u){return yi(Pr(u,1,lr,!0))}),C_=At(function(u){var l=Cn(u);return lr(l)&&(l=r),yi(Pr(u,1,lr,!0),Ze(l,2))}),F_=At(function(u){var l=Cn(u);return l=typeof l=="function"?l:r,yi(Pr(u,1,lr,!0),r,l)});function S_(u){return u&&u.length?yi(u):[]}function B_(u,l){return u&&u.length?yi(u,Ze(l,2)):[]}function O_(u,l){return l=typeof l=="function"?l:r,u&&u.length?yi(u,r,l):[]}function ll(u){if(!(u&&u.length))return[];var l=0;return u=gi(u,function(m){if(lr(m))return l=_r(m.length,l),!0}),Fo(l,function(m){return Kt(u,Ao(m))})}function Lh(u,l){if(!(u&&u.length))return[];var m=ll(u);return l==null?m:Kt(m,function(w){return on(l,r,w)})}var M_=At(function(u,l){return lr(u)?Za(u,l):[]}),P_=At(function(u){return Go(gi(u,lr))}),T_=At(function(u){var l=Cn(u);return lr(l)&&(l=r),Go(gi(u,lr),Ze(l,2))}),k_=At(function(u){var l=Cn(u);return l=typeof l=="function"?l:r,Go(gi(u,lr),r,l)}),I_=At(ll);function N_(u,l){return rh(u||[],l||[],Ya)}function x_(u,l){return rh(u||[],l||[],Xa)}var R_=At(function(u){var l=u.length,m=l>1?u[l-1]:r;return m=typeof m=="function"?(u.pop(),m):r,Lh(u,m)});function Uh(u){var l=I(u);return l.__chain__=!0,l}function L_(u,l){return l(u),u}function Qu(u,l){return l(u)}var U_=ai(function(u){var l=u.length,m=l?u[0]:0,w=this.__wrapped__,T=function(x){return Io(x,u)};return l>1||this.__actions__.length||!(w instanceof Ct)||!ui(m)?this.thru(T):(w=w.slice(m,+m+(l?1:0)),w.__actions__.push({func:Qu,args:[T],thisArg:r}),new wn(w,this.__chain__).thru(function(x){return l&&!x.length&&x.push(r),x}))});function V_(){return Uh(this)}function j_(){return new wn(this.value(),this.__chain__)}function q_(){this.__values__===r&&(this.__values__=Xh(this.value()));var u=this.__index__>=this.__values__.length,l=u?r:this.__values__[this.__index__++];return{done:u,value:l}}function z_(){return this}function W_(u){for(var l,m=this;m instanceof Ru;){var w=Th(m);w.__index__=0,w.__values__=r,l?T.__wrapped__=w:l=w;var T=w;m=m.__wrapped__}return T.__wrapped__=u,l}function H_(){var u=this.__wrapped__;if(u instanceof Ct){var l=u;return this.__actions__.length&&(l=new Ct(this)),l=l.reverse(),l.__actions__.push({func:Qu,args:[ol],thisArg:r}),new wn(l,this.__chain__)}return this.thru(ol)}function $_(){return th(this.__wrapped__,this.__actions__)}var G_=Wu(function(u,l,m){Lt.call(u,m)?++u[m]:ni(u,m,1)});function K_(u,l,m){var w=pt(u)?pc:Lg;return m&&Yr(u,l,m)&&(l=r),w(u,Ze(l,3))}function Y_(u,l){var m=pt(u)?gi:Lc;return m(u,Ze(l,3))}var Z_=hh(kh),J_=hh(Ih);function Q_(u,l){return Pr(Xu(u,l),1)}function X_(u,l){return Pr(Xu(u,l),Q)}function eb(u,l,m){return m=m===r?1:yt(m),Pr(Xu(u,l),m)}function Vh(u,l){var m=pt(u)?Dn:Di;return m(u,Ze(l,3))}function jh(u,l){var m=pt(u)?bv:Rc;return m(u,Ze(l,3))}var tb=Wu(function(u,l,m){Lt.call(u,m)?u[m].push(l):ni(u,m,[l])});function rb(u,l,m,w){u=Xr(u)?u:pa(u),m=m&&!w?yt(m):0;var T=u.length;return m<0&&(m=_r(T+m,0)),is(u)?m<=T&&u.indexOf(l,m)>-1:!!T&&ra(u,l,m)>-1}var nb=At(function(u,l,m){var w=-1,T=typeof l=="function",x=Xr(u)?oe(u.length):[];return Di(u,function($){x[++w]=T?on(l,$,m):Ja($,l,m)}),x}),ib=Wu(function(u,l,m){ni(u,m,l)});function Xu(u,l){var m=pt(u)?Kt:Wc;return m(u,Ze(l,3))}function ab(u,l,m,w){return u==null?[]:(pt(l)||(l=l==null?[]:[l]),m=w?r:m,pt(m)||(m=m==null?[]:[m]),Kc(u,l,m))}var ub=Wu(function(u,l,m){u[m?0:1].push(l)},function(){return[[],[]]});function sb(u,l,m){var w=pt(u)?yo:_c,T=arguments.length<3;return w(u,Ze(l,4),m,T,Di)}function ob(u,l,m){var w=pt(u)?Dv:_c,T=arguments.length<3;return w(u,Ze(l,4),m,T,Rc)}function lb(u,l){var m=pt(u)?gi:Lc;return m(u,rs(Ze(l,3)))}function fb(u){var l=pt(u)?kc:rm;return l(u)}function cb(u,l,m){(m?Yr(u,l,m):l===r)?l=1:l=yt(l);var w=pt(u)?kg:nm;return w(u,l)}function hb(u){var l=pt(u)?Ig:am;return l(u)}function db(u){if(u==null)return 0;if(Xr(u))return is(u)?ia(u):u.length;var l=zr(u);return l==lt||l==Vt?u.size:Vo(u).length}function pb(u,l,m){var w=pt(u)?wo:um;return m&&Yr(u,l,m)&&(l=r),w(u,Ze(l,3))}var vb=At(function(u,l){if(u==null)return[];var m=l.length;return m>1&&Yr(u,l[0],l[1])?l=[]:m>2&&Yr(l[0],l[1],l[2])&&(l=[l[0]]),Kc(u,Pr(l,1),[])}),es=Yv||function(){return Mr.Date.now()};function gb(u,l){if(typeof l!="function")throw new yn(s);return u=yt(u),function(){if(--u<1)return l.apply(this,arguments)}}function qh(u,l,m){return l=m?r:l,l=u&&l==null?u.length:l,ii(u,P,r,r,r,r,l)}function zh(u,l){var m;if(typeof l!="function")throw new yn(s);return u=yt(u),function(){return--u>0&&(m=l.apply(this,arguments)),u<=1&&(l=r),m}}var fl=At(function(u,l,m){var w=_;if(m.length){var T=_i(m,ha(fl));w|=A}return ii(u,w,l,m,T)}),Wh=At(function(u,l,m){var w=_|D;if(m.length){var T=_i(m,ha(Wh));w|=A}return ii(l,w,u,m,T)});function Hh(u,l,m){l=m?r:l;var w=ii(u,E,r,r,r,r,r,l);return w.placeholder=Hh.placeholder,w}function $h(u,l,m){l=m?r:l;var w=ii(u,C,r,r,r,r,r,l);return w.placeholder=$h.placeholder,w}function Gh(u,l,m){var w,T,x,$,J,ne,ge=0,me=!1,ye=!1,xe=!0;if(typeof u!="function")throw new yn(s);l=Fn(l)||0,Qt(m)&&(me=!!m.leading,ye="maxWait"in m,x=ye?_r(Fn(m.maxWait)||0,l):x,xe="trailing"in m?!!m.trailing:xe);function qe(fr){var In=w,li=T;return w=T=r,ge=fr,$=u.apply(li,In),$}function Xe(fr){return ge=fr,J=ru(Et,l),me?qe(fr):$}function wt(fr){var In=fr-ne,li=fr-ge,h0=l-In;return ye?qr(h0,x-li):h0}function et(fr){var In=fr-ne,li=fr-ge;return ne===r||In>=l||In<0||ye&&li>=x}function Et(){var fr=es();if(et(fr))return Ot(fr);J=ru(Et,wt(fr))}function Ot(fr){return J=r,xe&&w?qe(fr):(w=T=r,$)}function hn(){J!==r&&nh(J),ge=0,w=ne=T=J=r}function Zr(){return J===r?$:Ot(es())}function dn(){var fr=es(),In=et(fr);if(w=arguments,T=this,ne=fr,In){if(J===r)return Xe(ne);if(ye)return nh(J),J=ru(Et,l),qe(ne)}return J===r&&(J=ru(Et,l)),$}return dn.cancel=hn,dn.flush=Zr,dn}var mb=At(function(u,l){return xc(u,1,l)}),_b=At(function(u,l,m){return xc(u,Fn(l)||0,m)});function bb(u){return ii(u,N)}function ts(u,l){if(typeof u!="function"||l!=null&&typeof l!="function")throw new yn(s);var m=function(){var w=arguments,T=l?l.apply(this,w):w[0],x=m.cache;if(x.has(T))return x.get(T);var $=u.apply(this,w);return m.cache=x.set(T,$)||x,$};return m.cache=new(ts.Cache||ri),m}ts.Cache=ri;function rs(u){if(typeof u!="function")throw new yn(s);return function(){var l=arguments;switch(l.length){case 0:return!u.call(this);case 1:return!u.call(this,l[0]);case 2:return!u.call(this,l[0],l[1]);case 3:return!u.call(this,l[0],l[1],l[2])}return!u.apply(this,l)}}function Db(u){return zh(2,u)}var yb=sm(function(u,l){l=l.length==1&&pt(l[0])?Kt(l[0],ln(Ze())):Kt(Pr(l,1),ln(Ze()));var m=l.length;return At(function(w){for(var T=-1,x=qr(w.length,m);++T<x;)w[T]=l[T].call(this,w[T]);return on(u,this,w)})}),cl=At(function(u,l){var m=_i(l,ha(cl));return ii(u,A,r,l,m)}),Kh=At(function(u,l){var m=_i(l,ha(Kh));return ii(u,S,r,l,m)}),wb=ai(function(u,l){return ii(u,B,r,r,r,l)});function Ab(u,l){if(typeof u!="function")throw new yn(s);return l=l===r?l:yt(l),At(u,l)}function Eb(u,l){if(typeof u!="function")throw new yn(s);return l=l==null?0:_r(yt(l),0),At(function(m){var w=m[l],T=Ai(m,0,l);return w&&mi(T,w),on(u,this,T)})}function Cb(u,l,m){var w=!0,T=!0;if(typeof u!="function")throw new yn(s);return Qt(m)&&(w="leading"in m?!!m.leading:w,T="trailing"in m?!!m.trailing:T),Gh(u,l,{leading:w,maxWait:l,trailing:T})}function Fb(u){return qh(u,1)}function Sb(u,l){return cl(Yo(l),u)}function Bb(){if(!arguments.length)return[];var u=arguments[0];return pt(u)?u:[u]}function Ob(u){return An(u,g)}function Mb(u,l){return l=typeof l=="function"?l:r,An(u,g,l)}function Pb(u){return An(u,h|g)}function Tb(u,l){return l=typeof l=="function"?l:r,An(u,h|g,l)}function kb(u,l){return l==null||Nc(u,l,Ar(l))}function kn(u,l){return u===l||u!==u&&l!==l}var Ib=Ku(Ro),Nb=Ku(function(u,l){return u>=l}),Ki=jc(function(){return arguments}())?jc:function(u){return ar(u)&&Lt.call(u,"callee")&&!Sc.call(u,"callee")},pt=oe.isArray,xb=oc?ln(oc):Wg;function Xr(u){return u!=null&&ns(u.length)&&!si(u)}function lr(u){return ar(u)&&Xr(u)}function Rb(u){return u===!0||u===!1||ar(u)&&Kr(u)==Dt}var Ei=Jv||wl,Lb=lc?ln(lc):Hg;function Ub(u){return ar(u)&&u.nodeType===1&&!nu(u)}function Vb(u){if(u==null)return!0;if(Xr(u)&&(pt(u)||typeof u=="string"||typeof u.splice=="function"||Ei(u)||da(u)||Ki(u)))return!u.length;var l=zr(u);if(l==lt||l==Vt)return!u.size;if(tu(u))return!Vo(u).length;for(var m in u)if(Lt.call(u,m))return!1;return!0}function jb(u,l){return Qa(u,l)}function qb(u,l,m){m=typeof m=="function"?m:r;var w=m?m(u,l):r;return w===r?Qa(u,l,r,m):!!w}function hl(u){if(!ar(u))return!1;var l=Kr(u);return l==St||l==it||typeof u.message=="string"&&typeof u.name=="string"&&!nu(u)}function zb(u){return typeof u=="number"&&Oc(u)}function si(u){if(!Qt(u))return!1;var l=Kr(u);return l==nt||l==ht||l==ot||l==Ne}function Yh(u){return typeof u=="number"&&u==yt(u)}function ns(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=ae}function Qt(u){var l=typeof u;return u!=null&&(l=="object"||l=="function")}function ar(u){return u!=null&&typeof u=="object"}var Zh=fc?ln(fc):Gg;function Wb(u,l){return u===l||Uo(u,l,rl(l))}function Hb(u,l,m){return m=typeof m=="function"?m:r,Uo(u,l,rl(l),m)}function $b(u){return Jh(u)&&u!=+u}function Gb(u){if(Mm(u))throw new dt(a);return qc(u)}function Kb(u){return u===null}function Yb(u){return u==null}function Jh(u){return typeof u=="number"||ar(u)&&Kr(u)==ft}function nu(u){if(!ar(u)||Kr(u)!=Ye)return!1;var l=Mu(u);if(l===null)return!0;var m=Lt.call(l,"constructor")&&l.constructor;return typeof m=="function"&&m instanceof m&&Fu.call(m)==Hv}var dl=cc?ln(cc):Kg;function Zb(u){return Yh(u)&&u>=-ae&&u<=ae}var Qh=hc?ln(hc):Yg;function is(u){return typeof u=="string"||!pt(u)&&ar(u)&&Kr(u)==Ht}function cn(u){return typeof u=="symbol"||ar(u)&&Kr(u)==W}var da=dc?ln(dc):Zg;function Jb(u){return u===r}function Qb(u){return ar(u)&&zr(u)==ee}function Xb(u){return ar(u)&&Kr(u)==le}var eD=Ku(jo),tD=Ku(function(u,l){return u<=l});function Xh(u){if(!u)return[];if(Xr(u))return is(u)?Pn(u):Qr(u);if(Wa&&u[Wa])return kv(u[Wa]());var l=zr(u),m=l==lt?Bo:l==Vt?Au:pa;return m(u)}function oi(u){if(!u)return u===0?u:0;if(u=Fn(u),u===Q||u===-Q){var l=u<0?-1:1;return l*se}return u===u?u:0}function yt(u){var l=oi(u),m=l%1;return l===l?m?l-m:l:0}function e0(u){return u?Wi(yt(u),0,Ce):0}function Fn(u){if(typeof u=="number")return u;if(cn(u))return he;if(Qt(u)){var l=typeof u.valueOf=="function"?u.valueOf():u;u=Qt(l)?l+"":l}if(typeof u!="string")return u===0?u:+u;u=bc(u);var m=ka.test(u);return m||Na.test(u)?gv(u.slice(2),m?2:8):Ta.test(u)?he:+u}function t0(u){return Hn(u,en(u))}function rD(u){return u?Wi(yt(u),-ae,ae):u===0?u:0}function Nt(u){return u==null?"":fn(u)}var nD=fa(function(u,l){if(tu(l)||Xr(l)){Hn(l,Ar(l),u);return}for(var m in l)Lt.call(l,m)&&Ya(u,m,l[m])}),r0=fa(function(u,l){Hn(l,en(l),u)}),as=fa(function(u,l,m,w){Hn(l,en(l),u,w)}),iD=fa(function(u,l,m,w){Hn(l,Ar(l),u,w)}),aD=ai(Io);function uD(u,l){var m=la(u);return l==null?m:Ic(m,l)}var sD=At(function(u,l){u=jt(u);var m=-1,w=l.length,T=w>2?l[2]:r;for(T&&Yr(l[0],l[1],T)&&(w=1);++m<w;)for(var x=l[m],$=en(x),J=-1,ne=$.length;++J<ne;){var ge=$[J],me=u[ge];(me===r||kn(me,ua[ge])&&!Lt.call(u,ge))&&(u[ge]=x[ge])}return u}),oD=At(function(u){return u.push(r,bh),on(n0,r,u)});function lD(u,l){return vc(u,Ze(l,3),Wn)}function fD(u,l){return vc(u,Ze(l,3),xo)}function cD(u,l){return u==null?u:No(u,Ze(l,3),en)}function hD(u,l){return u==null?u:Uc(u,Ze(l,3),en)}function dD(u,l){return u&&Wn(u,Ze(l,3))}function pD(u,l){return u&&xo(u,Ze(l,3))}function vD(u){return u==null?[]:Vu(u,Ar(u))}function gD(u){return u==null?[]:Vu(u,en(u))}function pl(u,l,m){var w=u==null?r:Hi(u,l);return w===r?m:w}function mD(u,l){return u!=null&&wh(u,l,Vg)}function vl(u,l){return u!=null&&wh(u,l,jg)}var _D=ph(function(u,l,m){l!=null&&typeof l.toString!="function"&&(l=Su.call(l)),u[l]=m},ml(tn)),bD=ph(function(u,l,m){l!=null&&typeof l.toString!="function"&&(l=Su.call(l)),Lt.call(u,l)?u[l].push(m):u[l]=[m]},Ze),DD=At(Ja);function Ar(u){return Xr(u)?Tc(u):Vo(u)}function en(u){return Xr(u)?Tc(u,!0):Jg(u)}function yD(u,l){var m={};return l=Ze(l,3),Wn(u,function(w,T,x){ni(m,l(w,T,x),w)}),m}function wD(u,l){var m={};return l=Ze(l,3),Wn(u,function(w,T,x){ni(m,T,l(w,T,x))}),m}var AD=fa(function(u,l,m){ju(u,l,m)}),n0=fa(function(u,l,m,w){ju(u,l,m,w)}),ED=ai(function(u,l){var m={};if(u==null)return m;var w=!1;l=Kt(l,function(x){return x=wi(x,u),w||(w=x.length>1),x}),Hn(u,el(u),m),w&&(m=An(m,h|d|g,_m));for(var T=l.length;T--;)$o(m,l[T]);return m});function CD(u,l){return i0(u,rs(Ze(l)))}var FD=ai(function(u,l){return u==null?{}:Xg(u,l)});function i0(u,l){if(u==null)return{};var m=Kt(el(u),function(w){return[w]});return l=Ze(l),Yc(u,m,function(w,T){return l(w,T[0])})}function SD(u,l,m){l=wi(l,u);var w=-1,T=l.length;for(T||(T=1,u=r);++w<T;){var x=u==null?r:u[$n(l[w])];x===r&&(w=T,x=m),u=si(x)?x.call(u):x}return u}function BD(u,l,m){return u==null?u:Xa(u,l,m)}function OD(u,l,m,w){return w=typeof w=="function"?w:r,u==null?u:Xa(u,l,m,w)}var a0=mh(Ar),u0=mh(en);function MD(u,l,m){var w=pt(u),T=w||Ei(u)||da(u);if(l=Ze(l,4),m==null){var x=u&&u.constructor;T?m=w?new x:[]:Qt(u)?m=si(x)?la(Mu(u)):{}:m={}}return(T?Dn:Wn)(u,function($,J,ne){return l(m,$,J,ne)}),m}function PD(u,l){return u==null?!0:$o(u,l)}function TD(u,l,m){return u==null?u:eh(u,l,Yo(m))}function kD(u,l,m,w){return w=typeof w=="function"?w:r,u==null?u:eh(u,l,Yo(m),w)}function pa(u){return u==null?[]:So(u,Ar(u))}function ID(u){return u==null?[]:So(u,en(u))}function ND(u,l,m){return m===r&&(m=l,l=r),m!==r&&(m=Fn(m),m=m===m?m:0),l!==r&&(l=Fn(l),l=l===l?l:0),Wi(Fn(u),l,m)}function xD(u,l,m){return l=oi(l),m===r?(m=l,l=0):m=oi(m),u=Fn(u),qg(u,l,m)}function RD(u,l,m){if(m&&typeof m!="boolean"&&Yr(u,l,m)&&(l=m=r),m===r&&(typeof l=="boolean"?(m=l,l=r):typeof u=="boolean"&&(m=u,u=r)),u===r&&l===r?(u=0,l=1):(u=oi(u),l===r?(l=u,u=0):l=oi(l)),u>l){var w=u;u=l,l=w}if(m||u%1||l%1){var T=Mc();return qr(u+T*(l-u+vv("1e-"+((T+"").length-1))),l)}return zo(u,l)}var LD=ca(function(u,l,m){return l=l.toLowerCase(),u+(m?s0(l):l)});function s0(u){return gl(Nt(u).toLowerCase())}function o0(u){return u=Nt(u),u&&u.replace(Ra,Bv).replace(av,"")}function UD(u,l,m){u=Nt(u),l=fn(l);var w=u.length;m=m===r?w:Wi(yt(m),0,w);var T=m;return m-=l.length,m>=0&&u.slice(m,T)==l}function VD(u){return u=Nt(u),u&&gn.test(u)?u.replace(cr,Ov):u}function jD(u){return u=Nt(u),u&&Ba.test(u)?u.replace(xi,"\\$&"):u}var qD=ca(function(u,l,m){return u+(m?"-":"")+l.toLowerCase()}),zD=ca(function(u,l,m){return u+(m?" ":"")+l.toLowerCase()}),WD=ch("toLowerCase");function HD(u,l,m){u=Nt(u),l=yt(l);var w=l?ia(u):0;if(!l||w>=l)return u;var T=(l-w)/2;return Gu(Iu(T),m)+u+Gu(ku(T),m)}function $D(u,l,m){u=Nt(u),l=yt(l);var w=l?ia(u):0;return l&&w<l?u+Gu(l-w,m):u}function GD(u,l,m){u=Nt(u),l=yt(l);var w=l?ia(u):0;return l&&w<l?Gu(l-w,m)+u:u}function KD(u,l,m){return m||l==null?l=0:l&&(l=+l),tg(Nt(u).replace(Or,""),l||0)}function YD(u,l,m){return(m?Yr(u,l,m):l===r)?l=1:l=yt(l),Wo(Nt(u),l)}function ZD(){var u=arguments,l=Nt(u[0]);return u.length<3?l:l.replace(u[1],u[2])}var JD=ca(function(u,l,m){return u+(m?"_":"")+l.toLowerCase()});function QD(u,l,m){return m&&typeof m!="number"&&Yr(u,l,m)&&(l=m=r),m=m===r?Ce:m>>>0,m?(u=Nt(u),u&&(typeof l=="string"||l!=null&&!dl(l))&&(l=fn(l),!l&&na(u))?Ai(Pn(u),0,m):u.split(l,m)):[]}var XD=ca(function(u,l,m){return u+(m?" ":"")+gl(l)});function ey(u,l,m){return u=Nt(u),m=m==null?0:Wi(yt(m),0,u.length),l=fn(l),u.slice(m,m+l.length)==l}function ty(u,l,m){var w=I.templateSettings;m&&Yr(u,l,m)&&(l=r),u=Nt(u),l=as({},l,w,_h);var T=as({},l.imports,w.imports,_h),x=Ar(T),$=So(T,x),J,ne,ge=0,me=l.interpolate||pi,ye="__p += '",xe=Oo((l.escape||pi).source+"|"+me.source+"|"+(me===Qn?Pa:pi).source+"|"+(l.evaluate||pi).source+"|$","g"),qe="//# sourceURL="+(Lt.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++fv+"]")+`
`;u.replace(xe,function(et,Et,Ot,hn,Zr,dn){return Ot||(Ot=hn),ye+=u.slice(ge,dn).replace(La,Mv),Et&&(J=!0,ye+=`' +
__e(`+Et+`) +
'`),Zr&&(ne=!0,ye+=`';
`+Zr+`;
__p += '`),Ot&&(ye+=`' +
((__t = (`+Ot+`)) == null ? '' : __t) +
'`),ge=dn+et.length,et}),ye+=`';
`;var Xe=Lt.call(l,"variable")&&l.variable;if(!Xe)ye=`with (obj) {
`+ye+`
}
`;else if(Ri.test(Xe))throw new dt(o);ye=(ne?ye.replace(Zt,""):ye).replace(Dr,"$1").replace(Jt,"$1;"),ye="function("+(Xe||"obj")+`) {
`+(Xe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(J?", __e = _.escape":"")+(ne?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ye+`return __p
}`;var wt=f0(function(){return It(x,qe+"return "+ye).apply(r,$)});if(wt.source=ye,hl(wt))throw wt;return wt}function ry(u){return Nt(u).toLowerCase()}function ny(u){return Nt(u).toUpperCase()}function iy(u,l,m){if(u=Nt(u),u&&(m||l===r))return bc(u);if(!u||!(l=fn(l)))return u;var w=Pn(u),T=Pn(l),x=Dc(w,T),$=yc(w,T)+1;return Ai(w,x,$).join("")}function ay(u,l,m){if(u=Nt(u),u&&(m||l===r))return u.slice(0,Ac(u)+1);if(!u||!(l=fn(l)))return u;var w=Pn(u),T=yc(w,Pn(l))+1;return Ai(w,0,T).join("")}function uy(u,l,m){if(u=Nt(u),u&&(m||l===r))return u.replace(Or,"");if(!u||!(l=fn(l)))return u;var w=Pn(u),T=Dc(w,Pn(l));return Ai(w,T).join("")}function sy(u,l){var m=q,w=X;if(Qt(l)){var T="separator"in l?l.separator:T;m="length"in l?yt(l.length):m,w="omission"in l?fn(l.omission):w}u=Nt(u);var x=u.length;if(na(u)){var $=Pn(u);x=$.length}if(m>=x)return u;var J=m-ia(w);if(J<1)return w;var ne=$?Ai($,0,J).join(""):u.slice(0,J);if(T===r)return ne+w;if($&&(J+=ne.length-J),dl(T)){if(u.slice(J).search(T)){var ge,me=ne;for(T.global||(T=Oo(T.source,Nt(Xi.exec(T))+"g")),T.lastIndex=0;ge=T.exec(me);)var ye=ge.index;ne=ne.slice(0,ye===r?J:ye)}}else if(u.indexOf(fn(T),J)!=J){var xe=ne.lastIndexOf(T);xe>-1&&(ne=ne.slice(0,xe))}return ne+w}function oy(u){return u=Nt(u),u&&hr.test(u)?u.replace(yr,Rv):u}var ly=ca(function(u,l,m){return u+(m?" ":"")+l.toUpperCase()}),gl=ch("toUpperCase");function l0(u,l,m){return u=Nt(u),l=m?r:l,l===r?Tv(u)?Vv(u):Av(u):u.match(l)||[]}var f0=At(function(u,l){try{return on(u,r,l)}catch(m){return hl(m)?m:new dt(m)}}),fy=ai(function(u,l){return Dn(l,function(m){m=$n(m),ni(u,m,fl(u[m],u))}),u});function cy(u){var l=u==null?0:u.length,m=Ze();return u=l?Kt(u,function(w){if(typeof w[1]!="function")throw new yn(s);return[m(w[0]),w[1]]}):[],At(function(w){for(var T=-1;++T<l;){var x=u[T];if(on(x[0],this,w))return on(x[1],this,w)}})}function hy(u){return Rg(An(u,h))}function ml(u){return function(){return u}}function dy(u,l){return u==null||u!==u?l:u}var py=dh(),vy=dh(!0);function tn(u){return u}function _l(u){return zc(typeof u=="function"?u:An(u,h))}function gy(u){return Hc(An(u,h))}function my(u,l){return $c(u,An(l,h))}var _y=At(function(u,l){return function(m){return Ja(m,u,l)}}),by=At(function(u,l){return function(m){return Ja(u,m,l)}});function bl(u,l,m){var w=Ar(l),T=Vu(l,w);m==null&&!(Qt(l)&&(T.length||!w.length))&&(m=l,l=u,u=this,T=Vu(l,Ar(l)));var x=!(Qt(m)&&"chain"in m)||!!m.chain,$=si(u);return Dn(T,function(J){var ne=l[J];u[J]=ne,$&&(u.prototype[J]=function(){var ge=this.__chain__;if(x||ge){var me=u(this.__wrapped__),ye=me.__actions__=Qr(this.__actions__);return ye.push({func:ne,args:arguments,thisArg:u}),me.__chain__=ge,me}return ne.apply(u,mi([this.value()],arguments))})}),u}function Dy(){return Mr._===this&&(Mr._=$v),this}function Dl(){}function yy(u){return u=yt(u),At(function(l){return Gc(l,u)})}var wy=Jo(Kt),Ay=Jo(pc),Ey=Jo(wo);function c0(u){return il(u)?Ao($n(u)):em(u)}function Cy(u){return function(l){return u==null?r:Hi(u,l)}}var Fy=vh(),Sy=vh(!0);function yl(){return[]}function wl(){return!1}function By(){return{}}function Oy(){return""}function My(){return!0}function Py(u,l){if(u=yt(u),u<1||u>ae)return[];var m=Ce,w=qr(u,Ce);l=Ze(l),u-=Ce;for(var T=Fo(w,l);++m<u;)l(m);return T}function Ty(u){return pt(u)?Kt(u,$n):cn(u)?[u]:Qr(Ph(Nt(u)))}function ky(u){var l=++Wv;return Nt(u)+l}var Iy=$u(function(u,l){return u+l},0),Ny=Qo("ceil"),xy=$u(function(u,l){return u/l},1),Ry=Qo("floor");function Ly(u){return u&&u.length?Uu(u,tn,Ro):r}function Uy(u,l){return u&&u.length?Uu(u,Ze(l,2),Ro):r}function Vy(u){return mc(u,tn)}function jy(u,l){return mc(u,Ze(l,2))}function qy(u){return u&&u.length?Uu(u,tn,jo):r}function zy(u,l){return u&&u.length?Uu(u,Ze(l,2),jo):r}var Wy=$u(function(u,l){return u*l},1),Hy=Qo("round"),$y=$u(function(u,l){return u-l},0);function Gy(u){return u&&u.length?Co(u,tn):0}function Ky(u,l){return u&&u.length?Co(u,Ze(l,2)):0}return I.after=gb,I.ary=qh,I.assign=nD,I.assignIn=r0,I.assignInWith=as,I.assignWith=iD,I.at=aD,I.before=zh,I.bind=fl,I.bindAll=fy,I.bindKey=Wh,I.castArray=Bb,I.chain=Uh,I.chunk=Rm,I.compact=Lm,I.concat=Um,I.cond=cy,I.conforms=hy,I.constant=ml,I.countBy=G_,I.create=uD,I.curry=Hh,I.curryRight=$h,I.debounce=Gh,I.defaults=sD,I.defaultsDeep=oD,I.defer=mb,I.delay=_b,I.difference=Vm,I.differenceBy=jm,I.differenceWith=qm,I.drop=zm,I.dropRight=Wm,I.dropRightWhile=Hm,I.dropWhile=$m,I.fill=Gm,I.filter=Y_,I.flatMap=Q_,I.flatMapDeep=X_,I.flatMapDepth=eb,I.flatten=Nh,I.flattenDeep=Km,I.flattenDepth=Ym,I.flip=bb,I.flow=py,I.flowRight=vy,I.fromPairs=Zm,I.functions=vD,I.functionsIn=gD,I.groupBy=tb,I.initial=Qm,I.intersection=Xm,I.intersectionBy=e_,I.intersectionWith=t_,I.invert=_D,I.invertBy=bD,I.invokeMap=nb,I.iteratee=_l,I.keyBy=ib,I.keys=Ar,I.keysIn=en,I.map=Xu,I.mapKeys=yD,I.mapValues=wD,I.matches=gy,I.matchesProperty=my,I.memoize=ts,I.merge=AD,I.mergeWith=n0,I.method=_y,I.methodOf=by,I.mixin=bl,I.negate=rs,I.nthArg=yy,I.omit=ED,I.omitBy=CD,I.once=Db,I.orderBy=ab,I.over=wy,I.overArgs=yb,I.overEvery=Ay,I.overSome=Ey,I.partial=cl,I.partialRight=Kh,I.partition=ub,I.pick=FD,I.pickBy=i0,I.property=c0,I.propertyOf=Cy,I.pull=a_,I.pullAll=Rh,I.pullAllBy=u_,I.pullAllWith=s_,I.pullAt=o_,I.range=Fy,I.rangeRight=Sy,I.rearg=wb,I.reject=lb,I.remove=l_,I.rest=Ab,I.reverse=ol,I.sampleSize=cb,I.set=BD,I.setWith=OD,I.shuffle=hb,I.slice=f_,I.sortBy=vb,I.sortedUniq=m_,I.sortedUniqBy=__,I.split=QD,I.spread=Eb,I.tail=b_,I.take=D_,I.takeRight=y_,I.takeRightWhile=w_,I.takeWhile=A_,I.tap=L_,I.throttle=Cb,I.thru=Qu,I.toArray=Xh,I.toPairs=a0,I.toPairsIn=u0,I.toPath=Ty,I.toPlainObject=t0,I.transform=MD,I.unary=Fb,I.union=E_,I.unionBy=C_,I.unionWith=F_,I.uniq=S_,I.uniqBy=B_,I.uniqWith=O_,I.unset=PD,I.unzip=ll,I.unzipWith=Lh,I.update=TD,I.updateWith=kD,I.values=pa,I.valuesIn=ID,I.without=M_,I.words=l0,I.wrap=Sb,I.xor=P_,I.xorBy=T_,I.xorWith=k_,I.zip=I_,I.zipObject=N_,I.zipObjectDeep=x_,I.zipWith=R_,I.entries=a0,I.entriesIn=u0,I.extend=r0,I.extendWith=as,bl(I,I),I.add=Iy,I.attempt=f0,I.camelCase=LD,I.capitalize=s0,I.ceil=Ny,I.clamp=ND,I.clone=Ob,I.cloneDeep=Pb,I.cloneDeepWith=Tb,I.cloneWith=Mb,I.conformsTo=kb,I.deburr=o0,I.defaultTo=dy,I.divide=xy,I.endsWith=UD,I.eq=kn,I.escape=VD,I.escapeRegExp=jD,I.every=K_,I.find=Z_,I.findIndex=kh,I.findKey=lD,I.findLast=J_,I.findLastIndex=Ih,I.findLastKey=fD,I.floor=Ry,I.forEach=Vh,I.forEachRight=jh,I.forIn=cD,I.forInRight=hD,I.forOwn=dD,I.forOwnRight=pD,I.get=pl,I.gt=Ib,I.gte=Nb,I.has=mD,I.hasIn=vl,I.head=xh,I.identity=tn,I.includes=rb,I.indexOf=Jm,I.inRange=xD,I.invoke=DD,I.isArguments=Ki,I.isArray=pt,I.isArrayBuffer=xb,I.isArrayLike=Xr,I.isArrayLikeObject=lr,I.isBoolean=Rb,I.isBuffer=Ei,I.isDate=Lb,I.isElement=Ub,I.isEmpty=Vb,I.isEqual=jb,I.isEqualWith=qb,I.isError=hl,I.isFinite=zb,I.isFunction=si,I.isInteger=Yh,I.isLength=ns,I.isMap=Zh,I.isMatch=Wb,I.isMatchWith=Hb,I.isNaN=$b,I.isNative=Gb,I.isNil=Yb,I.isNull=Kb,I.isNumber=Jh,I.isObject=Qt,I.isObjectLike=ar,I.isPlainObject=nu,I.isRegExp=dl,I.isSafeInteger=Zb,I.isSet=Qh,I.isString=is,I.isSymbol=cn,I.isTypedArray=da,I.isUndefined=Jb,I.isWeakMap=Qb,I.isWeakSet=Xb,I.join=r_,I.kebabCase=qD,I.last=Cn,I.lastIndexOf=n_,I.lowerCase=zD,I.lowerFirst=WD,I.lt=eD,I.lte=tD,I.max=Ly,I.maxBy=Uy,I.mean=Vy,I.meanBy=jy,I.min=qy,I.minBy=zy,I.stubArray=yl,I.stubFalse=wl,I.stubObject=By,I.stubString=Oy,I.stubTrue=My,I.multiply=Wy,I.nth=i_,I.noConflict=Dy,I.noop=Dl,I.now=es,I.pad=HD,I.padEnd=$D,I.padStart=GD,I.parseInt=KD,I.random=RD,I.reduce=sb,I.reduceRight=ob,I.repeat=YD,I.replace=ZD,I.result=SD,I.round=Hy,I.runInContext=re,I.sample=fb,I.size=db,I.snakeCase=JD,I.some=pb,I.sortedIndex=c_,I.sortedIndexBy=h_,I.sortedIndexOf=d_,I.sortedLastIndex=p_,I.sortedLastIndexBy=v_,I.sortedLastIndexOf=g_,I.startCase=XD,I.startsWith=ey,I.subtract=$y,I.sum=Gy,I.sumBy=Ky,I.template=ty,I.times=Py,I.toFinite=oi,I.toInteger=yt,I.toLength=e0,I.toLower=ry,I.toNumber=Fn,I.toSafeInteger=rD,I.toString=Nt,I.toUpper=ny,I.trim=iy,I.trimEnd=ay,I.trimStart=uy,I.truncate=sy,I.unescape=oy,I.uniqueId=ky,I.upperCase=ly,I.upperFirst=gl,I.each=Vh,I.eachRight=jh,I.first=xh,bl(I,function(){var u={};return Wn(I,function(l,m){Lt.call(I.prototype,m)||(u[m]=l)}),u}(),{chain:!1}),I.VERSION=n,Dn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){I[u].placeholder=I}),Dn(["drop","take"],function(u,l){Ct.prototype[u]=function(m){m=m===r?1:_r(yt(m),0);var w=this.__filtered__&&!l?new Ct(this):this.clone();return w.__filtered__?w.__takeCount__=qr(m,w.__takeCount__):w.__views__.push({size:qr(m,Ce),type:u+(w.__dir__<0?"Right":"")}),w},Ct.prototype[u+"Right"]=function(m){return this.reverse()[u](m).reverse()}}),Dn(["filter","map","takeWhile"],function(u,l){var m=l+1,w=m==R||m==V;Ct.prototype[u]=function(T){var x=this.clone();return x.__iteratees__.push({iteratee:Ze(T,3),type:m}),x.__filtered__=x.__filtered__||w,x}}),Dn(["head","last"],function(u,l){var m="take"+(l?"Right":"");Ct.prototype[u]=function(){return this[m](1).value()[0]}}),Dn(["initial","tail"],function(u,l){var m="drop"+(l?"":"Right");Ct.prototype[u]=function(){return this.__filtered__?new Ct(this):this[m](1)}}),Ct.prototype.compact=function(){return this.filter(tn)},Ct.prototype.find=function(u){return this.filter(u).head()},Ct.prototype.findLast=function(u){return this.reverse().find(u)},Ct.prototype.invokeMap=At(function(u,l){return typeof u=="function"?new Ct(this):this.map(function(m){return Ja(m,u,l)})}),Ct.prototype.reject=function(u){return this.filter(rs(Ze(u)))},Ct.prototype.slice=function(u,l){u=yt(u);var m=this;return m.__filtered__&&(u>0||l<0)?new Ct(m):(u<0?m=m.takeRight(-u):u&&(m=m.drop(u)),l!==r&&(l=yt(l),m=l<0?m.dropRight(-l):m.take(l-u)),m)},Ct.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},Ct.prototype.toArray=function(){return this.take(Ce)},Wn(Ct.prototype,function(u,l){var m=/^(?:filter|find|map|reject)|While$/.test(l),w=/^(?:head|last)$/.test(l),T=I[w?"take"+(l=="last"?"Right":""):l],x=w||/^find/.test(l);T&&(I.prototype[l]=function(){var $=this.__wrapped__,J=w?[1]:arguments,ne=$ instanceof Ct,ge=J[0],me=ne||pt($),ye=function(Et){var Ot=T.apply(I,mi([Et],J));return w&&xe?Ot[0]:Ot};me&&m&&typeof ge=="function"&&ge.length!=1&&(ne=me=!1);var xe=this.__chain__,qe=!!this.__actions__.length,Xe=x&&!xe,wt=ne&&!qe;if(!x&&me){$=wt?$:new Ct(this);var et=u.apply($,J);return et.__actions__.push({func:Qu,args:[ye],thisArg:r}),new wn(et,xe)}return Xe&&wt?u.apply(this,J):(et=this.thru(ye),Xe?w?et.value()[0]:et.value():et)})}),Dn(["pop","push","shift","sort","splice","unshift"],function(u){var l=Eu[u],m=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",w=/^(?:pop|shift)$/.test(u);I.prototype[u]=function(){var T=arguments;if(w&&!this.__chain__){var x=this.value();return l.apply(pt(x)?x:[],T)}return this[m](function($){return l.apply(pt($)?$:[],T)})}}),Wn(Ct.prototype,function(u,l){var m=I[l];if(m){var w=m.name+"";Lt.call(oa,w)||(oa[w]=[]),oa[w].push({name:l,func:m})}}),oa[Hu(r,D).name]=[{name:"wrapper",func:r}],Ct.prototype.clone=og,Ct.prototype.reverse=lg,Ct.prototype.value=fg,I.prototype.at=U_,I.prototype.chain=V_,I.prototype.commit=j_,I.prototype.next=q_,I.prototype.plant=W_,I.prototype.reverse=H_,I.prototype.toJSON=I.prototype.valueOf=I.prototype.value=$_,I.prototype.first=I.prototype.head,Wa&&(I.prototype[Wa]=z_),I},aa=jv();Vi?((Vi.exports=aa)._=aa,_o._=aa):Mr._=aa}).call(dr)})(u8,Hs);const s8=Hs,tf="panelModeStore";function o8(){const t=Sr("select"),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[tf]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[tf]=a,r(a))},get:()=>bt(t),delete:()=>{i&&(delete localStorage[tf],r("select"))}}}const Zn=o8(),l8=jr(Zn,t=>bt(Zn));function Kd(t,e,r){const n=t.slice();return n[7]=e[r][0],n[8]=e[r][1],n}function Yd(t,e,r){const n=t.slice();return n[11]=e[r][0],n[12]=e[r][1],n}function Zd(t){let e=t[12].text+"",r,n,i,a;return{c(){r=ke(e),n=Y("b"),i=ke("::"),a=Me()},l(s){r=Ie(s,e),n=Z(s,"B",{});var o=H(n);i=Ie(o,"::"),o.forEach(k),a=Pe(s)},m(s,o){fe(s,r,o),fe(s,n,o),L(n,i),fe(s,a,o)},p(s,o){o&1&&e!==(e=s[12].text+"")&&Fr(r,e)},d(s){s&&k(r),s&&k(n),s&&k(a)}}}function Jd(t,e){let r,n,i,a,s,o=Object.entries(e[8].weightedPrompts),f=[];for(let c=0;c<o.length;c+=1)f[c]=Zd(Yd(e,o,c));function p(){return e[5](e[7],e[8])}return{key:t,first:null,c(){r=Y("li"),n=Y("a");for(let c=0;c<f.length;c+=1)f[c].c();i=Me(),this.h()},l(c){r=Z(c,"LI",{});var h=H(r);n=Z(h,"A",{class:!0});var d=H(n);for(let g=0;g<f.length;g+=1)f[g].l(d);d.forEach(k),i=Pe(h),h.forEach(k),this.h()},h(){O(n,"class","text-xs inline-block"),Ft(n,"active",e[1]===e[7]),this.first=r},m(c,h){fe(c,r,h),L(r,n);for(let d=0;d<f.length;d+=1)f[d]&&f[d].m(n,null);L(r,i),a||(s=be(n,"click",p),a=!0)},p(c,h){if(e=c,h&5){o=Object.entries(e[8].weightedPrompts);let d;for(d=0;d<o.length;d+=1){const g=Yd(e,o,d);f[d]?f[d].p(g,h):(f[d]=Zd(g),f[d].c(),f[d].m(n,null))}for(;d<f.length;d+=1)f[d].d(1);f.length=o.length}h&7&&Ft(n,"active",e[1]===e[7])},d(c){c&&k(r),pu(f,c),a=!1,s()}}}function f8(t){let e,r,n,i,a,s=[],o=new Map,f,p,c=t[2](t[0],Qd,"desc");const h=d=>d[7];for(let d=0;d<c.length;d+=1){let g=Kd(t,c,d),b=h(g);o.set(b,s[d]=Jd(b,g))}return{c(){e=Y("ul"),r=Y("li"),n=Y("a"),i=ke("New +"),a=Me();for(let d=0;d<s.length;d+=1)s[d].c();this.h()},l(d){e=Z(d,"UL",{class:!0});var g=H(e);r=Z(g,"LI",{});var b=H(r);n=Z(b,"A",{class:!0});var v=H(n);i=Ie(v,"New +"),v.forEach(k),b.forEach(k),a=Pe(g);for(let _=0;_<s.length;_+=1)s[_].l(g);g.forEach(k),this.h()},h(){O(n,"class","text-xs inline-block"),O(e,"class","menu h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(d,g){fe(d,e,g),L(e,r),L(r,n),L(n,i),L(e,a);for(let b=0;b<s.length;b+=1)s[b]&&s[b].m(e,null);f||(p=be(n,"click",t[3]),f=!0)},p(d,[g]){g&23&&(c=d[2](d[0],Qd,"desc"),s=Un(s,g,h,1,d,c,o,e,hi,Jd,null,Kd))},i:Se,o:Se,d(d){d&&k(e);for(let g=0;g<s.length;g+=1)s[g].d();f=!1,p()}}}const Qd=t=>t[1].date;function c8(t,e,r){let n,i,a;tt(t,Br,c=>r(6,n=c)),tt(t,WE,c=>r(0,i=c)),tt(t,d1,c=>r(1,a=c));const{orderBy:s}=s8;function o(){Yi.delete(),Pt.update(Oi({},n.weightMode)),Zn.update("edit")}function f(c,h){Yi.update(c),Pt.update({...h}),Zn.update("edit")}return[i,a,s,o,f,(c,h)=>f(c,h)]}class h8 extends at{constructor(e){super(),ut(this,e,c8,f8,st,{})}}function d8(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var $1=d8,p8=typeof dr=="object"&&dr&&dr.Object===Object&&dr,v8=p8,g8=v8,m8=typeof self=="object"&&self&&self.Object===Object&&self,_8=g8||m8||Function("return this")(),G1=_8,b8=G1,D8=function(){return b8.Date.now()},y8=D8,w8=/\s/;function A8(t){for(var e=t.length;e--&&w8.test(t.charAt(e)););return e}var E8=A8,C8=E8,F8=/^\s+/;function S8(t){return t&&t.slice(0,C8(t)+1).replace(F8,"")}var B8=S8,O8=G1,M8=O8.Symbol,K1=M8,Xd=K1,Y1=Object.prototype,P8=Y1.hasOwnProperty,T8=Y1.toString,au=Xd?Xd.toStringTag:void 0;function k8(t){var e=P8.call(t,au),r=t[au];try{t[au]=void 0;var n=!0}catch{}var i=T8.call(t);return n&&(e?t[au]=r:delete t[au]),i}var I8=k8,N8=Object.prototype,x8=N8.toString;function R8(t){return x8.call(t)}var L8=R8,ep=K1,U8=I8,V8=L8,j8="[object Null]",q8="[object Undefined]",tp=ep?ep.toStringTag:void 0;function z8(t){return t==null?t===void 0?q8:j8:tp&&tp in Object(t)?U8(t):V8(t)}var W8=z8;function H8(t){return t!=null&&typeof t=="object"}var $8=H8,G8=W8,K8=$8,Y8="[object Symbol]";function Z8(t){return typeof t=="symbol"||K8(t)&&G8(t)==Y8}var J8=Z8,Q8=B8,rp=$1,X8=J8,np=0/0,eB=/^[-+]0x[0-9a-f]+$/i,tB=/^0b[01]+$/i,rB=/^0o[0-7]+$/i,nB=parseInt;function iB(t){if(typeof t=="number")return t;if(X8(t))return np;if(rp(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=rp(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Q8(t);var r=tB.test(t);return r||rB.test(t)?nB(t.slice(2),r?2:8):eB.test(t)?np:+t}var aB=iB,uB=$1,rf=y8,ip=aB,sB="Expected a function",oB=Math.max,lB=Math.min;function fB(t,e,r){var n,i,a,s,o,f,p=0,c=!1,h=!1,d=!0;if(typeof t!="function")throw new TypeError(sB);e=ip(e)||0,uB(r)&&(c=!!r.leading,h="maxWait"in r,a=h?oB(ip(r.maxWait)||0,e):a,d="trailing"in r?!!r.trailing:d);function g(S){var P=n,B=i;return n=i=void 0,p=S,s=t.apply(B,P),s}function b(S){return p=S,o=setTimeout(D,e),c?g(S):s}function v(S){var P=S-f,B=S-p,N=e-P;return h?lB(N,a-B):N}function _(S){var P=S-f,B=S-p;return f===void 0||P>=e||P<0||h&&B>=a}function D(){var S=rf();if(_(S))return F(S);o=setTimeout(D,v(S))}function F(S){return o=void 0,d&&n?g(S):(n=i=void 0,s)}function E(){o!==void 0&&clearTimeout(o),p=0,n=f=i=o=void 0}function C(){return o===void 0?s:F(rf())}function A(){var S=rf(),P=_(S);if(n=arguments,i=this,f=S,P){if(o===void 0)return b(f);if(h)return clearTimeout(o),o=setTimeout(D,e),g(f)}return o===void 0&&(o=setTimeout(D,e)),s}return A.cancel=E,A.flush=C,A}var $s=fB;function ap(t,e,r){const n=t.slice();return n[14]=e[r].id,n[15]=e[r].text,n}function up(t,e){let r,n,i,a,s;function o(...f){return e[9](e[14],...f)}return{key:t,first:null,c(){r=Y("li"),n=Y("input"),this.h()},l(f){r=Z(f,"LI",{class:!0});var p=H(r);n=Z(p,"INPUT",{type:!0,placeholder:!0,class:!0}),p.forEach(k),this.h()},h(){n.value=i=e[15],O(n,"type","text"),O(n,"placeholder",""),O(n,"class","input input-bordered input-sm w-full"),O(r,"class","p-1"),this.first=r},m(f,p){fe(f,r,p),L(r,n),a||(s=be(n,"input",o),a=!0)},p(f,p){e=f,p&2&&i!==(i=e[15])&&n.value!==i&&(n.value=i)},d(f){f&&k(r),a=!1,s()}}}function cB(t){let e,r,n,i,a,s,o,f,p,c,h,d=[],g=new Map,b,v,_,D,F,E=t[1];const C=A=>A[14];for(let A=0;A<E.length;A+=1){let S=ap(t,E,A),P=C(S);g.set(P,d[A]=up(P,S))}return{c(){e=Y("div"),r=Y("button"),n=ke("Paste"),i=Me(),a=Y("button"),s=ke("Save"),o=Me(),f=Y("button"),p=ke("Delete"),c=Me(),h=Y("ul");for(let A=0;A<d.length;A+=1)d[A].c();b=Me(),v=Y("li"),_=Y("input"),this.h()},l(A){e=Z(A,"DIV",{class:!0});var S=H(e);r=Z(S,"BUTTON",{class:!0});var P=H(r);n=Ie(P,"Paste"),P.forEach(k),i=Pe(S),a=Z(S,"BUTTON",{class:!0});var B=H(a);s=Ie(B,"Save"),B.forEach(k),o=Pe(S),f=Z(S,"BUTTON",{class:!0});var N=H(f);p=Ie(N,"Delete"),N.forEach(k),S.forEach(k),c=Pe(A),h=Z(A,"UL",{class:!0});var q=H(h);for(let K=0;K<d.length;K+=1)d[K].l(q);b=Pe(q),v=Z(q,"LI",{class:!0});var X=H(v);_=Z(X,"INPUT",{type:!0,placeholder:!0,class:!0}),X.forEach(k),q.forEach(k),this.h()},h(){O(r,"class","btn btn-sm btn-info mx-2"),O(a,"class","btn btn-sm btn-success mx-2"),O(f,"class","btn btn-sm btn-error mx-2"),O(e,"class","flex px-8 py-2 justify-center bg-base-100"),O(_,"type","text"),O(_,"placeholder","Add prompt"),O(_,"class","input input-bordered input-sm w-full italic"),O(v,"class","p-1"),O(h,"class","h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(A,S){fe(A,e,S),L(e,r),L(r,n),L(e,i),L(e,a),L(a,s),L(e,o),L(e,f),L(f,p),fe(A,c,S),fe(A,h,S);for(let P=0;P<d.length;P+=1)d[P]&&d[P].m(h,null);L(h,b),L(h,v),L(v,_),nn(_,t[0]),D||(F=[be(r,"click",t[3]),be(a,"click",t[2]),be(f,"click",t[4]),be(_,"input",t[10]),be(_,"input",t[11])],D=!0)},p(A,[S]){S&34&&(E=A[1],d=Un(d,S,C,1,A,E,g,h,hi,up,b,ap)),S&1&&_.value!==A[0]&&nn(_,A[0])},i:Se,o:Se,d(A){A&&k(e),A&&k(c),A&&k(h);for(let S=0;S<d.length;S+=1)d[S].d();D=!1,rr(F)}}}function hB(t,e,r){let n,i,a;tt(t,Br,D=>r(8,i=D)),tt(t,d1,D=>r(12,a=D));let s="",o=Object.keys(i.weightedPrompts).length;function f(){fu.update(vo(),{...i,date:Date.now()}),Zn.update("select")}function p(){navigator.clipboard.readText().then(D=>{const F=zs(D);c(F)})}function c(D){const F=Math.max(...D.map(([C,A])=>A)),E=D.reduce((C,[A,S],P)=>(C[P]=Ir(P,A,S,S/F),C),{});Yi.delete(),Pt.update(Oi(E,i.weightMode)),r(0,s="")}function h(){a&&fu.delete(a),Yi.delete(),Pt.delete(),Zn.update("select")}const d=$s((D,F)=>{let E={...i.weightedPrompts};if(!F){const S=Object.entries(i.weightedPrompts).filter(([P])=>P!==D).map(([P,B])=>[B.text,B.parsedWeight]);return c(S)}const C={...E[D],text:F};E[D]=C,Pt.update({...i,weightedPrompts:E})},1e3),g=$s(D=>{const F=Object.entries(i.weightedPrompts).map(([E,C])=>[C.text,C.parsedWeight]);return F.push([D,1]),c(F)},1e3),b=(D,F)=>d(D,F.target.value);function v(){s=this.value,r(0,s),r(8,i),r(7,o)}const _=D=>g(D.target.value);return t.$$.update=()=>{if(t.$$.dirty&384){const D=Object.keys(i.weightedPrompts).length;D>o&&(r(7,o=D),r(0,s=""))}t.$$.dirty&256&&r(1,n=Object.entries(i.weightedPrompts).map(([D,F])=>({id:D,text:F.text})))},[s,n,f,p,h,d,g,o,i,b,v,_]}class dB extends at{constructor(e){super(),ut(this,e,hB,cB,st,{})}}const pB=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. The first sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. The middle three sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. The final sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,vB=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 10 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. Four sentences should describe the subject.
    d. Four sentences should describe the scene.
    e. Tow sentences should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,gB=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 10 concepts.
    a. Each concept should be 10 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
`,mB=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 20 concepts.
    a. Each concept should be 5 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
3. Do not use hyphens to mark list items.
4. Do not title the list.
`,_B=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. One sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. Two sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. One sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
    f. One sentence should be a poetic concept or feeling. Example: The unfathomable depths of a lover's sigh.
        i. The poetic concept should be intense.
        ii. The poetic concept should be emotional.
        iii. The poetic concept should include abstract words.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`;function bB(){const t=Sr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,s)=>{if(s.startsWith("directive")){const o=s.split("_")[1];a[o]=JSON.parse(localStorage[s])}return a},{})||{}),{subscribe:e,update:(a,s)=>{const o=bt(t),p={...o[a]||{},...s};i&&(localStorage[`directive_${a}`]=JSON.stringify(p));const c={...o,[a]:p};r(c)},get:a=>bt(t)[a],delete:a=>{i&&delete localStorage[`directive_${a}`];const s={...bt(t)};delete s[a],r(s)}}}const Gs=bB(),DB=jr(Gs,t=>Object.entries(bt(Gs))),nf="preferredDirectiveStore";function yB(){const t=Sr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[nf]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[nf]=a,r(a))},get:()=>bt(t),delete:()=>{i&&(delete localStorage[nf],r(""))}}}const su=yB(),wB=jr(su,t=>bt(su)),af="metaPromptStore";function AB(){const t=Sr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[af]||""),{subscribe:e,update:a=>{i&&(localStorage[af]=a,r(a))},get:()=>bt(t),delete:()=>{i&&(delete localStorage[af],r(""))}}}const Ks=AB(),EB=jr(Ks,t=>bt(Ks)),_a=Sr("");function sp(t,e,r){const n=t.slice();return n[21]=e[r][0],n[22]=e[r][1],n}function op(t,e){let r,n=e[22].name+"",i,a=e[22].builtIn?" (Built-In)":" (User)",s,o,f;return{key:t,first:null,c(){r=Y("option"),i=ke(n),s=ke(a),this.h()},l(p){r=Z(p,"OPTION",{});var c=H(r);i=Ie(c,n),s=Ie(c,a),c.forEach(k),this.h()},h(){r.__value=o=e[21],r.value=r.__value,r.selected=f=e[3]===e[21],this.first=r},m(p,c){fe(p,r,c),L(r,i),L(r,s)},p(p,c){e=p,c&16&&n!==(n=e[22].name+"")&&Fr(i,n),c&16&&a!==(a=e[22].builtIn?" (Built-In)":" (User)")&&Fr(s,a),c&16&&o!==(o=e[21])&&(r.__value=o,r.value=r.__value),c&24&&f!==(f=e[3]===e[21])&&(r.selected=f)},d(p){p&&k(r)}}}function lp(t){let e,r,n,i,a,s,o,f,p,c,h,d,g,b,v=!t[7]&&fp(t),_=t[6]&&cp(t);function D(C,A){return C[1]?FB:CB}let F=D(t),E=F(t);return{c(){v&&v.c(),e=Me(),r=Y("div"),n=Y("textarea"),i=Me(),a=Y("div"),s=Y("textarea"),o=Me(),f=Y("div"),_&&_.c(),p=Me(),c=Y("button"),h=ke("Preview"),d=Me(),E.c(),this.h()},l(C){v&&v.l(C),e=Pe(C),r=Z(C,"DIV",{class:!0});var A=H(r);n=Z(A,"TEXTAREA",{class:!0,placeholder:!0}),H(n).forEach(k),A.forEach(k),i=Pe(C),a=Z(C,"DIV",{class:!0});var S=H(a);s=Z(S,"TEXTAREA",{class:!0,placeholder:!0}),H(s).forEach(k),S.forEach(k),o=Pe(C),f=Z(C,"DIV",{class:!0});var P=H(f);_&&_.l(P),p=Pe(P),c=Z(P,"BUTTON",{class:!0});var B=H(c);h=Ie(B,"Preview"),B.forEach(k),d=Pe(P),E.l(P),P.forEach(k),this.h()},h(){O(n,"class","font-mono text-xs textarea textarea-bordered w-full h-full resize-none"),O(n,"placeholder","GPT Directives"),O(r,"class","w-full p-2 h-1/2"),s.value=t[9],O(s,"class","textarea textarea-bordered w-full h-full resize-none"),O(s,"placeholder","Describe the prompt to generate."),O(a,"class","w-full p-2 h-1/5"),O(c,"class","btn btn-sm btn btn-info"),O(f,"class","w-full p-2 h-12 flex justify-between")},m(C,A){v&&v.m(C,A),fe(C,e,A),fe(C,r,A),L(r,n),nn(n,t[8]),fe(C,i,A),fe(C,a,A),L(a,s),fe(C,o,A),fe(C,f,A),_&&_.m(f,null),L(f,p),L(f,c),L(c,h),L(f,d),E.m(f,null),g||(b=[be(n,"input",t[17]),be(s,"input",t[18]),be(c,"click",function(){Si(t[0])&&t[0].apply(this,arguments)})],g=!0)},p(C,A){t=C,t[7]?v&&(v.d(1),v=null):v?v.p(t,A):(v=fp(t),v.c(),v.m(e.parentNode,e)),A&256&&nn(n,t[8]),A&512&&(s.value=t[9]),t[6]?_?_.p(t,A):(_=cp(t),_.c(),_.m(f,p)):_&&(_.d(1),_=null),F===(F=D(t))&&E?E.p(t,A):(E.d(1),E=F(t),E&&(E.c(),E.m(f,null)))},d(C){v&&v.d(C),C&&k(e),C&&k(r),C&&k(i),C&&k(a),C&&k(o),C&&k(f),_&&_.d(),E.d(),g=!1,rr(b)}}}function fp(t){let e,r,n,i,a,s,o;return{c(){e=Y("div"),r=Y("input"),n=Me(),i=Y("button"),a=ke("Save"),this.h()},l(f){e=Z(f,"DIV",{class:!0});var p=H(e);r=Z(p,"INPUT",{type:!0,placeholder:!0,class:!0}),n=Pe(p),i=Z(p,"BUTTON",{class:!0});var c=H(i);a=Ie(c,"Save"),c.forEach(k),p.forEach(k),this.h()},h(){O(r,"type","text"),O(r,"placeholder","Name"),O(r,"class","input input-bordered input-sm w-full max-w-xs"),O(i,"class","btn btn-sm btn-primary ml-4"),O(e,"class","w-full p-2 h-12 flex justify-between")},m(f,p){fe(f,e,p),L(e,r),nn(r,t[5]),L(e,n),L(e,i),L(i,a),s||(o=[be(r,"input",t[16]),be(i,"click",t[10])],s=!0)},p(f,p){p&32&&r.value!==f[5]&&nn(r,f[5])},d(f){f&&k(e),s=!1,rr(o)}}}function cp(t){let e,r,n,i;return{c(){e=Y("button"),r=ke("Delete"),this.h()},l(a){e=Z(a,"BUTTON",{class:!0});var s=H(e);r=Ie(s,"Delete"),s.forEach(k),this.h()},h(){O(e,"class","btn btn-sm btn-error")},m(a,s){fe(a,e,s),L(e,r),n||(i=be(e,"click",t[11]),n=!0)},p:Se,d(a){a&&k(e),n=!1,i()}}}function CB(t){let e,r,n,i;return{c(){e=Y("button"),r=ke("Generate"),this.h()},l(a){e=Z(a,"BUTTON",{class:!0});var s=H(e);r=Ie(s,"Generate"),s.forEach(k),this.h()},h(){O(e,"class","btn btn-sm btn-primary")},m(a,s){fe(a,e,s),L(e,r),n||(i=be(e,"click",function(){Si(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(a,s){t=a},d(a){a&&k(e),n=!1,i()}}}function FB(t){let e,r;return{c(){e=Y("button"),r=ke("Generating"),this.h()},l(n){e=Z(n,"BUTTON",{class:!0});var i=H(e);r=Ie(i,"Generating"),i.forEach(k),this.h()},h(){O(e,"class","btn btn-sm btn disabled")},m(n,i){fe(n,e,i),L(e,r)},p:Se,d(n){n&&k(e)}}}function SB(t){let e,r,n,i,a,s,o,f,p,c,h=[],d=new Map,g,b,v,_,D,F,E,C=Object.entries(t[4]);const A=P=>P[21];for(let P=0;P<C.length;P+=1){let B=sp(t,C,P),N=A(B);d.set(N,h[P]=op(N,B))}let S=t[3]&&lp(t);return{c(){e=Y("div"),r=Y("div"),n=Y("label"),i=Y("span"),a=ke("Pick a directive for prompt creation"),s=Me(),o=Y("select"),f=Y("option"),p=ke("Pick one");for(let P=0;P<h.length;P+=1)h[P].c();g=Y("option"),b=ke("New"),_=Me(),S&&S.c(),D=Tt(),this.h()},l(P){e=Z(P,"DIV",{class:!0});var B=H(e);r=Z(B,"DIV",{class:!0});var N=H(r);n=Z(N,"LABEL",{class:!0});var q=H(n);i=Z(q,"SPAN",{class:!0});var X=H(i);a=Ie(X,"Pick a directive for prompt creation"),X.forEach(k),q.forEach(k),s=Pe(N),o=Z(N,"SELECT",{class:!0});var K=H(o);f=Z(K,"OPTION",{});var U=H(f);p=Ie(U,"Pick one"),U.forEach(k);for(let z=0;z<h.length;z+=1)h[z].l(K);g=Z(K,"OPTION",{});var R=H(g);b=Ie(R,"New"),R.forEach(k),K.forEach(k),N.forEach(k),B.forEach(k),_=Pe(P),S&&S.l(P),D=Tt(),this.h()},h(){O(i,"class","label-text"),O(n,"class","label"),f.disabled=!0,f.selected=c=t[3]===null,f.__value="Pick one",f.value=f.__value,g.__value="new",g.value=g.__value,g.selected=v=t[3]==="new",O(o,"class","select select-bordered"),O(r,"class","form-control w-full max-w-xs mb-4"),O(e,"class","flex justify-center")},m(P,B){fe(P,e,B),L(e,r),L(r,n),L(n,i),L(i,a),L(r,s),L(r,o),L(o,f),L(f,p);for(let N=0;N<h.length;N+=1)h[N]&&h[N].m(o,null);L(o,g),L(g,b),Pi(o,t[3]),fe(P,_,B),S&&S.m(P,B),fe(P,D,B),F||(E=be(o,"change",t[12]),F=!0)},p(P,[B]){B&24&&c!==(c=P[3]===null)&&(f.selected=c),B&24&&(C=Object.entries(P[4]),h=Un(h,B,A,1,P,C,d,o,hi,op,g,sp)),B&24&&v!==(v=P[3]==="new")&&(g.selected=v),B&24&&Pi(o,P[3]),P[3]?S?S.p(P,B):(S=lp(P),S.c(),S.m(D.parentNode,D)):S&&(S.d(1),S=null)},i:Se,o:Se,d(P){P&&k(e);for(let B=0;B<h.length;B+=1)h[B].d();P&&k(_),S&&S.d(P),P&&k(D),F=!1,E()}}}function BB(t,e,r){let n,i,a,s,o,f,p,c;tt(t,_a,B=>r(8,o=B)),tt(t,wB,B=>r(14,f=B)),tt(t,DB,B=>r(15,p=B)),tt(t,EB,B=>r(9,c=B));let{togglePreview:h=()=>{}}=e,{isGenerating:d=!1}=e,{handleGeneratePrompt:g=()=>{}}=e,b={C:{name:"Five Sentences",text:pB,builtIn:!0},D:{name:"Ten Sentences",text:vB,builtIn:!0},E:{name:"Fragments",text:gB,builtIn:!0},F:{name:"Concept Shotgun",text:mB,builtIn:!0},G:{name:"Poetic Accents",text:_B,builtIn:!0}},v=null,_="";function D(){const B=v==="new"?vo():v;Gs.update(B,{name:_,text:o,builtIn:!1}),v==="new"&&(r(3,v=B),su.update(B))}function F(){Gs.delete(v),r(3,v=null),r(5,_=""),_a.set(""),su.delete()}function E(B){r(3,v=B),su.update(B),B&&B!=="new"?(r(5,_=i[B].name),_a.set(i[B].text)):B==="new"&&(r(5,_=""),_a.set(""))}function C(B){E(B.target.value)}function A(){_=this.value,r(5,_)}function S(){o=this.value,_a.set(o)}const P=B=>Ks.update(B.target.value);return t.$$set=B=>{"togglePreview"in B&&r(0,h=B.togglePreview),"isGenerating"in B&&r(1,d=B.isGenerating),"handleGeneratePrompt"in B&&r(2,g=B.handleGeneratePrompt)},t.$$.update=()=>{t.$$.dirty&32768&&r(13,n=p.reduce((B,[N,q])=>(B[N]={name:q.name,text:q.text,builtIn:!1},B),{})),t.$$.dirty&8192&&r(4,i=Object.entries({...b,...n}).reduce((B,[N,q])=>(B[N]=q,B),{})),t.$$.dirty&16392&&v===null&&f&&(r(3,v=f),E(v)),t.$$.dirty&24&&r(7,a=v&&v!=="new"&&i[v].builtIn),t.$$.dirty&24&&r(6,s=v&&v!=="new"&&!i[v].builtIn)},[h,d,g,v,i,_,s,a,o,c,D,F,C,n,f,p,A,S,P]}class OB extends at{constructor(e){super(),ut(this,e,BB,SB,st,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}function MB(t,e){return`${t}

Use the following text to generate output based on the instructions above:

${e}`}const Z1=jr([_a,Ks,Ca],t=>du(MB(t[0],t[1]),t[2]));function PB(t){let e,r,n,i;return{c(){e=Y("button"),r=ke("Generate"),this.h()},l(a){e=Z(a,"BUTTON",{class:!0});var s=H(e);r=Ie(s,"Generate"),s.forEach(k),this.h()},h(){O(e,"class","btn btn-sm btn-primary")},m(a,s){fe(a,e,s),L(e,r),n||(i=be(e,"click",function(){Si(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(a,s){t=a},d(a){a&&k(e),n=!1,i()}}}function TB(t){let e,r;return{c(){e=Y("button"),r=ke("Generating"),this.h()},l(n){e=Z(n,"BUTTON",{class:!0});var i=H(e);r=Ie(i,"Generating"),i.forEach(k),this.h()},h(){O(e,"class","btn btn-sm btn disabled")},m(n,i){fe(n,e,i),L(e,r)},p:Se,d(n){n&&k(e)}}}function kB(t){let e,r,n,i,a,s,o,f,p,c;function h(b,v){return b[1]?TB:PB}let d=h(t),g=d(t);return{c(){e=Y("div"),r=Y("p"),n=ke(t[3]),i=Me(),a=Y("div"),s=Y("button"),o=ke("Back"),f=Me(),g.c(),this.h()},l(b){e=Z(b,"DIV",{class:!0});var v=H(e);r=Z(v,"P",{class:!0});var _=H(r);n=Ie(_,t[3]),_.forEach(k),v.forEach(k),i=Pe(b),a=Z(b,"DIV",{class:!0});var D=H(a);s=Z(D,"BUTTON",{class:!0});var F=H(s);o=Ie(F,"Back"),F.forEach(k),f=Pe(D),g.l(D),D.forEach(k),this.h()},h(){O(r,"class","font-mono text-xs whitespace-pre-wrap"),O(e,"class","p-4 overflow-y-auto"),O(s,"class","btn btn-sm btn btn-info"),O(a,"class","w-full p-2 h-12 flex justify-between")},m(b,v){fe(b,e,v),L(e,r),L(r,n),fe(b,i,v),fe(b,a,v),L(a,s),L(s,o),L(a,f),g.m(a,null),p||(c=be(s,"click",function(){Si(t[0])&&t[0].apply(this,arguments)}),p=!0)},p(b,[v]){t=b,v&8&&Fr(n,t[3]),d===(d=h(t))&&g?g.p(t,v):(g.d(1),g=d(t),g&&(g.c(),g.m(a,null)))},i:Se,o:Se,d(b){b&&k(e),b&&k(i),b&&k(a),g.d(),p=!1,c()}}}function IB(t,e,r){let n;tt(t,Z1,o=>r(3,n=o));let{togglePreview:i=()=>{}}=e,{isGenerating:a=!1}=e,{handleGeneratePrompt:s=()=>{}}=e;return t.$$set=o=>{"togglePreview"in o&&r(0,i=o.togglePreview),"isGenerating"in o&&r(1,a=o.isGenerating),"handleGeneratePrompt"in o&&r(2,s=o.handleGeneratePrompt)},[i,a,s,n]}class NB extends at{constructor(e){super(),ut(this,e,IB,kB,st,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}const uf="preferredModelStore";function xB(){const t=Sr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[uf]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[uf]=a,r(a))},get:()=>bt(t),delete:()=>{i&&(delete localStorage[uf],r(""))}}}const Pf=xB(),J1=jr(Pf,t=>bt(Pf));function RB(t){let e,r,n;return{c(){e=Y("div"),r=Y("p"),n=ke("Set Open AI Key in settings for GPT generation."),this.h()},l(i){e=Z(i,"DIV",{class:!0});var a=H(e);r=Z(a,"P",{class:!0});var s=H(r);n=Ie(s,"Set Open AI Key in settings for GPT generation."),s.forEach(k),a.forEach(k),this.h()},h(){O(r,"class","text-center"),O(e,"class","w-full p-2 flex justify-center")},m(i,a){fe(i,e,a),L(e,r),L(r,n)},p:Se,i:Se,o:Se,d(i){i&&k(e)}}}function LB(t){let e,r,n,i;const a=[VB,UB],s=[];function o(f,p){return f[1]?0:1}return e=o(t),r=s[e]=a[e](t),{c(){r.c(),n=Tt()},l(f){r.l(f),n=Tt()},m(f,p){s[e].m(f,p),fe(f,n,p),i=!0},p(f,p){let c=e;e=o(f),e===c?s[e].p(f,p):(pr(),we(s[c],1,1,()=>{s[c]=null}),vr(),r=s[e],r?r.p(f,p):(r=s[e]=a[e](f),r.c()),_e(r,1),r.m(n.parentNode,n))},i(f){i||(_e(r),i=!0)},o(f){we(r),i=!1},d(f){s[e].d(f),f&&k(n)}}}function UB(t){let e,r;return e=new OB({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},p(n,i){const a={};i&1&&(a.isGenerating=n[0]),e.$set(a)},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function VB(t){let e,r;return e=new NB({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},p(n,i){const a={};i&1&&(a.isGenerating=n[0]),e.$set(a)},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function jB(t){let e,r,n,i;const a=[LB,RB],s=[];function o(f,p){return f[2]?0:1}return r=o(t),n=s[r]=a[r](t),{c(){e=Y("div"),n.c(),this.h()},l(f){e=Z(f,"DIV",{class:!0});var p=H(e);n.l(p),p.forEach(k),this.h()},h(){O(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(f,p){fe(f,e,p),s[r].m(e,null),i=!0},p(f,[p]){n.p(f,p)},i(f){i||(_e(n),i=!0)},o(f){we(n),i=!1},d(f){f&&k(e),s[r].d()}}}function qB(t,e,r){let n,i,a,s,o;tt(t,Z1,_=>r(7,i=_)),tt(t,Br,_=>r(8,a=_)),tt(t,J1,_=>r(5,s=_)),tt(t,Gf,_=>r(9,o=_));const f=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001"];let p=!1,c=o,h=!1;function d(_,D){const F=Vs(_),E=n||"gpt-3.5-turbo";r(0,p=!0),M3(F,D,E).then(C=>{console.log(C),C.data.choices.forEach((A,S)=>{const P=zs(A.message.content);console.log(P);const B=P.reduce((N,[q,X],K)=>(N[K]=Ir(K,q,X),N),{});Pt.update(Oi(B,a.weightMode)),Zn.update("edit"),Ca.shuffle()})}).finally(()=>{r(0,p=!1)})}function g(_,D){const F=Vs(_),E=n||"text-davinci-003";r(0,p=!0),O3(F,D,E).then(C=>{console.log(C),C.data.choices.forEach((A,S)=>{const P=zs(A.text);console.log(P);const B=P.reduce((N,[q,X],K)=>(N[K]=Ir(K,q,X),N),{});Pt.update(Oi(B,a.weightMode)),Zn.update("edit"),Ca.shuffle()})}).finally(()=>{r(0,p=!1)})}function b(){c&&(f.includes(n)?g(c,i):d(c,i))}function v(){console.log(i),r(1,h=!h)}return t.$$.update=()=>{t.$$.dirty&32&&(n=s||null)},[p,h,c,b,v,s]}class zB extends at{constructor(e){super(),ut(this,e,qB,jB,st,{})}}function hp(t,e,r){const n=t.slice();return n[18]=e[r],n}function dp(t,e,r){const n=t.slice();return n[18]=e[r],n}function WB(t){return{c:Se,l:Se,m:Se,p:Se,d:Se}}function HB(t){let e,r,n=t[0].length>0&&pp(t),i=t[1].length>0&&gp(t);return{c(){n&&n.c(),e=Me(),i&&i.c(),r=Tt()},l(a){n&&n.l(a),e=Pe(a),i&&i.l(a),r=Tt()},m(a,s){n&&n.m(a,s),fe(a,e,s),i&&i.m(a,s),fe(a,r,s)},p(a,s){a[0].length>0?n?n.p(a,s):(n=pp(a),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),a[1].length>0?i?i.p(a,s):(i=gp(a),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){n&&n.d(a),a&&k(e),i&&i.d(a),a&&k(r)}}}function pp(t){let e,r,n,i,a,s,o,f,p,c,h=[],d=new Map,g,b,v=t[0];const _=D=>D[18];for(let D=0;D<v.length;D+=1){let F=dp(t,v,D),E=_(F);d.set(E,h[D]=vp(E,F))}return{c(){e=Y("div"),r=Y("div"),n=Y("label"),i=Y("span"),a=ke("Pick a model to use for model generation"),s=Me(),o=Y("select"),f=Y("option"),p=ke("Pick one");for(let D=0;D<h.length;D+=1)h[D].c();this.h()},l(D){e=Z(D,"DIV",{class:!0});var F=H(e);r=Z(F,"DIV",{class:!0});var E=H(r);n=Z(E,"LABEL",{class:!0});var C=H(n);i=Z(C,"SPAN",{class:!0});var A=H(i);a=Ie(A,"Pick a model to use for model generation"),A.forEach(k),C.forEach(k),s=Pe(E),o=Z(E,"SELECT",{class:!0});var S=H(o);f=Z(S,"OPTION",{});var P=H(f);p=Ie(P,"Pick one"),P.forEach(k);for(let B=0;B<h.length;B+=1)h[B].l(S);S.forEach(k),E.forEach(k),F.forEach(k),this.h()},h(){O(i,"class","label-text"),O(n,"class","label"),f.disabled=!0,f.selected=c=t[2]===null,f.__value="Pick one",f.value=f.__value,O(o,"class","select select-bordered"),O(r,"class","form-control w-full max-w-xs mb-4"),O(e,"class","flex justify-center")},m(D,F){fe(D,e,F),L(e,r),L(r,n),L(n,i),L(i,a),L(r,s),L(r,o),L(o,f),L(f,p);for(let E=0;E<h.length;E+=1)h[E]&&h[E].m(o,null);Pi(o,t[2]),g||(b=be(o,"change",t[6]),g=!0)},p(D,F){F&5&&c!==(c=D[2]===null)&&(f.selected=c),F&5&&(v=D[0],h=Un(h,F,_,1,D,v,d,o,hi,vp,null,dp)),F&5&&Pi(o,D[2])},d(D){D&&k(e);for(let F=0;F<h.length;F+=1)h[F].d();g=!1,b()}}}function vp(t,e){let r,n=e[18]+"",i,a,s;return{key:t,first:null,c(){r=Y("option"),i=ke(n),this.h()},l(o){r=Z(o,"OPTION",{});var f=H(r);i=Ie(f,n),f.forEach(k),this.h()},h(){r.__value=a=e[18],r.value=r.__value,r.selected=s=e[2]===e[18],this.first=r},m(o,f){fe(o,r,f),L(r,i)},p(o,f){e=o,f&1&&n!==(n=e[18]+"")&&Fr(i,n),f&1&&a!==(a=e[18])&&(r.__value=a,r.value=r.__value),f&5&&s!==(s=e[2]===e[18])&&(r.selected=s)},d(o){o&&k(r)}}}function gp(t){let e,r,n,i,a,s,o,f,p,c,h=[],d=new Map,g,b,v=t[1];const _=D=>D[18];for(let D=0;D<v.length;D+=1){let F=hp(t,v,D),E=_(F);d.set(E,h[D]=mp(E,F))}return{c(){e=Y("div"),r=Y("div"),n=Y("label"),i=Y("span"),a=ke("Pick a model to use for prompt embedding"),s=Me(),o=Y("select"),f=Y("option"),p=ke("Pick one");for(let D=0;D<h.length;D+=1)h[D].c();this.h()},l(D){e=Z(D,"DIV",{class:!0});var F=H(e);r=Z(F,"DIV",{class:!0});var E=H(r);n=Z(E,"LABEL",{class:!0});var C=H(n);i=Z(C,"SPAN",{class:!0});var A=H(i);a=Ie(A,"Pick a model to use for prompt embedding"),A.forEach(k),C.forEach(k),s=Pe(E),o=Z(E,"SELECT",{class:!0});var S=H(o);f=Z(S,"OPTION",{});var P=H(f);p=Ie(P,"Pick one"),P.forEach(k);for(let B=0;B<h.length;B+=1)h[B].l(S);S.forEach(k),E.forEach(k),F.forEach(k),this.h()},h(){O(i,"class","label-text"),O(n,"class","label"),f.disabled=!0,f.selected=c=t[3]===null,f.__value="Pick one",f.value=f.__value,O(o,"class","select select-bordered"),O(r,"class","form-control w-full max-w-xs mb-4"),O(e,"class","flex justify-center")},m(D,F){fe(D,e,F),L(e,r),L(r,n),L(n,i),L(i,a),L(r,s),L(r,o),L(o,f),L(f,p);for(let E=0;E<h.length;E+=1)h[E]&&h[E].m(o,null);Pi(o,t[3]),g||(b=be(o,"change",t[7]),g=!0)},p(D,F){F&10&&c!==(c=D[3]===null)&&(f.selected=c),F&10&&(v=D[1],h=Un(h,F,_,1,D,v,d,o,hi,mp,null,hp)),F&10&&Pi(o,D[3])},d(D){D&&k(e);for(let F=0;F<h.length;F+=1)h[F].d();g=!1,b()}}}function mp(t,e){let r,n=e[18]+"",i,a,s;return{key:t,first:null,c(){r=Y("option"),i=ke(n),this.h()},l(o){r=Z(o,"OPTION",{});var f=H(r);i=Ie(f,n),f.forEach(k),this.h()},h(){r.__value=a=e[18],r.value=r.__value,r.selected=s=e[3]===e[18],this.first=r},m(o,f){fe(o,r,f),L(r,i)},p(o,f){e=o,f&2&&n!==(n=e[18]+"")&&Fr(i,n),f&2&&a!==(a=e[18])&&(r.__value=a,r.value=r.__value),f&10&&s!==(s=e[3]===e[18])&&(r.selected=s)},d(o){o&&k(r)}}}function $B(t){let e,r,n;return{c(){e=Y("div"),r=Y("div"),n=Y("progress"),this.h()},l(i){e=Z(i,"DIV",{class:!0});var a=H(e);r=Z(a,"DIV",{class:!0});var s=H(r);n=Z(s,"PROGRESS",{class:!0}),H(n).forEach(k),s.forEach(k),a.forEach(k),this.h()},h(){O(n,"class","progress progress-primary w-56"),O(r,"class","form-control w-full flex flex-col max-w-xs"),O(e,"class","py-10 flex justify-center")},m(i,a){fe(i,e,a),L(e,r),L(r,n)},p:Se,d(i){i&&k(e)}}}function GB(t){let e,r,n,i,a,s,o,f,p,c,h,d,g,b,v,_,D={ctx:t,current:null,token:null,hasCatch:!1,pending:$B,then:HB,catch:WB,value:17};return bs(b=t[4],D),{c(){e=Y("div"),r=Y("div"),n=Y("div"),i=Y("label"),a=Y("span"),s=ke("Open AI Key"),o=Me(),f=Y("input"),p=Me(),c=Y("label"),h=Y("button"),d=ke("Clear"),g=Me(),D.block.c(),this.h()},l(F){e=Z(F,"DIV",{class:!0});var E=H(e);r=Z(E,"DIV",{class:!0});var C=H(r);n=Z(C,"DIV",{class:!0});var A=H(n);i=Z(A,"LABEL",{class:!0});var S=H(i);a=Z(S,"SPAN",{class:!0});var P=H(a);s=Ie(P,"Open AI Key"),P.forEach(k),S.forEach(k),o=Pe(A),f=Z(A,"INPUT",{type:!0,placeholder:!0,class:!0}),p=Pe(A),c=Z(A,"LABEL",{class:!0});var B=H(c);h=Z(B,"BUTTON",{class:!0});var N=H(h);d=Ie(N,"Clear"),N.forEach(k),B.forEach(k),A.forEach(k),C.forEach(k),g=Pe(E),D.block.l(E),E.forEach(k),this.h()},h(){O(a,"class","label-text-alt"),O(i,"class","label"),f.value=t[5],O(f,"type","password"),O(f,"placeholder","Open AI Key"),O(f,"class","input input-bordered w-full max-w-xs"),O(h,"class","btn btn-xs btn-error"),O(c,"class","label"),O(n,"class","form-control w-full max-w-xs"),O(r,"class","flex justify-center"),O(e,"class","h-full p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(F,E){fe(F,e,E),L(e,r),L(r,n),L(n,i),L(i,a),L(a,s),L(n,o),L(n,f),L(n,p),L(n,c),L(c,h),L(h,d),L(e,g),D.block.m(e,D.anchor=null),D.mount=()=>e,D.anchor=null,v||(_=[be(f,"input",t[8]),be(h,"click",t[9])],v=!0)},p(F,[E]){t=F,E&32&&f.value!==t[5]&&(f.value=t[5]),D.ctx=t,E&16&&b!==(b=t[4])&&bs(b,D)||Sp(D,t,E)},i:Se,o:Se,d(F){F&&k(e),D.block.d(),D.token=null,D=null,v=!1,rr(_)}}}function KB(t,e,r){let n,i,a,s;tt(t,Br,C=>r(11,n=C)),tt(t,W1,C=>r(12,i=C)),tt(t,J1,C=>r(13,a=C)),tt(t,Gf,C=>r(5,s=C));const o=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001","gpt-3.5-turbo","gpt-3.5-turbo-0301"],f=["text-embedding-ada-002"];let p=s,c=[],h=[],d=a,g=i,b=null;async function v(C){if(!C||c.length&&h.length)return;const A=Vs(C);r(4,b=T3(A));const S=await b;S.data&&r(0,c=S.data.data.map(({id:P})=>P).filter(P=>o.includes(P))),r(1,h=S.data.data.map(({id:P})=>P).filter(P=>f.includes(P)))}function _(C){r(2,d=C.target.value),Pf.update(d)}function D(C){r(3,g=C.target.value),Ef.update(g)}function F(C){const A=C.target.value;js.update(A),A.length===51&&v(A),A.length===0&&E()}function E(){js.delete(),r(10,p=""),r(0,c=[]),r(1,h=[]),n.weightMode===_t.Embed&&Pt.update({...n,weightMode:_t.Circle})}return t.$$.update=()=>{t.$$.dirty&1024&&v(p)},[c,h,d,g,b,s,_,D,F,E,p]}class YB extends at{constructor(e){super(),ut(this,e,KB,GB,st,{})}}function ZB(t){let e,r;return{c(){e=vt("svg"),r=vt("path"),this.h()},l(n){e=gt(n,"svg",{xmlns:!0,class:!0,viewBox:!0});var i=H(e);r=gt(i,"path",{fill:!0,d:!0}),H(r).forEach(k),i.forEach(k),this.h()},h(){O(r,"fill","rgba(255,255,255, 0.7)"),O(r,"d","M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"),O(e,"xmlns","http://www.w3.org/2000/svg"),O(e,"class","h-4 w-4"),O(e,"viewBox","0 0 24 24")},m(n,i){fe(n,e,i),L(e,r)},p:Se,i:Se,o:Se,d(n){n&&k(e)}}}class JB extends at{constructor(e){super(),ut(this,e,null,ZB,st,{})}}function _p(t,e,r){const n=t.slice();return n[17]=e[r],n[19]=r,n}function bp(t,e,r){const n=t.slice();return n[20]=e[r][0],n[21]=e[r][1],n}function Dp(t,e){let r,n=e[21].name+"",i,a,s;return{key:t,first:null,c(){r=Y("option"),i=ke(n),this.h()},l(o){r=Z(o,"OPTION",{});var f=H(r);i=Ie(f,n),f.forEach(k),this.h()},h(){r.__value=a=e[20],r.value=r.__value,r.selected=s=e[0]===e[20],this.first=r},m(o,f){fe(o,r,f),L(r,i)},p(o,f){e=o,f&16&&n!==(n=e[21].name+"")&&Fr(i,n),f&16&&a!==(a=e[20])&&(r.__value=a,r.value=r.__value),f&17&&s!==(s=e[0]===e[20])&&(r.selected=s)},d(o){o&&k(r)}}}function yp(t){let e,r,n,i,a,s,o,f,p,c=qs(t[1])+"",h,d,g=(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1]),b,v,_,D,F,E,C,A,S,P,B,N,q,X,K=g&&wp(),U=t[3]&&Ap(t);return{c(){e=Y("div"),r=Y("div"),n=Y("input"),i=Me(),a=Y("div"),s=Y("label"),o=Y("span"),f=ke("Alias: "),p=Y("b"),h=ke(c),d=Me(),K&&K.c(),b=Me(),v=Y("button"),_=ke("Save"),D=Me(),F=Y("ul"),U&&U.c(),E=Me(),C=Y("li"),A=Y("input"),S=Me(),P=Y("div"),B=Y("button"),N=ke("Delete"),this.h()},l(R){e=Z(R,"DIV",{class:!0});var z=H(e);r=Z(z,"DIV",{class:!0});var V=H(r);n=Z(V,"INPUT",{type:!0,placeholder:!0,class:!0}),i=Pe(V),a=Z(V,"DIV",{class:!0,"data-tip":!0});var Q=H(a);s=Z(Q,"LABEL",{class:!0});var ae=H(s);o=Z(ae,"SPAN",{class:!0});var se=H(o);f=Ie(se,"Alias: "),p=Z(se,"B",{class:!0});var he=H(p);h=Ie(he,c),he.forEach(k),se.forEach(k),ae.forEach(k),Q.forEach(k),d=Pe(V),K&&K.l(V),V.forEach(k),b=Pe(z),v=Z(z,"BUTTON",{class:!0});var Ce=H(v);_=Ie(Ce,"Save"),Ce.forEach(k),z.forEach(k),D=Pe(R),F=Z(R,"UL",{class:!0});var Be=H(F);U&&U.l(Be),E=Pe(Be),C=Z(Be,"LI",{class:!0});var Fe=H(C);A=Z(Fe,"INPUT",{type:!0,placeholder:!0,class:!0}),Fe.forEach(k),Be.forEach(k),S=Pe(R),P=Z(R,"DIV",{class:!0});var je=H(P);B=Z(je,"BUTTON",{class:!0});var Ue=H(B);N=Ie(Ue,"Delete"),Ue.forEach(k),je.forEach(k),this.h()},h(){O(n,"type","text"),O(n,"placeholder","Name"),O(n,"class","input input-bordered input-sm w-full max-w-xs"),O(p,"class","text-white cursor-copy"),O(o,"class","label-text"),O(s,"class","label"),O(a,"class","tooltip tooltip-primary tooltip-bottom"),O(a,"data-tip","Use in prompts or directives to get random slot."),O(r,"class","flex flex-col w-full pr-2 "),O(v,"class","btn btn-sm btn-primary"),Ft(v,"btn-disabled",!Id(t[1])||(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1])),O(e,"class","w-full p-2 flex justify-between"),O(A,"type","text"),O(A,"placeholder","Add slot"),O(A,"class","input input-bordered input-sm w-full italic"),O(C,"class","p-1"),O(F,"class","px-4 py-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block"),O(B,"class","btn btn-sm btn-error ml-4"),O(P,"class","w-full p-2 h-12 flex justify-between")},m(R,z){fe(R,e,z),L(e,r),L(r,n),nn(n,t[1]),L(r,i),L(r,a),L(a,s),L(s,o),L(o,f),L(o,p),L(p,h),L(r,d),K&&K.m(r,null),L(e,b),L(e,v),L(v,_),fe(R,D,z),fe(R,F,z),U&&U.m(F,null),L(F,E),L(F,C),L(C,A),nn(A,t[2]),fe(R,S,z),fe(R,P,z),L(P,B),L(B,N),q||(X=[be(n,"input",t[11]),be(p,"click",t[12]),be(v,"click",t[6]),be(A,"input",t[14]),be(A,"input",t[15]),be(B,"click",t[7])],q=!0)},p(R,z){z&2&&n.value!==R[1]&&nn(n,R[1]),z&2&&c!==(c=qs(R[1])+"")&&Fr(h,c),z&11&&(g=(R[0]==="new"||R[3]&&R[3].name!==R[1])&&!R[5](R[1])),g?K||(K=wp(),K.c(),K.m(r,null)):K&&(K.d(1),K=null),z&43&&Ft(v,"btn-disabled",!Id(R[1])||(R[0]==="new"||R[3]&&R[3].name!==R[1])&&!R[5](R[1])),R[3]?U?U.p(R,z):(U=Ap(R),U.c(),U.m(F,E)):U&&(U.d(1),U=null),z&4&&A.value!==R[2]&&nn(A,R[2])},d(R){R&&k(e),K&&K.d(),R&&k(D),R&&k(F),U&&U.d(),R&&k(S),R&&k(P),q=!1,rr(X)}}}function wp(t){let e,r,n;return{c(){e=Y("label"),r=Y("span"),n=ke("Name In Use"),this.h()},l(i){e=Z(i,"LABEL",{class:!0});var a=H(e);r=Z(a,"SPAN",{class:!0});var s=H(r);n=Ie(s,"Name In Use"),s.forEach(k),a.forEach(k),this.h()},h(){O(r,"class","label-text text-orange-300"),O(e,"class","label")},m(i,a){fe(i,e,a),L(e,r),L(r,n)},d(i){i&&k(e)}}}function Ap(t){let e=[],r=new Map,n,i=t[3].values;const a=s=>s[19];for(let s=0;s<i.length;s+=1){let o=_p(t,i,s),f=a(o);r.set(f,e[s]=Ep(f,o))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();n=Tt()},l(s){for(let o=0;o<e.length;o+=1)e[o].l(s);n=Tt()},m(s,o){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(s,o);fe(s,n,o)},p(s,o){o&264&&(i=s[3].values,e=Un(e,o,a,1,s,i,r,n.parentNode,hi,Ep,n,_p))},d(s){for(let o=0;o<e.length;o+=1)e[o].d(s);s&&k(n)}}}function Ep(t,e){let r,n,i,a,s,o;function f(...p){return e[13](e[19],...p)}return{key:t,first:null,c(){r=Y("li"),n=Y("input"),a=Me(),this.h()},l(p){r=Z(p,"LI",{class:!0});var c=H(r);n=Z(c,"INPUT",{type:!0,placeholder:!0,class:!0}),a=Pe(c),c.forEach(k),this.h()},h(){n.value=i=e[17],O(n,"type","text"),O(n,"placeholder",""),O(n,"class","input input-bordered input-sm w-full"),O(r,"class","p-1"),this.first=r},m(p,c){fe(p,r,c),L(r,n),L(r,a),s||(o=be(n,"input",f),s=!0)},p(p,c){e=p,c&8&&i!==(i=e[17])&&n.value!==i&&(n.value=i)},d(p){p&&k(r),s=!1,o()}}}function QB(t){let e,r,n,i,a,s,o,f,p,c,h,d=[],g=new Map,b,v,_,D,F,E,C=Object.entries(t[4]);const A=P=>P[20];for(let P=0;P<C.length;P+=1){let B=bp(t,C,P),N=A(B);g.set(N,d[P]=Dp(N,B))}let S=t[0]&&yp(t);return{c(){e=Y("div"),r=Y("div"),n=Y("div"),i=Y("label"),a=Y("span"),s=ke("Edit Slots"),o=Me(),f=Y("select"),p=Y("option"),c=ke("Pick one");for(let P=0;P<d.length;P+=1)d[P].c();b=Y("option"),v=ke("New"),D=Me(),S&&S.c(),this.h()},l(P){e=Z(P,"DIV",{class:!0});var B=H(e);r=Z(B,"DIV",{class:!0});var N=H(r);n=Z(N,"DIV",{class:!0});var q=H(n);i=Z(q,"LABEL",{class:!0});var X=H(i);a=Z(X,"SPAN",{class:!0});var K=H(a);s=Ie(K,"Edit Slots"),K.forEach(k),X.forEach(k),o=Pe(q),f=Z(q,"SELECT",{class:!0});var U=H(f);p=Z(U,"OPTION",{});var R=H(p);c=Ie(R,"Pick one"),R.forEach(k);for(let V=0;V<d.length;V+=1)d[V].l(U);b=Z(U,"OPTION",{});var z=H(b);v=Ie(z,"New"),z.forEach(k),U.forEach(k),q.forEach(k),N.forEach(k),D=Pe(B),S&&S.l(B),B.forEach(k),this.h()},h(){O(a,"class","label-text"),O(i,"class","label"),p.disabled=!0,p.selected=h=t[0]===null,p.__value="Pick one",p.value=p.__value,b.__value="new",b.value=b.__value,b.selected=_=t[0]==="new",O(f,"class","select select-bordered"),t[0]===void 0&&Zi(()=>t[10].call(f)),O(n,"class","form-control w-full max-w-xs mb-4"),O(r,"class","flex justify-center"),O(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(P,B){fe(P,e,B),L(e,r),L(r,n),L(n,i),L(i,a),L(a,s),L(n,o),L(n,f),L(f,p),L(p,c);for(let N=0;N<d.length;N+=1)d[N]&&d[N].m(f,null);L(f,b),L(b,v),Pi(f,t[0],!0),L(e,D),S&&S.m(e,null),F||(E=be(f,"change",t[10]),F=!0)},p(P,[B]){B&17&&h!==(h=P[0]===null)&&(p.selected=h),B&17&&(C=Object.entries(P[4]),d=Un(d,B,A,1,P,C,g,f,hi,Dp,b,bp)),B&17&&_!==(_=P[0]==="new")&&(b.selected=_),B&17&&Pi(f,P[0]),P[0]?S?S.p(P,B):(S=yp(P),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},i:Se,o:Se,d(P){P&&k(e);for(let B=0;B<d.length;B+=1)d[B].d();S&&S.d(),F=!1,E()}}}function XB(t,e,r){let n;tt(t,r5,C=>r(4,n=C));let i=null,a="",s="",o=null;function f(C){r(3,o=C&&C!=="new"?{...n[C]}:C==="new"?{name:"New Slot Set",values:[]}:null),r(1,a=o?o.name:"")}function p(C){return Object.values(n).every(S=>S.name!==C)}function c(){if(o)if(i&&i!=="new")Fi.update(i,{...o,name:a});else{if(!p()){alert("Name already in use");return}const A=vo();Fi.update(A,{...o,name:a}),r(0,i=A)}}function h(){Fi.delete(i),r(1,a=""),r(2,s=""),r(0,i=null),r(3,o=null)}const d=$s((C,A)=>{if(!o||!i)return;const S=[...o.values];A.length===0?S.splice(C,1):S[C]=A,r(3,o.values=S,o),i!=="new"&&Fi.update(i,o)},1e3),g=$s(C=>{if(!o||!i)return;const A=[...o.values];C.length>0&&(A.push(C),r(3,o.values=A,o),r(2,s=""),i!=="new"&&Fi.update(i,o))},1e3);function b(){i=Zy(this),r(0,i)}function v(){a=this.value,r(1,a)}const _=()=>navigator.clipboard.writeText(qs(a)),D=(C,A)=>d(C,A.target.value);function F(){s=this.value,r(2,s)}const E=C=>g(C.target.value);return t.$$.update=()=>{t.$$.dirty&1&&f(i)},[i,a,s,o,n,p,c,h,d,g,b,v,_,D,F,E]}class e4 extends at{constructor(e){super(),ut(this,e,XB,QB,st,{})}}function t4(t){let e,r;return e=new YB({}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function r4(t){let e,r;return e=new e4({}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function n4(t){let e,r;return e=new zB({}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function i4(t){let e,r;return e=new dB({}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function a4(t){let e,r;return e=new h8({}),{c(){ze(e.$$.fragment)},l(n){We(e.$$.fragment,n)},m(n,i){He(e,n,i),r=!0},i(n){r||(_e(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){$e(e,n)}}}function u4(t){let e,r,n,i,a,s,o,f,p,c,h,d,g,b,v,_,D,F,E,C,A,S,P,B,N,q,X,K;A=new JB({});const U=[a4,i4,n4,r4,t4],R=[];function z(V,Q){return V[0]==="select"?0:V[0]==="edit"?1:V[0]==="generate"?2:V[0]==="slots"?3:V[0]==="settings"?4:-1}return~(B=z(t))&&(N=R[B]=U[B](t)),{c(){e=Y("div"),r=Y("div"),n=Y("div"),i=Y("button"),a=ke("Select"),o=Me(),f=Y("button"),p=ke("Edit"),h=Me(),d=Y("button"),g=ke("Generate"),v=Me(),_=Y("button"),D=ke("Slots"),E=Me(),C=Y("button"),ze(A.$$.fragment),P=Me(),N&&N.c(),this.h()},l(V){e=Z(V,"DIV",{class:!0});var Q=H(e);r=Z(Q,"DIV",{class:!0});var ae=H(r);n=Z(ae,"DIV",{class:!0});var se=H(n);i=Z(se,"BUTTON",{class:!0});var he=H(i);a=Ie(he,"Select"),he.forEach(k),o=Pe(se),f=Z(se,"BUTTON",{class:!0});var Ce=H(f);p=Ie(Ce,"Edit"),Ce.forEach(k),h=Pe(se),d=Z(se,"BUTTON",{class:!0});var Be=H(d);g=Ie(Be,"Generate"),Be.forEach(k),v=Pe(se),_=Z(se,"BUTTON",{class:!0});var Fe=H(_);D=Ie(Fe,"Slots"),Fe.forEach(k),E=Pe(se),C=Z(se,"BUTTON",{class:!0});var je=H(C);We(A.$$.fragment,je),je.forEach(k),se.forEach(k),P=Pe(ae),N&&N.l(ae),ae.forEach(k),Q.forEach(k),this.h()},h(){O(i,"class",s=t[0]==="select"?"btn btn-active":"btn"),O(f,"class",c=t[0]==="edit"?"btn btn-active":"btn"),O(d,"class",b=t[0]==="generate"?"btn btn-active":"btn"),O(_,"class",F=t[0]==="slots"?"btn btn-active":"btn"),O(C,"class",S=t[0]==="settings"?"btn btn-active":"btn"),O(n,"class","btn-group btn-group-vertical sm:btn-group-horizontal bg-base-100 w-full flex justify-center p-2"),O(r,"class","h-screen overflow-y-auto flex flex-col"),O(e,"class","max-w-md w-1/2 h-screen overflow-y-auto")},m(V,Q){fe(V,e,Q),L(e,r),L(r,n),L(n,i),L(i,a),L(n,o),L(n,f),L(f,p),L(n,h),L(n,d),L(d,g),L(n,v),L(n,_),L(_,D),L(n,E),L(n,C),He(A,C,null),L(r,P),~B&&R[B].m(r,null),q=!0,X||(K=[be(i,"click",t[2]),be(f,"click",t[3]),be(d,"click",t[4]),be(_,"click",t[5]),be(C,"click",t[6])],X=!0)},p(V,[Q]){(!q||Q&1&&s!==(s=V[0]==="select"?"btn btn-active":"btn"))&&O(i,"class",s),(!q||Q&1&&c!==(c=V[0]==="edit"?"btn btn-active":"btn"))&&O(f,"class",c),(!q||Q&1&&b!==(b=V[0]==="generate"?"btn btn-active":"btn"))&&O(d,"class",b),(!q||Q&1&&F!==(F=V[0]==="slots"?"btn btn-active":"btn"))&&O(_,"class",F),(!q||Q&1&&S!==(S=V[0]==="settings"?"btn btn-active":"btn"))&&O(C,"class",S);let ae=B;B=z(V),B!==ae&&(N&&(pr(),we(R[ae],1,1,()=>{R[ae]=null}),vr()),~B?(N=R[B],N||(N=R[B]=U[B](V),N.c()),_e(N,1),N.m(r,null)):N=null)},i(V){q||(_e(A.$$.fragment,V),_e(N),q=!0)},o(V){we(A.$$.fragment,V),we(N),q=!1},d(V){V&&k(e),$e(A),~B&&R[B].d(),X=!1,rr(K)}}}function s4(t,e,r){let n;tt(t,l8,c=>r(0,n=c));function i(c){Zn.update(c)}const a=()=>i("select"),s=()=>i("edit"),o=()=>i("generate"),f=()=>i("slots"),p=()=>i("settings");return t.$$.update=()=>{t.$$.dirty&1&&(n||Zn.update("select"))},[n,i,a,s,o,f,p]}class o4 extends at{constructor(e){super(),ut(this,e,s4,u4,st,{})}}function l4(t){let e,r;return{c(){e=Y("p"),r=ke("Loading..."),this.h()},l(n){e=Z(n,"P",{class:!0});var i=H(e);r=Ie(i,"Loading..."),i.forEach(k),this.h()},h(){O(e,"class","text-lg")},m(n,i){fe(n,e,i),L(e,r)},i:Se,o:Se,d(n){n&&k(e)}}}function f4(t){let e,r;return{c(){e=Y("p"),r=ke("This tool is not optimized for small screens or mobile devices."),this.h()},l(n){e=Z(n,"P",{class:!0});var i=H(e);r=Ie(i,"This tool is not optimized for small screens or mobile devices."),i.forEach(k),this.h()},h(){O(e,"class","text-lg")},m(n,i){fe(n,e,i),L(e,r)},i:Se,o:Se,d(n){n&&k(e)}}}function c4(t){let e,r,n,i;return e=new o4({}),n=new a8({}),{c(){ze(e.$$.fragment),r=Me(),ze(n.$$.fragment)},l(a){We(e.$$.fragment,a),r=Pe(a),We(n.$$.fragment,a)},m(a,s){He(e,a,s),fe(a,r,s),He(n,a,s),i=!0},i(a){i||(_e(e.$$.fragment,a),_e(n.$$.fragment,a),i=!0)},o(a){we(e.$$.fragment,a),we(n.$$.fragment,a),i=!1},d(a){$e(e,a),a&&k(r),$e(n,a)}}}function h4(t){let e,r,n,i,a,s;Zi(t[2]);const o=[c4,f4,l4],f=[];function p(c,h){return c[0]&&c[1]&&c[0]>1024&&c[1]>800?0:c[0]&&c[1]?1:2}return e=p(t),r=f[e]=o[e](t),{c(){r.c(),n=Tt()},l(c){r.l(c),n=Tt()},m(c,h){f[e].m(c,h),fe(c,n,h),i=!0,a||(s=be(window,"resize",t[2]),a=!0)},p(c,[h]){let d=e;e=p(c),e!==d&&(pr(),we(f[d],1,1,()=>{f[d]=null}),vr(),r=f[e],r||(r=f[e]=o[e](c),r.c()),_e(r,1),r.m(n.parentNode,n))},i(c){i||(_e(r),i=!0)},o(c){we(r),i=!1},d(c){f[e].d(c),c&&k(n),a=!1,s()}}}function d4(t,e,r){let n=null,i=null;function a(){r(0,n=window.innerWidth),r(1,i=window.innerHeight)}return[n,i,a]}class g4 extends at{constructor(e){super(),ut(this,e,d4,h4,st,{})}}export{g4 as default};
