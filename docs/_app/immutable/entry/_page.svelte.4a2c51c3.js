import{J as It,S as ut,i as st,s as ot,k as H,q as Oe,a as Fe,l as G,m as j,r as Me,h as k,c as Se,n as B,K as ct,b as le,G as I,L as ge,H as Pe,M as $t,I as Ke,N as dt,O as pt,y as ze,z as qe,A as We,g as me,d as we,B as He,p as Tt,u as Br,v as cr,f as hr,e as Pt,P as Ks,Q as Ji,R as vu,T as nn,U as Ap,V as Ci,W as Bn,X as Cp,Y as Ww,Z as Ds,_ as Fp,$ as Yn,a0 as Oi,a1 as Hw}from"../chunks/index.58e9e286.js";import{w as gr,d as $s}from"../chunks/index.05e4a026.js";var wt=(t=>(t.Circle="circle",t.Ring="ring",t.Bars="bars",t.Embed="embed",t.Pie="pie",t))(wt||{}),wr=(t=>(t.Build="build",t.Concept="concept",t.History="history",t))(wr||{});const El="appStage";function Gw(){const t=gr(wr.Build),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[El]||wr.Build),{subscribe:e,update:a=>{!a||!i||(localStorage[El]=a,r(a))},get:()=>It(t),delete:()=>{i&&(delete localStorage[El],r(wr.Build))}}}const sf=Gw();function Kw(t){let e,r,n,i,a,s,o,l,p,f,d;return{c(){e=H("div"),r=H("button"),n=Oe("Build"),i=Fe(),a=H("button"),s=Oe("Concept"),o=Fe(),l=H("button"),p=Oe("History"),this.h()},l(h){e=G(h,"DIV",{class:!0});var v=j(e);r=G(v,"BUTTON",{class:!0});var b=j(r);n=Me(b,"Build"),b.forEach(k),i=Se(v),a=G(v,"BUTTON",{class:!0});var g=j(a);s=Me(g,"Concept"),g.forEach(k),o=Se(v),l=G(v,"BUTTON",{class:!0});var _=j(l);p=Me(_,"History"),_.forEach(k),v.forEach(k),this.h()},h(){B(r,"class","btn btn-sm"),ct(r,"btn-active",t[0]===wr.Build),B(a,"class","btn btn-sm"),ct(a,"btn-active",t[0]===wr.Concept),B(l,"class","btn btn-sm"),ct(l,"btn-active",t[0]===wr.History),B(e,"class","btn-group btn-group-horizontal p-2")},m(h,v){le(h,e,v),I(e,r),I(r,n),I(e,i),I(e,a),I(a,s),I(e,o),I(e,l),I(l,p),f||(d=[ge(r,"click",t[2]),ge(a,"click",t[3]),ge(l,"click",t[4])],f=!0)},p(h,[v]){v&1&&ct(r,"btn-active",h[0]===wr.Build),v&1&&ct(a,"btn-active",h[0]===wr.Concept),v&1&&ct(l,"btn-active",h[0]===wr.History)},i:Pe,o:Pe,d(h){h&&k(e),f=!1,$t(d)}}}function $w(t,e,r){let n;Ke(t,sf,l=>r(0,n=l));function i(l){sf.update(l)}return[n,i,()=>i(wr.Build),()=>i(wr.Concept),()=>i(wr.History)]}class Yw extends ut{constructor(e){super(),st(this,e,$w,Kw,ot,{})}}function Zw(t){let e,r,n,i;return{c(){e=dt("svg"),r=dt("rect"),n=dt("rect"),i=dt("rect"),this.h()},l(a){e=pt(a,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var s=j(e);r=pt(s,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),j(r).forEach(k),n=pt(s,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),j(n).forEach(k),i=pt(s,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),j(i).forEach(k),s.forEach(k),this.h()},h(){B(r,"x","5"),B(r,"y","12"),B(r,"width","40"),B(r,"height","4"),B(r,"fill","rgba(255,255,255, 0.7)"),B(n,"x","5"),B(n,"y","23"),B(n,"width","30"),B(n,"height","4"),B(n,"fill","rgba(255,255,255, 0.7)"),B(i,"x","5"),B(i,"y","34"),B(i,"width","35"),B(i,"height","4"),B(i,"fill","rgba(255,255,255, 0.7)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-6 w-6"),B(e,"viewBox","0 0 50 50")},m(a,s){le(a,e,s),I(e,r),I(e,n),I(e,i)},p:Pe,i:Pe,o:Pe,d(a){a&&k(e)}}}class Jw extends ut{constructor(e){super(),st(this,e,null,Zw,ot,{})}}function Qw(t){let e,r;return{c(){e=dt("svg"),r=dt("circle"),this.h()},l(n){e=pt(n,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var i=j(e);r=pt(i,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),j(r).forEach(k),i.forEach(k),this.h()},h(){B(r,"cx","25"),B(r,"cy","25"),B(r,"r","20"),B(r,"fill","rgba(255,255,255, 0.7)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-6 w-6"),B(e,"viewBox","0 0 50 50")},m(n,i){le(n,e,i),I(e,r)},p:Pe,i:Pe,o:Pe,d(n){n&&k(e)}}}class Xw extends ut{constructor(e){super(),st(this,e,null,Qw,ot,{})}}function ey(t){let e,r,n,i,a,s;return{c(){e=dt("svg"),r=dt("circle"),n=dt("circle"),i=dt("circle"),a=dt("circle"),s=dt("circle"),this.h()},l(o){e=pt(o,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var l=j(e);r=pt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),j(r).forEach(k),n=pt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),j(n).forEach(k),i=pt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),j(i).forEach(k),a=pt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),j(a).forEach(k),s=pt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),j(s).forEach(k),l.forEach(k),this.h()},h(){B(r,"cx","20"),B(r,"cy","80"),B(r,"r","5"),B(r,"fill","rgba(255,255,255, 0.7)"),B(n,"cx","40"),B(n,"cy","40"),B(n,"r","5"),B(n,"fill","rgba(255,255,255, 0.7)"),B(i,"cx","70"),B(i,"cy","20"),B(i,"r","5"),B(i,"fill","rgba(255,255,255, 0.7)"),B(a,"cx","80"),B(a,"cy","60"),B(a,"r","5"),B(a,"fill","rgba(255,255,255, 0.7)"),B(s,"cx","60"),B(s,"cy","75"),B(s,"r","5"),B(s,"fill","rgba(255,255,255, 0.7)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-6 w-6"),B(e,"viewBox","0 0 100 100")},m(o,l){le(o,e,l),I(e,r),I(e,n),I(e,i),I(e,a),I(e,s)},p:Pe,i:Pe,o:Pe,d(o){o&&k(e)}}}class ty extends ut{constructor(e){super(),st(this,e,null,ey,ot,{})}}const Al="selectedPrompt";function ry(){const t=gr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Al]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[Al]=a,r(a))},get:()=>It(t),delete:()=>{i&&(delete localStorage[Al],r(""))}}}const $i=ry();function ny(){const t=gr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,s)=>{if(s.startsWith("prompt_")){const o=s.split("_")[1];a[o]=JSON.parse(localStorage[s])}return a},{})||{}),{subscribe:e,update:(a,s)=>{const o=It(t),p={...o[a]||{},...s};i&&(localStorage[`prompt_${a}`]=JSON.stringify(p));const f={...o,[a]:p};r(f)},get:a=>It(t)[a],delete:a=>{i&&delete localStorage[`prompt_${a}`];const s={...It(t)};delete s[a],r(s)}}}const su=ny(),iy=$s(su,t=>Object.entries(It(su))),us="activePrompt";function Ir(t,e,r,n=1){return{id:t,text:e,barWeight:n,parsedWeight:r}}function c0(){return{0:Ir(0,"Magic potion in a mystical bottle",1),1:Ir(1,"A crystalline decanter",1),2:Ir(2,"An ornate tequila bottle",1),3:Ir(3,"An antique sake bottle",1),4:Ir(4,"A colorful perfume bottle",1),5:Ir(5,"A glass vase full of vibrant flowers",1),6:Ir(6,"A minimalist glass tea kettle",1),7:Ir(7,"Chihuly glass art",1),8:Ir(8,"A fine wine bottle",1),9:Ir(9,"A gourmet vinegar bottle",1),10:Ir(10,"A stunning fishbowl",1),11:Ir(11,"A striking piece of tourmaline",1),12:Ir(12,"A finely cut piece of sapphire",1),13:Ir(13,"Iittala glass art",1)}}function Fi(t,e=wt.Pie){return{weightedPrompts:t||{},weightMode:e,pieAngles:{},ringAngles:{},ringStartAngle:0,ringReverse:!1,ringWeightScaling:2,ringExponentialScaling:!0,circleAngles:{},circleMarker:[270,.33],circleWeightScaling:2,circleExponentialScaling:!0,embedWeightScaling:2,embedExponentialScaling:!0,embedClusters:0,embedPromptLimit:Object.keys(t).length}}function ay(){const t=gr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",a=i&&localStorage[us]?JSON.parse(localStorage[us]):Fi(c0());return r({...Fi({}),...a}),{subscribe:e,update:s=>{const o=$i.get();o&&su.update(o,s),!(!s||!i)&&(localStorage[us]=JSON.stringify(s),r({...Fi({}),...s}))},get:()=>It(t),delete:()=>{i&&(delete localStorage[us],r(Fi(c0())))}}}const rt=ay();function uy(t){let e,r,n,i,a,s,o,l,p,f,d,h;return n=new Jw({}),s=new Xw({}),p=new ty({}),{c(){e=H("div"),r=H("button"),ze(n.$$.fragment),i=Fe(),a=H("button"),ze(s.$$.fragment),o=Fe(),l=H("button"),ze(p.$$.fragment),this.h()},l(v){e=G(v,"DIV",{class:!0});var b=j(e);r=G(b,"BUTTON",{class:!0});var g=j(r);qe(n.$$.fragment,g),g.forEach(k),i=Se(b),a=G(b,"BUTTON",{class:!0});var _=j(a);qe(s.$$.fragment,_),_.forEach(k),o=Se(b),l=G(b,"BUTTON",{class:!0});var D=j(l);qe(p.$$.fragment,D),D.forEach(k),b.forEach(k),this.h()},h(){B(r,"class","btn btn-sm"),ct(r,"btn-active",t[0].weightMode===wt.Bars),B(a,"class","btn btn-sm"),ct(a,"btn-active",t[0].weightMode===wt.Circle||t[0].weightMode===wt.Pie||t[0].weightMode===wt.Ring),B(l,"class","btn btn-sm"),ct(l,"btn-active",t[0].weightMode===wt.Embed),B(e,"class","btn-group btn-group-horizontal w-full flex justify-end p-2")},m(v,b){le(v,e,b),I(e,r),We(n,r,null),I(e,i),I(e,a),We(s,a,null),I(e,o),I(e,l),We(p,l,null),f=!0,d||(h=[ge(r,"click",t[2]),ge(a,"click",t[3]),ge(l,"click",t[4])],d=!0)},p(v,[b]){(!f||b&1)&&ct(r,"btn-active",v[0].weightMode===wt.Bars),(!f||b&1)&&ct(a,"btn-active",v[0].weightMode===wt.Circle||v[0].weightMode===wt.Pie||v[0].weightMode===wt.Ring),(!f||b&1)&&ct(l,"btn-active",v[0].weightMode===wt.Embed)},i(v){f||(me(n.$$.fragment,v),me(s.$$.fragment,v),me(p.$$.fragment,v),f=!0)},o(v){we(n.$$.fragment,v),we(s.$$.fragment,v),we(p.$$.fragment,v),f=!1},d(v){v&&k(e),He(n),He(s),He(p),d=!1,$t(h)}}}function sy(t,e,r){let n;Ke(t,rt,l=>r(0,n=l));function i(l){const p={...n,weightMode:l};rt.update(p)}return[n,i,()=>i(wt.Bars),()=>i(wt.Pie),()=>i(wt.Embed)]}class oy extends ut{constructor(e){super(),st(this,e,sy,uy,ot,{})}}function ly(t){let e,r,n,i;return{c(){e=dt("svg"),r=dt("path"),n=dt("path"),i=dt("path"),this.h()},l(a){e=pt(a,"svg",{xmlns:!0,class:!0,viewBox:!0});var s=j(e);r=pt(s,"path",{d:!0,fill:!0}),j(r).forEach(k),n=pt(s,"path",{d:!0,fill:!0}),j(n).forEach(k),i=pt(s,"path",{d:!0,fill:!0}),j(i).forEach(k),s.forEach(k),this.h()},h(){B(r,"d","M50 50 L50 10 A40 40 0 0 1 90 50 z"),B(r,"fill","rgba(255,255,255, 0.7)"),B(n,"d","M50 50 L90 50 A40 40 0 0 1 50 90 z"),B(n,"fill","rgba(255,255,255, 0.3)"),B(i,"d","M50 50 L50 90 A40 40 0 0 1 10 50 z"),B(i,"fill","rgba(255,255,255, 0.9)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"class","h-5 w-5"),B(e,"viewBox","0 0 100 100")},m(a,s){le(a,e,s),I(e,r),I(e,n),I(e,i)},p:Pe,i:Pe,o:Pe,d(a){a&&k(e)}}}class fy extends ut{constructor(e){super(),st(this,e,null,ly,ot,{})}}function cy(t){let e,r,n;return{c(){e=dt("svg"),r=dt("circle"),n=dt("circle"),this.h()},l(i){e=pt(i,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var a=j(e);r=pt(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),j(r).forEach(k),n=pt(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),j(n).forEach(k),a.forEach(k),this.h()},h(){B(r,"cx","25"),B(r,"cy","25"),B(r,"r","20"),B(r,"stroke","rgba(255,255,255, 0.7)"),B(r,"stroke-width","4"),B(r,"fill","none"),B(n,"cx","25"),B(n,"cy","25"),B(n,"r","4"),B(n,"stroke","rgba(255,255,255, 0.7)"),B(n,"stroke-width","1"),B(n,"fill","rgba(255,255,255, 0.7)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-5 w-5"),B(e,"viewBox","0 0 50 50")},m(i,a){le(i,e,a),I(e,r),I(e,n)},p:Pe,i:Pe,o:Pe,d(i){i&&k(e)}}}class hy extends ut{constructor(e){super(),st(this,e,null,cy,ot,{})}}function dy(t){let e,r,n,i,a;return{c(){e=dt("svg"),r=dt("mask"),n=dt("circle"),i=dt("path"),a=dt("circle"),this.h()},l(s){e=pt(s,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var o=j(e);r=pt(o,"mask",{id:!0});var l=j(r);n=pt(l,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),j(n).forEach(k),i=pt(l,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),j(i).forEach(k),l.forEach(k),a=pt(o,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,mask:!0}),j(a).forEach(k),o.forEach(k),this.h()},h(){B(n,"cx","25"),B(n,"cy","25"),B(n,"r","20"),B(n,"stroke","white"),B(n,"stroke-width","6"),B(n,"fill","none"),B(i,"d","M40,22 L45,27 L50,22"),B(i,"stroke","black"),B(i,"stroke-width","4"),B(i,"fill","none"),B(r,"id","hole"),B(a,"cx","25"),B(a,"cy","25"),B(a,"r","20"),B(a,"stroke","rgba(255,255,255, 0.7)"),B(a,"stroke-width","4"),B(a,"fill","none"),B(a,"mask","url(#hole)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-5 w-5"),B(e,"viewBox","0 0 50 50")},m(s,o){le(s,e,o),I(e,r),I(r,n),I(r,i),I(e,a)},p:Pe,i:Pe,o:Pe,d(s){s&&k(e)}}}class py extends ut{constructor(e){super(),st(this,e,null,dy,ot,{})}}function vy(t){let e,r,n,i,a,s,o,l,p,f,d,h;return n=new fy({}),s=new hy({}),p=new py({}),{c(){e=H("div"),r=H("button"),ze(n.$$.fragment),i=Fe(),a=H("button"),ze(s.$$.fragment),o=Fe(),l=H("button"),ze(p.$$.fragment),this.h()},l(v){e=G(v,"DIV",{class:!0});var b=j(e);r=G(b,"BUTTON",{class:!0});var g=j(r);qe(n.$$.fragment,g),g.forEach(k),i=Se(b),a=G(b,"BUTTON",{class:!0});var _=j(a);qe(s.$$.fragment,_),_.forEach(k),o=Se(b),l=G(b,"BUTTON",{class:!0});var D=j(l);qe(p.$$.fragment,D),D.forEach(k),b.forEach(k),this.h()},h(){B(r,"class","btn btn-xs"),ct(r,"btn-active",t[0].weightMode===wt.Pie),B(a,"class","btn btn-xs"),ct(a,"btn-active",t[0].weightMode===wt.Circle),B(l,"class","btn btn-xs"),ct(l,"btn-active",t[0].weightMode===wt.Ring),B(e,"class","btn-group btn-group-horizontal w-full flex justify-center p-1")},m(v,b){le(v,e,b),I(e,r),We(n,r,null),I(e,i),I(e,a),We(s,a,null),I(e,o),I(e,l),We(p,l,null),f=!0,d||(h=[ge(r,"click",t[2]),ge(a,"click",t[3]),ge(l,"click",t[4])],d=!0)},p(v,[b]){(!f||b&1)&&ct(r,"btn-active",v[0].weightMode===wt.Pie),(!f||b&1)&&ct(a,"btn-active",v[0].weightMode===wt.Circle),(!f||b&1)&&ct(l,"btn-active",v[0].weightMode===wt.Ring)},i(v){f||(me(n.$$.fragment,v),me(s.$$.fragment,v),me(p.$$.fragment,v),f=!0)},o(v){we(n.$$.fragment,v),we(s.$$.fragment,v),we(p.$$.fragment,v),f=!1},d(v){v&&k(e),He(n),He(s),He(p),d=!1,$t(h)}}}function gy(t,e,r){let n;Ke(t,rt,l=>r(0,n=l));function i(l){const p={...n,weightMode:l};rt.update(p)}return[n,i,()=>i(wt.Pie),()=>i(wt.Circle),()=>i(wt.Ring)]}class my extends ut{constructor(e){super(),st(this,e,gy,vy,ot,{})}}function of(){return of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},of.apply(this,arguments)}var Sp={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function rr(t){return typeof t=="number"}function Sn(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function Bp(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function Op(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Mp(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Gn(t){return typeof t=="string"}var er=Array.isArray;function Jr(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function ws(t){return Array.isArray(t)||Jr(t)}function _y(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function by(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Dy(t){return t&&t.constructor.prototype.isRange===!0||!1}function Tf(t){return t&&t.constructor.prototype.isIndex===!0||!1}function wy(t){return typeof t=="boolean"}function yy(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function Ey(t){return t&&t.constructor.prototype.isHelp===!0||!1}function Ay(t){return typeof t=="function"}function Cy(t){return t instanceof Date}function Fy(t){return t instanceof RegExp}function Sy(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!Bp(t)&&!Op(t))}function By(t){return t===null}function If(t){return t===void 0}function Oy(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function My(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function Py(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function ky(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ty(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Iy(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ny(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function xy(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ry(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ly(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function Uy(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function Vy(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function jy(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function zy(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function qy(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Wy(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function Hy(t){return t&&t.constructor.prototype.isChain===!0||!1}function uu(t){var e=typeof t;return e==="object"?t===null?"null":Sn(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Fr(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return Fr(r)});if(t instanceof Date)return new Date(t.valueOf());if(Sn(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return Gy(t,Fr)}function Gy(t,e){var r={};for(var n in t)ou(t,n)&&(r[n]=e(t[n]));return r}function Ky(t,e){for(var r in e)ou(e,r)&&(t[r]=e[r]);return t}function ys(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!ys(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!ys(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function ou(t,e){return t&&Object.hasOwnProperty.call(t,e)}function $y(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],a=t[i];a!==void 0&&(r[i]=a)}return r}var Yy=["Matrix","Array"],Zy=["number","BigNumber","Fraction"],Ys=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Sp)};of(Ys,Sp,{MATRIX_OPTIONS:Yy,NUMBER_OPTIONS:Zy});function Nn(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Jy(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,s=!1,o;return{s:function(){r=r.call(t)},n:function(){var p=r.next();return a=p.done,p},e:function(p){s=!0,o=p},f:function(){try{!a&&r.return!=null&&r.return()}finally{if(s)throw o}}}}function Jy(t,e){if(t){if(typeof t=="string")return h0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h0(t,e)}}function h0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Da(t){return Da=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Da(t)}function d0(){return!0}function Fn(){return!1}function ga(){}var p0="Argument is not a typed-function.";function Pp(){function t(K){return Da(K)==="object"&&K!==null&&K.constructor===Object}var e=[{name:"number",test:function(Y){return typeof Y=="number"}},{name:"string",test:function(Y){return typeof Y=="string"}},{name:"boolean",test:function(Y){return typeof Y=="boolean"}},{name:"Function",test:function(Y){return typeof Y=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(Y){return Y instanceof Date}},{name:"RegExp",test:function(Y){return Y instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(Y){return Y===null}},{name:"undefined",test:function(Y){return Y===void 0}}],r={name:"any",test:d0,isAny:!0},n,i,a=0,s={createCount:0};function o(K){var Y=n.get(K);if(Y)return Y;var ee='Unknown type "'+K+'"',fe=K.toLowerCase(),ue,he=Nn(i),se;try{for(he.s();!(se=he.n()).done;)if(ue=se.value,ue.toLowerCase()===fe){ee+='. Did you mean "'+ue+'" ?';break}}catch(ce){he.e(ce)}finally{he.f()}throw new TypeError(ee)}function l(K){for(var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",ee=Y?o(Y).index:i.length,fe=[],ue=0;ue<K.length;++ue){if(!K[ue]||typeof K[ue].name!="string"||typeof K[ue].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var he=K[ue].name;if(n.has(he))throw new TypeError('Duplicate type name "'+he+'"');fe.push(he),n.set(he,{name:he,test:K[ue].test,isAny:K[ue].isAny,index:ee+ue,conversionsTo:[]})}var se=i.slice(ee);i=i.slice(0,ee).concat(fe).concat(se);for(var ce=ee+fe.length;ce<i.length;++ce)n.get(i[ce]).index=ce}function p(){n=new Map,i=[],a=0,l([r],!1)}p(),l(e);function f(){var K,Y=Nn(i),ee;try{for(Y.s();!(ee=Y.n()).done;)K=ee.value,n.get(K).conversionsTo=[]}catch(fe){Y.e(fe)}finally{Y.f()}a=0}function d(K){var Y=i.filter(function(ee){var fe=n.get(ee);return!fe.isAny&&fe.test(K)});return Y.length?Y:["any"]}function h(K){return K&&typeof K=="function"&&"_typedFunctionData"in K}function v(K,Y,ee){if(!h(K))throw new TypeError(p0);var fe=ee&&ee.exact,ue=Array.isArray(Y)?Y.join(","):Y,he=F(ue),se=_(he);if(!fe||se in K.signatures){var ce=K._typedFunctionData.signatureMap.get(se);if(ce)return ce}var Ce=he.length,Re;if(fe){Re=[];var nt;for(nt in K.signatures)Re.push(K._typedFunctionData.signatureMap.get(nt))}else Re=K._typedFunctionData.signatures;for(var Te=0;Te<Ce;++Te){var Wt=he[Te],Lt=[],nr=void 0,Jt=Nn(Re),yr;try{for(Jt.s();!(yr=Jt.n()).done;){nr=yr.value;var Qt=O(nr.params,Te);if(!(!Qt||Wt.restParam&&!Qt.restParam)){if(!Qt.hasAny){var Er=function(){var mr=y(Qt);if(Wt.types.some(function(On){return!mr.has(On.name)}))return"continue"}();if(Er==="continue")continue}Lt.push(nr)}}}catch(mr){Jt.e(mr)}finally{Jt.f()}if(Re=Lt,Re.length===0)break}var dr,pr=Nn(Re),vn;try{for(pr.s();!(vn=pr.n()).done;)if(dr=vn.value,dr.params.length<=Ce)return dr}catch(mr){pr.e(mr)}finally{pr.f()}throw new TypeError("Signature not found (signature: "+(K.name||"unnamed")+"("+_(he,", ")+"))")}function b(K,Y,ee){return v(K,Y,ee).implementation}function g(K,Y){var ee=o(Y);if(ee.test(K))return K;var fe=ee.conversionsTo;if(fe.length===0)throw new Error("There are no conversions to "+Y+" defined.");for(var ue=0;ue<fe.length;ue++){var he=o(fe[ue].from);if(he.test(K))return fe[ue].convert(K)}throw new Error("Cannot convert "+K+" to "+Y)}function _(K){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return K.map(function(ee){return ee.name}).join(Y)}function D(K){var Y=K.indexOf("...")===0,ee=Y?K.length>3?K.slice(3):"any":K,fe=ee.split("|").map(function(ce){return o(ce.trim())}),ue=!1,he=Y?"...":"",se=fe.map(function(ce){return ue=ce.isAny||ue,he+=ce.name+"|",{name:ce.name,typeIndex:ce.index,test:ce.test,isAny:ce.isAny,conversion:null,conversionIndex:-1}});return{types:se,name:he.slice(0,-1),hasAny:ue,hasConversion:!1,restParam:Y}}function S(K){var Y=K.types.map(function(se){return se.name}),ee=J(Y),fe=K.hasAny,ue=K.name,he=ee.map(function(se){var ce=o(se.from);return fe=ce.isAny||fe,ue+="|"+se.from,{name:se.from,typeIndex:ce.index,test:ce.test,isAny:ce.isAny,conversion:se,conversionIndex:se.index}});return{types:K.types.concat(he),name:ue,hasAny:fe,hasConversion:he.length>0,restParam:K.restParam}}function y(K){return K.typeSet||(K.typeSet=new Set,K.types.forEach(function(Y){return K.typeSet.add(Y.name)})),K.typeSet}function F(K){var Y=[];if(typeof K!="string")throw new TypeError("Signatures must be strings");var ee=K.trim();if(ee==="")return Y;for(var fe=ee.split(","),ue=0;ue<fe.length;++ue){var he=D(fe[ue].trim());if(he.restParam&&ue!==fe.length-1)throw new SyntaxError('Unexpected rest parameter "'+fe[ue]+'": only allowed for the last parameter');if(he.types.length===0)return null;Y.push(he)}return Y}function A(K){var Y=Ze(K);return Y?Y.restParam:!1}function C(K){if(!K||K.types.length===0)return d0;if(K.types.length===1)return o(K.types[0].name).test;if(K.types.length===2){var Y=o(K.types[0].name).test,ee=o(K.types[1].name).test;return function(he){return Y(he)||ee(he)}}else{var fe=K.types.map(function(ue){return o(ue.name).test});return function(he){for(var se=0;se<fe.length;se++)if(fe[se](he))return!0;return!1}}}function M(K){var Y,ee,fe;if(A(K)){Y=vt(K).map(C);var ue=Y.length,he=C(Ze(K)),se=function(Ce){for(var Re=ue;Re<Ce.length;Re++)if(!he(Ce[Re]))return!1;return!0};return function(Ce){for(var Re=0;Re<Y.length;Re++)if(!Y[Re](Ce[Re]))return!1;return se(Ce)&&Ce.length>=ue+1}}else return K.length===0?function(Ce){return Ce.length===0}:K.length===1?(ee=C(K[0]),function(Ce){return ee(Ce[0])&&Ce.length===1}):K.length===2?(ee=C(K[0]),fe=C(K[1]),function(Ce){return ee(Ce[0])&&fe(Ce[1])&&Ce.length===2}):(Y=K.map(C),function(Ce){for(var Re=0;Re<Y.length;Re++)if(!Y[Re](Ce[Re]))return!1;return Ce.length===Y.length})}function O(K,Y){return Y<K.length?K[Y]:A(K)?Ze(K):null}function N(K,Y){var ee=O(K,Y);return ee?y(ee):new Set}function q(K){return K.conversion===null||K.conversion===void 0}function Z(K,Y){var ee=new Set;return K.forEach(function(fe){var ue=N(fe.params,Y),he,se=Nn(ue),ce;try{for(se.s();!(ce=se.n()).done;)he=ce.value,ee.add(he)}catch(Ce){se.e(Ce)}finally{se.f()}}),ee.has("any")?["any"]:Array.from(ee)}function Q(K,Y,ee){var fe,ue,he=K||"unnamed",se=ee,ce,Ce=function(){var Jt=[];if(se.forEach(function(Qt){var Er=O(Qt.params,ce),dr=C(Er);(ce<Qt.params.length||A(Qt.params))&&dr(Y[ce])&&Jt.push(Qt)}),Jt.length===0){if(ue=Z(se,ce),ue.length>0){var yr=d(Y[ce]);return fe=new TypeError("Unexpected type of argument in function "+he+" (expected: "+ue.join(" or ")+", actual: "+yr.join(" | ")+", index: "+ce+")"),fe.data={category:"wrongType",fn:he,index:ce,actual:yr,expected:ue},{v:fe}}}else se=Jt};for(ce=0;ce<Y.length;ce++){var Re=Ce();if(Da(Re)==="object")return Re.v}var nt=se.map(function(nr){return A(nr.params)?1/0:nr.params.length});if(Y.length<Math.min.apply(null,nt))return ue=Z(se,ce),fe=new TypeError("Too few arguments in function "+he+" (expected: "+ue.join(" or ")+", index: "+Y.length+")"),fe.data={category:"tooFewArgs",fn:he,index:Y.length,expected:ue},fe;var Te=Math.max.apply(null,nt);if(Y.length>Te)return fe=new TypeError("Too many arguments in function "+he+" (expected: "+Te+", actual: "+Y.length+")"),fe.data={category:"tooManyArgs",fn:he,index:Y.length,expectedLength:Te},fe;for(var Wt=[],Lt=0;Lt<Y.length;++Lt)Wt.push(d(Y[Lt]).join("|"));return fe=new TypeError('Arguments of type "'+Wt.join(", ")+'" do not match any of the defined signatures of function '+he+"."),fe.data={category:"mismatch",actual:Wt},fe}function V(K){for(var Y=i.length+1,ee=0;ee<K.types.length;ee++)q(K.types[ee])&&(Y=Math.min(Y,K.types[ee].typeIndex));return Y}function L(K){for(var Y=a+1,ee=0;ee<K.types.length;ee++)q(K.types[ee])||(Y=Math.min(Y,K.types[ee].conversionIndex));return Y}function z(K,Y){if(K.hasAny){if(!Y.hasAny)return 1}else if(Y.hasAny)return-1;if(K.restParam){if(!Y.restParam)return 1}else if(Y.restParam)return-1;if(K.hasConversion){if(!Y.hasConversion)return 1}else if(Y.hasConversion)return-1;var ee=V(K)-V(Y);if(ee<0)return-1;if(ee>0)return 1;var fe=L(K)-L(Y);return fe<0?-1:fe>0?1:0}function U(K,Y){var ee=K.params,fe=Y.params,ue=Ze(ee),he=Ze(fe),se=A(ee),ce=A(fe);if(se&&ue.hasAny){if(!ce||!he.hasAny)return 1}else if(ce&&he.hasAny)return-1;var Ce=0,Re=0,nt,Te=Nn(ee),Wt;try{for(Te.s();!(Wt=Te.n()).done;)nt=Wt.value,nt.hasAny&&++Ce,nt.hasConversion&&++Re}catch(Un){Te.e(Un)}finally{Te.f()}var Lt=0,nr=0,Jt=Nn(fe),yr;try{for(Jt.s();!(yr=Jt.n()).done;)nt=yr.value,nt.hasAny&&++Lt,nt.hasConversion&&++nr}catch(Un){Jt.e(Un)}finally{Jt.f()}if(Ce!==Lt)return Ce-Lt;if(se&&ue.hasConversion){if(!ce||!he.hasConversion)return 1}else if(ce&&he.hasConversion)return-1;if(Re!==nr)return Re-nr;if(se){if(!ce)return 1}else if(ce)return-1;var Qt=(ee.length-fe.length)*(se?-1:1);if(Qt!==0)return Qt;for(var Er=[],dr=0,pr=0;pr<ee.length;++pr){var vn=z(ee[pr],fe[pr]);Er.push(vn),dr+=vn}if(dr!==0)return dr;for(var mr,On=0,Jn=Er;On<Jn.length;On++)if(mr=Jn[On],mr!==0)return mr;return 0}function J(K){if(K.length===0)return[];var Y=K.map(o);K.length>1&&Y.sort(function(Ce,Re){return Ce.index-Re.index});var ee=Y[0].conversionsTo;if(K.length===1)return ee;ee=ee.concat([]);for(var fe=new Set(K),ue=1;ue<Y.length;++ue){var he=void 0,se=Nn(Y[ue].conversionsTo),ce;try{for(se.s();!(ce=se.n()).done;)he=ce.value,fe.has(he.from)||(ee.push(he),fe.add(he.from))}catch(Ce){se.e(Ce)}finally{se.f()}}return ee}function ie(K,Y){var ee=Y;if(K.some(function(ce){return ce.hasConversion})){var fe=A(K),ue=K.map(ae);ee=function(){for(var Ce=[],Re=fe?arguments.length-1:arguments.length,nt=0;nt<Re;nt++)Ce[nt]=ue[nt](arguments[nt]);return fe&&(Ce[Re]=arguments[Re].map(ue[Re])),Y.apply(this,Ce)}}var he=ee;if(A(K)){var se=K.length-1;he=function(){return ee.apply(this,Ye(arguments,0,se).concat([Ye(arguments,se)]))}}return he}function ae(K){var Y,ee,fe,ue,he=[],se=[];switch(K.types.forEach(function(ce){ce.conversion&&(he.push(o(ce.conversion.from).test),se.push(ce.conversion.convert))}),se.length){case 0:return function(Ce){return Ce};case 1:return Y=he[0],fe=se[0],function(Ce){return Y(Ce)?fe(Ce):Ce};case 2:return Y=he[0],ee=he[1],fe=se[0],ue=se[1],function(Ce){return Y(Ce)?fe(Ce):ee(Ce)?ue(Ce):Ce};default:return function(Ce){for(var Re=0;Re<se.length;Re++)if(he[Re](Ce))return se[Re](Ce);return Ce}}}function pe(K){function Y(ee,fe,ue){if(fe<ee.length){var he=ee[fe],se=[];if(he.restParam){var ce=he.types.filter(q);ce.length<he.types.length&&se.push({types:ce,name:"..."+ce.map(function(Ce){return Ce.name}).join("|"),hasAny:ce.some(function(Ce){return Ce.isAny}),hasConversion:!1,restParam:!0}),se.push(he)}else se=he.types.map(function(Ce){return{types:[Ce],name:Ce.name,hasAny:Ce.isAny,hasConversion:Ce.conversion,restParam:!1}});return Je(se,function(Ce){return Y(ee,fe+1,ue.concat([Ce]))})}else return[ue]}return Y(K,0,[])}function De(K,Y){for(var ee=Math.max(K.length,Y.length),fe=0;fe<ee;fe++){var ue=N(K,fe),he=N(Y,fe),se=!1,ce=void 0,Ce=Nn(he),Re;try{for(Ce.s();!(Re=Ce.n()).done;)if(ce=Re.value,ue.has(ce)){se=!0;break}}catch(nr){Ce.e(nr)}finally{Ce.f()}if(!se)return!1}var nt=K.length,Te=Y.length,Wt=A(K),Lt=A(Y);return Wt?Lt?nt===Te:Te>=nt:Lt?nt>=Te:nt===Te}function Ae(K){return K.map(function(Y){return Xe(Y)?gt(Y.referToSelf.callback):Qe(Y)?ft(Y.referTo.references,Y.referTo.callback):Y})}function Be(K,Y,ee){var fe=[],ue,he=Nn(K),se;try{for(he.s();!(se=he.n()).done;){ue=se.value;var ce=ee[ue];if(typeof ce!="number")throw new TypeError('No definition for referenced signature "'+ue+'"');if(ce=Y[ce],typeof ce!="function")return!1;fe.push(ce)}}catch(Ce){he.e(Ce)}finally{he.f()}return fe}function je(K,Y,ee){for(var fe=Ae(K),ue=new Array(fe.length).fill(!1),he=!0;he;){he=!1;for(var se=!0,ce=0;ce<fe.length;++ce)if(!ue[ce]){var Ce=fe[ce];if(Xe(Ce))fe[ce]=Ce.referToSelf.callback(ee),fe[ce].referToSelf=Ce.referToSelf,ue[ce]=!0,se=!1;else if(Qe(Ce)){var Re=Be(Ce.referTo.references,fe,Y);Re?(fe[ce]=Ce.referTo.callback.apply(this,Re),fe[ce].referTo=Ce.referTo,ue[ce]=!0,se=!1):he=!0}}if(se&&he)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return fe}function Le(K){var Y=/\bthis(\(|\.signatures\b)/;Object.keys(K).forEach(function(ee){var fe=K[ee];if(Y.test(fe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Ve(K,Y){if(s.createCount++,Object.keys(Y).length===0)throw new SyntaxError("No signatures provided");s.warnAgainstDeprecatedThis&&Le(Y);var ee=[],fe=[],ue={},he=[],se,ce=function(){if(!Object.prototype.hasOwnProperty.call(Y,se))return"continue";var sr=F(se);if(!sr)return"continue";ee.forEach(function(mn){if(De(mn,sr))throw new TypeError('Conflicting signatures "'+_(mn)+'" and "'+_(sr)+'".')}),ee.push(sr);var Kr=fe.length;fe.push(Y[se]);var xi=sr.map(S),Xn=void 0,zn=Nn(pe(xi)),Ri;try{for(zn.s();!(Ri=zn.n()).done;){Xn=Ri.value;var Mn=_(Xn);he.push({params:Xn,name:Mn,fn:Kr}),Xn.every(function(mn){return!mn.hasConversion})&&(ue[Mn]=Kr)}}catch(mn){zn.e(mn)}finally{zn.f()}};for(se in Y)var Ce=ce();he.sort(U);var Re=je(fe,ue,jn),nt;for(nt in ue)Object.prototype.hasOwnProperty.call(ue,nt)&&(ue[nt]=Re[ue[nt]]);for(var Te=[],Wt=new Map,Lt=0,nr=he;Lt<nr.length;Lt++)nt=nr[Lt],Wt.has(nt.name)||(nt.fn=Re[nt.fn],Te.push(nt),Wt.set(nt.name,nt));for(var Jt=Te[0]&&Te[0].params.length<=2&&!A(Te[0].params),yr=Te[1]&&Te[1].params.length<=2&&!A(Te[1].params),Qt=Te[2]&&Te[2].params.length<=2&&!A(Te[2].params),Er=Te[3]&&Te[3].params.length<=2&&!A(Te[3].params),dr=Te[4]&&Te[4].params.length<=2&&!A(Te[4].params),pr=Te[5]&&Te[5].params.length<=2&&!A(Te[5].params),vn=Jt&&yr&&Qt&&Er&&dr&&pr,mr=0;mr<Te.length;++mr)Te[mr].test=M(Te[mr].params);for(var On=Jt?C(Te[0].params[0]):Fn,Jn=yr?C(Te[1].params[0]):Fn,Un=Qt?C(Te[2].params[0]):Fn,Vn=Er?C(Te[3].params[0]):Fn,Xi=dr?C(Te[4].params[0]):Fn,Ii=pr?C(Te[5].params[0]):Fn,Ba=Jt?C(Te[0].params[1]):Fn,Or=yr?C(Te[1].params[1]):Fn,ir=Qt?C(Te[2].params[1]):Fn,Oa=Er?C(Te[3].params[1]):Fn,hi=dr?C(Te[4].params[1]):Fn,gn=pr?C(Te[5].params[1]):Fn,Qn=0;Qn<Te.length;++Qn)Te[Qn].implementation=ie(Te[Qn].params,Te[Qn].fn);var Ni=Jt?Te[0].implementation:ga,Ma=yr?Te[1].implementation:ga,Pa=Qt?Te[2].implementation:ga,ea=Er?Te[3].implementation:ga,ka=dr?Te[4].implementation:ga,Ta=pr?Te[5].implementation:ga,Ia=Jt?Te[0].params.length:-1,Na=yr?Te[1].params.length:-1,xa=Qt?Te[2].params.length:-1,Ra=Er?Te[3].params.length:-1,di=dr?Te[4].params.length:-1,La=pr?Te[5].params.length:-1,pi=vn?6:0,Ua=Te.length,Va=Te.map(function(Ar){return Ar.test}),ja=Te.map(function(Ar){return Ar.implementation}),ta=function(){for(var sr=pi;sr<Ua;sr++)if(Va[sr](arguments))return ja[sr].apply(this,arguments);return s.onMismatch(K,arguments,Te)};function jn(Ar,sr){return arguments.length===Ia&&On(Ar)&&Ba(sr)?Ni.apply(this,arguments):arguments.length===Na&&Jn(Ar)&&Or(sr)?Ma.apply(this,arguments):arguments.length===xa&&Un(Ar)&&ir(sr)?Pa.apply(this,arguments):arguments.length===Ra&&Vn(Ar)&&Oa(sr)?ea.apply(this,arguments):arguments.length===di&&Xi(Ar)&&hi(sr)?ka.apply(this,arguments):arguments.length===La&&Ii(Ar)&&gn(sr)?Ta.apply(this,arguments):ta.apply(this,arguments)}try{Object.defineProperty(jn,"name",{value:K})}catch{}return jn.signatures=ue,jn._typedFunctionData={signatures:Te,signatureMap:Wt},jn}function lt(K,Y,ee){throw Q(K,Y,ee)}function vt(K){return Ye(K,0,K.length-1)}function Ze(K){return K[K.length-1]}function Ye(K,Y,ee){return Array.prototype.slice.call(K,Y,ee)}function Ct(K,Y){for(var ee=0;ee<K.length;ee++)if(Y(K[ee]))return K[ee]}function Je(K,Y){return Array.prototype.concat.apply([],K.map(Y))}function ht(){var K=vt(arguments).map(function(ee){return _(F(ee))}),Y=Ze(arguments);if(typeof Y!="function")throw new TypeError("Callback function expected as last argument");return ft(K,Y)}function ft(K,Y){return{referTo:{references:K,callback:Y}}}function gt(K){if(typeof K!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:K}}}function Qe(K){return K&&Da(K.referTo)==="object"&&Array.isArray(K.referTo.references)&&typeof K.referTo.callback=="function"}function Xe(K){return K&&Da(K.referToSelf)==="object"&&typeof K.referToSelf.callback=="function"}function ke(K,Y){if(!K)return Y;if(Y&&Y!==K){var ee=new Error("Function names do not match (expected: "+K+", actual: "+Y+")");throw ee.data={actual:Y,expected:K},ee}return K}function Ne(K){var Y;for(var ee in K)Object.prototype.hasOwnProperty.call(K,ee)&&(h(K[ee])||typeof K[ee].signature=="string")&&(Y=ke(Y,K[ee].name));return Y}function Mt(K,Y){var ee;for(ee in Y)if(Object.prototype.hasOwnProperty.call(Y,ee)){if(ee in K&&Y[ee]!==K[ee]){var fe=new Error('Signature "'+ee+'" is defined twice');throw fe.data={signature:ee,sourceFunction:Y[ee],destFunction:K[ee]},fe}K[ee]=Y[ee]}}var jt=s;s=function(Y){for(var ee=typeof Y=="string",fe=ee?1:0,ue=ee?Y:"",he={},se=fe;se<arguments.length;++se){var ce=arguments[se],Ce={},Re=void 0;if(typeof ce=="function"?(Re=ce.name,typeof ce.signature=="string"?Ce[ce.signature]=ce:h(ce)&&(Ce=ce.signatures)):t(ce)&&(Ce=ce,ee||(Re=Ne(ce))),Object.keys(Ce).length===0){var nt=new TypeError("Argument to 'typed' at index "+se+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw nt.data={index:se,argument:ce},nt}ee||(ue=ke(ue,Re)),Mt(he,Ce)}return Ve(ue||"",he)},s.create=Pp,s.createCount=jt.createCount,s.onMismatch=lt,s.throwMismatchError=lt,s.createError=Q,s.clear=p,s.clearConversions=f,s.addTypes=l,s._findType=o,s.referTo=ht,s.referToSelf=gt,s.convert=g,s.findSignature=v,s.find=b,s.isTypedFunction=h,s.warnAgainstDeprecatedThis=!0,s.addType=function(K,Y){var ee="any";Y!==!1&&n.has("Object")&&(ee="Object"),s.addTypes([K],ee)};function Gt(K){if(!K||typeof K.from!="string"||typeof K.to!="string"||typeof K.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(K.to===K.from)throw new SyntaxError('Illegal to define conversion from "'+K.from+'" to itself.')}return s.addConversion=function(K){Gt(K);var Y=o(K.to);if(Y.conversionsTo.every(function(ee){return ee.from!==K.from}))Y.conversionsTo.push({from:K.from,convert:K.convert,index:a++});else throw new Error('There is already a conversion from "'+K.from+'" to "'+Y.name+'"')},s.addConversions=function(K){K.forEach(s.addConversion)},s.removeConversion=function(K){Gt(K);var Y=o(K.to),ee=Ct(Y.conversionsTo,function(ue){return ue.from===K.from});if(!ee)throw new Error("Attempt to remove nonexistent conversion from "+K.from+" to "+K.to);if(ee.convert!==K.convert)throw new Error("Conversion to remove does not match existing conversion");var fe=Y.conversionsTo.indexOf(ee);Y.conversionsTo.splice(fe,1)},s.resolve=function(K,Y){if(!h(K))throw new TypeError(p0);for(var ee=K._typedFunctionData.signatures,fe=0;fe<ee.length;++fe)if(ee[fe].test(Y))return ee[fe];return null},s}const v0=Pp();function Sr(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function Cl(t,e,r){var n={2:"0b",8:"0o",16:"0x"},i=n[e],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Sr(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Sr(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),a="i".concat(r)}var s="";return t<0&&(t=-t,s="-"),"".concat(s).concat(i).concat(t.toString(e)).concat(a)}function lf(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",n,i;if(e&&(e.notation&&(r=e.notation),rr(e)?n=e:rr(e.precision)&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Xy(t,n);case"exponential":return kp(t,n);case"engineering":return Qy(t,n);case"bin":return Cl(t,2,i);case"oct":return Cl(t,8,i);case"hex":return Cl(t,16,i);case"auto":return e2(t,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],s=arguments[4];return a!=="."?a+s:s});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Zs(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),a=n.indexOf(".");i+=a!==-1?a-1:n.length-1;var s=n.replace(".","").replace(/^0*/,function(o){return i-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return s.length===0&&(s.push(0),i++),{sign:r,coefficients:s,exponent:i}}function Qy(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Zs(t),n=Js(r,e),i=n.exponent,a=n.coefficients,s=i%3===0?i:i<0?i-3-i%3:i-i%3;if(rr(e))for(;e>a.length||i-s+1>a.length;)a.push(0);else for(var o=Math.abs(i-s)-(a.length-1),l=0;l<o;l++)a.push(0);for(var p=Math.abs(i-s),f=1;p>0;)f++,p--;var d=a.slice(f).join(""),h=rr(e)&&d.length||d.match(/[1-9]/)?"."+d:"",v=a.slice(0,f).join("")+h+"e"+(i>=0?"+":"")+s.toString();return n.sign+v}function Xy(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Zs(t),n=typeof e=="number"?Js(r,r.exponent+1+e):r,i=n.coefficients,a=n.exponent+1,s=a+(e||0);return i.length<s&&(i=i.concat(ya(s-i.length))),a<0&&(i=ya(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),n.sign+i.join("")}function kp(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Zs(t),n=e?Js(r,e):r,i=n.coefficients,a=n.exponent;i.length<e&&(i=i.concat(ya(e-i.length)));var s=i.shift();return n.sign+s+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function e2(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=r&&r.lowerExp!==void 0?r.lowerExp:-3,i=r&&r.upperExp!==void 0?r.upperExp:5,a=Zs(t),s=e?Js(a,e):a;if(s.exponent<n||s.exponent>=i)return kp(t,e);var o=s.coefficients,l=s.exponent;o.length<e&&(o=o.concat(ya(e-o.length))),o=o.concat(ya(l-o.length+1+(o.length<e?e-o.length:0))),o=ya(-l).concat(o);var p=l>0?l:0;return p<o.length-1&&o.splice(p+1,0,"."),s.sign+o.join("")}function Js(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var a=e-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),r.exponent++,a++),a--,n[a]++}}return r}function ya(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function t2(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var r2=Number.EPSILON||2220446049250313e-31;function Es(t,e,r){if(r==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var n=Math.abs(t-e);return n<r2?!0:n<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}function Fl(t,e,r){var n=t.constructor,i=new n(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Sr(r))throw new Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),a="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function n2(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",n,i;if(e!==void 0&&(e.notation&&(r=e.notation),typeof e=="number"?n=e:e.precision&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return a2(t,n);case"exponential":return g0(t,n);case"engineering":return i2(t,n);case"bin":return Fl(t,2,i);case"oct":return Fl(t,8,i);case"hex":return Fl(t,16,i);case"auto":{var a=e&&e.lowerExp!==void 0?e.lowerExp:-3,s=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var o,l=t.toSignificantDigits(n),p=l.e;return p>=a&&p<s?o=l.toFixed():o=g0(t,n),o.replace(/((\.\d*?)(0+))($|e)/,function(){var f=arguments[2],d=arguments[4];return f!=="."?f+d:d})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function i2(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),a=i.toPrecision(e);return a.indexOf("e")!==-1&&(a=i.toString()),a+"e"+(r>=0?"+":"")+n.toString()}function g0(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function a2(t,e){return t.toFixed(e)}function rn(t,e){var r=u2(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function u2(t,e){if(typeof t=="number")return lf(t,e);if(Sn(t))return n2(t,e);if(s2(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return Tp(t,e);if(Gn(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>'"'+n+'": '+rn(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function Tp(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=Tp(t[i],e);return r+="]",r}else return rn(t,e)}function s2(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function Rt(t,e,r){if(!(this instanceof Rt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Rt.prototype=new RangeError;Rt.prototype.constructor=RangeError;Rt.prototype.name="DimensionError";Rt.prototype.isDimensionError=!0;function Qi(t,e,r){if(!(this instanceof Qi))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Qi.prototype=new RangeError;Qi.prototype.constructor=RangeError;Qi.prototype.name="IndexError";Qi.prototype.isIndexError=!0;function Mi(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function Ip(t,e,r){var n,i=t.length;if(i!==e[r])throw new Rt(i,e[r]);if(r<e.length-1){var a=r+1;for(n=0;n<i;n++){var s=t[n];if(!Array.isArray(s))throw new Rt(e.length-1,e.length,"<");Ip(t[n],e,a)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new Rt(e.length+1,e.length,">")}function m0(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new Rt(t.length,0)}else Ip(t,e,0)}function tr(t,e){if(!rr(t)||!Sr(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Qi(t,e)}function _0(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!rr(i)||!Sr(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+rn(e)+")")});var n=r!==void 0?r:0;return ff(t,e,0,n),t}function ff(t,e,r,n){var i,a,s=t.length,o=e[r],l=Math.min(s,o);if(t.length=o,r<e.length-1){var p=r+1;for(i=0;i<l;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),ff(a,e,p,n);for(i=l;i<o;i++)a=[],t[i]=a,ff(a,e,p,n)}else{for(i=0;i<l;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=l;i<o;i++)t[i]=n}}function o2(t,e){var r=f2(t),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Rt(0,n,"!=");e=Nf(e,n);var i=Np(e);if(n!==i)throw new Rt(i,n,"!=");try{return l2(r,e)}catch(a){throw a instanceof Rt?new Rt(i,n,"!="):a}}function Nf(t,e){var r=Np(t),n=t.slice(),i=-1,a=t.indexOf(i),s=t.indexOf(i,a+1)>=0;if(s)throw new Error("More than one wildcard in sizes");var o=a>=0,l=e%r===0;if(o)if(l)n[a]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function Np(t){return t.reduce((e,r)=>e*r,1)}function l2(t,e){for(var r=t,n,i=e.length-1;i>0;i--){var a=e[i];n=[];for(var s=r.length/a,o=0;o<s;o++)n.push(r.slice(o*a,(o+1)*a));r=n}return r}function xp(t,e,r,n){var i=n||Mi(t);if(r)for(var a=0;a<r;a++)t=[t],i.unshift(1);for(t=Rp(t,e,0);i.length<e;)i.push(1);return t}function Rp(t,e,r){var n,i;if(Array.isArray(t)){var a=r+1;for(n=0,i=t.length;n<i;n++)t[n]=Rp(t[n],e,a)}else for(var s=r;s<e;s++)t=[t];return t}function f2(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function r(n){Array.isArray(n)?n.forEach(r):e.push(n)}),e}function As(t,e){for(var r,n=0,i=0;i<t.length;i++){var a=t[i],s=Array.isArray(a);if(i===0&&s&&(n=a.length),s&&a.length!==n)return;var o=s?As(a,e):e(a);if(r===void 0)r=o;else if(r!==o)return"mixed"}return r}function kt(t,e,r,n){function i(a){var s=$y(a,e.map(d2));return c2(t,e,a),r(s)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function c2(t,e,r){var n=e.filter(a=>!h2(a)).every(a=>r[a]!==void 0);if(!n){var i=e.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function h2(t){return t&&t[0]==="?"}function d2(t){return t&&t[0]==="?"?t.slice(1):t}function p2(t,e){if(Up(t)&&Lp(t,e))return t[e];throw typeof t[e]=="function"&&m2(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function v2(t,e,r){if(Up(t)&&Lp(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function g2(t,e){return e in t}function Lp(t,e){return!t||typeof t!="object"?!1:ou(_2,e)?!0:!(e in Object.prototype||e in Function.prototype)}function m2(t,e){return t==null||typeof t[e]!="function"||ou(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:ou(b2,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Up(t){return typeof t=="object"&&t&&t.constructor===Object}var _2={length:!0,name:!0},b2={toString:!0,valueOf:!0,toLocaleString:!0};class D2{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return p2(this.wrappedObject,e)}set(e,r){return v2(this.wrappedObject,e,r),this}has(e){return g2(this.wrappedObject,e)}}function w2(t){return t?t instanceof Map||t instanceof D2||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var Vp=function(){return Vp=v0.create,v0},y2=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],E2=kt("typed",y2,function(e){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:a}=e,s=Vp();return s.clear(),s.addTypes([{name:"number",test:rr},{name:"Complex",test:Bp},{name:"BigNumber",test:Sn},{name:"Fraction",test:Op},{name:"Unit",test:Mp},{name:"identifier",test:o=>Gn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(o)},{name:"string",test:Gn},{name:"Chain",test:Hy},{name:"Array",test:er},{name:"Matrix",test:Jr},{name:"DenseMatrix",test:_y},{name:"SparseMatrix",test:by},{name:"Range",test:Dy},{name:"Index",test:Tf},{name:"boolean",test:wy},{name:"ResultSet",test:yy},{name:"Help",test:Ey},{name:"function",test:Ay},{name:"Date",test:Cy},{name:"RegExp",test:Fy},{name:"null",test:By},{name:"undefined",test:If},{name:"AccessorNode",test:Oy},{name:"ArrayNode",test:My},{name:"AssignmentNode",test:Py},{name:"BlockNode",test:ky},{name:"ConditionalNode",test:Ty},{name:"ConstantNode",test:Iy},{name:"FunctionNode",test:xy},{name:"FunctionAssignmentNode",test:Ny},{name:"IndexNode",test:Ry},{name:"Node",test:Ly},{name:"ObjectNode",test:Uy},{name:"OperatorNode",test:Vy},{name:"ParenthesisNode",test:jy},{name:"RangeNode",test:zy},{name:"RelationalNode",test:qy},{name:"SymbolNode",test:Wy},{name:"Map",test:w2},{name:"Object",test:Sy}]),s.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(r||Sl(l),t2(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new r(l)}},{from:"number",to:"Complex",convert:function(l){return n||ss(l),new n(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return n||ss(l),new n(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return n||ss(l),new n(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){a||Bl(l);var p=new a(l);if(p.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return p}},{from:"string",to:"number",convert:function(l){var p=Number(l);if(isNaN(p))throw new Error('Cannot convert "'+l+'" to a number');return p}},{from:"string",to:"BigNumber",convert:function(l){r||Sl(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){a||Bl(l);try{return new a(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){n||ss(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return r||Sl(l),new r(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return a||Bl(l),new a(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||A2(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),s.onMismatch=(o,l,p)=>{var f=s.createError(o,l,p);if(["wrongType","mismatch"].includes(f.data.category)&&l.length===1&&ws(l[0])&&p.some(h=>!h.params.includes(","))){var d=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw d.data=f.data,d}throw f},s.onMismatch=(o,l,p)=>{var f=s.createError(o,l,p);if(["wrongType","mismatch"].includes(f.data.category)&&l.length===1&&ws(l[0])&&p.some(h=>!h.params.includes(","))){var d=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw d.data=f.data,d}throw f},s});function Sl(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function ss(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function A2(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Bl(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var wa=9e15,ki=1e9,cf="0123456789abcdef",Cs="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Fs="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",hf={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-wa,maxE:wa,crypto:!1},jp,fi,mt=!0,Qs="[DecimalError] ",Pi=Qs+"Invalid argument: ",zp=Qs+"Precision limit exceeded",qp=Qs+"crypto unavailable",Wp="[object Decimal]",Gr=Math.floor,Dr=Math.pow,C2=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,F2=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,S2=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Hp=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ln=1e7,tt=7,B2=9007199254740991,O2=Cs.length-1,df=Fs.length-1,ye={toStringTag:Wp};ye.absoluteValue=ye.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),$e(t)};ye.ceil=function(){return $e(new this.constructor(this),this.e+1,2)};ye.clampedTo=ye.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Pi+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};ye.comparedTo=ye.cmp=function(t){var e,r,n,i,a=this,s=a.d,o=(t=new a.constructor(t)).d,l=a.s,p=t.s;if(!s||!o)return!l||!p?NaN:l!==p?l:s===o?0:!s^l<0?1:-1;if(!s[0]||!o[0])return s[0]?l:o[0]?-p:0;if(l!==p)return l;if(a.e!==t.e)return a.e>t.e^l<0?1:-1;for(n=s.length,i=o.length,e=0,r=n<i?n:i;e<r;++e)if(s[e]!==o[e])return s[e]>o[e]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1};ye.cosine=ye.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+tt,n.rounding=1,r=M2(n,Zp(n,r)),n.precision=t,n.rounding=e,$e(fi==2||fi==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};ye.cubeRoot=ye.cbrt=function(){var t,e,r,n,i,a,s,o,l,p,f=this,d=f.constructor;if(!f.isFinite()||f.isZero())return new d(f);for(mt=!1,a=f.s*Dr(f.s*f,1/3),!a||Math.abs(a)==1/0?(r=Ur(f.d),t=f.e,(a=(t-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=Dr(r,1/3),t=Gr((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?r="5e"+t:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new d(r),n.s=f.s):n=new d(a.toString()),s=(t=d.precision)+3;;)if(o=n,l=o.times(o).times(o),p=l.plus(f),n=qt(p.plus(f).times(o),p.plus(l),s+2,1),Ur(o.d).slice(0,s)===(r=Ur(n.d)).slice(0,s))if(r=r.slice(s-3,s+1),r=="9999"||!i&&r=="4999"){if(!i&&($e(o,t+1,0),o.times(o).times(o).eq(f))){n=o;break}s+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&($e(n,t+1,1),e=!n.times(n).times(n).eq(f));break}return mt=!0,$e(n,t,d.rounding,e)};ye.decimalPlaces=ye.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-Gr(this.e/tt))*tt,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};ye.dividedBy=ye.div=function(t){return qt(this,new this.constructor(t))};ye.dividedToIntegerBy=ye.divToInt=function(t){var e=this,r=e.constructor;return $e(qt(e,new r(t),0,1,1),r.precision,r.rounding)};ye.equals=ye.eq=function(t){return this.cmp(t)===0};ye.floor=function(){return $e(new this.constructor(this),this.e+1,3)};ye.greaterThan=ye.gt=function(t){return this.cmp(t)>0};ye.greaterThanOrEqualTo=ye.gte=function(t){var e=this.cmp(t);return e==1||e===0};ye.hyperbolicCosine=ye.cosh=function(){var t,e,r,n,i,a=this,s=a.constructor,o=new s(1);if(!a.isFinite())return new s(a.s?1/0:NaN);if(a.isZero())return o;r=s.precision,n=s.rounding,s.precision=r+Math.max(a.e,a.sd())+4,s.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/eo(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=Aa(s,1,a.times(e),new s(1),!0);for(var l,p=t,f=new s(8);p--;)l=a.times(a),a=o.minus(l.times(f.minus(l.times(f))));return $e(a,s.precision=r,s.rounding=n,!0)};ye.hyperbolicSine=ye.sinh=function(){var t,e,r,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,r=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=Aa(a,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/eo(5,t)),i=Aa(a,2,i,i,!0);for(var s,o=new a(5),l=new a(16),p=new a(20);t--;)s=i.times(i),i=i.times(o.plus(s.times(l.times(s).plus(p))))}return a.precision=e,a.rounding=r,$e(i,e,r,!0)};ye.hyperbolicTangent=ye.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,qt(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};ye.inverseCosine=ye.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),i=r.precision,a=r.rounding;return n!==-1?n===0?e.isNeg()?xn(r,i,a):new r(0):new r(NaN):e.isZero()?xn(r,i+4,a).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),t=xn(r,i+4,a).times(.5),r.precision=i,r.rounding=a,t.minus(e))};ye.inverseHyperbolicCosine=ye.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,mt=!1,r=r.times(r).minus(1).sqrt().plus(r),mt=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};ye.inverseHyperbolicSine=ye.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,mt=!1,r=r.times(r).plus(1).sqrt().plus(r),mt=!0,n.precision=t,n.rounding=e,r.ln())};ye.inverseHyperbolicTangent=ye.atanh=function(){var t,e,r,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?$e(new a(i),t,e,!0):(a.precision=r=n-i.e,i=qt(i.plus(1),new a(1).minus(i),r+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};ye.inverseSine=ye.asin=function(){var t,e,r,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),r=a.precision,n=a.rounding,e!==-1?e===0?(t=xn(a,r+4,n).times(.5),t.s=i.s,t):new a(NaN):(a.precision=r+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,i.times(2)))};ye.inverseTangent=ye.atan=function(){var t,e,r,n,i,a,s,o,l,p=this,f=p.constructor,d=f.precision,h=f.rounding;if(p.isFinite()){if(p.isZero())return new f(p);if(p.abs().eq(1)&&d+4<=df)return s=xn(f,d+4,h).times(.25),s.s=p.s,s}else{if(!p.s)return new f(NaN);if(d+4<=df)return s=xn(f,d+4,h).times(.5),s.s=p.s,s}for(f.precision=o=d+10,f.rounding=1,r=Math.min(28,o/tt+2|0),t=r;t;--t)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(mt=!1,e=Math.ceil(o/tt),n=1,l=p.times(p),s=new f(p),i=p;t!==-1;)if(i=i.times(l),a=s.minus(i.div(n+=2)),i=i.times(l),s=a.plus(i.div(n+=2)),s.d[e]!==void 0)for(t=e;s.d[t]===a.d[t]&&t--;);return r&&(s=s.times(2<<r-1)),mt=!0,$e(s,f.precision=d,f.rounding=h,!0)};ye.isFinite=function(){return!!this.d};ye.isInteger=ye.isInt=function(){return!!this.d&&Gr(this.e/tt)>this.d.length-2};ye.isNaN=function(){return!this.s};ye.isNegative=ye.isNeg=function(){return this.s<0};ye.isPositive=ye.isPos=function(){return this.s>0};ye.isZero=function(){return!!this.d&&this.d[0]===0};ye.lessThan=ye.lt=function(t){return this.cmp(t)<0};ye.lessThanOrEqualTo=ye.lte=function(t){return this.cmp(t)<1};ye.logarithm=ye.log=function(t){var e,r,n,i,a,s,o,l,p=this,f=p.constructor,d=f.precision,h=f.rounding,v=5;if(t==null)t=new f(10),e=!0;else{if(t=new f(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new f(NaN);e=t.eq(10)}if(r=p.d,p.s<0||!r||!r[0]||p.eq(1))return new f(r&&!r[0]?-1/0:p.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)a=!0;else{for(i=r[0];i%10===0;)i/=10;a=i!==1}if(mt=!1,o=d+v,s=Si(p,o),n=e?Ss(f,o+10):Si(t,o),l=qt(s,n,o,1),lu(l.d,i=d,h))do if(o+=10,s=Si(p,o),n=e?Ss(f,o+10):Si(t,o),l=qt(s,n,o,1),!a){+Ur(l.d).slice(i+1,i+15)+1==1e14&&(l=$e(l,d+1,0));break}while(lu(l.d,i+=10,h));return mt=!0,$e(l,d,h)};ye.minus=ye.sub=function(t){var e,r,n,i,a,s,o,l,p,f,d,h,v=this,b=v.constructor;if(t=new b(t),!v.d||!t.d)return!v.s||!t.s?t=new b(NaN):v.d?t.s=-t.s:t=new b(t.d||v.s!==t.s?v:NaN),t;if(v.s!=t.s)return t.s=-t.s,v.plus(t);if(p=v.d,h=t.d,o=b.precision,l=b.rounding,!p[0]||!h[0]){if(h[0])t.s=-t.s;else if(p[0])t=new b(v);else return new b(l===3?-0:0);return mt?$e(t,o,l):t}if(r=Gr(t.e/tt),f=Gr(v.e/tt),p=p.slice(),a=f-r,a){for(d=a<0,d?(e=p,a=-a,s=h.length):(e=h,r=f,s=p.length),n=Math.max(Math.ceil(o/tt),s)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=p.length,s=h.length,d=n<s,d&&(s=n),n=0;n<s;n++)if(p[n]!=h[n]){d=p[n]<h[n];break}a=0}for(d&&(e=p,p=h,h=e,t.s=-t.s),s=p.length,n=h.length-s;n>0;--n)p[s++]=0;for(n=h.length;n>a;){if(p[--n]<h[n]){for(i=n;i&&p[--i]===0;)p[i]=Ln-1;--p[i],p[n]+=Ln}p[n]-=h[n]}for(;p[--s]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=Xs(p,r),mt?$e(t,o,l):t):new b(l===3?-0:0)};ye.modulo=ye.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?$e(new n(r),n.precision,n.rounding):(mt=!1,n.modulo==9?(e=qt(r,t.abs(),0,3,1),e.s*=t.s):e=qt(r,t,0,n.modulo,1),e=e.times(t),mt=!0,r.minus(e))};ye.naturalExponential=ye.exp=function(){return pf(this)};ye.naturalLogarithm=ye.ln=function(){return Si(this)};ye.negated=ye.neg=function(){var t=new this.constructor(this);return t.s=-t.s,$e(t)};ye.plus=ye.add=function(t){var e,r,n,i,a,s,o,l,p,f,d=this,h=d.constructor;if(t=new h(t),!d.d||!t.d)return!d.s||!t.s?t=new h(NaN):d.d||(t=new h(t.d||d.s===t.s?d:NaN)),t;if(d.s!=t.s)return t.s=-t.s,d.minus(t);if(p=d.d,f=t.d,o=h.precision,l=h.rounding,!p[0]||!f[0])return f[0]||(t=new h(d)),mt?$e(t,o,l):t;if(a=Gr(d.e/tt),n=Gr(t.e/tt),p=p.slice(),i=a-n,i){for(i<0?(r=p,i=-i,s=f.length):(r=f,n=a,s=p.length),a=Math.ceil(o/tt),s=a>s?a+1:s+1,i>s&&(i=s,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(s=p.length,i=f.length,s-i<0&&(i=s,r=f,f=p,p=r),e=0;i;)e=(p[--i]=p[i]+f[i]+e)/Ln|0,p[i]%=Ln;for(e&&(p.unshift(e),++n),s=p.length;p[--s]==0;)p.pop();return t.d=p,t.e=Xs(p,n),mt?$e(t,o,l):t};ye.precision=ye.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Pi+t);return r.d?(e=Gp(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};ye.round=function(){var t=this,e=t.constructor;return $e(new e(t),t.e+1,e.rounding)};ye.sine=ye.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+tt,n.rounding=1,r=k2(n,Zp(n,r)),n.precision=t,n.rounding=e,$e(fi>2?r.neg():r,t,e,!0)):new n(NaN)};ye.squareRoot=ye.sqrt=function(){var t,e,r,n,i,a,s=this,o=s.d,l=s.e,p=s.s,f=s.constructor;if(p!==1||!o||!o[0])return new f(!p||p<0&&(!o||o[0])?NaN:o?s:1/0);for(mt=!1,p=Math.sqrt(+s),p==0||p==1/0?(e=Ur(o),(e.length+l)%2==0&&(e+="0"),p=Math.sqrt(e),l=Gr((l+1)/2)-(l<0||l%2),p==1/0?e="5e"+l:(e=p.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new f(e)):n=new f(p.toString()),r=(l=f.precision)+3;;)if(a=n,n=a.plus(qt(s,a,r+2,1)).times(.5),Ur(a.d).slice(0,r)===(e=Ur(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&($e(a,l+1,0),a.times(a).eq(s))){n=a;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&($e(n,l+1,1),t=!n.times(n).eq(s));break}return mt=!0,$e(n,l,f.rounding,t)};ye.tangent=ye.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=qt(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,$e(fi==2||fi==4?r.neg():r,t,e,!0)):new n(NaN)};ye.times=ye.mul=function(t){var e,r,n,i,a,s,o,l,p,f=this,d=f.constructor,h=f.d,v=(t=new d(t)).d;if(t.s*=f.s,!h||!h[0]||!v||!v[0])return new d(!t.s||h&&!h[0]&&!v||v&&!v[0]&&!h?NaN:!h||!v?t.s/0:t.s*0);for(r=Gr(f.e/tt)+Gr(t.e/tt),l=h.length,p=v.length,l<p&&(a=h,h=v,v=a,s=l,l=p,p=s),a=[],s=l+p,n=s;n--;)a.push(0);for(n=p;--n>=0;){for(e=0,i=l+n;i>n;)o=a[i]+v[n]*h[i-n-1]+e,a[i--]=o%Ln|0,e=o/Ln|0;a[i]=(a[i]+e)%Ln|0}for(;!a[--s];)a.pop();return e?++r:a.shift(),t.d=a,t.e=Xs(a,r),mt?$e(t,d.precision,d.rounding):t};ye.toBinary=function(t,e){return xf(this,2,t,e)};ye.toDecimalPlaces=ye.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(an(t,0,ki),e===void 0?e=n.rounding:an(e,0,8),$e(r,t+r.e+1,e))};ye.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=$n(n,!0):(an(t,0,ki),e===void 0?e=i.rounding:an(e,0,8),n=$e(new i(n),t+1,e),r=$n(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};ye.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?r=$n(i):(an(t,0,ki),e===void 0?e=a.rounding:an(e,0,8),n=$e(new a(i),t+i.e+1,e),r=$n(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};ye.toFraction=function(t){var e,r,n,i,a,s,o,l,p,f,d,h,v=this,b=v.d,g=v.constructor;if(!b)return new g(v);if(p=r=new g(1),n=l=new g(0),e=new g(n),a=e.e=Gp(b)-v.e-1,s=a%tt,e.d[0]=Dr(10,s<0?tt+s:s),t==null)t=a>0?e:p;else{if(o=new g(t),!o.isInt()||o.lt(p))throw Error(Pi+o);t=o.gt(e)?a>0?e:p:o}for(mt=!1,o=new g(Ur(b)),f=g.precision,g.precision=a=b.length*tt*2;d=qt(o,e,0,1,1),i=r.plus(d.times(n)),i.cmp(t)!=1;)r=n,n=i,i=p,p=l.plus(d.times(i)),l=i,i=e,e=o.minus(d.times(i)),o=i;return i=qt(t.minus(r),n,0,1,1),l=l.plus(i.times(p)),r=r.plus(i.times(n)),l.s=p.s=v.s,h=qt(p,n,a,1).minus(v).abs().cmp(qt(l,r,a,1).minus(v).abs())<1?[p,n]:[l,r],g.precision=f,mt=!0,h};ye.toHexadecimal=ye.toHex=function(t,e){return xf(this,16,t,e)};ye.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:an(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(mt=!1,r=qt(r,t,0,e,1).times(t),mt=!0,$e(r)):(t.s=r.s,r=t),r};ye.toNumber=function(){return+this};ye.toOctal=function(t,e){return xf(this,8,t,e)};ye.toPower=ye.pow=function(t){var e,r,n,i,a,s,o=this,l=o.constructor,p=+(t=new l(t));if(!o.d||!t.d||!o.d[0]||!t.d[0])return new l(Dr(+o,p));if(o=new l(o),o.eq(1))return o;if(n=l.precision,a=l.rounding,t.eq(1))return $e(o,n,a);if(e=Gr(t.e/tt),e>=t.d.length-1&&(r=p<0?-p:p)<=B2)return i=Kp(l,o,r,n),t.s<0?new l(1).div(i):$e(i,n,a);if(s=o.s,s<0){if(e<t.d.length-1)return new l(NaN);if(t.d[e]&1||(s=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=s,o}return r=Dr(+o,p),e=r==0||!isFinite(r)?Gr(p*(Math.log("0."+Ur(o.d))/Math.LN10+o.e+1)):new l(r+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?s/0:0):(mt=!1,l.rounding=o.s=1,r=Math.min(12,(e+"").length),i=pf(t.times(Si(o,n+r)),n),i.d&&(i=$e(i,n+5,1),lu(i.d,n,a)&&(e=n+10,i=$e(pf(t.times(Si(o,e+r)),e),e+5,1),+Ur(i.d).slice(n+1,n+15)+1==1e14&&(i=$e(i,n+1,0)))),i.s=s,mt=!0,l.rounding=a,$e(i,n,a))};ye.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=$n(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(an(t,1,ki),e===void 0?e=i.rounding:an(e,0,8),n=$e(new i(n),t,e),r=$n(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};ye.toSignificantDigits=ye.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(an(t,1,ki),e===void 0?e=n.rounding:an(e,0,8)),$e(new n(r),t,e)};ye.toString=function(){var t=this,e=t.constructor,r=$n(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};ye.truncated=ye.trunc=function(){return $e(new this.constructor(this),this.e+1,1)};ye.valueOf=ye.toJSON=function(){var t=this,e=t.constructor,r=$n(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function Ur(t){var e,r,n,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)n=t[e]+"",r=tt-n.length,r&&(a+=Ai(r)),a+=n;s=t[e],n=s+"",r=tt-n.length,r&&(a+=Ai(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}function an(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Pi+t)}function lu(t,e,r,n){var i,a,s,o;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=tt,i=0):(i=Math.ceil((e+1)/tt),e%=tt),a=Dr(10,tt-e),o=t[i]%a|0,n==null?e<3?(e==0?o=o/100|0:e==1&&(o=o/10|0),s=r<4&&o==99999||r>3&&o==49999||o==5e4||o==0):s=(r<4&&o+1==a||r>3&&o+1==a/2)&&(t[i+1]/a/100|0)==Dr(10,e-2)-1||(o==a/2||o==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?o=o/1e3|0:e==1?o=o/100|0:e==2&&(o=o/10|0),s=(n||r<4)&&o==9999||!n&&r>3&&o==4999):s=((n||r<4)&&o+1==a||!n&&r>3&&o+1==a/2)&&(t[i+1]/a/1e3|0)==Dr(10,e-3)-1,s}function vs(t,e,r){for(var n,i=[0],a,s=0,o=t.length;s<o;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=cf.indexOf(t.charAt(s++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function M2(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/eo(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=Aa(t,1,e.times(i),new t(1));for(var a=r;a--;){var s=e.times(e);e=s.times(s).minus(s).times(8).plus(1)}return t.precision-=r,e}var qt=function(){function t(n,i,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*i+o,n[l]=s%a|0,o=s/a|0;return o&&n.unshift(o),n}function e(n,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=i[o]){l=n[o]>i[o]?1:-1;break}return l}function r(n,i,a,s){for(var o=0;a--;)n[a]-=o,o=n[a]<i[a]?1:0,n[a]=o*s+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s,o,l){var p,f,d,h,v,b,g,_,D,S,y,F,A,C,M,O,N,q,Z,Q,V=n.constructor,L=n.s==i.s?1:-1,z=n.d,U=i.d;if(!z||!z[0]||!U||!U[0])return new V(!n.s||!i.s||(z?U&&z[0]==U[0]:!U)?NaN:z&&z[0]==0||!U?L*0:L/0);for(l?(v=1,f=n.e-i.e):(l=Ln,v=tt,f=Gr(n.e/v)-Gr(i.e/v)),Z=U.length,N=z.length,D=new V(L),S=D.d=[],d=0;U[d]==(z[d]||0);d++);if(U[d]>(z[d]||0)&&f--,a==null?(C=a=V.precision,s=V.rounding):o?C=a+(n.e-i.e)+1:C=a,C<0)S.push(1),b=!0;else{if(C=C/v+2|0,d=0,Z==1){for(h=0,U=U[0],C++;(d<N||h)&&C--;d++)M=h*l+(z[d]||0),S[d]=M/U|0,h=M%U|0;b=h||d<N}else{for(h=l/(U[0]+1)|0,h>1&&(U=t(U,h,l),z=t(z,h,l),Z=U.length,N=z.length),O=Z,y=z.slice(0,Z),F=y.length;F<Z;)y[F++]=0;Q=U.slice(),Q.unshift(0),q=U[0],U[1]>=l/2&&++q;do h=0,p=e(U,y,Z,F),p<0?(A=y[0],Z!=F&&(A=A*l+(y[1]||0)),h=A/q|0,h>1?(h>=l&&(h=l-1),g=t(U,h,l),_=g.length,F=y.length,p=e(g,y,_,F),p==1&&(h--,r(g,Z<_?Q:U,_,l))):(h==0&&(p=h=1),g=U.slice()),_=g.length,_<F&&g.unshift(0),r(y,g,F,l),p==-1&&(F=y.length,p=e(U,y,Z,F),p<1&&(h++,r(y,Z<F?Q:U,F,l))),F=y.length):p===0&&(h++,y=[0]),S[d++]=h,p&&y[0]?y[F++]=z[O]||0:(y=[z[O]],F=1);while((O++<N||y[0]!==void 0)&&C--);b=y[0]!==void 0}S[0]||S.shift()}if(v==1)D.e=f,jp=b;else{for(d=1,h=S[0];h>=10;h/=10)d++;D.e=d+f*v-1,$e(D,o?a+D.e+1:a,s,b)}return D}}();function $e(t,e,r,n){var i,a,s,o,l,p,f,d,h,v=t.constructor;e:if(e!=null){if(d=t.d,!d)return t;for(i=1,o=d[0];o>=10;o/=10)i++;if(a=e-i,a<0)a+=tt,s=e,f=d[h=0],l=f/Dr(10,i-s-1)%10|0;else if(h=Math.ceil((a+1)/tt),o=d.length,h>=o)if(n){for(;o++<=h;)d.push(0);f=l=0,i=1,a%=tt,s=a-tt+1}else break e;else{for(f=o=d[h],i=1;o>=10;o/=10)i++;a%=tt,s=a-tt+i,l=s<0?0:f/Dr(10,i-s-1)%10|0}if(n=n||e<0||d[h+1]!==void 0||(s<0?f:f%Dr(10,i-s-1)),p=r<4?(l||n)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||n||r==6&&(a>0?s>0?f/Dr(10,i-s):0:d[h-1])%10&1||r==(t.s<0?8:7)),e<1||!d[0])return d.length=0,p?(e-=t.e+1,d[0]=Dr(10,(tt-e%tt)%tt),t.e=-e||0):d[0]=t.e=0,t;if(a==0?(d.length=h,o=1,h--):(d.length=h+1,o=Dr(10,tt-a),d[h]=s>0?(f/Dr(10,i-s)%Dr(10,s)|0)*o:0),p)for(;;)if(h==0){for(a=1,s=d[0];s>=10;s/=10)a++;for(s=d[0]+=o,o=1;s>=10;s/=10)o++;a!=o&&(t.e++,d[0]==Ln&&(d[0]=1));break}else{if(d[h]+=o,d[h]!=Ln)break;d[h--]=0,o=1}for(a=d.length;d[--a]===0;)d.pop()}return mt&&(t.e>v.maxE?(t.d=null,t.e=NaN):t.e<v.minE&&(t.e=0,t.d=[0])),t}function $n(t,e,r){if(!t.isFinite())return Yp(t);var n,i=t.e,a=Ur(t.d),s=a.length;return e?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+Ai(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+Ai(-i-1)+a,r&&(n=r-s)>0&&(a+=Ai(n))):i>=s?(a+=Ai(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+Ai(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=Ai(n))),a}function Xs(t,e){var r=t[0];for(e*=tt;r>=10;r/=10)e++;return e}function Ss(t,e,r){if(e>O2)throw mt=!0,r&&(t.precision=r),Error(zp);return $e(new t(Cs),e,1,!0)}function xn(t,e,r){if(e>df)throw Error(zp);return $e(new t(Fs),e,r,!0)}function Gp(t){var e=t.length-1,r=e*tt+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function Ai(t){for(var e="";t--;)e+="0";return e}function Kp(t,e,r,n){var i,a=new t(1),s=Math.ceil(n/tt+4);for(mt=!1;;){if(r%2&&(a=a.times(e),D0(a.d,s)&&(i=!0)),r=Gr(r/2),r===0){r=a.d.length-1,i&&a.d[r]===0&&++a.d[r];break}e=e.times(e),D0(e.d,s)}return mt=!0,a}function b0(t){return t.d[t.d.length-1]&1}function $p(t,e,r){for(var n,i=new t(e[0]),a=0;++a<e.length;)if(n=new t(e[a]),n.s)i[r](n)&&(i=n);else{i=n;break}return i}function pf(t,e){var r,n,i,a,s,o,l,p=0,f=0,d=0,h=t.constructor,v=h.rounding,b=h.precision;if(!t.d||!t.d[0]||t.e>17)return new h(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(mt=!1,l=b):l=e,o=new h(.03125);t.e>-2;)t=t.times(o),d+=5;for(n=Math.log(Dr(2,d))/Math.LN10*2+5|0,l+=n,r=a=s=new h(1),h.precision=l;;){if(a=$e(a.times(t),l,1),r=r.times(++f),o=s.plus(qt(a,r,l,1)),Ur(o.d).slice(0,l)===Ur(s.d).slice(0,l)){for(i=d;i--;)s=$e(s.times(s),l,1);if(e==null)if(p<3&&lu(s.d,l-n,v,p))h.precision=l+=10,r=a=o=new h(1),f=0,p++;else return $e(s,h.precision=b,v,mt=!0);else return h.precision=b,s}s=o}}function Si(t,e){var r,n,i,a,s,o,l,p,f,d,h,v=1,b=10,g=t,_=g.d,D=g.constructor,S=D.rounding,y=D.precision;if(g.s<0||!_||!_[0]||!g.e&&_[0]==1&&_.length==1)return new D(_&&!_[0]?-1/0:g.s!=1?NaN:_?0:g);if(e==null?(mt=!1,f=y):f=e,D.precision=f+=b,r=Ur(_),n=r.charAt(0),Math.abs(a=g.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(t),r=Ur(g.d),n=r.charAt(0),v++;a=g.e,n>1?(g=new D("0."+r),a++):g=new D(n+"."+r.slice(1))}else return p=Ss(D,f+2,y).times(a+""),g=Si(new D(n+"."+r.slice(1)),f-b).plus(p),D.precision=y,e==null?$e(g,y,S,mt=!0):g;for(d=g,l=s=g=qt(g.minus(1),g.plus(1),f,1),h=$e(g.times(g),f,1),i=3;;){if(s=$e(s.times(h),f,1),p=l.plus(qt(s,new D(i),f,1)),Ur(p.d).slice(0,f)===Ur(l.d).slice(0,f))if(l=l.times(2),a!==0&&(l=l.plus(Ss(D,f+2,y).times(a+""))),l=qt(l,new D(v),f,1),e==null)if(lu(l.d,f-b,S,o))D.precision=f+=b,p=s=g=qt(d.minus(1),d.plus(1),f,1),h=$e(g.times(g),f,1),i=o=1;else return $e(l,D.precision=y,S,mt=!0);else return D.precision=y,l;l=p,i+=2}}function Yp(t){return String(t.s*t.s/0)}function vf(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%tt,r<0&&(n+=tt),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=tt;n<i;)t.d.push(+e.slice(n,n+=tt));e=e.slice(n),n=tt-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),mt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function P2(t,e){var r,n,i,a,s,o,l,p,f;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Hp.test(e))return vf(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(F2.test(e))r=16,e=e.toLowerCase();else if(C2.test(e))r=2;else if(S2.test(e))r=8;else throw Error(Pi+e);for(a=e.search(/p/i),a>0?(l=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),s=a>=0,n=t.constructor,s&&(e=e.replace(".",""),o=e.length,a=o-a,i=Kp(n,new n(r),a,a*2)),p=vs(e,r,Ln),f=p.length-1,a=f;p[a]===0;--a)p.pop();return a<0?new n(t.s*0):(t.e=Xs(p,f),t.d=p,mt=!1,s&&(t=qt(t,i,o*4)),l&&(t=t.times(Math.abs(l)<54?Dr(2,l):Ca.pow(2,l))),mt=!0,t)}function k2(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:Aa(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/eo(5,r)),e=Aa(t,2,e,e);for(var i,a=new t(5),s=new t(16),o=new t(20);r--;)i=e.times(e),e=e.times(a.plus(i.times(s.times(i).minus(o))));return e}function Aa(t,e,r,n,i){var a,s,o,l,p=t.precision,f=Math.ceil(p/tt);for(mt=!1,l=r.times(r),o=new t(n);;){if(s=qt(o.times(l),new t(e++*e++),p,1),o=i?n.plus(s):n.minus(s),n=qt(s.times(l),new t(e++*e++),p,1),s=o.plus(n),s.d[f]!==void 0){for(a=f;s.d[a]===o.d[a]&&a--;);if(a==-1)break}a=o,o=n,n=s,s=a}return mt=!0,s.d.length=f+1,s}function eo(t,e){for(var r=t;--e;)r*=t;return r}function Zp(t,e){var r,n=e.s<0,i=xn(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return fi=n?4:1,e;if(r=e.divToInt(i),r.isZero())fi=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(a))return fi=b0(r)?n?2:3:n?4:1,e;fi=b0(r)?n?1:4:n?3:2}return e.minus(i).abs()}function xf(t,e,r,n){var i,a,s,o,l,p,f,d,h,v=t.constructor,b=r!==void 0;if(b?(an(r,1,ki),n===void 0?n=v.rounding:an(n,0,8)):(r=v.precision,n=v.rounding),!t.isFinite())f=Yp(t);else{for(f=$n(t),s=f.indexOf("."),b?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,s>=0&&(f=f.replace(".",""),h=new v(1),h.e=f.length-s,h.d=vs($n(h),10,i),h.e=h.d.length),d=vs(f,10,i),a=l=d.length;d[--l]==0;)d.pop();if(!d[0])f=b?"0p+0":"0";else{if(s<0?a--:(t=new v(t),t.d=d,t.e=a,t=qt(t,h,r,n,0,i),d=t.d,a=t.e,p=jp),s=d[r],o=i/2,p=p||d[r+1]!==void 0,p=n<4?(s!==void 0||p)&&(n===0||n===(t.s<0?3:2)):s>o||s===o&&(n===4||p||n===6&&d[r-1]&1||n===(t.s<0?8:7)),d.length=r,p)for(;++d[--r]>i-1;)d[r]=0,r||(++a,d.unshift(1));for(l=d.length;!d[l-1];--l);for(s=0,f="";s<l;s++)f+=cf.charAt(d[s]);if(b){if(l>1)if(e==16||e==8){for(s=e==16?4:3,--l;l%s;l++)f+="0";for(d=vs(f,i,e),l=d.length;!d[l-1];--l);for(s=1,f="1.";s<l;s++)f+=cf.charAt(d[s])}else f=f.charAt(0)+"."+f.slice(1);f=f+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)f="0"+f;f="0."+f}else if(++a>l)for(a-=l;a--;)f+="0";else a<l&&(f=f.slice(0,a)+"."+f.slice(a))}f=(e==16?"0x":e==2?"0b":e==8?"0o":"")+f}return t.s<0?"-"+f:f}function D0(t,e){if(t.length>e)return t.length=e,!0}function T2(t){return new this(t).abs()}function I2(t){return new this(t).acos()}function N2(t){return new this(t).acosh()}function x2(t,e){return new this(t).plus(e)}function R2(t){return new this(t).asin()}function L2(t){return new this(t).asinh()}function U2(t){return new this(t).atan()}function V2(t){return new this(t).atanh()}function j2(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,a=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=xn(this,a,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?xn(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=xn(this,a,1).times(.5),r.s=t.s):e.s<0?(this.precision=a,this.rounding=1,r=this.atan(qt(t,e,a,1)),e=xn(this,a,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(qt(t,e,a,1)),r}function z2(t){return new this(t).cbrt()}function q2(t){return $e(t=new this(t),t.e+1,2)}function W2(t,e,r){return new this(t).clamp(e,r)}function H2(t){if(!t||typeof t!="object")throw Error(Qs+"Object expected");var e,r,n,i=t.defaults===!0,a=["precision",1,ki,"rounding",0,8,"toExpNeg",-wa,0,"toExpPos",0,wa,"maxE",0,wa,"minE",-wa,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(r=a[e],i&&(this[r]=hf[r]),(n=t[r])!==void 0)if(Gr(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Pi+r+": "+n);if(r="crypto",i&&(this[r]=hf[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(qp);else this[r]=!1;else throw Error(Pi+r+": "+n);return this}function G2(t){return new this(t).cos()}function K2(t){return new this(t).cosh()}function Jp(t){var e,r,n;function i(a){var s,o,l,p=this;if(!(p instanceof i))return new i(a);if(p.constructor=i,w0(a)){p.s=a.s,mt?!a.d||a.e>i.maxE?(p.e=NaN,p.d=null):a.e<i.minE?(p.e=0,p.d=[0]):(p.e=a.e,p.d=a.d.slice()):(p.e=a.e,p.d=a.d?a.d.slice():a.d);return}if(l=typeof a,l==="number"){if(a===0){p.s=1/a<0?-1:1,p.e=0,p.d=[0];return}if(a<0?(a=-a,p.s=-1):p.s=1,a===~~a&&a<1e7){for(s=0,o=a;o>=10;o/=10)s++;mt?s>i.maxE?(p.e=NaN,p.d=null):s<i.minE?(p.e=0,p.d=[0]):(p.e=s,p.d=[a]):(p.e=s,p.d=[a]);return}else if(a*0!==0){a||(p.s=NaN),p.e=NaN,p.d=null;return}return vf(p,a.toString())}else if(l!=="string")throw Error(Pi+a);return(o=a.charCodeAt(0))===45?(a=a.slice(1),p.s=-1):(o===43&&(a=a.slice(1)),p.s=1),Hp.test(a)?vf(p,a):P2(p,a)}if(i.prototype=ye,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=H2,i.clone=Jp,i.isDecimal=w0,i.abs=T2,i.acos=I2,i.acosh=N2,i.add=x2,i.asin=R2,i.asinh=L2,i.atan=U2,i.atanh=V2,i.atan2=j2,i.cbrt=z2,i.ceil=q2,i.clamp=W2,i.cos=G2,i.cosh=K2,i.div=$2,i.exp=Y2,i.floor=Z2,i.hypot=J2,i.ln=Q2,i.log=X2,i.log10=tE,i.log2=eE,i.max=rE,i.min=nE,i.mod=iE,i.mul=aE,i.pow=uE,i.random=sE,i.round=oE,i.sign=lE,i.sin=fE,i.sinh=cE,i.sqrt=hE,i.sub=dE,i.sum=pE,i.tan=vE,i.tanh=gE,i.trunc=mE,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function $2(t,e){return new this(t).div(e)}function Y2(t){return new this(t).exp()}function Z2(t){return $e(t=new this(t),t.e+1,3)}function J2(){var t,e,r=new this(0);for(mt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return mt=!0,new this(1/0);r=e}return mt=!0,r.sqrt()}function w0(t){return t instanceof Ca||t&&t.toStringTag===Wp||!1}function Q2(t){return new this(t).ln()}function X2(t,e){return new this(t).log(e)}function eE(t){return new this(t).log(2)}function tE(t){return new this(t).log(10)}function rE(){return $p(this,arguments,"lt")}function nE(){return $p(this,arguments,"gt")}function iE(t,e){return new this(t).mod(e)}function aE(t,e){return new this(t).mul(e)}function uE(t,e){return new this(t).pow(e)}function sE(t){var e,r,n,i,a=0,s=new this(1),o=[];if(t===void 0?t=this.precision:an(t,1,ki),n=Math.ceil(t/tt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(o.push(i%1e7),a+=4);a=n/4}else throw Error(qp);else for(;a<n;)o[a++]=Math.random()*1e7|0;for(n=o[--a],t%=tt,n&&t&&(i=Dr(10,tt-t),o[a]=(n/i|0)*i);o[a]===0;a--)o.pop();if(a<0)r=0,o=[0];else{for(r=-1;o[0]===0;r-=tt)o.shift();for(n=1,i=o[0];i>=10;i/=10)n++;n<tt&&(r-=tt-n)}return s.e=r,s.d=o,s}function oE(t){return $e(t=new this(t),t.e+1,this.rounding)}function lE(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function fE(t){return new this(t).sin()}function cE(t){return new this(t).sinh()}function hE(t){return new this(t).sqrt()}function dE(t,e){return new this(t).sub(e)}function pE(){var t=0,e=arguments,r=new this(e[t]);for(mt=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return mt=!0,$e(r,this.precision,this.rounding)}function vE(t){return new this(t).tan()}function gE(t){return new this(t).tanh()}function mE(t){return $e(t=new this(t),t.e+1,1)}ye[Symbol.for("nodejs.util.inspect.custom")]=ye.toString;ye[Symbol.toStringTag]="Decimal";var Ca=ye.constructor=Jp(hf);Cs=new Ca(Cs);Fs=new Ca(Fs);var _E="BigNumber",bE=["?on","config"],DE=kt(_E,bE,t=>{var{on:e,config:r}=t,n=Ca.clone({precision:r.precision,modulo:Ca.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&n.config({precision:i.precision})}),n},{isClass:!0}),vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gf={},wE={get exports(){return gf},set exports(t){gf=t}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=Math.cosh||function(d){return Math.abs(d)<1e-9?1-d:(Math.exp(d)+Math.exp(-d))*.5},i=Math.sinh||function(d){return Math.abs(d)<1e-9?d:(Math.exp(d)-Math.exp(-d))*.5},a=function(d){var h=Math.PI/4;if(-h>d||d>h)return Math.cos(d)-1;var v=d*d;return v*(v*(v*(v*(v*(v*(v*(v/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},s=function(d,h){var v=Math.abs(d),b=Math.abs(h);return v<3e3&&b<3e3?Math.sqrt(v*v+b*b):(v<b?(v=b,b=d/h):b=h/d,v*Math.sqrt(1+b*b))},o=function(){throw SyntaxError("Invalid Param")};function l(d,h){var v=Math.abs(d),b=Math.abs(h);return d===0?Math.log(b):h===0?Math.log(v):v<3e3&&b<3e3?Math.log(d*d+h*h)*.5:(d=d/2,h=h/2,.5*Math.log(d*d+h*h)+Math.LN2)}var p=function(d,h){var v={re:0,im:0};if(d==null)v.re=v.im=0;else if(h!==void 0)v.re=d,v.im=h;else switch(typeof d){case"object":if("im"in d&&"re"in d)v.re=d.re,v.im=d.im;else if("abs"in d&&"arg"in d){if(!Number.isFinite(d.abs)&&Number.isFinite(d.arg))return f.INFINITY;v.re=d.abs*Math.cos(d.arg),v.im=d.abs*Math.sin(d.arg)}else if("r"in d&&"phi"in d){if(!Number.isFinite(d.r)&&Number.isFinite(d.phi))return f.INFINITY;v.re=d.r*Math.cos(d.phi),v.im=d.r*Math.sin(d.phi)}else d.length===2?(v.re=d[0],v.im=d[1]):o();break;case"string":v.im=v.re=0;var b=d.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),g=1,_=0;b===null&&o();for(var D=0;D<b.length;D++){var S=b[D];S===" "||S==="	"||S===`
`||(S==="+"?g++:S==="-"?_++:S==="i"||S==="I"?(g+_===0&&o(),b[D+1]!==" "&&!isNaN(b[D+1])?(v.im+=parseFloat((_%2?"-":"")+b[D+1]),D++):v.im+=parseFloat((_%2?"-":"")+"1"),g=_=0):((g+_===0||isNaN(S))&&o(),b[D+1]==="i"||b[D+1]==="I"?(v.im+=parseFloat((_%2?"-":"")+S),D++):v.re+=parseFloat((_%2?"-":"")+S),g=_=0))}g+_>0&&o();break;case"number":v.im=0,v.re=d;break;default:o()}return isNaN(v.re)||isNaN(v.im),v};function f(d,h){if(!(this instanceof f))return new f(d,h);var v=p(d,h);this.re=v.re,this.im=v.im}f.prototype={re:0,im:0,sign:function(){var d=this.abs();return new f(this.re/d,this.im/d)},add:function(d,h){var v=new f(d,h);return this.isInfinite()&&v.isInfinite()?f.NAN:this.isInfinite()||v.isInfinite()?f.INFINITY:new f(this.re+v.re,this.im+v.im)},sub:function(d,h){var v=new f(d,h);return this.isInfinite()&&v.isInfinite()?f.NAN:this.isInfinite()||v.isInfinite()?f.INFINITY:new f(this.re-v.re,this.im-v.im)},mul:function(d,h){var v=new f(d,h);return this.isInfinite()&&v.isZero()||this.isZero()&&v.isInfinite()?f.NAN:this.isInfinite()||v.isInfinite()?f.INFINITY:v.im===0&&this.im===0?new f(this.re*v.re,0):new f(this.re*v.re-this.im*v.im,this.re*v.im+this.im*v.re)},div:function(d,h){var v=new f(d,h);if(this.isZero()&&v.isZero()||this.isInfinite()&&v.isInfinite())return f.NAN;if(this.isInfinite()||v.isZero())return f.INFINITY;if(this.isZero()||v.isInfinite())return f.ZERO;d=this.re,h=this.im;var b=v.re,g=v.im,_,D;return g===0?new f(d/b,h/b):Math.abs(b)<Math.abs(g)?(D=b/g,_=b*D+g,new f((d*D+h)/_,(h*D-d)/_)):(D=g/b,_=g*D+b,new f((d+h*D)/_,(h-d*D)/_))},pow:function(d,h){var v=new f(d,h);if(d=this.re,h=this.im,v.isZero())return f.ONE;if(v.im===0){if(h===0&&d>0)return new f(Math.pow(d,v.re),0);if(d===0)switch((v.re%4+4)%4){case 0:return new f(Math.pow(h,v.re),0);case 1:return new f(0,Math.pow(h,v.re));case 2:return new f(-Math.pow(h,v.re),0);case 3:return new f(0,-Math.pow(h,v.re))}}if(d===0&&h===0&&v.re>0&&v.im>=0)return f.ZERO;var b=Math.atan2(h,d),g=l(d,h);return d=Math.exp(v.re*g-v.im*b),h=v.im*g+v.re*b,new f(d*Math.cos(h),d*Math.sin(h))},sqrt:function(){var d=this.re,h=this.im,v=this.abs(),b,g;if(d>=0){if(h===0)return new f(Math.sqrt(d),0);b=.5*Math.sqrt(2*(v+d))}else b=Math.abs(h)/Math.sqrt(2*(v-d));return d<=0?g=.5*Math.sqrt(2*(v-d)):g=Math.abs(h)/Math.sqrt(2*(v+d)),new f(b,h<0?-g:g)},exp:function(){var d=Math.exp(this.re);return this.im,new f(d*Math.cos(this.im),d*Math.sin(this.im))},expm1:function(){var d=this.re,h=this.im;return new f(Math.expm1(d)*Math.cos(h)+a(h),Math.exp(d)*Math.sin(h))},log:function(){var d=this.re,h=this.im;return new f(l(d,h),Math.atan2(h,d))},abs:function(){return s(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var d=this.re,h=this.im;return new f(Math.sin(d)*n(h),Math.cos(d)*i(h))},cos:function(){var d=this.re,h=this.im;return new f(Math.cos(d)*n(h),-Math.sin(d)*i(h))},tan:function(){var d=2*this.re,h=2*this.im,v=Math.cos(d)+n(h);return new f(Math.sin(d)/v,i(h)/v)},cot:function(){var d=2*this.re,h=2*this.im,v=Math.cos(d)-n(h);return new f(-Math.sin(d)/v,i(h)/v)},sec:function(){var d=this.re,h=this.im,v=.5*n(2*h)+.5*Math.cos(2*d);return new f(Math.cos(d)*n(h)/v,Math.sin(d)*i(h)/v)},csc:function(){var d=this.re,h=this.im,v=.5*n(2*h)-.5*Math.cos(2*d);return new f(Math.sin(d)*n(h)/v,-Math.cos(d)*i(h)/v)},asin:function(){var d=this.re,h=this.im,v=new f(h*h-d*d+1,-2*d*h).sqrt(),b=new f(v.re-h,v.im+d).log();return new f(b.im,-b.re)},acos:function(){var d=this.re,h=this.im,v=new f(h*h-d*d+1,-2*d*h).sqrt(),b=new f(v.re-h,v.im+d).log();return new f(Math.PI/2-b.im,b.re)},atan:function(){var d=this.re,h=this.im;if(d===0){if(h===1)return new f(0,1/0);if(h===-1)return new f(0,-1/0)}var v=d*d+(1-h)*(1-h),b=new f((1-h*h-d*d)/v,-2*d/v).log();return new f(-.5*b.im,.5*b.re)},acot:function(){var d=this.re,h=this.im;if(h===0)return new f(Math.atan2(1,d),0);var v=d*d+h*h;return v!==0?new f(d/v,-h/v).atan():new f(d!==0?d/0:0,h!==0?-h/0:0).atan()},asec:function(){var d=this.re,h=this.im;if(d===0&&h===0)return new f(0,1/0);var v=d*d+h*h;return v!==0?new f(d/v,-h/v).acos():new f(d!==0?d/0:0,h!==0?-h/0:0).acos()},acsc:function(){var d=this.re,h=this.im;if(d===0&&h===0)return new f(Math.PI/2,1/0);var v=d*d+h*h;return v!==0?new f(d/v,-h/v).asin():new f(d!==0?d/0:0,h!==0?-h/0:0).asin()},sinh:function(){var d=this.re,h=this.im;return new f(i(d)*Math.cos(h),n(d)*Math.sin(h))},cosh:function(){var d=this.re,h=this.im;return new f(n(d)*Math.cos(h),i(d)*Math.sin(h))},tanh:function(){var d=2*this.re,h=2*this.im,v=n(d)+Math.cos(h);return new f(i(d)/v,Math.sin(h)/v)},coth:function(){var d=2*this.re,h=2*this.im,v=n(d)-Math.cos(h);return new f(i(d)/v,-Math.sin(h)/v)},csch:function(){var d=this.re,h=this.im,v=Math.cos(2*h)-n(2*d);return new f(-2*i(d)*Math.cos(h)/v,2*n(d)*Math.sin(h)/v)},sech:function(){var d=this.re,h=this.im,v=Math.cos(2*h)+n(2*d);return new f(2*n(d)*Math.cos(h)/v,-2*i(d)*Math.sin(h)/v)},asinh:function(){var d=this.im;this.im=-this.re,this.re=d;var h=this.asin();return this.re=-this.im,this.im=d,d=h.re,h.re=-h.im,h.im=d,h},acosh:function(){var d=this.acos();if(d.im<=0){var h=d.re;d.re=-d.im,d.im=h}else{var h=d.im;d.im=-d.re,d.re=h}return d},atanh:function(){var d=this.re,h=this.im,v=d>1&&h===0,b=1-d,g=1+d,_=b*b+h*h,D=_!==0?new f((g*b-h*h)/_,(h*b+g*h)/_):new f(d!==-1?d/0:0,h!==0?h/0:0),S=D.re;return D.re=l(D.re,D.im)/2,D.im=Math.atan2(D.im,S)/2,v&&(D.im=-D.im),D},acoth:function(){var d=this.re,h=this.im;if(d===0&&h===0)return new f(0,Math.PI/2);var v=d*d+h*h;return v!==0?new f(d/v,-h/v).atanh():new f(d!==0?d/0:0,h!==0?-h/0:0).atanh()},acsch:function(){var d=this.re,h=this.im;if(h===0)return new f(d!==0?Math.log(d+Math.sqrt(d*d+1)):1/0,0);var v=d*d+h*h;return v!==0?new f(d/v,-h/v).asinh():new f(d!==0?d/0:0,h!==0?-h/0:0).asinh()},asech:function(){var d=this.re,h=this.im;if(this.isZero())return f.INFINITY;var v=d*d+h*h;return v!==0?new f(d/v,-h/v).acosh():new f(d!==0?d/0:0,h!==0?-h/0:0).acosh()},inverse:function(){if(this.isZero())return f.INFINITY;if(this.isInfinite())return f.ZERO;var d=this.re,h=this.im,v=d*d+h*h;return new f(d/v,-h/v)},conjugate:function(){return new f(this.re,-this.im)},neg:function(){return new f(-this.re,-this.im)},ceil:function(d){return d=Math.pow(10,d||0),new f(Math.ceil(this.re*d)/d,Math.ceil(this.im*d)/d)},floor:function(d){return d=Math.pow(10,d||0),new f(Math.floor(this.re*d)/d,Math.floor(this.im*d)/d)},round:function(d){return d=Math.pow(10,d||0),new f(Math.round(this.re*d)/d,Math.round(this.im*d)/d)},equals:function(d,h){var v=new f(d,h);return Math.abs(v.re-this.re)<=f.EPSILON&&Math.abs(v.im-this.im)<=f.EPSILON},clone:function(){return new f(this.re,this.im)},toString:function(){var d=this.re,h=this.im,v="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(d)<f.EPSILON&&(d=0),Math.abs(h)<f.EPSILON&&(h=0),h===0?v+d:(d!==0?(v+=d,v+=" ",h<0?(h=-h,v+="-"):v+="+",v+=" "):h<0&&(h=-h,v+="-"),h!==1&&(v+=h),v+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},f.ZERO=new f(0,0),f.ONE=new f(1,0),f.I=new f(0,1),f.PI=new f(Math.PI,0),f.E=new f(Math.E,0),f.INFINITY=new f(1/0,1/0),f.NAN=new f(NaN,NaN),f.EPSILON=1e-15,Object.defineProperty(f,"__esModule",{value:!0}),f.default=f,f.Complex=f,t.exports=f})()})(wE);const kr=Rf(gf);var yE="Complex",EE=[],AE=kt(yE,EE,()=>(Object.defineProperty(kr,"name",{value:"Complex"}),kr.prototype.constructor=kr,kr.prototype.type="Complex",kr.prototype.isComplex=!0,kr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},kr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},kr.prototype.format=function(t){var e="",r=this.im,n=this.re,i=lf(this.re,t),a=lf(this.im,t),s=rr(t)?t:t?t.precision:null;if(s!==null){var o=Math.pow(10,-s);Math.abs(n/r)<o&&(n=0),Math.abs(r/n)<o&&(r=0)}return r===0?e=i:n===0?r===1?e="i":r===-1?e="-i":e=a+"i":r<0?r===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+a+"i",e},kr.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return kr(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(rr(r)){if(Mp(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),rr(n))return new kr({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},kr.prototype.valueOf=kr.prototype.toString,kr.fromJSON=function(t){return new kr(t)},kr.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},kr),{isClass:!0}),mf={},CE={get exports(){return mf},set exports(t){mf=t}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=2e3,i={s:1,n:0,d:1};function a(b,g){if(isNaN(b=parseInt(b,10)))throw v.InvalidParameter;return b*g}function s(b,g){if(g===0)throw v.DivisionByZero;var _=Object.create(v.prototype);_.s=b<0?-1:1,b=b<0?-b:b;var D=h(b,g);return _.n=b/D,_.d=g/D,_}function o(b){for(var g={},_=b,D=2,S=4;S<=_;){for(;_%D===0;)_/=D,g[D]=(g[D]||0)+1;S+=1+2*D++}return _!==b?_>1&&(g[_]=(g[_]||0)+1):g[b]=(g[b]||0)+1,g}var l=function(b,g){var _=0,D=1,S=1,y=0,F=0,A=0,C=1,M=1,O=0,N=1,q=1,Z=1,Q=1e7,V;if(b!=null)if(g!==void 0){if(_=b,D=g,S=_*D,_%1!==0||D%1!==0)throw v.NonIntegerParameter}else switch(typeof b){case"object":{if("d"in b&&"n"in b)_=b.n,D=b.d,"s"in b&&(_*=b.s);else if(0 in b)_=b[0],1 in b&&(D=b[1]);else throw v.InvalidParameter;S=_*D;break}case"number":{if(b<0&&(S=b,b=-b),b%1===0)_=b;else if(b>0){for(b>=1&&(M=Math.pow(10,Math.floor(1+Math.log(b)/Math.LN10)),b/=M);N<=Q&&Z<=Q;)if(V=(O+q)/(N+Z),b===V){N+Z<=Q?(_=O+q,D=N+Z):Z>N?(_=q,D=Z):(_=O,D=N);break}else b>V?(O+=q,N+=Z):(q+=O,Z+=N),N>Q?(_=q,D=Z):(_=O,D=N);_*=M}else(isNaN(b)||isNaN(g))&&(D=_=NaN);break}case"string":{if(N=b.match(/\d+|./g),N===null)throw v.InvalidParameter;if(N[O]==="-"?(S=-1,O++):N[O]==="+"&&O++,N.length===O+1?F=a(N[O++],S):N[O+1]==="."||N[O]==="."?(N[O]!=="."&&(y=a(N[O++],S)),O++,(O+1===N.length||N[O+1]==="("&&N[O+3]===")"||N[O+1]==="'"&&N[O+3]==="'")&&(F=a(N[O],S),C=Math.pow(10,N[O].length),O++),(N[O]==="("&&N[O+2]===")"||N[O]==="'"&&N[O+2]==="'")&&(A=a(N[O+1],S),M=Math.pow(10,N[O+1].length)-1,O+=3)):N[O+1]==="/"||N[O+1]===":"?(F=a(N[O],S),C=a(N[O+2],1),O+=3):N[O+3]==="/"&&N[O+1]===" "&&(y=a(N[O],S),F=a(N[O+2],S),C=a(N[O+4],1),O+=5),N.length<=O){D=C*M,S=_=A+D*y+M*F;break}}default:throw v.InvalidParameter}if(D===0)throw v.DivisionByZero;i.s=S<0?-1:1,i.n=Math.abs(_),i.d=Math.abs(D)};function p(b,g,_){for(var D=1;g>0;b=b*b%_,g>>=1)g&1&&(D=D*b%_);return D}function f(b,g){for(;g%2===0;g/=2);for(;g%5===0;g/=5);if(g===1)return 0;for(var _=10%g,D=1;_!==1;D++)if(_=_*10%g,D>n)return 0;return D}function d(b,g,_){for(var D=1,S=p(10,_,g),y=0;y<300;y++){if(D===S)return y;D=D*10%g,S=S*10%g}return 0}function h(b,g){if(!b)return g;if(!g)return b;for(;;){if(b%=g,!b)return g;if(g%=b,!g)return b}}function v(b,g){if(l(b,g),this instanceof v)b=h(i.d,i.n),this.s=i.s,this.n=i.n/b,this.d=i.d/b;else return s(i.s*i.n,i.d)}v.DivisionByZero=new Error("Division by Zero"),v.InvalidParameter=new Error("Invalid argument"),v.NonIntegerParameter=new Error("Parameters must be integer"),v.prototype={s:1,n:0,d:1,abs:function(){return s(this.n,this.d)},neg:function(){return s(-this.s*this.n,this.d)},add:function(b,g){return l(b,g),s(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(b,g){return l(b,g),s(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(b,g){return l(b,g),s(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(b,g){return l(b,g),s(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return s(this.s*this.n,this.d)},mod:function(b,g){if(isNaN(this.n)||isNaN(this.d))return new v(NaN);if(b===void 0)return s(this.s*this.n%this.d,1);if(l(b,g),i.n===0&&this.d===0)throw v.DivisionByZero;return s(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(b,g){return l(b,g),s(h(i.n,this.n)*h(i.d,this.d),i.d*this.d)},lcm:function(b,g){return l(b,g),i.n===0&&this.n===0?s(0,1):s(i.n*this.n,h(i.n,this.n)*h(i.d,this.d))},ceil:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new v(NaN):s(Math.ceil(b*this.s*this.n/this.d),b)},floor:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new v(NaN):s(Math.floor(b*this.s*this.n/this.d),b)},round:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new v(NaN):s(Math.round(b*this.s*this.n/this.d),b)},inverse:function(){return s(this.s*this.d,this.n)},pow:function(b,g){if(l(b,g),i.d===1)return i.s<0?s(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):s(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var _=o(this.n),D=o(this.d),S=1,y=1;for(var F in _)if(F!=="1"){if(F==="0"){S=0;break}if(_[F]*=i.n,_[F]%i.d===0)_[F]/=i.d;else return null;S*=Math.pow(F,_[F])}for(var F in D)if(F!=="1"){if(D[F]*=i.n,D[F]%i.d===0)D[F]/=i.d;else return null;y*=Math.pow(F,D[F])}return i.s<0?s(y,S):s(S,y)},equals:function(b,g){return l(b,g),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(b,g){l(b,g);var _=this.s*this.n*i.d-i.s*i.n*this.d;return(0<_)-(_<0)},simplify:function(b){if(isNaN(this.n)||isNaN(this.d))return this;b=b||.001;for(var g=this.abs(),_=g.toContinued(),D=1;D<_.length;D++){for(var S=s(_[D-1],1),y=D-2;y>=0;y--)S=S.inverse().add(_[y]);if(S.sub(g).abs().valueOf()<b)return S.mul(this.s)}return this},divisible:function(b,g){return l(b,g),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(b){var g,_="",D=this.n,S=this.d;return this.s<0&&(_+="-"),S===1?_+=D:(b&&(g=Math.floor(D/S))>0&&(_+=g,_+=" ",D%=S),_+=D,_+="/",_+=S),_},toLatex:function(b){var g,_="",D=this.n,S=this.d;return this.s<0&&(_+="-"),S===1?_+=D:(b&&(g=Math.floor(D/S))>0&&(_+=g,D%=S),_+="\\frac{",_+=D,_+="}{",_+=S,_+="}"),_},toContinued:function(){var b,g=this.n,_=this.d,D=[];if(isNaN(g)||isNaN(_))return D;do D.push(Math.floor(g/_)),b=g%_,g=_,_=b;while(g!==1);return D},toString:function(b){var g=this.n,_=this.d;if(isNaN(g)||isNaN(_))return"NaN";b=b||15;var D=f(g,_),S=d(g,_,D),y=this.s<0?"-":"";if(y+=g/_|0,g%=_,g*=10,g&&(y+="."),D){for(var F=S;F--;)y+=g/_|0,g%=_,g*=10;y+="(";for(var F=D;F--;)y+=g/_|0,g%=_,g*=10;y+=")"}else for(var F=b;g&&F--;)y+=g/_|0,g%=_,g*=10;return y}},Object.defineProperty(v,"__esModule",{value:!0}),v.default=v,v.Fraction=v,t.exports=v})()})(CE);const li=Rf(mf);var FE="Fraction",SE=[],BE=kt(FE,SE,()=>(Object.defineProperty(li,"name",{value:"Fraction"}),li.prototype.constructor=li,li.prototype.type="Fraction",li.prototype.isFraction=!0,li.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},li.fromJSON=function(t){return new li(t)},li),{isClass:!0}),OE="Matrix",ME=[],PE=kt(OE,ME,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function Qp(t){return Object.keys(t.signatures||{}).reduce(function(e,r){var n=(r.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var kE="DenseMatrix",TE=["Matrix"],IE=kt(kE,TE,t=>{var{Matrix:e}=t;function r(f,d){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!Gn(d))throw new Error("Invalid datatype: "+d);if(Jr(f))f.type==="DenseMatrix"?(this._data=Fr(f._data),this._size=Fr(f._size),this._datatype=d||f._datatype):(this._data=f.toArray(),this._size=f.size(),this._datatype=d||f._datatype);else if(f&&er(f.data)&&er(f.size))this._data=f.data,this._size=f.size,m0(this._data,this._size),this._datatype=d||f.datatype;else if(er(f))this._data=p(f),this._size=Mi(this._data),m0(this._data,this._size),this._datatype=d;else{if(f)throw new TypeError("Unsupported type of data ("+uu(f)+")");this._data=[],this._size=[0],this._datatype=d}}r.prototype=new e,r.prototype.createDenseMatrix=function(f,d){return new r(f,d)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return As(this._data,uu)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(f,d){return new r(f,d)},r.prototype.subset=function(f,d,h){switch(arguments.length){case 1:return n(this,f);case 2:case 3:return a(this,f,d,h);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(f){if(!er(f))throw new TypeError("Array expected");if(f.length!==this._size.length)throw new Rt(f.length,this._size.length);for(var d=0;d<f.length;d++)tr(f[d],this._size[d]);for(var h=this._data,v=0,b=f.length;v<b;v++){var g=f[v];tr(g,h.length),h=h[g]}return h},r.prototype.set=function(f,d,h){if(!er(f))throw new TypeError("Array expected");if(f.length<this._size.length)throw new Rt(f.length,this._size.length,"<");var v,b,g,_=f.map(function(S){return S+1});l(this,_,h);var D=this._data;for(v=0,b=f.length-1;v<b;v++)g=f[v],tr(g,D.length),D=D[g];return g=f[f.length-1],tr(g,D.length),D[g]=d,this};function n(f,d){if(!Tf(d))throw new TypeError("Invalid index");var h=d.isScalar();if(h)return f.get(d.min());var v=d.size();if(v.length!==f._size.length)throw new Rt(v.length,f._size.length);for(var b=d.min(),g=d.max(),_=0,D=f._size.length;_<D;_++)tr(b[_],f._size[_]),tr(g[_],f._size[_]);return new r(i(f._data,d,v.length,0),f._datatype)}function i(f,d,h,v){var b=v===h-1,g=d.dimension(v);return b?g.map(function(_){return tr(_,f.length),f[_]}).valueOf():g.map(function(_){tr(_,f.length);var D=f[_];return i(D,d,h,v+1)}).valueOf()}function a(f,d,h,v){if(!d||d.isIndex!==!0)throw new TypeError("Invalid index");var b=d.size(),g=d.isScalar(),_;if(Jr(h)?(_=h.size(),h=h.valueOf()):_=Mi(h),g){if(_.length!==0)throw new TypeError("Scalar expected");f.set(d.min(),h,v)}else{if(b.length<f._size.length)throw new Rt(b.length,f._size.length,"<");if(_.length<b.length){for(var D=0,S=0;b[D]===1&&_[D]===1;)D++;for(;b[D]===1;)S++,D++;h=xp(h,b.length,S,_)}if(!ys(b,_))throw new Rt(b,_,">");var y=d.max().map(function(C){return C+1});l(f,y,v);var F=b.length,A=0;s(f._data,d,h,F,A)}return f}function s(f,d,h,v,b){var g=b===v-1,_=d.dimension(b);g?_.forEach(function(D,S){tr(D),f[D]=h[S[0]]}):_.forEach(function(D,S){tr(D),s(f[D],d,h[S[0]],v,b+1)})}r.prototype.resize=function(f,d,h){if(!ws(f))throw new TypeError("Array or Matrix expected");var v=f.valueOf().map(g=>Array.isArray(g)&&g.length===1?g[0]:g),b=h?this.clone():this;return o(b,v,d)};function o(f,d,h){if(d.length===0){for(var v=f._data;er(v);)v=v[0];return v}return f._size=d.slice(0),f._data=_0(f._data,f._size,h),f}r.prototype.reshape=function(f,d){var h=d?this.clone():this;h._data=o2(h._data,f);var v=h._size.reduce((b,g)=>b*g);return h._size=Nf(f,v),h};function l(f,d,h){for(var v=f._size.slice(0),b=!1;v.length<d.length;)v.push(0),b=!0;for(var g=0,_=d.length;g<_;g++)d[g]>v[g]&&(v[g]=d[g],b=!0);b&&o(f,v,h)}r.prototype.clone=function(){var f=new r({data:Fr(this._data),size:Fr(this._size),datatype:this._datatype});return f},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(f){var d=this,h=Qp(f),v=function _(D,S){return er(D)?D.map(function(y,F){return _(y,S.concat(F))}):h===1?f(D):h===2?f(D,S):f(D,S,d)},b=v(this._data,[]),g=this._datatype!==void 0?As(b,uu):void 0;return new r(b,g)},r.prototype.forEach=function(f){var d=this,h=function v(b,g){er(b)?b.forEach(function(_,D){v(_,g.concat(D))}):f(b,g,d)};h(this._data,[])},r.prototype[Symbol.iterator]=function*(){var f=function*d(h,v){if(er(h))for(var b=0;b<h.length;b++)yield*d(h[b],v.concat(b));else yield{value:h,index:v}};yield*f(this._data,[])},r.prototype.rows=function(){var f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var h=this._data;for(var v of h)f.push(new r([v],this._datatype));return f},r.prototype.columns=function(){var f=this,d=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var v=this._data,b=function(D){var S=v.map(y=>[y[D]]);d.push(new r(S,f._datatype))},g=0;g<h[1];g++)b(g);return d},r.prototype.toArray=function(){return Fr(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(f){return rn(this._data,f)},r.prototype.toString=function(){return rn(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(f){if(f){if(Sn(f)&&(f=f.toNumber()),!rr(f)||!Sr(f))throw new TypeError("The parameter k must be an integer number")}else f=0;for(var d=f>0?f:0,h=f<0?-f:0,v=this._size[0],b=this._size[1],g=Math.min(v-h,b-d),_=[],D=0;D<g;D++)_[D]=this._data[D+h][D+d];return new r({data:_,size:[g],datatype:this._datatype})},r.diagonal=function(f,d,h,v){if(!er(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(M){if(Sn(M)&&(M=M.toNumber()),!rr(M)||!Sr(M)||M<1)throw new Error("Size values must be positive integers");return M}),h){if(Sn(h)&&(h=h.toNumber()),!rr(h)||!Sr(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var b=h>0?h:0,g=h<0?-h:0,_=f[0],D=f[1],S=Math.min(_-g,D-b),y;if(er(d)){if(d.length!==S)throw new Error("Invalid value array length");y=function(O){return d[O]}}else if(Jr(d)){var F=d.size();if(F.length!==1||F[0]!==S)throw new Error("Invalid matrix length");y=function(O){return d.get([O])}}else y=function(){return d};v||(v=Sn(y(0))?y(0).mul(0):0);var A=[];if(f.length>0){A=_0(A,f,v);for(var C=0;C<S;C++)A[C+g][C+b]=y(C)}return new r({data:A,size:[_,D]})},r.fromJSON=function(f){return new r(f)},r.prototype.swapRows=function(f,d){if(!rr(f)||!Sr(f)||!rr(d)||!Sr(d))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return tr(f,this._size[0]),tr(d,this._size[0]),r._swapRows(f,d,this._data),this},r._swapRows=function(f,d,h){var v=h[f];h[f]=h[d],h[d]=v};function p(f){for(var d=0,h=f.length;d<h;d++){var v=f[d];er(v)?f[d]=p(v):v&&v.isMatrix===!0&&(f[d]=p(v.valueOf()))}return f}return r},{isClass:!0});function to(t,e,r){return t&&typeof t.map=="function"?t.map(function(n){return to(n,e)}):e(t)}var y0="isInteger",NE=["typed"],xE=kt(y0,NE,t=>{var{typed:e}=t;return e(y0,{number:Sr,BigNumber:function(n){return n.isInt()},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":e.referToSelf(r=>n=>to(n,r))})}),RE="number",Xp="number, number";function e1(t,e){return t+e}e1.signature=Xp;function t1(t,e){return t*e}t1.signature=Xp;function r1(t){return-t}r1.signature=RE;function LE(t,e,r){if(r==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return n.lte(i.times(r))}return!1}function UE(t,e,r){return Es(t.re,e.re,r)&&Es(t.im,e.im,r)}var VE=kt("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),Bs="equalScalar",jE=["typed","config"],zE=kt(Bs,jE,t=>{var{typed:e,config:r}=t,n=VE({typed:e});return e(Bs,{"boolean, boolean":function(a,s){return a===s},"number, number":function(a,s){return Es(a,s,r.epsilon)},"BigNumber, BigNumber":function(a,s){return a.eq(s)||LE(a,s,r.epsilon)},"Fraction, Fraction":function(a,s){return a.equals(s)},"Complex, Complex":function(a,s){return UE(a,s,r.epsilon)}},n)});kt(Bs,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Bs,{"number, number":function(i,a){return Es(i,a,r.epsilon)}})});var qE="SparseMatrix",WE=["typed","equalScalar","Matrix"],HE=kt(qE,WE,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(g,_){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(_&&!Gn(_))throw new Error("Invalid datatype: "+_);if(Jr(g))a(this,g,_);else if(g&&er(g.index)&&er(g.ptr)&&er(g.size))this._values=g.values,this._index=g.index,this._ptr=g.ptr,this._size=g.size,this._datatype=_||g.datatype;else if(er(g))s(this,g,_);else{if(g)throw new TypeError("Unsupported type of data ("+uu(g)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=_}}function a(g,_,D){_.type==="SparseMatrix"?(g._values=_._values?Fr(_._values):void 0,g._index=Fr(_._index),g._ptr=Fr(_._ptr),g._size=Fr(_._size),g._datatype=D||_._datatype):s(g,_.valueOf(),D||_._datatype)}function s(g,_,D){g._values=[],g._index=[],g._ptr=[],g._datatype=D;var S=_.length,y=0,F=r,A=0;if(Gn(D)&&(F=e.find(r,[D,D])||r,A=e.convert(0,D)),S>0){var C=0;do{g._ptr.push(g._index.length);for(var M=0;M<S;M++){var O=_[M];if(er(O)){if(C===0&&y<O.length&&(y=O.length),C<O.length){var N=O[C];F(N,A)||(g._values.push(N),g._index.push(M))}}else C===0&&y<1&&(y=1),F(O,A)||(g._values.push(O),g._index.push(M))}C++}while(C<y)}g._ptr.push(g._index.length),g._size=[S,y]}i.prototype=new n,i.prototype.createSparseMatrix=function(g,_){return new i(g,_)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return As(this._values,uu)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(g,_){return new i(g,_)},i.prototype.density=function(){var g=this._size[0],_=this._size[1];return g!==0&&_!==0?this._index.length/(g*_):0},i.prototype.subset=function(g,_,D){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,g);case 2:case 3:return l(this,g,_,D);default:throw new SyntaxError("Wrong number of arguments")}};function o(g,_){if(!Tf(_))throw new TypeError("Invalid index");var D=_.isScalar();if(D)return g.get(_.min());var S=_.size();if(S.length!==g._size.length)throw new Rt(S.length,g._size.length);var y,F,A,C,M=_.min(),O=_.max();for(y=0,F=g._size.length;y<F;y++)tr(M[y],g._size[y]),tr(O[y],g._size[y]);var N=g._values,q=g._index,Z=g._ptr,Q=_.dimension(0),V=_.dimension(1),L=[],z=[];Q.forEach(function(ae,pe){z[ae]=pe[0],L[ae]=!0});var U=N?[]:void 0,J=[],ie=[];return V.forEach(function(ae){for(ie.push(J.length),A=Z[ae],C=Z[ae+1];A<C;A++)y=q[A],L[y]===!0&&(J.push(z[y]),U&&U.push(N[A]))}),ie.push(J.length),new i({values:U,index:J,ptr:ie,size:S,datatype:g._datatype})}function l(g,_,D,S){if(!_||_.isIndex!==!0)throw new TypeError("Invalid index");var y=_.size(),F=_.isScalar(),A;if(Jr(D)?(A=D.size(),D=D.toArray()):A=Mi(D),F){if(A.length!==0)throw new TypeError("Scalar expected");g.set(_.min(),D,S)}else{if(y.length!==1&&y.length!==2)throw new Rt(y.length,g._size.length,"<");if(A.length<y.length){for(var C=0,M=0;y[C]===1&&A[C]===1;)C++;for(;y[C]===1;)M++,C++;D=xp(D,y.length,M,A)}if(!ys(y,A))throw new Rt(y,A,">");if(y.length===1){var O=_.dimension(0);O.forEach(function(Z,Q){tr(Z),g.set([Z,0],D[Q[0]],S)})}else{var N=_.dimension(0),q=_.dimension(1);N.forEach(function(Z,Q){tr(Z),q.forEach(function(V,L){tr(V),g.set([Z,V],D[Q[0]][L[0]],S)})})}}return g}i.prototype.get=function(g){if(!er(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new Rt(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var _=g[0],D=g[1];tr(_,this._size[0]),tr(D,this._size[1]);var S=p(_,this._ptr[D],this._ptr[D+1],this._index);return S<this._ptr[D+1]&&this._index[S]===_?this._values[S]:0},i.prototype.set=function(g,_,D){if(!er(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new Rt(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var S=g[0],y=g[1],F=this._size[0],A=this._size[1],C=r,M=0;Gn(this._datatype)&&(C=e.find(r,[this._datatype,this._datatype])||r,M=e.convert(0,this._datatype)),(S>F-1||y>A-1)&&(h(this,Math.max(S+1,F),Math.max(y+1,A),D),F=this._size[0],A=this._size[1]),tr(S,F),tr(y,A);var O=p(S,this._ptr[y],this._ptr[y+1],this._index);return O<this._ptr[y+1]&&this._index[O]===S?C(_,M)?f(O,y,this._values,this._index,this._ptr):this._values[O]=_:C(_,M)||d(O,S,y,_,this._values,this._index,this._ptr),this};function p(g,_,D,S){if(D-_===0)return D;for(var y=_;y<D;y++)if(S[y]===g)return y;return _}function f(g,_,D,S,y){D.splice(g,1),S.splice(g,1);for(var F=_+1;F<y.length;F++)y[F]--}function d(g,_,D,S,y,F,A){y.splice(g,0,S),F.splice(g,0,_);for(var C=D+1;C<A.length;C++)A[C]++}i.prototype.resize=function(g,_,D){if(!ws(g))throw new TypeError("Array or Matrix expected");var S=g.valueOf().map(F=>Array.isArray(F)&&F.length===1?F[0]:F);if(S.length!==2)throw new Error("Only two dimensions matrix are supported");S.forEach(function(F){if(!rr(F)||!Sr(F)||F<0)throw new TypeError("Invalid size, must contain positive integers (size: "+rn(S)+")")});var y=D?this.clone():this;return h(y,S[0],S[1],_)};function h(g,_,D,S){var y=S||0,F=r,A=0;Gn(g._datatype)&&(F=e.find(r,[g._datatype,g._datatype])||r,A=e.convert(0,g._datatype),y=e.convert(y,g._datatype));var C=!F(y,A),M=g._size[0],O=g._size[1],N,q,Z;if(D>O){for(q=O;q<D;q++)if(g._ptr[q]=g._values.length,C)for(N=0;N<M;N++)g._values.push(y),g._index.push(N);g._ptr[D]=g._values.length}else D<O&&(g._ptr.splice(D+1,O-D),g._values.splice(g._ptr[D],g._values.length),g._index.splice(g._ptr[D],g._index.length));if(O=D,_>M){if(C){var Q=0;for(q=0;q<O;q++){g._ptr[q]=g._ptr[q]+Q,Z=g._ptr[q+1]+Q;var V=0;for(N=M;N<_;N++,V++)g._values.splice(Z+V,0,y),g._index.splice(Z+V,0,N),Q++}g._ptr[O]=g._values.length}}else if(_<M){var L=0;for(q=0;q<O;q++){g._ptr[q]=g._ptr[q]-L;var z=g._ptr[q],U=g._ptr[q+1]-L;for(Z=z;Z<U;Z++)N=g._index[Z],N>_-1&&(g._values.splice(Z,1),g._index.splice(Z,1),L++)}g._ptr[q]=g._values.length}return g._size[0]=_,g._size[1]=D,g}i.prototype.reshape=function(g,_){if(!er(g))throw new TypeError("Array expected");if(g.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");g.forEach(function(ae){if(!rr(ae)||!Sr(ae)||ae<=-2||ae===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+rn(g)+")")});var D=this._size[0]*this._size[1];g=Nf(g,D);var S=g[0]*g[1];if(D!==S)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var y=_?this.clone():this;if(this._size[0]===g[0]&&this._size[1]===g[1])return y;for(var F=[],A=0;A<y._ptr.length;A++)for(var C=0;C<y._ptr[A+1]-y._ptr[A];C++)F.push(A);for(var M=y._values.slice(),O=y._index.slice(),N=0;N<y._index.length;N++){var q=O[N],Z=F[N],Q=q*y._size[1]+Z;F[N]=Q%g[1],O[N]=Math.floor(Q/g[1])}y._values.length=0,y._index.length=0,y._ptr.length=g[1]+1,y._size=g.slice();for(var V=0;V<y._ptr.length;V++)y._ptr[V]=0;for(var L=0;L<M.length;L++){var z=O[L],U=F[L],J=M[L],ie=p(z,y._ptr[U],y._ptr[U+1],y._index);d(ie,z,U,J,y._values,y._index,y._ptr)}return y},i.prototype.clone=function(){var g=new i({values:this._values?Fr(this._values):void 0,index:Fr(this._index),ptr:Fr(this._ptr),size:Fr(this._size),datatype:this._datatype});return g},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(g,_){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var D=this,S=this._size[0],y=this._size[1],F=Qp(g),A=function(M,O,N){return F===1?g(M):F===2?g(M,[O,N]):g(M,[O,N],D)};return v(this,0,S-1,0,y-1,A,_)};function v(g,_,D,S,y,F,A){var C=[],M=[],O=[],N=r,q=0;Gn(g._datatype)&&(N=e.find(r,[g._datatype,g._datatype])||r,q=e.convert(0,g._datatype));for(var Z=function(Be,je,Le){Be=F(Be,je,Le),N(Be,q)||(C.push(Be),M.push(je))},Q=S;Q<=y;Q++){O.push(C.length);var V=g._ptr[Q],L=g._ptr[Q+1];if(A)for(var z=V;z<L;z++){var U=g._index[z];U>=_&&U<=D&&Z(g._values[z],U-_,Q-S)}else{for(var J={},ie=V;ie<L;ie++){var ae=g._index[ie];J[ae]=g._values[ie]}for(var pe=_;pe<=D;pe++){var De=pe in J?J[pe]:0;Z(De,pe-_,Q-S)}}}return O.push(C.length),new i({values:C,index:M,ptr:O,size:[D-_+1,y-S+1]})}i.prototype.forEach=function(g,_){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var D=this,S=this._size[0],y=this._size[1],F=0;F<y;F++){var A=this._ptr[F],C=this._ptr[F+1];if(_)for(var M=A;M<C;M++){var O=this._index[M];g(this._values[M],[O,F],D)}else{for(var N={},q=A;q<C;q++){var Z=this._index[q];N[Z]=this._values[q]}for(var Q=0;Q<S;Q++){var V=Q in N?N[Q]:0;g(V,[Q,F],D)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var g=this._size[1],_=0;_<g;_++)for(var D=this._ptr[_],S=this._ptr[_+1],y=D;y<S;y++){var F=this._index[y];yield{value:this._values[y],index:[F,_]}}},i.prototype.toArray=function(){return b(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return b(this._values,this._index,this._ptr,this._size,!1)};function b(g,_,D,S,y){var F=S[0],A=S[1],C=[],M,O;for(M=0;M<F;M++)for(C[M]=[],O=0;O<A;O++)C[M][O]=0;for(O=0;O<A;O++)for(var N=D[O],q=D[O+1],Z=N;Z<q;Z++)M=_[Z],C[M][O]=g?y?Fr(g[Z]):g[Z]:1;return C}return i.prototype.format=function(g){for(var _=this._size[0],D=this._size[1],S=this.density(),y="Sparse Matrix ["+rn(_,g)+" x "+rn(D,g)+"] density: "+rn(S,g)+`
`,F=0;F<D;F++)for(var A=this._ptr[F],C=this._ptr[F+1],M=A;M<C;M++){var O=this._index[M];y+=`
    (`+rn(O,g)+", "+rn(F,g)+") ==> "+(this._values?rn(this._values[M],g):"X")}return y},i.prototype.toString=function(){return rn(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(g){if(g){if(Sn(g)&&(g=g.toNumber()),!rr(g)||!Sr(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var _=g>0?g:0,D=g<0?-g:0,S=this._size[0],y=this._size[1],F=Math.min(S-D,y-_),A=[],C=[],M=[];M[0]=0;for(var O=_;O<y&&A.length<F;O++)for(var N=this._ptr[O],q=this._ptr[O+1],Z=N;Z<q;Z++){var Q=this._index[Z];if(Q===O-_+D){A.push(this._values[Z]),C[A.length-1]=Q-D;break}}return M.push(A.length),new i({values:A,index:C,ptr:M,size:[F,1]})},i.fromJSON=function(g){return new i(g)},i.diagonal=function(g,_,D,S,y){if(!er(g))throw new TypeError("Array expected, size parameter");if(g.length!==2)throw new Error("Only two dimensions matrix are supported");if(g=g.map(function(ae){if(Sn(ae)&&(ae=ae.toNumber()),!rr(ae)||!Sr(ae)||ae<1)throw new Error("Size values must be positive integers");return ae}),D){if(Sn(D)&&(D=D.toNumber()),!rr(D)||!Sr(D))throw new TypeError("The parameter k must be an integer number")}else D=0;var F=r,A=0;Gn(y)&&(F=e.find(r,[y,y])||r,A=e.convert(0,y));var C=D>0?D:0,M=D<0?-D:0,O=g[0],N=g[1],q=Math.min(O-M,N-C),Z;if(er(_)){if(_.length!==q)throw new Error("Invalid value array length");Z=function(pe){return _[pe]}}else if(Jr(_)){var Q=_.size();if(Q.length!==1||Q[0]!==q)throw new Error("Invalid matrix length");Z=function(pe){return _.get([pe])}}else Z=function(){return _};for(var V=[],L=[],z=[],U=0;U<N;U++){z.push(V.length);var J=U-C;if(J>=0&&J<q){var ie=Z(J);F(ie,A)||(L.push(J+M),V.push(ie))}}return z.push(V.length),new i({values:V,index:L,ptr:z,size:[O,N]})},i.prototype.swapRows=function(g,_){if(!rr(g)||!Sr(g)||!rr(_)||!Sr(_))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return tr(g,this._size[0]),tr(_,this._size[0]),i._swapRows(g,_,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(g,_,D,S,y){for(var F=S[g],A=S[g+1],C=F;C<A;C++)y(D[C],_[C])},i._swapRows=function(g,_,D,S,y,F){for(var A=0;A<D;A++){var C=F[A],M=F[A+1],O=p(g,C,M,y),N=p(_,C,M,y);if(O<M&&N<M&&y[O]===g&&y[N]===_){if(S){var q=S[O];S[O]=S[N],S[N]=q}continue}if(O<M&&y[O]===g&&(N>=M||y[N]!==_)){var Z=S?S[O]:void 0;y.splice(N,0,_),S&&S.splice(N,0,Z),y.splice(N<=O?O+1:O,1),S&&S.splice(N<=O?O+1:O,1);continue}if(N<M&&y[N]===_&&(O>=M||y[O]!==g)){var Q=S?S[N]:void 0;y.splice(O,0,g),S&&S.splice(O,0,Q),y.splice(O<=N?N+1:N,1),S&&S.splice(O<=N?N+1:N,1)}}},i},{isClass:!0}),E0="matrix",GE=["typed","Matrix","DenseMatrix","SparseMatrix"],KE=kt(E0,GE,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(E0,{"":function(){return a([])},string:function(o){return a([],o)},"string, string":function(o,l){return a([],o,l)},Array:function(o){return a(o)},Matrix:function(o){return a(o,o.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(s,o,l){if(o==="dense"||o==="default"||o===void 0)return new n(s,l);if(o==="sparse")return new i(s,l);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),A0="unaryMinus",$E=["typed"],YE=kt(A0,$E,t=>{var{typed:e}=t;return e(A0,{number:r1,"Complex | BigNumber | Fraction":r=>r.neg(),Unit:e.referToSelf(r=>n=>{var i=n.clone();return i.value=e.find(r,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(r=>n=>to(n,r))})}),C0="addScalar",ZE=["typed"],JE=kt(C0,ZE,t=>{var{typed:e}=t;return e(C0,{"number, number":e1,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),QE="matAlgo11xS0s",XE=["typed","equalScalar"],eA=kt(QE,XE,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s,o){var l=i._values,p=i._index,f=i._ptr,d=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var v=d[0],b=d[1],g,_=r,D=0,S=s;typeof h=="string"&&(g=h,_=e.find(r,[g,g]),D=e.convert(0,g),a=e.convert(a,g),S=e.find(s,[g,g]));for(var y=[],F=[],A=[],C=0;C<b;C++){A[C]=F.length;for(var M=f[C],O=f[C+1],N=M;N<O;N++){var q=p[N],Z=o?S(a,l[N]):S(l[N],a);_(Z,D)||(F.push(q),y.push(Z))}}return A[b]=F.length,i.createSparseMatrix({values:y,index:F,ptr:A,size:[v,b],datatype:g})}}),tA="matAlgo12xSfs",rA=["typed","DenseMatrix"],nA=kt(tA,rA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,s,o){var l=i._values,p=i._index,f=i._ptr,d=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var v=d[0],b=d[1],g,_=s;typeof h=="string"&&(g=h,a=e.convert(a,g),_=e.find(s,[g,g]));for(var D=[],S=[],y=[],F=0;F<b;F++){for(var A=F+1,C=f[F],M=f[F+1],O=C;O<M;O++){var N=p[O];S[N]=l[O],y[N]=A}for(var q=0;q<v;q++)F===0&&(D[q]=[]),y[q]===A?D[q][F]=o?_(a,S[q]):_(S[q],a):D[q][F]=o?_(a,0):_(0,a)}return new r({data:D,size:[v,b],datatype:g})}}),iA="matAlgo14xDs",aA=["typed"],n1=kt(iA,aA,t=>{var{typed:e}=t;return function(i,a,s,o){var l=i._data,p=i._size,f=i._datatype,d,h=s;typeof f=="string"&&(d=f,a=e.convert(a,d),h=e.find(s,[d,d]));var v=p.length>0?r(h,0,p,p[0],l,a,o):[];return i.createDenseMatrix({data:v,size:Fr(p),datatype:d})};function r(n,i,a,s,o,l,p){var f=[];if(i===a.length-1)for(var d=0;d<s;d++)f[d]=p?n(l,o[d]):n(o[d],l);else for(var h=0;h<s;h++)f[h]=r(n,i+1,a,a[i+1],o[h],l,p);return f}}),uA="matAlgo01xDSid",sA=["typed"],i1=kt(uA,sA,t=>{var{typed:e}=t;return function(n,i,a,s){var o=n._data,l=n._size,p=n._datatype,f=i._values,d=i._index,h=i._ptr,v=i._size,b=i._datatype;if(l.length!==v.length)throw new Rt(l.length,v.length);if(l[0]!==v[0]||l[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+v+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=l[0],_=l[1],D=typeof p=="string"&&p===b?p:void 0,S=D?e.find(a,[D,D]):a,y,F,A=[];for(y=0;y<g;y++)A[y]=[];var C=[],M=[];for(F=0;F<_;F++){for(var O=F+1,N=h[F],q=h[F+1],Z=N;Z<q;Z++)y=d[Z],C[y]=s?S(f[Z],o[y][F]):S(o[y][F],f[Z]),M[y]=O;for(y=0;y<g;y++)M[y]===O?A[y][F]=C[y]:A[y][F]=o[y][F]}return n.createDenseMatrix({data:A,size:[g,_],datatype:D})}}),oA="matAlgo04xSidSid",lA=["typed","equalScalar"],fA=kt(oA,lA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s){var o=i._values,l=i._index,p=i._ptr,f=i._size,d=i._datatype,h=a._values,v=a._index,b=a._ptr,g=a._size,_=a._datatype;if(f.length!==g.length)throw new Rt(f.length,g.length);if(f[0]!==g[0]||f[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+g+")");var D=f[0],S=f[1],y,F=r,A=0,C=s;typeof d=="string"&&d===_&&(y=d,F=e.find(r,[y,y]),A=e.convert(0,y),C=e.find(s,[y,y]));var M=o&&h?[]:void 0,O=[],N=[],q=o&&h?[]:void 0,Z=o&&h?[]:void 0,Q=[],V=[],L,z,U,J,ie;for(z=0;z<S;z++){N[z]=O.length;var ae=z+1;for(J=p[z],ie=p[z+1],U=J;U<ie;U++)L=l[U],O.push(L),Q[L]=ae,q&&(q[L]=o[U]);for(J=b[z],ie=b[z+1],U=J;U<ie;U++)if(L=v[U],Q[L]===ae){if(q){var pe=C(q[L],h[U]);F(pe,A)?Q[L]=null:q[L]=pe}}else O.push(L),V[L]=ae,Z&&(Z[L]=h[U]);if(q&&Z)for(U=N[z];U<O.length;)L=O[U],Q[L]===ae?(M[U]=q[L],U++):V[L]===ae?(M[U]=Z[L],U++):O.splice(U,1)}return N[S]=O.length,i.createSparseMatrix({values:M,index:O,ptr:N,size:[D,S],datatype:y})}}),cA="matAlgo10xSids",hA=["typed","DenseMatrix"],a1=kt(cA,hA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,s,o){var l=i._values,p=i._index,f=i._ptr,d=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var v=d[0],b=d[1],g,_=s;typeof h=="string"&&(g=h,a=e.convert(a,g),_=e.find(s,[g,g]));for(var D=[],S=[],y=[],F=0;F<b;F++){for(var A=F+1,C=f[F],M=f[F+1],O=C;O<M;O++){var N=p[O];S[N]=l[O],y[N]=A}for(var q=0;q<v;q++)F===0&&(D[q]=[]),y[q]===A?D[q][F]=o?_(a,S[q]):_(S[q],a):D[q][F]=a}return new r({data:D,size:[v,b],datatype:g})}}),dA="matAlgo13xDD",pA=["typed"],vA=kt(dA,pA,t=>{var{typed:e}=t;return function(i,a,s){var o=i._data,l=i._size,p=i._datatype,f=a._data,d=a._size,h=a._datatype,v=[];if(l.length!==d.length)throw new Rt(l.length,d.length);for(var b=0;b<l.length;b++){if(l[b]!==d[b])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");v[b]=l[b]}var g,_=s;typeof p=="string"&&p===h&&(g=p,_=e.find(s,[g,g]));var D=v.length>0?r(_,0,v,v[0],o,f):[];return i.createDenseMatrix({data:D,size:v,datatype:g})};function r(n,i,a,s,o,l){var p=[];if(i===a.length-1)for(var f=0;f<s;f++)p[f]=n(o[f],l[f]);else for(var d=0;d<s;d++)p[d]=r(n,i+1,a,a[i+1],o[d],l[d]);return p}}),gA="broadcast",mA=["concat"],_A=kt(gA,mA,t=>{var{concat:e}=t;return function(a,s){var o=Math.max(a._size.length,s._size.length);if(a._size.length===s._size.length&&a._size.every((_,D)=>_===s._size[D]))return[a,s];for(var l=r(a._size,o,0),p=r(s._size,o,0),f=[],d=0;d<o;d++)f[d]=Math.max(l[d],p[d]);for(var h=0;h<o;h++)i(l,f,h),i(p,f,h);var v=a.clone(),b=s.clone();v._size.length<o?v.reshape(r(v._size,o,1)):b._size.length<o&&b.reshape(r(b._size,o,1));for(var g=0;g<o;g++)v._size[g]<f[g]&&(v=n(v,f[g],g)),b._size[g]<f[g]&&(b=n(b,f[g],g));return[v,b]};function r(a,s,o){return[...Array(s-a.length).fill(o),...a]}function n(a,s,o){return e(...Array(s).fill(a),o)}function i(a,s,o){if(a[o]<s[o]&a[o]>1)throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(a,") not possible to broadcast dimension ").concat(o," with size ").concat(a[o]," to size ").concat(s[o]))}}),bA="matrixAlgorithmSuite",DA=["typed","matrix","concat"],u1=kt(bA,DA,t=>{var{typed:e,matrix:r,concat:n}=t,i=vA({typed:e}),a=n1({typed:e}),s=_A({concat:n});return function(l){var p=l.elop,f=l.SD||l.DS,d;p?(d={"DenseMatrix, DenseMatrix":(g,_)=>i(...s(g,_),p),"Array, Array":(g,_)=>i(...s(r(g),r(_)),p).valueOf(),"Array, DenseMatrix":(g,_)=>i(...s(r(g),_),p),"DenseMatrix, Array":(g,_)=>i(...s(g,r(_)),p)},l.SS&&(d["SparseMatrix, SparseMatrix"]=(g,_)=>l.SS(...s(g,_),p,!1)),l.DS&&(d["DenseMatrix, SparseMatrix"]=(g,_)=>l.DS(...s(g,_),p,!1),d["Array, SparseMatrix"]=(g,_)=>l.DS(...s(r(g),_),p,!1)),f&&(d["SparseMatrix, DenseMatrix"]=(g,_)=>f(...s(_,g),p,!0),d["SparseMatrix, Array"]=(g,_)=>f(...s(r(_),g),p,!0))):(d={"DenseMatrix, DenseMatrix":e.referToSelf(g=>(_,D)=>i(...s(_,D),g)),"Array, Array":e.referToSelf(g=>(_,D)=>i(...s(r(_),r(D)),g).valueOf()),"Array, DenseMatrix":e.referToSelf(g=>(_,D)=>i(...s(r(_),D),g)),"DenseMatrix, Array":e.referToSelf(g=>(_,D)=>i(...s(_,r(D)),g))},l.SS&&(d["SparseMatrix, SparseMatrix"]=e.referToSelf(g=>(_,D)=>l.SS(...s(_,D),g,!1))),l.DS&&(d["DenseMatrix, SparseMatrix"]=e.referToSelf(g=>(_,D)=>l.DS(...s(_,D),g,!1)),d["Array, SparseMatrix"]=e.referToSelf(g=>(_,D)=>l.DS(...s(r(_),D),g,!1))),f&&(d["SparseMatrix, DenseMatrix"]=e.referToSelf(g=>(_,D)=>f(...s(D,_),g,!0)),d["SparseMatrix, Array"]=e.referToSelf(g=>(_,D)=>f(...s(r(D),_),g,!0))));var h=l.scalar||"any",v=l.Ds||l.Ss;v&&(p?(d["DenseMatrix,"+h]=(g,_)=>a(g,_,p,!1),d[h+", DenseMatrix"]=(g,_)=>a(_,g,p,!0),d["Array,"+h]=(g,_)=>a(r(g),_,p,!1).valueOf(),d[h+", Array"]=(g,_)=>a(r(_),g,p,!0).valueOf()):(d["DenseMatrix,"+h]=e.referToSelf(g=>(_,D)=>a(_,D,g,!1)),d[h+", DenseMatrix"]=e.referToSelf(g=>(_,D)=>a(D,_,g,!0)),d["Array,"+h]=e.referToSelf(g=>(_,D)=>a(r(_),D,g,!1).valueOf()),d[h+", Array"]=e.referToSelf(g=>(_,D)=>a(r(D),_,g,!0).valueOf())));var b=l.sS!==void 0?l.sS:l.Ss;return p?(l.Ss&&(d["SparseMatrix,"+h]=(g,_)=>l.Ss(g,_,p,!1)),b&&(d[h+", SparseMatrix"]=(g,_)=>b(_,g,p,!0))):(l.Ss&&(d["SparseMatrix,"+h]=e.referToSelf(g=>(_,D)=>l.Ss(_,D,g,!1))),b&&(d[h+", SparseMatrix"]=e.referToSelf(g=>(_,D)=>b(D,_,g,!0)))),p&&p.signatures&&Ky(d,p.signatures),d}}),wA="matAlgo03xDSf",yA=["typed"],EA=kt(wA,yA,t=>{var{typed:e}=t;return function(n,i,a,s){var o=n._data,l=n._size,p=n._datatype,f=i._values,d=i._index,h=i._ptr,v=i._size,b=i._datatype;if(l.length!==v.length)throw new Rt(l.length,v.length);if(l[0]!==v[0]||l[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+v+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=l[0],_=l[1],D,S=0,y=a;typeof p=="string"&&p===b&&(D=p,S=e.convert(0,D),y=e.find(a,[D,D]));for(var F=[],A=0;A<g;A++)F[A]=[];for(var C=[],M=[],O=0;O<_;O++){for(var N=O+1,q=h[O],Z=h[O+1],Q=q;Q<Z;Q++){var V=d[Q];C[V]=s?y(f[Q],o[V][O]):y(o[V][O],f[Q]),M[V]=N}for(var L=0;L<g;L++)M[L]===N?F[L][O]=C[L]:F[L][O]=s?y(S,o[L][O]):y(o[L][O],S)}return n.createDenseMatrix({data:F,size:[g,_],datatype:D})}}),AA="matAlgo05xSfSf",CA=["typed","equalScalar"],FA=kt(AA,CA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,s){var o=i._values,l=i._index,p=i._ptr,f=i._size,d=i._datatype,h=a._values,v=a._index,b=a._ptr,g=a._size,_=a._datatype;if(f.length!==g.length)throw new Rt(f.length,g.length);if(f[0]!==g[0]||f[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+g+")");var D=f[0],S=f[1],y,F=r,A=0,C=s;typeof d=="string"&&d===_&&(y=d,F=e.find(r,[y,y]),A=e.convert(0,y),C=e.find(s,[y,y]));var M=o&&h?[]:void 0,O=[],N=[],q=M?[]:void 0,Z=M?[]:void 0,Q=[],V=[],L,z,U,J;for(z=0;z<S;z++){N[z]=O.length;var ie=z+1;for(U=p[z],J=p[z+1];U<J;U++)L=l[U],O.push(L),Q[L]=ie,q&&(q[L]=o[U]);for(U=b[z],J=b[z+1];U<J;U++)L=v[U],Q[L]!==ie&&O.push(L),V[L]=ie,Z&&(Z[L]=h[U]);if(M)for(U=N[z];U<O.length;){L=O[U];var ae=Q[L],pe=V[L];if(ae===ie||pe===ie){var De=ae===ie?q[L]:A,Ae=pe===ie?Z[L]:A,Be=C(De,Ae);F(Be,A)?O.splice(U,1):(M.push(Be),U++)}}}return N[S]=O.length,i.createSparseMatrix({values:M,index:O,ptr:N,size:[D,S],datatype:y})}}),SA="multiplyScalar",BA=["typed"],OA=kt(SA,BA,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":t1,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),F0="multiply",MA=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],PA=kt(F0,MA,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:a,dot:s}=t,o=eA({typed:e,equalScalar:a}),l=n1({typed:e});function p(A,C){switch(A.length){case 1:switch(C.length){case 1:if(A[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(A[0]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+A[0]+") must match Matrix rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;case 2:switch(C.length){case 1:if(A[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+A[1]+") must match Vector length ("+C[0]+")");break;case 2:if(A[1]!==C[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+A[1]+") must match Matrix B rows ("+C[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+C.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+A.length+" dimensions)")}}function f(A,C,M){if(M===0)throw new Error("Cannot multiply two empty vectors");return s(A,C)}function d(A,C){if(C.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return h(A,C)}function h(A,C){var M=A._data,O=A._size,N=A._datatype,q=C._data,Z=C._size,Q=C._datatype,V=O[0],L=Z[1],z,U=n,J=i;N&&Q&&N===Q&&typeof N=="string"&&(z=N,U=e.find(n,[z,z]),J=e.find(i,[z,z]));for(var ie=[],ae=0;ae<L;ae++){for(var pe=J(M[0],q[0][ae]),De=1;De<V;De++)pe=U(pe,J(M[De],q[De][ae]));ie[ae]=pe}return A.createDenseMatrix({data:ie,size:[L],datatype:z})}var v=e("_multiplyMatrixVector",{"DenseMatrix, any":g,"SparseMatrix, any":S}),b=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":_,"DenseMatrix, SparseMatrix":D,"SparseMatrix, DenseMatrix":y,"SparseMatrix, SparseMatrix":F});function g(A,C){var M=A._data,O=A._size,N=A._datatype,q=C._data,Z=C._datatype,Q=O[0],V=O[1],L,z=n,U=i;N&&Z&&N===Z&&typeof N=="string"&&(L=N,z=e.find(n,[L,L]),U=e.find(i,[L,L]));for(var J=[],ie=0;ie<Q;ie++){for(var ae=M[ie],pe=U(ae[0],q[0]),De=1;De<V;De++)pe=z(pe,U(ae[De],q[De]));J[ie]=pe}return A.createDenseMatrix({data:J,size:[Q],datatype:L})}function _(A,C){var M=A._data,O=A._size,N=A._datatype,q=C._data,Z=C._size,Q=C._datatype,V=O[0],L=O[1],z=Z[1],U,J=n,ie=i;N&&Q&&N===Q&&typeof N=="string"&&(U=N,J=e.find(n,[U,U]),ie=e.find(i,[U,U]));for(var ae=[],pe=0;pe<V;pe++){var De=M[pe];ae[pe]=[];for(var Ae=0;Ae<z;Ae++){for(var Be=ie(De[0],q[0][Ae]),je=1;je<L;je++)Be=J(Be,ie(De[je],q[je][Ae]));ae[pe][Ae]=Be}}return A.createDenseMatrix({data:ae,size:[V,z],datatype:U})}function D(A,C){var M=A._data,O=A._size,N=A._datatype,q=C._values,Z=C._index,Q=C._ptr,V=C._size,L=C._datatype;if(!q)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var z=O[0],U=V[1],J,ie=n,ae=i,pe=a,De=0;N&&L&&N===L&&typeof N=="string"&&(J=N,ie=e.find(n,[J,J]),ae=e.find(i,[J,J]),pe=e.find(a,[J,J]),De=e.convert(0,J));for(var Ae=[],Be=[],je=[],Le=C.createSparseMatrix({values:Ae,index:Be,ptr:je,size:[z,U],datatype:J}),Ve=0;Ve<U;Ve++){je[Ve]=Be.length;var lt=Q[Ve],vt=Q[Ve+1];if(vt>lt)for(var Ze=0,Ye=0;Ye<z;Ye++){for(var Ct=Ye+1,Je=void 0,ht=lt;ht<vt;ht++){var ft=Z[ht];Ze!==Ct?(Je=ae(M[Ye][ft],q[ht]),Ze=Ct):Je=ie(Je,ae(M[Ye][ft],q[ht]))}Ze===Ct&&!pe(Je,De)&&(Be.push(Ye),Ae.push(Je))}}return je[U]=Be.length,Le}function S(A,C){var M=A._values,O=A._index,N=A._ptr,q=A._datatype;if(!M)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var Z=C._data,Q=C._datatype,V=A._size[0],L=C._size[0],z=[],U=[],J=[],ie,ae=n,pe=i,De=a,Ae=0;q&&Q&&q===Q&&typeof q=="string"&&(ie=q,ae=e.find(n,[ie,ie]),pe=e.find(i,[ie,ie]),De=e.find(a,[ie,ie]),Ae=e.convert(0,ie));var Be=[],je=[];J[0]=0;for(var Le=0;Le<L;Le++){var Ve=Z[Le];if(!De(Ve,Ae))for(var lt=N[Le],vt=N[Le+1],Ze=lt;Ze<vt;Ze++){var Ye=O[Ze];je[Ye]?Be[Ye]=ae(Be[Ye],pe(Ve,M[Ze])):(je[Ye]=!0,U.push(Ye),Be[Ye]=pe(Ve,M[Ze]))}}for(var Ct=U.length,Je=0;Je<Ct;Je++){var ht=U[Je];z[Je]=Be[ht]}return J[1]=U.length,A.createSparseMatrix({values:z,index:U,ptr:J,size:[V,1],datatype:ie})}function y(A,C){var M=A._values,O=A._index,N=A._ptr,q=A._datatype;if(!M)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var Z=C._data,Q=C._datatype,V=A._size[0],L=C._size[0],z=C._size[1],U,J=n,ie=i,ae=a,pe=0;q&&Q&&q===Q&&typeof q=="string"&&(U=q,J=e.find(n,[U,U]),ie=e.find(i,[U,U]),ae=e.find(a,[U,U]),pe=e.convert(0,U));for(var De=[],Ae=[],Be=[],je=A.createSparseMatrix({values:De,index:Ae,ptr:Be,size:[V,z],datatype:U}),Le=[],Ve=[],lt=0;lt<z;lt++){Be[lt]=Ae.length;for(var vt=lt+1,Ze=0;Ze<L;Ze++){var Ye=Z[Ze][lt];if(!ae(Ye,pe))for(var Ct=N[Ze],Je=N[Ze+1],ht=Ct;ht<Je;ht++){var ft=O[ht];Ve[ft]!==vt?(Ve[ft]=vt,Ae.push(ft),Le[ft]=ie(Ye,M[ht])):Le[ft]=J(Le[ft],ie(Ye,M[ht]))}}for(var gt=Be[lt],Qe=Ae.length,Xe=gt;Xe<Qe;Xe++){var ke=Ae[Xe];De[Xe]=Le[ke]}}return Be[z]=Ae.length,je}function F(A,C){var M=A._values,O=A._index,N=A._ptr,q=A._datatype,Z=C._values,Q=C._index,V=C._ptr,L=C._datatype,z=A._size[0],U=C._size[1],J=M&&Z,ie,ae=n,pe=i;q&&L&&q===L&&typeof q=="string"&&(ie=q,ae=e.find(n,[ie,ie]),pe=e.find(i,[ie,ie]));for(var De=J?[]:void 0,Ae=[],Be=[],je=A.createSparseMatrix({values:De,index:Ae,ptr:Be,size:[z,U],datatype:ie}),Le=J?[]:void 0,Ve=[],lt,vt,Ze,Ye,Ct,Je,ht,ft,gt=0;gt<U;gt++){Be[gt]=Ae.length;var Qe=gt+1;for(Ct=V[gt],Je=V[gt+1],Ye=Ct;Ye<Je;Ye++)if(ft=Q[Ye],J)for(vt=N[ft],Ze=N[ft+1],lt=vt;lt<Ze;lt++)ht=O[lt],Ve[ht]!==Qe?(Ve[ht]=Qe,Ae.push(ht),Le[ht]=pe(Z[Ye],M[lt])):Le[ht]=ae(Le[ht],pe(Z[Ye],M[lt]));else for(vt=N[ft],Ze=N[ft+1],lt=vt;lt<Ze;lt++)ht=O[lt],Ve[ht]!==Qe&&(Ve[ht]=Qe,Ae.push(ht));if(J)for(var Xe=Be[gt],ke=Ae.length,Ne=Xe;Ne<ke;Ne++){var Mt=Ae[Ne];De[Ne]=Le[Mt]}}return Be[U]=Ae.length,je}return e(F0,i,{"Array, Array":e.referTo("Matrix, Matrix",A=>(C,M)=>{p(Mi(C),Mi(M));var O=A(r(C),r(M));return Jr(O)?O.valueOf():O}),"Matrix, Matrix":function(C,M){var O=C.size(),N=M.size();return p(O,N),O.length===1?N.length===1?f(C,M,O[0]):d(C,M):N.length===1?v(C,M):b(C,M)},"Matrix, Array":e.referTo("Matrix,Matrix",A=>(C,M)=>A(C,r(M))),"Array, Matrix":e.referToSelf(A=>(C,M)=>A(r(C,M.storage()),M)),"SparseMatrix, any":function(C,M){return o(C,M,i,!1)},"DenseMatrix, any":function(C,M){return l(C,M,i,!1)},"any, SparseMatrix":function(C,M){return o(M,C,i,!0)},"any, DenseMatrix":function(C,M){return l(M,C,i,!0)},"Array, any":function(C,M){return l(r(C),M,i,!1).valueOf()},"any, Array":function(C,M){return l(r(M),C,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(A=>(C,M,O)=>{for(var N=A(C,M),q=0;q<O.length;q++)N=A(N,O[q]);return N})})}),S0="subtract",kA=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix","concat"],TA=kt(S0,kA,t=>{var{typed:e,matrix:r,equalScalar:n,addScalar:i,unaryMinus:a,DenseMatrix:s,concat:o}=t,l=i1({typed:e}),p=EA({typed:e}),f=FA({typed:e,equalScalar:n}),d=a1({typed:e,DenseMatrix:s}),h=nA({typed:e,DenseMatrix:s}),v=u1({typed:e,matrix:r,concat:o});return e(S0,{"number, number":(b,g)=>b-g,"Complex, Complex":(b,g)=>b.sub(g),"BigNumber, BigNumber":(b,g)=>b.minus(g),"Fraction, Fraction":(b,g)=>b.sub(g),"Unit, Unit":e.referToSelf(b=>(g,_)=>{if(g.value===null)throw new Error("Parameter x contains a unit with undefined value");if(_.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!g.equalBase(_))throw new Error("Units do not match");var D=g.clone();return D.value=e.find(b,[D.valueType(),_.valueType()])(D.value,_.value),D.fixPrefix=!1,D})},v({SS:f,DS:l,SD:p,Ss:h,sS:d}))}),B0="conj",IA=["typed"],NA=kt(B0,IA,t=>{var{typed:e}=t;return e(B0,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":e.referToSelf(r=>n=>to(n,r))})}),O0="concat",xA=["typed","matrix","isInteger"],RA=kt(O0,xA,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(O0,{"...Array | Matrix | number | BigNumber":function(a){var s,o=a.length,l=-1,p,f=!1,d=[];for(s=0;s<o;s++){var h=a[s];if(Jr(h)&&(f=!0),rr(h)||Sn(h)){if(s!==o-1)throw new Error("Dimension must be specified as last argument");if(p=l,l=h.valueOf(),!n(l))throw new TypeError("Integer number expected for dimension");if(l<0||s>0&&l>p)throw new Qi(l,p+1)}else{var v=Fr(h).valueOf(),b=Mi(v);if(d[s]=v,p=l,l=b.length-1,s>0&&l!==p)throw new Rt(p+1,l+1)}}if(d.length===0)throw new SyntaxError("At least one matrix expected");for(var g=d.shift();d.length;)g=s1(g,d.shift(),l,0);return f?r(g):g},"...string":function(a){return a.join("")}})});function s1(t,e,r,n){if(n<r){if(t.length!==e.length)throw new Rt(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=s1(t[a],e[a],r,n+1);return i}else return t.concat(e)}function LA(){throw new Error('No "matrix" implementation available')}var M0="size",UA=["typed","config","?matrix"],VA=kt(M0,UA,t=>{var{typed:e,config:r,matrix:n}=t;return e(M0,{Matrix:function(a){return a.create(a.size())},Array:Mi,string:function(a){return r.matrix==="Array"?[a.length]:n([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return r.matrix==="Array"?[]:n?n([]):LA()}})}),P0="add",jA=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],zA=kt(P0,jA,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:a,SparseMatrix:s,concat:o}=t,l=i1({typed:e}),p=fA({typed:e,equalScalar:i}),f=a1({typed:e,DenseMatrix:a}),d=u1({typed:e,matrix:r,concat:o});return e(P0,{"any, any":n,"any, any, ...any":e.referToSelf(h=>(v,b,g)=>{for(var _=h(v,b),D=0;D<g.length;D++)_=h(_,g[D]);return _})},d({elop:n,DS:l,SS:p,Ss:f}))}),k0="dot",qA=["typed","addScalar","multiplyScalar","conj","size"],WA=kt(k0,qA,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:a}=t;return e(k0,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":l});function s(f,d){var h=p(f),v=p(d),b,g;if(h.length===1)b=h[0];else if(h.length===2&&h[1]===1)b=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(v.length===1)g=v[0];else if(v.length===2&&v[1]===1)g=v[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+v.join(", ")+")");if(b!==g)throw new RangeError("Vectors must have equal length ("+b+" != "+g+")");if(b===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return b}function o(f,d){var h=s(f,d),v=Jr(f)?f._data:f,b=Jr(f)?f._datatype:void 0,g=Jr(d)?d._data:d,_=Jr(d)?d._datatype:void 0,D=p(f).length===2,S=p(d).length===2,y=r,F=n;if(b&&_&&b===_&&typeof b=="string"){var A=b;y=e.find(r,[A,A]),F=e.find(n,[A,A])}if(!D&&!S){for(var C=F(i(v[0]),g[0]),M=1;M<h;M++)C=y(C,F(i(v[M]),g[M]));return C}if(!D&&S){for(var O=F(i(v[0]),g[0][0]),N=1;N<h;N++)O=y(O,F(i(v[N]),g[N][0]));return O}if(D&&!S){for(var q=F(i(v[0][0]),g[0]),Z=1;Z<h;Z++)q=y(q,F(i(v[Z][0]),g[Z]));return q}if(D&&S){for(var Q=F(i(v[0][0]),g[0][0]),V=1;V<h;V++)Q=y(Q,F(i(v[V][0]),g[V][0]));return Q}}function l(f,d){s(f,d);for(var h=f._index,v=f._values,b=d._index,g=d._values,_=0,D=r,S=n,y=0,F=0;y<h.length&&F<b.length;){var A=h[y],C=b[F];if(A<C){y++;continue}if(A>C){F++;continue}A===C&&(_=D(_,S(v[y],g[F])),y++,F++)}return _}function p(f){return Jr(f)?f.size():a(f)}}),HA=DE({config:Ys}),GA=AE({}),KA=BE({}),Lf=PE({}),ro=IE({Matrix:Lf}),un=E2({BigNumber:HA,Complex:GA,DenseMatrix:ro,Fraction:KA}),no=JE({typed:un}),$A=NA({typed:un}),io=zE({config:Ys,typed:un}),YA=xE({typed:un}),o1=OA({typed:un}),l1=HE({Matrix:Lf,equalScalar:io,typed:un}),ZA=YE({typed:un}),gu=KE({DenseMatrix:ro,Matrix:Lf,SparseMatrix:l1,typed:un}),JA=VA({matrix:gu,config:Ys,typed:un}),f1=RA({isInteger:YA,matrix:gu,typed:un}),xr=zA({DenseMatrix:ro,SparseMatrix:l1,addScalar:no,concat:f1,equalScalar:io,matrix:gu,typed:un}),QA=WA({addScalar:no,conj:$A,multiplyScalar:o1,size:JA,typed:un}),Wr=PA({addScalar:no,dot:QA,equalScalar:io,matrix:gu,multiplyScalar:o1,typed:un}),os=TA({DenseMatrix:ro,addScalar:no,concat:f1,equalScalar:io,matrix:gu,typed:un,unaryMinus:ZA});function XA(t){let e,r,n;return{c(){e=dt("circle"),this.h()},l(i){e=pt(i,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),j(e).forEach(k),this.h()},h(){B(e,"cx",r=t[0][0]),B(e,"cy",n=t[0][1]),B(e,"r",t[1]),B(e,"stroke",t[3]),B(e,"stroke-width",t[2]),Tt(e,"fill","rgba(0,0,0,0)")},m(i,a){le(i,e,a)},p(i,[a]){a&1&&r!==(r=i[0][0])&&B(e,"cx",r),a&1&&n!==(n=i[0][1])&&B(e,"cy",n),a&2&&B(e,"r",i[1]),a&8&&B(e,"stroke",i[3]),a&4&&B(e,"stroke-width",i[2])},i:Pe,o:Pe,d(i){i&&k(e)}}}function eC(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=2}=e,{color:s="rgba(46,67,101, 0.4)"}=e;return t.$$set=o=>{"xy"in o&&r(0,n=o.xy),"radius"in o&&r(1,i=o.radius),"stroke"in o&&r(2,a=o.stroke),"color"in o&&r(3,s=o.color)},[n,i,a,s]}class Uf extends ut{constructor(e){super(),st(this,e,eC,XA,ot,{xy:0,radius:1,stroke:2,color:3})}}function tC(t){let e,r,n,i,a;return{c(){e=dt("circle"),this.h()},l(s){e=pt(s,"circle",{cx:!0,cy:!0,r:!0}),j(e).forEach(k),this.h()},h(){B(e,"cx",r=t[0][0]),B(e,"cy",n=t[0][1]),B(e,"r",t[1]),Tt(e,"fill",t[2])},m(s,o){le(s,e,o),i||(a=[ge(e,"mouseover",t[3]),ge(e,"mouseout",t[4]),ge(e,"mousedown",t[5]),ge(e,"touchstart",t[5])],i=!0)},p(s,[o]){o&1&&r!==(r=s[0][0])&&B(e,"cx",r),o&1&&n!==(n=s[0][1])&&B(e,"cy",n),o&2&&B(e,"r",s[1]),o&4&&Tt(e,"fill",s[2])},i:Pe,o:Pe,d(s){s&&k(e),i=!1,$t(a)}}}function rC(t,e,r){let{xy:n=[100,100]}=e,{radius:i=5}=e,{color:a="black"}=e,{hoverColor:s="white"}=e,{handleMouseDown:o=h=>{}}=e,l=a;function p(){r(2,l=s)}function f(){r(2,l=a)}function d(h){o(h)}return t.$$set=h=>{"xy"in h&&r(0,n=h.xy),"radius"in h&&r(1,i=h.radius),"color"in h&&r(6,a=h.color),"hoverColor"in h&&r(7,s=h.hoverColor),"handleMouseDown"in h&&r(8,o=h.handleMouseDown)},[n,i,l,p,f,d,a,s,o]}class Fa extends ut{constructor(e){super(),st(this,e,rC,tC,ot,{xy:0,radius:1,color:6,hoverColor:7,handleMouseDown:8})}}function nC(t){let e,r,n,i,a;return{c(){e=dt("line"),this.h()},l(s){e=pt(s,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-dasharray":!0,"stroke-width":!0}),j(e).forEach(k),this.h()},h(){B(e,"x1",r=t[0][0]),B(e,"y1",n=t[0][1]),B(e,"x2",i=t[1][0]),B(e,"y2",a=t[1][1]),B(e,"stroke",t[3]),B(e,"stroke-dasharray","10,10"),B(e,"stroke-width",t[2])},m(s,o){le(s,e,o)},p(s,[o]){o&1&&r!==(r=s[0][0])&&B(e,"x1",r),o&1&&n!==(n=s[0][1])&&B(e,"y1",n),o&2&&i!==(i=s[1][0])&&B(e,"x2",i),o&2&&a!==(a=s[1][1])&&B(e,"y2",a),o&8&&B(e,"stroke",s[3]),o&4&&B(e,"stroke-width",s[2])},i:Pe,o:Pe,d(s){s&&k(e)}}}function iC(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:s="rgba(46,67,101, 0.4)"}=e;return t.$$set=o=>{"p1"in o&&r(0,n=o.p1),"p2"in o&&r(1,i=o.p2),"stroke"in o&&r(2,a=o.stroke),"color"in o&&r(3,s=o.color)},[n,i,a,s]}class c1 extends ut{constructor(e){super(),st(this,e,iC,nC,ot,{p1:0,p2:1,stroke:2,color:3})}}function aC(t){let e,r,n,i,a,s,o,l;return{c(){e=dt("foreignObject"),r=H("div"),n=H("p"),i=Oe(t[2]),this.h()},l(p){e=pt(p,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var f=j(e);r=G(f,"DIV",{class:!0});var d=j(r);n=G(d,"P",{});var h=j(n);i=Me(h,t[2]),h.forEach(k),d.forEach(k),f.forEach(k),this.h()},h(){Tt(n,"color",t[3]),Tt(n,"user-select","none"),Tt(n,"margin","0"),Tt(n,"pointer-events","none"),Tt(n,"text-align",t[4]),Tt(n,"font-size",`${t[5]}px`),Tt(n,"font-family","sans-serif"),Tt(n,"font-style","italic"),B(r,"class","h-full flex flex-col justify-center"),B(e,"x",a=t[0][0]),B(e,"y",s=t[0][1]),B(e,"width",o=t[1][0]),B(e,"height",l=t[1][1])},m(p,f){le(p,e,f),I(e,r),I(r,n),I(n,i)},p(p,[f]){f&4&&Br(i,p[2]),f&8&&Tt(n,"color",p[3]),f&16&&Tt(n,"text-align",p[4]),f&32&&Tt(n,"font-size",`${p[5]}px`),f&1&&a!==(a=p[0][0])&&B(e,"x",a),f&1&&s!==(s=p[0][1])&&B(e,"y",s),f&2&&o!==(o=p[1][0])&&B(e,"width",o),f&2&&l!==(l=p[1][1])&&B(e,"height",l)},i:Pe,o:Pe,d(p){p&&k(e)}}}function uC(t,e,r){let{xy:n=[100,100]}=e,{wh:i=[100,100]}=e,{text:a=""}=e,{color:s="rgba(96,117,151, 1)"}=e,{textAlign:o="center"}=e,{fontSize:l=12}=e;return t.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,i=p.wh),"text"in p&&r(2,a=p.text),"color"in p&&r(3,s=p.color),"textAlign"in p&&r(4,o=p.textAlign),"fontSize"in p&&r(5,l=p.fontSize)},[n,i,a,s,o,l]}class mu extends ut{constructor(e){super(),st(this,e,uC,aC,ot,{xy:0,wh:1,text:2,color:3,textAlign:4,fontSize:5})}}function sC(t){let e,r,n,i,a,s,o,l,p,f,d;return{c(){e=dt("circle"),i=Fe(),a=dt("foreignObject"),s=H("p"),o=Oe(t[4]),this.h()},l(h){e=pt(h,"circle",{cx:!0,cy:!0,r:!0}),j(e).forEach(k),i=Se(h),a=pt(h,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var v=j(a);s=G(v,"P",{style:!0,class:!0});var b=j(s);o=Me(b,t[4]),b.forEach(k),v.forEach(k),this.h()},h(){B(e,"cx",r=t[0][0]),B(e,"cy",n=t[0][1]),B(e,"r",t[1]),Tt(e,"fill",t[3]),Tt(s,"color",t[2]),Tt(s,"user-select","none"),Tt(s,"margin","0"),B(s,"class","heavy svelte-6if1p2"),B(a,"x",l=t[0][0]-t[1]),B(a,"y",p=t[0][1]-t[1]),B(a,"width",f=t[1]*2),B(a,"height",d=t[1]*2)},m(h,v){le(h,e,v),le(h,i,v),le(h,a,v),I(a,s),I(s,o)},p(h,[v]){v&1&&r!==(r=h[0][0])&&B(e,"cx",r),v&1&&n!==(n=h[0][1])&&B(e,"cy",n),v&2&&B(e,"r",h[1]),v&8&&Tt(e,"fill",h[3]),v&16&&Br(o,h[4]),v&4&&Tt(s,"color",h[2]),v&3&&l!==(l=h[0][0]-h[1])&&B(a,"x",l),v&3&&p!==(p=h[0][1]-h[1])&&B(a,"y",p),v&2&&f!==(f=h[1]*2)&&B(a,"width",f),v&2&&d!==(d=h[1]*2)&&B(a,"height",d)},i:Pe,o:Pe,d(h){h&&k(e),h&&k(i),h&&k(a)}}}function oC(t,e,r){let{xy:n=[100,100]}=e,{radius:i=25}=e,{textColor:a="rgba(96,117,151, 1)"}=e,{bgColor:s="black"}=e,{weight:o=""}=e;return t.$$set=l=>{"xy"in l&&r(0,n=l.xy),"radius"in l&&r(1,i=l.radius),"textColor"in l&&r(2,a=l.textColor),"bgColor"in l&&r(3,s=l.bgColor),"weight"in l&&r(4,o=l.weight)},[n,i,a,s,o]}class lC extends ut{constructor(e){super(),st(this,e,oC,sC,ot,{xy:0,radius:1,textColor:2,bgColor:3,weight:4})}}function Rn(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=360+Math.atan2(i,n)*180/Math.PI,s=Math.sqrt(n*n+i*i);return[a%360,s/r]}function Rr(t,e,r){const n=e[0]%360*Math.PI/180,i=[r*e[1]*Math.cos(n),r*e[1]*Math.sin(n)];return xr(t,i)}function fu(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=Math.sqrt(n*n+i*i),s=r/a,o=e[0]+n*s,l=e[1]+i*s;return[o,l]}function fC(t,e,r){const n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)<r}function Vf(t,e){const r=e%360*Math.PI/180;let n,i;const a=Math.cos(r),s=Math.sin(r);return n=(t[0]+5)*-1.2*a,i=(t[1]+5)*-1.2*s,n-=t[0],i-=t[1],[n,i]}function qr(t){return t<0?360+-1*(Math.abs(t)%360):t>360?t%360:t}function cC(t){return Math.round(t*100)}function Lr(t){return Math.round(Math.max(1-Math.pow(1-t,2),.25)*100)/100}function ao(t){let e="parsedWeight";switch(t){case wt.Circle:e="circleWeight";break;case wt.Bars:e="barWeight";break;case wt.Embed:e="embedWeight";break;case wt.Pie:e="pieWeight";break;case wt.Ring:e="ringWeight";break}return e}function hC(t){const e=t.weightMode,r=ao(e);return t.weightedPrompts?Math.max(...Object.values(t.weightedPrompts).map(n=>n[r])):0}function dC(t){const e=t.weightMode,r=ao(e);return t.weightedPrompts?Object.values(t.weightedPrompts).reduce((n,i)=>n+i[r],0):0}function T0(t,e){const r=t.weightMode,n=ao(r);return t.weightedPrompts[e]?t.weightedPrompts[e][n]/hC(t):0}function Bi(t,e){const r=t.weightMode,n=ao(r);if(!t.weightedPrompts[e])return 0;const i=t.weightedPrompts[e][n];return cC((i||0)/dC(t))}function pC(t,e,r){const a=r*.6,s=Math.floor(t/a);return Math.ceil(e/s)*r*1.2}function Vr(t,e,r){const n=pC(t,e,r)+10;return[t,n]}function gs(t,e){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function _u(t){return Wr(t,.5)}function Kn(t){const e=t.currentTarget;if(!e)throw new Error("No SVG element found");var r=e.createSVGPoint();t instanceof TouchEvent?(r.x=t.touches[0].clientX,r.y=t.touches[0].clientY):(r.x=t.clientX,r.y=t.clientY);const n=e.getScreenCTM();if(!n)throw new Error("No DOM Matrix found");const i=r.matrixTransform(n.inverse());return[i.x,i.y]}function I0(t,e,r){const n=t.slice();return n[18]=e[r][0],n[19]=e[r][1],n}function N0(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,a;e=new Uf({props:{xy:t[0],radius:t[1]}});let s=Object.entries(t[5].weightedPrompts),o=[];for(let f=0;f<s.length;f+=1)o[f]=x0(I0(t,s,f));const l=f=>we(o[f],1,1,()=>{o[f]=null});let p=n&&R0(t);return{c(){ze(e.$$.fragment);for(let f=0;f<o.length;f+=1)o[f].c();r=Pt(),p&&p.c(),i=Pt()},l(f){qe(e.$$.fragment,f);for(let d=0;d<o.length;d+=1)o[d].l(f);r=Pt(),p&&p.l(f),i=Pt()},m(f,d){We(e,f,d);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(f,d);le(f,r,d),p&&p.m(f,d),le(f,i,d),a=!0},p(f,d){const h={};if(d&1&&(h.xy=f[0]),d&2&&(h.radius=f[1]),e.$set(h),d&895){s=Object.entries(f[5].weightedPrompts);let v;for(v=0;v<s.length;v+=1){const b=I0(f,s,v);o[v]?(o[v].p(b,d),me(o[v],1)):(o[v]=x0(b),o[v].c(),me(o[v],1),o[v].m(r.parentNode,r))}for(cr(),v=s.length;v<o.length;v+=1)l(v);hr()}d&32&&(n=Object.entries(f[5].weightedPrompts).length>0),n?p?(p.p(f,d),d&32&&me(p,1)):(p=R0(f),p.c(),me(p,1),p.m(i.parentNode,i)):p&&(cr(),we(p,1,1,()=>{p=null}),hr())},i(f){if(!a){me(e.$$.fragment,f);for(let d=0;d<s.length;d+=1)me(o[d]);me(p),a=!0}},o(f){we(e.$$.fragment,f),o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)we(o[d]);we(p),a=!1},d(f){He(e,f),Ks(o,f),f&&k(r),p&&p.d(f),f&&k(i)}}}function x0(t){let e,r,n,i,a;e=new c1({props:{p1:Rr(t[0],t[5].circleMarker,t[1]),p2:t[6][t[18]].xy}});function s(){return t[12](t[18])}return r=new Fa({props:{xy:t[6][t[18]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:s}}),n=new mu({props:{xy:t[9](t[6][t[18]].xy,Vr(t[3],t[19].text.length,t[4])),color:`rgba(255,255,255,${Lr(t[6][t[18]].unitWeight)}`,wh:Vr(t[3],t[19].text.length,t[4]),fontSize:t[4],text:t[19].text}}),i=new lC({props:{xy:Wr(xr(Rr(t[0],t[5].circleMarker,t[1]),t[6][t[18]].xy),.5),weight:Bi(t[5],t[18]),radius:15,textColor:`rgba(255,255,255,${Lr(t[6][t[18]].unitWeight)}`,bgColor:"rgb(8, 11, 22)"}}),{c(){ze(e.$$.fragment),ze(r.$$.fragment),ze(n.$$.fragment),ze(i.$$.fragment)},l(o){qe(e.$$.fragment,o),qe(r.$$.fragment,o),qe(n.$$.fragment,o),qe(i.$$.fragment,o)},m(o,l){We(e,o,l),We(r,o,l),We(n,o,l),We(i,o,l),a=!0},p(o,l){t=o;const p={};l&35&&(p.p1=Rr(t[0],t[5].circleMarker,t[1])),l&96&&(p.p2=t[6][t[18]].xy),e.$set(p);const f={};l&96&&(f.xy=t[6][t[18]].xy),l&4&&(f.radius=t[2]),l&32&&(f.handleMouseDown=s),r.$set(f);const d={};l&120&&(d.xy=t[9](t[6][t[18]].xy,Vr(t[3],t[19].text.length,t[4]))),l&96&&(d.color=`rgba(255,255,255,${Lr(t[6][t[18]].unitWeight)}`),l&56&&(d.wh=Vr(t[3],t[19].text.length,t[4])),l&16&&(d.fontSize=t[4]),l&32&&(d.text=t[19].text),n.$set(d);const h={};l&99&&(h.xy=Wr(xr(Rr(t[0],t[5].circleMarker,t[1]),t[6][t[18]].xy),.5)),l&32&&(h.weight=Bi(t[5],t[18])),l&96&&(h.textColor=`rgba(255,255,255,${Lr(t[6][t[18]].unitWeight)}`),i.$set(h)},i(o){a||(me(e.$$.fragment,o),me(r.$$.fragment,o),me(n.$$.fragment,o),me(i.$$.fragment,o),a=!0)},o(o){we(e.$$.fragment,o),we(r.$$.fragment,o),we(n.$$.fragment,o),we(i.$$.fragment,o),a=!1},d(o){He(e,o),He(r,o),He(n,o),He(i,o)}}}function R0(t){let e,r;return e=new Fa({props:{xy:Rr(t[0],t[5].circleMarker,t[1]),radius:10,color:"rgba(136,157,191, 1)",handleMouseDown:t[13]}}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},p(n,i){const a={};i&35&&(a.xy=Rr(n[0],n[5].circleMarker,n[1])),e.$set(a)},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function vC(t){let e,r,n,i,a=t[6]&&t[5].weightedPrompts&&N0(t);return{c(){e=dt("svg"),a&&a.c(),this.h()},l(s){e=pt(s,"svg",{id:!0,class:!0});var o=j(e);a&&a.l(o),o.forEach(k),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(s,o){le(s,e,o),a&&a.m(e,null),r=!0,n||(i=[ge(e,"mousemove",t[10]),ge(e,"touchmove",t[10]),ge(e,"mouseup",t[7]),ge(e,"touchend",t[7]),ge(e,"dblclick",t[11])],n=!0)},p(s,[o]){s[6]&&s[5].weightedPrompts?a?(a.p(s,o),o&96&&me(a,1)):(a=N0(s),a.c(),me(a,1),a.m(e,null)):a&&(cr(),we(a,1,1,()=>{a=null}),hr())},i(s){r||(me(a),r=!0)},o(s){we(a),r=!1},d(s){s&&k(e),a&&a.d(),n=!1,$t(i)}}}function L0(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const s=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=s,r},e):null}function gC(t,e,r){let n,i;Ke(t,rt,A=>r(5,i=A));let{center:a=[450,450]}=e,{radius:s=250}=e,{pointRadius:o=10}=e,{textWidth:l=150}=e,{fontSize:p=13}=e,f=[0,0],d=null;function h(A){d=null}function v(A){d=A}function b(A,C){let M=Rn(A,a,s)[0]-180;M<0&&(M+=360);const O=Vf(_u(C),M);return xr(A,O)}function g(A){const C=fC(A,a,s)?Rn(A,a,s):Rn(fu(A,a,s),a,s);r(6,n=S(i.weightedPrompts,a,s,i.circleWeightScaling,i.circleExponentialScaling,C,i.circleAngles))}function _(A){if(f=Kn(A),d==="main")g(f);else if(d){const C={...i.weightedPrompts[d]},M=fu(f,a,s),O=Rn(M,a,s)[0],N={...i.circleAngles};N[C.id]=O;const q={...i.weightedPrompts};q[d]=C,r(6,n=S(q,a,s,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,N))}}function D(A){f=Kn(A),g(f)}function S(A,C,M,O,N,q,Z){if(!A||!C||!M||!O||!q)return null;let Q=Object.entries(A).reduce((z,[U,J])=>(z[U]={xy:Rr(C,[Z[U],1],M)},z),{});Q=Object.entries(Q).reduce((z,[U,J])=>(z[U]={...z[U],distance:gs(J.xy,Rr(C,q,M))},z),Q);const V=Object.values(Q).reduce((z,U)=>z+U.distance,0);Q=Object.entries(Q).reduce((z,[U,J])=>(z[U]={...z[U],unitDistance:Math.round(J.distance/V*100)/100},z),Q),Q=Object.entries(Q).reduce((z,[U,J])=>(z[U]={...z[U],invertedUnitDistance:Math.round((1-J.unitDistance)*100)/100},z),Q),Q=Object.entries(Q).reduce((z,[U,J])=>(N?z[U]={...z[U],unitWeight:Math.round(Math.pow(1-J.distance/(2*M),O)*100)/100}:z[U]={...z[U],unitWeight:Math.round((1-J.distance/(2*M))*100)/100},z),Q);const L={...A};return Object.entries(Q).forEach(([z,U])=>{L[z].circleWeight=U.unitWeight}),rt.update({...i,circleMarker:q,weightedPrompts:L,circleAngles:Z}),Q}const y=A=>v(A),F=()=>v("main");return t.$$set=A=>{"center"in A&&r(0,a=A.center),"radius"in A&&r(1,s=A.radius),"pointRadius"in A&&r(2,o=A.pointRadius),"textWidth"in A&&r(3,l=A.textWidth),"fontSize"in A&&r(4,p=A.fontSize)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(i.circleAngles).length!==Object.keys(i.weightedPrompts).length&&rt.update({...i,circleAngles:L0(i.weightedPrompts,{})}),t.$$.dirty&35&&r(6,n=S(i.weightedPrompts,a,s,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,i.circleAngles||L0(i.weightedPrompts,{})))},[a,s,o,l,p,i,n,h,v,b,_,D,y,F]}class mC extends ut{constructor(e){super(),st(this,e,gC,vC,ot,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function U0(t){let e,r,n,i,a,s,o,l;return{c(){e=H("div"),r=H("label"),n=H("span"),i=Oe("Scaling Power"),a=Fe(),s=H("input"),this.h()},l(p){e=G(p,"DIV",{class:!0});var f=j(e);r=G(f,"LABEL",{class:!0});var d=j(r);n=G(d,"SPAN",{class:!0});var h=j(n);i=Me(h,"Scaling Power"),h.forEach(k),d.forEach(k),a=Se(f),s=G(f,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),f.forEach(k),this.h()},h(){B(n,"class","label-text"),B(r,"class","label"),B(s,"type","range"),B(s,"min","0.5"),B(s,"max","3"),B(s,"step","0.1"),B(s,"class","range range-xs"),B(e,"class","w-full px-2")},m(p,f){le(p,e,f),I(e,r),I(r,n),I(n,i),I(e,a),I(e,s),nn(s,t[0]),o||(l=[ge(s,"change",t[6]),ge(s,"input",t[6])],o=!0)},p(p,f){f&1&&nn(s,p[0])},d(p){p&&k(e),o=!1,$t(l)}}}function _C(t){let e,r,n,i,a,s,o,l,p,f,d,h,v,b,g;r=new mC({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let _=t[1]&&U0(t);return{c(){e=H("div"),ze(r.$$.fragment),i=Fe(),a=H("div"),s=H("div"),o=H("label"),l=H("span"),p=Oe("Exponential Scaling"),f=Fe(),d=H("input"),h=Fe(),_&&_.c(),this.h()},l(D){e=G(D,"DIV",{class:!0});var S=j(e);qe(r.$$.fragment,S),S.forEach(k),i=Se(D),a=G(D,"DIV",{class:!0});var y=j(a);s=G(y,"DIV",{class:!0});var F=j(s);o=G(F,"LABEL",{class:!0});var A=j(o);l=G(A,"SPAN",{class:!0});var C=j(l);p=Me(C,"Exponential Scaling"),C.forEach(k),A.forEach(k),f=Se(F),d=G(F,"INPUT",{type:!0,class:!0}),F.forEach(k),h=Se(y),_&&_.l(y),y.forEach(k),this.h()},h(){B(e,"class","w-full h-full"),Ji(()=>t[4].call(e)),B(l,"class","label-text"),B(o,"class","label"),B(d,"type","checkbox"),B(d,"class","toggle toggle-xs"),B(s,"class","w-52 px-2"),B(a,"class","px-2 py-4 pb-0 flex")},m(D,S){le(D,e,S),We(r,e,null),n=vu(e,t[4].bind(e)),le(D,i,S),le(D,a,S),I(a,s),I(s,o),I(o,l),I(l,p),I(s,f),I(s,d),d.checked=t[1],I(a,h),_&&_.m(a,null),v=!0,b||(g=ge(d,"change",t[5]),b=!0)},p(D,[S]){const y={};S&12&&(y.center=[Math.round(D[2]/2),Math.round(D[3]/2)]),S&12&&(y.radius=Math.round(Math.min(D[2],D[3])/2)-150),r.$set(y),S&2&&(d.checked=D[1]),D[1]?_?_.p(D,S):(_=U0(D),_.c(),_.m(a,null)):_&&(_.d(1),_=null)},i(D){v||(me(r.$$.fragment,D),v=!0)},o(D){we(r.$$.fragment,D),v=!1},d(D){D&&k(e),He(r),n(),D&&k(i),D&&k(a),_&&_.d(),b=!1,g()}}}function bC(t,e,r){let n;Ke(t,rt,d=>r(7,n=d));let i,a,s=n.circleWeightScaling||2,o=If(n.circleExponentialScaling)?!0:n.circleExponentialScaling;function l(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function p(){o=this.checked,r(1,o)}function f(){s=Ap(this.value),r(0,s)}return t.$$.update=()=>{t.$$.dirty&3&&rt.update({...rt.get(),circleExponentialScaling:o,circleWeightScaling:s})},[s,o,i,a,l,p,f]}class DC extends ut{constructor(e){super(),st(this,e,bC,_C,ot,{})}}function wC(t){let e,r,n,i,a,s,o;return{c(){e=dt("rect"),this.h()},l(l){e=pt(l,"rect",{x:!0,y:!0,width:!0,height:!0}),j(e).forEach(k),this.h()},h(){B(e,"x",r=t[0][0]),B(e,"y",n=t[0][1]),B(e,"width",i=Math.max(t[1][0],0)),B(e,"height",a=Math.max(t[1][1],0)),Tt(e,"fill",t[2])},m(l,p){le(l,e,p),s||(o=[ge(e,"mouseover",function(){Ci(t[4])&&t[4].apply(this,arguments)}),ge(e,"mouseout",function(){Ci(t[5])&&t[5].apply(this,arguments)}),ge(e,"mousedown",function(){Ci(t[3])&&t[3].apply(this,arguments)}),ge(e,"touchstart",function(){Ci(t[3])&&t[3].apply(this,arguments)})],s=!0)},p(l,[p]){t=l,p&1&&r!==(r=t[0][0])&&B(e,"x",r),p&1&&n!==(n=t[0][1])&&B(e,"y",n),p&2&&i!==(i=Math.max(t[1][0],0))&&B(e,"width",i),p&2&&a!==(a=Math.max(t[1][1],0))&&B(e,"height",a),p&4&&Tt(e,"fill",t[2])},i:Pe,o:Pe,d(l){l&&k(e),s=!1,$t(o)}}}function yC(t,e,r){let{xy:n=[500,500]}=e,{wh:i=[100,100]}=e,{color:a="rgba(46,67,101, 0.4)"}=e,{handleMouseDown:s=p=>{}}=e,{handleMouseOver:o=p=>{}}=e,{handleMouseOut:l=p=>{}}=e;return t.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,i=p.wh),"color"in p&&r(2,a=p.color),"handleMouseDown"in p&&r(3,s=p.handleMouseDown),"handleMouseOver"in p&&r(4,o=p.handleMouseOver),"handleMouseOut"in p&&r(5,l=p.handleMouseOut)},[n,i,a,s,o,l]}class Ol extends ut{constructor(e){super(),st(this,e,yC,wC,ot,{xy:0,wh:1,color:2,handleMouseDown:3,handleMouseOver:4,handleMouseOut:5})}}function V0(t,e,r){const n=t.slice();return n[51]=e[r][0],n[52]=e[r][1],n[53]=e[r][2],n}function j0(t,e){let r,n,i,a,s,o;n=new mu({props:{xy:[e[3][0]+e[0],e[3][1]+e[52]*e[4]+e[52]],color:`rgba(255,255,255,${Lr(e[53].barWeight/e[12]||0)})`,wh:e[5][e[51]],text:e[53].text,textAlign:"right",fontSize:e[1]}});function l(...h){return e[39](e[51],...h)}i=new Ol({props:{color:e[13](0),handleMouseOver:l,handleMouseOut:e[40],xy:[e[10],e[3][1]+e[52]*e[4]+e[52]],wh:[e[11],e[4]-2]}});function p(...h){return e[41](e[51],...h)}a=new Ol({props:{color:e[8]===e[51]||e[7]===e[51]||e[9]===e[51]?e[13](Lr((e[53].barWeight||0)/e[12]+.15)):e[13](Lr(e[53].barWeight||0)),handleMouseOver:p,handleMouseOut:e[42],xy:[e[10],e[3][1]+e[52]*e[4]+e[52]],wh:[(e[53].barWeight||0)*e[11],e[4]-2]}});function f(...h){return e[43](e[51],...h)}function d(...h){return e[45](e[51],...h)}return s=new Ol({props:{color:e[9]===e[51]?e[15]:e[14],handleMouseOver:f,handleMouseOut:e[44],handleMouseDown:d,xy:[e[10]+(e[53].barWeight||0)*e[11],e[3][1]+e[52]*e[4]+e[52]],wh:[e[2],e[4]-2]}}),{key:t,first:null,c(){r=Pt(),ze(n.$$.fragment),ze(i.$$.fragment),ze(a.$$.fragment),ze(s.$$.fragment),this.h()},l(h){r=Pt(),qe(n.$$.fragment,h),qe(i.$$.fragment,h),qe(a.$$.fragment,h),qe(s.$$.fragment,h),this.h()},h(){this.first=r},m(h,v){le(h,r,v),We(n,h,v),We(i,h,v),We(a,h,v),We(s,h,v),o=!0},p(h,v){e=h;const b={};v[0]&89&&(b.xy=[e[3][0]+e[0],e[3][1]+e[52]*e[4]+e[52]]),v[0]&4160&&(b.color=`rgba(255,255,255,${Lr(e[53].barWeight/e[12]||0)})`),v[0]&96&&(b.wh=e[5][e[51]]),v[0]&64&&(b.text=e[53].text),v[0]&2&&(b.fontSize=e[1]),n.$set(b);const g={};v[0]&64&&(g.handleMouseOver=l),v[0]&1112&&(g.xy=[e[10],e[3][1]+e[52]*e[4]+e[52]]),v[0]&2064&&(g.wh=[e[11],e[4]-2]),i.$set(g);const _={};v[0]&5056&&(_.color=e[8]===e[51]||e[7]===e[51]||e[9]===e[51]?e[13](Lr((e[53].barWeight||0)/e[12]+.15)):e[13](Lr(e[53].barWeight||0))),v[0]&64&&(_.handleMouseOver=p),v[0]&1112&&(_.xy=[e[10],e[3][1]+e[52]*e[4]+e[52]]),v[0]&2128&&(_.wh=[(e[53].barWeight||0)*e[11],e[4]-2]),a.$set(_);const D={};v[0]&576&&(D.color=e[9]===e[51]?e[15]:e[14]),v[0]&64&&(D.handleMouseOver=f),v[0]&64&&(D.handleMouseDown=d),v[0]&3160&&(D.xy=[e[10]+(e[53].barWeight||0)*e[11],e[3][1]+e[52]*e[4]+e[52]]),v[0]&20&&(D.wh=[e[2],e[4]-2]),s.$set(D)},i(h){o||(me(n.$$.fragment,h),me(i.$$.fragment,h),me(a.$$.fragment,h),me(s.$$.fragment,h),o=!0)},o(h){we(n.$$.fragment,h),we(i.$$.fragment,h),we(a.$$.fragment,h),we(s.$$.fragment,h),o=!1},d(h){h&&k(r),He(n,h),He(i,h),He(a,h),He(s,h)}}}function EC(t){let e,r=[],n=new Map,i,a,s,o=t[6];const l=p=>p[51];for(let p=0;p<o.length;p+=1){let f=V0(t,o,p),d=l(f);n.set(d,r[p]=j0(d,f))}return{c(){e=dt("svg");for(let p=0;p<r.length;p+=1)r[p].c();this.h()},l(p){e=pt(p,"svg",{id:!0,class:!0});var f=j(e);for(let d=0;d<r.length;d+=1)r[d].l(f);f.forEach(k),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(p,f){le(p,e,f);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(e,null);i=!0,a||(s=[ge(e,"mousemove",t[25]),ge(e,"mouseup",t[24]),ge(e,"touchend",t[24],{passive:!0}),ge(e,"touchmove",t[25]),ge(e,"dblclick",t[23])],a=!0)},p(p,f){f[0]&8388607&&(o=p[6],cr(),r=Bn(r,f,l,1,p,o,n,e,Cp,j0,null,V0),hr())},i(p){if(!i){for(let f=0;f<o.length;f+=1)me(r[f]);i=!0}},o(p){for(let f=0;f<r.length;f+=1)we(r[f]);i=!1},d(p){p&&k(e);for(let f=0;f<r.length;f+=1)r[f].d();a=!1,$t(s)}}}function AC(t,e,r){let n,i,a,s,o,l,p,f,d,h,v,b,g;Ke(t,rt,ke=>r(38,g=ke));let{center:_=[0,0]}=e,{dimensions:D=[100,100]}=e,{maxWidth:S=1e3}=e,{pointRadius:y=10}=e,{textWidth:F=250}=e,{horizontalPad:A=20}=e,{verticalPad:C=2}=e,{textBarPad:M=10}=e,{fontSize:O=13}=e,{handleWidth:N=20}=e,q=ke=>`rgba(46,67,101, ${ke})`,Z=ke=>`rgba(76,97,131, ${ke})`,Q=null,V=null,L=null,z=Z(.3),U=Z(.8),J=null,ie=null,ae=null;function pe(ke){r(8,V=ke)}function De(ke){r(7,Q=ke)}function Ae(ke){r(9,L=ke)}function Be(){r(8,V=null)}function je(){r(7,Q=null)}function Le(){r(9,L=null)}function Ve(ke){J=ke}function lt(ke){let Ne=J!==null?J:V!==null?V:L!==null?L:Q!==null?Q:null;if(Ne===null)return;const Mt=Kn(ke);Ze(Ne,Mt)}function vt(){J=null,ie&&clearInterval(ie),ie=null,ae=null}function Ze(ke,Ne){let jt=Math.min(h,Math.max(0,Ne[0]-v))/h,Gt={...g.weightedPrompts},K={...Gt[ke]};K.barWeight=jt,Gt[ke]=K,rt.update({...g,weightedPrompts:Gt})}function Ye(ke){let Ne=J;if(Ne===null)return;const Mt=Kn(ke);if(Ze(Ne,Mt),J!==null){let jt=v+h+N,Gt=v;Mt[0]>jt&&!ie?(ae=Date.now(),ie=setInterval(()=>{if(!ae||Date.now()-ae<1e3)return;let K={...g.weightedPrompts};const Y=Object.entries(K).reduce((ee,[fe,ue])=>{const he=parseInt(fe);return he!==J?ee[he]={...ue,barWeight:Math.max(0,(ue.barWeight||0)-.01)}:ee[he]={...ue,barWeight:Math.min(1,(ue.barWeight||0)+.01)},ee},{});rt.update({...g,weightedPrompts:Y})},100)):Mt[0]<Gt&&!ie?(ae=Date.now(),ie=setInterval(()=>{if(!ae||Date.now()-ae<1e3)return;let K={...g.weightedPrompts};const Y=Object.entries(K).reduce((ee,[fe,ue])=>{const he=parseInt(fe);return he!==J?ee[he]={...ue,barWeight:Math.min(1,(ue.barWeight||0)+.01)}:ee[he]={...ue,barWeight:Math.max(0,(ue.barWeight||0)-.01)},ee},{});rt.update({...g,weightedPrompts:Y})},100)):Mt[0]<jt&&Mt[0]>Gt&&ie&&(clearInterval(ie),ie=null,ae=null)}}const Ct=(ke,Ne)=>De(ke),Je=ke=>je(),ht=(ke,Ne)=>pe(ke),ft=ke=>Be(),gt=(ke,Ne)=>Ae(ke),Qe=ke=>Le(),Xe=(ke,Ne)=>Ve(ke);return t.$$set=ke=>{"center"in ke&&r(26,_=ke.center),"dimensions"in ke&&r(27,D=ke.dimensions),"maxWidth"in ke&&r(28,S=ke.maxWidth),"pointRadius"in ke&&r(29,y=ke.pointRadius),"textWidth"in ke&&r(30,F=ke.textWidth),"horizontalPad"in ke&&r(0,A=ke.horizontalPad),"verticalPad"in ke&&r(31,C=ke.verticalPad),"textBarPad"in ke&&r(32,M=ke.textBarPad),"fontSize"in ke&&r(1,O=ke.fontSize),"handleWidth"in ke&&r(2,N=ke.handleWidth)},t.$$.update=()=>{t.$$.dirty[1]&128&&r(6,n=Object.entries(g.weightedPrompts).map(([ke,Ne],Mt)=>[parseInt(ke),Mt,Ne])),t.$$.dirty[1]&128&&r(36,i=Object.keys(g.weightedPrompts).length),t.$$.dirty[0]&134217728&&r(35,a=[D[0]-50,D[1]-50]),t.$$.dirty[0]&1073741890&&r(5,s=n.reduce((ke,[Ne,Mt,jt])=>{const[Gt,K]=Vr(F,jt.text.length,O);return ke[Ne]=[Gt,K],ke},{})),t.$$.dirty[0]&32&&r(37,o=Math.max(...Object.values(s).map(([ke,Ne])=>Ne))),t.$$.dirty[1]&112&&r(4,l=Math.min(a[1]/i,o)),t.$$.dirty[0]&16|t.$$.dirty[1]&33&&r(34,p=l*i+C*Math.max(i-1,0)),t.$$.dirty[0]&268435456|t.$$.dirty[1]&16&&r(33,f=Math.min(a[0],S)),t.$$.dirty[0]&67108864|t.$$.dirty[1]&12&&r(3,d=[_[0]-f/2,_[1]-p/2]),t.$$.dirty[0]&1073741829|t.$$.dirty[1]&6&&r(11,h=f-M-F-2*A-N),t.$$.dirty[0]&1073741833|t.$$.dirty[1]&2&&r(10,v=d[0]+M+F+A),t.$$.dirty[1]&128&&r(12,b=Math.max(...Object.values(g.weightedPrompts).map(ke=>ke.barWeight||0)))},[A,O,N,d,l,s,n,Q,V,L,v,h,b,q,z,U,pe,De,Ae,Be,je,Le,Ve,lt,vt,Ye,_,D,S,y,F,C,M,f,p,a,i,o,g,Ct,Je,ht,ft,gt,Qe,Xe]}class CC extends ut{constructor(e){super(),st(this,e,AC,EC,ot,{center:26,dimensions:27,maxWidth:28,pointRadius:29,textWidth:30,horizontalPad:0,verticalPad:31,textBarPad:32,fontSize:1,handleWidth:2},null,[-1,-1])}}function FC(t){let e,r,n,i;return r=new CC({props:{dimensions:t[2],center:t[3]}}),{c(){e=H("div"),ze(r.$$.fragment),this.h()},l(a){e=G(a,"DIV",{class:!0});var s=j(e);qe(r.$$.fragment,s),s.forEach(k),this.h()},h(){B(e,"class","w-full h-full pt-10"),Ji(()=>t[4].call(e))},m(a,s){le(a,e,s),We(r,e,null),n=vu(e,t[4].bind(e)),i=!0},p(a,[s]){const o={};s&4&&(o.dimensions=a[2]),s&8&&(o.center=a[3]),r.$set(o)},i(a){i||(me(r.$$.fragment,a),i=!0)},o(a){we(r.$$.fragment,a),i=!1},d(a){a&&k(e),He(r),n()}}}function SC(t,e,r){let n,i,a,s;function o(){a=this.clientWidth,s=this.clientHeight,r(0,a),r(1,s)}return t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[a||0,s||0]),t.$$.dirty&4&&r(3,i=_u(n))},[a,s,n,i,o]}class BC extends ut{constructor(e){super(),st(this,e,SC,FC,ot,{})}}function OC(t){let e,r,n,i,a;return{c(){e=dt("line"),this.h()},l(s){e=pt(s,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),j(e).forEach(k),this.h()},h(){B(e,"x1",r=t[0][0]),B(e,"y1",n=t[0][1]),B(e,"x2",i=t[1][0]),B(e,"y2",a=t[1][1]),B(e,"stroke",t[3]),B(e,"stroke-width",t[2])},m(s,o){le(s,e,o)},p(s,[o]){o&1&&r!==(r=s[0][0])&&B(e,"x1",r),o&1&&n!==(n=s[0][1])&&B(e,"y1",n),o&2&&i!==(i=s[1][0])&&B(e,"x2",i),o&2&&a!==(a=s[1][1])&&B(e,"y2",a),o&8&&B(e,"stroke",s[3]),o&4&&B(e,"stroke-width",s[2])},i:Pe,o:Pe,d(s){s&&k(e)}}}function MC(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:s="rgba(46,67,101, 0.4)"}=e;return t.$$set=o=>{"p1"in o&&r(0,n=o.p1),"p2"in o&&r(1,i=o.p2),"stroke"in o&&r(2,a=o.stroke),"color"in o&&r(3,s=o.color)},[n,i,a,s]}class PC extends ut{constructor(e){super(),st(this,e,MC,OC,ot,{p1:0,p2:1,stroke:2,color:3})}}function z0(t,e,r){const n=t.slice();return n[27]=e[r][0],n[28]=e[r][1],n}function q0(t){let e,r,n;e=new Uf({props:{xy:t[0],radius:t[1]}});let i=Object.entries(t[5].weightedPrompts),a=[];for(let o=0;o<i.length;o+=1)a[o]=W0(z0(t,i,o));const s=o=>we(a[o],1,1,()=>{a[o]=null});return{c(){ze(e.$$.fragment);for(let o=0;o<a.length;o+=1)a[o].c();r=Pt()},l(o){qe(e.$$.fragment,o);for(let l=0;l<a.length;l+=1)a[l].l(o);r=Pt()},m(o,l){We(e,o,l);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(o,l);le(o,r,l),n=!0},p(o,l){const p={};if(l&1&&(p.xy=o[0]),l&2&&(p.radius=o[1]),e.$set(p),l&6015){i=Object.entries(o[5].weightedPrompts);let f;for(f=0;f<i.length;f+=1){const d=z0(o,i,f);a[f]?(a[f].p(d,l),me(a[f],1)):(a[f]=W0(d),a[f].c(),me(a[f],1),a[f].m(r.parentNode,r))}for(cr(),f=i.length;f<a.length;f+=1)s(f);hr()}},i(o){if(!n){me(e.$$.fragment,o);for(let l=0;l<i.length;l+=1)me(a[l]);n=!0}},o(o){we(e.$$.fragment,o),a=a.filter(Boolean);for(let l=0;l<a.length;l+=1)we(a[l]);n=!1},d(o){He(e,o),Ks(a,o),o&&k(r)}}}function W0(t){let e,r,n,i,a,s,o,l,p;e=new PC({props:{p1:t[0],p2:t[6][t[27]].xy}});function f(...b){return t[13](t[27],...b)}function d(...b){return t[14](t[27],...b)}function h(...b){return t[15](t[27],...b)}function v(){return t[16](t[27])}return a=new Fa({props:{xy:t[6][t[27]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:v}}),s=new mu({props:{xy:t[9](t[6][t[27]].textXY,Vr(t[3],t[28].text.length,t[4])),color:`rgba(255,255,255,${Lr(t[6][t[27]].unitWeight)}`,wh:Vr(t[3],t[28].text.length,t[4]),fontSize:t[4],text:t[28].text}}),{c(){ze(e.$$.fragment),r=dt("path"),ze(a.$$.fragment),ze(s.$$.fragment),this.h()},l(b){qe(e.$$.fragment,b),r=pt(b,"path",{d:!0,fill:!0}),j(r).forEach(k),qe(a.$$.fragment,b),qe(s.$$.fragment,b),this.h()},h(){B(r,"d",n=H0(t[0],t[1],t[6][t[27]].angle,t[6][t[27]].angle+t[6][t[27]].angleDiff)),B(r,"fill",i=`rgba(26,47,91,${Lr(t[6][t[27]].unitWeight)/4}`)},m(b,g){We(e,b,g),le(b,r,g),We(a,b,g),We(s,b,g),o=!0,l||(p=[ge(r,"mousewheel",f),ge(r,"touchstart",d),ge(r,"mousedown",h)],l=!0)},p(b,g){t=b;const _={};g&1&&(_.p1=t[0]),g&96&&(_.p2=t[6][t[27]].xy),e.$set(_),(!o||g&99&&n!==(n=H0(t[0],t[1],t[6][t[27]].angle,t[6][t[27]].angle+t[6][t[27]].angleDiff)))&&B(r,"d",n),(!o||g&96&&i!==(i=`rgba(26,47,91,${Lr(t[6][t[27]].unitWeight)/4}`))&&B(r,"fill",i);const D={};g&96&&(D.xy=t[6][t[27]].xy),g&4&&(D.radius=t[2]),g&32&&(D.handleMouseDown=v),a.$set(D);const S={};g&120&&(S.xy=t[9](t[6][t[27]].textXY,Vr(t[3],t[28].text.length,t[4]))),g&96&&(S.color=`rgba(255,255,255,${Lr(t[6][t[27]].unitWeight)}`),g&56&&(S.wh=Vr(t[3],t[28].text.length,t[4])),g&16&&(S.fontSize=t[4]),g&32&&(S.text=t[28].text),s.$set(S)},i(b){o||(me(e.$$.fragment,b),me(a.$$.fragment,b),me(s.$$.fragment,b),o=!0)},o(b){we(e.$$.fragment,b),we(a.$$.fragment,b),we(s.$$.fragment,b),o=!1},d(b){He(e,b),b&&k(r),He(a,b),He(s,b),l=!1,$t(p)}}}function kC(t){let e,r,n,i,a=t[6]&&t[5].weightedPrompts&&q0(t);return{c(){e=dt("svg"),a&&a.c(),this.h()},l(s){e=pt(s,"svg",{id:!0,class:!0});var o=j(e);a&&a.l(o),o.forEach(k),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(s,o){le(s,e,o),a&&a.m(e,null),r=!0,n||(i=[ge(e,"mousemove",t[11]),ge(e,"touchmove",t[11]),ge(e,"mouseup",t[7]),ge(e,"touchend",t[7])],n=!0)},p(s,[o]){s[6]&&s[5].weightedPrompts?a?(a.p(s,o),o&96&&me(a,1)):(a=q0(s),a.c(),me(a,1),a.m(e,null)):a&&(cr(),we(a,1,1,()=>{a=null}),hr())},i(s){r||(me(a),r=!0)},o(s){we(a),r=!1},d(s){s&&k(e),a&&a.d(),n=!1,$t(i)}}}function TC(t,e){if(t.length!==e.length)return!1;const r=t.length;let n=-1;for(let i=0;i<r;i++)if(e[i]===t[0]){n=i;break}if(n===-1)return!1;for(let i=0;i<r;i++)if(t[i]!==e[(i+n)%r])return!1;return!0}function H0(t,e,r,n){const i=t[0]+e*Math.cos(r*Math.PI/180),a=t[1]+e*Math.sin(r*Math.PI/180),s=t[0]+e*Math.cos(n*Math.PI/180),o=t[1]+e*Math.sin(n*Math.PI/180),l=n-r<=180?"0":"1";return`M${t[0]},${t[1]} L${i},${a} A${e},${e} 0 ${l} 1 ${s},${o} Z`}function IC(t,e,r){let n,i;Ke(t,rt,V=>r(5,i=V));let{center:a=[450,450]}=e,{radius:s=250}=e,{pointRadius:o=10}=e,{textWidth:l=150}=e,{fontSize:p=13}=e,f=[0,0],d=null,h={},v=null,b;function g(V){v=null,b=null,d=null,h={}}function _(V){v=V}function D(V,L){let z=Rn(V,a,s)[0]-180;z<0&&(z+=360);const U=Vf(_u(L),z);return xr(V,U)}function S(V,L){return V?Object.entries(V).reduce((z,[U,J],ie)=>{const ae=z[U]||ie*(360/Object.keys(V).length)-90;return z[U]=qr(ae),z},L):null}function y(V,L){b=L}function F(V){const L=b,z={...i.pieAngles},U=Object.entries(z).sort((Le,Ve)=>qr(Le[1])-qr(Ve[1])).map(Le=>Le[0]),J=U.indexOf(L),ie=J+1===U.length?0:J+1,ae=U[ie];h[L]||(h[L]=z[L]),h[ae]||(h[ae]=z[ae]);const De=Rn(V,a,s)[0]-d,Ae={...z};Ae[L]=qr(De+h[L]),Ae[ae]=qr(De+h[ae]);const Be=Object.entries(Ae).sort((Le,Ve)=>qr(Le[1])-qr(Ve[1])).map(Le=>Le[0]);TC(U,Be)&&r(6,n=O(i.weightedPrompts,a,s,Ae))}function A(V){const L={...i.weightedPrompts[v]},z=fu(V,a,s),U=qr(Rn(z,a,s)[0]),J={...i.pieAngles};J[L.id]=U;const ie={...i.weightedPrompts};ie[v]=L,r(6,n=O(ie,a,s,J))}function C(V){V.preventDefault(),f=Kn(V),v?A(f):b?F(f):d=Rn(f,a,s)[0]}function M(V,L){V.preventDefault();const z={...i.pieAngles},U=Object.entries(z).sort((pe,De)=>qr(pe[1])-qr(De[1])).map(pe=>pe[0]),J=U.indexOf(L),ie=J+1===U.length?0:J+1,ae=U[ie];z[L]=qr(z[L]-V.deltaY/100),z[ae]=qr(z[ae]+V.deltaY/100),r(6,n=O(i.weightedPrompts,a,s,z))}function O(V,L,z,U){if(!V||!L||!z)return null;const J=Object.entries(V).sort((Ae,Be)=>qr(U[Ae[0]])-qr(U[Be[0]])),ie=J.map((Ae,Be)=>{const je=Be+1===J.length?0:Be+1,Le=U[J[je][0]]-U[J[Be][0]];return Le<0?[Ae[0],360+Le]:[Ae[0],Le]}),ae=Math.max(...ie.map(Ae=>Ae[1])),pe=ie.reduce((Ae,[Be,je])=>{({...V[Be]});const Le=U[Be],Ve=Rr(L,[Le,1],z),lt=Rr(L,[Le+.5*je,1],z),vt=je/ae;return Ae[Be]={xy:Ve,textXY:lt,angle:Le,angleDiff:je,unitWeight:vt},Ae},{}),De={...V};return Object.entries(pe).forEach(([Ae,Be])=>{De[Ae].pieWeight=Be.unitWeight}),rt.update({...i,weightedPrompts:De,pieAngles:U}),pe}const N=(V,L)=>M(L,V),q=(V,L)=>y(L,V),Z=(V,L)=>y(L,V),Q=V=>_(V);return t.$$set=V=>{"center"in V&&r(0,a=V.center),"radius"in V&&r(1,s=V.radius),"pointRadius"in V&&r(2,o=V.pointRadius),"textWidth"in V&&r(3,l=V.textWidth),"fontSize"in V&&r(4,p=V.fontSize)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(i.pieAngles||{}).length!==Object.keys(i.weightedPrompts).length&&rt.update({...i,pieAngles:S(i.weightedPrompts,{})}),t.$$.dirty&35&&r(6,n=O(i.weightedPrompts,a,s,i.pieAngles||S(i.weightedPrompts,{})))},[a,s,o,l,p,i,n,g,_,D,y,C,M,N,q,Z,Q]}class NC extends ut{constructor(e){super(),st(this,e,IC,kC,ot,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function xC(t){let e,r,n,i;return r=new NC({props:{center:[Math.round(t[0]/2),Math.round(t[1]/2)],radius:Math.round(Math.min(t[0],t[1])/2)-150}}),{c(){e=H("div"),ze(r.$$.fragment),this.h()},l(a){e=G(a,"DIV",{class:!0});var s=j(e);qe(r.$$.fragment,s),s.forEach(k),this.h()},h(){B(e,"class","w-full h-full"),Ji(()=>t[2].call(e))},m(a,s){le(a,e,s),We(r,e,null),n=vu(e,t[2].bind(e)),i=!0},p(a,[s]){const o={};s&3&&(o.center=[Math.round(a[0]/2),Math.round(a[1]/2)]),s&3&&(o.radius=Math.round(Math.min(a[0],a[1])/2)-150),r.$set(o)},i(a){i||(me(r.$$.fragment,a),i=!0)},o(a){we(r.$$.fragment,a),i=!1},d(a){a&&k(e),He(r),n()}}}function RC(t,e,r){let n,i;function a(){n=this.clientWidth,i=this.clientHeight,r(0,n),r(1,i)}return[n,i,a]}class LC extends ut{constructor(e){super(),st(this,e,RC,xC,ot,{})}}var Os={},UC={get exports(){return Os},set exports(t){Os=t}},Ms={},VC={get exports(){return Ms},set exports(t){Ms=t}},Ea=typeof Reflect=="object"?Reflect:null,G0=Ea&&typeof Ea.apply=="function"?Ea.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},ms;Ea&&typeof Ea.ownKeys=="function"?ms=Ea.ownKeys:Object.getOwnPropertySymbols?ms=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ms=function(e){return Object.getOwnPropertyNames(e)};function jC(t){console&&console.warn&&console.warn(t)}var h1=Number.isNaN||function(e){return e!==e};function Vt(){Vt.init.call(this)}VC.exports=Vt;Ms.once=HC;Vt.EventEmitter=Vt;Vt.prototype._events=void 0;Vt.prototype._eventsCount=0;Vt.prototype._maxListeners=void 0;var K0=10;function uo(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Vt,"defaultMaxListeners",{enumerable:!0,get:function(){return K0},set:function(t){if(typeof t!="number"||t<0||h1(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");K0=t}});Vt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Vt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||h1(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function d1(t){return t._maxListeners===void 0?Vt.defaultMaxListeners:t._maxListeners}Vt.prototype.getMaxListeners=function(){return d1(this)};Vt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var s;if(r.length>0&&(s=r[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var l=a[e];if(l===void 0)return!1;if(typeof l=="function")G0(l,this,r);else for(var p=l.length,f=_1(l,p),n=0;n<p;++n)G0(f[n],this,r);return!0};function p1(t,e,r,n){var i,a,s;if(uo(r),a=t._events,a===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),s=a[e]),s===void 0)s=a[e]=r,++t._eventsCount;else if(typeof s=="function"?s=a[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),i=d1(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=s.length,jC(o)}return t}Vt.prototype.addListener=function(e,r){return p1(this,e,r,!1)};Vt.prototype.on=Vt.prototype.addListener;Vt.prototype.prependListener=function(e,r){return p1(this,e,r,!0)};function zC(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v1(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=zC.bind(n);return i.listener=r,n.wrapFn=i,i}Vt.prototype.once=function(e,r){return uo(r),this.on(e,v1(this,e,r)),this};Vt.prototype.prependOnceListener=function(e,r){return uo(r),this.prependListener(e,v1(this,e,r)),this};Vt.prototype.removeListener=function(e,r){var n,i,a,s,o;if(uo(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(a=-1,s=n.length-1;s>=0;s--)if(n[s]===r||n[s].listener===r){o=n[s].listener,a=s;break}if(a<0)return this;a===0?n.shift():qC(n,a),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,o||r)}return this};Vt.prototype.off=Vt.prototype.removeListener;Vt.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var a=Object.keys(n),s;for(i=0;i<a.length;++i)s=a[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function g1(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?WC(i):_1(i,i.length)}Vt.prototype.listeners=function(e){return g1(this,e,!0)};Vt.prototype.rawListeners=function(e){return g1(this,e,!1)};Vt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):m1.call(t,e)};Vt.prototype.listenerCount=m1;function m1(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Vt.prototype.eventNames=function(){return this._eventsCount>0?ms(this._events):[]};function _1(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function qC(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function WC(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function HC(t,e){return new Promise(function(r,n){function i(s){t.removeListener(e,a),n(s)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}b1(t,e,a,{once:!0}),e!=="error"&&GC(t,i,{once:!0})})}function GC(t,e,r){typeof t.on=="function"&&b1(t,"error",e,r)}function b1(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(a){n.once&&t.removeEventListener(e,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}function KC(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}var $C=KC;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var YC=function(t){return t!=null&&(D1(t)||ZC(t)||!!t._isBuffer)};function D1(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function ZC(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&D1(t.slice(0,0))}var JC=$C,QC=YC,XC=typeof Float64Array<"u";function eF(t,e){return t[0]-e[0]}function tF(){var t=this.stride,e=new Array(t.length),r;for(r=0;r<e.length;++r)e[r]=[Math.abs(t[r]),r];e.sort(eF);var n=new Array(e.length);for(r=0;r<n.length;++r)n[r]=e[r][1];return n}function rF(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n=t==="generic";if(e===-1){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",g=new Function(i);return g()}else if(e===0){var i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",g=new Function("TrivialArray",i);return g(Ps[t][0])}var i=["'use strict'"],a=JC(e),s=a.map(function(_){return"i"+_}),o="this.offset+"+a.map(function(_){return"this.stride["+_+"]*i"+_}).join("+"),l=a.map(function(_){return"b"+_}).join(","),p=a.map(function(_){return"c"+_}).join(",");i.push("function "+r+"(a,"+l+","+p+",d){this.data=a","this.shape=["+l+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(_){return"this.shape["+_+"]"}).join("*"),"}})"),e===1?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+r+"_order(){"),e===2?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+s.join(",")+",v){"),n?i.push("return this.data.set("+o+",v)}"):i.push("return this.data["+o+"]=v}"),i.push("proto.get=function "+r+"_get("+s.join(",")+"){"),n?i.push("return this.data.get("+o+")}"):i.push("return this.data["+o+"]}"),i.push("proto.index=function "+r+"_index(",s.join(),"){return "+o+"}"),i.push("proto.hi=function "+r+"_hi("+s.join(",")+"){return new "+r+"(this.data,"+a.map(function(_){return["(typeof i",_,"!=='number'||i",_,"<0)?this.shape[",_,"]:i",_,"|0"].join("")}).join(",")+","+a.map(function(_){return"this.stride["+_+"]"}).join(",")+",this.offset)}");var f=a.map(function(_){return"a"+_+"=this.shape["+_+"]"}),d=a.map(function(_){return"c"+_+"=this.stride["+_+"]"});i.push("proto.lo=function "+r+"_lo("+s.join(",")+"){var b=this.offset,d=0,"+f.join(",")+","+d.join(","));for(var h=0;h<e;++h)i.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");i.push("return new "+r+"(this.data,"+a.map(function(_){return"a"+_}).join(",")+","+a.map(function(_){return"c"+_}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+s.join(",")+"){var "+a.map(function(_){return"a"+_+"=this.shape["+_+"]"}).join(",")+","+a.map(function(_){return"b"+_+"=this.stride["+_+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var h=0;h<e;++h)i.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");i.push("return new "+r+"(this.data,"+a.map(function(_){return"a"+_}).join(",")+","+a.map(function(_){return"b"+_}).join(",")+",c)}");for(var v=new Array(e),b=new Array(e),h=0;h<e;++h)v[h]="a[i"+h+"]",b[h]="b[i"+h+"]";i.push("proto.transpose=function "+r+"_transpose("+s+"){"+s.map(function(_,D){return _+"=("+_+"===undefined?"+D+":"+_+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+v.join(",")+","+b.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+s+"){var a=[],b=[],c=this.offset");for(var h=0;h<e;++h)i.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(_){return"shape["+_+"]"}).join(",")+","+a.map(function(_){return"stride["+_+"]"}).join(",")+",offset)}");var g=new Function("CTOR_LIST","ORDER",i.join(`
`));return g(Ps[t],tF)}function nF(t){if(QC(t))return"buffer";if(XC)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var Ps={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function iF(t,e,r,n){if(t===void 0){var p=Ps.array[0];return p([])}else typeof t=="number"&&(t=[t]);e===void 0&&(e=[t.length]);var i=e.length;if(r===void 0){r=new Array(i);for(var a=i-1,s=1;a>=0;--a)r[a]=s,s*=e[a]}if(n===void 0){n=0;for(var a=0;a<i;++a)r[a]<0&&(n-=(e[a]-1)*r[a])}for(var o=nF(t),l=Ps[o];l.length<=i+1;)l.push(rF(o,l.length-1));var p=l[i+1];return p(t,e,r,n)}var Sa=iF,so={};function aF(t,e){for(var r=1,n=t.length,i=t[0],a=t[0],s=1;s<n;++s)if(a=i,i=t[s],e(i,a)){if(s===r){r++;continue}t[r++]=i}return t.length=r,t}function uF(t){for(var e=1,r=t.length,n=t[0],i=t[0],a=1;a<r;++a,i=n)if(i=n,n=t[a],n!==i){if(a===e){e++;continue}t[e++]=n}return t.length=e,t}function sF(t,e,r){return t.length===0?t:e?(r||t.sort(e),aF(t,e)):(r||t.sort(),uF(t))}var w1=sF,oF=w1;function y1(t,e,r){var n=t.length,i=e.arrayArgs.length,a=e.indexArgs.length>0,s=[],o=[],l=0,p=0,f,d;for(f=0;f<n;++f)o.push(["i",f,"=0"].join(""));for(d=0;d<i;++d)for(f=0;f<n;++f)p=l,l=t[f],f===0?o.push(["d",d,"s",f,"=t",d,"p",l].join("")):o.push(["d",d,"s",f,"=(t",d,"p",l,"-s",p,"*t",d,"p",p,")"].join(""));for(o.length>0&&s.push("var "+o.join(",")),f=n-1;f>=0;--f)l=t[f],s.push(["for(i",f,"=0;i",f,"<s",l,";++i",f,"){"].join(""));for(s.push(r),f=0;f<n;++f){for(p=l,l=t[f],d=0;d<i;++d)s.push(["p",d,"+=d",d,"s",f].join(""));a&&(f>0&&s.push(["index[",p,"]-=s",p].join("")),s.push(["++index[",l,"]"].join(""))),s.push("}")}return s.join(`
`)}function lF(t,e,r,n){for(var i=e.length,a=r.arrayArgs.length,s=r.blockSize,o=r.indexArgs.length>0,l=[],p=0;p<a;++p)l.push(["var offset",p,"=p",p].join(""));for(var p=t;p<i;++p)l.push(["for(var j"+p+"=SS[",e[p],"]|0;j",p,">0;){"].join("")),l.push(["if(j",p,"<",s,"){"].join("")),l.push(["s",e[p],"=j",p].join("")),l.push(["j",p,"=0"].join("")),l.push(["}else{s",e[p],"=",s].join("")),l.push(["j",p,"-=",s,"}"].join("")),o&&l.push(["index[",e[p],"]=j",p].join(""));for(var p=0;p<a;++p){for(var f=["offset"+p],d=t;d<i;++d)f.push(["j",d,"*t",p,"p",e[d]].join(""));l.push(["p",p,"=(",f.join("+"),")"].join(""))}l.push(y1(e,r,n));for(var p=t;p<i;++p)l.push("}");return l.join(`
`)}function fF(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}function Ml(t,e,r){for(var n=t.body,i=[],a=[],s=0;s<t.args.length;++s){var o=t.args[s];if(!(o.count<=0)){var l=new RegExp(o.name,"g"),p="",f=e.arrayArgs.indexOf(s);switch(e.argTypes[s]){case"offset":var d=e.offsetArgIndex.indexOf(s),h=e.offsetArgs[d];f=h.array,p="+q"+d;case"array":p="p"+f+p;var v="l"+s,b="a"+f;if(e.arrayBlockIndices[f]===0)o.count===1?r[f]==="generic"?o.lvalue?(i.push(["var ",v,"=",b,".get(",p,")"].join("")),n=n.replace(l,v),a.push([b,".set(",p,",",v,")"].join(""))):n=n.replace(l,[b,".get(",p,")"].join("")):n=n.replace(l,[b,"[",p,"]"].join("")):r[f]==="generic"?(i.push(["var ",v,"=",b,".get(",p,")"].join("")),n=n.replace(l,v),o.lvalue&&a.push([b,".set(",p,",",v,")"].join(""))):(i.push(["var ",v,"=",b,"[",p,"]"].join("")),n=n.replace(l,v),o.lvalue&&a.push([b,"[",p,"]=",v].join("")));else{for(var g=[o.name],_=[p],D=0;D<Math.abs(e.arrayBlockIndices[f]);D++)g.push("\\s*\\[([^\\]]+)\\]"),_.push("$"+(D+1)+"*t"+f+"b"+D);if(l=new RegExp(g.join(""),"g"),p=_.join("+"),r[f]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(l,[b,"[",p,"]"].join(""))}break;case"scalar":n=n.replace(l,"Y"+e.scalarArgs.indexOf(s));break;case"index":n=n.replace(l,"index");break;case"shape":n=n.replace(l,"shape");break}}}return[i.join(`
`),n,a.join(`
`)].join(`
`).trim()}function cF(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],a=i.match(/\d+/);a?a=a[0]:a="",i.charAt(0)===0?e[n]="u"+i.charAt(1)+a:e[n]=i.charAt(0)+a,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}function hF(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,n=new Array(t.arrayArgs.length),i=new Array(t.arrayArgs.length),a=0;a<t.arrayArgs.length;++a)i[a]=e[2*a],n[a]=e[2*a+1];for(var s=[],o=[],l=[],p=[],f=[],a=0;a<t.arrayArgs.length;++a){t.arrayBlockIndices[a]<0?(l.push(0),p.push(r),s.push(r),o.push(r+t.arrayBlockIndices[a])):(l.push(t.arrayBlockIndices[a]),p.push(t.arrayBlockIndices[a]+r),s.push(0),o.push(t.arrayBlockIndices[a]));for(var d=[],h=0;h<n[a].length;h++)l[a]<=n[a][h]&&n[a][h]<p[a]&&d.push(n[a][h]-l[a]);f.push(d)}for(var v=["SS"],b=["'use strict'"],g=[],h=0;h<r;++h)g.push(["s",h,"=SS[",h,"]"].join(""));for(var a=0;a<t.arrayArgs.length;++a){v.push("a"+a),v.push("t"+a),v.push("p"+a);for(var h=0;h<r;++h)g.push(["t",a,"p",h,"=t",a,"[",l[a]+h,"]"].join(""));for(var h=0;h<Math.abs(t.arrayBlockIndices[a]);++h)g.push(["t",a,"b",h,"=t",a,"[",s[a]+h,"]"].join(""))}for(var a=0;a<t.scalarArgs.length;++a)v.push("Y"+a);if(t.shapeArgs.length>0&&g.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var _=new Array(r),a=0;a<r;++a)_[a]="0";g.push(["index=[",_.join(","),"]"].join(""))}for(var a=0;a<t.offsetArgs.length;++a){for(var D=t.offsetArgs[a],S=[],h=0;h<D.offset.length;++h)D.offset[h]!==0&&(D.offset[h]===1?S.push(["t",D.array,"p",h].join("")):S.push([D.offset[h],"*t",D.array,"p",h].join("")));S.length===0?g.push("q"+a+"=0"):g.push(["q",a,"=",S.join("+")].join(""))}var y=oF([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));g=g.concat(y),g.length>0&&b.push("var "+g.join(","));for(var a=0;a<t.arrayArgs.length;++a)b.push("p"+a+"|=0");t.pre.body.length>3&&b.push(Ml(t.pre,t,i));var F=Ml(t.body,t,i),A=fF(f);A<r?b.push(lF(A,f[0],t,F)):b.push(y1(f[0],t,F)),t.post.body.length>3&&b.push(Ml(t.post,t,i)),t.debug&&console.log("-----Generated cwise routine for ",e,`:
`+b.join(`
`)+`
----------`);var C=[t.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",A,cF(i)].join(""),M=new Function(["function ",C,"(",v.join(","),"){",b.join(`
`),"} return ",C].join(""));return M()}var dF=hF,pF=dF;function vF(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var i=[],a=[],s=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],o=[],l=[],p=0;p<t.arrayArgs.length;++p){var f=t.arrayArgs[p];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),i.push("t"+f),i.push("r"+f),a.push("t"+f),a.push("r"+f+".join()"),s.push("array"+f+".data"),s.push("array"+f+".stride"),s.push("array"+f+".offset|0"),p>0&&(o.push("array"+t.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[p]))),l.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[p])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+o.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var p=0;p<t.scalarArgs.length;++p)s.push("scalar"+t.scalarArgs[p]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",s.join(","),")}"].join("")),t.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var d=new Function("compile",e.join(`
`));return d(pF.bind(void 0,t))}var gF=vF,mF=gF;function _F(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function bF(t){var e=new _F;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var n=0;n<r.length;++n){var i=r[n];if(i==="array"||typeof i=="object"&&i.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(i==="scalar")e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if(i==="index"){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(i==="shape"){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof i=="object"&&i.offset)e.argTypes[n]="offset",e.offsetArgs.push({array:i.array,offset:i.offset}),e.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+r[n])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,mF(e)}var jf=bF;(function(t){var e=jf,r={body:"",args:[],thisVars:[],localVars:[]};function n(h){if(!h)return r;for(var v=0;v<h.args.length;++v){var b=h.args[v];v===0?h.args[v]={name:b,lvalue:!0,rvalue:!!h.rvalue,count:h.count||1}:h.args[v]={name:b,lvalue:!1,rvalue:!0,count:1}}return h.thisVars||(h.thisVars=[]),h.localVars||(h.localVars=[]),h}function i(h){return e({args:h.args,pre:n(h.pre),body:n(h.body),post:n(h.proc),funcName:h.funcName})}function a(h){for(var v=[],b=0;b<h.args.length;++b)v.push("a"+b);var g=new Function("P",["return function ",h.funcName,"_ndarrayops(",v.join(","),") {P(",v.join(","),");return a0}"].join(""));return g(i(h))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var h in s){var v=s[h];t[h]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+v+"c"},funcName:h}),t[h+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+v+"=b"},rvalue:!0,funcName:h+"eq"}),t[h+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+v+"s"},funcName:h+"s"}),t[h+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+v+"=s"},rvalue:!0,funcName:h+"seq"})}})();var o={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var h in o){var v=o[h];t[h]=a({args:["array","array"],body:{args:["a","b"],body:"a="+v+"b"},funcName:h}),t[h+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+v+"a"},rvalue:!0,count:2,funcName:h+"eq"})}})();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var h in l){var v=l[h];t[h]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+v+"c"},funcName:h}),t[h+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+v+"s"},funcName:h+"s"}),t[h+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+v+"b"},rvalue:!0,count:2,funcName:h+"eq"}),t[h+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+v+"s"},rvalue:!0,count:2,funcName:h+"seq"})}})();var p=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var h=0;h<p.length;++h){var v=p[h];t[v]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:v}),t[v+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:v+"eq"})}})();var f=["max","min","atan2","pow"];(function(){for(var h=0;h<f.length;++h){var v=f[h];t[v]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:v}),t[v+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:v+"s"}),t[v+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:v+"eq"}),t[v+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:v+"seq"})}})();var d=["atan2","pow"];(function(){for(var h=0;h<d.length;++h){var v=d[h];t[v+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:v+"op"}),t[v+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:v+"ops"}),t[v+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:v+"opeq"}),t[v+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:v+"opseq"})}})(),t.any=e({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=e({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=e({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(so);var DF=jf({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64}),$0=Sa,wF=DF,yF=function(e,r){for(var n=[],i=e,a=1;Array.isArray(i);)n.push(i.length),a*=i.length,i=i[0];return n.length===0?$0():(r||(r=$0(new Float64Array(a),n)),wF(r,e),r)};function E1(t,e,r){var n=t[r]|0;if(n<=0)return[];var i=new Array(n),a;if(r===t.length-1)for(a=0;a<n;++a)i[a]=e;else for(a=0;a<n;++a)i[a]=E1(t,e,r+1);return i}function EF(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function AF(t,e){switch(typeof e>"u"&&(e=0),typeof t){case"number":if(t>0)return EF(t|0,e);break;case"object":if(typeof t.length=="number")return E1(t,e,0);break}return[]}var CF=AF,A1={};(function(t){(function(e,r){r(t)})(vr,function(e){var r,n,i,a,s,o,l,p,f,d,h,v,b,g,_,D,S,y;r={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},n={},n[r.BooleanLiteral]="Boolean",n[r.EOF]="<end>",n[r.Identifier]="Identifier",n[r.Keyword]="Keyword",n[r.NullLiteral]="Null",n[r.NumericLiteral]="Numeric",n[r.Punctuator]="Punctuator",n[r.StringLiteral]="String",n[r.RegularExpression]="RegularExpression",i=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},s={Data:1,Get:2,Set:4},o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},l={NonAsciiIdentifierStart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")};function F(w,P){if(!w)throw new Error("ASSERT: "+P)}function A(w){return w>=48&&w<=57}function C(w){return"0123456789abcdefABCDEF".indexOf(w)>=0}function M(w){return"01234567".indexOf(w)>=0}function O(w){return w===32||w===9||w===11||w===12||w===160||w>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(w)>=0}function N(w){return w===10||w===13||w===8232||w===8233}function q(w){return w===36||w===95||w>=65&&w<=90||w>=97&&w<=122||w===92||w>=128&&l.NonAsciiIdentifierStart.test(String.fromCharCode(w))}function Z(w){return w===36||w===95||w>=65&&w<=90||w>=97&&w<=122||w>=48&&w<=57||w===92||w>=128&&l.NonAsciiIdentifierPart.test(String.fromCharCode(w))}function Q(w){switch(w){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function V(w){switch(w){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function L(w){return w==="eval"||w==="arguments"}function z(w){if(d&&V(w))return!0;switch(w.length){case 2:return w==="if"||w==="in"||w==="do";case 3:return w==="var"||w==="for"||w==="new"||w==="try"||w==="let";case 4:return w==="this"||w==="else"||w==="case"||w==="void"||w==="with"||w==="enum";case 5:return w==="while"||w==="break"||w==="catch"||w==="throw"||w==="const"||w==="yield"||w==="class"||w==="super";case 6:return w==="return"||w==="typeof"||w==="delete"||w==="switch"||w==="export"||w==="import";case 7:return w==="default"||w==="finally"||w==="extends";case 8:return w==="function"||w==="continue"||w==="debugger";case 10:return w==="instanceof";default:return!1}}function U(w,P,W,te,ve){var Ie;F(typeof W=="number","Comment must have valid position"),!(S.lastCommentStart>=W)&&(S.lastCommentStart=W,Ie={type:w,value:P},y.range&&(Ie.range=[W,te]),y.loc&&(Ie.loc=ve),y.comments.push(Ie),y.attachComment&&(y.leadingComments.push(Ie),y.trailingComments.push(Ie)))}function J(w){var P,W,te,ve;for(P=h-w,W={start:{line:v,column:h-b-w}};h<g;)if(te=f.charCodeAt(h),++h,N(te)){y.comments&&(ve=f.slice(P+w,h-1),W.end={line:v,column:h-b-1},U("Line",ve,P,h-1,W)),te===13&&f.charCodeAt(h)===10&&++h,++v,b=h;return}y.comments&&(ve=f.slice(P+w,h),W.end={line:v,column:h-b},U("Line",ve,P,h,W))}function ie(){var w,P,W,te;for(y.comments&&(w=h-2,P={start:{line:v,column:h-b-2}});h<g;)if(W=f.charCodeAt(h),N(W))W===13&&f.charCodeAt(h+1)===10&&++h,++v,++h,b=h,h>=g&&Y({},o.UnexpectedToken,"ILLEGAL");else if(W===42){if(f.charCodeAt(h+1)===47){++h,++h,y.comments&&(te=f.slice(w+2,h-2),P.end={line:v,column:h-b},U("Block",te,w,h,P));return}++h}else++h;Y({},o.UnexpectedToken,"ILLEGAL")}function ae(){var w,P;for(P=h===0;h<g;)if(w=f.charCodeAt(h),O(w))++h;else if(N(w))++h,w===13&&f.charCodeAt(h)===10&&++h,++v,b=h,P=!0;else if(w===47)if(w=f.charCodeAt(h+1),w===47)++h,++h,J(2),P=!0;else if(w===42)++h,++h,ie();else break;else if(P&&w===45)if(f.charCodeAt(h+1)===45&&f.charCodeAt(h+2)===62)h+=3,J(3);else break;else if(w===60)if(f.slice(h+1,h+4)==="!--")++h,++h,++h,++h,J(4);else break;else break}function pe(w){var P,W,te,ve=0;for(W=w==="u"?4:2,P=0;P<W;++P)if(h<g&&C(f[h]))te=f[h++],ve=ve*16+"0123456789abcdef".indexOf(te.toLowerCase());else return"";return String.fromCharCode(ve)}function De(){var w,P;for(w=f.charCodeAt(h++),P=String.fromCharCode(w),w===92&&(f.charCodeAt(h)!==117&&Y({},o.UnexpectedToken,"ILLEGAL"),++h,w=pe("u"),(!w||w==="\\"||!q(w.charCodeAt(0)))&&Y({},o.UnexpectedToken,"ILLEGAL"),P=w);h<g&&(w=f.charCodeAt(h),!!Z(w));)++h,P+=String.fromCharCode(w),w===92&&(P=P.substr(0,P.length-1),f.charCodeAt(h)!==117&&Y({},o.UnexpectedToken,"ILLEGAL"),++h,w=pe("u"),(!w||w==="\\"||!Z(w.charCodeAt(0)))&&Y({},o.UnexpectedToken,"ILLEGAL"),P+=w);return P}function Ae(){var w,P;for(w=h++;h<g;){if(P=f.charCodeAt(h),P===92)return h=w,De();if(Z(P))++h;else break}return f.slice(w,h)}function Be(){var w,P,W;return w=h,P=f.charCodeAt(h)===92?De():Ae(),P.length===1?W=r.Identifier:z(P)?W=r.Keyword:P==="null"?W=r.NullLiteral:P==="true"||P==="false"?W=r.BooleanLiteral:W=r.Identifier,{type:W,value:P,lineNumber:v,lineStart:b,start:w,end:h}}function je(){var w=h,P=f.charCodeAt(h),W,te=f[h],ve,Ie,Dt;switch(P){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++h,y.tokenize&&(P===40?y.openParenToken=y.tokens.length:P===123&&(y.openCurlyToken=y.tokens.length)),{type:r.Punctuator,value:String.fromCharCode(P),lineNumber:v,lineStart:b,start:w,end:h};default:if(W=f.charCodeAt(h+1),W===61)switch(P){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return h+=2,{type:r.Punctuator,value:String.fromCharCode(P)+String.fromCharCode(W),lineNumber:v,lineStart:b,start:w,end:h};case 33:case 61:return h+=2,f.charCodeAt(h)===61&&++h,{type:r.Punctuator,value:f.slice(w,h),lineNumber:v,lineStart:b,start:w,end:h}}}if(Dt=f.substr(h,4),Dt===">>>=")return h+=4,{type:r.Punctuator,value:Dt,lineNumber:v,lineStart:b,start:w,end:h};if(Ie=Dt.substr(0,3),Ie===">>>"||Ie==="<<="||Ie===">>=")return h+=3,{type:r.Punctuator,value:Ie,lineNumber:v,lineStart:b,start:w,end:h};if(ve=Ie.substr(0,2),te===ve[1]&&"+-<>&|".indexOf(te)>=0||ve==="=>")return h+=2,{type:r.Punctuator,value:ve,lineNumber:v,lineStart:b,start:w,end:h};if("<>=!+-*%&|^/".indexOf(te)>=0)return++h,{type:r.Punctuator,value:te,lineNumber:v,lineStart:b,start:w,end:h};Y({},o.UnexpectedToken,"ILLEGAL")}function Le(w){for(var P="";h<g&&C(f[h]);)P+=f[h++];return P.length===0&&Y({},o.UnexpectedToken,"ILLEGAL"),q(f.charCodeAt(h))&&Y({},o.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt("0x"+P,16),lineNumber:v,lineStart:b,start:w,end:h}}function Ve(w){for(var P="0"+f[h++];h<g&&M(f[h]);)P+=f[h++];return(q(f.charCodeAt(h))||A(f.charCodeAt(h)))&&Y({},o.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt(P,8),octal:!0,lineNumber:v,lineStart:b,start:w,end:h}}function lt(){var w,P;for(w=h+1;w<g;++w){if(P=f[w],P==="8"||P==="9")return!1;if(!M(P))return!0}return!0}function vt(){var w,P,W;if(W=f[h],F(A(W.charCodeAt(0))||W===".","Numeric literal must start with a decimal digit or a decimal point"),P=h,w="",W!=="."){if(w=f[h++],W=f[h],w==="0"){if(W==="x"||W==="X")return++h,Le(P);if(M(W)&&lt())return Ve(P)}for(;A(f.charCodeAt(h));)w+=f[h++];W=f[h]}if(W==="."){for(w+=f[h++];A(f.charCodeAt(h));)w+=f[h++];W=f[h]}if(W==="e"||W==="E")if(w+=f[h++],W=f[h],(W==="+"||W==="-")&&(w+=f[h++]),A(f.charCodeAt(h)))for(;A(f.charCodeAt(h));)w+=f[h++];else Y({},o.UnexpectedToken,"ILLEGAL");return q(f.charCodeAt(h))&&Y({},o.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseFloat(w),lineNumber:v,lineStart:b,start:P,end:h}}function Ze(){var w="",P,W,te,ve,Ie,Dt,Bt=!1,Yt,or;for(Yt=v,or=b,P=f[h],F(P==="'"||P==='"',"String literal must starts with a quote"),W=h,++h;h<g;)if(te=f[h++],te===P){P="";break}else if(te==="\\")if(te=f[h++],!te||!N(te.charCodeAt(0)))switch(te){case"u":case"x":Dt=h,Ie=pe(te),Ie?w+=Ie:(h=Dt,w+=te);break;case"n":w+=`
`;break;case"r":w+="\r";break;case"t":w+="	";break;case"b":w+="\b";break;case"f":w+="\f";break;case"v":w+="\v";break;default:M(te)?(ve="01234567".indexOf(te),ve!==0&&(Bt=!0),h<g&&M(f[h])&&(Bt=!0,ve=ve*8+"01234567".indexOf(f[h++]),"0123".indexOf(te)>=0&&h<g&&M(f[h])&&(ve=ve*8+"01234567".indexOf(f[h++]))),w+=String.fromCharCode(ve)):w+=te;break}else++v,te==="\r"&&f[h]===`
`&&++h,b=h;else{if(N(te.charCodeAt(0)))break;w+=te}return P!==""&&Y({},o.UnexpectedToken,"ILLEGAL"),{type:r.StringLiteral,value:w,octal:Bt,startLineNumber:Yt,startLineStart:or,lineNumber:v,lineStart:b,start:W,end:h}}function Ye(w,P){var W;try{W=new RegExp(w,P)}catch{Y({},o.InvalidRegExp)}return W}function Ct(){var w,P,W,te,ve;for(w=f[h],F(w==="/","Regular expression literal must start with a slash"),P=f[h++],W=!1,te=!1;h<g;)if(w=f[h++],P+=w,w==="\\")w=f[h++],N(w.charCodeAt(0))&&Y({},o.UnterminatedRegExp),P+=w;else if(N(w.charCodeAt(0)))Y({},o.UnterminatedRegExp);else if(W)w==="]"&&(W=!1);else if(w==="/"){te=!0;break}else w==="["&&(W=!0);return te||Y({},o.UnterminatedRegExp),ve=P.substr(1,P.length-2),{value:ve,literal:P}}function Je(){var w,P,W,te;for(P="",W="";h<g&&(w=f[h],!!Z(w.charCodeAt(0)));)if(++h,w==="\\"&&h<g)if(w=f[h],w==="u"){if(++h,te=h,w=pe("u"),w)for(W+=w,P+="\\u";te<h;++te)P+=f[te];else h=te,W+="u",P+="\\u";ee({},o.UnexpectedToken,"ILLEGAL")}else P+="\\",ee({},o.UnexpectedToken,"ILLEGAL");else W+=w,P+=w;return{value:W,literal:P}}function ht(){var w,P,W,te;return D=null,ae(),w=h,P=Ct(),W=Je(),te=Ye(P.value,W.value),y.tokenize?{type:r.RegularExpression,value:te,lineNumber:v,lineStart:b,start:w,end:h}:{literal:P.literal+W.literal,value:te,start:w,end:h}}function ft(){var w,P,W,te;return ae(),w=h,P={start:{line:v,column:h-b}},W=ht(),P.end={line:v,column:h-b},y.tokenize||(y.tokens.length>0&&(te=y.tokens[y.tokens.length-1],te.range[0]===w&&te.type==="Punctuator"&&(te.value==="/"||te.value==="/=")&&y.tokens.pop()),y.tokens.push({type:"RegularExpression",value:W.literal,range:[w,h],loc:P})),W}function gt(w){return w.type===r.Identifier||w.type===r.Keyword||w.type===r.BooleanLiteral||w.type===r.NullLiteral}function Qe(){var w,P;if(w=y.tokens[y.tokens.length-1],!w)return ft();if(w.type==="Punctuator"){if(w.value==="]")return je();if(w.value===")")return P=y.tokens[y.openParenToken-1],P&&P.type==="Keyword"&&(P.value==="if"||P.value==="while"||P.value==="for"||P.value==="with")?ft():je();if(w.value==="}"){if(y.tokens[y.openCurlyToken-3]&&y.tokens[y.openCurlyToken-3].type==="Keyword"){if(P=y.tokens[y.openCurlyToken-4],!P)return je()}else if(y.tokens[y.openCurlyToken-4]&&y.tokens[y.openCurlyToken-4].type==="Keyword"){if(P=y.tokens[y.openCurlyToken-5],!P)return ft()}else return je();return i.indexOf(P.value)>=0?je():ft()}return ft()}return w.type==="Keyword"&&w.value!=="this"?ft():je()}function Xe(){var w;return ae(),h>=g?{type:r.EOF,lineNumber:v,lineStart:b,start:h,end:h}:(w=f.charCodeAt(h),q(w)?Be():w===40||w===41||w===59?je():w===39||w===34?Ze():w===46?A(f.charCodeAt(h+1))?vt():je():A(w)?vt():y.tokenize&&w===47?Qe():je())}function ke(){var w,P,W;return ae(),w={start:{line:v,column:h-b}},P=Xe(),w.end={line:v,column:h-b},P.type!==r.EOF&&(W=f.slice(P.start,P.end),y.tokens.push({type:n[P.type],value:W,range:[P.start,P.end],loc:w})),P}function Ne(){var w;return w=D,h=w.end,v=w.lineNumber,b=w.lineStart,D=typeof y.tokens<"u"?ke():Xe(),h=w.end,v=w.lineNumber,b=w.lineStart,w}function Mt(){var w,P,W;w=h,P=v,W=b,D=typeof y.tokens<"u"?ke():Xe(),h=w,v=P,b=W}function jt(w,P){this.line=w,this.column=P}function Gt(w,P,W,te){this.start=new jt(w,P),this.end=new jt(W,te)}p={name:"SyntaxTree",processComment:function(w){var P,W;if(!(w.type===a.Program&&w.body.length>0)){for(y.trailingComments.length>0?y.trailingComments[0].range[0]>=w.range[1]?(W=y.trailingComments,y.trailingComments=[]):y.trailingComments.length=0:y.bottomRightStack.length>0&&y.bottomRightStack[y.bottomRightStack.length-1].trailingComments&&y.bottomRightStack[y.bottomRightStack.length-1].trailingComments[0].range[0]>=w.range[1]&&(W=y.bottomRightStack[y.bottomRightStack.length-1].trailingComments,delete y.bottomRightStack[y.bottomRightStack.length-1].trailingComments);y.bottomRightStack.length>0&&y.bottomRightStack[y.bottomRightStack.length-1].range[0]>=w.range[0];)P=y.bottomRightStack.pop();P?P.leadingComments&&P.leadingComments[P.leadingComments.length-1].range[1]<=w.range[0]&&(w.leadingComments=P.leadingComments,delete P.leadingComments):y.leadingComments.length>0&&y.leadingComments[y.leadingComments.length-1].range[1]<=w.range[0]&&(w.leadingComments=y.leadingComments,y.leadingComments=[]),W&&(w.trailingComments=W),y.bottomRightStack.push(w)}},markEnd:function(w,P){return y.range&&(w.range=[P.start,h]),y.loc&&(w.loc=new Gt(P.startLineNumber===void 0?P.lineNumber:P.startLineNumber,P.start-(P.startLineStart===void 0?P.lineStart:P.startLineStart),v,h-b),this.postProcess(w)),y.attachComment&&this.processComment(w),w},postProcess:function(w){return y.source&&(w.loc.source=y.source),w},createArrayExpression:function(w){return{type:a.ArrayExpression,elements:w}},createAssignmentExpression:function(w,P,W){return{type:a.AssignmentExpression,operator:w,left:P,right:W}},createBinaryExpression:function(w,P,W){var te=w==="||"||w==="&&"?a.LogicalExpression:a.BinaryExpression;return{type:te,operator:w,left:P,right:W}},createBlockStatement:function(w){return{type:a.BlockStatement,body:w}},createBreakStatement:function(w){return{type:a.BreakStatement,label:w}},createCallExpression:function(w,P){return{type:a.CallExpression,callee:w,arguments:P}},createCatchClause:function(w,P){return{type:a.CatchClause,param:w,body:P}},createConditionalExpression:function(w,P,W){return{type:a.ConditionalExpression,test:w,consequent:P,alternate:W}},createContinueStatement:function(w){return{type:a.ContinueStatement,label:w}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(w,P){return{type:a.DoWhileStatement,body:w,test:P}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(w){return{type:a.ExpressionStatement,expression:w}},createForStatement:function(w,P,W,te){return{type:a.ForStatement,init:w,test:P,update:W,body:te}},createForInStatement:function(w,P,W){return{type:a.ForInStatement,left:w,right:P,body:W,each:!1}},createFunctionDeclaration:function(w,P,W,te){return{type:a.FunctionDeclaration,id:w,params:P,defaults:W,body:te,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(w,P,W,te){return{type:a.FunctionExpression,id:w,params:P,defaults:W,body:te,rest:null,generator:!1,expression:!1}},createIdentifier:function(w){return{type:a.Identifier,name:w}},createIfStatement:function(w,P,W){return{type:a.IfStatement,test:w,consequent:P,alternate:W}},createLabeledStatement:function(w,P){return{type:a.LabeledStatement,label:w,body:P}},createLiteral:function(w){return{type:a.Literal,value:w.value,raw:f.slice(w.start,w.end)}},createMemberExpression:function(w,P,W){return{type:a.MemberExpression,computed:w==="[",object:P,property:W}},createNewExpression:function(w,P){return{type:a.NewExpression,callee:w,arguments:P}},createObjectExpression:function(w){return{type:a.ObjectExpression,properties:w}},createPostfixExpression:function(w,P){return{type:a.UpdateExpression,operator:w,argument:P,prefix:!1}},createProgram:function(w){return{type:a.Program,body:w}},createProperty:function(w,P,W){return{type:a.Property,key:P,value:W,kind:w}},createReturnStatement:function(w){return{type:a.ReturnStatement,argument:w}},createSequenceExpression:function(w){return{type:a.SequenceExpression,expressions:w}},createSwitchCase:function(w,P){return{type:a.SwitchCase,test:w,consequent:P}},createSwitchStatement:function(w,P){return{type:a.SwitchStatement,discriminant:w,cases:P}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(w){return{type:a.ThrowStatement,argument:w}},createTryStatement:function(w,P,W,te){return{type:a.TryStatement,block:w,guardedHandlers:P,handlers:W,finalizer:te}},createUnaryExpression:function(w,P){return w==="++"||w==="--"?{type:a.UpdateExpression,operator:w,argument:P,prefix:!0}:{type:a.UnaryExpression,operator:w,argument:P,prefix:!0}},createVariableDeclaration:function(w,P){return{type:a.VariableDeclaration,declarations:w,kind:P}},createVariableDeclarator:function(w,P){return{type:a.VariableDeclarator,id:w,init:P}},createWhileStatement:function(w,P){return{type:a.WhileStatement,test:w,body:P}},createWithStatement:function(w,P){return{type:a.WithStatement,object:w,body:P}}};function K(){var w,P,W,te;return w=h,P=v,W=b,ae(),te=v!==P,h=w,v=P,b=W,te}function Y(w,P){var W,te=Array.prototype.slice.call(arguments,2),ve=P.replace(/%(\d)/g,function(Ie,Dt){return F(Dt<te.length,"Message reference must be in range"),te[Dt]});throw typeof w.lineNumber=="number"?(W=new Error("Line "+w.lineNumber+": "+ve),W.index=w.start,W.lineNumber=w.lineNumber,W.column=w.start-b+1):(W=new Error("Line "+v+": "+ve),W.index=h,W.lineNumber=v,W.column=h-b+1),W.description=ve,W}function ee(){try{Y.apply(null,arguments)}catch(w){if(y.errors)y.errors.push(w);else throw w}}function fe(w){if(w.type===r.EOF&&Y(w,o.UnexpectedEOS),w.type===r.NumericLiteral&&Y(w,o.UnexpectedNumber),w.type===r.StringLiteral&&Y(w,o.UnexpectedString),w.type===r.Identifier&&Y(w,o.UnexpectedIdentifier),w.type===r.Keyword){if(Q(w.value))Y(w,o.UnexpectedReserved);else if(d&&V(w.value)){ee(w,o.StrictReservedWord);return}Y(w,o.UnexpectedToken,w.value)}Y(w,o.UnexpectedToken,w.value)}function ue(w){var P=Ne();(P.type!==r.Punctuator||P.value!==w)&&fe(P)}function he(w){var P=Ne();(P.type!==r.Keyword||P.value!==w)&&fe(P)}function se(w){return D.type===r.Punctuator&&D.value===w}function ce(w){return D.type===r.Keyword&&D.value===w}function Ce(){var w;return D.type!==r.Punctuator?!1:(w=D.value,w==="="||w==="*="||w==="/="||w==="%="||w==="+="||w==="-="||w==="<<="||w===">>="||w===">>>="||w==="&="||w==="^="||w==="|=")}function Re(){var w,P=h,W=v,te=b,ve=D;if(f.charCodeAt(h)===59||se(";")){Ne();return}if(w=v,ae(),v!==w){h=P,v=W,b=te,D=ve;return}D.type!==r.EOF&&!se("}")&&fe(D)}function nt(w){return w.type===a.Identifier||w.type===a.MemberExpression}function Te(){var w=[],P;for(P=D,ue("[");!se("]");)se(",")?(Ne(),w.push(null)):(w.push(Or()),se("]")||ue(","));return Ne(),_.markEnd(_.createArrayExpression(w),P)}function Wt(w,P){var W,te,ve;return W=d,ve=D,te=xi(),P&&d&&L(w[0].name)&&ee(P,o.StrictParamName),d=W,_.markEnd(_.createFunctionExpression(null,w,[],te),ve)}function Lt(){var w,P;return P=D,w=Ne(),w.type===r.StringLiteral||w.type===r.NumericLiteral?(d&&w.octal&&ee(w,o.StrictOctalLiteral),_.markEnd(_.createLiteral(w),P)):_.markEnd(_.createIdentifier(w.value),P)}function nr(){var w,P,W,te,ve,Ie;if(w=D,Ie=D,w.type===r.Identifier)return W=Lt(),w.value==="get"&&!se(":")?(P=Lt(),ue("("),ue(")"),te=Wt([]),_.markEnd(_.createProperty("get",P,te),Ie)):w.value==="set"&&!se(":")?(P=Lt(),ue("("),w=D,w.type!==r.Identifier?(ue(")"),ee(w,o.UnexpectedToken,w.value),te=Wt([])):(ve=[gn()],ue(")"),te=Wt(ve,w)),_.markEnd(_.createProperty("set",P,te),Ie)):(ue(":"),te=Or(),_.markEnd(_.createProperty("init",W,te),Ie));if(w.type===r.EOF||w.type===r.Punctuator)fe(w);else return P=Lt(),ue(":"),te=Or(),_.markEnd(_.createProperty("init",P,te),Ie)}function Jt(){var w=[],P,W,te,ve,Ie={},Dt=String,Bt;for(Bt=D,ue("{");!se("}");)P=nr(),P.key.type===a.Identifier?W=P.key.name:W=Dt(P.key.value),ve=P.kind==="init"?s.Data:P.kind==="get"?s.Get:s.Set,te="$"+W,Object.prototype.hasOwnProperty.call(Ie,te)?(Ie[te]===s.Data?d&&ve===s.Data?ee({},o.StrictDuplicateProperty):ve!==s.Data&&ee({},o.AccessorDataProperty):ve===s.Data?ee({},o.AccessorDataProperty):Ie[te]&ve&&ee({},o.AccessorGetSet),Ie[te]|=ve):Ie[te]=ve,w.push(P),se("}")||ue(",");return ue("}"),_.markEnd(_.createObjectExpression(w),Bt)}function yr(){var w;return ue("("),w=ir(),ue(")"),w}function Qt(){var w,P,W,te;if(se("("))return yr();if(se("["))return Te();if(se("{"))return Jt();if(w=D.type,te=D,w===r.Identifier)W=_.createIdentifier(Ne().value);else if(w===r.StringLiteral||w===r.NumericLiteral)d&&D.octal&&ee(D,o.StrictOctalLiteral),W=_.createLiteral(Ne());else if(w===r.Keyword){if(ce("function"))return Ri();ce("this")?(Ne(),W=_.createThisExpression()):fe(Ne())}else w===r.BooleanLiteral?(P=Ne(),P.value=P.value==="true",W=_.createLiteral(P)):w===r.NullLiteral?(P=Ne(),P.value=null,W=_.createLiteral(P)):se("/")||se("/=")?(typeof y.tokens<"u"?W=_.createLiteral(ft()):W=_.createLiteral(ht()),Mt()):fe(Ne());return _.markEnd(W,te)}function Er(){var w=[];if(ue("("),!se(")"))for(;h<g&&(w.push(Or()),!se(")"));)ue(",");return ue(")"),w}function dr(){var w,P;return P=D,w=Ne(),gt(w)||fe(w),_.markEnd(_.createIdentifier(w.value),P)}function pr(){return ue("."),dr()}function vn(){var w;return ue("["),w=ir(),ue("]"),w}function mr(){var w,P,W;return W=D,he("new"),w=Jn(),P=se("(")?Er():[],_.markEnd(_.createNewExpression(w,P),W)}function On(){var w,P,W,te,ve=S.allowIn;for(te=D,S.allowIn=!0,w=ce("new")?mr():Qt();;){if(se("."))W=pr(),w=_.createMemberExpression(".",w,W);else if(se("("))P=Er(),w=_.createCallExpression(w,P);else if(se("["))W=vn(),w=_.createMemberExpression("[",w,W);else break;_.markEnd(w,te)}return S.allowIn=ve,w}function Jn(){var w,P,W;for(F(S.allowIn,"callee of new expression always allow in keyword."),W=D,w=ce("new")?mr():Qt();se(".")||se("[");)se("[")?(P=vn(),w=_.createMemberExpression("[",w,P)):(P=pr(),w=_.createMemberExpression(".",w,P)),_.markEnd(w,W);return w}function Un(){var w,P,W=D;return w=On(),D.type===r.Punctuator&&(se("++")||se("--"))&&!K()&&(d&&w.type===a.Identifier&&L(w.name)&&ee({},o.StrictLHSPostfix),nt(w)||ee({},o.InvalidLHSInAssignment),P=Ne(),w=_.markEnd(_.createPostfixExpression(P.value,w),W)),w}function Vn(){var w,P,W;return D.type!==r.Punctuator&&D.type!==r.Keyword?P=Un():se("++")||se("--")?(W=D,w=Ne(),P=Vn(),d&&P.type===a.Identifier&&L(P.name)&&ee({},o.StrictLHSPrefix),nt(P)||ee({},o.InvalidLHSInAssignment),P=_.createUnaryExpression(w.value,P),P=_.markEnd(P,W)):se("+")||se("-")||se("~")||se("!")?(W=D,w=Ne(),P=Vn(),P=_.createUnaryExpression(w.value,P),P=_.markEnd(P,W)):ce("delete")||ce("void")||ce("typeof")?(W=D,w=Ne(),P=Vn(),P=_.createUnaryExpression(w.value,P),P=_.markEnd(P,W),d&&P.operator==="delete"&&P.argument.type===a.Identifier&&ee({},o.StrictDelete)):P=Un(),P}function Xi(w,P){var W=0;if(w.type!==r.Punctuator&&w.type!==r.Keyword)return 0;switch(w.value){case"||":W=1;break;case"&&":W=2;break;case"|":W=3;break;case"^":W=4;break;case"&":W=5;break;case"==":case"!=":case"===":case"!==":W=6;break;case"<":case">":case"<=":case">=":case"instanceof":W=7;break;case"in":W=P?7:0;break;case"<<":case">>":case">>>":W=8;break;case"+":case"-":W=9;break;case"*":case"/":case"%":W=11;break}return W}function Ii(){var w,P,W,te,ve,Ie,Dt,Bt,Yt,or;if(w=D,Yt=Vn(),te=D,ve=Xi(te,S.allowIn),ve===0)return Yt;for(te.prec=ve,Ne(),P=[w,D],Dt=Vn(),Ie=[Yt,te,Dt];(ve=Xi(D,S.allowIn))>0;){for(;Ie.length>2&&ve<=Ie[Ie.length-2].prec;)Dt=Ie.pop(),Bt=Ie.pop().value,Yt=Ie.pop(),W=_.createBinaryExpression(Bt,Yt,Dt),P.pop(),w=P[P.length-1],_.markEnd(W,w),Ie.push(W);te=Ne(),te.prec=ve,Ie.push(te),P.push(D),W=Vn(),Ie.push(W)}for(or=Ie.length-1,W=Ie[or],P.pop();or>1;)W=_.createBinaryExpression(Ie[or-1].value,Ie[or-2],W),or-=2,w=P.pop(),_.markEnd(W,w);return W}function Ba(){var w,P,W,te,ve;return ve=D,w=Ii(),se("?")&&(Ne(),P=S.allowIn,S.allowIn=!0,W=Or(),S.allowIn=P,ue(":"),te=Or(),w=_.createConditionalExpression(w,W,te),_.markEnd(w,ve)),w}function Or(){var w,P,W,te,ve;return w=D,ve=D,te=P=Ba(),Ce()&&(nt(P)||ee({},o.InvalidLHSInAssignment),d&&P.type===a.Identifier&&L(P.name)&&ee(w,o.StrictLHSAssignment),w=Ne(),W=Or(),te=_.markEnd(_.createAssignmentExpression(w.value,P,W),ve)),te}function ir(){var w,P=D;if(w=Or(),se(",")){for(w=_.createSequenceExpression([w]);h<g&&se(",");)Ne(),w.expressions.push(Or());_.markEnd(w,P)}return w}function Oa(){for(var w=[],P;h<g&&!(se("}")||(P=Mn(),typeof P>"u"));)w.push(P);return w}function hi(){var w,P;return P=D,ue("{"),w=Oa(),ue("}"),_.markEnd(_.createBlockStatement(w),P)}function gn(){var w,P;return P=D,w=Ne(),w.type!==r.Identifier&&fe(w),_.markEnd(_.createIdentifier(w.value),P)}function Qn(w){var P=null,W,te;return te=D,W=gn(),d&&L(W.name)&&ee({},o.StrictVarName),w==="const"?(ue("="),P=Or()):se("=")&&(Ne(),P=Or()),_.markEnd(_.createVariableDeclarator(W,P),te)}function Ni(w){var P=[];do{if(P.push(Qn(w)),!se(","))break;Ne()}while(h<g);return P}function Ma(){var w;return he("var"),w=Ni(),Re(),_.createVariableDeclaration(w,"var")}function Pa(w){var P,W;return W=D,he(w),P=Ni(w),Re(),_.markEnd(_.createVariableDeclaration(P,w),W)}function ea(){return ue(";"),_.createEmptyStatement()}function ka(){var w=ir();return Re(),_.createExpressionStatement(w)}function Ta(){var w,P,W;return he("if"),ue("("),w=ir(),ue(")"),P=Kr(),ce("else")?(Ne(),W=Kr()):W=null,_.createIfStatement(w,P,W)}function Ia(){var w,P,W;return he("do"),W=S.inIteration,S.inIteration=!0,w=Kr(),S.inIteration=W,he("while"),ue("("),P=ir(),ue(")"),se(";")&&Ne(),_.createDoWhileStatement(w,P)}function Na(){var w,P,W;return he("while"),ue("("),w=ir(),ue(")"),W=S.inIteration,S.inIteration=!0,P=Kr(),S.inIteration=W,_.createWhileStatement(w,P)}function xa(){var w,P,W;return W=D,w=Ne(),P=Ni(),_.markEnd(_.createVariableDeclaration(P,w.value),W)}function Ra(){var w,P,W,te,ve,Ie,Dt,Bt=S.allowIn;return w=P=W=null,he("for"),ue("("),se(";")?Ne():(ce("var")||ce("let")?(S.allowIn=!1,w=xa(),S.allowIn=Bt,w.declarations.length===1&&ce("in")&&(Ne(),te=w,ve=ir(),w=null)):(S.allowIn=!1,w=ir(),S.allowIn=Bt,ce("in")&&(nt(w)||ee({},o.InvalidLHSInForIn),Ne(),te=w,ve=ir(),w=null)),typeof te>"u"&&ue(";")),typeof te>"u"&&(se(";")||(P=ir()),ue(";"),se(")")||(W=ir())),ue(")"),Dt=S.inIteration,S.inIteration=!0,Ie=Kr(),S.inIteration=Dt,typeof te>"u"?_.createForStatement(w,P,W,Ie):_.createForInStatement(te,ve,Ie)}function di(){var w=null,P;return he("continue"),f.charCodeAt(h)===59?(Ne(),S.inIteration||Y({},o.IllegalContinue),_.createContinueStatement(null)):K()?(S.inIteration||Y({},o.IllegalContinue),_.createContinueStatement(null)):(D.type===r.Identifier&&(w=gn(),P="$"+w.name,Object.prototype.hasOwnProperty.call(S.labelSet,P)||Y({},o.UnknownLabel,w.name)),Re(),w===null&&!S.inIteration&&Y({},o.IllegalContinue),_.createContinueStatement(w))}function La(){var w=null,P;return he("break"),f.charCodeAt(h)===59?(Ne(),S.inIteration||S.inSwitch||Y({},o.IllegalBreak),_.createBreakStatement(null)):K()?(S.inIteration||S.inSwitch||Y({},o.IllegalBreak),_.createBreakStatement(null)):(D.type===r.Identifier&&(w=gn(),P="$"+w.name,Object.prototype.hasOwnProperty.call(S.labelSet,P)||Y({},o.UnknownLabel,w.name)),Re(),w===null&&!(S.inIteration||S.inSwitch)&&Y({},o.IllegalBreak),_.createBreakStatement(w))}function pi(){var w=null;return he("return"),S.inFunctionBody||ee({},o.IllegalReturn),f.charCodeAt(h)===32&&q(f.charCodeAt(h+1))?(w=ir(),Re(),_.createReturnStatement(w)):K()?_.createReturnStatement(null):(se(";")||!se("}")&&D.type!==r.EOF&&(w=ir()),Re(),_.createReturnStatement(w))}function Ua(){var w,P;return d&&(ae(),ee({},o.StrictModeWith)),he("with"),ue("("),w=ir(),ue(")"),P=Kr(),_.createWithStatement(w,P)}function Va(){var w,P=[],W,te;for(te=D,ce("default")?(Ne(),w=null):(he("case"),w=ir()),ue(":");h<g&&!(se("}")||ce("default")||ce("case"));)W=Kr(),P.push(W);return _.markEnd(_.createSwitchCase(w,P),te)}function ja(){var w,P,W,te,ve;if(he("switch"),ue("("),w=ir(),ue(")"),ue("{"),P=[],se("}"))return Ne(),_.createSwitchStatement(w,P);for(te=S.inSwitch,S.inSwitch=!0,ve=!1;h<g&&!se("}");)W=Va(),W.test===null&&(ve&&Y({},o.MultipleDefaultsInSwitch),ve=!0),P.push(W);return S.inSwitch=te,ue("}"),_.createSwitchStatement(w,P)}function ta(){var w;return he("throw"),K()&&Y({},o.NewlineAfterThrow),w=ir(),Re(),_.createThrowStatement(w)}function jn(){var w,P,W;return W=D,he("catch"),ue("("),se(")")&&fe(D),w=gn(),d&&L(w.name)&&ee({},o.StrictCatchVariable),ue(")"),P=hi(),_.markEnd(_.createCatchClause(w,P),W)}function Ar(){var w,P=[],W=null;return he("try"),w=hi(),ce("catch")&&P.push(jn()),ce("finally")&&(Ne(),W=hi()),P.length===0&&!W&&Y({},o.NoCatchOrFinally),_.createTryStatement(w,[],P,W)}function sr(){return he("debugger"),Re(),_.createDebuggerStatement()}function Kr(){var w=D.type,P,W,te,ve;if(w===r.EOF&&fe(D),w===r.Punctuator&&D.value==="{")return hi();if(ve=D,w===r.Punctuator)switch(D.value){case";":return _.markEnd(ea(),ve);case"(":return _.markEnd(ka(),ve)}if(w===r.Keyword)switch(D.value){case"break":return _.markEnd(La(),ve);case"continue":return _.markEnd(di(),ve);case"debugger":return _.markEnd(sr(),ve);case"do":return _.markEnd(Ia(),ve);case"for":return _.markEnd(Ra(),ve);case"function":return _.markEnd(zn(),ve);case"if":return _.markEnd(Ta(),ve);case"return":return _.markEnd(pi(),ve);case"switch":return _.markEnd(ja(),ve);case"throw":return _.markEnd(ta(),ve);case"try":return _.markEnd(Ar(),ve);case"var":return _.markEnd(Ma(),ve);case"while":return _.markEnd(Na(),ve);case"with":return _.markEnd(Ua(),ve)}return P=ir(),P.type===a.Identifier&&se(":")?(Ne(),te="$"+P.name,Object.prototype.hasOwnProperty.call(S.labelSet,te)&&Y({},o.Redeclaration,"Label",P.name),S.labelSet[te]=!0,W=Kr(),delete S.labelSet[te],_.markEnd(_.createLabeledStatement(P,W),ve)):(Re(),_.markEnd(_.createExpressionStatement(P),ve))}function xi(){var w,P=[],W,te,ve,Ie,Dt,Bt,Yt,or;for(or=D,ue("{");h<g&&!(D.type!==r.StringLiteral||(W=D,w=Mn(),P.push(w),w.expression.type!==a.Literal));)te=f.slice(W.start+1,W.end-1),te==="use strict"?(d=!0,ve&&ee(ve,o.StrictOctalLiteral)):!ve&&W.octal&&(ve=W);for(Ie=S.labelSet,Dt=S.inIteration,Bt=S.inSwitch,Yt=S.inFunctionBody,S.labelSet={},S.inIteration=!1,S.inSwitch=!1,S.inFunctionBody=!0;h<g&&!(se("}")||(w=Mn(),typeof w>"u"));)P.push(w);return ue("}"),S.labelSet=Ie,S.inIteration=Dt,S.inSwitch=Bt,S.inFunctionBody=Yt,_.markEnd(_.createBlockStatement(P),or)}function Xn(w){var P,W=[],te,ve,Ie,Dt,Bt;if(ue("("),!se(")"))for(Ie={};h<g&&(te=D,P=gn(),Dt="$"+te.value,d?(L(te.value)&&(ve=te,Bt=o.StrictParamName),Object.prototype.hasOwnProperty.call(Ie,Dt)&&(ve=te,Bt=o.StrictParamDupe)):w||(L(te.value)?(w=te,Bt=o.StrictParamName):V(te.value)?(w=te,Bt=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(Ie,Dt)&&(w=te,Bt=o.StrictParamDupe)),W.push(P),Ie[Dt]=!0,!se(")"));)ue(",");return ue(")"),{params:W,stricted:ve,firstRestricted:w,message:Bt}}function zn(){var w,P=[],W,te,ve,Ie,Dt,Bt,Yt,or;return or=D,he("function"),te=D,w=gn(),d?L(te.value)&&ee(te,o.StrictFunctionName):L(te.value)?(Dt=te,Bt=o.StrictFunctionName):V(te.value)&&(Dt=te,Bt=o.StrictReservedWord),Ie=Xn(Dt),P=Ie.params,ve=Ie.stricted,Dt=Ie.firstRestricted,Ie.message&&(Bt=Ie.message),Yt=d,W=xi(),d&&Dt&&Y(Dt,Bt),d&&ve&&ee(ve,Bt),d=Yt,_.markEnd(_.createFunctionDeclaration(w,P,[],W),or)}function Ri(){var w,P=null,W,te,ve,Ie,Dt=[],Bt,Yt,or;return or=D,he("function"),se("(")||(w=D,P=gn(),d?L(w.value)&&ee(w,o.StrictFunctionName):L(w.value)?(te=w,ve=o.StrictFunctionName):V(w.value)&&(te=w,ve=o.StrictReservedWord)),Ie=Xn(te),Dt=Ie.params,W=Ie.stricted,te=Ie.firstRestricted,Ie.message&&(ve=Ie.message),Yt=d,Bt=xi(),d&&te&&Y(te,ve),d&&W&&ee(W,ve),d=Yt,_.markEnd(_.createFunctionExpression(P,Dt,[],Bt),or)}function Mn(){if(D.type===r.Keyword)switch(D.value){case"const":case"let":return Pa(D.value);case"function":return zn();default:return Kr()}if(D.type!==r.EOF)return Kr()}function mn(){for(var w,P=[],W,te,ve;h<g&&(W=D,!(W.type!==r.StringLiteral||(w=Mn(),P.push(w),w.expression.type!==a.Literal)));)te=f.slice(W.start+1,W.end-1),te==="use strict"?(d=!0,ve&&ee(ve,o.StrictOctalLiteral)):!ve&&W.octal&&(ve=W);for(;h<g&&(w=Mn(),!(typeof w>"u"));)P.push(w);return P}function go(){var w,P;return ae(),Mt(),P=D,d=!1,w=mn(),_.markEnd(_.createProgram(w),P)}function za(){var w,P,W,te=[];for(w=0;w<y.tokens.length;++w)P=y.tokens[w],W={type:P.type,value:P.value},y.range&&(W.range=P.range),y.loc&&(W.loc=P.loc),te.push(W);y.tokens=te}function ra(w,P){var W,te,ve;W=String,typeof w!="string"&&!(w instanceof String)&&(w=W(w)),_=p,f=w,h=0,v=f.length>0?1:0,b=0,g=f.length,D=null,S={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},y={},P=P||{},P.tokens=!0,y.tokens=[],y.tokenize=!0,y.openParenToken=-1,y.openCurlyToken=-1,y.range=typeof P.range=="boolean"&&P.range,y.loc=typeof P.loc=="boolean"&&P.loc,typeof P.comment=="boolean"&&P.comment&&(y.comments=[]),typeof P.tolerant=="boolean"&&P.tolerant&&(y.errors=[]);try{if(Mt(),D.type===r.EOF)return y.tokens;for(te=Ne();D.type!==r.EOF;)try{te=Ne()}catch(Ie){if(te=D,y.errors){y.errors.push(Ie);break}else throw Ie}za(),ve=y.tokens,typeof y.comments<"u"&&(ve.comments=y.comments),typeof y.errors<"u"&&(ve.errors=y.errors)}catch(Ie){throw Ie}finally{y={}}return ve}function Du(w,P){var W,te;te=String,typeof w!="string"&&!(w instanceof String)&&(w=te(w)),_=p,f=w,h=0,v=f.length>0?1:0,b=0,g=f.length,D=null,S={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},y={},typeof P<"u"&&(y.range=typeof P.range=="boolean"&&P.range,y.loc=typeof P.loc=="boolean"&&P.loc,y.attachComment=typeof P.attachComment=="boolean"&&P.attachComment,y.loc&&P.source!==null&&P.source!==void 0&&(y.source=te(P.source)),typeof P.tokens=="boolean"&&P.tokens&&(y.tokens=[]),typeof P.comment=="boolean"&&P.comment&&(y.comments=[]),typeof P.tolerant=="boolean"&&P.tolerant&&(y.errors=[]),y.attachComment&&(y.range=!0,y.comments=[],y.bottomRightStack=[],y.trailingComments=[],y.leadingComments=[]));try{W=go(),typeof y.comments<"u"&&(W.comments=y.comments),typeof y.tokens<"u"&&(za(),W.tokens=y.tokens),typeof y.errors<"u"&&(W.errors=y.errors)}catch(ve){throw ve}finally{y={}}return W}e.version="1.2.5",e.tokenize=ra,e.parse=Du,e.Syntax=function(){var w,P={};typeof Object.create=="function"&&(P=Object.create(null));for(w in a)a.hasOwnProperty(w)&&(P[w]=a[w]);return typeof Object.freeze=="function"&&Object.freeze(P),P}()})})(A1);var FF=A1,Y0=w1,SF=0;function BF(t,e,r){this.name=t,this.lvalue=e,this.rvalue=r,this.count=0}function OF(t,e,r,n){this.body=t,this.args=e,this.thisVars=r,this.localVars=n}function MF(t){if(t==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?t in window:typeof vr<"u"?t in vr:typeof self<"u"?t in self:!1}function PF(t){for(var e=t.body[0].expression.callee.params,r=new Array(e.length),n=0;n<e.length;++n)r[n]=e[n].name;return r}function kF(t){for(var e=["(",t,")()"].join(""),r=FF.parse(e,{range:!0}),n="_inline_"+SF+++"_",i=PF(r),a=new Array(i.length),s=0;s<i.length;++s)a[s]=new BF([n,"arg",s,"_"].join(""),!1,!1);for(var o=new Array(e.length),s=0,l=e.length;s<l;++s)o[s]=e.charAt(s);var p=[],f=[];function d(F){var A=n+F.replace(/\_/g,"__");return p.push(A),A}function h(F){var A="this_"+F.replace(/\_/g,"__");return f.push(A),A}function v(F,A){for(var C=F.range[0],M=F.range[1],O=C+1;O<M;++O)o[O]="";o[C]=A}function b(F){return"'"+F.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function g(F){return o.slice(F.range[0],F.range[1]).join("")}var _=1,D=2;function S(F){return F.parent.type==="AssignmentExpression"&&F.parent.left===F?F.parent.operator==="="?_:_|D:F.parent.type==="UpdateExpression"?_|D:D}(function F(A,C){if(A.parent=C,A.type==="MemberExpression")A.computed?(F(A.object,A),F(A.property,A)):A.object.type==="ThisExpression"?v(A,h(A.property.name)):F(A.object,A);else{if(A.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(A.type==="Identifier"){var M=A.name,O=i.indexOf(M);if(O>=0){var N=a[O],q=S(A);q&_&&(N.lvalue=!0),q&D&&(N.rvalue=!0),++N.count,v(A,N.name)}else MF(M)||v(A,d(M))}else if(A.type==="Literal")typeof A.value=="string"&&v(A,b(A.value));else{if(A.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var Z=Object.keys(A),Q=0,V=Z.length;Q<V;++Q)if(Z[Q]!=="parent"){var L=A[Z[Q]];if(L)if(L instanceof Array)for(var z=0;z<L.length;++z)L[z]&&typeof L[z].type=="string"&&F(L[z],A);else typeof L.type=="string"&&F(L,A)}}}})(r.body[0].expression.callee.body,void 0),Y0(p),Y0(f);var y=new OF(g(r.body[0].expression.callee.body),a,f,p);return y}var TF=kF,Pl=TF,IF=jf,ls=["args","body"],NF=["pre","post","printCode","funcName","blockSize"];function xF(t){for(var e in t)ls.indexOf(e)<0&&NF.indexOf(e)<0&&console.warn("cwise: Unknown argument '"+e+"' passed to expression compiler");for(var r=0;r<ls.length;++r)if(!t[ls[r]])throw new Error("cwise: Missing argument: "+ls[r]);return IF({args:t.args,pre:Pl(t.pre||function(){}),body:Pl(t.body),post:Pl(t.post||function(){}),debug:!!t.printCode,funcName:t.funcName||t.body.name||"cwise",blockSize:t.blockSize||64})}var oo=xF,RF=CF,LF=oo,UF=LF({args:["array","scalar","index"],body:function(e,r,n){var i=r,a;for(a=0;a<n.length-1;++a)i=i[n[a]];i[n[n.length-1]]=e}}),VF=function(e){var r=RF(e.shape);return UF(e,r),r},ks={},jF={get exports(){return ks},set exports(t){ks=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(s,o){for(var l=new Float64Array(s*o),p=0;p<l.length;p++)l[p]=a()*1e-4;return(0,n.default)(l,[s,o])};var r=Sa,n=i(r);function i(s){return s&&s.__esModule?s:{default:s}}function a(){var s=2*Math.random()-1,o=2*Math.random()-1,l=s*s+o*o;return l==0||l>1?a():s*Math.sqrt(-2*Math.log(l)/l)}t.exports=e.default})(jF,ks);var cu={},zF={get exports(){return cu},set exports(t){cu=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(d,h){var v=d.shape[0],b=(0,n.default)(new Float64Array(v*v),[v,v]);switch(h){case"euclidean":for(var g=0;g<v;g++)for(var _=g+1;_<v;_++){var D=o(d.pick(g,null),d.pick(_,null));b.set(g,_,D),b.set(_,g,D)}break;case"manhattan":for(var g=0;g<v;g++)for(var _=g+1;_<v;_++){var D=l(d.pick(g,null),d.pick(_,null));b.set(g,_,D),b.set(_,g,D)}break;case"jaccard":for(var g=0;g<v;g++)for(var _=g+1;_<v;_++){var D=p(d.pick(g,null),d.pick(_,null));b.set(g,_,D),b.set(_,g,D)}break;case"dice":for(var g=0;g<v;g++)for(var _=g+1;_<v;_++){var D=f(d.pick(g,null),d.pick(_,null));b.set(g,_,D),b.set(_,g,D)}break}return b};var r=Sa,n=s(r),i=oo,a=s(i);function s(d){return d&&d.__esModule?d:{default:d}}var o=(0,a.default)({args:["array","array"],pre:function(h,v){this.sum=0},body:function(h,v){var b=h-v;this.sum+=b*b},post:function(h,v){return Math.sqrt(this.sum)}}),l=(0,a.default)({args:["array","array"],pre:function(h,v){this.sum=0},body:function(h,v){this.sum+=Math.abs(h-v)},post:function(h,v){return this.sum}}),p=(0,a.default)({args:["array","array"],pre:function(h,v){this.tf=0,this.tt=0},body:function(h,v){var b=Math.round(h),g=Math.round(v);this.tf+=+(b!=g),this.tt+=+(b==1&&g==1)},post:function(h,v){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),f=(0,a.default)({args:["array","array"],pre:function(h,v){this.tf=0,this.tt=0},body:function(h,v){var b=Math.round(h),g=Math.round(v);this.tf+=+(b!=g),this.tt+=+(b==1&&g==1)},post:function(h,v){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});t.exports=e.default})(zF,cu);var Ts={},qF={get exports(){return Ts},set exports(t){Ts=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(f,d){for(var h=100,v=f.shape[0],b=(0,n.default)(new Float64Array(v*v),[v,v]),g=(0,n.default)(new Float64Array(v*v),[v,v]),_=void 0,D=void 0,S=1/0,y=Math.log(d),F=void 0,A=void 0,C=void 0,M=void 0,O=0;O<v;O++){_=1,D=-1/0,S=1/0;for(var N=0;N<h;N++){for(var q=0;q<v;q++)b.set(O,q,Math.exp(-f.get(O,q)*_));b.set(O,O,0),C=0;for(var q=0;q<v;q++)C+=b.get(O,q);C==0&&(C=o),M=0;for(var q=0;q<v;q++)b.set(O,q,b.get(O,q)/C),M+=f.get(O,q)*b.get(O,q);if(A=Math.log(C)+_*M,F=A-y,Math.abs(F)<=p)break;F>0?(D=_,S==1/0?_=_*2:_=(_+S)/2):(S=_,D==-1/0?_=_/2:_=(_+D)/2)}}a.default.add(g,b,b.transpose(1,0));var Z=Math.max(a.default.sum(g),l);return a.default.divseq(g,Z),a.default.maxseq(g,l),g};var r=Sa,n=s(r),i=so,a=s(i);function s(f){return f&&f.__esModule?f:{default:f}}var o=1e-7,l=Number.EPSILON||2220446049250313e-31,p=1e-5;t.exports=e.default})(qF,Ts);var Is={},WF={get exports(){return Is},set exports(t){Is=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(v,b,g){var _=v.shape[0],D=v.shape[1],S=(0,n.default)(new Float64Array(_*_),[_,_]),y=(0,p.default)(v,"euclidean");h(y);var F=(g+1)/-2;a.default.powseq(a.default.divseq(a.default.addseq(y,1),g),F);for(var A=0;A<_;A++)y.set(A,A,0);var C=Math.max(a.default.sum(y),d);a.default.divs(S,y,C),a.default.maxseq(S,d);var M=(0,n.default)(new Float64Array(_*_),[_,_]),O=(0,n.default)(new Float64Array(_*_),[_,_]);a.default.div(M,b,S),a.default.logeq(M),a.default.assign(O,b);var N=a.default.sum(a.default.muleq(M,O)),q=(0,n.default)(new Float64Array(v.size),v.shape),Z=(0,n.default)(new Float64Array(_*_),[_,_]);a.default.sub(Z,b,S),a.default.muleq(Z,y);for(var A=0;A<_;A++)for(var Q=0;Q<D;Q++){var V=(0,n.default)(new Float64Array(v.shape[0]),[v.shape[0]]);a.default.assign(V,v.pick(null,Q)),a.default.addseq(a.default.negeq(V),v.get(A,Q)),a.default.muleq(V,Z.pick(A,null)),q.set(A,Q,a.default.sum(V))}var L=2*(g+1)/g;return a.default.mulseq(q,L),[N,q]};var r=Sa,n=f(r),i=so,a=f(i),s=oo,o=f(s),l=cu,p=f(l);function f(v){return v&&v.__esModule?v:{default:v}}var d=Number.EPSILON||2220446049250313e-31,h=(0,o.default)({args:["array"],body:function(b){}});t.exports=e.default})(WF,Is);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function V(L,z){var U=[],J=!0,ie=!1,ae=void 0;try{for(var pe=L[Symbol.iterator](),De;!(J=(De=pe.next()).done)&&(U.push(De.value),!(z&&U.length===z));J=!0);}catch(Ae){ie=!0,ae=Ae}finally{try{!J&&pe.return&&pe.return()}finally{if(ie)throw ae}}return U}return function(L,z){if(Array.isArray(L))return L;if(Symbol.iterator in Object(L))return V(L,z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function V(L,z){for(var U=0;U<z.length;U++){var J=z[U];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(L,J.key,J)}}return function(L,z,U){return z&&V(L.prototype,z),U&&V(L,U),L}}(),i=Ms,a=Sa,s=M(a),o=so,l=M(o),p=yF,f=M(p),d=VF,h=M(d),v=oo,b=M(v),g=ks,_=M(g),D=cu,S=M(D),y=Ts,F=M(y),A=Is,C=M(A);function M(V){return V&&V.__esModule?V:{default:V}}function O(V){if(Array.isArray(V)){for(var L=0,z=Array(V.length);L<V.length;L++)z[L]=V[L];return z}else return Array.from(V)}function N(V,L){if(!(V instanceof L))throw new TypeError("Cannot call a class as a function")}function q(V,L){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L&&(typeof L=="object"||typeof L=="function")?L:V}function Z(V,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof L);V.prototype=Object.create(L&&L.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),L&&(Object.setPrototypeOf?Object.setPrototypeOf(V,L):V.__proto__=L)}var Q=function(V){Z(L,V);function L(z){N(this,L);var U=q(this,Object.getPrototypeOf(L).call(this));return z=z||{},U.dim=z.dim||2,U.perplexity=z.perplexity||30,U.earlyExaggeration=z.earlyExaggeration||4,U.learningRate=z.learningRate||1e3,U.nIter=z.nIter||1e3,U.metric=z.metric||"euclidean",U.barneshut=z.barneshut||!1,U.inputData=null,U.outputEmbedding=null,U}return n(L,[{key:"init",value:function(U){U=U||{};var J=U.data||[],ie=U.type||"dense";if(ie==="dense")this.inputData=(0,f.default)(J);else if(ie==="sparse"){for(var ae=[],pe=1,De=function(Ct){var Je=Math.max.apply(null,J.map(function(ht){return ht[Ct]}))+1;ae.push(Je),pe*=Je},Ae=0;Ae<J[0].length;Ae++)De(Ae);this.inputData=(0,s.default)(new Float64Array(pe),ae);var Be=!0,je=!1,Le=void 0;try{for(var Ve=J[Symbol.iterator](),lt;!(Be=(lt=Ve.next()).done);Be=!0){var vt,Ze=lt.value;(vt=this.inputData).set.apply(vt,O(Ze).concat([1]))}}catch(Ye){je=!0,Le=Ye}finally{try{!Be&&Ve.return&&Ve.return()}finally{if(je)throw Le}}}else throw new Error("input data type must be dense or sparse");this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,S.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,F.default)(this.distances,this.perplexity);var U=Number.MAX_VALUE,J=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),l.default.mulseq(this.P,this.earlyExaggeration);var ie=this._gradDesc(J,50,.5,0,0),ae=r(ie,2);U=ae[0],J=ae[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var pe=this._gradDesc(J+1,100,.8,0,0),De=r(pe,2);U=De[0],J=De[1],this.emit("progressStatus","Final optimization with momentum 0.8"),l.default.divseq(this.P,this.earlyExaggeration);var Ae=this._gradDesc(J+1,this.nIter,.8,1e-6,1e-6),Be=r(Ae,2);return U=Be[0],J=Be[1],this.emit("progressStatus","Optimization end"),[U,J]}},{key:"rerun",value:function(){this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim);var U=this.run(),J=r(U,2),ie=J[0],ae=J[1];return[ie,ae]}},{key:"getOutput",value:function(){return(0,h.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var U=(0,s.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),J=(0,s.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),ie=0;ie<this.outputEmbedding.shape[1];ie++){var ae=l.default.sup(l.default.abs(J,this.outputEmbedding.pick(null,ie)));l.default.divs(U.pick(null,ie),this.outputEmbedding.pick(null,ie),ae)}return(0,h.default)(U)}},{key:"_gradDesc",value:function(U,J,ie){for(var ae=arguments.length<=3||arguments[3]===void 0?1e-6:arguments[3],pe=arguments.length<=4||arguments[4]===void 0?1e-6:arguments[4],De=30,Ae=(0,s.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),Be=new Float64Array(this.outputEmbedding.size),je=0;je<Be.length;je++)Be[je]=1;var Le=(0,s.default)(Be,this.outputEmbedding.shape),Ve=Number.MAX_VALUE,lt=Number.MAX_VALUE,vt=0,Ze=(0,b.default)({args:["array"],pre:function(Mt){this.sum=0},body:function(Mt){this.sum+=Mt*Mt},post:function(Mt){return Math.sqrt(this.sum)}}),Ye=(0,b.default)({args:["array","array","array"],body:function(Mt,jt,Gt){}}),Ct=void 0;for(Ct=U;Ct<J;Ct++){var Je=(0,C.default)(this.outputEmbedding,this.P,this.alpha),ht=r(Je,2),ft=ht[0],gt=ht[1],Qe=Math.abs(ft-Ve);Ve=ft;var Xe=Ze(gt);if(this.emit("progressIter",[Ct,Ve,Xe]),Ve<lt)lt=Ve,vt=Ct;else if(Ct-vt>De)break;if(ae>=Xe||pe>=Qe)break;Ye(Le,Ae,gt),l.default.muleq(gt,Le);var ke=(0,s.default)(new Float64Array(gt.size),gt.shape);l.default.muls(ke,gt,this.learningRate),l.default.mulseq(Ae,ie),l.default.subeq(Ae,ke),l.default.addeq(this.outputEmbedding,Ae),this.emit("progressData",this.getOutputScaled())}return[Ve,Ct]}}]),L}(i.EventEmitter);e.default=Q,t.exports=e.default})(UC,Os);const HF=Rf(Os);var _f={},GF={get exports(){return _f},set exports(t){_f=t}},Ns={},KF={get exports(){return Ns},set exports(t){Ns=t}},Z0;function $F(){return Z0||(Z0=1,function(t){function e(r,n,i,a){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,i,a)}e.prototype.run=function(r,n,i,a){this._init(r,n,i,a);for(var s=0;s<this._datasetLength;s++)if(this._visited[s]!==1){this._visited[s]=1;var o=this._regionQuery(s);if(o.length<this.minPts)this.noise.push(s);else{var l=this.clusters.length;this.clusters.push([]),this._addToCluster(s,l),this._expandCluster(l,o)}}return this.clusters},e.prototype._init=function(r,n,i,a){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),i&&(this.minPts=i),a&&(this.distance=a)},e.prototype._expandCluster=function(r,n){for(var i=0;i<n.length;i++){var a=n[i];if(this._visited[a]!==1){this._visited[a]=1;var s=this._regionQuery(a);s.length>=this.minPts&&(n=this._mergeArrays(n,s))}this._assigned[a]!==1&&this._addToCluster(a,r)}},e.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1},e.prototype._regionQuery=function(r){for(var n=[],i=0;i<this._datasetLength;i++){var a=this.distance(this.dataset[r],this.dataset[i]);a<this.epsilon&&n.push(i)}return n},e.prototype._mergeArrays=function(r,n){for(var i=n.length,a=0;a<i;a++){var s=n[a];r.indexOf(s)<0&&r.push(s)}return r},e.prototype._euclideanDistance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;)i+=(r[a]-n[a])*(r[a]-n[a]);return Math.sqrt(i)},t.exports&&(t.exports=e)}(KF)),Ns}var xs={},YF={get exports(){return xs},set exports(t){xs=t}},J0;function ZF(){return J0||(J0=1,function(t){function e(r,n,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,i)}e.prototype.init=function(r,n,i){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof i<"u"&&(this.distance=i)},e.prototype.run=function(r,n){this.init(r,n);for(var i=this.dataset.length,a=0;a<this.k;a++)this.centroids[a]=this.randomCentroid();for(var s=!0;s;){s=this.assign();for(var o=0;o<this.k;o++){for(var l=new Array(h),p=0,f=0;f<h;f++)l[f]=0;for(var d=0;d<i;d++){var h=this.dataset[d].length;if(o===this.assignments[d]){for(var f=0;f<h;f++)l[f]+=this.dataset[d][f];p++}}if(p>0){for(var f=0;f<h;f++)l[f]/=p;this.centroids[o]=l}else this.centroids[o]=this.randomCentroid(),s=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,i;do i=Math.round(Math.random()*r),n=this.dataset[i];while(this.centroids.indexOf(n)>=0);return n},e.prototype.assign=function(){for(var r=!1,n=this.dataset.length,i,a=0;a<n;a++)i=this.argmin(this.dataset[a],this.centroids,this.distance),i!=this.assignments[a]&&(this.assignments[a]=i,r=!0);return r},e.prototype.getClusters=function(){for(var r=new Array(this.k),n,i=0;i<this.assignments.length;i++)n=this.assignments[i],typeof r[n]>"u"&&(r[n]=[]),r[n].push(i);return r},e.prototype.argmin=function(r,n,i){for(var a=Number.MAX_VALUE,s=0,o=n.length,l,p=0;p<o;p++)l=i(r,n[p]),l<a&&(a=l,s=p);return s},e.prototype.distance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;){var s=r[a]-n[a];i+=s*s}return Math.sqrt(i)},t.exports&&(t.exports=e)}(YF)),xs}var Rs={},JF={get exports(){return Rs},set exports(t){Rs=t}},Ls={},QF={get exports(){return Ls},set exports(t){Ls=t}},Q0;function C1(){return Q0||(Q0=1,function(t){function e(r,n,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,i)}e.prototype.insert=function(r,n){for(var i=this._queue.length,a=i;a--;){var s=this._priorities[a];this._sorting==="desc"?n>s&&(i=a):n<s&&(i=a)}this._insertAt(r,n,i)},e.prototype.remove=function(r){for(var n=this._queue.length;n--;){var i=this._queue[n];if(r===i){this._queue.splice(n,1),this._priorities.splice(n,1);break}}},e.prototype.forEach=function(r){this._queue.forEach(r)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(r){return this._priorities[r]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,i=this._queue.length;n<i;n++)r.push([this._queue[n],this._priorities[n]]);return r},e.prototype._init=function(r,n,i){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var a=0;a<r.length;a++)this.insert(r[a],n[a])}i&&(this._sorting=i)},e.prototype._insertAt=function(r,n,i){this._queue.length===i?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(i,0,r),this._priorities.splice(i,0,n))},t.exports&&(t.exports=e)}(QF)),Ls}var X0;function XF(){return X0||(X0=1,function(t){if(t.exports)var e=C1();function r(n,i,a,s){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,i,a,s)}r.prototype.run=function(n,i,a,s){this._init(n,i,a,s);for(var o=0,l=this.dataset.length;o<l;o++)if(this._processed[o]!==1){this._processed[o]=1,this.clusters.push([o]);var p=this.clusters.length-1;this._orderedList.push(o);var f=new e(null,null,"asc"),d=this._regionQuery(o);this._distanceToCore(o)!==void 0&&(this._updateQueue(o,d,f),this._expandCluster(p,f))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var n=[],i=0,a=this._orderedList.length;i<a;i++){var s=this._orderedList[i],o=this._reachability[s];n.push([s,o])}return n},r.prototype._init=function(n,i,a,s){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}i&&(this.epsilon=i),a&&(this.minPts=a),s&&(this.distance=s)},r.prototype._updateQueue=function(n,i,a){var s=this;this._coreDistance=this._distanceToCore(n),i.forEach(function(o){if(s._processed[o]===void 0){var l=s.distance(s.dataset[n],s.dataset[o]),p=Math.max(s._coreDistance,l);s._reachability[o]===void 0?(s._reachability[o]=p,a.insert(o,p)):p<s._reachability[o]&&(s._reachability[o]=p,a.remove(o),a.insert(o,p))}})},r.prototype._expandCluster=function(n,i){for(var a=i.getElements(),s=0,o=a.length;s<o;s++){var l=a[s];if(this._processed[l]===void 0){var p=this._regionQuery(l);this._processed[l]=1,this.clusters[n].push(l),this._orderedList.push(l),this._distanceToCore(l)!==void 0&&(this._updateQueue(l,p,i),this._expandCluster(n,i))}}},r.prototype._distanceToCore=function(n){for(var i=this.epsilon,a=0;a<i;a++){var s=this._regionQuery(n,a);if(s.length>=this.minPts)return a}},r.prototype._regionQuery=function(n,i){i=i||this.epsilon;for(var a=[],s=0,o=this.dataset.length;s<o;s++)this.distance(this.dataset[n],this.dataset[s])<i&&a.push(s);return a},r.prototype._euclideanDistance=function(n,i){for(var a=0,s=Math.min(n.length,i.length);s--;)a+=(n[s]-i[s])*(n[s]-i[s]);return Math.sqrt(a)},t.exports&&(t.exports=r)}(JF)),Rs}(function(t){t.exports&&(t.exports={DBSCAN:$F(),KMEANS:ZF(),OPTICS:XF(),PriorityQueue:C1()})})(GF);const{window:e3}=Ww;function ed(t,e,r){const n=t.slice();return n[26]=e[r][0],n[27]=e[r][1],n}function td(t){let e=[],r=new Map,n,i,a,s=Object.entries(t[1]);const o=l=>l[26];for(let l=0;l<s.length;l+=1){let p=ed(t,s,l),f=o(p);r.set(f,e[l]=nd(f,p))}return i=new Fa({props:{xy:t[17](t[0],t[6],t[10],t[9],!0),radius:t[3],color:"rgba(136,157,191, 1)",handleMouseDown:t[22]}}),{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=Pt(),ze(i.$$.fragment)},l(l){for(let p=0;p<e.length;p+=1)e[p].l(l);n=Pt(),qe(i.$$.fragment,l)},m(l,p){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(l,p);le(l,n,p),We(i,l,p),a=!0},p(l,p){p&132983&&(s=Object.entries(l[1]),cr(),e=Bn(e,p,o,1,l,s,r,n.parentNode,Cp,nd,n,ed),hr());const f={};p&1601&&(f.xy=l[17](l[0],l[6],l[10],l[9],!0)),p&8&&(f.radius=l[3]),p&128&&(f.handleMouseDown=l[22]),i.$set(f)},i(l){if(!a){for(let p=0;p<s.length;p+=1)me(e[p]);me(i.$$.fragment,l),a=!0}},o(l){for(let p=0;p<e.length;p+=1)we(e[p]);we(i.$$.fragment,l),a=!1},d(l){for(let p=0;p<e.length;p+=1)e[p].d(l);l&&k(n),He(i,l)}}}function rd(t){let e,r;return e=new c1({props:{p1:t[17](t[27].xy,t[6],t[10],t[9],!0),p2:t[17](t[0],t[6],t[10],t[9],!0)}}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},p(n,i){const a={};i&1602&&(a.p1=n[17](n[27].xy,n[6],n[10],n[9],!0)),i&1601&&(a.p2=n[17](n[0],n[6],n[10],n[9],!0)),e.$set(a)},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function nd(t,e){let r,n,i,a,s,o=e[27].connected&&rd(e);return i=new Fa({props:{xy:e[17](e[27].xy,e[6],e[10],e[9],!0),radius:e[2],color:"rgba(136,157,191, 1)"}}),a=new mu({props:{xy:[(e[27].xy[0]*e[8][0]+e[6][0])*e[9]+e[10][0]-Vr(e[4],e[27].text.length,e[5])[0]/2,(e[27].xy[1]*e[8][1]+e[6][1])*e[9]+e[10][1]+e[2]],color:`rgba(255,255,255,${e[27].opacity}`,wh:Vr(e[4],e[27].text.length,e[5]),fontSize:e[5],text:e[27].text}}),{key:t,first:null,c(){r=Pt(),o&&o.c(),n=Pt(),ze(i.$$.fragment),ze(a.$$.fragment),this.h()},l(l){r=Pt(),o&&o.l(l),n=Pt(),qe(i.$$.fragment,l),qe(a.$$.fragment,l),this.h()},h(){this.first=r},m(l,p){le(l,r,p),o&&o.m(l,p),le(l,n,p),We(i,l,p),We(a,l,p),s=!0},p(l,p){e=l,e[27].connected?o?(o.p(e,p),p&2&&me(o,1)):(o=rd(e),o.c(),me(o,1),o.m(n.parentNode,n)):o&&(cr(),we(o,1,1,()=>{o=null}),hr());const f={};p&1602&&(f.xy=e[17](e[27].xy,e[6],e[10],e[9],!0)),p&4&&(f.radius=e[2]),i.$set(f);const d={};p&1910&&(d.xy=[(e[27].xy[0]*e[8][0]+e[6][0])*e[9]+e[10][0]-Vr(e[4],e[27].text.length,e[5])[0]/2,(e[27].xy[1]*e[8][1]+e[6][1])*e[9]+e[10][1]+e[2]]),p&2&&(d.color=`rgba(255,255,255,${e[27].opacity}`),p&50&&(d.wh=Vr(e[4],e[27].text.length,e[5])),p&32&&(d.fontSize=e[5]),p&2&&(d.text=e[27].text),a.$set(d)},i(l){s||(me(o),me(i.$$.fragment,l),me(a.$$.fragment,l),s=!0)},o(l){we(o),we(i.$$.fragment,l),we(a.$$.fragment,l),s=!1},d(l){l&&k(r),o&&o.d(l),l&&k(n),He(i,l),He(a,l)}}}function t3(t){let e,r,n=Object.entries(t[1]).length>0,i,a,s,o=n&&td(t);return{c(){e=H("div"),r=dt("svg"),o&&o.c(),this.h()},l(l){e=G(l,"DIV",{class:!0});var p=j(e);r=pt(p,"svg",{id:!0,class:!0});var f=j(r);o&&o.l(f),f.forEach(k),p.forEach(k),this.h()},h(){B(r,"id","svg"),B(r,"class","w-full h-full outline-none"),B(e,"class","w-full h-full")},m(l,p){le(l,e,p),I(e,r),o&&o.m(r,null),i=!0,a||(s=[ge(e3,"keydown",t[16]),ge(r,"mousewheel",t[15]),ge(r,"mousemove",t[13]),ge(r,"touchmove",t[13]),ge(r,"mouseup",t[14]),ge(r,"touchend",t[14]),ge(r,"dblclick",t[12]),ge(r,"focusin",t[23]),ge(r,"focusout",t[24])],a=!0)},p(l,[p]){p&2&&(n=Object.entries(l[1]).length>0),n?o?(o.p(l,p),p&2&&me(o,1)):(o=td(l),o.c(),me(o,1),o.m(r,null)):o&&(cr(),we(o,1,1,()=>{o=null}),hr())},i(l){i||(me(o),i=!0)},o(l){we(o),i=!1},d(l){l&&k(e),o&&o.d(),a=!1,$t(s)}}}function r3(t){var e=!1;return t.deltaY?t.deltaY===t.deltaY*-3&&(e=!0):t.deltaMode===0&&(e=!0),e}function n3(t,e,r){let{onMarkerMove:n=V=>{}}=e,{dataPoints:i={}}=e,{center:a=[100,100]}=e,{dimensions:s=[100,100]}=e,{pointRadius:o=4}=e,{markerRadius:l=10}=e,{textWidth:p=150}=e,{fontSize:f=12}=e,{innerPad:d=100}=e,{markerLocation:h=[.5,.5]}=e,v=!1,b=s,g=[0,0],_=1,D=[0,0],S=!0;function y(V){const L=Kn(V);r(0,h=O(Wr(os(L,D),1/_))),n(h)}function F(V){if(v){const L=Kn(V);r(0,h=O(Wr(os(L,D),1/_))),n(h)}}function A(V){r(7,v=!1)}function C(V){V.preventDefault();const L=r3(V),z=Kn(V),U=Wr(os(z,D),1/_);r(9,_=Math.min(Math.max(_+(L?-1:1)*V.deltaY*-.01,.5),20)),r(10,D=[z[0]-U[0]*_,z[1]-U[1]*_])}function M(V){S&&(V=V||window.event,V.key==="ArrowUp"||V.key==="w"?r(10,D[1]+=10,D):V.key=="ArrowDown"||V.key=="s"?r(10,D[1]-=10,D):V.key=="ArrowLeft"||V.key=="a"?r(10,D[0]+=10,D):(V.key=="ArrowRight"||V.key=="d")&&r(10,D[0]-=10,D))}function O(V){let L=os(V,g);return[L[0]/b[0],L[1]/b[1]]}function N(V,L,z,U,J=!1){let ie=V;return J&&(ie=xr(L,[V[0]*b[0],V[1]*b[1]])),xr(Wr(ie,U),z)}const q=()=>r(7,v=!0),Z=()=>r(11,S=!0),Q=()=>r(11,S=!1);return t.$$set=V=>{"onMarkerMove"in V&&r(18,n=V.onMarkerMove),"dataPoints"in V&&r(1,i=V.dataPoints),"center"in V&&r(19,a=V.center),"dimensions"in V&&r(20,s=V.dimensions),"pointRadius"in V&&r(2,o=V.pointRadius),"markerRadius"in V&&r(3,l=V.markerRadius),"textWidth"in V&&r(4,p=V.textWidth),"fontSize"in V&&r(5,f=V.fontSize),"innerPad"in V&&r(21,d=V.innerPad),"markerLocation"in V&&r(0,h=V.markerLocation)},t.$$.update=()=>{if(t.$$.dirty&3145792){const V=Math.min(...s),L=s[0]===V,z=s[1]===V;r(6,g=[Math.max(L?0:(s[0]-V)/2,d),Math.max(z?0:(s[1]-V)/2,d)]),r(8,b=[s[0]-2*g[0],s[1]-2*g[1]])}},[h,i,o,l,p,f,g,v,b,_,D,S,y,F,A,C,M,N,n,a,s,d,q,Z,Q]}class i3 extends ut{constructor(e){super(),st(this,e,n3,t3,ot,{onMarkerMove:18,dataPoints:1,center:19,dimensions:20,pointRadius:2,markerRadius:3,textWidth:4,fontSize:5,innerPad:21,markerLocation:0})}}var bf={},a3={get exports(){return bf},set exports(t){bf=t}};(function(t){var e=parseInt(Number.MAX_SAFE_INTEGER/2)||4503599627370496,r=0;function n(){this.C=null,this.row_covered=[],this.col_covered=[],this.n=0,this.Z0_r=0,this.Z0_c=0,this.marked=null,this.path=null}n.prototype.pad_matrix=function(o,l){l=l||r;var p=0,f=o.length,d;for(d=0;d<f;++d)o[d].length>p&&(p=o[d].length);f=p>f?p:f;var h=[];for(d=0;d<f;++d){for(var v=o[d]||[],b=v.slice();f>b.length;)b.push(l);h.push(b)}return h},n.prototype.compute=function(o,l){l=l||{},l.padValue=l.padValue||r,this.C=this.pad_matrix(o,l.padValue),this.n=this.C.length,this.original_length=o.length,this.original_width=o[0].length;for(var p=[];p.length<this.n;)p.push(!1);this.row_covered=p.slice(),this.col_covered=p.slice(),this.Z0_r=0,this.Z0_c=0,this.path=this.__make_matrix(this.n*2,0),this.marked=this.__make_matrix(this.n,0);for(var f=1,d={1:this.__step1,2:this.__step2,3:this.__step3,4:this.__step4,5:this.__step5,6:this.__step6};;){var h=d[f];if(!h)break;f=h.apply(this)}for(var v=[],b=0;b<this.original_length;++b)for(var g=0;g<this.original_width;++g)this.marked[b][g]==1&&v.push([b,g]);return v},n.prototype.__make_matrix=function(o,l){for(var p=[],f=0;f<o;++f){p[f]=[];for(var d=0;d<o;++d)p[f][d]=l}return p},n.prototype.__step1=function(){for(var o=0;o<this.n;++o)for(var l=Math.min.apply(Math,this.C[o]),p=0;p<this.n;++p)this.C[o][p]-=l;return 2},n.prototype.__step2=function(){for(var o=0;o<this.n;++o)for(var l=0;l<this.n;++l)if(this.C[o][l]===0&&!this.col_covered[l]&&!this.row_covered[o]){this.marked[o][l]=1,this.col_covered[l]=!0,this.row_covered[o]=!0;break}return this.__clear_covers(),3},n.prototype.__step3=function(){for(var o=0,l=0;l<this.n;++l)for(var p=0;p<this.n;++p)this.marked[l][p]==1&&this.col_covered[p]==!1&&(this.col_covered[p]=!0,++o);return o>=this.n?7:4},n.prototype.__step4=function(){for(var o=!1,l=-1,p=-1,f=-1;!o;){var d=this.__find_a_zero();if(l=d[0],p=d[1],l<0)return 6;if(this.marked[l][p]=2,f=this.__find_star_in_row(l),f>=0)p=f,this.row_covered[l]=!0,this.col_covered[p]=!1;else return this.Z0_r=l,this.Z0_c=p,5}},n.prototype.__step5=function(){var o=0;this.path[o][0]=this.Z0_r,this.path[o][1]=this.Z0_c;for(var l=!1;!l;){var p=this.__find_star_in_col(this.path[o][1]);if(p>=0?(o++,this.path[o][0]=p,this.path[o][1]=this.path[o-1][1]):l=!0,!l){var f=this.__find_prime_in_row(this.path[o][0]);o++,this.path[o][0]=this.path[o-1][0],this.path[o][1]=f}}return this.__convert_path(this.path,o),this.__clear_covers(),this.__erase_primes(),3},n.prototype.__step6=function(){for(var o=this.__find_smallest(),l=0;l<this.n;++l)for(var p=0;p<this.n;++p)this.row_covered[l]&&(this.C[l][p]+=o),this.col_covered[p]||(this.C[l][p]-=o);return 4},n.prototype.__find_smallest=function(){for(var o=e,l=0;l<this.n;++l)for(var p=0;p<this.n;++p)!this.row_covered[l]&&!this.col_covered[p]&&o>this.C[l][p]&&(o=this.C[l][p]);return o},n.prototype.__find_a_zero=function(){for(var o=0;o<this.n;++o)for(var l=0;l<this.n;++l)if(this.C[o][l]===0&&!this.row_covered[o]&&!this.col_covered[l])return[o,l];return[-1,-1]},n.prototype.__find_star_in_row=function(o){for(var l=0;l<this.n;++l)if(this.marked[o][l]==1)return l;return-1},n.prototype.__find_star_in_col=function(o){for(var l=0;l<this.n;++l)if(this.marked[l][o]==1)return l;return-1},n.prototype.__find_prime_in_row=function(o){for(var l=0;l<this.n;++l)if(this.marked[o][l]==2)return l;return-1},n.prototype.__convert_path=function(o,l){for(var p=0;p<=l;++p)this.marked[o[p][0]][o[p][1]]=this.marked[o[p][0]][o[p][1]]==1?0:1},n.prototype.__clear_covers=function(){for(var o=0;o<this.n;++o)this.row_covered[o]=!1,this.col_covered[o]=!1},n.prototype.__erase_primes=function(){for(var o=0;o<this.n;++o)for(var l=0;l<this.n;++l)this.marked[o][l]==2&&(this.marked[o][l]=0)};function i(o,l){var p,f;if(!l){var d=-1/0;for(p=0;p<o.length;++p)for(f=0;f<o[p].length;++f)o[p][f]>d&&(d=o[p][f]);l=function(b){return d-b}}var h=[];for(p=0;p<o.length;++p){var v=o[p];for(h[p]=[],f=0;f<v.length;++f)h[p][f]=l(o[p][f])}return h}function a(o){var l=[],p,f;for(p=0;p<o.length;++p)for(f=0;f<o[p].length;++f){var d=String(o[p][f]).length;(!l[f]||d>=l[f])&&(l[f]=d)}var h="";for(p=0;p<o.length;++p){for(f=0;f<o[p].length;++f){for(var v=String(o[p][f]);v.length<l[f];)v=" "+v;h+=v,f!=o[p].length-1&&(h+=" ")}p!=o[p].length-1&&(h+=`
`)}return h}function s(o,l){var p=new n;return p.compute(o,l)}s.version="1.2.2",s.format_matrix=a,s.make_cost_matrix=i,s.Munkres=n,t.exports&&(t.exports=s)})(a3);const u3=bf,Df=gr({});function s3(t){let e,r;return e=new i3({props:{center:t[0],dimensions:t[1],onMarkerMove:t[3],dataPoints:t[2]}}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},p(n,[i]){const a={};i&1&&(a.center=n[0]),i&2&&(a.dimensions=n[1]),i&4&&(a.dataPoints=n[2]),e.$set(a)},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function o3(t,e,r){let n,i,a,s,o,l;Ke(t,rt,C=>r(7,o=C)),Ke(t,Df,C=>r(8,l=C));let{center:p=[100,100]}=e,{dimensions:f=[100,100]}=e,d={};function h(C){switch(C){case 2:return[Wr(xr([0,0],[0,1]),.5),Wr(xr([1,0],[1,1]),.5)];case 4:return[[0,0],[0,1],[1,1],[1,0]];case 6:return[Wr(xr([0,0],[0,1]),.5),Wr(xr([1,0],[1,1]),.5),[0,0],[0,1],[1,1],[1,0]];case 8:return[Wr(xr([0,0],[0,1]),.5),Wr(xr([1,0],[1,1]),.5),[0,0],[0,1],[1,1],[1,0],Wr(xr([0,0],[1,0]),.5),Wr(xr([0,1],[1,1]),.5)];default:return[]}}function v(C,M){return C.map(O=>M.map(N=>gs(O,N)))}function b(C,M){if(C.length!==M.length)throw new Error("Both sets should have the same number of points");const O=v(C,M),N=u3(O);return N?N.map(([q,Z])=>({ids:[q,Z],points:[C[q],M[Z]]})):null}function g(C){const M=C.reduce((O,N)=>xr(O,N),[0,0]);return Wr(M,1/C.length)}function _(C){l&&o.scaledEmbedMappings&&(F(),y(n,a,s,C))}function D(C,M){C&&M&&(F(),y(n,a,s,i))}function S(C,M){y(n,C,M,i)}function y(C,M,O,N){if(!d)return;let q={...o.weightedPrompts},Z=0;Object.values(d).forEach(z=>{Object.values(d).forEach(U=>{const J=gs(z.xy,U.xy);J>Z&&(Z=J)})});const Q=Object.entries(d).reduce((z,[U,J])=>{const ie=gs(C,J.xy);return z[parseInt(U)]=ie,z},{}),V=(z,U)=>{const J=z?Math.round(Math.pow(1-U/Z,O)*100)/100:0;return J<0?0:J},L=(z,U)=>{const J=z?Math.round((1-U/Z)*100)/100:0;return J<0?0:J};Object.entries(Q).sort((z,U)=>z[1]-U[1]).forEach(([z,U],J)=>{if(!q[parseInt(z)])return;const ie=J<N,ae=M?V(ie,U):L(ie,U);q[parseInt(z)]={...q[parseInt(z)],embedWeight:ae},r(2,d[parseInt(z)].opacity=Lr(ae),d),r(2,d[parseInt(z)].connected=ie,d)}),rt.update({...o,embedMarker:n,weightedPrompts:q})}function F(){if(!l||!o.scaledEmbedMappings)return;const C=Object.keys(o.scaledEmbedMappings),M=N=>{if(!N.length)return p;const q=N.map(Z=>O[Z].xy);return g(q)},O=C.reduce((N,q,Z)=>(N[q]={xy:o.scaledEmbedMappings[Z],text:o.weightedPrompts[Z].text,connected:!0,opacity:1},N),{});if(o.embedClusters&&o.embedClusterSets){const N=o.embedClusters,q=o.embedClusterSets[N];let Z=q.map(L=>M(L));const Q=h(N),V=b(Z,Q);V&&V.forEach(L=>{const z=L.ids[0],U=L.points[1];q[z].forEach(J=>{O[J].xy=g([O[J].xy,U])})})}r(2,d=O)}function A(C){n=C,y(n,a,s,i)}return t.$$set=C=>{"center"in C&&r(0,p=C.center),"dimensions"in C&&r(1,f=C.dimensions)},t.$$.update=()=>{t.$$.dirty&128&&(n=o.embedMarker||[.5,.5]),t.$$.dirty&128&&r(4,i=o.embedPromptLimit||Object.keys(o.weightedPrompts).length),t.$$.dirty&128&&r(6,a=o.embedExponentialScaling),t.$$.dirty&128&&r(5,s=o.embedWeightScaling),t.$$.dirty&96&&S(a,s),t.$$.dirty&384&&D(l,o.scaledEmbedMappings),t.$$.dirty&16&&_(i)},[p,f,d,A,i,s,a,o,l]}class l3 extends ut{constructor(e){super(),st(this,e,o3,s3,ot,{center:0,dimensions:1})}}var wf={},F1={},Us={},f3={get exports(){return Us},set exports(t){Us=t}},Vs={},c3={get exports(){return Vs},set exports(t){Vs=t}},S1=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}},h3=S1,Ti=Object.prototype.toString;function zf(t){return Array.isArray(t)}function yf(t){return typeof t>"u"}function d3(t){return t!==null&&!yf(t)&&t.constructor!==null&&!yf(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function B1(t){return Ti.call(t)==="[object ArrayBuffer]"}function p3(t){return Ti.call(t)==="[object FormData]"}function v3(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&B1(t.buffer),e}function g3(t){return typeof t=="string"}function m3(t){return typeof t=="number"}function O1(t){return t!==null&&typeof t=="object"}function _s(t){if(Ti.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function _3(t){return Ti.call(t)==="[object Date]"}function b3(t){return Ti.call(t)==="[object File]"}function D3(t){return Ti.call(t)==="[object Blob]"}function M1(t){return Ti.call(t)==="[object Function]"}function w3(t){return O1(t)&&M1(t.pipe)}function y3(t){return Ti.call(t)==="[object URLSearchParams]"}function E3(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function A3(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function qf(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),zf(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Ef(){var t={};function e(i,a){_s(t[a])&&_s(i)?t[a]=Ef(t[a],i):_s(i)?t[a]=Ef({},i):zf(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)qf(arguments[r],e);return t}function C3(t,e,r){return qf(e,function(i,a){r&&typeof i=="function"?t[a]=h3(i,r):t[a]=i}),t}function F3(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var sn={isArray:zf,isArrayBuffer:B1,isBuffer:d3,isFormData:p3,isArrayBufferView:v3,isString:g3,isNumber:m3,isObject:O1,isPlainObject:_s,isUndefined:yf,isDate:_3,isFile:b3,isBlob:D3,isFunction:M1,isStream:w3,isURLSearchParams:y3,isStandardBrowserEnv:A3,forEach:qf,merge:Ef,extend:C3,trim:E3,stripBOM:F3},ma=sn;function id(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var P1=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(ma.isURLSearchParams(r))i=r.toString();else{var a=[];ma.forEach(r,function(l,p){l===null||typeof l>"u"||(ma.isArray(l)?p=p+"[]":l=[l],ma.forEach(l,function(d){ma.isDate(d)?d=d.toISOString():ma.isObject(d)&&(d=JSON.stringify(d)),a.push(id(p)+"="+id(d))}))}),i=a.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},S3=sn;function lo(){this.handlers=[]}lo.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};lo.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};lo.prototype.forEach=function(e){S3.forEach(this.handlers,function(n){n!==null&&e(n)})};var B3=lo,O3=sn,M3=function(e,r){O3.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})},k1=function(e,r,n,i,a){return e.config=r,n&&(e.code=n),e.request=i,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},T1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kl,ad;function I1(){if(ad)return kl;ad=1;var t=k1;return kl=function(r,n,i,a,s){var o=new Error(r);return t(o,n,i,a,s)},kl}var Tl,ud;function P3(){if(ud)return Tl;ud=1;var t=I1();return Tl=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},Tl}var Il,sd;function k3(){if(sd)return Il;sd=1;var t=sn;return Il=t.isStandardBrowserEnv()?function(){return{write:function(n,i,a,s,o,l){var p=[];p.push(n+"="+encodeURIComponent(i)),t.isNumber(a)&&p.push("expires="+new Date(a).toGMTString()),t.isString(s)&&p.push("path="+s),t.isString(o)&&p.push("domain="+o),l===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Il}var Nl,od;function T3(){return od||(od=1,Nl=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),Nl}var xl,ld;function I3(){return ld||(ld=1,xl=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),xl}var Rl,fd;function N3(){if(fd)return Rl;fd=1;var t=T3(),e=I3();return Rl=function(n,i){return n&&!t(i)?e(n,i):i},Rl}var Ll,cd;function x3(){if(cd)return Ll;cd=1;var t=sn,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Ll=function(n){var i={},a,s,o;return n&&t.forEach(n.split(`
`),function(p){if(o=p.indexOf(":"),a=t.trim(p.substr(0,o)).toLowerCase(),s=t.trim(p.substr(o+1)),a){if(i[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([s]):i[a]=i[a]?i[a]+", "+s:s}}),i},Ll}var Ul,hd;function R3(){if(hd)return Ul;hd=1;var t=sn;return Ul=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(s){var o=s;return r&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(o){var l=t.isString(o)?a(o):o;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),Ul}var Vl,dd;function fo(){if(dd)return Vl;dd=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Vl=t,Vl}var jl,pd;function vd(){if(pd)return jl;pd=1;var t=sn,e=P3(),r=k3(),n=P1,i=N3(),a=x3(),s=R3(),o=I1(),l=T1,p=fo();return jl=function(d){return new Promise(function(v,b){var g=d.data,_=d.headers,D=d.responseType,S;function y(){d.cancelToken&&d.cancelToken.unsubscribe(S),d.signal&&d.signal.removeEventListener("abort",S)}t.isFormData(g)&&delete _["Content-Type"];var F=new XMLHttpRequest;if(d.auth){var A=d.auth.username||"",C=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";_.Authorization="Basic "+btoa(A+":"+C)}var M=i(d.baseURL,d.url);F.open(d.method.toUpperCase(),n(M,d.params,d.paramsSerializer),!0),F.timeout=d.timeout;function O(){if(F){var q="getAllResponseHeaders"in F?a(F.getAllResponseHeaders()):null,Z=!D||D==="text"||D==="json"?F.responseText:F.response,Q={data:Z,status:F.status,statusText:F.statusText,headers:q,config:d,request:F};e(function(L){v(L),y()},function(L){b(L),y()},Q),F=null}}if("onloadend"in F?F.onloadend=O:F.onreadystatechange=function(){!F||F.readyState!==4||F.status===0&&!(F.responseURL&&F.responseURL.indexOf("file:")===0)||setTimeout(O)},F.onabort=function(){F&&(b(o("Request aborted",d,"ECONNABORTED",F)),F=null)},F.onerror=function(){b(o("Network Error",d,null,F)),F=null},F.ontimeout=function(){var Z=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",Q=d.transitional||l;d.timeoutErrorMessage&&(Z=d.timeoutErrorMessage),b(o(Z,d,Q.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",F)),F=null},t.isStandardBrowserEnv()){var N=(d.withCredentials||s(M))&&d.xsrfCookieName?r.read(d.xsrfCookieName):void 0;N&&(_[d.xsrfHeaderName]=N)}"setRequestHeader"in F&&t.forEach(_,function(Z,Q){typeof g>"u"&&Q.toLowerCase()==="content-type"?delete _[Q]:F.setRequestHeader(Q,Z)}),t.isUndefined(d.withCredentials)||(F.withCredentials=!!d.withCredentials),D&&D!=="json"&&(F.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&F.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&F.upload&&F.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(S=function(q){F&&(b(!q||q&&q.type?new p("canceled"):q),F.abort(),F=null)},d.cancelToken&&d.cancelToken.subscribe(S),d.signal&&(d.signal.aborted?S():d.signal.addEventListener("abort",S))),g||(g=null),F.send(g)})},jl}var Nr=sn,gd=M3,L3=k1,U3=T1,V3={"Content-Type":"application/x-www-form-urlencoded"};function md(t,e){!Nr.isUndefined(t)&&Nr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function j3(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=vd()),t}function z3(t,e,r){if(Nr.isString(t))try{return(e||JSON.parse)(t),Nr.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var co={transitional:U3,adapter:j3(),transformRequest:[function(e,r){return gd(r,"Accept"),gd(r,"Content-Type"),Nr.isFormData(e)||Nr.isArrayBuffer(e)||Nr.isBuffer(e)||Nr.isStream(e)||Nr.isFile(e)||Nr.isBlob(e)?e:Nr.isArrayBufferView(e)?e.buffer:Nr.isURLSearchParams(e)?(md(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Nr.isObject(e)||r&&r["Content-Type"]==="application/json"?(md(r,"application/json"),z3(e)):e}],transformResponse:[function(e){var r=this.transitional||co.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&Nr.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(a)throw s.name==="SyntaxError"?L3(s,this,"E_JSON_PARSE"):s}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Nr.forEach(["delete","get","head"],function(e){co.headers[e]={}});Nr.forEach(["post","put","patch"],function(e){co.headers[e]=Nr.merge(V3)});var Wf=co,q3=sn,W3=Wf,H3=function(e,r,n){var i=this||W3;return q3.forEach(n,function(s){e=s.call(i,e,r)}),e},zl,_d;function N1(){return _d||(_d=1,zl=function(e){return!!(e&&e.__CANCEL__)}),zl}var bd=sn,ql=H3,G3=N1(),K3=Wf,$3=fo();function Wl(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new $3("canceled")}var Y3=function(e){Wl(e),e.headers=e.headers||{},e.data=ql.call(e,e.data,e.headers,e.transformRequest),e.headers=bd.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),bd.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||K3.adapter;return r(e).then(function(i){return Wl(e),i.data=ql.call(e,i.data,i.headers,e.transformResponse),i},function(i){return G3(i)||(Wl(e),i&&i.response&&(i.response.data=ql.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},pn=sn,x1=function(e,r){r=r||{};var n={};function i(f,d){return pn.isPlainObject(f)&&pn.isPlainObject(d)?pn.merge(f,d):pn.isPlainObject(d)?pn.merge({},d):pn.isArray(d)?d.slice():d}function a(f){if(pn.isUndefined(r[f])){if(!pn.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function s(f){if(!pn.isUndefined(r[f]))return i(void 0,r[f])}function o(f){if(pn.isUndefined(r[f])){if(!pn.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function l(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var p={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l};return pn.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var h=p[d]||a,v=h(d);pn.isUndefined(v)&&h!==l||(n[d]=v)}),n},Hl,Dd;function R1(){return Dd||(Dd=1,Hl={version:"0.26.1"}),Hl}var Z3=R1().version,Hf={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Hf[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var wd={};Hf.transitional=function(e,r,n){function i(a,s){return"[Axios v"+Z3+"] Transitional option '"+a+"'"+s+(n?". "+n:"")}return function(a,s,o){if(e===!1)throw new Error(i(s," has been removed"+(r?" in "+r:"")));return r&&!wd[s]&&(wd[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,s,o):!0}};function J3(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],s=e[a];if(s){var o=t[a],l=o===void 0||s(o,a,t);if(l!==!0)throw new TypeError("option "+a+" must be "+l);continue}if(r!==!0)throw Error("Unknown option "+a)}}var Q3={assertOptions:J3,validators:Hf},L1=sn,X3=P1,yd=B3,Ed=Y3,ho=x1,U1=Q3,_a=U1.validators;function bu(t){this.defaults=t,this.interceptors={request:new yd,response:new yd}}bu.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=ho(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&U1.assertOptions(n,{silentJSONParsing:_a.transitional(_a.boolean),forcedJSONParsing:_a.transitional(_a.boolean),clarifyTimeoutError:_a.transitional(_a.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(a=a&&v.synchronous,i.unshift(v.fulfilled,v.rejected))});var s=[];this.interceptors.response.forEach(function(v){s.push(v.fulfilled,v.rejected)});var o;if(!a){var l=[Ed,void 0];for(Array.prototype.unshift.apply(l,i),l=l.concat(s),o=Promise.resolve(r);l.length;)o=o.then(l.shift(),l.shift());return o}for(var p=r;i.length;){var f=i.shift(),d=i.shift();try{p=f(p)}catch(h){d(h);break}}try{o=Ed(p)}catch(h){return Promise.reject(h)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};bu.prototype.getUri=function(e){return e=ho(this.defaults,e),X3(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};L1.forEach(["delete","get","head","options"],function(e){bu.prototype[e]=function(r,n){return this.request(ho(n||{},{method:e,url:r,data:(n||{}).data}))}});L1.forEach(["post","put","patch"],function(e){bu.prototype[e]=function(r,n,i){return this.request(ho(i||{},{method:e,url:r,data:n}))}});var eS=bu,Gl,Ad;function tS(){if(Ad)return Gl;Ad=1;var t=fo();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(s){n=s});var i=this;this.promise.then(function(a){if(i._listeners){var s,o=i._listeners.length;for(s=0;s<o;s++)i._listeners[s](a);i._listeners=null}}),this.promise.then=function(a){var s,o=new Promise(function(l){i.subscribe(l),s=l}).then(a);return o.cancel=function(){i.unsubscribe(s)},o},r(function(s){i.reason||(i.reason=new t(s),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(s){n=s});return{token:i,cancel:n}},Gl=e,Gl}var Kl,Cd;function rS(){return Cd||(Cd=1,Kl=function(e){return function(n){return e.apply(null,n)}}),Kl}var $l,Fd;function nS(){if(Fd)return $l;Fd=1;var t=sn;return $l=function(r){return t.isObject(r)&&r.isAxiosError===!0},$l}var Sd=sn,iS=S1,bs=eS,aS=x1,uS=Wf;function V1(t){var e=new bs(t),r=iS(bs.prototype.request,e);return Sd.extend(r,bs.prototype,e),Sd.extend(r,e),r.create=function(i){return V1(aS(t,i))},r}var Zn=V1(uS);Zn.Axios=bs;Zn.Cancel=fo();Zn.CancelToken=tS();Zn.isCancel=N1();Zn.VERSION=R1().version;Zn.all=function(e){return Promise.all(e)};Zn.spread=rS();Zn.isAxiosError=nS();c3.exports=Zn;Vs.default=Zn;(function(t){t.exports=Vs})(f3);var ur={},Gf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RequiredError=t.BaseAPI=t.COLLECTION_FORMATS=t.BASE_PATH=void 0;const e=Us;t.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class r{constructor(a,s=t.BASE_PATH,o=e.default){this.basePath=s,this.axios=o,a&&(this.configuration=a,this.basePath=a.basePath||this.basePath)}}t.BaseAPI=r;class n extends Error{constructor(a,s){super(s),this.field=a,this.name="RequiredError"}}t.RequiredError=n})(Gf);var Kf=vr&&vr.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(f){try{p(n.next(f))}catch(d){s(d)}}function l(f){try{p(n.throw(f))}catch(d){s(d)}}function p(f){f.done?a(f.value):i(f.value).then(o,l)}p((n=n.apply(t,e||[])).next())})};Object.defineProperty(ur,"__esModule",{value:!0});ur.createRequestFunction=ur.toPathString=ur.serializeDataIfNeeded=ur.setSearchParams=ur.setOAuthToObject=ur.setBearerAuthToObject=ur.setBasicAuthToObject=ur.setApiKeyToObject=ur.assertParamExists=ur.DUMMY_BASE_URL=void 0;const sS=Gf;ur.DUMMY_BASE_URL="https://example.com";ur.assertParamExists=function(t,e,r){if(r==null)throw new sS.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};ur.setApiKeyToObject=function(t,e,r){return Kf(this,void 0,void 0,function*(){if(r&&r.apiKey){const n=typeof r.apiKey=="function"?yield r.apiKey(e):yield r.apiKey;t[e]=n}})};ur.setBasicAuthToObject=function(t,e){e&&(e.username||e.password)&&(t.auth={username:e.username,password:e.password})};ur.setBearerAuthToObject=function(t,e){return Kf(this,void 0,void 0,function*(){if(e&&e.accessToken){const r=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;t.Authorization="Bearer "+r}})};ur.setOAuthToObject=function(t,e,r,n){return Kf(this,void 0,void 0,function*(){if(n&&n.accessToken){const i=typeof n.accessToken=="function"?yield n.accessToken(e,r):yield n.accessToken;t.Authorization="Bearer "+i}})};function Af(t,e,r=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(n=>Af(t,n,r)):Object.keys(e).forEach(n=>Af(t,e[n],`${r}${r!==""?".":""}${n}`)):t.has(r)?t.append(r,e):t.set(r,e))}ur.setSearchParams=function(t,...e){const r=new URLSearchParams(t.search);Af(r,e),t.search=r.toString()};ur.serializeDataIfNeeded=function(t,e,r){const n=typeof t!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(t!==void 0?t:{}):t||""};ur.toPathString=function(t){return t.pathname+t.search+t.hash};ur.createRequestFunction=function(t,e,r,n){return(i=e,a=r)=>{const s=Object.assign(Object.assign({},t.options),{url:((n==null?void 0:n.basePath)||a)+t.url});return i.request(s)}};(function(t){var e=vr&&vr.__awaiter||function(s,o,l,p){function f(d){return d instanceof l?d:new l(function(h){h(d)})}return new(l||(l=Promise))(function(d,h){function v(_){try{g(p.next(_))}catch(D){h(D)}}function b(_){try{g(p.throw(_))}catch(D){h(D)}}function g(_){_.done?d(_.value):f(_.value).then(v,b)}g((p=p.apply(s,o||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIApi=t.OpenAIApiFactory=t.OpenAIApiFp=t.OpenAIApiAxiosParamCreator=t.CreateImageRequestResponseFormatEnum=t.CreateImageRequestSizeEnum=t.ChatCompletionResponseMessageRoleEnum=t.ChatCompletionRequestMessageRoleEnum=void 0;const r=Us,n=ur,i=Gf;t.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},t.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},t.OpenAIApiAxiosParamCreator=function(s){return{cancelFineTune:(o,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("cancelFineTune","fineTuneId",o);const p="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),l),v={},b={};n.setSearchParams(f,b);let g=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),g),l.headers),{url:n.toPathString(f),options:h}}),createAnswer:(o,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createAnswer","createAnswerRequest",o);const p="/answers",f=new URL(p,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),l),v={},b={};v["Content-Type"]="application/json",n.setSearchParams(f,b);let g=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),g),l.headers),h.data=n.serializeDataIfNeeded(o,h,s),{url:n.toPathString(f),options:h}}),createChatCompletion:(o,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createChatCompletion","createChatCompletionRequest",o);const p="/chat/completions",f=new URL(p,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),l),v={},b={};v["Content-Type"]="application/json",n.setSearchParams(f,b);let g=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),g),l.headers),h.data=n.serializeDataIfNeeded(o,h,s),{url:n.toPathString(f),options:h}}),createClassification:(o,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createClassification","createClassificationRequest",o);const p="/classifications",f=new URL(p,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),l),v={},b={};v["Content-Type"]="application/json",n.setSearchParams(f,b);let g=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),g),l.headers),h.data=n.serializeDataIfNeeded(o,h,s),{url:n.toPathString(f),options:h}}),createCompletion:(o,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createCompletion","createCompletionRequest",o);const p="/completions",f=new URL(p,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),l),v={},b={};v["Content-Type"]="application/json",n.setSearchParams(f,b);let g=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),g),l.headers),h.data=n.serializeDataIfNeeded(o,h,s),{url:n.toPathString(f),options:h}}),createEdit:(o,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEdit","createEditRequest",o);const p="/edits",f=new URL(p,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),l),v={},b={};v["Content-Type"]="application/json",n.setSearchParams(f,b);let g=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),g),l.headers),h.data=n.serializeDataIfNeeded(o,h,s),{url:n.toPathString(f),options:h}}),createEmbedding:(o,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEmbedding","createEmbeddingRequest",o);const p="/embeddings",f=new URL(p,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),l),v={},b={};v["Content-Type"]="application/json",n.setSearchParams(f,b);let g=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),g),l.headers),h.data=n.serializeDataIfNeeded(o,h,s),{url:n.toPathString(f),options:h}}),createFile:(o,l,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFile","file",o),n.assertParamExists("createFile","purpose",l);const f="/files",d=new URL(f,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const v=Object.assign(Object.assign({method:"POST"},h),p),b={},g={},_=new(s&&s.formDataCtor||FormData);o!==void 0&&_.append("file",o),l!==void 0&&_.append("purpose",l),b["Content-Type"]="multipart/form-data",n.setSearchParams(d,g);let D=h&&h.headers?h.headers:{};return v.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),_.getHeaders()),D),p.headers),v.data=_,{url:n.toPathString(d),options:v}}),createFineTune:(o,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFineTune","createFineTuneRequest",o);const p="/fine-tunes",f=new URL(p,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),l),v={},b={};v["Content-Type"]="application/json",n.setSearchParams(f,b);let g=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),g),l.headers),h.data=n.serializeDataIfNeeded(o,h,s),{url:n.toPathString(f),options:h}}),createImage:(o,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImage","createImageRequest",o);const p="/images/generations",f=new URL(p,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),l),v={},b={};v["Content-Type"]="application/json",n.setSearchParams(f,b);let g=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),g),l.headers),h.data=n.serializeDataIfNeeded(o,h,s),{url:n.toPathString(f),options:h}}),createImageEdit:(o,l,p,f,d,h,v,b={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageEdit","image",o),n.assertParamExists("createImageEdit","prompt",l);const g="/images/edits",_=new URL(g,n.DUMMY_BASE_URL);let D;s&&(D=s.baseOptions);const S=Object.assign(Object.assign({method:"POST"},D),b),y={},F={},A=new(s&&s.formDataCtor||FormData);o!==void 0&&A.append("image",o),p!==void 0&&A.append("mask",p),l!==void 0&&A.append("prompt",l),f!==void 0&&A.append("n",f),d!==void 0&&A.append("size",d),h!==void 0&&A.append("response_format",h),v!==void 0&&A.append("user",v),y["Content-Type"]="multipart/form-data",n.setSearchParams(_,F);let C=D&&D.headers?D.headers:{};return S.headers=Object.assign(Object.assign(Object.assign(Object.assign({},y),A.getHeaders()),C),b.headers),S.data=A,{url:n.toPathString(_),options:S}}),createImageVariation:(o,l,p,f,d,h={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageVariation","image",o);const v="/images/variations",b=new URL(v,n.DUMMY_BASE_URL);let g;s&&(g=s.baseOptions);const _=Object.assign(Object.assign({method:"POST"},g),h),D={},S={},y=new(s&&s.formDataCtor||FormData);o!==void 0&&y.append("image",o),l!==void 0&&y.append("n",l),p!==void 0&&y.append("size",p),f!==void 0&&y.append("response_format",f),d!==void 0&&y.append("user",d),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,S);let F=g&&g.headers?g.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),y.getHeaders()),F),h.headers),_.data=y,{url:n.toPathString(b),options:_}}),createModeration:(o,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createModeration","createModerationRequest",o);const p="/moderations",f=new URL(p,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),l),v={},b={};v["Content-Type"]="application/json",n.setSearchParams(f,b);let g=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),g),l.headers),h.data=n.serializeDataIfNeeded(o,h,s),{url:n.toPathString(f),options:h}}),createSearch:(o,l,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createSearch","engineId",o),n.assertParamExists("createSearch","createSearchRequest",l);const f="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(o))),d=new URL(f,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const v=Object.assign(Object.assign({method:"POST"},h),p),b={},g={};b["Content-Type"]="application/json",n.setSearchParams(d,g);let _=h&&h.headers?h.headers:{};return v.headers=Object.assign(Object.assign(Object.assign({},b),_),p.headers),v.data=n.serializeDataIfNeeded(l,v,s),{url:n.toPathString(d),options:v}}),createTranscription:(o,l,p,f,d,h,v={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranscription","file",o),n.assertParamExists("createTranscription","model",l);const b="/audio/transcriptions",g=new URL(b,n.DUMMY_BASE_URL);let _;s&&(_=s.baseOptions);const D=Object.assign(Object.assign({method:"POST"},_),v),S={},y={},F=new(s&&s.formDataCtor||FormData);o!==void 0&&F.append("file",o),l!==void 0&&F.append("model",l),p!==void 0&&F.append("prompt",p),f!==void 0&&F.append("response_format",f),d!==void 0&&F.append("temperature",d),h!==void 0&&F.append("language",h),S["Content-Type"]="multipart/form-data",n.setSearchParams(g,y);let A=_&&_.headers?_.headers:{};return D.headers=Object.assign(Object.assign(Object.assign(Object.assign({},S),F.getHeaders()),A),v.headers),D.data=F,{url:n.toPathString(g),options:D}}),createTranslation:(o,l,p,f,d,h={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranslation","file",o),n.assertParamExists("createTranslation","model",l);const v="/audio/translations",b=new URL(v,n.DUMMY_BASE_URL);let g;s&&(g=s.baseOptions);const _=Object.assign(Object.assign({method:"POST"},g),h),D={},S={},y=new(s&&s.formDataCtor||FormData);o!==void 0&&y.append("file",o),l!==void 0&&y.append("model",l),p!==void 0&&y.append("prompt",p),f!==void 0&&y.append("response_format",f),d!==void 0&&y.append("temperature",d),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,S);let F=g&&g.headers?g.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),y.getHeaders()),F),h.headers),_.data=y,{url:n.toPathString(b),options:_}}),deleteFile:(o,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteFile","fileId",o);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const h=Object.assign(Object.assign({method:"DELETE"},d),l),v={},b={};n.setSearchParams(f,b);let g=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),g),l.headers),{url:n.toPathString(f),options:h}}),deleteModel:(o,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteModel","model",o);const p="/models/{model}".replace("{model}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const h=Object.assign(Object.assign({method:"DELETE"},d),l),v={},b={};n.setSearchParams(f,b);let g=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),g),l.headers),{url:n.toPathString(f),options:h}}),downloadFile:(o,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("downloadFile","fileId",o);const p="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const h=Object.assign(Object.assign({method:"GET"},d),l),v={},b={};n.setSearchParams(f,b);let g=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),g),l.headers),{url:n.toPathString(f),options:h}}),listEngines:(o={})=>e(this,void 0,void 0,function*(){const l="/engines",p=new URL(l,n.DUMMY_BASE_URL);let f;s&&(f=s.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),o),h={},v={};n.setSearchParams(p,v);let b=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},h),b),o.headers),{url:n.toPathString(p),options:d}}),listFiles:(o={})=>e(this,void 0,void 0,function*(){const l="/files",p=new URL(l,n.DUMMY_BASE_URL);let f;s&&(f=s.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),o),h={},v={};n.setSearchParams(p,v);let b=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},h),b),o.headers),{url:n.toPathString(p),options:d}}),listFineTuneEvents:(o,l,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("listFineTuneEvents","fineTuneId",o);const f="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(o))),d=new URL(f,n.DUMMY_BASE_URL);let h;s&&(h=s.baseOptions);const v=Object.assign(Object.assign({method:"GET"},h),p),b={},g={};l!==void 0&&(g.stream=l),n.setSearchParams(d,g);let _=h&&h.headers?h.headers:{};return v.headers=Object.assign(Object.assign(Object.assign({},b),_),p.headers),{url:n.toPathString(d),options:v}}),listFineTunes:(o={})=>e(this,void 0,void 0,function*(){const l="/fine-tunes",p=new URL(l,n.DUMMY_BASE_URL);let f;s&&(f=s.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),o),h={},v={};n.setSearchParams(p,v);let b=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},h),b),o.headers),{url:n.toPathString(p),options:d}}),listModels:(o={})=>e(this,void 0,void 0,function*(){const l="/models",p=new URL(l,n.DUMMY_BASE_URL);let f;s&&(f=s.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),o),h={},v={};n.setSearchParams(p,v);let b=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},h),b),o.headers),{url:n.toPathString(p),options:d}}),retrieveEngine:(o,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveEngine","engineId",o);const p="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const h=Object.assign(Object.assign({method:"GET"},d),l),v={},b={};n.setSearchParams(f,b);let g=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),g),l.headers),{url:n.toPathString(f),options:h}}),retrieveFile:(o,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFile","fileId",o);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const h=Object.assign(Object.assign({method:"GET"},d),l),v={},b={};n.setSearchParams(f,b);let g=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),g),l.headers),{url:n.toPathString(f),options:h}}),retrieveFineTune:(o,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFineTune","fineTuneId",o);const p="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const h=Object.assign(Object.assign({method:"GET"},d),l),v={},b={};n.setSearchParams(f,b);let g=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),g),l.headers),{url:n.toPathString(f),options:h}}),retrieveModel:(o,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveModel","model",o);const p="/models/{model}".replace("{model}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let d;s&&(d=s.baseOptions);const h=Object.assign(Object.assign({method:"GET"},d),l),v={},b={};n.setSearchParams(f,b);let g=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},v),g),l.headers),{url:n.toPathString(f),options:h}})}},t.OpenAIApiFp=function(s){const o=t.OpenAIApiAxiosParamCreator(s);return{cancelFineTune(l,p){return e(this,void 0,void 0,function*(){const f=yield o.cancelFineTune(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,s)})},createAnswer(l,p){return e(this,void 0,void 0,function*(){const f=yield o.createAnswer(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,s)})},createChatCompletion(l,p){return e(this,void 0,void 0,function*(){const f=yield o.createChatCompletion(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,s)})},createClassification(l,p){return e(this,void 0,void 0,function*(){const f=yield o.createClassification(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,s)})},createCompletion(l,p){return e(this,void 0,void 0,function*(){const f=yield o.createCompletion(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,s)})},createEdit(l,p){return e(this,void 0,void 0,function*(){const f=yield o.createEdit(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,s)})},createEmbedding(l,p){return e(this,void 0,void 0,function*(){const f=yield o.createEmbedding(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,s)})},createFile(l,p,f){return e(this,void 0,void 0,function*(){const d=yield o.createFile(l,p,f);return n.createRequestFunction(d,r.default,i.BASE_PATH,s)})},createFineTune(l,p){return e(this,void 0,void 0,function*(){const f=yield o.createFineTune(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,s)})},createImage(l,p){return e(this,void 0,void 0,function*(){const f=yield o.createImage(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,s)})},createImageEdit(l,p,f,d,h,v,b,g){return e(this,void 0,void 0,function*(){const _=yield o.createImageEdit(l,p,f,d,h,v,b,g);return n.createRequestFunction(_,r.default,i.BASE_PATH,s)})},createImageVariation(l,p,f,d,h,v){return e(this,void 0,void 0,function*(){const b=yield o.createImageVariation(l,p,f,d,h,v);return n.createRequestFunction(b,r.default,i.BASE_PATH,s)})},createModeration(l,p){return e(this,void 0,void 0,function*(){const f=yield o.createModeration(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,s)})},createSearch(l,p,f){return e(this,void 0,void 0,function*(){const d=yield o.createSearch(l,p,f);return n.createRequestFunction(d,r.default,i.BASE_PATH,s)})},createTranscription(l,p,f,d,h,v,b){return e(this,void 0,void 0,function*(){const g=yield o.createTranscription(l,p,f,d,h,v,b);return n.createRequestFunction(g,r.default,i.BASE_PATH,s)})},createTranslation(l,p,f,d,h,v){return e(this,void 0,void 0,function*(){const b=yield o.createTranslation(l,p,f,d,h,v);return n.createRequestFunction(b,r.default,i.BASE_PATH,s)})},deleteFile(l,p){return e(this,void 0,void 0,function*(){const f=yield o.deleteFile(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,s)})},deleteModel(l,p){return e(this,void 0,void 0,function*(){const f=yield o.deleteModel(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,s)})},downloadFile(l,p){return e(this,void 0,void 0,function*(){const f=yield o.downloadFile(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,s)})},listEngines(l){return e(this,void 0,void 0,function*(){const p=yield o.listEngines(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,s)})},listFiles(l){return e(this,void 0,void 0,function*(){const p=yield o.listFiles(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,s)})},listFineTuneEvents(l,p,f){return e(this,void 0,void 0,function*(){const d=yield o.listFineTuneEvents(l,p,f);return n.createRequestFunction(d,r.default,i.BASE_PATH,s)})},listFineTunes(l){return e(this,void 0,void 0,function*(){const p=yield o.listFineTunes(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,s)})},listModels(l){return e(this,void 0,void 0,function*(){const p=yield o.listModels(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,s)})},retrieveEngine(l,p){return e(this,void 0,void 0,function*(){const f=yield o.retrieveEngine(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,s)})},retrieveFile(l,p){return e(this,void 0,void 0,function*(){const f=yield o.retrieveFile(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,s)})},retrieveFineTune(l,p){return e(this,void 0,void 0,function*(){const f=yield o.retrieveFineTune(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,s)})},retrieveModel(l,p){return e(this,void 0,void 0,function*(){const f=yield o.retrieveModel(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,s)})}}},t.OpenAIApiFactory=function(s,o,l){const p=t.OpenAIApiFp(s);return{cancelFineTune(f,d){return p.cancelFineTune(f,d).then(h=>h(l,o))},createAnswer(f,d){return p.createAnswer(f,d).then(h=>h(l,o))},createChatCompletion(f,d){return p.createChatCompletion(f,d).then(h=>h(l,o))},createClassification(f,d){return p.createClassification(f,d).then(h=>h(l,o))},createCompletion(f,d){return p.createCompletion(f,d).then(h=>h(l,o))},createEdit(f,d){return p.createEdit(f,d).then(h=>h(l,o))},createEmbedding(f,d){return p.createEmbedding(f,d).then(h=>h(l,o))},createFile(f,d,h){return p.createFile(f,d,h).then(v=>v(l,o))},createFineTune(f,d){return p.createFineTune(f,d).then(h=>h(l,o))},createImage(f,d){return p.createImage(f,d).then(h=>h(l,o))},createImageEdit(f,d,h,v,b,g,_,D){return p.createImageEdit(f,d,h,v,b,g,_,D).then(S=>S(l,o))},createImageVariation(f,d,h,v,b,g){return p.createImageVariation(f,d,h,v,b,g).then(_=>_(l,o))},createModeration(f,d){return p.createModeration(f,d).then(h=>h(l,o))},createSearch(f,d,h){return p.createSearch(f,d,h).then(v=>v(l,o))},createTranscription(f,d,h,v,b,g,_){return p.createTranscription(f,d,h,v,b,g,_).then(D=>D(l,o))},createTranslation(f,d,h,v,b,g){return p.createTranslation(f,d,h,v,b,g).then(_=>_(l,o))},deleteFile(f,d){return p.deleteFile(f,d).then(h=>h(l,o))},deleteModel(f,d){return p.deleteModel(f,d).then(h=>h(l,o))},downloadFile(f,d){return p.downloadFile(f,d).then(h=>h(l,o))},listEngines(f){return p.listEngines(f).then(d=>d(l,o))},listFiles(f){return p.listFiles(f).then(d=>d(l,o))},listFineTuneEvents(f,d,h){return p.listFineTuneEvents(f,d,h).then(v=>v(l,o))},listFineTunes(f){return p.listFineTunes(f).then(d=>d(l,o))},listModels(f){return p.listModels(f).then(d=>d(l,o))},retrieveEngine(f,d){return p.retrieveEngine(f,d).then(h=>h(l,o))},retrieveFile(f,d){return p.retrieveFile(f,d).then(h=>h(l,o))},retrieveFineTune(f,d){return p.retrieveFineTune(f,d).then(h=>h(l,o))},retrieveModel(f,d){return p.retrieveModel(f,d).then(h=>h(l,o))}}};class a extends i.BaseAPI{cancelFineTune(o,l){return t.OpenAIApiFp(this.configuration).cancelFineTune(o,l).then(p=>p(this.axios,this.basePath))}createAnswer(o,l){return t.OpenAIApiFp(this.configuration).createAnswer(o,l).then(p=>p(this.axios,this.basePath))}createChatCompletion(o,l){return t.OpenAIApiFp(this.configuration).createChatCompletion(o,l).then(p=>p(this.axios,this.basePath))}createClassification(o,l){return t.OpenAIApiFp(this.configuration).createClassification(o,l).then(p=>p(this.axios,this.basePath))}createCompletion(o,l){return t.OpenAIApiFp(this.configuration).createCompletion(o,l).then(p=>p(this.axios,this.basePath))}createEdit(o,l){return t.OpenAIApiFp(this.configuration).createEdit(o,l).then(p=>p(this.axios,this.basePath))}createEmbedding(o,l){return t.OpenAIApiFp(this.configuration).createEmbedding(o,l).then(p=>p(this.axios,this.basePath))}createFile(o,l,p){return t.OpenAIApiFp(this.configuration).createFile(o,l,p).then(f=>f(this.axios,this.basePath))}createFineTune(o,l){return t.OpenAIApiFp(this.configuration).createFineTune(o,l).then(p=>p(this.axios,this.basePath))}createImage(o,l){return t.OpenAIApiFp(this.configuration).createImage(o,l).then(p=>p(this.axios,this.basePath))}createImageEdit(o,l,p,f,d,h,v,b){return t.OpenAIApiFp(this.configuration).createImageEdit(o,l,p,f,d,h,v,b).then(g=>g(this.axios,this.basePath))}createImageVariation(o,l,p,f,d,h){return t.OpenAIApiFp(this.configuration).createImageVariation(o,l,p,f,d,h).then(v=>v(this.axios,this.basePath))}createModeration(o,l){return t.OpenAIApiFp(this.configuration).createModeration(o,l).then(p=>p(this.axios,this.basePath))}createSearch(o,l,p){return t.OpenAIApiFp(this.configuration).createSearch(o,l,p).then(f=>f(this.axios,this.basePath))}createTranscription(o,l,p,f,d,h,v){return t.OpenAIApiFp(this.configuration).createTranscription(o,l,p,f,d,h,v).then(b=>b(this.axios,this.basePath))}createTranslation(o,l,p,f,d,h){return t.OpenAIApiFp(this.configuration).createTranslation(o,l,p,f,d,h).then(v=>v(this.axios,this.basePath))}deleteFile(o,l){return t.OpenAIApiFp(this.configuration).deleteFile(o,l).then(p=>p(this.axios,this.basePath))}deleteModel(o,l){return t.OpenAIApiFp(this.configuration).deleteModel(o,l).then(p=>p(this.axios,this.basePath))}downloadFile(o,l){return t.OpenAIApiFp(this.configuration).downloadFile(o,l).then(p=>p(this.axios,this.basePath))}listEngines(o){return t.OpenAIApiFp(this.configuration).listEngines(o).then(l=>l(this.axios,this.basePath))}listFiles(o){return t.OpenAIApiFp(this.configuration).listFiles(o).then(l=>l(this.axios,this.basePath))}listFineTuneEvents(o,l,p){return t.OpenAIApiFp(this.configuration).listFineTuneEvents(o,l,p).then(f=>f(this.axios,this.basePath))}listFineTunes(o){return t.OpenAIApiFp(this.configuration).listFineTunes(o).then(l=>l(this.axios,this.basePath))}listModels(o){return t.OpenAIApiFp(this.configuration).listModels(o).then(l=>l(this.axios,this.basePath))}retrieveEngine(o,l){return t.OpenAIApiFp(this.configuration).retrieveEngine(o,l).then(p=>p(this.axios,this.basePath))}retrieveFile(o,l){return t.OpenAIApiFp(this.configuration).retrieveFile(o,l).then(p=>p(this.axios,this.basePath))}retrieveFineTune(o,l){return t.OpenAIApiFp(this.configuration).retrieveFineTune(o,l).then(p=>p(this.axios,this.basePath))}retrieveModel(o,l){return t.OpenAIApiFp(this.configuration).retrieveModel(o,l).then(p=>p(this.axios,this.basePath))}}t.OpenAIApi=a})(F1);var po={};const oS="openai",lS="3.2.1",fS="Node.js library for the OpenAI API",cS={type:"git",url:"git@github.com:openai/openai-node.git"},hS=["openai","open","ai","gpt-3","gpt3"],dS="OpenAI",pS="MIT",vS="./dist/index.js",gS="./dist/index.d.ts",mS={build:"tsc --outDir dist/"},_S={axios:"^0.26.0","form-data":"^4.0.0"},bS={"@types/node":"^12.11.5",typescript:"^3.6.4"},DS={name:oS,version:lS,description:fS,repository:cS,keywords:hS,author:dS,license:pS,main:vS,types:gS,scripts:mS,dependencies:_S,devDependencies:bS};var Yl,Bd;function wS(){return Bd||(Bd=1,Yl=typeof self=="object"?self.FormData:window.FormData),Yl}Object.defineProperty(po,"__esModule",{value:!0});po.Configuration=void 0;const yS=DS;class ES{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${yS.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=wS())}isJsonMime(e){const r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(r.test(e)||e.toLowerCase()==="application/json-patch+json")}}po.Configuration=ES;(function(t){var e=vr&&vr.__createBinding||(Object.create?function(n,i,a,s){s===void 0&&(s=a),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]}),r=vr&&vr.__exportStar||function(n,i){for(var a in n)a!=="default"&&!i.hasOwnProperty(a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(F1,t),r(po,t)})(wf);function js(t){const e=new wf.Configuration({apiKey:t});return new wf.OpenAIApi(e)}async function AS(t,e,r="text-davinci-003"){return await t.createCompletion({model:r,prompt:e,temperature:.8,max_tokens:250})}async function CS(t,e,r="gpt-3.5-turbo"){return await t.createChatCompletion({model:r,messages:[{role:"user",content:e}],temperature:.8,max_tokens:250})}async function FS(t,e,r="text-embedding-ada-002"){return await t.createEmbedding({model:r,input:e})}async function SS(t){return await t.listModels()}const Zl="preferredEmbeddingModel";function BS(){const t=gr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Zl]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[Zl]=a,r(a))},get:()=>It(t),delete:()=>{i&&(delete localStorage[Zl],r(""))}}}const Cf=BS(),Jl="oKey";function OS(){const t=gr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Jl]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[Jl]=a,r(a))},get:()=>It(t),delete:()=>{i&&(delete localStorage[Jl],r(""))}}}const Yi=OS(),Od="concept";function MS(){const t=gr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,s)=>{if(s.startsWith(Od+"_")){const o=s.split(/_(.*)/s)[1];a[o]=JSON.parse(localStorage[s])}return a},{})||{}),{subscribe:e,update:(a,s)=>{if(!a||!i)return;const o=It(t);o[a]=s,localStorage[`concept_${a}`]=JSON.stringify(s),r(o)},get:()=>It(t),remove:a=>{if(!a||!i)return;const s=It(t);delete s[a],delete localStorage[`concept_${a}`],r(s)},delete:()=>{i&&(delete localStorage[Od],r({}))}}}const Hr=MS();function PS(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!0,pending:NS,then:IS,catch:TS,value:27,error:28,blocks:[,,,]};return Ds(r=t[6],i),{c(){e=Pt(),i.block.c()},l(a){e=Pt(),i.block.l(a)},m(a,s){le(a,e,s),i.block.m(a,i.anchor=s),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(a,s){t=a,i.ctx=t,s&64&&r!==(r=t[6])&&Ds(r,i)||Fp(i,t,s)},i(a){n||(me(i.block),n=!0)},o(a){for(let s=0;s<3;s+=1){const o=i.blocks[s];we(o)}n=!1},d(a){a&&k(e),i.block.d(a),i.token=null,i=null}}}function kS(t){let e,r,n,i,a;return{c(){e=H("div"),r=H("div"),n=H("div"),i=H("p"),a=Oe("Set OpenAI key in settings to use embedding map."),this.h()},l(s){e=G(s,"DIV",{class:!0});var o=j(e);r=G(o,"DIV",{class:!0});var l=j(r);n=G(l,"DIV",{class:!0});var p=j(n);i=G(p,"P",{class:!0});var f=j(i);a=Me(f,"Set OpenAI key in settings to use embedding map."),f.forEach(k),p.forEach(k),l.forEach(k),o.forEach(k),this.h()},h(){B(i,"class","text-center text-lg"),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(s,o){le(s,e,o),I(e,r),I(r,n),I(n,i),I(i,a)},p:Pe,i:Pe,o:Pe,d(s){s&&k(e)}}}function TS(t){let e,r=t[28].message+"",n;return{c(){e=H("p"),n=Oe(r),this.h()},l(i){e=G(i,"P",{style:!0});var a=j(e);n=Me(a,r),a.forEach(k),this.h()},h(){Tt(e,"color","red")},m(i,a){le(i,e,a),I(e,n)},p(i,a){a&64&&r!==(r=i[28].message+"")&&Br(n,r)},i:Pe,o:Pe,d(i){i&&k(e)}}}function IS(t){let e,r,n,i,a,s,o,l,p,f,d,h,v,b,g,_,D,S,y,F,A,C,M,O,N,q,Z,Q,V,L,z,U,J,ie,ae,pe,De,Ae,Be,je,Le,Ve,lt,vt,Ze,Ye,Ct,Je,ht,ft;r=new l3({props:{dimensions:t[3],center:t[8]}});let gt=t[4].embedExponentialScaling&&Md(t);return{c(){e=H("div"),ze(r.$$.fragment),i=Fe(),a=H("div"),s=H("div"),o=H("label"),l=H("span"),p=Oe("Exponential Scaling"),f=Fe(),d=H("input"),v=Fe(),gt&&gt.c(),b=Fe(),g=H("div"),_=H("label"),D=H("span"),S=Oe("# Prompts"),y=Fe(),F=H("input"),A=Fe(),C=H("div"),M=H("div"),O=H("label"),N=H("span"),q=Oe("Clusters"),Z=Fe(),Q=H("div"),V=H("button"),L=Oe("0"),U=Fe(),J=H("button"),ie=Oe("2"),ae=Fe(),pe=H("button"),De=Oe("4"),Ae=Fe(),Be=H("button"),je=Oe("6"),Le=Fe(),Ve=H("button"),lt=Oe("8"),vt=Fe(),Ze=H("div"),Ye=H("button"),Ct=Oe("Shuffle"),this.h()},l(Qe){e=G(Qe,"DIV",{class:!0});var Xe=j(e);qe(r.$$.fragment,Xe),Xe.forEach(k),i=Se(Qe),a=G(Qe,"DIV",{class:!0});var ke=j(a);s=G(ke,"DIV",{class:!0});var Ne=j(s);o=G(Ne,"LABEL",{class:!0});var Mt=j(o);l=G(Mt,"SPAN",{class:!0});var jt=j(l);p=Me(jt,"Exponential Scaling"),jt.forEach(k),Mt.forEach(k),f=Se(Ne),d=G(Ne,"INPUT",{type:!0,class:!0}),Ne.forEach(k),v=Se(ke),gt&&gt.l(ke),b=Se(ke),g=G(ke,"DIV",{class:!0});var Gt=j(g);_=G(Gt,"LABEL",{class:!0});var K=j(_);D=G(K,"SPAN",{class:!0});var Y=j(D);S=Me(Y,"# Prompts"),Y.forEach(k),K.forEach(k),y=Se(Gt),F=G(Gt,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Gt.forEach(k),A=Se(ke),C=G(ke,"DIV",{class:!0});var ee=j(C);M=G(ee,"DIV",{class:!0});var fe=j(M);O=G(fe,"LABEL",{class:!0});var ue=j(O);N=G(ue,"SPAN",{class:!0});var he=j(N);q=Me(he,"Clusters"),he.forEach(k),ue.forEach(k),Z=Se(fe),Q=G(fe,"DIV",{class:!0});var se=j(Q);V=G(se,"BUTTON",{class:!0});var ce=j(V);L=Me(ce,"0"),ce.forEach(k),U=Se(se),J=G(se,"BUTTON",{class:!0});var Ce=j(J);ie=Me(Ce,"2"),Ce.forEach(k),ae=Se(se),pe=G(se,"BUTTON",{class:!0});var Re=j(pe);De=Me(Re,"4"),Re.forEach(k),Ae=Se(se),Be=G(se,"BUTTON",{class:!0});var nt=j(Be);je=Me(nt,"6"),nt.forEach(k),Le=Se(se),Ve=G(se,"BUTTON",{class:!0});var Te=j(Ve);lt=Me(Te,"8"),Te.forEach(k),se.forEach(k),fe.forEach(k),ee.forEach(k),vt=Se(ke),Ze=G(ke,"DIV",{class:!0});var Wt=j(Ze);Ye=G(Wt,"BUTTON",{class:!0});var Lt=j(Ye);Ct=Me(Lt,"Shuffle"),Lt.forEach(k),Wt.forEach(k),ke.forEach(k),this.h()},h(){B(e,"class","w-full h-full"),Ji(()=>t[16].call(e)),B(l,"class","label-text"),B(o,"class","label"),B(d,"type","checkbox"),B(d,"class","toggle toggle-sm"),d.checked=h=t[4].embedExponentialScaling,B(s,"class","min-w-max px-2"),B(D,"class","label-text"),B(_,"class","label"),F.value=t[9],B(F,"type","range"),B(F,"min","1"),B(F,"max",t[2]),B(F,"step","1"),B(F,"class","range range-sm"),B(g,"class","w-full px-2"),B(N,"class","label-text"),B(O,"class","label pb-1 m-0"),B(V,"class",z=(t[4].embedClusters||0)===0?"btn btn-xs btn-active":"btn btn-xs"),B(J,"class","btn btn-xs"),ct(J,"btn-active",t[4].embedClusters===2),ct(J,"btn-disabled",Object.keys(t[4].weightedPrompts).length<2),B(pe,"class","btn btn-xs"),ct(pe,"btn-active",t[4].embedClusters===4),ct(pe,"btn-disabled",Object.keys(t[4].weightedPrompts).length<4),B(Be,"class","btn btn-xs"),ct(Be,"btn-active",t[4].embedClusters===6),ct(Be,"btn-disabled",Object.keys(t[4].weightedPrompts).length<6),B(Ve,"class","btn btn-xs"),ct(Ve,"btn-active",t[4].embedClusters===8),ct(Ve,"btn-disabled",Object.keys(t[4].weightedPrompts).length<8),B(Q,"class","btn-group btn-group-horizontal p-0"),B(M,"class",""),B(C,"class",""),B(Ye,"class","btn btn-xs btn-primary"),B(Ze,"class","w-32 px-2 pb-1 flex flex-col justify-end"),B(a,"class","px-2 py-4 pb-0 flex")},m(Qe,Xe){le(Qe,e,Xe),We(r,e,null),n=vu(e,t[16].bind(e)),le(Qe,i,Xe),le(Qe,a,Xe),I(a,s),I(s,o),I(o,l),I(l,p),I(s,f),I(s,d),I(a,v),gt&&gt.m(a,null),I(a,b),I(a,g),I(g,_),I(_,D),I(D,S),I(g,y),I(g,F),I(a,A),I(a,C),I(C,M),I(M,O),I(O,N),I(N,q),I(M,Z),I(M,Q),I(Q,V),I(V,L),I(Q,U),I(Q,J),I(J,ie),I(Q,ae),I(Q,pe),I(pe,De),I(Q,Ae),I(Q,Be),I(Be,je),I(Q,Le),I(Q,Ve),I(Ve,lt),I(a,vt),I(a,Ze),I(Ze,Ye),I(Ye,Ct),Je=!0,ht||(ft=[ge(d,"change",t[11]),ge(F,"change",t[10]),ge(V,"click",t[17]),ge(J,"click",t[18]),ge(pe,"click",t[19]),ge(Be,"click",t[20]),ge(Ve,"click",t[21]),ge(Ye,"click",t[14])],ht=!0)},p(Qe,Xe){const ke={};Xe&8&&(ke.dimensions=Qe[3]),Xe&256&&(ke.center=Qe[8]),r.$set(ke),(!Je||Xe&16&&h!==(h=Qe[4].embedExponentialScaling))&&(d.checked=h),Qe[4].embedExponentialScaling?gt?gt.p(Qe,Xe):(gt=Md(Qe),gt.c(),gt.m(a,b)):gt&&(gt.d(1),gt=null),(!Je||Xe&512)&&(F.value=Qe[9]),(!Je||Xe&4)&&B(F,"max",Qe[2]),(!Je||Xe&16&&z!==(z=(Qe[4].embedClusters||0)===0?"btn btn-xs btn-active":"btn btn-xs"))&&B(V,"class",z),(!Je||Xe&16)&&ct(J,"btn-active",Qe[4].embedClusters===2),(!Je||Xe&16)&&ct(J,"btn-disabled",Object.keys(Qe[4].weightedPrompts).length<2),(!Je||Xe&16)&&ct(pe,"btn-active",Qe[4].embedClusters===4),(!Je||Xe&16)&&ct(pe,"btn-disabled",Object.keys(Qe[4].weightedPrompts).length<4),(!Je||Xe&16)&&ct(Be,"btn-active",Qe[4].embedClusters===6),(!Je||Xe&16)&&ct(Be,"btn-disabled",Object.keys(Qe[4].weightedPrompts).length<6),(!Je||Xe&16)&&ct(Ve,"btn-active",Qe[4].embedClusters===8),(!Je||Xe&16)&&ct(Ve,"btn-disabled",Object.keys(Qe[4].weightedPrompts).length<8)},i(Qe){Je||(me(r.$$.fragment,Qe),Je=!0)},o(Qe){we(r.$$.fragment,Qe),Je=!1},d(Qe){Qe&&k(e),He(r),n(),Qe&&k(i),Qe&&k(a),gt&&gt.d(),ht=!1,$t(ft)}}}function Md(t){let e,r,n,i,a,s,o,l,p;return{c(){e=H("div"),r=H("label"),n=H("span"),i=Oe("Scaling Power"),a=Fe(),s=H("input"),this.h()},l(f){e=G(f,"DIV",{class:!0});var d=j(e);r=G(d,"LABEL",{class:!0});var h=j(r);n=G(h,"SPAN",{class:!0});var v=j(n);i=Me(v,"Scaling Power"),v.forEach(k),h.forEach(k),a=Se(d),s=G(d,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),d.forEach(k),this.h()},h(){B(n,"class","label-text"),B(r,"class","label"),s.value=o=t[4].embedWeightScaling,B(s,"type","range"),B(s,"min","0.5"),B(s,"max","3"),B(s,"step","0.1"),B(s,"class","range range-sm"),B(e,"class","w-full px-2")},m(f,d){le(f,e,d),I(e,r),I(r,n),I(n,i),I(e,a),I(e,s),l||(p=ge(s,"change",t[12]),l=!0)},p(f,d){d&16&&o!==(o=f[4].embedWeightScaling)&&(s.value=o)},d(f){f&&k(e),l=!1,p()}}}function NS(t){let e,r,n,i,a,s;return{c(){e=H("div"),r=H("div"),n=H("div"),i=H("progress"),this.h()},l(o){e=G(o,"DIV",{class:!0});var l=j(e);r=G(l,"DIV",{class:!0});var p=j(r);n=G(p,"DIV",{class:!0});var f=j(n);i=G(f,"PROGRESS",{class:!0,max:!0}),j(i).forEach(k),f.forEach(k),p.forEach(k),l.forEach(k),this.h()},h(){B(i,"class","progress progress-primary w-56"),i.value=a=Object.keys(t[7]).length,B(i,"max",s=Object.keys(t[4].weightedPrompts).length),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(o,l){le(o,e,l),I(e,r),I(r,n),I(n,i)},p(o,l){l&128&&a!==(a=Object.keys(o[7]).length)&&(i.value=a),l&16&&s!==(s=Object.keys(o[4].weightedPrompts).length)&&B(i,"max",s)},i:Pe,o:Pe,d(o){o&&k(e)}}}function xS(t){let e,r,n,i;const a=[kS,PS],s=[];function o(l,p){return l[5]?1:0}return e=o(t),r=s[e]=a[e](t),{c(){r.c(),n=Pt()},l(l){r.l(l),n=Pt()},m(l,p){s[e].m(l,p),le(l,n,p),i=!0},p(l,[p]){let f=e;e=o(l),e===f?s[e].p(l,p):(cr(),we(s[f],1,1,()=>{s[f]=null}),hr(),r=s[e],r?r.p(l,p):(r=s[e]=a[e](l),r.c()),me(r,1),r.m(n.parentNode,n))},i(l){i||(me(r),i=!0)},o(l){we(r),i=!1},d(l){s[e].d(l),l&&k(n)}}}function RS(t){return t<2?0:t<4?2:t<6?4:t<8?6:8}function LS(t,e){return e?t.embedClusterSets?Object.entries(e).length!==Object.entries(t.weightedPrompts).length?(console.log("embeddings length mismatch",Object.entries(e).length,Object.entries(t.weightedPrompts).length),console.log(e),!0):(t.lastPromptChange||0)>(t.lastEmbeddingChange||0)?(console.log("prompt change after embedding change"),!0):!1:(console.log("no active cluster sets"),!0):(console.log("no active embeddings"),!0)}function US(t,e,r){let n,i,a,s,o,l,p,f;Ke(t,rt,L=>r(4,o=L)),Ke(t,Hr,L=>r(22,l=L)),Ke(t,Yi,L=>r(5,p=L)),Ke(t,Df,L=>r(15,f=L));let d=0,h=0,v=null,b={};function g(L){const{target:z}=L;if(!z)return;const U=z;if(!U.value)return;const J=parseInt(U.value);J>0&&J<=n&&rt.update({...o,embedPromptLimit:J})}function _(){rt.update({...o,embedExponentialScaling:!o.embedExponentialScaling})}function D(L){const{target:z}=L;if(!z)return;const U=z;if(!U.value)return;const J=parseInt(U.value);rt.update({...o,embedWeightScaling:J})}function S(L){[0,2,4,6,8].indexOf(L)!==-1&&rt.update({...o,embedClusters:L})}function y(L){let z=new HF({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:5e3,metric:"euclidean"});const U=Object.keys(L),J=Object.values(L);z.init({data:J,type:"dense"}),z.run();let ae=z.getOutputScaled().map(([De,Ae])=>[(De+1)/2,(Ae+1)/2]);return U.reduce((De,Ae,Be)=>(De[Ae]=ae[Be],De),{})}function F(L,z){return new _f.KMEANS().run(L,z)}async function A(){rt.update({...o,scaledEmbedMappings:y(f)})}async function C(L){return console.log("waiting for embedding for",L),new Promise((z,U)=>{const J=()=>{const ie=Hr.get()[L];console.log("embeddingFromConcept",ie),ie?z(ie):ie===null?setTimeout(J,500):ie===void 0?(console.log("setting embedding to null for",L),Hr.update(L,null),setTimeout(J,5e3)):(console.log("not found embedding for",L,ie),U(ie))};J()})}async function M(){if(console.log("fetching embeddings"),!p||!o.weightedPrompts)return;const L=Object.entries(o.weightedPrompts).map(([De,Ae])=>[De,Ae.text]);r(7,b={}),console.log(l);for(let De of L){console.log("fetching embedding for",De[1]);const Ae=await C(De[1]);r(7,b[De[0]]=Ae,b)}let z=Object.entries(b).sort((De,Ae)=>De[0]-Ae[0]);const U=De=>new Array(De).fill(null).map(()=>[]);console.log("clustering embeddings");const J=z.length>=2?F(z.map(De=>De[1]),2):[z.map(De=>De[0])];console.log("set of 2 complete");const ie=z.length>=4?F(z.map(De=>De[1]),4):J;console.log("set of 4 complete");const ae=z.length>=6?F(z.map(De=>De[1]),6):ie;console.log("set of 6 complete");const pe=z.length>=8?F(z.map(De=>De[1]),8):ae;console.log("set of 8 complete"),rt.update({...o,embedClusterSets:{2:[...J,...U(2-J.length)],4:[...ie,...U(4-ie.length)],6:[...ae,...U(6-ae.length)],8:[...pe,...U(8-pe.length)]},lastEmbeddingChange:Date.now(),scaledEmbedMappings:y(b)}),Df.set(b),console.log("embeddings complete")}function O(){d=this.clientWidth,h=this.clientHeight,r(0,d),r(1,h)}const N=()=>S(0),q=()=>S(2),Z=()=>S(4),Q=()=>S(6),V=()=>S(8);return t.$$.update=()=>{t.$$.dirty&16&&r(2,n=Object.keys(o.weightedPrompts||{}).length),t.$$.dirty&20&&r(9,i=o.embedPromptLimit||n),t.$$.dirty&3&&r(3,a=[d||250,h||250]),t.$$.dirty&8&&r(8,s=_u(a)),t.$$.dirty&32784&&f&&Object.keys(f).length<o.embedClusters&&S(RS(Object.keys(f).length)),t.$$.dirty&32816&&p&&LS(o,f)&&(console.log("Embeddings require update"),r(6,v=M()))},[d,h,n,a,o,p,v,b,s,i,g,_,D,S,A,f,O,N,q,Z,Q,V]}class VS extends ut{constructor(e){super(),st(this,e,US,xS,ot,{})}}let fs;const jS=new Uint8Array(16);function zS(){if(!fs&&(fs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!fs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fs(jS)}const Tr=[];for(let t=0;t<256;++t)Tr.push((t+256).toString(16).slice(1));function qS(t,e=0){return(Tr[t[e+0]]+Tr[t[e+1]]+Tr[t[e+2]]+Tr[t[e+3]]+"-"+Tr[t[e+4]]+Tr[t[e+5]]+"-"+Tr[t[e+6]]+Tr[t[e+7]]+"-"+Tr[t[e+8]]+Tr[t[e+9]]+"-"+Tr[t[e+10]]+Tr[t[e+11]]+Tr[t[e+12]]+Tr[t[e+13]]+Tr[t[e+14]]+Tr[t[e+15]]).toLowerCase()}const WS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Pd={randomUUID:WS};function vo(t,e,r){if(Pd.randomUUID&&!e&&!t)return Pd.randomUUID();t=t||{};const n=t.random||(t.rng||zS)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return qS(n)}const cs="showZeroPrompts";function HS(){const t=gr(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[cs]?JSON.parse(localStorage[cs]):!1),{subscribe:e,update:a=>{i&&(localStorage[cs]=JSON.stringify(!!a),r(!!a))},get:()=>It(t),delete:()=>{i&&(delete localStorage[cs],r(!1))}}}const zs=HS(),hs="useWeightOrdering";function GS(){const t=gr(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[hs]?JSON.parse(localStorage[hs]):!1),{subscribe:e,update:a=>{i&&(localStorage[hs]=JSON.stringify(!!a),r(!!a))},get:()=>It(t),delete:()=>{i&&(delete localStorage[hs],r(!1))}}}const Ff=GS(),$f=$s(Ff,t=>It(Ff));var Sf=function(t,e){return Sf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Sf(t,e)};function Yf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Sf(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Bf,Zf=function(){function t(){}return t._xfnv1a=function(e){for(var r=2166136261,n=0;n<e.length;n++)r=Math.imul(r^e.charCodeAt(n),16777619);return function(){return r+=r<<13,r^=r>>>7,r+=r<<3,r^=r>>>17,(r+=r<<5)>>>0}},t}(),KS=function(t){function e(r){var n=t.call(this)||this;return n.a=e._xfnv1a(r)(),n}return Yf(e,t),e.prototype.next=function(){var r=this.a+=1831565813;return r=Math.imul(r^r>>>15,1|r),(((r^=r+Math.imul(r^r>>>7,61|r))^r>>>14)>>>0)/4294967296},e}(Zf),$S=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Yf(e,t),e.prototype.next=function(){this.a>>>=0,this.b>>>=0,this.c>>>=0,this.d>>>=0;var r=this.a+this.b|0;return this.a=this.b^this.b>>>9,this.b=this.c+(this.c<<3)|0,this.c=this.c<<21|this.c>>>11,this.d=this.d+1|0,r=r+this.d|0,this.c=this.c+r|0,(r>>>0)/4294967296},e}(Zf),YS=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Yf(e,t),e.prototype.next=function(){var r=this.b<<9,n=5*this.a;return n=n<<7|9*(n>>>25),this.c^=this.a,this.d^=this.b,this.b^=this.c,this.a^=this.d,this.c^=r,this.d=this.d<<11|this.d>>>21,(n>>>0)/4294967296},e}(Zf);(function(t){t.sfc32="sfc32",t.mulberry32="mulberry32",t.xoshiro128ss="xoshiro128ss"})(Bf||(Bf={}));var ZS=function(){function t(e,r){r===void 0&&(r=Bf.sfc32),this.str=e,this.prng=r,this.generator=this._initializeGenerator()}return t.prototype.next=function(){return this.generator.next()},t.prototype._initializeGenerator=function(){if(function(r){return r===null}(e=this.str)||function(r){return r===void 0}(e))return this.wrap();var e;switch(this.prng){case"sfc32":return new $S(this.str);case"mulberry32":return new KS(this.str);case"xoshiro128ss":return new YS(this.str);default:return this.wrap()}},t.prototype.wrap=function(){return{next:function(){return Math.random()}}},t}();const Ql="slotSet";function JS(){const t=gr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,s)=>{if(s.startsWith(Ql)){const o=s.split("_")[1];a[o]=JSON.parse(localStorage[s])}return a},{})||{}),{subscribe:e,update:(a,s)=>{const o=It(t),p={...o[a]||{},...s};i&&(localStorage[`${Ql}_${a}`]=JSON.stringify(p));const f={...o,[a]:p};r(f)},get:a=>It(t)[a],getAll:()=>It(t),delete:a=>{i&&delete localStorage[`${Ql}_${a}`];const s={...It(t)};delete s[a],r(s)}}}const Ki=JS();function kd(){return(Math.random()*1e6).toFixed(0)}function QS(){const t=gr(kd()),{subscribe:e,set:r}=t;return{subscribe:e,get:()=>It(t),shuffle:()=>{r(kd())}}}const Zi=QS();function qs(t){let e=t.replace(/\s+/g,"_");return e=e.toUpperCase(),"$"+e}function Td(t){const e=t.length>0&&t.length<32,r=/^[a-zA-Z0-9 ]+$/.test(t),n=/^[a-zA-Z]/.test(t),i=/[a-zA-Z0-9]$/.test(t);return e&&r&&n&&i}function XS(){const t=Ki.getAll();return Object.values(t).reduce((r,n)=>{const i=qs(n.name);return i&&(r[i]=[...n.values]),r},{})}function e5(t,e){const r=new ZS(e);return Object.entries(t).reduce((i,[a,s])=>(i[a]=[...s].sort(()=>r.next()-.5),i),{})}function hu(t,e){let r=e5(XS(),e),n=t;for(const[i,a]of Object.entries(r)){if(a.length===0)continue;let s=0;for(;n.includes(i);)s>=a.length&&(s=0),n=n.replace(i,a[s]),s++}return n}function t5(t){const e=[],r=/((?:[^:]+|:(?!:))+)(?:::(\d+(?:\.\d+)?))?(?=\s|$)/g;let n;for(;(n=r.exec(t))!==null;){const i=n[1].trim(),a=n[2]?parseFloat(n[2]):1;i&&e.push([i,a])}return e}function Xl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=t.length-1;let r=t;for(;r[e]===",";)r=r.slice(0,e);return r}function ef(t){if(typeof t!="string")throw new Error("Input must be a string");const e=["-","#","*","","",">","<","+","^","~","(",")","[","]","{","}"];let r=t.trim();for(;e.includes(r[0]);)r=r.slice(1).trim();return/^\d+(\.|\))\s/.test(r)&&(r=r.replace(/^\d+(\.|\))\s/,"")),r}function du(t){if(t=t.replace(/^\n+|\n+$/g,""),t.includes("::"))return t5(t);if(t.includes(`
`))return t.split(`
`).map(a=>ef(Xl(a))).filter(a=>a.length>0).map(a=>[a,1]);const e=t.match(/[^.!?]+[.!?]+/g)||[],r=e.length,n=t.split(",").map(a=>ef(Xl(a))).filter(a=>a.length>0),i=n.length-1;return r>i?e.map(a=>ef(Xl(a))).filter(a=>a.length>0).map(a=>[a,1]):n.map(a=>[a,1])}function Ws(t,e,r){let n=Object.entries(t.weightedPrompts);return e&&(n=n.sort((i,a)=>Bi(t,parseInt(a[0]))-Bi(t,parseInt(i[0])))),r||(n=n.filter(i=>r||Bi(t,parseInt(i[0])))),n}function r5(t){return t.trim().endsWith(".")}function n5(t){let e="",r=[];return t.forEach((n,i)=>{r5(n)?(r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+". ",r=[]),e+=n+" "):r.push(n.trim())}),r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+"."),e.trim()}function Of(t,e,r,n,i){if(r)return Ws(t,n,i).map(([s,o],l)=>`${hu(o.text,`${e}${s}${l}`)}::${Bi(t,parseInt(s))}`).join(" ");const a=Ws(t,n,i).map(([s,o],l)=>hu(o.text,`${e}${s}${l}`));return n5(a)}function Id(t,e,r){const n=t.slice();return n[4]=e[r][0],n[5]=e[r][1],n[7]=r,n}function Nd(t,e){let r,n=hu(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"",i,a,s,o=Bi(e[0],parseInt(e[4]))+"",l,p,f;return{key:t,first:null,c(){r=H("span"),i=Oe(n),a=Oe("::"),s=H("b"),l=Oe(o),p=Fe(),this.h()},l(d){r=G(d,"SPAN",{style:!0});var h=j(r);i=Me(h,n),a=Me(h,"::"),s=G(h,"B",{});var v=j(s);l=Me(v,o),p=Se(v),v.forEach(k),h.forEach(k),this.h()},h(){B(r,"style",f=`color: rgba(255,255,255,${Math.max(.25,T0(e[0],parseInt(e[4])))});`),this.first=r},m(d,h){le(d,r,h),I(r,i),I(r,a),I(r,s),I(s,l),I(s,p)},p(d,h){e=d,h&15&&n!==(n=hu(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"")&&Br(i,n),h&7&&o!==(o=Bi(e[0],parseInt(e[4]))+"")&&Br(l,o),h&7&&f!==(f=`color: rgba(255,255,255,${Math.max(.25,T0(e[0],parseInt(e[4])))});`)&&B(r,"style",f)},d(d){d&&k(r)}}}function i5(t){let e,r,n=[],i=new Map,a=Ws(t[0],t[1],t[2]);const s=o=>o[4];for(let o=0;o<a.length;o+=1){let l=Id(t,a,o),p=s(l);i.set(p,n[o]=Nd(p,l))}return{c(){e=H("div"),r=H("p");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=G(o,"DIV",{class:!0});var l=j(e);r=G(l,"P",{class:!0});var p=j(r);for(let f=0;f<n.length;f+=1)n[f].l(p);p.forEach(k),l.forEach(k),this.h()},h(){B(r,"class","text-sm select-none"),B(e,"class","overflow-y-auto h-full")},m(o,l){le(o,e,l),I(e,r);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(r,null)},p(o,[l]){l&15&&(a=Ws(o[0],o[1],o[2]),n=Bn(n,l,s,1,o,a,i,r,Yn,Nd,null,Id))},i:Pe,o:Pe,d(o){o&&k(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function a5(t,e,r){let n,i,a,s;return Ke(t,rt,o=>r(0,n=o)),Ke(t,$f,o=>r(1,i=o)),Ke(t,zs,o=>r(2,a=o)),Ke(t,Zi,o=>r(3,s=o)),[n,i,a,s]}class u5 extends ut{constructor(e){super(),st(this,e,a5,i5,ot,{})}}const ds="outputMultiPrompt";function s5(){const t=gr(!0),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[ds]?JSON.parse(localStorage[ds]):!1),{subscribe:e,update:a=>{i&&(localStorage[ds]=JSON.stringify(!!a),r(!!a))},get:()=>It(t),delete:()=>{i&&(delete localStorage[ds],r(!0))}}}const Mf=s5();function o5(t){let e,r,n,i=Of(t[0],t[1],t[2],t[3],t[4])+"",a;return{c(){e=H("div"),r=H("p"),n=H("span"),a=Oe(i),this.h()},l(s){e=G(s,"DIV",{class:!0});var o=j(e);r=G(o,"P",{class:!0});var l=j(r);n=G(l,"SPAN",{style:!0});var p=j(n);a=Me(p,i),p.forEach(k),l.forEach(k),o.forEach(k),this.h()},h(){B(n,"style","color: rgba(255,255,255,0.75});"),B(r,"class","text-sm select-none"),B(e,"class","overflow-y-auto h-full")},m(s,o){le(s,e,o),I(e,r),I(r,n),I(n,a)},p(s,[o]){o&31&&i!==(i=Of(s[0],s[1],s[2],s[3],s[4])+"")&&Br(a,i)},i:Pe,o:Pe,d(s){s&&k(e)}}}function l5(t,e,r){let n,i,a,s,o;return Ke(t,rt,l=>r(0,n=l)),Ke(t,Zi,l=>r(1,i=l)),Ke(t,Mf,l=>r(2,a=l)),Ke(t,$f,l=>r(3,s=l)),Ke(t,zs,l=>r(4,o=l)),[n,i,a,s,o]}class f5 extends ut{constructor(e){super(),st(this,e,l5,o5,ot,{})}}const iu="promptHistory";function c5(){const t=gr([]),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",a=(i&&JSON.parse(localStorage[iu]||"[]")||[]).map(s=>({...s,date:new Date(s.date)}));return r(a),{subscribe:e,add:s=>{if(!s||!i)return;const l=[...It(t),s];localStorage[iu]=JSON.stringify(l),r(l)},update:s=>{!s||!i||(localStorage[iu]=s,r(s))},get:()=>It(t),remove:s=>{if(!i)return;const l=It(t).filter(p=>p.id!==s);localStorage[iu]=JSON.stringify(l),r(l)},delete:()=>{i&&(delete localStorage[iu],r([]))}}}const Jf=c5();function h5(t){let e,r;return e=new f5({}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function d5(t){let e,r;return e=new u5({}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function p5(t){let e,r,n,i,a,s,o,l,p,f,d=t[2]?"Multi":"Single",h,v,b,g,_,D,S,y,F,A,C,M,O,N,q,Z,Q,V;const L=[d5,h5],z=[];function U(J,ie){return J[2]?0:1}return r=U(t),n=z[r]=L[r](t),{c(){e=H("div"),n.c(),i=Fe(),a=H("div"),s=H("div"),o=H("input"),l=Fe(),p=H("label"),f=H("span"),h=Oe(d),v=Fe(),b=H("div"),g=H("input"),_=Fe(),D=H("label"),S=H("span"),y=Oe("Use Weight Ordering"),F=Fe(),A=H("div"),C=H("input"),M=Fe(),O=H("label"),N=H("span"),q=Oe("Include Zero Weights"),this.h()},l(J){e=G(J,"DIV",{class:!0});var ie=j(e);n.l(ie),ie.forEach(k),i=Se(J),a=G(J,"DIV",{class:!0});var ae=j(a);s=G(ae,"DIV",{class:!0});var pe=j(s);o=G(pe,"INPUT",{type:!0,class:!0}),l=Se(pe),p=G(pe,"LABEL",{class:!0});var De=j(p);f=G(De,"SPAN",{class:!0});var Ae=j(f);h=Me(Ae,d),Ae.forEach(k),De.forEach(k),pe.forEach(k),v=Se(ae),b=G(ae,"DIV",{class:!0});var Be=j(b);g=G(Be,"INPUT",{type:!0,class:!0}),_=Se(Be),D=G(Be,"LABEL",{class:!0});var je=j(D);S=G(je,"SPAN",{class:!0});var Le=j(S);y=Me(Le,"Use Weight Ordering"),Le.forEach(k),je.forEach(k),Be.forEach(k),F=Se(ae),A=G(ae,"DIV",{class:!0});var Ve=j(A);C=G(Ve,"INPUT",{type:!0,class:!0}),M=Se(Ve),O=G(Ve,"LABEL",{class:!0});var lt=j(O);N=G(lt,"SPAN",{class:!0});var vt=j(N);q=Me(vt,"Include Zero Weights"),vt.forEach(k),lt.forEach(k),Ve.forEach(k),ae.forEach(k),this.h()},h(){B(e,"class","normal-case font-light text-left cursor-copy bg-slate-900 rounded-t-md rounded-br-md p-4 w-full h-28 active:bg-slate-950 hover:bg-slate-800"),o.checked=t[2],B(o,"type","checkbox"),B(o,"class","toggle toggle-sm mt-2 mr-2"),B(f,"class","label-text"),B(p,"class","label w-10"),B(s,"class","mx-2 flex"),g.checked=t[1],B(g,"type","checkbox"),B(g,"class","toggle toggle-sm mt-2 mr-2"),B(S,"class","label-text"),B(D,"class","label"),B(b,"class","mx-2 flex"),C.checked=t[0],B(C,"type","checkbox"),B(C,"class","toggle toggle-sm mt-2 mr-2"),B(N,"class","label-text"),B(O,"class","label"),B(A,"class","mx-2 flex"),B(a,"class","w-full rounded-b-md flex pl-2 justify-start bg-slate-900")},m(J,ie){le(J,e,ie),z[r].m(e,null),le(J,i,ie),le(J,a,ie),I(a,s),I(s,o),I(s,l),I(s,p),I(p,f),I(f,h),I(a,v),I(a,b),I(b,g),I(b,_),I(b,D),I(D,S),I(S,y),I(a,F),I(a,A),I(A,C),I(A,M),I(A,O),I(O,N),I(N,q),Z=!0,Q||(V=[ge(e,"click",t[3]),ge(o,"change",t[4]),ge(g,"change",t[5]),ge(C,"change",t[6])],Q=!0)},p(J,[ie]){let ae=r;r=U(J),r!==ae&&(cr(),we(z[ae],1,1,()=>{z[ae]=null}),hr(),n=z[r],n||(n=z[r]=L[r](J),n.c()),me(n,1),n.m(e,null)),(!Z||ie&4)&&(o.checked=J[2]),(!Z||ie&4)&&d!==(d=J[2]?"Multi":"Single")&&Br(h,d),(!Z||ie&2)&&(g.checked=J[1]),(!Z||ie&1)&&(C.checked=J[0])},i(J){Z||(me(n),Z=!0)},o(J){we(n),Z=!1},d(J){J&&k(e),z[r].d(),J&&k(i),J&&k(a),Q=!1,$t(V)}}}function v5(t,e,r){let n,i,a,s,o;Ke(t,zs,h=>r(0,n=h)),Ke(t,$f,h=>r(1,i=h)),Ke(t,Mf,h=>r(2,a=h)),Ke(t,Zi,h=>r(7,s=h)),Ke(t,rt,h=>r(8,o=h));function l(){const h=Of(o,s,a,i,n);navigator.clipboard.writeText(h),Zi.shuffle(),Jf.add({id:vo(),prompt:h,date:new Date})}function p(){Mf.update(!a)}function f(){Ff.update(!i)}function d(){zs.update(!n)}return[n,i,a,l,p,f,d]}class g5 extends ut{constructor(e){super(),st(this,e,v5,p5,ot,{})}}function m5(t){let e,r,n,i;return{c(){e=dt("g"),r=dt("circle"),this.h()},l(a){e=pt(a,"g",{});var s=j(e);r=pt(s,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),j(r).forEach(k),s.forEach(k),this.h()},h(){B(r,"cx",n=t[0][0]),B(r,"cy",i=t[0][1]),B(r,"r",t[1]),B(r,"stroke",t[3]),B(r,"stroke-width",t[2]),Tt(r,"fill","rgba(0,0,0,0)")},m(a,s){le(a,e,s),I(e,r)},p(a,[s]){s&1&&n!==(n=a[0][0])&&B(r,"cx",n),s&1&&i!==(i=a[0][1])&&B(r,"cy",i),s&2&&B(r,"r",a[1]),s&8&&B(r,"stroke",a[3]),s&4&&B(r,"stroke-width",a[2])},i:Pe,o:Pe,d(a){a&&k(e)}}}function _5(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=20}=e,{color:s="rgba(46,67,101, 0.4)"}=e;return t.$$set=o=>{"xy"in o&&r(0,n=o.xy),"radius"in o&&r(1,i=o.radius),"stroke"in o&&r(2,a=o.stroke),"color"in o&&r(3,s=o.color)},[n,i,a,s]}class b5 extends ut{constructor(e){super(),st(this,e,_5,m5,ot,{xy:0,radius:1,stroke:2,color:3})}}function D5(t){let e,r,n,i,a;return{c(){e=dt("polygon"),this.h()},l(s){e=pt(s,"polygon",{points:!0,"stroke-width":!0,fill:!0,transform:!0}),j(e).forEach(k),this.h()},h(){B(e,"points",r=`${t[7][0]},${t[7][1]} ${t[9][0]},${t[9][1]} ${t[8][0]},${t[8][1]} ${t[6][0]},${t[6][1]} ${t[4][0]},${t[4][1]} ${t[5][0]},${t[5][1]}`),B(e,"stroke-width",4),B(e,"fill",t[3]),B(e,"transform",n=`rotate(${t[1].toFixed(2)} ${t[0][0]} ${t[0][1]}) rotate(${t[2]?"180":"0"} ${(t[7][0]+t[6][0])/2} ${(t[7][1]+t[6][1])/2})`)},m(s,o){le(s,e,o),i||(a=[ge(e,"mouseover",t[10]),ge(e,"mouseout",t[11]),ge(e,"mousedown",t[12]),ge(e,"touchstart",t[12])],i=!0)},p(s,[o]){o&1008&&r!==(r=`${s[7][0]},${s[7][1]} ${s[9][0]},${s[9][1]} ${s[8][0]},${s[8][1]} ${s[6][0]},${s[6][1]} ${s[4][0]},${s[4][1]} ${s[5][0]},${s[5][1]}`)&&B(e,"points",r),o&8&&B(e,"fill",s[3]),o&199&&n!==(n=`rotate(${s[1].toFixed(2)} ${s[0][0]} ${s[0][1]}) rotate(${s[2]?"180":"0"} ${(s[7][0]+s[6][0])/2} ${(s[7][1]+s[6][1])/2})`)&&B(e,"transform",n)},i:Pe,o:Pe,d(s){s&&k(e),i=!1,$t(a)}}}function w5(t,e,r){let n,i,a,s,o,l,{xy:p=[500,500]}=e,{radius:f=400}=e,{stroke:d=20}=e,{color:h="rgba(46,67,101, 0.4)"}=e,{hoverColor:v="white"}=e,{angle:b=0}=e,{handleMouseDown:g=A=>{}}=e,{reverse:_=!1}=e,D=h;function S(){r(3,D=v)}function y(){r(3,D=h)}function F(A){g(A)}return t.$$set=A=>{"xy"in A&&r(0,p=A.xy),"radius"in A&&r(13,f=A.radius),"stroke"in A&&r(14,d=A.stroke),"color"in A&&r(15,h=A.color),"hoverColor"in A&&r(16,v=A.hoverColor),"angle"in A&&r(1,b=A.angle),"handleMouseDown"in A&&r(17,g=A.handleMouseDown),"reverse"in A&&r(2,_=A.reverse)},t.$$.update=()=>{t.$$.dirty&24577&&r(9,n=Rr(p,[-4,1],f-d/2)),t.$$.dirty&24577&&r(8,i=Rr(p,[1,1],f-d/2)),t.$$.dirty&8193&&r(7,a=Rr(p,[0,1],f)),t.$$.dirty&8193&&r(6,s=Rr(p,[4,1],f)),t.$$.dirty&24577&&r(5,o=Rr(p,[-3,1],f+d/2)),t.$$.dirty&24577&&r(4,l=Rr(p,[1,1],f+d/2))},[p,b,_,D,l,o,s,a,i,n,S,y,F,f,d,h,v,g]}class y5 extends ut{constructor(e){super(),st(this,e,w5,D5,ot,{xy:0,radius:13,stroke:14,color:15,hoverColor:16,angle:1,handleMouseDown:17,reverse:2})}}function xd(t,e,r){const n=t.slice();return n[19]=e[r][0],n[20]=e[r][1],n}function Rd(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,a;e=new Uf({props:{xy:t[0],radius:t[1]}});let s=Object.entries(t[5].weightedPrompts),o=[];for(let f=0;f<s.length;f+=1)o[f]=Ld(xd(t,s,f));const l=f=>we(o[f],1,1,()=>{o[f]=null});let p=n&&Ud(t);return{c(){ze(e.$$.fragment);for(let f=0;f<o.length;f+=1)o[f].c();r=Pt(),p&&p.c(),i=Pt()},l(f){qe(e.$$.fragment,f);for(let d=0;d<o.length;d+=1)o[d].l(f);r=Pt(),p&&p.l(f),i=Pt()},m(f,d){We(e,f,d);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(f,d);le(f,r,d),p&&p.m(f,d),le(f,i,d),a=!0},p(f,d){const h={};if(d&1&&(h.xy=f[0]),d&2&&(h.radius=f[1]),e.$set(h),d&1660){s=Object.entries(f[5].weightedPrompts);let v;for(v=0;v<s.length;v+=1){const b=xd(f,s,v);o[v]?(o[v].p(b,d),me(o[v],1)):(o[v]=Ld(b),o[v].c(),me(o[v],1),o[v].m(r.parentNode,r))}for(cr(),v=s.length;v<o.length;v+=1)l(v);hr()}d&32&&(n=Object.entries(f[5].weightedPrompts).length>0),n?p?(p.p(f,d),d&32&&me(p,1)):(p=Ud(f),p.c(),me(p,1),p.m(i.parentNode,i)):p&&(cr(),we(p,1,1,()=>{p=null}),hr())},i(f){if(!a){me(e.$$.fragment,f);for(let d=0;d<s.length;d+=1)me(o[d]);me(p),a=!0}},o(f){we(e.$$.fragment,f),o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)we(o[d]);we(p),a=!1},d(f){He(e,f),Ks(o,f),f&&k(r),p&&p.d(f),f&&k(i)}}}function Ld(t){let e,r,n;e=new mu({props:{xy:t[10](t[6][t[19]].xy,Vr(t[3],t[20].text.length,t[4])),color:`rgba(255,255,255,${Lr(t[6][t[19]].unitWeight)}`,wh:Vr(t[3],t[20].text.length,t[4]),fontSize:t[4],text:t[20].text}});function i(){return t[13](t[19])}return r=new Fa({props:{xy:t[6][t[19]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:i}}),{c(){ze(e.$$.fragment),ze(r.$$.fragment)},l(a){qe(e.$$.fragment,a),qe(r.$$.fragment,a)},m(a,s){We(e,a,s),We(r,a,s),n=!0},p(a,s){t=a;const o={};s&120&&(o.xy=t[10](t[6][t[19]].xy,Vr(t[3],t[20].text.length,t[4]))),s&96&&(o.color=`rgba(255,255,255,${Lr(t[6][t[19]].unitWeight)}`),s&56&&(o.wh=Vr(t[3],t[20].text.length,t[4])),s&16&&(o.fontSize=t[4]),s&32&&(o.text=t[20].text),e.$set(o);const l={};s&96&&(l.xy=t[6][t[19]].xy),s&4&&(l.radius=t[2]),s&32&&(l.handleMouseDown=i),r.$set(l)},i(a){n||(me(e.$$.fragment,a),me(r.$$.fragment,a),n=!0)},o(a){we(e.$$.fragment,a),we(r.$$.fragment,a),n=!1},d(a){He(e,a),He(r,a)}}}function Ud(t){let e,r,n;return e=new b5({props:{xy:t[0],radius:t[7],stroke:30}}),r=new y5({props:{reverse:t[5].ringReverse,xy:t[0],radius:t[7],stroke:30,angle:t[5].ringStartAngle,color:"rgba(136,157,191, 1)",handleMouseDown:t[14]}}),{c(){ze(e.$$.fragment),ze(r.$$.fragment)},l(i){qe(e.$$.fragment,i),qe(r.$$.fragment,i)},m(i,a){We(e,i,a),We(r,i,a),n=!0},p(i,a){const s={};a&1&&(s.xy=i[0]),a&128&&(s.radius=i[7]),e.$set(s);const o={};a&32&&(o.reverse=i[5].ringReverse),a&1&&(o.xy=i[0]),a&128&&(o.radius=i[7]),a&32&&(o.angle=i[5].ringStartAngle),r.$set(o)},i(i){n||(me(e.$$.fragment,i),me(r.$$.fragment,i),n=!0)},o(i){we(e.$$.fragment,i),we(r.$$.fragment,i),n=!1},d(i){He(e,i),He(r,i)}}}function E5(t){let e,r,n,i,a=t[6]&&t[5].weightedPrompts&&Rd(t);return{c(){e=dt("svg"),a&&a.c(),this.h()},l(s){e=pt(s,"svg",{id:!0,class:!0});var o=j(e);a&&a.l(o),o.forEach(k),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(s,o){le(s,e,o),a&&a.m(e,null),r=!0,n||(i=[ge(e,"mousemove",t[11]),ge(e,"touchmove",t[11]),ge(e,"mouseup",t[8]),ge(e,"touchend",t[8]),ge(e,"dblclick",t[12])],n=!0)},p(s,[o]){s[6]&&s[5].weightedPrompts?a?(a.p(s,o),o&96&&me(a,1)):(a=Rd(s),a.c(),me(a,1),a.m(e,null)):a&&(cr(),we(a,1,1,()=>{a=null}),hr())},i(s){r||(me(a),r=!0)},o(s){we(a),r=!1},d(s){s&&k(e),a&&a.d(),n=!1,$t(i)}}}function Vd(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const s=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=s,r},e):null}function A5(t,e,r){let n,i,a;Ke(t,rt,C=>r(5,a=C));let{center:s=[450,450]}=e,{radius:o=250}=e,{pointRadius:l=10}=e,{textWidth:p=150}=e,{fontSize:f=13}=e,d=[0,0],h=null;function v(C){h=null}function b(C){h=C}function g(C,M){let O=Rn(C,s,o)[0]-180;O<0&&(O+=360);const N=Vf(_u(M),O);return xr(C,N)}function _(C){console.log(o,n);const M=qr(Rn(fu(C,s,n),s,n)[0]);r(6,i=y(a.weightedPrompts,s,o,a.ringWeightScaling,a.ringExponentialScaling,M,a.ringAngles))}function D(C){if(d=Kn(C),h==="main")_(d);else if(h){const M={...a.weightedPrompts[h]},O=fu(d,s,o),N=Rn(O,s,o)[0],q={...a.ringAngles};q[M.id]=N;const Z={...a.weightedPrompts};Z[h]=M,r(6,i=y(Z,s,o,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,q))}}function S(C){d=Kn(C),_(d)}function y(C,M,O,N,q,Z,Q){if(!C||!M||!O||!N)return null;let V=Object.entries(C).reduce((z,[U,J])=>{const ae=a.ringReverse?Z-Q[U]:Q[U]-Z,pe=qr(ae),De=Math.pow(1-pe/360,q?N:1);return z[U]={angleDifference:pe,xy:Rr(M,[Q[U],1],O),unitWeight:De},z},{});const L={...C};return Object.entries(V).forEach(([z,U])=>{L[z].ringWeight=U.unitWeight}),rt.update({...a,ringStartAngle:Z,weightedPrompts:L,ringAngles:Q}),V}const F=C=>b(C),A=()=>b("main");return t.$$set=C=>{"center"in C&&r(0,s=C.center),"radius"in C&&r(1,o=C.radius),"pointRadius"in C&&r(2,l=C.pointRadius),"textWidth"in C&&r(3,p=C.textWidth),"fontSize"in C&&r(4,f=C.fontSize)},t.$$.update=()=>{t.$$.dirty&2&&r(7,n=o-30),t.$$.dirty&32&&Object.keys(a.ringAngles).length!==Object.keys(a.weightedPrompts).length&&rt.update({...a,ringAngles:Vd(a.weightedPrompts,{})}),t.$$.dirty&35&&r(6,i=y(a.weightedPrompts,s,o,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,a.ringAngles||Vd(a.weightedPrompts,{})))},[s,o,l,p,f,a,i,n,v,b,g,D,S,F,A]}class C5 extends ut{constructor(e){super(),st(this,e,A5,E5,ot,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function jd(t){let e,r,n,i,a,s,o,l;return{c(){e=H("div"),r=H("label"),n=H("span"),i=Oe("Scaling Power"),a=Fe(),s=H("input"),this.h()},l(p){e=G(p,"DIV",{class:!0});var f=j(e);r=G(f,"LABEL",{class:!0});var d=j(r);n=G(d,"SPAN",{class:!0});var h=j(n);i=Me(h,"Scaling Power"),h.forEach(k),d.forEach(k),a=Se(f),s=G(f,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),f.forEach(k),this.h()},h(){B(n,"class","label-text"),B(r,"class","label"),B(s,"type","range"),B(s,"min","0.5"),B(s,"max","5"),B(s,"step","0.1"),B(s,"class","range range-xs"),B(e,"class","w-full px-2")},m(p,f){le(p,e,f),I(e,r),I(r,n),I(n,i),I(e,a),I(e,s),nn(s,t[0]),o||(l=[ge(s,"change",t[7]),ge(s,"input",t[7])],o=!0)},p(p,f){f&1&&nn(s,p[0])},d(p){p&&k(e),o=!1,$t(l)}}}function F5(t){let e,r,n,i,a,s,o,l,p,f,d,h,v,b,g,_,D,S,y;r=new C5({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let F=t[1]&&jd(t);return{c(){e=H("div"),ze(r.$$.fragment),i=Fe(),a=H("div"),s=H("div"),o=H("label"),l=H("span"),p=Oe("Exponential Scaling"),f=Fe(),d=H("input"),h=Fe(),F&&F.c(),v=Fe(),b=H("div"),g=H("button"),_=Oe("Reverse"),this.h()},l(A){e=G(A,"DIV",{class:!0});var C=j(e);qe(r.$$.fragment,C),C.forEach(k),i=Se(A),a=G(A,"DIV",{class:!0});var M=j(a);s=G(M,"DIV",{class:!0});var O=j(s);o=G(O,"LABEL",{class:!0});var N=j(o);l=G(N,"SPAN",{class:!0});var q=j(l);p=Me(q,"Exponential Scaling"),q.forEach(k),N.forEach(k),f=Se(O),d=G(O,"INPUT",{type:!0,class:!0}),O.forEach(k),h=Se(M),F&&F.l(M),v=Se(M),b=G(M,"DIV",{class:!0});var Z=j(b);g=G(Z,"BUTTON",{class:!0});var Q=j(g);_=Me(Q,"Reverse"),Q.forEach(k),Z.forEach(k),M.forEach(k),this.h()},h(){B(e,"class","w-full h-full"),Ji(()=>t[5].call(e)),B(l,"class","label-text"),B(o,"class","label"),B(d,"type","checkbox"),B(d,"class","toggle toggle-xs"),B(s,"class","w-52 px-2"),B(g,"class","btn btn-xs btn-primary"),B(b,"class","w-32 px-2 pb-1 flex flex-col justify-end"),B(a,"class","px-2 py-4 pb-0 flex")},m(A,C){le(A,e,C),We(r,e,null),n=vu(e,t[5].bind(e)),le(A,i,C),le(A,a,C),I(a,s),I(s,o),I(o,l),I(l,p),I(s,f),I(s,d),d.checked=t[1],I(a,h),F&&F.m(a,null),I(a,v),I(a,b),I(b,g),I(g,_),D=!0,S||(y=[ge(d,"change",t[6]),ge(g,"click",t[4])],S=!0)},p(A,[C]){const M={};C&12&&(M.center=[Math.round(A[2]/2),Math.round(A[3]/2)]),C&12&&(M.radius=Math.round(Math.min(A[2],A[3])/2)-150),r.$set(M),C&2&&(d.checked=A[1]),A[1]?F?F.p(A,C):(F=jd(A),F.c(),F.m(a,v)):F&&(F.d(1),F=null)},i(A){D||(me(r.$$.fragment,A),D=!0)},o(A){we(r.$$.fragment,A),D=!1},d(A){A&&k(e),He(r),n(),A&&k(i),A&&k(a),F&&F.d(),S=!1,$t(y)}}}function S5(t,e,r){let n;Ke(t,rt,h=>r(8,n=h));let i,a,s=n.ringWeightScaling||2,o=If(n.ringExponentialScaling)?!0:n.ringExponentialScaling;function l(){rt.update({...rt.get(),ringReverse:!n.ringReverse})}function p(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function f(){o=this.checked,r(1,o)}function d(){s=Ap(this.value),r(0,s)}return t.$$.update=()=>{t.$$.dirty&3&&rt.update({...rt.get(),ringExponentialScaling:o,ringWeightScaling:s})},[s,o,i,a,l,p,f,d]}class B5 extends ut{constructor(e){super(),st(this,e,S5,F5,ot,{})}}function O5(t){let e,r;return e=new VS({}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function M5(t){let e,r;return e=new B5({}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function P5(t){let e,r;return e=new DC({}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function k5(t){let e,r;return e=new LC({}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function T5(t){let e,r;return e=new BC({}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function I5(t){let e,r,n,i,a,s;const o=[T5,k5,P5,M5,O5],l=[];function p(f,d){return f[0].weightMode===wt.Bars?0:f[0].weightMode===wt.Pie?1:f[0].weightMode===wt.Circle?2:f[0].weightMode===wt.Ring?3:f[0].weightMode===wt.Embed?4:-1}return~(e=p(t))&&(r=l[e]=o[e](t)),a=new g5({}),{c(){r&&r.c(),n=Fe(),i=H("div"),ze(a.$$.fragment),this.h()},l(f){r&&r.l(f),n=Se(f),i=G(f,"DIV",{class:!0});var d=j(i);qe(a.$$.fragment,d),d.forEach(k),this.h()},h(){B(i,"class","h-48 w-full p-4 flex flex-col")},m(f,d){~e&&l[e].m(f,d),le(f,n,d),le(f,i,d),We(a,i,null),s=!0},p(f,[d]){let h=e;e=p(f),e!==h&&(r&&(cr(),we(l[h],1,1,()=>{l[h]=null}),hr()),~e?(r=l[e],r||(r=l[e]=o[e](f),r.c()),me(r,1),r.m(n.parentNode,n)):r=null)},i(f){s||(me(r),me(a.$$.fragment,f),s=!0)},o(f){we(r),we(a.$$.fragment,f),s=!1},d(f){~e&&l[e].d(f),f&&k(n),f&&k(i),He(a)}}}function N5(t,e,r){let n;return Ke(t,rt,i=>r(0,n=i)),[n]}class x5 extends ut{constructor(e){super(),st(this,e,N5,I5,ot,{})}}function R5(t){let e,r,n,i,a="<<",s,o,l="<",p,f,d,h,v,b=">",g,_,D=">>",S,y,F,A,C,M,O,N,q,Z,Q,V,L,z,U,J,ie;return{c(){e=H("div"),r=H("div"),n=H("div"),i=H("button"),s=Oe(a),o=H("button"),p=Oe(l),f=Fe(),d=H("button"),h=Oe(t[1]),v=H("button"),g=Oe(b),_=H("button"),S=Oe(D),y=Fe(),F=H("div"),A=H("label"),C=Oe("Page Size"),M=Fe(),O=H("select"),N=H("option"),q=Oe("10"),Z=H("option"),Q=Oe("25"),V=H("option"),L=Oe("50"),z=H("option"),U=Oe("100"),this.h()},l(ae){e=G(ae,"DIV",{class:!0});var pe=j(e);r=G(pe,"DIV",{class:!0});var De=j(r);n=G(De,"DIV",{class:!0});var Ae=j(n);i=G(Ae,"BUTTON",{class:!0});var Be=j(i);s=Me(Be,a),Be.forEach(k),o=G(Ae,"BUTTON",{class:!0});var je=j(o);p=Me(je,l),je.forEach(k),f=Se(Ae),d=G(Ae,"BUTTON",{class:!0});var Le=j(d);h=Me(Le,t[1]),Le.forEach(k),v=G(Ae,"BUTTON",{class:!0});var Ve=j(v);g=Me(Ve,b),Ve.forEach(k),_=G(Ae,"BUTTON",{class:!0});var lt=j(_);S=Me(lt,D),lt.forEach(k),Ae.forEach(k),De.forEach(k),y=Se(pe),F=G(pe,"DIV",{class:!0});var vt=j(F);A=G(vt,"LABEL",{for:!0,class:!0});var Ze=j(A);C=Me(Ze,"Page Size"),Ze.forEach(k),M=Se(vt),O=G(vt,"SELECT",{class:!0});var Ye=j(O);N=G(Ye,"OPTION",{});var Ct=j(N);q=Me(Ct,"10"),Ct.forEach(k),Z=G(Ye,"OPTION",{});var Je=j(Z);Q=Me(Je,"25"),Je.forEach(k),V=G(Ye,"OPTION",{});var ht=j(V);L=Me(ht,"50"),ht.forEach(k),z=G(Ye,"OPTION",{});var ft=j(z);U=Me(ft,"100"),ft.forEach(k),Ye.forEach(k),vt.forEach(k),pe.forEach(k),this.h()},h(){B(i,"class","btn"),ct(i,"btn-disabled",t[1]===1),B(o,"class","btn"),ct(o,"btn-disabled",t[1]===1),B(d,"class","btn"),ct(d,"btn-disabled",t[0]===0),B(v,"class","btn"),ct(v,"btn-disabled",t[0]===0||t[1]===t[0]),B(_,"class","btn"),ct(_,"btn-disabled",t[0]===0||t[1]===t[0]),B(n,"class","btn-group"),B(r,"class","flex justify-start"),B(A,"for","page-size"),B(A,"class","p-2 text-md min-w-xs"),N.__value=10,N.value=N.__value,Z.__value=25,Z.value=Z.__value,V.__value=50,V.value=V.__value,z.__value=100,z.value=z.__value,B(O,"class","select max-w-xs"),B(F,"class","flex"),B(e,"class","w-full flex justify-between p-4")},m(ae,pe){le(ae,e,pe),I(e,r),I(r,n),I(n,i),I(i,s),I(n,o),I(o,p),I(n,f),I(n,d),I(d,h),I(n,v),I(v,g),I(n,_),I(_,S),I(e,y),I(e,F),I(F,A),I(A,C),I(F,M),I(F,O),I(O,N),I(N,q),I(O,Z),I(Z,Q),I(O,V),I(V,L),I(O,z),I(z,U),J||(ie=[ge(i,"click",t[5]),ge(o,"click",t[6]),ge(d,"click",t[7]),ge(v,"click",t[8]),ge(_,"click",t[9]),ge(O,"change",t[10])],J=!0)},p(ae,[pe]){pe&2&&ct(i,"btn-disabled",ae[1]===1),pe&2&&ct(o,"btn-disabled",ae[1]===1),pe&2&&Br(h,ae[1]),pe&1&&ct(d,"btn-disabled",ae[0]===0),pe&3&&ct(v,"btn-disabled",ae[0]===0||ae[1]===ae[0]),pe&3&&ct(_,"btn-disabled",ae[0]===0||ae[1]===ae[0])},i:Pe,o:Pe,d(ae){ae&&k(e),J=!1,$t(ie)}}}function L5(t,e,r){let{total:n}=e,{current:i}=e,{size:a}=e,{onChange:s}=e,{onResize:o}=e;const l=()=>s(1),p=()=>s(i-1),f=()=>s(i),d=()=>s(i+1),h=()=>s(n),v=b=>o(b.target.value);return t.$$set=b=>{"total"in b&&r(0,n=b.total),"current"in b&&r(1,i=b.current),"size"in b&&r(4,a=b.size),"onChange"in b&&r(2,s=b.onChange),"onResize"in b&&r(3,o=b.onResize)},[n,i,s,o,a,l,p,f,d,h,v]}class j1 extends ut{constructor(e){super(),st(this,e,L5,R5,ot,{total:0,current:1,size:4,onChange:2,onResize:3})}}function zd(t,e,r){const n=t.slice();return n[7]=e[r],n[9]=r,n}function qd(t,e){let r,n,i=e[7].date.toDateString()+"",a,s,o,l,p=e[7].prompt+"",f,d,h,v;function b(){return e[6](e[7])}return{key:t,first:null,c(){r=H("tr"),n=H("td"),a=Oe(i),s=Fe(),o=H("td"),l=H("span"),f=Oe(p),d=Fe(),this.h()},l(g){r=G(g,"TR",{});var _=j(r);n=G(_,"TD",{style:!0,class:!0});var D=j(n);a=Me(D,i),D.forEach(k),s=Se(_),o=G(_,"TD",{style:!0,class:!0});var S=j(o);l=G(S,"SPAN",{});var y=j(l);f=Me(y,p),y.forEach(k),S.forEach(k),d=Se(_),_.forEach(k),this.h()},h(){Tt(n,"max-width","10rem"),Tt(n,"width","20rem"),B(n,"class","whitespace-nowrap"),Tt(o,"max-width","20px"),B(o,"class","cursor-copy text-ellipsis whitespace-nowrap overflow-hidden select-none hover:text-white"),this.first=r},m(g,_){le(g,r,_),I(r,n),I(n,a),I(r,s),I(r,o),I(o,l),I(l,f),I(r,d),h||(v=ge(o,"click",b),h=!0)},p(g,_){e=g,_&8&&i!==(i=e[7].date.toDateString()+"")&&Br(a,i),_&8&&p!==(p=e[7].prompt+"")&&Br(f,p)},d(g){g&&k(r),h=!1,v()}}}function U5(t){let e,r,n,i,a,s,o,l,p,f,d,h,v,b=[],g=new Map,_;e=new j1({props:{total:Math.ceil(t[2].length/t[1]),current:t[0],size:t[1],onChange:t[4],onResize:t[5]}});let D=t[3];const S=y=>y[9];for(let y=0;y<D.length;y+=1){let F=zd(t,D,y),A=S(F);g.set(A,b[y]=qd(A,F))}return{c(){ze(e.$$.fragment),r=Fe(),n=H("div"),i=H("table"),a=H("thead"),s=H("tr"),o=H("th"),l=Oe("Date"),p=Fe(),f=H("th"),d=Oe("Prompt"),h=Fe(),v=H("tbody");for(let y=0;y<b.length;y+=1)b[y].c();this.h()},l(y){qe(e.$$.fragment,y),r=Se(y),n=G(y,"DIV",{class:!0});var F=j(n);i=G(F,"TABLE",{class:!0});var A=j(i);a=G(A,"THEAD",{});var C=j(a);s=G(C,"TR",{});var M=j(s);o=G(M,"TH",{});var O=j(o);l=Me(O,"Date"),O.forEach(k),p=Se(M),f=G(M,"TH",{});var N=j(f);d=Me(N,"Prompt"),N.forEach(k),M.forEach(k),C.forEach(k),h=Se(A),v=G(A,"TBODY",{});var q=j(v);for(let Z=0;Z<b.length;Z+=1)b[Z].l(q);q.forEach(k),A.forEach(k),F.forEach(k),this.h()},h(){B(i,"class","table w-full"),B(n,"class","w-full px-4 overflow-y-auto")},m(y,F){We(e,y,F),le(y,r,F),le(y,n,F),I(n,i),I(i,a),I(a,s),I(s,o),I(o,l),I(s,p),I(s,f),I(f,d),I(i,h),I(i,v);for(let A=0;A<b.length;A+=1)b[A]&&b[A].m(v,null);_=!0},p(y,[F]){const A={};F&6&&(A.total=Math.ceil(y[2].length/y[1])),F&1&&(A.current=y[0]),F&2&&(A.size=y[1]),e.$set(A),F&8&&(D=y[3],b=Bn(b,F,S,1,y,D,g,v,Yn,qd,null,zd))},i(y){_||(me(e.$$.fragment,y),_=!0)},o(y){we(e.$$.fragment,y),_=!1},d(y){He(e,y),y&&k(r),y&&k(n);for(let F=0;F<b.length;F+=1)b[F].d()}}}function V5(t){navigator.clipboard.writeText(t)}function j5(t,e,r){let n;Ke(t,Jf,f=>r(2,n=f));let i=1,a=10,s=[];function o(f){r(0,i=f)}function l(f){r(0,i=1),r(1,a=f)}const p=f=>V5(f.prompt);return t.$$.update=()=>{t.$$.dirty&7&&r(3,s=n.slice((i-1)*a,i*a))},[i,a,n,s,o,l,p]}class z5 extends ut{constructor(e){super(),st(this,e,j5,U5,ot,{})}}function q5(t){let e,r,n,i,a;return{c(){e=H("div"),r=H("button"),n=Oe("Paste"),this.h()},l(s){e=G(s,"DIV",{class:!0});var o=j(e);r=G(o,"BUTTON",{class:!0});var l=j(r);n=Me(l,"Paste"),l.forEach(k),o.forEach(k),this.h()},h(){B(r,"class","btn btn-sm btn-info ml-2"),B(e,"class","flex justify-center p-2")},m(s,o){le(s,e,o),I(e,r),I(r,n),i||(a=ge(r,"click",t[0]),i=!0)},p:Pe,i:Pe,o:Pe,d(s){s&&k(e),i=!1,a()}}}function W5(t,e,r){let n;Ke(t,Hr,a=>r(1,n=a));function i(){console.log("pasted"),navigator.clipboard.readText().then(a=>{const s=du(a).map(l=>l[0]),o=n;s.forEach(l=>{o[l]||Hr.update(l,null)})})}return[i]}class H5 extends ut{constructor(e){super(),st(this,e,W5,q5,ot,{})}}function G5(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var z1=G5,K5=typeof vr=="object"&&vr&&vr.Object===Object&&vr,$5=K5,Y5=$5,Z5=typeof self=="object"&&self&&self.Object===Object&&self,J5=Y5||Z5||Function("return this")(),q1=J5,Q5=q1,X5=function(){return Q5.Date.now()},e8=X5,t8=/\s/;function r8(t){for(var e=t.length;e--&&t8.test(t.charAt(e)););return e}var n8=r8,i8=n8,a8=/^\s+/;function u8(t){return t&&t.slice(0,i8(t)+1).replace(a8,"")}var s8=u8,o8=q1,l8=o8.Symbol,W1=l8,Wd=W1,H1=Object.prototype,f8=H1.hasOwnProperty,c8=H1.toString,au=Wd?Wd.toStringTag:void 0;function h8(t){var e=f8.call(t,au),r=t[au];try{t[au]=void 0;var n=!0}catch{}var i=c8.call(t);return n&&(e?t[au]=r:delete t[au]),i}var d8=h8,p8=Object.prototype,v8=p8.toString;function g8(t){return v8.call(t)}var m8=g8,Hd=W1,_8=d8,b8=m8,D8="[object Null]",w8="[object Undefined]",Gd=Hd?Hd.toStringTag:void 0;function y8(t){return t==null?t===void 0?w8:D8:Gd&&Gd in Object(t)?_8(t):b8(t)}var E8=y8;function A8(t){return t!=null&&typeof t=="object"}var C8=A8,F8=E8,S8=C8,B8="[object Symbol]";function O8(t){return typeof t=="symbol"||S8(t)&&F8(t)==B8}var M8=O8,P8=s8,Kd=z1,k8=M8,$d=0/0,T8=/^[-+]0x[0-9a-f]+$/i,I8=/^0b[01]+$/i,N8=/^0o[0-7]+$/i,x8=parseInt;function R8(t){if(typeof t=="number")return t;if(k8(t))return $d;if(Kd(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Kd(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=P8(t);var r=I8.test(t);return r||N8.test(t)?x8(t.slice(2),r?2:8):T8.test(t)?$d:+t}var L8=R8,U8=z1,tf=e8,Yd=L8,V8="Expected a function",j8=Math.max,z8=Math.min;function q8(t,e,r){var n,i,a,s,o,l,p=0,f=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(V8);e=Yd(e)||0,U8(r)&&(f=!!r.leading,d="maxWait"in r,a=d?j8(Yd(r.maxWait)||0,e):a,h="trailing"in r?!!r.trailing:h);function v(C){var M=n,O=i;return n=i=void 0,p=C,s=t.apply(O,M),s}function b(C){return p=C,o=setTimeout(D,e),f?v(C):s}function g(C){var M=C-l,O=C-p,N=e-M;return d?z8(N,a-O):N}function _(C){var M=C-l,O=C-p;return l===void 0||M>=e||M<0||d&&O>=a}function D(){var C=tf();if(_(C))return S(C);o=setTimeout(D,g(C))}function S(C){return o=void 0,h&&n?v(C):(n=i=void 0,s)}function y(){o!==void 0&&clearTimeout(o),p=0,n=l=i=o=void 0}function F(){return o===void 0?s:S(tf())}function A(){var C=tf(),M=_(C);if(n=arguments,i=this,l=C,M){if(o===void 0)return b(l);if(d)return clearTimeout(o),o=setTimeout(D,e),v(l)}return o===void 0&&(o=setTimeout(D,e)),s}return A.cancel=y,A.flush=F,A}var pu=q8;function Zd(t,e,r){const n=t.slice();return n[13]=e[r],n[15]=r,n}function Jd(t,e){let r,n,i,a,s,o,l,p,f,d,h,v,b,g,_,D,S;function y(){return e[11](e[13])}function F(){return e[12](e[13])}return{key:t,first:null,c(){r=H("tr"),n=H("td"),i=H("input"),s=Fe(),o=H("td"),l=H("button"),p=dt("svg"),f=dt("path"),d=Fe(),h=H("td"),v=H("button"),b=dt("svg"),g=dt("path"),_=Fe(),this.h()},l(A){r=G(A,"TR",{});var C=j(r);n=G(C,"TD",{style:!0,class:!0});var M=j(n);i=G(M,"INPUT",{type:!0,placeholder:!0,class:!0}),M.forEach(k),s=Se(C),o=G(C,"TD",{style:!0});var O=j(o);l=G(O,"BUTTON",{class:!0});var N=j(l);p=pt(N,"svg",{class:!0,xmlns:!0,viewBox:!0});var q=j(p);f=pt(q,"path",{fill:!0,d:!0}),j(f).forEach(k),q.forEach(k),N.forEach(k),O.forEach(k),d=Se(C),h=G(C,"TD",{style:!0,class:!0});var Z=j(h);v=G(Z,"BUTTON",{class:!0});var Q=j(v);b=pt(Q,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var V=j(b);g=pt(V,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),j(g).forEach(k),V.forEach(k),Q.forEach(k),Z.forEach(k),_=Se(C),C.forEach(k),this.h()},h(){i.value=a=e[13],B(i,"type","text"),B(i,"placeholder",""),B(i,"class","input input-bordered input-sm w-full"),Tt(n,"max-width","20px"),B(n,"class","text-ellipsis whitespace-nowrap overflow-hidden select-none hover:text-white"),B(f,"fill","currentColor"),B(f,"d","M272 0H396.1c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9V336c0 26.5-21.5 48-48 48H272c-26.5 0-48-21.5-48-48V48c0-26.5 21.5-48 48-48zM48 128H192v64H64V448H256V416h64v48c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V176c0-26.5 21.5-48 48-48z"),B(p,"class","h-5 w-5"),B(p,"xmlns","http://www.w3.org/2000/svg"),B(p,"viewBox","0 0 512 512"),B(l,"class","btn btn-sm btn-circle btn-outline"),Tt(o,"max-width","4rem"),Tt(o,"width","4rem"),B(g,"stroke-linecap","round"),B(g,"stroke-linejoin","round"),B(g,"stroke-width","2"),B(g,"d","M6 18L18 6M6 6l12 12"),B(b,"xmlns","http://www.w3.org/2000/svg"),B(b,"class","h-6 w-6"),B(b,"fill","none"),B(b,"viewBox","0 0 24 24"),B(b,"stroke","red"),B(v,"class","btn btn-sm btn-circle btn-outline"),Tt(h,"max-width","4rem"),Tt(h,"width","4rem"),B(h,"class",""),this.first=r},m(A,C){le(A,r,C),I(r,n),I(n,i),I(r,s),I(r,o),I(o,l),I(l,p),I(p,f),I(r,d),I(r,h),I(h,v),I(v,b),I(b,g),I(r,_),D||(S=[ge(n,"change",e[10]),ge(l,"click",y),ge(h,"click",F)],D=!0)},p(A,C){e=A,C&4&&a!==(a=e[13])&&i.value!==a&&(i.value=a)},d(A){A&&k(r),D=!1,$t(S)}}}function W8(t){let e,r,n,i,a,s,o,l,p,f,d,h,v,b,g=[],_=new Map,D,S,y;e=new j1({props:{total:t[3],current:t[0],size:t[1],onChange:t[5],onResize:t[6]}});let F=t[2];const A=C=>C[15];for(let C=0;C<F.length;C+=1){let M=Zd(t,F,C),O=A(M);_.set(O,g[C]=Jd(O,M))}return{c(){ze(e.$$.fragment),r=Fe(),n=H("div"),i=H("table"),a=H("thead"),s=H("tr"),o=H("th"),l=Oe("Concept"),p=Fe(),f=H("th"),d=Fe(),h=H("th"),v=Fe(),b=H("tbody");for(let C=0;C<g.length;C+=1)g[C].c();this.h()},l(C){qe(e.$$.fragment,C),r=Se(C),n=G(C,"DIV",{class:!0});var M=j(n);i=G(M,"TABLE",{class:!0});var O=j(i);a=G(O,"THEAD",{});var N=j(a);s=G(N,"TR",{});var q=j(s);o=G(q,"TH",{});var Z=j(o);l=Me(Z,"Concept"),Z.forEach(k),p=Se(q),f=G(q,"TH",{}),j(f).forEach(k),d=Se(q),h=G(q,"TH",{}),j(h).forEach(k),q.forEach(k),N.forEach(k),v=Se(O),b=G(O,"TBODY",{});var Q=j(b);for(let V=0;V<g.length;V+=1)g[V].l(Q);Q.forEach(k),O.forEach(k),M.forEach(k),this.h()},h(){B(i,"class","table w-full"),B(n,"class","w-full px-4 overflow-y-auto")},m(C,M){We(e,C,M),le(C,r,M),le(C,n,M),I(n,i),I(i,a),I(a,s),I(s,o),I(o,l),I(s,p),I(s,f),I(s,d),I(s,h),I(i,v),I(i,b);for(let O=0;O<g.length;O+=1)g[O]&&g[O].m(b,null);D=!0,S||(y=ge(n,"paste",t[4]),S=!0)},p(C,[M]){const O={};M&8&&(O.total=C[3]),M&1&&(O.current=C[0]),M&2&&(O.size=C[1]),e.$set(O),M&132&&(F=C[2],g=Bn(g,M,A,1,C,F,_,b,Yn,Jd,null,Zd))},i(C){D||(me(e.$$.fragment,C),D=!0)},o(C){we(e.$$.fragment,C),D=!1},d(C){He(e,C),C&&k(r),C&&k(n);for(let M=0;M<g.length;M+=1)g[M].d();S=!1,y()}}}function H8(t){navigator.clipboard.writeText(t)}function G8(t,e,r){let n,i,a,s;Ke(t,Hr,_=>r(9,s=_));let o=1,l=10;function p(){console.log("pasted"),navigator.clipboard.readText().then(_=>{const D=du(_).map(y=>y[0]),S=s;D.forEach(y=>{S[y]||Hr.update(y,null)})})}function f(_){r(0,o=_)}function d(_){r(0,o=1),r(1,l=_)}const h=pu(_=>{Hr.update(_,null)},500),v=_=>h(_.target.value),b=_=>H8(_),g=_=>Hr.remove(_);return t.$$.update=()=>{t.$$.dirty&512&&r(8,n=Object.keys(s)),t.$$.dirty&258&&r(3,i=Math.ceil(n.length/l)),t.$$.dirty&259&&r(2,a=Array.from(n).sort().slice((o-1)*l,o*l))},[o,l,a,i,p,f,d,h,n,s,v,b,g]}class K8 extends ut{constructor(e){super(),st(this,e,G8,W8,ot,{})}}async function $8(t){const e=js(Yi.get());return(await FS(e,t,Cf.get()||"text-embedding-ada-002")).data.data[0].embedding}function Y8(t){let e,r,n,i;return{c(){e=H("div"),r=H("div"),n=H("p"),i=Oe("Some features require OpenAI Key"),this.h()},l(a){e=G(a,"DIV",{class:!0});var s=j(e);r=G(s,"DIV",{class:!0});var o=j(r);n=G(o,"P",{class:!0});var l=j(n);i=Me(l,"Some features require OpenAI Key"),l.forEach(k),o.forEach(k),s.forEach(k),this.h()},h(){B(n,"class","text-xs"),B(r,"class","flex flex-col justify-start mr-5"),B(e,"class","w-full flex justify-center p-4")},m(a,s){le(a,e,s),I(e,r),I(r,n),I(n,i)},d(a){a&&k(e)}}}function Z8(t){let e,r,n,i,a,s,o;return{c(){e=H("div"),r=H("div"),n=H("progress"),i=Fe(),a=H("div"),s=H("p"),o=Oe("Embedding..."),this.h()},l(l){e=G(l,"DIV",{class:!0});var p=j(e);r=G(p,"DIV",{class:!0});var f=j(r);n=G(f,"PROGRESS",{class:!0}),j(n).forEach(k),f.forEach(k),i=Se(p),a=G(p,"DIV",{class:!0});var d=j(a);s=G(d,"P",{class:!0});var h=j(s);o=Me(h,"Embedding..."),h.forEach(k),d.forEach(k),p.forEach(k),this.h()},h(){B(n,"class","progress progress-primary w-20"),B(r,"class","flex flex-col justify-start mr-5"),B(s,"class","text-xs"),B(a,"class","flex flex-col justify-start mr-5"),B(e,"class","w-full flex justify-center p-4")},m(l,p){le(l,e,p),I(e,r),I(r,n),I(e,i),I(e,a),I(a,s),I(s,o)},d(l){l&&k(e)}}}function J8(t){let e,r;function n(s,o){if(o&1&&(e=null),e==null&&(e=Object.keys(s[0]).length>0),e)return Z8;if(!s[1])return Y8}let i=n(t,-1),a=i&&i(t);return{c(){a&&a.c(),r=Pt()},l(s){a&&a.l(s),r=Pt()},m(s,o){a&&a.m(s,o),le(s,r,o)},p(s,[o]){i!==(i=n(s,o))&&(a&&a.d(1),a=i&&i(s),a&&(a.c(),a.m(r.parentNode,r)))},i:Pe,o:Pe,d(s){a&&a.d(s),s&&k(r)}}}function Q8(t,e,r){let n,i,a;Ke(t,Yi,p=>r(1,i=p)),Ke(t,Hr,p=>r(4,a=p));let s={},o=!1;function l(){console.log("start embedding");const p=Object.keys(s)[0];r(0,s[p]=!0,s),console.log("embedding",p),$8(p).then(f=>{console.log("embedded",p),Hr.update(p,f);const d={...s};delete d[p],r(0,s=d),Object.keys(s).length>0?l():r(2,o=!1)})}return t.$$.update=()=>{t.$$.dirty&16&&r(3,n=Object.entries(a).filter(([p,f])=>!f)),t.$$.dirty&10&&i&&n.length>0&&n.forEach(([p,f])=>{r(0,s[p]=!1,s)}),t.$$.dirty&7&&i&&!o&&Object.keys(s).length>0&&(r(2,o=!0),l())},[s,i,o,n,a]}class X8 extends ut{constructor(e){super(),st(this,e,Q8,J8,ot,{})}}function e4(t){let e,r,n,i,a;return{c(){e=H("div"),r=H("button"),n=Oe("Delete History"),this.h()},l(s){e=G(s,"DIV",{class:!0});var o=j(e);r=G(o,"BUTTON",{class:!0});var l=j(r);n=Me(l,"Delete History"),l.forEach(k),o.forEach(k),this.h()},h(){B(r,"class","btn btn-sm btn-error"),B(e,"class","flex justify-end p-2")},m(s,o){le(s,e,o),I(e,r),I(r,n),i||(a=ge(r,"click",t[0]),i=!0)},p:Pe,i:Pe,o:Pe,d(s){s&&k(e),i=!1,a()}}}function t4(t){function e(){Jf.delete()}return[e]}class r4 extends ut{constructor(e){super(),st(this,e,t4,e4,ot,{})}}function n4(t){let e,r;return e=new r4({}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},p:Pe,i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function i4(t){let e,r;return e=new H5({}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},p:Pe,i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function a4(t){let e,r,n,i;r=new oy({});let a=(t[1].weightMode===wt.Circle||t[1].weightMode===wt.Pie||t[1].weightMode===wt.Ring)&&Qd();return{c(){e=H("div"),ze(r.$$.fragment),n=Fe(),a&&a.c()},l(s){e=G(s,"DIV",{});var o=j(e);qe(r.$$.fragment,o),n=Se(o),a&&a.l(o),o.forEach(k)},m(s,o){le(s,e,o),We(r,e,null),I(e,n),a&&a.m(e,null),i=!0},p(s,o){s[1].weightMode===wt.Circle||s[1].weightMode===wt.Pie||s[1].weightMode===wt.Ring?a?o&2&&me(a,1):(a=Qd(),a.c(),me(a,1),a.m(e,null)):a&&(cr(),we(a,1,1,()=>{a=null}),hr())},i(s){i||(me(r.$$.fragment,s),me(a),i=!0)},o(s){we(r.$$.fragment,s),we(a),i=!1},d(s){s&&k(e),He(r),a&&a.d()}}}function Qd(t){let e,r;return e=new my({}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function u4(t){let e,r,n;return r=new z5({}),{c(){e=H("div"),ze(r.$$.fragment),this.h()},l(i){e=G(i,"DIV",{class:!0});var a=j(e);qe(r.$$.fragment,a),a.forEach(k),this.h()},h(){B(e,"class","flex flex-col h-full mt-10 overflow-hidden")},m(i,a){le(i,e,a),We(r,e,null),n=!0},i(i){n||(me(r.$$.fragment,i),n=!0)},o(i){we(r.$$.fragment,i),n=!1},d(i){i&&k(e),He(r)}}}function s4(t){let e,r,n;return r=new K8({}),{c(){e=H("div"),ze(r.$$.fragment),this.h()},l(i){e=G(i,"DIV",{class:!0});var a=j(e);qe(r.$$.fragment,a),a.forEach(k),this.h()},h(){B(e,"class","flex flex-col h-full mt-10 overflow-hidden")},m(i,a){le(i,e,a),We(r,e,null),n=!0},i(i){n||(me(r.$$.fragment,i),n=!0)},o(i){we(r.$$.fragment,i),n=!1},d(i){i&&k(e),He(r)}}}function o4(t){let e,r,n;return r=new x5({}),{c(){e=H("div"),ze(r.$$.fragment),this.h()},l(i){e=G(i,"DIV",{class:!0});var a=j(e);qe(r.$$.fragment,a),a.forEach(k),this.h()},h(){B(e,"class","flex flex-col h-full place-content-between")},m(i,a){le(i,e,a),We(r,e,null),n=!0},i(i){n||(me(r.$$.fragment,i),n=!0)},o(i){we(r.$$.fragment,i),n=!1},d(i){i&&k(e),He(r)}}}function l4(t){let e,r,n,i,a,s,o,l,p,f,d,h,v;i=new Yw({}),s=new X8({});const b=[a4,i4,n4],g=[];function _(F,A){return F[0]===wr.Build?0:F[0]===wr.Concept?1:F[0]===wr.History?2:-1}~(l=_(t))&&(p=g[l]=b[l](t));const D=[o4,s4,u4],S=[];function y(F,A){return F[0]===wr.Build?0:F[0]===wr.Concept?1:F[0]===wr.History?2:-1}return~(d=y(t))&&(h=S[d]=D[d](t)),{c(){e=H("div"),r=H("div"),n=H("div"),ze(i.$$.fragment),a=Fe(),ze(s.$$.fragment),o=Fe(),p&&p.c(),f=Fe(),h&&h.c(),this.h()},l(F){e=G(F,"DIV",{class:!0});var A=j(e);r=G(A,"DIV",{class:!0});var C=j(r);n=G(C,"DIV",{class:!0});var M=j(n);qe(i.$$.fragment,M),a=Se(M),qe(s.$$.fragment,M),o=Se(M),p&&p.l(M),M.forEach(k),C.forEach(k),f=Se(A),h&&h.l(A),A.forEach(k),this.h()},h(){B(n,"class","w-full flex justify-between"),B(r,"class","w-full absolute top-0 z-10"),B(e,"class","relative w-full h-screen flex flex-col")},m(F,A){le(F,e,A),I(e,r),I(r,n),We(i,n,null),I(n,a),We(s,n,null),I(n,o),~l&&g[l].m(n,null),I(e,f),~d&&S[d].m(e,null),v=!0},p(F,[A]){let C=l;l=_(F),l===C?~l&&g[l].p(F,A):(p&&(cr(),we(g[C],1,1,()=>{g[C]=null}),hr()),~l?(p=g[l],p?p.p(F,A):(p=g[l]=b[l](F),p.c()),me(p,1),p.m(n,null)):p=null);let M=d;d=y(F),d!==M&&(h&&(cr(),we(S[M],1,1,()=>{S[M]=null}),hr()),~d?(h=S[d],h||(h=S[d]=D[d](F),h.c()),me(h,1),h.m(e,null)):h=null)},i(F){v||(me(i.$$.fragment,F),me(s.$$.fragment,F),me(p),me(h),v=!0)},o(F){we(i.$$.fragment,F),we(s.$$.fragment,F),we(p),we(h),v=!1},d(F){F&&k(e),He(i),He(s),~l&&g[l].d(),~d&&S[d].d()}}}function f4(t,e,r){let n,i;return Ke(t,sf,a=>r(0,n=a)),Ke(t,rt,a=>r(1,i=a)),[n,i]}class c4 extends ut{constructor(e){super(),st(this,e,f4,l4,ot,{})}}var Hs={},h4={get exports(){return Hs},set exports(t){Hs=t}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var r,n="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",p=500,f="__lodash_placeholder__",d=1,h=2,v=4,b=1,g=2,_=1,D=2,S=4,y=8,F=16,A=32,C=64,M=128,O=256,N=512,q=30,Z="...",Q=800,V=16,L=1,z=2,U=3,J=1/0,ie=9007199254740991,ae=17976931348623157e292,pe=0/0,De=4294967295,Ae=De-1,Be=De>>>1,je=[["ary",M],["bind",_],["bindKey",D],["curry",y],["curryRight",F],["flip",N],["partial",A],["partialRight",C],["rearg",O]],Le="[object Arguments]",Ve="[object Array]",lt="[object AsyncFunction]",vt="[object Boolean]",Ze="[object Date]",Ye="[object DOMException]",Ct="[object Error]",Je="[object Function]",ht="[object GeneratorFunction]",ft="[object Map]",gt="[object Number]",Qe="[object Null]",Xe="[object Object]",ke="[object Promise]",Ne="[object Proxy]",Mt="[object RegExp]",jt="[object Set]",Gt="[object String]",K="[object Symbol]",Y="[object Undefined]",ee="[object WeakMap]",fe="[object WeakSet]",ue="[object ArrayBuffer]",he="[object DataView]",se="[object Float32Array]",ce="[object Float64Array]",Ce="[object Int8Array]",Re="[object Int16Array]",nt="[object Int32Array]",Te="[object Uint8Array]",Wt="[object Uint8ClampedArray]",Lt="[object Uint16Array]",nr="[object Uint32Array]",Jt=/\b__p \+= '';/g,yr=/\b(__p \+=) '' \+/g,Qt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Er=/&(?:amp|lt|gt|quot|#39);/g,dr=/[&<>"']/g,pr=RegExp(Er.source),vn=RegExp(dr.source),mr=/<%-([\s\S]+?)%>/g,On=/<%([\s\S]+?)%>/g,Jn=/<%=([\s\S]+?)%>/g,Un=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vn=/^\w*$/,Xi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ii=/[\\^$.*+?()[\]{}|]/g,Ba=RegExp(Ii.source),Or=/^\s+/,ir=/\s/,Oa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,hi=/\{\n\/\* \[wrapped with (.+)\] \*/,gn=/,? & /,Qn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ni=/[()=,{}\[\]\/\s]/,Ma=/\\(\\)?/g,Pa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ea=/\w*$/,ka=/^[-+]0x[0-9a-f]+$/i,Ta=/^0b[01]+$/i,Ia=/^\[object .+?Constructor\]$/,Na=/^0o[0-7]+$/i,xa=/^(?:0|[1-9]\d*)$/,Ra=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,di=/($^)/,La=/['\n\r\u2028\u2029\\]/g,pi="\\ud800-\\udfff",Ua="\\u0300-\\u036f",Va="\\ufe20-\\ufe2f",ja="\\u20d0-\\u20ff",ta=Ua+Va+ja,jn="\\u2700-\\u27bf",Ar="a-z\\xdf-\\xf6\\xf8-\\xff",sr="\\xac\\xb1\\xd7\\xf7",Kr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xi="\\u2000-\\u206f",Xn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zn="A-Z\\xc0-\\xd6\\xd8-\\xde",Ri="\\ufe0e\\ufe0f",Mn=sr+Kr+xi+Xn,mn="[']",go="["+pi+"]",za="["+Mn+"]",ra="["+ta+"]",Du="\\d+",w="["+jn+"]",P="["+Ar+"]",W="[^"+pi+Mn+Du+jn+Ar+zn+"]",te="\\ud83c[\\udffb-\\udfff]",ve="(?:"+ra+"|"+te+")",Ie="[^"+pi+"]",Dt="(?:\\ud83c[\\udde6-\\uddff]){2}",Bt="[\\ud800-\\udbff][\\udc00-\\udfff]",Yt="["+zn+"]",or="\\u200d",Qf="(?:"+P+"|"+W+")",K1="(?:"+Yt+"|"+W+")",Xf="(?:"+mn+"(?:d|ll|m|re|s|t|ve))?",ec="(?:"+mn+"(?:D|LL|M|RE|S|T|VE))?",tc=ve+"?",rc="["+Ri+"]?",$1="(?:"+or+"(?:"+[Ie,Dt,Bt].join("|")+")"+rc+tc+")*",Y1="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Z1="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",nc=rc+tc+$1,J1="(?:"+[w,Dt,Bt].join("|")+")"+nc,Q1="(?:"+[Ie+ra+"?",ra,Dt,Bt,go].join("|")+")",X1=RegExp(mn,"g"),ev=RegExp(ra,"g"),mo=RegExp(te+"(?="+te+")|"+Q1+nc,"g"),tv=RegExp([Yt+"?"+P+"+"+Xf+"(?="+[za,Yt,"$"].join("|")+")",K1+"+"+ec+"(?="+[za,Yt+Qf,"$"].join("|")+")",Yt+"?"+Qf+"+"+Xf,Yt+"+"+ec,Z1,Y1,Du,J1].join("|"),"g"),rv=RegExp("["+or+pi+ta+Ri+"]"),nv=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,iv=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],av=-1,Kt={};Kt[se]=Kt[ce]=Kt[Ce]=Kt[Re]=Kt[nt]=Kt[Te]=Kt[Wt]=Kt[Lt]=Kt[nr]=!0,Kt[Le]=Kt[Ve]=Kt[ue]=Kt[vt]=Kt[he]=Kt[Ze]=Kt[Ct]=Kt[Je]=Kt[ft]=Kt[gt]=Kt[Xe]=Kt[Mt]=Kt[jt]=Kt[Gt]=Kt[ee]=!1;var Ht={};Ht[Le]=Ht[Ve]=Ht[ue]=Ht[he]=Ht[vt]=Ht[Ze]=Ht[se]=Ht[ce]=Ht[Ce]=Ht[Re]=Ht[nt]=Ht[ft]=Ht[gt]=Ht[Xe]=Ht[Mt]=Ht[jt]=Ht[Gt]=Ht[K]=Ht[Te]=Ht[Wt]=Ht[Lt]=Ht[nr]=!0,Ht[Ct]=Ht[Je]=Ht[ee]=!1;var uv={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},sv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ov={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},lv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},fv=parseFloat,cv=parseInt,ic=typeof vr=="object"&&vr&&vr.Object===Object&&vr,hv=typeof self=="object"&&self&&self.Object===Object&&self,Mr=ic||hv||Function("return this")(),_o=e&&!e.nodeType&&e,Li=_o&&!0&&t&&!t.nodeType&&t,ac=Li&&Li.exports===_o,bo=ac&&ic.process,_n=function(){try{var re=Li&&Li.require&&Li.require("util").types;return re||bo&&bo.binding&&bo.binding("util")}catch{}}(),uc=_n&&_n.isArrayBuffer,sc=_n&&_n.isDate,oc=_n&&_n.isMap,lc=_n&&_n.isRegExp,fc=_n&&_n.isSet,cc=_n&&_n.isTypedArray;function on(re,de,oe){switch(oe.length){case 0:return re.call(de);case 1:return re.call(de,oe[0]);case 2:return re.call(de,oe[0],oe[1]);case 3:return re.call(de,oe[0],oe[1],oe[2])}return re.apply(de,oe)}function dv(re,de,oe,Ue){for(var _t=-1,Nt=re==null?0:re.length;++_t<Nt;){var _r=re[_t];de(Ue,_r,oe(_r),re)}return Ue}function bn(re,de){for(var oe=-1,Ue=re==null?0:re.length;++oe<Ue&&de(re[oe],oe,re)!==!1;);return re}function pv(re,de){for(var oe=re==null?0:re.length;oe--&&de(re[oe],oe,re)!==!1;);return re}function hc(re,de){for(var oe=-1,Ue=re==null?0:re.length;++oe<Ue;)if(!de(re[oe],oe,re))return!1;return!0}function vi(re,de){for(var oe=-1,Ue=re==null?0:re.length,_t=0,Nt=[];++oe<Ue;){var _r=re[oe];de(_r,oe,re)&&(Nt[_t++]=_r)}return Nt}function wu(re,de){var oe=re==null?0:re.length;return!!oe&&na(re,de,0)>-1}function Do(re,de,oe){for(var Ue=-1,_t=re==null?0:re.length;++Ue<_t;)if(oe(de,re[Ue]))return!0;return!1}function Zt(re,de){for(var oe=-1,Ue=re==null?0:re.length,_t=Array(Ue);++oe<Ue;)_t[oe]=de(re[oe],oe,re);return _t}function gi(re,de){for(var oe=-1,Ue=de.length,_t=re.length;++oe<Ue;)re[_t+oe]=de[oe];return re}function wo(re,de,oe,Ue){var _t=-1,Nt=re==null?0:re.length;for(Ue&&Nt&&(oe=re[++_t]);++_t<Nt;)oe=de(oe,re[_t],_t,re);return oe}function vv(re,de,oe,Ue){var _t=re==null?0:re.length;for(Ue&&_t&&(oe=re[--_t]);_t--;)oe=de(oe,re[_t],_t,re);return oe}function yo(re,de){for(var oe=-1,Ue=re==null?0:re.length;++oe<Ue;)if(de(re[oe],oe,re))return!0;return!1}var gv=Eo("length");function mv(re){return re.split("")}function _v(re){return re.match(Qn)||[]}function dc(re,de,oe){var Ue;return oe(re,function(_t,Nt,_r){if(de(_t,Nt,_r))return Ue=Nt,!1}),Ue}function yu(re,de,oe,Ue){for(var _t=re.length,Nt=oe+(Ue?1:-1);Ue?Nt--:++Nt<_t;)if(de(re[Nt],Nt,re))return Nt;return-1}function na(re,de,oe){return de===de?Mv(re,de,oe):yu(re,pc,oe)}function bv(re,de,oe,Ue){for(var _t=oe-1,Nt=re.length;++_t<Nt;)if(Ue(re[_t],de))return _t;return-1}function pc(re){return re!==re}function vc(re,de){var oe=re==null?0:re.length;return oe?Co(re,de)/oe:pe}function Eo(re){return function(de){return de==null?r:de[re]}}function Ao(re){return function(de){return re==null?r:re[de]}}function gc(re,de,oe,Ue,_t){return _t(re,function(Nt,_r,zt){oe=Ue?(Ue=!1,Nt):de(oe,Nt,_r,zt)}),oe}function Dv(re,de){var oe=re.length;for(re.sort(de);oe--;)re[oe]=re[oe].value;return re}function Co(re,de){for(var oe,Ue=-1,_t=re.length;++Ue<_t;){var Nt=de(re[Ue]);Nt!==r&&(oe=oe===r?Nt:oe+Nt)}return oe}function Fo(re,de){for(var oe=-1,Ue=Array(re);++oe<re;)Ue[oe]=de(oe);return Ue}function wv(re,de){return Zt(de,function(oe){return[oe,re[oe]]})}function mc(re){return re&&re.slice(0,wc(re)+1).replace(Or,"")}function ln(re){return function(de){return re(de)}}function So(re,de){return Zt(de,function(oe){return re[oe]})}function qa(re,de){return re.has(de)}function _c(re,de){for(var oe=-1,Ue=re.length;++oe<Ue&&na(de,re[oe],0)>-1;);return oe}function bc(re,de){for(var oe=re.length;oe--&&na(de,re[oe],0)>-1;);return oe}function yv(re,de){for(var oe=re.length,Ue=0;oe--;)re[oe]===de&&++Ue;return Ue}var Ev=Ao(uv),Av=Ao(sv);function Cv(re){return"\\"+lv[re]}function Fv(re,de){return re==null?r:re[de]}function ia(re){return rv.test(re)}function Sv(re){return nv.test(re)}function Bv(re){for(var de,oe=[];!(de=re.next()).done;)oe.push(de.value);return oe}function Bo(re){var de=-1,oe=Array(re.size);return re.forEach(function(Ue,_t){oe[++de]=[_t,Ue]}),oe}function Dc(re,de){return function(oe){return re(de(oe))}}function mi(re,de){for(var oe=-1,Ue=re.length,_t=0,Nt=[];++oe<Ue;){var _r=re[oe];(_r===de||_r===f)&&(re[oe]=f,Nt[_t++]=oe)}return Nt}function Eu(re){var de=-1,oe=Array(re.size);return re.forEach(function(Ue){oe[++de]=Ue}),oe}function Ov(re){var de=-1,oe=Array(re.size);return re.forEach(function(Ue){oe[++de]=[Ue,Ue]}),oe}function Mv(re,de,oe){for(var Ue=oe-1,_t=re.length;++Ue<_t;)if(re[Ue]===de)return Ue;return-1}function Pv(re,de,oe){for(var Ue=oe+1;Ue--;)if(re[Ue]===de)return Ue;return Ue}function aa(re){return ia(re)?Tv(re):gv(re)}function Pn(re){return ia(re)?Iv(re):mv(re)}function wc(re){for(var de=re.length;de--&&ir.test(re.charAt(de)););return de}var kv=Ao(ov);function Tv(re){for(var de=mo.lastIndex=0;mo.test(re);)++de;return de}function Iv(re){return re.match(mo)||[]}function Nv(re){return re.match(tv)||[]}var xv=function re(de){de=de==null?Mr:ua.defaults(Mr.Object(),de,ua.pick(Mr,iv));var oe=de.Array,Ue=de.Date,_t=de.Error,Nt=de.Function,_r=de.Math,zt=de.Object,Oo=de.RegExp,Rv=de.String,Dn=de.TypeError,Au=oe.prototype,Lv=Nt.prototype,sa=zt.prototype,Cu=de["__core-js_shared__"],Fu=Lv.toString,Ut=sa.hasOwnProperty,Uv=0,yc=function(){var u=/[^.]+$/.exec(Cu&&Cu.keys&&Cu.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),Su=sa.toString,Vv=Fu.call(zt),jv=Mr._,zv=Oo("^"+Fu.call(Ut).replace(Ii,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bu=ac?de.Buffer:r,_i=de.Symbol,Ou=de.Uint8Array,Ec=Bu?Bu.allocUnsafe:r,Mu=Dc(zt.getPrototypeOf,zt),Ac=zt.create,Cc=sa.propertyIsEnumerable,Pu=Au.splice,Fc=_i?_i.isConcatSpreadable:r,Wa=_i?_i.iterator:r,Ui=_i?_i.toStringTag:r,ku=function(){try{var u=Wi(zt,"defineProperty");return u({},"",{}),u}catch{}}(),qv=de.clearTimeout!==Mr.clearTimeout&&de.clearTimeout,Wv=Ue&&Ue.now!==Mr.Date.now&&Ue.now,Hv=de.setTimeout!==Mr.setTimeout&&de.setTimeout,Tu=_r.ceil,Iu=_r.floor,Mo=zt.getOwnPropertySymbols,Gv=Bu?Bu.isBuffer:r,Sc=de.isFinite,Kv=Au.join,$v=Dc(zt.keys,zt),br=_r.max,jr=_r.min,Yv=Ue.now,Zv=de.parseInt,Bc=_r.random,Jv=Au.reverse,Po=Wi(de,"DataView"),Ha=Wi(de,"Map"),ko=Wi(de,"Promise"),oa=Wi(de,"Set"),Ga=Wi(de,"WeakMap"),Ka=Wi(zt,"create"),Nu=Ga&&new Ga,la={},Qv=Hi(Po),Xv=Hi(Ha),eg=Hi(ko),tg=Hi(oa),rg=Hi(Ga),xu=_i?_i.prototype:r,$a=xu?xu.valueOf:r,Oc=xu?xu.toString:r;function x(u){if(ar(u)&&!bt(u)&&!(u instanceof St)){if(u instanceof wn)return u;if(Ut.call(u,"__wrapped__"))return Mh(u)}return new wn(u)}var fa=function(){function u(){}return function(c){if(!Xt(c))return{};if(Ac)return Ac(c);u.prototype=c;var m=new u;return u.prototype=r,m}}();function Ru(){}function wn(u,c){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=r}x.templateSettings={escape:mr,evaluate:On,interpolate:Jn,variable:"",imports:{_:x}},x.prototype=Ru.prototype,x.prototype.constructor=x,wn.prototype=fa(Ru.prototype),wn.prototype.constructor=wn;function St(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=De,this.__views__=[]}function ng(){var u=new St(this.__wrapped__);return u.__actions__=Qr(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Qr(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Qr(this.__views__),u}function ig(){if(this.__filtered__){var u=new St(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function ag(){var u=this.__wrapped__.value(),c=this.__dir__,m=bt(u),E=c<0,T=m?u.length:0,R=mm(0,T,this.__views__),$=R.start,X=R.end,ne=X-$,_e=E?X:$-1,be=this.__iteratees__,Ee=be.length,xe=0,Ge=jr(ne,this.__takeCount__);if(!m||!E&&T==ne&&Ge==ne)return Xc(u,this.__actions__);var it=[];e:for(;ne--&&xe<Ge;){_e+=c;for(var Et=-1,at=u[_e];++Et<Ee;){var Ft=be[Et],Ot=Ft.iteratee,hn=Ft.type,Zr=Ot(at);if(hn==z)at=Zr;else if(!Zr){if(hn==L)continue e;break e}}it[xe++]=at}return it}St.prototype=fa(Ru.prototype),St.prototype.constructor=St;function Vi(u){var c=-1,m=u==null?0:u.length;for(this.clear();++c<m;){var E=u[c];this.set(E[0],E[1])}}function ug(){this.__data__=Ka?Ka(null):{},this.size=0}function sg(u){var c=this.has(u)&&delete this.__data__[u];return this.size-=c?1:0,c}function og(u){var c=this.__data__;if(Ka){var m=c[u];return m===l?r:m}return Ut.call(c,u)?c[u]:r}function lg(u){var c=this.__data__;return Ka?c[u]!==r:Ut.call(c,u)}function fg(u,c){var m=this.__data__;return this.size+=this.has(u)?0:1,m[u]=Ka&&c===r?l:c,this}Vi.prototype.clear=ug,Vi.prototype.delete=sg,Vi.prototype.get=og,Vi.prototype.has=lg,Vi.prototype.set=fg;function ei(u){var c=-1,m=u==null?0:u.length;for(this.clear();++c<m;){var E=u[c];this.set(E[0],E[1])}}function cg(){this.__data__=[],this.size=0}function hg(u){var c=this.__data__,m=Lu(c,u);if(m<0)return!1;var E=c.length-1;return m==E?c.pop():Pu.call(c,m,1),--this.size,!0}function dg(u){var c=this.__data__,m=Lu(c,u);return m<0?r:c[m][1]}function pg(u){return Lu(this.__data__,u)>-1}function vg(u,c){var m=this.__data__,E=Lu(m,u);return E<0?(++this.size,m.push([u,c])):m[E][1]=c,this}ei.prototype.clear=cg,ei.prototype.delete=hg,ei.prototype.get=dg,ei.prototype.has=pg,ei.prototype.set=vg;function ti(u){var c=-1,m=u==null?0:u.length;for(this.clear();++c<m;){var E=u[c];this.set(E[0],E[1])}}function gg(){this.size=0,this.__data__={hash:new Vi,map:new(Ha||ei),string:new Vi}}function mg(u){var c=Zu(this,u).delete(u);return this.size-=c?1:0,c}function _g(u){return Zu(this,u).get(u)}function bg(u){return Zu(this,u).has(u)}function Dg(u,c){var m=Zu(this,u),E=m.size;return m.set(u,c),this.size+=m.size==E?0:1,this}ti.prototype.clear=gg,ti.prototype.delete=mg,ti.prototype.get=_g,ti.prototype.has=bg,ti.prototype.set=Dg;function ji(u){var c=-1,m=u==null?0:u.length;for(this.__data__=new ti;++c<m;)this.add(u[c])}function wg(u){return this.__data__.set(u,l),this}function yg(u){return this.__data__.has(u)}ji.prototype.add=ji.prototype.push=wg,ji.prototype.has=yg;function kn(u){var c=this.__data__=new ei(u);this.size=c.size}function Eg(){this.__data__=new ei,this.size=0}function Ag(u){var c=this.__data__,m=c.delete(u);return this.size=c.size,m}function Cg(u){return this.__data__.get(u)}function Fg(u){return this.__data__.has(u)}function Sg(u,c){var m=this.__data__;if(m instanceof ei){var E=m.__data__;if(!Ha||E.length<i-1)return E.push([u,c]),this.size=++m.size,this;m=this.__data__=new ti(E)}return m.set(u,c),this.size=m.size,this}kn.prototype.clear=Eg,kn.prototype.delete=Ag,kn.prototype.get=Cg,kn.prototype.has=Fg,kn.prototype.set=Sg;function Mc(u,c){var m=bt(u),E=!m&&Gi(u),T=!m&&!E&&Ei(u),R=!m&&!E&&!T&&pa(u),$=m||E||T||R,X=$?Fo(u.length,Rv):[],ne=X.length;for(var _e in u)(c||Ut.call(u,_e))&&!($&&(_e=="length"||T&&(_e=="offset"||_e=="parent")||R&&(_e=="buffer"||_e=="byteLength"||_e=="byteOffset")||ai(_e,ne)))&&X.push(_e);return X}function Pc(u){var c=u.length;return c?u[qo(0,c-1)]:r}function Bg(u,c){return Ju(Qr(u),zi(c,0,u.length))}function Og(u){return Ju(Qr(u))}function To(u,c,m){(m!==r&&!Tn(u[c],m)||m===r&&!(c in u))&&ri(u,c,m)}function Ya(u,c,m){var E=u[c];(!(Ut.call(u,c)&&Tn(E,m))||m===r&&!(c in u))&&ri(u,c,m)}function Lu(u,c){for(var m=u.length;m--;)if(Tn(u[m][0],c))return m;return-1}function Mg(u,c,m,E){return bi(u,function(T,R,$){c(E,T,m(T),$)}),E}function kc(u,c){return u&&Wn(c,Cr(c),u)}function Pg(u,c){return u&&Wn(c,en(c),u)}function ri(u,c,m){c=="__proto__"&&ku?ku(u,c,{configurable:!0,enumerable:!0,value:m,writable:!0}):u[c]=m}function Io(u,c){for(var m=-1,E=c.length,T=oe(E),R=u==null;++m<E;)T[m]=R?r:pl(u,c[m]);return T}function zi(u,c,m){return u===u&&(m!==r&&(u=u<=m?u:m),c!==r&&(u=u>=c?u:c)),u}function yn(u,c,m,E,T,R){var $,X=c&d,ne=c&h,_e=c&v;if(m&&($=T?m(u,E,T,R):m(u)),$!==r)return $;if(!Xt(u))return u;var be=bt(u);if(be){if($=bm(u),!X)return Qr(u,$)}else{var Ee=zr(u),xe=Ee==Je||Ee==ht;if(Ei(u))return rh(u,X);if(Ee==Xe||Ee==Le||xe&&!T){if($=ne||xe?{}:wh(u),!X)return ne?om(u,Pg($,u)):sm(u,kc($,u))}else{if(!Ht[Ee])return T?u:{};$=Dm(u,Ee,X)}}R||(R=new kn);var Ge=R.get(u);if(Ge)return Ge;R.set(u,$),Zh(u)?u.forEach(function(at){$.add(yn(at,c,m,at,u,R))}):$h(u)&&u.forEach(function(at,Ft){$.set(Ft,yn(at,c,m,Ft,u,R))});var it=_e?ne?el:Xo:ne?en:Cr,Et=be?r:it(u);return bn(Et||u,function(at,Ft){Et&&(Ft=at,at=u[Ft]),Ya($,Ft,yn(at,c,m,Ft,u,R))}),$}function kg(u){var c=Cr(u);return function(m){return Tc(m,u,c)}}function Tc(u,c,m){var E=m.length;if(u==null)return!E;for(u=zt(u);E--;){var T=m[E],R=c[T],$=u[T];if($===r&&!(T in u)||!R($))return!1}return!0}function Ic(u,c,m){if(typeof u!="function")throw new Dn(s);return ru(function(){u.apply(r,m)},c)}function Za(u,c,m,E){var T=-1,R=wu,$=!0,X=u.length,ne=[],_e=c.length;if(!X)return ne;m&&(c=Zt(c,ln(m))),E?(R=Do,$=!1):c.length>=i&&(R=qa,$=!1,c=new ji(c));e:for(;++T<X;){var be=u[T],Ee=m==null?be:m(be);if(be=E||be!==0?be:0,$&&Ee===Ee){for(var xe=_e;xe--;)if(c[xe]===Ee)continue e;ne.push(be)}else R(c,Ee,E)||ne.push(be)}return ne}var bi=sh(qn),Nc=sh(xo,!0);function Tg(u,c){var m=!0;return bi(u,function(E,T,R){return m=!!c(E,T,R),m}),m}function Uu(u,c,m){for(var E=-1,T=u.length;++E<T;){var R=u[E],$=c(R);if($!=null&&(X===r?$===$&&!cn($):m($,X)))var X=$,ne=R}return ne}function Ig(u,c,m,E){var T=u.length;for(m=yt(m),m<0&&(m=-m>T?0:T+m),E=E===r||E>T?T:yt(E),E<0&&(E+=T),E=m>E?0:Qh(E);m<E;)u[m++]=c;return u}function xc(u,c){var m=[];return bi(u,function(E,T,R){c(E,T,R)&&m.push(E)}),m}function Pr(u,c,m,E,T){var R=-1,$=u.length;for(m||(m=ym),T||(T=[]);++R<$;){var X=u[R];c>0&&m(X)?c>1?Pr(X,c-1,m,E,T):gi(T,X):E||(T[T.length]=X)}return T}var No=oh(),Rc=oh(!0);function qn(u,c){return u&&No(u,c,Cr)}function xo(u,c){return u&&Rc(u,c,Cr)}function Vu(u,c){return vi(c,function(m){return ui(u[m])})}function qi(u,c){c=wi(c,u);for(var m=0,E=c.length;u!=null&&m<E;)u=u[Hn(c[m++])];return m&&m==E?u:r}function Lc(u,c,m){var E=c(u);return bt(u)?E:gi(E,m(u))}function $r(u){return u==null?u===r?Y:Qe:Ui&&Ui in zt(u)?gm(u):Om(u)}function Ro(u,c){return u>c}function Ng(u,c){return u!=null&&Ut.call(u,c)}function xg(u,c){return u!=null&&c in zt(u)}function Rg(u,c,m){return u>=jr(c,m)&&u<br(c,m)}function Lo(u,c,m){for(var E=m?Do:wu,T=u[0].length,R=u.length,$=R,X=oe(R),ne=1/0,_e=[];$--;){var be=u[$];$&&c&&(be=Zt(be,ln(c))),ne=jr(be.length,ne),X[$]=!m&&(c||T>=120&&be.length>=120)?new ji($&&be):r}be=u[0];var Ee=-1,xe=X[0];e:for(;++Ee<T&&_e.length<ne;){var Ge=be[Ee],it=c?c(Ge):Ge;if(Ge=m||Ge!==0?Ge:0,!(xe?qa(xe,it):E(_e,it,m))){for($=R;--$;){var Et=X[$];if(!(Et?qa(Et,it):E(u[$],it,m)))continue e}xe&&xe.push(it),_e.push(Ge)}}return _e}function Lg(u,c,m,E){return qn(u,function(T,R,$){c(E,m(T),R,$)}),E}function Ja(u,c,m){c=wi(c,u),u=Ch(u,c);var E=u==null?u:u[Hn(An(c))];return E==null?r:on(E,u,m)}function Uc(u){return ar(u)&&$r(u)==Le}function Ug(u){return ar(u)&&$r(u)==ue}function Vg(u){return ar(u)&&$r(u)==Ze}function Qa(u,c,m,E,T){return u===c?!0:u==null||c==null||!ar(u)&&!ar(c)?u!==u&&c!==c:jg(u,c,m,E,Qa,T)}function jg(u,c,m,E,T,R){var $=bt(u),X=bt(c),ne=$?Ve:zr(u),_e=X?Ve:zr(c);ne=ne==Le?Xe:ne,_e=_e==Le?Xe:_e;var be=ne==Xe,Ee=_e==Xe,xe=ne==_e;if(xe&&Ei(u)){if(!Ei(c))return!1;$=!0,be=!1}if(xe&&!be)return R||(R=new kn),$||pa(u)?_h(u,c,m,E,T,R):pm(u,c,ne,m,E,T,R);if(!(m&b)){var Ge=be&&Ut.call(u,"__wrapped__"),it=Ee&&Ut.call(c,"__wrapped__");if(Ge||it){var Et=Ge?u.value():u,at=it?c.value():c;return R||(R=new kn),T(Et,at,m,E,R)}}return xe?(R||(R=new kn),vm(u,c,m,E,T,R)):!1}function zg(u){return ar(u)&&zr(u)==ft}function Uo(u,c,m,E){var T=m.length,R=T,$=!E;if(u==null)return!R;for(u=zt(u);T--;){var X=m[T];if($&&X[2]?X[1]!==u[X[0]]:!(X[0]in u))return!1}for(;++T<R;){X=m[T];var ne=X[0],_e=u[ne],be=X[1];if($&&X[2]){if(_e===r&&!(ne in u))return!1}else{var Ee=new kn;if(E)var xe=E(_e,be,ne,u,c,Ee);if(!(xe===r?Qa(be,_e,b|g,E,Ee):xe))return!1}}return!0}function Vc(u){if(!Xt(u)||Am(u))return!1;var c=ui(u)?zv:Ia;return c.test(Hi(u))}function qg(u){return ar(u)&&$r(u)==Mt}function Wg(u){return ar(u)&&zr(u)==jt}function Hg(u){return ar(u)&&ns(u.length)&&!!Kt[$r(u)]}function jc(u){return typeof u=="function"?u:u==null?tn:typeof u=="object"?bt(u)?Wc(u[0],u[1]):qc(u):l0(u)}function Vo(u){if(!tu(u))return $v(u);var c=[];for(var m in zt(u))Ut.call(u,m)&&m!="constructor"&&c.push(m);return c}function Gg(u){if(!Xt(u))return Bm(u);var c=tu(u),m=[];for(var E in u)E=="constructor"&&(c||!Ut.call(u,E))||m.push(E);return m}function jo(u,c){return u<c}function zc(u,c){var m=-1,E=Xr(u)?oe(u.length):[];return bi(u,function(T,R,$){E[++m]=c(T,R,$)}),E}function qc(u){var c=rl(u);return c.length==1&&c[0][2]?Eh(c[0][0],c[0][1]):function(m){return m===u||Uo(m,u,c)}}function Wc(u,c){return il(u)&&yh(c)?Eh(Hn(u),c):function(m){var E=pl(m,u);return E===r&&E===c?vl(m,u):Qa(c,E,b|g)}}function ju(u,c,m,E,T){u!==c&&No(c,function(R,$){if(T||(T=new kn),Xt(R))Kg(u,c,$,m,ju,E,T);else{var X=E?E(ul(u,$),R,$+"",u,c,T):r;X===r&&(X=R),To(u,$,X)}},en)}function Kg(u,c,m,E,T,R,$){var X=ul(u,m),ne=ul(c,m),_e=$.get(ne);if(_e){To(u,m,_e);return}var be=R?R(X,ne,m+"",u,c,$):r,Ee=be===r;if(Ee){var xe=bt(ne),Ge=!xe&&Ei(ne),it=!xe&&!Ge&&pa(ne);be=ne,xe||Ge||it?bt(X)?be=X:lr(X)?be=Qr(X):Ge?(Ee=!1,be=rh(ne,!0)):it?(Ee=!1,be=nh(ne,!0)):be=[]:nu(ne)||Gi(ne)?(be=X,Gi(X)?be=Xh(X):(!Xt(X)||ui(X))&&(be=wh(ne))):Ee=!1}Ee&&($.set(ne,be),T(be,ne,E,R,$),$.delete(ne)),To(u,m,be)}function Hc(u,c){var m=u.length;if(m)return c+=c<0?m:0,ai(c,m)?u[c]:r}function Gc(u,c,m){c.length?c=Zt(c,function(R){return bt(R)?function($){return qi($,R.length===1?R[0]:R)}:R}):c=[tn];var E=-1;c=Zt(c,ln(et()));var T=zc(u,function(R,$,X){var ne=Zt(c,function(_e){return _e(R)});return{criteria:ne,index:++E,value:R}});return Dv(T,function(R,$){return um(R,$,m)})}function $g(u,c){return Kc(u,c,function(m,E){return vl(u,E)})}function Kc(u,c,m){for(var E=-1,T=c.length,R={};++E<T;){var $=c[E],X=qi(u,$);m(X,$)&&Xa(R,wi($,u),X)}return R}function Yg(u){return function(c){return qi(c,u)}}function zo(u,c,m,E){var T=E?bv:na,R=-1,$=c.length,X=u;for(u===c&&(c=Qr(c)),m&&(X=Zt(u,ln(m)));++R<$;)for(var ne=0,_e=c[R],be=m?m(_e):_e;(ne=T(X,be,ne,E))>-1;)X!==u&&Pu.call(X,ne,1),Pu.call(u,ne,1);return u}function $c(u,c){for(var m=u?c.length:0,E=m-1;m--;){var T=c[m];if(m==E||T!==R){var R=T;ai(T)?Pu.call(u,T,1):Go(u,T)}}return u}function qo(u,c){return u+Iu(Bc()*(c-u+1))}function Zg(u,c,m,E){for(var T=-1,R=br(Tu((c-u)/(m||1)),0),$=oe(R);R--;)$[E?R:++T]=u,u+=m;return $}function Wo(u,c){var m="";if(!u||c<1||c>ie)return m;do c%2&&(m+=u),c=Iu(c/2),c&&(u+=u);while(c);return m}function At(u,c){return sl(Ah(u,c,tn),u+"")}function Jg(u){return Pc(va(u))}function Qg(u,c){var m=va(u);return Ju(m,zi(c,0,m.length))}function Xa(u,c,m,E){if(!Xt(u))return u;c=wi(c,u);for(var T=-1,R=c.length,$=R-1,X=u;X!=null&&++T<R;){var ne=Hn(c[T]),_e=m;if(ne==="__proto__"||ne==="constructor"||ne==="prototype")return u;if(T!=$){var be=X[ne];_e=E?E(be,ne,X):r,_e===r&&(_e=Xt(be)?be:ai(c[T+1])?[]:{})}Ya(X,ne,_e),X=X[ne]}return u}var Yc=Nu?function(u,c){return Nu.set(u,c),u}:tn,Xg=ku?function(u,c){return ku(u,"toString",{configurable:!0,enumerable:!1,value:ml(c),writable:!0})}:tn;function em(u){return Ju(va(u))}function En(u,c,m){var E=-1,T=u.length;c<0&&(c=-c>T?0:T+c),m=m>T?T:m,m<0&&(m+=T),T=c>m?0:m-c>>>0,c>>>=0;for(var R=oe(T);++E<T;)R[E]=u[E+c];return R}function tm(u,c){var m;return bi(u,function(E,T,R){return m=c(E,T,R),!m}),!!m}function zu(u,c,m){var E=0,T=u==null?E:u.length;if(typeof c=="number"&&c===c&&T<=Be){for(;E<T;){var R=E+T>>>1,$=u[R];$!==null&&!cn($)&&(m?$<=c:$<c)?E=R+1:T=R}return T}return Ho(u,c,tn,m)}function Ho(u,c,m,E){var T=0,R=u==null?0:u.length;if(R===0)return 0;c=m(c);for(var $=c!==c,X=c===null,ne=cn(c),_e=c===r;T<R;){var be=Iu((T+R)/2),Ee=m(u[be]),xe=Ee!==r,Ge=Ee===null,it=Ee===Ee,Et=cn(Ee);if($)var at=E||it;else _e?at=it&&(E||xe):X?at=it&&xe&&(E||!Ge):ne?at=it&&xe&&!Ge&&(E||!Et):Ge||Et?at=!1:at=E?Ee<=c:Ee<c;at?T=be+1:R=be}return jr(R,Ae)}function Zc(u,c){for(var m=-1,E=u.length,T=0,R=[];++m<E;){var $=u[m],X=c?c($):$;if(!m||!Tn(X,ne)){var ne=X;R[T++]=$===0?0:$}}return R}function Jc(u){return typeof u=="number"?u:cn(u)?pe:+u}function fn(u){if(typeof u=="string")return u;if(bt(u))return Zt(u,fn)+"";if(cn(u))return Oc?Oc.call(u):"";var c=u+"";return c=="0"&&1/u==-J?"-0":c}function Di(u,c,m){var E=-1,T=wu,R=u.length,$=!0,X=[],ne=X;if(m)$=!1,T=Do;else if(R>=i){var _e=c?null:hm(u);if(_e)return Eu(_e);$=!1,T=qa,ne=new ji}else ne=c?[]:X;e:for(;++E<R;){var be=u[E],Ee=c?c(be):be;if(be=m||be!==0?be:0,$&&Ee===Ee){for(var xe=ne.length;xe--;)if(ne[xe]===Ee)continue e;c&&ne.push(Ee),X.push(be)}else T(ne,Ee,m)||(ne!==X&&ne.push(Ee),X.push(be))}return X}function Go(u,c){return c=wi(c,u),u=Ch(u,c),u==null||delete u[Hn(An(c))]}function Qc(u,c,m,E){return Xa(u,c,m(qi(u,c)),E)}function qu(u,c,m,E){for(var T=u.length,R=E?T:-1;(E?R--:++R<T)&&c(u[R],R,u););return m?En(u,E?0:R,E?R+1:T):En(u,E?R+1:0,E?T:R)}function Xc(u,c){var m=u;return m instanceof St&&(m=m.value()),wo(c,function(E,T){return T.func.apply(T.thisArg,gi([E],T.args))},m)}function Ko(u,c,m){var E=u.length;if(E<2)return E?Di(u[0]):[];for(var T=-1,R=oe(E);++T<E;)for(var $=u[T],X=-1;++X<E;)X!=T&&(R[T]=Za(R[T]||$,u[X],c,m));return Di(Pr(R,1),c,m)}function eh(u,c,m){for(var E=-1,T=u.length,R=c.length,$={};++E<T;){var X=E<R?c[E]:r;m($,u[E],X)}return $}function $o(u){return lr(u)?u:[]}function Yo(u){return typeof u=="function"?u:tn}function wi(u,c){return bt(u)?u:il(u,c)?[u]:Oh(xt(u))}var rm=At;function yi(u,c,m){var E=u.length;return m=m===r?E:m,!c&&m>=E?u:En(u,c,m)}var th=qv||function(u){return Mr.clearTimeout(u)};function rh(u,c){if(c)return u.slice();var m=u.length,E=Ec?Ec(m):new u.constructor(m);return u.copy(E),E}function Zo(u){var c=new u.constructor(u.byteLength);return new Ou(c).set(new Ou(u)),c}function nm(u,c){var m=c?Zo(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.byteLength)}function im(u){var c=new u.constructor(u.source,ea.exec(u));return c.lastIndex=u.lastIndex,c}function am(u){return $a?zt($a.call(u)):{}}function nh(u,c){var m=c?Zo(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.length)}function ih(u,c){if(u!==c){var m=u!==r,E=u===null,T=u===u,R=cn(u),$=c!==r,X=c===null,ne=c===c,_e=cn(c);if(!X&&!_e&&!R&&u>c||R&&$&&ne&&!X&&!_e||E&&$&&ne||!m&&ne||!T)return 1;if(!E&&!R&&!_e&&u<c||_e&&m&&T&&!E&&!R||X&&m&&T||!$&&T||!ne)return-1}return 0}function um(u,c,m){for(var E=-1,T=u.criteria,R=c.criteria,$=T.length,X=m.length;++E<$;){var ne=ih(T[E],R[E]);if(ne){if(E>=X)return ne;var _e=m[E];return ne*(_e=="desc"?-1:1)}}return u.index-c.index}function ah(u,c,m,E){for(var T=-1,R=u.length,$=m.length,X=-1,ne=c.length,_e=br(R-$,0),be=oe(ne+_e),Ee=!E;++X<ne;)be[X]=c[X];for(;++T<$;)(Ee||T<R)&&(be[m[T]]=u[T]);for(;_e--;)be[X++]=u[T++];return be}function uh(u,c,m,E){for(var T=-1,R=u.length,$=-1,X=m.length,ne=-1,_e=c.length,be=br(R-X,0),Ee=oe(be+_e),xe=!E;++T<be;)Ee[T]=u[T];for(var Ge=T;++ne<_e;)Ee[Ge+ne]=c[ne];for(;++$<X;)(xe||T<R)&&(Ee[Ge+m[$]]=u[T++]);return Ee}function Qr(u,c){var m=-1,E=u.length;for(c||(c=oe(E));++m<E;)c[m]=u[m];return c}function Wn(u,c,m,E){var T=!m;m||(m={});for(var R=-1,$=c.length;++R<$;){var X=c[R],ne=E?E(m[X],u[X],X,m,u):r;ne===r&&(ne=u[X]),T?ri(m,X,ne):Ya(m,X,ne)}return m}function sm(u,c){return Wn(u,nl(u),c)}function om(u,c){return Wn(u,bh(u),c)}function Wu(u,c){return function(m,E){var T=bt(m)?dv:Mg,R=c?c():{};return T(m,u,et(E,2),R)}}function ca(u){return At(function(c,m){var E=-1,T=m.length,R=T>1?m[T-1]:r,$=T>2?m[2]:r;for(R=u.length>3&&typeof R=="function"?(T--,R):r,$&&Yr(m[0],m[1],$)&&(R=T<3?r:R,T=1),c=zt(c);++E<T;){var X=m[E];X&&u(c,X,E,R)}return c})}function sh(u,c){return function(m,E){if(m==null)return m;if(!Xr(m))return u(m,E);for(var T=m.length,R=c?T:-1,$=zt(m);(c?R--:++R<T)&&E($[R],R,$)!==!1;);return m}}function oh(u){return function(c,m,E){for(var T=-1,R=zt(c),$=E(c),X=$.length;X--;){var ne=$[u?X:++T];if(m(R[ne],ne,R)===!1)break}return c}}function lm(u,c,m){var E=c&_,T=eu(u);function R(){var $=this&&this!==Mr&&this instanceof R?T:u;return $.apply(E?m:this,arguments)}return R}function lh(u){return function(c){c=xt(c);var m=ia(c)?Pn(c):r,E=m?m[0]:c.charAt(0),T=m?yi(m,1).join(""):c.slice(1);return E[u]()+T}}function ha(u){return function(c){return wo(s0(u0(c).replace(X1,"")),u,"")}}function eu(u){return function(){var c=arguments;switch(c.length){case 0:return new u;case 1:return new u(c[0]);case 2:return new u(c[0],c[1]);case 3:return new u(c[0],c[1],c[2]);case 4:return new u(c[0],c[1],c[2],c[3]);case 5:return new u(c[0],c[1],c[2],c[3],c[4]);case 6:return new u(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new u(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var m=fa(u.prototype),E=u.apply(m,c);return Xt(E)?E:m}}function fm(u,c,m){var E=eu(u);function T(){for(var R=arguments.length,$=oe(R),X=R,ne=da(T);X--;)$[X]=arguments[X];var _e=R<3&&$[0]!==ne&&$[R-1]!==ne?[]:mi($,ne);if(R-=_e.length,R<m)return ph(u,c,Hu,T.placeholder,r,$,_e,r,r,m-R);var be=this&&this!==Mr&&this instanceof T?E:u;return on(be,this,$)}return T}function fh(u){return function(c,m,E){var T=zt(c);if(!Xr(c)){var R=et(m,3);c=Cr(c),m=function(X){return R(T[X],X,T)}}var $=u(c,m,E);return $>-1?T[R?c[$]:$]:r}}function ch(u){return ii(function(c){var m=c.length,E=m,T=wn.prototype.thru;for(u&&c.reverse();E--;){var R=c[E];if(typeof R!="function")throw new Dn(s);if(T&&!$&&Yu(R)=="wrapper")var $=new wn([],!0)}for(E=$?E:m;++E<m;){R=c[E];var X=Yu(R),ne=X=="wrapper"?tl(R):r;ne&&al(ne[0])&&ne[1]==(M|y|A|O)&&!ne[4].length&&ne[9]==1?$=$[Yu(ne[0])].apply($,ne[3]):$=R.length==1&&al(R)?$[X]():$.thru(R)}return function(){var _e=arguments,be=_e[0];if($&&_e.length==1&&bt(be))return $.plant(be).value();for(var Ee=0,xe=m?c[Ee].apply(this,_e):be;++Ee<m;)xe=c[Ee].call(this,xe);return xe}})}function Hu(u,c,m,E,T,R,$,X,ne,_e){var be=c&M,Ee=c&_,xe=c&D,Ge=c&(y|F),it=c&N,Et=xe?r:eu(u);function at(){for(var Ft=arguments.length,Ot=oe(Ft),hn=Ft;hn--;)Ot[hn]=arguments[hn];if(Ge)var Zr=da(at),dn=yv(Ot,Zr);if(E&&(Ot=ah(Ot,E,T,Ge)),R&&(Ot=uh(Ot,R,$,Ge)),Ft-=dn,Ge&&Ft<_e){var fr=mi(Ot,Zr);return ph(u,c,Hu,at.placeholder,m,Ot,fr,X,ne,_e-Ft)}var In=Ee?m:this,oi=xe?In[u]:u;return Ft=Ot.length,X?Ot=Mm(Ot,X):it&&Ft>1&&Ot.reverse(),be&&ne<Ft&&(Ot.length=ne),this&&this!==Mr&&this instanceof at&&(oi=Et||eu(oi)),oi.apply(In,Ot)}return at}function hh(u,c){return function(m,E){return Lg(m,u,c(E),{})}}function Gu(u,c){return function(m,E){var T;if(m===r&&E===r)return c;if(m!==r&&(T=m),E!==r){if(T===r)return E;typeof m=="string"||typeof E=="string"?(m=fn(m),E=fn(E)):(m=Jc(m),E=Jc(E)),T=u(m,E)}return T}}function Jo(u){return ii(function(c){return c=Zt(c,ln(et())),At(function(m){var E=this;return u(c,function(T){return on(T,E,m)})})})}function Ku(u,c){c=c===r?" ":fn(c);var m=c.length;if(m<2)return m?Wo(c,u):c;var E=Wo(c,Tu(u/aa(c)));return ia(c)?yi(Pn(E),0,u).join(""):E.slice(0,u)}function cm(u,c,m,E){var T=c&_,R=eu(u);function $(){for(var X=-1,ne=arguments.length,_e=-1,be=E.length,Ee=oe(be+ne),xe=this&&this!==Mr&&this instanceof $?R:u;++_e<be;)Ee[_e]=E[_e];for(;ne--;)Ee[_e++]=arguments[++X];return on(xe,T?m:this,Ee)}return $}function dh(u){return function(c,m,E){return E&&typeof E!="number"&&Yr(c,m,E)&&(m=E=r),c=si(c),m===r?(m=c,c=0):m=si(m),E=E===r?c<m?1:-1:si(E),Zg(c,m,E,u)}}function $u(u){return function(c,m){return typeof c=="string"&&typeof m=="string"||(c=Cn(c),m=Cn(m)),u(c,m)}}function ph(u,c,m,E,T,R,$,X,ne,_e){var be=c&y,Ee=be?$:r,xe=be?r:$,Ge=be?R:r,it=be?r:R;c|=be?A:C,c&=~(be?C:A),c&S||(c&=~(_|D));var Et=[u,c,T,Ge,Ee,it,xe,X,ne,_e],at=m.apply(r,Et);return al(u)&&Fh(at,Et),at.placeholder=E,Sh(at,u,c)}function Qo(u){var c=_r[u];return function(m,E){if(m=Cn(m),E=E==null?0:jr(yt(E),292),E&&Sc(m)){var T=(xt(m)+"e").split("e"),R=c(T[0]+"e"+(+T[1]+E));return T=(xt(R)+"e").split("e"),+(T[0]+"e"+(+T[1]-E))}return c(m)}}var hm=oa&&1/Eu(new oa([,-0]))[1]==J?function(u){return new oa(u)}:Dl;function vh(u){return function(c){var m=zr(c);return m==ft?Bo(c):m==jt?Ov(c):wv(c,u(c))}}function ni(u,c,m,E,T,R,$,X){var ne=c&D;if(!ne&&typeof u!="function")throw new Dn(s);var _e=E?E.length:0;if(_e||(c&=~(A|C),E=T=r),$=$===r?$:br(yt($),0),X=X===r?X:yt(X),_e-=T?T.length:0,c&C){var be=E,Ee=T;E=T=r}var xe=ne?r:tl(u),Ge=[u,c,m,E,T,be,Ee,R,$,X];if(xe&&Sm(Ge,xe),u=Ge[0],c=Ge[1],m=Ge[2],E=Ge[3],T=Ge[4],X=Ge[9]=Ge[9]===r?ne?0:u.length:br(Ge[9]-_e,0),!X&&c&(y|F)&&(c&=~(y|F)),!c||c==_)var it=lm(u,c,m);else c==y||c==F?it=fm(u,c,X):(c==A||c==(_|A))&&!T.length?it=cm(u,c,m,E):it=Hu.apply(r,Ge);var Et=xe?Yc:Fh;return Sh(Et(it,Ge),u,c)}function gh(u,c,m,E){return u===r||Tn(u,sa[m])&&!Ut.call(E,m)?c:u}function mh(u,c,m,E,T,R){return Xt(u)&&Xt(c)&&(R.set(c,u),ju(u,c,r,mh,R),R.delete(c)),u}function dm(u){return nu(u)?r:u}function _h(u,c,m,E,T,R){var $=m&b,X=u.length,ne=c.length;if(X!=ne&&!($&&ne>X))return!1;var _e=R.get(u),be=R.get(c);if(_e&&be)return _e==c&&be==u;var Ee=-1,xe=!0,Ge=m&g?new ji:r;for(R.set(u,c),R.set(c,u);++Ee<X;){var it=u[Ee],Et=c[Ee];if(E)var at=$?E(Et,it,Ee,c,u,R):E(it,Et,Ee,u,c,R);if(at!==r){if(at)continue;xe=!1;break}if(Ge){if(!yo(c,function(Ft,Ot){if(!qa(Ge,Ot)&&(it===Ft||T(it,Ft,m,E,R)))return Ge.push(Ot)})){xe=!1;break}}else if(!(it===Et||T(it,Et,m,E,R))){xe=!1;break}}return R.delete(u),R.delete(c),xe}function pm(u,c,m,E,T,R,$){switch(m){case he:if(u.byteLength!=c.byteLength||u.byteOffset!=c.byteOffset)return!1;u=u.buffer,c=c.buffer;case ue:return!(u.byteLength!=c.byteLength||!R(new Ou(u),new Ou(c)));case vt:case Ze:case gt:return Tn(+u,+c);case Ct:return u.name==c.name&&u.message==c.message;case Mt:case Gt:return u==c+"";case ft:var X=Bo;case jt:var ne=E&b;if(X||(X=Eu),u.size!=c.size&&!ne)return!1;var _e=$.get(u);if(_e)return _e==c;E|=g,$.set(u,c);var be=_h(X(u),X(c),E,T,R,$);return $.delete(u),be;case K:if($a)return $a.call(u)==$a.call(c)}return!1}function vm(u,c,m,E,T,R){var $=m&b,X=Xo(u),ne=X.length,_e=Xo(c),be=_e.length;if(ne!=be&&!$)return!1;for(var Ee=ne;Ee--;){var xe=X[Ee];if(!($?xe in c:Ut.call(c,xe)))return!1}var Ge=R.get(u),it=R.get(c);if(Ge&&it)return Ge==c&&it==u;var Et=!0;R.set(u,c),R.set(c,u);for(var at=$;++Ee<ne;){xe=X[Ee];var Ft=u[xe],Ot=c[xe];if(E)var hn=$?E(Ot,Ft,xe,c,u,R):E(Ft,Ot,xe,u,c,R);if(!(hn===r?Ft===Ot||T(Ft,Ot,m,E,R):hn)){Et=!1;break}at||(at=xe=="constructor")}if(Et&&!at){var Zr=u.constructor,dn=c.constructor;Zr!=dn&&"constructor"in u&&"constructor"in c&&!(typeof Zr=="function"&&Zr instanceof Zr&&typeof dn=="function"&&dn instanceof dn)&&(Et=!1)}return R.delete(u),R.delete(c),Et}function ii(u){return sl(Ah(u,r,Th),u+"")}function Xo(u){return Lc(u,Cr,nl)}function el(u){return Lc(u,en,bh)}var tl=Nu?function(u){return Nu.get(u)}:Dl;function Yu(u){for(var c=u.name+"",m=la[c],E=Ut.call(la,c)?m.length:0;E--;){var T=m[E],R=T.func;if(R==null||R==u)return T.name}return c}function da(u){var c=Ut.call(x,"placeholder")?x:u;return c.placeholder}function et(){var u=x.iteratee||_l;return u=u===_l?jc:u,arguments.length?u(arguments[0],arguments[1]):u}function Zu(u,c){var m=u.__data__;return Em(c)?m[typeof c=="string"?"string":"hash"]:m.map}function rl(u){for(var c=Cr(u),m=c.length;m--;){var E=c[m],T=u[E];c[m]=[E,T,yh(T)]}return c}function Wi(u,c){var m=Fv(u,c);return Vc(m)?m:r}function gm(u){var c=Ut.call(u,Ui),m=u[Ui];try{u[Ui]=r;var E=!0}catch{}var T=Su.call(u);return E&&(c?u[Ui]=m:delete u[Ui]),T}var nl=Mo?function(u){return u==null?[]:(u=zt(u),vi(Mo(u),function(c){return Cc.call(u,c)}))}:wl,bh=Mo?function(u){for(var c=[];u;)gi(c,nl(u)),u=Mu(u);return c}:wl,zr=$r;(Po&&zr(new Po(new ArrayBuffer(1)))!=he||Ha&&zr(new Ha)!=ft||ko&&zr(ko.resolve())!=ke||oa&&zr(new oa)!=jt||Ga&&zr(new Ga)!=ee)&&(zr=function(u){var c=$r(u),m=c==Xe?u.constructor:r,E=m?Hi(m):"";if(E)switch(E){case Qv:return he;case Xv:return ft;case eg:return ke;case tg:return jt;case rg:return ee}return c});function mm(u,c,m){for(var E=-1,T=m.length;++E<T;){var R=m[E],$=R.size;switch(R.type){case"drop":u+=$;break;case"dropRight":c-=$;break;case"take":c=jr(c,u+$);break;case"takeRight":u=br(u,c-$);break}}return{start:u,end:c}}function _m(u){var c=u.match(hi);return c?c[1].split(gn):[]}function Dh(u,c,m){c=wi(c,u);for(var E=-1,T=c.length,R=!1;++E<T;){var $=Hn(c[E]);if(!(R=u!=null&&m(u,$)))break;u=u[$]}return R||++E!=T?R:(T=u==null?0:u.length,!!T&&ns(T)&&ai($,T)&&(bt(u)||Gi(u)))}function bm(u){var c=u.length,m=new u.constructor(c);return c&&typeof u[0]=="string"&&Ut.call(u,"index")&&(m.index=u.index,m.input=u.input),m}function wh(u){return typeof u.constructor=="function"&&!tu(u)?fa(Mu(u)):{}}function Dm(u,c,m){var E=u.constructor;switch(c){case ue:return Zo(u);case vt:case Ze:return new E(+u);case he:return nm(u,m);case se:case ce:case Ce:case Re:case nt:case Te:case Wt:case Lt:case nr:return nh(u,m);case ft:return new E;case gt:case Gt:return new E(u);case Mt:return im(u);case jt:return new E;case K:return am(u)}}function wm(u,c){var m=c.length;if(!m)return u;var E=m-1;return c[E]=(m>1?"& ":"")+c[E],c=c.join(m>2?", ":" "),u.replace(Oa,`{
/* [wrapped with `+c+`] */
`)}function ym(u){return bt(u)||Gi(u)||!!(Fc&&u&&u[Fc])}function ai(u,c){var m=typeof u;return c=c??ie,!!c&&(m=="number"||m!="symbol"&&xa.test(u))&&u>-1&&u%1==0&&u<c}function Yr(u,c,m){if(!Xt(m))return!1;var E=typeof c;return(E=="number"?Xr(m)&&ai(c,m.length):E=="string"&&c in m)?Tn(m[c],u):!1}function il(u,c){if(bt(u))return!1;var m=typeof u;return m=="number"||m=="symbol"||m=="boolean"||u==null||cn(u)?!0:Vn.test(u)||!Un.test(u)||c!=null&&u in zt(c)}function Em(u){var c=typeof u;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?u!=="__proto__":u===null}function al(u){var c=Yu(u),m=x[c];if(typeof m!="function"||!(c in St.prototype))return!1;if(u===m)return!0;var E=tl(m);return!!E&&u===E[0]}function Am(u){return!!yc&&yc in u}var Cm=Cu?ui:yl;function tu(u){var c=u&&u.constructor,m=typeof c=="function"&&c.prototype||sa;return u===m}function yh(u){return u===u&&!Xt(u)}function Eh(u,c){return function(m){return m==null?!1:m[u]===c&&(c!==r||u in zt(m))}}function Fm(u){var c=ts(u,function(E){return m.size===p&&m.clear(),E}),m=c.cache;return c}function Sm(u,c){var m=u[1],E=c[1],T=m|E,R=T<(_|D|M),$=E==M&&m==y||E==M&&m==O&&u[7].length<=c[8]||E==(M|O)&&c[7].length<=c[8]&&m==y;if(!(R||$))return u;E&_&&(u[2]=c[2],T|=m&_?0:S);var X=c[3];if(X){var ne=u[3];u[3]=ne?ah(ne,X,c[4]):X,u[4]=ne?mi(u[3],f):c[4]}return X=c[5],X&&(ne=u[5],u[5]=ne?uh(ne,X,c[6]):X,u[6]=ne?mi(u[5],f):c[6]),X=c[7],X&&(u[7]=X),E&M&&(u[8]=u[8]==null?c[8]:jr(u[8],c[8])),u[9]==null&&(u[9]=c[9]),u[0]=c[0],u[1]=T,u}function Bm(u){var c=[];if(u!=null)for(var m in zt(u))c.push(m);return c}function Om(u){return Su.call(u)}function Ah(u,c,m){return c=br(c===r?u.length-1:c,0),function(){for(var E=arguments,T=-1,R=br(E.length-c,0),$=oe(R);++T<R;)$[T]=E[c+T];T=-1;for(var X=oe(c+1);++T<c;)X[T]=E[T];return X[c]=m($),on(u,this,X)}}function Ch(u,c){return c.length<2?u:qi(u,En(c,0,-1))}function Mm(u,c){for(var m=u.length,E=jr(c.length,m),T=Qr(u);E--;){var R=c[E];u[E]=ai(R,m)?T[R]:r}return u}function ul(u,c){if(!(c==="constructor"&&typeof u[c]=="function")&&c!="__proto__")return u[c]}var Fh=Bh(Yc),ru=Hv||function(u,c){return Mr.setTimeout(u,c)},sl=Bh(Xg);function Sh(u,c,m){var E=c+"";return sl(u,wm(E,Pm(_m(E),m)))}function Bh(u){var c=0,m=0;return function(){var E=Yv(),T=V-(E-m);if(m=E,T>0){if(++c>=Q)return arguments[0]}else c=0;return u.apply(r,arguments)}}function Ju(u,c){var m=-1,E=u.length,T=E-1;for(c=c===r?E:c;++m<c;){var R=qo(m,T),$=u[R];u[R]=u[m],u[m]=$}return u.length=c,u}var Oh=Fm(function(u){var c=[];return u.charCodeAt(0)===46&&c.push(""),u.replace(Xi,function(m,E,T,R){c.push(T?R.replace(Ma,"$1"):E||m)}),c});function Hn(u){if(typeof u=="string"||cn(u))return u;var c=u+"";return c=="0"&&1/u==-J?"-0":c}function Hi(u){if(u!=null){try{return Fu.call(u)}catch{}try{return u+""}catch{}}return""}function Pm(u,c){return bn(je,function(m){var E="_."+m[0];c&m[1]&&!wu(u,E)&&u.push(E)}),u.sort()}function Mh(u){if(u instanceof St)return u.clone();var c=new wn(u.__wrapped__,u.__chain__);return c.__actions__=Qr(u.__actions__),c.__index__=u.__index__,c.__values__=u.__values__,c}function km(u,c,m){(m?Yr(u,c,m):c===r)?c=1:c=br(yt(c),0);var E=u==null?0:u.length;if(!E||c<1)return[];for(var T=0,R=0,$=oe(Tu(E/c));T<E;)$[R++]=En(u,T,T+=c);return $}function Tm(u){for(var c=-1,m=u==null?0:u.length,E=0,T=[];++c<m;){var R=u[c];R&&(T[E++]=R)}return T}function Im(){var u=arguments.length;if(!u)return[];for(var c=oe(u-1),m=arguments[0],E=u;E--;)c[E-1]=arguments[E];return gi(bt(m)?Qr(m):[m],Pr(c,1))}var Nm=At(function(u,c){return lr(u)?Za(u,Pr(c,1,lr,!0)):[]}),xm=At(function(u,c){var m=An(c);return lr(m)&&(m=r),lr(u)?Za(u,Pr(c,1,lr,!0),et(m,2)):[]}),Rm=At(function(u,c){var m=An(c);return lr(m)&&(m=r),lr(u)?Za(u,Pr(c,1,lr,!0),r,m):[]});function Lm(u,c,m){var E=u==null?0:u.length;return E?(c=m||c===r?1:yt(c),En(u,c<0?0:c,E)):[]}function Um(u,c,m){var E=u==null?0:u.length;return E?(c=m||c===r?1:yt(c),c=E-c,En(u,0,c<0?0:c)):[]}function Vm(u,c){return u&&u.length?qu(u,et(c,3),!0,!0):[]}function jm(u,c){return u&&u.length?qu(u,et(c,3),!0):[]}function zm(u,c,m,E){var T=u==null?0:u.length;return T?(m&&typeof m!="number"&&Yr(u,c,m)&&(m=0,E=T),Ig(u,c,m,E)):[]}function Ph(u,c,m){var E=u==null?0:u.length;if(!E)return-1;var T=m==null?0:yt(m);return T<0&&(T=br(E+T,0)),yu(u,et(c,3),T)}function kh(u,c,m){var E=u==null?0:u.length;if(!E)return-1;var T=E-1;return m!==r&&(T=yt(m),T=m<0?br(E+T,0):jr(T,E-1)),yu(u,et(c,3),T,!0)}function Th(u){var c=u==null?0:u.length;return c?Pr(u,1):[]}function qm(u){var c=u==null?0:u.length;return c?Pr(u,J):[]}function Wm(u,c){var m=u==null?0:u.length;return m?(c=c===r?1:yt(c),Pr(u,c)):[]}function Hm(u){for(var c=-1,m=u==null?0:u.length,E={};++c<m;){var T=u[c];E[T[0]]=T[1]}return E}function Ih(u){return u&&u.length?u[0]:r}function Gm(u,c,m){var E=u==null?0:u.length;if(!E)return-1;var T=m==null?0:yt(m);return T<0&&(T=br(E+T,0)),na(u,c,T)}function Km(u){var c=u==null?0:u.length;return c?En(u,0,-1):[]}var $m=At(function(u){var c=Zt(u,$o);return c.length&&c[0]===u[0]?Lo(c):[]}),Ym=At(function(u){var c=An(u),m=Zt(u,$o);return c===An(m)?c=r:m.pop(),m.length&&m[0]===u[0]?Lo(m,et(c,2)):[]}),Zm=At(function(u){var c=An(u),m=Zt(u,$o);return c=typeof c=="function"?c:r,c&&m.pop(),m.length&&m[0]===u[0]?Lo(m,r,c):[]});function Jm(u,c){return u==null?"":Kv.call(u,c)}function An(u){var c=u==null?0:u.length;return c?u[c-1]:r}function Qm(u,c,m){var E=u==null?0:u.length;if(!E)return-1;var T=E;return m!==r&&(T=yt(m),T=T<0?br(E+T,0):jr(T,E-1)),c===c?Pv(u,c,T):yu(u,pc,T,!0)}function Xm(u,c){return u&&u.length?Hc(u,yt(c)):r}var e_=At(Nh);function Nh(u,c){return u&&u.length&&c&&c.length?zo(u,c):u}function t_(u,c,m){return u&&u.length&&c&&c.length?zo(u,c,et(m,2)):u}function r_(u,c,m){return u&&u.length&&c&&c.length?zo(u,c,r,m):u}var n_=ii(function(u,c){var m=u==null?0:u.length,E=Io(u,c);return $c(u,Zt(c,function(T){return ai(T,m)?+T:T}).sort(ih)),E});function i_(u,c){var m=[];if(!(u&&u.length))return m;var E=-1,T=[],R=u.length;for(c=et(c,3);++E<R;){var $=u[E];c($,E,u)&&(m.push($),T.push(E))}return $c(u,T),m}function ol(u){return u==null?u:Jv.call(u)}function a_(u,c,m){var E=u==null?0:u.length;return E?(m&&typeof m!="number"&&Yr(u,c,m)?(c=0,m=E):(c=c==null?0:yt(c),m=m===r?E:yt(m)),En(u,c,m)):[]}function u_(u,c){return zu(u,c)}function s_(u,c,m){return Ho(u,c,et(m,2))}function o_(u,c){var m=u==null?0:u.length;if(m){var E=zu(u,c);if(E<m&&Tn(u[E],c))return E}return-1}function l_(u,c){return zu(u,c,!0)}function f_(u,c,m){return Ho(u,c,et(m,2),!0)}function c_(u,c){var m=u==null?0:u.length;if(m){var E=zu(u,c,!0)-1;if(Tn(u[E],c))return E}return-1}function h_(u){return u&&u.length?Zc(u):[]}function d_(u,c){return u&&u.length?Zc(u,et(c,2)):[]}function p_(u){var c=u==null?0:u.length;return c?En(u,1,c):[]}function v_(u,c,m){return u&&u.length?(c=m||c===r?1:yt(c),En(u,0,c<0?0:c)):[]}function g_(u,c,m){var E=u==null?0:u.length;return E?(c=m||c===r?1:yt(c),c=E-c,En(u,c<0?0:c,E)):[]}function m_(u,c){return u&&u.length?qu(u,et(c,3),!1,!0):[]}function __(u,c){return u&&u.length?qu(u,et(c,3)):[]}var b_=At(function(u){return Di(Pr(u,1,lr,!0))}),D_=At(function(u){var c=An(u);return lr(c)&&(c=r),Di(Pr(u,1,lr,!0),et(c,2))}),w_=At(function(u){var c=An(u);return c=typeof c=="function"?c:r,Di(Pr(u,1,lr,!0),r,c)});function y_(u){return u&&u.length?Di(u):[]}function E_(u,c){return u&&u.length?Di(u,et(c,2)):[]}function A_(u,c){return c=typeof c=="function"?c:r,u&&u.length?Di(u,r,c):[]}function ll(u){if(!(u&&u.length))return[];var c=0;return u=vi(u,function(m){if(lr(m))return c=br(m.length,c),!0}),Fo(c,function(m){return Zt(u,Eo(m))})}function xh(u,c){if(!(u&&u.length))return[];var m=ll(u);return c==null?m:Zt(m,function(E){return on(c,r,E)})}var C_=At(function(u,c){return lr(u)?Za(u,c):[]}),F_=At(function(u){return Ko(vi(u,lr))}),S_=At(function(u){var c=An(u);return lr(c)&&(c=r),Ko(vi(u,lr),et(c,2))}),B_=At(function(u){var c=An(u);return c=typeof c=="function"?c:r,Ko(vi(u,lr),r,c)}),O_=At(ll);function M_(u,c){return eh(u||[],c||[],Ya)}function P_(u,c){return eh(u||[],c||[],Xa)}var k_=At(function(u){var c=u.length,m=c>1?u[c-1]:r;return m=typeof m=="function"?(u.pop(),m):r,xh(u,m)});function Rh(u){var c=x(u);return c.__chain__=!0,c}function T_(u,c){return c(u),u}function Qu(u,c){return c(u)}var I_=ii(function(u){var c=u.length,m=c?u[0]:0,E=this.__wrapped__,T=function(R){return Io(R,u)};return c>1||this.__actions__.length||!(E instanceof St)||!ai(m)?this.thru(T):(E=E.slice(m,+m+(c?1:0)),E.__actions__.push({func:Qu,args:[T],thisArg:r}),new wn(E,this.__chain__).thru(function(R){return c&&!R.length&&R.push(r),R}))});function N_(){return Rh(this)}function x_(){return new wn(this.value(),this.__chain__)}function R_(){this.__values__===r&&(this.__values__=Jh(this.value()));var u=this.__index__>=this.__values__.length,c=u?r:this.__values__[this.__index__++];return{done:u,value:c}}function L_(){return this}function U_(u){for(var c,m=this;m instanceof Ru;){var E=Mh(m);E.__index__=0,E.__values__=r,c?T.__wrapped__=E:c=E;var T=E;m=m.__wrapped__}return T.__wrapped__=u,c}function V_(){var u=this.__wrapped__;if(u instanceof St){var c=u;return this.__actions__.length&&(c=new St(this)),c=c.reverse(),c.__actions__.push({func:Qu,args:[ol],thisArg:r}),new wn(c,this.__chain__)}return this.thru(ol)}function j_(){return Xc(this.__wrapped__,this.__actions__)}var z_=Wu(function(u,c,m){Ut.call(u,m)?++u[m]:ri(u,m,1)});function q_(u,c,m){var E=bt(u)?hc:Tg;return m&&Yr(u,c,m)&&(c=r),E(u,et(c,3))}function W_(u,c){var m=bt(u)?vi:xc;return m(u,et(c,3))}var H_=fh(Ph),G_=fh(kh);function K_(u,c){return Pr(Xu(u,c),1)}function $_(u,c){return Pr(Xu(u,c),J)}function Y_(u,c,m){return m=m===r?1:yt(m),Pr(Xu(u,c),m)}function Lh(u,c){var m=bt(u)?bn:bi;return m(u,et(c,3))}function Uh(u,c){var m=bt(u)?pv:Nc;return m(u,et(c,3))}var Z_=Wu(function(u,c,m){Ut.call(u,m)?u[m].push(c):ri(u,m,[c])});function J_(u,c,m,E){u=Xr(u)?u:va(u),m=m&&!E?yt(m):0;var T=u.length;return m<0&&(m=br(T+m,0)),is(u)?m<=T&&u.indexOf(c,m)>-1:!!T&&na(u,c,m)>-1}var Q_=At(function(u,c,m){var E=-1,T=typeof c=="function",R=Xr(u)?oe(u.length):[];return bi(u,function($){R[++E]=T?on(c,$,m):Ja($,c,m)}),R}),X_=Wu(function(u,c,m){ri(u,m,c)});function Xu(u,c){var m=bt(u)?Zt:zc;return m(u,et(c,3))}function eb(u,c,m,E){return u==null?[]:(bt(c)||(c=c==null?[]:[c]),m=E?r:m,bt(m)||(m=m==null?[]:[m]),Gc(u,c,m))}var tb=Wu(function(u,c,m){u[m?0:1].push(c)},function(){return[[],[]]});function rb(u,c,m){var E=bt(u)?wo:gc,T=arguments.length<3;return E(u,et(c,4),m,T,bi)}function nb(u,c,m){var E=bt(u)?vv:gc,T=arguments.length<3;return E(u,et(c,4),m,T,Nc)}function ib(u,c){var m=bt(u)?vi:xc;return m(u,rs(et(c,3)))}function ab(u){var c=bt(u)?Pc:Jg;return c(u)}function ub(u,c,m){(m?Yr(u,c,m):c===r)?c=1:c=yt(c);var E=bt(u)?Bg:Qg;return E(u,c)}function sb(u){var c=bt(u)?Og:em;return c(u)}function ob(u){if(u==null)return 0;if(Xr(u))return is(u)?aa(u):u.length;var c=zr(u);return c==ft||c==jt?u.size:Vo(u).length}function lb(u,c,m){var E=bt(u)?yo:tm;return m&&Yr(u,c,m)&&(c=r),E(u,et(c,3))}var fb=At(function(u,c){if(u==null)return[];var m=c.length;return m>1&&Yr(u,c[0],c[1])?c=[]:m>2&&Yr(c[0],c[1],c[2])&&(c=[c[0]]),Gc(u,Pr(c,1),[])}),es=Wv||function(){return Mr.Date.now()};function cb(u,c){if(typeof c!="function")throw new Dn(s);return u=yt(u),function(){if(--u<1)return c.apply(this,arguments)}}function Vh(u,c,m){return c=m?r:c,c=u&&c==null?u.length:c,ni(u,M,r,r,r,r,c)}function jh(u,c){var m;if(typeof c!="function")throw new Dn(s);return u=yt(u),function(){return--u>0&&(m=c.apply(this,arguments)),u<=1&&(c=r),m}}var fl=At(function(u,c,m){var E=_;if(m.length){var T=mi(m,da(fl));E|=A}return ni(u,E,c,m,T)}),zh=At(function(u,c,m){var E=_|D;if(m.length){var T=mi(m,da(zh));E|=A}return ni(c,E,u,m,T)});function qh(u,c,m){c=m?r:c;var E=ni(u,y,r,r,r,r,r,c);return E.placeholder=qh.placeholder,E}function Wh(u,c,m){c=m?r:c;var E=ni(u,F,r,r,r,r,r,c);return E.placeholder=Wh.placeholder,E}function Hh(u,c,m){var E,T,R,$,X,ne,_e=0,be=!1,Ee=!1,xe=!0;if(typeof u!="function")throw new Dn(s);c=Cn(c)||0,Xt(m)&&(be=!!m.leading,Ee="maxWait"in m,R=Ee?br(Cn(m.maxWait)||0,c):R,xe="trailing"in m?!!m.trailing:xe);function Ge(fr){var In=E,oi=T;return E=T=r,_e=fr,$=u.apply(oi,In),$}function it(fr){return _e=fr,X=ru(Ft,c),be?Ge(fr):$}function Et(fr){var In=fr-ne,oi=fr-_e,f0=c-In;return Ee?jr(f0,R-oi):f0}function at(fr){var In=fr-ne,oi=fr-_e;return ne===r||In>=c||In<0||Ee&&oi>=R}function Ft(){var fr=es();if(at(fr))return Ot(fr);X=ru(Ft,Et(fr))}function Ot(fr){return X=r,xe&&E?Ge(fr):(E=T=r,$)}function hn(){X!==r&&th(X),_e=0,E=ne=T=X=r}function Zr(){return X===r?$:Ot(es())}function dn(){var fr=es(),In=at(fr);if(E=arguments,T=this,ne=fr,In){if(X===r)return it(ne);if(Ee)return th(X),X=ru(Ft,c),Ge(ne)}return X===r&&(X=ru(Ft,c)),$}return dn.cancel=hn,dn.flush=Zr,dn}var hb=At(function(u,c){return Ic(u,1,c)}),db=At(function(u,c,m){return Ic(u,Cn(c)||0,m)});function pb(u){return ni(u,N)}function ts(u,c){if(typeof u!="function"||c!=null&&typeof c!="function")throw new Dn(s);var m=function(){var E=arguments,T=c?c.apply(this,E):E[0],R=m.cache;if(R.has(T))return R.get(T);var $=u.apply(this,E);return m.cache=R.set(T,$)||R,$};return m.cache=new(ts.Cache||ti),m}ts.Cache=ti;function rs(u){if(typeof u!="function")throw new Dn(s);return function(){var c=arguments;switch(c.length){case 0:return!u.call(this);case 1:return!u.call(this,c[0]);case 2:return!u.call(this,c[0],c[1]);case 3:return!u.call(this,c[0],c[1],c[2])}return!u.apply(this,c)}}function vb(u){return jh(2,u)}var gb=rm(function(u,c){c=c.length==1&&bt(c[0])?Zt(c[0],ln(et())):Zt(Pr(c,1),ln(et()));var m=c.length;return At(function(E){for(var T=-1,R=jr(E.length,m);++T<R;)E[T]=c[T].call(this,E[T]);return on(u,this,E)})}),cl=At(function(u,c){var m=mi(c,da(cl));return ni(u,A,r,c,m)}),Gh=At(function(u,c){var m=mi(c,da(Gh));return ni(u,C,r,c,m)}),mb=ii(function(u,c){return ni(u,O,r,r,r,c)});function _b(u,c){if(typeof u!="function")throw new Dn(s);return c=c===r?c:yt(c),At(u,c)}function bb(u,c){if(typeof u!="function")throw new Dn(s);return c=c==null?0:br(yt(c),0),At(function(m){var E=m[c],T=yi(m,0,c);return E&&gi(T,E),on(u,this,T)})}function Db(u,c,m){var E=!0,T=!0;if(typeof u!="function")throw new Dn(s);return Xt(m)&&(E="leading"in m?!!m.leading:E,T="trailing"in m?!!m.trailing:T),Hh(u,c,{leading:E,maxWait:c,trailing:T})}function wb(u){return Vh(u,1)}function yb(u,c){return cl(Yo(c),u)}function Eb(){if(!arguments.length)return[];var u=arguments[0];return bt(u)?u:[u]}function Ab(u){return yn(u,v)}function Cb(u,c){return c=typeof c=="function"?c:r,yn(u,v,c)}function Fb(u){return yn(u,d|v)}function Sb(u,c){return c=typeof c=="function"?c:r,yn(u,d|v,c)}function Bb(u,c){return c==null||Tc(u,c,Cr(c))}function Tn(u,c){return u===c||u!==u&&c!==c}var Ob=$u(Ro),Mb=$u(function(u,c){return u>=c}),Gi=Uc(function(){return arguments}())?Uc:function(u){return ar(u)&&Ut.call(u,"callee")&&!Cc.call(u,"callee")},bt=oe.isArray,Pb=uc?ln(uc):Ug;function Xr(u){return u!=null&&ns(u.length)&&!ui(u)}function lr(u){return ar(u)&&Xr(u)}function kb(u){return u===!0||u===!1||ar(u)&&$r(u)==vt}var Ei=Gv||yl,Tb=sc?ln(sc):Vg;function Ib(u){return ar(u)&&u.nodeType===1&&!nu(u)}function Nb(u){if(u==null)return!0;if(Xr(u)&&(bt(u)||typeof u=="string"||typeof u.splice=="function"||Ei(u)||pa(u)||Gi(u)))return!u.length;var c=zr(u);if(c==ft||c==jt)return!u.size;if(tu(u))return!Vo(u).length;for(var m in u)if(Ut.call(u,m))return!1;return!0}function xb(u,c){return Qa(u,c)}function Rb(u,c,m){m=typeof m=="function"?m:r;var E=m?m(u,c):r;return E===r?Qa(u,c,r,m):!!E}function hl(u){if(!ar(u))return!1;var c=$r(u);return c==Ct||c==Ye||typeof u.message=="string"&&typeof u.name=="string"&&!nu(u)}function Lb(u){return typeof u=="number"&&Sc(u)}function ui(u){if(!Xt(u))return!1;var c=$r(u);return c==Je||c==ht||c==lt||c==Ne}function Kh(u){return typeof u=="number"&&u==yt(u)}function ns(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=ie}function Xt(u){var c=typeof u;return u!=null&&(c=="object"||c=="function")}function ar(u){return u!=null&&typeof u=="object"}var $h=oc?ln(oc):zg;function Ub(u,c){return u===c||Uo(u,c,rl(c))}function Vb(u,c,m){return m=typeof m=="function"?m:r,Uo(u,c,rl(c),m)}function jb(u){return Yh(u)&&u!=+u}function zb(u){if(Cm(u))throw new _t(a);return Vc(u)}function qb(u){return u===null}function Wb(u){return u==null}function Yh(u){return typeof u=="number"||ar(u)&&$r(u)==gt}function nu(u){if(!ar(u)||$r(u)!=Xe)return!1;var c=Mu(u);if(c===null)return!0;var m=Ut.call(c,"constructor")&&c.constructor;return typeof m=="function"&&m instanceof m&&Fu.call(m)==Vv}var dl=lc?ln(lc):qg;function Hb(u){return Kh(u)&&u>=-ie&&u<=ie}var Zh=fc?ln(fc):Wg;function is(u){return typeof u=="string"||!bt(u)&&ar(u)&&$r(u)==Gt}function cn(u){return typeof u=="symbol"||ar(u)&&$r(u)==K}var pa=cc?ln(cc):Hg;function Gb(u){return u===r}function Kb(u){return ar(u)&&zr(u)==ee}function $b(u){return ar(u)&&$r(u)==fe}var Yb=$u(jo),Zb=$u(function(u,c){return u<=c});function Jh(u){if(!u)return[];if(Xr(u))return is(u)?Pn(u):Qr(u);if(Wa&&u[Wa])return Bv(u[Wa]());var c=zr(u),m=c==ft?Bo:c==jt?Eu:va;return m(u)}function si(u){if(!u)return u===0?u:0;if(u=Cn(u),u===J||u===-J){var c=u<0?-1:1;return c*ae}return u===u?u:0}function yt(u){var c=si(u),m=c%1;return c===c?m?c-m:c:0}function Qh(u){return u?zi(yt(u),0,De):0}function Cn(u){if(typeof u=="number")return u;if(cn(u))return pe;if(Xt(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=Xt(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=mc(u);var m=Ta.test(u);return m||Na.test(u)?cv(u.slice(2),m?2:8):ka.test(u)?pe:+u}function Xh(u){return Wn(u,en(u))}function Jb(u){return u?zi(yt(u),-ie,ie):u===0?u:0}function xt(u){return u==null?"":fn(u)}var Qb=ca(function(u,c){if(tu(c)||Xr(c)){Wn(c,Cr(c),u);return}for(var m in c)Ut.call(c,m)&&Ya(u,m,c[m])}),e0=ca(function(u,c){Wn(c,en(c),u)}),as=ca(function(u,c,m,E){Wn(c,en(c),u,E)}),Xb=ca(function(u,c,m,E){Wn(c,Cr(c),u,E)}),eD=ii(Io);function tD(u,c){var m=fa(u);return c==null?m:kc(m,c)}var rD=At(function(u,c){u=zt(u);var m=-1,E=c.length,T=E>2?c[2]:r;for(T&&Yr(c[0],c[1],T)&&(E=1);++m<E;)for(var R=c[m],$=en(R),X=-1,ne=$.length;++X<ne;){var _e=$[X],be=u[_e];(be===r||Tn(be,sa[_e])&&!Ut.call(u,_e))&&(u[_e]=R[_e])}return u}),nD=At(function(u){return u.push(r,mh),on(t0,r,u)});function iD(u,c){return dc(u,et(c,3),qn)}function aD(u,c){return dc(u,et(c,3),xo)}function uD(u,c){return u==null?u:No(u,et(c,3),en)}function sD(u,c){return u==null?u:Rc(u,et(c,3),en)}function oD(u,c){return u&&qn(u,et(c,3))}function lD(u,c){return u&&xo(u,et(c,3))}function fD(u){return u==null?[]:Vu(u,Cr(u))}function cD(u){return u==null?[]:Vu(u,en(u))}function pl(u,c,m){var E=u==null?r:qi(u,c);return E===r?m:E}function hD(u,c){return u!=null&&Dh(u,c,Ng)}function vl(u,c){return u!=null&&Dh(u,c,xg)}var dD=hh(function(u,c,m){c!=null&&typeof c.toString!="function"&&(c=Su.call(c)),u[c]=m},ml(tn)),pD=hh(function(u,c,m){c!=null&&typeof c.toString!="function"&&(c=Su.call(c)),Ut.call(u,c)?u[c].push(m):u[c]=[m]},et),vD=At(Ja);function Cr(u){return Xr(u)?Mc(u):Vo(u)}function en(u){return Xr(u)?Mc(u,!0):Gg(u)}function gD(u,c){var m={};return c=et(c,3),qn(u,function(E,T,R){ri(m,c(E,T,R),E)}),m}function mD(u,c){var m={};return c=et(c,3),qn(u,function(E,T,R){ri(m,T,c(E,T,R))}),m}var _D=ca(function(u,c,m){ju(u,c,m)}),t0=ca(function(u,c,m,E){ju(u,c,m,E)}),bD=ii(function(u,c){var m={};if(u==null)return m;var E=!1;c=Zt(c,function(R){return R=wi(R,u),E||(E=R.length>1),R}),Wn(u,el(u),m),E&&(m=yn(m,d|h|v,dm));for(var T=c.length;T--;)Go(m,c[T]);return m});function DD(u,c){return r0(u,rs(et(c)))}var wD=ii(function(u,c){return u==null?{}:$g(u,c)});function r0(u,c){if(u==null)return{};var m=Zt(el(u),function(E){return[E]});return c=et(c),Kc(u,m,function(E,T){return c(E,T[0])})}function yD(u,c,m){c=wi(c,u);var E=-1,T=c.length;for(T||(T=1,u=r);++E<T;){var R=u==null?r:u[Hn(c[E])];R===r&&(E=T,R=m),u=ui(R)?R.call(u):R}return u}function ED(u,c,m){return u==null?u:Xa(u,c,m)}function AD(u,c,m,E){return E=typeof E=="function"?E:r,u==null?u:Xa(u,c,m,E)}var n0=vh(Cr),i0=vh(en);function CD(u,c,m){var E=bt(u),T=E||Ei(u)||pa(u);if(c=et(c,4),m==null){var R=u&&u.constructor;T?m=E?new R:[]:Xt(u)?m=ui(R)?fa(Mu(u)):{}:m={}}return(T?bn:qn)(u,function($,X,ne){return c(m,$,X,ne)}),m}function FD(u,c){return u==null?!0:Go(u,c)}function SD(u,c,m){return u==null?u:Qc(u,c,Yo(m))}function BD(u,c,m,E){return E=typeof E=="function"?E:r,u==null?u:Qc(u,c,Yo(m),E)}function va(u){return u==null?[]:So(u,Cr(u))}function OD(u){return u==null?[]:So(u,en(u))}function MD(u,c,m){return m===r&&(m=c,c=r),m!==r&&(m=Cn(m),m=m===m?m:0),c!==r&&(c=Cn(c),c=c===c?c:0),zi(Cn(u),c,m)}function PD(u,c,m){return c=si(c),m===r?(m=c,c=0):m=si(m),u=Cn(u),Rg(u,c,m)}function kD(u,c,m){if(m&&typeof m!="boolean"&&Yr(u,c,m)&&(c=m=r),m===r&&(typeof c=="boolean"?(m=c,c=r):typeof u=="boolean"&&(m=u,u=r)),u===r&&c===r?(u=0,c=1):(u=si(u),c===r?(c=u,u=0):c=si(c)),u>c){var E=u;u=c,c=E}if(m||u%1||c%1){var T=Bc();return jr(u+T*(c-u+fv("1e-"+((T+"").length-1))),c)}return qo(u,c)}var TD=ha(function(u,c,m){return c=c.toLowerCase(),u+(m?a0(c):c)});function a0(u){return gl(xt(u).toLowerCase())}function u0(u){return u=xt(u),u&&u.replace(Ra,Ev).replace(ev,"")}function ID(u,c,m){u=xt(u),c=fn(c);var E=u.length;m=m===r?E:zi(yt(m),0,E);var T=m;return m-=c.length,m>=0&&u.slice(m,T)==c}function ND(u){return u=xt(u),u&&vn.test(u)?u.replace(dr,Av):u}function xD(u){return u=xt(u),u&&Ba.test(u)?u.replace(Ii,"\\$&"):u}var RD=ha(function(u,c,m){return u+(m?"-":"")+c.toLowerCase()}),LD=ha(function(u,c,m){return u+(m?" ":"")+c.toLowerCase()}),UD=lh("toLowerCase");function VD(u,c,m){u=xt(u),c=yt(c);var E=c?aa(u):0;if(!c||E>=c)return u;var T=(c-E)/2;return Ku(Iu(T),m)+u+Ku(Tu(T),m)}function jD(u,c,m){u=xt(u),c=yt(c);var E=c?aa(u):0;return c&&E<c?u+Ku(c-E,m):u}function zD(u,c,m){u=xt(u),c=yt(c);var E=c?aa(u):0;return c&&E<c?Ku(c-E,m)+u:u}function qD(u,c,m){return m||c==null?c=0:c&&(c=+c),Zv(xt(u).replace(Or,""),c||0)}function WD(u,c,m){return(m?Yr(u,c,m):c===r)?c=1:c=yt(c),Wo(xt(u),c)}function HD(){var u=arguments,c=xt(u[0]);return u.length<3?c:c.replace(u[1],u[2])}var GD=ha(function(u,c,m){return u+(m?"_":"")+c.toLowerCase()});function KD(u,c,m){return m&&typeof m!="number"&&Yr(u,c,m)&&(c=m=r),m=m===r?De:m>>>0,m?(u=xt(u),u&&(typeof c=="string"||c!=null&&!dl(c))&&(c=fn(c),!c&&ia(u))?yi(Pn(u),0,m):u.split(c,m)):[]}var $D=ha(function(u,c,m){return u+(m?" ":"")+gl(c)});function YD(u,c,m){return u=xt(u),m=m==null?0:zi(yt(m),0,u.length),c=fn(c),u.slice(m,m+c.length)==c}function ZD(u,c,m){var E=x.templateSettings;m&&Yr(u,c,m)&&(c=r),u=xt(u),c=as({},c,E,gh);var T=as({},c.imports,E.imports,gh),R=Cr(T),$=So(T,R),X,ne,_e=0,be=c.interpolate||di,Ee="__p += '",xe=Oo((c.escape||di).source+"|"+be.source+"|"+(be===Jn?Pa:di).source+"|"+(c.evaluate||di).source+"|$","g"),Ge="//# sourceURL="+(Ut.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++av+"]")+`
`;u.replace(xe,function(at,Ft,Ot,hn,Zr,dn){return Ot||(Ot=hn),Ee+=u.slice(_e,dn).replace(La,Cv),Ft&&(X=!0,Ee+=`' +
__e(`+Ft+`) +
'`),Zr&&(ne=!0,Ee+=`';
`+Zr+`;
__p += '`),Ot&&(Ee+=`' +
((__t = (`+Ot+`)) == null ? '' : __t) +
'`),_e=dn+at.length,at}),Ee+=`';
`;var it=Ut.call(c,"variable")&&c.variable;if(!it)Ee=`with (obj) {
`+Ee+`
}
`;else if(Ni.test(it))throw new _t(o);Ee=(ne?Ee.replace(Jt,""):Ee).replace(yr,"$1").replace(Qt,"$1;"),Ee="function("+(it||"obj")+`) {
`+(it?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(X?", __e = _.escape":"")+(ne?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ee+`return __p
}`;var Et=o0(function(){return Nt(R,Ge+"return "+Ee).apply(r,$)});if(Et.source=Ee,hl(Et))throw Et;return Et}function JD(u){return xt(u).toLowerCase()}function QD(u){return xt(u).toUpperCase()}function XD(u,c,m){if(u=xt(u),u&&(m||c===r))return mc(u);if(!u||!(c=fn(c)))return u;var E=Pn(u),T=Pn(c),R=_c(E,T),$=bc(E,T)+1;return yi(E,R,$).join("")}function ew(u,c,m){if(u=xt(u),u&&(m||c===r))return u.slice(0,wc(u)+1);if(!u||!(c=fn(c)))return u;var E=Pn(u),T=bc(E,Pn(c))+1;return yi(E,0,T).join("")}function tw(u,c,m){if(u=xt(u),u&&(m||c===r))return u.replace(Or,"");if(!u||!(c=fn(c)))return u;var E=Pn(u),T=_c(E,Pn(c));return yi(E,T).join("")}function rw(u,c){var m=q,E=Z;if(Xt(c)){var T="separator"in c?c.separator:T;m="length"in c?yt(c.length):m,E="omission"in c?fn(c.omission):E}u=xt(u);var R=u.length;if(ia(u)){var $=Pn(u);R=$.length}if(m>=R)return u;var X=m-aa(E);if(X<1)return E;var ne=$?yi($,0,X).join(""):u.slice(0,X);if(T===r)return ne+E;if($&&(X+=ne.length-X),dl(T)){if(u.slice(X).search(T)){var _e,be=ne;for(T.global||(T=Oo(T.source,xt(ea.exec(T))+"g")),T.lastIndex=0;_e=T.exec(be);)var Ee=_e.index;ne=ne.slice(0,Ee===r?X:Ee)}}else if(u.indexOf(fn(T),X)!=X){var xe=ne.lastIndexOf(T);xe>-1&&(ne=ne.slice(0,xe))}return ne+E}function nw(u){return u=xt(u),u&&pr.test(u)?u.replace(Er,kv):u}var iw=ha(function(u,c,m){return u+(m?" ":"")+c.toUpperCase()}),gl=lh("toUpperCase");function s0(u,c,m){return u=xt(u),c=m?r:c,c===r?Sv(u)?Nv(u):_v(u):u.match(c)||[]}var o0=At(function(u,c){try{return on(u,r,c)}catch(m){return hl(m)?m:new _t(m)}}),aw=ii(function(u,c){return bn(c,function(m){m=Hn(m),ri(u,m,fl(u[m],u))}),u});function uw(u){var c=u==null?0:u.length,m=et();return u=c?Zt(u,function(E){if(typeof E[1]!="function")throw new Dn(s);return[m(E[0]),E[1]]}):[],At(function(E){for(var T=-1;++T<c;){var R=u[T];if(on(R[0],this,E))return on(R[1],this,E)}})}function sw(u){return kg(yn(u,d))}function ml(u){return function(){return u}}function ow(u,c){return u==null||u!==u?c:u}var lw=ch(),fw=ch(!0);function tn(u){return u}function _l(u){return jc(typeof u=="function"?u:yn(u,d))}function cw(u){return qc(yn(u,d))}function hw(u,c){return Wc(u,yn(c,d))}var dw=At(function(u,c){return function(m){return Ja(m,u,c)}}),pw=At(function(u,c){return function(m){return Ja(u,m,c)}});function bl(u,c,m){var E=Cr(c),T=Vu(c,E);m==null&&!(Xt(c)&&(T.length||!E.length))&&(m=c,c=u,u=this,T=Vu(c,Cr(c)));var R=!(Xt(m)&&"chain"in m)||!!m.chain,$=ui(u);return bn(T,function(X){var ne=c[X];u[X]=ne,$&&(u.prototype[X]=function(){var _e=this.__chain__;if(R||_e){var be=u(this.__wrapped__),Ee=be.__actions__=Qr(this.__actions__);return Ee.push({func:ne,args:arguments,thisArg:u}),be.__chain__=_e,be}return ne.apply(u,gi([this.value()],arguments))})}),u}function vw(){return Mr._===this&&(Mr._=jv),this}function Dl(){}function gw(u){return u=yt(u),At(function(c){return Hc(c,u)})}var mw=Jo(Zt),_w=Jo(hc),bw=Jo(yo);function l0(u){return il(u)?Eo(Hn(u)):Yg(u)}function Dw(u){return function(c){return u==null?r:qi(u,c)}}var ww=dh(),yw=dh(!0);function wl(){return[]}function yl(){return!1}function Ew(){return{}}function Aw(){return""}function Cw(){return!0}function Fw(u,c){if(u=yt(u),u<1||u>ie)return[];var m=De,E=jr(u,De);c=et(c),u-=De;for(var T=Fo(E,c);++m<u;)c(m);return T}function Sw(u){return bt(u)?Zt(u,Hn):cn(u)?[u]:Qr(Oh(xt(u)))}function Bw(u){var c=++Uv;return xt(u)+c}var Ow=Gu(function(u,c){return u+c},0),Mw=Qo("ceil"),Pw=Gu(function(u,c){return u/c},1),kw=Qo("floor");function Tw(u){return u&&u.length?Uu(u,tn,Ro):r}function Iw(u,c){return u&&u.length?Uu(u,et(c,2),Ro):r}function Nw(u){return vc(u,tn)}function xw(u,c){return vc(u,et(c,2))}function Rw(u){return u&&u.length?Uu(u,tn,jo):r}function Lw(u,c){return u&&u.length?Uu(u,et(c,2),jo):r}var Uw=Gu(function(u,c){return u*c},1),Vw=Qo("round"),jw=Gu(function(u,c){return u-c},0);function zw(u){return u&&u.length?Co(u,tn):0}function qw(u,c){return u&&u.length?Co(u,et(c,2)):0}return x.after=cb,x.ary=Vh,x.assign=Qb,x.assignIn=e0,x.assignInWith=as,x.assignWith=Xb,x.at=eD,x.before=jh,x.bind=fl,x.bindAll=aw,x.bindKey=zh,x.castArray=Eb,x.chain=Rh,x.chunk=km,x.compact=Tm,x.concat=Im,x.cond=uw,x.conforms=sw,x.constant=ml,x.countBy=z_,x.create=tD,x.curry=qh,x.curryRight=Wh,x.debounce=Hh,x.defaults=rD,x.defaultsDeep=nD,x.defer=hb,x.delay=db,x.difference=Nm,x.differenceBy=xm,x.differenceWith=Rm,x.drop=Lm,x.dropRight=Um,x.dropRightWhile=Vm,x.dropWhile=jm,x.fill=zm,x.filter=W_,x.flatMap=K_,x.flatMapDeep=$_,x.flatMapDepth=Y_,x.flatten=Th,x.flattenDeep=qm,x.flattenDepth=Wm,x.flip=pb,x.flow=lw,x.flowRight=fw,x.fromPairs=Hm,x.functions=fD,x.functionsIn=cD,x.groupBy=Z_,x.initial=Km,x.intersection=$m,x.intersectionBy=Ym,x.intersectionWith=Zm,x.invert=dD,x.invertBy=pD,x.invokeMap=Q_,x.iteratee=_l,x.keyBy=X_,x.keys=Cr,x.keysIn=en,x.map=Xu,x.mapKeys=gD,x.mapValues=mD,x.matches=cw,x.matchesProperty=hw,x.memoize=ts,x.merge=_D,x.mergeWith=t0,x.method=dw,x.methodOf=pw,x.mixin=bl,x.negate=rs,x.nthArg=gw,x.omit=bD,x.omitBy=DD,x.once=vb,x.orderBy=eb,x.over=mw,x.overArgs=gb,x.overEvery=_w,x.overSome=bw,x.partial=cl,x.partialRight=Gh,x.partition=tb,x.pick=wD,x.pickBy=r0,x.property=l0,x.propertyOf=Dw,x.pull=e_,x.pullAll=Nh,x.pullAllBy=t_,x.pullAllWith=r_,x.pullAt=n_,x.range=ww,x.rangeRight=yw,x.rearg=mb,x.reject=ib,x.remove=i_,x.rest=_b,x.reverse=ol,x.sampleSize=ub,x.set=ED,x.setWith=AD,x.shuffle=sb,x.slice=a_,x.sortBy=fb,x.sortedUniq=h_,x.sortedUniqBy=d_,x.split=KD,x.spread=bb,x.tail=p_,x.take=v_,x.takeRight=g_,x.takeRightWhile=m_,x.takeWhile=__,x.tap=T_,x.throttle=Db,x.thru=Qu,x.toArray=Jh,x.toPairs=n0,x.toPairsIn=i0,x.toPath=Sw,x.toPlainObject=Xh,x.transform=CD,x.unary=wb,x.union=b_,x.unionBy=D_,x.unionWith=w_,x.uniq=y_,x.uniqBy=E_,x.uniqWith=A_,x.unset=FD,x.unzip=ll,x.unzipWith=xh,x.update=SD,x.updateWith=BD,x.values=va,x.valuesIn=OD,x.without=C_,x.words=s0,x.wrap=yb,x.xor=F_,x.xorBy=S_,x.xorWith=B_,x.zip=O_,x.zipObject=M_,x.zipObjectDeep=P_,x.zipWith=k_,x.entries=n0,x.entriesIn=i0,x.extend=e0,x.extendWith=as,bl(x,x),x.add=Ow,x.attempt=o0,x.camelCase=TD,x.capitalize=a0,x.ceil=Mw,x.clamp=MD,x.clone=Ab,x.cloneDeep=Fb,x.cloneDeepWith=Sb,x.cloneWith=Cb,x.conformsTo=Bb,x.deburr=u0,x.defaultTo=ow,x.divide=Pw,x.endsWith=ID,x.eq=Tn,x.escape=ND,x.escapeRegExp=xD,x.every=q_,x.find=H_,x.findIndex=Ph,x.findKey=iD,x.findLast=G_,x.findLastIndex=kh,x.findLastKey=aD,x.floor=kw,x.forEach=Lh,x.forEachRight=Uh,x.forIn=uD,x.forInRight=sD,x.forOwn=oD,x.forOwnRight=lD,x.get=pl,x.gt=Ob,x.gte=Mb,x.has=hD,x.hasIn=vl,x.head=Ih,x.identity=tn,x.includes=J_,x.indexOf=Gm,x.inRange=PD,x.invoke=vD,x.isArguments=Gi,x.isArray=bt,x.isArrayBuffer=Pb,x.isArrayLike=Xr,x.isArrayLikeObject=lr,x.isBoolean=kb,x.isBuffer=Ei,x.isDate=Tb,x.isElement=Ib,x.isEmpty=Nb,x.isEqual=xb,x.isEqualWith=Rb,x.isError=hl,x.isFinite=Lb,x.isFunction=ui,x.isInteger=Kh,x.isLength=ns,x.isMap=$h,x.isMatch=Ub,x.isMatchWith=Vb,x.isNaN=jb,x.isNative=zb,x.isNil=Wb,x.isNull=qb,x.isNumber=Yh,x.isObject=Xt,x.isObjectLike=ar,x.isPlainObject=nu,x.isRegExp=dl,x.isSafeInteger=Hb,x.isSet=Zh,x.isString=is,x.isSymbol=cn,x.isTypedArray=pa,x.isUndefined=Gb,x.isWeakMap=Kb,x.isWeakSet=$b,x.join=Jm,x.kebabCase=RD,x.last=An,x.lastIndexOf=Qm,x.lowerCase=LD,x.lowerFirst=UD,x.lt=Yb,x.lte=Zb,x.max=Tw,x.maxBy=Iw,x.mean=Nw,x.meanBy=xw,x.min=Rw,x.minBy=Lw,x.stubArray=wl,x.stubFalse=yl,x.stubObject=Ew,x.stubString=Aw,x.stubTrue=Cw,x.multiply=Uw,x.nth=Xm,x.noConflict=vw,x.noop=Dl,x.now=es,x.pad=VD,x.padEnd=jD,x.padStart=zD,x.parseInt=qD,x.random=kD,x.reduce=rb,x.reduceRight=nb,x.repeat=WD,x.replace=HD,x.result=yD,x.round=Vw,x.runInContext=re,x.sample=ab,x.size=ob,x.snakeCase=GD,x.some=lb,x.sortedIndex=u_,x.sortedIndexBy=s_,x.sortedIndexOf=o_,x.sortedLastIndex=l_,x.sortedLastIndexBy=f_,x.sortedLastIndexOf=c_,x.startCase=$D,x.startsWith=YD,x.subtract=jw,x.sum=zw,x.sumBy=qw,x.template=ZD,x.times=Fw,x.toFinite=si,x.toInteger=yt,x.toLength=Qh,x.toLower=JD,x.toNumber=Cn,x.toSafeInteger=Jb,x.toString=xt,x.toUpper=QD,x.trim=XD,x.trimEnd=ew,x.trimStart=tw,x.truncate=rw,x.unescape=nw,x.uniqueId=Bw,x.upperCase=iw,x.upperFirst=gl,x.each=Lh,x.eachRight=Uh,x.first=Ih,bl(x,function(){var u={};return qn(x,function(c,m){Ut.call(x.prototype,m)||(u[m]=c)}),u}(),{chain:!1}),x.VERSION=n,bn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){x[u].placeholder=x}),bn(["drop","take"],function(u,c){St.prototype[u]=function(m){m=m===r?1:br(yt(m),0);var E=this.__filtered__&&!c?new St(this):this.clone();return E.__filtered__?E.__takeCount__=jr(m,E.__takeCount__):E.__views__.push({size:jr(m,De),type:u+(E.__dir__<0?"Right":"")}),E},St.prototype[u+"Right"]=function(m){return this.reverse()[u](m).reverse()}}),bn(["filter","map","takeWhile"],function(u,c){var m=c+1,E=m==L||m==U;St.prototype[u]=function(T){var R=this.clone();return R.__iteratees__.push({iteratee:et(T,3),type:m}),R.__filtered__=R.__filtered__||E,R}}),bn(["head","last"],function(u,c){var m="take"+(c?"Right":"");St.prototype[u]=function(){return this[m](1).value()[0]}}),bn(["initial","tail"],function(u,c){var m="drop"+(c?"":"Right");St.prototype[u]=function(){return this.__filtered__?new St(this):this[m](1)}}),St.prototype.compact=function(){return this.filter(tn)},St.prototype.find=function(u){return this.filter(u).head()},St.prototype.findLast=function(u){return this.reverse().find(u)},St.prototype.invokeMap=At(function(u,c){return typeof u=="function"?new St(this):this.map(function(m){return Ja(m,u,c)})}),St.prototype.reject=function(u){return this.filter(rs(et(u)))},St.prototype.slice=function(u,c){u=yt(u);var m=this;return m.__filtered__&&(u>0||c<0)?new St(m):(u<0?m=m.takeRight(-u):u&&(m=m.drop(u)),c!==r&&(c=yt(c),m=c<0?m.dropRight(-c):m.take(c-u)),m)},St.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},St.prototype.toArray=function(){return this.take(De)},qn(St.prototype,function(u,c){var m=/^(?:filter|find|map|reject)|While$/.test(c),E=/^(?:head|last)$/.test(c),T=x[E?"take"+(c=="last"?"Right":""):c],R=E||/^find/.test(c);T&&(x.prototype[c]=function(){var $=this.__wrapped__,X=E?[1]:arguments,ne=$ instanceof St,_e=X[0],be=ne||bt($),Ee=function(Ft){var Ot=T.apply(x,gi([Ft],X));return E&&xe?Ot[0]:Ot};be&&m&&typeof _e=="function"&&_e.length!=1&&(ne=be=!1);var xe=this.__chain__,Ge=!!this.__actions__.length,it=R&&!xe,Et=ne&&!Ge;if(!R&&be){$=Et?$:new St(this);var at=u.apply($,X);return at.__actions__.push({func:Qu,args:[Ee],thisArg:r}),new wn(at,xe)}return it&&Et?u.apply(this,X):(at=this.thru(Ee),it?E?at.value()[0]:at.value():at)})}),bn(["pop","push","shift","sort","splice","unshift"],function(u){var c=Au[u],m=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",E=/^(?:pop|shift)$/.test(u);x.prototype[u]=function(){var T=arguments;if(E&&!this.__chain__){var R=this.value();return c.apply(bt(R)?R:[],T)}return this[m](function($){return c.apply(bt($)?$:[],T)})}}),qn(St.prototype,function(u,c){var m=x[c];if(m){var E=m.name+"";Ut.call(la,E)||(la[E]=[]),la[E].push({name:c,func:m})}}),la[Hu(r,D).name]=[{name:"wrapper",func:r}],St.prototype.clone=ng,St.prototype.reverse=ig,St.prototype.value=ag,x.prototype.at=I_,x.prototype.chain=N_,x.prototype.commit=x_,x.prototype.next=R_,x.prototype.plant=U_,x.prototype.reverse=V_,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=j_,x.prototype.first=x.prototype.head,Wa&&(x.prototype[Wa]=L_),x},ua=xv();Li?((Li.exports=ua)._=ua,_o._=ua):Mr._=ua}).call(vr)})(h4,Hs);const d4=Hs,rf="panelMode";function p4(){const t=gr("select"),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[rf]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[rf]=a,r(a))},get:()=>It(t),delete:()=>{i&&(delete localStorage[rf],r("select"))}}}const ci=p4();function Xd(t,e,r){const n=t.slice();return n[7]=e[r][0],n[8]=e[r][1],n}function ep(t,e,r){const n=t.slice();return n[11]=e[r][0],n[12]=e[r][1],n}function tp(t){let e=t[12].text+"",r,n,i,a;return{c(){r=Oe(e),n=H("b"),i=Oe("::"),a=Fe()},l(s){r=Me(s,e),n=G(s,"B",{});var o=j(n);i=Me(o,"::"),o.forEach(k),a=Se(s)},m(s,o){le(s,r,o),le(s,n,o),I(n,i),le(s,a,o)},p(s,o){o&1&&e!==(e=s[12].text+"")&&Br(r,e)},d(s){s&&k(r),s&&k(n),s&&k(a)}}}function rp(t,e){let r,n,i,a,s,o=Object.entries(e[8].weightedPrompts),l=[];for(let f=0;f<o.length;f+=1)l[f]=tp(ep(e,o,f));function p(){return e[5](e[7],e[8])}return{key:t,first:null,c(){r=H("li"),n=H("a");for(let f=0;f<l.length;f+=1)l[f].c();i=Fe(),this.h()},l(f){r=G(f,"LI",{});var d=j(r);n=G(d,"A",{class:!0});var h=j(n);for(let v=0;v<l.length;v+=1)l[v].l(h);h.forEach(k),i=Se(d),d.forEach(k),this.h()},h(){B(n,"class","text-xs inline-block"),ct(n,"active",e[1]===e[7]),this.first=r},m(f,d){le(f,r,d),I(r,n);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(n,null);I(r,i),a||(s=ge(n,"click",p),a=!0)},p(f,d){if(e=f,d&5){o=Object.entries(e[8].weightedPrompts);let h;for(h=0;h<o.length;h+=1){const v=ep(e,o,h);l[h]?l[h].p(v,d):(l[h]=tp(v),l[h].c(),l[h].m(n,null))}for(;h<l.length;h+=1)l[h].d(1);l.length=o.length}d&7&&ct(n,"active",e[1]===e[7])},d(f){f&&k(r),Ks(l,f),a=!1,s()}}}function v4(t){let e,r,n,i,a,s=[],o=new Map,l,p,f=t[2](t[0],np,"desc");const d=h=>h[7];for(let h=0;h<f.length;h+=1){let v=Xd(t,f,h),b=d(v);o.set(b,s[h]=rp(b,v))}return{c(){e=H("ul"),r=H("li"),n=H("a"),i=Oe("New +"),a=Fe();for(let h=0;h<s.length;h+=1)s[h].c();this.h()},l(h){e=G(h,"UL",{class:!0});var v=j(e);r=G(v,"LI",{});var b=j(r);n=G(b,"A",{class:!0});var g=j(n);i=Me(g,"New +"),g.forEach(k),b.forEach(k),a=Se(v);for(let _=0;_<s.length;_+=1)s[_].l(v);v.forEach(k),this.h()},h(){B(n,"class","text-xs inline-block"),B(e,"class","menu h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(h,v){le(h,e,v),I(e,r),I(r,n),I(n,i),I(e,a);for(let b=0;b<s.length;b+=1)s[b]&&s[b].m(e,null);l||(p=ge(n,"click",t[3]),l=!0)},p(h,[v]){v&23&&(f=h[2](h[0],np,"desc"),s=Bn(s,v,d,1,h,f,o,e,Yn,rp,null,Xd))},i:Pe,o:Pe,d(h){h&&k(e);for(let v=0;v<s.length;v+=1)s[v].d();l=!1,p()}}}const np=t=>t[1].date;function g4(t,e,r){let n,i,a;Ke(t,rt,f=>r(6,n=f)),Ke(t,iy,f=>r(0,i=f)),Ke(t,$i,f=>r(1,a=f));const{orderBy:s}=d4;function o(){$i.delete(),rt.update(Fi({},n.weightMode)),ci.update("edit")}function l(f,d){$i.update(f),rt.update({...d}),ci.update("edit")}return[i,a,s,o,l,(f,d)=>l(f,d)]}class m4 extends ut{constructor(e){super(),st(this,e,g4,v4,ot,{})}}function ip(t,e,r){const n=t.slice();return n[15]=e[r].id,n[16]=e[r].text,n}function ap(t,e){let r,n,i,a,s;function o(...l){return e[9](e[15],...l)}return{key:t,first:null,c(){r=H("li"),n=H("input"),this.h()},l(l){r=G(l,"LI",{class:!0});var p=j(r);n=G(p,"INPUT",{type:!0,placeholder:!0,class:!0}),p.forEach(k),this.h()},h(){n.value=i=e[16],B(n,"type","text"),B(n,"placeholder",""),B(n,"class","input input-bordered input-sm w-full"),B(r,"class","p-1"),this.first=r},m(l,p){le(l,r,p),I(r,n),a||(s=ge(n,"input",o),a=!0)},p(l,p){e=l,p&2&&i!==(i=e[16])&&n.value!==i&&(n.value=i)},d(l){l&&k(r),a=!1,s()}}}function _4(t){let e,r,n,i,a,s,o,l,p,f,d,h=[],v=new Map,b,g,_,D,S,y=t[1];const F=A=>A[15];for(let A=0;A<y.length;A+=1){let C=ip(t,y,A),M=F(C);v.set(M,h[A]=ap(M,C))}return{c(){e=H("div"),r=H("button"),n=Oe("Paste"),i=Fe(),a=H("button"),s=Oe("Save"),o=Fe(),l=H("button"),p=Oe("Delete"),f=Fe(),d=H("ul");for(let A=0;A<h.length;A+=1)h[A].c();b=Fe(),g=H("li"),_=H("input"),this.h()},l(A){e=G(A,"DIV",{class:!0});var C=j(e);r=G(C,"BUTTON",{class:!0});var M=j(r);n=Me(M,"Paste"),M.forEach(k),i=Se(C),a=G(C,"BUTTON",{class:!0});var O=j(a);s=Me(O,"Save"),O.forEach(k),o=Se(C),l=G(C,"BUTTON",{class:!0});var N=j(l);p=Me(N,"Delete"),N.forEach(k),C.forEach(k),f=Se(A),d=G(A,"UL",{class:!0});var q=j(d);for(let Q=0;Q<h.length;Q+=1)h[Q].l(q);b=Se(q),g=G(q,"LI",{class:!0});var Z=j(g);_=G(Z,"INPUT",{type:!0,placeholder:!0,class:!0}),Z.forEach(k),q.forEach(k),this.h()},h(){B(r,"class","btn btn-sm btn-info mx-2"),B(a,"class","btn btn-sm btn-success mx-2"),B(l,"class","btn btn-sm btn-error mx-2"),B(e,"class","flex px-8 py-2 justify-center bg-base-100"),B(_,"type","text"),B(_,"placeholder","Add prompt"),B(_,"class","input input-bordered input-sm w-full italic"),B(g,"class","p-1"),B(d,"class","h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(A,C){le(A,e,C),I(e,r),I(r,n),I(e,i),I(e,a),I(a,s),I(e,o),I(e,l),I(l,p),le(A,f,C),le(A,d,C);for(let M=0;M<h.length;M+=1)h[M]&&h[M].m(d,null);I(d,b),I(d,g),I(g,_),nn(_,t[0]),D||(S=[ge(r,"click",t[3]),ge(a,"click",t[2]),ge(l,"click",t[4]),ge(_,"input",t[10]),ge(_,"input",t[11])],D=!0)},p(A,[C]){C&34&&(y=A[1],h=Bn(h,C,F,1,A,y,v,d,Yn,ap,b,ip)),C&1&&_.value!==A[0]&&nn(_,A[0])},i:Pe,o:Pe,d(A){A&&k(e),A&&k(f),A&&k(d);for(let C=0;C<h.length;C+=1)h[C].d();D=!1,$t(S)}}}function b4(t,e,r){let n,i,a,s;Ke(t,rt,S=>r(8,i=S)),Ke(t,$i,S=>r(12,a=S)),Ke(t,Hr,S=>r(13,s=S));let o="",l=Object.keys(i.weightedPrompts).length;function p(){su.update(vo(),{...i,date:Date.now()}),ci.update("select")}function f(){navigator.clipboard.readText().then(S=>{const y=du(S);d(y)})}function d(S){const y=Math.max(...S.map(([A,C])=>C)),F=S.reduce((A,[C,M],O)=>(A[O]=Ir(O,C,M,M/y),s[C]||Hr.update(C,null),A),{});$i.delete(),rt.update(Fi(F,i.weightMode)),r(0,o="")}function h(){a&&su.delete(a),$i.delete(),rt.delete(),ci.update("select")}const v=pu((S,y)=>{let F={...i.weightedPrompts};if(!y){const M=Object.entries(i.weightedPrompts).filter(([O])=>O!==S).map(([O,N])=>[N.text,N.parsedWeight]);return d(M)}const A={...F[S],text:y};F[S]=A,rt.update({...i,weightedPrompts:F})},1e3),b=pu(S=>{const y=Object.entries(i.weightedPrompts).map(([F,A])=>[A.text,A.parsedWeight]);return y.push([S,1]),d(y)},1e3),g=(S,y)=>v(S,y.target.value);function _(){o=this.value,r(0,o),r(8,i),r(7,l)}const D=S=>b(S.target.value);return t.$$.update=()=>{if(t.$$.dirty&384){const S=Object.keys(i.weightedPrompts).length;S>l&&(r(7,l=S),r(0,o=""))}t.$$.dirty&256&&r(1,n=Object.entries(i.weightedPrompts).map(([S,y])=>({id:S,text:y.text})))},[o,n,p,f,h,v,b,l,i,g,_,D]}class D4 extends ut{constructor(e){super(),st(this,e,b4,_4,ot,{})}}const w4=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. The first sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. The middle three sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. The final sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,y4=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 10 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. Four sentences should describe the subject.
    d. Four sentences should describe the scene.
    e. Tow sentences should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,E4=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 10 concepts.
    a. Each concept should be 10 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
`,A4=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 20 concepts.
    a. Each concept should be 5 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
3. Do not use hyphens to mark list items.
4. Do not title the list.
`,C4=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. One sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. Two sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. One sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
    f. One sentence should be a poetic concept or feeling. Example: The unfathomable depths of a lover's sigh.
        i. The poetic concept should be intense.
        ii. The poetic concept should be emotional.
        iii. The poetic concept should include abstract words.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`;function F4(){const t=gr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,s)=>{if(s.startsWith("directive")){const o=s.split("_")[1];a[o]=JSON.parse(localStorage[s])}return a},{})||{}),{subscribe:e,update:(a,s)=>{const o=It(t),p={...o[a]||{},...s};i&&(localStorage[`directive_${a}`]=JSON.stringify(p));const f={...o,[a]:p};r(f)},get:a=>It(t)[a],delete:a=>{i&&delete localStorage[`directive_${a}`];const s={...It(t)};delete s[a],r(s)}}}const Gs=F4(),S4=$s(Gs,t=>Object.entries(It(Gs))),nf="preferredDirective";function B4(){const t=gr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[nf]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[nf]=a,r(a))},get:()=>It(t),delete:()=>{i&&(delete localStorage[nf],r(""))}}}const ps=B4(),af="metaPrompt";function O4(){const t=gr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[af]||""),{subscribe:e,update:a=>{i&&(localStorage[af]=a,r(a))},get:()=>It(t),delete:()=>{i&&(delete localStorage[af],r(""))}}}const Pf=O4(),ba=gr("");function up(t,e,r){const n=t.slice();return n[21]=e[r][0],n[22]=e[r][1],n}function sp(t,e){let r,n=e[22].name+"",i,a=e[22].builtIn?" (Built-In)":" (User)",s,o,l;return{key:t,first:null,c(){r=H("option"),i=Oe(n),s=Oe(a),this.h()},l(p){r=G(p,"OPTION",{});var f=j(r);i=Me(f,n),s=Me(f,a),f.forEach(k),this.h()},h(){r.__value=o=e[21],r.value=r.__value,r.selected=l=e[3]===e[21],this.first=r},m(p,f){le(p,r,f),I(r,i),I(r,s)},p(p,f){e=p,f&16&&n!==(n=e[22].name+"")&&Br(i,n),f&16&&a!==(a=e[22].builtIn?" (Built-In)":" (User)")&&Br(s,a),f&16&&o!==(o=e[21])&&(r.__value=o,r.value=r.__value),f&24&&l!==(l=e[3]===e[21])&&(r.selected=l)},d(p){p&&k(r)}}}function op(t){let e,r,n,i,a,s,o,l,p,f,d,h,v,b,g=!t[7]&&lp(t),_=t[6]&&fp(t);function D(F,A){return F[1]?P4:M4}let S=D(t),y=S(t);return{c(){g&&g.c(),e=Fe(),r=H("div"),n=H("textarea"),i=Fe(),a=H("div"),s=H("textarea"),o=Fe(),l=H("div"),_&&_.c(),p=Fe(),f=H("button"),d=Oe("Preview"),h=Fe(),y.c(),this.h()},l(F){g&&g.l(F),e=Se(F),r=G(F,"DIV",{class:!0});var A=j(r);n=G(A,"TEXTAREA",{class:!0,placeholder:!0}),j(n).forEach(k),A.forEach(k),i=Se(F),a=G(F,"DIV",{class:!0});var C=j(a);s=G(C,"TEXTAREA",{class:!0,placeholder:!0}),j(s).forEach(k),C.forEach(k),o=Se(F),l=G(F,"DIV",{class:!0});var M=j(l);_&&_.l(M),p=Se(M),f=G(M,"BUTTON",{class:!0});var O=j(f);d=Me(O,"Preview"),O.forEach(k),h=Se(M),y.l(M),M.forEach(k),this.h()},h(){B(n,"class","font-mono text-xs textarea textarea-bordered w-full h-full resize-none"),B(n,"placeholder","GPT Directives"),B(r,"class","w-full p-2 h-1/2"),s.value=t[9],B(s,"class","textarea textarea-bordered w-full h-full resize-none"),B(s,"placeholder","Describe the prompt to generate."),B(a,"class","w-full p-2 h-1/5"),B(f,"class","btn btn-sm btn btn-info"),B(l,"class","w-full p-2 h-12 flex justify-between")},m(F,A){g&&g.m(F,A),le(F,e,A),le(F,r,A),I(r,n),nn(n,t[8]),le(F,i,A),le(F,a,A),I(a,s),le(F,o,A),le(F,l,A),_&&_.m(l,null),I(l,p),I(l,f),I(f,d),I(l,h),y.m(l,null),v||(b=[ge(n,"input",t[17]),ge(s,"input",t[18]),ge(f,"click",function(){Ci(t[0])&&t[0].apply(this,arguments)})],v=!0)},p(F,A){t=F,t[7]?g&&(g.d(1),g=null):g?g.p(t,A):(g=lp(t),g.c(),g.m(e.parentNode,e)),A&256&&nn(n,t[8]),A&512&&(s.value=t[9]),t[6]?_?_.p(t,A):(_=fp(t),_.c(),_.m(l,p)):_&&(_.d(1),_=null),S===(S=D(t))&&y?y.p(t,A):(y.d(1),y=S(t),y&&(y.c(),y.m(l,null)))},d(F){g&&g.d(F),F&&k(e),F&&k(r),F&&k(i),F&&k(a),F&&k(o),F&&k(l),_&&_.d(),y.d(),v=!1,$t(b)}}}function lp(t){let e,r,n,i,a,s,o;return{c(){e=H("div"),r=H("input"),n=Fe(),i=H("button"),a=Oe("Save"),this.h()},l(l){e=G(l,"DIV",{class:!0});var p=j(e);r=G(p,"INPUT",{type:!0,placeholder:!0,class:!0}),n=Se(p),i=G(p,"BUTTON",{class:!0});var f=j(i);a=Me(f,"Save"),f.forEach(k),p.forEach(k),this.h()},h(){B(r,"type","text"),B(r,"placeholder","Name"),B(r,"class","input input-bordered input-sm w-full max-w-xs"),B(i,"class","btn btn-sm btn-primary ml-4"),B(e,"class","w-full p-2 h-12 flex justify-between")},m(l,p){le(l,e,p),I(e,r),nn(r,t[5]),I(e,n),I(e,i),I(i,a),s||(o=[ge(r,"input",t[16]),ge(i,"click",t[10])],s=!0)},p(l,p){p&32&&r.value!==l[5]&&nn(r,l[5])},d(l){l&&k(e),s=!1,$t(o)}}}function fp(t){let e,r,n,i;return{c(){e=H("button"),r=Oe("Delete"),this.h()},l(a){e=G(a,"BUTTON",{class:!0});var s=j(e);r=Me(s,"Delete"),s.forEach(k),this.h()},h(){B(e,"class","btn btn-sm btn-error")},m(a,s){le(a,e,s),I(e,r),n||(i=ge(e,"click",t[11]),n=!0)},p:Pe,d(a){a&&k(e),n=!1,i()}}}function M4(t){let e,r,n,i;return{c(){e=H("button"),r=Oe("Generate"),this.h()},l(a){e=G(a,"BUTTON",{class:!0});var s=j(e);r=Me(s,"Generate"),s.forEach(k),this.h()},h(){B(e,"class","btn btn-sm btn-primary")},m(a,s){le(a,e,s),I(e,r),n||(i=ge(e,"click",function(){Ci(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(a,s){t=a},d(a){a&&k(e),n=!1,i()}}}function P4(t){let e,r;return{c(){e=H("button"),r=Oe("Generating"),this.h()},l(n){e=G(n,"BUTTON",{class:!0});var i=j(e);r=Me(i,"Generating"),i.forEach(k),this.h()},h(){B(e,"class","btn btn-sm btn disabled")},m(n,i){le(n,e,i),I(e,r)},p:Pe,d(n){n&&k(e)}}}function k4(t){let e,r,n,i,a,s,o,l,p,f,d=[],h=new Map,v,b,g,_,D,S,y,F=Object.entries(t[4]);const A=M=>M[21];for(let M=0;M<F.length;M+=1){let O=up(t,F,M),N=A(O);h.set(N,d[M]=sp(N,O))}let C=t[3]&&op(t);return{c(){e=H("div"),r=H("div"),n=H("label"),i=H("span"),a=Oe("Pick a directive for prompt creation"),s=Fe(),o=H("select"),l=H("option"),p=Oe("Pick one");for(let M=0;M<d.length;M+=1)d[M].c();v=H("option"),b=Oe("New"),_=Fe(),C&&C.c(),D=Pt(),this.h()},l(M){e=G(M,"DIV",{class:!0});var O=j(e);r=G(O,"DIV",{class:!0});var N=j(r);n=G(N,"LABEL",{class:!0});var q=j(n);i=G(q,"SPAN",{class:!0});var Z=j(i);a=Me(Z,"Pick a directive for prompt creation"),Z.forEach(k),q.forEach(k),s=Se(N),o=G(N,"SELECT",{class:!0});var Q=j(o);l=G(Q,"OPTION",{});var V=j(l);p=Me(V,"Pick one"),V.forEach(k);for(let z=0;z<d.length;z+=1)d[z].l(Q);v=G(Q,"OPTION",{});var L=j(v);b=Me(L,"New"),L.forEach(k),Q.forEach(k),N.forEach(k),O.forEach(k),_=Se(M),C&&C.l(M),D=Pt(),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),l.disabled=!0,l.selected=f=t[3]===null,l.__value="Pick one",l.value=l.__value,v.__value="new",v.value=v.__value,v.selected=g=t[3]==="new",B(o,"class","select select-bordered"),B(r,"class","form-control w-full max-w-xs mb-4"),B(e,"class","flex justify-center")},m(M,O){le(M,e,O),I(e,r),I(r,n),I(n,i),I(i,a),I(r,s),I(r,o),I(o,l),I(l,p);for(let N=0;N<d.length;N+=1)d[N]&&d[N].m(o,null);I(o,v),I(v,b),Oi(o,t[3]),le(M,_,O),C&&C.m(M,O),le(M,D,O),S||(y=ge(o,"change",t[12]),S=!0)},p(M,[O]){O&24&&f!==(f=M[3]===null)&&(l.selected=f),O&24&&(F=Object.entries(M[4]),d=Bn(d,O,A,1,M,F,h,o,Yn,sp,v,up)),O&24&&g!==(g=M[3]==="new")&&(v.selected=g),O&24&&Oi(o,M[3]),M[3]?C?C.p(M,O):(C=op(M),C.c(),C.m(D.parentNode,D)):C&&(C.d(1),C=null)},i:Pe,o:Pe,d(M){M&&k(e);for(let O=0;O<d.length;O+=1)d[O].d();M&&k(_),C&&C.d(M),M&&k(D),S=!1,y()}}}function T4(t,e,r){let n,i,a,s,o,l,p,f;Ke(t,ba,O=>r(8,o=O)),Ke(t,ps,O=>r(14,l=O)),Ke(t,S4,O=>r(15,p=O)),Ke(t,Pf,O=>r(9,f=O));let{togglePreview:d=()=>{}}=e,{isGenerating:h=!1}=e,{handleGeneratePrompt:v=()=>{}}=e,b={C:{name:"Five Sentences",text:w4,builtIn:!0},D:{name:"Ten Sentences",text:y4,builtIn:!0},E:{name:"Fragments",text:E4,builtIn:!0},F:{name:"Concept Shotgun",text:A4,builtIn:!0},G:{name:"Poetic Accents",text:C4,builtIn:!0}},g=null,_="";function D(){const O=g==="new"?vo():g;Gs.update(O,{name:_,text:o,builtIn:!1}),g==="new"&&(r(3,g=O),ps.update(O))}function S(){Gs.delete(g),r(3,g=null),r(5,_=""),ba.set(""),ps.delete()}function y(O){r(3,g=O),ps.update(O),O&&O!=="new"?(r(5,_=i[O].name),ba.set(i[O].text)):O==="new"&&(r(5,_=""),ba.set(""))}function F(O){y(O.target.value)}function A(){_=this.value,r(5,_)}function C(){o=this.value,ba.set(o)}const M=O=>Pf.update(O.target.value);return t.$$set=O=>{"togglePreview"in O&&r(0,d=O.togglePreview),"isGenerating"in O&&r(1,h=O.isGenerating),"handleGeneratePrompt"in O&&r(2,v=O.handleGeneratePrompt)},t.$$.update=()=>{t.$$.dirty&32768&&r(13,n=p.reduce((O,[N,q])=>(O[N]={name:q.name,text:q.text,builtIn:!1},O),{})),t.$$.dirty&8192&&r(4,i=Object.entries({...b,...n}).reduce((O,[N,q])=>(O[N]=q,O),{})),t.$$.dirty&16392&&g===null&&l&&(r(3,g=l),y(g)),t.$$.dirty&24&&r(7,a=g&&g!=="new"&&i[g].builtIn),t.$$.dirty&24&&r(6,s=g&&g!=="new"&&!i[g].builtIn)},[d,h,v,g,i,_,s,a,o,f,D,S,F,n,l,p,A,C,M]}class I4 extends ut{constructor(e){super(),st(this,e,T4,k4,ot,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}function N4(t,e){return`${t}

Use the following text to generate output based on the instructions above:

${e}`}const G1=$s([ba,Pf,Zi],t=>hu(N4(t[0],t[1]),t[2]));function x4(t){let e,r,n,i;return{c(){e=H("button"),r=Oe("Generate"),this.h()},l(a){e=G(a,"BUTTON",{class:!0});var s=j(e);r=Me(s,"Generate"),s.forEach(k),this.h()},h(){B(e,"class","btn btn-sm btn-primary")},m(a,s){le(a,e,s),I(e,r),n||(i=ge(e,"click",function(){Ci(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(a,s){t=a},d(a){a&&k(e),n=!1,i()}}}function R4(t){let e,r;return{c(){e=H("button"),r=Oe("Generating"),this.h()},l(n){e=G(n,"BUTTON",{class:!0});var i=j(e);r=Me(i,"Generating"),i.forEach(k),this.h()},h(){B(e,"class","btn btn-sm btn disabled")},m(n,i){le(n,e,i),I(e,r)},p:Pe,d(n){n&&k(e)}}}function L4(t){let e,r,n,i,a,s,o,l,p,f;function d(b,g){return b[1]?R4:x4}let h=d(t),v=h(t);return{c(){e=H("div"),r=H("p"),n=Oe(t[3]),i=Fe(),a=H("div"),s=H("button"),o=Oe("Back"),l=Fe(),v.c(),this.h()},l(b){e=G(b,"DIV",{class:!0});var g=j(e);r=G(g,"P",{class:!0});var _=j(r);n=Me(_,t[3]),_.forEach(k),g.forEach(k),i=Se(b),a=G(b,"DIV",{class:!0});var D=j(a);s=G(D,"BUTTON",{class:!0});var S=j(s);o=Me(S,"Back"),S.forEach(k),l=Se(D),v.l(D),D.forEach(k),this.h()},h(){B(r,"class","font-mono text-xs whitespace-pre-wrap"),B(e,"class","p-4 overflow-y-auto"),B(s,"class","btn btn-sm btn btn-info"),B(a,"class","w-full p-2 h-12 flex justify-between")},m(b,g){le(b,e,g),I(e,r),I(r,n),le(b,i,g),le(b,a,g),I(a,s),I(s,o),I(a,l),v.m(a,null),p||(f=ge(s,"click",function(){Ci(t[0])&&t[0].apply(this,arguments)}),p=!0)},p(b,[g]){t=b,g&8&&Br(n,t[3]),h===(h=d(t))&&v?v.p(t,g):(v.d(1),v=h(t),v&&(v.c(),v.m(a,null)))},i:Pe,o:Pe,d(b){b&&k(e),b&&k(i),b&&k(a),v.d(),p=!1,f()}}}function U4(t,e,r){let n;Ke(t,G1,o=>r(3,n=o));let{togglePreview:i=()=>{}}=e,{isGenerating:a=!1}=e,{handleGeneratePrompt:s=()=>{}}=e;return t.$$set=o=>{"togglePreview"in o&&r(0,i=o.togglePreview),"isGenerating"in o&&r(1,a=o.isGenerating),"handleGeneratePrompt"in o&&r(2,s=o.handleGeneratePrompt)},[i,a,s,n]}class V4 extends ut{constructor(e){super(),st(this,e,U4,L4,ot,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}const uf="preferredModel";function j4(){const t=gr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[uf]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[uf]=a,r(a))},get:()=>It(t),delete:()=>{i&&(delete localStorage[uf],r(""))}}}const kf=j4();function z4(t){let e,r,n;return{c(){e=H("div"),r=H("p"),n=Oe("Set Open AI Key in settings for GPT generation."),this.h()},l(i){e=G(i,"DIV",{class:!0});var a=j(e);r=G(a,"P",{class:!0});var s=j(r);n=Me(s,"Set Open AI Key in settings for GPT generation."),s.forEach(k),a.forEach(k),this.h()},h(){B(r,"class","text-center"),B(e,"class","w-full p-2 flex justify-center")},m(i,a){le(i,e,a),I(e,r),I(r,n)},p:Pe,i:Pe,o:Pe,d(i){i&&k(e)}}}function q4(t){let e,r,n,i;const a=[H4,W4],s=[];function o(l,p){return l[1]?0:1}return e=o(t),r=s[e]=a[e](t),{c(){r.c(),n=Pt()},l(l){r.l(l),n=Pt()},m(l,p){s[e].m(l,p),le(l,n,p),i=!0},p(l,p){let f=e;e=o(l),e===f?s[e].p(l,p):(cr(),we(s[f],1,1,()=>{s[f]=null}),hr(),r=s[e],r?r.p(l,p):(r=s[e]=a[e](l),r.c()),me(r,1),r.m(n.parentNode,n))},i(l){i||(me(r),i=!0)},o(l){we(r),i=!1},d(l){s[e].d(l),l&&k(n)}}}function W4(t){let e,r;return e=new I4({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},p(n,i){const a={};i&1&&(a.isGenerating=n[0]),e.$set(a)},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function H4(t){let e,r;return e=new V4({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},p(n,i){const a={};i&1&&(a.isGenerating=n[0]),e.$set(a)},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function G4(t){let e,r,n,i;const a=[q4,z4],s=[];function o(l,p){return l[2]?0:1}return r=o(t),n=s[r]=a[r](t),{c(){e=H("div"),n.c(),this.h()},l(l){e=G(l,"DIV",{class:!0});var p=j(e);n.l(p),p.forEach(k),this.h()},h(){B(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(l,p){le(l,e,p),s[r].m(e,null),i=!0},p(l,[p]){n.p(l,p)},i(l){i||(me(n),i=!0)},o(l){we(n),i=!1},d(l){l&&k(e),s[r].d()}}}function K4(t,e,r){let n,i,a,s,o,l;Ke(t,G1,D=>r(7,i=D)),Ke(t,rt,D=>r(8,a=D)),Ke(t,Hr,D=>r(9,s=D)),Ke(t,kf,D=>r(5,o=D)),Ke(t,Yi,D=>r(10,l=D));const p=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001"];let f=!1,d=l,h=!1;function v(D,S){const y=js(D),F=n||"gpt-3.5-turbo";r(0,f=!0),CS(y,S,F).then(A=>{console.log(A),A.data.choices.forEach((C,M)=>{const O=du(C.message.content);console.log(O);const N=O.reduce((q,[Z,Q],V)=>(q[V]=Ir(V,Z,Q),s[Z]||Hr.update(Z,null),q),{});rt.update(Fi(N,a.weightMode)),ci.update("edit"),Zi.shuffle()})}).finally(()=>{r(0,f=!1)})}function b(D,S){const y=js(D),F=n||"text-davinci-003";r(0,f=!0),AS(y,S,F).then(A=>{console.log(A),A.data.choices.forEach((C,M)=>{const O=du(C.text);console.log(O);const N=O.reduce((q,[Z,Q],V)=>(q[V]=Ir(V,Z,Q),s[Z]||Hr.update(Z,null),q),{});rt.update(Fi(N,a.weightMode)),ci.update("edit"),Zi.shuffle()})}).finally(()=>{r(0,f=!1)})}function g(){d&&(p.includes(n)?b(d,i):v(d,i))}function _(){console.log(i),r(1,h=!h)}return t.$$.update=()=>{t.$$.dirty&32&&(n=o||null)},[f,h,d,g,_,o]}class $4 extends ut{constructor(e){super(),st(this,e,K4,G4,ot,{})}}function cp(t,e,r){const n=t.slice();return n[18]=e[r],n}function hp(t,e,r){const n=t.slice();return n[18]=e[r],n}function Y4(t){return{c:Pe,l:Pe,m:Pe,p:Pe,d:Pe}}function Z4(t){let e,r,n=t[0].length>0&&dp(t),i=t[1].length>0&&vp(t);return{c(){n&&n.c(),e=Fe(),i&&i.c(),r=Pt()},l(a){n&&n.l(a),e=Se(a),i&&i.l(a),r=Pt()},m(a,s){n&&n.m(a,s),le(a,e,s),i&&i.m(a,s),le(a,r,s)},p(a,s){a[0].length>0?n?n.p(a,s):(n=dp(a),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),a[1].length>0?i?i.p(a,s):(i=vp(a),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){n&&n.d(a),a&&k(e),i&&i.d(a),a&&k(r)}}}function dp(t){let e,r,n,i,a,s,o,l,p,f,d=[],h=new Map,v,b,g=t[0];const _=D=>D[18];for(let D=0;D<g.length;D+=1){let S=hp(t,g,D),y=_(S);h.set(y,d[D]=pp(y,S))}return{c(){e=H("div"),r=H("div"),n=H("label"),i=H("span"),a=Oe("Pick a model to use for model generation"),s=Fe(),o=H("select"),l=H("option"),p=Oe("Pick one");for(let D=0;D<d.length;D+=1)d[D].c();this.h()},l(D){e=G(D,"DIV",{class:!0});var S=j(e);r=G(S,"DIV",{class:!0});var y=j(r);n=G(y,"LABEL",{class:!0});var F=j(n);i=G(F,"SPAN",{class:!0});var A=j(i);a=Me(A,"Pick a model to use for model generation"),A.forEach(k),F.forEach(k),s=Se(y),o=G(y,"SELECT",{class:!0});var C=j(o);l=G(C,"OPTION",{});var M=j(l);p=Me(M,"Pick one"),M.forEach(k);for(let O=0;O<d.length;O+=1)d[O].l(C);C.forEach(k),y.forEach(k),S.forEach(k),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),l.disabled=!0,l.selected=f=t[2]===null,l.__value="Pick one",l.value=l.__value,B(o,"class","select select-bordered"),B(r,"class","form-control w-full max-w-xs mb-4"),B(e,"class","flex justify-center")},m(D,S){le(D,e,S),I(e,r),I(r,n),I(n,i),I(i,a),I(r,s),I(r,o),I(o,l),I(l,p);for(let y=0;y<d.length;y+=1)d[y]&&d[y].m(o,null);Oi(o,t[2]),v||(b=ge(o,"change",t[6]),v=!0)},p(D,S){S&5&&f!==(f=D[2]===null)&&(l.selected=f),S&5&&(g=D[0],d=Bn(d,S,_,1,D,g,h,o,Yn,pp,null,hp)),S&5&&Oi(o,D[2])},d(D){D&&k(e);for(let S=0;S<d.length;S+=1)d[S].d();v=!1,b()}}}function pp(t,e){let r,n=e[18]+"",i,a,s;return{key:t,first:null,c(){r=H("option"),i=Oe(n),this.h()},l(o){r=G(o,"OPTION",{});var l=j(r);i=Me(l,n),l.forEach(k),this.h()},h(){r.__value=a=e[18],r.value=r.__value,r.selected=s=e[2]===e[18],this.first=r},m(o,l){le(o,r,l),I(r,i)},p(o,l){e=o,l&1&&n!==(n=e[18]+"")&&Br(i,n),l&1&&a!==(a=e[18])&&(r.__value=a,r.value=r.__value),l&5&&s!==(s=e[2]===e[18])&&(r.selected=s)},d(o){o&&k(r)}}}function vp(t){let e,r,n,i,a,s,o,l,p,f,d=[],h=new Map,v,b,g=t[1];const _=D=>D[18];for(let D=0;D<g.length;D+=1){let S=cp(t,g,D),y=_(S);h.set(y,d[D]=gp(y,S))}return{c(){e=H("div"),r=H("div"),n=H("label"),i=H("span"),a=Oe("Pick a model to use for prompt embedding"),s=Fe(),o=H("select"),l=H("option"),p=Oe("Pick one");for(let D=0;D<d.length;D+=1)d[D].c();this.h()},l(D){e=G(D,"DIV",{class:!0});var S=j(e);r=G(S,"DIV",{class:!0});var y=j(r);n=G(y,"LABEL",{class:!0});var F=j(n);i=G(F,"SPAN",{class:!0});var A=j(i);a=Me(A,"Pick a model to use for prompt embedding"),A.forEach(k),F.forEach(k),s=Se(y),o=G(y,"SELECT",{class:!0});var C=j(o);l=G(C,"OPTION",{});var M=j(l);p=Me(M,"Pick one"),M.forEach(k);for(let O=0;O<d.length;O+=1)d[O].l(C);C.forEach(k),y.forEach(k),S.forEach(k),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),l.disabled=!0,l.selected=f=t[3]===null,l.__value="Pick one",l.value=l.__value,B(o,"class","select select-bordered"),B(r,"class","form-control w-full max-w-xs mb-4"),B(e,"class","flex justify-center")},m(D,S){le(D,e,S),I(e,r),I(r,n),I(n,i),I(i,a),I(r,s),I(r,o),I(o,l),I(l,p);for(let y=0;y<d.length;y+=1)d[y]&&d[y].m(o,null);Oi(o,t[3]),v||(b=ge(o,"change",t[7]),v=!0)},p(D,S){S&10&&f!==(f=D[3]===null)&&(l.selected=f),S&10&&(g=D[1],d=Bn(d,S,_,1,D,g,h,o,Yn,gp,null,cp)),S&10&&Oi(o,D[3])},d(D){D&&k(e);for(let S=0;S<d.length;S+=1)d[S].d();v=!1,b()}}}function gp(t,e){let r,n=e[18]+"",i,a,s;return{key:t,first:null,c(){r=H("option"),i=Oe(n),this.h()},l(o){r=G(o,"OPTION",{});var l=j(r);i=Me(l,n),l.forEach(k),this.h()},h(){r.__value=a=e[18],r.value=r.__value,r.selected=s=e[3]===e[18],this.first=r},m(o,l){le(o,r,l),I(r,i)},p(o,l){e=o,l&2&&n!==(n=e[18]+"")&&Br(i,n),l&2&&a!==(a=e[18])&&(r.__value=a,r.value=r.__value),l&10&&s!==(s=e[3]===e[18])&&(r.selected=s)},d(o){o&&k(r)}}}function J4(t){let e,r,n;return{c(){e=H("div"),r=H("div"),n=H("progress"),this.h()},l(i){e=G(i,"DIV",{class:!0});var a=j(e);r=G(a,"DIV",{class:!0});var s=j(r);n=G(s,"PROGRESS",{class:!0}),j(n).forEach(k),s.forEach(k),a.forEach(k),this.h()},h(){B(n,"class","progress progress-primary w-56"),B(r,"class","form-control w-full flex flex-col max-w-xs"),B(e,"class","py-10 flex justify-center")},m(i,a){le(i,e,a),I(e,r),I(r,n)},p:Pe,d(i){i&&k(e)}}}function Q4(t){let e,r,n,i,a,s,o,l,p,f,d,h,v,b,g,_,D={ctx:t,current:null,token:null,hasCatch:!1,pending:J4,then:Z4,catch:Y4,value:17};return Ds(b=t[4],D),{c(){e=H("div"),r=H("div"),n=H("div"),i=H("label"),a=H("span"),s=Oe("Open AI Key"),o=Fe(),l=H("input"),p=Fe(),f=H("label"),d=H("button"),h=Oe("Clear"),v=Fe(),D.block.c(),this.h()},l(S){e=G(S,"DIV",{class:!0});var y=j(e);r=G(y,"DIV",{class:!0});var F=j(r);n=G(F,"DIV",{class:!0});var A=j(n);i=G(A,"LABEL",{class:!0});var C=j(i);a=G(C,"SPAN",{class:!0});var M=j(a);s=Me(M,"Open AI Key"),M.forEach(k),C.forEach(k),o=Se(A),l=G(A,"INPUT",{type:!0,placeholder:!0,class:!0}),p=Se(A),f=G(A,"LABEL",{class:!0});var O=j(f);d=G(O,"BUTTON",{class:!0});var N=j(d);h=Me(N,"Clear"),N.forEach(k),O.forEach(k),A.forEach(k),F.forEach(k),v=Se(y),D.block.l(y),y.forEach(k),this.h()},h(){B(a,"class","label-text-alt"),B(i,"class","label"),l.value=t[5],B(l,"type","password"),B(l,"placeholder","Open AI Key"),B(l,"class","input input-bordered w-full max-w-xs"),B(d,"class","btn btn-xs btn-error"),B(f,"class","label"),B(n,"class","form-control w-full max-w-xs"),B(r,"class","flex justify-center"),B(e,"class","h-full p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(S,y){le(S,e,y),I(e,r),I(r,n),I(n,i),I(i,a),I(a,s),I(n,o),I(n,l),I(n,p),I(n,f),I(f,d),I(d,h),I(e,v),D.block.m(e,D.anchor=null),D.mount=()=>e,D.anchor=null,g||(_=[ge(l,"input",t[8]),ge(d,"click",t[9])],g=!0)},p(S,[y]){t=S,y&32&&l.value!==t[5]&&(l.value=t[5]),D.ctx=t,y&16&&b!==(b=t[4])&&Ds(b,D)||Fp(D,t,y)},i:Pe,o:Pe,d(S){S&&k(e),D.block.d(),D.token=null,D=null,g=!1,$t(_)}}}function X4(t,e,r){let n,i,a,s;Ke(t,rt,F=>r(11,n=F)),Ke(t,Cf,F=>r(12,i=F)),Ke(t,kf,F=>r(13,a=F)),Ke(t,Yi,F=>r(5,s=F));const o=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001","gpt-3.5-turbo","gpt-3.5-turbo-0301"],l=["text-embedding-ada-002"];let p=s,f=[],d=[],h=a,v=i,b=null;async function g(F){if(!F||f.length&&d.length)return;const A=js(F);r(4,b=SS(A));const C=await b;C.data&&r(0,f=C.data.data.map(({id:M})=>M).filter(M=>o.includes(M))),r(1,d=C.data.data.map(({id:M})=>M).filter(M=>l.includes(M)))}function _(F){r(2,h=F.target.value),kf.update(h)}function D(F){r(3,v=F.target.value),Cf.update(v)}function S(F){const A=F.target.value;Yi.update(A),A.length===51&&g(A),A.length===0&&y()}function y(){Yi.delete(),r(10,p=""),r(0,f=[]),r(1,d=[]),n.weightMode===wt.Embed&&rt.update({...n,weightMode:wt.Circle})}return t.$$.update=()=>{t.$$.dirty&1024&&g(p)},[f,d,h,v,b,s,_,D,S,y,p]}class eB extends ut{constructor(e){super(),st(this,e,X4,Q4,ot,{})}}function tB(t){let e,r;return{c(){e=dt("svg"),r=dt("path"),this.h()},l(n){e=pt(n,"svg",{xmlns:!0,class:!0,viewBox:!0});var i=j(e);r=pt(i,"path",{fill:!0,d:!0}),j(r).forEach(k),i.forEach(k),this.h()},h(){B(r,"fill","rgba(255,255,255, 0.7)"),B(r,"d","M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"class","h-4 w-4"),B(e,"viewBox","0 0 24 24")},m(n,i){le(n,e,i),I(e,r)},p:Pe,i:Pe,o:Pe,d(n){n&&k(e)}}}class rB extends ut{constructor(e){super(),st(this,e,null,tB,ot,{})}}function mp(t,e,r){const n=t.slice();return n[17]=e[r],n[19]=r,n}function _p(t,e,r){const n=t.slice();return n[20]=e[r][0],n[21]=e[r][1],n}function bp(t,e){let r,n=e[21].name+"",i,a,s;return{key:t,first:null,c(){r=H("option"),i=Oe(n),this.h()},l(o){r=G(o,"OPTION",{});var l=j(r);i=Me(l,n),l.forEach(k),this.h()},h(){r.__value=a=e[20],r.value=r.__value,r.selected=s=e[0]===e[20],this.first=r},m(o,l){le(o,r,l),I(r,i)},p(o,l){e=o,l&16&&n!==(n=e[21].name+"")&&Br(i,n),l&16&&a!==(a=e[20])&&(r.__value=a,r.value=r.__value),l&17&&s!==(s=e[0]===e[20])&&(r.selected=s)},d(o){o&&k(r)}}}function Dp(t){let e,r,n,i,a,s,o,l,p,f=qs(t[1])+"",d,h,v=(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1]),b,g,_,D,S,y,F,A,C,M,O,N,q,Z,Q=v&&wp(),V=t[3]&&yp(t);return{c(){e=H("div"),r=H("div"),n=H("input"),i=Fe(),a=H("div"),s=H("label"),o=H("span"),l=Oe("Alias: "),p=H("b"),d=Oe(f),h=Fe(),Q&&Q.c(),b=Fe(),g=H("button"),_=Oe("Save"),D=Fe(),S=H("ul"),V&&V.c(),y=Fe(),F=H("li"),A=H("input"),C=Fe(),M=H("div"),O=H("button"),N=Oe("Delete"),this.h()},l(L){e=G(L,"DIV",{class:!0});var z=j(e);r=G(z,"DIV",{class:!0});var U=j(r);n=G(U,"INPUT",{type:!0,placeholder:!0,class:!0}),i=Se(U),a=G(U,"DIV",{class:!0,"data-tip":!0});var J=j(a);s=G(J,"LABEL",{class:!0});var ie=j(s);o=G(ie,"SPAN",{class:!0});var ae=j(o);l=Me(ae,"Alias: "),p=G(ae,"B",{class:!0});var pe=j(p);d=Me(pe,f),pe.forEach(k),ae.forEach(k),ie.forEach(k),J.forEach(k),h=Se(U),Q&&Q.l(U),U.forEach(k),b=Se(z),g=G(z,"BUTTON",{class:!0});var De=j(g);_=Me(De,"Save"),De.forEach(k),z.forEach(k),D=Se(L),S=G(L,"UL",{class:!0});var Ae=j(S);V&&V.l(Ae),y=Se(Ae),F=G(Ae,"LI",{class:!0});var Be=j(F);A=G(Be,"INPUT",{type:!0,placeholder:!0,class:!0}),Be.forEach(k),Ae.forEach(k),C=Se(L),M=G(L,"DIV",{class:!0});var je=j(M);O=G(je,"BUTTON",{class:!0});var Le=j(O);N=Me(Le,"Delete"),Le.forEach(k),je.forEach(k),this.h()},h(){B(n,"type","text"),B(n,"placeholder","Name"),B(n,"class","input input-bordered input-sm w-full max-w-xs"),B(p,"class","text-white cursor-copy"),B(o,"class","label-text"),B(s,"class","label"),B(a,"class","tooltip tooltip-primary tooltip-bottom"),B(a,"data-tip","Use in prompts or directives to get random slot."),B(r,"class","flex flex-col w-full pr-2 "),B(g,"class","btn btn-sm btn-primary"),ct(g,"btn-disabled",!Td(t[1])||(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1])),B(e,"class","w-full p-2 flex justify-between"),B(A,"type","text"),B(A,"placeholder","Add slot"),B(A,"class","input input-bordered input-sm w-full italic"),B(F,"class","p-1"),B(S,"class","px-4 py-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block"),B(O,"class","btn btn-sm btn-error ml-4"),B(M,"class","w-full p-2 h-12 flex justify-between")},m(L,z){le(L,e,z),I(e,r),I(r,n),nn(n,t[1]),I(r,i),I(r,a),I(a,s),I(s,o),I(o,l),I(o,p),I(p,d),I(r,h),Q&&Q.m(r,null),I(e,b),I(e,g),I(g,_),le(L,D,z),le(L,S,z),V&&V.m(S,null),I(S,y),I(S,F),I(F,A),nn(A,t[2]),le(L,C,z),le(L,M,z),I(M,O),I(O,N),q||(Z=[ge(n,"input",t[11]),ge(p,"click",t[12]),ge(g,"click",t[6]),ge(A,"input",t[14]),ge(A,"input",t[15]),ge(O,"click",t[7])],q=!0)},p(L,z){z&2&&n.value!==L[1]&&nn(n,L[1]),z&2&&f!==(f=qs(L[1])+"")&&Br(d,f),z&11&&(v=(L[0]==="new"||L[3]&&L[3].name!==L[1])&&!L[5](L[1])),v?Q||(Q=wp(),Q.c(),Q.m(r,null)):Q&&(Q.d(1),Q=null),z&43&&ct(g,"btn-disabled",!Td(L[1])||(L[0]==="new"||L[3]&&L[3].name!==L[1])&&!L[5](L[1])),L[3]?V?V.p(L,z):(V=yp(L),V.c(),V.m(S,y)):V&&(V.d(1),V=null),z&4&&A.value!==L[2]&&nn(A,L[2])},d(L){L&&k(e),Q&&Q.d(),L&&k(D),L&&k(S),V&&V.d(),L&&k(C),L&&k(M),q=!1,$t(Z)}}}function wp(t){let e,r,n;return{c(){e=H("label"),r=H("span"),n=Oe("Name In Use"),this.h()},l(i){e=G(i,"LABEL",{class:!0});var a=j(e);r=G(a,"SPAN",{class:!0});var s=j(r);n=Me(s,"Name In Use"),s.forEach(k),a.forEach(k),this.h()},h(){B(r,"class","label-text text-orange-300"),B(e,"class","label")},m(i,a){le(i,e,a),I(e,r),I(r,n)},d(i){i&&k(e)}}}function yp(t){let e=[],r=new Map,n,i=t[3].values;const a=s=>s[19];for(let s=0;s<i.length;s+=1){let o=mp(t,i,s),l=a(o);r.set(l,e[s]=Ep(l,o))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();n=Pt()},l(s){for(let o=0;o<e.length;o+=1)e[o].l(s);n=Pt()},m(s,o){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(s,o);le(s,n,o)},p(s,o){o&264&&(i=s[3].values,e=Bn(e,o,a,1,s,i,r,n.parentNode,Yn,Ep,n,mp))},d(s){for(let o=0;o<e.length;o+=1)e[o].d(s);s&&k(n)}}}function Ep(t,e){let r,n,i,a,s,o;function l(...p){return e[13](e[19],...p)}return{key:t,first:null,c(){r=H("li"),n=H("input"),a=Fe(),this.h()},l(p){r=G(p,"LI",{class:!0});var f=j(r);n=G(f,"INPUT",{type:!0,placeholder:!0,class:!0}),a=Se(f),f.forEach(k),this.h()},h(){n.value=i=e[17],B(n,"type","text"),B(n,"placeholder",""),B(n,"class","input input-bordered input-sm w-full"),B(r,"class","p-1"),this.first=r},m(p,f){le(p,r,f),I(r,n),I(r,a),s||(o=ge(n,"input",l),s=!0)},p(p,f){e=p,f&8&&i!==(i=e[17])&&n.value!==i&&(n.value=i)},d(p){p&&k(r),s=!1,o()}}}function nB(t){let e,r,n,i,a,s,o,l,p,f,d,h=[],v=new Map,b,g,_,D,S,y,F=Object.entries(t[4]);const A=M=>M[20];for(let M=0;M<F.length;M+=1){let O=_p(t,F,M),N=A(O);v.set(N,h[M]=bp(N,O))}let C=t[0]&&Dp(t);return{c(){e=H("div"),r=H("div"),n=H("div"),i=H("label"),a=H("span"),s=Oe("Edit Slots"),o=Fe(),l=H("select"),p=H("option"),f=Oe("Pick one");for(let M=0;M<h.length;M+=1)h[M].c();b=H("option"),g=Oe("New"),D=Fe(),C&&C.c(),this.h()},l(M){e=G(M,"DIV",{class:!0});var O=j(e);r=G(O,"DIV",{class:!0});var N=j(r);n=G(N,"DIV",{class:!0});var q=j(n);i=G(q,"LABEL",{class:!0});var Z=j(i);a=G(Z,"SPAN",{class:!0});var Q=j(a);s=Me(Q,"Edit Slots"),Q.forEach(k),Z.forEach(k),o=Se(q),l=G(q,"SELECT",{class:!0});var V=j(l);p=G(V,"OPTION",{});var L=j(p);f=Me(L,"Pick one"),L.forEach(k);for(let U=0;U<h.length;U+=1)h[U].l(V);b=G(V,"OPTION",{});var z=j(b);g=Me(z,"New"),z.forEach(k),V.forEach(k),q.forEach(k),N.forEach(k),D=Se(O),C&&C.l(O),O.forEach(k),this.h()},h(){B(a,"class","label-text"),B(i,"class","label"),p.disabled=!0,p.selected=d=t[0]===null,p.__value="Pick one",p.value=p.__value,b.__value="new",b.value=b.__value,b.selected=_=t[0]==="new",B(l,"class","select select-bordered"),t[0]===void 0&&Ji(()=>t[10].call(l)),B(n,"class","form-control w-full max-w-xs mb-4"),B(r,"class","flex justify-center"),B(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(M,O){le(M,e,O),I(e,r),I(r,n),I(n,i),I(i,a),I(a,s),I(n,o),I(n,l),I(l,p),I(p,f);for(let N=0;N<h.length;N+=1)h[N]&&h[N].m(l,null);I(l,b),I(b,g),Oi(l,t[0],!0),I(e,D),C&&C.m(e,null),S||(y=ge(l,"change",t[10]),S=!0)},p(M,[O]){O&17&&d!==(d=M[0]===null)&&(p.selected=d),O&17&&(F=Object.entries(M[4]),h=Bn(h,O,A,1,M,F,v,l,Yn,bp,b,_p)),O&17&&_!==(_=M[0]==="new")&&(b.selected=_),O&17&&Oi(l,M[0]),M[0]?C?C.p(M,O):(C=Dp(M),C.c(),C.m(e,null)):C&&(C.d(1),C=null)},i:Pe,o:Pe,d(M){M&&k(e);for(let O=0;O<h.length;O+=1)h[O].d();C&&C.d(),S=!1,y()}}}function iB(t,e,r){let n;Ke(t,Ki,F=>r(4,n=F));let i=null,a="",s="",o=null;function l(F){r(3,o=F&&F!=="new"?{...n[F]}:F==="new"?{name:"New Slot Set",values:[]}:null),r(1,a=o?o.name:"")}function p(F){return Object.values(n).every(C=>C.name!==F)}function f(){if(o)if(i&&i!=="new")Ki.update(i,{...o,name:a});else{if(!p()){alert("Name already in use");return}const A=vo();Ki.update(A,{...o,name:a}),r(0,i=A)}}function d(){Ki.delete(i),r(1,a=""),r(2,s=""),r(0,i=null),r(3,o=null)}const h=pu((F,A)=>{if(!o||!i)return;const C=[...o.values];A.length===0?C.splice(F,1):C[F]=A,r(3,o.values=C,o),i!=="new"&&Ki.update(i,o)},1e3),v=pu(F=>{if(!o||!i)return;const A=[...o.values];F.length>0&&(A.push(F),r(3,o.values=A,o),r(2,s=""),i!=="new"&&Ki.update(i,o))},1e3);function b(){i=Hw(this),r(0,i)}function g(){a=this.value,r(1,a)}const _=()=>navigator.clipboard.writeText(qs(a)),D=(F,A)=>h(F,A.target.value);function S(){s=this.value,r(2,s)}const y=F=>v(F.target.value);return t.$$.update=()=>{t.$$.dirty&1&&l(i)},[i,a,s,o,n,p,f,d,h,v,b,g,_,D,S,y]}class aB extends ut{constructor(e){super(),st(this,e,iB,nB,ot,{})}}function uB(t){let e,r;return e=new eB({}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function sB(t){let e,r;return e=new aB({}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function oB(t){let e,r;return e=new $4({}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function lB(t){let e,r;return e=new D4({}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function fB(t){let e,r;return e=new m4({}),{c(){ze(e.$$.fragment)},l(n){qe(e.$$.fragment,n)},m(n,i){We(e,n,i),r=!0},i(n){r||(me(e.$$.fragment,n),r=!0)},o(n){we(e.$$.fragment,n),r=!1},d(n){He(e,n)}}}function cB(t){let e,r,n,i,a,s,o,l,p,f,d,h,v,b,g,_,D,S,y,F,A,C,M,O,N,q,Z,Q;A=new rB({});const V=[fB,lB,oB,sB,uB],L=[];function z(U,J){return U[0]==="select"?0:U[0]==="edit"?1:U[0]==="generate"?2:U[0]==="slots"?3:U[0]==="settings"?4:-1}return~(O=z(t))&&(N=L[O]=V[O](t)),{c(){e=H("div"),r=H("div"),n=H("div"),i=H("button"),a=Oe("Select"),o=Fe(),l=H("button"),p=Oe("Edit"),d=Fe(),h=H("button"),v=Oe("Generate"),g=Fe(),_=H("button"),D=Oe("Slots"),y=Fe(),F=H("button"),ze(A.$$.fragment),M=Fe(),N&&N.c(),this.h()},l(U){e=G(U,"DIV",{class:!0});var J=j(e);r=G(J,"DIV",{class:!0});var ie=j(r);n=G(ie,"DIV",{class:!0});var ae=j(n);i=G(ae,"BUTTON",{class:!0});var pe=j(i);a=Me(pe,"Select"),pe.forEach(k),o=Se(ae),l=G(ae,"BUTTON",{class:!0});var De=j(l);p=Me(De,"Edit"),De.forEach(k),d=Se(ae),h=G(ae,"BUTTON",{class:!0});var Ae=j(h);v=Me(Ae,"Generate"),Ae.forEach(k),g=Se(ae),_=G(ae,"BUTTON",{class:!0});var Be=j(_);D=Me(Be,"Slots"),Be.forEach(k),y=Se(ae),F=G(ae,"BUTTON",{class:!0});var je=j(F);qe(A.$$.fragment,je),je.forEach(k),ae.forEach(k),M=Se(ie),N&&N.l(ie),ie.forEach(k),J.forEach(k),this.h()},h(){B(i,"class",s=t[0]==="select"?"btn btn-active":"btn"),B(l,"class",f=t[0]==="edit"?"btn btn-active":"btn"),B(h,"class",b=t[0]==="generate"?"btn btn-active":"btn"),B(_,"class",S=t[0]==="slots"?"btn btn-active":"btn"),B(F,"class",C=t[0]==="settings"?"btn btn-active":"btn"),B(n,"class","btn-group btn-group-vertical sm:btn-group-horizontal bg-base-100 w-full flex justify-center p-2"),B(r,"class","h-screen overflow-y-auto flex flex-col"),B(e,"class","max-w-md w-1/2 h-screen")},m(U,J){le(U,e,J),I(e,r),I(r,n),I(n,i),I(i,a),I(n,o),I(n,l),I(l,p),I(n,d),I(n,h),I(h,v),I(n,g),I(n,_),I(_,D),I(n,y),I(n,F),We(A,F,null),I(r,M),~O&&L[O].m(r,null),q=!0,Z||(Q=[ge(i,"click",t[2]),ge(l,"click",t[3]),ge(h,"click",t[4]),ge(_,"click",t[5]),ge(F,"click",t[6])],Z=!0)},p(U,[J]){(!q||J&1&&s!==(s=U[0]==="select"?"btn btn-active":"btn"))&&B(i,"class",s),(!q||J&1&&f!==(f=U[0]==="edit"?"btn btn-active":"btn"))&&B(l,"class",f),(!q||J&1&&b!==(b=U[0]==="generate"?"btn btn-active":"btn"))&&B(h,"class",b),(!q||J&1&&S!==(S=U[0]==="slots"?"btn btn-active":"btn"))&&B(_,"class",S),(!q||J&1&&C!==(C=U[0]==="settings"?"btn btn-active":"btn"))&&B(F,"class",C);let ie=O;O=z(U),O!==ie&&(N&&(cr(),we(L[ie],1,1,()=>{L[ie]=null}),hr()),~O?(N=L[O],N||(N=L[O]=V[O](U),N.c()),me(N,1),N.m(r,null)):N=null)},i(U){q||(me(A.$$.fragment,U),me(N),q=!0)},o(U){we(A.$$.fragment,U),we(N),q=!1},d(U){U&&k(e),He(A),~O&&L[O].d(),Z=!1,$t(Q)}}}function hB(t,e,r){let n;Ke(t,ci,f=>r(0,n=f));function i(f){ci.update(f)}const a=()=>i("select"),s=()=>i("edit"),o=()=>i("generate"),l=()=>i("slots"),p=()=>i("settings");return t.$$.update=()=>{t.$$.dirty&1&&(n||ci.update("select"))},[n,i,a,s,o,l,p]}class dB extends ut{constructor(e){super(),st(this,e,hB,cB,ot,{})}}function pB(t){let e,r;return{c(){e=H("p"),r=Oe("Loading..."),this.h()},l(n){e=G(n,"P",{class:!0});var i=j(e);r=Me(i,"Loading..."),i.forEach(k),this.h()},h(){B(e,"class","text-lg")},m(n,i){le(n,e,i),I(e,r)},i:Pe,o:Pe,d(n){n&&k(e)}}}function vB(t){let e,r;return{c(){e=H("p"),r=Oe("This tool is not optimized for small screens or mobile devices."),this.h()},l(n){e=G(n,"P",{class:!0});var i=j(e);r=Me(i,"This tool is not optimized for small screens or mobile devices."),i.forEach(k),this.h()},h(){B(e,"class","text-lg")},m(n,i){le(n,e,i),I(e,r)},i:Pe,o:Pe,d(n){n&&k(e)}}}function gB(t){let e,r,n,i;return e=new dB({}),n=new c4({}),{c(){ze(e.$$.fragment),r=Fe(),ze(n.$$.fragment)},l(a){qe(e.$$.fragment,a),r=Se(a),qe(n.$$.fragment,a)},m(a,s){We(e,a,s),le(a,r,s),We(n,a,s),i=!0},i(a){i||(me(e.$$.fragment,a),me(n.$$.fragment,a),i=!0)},o(a){we(e.$$.fragment,a),we(n.$$.fragment,a),i=!1},d(a){He(e,a),a&&k(r),He(n,a)}}}function mB(t){let e,r,n,i,a,s;Ji(t[2]);const o=[gB,vB,pB],l=[];function p(f,d){return f[0]&&f[1]&&f[0]>1024&&f[1]>800?0:f[0]&&f[1]?1:2}return e=p(t),r=l[e]=o[e](t),{c(){r.c(),n=Pt()},l(f){r.l(f),n=Pt()},m(f,d){l[e].m(f,d),le(f,n,d),i=!0,a||(s=ge(window,"resize",t[2]),a=!0)},p(f,[d]){let h=e;e=p(f),e!==h&&(cr(),we(l[h],1,1,()=>{l[h]=null}),hr(),r=l[e],r||(r=l[e]=o[e](f),r.c()),me(r,1),r.m(n.parentNode,n))},i(f){i||(me(r),i=!0)},o(f){we(r),i=!1},d(f){l[e].d(f),f&&k(n),a=!1,s()}}}function _B(t,e,r){let n=null,i=null;function a(){r(0,n=window.innerWidth),r(1,i=window.innerHeight)}return[n,i,a]}class wB extends ut{constructor(e){super(),st(this,e,_B,mB,ot,{})}}export{wB as default};
