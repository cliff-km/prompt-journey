import{J as St,S as Ze,i as Je,s as Qe,k as W,q as we,a as Ee,l as H,m as U,r as ye,h as M,c as Ae,n as B,K as Ge,b as ue,G as k,L as De,H as Oe,M as Rt,I as je,N as pt,O as gt,y as Le,z as Re,A as Ue,g as oe,d as de,B as Ve,p as Ot,u as zt,P as P0,C as xa,v as Gt,f as Kt,D as Na,E as La,F as Ra,e as yt,Q as Pu,R as jn,T as Qn,o as lo,U as $c,V as Oa,W as Gc,X as vi,Y as ta,Z as an,_ as Gp,$ as pw,a0 as gw,a1 as Ma,a2 as Ii,a3 as vw}from"../chunks/index.4371e280.js";import{w as Yt,d as ku}from"../chunks/index.9c60ecb6.js";var Ar=(t=>(t.Single="single",t.Multi="multi",t.Magic="magic",t))(Ar||{}),$e=(t=>(t.Circle="circle",t.Ring="ring",t.Bars="bars",t.Embed="embed",t.EmbedGrid="embedGrid",t.EmbedRandom="embedRandom",t.Pie="pie",t.Random="random",t))($e||{}),br=(t=>(t.Build="build",t.Concept="concept",t.History="history",t))(br||{}),xs=(t=>(t.List="list",t.Map="map",t))(xs||{});const Vl="appStage";function mw(){const t=Yt(br.Build),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Vl]||br.Build),{subscribe:e,update:a=>{!a||!i||(localStorage[Vl]=a,r(a))},get:()=>St(t),delete:()=>{i&&(delete localStorage[Vl],r(br.Build))}}}const yc=mw();function _w(t){let e,r,n,i,a,o,s,l,h,c,f;return{c(){e=W("div"),r=W("button"),n=we("Build"),i=Ee(),a=W("button"),o=we("Concept"),s=Ee(),l=W("button"),h=we("History"),this.h()},l(p){e=H(p,"DIV",{class:!0});var g=U(e);r=H(g,"BUTTON",{class:!0});var b=U(r);n=ye(b,"Build"),b.forEach(M),i=Ae(g),a=H(g,"BUTTON",{class:!0});var v=U(a);o=ye(v,"Concept"),v.forEach(M),s=Ae(g),l=H(g,"BUTTON",{class:!0});var m=U(l);h=ye(m,"History"),m.forEach(M),g.forEach(M),this.h()},h(){B(r,"class","btn btn-sm"),Ge(r,"btn-active",t[0]===br.Build),B(a,"class","btn btn-sm"),Ge(a,"btn-active",t[0]===br.Concept),B(l,"class","btn btn-sm"),Ge(l,"btn-active",t[0]===br.History),B(e,"class","btn-group btn-group-horizontal p-2")},m(p,g){ue(p,e,g),k(e,r),k(r,n),k(e,i),k(e,a),k(a,o),k(e,s),k(e,l),k(l,h),c||(f=[De(r,"click",t[2]),De(a,"click",t[3]),De(l,"click",t[4])],c=!0)},p(p,[g]){g&1&&Ge(r,"btn-active",p[0]===br.Build),g&1&&Ge(a,"btn-active",p[0]===br.Concept),g&1&&Ge(l,"btn-active",p[0]===br.History)},i:Oe,o:Oe,d(p){p&&M(e),c=!1,Rt(f)}}}function bw(t,e,r){let n;je(t,yc,l=>r(0,n=l));function i(l){yc.update(l)}return[n,i,()=>i(br.Build),()=>i(br.Concept),()=>i(br.History)]}class Dw extends Ze{constructor(e){super(),Je(this,e,bw,_w,Qe,{})}}function ww(t){let e,r;return{c(){e=pt("svg"),r=pt("circle"),this.h()},l(n){e=gt(n,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var i=U(e);r=gt(i,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),U(r).forEach(M),i.forEach(M),this.h()},h(){B(r,"cx","25"),B(r,"cy","25"),B(r,"r","20"),B(r,"fill","rgba(255,255,255, 0.7)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-6 w-6"),B(e,"viewBox","0 0 50 50")},m(n,i){ue(n,e,i),k(e,r)},p:Oe,i:Oe,o:Oe,d(n){n&&M(e)}}}class yw extends Ze{constructor(e){super(),Je(this,e,null,ww,Qe,{})}}function Ew(t){let e,r,n,i,a,o;return{c(){e=pt("svg"),r=pt("circle"),n=pt("circle"),i=pt("circle"),a=pt("circle"),o=pt("circle"),this.h()},l(s){e=gt(s,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var l=U(e);r=gt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),U(r).forEach(M),n=gt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),U(n).forEach(M),i=gt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),U(i).forEach(M),a=gt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),U(a).forEach(M),o=gt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),U(o).forEach(M),l.forEach(M),this.h()},h(){B(r,"cx","20"),B(r,"cy","80"),B(r,"r","5"),B(r,"fill","rgba(255,255,255, 0.7)"),B(n,"cx","40"),B(n,"cy","40"),B(n,"r","5"),B(n,"fill","rgba(255,255,255, 0.7)"),B(i,"cx","70"),B(i,"cy","20"),B(i,"r","5"),B(i,"fill","rgba(255,255,255, 0.7)"),B(a,"cx","80"),B(a,"cy","60"),B(a,"r","5"),B(a,"fill","rgba(255,255,255, 0.7)"),B(o,"cx","60"),B(o,"cy","75"),B(o,"r","5"),B(o,"fill","rgba(255,255,255, 0.7)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-6 w-6"),B(e,"viewBox","0 0 100 100")},m(s,l){ue(s,e,l),k(e,r),k(e,n),k(e,i),k(e,a),k(e,o)},p:Oe,i:Oe,o:Oe,d(s){s&&M(e)}}}class Aw extends Ze{constructor(e){super(),Je(this,e,null,Ew,Qe,{})}}const jl="selectedPrompt";function Cw(){const t=Yt(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[jl]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[jl]=a,r(a))},get:()=>St(t),delete:()=>{i&&(delete localStorage[jl],r(""))}}}const ea=Cw();function Fw(){const t=Yt({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith("prompt_")){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=St(t),h={...s[a]||{},...o};i&&(localStorage[`prompt_${a}`]=JSON.stringify(h));const c={...s,[a]:h};r(c)},get:a=>St(t)[a],delete:a=>{i&&delete localStorage[`prompt_${a}`];const o={...St(t)};delete o[a],r(o)}}}const wu=Fw(),Sw=ku(wu,t=>Object.entries(St(wu))),ws="activePrompt";function Tr(t,e,r,n=1){return{id:t,text:e,barWeight:n,parsedWeight:r,randomWeight:Math.random()}}function k0(){return{0:Tr(0,"Magic potion in a mystical bottle",1),1:Tr(1,"A crystalline decanter",1),2:Tr(2,"An ornate tequila bottle",1),3:Tr(3,"An antique sake bottle",1),4:Tr(4,"A colorful perfume bottle",1),5:Tr(5,"A glass vase full of vibrant flowers",1),6:Tr(6,"A minimalist glass tea kettle",1),7:Tr(7,"Chihuly glass art",1),8:Tr(8,"A fine wine bottle",1),9:Tr(9,"A gourmet vinegar bottle",1),10:Tr(10,"A stunning fishbowl",1),11:Tr(11,"A striking piece of tourmaline",1),12:Tr(12,"A finely cut piece of sapphire",1),13:Tr(13,"Iittala glass art",1)}}function Mi(t,e,r=$e.Random){return{weightedPrompts:t||{},weightMode:r,pieAngles:{},ringAngles:{},ringStartAngle:0,ringReverse:!1,ringWeightScaling:2,ringExponentialScaling:!0,circleAngles:{},circleMarker:[270,.33],circleWeightScaling:2,circleExponentialScaling:!0,embedWeightScaling:2,embedExponentialScaling:!0,embedClusters:0,promptLimit:e>Object.keys(t).length?Object.keys(t).length:e}}function Bw(){const t=Yt({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",a=i&&localStorage[ws]?JSON.parse(localStorage[ws]):Mi(k0(),30);return r({...Mi({},30),...a}),{subscribe:e,update:o=>{const s=ea.get();s&&wu.update(s,o),!(!o||!i)&&(localStorage[ws]=JSON.stringify(o),r({...Mi({},30),...o}))},get:()=>St(t),delete:()=>{i&&(delete localStorage[ws],r(Mi(k0(),30)))}}}const Ye=Bw();function Ow(t){let e,r,n,i;return{c(){e=pt("svg"),r=pt("path"),n=pt("path"),i=pt("path"),this.h()},l(a){e=gt(a,"svg",{class:!0,fill:!0,viewBox:!0,version:!0,xmlns:!0});var o=U(e);r=gt(o,"path",{d:!0}),U(r).forEach(M),n=gt(o,"path",{d:!0}),U(n).forEach(M),i=gt(o,"path",{d:!0}),U(i).forEach(M),o.forEach(M),this.h()},h(){B(r,"d","M341.333333 385.706667c-11.946667 0-22.186667-4.266667-30.72-12.8-7.970133-7.970133-11.946667-17.92-11.946666-29.866667s3.976533-22.186667 11.946666-30.72c8.533333-7.953067 18.773333-11.946667 30.72-11.946667s21.896533 3.976533 29.866667 11.946667c8.533333 8.533333 12.8 18.773333 12.8 30.72s-4.266667 21.896533-12.8 29.866667c-7.970133 8.533333-17.92 12.8-29.866667 12.8z m128-213.333334c11.946667 0 21.896533 3.976533 29.866667 11.946667 8.533333 8.533333 12.8 18.773333 12.8 30.72s-4.266667 21.896533-12.8 29.866667c-7.970133 8.533333-17.92 12.8-29.866667 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.970133-11.946667-17.92-11.946666-29.866667s3.976533-22.186667 11.946666-30.72c8.533333-7.970133 18.773333-11.946667 30.72-11.946667zM243.2 500.906667c-7.970133 8.533333-17.92 12.8-29.866667 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.970133-11.946667-17.92-11.946666-29.866667s3.976533-22.186667 11.946666-30.72c8.533333-7.953067 18.773333-11.946667 30.72-11.946667s21.896533 3.976533 29.866667 11.946667c8.533333 8.533333 12.8 18.773333 12.8 30.72s-4.266667 21.896533-12.8 29.866667z"),B(n,"d","M512 954.026667c-27.0336-0.682667-50.176-10.683733-69.239467-29.730134-19.3024-19.3536-30.429867-42.666667-33.0752-69.2736L409.6 616.106667H170.666667c-27.0336-0.682667-50.176-10.683733-69.239467-29.730134-19.285333-19.319467-30.4128-42.615467-33.0752-69.256533L68.266667 169.813333c2.082133-27.562667 12.629333-50.414933 31.4368-69.239466 19.626667-19.626667 43.3664-29.917867 70.536533-30.583467h344.302933c27.016533 0.682667 50.158933 10.666667 69.239467 29.730133 19.643733 19.626667 29.934933 43.349333 30.6176 70.519467V407.893333h241.493333c27.050667 0.7168 50.176 10.7008 69.239467 29.7472 19.6096 19.626667 29.917867 43.3664 30.600533 70.519467V854.186667c-2.065067 27.5456-12.612267 50.397867-31.453866 69.256533-19.643733 19.626667-43.3664 29.917867-70.536534 30.600533H512z m-68.266667-354.986667V853.333333c1.792 17.152 9.403733 33.041067 23.176534 46.848 12.817067 12.817067 27.716267 19.268267 45.5168 19.712H853.333333c17.937067-0.443733 33.399467-7.202133 46.813867-20.599466 13.073067-13.090133 20.1216-28.279467 21.504-46.421334L921.6 508.586667c-0.443733-17.954133-7.202133-33.399467-20.599467-46.813867-12.834133-12.817067-27.733333-19.285333-45.550933-19.7632L512 442.026667c-17.937067 0.4608-33.399467 7.202133-46.830933 20.616533-13.056 13.073067-20.087467 28.245333-21.486934 46.404267L443.733333 599.04zM123.8528 124.706133c-13.073067 13.073067-20.104533 28.2624-21.504 46.421334L102.4 515.413333c1.792 17.169067 9.403733 33.058133 23.159467 46.813867 12.817067 12.834133 27.733333 19.285333 45.533866 19.729067H409.6v-74.24c2.082133-27.562667 12.629333-50.414933 31.4368-69.239467 19.643733-19.6096 43.3664-29.9008 70.519467-30.583467h68.693333V170.666667c-0.443733-17.954133-7.202133-33.399467-20.599467-46.813867-12.834133-12.8512-27.733333-19.3024-45.5168-19.746133H170.666667c-17.954133 0.443733-33.399467 7.185067-46.813867 20.599466z"),B(i,"d","M840.533333 522.24c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.9872-7.953067-11.946667-17.92-11.946667-29.866667s3.959467-22.203733 11.946667-30.737067c8.533333-7.970133 18.773333-11.963733 30.72-11.963733s21.896533 4.027733 29.866666 11.9808z m0 128c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.9872-7.953067-11.946667-17.92-11.946667-29.866667s3.959467-22.203733 11.946667-30.737067c8.533333-7.970133 18.773333-11.9296 30.72-11.9296s21.896533 3.9936 29.866666 11.946667z m-60.586666 128c8.533333-7.953067 18.773333-11.9296 30.72-11.9296s21.896533 3.976533 29.866666 11.9296c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.9872-7.953067-11.946667-17.92-11.946667-29.866667s3.959467-22.186667 11.946667-30.72zM597.333333 552.96c0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.953067-11.946667-17.92-11.946667-29.866667s3.976533-22.203733 11.946667-30.737067c8.533333-7.970133 18.773333-11.963733 30.72-11.963733s21.896533 3.9936 29.866666 11.963733c8.533333 8.5504 12.8 18.7904 12.8 30.737067z m-73.386666 225.28c8.533333-7.953067 18.773333-11.9296 30.72-11.9296s21.896533 3.976533 29.866666 11.9296c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.953067-11.946667-17.92-11.946667-29.866667s3.976533-22.186667 11.946667-30.72z m-11.946667-97.28c0-11.946667 3.976533-22.203733 11.946667-30.737067 8.533333-7.970133 18.773333-11.9296 30.72-11.9296s21.896533 3.959467 29.866666 11.9296c8.533333 8.5504 12.8 18.7904 12.8 30.737067 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.953067-11.946667-17.92-11.946667-29.866667z"),B(e,"class","h-5 w-5"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"viewBox","0 0 1024 1024"),B(e,"version","1.1"),B(e,"xmlns","http://www.w3.org/2000/svg")},m(a,o){ue(a,e,o),k(e,r),k(e,n),k(e,i)},p:Oe,i:Oe,o:Oe,d(a){a&&M(e)}}}class Mw extends Ze{constructor(e){super(),Je(this,e,null,Ow,Qe,{})}}function Pw(t){let e,r,n,i,a,o,s,l,h,c,f,p;return n=new Mw({}),o=new yw({}),h=new Aw({}),{c(){e=W("div"),r=W("button"),Le(n.$$.fragment),i=Ee(),a=W("button"),Le(o.$$.fragment),s=Ee(),l=W("button"),Le(h.$$.fragment),this.h()},l(g){e=H(g,"DIV",{class:!0});var b=U(e);r=H(b,"BUTTON",{class:!0});var v=U(r);Re(n.$$.fragment,v),v.forEach(M),i=Ae(b),a=H(b,"BUTTON",{class:!0});var m=U(a);Re(o.$$.fragment,m),m.forEach(M),s=Ae(b),l=H(b,"BUTTON",{class:!0});var D=U(l);Re(h.$$.fragment,D),D.forEach(M),b.forEach(M),this.h()},h(){B(r,"class","btn btn-sm"),Ge(r,"btn-active",t[0].weightMode===$e.Random),B(a,"class","btn btn-sm"),Ge(a,"btn-active",t[0].weightMode===$e.Circle||t[0].weightMode===$e.Pie||t[0].weightMode===$e.Ring),B(l,"class","btn btn-sm"),Ge(l,"btn-active",t[0].weightMode===$e.Embed||t[0].weightMode===$e.EmbedGrid||t[0].weightMode===$e.EmbedRandom),B(e,"class","btn-group btn-group-horizontal w-full flex justify-end p-2")},m(g,b){ue(g,e,b),k(e,r),Ue(n,r,null),k(e,i),k(e,a),Ue(o,a,null),k(e,s),k(e,l),Ue(h,l,null),c=!0,f||(p=[De(r,"click",t[2]),De(a,"click",t[3]),De(l,"click",t[4])],f=!0)},p(g,[b]){(!c||b&1)&&Ge(r,"btn-active",g[0].weightMode===$e.Random),(!c||b&1)&&Ge(a,"btn-active",g[0].weightMode===$e.Circle||g[0].weightMode===$e.Pie||g[0].weightMode===$e.Ring),(!c||b&1)&&Ge(l,"btn-active",g[0].weightMode===$e.Embed||g[0].weightMode===$e.EmbedGrid||g[0].weightMode===$e.EmbedRandom)},i(g){c||(oe(n.$$.fragment,g),oe(o.$$.fragment,g),oe(h.$$.fragment,g),c=!0)},o(g){de(n.$$.fragment,g),de(o.$$.fragment,g),de(h.$$.fragment,g),c=!1},d(g){g&&M(e),Ve(n),Ve(o),Ve(h),f=!1,Rt(p)}}}function kw(t,e,r){let n;je(t,Ye,l=>r(0,n=l));function i(l){const h={...n,weightMode:l};Ye.update(h)}return[n,i,()=>i($e.Random),()=>i($e.Pie),()=>i($e.EmbedGrid)]}class Tw extends Ze{constructor(e){super(),Je(this,e,kw,Pw,Qe,{})}}function Iw(t){let e,r,n,i;return{c(){e=pt("svg"),r=pt("path"),n=pt("path"),i=pt("path"),this.h()},l(a){e=gt(a,"svg",{xmlns:!0,class:!0,viewBox:!0});var o=U(e);r=gt(o,"path",{d:!0,fill:!0}),U(r).forEach(M),n=gt(o,"path",{d:!0,fill:!0}),U(n).forEach(M),i=gt(o,"path",{d:!0,fill:!0}),U(i).forEach(M),o.forEach(M),this.h()},h(){B(r,"d","M50 50 L50 10 A40 40 0 0 1 90 50 z"),B(r,"fill","rgba(255,255,255, 0.7)"),B(n,"d","M50 50 L90 50 A40 40 0 0 1 50 90 z"),B(n,"fill","rgba(255,255,255, 0.3)"),B(i,"d","M50 50 L50 90 A40 40 0 0 1 10 50 z"),B(i,"fill","rgba(255,255,255, 0.9)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"class","h-5 w-5"),B(e,"viewBox","0 0 100 100")},m(a,o){ue(a,e,o),k(e,r),k(e,n),k(e,i)},p:Oe,i:Oe,o:Oe,d(a){a&&M(e)}}}class xw extends Ze{constructor(e){super(),Je(this,e,null,Iw,Qe,{})}}function Nw(t){let e,r,n;return{c(){e=pt("svg"),r=pt("circle"),n=pt("circle"),this.h()},l(i){e=gt(i,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var a=U(e);r=gt(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),U(r).forEach(M),n=gt(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),U(n).forEach(M),a.forEach(M),this.h()},h(){B(r,"cx","25"),B(r,"cy","25"),B(r,"r","20"),B(r,"stroke","rgba(255,255,255, 0.7)"),B(r,"stroke-width","4"),B(r,"fill","none"),B(n,"cx","25"),B(n,"cy","25"),B(n,"r","4"),B(n,"stroke","rgba(255,255,255, 0.7)"),B(n,"stroke-width","1"),B(n,"fill","rgba(255,255,255, 0.7)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-5 w-5"),B(e,"viewBox","0 0 50 50")},m(i,a){ue(i,e,a),k(e,r),k(e,n)},p:Oe,i:Oe,o:Oe,d(i){i&&M(e)}}}class Lw extends Ze{constructor(e){super(),Je(this,e,null,Nw,Qe,{})}}function Rw(t){let e,r,n,i,a;return{c(){e=pt("svg"),r=pt("mask"),n=pt("circle"),i=pt("path"),a=pt("circle"),this.h()},l(o){e=gt(o,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var s=U(e);r=gt(s,"mask",{id:!0});var l=U(r);n=gt(l,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),U(n).forEach(M),i=gt(l,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),U(i).forEach(M),l.forEach(M),a=gt(s,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,mask:!0}),U(a).forEach(M),s.forEach(M),this.h()},h(){B(n,"cx","25"),B(n,"cy","25"),B(n,"r","20"),B(n,"stroke","white"),B(n,"stroke-width","6"),B(n,"fill","none"),B(i,"d","M40,22 L45,27 L50,22"),B(i,"stroke","black"),B(i,"stroke-width","4"),B(i,"fill","none"),B(r,"id","hole"),B(a,"cx","25"),B(a,"cy","25"),B(a,"r","20"),B(a,"stroke","rgba(255,255,255, 0.7)"),B(a,"stroke-width","4"),B(a,"fill","none"),B(a,"mask","url(#hole)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-5 w-5"),B(e,"viewBox","0 0 50 50")},m(o,s){ue(o,e,s),k(e,r),k(r,n),k(r,i),k(e,a)},p:Oe,i:Oe,o:Oe,d(o){o&&M(e)}}}class Uw extends Ze{constructor(e){super(),Je(this,e,null,Rw,Qe,{})}}function Vw(t){let e,r,n,i,a,o,s,l,h,c,f,p;return n=new xw({}),o=new Lw({}),h=new Uw({}),{c(){e=W("div"),r=W("button"),Le(n.$$.fragment),i=Ee(),a=W("button"),Le(o.$$.fragment),s=Ee(),l=W("button"),Le(h.$$.fragment),this.h()},l(g){e=H(g,"DIV",{class:!0});var b=U(e);r=H(b,"BUTTON",{class:!0});var v=U(r);Re(n.$$.fragment,v),v.forEach(M),i=Ae(b),a=H(b,"BUTTON",{class:!0});var m=U(a);Re(o.$$.fragment,m),m.forEach(M),s=Ae(b),l=H(b,"BUTTON",{class:!0});var D=U(l);Re(h.$$.fragment,D),D.forEach(M),b.forEach(M),this.h()},h(){B(r,"class","btn btn-xs"),Ge(r,"btn-active",t[0].weightMode===$e.Pie),B(a,"class","btn btn-xs"),Ge(a,"btn-active",t[0].weightMode===$e.Circle),B(l,"class","btn btn-xs"),Ge(l,"btn-active",t[0].weightMode===$e.Ring),B(e,"class","btn-group btn-group-horizontal w-full flex justify-center p-1")},m(g,b){ue(g,e,b),k(e,r),Ue(n,r,null),k(e,i),k(e,a),Ue(o,a,null),k(e,s),k(e,l),Ue(h,l,null),c=!0,f||(p=[De(r,"click",t[2]),De(a,"click",t[3]),De(l,"click",t[4])],f=!0)},p(g,[b]){(!c||b&1)&&Ge(r,"btn-active",g[0].weightMode===$e.Pie),(!c||b&1)&&Ge(a,"btn-active",g[0].weightMode===$e.Circle),(!c||b&1)&&Ge(l,"btn-active",g[0].weightMode===$e.Ring)},i(g){c||(oe(n.$$.fragment,g),oe(o.$$.fragment,g),oe(h.$$.fragment,g),c=!0)},o(g){de(n.$$.fragment,g),de(o.$$.fragment,g),de(h.$$.fragment,g),c=!1},d(g){g&&M(e),Ve(n),Ve(o),Ve(h),f=!1,Rt(p)}}}function jw(t,e,r){let n;je(t,Ye,l=>r(0,n=l));function i(l){const h={...n,weightMode:l};Ye.update(h)}return[n,i,()=>i($e.Pie),()=>i($e.Circle),()=>i($e.Ring)]}class zw extends Ze{constructor(e){super(),Je(this,e,jw,Vw,Qe,{})}}function qw(t){let e,r,n,i,a,o,s,l,h,c,f;return{c(){e=W("div"),r=W("button"),n=we("Random"),i=Ee(),a=W("button"),o=we("Grid"),s=Ee(),l=W("button"),h=we("Embed"),this.h()},l(p){e=H(p,"DIV",{class:!0});var g=U(e);r=H(g,"BUTTON",{class:!0});var b=U(r);n=ye(b,"Random"),b.forEach(M),i=Ae(g),a=H(g,"BUTTON",{class:!0});var v=U(a);o=ye(v,"Grid"),v.forEach(M),s=Ae(g),l=H(g,"BUTTON",{class:!0});var m=U(l);h=ye(m,"Embed"),m.forEach(M),g.forEach(M),this.h()},h(){B(r,"class","btn btn-xs"),Ge(r,"btn-active",t[0].weightMode===$e.EmbedRandom),B(a,"class","btn btn-xs"),Ge(a,"btn-active",t[0].weightMode===$e.EmbedGrid),B(l,"class","btn btn-xs"),Ge(l,"btn-active",t[0].weightMode===$e.Embed),B(e,"class","btn-group btn-group-horizontal w-full flex justify-center p-1")},m(p,g){ue(p,e,g),k(e,r),k(r,n),k(e,i),k(e,a),k(a,o),k(e,s),k(e,l),k(l,h),c||(f=[De(r,"click",t[2]),De(a,"click",t[3]),De(l,"click",t[4])],c=!0)},p(p,[g]){g&1&&Ge(r,"btn-active",p[0].weightMode===$e.EmbedRandom),g&1&&Ge(a,"btn-active",p[0].weightMode===$e.EmbedGrid),g&1&&Ge(l,"btn-active",p[0].weightMode===$e.Embed)},i:Oe,o:Oe,d(p){p&&M(e),c=!1,Rt(f)}}}function Ww(t,e,r){let n;je(t,Ye,l=>r(0,n=l));function i(l){const h={...n,weightMode:l};Ye.update(h)}return[n,i,()=>i($e.EmbedRandom),()=>i($e.EmbedGrid),()=>i($e.Embed)]}class Hw extends Ze{constructor(e){super(),Je(this,e,Ww,qw,Qe,{})}}function Ec(){return Ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ec.apply(this,arguments)}var Kp={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function rr(t){return typeof t=="number"}function Bn(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function Yp(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function Zp(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Jp(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Yn(t){return typeof t=="string"}var er=Array.isArray;function Zr(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Ns(t){return Array.isArray(t)||Zr(t)}function $w(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Gw(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Kw(t){return t&&t.constructor.prototype.isRange===!0||!1}function Kc(t){return t&&t.constructor.prototype.isIndex===!0||!1}function Yw(t){return typeof t=="boolean"}function Zw(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function Jw(t){return t&&t.constructor.prototype.isHelp===!0||!1}function Qw(t){return typeof t=="function"}function Xw(t){return t instanceof Date}function ey(t){return t instanceof RegExp}function ty(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!Yp(t)&&!Zp(t))}function ry(t){return t===null}function Yc(t){return t===void 0}function ny(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function iy(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function ay(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function uy(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function sy(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function oy(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function ly(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function cy(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function fy(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function hy(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function dy(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function py(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function gy(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function vy(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function my(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function _y(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function by(t){return t&&t.constructor.prototype.isChain===!0||!1}function Du(t){var e=typeof t;return e==="object"?t===null?"null":Bn(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Cr(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return Cr(r)});if(t instanceof Date)return new Date(t.valueOf());if(Bn(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return Dy(t,Cr)}function Dy(t,e){var r={};for(var n in t)yu(t,n)&&(r[n]=e(t[n]));return r}function wy(t,e){for(var r in e)yu(e,r)&&(t[r]=e[r]);return t}function Ls(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!Ls(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!Ls(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function yu(t,e){return t&&Object.hasOwnProperty.call(t,e)}function yy(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],a=t[i];a!==void 0&&(r[i]=a)}return r}var Ey=["Matrix","Array"],Ay=["number","BigNumber","Fraction"],co=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Kp)};Ec(co,Kp,{MATRIX_OPTIONS:Ey,NUMBER_OPTIONS:Ay});function Nn(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Cy(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(h){throw h},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){r=r.call(t)},n:function(){var h=r.next();return a=h.done,h},e:function(h){o=!0,s=h},f:function(){try{!a&&r.return!=null&&r.return()}finally{if(o)throw s}}}}function Cy(t,e){if(t){if(typeof t=="string")return T0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T0(t,e)}}function T0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ca(t){return Ca=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ca(t)}function I0(){return!0}function Sn(){return!1}function wa(){}var x0="Argument is not a typed-function.";function Qp(){function t(K){return Ca(K)==="object"&&K!==null&&K.constructor===Object}var e=[{name:"number",test:function(Q){return typeof Q=="number"}},{name:"string",test:function(Q){return typeof Q=="string"}},{name:"boolean",test:function(Q){return typeof Q=="boolean"}},{name:"Function",test:function(Q){return typeof Q=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(Q){return Q instanceof Date}},{name:"RegExp",test:function(Q){return Q instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(Q){return Q===null}},{name:"undefined",test:function(Q){return Q===void 0}}],r={name:"any",test:I0,isAny:!0},n,i,a=0,o={createCount:0};function s(K){var Q=n.get(K);if(Q)return Q;var ie='Unknown type "'+K+'"',me=K.toLowerCase(),se,Ce=Nn(i),ce;try{for(Ce.s();!(ce=Ce.n()).done;)if(se=ce.value,se.toLowerCase()===me){ie+='. Did you mean "'+se+'" ?';break}}catch(pe){Ce.e(pe)}finally{Ce.f()}throw new TypeError(ie)}function l(K){for(var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",ie=Q?s(Q).index:i.length,me=[],se=0;se<K.length;++se){if(!K[se]||typeof K[se].name!="string"||typeof K[se].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var Ce=K[se].name;if(n.has(Ce))throw new TypeError('Duplicate type name "'+Ce+'"');me.push(Ce),n.set(Ce,{name:Ce,test:K[se].test,isAny:K[se].isAny,index:ie+se,conversionsTo:[]})}var ce=i.slice(ie);i=i.slice(0,ie).concat(me).concat(ce);for(var pe=ie+me.length;pe<i.length;++pe)n.get(i[pe]).index=pe}function h(){n=new Map,i=[],a=0,l([r],!1)}h(),l(e);function c(){var K,Q=Nn(i),ie;try{for(Q.s();!(ie=Q.n()).done;)K=ie.value,n.get(K).conversionsTo=[]}catch(me){Q.e(me)}finally{Q.f()}a=0}function f(K){var Q=i.filter(function(ie){var me=n.get(ie);return!me.isAny&&me.test(K)});return Q.length?Q:["any"]}function p(K){return K&&typeof K=="function"&&"_typedFunctionData"in K}function g(K,Q,ie){if(!p(K))throw new TypeError(x0);var me=ie&&ie.exact,se=Array.isArray(Q)?Q.join(","):Q,Ce=A(se),ce=m(Ce);if(!me||ce in K.signatures){var pe=K._typedFunctionData.signatureMap.get(ce);if(pe)return pe}var Te=Ce.length,We;if(me){We=[];var lt;for(lt in K.signatures)We.push(K._typedFunctionData.signatureMap.get(lt))}else We=K._typedFunctionData.signatures;for(var xe=0;xe<Te;++xe){var Zt=Ce[xe],Vt=[],nr=void 0,Jt=Nn(We),Dr;try{for(Jt.s();!(Dr=Jt.n()).done;){nr=Dr.value;var Qt=F(nr.params,xe);if(!(!Qt||Zt.restParam&&!Qt.restParam)){if(!Qt.hasAny){var wr=function(){var gr=y(Qt);if(Zt.types.some(function(Mn){return!gr.has(Mn.name)}))return"continue"}();if(wr==="continue")continue}Vt.push(nr)}}}catch(gr){Jt.e(gr)}finally{Jt.f()}if(We=Vt,We.length===0)break}var fr,hr=Nn(We),vn;try{for(hr.s();!(vn=hr.n()).done;)if(fr=vn.value,fr.params.length<=Te)return fr}catch(gr){hr.e(gr)}finally{hr.f()}throw new TypeError("Signature not found (signature: "+(K.name||"unnamed")+"("+m(Ce,", ")+"))")}function b(K,Q,ie){return g(K,Q,ie).implementation}function v(K,Q){var ie=s(Q);if(ie.test(K))return K;var me=ie.conversionsTo;if(me.length===0)throw new Error("There are no conversions to "+Q+" defined.");for(var se=0;se<me.length;se++){var Ce=s(me[se].from);if(Ce.test(K))return me[se].convert(K)}throw new Error("Cannot convert "+K+" to "+Q)}function m(K){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return K.map(function(ie){return ie.name}).join(Q)}function D(K){var Q=K.indexOf("...")===0,ie=Q?K.length>3?K.slice(3):"any":K,me=ie.split("|").map(function(pe){return s(pe.trim())}),se=!1,Ce=Q?"...":"",ce=me.map(function(pe){return se=pe.isAny||se,Ce+=pe.name+"|",{name:pe.name,typeIndex:pe.index,test:pe.test,isAny:pe.isAny,conversion:null,conversionIndex:-1}});return{types:ce,name:Ce.slice(0,-1),hasAny:se,hasConversion:!1,restParam:Q}}function S(K){var Q=K.types.map(function(ce){return ce.name}),ie=Z(Q),me=K.hasAny,se=K.name,Ce=ie.map(function(ce){var pe=s(ce.from);return me=pe.isAny||me,se+="|"+ce.from,{name:ce.from,typeIndex:pe.index,test:pe.test,isAny:pe.isAny,conversion:ce,conversionIndex:ce.index}});return{types:K.types.concat(Ce),name:se,hasAny:me,hasConversion:Ce.length>0,restParam:K.restParam}}function y(K){return K.typeSet||(K.typeSet=new Set,K.types.forEach(function(Q){return K.typeSet.add(Q.name)})),K.typeSet}function A(K){var Q=[];if(typeof K!="string")throw new TypeError("Signatures must be strings");var ie=K.trim();if(ie==="")return Q;for(var me=ie.split(","),se=0;se<me.length;++se){var Ce=D(me[se].trim());if(Ce.restParam&&se!==me.length-1)throw new SyntaxError('Unexpected rest parameter "'+me[se]+'": only allowed for the last parameter');if(Ce.types.length===0)return null;Q.push(Ce)}return Q}function C(K){var Q=at(K);return Q?Q.restParam:!1}function P(K){if(!K||K.types.length===0)return I0;if(K.types.length===1)return s(K.types[0].name).test;if(K.types.length===2){var Q=s(K.types[0].name).test,ie=s(K.types[1].name).test;return function(Ce){return Q(Ce)||ie(Ce)}}else{var me=K.types.map(function(se){return s(se.name).test});return function(Ce){for(var ce=0;ce<me.length;ce++)if(me[ce](Ce))return!0;return!1}}}function O(K){var Q,ie,me;if(C(K)){Q=it(K).map(P);var se=Q.length,Ce=P(at(K)),ce=function(Te){for(var We=se;We<Te.length;We++)if(!Ce(Te[We]))return!1;return!0};return function(Te){for(var We=0;We<Q.length;We++)if(!Q[We](Te[We]))return!1;return ce(Te)&&Te.length>=se+1}}else return K.length===0?function(Te){return Te.length===0}:K.length===1?(ie=P(K[0]),function(Te){return ie(Te[0])&&Te.length===1}):K.length===2?(ie=P(K[0]),me=P(K[1]),function(Te){return ie(Te[0])&&me(Te[1])&&Te.length===2}):(Q=K.map(P),function(Te){for(var We=0;We<Q.length;We++)if(!Q[We](Te[We]))return!1;return Te.length===Q.length})}function F(K,Q){return Q<K.length?K[Q]:C(K)?at(K):null}function x(K,Q){var ie=F(K,Q);return ie?y(ie):new Set}function z(K){return K.conversion===null||K.conversion===void 0}function G(K,Q){var ie=new Set;return K.forEach(function(me){var se=x(me.params,Q),Ce,ce=Nn(se),pe;try{for(ce.s();!(pe=ce.n()).done;)Ce=pe.value,ie.add(Ce)}catch(Te){ce.e(Te)}finally{ce.f()}}),ie.has("any")?["any"]:Array.from(ie)}function J(K,Q,ie){var me,se,Ce=K||"unnamed",ce=ie,pe,Te=function(){var Jt=[];if(ce.forEach(function(Qt){var wr=F(Qt.params,pe),fr=P(wr);(pe<Qt.params.length||C(Qt.params))&&fr(Q[pe])&&Jt.push(Qt)}),Jt.length===0){if(se=G(ce,pe),se.length>0){var Dr=f(Q[pe]);return me=new TypeError("Unexpected type of argument in function "+Ce+" (expected: "+se.join(" or ")+", actual: "+Dr.join(" | ")+", index: "+pe+")"),me.data={category:"wrongType",fn:Ce,index:pe,actual:Dr,expected:se},{v:me}}}else ce=Jt};for(pe=0;pe<Q.length;pe++){var We=Te();if(Ca(We)==="object")return We.v}var lt=ce.map(function(nr){return C(nr.params)?1/0:nr.params.length});if(Q.length<Math.min.apply(null,lt))return se=G(ce,pe),me=new TypeError("Too few arguments in function "+Ce+" (expected: "+se.join(" or ")+", index: "+Q.length+")"),me.data={category:"tooFewArgs",fn:Ce,index:Q.length,expected:se},me;var xe=Math.max.apply(null,lt);if(Q.length>xe)return me=new TypeError("Too many arguments in function "+Ce+" (expected: "+xe+", actual: "+Q.length+")"),me.data={category:"tooManyArgs",fn:Ce,index:Q.length,expectedLength:xe},me;for(var Zt=[],Vt=0;Vt<Q.length;++Vt)Zt.push(f(Q[Vt]).join("|"));return me=new TypeError('Arguments of type "'+Zt.join(", ")+'" do not match any of the defined signatures of function '+Ce+"."),me.data={category:"mismatch",actual:Zt},me}function R(K){for(var Q=i.length+1,ie=0;ie<K.types.length;ie++)z(K.types[ie])&&(Q=Math.min(Q,K.types[ie].typeIndex));return Q}function N(K){for(var Q=a+1,ie=0;ie<K.types.length;ie++)z(K.types[ie])||(Q=Math.min(Q,K.types[ie].conversionIndex));return Q}function j(K,Q){if(K.hasAny){if(!Q.hasAny)return 1}else if(Q.hasAny)return-1;if(K.restParam){if(!Q.restParam)return 1}else if(Q.restParam)return-1;if(K.hasConversion){if(!Q.hasConversion)return 1}else if(Q.hasConversion)return-1;var ie=R(K)-R(Q);if(ie<0)return-1;if(ie>0)return 1;var me=N(K)-N(Q);return me<0?-1:me>0?1:0}function q(K,Q){var ie=K.params,me=Q.params,se=at(ie),Ce=at(me),ce=C(ie),pe=C(me);if(ce&&se.hasAny){if(!pe||!Ce.hasAny)return 1}else if(pe&&Ce.hasAny)return-1;var Te=0,We=0,lt,xe=Nn(ie),Zt;try{for(xe.s();!(Zt=xe.n()).done;)lt=Zt.value,lt.hasAny&&++Te,lt.hasConversion&&++We}catch(zn){xe.e(zn)}finally{xe.f()}var Vt=0,nr=0,Jt=Nn(me),Dr;try{for(Jt.s();!(Dr=Jt.n()).done;)lt=Dr.value,lt.hasAny&&++Vt,lt.hasConversion&&++nr}catch(zn){Jt.e(zn)}finally{Jt.f()}if(Te!==Vt)return Te-Vt;if(ce&&se.hasConversion){if(!pe||!Ce.hasConversion)return 1}else if(pe&&Ce.hasConversion)return-1;if(We!==nr)return We-nr;if(ce){if(!pe)return 1}else if(pe)return-1;var Qt=(ie.length-me.length)*(ce?-1:1);if(Qt!==0)return Qt;for(var wr=[],fr=0,hr=0;hr<ie.length;++hr){var vn=j(ie[hr],me[hr]);wr.push(vn),fr+=vn}if(fr!==0)return fr;for(var gr,Mn=0,ei=wr;Mn<ei.length;Mn++)if(gr=ei[Mn],gr!==0)return gr;return 0}function Z(K){if(K.length===0)return[];var Q=K.map(s);K.length>1&&Q.sort(function(Te,We){return Te.index-We.index});var ie=Q[0].conversionsTo;if(K.length===1)return ie;ie=ie.concat([]);for(var me=new Set(K),se=1;se<Q.length;++se){var Ce=void 0,ce=Nn(Q[se].conversionsTo),pe;try{for(ce.s();!(pe=ce.n()).done;)Ce=pe.value,me.has(Ce.from)||(ie.push(Ce),me.add(Ce.from))}catch(Te){ce.e(Te)}finally{ce.f()}}return ie}function X(K,Q){var ie=Q;if(K.some(function(pe){return pe.hasConversion})){var me=C(K),se=K.map(te);ie=function(){for(var Te=[],We=me?arguments.length-1:arguments.length,lt=0;lt<We;lt++)Te[lt]=se[lt](arguments[lt]);return me&&(Te[We]=arguments[We].map(se[We])),Q.apply(this,Te)}}var Ce=ie;if(C(K)){var ce=K.length-1;Ce=function(){return ie.apply(this,et(arguments,0,ce).concat([et(arguments,ce)]))}}return Ce}function te(K){var Q,ie,me,se,Ce=[],ce=[];switch(K.types.forEach(function(pe){pe.conversion&&(Ce.push(s(pe.conversion.from).test),ce.push(pe.conversion.convert))}),ce.length){case 0:return function(Te){return Te};case 1:return Q=Ce[0],me=ce[0],function(Te){return Q(Te)?me(Te):Te};case 2:return Q=Ce[0],ie=Ce[1],me=ce[0],se=ce[1],function(Te){return Q(Te)?me(Te):ie(Te)?se(Te):Te};default:return function(Te){for(var We=0;We<ce.length;We++)if(Ce[We](Te))return ce[We](Te);return Te}}}function fe(K){function Q(ie,me,se){if(me<ie.length){var Ce=ie[me],ce=[];if(Ce.restParam){var pe=Ce.types.filter(z);pe.length<Ce.types.length&&ce.push({types:pe,name:"..."+pe.map(function(Te){return Te.name}).join("|"),hasAny:pe.some(function(Te){return Te.isAny}),hasConversion:!1,restParam:!0}),ce.push(Ce)}else ce=Ce.types.map(function(Te){return{types:[Te],name:Te.name,hasAny:Te.isAny,hasConversion:Te.conversion,restParam:!1}});return At(ce,function(Te){return Q(ie,me+1,se.concat([Te]))})}else return[se]}return Q(K,0,[])}function he(K,Q){for(var ie=Math.max(K.length,Q.length),me=0;me<ie;me++){var se=x(K,me),Ce=x(Q,me),ce=!1,pe=void 0,Te=Nn(Ce),We;try{for(Te.s();!(We=Te.n()).done;)if(pe=We.value,se.has(pe)){ce=!0;break}}catch(nr){Te.e(nr)}finally{Te.f()}if(!ce)return!1}var lt=K.length,xe=Q.length,Zt=C(K),Vt=C(Q);return Zt?Vt?lt===xe:xe>=lt:Vt?lt>=xe:lt===xe}function ge(K){return K.map(function(Q){return Ut(Q)?Pt(Q.referToSelf.callback):Wr(Q)?ot(Q.referTo.references,Q.referTo.callback):Q})}function _e(K,Q,ie){var me=[],se,Ce=Nn(K),ce;try{for(Ce.s();!(ce=Ce.n()).done;){se=ce.value;var pe=ie[se];if(typeof pe!="number")throw new TypeError('No definition for referenced signature "'+se+'"');if(pe=Q[pe],typeof pe!="function")return!1;me.push(pe)}}catch(Te){Ce.e(Te)}finally{Ce.f()}return me}function Be(K,Q,ie){for(var me=ge(K),se=new Array(me.length).fill(!1),Ce=!0;Ce;){Ce=!1;for(var ce=!0,pe=0;pe<me.length;++pe)if(!se[pe]){var Te=me[pe];if(Ut(Te))me[pe]=Te.referToSelf.callback(ie),me[pe].referToSelf=Te.referToSelf,se[pe]=!0,ce=!1;else if(Wr(Te)){var We=_e(Te.referTo.references,me,Q);We?(me[pe]=Te.referTo.callback.apply(this,We),me[pe].referTo=Te.referTo,se[pe]=!0,ce=!1):Ce=!0}}if(ce&&Ce)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return me}function ke(K){var Q=/\bthis(\(|\.signatures\b)/;Object.keys(K).forEach(function(ie){var me=K[ie];if(Q.test(me.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Ie(K,Q){if(o.createCount++,Object.keys(Q).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&ke(Q);var ie=[],me=[],se={},Ce=[],ce,pe=function(){if(!Object.prototype.hasOwnProperty.call(Q,ce))return"continue";var sr=A(ce);if(!sr)return"continue";ie.forEach(function(_n){if(he(_n,sr))throw new TypeError('Conflicting signatures "'+m(_n)+'" and "'+m(sr)+'".')}),ie.push(sr);var $r=me.length;me.push(Q[ce]);var zi=sr.map(S),ri=void 0,Hn=Nn(fe(zi)),qi;try{for(Hn.s();!(qi=Hn.n()).done;){ri=qi.value;var Pn=m(ri);Ce.push({params:ri,name:Pn,fn:$r}),ri.every(function(_n){return!_n.hasConversion})&&(se[Pn]=$r)}}catch(_n){Hn.e(_n)}finally{Hn.f()}};for(ce in Q)var Te=pe();Ce.sort(q);var We=Be(me,se,Wn),lt;for(lt in se)Object.prototype.hasOwnProperty.call(se,lt)&&(se[lt]=We[se[lt]]);for(var xe=[],Zt=new Map,Vt=0,nr=Ce;Vt<nr.length;Vt++)lt=nr[Vt],Zt.has(lt.name)||(lt.fn=We[lt.fn],xe.push(lt),Zt.set(lt.name,lt));for(var Jt=xe[0]&&xe[0].params.length<=2&&!C(xe[0].params),Dr=xe[1]&&xe[1].params.length<=2&&!C(xe[1].params),Qt=xe[2]&&xe[2].params.length<=2&&!C(xe[2].params),wr=xe[3]&&xe[3].params.length<=2&&!C(xe[3].params),fr=xe[4]&&xe[4].params.length<=2&&!C(xe[4].params),hr=xe[5]&&xe[5].params.length<=2&&!C(xe[5].params),vn=Jt&&Dr&&Qt&&wr&&fr&&hr,gr=0;gr<xe.length;++gr)xe[gr].test=O(xe[gr].params);for(var Mn=Jt?P(xe[0].params[0]):Sn,ei=Dr?P(xe[1].params[0]):Sn,zn=Qt?P(xe[2].params[0]):Sn,qn=wr?P(xe[3].params[0]):Sn,ia=fr?P(xe[4].params[0]):Sn,Vi=hr?P(xe[5].params[0]):Sn,za=Jt?P(xe[0].params[1]):Sn,Br=Dr?P(xe[1].params[1]):Sn,ir=Qt?P(xe[2].params[1]):Sn,qa=wr?P(xe[3].params[1]):Sn,mi=fr?P(xe[4].params[1]):Sn,mn=hr?P(xe[5].params[1]):Sn,ti=0;ti<xe.length;++ti)xe[ti].implementation=X(xe[ti].params,xe[ti].fn);var ji=Jt?xe[0].implementation:wa,Wa=Dr?xe[1].implementation:wa,Ha=Qt?xe[2].implementation:wa,aa=wr?xe[3].implementation:wa,$a=fr?xe[4].implementation:wa,Ga=hr?xe[5].implementation:wa,Ka=Jt?xe[0].params.length:-1,Ya=Dr?xe[1].params.length:-1,Za=Qt?xe[2].params.length:-1,Ja=wr?xe[3].params.length:-1,_i=fr?xe[4].params.length:-1,Qa=hr?xe[5].params.length:-1,bi=vn?6:0,Xa=xe.length,eu=xe.map(function(yr){return yr.test}),tu=xe.map(function(yr){return yr.implementation}),ua=function(){for(var sr=bi;sr<Xa;sr++)if(eu[sr](arguments))return tu[sr].apply(this,arguments);return o.onMismatch(K,arguments,xe)};function Wn(yr,sr){return arguments.length===Ka&&Mn(yr)&&za(sr)?ji.apply(this,arguments):arguments.length===Ya&&ei(yr)&&Br(sr)?Wa.apply(this,arguments):arguments.length===Za&&zn(yr)&&ir(sr)?Ha.apply(this,arguments):arguments.length===Ja&&qn(yr)&&qa(sr)?aa.apply(this,arguments):arguments.length===_i&&ia(yr)&&mi(sr)?$a.apply(this,arguments):arguments.length===Qa&&Vi(yr)&&mn(sr)?Ga.apply(this,arguments):ua.apply(this,arguments)}try{Object.defineProperty(Wn,"name",{value:K})}catch{}return Wn.signatures=se,Wn._typedFunctionData={signatures:xe,signatureMap:Zt},Wn}function qe(K,Q,ie){throw J(K,Q,ie)}function it(K){return et(K,0,K.length-1)}function at(K){return K[K.length-1]}function et(K,Q,ie){return Array.prototype.slice.call(K,Q,ie)}function Et(K,Q){for(var ie=0;ie<K.length;ie++)if(Q(K[ie]))return K[ie]}function At(K,Q){return Array.prototype.concat.apply([],K.map(Q))}function ct(){var K=it(arguments).map(function(ie){return m(A(ie))}),Q=at(arguments);if(typeof Q!="function")throw new TypeError("Callback function expected as last argument");return ot(K,Q)}function ot(K,Q){return{referTo:{references:K,callback:Q}}}function Pt(K){if(typeof K!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:K}}}function Wr(K){return K&&Ca(K.referTo)==="object"&&Array.isArray(K.referTo.references)&&typeof K.referTo.callback=="function"}function Ut(K){return K&&Ca(K.referToSelf)==="object"&&typeof K.referToSelf.callback=="function"}function Hr(K,Q){if(!K)return Q;if(Q&&Q!==K){var ie=new Error("Function names do not match (expected: "+K+", actual: "+Q+")");throw ie.data={actual:Q,expected:K},ie}return K}function tt(K){var Q;for(var ie in K)Object.prototype.hasOwnProperty.call(K,ie)&&(p(K[ie])||typeof K[ie].signature=="string")&&(Q=Hr(Q,K[ie].name));return Q}function pr(K,Q){var ie;for(ie in Q)if(Object.prototype.hasOwnProperty.call(Q,ie)){if(ie in K&&Q[ie]!==K[ie]){var me=new Error('Signature "'+ie+'" is defined twice');throw me.data={signature:ie,sourceFunction:Q[ie],destFunction:K[ie]},me}K[ie]=Q[ie]}}var Sr=o;o=function(Q){for(var ie=typeof Q=="string",me=ie?1:0,se=ie?Q:"",Ce={},ce=me;ce<arguments.length;++ce){var pe=arguments[ce],Te={},We=void 0;if(typeof pe=="function"?(We=pe.name,typeof pe.signature=="string"?Te[pe.signature]=pe:p(pe)&&(Te=pe.signatures)):t(pe)&&(Te=pe,ie||(We=tt(pe))),Object.keys(Te).length===0){var lt=new TypeError("Argument to 'typed' at index "+ce+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw lt.data={index:ce,argument:pe},lt}ie||(se=Hr(se,We)),pr(Ce,Te)}return Ie(se||"",Ce)},o.create=Qp,o.createCount=Sr.createCount,o.onMismatch=qe,o.throwMismatchError=qe,o.createError=J,o.clear=h,o.clearConversions=c,o.addTypes=l,o._findType=s,o.referTo=ct,o.referToSelf=Pt,o.convert=v,o.findSignature=g,o.find=b,o.isTypedFunction=p,o.warnAgainstDeprecatedThis=!0,o.addType=function(K,Q){var ie="any";Q!==!1&&n.has("Object")&&(ie="Object"),o.addTypes([K],ie)};function On(K){if(!K||typeof K.from!="string"||typeof K.to!="string"||typeof K.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(K.to===K.from)throw new SyntaxError('Illegal to define conversion from "'+K.from+'" to itself.')}return o.addConversion=function(K){On(K);var Q=s(K.to);if(Q.conversionsTo.every(function(ie){return ie.from!==K.from}))Q.conversionsTo.push({from:K.from,convert:K.convert,index:a++});else throw new Error('There is already a conversion from "'+K.from+'" to "'+Q.name+'"')},o.addConversions=function(K){K.forEach(o.addConversion)},o.removeConversion=function(K){On(K);var Q=s(K.to),ie=Et(Q.conversionsTo,function(se){return se.from===K.from});if(!ie)throw new Error("Attempt to remove nonexistent conversion from "+K.from+" to "+K.to);if(ie.convert!==K.convert)throw new Error("Conversion to remove does not match existing conversion");var me=Q.conversionsTo.indexOf(ie);Q.conversionsTo.splice(me,1)},o.resolve=function(K,Q){if(!p(K))throw new TypeError(x0);for(var ie=K._typedFunctionData.signatures,me=0;me<ie.length;++me)if(ie[me].test(Q))return ie[me];return null},o}const N0=Qp();function Fr(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function zl(t,e,r){var n={2:"0b",8:"0o",16:"0x"},i=n[e],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Fr(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Fr(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),a="i".concat(r)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(i).concat(t.toString(e)).concat(a)}function Ac(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",n,i;if(e&&(e.notation&&(r=e.notation),rr(e)?n=e:rr(e.precision)&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Sy(t,n);case"exponential":return Xp(t,n);case"engineering":return Fy(t,n);case"bin":return zl(t,2,i);case"oct":return zl(t,8,i);case"hex":return zl(t,16,i);case"auto":return By(t,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],o=arguments[4];return a!=="."?a+o:o});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function fo(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),a=n.indexOf(".");i+=a!==-1?a-1:n.length-1;var o=n.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return o.length===0&&(o.push(0),i++),{sign:r,coefficients:o,exponent:i}}function Fy(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=fo(t),n=ho(r,e),i=n.exponent,a=n.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(rr(e))for(;e>a.length||i-o+1>a.length;)a.push(0);else for(var s=Math.abs(i-o)-(a.length-1),l=0;l<s;l++)a.push(0);for(var h=Math.abs(i-o),c=1;h>0;)c++,h--;var f=a.slice(c).join(""),p=rr(e)&&f.length||f.match(/[1-9]/)?"."+f:"",g=a.slice(0,c).join("")+p+"e"+(i>=0?"+":"")+o.toString();return n.sign+g}function Sy(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=fo(t),n=typeof e=="number"?ho(r,r.exponent+1+e):r,i=n.coefficients,a=n.exponent+1,o=a+(e||0);return i.length<o&&(i=i.concat(Sa(o-i.length))),a<0&&(i=Sa(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),n.sign+i.join("")}function Xp(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=fo(t),n=e?ho(r,e):r,i=n.coefficients,a=n.exponent;i.length<e&&(i=i.concat(Sa(e-i.length)));var o=i.shift();return n.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function By(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=r&&r.lowerExp!==void 0?r.lowerExp:-3,i=r&&r.upperExp!==void 0?r.upperExp:5,a=fo(t),o=e?ho(a,e):a;if(o.exponent<n||o.exponent>=i)return Xp(t,e);var s=o.coefficients,l=o.exponent;s.length<e&&(s=s.concat(Sa(e-s.length))),s=s.concat(Sa(l-s.length+1+(s.length<e?e-s.length:0))),s=Sa(-l).concat(s);var h=l>0?l:0;return h<s.length-1&&s.splice(h+1,0,"."),o.sign+s.join("")}function ho(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var a=e-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),r.exponent++,a++),a--,n[a]++}}return r}function Sa(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function Oy(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var My=Number.EPSILON||2220446049250313e-31;function Rs(t,e,r){if(r==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var n=Math.abs(t-e);return n<My?!0:n<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}function ql(t,e,r){var n=t.constructor,i=new n(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Fr(r))throw new Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),a="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function Py(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",n,i;if(e!==void 0&&(e.notation&&(r=e.notation),typeof e=="number"?n=e:e.precision&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Ty(t,n);case"exponential":return L0(t,n);case"engineering":return ky(t,n);case"bin":return ql(t,2,i);case"oct":return ql(t,8,i);case"hex":return ql(t,16,i);case"auto":{var a=e&&e.lowerExp!==void 0?e.lowerExp:-3,o=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var s,l=t.toSignificantDigits(n),h=l.e;return h>=a&&h<o?s=l.toFixed():s=L0(t,n),s.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function ky(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),a=i.toPrecision(e);return a.indexOf("e")!==-1&&(a=i.toString()),a+"e"+(r>=0?"+":"")+n.toString()}function L0(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function Ty(t,e){return t.toFixed(e)}function nn(t,e){var r=Iy(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function Iy(t,e){if(typeof t=="number")return Ac(t,e);if(Bn(t))return Py(t,e);if(xy(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return e1(t,e);if(Yn(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>'"'+n+'": '+nn(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function e1(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=e1(t[i],e);return r+="]",r}else return nn(t,e)}function xy(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function Tt(t,e,r){if(!(this instanceof Tt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Tt.prototype=new RangeError;Tt.prototype.constructor=RangeError;Tt.prototype.name="DimensionError";Tt.prototype.isDimensionError=!0;function ra(t,e,r){if(!(this instanceof ra))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}ra.prototype=new RangeError;ra.prototype.constructor=RangeError;ra.prototype.name="IndexError";ra.prototype.isIndexError=!0;function xi(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function t1(t,e,r){var n,i=t.length;if(i!==e[r])throw new Tt(i,e[r]);if(r<e.length-1){var a=r+1;for(n=0;n<i;n++){var o=t[n];if(!Array.isArray(o))throw new Tt(e.length-1,e.length,"<");t1(t[n],e,a)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new Tt(e.length+1,e.length,">")}function R0(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new Tt(t.length,0)}else t1(t,e,0)}function tr(t,e){if(!rr(t)||!Fr(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new ra(t,e)}function U0(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!rr(i)||!Fr(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+nn(e)+")")});var n=r!==void 0?r:0;return Cc(t,e,0,n),t}function Cc(t,e,r,n){var i,a,o=t.length,s=e[r],l=Math.min(o,s);if(t.length=s,r<e.length-1){var h=r+1;for(i=0;i<l;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),Cc(a,e,h,n);for(i=l;i<s;i++)a=[],t[i]=a,Cc(a,e,h,n)}else{for(i=0;i<l;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=l;i<s;i++)t[i]=n}}function Ny(t,e){var r=Ry(t),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Tt(0,n,"!=");e=Zc(e,n);var i=r1(e);if(n!==i)throw new Tt(i,n,"!=");try{return Ly(r,e)}catch(a){throw a instanceof Tt?new Tt(i,n,"!="):a}}function Zc(t,e){var r=r1(t),n=t.slice(),i=-1,a=t.indexOf(i),o=t.indexOf(i,a+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var s=a>=0,l=e%r===0;if(s)if(l)n[a]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function r1(t){return t.reduce((e,r)=>e*r,1)}function Ly(t,e){for(var r=t,n,i=e.length-1;i>0;i--){var a=e[i];n=[];for(var o=r.length/a,s=0;s<o;s++)n.push(r.slice(s*a,(s+1)*a));r=n}return r}function n1(t,e,r,n){var i=n||xi(t);if(r)for(var a=0;a<r;a++)t=[t],i.unshift(1);for(t=i1(t,e,0);i.length<e;)i.push(1);return t}function i1(t,e,r){var n,i;if(Array.isArray(t)){var a=r+1;for(n=0,i=t.length;n<i;n++)t[n]=i1(t[n],e,a)}else for(var o=r;o<e;o++)t=[t];return t}function Ry(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function r(n){Array.isArray(n)?n.forEach(r):e.push(n)}),e}function Us(t,e){for(var r,n=0,i=0;i<t.length;i++){var a=t[i],o=Array.isArray(a);if(i===0&&o&&(n=a.length),o&&a.length!==n)return;var s=o?Us(a,e):e(a);if(r===void 0)r=s;else if(r!==s)return"mixed"}return r}function Bt(t,e,r,n){function i(a){var o=yy(a,e.map(jy));return Uy(t,e,a),r(o)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Uy(t,e,r){var n=e.filter(a=>!Vy(a)).every(a=>r[a]!==void 0);if(!n){var i=e.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function Vy(t){return t&&t[0]==="?"}function jy(t){return t&&t[0]==="?"?t.slice(1):t}function zy(t,e){if(u1(t)&&a1(t,e))return t[e];throw typeof t[e]=="function"&&Hy(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function qy(t,e,r){if(u1(t)&&a1(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function Wy(t,e){return e in t}function a1(t,e){return!t||typeof t!="object"?!1:yu($y,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Hy(t,e){return t==null||typeof t[e]!="function"||yu(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:yu(Gy,e)?!0:!(e in Object.prototype||e in Function.prototype)}function u1(t){return typeof t=="object"&&t&&t.constructor===Object}var $y={length:!0,name:!0},Gy={toString:!0,valueOf:!0,toLocaleString:!0};class Ky{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return zy(this.wrappedObject,e)}set(e,r){return qy(this.wrappedObject,e,r),this}has(e){return Wy(this.wrappedObject,e)}}function Yy(t){return t?t instanceof Map||t instanceof Ky||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var s1=function(){return s1=N0.create,N0},Zy=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Jy=Bt("typed",Zy,function(e){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:a}=e,o=s1();return o.clear(),o.addTypes([{name:"number",test:rr},{name:"Complex",test:Yp},{name:"BigNumber",test:Bn},{name:"Fraction",test:Zp},{name:"Unit",test:Jp},{name:"identifier",test:s=>Yn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(s)},{name:"string",test:Yn},{name:"Chain",test:by},{name:"Array",test:er},{name:"Matrix",test:Zr},{name:"DenseMatrix",test:$w},{name:"SparseMatrix",test:Gw},{name:"Range",test:Kw},{name:"Index",test:Kc},{name:"boolean",test:Yw},{name:"ResultSet",test:Zw},{name:"Help",test:Jw},{name:"function",test:Qw},{name:"Date",test:Xw},{name:"RegExp",test:ey},{name:"null",test:ry},{name:"undefined",test:Yc},{name:"AccessorNode",test:ny},{name:"ArrayNode",test:iy},{name:"AssignmentNode",test:ay},{name:"BlockNode",test:uy},{name:"ConditionalNode",test:sy},{name:"ConstantNode",test:oy},{name:"FunctionNode",test:cy},{name:"FunctionAssignmentNode",test:ly},{name:"IndexNode",test:fy},{name:"Node",test:hy},{name:"ObjectNode",test:dy},{name:"OperatorNode",test:py},{name:"ParenthesisNode",test:gy},{name:"RangeNode",test:vy},{name:"RelationalNode",test:my},{name:"SymbolNode",test:_y},{name:"Map",test:Yy},{name:"Object",test:ty}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(r||Wl(l),Oy(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new r(l)}},{from:"number",to:"Complex",convert:function(l){return n||ys(l),new n(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return n||ys(l),new n(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return n||ys(l),new n(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){a||Hl(l);var h=new a(l);if(h.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return h}},{from:"string",to:"number",convert:function(l){var h=Number(l);if(isNaN(h))throw new Error('Cannot convert "'+l+'" to a number');return h}},{from:"string",to:"BigNumber",convert:function(l){r||Wl(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){a||Hl(l);try{return new a(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){n||ys(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return r||Wl(l),new r(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return a||Hl(l),new a(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||Qy(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),o.onMismatch=(s,l,h)=>{var c=o.createError(s,l,h);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Ns(l[0])&&h.some(p=>!p.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(s,l,h)=>{var c=o.createError(s,l,h);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Ns(l[0])&&h.some(p=>!p.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o});function Wl(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function ys(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function Qy(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Hl(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Fa=9e15,Ri=1e9,Fc="0123456789abcdef",Vs="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",js="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Sc={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Fa,maxE:Fa,crypto:!1},o1,pi,ft=!0,po="[DecimalError] ",Ni=po+"Invalid argument: ",l1=po+"Precision limit exceeded",c1=po+"crypto unavailable",f1="[object Decimal]",qr=Math.floor,_r=Math.pow,Xy=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,eE=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,tE=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,h1=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Un=1e7,nt=7,rE=9007199254740991,nE=Vs.length-1,Bc=js.length-1,Me={toStringTag:f1};Me.absoluteValue=Me.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Xe(t)};Me.ceil=function(){return Xe(new this.constructor(this),this.e+1,2)};Me.clampedTo=Me.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Ni+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};Me.comparedTo=Me.cmp=function(t){var e,r,n,i,a=this,o=a.d,s=(t=new a.constructor(t)).d,l=a.s,h=t.s;if(!o||!s)return!l||!h?NaN:l!==h?l:o===s?0:!o^l<0?1:-1;if(!o[0]||!s[0])return o[0]?l:s[0]?-h:0;if(l!==h)return l;if(a.e!==t.e)return a.e>t.e^l<0?1:-1;for(n=o.length,i=s.length,e=0,r=n<i?n:i;e<r;++e)if(o[e]!==s[e])return o[e]>s[e]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1};Me.cosine=Me.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+nt,n.rounding=1,r=iE(n,m1(n,r)),n.precision=t,n.rounding=e,Xe(pi==2||pi==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};Me.cubeRoot=Me.cbrt=function(){var t,e,r,n,i,a,o,s,l,h,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(ft=!1,a=c.s*_r(c.s*c,1/3),!a||Math.abs(a)==1/0?(r=Lr(c.d),t=c.e,(a=(t-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=_r(r,1/3),t=qr((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?r="5e"+t:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new f(r),n.s=c.s):n=new f(a.toString()),o=(t=f.precision)+3;;)if(s=n,l=s.times(s).times(s),h=l.plus(c),n=Lt(h.plus(c).times(s),h.plus(l),o+2,1),Lr(s.d).slice(0,o)===(r=Lr(n.d)).slice(0,o))if(r=r.slice(o-3,o+1),r=="9999"||!i&&r=="4999"){if(!i&&(Xe(s,t+1,0),s.times(s).times(s).eq(c))){n=s;break}o+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Xe(n,t+1,1),e=!n.times(n).times(n).eq(c));break}return ft=!0,Xe(n,t,f.rounding,e)};Me.decimalPlaces=Me.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-qr(this.e/nt))*nt,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};Me.dividedBy=Me.div=function(t){return Lt(this,new this.constructor(t))};Me.dividedToIntegerBy=Me.divToInt=function(t){var e=this,r=e.constructor;return Xe(Lt(e,new r(t),0,1,1),r.precision,r.rounding)};Me.equals=Me.eq=function(t){return this.cmp(t)===0};Me.floor=function(){return Xe(new this.constructor(this),this.e+1,3)};Me.greaterThan=Me.gt=function(t){return this.cmp(t)>0};Me.greaterThanOrEqualTo=Me.gte=function(t){var e=this.cmp(t);return e==1||e===0};Me.hyperbolicCosine=Me.cosh=function(){var t,e,r,n,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;r=o.precision,n=o.rounding,o.precision=r+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/vo(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=Pa(o,1,a.times(e),new o(1),!0);for(var l,h=t,c=new o(8);h--;)l=a.times(a),a=s.minus(l.times(c.minus(l.times(c))));return Xe(a,o.precision=r,o.rounding=n,!0)};Me.hyperbolicSine=Me.sinh=function(){var t,e,r,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,r=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=Pa(a,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/vo(5,t)),i=Pa(a,2,i,i,!0);for(var o,s=new a(5),l=new a(16),h=new a(20);t--;)o=i.times(i),i=i.times(s.plus(o.times(l.times(o).plus(h))))}return a.precision=e,a.rounding=r,Xe(i,e,r,!0)};Me.hyperbolicTangent=Me.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,Lt(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};Me.inverseCosine=Me.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),i=r.precision,a=r.rounding;return n!==-1?n===0?e.isNeg()?Ln(r,i,a):new r(0):new r(NaN):e.isZero()?Ln(r,i+4,a).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),t=Ln(r,i+4,a).times(.5),r.precision=i,r.rounding=a,t.minus(e))};Me.inverseHyperbolicCosine=Me.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,ft=!1,r=r.times(r).minus(1).sqrt().plus(r),ft=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};Me.inverseHyperbolicSine=Me.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,ft=!1,r=r.times(r).plus(1).sqrt().plus(r),ft=!0,n.precision=t,n.rounding=e,r.ln())};Me.inverseHyperbolicTangent=Me.atanh=function(){var t,e,r,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?Xe(new a(i),t,e,!0):(a.precision=r=n-i.e,i=Lt(i.plus(1),new a(1).minus(i),r+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};Me.inverseSine=Me.asin=function(){var t,e,r,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),r=a.precision,n=a.rounding,e!==-1?e===0?(t=Ln(a,r+4,n).times(.5),t.s=i.s,t):new a(NaN):(a.precision=r+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,i.times(2)))};Me.inverseTangent=Me.atan=function(){var t,e,r,n,i,a,o,s,l,h=this,c=h.constructor,f=c.precision,p=c.rounding;if(h.isFinite()){if(h.isZero())return new c(h);if(h.abs().eq(1)&&f+4<=Bc)return o=Ln(c,f+4,p).times(.25),o.s=h.s,o}else{if(!h.s)return new c(NaN);if(f+4<=Bc)return o=Ln(c,f+4,p).times(.5),o.s=h.s,o}for(c.precision=s=f+10,c.rounding=1,r=Math.min(28,s/nt+2|0),t=r;t;--t)h=h.div(h.times(h).plus(1).sqrt().plus(1));for(ft=!1,e=Math.ceil(s/nt),n=1,l=h.times(h),o=new c(h),i=h;t!==-1;)if(i=i.times(l),a=o.minus(i.div(n+=2)),i=i.times(l),o=a.plus(i.div(n+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return r&&(o=o.times(2<<r-1)),ft=!0,Xe(o,c.precision=f,c.rounding=p,!0)};Me.isFinite=function(){return!!this.d};Me.isInteger=Me.isInt=function(){return!!this.d&&qr(this.e/nt)>this.d.length-2};Me.isNaN=function(){return!this.s};Me.isNegative=Me.isNeg=function(){return this.s<0};Me.isPositive=Me.isPos=function(){return this.s>0};Me.isZero=function(){return!!this.d&&this.d[0]===0};Me.lessThan=Me.lt=function(t){return this.cmp(t)<0};Me.lessThanOrEqualTo=Me.lte=function(t){return this.cmp(t)<1};Me.logarithm=Me.log=function(t){var e,r,n,i,a,o,s,l,h=this,c=h.constructor,f=c.precision,p=c.rounding,g=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(r=h.d,h.s<0||!r||!r[0]||h.eq(1))return new c(r&&!r[0]?-1/0:h.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)a=!0;else{for(i=r[0];i%10===0;)i/=10;a=i!==1}if(ft=!1,s=f+g,o=Pi(h,s),n=e?zs(c,s+10):Pi(t,s),l=Lt(o,n,s,1),Eu(l.d,i=f,p))do if(s+=10,o=Pi(h,s),n=e?zs(c,s+10):Pi(t,s),l=Lt(o,n,s,1),!a){+Lr(l.d).slice(i+1,i+15)+1==1e14&&(l=Xe(l,f+1,0));break}while(Eu(l.d,i+=10,p));return ft=!0,Xe(l,f,p)};Me.minus=Me.sub=function(t){var e,r,n,i,a,o,s,l,h,c,f,p,g=this,b=g.constructor;if(t=new b(t),!g.d||!t.d)return!g.s||!t.s?t=new b(NaN):g.d?t.s=-t.s:t=new b(t.d||g.s!==t.s?g:NaN),t;if(g.s!=t.s)return t.s=-t.s,g.plus(t);if(h=g.d,p=t.d,s=b.precision,l=b.rounding,!h[0]||!p[0]){if(p[0])t.s=-t.s;else if(h[0])t=new b(g);else return new b(l===3?-0:0);return ft?Xe(t,s,l):t}if(r=qr(t.e/nt),c=qr(g.e/nt),h=h.slice(),a=c-r,a){for(f=a<0,f?(e=h,a=-a,o=p.length):(e=p,r=c,o=h.length),n=Math.max(Math.ceil(s/nt),o)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=h.length,o=p.length,f=n<o,f&&(o=n),n=0;n<o;n++)if(h[n]!=p[n]){f=h[n]<p[n];break}a=0}for(f&&(e=h,h=p,p=e,t.s=-t.s),o=h.length,n=p.length-o;n>0;--n)h[o++]=0;for(n=p.length;n>a;){if(h[--n]<p[n]){for(i=n;i&&h[--i]===0;)h[i]=Un-1;--h[i],h[n]+=Un}h[n]-=p[n]}for(;h[--o]===0;)h.pop();for(;h[0]===0;h.shift())--r;return h[0]?(t.d=h,t.e=go(h,r),ft?Xe(t,s,l):t):new b(l===3?-0:0)};Me.modulo=Me.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?Xe(new n(r),n.precision,n.rounding):(ft=!1,n.modulo==9?(e=Lt(r,t.abs(),0,3,1),e.s*=t.s):e=Lt(r,t,0,n.modulo,1),e=e.times(t),ft=!0,r.minus(e))};Me.naturalExponential=Me.exp=function(){return Oc(this)};Me.naturalLogarithm=Me.ln=function(){return Pi(this)};Me.negated=Me.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Xe(t)};Me.plus=Me.add=function(t){var e,r,n,i,a,o,s,l,h,c,f=this,p=f.constructor;if(t=new p(t),!f.d||!t.d)return!f.s||!t.s?t=new p(NaN):f.d||(t=new p(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(h=f.d,c=t.d,s=p.precision,l=p.rounding,!h[0]||!c[0])return c[0]||(t=new p(f)),ft?Xe(t,s,l):t;if(a=qr(f.e/nt),n=qr(t.e/nt),h=h.slice(),i=a-n,i){for(i<0?(r=h,i=-i,o=c.length):(r=c,n=a,o=h.length),a=Math.ceil(s/nt),o=a>o?a+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=h.length,i=c.length,o-i<0&&(i=o,r=c,c=h,h=r),e=0;i;)e=(h[--i]=h[i]+c[i]+e)/Un|0,h[i]%=Un;for(e&&(h.unshift(e),++n),o=h.length;h[--o]==0;)h.pop();return t.d=h,t.e=go(h,n),ft?Xe(t,s,l):t};Me.precision=Me.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ni+t);return r.d?(e=d1(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};Me.round=function(){var t=this,e=t.constructor;return Xe(new e(t),t.e+1,e.rounding)};Me.sine=Me.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+nt,n.rounding=1,r=uE(n,m1(n,r)),n.precision=t,n.rounding=e,Xe(pi>2?r.neg():r,t,e,!0)):new n(NaN)};Me.squareRoot=Me.sqrt=function(){var t,e,r,n,i,a,o=this,s=o.d,l=o.e,h=o.s,c=o.constructor;if(h!==1||!s||!s[0])return new c(!h||h<0&&(!s||s[0])?NaN:s?o:1/0);for(ft=!1,h=Math.sqrt(+o),h==0||h==1/0?(e=Lr(s),(e.length+l)%2==0&&(e+="0"),h=Math.sqrt(e),l=qr((l+1)/2)-(l<0||l%2),h==1/0?e="5e"+l:(e=h.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new c(e)):n=new c(h.toString()),r=(l=c.precision)+3;;)if(a=n,n=a.plus(Lt(o,a,r+2,1)).times(.5),Lr(a.d).slice(0,r)===(e=Lr(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(Xe(a,l+1,0),a.times(a).eq(o))){n=a;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Xe(n,l+1,1),t=!n.times(n).eq(o));break}return ft=!0,Xe(n,l,c.rounding,t)};Me.tangent=Me.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=Lt(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,Xe(pi==2||pi==4?r.neg():r,t,e,!0)):new n(NaN)};Me.times=Me.mul=function(t){var e,r,n,i,a,o,s,l,h,c=this,f=c.constructor,p=c.d,g=(t=new f(t)).d;if(t.s*=c.s,!p||!p[0]||!g||!g[0])return new f(!t.s||p&&!p[0]&&!g||g&&!g[0]&&!p?NaN:!p||!g?t.s/0:t.s*0);for(r=qr(c.e/nt)+qr(t.e/nt),l=p.length,h=g.length,l<h&&(a=p,p=g,g=a,o=l,l=h,h=o),a=[],o=l+h,n=o;n--;)a.push(0);for(n=h;--n>=0;){for(e=0,i=l+n;i>n;)s=a[i]+g[n]*p[i-n-1]+e,a[i--]=s%Un|0,e=s/Un|0;a[i]=(a[i]+e)%Un|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=go(a,r),ft?Xe(t,f.precision,f.rounding):t};Me.toBinary=function(t,e){return Jc(this,2,t,e)};Me.toDecimalPlaces=Me.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(un(t,0,Ri),e===void 0?e=n.rounding:un(e,0,8),Xe(r,t+r.e+1,e))};Me.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Jn(n,!0):(un(t,0,Ri),e===void 0?e=i.rounding:un(e,0,8),n=Xe(new i(n),t+1,e),r=Jn(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};Me.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?r=Jn(i):(un(t,0,Ri),e===void 0?e=a.rounding:un(e,0,8),n=Xe(new a(i),t+i.e+1,e),r=Jn(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};Me.toFraction=function(t){var e,r,n,i,a,o,s,l,h,c,f,p,g=this,b=g.d,v=g.constructor;if(!b)return new v(g);if(h=r=new v(1),n=l=new v(0),e=new v(n),a=e.e=d1(b)-g.e-1,o=a%nt,e.d[0]=_r(10,o<0?nt+o:o),t==null)t=a>0?e:h;else{if(s=new v(t),!s.isInt()||s.lt(h))throw Error(Ni+s);t=s.gt(e)?a>0?e:h:s}for(ft=!1,s=new v(Lr(b)),c=v.precision,v.precision=a=b.length*nt*2;f=Lt(s,e,0,1,1),i=r.plus(f.times(n)),i.cmp(t)!=1;)r=n,n=i,i=h,h=l.plus(f.times(i)),l=i,i=e,e=s.minus(f.times(i)),s=i;return i=Lt(t.minus(r),n,0,1,1),l=l.plus(i.times(h)),r=r.plus(i.times(n)),l.s=h.s=g.s,p=Lt(h,n,a,1).minus(g).abs().cmp(Lt(l,r,a,1).minus(g).abs())<1?[h,n]:[l,r],v.precision=c,ft=!0,p};Me.toHexadecimal=Me.toHex=function(t,e){return Jc(this,16,t,e)};Me.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:un(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(ft=!1,r=Lt(r,t,0,e,1).times(t),ft=!0,Xe(r)):(t.s=r.s,r=t),r};Me.toNumber=function(){return+this};Me.toOctal=function(t,e){return Jc(this,8,t,e)};Me.toPower=Me.pow=function(t){var e,r,n,i,a,o,s=this,l=s.constructor,h=+(t=new l(t));if(!s.d||!t.d||!s.d[0]||!t.d[0])return new l(_r(+s,h));if(s=new l(s),s.eq(1))return s;if(n=l.precision,a=l.rounding,t.eq(1))return Xe(s,n,a);if(e=qr(t.e/nt),e>=t.d.length-1&&(r=h<0?-h:h)<=rE)return i=p1(l,s,r,n),t.s<0?new l(1).div(i):Xe(i,n,a);if(o=s.s,o<0){if(e<t.d.length-1)return new l(NaN);if(t.d[e]&1||(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return r=_r(+s,h),e=r==0||!isFinite(r)?qr(h*(Math.log("0."+Lr(s.d))/Math.LN10+s.e+1)):new l(r+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?o/0:0):(ft=!1,l.rounding=s.s=1,r=Math.min(12,(e+"").length),i=Oc(t.times(Pi(s,n+r)),n),i.d&&(i=Xe(i,n+5,1),Eu(i.d,n,a)&&(e=n+10,i=Xe(Oc(t.times(Pi(s,e+r)),e),e+5,1),+Lr(i.d).slice(n+1,n+15)+1==1e14&&(i=Xe(i,n+1,0)))),i.s=o,ft=!0,l.rounding=a,Xe(i,n,a))};Me.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Jn(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(un(t,1,Ri),e===void 0?e=i.rounding:un(e,0,8),n=Xe(new i(n),t,e),r=Jn(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};Me.toSignificantDigits=Me.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(un(t,1,Ri),e===void 0?e=n.rounding:un(e,0,8)),Xe(new n(r),t,e)};Me.toString=function(){var t=this,e=t.constructor,r=Jn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};Me.truncated=Me.trunc=function(){return Xe(new this.constructor(this),this.e+1,1)};Me.valueOf=Me.toJSON=function(){var t=this,e=t.constructor,r=Jn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function Lr(t){var e,r,n,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)n=t[e]+"",r=nt-n.length,r&&(a+=Oi(r)),a+=n;o=t[e],n=o+"",r=nt-n.length,r&&(a+=Oi(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function un(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Ni+t)}function Eu(t,e,r,n){var i,a,o,s;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=nt,i=0):(i=Math.ceil((e+1)/nt),e%=nt),a=_r(10,nt-e),s=t[i]%a|0,n==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=r<4&&s==99999||r>3&&s==49999||s==5e4||s==0):o=(r<4&&s+1==a||r>3&&s+1==a/2)&&(t[i+1]/a/100|0)==_r(10,e-2)-1||(s==a/2||s==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(n||r<4)&&s==9999||!n&&r>3&&s==4999):o=((n||r<4)&&s+1==a||!n&&r>3&&s+1==a/2)&&(t[i+1]/a/1e3|0)==_r(10,e-3)-1,o}function Ps(t,e,r){for(var n,i=[0],a,o=0,s=t.length;o<s;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=Fc.indexOf(t.charAt(o++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function iE(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/vo(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=Pa(t,1,e.times(i),new t(1));for(var a=r;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=r,e}var Lt=function(){function t(n,i,a){var o,s=0,l=n.length;for(n=n.slice();l--;)o=n[l]*i+s,n[l]=o%a|0,s=o/a|0;return s&&n.unshift(s),n}function e(n,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(n[s]!=i[s]){l=n[s]>i[s]?1:-1;break}return l}function r(n,i,a,o){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*o+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o,s,l){var h,c,f,p,g,b,v,m,D,S,y,A,C,P,O,F,x,z,G,J,R=n.constructor,N=n.s==i.s?1:-1,j=n.d,q=i.d;if(!j||!j[0]||!q||!q[0])return new R(!n.s||!i.s||(j?q&&j[0]==q[0]:!q)?NaN:j&&j[0]==0||!q?N*0:N/0);for(l?(g=1,c=n.e-i.e):(l=Un,g=nt,c=qr(n.e/g)-qr(i.e/g)),G=q.length,x=j.length,D=new R(N),S=D.d=[],f=0;q[f]==(j[f]||0);f++);if(q[f]>(j[f]||0)&&c--,a==null?(P=a=R.precision,o=R.rounding):s?P=a+(n.e-i.e)+1:P=a,P<0)S.push(1),b=!0;else{if(P=P/g+2|0,f=0,G==1){for(p=0,q=q[0],P++;(f<x||p)&&P--;f++)O=p*l+(j[f]||0),S[f]=O/q|0,p=O%q|0;b=p||f<x}else{for(p=l/(q[0]+1)|0,p>1&&(q=t(q,p,l),j=t(j,p,l),G=q.length,x=j.length),F=G,y=j.slice(0,G),A=y.length;A<G;)y[A++]=0;J=q.slice(),J.unshift(0),z=q[0],q[1]>=l/2&&++z;do p=0,h=e(q,y,G,A),h<0?(C=y[0],G!=A&&(C=C*l+(y[1]||0)),p=C/z|0,p>1?(p>=l&&(p=l-1),v=t(q,p,l),m=v.length,A=y.length,h=e(v,y,m,A),h==1&&(p--,r(v,G<m?J:q,m,l))):(p==0&&(h=p=1),v=q.slice()),m=v.length,m<A&&v.unshift(0),r(y,v,A,l),h==-1&&(A=y.length,h=e(q,y,G,A),h<1&&(p++,r(y,G<A?J:q,A,l))),A=y.length):h===0&&(p++,y=[0]),S[f++]=p,h&&y[0]?y[A++]=j[F]||0:(y=[j[F]],A=1);while((F++<x||y[0]!==void 0)&&P--);b=y[0]!==void 0}S[0]||S.shift()}if(g==1)D.e=c,o1=b;else{for(f=1,p=S[0];p>=10;p/=10)f++;D.e=f+c*g-1,Xe(D,s?a+D.e+1:a,o,b)}return D}}();function Xe(t,e,r,n){var i,a,o,s,l,h,c,f,p,g=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(i=1,s=f[0];s>=10;s/=10)i++;if(a=e-i,a<0)a+=nt,o=e,c=f[p=0],l=c/_r(10,i-o-1)%10|0;else if(p=Math.ceil((a+1)/nt),s=f.length,p>=s)if(n){for(;s++<=p;)f.push(0);c=l=0,i=1,a%=nt,o=a-nt+1}else break e;else{for(c=s=f[p],i=1;s>=10;s/=10)i++;a%=nt,o=a-nt+i,l=o<0?0:c/_r(10,i-o-1)%10|0}if(n=n||e<0||f[p+1]!==void 0||(o<0?c:c%_r(10,i-o-1)),h=r<4?(l||n)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||n||r==6&&(a>0?o>0?c/_r(10,i-o):0:f[p-1])%10&1||r==(t.s<0?8:7)),e<1||!f[0])return f.length=0,h?(e-=t.e+1,f[0]=_r(10,(nt-e%nt)%nt),t.e=-e||0):f[0]=t.e=0,t;if(a==0?(f.length=p,s=1,p--):(f.length=p+1,s=_r(10,nt-a),f[p]=o>0?(c/_r(10,i-o)%_r(10,o)|0)*s:0),h)for(;;)if(p==0){for(a=1,o=f[0];o>=10;o/=10)a++;for(o=f[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(t.e++,f[0]==Un&&(f[0]=1));break}else{if(f[p]+=s,f[p]!=Un)break;f[p--]=0,s=1}for(a=f.length;f[--a]===0;)f.pop()}return ft&&(t.e>g.maxE?(t.d=null,t.e=NaN):t.e<g.minE&&(t.e=0,t.d=[0])),t}function Jn(t,e,r){if(!t.isFinite())return v1(t);var n,i=t.e,a=Lr(t.d),o=a.length;return e?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+Oi(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+Oi(-i-1)+a,r&&(n=r-o)>0&&(a+=Oi(n))):i>=o?(a+=Oi(i+1-o),r&&(n=r-i-1)>0&&(a=a+"."+Oi(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(a+="."),a+=Oi(n))),a}function go(t,e){var r=t[0];for(e*=nt;r>=10;r/=10)e++;return e}function zs(t,e,r){if(e>nE)throw ft=!0,r&&(t.precision=r),Error(l1);return Xe(new t(Vs),e,1,!0)}function Ln(t,e,r){if(e>Bc)throw Error(l1);return Xe(new t(js),e,r,!0)}function d1(t){var e=t.length-1,r=e*nt+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function Oi(t){for(var e="";t--;)e+="0";return e}function p1(t,e,r,n){var i,a=new t(1),o=Math.ceil(n/nt+4);for(ft=!1;;){if(r%2&&(a=a.times(e),j0(a.d,o)&&(i=!0)),r=qr(r/2),r===0){r=a.d.length-1,i&&a.d[r]===0&&++a.d[r];break}e=e.times(e),j0(e.d,o)}return ft=!0,a}function V0(t){return t.d[t.d.length-1]&1}function g1(t,e,r){for(var n,i=new t(e[0]),a=0;++a<e.length;)if(n=new t(e[a]),n.s)i[r](n)&&(i=n);else{i=n;break}return i}function Oc(t,e){var r,n,i,a,o,s,l,h=0,c=0,f=0,p=t.constructor,g=p.rounding,b=p.precision;if(!t.d||!t.d[0]||t.e>17)return new p(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(ft=!1,l=b):l=e,s=new p(.03125);t.e>-2;)t=t.times(s),f+=5;for(n=Math.log(_r(2,f))/Math.LN10*2+5|0,l+=n,r=a=o=new p(1),p.precision=l;;){if(a=Xe(a.times(t),l,1),r=r.times(++c),s=o.plus(Lt(a,r,l,1)),Lr(s.d).slice(0,l)===Lr(o.d).slice(0,l)){for(i=f;i--;)o=Xe(o.times(o),l,1);if(e==null)if(h<3&&Eu(o.d,l-n,g,h))p.precision=l+=10,r=a=s=new p(1),c=0,h++;else return Xe(o,p.precision=b,g,ft=!0);else return p.precision=b,o}o=s}}function Pi(t,e){var r,n,i,a,o,s,l,h,c,f,p,g=1,b=10,v=t,m=v.d,D=v.constructor,S=D.rounding,y=D.precision;if(v.s<0||!m||!m[0]||!v.e&&m[0]==1&&m.length==1)return new D(m&&!m[0]?-1/0:v.s!=1?NaN:m?0:v);if(e==null?(ft=!1,c=y):c=e,D.precision=c+=b,r=Lr(m),n=r.charAt(0),Math.abs(a=v.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(t),r=Lr(v.d),n=r.charAt(0),g++;a=v.e,n>1?(v=new D("0."+r),a++):v=new D(n+"."+r.slice(1))}else return h=zs(D,c+2,y).times(a+""),v=Pi(new D(n+"."+r.slice(1)),c-b).plus(h),D.precision=y,e==null?Xe(v,y,S,ft=!0):v;for(f=v,l=o=v=Lt(v.minus(1),v.plus(1),c,1),p=Xe(v.times(v),c,1),i=3;;){if(o=Xe(o.times(p),c,1),h=l.plus(Lt(o,new D(i),c,1)),Lr(h.d).slice(0,c)===Lr(l.d).slice(0,c))if(l=l.times(2),a!==0&&(l=l.plus(zs(D,c+2,y).times(a+""))),l=Lt(l,new D(g),c,1),e==null)if(Eu(l.d,c-b,S,s))D.precision=c+=b,h=o=v=Lt(f.minus(1),f.plus(1),c,1),p=Xe(v.times(v),c,1),i=s=1;else return Xe(l,D.precision=y,S,ft=!0);else return D.precision=y,l;l=h,i+=2}}function v1(t){return String(t.s*t.s/0)}function Mc(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%nt,r<0&&(n+=nt),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=nt;n<i;)t.d.push(+e.slice(n,n+=nt));e=e.slice(n),n=nt-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),ft&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function aE(t,e){var r,n,i,a,o,s,l,h,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),h1.test(e))return Mc(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(eE.test(e))r=16,e=e.toLowerCase();else if(Xy.test(e))r=2;else if(tE.test(e))r=8;else throw Error(Ni+e);for(a=e.search(/p/i),a>0?(l=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,n=t.constructor,o&&(e=e.replace(".",""),s=e.length,a=s-a,i=p1(n,new n(r),a,a*2)),h=Ps(e,r,Un),c=h.length-1,a=c;h[a]===0;--a)h.pop();return a<0?new n(t.s*0):(t.e=go(h,c),t.d=h,ft=!1,o&&(t=Lt(t,i,s*4)),l&&(t=t.times(Math.abs(l)<54?_r(2,l):ka.pow(2,l))),ft=!0,t)}function uE(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:Pa(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/vo(5,r)),e=Pa(t,2,e,e);for(var i,a=new t(5),o=new t(16),s=new t(20);r--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(s))));return e}function Pa(t,e,r,n,i){var a,o,s,l,h=t.precision,c=Math.ceil(h/nt);for(ft=!1,l=r.times(r),s=new t(n);;){if(o=Lt(s.times(l),new t(e++*e++),h,1),s=i?n.plus(o):n.minus(o),n=Lt(o.times(l),new t(e++*e++),h,1),o=s.plus(n),o.d[c]!==void 0){for(a=c;o.d[a]===s.d[a]&&a--;);if(a==-1)break}a=s,s=n,n=o,o=a}return ft=!0,o.d.length=c+1,o}function vo(t,e){for(var r=t;--e;)r*=t;return r}function m1(t,e){var r,n=e.s<0,i=Ln(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return pi=n?4:1,e;if(r=e.divToInt(i),r.isZero())pi=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(a))return pi=V0(r)?n?2:3:n?4:1,e;pi=V0(r)?n?1:4:n?3:2}return e.minus(i).abs()}function Jc(t,e,r,n){var i,a,o,s,l,h,c,f,p,g=t.constructor,b=r!==void 0;if(b?(un(r,1,Ri),n===void 0?n=g.rounding:un(n,0,8)):(r=g.precision,n=g.rounding),!t.isFinite())c=v1(t);else{for(c=Jn(t),o=c.indexOf("."),b?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,o>=0&&(c=c.replace(".",""),p=new g(1),p.e=c.length-o,p.d=Ps(Jn(p),10,i),p.e=p.d.length),f=Ps(c,10,i),a=l=f.length;f[--l]==0;)f.pop();if(!f[0])c=b?"0p+0":"0";else{if(o<0?a--:(t=new g(t),t.d=f,t.e=a,t=Lt(t,p,r,n,0,i),f=t.d,a=t.e,h=o1),o=f[r],s=i/2,h=h||f[r+1]!==void 0,h=n<4?(o!==void 0||h)&&(n===0||n===(t.s<0?3:2)):o>s||o===s&&(n===4||h||n===6&&f[r-1]&1||n===(t.s<0?8:7)),f.length=r,h)for(;++f[--r]>i-1;)f[r]=0,r||(++a,f.unshift(1));for(l=f.length;!f[l-1];--l);for(o=0,c="";o<l;o++)c+=Fc.charAt(f[o]);if(b){if(l>1)if(e==16||e==8){for(o=e==16?4:3,--l;l%o;l++)c+="0";for(f=Ps(c,i,e),l=f.length;!f[l-1];--l);for(o=1,c="1.";o<l;o++)c+=Fc.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>l)for(a-=l;a--;)c+="0";else a<l&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function j0(t,e){if(t.length>e)return t.length=e,!0}function sE(t){return new this(t).abs()}function oE(t){return new this(t).acos()}function lE(t){return new this(t).acosh()}function cE(t,e){return new this(t).plus(e)}function fE(t){return new this(t).asin()}function hE(t){return new this(t).asinh()}function dE(t){return new this(t).atan()}function pE(t){return new this(t).atanh()}function gE(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,a=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=Ln(this,a,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?Ln(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=Ln(this,a,1).times(.5),r.s=t.s):e.s<0?(this.precision=a,this.rounding=1,r=this.atan(Lt(t,e,a,1)),e=Ln(this,a,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(Lt(t,e,a,1)),r}function vE(t){return new this(t).cbrt()}function mE(t){return Xe(t=new this(t),t.e+1,2)}function _E(t,e,r){return new this(t).clamp(e,r)}function bE(t){if(!t||typeof t!="object")throw Error(po+"Object expected");var e,r,n,i=t.defaults===!0,a=["precision",1,Ri,"rounding",0,8,"toExpNeg",-Fa,0,"toExpPos",0,Fa,"maxE",0,Fa,"minE",-Fa,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(r=a[e],i&&(this[r]=Sc[r]),(n=t[r])!==void 0)if(qr(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Ni+r+": "+n);if(r="crypto",i&&(this[r]=Sc[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(c1);else this[r]=!1;else throw Error(Ni+r+": "+n);return this}function DE(t){return new this(t).cos()}function wE(t){return new this(t).cosh()}function _1(t){var e,r,n;function i(a){var o,s,l,h=this;if(!(h instanceof i))return new i(a);if(h.constructor=i,z0(a)){h.s=a.s,ft?!a.d||a.e>i.maxE?(h.e=NaN,h.d=null):a.e<i.minE?(h.e=0,h.d=[0]):(h.e=a.e,h.d=a.d.slice()):(h.e=a.e,h.d=a.d?a.d.slice():a.d);return}if(l=typeof a,l==="number"){if(a===0){h.s=1/a<0?-1:1,h.e=0,h.d=[0];return}if(a<0?(a=-a,h.s=-1):h.s=1,a===~~a&&a<1e7){for(o=0,s=a;s>=10;s/=10)o++;ft?o>i.maxE?(h.e=NaN,h.d=null):o<i.minE?(h.e=0,h.d=[0]):(h.e=o,h.d=[a]):(h.e=o,h.d=[a]);return}else if(a*0!==0){a||(h.s=NaN),h.e=NaN,h.d=null;return}return Mc(h,a.toString())}else if(l!=="string")throw Error(Ni+a);return(s=a.charCodeAt(0))===45?(a=a.slice(1),h.s=-1):(s===43&&(a=a.slice(1)),h.s=1),h1.test(a)?Mc(h,a):aE(h,a)}if(i.prototype=Me,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=bE,i.clone=_1,i.isDecimal=z0,i.abs=sE,i.acos=oE,i.acosh=lE,i.add=cE,i.asin=fE,i.asinh=hE,i.atan=dE,i.atanh=pE,i.atan2=gE,i.cbrt=vE,i.ceil=mE,i.clamp=_E,i.cos=DE,i.cosh=wE,i.div=yE,i.exp=EE,i.floor=AE,i.hypot=CE,i.ln=FE,i.log=SE,i.log10=OE,i.log2=BE,i.max=ME,i.min=PE,i.mod=kE,i.mul=TE,i.pow=IE,i.random=xE,i.round=NE,i.sign=LE,i.sin=RE,i.sinh=UE,i.sqrt=VE,i.sub=jE,i.sum=zE,i.tan=qE,i.tanh=WE,i.trunc=HE,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function yE(t,e){return new this(t).div(e)}function EE(t){return new this(t).exp()}function AE(t){return Xe(t=new this(t),t.e+1,3)}function CE(){var t,e,r=new this(0);for(ft=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return ft=!0,new this(1/0);r=e}return ft=!0,r.sqrt()}function z0(t){return t instanceof ka||t&&t.toStringTag===f1||!1}function FE(t){return new this(t).ln()}function SE(t,e){return new this(t).log(e)}function BE(t){return new this(t).log(2)}function OE(t){return new this(t).log(10)}function ME(){return g1(this,arguments,"lt")}function PE(){return g1(this,arguments,"gt")}function kE(t,e){return new this(t).mod(e)}function TE(t,e){return new this(t).mul(e)}function IE(t,e){return new this(t).pow(e)}function xE(t){var e,r,n,i,a=0,o=new this(1),s=[];if(t===void 0?t=this.precision:un(t,1,Ri),n=Math.ceil(t/nt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(s.push(i%1e7),a+=4);a=n/4}else throw Error(c1);else for(;a<n;)s[a++]=Math.random()*1e7|0;for(n=s[--a],t%=nt,n&&t&&(i=_r(10,nt-t),s[a]=(n/i|0)*i);s[a]===0;a--)s.pop();if(a<0)r=0,s=[0];else{for(r=-1;s[0]===0;r-=nt)s.shift();for(n=1,i=s[0];i>=10;i/=10)n++;n<nt&&(r-=nt-n)}return o.e=r,o.d=s,o}function NE(t){return Xe(t=new this(t),t.e+1,this.rounding)}function LE(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function RE(t){return new this(t).sin()}function UE(t){return new this(t).sinh()}function VE(t){return new this(t).sqrt()}function jE(t,e){return new this(t).sub(e)}function zE(){var t=0,e=arguments,r=new this(e[t]);for(ft=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return ft=!0,Xe(r,this.precision,this.rounding)}function qE(t){return new this(t).tan()}function WE(t){return new this(t).tanh()}function HE(t){return Xe(t=new this(t),t.e+1,1)}Me[Symbol.for("nodejs.util.inspect.custom")]=Me.toString;Me[Symbol.toStringTag]="Decimal";var ka=Me.constructor=_1(Sc);Vs=new ka(Vs);js=new ka(js);var $E="BigNumber",GE=["?on","config"],KE=Bt($E,GE,t=>{var{on:e,config:r}=t,n=ka.clone({precision:r.precision,modulo:ka.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&n.config({precision:i.precision})}),n},{isClass:!0}),dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pc={},YE={get exports(){return Pc},set exports(t){Pc=t}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=Math.cosh||function(f){return Math.abs(f)<1e-9?1-f:(Math.exp(f)+Math.exp(-f))*.5},i=Math.sinh||function(f){return Math.abs(f)<1e-9?f:(Math.exp(f)-Math.exp(-f))*.5},a=function(f){var p=Math.PI/4;if(-p>f||f>p)return Math.cos(f)-1;var g=f*f;return g*(g*(g*(g*(g*(g*(g*(g/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(f,p){var g=Math.abs(f),b=Math.abs(p);return g<3e3&&b<3e3?Math.sqrt(g*g+b*b):(g<b?(g=b,b=f/p):b=p/f,g*Math.sqrt(1+b*b))},s=function(){throw SyntaxError("Invalid Param")};function l(f,p){var g=Math.abs(f),b=Math.abs(p);return f===0?Math.log(b):p===0?Math.log(g):g<3e3&&b<3e3?Math.log(f*f+p*p)*.5:(f=f/2,p=p/2,.5*Math.log(f*f+p*p)+Math.LN2)}var h=function(f,p){var g={re:0,im:0};if(f==null)g.re=g.im=0;else if(p!==void 0)g.re=f,g.im=p;else switch(typeof f){case"object":if("im"in f&&"re"in f)g.re=f.re,g.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return c.INFINITY;g.re=f.abs*Math.cos(f.arg),g.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return c.INFINITY;g.re=f.r*Math.cos(f.phi),g.im=f.r*Math.sin(f.phi)}else f.length===2?(g.re=f[0],g.im=f[1]):s();break;case"string":g.im=g.re=0;var b=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,m=0;b===null&&s();for(var D=0;D<b.length;D++){var S=b[D];S===" "||S==="	"||S===`
`||(S==="+"?v++:S==="-"?m++:S==="i"||S==="I"?(v+m===0&&s(),b[D+1]!==" "&&!isNaN(b[D+1])?(g.im+=parseFloat((m%2?"-":"")+b[D+1]),D++):g.im+=parseFloat((m%2?"-":"")+"1"),v=m=0):((v+m===0||isNaN(S))&&s(),b[D+1]==="i"||b[D+1]==="I"?(g.im+=parseFloat((m%2?"-":"")+S),D++):g.re+=parseFloat((m%2?"-":"")+S),v=m=0))}v+m>0&&s();break;case"number":g.im=0,g.re=f;break;default:s()}return isNaN(g.re)||isNaN(g.im),g};function c(f,p){if(!(this instanceof c))return new c(f,p);var g=h(f,p);this.re=g.re,this.im=g.im}c.prototype={re:0,im:0,sign:function(){var f=this.abs();return new c(this.re/f,this.im/f)},add:function(f,p){var g=new c(f,p);return this.isInfinite()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:new c(this.re+g.re,this.im+g.im)},sub:function(f,p){var g=new c(f,p);return this.isInfinite()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:new c(this.re-g.re,this.im-g.im)},mul:function(f,p){var g=new c(f,p);return this.isInfinite()&&g.isZero()||this.isZero()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:g.im===0&&this.im===0?new c(this.re*g.re,0):new c(this.re*g.re-this.im*g.im,this.re*g.im+this.im*g.re)},div:function(f,p){var g=new c(f,p);if(this.isZero()&&g.isZero()||this.isInfinite()&&g.isInfinite())return c.NAN;if(this.isInfinite()||g.isZero())return c.INFINITY;if(this.isZero()||g.isInfinite())return c.ZERO;f=this.re,p=this.im;var b=g.re,v=g.im,m,D;return v===0?new c(f/b,p/b):Math.abs(b)<Math.abs(v)?(D=b/v,m=b*D+v,new c((f*D+p)/m,(p*D-f)/m)):(D=v/b,m=v*D+b,new c((f+p*D)/m,(p-f*D)/m))},pow:function(f,p){var g=new c(f,p);if(f=this.re,p=this.im,g.isZero())return c.ONE;if(g.im===0){if(p===0&&f>0)return new c(Math.pow(f,g.re),0);if(f===0)switch((g.re%4+4)%4){case 0:return new c(Math.pow(p,g.re),0);case 1:return new c(0,Math.pow(p,g.re));case 2:return new c(-Math.pow(p,g.re),0);case 3:return new c(0,-Math.pow(p,g.re))}}if(f===0&&p===0&&g.re>0&&g.im>=0)return c.ZERO;var b=Math.atan2(p,f),v=l(f,p);return f=Math.exp(g.re*v-g.im*b),p=g.im*v+g.re*b,new c(f*Math.cos(p),f*Math.sin(p))},sqrt:function(){var f=this.re,p=this.im,g=this.abs(),b,v;if(f>=0){if(p===0)return new c(Math.sqrt(f),0);b=.5*Math.sqrt(2*(g+f))}else b=Math.abs(p)/Math.sqrt(2*(g-f));return f<=0?v=.5*Math.sqrt(2*(g-f)):v=Math.abs(p)/Math.sqrt(2*(g+f)),new c(b,p<0?-v:v)},exp:function(){var f=Math.exp(this.re);return this.im,new c(f*Math.cos(this.im),f*Math.sin(this.im))},expm1:function(){var f=this.re,p=this.im;return new c(Math.expm1(f)*Math.cos(p)+a(p),Math.exp(f)*Math.sin(p))},log:function(){var f=this.re,p=this.im;return new c(l(f,p),Math.atan2(p,f))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var f=this.re,p=this.im;return new c(Math.sin(f)*n(p),Math.cos(f)*i(p))},cos:function(){var f=this.re,p=this.im;return new c(Math.cos(f)*n(p),-Math.sin(f)*i(p))},tan:function(){var f=2*this.re,p=2*this.im,g=Math.cos(f)+n(p);return new c(Math.sin(f)/g,i(p)/g)},cot:function(){var f=2*this.re,p=2*this.im,g=Math.cos(f)-n(p);return new c(-Math.sin(f)/g,i(p)/g)},sec:function(){var f=this.re,p=this.im,g=.5*n(2*p)+.5*Math.cos(2*f);return new c(Math.cos(f)*n(p)/g,Math.sin(f)*i(p)/g)},csc:function(){var f=this.re,p=this.im,g=.5*n(2*p)-.5*Math.cos(2*f);return new c(Math.sin(f)*n(p)/g,-Math.cos(f)*i(p)/g)},asin:function(){var f=this.re,p=this.im,g=new c(p*p-f*f+1,-2*f*p).sqrt(),b=new c(g.re-p,g.im+f).log();return new c(b.im,-b.re)},acos:function(){var f=this.re,p=this.im,g=new c(p*p-f*f+1,-2*f*p).sqrt(),b=new c(g.re-p,g.im+f).log();return new c(Math.PI/2-b.im,b.re)},atan:function(){var f=this.re,p=this.im;if(f===0){if(p===1)return new c(0,1/0);if(p===-1)return new c(0,-1/0)}var g=f*f+(1-p)*(1-p),b=new c((1-p*p-f*f)/g,-2*f/g).log();return new c(-.5*b.im,.5*b.re)},acot:function(){var f=this.re,p=this.im;if(p===0)return new c(Math.atan2(1,f),0);var g=f*f+p*p;return g!==0?new c(f/g,-p/g).atan():new c(f!==0?f/0:0,p!==0?-p/0:0).atan()},asec:function(){var f=this.re,p=this.im;if(f===0&&p===0)return new c(0,1/0);var g=f*f+p*p;return g!==0?new c(f/g,-p/g).acos():new c(f!==0?f/0:0,p!==0?-p/0:0).acos()},acsc:function(){var f=this.re,p=this.im;if(f===0&&p===0)return new c(Math.PI/2,1/0);var g=f*f+p*p;return g!==0?new c(f/g,-p/g).asin():new c(f!==0?f/0:0,p!==0?-p/0:0).asin()},sinh:function(){var f=this.re,p=this.im;return new c(i(f)*Math.cos(p),n(f)*Math.sin(p))},cosh:function(){var f=this.re,p=this.im;return new c(n(f)*Math.cos(p),i(f)*Math.sin(p))},tanh:function(){var f=2*this.re,p=2*this.im,g=n(f)+Math.cos(p);return new c(i(f)/g,Math.sin(p)/g)},coth:function(){var f=2*this.re,p=2*this.im,g=n(f)-Math.cos(p);return new c(i(f)/g,-Math.sin(p)/g)},csch:function(){var f=this.re,p=this.im,g=Math.cos(2*p)-n(2*f);return new c(-2*i(f)*Math.cos(p)/g,2*n(f)*Math.sin(p)/g)},sech:function(){var f=this.re,p=this.im,g=Math.cos(2*p)+n(2*f);return new c(2*n(f)*Math.cos(p)/g,-2*i(f)*Math.sin(p)/g)},asinh:function(){var f=this.im;this.im=-this.re,this.re=f;var p=this.asin();return this.re=-this.im,this.im=f,f=p.re,p.re=-p.im,p.im=f,p},acosh:function(){var f=this.acos();if(f.im<=0){var p=f.re;f.re=-f.im,f.im=p}else{var p=f.im;f.im=-f.re,f.re=p}return f},atanh:function(){var f=this.re,p=this.im,g=f>1&&p===0,b=1-f,v=1+f,m=b*b+p*p,D=m!==0?new c((v*b-p*p)/m,(p*b+v*p)/m):new c(f!==-1?f/0:0,p!==0?p/0:0),S=D.re;return D.re=l(D.re,D.im)/2,D.im=Math.atan2(D.im,S)/2,g&&(D.im=-D.im),D},acoth:function(){var f=this.re,p=this.im;if(f===0&&p===0)return new c(0,Math.PI/2);var g=f*f+p*p;return g!==0?new c(f/g,-p/g).atanh():new c(f!==0?f/0:0,p!==0?-p/0:0).atanh()},acsch:function(){var f=this.re,p=this.im;if(p===0)return new c(f!==0?Math.log(f+Math.sqrt(f*f+1)):1/0,0);var g=f*f+p*p;return g!==0?new c(f/g,-p/g).asinh():new c(f!==0?f/0:0,p!==0?-p/0:0).asinh()},asech:function(){var f=this.re,p=this.im;if(this.isZero())return c.INFINITY;var g=f*f+p*p;return g!==0?new c(f/g,-p/g).acosh():new c(f!==0?f/0:0,p!==0?-p/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var f=this.re,p=this.im,g=f*f+p*p;return new c(f/g,-p/g)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(f){return f=Math.pow(10,f||0),new c(Math.ceil(this.re*f)/f,Math.ceil(this.im*f)/f)},floor:function(f){return f=Math.pow(10,f||0),new c(Math.floor(this.re*f)/f,Math.floor(this.im*f)/f)},round:function(f){return f=Math.pow(10,f||0),new c(Math.round(this.re*f)/f,Math.round(this.im*f)/f)},equals:function(f,p){var g=new c(f,p);return Math.abs(g.re-this.re)<=c.EPSILON&&Math.abs(g.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var f=this.re,p=this.im,g="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(f)<c.EPSILON&&(f=0),Math.abs(p)<c.EPSILON&&(p=0),p===0?g+f:(f!==0?(g+=f,g+=" ",p<0?(p=-p,g+="-"):g+="+",g+=" "):p<0&&(p=-p,g+="-"),p!==1&&(g+=p),g+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,t.exports=c})()})(YE);const Pr=Qc(Pc);var ZE="Complex",JE=[],QE=Bt(ZE,JE,()=>(Object.defineProperty(Pr,"name",{value:"Complex"}),Pr.prototype.constructor=Pr,Pr.prototype.type="Complex",Pr.prototype.isComplex=!0,Pr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Pr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Pr.prototype.format=function(t){var e="",r=this.im,n=this.re,i=Ac(this.re,t),a=Ac(this.im,t),o=rr(t)?t:t?t.precision:null;if(o!==null){var s=Math.pow(10,-o);Math.abs(n/r)<s&&(n=0),Math.abs(r/n)<s&&(r=0)}return r===0?e=i:n===0?r===1?e="i":r===-1?e="-i":e=a+"i":r<0?r===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+a+"i",e},Pr.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Pr(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(rr(r)){if(Jp(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),rr(n))return new Pr({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Pr.prototype.valueOf=Pr.prototype.toString,Pr.fromJSON=function(t){return new Pr(t)},Pr.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Pr),{isClass:!0}),kc={},XE={get exports(){return kc},set exports(t){kc=t}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=2e3,i={s:1,n:0,d:1};function a(b,v){if(isNaN(b=parseInt(b,10)))throw g.InvalidParameter;return b*v}function o(b,v){if(v===0)throw g.DivisionByZero;var m=Object.create(g.prototype);m.s=b<0?-1:1,b=b<0?-b:b;var D=p(b,v);return m.n=b/D,m.d=v/D,m}function s(b){for(var v={},m=b,D=2,S=4;S<=m;){for(;m%D===0;)m/=D,v[D]=(v[D]||0)+1;S+=1+2*D++}return m!==b?m>1&&(v[m]=(v[m]||0)+1):v[b]=(v[b]||0)+1,v}var l=function(b,v){var m=0,D=1,S=1,y=0,A=0,C=0,P=1,O=1,F=0,x=1,z=1,G=1,J=1e7,R;if(b!=null)if(v!==void 0){if(m=b,D=v,S=m*D,m%1!==0||D%1!==0)throw g.NonIntegerParameter}else switch(typeof b){case"object":{if("d"in b&&"n"in b)m=b.n,D=b.d,"s"in b&&(m*=b.s);else if(0 in b)m=b[0],1 in b&&(D=b[1]);else throw g.InvalidParameter;S=m*D;break}case"number":{if(b<0&&(S=b,b=-b),b%1===0)m=b;else if(b>0){for(b>=1&&(O=Math.pow(10,Math.floor(1+Math.log(b)/Math.LN10)),b/=O);x<=J&&G<=J;)if(R=(F+z)/(x+G),b===R){x+G<=J?(m=F+z,D=x+G):G>x?(m=z,D=G):(m=F,D=x);break}else b>R?(F+=z,x+=G):(z+=F,G+=x),x>J?(m=z,D=G):(m=F,D=x);m*=O}else(isNaN(b)||isNaN(v))&&(D=m=NaN);break}case"string":{if(x=b.match(/\d+|./g),x===null)throw g.InvalidParameter;if(x[F]==="-"?(S=-1,F++):x[F]==="+"&&F++,x.length===F+1?A=a(x[F++],S):x[F+1]==="."||x[F]==="."?(x[F]!=="."&&(y=a(x[F++],S)),F++,(F+1===x.length||x[F+1]==="("&&x[F+3]===")"||x[F+1]==="'"&&x[F+3]==="'")&&(A=a(x[F],S),P=Math.pow(10,x[F].length),F++),(x[F]==="("&&x[F+2]===")"||x[F]==="'"&&x[F+2]==="'")&&(C=a(x[F+1],S),O=Math.pow(10,x[F+1].length)-1,F+=3)):x[F+1]==="/"||x[F+1]===":"?(A=a(x[F],S),P=a(x[F+2],1),F+=3):x[F+3]==="/"&&x[F+1]===" "&&(y=a(x[F],S),A=a(x[F+2],S),P=a(x[F+4],1),F+=5),x.length<=F){D=P*O,S=m=C+D*y+O*A;break}}default:throw g.InvalidParameter}if(D===0)throw g.DivisionByZero;i.s=S<0?-1:1,i.n=Math.abs(m),i.d=Math.abs(D)};function h(b,v,m){for(var D=1;v>0;b=b*b%m,v>>=1)v&1&&(D=D*b%m);return D}function c(b,v){for(;v%2===0;v/=2);for(;v%5===0;v/=5);if(v===1)return 0;for(var m=10%v,D=1;m!==1;D++)if(m=m*10%v,D>n)return 0;return D}function f(b,v,m){for(var D=1,S=h(10,m,v),y=0;y<300;y++){if(D===S)return y;D=D*10%v,S=S*10%v}return 0}function p(b,v){if(!b)return v;if(!v)return b;for(;;){if(b%=v,!b)return v;if(v%=b,!v)return b}}function g(b,v){if(l(b,v),this instanceof g)b=p(i.d,i.n),this.s=i.s,this.n=i.n/b,this.d=i.d/b;else return o(i.s*i.n,i.d)}g.DivisionByZero=new Error("Division by Zero"),g.InvalidParameter=new Error("Invalid argument"),g.NonIntegerParameter=new Error("Parameters must be integer"),g.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(b,v){return l(b,v),o(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(b,v){return l(b,v),o(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(b,v){return l(b,v),o(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(b,v){return l(b,v),o(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(b,v){if(isNaN(this.n)||isNaN(this.d))return new g(NaN);if(b===void 0)return o(this.s*this.n%this.d,1);if(l(b,v),i.n===0&&this.d===0)throw g.DivisionByZero;return o(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(b,v){return l(b,v),o(p(i.n,this.n)*p(i.d,this.d),i.d*this.d)},lcm:function(b,v){return l(b,v),i.n===0&&this.n===0?o(0,1):o(i.n*this.n,p(i.n,this.n)*p(i.d,this.d))},ceil:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.ceil(b*this.s*this.n/this.d),b)},floor:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.floor(b*this.s*this.n/this.d),b)},round:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.round(b*this.s*this.n/this.d),b)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(b,v){if(l(b,v),i.d===1)return i.s<0?o(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):o(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var m=s(this.n),D=s(this.d),S=1,y=1;for(var A in m)if(A!=="1"){if(A==="0"){S=0;break}if(m[A]*=i.n,m[A]%i.d===0)m[A]/=i.d;else return null;S*=Math.pow(A,m[A])}for(var A in D)if(A!=="1"){if(D[A]*=i.n,D[A]%i.d===0)D[A]/=i.d;else return null;y*=Math.pow(A,D[A])}return i.s<0?o(y,S):o(S,y)},equals:function(b,v){return l(b,v),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(b,v){l(b,v);var m=this.s*this.n*i.d-i.s*i.n*this.d;return(0<m)-(m<0)},simplify:function(b){if(isNaN(this.n)||isNaN(this.d))return this;b=b||.001;for(var v=this.abs(),m=v.toContinued(),D=1;D<m.length;D++){for(var S=o(m[D-1],1),y=D-2;y>=0;y--)S=S.inverse().add(m[y]);if(S.sub(v).abs().valueOf()<b)return S.mul(this.s)}return this},divisible:function(b,v){return l(b,v),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(b){var v,m="",D=this.n,S=this.d;return this.s<0&&(m+="-"),S===1?m+=D:(b&&(v=Math.floor(D/S))>0&&(m+=v,m+=" ",D%=S),m+=D,m+="/",m+=S),m},toLatex:function(b){var v,m="",D=this.n,S=this.d;return this.s<0&&(m+="-"),S===1?m+=D:(b&&(v=Math.floor(D/S))>0&&(m+=v,D%=S),m+="\\frac{",m+=D,m+="}{",m+=S,m+="}"),m},toContinued:function(){var b,v=this.n,m=this.d,D=[];if(isNaN(v)||isNaN(m))return D;do D.push(Math.floor(v/m)),b=v%m,v=m,m=b;while(v!==1);return D},toString:function(b){var v=this.n,m=this.d;if(isNaN(v)||isNaN(m))return"NaN";b=b||15;var D=c(v,m),S=f(v,m,D),y=this.s<0?"-":"";if(y+=v/m|0,v%=m,v*=10,v&&(y+="."),D){for(var A=S;A--;)y+=v/m|0,v%=m,v*=10;y+="(";for(var A=D;A--;)y+=v/m|0,v%=m,v*=10;y+=")"}else for(var A=b;v&&A--;)y+=v/m|0,v%=m,v*=10;return y}},Object.defineProperty(g,"__esModule",{value:!0}),g.default=g,g.Fraction=g,t.exports=g})()})(XE);const hi=Qc(kc);var eA="Fraction",tA=[],rA=Bt(eA,tA,()=>(Object.defineProperty(hi,"name",{value:"Fraction"}),hi.prototype.constructor=hi,hi.prototype.type="Fraction",hi.prototype.isFraction=!0,hi.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},hi.fromJSON=function(t){return new hi(t)},hi),{isClass:!0}),nA="Matrix",iA=[],aA=Bt(nA,iA,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function b1(t){return Object.keys(t.signatures||{}).reduce(function(e,r){var n=(r.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var uA="DenseMatrix",sA=["Matrix"],oA=Bt(uA,sA,t=>{var{Matrix:e}=t;function r(c,f){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Yn(f))throw new Error("Invalid datatype: "+f);if(Zr(c))c.type==="DenseMatrix"?(this._data=Cr(c._data),this._size=Cr(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&er(c.data)&&er(c.size))this._data=c.data,this._size=c.size,R0(this._data,this._size),this._datatype=f||c.datatype;else if(er(c))this._data=h(c),this._size=xi(this._data),R0(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+Du(c)+")");this._data=[],this._size=[0],this._datatype=f}}r.prototype=new e,r.prototype.createDenseMatrix=function(c,f){return new r(c,f)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return Us(this._data,Du)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(c,f){return new r(c,f)},r.prototype.subset=function(c,f,p){switch(arguments.length){case 1:return n(this,c);case 2:case 3:return a(this,c,f,p);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(c){if(!er(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new Tt(c.length,this._size.length);for(var f=0;f<c.length;f++)tr(c[f],this._size[f]);for(var p=this._data,g=0,b=c.length;g<b;g++){var v=c[g];tr(v,p.length),p=p[v]}return p},r.prototype.set=function(c,f,p){if(!er(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new Tt(c.length,this._size.length,"<");var g,b,v,m=c.map(function(S){return S+1});l(this,m,p);var D=this._data;for(g=0,b=c.length-1;g<b;g++)v=c[g],tr(v,D.length),D=D[v];return v=c[c.length-1],tr(v,D.length),D[v]=f,this};function n(c,f){if(!Kc(f))throw new TypeError("Invalid index");var p=f.isScalar();if(p)return c.get(f.min());var g=f.size();if(g.length!==c._size.length)throw new Tt(g.length,c._size.length);for(var b=f.min(),v=f.max(),m=0,D=c._size.length;m<D;m++)tr(b[m],c._size[m]),tr(v[m],c._size[m]);return new r(i(c._data,f,g.length,0),c._datatype)}function i(c,f,p,g){var b=g===p-1,v=f.dimension(g);return b?v.map(function(m){return tr(m,c.length),c[m]}).valueOf():v.map(function(m){tr(m,c.length);var D=c[m];return i(D,f,p,g+1)}).valueOf()}function a(c,f,p,g){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var b=f.size(),v=f.isScalar(),m;if(Zr(p)?(m=p.size(),p=p.valueOf()):m=xi(p),v){if(m.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),p,g)}else{if(b.length<c._size.length)throw new Tt(b.length,c._size.length,"<");if(m.length<b.length){for(var D=0,S=0;b[D]===1&&m[D]===1;)D++;for(;b[D]===1;)S++,D++;p=n1(p,b.length,S,m)}if(!Ls(b,m))throw new Tt(b,m,">");var y=f.max().map(function(P){return P+1});l(c,y,g);var A=b.length,C=0;o(c._data,f,p,A,C)}return c}function o(c,f,p,g,b){var v=b===g-1,m=f.dimension(b);v?m.forEach(function(D,S){tr(D),c[D]=p[S[0]]}):m.forEach(function(D,S){tr(D),o(c[D],f,p[S[0]],g,b+1)})}r.prototype.resize=function(c,f,p){if(!Ns(c))throw new TypeError("Array or Matrix expected");var g=c.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),b=p?this.clone():this;return s(b,g,f)};function s(c,f,p){if(f.length===0){for(var g=c._data;er(g);)g=g[0];return g}return c._size=f.slice(0),c._data=U0(c._data,c._size,p),c}r.prototype.reshape=function(c,f){var p=f?this.clone():this;p._data=Ny(p._data,c);var g=p._size.reduce((b,v)=>b*v);return p._size=Zc(c,g),p};function l(c,f,p){for(var g=c._size.slice(0),b=!1;g.length<f.length;)g.push(0),b=!0;for(var v=0,m=f.length;v<m;v++)f[v]>g[v]&&(g[v]=f[v],b=!0);b&&s(c,g,p)}r.prototype.clone=function(){var c=new r({data:Cr(this._data),size:Cr(this._size),datatype:this._datatype});return c},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(c){var f=this,p=b1(c),g=function m(D,S){return er(D)?D.map(function(y,A){return m(y,S.concat(A))}):p===1?c(D):p===2?c(D,S):c(D,S,f)},b=g(this._data,[]),v=this._datatype!==void 0?Us(b,Du):void 0;return new r(b,v)},r.prototype.forEach=function(c){var f=this,p=function g(b,v){er(b)?b.forEach(function(m,D){g(m,v.concat(D))}):c(b,v,f)};p(this._data,[])},r.prototype[Symbol.iterator]=function*(){var c=function*f(p,g){if(er(p))for(var b=0;b<p.length;b++)yield*f(p[b],g.concat(b));else yield{value:p,index:g}};yield*c(this._data,[])},r.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var p=this._data;for(var g of p)c.push(new r([g],this._datatype));return c},r.prototype.columns=function(){var c=this,f=[],p=this.size();if(p.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var g=this._data,b=function(D){var S=g.map(y=>[y[D]]);f.push(new r(S,c._datatype))},v=0;v<p[1];v++)b(v);return f},r.prototype.toArray=function(){return Cr(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(c){return nn(this._data,c)},r.prototype.toString=function(){return nn(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(c){if(c){if(Bn(c)&&(c=c.toNumber()),!rr(c)||!Fr(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,p=c<0?-c:0,g=this._size[0],b=this._size[1],v=Math.min(g-p,b-f),m=[],D=0;D<v;D++)m[D]=this._data[D+p][D+f];return new r({data:m,size:[v],datatype:this._datatype})},r.diagonal=function(c,f,p,g){if(!er(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(O){if(Bn(O)&&(O=O.toNumber()),!rr(O)||!Fr(O)||O<1)throw new Error("Size values must be positive integers");return O}),p){if(Bn(p)&&(p=p.toNumber()),!rr(p)||!Fr(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var b=p>0?p:0,v=p<0?-p:0,m=c[0],D=c[1],S=Math.min(m-v,D-b),y;if(er(f)){if(f.length!==S)throw new Error("Invalid value array length");y=function(F){return f[F]}}else if(Zr(f)){var A=f.size();if(A.length!==1||A[0]!==S)throw new Error("Invalid matrix length");y=function(F){return f.get([F])}}else y=function(){return f};g||(g=Bn(y(0))?y(0).mul(0):0);var C=[];if(c.length>0){C=U0(C,c,g);for(var P=0;P<S;P++)C[P+v][P+b]=y(P)}return new r({data:C,size:[m,D]})},r.fromJSON=function(c){return new r(c)},r.prototype.swapRows=function(c,f){if(!rr(c)||!Fr(c)||!rr(f)||!Fr(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return tr(c,this._size[0]),tr(f,this._size[0]),r._swapRows(c,f,this._data),this},r._swapRows=function(c,f,p){var g=p[c];p[c]=p[f],p[f]=g};function h(c){for(var f=0,p=c.length;f<p;f++){var g=c[f];er(g)?c[f]=h(g):g&&g.isMatrix===!0&&(c[f]=h(g.valueOf()))}return c}return r},{isClass:!0});function mo(t,e,r){return t&&typeof t.map=="function"?t.map(function(n){return mo(n,e)}):e(t)}var q0="isInteger",lA=["typed"],cA=Bt(q0,lA,t=>{var{typed:e}=t;return e(q0,{number:Fr,BigNumber:function(n){return n.isInt()},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":e.referToSelf(r=>n=>mo(n,r))})}),fA="number",D1="number, number";function w1(t,e){return t+e}w1.signature=D1;function y1(t,e){return t*e}y1.signature=D1;function E1(t){return-t}E1.signature=fA;function hA(t,e,r){if(r==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return n.lte(i.times(r))}return!1}function dA(t,e,r){return Rs(t.re,e.re,r)&&Rs(t.im,e.im,r)}var pA=Bt("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),qs="equalScalar",gA=["typed","config"],vA=Bt(qs,gA,t=>{var{typed:e,config:r}=t,n=pA({typed:e});return e(qs,{"boolean, boolean":function(a,o){return a===o},"number, number":function(a,o){return Rs(a,o,r.epsilon)},"BigNumber, BigNumber":function(a,o){return a.eq(o)||hA(a,o,r.epsilon)},"Fraction, Fraction":function(a,o){return a.equals(o)},"Complex, Complex":function(a,o){return dA(a,o,r.epsilon)}},n)});Bt(qs,["typed","config"],t=>{var{typed:e,config:r}=t;return e(qs,{"number, number":function(i,a){return Rs(i,a,r.epsilon)}})});var mA="SparseMatrix",_A=["typed","equalScalar","Matrix"],bA=Bt(mA,_A,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(v,m){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!Yn(m))throw new Error("Invalid datatype: "+m);if(Zr(v))a(this,v,m);else if(v&&er(v.index)&&er(v.ptr)&&er(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=m||v.datatype;else if(er(v))o(this,v,m);else{if(v)throw new TypeError("Unsupported type of data ("+Du(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function a(v,m,D){m.type==="SparseMatrix"?(v._values=m._values?Cr(m._values):void 0,v._index=Cr(m._index),v._ptr=Cr(m._ptr),v._size=Cr(m._size),v._datatype=D||m._datatype):o(v,m.valueOf(),D||m._datatype)}function o(v,m,D){v._values=[],v._index=[],v._ptr=[],v._datatype=D;var S=m.length,y=0,A=r,C=0;if(Yn(D)&&(A=e.find(r,[D,D])||r,C=e.convert(0,D)),S>0){var P=0;do{v._ptr.push(v._index.length);for(var O=0;O<S;O++){var F=m[O];if(er(F)){if(P===0&&y<F.length&&(y=F.length),P<F.length){var x=F[P];A(x,C)||(v._values.push(x),v._index.push(O))}}else P===0&&y<1&&(y=1),A(F,C)||(v._values.push(F),v._index.push(O))}P++}while(P<y)}v._ptr.push(v._index.length),v._size=[S,y]}i.prototype=new n,i.prototype.createSparseMatrix=function(v,m){return new i(v,m)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Us(this._values,Du)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(v,m){return new i(v,m)},i.prototype.density=function(){var v=this._size[0],m=this._size[1];return v!==0&&m!==0?this._index.length/(v*m):0},i.prototype.subset=function(v,m,D){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,v);case 2:case 3:return l(this,v,m,D);default:throw new SyntaxError("Wrong number of arguments")}};function s(v,m){if(!Kc(m))throw new TypeError("Invalid index");var D=m.isScalar();if(D)return v.get(m.min());var S=m.size();if(S.length!==v._size.length)throw new Tt(S.length,v._size.length);var y,A,C,P,O=m.min(),F=m.max();for(y=0,A=v._size.length;y<A;y++)tr(O[y],v._size[y]),tr(F[y],v._size[y]);var x=v._values,z=v._index,G=v._ptr,J=m.dimension(0),R=m.dimension(1),N=[],j=[];J.forEach(function(te,fe){j[te]=fe[0],N[te]=!0});var q=x?[]:void 0,Z=[],X=[];return R.forEach(function(te){for(X.push(Z.length),C=G[te],P=G[te+1];C<P;C++)y=z[C],N[y]===!0&&(Z.push(j[y]),q&&q.push(x[C]))}),X.push(Z.length),new i({values:q,index:Z,ptr:X,size:S,datatype:v._datatype})}function l(v,m,D,S){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var y=m.size(),A=m.isScalar(),C;if(Zr(D)?(C=D.size(),D=D.toArray()):C=xi(D),A){if(C.length!==0)throw new TypeError("Scalar expected");v.set(m.min(),D,S)}else{if(y.length!==1&&y.length!==2)throw new Tt(y.length,v._size.length,"<");if(C.length<y.length){for(var P=0,O=0;y[P]===1&&C[P]===1;)P++;for(;y[P]===1;)O++,P++;D=n1(D,y.length,O,C)}if(!Ls(y,C))throw new Tt(y,C,">");if(y.length===1){var F=m.dimension(0);F.forEach(function(G,J){tr(G),v.set([G,0],D[J[0]],S)})}else{var x=m.dimension(0),z=m.dimension(1);x.forEach(function(G,J){tr(G),z.forEach(function(R,N){tr(R),v.set([G,R],D[J[0]][N[0]],S)})})}}return v}i.prototype.get=function(v){if(!er(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Tt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=v[0],D=v[1];tr(m,this._size[0]),tr(D,this._size[1]);var S=h(m,this._ptr[D],this._ptr[D+1],this._index);return S<this._ptr[D+1]&&this._index[S]===m?this._values[S]:0},i.prototype.set=function(v,m,D){if(!er(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Tt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var S=v[0],y=v[1],A=this._size[0],C=this._size[1],P=r,O=0;Yn(this._datatype)&&(P=e.find(r,[this._datatype,this._datatype])||r,O=e.convert(0,this._datatype)),(S>A-1||y>C-1)&&(p(this,Math.max(S+1,A),Math.max(y+1,C),D),A=this._size[0],C=this._size[1]),tr(S,A),tr(y,C);var F=h(S,this._ptr[y],this._ptr[y+1],this._index);return F<this._ptr[y+1]&&this._index[F]===S?P(m,O)?c(F,y,this._values,this._index,this._ptr):this._values[F]=m:P(m,O)||f(F,S,y,m,this._values,this._index,this._ptr),this};function h(v,m,D,S){if(D-m===0)return D;for(var y=m;y<D;y++)if(S[y]===v)return y;return m}function c(v,m,D,S,y){D.splice(v,1),S.splice(v,1);for(var A=m+1;A<y.length;A++)y[A]--}function f(v,m,D,S,y,A,C){y.splice(v,0,S),A.splice(v,0,m);for(var P=D+1;P<C.length;P++)C[P]++}i.prototype.resize=function(v,m,D){if(!Ns(v))throw new TypeError("Array or Matrix expected");var S=v.valueOf().map(A=>Array.isArray(A)&&A.length===1?A[0]:A);if(S.length!==2)throw new Error("Only two dimensions matrix are supported");S.forEach(function(A){if(!rr(A)||!Fr(A)||A<0)throw new TypeError("Invalid size, must contain positive integers (size: "+nn(S)+")")});var y=D?this.clone():this;return p(y,S[0],S[1],m)};function p(v,m,D,S){var y=S||0,A=r,C=0;Yn(v._datatype)&&(A=e.find(r,[v._datatype,v._datatype])||r,C=e.convert(0,v._datatype),y=e.convert(y,v._datatype));var P=!A(y,C),O=v._size[0],F=v._size[1],x,z,G;if(D>F){for(z=F;z<D;z++)if(v._ptr[z]=v._values.length,P)for(x=0;x<O;x++)v._values.push(y),v._index.push(x);v._ptr[D]=v._values.length}else D<F&&(v._ptr.splice(D+1,F-D),v._values.splice(v._ptr[D],v._values.length),v._index.splice(v._ptr[D],v._index.length));if(F=D,m>O){if(P){var J=0;for(z=0;z<F;z++){v._ptr[z]=v._ptr[z]+J,G=v._ptr[z+1]+J;var R=0;for(x=O;x<m;x++,R++)v._values.splice(G+R,0,y),v._index.splice(G+R,0,x),J++}v._ptr[F]=v._values.length}}else if(m<O){var N=0;for(z=0;z<F;z++){v._ptr[z]=v._ptr[z]-N;var j=v._ptr[z],q=v._ptr[z+1]-N;for(G=j;G<q;G++)x=v._index[G],x>m-1&&(v._values.splice(G,1),v._index.splice(G,1),N++)}v._ptr[z]=v._values.length}return v._size[0]=m,v._size[1]=D,v}i.prototype.reshape=function(v,m){if(!er(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(te){if(!rr(te)||!Fr(te)||te<=-2||te===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+nn(v)+")")});var D=this._size[0]*this._size[1];v=Zc(v,D);var S=v[0]*v[1];if(D!==S)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var y=m?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return y;for(var A=[],C=0;C<y._ptr.length;C++)for(var P=0;P<y._ptr[C+1]-y._ptr[C];P++)A.push(C);for(var O=y._values.slice(),F=y._index.slice(),x=0;x<y._index.length;x++){var z=F[x],G=A[x],J=z*y._size[1]+G;A[x]=J%v[1],F[x]=Math.floor(J/v[1])}y._values.length=0,y._index.length=0,y._ptr.length=v[1]+1,y._size=v.slice();for(var R=0;R<y._ptr.length;R++)y._ptr[R]=0;for(var N=0;N<O.length;N++){var j=F[N],q=A[N],Z=O[N],X=h(j,y._ptr[q],y._ptr[q+1],y._index);f(X,j,q,Z,y._values,y._index,y._ptr)}return y},i.prototype.clone=function(){var v=new i({values:this._values?Cr(this._values):void 0,index:Cr(this._index),ptr:Cr(this._ptr),size:Cr(this._size),datatype:this._datatype});return v},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(v,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var D=this,S=this._size[0],y=this._size[1],A=b1(v),C=function(O,F,x){return A===1?v(O):A===2?v(O,[F,x]):v(O,[F,x],D)};return g(this,0,S-1,0,y-1,C,m)};function g(v,m,D,S,y,A,C){var P=[],O=[],F=[],x=r,z=0;Yn(v._datatype)&&(x=e.find(r,[v._datatype,v._datatype])||r,z=e.convert(0,v._datatype));for(var G=function(_e,Be,ke){_e=A(_e,Be,ke),x(_e,z)||(P.push(_e),O.push(Be))},J=S;J<=y;J++){F.push(P.length);var R=v._ptr[J],N=v._ptr[J+1];if(C)for(var j=R;j<N;j++){var q=v._index[j];q>=m&&q<=D&&G(v._values[j],q-m,J-S)}else{for(var Z={},X=R;X<N;X++){var te=v._index[X];Z[te]=v._values[X]}for(var fe=m;fe<=D;fe++){var he=fe in Z?Z[fe]:0;G(he,fe-m,J-S)}}}return F.push(P.length),new i({values:P,index:O,ptr:F,size:[D-m+1,y-S+1]})}i.prototype.forEach=function(v,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var D=this,S=this._size[0],y=this._size[1],A=0;A<y;A++){var C=this._ptr[A],P=this._ptr[A+1];if(m)for(var O=C;O<P;O++){var F=this._index[O];v(this._values[O],[F,A],D)}else{for(var x={},z=C;z<P;z++){var G=this._index[z];x[G]=this._values[z]}for(var J=0;J<S;J++){var R=J in x?x[J]:0;v(R,[J,A],D)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],m=0;m<v;m++)for(var D=this._ptr[m],S=this._ptr[m+1],y=D;y<S;y++){var A=this._index[y];yield{value:this._values[y],index:[A,m]}}},i.prototype.toArray=function(){return b(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return b(this._values,this._index,this._ptr,this._size,!1)};function b(v,m,D,S,y){var A=S[0],C=S[1],P=[],O,F;for(O=0;O<A;O++)for(P[O]=[],F=0;F<C;F++)P[O][F]=0;for(F=0;F<C;F++)for(var x=D[F],z=D[F+1],G=x;G<z;G++)O=m[G],P[O][F]=v?y?Cr(v[G]):v[G]:1;return P}return i.prototype.format=function(v){for(var m=this._size[0],D=this._size[1],S=this.density(),y="Sparse Matrix ["+nn(m,v)+" x "+nn(D,v)+"] density: "+nn(S,v)+`
`,A=0;A<D;A++)for(var C=this._ptr[A],P=this._ptr[A+1],O=C;O<P;O++){var F=this._index[O];y+=`
    (`+nn(F,v)+", "+nn(A,v)+") ==> "+(this._values?nn(this._values[O],v):"X")}return y},i.prototype.toString=function(){return nn(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(v){if(v){if(Bn(v)&&(v=v.toNumber()),!rr(v)||!Fr(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var m=v>0?v:0,D=v<0?-v:0,S=this._size[0],y=this._size[1],A=Math.min(S-D,y-m),C=[],P=[],O=[];O[0]=0;for(var F=m;F<y&&C.length<A;F++)for(var x=this._ptr[F],z=this._ptr[F+1],G=x;G<z;G++){var J=this._index[G];if(J===F-m+D){C.push(this._values[G]),P[C.length-1]=J-D;break}}return O.push(C.length),new i({values:C,index:P,ptr:O,size:[A,1]})},i.fromJSON=function(v){return new i(v)},i.diagonal=function(v,m,D,S,y){if(!er(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(te){if(Bn(te)&&(te=te.toNumber()),!rr(te)||!Fr(te)||te<1)throw new Error("Size values must be positive integers");return te}),D){if(Bn(D)&&(D=D.toNumber()),!rr(D)||!Fr(D))throw new TypeError("The parameter k must be an integer number")}else D=0;var A=r,C=0;Yn(y)&&(A=e.find(r,[y,y])||r,C=e.convert(0,y));var P=D>0?D:0,O=D<0?-D:0,F=v[0],x=v[1],z=Math.min(F-O,x-P),G;if(er(m)){if(m.length!==z)throw new Error("Invalid value array length");G=function(fe){return m[fe]}}else if(Zr(m)){var J=m.size();if(J.length!==1||J[0]!==z)throw new Error("Invalid matrix length");G=function(fe){return m.get([fe])}}else G=function(){return m};for(var R=[],N=[],j=[],q=0;q<x;q++){j.push(R.length);var Z=q-P;if(Z>=0&&Z<z){var X=G(Z);A(X,C)||(N.push(Z+O),R.push(X))}}return j.push(R.length),new i({values:R,index:N,ptr:j,size:[F,x]})},i.prototype.swapRows=function(v,m){if(!rr(v)||!Fr(v)||!rr(m)||!Fr(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return tr(v,this._size[0]),tr(m,this._size[0]),i._swapRows(v,m,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(v,m,D,S,y){for(var A=S[v],C=S[v+1],P=A;P<C;P++)y(D[P],m[P])},i._swapRows=function(v,m,D,S,y,A){for(var C=0;C<D;C++){var P=A[C],O=A[C+1],F=h(v,P,O,y),x=h(m,P,O,y);if(F<O&&x<O&&y[F]===v&&y[x]===m){if(S){var z=S[F];S[F]=S[x],S[x]=z}continue}if(F<O&&y[F]===v&&(x>=O||y[x]!==m)){var G=S?S[F]:void 0;y.splice(x,0,m),S&&S.splice(x,0,G),y.splice(x<=F?F+1:F,1),S&&S.splice(x<=F?F+1:F,1);continue}if(x<O&&y[x]===m&&(F>=O||y[F]!==v)){var J=S?S[x]:void 0;y.splice(F,0,v),S&&S.splice(F,0,J),y.splice(F<=x?x+1:x,1),S&&S.splice(F<=x?x+1:x,1)}}},i},{isClass:!0}),W0="matrix",DA=["typed","Matrix","DenseMatrix","SparseMatrix"],wA=Bt(W0,DA,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(W0,{"":function(){return a([])},string:function(s){return a([],s)},"string, string":function(s,l){return a([],s,l)},Array:function(s){return a(s)},Matrix:function(s){return a(s,s.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(o,s,l){if(s==="dense"||s==="default"||s===void 0)return new n(o,l);if(s==="sparse")return new i(o,l);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),H0="unaryMinus",yA=["typed"],EA=Bt(H0,yA,t=>{var{typed:e}=t;return e(H0,{number:E1,"Complex | BigNumber | Fraction":r=>r.neg(),Unit:e.referToSelf(r=>n=>{var i=n.clone();return i.value=e.find(r,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(r=>n=>mo(n,r))})}),$0="addScalar",AA=["typed"],CA=Bt($0,AA,t=>{var{typed:e}=t;return e($0,{"number, number":w1,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),FA="matAlgo11xS0s",SA=["typed","equalScalar"],BA=Bt(FA,SA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o,s){var l=i._values,h=i._index,c=i._ptr,f=i._size,p=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=f[0],b=f[1],v,m=r,D=0,S=o;typeof p=="string"&&(v=p,m=e.find(r,[v,v]),D=e.convert(0,v),a=e.convert(a,v),S=e.find(o,[v,v]));for(var y=[],A=[],C=[],P=0;P<b;P++){C[P]=A.length;for(var O=c[P],F=c[P+1],x=O;x<F;x++){var z=h[x],G=s?S(a,l[x]):S(l[x],a);m(G,D)||(A.push(z),y.push(G))}}return C[b]=A.length,i.createSparseMatrix({values:y,index:A,ptr:C,size:[g,b],datatype:v})}}),OA="matAlgo12xSfs",MA=["typed","DenseMatrix"],PA=Bt(OA,MA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,o,s){var l=i._values,h=i._index,c=i._ptr,f=i._size,p=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=f[0],b=f[1],v,m=o;typeof p=="string"&&(v=p,a=e.convert(a,v),m=e.find(o,[v,v]));for(var D=[],S=[],y=[],A=0;A<b;A++){for(var C=A+1,P=c[A],O=c[A+1],F=P;F<O;F++){var x=h[F];S[x]=l[F],y[x]=C}for(var z=0;z<g;z++)A===0&&(D[z]=[]),y[z]===C?D[z][A]=s?m(a,S[z]):m(S[z],a):D[z][A]=s?m(a,0):m(0,a)}return new r({data:D,size:[g,b],datatype:v})}}),kA="matAlgo14xDs",TA=["typed"],A1=Bt(kA,TA,t=>{var{typed:e}=t;return function(i,a,o,s){var l=i._data,h=i._size,c=i._datatype,f,p=o;typeof c=="string"&&(f=c,a=e.convert(a,f),p=e.find(o,[f,f]));var g=h.length>0?r(p,0,h,h[0],l,a,s):[];return i.createDenseMatrix({data:g,size:Cr(h),datatype:f})};function r(n,i,a,o,s,l,h){var c=[];if(i===a.length-1)for(var f=0;f<o;f++)c[f]=h?n(l,s[f]):n(s[f],l);else for(var p=0;p<o;p++)c[p]=r(n,i+1,a,a[i+1],s[p],l,h);return c}}),IA="matAlgo01xDSid",xA=["typed"],C1=Bt(IA,xA,t=>{var{typed:e}=t;return function(n,i,a,o){var s=n._data,l=n._size,h=n._datatype,c=i._values,f=i._index,p=i._ptr,g=i._size,b=i._datatype;if(l.length!==g.length)throw new Tt(l.length,g.length);if(l[0]!==g[0]||l[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+g+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],m=l[1],D=typeof h=="string"&&h===b?h:void 0,S=D?e.find(a,[D,D]):a,y,A,C=[];for(y=0;y<v;y++)C[y]=[];var P=[],O=[];for(A=0;A<m;A++){for(var F=A+1,x=p[A],z=p[A+1],G=x;G<z;G++)y=f[G],P[y]=o?S(c[G],s[y][A]):S(s[y][A],c[G]),O[y]=F;for(y=0;y<v;y++)O[y]===F?C[y][A]=P[y]:C[y][A]=s[y][A]}return n.createDenseMatrix({data:C,size:[v,m],datatype:D})}}),NA="matAlgo04xSidSid",LA=["typed","equalScalar"],RA=Bt(NA,LA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,l=i._index,h=i._ptr,c=i._size,f=i._datatype,p=a._values,g=a._index,b=a._ptr,v=a._size,m=a._datatype;if(c.length!==v.length)throw new Tt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var D=c[0],S=c[1],y,A=r,C=0,P=o;typeof f=="string"&&f===m&&(y=f,A=e.find(r,[y,y]),C=e.convert(0,y),P=e.find(o,[y,y]));var O=s&&p?[]:void 0,F=[],x=[],z=s&&p?[]:void 0,G=s&&p?[]:void 0,J=[],R=[],N,j,q,Z,X;for(j=0;j<S;j++){x[j]=F.length;var te=j+1;for(Z=h[j],X=h[j+1],q=Z;q<X;q++)N=l[q],F.push(N),J[N]=te,z&&(z[N]=s[q]);for(Z=b[j],X=b[j+1],q=Z;q<X;q++)if(N=g[q],J[N]===te){if(z){var fe=P(z[N],p[q]);A(fe,C)?J[N]=null:z[N]=fe}}else F.push(N),R[N]=te,G&&(G[N]=p[q]);if(z&&G)for(q=x[j];q<F.length;)N=F[q],J[N]===te?(O[q]=z[N],q++):R[N]===te?(O[q]=G[N],q++):F.splice(q,1)}return x[S]=F.length,i.createSparseMatrix({values:O,index:F,ptr:x,size:[D,S],datatype:y})}}),UA="matAlgo10xSids",VA=["typed","DenseMatrix"],F1=Bt(UA,VA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,o,s){var l=i._values,h=i._index,c=i._ptr,f=i._size,p=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=f[0],b=f[1],v,m=o;typeof p=="string"&&(v=p,a=e.convert(a,v),m=e.find(o,[v,v]));for(var D=[],S=[],y=[],A=0;A<b;A++){for(var C=A+1,P=c[A],O=c[A+1],F=P;F<O;F++){var x=h[F];S[x]=l[F],y[x]=C}for(var z=0;z<g;z++)A===0&&(D[z]=[]),y[z]===C?D[z][A]=s?m(a,S[z]):m(S[z],a):D[z][A]=a}return new r({data:D,size:[g,b],datatype:v})}}),jA="matAlgo13xDD",zA=["typed"],qA=Bt(jA,zA,t=>{var{typed:e}=t;return function(i,a,o){var s=i._data,l=i._size,h=i._datatype,c=a._data,f=a._size,p=a._datatype,g=[];if(l.length!==f.length)throw new Tt(l.length,f.length);for(var b=0;b<l.length;b++){if(l[b]!==f[b])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");g[b]=l[b]}var v,m=o;typeof h=="string"&&h===p&&(v=h,m=e.find(o,[v,v]));var D=g.length>0?r(m,0,g,g[0],s,c):[];return i.createDenseMatrix({data:D,size:g,datatype:v})};function r(n,i,a,o,s,l){var h=[];if(i===a.length-1)for(var c=0;c<o;c++)h[c]=n(s[c],l[c]);else for(var f=0;f<o;f++)h[f]=r(n,i+1,a,a[i+1],s[f],l[f]);return h}}),WA="broadcast",HA=["concat"],$A=Bt(WA,HA,t=>{var{concat:e}=t;return function(a,o){var s=Math.max(a._size.length,o._size.length);if(a._size.length===o._size.length&&a._size.every((m,D)=>m===o._size[D]))return[a,o];for(var l=r(a._size,s,0),h=r(o._size,s,0),c=[],f=0;f<s;f++)c[f]=Math.max(l[f],h[f]);for(var p=0;p<s;p++)i(l,c,p),i(h,c,p);var g=a.clone(),b=o.clone();g._size.length<s?g.reshape(r(g._size,s,1)):b._size.length<s&&b.reshape(r(b._size,s,1));for(var v=0;v<s;v++)g._size[v]<c[v]&&(g=n(g,c[v],v)),b._size[v]<c[v]&&(b=n(b,c[v],v));return[g,b]};function r(a,o,s){return[...Array(o-a.length).fill(s),...a]}function n(a,o,s){return e(...Array(o).fill(a),s)}function i(a,o,s){if(a[s]<o[s]&a[s]>1)throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(a,") not possible to broadcast dimension ").concat(s," with size ").concat(a[s]," to size ").concat(o[s]))}}),GA="matrixAlgorithmSuite",KA=["typed","matrix","concat"],S1=Bt(GA,KA,t=>{var{typed:e,matrix:r,concat:n}=t,i=qA({typed:e}),a=A1({typed:e}),o=$A({concat:n});return function(l){var h=l.elop,c=l.SD||l.DS,f;h?(f={"DenseMatrix, DenseMatrix":(v,m)=>i(...o(v,m),h),"Array, Array":(v,m)=>i(...o(r(v),r(m)),h).valueOf(),"Array, DenseMatrix":(v,m)=>i(...o(r(v),m),h),"DenseMatrix, Array":(v,m)=>i(...o(v,r(m)),h)},l.SS&&(f["SparseMatrix, SparseMatrix"]=(v,m)=>l.SS(...o(v,m),h,!1)),l.DS&&(f["DenseMatrix, SparseMatrix"]=(v,m)=>l.DS(...o(v,m),h,!1),f["Array, SparseMatrix"]=(v,m)=>l.DS(...o(r(v),m),h,!1)),c&&(f["SparseMatrix, DenseMatrix"]=(v,m)=>c(...o(m,v),h,!0),f["SparseMatrix, Array"]=(v,m)=>c(...o(r(m),v),h,!0))):(f={"DenseMatrix, DenseMatrix":e.referToSelf(v=>(m,D)=>i(...o(m,D),v)),"Array, Array":e.referToSelf(v=>(m,D)=>i(...o(r(m),r(D)),v).valueOf()),"Array, DenseMatrix":e.referToSelf(v=>(m,D)=>i(...o(r(m),D),v)),"DenseMatrix, Array":e.referToSelf(v=>(m,D)=>i(...o(m,r(D)),v))},l.SS&&(f["SparseMatrix, SparseMatrix"]=e.referToSelf(v=>(m,D)=>l.SS(...o(m,D),v,!1))),l.DS&&(f["DenseMatrix, SparseMatrix"]=e.referToSelf(v=>(m,D)=>l.DS(...o(m,D),v,!1)),f["Array, SparseMatrix"]=e.referToSelf(v=>(m,D)=>l.DS(...o(r(m),D),v,!1))),c&&(f["SparseMatrix, DenseMatrix"]=e.referToSelf(v=>(m,D)=>c(...o(D,m),v,!0)),f["SparseMatrix, Array"]=e.referToSelf(v=>(m,D)=>c(...o(r(D),m),v,!0))));var p=l.scalar||"any",g=l.Ds||l.Ss;g&&(h?(f["DenseMatrix,"+p]=(v,m)=>a(v,m,h,!1),f[p+", DenseMatrix"]=(v,m)=>a(m,v,h,!0),f["Array,"+p]=(v,m)=>a(r(v),m,h,!1).valueOf(),f[p+", Array"]=(v,m)=>a(r(m),v,h,!0).valueOf()):(f["DenseMatrix,"+p]=e.referToSelf(v=>(m,D)=>a(m,D,v,!1)),f[p+", DenseMatrix"]=e.referToSelf(v=>(m,D)=>a(D,m,v,!0)),f["Array,"+p]=e.referToSelf(v=>(m,D)=>a(r(m),D,v,!1).valueOf()),f[p+", Array"]=e.referToSelf(v=>(m,D)=>a(r(D),m,v,!0).valueOf())));var b=l.sS!==void 0?l.sS:l.Ss;return h?(l.Ss&&(f["SparseMatrix,"+p]=(v,m)=>l.Ss(v,m,h,!1)),b&&(f[p+", SparseMatrix"]=(v,m)=>b(m,v,h,!0))):(l.Ss&&(f["SparseMatrix,"+p]=e.referToSelf(v=>(m,D)=>l.Ss(m,D,v,!1))),b&&(f[p+", SparseMatrix"]=e.referToSelf(v=>(m,D)=>b(D,m,v,!0)))),h&&h.signatures&&wy(f,h.signatures),f}}),YA="matAlgo03xDSf",ZA=["typed"],JA=Bt(YA,ZA,t=>{var{typed:e}=t;return function(n,i,a,o){var s=n._data,l=n._size,h=n._datatype,c=i._values,f=i._index,p=i._ptr,g=i._size,b=i._datatype;if(l.length!==g.length)throw new Tt(l.length,g.length);if(l[0]!==g[0]||l[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+g+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],m=l[1],D,S=0,y=a;typeof h=="string"&&h===b&&(D=h,S=e.convert(0,D),y=e.find(a,[D,D]));for(var A=[],C=0;C<v;C++)A[C]=[];for(var P=[],O=[],F=0;F<m;F++){for(var x=F+1,z=p[F],G=p[F+1],J=z;J<G;J++){var R=f[J];P[R]=o?y(c[J],s[R][F]):y(s[R][F],c[J]),O[R]=x}for(var N=0;N<v;N++)O[N]===x?A[N][F]=P[N]:A[N][F]=o?y(S,s[N][F]):y(s[N][F],S)}return n.createDenseMatrix({data:A,size:[v,m],datatype:D})}}),QA="matAlgo05xSfSf",XA=["typed","equalScalar"],e3=Bt(QA,XA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,l=i._index,h=i._ptr,c=i._size,f=i._datatype,p=a._values,g=a._index,b=a._ptr,v=a._size,m=a._datatype;if(c.length!==v.length)throw new Tt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var D=c[0],S=c[1],y,A=r,C=0,P=o;typeof f=="string"&&f===m&&(y=f,A=e.find(r,[y,y]),C=e.convert(0,y),P=e.find(o,[y,y]));var O=s&&p?[]:void 0,F=[],x=[],z=O?[]:void 0,G=O?[]:void 0,J=[],R=[],N,j,q,Z;for(j=0;j<S;j++){x[j]=F.length;var X=j+1;for(q=h[j],Z=h[j+1];q<Z;q++)N=l[q],F.push(N),J[N]=X,z&&(z[N]=s[q]);for(q=b[j],Z=b[j+1];q<Z;q++)N=g[q],J[N]!==X&&F.push(N),R[N]=X,G&&(G[N]=p[q]);if(O)for(q=x[j];q<F.length;){N=F[q];var te=J[N],fe=R[N];if(te===X||fe===X){var he=te===X?z[N]:C,ge=fe===X?G[N]:C,_e=P(he,ge);A(_e,C)?F.splice(q,1):(O.push(_e),q++)}}}return x[S]=F.length,i.createSparseMatrix({values:O,index:F,ptr:x,size:[D,S],datatype:y})}}),t3="multiplyScalar",r3=["typed"],n3=Bt(t3,r3,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":y1,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),G0="multiply",i3=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],a3=Bt(G0,i3,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:a,dot:o}=t,s=BA({typed:e,equalScalar:a}),l=A1({typed:e});function h(C,P){switch(C.length){case 1:switch(P.length){case 1:if(C[0]!==P[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(C[0]!==P[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+C[0]+") must match Matrix rows ("+P[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+P.length+" dimensions)")}break;case 2:switch(P.length){case 1:if(C[1]!==P[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+C[1]+") must match Vector length ("+P[0]+")");break;case 2:if(C[1]!==P[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+C[1]+") must match Matrix B rows ("+P[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+P.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+C.length+" dimensions)")}}function c(C,P,O){if(O===0)throw new Error("Cannot multiply two empty vectors");return o(C,P)}function f(C,P){if(P.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return p(C,P)}function p(C,P){var O=C._data,F=C._size,x=C._datatype,z=P._data,G=P._size,J=P._datatype,R=F[0],N=G[1],j,q=n,Z=i;x&&J&&x===J&&typeof x=="string"&&(j=x,q=e.find(n,[j,j]),Z=e.find(i,[j,j]));for(var X=[],te=0;te<N;te++){for(var fe=Z(O[0],z[0][te]),he=1;he<R;he++)fe=q(fe,Z(O[he],z[he][te]));X[te]=fe}return C.createDenseMatrix({data:X,size:[N],datatype:j})}var g=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":S}),b=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":D,"SparseMatrix, DenseMatrix":y,"SparseMatrix, SparseMatrix":A});function v(C,P){var O=C._data,F=C._size,x=C._datatype,z=P._data,G=P._datatype,J=F[0],R=F[1],N,j=n,q=i;x&&G&&x===G&&typeof x=="string"&&(N=x,j=e.find(n,[N,N]),q=e.find(i,[N,N]));for(var Z=[],X=0;X<J;X++){for(var te=O[X],fe=q(te[0],z[0]),he=1;he<R;he++)fe=j(fe,q(te[he],z[he]));Z[X]=fe}return C.createDenseMatrix({data:Z,size:[J],datatype:N})}function m(C,P){var O=C._data,F=C._size,x=C._datatype,z=P._data,G=P._size,J=P._datatype,R=F[0],N=F[1],j=G[1],q,Z=n,X=i;x&&J&&x===J&&typeof x=="string"&&(q=x,Z=e.find(n,[q,q]),X=e.find(i,[q,q]));for(var te=[],fe=0;fe<R;fe++){var he=O[fe];te[fe]=[];for(var ge=0;ge<j;ge++){for(var _e=X(he[0],z[0][ge]),Be=1;Be<N;Be++)_e=Z(_e,X(he[Be],z[Be][ge]));te[fe][ge]=_e}}return C.createDenseMatrix({data:te,size:[R,j],datatype:q})}function D(C,P){var O=C._data,F=C._size,x=C._datatype,z=P._values,G=P._index,J=P._ptr,R=P._size,N=P._datatype;if(!z)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var j=F[0],q=R[1],Z,X=n,te=i,fe=a,he=0;x&&N&&x===N&&typeof x=="string"&&(Z=x,X=e.find(n,[Z,Z]),te=e.find(i,[Z,Z]),fe=e.find(a,[Z,Z]),he=e.convert(0,Z));for(var ge=[],_e=[],Be=[],ke=P.createSparseMatrix({values:ge,index:_e,ptr:Be,size:[j,q],datatype:Z}),Ie=0;Ie<q;Ie++){Be[Ie]=_e.length;var qe=J[Ie],it=J[Ie+1];if(it>qe)for(var at=0,et=0;et<j;et++){for(var Et=et+1,At=void 0,ct=qe;ct<it;ct++){var ot=G[ct];at!==Et?(At=te(O[et][ot],z[ct]),at=Et):At=X(At,te(O[et][ot],z[ct]))}at===Et&&!fe(At,he)&&(_e.push(et),ge.push(At))}}return Be[q]=_e.length,ke}function S(C,P){var O=C._values,F=C._index,x=C._ptr,z=C._datatype;if(!O)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var G=P._data,J=P._datatype,R=C._size[0],N=P._size[0],j=[],q=[],Z=[],X,te=n,fe=i,he=a,ge=0;z&&J&&z===J&&typeof z=="string"&&(X=z,te=e.find(n,[X,X]),fe=e.find(i,[X,X]),he=e.find(a,[X,X]),ge=e.convert(0,X));var _e=[],Be=[];Z[0]=0;for(var ke=0;ke<N;ke++){var Ie=G[ke];if(!he(Ie,ge))for(var qe=x[ke],it=x[ke+1],at=qe;at<it;at++){var et=F[at];Be[et]?_e[et]=te(_e[et],fe(Ie,O[at])):(Be[et]=!0,q.push(et),_e[et]=fe(Ie,O[at]))}}for(var Et=q.length,At=0;At<Et;At++){var ct=q[At];j[At]=_e[ct]}return Z[1]=q.length,C.createSparseMatrix({values:j,index:q,ptr:Z,size:[R,1],datatype:X})}function y(C,P){var O=C._values,F=C._index,x=C._ptr,z=C._datatype;if(!O)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var G=P._data,J=P._datatype,R=C._size[0],N=P._size[0],j=P._size[1],q,Z=n,X=i,te=a,fe=0;z&&J&&z===J&&typeof z=="string"&&(q=z,Z=e.find(n,[q,q]),X=e.find(i,[q,q]),te=e.find(a,[q,q]),fe=e.convert(0,q));for(var he=[],ge=[],_e=[],Be=C.createSparseMatrix({values:he,index:ge,ptr:_e,size:[R,j],datatype:q}),ke=[],Ie=[],qe=0;qe<j;qe++){_e[qe]=ge.length;for(var it=qe+1,at=0;at<N;at++){var et=G[at][qe];if(!te(et,fe))for(var Et=x[at],At=x[at+1],ct=Et;ct<At;ct++){var ot=F[ct];Ie[ot]!==it?(Ie[ot]=it,ge.push(ot),ke[ot]=X(et,O[ct])):ke[ot]=Z(ke[ot],X(et,O[ct]))}}for(var Pt=_e[qe],Wr=ge.length,Ut=Pt;Ut<Wr;Ut++){var Hr=ge[Ut];he[Ut]=ke[Hr]}}return _e[j]=ge.length,Be}function A(C,P){var O=C._values,F=C._index,x=C._ptr,z=C._datatype,G=P._values,J=P._index,R=P._ptr,N=P._datatype,j=C._size[0],q=P._size[1],Z=O&&G,X,te=n,fe=i;z&&N&&z===N&&typeof z=="string"&&(X=z,te=e.find(n,[X,X]),fe=e.find(i,[X,X]));for(var he=Z?[]:void 0,ge=[],_e=[],Be=C.createSparseMatrix({values:he,index:ge,ptr:_e,size:[j,q],datatype:X}),ke=Z?[]:void 0,Ie=[],qe,it,at,et,Et,At,ct,ot,Pt=0;Pt<q;Pt++){_e[Pt]=ge.length;var Wr=Pt+1;for(Et=R[Pt],At=R[Pt+1],et=Et;et<At;et++)if(ot=J[et],Z)for(it=x[ot],at=x[ot+1],qe=it;qe<at;qe++)ct=F[qe],Ie[ct]!==Wr?(Ie[ct]=Wr,ge.push(ct),ke[ct]=fe(G[et],O[qe])):ke[ct]=te(ke[ct],fe(G[et],O[qe]));else for(it=x[ot],at=x[ot+1],qe=it;qe<at;qe++)ct=F[qe],Ie[ct]!==Wr&&(Ie[ct]=Wr,ge.push(ct));if(Z)for(var Ut=_e[Pt],Hr=ge.length,tt=Ut;tt<Hr;tt++){var pr=ge[tt];he[tt]=ke[pr]}}return _e[q]=ge.length,Be}return e(G0,i,{"Array, Array":e.referTo("Matrix, Matrix",C=>(P,O)=>{h(xi(P),xi(O));var F=C(r(P),r(O));return Zr(F)?F.valueOf():F}),"Matrix, Matrix":function(P,O){var F=P.size(),x=O.size();return h(F,x),F.length===1?x.length===1?c(P,O,F[0]):f(P,O):x.length===1?g(P,O):b(P,O)},"Matrix, Array":e.referTo("Matrix,Matrix",C=>(P,O)=>C(P,r(O))),"Array, Matrix":e.referToSelf(C=>(P,O)=>C(r(P,O.storage()),O)),"SparseMatrix, any":function(P,O){return s(P,O,i,!1)},"DenseMatrix, any":function(P,O){return l(P,O,i,!1)},"any, SparseMatrix":function(P,O){return s(O,P,i,!0)},"any, DenseMatrix":function(P,O){return l(O,P,i,!0)},"Array, any":function(P,O){return l(r(P),O,i,!1).valueOf()},"any, Array":function(P,O){return l(r(O),P,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(C=>(P,O,F)=>{for(var x=C(P,O),z=0;z<F.length;z++)x=C(x,F[z]);return x})})}),K0="subtract",u3=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix","concat"],s3=Bt(K0,u3,t=>{var{typed:e,matrix:r,equalScalar:n,addScalar:i,unaryMinus:a,DenseMatrix:o,concat:s}=t,l=C1({typed:e}),h=JA({typed:e}),c=e3({typed:e,equalScalar:n}),f=F1({typed:e,DenseMatrix:o}),p=PA({typed:e,DenseMatrix:o}),g=S1({typed:e,matrix:r,concat:s});return e(K0,{"number, number":(b,v)=>b-v,"Complex, Complex":(b,v)=>b.sub(v),"BigNumber, BigNumber":(b,v)=>b.minus(v),"Fraction, Fraction":(b,v)=>b.sub(v),"Unit, Unit":e.referToSelf(b=>(v,m)=>{if(v.value===null)throw new Error("Parameter x contains a unit with undefined value");if(m.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!v.equalBase(m))throw new Error("Units do not match");var D=v.clone();return D.value=e.find(b,[D.valueType(),m.valueType()])(D.value,m.value),D.fixPrefix=!1,D})},g({SS:c,DS:l,SD:h,Ss:p,sS:f}))}),Y0="conj",o3=["typed"],l3=Bt(Y0,o3,t=>{var{typed:e}=t;return e(Y0,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":e.referToSelf(r=>n=>mo(n,r))})}),Z0="concat",c3=["typed","matrix","isInteger"],f3=Bt(Z0,c3,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(Z0,{"...Array | Matrix | number | BigNumber":function(a){var o,s=a.length,l=-1,h,c=!1,f=[];for(o=0;o<s;o++){var p=a[o];if(Zr(p)&&(c=!0),rr(p)||Bn(p)){if(o!==s-1)throw new Error("Dimension must be specified as last argument");if(h=l,l=p.valueOf(),!n(l))throw new TypeError("Integer number expected for dimension");if(l<0||o>0&&l>h)throw new ra(l,h+1)}else{var g=Cr(p).valueOf(),b=xi(g);if(f[o]=g,h=l,l=b.length-1,o>0&&l!==h)throw new Tt(h+1,l+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var v=f.shift();f.length;)v=B1(v,f.shift(),l,0);return c?r(v):v},"...string":function(a){return a.join("")}})});function B1(t,e,r,n){if(n<r){if(t.length!==e.length)throw new Tt(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=B1(t[a],e[a],r,n+1);return i}else return t.concat(e)}function h3(){throw new Error('No "matrix" implementation available')}var J0="size",d3=["typed","config","?matrix"],p3=Bt(J0,d3,t=>{var{typed:e,config:r,matrix:n}=t;return e(J0,{Matrix:function(a){return a.create(a.size())},Array:xi,string:function(a){return r.matrix==="Array"?[a.length]:n([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return r.matrix==="Array"?[]:n?n([]):h3()}})}),Q0="add",g3=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],v3=Bt(Q0,g3,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:a,SparseMatrix:o,concat:s}=t,l=C1({typed:e}),h=RA({typed:e,equalScalar:i}),c=F1({typed:e,DenseMatrix:a}),f=S1({typed:e,matrix:r,concat:s});return e(Q0,{"any, any":n,"any, any, ...any":e.referToSelf(p=>(g,b,v)=>{for(var m=p(g,b),D=0;D<v.length;D++)m=p(m,v[D]);return m})},f({elop:n,DS:l,SS:h,Ss:c}))}),X0="dot",m3=["typed","addScalar","multiplyScalar","conj","size"],_3=Bt(X0,m3,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:a}=t;return e(X0,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":l});function o(c,f){var p=h(c),g=h(f),b,v;if(p.length===1)b=p[0];else if(p.length===2&&p[1]===1)b=p[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+p.join(", ")+")");if(g.length===1)v=g[0];else if(g.length===2&&g[1]===1)v=g[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+g.join(", ")+")");if(b!==v)throw new RangeError("Vectors must have equal length ("+b+" != "+v+")");if(b===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return b}function s(c,f){var p=o(c,f),g=Zr(c)?c._data:c,b=Zr(c)?c._datatype:void 0,v=Zr(f)?f._data:f,m=Zr(f)?f._datatype:void 0,D=h(c).length===2,S=h(f).length===2,y=r,A=n;if(b&&m&&b===m&&typeof b=="string"){var C=b;y=e.find(r,[C,C]),A=e.find(n,[C,C])}if(!D&&!S){for(var P=A(i(g[0]),v[0]),O=1;O<p;O++)P=y(P,A(i(g[O]),v[O]));return P}if(!D&&S){for(var F=A(i(g[0]),v[0][0]),x=1;x<p;x++)F=y(F,A(i(g[x]),v[x][0]));return F}if(D&&!S){for(var z=A(i(g[0][0]),v[0]),G=1;G<p;G++)z=y(z,A(i(g[G][0]),v[G]));return z}if(D&&S){for(var J=A(i(g[0][0]),v[0][0]),R=1;R<p;R++)J=y(J,A(i(g[R][0]),v[R][0]));return J}}function l(c,f){o(c,f);for(var p=c._index,g=c._values,b=f._index,v=f._values,m=0,D=r,S=n,y=0,A=0;y<p.length&&A<b.length;){var C=p[y],P=b[A];if(C<P){y++;continue}if(C>P){A++;continue}C===P&&(m=D(m,S(g[y],v[A])),y++,A++)}return m}function h(c){return Zr(c)?c.size():a(c)}}),b3=KE({config:co}),D3=QE({}),w3=rA({}),Xc=aA({}),_o=oA({Matrix:Xc}),sn=Jy({BigNumber:b3,Complex:D3,DenseMatrix:_o,Fraction:w3}),bo=CA({typed:sn}),y3=l3({typed:sn}),Do=vA({config:co,typed:sn}),E3=cA({typed:sn}),O1=n3({typed:sn}),M1=bA({Matrix:Xc,equalScalar:Do,typed:sn}),A3=EA({typed:sn}),Tu=wA({DenseMatrix:_o,Matrix:Xc,SparseMatrix:M1,typed:sn}),C3=p3({matrix:Tu,config:co,typed:sn}),P1=f3({isInteger:E3,matrix:Tu,typed:sn}),xr=v3({DenseMatrix:_o,SparseMatrix:M1,addScalar:bo,concat:P1,equalScalar:Do,matrix:Tu,typed:sn}),F3=_3({addScalar:bo,conj:y3,multiplyScalar:O1,size:C3,typed:sn}),jr=a3({addScalar:bo,dot:F3,equalScalar:Do,matrix:Tu,multiplyScalar:O1,typed:sn}),Es=s3({DenseMatrix:_o,addScalar:bo,concat:P1,equalScalar:Do,matrix:Tu,typed:sn,unaryMinus:A3});function S3(t){let e,r,n;return{c(){e=pt("circle"),this.h()},l(i){e=gt(i,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),U(e).forEach(M),this.h()},h(){B(e,"cx",r=t[0][0]),B(e,"cy",n=t[0][1]),B(e,"r",t[1]),B(e,"stroke",t[3]),B(e,"stroke-width",t[2]),Ot(e,"fill","rgba(0,0,0,0)")},m(i,a){ue(i,e,a)},p(i,[a]){a&1&&r!==(r=i[0][0])&&B(e,"cx",r),a&1&&n!==(n=i[0][1])&&B(e,"cy",n),a&2&&B(e,"r",i[1]),a&8&&B(e,"stroke",i[3]),a&4&&B(e,"stroke-width",i[2])},i:Oe,o:Oe,d(i){i&&M(e)}}}function B3(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class ef extends Ze{constructor(e){super(),Je(this,e,B3,S3,Qe,{xy:0,radius:1,stroke:2,color:3})}}function O3(t){let e,r,n,i,a;return{c(){e=pt("circle"),this.h()},l(o){e=gt(o,"circle",{cx:!0,cy:!0,r:!0}),U(e).forEach(M),this.h()},h(){B(e,"cx",r=t[0][0]),B(e,"cy",n=t[0][1]),B(e,"r",t[1]),Ot(e,"fill",t[2])},m(o,s){ue(o,e,s),i||(a=[De(e,"mouseover",t[3]),De(e,"mouseout",t[4]),De(e,"mousedown",t[5]),De(e,"touchstart",t[5])],i=!0)},p(o,[s]){s&1&&r!==(r=o[0][0])&&B(e,"cx",r),s&1&&n!==(n=o[0][1])&&B(e,"cy",n),s&2&&B(e,"r",o[1]),s&4&&Ot(e,"fill",o[2])},i:Oe,o:Oe,d(o){o&&M(e),i=!1,Rt(a)}}}function M3(t,e,r){let{xy:n=[100,100]}=e,{radius:i=5}=e,{color:a="black"}=e,{hoverColor:o="white"}=e,{handleMouseDown:s=p=>{}}=e,l=a;function h(){r(2,l=o)}function c(){r(2,l=a)}function f(p){s(p)}return t.$$set=p=>{"xy"in p&&r(0,n=p.xy),"radius"in p&&r(1,i=p.radius),"color"in p&&r(6,a=p.color),"hoverColor"in p&&r(7,o=p.hoverColor),"handleMouseDown"in p&&r(8,s=p.handleMouseDown)},[n,i,l,h,c,f,a,o,s]}class Ua extends Ze{constructor(e){super(),Je(this,e,M3,O3,Qe,{xy:0,radius:1,color:6,hoverColor:7,handleMouseDown:8})}}function P3(t){let e,r,n,i,a;return{c(){e=pt("line"),this.h()},l(o){e=gt(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-dasharray":!0,"stroke-width":!0}),U(e).forEach(M),this.h()},h(){B(e,"x1",r=t[0][0]),B(e,"y1",n=t[0][1]),B(e,"x2",i=t[1][0]),B(e,"y2",a=t[1][1]),B(e,"stroke",t[3]),B(e,"stroke-dasharray","10,10"),B(e,"stroke-width",t[2])},m(o,s){ue(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&B(e,"x1",r),s&1&&n!==(n=o[0][1])&&B(e,"y1",n),s&2&&i!==(i=o[1][0])&&B(e,"x2",i),s&2&&a!==(a=o[1][1])&&B(e,"y2",a),s&8&&B(e,"stroke",o[3]),s&4&&B(e,"stroke-width",o[2])},i:Oe,o:Oe,d(o){o&&M(e)}}}function k3(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class k1 extends Ze{constructor(e){super(),Je(this,e,k3,P3,Qe,{p1:0,p2:1,stroke:2,color:3})}}function T3(t){let e,r;return{c(){e=W("p"),r=we(t[2]),this.h()},l(n){e=H(n,"P",{});var i=U(e);r=ye(i,t[2]),i.forEach(M),this.h()},h(){Ot(e,"color",t[3]),Ot(e,"user-select","none"),Ot(e,"margin","0"),Ot(e,"pointer-events","none"),Ot(e,"text-align",t[4]),Ot(e,"font-size",`${t[5]}px`),Ot(e,"font-family","sans-serif"),Ot(e,"font-style","italic")},m(n,i){ue(n,e,i),k(e,r)},p(n,i){i&4&&zt(r,n[2]),i&8&&Ot(e,"color",n[3]),i&16&&Ot(e,"text-align",n[4]),i&32&&Ot(e,"font-size",`${n[5]}px`)},d(n){n&&M(e)}}}function I3(t){let e,r;return{c(){e=W("img"),this.h()},l(n){e=H(n,"IMG",{src:!0}),this.h()},h(){P0(e.src,r=t[2])||B(e,"src",r),Ot(e,"user-select","none"),Ot(e,"width","100%"),Ot(e,"height","100%"),Ot(e,"object-fit","contain")},m(n,i){ue(n,e,i)},p(n,i){i&4&&!P0(e.src,r=n[2])&&B(e,"src",r)},d(n){n&&M(e)}}}function x3(t){let e,r,n,i,a,o,s;function l(f,p){return p&4&&(n=null),n==null&&(n=!!f[2].startsWith("http")),n?I3:T3}let h=l(t,-1),c=h(t);return{c(){e=pt("foreignObject"),r=W("div"),c.c(),this.h()},l(f){e=gt(f,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var p=U(e);r=H(p,"DIV",{class:!0});var g=U(r);c.l(g),g.forEach(M),p.forEach(M),this.h()},h(){B(r,"class","h-full flex flex-col justify-center"),B(e,"x",i=t[0][0]),B(e,"y",a=t[0][1]),B(e,"width",o=t[1][0]),B(e,"height",s=t[1][1])},m(f,p){ue(f,e,p),k(e,r),c.m(r,null)},p(f,[p]){h===(h=l(f,p))&&c?c.p(f,p):(c.d(1),c=h(f),c&&(c.c(),c.m(r,null))),p&1&&i!==(i=f[0][0])&&B(e,"x",i),p&1&&a!==(a=f[0][1])&&B(e,"y",a),p&2&&o!==(o=f[1][0])&&B(e,"width",o),p&2&&s!==(s=f[1][1])&&B(e,"height",s)},i:Oe,o:Oe,d(f){f&&M(e),c.d()}}}function N3(t,e,r){let{xy:n=[100,100]}=e,{wh:i=[100,100]}=e,{text:a=""}=e,{color:o="rgba(96,117,151, 1)"}=e,{textAlign:s="center"}=e,{fontSize:l=12}=e;return t.$$set=h=>{"xy"in h&&r(0,n=h.xy),"wh"in h&&r(1,i=h.wh),"text"in h&&r(2,a=h.text),"color"in h&&r(3,o=h.color),"textAlign"in h&&r(4,s=h.textAlign),"fontSize"in h&&r(5,l=h.fontSize)},[n,i,a,o,s,l]}class wo extends Ze{constructor(e){super(),Je(this,e,N3,x3,Qe,{xy:0,wh:1,text:2,color:3,textAlign:4,fontSize:5})}}function L3(t){let e,r,n,i,a,o,s,l,h,c,f;return{c(){e=pt("circle"),i=Ee(),a=pt("foreignObject"),o=W("p"),s=we(t[4]),this.h()},l(p){e=gt(p,"circle",{cx:!0,cy:!0,r:!0}),U(e).forEach(M),i=Ae(p),a=gt(p,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var g=U(a);o=H(g,"P",{style:!0,class:!0});var b=U(o);s=ye(b,t[4]),b.forEach(M),g.forEach(M),this.h()},h(){B(e,"cx",r=t[0][0]),B(e,"cy",n=t[0][1]),B(e,"r",t[1]),Ot(e,"fill",t[3]),Ot(o,"color",t[2]),Ot(o,"user-select","none"),Ot(o,"margin","0"),B(o,"class","heavy svelte-6if1p2"),B(a,"x",l=t[0][0]-t[1]),B(a,"y",h=t[0][1]-t[1]),B(a,"width",c=t[1]*2),B(a,"height",f=t[1]*2)},m(p,g){ue(p,e,g),ue(p,i,g),ue(p,a,g),k(a,o),k(o,s)},p(p,[g]){g&1&&r!==(r=p[0][0])&&B(e,"cx",r),g&1&&n!==(n=p[0][1])&&B(e,"cy",n),g&2&&B(e,"r",p[1]),g&8&&Ot(e,"fill",p[3]),g&16&&zt(s,p[4]),g&4&&Ot(o,"color",p[2]),g&3&&l!==(l=p[0][0]-p[1])&&B(a,"x",l),g&3&&h!==(h=p[0][1]-p[1])&&B(a,"y",h),g&2&&c!==(c=p[1]*2)&&B(a,"width",c),g&2&&f!==(f=p[1]*2)&&B(a,"height",f)},i:Oe,o:Oe,d(p){p&&M(e),p&&M(i),p&&M(a)}}}function R3(t,e,r){let{xy:n=[100,100]}=e,{radius:i=25}=e,{textColor:a="rgba(96,117,151, 1)"}=e,{bgColor:o="black"}=e,{weight:s=""}=e;return t.$$set=l=>{"xy"in l&&r(0,n=l.xy),"radius"in l&&r(1,i=l.radius),"textColor"in l&&r(2,a=l.textColor),"bgColor"in l&&r(3,o=l.bgColor),"weight"in l&&r(4,s=l.weight)},[n,i,a,o,s]}class U3 extends Ze{constructor(e){super(),Je(this,e,R3,L3,Qe,{xy:0,radius:1,textColor:2,bgColor:3,weight:4})}}function Rn(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=360+Math.atan2(i,n)*180/Math.PI,o=Math.sqrt(n*n+i*i);return[a%360,o/r]}function Nr(t,e,r){const n=e[0]%360*Math.PI/180,i=[r*e[1]*Math.cos(n),r*e[1]*Math.sin(n)];return xr(t,i)}function Au(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=Math.sqrt(n*n+i*i),o=r/a,s=e[0]+n*o,l=e[1]+i*o;return[s,l]}function V3(t,e,r){const n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)<r}function tf(t,e){const r=e%360*Math.PI/180;let n,i;const a=Math.cos(r),o=Math.sin(r);return n=(t[0]+5)*-1.2*a,i=(t[1]+5)*-1.2*o,n-=t[0],i-=t[1],[n,i]}function Vr(t){return t<0?360+-1*(Math.abs(t)%360):t>360?t%360:t}function j3(t){return Math.round(t*100)}function Jr(t){return Math.round(Math.max(1-Math.pow(1-t,2),.25)*100)/100}function yo(t){let e="parsedWeight";switch(t){case $e.Circle:e="circleWeight";break;case $e.Bars:e="barWeight";break;case $e.EmbedGrid:case $e.EmbedRandom:case $e.Embed:e="embedWeight";break;case $e.Pie:e="pieWeight";break;case $e.Ring:e="ringWeight";break;case $e.Random:e="randomWeight";break}return e}function z3(t){const e=t.weightMode,r=yo(e);return t.weightedPrompts?Math.max(...Object.values(t.weightedPrompts).map(n=>n[r])):0}function q3(t){const e=t.weightMode,r=yo(e);return t.weightedPrompts?Object.values(t.weightedPrompts).reduce((n,i)=>n+i[r],0):0}function ed(t,e){const r=t.weightMode,n=yo(r);return t.weightedPrompts[e]?t.weightedPrompts[e][n]/z3(t):0}function Zn(t,e){const r=t.weightMode,n=yo(r);if(!t.weightedPrompts[e])return 0;const i=t.weightedPrompts[e][n];return j3((i||0)/q3(t))}function W3(t,e,r){const a=r*.6,o=Math.floor(t/a);return Math.ceil(e/o)*r*1.2}function zr(t,e,r){const n=W3(t,e,r)+10;return[t,n]}function $t(t){let e=t;if(t.length>40){const r=t.split(",");r.length>1?e=r[0]+"...":e=t.slice(0,20)+"..."}return e}function Ta(t,e){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function na(t){return jr(t,.5)}function Ti(t){const e=t.currentTarget;if(!e)throw new Error("No SVG element found");var r=e.createSVGPoint();t instanceof TouchEvent?(r.x=t.touches[0].clientX,r.y=t.touches[0].clientY):(r.x=t.clientX,r.y=t.clientY);const n=e.getScreenCTM();if(!n)throw new Error("No DOM Matrix found");const i=r.matrixTransform(n.inverse());return[i.x,i.y]}function Ws(t){const e=t.reduce((r,n)=>xr(r,n),[0,0]);return jr(e,1/t.length)}function td(t,e,r){const n=t.slice();return n[20]=e[r][0],n[21]=e[r][1],n}function rd(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,a;e=new ef({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),s=[];for(let c=0;c<o.length;c+=1)s[c]=nd(td(t,o,c));const l=c=>de(s[c],1,1,()=>{s[c]=null});let h=n&&id(t);return{c(){Le(e.$$.fragment);for(let c=0;c<s.length;c+=1)s[c].c();r=yt(),h&&h.c(),i=yt()},l(c){Re(e.$$.fragment,c);for(let f=0;f<s.length;f+=1)s[f].l(c);r=yt(),h&&h.l(c),i=yt()},m(c,f){Ue(e,c,f);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(c,f);ue(c,r,f),h&&h.m(c,f),ue(c,i,f),a=!0},p(c,f){const p={};if(f&1&&(p.xy=c[0]),f&2&&(p.radius=c[1]),e.$set(p),f&895){o=Object.entries(c[5].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=td(c,o,g);s[g]?(s[g].p(b,f),oe(s[g],1)):(s[g]=nd(b),s[g].c(),oe(s[g],1),s[g].m(r.parentNode,r))}for(Gt(),g=o.length;g<s.length;g+=1)l(g);Kt()}f&32&&(n=Object.entries(c[5].weightedPrompts).length>0),n?h?(h.p(c,f),f&32&&oe(h,1)):(h=id(c),h.c(),oe(h,1),h.m(i.parentNode,i)):h&&(Gt(),de(h,1,1,()=>{h=null}),Kt())},i(c){if(!a){oe(e.$$.fragment,c);for(let f=0;f<o.length;f+=1)oe(s[f]);oe(h),a=!0}},o(c){de(e.$$.fragment,c),s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)de(s[f]);de(h),a=!1},d(c){Ve(e,c),Pu(s,c),c&&M(r),h&&h.d(c),c&&M(i)}}}function nd(t){let e,r,n,i,a;e=new k1({props:{p1:Nr(t[0],t[5].circleMarker,t[1]),p2:t[6][t[20]].xy}});function o(){return t[14](t[20])}return r=new Ua({props:{xy:t[6][t[20]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:o}}),n=new wo({props:{xy:t[9](t[6][t[20]].xy,zr(t[3],$t(t[21].text).length,t[4])),color:`rgba(255,255,255,${Jr(t[6][t[20]].unitWeight)}`,wh:zr(t[3],$t(t[21].text).length,t[4]),fontSize:t[4],text:$t(t[21].text)}}),i=new U3({props:{xy:jr(xr(Nr(t[0],t[5].circleMarker,t[1]),t[6][t[20]].xy),.5),weight:Zn(t[5],t[20]),radius:15,textColor:`rgba(255,255,255,${Jr(t[6][t[20]].unitWeight)}`,bgColor:"rgb(8, 11, 22)"}}),{c(){Le(e.$$.fragment),Le(r.$$.fragment),Le(n.$$.fragment),Le(i.$$.fragment)},l(s){Re(e.$$.fragment,s),Re(r.$$.fragment,s),Re(n.$$.fragment,s),Re(i.$$.fragment,s)},m(s,l){Ue(e,s,l),Ue(r,s,l),Ue(n,s,l),Ue(i,s,l),a=!0},p(s,l){t=s;const h={};l&35&&(h.p1=Nr(t[0],t[5].circleMarker,t[1])),l&96&&(h.p2=t[6][t[20]].xy),e.$set(h);const c={};l&96&&(c.xy=t[6][t[20]].xy),l&4&&(c.radius=t[2]),l&32&&(c.handleMouseDown=o),r.$set(c);const f={};l&120&&(f.xy=t[9](t[6][t[20]].xy,zr(t[3],$t(t[21].text).length,t[4]))),l&96&&(f.color=`rgba(255,255,255,${Jr(t[6][t[20]].unitWeight)}`),l&56&&(f.wh=zr(t[3],$t(t[21].text).length,t[4])),l&16&&(f.fontSize=t[4]),l&32&&(f.text=$t(t[21].text)),n.$set(f);const p={};l&99&&(p.xy=jr(xr(Nr(t[0],t[5].circleMarker,t[1]),t[6][t[20]].xy),.5)),l&32&&(p.weight=Zn(t[5],t[20])),l&96&&(p.textColor=`rgba(255,255,255,${Jr(t[6][t[20]].unitWeight)}`),i.$set(p)},i(s){a||(oe(e.$$.fragment,s),oe(r.$$.fragment,s),oe(n.$$.fragment,s),oe(i.$$.fragment,s),a=!0)},o(s){de(e.$$.fragment,s),de(r.$$.fragment,s),de(n.$$.fragment,s),de(i.$$.fragment,s),a=!1},d(s){Ve(e,s),Ve(r,s),Ve(n,s),Ve(i,s)}}}function id(t){let e,r;return e=new Ua({props:{xy:Nr(t[0],t[5].circleMarker,t[1]),radius:10,color:"rgba(136,157,191, 1)",handleMouseDown:t[15]}}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},p(n,i){const a={};i&35&&(a.xy=Nr(n[0],n[5].circleMarker,n[1])),e.$set(a)},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function H3(t){let e,r,n,i,a,o=t[6]&&t[5].weightedPrompts&&rd(t);const s=t[13].default,l=xa(s,t,t[12],null);return{c(){e=pt("svg"),o&&o.c(),r=Ee(),l&&l.c(),this.h()},l(h){e=gt(h,"svg",{id:!0,class:!0});var c=U(e);o&&o.l(c),c.forEach(M),r=Ae(h),l&&l.l(h),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(h,c){ue(h,e,c),o&&o.m(e,null),ue(h,r,c),l&&l.m(h,c),n=!0,i||(a=[De(e,"mousemove",t[10]),De(e,"touchmove",t[10]),De(e,"mouseup",t[7]),De(e,"touchend",t[7]),De(e,"dblclick",t[11])],i=!0)},p(h,[c]){h[6]&&h[5].weightedPrompts?o?(o.p(h,c),c&96&&oe(o,1)):(o=rd(h),o.c(),oe(o,1),o.m(e,null)):o&&(Gt(),de(o,1,1,()=>{o=null}),Kt()),l&&l.p&&(!n||c&4096)&&Na(l,s,h,h[12],n?Ra(s,h[12],c,null):La(h[12]),null)},i(h){n||(oe(o),oe(l,h),n=!0)},o(h){de(o),de(l,h),n=!1},d(h){h&&M(e),o&&o.d(),h&&M(r),l&&l.d(h),i=!1,Rt(a)}}}function ad(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const o=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function $3(t,e,r){let n,i;je(t,Ye,O=>r(5,i=O));let{$$slots:a={},$$scope:o}=e,{center:s=[450,450]}=e,{radius:l=250}=e,{pointRadius:h=10}=e,{textWidth:c=150}=e,{fontSize:f=13}=e,p=[0,0],g=null;function b(O){g=null}function v(O){g=O}function m(O,F){let x=Rn(O,s,l)[0]-180;x<0&&(x+=360);const z=tf(na(F),x);return xr(O,z)}function D(O){const F=V3(O,s,l)?Rn(O,s,l):Rn(Au(O,s,l),s,l);r(6,n=A(i.weightedPrompts,s,l,i.circleWeightScaling,i.circleExponentialScaling,F,i.circleAngles))}function S(O){if(p=Ti(O),g==="main")D(p);else if(g){const F={...i.weightedPrompts[g]},x=Au(p,s,l),z=Rn(x,s,l)[0],G={...i.circleAngles};G[F.id]=z;const J={...i.weightedPrompts};J[g]=F,r(6,n=A(J,s,l,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,G))}}function y(O){p=Ti(O),D(p)}function A(O,F,x,z,G,J,R){if(!O||!F||!x||!z||!J)return null;let N=Object.entries(O).reduce((Z,[X,te])=>(Z[X]={xy:Nr(F,[R[X],1],x)},Z),{});N=Object.entries(N).reduce((Z,[X,te])=>(Z[X]={...Z[X],distance:Ta(te.xy,Nr(F,J,x))},Z),N);const j=Object.values(N).reduce((Z,X)=>Z+X.distance,0);N=Object.entries(N).reduce((Z,[X,te])=>(Z[X]={...Z[X],unitDistance:Math.round(te.distance/j*100)/100},Z),N),N=Object.entries(N).reduce((Z,[X,te])=>(Z[X]={...Z[X],invertedUnitDistance:Math.round((1-te.unitDistance)*100)/100},Z),N),N=Object.entries(N).reduce((Z,[X,te])=>(G?Z[X]={...Z[X],unitWeight:Math.round(Math.pow(1-te.distance/(2*x),z)*100)/100}:Z[X]={...Z[X],unitWeight:Math.round((1-te.distance/(2*x))*100)/100},Z),N);const q={...O};return Object.entries(N).forEach(([Z,X])=>{q[Z].circleWeight=X.unitWeight}),Ye.update({...i,circleMarker:J,weightedPrompts:q,circleAngles:R}),N}const C=O=>v(O),P=()=>v("main");return t.$$set=O=>{"center"in O&&r(0,s=O.center),"radius"in O&&r(1,l=O.radius),"pointRadius"in O&&r(2,h=O.pointRadius),"textWidth"in O&&r(3,c=O.textWidth),"fontSize"in O&&r(4,f=O.fontSize),"$$scope"in O&&r(12,o=O.$$scope)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(i.circleAngles).length!==Object.keys(i.weightedPrompts).length&&Ye.update({...i,circleAngles:ad(i.weightedPrompts,{})}),t.$$.dirty&35&&r(6,n=A(i.weightedPrompts,s,l,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,i.circleAngles||ad(i.weightedPrompts,{})))},[s,l,h,c,f,i,n,b,v,m,S,y,o,a,C,P]}class G3 extends Ze{constructor(e){super(),Je(this,e,$3,H3,Qe,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}let As;const K3=new Uint8Array(16);function Y3(){if(!As&&(As=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!As))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return As(K3)}const kr=[];for(let t=0;t<256;++t)kr.push((t+256).toString(16).slice(1));function Z3(t,e=0){return(kr[t[e+0]]+kr[t[e+1]]+kr[t[e+2]]+kr[t[e+3]]+"-"+kr[t[e+4]]+kr[t[e+5]]+"-"+kr[t[e+6]]+kr[t[e+7]]+"-"+kr[t[e+8]]+kr[t[e+9]]+"-"+kr[t[e+10]]+kr[t[e+11]]+kr[t[e+12]]+kr[t[e+13]]+kr[t[e+14]]+kr[t[e+15]]).toLowerCase()}const J3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ud={randomUUID:J3};function Eo(t,e,r){if(ud.randomUUID&&!e&&!t)return ud.randomUUID();t=t||{};const n=t.random||(t.rng||Y3)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return Z3(n)}const Cs="showZeroPrompts";function Q3(){const t=Yt(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Cs]?JSON.parse(localStorage[Cs]):!1),{subscribe:e,update:a=>{i&&(localStorage[Cs]=JSON.stringify(!!a),r(!!a))},get:()=>St(t),delete:()=>{i&&(delete localStorage[Cs],r(!1))}}}const Cu=Q3(),Fs="useWeightOrdering";function X3(){const t=Yt(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Fs]?JSON.parse(localStorage[Fs]):!1),{subscribe:e,update:a=>{i&&(localStorage[Fs]=JSON.stringify(!!a),r(!!a))},get:()=>St(t),delete:()=>{i&&(delete localStorage[Fs],r(!1))}}}const Tc=X3(),Ao=ku(Tc,t=>St(Tc));var Ic=function(t,e){return Ic=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Ic(t,e)};function rf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Ic(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var xc,nf=function(){function t(){}return t._xfnv1a=function(e){for(var r=2166136261,n=0;n<e.length;n++)r=Math.imul(r^e.charCodeAt(n),16777619);return function(){return r+=r<<13,r^=r>>>7,r+=r<<3,r^=r>>>17,(r+=r<<5)>>>0}},t}(),e6=function(t){function e(r){var n=t.call(this)||this;return n.a=e._xfnv1a(r)(),n}return rf(e,t),e.prototype.next=function(){var r=this.a+=1831565813;return r=Math.imul(r^r>>>15,1|r),(((r^=r+Math.imul(r^r>>>7,61|r))^r>>>14)>>>0)/4294967296},e}(nf),t6=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return rf(e,t),e.prototype.next=function(){this.a>>>=0,this.b>>>=0,this.c>>>=0,this.d>>>=0;var r=this.a+this.b|0;return this.a=this.b^this.b>>>9,this.b=this.c+(this.c<<3)|0,this.c=this.c<<21|this.c>>>11,this.d=this.d+1|0,r=r+this.d|0,this.c=this.c+r|0,(r>>>0)/4294967296},e}(nf),r6=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return rf(e,t),e.prototype.next=function(){var r=this.b<<9,n=5*this.a;return n=n<<7|9*(n>>>25),this.c^=this.a,this.d^=this.b,this.b^=this.c,this.a^=this.d,this.c^=r,this.d=this.d<<11|this.d>>>21,(n>>>0)/4294967296},e}(nf);(function(t){t.sfc32="sfc32",t.mulberry32="mulberry32",t.xoshiro128ss="xoshiro128ss"})(xc||(xc={}));var n6=function(){function t(e,r){r===void 0&&(r=xc.sfc32),this.str=e,this.prng=r,this.generator=this._initializeGenerator()}return t.prototype.next=function(){return this.generator.next()},t.prototype._initializeGenerator=function(){if(function(r){return r===null}(e=this.str)||function(r){return r===void 0}(e))return this.wrap();var e;switch(this.prng){case"sfc32":return new t6(this.str);case"mulberry32":return new e6(this.str);case"xoshiro128ss":return new r6(this.str);default:return this.wrap()}},t.prototype.wrap=function(){return{next:function(){return Math.random()}}},t}();const $l="slotSet";function i6(){const t=Yt({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith($l)){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=St(t),h={...s[a]||{},...o};i&&(localStorage[`${$l}_${a}`]=JSON.stringify(h));const c={...s,[a]:h};r(c)},get:a=>St(t)[a],getAll:()=>St(t),delete:a=>{i&&delete localStorage[`${$l}_${a}`];const o={...St(t)};delete o[a],r(o)}}}const Xi=i6();function sd(){return(Math.random()*1e6).toFixed(0)}function a6(){const t=Yt(sd()),{subscribe:e,set:r}=t;return{subscribe:e,get:()=>St(t),shuffle:()=>{r(sd())}}}const Li=a6();function Hs(t){let e=t.replace(/\s+/g,"_");return e=e.toUpperCase(),"$"+e}function od(t){const e=t.length>0&&t.length<32,r=/^[a-zA-Z0-9 ]+$/.test(t),n=/^[a-zA-Z]/.test(t),i=/[a-zA-Z0-9]$/.test(t);return e&&r&&n&&i}function u6(){const t=Xi.getAll();return Object.values(t).reduce((r,n)=>{const i=Hs(n.name);return i&&(r[i]=[...n.values]),r},{})}function s6(t,e){const r=new n6(e);return Object.entries(t).reduce((i,[a,o])=>(i[a]=[...o].sort(()=>r.next()-.5),i),{})}function Fu(t,e){let r=s6(u6(),e),n=t;for(const[i,a]of Object.entries(r)){if(a.length===0)continue;let o=0;for(;n.includes(i);)o>=a.length&&(o=0),n=n.replace(i,a[o]),o++}return n}function o6(t){const e=[],r=/((?:[^:]+|:(?!:))+)(?:::(\d+(?:\.\d+)?))?(?=\s|$)/g;let n;for(;(n=r.exec(t))!==null;){const i=n[1].trim(),a=n[2]?parseFloat(n[2]):1;i&&e.push([i,a])}return e}function Gl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=t.length-1;let r=t;for(;r[e]===",";)r=r.slice(0,e);return r}function Kl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=["-","#","*","","",">","<","+","^","~","(",")","[","]","{","}"];let r=t.trim();for(;e.includes(r[0]);)r=r.slice(1).trim();return/^\d+(\.|\))\s/.test(r)&&(r=r.replace(/^\d+(\.|\))\s/,"")),r}function $s(t){if(t=t.replace(/^\n+|\n+$/g,""),t.includes("::"))return o6(t);if(t.includes(`
`))return t.split(`
`).map(a=>Kl(Gl(a))).filter(a=>a.length>0).map(a=>[a,1]);const e=t.match(/[^.!?]+[.!?]+/g)||[],r=e.length,n=t.split(",").map(a=>Kl(Gl(a))).filter(a=>a.length>0),i=n.length-1;return r>i?e.map(a=>Kl(Gl(a))).filter(a=>a.length>0).map(a=>[a,1]):n.map(a=>[a,1])}function Gs(t,e,r){let n=Object.entries(t.weightedPrompts);return console.log(n),e&&(n=n.sort((i,a)=>Zn(t,parseInt(a[0]))-Zn(t,parseInt(i[0])))),console.log(n),r||(n=n.filter(i=>r||Zn(t,parseInt(i[0])))),console.log(n),n}function l6(t){return t.trim().endsWith(".")}function c6(t){let e="",r=[];return t.forEach((n,i)=>{l6(n)?(r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+". ",r=[]),e+=n+" "):r.push(n.trim())}),r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+"."),e.trim()}function af(t,e,r,n,i){if(console.log("get prompt text",t,e,r,n,i),r===Ar.Multi)return Gs(t,n,i).map(([o,s],l)=>`${Fu(s.text,`${e}${o}${l}`)}::${Zn(t,parseInt(o))}`).join(" ");const a=Gs(t,n,i).map(([o,s],l)=>Fu(s.text,`${e}${o}${l}`));if(r===Ar.Single){const o=c6(a);return console.log(o),o}return a.join(`
`)}const Ss="outputMode";function f6(){const t=Yt(Ar.Multi),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Ss]?localStorage[Ss]:Ar.Multi),{subscribe:e,update:a=>{i&&(localStorage[Ss]=a,r(a))},get:()=>St(t),delete:()=>{i&&(delete localStorage[Ss],r(Ar.Multi))}}}const Su=f6(),Ia=Yt("");function ld(t,e,r){const n=t.slice();return n[5]=e[r][0],n[6]=e[r][1],n[8]=r,n}function cd(t,e){let r,n=Fu(e[6].text,`${e[2]}${e[5]}${e[8]}`)+"",i,a,o,s=Zn(e[3],parseInt(e[5]))+"",l,h,c;return{key:t,first:null,c(){r=W("span"),i=we(n),a=we("::"),o=W("b"),l=we(s),h=Ee(),this.h()},l(f){r=H(f,"SPAN",{style:!0});var p=U(r);i=ye(p,n),a=ye(p,"::"),o=H(p,"B",{});var g=U(o);l=ye(g,s),h=Ae(g),g.forEach(M),p.forEach(M),this.h()},h(){B(r,"style",c=`color: rgba(255,255,255,${Math.max(.25,ed(e[3],parseInt(e[5])))});`),this.first=r},m(f,p){ue(f,r,p),k(r,i),k(r,a),k(r,o),k(o,l),k(o,h)},p(f,p){e=f,p&15&&n!==(n=Fu(e[6].text,`${e[2]}${e[5]}${e[8]}`)+"")&&zt(i,n),p&11&&s!==(s=Zn(e[3],parseInt(e[5]))+"")&&zt(l,s),p&11&&c!==(c=`color: rgba(255,255,255,${Math.max(.25,ed(e[3],parseInt(e[5])))});`)&&B(r,"style",c)},d(f){f&&M(r)}}}function h6(t){let e,r,n=[],i=new Map,a=Gs(t[3],t[1],t[0]);const o=s=>s[5];for(let s=0;s<a.length;s+=1){let l=ld(t,a,s),h=o(l);i.set(h,n[s]=cd(h,l))}return{c(){e=W("div"),r=W("p");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=H(s,"DIV",{class:!0});var l=U(e);r=H(l,"P",{class:!0});var h=U(r);for(let c=0;c<n.length;c+=1)n[c].l(h);h.forEach(M),l.forEach(M),this.h()},h(){B(r,"class","text-sm select-none"),B(e,"class","overflow-y-auto h-full")},m(s,l){ue(s,e,l),k(e,r);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(r,null)},p(s,[l]){l&15&&(a=Gs(s[3],s[1],s[0]),n=jn(n,l,o,1,s,a,i,r,Qn,cd,null,ld))},i:Oe,o:Oe,d(s){s&&M(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function d6(t,e,r){let n,i,a,o,s;return je(t,Cu,l=>r(0,n=l)),je(t,Ao,l=>r(1,i=l)),je(t,Su,l=>r(4,a=l)),je(t,Li,l=>r(2,o=l)),je(t,Ye,l=>r(3,s=l)),t.$$.update=()=>{t.$$.dirty&31&&(console.log("updating multi prompt text"),Ia.set(af(s,o,a,i,n)))},[n,i,o,s,a]}class p6 extends Ze{constructor(e){super(),Je(this,e,d6,h6,Qe,{})}}function g6(t){let e,r,n,i;return{c(){e=W("div"),r=W("p"),n=W("span"),i=we(t[0]),this.h()},l(a){e=H(a,"DIV",{class:!0});var o=U(e);r=H(o,"P",{class:!0});var s=U(r);n=H(s,"SPAN",{style:!0});var l=U(n);i=ye(l,t[0]),l.forEach(M),s.forEach(M),o.forEach(M),this.h()},h(){B(n,"style","color: rgba(255,255,255,0.75});"),B(r,"class","text-sm select-none"),B(e,"class","overflow-y-auto h-full")},m(a,o){ue(a,e,o),k(e,r),k(r,n),k(n,i)},p(a,[o]){o&1&&zt(i,a[0])},i:Oe,o:Oe,d(a){a&&M(e)}}}function v6(t,e,r){let n,i,a,o,s,l;return je(t,Cu,h=>r(1,n=h)),je(t,Ao,h=>r(2,i=h)),je(t,Su,h=>r(3,a=h)),je(t,Li,h=>r(4,o=h)),je(t,Ye,h=>r(5,s=h)),je(t,Ia,h=>r(0,l=h)),t.$$.update=()=>{t.$$.dirty&62&&(console.log("updating single prompt text"),Ia.set(af(s,o,a,i,n)))},[l,n,i,a,o,s]}class m6 extends Ze{constructor(e){super(),Je(this,e,v6,g6,Qe,{})}}const _u="promptHistory";function _6(){const t=Yt([]),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",a=(i&&JSON.parse(localStorage[_u]||"[]")||[]).map(o=>({...o,date:new Date(o.date)}));return r(a),{subscribe:e,add:o=>{if(!o||!i)return;const l=[...St(t).slice(-99),o];localStorage[_u]=JSON.stringify(l),r(l)},update:o=>{!o||!i||(localStorage[_u]=o,r(o))},get:()=>St(t),remove:o=>{if(!i)return;const l=St(t).filter(h=>h.id!==o);localStorage[_u]=JSON.stringify(l),r(l)},delete:()=>{i&&(delete localStorage[_u],r([]))}}}const uf=_6();var Nc={},T1={},Ks={},b6={get exports(){return Ks},set exports(t){Ks=t}},Ys={},D6={get exports(){return Ys},set exports(t){Ys=t}},I1=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}},w6=I1,Ui=Object.prototype.toString;function sf(t){return Array.isArray(t)}function Lc(t){return typeof t>"u"}function y6(t){return t!==null&&!Lc(t)&&t.constructor!==null&&!Lc(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function x1(t){return Ui.call(t)==="[object ArrayBuffer]"}function E6(t){return Ui.call(t)==="[object FormData]"}function A6(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&x1(t.buffer),e}function C6(t){return typeof t=="string"}function F6(t){return typeof t=="number"}function N1(t){return t!==null&&typeof t=="object"}function ks(t){if(Ui.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function S6(t){return Ui.call(t)==="[object Date]"}function B6(t){return Ui.call(t)==="[object File]"}function O6(t){return Ui.call(t)==="[object Blob]"}function L1(t){return Ui.call(t)==="[object Function]"}function M6(t){return N1(t)&&L1(t.pipe)}function P6(t){return Ui.call(t)==="[object URLSearchParams]"}function k6(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function T6(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function of(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),sf(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Rc(){var t={};function e(i,a){ks(t[a])&&ks(i)?t[a]=Rc(t[a],i):ks(i)?t[a]=Rc({},i):sf(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)of(arguments[r],e);return t}function I6(t,e,r){return of(e,function(i,a){r&&typeof i=="function"?t[a]=w6(i,r):t[a]=i}),t}function x6(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var on={isArray:sf,isArrayBuffer:x1,isBuffer:y6,isFormData:E6,isArrayBufferView:A6,isString:C6,isNumber:F6,isObject:N1,isPlainObject:ks,isUndefined:Lc,isDate:S6,isFile:B6,isBlob:O6,isFunction:L1,isStream:M6,isURLSearchParams:P6,isStandardBrowserEnv:T6,forEach:of,merge:Rc,extend:I6,trim:k6,stripBOM:x6},ya=on;function fd(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var R1=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(ya.isURLSearchParams(r))i=r.toString();else{var a=[];ya.forEach(r,function(l,h){l===null||typeof l>"u"||(ya.isArray(l)?h=h+"[]":l=[l],ya.forEach(l,function(f){ya.isDate(f)?f=f.toISOString():ya.isObject(f)&&(f=JSON.stringify(f)),a.push(fd(h)+"="+fd(f))}))}),i=a.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},N6=on;function Co(){this.handlers=[]}Co.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Co.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Co.prototype.forEach=function(e){N6.forEach(this.handlers,function(n){n!==null&&e(n)})};var L6=Co,R6=on,U6=function(e,r){R6.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})},U1=function(e,r,n,i,a){return e.config=r,n&&(e.code=n),e.request=i,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},V1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Yl,hd;function j1(){if(hd)return Yl;hd=1;var t=U1;return Yl=function(r,n,i,a,o){var s=new Error(r);return t(s,n,i,a,o)},Yl}var Zl,dd;function V6(){if(dd)return Zl;dd=1;var t=j1();return Zl=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},Zl}var Jl,pd;function j6(){if(pd)return Jl;pd=1;var t=on;return Jl=t.isStandardBrowserEnv()?function(){return{write:function(n,i,a,o,s,l){var h=[];h.push(n+"="+encodeURIComponent(i)),t.isNumber(a)&&h.push("expires="+new Date(a).toGMTString()),t.isString(o)&&h.push("path="+o),t.isString(s)&&h.push("domain="+s),l===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Jl}var Ql,gd;function z6(){return gd||(gd=1,Ql=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),Ql}var Xl,vd;function q6(){return vd||(vd=1,Xl=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Xl}var ec,md;function W6(){if(md)return ec;md=1;var t=z6(),e=q6();return ec=function(n,i){return n&&!t(i)?e(n,i):i},ec}var tc,_d;function H6(){if(_d)return tc;_d=1;var t=on,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return tc=function(n){var i={},a,o,s;return n&&t.forEach(n.split(`
`),function(h){if(s=h.indexOf(":"),a=t.trim(h.substr(0,s)).toLowerCase(),o=t.trim(h.substr(s+1)),a){if(i[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([o]):i[a]=i[a]?i[a]+", "+o:o}}),i},tc}var rc,bd;function $6(){if(bd)return rc;bd=1;var t=on;return rc=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(o){var s=o;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(s){var l=t.isString(s)?a(s):s;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),rc}var nc,Dd;function Fo(){if(Dd)return nc;Dd=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,nc=t,nc}var ic,wd;function yd(){if(wd)return ic;wd=1;var t=on,e=V6(),r=j6(),n=R1,i=W6(),a=H6(),o=$6(),s=j1(),l=V1,h=Fo();return ic=function(f){return new Promise(function(g,b){var v=f.data,m=f.headers,D=f.responseType,S;function y(){f.cancelToken&&f.cancelToken.unsubscribe(S),f.signal&&f.signal.removeEventListener("abort",S)}t.isFormData(v)&&delete m["Content-Type"];var A=new XMLHttpRequest;if(f.auth){var C=f.auth.username||"",P=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";m.Authorization="Basic "+btoa(C+":"+P)}var O=i(f.baseURL,f.url);A.open(f.method.toUpperCase(),n(O,f.params,f.paramsSerializer),!0),A.timeout=f.timeout;function F(){if(A){var z="getAllResponseHeaders"in A?a(A.getAllResponseHeaders()):null,G=!D||D==="text"||D==="json"?A.responseText:A.response,J={data:G,status:A.status,statusText:A.statusText,headers:z,config:f,request:A};e(function(N){g(N),y()},function(N){b(N),y()},J),A=null}}if("onloadend"in A?A.onloadend=F:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(F)},A.onabort=function(){A&&(b(s("Request aborted",f,"ECONNABORTED",A)),A=null)},A.onerror=function(){b(s("Network Error",f,null,A)),A=null},A.ontimeout=function(){var G=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",J=f.transitional||l;f.timeoutErrorMessage&&(G=f.timeoutErrorMessage),b(s(G,f,J.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",A)),A=null},t.isStandardBrowserEnv()){var x=(f.withCredentials||o(O))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;x&&(m[f.xsrfHeaderName]=x)}"setRequestHeader"in A&&t.forEach(m,function(G,J){typeof v>"u"&&J.toLowerCase()==="content-type"?delete m[J]:A.setRequestHeader(J,G)}),t.isUndefined(f.withCredentials)||(A.withCredentials=!!f.withCredentials),D&&D!=="json"&&(A.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&A.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&A.upload&&A.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(S=function(z){A&&(b(!z||z&&z.type?new h("canceled"):z),A.abort(),A=null)},f.cancelToken&&f.cancelToken.subscribe(S),f.signal&&(f.signal.aborted?S():f.signal.addEventListener("abort",S))),v||(v=null),A.send(v)})},ic}var Ir=on,Ed=U6,G6=U1,K6=V1,Y6={"Content-Type":"application/x-www-form-urlencoded"};function Ad(t,e){!Ir.isUndefined(t)&&Ir.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function Z6(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=yd()),t}function J6(t,e,r){if(Ir.isString(t))try{return(e||JSON.parse)(t),Ir.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var So={transitional:K6,adapter:Z6(),transformRequest:[function(e,r){return Ed(r,"Accept"),Ed(r,"Content-Type"),Ir.isFormData(e)||Ir.isArrayBuffer(e)||Ir.isBuffer(e)||Ir.isStream(e)||Ir.isFile(e)||Ir.isBlob(e)?e:Ir.isArrayBufferView(e)?e.buffer:Ir.isURLSearchParams(e)?(Ad(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Ir.isObject(e)||r&&r["Content-Type"]==="application/json"?(Ad(r,"application/json"),J6(e)):e}],transformResponse:[function(e){var r=this.transitional||So.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&Ir.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?G6(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ir.forEach(["delete","get","head"],function(e){So.headers[e]={}});Ir.forEach(["post","put","patch"],function(e){So.headers[e]=Ir.merge(Y6)});var lf=So,Q6=on,X6=lf,eC=function(e,r,n){var i=this||X6;return Q6.forEach(n,function(o){e=o.call(i,e,r)}),e},ac,Cd;function z1(){return Cd||(Cd=1,ac=function(e){return!!(e&&e.__CANCEL__)}),ac}var Fd=on,uc=eC,tC=z1(),rC=lf,nC=Fo();function sc(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new nC("canceled")}var iC=function(e){sc(e),e.headers=e.headers||{},e.data=uc.call(e,e.data,e.headers,e.transformRequest),e.headers=Fd.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Fd.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||rC.adapter;return r(e).then(function(i){return sc(e),i.data=uc.call(e,i.data,i.headers,e.transformResponse),i},function(i){return tC(i)||(sc(e),i&&i.response&&(i.response.data=uc.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},gn=on,q1=function(e,r){r=r||{};var n={};function i(c,f){return gn.isPlainObject(c)&&gn.isPlainObject(f)?gn.merge(c,f):gn.isPlainObject(f)?gn.merge({},f):gn.isArray(f)?f.slice():f}function a(c){if(gn.isUndefined(r[c])){if(!gn.isUndefined(e[c]))return i(void 0,e[c])}else return i(e[c],r[c])}function o(c){if(!gn.isUndefined(r[c]))return i(void 0,r[c])}function s(c){if(gn.isUndefined(r[c])){if(!gn.isUndefined(e[c]))return i(void 0,e[c])}else return i(void 0,r[c])}function l(c){if(c in r)return i(e[c],r[c]);if(c in e)return i(void 0,e[c])}var h={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l};return gn.forEach(Object.keys(e).concat(Object.keys(r)),function(f){var p=h[f]||a,g=p(f);gn.isUndefined(g)&&p!==l||(n[f]=g)}),n},oc,Sd;function W1(){return Sd||(Sd=1,oc={version:"0.26.1"}),oc}var aC=W1().version,cf={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){cf[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Bd={};cf.transitional=function(e,r,n){function i(a,o){return"[Axios v"+aC+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,s){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!Bd[o]&&(Bd[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,s):!0}};function uC(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],o=e[a];if(o){var s=t[a],l=s===void 0||o(s,a,t);if(l!==!0)throw new TypeError("option "+a+" must be "+l);continue}if(r!==!0)throw Error("Unknown option "+a)}}var sC={assertOptions:uC,validators:cf},H1=on,oC=R1,Od=L6,Md=iC,Bo=q1,$1=sC,Ea=$1.validators;function Iu(t){this.defaults=t,this.interceptors={request:new Od,response:new Od}}Iu.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Bo(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&$1.assertOptions(n,{silentJSONParsing:Ea.transitional(Ea.boolean),forcedJSONParsing:Ea.transitional(Ea.boolean),clarifyTimeoutError:Ea.transitional(Ea.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(a=a&&g.synchronous,i.unshift(g.fulfilled,g.rejected))});var o=[];this.interceptors.response.forEach(function(g){o.push(g.fulfilled,g.rejected)});var s;if(!a){var l=[Md,void 0];for(Array.prototype.unshift.apply(l,i),l=l.concat(o),s=Promise.resolve(r);l.length;)s=s.then(l.shift(),l.shift());return s}for(var h=r;i.length;){var c=i.shift(),f=i.shift();try{h=c(h)}catch(p){f(p);break}}try{s=Md(h)}catch(p){return Promise.reject(p)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};Iu.prototype.getUri=function(e){return e=Bo(this.defaults,e),oC(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};H1.forEach(["delete","get","head","options"],function(e){Iu.prototype[e]=function(r,n){return this.request(Bo(n||{},{method:e,url:r,data:(n||{}).data}))}});H1.forEach(["post","put","patch"],function(e){Iu.prototype[e]=function(r,n,i){return this.request(Bo(i||{},{method:e,url:r,data:n}))}});var lC=Iu,lc,Pd;function cC(){if(Pd)return lc;Pd=1;var t=Fo();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(a){if(i._listeners){var o,s=i._listeners.length;for(o=0;o<s;o++)i._listeners[o](a);i._listeners=null}}),this.promise.then=function(a){var o,s=new Promise(function(l){i.subscribe(l),o=l}).then(a);return s.cancel=function(){i.unsubscribe(o)},s},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},lc=e,lc}var cc,kd;function fC(){return kd||(kd=1,cc=function(e){return function(n){return e.apply(null,n)}}),cc}var fc,Td;function hC(){if(Td)return fc;Td=1;var t=on;return fc=function(r){return t.isObject(r)&&r.isAxiosError===!0},fc}var Id=on,dC=I1,Ts=lC,pC=q1,gC=lf;function G1(t){var e=new Ts(t),r=dC(Ts.prototype.request,e);return Id.extend(r,Ts.prototype,e),Id.extend(r,e),r.create=function(i){return G1(pC(t,i))},r}var Xn=G1(gC);Xn.Axios=Ts;Xn.Cancel=Fo();Xn.CancelToken=cC();Xn.isCancel=z1();Xn.VERSION=W1().version;Xn.all=function(e){return Promise.all(e)};Xn.spread=fC();Xn.isAxiosError=hC();D6.exports=Xn;Ys.default=Xn;(function(t){t.exports=Ys})(b6);var ur={},ff={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RequiredError=t.BaseAPI=t.COLLECTION_FORMATS=t.BASE_PATH=void 0;const e=Ks;t.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class r{constructor(a,o=t.BASE_PATH,s=e.default){this.basePath=o,this.axios=s,a&&(this.configuration=a,this.basePath=a.basePath||this.basePath)}}t.BaseAPI=r;class n extends Error{constructor(a,o){super(o),this.field=a,this.name="RequiredError"}}t.RequiredError=n})(ff);var hf=dr&&dr.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{h(n.next(c))}catch(f){o(f)}}function l(c){try{h(n.throw(c))}catch(f){o(f)}}function h(c){c.done?a(c.value):i(c.value).then(s,l)}h((n=n.apply(t,e||[])).next())})};Object.defineProperty(ur,"__esModule",{value:!0});ur.createRequestFunction=ur.toPathString=ur.serializeDataIfNeeded=ur.setSearchParams=ur.setOAuthToObject=ur.setBearerAuthToObject=ur.setBasicAuthToObject=ur.setApiKeyToObject=ur.assertParamExists=ur.DUMMY_BASE_URL=void 0;const vC=ff;ur.DUMMY_BASE_URL="https://example.com";ur.assertParamExists=function(t,e,r){if(r==null)throw new vC.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};ur.setApiKeyToObject=function(t,e,r){return hf(this,void 0,void 0,function*(){if(r&&r.apiKey){const n=typeof r.apiKey=="function"?yield r.apiKey(e):yield r.apiKey;t[e]=n}})};ur.setBasicAuthToObject=function(t,e){e&&(e.username||e.password)&&(t.auth={username:e.username,password:e.password})};ur.setBearerAuthToObject=function(t,e){return hf(this,void 0,void 0,function*(){if(e&&e.accessToken){const r=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;t.Authorization="Bearer "+r}})};ur.setOAuthToObject=function(t,e,r,n){return hf(this,void 0,void 0,function*(){if(n&&n.accessToken){const i=typeof n.accessToken=="function"?yield n.accessToken(e,r):yield n.accessToken;t.Authorization="Bearer "+i}})};function Uc(t,e,r=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(n=>Uc(t,n,r)):Object.keys(e).forEach(n=>Uc(t,e[n],`${r}${r!==""?".":""}${n}`)):t.has(r)?t.append(r,e):t.set(r,e))}ur.setSearchParams=function(t,...e){const r=new URLSearchParams(t.search);Uc(r,e),t.search=r.toString()};ur.serializeDataIfNeeded=function(t,e,r){const n=typeof t!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(t!==void 0?t:{}):t||""};ur.toPathString=function(t){return t.pathname+t.search+t.hash};ur.createRequestFunction=function(t,e,r,n){return(i=e,a=r)=>{const o=Object.assign(Object.assign({},t.options),{url:((n==null?void 0:n.basePath)||a)+t.url});return i.request(o)}};(function(t){var e=dr&&dr.__awaiter||function(o,s,l,h){function c(f){return f instanceof l?f:new l(function(p){p(f)})}return new(l||(l=Promise))(function(f,p){function g(m){try{v(h.next(m))}catch(D){p(D)}}function b(m){try{v(h.throw(m))}catch(D){p(D)}}function v(m){m.done?f(m.value):c(m.value).then(g,b)}v((h=h.apply(o,s||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIApi=t.OpenAIApiFactory=t.OpenAIApiFp=t.OpenAIApiAxiosParamCreator=t.CreateImageRequestResponseFormatEnum=t.CreateImageRequestSizeEnum=t.ChatCompletionResponseMessageRoleEnum=t.ChatCompletionRequestMessageRoleEnum=void 0;const r=Ks,n=ur,i=ff;t.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},t.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},t.OpenAIApiAxiosParamCreator=function(o){return{cancelFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("cancelFineTune","fineTuneId",s);const h="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(s))),c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:p}}),createAnswer:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createAnswer","createAnswerRequest",s);const h="/answers",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createChatCompletion:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createChatCompletion","createChatCompletionRequest",s);const h="/chat/completions",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createClassification:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createClassification","createClassificationRequest",s);const h="/classifications",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createCompletion:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createCompletion","createCompletionRequest",s);const h="/completions",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createEdit:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEdit","createEditRequest",s);const h="/edits",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createEmbedding:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEmbedding","createEmbeddingRequest",s);const h="/embeddings",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createFile:(s,l,h={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFile","file",s),n.assertParamExists("createFile","purpose",l);const c="/files",f=new URL(c,n.DUMMY_BASE_URL);let p;o&&(p=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},p),h),b={},v={},m=new(o&&o.formDataCtor||FormData);s!==void 0&&m.append("file",s),l!==void 0&&m.append("purpose",l),b["Content-Type"]="multipart/form-data",n.setSearchParams(f,v);let D=p&&p.headers?p.headers:{};return g.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),m.getHeaders()),D),h.headers),g.data=m,{url:n.toPathString(f),options:g}}),createFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFineTune","createFineTuneRequest",s);const h="/fine-tunes",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createImage:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImage","createImageRequest",s);const h="/images/generations",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createImageEdit:(s,l,h,c,f,p,g,b={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageEdit","image",s),n.assertParamExists("createImageEdit","prompt",l);const v="/images/edits",m=new URL(v,n.DUMMY_BASE_URL);let D;o&&(D=o.baseOptions);const S=Object.assign(Object.assign({method:"POST"},D),b),y={},A={},C=new(o&&o.formDataCtor||FormData);s!==void 0&&C.append("image",s),h!==void 0&&C.append("mask",h),l!==void 0&&C.append("prompt",l),c!==void 0&&C.append("n",c),f!==void 0&&C.append("size",f),p!==void 0&&C.append("response_format",p),g!==void 0&&C.append("user",g),y["Content-Type"]="multipart/form-data",n.setSearchParams(m,A);let P=D&&D.headers?D.headers:{};return S.headers=Object.assign(Object.assign(Object.assign(Object.assign({},y),C.getHeaders()),P),b.headers),S.data=C,{url:n.toPathString(m),options:S}}),createImageVariation:(s,l,h,c,f,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageVariation","image",s);const g="/images/variations",b=new URL(g,n.DUMMY_BASE_URL);let v;o&&(v=o.baseOptions);const m=Object.assign(Object.assign({method:"POST"},v),p),D={},S={},y=new(o&&o.formDataCtor||FormData);s!==void 0&&y.append("image",s),l!==void 0&&y.append("n",l),h!==void 0&&y.append("size",h),c!==void 0&&y.append("response_format",c),f!==void 0&&y.append("user",f),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,S);let A=v&&v.headers?v.headers:{};return m.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),y.getHeaders()),A),p.headers),m.data=y,{url:n.toPathString(b),options:m}}),createModeration:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createModeration","createModerationRequest",s);const h="/moderations",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createSearch:(s,l,h={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createSearch","engineId",s),n.assertParamExists("createSearch","createSearchRequest",l);const c="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(s))),f=new URL(c,n.DUMMY_BASE_URL);let p;o&&(p=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},p),h),b={},v={};b["Content-Type"]="application/json",n.setSearchParams(f,v);let m=p&&p.headers?p.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),m),h.headers),g.data=n.serializeDataIfNeeded(l,g,o),{url:n.toPathString(f),options:g}}),createTranscription:(s,l,h,c,f,p,g={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranscription","file",s),n.assertParamExists("createTranscription","model",l);const b="/audio/transcriptions",v=new URL(b,n.DUMMY_BASE_URL);let m;o&&(m=o.baseOptions);const D=Object.assign(Object.assign({method:"POST"},m),g),S={},y={},A=new(o&&o.formDataCtor||FormData);s!==void 0&&A.append("file",s),l!==void 0&&A.append("model",l),h!==void 0&&A.append("prompt",h),c!==void 0&&A.append("response_format",c),f!==void 0&&A.append("temperature",f),p!==void 0&&A.append("language",p),S["Content-Type"]="multipart/form-data",n.setSearchParams(v,y);let C=m&&m.headers?m.headers:{};return D.headers=Object.assign(Object.assign(Object.assign(Object.assign({},S),A.getHeaders()),C),g.headers),D.data=A,{url:n.toPathString(v),options:D}}),createTranslation:(s,l,h,c,f,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranslation","file",s),n.assertParamExists("createTranslation","model",l);const g="/audio/translations",b=new URL(g,n.DUMMY_BASE_URL);let v;o&&(v=o.baseOptions);const m=Object.assign(Object.assign({method:"POST"},v),p),D={},S={},y=new(o&&o.formDataCtor||FormData);s!==void 0&&y.append("file",s),l!==void 0&&y.append("model",l),h!==void 0&&y.append("prompt",h),c!==void 0&&y.append("response_format",c),f!==void 0&&y.append("temperature",f),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,S);let A=v&&v.headers?v.headers:{};return m.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),y.getHeaders()),A),p.headers),m.data=y,{url:n.toPathString(b),options:m}}),deleteFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteFile","fileId",s);const h="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"DELETE"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:p}}),deleteModel:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteModel","model",s);const h="/models/{model}".replace("{model}",encodeURIComponent(String(s))),c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"DELETE"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:p}}),downloadFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("downloadFile","fileId",s);const h="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(s))),c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:p}}),listEngines:(s={})=>e(this,void 0,void 0,function*(){const l="/engines",h=new URL(l,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),s),p={},g={};n.setSearchParams(h,g);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},p),b),s.headers),{url:n.toPathString(h),options:f}}),listFiles:(s={})=>e(this,void 0,void 0,function*(){const l="/files",h=new URL(l,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),s),p={},g={};n.setSearchParams(h,g);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},p),b),s.headers),{url:n.toPathString(h),options:f}}),listFineTuneEvents:(s,l,h={})=>e(this,void 0,void 0,function*(){n.assertParamExists("listFineTuneEvents","fineTuneId",s);const c="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(s))),f=new URL(c,n.DUMMY_BASE_URL);let p;o&&(p=o.baseOptions);const g=Object.assign(Object.assign({method:"GET"},p),h),b={},v={};l!==void 0&&(v.stream=l),n.setSearchParams(f,v);let m=p&&p.headers?p.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),m),h.headers),{url:n.toPathString(f),options:g}}),listFineTunes:(s={})=>e(this,void 0,void 0,function*(){const l="/fine-tunes",h=new URL(l,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),s),p={},g={};n.setSearchParams(h,g);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},p),b),s.headers),{url:n.toPathString(h),options:f}}),listModels:(s={})=>e(this,void 0,void 0,function*(){const l="/models",h=new URL(l,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),s),p={},g={};n.setSearchParams(h,g);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},p),b),s.headers),{url:n.toPathString(h),options:f}}),retrieveEngine:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveEngine","engineId",s);const h="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(s))),c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:p}}),retrieveFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFile","fileId",s);const h="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:p}}),retrieveFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFineTune","fineTuneId",s);const h="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(s))),c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:p}}),retrieveModel:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveModel","model",s);const h="/models/{model}".replace("{model}",encodeURIComponent(String(s))),c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:p}})}},t.OpenAIApiFp=function(o){const s=t.OpenAIApiAxiosParamCreator(o);return{cancelFineTune(l,h){return e(this,void 0,void 0,function*(){const c=yield s.cancelFineTune(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createAnswer(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createAnswer(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createChatCompletion(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createChatCompletion(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createClassification(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createClassification(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createCompletion(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createCompletion(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createEdit(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createEdit(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createEmbedding(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createEmbedding(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createFile(l,h,c){return e(this,void 0,void 0,function*(){const f=yield s.createFile(l,h,c);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createFineTune(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createFineTune(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createImage(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createImage(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createImageEdit(l,h,c,f,p,g,b,v){return e(this,void 0,void 0,function*(){const m=yield s.createImageEdit(l,h,c,f,p,g,b,v);return n.createRequestFunction(m,r.default,i.BASE_PATH,o)})},createImageVariation(l,h,c,f,p,g){return e(this,void 0,void 0,function*(){const b=yield s.createImageVariation(l,h,c,f,p,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},createModeration(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createModeration(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createSearch(l,h,c){return e(this,void 0,void 0,function*(){const f=yield s.createSearch(l,h,c);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createTranscription(l,h,c,f,p,g,b){return e(this,void 0,void 0,function*(){const v=yield s.createTranscription(l,h,c,f,p,g,b);return n.createRequestFunction(v,r.default,i.BASE_PATH,o)})},createTranslation(l,h,c,f,p,g){return e(this,void 0,void 0,function*(){const b=yield s.createTranslation(l,h,c,f,p,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},deleteFile(l,h){return e(this,void 0,void 0,function*(){const c=yield s.deleteFile(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},deleteModel(l,h){return e(this,void 0,void 0,function*(){const c=yield s.deleteModel(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},downloadFile(l,h){return e(this,void 0,void 0,function*(){const c=yield s.downloadFile(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},listEngines(l){return e(this,void 0,void 0,function*(){const h=yield s.listEngines(l);return n.createRequestFunction(h,r.default,i.BASE_PATH,o)})},listFiles(l){return e(this,void 0,void 0,function*(){const h=yield s.listFiles(l);return n.createRequestFunction(h,r.default,i.BASE_PATH,o)})},listFineTuneEvents(l,h,c){return e(this,void 0,void 0,function*(){const f=yield s.listFineTuneEvents(l,h,c);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},listFineTunes(l){return e(this,void 0,void 0,function*(){const h=yield s.listFineTunes(l);return n.createRequestFunction(h,r.default,i.BASE_PATH,o)})},listModels(l){return e(this,void 0,void 0,function*(){const h=yield s.listModels(l);return n.createRequestFunction(h,r.default,i.BASE_PATH,o)})},retrieveEngine(l,h){return e(this,void 0,void 0,function*(){const c=yield s.retrieveEngine(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},retrieveFile(l,h){return e(this,void 0,void 0,function*(){const c=yield s.retrieveFile(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},retrieveFineTune(l,h){return e(this,void 0,void 0,function*(){const c=yield s.retrieveFineTune(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},retrieveModel(l,h){return e(this,void 0,void 0,function*(){const c=yield s.retrieveModel(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})}}},t.OpenAIApiFactory=function(o,s,l){const h=t.OpenAIApiFp(o);return{cancelFineTune(c,f){return h.cancelFineTune(c,f).then(p=>p(l,s))},createAnswer(c,f){return h.createAnswer(c,f).then(p=>p(l,s))},createChatCompletion(c,f){return h.createChatCompletion(c,f).then(p=>p(l,s))},createClassification(c,f){return h.createClassification(c,f).then(p=>p(l,s))},createCompletion(c,f){return h.createCompletion(c,f).then(p=>p(l,s))},createEdit(c,f){return h.createEdit(c,f).then(p=>p(l,s))},createEmbedding(c,f){return h.createEmbedding(c,f).then(p=>p(l,s))},createFile(c,f,p){return h.createFile(c,f,p).then(g=>g(l,s))},createFineTune(c,f){return h.createFineTune(c,f).then(p=>p(l,s))},createImage(c,f){return h.createImage(c,f).then(p=>p(l,s))},createImageEdit(c,f,p,g,b,v,m,D){return h.createImageEdit(c,f,p,g,b,v,m,D).then(S=>S(l,s))},createImageVariation(c,f,p,g,b,v){return h.createImageVariation(c,f,p,g,b,v).then(m=>m(l,s))},createModeration(c,f){return h.createModeration(c,f).then(p=>p(l,s))},createSearch(c,f,p){return h.createSearch(c,f,p).then(g=>g(l,s))},createTranscription(c,f,p,g,b,v,m){return h.createTranscription(c,f,p,g,b,v,m).then(D=>D(l,s))},createTranslation(c,f,p,g,b,v){return h.createTranslation(c,f,p,g,b,v).then(m=>m(l,s))},deleteFile(c,f){return h.deleteFile(c,f).then(p=>p(l,s))},deleteModel(c,f){return h.deleteModel(c,f).then(p=>p(l,s))},downloadFile(c,f){return h.downloadFile(c,f).then(p=>p(l,s))},listEngines(c){return h.listEngines(c).then(f=>f(l,s))},listFiles(c){return h.listFiles(c).then(f=>f(l,s))},listFineTuneEvents(c,f,p){return h.listFineTuneEvents(c,f,p).then(g=>g(l,s))},listFineTunes(c){return h.listFineTunes(c).then(f=>f(l,s))},listModels(c){return h.listModels(c).then(f=>f(l,s))},retrieveEngine(c,f){return h.retrieveEngine(c,f).then(p=>p(l,s))},retrieveFile(c,f){return h.retrieveFile(c,f).then(p=>p(l,s))},retrieveFineTune(c,f){return h.retrieveFineTune(c,f).then(p=>p(l,s))},retrieveModel(c,f){return h.retrieveModel(c,f).then(p=>p(l,s))}}};class a extends i.BaseAPI{cancelFineTune(s,l){return t.OpenAIApiFp(this.configuration).cancelFineTune(s,l).then(h=>h(this.axios,this.basePath))}createAnswer(s,l){return t.OpenAIApiFp(this.configuration).createAnswer(s,l).then(h=>h(this.axios,this.basePath))}createChatCompletion(s,l){return t.OpenAIApiFp(this.configuration).createChatCompletion(s,l).then(h=>h(this.axios,this.basePath))}createClassification(s,l){return t.OpenAIApiFp(this.configuration).createClassification(s,l).then(h=>h(this.axios,this.basePath))}createCompletion(s,l){return t.OpenAIApiFp(this.configuration).createCompletion(s,l).then(h=>h(this.axios,this.basePath))}createEdit(s,l){return t.OpenAIApiFp(this.configuration).createEdit(s,l).then(h=>h(this.axios,this.basePath))}createEmbedding(s,l){return t.OpenAIApiFp(this.configuration).createEmbedding(s,l).then(h=>h(this.axios,this.basePath))}createFile(s,l,h){return t.OpenAIApiFp(this.configuration).createFile(s,l,h).then(c=>c(this.axios,this.basePath))}createFineTune(s,l){return t.OpenAIApiFp(this.configuration).createFineTune(s,l).then(h=>h(this.axios,this.basePath))}createImage(s,l){return t.OpenAIApiFp(this.configuration).createImage(s,l).then(h=>h(this.axios,this.basePath))}createImageEdit(s,l,h,c,f,p,g,b){return t.OpenAIApiFp(this.configuration).createImageEdit(s,l,h,c,f,p,g,b).then(v=>v(this.axios,this.basePath))}createImageVariation(s,l,h,c,f,p){return t.OpenAIApiFp(this.configuration).createImageVariation(s,l,h,c,f,p).then(g=>g(this.axios,this.basePath))}createModeration(s,l){return t.OpenAIApiFp(this.configuration).createModeration(s,l).then(h=>h(this.axios,this.basePath))}createSearch(s,l,h){return t.OpenAIApiFp(this.configuration).createSearch(s,l,h).then(c=>c(this.axios,this.basePath))}createTranscription(s,l,h,c,f,p,g){return t.OpenAIApiFp(this.configuration).createTranscription(s,l,h,c,f,p,g).then(b=>b(this.axios,this.basePath))}createTranslation(s,l,h,c,f,p){return t.OpenAIApiFp(this.configuration).createTranslation(s,l,h,c,f,p).then(g=>g(this.axios,this.basePath))}deleteFile(s,l){return t.OpenAIApiFp(this.configuration).deleteFile(s,l).then(h=>h(this.axios,this.basePath))}deleteModel(s,l){return t.OpenAIApiFp(this.configuration).deleteModel(s,l).then(h=>h(this.axios,this.basePath))}downloadFile(s,l){return t.OpenAIApiFp(this.configuration).downloadFile(s,l).then(h=>h(this.axios,this.basePath))}listEngines(s){return t.OpenAIApiFp(this.configuration).listEngines(s).then(l=>l(this.axios,this.basePath))}listFiles(s){return t.OpenAIApiFp(this.configuration).listFiles(s).then(l=>l(this.axios,this.basePath))}listFineTuneEvents(s,l,h){return t.OpenAIApiFp(this.configuration).listFineTuneEvents(s,l,h).then(c=>c(this.axios,this.basePath))}listFineTunes(s){return t.OpenAIApiFp(this.configuration).listFineTunes(s).then(l=>l(this.axios,this.basePath))}listModels(s){return t.OpenAIApiFp(this.configuration).listModels(s).then(l=>l(this.axios,this.basePath))}retrieveEngine(s,l){return t.OpenAIApiFp(this.configuration).retrieveEngine(s,l).then(h=>h(this.axios,this.basePath))}retrieveFile(s,l){return t.OpenAIApiFp(this.configuration).retrieveFile(s,l).then(h=>h(this.axios,this.basePath))}retrieveFineTune(s,l){return t.OpenAIApiFp(this.configuration).retrieveFineTune(s,l).then(h=>h(this.axios,this.basePath))}retrieveModel(s,l){return t.OpenAIApiFp(this.configuration).retrieveModel(s,l).then(h=>h(this.axios,this.basePath))}}t.OpenAIApi=a})(T1);var Oo={};const mC="openai",_C="3.2.1",bC="Node.js library for the OpenAI API",DC={type:"git",url:"git@github.com:openai/openai-node.git"},wC=["openai","open","ai","gpt-3","gpt3"],yC="OpenAI",EC="MIT",AC="./dist/index.js",CC="./dist/index.d.ts",FC={build:"tsc --outDir dist/"},SC={axios:"^0.26.0","form-data":"^4.0.0"},BC={"@types/node":"^12.11.5",typescript:"^3.6.4"},OC={name:mC,version:_C,description:bC,repository:DC,keywords:wC,author:yC,license:EC,main:AC,types:CC,scripts:FC,dependencies:SC,devDependencies:BC};var hc,xd;function MC(){return xd||(xd=1,hc=typeof self=="object"?self.FormData:window.FormData),hc}Object.defineProperty(Oo,"__esModule",{value:!0});Oo.Configuration=void 0;const PC=OC;class kC{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${PC.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=MC())}isJsonMime(e){const r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(r.test(e)||e.toLowerCase()==="application/json-patch+json")}}Oo.Configuration=kC;(function(t){var e=dr&&dr.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=dr&&dr.__exportStar||function(n,i){for(var a in n)a!=="default"&&!i.hasOwnProperty(a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(T1,t),r(Oo,t)})(Nc);function Bu(t){const e=new Nc.Configuration({apiKey:t});return new Nc.OpenAIApi(e)}async function TC(t,e,r="text-davinci-003"){return await t.createCompletion({model:r,prompt:e,temperature:.8,max_tokens:250})}async function K1(t,e,r="gpt-3.5-turbo"){return await t.createChatCompletion({model:r,messages:[{role:"user",content:e}],temperature:.8,max_tokens:250})}async function IC(t,e,r="text-embedding-ada-002"){return await t.createEmbedding({model:r,input:e})}async function xC(t){return await t.listModels()}const dc="oKey";function NC(){const t=Yt(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[dc]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[dc]=a,r(a))},get:()=>St(t),delete:()=>{i&&(delete localStorage[dc],r(""))}}}const Vn=NC();var Ou={},LC={get exports(){return Ou},set exports(t){Ou=t}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var r,n="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",s="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",h=500,c="__lodash_placeholder__",f=1,p=2,g=4,b=1,v=2,m=1,D=2,S=4,y=8,A=16,C=32,P=64,O=128,F=256,x=512,z=30,G="...",J=800,R=16,N=1,j=2,q=3,Z=1/0,X=9007199254740991,te=17976931348623157e292,fe=0/0,he=4294967295,ge=he-1,_e=he>>>1,Be=[["ary",O],["bind",m],["bindKey",D],["curry",y],["curryRight",A],["flip",x],["partial",C],["partialRight",P],["rearg",F]],ke="[object Arguments]",Ie="[object Array]",qe="[object AsyncFunction]",it="[object Boolean]",at="[object Date]",et="[object DOMException]",Et="[object Error]",At="[object Function]",ct="[object GeneratorFunction]",ot="[object Map]",Pt="[object Number]",Wr="[object Null]",Ut="[object Object]",Hr="[object Promise]",tt="[object Proxy]",pr="[object RegExp]",Sr="[object Set]",On="[object String]",K="[object Symbol]",Q="[object Undefined]",ie="[object WeakMap]",me="[object WeakSet]",se="[object ArrayBuffer]",Ce="[object DataView]",ce="[object Float32Array]",pe="[object Float64Array]",Te="[object Int8Array]",We="[object Int16Array]",lt="[object Int32Array]",xe="[object Uint8Array]",Zt="[object Uint8ClampedArray]",Vt="[object Uint16Array]",nr="[object Uint32Array]",Jt=/\b__p \+= '';/g,Dr=/\b(__p \+=) '' \+/g,Qt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wr=/&(?:amp|lt|gt|quot|#39);/g,fr=/[&<>"']/g,hr=RegExp(wr.source),vn=RegExp(fr.source),gr=/<%-([\s\S]+?)%>/g,Mn=/<%([\s\S]+?)%>/g,ei=/<%=([\s\S]+?)%>/g,zn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qn=/^\w*$/,ia=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vi=/[\\^$.*+?()[\]{}|]/g,za=RegExp(Vi.source),Br=/^\s+/,ir=/\s/,qa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,mi=/\{\n\/\* \[wrapped with (.+)\] \*/,mn=/,? & /,ti=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ji=/[()=,{}\[\]\/\s]/,Wa=/\\(\\)?/g,Ha=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,aa=/\w*$/,$a=/^[-+]0x[0-9a-f]+$/i,Ga=/^0b[01]+$/i,Ka=/^\[object .+?Constructor\]$/,Ya=/^0o[0-7]+$/i,Za=/^(?:0|[1-9]\d*)$/,Ja=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_i=/($^)/,Qa=/['\n\r\u2028\u2029\\]/g,bi="\\ud800-\\udfff",Xa="\\u0300-\\u036f",eu="\\ufe20-\\ufe2f",tu="\\u20d0-\\u20ff",ua=Xa+eu+tu,Wn="\\u2700-\\u27bf",yr="a-z\\xdf-\\xf6\\xf8-\\xff",sr="\\xac\\xb1\\xd7\\xf7",$r="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",zi="\\u2000-\\u206f",ri=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Hn="A-Z\\xc0-\\xd6\\xd8-\\xde",qi="\\ufe0e\\ufe0f",Pn=sr+$r+zi+ri,_n="[']",To="["+bi+"]",ru="["+Pn+"]",sa="["+ua+"]",xu="\\d+",w="["+Wn+"]",T="["+yr+"]",$="[^"+bi+Pn+xu+Wn+yr+Hn+"]",re="\\ud83c[\\udffb-\\udfff]",be="(?:"+sa+"|"+re+")",Ne="[^"+bi+"]",vt="(?:\\ud83c[\\udde6-\\uddff]){2}",Ct="[\\ud800-\\udbff][\\udc00-\\udfff]",Wt="["+Hn+"]",or="\\u200d",_f="(?:"+T+"|"+$+")",mg="(?:"+Wt+"|"+$+")",bf="(?:"+_n+"(?:d|ll|m|re|s|t|ve))?",Df="(?:"+_n+"(?:D|LL|M|RE|S|T|VE))?",wf=be+"?",yf="["+qi+"]?",_g="(?:"+or+"(?:"+[Ne,vt,Ct].join("|")+")"+yf+wf+")*",bg="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dg="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ef=yf+wf+_g,wg="(?:"+[w,vt,Ct].join("|")+")"+Ef,yg="(?:"+[Ne+sa+"?",sa,vt,Ct,To].join("|")+")",Eg=RegExp(_n,"g"),Ag=RegExp(sa,"g"),Io=RegExp(re+"(?="+re+")|"+yg+Ef,"g"),Cg=RegExp([Wt+"?"+T+"+"+bf+"(?="+[ru,Wt,"$"].join("|")+")",mg+"+"+Df+"(?="+[ru,Wt+_f,"$"].join("|")+")",Wt+"?"+_f+"+"+bf,Wt+"+"+Df,Dg,bg,xu,wg].join("|"),"g"),Fg=RegExp("["+or+bi+ua+qi+"]"),Sg=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bg=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Og=-1,qt={};qt[ce]=qt[pe]=qt[Te]=qt[We]=qt[lt]=qt[xe]=qt[Zt]=qt[Vt]=qt[nr]=!0,qt[ke]=qt[Ie]=qt[se]=qt[it]=qt[Ce]=qt[at]=qt[Et]=qt[At]=qt[ot]=qt[Pt]=qt[Ut]=qt[pr]=qt[Sr]=qt[On]=qt[ie]=!1;var jt={};jt[ke]=jt[Ie]=jt[se]=jt[Ce]=jt[it]=jt[at]=jt[ce]=jt[pe]=jt[Te]=jt[We]=jt[lt]=jt[ot]=jt[Pt]=jt[Ut]=jt[pr]=jt[Sr]=jt[On]=jt[K]=jt[xe]=jt[Zt]=jt[Vt]=jt[nr]=!0,jt[Et]=jt[At]=jt[ie]=!1;var Mg={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Pg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},kg={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Tg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ig=parseFloat,xg=parseInt,Af=typeof dr=="object"&&dr&&dr.Object===Object&&dr,Ng=typeof self=="object"&&self&&self.Object===Object&&self,Or=Af||Ng||Function("return this")(),xo=e&&!e.nodeType&&e,Wi=xo&&!0&&t&&!t.nodeType&&t,Cf=Wi&&Wi.exports===xo,No=Cf&&Af.process,bn=function(){try{var ne=Wi&&Wi.require&&Wi.require("util").types;return ne||No&&No.binding&&No.binding("util")}catch{}}(),Ff=bn&&bn.isArrayBuffer,Sf=bn&&bn.isDate,Bf=bn&&bn.isMap,Of=bn&&bn.isRegExp,Mf=bn&&bn.isSet,Pf=bn&&bn.isTypedArray;function ln(ne,ve,le){switch(le.length){case 0:return ne.call(ve);case 1:return ne.call(ve,le[0]);case 2:return ne.call(ve,le[0],le[1]);case 3:return ne.call(ve,le[0],le[1],le[2])}return ne.apply(ve,le)}function Lg(ne,ve,le,He){for(var ht=-1,Mt=ne==null?0:ne.length;++ht<Mt;){var vr=ne[ht];ve(He,vr,le(vr),ne)}return He}function Dn(ne,ve){for(var le=-1,He=ne==null?0:ne.length;++le<He&&ve(ne[le],le,ne)!==!1;);return ne}function Rg(ne,ve){for(var le=ne==null?0:ne.length;le--&&ve(ne[le],le,ne)!==!1;);return ne}function kf(ne,ve){for(var le=-1,He=ne==null?0:ne.length;++le<He;)if(!ve(ne[le],le,ne))return!1;return!0}function Di(ne,ve){for(var le=-1,He=ne==null?0:ne.length,ht=0,Mt=[];++le<He;){var vr=ne[le];ve(vr,le,ne)&&(Mt[ht++]=vr)}return Mt}function Nu(ne,ve){var le=ne==null?0:ne.length;return!!le&&oa(ne,ve,0)>-1}function Lo(ne,ve,le){for(var He=-1,ht=ne==null?0:ne.length;++He<ht;)if(le(ve,ne[He]))return!0;return!1}function Ht(ne,ve){for(var le=-1,He=ne==null?0:ne.length,ht=Array(He);++le<He;)ht[le]=ve(ne[le],le,ne);return ht}function wi(ne,ve){for(var le=-1,He=ve.length,ht=ne.length;++le<He;)ne[ht+le]=ve[le];return ne}function Ro(ne,ve,le,He){var ht=-1,Mt=ne==null?0:ne.length;for(He&&Mt&&(le=ne[++ht]);++ht<Mt;)le=ve(le,ne[ht],ht,ne);return le}function Ug(ne,ve,le,He){var ht=ne==null?0:ne.length;for(He&&ht&&(le=ne[--ht]);ht--;)le=ve(le,ne[ht],ht,ne);return le}function Uo(ne,ve){for(var le=-1,He=ne==null?0:ne.length;++le<He;)if(ve(ne[le],le,ne))return!0;return!1}var Vg=Vo("length");function jg(ne){return ne.split("")}function zg(ne){return ne.match(ti)||[]}function Tf(ne,ve,le){var He;return le(ne,function(ht,Mt,vr){if(ve(ht,Mt,vr))return He=Mt,!1}),He}function Lu(ne,ve,le,He){for(var ht=ne.length,Mt=le+(He?1:-1);He?Mt--:++Mt<ht;)if(ve(ne[Mt],Mt,ne))return Mt;return-1}function oa(ne,ve,le){return ve===ve?ev(ne,ve,le):Lu(ne,If,le)}function qg(ne,ve,le,He){for(var ht=le-1,Mt=ne.length;++ht<Mt;)if(He(ne[ht],ve))return ht;return-1}function If(ne){return ne!==ne}function xf(ne,ve){var le=ne==null?0:ne.length;return le?zo(ne,ve)/le:fe}function Vo(ne){return function(ve){return ve==null?r:ve[ne]}}function jo(ne){return function(ve){return ne==null?r:ne[ve]}}function Nf(ne,ve,le,He,ht){return ht(ne,function(Mt,vr,Nt){le=He?(He=!1,Mt):ve(le,Mt,vr,Nt)}),le}function Wg(ne,ve){var le=ne.length;for(ne.sort(ve);le--;)ne[le]=ne[le].value;return ne}function zo(ne,ve){for(var le,He=-1,ht=ne.length;++He<ht;){var Mt=ve(ne[He]);Mt!==r&&(le=le===r?Mt:le+Mt)}return le}function qo(ne,ve){for(var le=-1,He=Array(ne);++le<ne;)He[le]=ve(le);return He}function Hg(ne,ve){return Ht(ve,function(le){return[le,ne[le]]})}function Lf(ne){return ne&&ne.slice(0,jf(ne)+1).replace(Br,"")}function cn(ne){return function(ve){return ne(ve)}}function Wo(ne,ve){return Ht(ve,function(le){return ne[le]})}function nu(ne,ve){return ne.has(ve)}function Rf(ne,ve){for(var le=-1,He=ne.length;++le<He&&oa(ve,ne[le],0)>-1;);return le}function Uf(ne,ve){for(var le=ne.length;le--&&oa(ve,ne[le],0)>-1;);return le}function $g(ne,ve){for(var le=ne.length,He=0;le--;)ne[le]===ve&&++He;return He}var Gg=jo(Mg),Kg=jo(Pg);function Yg(ne){return"\\"+Tg[ne]}function Zg(ne,ve){return ne==null?r:ne[ve]}function la(ne){return Fg.test(ne)}function Jg(ne){return Sg.test(ne)}function Qg(ne){for(var ve,le=[];!(ve=ne.next()).done;)le.push(ve.value);return le}function Ho(ne){var ve=-1,le=Array(ne.size);return ne.forEach(function(He,ht){le[++ve]=[ht,He]}),le}function Vf(ne,ve){return function(le){return ne(ve(le))}}function yi(ne,ve){for(var le=-1,He=ne.length,ht=0,Mt=[];++le<He;){var vr=ne[le];(vr===ve||vr===c)&&(ne[le]=c,Mt[ht++]=le)}return Mt}function Ru(ne){var ve=-1,le=Array(ne.size);return ne.forEach(function(He){le[++ve]=He}),le}function Xg(ne){var ve=-1,le=Array(ne.size);return ne.forEach(function(He){le[++ve]=[He,He]}),le}function ev(ne,ve,le){for(var He=le-1,ht=ne.length;++He<ht;)if(ne[He]===ve)return He;return-1}function tv(ne,ve,le){for(var He=le+1;He--;)if(ne[He]===ve)return He;return He}function ca(ne){return la(ne)?nv(ne):Vg(ne)}function kn(ne){return la(ne)?iv(ne):jg(ne)}function jf(ne){for(var ve=ne.length;ve--&&ir.test(ne.charAt(ve)););return ve}var rv=jo(kg);function nv(ne){for(var ve=Io.lastIndex=0;Io.test(ne);)++ve;return ve}function iv(ne){return ne.match(Io)||[]}function av(ne){return ne.match(Cg)||[]}var uv=function ne(ve){ve=ve==null?Or:fa.defaults(Or.Object(),ve,fa.pick(Or,Bg));var le=ve.Array,He=ve.Date,ht=ve.Error,Mt=ve.Function,vr=ve.Math,Nt=ve.Object,$o=ve.RegExp,sv=ve.String,wn=ve.TypeError,Uu=le.prototype,ov=Mt.prototype,ha=Nt.prototype,Vu=ve["__core-js_shared__"],ju=ov.toString,It=ha.hasOwnProperty,lv=0,zf=function(){var u=/[^.]+$/.exec(Vu&&Vu.keys&&Vu.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),zu=ha.toString,cv=ju.call(Nt),fv=Or._,hv=$o("^"+ju.call(It).replace(Vi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qu=Cf?ve.Buffer:r,Ei=ve.Symbol,Wu=ve.Uint8Array,qf=qu?qu.allocUnsafe:r,Hu=Vf(Nt.getPrototypeOf,Nt),Wf=Nt.create,Hf=ha.propertyIsEnumerable,$u=Uu.splice,$f=Ei?Ei.isConcatSpreadable:r,iu=Ei?Ei.iterator:r,Hi=Ei?Ei.toStringTag:r,Gu=function(){try{var u=Zi(Nt,"defineProperty");return u({},"",{}),u}catch{}}(),dv=ve.clearTimeout!==Or.clearTimeout&&ve.clearTimeout,pv=He&&He.now!==Or.Date.now&&He.now,gv=ve.setTimeout!==Or.setTimeout&&ve.setTimeout,Ku=vr.ceil,Yu=vr.floor,Go=Nt.getOwnPropertySymbols,vv=qu?qu.isBuffer:r,Gf=ve.isFinite,mv=Uu.join,_v=Vf(Nt.keys,Nt),mr=vr.max,Rr=vr.min,bv=He.now,Dv=ve.parseInt,Kf=vr.random,wv=Uu.reverse,Ko=Zi(ve,"DataView"),au=Zi(ve,"Map"),Yo=Zi(ve,"Promise"),da=Zi(ve,"Set"),uu=Zi(ve,"WeakMap"),su=Zi(Nt,"create"),Zu=uu&&new uu,pa={},yv=Ji(Ko),Ev=Ji(au),Av=Ji(Yo),Cv=Ji(da),Fv=Ji(uu),Ju=Ei?Ei.prototype:r,ou=Ju?Ju.valueOf:r,Yf=Ju?Ju.toString:r;function L(u){if(ar(u)&&!dt(u)&&!(u instanceof wt)){if(u instanceof yn)return u;if(It.call(u,"__wrapped__"))return Zh(u)}return new yn(u)}var ga=function(){function u(){}return function(d){if(!Xt(d))return{};if(Wf)return Wf(d);u.prototype=d;var _=new u;return u.prototype=r,_}}();function Qu(){}function yn(u,d){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=r}L.templateSettings={escape:gr,evaluate:Mn,interpolate:ei,variable:"",imports:{_:L}},L.prototype=Qu.prototype,L.prototype.constructor=L,yn.prototype=ga(Qu.prototype),yn.prototype.constructor=yn;function wt(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=he,this.__views__=[]}function Sv(){var u=new wt(this.__wrapped__);return u.__actions__=Xr(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Xr(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Xr(this.__views__),u}function Bv(){if(this.__filtered__){var u=new wt(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function Ov(){var u=this.__wrapped__.value(),d=this.__dir__,_=dt(u),E=d<0,I=_?u.length:0,V=jm(0,I,this.__views__),Y=V.start,ee=V.end,ae=ee-Y,Fe=E?ee:Y-1,Se=this.__iteratees__,Pe=Se.length,ze=0,Ke=Rr(ae,this.__takeCount__);if(!_||!E&&I==ae&&Ke==ae)return bh(u,this.__actions__);var ut=[];e:for(;ae--&&ze<Ke;){Fe+=d;for(var _t=-1,st=u[Fe];++_t<Pe;){var Dt=Se[_t],Ft=Dt.iteratee,dn=Dt.type,Yr=Ft(st);if(dn==j)st=Yr;else if(!Yr){if(dn==N)continue e;break e}}ut[ze++]=st}return ut}wt.prototype=ga(Qu.prototype),wt.prototype.constructor=wt;function $i(u){var d=-1,_=u==null?0:u.length;for(this.clear();++d<_;){var E=u[d];this.set(E[0],E[1])}}function Mv(){this.__data__=su?su(null):{},this.size=0}function Pv(u){var d=this.has(u)&&delete this.__data__[u];return this.size-=d?1:0,d}function kv(u){var d=this.__data__;if(su){var _=d[u];return _===l?r:_}return It.call(d,u)?d[u]:r}function Tv(u){var d=this.__data__;return su?d[u]!==r:It.call(d,u)}function Iv(u,d){var _=this.__data__;return this.size+=this.has(u)?0:1,_[u]=su&&d===r?l:d,this}$i.prototype.clear=Mv,$i.prototype.delete=Pv,$i.prototype.get=kv,$i.prototype.has=Tv,$i.prototype.set=Iv;function ni(u){var d=-1,_=u==null?0:u.length;for(this.clear();++d<_;){var E=u[d];this.set(E[0],E[1])}}function xv(){this.__data__=[],this.size=0}function Nv(u){var d=this.__data__,_=Xu(d,u);if(_<0)return!1;var E=d.length-1;return _==E?d.pop():$u.call(d,_,1),--this.size,!0}function Lv(u){var d=this.__data__,_=Xu(d,u);return _<0?r:d[_][1]}function Rv(u){return Xu(this.__data__,u)>-1}function Uv(u,d){var _=this.__data__,E=Xu(_,u);return E<0?(++this.size,_.push([u,d])):_[E][1]=d,this}ni.prototype.clear=xv,ni.prototype.delete=Nv,ni.prototype.get=Lv,ni.prototype.has=Rv,ni.prototype.set=Uv;function ii(u){var d=-1,_=u==null?0:u.length;for(this.clear();++d<_;){var E=u[d];this.set(E[0],E[1])}}function Vv(){this.size=0,this.__data__={hash:new $i,map:new(au||ni),string:new $i}}function jv(u){var d=fs(this,u).delete(u);return this.size-=d?1:0,d}function zv(u){return fs(this,u).get(u)}function qv(u){return fs(this,u).has(u)}function Wv(u,d){var _=fs(this,u),E=_.size;return _.set(u,d),this.size+=_.size==E?0:1,this}ii.prototype.clear=Vv,ii.prototype.delete=jv,ii.prototype.get=zv,ii.prototype.has=qv,ii.prototype.set=Wv;function Gi(u){var d=-1,_=u==null?0:u.length;for(this.__data__=new ii;++d<_;)this.add(u[d])}function Hv(u){return this.__data__.set(u,l),this}function $v(u){return this.__data__.has(u)}Gi.prototype.add=Gi.prototype.push=Hv,Gi.prototype.has=$v;function Tn(u){var d=this.__data__=new ni(u);this.size=d.size}function Gv(){this.__data__=new ni,this.size=0}function Kv(u){var d=this.__data__,_=d.delete(u);return this.size=d.size,_}function Yv(u){return this.__data__.get(u)}function Zv(u){return this.__data__.has(u)}function Jv(u,d){var _=this.__data__;if(_ instanceof ni){var E=_.__data__;if(!au||E.length<i-1)return E.push([u,d]),this.size=++_.size,this;_=this.__data__=new ii(E)}return _.set(u,d),this.size=_.size,this}Tn.prototype.clear=Gv,Tn.prototype.delete=Kv,Tn.prototype.get=Yv,Tn.prototype.has=Zv,Tn.prototype.set=Jv;function Zf(u,d){var _=dt(u),E=!_&&Qi(u),I=!_&&!E&&Bi(u),V=!_&&!E&&!I&&ba(u),Y=_||E||I||V,ee=Y?qo(u.length,sv):[],ae=ee.length;for(var Fe in u)(d||It.call(u,Fe))&&!(Y&&(Fe=="length"||I&&(Fe=="offset"||Fe=="parent")||V&&(Fe=="buffer"||Fe=="byteLength"||Fe=="byteOffset")||oi(Fe,ae)))&&ee.push(Fe);return ee}function Jf(u){var d=u.length;return d?u[ul(0,d-1)]:r}function Qv(u,d){return hs(Xr(u),Ki(d,0,u.length))}function Xv(u){return hs(Xr(u))}function Zo(u,d,_){(_!==r&&!In(u[d],_)||_===r&&!(d in u))&&ai(u,d,_)}function lu(u,d,_){var E=u[d];(!(It.call(u,d)&&In(E,_))||_===r&&!(d in u))&&ai(u,d,_)}function Xu(u,d){for(var _=u.length;_--;)if(In(u[_][0],d))return _;return-1}function em(u,d,_,E){return Ai(u,function(I,V,Y){d(E,I,_(I),Y)}),E}function Qf(u,d){return u&&Gn(d,Er(d),u)}function tm(u,d){return u&&Gn(d,tn(d),u)}function ai(u,d,_){d=="__proto__"&&Gu?Gu(u,d,{configurable:!0,enumerable:!0,value:_,writable:!0}):u[d]=_}function Jo(u,d){for(var _=-1,E=d.length,I=le(E),V=u==null;++_<E;)I[_]=V?r:Pl(u,d[_]);return I}function Ki(u,d,_){return u===u&&(_!==r&&(u=u<=_?u:_),d!==r&&(u=u>=d?u:d)),u}function En(u,d,_,E,I,V){var Y,ee=d&f,ae=d&p,Fe=d&g;if(_&&(Y=I?_(u,E,I,V):_(u)),Y!==r)return Y;if(!Xt(u))return u;var Se=dt(u);if(Se){if(Y=qm(u),!ee)return Xr(u,Y)}else{var Pe=Ur(u),ze=Pe==At||Pe==ct;if(Bi(u))return yh(u,ee);if(Pe==Ut||Pe==ke||ze&&!I){if(Y=ae||ze?{}:jh(u),!ee)return ae?km(u,tm(Y,u)):Pm(u,Qf(Y,u))}else{if(!jt[Pe])return I?u:{};Y=Wm(u,Pe,ee)}}V||(V=new Tn);var Ke=V.get(u);if(Ke)return Ke;V.set(u,Y),v0(u)?u.forEach(function(st){Y.add(En(st,d,_,st,u,V))}):p0(u)&&u.forEach(function(st,Dt){Y.set(Dt,En(st,d,_,Dt,u,V))});var ut=Fe?ae?ml:vl:ae?tn:Er,_t=Se?r:ut(u);return Dn(_t||u,function(st,Dt){_t&&(Dt=st,st=u[Dt]),lu(Y,Dt,En(st,d,_,Dt,u,V))}),Y}function rm(u){var d=Er(u);return function(_){return Xf(_,u,d)}}function Xf(u,d,_){var E=_.length;if(u==null)return!E;for(u=Nt(u);E--;){var I=_[E],V=d[I],Y=u[I];if(Y===r&&!(I in u)||!V(Y))return!1}return!0}function eh(u,d,_){if(typeof u!="function")throw new wn(o);return vu(function(){u.apply(r,_)},d)}function cu(u,d,_,E){var I=-1,V=Nu,Y=!0,ee=u.length,ae=[],Fe=d.length;if(!ee)return ae;_&&(d=Ht(d,cn(_))),E?(V=Lo,Y=!1):d.length>=i&&(V=nu,Y=!1,d=new Gi(d));e:for(;++I<ee;){var Se=u[I],Pe=_==null?Se:_(Se);if(Se=E||Se!==0?Se:0,Y&&Pe===Pe){for(var ze=Fe;ze--;)if(d[ze]===Pe)continue e;ae.push(Se)}else V(d,Pe,E)||ae.push(Se)}return ae}var Ai=Sh($n),th=Sh(Xo,!0);function nm(u,d){var _=!0;return Ai(u,function(E,I,V){return _=!!d(E,I,V),_}),_}function es(u,d,_){for(var E=-1,I=u.length;++E<I;){var V=u[E],Y=d(V);if(Y!=null&&(ee===r?Y===Y&&!hn(Y):_(Y,ee)))var ee=Y,ae=V}return ae}function im(u,d,_,E){var I=u.length;for(_=mt(_),_<0&&(_=-_>I?0:I+_),E=E===r||E>I?I:mt(E),E<0&&(E+=I),E=_>E?0:_0(E);_<E;)u[_++]=d;return u}function rh(u,d){var _=[];return Ai(u,function(E,I,V){d(E,I,V)&&_.push(E)}),_}function Mr(u,d,_,E,I){var V=-1,Y=u.length;for(_||(_=$m),I||(I=[]);++V<Y;){var ee=u[V];d>0&&_(ee)?d>1?Mr(ee,d-1,_,E,I):wi(I,ee):E||(I[I.length]=ee)}return I}var Qo=Bh(),nh=Bh(!0);function $n(u,d){return u&&Qo(u,d,Er)}function Xo(u,d){return u&&nh(u,d,Er)}function ts(u,d){return Di(d,function(_){return li(u[_])})}function Yi(u,d){d=Fi(d,u);for(var _=0,E=d.length;u!=null&&_<E;)u=u[Kn(d[_++])];return _&&_==E?u:r}function ih(u,d,_){var E=d(u);return dt(u)?E:wi(E,_(u))}function Gr(u){return u==null?u===r?Q:Wr:Hi&&Hi in Nt(u)?Vm(u):Xm(u)}function el(u,d){return u>d}function am(u,d){return u!=null&&It.call(u,d)}function um(u,d){return u!=null&&d in Nt(u)}function sm(u,d,_){return u>=Rr(d,_)&&u<mr(d,_)}function tl(u,d,_){for(var E=_?Lo:Nu,I=u[0].length,V=u.length,Y=V,ee=le(V),ae=1/0,Fe=[];Y--;){var Se=u[Y];Y&&d&&(Se=Ht(Se,cn(d))),ae=Rr(Se.length,ae),ee[Y]=!_&&(d||I>=120&&Se.length>=120)?new Gi(Y&&Se):r}Se=u[0];var Pe=-1,ze=ee[0];e:for(;++Pe<I&&Fe.length<ae;){var Ke=Se[Pe],ut=d?d(Ke):Ke;if(Ke=_||Ke!==0?Ke:0,!(ze?nu(ze,ut):E(Fe,ut,_))){for(Y=V;--Y;){var _t=ee[Y];if(!(_t?nu(_t,ut):E(u[Y],ut,_)))continue e}ze&&ze.push(ut),Fe.push(Ke)}}return Fe}function om(u,d,_,E){return $n(u,function(I,V,Y){d(E,_(I),V,Y)}),E}function fu(u,d,_){d=Fi(d,u),u=Hh(u,d);var E=u==null?u:u[Kn(Cn(d))];return E==null?r:ln(E,u,_)}function ah(u){return ar(u)&&Gr(u)==ke}function lm(u){return ar(u)&&Gr(u)==se}function cm(u){return ar(u)&&Gr(u)==at}function hu(u,d,_,E,I){return u===d?!0:u==null||d==null||!ar(u)&&!ar(d)?u!==u&&d!==d:fm(u,d,_,E,hu,I)}function fm(u,d,_,E,I,V){var Y=dt(u),ee=dt(d),ae=Y?Ie:Ur(u),Fe=ee?Ie:Ur(d);ae=ae==ke?Ut:ae,Fe=Fe==ke?Ut:Fe;var Se=ae==Ut,Pe=Fe==Ut,ze=ae==Fe;if(ze&&Bi(u)){if(!Bi(d))return!1;Y=!0,Se=!1}if(ze&&!Se)return V||(V=new Tn),Y||ba(u)?Rh(u,d,_,E,I,V):Rm(u,d,ae,_,E,I,V);if(!(_&b)){var Ke=Se&&It.call(u,"__wrapped__"),ut=Pe&&It.call(d,"__wrapped__");if(Ke||ut){var _t=Ke?u.value():u,st=ut?d.value():d;return V||(V=new Tn),I(_t,st,_,E,V)}}return ze?(V||(V=new Tn),Um(u,d,_,E,I,V)):!1}function hm(u){return ar(u)&&Ur(u)==ot}function rl(u,d,_,E){var I=_.length,V=I,Y=!E;if(u==null)return!V;for(u=Nt(u);I--;){var ee=_[I];if(Y&&ee[2]?ee[1]!==u[ee[0]]:!(ee[0]in u))return!1}for(;++I<V;){ee=_[I];var ae=ee[0],Fe=u[ae],Se=ee[1];if(Y&&ee[2]){if(Fe===r&&!(ae in u))return!1}else{var Pe=new Tn;if(E)var ze=E(Fe,Se,ae,u,d,Pe);if(!(ze===r?hu(Se,Fe,b|v,E,Pe):ze))return!1}}return!0}function uh(u){if(!Xt(u)||Km(u))return!1;var d=li(u)?hv:Ka;return d.test(Ji(u))}function dm(u){return ar(u)&&Gr(u)==pr}function pm(u){return ar(u)&&Ur(u)==Sr}function gm(u){return ar(u)&&_s(u.length)&&!!qt[Gr(u)]}function sh(u){return typeof u=="function"?u:u==null?rn:typeof u=="object"?dt(u)?ch(u[0],u[1]):lh(u):O0(u)}function nl(u){if(!gu(u))return _v(u);var d=[];for(var _ in Nt(u))It.call(u,_)&&_!="constructor"&&d.push(_);return d}function vm(u){if(!Xt(u))return Qm(u);var d=gu(u),_=[];for(var E in u)E=="constructor"&&(d||!It.call(u,E))||_.push(E);return _}function il(u,d){return u<d}function oh(u,d){var _=-1,E=en(u)?le(u.length):[];return Ai(u,function(I,V,Y){E[++_]=d(I,V,Y)}),E}function lh(u){var d=bl(u);return d.length==1&&d[0][2]?qh(d[0][0],d[0][1]):function(_){return _===u||rl(_,u,d)}}function ch(u,d){return wl(u)&&zh(d)?qh(Kn(u),d):function(_){var E=Pl(_,u);return E===r&&E===d?kl(_,u):hu(d,E,b|v)}}function rs(u,d,_,E,I){u!==d&&Qo(d,function(V,Y){if(I||(I=new Tn),Xt(V))mm(u,d,Y,_,rs,E,I);else{var ee=E?E(El(u,Y),V,Y+"",u,d,I):r;ee===r&&(ee=V),Zo(u,Y,ee)}},tn)}function mm(u,d,_,E,I,V,Y){var ee=El(u,_),ae=El(d,_),Fe=Y.get(ae);if(Fe){Zo(u,_,Fe);return}var Se=V?V(ee,ae,_+"",u,d,Y):r,Pe=Se===r;if(Pe){var ze=dt(ae),Ke=!ze&&Bi(ae),ut=!ze&&!Ke&&ba(ae);Se=ae,ze||Ke||ut?dt(ee)?Se=ee:lr(ee)?Se=Xr(ee):Ke?(Pe=!1,Se=yh(ae,!0)):ut?(Pe=!1,Se=Eh(ae,!0)):Se=[]:mu(ae)||Qi(ae)?(Se=ee,Qi(ee)?Se=b0(ee):(!Xt(ee)||li(ee))&&(Se=jh(ae))):Pe=!1}Pe&&(Y.set(ae,Se),I(Se,ae,E,V,Y),Y.delete(ae)),Zo(u,_,Se)}function fh(u,d){var _=u.length;if(_)return d+=d<0?_:0,oi(d,_)?u[d]:r}function hh(u,d,_){d.length?d=Ht(d,function(V){return dt(V)?function(Y){return Yi(Y,V.length===1?V[0]:V)}:V}):d=[rn];var E=-1;d=Ht(d,cn(rt()));var I=oh(u,function(V,Y,ee){var ae=Ht(d,function(Fe){return Fe(V)});return{criteria:ae,index:++E,value:V}});return Wg(I,function(V,Y){return Mm(V,Y,_)})}function _m(u,d){return dh(u,d,function(_,E){return kl(u,E)})}function dh(u,d,_){for(var E=-1,I=d.length,V={};++E<I;){var Y=d[E],ee=Yi(u,Y);_(ee,Y)&&du(V,Fi(Y,u),ee)}return V}function bm(u){return function(d){return Yi(d,u)}}function al(u,d,_,E){var I=E?qg:oa,V=-1,Y=d.length,ee=u;for(u===d&&(d=Xr(d)),_&&(ee=Ht(u,cn(_)));++V<Y;)for(var ae=0,Fe=d[V],Se=_?_(Fe):Fe;(ae=I(ee,Se,ae,E))>-1;)ee!==u&&$u.call(ee,ae,1),$u.call(u,ae,1);return u}function ph(u,d){for(var _=u?d.length:0,E=_-1;_--;){var I=d[_];if(_==E||I!==V){var V=I;oi(I)?$u.call(u,I,1):ll(u,I)}}return u}function ul(u,d){return u+Yu(Kf()*(d-u+1))}function Dm(u,d,_,E){for(var I=-1,V=mr(Ku((d-u)/(_||1)),0),Y=le(V);V--;)Y[E?V:++I]=u,u+=_;return Y}function sl(u,d){var _="";if(!u||d<1||d>X)return _;do d%2&&(_+=u),d=Yu(d/2),d&&(u+=u);while(d);return _}function bt(u,d){return Al(Wh(u,d,rn),u+"")}function wm(u){return Jf(Da(u))}function ym(u,d){var _=Da(u);return hs(_,Ki(d,0,_.length))}function du(u,d,_,E){if(!Xt(u))return u;d=Fi(d,u);for(var I=-1,V=d.length,Y=V-1,ee=u;ee!=null&&++I<V;){var ae=Kn(d[I]),Fe=_;if(ae==="__proto__"||ae==="constructor"||ae==="prototype")return u;if(I!=Y){var Se=ee[ae];Fe=E?E(Se,ae,ee):r,Fe===r&&(Fe=Xt(Se)?Se:oi(d[I+1])?[]:{})}lu(ee,ae,Fe),ee=ee[ae]}return u}var gh=Zu?function(u,d){return Zu.set(u,d),u}:rn,Em=Gu?function(u,d){return Gu(u,"toString",{configurable:!0,enumerable:!1,value:Il(d),writable:!0})}:rn;function Am(u){return hs(Da(u))}function An(u,d,_){var E=-1,I=u.length;d<0&&(d=-d>I?0:I+d),_=_>I?I:_,_<0&&(_+=I),I=d>_?0:_-d>>>0,d>>>=0;for(var V=le(I);++E<I;)V[E]=u[E+d];return V}function Cm(u,d){var _;return Ai(u,function(E,I,V){return _=d(E,I,V),!_}),!!_}function ns(u,d,_){var E=0,I=u==null?E:u.length;if(typeof d=="number"&&d===d&&I<=_e){for(;E<I;){var V=E+I>>>1,Y=u[V];Y!==null&&!hn(Y)&&(_?Y<=d:Y<d)?E=V+1:I=V}return I}return ol(u,d,rn,_)}function ol(u,d,_,E){var I=0,V=u==null?0:u.length;if(V===0)return 0;d=_(d);for(var Y=d!==d,ee=d===null,ae=hn(d),Fe=d===r;I<V;){var Se=Yu((I+V)/2),Pe=_(u[Se]),ze=Pe!==r,Ke=Pe===null,ut=Pe===Pe,_t=hn(Pe);if(Y)var st=E||ut;else Fe?st=ut&&(E||ze):ee?st=ut&&ze&&(E||!Ke):ae?st=ut&&ze&&!Ke&&(E||!_t):Ke||_t?st=!1:st=E?Pe<=d:Pe<d;st?I=Se+1:V=Se}return Rr(V,ge)}function vh(u,d){for(var _=-1,E=u.length,I=0,V=[];++_<E;){var Y=u[_],ee=d?d(Y):Y;if(!_||!In(ee,ae)){var ae=ee;V[I++]=Y===0?0:Y}}return V}function mh(u){return typeof u=="number"?u:hn(u)?fe:+u}function fn(u){if(typeof u=="string")return u;if(dt(u))return Ht(u,fn)+"";if(hn(u))return Yf?Yf.call(u):"";var d=u+"";return d=="0"&&1/u==-Z?"-0":d}function Ci(u,d,_){var E=-1,I=Nu,V=u.length,Y=!0,ee=[],ae=ee;if(_)Y=!1,I=Lo;else if(V>=i){var Fe=d?null:Nm(u);if(Fe)return Ru(Fe);Y=!1,I=nu,ae=new Gi}else ae=d?[]:ee;e:for(;++E<V;){var Se=u[E],Pe=d?d(Se):Se;if(Se=_||Se!==0?Se:0,Y&&Pe===Pe){for(var ze=ae.length;ze--;)if(ae[ze]===Pe)continue e;d&&ae.push(Pe),ee.push(Se)}else I(ae,Pe,_)||(ae!==ee&&ae.push(Pe),ee.push(Se))}return ee}function ll(u,d){return d=Fi(d,u),u=Hh(u,d),u==null||delete u[Kn(Cn(d))]}function _h(u,d,_,E){return du(u,d,_(Yi(u,d)),E)}function is(u,d,_,E){for(var I=u.length,V=E?I:-1;(E?V--:++V<I)&&d(u[V],V,u););return _?An(u,E?0:V,E?V+1:I):An(u,E?V+1:0,E?I:V)}function bh(u,d){var _=u;return _ instanceof wt&&(_=_.value()),Ro(d,function(E,I){return I.func.apply(I.thisArg,wi([E],I.args))},_)}function cl(u,d,_){var E=u.length;if(E<2)return E?Ci(u[0]):[];for(var I=-1,V=le(E);++I<E;)for(var Y=u[I],ee=-1;++ee<E;)ee!=I&&(V[I]=cu(V[I]||Y,u[ee],d,_));return Ci(Mr(V,1),d,_)}function Dh(u,d,_){for(var E=-1,I=u.length,V=d.length,Y={};++E<I;){var ee=E<V?d[E]:r;_(Y,u[E],ee)}return Y}function fl(u){return lr(u)?u:[]}function hl(u){return typeof u=="function"?u:rn}function Fi(u,d){return dt(u)?u:wl(u,d)?[u]:Yh(kt(u))}var Fm=bt;function Si(u,d,_){var E=u.length;return _=_===r?E:_,!d&&_>=E?u:An(u,d,_)}var wh=dv||function(u){return Or.clearTimeout(u)};function yh(u,d){if(d)return u.slice();var _=u.length,E=qf?qf(_):new u.constructor(_);return u.copy(E),E}function dl(u){var d=new u.constructor(u.byteLength);return new Wu(d).set(new Wu(u)),d}function Sm(u,d){var _=d?dl(u.buffer):u.buffer;return new u.constructor(_,u.byteOffset,u.byteLength)}function Bm(u){var d=new u.constructor(u.source,aa.exec(u));return d.lastIndex=u.lastIndex,d}function Om(u){return ou?Nt(ou.call(u)):{}}function Eh(u,d){var _=d?dl(u.buffer):u.buffer;return new u.constructor(_,u.byteOffset,u.length)}function Ah(u,d){if(u!==d){var _=u!==r,E=u===null,I=u===u,V=hn(u),Y=d!==r,ee=d===null,ae=d===d,Fe=hn(d);if(!ee&&!Fe&&!V&&u>d||V&&Y&&ae&&!ee&&!Fe||E&&Y&&ae||!_&&ae||!I)return 1;if(!E&&!V&&!Fe&&u<d||Fe&&_&&I&&!E&&!V||ee&&_&&I||!Y&&I||!ae)return-1}return 0}function Mm(u,d,_){for(var E=-1,I=u.criteria,V=d.criteria,Y=I.length,ee=_.length;++E<Y;){var ae=Ah(I[E],V[E]);if(ae){if(E>=ee)return ae;var Fe=_[E];return ae*(Fe=="desc"?-1:1)}}return u.index-d.index}function Ch(u,d,_,E){for(var I=-1,V=u.length,Y=_.length,ee=-1,ae=d.length,Fe=mr(V-Y,0),Se=le(ae+Fe),Pe=!E;++ee<ae;)Se[ee]=d[ee];for(;++I<Y;)(Pe||I<V)&&(Se[_[I]]=u[I]);for(;Fe--;)Se[ee++]=u[I++];return Se}function Fh(u,d,_,E){for(var I=-1,V=u.length,Y=-1,ee=_.length,ae=-1,Fe=d.length,Se=mr(V-ee,0),Pe=le(Se+Fe),ze=!E;++I<Se;)Pe[I]=u[I];for(var Ke=I;++ae<Fe;)Pe[Ke+ae]=d[ae];for(;++Y<ee;)(ze||I<V)&&(Pe[Ke+_[Y]]=u[I++]);return Pe}function Xr(u,d){var _=-1,E=u.length;for(d||(d=le(E));++_<E;)d[_]=u[_];return d}function Gn(u,d,_,E){var I=!_;_||(_={});for(var V=-1,Y=d.length;++V<Y;){var ee=d[V],ae=E?E(_[ee],u[ee],ee,_,u):r;ae===r&&(ae=u[ee]),I?ai(_,ee,ae):lu(_,ee,ae)}return _}function Pm(u,d){return Gn(u,Dl(u),d)}function km(u,d){return Gn(u,Uh(u),d)}function as(u,d){return function(_,E){var I=dt(_)?Lg:em,V=d?d():{};return I(_,u,rt(E,2),V)}}function va(u){return bt(function(d,_){var E=-1,I=_.length,V=I>1?_[I-1]:r,Y=I>2?_[2]:r;for(V=u.length>3&&typeof V=="function"?(I--,V):r,Y&&Kr(_[0],_[1],Y)&&(V=I<3?r:V,I=1),d=Nt(d);++E<I;){var ee=_[E];ee&&u(d,ee,E,V)}return d})}function Sh(u,d){return function(_,E){if(_==null)return _;if(!en(_))return u(_,E);for(var I=_.length,V=d?I:-1,Y=Nt(_);(d?V--:++V<I)&&E(Y[V],V,Y)!==!1;);return _}}function Bh(u){return function(d,_,E){for(var I=-1,V=Nt(d),Y=E(d),ee=Y.length;ee--;){var ae=Y[u?ee:++I];if(_(V[ae],ae,V)===!1)break}return d}}function Tm(u,d,_){var E=d&m,I=pu(u);function V(){var Y=this&&this!==Or&&this instanceof V?I:u;return Y.apply(E?_:this,arguments)}return V}function Oh(u){return function(d){d=kt(d);var _=la(d)?kn(d):r,E=_?_[0]:d.charAt(0),I=_?Si(_,1).join(""):d.slice(1);return E[u]()+I}}function ma(u){return function(d){return Ro(S0(F0(d).replace(Eg,"")),u,"")}}function pu(u){return function(){var d=arguments;switch(d.length){case 0:return new u;case 1:return new u(d[0]);case 2:return new u(d[0],d[1]);case 3:return new u(d[0],d[1],d[2]);case 4:return new u(d[0],d[1],d[2],d[3]);case 5:return new u(d[0],d[1],d[2],d[3],d[4]);case 6:return new u(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new u(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var _=ga(u.prototype),E=u.apply(_,d);return Xt(E)?E:_}}function Im(u,d,_){var E=pu(u);function I(){for(var V=arguments.length,Y=le(V),ee=V,ae=_a(I);ee--;)Y[ee]=arguments[ee];var Fe=V<3&&Y[0]!==ae&&Y[V-1]!==ae?[]:yi(Y,ae);if(V-=Fe.length,V<_)return Ih(u,d,us,I.placeholder,r,Y,Fe,r,r,_-V);var Se=this&&this!==Or&&this instanceof I?E:u;return ln(Se,this,Y)}return I}function Mh(u){return function(d,_,E){var I=Nt(d);if(!en(d)){var V=rt(_,3);d=Er(d),_=function(ee){return V(I[ee],ee,I)}}var Y=u(d,_,E);return Y>-1?I[V?d[Y]:Y]:r}}function Ph(u){return si(function(d){var _=d.length,E=_,I=yn.prototype.thru;for(u&&d.reverse();E--;){var V=d[E];if(typeof V!="function")throw new wn(o);if(I&&!Y&&cs(V)=="wrapper")var Y=new yn([],!0)}for(E=Y?E:_;++E<_;){V=d[E];var ee=cs(V),ae=ee=="wrapper"?_l(V):r;ae&&yl(ae[0])&&ae[1]==(O|y|C|F)&&!ae[4].length&&ae[9]==1?Y=Y[cs(ae[0])].apply(Y,ae[3]):Y=V.length==1&&yl(V)?Y[ee]():Y.thru(V)}return function(){var Fe=arguments,Se=Fe[0];if(Y&&Fe.length==1&&dt(Se))return Y.plant(Se).value();for(var Pe=0,ze=_?d[Pe].apply(this,Fe):Se;++Pe<_;)ze=d[Pe].call(this,ze);return ze}})}function us(u,d,_,E,I,V,Y,ee,ae,Fe){var Se=d&O,Pe=d&m,ze=d&D,Ke=d&(y|A),ut=d&x,_t=ze?r:pu(u);function st(){for(var Dt=arguments.length,Ft=le(Dt),dn=Dt;dn--;)Ft[dn]=arguments[dn];if(Ke)var Yr=_a(st),pn=$g(Ft,Yr);if(E&&(Ft=Ch(Ft,E,I,Ke)),V&&(Ft=Fh(Ft,V,Y,Ke)),Dt-=pn,Ke&&Dt<Fe){var cr=yi(Ft,Yr);return Ih(u,d,us,st.placeholder,_,Ft,cr,ee,ae,Fe-Dt)}var xn=Pe?_:this,fi=ze?xn[u]:u;return Dt=Ft.length,ee?Ft=e_(Ft,ee):ut&&Dt>1&&Ft.reverse(),Se&&ae<Dt&&(Ft.length=ae),this&&this!==Or&&this instanceof st&&(fi=_t||pu(fi)),fi.apply(xn,Ft)}return st}function kh(u,d){return function(_,E){return om(_,u,d(E),{})}}function ss(u,d){return function(_,E){var I;if(_===r&&E===r)return d;if(_!==r&&(I=_),E!==r){if(I===r)return E;typeof _=="string"||typeof E=="string"?(_=fn(_),E=fn(E)):(_=mh(_),E=mh(E)),I=u(_,E)}return I}}function pl(u){return si(function(d){return d=Ht(d,cn(rt())),bt(function(_){var E=this;return u(d,function(I){return ln(I,E,_)})})})}function os(u,d){d=d===r?" ":fn(d);var _=d.length;if(_<2)return _?sl(d,u):d;var E=sl(d,Ku(u/ca(d)));return la(d)?Si(kn(E),0,u).join(""):E.slice(0,u)}function xm(u,d,_,E){var I=d&m,V=pu(u);function Y(){for(var ee=-1,ae=arguments.length,Fe=-1,Se=E.length,Pe=le(Se+ae),ze=this&&this!==Or&&this instanceof Y?V:u;++Fe<Se;)Pe[Fe]=E[Fe];for(;ae--;)Pe[Fe++]=arguments[++ee];return ln(ze,I?_:this,Pe)}return Y}function Th(u){return function(d,_,E){return E&&typeof E!="number"&&Kr(d,_,E)&&(_=E=r),d=ci(d),_===r?(_=d,d=0):_=ci(_),E=E===r?d<_?1:-1:ci(E),Dm(d,_,E,u)}}function ls(u){return function(d,_){return typeof d=="string"&&typeof _=="string"||(d=Fn(d),_=Fn(_)),u(d,_)}}function Ih(u,d,_,E,I,V,Y,ee,ae,Fe){var Se=d&y,Pe=Se?Y:r,ze=Se?r:Y,Ke=Se?V:r,ut=Se?r:V;d|=Se?C:P,d&=~(Se?P:C),d&S||(d&=~(m|D));var _t=[u,d,I,Ke,Pe,ut,ze,ee,ae,Fe],st=_.apply(r,_t);return yl(u)&&$h(st,_t),st.placeholder=E,Gh(st,u,d)}function gl(u){var d=vr[u];return function(_,E){if(_=Fn(_),E=E==null?0:Rr(mt(E),292),E&&Gf(_)){var I=(kt(_)+"e").split("e"),V=d(I[0]+"e"+(+I[1]+E));return I=(kt(V)+"e").split("e"),+(I[0]+"e"+(+I[1]-E))}return d(_)}}var Nm=da&&1/Ru(new da([,-0]))[1]==Z?function(u){return new da(u)}:Ll;function xh(u){return function(d){var _=Ur(d);return _==ot?Ho(d):_==Sr?Xg(d):Hg(d,u(d))}}function ui(u,d,_,E,I,V,Y,ee){var ae=d&D;if(!ae&&typeof u!="function")throw new wn(o);var Fe=E?E.length:0;if(Fe||(d&=~(C|P),E=I=r),Y=Y===r?Y:mr(mt(Y),0),ee=ee===r?ee:mt(ee),Fe-=I?I.length:0,d&P){var Se=E,Pe=I;E=I=r}var ze=ae?r:_l(u),Ke=[u,d,_,E,I,Se,Pe,V,Y,ee];if(ze&&Jm(Ke,ze),u=Ke[0],d=Ke[1],_=Ke[2],E=Ke[3],I=Ke[4],ee=Ke[9]=Ke[9]===r?ae?0:u.length:mr(Ke[9]-Fe,0),!ee&&d&(y|A)&&(d&=~(y|A)),!d||d==m)var ut=Tm(u,d,_);else d==y||d==A?ut=Im(u,d,ee):(d==C||d==(m|C))&&!I.length?ut=xm(u,d,_,E):ut=us.apply(r,Ke);var _t=ze?gh:$h;return Gh(_t(ut,Ke),u,d)}function Nh(u,d,_,E){return u===r||In(u,ha[_])&&!It.call(E,_)?d:u}function Lh(u,d,_,E,I,V){return Xt(u)&&Xt(d)&&(V.set(d,u),rs(u,d,r,Lh,V),V.delete(d)),u}function Lm(u){return mu(u)?r:u}function Rh(u,d,_,E,I,V){var Y=_&b,ee=u.length,ae=d.length;if(ee!=ae&&!(Y&&ae>ee))return!1;var Fe=V.get(u),Se=V.get(d);if(Fe&&Se)return Fe==d&&Se==u;var Pe=-1,ze=!0,Ke=_&v?new Gi:r;for(V.set(u,d),V.set(d,u);++Pe<ee;){var ut=u[Pe],_t=d[Pe];if(E)var st=Y?E(_t,ut,Pe,d,u,V):E(ut,_t,Pe,u,d,V);if(st!==r){if(st)continue;ze=!1;break}if(Ke){if(!Uo(d,function(Dt,Ft){if(!nu(Ke,Ft)&&(ut===Dt||I(ut,Dt,_,E,V)))return Ke.push(Ft)})){ze=!1;break}}else if(!(ut===_t||I(ut,_t,_,E,V))){ze=!1;break}}return V.delete(u),V.delete(d),ze}function Rm(u,d,_,E,I,V,Y){switch(_){case Ce:if(u.byteLength!=d.byteLength||u.byteOffset!=d.byteOffset)return!1;u=u.buffer,d=d.buffer;case se:return!(u.byteLength!=d.byteLength||!V(new Wu(u),new Wu(d)));case it:case at:case Pt:return In(+u,+d);case Et:return u.name==d.name&&u.message==d.message;case pr:case On:return u==d+"";case ot:var ee=Ho;case Sr:var ae=E&b;if(ee||(ee=Ru),u.size!=d.size&&!ae)return!1;var Fe=Y.get(u);if(Fe)return Fe==d;E|=v,Y.set(u,d);var Se=Rh(ee(u),ee(d),E,I,V,Y);return Y.delete(u),Se;case K:if(ou)return ou.call(u)==ou.call(d)}return!1}function Um(u,d,_,E,I,V){var Y=_&b,ee=vl(u),ae=ee.length,Fe=vl(d),Se=Fe.length;if(ae!=Se&&!Y)return!1;for(var Pe=ae;Pe--;){var ze=ee[Pe];if(!(Y?ze in d:It.call(d,ze)))return!1}var Ke=V.get(u),ut=V.get(d);if(Ke&&ut)return Ke==d&&ut==u;var _t=!0;V.set(u,d),V.set(d,u);for(var st=Y;++Pe<ae;){ze=ee[Pe];var Dt=u[ze],Ft=d[ze];if(E)var dn=Y?E(Ft,Dt,ze,d,u,V):E(Dt,Ft,ze,u,d,V);if(!(dn===r?Dt===Ft||I(Dt,Ft,_,E,V):dn)){_t=!1;break}st||(st=ze=="constructor")}if(_t&&!st){var Yr=u.constructor,pn=d.constructor;Yr!=pn&&"constructor"in u&&"constructor"in d&&!(typeof Yr=="function"&&Yr instanceof Yr&&typeof pn=="function"&&pn instanceof pn)&&(_t=!1)}return V.delete(u),V.delete(d),_t}function si(u){return Al(Wh(u,r,Xh),u+"")}function vl(u){return ih(u,Er,Dl)}function ml(u){return ih(u,tn,Uh)}var _l=Zu?function(u){return Zu.get(u)}:Ll;function cs(u){for(var d=u.name+"",_=pa[d],E=It.call(pa,d)?_.length:0;E--;){var I=_[E],V=I.func;if(V==null||V==u)return I.name}return d}function _a(u){var d=It.call(L,"placeholder")?L:u;return d.placeholder}function rt(){var u=L.iteratee||xl;return u=u===xl?sh:u,arguments.length?u(arguments[0],arguments[1]):u}function fs(u,d){var _=u.__data__;return Gm(d)?_[typeof d=="string"?"string":"hash"]:_.map}function bl(u){for(var d=Er(u),_=d.length;_--;){var E=d[_],I=u[E];d[_]=[E,I,zh(I)]}return d}function Zi(u,d){var _=Zg(u,d);return uh(_)?_:r}function Vm(u){var d=It.call(u,Hi),_=u[Hi];try{u[Hi]=r;var E=!0}catch{}var I=zu.call(u);return E&&(d?u[Hi]=_:delete u[Hi]),I}var Dl=Go?function(u){return u==null?[]:(u=Nt(u),Di(Go(u),function(d){return Hf.call(u,d)}))}:Rl,Uh=Go?function(u){for(var d=[];u;)wi(d,Dl(u)),u=Hu(u);return d}:Rl,Ur=Gr;(Ko&&Ur(new Ko(new ArrayBuffer(1)))!=Ce||au&&Ur(new au)!=ot||Yo&&Ur(Yo.resolve())!=Hr||da&&Ur(new da)!=Sr||uu&&Ur(new uu)!=ie)&&(Ur=function(u){var d=Gr(u),_=d==Ut?u.constructor:r,E=_?Ji(_):"";if(E)switch(E){case yv:return Ce;case Ev:return ot;case Av:return Hr;case Cv:return Sr;case Fv:return ie}return d});function jm(u,d,_){for(var E=-1,I=_.length;++E<I;){var V=_[E],Y=V.size;switch(V.type){case"drop":u+=Y;break;case"dropRight":d-=Y;break;case"take":d=Rr(d,u+Y);break;case"takeRight":u=mr(u,d-Y);break}}return{start:u,end:d}}function zm(u){var d=u.match(mi);return d?d[1].split(mn):[]}function Vh(u,d,_){d=Fi(d,u);for(var E=-1,I=d.length,V=!1;++E<I;){var Y=Kn(d[E]);if(!(V=u!=null&&_(u,Y)))break;u=u[Y]}return V||++E!=I?V:(I=u==null?0:u.length,!!I&&_s(I)&&oi(Y,I)&&(dt(u)||Qi(u)))}function qm(u){var d=u.length,_=new u.constructor(d);return d&&typeof u[0]=="string"&&It.call(u,"index")&&(_.index=u.index,_.input=u.input),_}function jh(u){return typeof u.constructor=="function"&&!gu(u)?ga(Hu(u)):{}}function Wm(u,d,_){var E=u.constructor;switch(d){case se:return dl(u);case it:case at:return new E(+u);case Ce:return Sm(u,_);case ce:case pe:case Te:case We:case lt:case xe:case Zt:case Vt:case nr:return Eh(u,_);case ot:return new E;case Pt:case On:return new E(u);case pr:return Bm(u);case Sr:return new E;case K:return Om(u)}}function Hm(u,d){var _=d.length;if(!_)return u;var E=_-1;return d[E]=(_>1?"& ":"")+d[E],d=d.join(_>2?", ":" "),u.replace(qa,`{
/* [wrapped with `+d+`] */
`)}function $m(u){return dt(u)||Qi(u)||!!($f&&u&&u[$f])}function oi(u,d){var _=typeof u;return d=d??X,!!d&&(_=="number"||_!="symbol"&&Za.test(u))&&u>-1&&u%1==0&&u<d}function Kr(u,d,_){if(!Xt(_))return!1;var E=typeof d;return(E=="number"?en(_)&&oi(d,_.length):E=="string"&&d in _)?In(_[d],u):!1}function wl(u,d){if(dt(u))return!1;var _=typeof u;return _=="number"||_=="symbol"||_=="boolean"||u==null||hn(u)?!0:qn.test(u)||!zn.test(u)||d!=null&&u in Nt(d)}function Gm(u){var d=typeof u;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?u!=="__proto__":u===null}function yl(u){var d=cs(u),_=L[d];if(typeof _!="function"||!(d in wt.prototype))return!1;if(u===_)return!0;var E=_l(_);return!!E&&u===E[0]}function Km(u){return!!zf&&zf in u}var Ym=Vu?li:Ul;function gu(u){var d=u&&u.constructor,_=typeof d=="function"&&d.prototype||ha;return u===_}function zh(u){return u===u&&!Xt(u)}function qh(u,d){return function(_){return _==null?!1:_[u]===d&&(d!==r||u in Nt(_))}}function Zm(u){var d=vs(u,function(E){return _.size===h&&_.clear(),E}),_=d.cache;return d}function Jm(u,d){var _=u[1],E=d[1],I=_|E,V=I<(m|D|O),Y=E==O&&_==y||E==O&&_==F&&u[7].length<=d[8]||E==(O|F)&&d[7].length<=d[8]&&_==y;if(!(V||Y))return u;E&m&&(u[2]=d[2],I|=_&m?0:S);var ee=d[3];if(ee){var ae=u[3];u[3]=ae?Ch(ae,ee,d[4]):ee,u[4]=ae?yi(u[3],c):d[4]}return ee=d[5],ee&&(ae=u[5],u[5]=ae?Fh(ae,ee,d[6]):ee,u[6]=ae?yi(u[5],c):d[6]),ee=d[7],ee&&(u[7]=ee),E&O&&(u[8]=u[8]==null?d[8]:Rr(u[8],d[8])),u[9]==null&&(u[9]=d[9]),u[0]=d[0],u[1]=I,u}function Qm(u){var d=[];if(u!=null)for(var _ in Nt(u))d.push(_);return d}function Xm(u){return zu.call(u)}function Wh(u,d,_){return d=mr(d===r?u.length-1:d,0),function(){for(var E=arguments,I=-1,V=mr(E.length-d,0),Y=le(V);++I<V;)Y[I]=E[d+I];I=-1;for(var ee=le(d+1);++I<d;)ee[I]=E[I];return ee[d]=_(Y),ln(u,this,ee)}}function Hh(u,d){return d.length<2?u:Yi(u,An(d,0,-1))}function e_(u,d){for(var _=u.length,E=Rr(d.length,_),I=Xr(u);E--;){var V=d[E];u[E]=oi(V,_)?I[V]:r}return u}function El(u,d){if(!(d==="constructor"&&typeof u[d]=="function")&&d!="__proto__")return u[d]}var $h=Kh(gh),vu=gv||function(u,d){return Or.setTimeout(u,d)},Al=Kh(Em);function Gh(u,d,_){var E=d+"";return Al(u,Hm(E,t_(zm(E),_)))}function Kh(u){var d=0,_=0;return function(){var E=bv(),I=R-(E-_);if(_=E,I>0){if(++d>=J)return arguments[0]}else d=0;return u.apply(r,arguments)}}function hs(u,d){var _=-1,E=u.length,I=E-1;for(d=d===r?E:d;++_<d;){var V=ul(_,I),Y=u[V];u[V]=u[_],u[_]=Y}return u.length=d,u}var Yh=Zm(function(u){var d=[];return u.charCodeAt(0)===46&&d.push(""),u.replace(ia,function(_,E,I,V){d.push(I?V.replace(Wa,"$1"):E||_)}),d});function Kn(u){if(typeof u=="string"||hn(u))return u;var d=u+"";return d=="0"&&1/u==-Z?"-0":d}function Ji(u){if(u!=null){try{return ju.call(u)}catch{}try{return u+""}catch{}}return""}function t_(u,d){return Dn(Be,function(_){var E="_."+_[0];d&_[1]&&!Nu(u,E)&&u.push(E)}),u.sort()}function Zh(u){if(u instanceof wt)return u.clone();var d=new yn(u.__wrapped__,u.__chain__);return d.__actions__=Xr(u.__actions__),d.__index__=u.__index__,d.__values__=u.__values__,d}function r_(u,d,_){(_?Kr(u,d,_):d===r)?d=1:d=mr(mt(d),0);var E=u==null?0:u.length;if(!E||d<1)return[];for(var I=0,V=0,Y=le(Ku(E/d));I<E;)Y[V++]=An(u,I,I+=d);return Y}function n_(u){for(var d=-1,_=u==null?0:u.length,E=0,I=[];++d<_;){var V=u[d];V&&(I[E++]=V)}return I}function i_(){var u=arguments.length;if(!u)return[];for(var d=le(u-1),_=arguments[0],E=u;E--;)d[E-1]=arguments[E];return wi(dt(_)?Xr(_):[_],Mr(d,1))}var a_=bt(function(u,d){return lr(u)?cu(u,Mr(d,1,lr,!0)):[]}),u_=bt(function(u,d){var _=Cn(d);return lr(_)&&(_=r),lr(u)?cu(u,Mr(d,1,lr,!0),rt(_,2)):[]}),s_=bt(function(u,d){var _=Cn(d);return lr(_)&&(_=r),lr(u)?cu(u,Mr(d,1,lr,!0),r,_):[]});function o_(u,d,_){var E=u==null?0:u.length;return E?(d=_||d===r?1:mt(d),An(u,d<0?0:d,E)):[]}function l_(u,d,_){var E=u==null?0:u.length;return E?(d=_||d===r?1:mt(d),d=E-d,An(u,0,d<0?0:d)):[]}function c_(u,d){return u&&u.length?is(u,rt(d,3),!0,!0):[]}function f_(u,d){return u&&u.length?is(u,rt(d,3),!0):[]}function h_(u,d,_,E){var I=u==null?0:u.length;return I?(_&&typeof _!="number"&&Kr(u,d,_)&&(_=0,E=I),im(u,d,_,E)):[]}function Jh(u,d,_){var E=u==null?0:u.length;if(!E)return-1;var I=_==null?0:mt(_);return I<0&&(I=mr(E+I,0)),Lu(u,rt(d,3),I)}function Qh(u,d,_){var E=u==null?0:u.length;if(!E)return-1;var I=E-1;return _!==r&&(I=mt(_),I=_<0?mr(E+I,0):Rr(I,E-1)),Lu(u,rt(d,3),I,!0)}function Xh(u){var d=u==null?0:u.length;return d?Mr(u,1):[]}function d_(u){var d=u==null?0:u.length;return d?Mr(u,Z):[]}function p_(u,d){var _=u==null?0:u.length;return _?(d=d===r?1:mt(d),Mr(u,d)):[]}function g_(u){for(var d=-1,_=u==null?0:u.length,E={};++d<_;){var I=u[d];E[I[0]]=I[1]}return E}function e0(u){return u&&u.length?u[0]:r}function v_(u,d,_){var E=u==null?0:u.length;if(!E)return-1;var I=_==null?0:mt(_);return I<0&&(I=mr(E+I,0)),oa(u,d,I)}function m_(u){var d=u==null?0:u.length;return d?An(u,0,-1):[]}var __=bt(function(u){var d=Ht(u,fl);return d.length&&d[0]===u[0]?tl(d):[]}),b_=bt(function(u){var d=Cn(u),_=Ht(u,fl);return d===Cn(_)?d=r:_.pop(),_.length&&_[0]===u[0]?tl(_,rt(d,2)):[]}),D_=bt(function(u){var d=Cn(u),_=Ht(u,fl);return d=typeof d=="function"?d:r,d&&_.pop(),_.length&&_[0]===u[0]?tl(_,r,d):[]});function w_(u,d){return u==null?"":mv.call(u,d)}function Cn(u){var d=u==null?0:u.length;return d?u[d-1]:r}function y_(u,d,_){var E=u==null?0:u.length;if(!E)return-1;var I=E;return _!==r&&(I=mt(_),I=I<0?mr(E+I,0):Rr(I,E-1)),d===d?tv(u,d,I):Lu(u,If,I,!0)}function E_(u,d){return u&&u.length?fh(u,mt(d)):r}var A_=bt(t0);function t0(u,d){return u&&u.length&&d&&d.length?al(u,d):u}function C_(u,d,_){return u&&u.length&&d&&d.length?al(u,d,rt(_,2)):u}function F_(u,d,_){return u&&u.length&&d&&d.length?al(u,d,r,_):u}var S_=si(function(u,d){var _=u==null?0:u.length,E=Jo(u,d);return ph(u,Ht(d,function(I){return oi(I,_)?+I:I}).sort(Ah)),E});function B_(u,d){var _=[];if(!(u&&u.length))return _;var E=-1,I=[],V=u.length;for(d=rt(d,3);++E<V;){var Y=u[E];d(Y,E,u)&&(_.push(Y),I.push(E))}return ph(u,I),_}function Cl(u){return u==null?u:wv.call(u)}function O_(u,d,_){var E=u==null?0:u.length;return E?(_&&typeof _!="number"&&Kr(u,d,_)?(d=0,_=E):(d=d==null?0:mt(d),_=_===r?E:mt(_)),An(u,d,_)):[]}function M_(u,d){return ns(u,d)}function P_(u,d,_){return ol(u,d,rt(_,2))}function k_(u,d){var _=u==null?0:u.length;if(_){var E=ns(u,d);if(E<_&&In(u[E],d))return E}return-1}function T_(u,d){return ns(u,d,!0)}function I_(u,d,_){return ol(u,d,rt(_,2),!0)}function x_(u,d){var _=u==null?0:u.length;if(_){var E=ns(u,d,!0)-1;if(In(u[E],d))return E}return-1}function N_(u){return u&&u.length?vh(u):[]}function L_(u,d){return u&&u.length?vh(u,rt(d,2)):[]}function R_(u){var d=u==null?0:u.length;return d?An(u,1,d):[]}function U_(u,d,_){return u&&u.length?(d=_||d===r?1:mt(d),An(u,0,d<0?0:d)):[]}function V_(u,d,_){var E=u==null?0:u.length;return E?(d=_||d===r?1:mt(d),d=E-d,An(u,d<0?0:d,E)):[]}function j_(u,d){return u&&u.length?is(u,rt(d,3),!1,!0):[]}function z_(u,d){return u&&u.length?is(u,rt(d,3)):[]}var q_=bt(function(u){return Ci(Mr(u,1,lr,!0))}),W_=bt(function(u){var d=Cn(u);return lr(d)&&(d=r),Ci(Mr(u,1,lr,!0),rt(d,2))}),H_=bt(function(u){var d=Cn(u);return d=typeof d=="function"?d:r,Ci(Mr(u,1,lr,!0),r,d)});function $_(u){return u&&u.length?Ci(u):[]}function G_(u,d){return u&&u.length?Ci(u,rt(d,2)):[]}function K_(u,d){return d=typeof d=="function"?d:r,u&&u.length?Ci(u,r,d):[]}function Fl(u){if(!(u&&u.length))return[];var d=0;return u=Di(u,function(_){if(lr(_))return d=mr(_.length,d),!0}),qo(d,function(_){return Ht(u,Vo(_))})}function r0(u,d){if(!(u&&u.length))return[];var _=Fl(u);return d==null?_:Ht(_,function(E){return ln(d,r,E)})}var Y_=bt(function(u,d){return lr(u)?cu(u,d):[]}),Z_=bt(function(u){return cl(Di(u,lr))}),J_=bt(function(u){var d=Cn(u);return lr(d)&&(d=r),cl(Di(u,lr),rt(d,2))}),Q_=bt(function(u){var d=Cn(u);return d=typeof d=="function"?d:r,cl(Di(u,lr),r,d)}),X_=bt(Fl);function e2(u,d){return Dh(u||[],d||[],lu)}function t2(u,d){return Dh(u||[],d||[],du)}var r2=bt(function(u){var d=u.length,_=d>1?u[d-1]:r;return _=typeof _=="function"?(u.pop(),_):r,r0(u,_)});function n0(u){var d=L(u);return d.__chain__=!0,d}function n2(u,d){return d(u),u}function ds(u,d){return d(u)}var i2=si(function(u){var d=u.length,_=d?u[0]:0,E=this.__wrapped__,I=function(V){return Jo(V,u)};return d>1||this.__actions__.length||!(E instanceof wt)||!oi(_)?this.thru(I):(E=E.slice(_,+_+(d?1:0)),E.__actions__.push({func:ds,args:[I],thisArg:r}),new yn(E,this.__chain__).thru(function(V){return d&&!V.length&&V.push(r),V}))});function a2(){return n0(this)}function u2(){return new yn(this.value(),this.__chain__)}function s2(){this.__values__===r&&(this.__values__=m0(this.value()));var u=this.__index__>=this.__values__.length,d=u?r:this.__values__[this.__index__++];return{done:u,value:d}}function o2(){return this}function l2(u){for(var d,_=this;_ instanceof Qu;){var E=Zh(_);E.__index__=0,E.__values__=r,d?I.__wrapped__=E:d=E;var I=E;_=_.__wrapped__}return I.__wrapped__=u,d}function c2(){var u=this.__wrapped__;if(u instanceof wt){var d=u;return this.__actions__.length&&(d=new wt(this)),d=d.reverse(),d.__actions__.push({func:ds,args:[Cl],thisArg:r}),new yn(d,this.__chain__)}return this.thru(Cl)}function f2(){return bh(this.__wrapped__,this.__actions__)}var h2=as(function(u,d,_){It.call(u,_)?++u[_]:ai(u,_,1)});function d2(u,d,_){var E=dt(u)?kf:nm;return _&&Kr(u,d,_)&&(d=r),E(u,rt(d,3))}function p2(u,d){var _=dt(u)?Di:rh;return _(u,rt(d,3))}var g2=Mh(Jh),v2=Mh(Qh);function m2(u,d){return Mr(ps(u,d),1)}function _2(u,d){return Mr(ps(u,d),Z)}function b2(u,d,_){return _=_===r?1:mt(_),Mr(ps(u,d),_)}function i0(u,d){var _=dt(u)?Dn:Ai;return _(u,rt(d,3))}function a0(u,d){var _=dt(u)?Rg:th;return _(u,rt(d,3))}var D2=as(function(u,d,_){It.call(u,_)?u[_].push(d):ai(u,_,[d])});function w2(u,d,_,E){u=en(u)?u:Da(u),_=_&&!E?mt(_):0;var I=u.length;return _<0&&(_=mr(I+_,0)),bs(u)?_<=I&&u.indexOf(d,_)>-1:!!I&&oa(u,d,_)>-1}var y2=bt(function(u,d,_){var E=-1,I=typeof d=="function",V=en(u)?le(u.length):[];return Ai(u,function(Y){V[++E]=I?ln(d,Y,_):fu(Y,d,_)}),V}),E2=as(function(u,d,_){ai(u,_,d)});function ps(u,d){var _=dt(u)?Ht:oh;return _(u,rt(d,3))}function A2(u,d,_,E){return u==null?[]:(dt(d)||(d=d==null?[]:[d]),_=E?r:_,dt(_)||(_=_==null?[]:[_]),hh(u,d,_))}var C2=as(function(u,d,_){u[_?0:1].push(d)},function(){return[[],[]]});function F2(u,d,_){var E=dt(u)?Ro:Nf,I=arguments.length<3;return E(u,rt(d,4),_,I,Ai)}function S2(u,d,_){var E=dt(u)?Ug:Nf,I=arguments.length<3;return E(u,rt(d,4),_,I,th)}function B2(u,d){var _=dt(u)?Di:rh;return _(u,ms(rt(d,3)))}function O2(u){var d=dt(u)?Jf:wm;return d(u)}function M2(u,d,_){(_?Kr(u,d,_):d===r)?d=1:d=mt(d);var E=dt(u)?Qv:ym;return E(u,d)}function P2(u){var d=dt(u)?Xv:Am;return d(u)}function k2(u){if(u==null)return 0;if(en(u))return bs(u)?ca(u):u.length;var d=Ur(u);return d==ot||d==Sr?u.size:nl(u).length}function T2(u,d,_){var E=dt(u)?Uo:Cm;return _&&Kr(u,d,_)&&(d=r),E(u,rt(d,3))}var I2=bt(function(u,d){if(u==null)return[];var _=d.length;return _>1&&Kr(u,d[0],d[1])?d=[]:_>2&&Kr(d[0],d[1],d[2])&&(d=[d[0]]),hh(u,Mr(d,1),[])}),gs=pv||function(){return Or.Date.now()};function x2(u,d){if(typeof d!="function")throw new wn(o);return u=mt(u),function(){if(--u<1)return d.apply(this,arguments)}}function u0(u,d,_){return d=_?r:d,d=u&&d==null?u.length:d,ui(u,O,r,r,r,r,d)}function s0(u,d){var _;if(typeof d!="function")throw new wn(o);return u=mt(u),function(){return--u>0&&(_=d.apply(this,arguments)),u<=1&&(d=r),_}}var Sl=bt(function(u,d,_){var E=m;if(_.length){var I=yi(_,_a(Sl));E|=C}return ui(u,E,d,_,I)}),o0=bt(function(u,d,_){var E=m|D;if(_.length){var I=yi(_,_a(o0));E|=C}return ui(d,E,u,_,I)});function l0(u,d,_){d=_?r:d;var E=ui(u,y,r,r,r,r,r,d);return E.placeholder=l0.placeholder,E}function c0(u,d,_){d=_?r:d;var E=ui(u,A,r,r,r,r,r,d);return E.placeholder=c0.placeholder,E}function f0(u,d,_){var E,I,V,Y,ee,ae,Fe=0,Se=!1,Pe=!1,ze=!0;if(typeof u!="function")throw new wn(o);d=Fn(d)||0,Xt(_)&&(Se=!!_.leading,Pe="maxWait"in _,V=Pe?mr(Fn(_.maxWait)||0,d):V,ze="trailing"in _?!!_.trailing:ze);function Ke(cr){var xn=E,fi=I;return E=I=r,Fe=cr,Y=u.apply(fi,xn),Y}function ut(cr){return Fe=cr,ee=vu(Dt,d),Se?Ke(cr):Y}function _t(cr){var xn=cr-ae,fi=cr-Fe,M0=d-xn;return Pe?Rr(M0,V-fi):M0}function st(cr){var xn=cr-ae,fi=cr-Fe;return ae===r||xn>=d||xn<0||Pe&&fi>=V}function Dt(){var cr=gs();if(st(cr))return Ft(cr);ee=vu(Dt,_t(cr))}function Ft(cr){return ee=r,ze&&E?Ke(cr):(E=I=r,Y)}function dn(){ee!==r&&wh(ee),Fe=0,E=ae=I=ee=r}function Yr(){return ee===r?Y:Ft(gs())}function pn(){var cr=gs(),xn=st(cr);if(E=arguments,I=this,ae=cr,xn){if(ee===r)return ut(ae);if(Pe)return wh(ee),ee=vu(Dt,d),Ke(ae)}return ee===r&&(ee=vu(Dt,d)),Y}return pn.cancel=dn,pn.flush=Yr,pn}var N2=bt(function(u,d){return eh(u,1,d)}),L2=bt(function(u,d,_){return eh(u,Fn(d)||0,_)});function R2(u){return ui(u,x)}function vs(u,d){if(typeof u!="function"||d!=null&&typeof d!="function")throw new wn(o);var _=function(){var E=arguments,I=d?d.apply(this,E):E[0],V=_.cache;if(V.has(I))return V.get(I);var Y=u.apply(this,E);return _.cache=V.set(I,Y)||V,Y};return _.cache=new(vs.Cache||ii),_}vs.Cache=ii;function ms(u){if(typeof u!="function")throw new wn(o);return function(){var d=arguments;switch(d.length){case 0:return!u.call(this);case 1:return!u.call(this,d[0]);case 2:return!u.call(this,d[0],d[1]);case 3:return!u.call(this,d[0],d[1],d[2])}return!u.apply(this,d)}}function U2(u){return s0(2,u)}var V2=Fm(function(u,d){d=d.length==1&&dt(d[0])?Ht(d[0],cn(rt())):Ht(Mr(d,1),cn(rt()));var _=d.length;return bt(function(E){for(var I=-1,V=Rr(E.length,_);++I<V;)E[I]=d[I].call(this,E[I]);return ln(u,this,E)})}),Bl=bt(function(u,d){var _=yi(d,_a(Bl));return ui(u,C,r,d,_)}),h0=bt(function(u,d){var _=yi(d,_a(h0));return ui(u,P,r,d,_)}),j2=si(function(u,d){return ui(u,F,r,r,r,d)});function z2(u,d){if(typeof u!="function")throw new wn(o);return d=d===r?d:mt(d),bt(u,d)}function q2(u,d){if(typeof u!="function")throw new wn(o);return d=d==null?0:mr(mt(d),0),bt(function(_){var E=_[d],I=Si(_,0,d);return E&&wi(I,E),ln(u,this,I)})}function W2(u,d,_){var E=!0,I=!0;if(typeof u!="function")throw new wn(o);return Xt(_)&&(E="leading"in _?!!_.leading:E,I="trailing"in _?!!_.trailing:I),f0(u,d,{leading:E,maxWait:d,trailing:I})}function H2(u){return u0(u,1)}function $2(u,d){return Bl(hl(d),u)}function G2(){if(!arguments.length)return[];var u=arguments[0];return dt(u)?u:[u]}function K2(u){return En(u,g)}function Y2(u,d){return d=typeof d=="function"?d:r,En(u,g,d)}function Z2(u){return En(u,f|g)}function J2(u,d){return d=typeof d=="function"?d:r,En(u,f|g,d)}function Q2(u,d){return d==null||Xf(u,d,Er(d))}function In(u,d){return u===d||u!==u&&d!==d}var X2=ls(el),eb=ls(function(u,d){return u>=d}),Qi=ah(function(){return arguments}())?ah:function(u){return ar(u)&&It.call(u,"callee")&&!Hf.call(u,"callee")},dt=le.isArray,tb=Ff?cn(Ff):lm;function en(u){return u!=null&&_s(u.length)&&!li(u)}function lr(u){return ar(u)&&en(u)}function rb(u){return u===!0||u===!1||ar(u)&&Gr(u)==it}var Bi=vv||Ul,nb=Sf?cn(Sf):cm;function ib(u){return ar(u)&&u.nodeType===1&&!mu(u)}function ab(u){if(u==null)return!0;if(en(u)&&(dt(u)||typeof u=="string"||typeof u.splice=="function"||Bi(u)||ba(u)||Qi(u)))return!u.length;var d=Ur(u);if(d==ot||d==Sr)return!u.size;if(gu(u))return!nl(u).length;for(var _ in u)if(It.call(u,_))return!1;return!0}function ub(u,d){return hu(u,d)}function sb(u,d,_){_=typeof _=="function"?_:r;var E=_?_(u,d):r;return E===r?hu(u,d,r,_):!!E}function Ol(u){if(!ar(u))return!1;var d=Gr(u);return d==Et||d==et||typeof u.message=="string"&&typeof u.name=="string"&&!mu(u)}function ob(u){return typeof u=="number"&&Gf(u)}function li(u){if(!Xt(u))return!1;var d=Gr(u);return d==At||d==ct||d==qe||d==tt}function d0(u){return typeof u=="number"&&u==mt(u)}function _s(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=X}function Xt(u){var d=typeof u;return u!=null&&(d=="object"||d=="function")}function ar(u){return u!=null&&typeof u=="object"}var p0=Bf?cn(Bf):hm;function lb(u,d){return u===d||rl(u,d,bl(d))}function cb(u,d,_){return _=typeof _=="function"?_:r,rl(u,d,bl(d),_)}function fb(u){return g0(u)&&u!=+u}function hb(u){if(Ym(u))throw new ht(a);return uh(u)}function db(u){return u===null}function pb(u){return u==null}function g0(u){return typeof u=="number"||ar(u)&&Gr(u)==Pt}function mu(u){if(!ar(u)||Gr(u)!=Ut)return!1;var d=Hu(u);if(d===null)return!0;var _=It.call(d,"constructor")&&d.constructor;return typeof _=="function"&&_ instanceof _&&ju.call(_)==cv}var Ml=Of?cn(Of):dm;function gb(u){return d0(u)&&u>=-X&&u<=X}var v0=Mf?cn(Mf):pm;function bs(u){return typeof u=="string"||!dt(u)&&ar(u)&&Gr(u)==On}function hn(u){return typeof u=="symbol"||ar(u)&&Gr(u)==K}var ba=Pf?cn(Pf):gm;function vb(u){return u===r}function mb(u){return ar(u)&&Ur(u)==ie}function _b(u){return ar(u)&&Gr(u)==me}var bb=ls(il),Db=ls(function(u,d){return u<=d});function m0(u){if(!u)return[];if(en(u))return bs(u)?kn(u):Xr(u);if(iu&&u[iu])return Qg(u[iu]());var d=Ur(u),_=d==ot?Ho:d==Sr?Ru:Da;return _(u)}function ci(u){if(!u)return u===0?u:0;if(u=Fn(u),u===Z||u===-Z){var d=u<0?-1:1;return d*te}return u===u?u:0}function mt(u){var d=ci(u),_=d%1;return d===d?_?d-_:d:0}function _0(u){return u?Ki(mt(u),0,he):0}function Fn(u){if(typeof u=="number")return u;if(hn(u))return fe;if(Xt(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=Xt(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=Lf(u);var _=Ga.test(u);return _||Ya.test(u)?xg(u.slice(2),_?2:8):$a.test(u)?fe:+u}function b0(u){return Gn(u,tn(u))}function wb(u){return u?Ki(mt(u),-X,X):u===0?u:0}function kt(u){return u==null?"":fn(u)}var yb=va(function(u,d){if(gu(d)||en(d)){Gn(d,Er(d),u);return}for(var _ in d)It.call(d,_)&&lu(u,_,d[_])}),D0=va(function(u,d){Gn(d,tn(d),u)}),Ds=va(function(u,d,_,E){Gn(d,tn(d),u,E)}),Eb=va(function(u,d,_,E){Gn(d,Er(d),u,E)}),Ab=si(Jo);function Cb(u,d){var _=ga(u);return d==null?_:Qf(_,d)}var Fb=bt(function(u,d){u=Nt(u);var _=-1,E=d.length,I=E>2?d[2]:r;for(I&&Kr(d[0],d[1],I)&&(E=1);++_<E;)for(var V=d[_],Y=tn(V),ee=-1,ae=Y.length;++ee<ae;){var Fe=Y[ee],Se=u[Fe];(Se===r||In(Se,ha[Fe])&&!It.call(u,Fe))&&(u[Fe]=V[Fe])}return u}),Sb=bt(function(u){return u.push(r,Lh),ln(w0,r,u)});function Bb(u,d){return Tf(u,rt(d,3),$n)}function Ob(u,d){return Tf(u,rt(d,3),Xo)}function Mb(u,d){return u==null?u:Qo(u,rt(d,3),tn)}function Pb(u,d){return u==null?u:nh(u,rt(d,3),tn)}function kb(u,d){return u&&$n(u,rt(d,3))}function Tb(u,d){return u&&Xo(u,rt(d,3))}function Ib(u){return u==null?[]:ts(u,Er(u))}function xb(u){return u==null?[]:ts(u,tn(u))}function Pl(u,d,_){var E=u==null?r:Yi(u,d);return E===r?_:E}function Nb(u,d){return u!=null&&Vh(u,d,am)}function kl(u,d){return u!=null&&Vh(u,d,um)}var Lb=kh(function(u,d,_){d!=null&&typeof d.toString!="function"&&(d=zu.call(d)),u[d]=_},Il(rn)),Rb=kh(function(u,d,_){d!=null&&typeof d.toString!="function"&&(d=zu.call(d)),It.call(u,d)?u[d].push(_):u[d]=[_]},rt),Ub=bt(fu);function Er(u){return en(u)?Zf(u):nl(u)}function tn(u){return en(u)?Zf(u,!0):vm(u)}function Vb(u,d){var _={};return d=rt(d,3),$n(u,function(E,I,V){ai(_,d(E,I,V),E)}),_}function jb(u,d){var _={};return d=rt(d,3),$n(u,function(E,I,V){ai(_,I,d(E,I,V))}),_}var zb=va(function(u,d,_){rs(u,d,_)}),w0=va(function(u,d,_,E){rs(u,d,_,E)}),qb=si(function(u,d){var _={};if(u==null)return _;var E=!1;d=Ht(d,function(V){return V=Fi(V,u),E||(E=V.length>1),V}),Gn(u,ml(u),_),E&&(_=En(_,f|p|g,Lm));for(var I=d.length;I--;)ll(_,d[I]);return _});function Wb(u,d){return y0(u,ms(rt(d)))}var Hb=si(function(u,d){return u==null?{}:_m(u,d)});function y0(u,d){if(u==null)return{};var _=Ht(ml(u),function(E){return[E]});return d=rt(d),dh(u,_,function(E,I){return d(E,I[0])})}function $b(u,d,_){d=Fi(d,u);var E=-1,I=d.length;for(I||(I=1,u=r);++E<I;){var V=u==null?r:u[Kn(d[E])];V===r&&(E=I,V=_),u=li(V)?V.call(u):V}return u}function Gb(u,d,_){return u==null?u:du(u,d,_)}function Kb(u,d,_,E){return E=typeof E=="function"?E:r,u==null?u:du(u,d,_,E)}var E0=xh(Er),A0=xh(tn);function Yb(u,d,_){var E=dt(u),I=E||Bi(u)||ba(u);if(d=rt(d,4),_==null){var V=u&&u.constructor;I?_=E?new V:[]:Xt(u)?_=li(V)?ga(Hu(u)):{}:_={}}return(I?Dn:$n)(u,function(Y,ee,ae){return d(_,Y,ee,ae)}),_}function Zb(u,d){return u==null?!0:ll(u,d)}function Jb(u,d,_){return u==null?u:_h(u,d,hl(_))}function Qb(u,d,_,E){return E=typeof E=="function"?E:r,u==null?u:_h(u,d,hl(_),E)}function Da(u){return u==null?[]:Wo(u,Er(u))}function Xb(u){return u==null?[]:Wo(u,tn(u))}function eD(u,d,_){return _===r&&(_=d,d=r),_!==r&&(_=Fn(_),_=_===_?_:0),d!==r&&(d=Fn(d),d=d===d?d:0),Ki(Fn(u),d,_)}function tD(u,d,_){return d=ci(d),_===r?(_=d,d=0):_=ci(_),u=Fn(u),sm(u,d,_)}function rD(u,d,_){if(_&&typeof _!="boolean"&&Kr(u,d,_)&&(d=_=r),_===r&&(typeof d=="boolean"?(_=d,d=r):typeof u=="boolean"&&(_=u,u=r)),u===r&&d===r?(u=0,d=1):(u=ci(u),d===r?(d=u,u=0):d=ci(d)),u>d){var E=u;u=d,d=E}if(_||u%1||d%1){var I=Kf();return Rr(u+I*(d-u+Ig("1e-"+((I+"").length-1))),d)}return ul(u,d)}var nD=ma(function(u,d,_){return d=d.toLowerCase(),u+(_?C0(d):d)});function C0(u){return Tl(kt(u).toLowerCase())}function F0(u){return u=kt(u),u&&u.replace(Ja,Gg).replace(Ag,"")}function iD(u,d,_){u=kt(u),d=fn(d);var E=u.length;_=_===r?E:Ki(mt(_),0,E);var I=_;return _-=d.length,_>=0&&u.slice(_,I)==d}function aD(u){return u=kt(u),u&&vn.test(u)?u.replace(fr,Kg):u}function uD(u){return u=kt(u),u&&za.test(u)?u.replace(Vi,"\\$&"):u}var sD=ma(function(u,d,_){return u+(_?"-":"")+d.toLowerCase()}),oD=ma(function(u,d,_){return u+(_?" ":"")+d.toLowerCase()}),lD=Oh("toLowerCase");function cD(u,d,_){u=kt(u),d=mt(d);var E=d?ca(u):0;if(!d||E>=d)return u;var I=(d-E)/2;return os(Yu(I),_)+u+os(Ku(I),_)}function fD(u,d,_){u=kt(u),d=mt(d);var E=d?ca(u):0;return d&&E<d?u+os(d-E,_):u}function hD(u,d,_){u=kt(u),d=mt(d);var E=d?ca(u):0;return d&&E<d?os(d-E,_)+u:u}function dD(u,d,_){return _||d==null?d=0:d&&(d=+d),Dv(kt(u).replace(Br,""),d||0)}function pD(u,d,_){return(_?Kr(u,d,_):d===r)?d=1:d=mt(d),sl(kt(u),d)}function gD(){var u=arguments,d=kt(u[0]);return u.length<3?d:d.replace(u[1],u[2])}var vD=ma(function(u,d,_){return u+(_?"_":"")+d.toLowerCase()});function mD(u,d,_){return _&&typeof _!="number"&&Kr(u,d,_)&&(d=_=r),_=_===r?he:_>>>0,_?(u=kt(u),u&&(typeof d=="string"||d!=null&&!Ml(d))&&(d=fn(d),!d&&la(u))?Si(kn(u),0,_):u.split(d,_)):[]}var _D=ma(function(u,d,_){return u+(_?" ":"")+Tl(d)});function bD(u,d,_){return u=kt(u),_=_==null?0:Ki(mt(_),0,u.length),d=fn(d),u.slice(_,_+d.length)==d}function DD(u,d,_){var E=L.templateSettings;_&&Kr(u,d,_)&&(d=r),u=kt(u),d=Ds({},d,E,Nh);var I=Ds({},d.imports,E.imports,Nh),V=Er(I),Y=Wo(I,V),ee,ae,Fe=0,Se=d.interpolate||_i,Pe="__p += '",ze=$o((d.escape||_i).source+"|"+Se.source+"|"+(Se===ei?Ha:_i).source+"|"+(d.evaluate||_i).source+"|$","g"),Ke="//# sourceURL="+(It.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Og+"]")+`
`;u.replace(ze,function(st,Dt,Ft,dn,Yr,pn){return Ft||(Ft=dn),Pe+=u.slice(Fe,pn).replace(Qa,Yg),Dt&&(ee=!0,Pe+=`' +
__e(`+Dt+`) +
'`),Yr&&(ae=!0,Pe+=`';
`+Yr+`;
__p += '`),Ft&&(Pe+=`' +
((__t = (`+Ft+`)) == null ? '' : __t) +
'`),Fe=pn+st.length,st}),Pe+=`';
`;var ut=It.call(d,"variable")&&d.variable;if(!ut)Pe=`with (obj) {
`+Pe+`
}
`;else if(ji.test(ut))throw new ht(s);Pe=(ae?Pe.replace(Jt,""):Pe).replace(Dr,"$1").replace(Qt,"$1;"),Pe="function("+(ut||"obj")+`) {
`+(ut?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ee?", __e = _.escape":"")+(ae?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Pe+`return __p
}`;var _t=B0(function(){return Mt(V,Ke+"return "+Pe).apply(r,Y)});if(_t.source=Pe,Ol(_t))throw _t;return _t}function wD(u){return kt(u).toLowerCase()}function yD(u){return kt(u).toUpperCase()}function ED(u,d,_){if(u=kt(u),u&&(_||d===r))return Lf(u);if(!u||!(d=fn(d)))return u;var E=kn(u),I=kn(d),V=Rf(E,I),Y=Uf(E,I)+1;return Si(E,V,Y).join("")}function AD(u,d,_){if(u=kt(u),u&&(_||d===r))return u.slice(0,jf(u)+1);if(!u||!(d=fn(d)))return u;var E=kn(u),I=Uf(E,kn(d))+1;return Si(E,0,I).join("")}function CD(u,d,_){if(u=kt(u),u&&(_||d===r))return u.replace(Br,"");if(!u||!(d=fn(d)))return u;var E=kn(u),I=Rf(E,kn(d));return Si(E,I).join("")}function FD(u,d){var _=z,E=G;if(Xt(d)){var I="separator"in d?d.separator:I;_="length"in d?mt(d.length):_,E="omission"in d?fn(d.omission):E}u=kt(u);var V=u.length;if(la(u)){var Y=kn(u);V=Y.length}if(_>=V)return u;var ee=_-ca(E);if(ee<1)return E;var ae=Y?Si(Y,0,ee).join(""):u.slice(0,ee);if(I===r)return ae+E;if(Y&&(ee+=ae.length-ee),Ml(I)){if(u.slice(ee).search(I)){var Fe,Se=ae;for(I.global||(I=$o(I.source,kt(aa.exec(I))+"g")),I.lastIndex=0;Fe=I.exec(Se);)var Pe=Fe.index;ae=ae.slice(0,Pe===r?ee:Pe)}}else if(u.indexOf(fn(I),ee)!=ee){var ze=ae.lastIndexOf(I);ze>-1&&(ae=ae.slice(0,ze))}return ae+E}function SD(u){return u=kt(u),u&&hr.test(u)?u.replace(wr,rv):u}var BD=ma(function(u,d,_){return u+(_?" ":"")+d.toUpperCase()}),Tl=Oh("toUpperCase");function S0(u,d,_){return u=kt(u),d=_?r:d,d===r?Jg(u)?av(u):zg(u):u.match(d)||[]}var B0=bt(function(u,d){try{return ln(u,r,d)}catch(_){return Ol(_)?_:new ht(_)}}),OD=si(function(u,d){return Dn(d,function(_){_=Kn(_),ai(u,_,Sl(u[_],u))}),u});function MD(u){var d=u==null?0:u.length,_=rt();return u=d?Ht(u,function(E){if(typeof E[1]!="function")throw new wn(o);return[_(E[0]),E[1]]}):[],bt(function(E){for(var I=-1;++I<d;){var V=u[I];if(ln(V[0],this,E))return ln(V[1],this,E)}})}function PD(u){return rm(En(u,f))}function Il(u){return function(){return u}}function kD(u,d){return u==null||u!==u?d:u}var TD=Ph(),ID=Ph(!0);function rn(u){return u}function xl(u){return sh(typeof u=="function"?u:En(u,f))}function xD(u){return lh(En(u,f))}function ND(u,d){return ch(u,En(d,f))}var LD=bt(function(u,d){return function(_){return fu(_,u,d)}}),RD=bt(function(u,d){return function(_){return fu(u,_,d)}});function Nl(u,d,_){var E=Er(d),I=ts(d,E);_==null&&!(Xt(d)&&(I.length||!E.length))&&(_=d,d=u,u=this,I=ts(d,Er(d)));var V=!(Xt(_)&&"chain"in _)||!!_.chain,Y=li(u);return Dn(I,function(ee){var ae=d[ee];u[ee]=ae,Y&&(u.prototype[ee]=function(){var Fe=this.__chain__;if(V||Fe){var Se=u(this.__wrapped__),Pe=Se.__actions__=Xr(this.__actions__);return Pe.push({func:ae,args:arguments,thisArg:u}),Se.__chain__=Fe,Se}return ae.apply(u,wi([this.value()],arguments))})}),u}function UD(){return Or._===this&&(Or._=fv),this}function Ll(){}function VD(u){return u=mt(u),bt(function(d){return fh(d,u)})}var jD=pl(Ht),zD=pl(kf),qD=pl(Uo);function O0(u){return wl(u)?Vo(Kn(u)):bm(u)}function WD(u){return function(d){return u==null?r:Yi(u,d)}}var HD=Th(),$D=Th(!0);function Rl(){return[]}function Ul(){return!1}function GD(){return{}}function KD(){return""}function YD(){return!0}function ZD(u,d){if(u=mt(u),u<1||u>X)return[];var _=he,E=Rr(u,he);d=rt(d),u-=he;for(var I=qo(E,d);++_<u;)d(_);return I}function JD(u){return dt(u)?Ht(u,Kn):hn(u)?[u]:Xr(Yh(kt(u)))}function QD(u){var d=++lv;return kt(u)+d}var XD=ss(function(u,d){return u+d},0),ew=gl("ceil"),tw=ss(function(u,d){return u/d},1),rw=gl("floor");function nw(u){return u&&u.length?es(u,rn,el):r}function iw(u,d){return u&&u.length?es(u,rt(d,2),el):r}function aw(u){return xf(u,rn)}function uw(u,d){return xf(u,rt(d,2))}function sw(u){return u&&u.length?es(u,rn,il):r}function ow(u,d){return u&&u.length?es(u,rt(d,2),il):r}var lw=ss(function(u,d){return u*d},1),cw=gl("round"),fw=ss(function(u,d){return u-d},0);function hw(u){return u&&u.length?zo(u,rn):0}function dw(u,d){return u&&u.length?zo(u,rt(d,2)):0}return L.after=x2,L.ary=u0,L.assign=yb,L.assignIn=D0,L.assignInWith=Ds,L.assignWith=Eb,L.at=Ab,L.before=s0,L.bind=Sl,L.bindAll=OD,L.bindKey=o0,L.castArray=G2,L.chain=n0,L.chunk=r_,L.compact=n_,L.concat=i_,L.cond=MD,L.conforms=PD,L.constant=Il,L.countBy=h2,L.create=Cb,L.curry=l0,L.curryRight=c0,L.debounce=f0,L.defaults=Fb,L.defaultsDeep=Sb,L.defer=N2,L.delay=L2,L.difference=a_,L.differenceBy=u_,L.differenceWith=s_,L.drop=o_,L.dropRight=l_,L.dropRightWhile=c_,L.dropWhile=f_,L.fill=h_,L.filter=p2,L.flatMap=m2,L.flatMapDeep=_2,L.flatMapDepth=b2,L.flatten=Xh,L.flattenDeep=d_,L.flattenDepth=p_,L.flip=R2,L.flow=TD,L.flowRight=ID,L.fromPairs=g_,L.functions=Ib,L.functionsIn=xb,L.groupBy=D2,L.initial=m_,L.intersection=__,L.intersectionBy=b_,L.intersectionWith=D_,L.invert=Lb,L.invertBy=Rb,L.invokeMap=y2,L.iteratee=xl,L.keyBy=E2,L.keys=Er,L.keysIn=tn,L.map=ps,L.mapKeys=Vb,L.mapValues=jb,L.matches=xD,L.matchesProperty=ND,L.memoize=vs,L.merge=zb,L.mergeWith=w0,L.method=LD,L.methodOf=RD,L.mixin=Nl,L.negate=ms,L.nthArg=VD,L.omit=qb,L.omitBy=Wb,L.once=U2,L.orderBy=A2,L.over=jD,L.overArgs=V2,L.overEvery=zD,L.overSome=qD,L.partial=Bl,L.partialRight=h0,L.partition=C2,L.pick=Hb,L.pickBy=y0,L.property=O0,L.propertyOf=WD,L.pull=A_,L.pullAll=t0,L.pullAllBy=C_,L.pullAllWith=F_,L.pullAt=S_,L.range=HD,L.rangeRight=$D,L.rearg=j2,L.reject=B2,L.remove=B_,L.rest=z2,L.reverse=Cl,L.sampleSize=M2,L.set=Gb,L.setWith=Kb,L.shuffle=P2,L.slice=O_,L.sortBy=I2,L.sortedUniq=N_,L.sortedUniqBy=L_,L.split=mD,L.spread=q2,L.tail=R_,L.take=U_,L.takeRight=V_,L.takeRightWhile=j_,L.takeWhile=z_,L.tap=n2,L.throttle=W2,L.thru=ds,L.toArray=m0,L.toPairs=E0,L.toPairsIn=A0,L.toPath=JD,L.toPlainObject=b0,L.transform=Yb,L.unary=H2,L.union=q_,L.unionBy=W_,L.unionWith=H_,L.uniq=$_,L.uniqBy=G_,L.uniqWith=K_,L.unset=Zb,L.unzip=Fl,L.unzipWith=r0,L.update=Jb,L.updateWith=Qb,L.values=Da,L.valuesIn=Xb,L.without=Y_,L.words=S0,L.wrap=$2,L.xor=Z_,L.xorBy=J_,L.xorWith=Q_,L.zip=X_,L.zipObject=e2,L.zipObjectDeep=t2,L.zipWith=r2,L.entries=E0,L.entriesIn=A0,L.extend=D0,L.extendWith=Ds,Nl(L,L),L.add=XD,L.attempt=B0,L.camelCase=nD,L.capitalize=C0,L.ceil=ew,L.clamp=eD,L.clone=K2,L.cloneDeep=Z2,L.cloneDeepWith=J2,L.cloneWith=Y2,L.conformsTo=Q2,L.deburr=F0,L.defaultTo=kD,L.divide=tw,L.endsWith=iD,L.eq=In,L.escape=aD,L.escapeRegExp=uD,L.every=d2,L.find=g2,L.findIndex=Jh,L.findKey=Bb,L.findLast=v2,L.findLastIndex=Qh,L.findLastKey=Ob,L.floor=rw,L.forEach=i0,L.forEachRight=a0,L.forIn=Mb,L.forInRight=Pb,L.forOwn=kb,L.forOwnRight=Tb,L.get=Pl,L.gt=X2,L.gte=eb,L.has=Nb,L.hasIn=kl,L.head=e0,L.identity=rn,L.includes=w2,L.indexOf=v_,L.inRange=tD,L.invoke=Ub,L.isArguments=Qi,L.isArray=dt,L.isArrayBuffer=tb,L.isArrayLike=en,L.isArrayLikeObject=lr,L.isBoolean=rb,L.isBuffer=Bi,L.isDate=nb,L.isElement=ib,L.isEmpty=ab,L.isEqual=ub,L.isEqualWith=sb,L.isError=Ol,L.isFinite=ob,L.isFunction=li,L.isInteger=d0,L.isLength=_s,L.isMap=p0,L.isMatch=lb,L.isMatchWith=cb,L.isNaN=fb,L.isNative=hb,L.isNil=pb,L.isNull=db,L.isNumber=g0,L.isObject=Xt,L.isObjectLike=ar,L.isPlainObject=mu,L.isRegExp=Ml,L.isSafeInteger=gb,L.isSet=v0,L.isString=bs,L.isSymbol=hn,L.isTypedArray=ba,L.isUndefined=vb,L.isWeakMap=mb,L.isWeakSet=_b,L.join=w_,L.kebabCase=sD,L.last=Cn,L.lastIndexOf=y_,L.lowerCase=oD,L.lowerFirst=lD,L.lt=bb,L.lte=Db,L.max=nw,L.maxBy=iw,L.mean=aw,L.meanBy=uw,L.min=sw,L.minBy=ow,L.stubArray=Rl,L.stubFalse=Ul,L.stubObject=GD,L.stubString=KD,L.stubTrue=YD,L.multiply=lw,L.nth=E_,L.noConflict=UD,L.noop=Ll,L.now=gs,L.pad=cD,L.padEnd=fD,L.padStart=hD,L.parseInt=dD,L.random=rD,L.reduce=F2,L.reduceRight=S2,L.repeat=pD,L.replace=gD,L.result=$b,L.round=cw,L.runInContext=ne,L.sample=O2,L.size=k2,L.snakeCase=vD,L.some=T2,L.sortedIndex=M_,L.sortedIndexBy=P_,L.sortedIndexOf=k_,L.sortedLastIndex=T_,L.sortedLastIndexBy=I_,L.sortedLastIndexOf=x_,L.startCase=_D,L.startsWith=bD,L.subtract=fw,L.sum=hw,L.sumBy=dw,L.template=DD,L.times=ZD,L.toFinite=ci,L.toInteger=mt,L.toLength=_0,L.toLower=wD,L.toNumber=Fn,L.toSafeInteger=wb,L.toString=kt,L.toUpper=yD,L.trim=ED,L.trimEnd=AD,L.trimStart=CD,L.truncate=FD,L.unescape=SD,L.uniqueId=QD,L.upperCase=BD,L.upperFirst=Tl,L.each=i0,L.eachRight=a0,L.first=e0,Nl(L,function(){var u={};return $n(L,function(d,_){It.call(L.prototype,_)||(u[_]=d)}),u}(),{chain:!1}),L.VERSION=n,Dn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){L[u].placeholder=L}),Dn(["drop","take"],function(u,d){wt.prototype[u]=function(_){_=_===r?1:mr(mt(_),0);var E=this.__filtered__&&!d?new wt(this):this.clone();return E.__filtered__?E.__takeCount__=Rr(_,E.__takeCount__):E.__views__.push({size:Rr(_,he),type:u+(E.__dir__<0?"Right":"")}),E},wt.prototype[u+"Right"]=function(_){return this.reverse()[u](_).reverse()}}),Dn(["filter","map","takeWhile"],function(u,d){var _=d+1,E=_==N||_==q;wt.prototype[u]=function(I){var V=this.clone();return V.__iteratees__.push({iteratee:rt(I,3),type:_}),V.__filtered__=V.__filtered__||E,V}}),Dn(["head","last"],function(u,d){var _="take"+(d?"Right":"");wt.prototype[u]=function(){return this[_](1).value()[0]}}),Dn(["initial","tail"],function(u,d){var _="drop"+(d?"":"Right");wt.prototype[u]=function(){return this.__filtered__?new wt(this):this[_](1)}}),wt.prototype.compact=function(){return this.filter(rn)},wt.prototype.find=function(u){return this.filter(u).head()},wt.prototype.findLast=function(u){return this.reverse().find(u)},wt.prototype.invokeMap=bt(function(u,d){return typeof u=="function"?new wt(this):this.map(function(_){return fu(_,u,d)})}),wt.prototype.reject=function(u){return this.filter(ms(rt(u)))},wt.prototype.slice=function(u,d){u=mt(u);var _=this;return _.__filtered__&&(u>0||d<0)?new wt(_):(u<0?_=_.takeRight(-u):u&&(_=_.drop(u)),d!==r&&(d=mt(d),_=d<0?_.dropRight(-d):_.take(d-u)),_)},wt.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},wt.prototype.toArray=function(){return this.take(he)},$n(wt.prototype,function(u,d){var _=/^(?:filter|find|map|reject)|While$/.test(d),E=/^(?:head|last)$/.test(d),I=L[E?"take"+(d=="last"?"Right":""):d],V=E||/^find/.test(d);I&&(L.prototype[d]=function(){var Y=this.__wrapped__,ee=E?[1]:arguments,ae=Y instanceof wt,Fe=ee[0],Se=ae||dt(Y),Pe=function(Dt){var Ft=I.apply(L,wi([Dt],ee));return E&&ze?Ft[0]:Ft};Se&&_&&typeof Fe=="function"&&Fe.length!=1&&(ae=Se=!1);var ze=this.__chain__,Ke=!!this.__actions__.length,ut=V&&!ze,_t=ae&&!Ke;if(!V&&Se){Y=_t?Y:new wt(this);var st=u.apply(Y,ee);return st.__actions__.push({func:ds,args:[Pe],thisArg:r}),new yn(st,ze)}return ut&&_t?u.apply(this,ee):(st=this.thru(Pe),ut?E?st.value()[0]:st.value():st)})}),Dn(["pop","push","shift","sort","splice","unshift"],function(u){var d=Uu[u],_=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",E=/^(?:pop|shift)$/.test(u);L.prototype[u]=function(){var I=arguments;if(E&&!this.__chain__){var V=this.value();return d.apply(dt(V)?V:[],I)}return this[_](function(Y){return d.apply(dt(Y)?Y:[],I)})}}),$n(wt.prototype,function(u,d){var _=L[d];if(_){var E=_.name+"";It.call(pa,E)||(pa[E]=[]),pa[E].push({name:d,func:_})}}),pa[us(r,D).name]=[{name:"wrapper",func:r}],wt.prototype.clone=Sv,wt.prototype.reverse=Bv,wt.prototype.value=Ov,L.prototype.at=i2,L.prototype.chain=a2,L.prototype.commit=u2,L.prototype.next=s2,L.prototype.plant=l2,L.prototype.reverse=c2,L.prototype.toJSON=L.prototype.valueOf=L.prototype.value=f2,L.prototype.first=L.prototype.head,iu&&(L.prototype[iu]=o2),L},fa=uv();Wi?((Wi.exports=fa)._=fa,xo._=fa):Or._=fa}).call(dr)})(LC,Ou);const RC=Ou;function UC(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!1,pending:qC,then:zC,catch:jC,value:10};return Oa(r=t[0],n),{c(){e=yt(),n.block.c()},l(i){e=yt(),n.block.l(i)},m(i,a){ue(i,e,a),n.block.m(i,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e},p(i,a){t=i,n.ctx=t,a&1&&r!==(r=t[0])&&Oa(r,n)||Gc(n,t,a)},d(i){i&&M(e),n.block.d(i),n.token=null,n=null}}}function VC(t){let e;return{c(){e=we("Requires OpenAI key, please enter one in the settings menu.")},l(r){e=ye(r,"Requires OpenAI key, please enter one in the settings menu.")},m(r,n){ue(r,e,n)},p:Oe,d(r){r&&M(e)}}}function jC(t){return{c:Oe,l:Oe,m:Oe,p:Oe,d:Oe}}function zC(t){let e,r=t[10]+"",n;return{c(){e=W("span"),n=we(r),this.h()},l(i){e=H(i,"SPAN",{style:!0});var a=U(e);n=ye(a,r),a.forEach(M),this.h()},h(){B(e,"style","color: rgba(255,255,255,0.75});")},m(i,a){ue(i,e,a),k(e,n)},p(i,a){a&1&&r!==(r=i[10]+"")&&zt(n,r)},d(i){i&&M(e)}}}function qC(t){let e;return{c(){e=we("Regenerating...")},l(r){e=ye(r,"Regenerating...")},m(r,n){ue(r,e,n)},p:Oe,d(r){r&&M(e)}}}function WC(t){let e,r;function n(o,s){return o[1]?UC:VC}let i=n(t),a=i(t);return{c(){e=W("div"),r=W("p"),a.c(),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=U(e);r=H(s,"P",{class:!0});var l=U(r);a.l(l),l.forEach(M),s.forEach(M),this.h()},h(){B(r,"class","text-sm select-none"),B(e,"class","overflow-y-auto h-full")},m(o,s){ue(o,e,s),k(e,r),a.m(r,null)},p(o,[s]){i===(i=n(o))&&a?a.p(o,s):(a.d(1),a=i(o),a&&(a.c(),a.m(r,null)))},i:Oe,o:Oe,d(o){o&&M(e),a.d()}}}function HC(t,e,r){let n,i,a,o,s,l;je(t,Ye,g=>r(2,n=g)),je(t,Vn,g=>r(1,i=g)),je(t,Cu,g=>r(3,a=g)),je(t,Ao,g=>r(4,o=g)),je(t,Su,g=>r(5,s=g)),je(t,Li,g=>r(6,l=g));let{promptPromise:h=null}=e;async function c(g){const b=Bu(i),v=af(g,l,s,o,a).split(`
`).slice(0,15).join(`
`),m=await K1(b,`
        The structure of an image prompt is: 
        subject of the image, styles of the image, genres of the image, medias of the image
        For example:
        a cat walking through the desert, in the style of Wes Anderson, in the style of Van Gogh, desertpunk, solarpunk, movie still

        Combine the following list of image prompts into a single image prompt. If there are multiple prompts try to find a common theme to create a single prompt.
        
        ${v}
        `);return console.log(m.data.choices),m.data.choices[0].message.content}const f=Ou.debounce(async g=>{i&&(r(0,h=c(g)),h.then(b=>{console.log("updating magic prompt text"),Ia.set(b)}))},1e3),p=Ye.subscribe(f);return lo(()=>{i&&r(0,h=c(n).then(g=>{console.log("updating magic prompt text"),Ia.set(g)}))}),$c(()=>{p()}),t.$$set=g=>{"promptPromise"in g&&r(0,h=g.promptPromise)},[h,i]}class $C extends Ze{constructor(e){super(),Je(this,e,HC,WC,Qe,{promptPromise:0})}}function GC(t){let e,r;return e=new $C({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function KC(t){let e,r;return e=new m6({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function YC(t){let e,r;return e=new p6({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function ZC(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b,v,m,D,S,y,A,C,P,O,F,x,z,G,J,R,N,j,q,Z;const X=[YC,KC,GC],te=[];function fe(he,ge){return he[2]===Ar.Multi?0:he[2]===Ar.Single?1:he[2]===Ar.Magic?2:-1}return~(n=fe(t))&&(i=te[n]=X[n](t)),{c(){e=W("div"),r=W("div"),i&&i.c(),a=Ee(),o=W("div"),s=W("div"),l=W("div"),h=W("button"),c=we("Single"),f=Ee(),p=W("button"),g=we("Multi"),b=Ee(),v=W("button"),m=we("Magic"),D=Ee(),S=W("div"),y=W("input"),A=Ee(),C=W("label"),P=W("span"),O=we("Use Weight Ordering"),F=Ee(),x=W("div"),z=W("input"),G=Ee(),J=W("label"),R=W("span"),N=we("Include Zero Weights"),this.h()},l(he){e=H(he,"DIV",{class:!0});var ge=U(e);r=H(ge,"DIV",{class:!0});var _e=U(r);i&&i.l(_e),_e.forEach(M),a=Ae(ge),o=H(ge,"DIV",{class:!0});var Be=U(o);s=H(Be,"DIV",{class:!0});var ke=U(s);l=H(ke,"DIV",{class:!0});var Ie=U(l);h=H(Ie,"BUTTON",{class:!0});var qe=U(h);c=ye(qe,"Single"),qe.forEach(M),f=Ae(Ie),p=H(Ie,"BUTTON",{class:!0});var it=U(p);g=ye(it,"Multi"),it.forEach(M),b=Ae(Ie),v=H(Ie,"BUTTON",{class:!0});var at=U(v);m=ye(at,"Magic"),at.forEach(M),Ie.forEach(M),ke.forEach(M),D=Ae(Be),S=H(Be,"DIV",{class:!0});var et=U(S);y=H(et,"INPUT",{type:!0,class:!0}),A=Ae(et),C=H(et,"LABEL",{class:!0});var Et=U(C);P=H(Et,"SPAN",{class:!0});var At=U(P);O=ye(At,"Use Weight Ordering"),At.forEach(M),Et.forEach(M),et.forEach(M),F=Ae(Be),x=H(Be,"DIV",{class:!0});var ct=U(x);z=H(ct,"INPUT",{type:!0,class:!0}),G=Ae(ct),J=H(ct,"LABEL",{class:!0});var ot=U(J);R=H(ot,"SPAN",{class:!0});var Pt=U(R);N=ye(Pt,"Include Zero Weights"),Pt.forEach(M),ot.forEach(M),ct.forEach(M),Be.forEach(M),ge.forEach(M),this.h()},h(){B(r,"class","normal-case font-light text-left cursor-copy bg-slate-900 rounded-t-md rounded-br-md p-4 w-full h-28 active:bg-slate-950 hover:bg-slate-800"),B(h,"class","btn btn-xs"),Ge(h,"btn-active",t[2]===Ar.Single),B(p,"class","btn btn-xs"),Ge(p,"btn-active",t[2]===Ar.Multi),B(v,"class","btn btn-xs"),Ge(v,"btn-active",t[2]===Ar.Magic),B(l,"class","btn-group btn-group-horizontal w-full p-1"),B(s,"class","mx-2 flex"),y.checked=t[1],B(y,"type","checkbox"),B(y,"class","toggle toggle-sm mt-2 mr-2"),B(P,"class","label-text"),B(C,"class","label"),B(S,"class","mx-2 flex"),z.checked=t[0],B(z,"type","checkbox"),B(z,"class","toggle toggle-sm mt-2 mr-2"),B(R,"class","label-text"),B(J,"class","label"),B(x,"class","mx-2 flex"),B(o,"class","w-full rounded-b-md flex pl-2 justify-start bg-slate-900"),B(e,"class","h-48 p-4")},m(he,ge){ue(he,e,ge),k(e,r),~n&&te[n].m(r,null),k(e,a),k(e,o),k(o,s),k(s,l),k(l,h),k(h,c),k(l,f),k(l,p),k(p,g),k(l,b),k(l,v),k(v,m),k(o,D),k(o,S),k(S,y),k(S,A),k(S,C),k(C,P),k(P,O),k(o,F),k(o,x),k(x,z),k(x,G),k(x,J),k(J,R),k(R,N),j=!0,q||(Z=[De(r,"click",t[3]),De(h,"click",t[7]),De(p,"click",t[8]),De(v,"click",t[9]),De(y,"change",t[4]),De(z,"change",t[5])],q=!0)},p(he,[ge]){let _e=n;n=fe(he),n!==_e&&(i&&(Gt(),de(te[_e],1,1,()=>{te[_e]=null}),Kt()),~n?(i=te[n],i||(i=te[n]=X[n](he),i.c()),oe(i,1),i.m(r,null)):i=null),(!j||ge&4)&&Ge(h,"btn-active",he[2]===Ar.Single),(!j||ge&4)&&Ge(p,"btn-active",he[2]===Ar.Multi),(!j||ge&4)&&Ge(v,"btn-active",he[2]===Ar.Magic),(!j||ge&2)&&(y.checked=he[1]),(!j||ge&1)&&(z.checked=he[0])},i(he){j||(oe(i),j=!0)},o(he){de(i),j=!1},d(he){he&&M(e),~n&&te[n].d(),q=!1,Rt(Z)}}}function JC(t,e,r){let n,i,a,o;je(t,Cu,b=>r(0,n=b)),je(t,Ao,b=>r(1,i=b)),je(t,Ia,b=>r(10,a=b)),je(t,Su,b=>r(2,o=b));function s(){navigator.clipboard.writeText(a),Li.shuffle(),uf.add({id:Eo(),prompt:a,date:new Date})}function l(){Tc.update(!i)}function h(){Cu.update(!n)}function c(b){Su.update(b)}return[n,i,o,s,l,h,c,()=>c(Ar.Single),()=>c(Ar.Multi),()=>c(Ar.Magic)]}class Va extends Ze{constructor(e){super(),Je(this,e,JC,ZC,Qe,{})}}function Nd(t){let e,r,n,i,a,o,s,l;return{c(){e=W("div"),r=W("label"),n=W("span"),i=we("Scaling Power"),a=Ee(),o=W("input"),this.h()},l(h){e=H(h,"DIV",{class:!0});var c=U(e);r=H(c,"LABEL",{class:!0});var f=U(r);n=H(f,"SPAN",{class:!0});var p=U(n);i=ye(p,"Scaling Power"),p.forEach(M),f.forEach(M),a=Ae(c),o=H(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(M),this.h()},h(){B(n,"class","label-text"),B(r,"class","label"),B(o,"type","range"),B(o,"min","0.5"),B(o,"max","3"),B(o,"step","0.1"),B(o,"class","range range-xs"),B(e,"class","w-full px-2")},m(h,c){ue(h,e,c),k(e,r),k(r,n),k(n,i),k(e,a),k(e,o),an(o,t[0]),s||(l=[De(o,"change",t[6]),De(o,"input",t[6])],s=!0)},p(h,c){c&1&&an(o,h[0])},d(h){h&&M(e),s=!1,Rt(l)}}}function QC(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b,v,m,D;r=new G3({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let S=t[1]&&Nd(t);return b=new Va({}),{c(){e=W("div"),Le(r.$$.fragment),i=Ee(),a=W("div"),o=W("div"),s=W("label"),l=W("span"),h=we("Exponential Scaling"),c=Ee(),f=W("input"),p=Ee(),S&&S.c(),g=Ee(),Le(b.$$.fragment),this.h()},l(y){e=H(y,"DIV",{class:!0});var A=U(e);Re(r.$$.fragment,A),A.forEach(M),i=Ae(y),a=H(y,"DIV",{class:!0});var C=U(a);o=H(C,"DIV",{class:!0});var P=U(o);s=H(P,"LABEL",{class:!0});var O=U(s);l=H(O,"SPAN",{class:!0});var F=U(l);h=ye(F,"Exponential Scaling"),F.forEach(M),O.forEach(M),c=Ae(P),f=H(P,"INPUT",{type:!0,class:!0}),P.forEach(M),p=Ae(C),S&&S.l(C),C.forEach(M),g=Ae(y),Re(b.$$.fragment,y),this.h()},h(){B(e,"class","w-full h-full"),vi(()=>t[4].call(e)),B(l,"class","label-text"),B(s,"class","label"),B(f,"type","checkbox"),B(f,"class","toggle toggle-xs"),B(o,"class","w-52 px-2"),B(a,"class","px-2 py-4 pb-0 flex")},m(y,A){ue(y,e,A),Ue(r,e,null),n=ta(e,t[4].bind(e)),ue(y,i,A),ue(y,a,A),k(a,o),k(o,s),k(s,l),k(l,h),k(o,c),k(o,f),f.checked=t[1],k(a,p),S&&S.m(a,null),ue(y,g,A),Ue(b,y,A),v=!0,m||(D=De(f,"change",t[5]),m=!0)},p(y,[A]){const C={};A&12&&(C.center=[Math.round(y[2]/2),Math.round(y[3]/2)]),A&12&&(C.radius=Math.round(Math.min(y[2],y[3])/2)-150),r.$set(C),A&2&&(f.checked=y[1]),y[1]?S?S.p(y,A):(S=Nd(y),S.c(),S.m(a,null)):S&&(S.d(1),S=null)},i(y){v||(oe(r.$$.fragment,y),oe(b.$$.fragment,y),v=!0)},o(y){de(r.$$.fragment,y),de(b.$$.fragment,y),v=!1},d(y){y&&M(e),Ve(r),n(),y&&M(i),y&&M(a),S&&S.d(),y&&M(g),Ve(b,y),m=!1,D()}}}function XC(t,e,r){let n;je(t,Ye,f=>r(7,n=f));let i,a,o=n.circleWeightScaling||2,s=Yc(n.circleExponentialScaling)?!0:n.circleExponentialScaling;function l(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function h(){s=this.checked,r(1,s)}function c(){o=Gp(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&Ye.update({...Ye.get(),circleExponentialScaling:s,circleWeightScaling:o})},[o,s,i,a,l,h,c]}class eF extends Ze{constructor(e){super(),Je(this,e,XC,QC,Qe,{})}}function tF(t){let e,r,n,i,a;return{c(){e=pt("line"),this.h()},l(o){e=gt(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),U(e).forEach(M),this.h()},h(){B(e,"x1",r=t[0][0]),B(e,"y1",n=t[0][1]),B(e,"x2",i=t[1][0]),B(e,"y2",a=t[1][1]),B(e,"stroke",t[3]),B(e,"stroke-width",t[2])},m(o,s){ue(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&B(e,"x1",r),s&1&&n!==(n=o[0][1])&&B(e,"y1",n),s&2&&i!==(i=o[1][0])&&B(e,"x2",i),s&2&&a!==(a=o[1][1])&&B(e,"y2",a),s&8&&B(e,"stroke",o[3]),s&4&&B(e,"stroke-width",o[2])},i:Oe,o:Oe,d(o){o&&M(e)}}}function rF(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class nF extends Ze{constructor(e){super(),Je(this,e,rF,tF,Qe,{p1:0,p2:1,stroke:2,color:3})}}function Ld(t,e,r){const n=t.slice();return n[29]=e[r][0],n[30]=e[r][1],n}function Rd(t){let e,r,n;e=new ef({props:{xy:t[0],radius:t[1]}});let i=Object.entries(t[5].weightedPrompts),a=[];for(let s=0;s<i.length;s+=1)a[s]=Ud(Ld(t,i,s));const o=s=>de(a[s],1,1,()=>{a[s]=null});return{c(){Le(e.$$.fragment);for(let s=0;s<a.length;s+=1)a[s].c();r=yt()},l(s){Re(e.$$.fragment,s);for(let l=0;l<a.length;l+=1)a[l].l(s);r=yt()},m(s,l){Ue(e,s,l);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(s,l);ue(s,r,l),n=!0},p(s,l){const h={};if(l[0]&1&&(h.xy=s[0]),l[0]&2&&(h.radius=s[1]),e.$set(h),l[0]&6015){i=Object.entries(s[5].weightedPrompts);let c;for(c=0;c<i.length;c+=1){const f=Ld(s,i,c);a[c]?(a[c].p(f,l),oe(a[c],1)):(a[c]=Ud(f),a[c].c(),oe(a[c],1),a[c].m(r.parentNode,r))}for(Gt(),c=i.length;c<a.length;c+=1)o(c);Kt()}},i(s){if(!n){oe(e.$$.fragment,s);for(let l=0;l<i.length;l+=1)oe(a[l]);n=!0}},o(s){de(e.$$.fragment,s),a=a.filter(Boolean);for(let l=0;l<a.length;l+=1)de(a[l]);n=!1},d(s){Ve(e,s),Pu(a,s),s&&M(r)}}}function Ud(t){let e,r,n,i,a,o,s,l,h;e=new nF({props:{p1:t[0],p2:t[6][t[29]].xy}});function c(...b){return t[15](t[29],...b)}function f(...b){return t[16](t[29],...b)}function p(...b){return t[17](t[29],...b)}function g(){return t[18](t[29])}return a=new Ua({props:{xy:t[6][t[29]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:g}}),o=new wo({props:{xy:t[9](t[6][t[29]].textXY,zr(t[3],$t(t[30].text).length,t[4])),color:`rgba(255,255,255,${Jr(t[6][t[29]].unitWeight)}`,wh:zr(t[3],$t(t[30].text).length,t[4]),fontSize:t[4],text:$t(t[30].text)}}),{c(){Le(e.$$.fragment),r=pt("path"),Le(a.$$.fragment),Le(o.$$.fragment),this.h()},l(b){Re(e.$$.fragment,b),r=gt(b,"path",{d:!0,fill:!0}),U(r).forEach(M),Re(a.$$.fragment,b),Re(o.$$.fragment,b),this.h()},h(){B(r,"d",n=Vd(t[0],t[1],t[6][t[29]].angle,t[6][t[29]].angle+t[6][t[29]].angleDiff)),B(r,"fill",i=`rgba(26,47,91,${Jr(t[6][t[29]].unitWeight)/4}`)},m(b,v){Ue(e,b,v),ue(b,r,v),Ue(a,b,v),Ue(o,b,v),s=!0,l||(h=[De(r,"mousewheel",c),De(r,"touchstart",f),De(r,"mousedown",p)],l=!0)},p(b,v){t=b;const m={};v[0]&1&&(m.p1=t[0]),v[0]&96&&(m.p2=t[6][t[29]].xy),e.$set(m),(!s||v[0]&99&&n!==(n=Vd(t[0],t[1],t[6][t[29]].angle,t[6][t[29]].angle+t[6][t[29]].angleDiff)))&&B(r,"d",n),(!s||v[0]&96&&i!==(i=`rgba(26,47,91,${Jr(t[6][t[29]].unitWeight)/4}`))&&B(r,"fill",i);const D={};v[0]&96&&(D.xy=t[6][t[29]].xy),v[0]&4&&(D.radius=t[2]),v[0]&32&&(D.handleMouseDown=g),a.$set(D);const S={};v[0]&120&&(S.xy=t[9](t[6][t[29]].textXY,zr(t[3],$t(t[30].text).length,t[4]))),v[0]&96&&(S.color=`rgba(255,255,255,${Jr(t[6][t[29]].unitWeight)}`),v[0]&56&&(S.wh=zr(t[3],$t(t[30].text).length,t[4])),v[0]&16&&(S.fontSize=t[4]),v[0]&32&&(S.text=$t(t[30].text)),o.$set(S)},i(b){s||(oe(e.$$.fragment,b),oe(a.$$.fragment,b),oe(o.$$.fragment,b),s=!0)},o(b){de(e.$$.fragment,b),de(a.$$.fragment,b),de(o.$$.fragment,b),s=!1},d(b){Ve(e,b),b&&M(r),Ve(a,b),Ve(o,b),l=!1,Rt(h)}}}function iF(t){let e,r,n,i,a,o=t[6]&&t[5].weightedPrompts&&Rd(t);const s=t[14].default,l=xa(s,t,t[13],null);return{c(){e=pt("svg"),o&&o.c(),r=Ee(),l&&l.c(),this.h()},l(h){e=gt(h,"svg",{id:!0,class:!0});var c=U(e);o&&o.l(c),c.forEach(M),r=Ae(h),l&&l.l(h),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(h,c){ue(h,e,c),o&&o.m(e,null),ue(h,r,c),l&&l.m(h,c),n=!0,i||(a=[De(e,"mousemove",t[11]),De(e,"touchmove",t[11]),De(e,"mouseup",t[7]),De(e,"touchend",t[7])],i=!0)},p(h,c){h[6]&&h[5].weightedPrompts?o?(o.p(h,c),c[0]&96&&oe(o,1)):(o=Rd(h),o.c(),oe(o,1),o.m(e,null)):o&&(Gt(),de(o,1,1,()=>{o=null}),Kt()),l&&l.p&&(!n||c[0]&8192)&&Na(l,s,h,h[13],n?Ra(s,h[13],c,null):La(h[13]),null)},i(h){n||(oe(o),oe(l,h),n=!0)},o(h){de(o),de(l,h),n=!1},d(h){h&&M(e),o&&o.d(),h&&M(r),l&&l.d(h),i=!1,Rt(a)}}}function aF(t,e){if(t.length!==e.length)return!1;const r=t.length;let n=-1;for(let i=0;i<r;i++)if(e[i]===t[0]){n=i;break}if(n===-1)return!1;for(let i=0;i<r;i++)if(t[i]!==e[(i+n)%r])return!1;return!0}function Vd(t,e,r,n){const i=t[0]+e*Math.cos(r*Math.PI/180),a=t[1]+e*Math.sin(r*Math.PI/180),o=t[0]+e*Math.cos(n*Math.PI/180),s=t[1]+e*Math.sin(n*Math.PI/180),l=n-r<=180?"0":"1";return`M${t[0]},${t[1]} L${i},${a} A${e},${e} 0 ${l} 1 ${o},${s} Z`}function uF(t,e,r){let n,i;je(t,Ye,j=>r(5,i=j));let{$$slots:a={},$$scope:o}=e,{center:s=[450,450]}=e,{radius:l=250}=e,{pointRadius:h=10}=e,{textWidth:c=150}=e,{fontSize:f=13}=e,p=[0,0],g=null,b={},v=null,m;function D(j){v=null,m=null,g=null,b={}}function S(j){v=j}function y(j,q){let Z=Rn(j,s,l)[0]-180;Z<0&&(Z+=360);const X=tf(na(q),Z);return xr(j,X)}function A(j,q){return j?Object.entries(j).reduce((Z,[X,te],fe)=>{const he=Z[X]||fe*(360/Object.keys(j).length)-90;return Z[X]=Vr(he),Z},q):null}function C(j,q){m=q}function P(j){const q=m,Z={...i.pieAngles},X=Object.entries(Z).sort((qe,it)=>Vr(qe[1])-Vr(it[1])).map(qe=>qe[0]),te=X.indexOf(q),fe=te+1===X.length?0:te+1,he=X[fe];b[q]||(b[q]=Z[q]),b[he]||(b[he]=Z[he]);const _e=Rn(j,s,l)[0]-g,Be={...Z};Be[q]=Vr(_e+b[q]),Be[he]=Vr(_e+b[he]);const ke=Object.entries(Be).sort((qe,it)=>Vr(qe[1])-Vr(it[1])).map(qe=>qe[0]);aF(X,ke)&&r(6,n=z(i.weightedPrompts,s,l,Be))}function O(j){const q={...i.weightedPrompts[v]},Z=Au(j,s,l),X=Vr(Rn(Z,s,l)[0]),te={...i.pieAngles};te[q.id]=X;const fe={...i.weightedPrompts};fe[v]=q,r(6,n=z(fe,s,l,te))}function F(j){j.preventDefault(),p=Ti(j),v?O(p):m?P(p):g=Rn(p,s,l)[0]}function x(j,q){j.preventDefault();const Z={...i.pieAngles},X=Object.entries(Z).sort((ge,_e)=>Vr(ge[1])-Vr(_e[1])).map(ge=>ge[0]),te=X.indexOf(q),fe=te+1===X.length?0:te+1,he=X[fe];Z[q]=Vr(Z[q]-j.deltaY/100),Z[he]=Vr(Z[he]+j.deltaY/100),r(6,n=z(i.weightedPrompts,s,l,Z))}function z(j,q,Z,X){if(!j||!q||!Z)return null;const te=Object.entries(j).sort((Be,ke)=>Vr(X[Be[0]])-Vr(X[ke[0]])),fe=te.map((Be,ke)=>{const Ie=ke+1===te.length?0:ke+1,qe=X[te[Ie][0]]-X[te[ke][0]];return qe<0?[Be[0],360+qe]:[Be[0],qe]}),he=Math.max(...fe.map(Be=>Be[1])),ge=fe.reduce((Be,[ke,Ie])=>{({...j[ke]});const qe=X[ke],it=Nr(q,[qe,1],Z),at=Nr(q,[qe+.5*Ie,1],Z),et=Ie/he;return Be[ke]={xy:it,textXY:at,angle:qe,angleDiff:Ie,unitWeight:et},Be},{}),_e={...j};return Object.entries(ge).forEach(([Be,ke])=>{_e[Be].pieWeight=ke.unitWeight}),Ye.update({...i,weightedPrompts:_e,pieAngles:X}),ge}const G=(j,q)=>x(q,j),J=(j,q)=>C(q,j),R=(j,q)=>C(q,j),N=j=>S(j);return t.$$set=j=>{"center"in j&&r(0,s=j.center),"radius"in j&&r(1,l=j.radius),"pointRadius"in j&&r(2,h=j.pointRadius),"textWidth"in j&&r(3,c=j.textWidth),"fontSize"in j&&r(4,f=j.fontSize),"$$scope"in j&&r(13,o=j.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&32&&Object.keys(i.pieAngles||{}).length!==Object.keys(i.weightedPrompts).length&&Ye.update({...i,pieAngles:A(i.weightedPrompts,{})}),t.$$.dirty[0]&35&&r(6,n=z(i.weightedPrompts,s,l,i.pieAngles||A(i.weightedPrompts,{})))},[s,l,h,c,f,i,n,D,S,y,C,F,x,o,a,G,J,R,N]}class sF extends Ze{constructor(e){super(),Je(this,e,uF,iF,Qe,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4},null,[-1,-1])}}function oF(t){let e,r,n,i,a,o;return r=new sF({props:{center:[Math.round(t[0]/2),Math.round(t[1]/2)],radius:Math.round(Math.min(t[0],t[1])/2)-150}}),a=new Va({}),{c(){e=W("div"),Le(r.$$.fragment),i=Ee(),Le(a.$$.fragment),this.h()},l(s){e=H(s,"DIV",{class:!0});var l=U(e);Re(r.$$.fragment,l),l.forEach(M),i=Ae(s),Re(a.$$.fragment,s),this.h()},h(){B(e,"class","w-full h-full"),vi(()=>t[2].call(e))},m(s,l){ue(s,e,l),Ue(r,e,null),n=ta(e,t[2].bind(e)),ue(s,i,l),Ue(a,s,l),o=!0},p(s,[l]){const h={};l&3&&(h.center=[Math.round(s[0]/2),Math.round(s[1]/2)]),l&3&&(h.radius=Math.round(Math.min(s[0],s[1])/2)-150),r.$set(h)},i(s){o||(oe(r.$$.fragment,s),oe(a.$$.fragment,s),o=!0)},o(s){de(r.$$.fragment,s),de(a.$$.fragment,s),o=!1},d(s){s&&M(e),Ve(r),n(),s&&M(i),Ve(a,s)}}}function lF(t,e,r){let n,i;function a(){n=this.clientWidth,i=this.clientHeight,r(0,n),r(1,i)}return[n,i,a]}class cF extends Ze{constructor(e){super(),Je(this,e,lF,oF,Qe,{})}}const{window:fF}=pw;function jd(t,e,r){const n=t.slice();return n[26]=e[r][0],n[27]=e[r][1],n}function zd(t){let e=[],r=new Map,n,i,a,o=Object.entries(t[1]);const s=l=>l[26];for(let l=0;l<o.length;l+=1){let h=jd(t,o,l),c=s(h);r.set(c,e[l]=Wd(c,h))}return i=new Ua({props:{xy:t[17](t[0],t[6],t[10],t[9],!0),radius:t[3],color:"rgba(136,157,191, 1)",handleMouseDown:t[22]}}),{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=yt(),Le(i.$$.fragment)},l(l){for(let h=0;h<e.length;h+=1)e[h].l(l);n=yt(),Re(i.$$.fragment,l)},m(l,h){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(l,h);ue(l,n,h),Ue(i,l,h),a=!0},p(l,h){h&132983&&(o=Object.entries(l[1]),Gt(),e=jn(e,h,s,1,l,o,r,n.parentNode,gw,Wd,n,jd),Kt());const c={};h&1601&&(c.xy=l[17](l[0],l[6],l[10],l[9],!0)),h&8&&(c.radius=l[3]),h&128&&(c.handleMouseDown=l[22]),i.$set(c)},i(l){if(!a){for(let h=0;h<o.length;h+=1)oe(e[h]);oe(i.$$.fragment,l),a=!0}},o(l){for(let h=0;h<e.length;h+=1)de(e[h]);de(i.$$.fragment,l),a=!1},d(l){for(let h=0;h<e.length;h+=1)e[h].d(l);l&&M(n),Ve(i,l)}}}function qd(t){let e,r;return e=new k1({props:{p1:t[17](t[27].xy,t[6],t[10],t[9],!0),p2:t[17](t[0],t[6],t[10],t[9],!0)}}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},p(n,i){const a={};i&1602&&(a.p1=n[17](n[27].xy,n[6],n[10],n[9],!0)),i&1601&&(a.p2=n[17](n[0],n[6],n[10],n[9],!0)),e.$set(a)},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function Wd(t,e){let r,n,i,a,o,s=e[27].connected&&qd(e);return i=new Ua({props:{xy:e[17](e[27].xy,e[6],e[10],e[9],!0),radius:e[2],color:"rgba(136,157,191, 1)"}}),a=new wo({props:{xy:[(e[27].xy[0]*e[8][0]+e[6][0])*e[9]+e[10][0]-zr(e[4],$t(e[27].text).length,e[5])[0]/2,(e[27].xy[1]*e[8][1]+e[6][1])*e[9]+e[10][1]+e[2]],color:`rgba(255,255,255,${e[27].opacity}`,wh:zr(e[4],$t(e[27].text).length,e[5]),fontSize:e[5],text:$t(e[27].text)}}),{key:t,first:null,c(){r=yt(),s&&s.c(),n=yt(),Le(i.$$.fragment),Le(a.$$.fragment),this.h()},l(l){r=yt(),s&&s.l(l),n=yt(),Re(i.$$.fragment,l),Re(a.$$.fragment,l),this.h()},h(){this.first=r},m(l,h){ue(l,r,h),s&&s.m(l,h),ue(l,n,h),Ue(i,l,h),Ue(a,l,h),o=!0},p(l,h){e=l,e[27].connected?s?(s.p(e,h),h&2&&oe(s,1)):(s=qd(e),s.c(),oe(s,1),s.m(n.parentNode,n)):s&&(Gt(),de(s,1,1,()=>{s=null}),Kt());const c={};h&1602&&(c.xy=e[17](e[27].xy,e[6],e[10],e[9],!0)),h&4&&(c.radius=e[2]),i.$set(c);const f={};h&1910&&(f.xy=[(e[27].xy[0]*e[8][0]+e[6][0])*e[9]+e[10][0]-zr(e[4],$t(e[27].text).length,e[5])[0]/2,(e[27].xy[1]*e[8][1]+e[6][1])*e[9]+e[10][1]+e[2]]),h&2&&(f.color=`rgba(255,255,255,${e[27].opacity}`),h&50&&(f.wh=zr(e[4],$t(e[27].text).length,e[5])),h&32&&(f.fontSize=e[5]),h&2&&(f.text=$t(e[27].text)),a.$set(f)},i(l){o||(oe(s),oe(i.$$.fragment,l),oe(a.$$.fragment,l),o=!0)},o(l){de(s),de(i.$$.fragment,l),de(a.$$.fragment,l),o=!1},d(l){l&&M(r),s&&s.d(l),l&&M(n),Ve(i,l),Ve(a,l)}}}function hF(t){let e,r,n=Object.entries(t[1]).length>0,i,a,o,s=n&&zd(t);return{c(){e=W("div"),r=pt("svg"),s&&s.c(),this.h()},l(l){e=H(l,"DIV",{class:!0});var h=U(e);r=gt(h,"svg",{id:!0,class:!0});var c=U(r);s&&s.l(c),c.forEach(M),h.forEach(M),this.h()},h(){B(r,"id","svg"),B(r,"class","w-full h-full outline-none"),B(e,"class","w-full h-full")},m(l,h){ue(l,e,h),k(e,r),s&&s.m(r,null),i=!0,a||(o=[De(fF,"keydown",t[16]),De(r,"mousewheel",t[15]),De(r,"mousemove",t[13]),De(r,"touchmove",t[13]),De(r,"mouseup",t[14]),De(r,"touchend",t[14]),De(r,"dblclick",t[12]),De(r,"focusin",t[23]),De(r,"focusout",t[24])],a=!0)},p(l,[h]){h&2&&(n=Object.entries(l[1]).length>0),n?s?(s.p(l,h),h&2&&oe(s,1)):(s=zd(l),s.c(),oe(s,1),s.m(r,null)):s&&(Gt(),de(s,1,1,()=>{s=null}),Kt())},i(l){i||(oe(s),i=!0)},o(l){de(s),i=!1},d(l){l&&M(e),s&&s.d(),a=!1,Rt(o)}}}function dF(t){var e=!1;return t.deltaY?t.deltaY===t.deltaY*-3&&(e=!0):t.deltaMode===0&&(e=!0),e}function pF(t,e,r){let{onMarkerMove:n=R=>{}}=e,{dataPoints:i}=e,{center:a=[100,100]}=e,{dimensions:o=[100,100]}=e,{pointRadius:s=4}=e,{markerRadius:l=10}=e,{textWidth:h=150}=e,{fontSize:c=12}=e,{innerPad:f=100}=e,{markerLocation:p=[.5,.5]}=e,g=!1,b=o,v=[0,0],m=1,D=[0,0],S=!0;function y(R){const N=Ti(R);r(0,p=F(jr(Es(N,D),1/m))),n(p)}function A(R){if(g){const N=Ti(R);r(0,p=F(jr(Es(N,D),1/m))),n(p)}}function C(R){r(7,g=!1)}function P(R){R.preventDefault();const N=dF(R),j=Ti(R),q=jr(Es(j,D),1/m);r(9,m=Math.min(Math.max(m+(N?-1:1)*R.deltaY*-.01,.5),20)),r(10,D=[j[0]-q[0]*m,j[1]-q[1]*m])}function O(R){S&&(R=R||window.event,R.key==="ArrowUp"||R.key==="w"?r(10,D[1]+=10,D):R.key=="ArrowDown"||R.key=="s"?r(10,D[1]-=10,D):R.key=="ArrowLeft"||R.key=="a"?r(10,D[0]+=10,D):(R.key=="ArrowRight"||R.key=="d")&&r(10,D[0]-=10,D))}function F(R){let N=Es(R,v);return[N[0]/b[0],N[1]/b[1]]}function x(R,N,j,q,Z=!1){let X=R;return Z&&(X=xr(N,[R[0]*b[0],R[1]*b[1]])),xr(jr(X,q),j)}const z=()=>r(7,g=!0),G=()=>r(11,S=!0),J=()=>r(11,S=!1);return t.$$set=R=>{"onMarkerMove"in R&&r(18,n=R.onMarkerMove),"dataPoints"in R&&r(1,i=R.dataPoints),"center"in R&&r(19,a=R.center),"dimensions"in R&&r(20,o=R.dimensions),"pointRadius"in R&&r(2,s=R.pointRadius),"markerRadius"in R&&r(3,l=R.markerRadius),"textWidth"in R&&r(4,h=R.textWidth),"fontSize"in R&&r(5,c=R.fontSize),"innerPad"in R&&r(21,f=R.innerPad),"markerLocation"in R&&r(0,p=R.markerLocation)},t.$$.update=()=>{if(t.$$.dirty&3145792){const R=Math.min(...o),N=o[0]===R,j=o[1]===R;r(6,v=[Math.max(N?0:(o[0]-R)/2,f),Math.max(j?0:(o[1]-R)/2,f)]),r(8,b=[o[0]-2*v[0],o[1]-2*v[1]])}},[p,i,s,l,h,c,v,g,b,m,D,S,y,A,C,P,O,x,n,a,o,f,z,G,J]}class df extends Ze{constructor(e){super(),Je(this,e,pF,hF,Qe,{onMarkerMove:18,dataPoints:1,center:19,dimensions:20,pointRadius:2,markerRadius:3,textWidth:4,fontSize:5,innerPad:21,markerLocation:0})}}function Hd(t){let e,r,n,i,a,o,s,l;return{c(){e=W("div"),r=W("label"),n=W("span"),i=we("Scaling Power"),a=Ee(),o=W("input"),this.h()},l(h){e=H(h,"DIV",{class:!0});var c=U(e);r=H(c,"LABEL",{class:!0});var f=U(r);n=H(f,"SPAN",{class:!0});var p=U(n);i=ye(p,"Scaling Power"),p.forEach(M),f.forEach(M),a=Ae(c),o=H(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(M),this.h()},h(){B(n,"class","label-text"),B(r,"class","label"),o.value=t[2],B(o,"type","range"),B(o,"min","0.5"),B(o,"max","3"),B(o,"step","0.1"),B(o,"class","range range-sm"),B(e,"class","w-full px-2")},m(h,c){ue(h,e,c),k(e,r),k(r,n),k(n,i),k(e,a),k(e,o),s||(l=De(o,"change",t[11]),s=!0)},p(h,c){c&4&&(o.value=h[2])},d(h){h&&M(e),s=!1,l()}}}function $d(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b,v,m,D,S,y,A,C,P,O;return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=we("Clusters"),o=Ee(),s=W("div"),l=W("button"),h=we("0"),c=Ee(),f=W("button"),p=we("2"),g=Ee(),b=W("button"),v=we("4"),m=Ee(),D=W("button"),S=we("6"),y=Ee(),A=W("button"),C=we("8"),this.h()},l(F){e=H(F,"DIV",{class:!0});var x=U(e);r=H(x,"DIV",{class:!0});var z=U(r);n=H(z,"LABEL",{class:!0});var G=U(n);i=H(G,"SPAN",{class:!0});var J=U(i);a=ye(J,"Clusters"),J.forEach(M),G.forEach(M),o=Ae(z),s=H(z,"DIV",{class:!0});var R=U(s);l=H(R,"BUTTON",{class:!0});var N=U(l);h=ye(N,"0"),N.forEach(M),c=Ae(R),f=H(R,"BUTTON",{class:!0});var j=U(f);p=ye(j,"2"),j.forEach(M),g=Ae(R),b=H(R,"BUTTON",{class:!0});var q=U(b);v=ye(q,"4"),q.forEach(M),m=Ae(R),D=H(R,"BUTTON",{class:!0});var Z=U(D);S=ye(Z,"6"),Z.forEach(M),y=Ae(R),A=H(R,"BUTTON",{class:!0});var X=U(A);C=ye(X,"8"),X.forEach(M),R.forEach(M),z.forEach(M),x.forEach(M),this.h()},h(){B(i,"class","label-text"),B(n,"class","label pb-1 m-0"),B(l,"class","btn btn-xs"),Ge(l,"btn-active",t[7]===0),B(f,"class","btn btn-xs"),Ge(f,"btn-active",t[7]===2),Ge(f,"btn-disabled",t[9]<2),B(b,"class","btn btn-xs"),Ge(b,"btn-active",t[7]===4),Ge(b,"btn-disabled",t[9]<4),B(D,"class","btn btn-xs"),Ge(D,"btn-active",t[7]===6),Ge(D,"btn-disabled",t[9]<6),B(A,"class","btn btn-xs"),Ge(A,"btn-active",t[7]===8),Ge(A,"btn-disabled",t[9]<8),B(s,"class","btn-group btn-group-horizontal p-0"),B(r,"class",""),B(e,"class","")},m(F,x){ue(F,e,x),k(e,r),k(r,n),k(n,i),k(i,a),k(r,o),k(r,s),k(s,l),k(l,h),k(s,c),k(s,f),k(f,p),k(s,g),k(s,b),k(b,v),k(s,m),k(s,D),k(D,S),k(s,y),k(s,A),k(A,C),P||(O=[De(l,"click",t[13]),De(f,"click",t[14]),De(b,"click",t[15]),De(D,"click",t[16]),De(A,"click",t[17])],P=!0)},p(F,x){x&128&&Ge(l,"btn-active",F[7]===0),x&128&&Ge(f,"btn-active",F[7]===2),x&512&&Ge(f,"btn-disabled",F[9]<2),x&128&&Ge(b,"btn-active",F[7]===4),x&512&&Ge(b,"btn-disabled",F[9]<4),x&128&&Ge(D,"btn-active",F[7]===6),x&512&&Ge(D,"btn-disabled",F[9]<6),x&128&&Ge(A,"btn-active",F[7]===8),x&512&&Ge(A,"btn-disabled",F[9]<8)},d(F){F&&M(e),P=!1,Rt(O)}}}function gF(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b,v,m,D,S,y,A,C,P,O,F,x,z=t[0]&&Hd(t),G=t[9]>0&&$d(t);return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=we("Exponential Scaling"),o=Ee(),s=W("input"),l=Ee(),z&&z.c(),h=Ee(),c=W("div"),f=W("label"),p=W("span"),g=we(t[4]),b=we("/"),v=we(t[5]),m=we(" Prompts"),D=Ee(),S=W("input"),y=Ee(),G&&G.c(),A=Ee(),C=W("div"),P=W("button"),O=we("Shuffle"),this.h()},l(J){e=H(J,"DIV",{class:!0});var R=U(e);r=H(R,"DIV",{class:!0});var N=U(r);n=H(N,"LABEL",{class:!0});var j=U(n);i=H(j,"SPAN",{class:!0});var q=U(i);a=ye(q,"Exponential Scaling"),q.forEach(M),j.forEach(M),o=Ae(N),s=H(N,"INPUT",{type:!0,class:!0}),N.forEach(M),l=Ae(R),z&&z.l(R),h=Ae(R),c=H(R,"DIV",{class:!0});var Z=U(c);f=H(Z,"LABEL",{class:!0});var X=U(f);p=H(X,"SPAN",{class:!0});var te=U(p);g=ye(te,t[4]),b=ye(te,"/"),v=ye(te,t[5]),m=ye(te," Prompts"),te.forEach(M),X.forEach(M),D=Ae(Z),S=H(Z,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Z.forEach(M),y=Ae(R),G&&G.l(R),A=Ae(R),C=H(R,"DIV",{class:!0});var fe=U(C);P=H(fe,"BUTTON",{class:!0});var he=U(P);O=ye(he,"Shuffle"),he.forEach(M),fe.forEach(M),R.forEach(M),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),B(s,"type","checkbox"),B(s,"class","toggle toggle-sm"),s.checked=t[0],B(r,"class","min-w-max px-2"),B(p,"class","label-text"),B(f,"class","label"),S.value=t[4],B(S,"type","range"),B(S,"min","1"),B(S,"max",t[5]),B(S,"step","1"),B(S,"class","range range-sm"),B(c,"class","w-full px-2"),B(P,"class","btn btn-xs btn-primary"),B(C,"class","w-32 px-2 pb-1 flex flex-col justify-end"),B(e,"class","px-2 py-4 pb-0 flex")},m(J,R){ue(J,e,R),k(e,r),k(r,n),k(n,i),k(i,a),k(r,o),k(r,s),k(e,l),z&&z.m(e,null),k(e,h),k(e,c),k(c,f),k(f,p),k(p,g),k(p,b),k(p,v),k(p,m),k(c,D),k(c,S),k(e,y),G&&G.m(e,null),k(e,A),k(e,C),k(C,P),k(P,O),F||(x=[De(s,"change",function(){Ma(t[1])&&t[1].apply(this,arguments)}),De(S,"change",t[12]),De(P,"click",function(){Ma(t[10])&&t[10].apply(this,arguments)})],F=!0)},p(J,[R]){t=J,R&1&&(s.checked=t[0]),t[0]?z?z.p(t,R):(z=Hd(t),z.c(),z.m(e,h)):z&&(z.d(1),z=null),R&16&&zt(g,t[4]),R&32&&zt(v,t[5]),R&16&&(S.value=t[4]),R&32&&B(S,"max",t[5]),t[9]>0?G?G.p(t,R):(G=$d(t),G.c(),G.m(e,A)):G&&(G.d(1),G=null)},i:Oe,o:Oe,d(J){J&&M(e),z&&z.d(),G&&G.d(),F=!1,Rt(x)}}}function vF(t,e,r){let{useExponentialScaling:n=!1}=e,{toggleExponentialScaling:i=()=>{}}=e,{exponentialScaling:a=2}=e,{setExponentialScaling:o=()=>{}}=e,{connectionLimit:s=1}=e,{maxConnectionLimit:l=1}=e,{setConnectionLimit:h=()=>{}}=e,{clusterCount:c=0}=e,{setClusterCount:f=()=>{}}=e,{maxClusterCount:p=0}=e,{onShuffle:g=()=>{}}=e;const b=C=>o(parseFloat(C.target.value)),v=C=>h(parseInt(C.target.value)),m=()=>f(0),D=()=>f(2),S=()=>f(4),y=()=>f(6),A=()=>f(8);return t.$$set=C=>{"useExponentialScaling"in C&&r(0,n=C.useExponentialScaling),"toggleExponentialScaling"in C&&r(1,i=C.toggleExponentialScaling),"exponentialScaling"in C&&r(2,a=C.exponentialScaling),"setExponentialScaling"in C&&r(3,o=C.setExponentialScaling),"connectionLimit"in C&&r(4,s=C.connectionLimit),"maxConnectionLimit"in C&&r(5,l=C.maxConnectionLimit),"setConnectionLimit"in C&&r(6,h=C.setConnectionLimit),"clusterCount"in C&&r(7,c=C.clusterCount),"setClusterCount"in C&&r(8,f=C.setClusterCount),"maxClusterCount"in C&&r(9,p=C.maxClusterCount),"onShuffle"in C&&r(10,g=C.onShuffle)},[n,i,a,o,s,l,h,c,f,p,g,b,v,m,D,S,y,A]}class pf extends Ze{constructor(e){super(),Je(this,e,vF,gF,Qe,{useExponentialScaling:0,toggleExponentialScaling:1,exponentialScaling:2,setExponentialScaling:3,connectionLimit:4,maxConnectionLimit:5,setConnectionLimit:6,clusterCount:7,setClusterCount:8,maxClusterCount:9,onShuffle:10})}}const Zs=Yt({});var Vc={},mF={get exports(){return Vc},set exports(t){Vc=t}},Js={},_F={get exports(){return Js},set exports(t){Js=t}},Gd;function bF(){return Gd||(Gd=1,function(t){function e(r,n,i,a){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,i,a)}e.prototype.run=function(r,n,i,a){this._init(r,n,i,a);for(var o=0;o<this._datasetLength;o++)if(this._visited[o]!==1){this._visited[o]=1;var s=this._regionQuery(o);if(s.length<this.minPts)this.noise.push(o);else{var l=this.clusters.length;this.clusters.push([]),this._addToCluster(o,l),this._expandCluster(l,s)}}return this.clusters},e.prototype._init=function(r,n,i,a){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),i&&(this.minPts=i),a&&(this.distance=a)},e.prototype._expandCluster=function(r,n){for(var i=0;i<n.length;i++){var a=n[i];if(this._visited[a]!==1){this._visited[a]=1;var o=this._regionQuery(a);o.length>=this.minPts&&(n=this._mergeArrays(n,o))}this._assigned[a]!==1&&this._addToCluster(a,r)}},e.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1},e.prototype._regionQuery=function(r){for(var n=[],i=0;i<this._datasetLength;i++){var a=this.distance(this.dataset[r],this.dataset[i]);a<this.epsilon&&n.push(i)}return n},e.prototype._mergeArrays=function(r,n){for(var i=n.length,a=0;a<i;a++){var o=n[a];r.indexOf(o)<0&&r.push(o)}return r},e.prototype._euclideanDistance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;)i+=(r[a]-n[a])*(r[a]-n[a]);return Math.sqrt(i)},t.exports&&(t.exports=e)}(_F)),Js}var Qs={},DF={get exports(){return Qs},set exports(t){Qs=t}},Kd;function wF(){return Kd||(Kd=1,function(t){function e(r,n,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,i)}e.prototype.init=function(r,n,i){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof i<"u"&&(this.distance=i)},e.prototype.run=function(r,n){this.init(r,n);for(var i=this.dataset.length,a=0;a<this.k;a++)this.centroids[a]=this.randomCentroid();for(var o=!0;o;){o=this.assign();for(var s=0;s<this.k;s++){for(var l=new Array(p),h=0,c=0;c<p;c++)l[c]=0;for(var f=0;f<i;f++){var p=this.dataset[f].length;if(s===this.assignments[f]){for(var c=0;c<p;c++)l[c]+=this.dataset[f][c];h++}}if(h>0){for(var c=0;c<p;c++)l[c]/=h;this.centroids[s]=l}else this.centroids[s]=this.randomCentroid(),o=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,i;do i=Math.round(Math.random()*r),n=this.dataset[i];while(this.centroids.indexOf(n)>=0);return n},e.prototype.assign=function(){for(var r=!1,n=this.dataset.length,i,a=0;a<n;a++)i=this.argmin(this.dataset[a],this.centroids,this.distance),i!=this.assignments[a]&&(this.assignments[a]=i,r=!0);return r},e.prototype.getClusters=function(){for(var r=new Array(this.k),n,i=0;i<this.assignments.length;i++)n=this.assignments[i],typeof r[n]>"u"&&(r[n]=[]),r[n].push(i);return r},e.prototype.argmin=function(r,n,i){for(var a=Number.MAX_VALUE,o=0,s=n.length,l,h=0;h<s;h++)l=i(r,n[h]),l<a&&(a=l,o=h);return o},e.prototype.distance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;){var o=r[a]-n[a];i+=o*o}return Math.sqrt(i)},t.exports&&(t.exports=e)}(DF)),Qs}var Xs={},yF={get exports(){return Xs},set exports(t){Xs=t}},eo={},EF={get exports(){return eo},set exports(t){eo=t}},Yd;function Y1(){return Yd||(Yd=1,function(t){function e(r,n,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,i)}e.prototype.insert=function(r,n){for(var i=this._queue.length,a=i;a--;){var o=this._priorities[a];this._sorting==="desc"?n>o&&(i=a):n<o&&(i=a)}this._insertAt(r,n,i)},e.prototype.remove=function(r){for(var n=this._queue.length;n--;){var i=this._queue[n];if(r===i){this._queue.splice(n,1),this._priorities.splice(n,1);break}}},e.prototype.forEach=function(r){this._queue.forEach(r)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(r){return this._priorities[r]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,i=this._queue.length;n<i;n++)r.push([this._queue[n],this._priorities[n]]);return r},e.prototype._init=function(r,n,i){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var a=0;a<r.length;a++)this.insert(r[a],n[a])}i&&(this._sorting=i)},e.prototype._insertAt=function(r,n,i){this._queue.length===i?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(i,0,r),this._priorities.splice(i,0,n))},t.exports&&(t.exports=e)}(EF)),eo}var Zd;function AF(){return Zd||(Zd=1,function(t){if(t.exports)var e=Y1();function r(n,i,a,o){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,i,a,o)}r.prototype.run=function(n,i,a,o){this._init(n,i,a,o);for(var s=0,l=this.dataset.length;s<l;s++)if(this._processed[s]!==1){this._processed[s]=1,this.clusters.push([s]);var h=this.clusters.length-1;this._orderedList.push(s);var c=new e(null,null,"asc"),f=this._regionQuery(s);this._distanceToCore(s)!==void 0&&(this._updateQueue(s,f,c),this._expandCluster(h,c))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var n=[],i=0,a=this._orderedList.length;i<a;i++){var o=this._orderedList[i],s=this._reachability[o];n.push([o,s])}return n},r.prototype._init=function(n,i,a,o){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}i&&(this.epsilon=i),a&&(this.minPts=a),o&&(this.distance=o)},r.prototype._updateQueue=function(n,i,a){var o=this;this._coreDistance=this._distanceToCore(n),i.forEach(function(s){if(o._processed[s]===void 0){var l=o.distance(o.dataset[n],o.dataset[s]),h=Math.max(o._coreDistance,l);o._reachability[s]===void 0?(o._reachability[s]=h,a.insert(s,h)):h<o._reachability[s]&&(o._reachability[s]=h,a.remove(s),a.insert(s,h))}})},r.prototype._expandCluster=function(n,i){for(var a=i.getElements(),o=0,s=a.length;o<s;o++){var l=a[o];if(this._processed[l]===void 0){var h=this._regionQuery(l);this._processed[l]=1,this.clusters[n].push(l),this._orderedList.push(l),this._distanceToCore(l)!==void 0&&(this._updateQueue(l,h,i),this._expandCluster(n,i))}}},r.prototype._distanceToCore=function(n){for(var i=this.epsilon,a=0;a<i;a++){var o=this._regionQuery(n,a);if(o.length>=this.minPts)return a}},r.prototype._regionQuery=function(n,i){i=i||this.epsilon;for(var a=[],o=0,s=this.dataset.length;o<s;o++)this.distance(this.dataset[n],this.dataset[o])<i&&a.push(o);return a},r.prototype._euclideanDistance=function(n,i){for(var a=0,o=Math.min(n.length,i.length);o--;)a+=(n[o]-i[o])*(n[o]-i[o]);return Math.sqrt(a)},t.exports&&(t.exports=r)}(yF)),Xs}(function(t){t.exports&&(t.exports={DBSCAN:bF(),KMEANS:wF(),OPTICS:AF(),PriorityQueue:Y1()})})(mF);var to={},CF={get exports(){return to},set exports(t){to=t}},ro={},FF={get exports(){return ro},set exports(t){ro=t}},Ba=typeof Reflect=="object"?Reflect:null,Jd=Ba&&typeof Ba.apply=="function"?Ba.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Is;Ba&&typeof Ba.ownKeys=="function"?Is=Ba.ownKeys:Object.getOwnPropertySymbols?Is=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Is=function(e){return Object.getOwnPropertyNames(e)};function SF(t){console&&console.warn&&console.warn(t)}var Z1=Number.isNaN||function(e){return e!==e};function xt(){xt.init.call(this)}FF.exports=xt;ro.once=PF;xt.EventEmitter=xt;xt.prototype._events=void 0;xt.prototype._eventsCount=0;xt.prototype._maxListeners=void 0;var Qd=10;function Mo(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(xt,"defaultMaxListeners",{enumerable:!0,get:function(){return Qd},set:function(t){if(typeof t!="number"||t<0||Z1(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Qd=t}});xt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};xt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Z1(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function J1(t){return t._maxListeners===void 0?xt.defaultMaxListeners:t._maxListeners}xt.prototype.getMaxListeners=function(){return J1(this)};xt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[e];if(l===void 0)return!1;if(typeof l=="function")Jd(l,this,r);else for(var h=l.length,c=rg(l,h),n=0;n<h;++n)Jd(c[n],this,r);return!0};function Q1(t,e,r,n){var i,a,o;if(Mo(r),a=t._events,a===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),o=a[e]),o===void 0)o=a[e]=r,++t._eventsCount;else if(typeof o=="function"?o=a[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=J1(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=o.length,SF(s)}return t}xt.prototype.addListener=function(e,r){return Q1(this,e,r,!1)};xt.prototype.on=xt.prototype.addListener;xt.prototype.prependListener=function(e,r){return Q1(this,e,r,!0)};function BF(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function X1(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=BF.bind(n);return i.listener=r,n.wrapFn=i,i}xt.prototype.once=function(e,r){return Mo(r),this.on(e,X1(this,e,r)),this};xt.prototype.prependOnceListener=function(e,r){return Mo(r),this.prependListener(e,X1(this,e,r)),this};xt.prototype.removeListener=function(e,r){var n,i,a,o,s;if(Mo(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){s=n[o].listener,a=o;break}if(a<0)return this;a===0?n.shift():OF(n,a),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this};xt.prototype.off=xt.prototype.removeListener;xt.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var a=Object.keys(n),o;for(i=0;i<a.length;++i)o=a[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function eg(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?MF(i):rg(i,i.length)}xt.prototype.listeners=function(e){return eg(this,e,!0)};xt.prototype.rawListeners=function(e){return eg(this,e,!1)};xt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):tg.call(t,e)};xt.prototype.listenerCount=tg;function tg(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}xt.prototype.eventNames=function(){return this._eventsCount>0?Is(this._events):[]};function rg(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function OF(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function MF(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function PF(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,a),n(o)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}ng(t,e,a,{once:!0}),e!=="error"&&kF(t,i,{once:!0})})}function kF(t,e,r){typeof t.on=="function"&&ng(t,"error",e,r)}function ng(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(a){n.once&&t.removeEventListener(e,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}function TF(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}var IF=TF;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var xF=function(t){return t!=null&&(ig(t)||NF(t)||!!t._isBuffer)};function ig(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function NF(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&ig(t.slice(0,0))}var LF=IF,RF=xF,UF=typeof Float64Array<"u";function VF(t,e){return t[0]-e[0]}function jF(){var t=this.stride,e=new Array(t.length),r;for(r=0;r<e.length;++r)e[r]=[Math.abs(t[r]),r];e.sort(VF);var n=new Array(e.length);for(r=0;r<n.length;++r)n[r]=e[r][1];return n}function zF(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n=t==="generic";if(e===-1){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",v=new Function(i);return v()}else if(e===0){var i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",v=new Function("TrivialArray",i);return v(no[t][0])}var i=["'use strict'"],a=LF(e),o=a.map(function(m){return"i"+m}),s="this.offset+"+a.map(function(m){return"this.stride["+m+"]*i"+m}).join("+"),l=a.map(function(m){return"b"+m}).join(","),h=a.map(function(m){return"c"+m}).join(",");i.push("function "+r+"(a,"+l+","+h+",d){this.data=a","this.shape=["+l+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(m){return"this.shape["+m+"]"}).join("*"),"}})"),e===1?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+r+"_order(){"),e===2?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+o.join(",")+",v){"),n?i.push("return this.data.set("+s+",v)}"):i.push("return this.data["+s+"]=v}"),i.push("proto.get=function "+r+"_get("+o.join(",")+"){"),n?i.push("return this.data.get("+s+")}"):i.push("return this.data["+s+"]}"),i.push("proto.index=function "+r+"_index(",o.join(),"){return "+s+"}"),i.push("proto.hi=function "+r+"_hi("+o.join(",")+"){return new "+r+"(this.data,"+a.map(function(m){return["(typeof i",m,"!=='number'||i",m,"<0)?this.shape[",m,"]:i",m,"|0"].join("")}).join(",")+","+a.map(function(m){return"this.stride["+m+"]"}).join(",")+",this.offset)}");var c=a.map(function(m){return"a"+m+"=this.shape["+m+"]"}),f=a.map(function(m){return"c"+m+"=this.stride["+m+"]"});i.push("proto.lo=function "+r+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+c.join(",")+","+f.join(","));for(var p=0;p<e;++p)i.push("if(typeof i"+p+"==='number'&&i"+p+">=0){d=i"+p+"|0;b+=c"+p+"*d;a"+p+"-=d}");i.push("return new "+r+"(this.data,"+a.map(function(m){return"a"+m}).join(",")+","+a.map(function(m){return"c"+m}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+o.join(",")+"){var "+a.map(function(m){return"a"+m+"=this.shape["+m+"]"}).join(",")+","+a.map(function(m){return"b"+m+"=this.stride["+m+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var p=0;p<e;++p)i.push("if(typeof i"+p+"==='number'){d=i"+p+"|0;if(d<0){c+=b"+p+"*(a"+p+"-1);a"+p+"=ceil(-a"+p+"/d)}else{a"+p+"=ceil(a"+p+"/d)}b"+p+"*=d}");i.push("return new "+r+"(this.data,"+a.map(function(m){return"a"+m}).join(",")+","+a.map(function(m){return"b"+m}).join(",")+",c)}");for(var g=new Array(e),b=new Array(e),p=0;p<e;++p)g[p]="a[i"+p+"]",b[p]="b[i"+p+"]";i.push("proto.transpose=function "+r+"_transpose("+o+"){"+o.map(function(m,D){return m+"=("+m+"===undefined?"+D+":"+m+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+b.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+o+"){var a=[],b=[],c=this.offset");for(var p=0;p<e;++p)i.push("if(typeof i"+p+"==='number'&&i"+p+">=0){c=(c+this.stride["+p+"]*i"+p+")|0}else{a.push(this.shape["+p+"]);b.push(this.stride["+p+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(m){return"shape["+m+"]"}).join(",")+","+a.map(function(m){return"stride["+m+"]"}).join(",")+",offset)}");var v=new Function("CTOR_LIST","ORDER",i.join(`
`));return v(no[t],jF)}function qF(t){if(RF(t))return"buffer";if(UF)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var no={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function WF(t,e,r,n){if(t===void 0){var h=no.array[0];return h([])}else typeof t=="number"&&(t=[t]);e===void 0&&(e=[t.length]);var i=e.length;if(r===void 0){r=new Array(i);for(var a=i-1,o=1;a>=0;--a)r[a]=o,o*=e[a]}if(n===void 0){n=0;for(var a=0;a<i;++a)r[a]<0&&(n-=(e[a]-1)*r[a])}for(var s=qF(t),l=no[s];l.length<=i+1;)l.push(zF(s,l.length-1));var h=l[i+1];return h(t,e,r,n)}var ja=WF,Po={};function HF(t,e){for(var r=1,n=t.length,i=t[0],a=t[0],o=1;o<n;++o)if(a=i,i=t[o],e(i,a)){if(o===r){r++;continue}t[r++]=i}return t.length=r,t}function $F(t){for(var e=1,r=t.length,n=t[0],i=t[0],a=1;a<r;++a,i=n)if(i=n,n=t[a],n!==i){if(a===e){e++;continue}t[e++]=n}return t.length=e,t}function GF(t,e,r){return t.length===0?t:e?(r||t.sort(e),HF(t,e)):(r||t.sort(),$F(t))}var ag=GF,KF=ag;function ug(t,e,r){var n=t.length,i=e.arrayArgs.length,a=e.indexArgs.length>0,o=[],s=[],l=0,h=0,c,f;for(c=0;c<n;++c)s.push(["i",c,"=0"].join(""));for(f=0;f<i;++f)for(c=0;c<n;++c)h=l,l=t[c],c===0?s.push(["d",f,"s",c,"=t",f,"p",l].join("")):s.push(["d",f,"s",c,"=(t",f,"p",l,"-s",h,"*t",f,"p",h,")"].join(""));for(s.length>0&&o.push("var "+s.join(",")),c=n-1;c>=0;--c)l=t[c],o.push(["for(i",c,"=0;i",c,"<s",l,";++i",c,"){"].join(""));for(o.push(r),c=0;c<n;++c){for(h=l,l=t[c],f=0;f<i;++f)o.push(["p",f,"+=d",f,"s",c].join(""));a&&(c>0&&o.push(["index[",h,"]-=s",h].join("")),o.push(["++index[",l,"]"].join(""))),o.push("}")}return o.join(`
`)}function YF(t,e,r,n){for(var i=e.length,a=r.arrayArgs.length,o=r.blockSize,s=r.indexArgs.length>0,l=[],h=0;h<a;++h)l.push(["var offset",h,"=p",h].join(""));for(var h=t;h<i;++h)l.push(["for(var j"+h+"=SS[",e[h],"]|0;j",h,">0;){"].join("")),l.push(["if(j",h,"<",o,"){"].join("")),l.push(["s",e[h],"=j",h].join("")),l.push(["j",h,"=0"].join("")),l.push(["}else{s",e[h],"=",o].join("")),l.push(["j",h,"-=",o,"}"].join("")),s&&l.push(["index[",e[h],"]=j",h].join(""));for(var h=0;h<a;++h){for(var c=["offset"+h],f=t;f<i;++f)c.push(["j",f,"*t",h,"p",e[f]].join(""));l.push(["p",h,"=(",c.join("+"),")"].join(""))}l.push(ug(e,r,n));for(var h=t;h<i;++h)l.push("}");return l.join(`
`)}function ZF(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}function pc(t,e,r){for(var n=t.body,i=[],a=[],o=0;o<t.args.length;++o){var s=t.args[o];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),h="",c=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var f=e.offsetArgIndex.indexOf(o),p=e.offsetArgs[f];c=p.array,h="+q"+f;case"array":h="p"+c+h;var g="l"+o,b="a"+c;if(e.arrayBlockIndices[c]===0)s.count===1?r[c]==="generic"?s.lvalue?(i.push(["var ",g,"=",b,".get(",h,")"].join("")),n=n.replace(l,g),a.push([b,".set(",h,",",g,")"].join(""))):n=n.replace(l,[b,".get(",h,")"].join("")):n=n.replace(l,[b,"[",h,"]"].join("")):r[c]==="generic"?(i.push(["var ",g,"=",b,".get(",h,")"].join("")),n=n.replace(l,g),s.lvalue&&a.push([b,".set(",h,",",g,")"].join(""))):(i.push(["var ",g,"=",b,"[",h,"]"].join("")),n=n.replace(l,g),s.lvalue&&a.push([b,"[",h,"]=",g].join("")));else{for(var v=[s.name],m=[h],D=0;D<Math.abs(e.arrayBlockIndices[c]);D++)v.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(D+1)+"*t"+c+"b"+D);if(l=new RegExp(v.join(""),"g"),h=m.join("+"),r[c]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(l,[b,"[",h,"]"].join(""))}break;case"scalar":n=n.replace(l,"Y"+e.scalarArgs.indexOf(o));break;case"index":n=n.replace(l,"index");break;case"shape":n=n.replace(l,"shape");break}}}return[i.join(`
`),n,a.join(`
`)].join(`
`).trim()}function JF(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],a=i.match(/\d+/);a?a=a[0]:a="",i.charAt(0)===0?e[n]="u"+i.charAt(1)+a:e[n]=i.charAt(0)+a,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}function QF(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,n=new Array(t.arrayArgs.length),i=new Array(t.arrayArgs.length),a=0;a<t.arrayArgs.length;++a)i[a]=e[2*a],n[a]=e[2*a+1];for(var o=[],s=[],l=[],h=[],c=[],a=0;a<t.arrayArgs.length;++a){t.arrayBlockIndices[a]<0?(l.push(0),h.push(r),o.push(r),s.push(r+t.arrayBlockIndices[a])):(l.push(t.arrayBlockIndices[a]),h.push(t.arrayBlockIndices[a]+r),o.push(0),s.push(t.arrayBlockIndices[a]));for(var f=[],p=0;p<n[a].length;p++)l[a]<=n[a][p]&&n[a][p]<h[a]&&f.push(n[a][p]-l[a]);c.push(f)}for(var g=["SS"],b=["'use strict'"],v=[],p=0;p<r;++p)v.push(["s",p,"=SS[",p,"]"].join(""));for(var a=0;a<t.arrayArgs.length;++a){g.push("a"+a),g.push("t"+a),g.push("p"+a);for(var p=0;p<r;++p)v.push(["t",a,"p",p,"=t",a,"[",l[a]+p,"]"].join(""));for(var p=0;p<Math.abs(t.arrayBlockIndices[a]);++p)v.push(["t",a,"b",p,"=t",a,"[",o[a]+p,"]"].join(""))}for(var a=0;a<t.scalarArgs.length;++a)g.push("Y"+a);if(t.shapeArgs.length>0&&v.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var m=new Array(r),a=0;a<r;++a)m[a]="0";v.push(["index=[",m.join(","),"]"].join(""))}for(var a=0;a<t.offsetArgs.length;++a){for(var D=t.offsetArgs[a],S=[],p=0;p<D.offset.length;++p)D.offset[p]!==0&&(D.offset[p]===1?S.push(["t",D.array,"p",p].join("")):S.push([D.offset[p],"*t",D.array,"p",p].join("")));S.length===0?v.push("q"+a+"=0"):v.push(["q",a,"=",S.join("+")].join(""))}var y=KF([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));v=v.concat(y),v.length>0&&b.push("var "+v.join(","));for(var a=0;a<t.arrayArgs.length;++a)b.push("p"+a+"|=0");t.pre.body.length>3&&b.push(pc(t.pre,t,i));var A=pc(t.body,t,i),C=ZF(c);C<r?b.push(YF(C,c[0],t,A)):b.push(ug(c[0],t,A)),t.post.body.length>3&&b.push(pc(t.post,t,i)),t.debug&&console.log("-----Generated cwise routine for ",e,`:
`+b.join(`
`)+`
----------`);var P=[t.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",C,JF(i)].join(""),O=new Function(["function ",P,"(",g.join(","),"){",b.join(`
`),"} return ",P].join(""));return O()}var XF=QF,e5=XF;function t5(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var i=[],a=[],o=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],s=[],l=[],h=0;h<t.arrayArgs.length;++h){var c=t.arrayArgs[h];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),i.push("t"+c),i.push("r"+c),a.push("t"+c),a.push("r"+c+".join()"),o.push("array"+c+".data"),o.push("array"+c+".stride"),o.push("array"+c+".offset|0"),h>0&&(s.push("array"+t.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[h]))),l.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[h])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var h=0;h<t.scalarArgs.length;++h)o.push("scalar"+t.scalarArgs[h]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",o.join(","),")}"].join("")),t.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var f=new Function("compile",e.join(`
`));return f(e5.bind(void 0,t))}var r5=t5,n5=r5;function i5(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function a5(t){var e=new i5;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var n=0;n<r.length;++n){var i=r[n];if(i==="array"||typeof i=="object"&&i.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(i==="scalar")e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if(i==="index"){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(i==="shape"){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof i=="object"&&i.offset)e.argTypes[n]="offset",e.offsetArgs.push({array:i.array,offset:i.offset}),e.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+r[n])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,n5(e)}var gf=a5;(function(t){var e=gf,r={body:"",args:[],thisVars:[],localVars:[]};function n(p){if(!p)return r;for(var g=0;g<p.args.length;++g){var b=p.args[g];g===0?p.args[g]={name:b,lvalue:!0,rvalue:!!p.rvalue,count:p.count||1}:p.args[g]={name:b,lvalue:!1,rvalue:!0,count:1}}return p.thisVars||(p.thisVars=[]),p.localVars||(p.localVars=[]),p}function i(p){return e({args:p.args,pre:n(p.pre),body:n(p.body),post:n(p.proc),funcName:p.funcName})}function a(p){for(var g=[],b=0;b<p.args.length;++b)g.push("a"+b);var v=new Function("P",["return function ",p.funcName,"_ndarrayops(",g.join(","),") {P(",g.join(","),");return a0}"].join(""));return v(i(p))}var o={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var p in o){var g=o[p];t[p]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:p}),t[p+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+g+"=b"},rvalue:!0,funcName:p+"eq"}),t[p+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:p+"s"}),t[p+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+g+"=s"},rvalue:!0,funcName:p+"seq"})}})();var s={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var p in s){var g=s[p];t[p]=a({args:["array","array"],body:{args:["a","b"],body:"a="+g+"b"},funcName:p}),t[p+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+g+"a"},rvalue:!0,count:2,funcName:p+"eq"})}})();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var p in l){var g=l[p];t[p]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:p}),t[p+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:p+"s"}),t[p+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+g+"b"},rvalue:!0,count:2,funcName:p+"eq"}),t[p+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+g+"s"},rvalue:!0,count:2,funcName:p+"seq"})}})();var h=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var p=0;p<h.length;++p){var g=h[p];t[g]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:g}),t[g+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"})}})();var c=["max","min","atan2","pow"];(function(){for(var p=0;p<c.length;++p){var g=c[p];t[g]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g}),t[g+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g+"s"}),t[g+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"}),t[g+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"seq"})}})();var f=["atan2","pow"];(function(){for(var p=0;p<f.length;++p){var g=f[p];t[g+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"op"}),t[g+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"ops"}),t[g+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opeq"}),t[g+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opseq"})}})(),t.any=e({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=e({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=e({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(Po);var u5=gf({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64}),Xd=ja,s5=u5,o5=function(e,r){for(var n=[],i=e,a=1;Array.isArray(i);)n.push(i.length),a*=i.length,i=i[0];return n.length===0?Xd():(r||(r=Xd(new Float64Array(a),n)),s5(r,e),r)};function sg(t,e,r){var n=t[r]|0;if(n<=0)return[];var i=new Array(n),a;if(r===t.length-1)for(a=0;a<n;++a)i[a]=e;else for(a=0;a<n;++a)i[a]=sg(t,e,r+1);return i}function l5(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function c5(t,e){switch(typeof e>"u"&&(e=0),typeof t){case"number":if(t>0)return l5(t|0,e);break;case"object":if(typeof t.length=="number")return sg(t,e,0);break}return[]}var f5=c5,og={};(function(t){(function(e,r){r(t)})(dr,function(e){var r,n,i,a,o,s,l,h,c,f,p,g,b,v,m,D,S,y;r={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},n={},n[r.BooleanLiteral]="Boolean",n[r.EOF]="<end>",n[r.Identifier]="Identifier",n[r.Keyword]="Keyword",n[r.NullLiteral]="Null",n[r.NumericLiteral]="Numeric",n[r.Punctuator]="Punctuator",n[r.StringLiteral]="String",n[r.RegularExpression]="RegularExpression",i=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},o={Data:1,Get:2,Set:4},s={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},l={NonAsciiIdentifierStart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")};function A(w,T){if(!w)throw new Error("ASSERT: "+T)}function C(w){return w>=48&&w<=57}function P(w){return"0123456789abcdefABCDEF".indexOf(w)>=0}function O(w){return"01234567".indexOf(w)>=0}function F(w){return w===32||w===9||w===11||w===12||w===160||w>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(w)>=0}function x(w){return w===10||w===13||w===8232||w===8233}function z(w){return w===36||w===95||w>=65&&w<=90||w>=97&&w<=122||w===92||w>=128&&l.NonAsciiIdentifierStart.test(String.fromCharCode(w))}function G(w){return w===36||w===95||w>=65&&w<=90||w>=97&&w<=122||w>=48&&w<=57||w===92||w>=128&&l.NonAsciiIdentifierPart.test(String.fromCharCode(w))}function J(w){switch(w){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function R(w){switch(w){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function N(w){return w==="eval"||w==="arguments"}function j(w){if(f&&R(w))return!0;switch(w.length){case 2:return w==="if"||w==="in"||w==="do";case 3:return w==="var"||w==="for"||w==="new"||w==="try"||w==="let";case 4:return w==="this"||w==="else"||w==="case"||w==="void"||w==="with"||w==="enum";case 5:return w==="while"||w==="break"||w==="catch"||w==="throw"||w==="const"||w==="yield"||w==="class"||w==="super";case 6:return w==="return"||w==="typeof"||w==="delete"||w==="switch"||w==="export"||w==="import";case 7:return w==="default"||w==="finally"||w==="extends";case 8:return w==="function"||w==="continue"||w==="debugger";case 10:return w==="instanceof";default:return!1}}function q(w,T,$,re,be){var Ne;A(typeof $=="number","Comment must have valid position"),!(S.lastCommentStart>=$)&&(S.lastCommentStart=$,Ne={type:w,value:T},y.range&&(Ne.range=[$,re]),y.loc&&(Ne.loc=be),y.comments.push(Ne),y.attachComment&&(y.leadingComments.push(Ne),y.trailingComments.push(Ne)))}function Z(w){var T,$,re,be;for(T=p-w,$={start:{line:g,column:p-b-w}};p<v;)if(re=c.charCodeAt(p),++p,x(re)){y.comments&&(be=c.slice(T+w,p-1),$.end={line:g,column:p-b-1},q("Line",be,T,p-1,$)),re===13&&c.charCodeAt(p)===10&&++p,++g,b=p;return}y.comments&&(be=c.slice(T+w,p),$.end={line:g,column:p-b},q("Line",be,T,p,$))}function X(){var w,T,$,re;for(y.comments&&(w=p-2,T={start:{line:g,column:p-b-2}});p<v;)if($=c.charCodeAt(p),x($))$===13&&c.charCodeAt(p+1)===10&&++p,++g,++p,b=p,p>=v&&Q({},s.UnexpectedToken,"ILLEGAL");else if($===42){if(c.charCodeAt(p+1)===47){++p,++p,y.comments&&(re=c.slice(w+2,p-2),T.end={line:g,column:p-b},q("Block",re,w,p,T));return}++p}else++p;Q({},s.UnexpectedToken,"ILLEGAL")}function te(){var w,T;for(T=p===0;p<v;)if(w=c.charCodeAt(p),F(w))++p;else if(x(w))++p,w===13&&c.charCodeAt(p)===10&&++p,++g,b=p,T=!0;else if(w===47)if(w=c.charCodeAt(p+1),w===47)++p,++p,Z(2),T=!0;else if(w===42)++p,++p,X();else break;else if(T&&w===45)if(c.charCodeAt(p+1)===45&&c.charCodeAt(p+2)===62)p+=3,Z(3);else break;else if(w===60)if(c.slice(p+1,p+4)==="!--")++p,++p,++p,++p,Z(4);else break;else break}function fe(w){var T,$,re,be=0;for($=w==="u"?4:2,T=0;T<$;++T)if(p<v&&P(c[p]))re=c[p++],be=be*16+"0123456789abcdef".indexOf(re.toLowerCase());else return"";return String.fromCharCode(be)}function he(){var w,T;for(w=c.charCodeAt(p++),T=String.fromCharCode(w),w===92&&(c.charCodeAt(p)!==117&&Q({},s.UnexpectedToken,"ILLEGAL"),++p,w=fe("u"),(!w||w==="\\"||!z(w.charCodeAt(0)))&&Q({},s.UnexpectedToken,"ILLEGAL"),T=w);p<v&&(w=c.charCodeAt(p),!!G(w));)++p,T+=String.fromCharCode(w),w===92&&(T=T.substr(0,T.length-1),c.charCodeAt(p)!==117&&Q({},s.UnexpectedToken,"ILLEGAL"),++p,w=fe("u"),(!w||w==="\\"||!G(w.charCodeAt(0)))&&Q({},s.UnexpectedToken,"ILLEGAL"),T+=w);return T}function ge(){var w,T;for(w=p++;p<v;){if(T=c.charCodeAt(p),T===92)return p=w,he();if(G(T))++p;else break}return c.slice(w,p)}function _e(){var w,T,$;return w=p,T=c.charCodeAt(p)===92?he():ge(),T.length===1?$=r.Identifier:j(T)?$=r.Keyword:T==="null"?$=r.NullLiteral:T==="true"||T==="false"?$=r.BooleanLiteral:$=r.Identifier,{type:$,value:T,lineNumber:g,lineStart:b,start:w,end:p}}function Be(){var w=p,T=c.charCodeAt(p),$,re=c[p],be,Ne,vt;switch(T){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++p,y.tokenize&&(T===40?y.openParenToken=y.tokens.length:T===123&&(y.openCurlyToken=y.tokens.length)),{type:r.Punctuator,value:String.fromCharCode(T),lineNumber:g,lineStart:b,start:w,end:p};default:if($=c.charCodeAt(p+1),$===61)switch(T){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return p+=2,{type:r.Punctuator,value:String.fromCharCode(T)+String.fromCharCode($),lineNumber:g,lineStart:b,start:w,end:p};case 33:case 61:return p+=2,c.charCodeAt(p)===61&&++p,{type:r.Punctuator,value:c.slice(w,p),lineNumber:g,lineStart:b,start:w,end:p}}}if(vt=c.substr(p,4),vt===">>>=")return p+=4,{type:r.Punctuator,value:vt,lineNumber:g,lineStart:b,start:w,end:p};if(Ne=vt.substr(0,3),Ne===">>>"||Ne==="<<="||Ne===">>=")return p+=3,{type:r.Punctuator,value:Ne,lineNumber:g,lineStart:b,start:w,end:p};if(be=Ne.substr(0,2),re===be[1]&&"+-<>&|".indexOf(re)>=0||be==="=>")return p+=2,{type:r.Punctuator,value:be,lineNumber:g,lineStart:b,start:w,end:p};if("<>=!+-*%&|^/".indexOf(re)>=0)return++p,{type:r.Punctuator,value:re,lineNumber:g,lineStart:b,start:w,end:p};Q({},s.UnexpectedToken,"ILLEGAL")}function ke(w){for(var T="";p<v&&P(c[p]);)T+=c[p++];return T.length===0&&Q({},s.UnexpectedToken,"ILLEGAL"),z(c.charCodeAt(p))&&Q({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt("0x"+T,16),lineNumber:g,lineStart:b,start:w,end:p}}function Ie(w){for(var T="0"+c[p++];p<v&&O(c[p]);)T+=c[p++];return(z(c.charCodeAt(p))||C(c.charCodeAt(p)))&&Q({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt(T,8),octal:!0,lineNumber:g,lineStart:b,start:w,end:p}}function qe(){var w,T;for(w=p+1;w<v;++w){if(T=c[w],T==="8"||T==="9")return!1;if(!O(T))return!0}return!0}function it(){var w,T,$;if($=c[p],A(C($.charCodeAt(0))||$===".","Numeric literal must start with a decimal digit or a decimal point"),T=p,w="",$!=="."){if(w=c[p++],$=c[p],w==="0"){if($==="x"||$==="X")return++p,ke(T);if(O($)&&qe())return Ie(T)}for(;C(c.charCodeAt(p));)w+=c[p++];$=c[p]}if($==="."){for(w+=c[p++];C(c.charCodeAt(p));)w+=c[p++];$=c[p]}if($==="e"||$==="E")if(w+=c[p++],$=c[p],($==="+"||$==="-")&&(w+=c[p++]),C(c.charCodeAt(p)))for(;C(c.charCodeAt(p));)w+=c[p++];else Q({},s.UnexpectedToken,"ILLEGAL");return z(c.charCodeAt(p))&&Q({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseFloat(w),lineNumber:g,lineStart:b,start:T,end:p}}function at(){var w="",T,$,re,be,Ne,vt,Ct=!1,Wt,or;for(Wt=g,or=b,T=c[p],A(T==="'"||T==='"',"String literal must starts with a quote"),$=p,++p;p<v;)if(re=c[p++],re===T){T="";break}else if(re==="\\")if(re=c[p++],!re||!x(re.charCodeAt(0)))switch(re){case"u":case"x":vt=p,Ne=fe(re),Ne?w+=Ne:(p=vt,w+=re);break;case"n":w+=`
`;break;case"r":w+="\r";break;case"t":w+="	";break;case"b":w+="\b";break;case"f":w+="\f";break;case"v":w+="\v";break;default:O(re)?(be="01234567".indexOf(re),be!==0&&(Ct=!0),p<v&&O(c[p])&&(Ct=!0,be=be*8+"01234567".indexOf(c[p++]),"0123".indexOf(re)>=0&&p<v&&O(c[p])&&(be=be*8+"01234567".indexOf(c[p++]))),w+=String.fromCharCode(be)):w+=re;break}else++g,re==="\r"&&c[p]===`
`&&++p,b=p;else{if(x(re.charCodeAt(0)))break;w+=re}return T!==""&&Q({},s.UnexpectedToken,"ILLEGAL"),{type:r.StringLiteral,value:w,octal:Ct,startLineNumber:Wt,startLineStart:or,lineNumber:g,lineStart:b,start:$,end:p}}function et(w,T){var $;try{$=new RegExp(w,T)}catch{Q({},s.InvalidRegExp)}return $}function Et(){var w,T,$,re,be;for(w=c[p],A(w==="/","Regular expression literal must start with a slash"),T=c[p++],$=!1,re=!1;p<v;)if(w=c[p++],T+=w,w==="\\")w=c[p++],x(w.charCodeAt(0))&&Q({},s.UnterminatedRegExp),T+=w;else if(x(w.charCodeAt(0)))Q({},s.UnterminatedRegExp);else if($)w==="]"&&($=!1);else if(w==="/"){re=!0;break}else w==="["&&($=!0);return re||Q({},s.UnterminatedRegExp),be=T.substr(1,T.length-2),{value:be,literal:T}}function At(){var w,T,$,re;for(T="",$="";p<v&&(w=c[p],!!G(w.charCodeAt(0)));)if(++p,w==="\\"&&p<v)if(w=c[p],w==="u"){if(++p,re=p,w=fe("u"),w)for($+=w,T+="\\u";re<p;++re)T+=c[re];else p=re,$+="u",T+="\\u";ie({},s.UnexpectedToken,"ILLEGAL")}else T+="\\",ie({},s.UnexpectedToken,"ILLEGAL");else $+=w,T+=w;return{value:$,literal:T}}function ct(){var w,T,$,re;return D=null,te(),w=p,T=Et(),$=At(),re=et(T.value,$.value),y.tokenize?{type:r.RegularExpression,value:re,lineNumber:g,lineStart:b,start:w,end:p}:{literal:T.literal+$.literal,value:re,start:w,end:p}}function ot(){var w,T,$,re;return te(),w=p,T={start:{line:g,column:p-b}},$=ct(),T.end={line:g,column:p-b},y.tokenize||(y.tokens.length>0&&(re=y.tokens[y.tokens.length-1],re.range[0]===w&&re.type==="Punctuator"&&(re.value==="/"||re.value==="/=")&&y.tokens.pop()),y.tokens.push({type:"RegularExpression",value:$.literal,range:[w,p],loc:T})),$}function Pt(w){return w.type===r.Identifier||w.type===r.Keyword||w.type===r.BooleanLiteral||w.type===r.NullLiteral}function Wr(){var w,T;if(w=y.tokens[y.tokens.length-1],!w)return ot();if(w.type==="Punctuator"){if(w.value==="]")return Be();if(w.value===")")return T=y.tokens[y.openParenToken-1],T&&T.type==="Keyword"&&(T.value==="if"||T.value==="while"||T.value==="for"||T.value==="with")?ot():Be();if(w.value==="}"){if(y.tokens[y.openCurlyToken-3]&&y.tokens[y.openCurlyToken-3].type==="Keyword"){if(T=y.tokens[y.openCurlyToken-4],!T)return Be()}else if(y.tokens[y.openCurlyToken-4]&&y.tokens[y.openCurlyToken-4].type==="Keyword"){if(T=y.tokens[y.openCurlyToken-5],!T)return ot()}else return Be();return i.indexOf(T.value)>=0?Be():ot()}return ot()}return w.type==="Keyword"&&w.value!=="this"?ot():Be()}function Ut(){var w;return te(),p>=v?{type:r.EOF,lineNumber:g,lineStart:b,start:p,end:p}:(w=c.charCodeAt(p),z(w)?_e():w===40||w===41||w===59?Be():w===39||w===34?at():w===46?C(c.charCodeAt(p+1))?it():Be():C(w)?it():y.tokenize&&w===47?Wr():Be())}function Hr(){var w,T,$;return te(),w={start:{line:g,column:p-b}},T=Ut(),w.end={line:g,column:p-b},T.type!==r.EOF&&($=c.slice(T.start,T.end),y.tokens.push({type:n[T.type],value:$,range:[T.start,T.end],loc:w})),T}function tt(){var w;return w=D,p=w.end,g=w.lineNumber,b=w.lineStart,D=typeof y.tokens<"u"?Hr():Ut(),p=w.end,g=w.lineNumber,b=w.lineStart,w}function pr(){var w,T,$;w=p,T=g,$=b,D=typeof y.tokens<"u"?Hr():Ut(),p=w,g=T,b=$}function Sr(w,T){this.line=w,this.column=T}function On(w,T,$,re){this.start=new Sr(w,T),this.end=new Sr($,re)}h={name:"SyntaxTree",processComment:function(w){var T,$;if(!(w.type===a.Program&&w.body.length>0)){for(y.trailingComments.length>0?y.trailingComments[0].range[0]>=w.range[1]?($=y.trailingComments,y.trailingComments=[]):y.trailingComments.length=0:y.bottomRightStack.length>0&&y.bottomRightStack[y.bottomRightStack.length-1].trailingComments&&y.bottomRightStack[y.bottomRightStack.length-1].trailingComments[0].range[0]>=w.range[1]&&($=y.bottomRightStack[y.bottomRightStack.length-1].trailingComments,delete y.bottomRightStack[y.bottomRightStack.length-1].trailingComments);y.bottomRightStack.length>0&&y.bottomRightStack[y.bottomRightStack.length-1].range[0]>=w.range[0];)T=y.bottomRightStack.pop();T?T.leadingComments&&T.leadingComments[T.leadingComments.length-1].range[1]<=w.range[0]&&(w.leadingComments=T.leadingComments,delete T.leadingComments):y.leadingComments.length>0&&y.leadingComments[y.leadingComments.length-1].range[1]<=w.range[0]&&(w.leadingComments=y.leadingComments,y.leadingComments=[]),$&&(w.trailingComments=$),y.bottomRightStack.push(w)}},markEnd:function(w,T){return y.range&&(w.range=[T.start,p]),y.loc&&(w.loc=new On(T.startLineNumber===void 0?T.lineNumber:T.startLineNumber,T.start-(T.startLineStart===void 0?T.lineStart:T.startLineStart),g,p-b),this.postProcess(w)),y.attachComment&&this.processComment(w),w},postProcess:function(w){return y.source&&(w.loc.source=y.source),w},createArrayExpression:function(w){return{type:a.ArrayExpression,elements:w}},createAssignmentExpression:function(w,T,$){return{type:a.AssignmentExpression,operator:w,left:T,right:$}},createBinaryExpression:function(w,T,$){var re=w==="||"||w==="&&"?a.LogicalExpression:a.BinaryExpression;return{type:re,operator:w,left:T,right:$}},createBlockStatement:function(w){return{type:a.BlockStatement,body:w}},createBreakStatement:function(w){return{type:a.BreakStatement,label:w}},createCallExpression:function(w,T){return{type:a.CallExpression,callee:w,arguments:T}},createCatchClause:function(w,T){return{type:a.CatchClause,param:w,body:T}},createConditionalExpression:function(w,T,$){return{type:a.ConditionalExpression,test:w,consequent:T,alternate:$}},createContinueStatement:function(w){return{type:a.ContinueStatement,label:w}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(w,T){return{type:a.DoWhileStatement,body:w,test:T}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(w){return{type:a.ExpressionStatement,expression:w}},createForStatement:function(w,T,$,re){return{type:a.ForStatement,init:w,test:T,update:$,body:re}},createForInStatement:function(w,T,$){return{type:a.ForInStatement,left:w,right:T,body:$,each:!1}},createFunctionDeclaration:function(w,T,$,re){return{type:a.FunctionDeclaration,id:w,params:T,defaults:$,body:re,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(w,T,$,re){return{type:a.FunctionExpression,id:w,params:T,defaults:$,body:re,rest:null,generator:!1,expression:!1}},createIdentifier:function(w){return{type:a.Identifier,name:w}},createIfStatement:function(w,T,$){return{type:a.IfStatement,test:w,consequent:T,alternate:$}},createLabeledStatement:function(w,T){return{type:a.LabeledStatement,label:w,body:T}},createLiteral:function(w){return{type:a.Literal,value:w.value,raw:c.slice(w.start,w.end)}},createMemberExpression:function(w,T,$){return{type:a.MemberExpression,computed:w==="[",object:T,property:$}},createNewExpression:function(w,T){return{type:a.NewExpression,callee:w,arguments:T}},createObjectExpression:function(w){return{type:a.ObjectExpression,properties:w}},createPostfixExpression:function(w,T){return{type:a.UpdateExpression,operator:w,argument:T,prefix:!1}},createProgram:function(w){return{type:a.Program,body:w}},createProperty:function(w,T,$){return{type:a.Property,key:T,value:$,kind:w}},createReturnStatement:function(w){return{type:a.ReturnStatement,argument:w}},createSequenceExpression:function(w){return{type:a.SequenceExpression,expressions:w}},createSwitchCase:function(w,T){return{type:a.SwitchCase,test:w,consequent:T}},createSwitchStatement:function(w,T){return{type:a.SwitchStatement,discriminant:w,cases:T}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(w){return{type:a.ThrowStatement,argument:w}},createTryStatement:function(w,T,$,re){return{type:a.TryStatement,block:w,guardedHandlers:T,handlers:$,finalizer:re}},createUnaryExpression:function(w,T){return w==="++"||w==="--"?{type:a.UpdateExpression,operator:w,argument:T,prefix:!0}:{type:a.UnaryExpression,operator:w,argument:T,prefix:!0}},createVariableDeclaration:function(w,T){return{type:a.VariableDeclaration,declarations:w,kind:T}},createVariableDeclarator:function(w,T){return{type:a.VariableDeclarator,id:w,init:T}},createWhileStatement:function(w,T){return{type:a.WhileStatement,test:w,body:T}},createWithStatement:function(w,T){return{type:a.WithStatement,object:w,body:T}}};function K(){var w,T,$,re;return w=p,T=g,$=b,te(),re=g!==T,p=w,g=T,b=$,re}function Q(w,T){var $,re=Array.prototype.slice.call(arguments,2),be=T.replace(/%(\d)/g,function(Ne,vt){return A(vt<re.length,"Message reference must be in range"),re[vt]});throw typeof w.lineNumber=="number"?($=new Error("Line "+w.lineNumber+": "+be),$.index=w.start,$.lineNumber=w.lineNumber,$.column=w.start-b+1):($=new Error("Line "+g+": "+be),$.index=p,$.lineNumber=g,$.column=p-b+1),$.description=be,$}function ie(){try{Q.apply(null,arguments)}catch(w){if(y.errors)y.errors.push(w);else throw w}}function me(w){if(w.type===r.EOF&&Q(w,s.UnexpectedEOS),w.type===r.NumericLiteral&&Q(w,s.UnexpectedNumber),w.type===r.StringLiteral&&Q(w,s.UnexpectedString),w.type===r.Identifier&&Q(w,s.UnexpectedIdentifier),w.type===r.Keyword){if(J(w.value))Q(w,s.UnexpectedReserved);else if(f&&R(w.value)){ie(w,s.StrictReservedWord);return}Q(w,s.UnexpectedToken,w.value)}Q(w,s.UnexpectedToken,w.value)}function se(w){var T=tt();(T.type!==r.Punctuator||T.value!==w)&&me(T)}function Ce(w){var T=tt();(T.type!==r.Keyword||T.value!==w)&&me(T)}function ce(w){return D.type===r.Punctuator&&D.value===w}function pe(w){return D.type===r.Keyword&&D.value===w}function Te(){var w;return D.type!==r.Punctuator?!1:(w=D.value,w==="="||w==="*="||w==="/="||w==="%="||w==="+="||w==="-="||w==="<<="||w===">>="||w===">>>="||w==="&="||w==="^="||w==="|=")}function We(){var w,T=p,$=g,re=b,be=D;if(c.charCodeAt(p)===59||ce(";")){tt();return}if(w=g,te(),g!==w){p=T,g=$,b=re,D=be;return}D.type!==r.EOF&&!ce("}")&&me(D)}function lt(w){return w.type===a.Identifier||w.type===a.MemberExpression}function xe(){var w=[],T;for(T=D,se("[");!ce("]");)ce(",")?(tt(),w.push(null)):(w.push(Br()),ce("]")||se(","));return tt(),m.markEnd(m.createArrayExpression(w),T)}function Zt(w,T){var $,re,be;return $=f,be=D,re=zi(),T&&f&&N(w[0].name)&&ie(T,s.StrictParamName),f=$,m.markEnd(m.createFunctionExpression(null,w,[],re),be)}function Vt(){var w,T;return T=D,w=tt(),w.type===r.StringLiteral||w.type===r.NumericLiteral?(f&&w.octal&&ie(w,s.StrictOctalLiteral),m.markEnd(m.createLiteral(w),T)):m.markEnd(m.createIdentifier(w.value),T)}function nr(){var w,T,$,re,be,Ne;if(w=D,Ne=D,w.type===r.Identifier)return $=Vt(),w.value==="get"&&!ce(":")?(T=Vt(),se("("),se(")"),re=Zt([]),m.markEnd(m.createProperty("get",T,re),Ne)):w.value==="set"&&!ce(":")?(T=Vt(),se("("),w=D,w.type!==r.Identifier?(se(")"),ie(w,s.UnexpectedToken,w.value),re=Zt([])):(be=[mn()],se(")"),re=Zt(be,w)),m.markEnd(m.createProperty("set",T,re),Ne)):(se(":"),re=Br(),m.markEnd(m.createProperty("init",$,re),Ne));if(w.type===r.EOF||w.type===r.Punctuator)me(w);else return T=Vt(),se(":"),re=Br(),m.markEnd(m.createProperty("init",T,re),Ne)}function Jt(){var w=[],T,$,re,be,Ne={},vt=String,Ct;for(Ct=D,se("{");!ce("}");)T=nr(),T.key.type===a.Identifier?$=T.key.name:$=vt(T.key.value),be=T.kind==="init"?o.Data:T.kind==="get"?o.Get:o.Set,re="$"+$,Object.prototype.hasOwnProperty.call(Ne,re)?(Ne[re]===o.Data?f&&be===o.Data?ie({},s.StrictDuplicateProperty):be!==o.Data&&ie({},s.AccessorDataProperty):be===o.Data?ie({},s.AccessorDataProperty):Ne[re]&be&&ie({},s.AccessorGetSet),Ne[re]|=be):Ne[re]=be,w.push(T),ce("}")||se(",");return se("}"),m.markEnd(m.createObjectExpression(w),Ct)}function Dr(){var w;return se("("),w=ir(),se(")"),w}function Qt(){var w,T,$,re;if(ce("("))return Dr();if(ce("["))return xe();if(ce("{"))return Jt();if(w=D.type,re=D,w===r.Identifier)$=m.createIdentifier(tt().value);else if(w===r.StringLiteral||w===r.NumericLiteral)f&&D.octal&&ie(D,s.StrictOctalLiteral),$=m.createLiteral(tt());else if(w===r.Keyword){if(pe("function"))return qi();pe("this")?(tt(),$=m.createThisExpression()):me(tt())}else w===r.BooleanLiteral?(T=tt(),T.value=T.value==="true",$=m.createLiteral(T)):w===r.NullLiteral?(T=tt(),T.value=null,$=m.createLiteral(T)):ce("/")||ce("/=")?(typeof y.tokens<"u"?$=m.createLiteral(ot()):$=m.createLiteral(ct()),pr()):me(tt());return m.markEnd($,re)}function wr(){var w=[];if(se("("),!ce(")"))for(;p<v&&(w.push(Br()),!ce(")"));)se(",");return se(")"),w}function fr(){var w,T;return T=D,w=tt(),Pt(w)||me(w),m.markEnd(m.createIdentifier(w.value),T)}function hr(){return se("."),fr()}function vn(){var w;return se("["),w=ir(),se("]"),w}function gr(){var w,T,$;return $=D,Ce("new"),w=ei(),T=ce("(")?wr():[],m.markEnd(m.createNewExpression(w,T),$)}function Mn(){var w,T,$,re,be=S.allowIn;for(re=D,S.allowIn=!0,w=pe("new")?gr():Qt();;){if(ce("."))$=hr(),w=m.createMemberExpression(".",w,$);else if(ce("("))T=wr(),w=m.createCallExpression(w,T);else if(ce("["))$=vn(),w=m.createMemberExpression("[",w,$);else break;m.markEnd(w,re)}return S.allowIn=be,w}function ei(){var w,T,$;for(A(S.allowIn,"callee of new expression always allow in keyword."),$=D,w=pe("new")?gr():Qt();ce(".")||ce("[");)ce("[")?(T=vn(),w=m.createMemberExpression("[",w,T)):(T=hr(),w=m.createMemberExpression(".",w,T)),m.markEnd(w,$);return w}function zn(){var w,T,$=D;return w=Mn(),D.type===r.Punctuator&&(ce("++")||ce("--"))&&!K()&&(f&&w.type===a.Identifier&&N(w.name)&&ie({},s.StrictLHSPostfix),lt(w)||ie({},s.InvalidLHSInAssignment),T=tt(),w=m.markEnd(m.createPostfixExpression(T.value,w),$)),w}function qn(){var w,T,$;return D.type!==r.Punctuator&&D.type!==r.Keyword?T=zn():ce("++")||ce("--")?($=D,w=tt(),T=qn(),f&&T.type===a.Identifier&&N(T.name)&&ie({},s.StrictLHSPrefix),lt(T)||ie({},s.InvalidLHSInAssignment),T=m.createUnaryExpression(w.value,T),T=m.markEnd(T,$)):ce("+")||ce("-")||ce("~")||ce("!")?($=D,w=tt(),T=qn(),T=m.createUnaryExpression(w.value,T),T=m.markEnd(T,$)):pe("delete")||pe("void")||pe("typeof")?($=D,w=tt(),T=qn(),T=m.createUnaryExpression(w.value,T),T=m.markEnd(T,$),f&&T.operator==="delete"&&T.argument.type===a.Identifier&&ie({},s.StrictDelete)):T=zn(),T}function ia(w,T){var $=0;if(w.type!==r.Punctuator&&w.type!==r.Keyword)return 0;switch(w.value){case"||":$=1;break;case"&&":$=2;break;case"|":$=3;break;case"^":$=4;break;case"&":$=5;break;case"==":case"!=":case"===":case"!==":$=6;break;case"<":case">":case"<=":case">=":case"instanceof":$=7;break;case"in":$=T?7:0;break;case"<<":case">>":case">>>":$=8;break;case"+":case"-":$=9;break;case"*":case"/":case"%":$=11;break}return $}function Vi(){var w,T,$,re,be,Ne,vt,Ct,Wt,or;if(w=D,Wt=qn(),re=D,be=ia(re,S.allowIn),be===0)return Wt;for(re.prec=be,tt(),T=[w,D],vt=qn(),Ne=[Wt,re,vt];(be=ia(D,S.allowIn))>0;){for(;Ne.length>2&&be<=Ne[Ne.length-2].prec;)vt=Ne.pop(),Ct=Ne.pop().value,Wt=Ne.pop(),$=m.createBinaryExpression(Ct,Wt,vt),T.pop(),w=T[T.length-1],m.markEnd($,w),Ne.push($);re=tt(),re.prec=be,Ne.push(re),T.push(D),$=qn(),Ne.push($)}for(or=Ne.length-1,$=Ne[or],T.pop();or>1;)$=m.createBinaryExpression(Ne[or-1].value,Ne[or-2],$),or-=2,w=T.pop(),m.markEnd($,w);return $}function za(){var w,T,$,re,be;return be=D,w=Vi(),ce("?")&&(tt(),T=S.allowIn,S.allowIn=!0,$=Br(),S.allowIn=T,se(":"),re=Br(),w=m.createConditionalExpression(w,$,re),m.markEnd(w,be)),w}function Br(){var w,T,$,re,be;return w=D,be=D,re=T=za(),Te()&&(lt(T)||ie({},s.InvalidLHSInAssignment),f&&T.type===a.Identifier&&N(T.name)&&ie(w,s.StrictLHSAssignment),w=tt(),$=Br(),re=m.markEnd(m.createAssignmentExpression(w.value,T,$),be)),re}function ir(){var w,T=D;if(w=Br(),ce(",")){for(w=m.createSequenceExpression([w]);p<v&&ce(",");)tt(),w.expressions.push(Br());m.markEnd(w,T)}return w}function qa(){for(var w=[],T;p<v&&!(ce("}")||(T=Pn(),typeof T>"u"));)w.push(T);return w}function mi(){var w,T;return T=D,se("{"),w=qa(),se("}"),m.markEnd(m.createBlockStatement(w),T)}function mn(){var w,T;return T=D,w=tt(),w.type!==r.Identifier&&me(w),m.markEnd(m.createIdentifier(w.value),T)}function ti(w){var T=null,$,re;return re=D,$=mn(),f&&N($.name)&&ie({},s.StrictVarName),w==="const"?(se("="),T=Br()):ce("=")&&(tt(),T=Br()),m.markEnd(m.createVariableDeclarator($,T),re)}function ji(w){var T=[];do{if(T.push(ti(w)),!ce(","))break;tt()}while(p<v);return T}function Wa(){var w;return Ce("var"),w=ji(),We(),m.createVariableDeclaration(w,"var")}function Ha(w){var T,$;return $=D,Ce(w),T=ji(w),We(),m.markEnd(m.createVariableDeclaration(T,w),$)}function aa(){return se(";"),m.createEmptyStatement()}function $a(){var w=ir();return We(),m.createExpressionStatement(w)}function Ga(){var w,T,$;return Ce("if"),se("("),w=ir(),se(")"),T=$r(),pe("else")?(tt(),$=$r()):$=null,m.createIfStatement(w,T,$)}function Ka(){var w,T,$;return Ce("do"),$=S.inIteration,S.inIteration=!0,w=$r(),S.inIteration=$,Ce("while"),se("("),T=ir(),se(")"),ce(";")&&tt(),m.createDoWhileStatement(w,T)}function Ya(){var w,T,$;return Ce("while"),se("("),w=ir(),se(")"),$=S.inIteration,S.inIteration=!0,T=$r(),S.inIteration=$,m.createWhileStatement(w,T)}function Za(){var w,T,$;return $=D,w=tt(),T=ji(),m.markEnd(m.createVariableDeclaration(T,w.value),$)}function Ja(){var w,T,$,re,be,Ne,vt,Ct=S.allowIn;return w=T=$=null,Ce("for"),se("("),ce(";")?tt():(pe("var")||pe("let")?(S.allowIn=!1,w=Za(),S.allowIn=Ct,w.declarations.length===1&&pe("in")&&(tt(),re=w,be=ir(),w=null)):(S.allowIn=!1,w=ir(),S.allowIn=Ct,pe("in")&&(lt(w)||ie({},s.InvalidLHSInForIn),tt(),re=w,be=ir(),w=null)),typeof re>"u"&&se(";")),typeof re>"u"&&(ce(";")||(T=ir()),se(";"),ce(")")||($=ir())),se(")"),vt=S.inIteration,S.inIteration=!0,Ne=$r(),S.inIteration=vt,typeof re>"u"?m.createForStatement(w,T,$,Ne):m.createForInStatement(re,be,Ne)}function _i(){var w=null,T;return Ce("continue"),c.charCodeAt(p)===59?(tt(),S.inIteration||Q({},s.IllegalContinue),m.createContinueStatement(null)):K()?(S.inIteration||Q({},s.IllegalContinue),m.createContinueStatement(null)):(D.type===r.Identifier&&(w=mn(),T="$"+w.name,Object.prototype.hasOwnProperty.call(S.labelSet,T)||Q({},s.UnknownLabel,w.name)),We(),w===null&&!S.inIteration&&Q({},s.IllegalContinue),m.createContinueStatement(w))}function Qa(){var w=null,T;return Ce("break"),c.charCodeAt(p)===59?(tt(),S.inIteration||S.inSwitch||Q({},s.IllegalBreak),m.createBreakStatement(null)):K()?(S.inIteration||S.inSwitch||Q({},s.IllegalBreak),m.createBreakStatement(null)):(D.type===r.Identifier&&(w=mn(),T="$"+w.name,Object.prototype.hasOwnProperty.call(S.labelSet,T)||Q({},s.UnknownLabel,w.name)),We(),w===null&&!(S.inIteration||S.inSwitch)&&Q({},s.IllegalBreak),m.createBreakStatement(w))}function bi(){var w=null;return Ce("return"),S.inFunctionBody||ie({},s.IllegalReturn),c.charCodeAt(p)===32&&z(c.charCodeAt(p+1))?(w=ir(),We(),m.createReturnStatement(w)):K()?m.createReturnStatement(null):(ce(";")||!ce("}")&&D.type!==r.EOF&&(w=ir()),We(),m.createReturnStatement(w))}function Xa(){var w,T;return f&&(te(),ie({},s.StrictModeWith)),Ce("with"),se("("),w=ir(),se(")"),T=$r(),m.createWithStatement(w,T)}function eu(){var w,T=[],$,re;for(re=D,pe("default")?(tt(),w=null):(Ce("case"),w=ir()),se(":");p<v&&!(ce("}")||pe("default")||pe("case"));)$=$r(),T.push($);return m.markEnd(m.createSwitchCase(w,T),re)}function tu(){var w,T,$,re,be;if(Ce("switch"),se("("),w=ir(),se(")"),se("{"),T=[],ce("}"))return tt(),m.createSwitchStatement(w,T);for(re=S.inSwitch,S.inSwitch=!0,be=!1;p<v&&!ce("}");)$=eu(),$.test===null&&(be&&Q({},s.MultipleDefaultsInSwitch),be=!0),T.push($);return S.inSwitch=re,se("}"),m.createSwitchStatement(w,T)}function ua(){var w;return Ce("throw"),K()&&Q({},s.NewlineAfterThrow),w=ir(),We(),m.createThrowStatement(w)}function Wn(){var w,T,$;return $=D,Ce("catch"),se("("),ce(")")&&me(D),w=mn(),f&&N(w.name)&&ie({},s.StrictCatchVariable),se(")"),T=mi(),m.markEnd(m.createCatchClause(w,T),$)}function yr(){var w,T=[],$=null;return Ce("try"),w=mi(),pe("catch")&&T.push(Wn()),pe("finally")&&(tt(),$=mi()),T.length===0&&!$&&Q({},s.NoCatchOrFinally),m.createTryStatement(w,[],T,$)}function sr(){return Ce("debugger"),We(),m.createDebuggerStatement()}function $r(){var w=D.type,T,$,re,be;if(w===r.EOF&&me(D),w===r.Punctuator&&D.value==="{")return mi();if(be=D,w===r.Punctuator)switch(D.value){case";":return m.markEnd(aa(),be);case"(":return m.markEnd($a(),be)}if(w===r.Keyword)switch(D.value){case"break":return m.markEnd(Qa(),be);case"continue":return m.markEnd(_i(),be);case"debugger":return m.markEnd(sr(),be);case"do":return m.markEnd(Ka(),be);case"for":return m.markEnd(Ja(),be);case"function":return m.markEnd(Hn(),be);case"if":return m.markEnd(Ga(),be);case"return":return m.markEnd(bi(),be);case"switch":return m.markEnd(tu(),be);case"throw":return m.markEnd(ua(),be);case"try":return m.markEnd(yr(),be);case"var":return m.markEnd(Wa(),be);case"while":return m.markEnd(Ya(),be);case"with":return m.markEnd(Xa(),be)}return T=ir(),T.type===a.Identifier&&ce(":")?(tt(),re="$"+T.name,Object.prototype.hasOwnProperty.call(S.labelSet,re)&&Q({},s.Redeclaration,"Label",T.name),S.labelSet[re]=!0,$=$r(),delete S.labelSet[re],m.markEnd(m.createLabeledStatement(T,$),be)):(We(),m.markEnd(m.createExpressionStatement(T),be))}function zi(){var w,T=[],$,re,be,Ne,vt,Ct,Wt,or;for(or=D,se("{");p<v&&!(D.type!==r.StringLiteral||($=D,w=Pn(),T.push(w),w.expression.type!==a.Literal));)re=c.slice($.start+1,$.end-1),re==="use strict"?(f=!0,be&&ie(be,s.StrictOctalLiteral)):!be&&$.octal&&(be=$);for(Ne=S.labelSet,vt=S.inIteration,Ct=S.inSwitch,Wt=S.inFunctionBody,S.labelSet={},S.inIteration=!1,S.inSwitch=!1,S.inFunctionBody=!0;p<v&&!(ce("}")||(w=Pn(),typeof w>"u"));)T.push(w);return se("}"),S.labelSet=Ne,S.inIteration=vt,S.inSwitch=Ct,S.inFunctionBody=Wt,m.markEnd(m.createBlockStatement(T),or)}function ri(w){var T,$=[],re,be,Ne,vt,Ct;if(se("("),!ce(")"))for(Ne={};p<v&&(re=D,T=mn(),vt="$"+re.value,f?(N(re.value)&&(be=re,Ct=s.StrictParamName),Object.prototype.hasOwnProperty.call(Ne,vt)&&(be=re,Ct=s.StrictParamDupe)):w||(N(re.value)?(w=re,Ct=s.StrictParamName):R(re.value)?(w=re,Ct=s.StrictReservedWord):Object.prototype.hasOwnProperty.call(Ne,vt)&&(w=re,Ct=s.StrictParamDupe)),$.push(T),Ne[vt]=!0,!ce(")"));)se(",");return se(")"),{params:$,stricted:be,firstRestricted:w,message:Ct}}function Hn(){var w,T=[],$,re,be,Ne,vt,Ct,Wt,or;return or=D,Ce("function"),re=D,w=mn(),f?N(re.value)&&ie(re,s.StrictFunctionName):N(re.value)?(vt=re,Ct=s.StrictFunctionName):R(re.value)&&(vt=re,Ct=s.StrictReservedWord),Ne=ri(vt),T=Ne.params,be=Ne.stricted,vt=Ne.firstRestricted,Ne.message&&(Ct=Ne.message),Wt=f,$=zi(),f&&vt&&Q(vt,Ct),f&&be&&ie(be,Ct),f=Wt,m.markEnd(m.createFunctionDeclaration(w,T,[],$),or)}function qi(){var w,T=null,$,re,be,Ne,vt=[],Ct,Wt,or;return or=D,Ce("function"),ce("(")||(w=D,T=mn(),f?N(w.value)&&ie(w,s.StrictFunctionName):N(w.value)?(re=w,be=s.StrictFunctionName):R(w.value)&&(re=w,be=s.StrictReservedWord)),Ne=ri(re),vt=Ne.params,$=Ne.stricted,re=Ne.firstRestricted,Ne.message&&(be=Ne.message),Wt=f,Ct=zi(),f&&re&&Q(re,be),f&&$&&ie($,be),f=Wt,m.markEnd(m.createFunctionExpression(T,vt,[],Ct),or)}function Pn(){if(D.type===r.Keyword)switch(D.value){case"const":case"let":return Ha(D.value);case"function":return Hn();default:return $r()}if(D.type!==r.EOF)return $r()}function _n(){for(var w,T=[],$,re,be;p<v&&($=D,!($.type!==r.StringLiteral||(w=Pn(),T.push(w),w.expression.type!==a.Literal)));)re=c.slice($.start+1,$.end-1),re==="use strict"?(f=!0,be&&ie(be,s.StrictOctalLiteral)):!be&&$.octal&&(be=$);for(;p<v&&(w=Pn(),!(typeof w>"u"));)T.push(w);return T}function To(){var w,T;return te(),pr(),T=D,f=!1,w=_n(),m.markEnd(m.createProgram(w),T)}function ru(){var w,T,$,re=[];for(w=0;w<y.tokens.length;++w)T=y.tokens[w],$={type:T.type,value:T.value},y.range&&($.range=T.range),y.loc&&($.loc=T.loc),re.push($);y.tokens=re}function sa(w,T){var $,re,be;$=String,typeof w!="string"&&!(w instanceof String)&&(w=$(w)),m=h,c=w,p=0,g=c.length>0?1:0,b=0,v=c.length,D=null,S={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},y={},T=T||{},T.tokens=!0,y.tokens=[],y.tokenize=!0,y.openParenToken=-1,y.openCurlyToken=-1,y.range=typeof T.range=="boolean"&&T.range,y.loc=typeof T.loc=="boolean"&&T.loc,typeof T.comment=="boolean"&&T.comment&&(y.comments=[]),typeof T.tolerant=="boolean"&&T.tolerant&&(y.errors=[]);try{if(pr(),D.type===r.EOF)return y.tokens;for(re=tt();D.type!==r.EOF;)try{re=tt()}catch(Ne){if(re=D,y.errors){y.errors.push(Ne);break}else throw Ne}ru(),be=y.tokens,typeof y.comments<"u"&&(be.comments=y.comments),typeof y.errors<"u"&&(be.errors=y.errors)}catch(Ne){throw Ne}finally{y={}}return be}function xu(w,T){var $,re;re=String,typeof w!="string"&&!(w instanceof String)&&(w=re(w)),m=h,c=w,p=0,g=c.length>0?1:0,b=0,v=c.length,D=null,S={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},y={},typeof T<"u"&&(y.range=typeof T.range=="boolean"&&T.range,y.loc=typeof T.loc=="boolean"&&T.loc,y.attachComment=typeof T.attachComment=="boolean"&&T.attachComment,y.loc&&T.source!==null&&T.source!==void 0&&(y.source=re(T.source)),typeof T.tokens=="boolean"&&T.tokens&&(y.tokens=[]),typeof T.comment=="boolean"&&T.comment&&(y.comments=[]),typeof T.tolerant=="boolean"&&T.tolerant&&(y.errors=[]),y.attachComment&&(y.range=!0,y.comments=[],y.bottomRightStack=[],y.trailingComments=[],y.leadingComments=[]));try{$=To(),typeof y.comments<"u"&&($.comments=y.comments),typeof y.tokens<"u"&&(ru(),$.tokens=y.tokens),typeof y.errors<"u"&&($.errors=y.errors)}catch(be){throw be}finally{y={}}return $}e.version="1.2.5",e.tokenize=sa,e.parse=xu,e.Syntax=function(){var w,T={};typeof Object.create=="function"&&(T=Object.create(null));for(w in a)a.hasOwnProperty(w)&&(T[w]=a[w]);return typeof Object.freeze=="function"&&Object.freeze(T),T}()})})(og);var h5=og,ep=ag,d5=0;function p5(t,e,r){this.name=t,this.lvalue=e,this.rvalue=r,this.count=0}function g5(t,e,r,n){this.body=t,this.args=e,this.thisVars=r,this.localVars=n}function v5(t){if(t==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?t in window:typeof dr<"u"?t in dr:typeof self<"u"?t in self:!1}function m5(t){for(var e=t.body[0].expression.callee.params,r=new Array(e.length),n=0;n<e.length;++n)r[n]=e[n].name;return r}function _5(t){for(var e=["(",t,")()"].join(""),r=h5.parse(e,{range:!0}),n="_inline_"+d5+++"_",i=m5(r),a=new Array(i.length),o=0;o<i.length;++o)a[o]=new p5([n,"arg",o,"_"].join(""),!1,!1);for(var s=new Array(e.length),o=0,l=e.length;o<l;++o)s[o]=e.charAt(o);var h=[],c=[];function f(A){var C=n+A.replace(/\_/g,"__");return h.push(C),C}function p(A){var C="this_"+A.replace(/\_/g,"__");return c.push(C),C}function g(A,C){for(var P=A.range[0],O=A.range[1],F=P+1;F<O;++F)s[F]="";s[P]=C}function b(A){return"'"+A.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function v(A){return s.slice(A.range[0],A.range[1]).join("")}var m=1,D=2;function S(A){return A.parent.type==="AssignmentExpression"&&A.parent.left===A?A.parent.operator==="="?m:m|D:A.parent.type==="UpdateExpression"?m|D:D}(function A(C,P){if(C.parent=P,C.type==="MemberExpression")C.computed?(A(C.object,C),A(C.property,C)):C.object.type==="ThisExpression"?g(C,p(C.property.name)):A(C.object,C);else{if(C.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(C.type==="Identifier"){var O=C.name,F=i.indexOf(O);if(F>=0){var x=a[F],z=S(C);z&m&&(x.lvalue=!0),z&D&&(x.rvalue=!0),++x.count,g(C,x.name)}else v5(O)||g(C,f(O))}else if(C.type==="Literal")typeof C.value=="string"&&g(C,b(C.value));else{if(C.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var G=Object.keys(C),J=0,R=G.length;J<R;++J)if(G[J]!=="parent"){var N=C[G[J]];if(N)if(N instanceof Array)for(var j=0;j<N.length;++j)N[j]&&typeof N[j].type=="string"&&A(N[j],C);else typeof N.type=="string"&&A(N,C)}}}})(r.body[0].expression.callee.body,void 0),ep(h),ep(c);var y=new g5(v(r.body[0].expression.callee.body),a,c,h);return y}var b5=_5,gc=b5,D5=gf,Bs=["args","body"],w5=["pre","post","printCode","funcName","blockSize"];function y5(t){for(var e in t)Bs.indexOf(e)<0&&w5.indexOf(e)<0&&console.warn("cwise: Unknown argument '"+e+"' passed to expression compiler");for(var r=0;r<Bs.length;++r)if(!t[Bs[r]])throw new Error("cwise: Missing argument: "+Bs[r]);return D5({args:t.args,pre:gc(t.pre||function(){}),body:gc(t.body),post:gc(t.post||function(){}),debug:!!t.printCode,funcName:t.funcName||t.body.name||"cwise",blockSize:t.blockSize||64})}var ko=y5,E5=f5,A5=ko,C5=A5({args:["array","scalar","index"],body:function(e,r,n){var i=r,a;for(a=0;a<n.length-1;++a)i=i[n[a]];i[n[n.length-1]]=e}}),F5=function(e){var r=E5(e.shape);return C5(e,r),r},io={},S5={get exports(){return io},set exports(t){io=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(o,s){for(var l=new Float64Array(o*s),h=0;h<l.length;h++)l[h]=a()*1e-4;return(0,n.default)(l,[o,s])};var r=ja,n=i(r);function i(o){return o&&o.__esModule?o:{default:o}}function a(){var o=2*Math.random()-1,s=2*Math.random()-1,l=o*o+s*s;return l==0||l>1?a():o*Math.sqrt(-2*Math.log(l)/l)}t.exports=e.default})(S5,io);var Mu={},B5={get exports(){return Mu},set exports(t){Mu=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(f,p){var g=f.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]);switch(p){case"euclidean":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=s(f.pick(v,null),f.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break;case"manhattan":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=l(f.pick(v,null),f.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break;case"jaccard":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=h(f.pick(v,null),f.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break;case"dice":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=c(f.pick(v,null),f.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break}return b};var r=ja,n=o(r),i=ko,a=o(i);function o(f){return f&&f.__esModule?f:{default:f}}var s=(0,a.default)({args:["array","array"],pre:function(p,g){this.sum=0},body:function(p,g){var b=p-g;this.sum+=b*b},post:function(p,g){return Math.sqrt(this.sum)}}),l=(0,a.default)({args:["array","array"],pre:function(p,g){this.sum=0},body:function(p,g){this.sum+=Math.abs(p-g)},post:function(p,g){return this.sum}}),h=(0,a.default)({args:["array","array"],pre:function(p,g){this.tf=0,this.tt=0},body:function(p,g){var b=Math.round(p),v=Math.round(g);this.tf+=+(b!=v),this.tt+=+(b==1&&v==1)},post:function(p,g){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),c=(0,a.default)({args:["array","array"],pre:function(p,g){this.tf=0,this.tt=0},body:function(p,g){var b=Math.round(p),v=Math.round(g);this.tf+=+(b!=v),this.tt+=+(b==1&&v==1)},post:function(p,g){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});t.exports=e.default})(B5,Mu);var ao={},O5={get exports(){return ao},set exports(t){ao=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(c,f){for(var p=100,g=c.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]),v=(0,n.default)(new Float64Array(g*g),[g,g]),m=void 0,D=void 0,S=1/0,y=Math.log(f),A=void 0,C=void 0,P=void 0,O=void 0,F=0;F<g;F++){m=1,D=-1/0,S=1/0;for(var x=0;x<p;x++){for(var z=0;z<g;z++)b.set(F,z,Math.exp(-c.get(F,z)*m));b.set(F,F,0),P=0;for(var z=0;z<g;z++)P+=b.get(F,z);P==0&&(P=s),O=0;for(var z=0;z<g;z++)b.set(F,z,b.get(F,z)/P),O+=c.get(F,z)*b.get(F,z);if(C=Math.log(P)+m*O,A=C-y,Math.abs(A)<=h)break;A>0?(D=m,S==1/0?m=m*2:m=(m+S)/2):(S=m,D==-1/0?m=m/2:m=(m+D)/2)}}a.default.add(v,b,b.transpose(1,0));var G=Math.max(a.default.sum(v),l);return a.default.divseq(v,G),a.default.maxseq(v,l),v};var r=ja,n=o(r),i=Po,a=o(i);function o(c){return c&&c.__esModule?c:{default:c}}var s=1e-7,l=Number.EPSILON||2220446049250313e-31,h=1e-5;t.exports=e.default})(O5,ao);var uo={},M5={get exports(){return uo},set exports(t){uo=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(g,b,v){var m=g.shape[0],D=g.shape[1],S=(0,n.default)(new Float64Array(m*m),[m,m]),y=(0,h.default)(g,"euclidean");p(y);var A=(v+1)/-2;a.default.powseq(a.default.divseq(a.default.addseq(y,1),v),A);for(var C=0;C<m;C++)y.set(C,C,0);var P=Math.max(a.default.sum(y),f);a.default.divs(S,y,P),a.default.maxseq(S,f);var O=(0,n.default)(new Float64Array(m*m),[m,m]),F=(0,n.default)(new Float64Array(m*m),[m,m]);a.default.div(O,b,S),a.default.logeq(O),a.default.assign(F,b);var x=a.default.sum(a.default.muleq(O,F)),z=(0,n.default)(new Float64Array(g.size),g.shape),G=(0,n.default)(new Float64Array(m*m),[m,m]);a.default.sub(G,b,S),a.default.muleq(G,y);for(var C=0;C<m;C++)for(var J=0;J<D;J++){var R=(0,n.default)(new Float64Array(g.shape[0]),[g.shape[0]]);a.default.assign(R,g.pick(null,J)),a.default.addseq(a.default.negeq(R),g.get(C,J)),a.default.muleq(R,G.pick(C,null)),z.set(C,J,a.default.sum(R))}var N=2*(v+1)/v;return a.default.mulseq(z,N),[x,z]};var r=ja,n=c(r),i=Po,a=c(i),o=ko,s=c(o),l=Mu,h=c(l);function c(g){return g&&g.__esModule?g:{default:g}}var f=Number.EPSILON||2220446049250313e-31,p=(0,s.default)({args:["array"],body:function(b){}});t.exports=e.default})(M5,uo);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function R(N,j){var q=[],Z=!0,X=!1,te=void 0;try{for(var fe=N[Symbol.iterator](),he;!(Z=(he=fe.next()).done)&&(q.push(he.value),!(j&&q.length===j));Z=!0);}catch(ge){X=!0,te=ge}finally{try{!Z&&fe.return&&fe.return()}finally{if(X)throw te}}return q}return function(N,j){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return R(N,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function R(N,j){for(var q=0;q<j.length;q++){var Z=j[q];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(N,Z.key,Z)}}return function(N,j,q){return j&&R(N.prototype,j),q&&R(N,q),N}}(),i=ro,a=ja,o=O(a),s=Po,l=O(s),h=o5,c=O(h),f=F5,p=O(f),g=ko,b=O(g),v=io,m=O(v),D=Mu,S=O(D),y=ao,A=O(y),C=uo,P=O(C);function O(R){return R&&R.__esModule?R:{default:R}}function F(R){if(Array.isArray(R)){for(var N=0,j=Array(R.length);N<R.length;N++)j[N]=R[N];return j}else return Array.from(R)}function x(R,N){if(!(R instanceof N))throw new TypeError("Cannot call a class as a function")}function z(R,N){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:R}function G(R,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);R.prototype=Object.create(N&&N.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(R,N):R.__proto__=N)}var J=function(R){G(N,R);function N(j){x(this,N);var q=z(this,Object.getPrototypeOf(N).call(this));return j=j||{},q.dim=j.dim||2,q.perplexity=j.perplexity||30,q.earlyExaggeration=j.earlyExaggeration||4,q.learningRate=j.learningRate||1e3,q.nIter=j.nIter||1e3,q.metric=j.metric||"euclidean",q.barneshut=j.barneshut||!1,q.inputData=null,q.outputEmbedding=null,q}return n(N,[{key:"init",value:function(q){q=q||{};var Z=q.data||[],X=q.type||"dense";if(X==="dense")this.inputData=(0,c.default)(Z);else if(X==="sparse"){for(var te=[],fe=1,he=function(Et){var At=Math.max.apply(null,Z.map(function(ct){return ct[Et]}))+1;te.push(At),fe*=At},ge=0;ge<Z[0].length;ge++)he(ge);this.inputData=(0,o.default)(new Float64Array(fe),te);var _e=!0,Be=!1,ke=void 0;try{for(var Ie=Z[Symbol.iterator](),qe;!(_e=(qe=Ie.next()).done);_e=!0){var it,at=qe.value;(it=this.inputData).set.apply(it,F(at).concat([1]))}}catch(et){Be=!0,ke=et}finally{try{!_e&&Ie.return&&Ie.return()}finally{if(Be)throw ke}}}else throw new Error("input data type must be dense or sparse");this.outputEmbedding=(0,m.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,S.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,A.default)(this.distances,this.perplexity);var q=Number.MAX_VALUE,Z=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),l.default.mulseq(this.P,this.earlyExaggeration);var X=this._gradDesc(Z,50,.5,0,0),te=r(X,2);q=te[0],Z=te[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var fe=this._gradDesc(Z+1,100,.8,0,0),he=r(fe,2);q=he[0],Z=he[1],this.emit("progressStatus","Final optimization with momentum 0.8"),l.default.divseq(this.P,this.earlyExaggeration);var ge=this._gradDesc(Z+1,this.nIter,.8,1e-6,1e-6),_e=r(ge,2);return q=_e[0],Z=_e[1],this.emit("progressStatus","Optimization end"),[q,Z]}},{key:"rerun",value:function(){this.outputEmbedding=(0,m.default)(this.inputData.shape[0],this.dim);var q=this.run(),Z=r(q,2),X=Z[0],te=Z[1];return[X,te]}},{key:"getOutput",value:function(){return(0,p.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var q=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),Z=(0,o.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),X=0;X<this.outputEmbedding.shape[1];X++){var te=l.default.sup(l.default.abs(Z,this.outputEmbedding.pick(null,X)));l.default.divs(q.pick(null,X),this.outputEmbedding.pick(null,X),te)}return(0,p.default)(q)}},{key:"_gradDesc",value:function(q,Z,X){for(var te=arguments.length<=3||arguments[3]===void 0?1e-6:arguments[3],fe=arguments.length<=4||arguments[4]===void 0?1e-6:arguments[4],he=30,ge=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),_e=new Float64Array(this.outputEmbedding.size),Be=0;Be<_e.length;Be++)_e[Be]=1;var ke=(0,o.default)(_e,this.outputEmbedding.shape),Ie=Number.MAX_VALUE,qe=Number.MAX_VALUE,it=0,at=(0,b.default)({args:["array"],pre:function(pr){this.sum=0},body:function(pr){this.sum+=pr*pr},post:function(pr){return Math.sqrt(this.sum)}}),et=(0,b.default)({args:["array","array","array"],body:function(pr,Sr,On){}}),Et=void 0;for(Et=q;Et<Z;Et++){var At=(0,P.default)(this.outputEmbedding,this.P,this.alpha),ct=r(At,2),ot=ct[0],Pt=ct[1],Wr=Math.abs(ot-Ie);Ie=ot;var Ut=at(Pt);if(this.emit("progressIter",[Et,Ie,Ut]),Ie<qe)qe=Ie,it=Et;else if(Et-it>he)break;if(te>=Ut||fe>=Wr)break;et(ke,ge,Pt),l.default.muleq(Pt,ke);var Hr=(0,o.default)(new Float64Array(Pt.size),Pt.shape);l.default.muls(Hr,Pt,this.learningRate),l.default.mulseq(ge,X),l.default.subeq(ge,Hr),l.default.addeq(this.outputEmbedding,ge),this.emit("progressData",this.getOutputScaled())}return[Ie,Et]}}]),N}(i.EventEmitter);e.default=J,t.exports=e.default})(CF,to);const P5=Qc(to);var jc={},k5={get exports(){return jc},set exports(t){jc=t}};(function(t){var e=parseInt(Number.MAX_SAFE_INTEGER/2)||4503599627370496,r=0;function n(){this.C=null,this.row_covered=[],this.col_covered=[],this.n=0,this.Z0_r=0,this.Z0_c=0,this.marked=null,this.path=null}n.prototype.pad_matrix=function(s,l){l=l||r;var h=0,c=s.length,f;for(f=0;f<c;++f)s[f].length>h&&(h=s[f].length);c=h>c?h:c;var p=[];for(f=0;f<c;++f){for(var g=s[f]||[],b=g.slice();c>b.length;)b.push(l);p.push(b)}return p},n.prototype.compute=function(s,l){l=l||{},l.padValue=l.padValue||r,this.C=this.pad_matrix(s,l.padValue),this.n=this.C.length,this.original_length=s.length,this.original_width=s[0].length;for(var h=[];h.length<this.n;)h.push(!1);this.row_covered=h.slice(),this.col_covered=h.slice(),this.Z0_r=0,this.Z0_c=0,this.path=this.__make_matrix(this.n*2,0),this.marked=this.__make_matrix(this.n,0);for(var c=1,f={1:this.__step1,2:this.__step2,3:this.__step3,4:this.__step4,5:this.__step5,6:this.__step6};;){var p=f[c];if(!p)break;c=p.apply(this)}for(var g=[],b=0;b<this.original_length;++b)for(var v=0;v<this.original_width;++v)this.marked[b][v]==1&&g.push([b,v]);return g},n.prototype.__make_matrix=function(s,l){for(var h=[],c=0;c<s;++c){h[c]=[];for(var f=0;f<s;++f)h[c][f]=l}return h},n.prototype.__step1=function(){for(var s=0;s<this.n;++s)for(var l=Math.min.apply(Math,this.C[s]),h=0;h<this.n;++h)this.C[s][h]-=l;return 2},n.prototype.__step2=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)if(this.C[s][l]===0&&!this.col_covered[l]&&!this.row_covered[s]){this.marked[s][l]=1,this.col_covered[l]=!0,this.row_covered[s]=!0;break}return this.__clear_covers(),3},n.prototype.__step3=function(){for(var s=0,l=0;l<this.n;++l)for(var h=0;h<this.n;++h)this.marked[l][h]==1&&this.col_covered[h]==!1&&(this.col_covered[h]=!0,++s);return s>=this.n?7:4},n.prototype.__step4=function(){for(var s=!1,l=-1,h=-1,c=-1;!s;){var f=this.__find_a_zero();if(l=f[0],h=f[1],l<0)return 6;if(this.marked[l][h]=2,c=this.__find_star_in_row(l),c>=0)h=c,this.row_covered[l]=!0,this.col_covered[h]=!1;else return this.Z0_r=l,this.Z0_c=h,5}},n.prototype.__step5=function(){var s=0;this.path[s][0]=this.Z0_r,this.path[s][1]=this.Z0_c;for(var l=!1;!l;){var h=this.__find_star_in_col(this.path[s][1]);if(h>=0?(s++,this.path[s][0]=h,this.path[s][1]=this.path[s-1][1]):l=!0,!l){var c=this.__find_prime_in_row(this.path[s][0]);s++,this.path[s][0]=this.path[s-1][0],this.path[s][1]=c}}return this.__convert_path(this.path,s),this.__clear_covers(),this.__erase_primes(),3},n.prototype.__step6=function(){for(var s=this.__find_smallest(),l=0;l<this.n;++l)for(var h=0;h<this.n;++h)this.row_covered[l]&&(this.C[l][h]+=s),this.col_covered[h]||(this.C[l][h]-=s);return 4},n.prototype.__find_smallest=function(){for(var s=e,l=0;l<this.n;++l)for(var h=0;h<this.n;++h)!this.row_covered[l]&&!this.col_covered[h]&&s>this.C[l][h]&&(s=this.C[l][h]);return s},n.prototype.__find_a_zero=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)if(this.C[s][l]===0&&!this.row_covered[s]&&!this.col_covered[l])return[s,l];return[-1,-1]},n.prototype.__find_star_in_row=function(s){for(var l=0;l<this.n;++l)if(this.marked[s][l]==1)return l;return-1},n.prototype.__find_star_in_col=function(s){for(var l=0;l<this.n;++l)if(this.marked[l][s]==1)return l;return-1},n.prototype.__find_prime_in_row=function(s){for(var l=0;l<this.n;++l)if(this.marked[s][l]==2)return l;return-1},n.prototype.__convert_path=function(s,l){for(var h=0;h<=l;++h)this.marked[s[h][0]][s[h][1]]=this.marked[s[h][0]][s[h][1]]==1?0:1},n.prototype.__clear_covers=function(){for(var s=0;s<this.n;++s)this.row_covered[s]=!1,this.col_covered[s]=!1},n.prototype.__erase_primes=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)this.marked[s][l]==2&&(this.marked[s][l]=0)};function i(s,l){var h,c;if(!l){var f=-1/0;for(h=0;h<s.length;++h)for(c=0;c<s[h].length;++c)s[h][c]>f&&(f=s[h][c]);l=function(b){return f-b}}var p=[];for(h=0;h<s.length;++h){var g=s[h];for(p[h]=[],c=0;c<g.length;++c)p[h][c]=l(s[h][c])}return p}function a(s){var l=[],h,c;for(h=0;h<s.length;++h)for(c=0;c<s[h].length;++c){var f=String(s[h][c]).length;(!l[c]||f>=l[c])&&(l[c]=f)}var p="";for(h=0;h<s.length;++h){for(c=0;c<s[h].length;++c){for(var g=String(s[h][c]);g.length<l[c];)g=" "+g;p+=g,c!=s[h].length-1&&(p+=" ")}h!=s[h].length-1&&(p+=`
`)}return p}function o(s,l){var h=new n;return h.compute(s,l)}o.version="1.2.2",o.format_matrix=a,o.make_cost_matrix=i,o.Munkres=n,t.exports&&(t.exports=o)})(k5);const T5=jc;function vf(t){return t<2?0:t<4?2:t<6?4:t<8?6:8}function ki(t,e){return new Vc.KMEANS().run(t,e)}function I5(t,e){return t.map(r=>e.map(n=>Ta(r,n)))}function lg(t){switch(t){case 2:return[jr(xr([0,0],[0,1]),.5),jr(xr([1,0],[1,1]),.5)];case 4:return[[0,0],[0,1],[1,1],[1,0]];case 6:return[jr(xr([0,0],[0,1]),.5),jr(xr([1,0],[1,1]),.5),[0,0],[0,1],[1,1],[1,0]];case 8:return[jr(xr([0,0],[0,1]),.5),jr(xr([1,0],[1,1]),.5),[0,0],[0,1],[1,1],[1,0],jr(xr([0,0],[1,0]),.5),jr(xr([0,1],[1,1]),.5)];default:return[]}}function cg(t,e){if(t.length!==e.length)throw new Error("Both sets should have the same number of points");const r=I5(t,e),n=T5(r);return n?n.map(([i,a])=>({ids:[i,a],points:[t[i],e[a]]})):null}function mf(t){let e=new P5({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:5e3,metric:"euclidean"});const r=Object.keys(t),n=Object.values(t);e.init({data:n,type:"dense"}),e.run();let a=e.getOutputScaled().map(([s,l])=>[(s+1)/2,(l+1)/2]);return r.reduce((s,l,h)=>(s[l]=a[h],s),{})}function x5(t){let e,r,n,i,a,o,s;r=new df({props:{center:t[6],dimensions:t[2],onMarkerMove:t[7],dataPoints:t[4]}}),a=new pf({props:{useExponentialScaling:t[3].embedExponentialScaling,toggleExponentialScaling:t[9],exponentialScaling:t[3].embedWeightScaling,setExponentialScaling:t[10],connectionLimit:t[3].promptLimit||t[5],setConnectionLimit:t[8],maxConnectionLimit:t[5],clusterCount:t[3].embedClusters||0,setClusterCount:t[11],maxClusterCount:t[5],onShuffle:t[12]}});const l=t[18].default,h=xa(l,t,t[17],null);return{c(){e=W("div"),Le(r.$$.fragment),i=Ee(),Le(a.$$.fragment),o=Ee(),h&&h.c(),this.h()},l(c){e=H(c,"DIV",{class:!0});var f=U(e);Re(r.$$.fragment,f),f.forEach(M),i=Ae(c),Re(a.$$.fragment,c),o=Ae(c),h&&h.l(c),this.h()},h(){B(e,"class","w-full h-full"),vi(()=>t[19].call(e))},m(c,f){ue(c,e,f),Ue(r,e,null),n=ta(e,t[19].bind(e)),ue(c,i,f),Ue(a,c,f),ue(c,o,f),h&&h.m(c,f),s=!0},p(c,[f]){const p={};f&64&&(p.center=c[6]),f&4&&(p.dimensions=c[2]),f&16&&(p.dataPoints=c[4]),r.$set(p);const g={};f&8&&(g.useExponentialScaling=c[3].embedExponentialScaling),f&8&&(g.exponentialScaling=c[3].embedWeightScaling),f&40&&(g.connectionLimit=c[3].promptLimit||c[5]),f&32&&(g.maxConnectionLimit=c[5]),f&8&&(g.clusterCount=c[3].embedClusters||0),f&32&&(g.maxClusterCount=c[5]),a.$set(g),h&&h.p&&(!s||f&131072)&&Na(h,l,c,c[17],s?Ra(l,c[17],f,null):La(c[17]),null)},i(c){s||(oe(r.$$.fragment,c),oe(a.$$.fragment,c),oe(h,c),s=!0)},o(c){de(r.$$.fragment,c),de(a.$$.fragment,c),de(h,c),s=!1},d(c){c&&M(e),Ve(r),n(),c&&M(i),Ve(a,c),c&&M(o),h&&h.d(c)}}}function N5(t,e,r){let n,i,a,o,s,l,h,c,f;je(t,Zs,R=>r(16,c=R)),je(t,Ye,R=>r(3,f=R));let{$$slots:p={},$$scope:g}=e,b=0,v=0,m={};function D(R){c&&f.scaledEmbedMappings&&(C(),A(o,l,h,R))}function S(R,N){R&&N&&(C(),A(o,l,h,s))}function y(R,N){A(o,R,N,s)}function A(R,N,j,q){if(!m)return;let Z={...f.weightedPrompts},X=0;const te=Object.entries(m).reduce((ge,[_e,Be])=>{const ke=Ta(R,Be.xy);return ge[parseInt(_e)]=ke,ge},{});Object.entries(te).sort((ge,_e)=>ge[1]-_e[1]).forEach(([ge,_e],Be)=>{if(!Z[parseInt(ge)])return;Be<q+1&&_e>X&&(X=_e*1.1)});const fe=(ge,_e)=>{const Be=ge?Math.round(Math.pow(1-_e/X,j)*100)/100:0;return Be<0?0:Be},he=(ge,_e)=>{const Be=ge?Math.round((1-_e/X)*100)/100:0;return Be<0?0:Be};Object.entries(te).sort((ge,_e)=>ge[1]-_e[1]).forEach(([ge,_e],Be)=>{if(!Z[parseInt(ge)])return;const ke=Be<q,Ie=N?fe(ke,_e):he(ke,_e);Z[parseInt(ge)]={...Z[parseInt(ge)],embedWeight:Ie},r(4,m[parseInt(ge)].opacity=Jr(Ie),m),r(4,m[parseInt(ge)].connected=ke,m)}),Ye.update({...f,embedMarker:o,weightedPrompts:Z})}function C(){if(!c||!f.scaledEmbedMappings)return;const R=Object.keys(f.scaledEmbedMappings),N=q=>{if(!q.length)return i;const Z=q.map(X=>j[X].xy);return Ws(Z)},j=R.reduce((q,Z,X)=>(q[Z]={xy:f.scaledEmbedMappings[X],text:f.weightedPrompts[X].text,connected:!0,opacity:1},q),{});if(f.embedClusters&&f.embedClusterSets){const q=f.embedClusters,Z=f.embedClusterSets[q];let X=Z.map(he=>N(he));const te=lg(q),fe=cg(X,te);fe&&fe.forEach(he=>{const ge=he.ids[0],_e=he.points[1];Z[ge].forEach(Be=>{j[Be].xy=Ws([j[Be].xy,_e])})})}r(4,m=j)}function P(R){o=R,A(o,l,h,s)}function O(R){R>0&&R<=a&&Ye.update({...f,promptLimit:R})}function F(){Ye.update({...f,embedExponentialScaling:!f.embedExponentialScaling})}function x(R){Ye.update({...f,embedWeightScaling:R})}function z(R){[0,2,4,6,8].indexOf(R)!==-1&&Ye.update({...f,embedClusters:R})}async function G(){Ye.update({...f,scaledEmbedMappings:mf(c)})}function J(){b=this.clientWidth,v=this.clientHeight,r(0,b),r(1,v)}return t.$$set=R=>{"$$scope"in R&&r(17,g=R.$$scope)},t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[b||250,v||250]),t.$$.dirty&4&&r(6,i=na(n)),t.$$.dirty&8&&r(5,a=Object.keys(f.weightedPrompts||{}).length),t.$$.dirty&8&&(o=f.embedMarker||[.5,.5]),t.$$.dirty&8&&r(13,s=f.promptLimit||Object.keys(f.weightedPrompts).length),t.$$.dirty&8&&r(15,l=f.embedExponentialScaling),t.$$.dirty&8&&r(14,h=f.embedWeightScaling),t.$$.dirty&65544&&c&&Object.keys(c).length<f.embedClusters&&z(vf(Object.keys(c).length)),t.$$.dirty&49152&&y(l,h),t.$$.dirty&65544&&S(c,f.scaledEmbedMappings),t.$$.dirty&8192&&D(s)},[b,v,n,f,m,a,i,P,O,F,x,z,G,s,h,l,c,g,p,J]}class L5 extends Ze{constructor(e){super(),Je(this,e,N5,x5,Qe,{})}}const tp="concept";function R5(){const t=Yt({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith(tp+"_")){const s=o.split(/_(.*)/s)[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{if(!a||!i)return;const s=St(t);s[a]=o,r(s)},cache:a=>{if(!i)return;const o=St(t),s=Object.values(Ye.get().weightedPrompts).map(l=>l.text);Object.entries(o).sort(([l,h],[c,f])=>s.includes(l)&&!s.includes(c)?-1:!s.includes(l)&&s.includes(c)?1:0).forEach(([l,h],c)=>{c<=a?localStorage[`concept_${l}`]=JSON.stringify(h):delete localStorage[`concept_${l}`]})},get:()=>St(t),remove:a=>{if(!a||!i)return;const o=St(t);delete o[a],delete localStorage[`concept_${a}`],r(o)},delete:()=>{i&&(delete localStorage[tp],r({}))}}}const Qr=R5(),U5=ku(Qr,t=>Object.entries(t).reduce((e,[r,n])=>(n&&(e[r]=n),e),{})),di=Yt({});function V5(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!0,pending:W5,then:q5,catch:z5,value:7,error:8,blocks:[,,,]};return Oa(r=t[2],i),{c(){e=yt(),i.block.c()},l(a){e=yt(),i.block.l(a)},m(a,o){ue(a,e,o),i.block.m(a,i.anchor=o),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(a,o){t=a,i.ctx=t,o&4&&r!==(r=t[2])&&Oa(r,i)||Gc(i,t,o)},i(a){n||(oe(i.block),n=!0)},o(a){for(let o=0;o<3;o+=1){const s=i.blocks[o];de(s)}n=!1},d(a){a&&M(e),i.block.d(a),i.token=null,i=null}}}function j5(t){let e,r,n,i,a;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("p"),a=we("Set OpenAI key in settings to use embedding map."),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=U(e);r=H(s,"DIV",{class:!0});var l=U(r);n=H(l,"DIV",{class:!0});var h=U(n);i=H(h,"P",{class:!0});var c=U(i);a=ye(c,"Set OpenAI key in settings to use embedding map."),c.forEach(M),h.forEach(M),l.forEach(M),s.forEach(M),this.h()},h(){B(i,"class","text-center text-lg"),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(o,s){ue(o,e,s),k(e,r),k(r,n),k(n,i),k(i,a)},p:Oe,i:Oe,o:Oe,d(o){o&&M(e)}}}function z5(t){let e,r=t[8].message+"",n;return{c(){e=W("p"),n=we(r),this.h()},l(i){e=H(i,"P",{style:!0});var a=U(e);n=ye(a,r),a.forEach(M),this.h()},h(){Ot(e,"color","red")},m(i,a){ue(i,e,a),k(e,n)},p(i,a){a&4&&r!==(r=i[8].message+"")&&zt(n,r)},i:Oe,o:Oe,d(i){i&&M(e)}}}function q5(t){let e,r;return e=new L5({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},p:Oe,i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function W5(t){let e,r,n,i,a,o,s,l,h;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("p"),a=we("Fetching embeddings. This may take a while..."),o=Ee(),s=W("progress"),this.h()},l(c){e=H(c,"DIV",{class:!0});var f=U(e);r=H(f,"DIV",{class:!0});var p=U(r);n=H(p,"DIV",{class:!0});var g=U(n);i=H(g,"P",{class:!0});var b=U(i);a=ye(b,"Fetching embeddings. This may take a while..."),b.forEach(M),o=Ae(g),s=H(g,"PROGRESS",{class:!0,max:!0}),U(s).forEach(M),g.forEach(M),p.forEach(M),f.forEach(M),this.h()},h(){B(i,"class","text-center text-sm"),B(s,"class","progress progress-primary w-56"),s.value=l=Object.keys(t[3]).length,B(s,"max",h=Object.keys(t[0].weightedPrompts).length),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(c,f){ue(c,e,f),k(e,r),k(r,n),k(n,i),k(i,a),k(n,o),k(n,s)},p(c,f){f&8&&l!==(l=Object.keys(c[3]).length)&&(s.value=l),f&1&&h!==(h=Object.keys(c[0].weightedPrompts).length)&&B(s,"max",h)},i:Oe,o:Oe,d(c){c&&M(e)}}}function H5(t){let e,r,n,i,a;const o=[j5,V5],s=[];function l(h,c){return h[1]?1:0}return e=l(t),r=s[e]=o[e](t),i=new Va({}),{c(){r.c(),n=Ee(),Le(i.$$.fragment)},l(h){r.l(h),n=Ae(h),Re(i.$$.fragment,h)},m(h,c){s[e].m(h,c),ue(h,n,c),Ue(i,h,c),a=!0},p(h,[c]){let f=e;e=l(h),e===f?s[e].p(h,c):(Gt(),de(s[f],1,1,()=>{s[f]=null}),Kt(),r=s[e],r?r.p(h,c):(r=s[e]=o[e](h),r.c()),oe(r,1),r.m(n.parentNode,n))},i(h){a||(oe(r),oe(i.$$.fragment,h),a=!0)},o(h){de(r),de(i.$$.fragment,h),a=!1},d(h){s[e].d(h),h&&M(n),Ve(i,h)}}}function $5(t,e){return e?t.embedClusterSets?Object.entries(e).length!==Object.entries(t.weightedPrompts).length?(console.log("embeddings length mismatch",Object.entries(e).length,Object.entries(t.weightedPrompts).length),!0):(t.lastPromptChange||0)>(t.lastEmbeddingChange||0)?(console.log("prompt change after embedding change"),!0):!1:(console.log("no active cluster sets"),!0):(console.log("no active embeddings"),!0)}function G5(t,e,r){let n,i,a;je(t,Ye,c=>r(0,n=c)),je(t,Vn,c=>r(1,i=c)),je(t,Zs,c=>r(4,a=c));let o=null,s={};async function l(c){return console.log("waiting for embeddings"),new Promise((f,p)=>{r(3,s={});const g=()=>{b(),c.every(D=>s[D]!==void 0)?f(s):setTimeout(g,100)},b=()=>{c.forEach(m=>{const D=Qr.get()[m];D&&r(3,s[m]=D,s)})};b(),c.filter(m=>!s[m]).forEach(m=>{di.update(D=>(D[m]=!1,D))}),g()})}async function h(){if(console.log("fetching embeddings"),!i||!n.weightedPrompts)return;const c=Object.entries(n.weightedPrompts).map(([y,A])=>[y,A.text]),f=c.map(y=>y[1]);console.log("fetching embedding for",f),r(2,o=l(f)),await o;const p={};c.forEach(([y,A])=>{p[parseInt(y)]=s[A]});let g=Object.entries(p).sort((y,A)=>parseInt(y[0])-parseInt(A[0]));const b=y=>new Array(y).fill(null).map(()=>[]);console.log("clustering embeddings");const v=g.length>=2?ki(g.map(y=>y[1]),2):[g.map(y=>y[0])];console.log("set of 2 complete");const m=g.length>=4?ki(g.map(y=>y[1]),4):v;console.log("set of 4 complete");const D=g.length>=6?ki(g.map(y=>y[1]),6):m;console.log("set of 6 complete");const S=g.length>=8?ki(g.map(y=>y[1]),8):D;console.log("set of 8 complete"),Ye.update({...n,embedClusterSets:{2:[...v,...b(2-v.length)],4:[...m,...b(4-m.length)],6:[...D,...b(6-D.length)],8:[...S,...b(8-S.length)]},lastEmbeddingChange:Date.now(),scaledEmbedMappings:mf(p)}),Zs.set(p),console.log("embeddings complete")}return t.$$.update=()=>{t.$$.dirty&19&&i&&$5(n,a)&&(console.log("Embeddings require update"),h())},[n,i,o,s,a]}class K5 extends Ze{constructor(e){super(),Je(this,e,G5,H5,Qe,{})}}function Y5(t){let e,r,n,i;return{c(){e=pt("g"),r=pt("circle"),this.h()},l(a){e=gt(a,"g",{});var o=U(e);r=gt(o,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),U(r).forEach(M),o.forEach(M),this.h()},h(){B(r,"cx",n=t[0][0]),B(r,"cy",i=t[0][1]),B(r,"r",t[1]),B(r,"stroke",t[3]),B(r,"stroke-width",t[2]),Ot(r,"fill","rgba(0,0,0,0)")},m(a,o){ue(a,e,o),k(e,r)},p(a,[o]){o&1&&n!==(n=a[0][0])&&B(r,"cx",n),o&1&&i!==(i=a[0][1])&&B(r,"cy",i),o&2&&B(r,"r",a[1]),o&8&&B(r,"stroke",a[3]),o&4&&B(r,"stroke-width",a[2])},i:Oe,o:Oe,d(a){a&&M(e)}}}function Z5(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=20}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class J5 extends Ze{constructor(e){super(),Je(this,e,Z5,Y5,Qe,{xy:0,radius:1,stroke:2,color:3})}}function Q5(t){let e,r,n,i,a;return{c(){e=pt("polygon"),this.h()},l(o){e=gt(o,"polygon",{points:!0,"stroke-width":!0,fill:!0,transform:!0}),U(e).forEach(M),this.h()},h(){B(e,"points",r=`${t[7][0]},${t[7][1]} ${t[9][0]},${t[9][1]} ${t[8][0]},${t[8][1]} ${t[6][0]},${t[6][1]} ${t[4][0]},${t[4][1]} ${t[5][0]},${t[5][1]}`),B(e,"stroke-width",4),B(e,"fill",t[3]),B(e,"transform",n=`rotate(${t[1].toFixed(2)} ${t[0][0]} ${t[0][1]}) rotate(${t[2]?"180":"0"} ${(t[7][0]+t[6][0])/2} ${(t[7][1]+t[6][1])/2})`)},m(o,s){ue(o,e,s),i||(a=[De(e,"mouseover",t[10]),De(e,"mouseout",t[11]),De(e,"mousedown",t[12]),De(e,"touchstart",t[12])],i=!0)},p(o,[s]){s&1008&&r!==(r=`${o[7][0]},${o[7][1]} ${o[9][0]},${o[9][1]} ${o[8][0]},${o[8][1]} ${o[6][0]},${o[6][1]} ${o[4][0]},${o[4][1]} ${o[5][0]},${o[5][1]}`)&&B(e,"points",r),s&8&&B(e,"fill",o[3]),s&199&&n!==(n=`rotate(${o[1].toFixed(2)} ${o[0][0]} ${o[0][1]}) rotate(${o[2]?"180":"0"} ${(o[7][0]+o[6][0])/2} ${(o[7][1]+o[6][1])/2})`)&&B(e,"transform",n)},i:Oe,o:Oe,d(o){o&&M(e),i=!1,Rt(a)}}}function X5(t,e,r){let n,i,a,o,s,l,{xy:h=[500,500]}=e,{radius:c=400}=e,{stroke:f=20}=e,{color:p="rgba(46,67,101, 0.4)"}=e,{hoverColor:g="white"}=e,{angle:b=0}=e,{handleMouseDown:v=C=>{}}=e,{reverse:m=!1}=e,D=p;function S(){r(3,D=g)}function y(){r(3,D=p)}function A(C){v(C)}return t.$$set=C=>{"xy"in C&&r(0,h=C.xy),"radius"in C&&r(13,c=C.radius),"stroke"in C&&r(14,f=C.stroke),"color"in C&&r(15,p=C.color),"hoverColor"in C&&r(16,g=C.hoverColor),"angle"in C&&r(1,b=C.angle),"handleMouseDown"in C&&r(17,v=C.handleMouseDown),"reverse"in C&&r(2,m=C.reverse)},t.$$.update=()=>{t.$$.dirty&24577&&r(9,n=Nr(h,[-4,1],c-f/2)),t.$$.dirty&24577&&r(8,i=Nr(h,[1,1],c-f/2)),t.$$.dirty&8193&&r(7,a=Nr(h,[0,1],c)),t.$$.dirty&8193&&r(6,o=Nr(h,[4,1],c)),t.$$.dirty&24577&&r(5,s=Nr(h,[-3,1],c+f/2)),t.$$.dirty&24577&&r(4,l=Nr(h,[1,1],c+f/2))},[h,b,m,D,l,s,o,a,i,n,S,y,A,c,f,p,g,v]}class eS extends Ze{constructor(e){super(),Je(this,e,X5,Q5,Qe,{xy:0,radius:13,stroke:14,color:15,hoverColor:16,angle:1,handleMouseDown:17,reverse:2})}}function rp(t,e,r){const n=t.slice();return n[21]=e[r][0],n[22]=e[r][1],n}function np(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,a;e=new ef({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),s=[];for(let c=0;c<o.length;c+=1)s[c]=ip(rp(t,o,c));const l=c=>de(s[c],1,1,()=>{s[c]=null});let h=n&&ap(t);return{c(){Le(e.$$.fragment);for(let c=0;c<s.length;c+=1)s[c].c();r=yt(),h&&h.c(),i=yt()},l(c){Re(e.$$.fragment,c);for(let f=0;f<s.length;f+=1)s[f].l(c);r=yt(),h&&h.l(c),i=yt()},m(c,f){Ue(e,c,f);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(c,f);ue(c,r,f),h&&h.m(c,f),ue(c,i,f),a=!0},p(c,f){const p={};if(f&1&&(p.xy=c[0]),f&2&&(p.radius=c[1]),e.$set(p),f&1660){o=Object.entries(c[5].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=rp(c,o,g);s[g]?(s[g].p(b,f),oe(s[g],1)):(s[g]=ip(b),s[g].c(),oe(s[g],1),s[g].m(r.parentNode,r))}for(Gt(),g=o.length;g<s.length;g+=1)l(g);Kt()}f&32&&(n=Object.entries(c[5].weightedPrompts).length>0),n?h?(h.p(c,f),f&32&&oe(h,1)):(h=ap(c),h.c(),oe(h,1),h.m(i.parentNode,i)):h&&(Gt(),de(h,1,1,()=>{h=null}),Kt())},i(c){if(!a){oe(e.$$.fragment,c);for(let f=0;f<o.length;f+=1)oe(s[f]);oe(h),a=!0}},o(c){de(e.$$.fragment,c),s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)de(s[f]);de(h),a=!1},d(c){Ve(e,c),Pu(s,c),c&&M(r),h&&h.d(c),c&&M(i)}}}function ip(t){let e,r,n;e=new wo({props:{xy:t[10](t[6][t[21]].xy,zr(t[3],$t(t[22].text).length,t[4])),color:`rgba(255,255,255,${Jr(t[6][t[21]].unitWeight)}`,wh:zr(t[3],$t(t[22].text).length,t[4]),fontSize:t[4],text:$t(t[22].text)}});function i(){return t[15](t[21])}return r=new Ua({props:{xy:t[6][t[21]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:i}}),{c(){Le(e.$$.fragment),Le(r.$$.fragment)},l(a){Re(e.$$.fragment,a),Re(r.$$.fragment,a)},m(a,o){Ue(e,a,o),Ue(r,a,o),n=!0},p(a,o){t=a;const s={};o&120&&(s.xy=t[10](t[6][t[21]].xy,zr(t[3],$t(t[22].text).length,t[4]))),o&96&&(s.color=`rgba(255,255,255,${Jr(t[6][t[21]].unitWeight)}`),o&56&&(s.wh=zr(t[3],$t(t[22].text).length,t[4])),o&16&&(s.fontSize=t[4]),o&32&&(s.text=$t(t[22].text)),e.$set(s);const l={};o&96&&(l.xy=t[6][t[21]].xy),o&4&&(l.radius=t[2]),o&32&&(l.handleMouseDown=i),r.$set(l)},i(a){n||(oe(e.$$.fragment,a),oe(r.$$.fragment,a),n=!0)},o(a){de(e.$$.fragment,a),de(r.$$.fragment,a),n=!1},d(a){Ve(e,a),Ve(r,a)}}}function ap(t){let e,r,n;return e=new J5({props:{xy:t[0],radius:t[7],stroke:30}}),r=new eS({props:{reverse:t[5].ringReverse,xy:t[0],radius:t[7],stroke:30,angle:t[5].ringStartAngle,color:"rgba(136,157,191, 1)",handleMouseDown:t[16]}}),{c(){Le(e.$$.fragment),Le(r.$$.fragment)},l(i){Re(e.$$.fragment,i),Re(r.$$.fragment,i)},m(i,a){Ue(e,i,a),Ue(r,i,a),n=!0},p(i,a){const o={};a&1&&(o.xy=i[0]),a&128&&(o.radius=i[7]),e.$set(o);const s={};a&32&&(s.reverse=i[5].ringReverse),a&1&&(s.xy=i[0]),a&128&&(s.radius=i[7]),a&32&&(s.angle=i[5].ringStartAngle),r.$set(s)},i(i){n||(oe(e.$$.fragment,i),oe(r.$$.fragment,i),n=!0)},o(i){de(e.$$.fragment,i),de(r.$$.fragment,i),n=!1},d(i){Ve(e,i),Ve(r,i)}}}function tS(t){let e,r,n,i,a,o=t[6]&&t[5].weightedPrompts&&np(t);const s=t[14].default,l=xa(s,t,t[13],null);return{c(){e=pt("svg"),o&&o.c(),r=Ee(),l&&l.c(),this.h()},l(h){e=gt(h,"svg",{id:!0,class:!0});var c=U(e);o&&o.l(c),c.forEach(M),r=Ae(h),l&&l.l(h),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(h,c){ue(h,e,c),o&&o.m(e,null),ue(h,r,c),l&&l.m(h,c),n=!0,i||(a=[De(e,"mousemove",t[11]),De(e,"touchmove",t[11]),De(e,"mouseup",t[8]),De(e,"touchend",t[8]),De(e,"dblclick",t[12])],i=!0)},p(h,[c]){h[6]&&h[5].weightedPrompts?o?(o.p(h,c),c&96&&oe(o,1)):(o=np(h),o.c(),oe(o,1),o.m(e,null)):o&&(Gt(),de(o,1,1,()=>{o=null}),Kt()),l&&l.p&&(!n||c&8192)&&Na(l,s,h,h[13],n?Ra(s,h[13],c,null):La(h[13]),null)},i(h){n||(oe(o),oe(l,h),n=!0)},o(h){de(o),de(l,h),n=!1},d(h){h&&M(e),o&&o.d(),h&&M(r),l&&l.d(h),i=!1,Rt(a)}}}function up(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const o=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function rS(t,e,r){let n,i,a;je(t,Ye,F=>r(5,a=F));let{$$slots:o={},$$scope:s}=e,{center:l=[450,450]}=e,{radius:h=250}=e,{pointRadius:c=10}=e,{textWidth:f=150}=e,{fontSize:p=13}=e,g=[0,0],b=null;function v(F){b=null}function m(F){b=F}function D(F,x){let z=Rn(F,l,h)[0]-180;z<0&&(z+=360);const G=tf(na(x),z);return xr(F,G)}function S(F){console.log(h,n);const x=Vr(Rn(Au(F,l,n),l,n)[0]);r(6,i=C(a.weightedPrompts,l,h,a.ringWeightScaling,a.ringExponentialScaling,x,a.ringAngles))}function y(F){if(g=Ti(F),b==="main")S(g);else if(b){const x={...a.weightedPrompts[b]},z=Au(g,l,h),G=Rn(z,l,h)[0],J={...a.ringAngles};J[x.id]=G;const R={...a.weightedPrompts};R[b]=x,r(6,i=C(R,l,h,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,J))}}function A(F){g=Ti(F),S(g)}function C(F,x,z,G,J,R,N){if(!F||!x||!z||!G)return null;let j=Object.entries(F).reduce((Z,[X,te])=>{const he=a.ringReverse?R-N[X]:N[X]-R,ge=Vr(he),_e=Math.pow(1-ge/360,J?G:1);return Z[X]={angleDifference:ge,xy:Nr(x,[N[X],1],z),unitWeight:_e},Z},{});const q={...F};return Object.entries(j).forEach(([Z,X])=>{q[Z].ringWeight=X.unitWeight}),Ye.update({...a,ringStartAngle:R,weightedPrompts:q,ringAngles:N}),j}const P=F=>m(F),O=()=>m("main");return t.$$set=F=>{"center"in F&&r(0,l=F.center),"radius"in F&&r(1,h=F.radius),"pointRadius"in F&&r(2,c=F.pointRadius),"textWidth"in F&&r(3,f=F.textWidth),"fontSize"in F&&r(4,p=F.fontSize),"$$scope"in F&&r(13,s=F.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&r(7,n=h-30),t.$$.dirty&32&&Object.keys(a.ringAngles).length!==Object.keys(a.weightedPrompts).length&&Ye.update({...a,ringAngles:up(a.weightedPrompts,{})}),t.$$.dirty&35&&r(6,i=C(a.weightedPrompts,l,h,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,a.ringAngles||up(a.weightedPrompts,{})))},[l,h,c,f,p,a,i,n,v,m,D,y,A,s,o,P,O]}class nS extends Ze{constructor(e){super(),Je(this,e,rS,tS,Qe,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function sp(t){let e,r,n,i,a,o,s,l;return{c(){e=W("div"),r=W("label"),n=W("span"),i=we("Scaling Power"),a=Ee(),o=W("input"),this.h()},l(h){e=H(h,"DIV",{class:!0});var c=U(e);r=H(c,"LABEL",{class:!0});var f=U(r);n=H(f,"SPAN",{class:!0});var p=U(n);i=ye(p,"Scaling Power"),p.forEach(M),f.forEach(M),a=Ae(c),o=H(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(M),this.h()},h(){B(n,"class","label-text"),B(r,"class","label"),B(o,"type","range"),B(o,"min","0.5"),B(o,"max","5"),B(o,"step","0.1"),B(o,"class","range range-xs"),B(e,"class","w-full px-2")},m(h,c){ue(h,e,c),k(e,r),k(r,n),k(n,i),k(e,a),k(e,o),an(o,t[0]),s||(l=[De(o,"change",t[7]),De(o,"input",t[7])],s=!0)},p(h,c){c&1&&an(o,h[0])},d(h){h&&M(e),s=!1,Rt(l)}}}function iS(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b,v,m,D,S,y,A,C;r=new nS({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let P=t[1]&&sp(t);return S=new Va({}),{c(){e=W("div"),Le(r.$$.fragment),i=Ee(),a=W("div"),o=W("div"),s=W("label"),l=W("span"),h=we("Exponential Scaling"),c=Ee(),f=W("input"),p=Ee(),P&&P.c(),g=Ee(),b=W("div"),v=W("button"),m=we("Reverse"),D=Ee(),Le(S.$$.fragment),this.h()},l(O){e=H(O,"DIV",{class:!0});var F=U(e);Re(r.$$.fragment,F),F.forEach(M),i=Ae(O),a=H(O,"DIV",{class:!0});var x=U(a);o=H(x,"DIV",{class:!0});var z=U(o);s=H(z,"LABEL",{class:!0});var G=U(s);l=H(G,"SPAN",{class:!0});var J=U(l);h=ye(J,"Exponential Scaling"),J.forEach(M),G.forEach(M),c=Ae(z),f=H(z,"INPUT",{type:!0,class:!0}),z.forEach(M),p=Ae(x),P&&P.l(x),g=Ae(x),b=H(x,"DIV",{class:!0});var R=U(b);v=H(R,"BUTTON",{class:!0});var N=U(v);m=ye(N,"Reverse"),N.forEach(M),R.forEach(M),x.forEach(M),D=Ae(O),Re(S.$$.fragment,O),this.h()},h(){B(e,"class","w-full h-full"),vi(()=>t[5].call(e)),B(l,"class","label-text"),B(s,"class","label"),B(f,"type","checkbox"),B(f,"class","toggle toggle-xs"),B(o,"class","w-52 px-2"),B(v,"class","btn btn-xs btn-primary"),B(b,"class","w-32 px-2 pb-1 flex flex-col justify-end"),B(a,"class","px-2 py-4 pb-0 flex")},m(O,F){ue(O,e,F),Ue(r,e,null),n=ta(e,t[5].bind(e)),ue(O,i,F),ue(O,a,F),k(a,o),k(o,s),k(s,l),k(l,h),k(o,c),k(o,f),f.checked=t[1],k(a,p),P&&P.m(a,null),k(a,g),k(a,b),k(b,v),k(v,m),ue(O,D,F),Ue(S,O,F),y=!0,A||(C=[De(f,"change",t[6]),De(v,"click",t[4])],A=!0)},p(O,[F]){const x={};F&12&&(x.center=[Math.round(O[2]/2),Math.round(O[3]/2)]),F&12&&(x.radius=Math.round(Math.min(O[2],O[3])/2)-150),r.$set(x),F&2&&(f.checked=O[1]),O[1]?P?P.p(O,F):(P=sp(O),P.c(),P.m(a,g)):P&&(P.d(1),P=null)},i(O){y||(oe(r.$$.fragment,O),oe(S.$$.fragment,O),y=!0)},o(O){de(r.$$.fragment,O),de(S.$$.fragment,O),y=!1},d(O){O&&M(e),Ve(r),n(),O&&M(i),O&&M(a),P&&P.d(),O&&M(D),Ve(S,O),A=!1,Rt(C)}}}function aS(t,e,r){let n;je(t,Ye,p=>r(8,n=p));let i,a,o=n.ringWeightScaling||2,s=Yc(n.ringExponentialScaling)?!0:n.ringExponentialScaling;function l(){Ye.update({...Ye.get(),ringReverse:!n.ringReverse})}function h(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function c(){s=this.checked,r(1,s)}function f(){o=Gp(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&Ye.update({...Ye.get(),ringExponentialScaling:s,ringWeightScaling:o})},[o,s,i,a,l,h,c,f]}class uS extends Ze{constructor(e){super(),Je(this,e,aS,iS,Qe,{})}}function op(t,e,r){const n=t.slice();return n[20]=e[r][0],n[21]=e[r][1],n}function lp(t){let e,r,n=t[0][t[20]][2].text+"",i,a,o=Zn(t[1],t[20])+"",s,l,h;return{c(){e=W("div"),r=W("p"),i=we(n),a=we(":"),s=we(o),h=Ee(),this.h()},l(c){e=H(c,"DIV",{class:!0});var f=U(e);r=H(f,"P",{style:!0});var p=U(r);i=ye(p,n),a=ye(p,":"),s=ye(p,o),p.forEach(M),h=Ae(f),f.forEach(M),this.h()},h(){B(r,"style",l=`color: rgba(255,255,255, ${Jr(t[21])});`),B(e,"class","hover:bg-slate-800 rounded-md p-2 text-xs")},m(c,f){ue(c,e,f),k(e,r),k(r,i),k(r,a),k(r,s),k(e,h)},p(c,f){f&5&&n!==(n=c[0][c[20]][2].text+"")&&zt(i,n),f&6&&o!==(o=Zn(c[1],c[20])+"")&&zt(s,o),f&4&&l!==(l=`color: rgba(255,255,255, ${Jr(c[21])});`)&&B(r,"style",l)},d(c){c&&M(e)}}}function sS(t){let e,r,n,i,a,o,s,l=(t[1].promptLimit||t[0].length)+"",h,c,f=t[0].length+"",p,g,b,v,m,D,S,y,A,C,P,O,F,x,z=t[2],G=[];for(let N=0;N<z.length;N+=1)G[N]=lp(op(t,z,N));const J=t[17].default,R=xa(J,t,t[16],null);return{c(){e=W("div"),r=W("div");for(let N=0;N<G.length;N+=1)G[N].c();n=Ee(),i=W("div"),a=W("div"),o=W("label"),s=W("span"),h=we(l),c=we("/"),p=we(f),g=we(" Prompts"),b=Ee(),v=W("input"),S=Ee(),y=W("div"),A=W("button"),C=we("Shuffle"),P=Ee(),R&&R.c(),this.h()},l(N){e=H(N,"DIV",{class:!0});var j=U(e);r=H(j,"DIV",{class:!0});var q=U(r);for(let _e=0;_e<G.length;_e+=1)G[_e].l(q);q.forEach(M),n=Ae(j),i=H(j,"DIV",{class:!0});var Z=U(i);a=H(Z,"DIV",{class:!0});var X=U(a);o=H(X,"LABEL",{class:!0});var te=U(o);s=H(te,"SPAN",{class:!0});var fe=U(s);h=ye(fe,l),c=ye(fe,"/"),p=ye(fe,f),g=ye(fe," Prompts"),fe.forEach(M),te.forEach(M),b=Ae(X),v=H(X,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),X.forEach(M),S=Ae(Z),y=H(Z,"DIV",{class:!0});var he=U(y);A=H(he,"BUTTON",{class:!0});var ge=U(A);C=ye(ge,"Shuffle"),ge.forEach(M),he.forEach(M),Z.forEach(M),P=Ae(j),R&&R.l(j),j.forEach(M),this.h()},h(){B(r,"class","p-4 w-full h-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-y-auto"),B(s,"class","label-text"),B(o,"class","label"),v.value=m=t[1].promptLimit||t[0].length,B(v,"type","range"),B(v,"min","1"),B(v,"max",D=t[0].length),B(v,"step","1"),B(v,"class","range range-sm"),B(a,"class","w-full px-2"),B(A,"class","btn btn-xs btn-primary"),B(y,"class","w-32 px-2 pb-1 flex flex-col justify-end"),B(i,"class","px-2 py-4 pb-0 flex"),B(e,"class","w-full h-full flex flex-col")},m(N,j){ue(N,e,j),k(e,r);for(let q=0;q<G.length;q+=1)G[q]&&G[q].m(r,null);k(e,n),k(e,i),k(i,a),k(a,o),k(o,s),k(s,h),k(s,c),k(s,p),k(s,g),k(a,b),k(a,v),k(i,S),k(i,y),k(y,A),k(A,C),k(e,P),R&&R.m(e,null),O=!0,F||(x=[De(v,"change",t[18]),De(A,"click",t[4])],F=!0)},p(N,[j]){if(j&7){z=N[2];let q;for(q=0;q<z.length;q+=1){const Z=op(N,z,q);G[q]?G[q].p(Z,j):(G[q]=lp(Z),G[q].c(),G[q].m(r,null))}for(;q<G.length;q+=1)G[q].d(1);G.length=z.length}(!O||j&3)&&l!==(l=(N[1].promptLimit||N[0].length)+"")&&zt(h,l),(!O||j&1)&&f!==(f=N[0].length+"")&&zt(p,f),(!O||j&3&&m!==(m=N[1].promptLimit||N[0].length))&&(v.value=m),(!O||j&1&&D!==(D=N[0].length))&&B(v,"max",D),R&&R.p&&(!O||j&65536)&&Na(R,J,N,N[16],O?Ra(J,N[16],j,null):La(N[16]),null)},i(N){O||(oe(R,N),O=!0)},o(N){de(R,N),O=!1},d(N){N&&M(e),Pu(G,N),R&&R.d(N),F=!1,Rt(x)}}}function oS(t,e,r){let n,i,a,o;je(t,Ye,O=>r(1,o=O));let{$$slots:s={},$$scope:l}=e,{center:h=[0,0]}=e,{dimensions:c=[100,100]}=e,{maxWidth:f=1e3}=e,{pointRadius:p=10}=e,{textWidth:g=250}=e,{horizontalPad:b=20}=e,{verticalPad:v=2}=e,{textBarPad:m=10}=e,{fontSize:D=13}=e,{handleWidth:S=20}=e;const y=Li.subscribe(()=>{C()});lo(()=>{C()}),$c(()=>{y()});function A(O){Ye.update({...o,promptLimit:O}),C()}function C(){const O=Object.entries(o.weightedPrompts).sort((F,x)=>Math.random()-.5).reduce((F,[x,z],G)=>(F[x]={...z,randomWeight:G<(o.promptLimit||n&&n.length)?Math.random():0},F),{});Ye.update({...o,weightedPrompts:O})}const P=O=>A(parseInt(O.target.value));return t.$$set=O=>{"center"in O&&r(5,h=O.center),"dimensions"in O&&r(6,c=O.dimensions),"maxWidth"in O&&r(7,f=O.maxWidth),"pointRadius"in O&&r(8,p=O.pointRadius),"textWidth"in O&&r(9,g=O.textWidth),"horizontalPad"in O&&r(10,b=O.horizontalPad),"verticalPad"in O&&r(11,v=O.verticalPad),"textBarPad"in O&&r(12,m=O.textBarPad),"fontSize"in O&&r(13,D=O.fontSize),"handleWidth"in O&&r(14,S=O.handleWidth),"$$scope"in O&&r(16,l=O.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&r(0,n=Object.entries(o.weightedPrompts).map(([O,F],x)=>[parseInt(O),x,F])),t.$$.dirty&1&&r(15,i=n.map(([O,F,x])=>[O,x.randomWeight||0])),t.$$.dirty&32768&&r(2,a=i.sort((O,F)=>F[1]-O[1]))},[n,o,a,A,C,h,c,f,p,g,b,v,m,D,S,i,l,s,P]}class lS extends Ze{constructor(e){super(),Je(this,e,oS,sS,Qe,{center:5,dimensions:6,maxWidth:7,pointRadius:8,textWidth:9,horizontalPad:10,verticalPad:11,textBarPad:12,fontSize:13,handleWidth:14})}}function cS(t){let e,r;return e=new Va({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function fS(t){let e,r,n,i;return r=new lS({props:{dimensions:t[2],center:t[3],$$slots:{default:[cS]},$$scope:{ctx:t}}}),{c(){e=W("div"),Le(r.$$.fragment),this.h()},l(a){e=H(a,"DIV",{class:!0});var o=U(e);Re(r.$$.fragment,o),o.forEach(M),this.h()},h(){B(e,"class","w-full h-full pt-10"),vi(()=>t[4].call(e))},m(a,o){ue(a,e,o),Ue(r,e,null),n=ta(e,t[4].bind(e)),i=!0},p(a,[o]){const s={};o&4&&(s.dimensions=a[2]),o&8&&(s.center=a[3]),o&32&&(s.$$scope={dirty:o,ctx:a}),r.$set(s)},i(a){i||(oe(r.$$.fragment,a),i=!0)},o(a){de(r.$$.fragment,a),i=!1},d(a){a&&M(e),Ve(r),n()}}}function hS(t,e,r){let n,i,a,o;function s(){a=this.clientWidth,o=this.clientHeight,r(0,a),r(1,o)}return t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[a||0,o||0]),t.$$.dirty&4&&r(3,i=na(n))},[a,o,n,i,s]}class dS extends Ze{constructor(e){super(),Je(this,e,hS,fS,Qe,{})}}function pS(t){let e,r,n,i,a,o,s;r=new df({props:{center:t[6],dimensions:t[2],onMarkerMove:t[7],dataPoints:t[4]}}),a=new pf({props:{useExponentialScaling:t[3].embedExponentialScaling,toggleExponentialScaling:t[9],exponentialScaling:t[3].embedWeightScaling,setExponentialScaling:t[10],connectionLimit:t[3].promptLimit||t[5],setConnectionLimit:t[8],maxConnectionLimit:t[5],maxClusterCount:0,onShuffle:t[11]}});const l=t[18].default,h=xa(l,t,t[17],null);return{c(){e=W("div"),Le(r.$$.fragment),i=Ee(),Le(a.$$.fragment),o=Ee(),h&&h.c(),this.h()},l(c){e=H(c,"DIV",{class:!0});var f=U(e);Re(r.$$.fragment,f),f.forEach(M),i=Ae(c),Re(a.$$.fragment,c),o=Ae(c),h&&h.l(c),this.h()},h(){B(e,"class","w-full h-full"),vi(()=>t[19].call(e))},m(c,f){ue(c,e,f),Ue(r,e,null),n=ta(e,t[19].bind(e)),ue(c,i,f),Ue(a,c,f),ue(c,o,f),h&&h.m(c,f),s=!0},p(c,[f]){const p={};f&64&&(p.center=c[6]),f&4&&(p.dimensions=c[2]),f&16&&(p.dataPoints=c[4]),r.$set(p);const g={};f&8&&(g.useExponentialScaling=c[3].embedExponentialScaling),f&8&&(g.exponentialScaling=c[3].embedWeightScaling),f&40&&(g.connectionLimit=c[3].promptLimit||c[5]),f&32&&(g.maxConnectionLimit=c[5]),a.$set(g),h&&h.p&&(!s||f&131072)&&Na(h,l,c,c[17],s?Ra(l,c[17],f,null):La(c[17]),null)},i(c){s||(oe(r.$$.fragment,c),oe(a.$$.fragment,c),oe(h,c),s=!0)},o(c){de(r.$$.fragment,c),de(a.$$.fragment,c),de(h,c),s=!1},d(c){c&&M(e),Ve(r),n(),c&&M(i),Ve(a,c),c&&M(o),h&&h.d(c)}}}function gS(t,e,r){let n,i,a,o,s,l,h,c,f,p;je(t,Ye,N=>r(3,f=N)),je(t,Zs,N=>r(16,p=N));let{$$slots:g={},$$scope:b}=e,v=0,m=0,D={};function S(N){P(),C(o,l,h,s)}function y(N){C(o,l,h,N)}function A(N,j){C(o,N,j,s)}function C(N,j,q,Z){if(!D)return;let X={...f.weightedPrompts},te=0;const fe=Object.entries(D).reduce((_e,[Be,ke])=>{const Ie=Ta(N,ke.xy);return _e[parseInt(Be)]=Ie,_e},{});Object.entries(fe).sort((_e,Be)=>_e[1]-Be[1]).forEach(([_e,Be],ke)=>{if(!X[parseInt(_e)])return;ke<Z+1&&Be>te&&(te=Be*1.1)});const he=(_e,Be)=>{const ke=_e?Math.round(Math.pow(1-Be/te,q)*100)/100:0;return ke<0?0:ke},ge=(_e,Be)=>{const ke=_e?Math.round((1-Be/te)*100)/100:0;return ke<0?0:ke};Object.entries(fe).sort((_e,Be)=>_e[1]-Be[1]).forEach(([_e,Be],ke)=>{if(!X[parseInt(_e)])return;const Ie=ke<Z,qe=j?he(Ie,Be):ge(Ie,Be);X[parseInt(_e)]={...X[parseInt(_e)],embedWeight:qe},r(4,D[parseInt(_e)].opacity=Jr(qe),D),r(4,D[parseInt(_e)].connected=Ie,D)}),Ye.update({...f,embedMarker:[...o],weightedPrompts:X})}function P(){const N=Object.keys(f.weightedPrompts),j=Math.ceil(Math.sqrt(N.length));let q;return c===$e.EmbedGrid?q=N.sort(()=>.5-Math.random()).reduce((Z,X,te)=>(Z[X]={xy:[1/j*(te%j)+1/j,1/j*Math.floor(te/j)+1/j],text:f.weightedPrompts[parseInt(X)].text,connected:!0,opacity:1},Z),{}):q=N.sort(()=>.5-Math.random()).reduce((Z,X,te)=>(Z[X]={xy:[1/j*(te%j)+1/j*Math.random(),1/j*Math.floor(te/j)+1/j*Math.random()],text:f.weightedPrompts[parseInt(X)].text,connected:!0,opacity:1},Z),{}),r(4,D=q),D}function O(N){o=N,C(o,l,h,s)}function F(N){N>0&&N<=a&&Ye.update({...f,promptLimit:N})}function x(){Ye.update({...f,embedExponentialScaling:!f.embedExponentialScaling})}function z(N){Ye.update({...f,embedWeightScaling:N})}function G(N){[0,2,4,6,8].indexOf(N)!==-1&&Ye.update({...f,embedClusters:N})}async function J(){P(),C(o,l,h,s)}lo(()=>{P(),C(o,l,h,s)});function R(){v=this.clientWidth,m=this.clientHeight,r(0,v),r(1,m)}return t.$$set=N=>{"$$scope"in N&&r(17,b=N.$$scope)},t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[v||250,m||250]),t.$$.dirty&4&&r(6,i=na(n)),t.$$.dirty&8&&r(5,a=Object.keys(f.weightedPrompts||{}).length),t.$$.dirty&8&&(o=f.embedMarker||[.5,.5]),t.$$.dirty&8&&r(12,s=f.promptLimit||Object.keys(f.weightedPrompts).length),t.$$.dirty&8&&r(14,l=f.embedExponentialScaling),t.$$.dirty&8&&r(13,h=f.embedWeightScaling),t.$$.dirty&8&&r(15,c=f.weightMode),t.$$.dirty&65544&&p&&Object.keys(p).length<f.embedClusters&&G(vf(Object.keys(p).length)),t.$$.dirty&32768&&S(),t.$$.dirty&24576&&A(l,h),t.$$.dirty&4096&&y(s)},[v,m,n,f,D,a,i,O,F,x,z,J,s,h,l,c,p,b,g,R]}class vS extends Ze{constructor(e){super(),Je(this,e,gS,pS,Qe,{})}}function mS(t){let e,r;return e=new vS({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function _S(t){let e,r,n,i,a;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("p"),a=we("Set OpenAI key in settings to use embedding map."),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=U(e);r=H(s,"DIV",{class:!0});var l=U(r);n=H(l,"DIV",{class:!0});var h=U(n);i=H(h,"P",{class:!0});var c=U(i);a=ye(c,"Set OpenAI key in settings to use embedding map."),c.forEach(M),h.forEach(M),l.forEach(M),s.forEach(M),this.h()},h(){B(i,"class","text-center text-lg"),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(o,s){ue(o,e,s),k(e,r),k(r,n),k(n,i),k(i,a)},i:Oe,o:Oe,d(o){o&&M(e)}}}function bS(t){let e,r,n,i,a;const o=[_S,mS],s=[];function l(h,c){return h[0]?1:0}return e=l(t),r=s[e]=o[e](t),i=new Va({}),{c(){r.c(),n=Ee(),Le(i.$$.fragment)},l(h){r.l(h),n=Ae(h),Re(i.$$.fragment,h)},m(h,c){s[e].m(h,c),ue(h,n,c),Ue(i,h,c),a=!0},p(h,[c]){let f=e;e=l(h),e!==f&&(Gt(),de(s[f],1,1,()=>{s[f]=null}),Kt(),r=s[e],r||(r=s[e]=o[e](h),r.c()),oe(r,1),r.m(n.parentNode,n))},i(h){a||(oe(r),oe(i.$$.fragment,h),a=!0)},o(h){de(r),de(i.$$.fragment,h),a=!1},d(h){s[e].d(h),h&&M(n),Ve(i,h)}}}function DS(t,e,r){let n;return je(t,Vn,i=>r(0,n=i)),[n]}class wS extends Ze{constructor(e){super(),Je(this,e,DS,bS,Qe,{})}}function yS(t){let e,r;return e=new K5({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function ES(t){let e,r;return e=new wS({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function AS(t){let e,r;return e=new uS({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function CS(t){let e,r;return e=new eF({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function FS(t){let e,r;return e=new cF({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function SS(t){let e,r;return e=new dS({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function BS(t){let e,r,n,i;const a=[SS,FS,CS,AS,ES,yS],o=[];function s(l,h){return l[0].weightMode===$e.Random?0:l[0].weightMode===$e.Pie?1:l[0].weightMode===$e.Circle?2:l[0].weightMode===$e.Ring?3:l[0].weightMode===$e.EmbedGrid||l[0].weightMode===$e.EmbedRandom?4:l[0].weightMode===$e.Embed?5:-1}return~(r=s(t))&&(n=o[r]=a[r](t)),{c(){e=W("div"),n&&n.c(),this.h()},l(l){e=H(l,"DIV",{class:!0});var h=U(e);n&&n.l(h),h.forEach(M),this.h()},h(){B(e,"class","w-full h-full flex flex-col")},m(l,h){ue(l,e,h),~r&&o[r].m(e,null),i=!0},p(l,[h]){let c=r;r=s(l),r!==c&&(n&&(Gt(),de(o[c],1,1,()=>{o[c]=null}),Kt()),~r?(n=o[r],n||(n=o[r]=a[r](l),n.c()),oe(n,1),n.m(e,null)):n=null)},i(l){i||(oe(n),i=!0)},o(l){de(n),i=!1},d(l){l&&M(e),~r&&o[r].d()}}}function OS(t,e,r){let n;return je(t,Ye,i=>r(0,n=i)),[n]}class MS extends Ze{constructor(e){super(),Je(this,e,OS,BS,Qe,{})}}function PS(t){let e,r,n,i,a="<<",o,s,l="<",h,c,f,p,g,b=">",v,m,D=">>",S,y,A,C,P,O,F,x,z,G,J,R,N,j,q,Z,X;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("button"),o=we(a),s=W("button"),h=we(l),c=Ee(),f=W("button"),p=we(t[1]),g=W("button"),v=we(b),m=W("button"),S=we(D),y=Ee(),A=W("div"),C=W("label"),P=we("Page Size"),O=Ee(),F=W("select"),x=W("option"),z=we("10"),G=W("option"),J=we("25"),R=W("option"),N=we("50"),j=W("option"),q=we("100"),this.h()},l(te){e=H(te,"DIV",{class:!0});var fe=U(e);r=H(fe,"DIV",{class:!0});var he=U(r);n=H(he,"DIV",{class:!0});var ge=U(n);i=H(ge,"BUTTON",{class:!0});var _e=U(i);o=ye(_e,a),_e.forEach(M),s=H(ge,"BUTTON",{class:!0});var Be=U(s);h=ye(Be,l),Be.forEach(M),c=Ae(ge),f=H(ge,"BUTTON",{class:!0});var ke=U(f);p=ye(ke,t[1]),ke.forEach(M),g=H(ge,"BUTTON",{class:!0});var Ie=U(g);v=ye(Ie,b),Ie.forEach(M),m=H(ge,"BUTTON",{class:!0});var qe=U(m);S=ye(qe,D),qe.forEach(M),ge.forEach(M),he.forEach(M),y=Ae(fe),A=H(fe,"DIV",{class:!0});var it=U(A);C=H(it,"LABEL",{for:!0,class:!0});var at=U(C);P=ye(at,"Page Size"),at.forEach(M),O=Ae(it),F=H(it,"SELECT",{class:!0});var et=U(F);x=H(et,"OPTION",{});var Et=U(x);z=ye(Et,"10"),Et.forEach(M),G=H(et,"OPTION",{});var At=U(G);J=ye(At,"25"),At.forEach(M),R=H(et,"OPTION",{});var ct=U(R);N=ye(ct,"50"),ct.forEach(M),j=H(et,"OPTION",{});var ot=U(j);q=ye(ot,"100"),ot.forEach(M),et.forEach(M),it.forEach(M),fe.forEach(M),this.h()},h(){B(i,"class","btn"),Ge(i,"btn-disabled",t[1]===1),B(s,"class","btn"),Ge(s,"btn-disabled",t[1]===1),B(f,"class","btn"),Ge(f,"btn-disabled",t[0]===0),B(g,"class","btn"),Ge(g,"btn-disabled",t[0]===0||t[1]===t[0]),B(m,"class","btn"),Ge(m,"btn-disabled",t[0]===0||t[1]===t[0]),B(n,"class","btn-group"),B(r,"class","flex justify-start"),B(C,"for","page-size"),B(C,"class","p-2 text-md min-w-xs"),x.__value=10,x.value=x.__value,G.__value=25,G.value=G.__value,R.__value=50,R.value=R.__value,j.__value=100,j.value=j.__value,B(F,"class","select max-w-xs"),B(A,"class","flex"),B(e,"class","w-full flex justify-between p-4")},m(te,fe){ue(te,e,fe),k(e,r),k(r,n),k(n,i),k(i,o),k(n,s),k(s,h),k(n,c),k(n,f),k(f,p),k(n,g),k(g,v),k(n,m),k(m,S),k(e,y),k(e,A),k(A,C),k(C,P),k(A,O),k(A,F),k(F,x),k(x,z),k(F,G),k(G,J),k(F,R),k(R,N),k(F,j),k(j,q),Z||(X=[De(i,"click",t[5]),De(s,"click",t[6]),De(f,"click",t[7]),De(g,"click",t[8]),De(m,"click",t[9]),De(F,"change",t[10])],Z=!0)},p(te,[fe]){fe&2&&Ge(i,"btn-disabled",te[1]===1),fe&2&&Ge(s,"btn-disabled",te[1]===1),fe&2&&zt(p,te[1]),fe&1&&Ge(f,"btn-disabled",te[0]===0),fe&3&&Ge(g,"btn-disabled",te[0]===0||te[1]===te[0]),fe&3&&Ge(m,"btn-disabled",te[0]===0||te[1]===te[0])},i:Oe,o:Oe,d(te){te&&M(e),Z=!1,Rt(X)}}}function kS(t,e,r){let{total:n}=e,{current:i}=e,{size:a}=e,{onChange:o}=e,{onResize:s}=e;const l=()=>o(1),h=()=>o(i-1),c=()=>o(i),f=()=>o(i+1),p=()=>o(n),g=b=>s(b.target.value);return t.$$set=b=>{"total"in b&&r(0,n=b.total),"current"in b&&r(1,i=b.current),"size"in b&&r(4,a=b.size),"onChange"in b&&r(2,o=b.onChange),"onResize"in b&&r(3,s=b.onResize)},[n,i,o,s,a,l,h,c,f,p,g]}class fg extends Ze{constructor(e){super(),Je(this,e,kS,PS,Qe,{total:0,current:1,size:4,onChange:2,onResize:3})}}function cp(t,e,r){const n=t.slice();return n[7]=e[r],n[9]=r,n}function fp(t,e){let r,n,i=e[7].date.toDateString()+"",a,o,s,l,h=e[7].prompt+"",c,f,p,g;function b(){return e[6](e[7])}return{key:t,first:null,c(){r=W("tr"),n=W("td"),a=we(i),o=Ee(),s=W("td"),l=W("span"),c=we(h),f=Ee(),this.h()},l(v){r=H(v,"TR",{});var m=U(r);n=H(m,"TD",{style:!0,class:!0});var D=U(n);a=ye(D,i),D.forEach(M),o=Ae(m),s=H(m,"TD",{style:!0,class:!0});var S=U(s);l=H(S,"SPAN",{});var y=U(l);c=ye(y,h),y.forEach(M),S.forEach(M),f=Ae(m),m.forEach(M),this.h()},h(){Ot(n,"max-width","10rem"),Ot(n,"width","20rem"),B(n,"class","whitespace-nowrap"),Ot(s,"max-width","20px"),B(s,"class","cursor-copy text-ellipsis whitespace-nowrap overflow-hidden select-none hover:text-white"),this.first=r},m(v,m){ue(v,r,m),k(r,n),k(n,a),k(r,o),k(r,s),k(s,l),k(l,c),k(r,f),p||(g=De(s,"click",b),p=!0)},p(v,m){e=v,m&8&&i!==(i=e[7].date.toDateString()+"")&&zt(a,i),m&8&&h!==(h=e[7].prompt+"")&&zt(c,h)},d(v){v&&M(r),p=!1,g()}}}function TS(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b=[],v=new Map,m;e=new fg({props:{total:Math.ceil(t[2].length/t[1]),current:t[0],size:t[1],onChange:t[4],onResize:t[5]}});let D=t[3];const S=y=>y[9];for(let y=0;y<D.length;y+=1){let A=cp(t,D,y),C=S(A);v.set(C,b[y]=fp(C,A))}return{c(){Le(e.$$.fragment),r=Ee(),n=W("div"),i=W("table"),a=W("thead"),o=W("tr"),s=W("th"),l=we("Date"),h=Ee(),c=W("th"),f=we("Prompt"),p=Ee(),g=W("tbody");for(let y=0;y<b.length;y+=1)b[y].c();this.h()},l(y){Re(e.$$.fragment,y),r=Ae(y),n=H(y,"DIV",{class:!0});var A=U(n);i=H(A,"TABLE",{class:!0});var C=U(i);a=H(C,"THEAD",{});var P=U(a);o=H(P,"TR",{});var O=U(o);s=H(O,"TH",{});var F=U(s);l=ye(F,"Date"),F.forEach(M),h=Ae(O),c=H(O,"TH",{});var x=U(c);f=ye(x,"Prompt"),x.forEach(M),O.forEach(M),P.forEach(M),p=Ae(C),g=H(C,"TBODY",{});var z=U(g);for(let G=0;G<b.length;G+=1)b[G].l(z);z.forEach(M),C.forEach(M),A.forEach(M),this.h()},h(){B(i,"class","table w-full"),B(n,"class","w-full px-4 overflow-y-auto")},m(y,A){Ue(e,y,A),ue(y,r,A),ue(y,n,A),k(n,i),k(i,a),k(a,o),k(o,s),k(s,l),k(o,h),k(o,c),k(c,f),k(i,p),k(i,g);for(let C=0;C<b.length;C+=1)b[C]&&b[C].m(g,null);m=!0},p(y,[A]){const C={};A&6&&(C.total=Math.ceil(y[2].length/y[1])),A&1&&(C.current=y[0]),A&2&&(C.size=y[1]),e.$set(C),A&8&&(D=y[3],b=jn(b,A,S,1,y,D,v,g,Qn,fp,null,cp))},i(y){m||(oe(e.$$.fragment,y),m=!0)},o(y){de(e.$$.fragment,y),m=!1},d(y){Ve(e,y),y&&M(r),y&&M(n);for(let A=0;A<b.length;A+=1)b[A].d()}}}function IS(t){navigator.clipboard.writeText(t)}function xS(t,e,r){let n;je(t,uf,c=>r(2,n=c));let i=1,a=10,o=[];function s(c){r(0,i=c)}function l(c){r(0,i=1),r(1,a=c)}const h=c=>IS(c.prompt);return t.$$.update=()=>{t.$$.dirty&7&&r(3,o=n.slice((i-1)*a,i*a))},[i,a,n,o,s,l,h]}class NS extends Ze{constructor(e){super(),Je(this,e,xS,TS,Qe,{})}}const LS=Yt(xs.List);function RS(t){let e,r,n,i,a,o;return r=new df({props:{center:t[9],dimensions:t[7],onMarkerMove:t[10],dataPoints:t[8]}}),a=new pf({props:{useExponentialScaling:t[3],toggleExponentialScaling:t[12],exponentialScaling:t[4],setExponentialScaling:t[13],connectionLimit:t[2],setConnectionLimit:t[11],maxConnectionLimit:t[6],clusterCount:t[5],setClusterCount:t[14],maxClusterCount:t[6],onShuffle:t[15]}}),{c(){e=W("div"),Le(r.$$.fragment),i=Ee(),Le(a.$$.fragment),this.h()},l(s){e=H(s,"DIV",{class:!0});var l=U(e);Re(r.$$.fragment,l),l.forEach(M),i=Ae(s),Re(a.$$.fragment,s),this.h()},h(){B(e,"class","w-full h-full"),vi(()=>t[18].call(e))},m(s,l){ue(s,e,l),Ue(r,e,null),n=ta(e,t[18].bind(e)),ue(s,i,l),Ue(a,s,l),o=!0},p(s,[l]){const h={};l&512&&(h.center=s[9]),l&128&&(h.dimensions=s[7]),l&256&&(h.dataPoints=s[8]),r.$set(h);const c={};l&8&&(c.useExponentialScaling=s[3]),l&16&&(c.exponentialScaling=s[4]),l&4&&(c.connectionLimit=s[2]),l&64&&(c.maxConnectionLimit=s[6]),l&32&&(c.clusterCount=s[5]),l&64&&(c.maxClusterCount=s[6]),a.$set(c)},i(s){o||(oe(r.$$.fragment,s),oe(a.$$.fragment,s),o=!0)},o(s){de(r.$$.fragment,s),de(a.$$.fragment,s),o=!1},d(s){s&&M(e),Ve(r),n(),s&&M(i),Ve(a,s)}}}function US(t,e,r){let n,i,a,o;je(t,U5,j=>r(17,o=j));let s=0,l=0,h={},c=[.5,.5],f=10,p=!1,g=2,b=0,v,m={},D={};function S(j){o&&v?(O(),C(c,p,g,j)):console.log("no concepts or mappings")}function y(j,q){j&&q?(O(),C(c,p,g,f)):console.log("no concepts or mappings")}function A(j,q){C(c,j,q,f)}function C(j,q,Z,X){if(console.log("recomputing weights"),!h)return;let te=0;const fe={...m};Object.values(h).forEach(ke=>{Object.values(h).forEach(Ie=>{const qe=Ta(ke.xy,Ie.xy);qe>te&&(te=qe)})});const he=Object.entries(h).reduce((ke,[Ie,qe])=>{const it=Ta(j,qe.xy);return ke[Ie]=it,ke},{}),ge=(ke,Ie)=>{const qe=ke?Math.round(Math.pow(1-Ie/te,Z)*100)/100:0;return qe<0?0:qe},_e=(ke,Ie)=>{const qe=ke?Math.round((1-Ie/te)*100)/100:0;return qe<0?0:qe},Be={...h};Object.entries(he).sort((ke,Ie)=>ke[1]-Ie[1]).forEach(([ke,Ie],qe)=>{if(!o[ke])return;const it=qe<X,at=q?ge(it,Ie):_e(it,Ie);fe[ke]=at;const et={...Be[ke]};et.opacity=Jr(at),et.connected=it,Be[ke]=et}),console.log("weights updated"),m=fe,r(8,h=Be)}function P(){let j=Object.entries(o);const q=he=>new Array(he).fill(null).map(()=>[]);console.log("clustering embeddings");const Z=j.length>=2?ki(j.map(he=>he[1]),2):[j.map(he=>he[0])];console.log("set of 2 complete");const X=j.length>=4?ki(j.map(he=>he[1]),4):Z;console.log("set of 4 complete");const te=j.length>=6?ki(j.map(he=>he[1]),6):X;console.log("set of 6 complete");const fe=j.length>=8?ki(j.map(he=>he[1]),8):te;return console.log("set of 8 complete"),{2:[...Z,...q(2-Z.length)],4:[...X,...q(4-X.length)],6:[...te,...q(6-te.length)],8:[...fe,...q(8-fe.length)]}}function O(){if(console.log("updating data points"),!o||!v)return;const j=Object.keys(v),q=X=>{if(!X.length)return i;const te=X.map(fe=>Z[fe].xy);return Ws(te)},Z=j.reduce((X,te,fe)=>(X[te]={xy:v[te],text:te,connected:!0,opacity:1},X),{});if(D=P(),b&&D){const X=b,te=D[X];let fe=te.map(_e=>q(_e));const he=lg(X),ge=cg(fe,he);ge&&ge.forEach(_e=>{const Be=_e.ids[0],ke=_e.points[1];te[Be].forEach(Ie=>{Z[Ie].xy=Ws([Z[Ie].xy,ke])})})}r(8,h=Z)}function F(j){c=j,C(c,p,g,f)}function x(j){j>0&&j<=a&&r(2,f=Math.round(j))}function z(){r(3,p=!p)}function G(j){r(4,g=j)}function J(j){[0,2,4,6,8].indexOf(j)!==-1&&r(5,b=j)}async function R(){r(16,v=mf(o))}lo(()=>{R()});function N(){s=this.clientWidth,l=this.clientHeight,r(0,s),r(1,l)}return t.$$.update=()=>{t.$$.dirty&3&&r(7,n=[s||250,l||250]),t.$$.dirty&128&&r(9,i=na(n)),t.$$.dirty&131072&&r(6,a=Object.keys(o).length),t.$$.dirty&131168&&o&&a<b&&J(vf(a)),t.$$.dirty&24&&A(p,g),t.$$.dirty&196608&&y(o,v),t.$$.dirty&4&&S(f)},[s,l,f,p,g,b,a,n,h,i,F,x,z,G,J,R,v,o,N]}class VS extends Ze{constructor(e){super(),Je(this,e,US,RS,Qe,{})}}function jS(t){let e,r;return e=new VS({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},p:Oe,i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function zS(t){let e,r,n,i,a,o;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("progress"),this.h()},l(s){e=H(s,"DIV",{class:!0});var l=U(e);r=H(l,"DIV",{class:!0});var h=U(r);n=H(h,"DIV",{class:!0});var c=U(n);i=H(c,"PROGRESS",{class:!0,max:!0}),U(i).forEach(M),c.forEach(M),h.forEach(M),l.forEach(M),this.h()},h(){B(i,"class","progress progress-primary w-56"),i.value=a=Object.keys(t[2]).length-Object.keys(t[1]).length,B(i,"max",o=Object.keys(t[2]).length),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(s,l){ue(s,e,l),k(e,r),k(r,n),k(n,i)},p(s,l){l&6&&a!==(a=Object.keys(s[2]).length-Object.keys(s[1]).length)&&(i.value=a),l&4&&o!==(o=Object.keys(s[2]).length)&&B(i,"max",o)},i:Oe,o:Oe,d(s){s&&M(e)}}}function qS(t){let e,r,n,i,a;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("p"),a=we("Set OpenAI key in settings to use concept map."),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=U(e);r=H(s,"DIV",{class:!0});var l=U(r);n=H(l,"DIV",{class:!0});var h=U(n);i=H(h,"P",{class:!0});var c=U(i);a=ye(c,"Set OpenAI key in settings to use concept map."),c.forEach(M),h.forEach(M),l.forEach(M),s.forEach(M),this.h()},h(){B(i,"class","text-center text-lg"),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(o,s){ue(o,e,s),k(e,r),k(r,n),k(n,i),k(i,a)},p:Oe,i:Oe,o:Oe,d(o){o&&M(e)}}}function WS(t){let e,r,n,i,a;const o=[qS,zS,jS],s=[];function l(h,c){return c&2&&(e=null),h[0]?(e==null&&(e=Object.keys(h[1]).length>0),e?1:2):0}return r=l(t,-1),n=s[r]=o[r](t),{c(){n.c(),i=yt()},l(h){n.l(h),i=yt()},m(h,c){s[r].m(h,c),ue(h,i,c),a=!0},p(h,[c]){let f=r;r=l(h,c),r===f?s[r].p(h,c):(Gt(),de(s[f],1,1,()=>{s[f]=null}),Kt(),n=s[r],n?n.p(h,c):(n=s[r]=o[r](h),n.c()),oe(n,1),n.m(i.parentNode,i))},i(h){a||(oe(n),a=!0)},o(h){de(n),a=!1},d(h){s[r].d(h),h&&M(i)}}}function HS(t,e,r){let n,i,a;return je(t,Vn,o=>r(0,n=o)),je(t,di,o=>r(1,i=o)),je(t,Qr,o=>r(2,a=o)),[n,i,a]}class $S extends Ze{constructor(e){super(),Je(this,e,HS,WS,Qe,{})}}function GS(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var hg=GS,KS=typeof dr=="object"&&dr&&dr.Object===Object&&dr,YS=KS,ZS=YS,JS=typeof self=="object"&&self&&self.Object===Object&&self,QS=ZS||JS||Function("return this")(),dg=QS,XS=dg,e8=function(){return XS.Date.now()},t8=e8,r8=/\s/;function n8(t){for(var e=t.length;e--&&r8.test(t.charAt(e)););return e}var i8=n8,a8=i8,u8=/^\s+/;function s8(t){return t&&t.slice(0,a8(t)+1).replace(u8,"")}var o8=s8,l8=dg,c8=l8.Symbol,pg=c8,hp=pg,gg=Object.prototype,f8=gg.hasOwnProperty,h8=gg.toString,bu=hp?hp.toStringTag:void 0;function d8(t){var e=f8.call(t,bu),r=t[bu];try{t[bu]=void 0;var n=!0}catch{}var i=h8.call(t);return n&&(e?t[bu]=r:delete t[bu]),i}var p8=d8,g8=Object.prototype,v8=g8.toString;function m8(t){return v8.call(t)}var _8=m8,dp=pg,b8=p8,D8=_8,w8="[object Null]",y8="[object Undefined]",pp=dp?dp.toStringTag:void 0;function E8(t){return t==null?t===void 0?y8:w8:pp&&pp in Object(t)?b8(t):D8(t)}var A8=E8;function C8(t){return t!=null&&typeof t=="object"}var F8=C8,S8=A8,B8=F8,O8="[object Symbol]";function M8(t){return typeof t=="symbol"||B8(t)&&S8(t)==O8}var P8=M8,k8=o8,gp=hg,T8=P8,vp=0/0,I8=/^[-+]0x[0-9a-f]+$/i,x8=/^0b[01]+$/i,N8=/^0o[0-7]+$/i,L8=parseInt;function R8(t){if(typeof t=="number")return t;if(T8(t))return vp;if(gp(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=gp(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=k8(t);var r=x8.test(t);return r||N8.test(t)?L8(t.slice(2),r?2:8):I8.test(t)?vp:+t}var U8=R8,V8=hg,vc=t8,mp=U8,j8="Expected a function",z8=Math.max,q8=Math.min;function W8(t,e,r){var n,i,a,o,s,l,h=0,c=!1,f=!1,p=!0;if(typeof t!="function")throw new TypeError(j8);e=mp(e)||0,V8(r)&&(c=!!r.leading,f="maxWait"in r,a=f?z8(mp(r.maxWait)||0,e):a,p="trailing"in r?!!r.trailing:p);function g(P){var O=n,F=i;return n=i=void 0,h=P,o=t.apply(F,O),o}function b(P){return h=P,s=setTimeout(D,e),c?g(P):o}function v(P){var O=P-l,F=P-h,x=e-O;return f?q8(x,a-F):x}function m(P){var O=P-l,F=P-h;return l===void 0||O>=e||O<0||f&&F>=a}function D(){var P=vc();if(m(P))return S(P);s=setTimeout(D,v(P))}function S(P){return s=void 0,p&&n?g(P):(n=i=void 0,o)}function y(){s!==void 0&&clearTimeout(s),h=0,n=l=i=s=void 0}function A(){return s===void 0?o:S(vc())}function C(){var P=vc(),O=m(P);if(n=arguments,i=this,l=P,O){if(s===void 0)return b(l);if(f)return clearTimeout(s),s=setTimeout(D,e),g(l)}return s===void 0&&(s=setTimeout(D,e)),o}return C.cancel=y,C.flush=A,C}var so=W8;function _p(t,e,r){const n=t.slice();return n[13]=e[r],n[15]=r,n}function bp(t,e){let r,n,i=e[13]+"",a,o,s,l,h,c,f,p,g;function b(){return e[10](e[13])}function v(){return e[12](e[13])}return{key:t,first:null,c(){r=W("tr"),n=W("td"),a=we(i),o=Ee(),s=W("td"),l=W("button"),h=pt("svg"),c=pt("path"),f=Ee(),this.h()},l(m){r=H(m,"TR",{});var D=U(r);n=H(D,"TD",{style:!0,class:!0});var S=U(n);a=ye(S,i),S.forEach(M),o=Ae(D),s=H(D,"TD",{style:!0,class:!0});var y=U(s);l=H(y,"BUTTON",{class:!0});var A=U(l);h=gt(A,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var C=U(h);c=gt(C,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),U(c).forEach(M),C.forEach(M),A.forEach(M),y.forEach(M),f=Ae(D),D.forEach(M),this.h()},h(){Ot(n,"max-width","20px"),B(n,"class","text-ellipsis cursor-copy whitespace-nowrap overflow-hidden select-none hover:text-white"),B(c,"stroke-linecap","round"),B(c,"stroke-linejoin","round"),B(c,"stroke-width","2"),B(c,"d","M6 18L18 6M6 6l12 12"),B(h,"xmlns","http://www.w3.org/2000/svg"),B(h,"class","h-6 w-6"),B(h,"fill","none"),B(h,"viewBox","0 0 24 24"),B(h,"stroke","red"),B(l,"class","btn btn-sm btn-circle btn-outline"),Ot(s,"max-width","4rem"),Ot(s,"width","4rem"),B(s,"class",""),this.first=r},m(m,D){ue(m,r,D),k(r,n),k(n,a),k(r,o),k(r,s),k(s,l),k(l,h),k(h,c),k(r,f),p||(g=[De(n,"click",b),De(n,"change",e[11]),De(s,"click",v)],p=!0)},p(m,D){e=m,D&4&&i!==(i=e[13]+"")&&zt(a,i)},d(m){m&&M(r),p=!1,Rt(g)}}}function H8(t){let e,r,n,i,a,o,s,l,h,c,f,p,g=[],b=new Map,v,m,D;e=new fg({props:{total:t[3],current:t[0],size:t[1],onChange:t[5],onResize:t[6]}});let S=t[2];const y=A=>A[15];for(let A=0;A<S.length;A+=1){let C=_p(t,S,A),P=y(C);b.set(P,g[A]=bp(P,C))}return{c(){Le(e.$$.fragment),r=Ee(),n=W("div"),i=W("table"),a=W("thead"),o=W("tr"),s=W("th"),l=we("Concept"),h=Ee(),c=W("th"),f=Ee(),p=W("tbody");for(let A=0;A<g.length;A+=1)g[A].c();this.h()},l(A){Re(e.$$.fragment,A),r=Ae(A),n=H(A,"DIV",{class:!0});var C=U(n);i=H(C,"TABLE",{class:!0});var P=U(i);a=H(P,"THEAD",{});var O=U(a);o=H(O,"TR",{});var F=U(o);s=H(F,"TH",{});var x=U(s);l=ye(x,"Concept"),x.forEach(M),h=Ae(F),c=H(F,"TH",{}),U(c).forEach(M),F.forEach(M),O.forEach(M),f=Ae(P),p=H(P,"TBODY",{});var z=U(p);for(let G=0;G<g.length;G+=1)g[G].l(z);z.forEach(M),P.forEach(M),C.forEach(M),this.h()},h(){B(i,"class","table w-full"),B(n,"class","w-full px-4 overflow-y-auto")},m(A,C){Ue(e,A,C),ue(A,r,C),ue(A,n,C),k(n,i),k(i,a),k(a,o),k(o,s),k(s,l),k(o,h),k(o,c),k(i,f),k(i,p);for(let P=0;P<g.length;P+=1)g[P]&&g[P].m(p,null);v=!0,m||(D=De(n,"paste",t[4]),m=!0)},p(A,[C]){const P={};C&8&&(P.total=A[3]),C&1&&(P.current=A[0]),C&2&&(P.size=A[1]),e.$set(P),C&132&&(S=A[2],g=jn(g,C,y,1,A,S,b,p,Qn,bp,null,_p))},i(A){v||(oe(e.$$.fragment,A),v=!0)},o(A){de(e.$$.fragment,A),v=!1},d(A){Ve(e,A),A&&M(r),A&&M(n);for(let C=0;C<g.length;C+=1)g[C].d();m=!1,D()}}}function $8(t){navigator.clipboard.writeText(t)}function G8(t,e,r){let n,i,a,o;je(t,Qr,m=>r(9,o=m));let s=1,l=10;function h(){console.log("pasted"),navigator.clipboard.readText().then(m=>{const D=$s(m).map(y=>y[0]),S=o;D.forEach(y=>{S[y]||di.update(A=>(A[y]=!1,A))})})}function c(m){r(0,s=m)}function f(m){r(0,s=1),r(1,l=m)}const p=so(m=>{di.update(D=>(D[m]=!1,D))},500),g=m=>$8(m),b=m=>p(m.target.value),v=m=>Qr.remove(m);return t.$$.update=()=>{t.$$.dirty&512&&r(8,n=Object.keys(o)),t.$$.dirty&258&&r(3,i=Math.ceil(n.length/l)),t.$$.dirty&259&&r(2,a=Array.from(n).sort().slice((s-1)*l,s*l))},[s,l,a,i,h,c,f,p,n,o,g,b,v]}class K8 extends Ze{constructor(e){super(),Je(this,e,G8,H8,Qe,{})}}function Y8(t){let e,r;return e=new $S({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function Z8(t){let e,r;return e=new K8({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function J8(t){let e,r,n,i;const a=[Z8,Y8],o=[];function s(l,h){return l[0]===xs.List?0:l[0]===xs.Map?1:-1}return~(e=s(t))&&(r=o[e]=a[e](t)),{c(){r&&r.c(),n=yt()},l(l){r&&r.l(l),n=yt()},m(l,h){~e&&o[e].m(l,h),ue(l,n,h),i=!0},p(l,[h]){let c=e;e=s(l),e!==c&&(r&&(Gt(),de(o[c],1,1,()=>{o[c]=null}),Kt()),~e?(r=o[e],r||(r=o[e]=a[e](l),r.c()),oe(r,1),r.m(n.parentNode,n)):r=null)},i(l){i||(oe(r),i=!0)},o(l){de(r),i=!1},d(l){~e&&o[e].d(l),l&&M(n)}}}function Q8(t,e,r){let n;return je(t,LS,i=>r(0,n=i)),[n]}class X8 extends Ze{constructor(e){super(),Je(this,e,Q8,J8,Qe,{})}}const mc="preferredEmbeddingModel";function e7(){const t=Yt(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[mc]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[mc]=a,r(a))},get:()=>St(t),delete:()=>{i&&(delete localStorage[mc],r(""))}}}const zc=e7();async function t7(t){const e=Bu(Vn.get());return(await IC(e,t,zc.get()||"text-embedding-ada-002")).data.data[0].embedding}const Os="cacheSize";function r7(){const t=Yt(50),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Os]?parseInt(localStorage[Os]):50),{subscribe:e,update:a=>{i&&(localStorage[Os]=JSON.stringify(a),r(a))},get:()=>St(t),delete:()=>{i&&(delete localStorage[Os],r(50))}}}const qc=r7();function n7(t){let e,r,n,i;return{c(){e=W("div"),r=W("div"),n=W("p"),i=we("Some features require OpenAI Key"),this.h()},l(a){e=H(a,"DIV",{class:!0});var o=U(e);r=H(o,"DIV",{class:!0});var s=U(r);n=H(s,"P",{class:!0});var l=U(n);i=ye(l,"Some features require OpenAI Key"),l.forEach(M),s.forEach(M),o.forEach(M),this.h()},h(){B(n,"class","text-xs"),B(r,"class","flex flex-col justify-start mr-5"),B(e,"class","w-full flex justify-center p-4")},m(a,o){ue(a,e,o),k(e,r),k(r,n),k(n,i)},d(a){a&&M(e)}}}function i7(t){let e,r,n,i,a,o,s;return{c(){e=W("div"),r=W("div"),n=W("progress"),i=Ee(),a=W("div"),o=W("p"),s=we("Embedding..."),this.h()},l(l){e=H(l,"DIV",{class:!0});var h=U(e);r=H(h,"DIV",{class:!0});var c=U(r);n=H(c,"PROGRESS",{class:!0}),U(n).forEach(M),c.forEach(M),i=Ae(h),a=H(h,"DIV",{class:!0});var f=U(a);o=H(f,"P",{class:!0});var p=U(o);s=ye(p,"Embedding..."),p.forEach(M),f.forEach(M),h.forEach(M),this.h()},h(){B(n,"class","progress progress-primary w-20"),B(r,"class","flex flex-col justify-start mr-5"),B(o,"class","text-xs"),B(a,"class","flex flex-col justify-start mr-5"),B(e,"class","w-full flex justify-center p-4")},m(l,h){ue(l,e,h),k(e,r),k(r,n),k(e,i),k(e,a),k(a,o),k(o,s)},d(l){l&&M(e)}}}function a7(t){let e;function r(a,o){if(a[0])return i7;if(!a[1])return n7}let n=r(t),i=n&&n(t);return{c(){i&&i.c(),e=yt()},l(a){i&&i.l(a),e=yt()},m(a,o){i&&i.m(a,o),ue(a,e,o)},p(a,[o]){n!==(n=r(a))&&(i&&i.d(1),i=n&&n(a),i&&(i.c(),i.m(e.parentNode,e)))},i:Oe,o:Oe,d(a){i&&i.d(a),a&&M(e)}}}function u7(t,e,r){let n,i,a;je(t,di,f=>r(2,n=f)),je(t,qc,f=>r(3,i=f)),je(t,Vn,f=>r(1,a=f));let o=!1;function s(){return Object.keys(n).length}const l=Qr.subscribe(f=>{const p=Object.entries(f).filter(([g,b])=>!b);a&&p.length>0&&p.forEach(([g,b])=>{di.update(v=>(v[g]=!1,v))})}),h=di.subscribe(f=>{!!(Vn.get()&&s()>0&&!o)&&(r(0,o=!0),c())});function c(){console.log("start embedding");const f=Object.keys(n)[0];di.update(p=>(p[f]=!0,p)),t7(f).then(p=>{Qr.update(f,p),Qr.cache(i);const g={...n};delete g[f],di.set(g),s()>0?c():r(0,o=!1)})}return $c(()=>{l(),h()}),[o,a]}class s7 extends Ze{constructor(e){super(),Je(this,e,u7,a7,Qe,{})}}function o7(t,e,r){return je(t,Qr,n=>r(0,n)),[]}class l7 extends Ze{constructor(e){super(),Je(this,e,o7,null,Qe,{})}}function c7(t){let e,r,n,i,a;return{c(){e=W("div"),r=W("button"),n=we("Delete History"),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=U(e);r=H(s,"BUTTON",{class:!0});var l=U(r);n=ye(l,"Delete History"),l.forEach(M),s.forEach(M),this.h()},h(){B(r,"class","btn btn-sm btn-error"),B(e,"class","flex justify-end p-2")},m(o,s){ue(o,e,s),k(e,r),k(r,n),i||(a=De(r,"click",t[0]),i=!0)},p:Oe,i:Oe,o:Oe,d(o){o&&M(e),i=!1,a()}}}function f7(t){function e(){uf.delete()}return[e]}class h7 extends Ze{constructor(e){super(),Je(this,e,f7,c7,Qe,{})}}function d7(t){let e,r;return e=new h7({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},p:Oe,i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function p7(t){let e,r;return e=new l7({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},p:Oe,i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function g7(t){let e,r,n,i,a;r=new Tw({});let o=(t[1].weightMode===$e.Circle||t[1].weightMode===$e.Pie||t[1].weightMode===$e.Ring)&&Dp(),s=(t[1].weightMode===$e.Embed||t[1].weightMode===$e.EmbedGrid||t[1].weightMode===$e.EmbedRandom)&&wp();return{c(){e=W("div"),Le(r.$$.fragment),n=Ee(),o&&o.c(),i=Ee(),s&&s.c()},l(l){e=H(l,"DIV",{});var h=U(e);Re(r.$$.fragment,h),n=Ae(h),o&&o.l(h),i=Ae(h),s&&s.l(h),h.forEach(M)},m(l,h){ue(l,e,h),Ue(r,e,null),k(e,n),o&&o.m(e,null),k(e,i),s&&s.m(e,null),a=!0},p(l,h){l[1].weightMode===$e.Circle||l[1].weightMode===$e.Pie||l[1].weightMode===$e.Ring?o?h&2&&oe(o,1):(o=Dp(),o.c(),oe(o,1),o.m(e,i)):o&&(Gt(),de(o,1,1,()=>{o=null}),Kt()),l[1].weightMode===$e.Embed||l[1].weightMode===$e.EmbedGrid||l[1].weightMode===$e.EmbedRandom?s?h&2&&oe(s,1):(s=wp(),s.c(),oe(s,1),s.m(e,null)):s&&(Gt(),de(s,1,1,()=>{s=null}),Kt())},i(l){a||(oe(r.$$.fragment,l),oe(o),oe(s),a=!0)},o(l){de(r.$$.fragment,l),de(o),de(s),a=!1},d(l){l&&M(e),Ve(r),o&&o.d(),s&&s.d()}}}function Dp(t){let e,r;return e=new zw({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function wp(t){let e,r;return e=new Hw({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function v7(t){let e,r,n;return r=new NS({}),{c(){e=W("div"),Le(r.$$.fragment),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=U(e);Re(r.$$.fragment,a),a.forEach(M),this.h()},h(){B(e,"class","flex flex-col h-full mt-10 overflow-hidden")},m(i,a){ue(i,e,a),Ue(r,e,null),n=!0},i(i){n||(oe(r.$$.fragment,i),n=!0)},o(i){de(r.$$.fragment,i),n=!1},d(i){i&&M(e),Ve(r)}}}function m7(t){let e,r,n;return r=new X8({}),{c(){e=W("div"),Le(r.$$.fragment),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=U(e);Re(r.$$.fragment,a),a.forEach(M),this.h()},h(){B(e,"class","flex flex-col h-full mt-10 overflow-hidden")},m(i,a){ue(i,e,a),Ue(r,e,null),n=!0},i(i){n||(oe(r.$$.fragment,i),n=!0)},o(i){de(r.$$.fragment,i),n=!1},d(i){i&&M(e),Ve(r)}}}function _7(t){let e,r,n;return r=new MS({}),{c(){e=W("div"),Le(r.$$.fragment),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=U(e);Re(r.$$.fragment,a),a.forEach(M),this.h()},h(){B(e,"class","flex flex-col h-full place-content-between")},m(i,a){ue(i,e,a),Ue(r,e,null),n=!0},i(i){n||(oe(r.$$.fragment,i),n=!0)},o(i){de(r.$$.fragment,i),n=!1},d(i){i&&M(e),Ve(r)}}}function b7(t){let e,r,n,i,a,o,s,l,h,c,f,p,g;i=new Dw({}),o=new s7({});const b=[g7,p7,d7],v=[];function m(A,C){return A[0]===br.Build?0:A[0]===br.Concept?1:A[0]===br.History?2:-1}~(l=m(t))&&(h=v[l]=b[l](t));const D=[_7,m7,v7],S=[];function y(A,C){return A[0]===br.Build?0:A[0]===br.Concept?1:A[0]===br.History?2:-1}return~(f=y(t))&&(p=S[f]=D[f](t)),{c(){e=W("div"),r=W("div"),n=W("div"),Le(i.$$.fragment),a=Ee(),Le(o.$$.fragment),s=Ee(),h&&h.c(),c=Ee(),p&&p.c(),this.h()},l(A){e=H(A,"DIV",{class:!0});var C=U(e);r=H(C,"DIV",{class:!0});var P=U(r);n=H(P,"DIV",{class:!0});var O=U(n);Re(i.$$.fragment,O),a=Ae(O),Re(o.$$.fragment,O),s=Ae(O),h&&h.l(O),O.forEach(M),P.forEach(M),c=Ae(C),p&&p.l(C),C.forEach(M),this.h()},h(){B(n,"class","w-full flex justify-between"),B(r,"class","w-full absolute top-0 z-10"),B(e,"class","relative w-full h-screen flex flex-col")},m(A,C){ue(A,e,C),k(e,r),k(r,n),Ue(i,n,null),k(n,a),Ue(o,n,null),k(n,s),~l&&v[l].m(n,null),k(e,c),~f&&S[f].m(e,null),g=!0},p(A,[C]){let P=l;l=m(A),l===P?~l&&v[l].p(A,C):(h&&(Gt(),de(v[P],1,1,()=>{v[P]=null}),Kt()),~l?(h=v[l],h?h.p(A,C):(h=v[l]=b[l](A),h.c()),oe(h,1),h.m(n,null)):h=null);let O=f;f=y(A),f!==O&&(p&&(Gt(),de(S[O],1,1,()=>{S[O]=null}),Kt()),~f?(p=S[f],p||(p=S[f]=D[f](A),p.c()),oe(p,1),p.m(e,null)):p=null)},i(A){g||(oe(i.$$.fragment,A),oe(o.$$.fragment,A),oe(h),oe(p),g=!0)},o(A){de(i.$$.fragment,A),de(o.$$.fragment,A),de(h),de(p),g=!1},d(A){A&&M(e),Ve(i),Ve(o),~l&&v[l].d(),~f&&S[f].d()}}}function D7(t,e,r){let n,i;return je(t,yc,a=>r(0,n=a)),je(t,Ye,a=>r(1,i=a)),[n,i]}class w7 extends Ze{constructor(e){super(),Je(this,e,D7,b7,Qe,{})}}const _c="panelMode";function y7(){const t=Yt("select"),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[_c]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[_c]=a,r(a))},get:()=>St(t),delete:()=>{i&&(delete localStorage[_c],r("select"))}}}const gi=y7();function yp(t,e,r){const n=t.slice();return n[7]=e[r][0],n[8]=e[r][1],n}function Ep(t,e,r){const n=t.slice();return n[11]=e[r][0],n[12]=e[r][1],n}function Ap(t){let e=t[12].text+"",r,n,i,a;return{c(){r=we(e),n=W("b"),i=we("::"),a=Ee()},l(o){r=ye(o,e),n=H(o,"B",{});var s=U(n);i=ye(s,"::"),s.forEach(M),a=Ae(o)},m(o,s){ue(o,r,s),ue(o,n,s),k(n,i),ue(o,a,s)},p(o,s){s&1&&e!==(e=o[12].text+"")&&zt(r,e)},d(o){o&&M(r),o&&M(n),o&&M(a)}}}function Cp(t,e){let r,n,i,a,o,s=Object.entries(e[8].weightedPrompts),l=[];for(let c=0;c<s.length;c+=1)l[c]=Ap(Ep(e,s,c));function h(){return e[5](e[7],e[8])}return{key:t,first:null,c(){r=W("li"),n=W("a");for(let c=0;c<l.length;c+=1)l[c].c();i=Ee(),this.h()},l(c){r=H(c,"LI",{});var f=U(r);n=H(f,"A",{class:!0});var p=U(n);for(let g=0;g<l.length;g+=1)l[g].l(p);p.forEach(M),i=Ae(f),f.forEach(M),this.h()},h(){B(n,"class","text-xs inline-block"),Ge(n,"active",e[1]===e[7]),this.first=r},m(c,f){ue(c,r,f),k(r,n);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(n,null);k(r,i),a||(o=De(n,"click",h),a=!0)},p(c,f){if(e=c,f&5){s=Object.entries(e[8].weightedPrompts);let p;for(p=0;p<s.length;p+=1){const g=Ep(e,s,p);l[p]?l[p].p(g,f):(l[p]=Ap(g),l[p].c(),l[p].m(n,null))}for(;p<l.length;p+=1)l[p].d(1);l.length=s.length}f&7&&Ge(n,"active",e[1]===e[7])},d(c){c&&M(r),Pu(l,c),a=!1,o()}}}function E7(t){let e,r,n,i,a,o=[],s=new Map,l,h,c=t[2](t[0],Fp,"desc");const f=p=>p[7];for(let p=0;p<c.length;p+=1){let g=yp(t,c,p),b=f(g);s.set(b,o[p]=Cp(b,g))}return{c(){e=W("ul"),r=W("li"),n=W("a"),i=we("New +"),a=Ee();for(let p=0;p<o.length;p+=1)o[p].c();this.h()},l(p){e=H(p,"UL",{class:!0});var g=U(e);r=H(g,"LI",{});var b=U(r);n=H(b,"A",{class:!0});var v=U(n);i=ye(v,"New +"),v.forEach(M),b.forEach(M),a=Ae(g);for(let m=0;m<o.length;m+=1)o[m].l(g);g.forEach(M),this.h()},h(){B(n,"class","text-xs inline-block"),B(e,"class","menu h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(p,g){ue(p,e,g),k(e,r),k(r,n),k(n,i),k(e,a);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(e,null);l||(h=De(n,"click",t[3]),l=!0)},p(p,[g]){g&23&&(c=p[2](p[0],Fp,"desc"),o=jn(o,g,f,1,p,c,s,e,Qn,Cp,null,yp))},i:Oe,o:Oe,d(p){p&&M(e);for(let g=0;g<o.length;g+=1)o[g].d();l=!1,h()}}}const Fp=t=>t[1].date;function A7(t,e,r){let n,i,a;je(t,Ye,c=>r(6,n=c)),je(t,Sw,c=>r(0,i=c)),je(t,ea,c=>r(1,a=c));const{orderBy:o}=RC;function s(){ea.delete(),Ye.update(Mi({},n.promptLimit,n.weightMode)),gi.update("edit")}function l(c,f){ea.update(c),Ye.update({...f}),gi.update("edit")}return[i,a,o,s,l,(c,f)=>l(c,f)]}class C7 extends Ze{constructor(e){super(),Je(this,e,A7,E7,Qe,{})}}function Sp(t,e,r){const n=t.slice();return n[21]=e[r].id,n[22]=e[r].text,n}function Bp(t,e){let r,n,i,a,o;function s(...h){return e[10](e[21],...h)}function l(...h){return e[11](e[21],...h)}return{key:t,first:null,c(){r=W("li"),n=W("input"),this.h()},l(h){r=H(h,"LI",{class:!0});var c=U(r);n=H(c,"INPUT",{type:!0,placeholder:!0,class:!0}),c.forEach(M),this.h()},h(){n.value=i=e[22],B(n,"type","text"),B(n,"placeholder",""),B(n,"class","input input-bordered input-sm w-full"),B(r,"class","p-1"),this.first=r},m(h,c){ue(h,r,c),k(r,n),a||(o=[De(n,"input",s),De(n,"keydown",l),De(n,"keyup",e[12])],a=!0)},p(h,c){e=h,c&4&&i!==(i=e[22])&&n.value!==i&&(n.value=i)},d(h){h&&M(r),a=!1,Rt(o)}}}function F7(t){let e,r,n,i,a,o,s,l,h,c,f,p=[],g=new Map,b,v,m,D,S,y,A,C,P,O,F,x,z=t[2];const G=J=>J[21];for(let J=0;J<z.length;J+=1){let R=Sp(t,z,J),N=G(R);g.set(N,p[J]=Bp(N,R))}return{c(){e=W("div"),r=W("button"),n=we("Paste"),i=Ee(),a=W("button"),o=we("Save"),s=Ee(),l=W("button"),h=we("Delete"),c=Ee(),f=W("ul");for(let J=0;J<p.length;J+=1)p[J].c();b=Ee(),v=W("li"),m=W("input"),D=Ee(),S=W("div"),y=W("p"),A=we("Shift+Enter to add a line"),C=Ee(),P=W("p"),O=we("Bksp to remove an empty line"),this.h()},l(J){e=H(J,"DIV",{class:!0});var R=U(e);r=H(R,"BUTTON",{class:!0});var N=U(r);n=ye(N,"Paste"),N.forEach(M),i=Ae(R),a=H(R,"BUTTON",{class:!0});var j=U(a);o=ye(j,"Save"),j.forEach(M),s=Ae(R),l=H(R,"BUTTON",{class:!0});var q=U(l);h=ye(q,"Delete"),q.forEach(M),R.forEach(M),c=Ae(J),f=H(J,"UL",{class:!0});var Z=U(f);for(let ge=0;ge<p.length;ge+=1)p[ge].l(Z);b=Ae(Z),v=H(Z,"LI",{class:!0});var X=U(v);m=H(X,"INPUT",{type:!0,placeholder:!0,class:!0}),X.forEach(M),Z.forEach(M),D=Ae(J),S=H(J,"DIV",{class:!0});var te=U(S);y=H(te,"P",{});var fe=U(y);A=ye(fe,"Shift+Enter to add a line"),fe.forEach(M),C=Ae(te),P=H(te,"P",{});var he=U(P);O=ye(he,"Bksp to remove an empty line"),he.forEach(M),te.forEach(M),this.h()},h(){B(r,"class","btn btn-sm btn-info mx-2"),B(a,"class","btn btn-sm btn-success mx-2"),B(l,"class","btn btn-sm btn-error mx-2"),B(e,"class","flex px-8 py-2 justify-center bg-base-100"),B(m,"type","text"),B(m,"placeholder","Add prompt"),B(m,"class","input input-bordered input-sm w-full italic"),B(v,"class","p-1"),B(f,"class","h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block"),B(S,"class","w-full justify-end bg-base-100 p-2 text-xs select-none")},m(J,R){ue(J,e,R),k(e,r),k(r,n),k(e,i),k(e,a),k(a,o),k(e,s),k(e,l),k(l,h),ue(J,c,R),ue(J,f,R);for(let N=0;N<p.length;N+=1)p[N]&&p[N].m(f,null);k(f,b),k(f,v),k(v,m),an(m,t[0]),ue(J,D,R),ue(J,S,R),k(S,y),k(y,A),k(S,C),k(S,P),k(P,O),F||(x=[De(r,"click",t[4]),De(a,"click",t[3]),De(l,"click",t[5]),De(m,"input",t[13]),De(m,"keydown",t[14])],F=!0)},p(J,[R]){R&198&&(z=J[2],p=jn(p,R,G,1,J,z,g,f,Qn,Bp,b,Sp)),R&1&&m.value!==J[0]&&an(m,J[0])},i:Oe,o:Oe,d(J){J&&M(e),J&&M(c),J&&M(f);for(let R=0;R<p.length;R+=1)p[R].d();J&&M(D),J&&M(S),F=!1,Rt(x)}}}function S7(t,e,r){let n,i,a,o;je(t,Ye,F=>r(9,i=F)),je(t,ea,F=>r(15,a=F)),je(t,Qr,F=>r(16,o=F));let s="",l=Object.keys(i.weightedPrompts).length,h=!1;function c(){wu.update(Eo(),{...i,date:Date.now()}),gi.update("select")}function f(){navigator.clipboard.readText().then(F=>{const x=$s(F),z=Object.values(i.weightedPrompts).map(G=>[G.text,G.parsedWeight]);p([...z,...x])})}function p(F){const x=Math.max(...F.map(([G,J])=>J)),z=F.reduce((G,[J,R],N)=>(G[N]=Tr(N,J,R,R/x),o[J]||Qr.update(J,null),G),{});ea.delete(),Ye.update(Mi(z,i.promptLimit,i.weightMode)),r(0,s="")}function g(){a&&wu.delete(a),ea.delete(),Ye.delete(),gi.update("select")}function b(F){console.log("remove",F);const z=Object.entries(i.weightedPrompts).filter(([G])=>G!==F).map(([G,J])=>[J.text,J.parsedWeight]);return p(z)}function v(F,x){console.log("change",F);let z={...i.weightedPrompts};const G={...z[F],text:x};z[F]=G,Ye.update({...i,weightedPrompts:z})}const m=so(v,500);function D(F){console.log("new",F);const x=Object.entries(i.weightedPrompts).map(([z,G])=>[G.text,G.parsedWeight]);return x.push([F,1]),p(x)}function S(F,x=null){const z=F.key,G=F.target.value;if(z==="Shift"){r(1,h=!0);return}if(x!==null){if(z==="Enter"&&G!==""?v(x,G):z==="Backspace"&&G===""&&b(x),z==="Enter"&&h){const R=Object.entries(i.weightedPrompts).map(([j,q])=>[q.text,q.parsedWeight]),N=parseInt(x)+1;return console.log("adding prompt at",x+1),R.splice(N,0,["",1]),p(R)}}else z==="Enter"&&G!==""&&D(G)}const y=(F,x)=>m(F,x.target.value),A=(F,x)=>S(x,F),C=F=>{F.key==="Shift"&&r(1,h=!1)};function P(){s=this.value,r(0,s),r(9,i),r(8,l)}const O=F=>S(F);return t.$$.update=()=>{if(t.$$.dirty&768){const F=Object.keys(i.weightedPrompts).length;F>l&&(r(8,l=F),r(0,s=""))}t.$$.dirty&512&&r(2,n=Object.entries(i.weightedPrompts).map(([F,x])=>({id:F,text:x.text})))},[s,h,n,c,f,g,m,S,l,i,y,A,C,P,O]}class B7 extends Ze{constructor(e){super(),Je(this,e,S7,F7,Qe,{})}}const O7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. The first sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. The middle three sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. The final sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,M7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 10 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. Four sentences should describe the subject.
    d. Four sentences should describe the scene.
    e. Tow sentences should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,P7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 10 concepts.
    a. Each concept should be 10 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
`,k7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 20 concepts.
    a. Each concept should be 5 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
3. Do not use hyphens to mark list items.
4. Do not title the list.
`,T7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. One sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. Two sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. One sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
    f. One sentence should be a poetic concept or feeling. Example: The unfathomable depths of a lover's sigh.
        i. The poetic concept should be intense.
        ii. The poetic concept should be emotional.
        iii. The poetic concept should include abstract words.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`;function I7(){const t=Yt({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith("directive")){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=St(t),h={...s[a]||{},...o};i&&(localStorage[`directive_${a}`]=JSON.stringify(h));const c={...s,[a]:h};r(c)},get:a=>St(t)[a],delete:a=>{i&&delete localStorage[`directive_${a}`];const o={...St(t)};delete o[a],r(o)}}}const oo=I7(),x7=ku(oo,t=>Object.entries(St(oo))),bc="preferredDirective";function N7(){const t=Yt(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[bc]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[bc]=a,r(a))},get:()=>St(t),delete:()=>{i&&(delete localStorage[bc],r(""))}}}const Ms=N7(),Dc="metaPrompt";function L7(){const t=Yt(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Dc]||""),{subscribe:e,update:a=>{i&&(localStorage[Dc]=a,r(a))},get:()=>St(t),delete:()=>{i&&(delete localStorage[Dc],r(""))}}}const Wc=L7(),Aa=Yt("");function Op(t,e,r){const n=t.slice();return n[21]=e[r][0],n[22]=e[r][1],n}function Mp(t,e){let r,n=e[22].name+"",i,a=e[22].builtIn?" (Built-In)":" (User)",o,s,l;return{key:t,first:null,c(){r=W("option"),i=we(n),o=we(a),this.h()},l(h){r=H(h,"OPTION",{});var c=U(r);i=ye(c,n),o=ye(c,a),c.forEach(M),this.h()},h(){r.__value=s=e[21],r.value=r.__value,r.selected=l=e[3]===e[21],this.first=r},m(h,c){ue(h,r,c),k(r,i),k(r,o)},p(h,c){e=h,c&16&&n!==(n=e[22].name+"")&&zt(i,n),c&16&&a!==(a=e[22].builtIn?" (Built-In)":" (User)")&&zt(o,a),c&16&&s!==(s=e[21])&&(r.__value=s,r.value=r.__value),c&24&&l!==(l=e[3]===e[21])&&(r.selected=l)},d(h){h&&M(r)}}}function Pp(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b,v=!t[7]&&kp(t),m=t[6]&&Tp(t);function D(A,C){return A[1]?U7:R7}let S=D(t),y=S(t);return{c(){v&&v.c(),e=Ee(),r=W("div"),n=W("textarea"),i=Ee(),a=W("div"),o=W("textarea"),s=Ee(),l=W("div"),m&&m.c(),h=Ee(),c=W("button"),f=we("Preview"),p=Ee(),y.c(),this.h()},l(A){v&&v.l(A),e=Ae(A),r=H(A,"DIV",{class:!0});var C=U(r);n=H(C,"TEXTAREA",{class:!0,placeholder:!0}),U(n).forEach(M),C.forEach(M),i=Ae(A),a=H(A,"DIV",{class:!0});var P=U(a);o=H(P,"TEXTAREA",{class:!0,placeholder:!0}),U(o).forEach(M),P.forEach(M),s=Ae(A),l=H(A,"DIV",{class:!0});var O=U(l);m&&m.l(O),h=Ae(O),c=H(O,"BUTTON",{class:!0});var F=U(c);f=ye(F,"Preview"),F.forEach(M),p=Ae(O),y.l(O),O.forEach(M),this.h()},h(){B(n,"class","font-mono text-xs textarea textarea-bordered w-full h-full resize-none"),B(n,"placeholder","GPT Directives"),B(r,"class","w-full p-2 h-1/2"),o.value=t[9],B(o,"class","textarea textarea-bordered w-full h-full resize-none"),B(o,"placeholder","Describe the prompt to generate."),B(a,"class","w-full p-2 h-1/5"),B(c,"class","btn btn-sm btn btn-info"),B(l,"class","w-full p-2 h-12 flex justify-between")},m(A,C){v&&v.m(A,C),ue(A,e,C),ue(A,r,C),k(r,n),an(n,t[8]),ue(A,i,C),ue(A,a,C),k(a,o),ue(A,s,C),ue(A,l,C),m&&m.m(l,null),k(l,h),k(l,c),k(c,f),k(l,p),y.m(l,null),g||(b=[De(n,"input",t[17]),De(o,"input",t[18]),De(c,"click",function(){Ma(t[0])&&t[0].apply(this,arguments)})],g=!0)},p(A,C){t=A,t[7]?v&&(v.d(1),v=null):v?v.p(t,C):(v=kp(t),v.c(),v.m(e.parentNode,e)),C&256&&an(n,t[8]),C&512&&(o.value=t[9]),t[6]?m?m.p(t,C):(m=Tp(t),m.c(),m.m(l,h)):m&&(m.d(1),m=null),S===(S=D(t))&&y?y.p(t,C):(y.d(1),y=S(t),y&&(y.c(),y.m(l,null)))},d(A){v&&v.d(A),A&&M(e),A&&M(r),A&&M(i),A&&M(a),A&&M(s),A&&M(l),m&&m.d(),y.d(),g=!1,Rt(b)}}}function kp(t){let e,r,n,i,a,o,s;return{c(){e=W("div"),r=W("input"),n=Ee(),i=W("button"),a=we("Save"),this.h()},l(l){e=H(l,"DIV",{class:!0});var h=U(e);r=H(h,"INPUT",{type:!0,placeholder:!0,class:!0}),n=Ae(h),i=H(h,"BUTTON",{class:!0});var c=U(i);a=ye(c,"Save"),c.forEach(M),h.forEach(M),this.h()},h(){B(r,"type","text"),B(r,"placeholder","Name"),B(r,"class","input input-bordered input-sm w-full max-w-xs"),B(i,"class","btn btn-sm btn-primary ml-4"),B(e,"class","w-full p-2 h-12 flex justify-between")},m(l,h){ue(l,e,h),k(e,r),an(r,t[5]),k(e,n),k(e,i),k(i,a),o||(s=[De(r,"input",t[16]),De(i,"click",t[10])],o=!0)},p(l,h){h&32&&r.value!==l[5]&&an(r,l[5])},d(l){l&&M(e),o=!1,Rt(s)}}}function Tp(t){let e,r,n,i;return{c(){e=W("button"),r=we("Delete"),this.h()},l(a){e=H(a,"BUTTON",{class:!0});var o=U(e);r=ye(o,"Delete"),o.forEach(M),this.h()},h(){B(e,"class","btn btn-sm btn-error")},m(a,o){ue(a,e,o),k(e,r),n||(i=De(e,"click",t[11]),n=!0)},p:Oe,d(a){a&&M(e),n=!1,i()}}}function R7(t){let e,r,n,i;return{c(){e=W("button"),r=we("Generate"),this.h()},l(a){e=H(a,"BUTTON",{class:!0});var o=U(e);r=ye(o,"Generate"),o.forEach(M),this.h()},h(){B(e,"class","btn btn-sm btn-primary")},m(a,o){ue(a,e,o),k(e,r),n||(i=De(e,"click",function(){Ma(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(a,o){t=a},d(a){a&&M(e),n=!1,i()}}}function U7(t){let e,r;return{c(){e=W("button"),r=we("Generating"),this.h()},l(n){e=H(n,"BUTTON",{class:!0});var i=U(e);r=ye(i,"Generating"),i.forEach(M),this.h()},h(){B(e,"class","btn btn-sm btn disabled")},m(n,i){ue(n,e,i),k(e,r)},p:Oe,d(n){n&&M(e)}}}function V7(t){let e,r,n,i,a,o,s,l,h,c,f=[],p=new Map,g,b,v,m,D,S,y,A=Object.entries(t[4]);const C=O=>O[21];for(let O=0;O<A.length;O+=1){let F=Op(t,A,O),x=C(F);p.set(x,f[O]=Mp(x,F))}let P=t[3]&&Pp(t);return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=we("Pick a directive for prompt creation"),o=Ee(),s=W("select"),l=W("option"),h=we("Pick one");for(let O=0;O<f.length;O+=1)f[O].c();g=W("option"),b=we("New"),m=Ee(),P&&P.c(),D=yt(),this.h()},l(O){e=H(O,"DIV",{class:!0});var F=U(e);r=H(F,"DIV",{class:!0});var x=U(r);n=H(x,"LABEL",{class:!0});var z=U(n);i=H(z,"SPAN",{class:!0});var G=U(i);a=ye(G,"Pick a directive for prompt creation"),G.forEach(M),z.forEach(M),o=Ae(x),s=H(x,"SELECT",{class:!0});var J=U(s);l=H(J,"OPTION",{});var R=U(l);h=ye(R,"Pick one"),R.forEach(M);for(let j=0;j<f.length;j+=1)f[j].l(J);g=H(J,"OPTION",{});var N=U(g);b=ye(N,"New"),N.forEach(M),J.forEach(M),x.forEach(M),F.forEach(M),m=Ae(O),P&&P.l(O),D=yt(),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),l.disabled=!0,l.selected=c=t[3]===null,l.__value="Pick one",l.value=l.__value,g.__value="new",g.value=g.__value,g.selected=v=t[3]==="new",B(s,"class","select select-bordered"),B(r,"class","form-control w-full max-w-xs mb-4"),B(e,"class","flex justify-center")},m(O,F){ue(O,e,F),k(e,r),k(r,n),k(n,i),k(i,a),k(r,o),k(r,s),k(s,l),k(l,h);for(let x=0;x<f.length;x+=1)f[x]&&f[x].m(s,null);k(s,g),k(g,b),Ii(s,t[3]),ue(O,m,F),P&&P.m(O,F),ue(O,D,F),S||(y=De(s,"change",t[12]),S=!0)},p(O,[F]){F&24&&c!==(c=O[3]===null)&&(l.selected=c),F&24&&(A=Object.entries(O[4]),f=jn(f,F,C,1,O,A,p,s,Qn,Mp,g,Op)),F&24&&v!==(v=O[3]==="new")&&(g.selected=v),F&24&&Ii(s,O[3]),O[3]?P?P.p(O,F):(P=Pp(O),P.c(),P.m(D.parentNode,D)):P&&(P.d(1),P=null)},i:Oe,o:Oe,d(O){O&&M(e);for(let F=0;F<f.length;F+=1)f[F].d();O&&M(m),P&&P.d(O),O&&M(D),S=!1,y()}}}function j7(t,e,r){let n,i,a,o,s,l,h,c;je(t,Aa,F=>r(8,s=F)),je(t,Ms,F=>r(14,l=F)),je(t,x7,F=>r(15,h=F)),je(t,Wc,F=>r(9,c=F));let{togglePreview:f=()=>{}}=e,{isGenerating:p=!1}=e,{handleGeneratePrompt:g=()=>{}}=e,b={C:{name:"Five Sentences",text:O7,builtIn:!0},D:{name:"Ten Sentences",text:M7,builtIn:!0},E:{name:"Fragments",text:P7,builtIn:!0},F:{name:"Concept Shotgun",text:k7,builtIn:!0},G:{name:"Poetic Accents",text:T7,builtIn:!0}},v=null,m="";function D(){const F=v==="new"?Eo():v;oo.update(F,{name:m,text:s,builtIn:!1}),v==="new"&&(r(3,v=F),Ms.update(F))}function S(){oo.delete(v),r(3,v=null),r(5,m=""),Aa.set(""),Ms.delete()}function y(F){r(3,v=F),Ms.update(F),F&&F!=="new"?(r(5,m=i[F].name),Aa.set(i[F].text)):F==="new"&&(r(5,m=""),Aa.set(""))}function A(F){y(F.target.value)}function C(){m=this.value,r(5,m)}function P(){s=this.value,Aa.set(s)}const O=F=>Wc.update(F.target.value);return t.$$set=F=>{"togglePreview"in F&&r(0,f=F.togglePreview),"isGenerating"in F&&r(1,p=F.isGenerating),"handleGeneratePrompt"in F&&r(2,g=F.handleGeneratePrompt)},t.$$.update=()=>{t.$$.dirty&32768&&r(13,n=h.reduce((F,[x,z])=>(F[x]={name:z.name,text:z.text,builtIn:!1},F),{})),t.$$.dirty&8192&&r(4,i=Object.entries({...b,...n}).reduce((F,[x,z])=>(F[x]=z,F),{})),t.$$.dirty&16392&&v===null&&l&&(r(3,v=l),y(v)),t.$$.dirty&24&&r(7,a=v&&v!=="new"&&i[v].builtIn),t.$$.dirty&24&&r(6,o=v&&v!=="new"&&!i[v].builtIn)},[f,p,g,v,i,m,o,a,s,c,D,S,A,n,l,h,C,P,O]}class z7 extends Ze{constructor(e){super(),Je(this,e,j7,V7,Qe,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}function q7(t,e){return`${t}

Use the following text to generate output based on the instructions above:

${e}`}const vg=ku([Aa,Wc,Li],t=>Fu(q7(t[0],t[1]),t[2]));function W7(t){let e,r,n,i;return{c(){e=W("button"),r=we("Generate"),this.h()},l(a){e=H(a,"BUTTON",{class:!0});var o=U(e);r=ye(o,"Generate"),o.forEach(M),this.h()},h(){B(e,"class","btn btn-sm btn-primary")},m(a,o){ue(a,e,o),k(e,r),n||(i=De(e,"click",function(){Ma(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(a,o){t=a},d(a){a&&M(e),n=!1,i()}}}function H7(t){let e,r;return{c(){e=W("button"),r=we("Generating"),this.h()},l(n){e=H(n,"BUTTON",{class:!0});var i=U(e);r=ye(i,"Generating"),i.forEach(M),this.h()},h(){B(e,"class","btn btn-sm btn disabled")},m(n,i){ue(n,e,i),k(e,r)},p:Oe,d(n){n&&M(e)}}}function $7(t){let e,r,n,i,a,o,s,l,h,c;function f(b,v){return b[1]?H7:W7}let p=f(t),g=p(t);return{c(){e=W("div"),r=W("p"),n=we(t[3]),i=Ee(),a=W("div"),o=W("button"),s=we("Back"),l=Ee(),g.c(),this.h()},l(b){e=H(b,"DIV",{class:!0});var v=U(e);r=H(v,"P",{class:!0});var m=U(r);n=ye(m,t[3]),m.forEach(M),v.forEach(M),i=Ae(b),a=H(b,"DIV",{class:!0});var D=U(a);o=H(D,"BUTTON",{class:!0});var S=U(o);s=ye(S,"Back"),S.forEach(M),l=Ae(D),g.l(D),D.forEach(M),this.h()},h(){B(r,"class","font-mono text-xs whitespace-pre-wrap"),B(e,"class","p-4 overflow-y-auto"),B(o,"class","btn btn-sm btn btn-info"),B(a,"class","w-full p-2 h-12 flex justify-between")},m(b,v){ue(b,e,v),k(e,r),k(r,n),ue(b,i,v),ue(b,a,v),k(a,o),k(o,s),k(a,l),g.m(a,null),h||(c=De(o,"click",function(){Ma(t[0])&&t[0].apply(this,arguments)}),h=!0)},p(b,[v]){t=b,v&8&&zt(n,t[3]),p===(p=f(t))&&g?g.p(t,v):(g.d(1),g=p(t),g&&(g.c(),g.m(a,null)))},i:Oe,o:Oe,d(b){b&&M(e),b&&M(i),b&&M(a),g.d(),h=!1,c()}}}function G7(t,e,r){let n;je(t,vg,s=>r(3,n=s));let{togglePreview:i=()=>{}}=e,{isGenerating:a=!1}=e,{handleGeneratePrompt:o=()=>{}}=e;return t.$$set=s=>{"togglePreview"in s&&r(0,i=s.togglePreview),"isGenerating"in s&&r(1,a=s.isGenerating),"handleGeneratePrompt"in s&&r(2,o=s.handleGeneratePrompt)},[i,a,o,n]}class K7 extends Ze{constructor(e){super(),Je(this,e,G7,$7,Qe,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}const wc="preferredModel";function Y7(){const t=Yt(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[wc]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[wc]=a,r(a))},get:()=>St(t),delete:()=>{i&&(delete localStorage[wc],r(""))}}}const Hc=Y7();function Z7(t){let e,r,n;return{c(){e=W("div"),r=W("p"),n=we("Set Open AI Key in settings for GPT generation."),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=U(e);r=H(a,"P",{class:!0});var o=U(r);n=ye(o,"Set Open AI Key in settings for GPT generation."),o.forEach(M),a.forEach(M),this.h()},h(){B(r,"class","text-center"),B(e,"class","w-full p-2 flex justify-center")},m(i,a){ue(i,e,a),k(e,r),k(r,n)},p:Oe,i:Oe,o:Oe,d(i){i&&M(e)}}}function J7(t){let e,r,n,i;const a=[X7,Q7],o=[];function s(l,h){return l[1]?0:1}return e=s(t),r=o[e]=a[e](t),{c(){r.c(),n=yt()},l(l){r.l(l),n=yt()},m(l,h){o[e].m(l,h),ue(l,n,h),i=!0},p(l,h){let c=e;e=s(l),e===c?o[e].p(l,h):(Gt(),de(o[c],1,1,()=>{o[c]=null}),Kt(),r=o[e],r?r.p(l,h):(r=o[e]=a[e](l),r.c()),oe(r,1),r.m(n.parentNode,n))},i(l){i||(oe(r),i=!0)},o(l){de(r),i=!1},d(l){o[e].d(l),l&&M(n)}}}function Q7(t){let e,r;return e=new z7({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},p(n,i){const a={};i&1&&(a.isGenerating=n[0]),e.$set(a)},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function X7(t){let e,r;return e=new K7({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},p(n,i){const a={};i&1&&(a.isGenerating=n[0]),e.$set(a)},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function e4(t){let e,r,n,i;const a=[J7,Z7],o=[];function s(l,h){return l[2]?0:1}return r=s(t),n=o[r]=a[r](t),{c(){e=W("div"),n.c(),this.h()},l(l){e=H(l,"DIV",{class:!0});var h=U(e);n.l(h),h.forEach(M),this.h()},h(){B(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(l,h){ue(l,e,h),o[r].m(e,null),i=!0},p(l,[h]){n.p(l,h)},i(l){i||(oe(n),i=!0)},o(l){de(n),i=!1},d(l){l&&M(e),o[r].d()}}}function t4(t,e,r){let n,i,a,o,s,l;je(t,vg,D=>r(7,i=D)),je(t,Ye,D=>r(8,a=D)),je(t,Qr,D=>r(9,o=D)),je(t,Hc,D=>r(5,s=D)),je(t,Vn,D=>r(10,l=D));const h=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001"];let c=!1,f=l,p=!1;function g(D,S){const y=Bu(D),A=n||"gpt-3.5-turbo";r(0,c=!0),K1(y,S,A).then(C=>{console.log(C),C.data.choices.forEach((P,O)=>{const F=$s(P.message.content);console.log(F);const x=F.reduce((z,[G,J],R)=>(z[R]=Tr(R,G,J),o[G]||Qr.update(G,null),z),{});Ye.update(Mi(x,a.promptLimit,a.weightMode)),gi.update("edit"),Li.shuffle()})}).finally(()=>{r(0,c=!1)})}function b(D,S){const y=Bu(D),A=n||"text-davinci-003";r(0,c=!0),TC(y,S,A).then(C=>{console.log(C),C.data.choices.forEach((P,O)=>{const F=$s(P.text);console.log(F);const x=F.reduce((z,[G,J],R)=>(z[R]=Tr(R,G,J),o[G]||Qr.update(G,null),z),{});Ye.update(Mi(x,a.promptLimit,a.weightMode)),gi.update("edit"),Li.shuffle()})}).finally(()=>{r(0,c=!1)})}function v(){f&&(h.includes(n)?b(f,i):g(f,i))}function m(){console.log(i),r(1,p=!p)}return t.$$.update=()=>{t.$$.dirty&32&&(n=s||null)},[c,p,f,v,m,s]}class r4 extends Ze{constructor(e){super(),Je(this,e,t4,e4,Qe,{})}}function Ip(t,e,r){const n=t.slice();return n[20]=e[r],n}function xp(t,e,r){const n=t.slice();return n[20]=e[r],n}function n4(t){return{c:Oe,l:Oe,m:Oe,p:Oe,d:Oe}}function i4(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b=t[0].length>0&&Np(t),v=t[1].length>0&&Rp(t);return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=we("Embed Cache Size: "),o=we(t[6]),s=Ee(),l=W("input"),h=Ee(),b&&b.c(),c=Ee(),v&&v.c(),f=yt(),this.h()},l(m){e=H(m,"DIV",{class:!0});var D=U(e);r=H(D,"DIV",{class:!0});var S=U(r);n=H(S,"LABEL",{class:!0});var y=U(n);i=H(y,"SPAN",{class:!0});var A=U(i);a=ye(A,"Embed Cache Size: "),o=ye(A,t[6]),A.forEach(M),y.forEach(M),s=Ae(S),l=H(S,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),S.forEach(M),D.forEach(M),h=Ae(m),b&&b.l(m),c=Ae(m),v&&v.l(m),f=yt(),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),l.value=t[6],B(l,"type","range"),B(l,"min","0"),B(l,"max",150),B(l,"step","1"),B(l,"class","range range-sm"),B(r,"class","px-10 w-full"),B(e,"class","flex justify-center")},m(m,D){ue(m,e,D),k(e,r),k(r,n),k(n,i),k(i,a),k(i,o),k(r,s),k(r,l),ue(m,h,D),b&&b.m(m,D),ue(m,c,D),v&&v.m(m,D),ue(m,f,D),p||(g=De(l,"change",t[12]),p=!0)},p(m,D){D&64&&zt(o,m[6]),D&64&&(l.value=m[6]),m[0].length>0?b?b.p(m,D):(b=Np(m),b.c(),b.m(c.parentNode,c)):b&&(b.d(1),b=null),m[1].length>0?v?v.p(m,D):(v=Rp(m),v.c(),v.m(f.parentNode,f)):v&&(v.d(1),v=null)},d(m){m&&M(e),m&&M(h),b&&b.d(m),m&&M(c),v&&v.d(m),m&&M(f),p=!1,g()}}}function Np(t){let e,r,n,i,a,o,s,l,h,c,f=[],p=new Map,g,b,v=t[0];const m=D=>D[20];for(let D=0;D<v.length;D+=1){let S=xp(t,v,D),y=m(S);p.set(y,f[D]=Lp(y,S))}return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=we("Pick a model to use for model generation"),o=Ee(),s=W("select"),l=W("option"),h=we("Pick one");for(let D=0;D<f.length;D+=1)f[D].c();this.h()},l(D){e=H(D,"DIV",{class:!0});var S=U(e);r=H(S,"DIV",{class:!0});var y=U(r);n=H(y,"LABEL",{class:!0});var A=U(n);i=H(A,"SPAN",{class:!0});var C=U(i);a=ye(C,"Pick a model to use for model generation"),C.forEach(M),A.forEach(M),o=Ae(y),s=H(y,"SELECT",{class:!0});var P=U(s);l=H(P,"OPTION",{});var O=U(l);h=ye(O,"Pick one"),O.forEach(M);for(let F=0;F<f.length;F+=1)f[F].l(P);P.forEach(M),y.forEach(M),S.forEach(M),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),l.disabled=!0,l.selected=c=t[2]===null,l.__value="Pick one",l.value=l.__value,B(s,"class","select select-bordered"),B(r,"class","form-control w-full max-w-xs mb-4"),B(e,"class","flex justify-center")},m(D,S){ue(D,e,S),k(e,r),k(r,n),k(n,i),k(i,a),k(r,o),k(r,s),k(s,l),k(l,h);for(let y=0;y<f.length;y+=1)f[y]&&f[y].m(s,null);Ii(s,t[2]),g||(b=De(s,"change",t[7]),g=!0)},p(D,S){S&5&&c!==(c=D[2]===null)&&(l.selected=c),S&5&&(v=D[0],f=jn(f,S,m,1,D,v,p,s,Qn,Lp,null,xp)),S&5&&Ii(s,D[2])},d(D){D&&M(e);for(let S=0;S<f.length;S+=1)f[S].d();g=!1,b()}}}function Lp(t,e){let r,n=e[20]+"",i,a,o;return{key:t,first:null,c(){r=W("option"),i=we(n),this.h()},l(s){r=H(s,"OPTION",{});var l=U(r);i=ye(l,n),l.forEach(M),this.h()},h(){r.__value=a=e[20],r.value=r.__value,r.selected=o=e[2]===e[20],this.first=r},m(s,l){ue(s,r,l),k(r,i)},p(s,l){e=s,l&1&&n!==(n=e[20]+"")&&zt(i,n),l&1&&a!==(a=e[20])&&(r.__value=a,r.value=r.__value),l&5&&o!==(o=e[2]===e[20])&&(r.selected=o)},d(s){s&&M(r)}}}function Rp(t){let e,r,n,i,a,o,s,l,h,c,f=[],p=new Map,g,b,v=t[1];const m=D=>D[20];for(let D=0;D<v.length;D+=1){let S=Ip(t,v,D),y=m(S);p.set(y,f[D]=Up(y,S))}return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=we("Pick a model to use for prompt embedding"),o=Ee(),s=W("select"),l=W("option"),h=we("Pick one");for(let D=0;D<f.length;D+=1)f[D].c();this.h()},l(D){e=H(D,"DIV",{class:!0});var S=U(e);r=H(S,"DIV",{class:!0});var y=U(r);n=H(y,"LABEL",{class:!0});var A=U(n);i=H(A,"SPAN",{class:!0});var C=U(i);a=ye(C,"Pick a model to use for prompt embedding"),C.forEach(M),A.forEach(M),o=Ae(y),s=H(y,"SELECT",{class:!0});var P=U(s);l=H(P,"OPTION",{});var O=U(l);h=ye(O,"Pick one"),O.forEach(M);for(let F=0;F<f.length;F+=1)f[F].l(P);P.forEach(M),y.forEach(M),S.forEach(M),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),l.disabled=!0,l.selected=c=t[3]===null,l.__value="Pick one",l.value=l.__value,B(s,"class","select select-bordered"),B(r,"class","form-control w-full max-w-xs mb-4"),B(e,"class","flex justify-center")},m(D,S){ue(D,e,S),k(e,r),k(r,n),k(n,i),k(i,a),k(r,o),k(r,s),k(s,l),k(l,h);for(let y=0;y<f.length;y+=1)f[y]&&f[y].m(s,null);Ii(s,t[3]),g||(b=De(s,"change",t[8]),g=!0)},p(D,S){S&10&&c!==(c=D[3]===null)&&(l.selected=c),S&10&&(v=D[1],f=jn(f,S,m,1,D,v,p,s,Qn,Up,null,Ip)),S&10&&Ii(s,D[3])},d(D){D&&M(e);for(let S=0;S<f.length;S+=1)f[S].d();g=!1,b()}}}function Up(t,e){let r,n=e[20]+"",i,a,o;return{key:t,first:null,c(){r=W("option"),i=we(n),this.h()},l(s){r=H(s,"OPTION",{});var l=U(r);i=ye(l,n),l.forEach(M),this.h()},h(){r.__value=a=e[20],r.value=r.__value,r.selected=o=e[3]===e[20],this.first=r},m(s,l){ue(s,r,l),k(r,i)},p(s,l){e=s,l&2&&n!==(n=e[20]+"")&&zt(i,n),l&2&&a!==(a=e[20])&&(r.__value=a,r.value=r.__value),l&10&&o!==(o=e[3]===e[20])&&(r.selected=o)},d(s){s&&M(r)}}}function a4(t){let e,r,n;return{c(){e=W("div"),r=W("div"),n=W("progress"),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=U(e);r=H(a,"DIV",{class:!0});var o=U(r);n=H(o,"PROGRESS",{class:!0}),U(n).forEach(M),o.forEach(M),a.forEach(M),this.h()},h(){B(n,"class","progress progress-primary w-56"),B(r,"class","form-control w-full flex flex-col max-w-xs"),B(e,"class","py-10 flex justify-center")},m(i,a){ue(i,e,a),k(e,r),k(r,n)},p:Oe,d(i){i&&M(e)}}}function u4(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b,v,m,D={ctx:t,current:null,token:null,hasCatch:!1,pending:a4,then:i4,catch:n4,value:19};return Oa(b=t[4],D),{c(){e=W("div"),r=W("div"),n=W("div"),i=W("label"),a=W("span"),o=we("Open AI Key"),s=Ee(),l=W("input"),h=Ee(),c=W("label"),f=W("button"),p=we("Clear"),g=Ee(),D.block.c(),this.h()},l(S){e=H(S,"DIV",{class:!0});var y=U(e);r=H(y,"DIV",{class:!0});var A=U(r);n=H(A,"DIV",{class:!0});var C=U(n);i=H(C,"LABEL",{class:!0});var P=U(i);a=H(P,"SPAN",{class:!0});var O=U(a);o=ye(O,"Open AI Key"),O.forEach(M),P.forEach(M),s=Ae(C),l=H(C,"INPUT",{type:!0,placeholder:!0,class:!0}),h=Ae(C),c=H(C,"LABEL",{class:!0});var F=U(c);f=H(F,"BUTTON",{class:!0});var x=U(f);p=ye(x,"Clear"),x.forEach(M),F.forEach(M),C.forEach(M),A.forEach(M),g=Ae(y),D.block.l(y),y.forEach(M),this.h()},h(){B(a,"class","label-text-alt"),B(i,"class","label"),l.value=t[5],B(l,"type","password"),B(l,"placeholder","Open AI Key"),B(l,"class","input input-bordered w-full max-w-xs"),B(f,"class","btn btn-xs btn-error"),B(c,"class","label"),B(n,"class","form-control w-full max-w-xs"),B(r,"class","flex justify-center"),B(e,"class","h-full p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(S,y){ue(S,e,y),k(e,r),k(r,n),k(n,i),k(i,a),k(a,o),k(n,s),k(n,l),k(n,h),k(n,c),k(c,f),k(f,p),k(e,g),D.block.m(e,D.anchor=null),D.mount=()=>e,D.anchor=null,v||(m=[De(l,"input",t[9]),De(f,"click",t[10])],v=!0)},p(S,[y]){t=S,y&32&&l.value!==t[5]&&(l.value=t[5]),D.ctx=t,y&16&&b!==(b=t[4])&&Oa(b,D)||Gc(D,t,y)},i:Oe,o:Oe,d(S){S&&M(e),D.block.d(),D.token=null,D=null,v=!1,Rt(m)}}}function s4(t,e,r){let n,i,a,o,s;je(t,Ye,P=>r(13,n=P)),je(t,zc,P=>r(14,i=P)),je(t,Hc,P=>r(15,a=P)),je(t,Vn,P=>r(5,o=P)),je(t,qc,P=>r(6,s=P));const l=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001","gpt-3.5-turbo","gpt-3.5-turbo-0301","gpt-4"],h=["text-embedding-ada-002"];let c=o,f=[],p=[],g=a,b=i,v=null;async function m(P){if(!P||f.length&&p.length)return;const O=Bu(P);r(4,v=xC(O));const F=await v;F.data&&r(0,f=F.data.data.map(({id:x})=>x).filter(x=>l.includes(x))),r(1,p=F.data.data.map(({id:x})=>x).filter(x=>h.includes(x)))}function D(P){r(2,g=P.target.value),Hc.update(g)}function S(P){r(3,b=P.target.value),zc.update(b)}function y(P){const O=P.target.value;Vn.update(O),O.length===51&&m(O),O.length===0&&A()}function A(){Vn.delete(),r(11,c=""),r(0,f=[]),r(1,p=[]),n.weightMode===$e.Embed&&Ye.update({...n,weightMode:$e.Circle})}const C=P=>{qc.update(parseInt(P.target.value)),Qr.cache(s)};return t.$$.update=()=>{t.$$.dirty&2048&&m(c)},[f,p,g,b,v,o,s,D,S,y,A,c,C]}class o4 extends Ze{constructor(e){super(),Je(this,e,s4,u4,Qe,{})}}function l4(t){let e,r;return{c(){e=pt("svg"),r=pt("path"),this.h()},l(n){e=gt(n,"svg",{xmlns:!0,class:!0,viewBox:!0});var i=U(e);r=gt(i,"path",{fill:!0,d:!0}),U(r).forEach(M),i.forEach(M),this.h()},h(){B(r,"fill","rgba(255,255,255, 0.7)"),B(r,"d","M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"class","h-4 w-4"),B(e,"viewBox","0 0 24 24")},m(n,i){ue(n,e,i),k(e,r)},p:Oe,i:Oe,o:Oe,d(n){n&&M(e)}}}class c4 extends Ze{constructor(e){super(),Je(this,e,null,l4,Qe,{})}}function Vp(t,e,r){const n=t.slice();return n[17]=e[r],n[19]=r,n}function jp(t,e,r){const n=t.slice();return n[20]=e[r][0],n[21]=e[r][1],n}function zp(t,e){let r,n=e[21].name+"",i,a,o;return{key:t,first:null,c(){r=W("option"),i=we(n),this.h()},l(s){r=H(s,"OPTION",{});var l=U(r);i=ye(l,n),l.forEach(M),this.h()},h(){r.__value=a=e[20],r.value=r.__value,r.selected=o=e[0]===e[20],this.first=r},m(s,l){ue(s,r,l),k(r,i)},p(s,l){e=s,l&16&&n!==(n=e[21].name+"")&&zt(i,n),l&16&&a!==(a=e[20])&&(r.__value=a,r.value=r.__value),l&17&&o!==(o=e[0]===e[20])&&(r.selected=o)},d(s){s&&M(r)}}}function qp(t){let e,r,n,i,a,o,s,l,h,c=Hs(t[1])+"",f,p,g=(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1]),b,v,m,D,S,y,A,C,P,O,F,x,z,G,J=g&&Wp(),R=t[3]&&Hp(t);return{c(){e=W("div"),r=W("div"),n=W("input"),i=Ee(),a=W("div"),o=W("label"),s=W("span"),l=we("Alias: "),h=W("b"),f=we(c),p=Ee(),J&&J.c(),b=Ee(),v=W("button"),m=we("Save"),D=Ee(),S=W("ul"),R&&R.c(),y=Ee(),A=W("li"),C=W("input"),P=Ee(),O=W("div"),F=W("button"),x=we("Delete"),this.h()},l(N){e=H(N,"DIV",{class:!0});var j=U(e);r=H(j,"DIV",{class:!0});var q=U(r);n=H(q,"INPUT",{type:!0,placeholder:!0,class:!0}),i=Ae(q),a=H(q,"DIV",{class:!0,"data-tip":!0});var Z=U(a);o=H(Z,"LABEL",{class:!0});var X=U(o);s=H(X,"SPAN",{class:!0});var te=U(s);l=ye(te,"Alias: "),h=H(te,"B",{class:!0});var fe=U(h);f=ye(fe,c),fe.forEach(M),te.forEach(M),X.forEach(M),Z.forEach(M),p=Ae(q),J&&J.l(q),q.forEach(M),b=Ae(j),v=H(j,"BUTTON",{class:!0});var he=U(v);m=ye(he,"Save"),he.forEach(M),j.forEach(M),D=Ae(N),S=H(N,"UL",{class:!0});var ge=U(S);R&&R.l(ge),y=Ae(ge),A=H(ge,"LI",{class:!0});var _e=U(A);C=H(_e,"INPUT",{type:!0,placeholder:!0,class:!0}),_e.forEach(M),ge.forEach(M),P=Ae(N),O=H(N,"DIV",{class:!0});var Be=U(O);F=H(Be,"BUTTON",{class:!0});var ke=U(F);x=ye(ke,"Delete"),ke.forEach(M),Be.forEach(M),this.h()},h(){B(n,"type","text"),B(n,"placeholder","Name"),B(n,"class","input input-bordered input-sm w-full max-w-xs"),B(h,"class","text-white cursor-copy"),B(s,"class","label-text"),B(o,"class","label"),B(a,"class","tooltip tooltip-primary tooltip-bottom"),B(a,"data-tip","Use in prompts or directives to get random slot."),B(r,"class","flex flex-col w-full pr-2 "),B(v,"class","btn btn-sm btn-primary"),Ge(v,"btn-disabled",!od(t[1])||(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1])),B(e,"class","w-full p-2 flex justify-between"),B(C,"type","text"),B(C,"placeholder","Add slot"),B(C,"class","input input-bordered input-sm w-full italic"),B(A,"class","p-1"),B(S,"class","px-4 py-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block"),B(F,"class","btn btn-sm btn-error ml-4"),B(O,"class","w-full p-2 h-12 flex justify-between")},m(N,j){ue(N,e,j),k(e,r),k(r,n),an(n,t[1]),k(r,i),k(r,a),k(a,o),k(o,s),k(s,l),k(s,h),k(h,f),k(r,p),J&&J.m(r,null),k(e,b),k(e,v),k(v,m),ue(N,D,j),ue(N,S,j),R&&R.m(S,null),k(S,y),k(S,A),k(A,C),an(C,t[2]),ue(N,P,j),ue(N,O,j),k(O,F),k(F,x),z||(G=[De(n,"input",t[11]),De(h,"click",t[12]),De(v,"click",t[6]),De(C,"input",t[14]),De(C,"input",t[15]),De(F,"click",t[7])],z=!0)},p(N,j){j&2&&n.value!==N[1]&&an(n,N[1]),j&2&&c!==(c=Hs(N[1])+"")&&zt(f,c),j&11&&(g=(N[0]==="new"||N[3]&&N[3].name!==N[1])&&!N[5](N[1])),g?J||(J=Wp(),J.c(),J.m(r,null)):J&&(J.d(1),J=null),j&43&&Ge(v,"btn-disabled",!od(N[1])||(N[0]==="new"||N[3]&&N[3].name!==N[1])&&!N[5](N[1])),N[3]?R?R.p(N,j):(R=Hp(N),R.c(),R.m(S,y)):R&&(R.d(1),R=null),j&4&&C.value!==N[2]&&an(C,N[2])},d(N){N&&M(e),J&&J.d(),N&&M(D),N&&M(S),R&&R.d(),N&&M(P),N&&M(O),z=!1,Rt(G)}}}function Wp(t){let e,r,n;return{c(){e=W("label"),r=W("span"),n=we("Name In Use"),this.h()},l(i){e=H(i,"LABEL",{class:!0});var a=U(e);r=H(a,"SPAN",{class:!0});var o=U(r);n=ye(o,"Name In Use"),o.forEach(M),a.forEach(M),this.h()},h(){B(r,"class","label-text text-orange-300"),B(e,"class","label")},m(i,a){ue(i,e,a),k(e,r),k(r,n)},d(i){i&&M(e)}}}function Hp(t){let e=[],r=new Map,n,i=t[3].values;const a=o=>o[19];for(let o=0;o<i.length;o+=1){let s=Vp(t,i,o),l=a(s);r.set(l,e[o]=$p(l,s))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();n=yt()},l(o){for(let s=0;s<e.length;s+=1)e[s].l(o);n=yt()},m(o,s){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(o,s);ue(o,n,s)},p(o,s){s&264&&(i=o[3].values,e=jn(e,s,a,1,o,i,r,n.parentNode,Qn,$p,n,Vp))},d(o){for(let s=0;s<e.length;s+=1)e[s].d(o);o&&M(n)}}}function $p(t,e){let r,n,i,a,o,s;function l(...h){return e[13](e[19],...h)}return{key:t,first:null,c(){r=W("li"),n=W("input"),a=Ee(),this.h()},l(h){r=H(h,"LI",{class:!0});var c=U(r);n=H(c,"INPUT",{type:!0,placeholder:!0,class:!0}),a=Ae(c),c.forEach(M),this.h()},h(){n.value=i=e[17],B(n,"type","text"),B(n,"placeholder",""),B(n,"class","input input-bordered input-sm w-full"),B(r,"class","p-1"),this.first=r},m(h,c){ue(h,r,c),k(r,n),k(r,a),o||(s=De(n,"input",l),o=!0)},p(h,c){e=h,c&8&&i!==(i=e[17])&&n.value!==i&&(n.value=i)},d(h){h&&M(r),o=!1,s()}}}function f4(t){let e,r,n,i,a,o,s,l,h,c,f,p=[],g=new Map,b,v,m,D,S,y,A=Object.entries(t[4]);const C=O=>O[20];for(let O=0;O<A.length;O+=1){let F=jp(t,A,O),x=C(F);g.set(x,p[O]=zp(x,F))}let P=t[0]&&qp(t);return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("label"),a=W("span"),o=we("Edit Slots"),s=Ee(),l=W("select"),h=W("option"),c=we("Pick one");for(let O=0;O<p.length;O+=1)p[O].c();b=W("option"),v=we("New"),D=Ee(),P&&P.c(),this.h()},l(O){e=H(O,"DIV",{class:!0});var F=U(e);r=H(F,"DIV",{class:!0});var x=U(r);n=H(x,"DIV",{class:!0});var z=U(n);i=H(z,"LABEL",{class:!0});var G=U(i);a=H(G,"SPAN",{class:!0});var J=U(a);o=ye(J,"Edit Slots"),J.forEach(M),G.forEach(M),s=Ae(z),l=H(z,"SELECT",{class:!0});var R=U(l);h=H(R,"OPTION",{});var N=U(h);c=ye(N,"Pick one"),N.forEach(M);for(let q=0;q<p.length;q+=1)p[q].l(R);b=H(R,"OPTION",{});var j=U(b);v=ye(j,"New"),j.forEach(M),R.forEach(M),z.forEach(M),x.forEach(M),D=Ae(F),P&&P.l(F),F.forEach(M),this.h()},h(){B(a,"class","label-text"),B(i,"class","label"),h.disabled=!0,h.selected=f=t[0]===null,h.__value="Pick one",h.value=h.__value,b.__value="new",b.value=b.__value,b.selected=m=t[0]==="new",B(l,"class","select select-bordered"),t[0]===void 0&&vi(()=>t[10].call(l)),B(n,"class","form-control w-full max-w-xs mb-4"),B(r,"class","flex justify-center"),B(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(O,F){ue(O,e,F),k(e,r),k(r,n),k(n,i),k(i,a),k(a,o),k(n,s),k(n,l),k(l,h),k(h,c);for(let x=0;x<p.length;x+=1)p[x]&&p[x].m(l,null);k(l,b),k(b,v),Ii(l,t[0],!0),k(e,D),P&&P.m(e,null),S||(y=De(l,"change",t[10]),S=!0)},p(O,[F]){F&17&&f!==(f=O[0]===null)&&(h.selected=f),F&17&&(A=Object.entries(O[4]),p=jn(p,F,C,1,O,A,g,l,Qn,zp,b,jp)),F&17&&m!==(m=O[0]==="new")&&(b.selected=m),F&17&&Ii(l,O[0]),O[0]?P?P.p(O,F):(P=qp(O),P.c(),P.m(e,null)):P&&(P.d(1),P=null)},i:Oe,o:Oe,d(O){O&&M(e);for(let F=0;F<p.length;F+=1)p[F].d();P&&P.d(),S=!1,y()}}}function h4(t,e,r){let n;je(t,Xi,A=>r(4,n=A));let i=null,a="",o="",s=null;function l(A){r(3,s=A&&A!=="new"?{...n[A]}:A==="new"?{name:"New Slot Set",values:[]}:null),r(1,a=s?s.name:"")}function h(A){return Object.values(n).every(P=>P.name!==A)}function c(){if(s)if(i&&i!=="new")Xi.update(i,{...s,name:a});else{if(!h()){alert("Name already in use");return}const C=Eo();Xi.update(C,{...s,name:a}),r(0,i=C)}}function f(){Xi.delete(i),r(1,a=""),r(2,o=""),r(0,i=null),r(3,s=null)}const p=so((A,C)=>{if(!s||!i)return;const P=[...s.values];C.length===0?P.splice(A,1):P[A]=C,r(3,s.values=P,s),i!=="new"&&Xi.update(i,s)},1e3),g=so(A=>{if(!s||!i)return;const C=[...s.values];A.length>0&&(C.push(A),r(3,s.values=C,s),r(2,o=""),i!=="new"&&Xi.update(i,s))},1e3);function b(){i=vw(this),r(0,i)}function v(){a=this.value,r(1,a)}const m=()=>navigator.clipboard.writeText(Hs(a)),D=(A,C)=>p(A,C.target.value);function S(){o=this.value,r(2,o)}const y=A=>g(A.target.value);return t.$$.update=()=>{t.$$.dirty&1&&l(i)},[i,a,o,s,n,h,c,f,p,g,b,v,m,D,S,y]}class d4 extends Ze{constructor(e){super(),Je(this,e,h4,f4,Qe,{})}}function p4(t){let e,r;return e=new o4({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function g4(t){let e,r;return e=new d4({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function v4(t){let e,r;return e=new r4({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function m4(t){let e,r;return e=new B7({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function _4(t){let e,r;return e=new C7({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){de(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function b4(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b,v,m,D,S,y,A,C,P,O,F,x,z,G,J;C=new c4({});const R=[_4,m4,v4,g4,p4],N=[];function j(q,Z){return q[0]==="select"?0:q[0]==="edit"?1:q[0]==="generate"?2:q[0]==="slots"?3:q[0]==="settings"?4:-1}return~(F=j(t))&&(x=N[F]=R[F](t)),{c(){e=W("div"),r=W("div"),n=W("div"),i=W("button"),a=we("Select"),s=Ee(),l=W("button"),h=we("Edit"),f=Ee(),p=W("button"),g=we("Generate"),v=Ee(),m=W("button"),D=we("Slots"),y=Ee(),A=W("button"),Le(C.$$.fragment),O=Ee(),x&&x.c(),this.h()},l(q){e=H(q,"DIV",{class:!0});var Z=U(e);r=H(Z,"DIV",{class:!0});var X=U(r);n=H(X,"DIV",{class:!0});var te=U(n);i=H(te,"BUTTON",{class:!0});var fe=U(i);a=ye(fe,"Select"),fe.forEach(M),s=Ae(te),l=H(te,"BUTTON",{class:!0});var he=U(l);h=ye(he,"Edit"),he.forEach(M),f=Ae(te),p=H(te,"BUTTON",{class:!0});var ge=U(p);g=ye(ge,"Generate"),ge.forEach(M),v=Ae(te),m=H(te,"BUTTON",{class:!0});var _e=U(m);D=ye(_e,"Slots"),_e.forEach(M),y=Ae(te),A=H(te,"BUTTON",{class:!0});var Be=U(A);Re(C.$$.fragment,Be),Be.forEach(M),te.forEach(M),O=Ae(X),x&&x.l(X),X.forEach(M),Z.forEach(M),this.h()},h(){B(i,"class",o=t[0]==="select"?"btn btn-active":"btn"),B(l,"class",c=t[0]==="edit"?"btn btn-active":"btn"),B(p,"class",b=t[0]==="generate"?"btn btn-active":"btn"),B(m,"class",S=t[0]==="slots"?"btn btn-active":"btn"),B(A,"class",P=t[0]==="settings"?"btn btn-active":"btn"),B(n,"class","btn-group btn-group-vertical sm:btn-group-horizontal bg-base-100 w-full flex justify-center p-2"),B(r,"class","h-screen overflow-y-auto flex flex-col"),B(e,"class","max-w-md w-1/2 h-screen")},m(q,Z){ue(q,e,Z),k(e,r),k(r,n),k(n,i),k(i,a),k(n,s),k(n,l),k(l,h),k(n,f),k(n,p),k(p,g),k(n,v),k(n,m),k(m,D),k(n,y),k(n,A),Ue(C,A,null),k(r,O),~F&&N[F].m(r,null),z=!0,G||(J=[De(i,"click",t[2]),De(l,"click",t[3]),De(p,"click",t[4]),De(m,"click",t[5]),De(A,"click",t[6])],G=!0)},p(q,[Z]){(!z||Z&1&&o!==(o=q[0]==="select"?"btn btn-active":"btn"))&&B(i,"class",o),(!z||Z&1&&c!==(c=q[0]==="edit"?"btn btn-active":"btn"))&&B(l,"class",c),(!z||Z&1&&b!==(b=q[0]==="generate"?"btn btn-active":"btn"))&&B(p,"class",b),(!z||Z&1&&S!==(S=q[0]==="slots"?"btn btn-active":"btn"))&&B(m,"class",S),(!z||Z&1&&P!==(P=q[0]==="settings"?"btn btn-active":"btn"))&&B(A,"class",P);let X=F;F=j(q),F!==X&&(x&&(Gt(),de(N[X],1,1,()=>{N[X]=null}),Kt()),~F?(x=N[F],x||(x=N[F]=R[F](q),x.c()),oe(x,1),x.m(r,null)):x=null)},i(q){z||(oe(C.$$.fragment,q),oe(x),z=!0)},o(q){de(C.$$.fragment,q),de(x),z=!1},d(q){q&&M(e),Ve(C),~F&&N[F].d(),G=!1,Rt(J)}}}function D4(t,e,r){let n;je(t,gi,c=>r(0,n=c));function i(c){gi.update(c)}const a=()=>i("select"),o=()=>i("edit"),s=()=>i("generate"),l=()=>i("slots"),h=()=>i("settings");return t.$$.update=()=>{t.$$.dirty&1&&(n||gi.update("select"))},[n,i,a,o,s,l,h]}class w4 extends Ze{constructor(e){super(),Je(this,e,D4,b4,Qe,{})}}function y4(t){let e,r;return{c(){e=W("p"),r=we("Loading..."),this.h()},l(n){e=H(n,"P",{class:!0});var i=U(e);r=ye(i,"Loading..."),i.forEach(M),this.h()},h(){B(e,"class","text-lg")},m(n,i){ue(n,e,i),k(e,r)},i:Oe,o:Oe,d(n){n&&M(e)}}}function E4(t){let e,r;return{c(){e=W("p"),r=we("This tool is not optimized for small screens or mobile devices."),this.h()},l(n){e=H(n,"P",{class:!0});var i=U(e);r=ye(i,"This tool is not optimized for small screens or mobile devices."),i.forEach(M),this.h()},h(){B(e,"class","text-lg")},m(n,i){ue(n,e,i),k(e,r)},i:Oe,o:Oe,d(n){n&&M(e)}}}function A4(t){let e,r,n,i;return e=new w4({}),n=new w7({}),{c(){Le(e.$$.fragment),r=Ee(),Le(n.$$.fragment)},l(a){Re(e.$$.fragment,a),r=Ae(a),Re(n.$$.fragment,a)},m(a,o){Ue(e,a,o),ue(a,r,o),Ue(n,a,o),i=!0},i(a){i||(oe(e.$$.fragment,a),oe(n.$$.fragment,a),i=!0)},o(a){de(e.$$.fragment,a),de(n.$$.fragment,a),i=!1},d(a){Ve(e,a),a&&M(r),Ve(n,a)}}}function C4(t){let e,r,n,i,a,o;vi(t[2]);const s=[A4,E4,y4],l=[];function h(c,f){return c[0]&&c[1]&&c[0]>1024&&c[1]>800?0:c[0]&&c[1]?1:2}return e=h(t),r=l[e]=s[e](t),{c(){r.c(),n=yt()},l(c){r.l(c),n=yt()},m(c,f){l[e].m(c,f),ue(c,n,f),i=!0,a||(o=De(window,"resize",t[2]),a=!0)},p(c,[f]){let p=e;e=h(c),e!==p&&(Gt(),de(l[p],1,1,()=>{l[p]=null}),Kt(),r=l[e],r||(r=l[e]=s[e](c),r.c()),oe(r,1),r.m(n.parentNode,n))},i(c){i||(oe(r),i=!0)},o(c){de(r),i=!1},d(c){l[e].d(c),c&&M(n),a=!1,o()}}}function F4(t,e,r){let n=null,i=null;function a(){r(0,n=window.innerWidth),r(1,i=window.innerHeight)}return[n,i,a]}class O4 extends Ze{constructor(e){super(),Je(this,e,F4,C4,Qe,{})}}export{O4 as default};
