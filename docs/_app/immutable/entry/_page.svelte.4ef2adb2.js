import{J as At,S as Je,i as Qe,s as Xe,k as W,q as Fe,a as we,l as H,m as U,r as Se,h as M,c as ye,n as B,K as Ye,b as ue,G as T,L as _e,H as Pe,M as Rt,I as qe,N as dt,O as pt,y as Le,z as Re,A as Ue,g as oe,d as he,B as Ve,p as Ot,u as zt,P as F0,C as ka,v as Gt,f as Kt,D as Ta,E as Ia,F as xa,e as Ct,Q as Au,R as Un,T as Jn,U as gi,V as ea,W as nn,X as zp,Y as fw,Z as hw,_ as Ba,$ as Bs,a0 as qp,a1 as Wp,o as Hp,a2 as Ti,a3 as dw}from"../chunks/index.f38d4254.js";import{w as rr,d as Cu}from"../chunks/index.4c6e4564.js";var $e=(t=>(t.Circle="circle",t.Ring="ring",t.Bars="bars",t.Embed="embed",t.EmbedGrid="embedGrid",t.EmbedRandom="embedRandom",t.Pie="pie",t.Random="random",t))($e||{}),br=(t=>(t.Build="build",t.Concept="concept",t.History="history",t))(br||{}),Os=(t=>(t.List="list",t.Map="map",t))(Os||{});const xl="appStage";function pw(){const t=rr(br.Build),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[xl]||br.Build),{subscribe:e,update:a=>{!a||!i||(localStorage[xl]=a,r(a))},get:()=>At(t),delete:()=>{i&&(delete localStorage[xl],r(br.Build))}}}const mc=pw();function gw(t){let e,r,n,i,a,o,s,l,h,c,f;return{c(){e=W("div"),r=W("button"),n=Fe("Build"),i=we(),a=W("button"),o=Fe("Concept"),s=we(),l=W("button"),h=Fe("History"),this.h()},l(p){e=H(p,"DIV",{class:!0});var g=U(e);r=H(g,"BUTTON",{class:!0});var b=U(r);n=Se(b,"Build"),b.forEach(M),i=ye(g),a=H(g,"BUTTON",{class:!0});var v=U(a);o=Se(v,"Concept"),v.forEach(M),s=ye(g),l=H(g,"BUTTON",{class:!0});var m=U(l);h=Se(m,"History"),m.forEach(M),g.forEach(M),this.h()},h(){B(r,"class","btn btn-sm"),Ye(r,"btn-active",t[0]===br.Build),B(a,"class","btn btn-sm"),Ye(a,"btn-active",t[0]===br.Concept),B(l,"class","btn btn-sm"),Ye(l,"btn-active",t[0]===br.History),B(e,"class","btn-group btn-group-horizontal p-2")},m(p,g){ue(p,e,g),T(e,r),T(r,n),T(e,i),T(e,a),T(a,o),T(e,s),T(e,l),T(l,h),c||(f=[_e(r,"click",t[2]),_e(a,"click",t[3]),_e(l,"click",t[4])],c=!0)},p(p,[g]){g&1&&Ye(r,"btn-active",p[0]===br.Build),g&1&&Ye(a,"btn-active",p[0]===br.Concept),g&1&&Ye(l,"btn-active",p[0]===br.History)},i:Pe,o:Pe,d(p){p&&M(e),c=!1,Rt(f)}}}function vw(t,e,r){let n;qe(t,mc,l=>r(0,n=l));function i(l){mc.update(l)}return[n,i,()=>i(br.Build),()=>i(br.Concept),()=>i(br.History)]}class mw extends Je{constructor(e){super(),Qe(this,e,vw,gw,Xe,{})}}function _w(t){let e,r;return{c(){e=dt("svg"),r=dt("circle"),this.h()},l(n){e=pt(n,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var i=U(e);r=pt(i,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),U(r).forEach(M),i.forEach(M),this.h()},h(){B(r,"cx","25"),B(r,"cy","25"),B(r,"r","20"),B(r,"fill","rgba(255,255,255, 0.7)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-6 w-6"),B(e,"viewBox","0 0 50 50")},m(n,i){ue(n,e,i),T(e,r)},p:Pe,i:Pe,o:Pe,d(n){n&&M(e)}}}class bw extends Je{constructor(e){super(),Qe(this,e,null,_w,Xe,{})}}function Dw(t){let e,r,n,i,a,o;return{c(){e=dt("svg"),r=dt("circle"),n=dt("circle"),i=dt("circle"),a=dt("circle"),o=dt("circle"),this.h()},l(s){e=pt(s,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var l=U(e);r=pt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),U(r).forEach(M),n=pt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),U(n).forEach(M),i=pt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),U(i).forEach(M),a=pt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),U(a).forEach(M),o=pt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),U(o).forEach(M),l.forEach(M),this.h()},h(){B(r,"cx","20"),B(r,"cy","80"),B(r,"r","5"),B(r,"fill","rgba(255,255,255, 0.7)"),B(n,"cx","40"),B(n,"cy","40"),B(n,"r","5"),B(n,"fill","rgba(255,255,255, 0.7)"),B(i,"cx","70"),B(i,"cy","20"),B(i,"r","5"),B(i,"fill","rgba(255,255,255, 0.7)"),B(a,"cx","80"),B(a,"cy","60"),B(a,"r","5"),B(a,"fill","rgba(255,255,255, 0.7)"),B(o,"cx","60"),B(o,"cy","75"),B(o,"r","5"),B(o,"fill","rgba(255,255,255, 0.7)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-6 w-6"),B(e,"viewBox","0 0 100 100")},m(s,l){ue(s,e,l),T(e,r),T(e,n),T(e,i),T(e,a),T(e,o)},p:Pe,i:Pe,o:Pe,d(s){s&&M(e)}}}class ww extends Je{constructor(e){super(),Qe(this,e,null,Dw,Xe,{})}}const Nl="selectedPrompt";function yw(){const t=rr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Nl]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[Nl]=a,r(a))},get:()=>At(t),delete:()=>{i&&(delete localStorage[Nl],r(""))}}}const Xi=yw();function Ew(){const t=rr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith("prompt_")){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=At(t),h={...s[a]||{},...o};i&&(localStorage[`prompt_${a}`]=JSON.stringify(h));const c={...s,[a]:h};r(c)},get:a=>At(t)[a],delete:a=>{i&&delete localStorage[`prompt_${a}`];const o={...At(t)};delete o[a],r(o)}}}const _u=Ew(),Aw=Cu(_u,t=>Object.entries(At(_u))),ps="activePrompt";function kr(t,e,r,n=1){return{id:t,text:e,barWeight:n,parsedWeight:r,randomWeight:Math.random()}}function S0(){return{0:kr(0,"Magic potion in a mystical bottle",1),1:kr(1,"A crystalline decanter",1),2:kr(2,"An ornate tequila bottle",1),3:kr(3,"An antique sake bottle",1),4:kr(4,"A colorful perfume bottle",1),5:kr(5,"A glass vase full of vibrant flowers",1),6:kr(6,"A minimalist glass tea kettle",1),7:kr(7,"Chihuly glass art",1),8:kr(8,"A fine wine bottle",1),9:kr(9,"A gourmet vinegar bottle",1),10:kr(10,"A stunning fishbowl",1),11:kr(11,"A striking piece of tourmaline",1),12:kr(12,"A finely cut piece of sapphire",1),13:kr(13,"Iittala glass art",1)}}function Oi(t,e,r=$e.Random){return{weightedPrompts:t||{},weightMode:r,pieAngles:{},ringAngles:{},ringStartAngle:0,ringReverse:!1,ringWeightScaling:2,ringExponentialScaling:!0,circleAngles:{},circleMarker:[270,.33],circleWeightScaling:2,circleExponentialScaling:!0,embedWeightScaling:2,embedExponentialScaling:!0,embedClusters:0,promptLimit:e>Object.keys(t).length?Object.keys(t).length:e}}function Cw(){const t=rr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",a=i&&localStorage[ps]?JSON.parse(localStorage[ps]):Oi(S0(),30);return r({...Oi({},30),...a}),{subscribe:e,update:o=>{const s=Xi.get();s&&_u.update(s,o),!(!o||!i)&&(localStorage[ps]=JSON.stringify(o),r({...Oi({},30),...o}))},get:()=>At(t),delete:()=>{i&&(delete localStorage[ps],r(Oi(S0(),30)))}}}const Ke=Cw();function Fw(t){let e,r,n,i;return{c(){e=dt("svg"),r=dt("path"),n=dt("path"),i=dt("path"),this.h()},l(a){e=pt(a,"svg",{class:!0,fill:!0,viewBox:!0,version:!0,xmlns:!0});var o=U(e);r=pt(o,"path",{d:!0}),U(r).forEach(M),n=pt(o,"path",{d:!0}),U(n).forEach(M),i=pt(o,"path",{d:!0}),U(i).forEach(M),o.forEach(M),this.h()},h(){B(r,"d","M341.333333 385.706667c-11.946667 0-22.186667-4.266667-30.72-12.8-7.970133-7.970133-11.946667-17.92-11.946666-29.866667s3.976533-22.186667 11.946666-30.72c8.533333-7.953067 18.773333-11.946667 30.72-11.946667s21.896533 3.976533 29.866667 11.946667c8.533333 8.533333 12.8 18.773333 12.8 30.72s-4.266667 21.896533-12.8 29.866667c-7.970133 8.533333-17.92 12.8-29.866667 12.8z m128-213.333334c11.946667 0 21.896533 3.976533 29.866667 11.946667 8.533333 8.533333 12.8 18.773333 12.8 30.72s-4.266667 21.896533-12.8 29.866667c-7.970133 8.533333-17.92 12.8-29.866667 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.970133-11.946667-17.92-11.946666-29.866667s3.976533-22.186667 11.946666-30.72c8.533333-7.970133 18.773333-11.946667 30.72-11.946667zM243.2 500.906667c-7.970133 8.533333-17.92 12.8-29.866667 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.970133-11.946667-17.92-11.946666-29.866667s3.976533-22.186667 11.946666-30.72c8.533333-7.953067 18.773333-11.946667 30.72-11.946667s21.896533 3.976533 29.866667 11.946667c8.533333 8.533333 12.8 18.773333 12.8 30.72s-4.266667 21.896533-12.8 29.866667z"),B(n,"d","M512 954.026667c-27.0336-0.682667-50.176-10.683733-69.239467-29.730134-19.3024-19.3536-30.429867-42.666667-33.0752-69.2736L409.6 616.106667H170.666667c-27.0336-0.682667-50.176-10.683733-69.239467-29.730134-19.285333-19.319467-30.4128-42.615467-33.0752-69.256533L68.266667 169.813333c2.082133-27.562667 12.629333-50.414933 31.4368-69.239466 19.626667-19.626667 43.3664-29.917867 70.536533-30.583467h344.302933c27.016533 0.682667 50.158933 10.666667 69.239467 29.730133 19.643733 19.626667 29.934933 43.349333 30.6176 70.519467V407.893333h241.493333c27.050667 0.7168 50.176 10.7008 69.239467 29.7472 19.6096 19.626667 29.917867 43.3664 30.600533 70.519467V854.186667c-2.065067 27.5456-12.612267 50.397867-31.453866 69.256533-19.643733 19.626667-43.3664 29.917867-70.536534 30.600533H512z m-68.266667-354.986667V853.333333c1.792 17.152 9.403733 33.041067 23.176534 46.848 12.817067 12.817067 27.716267 19.268267 45.5168 19.712H853.333333c17.937067-0.443733 33.399467-7.202133 46.813867-20.599466 13.073067-13.090133 20.1216-28.279467 21.504-46.421334L921.6 508.586667c-0.443733-17.954133-7.202133-33.399467-20.599467-46.813867-12.834133-12.817067-27.733333-19.285333-45.550933-19.7632L512 442.026667c-17.937067 0.4608-33.399467 7.202133-46.830933 20.616533-13.056 13.073067-20.087467 28.245333-21.486934 46.404267L443.733333 599.04zM123.8528 124.706133c-13.073067 13.073067-20.104533 28.2624-21.504 46.421334L102.4 515.413333c1.792 17.169067 9.403733 33.058133 23.159467 46.813867 12.817067 12.834133 27.733333 19.285333 45.533866 19.729067H409.6v-74.24c2.082133-27.562667 12.629333-50.414933 31.4368-69.239467 19.643733-19.6096 43.3664-29.9008 70.519467-30.583467h68.693333V170.666667c-0.443733-17.954133-7.202133-33.399467-20.599467-46.813867-12.834133-12.8512-27.733333-19.3024-45.5168-19.746133H170.666667c-17.954133 0.443733-33.399467 7.185067-46.813867 20.599466z"),B(i,"d","M840.533333 522.24c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.9872-7.953067-11.946667-17.92-11.946667-29.866667s3.959467-22.203733 11.946667-30.737067c8.533333-7.970133 18.773333-11.963733 30.72-11.963733s21.896533 4.027733 29.866666 11.9808z m0 128c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.9872-7.953067-11.946667-17.92-11.946667-29.866667s3.959467-22.203733 11.946667-30.737067c8.533333-7.970133 18.773333-11.9296 30.72-11.9296s21.896533 3.9936 29.866666 11.946667z m-60.586666 128c8.533333-7.953067 18.773333-11.9296 30.72-11.9296s21.896533 3.976533 29.866666 11.9296c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.9872-7.953067-11.946667-17.92-11.946667-29.866667s3.959467-22.186667 11.946667-30.72zM597.333333 552.96c0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.953067-11.946667-17.92-11.946667-29.866667s3.976533-22.203733 11.946667-30.737067c8.533333-7.970133 18.773333-11.963733 30.72-11.963733s21.896533 3.9936 29.866666 11.963733c8.533333 8.5504 12.8 18.7904 12.8 30.737067z m-73.386666 225.28c8.533333-7.953067 18.773333-11.9296 30.72-11.9296s21.896533 3.976533 29.866666 11.9296c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.953067-11.946667-17.92-11.946667-29.866667s3.976533-22.186667 11.946667-30.72z m-11.946667-97.28c0-11.946667 3.976533-22.203733 11.946667-30.737067 8.533333-7.970133 18.773333-11.9296 30.72-11.9296s21.896533 3.959467 29.866666 11.9296c8.533333 8.5504 12.8 18.7904 12.8 30.737067 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.953067-11.946667-17.92-11.946667-29.866667z"),B(e,"class","h-5 w-5"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"viewBox","0 0 1024 1024"),B(e,"version","1.1"),B(e,"xmlns","http://www.w3.org/2000/svg")},m(a,o){ue(a,e,o),T(e,r),T(e,n),T(e,i)},p:Pe,i:Pe,o:Pe,d(a){a&&M(e)}}}class Sw extends Je{constructor(e){super(),Qe(this,e,null,Fw,Xe,{})}}function Bw(t){let e,r,n,i,a,o,s,l,h,c,f,p;return n=new Sw({}),o=new bw({}),h=new ww({}),{c(){e=W("div"),r=W("button"),Le(n.$$.fragment),i=we(),a=W("button"),Le(o.$$.fragment),s=we(),l=W("button"),Le(h.$$.fragment),this.h()},l(g){e=H(g,"DIV",{class:!0});var b=U(e);r=H(b,"BUTTON",{class:!0});var v=U(r);Re(n.$$.fragment,v),v.forEach(M),i=ye(b),a=H(b,"BUTTON",{class:!0});var m=U(a);Re(o.$$.fragment,m),m.forEach(M),s=ye(b),l=H(b,"BUTTON",{class:!0});var D=U(l);Re(h.$$.fragment,D),D.forEach(M),b.forEach(M),this.h()},h(){B(r,"class","btn btn-sm"),Ye(r,"btn-active",t[0].weightMode===$e.Random),B(a,"class","btn btn-sm"),Ye(a,"btn-active",t[0].weightMode===$e.Circle||t[0].weightMode===$e.Pie||t[0].weightMode===$e.Ring),B(l,"class","btn btn-sm"),Ye(l,"btn-active",t[0].weightMode===$e.Embed||t[0].weightMode===$e.EmbedGrid||t[0].weightMode===$e.EmbedRandom),B(e,"class","btn-group btn-group-horizontal w-full flex justify-end p-2")},m(g,b){ue(g,e,b),T(e,r),Ue(n,r,null),T(e,i),T(e,a),Ue(o,a,null),T(e,s),T(e,l),Ue(h,l,null),c=!0,f||(p=[_e(r,"click",t[2]),_e(a,"click",t[3]),_e(l,"click",t[4])],f=!0)},p(g,[b]){(!c||b&1)&&Ye(r,"btn-active",g[0].weightMode===$e.Random),(!c||b&1)&&Ye(a,"btn-active",g[0].weightMode===$e.Circle||g[0].weightMode===$e.Pie||g[0].weightMode===$e.Ring),(!c||b&1)&&Ye(l,"btn-active",g[0].weightMode===$e.Embed||g[0].weightMode===$e.EmbedGrid||g[0].weightMode===$e.EmbedRandom)},i(g){c||(oe(n.$$.fragment,g),oe(o.$$.fragment,g),oe(h.$$.fragment,g),c=!0)},o(g){he(n.$$.fragment,g),he(o.$$.fragment,g),he(h.$$.fragment,g),c=!1},d(g){g&&M(e),Ve(n),Ve(o),Ve(h),f=!1,Rt(p)}}}function Ow(t,e,r){let n;qe(t,Ke,l=>r(0,n=l));function i(l){const h={...n,weightMode:l};Ke.update(h)}return[n,i,()=>i($e.Random),()=>i($e.Pie),()=>i($e.EmbedGrid)]}class Mw extends Je{constructor(e){super(),Qe(this,e,Ow,Bw,Xe,{})}}function Pw(t){let e,r,n,i;return{c(){e=dt("svg"),r=dt("path"),n=dt("path"),i=dt("path"),this.h()},l(a){e=pt(a,"svg",{xmlns:!0,class:!0,viewBox:!0});var o=U(e);r=pt(o,"path",{d:!0,fill:!0}),U(r).forEach(M),n=pt(o,"path",{d:!0,fill:!0}),U(n).forEach(M),i=pt(o,"path",{d:!0,fill:!0}),U(i).forEach(M),o.forEach(M),this.h()},h(){B(r,"d","M50 50 L50 10 A40 40 0 0 1 90 50 z"),B(r,"fill","rgba(255,255,255, 0.7)"),B(n,"d","M50 50 L90 50 A40 40 0 0 1 50 90 z"),B(n,"fill","rgba(255,255,255, 0.3)"),B(i,"d","M50 50 L50 90 A40 40 0 0 1 10 50 z"),B(i,"fill","rgba(255,255,255, 0.9)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"class","h-5 w-5"),B(e,"viewBox","0 0 100 100")},m(a,o){ue(a,e,o),T(e,r),T(e,n),T(e,i)},p:Pe,i:Pe,o:Pe,d(a){a&&M(e)}}}class kw extends Je{constructor(e){super(),Qe(this,e,null,Pw,Xe,{})}}function Tw(t){let e,r,n;return{c(){e=dt("svg"),r=dt("circle"),n=dt("circle"),this.h()},l(i){e=pt(i,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var a=U(e);r=pt(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),U(r).forEach(M),n=pt(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),U(n).forEach(M),a.forEach(M),this.h()},h(){B(r,"cx","25"),B(r,"cy","25"),B(r,"r","20"),B(r,"stroke","rgba(255,255,255, 0.7)"),B(r,"stroke-width","4"),B(r,"fill","none"),B(n,"cx","25"),B(n,"cy","25"),B(n,"r","4"),B(n,"stroke","rgba(255,255,255, 0.7)"),B(n,"stroke-width","1"),B(n,"fill","rgba(255,255,255, 0.7)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-5 w-5"),B(e,"viewBox","0 0 50 50")},m(i,a){ue(i,e,a),T(e,r),T(e,n)},p:Pe,i:Pe,o:Pe,d(i){i&&M(e)}}}class Iw extends Je{constructor(e){super(),Qe(this,e,null,Tw,Xe,{})}}function xw(t){let e,r,n,i,a;return{c(){e=dt("svg"),r=dt("mask"),n=dt("circle"),i=dt("path"),a=dt("circle"),this.h()},l(o){e=pt(o,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var s=U(e);r=pt(s,"mask",{id:!0});var l=U(r);n=pt(l,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),U(n).forEach(M),i=pt(l,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),U(i).forEach(M),l.forEach(M),a=pt(s,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,mask:!0}),U(a).forEach(M),s.forEach(M),this.h()},h(){B(n,"cx","25"),B(n,"cy","25"),B(n,"r","20"),B(n,"stroke","white"),B(n,"stroke-width","6"),B(n,"fill","none"),B(i,"d","M40,22 L45,27 L50,22"),B(i,"stroke","black"),B(i,"stroke-width","4"),B(i,"fill","none"),B(r,"id","hole"),B(a,"cx","25"),B(a,"cy","25"),B(a,"r","20"),B(a,"stroke","rgba(255,255,255, 0.7)"),B(a,"stroke-width","4"),B(a,"fill","none"),B(a,"mask","url(#hole)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-5 w-5"),B(e,"viewBox","0 0 50 50")},m(o,s){ue(o,e,s),T(e,r),T(r,n),T(r,i),T(e,a)},p:Pe,i:Pe,o:Pe,d(o){o&&M(e)}}}class Nw extends Je{constructor(e){super(),Qe(this,e,null,xw,Xe,{})}}function Lw(t){let e,r,n,i,a,o,s,l,h,c,f,p;return n=new kw({}),o=new Iw({}),h=new Nw({}),{c(){e=W("div"),r=W("button"),Le(n.$$.fragment),i=we(),a=W("button"),Le(o.$$.fragment),s=we(),l=W("button"),Le(h.$$.fragment),this.h()},l(g){e=H(g,"DIV",{class:!0});var b=U(e);r=H(b,"BUTTON",{class:!0});var v=U(r);Re(n.$$.fragment,v),v.forEach(M),i=ye(b),a=H(b,"BUTTON",{class:!0});var m=U(a);Re(o.$$.fragment,m),m.forEach(M),s=ye(b),l=H(b,"BUTTON",{class:!0});var D=U(l);Re(h.$$.fragment,D),D.forEach(M),b.forEach(M),this.h()},h(){B(r,"class","btn btn-xs"),Ye(r,"btn-active",t[0].weightMode===$e.Pie),B(a,"class","btn btn-xs"),Ye(a,"btn-active",t[0].weightMode===$e.Circle),B(l,"class","btn btn-xs"),Ye(l,"btn-active",t[0].weightMode===$e.Ring),B(e,"class","btn-group btn-group-horizontal w-full flex justify-center p-1")},m(g,b){ue(g,e,b),T(e,r),Ue(n,r,null),T(e,i),T(e,a),Ue(o,a,null),T(e,s),T(e,l),Ue(h,l,null),c=!0,f||(p=[_e(r,"click",t[2]),_e(a,"click",t[3]),_e(l,"click",t[4])],f=!0)},p(g,[b]){(!c||b&1)&&Ye(r,"btn-active",g[0].weightMode===$e.Pie),(!c||b&1)&&Ye(a,"btn-active",g[0].weightMode===$e.Circle),(!c||b&1)&&Ye(l,"btn-active",g[0].weightMode===$e.Ring)},i(g){c||(oe(n.$$.fragment,g),oe(o.$$.fragment,g),oe(h.$$.fragment,g),c=!0)},o(g){he(n.$$.fragment,g),he(o.$$.fragment,g),he(h.$$.fragment,g),c=!1},d(g){g&&M(e),Ve(n),Ve(o),Ve(h),f=!1,Rt(p)}}}function Rw(t,e,r){let n;qe(t,Ke,l=>r(0,n=l));function i(l){const h={...n,weightMode:l};Ke.update(h)}return[n,i,()=>i($e.Pie),()=>i($e.Circle),()=>i($e.Ring)]}class Uw extends Je{constructor(e){super(),Qe(this,e,Rw,Lw,Xe,{})}}function Vw(t){let e,r,n,i,a,o,s,l,h,c,f;return{c(){e=W("div"),r=W("button"),n=Fe("Random"),i=we(),a=W("button"),o=Fe("Grid"),s=we(),l=W("button"),h=Fe("Embed"),this.h()},l(p){e=H(p,"DIV",{class:!0});var g=U(e);r=H(g,"BUTTON",{class:!0});var b=U(r);n=Se(b,"Random"),b.forEach(M),i=ye(g),a=H(g,"BUTTON",{class:!0});var v=U(a);o=Se(v,"Grid"),v.forEach(M),s=ye(g),l=H(g,"BUTTON",{class:!0});var m=U(l);h=Se(m,"Embed"),m.forEach(M),g.forEach(M),this.h()},h(){B(r,"class","btn btn-xs"),Ye(r,"btn-active",t[0].weightMode===$e.EmbedRandom),B(a,"class","btn btn-xs"),Ye(a,"btn-active",t[0].weightMode===$e.EmbedGrid),B(l,"class","btn btn-xs"),Ye(l,"btn-active",t[0].weightMode===$e.Embed),B(e,"class","btn-group btn-group-horizontal w-full flex justify-center p-1")},m(p,g){ue(p,e,g),T(e,r),T(r,n),T(e,i),T(e,a),T(a,o),T(e,s),T(e,l),T(l,h),c||(f=[_e(r,"click",t[2]),_e(a,"click",t[3]),_e(l,"click",t[4])],c=!0)},p(p,[g]){g&1&&Ye(r,"btn-active",p[0].weightMode===$e.EmbedRandom),g&1&&Ye(a,"btn-active",p[0].weightMode===$e.EmbedGrid),g&1&&Ye(l,"btn-active",p[0].weightMode===$e.Embed)},i:Pe,o:Pe,d(p){p&&M(e),c=!1,Rt(f)}}}function jw(t,e,r){let n;qe(t,Ke,l=>r(0,n=l));function i(l){const h={...n,weightMode:l};Ke.update(h)}return[n,i,()=>i($e.EmbedRandom),()=>i($e.EmbedGrid),()=>i($e.Embed)]}class zw extends Je{constructor(e){super(),Qe(this,e,jw,Vw,Xe,{})}}function _c(){return _c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_c.apply(this,arguments)}var $p={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function tr(t){return typeof t=="number"}function Sn(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function Gp(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function Kp(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Yp(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Gn(t){return typeof t=="string"}var Xt=Array.isArray;function Yr(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Ms(t){return Array.isArray(t)||Yr(t)}function qw(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Ww(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Hw(t){return t&&t.constructor.prototype.isRange===!0||!1}function qc(t){return t&&t.constructor.prototype.isIndex===!0||!1}function $w(t){return typeof t=="boolean"}function Gw(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function Kw(t){return t&&t.constructor.prototype.isHelp===!0||!1}function Yw(t){return typeof t=="function"}function Zw(t){return t instanceof Date}function Jw(t){return t instanceof RegExp}function Qw(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!Gp(t)&&!Kp(t))}function Xw(t){return t===null}function Wc(t){return t===void 0}function ey(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function ty(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function ry(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function ny(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function iy(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function ay(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function uy(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function sy(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function oy(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function ly(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function cy(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function fy(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function hy(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function dy(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function py(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function gy(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function vy(t){return t&&t.constructor.prototype.isChain===!0||!1}function mu(t){var e=typeof t;return e==="object"?t===null?"null":Sn(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Ar(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return Ar(r)});if(t instanceof Date)return new Date(t.valueOf());if(Sn(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return my(t,Ar)}function my(t,e){var r={};for(var n in t)bu(t,n)&&(r[n]=e(t[n]));return r}function _y(t,e){for(var r in e)bu(e,r)&&(t[r]=e[r]);return t}function Ps(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!Ps(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!Ps(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function bu(t,e){return t&&Object.hasOwnProperty.call(t,e)}function by(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],a=t[i];a!==void 0&&(r[i]=a)}return r}var Dy=["Matrix","Array"],wy=["number","BigNumber","Fraction"],uo=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze($p)};_c(uo,$p,{MATRIX_OPTIONS:Dy,NUMBER_OPTIONS:wy});function xn(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=yy(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(h){throw h},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){r=r.call(t)},n:function(){var h=r.next();return a=h.done,h},e:function(h){o=!0,s=h},f:function(){try{!a&&r.return!=null&&r.return()}finally{if(o)throw s}}}}function yy(t,e){if(t){if(typeof t=="string")return B0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B0(t,e)}}function B0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Aa(t){return Aa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Aa(t)}function O0(){return!0}function Fn(){return!1}function Da(){}var M0="Argument is not a typed-function.";function Zp(){function t(K){return Aa(K)==="object"&&K!==null&&K.constructor===Object}var e=[{name:"number",test:function(X){return typeof X=="number"}},{name:"string",test:function(X){return typeof X=="string"}},{name:"boolean",test:function(X){return typeof X=="boolean"}},{name:"Function",test:function(X){return typeof X=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(X){return X instanceof Date}},{name:"RegExp",test:function(X){return X instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(X){return X===null}},{name:"undefined",test:function(X){return X===void 0}}],r={name:"any",test:O0,isAny:!0},n,i,a=0,o={createCount:0};function s(K){var X=n.get(K);if(X)return X;var ie='Unknown type "'+K+'"',ge=K.toLowerCase(),se,De=xn(i),fe;try{for(De.s();!(fe=De.n()).done;)if(se=fe.value,se.toLowerCase()===ge){ie+='. Did you mean "'+se+'" ?';break}}catch(de){De.e(de)}finally{De.f()}throw new TypeError(ie)}function l(K){for(var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",ie=X?s(X).index:i.length,ge=[],se=0;se<K.length;++se){if(!K[se]||typeof K[se].name!="string"||typeof K[se].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var De=K[se].name;if(n.has(De))throw new TypeError('Duplicate type name "'+De+'"');ge.push(De),n.set(De,{name:De,test:K[se].test,isAny:K[se].isAny,index:ie+se,conversionsTo:[]})}var fe=i.slice(ie);i=i.slice(0,ie).concat(ge).concat(fe);for(var de=ie+ge.length;de<i.length;++de)n.get(i[de]).index=de}function h(){n=new Map,i=[],a=0,l([r],!1)}h(),l(e);function c(){var K,X=xn(i),ie;try{for(X.s();!(ie=X.n()).done;)K=ie.value,n.get(K).conversionsTo=[]}catch(ge){X.e(ge)}finally{X.f()}a=0}function f(K){var X=i.filter(function(ie){var ge=n.get(ie);return!ge.isAny&&ge.test(K)});return X.length?X:["any"]}function p(K){return K&&typeof K=="function"&&"_typedFunctionData"in K}function g(K,X,ie){if(!p(K))throw new TypeError(M0);var ge=ie&&ie.exact,se=Array.isArray(X)?X.join(","):X,De=A(se),fe=m(De);if(!ge||fe in K.signatures){var de=K._typedFunctionData.signatureMap.get(fe);if(de)return de}var Te=De.length,We;if(ge){We=[];var ot;for(ot in K.signatures)We.push(K._typedFunctionData.signatureMap.get(ot))}else We=K._typedFunctionData.signatures;for(var Ie=0;Ie<Te;++Ie){var Yt=De[Ie],Vt=[],nr=void 0,Zt=xn(We),Dr;try{for(Zt.s();!(Dr=Zt.n()).done;){nr=Dr.value;var Jt=C(nr.params,Ie);if(!(!Jt||Yt.restParam&&!Jt.restParam)){if(!Jt.hasAny){var wr=function(){var gr=y(Jt);if(Yt.types.some(function(On){return!gr.has(On.name)}))return"continue"}();if(wr==="continue")continue}Vt.push(nr)}}}catch(gr){Zt.e(gr)}finally{Zt.f()}if(We=Vt,We.length===0)break}var fr,hr=xn(We),gn;try{for(hr.s();!(gn=hr.n()).done;)if(fr=gn.value,fr.params.length<=Te)return fr}catch(gr){hr.e(gr)}finally{hr.f()}throw new TypeError("Signature not found (signature: "+(K.name||"unnamed")+"("+m(De,", ")+"))")}function b(K,X,ie){return g(K,X,ie).implementation}function v(K,X){var ie=s(X);if(ie.test(K))return K;var ge=ie.conversionsTo;if(ge.length===0)throw new Error("There are no conversions to "+X+" defined.");for(var se=0;se<ge.length;se++){var De=s(ge[se].from);if(De.test(K))return ge[se].convert(K)}throw new Error("Cannot convert "+K+" to "+X)}function m(K){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return K.map(function(ie){return ie.name}).join(X)}function D(K){var X=K.indexOf("...")===0,ie=X?K.length>3?K.slice(3):"any":K,ge=ie.split("|").map(function(de){return s(de.trim())}),se=!1,De=X?"...":"",fe=ge.map(function(de){return se=de.isAny||se,De+=de.name+"|",{name:de.name,typeIndex:de.index,test:de.test,isAny:de.isAny,conversion:null,conversionIndex:-1}});return{types:fe,name:De.slice(0,-1),hasAny:se,hasConversion:!1,restParam:X}}function S(K){var X=K.types.map(function(fe){return fe.name}),ie=J(X),ge=K.hasAny,se=K.name,De=ie.map(function(fe){var de=s(fe.from);return ge=de.isAny||ge,se+="|"+fe.from,{name:fe.from,typeIndex:de.index,test:de.test,isAny:de.isAny,conversion:fe,conversionIndex:fe.index}});return{types:K.types.concat(De),name:se,hasAny:ge,hasConversion:De.length>0,restParam:K.restParam}}function y(K){return K.typeSet||(K.typeSet=new Set,K.types.forEach(function(X){return K.typeSet.add(X.name)})),K.typeSet}function A(K){var X=[];if(typeof K!="string")throw new TypeError("Signatures must be strings");var ie=K.trim();if(ie==="")return X;for(var ge=ie.split(","),se=0;se<ge.length;++se){var De=D(ge[se].trim());if(De.restParam&&se!==ge.length-1)throw new SyntaxError('Unexpected rest parameter "'+ge[se]+'": only allowed for the last parameter');if(De.types.length===0)return null;X.push(De)}return X}function F(K){var X=at(K);return X?X.restParam:!1}function P(K){if(!K||K.types.length===0)return O0;if(K.types.length===1)return s(K.types[0].name).test;if(K.types.length===2){var X=s(K.types[0].name).test,ie=s(K.types[1].name).test;return function(De){return X(De)||ie(De)}}else{var ge=K.types.map(function(se){return s(se.name).test});return function(De){for(var fe=0;fe<ge.length;fe++)if(ge[fe](De))return!0;return!1}}}function O(K){var X,ie,ge;if(F(K)){X=tt(K).map(P);var se=X.length,De=P(at(K)),fe=function(Te){for(var We=se;We<Te.length;We++)if(!De(Te[We]))return!1;return!0};return function(Te){for(var We=0;We<X.length;We++)if(!X[We](Te[We]))return!1;return fe(Te)&&Te.length>=se+1}}else return K.length===0?function(Te){return Te.length===0}:K.length===1?(ie=P(K[0]),function(Te){return ie(Te[0])&&Te.length===1}):K.length===2?(ie=P(K[0]),ge=P(K[1]),function(Te){return ie(Te[0])&&ge(Te[1])&&Te.length===2}):(X=K.map(P),function(Te){for(var We=0;We<X.length;We++)if(!X[We](Te[We]))return!1;return Te.length===X.length})}function C(K,X){return X<K.length?K[X]:F(K)?at(K):null}function x(K,X){var ie=C(K,X);return ie?y(ie):new Set}function z(K){return K.conversion===null||K.conversion===void 0}function G(K,X){var ie=new Set;return K.forEach(function(ge){var se=x(ge.params,X),De,fe=xn(se),de;try{for(fe.s();!(de=fe.n()).done;)De=de.value,ie.add(De)}catch(Te){fe.e(Te)}finally{fe.f()}}),ie.has("any")?["any"]:Array.from(ie)}function Z(K,X,ie){var ge,se,De=K||"unnamed",fe=ie,de,Te=function(){var Zt=[];if(fe.forEach(function(Jt){var wr=C(Jt.params,de),fr=P(wr);(de<Jt.params.length||F(Jt.params))&&fr(X[de])&&Zt.push(Jt)}),Zt.length===0){if(se=G(fe,de),se.length>0){var Dr=f(X[de]);return ge=new TypeError("Unexpected type of argument in function "+De+" (expected: "+se.join(" or ")+", actual: "+Dr.join(" | ")+", index: "+de+")"),ge.data={category:"wrongType",fn:De,index:de,actual:Dr,expected:se},{v:ge}}}else fe=Zt};for(de=0;de<X.length;de++){var We=Te();if(Aa(We)==="object")return We.v}var ot=fe.map(function(nr){return F(nr.params)?1/0:nr.params.length});if(X.length<Math.min.apply(null,ot))return se=G(fe,de),ge=new TypeError("Too few arguments in function "+De+" (expected: "+se.join(" or ")+", index: "+X.length+")"),ge.data={category:"tooFewArgs",fn:De,index:X.length,expected:se},ge;var Ie=Math.max.apply(null,ot);if(X.length>Ie)return ge=new TypeError("Too many arguments in function "+De+" (expected: "+Ie+", actual: "+X.length+")"),ge.data={category:"tooManyArgs",fn:De,index:X.length,expectedLength:Ie},ge;for(var Yt=[],Vt=0;Vt<X.length;++Vt)Yt.push(f(X[Vt]).join("|"));return ge=new TypeError('Arguments of type "'+Yt.join(", ")+'" do not match any of the defined signatures of function '+De+"."),ge.data={category:"mismatch",actual:Yt},ge}function R(K){for(var X=i.length+1,ie=0;ie<K.types.length;ie++)z(K.types[ie])&&(X=Math.min(X,K.types[ie].typeIndex));return X}function N(K){for(var X=a+1,ie=0;ie<K.types.length;ie++)z(K.types[ie])||(X=Math.min(X,K.types[ie].conversionIndex));return X}function q(K,X){if(K.hasAny){if(!X.hasAny)return 1}else if(X.hasAny)return-1;if(K.restParam){if(!X.restParam)return 1}else if(X.restParam)return-1;if(K.hasConversion){if(!X.hasConversion)return 1}else if(X.hasConversion)return-1;var ie=R(K)-R(X);if(ie<0)return-1;if(ie>0)return 1;var ge=N(K)-N(X);return ge<0?-1:ge>0?1:0}function j(K,X){var ie=K.params,ge=X.params,se=at(ie),De=at(ge),fe=F(ie),de=F(ge);if(fe&&se.hasAny){if(!de||!De.hasAny)return 1}else if(de&&De.hasAny)return-1;var Te=0,We=0,ot,Ie=xn(ie),Yt;try{for(Ie.s();!(Yt=Ie.n()).done;)ot=Yt.value,ot.hasAny&&++Te,ot.hasConversion&&++We}catch(Vn){Ie.e(Vn)}finally{Ie.f()}var Vt=0,nr=0,Zt=xn(ge),Dr;try{for(Zt.s();!(Dr=Zt.n()).done;)ot=Dr.value,ot.hasAny&&++Vt,ot.hasConversion&&++nr}catch(Vn){Zt.e(Vn)}finally{Zt.f()}if(Te!==Vt)return Te-Vt;if(fe&&se.hasConversion){if(!de||!De.hasConversion)return 1}else if(de&&De.hasConversion)return-1;if(We!==nr)return We-nr;if(fe){if(!de)return 1}else if(de)return-1;var Jt=(ie.length-ge.length)*(fe?-1:1);if(Jt!==0)return Jt;for(var wr=[],fr=0,hr=0;hr<ie.length;++hr){var gn=q(ie[hr],ge[hr]);wr.push(gn),fr+=gn}if(fr!==0)return fr;for(var gr,On=0,Xn=wr;On<Xn.length;On++)if(gr=Xn[On],gr!==0)return gr;return 0}function J(K){if(K.length===0)return[];var X=K.map(s);K.length>1&&X.sort(function(Te,We){return Te.index-We.index});var ie=X[0].conversionsTo;if(K.length===1)return ie;ie=ie.concat([]);for(var ge=new Set(K),se=1;se<X.length;++se){var De=void 0,fe=xn(X[se].conversionsTo),de;try{for(fe.s();!(de=fe.n()).done;)De=de.value,ge.has(De.from)||(ie.push(De),ge.add(De.from))}catch(Te){fe.e(Te)}finally{fe.f()}}return ie}function Q(K,X){var ie=X;if(K.some(function(de){return de.hasConversion})){var ge=F(K),se=K.map(te);ie=function(){for(var Te=[],We=ge?arguments.length-1:arguments.length,ot=0;ot<We;ot++)Te[ot]=se[ot](arguments[ot]);return ge&&(Te[We]=arguments[We].map(se[We])),X.apply(this,Te)}}var De=ie;if(F(K)){var fe=K.length-1;De=function(){return ie.apply(this,rt(arguments,0,fe).concat([rt(arguments,fe)]))}}return De}function te(K){var X,ie,ge,se,De=[],fe=[];switch(K.types.forEach(function(de){de.conversion&&(De.push(s(de.conversion.from).test),fe.push(de.conversion.convert))}),fe.length){case 0:return function(Te){return Te};case 1:return X=De[0],ge=fe[0],function(Te){return X(Te)?ge(Te):Te};case 2:return X=De[0],ie=De[1],ge=fe[0],se=fe[1],function(Te){return X(Te)?ge(Te):ie(Te)?se(Te):Te};default:return function(Te){for(var We=0;We<fe.length;We++)if(De[We](Te))return fe[We](Te);return Te}}}function ce(K){function X(ie,ge,se){if(ge<ie.length){var De=ie[ge],fe=[];if(De.restParam){var de=De.types.filter(z);de.length<De.types.length&&fe.push({types:de,name:"..."+de.map(function(Te){return Te.name}).join("|"),hasAny:de.some(function(Te){return Te.isAny}),hasConversion:!1,restParam:!0}),fe.push(De)}else fe=De.types.map(function(Te){return{types:[Te],name:Te.name,hasAny:Te.isAny,hasConversion:Te.conversion,restParam:!1}});return Bt(fe,function(Te){return X(ie,ge+1,se.concat([Te]))})}else return[se]}return X(K,0,[])}function me(K,X){for(var ie=Math.max(K.length,X.length),ge=0;ge<ie;ge++){var se=x(K,ge),De=x(X,ge),fe=!1,de=void 0,Te=xn(De),We;try{for(Te.s();!(We=Te.n()).done;)if(de=We.value,se.has(de)){fe=!0;break}}catch(nr){Te.e(nr)}finally{Te.f()}if(!fe)return!1}var ot=K.length,Ie=X.length,Yt=F(K),Vt=F(X);return Yt?Vt?ot===Ie:Ie>=ot:Vt?ot>=Ie:ot===Ie}function Ee(K){return K.map(function(X){return Ut(X)?xt(X.referToSelf.callback):qr(X)?ct(X.referTo.references,X.referTo.callback):X})}function be(K,X,ie){var ge=[],se,De=xn(K),fe;try{for(De.s();!(fe=De.n()).done;){se=fe.value;var de=ie[se];if(typeof de!="number")throw new TypeError('No definition for referenced signature "'+se+'"');if(de=X[de],typeof de!="function")return!1;ge.push(de)}}catch(Te){De.e(Te)}finally{De.f()}return ge}function Oe(K,X,ie){for(var ge=Ee(K),se=new Array(ge.length).fill(!1),De=!0;De;){De=!1;for(var fe=!0,de=0;de<ge.length;++de)if(!se[de]){var Te=ge[de];if(Ut(Te))ge[de]=Te.referToSelf.callback(ie),ge[de].referToSelf=Te.referToSelf,se[de]=!0,fe=!1;else if(qr(Te)){var We=be(Te.referTo.references,ge,X);We?(ge[de]=Te.referTo.callback.apply(this,We),ge[de].referTo=Te.referTo,se[de]=!0,fe=!1):De=!0}}if(fe&&De)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return ge}function ke(K){var X=/\bthis(\(|\.signatures\b)/;Object.keys(K).forEach(function(ie){var ge=K[ie];if(X.test(ge.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Ne(K,X){if(o.createCount++,Object.keys(X).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&ke(X);var ie=[],ge=[],se={},De=[],fe,de=function(){if(!Object.prototype.hasOwnProperty.call(X,fe))return"continue";var sr=A(fe);if(!sr)return"continue";ie.forEach(function(mn){if(me(mn,sr))throw new TypeError('Conflicting signatures "'+m(mn)+'" and "'+m(sr)+'".')}),ie.push(sr);var Hr=ge.length;ge.push(X[fe]);var ji=sr.map(S),ti=void 0,qn=xn(ce(ji)),zi;try{for(qn.s();!(zi=qn.n()).done;){ti=zi.value;var Mn=m(ti);De.push({params:ti,name:Mn,fn:Hr}),ti.every(function(mn){return!mn.hasConversion})&&(se[Mn]=Hr)}}catch(mn){qn.e(mn)}finally{qn.f()}};for(fe in X)var Te=de();De.sort(j);var We=Oe(ge,se,zn),ot;for(ot in se)Object.prototype.hasOwnProperty.call(se,ot)&&(se[ot]=We[se[ot]]);for(var Ie=[],Yt=new Map,Vt=0,nr=De;Vt<nr.length;Vt++)ot=nr[Vt],Yt.has(ot.name)||(ot.fn=We[ot.fn],Ie.push(ot),Yt.set(ot.name,ot));for(var Zt=Ie[0]&&Ie[0].params.length<=2&&!F(Ie[0].params),Dr=Ie[1]&&Ie[1].params.length<=2&&!F(Ie[1].params),Jt=Ie[2]&&Ie[2].params.length<=2&&!F(Ie[2].params),wr=Ie[3]&&Ie[3].params.length<=2&&!F(Ie[3].params),fr=Ie[4]&&Ie[4].params.length<=2&&!F(Ie[4].params),hr=Ie[5]&&Ie[5].params.length<=2&&!F(Ie[5].params),gn=Zt&&Dr&&Jt&&wr&&fr&&hr,gr=0;gr<Ie.length;++gr)Ie[gr].test=O(Ie[gr].params);for(var On=Zt?P(Ie[0].params[0]):Fn,Xn=Dr?P(Ie[1].params[0]):Fn,Vn=Jt?P(Ie[2].params[0]):Fn,jn=wr?P(Ie[3].params[0]):Fn,na=fr?P(Ie[4].params[0]):Fn,Ui=hr?P(Ie[5].params[0]):Fn,Ua=Zt?P(Ie[0].params[1]):Fn,Sr=Dr?P(Ie[1].params[1]):Fn,ir=Jt?P(Ie[2].params[1]):Fn,Va=wr?P(Ie[3].params[1]):Fn,vi=fr?P(Ie[4].params[1]):Fn,vn=hr?P(Ie[5].params[1]):Fn,ei=0;ei<Ie.length;++ei)Ie[ei].implementation=Q(Ie[ei].params,Ie[ei].fn);var Vi=Zt?Ie[0].implementation:Da,ja=Dr?Ie[1].implementation:Da,za=Jt?Ie[2].implementation:Da,ia=wr?Ie[3].implementation:Da,qa=fr?Ie[4].implementation:Da,Wa=hr?Ie[5].implementation:Da,Ha=Zt?Ie[0].params.length:-1,$a=Dr?Ie[1].params.length:-1,Ga=Jt?Ie[2].params.length:-1,Ka=wr?Ie[3].params.length:-1,mi=fr?Ie[4].params.length:-1,Ya=hr?Ie[5].params.length:-1,_i=gn?6:0,Za=Ie.length,Ja=Ie.map(function(yr){return yr.test}),Qa=Ie.map(function(yr){return yr.implementation}),aa=function(){for(var sr=_i;sr<Za;sr++)if(Ja[sr](arguments))return Qa[sr].apply(this,arguments);return o.onMismatch(K,arguments,Ie)};function zn(yr,sr){return arguments.length===Ha&&On(yr)&&Ua(sr)?Vi.apply(this,arguments):arguments.length===$a&&Xn(yr)&&Sr(sr)?ja.apply(this,arguments):arguments.length===Ga&&Vn(yr)&&ir(sr)?za.apply(this,arguments):arguments.length===Ka&&jn(yr)&&Va(sr)?ia.apply(this,arguments):arguments.length===mi&&na(yr)&&vi(sr)?qa.apply(this,arguments):arguments.length===Ya&&Ui(yr)&&vn(sr)?Wa.apply(this,arguments):aa.apply(this,arguments)}try{Object.defineProperty(zn,"name",{value:K})}catch{}return zn.signatures=se,zn._typedFunctionData={signatures:Ie,signatureMap:Yt},zn}function ze(K,X,ie){throw Z(K,X,ie)}function tt(K){return rt(K,0,K.length-1)}function at(K){return K[K.length-1]}function rt(K,X,ie){return Array.prototype.slice.call(K,X,ie)}function St(K,X){for(var ie=0;ie<K.length;ie++)if(X(K[ie]))return K[ie]}function Bt(K,X){return Array.prototype.concat.apply([],K.map(X))}function vt(){var K=tt(arguments).map(function(ie){return m(A(ie))}),X=at(arguments);if(typeof X!="function")throw new TypeError("Callback function expected as last argument");return ct(K,X)}function ct(K,X){return{referTo:{references:K,callback:X}}}function xt(K){if(typeof K!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:K}}}function qr(K){return K&&Aa(K.referTo)==="object"&&Array.isArray(K.referTo.references)&&typeof K.referTo.callback=="function"}function Ut(K){return K&&Aa(K.referToSelf)==="object"&&typeof K.referToSelf.callback=="function"}function Wr(K,X){if(!K)return X;if(X&&X!==K){var ie=new Error("Function names do not match (expected: "+K+", actual: "+X+")");throw ie.data={actual:X,expected:K},ie}return K}function et(K){var X;for(var ie in K)Object.prototype.hasOwnProperty.call(K,ie)&&(p(K[ie])||typeof K[ie].signature=="string")&&(X=Wr(X,K[ie].name));return X}function pr(K,X){var ie;for(ie in X)if(Object.prototype.hasOwnProperty.call(X,ie)){if(ie in K&&X[ie]!==K[ie]){var ge=new Error('Signature "'+ie+'" is defined twice');throw ge.data={signature:ie,sourceFunction:X[ie],destFunction:K[ie]},ge}K[ie]=X[ie]}}var Fr=o;o=function(X){for(var ie=typeof X=="string",ge=ie?1:0,se=ie?X:"",De={},fe=ge;fe<arguments.length;++fe){var de=arguments[fe],Te={},We=void 0;if(typeof de=="function"?(We=de.name,typeof de.signature=="string"?Te[de.signature]=de:p(de)&&(Te=de.signatures)):t(de)&&(Te=de,ie||(We=et(de))),Object.keys(Te).length===0){var ot=new TypeError("Argument to 'typed' at index "+fe+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw ot.data={index:fe,argument:de},ot}ie||(se=Wr(se,We)),pr(De,Te)}return Ne(se||"",De)},o.create=Zp,o.createCount=Fr.createCount,o.onMismatch=ze,o.throwMismatchError=ze,o.createError=Z,o.clear=h,o.clearConversions=c,o.addTypes=l,o._findType=s,o.referTo=vt,o.referToSelf=xt,o.convert=v,o.findSignature=g,o.find=b,o.isTypedFunction=p,o.warnAgainstDeprecatedThis=!0,o.addType=function(K,X){var ie="any";X!==!1&&n.has("Object")&&(ie="Object"),o.addTypes([K],ie)};function Bn(K){if(!K||typeof K.from!="string"||typeof K.to!="string"||typeof K.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(K.to===K.from)throw new SyntaxError('Illegal to define conversion from "'+K.from+'" to itself.')}return o.addConversion=function(K){Bn(K);var X=s(K.to);if(X.conversionsTo.every(function(ie){return ie.from!==K.from}))X.conversionsTo.push({from:K.from,convert:K.convert,index:a++});else throw new Error('There is already a conversion from "'+K.from+'" to "'+X.name+'"')},o.addConversions=function(K){K.forEach(o.addConversion)},o.removeConversion=function(K){Bn(K);var X=s(K.to),ie=St(X.conversionsTo,function(se){return se.from===K.from});if(!ie)throw new Error("Attempt to remove nonexistent conversion from "+K.from+" to "+K.to);if(ie.convert!==K.convert)throw new Error("Conversion to remove does not match existing conversion");var ge=X.conversionsTo.indexOf(ie);X.conversionsTo.splice(ge,1)},o.resolve=function(K,X){if(!p(K))throw new TypeError(M0);for(var ie=K._typedFunctionData.signatures,ge=0;ge<ie.length;++ge)if(ie[ge].test(X))return ie[ge];return null},o}const P0=Zp();function Cr(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function Ll(t,e,r){var n={2:"0b",8:"0o",16:"0x"},i=n[e],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Cr(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Cr(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),a="i".concat(r)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(i).concat(t.toString(e)).concat(a)}function bc(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",n,i;if(e&&(e.notation&&(r=e.notation),tr(e)?n=e:tr(e.precision)&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Ay(t,n);case"exponential":return Jp(t,n);case"engineering":return Ey(t,n);case"bin":return Ll(t,2,i);case"oct":return Ll(t,8,i);case"hex":return Ll(t,16,i);case"auto":return Cy(t,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],o=arguments[4];return a!=="."?a+o:o});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function so(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),a=n.indexOf(".");i+=a!==-1?a-1:n.length-1;var o=n.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return o.length===0&&(o.push(0),i++),{sign:r,coefficients:o,exponent:i}}function Ey(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=so(t),n=oo(r,e),i=n.exponent,a=n.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(tr(e))for(;e>a.length||i-o+1>a.length;)a.push(0);else for(var s=Math.abs(i-o)-(a.length-1),l=0;l<s;l++)a.push(0);for(var h=Math.abs(i-o),c=1;h>0;)c++,h--;var f=a.slice(c).join(""),p=tr(e)&&f.length||f.match(/[1-9]/)?"."+f:"",g=a.slice(0,c).join("")+p+"e"+(i>=0?"+":"")+o.toString();return n.sign+g}function Ay(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=so(t),n=typeof e=="number"?oo(r,r.exponent+1+e):r,i=n.coefficients,a=n.exponent+1,o=a+(e||0);return i.length<o&&(i=i.concat(Fa(o-i.length))),a<0&&(i=Fa(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),n.sign+i.join("")}function Jp(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=so(t),n=e?oo(r,e):r,i=n.coefficients,a=n.exponent;i.length<e&&(i=i.concat(Fa(e-i.length)));var o=i.shift();return n.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function Cy(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=r&&r.lowerExp!==void 0?r.lowerExp:-3,i=r&&r.upperExp!==void 0?r.upperExp:5,a=so(t),o=e?oo(a,e):a;if(o.exponent<n||o.exponent>=i)return Jp(t,e);var s=o.coefficients,l=o.exponent;s.length<e&&(s=s.concat(Fa(e-s.length))),s=s.concat(Fa(l-s.length+1+(s.length<e?e-s.length:0))),s=Fa(-l).concat(s);var h=l>0?l:0;return h<s.length-1&&s.splice(h+1,0,"."),o.sign+s.join("")}function oo(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var a=e-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),r.exponent++,a++),a--,n[a]++}}return r}function Fa(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function Fy(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Sy=Number.EPSILON||2220446049250313e-31;function ks(t,e,r){if(r==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var n=Math.abs(t-e);return n<Sy?!0:n<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}function Rl(t,e,r){var n=t.constructor,i=new n(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Cr(r))throw new Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),a="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function By(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",n,i;if(e!==void 0&&(e.notation&&(r=e.notation),typeof e=="number"?n=e:e.precision&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return My(t,n);case"exponential":return k0(t,n);case"engineering":return Oy(t,n);case"bin":return Rl(t,2,i);case"oct":return Rl(t,8,i);case"hex":return Rl(t,16,i);case"auto":{var a=e&&e.lowerExp!==void 0?e.lowerExp:-3,o=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var s,l=t.toSignificantDigits(n),h=l.e;return h>=a&&h<o?s=l.toFixed():s=k0(t,n),s.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Oy(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),a=i.toPrecision(e);return a.indexOf("e")!==-1&&(a=i.toString()),a+"e"+(r>=0?"+":"")+n.toString()}function k0(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function My(t,e){return t.toFixed(e)}function rn(t,e){var r=Py(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function Py(t,e){if(typeof t=="number")return bc(t,e);if(Sn(t))return By(t,e);if(ky(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return Qp(t,e);if(Gn(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>'"'+n+'": '+rn(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function Qp(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=Qp(t[i],e);return r+="]",r}else return rn(t,e)}function ky(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function kt(t,e,r){if(!(this instanceof kt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}kt.prototype=new RangeError;kt.prototype.constructor=RangeError;kt.prototype.name="DimensionError";kt.prototype.isDimensionError=!0;function ta(t,e,r){if(!(this instanceof ta))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}ta.prototype=new RangeError;ta.prototype.constructor=RangeError;ta.prototype.name="IndexError";ta.prototype.isIndexError=!0;function Ii(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function Xp(t,e,r){var n,i=t.length;if(i!==e[r])throw new kt(i,e[r]);if(r<e.length-1){var a=r+1;for(n=0;n<i;n++){var o=t[n];if(!Array.isArray(o))throw new kt(e.length-1,e.length,"<");Xp(t[n],e,a)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new kt(e.length+1,e.length,">")}function T0(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new kt(t.length,0)}else Xp(t,e,0)}function er(t,e){if(!tr(t)||!Cr(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new ta(t,e)}function I0(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!tr(i)||!Cr(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+rn(e)+")")});var n=r!==void 0?r:0;return Dc(t,e,0,n),t}function Dc(t,e,r,n){var i,a,o=t.length,s=e[r],l=Math.min(o,s);if(t.length=s,r<e.length-1){var h=r+1;for(i=0;i<l;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),Dc(a,e,h,n);for(i=l;i<s;i++)a=[],t[i]=a,Dc(a,e,h,n)}else{for(i=0;i<l;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=l;i<s;i++)t[i]=n}}function Ty(t,e){var r=xy(t),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new kt(0,n,"!=");e=Hc(e,n);var i=e1(e);if(n!==i)throw new kt(i,n,"!=");try{return Iy(r,e)}catch(a){throw a instanceof kt?new kt(i,n,"!="):a}}function Hc(t,e){var r=e1(t),n=t.slice(),i=-1,a=t.indexOf(i),o=t.indexOf(i,a+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var s=a>=0,l=e%r===0;if(s)if(l)n[a]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function e1(t){return t.reduce((e,r)=>e*r,1)}function Iy(t,e){for(var r=t,n,i=e.length-1;i>0;i--){var a=e[i];n=[];for(var o=r.length/a,s=0;s<o;s++)n.push(r.slice(s*a,(s+1)*a));r=n}return r}function t1(t,e,r,n){var i=n||Ii(t);if(r)for(var a=0;a<r;a++)t=[t],i.unshift(1);for(t=r1(t,e,0);i.length<e;)i.push(1);return t}function r1(t,e,r){var n,i;if(Array.isArray(t)){var a=r+1;for(n=0,i=t.length;n<i;n++)t[n]=r1(t[n],e,a)}else for(var o=r;o<e;o++)t=[t];return t}function xy(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function r(n){Array.isArray(n)?n.forEach(r):e.push(n)}),e}function Ts(t,e){for(var r,n=0,i=0;i<t.length;i++){var a=t[i],o=Array.isArray(a);if(i===0&&o&&(n=a.length),o&&a.length!==n)return;var s=o?Ts(a,e):e(a);if(r===void 0)r=s;else if(r!==s)return"mixed"}return r}function Ft(t,e,r,n){function i(a){var o=by(a,e.map(Ry));return Ny(t,e,a),r(o)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Ny(t,e,r){var n=e.filter(a=>!Ly(a)).every(a=>r[a]!==void 0);if(!n){var i=e.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function Ly(t){return t&&t[0]==="?"}function Ry(t){return t&&t[0]==="?"?t.slice(1):t}function Uy(t,e){if(i1(t)&&n1(t,e))return t[e];throw typeof t[e]=="function"&&zy(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Vy(t,e,r){if(i1(t)&&n1(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function jy(t,e){return e in t}function n1(t,e){return!t||typeof t!="object"?!1:bu(qy,e)?!0:!(e in Object.prototype||e in Function.prototype)}function zy(t,e){return t==null||typeof t[e]!="function"||bu(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:bu(Wy,e)?!0:!(e in Object.prototype||e in Function.prototype)}function i1(t){return typeof t=="object"&&t&&t.constructor===Object}var qy={length:!0,name:!0},Wy={toString:!0,valueOf:!0,toLocaleString:!0};class Hy{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return Uy(this.wrappedObject,e)}set(e,r){return Vy(this.wrappedObject,e,r),this}has(e){return jy(this.wrappedObject,e)}}function $y(t){return t?t instanceof Map||t instanceof Hy||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var a1=function(){return a1=P0.create,P0},Gy=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Ky=Ft("typed",Gy,function(e){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:a}=e,o=a1();return o.clear(),o.addTypes([{name:"number",test:tr},{name:"Complex",test:Gp},{name:"BigNumber",test:Sn},{name:"Fraction",test:Kp},{name:"Unit",test:Yp},{name:"identifier",test:s=>Gn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(s)},{name:"string",test:Gn},{name:"Chain",test:vy},{name:"Array",test:Xt},{name:"Matrix",test:Yr},{name:"DenseMatrix",test:qw},{name:"SparseMatrix",test:Ww},{name:"Range",test:Hw},{name:"Index",test:qc},{name:"boolean",test:$w},{name:"ResultSet",test:Gw},{name:"Help",test:Kw},{name:"function",test:Yw},{name:"Date",test:Zw},{name:"RegExp",test:Jw},{name:"null",test:Xw},{name:"undefined",test:Wc},{name:"AccessorNode",test:ey},{name:"ArrayNode",test:ty},{name:"AssignmentNode",test:ry},{name:"BlockNode",test:ny},{name:"ConditionalNode",test:iy},{name:"ConstantNode",test:ay},{name:"FunctionNode",test:sy},{name:"FunctionAssignmentNode",test:uy},{name:"IndexNode",test:oy},{name:"Node",test:ly},{name:"ObjectNode",test:cy},{name:"OperatorNode",test:fy},{name:"ParenthesisNode",test:hy},{name:"RangeNode",test:dy},{name:"RelationalNode",test:py},{name:"SymbolNode",test:gy},{name:"Map",test:$y},{name:"Object",test:Qw}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(r||Ul(l),Fy(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new r(l)}},{from:"number",to:"Complex",convert:function(l){return n||gs(l),new n(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return n||gs(l),new n(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return n||gs(l),new n(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){a||Vl(l);var h=new a(l);if(h.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return h}},{from:"string",to:"number",convert:function(l){var h=Number(l);if(isNaN(h))throw new Error('Cannot convert "'+l+'" to a number');return h}},{from:"string",to:"BigNumber",convert:function(l){r||Ul(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){a||Vl(l);try{return new a(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){n||gs(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return r||Ul(l),new r(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return a||Vl(l),new a(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||Yy(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),o.onMismatch=(s,l,h)=>{var c=o.createError(s,l,h);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Ms(l[0])&&h.some(p=>!p.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(s,l,h)=>{var c=o.createError(s,l,h);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Ms(l[0])&&h.some(p=>!p.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o});function Ul(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function gs(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function Yy(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Vl(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Ca=9e15,Li=1e9,wc="0123456789abcdef",Is="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",xs="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",yc={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ca,maxE:Ca,crypto:!1},u1,di,lt=!0,lo="[DecimalError] ",xi=lo+"Invalid argument: ",s1=lo+"Precision limit exceeded",o1=lo+"crypto unavailable",l1="[object Decimal]",zr=Math.floor,_r=Math.pow,Zy=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Jy=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Qy=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,c1=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Rn=1e7,it=7,Xy=9007199254740991,eE=Is.length-1,Ec=xs.length-1,Be={toStringTag:l1};Be.absoluteValue=Be.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Ze(t)};Be.ceil=function(){return Ze(new this.constructor(this),this.e+1,2)};Be.clampedTo=Be.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(xi+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};Be.comparedTo=Be.cmp=function(t){var e,r,n,i,a=this,o=a.d,s=(t=new a.constructor(t)).d,l=a.s,h=t.s;if(!o||!s)return!l||!h?NaN:l!==h?l:o===s?0:!o^l<0?1:-1;if(!o[0]||!s[0])return o[0]?l:s[0]?-h:0;if(l!==h)return l;if(a.e!==t.e)return a.e>t.e^l<0?1:-1;for(n=o.length,i=s.length,e=0,r=n<i?n:i;e<r;++e)if(o[e]!==s[e])return o[e]>s[e]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1};Be.cosine=Be.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+it,n.rounding=1,r=tE(n,g1(n,r)),n.precision=t,n.rounding=e,Ze(di==2||di==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};Be.cubeRoot=Be.cbrt=function(){var t,e,r,n,i,a,o,s,l,h,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(lt=!1,a=c.s*_r(c.s*c,1/3),!a||Math.abs(a)==1/0?(r=Nr(c.d),t=c.e,(a=(t-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=_r(r,1/3),t=zr((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?r="5e"+t:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new f(r),n.s=c.s):n=new f(a.toString()),o=(t=f.precision)+3;;)if(s=n,l=s.times(s).times(s),h=l.plus(c),n=Lt(h.plus(c).times(s),h.plus(l),o+2,1),Nr(s.d).slice(0,o)===(r=Nr(n.d)).slice(0,o))if(r=r.slice(o-3,o+1),r=="9999"||!i&&r=="4999"){if(!i&&(Ze(s,t+1,0),s.times(s).times(s).eq(c))){n=s;break}o+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Ze(n,t+1,1),e=!n.times(n).times(n).eq(c));break}return lt=!0,Ze(n,t,f.rounding,e)};Be.decimalPlaces=Be.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-zr(this.e/it))*it,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};Be.dividedBy=Be.div=function(t){return Lt(this,new this.constructor(t))};Be.dividedToIntegerBy=Be.divToInt=function(t){var e=this,r=e.constructor;return Ze(Lt(e,new r(t),0,1,1),r.precision,r.rounding)};Be.equals=Be.eq=function(t){return this.cmp(t)===0};Be.floor=function(){return Ze(new this.constructor(this),this.e+1,3)};Be.greaterThan=Be.gt=function(t){return this.cmp(t)>0};Be.greaterThanOrEqualTo=Be.gte=function(t){var e=this.cmp(t);return e==1||e===0};Be.hyperbolicCosine=Be.cosh=function(){var t,e,r,n,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;r=o.precision,n=o.rounding,o.precision=r+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/fo(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=Oa(o,1,a.times(e),new o(1),!0);for(var l,h=t,c=new o(8);h--;)l=a.times(a),a=s.minus(l.times(c.minus(l.times(c))));return Ze(a,o.precision=r,o.rounding=n,!0)};Be.hyperbolicSine=Be.sinh=function(){var t,e,r,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,r=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=Oa(a,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/fo(5,t)),i=Oa(a,2,i,i,!0);for(var o,s=new a(5),l=new a(16),h=new a(20);t--;)o=i.times(i),i=i.times(s.plus(o.times(l.times(o).plus(h))))}return a.precision=e,a.rounding=r,Ze(i,e,r,!0)};Be.hyperbolicTangent=Be.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,Lt(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};Be.inverseCosine=Be.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),i=r.precision,a=r.rounding;return n!==-1?n===0?e.isNeg()?Nn(r,i,a):new r(0):new r(NaN):e.isZero()?Nn(r,i+4,a).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),t=Nn(r,i+4,a).times(.5),r.precision=i,r.rounding=a,t.minus(e))};Be.inverseHyperbolicCosine=Be.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,lt=!1,r=r.times(r).minus(1).sqrt().plus(r),lt=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};Be.inverseHyperbolicSine=Be.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,lt=!1,r=r.times(r).plus(1).sqrt().plus(r),lt=!0,n.precision=t,n.rounding=e,r.ln())};Be.inverseHyperbolicTangent=Be.atanh=function(){var t,e,r,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?Ze(new a(i),t,e,!0):(a.precision=r=n-i.e,i=Lt(i.plus(1),new a(1).minus(i),r+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};Be.inverseSine=Be.asin=function(){var t,e,r,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),r=a.precision,n=a.rounding,e!==-1?e===0?(t=Nn(a,r+4,n).times(.5),t.s=i.s,t):new a(NaN):(a.precision=r+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,i.times(2)))};Be.inverseTangent=Be.atan=function(){var t,e,r,n,i,a,o,s,l,h=this,c=h.constructor,f=c.precision,p=c.rounding;if(h.isFinite()){if(h.isZero())return new c(h);if(h.abs().eq(1)&&f+4<=Ec)return o=Nn(c,f+4,p).times(.25),o.s=h.s,o}else{if(!h.s)return new c(NaN);if(f+4<=Ec)return o=Nn(c,f+4,p).times(.5),o.s=h.s,o}for(c.precision=s=f+10,c.rounding=1,r=Math.min(28,s/it+2|0),t=r;t;--t)h=h.div(h.times(h).plus(1).sqrt().plus(1));for(lt=!1,e=Math.ceil(s/it),n=1,l=h.times(h),o=new c(h),i=h;t!==-1;)if(i=i.times(l),a=o.minus(i.div(n+=2)),i=i.times(l),o=a.plus(i.div(n+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return r&&(o=o.times(2<<r-1)),lt=!0,Ze(o,c.precision=f,c.rounding=p,!0)};Be.isFinite=function(){return!!this.d};Be.isInteger=Be.isInt=function(){return!!this.d&&zr(this.e/it)>this.d.length-2};Be.isNaN=function(){return!this.s};Be.isNegative=Be.isNeg=function(){return this.s<0};Be.isPositive=Be.isPos=function(){return this.s>0};Be.isZero=function(){return!!this.d&&this.d[0]===0};Be.lessThan=Be.lt=function(t){return this.cmp(t)<0};Be.lessThanOrEqualTo=Be.lte=function(t){return this.cmp(t)<1};Be.logarithm=Be.log=function(t){var e,r,n,i,a,o,s,l,h=this,c=h.constructor,f=c.precision,p=c.rounding,g=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(r=h.d,h.s<0||!r||!r[0]||h.eq(1))return new c(r&&!r[0]?-1/0:h.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)a=!0;else{for(i=r[0];i%10===0;)i/=10;a=i!==1}if(lt=!1,s=f+g,o=Mi(h,s),n=e?Ns(c,s+10):Mi(t,s),l=Lt(o,n,s,1),Du(l.d,i=f,p))do if(s+=10,o=Mi(h,s),n=e?Ns(c,s+10):Mi(t,s),l=Lt(o,n,s,1),!a){+Nr(l.d).slice(i+1,i+15)+1==1e14&&(l=Ze(l,f+1,0));break}while(Du(l.d,i+=10,p));return lt=!0,Ze(l,f,p)};Be.minus=Be.sub=function(t){var e,r,n,i,a,o,s,l,h,c,f,p,g=this,b=g.constructor;if(t=new b(t),!g.d||!t.d)return!g.s||!t.s?t=new b(NaN):g.d?t.s=-t.s:t=new b(t.d||g.s!==t.s?g:NaN),t;if(g.s!=t.s)return t.s=-t.s,g.plus(t);if(h=g.d,p=t.d,s=b.precision,l=b.rounding,!h[0]||!p[0]){if(p[0])t.s=-t.s;else if(h[0])t=new b(g);else return new b(l===3?-0:0);return lt?Ze(t,s,l):t}if(r=zr(t.e/it),c=zr(g.e/it),h=h.slice(),a=c-r,a){for(f=a<0,f?(e=h,a=-a,o=p.length):(e=p,r=c,o=h.length),n=Math.max(Math.ceil(s/it),o)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=h.length,o=p.length,f=n<o,f&&(o=n),n=0;n<o;n++)if(h[n]!=p[n]){f=h[n]<p[n];break}a=0}for(f&&(e=h,h=p,p=e,t.s=-t.s),o=h.length,n=p.length-o;n>0;--n)h[o++]=0;for(n=p.length;n>a;){if(h[--n]<p[n]){for(i=n;i&&h[--i]===0;)h[i]=Rn-1;--h[i],h[n]+=Rn}h[n]-=p[n]}for(;h[--o]===0;)h.pop();for(;h[0]===0;h.shift())--r;return h[0]?(t.d=h,t.e=co(h,r),lt?Ze(t,s,l):t):new b(l===3?-0:0)};Be.modulo=Be.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?Ze(new n(r),n.precision,n.rounding):(lt=!1,n.modulo==9?(e=Lt(r,t.abs(),0,3,1),e.s*=t.s):e=Lt(r,t,0,n.modulo,1),e=e.times(t),lt=!0,r.minus(e))};Be.naturalExponential=Be.exp=function(){return Ac(this)};Be.naturalLogarithm=Be.ln=function(){return Mi(this)};Be.negated=Be.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Ze(t)};Be.plus=Be.add=function(t){var e,r,n,i,a,o,s,l,h,c,f=this,p=f.constructor;if(t=new p(t),!f.d||!t.d)return!f.s||!t.s?t=new p(NaN):f.d||(t=new p(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(h=f.d,c=t.d,s=p.precision,l=p.rounding,!h[0]||!c[0])return c[0]||(t=new p(f)),lt?Ze(t,s,l):t;if(a=zr(f.e/it),n=zr(t.e/it),h=h.slice(),i=a-n,i){for(i<0?(r=h,i=-i,o=c.length):(r=c,n=a,o=h.length),a=Math.ceil(s/it),o=a>o?a+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=h.length,i=c.length,o-i<0&&(i=o,r=c,c=h,h=r),e=0;i;)e=(h[--i]=h[i]+c[i]+e)/Rn|0,h[i]%=Rn;for(e&&(h.unshift(e),++n),o=h.length;h[--o]==0;)h.pop();return t.d=h,t.e=co(h,n),lt?Ze(t,s,l):t};Be.precision=Be.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(xi+t);return r.d?(e=f1(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};Be.round=function(){var t=this,e=t.constructor;return Ze(new e(t),t.e+1,e.rounding)};Be.sine=Be.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+it,n.rounding=1,r=nE(n,g1(n,r)),n.precision=t,n.rounding=e,Ze(di>2?r.neg():r,t,e,!0)):new n(NaN)};Be.squareRoot=Be.sqrt=function(){var t,e,r,n,i,a,o=this,s=o.d,l=o.e,h=o.s,c=o.constructor;if(h!==1||!s||!s[0])return new c(!h||h<0&&(!s||s[0])?NaN:s?o:1/0);for(lt=!1,h=Math.sqrt(+o),h==0||h==1/0?(e=Nr(s),(e.length+l)%2==0&&(e+="0"),h=Math.sqrt(e),l=zr((l+1)/2)-(l<0||l%2),h==1/0?e="5e"+l:(e=h.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new c(e)):n=new c(h.toString()),r=(l=c.precision)+3;;)if(a=n,n=a.plus(Lt(o,a,r+2,1)).times(.5),Nr(a.d).slice(0,r)===(e=Nr(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(Ze(a,l+1,0),a.times(a).eq(o))){n=a;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ze(n,l+1,1),t=!n.times(n).eq(o));break}return lt=!0,Ze(n,l,c.rounding,t)};Be.tangent=Be.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=Lt(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,Ze(di==2||di==4?r.neg():r,t,e,!0)):new n(NaN)};Be.times=Be.mul=function(t){var e,r,n,i,a,o,s,l,h,c=this,f=c.constructor,p=c.d,g=(t=new f(t)).d;if(t.s*=c.s,!p||!p[0]||!g||!g[0])return new f(!t.s||p&&!p[0]&&!g||g&&!g[0]&&!p?NaN:!p||!g?t.s/0:t.s*0);for(r=zr(c.e/it)+zr(t.e/it),l=p.length,h=g.length,l<h&&(a=p,p=g,g=a,o=l,l=h,h=o),a=[],o=l+h,n=o;n--;)a.push(0);for(n=h;--n>=0;){for(e=0,i=l+n;i>n;)s=a[i]+g[n]*p[i-n-1]+e,a[i--]=s%Rn|0,e=s/Rn|0;a[i]=(a[i]+e)%Rn|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=co(a,r),lt?Ze(t,f.precision,f.rounding):t};Be.toBinary=function(t,e){return $c(this,2,t,e)};Be.toDecimalPlaces=Be.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(an(t,0,Li),e===void 0?e=n.rounding:an(e,0,8),Ze(r,t+r.e+1,e))};Be.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Zn(n,!0):(an(t,0,Li),e===void 0?e=i.rounding:an(e,0,8),n=Ze(new i(n),t+1,e),r=Zn(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};Be.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?r=Zn(i):(an(t,0,Li),e===void 0?e=a.rounding:an(e,0,8),n=Ze(new a(i),t+i.e+1,e),r=Zn(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};Be.toFraction=function(t){var e,r,n,i,a,o,s,l,h,c,f,p,g=this,b=g.d,v=g.constructor;if(!b)return new v(g);if(h=r=new v(1),n=l=new v(0),e=new v(n),a=e.e=f1(b)-g.e-1,o=a%it,e.d[0]=_r(10,o<0?it+o:o),t==null)t=a>0?e:h;else{if(s=new v(t),!s.isInt()||s.lt(h))throw Error(xi+s);t=s.gt(e)?a>0?e:h:s}for(lt=!1,s=new v(Nr(b)),c=v.precision,v.precision=a=b.length*it*2;f=Lt(s,e,0,1,1),i=r.plus(f.times(n)),i.cmp(t)!=1;)r=n,n=i,i=h,h=l.plus(f.times(i)),l=i,i=e,e=s.minus(f.times(i)),s=i;return i=Lt(t.minus(r),n,0,1,1),l=l.plus(i.times(h)),r=r.plus(i.times(n)),l.s=h.s=g.s,p=Lt(h,n,a,1).minus(g).abs().cmp(Lt(l,r,a,1).minus(g).abs())<1?[h,n]:[l,r],v.precision=c,lt=!0,p};Be.toHexadecimal=Be.toHex=function(t,e){return $c(this,16,t,e)};Be.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:an(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(lt=!1,r=Lt(r,t,0,e,1).times(t),lt=!0,Ze(r)):(t.s=r.s,r=t),r};Be.toNumber=function(){return+this};Be.toOctal=function(t,e){return $c(this,8,t,e)};Be.toPower=Be.pow=function(t){var e,r,n,i,a,o,s=this,l=s.constructor,h=+(t=new l(t));if(!s.d||!t.d||!s.d[0]||!t.d[0])return new l(_r(+s,h));if(s=new l(s),s.eq(1))return s;if(n=l.precision,a=l.rounding,t.eq(1))return Ze(s,n,a);if(e=zr(t.e/it),e>=t.d.length-1&&(r=h<0?-h:h)<=Xy)return i=h1(l,s,r,n),t.s<0?new l(1).div(i):Ze(i,n,a);if(o=s.s,o<0){if(e<t.d.length-1)return new l(NaN);if(t.d[e]&1||(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return r=_r(+s,h),e=r==0||!isFinite(r)?zr(h*(Math.log("0."+Nr(s.d))/Math.LN10+s.e+1)):new l(r+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?o/0:0):(lt=!1,l.rounding=s.s=1,r=Math.min(12,(e+"").length),i=Ac(t.times(Mi(s,n+r)),n),i.d&&(i=Ze(i,n+5,1),Du(i.d,n,a)&&(e=n+10,i=Ze(Ac(t.times(Mi(s,e+r)),e),e+5,1),+Nr(i.d).slice(n+1,n+15)+1==1e14&&(i=Ze(i,n+1,0)))),i.s=o,lt=!0,l.rounding=a,Ze(i,n,a))};Be.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Zn(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(an(t,1,Li),e===void 0?e=i.rounding:an(e,0,8),n=Ze(new i(n),t,e),r=Zn(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};Be.toSignificantDigits=Be.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(an(t,1,Li),e===void 0?e=n.rounding:an(e,0,8)),Ze(new n(r),t,e)};Be.toString=function(){var t=this,e=t.constructor,r=Zn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};Be.truncated=Be.trunc=function(){return Ze(new this.constructor(this),this.e+1,1)};Be.valueOf=Be.toJSON=function(){var t=this,e=t.constructor,r=Zn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function Nr(t){var e,r,n,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)n=t[e]+"",r=it-n.length,r&&(a+=Bi(r)),a+=n;o=t[e],n=o+"",r=it-n.length,r&&(a+=Bi(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function an(t,e,r){if(t!==~~t||t<e||t>r)throw Error(xi+t)}function Du(t,e,r,n){var i,a,o,s;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=it,i=0):(i=Math.ceil((e+1)/it),e%=it),a=_r(10,it-e),s=t[i]%a|0,n==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=r<4&&s==99999||r>3&&s==49999||s==5e4||s==0):o=(r<4&&s+1==a||r>3&&s+1==a/2)&&(t[i+1]/a/100|0)==_r(10,e-2)-1||(s==a/2||s==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(n||r<4)&&s==9999||!n&&r>3&&s==4999):o=((n||r<4)&&s+1==a||!n&&r>3&&s+1==a/2)&&(t[i+1]/a/1e3|0)==_r(10,e-3)-1,o}function As(t,e,r){for(var n,i=[0],a,o=0,s=t.length;o<s;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=wc.indexOf(t.charAt(o++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function tE(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/fo(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=Oa(t,1,e.times(i),new t(1));for(var a=r;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=r,e}var Lt=function(){function t(n,i,a){var o,s=0,l=n.length;for(n=n.slice();l--;)o=n[l]*i+s,n[l]=o%a|0,s=o/a|0;return s&&n.unshift(s),n}function e(n,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(n[s]!=i[s]){l=n[s]>i[s]?1:-1;break}return l}function r(n,i,a,o){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*o+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o,s,l){var h,c,f,p,g,b,v,m,D,S,y,A,F,P,O,C,x,z,G,Z,R=n.constructor,N=n.s==i.s?1:-1,q=n.d,j=i.d;if(!q||!q[0]||!j||!j[0])return new R(!n.s||!i.s||(q?j&&q[0]==j[0]:!j)?NaN:q&&q[0]==0||!j?N*0:N/0);for(l?(g=1,c=n.e-i.e):(l=Rn,g=it,c=zr(n.e/g)-zr(i.e/g)),G=j.length,x=q.length,D=new R(N),S=D.d=[],f=0;j[f]==(q[f]||0);f++);if(j[f]>(q[f]||0)&&c--,a==null?(P=a=R.precision,o=R.rounding):s?P=a+(n.e-i.e)+1:P=a,P<0)S.push(1),b=!0;else{if(P=P/g+2|0,f=0,G==1){for(p=0,j=j[0],P++;(f<x||p)&&P--;f++)O=p*l+(q[f]||0),S[f]=O/j|0,p=O%j|0;b=p||f<x}else{for(p=l/(j[0]+1)|0,p>1&&(j=t(j,p,l),q=t(q,p,l),G=j.length,x=q.length),C=G,y=q.slice(0,G),A=y.length;A<G;)y[A++]=0;Z=j.slice(),Z.unshift(0),z=j[0],j[1]>=l/2&&++z;do p=0,h=e(j,y,G,A),h<0?(F=y[0],G!=A&&(F=F*l+(y[1]||0)),p=F/z|0,p>1?(p>=l&&(p=l-1),v=t(j,p,l),m=v.length,A=y.length,h=e(v,y,m,A),h==1&&(p--,r(v,G<m?Z:j,m,l))):(p==0&&(h=p=1),v=j.slice()),m=v.length,m<A&&v.unshift(0),r(y,v,A,l),h==-1&&(A=y.length,h=e(j,y,G,A),h<1&&(p++,r(y,G<A?Z:j,A,l))),A=y.length):h===0&&(p++,y=[0]),S[f++]=p,h&&y[0]?y[A++]=q[C]||0:(y=[q[C]],A=1);while((C++<x||y[0]!==void 0)&&P--);b=y[0]!==void 0}S[0]||S.shift()}if(g==1)D.e=c,u1=b;else{for(f=1,p=S[0];p>=10;p/=10)f++;D.e=f+c*g-1,Ze(D,s?a+D.e+1:a,o,b)}return D}}();function Ze(t,e,r,n){var i,a,o,s,l,h,c,f,p,g=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(i=1,s=f[0];s>=10;s/=10)i++;if(a=e-i,a<0)a+=it,o=e,c=f[p=0],l=c/_r(10,i-o-1)%10|0;else if(p=Math.ceil((a+1)/it),s=f.length,p>=s)if(n){for(;s++<=p;)f.push(0);c=l=0,i=1,a%=it,o=a-it+1}else break e;else{for(c=s=f[p],i=1;s>=10;s/=10)i++;a%=it,o=a-it+i,l=o<0?0:c/_r(10,i-o-1)%10|0}if(n=n||e<0||f[p+1]!==void 0||(o<0?c:c%_r(10,i-o-1)),h=r<4?(l||n)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||n||r==6&&(a>0?o>0?c/_r(10,i-o):0:f[p-1])%10&1||r==(t.s<0?8:7)),e<1||!f[0])return f.length=0,h?(e-=t.e+1,f[0]=_r(10,(it-e%it)%it),t.e=-e||0):f[0]=t.e=0,t;if(a==0?(f.length=p,s=1,p--):(f.length=p+1,s=_r(10,it-a),f[p]=o>0?(c/_r(10,i-o)%_r(10,o)|0)*s:0),h)for(;;)if(p==0){for(a=1,o=f[0];o>=10;o/=10)a++;for(o=f[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(t.e++,f[0]==Rn&&(f[0]=1));break}else{if(f[p]+=s,f[p]!=Rn)break;f[p--]=0,s=1}for(a=f.length;f[--a]===0;)f.pop()}return lt&&(t.e>g.maxE?(t.d=null,t.e=NaN):t.e<g.minE&&(t.e=0,t.d=[0])),t}function Zn(t,e,r){if(!t.isFinite())return p1(t);var n,i=t.e,a=Nr(t.d),o=a.length;return e?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+Bi(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+Bi(-i-1)+a,r&&(n=r-o)>0&&(a+=Bi(n))):i>=o?(a+=Bi(i+1-o),r&&(n=r-i-1)>0&&(a=a+"."+Bi(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(a+="."),a+=Bi(n))),a}function co(t,e){var r=t[0];for(e*=it;r>=10;r/=10)e++;return e}function Ns(t,e,r){if(e>eE)throw lt=!0,r&&(t.precision=r),Error(s1);return Ze(new t(Is),e,1,!0)}function Nn(t,e,r){if(e>Ec)throw Error(s1);return Ze(new t(xs),e,r,!0)}function f1(t){var e=t.length-1,r=e*it+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function Bi(t){for(var e="";t--;)e+="0";return e}function h1(t,e,r,n){var i,a=new t(1),o=Math.ceil(n/it+4);for(lt=!1;;){if(r%2&&(a=a.times(e),N0(a.d,o)&&(i=!0)),r=zr(r/2),r===0){r=a.d.length-1,i&&a.d[r]===0&&++a.d[r];break}e=e.times(e),N0(e.d,o)}return lt=!0,a}function x0(t){return t.d[t.d.length-1]&1}function d1(t,e,r){for(var n,i=new t(e[0]),a=0;++a<e.length;)if(n=new t(e[a]),n.s)i[r](n)&&(i=n);else{i=n;break}return i}function Ac(t,e){var r,n,i,a,o,s,l,h=0,c=0,f=0,p=t.constructor,g=p.rounding,b=p.precision;if(!t.d||!t.d[0]||t.e>17)return new p(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(lt=!1,l=b):l=e,s=new p(.03125);t.e>-2;)t=t.times(s),f+=5;for(n=Math.log(_r(2,f))/Math.LN10*2+5|0,l+=n,r=a=o=new p(1),p.precision=l;;){if(a=Ze(a.times(t),l,1),r=r.times(++c),s=o.plus(Lt(a,r,l,1)),Nr(s.d).slice(0,l)===Nr(o.d).slice(0,l)){for(i=f;i--;)o=Ze(o.times(o),l,1);if(e==null)if(h<3&&Du(o.d,l-n,g,h))p.precision=l+=10,r=a=s=new p(1),c=0,h++;else return Ze(o,p.precision=b,g,lt=!0);else return p.precision=b,o}o=s}}function Mi(t,e){var r,n,i,a,o,s,l,h,c,f,p,g=1,b=10,v=t,m=v.d,D=v.constructor,S=D.rounding,y=D.precision;if(v.s<0||!m||!m[0]||!v.e&&m[0]==1&&m.length==1)return new D(m&&!m[0]?-1/0:v.s!=1?NaN:m?0:v);if(e==null?(lt=!1,c=y):c=e,D.precision=c+=b,r=Nr(m),n=r.charAt(0),Math.abs(a=v.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(t),r=Nr(v.d),n=r.charAt(0),g++;a=v.e,n>1?(v=new D("0."+r),a++):v=new D(n+"."+r.slice(1))}else return h=Ns(D,c+2,y).times(a+""),v=Mi(new D(n+"."+r.slice(1)),c-b).plus(h),D.precision=y,e==null?Ze(v,y,S,lt=!0):v;for(f=v,l=o=v=Lt(v.minus(1),v.plus(1),c,1),p=Ze(v.times(v),c,1),i=3;;){if(o=Ze(o.times(p),c,1),h=l.plus(Lt(o,new D(i),c,1)),Nr(h.d).slice(0,c)===Nr(l.d).slice(0,c))if(l=l.times(2),a!==0&&(l=l.plus(Ns(D,c+2,y).times(a+""))),l=Lt(l,new D(g),c,1),e==null)if(Du(l.d,c-b,S,s))D.precision=c+=b,h=o=v=Lt(f.minus(1),f.plus(1),c,1),p=Ze(v.times(v),c,1),i=s=1;else return Ze(l,D.precision=y,S,lt=!0);else return D.precision=y,l;l=h,i+=2}}function p1(t){return String(t.s*t.s/0)}function Cc(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%it,r<0&&(n+=it),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=it;n<i;)t.d.push(+e.slice(n,n+=it));e=e.slice(n),n=it-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),lt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function rE(t,e){var r,n,i,a,o,s,l,h,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),c1.test(e))return Cc(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(Jy.test(e))r=16,e=e.toLowerCase();else if(Zy.test(e))r=2;else if(Qy.test(e))r=8;else throw Error(xi+e);for(a=e.search(/p/i),a>0?(l=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,n=t.constructor,o&&(e=e.replace(".",""),s=e.length,a=s-a,i=h1(n,new n(r),a,a*2)),h=As(e,r,Rn),c=h.length-1,a=c;h[a]===0;--a)h.pop();return a<0?new n(t.s*0):(t.e=co(h,c),t.d=h,lt=!1,o&&(t=Lt(t,i,s*4)),l&&(t=t.times(Math.abs(l)<54?_r(2,l):Ma.pow(2,l))),lt=!0,t)}function nE(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:Oa(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/fo(5,r)),e=Oa(t,2,e,e);for(var i,a=new t(5),o=new t(16),s=new t(20);r--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(s))));return e}function Oa(t,e,r,n,i){var a,o,s,l,h=t.precision,c=Math.ceil(h/it);for(lt=!1,l=r.times(r),s=new t(n);;){if(o=Lt(s.times(l),new t(e++*e++),h,1),s=i?n.plus(o):n.minus(o),n=Lt(o.times(l),new t(e++*e++),h,1),o=s.plus(n),o.d[c]!==void 0){for(a=c;o.d[a]===s.d[a]&&a--;);if(a==-1)break}a=s,s=n,n=o,o=a}return lt=!0,o.d.length=c+1,o}function fo(t,e){for(var r=t;--e;)r*=t;return r}function g1(t,e){var r,n=e.s<0,i=Nn(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return di=n?4:1,e;if(r=e.divToInt(i),r.isZero())di=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(a))return di=x0(r)?n?2:3:n?4:1,e;di=x0(r)?n?1:4:n?3:2}return e.minus(i).abs()}function $c(t,e,r,n){var i,a,o,s,l,h,c,f,p,g=t.constructor,b=r!==void 0;if(b?(an(r,1,Li),n===void 0?n=g.rounding:an(n,0,8)):(r=g.precision,n=g.rounding),!t.isFinite())c=p1(t);else{for(c=Zn(t),o=c.indexOf("."),b?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,o>=0&&(c=c.replace(".",""),p=new g(1),p.e=c.length-o,p.d=As(Zn(p),10,i),p.e=p.d.length),f=As(c,10,i),a=l=f.length;f[--l]==0;)f.pop();if(!f[0])c=b?"0p+0":"0";else{if(o<0?a--:(t=new g(t),t.d=f,t.e=a,t=Lt(t,p,r,n,0,i),f=t.d,a=t.e,h=u1),o=f[r],s=i/2,h=h||f[r+1]!==void 0,h=n<4?(o!==void 0||h)&&(n===0||n===(t.s<0?3:2)):o>s||o===s&&(n===4||h||n===6&&f[r-1]&1||n===(t.s<0?8:7)),f.length=r,h)for(;++f[--r]>i-1;)f[r]=0,r||(++a,f.unshift(1));for(l=f.length;!f[l-1];--l);for(o=0,c="";o<l;o++)c+=wc.charAt(f[o]);if(b){if(l>1)if(e==16||e==8){for(o=e==16?4:3,--l;l%o;l++)c+="0";for(f=As(c,i,e),l=f.length;!f[l-1];--l);for(o=1,c="1.";o<l;o++)c+=wc.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>l)for(a-=l;a--;)c+="0";else a<l&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function N0(t,e){if(t.length>e)return t.length=e,!0}function iE(t){return new this(t).abs()}function aE(t){return new this(t).acos()}function uE(t){return new this(t).acosh()}function sE(t,e){return new this(t).plus(e)}function oE(t){return new this(t).asin()}function lE(t){return new this(t).asinh()}function cE(t){return new this(t).atan()}function fE(t){return new this(t).atanh()}function hE(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,a=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=Nn(this,a,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?Nn(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=Nn(this,a,1).times(.5),r.s=t.s):e.s<0?(this.precision=a,this.rounding=1,r=this.atan(Lt(t,e,a,1)),e=Nn(this,a,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(Lt(t,e,a,1)),r}function dE(t){return new this(t).cbrt()}function pE(t){return Ze(t=new this(t),t.e+1,2)}function gE(t,e,r){return new this(t).clamp(e,r)}function vE(t){if(!t||typeof t!="object")throw Error(lo+"Object expected");var e,r,n,i=t.defaults===!0,a=["precision",1,Li,"rounding",0,8,"toExpNeg",-Ca,0,"toExpPos",0,Ca,"maxE",0,Ca,"minE",-Ca,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(r=a[e],i&&(this[r]=yc[r]),(n=t[r])!==void 0)if(zr(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(xi+r+": "+n);if(r="crypto",i&&(this[r]=yc[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(o1);else this[r]=!1;else throw Error(xi+r+": "+n);return this}function mE(t){return new this(t).cos()}function _E(t){return new this(t).cosh()}function v1(t){var e,r,n;function i(a){var o,s,l,h=this;if(!(h instanceof i))return new i(a);if(h.constructor=i,L0(a)){h.s=a.s,lt?!a.d||a.e>i.maxE?(h.e=NaN,h.d=null):a.e<i.minE?(h.e=0,h.d=[0]):(h.e=a.e,h.d=a.d.slice()):(h.e=a.e,h.d=a.d?a.d.slice():a.d);return}if(l=typeof a,l==="number"){if(a===0){h.s=1/a<0?-1:1,h.e=0,h.d=[0];return}if(a<0?(a=-a,h.s=-1):h.s=1,a===~~a&&a<1e7){for(o=0,s=a;s>=10;s/=10)o++;lt?o>i.maxE?(h.e=NaN,h.d=null):o<i.minE?(h.e=0,h.d=[0]):(h.e=o,h.d=[a]):(h.e=o,h.d=[a]);return}else if(a*0!==0){a||(h.s=NaN),h.e=NaN,h.d=null;return}return Cc(h,a.toString())}else if(l!=="string")throw Error(xi+a);return(s=a.charCodeAt(0))===45?(a=a.slice(1),h.s=-1):(s===43&&(a=a.slice(1)),h.s=1),c1.test(a)?Cc(h,a):rE(h,a)}if(i.prototype=Be,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=vE,i.clone=v1,i.isDecimal=L0,i.abs=iE,i.acos=aE,i.acosh=uE,i.add=sE,i.asin=oE,i.asinh=lE,i.atan=cE,i.atanh=fE,i.atan2=hE,i.cbrt=dE,i.ceil=pE,i.clamp=gE,i.cos=mE,i.cosh=_E,i.div=bE,i.exp=DE,i.floor=wE,i.hypot=yE,i.ln=EE,i.log=AE,i.log10=FE,i.log2=CE,i.max=SE,i.min=BE,i.mod=OE,i.mul=ME,i.pow=PE,i.random=kE,i.round=TE,i.sign=IE,i.sin=xE,i.sinh=NE,i.sqrt=LE,i.sub=RE,i.sum=UE,i.tan=VE,i.tanh=jE,i.trunc=zE,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function bE(t,e){return new this(t).div(e)}function DE(t){return new this(t).exp()}function wE(t){return Ze(t=new this(t),t.e+1,3)}function yE(){var t,e,r=new this(0);for(lt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return lt=!0,new this(1/0);r=e}return lt=!0,r.sqrt()}function L0(t){return t instanceof Ma||t&&t.toStringTag===l1||!1}function EE(t){return new this(t).ln()}function AE(t,e){return new this(t).log(e)}function CE(t){return new this(t).log(2)}function FE(t){return new this(t).log(10)}function SE(){return d1(this,arguments,"lt")}function BE(){return d1(this,arguments,"gt")}function OE(t,e){return new this(t).mod(e)}function ME(t,e){return new this(t).mul(e)}function PE(t,e){return new this(t).pow(e)}function kE(t){var e,r,n,i,a=0,o=new this(1),s=[];if(t===void 0?t=this.precision:an(t,1,Li),n=Math.ceil(t/it),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(s.push(i%1e7),a+=4);a=n/4}else throw Error(o1);else for(;a<n;)s[a++]=Math.random()*1e7|0;for(n=s[--a],t%=it,n&&t&&(i=_r(10,it-t),s[a]=(n/i|0)*i);s[a]===0;a--)s.pop();if(a<0)r=0,s=[0];else{for(r=-1;s[0]===0;r-=it)s.shift();for(n=1,i=s[0];i>=10;i/=10)n++;n<it&&(r-=it-n)}return o.e=r,o.d=s,o}function TE(t){return Ze(t=new this(t),t.e+1,this.rounding)}function IE(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function xE(t){return new this(t).sin()}function NE(t){return new this(t).sinh()}function LE(t){return new this(t).sqrt()}function RE(t,e){return new this(t).sub(e)}function UE(){var t=0,e=arguments,r=new this(e[t]);for(lt=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return lt=!0,Ze(r,this.precision,this.rounding)}function VE(t){return new this(t).tan()}function jE(t){return new this(t).tanh()}function zE(t){return Ze(t=new this(t),t.e+1,1)}Be[Symbol.for("nodejs.util.inspect.custom")]=Be.toString;Be[Symbol.toStringTag]="Decimal";var Ma=Be.constructor=v1(yc);Is=new Ma(Is);xs=new Ma(xs);var qE="BigNumber",WE=["?on","config"],HE=Ft(qE,WE,t=>{var{on:e,config:r}=t,n=Ma.clone({precision:r.precision,modulo:Ma.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&n.config({precision:i.precision})}),n},{isClass:!0}),dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fc={},$E={get exports(){return Fc},set exports(t){Fc=t}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=Math.cosh||function(f){return Math.abs(f)<1e-9?1-f:(Math.exp(f)+Math.exp(-f))*.5},i=Math.sinh||function(f){return Math.abs(f)<1e-9?f:(Math.exp(f)-Math.exp(-f))*.5},a=function(f){var p=Math.PI/4;if(-p>f||f>p)return Math.cos(f)-1;var g=f*f;return g*(g*(g*(g*(g*(g*(g*(g/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(f,p){var g=Math.abs(f),b=Math.abs(p);return g<3e3&&b<3e3?Math.sqrt(g*g+b*b):(g<b?(g=b,b=f/p):b=p/f,g*Math.sqrt(1+b*b))},s=function(){throw SyntaxError("Invalid Param")};function l(f,p){var g=Math.abs(f),b=Math.abs(p);return f===0?Math.log(b):p===0?Math.log(g):g<3e3&&b<3e3?Math.log(f*f+p*p)*.5:(f=f/2,p=p/2,.5*Math.log(f*f+p*p)+Math.LN2)}var h=function(f,p){var g={re:0,im:0};if(f==null)g.re=g.im=0;else if(p!==void 0)g.re=f,g.im=p;else switch(typeof f){case"object":if("im"in f&&"re"in f)g.re=f.re,g.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return c.INFINITY;g.re=f.abs*Math.cos(f.arg),g.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return c.INFINITY;g.re=f.r*Math.cos(f.phi),g.im=f.r*Math.sin(f.phi)}else f.length===2?(g.re=f[0],g.im=f[1]):s();break;case"string":g.im=g.re=0;var b=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,m=0;b===null&&s();for(var D=0;D<b.length;D++){var S=b[D];S===" "||S==="	"||S===`
`||(S==="+"?v++:S==="-"?m++:S==="i"||S==="I"?(v+m===0&&s(),b[D+1]!==" "&&!isNaN(b[D+1])?(g.im+=parseFloat((m%2?"-":"")+b[D+1]),D++):g.im+=parseFloat((m%2?"-":"")+"1"),v=m=0):((v+m===0||isNaN(S))&&s(),b[D+1]==="i"||b[D+1]==="I"?(g.im+=parseFloat((m%2?"-":"")+S),D++):g.re+=parseFloat((m%2?"-":"")+S),v=m=0))}v+m>0&&s();break;case"number":g.im=0,g.re=f;break;default:s()}return isNaN(g.re)||isNaN(g.im),g};function c(f,p){if(!(this instanceof c))return new c(f,p);var g=h(f,p);this.re=g.re,this.im=g.im}c.prototype={re:0,im:0,sign:function(){var f=this.abs();return new c(this.re/f,this.im/f)},add:function(f,p){var g=new c(f,p);return this.isInfinite()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:new c(this.re+g.re,this.im+g.im)},sub:function(f,p){var g=new c(f,p);return this.isInfinite()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:new c(this.re-g.re,this.im-g.im)},mul:function(f,p){var g=new c(f,p);return this.isInfinite()&&g.isZero()||this.isZero()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:g.im===0&&this.im===0?new c(this.re*g.re,0):new c(this.re*g.re-this.im*g.im,this.re*g.im+this.im*g.re)},div:function(f,p){var g=new c(f,p);if(this.isZero()&&g.isZero()||this.isInfinite()&&g.isInfinite())return c.NAN;if(this.isInfinite()||g.isZero())return c.INFINITY;if(this.isZero()||g.isInfinite())return c.ZERO;f=this.re,p=this.im;var b=g.re,v=g.im,m,D;return v===0?new c(f/b,p/b):Math.abs(b)<Math.abs(v)?(D=b/v,m=b*D+v,new c((f*D+p)/m,(p*D-f)/m)):(D=v/b,m=v*D+b,new c((f+p*D)/m,(p-f*D)/m))},pow:function(f,p){var g=new c(f,p);if(f=this.re,p=this.im,g.isZero())return c.ONE;if(g.im===0){if(p===0&&f>0)return new c(Math.pow(f,g.re),0);if(f===0)switch((g.re%4+4)%4){case 0:return new c(Math.pow(p,g.re),0);case 1:return new c(0,Math.pow(p,g.re));case 2:return new c(-Math.pow(p,g.re),0);case 3:return new c(0,-Math.pow(p,g.re))}}if(f===0&&p===0&&g.re>0&&g.im>=0)return c.ZERO;var b=Math.atan2(p,f),v=l(f,p);return f=Math.exp(g.re*v-g.im*b),p=g.im*v+g.re*b,new c(f*Math.cos(p),f*Math.sin(p))},sqrt:function(){var f=this.re,p=this.im,g=this.abs(),b,v;if(f>=0){if(p===0)return new c(Math.sqrt(f),0);b=.5*Math.sqrt(2*(g+f))}else b=Math.abs(p)/Math.sqrt(2*(g-f));return f<=0?v=.5*Math.sqrt(2*(g-f)):v=Math.abs(p)/Math.sqrt(2*(g+f)),new c(b,p<0?-v:v)},exp:function(){var f=Math.exp(this.re);return this.im,new c(f*Math.cos(this.im),f*Math.sin(this.im))},expm1:function(){var f=this.re,p=this.im;return new c(Math.expm1(f)*Math.cos(p)+a(p),Math.exp(f)*Math.sin(p))},log:function(){var f=this.re,p=this.im;return new c(l(f,p),Math.atan2(p,f))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var f=this.re,p=this.im;return new c(Math.sin(f)*n(p),Math.cos(f)*i(p))},cos:function(){var f=this.re,p=this.im;return new c(Math.cos(f)*n(p),-Math.sin(f)*i(p))},tan:function(){var f=2*this.re,p=2*this.im,g=Math.cos(f)+n(p);return new c(Math.sin(f)/g,i(p)/g)},cot:function(){var f=2*this.re,p=2*this.im,g=Math.cos(f)-n(p);return new c(-Math.sin(f)/g,i(p)/g)},sec:function(){var f=this.re,p=this.im,g=.5*n(2*p)+.5*Math.cos(2*f);return new c(Math.cos(f)*n(p)/g,Math.sin(f)*i(p)/g)},csc:function(){var f=this.re,p=this.im,g=.5*n(2*p)-.5*Math.cos(2*f);return new c(Math.sin(f)*n(p)/g,-Math.cos(f)*i(p)/g)},asin:function(){var f=this.re,p=this.im,g=new c(p*p-f*f+1,-2*f*p).sqrt(),b=new c(g.re-p,g.im+f).log();return new c(b.im,-b.re)},acos:function(){var f=this.re,p=this.im,g=new c(p*p-f*f+1,-2*f*p).sqrt(),b=new c(g.re-p,g.im+f).log();return new c(Math.PI/2-b.im,b.re)},atan:function(){var f=this.re,p=this.im;if(f===0){if(p===1)return new c(0,1/0);if(p===-1)return new c(0,-1/0)}var g=f*f+(1-p)*(1-p),b=new c((1-p*p-f*f)/g,-2*f/g).log();return new c(-.5*b.im,.5*b.re)},acot:function(){var f=this.re,p=this.im;if(p===0)return new c(Math.atan2(1,f),0);var g=f*f+p*p;return g!==0?new c(f/g,-p/g).atan():new c(f!==0?f/0:0,p!==0?-p/0:0).atan()},asec:function(){var f=this.re,p=this.im;if(f===0&&p===0)return new c(0,1/0);var g=f*f+p*p;return g!==0?new c(f/g,-p/g).acos():new c(f!==0?f/0:0,p!==0?-p/0:0).acos()},acsc:function(){var f=this.re,p=this.im;if(f===0&&p===0)return new c(Math.PI/2,1/0);var g=f*f+p*p;return g!==0?new c(f/g,-p/g).asin():new c(f!==0?f/0:0,p!==0?-p/0:0).asin()},sinh:function(){var f=this.re,p=this.im;return new c(i(f)*Math.cos(p),n(f)*Math.sin(p))},cosh:function(){var f=this.re,p=this.im;return new c(n(f)*Math.cos(p),i(f)*Math.sin(p))},tanh:function(){var f=2*this.re,p=2*this.im,g=n(f)+Math.cos(p);return new c(i(f)/g,Math.sin(p)/g)},coth:function(){var f=2*this.re,p=2*this.im,g=n(f)-Math.cos(p);return new c(i(f)/g,-Math.sin(p)/g)},csch:function(){var f=this.re,p=this.im,g=Math.cos(2*p)-n(2*f);return new c(-2*i(f)*Math.cos(p)/g,2*n(f)*Math.sin(p)/g)},sech:function(){var f=this.re,p=this.im,g=Math.cos(2*p)+n(2*f);return new c(2*n(f)*Math.cos(p)/g,-2*i(f)*Math.sin(p)/g)},asinh:function(){var f=this.im;this.im=-this.re,this.re=f;var p=this.asin();return this.re=-this.im,this.im=f,f=p.re,p.re=-p.im,p.im=f,p},acosh:function(){var f=this.acos();if(f.im<=0){var p=f.re;f.re=-f.im,f.im=p}else{var p=f.im;f.im=-f.re,f.re=p}return f},atanh:function(){var f=this.re,p=this.im,g=f>1&&p===0,b=1-f,v=1+f,m=b*b+p*p,D=m!==0?new c((v*b-p*p)/m,(p*b+v*p)/m):new c(f!==-1?f/0:0,p!==0?p/0:0),S=D.re;return D.re=l(D.re,D.im)/2,D.im=Math.atan2(D.im,S)/2,g&&(D.im=-D.im),D},acoth:function(){var f=this.re,p=this.im;if(f===0&&p===0)return new c(0,Math.PI/2);var g=f*f+p*p;return g!==0?new c(f/g,-p/g).atanh():new c(f!==0?f/0:0,p!==0?-p/0:0).atanh()},acsch:function(){var f=this.re,p=this.im;if(p===0)return new c(f!==0?Math.log(f+Math.sqrt(f*f+1)):1/0,0);var g=f*f+p*p;return g!==0?new c(f/g,-p/g).asinh():new c(f!==0?f/0:0,p!==0?-p/0:0).asinh()},asech:function(){var f=this.re,p=this.im;if(this.isZero())return c.INFINITY;var g=f*f+p*p;return g!==0?new c(f/g,-p/g).acosh():new c(f!==0?f/0:0,p!==0?-p/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var f=this.re,p=this.im,g=f*f+p*p;return new c(f/g,-p/g)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(f){return f=Math.pow(10,f||0),new c(Math.ceil(this.re*f)/f,Math.ceil(this.im*f)/f)},floor:function(f){return f=Math.pow(10,f||0),new c(Math.floor(this.re*f)/f,Math.floor(this.im*f)/f)},round:function(f){return f=Math.pow(10,f||0),new c(Math.round(this.re*f)/f,Math.round(this.im*f)/f)},equals:function(f,p){var g=new c(f,p);return Math.abs(g.re-this.re)<=c.EPSILON&&Math.abs(g.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var f=this.re,p=this.im,g="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(f)<c.EPSILON&&(f=0),Math.abs(p)<c.EPSILON&&(p=0),p===0?g+f:(f!==0?(g+=f,g+=" ",p<0?(p=-p,g+="-"):g+="+",g+=" "):p<0&&(p=-p,g+="-"),p!==1&&(g+=p),g+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,t.exports=c})()})($E);const Mr=Gc(Fc);var GE="Complex",KE=[],YE=Ft(GE,KE,()=>(Object.defineProperty(Mr,"name",{value:"Complex"}),Mr.prototype.constructor=Mr,Mr.prototype.type="Complex",Mr.prototype.isComplex=!0,Mr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Mr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Mr.prototype.format=function(t){var e="",r=this.im,n=this.re,i=bc(this.re,t),a=bc(this.im,t),o=tr(t)?t:t?t.precision:null;if(o!==null){var s=Math.pow(10,-o);Math.abs(n/r)<s&&(n=0),Math.abs(r/n)<s&&(r=0)}return r===0?e=i:n===0?r===1?e="i":r===-1?e="-i":e=a+"i":r<0?r===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+a+"i",e},Mr.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Mr(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(tr(r)){if(Yp(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),tr(n))return new Mr({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Mr.prototype.valueOf=Mr.prototype.toString,Mr.fromJSON=function(t){return new Mr(t)},Mr.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Mr),{isClass:!0}),Sc={},ZE={get exports(){return Sc},set exports(t){Sc=t}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=2e3,i={s:1,n:0,d:1};function a(b,v){if(isNaN(b=parseInt(b,10)))throw g.InvalidParameter;return b*v}function o(b,v){if(v===0)throw g.DivisionByZero;var m=Object.create(g.prototype);m.s=b<0?-1:1,b=b<0?-b:b;var D=p(b,v);return m.n=b/D,m.d=v/D,m}function s(b){for(var v={},m=b,D=2,S=4;S<=m;){for(;m%D===0;)m/=D,v[D]=(v[D]||0)+1;S+=1+2*D++}return m!==b?m>1&&(v[m]=(v[m]||0)+1):v[b]=(v[b]||0)+1,v}var l=function(b,v){var m=0,D=1,S=1,y=0,A=0,F=0,P=1,O=1,C=0,x=1,z=1,G=1,Z=1e7,R;if(b!=null)if(v!==void 0){if(m=b,D=v,S=m*D,m%1!==0||D%1!==0)throw g.NonIntegerParameter}else switch(typeof b){case"object":{if("d"in b&&"n"in b)m=b.n,D=b.d,"s"in b&&(m*=b.s);else if(0 in b)m=b[0],1 in b&&(D=b[1]);else throw g.InvalidParameter;S=m*D;break}case"number":{if(b<0&&(S=b,b=-b),b%1===0)m=b;else if(b>0){for(b>=1&&(O=Math.pow(10,Math.floor(1+Math.log(b)/Math.LN10)),b/=O);x<=Z&&G<=Z;)if(R=(C+z)/(x+G),b===R){x+G<=Z?(m=C+z,D=x+G):G>x?(m=z,D=G):(m=C,D=x);break}else b>R?(C+=z,x+=G):(z+=C,G+=x),x>Z?(m=z,D=G):(m=C,D=x);m*=O}else(isNaN(b)||isNaN(v))&&(D=m=NaN);break}case"string":{if(x=b.match(/\d+|./g),x===null)throw g.InvalidParameter;if(x[C]==="-"?(S=-1,C++):x[C]==="+"&&C++,x.length===C+1?A=a(x[C++],S):x[C+1]==="."||x[C]==="."?(x[C]!=="."&&(y=a(x[C++],S)),C++,(C+1===x.length||x[C+1]==="("&&x[C+3]===")"||x[C+1]==="'"&&x[C+3]==="'")&&(A=a(x[C],S),P=Math.pow(10,x[C].length),C++),(x[C]==="("&&x[C+2]===")"||x[C]==="'"&&x[C+2]==="'")&&(F=a(x[C+1],S),O=Math.pow(10,x[C+1].length)-1,C+=3)):x[C+1]==="/"||x[C+1]===":"?(A=a(x[C],S),P=a(x[C+2],1),C+=3):x[C+3]==="/"&&x[C+1]===" "&&(y=a(x[C],S),A=a(x[C+2],S),P=a(x[C+4],1),C+=5),x.length<=C){D=P*O,S=m=F+D*y+O*A;break}}default:throw g.InvalidParameter}if(D===0)throw g.DivisionByZero;i.s=S<0?-1:1,i.n=Math.abs(m),i.d=Math.abs(D)};function h(b,v,m){for(var D=1;v>0;b=b*b%m,v>>=1)v&1&&(D=D*b%m);return D}function c(b,v){for(;v%2===0;v/=2);for(;v%5===0;v/=5);if(v===1)return 0;for(var m=10%v,D=1;m!==1;D++)if(m=m*10%v,D>n)return 0;return D}function f(b,v,m){for(var D=1,S=h(10,m,v),y=0;y<300;y++){if(D===S)return y;D=D*10%v,S=S*10%v}return 0}function p(b,v){if(!b)return v;if(!v)return b;for(;;){if(b%=v,!b)return v;if(v%=b,!v)return b}}function g(b,v){if(l(b,v),this instanceof g)b=p(i.d,i.n),this.s=i.s,this.n=i.n/b,this.d=i.d/b;else return o(i.s*i.n,i.d)}g.DivisionByZero=new Error("Division by Zero"),g.InvalidParameter=new Error("Invalid argument"),g.NonIntegerParameter=new Error("Parameters must be integer"),g.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(b,v){return l(b,v),o(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(b,v){return l(b,v),o(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(b,v){return l(b,v),o(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(b,v){return l(b,v),o(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(b,v){if(isNaN(this.n)||isNaN(this.d))return new g(NaN);if(b===void 0)return o(this.s*this.n%this.d,1);if(l(b,v),i.n===0&&this.d===0)throw g.DivisionByZero;return o(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(b,v){return l(b,v),o(p(i.n,this.n)*p(i.d,this.d),i.d*this.d)},lcm:function(b,v){return l(b,v),i.n===0&&this.n===0?o(0,1):o(i.n*this.n,p(i.n,this.n)*p(i.d,this.d))},ceil:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.ceil(b*this.s*this.n/this.d),b)},floor:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.floor(b*this.s*this.n/this.d),b)},round:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.round(b*this.s*this.n/this.d),b)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(b,v){if(l(b,v),i.d===1)return i.s<0?o(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):o(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var m=s(this.n),D=s(this.d),S=1,y=1;for(var A in m)if(A!=="1"){if(A==="0"){S=0;break}if(m[A]*=i.n,m[A]%i.d===0)m[A]/=i.d;else return null;S*=Math.pow(A,m[A])}for(var A in D)if(A!=="1"){if(D[A]*=i.n,D[A]%i.d===0)D[A]/=i.d;else return null;y*=Math.pow(A,D[A])}return i.s<0?o(y,S):o(S,y)},equals:function(b,v){return l(b,v),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(b,v){l(b,v);var m=this.s*this.n*i.d-i.s*i.n*this.d;return(0<m)-(m<0)},simplify:function(b){if(isNaN(this.n)||isNaN(this.d))return this;b=b||.001;for(var v=this.abs(),m=v.toContinued(),D=1;D<m.length;D++){for(var S=o(m[D-1],1),y=D-2;y>=0;y--)S=S.inverse().add(m[y]);if(S.sub(v).abs().valueOf()<b)return S.mul(this.s)}return this},divisible:function(b,v){return l(b,v),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(b){var v,m="",D=this.n,S=this.d;return this.s<0&&(m+="-"),S===1?m+=D:(b&&(v=Math.floor(D/S))>0&&(m+=v,m+=" ",D%=S),m+=D,m+="/",m+=S),m},toLatex:function(b){var v,m="",D=this.n,S=this.d;return this.s<0&&(m+="-"),S===1?m+=D:(b&&(v=Math.floor(D/S))>0&&(m+=v,D%=S),m+="\\frac{",m+=D,m+="}{",m+=S,m+="}"),m},toContinued:function(){var b,v=this.n,m=this.d,D=[];if(isNaN(v)||isNaN(m))return D;do D.push(Math.floor(v/m)),b=v%m,v=m,m=b;while(v!==1);return D},toString:function(b){var v=this.n,m=this.d;if(isNaN(v)||isNaN(m))return"NaN";b=b||15;var D=c(v,m),S=f(v,m,D),y=this.s<0?"-":"";if(y+=v/m|0,v%=m,v*=10,v&&(y+="."),D){for(var A=S;A--;)y+=v/m|0,v%=m,v*=10;y+="(";for(var A=D;A--;)y+=v/m|0,v%=m,v*=10;y+=")"}else for(var A=b;v&&A--;)y+=v/m|0,v%=m,v*=10;return y}},Object.defineProperty(g,"__esModule",{value:!0}),g.default=g,g.Fraction=g,t.exports=g})()})(ZE);const fi=Gc(Sc);var JE="Fraction",QE=[],XE=Ft(JE,QE,()=>(Object.defineProperty(fi,"name",{value:"Fraction"}),fi.prototype.constructor=fi,fi.prototype.type="Fraction",fi.prototype.isFraction=!0,fi.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},fi.fromJSON=function(t){return new fi(t)},fi),{isClass:!0}),eA="Matrix",tA=[],rA=Ft(eA,tA,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function m1(t){return Object.keys(t.signatures||{}).reduce(function(e,r){var n=(r.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var nA="DenseMatrix",iA=["Matrix"],aA=Ft(nA,iA,t=>{var{Matrix:e}=t;function r(c,f){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Gn(f))throw new Error("Invalid datatype: "+f);if(Yr(c))c.type==="DenseMatrix"?(this._data=Ar(c._data),this._size=Ar(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&Xt(c.data)&&Xt(c.size))this._data=c.data,this._size=c.size,T0(this._data,this._size),this._datatype=f||c.datatype;else if(Xt(c))this._data=h(c),this._size=Ii(this._data),T0(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+mu(c)+")");this._data=[],this._size=[0],this._datatype=f}}r.prototype=new e,r.prototype.createDenseMatrix=function(c,f){return new r(c,f)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return Ts(this._data,mu)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(c,f){return new r(c,f)},r.prototype.subset=function(c,f,p){switch(arguments.length){case 1:return n(this,c);case 2:case 3:return a(this,c,f,p);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(c){if(!Xt(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new kt(c.length,this._size.length);for(var f=0;f<c.length;f++)er(c[f],this._size[f]);for(var p=this._data,g=0,b=c.length;g<b;g++){var v=c[g];er(v,p.length),p=p[v]}return p},r.prototype.set=function(c,f,p){if(!Xt(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new kt(c.length,this._size.length,"<");var g,b,v,m=c.map(function(S){return S+1});l(this,m,p);var D=this._data;for(g=0,b=c.length-1;g<b;g++)v=c[g],er(v,D.length),D=D[v];return v=c[c.length-1],er(v,D.length),D[v]=f,this};function n(c,f){if(!qc(f))throw new TypeError("Invalid index");var p=f.isScalar();if(p)return c.get(f.min());var g=f.size();if(g.length!==c._size.length)throw new kt(g.length,c._size.length);for(var b=f.min(),v=f.max(),m=0,D=c._size.length;m<D;m++)er(b[m],c._size[m]),er(v[m],c._size[m]);return new r(i(c._data,f,g.length,0),c._datatype)}function i(c,f,p,g){var b=g===p-1,v=f.dimension(g);return b?v.map(function(m){return er(m,c.length),c[m]}).valueOf():v.map(function(m){er(m,c.length);var D=c[m];return i(D,f,p,g+1)}).valueOf()}function a(c,f,p,g){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var b=f.size(),v=f.isScalar(),m;if(Yr(p)?(m=p.size(),p=p.valueOf()):m=Ii(p),v){if(m.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),p,g)}else{if(b.length<c._size.length)throw new kt(b.length,c._size.length,"<");if(m.length<b.length){for(var D=0,S=0;b[D]===1&&m[D]===1;)D++;for(;b[D]===1;)S++,D++;p=t1(p,b.length,S,m)}if(!Ps(b,m))throw new kt(b,m,">");var y=f.max().map(function(P){return P+1});l(c,y,g);var A=b.length,F=0;o(c._data,f,p,A,F)}return c}function o(c,f,p,g,b){var v=b===g-1,m=f.dimension(b);v?m.forEach(function(D,S){er(D),c[D]=p[S[0]]}):m.forEach(function(D,S){er(D),o(c[D],f,p[S[0]],g,b+1)})}r.prototype.resize=function(c,f,p){if(!Ms(c))throw new TypeError("Array or Matrix expected");var g=c.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),b=p?this.clone():this;return s(b,g,f)};function s(c,f,p){if(f.length===0){for(var g=c._data;Xt(g);)g=g[0];return g}return c._size=f.slice(0),c._data=I0(c._data,c._size,p),c}r.prototype.reshape=function(c,f){var p=f?this.clone():this;p._data=Ty(p._data,c);var g=p._size.reduce((b,v)=>b*v);return p._size=Hc(c,g),p};function l(c,f,p){for(var g=c._size.slice(0),b=!1;g.length<f.length;)g.push(0),b=!0;for(var v=0,m=f.length;v<m;v++)f[v]>g[v]&&(g[v]=f[v],b=!0);b&&s(c,g,p)}r.prototype.clone=function(){var c=new r({data:Ar(this._data),size:Ar(this._size),datatype:this._datatype});return c},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(c){var f=this,p=m1(c),g=function m(D,S){return Xt(D)?D.map(function(y,A){return m(y,S.concat(A))}):p===1?c(D):p===2?c(D,S):c(D,S,f)},b=g(this._data,[]),v=this._datatype!==void 0?Ts(b,mu):void 0;return new r(b,v)},r.prototype.forEach=function(c){var f=this,p=function g(b,v){Xt(b)?b.forEach(function(m,D){g(m,v.concat(D))}):c(b,v,f)};p(this._data,[])},r.prototype[Symbol.iterator]=function*(){var c=function*f(p,g){if(Xt(p))for(var b=0;b<p.length;b++)yield*f(p[b],g.concat(b));else yield{value:p,index:g}};yield*c(this._data,[])},r.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var p=this._data;for(var g of p)c.push(new r([g],this._datatype));return c},r.prototype.columns=function(){var c=this,f=[],p=this.size();if(p.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var g=this._data,b=function(D){var S=g.map(y=>[y[D]]);f.push(new r(S,c._datatype))},v=0;v<p[1];v++)b(v);return f},r.prototype.toArray=function(){return Ar(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(c){return rn(this._data,c)},r.prototype.toString=function(){return rn(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(c){if(c){if(Sn(c)&&(c=c.toNumber()),!tr(c)||!Cr(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,p=c<0?-c:0,g=this._size[0],b=this._size[1],v=Math.min(g-p,b-f),m=[],D=0;D<v;D++)m[D]=this._data[D+p][D+f];return new r({data:m,size:[v],datatype:this._datatype})},r.diagonal=function(c,f,p,g){if(!Xt(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(O){if(Sn(O)&&(O=O.toNumber()),!tr(O)||!Cr(O)||O<1)throw new Error("Size values must be positive integers");return O}),p){if(Sn(p)&&(p=p.toNumber()),!tr(p)||!Cr(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var b=p>0?p:0,v=p<0?-p:0,m=c[0],D=c[1],S=Math.min(m-v,D-b),y;if(Xt(f)){if(f.length!==S)throw new Error("Invalid value array length");y=function(C){return f[C]}}else if(Yr(f)){var A=f.size();if(A.length!==1||A[0]!==S)throw new Error("Invalid matrix length");y=function(C){return f.get([C])}}else y=function(){return f};g||(g=Sn(y(0))?y(0).mul(0):0);var F=[];if(c.length>0){F=I0(F,c,g);for(var P=0;P<S;P++)F[P+v][P+b]=y(P)}return new r({data:F,size:[m,D]})},r.fromJSON=function(c){return new r(c)},r.prototype.swapRows=function(c,f){if(!tr(c)||!Cr(c)||!tr(f)||!Cr(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return er(c,this._size[0]),er(f,this._size[0]),r._swapRows(c,f,this._data),this},r._swapRows=function(c,f,p){var g=p[c];p[c]=p[f],p[f]=g};function h(c){for(var f=0,p=c.length;f<p;f++){var g=c[f];Xt(g)?c[f]=h(g):g&&g.isMatrix===!0&&(c[f]=h(g.valueOf()))}return c}return r},{isClass:!0});function ho(t,e,r){return t&&typeof t.map=="function"?t.map(function(n){return ho(n,e)}):e(t)}var R0="isInteger",uA=["typed"],sA=Ft(R0,uA,t=>{var{typed:e}=t;return e(R0,{number:Cr,BigNumber:function(n){return n.isInt()},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":e.referToSelf(r=>n=>ho(n,r))})}),oA="number",_1="number, number";function b1(t,e){return t+e}b1.signature=_1;function D1(t,e){return t*e}D1.signature=_1;function w1(t){return-t}w1.signature=oA;function lA(t,e,r){if(r==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return n.lte(i.times(r))}return!1}function cA(t,e,r){return ks(t.re,e.re,r)&&ks(t.im,e.im,r)}var fA=Ft("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),Ls="equalScalar",hA=["typed","config"],dA=Ft(Ls,hA,t=>{var{typed:e,config:r}=t,n=fA({typed:e});return e(Ls,{"boolean, boolean":function(a,o){return a===o},"number, number":function(a,o){return ks(a,o,r.epsilon)},"BigNumber, BigNumber":function(a,o){return a.eq(o)||lA(a,o,r.epsilon)},"Fraction, Fraction":function(a,o){return a.equals(o)},"Complex, Complex":function(a,o){return cA(a,o,r.epsilon)}},n)});Ft(Ls,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Ls,{"number, number":function(i,a){return ks(i,a,r.epsilon)}})});var pA="SparseMatrix",gA=["typed","equalScalar","Matrix"],vA=Ft(pA,gA,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(v,m){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!Gn(m))throw new Error("Invalid datatype: "+m);if(Yr(v))a(this,v,m);else if(v&&Xt(v.index)&&Xt(v.ptr)&&Xt(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=m||v.datatype;else if(Xt(v))o(this,v,m);else{if(v)throw new TypeError("Unsupported type of data ("+mu(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function a(v,m,D){m.type==="SparseMatrix"?(v._values=m._values?Ar(m._values):void 0,v._index=Ar(m._index),v._ptr=Ar(m._ptr),v._size=Ar(m._size),v._datatype=D||m._datatype):o(v,m.valueOf(),D||m._datatype)}function o(v,m,D){v._values=[],v._index=[],v._ptr=[],v._datatype=D;var S=m.length,y=0,A=r,F=0;if(Gn(D)&&(A=e.find(r,[D,D])||r,F=e.convert(0,D)),S>0){var P=0;do{v._ptr.push(v._index.length);for(var O=0;O<S;O++){var C=m[O];if(Xt(C)){if(P===0&&y<C.length&&(y=C.length),P<C.length){var x=C[P];A(x,F)||(v._values.push(x),v._index.push(O))}}else P===0&&y<1&&(y=1),A(C,F)||(v._values.push(C),v._index.push(O))}P++}while(P<y)}v._ptr.push(v._index.length),v._size=[S,y]}i.prototype=new n,i.prototype.createSparseMatrix=function(v,m){return new i(v,m)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Ts(this._values,mu)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(v,m){return new i(v,m)},i.prototype.density=function(){var v=this._size[0],m=this._size[1];return v!==0&&m!==0?this._index.length/(v*m):0},i.prototype.subset=function(v,m,D){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,v);case 2:case 3:return l(this,v,m,D);default:throw new SyntaxError("Wrong number of arguments")}};function s(v,m){if(!qc(m))throw new TypeError("Invalid index");var D=m.isScalar();if(D)return v.get(m.min());var S=m.size();if(S.length!==v._size.length)throw new kt(S.length,v._size.length);var y,A,F,P,O=m.min(),C=m.max();for(y=0,A=v._size.length;y<A;y++)er(O[y],v._size[y]),er(C[y],v._size[y]);var x=v._values,z=v._index,G=v._ptr,Z=m.dimension(0),R=m.dimension(1),N=[],q=[];Z.forEach(function(te,ce){q[te]=ce[0],N[te]=!0});var j=x?[]:void 0,J=[],Q=[];return R.forEach(function(te){for(Q.push(J.length),F=G[te],P=G[te+1];F<P;F++)y=z[F],N[y]===!0&&(J.push(q[y]),j&&j.push(x[F]))}),Q.push(J.length),new i({values:j,index:J,ptr:Q,size:S,datatype:v._datatype})}function l(v,m,D,S){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var y=m.size(),A=m.isScalar(),F;if(Yr(D)?(F=D.size(),D=D.toArray()):F=Ii(D),A){if(F.length!==0)throw new TypeError("Scalar expected");v.set(m.min(),D,S)}else{if(y.length!==1&&y.length!==2)throw new kt(y.length,v._size.length,"<");if(F.length<y.length){for(var P=0,O=0;y[P]===1&&F[P]===1;)P++;for(;y[P]===1;)O++,P++;D=t1(D,y.length,O,F)}if(!Ps(y,F))throw new kt(y,F,">");if(y.length===1){var C=m.dimension(0);C.forEach(function(G,Z){er(G),v.set([G,0],D[Z[0]],S)})}else{var x=m.dimension(0),z=m.dimension(1);x.forEach(function(G,Z){er(G),z.forEach(function(R,N){er(R),v.set([G,R],D[Z[0]][N[0]],S)})})}}return v}i.prototype.get=function(v){if(!Xt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new kt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=v[0],D=v[1];er(m,this._size[0]),er(D,this._size[1]);var S=h(m,this._ptr[D],this._ptr[D+1],this._index);return S<this._ptr[D+1]&&this._index[S]===m?this._values[S]:0},i.prototype.set=function(v,m,D){if(!Xt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new kt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var S=v[0],y=v[1],A=this._size[0],F=this._size[1],P=r,O=0;Gn(this._datatype)&&(P=e.find(r,[this._datatype,this._datatype])||r,O=e.convert(0,this._datatype)),(S>A-1||y>F-1)&&(p(this,Math.max(S+1,A),Math.max(y+1,F),D),A=this._size[0],F=this._size[1]),er(S,A),er(y,F);var C=h(S,this._ptr[y],this._ptr[y+1],this._index);return C<this._ptr[y+1]&&this._index[C]===S?P(m,O)?c(C,y,this._values,this._index,this._ptr):this._values[C]=m:P(m,O)||f(C,S,y,m,this._values,this._index,this._ptr),this};function h(v,m,D,S){if(D-m===0)return D;for(var y=m;y<D;y++)if(S[y]===v)return y;return m}function c(v,m,D,S,y){D.splice(v,1),S.splice(v,1);for(var A=m+1;A<y.length;A++)y[A]--}function f(v,m,D,S,y,A,F){y.splice(v,0,S),A.splice(v,0,m);for(var P=D+1;P<F.length;P++)F[P]++}i.prototype.resize=function(v,m,D){if(!Ms(v))throw new TypeError("Array or Matrix expected");var S=v.valueOf().map(A=>Array.isArray(A)&&A.length===1?A[0]:A);if(S.length!==2)throw new Error("Only two dimensions matrix are supported");S.forEach(function(A){if(!tr(A)||!Cr(A)||A<0)throw new TypeError("Invalid size, must contain positive integers (size: "+rn(S)+")")});var y=D?this.clone():this;return p(y,S[0],S[1],m)};function p(v,m,D,S){var y=S||0,A=r,F=0;Gn(v._datatype)&&(A=e.find(r,[v._datatype,v._datatype])||r,F=e.convert(0,v._datatype),y=e.convert(y,v._datatype));var P=!A(y,F),O=v._size[0],C=v._size[1],x,z,G;if(D>C){for(z=C;z<D;z++)if(v._ptr[z]=v._values.length,P)for(x=0;x<O;x++)v._values.push(y),v._index.push(x);v._ptr[D]=v._values.length}else D<C&&(v._ptr.splice(D+1,C-D),v._values.splice(v._ptr[D],v._values.length),v._index.splice(v._ptr[D],v._index.length));if(C=D,m>O){if(P){var Z=0;for(z=0;z<C;z++){v._ptr[z]=v._ptr[z]+Z,G=v._ptr[z+1]+Z;var R=0;for(x=O;x<m;x++,R++)v._values.splice(G+R,0,y),v._index.splice(G+R,0,x),Z++}v._ptr[C]=v._values.length}}else if(m<O){var N=0;for(z=0;z<C;z++){v._ptr[z]=v._ptr[z]-N;var q=v._ptr[z],j=v._ptr[z+1]-N;for(G=q;G<j;G++)x=v._index[G],x>m-1&&(v._values.splice(G,1),v._index.splice(G,1),N++)}v._ptr[z]=v._values.length}return v._size[0]=m,v._size[1]=D,v}i.prototype.reshape=function(v,m){if(!Xt(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(te){if(!tr(te)||!Cr(te)||te<=-2||te===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+rn(v)+")")});var D=this._size[0]*this._size[1];v=Hc(v,D);var S=v[0]*v[1];if(D!==S)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var y=m?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return y;for(var A=[],F=0;F<y._ptr.length;F++)for(var P=0;P<y._ptr[F+1]-y._ptr[F];P++)A.push(F);for(var O=y._values.slice(),C=y._index.slice(),x=0;x<y._index.length;x++){var z=C[x],G=A[x],Z=z*y._size[1]+G;A[x]=Z%v[1],C[x]=Math.floor(Z/v[1])}y._values.length=0,y._index.length=0,y._ptr.length=v[1]+1,y._size=v.slice();for(var R=0;R<y._ptr.length;R++)y._ptr[R]=0;for(var N=0;N<O.length;N++){var q=C[N],j=A[N],J=O[N],Q=h(q,y._ptr[j],y._ptr[j+1],y._index);f(Q,q,j,J,y._values,y._index,y._ptr)}return y},i.prototype.clone=function(){var v=new i({values:this._values?Ar(this._values):void 0,index:Ar(this._index),ptr:Ar(this._ptr),size:Ar(this._size),datatype:this._datatype});return v},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(v,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var D=this,S=this._size[0],y=this._size[1],A=m1(v),F=function(O,C,x){return A===1?v(O):A===2?v(O,[C,x]):v(O,[C,x],D)};return g(this,0,S-1,0,y-1,F,m)};function g(v,m,D,S,y,A,F){var P=[],O=[],C=[],x=r,z=0;Gn(v._datatype)&&(x=e.find(r,[v._datatype,v._datatype])||r,z=e.convert(0,v._datatype));for(var G=function(be,Oe,ke){be=A(be,Oe,ke),x(be,z)||(P.push(be),O.push(Oe))},Z=S;Z<=y;Z++){C.push(P.length);var R=v._ptr[Z],N=v._ptr[Z+1];if(F)for(var q=R;q<N;q++){var j=v._index[q];j>=m&&j<=D&&G(v._values[q],j-m,Z-S)}else{for(var J={},Q=R;Q<N;Q++){var te=v._index[Q];J[te]=v._values[Q]}for(var ce=m;ce<=D;ce++){var me=ce in J?J[ce]:0;G(me,ce-m,Z-S)}}}return C.push(P.length),new i({values:P,index:O,ptr:C,size:[D-m+1,y-S+1]})}i.prototype.forEach=function(v,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var D=this,S=this._size[0],y=this._size[1],A=0;A<y;A++){var F=this._ptr[A],P=this._ptr[A+1];if(m)for(var O=F;O<P;O++){var C=this._index[O];v(this._values[O],[C,A],D)}else{for(var x={},z=F;z<P;z++){var G=this._index[z];x[G]=this._values[z]}for(var Z=0;Z<S;Z++){var R=Z in x?x[Z]:0;v(R,[Z,A],D)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],m=0;m<v;m++)for(var D=this._ptr[m],S=this._ptr[m+1],y=D;y<S;y++){var A=this._index[y];yield{value:this._values[y],index:[A,m]}}},i.prototype.toArray=function(){return b(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return b(this._values,this._index,this._ptr,this._size,!1)};function b(v,m,D,S,y){var A=S[0],F=S[1],P=[],O,C;for(O=0;O<A;O++)for(P[O]=[],C=0;C<F;C++)P[O][C]=0;for(C=0;C<F;C++)for(var x=D[C],z=D[C+1],G=x;G<z;G++)O=m[G],P[O][C]=v?y?Ar(v[G]):v[G]:1;return P}return i.prototype.format=function(v){for(var m=this._size[0],D=this._size[1],S=this.density(),y="Sparse Matrix ["+rn(m,v)+" x "+rn(D,v)+"] density: "+rn(S,v)+`
`,A=0;A<D;A++)for(var F=this._ptr[A],P=this._ptr[A+1],O=F;O<P;O++){var C=this._index[O];y+=`
    (`+rn(C,v)+", "+rn(A,v)+") ==> "+(this._values?rn(this._values[O],v):"X")}return y},i.prototype.toString=function(){return rn(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(v){if(v){if(Sn(v)&&(v=v.toNumber()),!tr(v)||!Cr(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var m=v>0?v:0,D=v<0?-v:0,S=this._size[0],y=this._size[1],A=Math.min(S-D,y-m),F=[],P=[],O=[];O[0]=0;for(var C=m;C<y&&F.length<A;C++)for(var x=this._ptr[C],z=this._ptr[C+1],G=x;G<z;G++){var Z=this._index[G];if(Z===C-m+D){F.push(this._values[G]),P[F.length-1]=Z-D;break}}return O.push(F.length),new i({values:F,index:P,ptr:O,size:[A,1]})},i.fromJSON=function(v){return new i(v)},i.diagonal=function(v,m,D,S,y){if(!Xt(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(te){if(Sn(te)&&(te=te.toNumber()),!tr(te)||!Cr(te)||te<1)throw new Error("Size values must be positive integers");return te}),D){if(Sn(D)&&(D=D.toNumber()),!tr(D)||!Cr(D))throw new TypeError("The parameter k must be an integer number")}else D=0;var A=r,F=0;Gn(y)&&(A=e.find(r,[y,y])||r,F=e.convert(0,y));var P=D>0?D:0,O=D<0?-D:0,C=v[0],x=v[1],z=Math.min(C-O,x-P),G;if(Xt(m)){if(m.length!==z)throw new Error("Invalid value array length");G=function(ce){return m[ce]}}else if(Yr(m)){var Z=m.size();if(Z.length!==1||Z[0]!==z)throw new Error("Invalid matrix length");G=function(ce){return m.get([ce])}}else G=function(){return m};for(var R=[],N=[],q=[],j=0;j<x;j++){q.push(R.length);var J=j-P;if(J>=0&&J<z){var Q=G(J);A(Q,F)||(N.push(J+O),R.push(Q))}}return q.push(R.length),new i({values:R,index:N,ptr:q,size:[C,x]})},i.prototype.swapRows=function(v,m){if(!tr(v)||!Cr(v)||!tr(m)||!Cr(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return er(v,this._size[0]),er(m,this._size[0]),i._swapRows(v,m,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(v,m,D,S,y){for(var A=S[v],F=S[v+1],P=A;P<F;P++)y(D[P],m[P])},i._swapRows=function(v,m,D,S,y,A){for(var F=0;F<D;F++){var P=A[F],O=A[F+1],C=h(v,P,O,y),x=h(m,P,O,y);if(C<O&&x<O&&y[C]===v&&y[x]===m){if(S){var z=S[C];S[C]=S[x],S[x]=z}continue}if(C<O&&y[C]===v&&(x>=O||y[x]!==m)){var G=S?S[C]:void 0;y.splice(x,0,m),S&&S.splice(x,0,G),y.splice(x<=C?C+1:C,1),S&&S.splice(x<=C?C+1:C,1);continue}if(x<O&&y[x]===m&&(C>=O||y[C]!==v)){var Z=S?S[x]:void 0;y.splice(C,0,v),S&&S.splice(C,0,Z),y.splice(C<=x?x+1:x,1),S&&S.splice(C<=x?x+1:x,1)}}},i},{isClass:!0}),U0="matrix",mA=["typed","Matrix","DenseMatrix","SparseMatrix"],_A=Ft(U0,mA,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(U0,{"":function(){return a([])},string:function(s){return a([],s)},"string, string":function(s,l){return a([],s,l)},Array:function(s){return a(s)},Matrix:function(s){return a(s,s.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(o,s,l){if(s==="dense"||s==="default"||s===void 0)return new n(o,l);if(s==="sparse")return new i(o,l);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),V0="unaryMinus",bA=["typed"],DA=Ft(V0,bA,t=>{var{typed:e}=t;return e(V0,{number:w1,"Complex | BigNumber | Fraction":r=>r.neg(),Unit:e.referToSelf(r=>n=>{var i=n.clone();return i.value=e.find(r,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(r=>n=>ho(n,r))})}),j0="addScalar",wA=["typed"],yA=Ft(j0,wA,t=>{var{typed:e}=t;return e(j0,{"number, number":b1,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),EA="matAlgo11xS0s",AA=["typed","equalScalar"],CA=Ft(EA,AA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o,s){var l=i._values,h=i._index,c=i._ptr,f=i._size,p=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=f[0],b=f[1],v,m=r,D=0,S=o;typeof p=="string"&&(v=p,m=e.find(r,[v,v]),D=e.convert(0,v),a=e.convert(a,v),S=e.find(o,[v,v]));for(var y=[],A=[],F=[],P=0;P<b;P++){F[P]=A.length;for(var O=c[P],C=c[P+1],x=O;x<C;x++){var z=h[x],G=s?S(a,l[x]):S(l[x],a);m(G,D)||(A.push(z),y.push(G))}}return F[b]=A.length,i.createSparseMatrix({values:y,index:A,ptr:F,size:[g,b],datatype:v})}}),FA="matAlgo12xSfs",SA=["typed","DenseMatrix"],BA=Ft(FA,SA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,o,s){var l=i._values,h=i._index,c=i._ptr,f=i._size,p=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=f[0],b=f[1],v,m=o;typeof p=="string"&&(v=p,a=e.convert(a,v),m=e.find(o,[v,v]));for(var D=[],S=[],y=[],A=0;A<b;A++){for(var F=A+1,P=c[A],O=c[A+1],C=P;C<O;C++){var x=h[C];S[x]=l[C],y[x]=F}for(var z=0;z<g;z++)A===0&&(D[z]=[]),y[z]===F?D[z][A]=s?m(a,S[z]):m(S[z],a):D[z][A]=s?m(a,0):m(0,a)}return new r({data:D,size:[g,b],datatype:v})}}),OA="matAlgo14xDs",MA=["typed"],y1=Ft(OA,MA,t=>{var{typed:e}=t;return function(i,a,o,s){var l=i._data,h=i._size,c=i._datatype,f,p=o;typeof c=="string"&&(f=c,a=e.convert(a,f),p=e.find(o,[f,f]));var g=h.length>0?r(p,0,h,h[0],l,a,s):[];return i.createDenseMatrix({data:g,size:Ar(h),datatype:f})};function r(n,i,a,o,s,l,h){var c=[];if(i===a.length-1)for(var f=0;f<o;f++)c[f]=h?n(l,s[f]):n(s[f],l);else for(var p=0;p<o;p++)c[p]=r(n,i+1,a,a[i+1],s[p],l,h);return c}}),PA="matAlgo01xDSid",kA=["typed"],E1=Ft(PA,kA,t=>{var{typed:e}=t;return function(n,i,a,o){var s=n._data,l=n._size,h=n._datatype,c=i._values,f=i._index,p=i._ptr,g=i._size,b=i._datatype;if(l.length!==g.length)throw new kt(l.length,g.length);if(l[0]!==g[0]||l[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+g+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],m=l[1],D=typeof h=="string"&&h===b?h:void 0,S=D?e.find(a,[D,D]):a,y,A,F=[];for(y=0;y<v;y++)F[y]=[];var P=[],O=[];for(A=0;A<m;A++){for(var C=A+1,x=p[A],z=p[A+1],G=x;G<z;G++)y=f[G],P[y]=o?S(c[G],s[y][A]):S(s[y][A],c[G]),O[y]=C;for(y=0;y<v;y++)O[y]===C?F[y][A]=P[y]:F[y][A]=s[y][A]}return n.createDenseMatrix({data:F,size:[v,m],datatype:D})}}),TA="matAlgo04xSidSid",IA=["typed","equalScalar"],xA=Ft(TA,IA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,l=i._index,h=i._ptr,c=i._size,f=i._datatype,p=a._values,g=a._index,b=a._ptr,v=a._size,m=a._datatype;if(c.length!==v.length)throw new kt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var D=c[0],S=c[1],y,A=r,F=0,P=o;typeof f=="string"&&f===m&&(y=f,A=e.find(r,[y,y]),F=e.convert(0,y),P=e.find(o,[y,y]));var O=s&&p?[]:void 0,C=[],x=[],z=s&&p?[]:void 0,G=s&&p?[]:void 0,Z=[],R=[],N,q,j,J,Q;for(q=0;q<S;q++){x[q]=C.length;var te=q+1;for(J=h[q],Q=h[q+1],j=J;j<Q;j++)N=l[j],C.push(N),Z[N]=te,z&&(z[N]=s[j]);for(J=b[q],Q=b[q+1],j=J;j<Q;j++)if(N=g[j],Z[N]===te){if(z){var ce=P(z[N],p[j]);A(ce,F)?Z[N]=null:z[N]=ce}}else C.push(N),R[N]=te,G&&(G[N]=p[j]);if(z&&G)for(j=x[q];j<C.length;)N=C[j],Z[N]===te?(O[j]=z[N],j++):R[N]===te?(O[j]=G[N],j++):C.splice(j,1)}return x[S]=C.length,i.createSparseMatrix({values:O,index:C,ptr:x,size:[D,S],datatype:y})}}),NA="matAlgo10xSids",LA=["typed","DenseMatrix"],A1=Ft(NA,LA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,o,s){var l=i._values,h=i._index,c=i._ptr,f=i._size,p=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=f[0],b=f[1],v,m=o;typeof p=="string"&&(v=p,a=e.convert(a,v),m=e.find(o,[v,v]));for(var D=[],S=[],y=[],A=0;A<b;A++){for(var F=A+1,P=c[A],O=c[A+1],C=P;C<O;C++){var x=h[C];S[x]=l[C],y[x]=F}for(var z=0;z<g;z++)A===0&&(D[z]=[]),y[z]===F?D[z][A]=s?m(a,S[z]):m(S[z],a):D[z][A]=a}return new r({data:D,size:[g,b],datatype:v})}}),RA="matAlgo13xDD",UA=["typed"],VA=Ft(RA,UA,t=>{var{typed:e}=t;return function(i,a,o){var s=i._data,l=i._size,h=i._datatype,c=a._data,f=a._size,p=a._datatype,g=[];if(l.length!==f.length)throw new kt(l.length,f.length);for(var b=0;b<l.length;b++){if(l[b]!==f[b])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");g[b]=l[b]}var v,m=o;typeof h=="string"&&h===p&&(v=h,m=e.find(o,[v,v]));var D=g.length>0?r(m,0,g,g[0],s,c):[];return i.createDenseMatrix({data:D,size:g,datatype:v})};function r(n,i,a,o,s,l){var h=[];if(i===a.length-1)for(var c=0;c<o;c++)h[c]=n(s[c],l[c]);else for(var f=0;f<o;f++)h[f]=r(n,i+1,a,a[i+1],s[f],l[f]);return h}}),jA="broadcast",zA=["concat"],qA=Ft(jA,zA,t=>{var{concat:e}=t;return function(a,o){var s=Math.max(a._size.length,o._size.length);if(a._size.length===o._size.length&&a._size.every((m,D)=>m===o._size[D]))return[a,o];for(var l=r(a._size,s,0),h=r(o._size,s,0),c=[],f=0;f<s;f++)c[f]=Math.max(l[f],h[f]);for(var p=0;p<s;p++)i(l,c,p),i(h,c,p);var g=a.clone(),b=o.clone();g._size.length<s?g.reshape(r(g._size,s,1)):b._size.length<s&&b.reshape(r(b._size,s,1));for(var v=0;v<s;v++)g._size[v]<c[v]&&(g=n(g,c[v],v)),b._size[v]<c[v]&&(b=n(b,c[v],v));return[g,b]};function r(a,o,s){return[...Array(o-a.length).fill(s),...a]}function n(a,o,s){return e(...Array(o).fill(a),s)}function i(a,o,s){if(a[s]<o[s]&a[s]>1)throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(a,") not possible to broadcast dimension ").concat(s," with size ").concat(a[s]," to size ").concat(o[s]))}}),WA="matrixAlgorithmSuite",HA=["typed","matrix","concat"],C1=Ft(WA,HA,t=>{var{typed:e,matrix:r,concat:n}=t,i=VA({typed:e}),a=y1({typed:e}),o=qA({concat:n});return function(l){var h=l.elop,c=l.SD||l.DS,f;h?(f={"DenseMatrix, DenseMatrix":(v,m)=>i(...o(v,m),h),"Array, Array":(v,m)=>i(...o(r(v),r(m)),h).valueOf(),"Array, DenseMatrix":(v,m)=>i(...o(r(v),m),h),"DenseMatrix, Array":(v,m)=>i(...o(v,r(m)),h)},l.SS&&(f["SparseMatrix, SparseMatrix"]=(v,m)=>l.SS(...o(v,m),h,!1)),l.DS&&(f["DenseMatrix, SparseMatrix"]=(v,m)=>l.DS(...o(v,m),h,!1),f["Array, SparseMatrix"]=(v,m)=>l.DS(...o(r(v),m),h,!1)),c&&(f["SparseMatrix, DenseMatrix"]=(v,m)=>c(...o(m,v),h,!0),f["SparseMatrix, Array"]=(v,m)=>c(...o(r(m),v),h,!0))):(f={"DenseMatrix, DenseMatrix":e.referToSelf(v=>(m,D)=>i(...o(m,D),v)),"Array, Array":e.referToSelf(v=>(m,D)=>i(...o(r(m),r(D)),v).valueOf()),"Array, DenseMatrix":e.referToSelf(v=>(m,D)=>i(...o(r(m),D),v)),"DenseMatrix, Array":e.referToSelf(v=>(m,D)=>i(...o(m,r(D)),v))},l.SS&&(f["SparseMatrix, SparseMatrix"]=e.referToSelf(v=>(m,D)=>l.SS(...o(m,D),v,!1))),l.DS&&(f["DenseMatrix, SparseMatrix"]=e.referToSelf(v=>(m,D)=>l.DS(...o(m,D),v,!1)),f["Array, SparseMatrix"]=e.referToSelf(v=>(m,D)=>l.DS(...o(r(m),D),v,!1))),c&&(f["SparseMatrix, DenseMatrix"]=e.referToSelf(v=>(m,D)=>c(...o(D,m),v,!0)),f["SparseMatrix, Array"]=e.referToSelf(v=>(m,D)=>c(...o(r(D),m),v,!0))));var p=l.scalar||"any",g=l.Ds||l.Ss;g&&(h?(f["DenseMatrix,"+p]=(v,m)=>a(v,m,h,!1),f[p+", DenseMatrix"]=(v,m)=>a(m,v,h,!0),f["Array,"+p]=(v,m)=>a(r(v),m,h,!1).valueOf(),f[p+", Array"]=(v,m)=>a(r(m),v,h,!0).valueOf()):(f["DenseMatrix,"+p]=e.referToSelf(v=>(m,D)=>a(m,D,v,!1)),f[p+", DenseMatrix"]=e.referToSelf(v=>(m,D)=>a(D,m,v,!0)),f["Array,"+p]=e.referToSelf(v=>(m,D)=>a(r(m),D,v,!1).valueOf()),f[p+", Array"]=e.referToSelf(v=>(m,D)=>a(r(D),m,v,!0).valueOf())));var b=l.sS!==void 0?l.sS:l.Ss;return h?(l.Ss&&(f["SparseMatrix,"+p]=(v,m)=>l.Ss(v,m,h,!1)),b&&(f[p+", SparseMatrix"]=(v,m)=>b(m,v,h,!0))):(l.Ss&&(f["SparseMatrix,"+p]=e.referToSelf(v=>(m,D)=>l.Ss(m,D,v,!1))),b&&(f[p+", SparseMatrix"]=e.referToSelf(v=>(m,D)=>b(D,m,v,!0)))),h&&h.signatures&&_y(f,h.signatures),f}}),$A="matAlgo03xDSf",GA=["typed"],KA=Ft($A,GA,t=>{var{typed:e}=t;return function(n,i,a,o){var s=n._data,l=n._size,h=n._datatype,c=i._values,f=i._index,p=i._ptr,g=i._size,b=i._datatype;if(l.length!==g.length)throw new kt(l.length,g.length);if(l[0]!==g[0]||l[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+g+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],m=l[1],D,S=0,y=a;typeof h=="string"&&h===b&&(D=h,S=e.convert(0,D),y=e.find(a,[D,D]));for(var A=[],F=0;F<v;F++)A[F]=[];for(var P=[],O=[],C=0;C<m;C++){for(var x=C+1,z=p[C],G=p[C+1],Z=z;Z<G;Z++){var R=f[Z];P[R]=o?y(c[Z],s[R][C]):y(s[R][C],c[Z]),O[R]=x}for(var N=0;N<v;N++)O[N]===x?A[N][C]=P[N]:A[N][C]=o?y(S,s[N][C]):y(s[N][C],S)}return n.createDenseMatrix({data:A,size:[v,m],datatype:D})}}),YA="matAlgo05xSfSf",ZA=["typed","equalScalar"],JA=Ft(YA,ZA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,l=i._index,h=i._ptr,c=i._size,f=i._datatype,p=a._values,g=a._index,b=a._ptr,v=a._size,m=a._datatype;if(c.length!==v.length)throw new kt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var D=c[0],S=c[1],y,A=r,F=0,P=o;typeof f=="string"&&f===m&&(y=f,A=e.find(r,[y,y]),F=e.convert(0,y),P=e.find(o,[y,y]));var O=s&&p?[]:void 0,C=[],x=[],z=O?[]:void 0,G=O?[]:void 0,Z=[],R=[],N,q,j,J;for(q=0;q<S;q++){x[q]=C.length;var Q=q+1;for(j=h[q],J=h[q+1];j<J;j++)N=l[j],C.push(N),Z[N]=Q,z&&(z[N]=s[j]);for(j=b[q],J=b[q+1];j<J;j++)N=g[j],Z[N]!==Q&&C.push(N),R[N]=Q,G&&(G[N]=p[j]);if(O)for(j=x[q];j<C.length;){N=C[j];var te=Z[N],ce=R[N];if(te===Q||ce===Q){var me=te===Q?z[N]:F,Ee=ce===Q?G[N]:F,be=P(me,Ee);A(be,F)?C.splice(j,1):(O.push(be),j++)}}}return x[S]=C.length,i.createSparseMatrix({values:O,index:C,ptr:x,size:[D,S],datatype:y})}}),QA="multiplyScalar",XA=["typed"],e3=Ft(QA,XA,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":D1,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),z0="multiply",t3=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],r3=Ft(z0,t3,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:a,dot:o}=t,s=CA({typed:e,equalScalar:a}),l=y1({typed:e});function h(F,P){switch(F.length){case 1:switch(P.length){case 1:if(F[0]!==P[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(F[0]!==P[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+F[0]+") must match Matrix rows ("+P[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+P.length+" dimensions)")}break;case 2:switch(P.length){case 1:if(F[1]!==P[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+F[1]+") must match Vector length ("+P[0]+")");break;case 2:if(F[1]!==P[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+F[1]+") must match Matrix B rows ("+P[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+P.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+F.length+" dimensions)")}}function c(F,P,O){if(O===0)throw new Error("Cannot multiply two empty vectors");return o(F,P)}function f(F,P){if(P.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return p(F,P)}function p(F,P){var O=F._data,C=F._size,x=F._datatype,z=P._data,G=P._size,Z=P._datatype,R=C[0],N=G[1],q,j=n,J=i;x&&Z&&x===Z&&typeof x=="string"&&(q=x,j=e.find(n,[q,q]),J=e.find(i,[q,q]));for(var Q=[],te=0;te<N;te++){for(var ce=J(O[0],z[0][te]),me=1;me<R;me++)ce=j(ce,J(O[me],z[me][te]));Q[te]=ce}return F.createDenseMatrix({data:Q,size:[N],datatype:q})}var g=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":S}),b=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":D,"SparseMatrix, DenseMatrix":y,"SparseMatrix, SparseMatrix":A});function v(F,P){var O=F._data,C=F._size,x=F._datatype,z=P._data,G=P._datatype,Z=C[0],R=C[1],N,q=n,j=i;x&&G&&x===G&&typeof x=="string"&&(N=x,q=e.find(n,[N,N]),j=e.find(i,[N,N]));for(var J=[],Q=0;Q<Z;Q++){for(var te=O[Q],ce=j(te[0],z[0]),me=1;me<R;me++)ce=q(ce,j(te[me],z[me]));J[Q]=ce}return F.createDenseMatrix({data:J,size:[Z],datatype:N})}function m(F,P){var O=F._data,C=F._size,x=F._datatype,z=P._data,G=P._size,Z=P._datatype,R=C[0],N=C[1],q=G[1],j,J=n,Q=i;x&&Z&&x===Z&&typeof x=="string"&&(j=x,J=e.find(n,[j,j]),Q=e.find(i,[j,j]));for(var te=[],ce=0;ce<R;ce++){var me=O[ce];te[ce]=[];for(var Ee=0;Ee<q;Ee++){for(var be=Q(me[0],z[0][Ee]),Oe=1;Oe<N;Oe++)be=J(be,Q(me[Oe],z[Oe][Ee]));te[ce][Ee]=be}}return F.createDenseMatrix({data:te,size:[R,q],datatype:j})}function D(F,P){var O=F._data,C=F._size,x=F._datatype,z=P._values,G=P._index,Z=P._ptr,R=P._size,N=P._datatype;if(!z)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var q=C[0],j=R[1],J,Q=n,te=i,ce=a,me=0;x&&N&&x===N&&typeof x=="string"&&(J=x,Q=e.find(n,[J,J]),te=e.find(i,[J,J]),ce=e.find(a,[J,J]),me=e.convert(0,J));for(var Ee=[],be=[],Oe=[],ke=P.createSparseMatrix({values:Ee,index:be,ptr:Oe,size:[q,j],datatype:J}),Ne=0;Ne<j;Ne++){Oe[Ne]=be.length;var ze=Z[Ne],tt=Z[Ne+1];if(tt>ze)for(var at=0,rt=0;rt<q;rt++){for(var St=rt+1,Bt=void 0,vt=ze;vt<tt;vt++){var ct=G[vt];at!==St?(Bt=te(O[rt][ct],z[vt]),at=St):Bt=Q(Bt,te(O[rt][ct],z[vt]))}at===St&&!ce(Bt,me)&&(be.push(rt),Ee.push(Bt))}}return Oe[j]=be.length,ke}function S(F,P){var O=F._values,C=F._index,x=F._ptr,z=F._datatype;if(!O)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var G=P._data,Z=P._datatype,R=F._size[0],N=P._size[0],q=[],j=[],J=[],Q,te=n,ce=i,me=a,Ee=0;z&&Z&&z===Z&&typeof z=="string"&&(Q=z,te=e.find(n,[Q,Q]),ce=e.find(i,[Q,Q]),me=e.find(a,[Q,Q]),Ee=e.convert(0,Q));var be=[],Oe=[];J[0]=0;for(var ke=0;ke<N;ke++){var Ne=G[ke];if(!me(Ne,Ee))for(var ze=x[ke],tt=x[ke+1],at=ze;at<tt;at++){var rt=C[at];Oe[rt]?be[rt]=te(be[rt],ce(Ne,O[at])):(Oe[rt]=!0,j.push(rt),be[rt]=ce(Ne,O[at]))}}for(var St=j.length,Bt=0;Bt<St;Bt++){var vt=j[Bt];q[Bt]=be[vt]}return J[1]=j.length,F.createSparseMatrix({values:q,index:j,ptr:J,size:[R,1],datatype:Q})}function y(F,P){var O=F._values,C=F._index,x=F._ptr,z=F._datatype;if(!O)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var G=P._data,Z=P._datatype,R=F._size[0],N=P._size[0],q=P._size[1],j,J=n,Q=i,te=a,ce=0;z&&Z&&z===Z&&typeof z=="string"&&(j=z,J=e.find(n,[j,j]),Q=e.find(i,[j,j]),te=e.find(a,[j,j]),ce=e.convert(0,j));for(var me=[],Ee=[],be=[],Oe=F.createSparseMatrix({values:me,index:Ee,ptr:be,size:[R,q],datatype:j}),ke=[],Ne=[],ze=0;ze<q;ze++){be[ze]=Ee.length;for(var tt=ze+1,at=0;at<N;at++){var rt=G[at][ze];if(!te(rt,ce))for(var St=x[at],Bt=x[at+1],vt=St;vt<Bt;vt++){var ct=C[vt];Ne[ct]!==tt?(Ne[ct]=tt,Ee.push(ct),ke[ct]=Q(rt,O[vt])):ke[ct]=J(ke[ct],Q(rt,O[vt]))}}for(var xt=be[ze],qr=Ee.length,Ut=xt;Ut<qr;Ut++){var Wr=Ee[Ut];me[Ut]=ke[Wr]}}return be[q]=Ee.length,Oe}function A(F,P){var O=F._values,C=F._index,x=F._ptr,z=F._datatype,G=P._values,Z=P._index,R=P._ptr,N=P._datatype,q=F._size[0],j=P._size[1],J=O&&G,Q,te=n,ce=i;z&&N&&z===N&&typeof z=="string"&&(Q=z,te=e.find(n,[Q,Q]),ce=e.find(i,[Q,Q]));for(var me=J?[]:void 0,Ee=[],be=[],Oe=F.createSparseMatrix({values:me,index:Ee,ptr:be,size:[q,j],datatype:Q}),ke=J?[]:void 0,Ne=[],ze,tt,at,rt,St,Bt,vt,ct,xt=0;xt<j;xt++){be[xt]=Ee.length;var qr=xt+1;for(St=R[xt],Bt=R[xt+1],rt=St;rt<Bt;rt++)if(ct=Z[rt],J)for(tt=x[ct],at=x[ct+1],ze=tt;ze<at;ze++)vt=C[ze],Ne[vt]!==qr?(Ne[vt]=qr,Ee.push(vt),ke[vt]=ce(G[rt],O[ze])):ke[vt]=te(ke[vt],ce(G[rt],O[ze]));else for(tt=x[ct],at=x[ct+1],ze=tt;ze<at;ze++)vt=C[ze],Ne[vt]!==qr&&(Ne[vt]=qr,Ee.push(vt));if(J)for(var Ut=be[xt],Wr=Ee.length,et=Ut;et<Wr;et++){var pr=Ee[et];me[et]=ke[pr]}}return be[j]=Ee.length,Oe}return e(z0,i,{"Array, Array":e.referTo("Matrix, Matrix",F=>(P,O)=>{h(Ii(P),Ii(O));var C=F(r(P),r(O));return Yr(C)?C.valueOf():C}),"Matrix, Matrix":function(P,O){var C=P.size(),x=O.size();return h(C,x),C.length===1?x.length===1?c(P,O,C[0]):f(P,O):x.length===1?g(P,O):b(P,O)},"Matrix, Array":e.referTo("Matrix,Matrix",F=>(P,O)=>F(P,r(O))),"Array, Matrix":e.referToSelf(F=>(P,O)=>F(r(P,O.storage()),O)),"SparseMatrix, any":function(P,O){return s(P,O,i,!1)},"DenseMatrix, any":function(P,O){return l(P,O,i,!1)},"any, SparseMatrix":function(P,O){return s(O,P,i,!0)},"any, DenseMatrix":function(P,O){return l(O,P,i,!0)},"Array, any":function(P,O){return l(r(P),O,i,!1).valueOf()},"any, Array":function(P,O){return l(r(O),P,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(F=>(P,O,C)=>{for(var x=F(P,O),z=0;z<C.length;z++)x=F(x,C[z]);return x})})}),q0="subtract",n3=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix","concat"],i3=Ft(q0,n3,t=>{var{typed:e,matrix:r,equalScalar:n,addScalar:i,unaryMinus:a,DenseMatrix:o,concat:s}=t,l=E1({typed:e}),h=KA({typed:e}),c=JA({typed:e,equalScalar:n}),f=A1({typed:e,DenseMatrix:o}),p=BA({typed:e,DenseMatrix:o}),g=C1({typed:e,matrix:r,concat:s});return e(q0,{"number, number":(b,v)=>b-v,"Complex, Complex":(b,v)=>b.sub(v),"BigNumber, BigNumber":(b,v)=>b.minus(v),"Fraction, Fraction":(b,v)=>b.sub(v),"Unit, Unit":e.referToSelf(b=>(v,m)=>{if(v.value===null)throw new Error("Parameter x contains a unit with undefined value");if(m.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!v.equalBase(m))throw new Error("Units do not match");var D=v.clone();return D.value=e.find(b,[D.valueType(),m.valueType()])(D.value,m.value),D.fixPrefix=!1,D})},g({SS:c,DS:l,SD:h,Ss:p,sS:f}))}),W0="conj",a3=["typed"],u3=Ft(W0,a3,t=>{var{typed:e}=t;return e(W0,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":e.referToSelf(r=>n=>ho(n,r))})}),H0="concat",s3=["typed","matrix","isInteger"],o3=Ft(H0,s3,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(H0,{"...Array | Matrix | number | BigNumber":function(a){var o,s=a.length,l=-1,h,c=!1,f=[];for(o=0;o<s;o++){var p=a[o];if(Yr(p)&&(c=!0),tr(p)||Sn(p)){if(o!==s-1)throw new Error("Dimension must be specified as last argument");if(h=l,l=p.valueOf(),!n(l))throw new TypeError("Integer number expected for dimension");if(l<0||o>0&&l>h)throw new ta(l,h+1)}else{var g=Ar(p).valueOf(),b=Ii(g);if(f[o]=g,h=l,l=b.length-1,o>0&&l!==h)throw new kt(h+1,l+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var v=f.shift();f.length;)v=F1(v,f.shift(),l,0);return c?r(v):v},"...string":function(a){return a.join("")}})});function F1(t,e,r,n){if(n<r){if(t.length!==e.length)throw new kt(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=F1(t[a],e[a],r,n+1);return i}else return t.concat(e)}function l3(){throw new Error('No "matrix" implementation available')}var $0="size",c3=["typed","config","?matrix"],f3=Ft($0,c3,t=>{var{typed:e,config:r,matrix:n}=t;return e($0,{Matrix:function(a){return a.create(a.size())},Array:Ii,string:function(a){return r.matrix==="Array"?[a.length]:n([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return r.matrix==="Array"?[]:n?n([]):l3()}})}),G0="add",h3=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],d3=Ft(G0,h3,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:a,SparseMatrix:o,concat:s}=t,l=E1({typed:e}),h=xA({typed:e,equalScalar:i}),c=A1({typed:e,DenseMatrix:a}),f=C1({typed:e,matrix:r,concat:s});return e(G0,{"any, any":n,"any, any, ...any":e.referToSelf(p=>(g,b,v)=>{for(var m=p(g,b),D=0;D<v.length;D++)m=p(m,v[D]);return m})},f({elop:n,DS:l,SS:h,Ss:c}))}),K0="dot",p3=["typed","addScalar","multiplyScalar","conj","size"],g3=Ft(K0,p3,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:a}=t;return e(K0,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":l});function o(c,f){var p=h(c),g=h(f),b,v;if(p.length===1)b=p[0];else if(p.length===2&&p[1]===1)b=p[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+p.join(", ")+")");if(g.length===1)v=g[0];else if(g.length===2&&g[1]===1)v=g[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+g.join(", ")+")");if(b!==v)throw new RangeError("Vectors must have equal length ("+b+" != "+v+")");if(b===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return b}function s(c,f){var p=o(c,f),g=Yr(c)?c._data:c,b=Yr(c)?c._datatype:void 0,v=Yr(f)?f._data:f,m=Yr(f)?f._datatype:void 0,D=h(c).length===2,S=h(f).length===2,y=r,A=n;if(b&&m&&b===m&&typeof b=="string"){var F=b;y=e.find(r,[F,F]),A=e.find(n,[F,F])}if(!D&&!S){for(var P=A(i(g[0]),v[0]),O=1;O<p;O++)P=y(P,A(i(g[O]),v[O]));return P}if(!D&&S){for(var C=A(i(g[0]),v[0][0]),x=1;x<p;x++)C=y(C,A(i(g[x]),v[x][0]));return C}if(D&&!S){for(var z=A(i(g[0][0]),v[0]),G=1;G<p;G++)z=y(z,A(i(g[G][0]),v[G]));return z}if(D&&S){for(var Z=A(i(g[0][0]),v[0][0]),R=1;R<p;R++)Z=y(Z,A(i(g[R][0]),v[R][0]));return Z}}function l(c,f){o(c,f);for(var p=c._index,g=c._values,b=f._index,v=f._values,m=0,D=r,S=n,y=0,A=0;y<p.length&&A<b.length;){var F=p[y],P=b[A];if(F<P){y++;continue}if(F>P){A++;continue}F===P&&(m=D(m,S(g[y],v[A])),y++,A++)}return m}function h(c){return Yr(c)?c.size():a(c)}}),v3=HE({config:uo}),m3=YE({}),_3=XE({}),Kc=rA({}),po=aA({Matrix:Kc}),un=Ky({BigNumber:v3,Complex:m3,DenseMatrix:po,Fraction:_3}),go=yA({typed:un}),b3=u3({typed:un}),vo=dA({config:uo,typed:un}),D3=sA({typed:un}),S1=e3({typed:un}),B1=vA({Matrix:Kc,equalScalar:vo,typed:un}),w3=DA({typed:un}),Fu=_A({DenseMatrix:po,Matrix:Kc,SparseMatrix:B1,typed:un}),y3=f3({matrix:Fu,config:uo,typed:un}),O1=o3({isInteger:D3,matrix:Fu,typed:un}),Ir=d3({DenseMatrix:po,SparseMatrix:B1,addScalar:go,concat:O1,equalScalar:vo,matrix:Fu,typed:un}),E3=g3({addScalar:go,conj:b3,multiplyScalar:S1,size:y3,typed:un}),Vr=r3({addScalar:go,dot:E3,equalScalar:vo,matrix:Fu,multiplyScalar:S1,typed:un}),vs=i3({DenseMatrix:po,addScalar:go,concat:O1,equalScalar:vo,matrix:Fu,typed:un,unaryMinus:w3});function A3(t){let e,r,n;return{c(){e=dt("circle"),this.h()},l(i){e=pt(i,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),U(e).forEach(M),this.h()},h(){B(e,"cx",r=t[0][0]),B(e,"cy",n=t[0][1]),B(e,"r",t[1]),B(e,"stroke",t[3]),B(e,"stroke-width",t[2]),Ot(e,"fill","rgba(0,0,0,0)")},m(i,a){ue(i,e,a)},p(i,[a]){a&1&&r!==(r=i[0][0])&&B(e,"cx",r),a&1&&n!==(n=i[0][1])&&B(e,"cy",n),a&2&&B(e,"r",i[1]),a&8&&B(e,"stroke",i[3]),a&4&&B(e,"stroke-width",i[2])},i:Pe,o:Pe,d(i){i&&M(e)}}}function C3(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class Yc extends Je{constructor(e){super(),Qe(this,e,C3,A3,Xe,{xy:0,radius:1,stroke:2,color:3})}}function F3(t){let e,r,n,i,a;return{c(){e=dt("circle"),this.h()},l(o){e=pt(o,"circle",{cx:!0,cy:!0,r:!0}),U(e).forEach(M),this.h()},h(){B(e,"cx",r=t[0][0]),B(e,"cy",n=t[0][1]),B(e,"r",t[1]),Ot(e,"fill",t[2])},m(o,s){ue(o,e,s),i||(a=[_e(e,"mouseover",t[3]),_e(e,"mouseout",t[4]),_e(e,"mousedown",t[5]),_e(e,"touchstart",t[5])],i=!0)},p(o,[s]){s&1&&r!==(r=o[0][0])&&B(e,"cx",r),s&1&&n!==(n=o[0][1])&&B(e,"cy",n),s&2&&B(e,"r",o[1]),s&4&&Ot(e,"fill",o[2])},i:Pe,o:Pe,d(o){o&&M(e),i=!1,Rt(a)}}}function S3(t,e,r){let{xy:n=[100,100]}=e,{radius:i=5}=e,{color:a="black"}=e,{hoverColor:o="white"}=e,{handleMouseDown:s=p=>{}}=e,l=a;function h(){r(2,l=o)}function c(){r(2,l=a)}function f(p){s(p)}return t.$$set=p=>{"xy"in p&&r(0,n=p.xy),"radius"in p&&r(1,i=p.radius),"color"in p&&r(6,a=p.color),"hoverColor"in p&&r(7,o=p.hoverColor),"handleMouseDown"in p&&r(8,s=p.handleMouseDown)},[n,i,l,h,c,f,a,o,s]}class Na extends Je{constructor(e){super(),Qe(this,e,S3,F3,Xe,{xy:0,radius:1,color:6,hoverColor:7,handleMouseDown:8})}}function B3(t){let e,r,n,i,a;return{c(){e=dt("line"),this.h()},l(o){e=pt(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-dasharray":!0,"stroke-width":!0}),U(e).forEach(M),this.h()},h(){B(e,"x1",r=t[0][0]),B(e,"y1",n=t[0][1]),B(e,"x2",i=t[1][0]),B(e,"y2",a=t[1][1]),B(e,"stroke",t[3]),B(e,"stroke-dasharray","10,10"),B(e,"stroke-width",t[2])},m(o,s){ue(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&B(e,"x1",r),s&1&&n!==(n=o[0][1])&&B(e,"y1",n),s&2&&i!==(i=o[1][0])&&B(e,"x2",i),s&2&&a!==(a=o[1][1])&&B(e,"y2",a),s&8&&B(e,"stroke",o[3]),s&4&&B(e,"stroke-width",o[2])},i:Pe,o:Pe,d(o){o&&M(e)}}}function O3(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class M1 extends Je{constructor(e){super(),Qe(this,e,O3,B3,Xe,{p1:0,p2:1,stroke:2,color:3})}}function M3(t){let e,r;return{c(){e=W("p"),r=Fe(t[2]),this.h()},l(n){e=H(n,"P",{});var i=U(e);r=Se(i,t[2]),i.forEach(M),this.h()},h(){Ot(e,"color",t[3]),Ot(e,"user-select","none"),Ot(e,"margin","0"),Ot(e,"pointer-events","none"),Ot(e,"text-align",t[4]),Ot(e,"font-size",`${t[5]}px`),Ot(e,"font-family","sans-serif"),Ot(e,"font-style","italic")},m(n,i){ue(n,e,i),T(e,r)},p(n,i){i&4&&zt(r,n[2]),i&8&&Ot(e,"color",n[3]),i&16&&Ot(e,"text-align",n[4]),i&32&&Ot(e,"font-size",`${n[5]}px`)},d(n){n&&M(e)}}}function P3(t){let e,r;return{c(){e=W("img"),this.h()},l(n){e=H(n,"IMG",{src:!0}),this.h()},h(){F0(e.src,r=t[2])||B(e,"src",r),Ot(e,"user-select","none"),Ot(e,"width","100%"),Ot(e,"height","100%"),Ot(e,"object-fit","contain")},m(n,i){ue(n,e,i)},p(n,i){i&4&&!F0(e.src,r=n[2])&&B(e,"src",r)},d(n){n&&M(e)}}}function k3(t){let e,r,n,i,a,o,s;function l(f,p){return p&4&&(n=null),n==null&&(n=!!f[2].startsWith("http")),n?P3:M3}let h=l(t,-1),c=h(t);return{c(){e=dt("foreignObject"),r=W("div"),c.c(),this.h()},l(f){e=pt(f,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var p=U(e);r=H(p,"DIV",{class:!0});var g=U(r);c.l(g),g.forEach(M),p.forEach(M),this.h()},h(){B(r,"class","h-full flex flex-col justify-center"),B(e,"x",i=t[0][0]),B(e,"y",a=t[0][1]),B(e,"width",o=t[1][0]),B(e,"height",s=t[1][1])},m(f,p){ue(f,e,p),T(e,r),c.m(r,null)},p(f,[p]){h===(h=l(f,p))&&c?c.p(f,p):(c.d(1),c=h(f),c&&(c.c(),c.m(r,null))),p&1&&i!==(i=f[0][0])&&B(e,"x",i),p&1&&a!==(a=f[0][1])&&B(e,"y",a),p&2&&o!==(o=f[1][0])&&B(e,"width",o),p&2&&s!==(s=f[1][1])&&B(e,"height",s)},i:Pe,o:Pe,d(f){f&&M(e),c.d()}}}function T3(t,e,r){let{xy:n=[100,100]}=e,{wh:i=[100,100]}=e,{text:a=""}=e,{color:o="rgba(96,117,151, 1)"}=e,{textAlign:s="center"}=e,{fontSize:l=12}=e;return t.$$set=h=>{"xy"in h&&r(0,n=h.xy),"wh"in h&&r(1,i=h.wh),"text"in h&&r(2,a=h.text),"color"in h&&r(3,o=h.color),"textAlign"in h&&r(4,s=h.textAlign),"fontSize"in h&&r(5,l=h.fontSize)},[n,i,a,o,s,l]}class mo extends Je{constructor(e){super(),Qe(this,e,T3,k3,Xe,{xy:0,wh:1,text:2,color:3,textAlign:4,fontSize:5})}}function I3(t){let e,r,n,i,a,o,s,l,h,c,f;return{c(){e=dt("circle"),i=we(),a=dt("foreignObject"),o=W("p"),s=Fe(t[4]),this.h()},l(p){e=pt(p,"circle",{cx:!0,cy:!0,r:!0}),U(e).forEach(M),i=ye(p),a=pt(p,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var g=U(a);o=H(g,"P",{style:!0,class:!0});var b=U(o);s=Se(b,t[4]),b.forEach(M),g.forEach(M),this.h()},h(){B(e,"cx",r=t[0][0]),B(e,"cy",n=t[0][1]),B(e,"r",t[1]),Ot(e,"fill",t[3]),Ot(o,"color",t[2]),Ot(o,"user-select","none"),Ot(o,"margin","0"),B(o,"class","heavy svelte-6if1p2"),B(a,"x",l=t[0][0]-t[1]),B(a,"y",h=t[0][1]-t[1]),B(a,"width",c=t[1]*2),B(a,"height",f=t[1]*2)},m(p,g){ue(p,e,g),ue(p,i,g),ue(p,a,g),T(a,o),T(o,s)},p(p,[g]){g&1&&r!==(r=p[0][0])&&B(e,"cx",r),g&1&&n!==(n=p[0][1])&&B(e,"cy",n),g&2&&B(e,"r",p[1]),g&8&&Ot(e,"fill",p[3]),g&16&&zt(s,p[4]),g&4&&Ot(o,"color",p[2]),g&3&&l!==(l=p[0][0]-p[1])&&B(a,"x",l),g&3&&h!==(h=p[0][1]-p[1])&&B(a,"y",h),g&2&&c!==(c=p[1]*2)&&B(a,"width",c),g&2&&f!==(f=p[1]*2)&&B(a,"height",f)},i:Pe,o:Pe,d(p){p&&M(e),p&&M(i),p&&M(a)}}}function x3(t,e,r){let{xy:n=[100,100]}=e,{radius:i=25}=e,{textColor:a="rgba(96,117,151, 1)"}=e,{bgColor:o="black"}=e,{weight:s=""}=e;return t.$$set=l=>{"xy"in l&&r(0,n=l.xy),"radius"in l&&r(1,i=l.radius),"textColor"in l&&r(2,a=l.textColor),"bgColor"in l&&r(3,o=l.bgColor),"weight"in l&&r(4,s=l.weight)},[n,i,a,o,s]}class N3 extends Je{constructor(e){super(),Qe(this,e,x3,I3,Xe,{xy:0,radius:1,textColor:2,bgColor:3,weight:4})}}function Ln(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=360+Math.atan2(i,n)*180/Math.PI,o=Math.sqrt(n*n+i*i);return[a%360,o/r]}function xr(t,e,r){const n=e[0]%360*Math.PI/180,i=[r*e[1]*Math.cos(n),r*e[1]*Math.sin(n)];return Ir(t,i)}function wu(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=Math.sqrt(n*n+i*i),o=r/a,s=e[0]+n*o,l=e[1]+i*o;return[s,l]}function L3(t,e,r){const n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)<r}function Zc(t,e){const r=e%360*Math.PI/180;let n,i;const a=Math.cos(r),o=Math.sin(r);return n=(t[0]+5)*-1.2*a,i=(t[1]+5)*-1.2*o,n-=t[0],i-=t[1],[n,i]}function Ur(t){return t<0?360+-1*(Math.abs(t)%360):t>360?t%360:t}function R3(t){return Math.round(t*100)}function Zr(t){return Math.round(Math.max(1-Math.pow(1-t,2),.25)*100)/100}function _o(t){let e="parsedWeight";switch(t){case $e.Circle:e="circleWeight";break;case $e.Bars:e="barWeight";break;case $e.EmbedGrid:case $e.EmbedRandom:case $e.Embed:e="embedWeight";break;case $e.Pie:e="pieWeight";break;case $e.Ring:e="ringWeight";break;case $e.Random:e="randomWeight";break}return e}function U3(t){const e=t.weightMode,r=_o(e);return t.weightedPrompts?Math.max(...Object.values(t.weightedPrompts).map(n=>n[r])):0}function V3(t){const e=t.weightMode,r=_o(e);return t.weightedPrompts?Object.values(t.weightedPrompts).reduce((n,i)=>n+i[r],0):0}function Y0(t,e){const r=t.weightMode,n=_o(r);return t.weightedPrompts[e]?t.weightedPrompts[e][n]/U3(t):0}function Kn(t,e){const r=t.weightMode,n=_o(r);if(!t.weightedPrompts[e])return 0;const i=t.weightedPrompts[e][n];return R3((i||0)/V3(t))}function j3(t,e,r){const a=r*.6,o=Math.floor(t/a);return Math.ceil(e/o)*r*1.2}function jr(t,e,r){const n=j3(t,e,r)+10;return[t,n]}function $t(t){let e=t;if(t.length>40){const r=t.split(",");r.length>1?e=r[0]+"...":e=t.slice(0,20)+"..."}return e}function Pa(t,e){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function ra(t){return Vr(t,.5)}function ki(t){const e=t.currentTarget;if(!e)throw new Error("No SVG element found");var r=e.createSVGPoint();t instanceof TouchEvent?(r.x=t.touches[0].clientX,r.y=t.touches[0].clientY):(r.x=t.clientX,r.y=t.clientY);const n=e.getScreenCTM();if(!n)throw new Error("No DOM Matrix found");const i=r.matrixTransform(n.inverse());return[i.x,i.y]}function Rs(t){const e=t.reduce((r,n)=>Ir(r,n),[0,0]);return Vr(e,1/t.length)}function Z0(t,e,r){const n=t.slice();return n[20]=e[r][0],n[21]=e[r][1],n}function J0(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,a;e=new Yc({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),s=[];for(let c=0;c<o.length;c+=1)s[c]=Q0(Z0(t,o,c));const l=c=>he(s[c],1,1,()=>{s[c]=null});let h=n&&X0(t);return{c(){Le(e.$$.fragment);for(let c=0;c<s.length;c+=1)s[c].c();r=Ct(),h&&h.c(),i=Ct()},l(c){Re(e.$$.fragment,c);for(let f=0;f<s.length;f+=1)s[f].l(c);r=Ct(),h&&h.l(c),i=Ct()},m(c,f){Ue(e,c,f);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(c,f);ue(c,r,f),h&&h.m(c,f),ue(c,i,f),a=!0},p(c,f){const p={};if(f&1&&(p.xy=c[0]),f&2&&(p.radius=c[1]),e.$set(p),f&895){o=Object.entries(c[5].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=Z0(c,o,g);s[g]?(s[g].p(b,f),oe(s[g],1)):(s[g]=Q0(b),s[g].c(),oe(s[g],1),s[g].m(r.parentNode,r))}for(Gt(),g=o.length;g<s.length;g+=1)l(g);Kt()}f&32&&(n=Object.entries(c[5].weightedPrompts).length>0),n?h?(h.p(c,f),f&32&&oe(h,1)):(h=X0(c),h.c(),oe(h,1),h.m(i.parentNode,i)):h&&(Gt(),he(h,1,1,()=>{h=null}),Kt())},i(c){if(!a){oe(e.$$.fragment,c);for(let f=0;f<o.length;f+=1)oe(s[f]);oe(h),a=!0}},o(c){he(e.$$.fragment,c),s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)he(s[f]);he(h),a=!1},d(c){Ve(e,c),Au(s,c),c&&M(r),h&&h.d(c),c&&M(i)}}}function Q0(t){let e,r,n,i,a;e=new M1({props:{p1:xr(t[0],t[5].circleMarker,t[1]),p2:t[6][t[20]].xy}});function o(){return t[14](t[20])}return r=new Na({props:{xy:t[6][t[20]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:o}}),n=new mo({props:{xy:t[9](t[6][t[20]].xy,jr(t[3],$t(t[21].text).length,t[4])),color:`rgba(255,255,255,${Zr(t[6][t[20]].unitWeight)}`,wh:jr(t[3],$t(t[21].text).length,t[4]),fontSize:t[4],text:$t(t[21].text)}}),i=new N3({props:{xy:Vr(Ir(xr(t[0],t[5].circleMarker,t[1]),t[6][t[20]].xy),.5),weight:Kn(t[5],t[20]),radius:15,textColor:`rgba(255,255,255,${Zr(t[6][t[20]].unitWeight)}`,bgColor:"rgb(8, 11, 22)"}}),{c(){Le(e.$$.fragment),Le(r.$$.fragment),Le(n.$$.fragment),Le(i.$$.fragment)},l(s){Re(e.$$.fragment,s),Re(r.$$.fragment,s),Re(n.$$.fragment,s),Re(i.$$.fragment,s)},m(s,l){Ue(e,s,l),Ue(r,s,l),Ue(n,s,l),Ue(i,s,l),a=!0},p(s,l){t=s;const h={};l&35&&(h.p1=xr(t[0],t[5].circleMarker,t[1])),l&96&&(h.p2=t[6][t[20]].xy),e.$set(h);const c={};l&96&&(c.xy=t[6][t[20]].xy),l&4&&(c.radius=t[2]),l&32&&(c.handleMouseDown=o),r.$set(c);const f={};l&120&&(f.xy=t[9](t[6][t[20]].xy,jr(t[3],$t(t[21].text).length,t[4]))),l&96&&(f.color=`rgba(255,255,255,${Zr(t[6][t[20]].unitWeight)}`),l&56&&(f.wh=jr(t[3],$t(t[21].text).length,t[4])),l&16&&(f.fontSize=t[4]),l&32&&(f.text=$t(t[21].text)),n.$set(f);const p={};l&99&&(p.xy=Vr(Ir(xr(t[0],t[5].circleMarker,t[1]),t[6][t[20]].xy),.5)),l&32&&(p.weight=Kn(t[5],t[20])),l&96&&(p.textColor=`rgba(255,255,255,${Zr(t[6][t[20]].unitWeight)}`),i.$set(p)},i(s){a||(oe(e.$$.fragment,s),oe(r.$$.fragment,s),oe(n.$$.fragment,s),oe(i.$$.fragment,s),a=!0)},o(s){he(e.$$.fragment,s),he(r.$$.fragment,s),he(n.$$.fragment,s),he(i.$$.fragment,s),a=!1},d(s){Ve(e,s),Ve(r,s),Ve(n,s),Ve(i,s)}}}function X0(t){let e,r;return e=new Na({props:{xy:xr(t[0],t[5].circleMarker,t[1]),radius:10,color:"rgba(136,157,191, 1)",handleMouseDown:t[15]}}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},p(n,i){const a={};i&35&&(a.xy=xr(n[0],n[5].circleMarker,n[1])),e.$set(a)},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function z3(t){let e,r,n,i,a,o=t[6]&&t[5].weightedPrompts&&J0(t);const s=t[13].default,l=ka(s,t,t[12],null);return{c(){e=dt("svg"),o&&o.c(),r=we(),l&&l.c(),this.h()},l(h){e=pt(h,"svg",{id:!0,class:!0});var c=U(e);o&&o.l(c),c.forEach(M),r=ye(h),l&&l.l(h),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(h,c){ue(h,e,c),o&&o.m(e,null),ue(h,r,c),l&&l.m(h,c),n=!0,i||(a=[_e(e,"mousemove",t[10]),_e(e,"touchmove",t[10]),_e(e,"mouseup",t[7]),_e(e,"touchend",t[7]),_e(e,"dblclick",t[11])],i=!0)},p(h,[c]){h[6]&&h[5].weightedPrompts?o?(o.p(h,c),c&96&&oe(o,1)):(o=J0(h),o.c(),oe(o,1),o.m(e,null)):o&&(Gt(),he(o,1,1,()=>{o=null}),Kt()),l&&l.p&&(!n||c&4096)&&Ta(l,s,h,h[12],n?xa(s,h[12],c,null):Ia(h[12]),null)},i(h){n||(oe(o),oe(l,h),n=!0)},o(h){he(o),he(l,h),n=!1},d(h){h&&M(e),o&&o.d(),h&&M(r),l&&l.d(h),i=!1,Rt(a)}}}function ed(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const o=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function q3(t,e,r){let n,i;qe(t,Ke,O=>r(5,i=O));let{$$slots:a={},$$scope:o}=e,{center:s=[450,450]}=e,{radius:l=250}=e,{pointRadius:h=10}=e,{textWidth:c=150}=e,{fontSize:f=13}=e,p=[0,0],g=null;function b(O){g=null}function v(O){g=O}function m(O,C){let x=Ln(O,s,l)[0]-180;x<0&&(x+=360);const z=Zc(ra(C),x);return Ir(O,z)}function D(O){const C=L3(O,s,l)?Ln(O,s,l):Ln(wu(O,s,l),s,l);r(6,n=A(i.weightedPrompts,s,l,i.circleWeightScaling,i.circleExponentialScaling,C,i.circleAngles))}function S(O){if(p=ki(O),g==="main")D(p);else if(g){const C={...i.weightedPrompts[g]},x=wu(p,s,l),z=Ln(x,s,l)[0],G={...i.circleAngles};G[C.id]=z;const Z={...i.weightedPrompts};Z[g]=C,r(6,n=A(Z,s,l,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,G))}}function y(O){p=ki(O),D(p)}function A(O,C,x,z,G,Z,R){if(!O||!C||!x||!z||!Z)return null;let N=Object.entries(O).reduce((J,[Q,te])=>(J[Q]={xy:xr(C,[R[Q],1],x)},J),{});N=Object.entries(N).reduce((J,[Q,te])=>(J[Q]={...J[Q],distance:Pa(te.xy,xr(C,Z,x))},J),N);const q=Object.values(N).reduce((J,Q)=>J+Q.distance,0);N=Object.entries(N).reduce((J,[Q,te])=>(J[Q]={...J[Q],unitDistance:Math.round(te.distance/q*100)/100},J),N),N=Object.entries(N).reduce((J,[Q,te])=>(J[Q]={...J[Q],invertedUnitDistance:Math.round((1-te.unitDistance)*100)/100},J),N),N=Object.entries(N).reduce((J,[Q,te])=>(G?J[Q]={...J[Q],unitWeight:Math.round(Math.pow(1-te.distance/(2*x),z)*100)/100}:J[Q]={...J[Q],unitWeight:Math.round((1-te.distance/(2*x))*100)/100},J),N);const j={...O};return Object.entries(N).forEach(([J,Q])=>{j[J].circleWeight=Q.unitWeight}),Ke.update({...i,circleMarker:Z,weightedPrompts:j,circleAngles:R}),N}const F=O=>v(O),P=()=>v("main");return t.$$set=O=>{"center"in O&&r(0,s=O.center),"radius"in O&&r(1,l=O.radius),"pointRadius"in O&&r(2,h=O.pointRadius),"textWidth"in O&&r(3,c=O.textWidth),"fontSize"in O&&r(4,f=O.fontSize),"$$scope"in O&&r(12,o=O.$$scope)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(i.circleAngles).length!==Object.keys(i.weightedPrompts).length&&Ke.update({...i,circleAngles:ed(i.weightedPrompts,{})}),t.$$.dirty&35&&r(6,n=A(i.weightedPrompts,s,l,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,i.circleAngles||ed(i.weightedPrompts,{})))},[s,l,h,c,f,i,n,b,v,m,S,y,o,a,F,P]}class W3 extends Je{constructor(e){super(),Qe(this,e,q3,z3,Xe,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}let ms;const H3=new Uint8Array(16);function $3(){if(!ms&&(ms=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ms))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ms(H3)}const Pr=[];for(let t=0;t<256;++t)Pr.push((t+256).toString(16).slice(1));function G3(t,e=0){return(Pr[t[e+0]]+Pr[t[e+1]]+Pr[t[e+2]]+Pr[t[e+3]]+"-"+Pr[t[e+4]]+Pr[t[e+5]]+"-"+Pr[t[e+6]]+Pr[t[e+7]]+"-"+Pr[t[e+8]]+Pr[t[e+9]]+"-"+Pr[t[e+10]]+Pr[t[e+11]]+Pr[t[e+12]]+Pr[t[e+13]]+Pr[t[e+14]]+Pr[t[e+15]]).toLowerCase()}const K3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),td={randomUUID:K3};function bo(t,e,r){if(td.randomUUID&&!e&&!t)return td.randomUUID();t=t||{};const n=t.random||(t.rng||$3)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return G3(n)}const _s="showZeroPrompts";function Y3(){const t=rr(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[_s]?JSON.parse(localStorage[_s]):!1),{subscribe:e,update:a=>{i&&(localStorage[_s]=JSON.stringify(!!a),r(!!a))},get:()=>At(t),delete:()=>{i&&(delete localStorage[_s],r(!1))}}}const Us=Y3(),bs="useWeightOrdering";function Z3(){const t=rr(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[bs]?JSON.parse(localStorage[bs]):!1),{subscribe:e,update:a=>{i&&(localStorage[bs]=JSON.stringify(!!a),r(!!a))},get:()=>At(t),delete:()=>{i&&(delete localStorage[bs],r(!1))}}}const Bc=Z3(),Jc=Cu(Bc,t=>At(Bc));var Oc=function(t,e){return Oc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Oc(t,e)};function Qc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Oc(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Mc,Xc=function(){function t(){}return t._xfnv1a=function(e){for(var r=2166136261,n=0;n<e.length;n++)r=Math.imul(r^e.charCodeAt(n),16777619);return function(){return r+=r<<13,r^=r>>>7,r+=r<<3,r^=r>>>17,(r+=r<<5)>>>0}},t}(),J3=function(t){function e(r){var n=t.call(this)||this;return n.a=e._xfnv1a(r)(),n}return Qc(e,t),e.prototype.next=function(){var r=this.a+=1831565813;return r=Math.imul(r^r>>>15,1|r),(((r^=r+Math.imul(r^r>>>7,61|r))^r>>>14)>>>0)/4294967296},e}(Xc),Q3=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Qc(e,t),e.prototype.next=function(){this.a>>>=0,this.b>>>=0,this.c>>>=0,this.d>>>=0;var r=this.a+this.b|0;return this.a=this.b^this.b>>>9,this.b=this.c+(this.c<<3)|0,this.c=this.c<<21|this.c>>>11,this.d=this.d+1|0,r=r+this.d|0,this.c=this.c+r|0,(r>>>0)/4294967296},e}(Xc),X3=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Qc(e,t),e.prototype.next=function(){var r=this.b<<9,n=5*this.a;return n=n<<7|9*(n>>>25),this.c^=this.a,this.d^=this.b,this.b^=this.c,this.a^=this.d,this.c^=r,this.d=this.d<<11|this.d>>>21,(n>>>0)/4294967296},e}(Xc);(function(t){t.sfc32="sfc32",t.mulberry32="mulberry32",t.xoshiro128ss="xoshiro128ss"})(Mc||(Mc={}));var e6=function(){function t(e,r){r===void 0&&(r=Mc.sfc32),this.str=e,this.prng=r,this.generator=this._initializeGenerator()}return t.prototype.next=function(){return this.generator.next()},t.prototype._initializeGenerator=function(){if(function(r){return r===null}(e=this.str)||function(r){return r===void 0}(e))return this.wrap();var e;switch(this.prng){case"sfc32":return new Q3(this.str);case"mulberry32":return new J3(this.str);case"xoshiro128ss":return new X3(this.str);default:return this.wrap()}},t.prototype.wrap=function(){return{next:function(){return Math.random()}}},t}();const jl="slotSet";function t6(){const t=rr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith(jl)){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=At(t),h={...s[a]||{},...o};i&&(localStorage[`${jl}_${a}`]=JSON.stringify(h));const c={...s,[a]:h};r(c)},get:a=>At(t)[a],getAll:()=>At(t),delete:a=>{i&&delete localStorage[`${jl}_${a}`];const o={...At(t)};delete o[a],r(o)}}}const Qi=t6();function rd(){return(Math.random()*1e6).toFixed(0)}function r6(){const t=rr(rd()),{subscribe:e,set:r}=t;return{subscribe:e,get:()=>At(t),shuffle:()=>{r(rd())}}}const Ni=r6();function Vs(t){let e=t.replace(/\s+/g,"_");return e=e.toUpperCase(),"$"+e}function nd(t){const e=t.length>0&&t.length<32,r=/^[a-zA-Z0-9 ]+$/.test(t),n=/^[a-zA-Z]/.test(t),i=/[a-zA-Z0-9]$/.test(t);return e&&r&&n&&i}function n6(){const t=Qi.getAll();return Object.values(t).reduce((r,n)=>{const i=Vs(n.name);return i&&(r[i]=[...n.values]),r},{})}function i6(t,e){const r=new e6(e);return Object.entries(t).reduce((i,[a,o])=>(i[a]=[...o].sort(()=>r.next()-.5),i),{})}function yu(t,e){let r=i6(n6(),e),n=t;for(const[i,a]of Object.entries(r)){if(a.length===0)continue;let o=0;for(;n.includes(i);)o>=a.length&&(o=0),n=n.replace(i,a[o]),o++}return n}function a6(t){const e=[],r=/((?:[^:]+|:(?!:))+)(?:::(\d+(?:\.\d+)?))?(?=\s|$)/g;let n;for(;(n=r.exec(t))!==null;){const i=n[1].trim(),a=n[2]?parseFloat(n[2]):1;i&&e.push([i,a])}return e}function zl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=t.length-1;let r=t;for(;r[e]===",";)r=r.slice(0,e);return r}function ql(t){if(typeof t!="string")throw new Error("Input must be a string");const e=["-","#","*","•","◦",">","<","+","^","~","(",")","[","]","{","}"];let r=t.trim();for(;e.includes(r[0]);)r=r.slice(1).trim();return/^\d+(\.|\))\s/.test(r)&&(r=r.replace(/^\d+(\.|\))\s/,"")),r}function js(t){if(t=t.replace(/^\n+|\n+$/g,""),t.includes("::"))return a6(t);if(t.includes(`
`))return t.split(`
`).map(a=>ql(zl(a))).filter(a=>a.length>0).map(a=>[a,1]);const e=t.match(/[^.!?]+[.!?]+/g)||[],r=e.length,n=t.split(",").map(a=>ql(zl(a))).filter(a=>a.length>0),i=n.length-1;return r>i?e.map(a=>ql(zl(a))).filter(a=>a.length>0).map(a=>[a,1]):n.map(a=>[a,1])}function zs(t,e,r){let n=Object.entries(t.weightedPrompts);return e&&(n=n.sort((i,a)=>Kn(t,parseInt(a[0]))-Kn(t,parseInt(i[0])))),r||(n=n.filter(i=>r||Kn(t,parseInt(i[0])))),n}function u6(t){return t.trim().endsWith(".")}function s6(t){let e="",r=[];return t.forEach((n,i)=>{u6(n)?(r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+". ",r=[]),e+=n+" "):r.push(n.trim())}),r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+"."),e.trim()}function Pc(t,e,r,n,i){if(r)return zs(t,n,i).map(([o,s],l)=>`${yu(s.text,`${e}${o}${l}`)}::${Kn(t,parseInt(o))}`).join(" ");const a=zs(t,n,i).map(([o,s],l)=>yu(s.text,`${e}${o}${l}`));return s6(a)}function id(t,e,r){const n=t.slice();return n[4]=e[r][0],n[5]=e[r][1],n[7]=r,n}function ad(t,e){let r,n=yu(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"",i,a,o,s=Kn(e[0],parseInt(e[4]))+"",l,h,c;return{key:t,first:null,c(){r=W("span"),i=Fe(n),a=Fe("::"),o=W("b"),l=Fe(s),h=we(),this.h()},l(f){r=H(f,"SPAN",{style:!0});var p=U(r);i=Se(p,n),a=Se(p,"::"),o=H(p,"B",{});var g=U(o);l=Se(g,s),h=ye(g),g.forEach(M),p.forEach(M),this.h()},h(){B(r,"style",c=`color: rgba(255,255,255,${Math.max(.25,Y0(e[0],parseInt(e[4])))});`),this.first=r},m(f,p){ue(f,r,p),T(r,i),T(r,a),T(r,o),T(o,l),T(o,h)},p(f,p){e=f,p&15&&n!==(n=yu(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"")&&zt(i,n),p&7&&s!==(s=Kn(e[0],parseInt(e[4]))+"")&&zt(l,s),p&7&&c!==(c=`color: rgba(255,255,255,${Math.max(.25,Y0(e[0],parseInt(e[4])))});`)&&B(r,"style",c)},d(f){f&&M(r)}}}function o6(t){let e,r,n=[],i=new Map,a=zs(t[0],t[1],t[2]);const o=s=>s[4];for(let s=0;s<a.length;s+=1){let l=id(t,a,s),h=o(l);i.set(h,n[s]=ad(h,l))}return{c(){e=W("div"),r=W("p");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=H(s,"DIV",{class:!0});var l=U(e);r=H(l,"P",{class:!0});var h=U(r);for(let c=0;c<n.length;c+=1)n[c].l(h);h.forEach(M),l.forEach(M),this.h()},h(){B(r,"class","text-sm select-none"),B(e,"class","overflow-y-auto h-full")},m(s,l){ue(s,e,l),T(e,r);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(r,null)},p(s,[l]){l&15&&(a=zs(s[0],s[1],s[2]),n=Un(n,l,o,1,s,a,i,r,Jn,ad,null,id))},i:Pe,o:Pe,d(s){s&&M(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function l6(t,e,r){let n,i,a,o;return qe(t,Ke,s=>r(0,n=s)),qe(t,Jc,s=>r(1,i=s)),qe(t,Us,s=>r(2,a=s)),qe(t,Ni,s=>r(3,o=s)),[n,i,a,o]}class c6 extends Je{constructor(e){super(),Qe(this,e,l6,o6,Xe,{})}}const Ds="outputMultiPrompt";function f6(){const t=rr(!0),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Ds]?JSON.parse(localStorage[Ds]):!1),{subscribe:e,update:a=>{i&&(localStorage[Ds]=JSON.stringify(!!a),r(!!a))},get:()=>At(t),delete:()=>{i&&(delete localStorage[Ds],r(!0))}}}const kc=f6();function h6(t){let e,r,n,i=Pc(t[0],t[1],t[2],t[3],t[4])+"",a;return{c(){e=W("div"),r=W("p"),n=W("span"),a=Fe(i),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=U(e);r=H(s,"P",{class:!0});var l=U(r);n=H(l,"SPAN",{style:!0});var h=U(n);a=Se(h,i),h.forEach(M),l.forEach(M),s.forEach(M),this.h()},h(){B(n,"style","color: rgba(255,255,255,0.75});"),B(r,"class","text-sm select-none"),B(e,"class","overflow-y-auto h-full")},m(o,s){ue(o,e,s),T(e,r),T(r,n),T(n,a)},p(o,[s]){s&31&&i!==(i=Pc(o[0],o[1],o[2],o[3],o[4])+"")&&zt(a,i)},i:Pe,o:Pe,d(o){o&&M(e)}}}function d6(t,e,r){let n,i,a,o,s;return qe(t,Ke,l=>r(0,n=l)),qe(t,Ni,l=>r(1,i=l)),qe(t,kc,l=>r(2,a=l)),qe(t,Jc,l=>r(3,o=l)),qe(t,Us,l=>r(4,s=l)),[n,i,a,o,s]}class p6 extends Je{constructor(e){super(),Qe(this,e,d6,h6,Xe,{})}}const gu="promptHistory";function g6(){const t=rr([]),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",a=(i&&JSON.parse(localStorage[gu]||"[]")||[]).map(o=>({...o,date:new Date(o.date)}));return r(a),{subscribe:e,add:o=>{if(!o||!i)return;const l=[...At(t),o];localStorage[gu]=JSON.stringify(l),r(l)},update:o=>{!o||!i||(localStorage[gu]=o,r(o))},get:()=>At(t),remove:o=>{if(!i)return;const l=At(t).filter(h=>h.id!==o);localStorage[gu]=JSON.stringify(l),r(l)},delete:()=>{i&&(delete localStorage[gu],r([]))}}}const ef=g6();function v6(t){let e,r;return e=new p6({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function m6(t){let e,r;return e=new c6({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function _6(t){let e,r,n,i,a,o,s,l,h,c,f,p=t[2]?"Multi":"Single",g,b,v,m,D,S,y,A,F,P,O,C,x,z,G,Z,R,N;const q=[m6,v6],j=[];function J(Q,te){return Q[2]?0:1}return n=J(t),i=j[n]=q[n](t),{c(){e=W("div"),r=W("div"),i.c(),a=we(),o=W("div"),s=W("div"),l=W("input"),h=we(),c=W("label"),f=W("span"),g=Fe(p),b=we(),v=W("div"),m=W("input"),D=we(),S=W("label"),y=W("span"),A=Fe("Use Weight Ordering"),F=we(),P=W("div"),O=W("input"),C=we(),x=W("label"),z=W("span"),G=Fe("Include Zero Weights"),this.h()},l(Q){e=H(Q,"DIV",{class:!0});var te=U(e);r=H(te,"DIV",{class:!0});var ce=U(r);i.l(ce),ce.forEach(M),a=ye(te),o=H(te,"DIV",{class:!0});var me=U(o);s=H(me,"DIV",{class:!0});var Ee=U(s);l=H(Ee,"INPUT",{type:!0,class:!0}),h=ye(Ee),c=H(Ee,"LABEL",{class:!0});var be=U(c);f=H(be,"SPAN",{class:!0});var Oe=U(f);g=Se(Oe,p),Oe.forEach(M),be.forEach(M),Ee.forEach(M),b=ye(me),v=H(me,"DIV",{class:!0});var ke=U(v);m=H(ke,"INPUT",{type:!0,class:!0}),D=ye(ke),S=H(ke,"LABEL",{class:!0});var Ne=U(S);y=H(Ne,"SPAN",{class:!0});var ze=U(y);A=Se(ze,"Use Weight Ordering"),ze.forEach(M),Ne.forEach(M),ke.forEach(M),F=ye(me),P=H(me,"DIV",{class:!0});var tt=U(P);O=H(tt,"INPUT",{type:!0,class:!0}),C=ye(tt),x=H(tt,"LABEL",{class:!0});var at=U(x);z=H(at,"SPAN",{class:!0});var rt=U(z);G=Se(rt,"Include Zero Weights"),rt.forEach(M),at.forEach(M),tt.forEach(M),me.forEach(M),te.forEach(M),this.h()},h(){B(r,"class","normal-case font-light text-left cursor-copy bg-slate-900 rounded-t-md rounded-br-md p-4 w-full h-28 active:bg-slate-950 hover:bg-slate-800"),l.checked=t[2],B(l,"type","checkbox"),B(l,"class","toggle toggle-sm mt-2 mr-2"),B(f,"class","label-text"),B(c,"class","label w-10"),B(s,"class","mx-2 flex"),m.checked=t[1],B(m,"type","checkbox"),B(m,"class","toggle toggle-sm mt-2 mr-2"),B(y,"class","label-text"),B(S,"class","label"),B(v,"class","mx-2 flex"),O.checked=t[0],B(O,"type","checkbox"),B(O,"class","toggle toggle-sm mt-2 mr-2"),B(z,"class","label-text"),B(x,"class","label"),B(P,"class","mx-2 flex"),B(o,"class","w-full rounded-b-md flex pl-2 justify-start bg-slate-900"),B(e,"class","h-48 p-4")},m(Q,te){ue(Q,e,te),T(e,r),j[n].m(r,null),T(e,a),T(e,o),T(o,s),T(s,l),T(s,h),T(s,c),T(c,f),T(f,g),T(o,b),T(o,v),T(v,m),T(v,D),T(v,S),T(S,y),T(y,A),T(o,F),T(o,P),T(P,O),T(P,C),T(P,x),T(x,z),T(z,G),Z=!0,R||(N=[_e(r,"click",t[3]),_e(l,"change",t[4]),_e(m,"change",t[5]),_e(O,"change",t[6])],R=!0)},p(Q,[te]){let ce=n;n=J(Q),n!==ce&&(Gt(),he(j[ce],1,1,()=>{j[ce]=null}),Kt(),i=j[n],i||(i=j[n]=q[n](Q),i.c()),oe(i,1),i.m(r,null)),(!Z||te&4)&&(l.checked=Q[2]),(!Z||te&4)&&p!==(p=Q[2]?"Multi":"Single")&&zt(g,p),(!Z||te&2)&&(m.checked=Q[1]),(!Z||te&1)&&(O.checked=Q[0])},i(Q){Z||(oe(i),Z=!0)},o(Q){he(i),Z=!1},d(Q){Q&&M(e),j[n].d(),R=!1,Rt(N)}}}function b6(t,e,r){let n,i,a,o,s;qe(t,Us,p=>r(0,n=p)),qe(t,Jc,p=>r(1,i=p)),qe(t,kc,p=>r(2,a=p)),qe(t,Ni,p=>r(7,o=p)),qe(t,Ke,p=>r(8,s=p));function l(){const p=Pc(s,o,a,i,n);navigator.clipboard.writeText(p),Ni.shuffle(),ef.add({id:bo(),prompt:p,date:new Date})}function h(){kc.update(!a)}function c(){Bc.update(!i)}function f(){Us.update(!n)}return[n,i,a,l,h,c,f]}class La extends Je{constructor(e){super(),Qe(this,e,b6,_6,Xe,{})}}function ud(t){let e,r,n,i,a,o,s,l;return{c(){e=W("div"),r=W("label"),n=W("span"),i=Fe("Scaling Power"),a=we(),o=W("input"),this.h()},l(h){e=H(h,"DIV",{class:!0});var c=U(e);r=H(c,"LABEL",{class:!0});var f=U(r);n=H(f,"SPAN",{class:!0});var p=U(n);i=Se(p,"Scaling Power"),p.forEach(M),f.forEach(M),a=ye(c),o=H(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(M),this.h()},h(){B(n,"class","label-text"),B(r,"class","label"),B(o,"type","range"),B(o,"min","0.5"),B(o,"max","3"),B(o,"step","0.1"),B(o,"class","range range-xs"),B(e,"class","w-full px-2")},m(h,c){ue(h,e,c),T(e,r),T(r,n),T(n,i),T(e,a),T(e,o),nn(o,t[0]),s||(l=[_e(o,"change",t[6]),_e(o,"input",t[6])],s=!0)},p(h,c){c&1&&nn(o,h[0])},d(h){h&&M(e),s=!1,Rt(l)}}}function D6(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b,v,m,D;r=new W3({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let S=t[1]&&ud(t);return b=new La({}),{c(){e=W("div"),Le(r.$$.fragment),i=we(),a=W("div"),o=W("div"),s=W("label"),l=W("span"),h=Fe("Exponential Scaling"),c=we(),f=W("input"),p=we(),S&&S.c(),g=we(),Le(b.$$.fragment),this.h()},l(y){e=H(y,"DIV",{class:!0});var A=U(e);Re(r.$$.fragment,A),A.forEach(M),i=ye(y),a=H(y,"DIV",{class:!0});var F=U(a);o=H(F,"DIV",{class:!0});var P=U(o);s=H(P,"LABEL",{class:!0});var O=U(s);l=H(O,"SPAN",{class:!0});var C=U(l);h=Se(C,"Exponential Scaling"),C.forEach(M),O.forEach(M),c=ye(P),f=H(P,"INPUT",{type:!0,class:!0}),P.forEach(M),p=ye(F),S&&S.l(F),F.forEach(M),g=ye(y),Re(b.$$.fragment,y),this.h()},h(){B(e,"class","w-full h-full"),gi(()=>t[4].call(e)),B(l,"class","label-text"),B(s,"class","label"),B(f,"type","checkbox"),B(f,"class","toggle toggle-xs"),B(o,"class","w-52 px-2"),B(a,"class","px-2 py-4 pb-0 flex")},m(y,A){ue(y,e,A),Ue(r,e,null),n=ea(e,t[4].bind(e)),ue(y,i,A),ue(y,a,A),T(a,o),T(o,s),T(s,l),T(l,h),T(o,c),T(o,f),f.checked=t[1],T(a,p),S&&S.m(a,null),ue(y,g,A),Ue(b,y,A),v=!0,m||(D=_e(f,"change",t[5]),m=!0)},p(y,[A]){const F={};A&12&&(F.center=[Math.round(y[2]/2),Math.round(y[3]/2)]),A&12&&(F.radius=Math.round(Math.min(y[2],y[3])/2)-150),r.$set(F),A&2&&(f.checked=y[1]),y[1]?S?S.p(y,A):(S=ud(y),S.c(),S.m(a,null)):S&&(S.d(1),S=null)},i(y){v||(oe(r.$$.fragment,y),oe(b.$$.fragment,y),v=!0)},o(y){he(r.$$.fragment,y),he(b.$$.fragment,y),v=!1},d(y){y&&M(e),Ve(r),n(),y&&M(i),y&&M(a),S&&S.d(),y&&M(g),Ve(b,y),m=!1,D()}}}function w6(t,e,r){let n;qe(t,Ke,f=>r(7,n=f));let i,a,o=n.circleWeightScaling||2,s=Wc(n.circleExponentialScaling)?!0:n.circleExponentialScaling;function l(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function h(){s=this.checked,r(1,s)}function c(){o=zp(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&Ke.update({...Ke.get(),circleExponentialScaling:s,circleWeightScaling:o})},[o,s,i,a,l,h,c]}class y6 extends Je{constructor(e){super(),Qe(this,e,w6,D6,Xe,{})}}function E6(t){let e,r,n,i,a;return{c(){e=dt("line"),this.h()},l(o){e=pt(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),U(e).forEach(M),this.h()},h(){B(e,"x1",r=t[0][0]),B(e,"y1",n=t[0][1]),B(e,"x2",i=t[1][0]),B(e,"y2",a=t[1][1]),B(e,"stroke",t[3]),B(e,"stroke-width",t[2])},m(o,s){ue(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&B(e,"x1",r),s&1&&n!==(n=o[0][1])&&B(e,"y1",n),s&2&&i!==(i=o[1][0])&&B(e,"x2",i),s&2&&a!==(a=o[1][1])&&B(e,"y2",a),s&8&&B(e,"stroke",o[3]),s&4&&B(e,"stroke-width",o[2])},i:Pe,o:Pe,d(o){o&&M(e)}}}function A6(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class C6 extends Je{constructor(e){super(),Qe(this,e,A6,E6,Xe,{p1:0,p2:1,stroke:2,color:3})}}function sd(t,e,r){const n=t.slice();return n[29]=e[r][0],n[30]=e[r][1],n}function od(t){let e,r,n;e=new Yc({props:{xy:t[0],radius:t[1]}});let i=Object.entries(t[5].weightedPrompts),a=[];for(let s=0;s<i.length;s+=1)a[s]=ld(sd(t,i,s));const o=s=>he(a[s],1,1,()=>{a[s]=null});return{c(){Le(e.$$.fragment);for(let s=0;s<a.length;s+=1)a[s].c();r=Ct()},l(s){Re(e.$$.fragment,s);for(let l=0;l<a.length;l+=1)a[l].l(s);r=Ct()},m(s,l){Ue(e,s,l);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(s,l);ue(s,r,l),n=!0},p(s,l){const h={};if(l[0]&1&&(h.xy=s[0]),l[0]&2&&(h.radius=s[1]),e.$set(h),l[0]&6015){i=Object.entries(s[5].weightedPrompts);let c;for(c=0;c<i.length;c+=1){const f=sd(s,i,c);a[c]?(a[c].p(f,l),oe(a[c],1)):(a[c]=ld(f),a[c].c(),oe(a[c],1),a[c].m(r.parentNode,r))}for(Gt(),c=i.length;c<a.length;c+=1)o(c);Kt()}},i(s){if(!n){oe(e.$$.fragment,s);for(let l=0;l<i.length;l+=1)oe(a[l]);n=!0}},o(s){he(e.$$.fragment,s),a=a.filter(Boolean);for(let l=0;l<a.length;l+=1)he(a[l]);n=!1},d(s){Ve(e,s),Au(a,s),s&&M(r)}}}function ld(t){let e,r,n,i,a,o,s,l,h;e=new C6({props:{p1:t[0],p2:t[6][t[29]].xy}});function c(...b){return t[15](t[29],...b)}function f(...b){return t[16](t[29],...b)}function p(...b){return t[17](t[29],...b)}function g(){return t[18](t[29])}return a=new Na({props:{xy:t[6][t[29]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:g}}),o=new mo({props:{xy:t[9](t[6][t[29]].textXY,jr(t[3],$t(t[30].text).length,t[4])),color:`rgba(255,255,255,${Zr(t[6][t[29]].unitWeight)}`,wh:jr(t[3],$t(t[30].text).length,t[4]),fontSize:t[4],text:$t(t[30].text)}}),{c(){Le(e.$$.fragment),r=dt("path"),Le(a.$$.fragment),Le(o.$$.fragment),this.h()},l(b){Re(e.$$.fragment,b),r=pt(b,"path",{d:!0,fill:!0}),U(r).forEach(M),Re(a.$$.fragment,b),Re(o.$$.fragment,b),this.h()},h(){B(r,"d",n=cd(t[0],t[1],t[6][t[29]].angle,t[6][t[29]].angle+t[6][t[29]].angleDiff)),B(r,"fill",i=`rgba(26,47,91,${Zr(t[6][t[29]].unitWeight)/4}`)},m(b,v){Ue(e,b,v),ue(b,r,v),Ue(a,b,v),Ue(o,b,v),s=!0,l||(h=[_e(r,"mousewheel",c),_e(r,"touchstart",f),_e(r,"mousedown",p)],l=!0)},p(b,v){t=b;const m={};v[0]&1&&(m.p1=t[0]),v[0]&96&&(m.p2=t[6][t[29]].xy),e.$set(m),(!s||v[0]&99&&n!==(n=cd(t[0],t[1],t[6][t[29]].angle,t[6][t[29]].angle+t[6][t[29]].angleDiff)))&&B(r,"d",n),(!s||v[0]&96&&i!==(i=`rgba(26,47,91,${Zr(t[6][t[29]].unitWeight)/4}`))&&B(r,"fill",i);const D={};v[0]&96&&(D.xy=t[6][t[29]].xy),v[0]&4&&(D.radius=t[2]),v[0]&32&&(D.handleMouseDown=g),a.$set(D);const S={};v[0]&120&&(S.xy=t[9](t[6][t[29]].textXY,jr(t[3],$t(t[30].text).length,t[4]))),v[0]&96&&(S.color=`rgba(255,255,255,${Zr(t[6][t[29]].unitWeight)}`),v[0]&56&&(S.wh=jr(t[3],$t(t[30].text).length,t[4])),v[0]&16&&(S.fontSize=t[4]),v[0]&32&&(S.text=$t(t[30].text)),o.$set(S)},i(b){s||(oe(e.$$.fragment,b),oe(a.$$.fragment,b),oe(o.$$.fragment,b),s=!0)},o(b){he(e.$$.fragment,b),he(a.$$.fragment,b),he(o.$$.fragment,b),s=!1},d(b){Ve(e,b),b&&M(r),Ve(a,b),Ve(o,b),l=!1,Rt(h)}}}function F6(t){let e,r,n,i,a,o=t[6]&&t[5].weightedPrompts&&od(t);const s=t[14].default,l=ka(s,t,t[13],null);return{c(){e=dt("svg"),o&&o.c(),r=we(),l&&l.c(),this.h()},l(h){e=pt(h,"svg",{id:!0,class:!0});var c=U(e);o&&o.l(c),c.forEach(M),r=ye(h),l&&l.l(h),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(h,c){ue(h,e,c),o&&o.m(e,null),ue(h,r,c),l&&l.m(h,c),n=!0,i||(a=[_e(e,"mousemove",t[11]),_e(e,"touchmove",t[11]),_e(e,"mouseup",t[7]),_e(e,"touchend",t[7])],i=!0)},p(h,c){h[6]&&h[5].weightedPrompts?o?(o.p(h,c),c[0]&96&&oe(o,1)):(o=od(h),o.c(),oe(o,1),o.m(e,null)):o&&(Gt(),he(o,1,1,()=>{o=null}),Kt()),l&&l.p&&(!n||c[0]&8192)&&Ta(l,s,h,h[13],n?xa(s,h[13],c,null):Ia(h[13]),null)},i(h){n||(oe(o),oe(l,h),n=!0)},o(h){he(o),he(l,h),n=!1},d(h){h&&M(e),o&&o.d(),h&&M(r),l&&l.d(h),i=!1,Rt(a)}}}function S6(t,e){if(t.length!==e.length)return!1;const r=t.length;let n=-1;for(let i=0;i<r;i++)if(e[i]===t[0]){n=i;break}if(n===-1)return!1;for(let i=0;i<r;i++)if(t[i]!==e[(i+n)%r])return!1;return!0}function cd(t,e,r,n){const i=t[0]+e*Math.cos(r*Math.PI/180),a=t[1]+e*Math.sin(r*Math.PI/180),o=t[0]+e*Math.cos(n*Math.PI/180),s=t[1]+e*Math.sin(n*Math.PI/180),l=n-r<=180?"0":"1";return`M${t[0]},${t[1]} L${i},${a} A${e},${e} 0 ${l} 1 ${o},${s} Z`}function B6(t,e,r){let n,i;qe(t,Ke,q=>r(5,i=q));let{$$slots:a={},$$scope:o}=e,{center:s=[450,450]}=e,{radius:l=250}=e,{pointRadius:h=10}=e,{textWidth:c=150}=e,{fontSize:f=13}=e,p=[0,0],g=null,b={},v=null,m;function D(q){v=null,m=null,g=null,b={}}function S(q){v=q}function y(q,j){let J=Ln(q,s,l)[0]-180;J<0&&(J+=360);const Q=Zc(ra(j),J);return Ir(q,Q)}function A(q,j){return q?Object.entries(q).reduce((J,[Q,te],ce)=>{const me=J[Q]||ce*(360/Object.keys(q).length)-90;return J[Q]=Ur(me),J},j):null}function F(q,j){m=j}function P(q){const j=m,J={...i.pieAngles},Q=Object.entries(J).sort((ze,tt)=>Ur(ze[1])-Ur(tt[1])).map(ze=>ze[0]),te=Q.indexOf(j),ce=te+1===Q.length?0:te+1,me=Q[ce];b[j]||(b[j]=J[j]),b[me]||(b[me]=J[me]);const be=Ln(q,s,l)[0]-g,Oe={...J};Oe[j]=Ur(be+b[j]),Oe[me]=Ur(be+b[me]);const ke=Object.entries(Oe).sort((ze,tt)=>Ur(ze[1])-Ur(tt[1])).map(ze=>ze[0]);S6(Q,ke)&&r(6,n=z(i.weightedPrompts,s,l,Oe))}function O(q){const j={...i.weightedPrompts[v]},J=wu(q,s,l),Q=Ur(Ln(J,s,l)[0]),te={...i.pieAngles};te[j.id]=Q;const ce={...i.weightedPrompts};ce[v]=j,r(6,n=z(ce,s,l,te))}function C(q){q.preventDefault(),p=ki(q),v?O(p):m?P(p):g=Ln(p,s,l)[0]}function x(q,j){q.preventDefault();const J={...i.pieAngles},Q=Object.entries(J).sort((Ee,be)=>Ur(Ee[1])-Ur(be[1])).map(Ee=>Ee[0]),te=Q.indexOf(j),ce=te+1===Q.length?0:te+1,me=Q[ce];J[j]=Ur(J[j]-q.deltaY/100),J[me]=Ur(J[me]+q.deltaY/100),r(6,n=z(i.weightedPrompts,s,l,J))}function z(q,j,J,Q){if(!q||!j||!J)return null;const te=Object.entries(q).sort((Oe,ke)=>Ur(Q[Oe[0]])-Ur(Q[ke[0]])),ce=te.map((Oe,ke)=>{const Ne=ke+1===te.length?0:ke+1,ze=Q[te[Ne][0]]-Q[te[ke][0]];return ze<0?[Oe[0],360+ze]:[Oe[0],ze]}),me=Math.max(...ce.map(Oe=>Oe[1])),Ee=ce.reduce((Oe,[ke,Ne])=>{({...q[ke]});const ze=Q[ke],tt=xr(j,[ze,1],J),at=xr(j,[ze+.5*Ne,1],J),rt=Ne/me;return Oe[ke]={xy:tt,textXY:at,angle:ze,angleDiff:Ne,unitWeight:rt},Oe},{}),be={...q};return Object.entries(Ee).forEach(([Oe,ke])=>{be[Oe].pieWeight=ke.unitWeight}),Ke.update({...i,weightedPrompts:be,pieAngles:Q}),Ee}const G=(q,j)=>x(j,q),Z=(q,j)=>F(j,q),R=(q,j)=>F(j,q),N=q=>S(q);return t.$$set=q=>{"center"in q&&r(0,s=q.center),"radius"in q&&r(1,l=q.radius),"pointRadius"in q&&r(2,h=q.pointRadius),"textWidth"in q&&r(3,c=q.textWidth),"fontSize"in q&&r(4,f=q.fontSize),"$$scope"in q&&r(13,o=q.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&32&&Object.keys(i.pieAngles||{}).length!==Object.keys(i.weightedPrompts).length&&Ke.update({...i,pieAngles:A(i.weightedPrompts,{})}),t.$$.dirty[0]&35&&r(6,n=z(i.weightedPrompts,s,l,i.pieAngles||A(i.weightedPrompts,{})))},[s,l,h,c,f,i,n,D,S,y,F,C,x,o,a,G,Z,R,N]}class O6 extends Je{constructor(e){super(),Qe(this,e,B6,F6,Xe,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4},null,[-1,-1])}}function M6(t){let e,r,n,i,a,o;return r=new O6({props:{center:[Math.round(t[0]/2),Math.round(t[1]/2)],radius:Math.round(Math.min(t[0],t[1])/2)-150}}),a=new La({}),{c(){e=W("div"),Le(r.$$.fragment),i=we(),Le(a.$$.fragment),this.h()},l(s){e=H(s,"DIV",{class:!0});var l=U(e);Re(r.$$.fragment,l),l.forEach(M),i=ye(s),Re(a.$$.fragment,s),this.h()},h(){B(e,"class","w-full h-full"),gi(()=>t[2].call(e))},m(s,l){ue(s,e,l),Ue(r,e,null),n=ea(e,t[2].bind(e)),ue(s,i,l),Ue(a,s,l),o=!0},p(s,[l]){const h={};l&3&&(h.center=[Math.round(s[0]/2),Math.round(s[1]/2)]),l&3&&(h.radius=Math.round(Math.min(s[0],s[1])/2)-150),r.$set(h)},i(s){o||(oe(r.$$.fragment,s),oe(a.$$.fragment,s),o=!0)},o(s){he(r.$$.fragment,s),he(a.$$.fragment,s),o=!1},d(s){s&&M(e),Ve(r),n(),s&&M(i),Ve(a,s)}}}function P6(t,e,r){let n,i;function a(){n=this.clientWidth,i=this.clientHeight,r(0,n),r(1,i)}return[n,i,a]}class k6 extends Je{constructor(e){super(),Qe(this,e,P6,M6,Xe,{})}}const{window:T6}=fw;function fd(t,e,r){const n=t.slice();return n[26]=e[r][0],n[27]=e[r][1],n}function hd(t){let e=[],r=new Map,n,i,a,o=Object.entries(t[1]);const s=l=>l[26];for(let l=0;l<o.length;l+=1){let h=fd(t,o,l),c=s(h);r.set(c,e[l]=pd(c,h))}return i=new Na({props:{xy:t[17](t[0],t[6],t[10],t[9],!0),radius:t[3],color:"rgba(136,157,191, 1)",handleMouseDown:t[22]}}),{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=Ct(),Le(i.$$.fragment)},l(l){for(let h=0;h<e.length;h+=1)e[h].l(l);n=Ct(),Re(i.$$.fragment,l)},m(l,h){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(l,h);ue(l,n,h),Ue(i,l,h),a=!0},p(l,h){h&132983&&(o=Object.entries(l[1]),Gt(),e=Un(e,h,s,1,l,o,r,n.parentNode,hw,pd,n,fd),Kt());const c={};h&1601&&(c.xy=l[17](l[0],l[6],l[10],l[9],!0)),h&8&&(c.radius=l[3]),h&128&&(c.handleMouseDown=l[22]),i.$set(c)},i(l){if(!a){for(let h=0;h<o.length;h+=1)oe(e[h]);oe(i.$$.fragment,l),a=!0}},o(l){for(let h=0;h<e.length;h+=1)he(e[h]);he(i.$$.fragment,l),a=!1},d(l){for(let h=0;h<e.length;h+=1)e[h].d(l);l&&M(n),Ve(i,l)}}}function dd(t){let e,r;return e=new M1({props:{p1:t[17](t[27].xy,t[6],t[10],t[9],!0),p2:t[17](t[0],t[6],t[10],t[9],!0)}}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},p(n,i){const a={};i&1602&&(a.p1=n[17](n[27].xy,n[6],n[10],n[9],!0)),i&1601&&(a.p2=n[17](n[0],n[6],n[10],n[9],!0)),e.$set(a)},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function pd(t,e){let r,n,i,a,o,s=e[27].connected&&dd(e);return i=new Na({props:{xy:e[17](e[27].xy,e[6],e[10],e[9],!0),radius:e[2],color:"rgba(136,157,191, 1)"}}),a=new mo({props:{xy:[(e[27].xy[0]*e[8][0]+e[6][0])*e[9]+e[10][0]-jr(e[4],$t(e[27].text).length,e[5])[0]/2,(e[27].xy[1]*e[8][1]+e[6][1])*e[9]+e[10][1]+e[2]],color:`rgba(255,255,255,${e[27].opacity}`,wh:jr(e[4],$t(e[27].text).length,e[5]),fontSize:e[5],text:$t(e[27].text)}}),{key:t,first:null,c(){r=Ct(),s&&s.c(),n=Ct(),Le(i.$$.fragment),Le(a.$$.fragment),this.h()},l(l){r=Ct(),s&&s.l(l),n=Ct(),Re(i.$$.fragment,l),Re(a.$$.fragment,l),this.h()},h(){this.first=r},m(l,h){ue(l,r,h),s&&s.m(l,h),ue(l,n,h),Ue(i,l,h),Ue(a,l,h),o=!0},p(l,h){e=l,e[27].connected?s?(s.p(e,h),h&2&&oe(s,1)):(s=dd(e),s.c(),oe(s,1),s.m(n.parentNode,n)):s&&(Gt(),he(s,1,1,()=>{s=null}),Kt());const c={};h&1602&&(c.xy=e[17](e[27].xy,e[6],e[10],e[9],!0)),h&4&&(c.radius=e[2]),i.$set(c);const f={};h&1910&&(f.xy=[(e[27].xy[0]*e[8][0]+e[6][0])*e[9]+e[10][0]-jr(e[4],$t(e[27].text).length,e[5])[0]/2,(e[27].xy[1]*e[8][1]+e[6][1])*e[9]+e[10][1]+e[2]]),h&2&&(f.color=`rgba(255,255,255,${e[27].opacity}`),h&50&&(f.wh=jr(e[4],$t(e[27].text).length,e[5])),h&32&&(f.fontSize=e[5]),h&2&&(f.text=$t(e[27].text)),a.$set(f)},i(l){o||(oe(s),oe(i.$$.fragment,l),oe(a.$$.fragment,l),o=!0)},o(l){he(s),he(i.$$.fragment,l),he(a.$$.fragment,l),o=!1},d(l){l&&M(r),s&&s.d(l),l&&M(n),Ve(i,l),Ve(a,l)}}}function I6(t){let e,r,n=Object.entries(t[1]).length>0,i,a,o,s=n&&hd(t);return{c(){e=W("div"),r=dt("svg"),s&&s.c(),this.h()},l(l){e=H(l,"DIV",{class:!0});var h=U(e);r=pt(h,"svg",{id:!0,class:!0});var c=U(r);s&&s.l(c),c.forEach(M),h.forEach(M),this.h()},h(){B(r,"id","svg"),B(r,"class","w-full h-full outline-none"),B(e,"class","w-full h-full")},m(l,h){ue(l,e,h),T(e,r),s&&s.m(r,null),i=!0,a||(o=[_e(T6,"keydown",t[16]),_e(r,"mousewheel",t[15]),_e(r,"mousemove",t[13]),_e(r,"touchmove",t[13]),_e(r,"mouseup",t[14]),_e(r,"touchend",t[14]),_e(r,"dblclick",t[12]),_e(r,"focusin",t[23]),_e(r,"focusout",t[24])],a=!0)},p(l,[h]){h&2&&(n=Object.entries(l[1]).length>0),n?s?(s.p(l,h),h&2&&oe(s,1)):(s=hd(l),s.c(),oe(s,1),s.m(r,null)):s&&(Gt(),he(s,1,1,()=>{s=null}),Kt())},i(l){i||(oe(s),i=!0)},o(l){he(s),i=!1},d(l){l&&M(e),s&&s.d(),a=!1,Rt(o)}}}function x6(t){var e=!1;return t.deltaY?t.deltaY===t.deltaY*-3&&(e=!0):t.deltaMode===0&&(e=!0),e}function N6(t,e,r){let{onMarkerMove:n=R=>{}}=e,{dataPoints:i}=e,{center:a=[100,100]}=e,{dimensions:o=[100,100]}=e,{pointRadius:s=4}=e,{markerRadius:l=10}=e,{textWidth:h=150}=e,{fontSize:c=12}=e,{innerPad:f=100}=e,{markerLocation:p=[.5,.5]}=e,g=!1,b=o,v=[0,0],m=1,D=[0,0],S=!0;function y(R){const N=ki(R);r(0,p=C(Vr(vs(N,D),1/m))),n(p)}function A(R){if(g){const N=ki(R);r(0,p=C(Vr(vs(N,D),1/m))),n(p)}}function F(R){r(7,g=!1)}function P(R){R.preventDefault();const N=x6(R),q=ki(R),j=Vr(vs(q,D),1/m);r(9,m=Math.min(Math.max(m+(N?-1:1)*R.deltaY*-.01,.5),20)),r(10,D=[q[0]-j[0]*m,q[1]-j[1]*m])}function O(R){S&&(R=R||window.event,R.key==="ArrowUp"||R.key==="w"?r(10,D[1]+=10,D):R.key=="ArrowDown"||R.key=="s"?r(10,D[1]-=10,D):R.key=="ArrowLeft"||R.key=="a"?r(10,D[0]+=10,D):(R.key=="ArrowRight"||R.key=="d")&&r(10,D[0]-=10,D))}function C(R){let N=vs(R,v);return[N[0]/b[0],N[1]/b[1]]}function x(R,N,q,j,J=!1){let Q=R;return J&&(Q=Ir(N,[R[0]*b[0],R[1]*b[1]])),Ir(Vr(Q,j),q)}const z=()=>r(7,g=!0),G=()=>r(11,S=!0),Z=()=>r(11,S=!1);return t.$$set=R=>{"onMarkerMove"in R&&r(18,n=R.onMarkerMove),"dataPoints"in R&&r(1,i=R.dataPoints),"center"in R&&r(19,a=R.center),"dimensions"in R&&r(20,o=R.dimensions),"pointRadius"in R&&r(2,s=R.pointRadius),"markerRadius"in R&&r(3,l=R.markerRadius),"textWidth"in R&&r(4,h=R.textWidth),"fontSize"in R&&r(5,c=R.fontSize),"innerPad"in R&&r(21,f=R.innerPad),"markerLocation"in R&&r(0,p=R.markerLocation)},t.$$.update=()=>{if(t.$$.dirty&3145792){const R=Math.min(...o),N=o[0]===R,q=o[1]===R;r(6,v=[Math.max(N?0:(o[0]-R)/2,f),Math.max(q?0:(o[1]-R)/2,f)]),r(8,b=[o[0]-2*v[0],o[1]-2*v[1]])}},[p,i,s,l,h,c,v,g,b,m,D,S,y,A,F,P,O,x,n,a,o,f,z,G,Z]}class tf extends Je{constructor(e){super(),Qe(this,e,N6,I6,Xe,{onMarkerMove:18,dataPoints:1,center:19,dimensions:20,pointRadius:2,markerRadius:3,textWidth:4,fontSize:5,innerPad:21,markerLocation:0})}}function gd(t){let e,r,n,i,a,o,s,l;return{c(){e=W("div"),r=W("label"),n=W("span"),i=Fe("Scaling Power"),a=we(),o=W("input"),this.h()},l(h){e=H(h,"DIV",{class:!0});var c=U(e);r=H(c,"LABEL",{class:!0});var f=U(r);n=H(f,"SPAN",{class:!0});var p=U(n);i=Se(p,"Scaling Power"),p.forEach(M),f.forEach(M),a=ye(c),o=H(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(M),this.h()},h(){B(n,"class","label-text"),B(r,"class","label"),o.value=t[2],B(o,"type","range"),B(o,"min","0.5"),B(o,"max","3"),B(o,"step","0.1"),B(o,"class","range range-sm"),B(e,"class","w-full px-2")},m(h,c){ue(h,e,c),T(e,r),T(r,n),T(n,i),T(e,a),T(e,o),s||(l=_e(o,"change",t[11]),s=!0)},p(h,c){c&4&&(o.value=h[2])},d(h){h&&M(e),s=!1,l()}}}function vd(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b,v,m,D,S,y,A,F,P,O;return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=Fe("Clusters"),o=we(),s=W("div"),l=W("button"),h=Fe("0"),c=we(),f=W("button"),p=Fe("2"),g=we(),b=W("button"),v=Fe("4"),m=we(),D=W("button"),S=Fe("6"),y=we(),A=W("button"),F=Fe("8"),this.h()},l(C){e=H(C,"DIV",{class:!0});var x=U(e);r=H(x,"DIV",{class:!0});var z=U(r);n=H(z,"LABEL",{class:!0});var G=U(n);i=H(G,"SPAN",{class:!0});var Z=U(i);a=Se(Z,"Clusters"),Z.forEach(M),G.forEach(M),o=ye(z),s=H(z,"DIV",{class:!0});var R=U(s);l=H(R,"BUTTON",{class:!0});var N=U(l);h=Se(N,"0"),N.forEach(M),c=ye(R),f=H(R,"BUTTON",{class:!0});var q=U(f);p=Se(q,"2"),q.forEach(M),g=ye(R),b=H(R,"BUTTON",{class:!0});var j=U(b);v=Se(j,"4"),j.forEach(M),m=ye(R),D=H(R,"BUTTON",{class:!0});var J=U(D);S=Se(J,"6"),J.forEach(M),y=ye(R),A=H(R,"BUTTON",{class:!0});var Q=U(A);F=Se(Q,"8"),Q.forEach(M),R.forEach(M),z.forEach(M),x.forEach(M),this.h()},h(){B(i,"class","label-text"),B(n,"class","label pb-1 m-0"),B(l,"class","btn btn-xs"),Ye(l,"btn-active",t[7]===0),B(f,"class","btn btn-xs"),Ye(f,"btn-active",t[7]===2),Ye(f,"btn-disabled",t[9]<2),B(b,"class","btn btn-xs"),Ye(b,"btn-active",t[7]===4),Ye(b,"btn-disabled",t[9]<4),B(D,"class","btn btn-xs"),Ye(D,"btn-active",t[7]===6),Ye(D,"btn-disabled",t[9]<6),B(A,"class","btn btn-xs"),Ye(A,"btn-active",t[7]===8),Ye(A,"btn-disabled",t[9]<8),B(s,"class","btn-group btn-group-horizontal p-0"),B(r,"class",""),B(e,"class","")},m(C,x){ue(C,e,x),T(e,r),T(r,n),T(n,i),T(i,a),T(r,o),T(r,s),T(s,l),T(l,h),T(s,c),T(s,f),T(f,p),T(s,g),T(s,b),T(b,v),T(s,m),T(s,D),T(D,S),T(s,y),T(s,A),T(A,F),P||(O=[_e(l,"click",t[13]),_e(f,"click",t[14]),_e(b,"click",t[15]),_e(D,"click",t[16]),_e(A,"click",t[17])],P=!0)},p(C,x){x&128&&Ye(l,"btn-active",C[7]===0),x&128&&Ye(f,"btn-active",C[7]===2),x&512&&Ye(f,"btn-disabled",C[9]<2),x&128&&Ye(b,"btn-active",C[7]===4),x&512&&Ye(b,"btn-disabled",C[9]<4),x&128&&Ye(D,"btn-active",C[7]===6),x&512&&Ye(D,"btn-disabled",C[9]<6),x&128&&Ye(A,"btn-active",C[7]===8),x&512&&Ye(A,"btn-disabled",C[9]<8)},d(C){C&&M(e),P=!1,Rt(O)}}}function L6(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b,v,m,D,S,y,A,F,P,O,C,x,z=t[0]&&gd(t),G=t[9]>0&&vd(t);return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=Fe("Exponential Scaling"),o=we(),s=W("input"),l=we(),z&&z.c(),h=we(),c=W("div"),f=W("label"),p=W("span"),g=Fe(t[4]),b=Fe("/"),v=Fe(t[5]),m=Fe(" Prompts"),D=we(),S=W("input"),y=we(),G&&G.c(),A=we(),F=W("div"),P=W("button"),O=Fe("Shuffle"),this.h()},l(Z){e=H(Z,"DIV",{class:!0});var R=U(e);r=H(R,"DIV",{class:!0});var N=U(r);n=H(N,"LABEL",{class:!0});var q=U(n);i=H(q,"SPAN",{class:!0});var j=U(i);a=Se(j,"Exponential Scaling"),j.forEach(M),q.forEach(M),o=ye(N),s=H(N,"INPUT",{type:!0,class:!0}),N.forEach(M),l=ye(R),z&&z.l(R),h=ye(R),c=H(R,"DIV",{class:!0});var J=U(c);f=H(J,"LABEL",{class:!0});var Q=U(f);p=H(Q,"SPAN",{class:!0});var te=U(p);g=Se(te,t[4]),b=Se(te,"/"),v=Se(te,t[5]),m=Se(te," Prompts"),te.forEach(M),Q.forEach(M),D=ye(J),S=H(J,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),J.forEach(M),y=ye(R),G&&G.l(R),A=ye(R),F=H(R,"DIV",{class:!0});var ce=U(F);P=H(ce,"BUTTON",{class:!0});var me=U(P);O=Se(me,"Shuffle"),me.forEach(M),ce.forEach(M),R.forEach(M),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),B(s,"type","checkbox"),B(s,"class","toggle toggle-sm"),s.checked=t[0],B(r,"class","min-w-max px-2"),B(p,"class","label-text"),B(f,"class","label"),S.value=t[4],B(S,"type","range"),B(S,"min","1"),B(S,"max",t[5]),B(S,"step","1"),B(S,"class","range range-sm"),B(c,"class","w-full px-2"),B(P,"class","btn btn-xs btn-primary"),B(F,"class","w-32 px-2 pb-1 flex flex-col justify-end"),B(e,"class","px-2 py-4 pb-0 flex")},m(Z,R){ue(Z,e,R),T(e,r),T(r,n),T(n,i),T(i,a),T(r,o),T(r,s),T(e,l),z&&z.m(e,null),T(e,h),T(e,c),T(c,f),T(f,p),T(p,g),T(p,b),T(p,v),T(p,m),T(c,D),T(c,S),T(e,y),G&&G.m(e,null),T(e,A),T(e,F),T(F,P),T(P,O),C||(x=[_e(s,"change",function(){Ba(t[1])&&t[1].apply(this,arguments)}),_e(S,"change",t[12]),_e(P,"click",function(){Ba(t[10])&&t[10].apply(this,arguments)})],C=!0)},p(Z,[R]){t=Z,R&1&&(s.checked=t[0]),t[0]?z?z.p(t,R):(z=gd(t),z.c(),z.m(e,h)):z&&(z.d(1),z=null),R&16&&zt(g,t[4]),R&32&&zt(v,t[5]),R&16&&(S.value=t[4]),R&32&&B(S,"max",t[5]),t[9]>0?G?G.p(t,R):(G=vd(t),G.c(),G.m(e,A)):G&&(G.d(1),G=null)},i:Pe,o:Pe,d(Z){Z&&M(e),z&&z.d(),G&&G.d(),C=!1,Rt(x)}}}function R6(t,e,r){let{useExponentialScaling:n=!1}=e,{toggleExponentialScaling:i=()=>{}}=e,{exponentialScaling:a=2}=e,{setExponentialScaling:o=()=>{}}=e,{connectionLimit:s=1}=e,{maxConnectionLimit:l=1}=e,{setConnectionLimit:h=()=>{}}=e,{clusterCount:c=0}=e,{setClusterCount:f=()=>{}}=e,{maxClusterCount:p=0}=e,{onShuffle:g=()=>{}}=e;const b=F=>o(parseFloat(F.target.value)),v=F=>h(parseInt(F.target.value)),m=()=>f(0),D=()=>f(2),S=()=>f(4),y=()=>f(6),A=()=>f(8);return t.$$set=F=>{"useExponentialScaling"in F&&r(0,n=F.useExponentialScaling),"toggleExponentialScaling"in F&&r(1,i=F.toggleExponentialScaling),"exponentialScaling"in F&&r(2,a=F.exponentialScaling),"setExponentialScaling"in F&&r(3,o=F.setExponentialScaling),"connectionLimit"in F&&r(4,s=F.connectionLimit),"maxConnectionLimit"in F&&r(5,l=F.maxConnectionLimit),"setConnectionLimit"in F&&r(6,h=F.setConnectionLimit),"clusterCount"in F&&r(7,c=F.clusterCount),"setClusterCount"in F&&r(8,f=F.setClusterCount),"maxClusterCount"in F&&r(9,p=F.maxClusterCount),"onShuffle"in F&&r(10,g=F.onShuffle)},[n,i,a,o,s,l,h,c,f,p,g,b,v,m,D,S,y,A]}class rf extends Je{constructor(e){super(),Qe(this,e,R6,L6,Xe,{useExponentialScaling:0,toggleExponentialScaling:1,exponentialScaling:2,setExponentialScaling:3,connectionLimit:4,maxConnectionLimit:5,setConnectionLimit:6,clusterCount:7,setClusterCount:8,maxClusterCount:9,onShuffle:10})}}const qs=rr({});var Tc={},U6={get exports(){return Tc},set exports(t){Tc=t}},Ws={},V6={get exports(){return Ws},set exports(t){Ws=t}},md;function j6(){return md||(md=1,function(t){function e(r,n,i,a){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,i,a)}e.prototype.run=function(r,n,i,a){this._init(r,n,i,a);for(var o=0;o<this._datasetLength;o++)if(this._visited[o]!==1){this._visited[o]=1;var s=this._regionQuery(o);if(s.length<this.minPts)this.noise.push(o);else{var l=this.clusters.length;this.clusters.push([]),this._addToCluster(o,l),this._expandCluster(l,s)}}return this.clusters},e.prototype._init=function(r,n,i,a){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),i&&(this.minPts=i),a&&(this.distance=a)},e.prototype._expandCluster=function(r,n){for(var i=0;i<n.length;i++){var a=n[i];if(this._visited[a]!==1){this._visited[a]=1;var o=this._regionQuery(a);o.length>=this.minPts&&(n=this._mergeArrays(n,o))}this._assigned[a]!==1&&this._addToCluster(a,r)}},e.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1},e.prototype._regionQuery=function(r){for(var n=[],i=0;i<this._datasetLength;i++){var a=this.distance(this.dataset[r],this.dataset[i]);a<this.epsilon&&n.push(i)}return n},e.prototype._mergeArrays=function(r,n){for(var i=n.length,a=0;a<i;a++){var o=n[a];r.indexOf(o)<0&&r.push(o)}return r},e.prototype._euclideanDistance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;)i+=(r[a]-n[a])*(r[a]-n[a]);return Math.sqrt(i)},t.exports&&(t.exports=e)}(V6)),Ws}var Hs={},z6={get exports(){return Hs},set exports(t){Hs=t}},_d;function q6(){return _d||(_d=1,function(t){function e(r,n,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,i)}e.prototype.init=function(r,n,i){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof i<"u"&&(this.distance=i)},e.prototype.run=function(r,n){this.init(r,n);for(var i=this.dataset.length,a=0;a<this.k;a++)this.centroids[a]=this.randomCentroid();for(var o=!0;o;){o=this.assign();for(var s=0;s<this.k;s++){for(var l=new Array(p),h=0,c=0;c<p;c++)l[c]=0;for(var f=0;f<i;f++){var p=this.dataset[f].length;if(s===this.assignments[f]){for(var c=0;c<p;c++)l[c]+=this.dataset[f][c];h++}}if(h>0){for(var c=0;c<p;c++)l[c]/=h;this.centroids[s]=l}else this.centroids[s]=this.randomCentroid(),o=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,i;do i=Math.round(Math.random()*r),n=this.dataset[i];while(this.centroids.indexOf(n)>=0);return n},e.prototype.assign=function(){for(var r=!1,n=this.dataset.length,i,a=0;a<n;a++)i=this.argmin(this.dataset[a],this.centroids,this.distance),i!=this.assignments[a]&&(this.assignments[a]=i,r=!0);return r},e.prototype.getClusters=function(){for(var r=new Array(this.k),n,i=0;i<this.assignments.length;i++)n=this.assignments[i],typeof r[n]>"u"&&(r[n]=[]),r[n].push(i);return r},e.prototype.argmin=function(r,n,i){for(var a=Number.MAX_VALUE,o=0,s=n.length,l,h=0;h<s;h++)l=i(r,n[h]),l<a&&(a=l,o=h);return o},e.prototype.distance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;){var o=r[a]-n[a];i+=o*o}return Math.sqrt(i)},t.exports&&(t.exports=e)}(z6)),Hs}var $s={},W6={get exports(){return $s},set exports(t){$s=t}},Gs={},H6={get exports(){return Gs},set exports(t){Gs=t}},bd;function P1(){return bd||(bd=1,function(t){function e(r,n,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,i)}e.prototype.insert=function(r,n){for(var i=this._queue.length,a=i;a--;){var o=this._priorities[a];this._sorting==="desc"?n>o&&(i=a):n<o&&(i=a)}this._insertAt(r,n,i)},e.prototype.remove=function(r){for(var n=this._queue.length;n--;){var i=this._queue[n];if(r===i){this._queue.splice(n,1),this._priorities.splice(n,1);break}}},e.prototype.forEach=function(r){this._queue.forEach(r)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(r){return this._priorities[r]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,i=this._queue.length;n<i;n++)r.push([this._queue[n],this._priorities[n]]);return r},e.prototype._init=function(r,n,i){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var a=0;a<r.length;a++)this.insert(r[a],n[a])}i&&(this._sorting=i)},e.prototype._insertAt=function(r,n,i){this._queue.length===i?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(i,0,r),this._priorities.splice(i,0,n))},t.exports&&(t.exports=e)}(H6)),Gs}var Dd;function $6(){return Dd||(Dd=1,function(t){if(t.exports)var e=P1();function r(n,i,a,o){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,i,a,o)}r.prototype.run=function(n,i,a,o){this._init(n,i,a,o);for(var s=0,l=this.dataset.length;s<l;s++)if(this._processed[s]!==1){this._processed[s]=1,this.clusters.push([s]);var h=this.clusters.length-1;this._orderedList.push(s);var c=new e(null,null,"asc"),f=this._regionQuery(s);this._distanceToCore(s)!==void 0&&(this._updateQueue(s,f,c),this._expandCluster(h,c))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var n=[],i=0,a=this._orderedList.length;i<a;i++){var o=this._orderedList[i],s=this._reachability[o];n.push([o,s])}return n},r.prototype._init=function(n,i,a,o){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}i&&(this.epsilon=i),a&&(this.minPts=a),o&&(this.distance=o)},r.prototype._updateQueue=function(n,i,a){var o=this;this._coreDistance=this._distanceToCore(n),i.forEach(function(s){if(o._processed[s]===void 0){var l=o.distance(o.dataset[n],o.dataset[s]),h=Math.max(o._coreDistance,l);o._reachability[s]===void 0?(o._reachability[s]=h,a.insert(s,h)):h<o._reachability[s]&&(o._reachability[s]=h,a.remove(s),a.insert(s,h))}})},r.prototype._expandCluster=function(n,i){for(var a=i.getElements(),o=0,s=a.length;o<s;o++){var l=a[o];if(this._processed[l]===void 0){var h=this._regionQuery(l);this._processed[l]=1,this.clusters[n].push(l),this._orderedList.push(l),this._distanceToCore(l)!==void 0&&(this._updateQueue(l,h,i),this._expandCluster(n,i))}}},r.prototype._distanceToCore=function(n){for(var i=this.epsilon,a=0;a<i;a++){var o=this._regionQuery(n,a);if(o.length>=this.minPts)return a}},r.prototype._regionQuery=function(n,i){i=i||this.epsilon;for(var a=[],o=0,s=this.dataset.length;o<s;o++)this.distance(this.dataset[n],this.dataset[o])<i&&a.push(o);return a},r.prototype._euclideanDistance=function(n,i){for(var a=0,o=Math.min(n.length,i.length);o--;)a+=(n[o]-i[o])*(n[o]-i[o]);return Math.sqrt(a)},t.exports&&(t.exports=r)}(W6)),$s}(function(t){t.exports&&(t.exports={DBSCAN:j6(),KMEANS:q6(),OPTICS:$6(),PriorityQueue:P1()})})(U6);var Ks={},G6={get exports(){return Ks},set exports(t){Ks=t}},Ys={},K6={get exports(){return Ys},set exports(t){Ys=t}},Sa=typeof Reflect=="object"?Reflect:null,wd=Sa&&typeof Sa.apply=="function"?Sa.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Cs;Sa&&typeof Sa.ownKeys=="function"?Cs=Sa.ownKeys:Object.getOwnPropertySymbols?Cs=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Cs=function(e){return Object.getOwnPropertyNames(e)};function Y6(t){console&&console.warn&&console.warn(t)}var k1=Number.isNaN||function(e){return e!==e};function It(){It.init.call(this)}K6.exports=It;Ys.once=X6;It.EventEmitter=It;It.prototype._events=void 0;It.prototype._eventsCount=0;It.prototype._maxListeners=void 0;var yd=10;function Do(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(It,"defaultMaxListeners",{enumerable:!0,get:function(){return yd},set:function(t){if(typeof t!="number"||t<0||k1(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");yd=t}});It.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};It.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||k1(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function T1(t){return t._maxListeners===void 0?It.defaultMaxListeners:t._maxListeners}It.prototype.getMaxListeners=function(){return T1(this)};It.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[e];if(l===void 0)return!1;if(typeof l=="function")wd(l,this,r);else for(var h=l.length,c=R1(l,h),n=0;n<h;++n)wd(c[n],this,r);return!0};function I1(t,e,r,n){var i,a,o;if(Do(r),a=t._events,a===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),o=a[e]),o===void 0)o=a[e]=r,++t._eventsCount;else if(typeof o=="function"?o=a[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=T1(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=o.length,Y6(s)}return t}It.prototype.addListener=function(e,r){return I1(this,e,r,!1)};It.prototype.on=It.prototype.addListener;It.prototype.prependListener=function(e,r){return I1(this,e,r,!0)};function Z6(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function x1(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=Z6.bind(n);return i.listener=r,n.wrapFn=i,i}It.prototype.once=function(e,r){return Do(r),this.on(e,x1(this,e,r)),this};It.prototype.prependOnceListener=function(e,r){return Do(r),this.prependListener(e,x1(this,e,r)),this};It.prototype.removeListener=function(e,r){var n,i,a,o,s;if(Do(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){s=n[o].listener,a=o;break}if(a<0)return this;a===0?n.shift():J6(n,a),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this};It.prototype.off=It.prototype.removeListener;It.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var a=Object.keys(n),o;for(i=0;i<a.length;++i)o=a[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function N1(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Q6(i):R1(i,i.length)}It.prototype.listeners=function(e){return N1(this,e,!0)};It.prototype.rawListeners=function(e){return N1(this,e,!1)};It.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):L1.call(t,e)};It.prototype.listenerCount=L1;function L1(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}It.prototype.eventNames=function(){return this._eventsCount>0?Cs(this._events):[]};function R1(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function J6(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Q6(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function X6(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,a),n(o)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}U1(t,e,a,{once:!0}),e!=="error"&&eC(t,i,{once:!0})})}function eC(t,e,r){typeof t.on=="function"&&U1(t,"error",e,r)}function U1(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(a){n.once&&t.removeEventListener(e,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}function tC(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}var rC=tC;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var nC=function(t){return t!=null&&(V1(t)||iC(t)||!!t._isBuffer)};function V1(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function iC(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&V1(t.slice(0,0))}var aC=rC,uC=nC,sC=typeof Float64Array<"u";function oC(t,e){return t[0]-e[0]}function lC(){var t=this.stride,e=new Array(t.length),r;for(r=0;r<e.length;++r)e[r]=[Math.abs(t[r]),r];e.sort(oC);var n=new Array(e.length);for(r=0;r<n.length;++r)n[r]=e[r][1];return n}function cC(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n=t==="generic";if(e===-1){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",v=new Function(i);return v()}else if(e===0){var i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",v=new Function("TrivialArray",i);return v(Zs[t][0])}var i=["'use strict'"],a=aC(e),o=a.map(function(m){return"i"+m}),s="this.offset+"+a.map(function(m){return"this.stride["+m+"]*i"+m}).join("+"),l=a.map(function(m){return"b"+m}).join(","),h=a.map(function(m){return"c"+m}).join(",");i.push("function "+r+"(a,"+l+","+h+",d){this.data=a","this.shape=["+l+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(m){return"this.shape["+m+"]"}).join("*"),"}})"),e===1?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+r+"_order(){"),e===2?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+o.join(",")+",v){"),n?i.push("return this.data.set("+s+",v)}"):i.push("return this.data["+s+"]=v}"),i.push("proto.get=function "+r+"_get("+o.join(",")+"){"),n?i.push("return this.data.get("+s+")}"):i.push("return this.data["+s+"]}"),i.push("proto.index=function "+r+"_index(",o.join(),"){return "+s+"}"),i.push("proto.hi=function "+r+"_hi("+o.join(",")+"){return new "+r+"(this.data,"+a.map(function(m){return["(typeof i",m,"!=='number'||i",m,"<0)?this.shape[",m,"]:i",m,"|0"].join("")}).join(",")+","+a.map(function(m){return"this.stride["+m+"]"}).join(",")+",this.offset)}");var c=a.map(function(m){return"a"+m+"=this.shape["+m+"]"}),f=a.map(function(m){return"c"+m+"=this.stride["+m+"]"});i.push("proto.lo=function "+r+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+c.join(",")+","+f.join(","));for(var p=0;p<e;++p)i.push("if(typeof i"+p+"==='number'&&i"+p+">=0){d=i"+p+"|0;b+=c"+p+"*d;a"+p+"-=d}");i.push("return new "+r+"(this.data,"+a.map(function(m){return"a"+m}).join(",")+","+a.map(function(m){return"c"+m}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+o.join(",")+"){var "+a.map(function(m){return"a"+m+"=this.shape["+m+"]"}).join(",")+","+a.map(function(m){return"b"+m+"=this.stride["+m+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var p=0;p<e;++p)i.push("if(typeof i"+p+"==='number'){d=i"+p+"|0;if(d<0){c+=b"+p+"*(a"+p+"-1);a"+p+"=ceil(-a"+p+"/d)}else{a"+p+"=ceil(a"+p+"/d)}b"+p+"*=d}");i.push("return new "+r+"(this.data,"+a.map(function(m){return"a"+m}).join(",")+","+a.map(function(m){return"b"+m}).join(",")+",c)}");for(var g=new Array(e),b=new Array(e),p=0;p<e;++p)g[p]="a[i"+p+"]",b[p]="b[i"+p+"]";i.push("proto.transpose=function "+r+"_transpose("+o+"){"+o.map(function(m,D){return m+"=("+m+"===undefined?"+D+":"+m+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+b.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+o+"){var a=[],b=[],c=this.offset");for(var p=0;p<e;++p)i.push("if(typeof i"+p+"==='number'&&i"+p+">=0){c=(c+this.stride["+p+"]*i"+p+")|0}else{a.push(this.shape["+p+"]);b.push(this.stride["+p+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(m){return"shape["+m+"]"}).join(",")+","+a.map(function(m){return"stride["+m+"]"}).join(",")+",offset)}");var v=new Function("CTOR_LIST","ORDER",i.join(`
`));return v(Zs[t],lC)}function fC(t){if(uC(t))return"buffer";if(sC)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var Zs={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function hC(t,e,r,n){if(t===void 0){var h=Zs.array[0];return h([])}else typeof t=="number"&&(t=[t]);e===void 0&&(e=[t.length]);var i=e.length;if(r===void 0){r=new Array(i);for(var a=i-1,o=1;a>=0;--a)r[a]=o,o*=e[a]}if(n===void 0){n=0;for(var a=0;a<i;++a)r[a]<0&&(n-=(e[a]-1)*r[a])}for(var s=fC(t),l=Zs[s];l.length<=i+1;)l.push(cC(s,l.length-1));var h=l[i+1];return h(t,e,r,n)}var Ra=hC,wo={};function dC(t,e){for(var r=1,n=t.length,i=t[0],a=t[0],o=1;o<n;++o)if(a=i,i=t[o],e(i,a)){if(o===r){r++;continue}t[r++]=i}return t.length=r,t}function pC(t){for(var e=1,r=t.length,n=t[0],i=t[0],a=1;a<r;++a,i=n)if(i=n,n=t[a],n!==i){if(a===e){e++;continue}t[e++]=n}return t.length=e,t}function gC(t,e,r){return t.length===0?t:e?(r||t.sort(e),dC(t,e)):(r||t.sort(),pC(t))}var j1=gC,vC=j1;function z1(t,e,r){var n=t.length,i=e.arrayArgs.length,a=e.indexArgs.length>0,o=[],s=[],l=0,h=0,c,f;for(c=0;c<n;++c)s.push(["i",c,"=0"].join(""));for(f=0;f<i;++f)for(c=0;c<n;++c)h=l,l=t[c],c===0?s.push(["d",f,"s",c,"=t",f,"p",l].join("")):s.push(["d",f,"s",c,"=(t",f,"p",l,"-s",h,"*t",f,"p",h,")"].join(""));for(s.length>0&&o.push("var "+s.join(",")),c=n-1;c>=0;--c)l=t[c],o.push(["for(i",c,"=0;i",c,"<s",l,";++i",c,"){"].join(""));for(o.push(r),c=0;c<n;++c){for(h=l,l=t[c],f=0;f<i;++f)o.push(["p",f,"+=d",f,"s",c].join(""));a&&(c>0&&o.push(["index[",h,"]-=s",h].join("")),o.push(["++index[",l,"]"].join(""))),o.push("}")}return o.join(`
`)}function mC(t,e,r,n){for(var i=e.length,a=r.arrayArgs.length,o=r.blockSize,s=r.indexArgs.length>0,l=[],h=0;h<a;++h)l.push(["var offset",h,"=p",h].join(""));for(var h=t;h<i;++h)l.push(["for(var j"+h+"=SS[",e[h],"]|0;j",h,">0;){"].join("")),l.push(["if(j",h,"<",o,"){"].join("")),l.push(["s",e[h],"=j",h].join("")),l.push(["j",h,"=0"].join("")),l.push(["}else{s",e[h],"=",o].join("")),l.push(["j",h,"-=",o,"}"].join("")),s&&l.push(["index[",e[h],"]=j",h].join(""));for(var h=0;h<a;++h){for(var c=["offset"+h],f=t;f<i;++f)c.push(["j",f,"*t",h,"p",e[f]].join(""));l.push(["p",h,"=(",c.join("+"),")"].join(""))}l.push(z1(e,r,n));for(var h=t;h<i;++h)l.push("}");return l.join(`
`)}function _C(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}function Wl(t,e,r){for(var n=t.body,i=[],a=[],o=0;o<t.args.length;++o){var s=t.args[o];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),h="",c=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var f=e.offsetArgIndex.indexOf(o),p=e.offsetArgs[f];c=p.array,h="+q"+f;case"array":h="p"+c+h;var g="l"+o,b="a"+c;if(e.arrayBlockIndices[c]===0)s.count===1?r[c]==="generic"?s.lvalue?(i.push(["var ",g,"=",b,".get(",h,")"].join("")),n=n.replace(l,g),a.push([b,".set(",h,",",g,")"].join(""))):n=n.replace(l,[b,".get(",h,")"].join("")):n=n.replace(l,[b,"[",h,"]"].join("")):r[c]==="generic"?(i.push(["var ",g,"=",b,".get(",h,")"].join("")),n=n.replace(l,g),s.lvalue&&a.push([b,".set(",h,",",g,")"].join(""))):(i.push(["var ",g,"=",b,"[",h,"]"].join("")),n=n.replace(l,g),s.lvalue&&a.push([b,"[",h,"]=",g].join("")));else{for(var v=[s.name],m=[h],D=0;D<Math.abs(e.arrayBlockIndices[c]);D++)v.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(D+1)+"*t"+c+"b"+D);if(l=new RegExp(v.join(""),"g"),h=m.join("+"),r[c]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(l,[b,"[",h,"]"].join(""))}break;case"scalar":n=n.replace(l,"Y"+e.scalarArgs.indexOf(o));break;case"index":n=n.replace(l,"index");break;case"shape":n=n.replace(l,"shape");break}}}return[i.join(`
`),n,a.join(`
`)].join(`
`).trim()}function bC(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],a=i.match(/\d+/);a?a=a[0]:a="",i.charAt(0)===0?e[n]="u"+i.charAt(1)+a:e[n]=i.charAt(0)+a,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}function DC(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,n=new Array(t.arrayArgs.length),i=new Array(t.arrayArgs.length),a=0;a<t.arrayArgs.length;++a)i[a]=e[2*a],n[a]=e[2*a+1];for(var o=[],s=[],l=[],h=[],c=[],a=0;a<t.arrayArgs.length;++a){t.arrayBlockIndices[a]<0?(l.push(0),h.push(r),o.push(r),s.push(r+t.arrayBlockIndices[a])):(l.push(t.arrayBlockIndices[a]),h.push(t.arrayBlockIndices[a]+r),o.push(0),s.push(t.arrayBlockIndices[a]));for(var f=[],p=0;p<n[a].length;p++)l[a]<=n[a][p]&&n[a][p]<h[a]&&f.push(n[a][p]-l[a]);c.push(f)}for(var g=["SS"],b=["'use strict'"],v=[],p=0;p<r;++p)v.push(["s",p,"=SS[",p,"]"].join(""));for(var a=0;a<t.arrayArgs.length;++a){g.push("a"+a),g.push("t"+a),g.push("p"+a);for(var p=0;p<r;++p)v.push(["t",a,"p",p,"=t",a,"[",l[a]+p,"]"].join(""));for(var p=0;p<Math.abs(t.arrayBlockIndices[a]);++p)v.push(["t",a,"b",p,"=t",a,"[",o[a]+p,"]"].join(""))}for(var a=0;a<t.scalarArgs.length;++a)g.push("Y"+a);if(t.shapeArgs.length>0&&v.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var m=new Array(r),a=0;a<r;++a)m[a]="0";v.push(["index=[",m.join(","),"]"].join(""))}for(var a=0;a<t.offsetArgs.length;++a){for(var D=t.offsetArgs[a],S=[],p=0;p<D.offset.length;++p)D.offset[p]!==0&&(D.offset[p]===1?S.push(["t",D.array,"p",p].join("")):S.push([D.offset[p],"*t",D.array,"p",p].join("")));S.length===0?v.push("q"+a+"=0"):v.push(["q",a,"=",S.join("+")].join(""))}var y=vC([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));v=v.concat(y),v.length>0&&b.push("var "+v.join(","));for(var a=0;a<t.arrayArgs.length;++a)b.push("p"+a+"|=0");t.pre.body.length>3&&b.push(Wl(t.pre,t,i));var A=Wl(t.body,t,i),F=_C(c);F<r?b.push(mC(F,c[0],t,A)):b.push(z1(c[0],t,A)),t.post.body.length>3&&b.push(Wl(t.post,t,i)),t.debug&&console.log("-----Generated cwise routine for ",e,`:
`+b.join(`
`)+`
----------`);var P=[t.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",F,bC(i)].join(""),O=new Function(["function ",P,"(",g.join(","),"){",b.join(`
`),"} return ",P].join(""));return O()}var wC=DC,yC=wC;function EC(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var i=[],a=[],o=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],s=[],l=[],h=0;h<t.arrayArgs.length;++h){var c=t.arrayArgs[h];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),i.push("t"+c),i.push("r"+c),a.push("t"+c),a.push("r"+c+".join()"),o.push("array"+c+".data"),o.push("array"+c+".stride"),o.push("array"+c+".offset|0"),h>0&&(s.push("array"+t.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[h]))),l.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[h])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var h=0;h<t.scalarArgs.length;++h)o.push("scalar"+t.scalarArgs[h]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",o.join(","),")}"].join("")),t.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var f=new Function("compile",e.join(`
`));return f(yC.bind(void 0,t))}var AC=EC,CC=AC;function FC(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function SC(t){var e=new FC;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var n=0;n<r.length;++n){var i=r[n];if(i==="array"||typeof i=="object"&&i.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(i==="scalar")e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if(i==="index"){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(i==="shape"){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof i=="object"&&i.offset)e.argTypes[n]="offset",e.offsetArgs.push({array:i.array,offset:i.offset}),e.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+r[n])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,CC(e)}var nf=SC;(function(t){var e=nf,r={body:"",args:[],thisVars:[],localVars:[]};function n(p){if(!p)return r;for(var g=0;g<p.args.length;++g){var b=p.args[g];g===0?p.args[g]={name:b,lvalue:!0,rvalue:!!p.rvalue,count:p.count||1}:p.args[g]={name:b,lvalue:!1,rvalue:!0,count:1}}return p.thisVars||(p.thisVars=[]),p.localVars||(p.localVars=[]),p}function i(p){return e({args:p.args,pre:n(p.pre),body:n(p.body),post:n(p.proc),funcName:p.funcName})}function a(p){for(var g=[],b=0;b<p.args.length;++b)g.push("a"+b);var v=new Function("P",["return function ",p.funcName,"_ndarrayops(",g.join(","),") {P(",g.join(","),");return a0}"].join(""));return v(i(p))}var o={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var p in o){var g=o[p];t[p]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:p}),t[p+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+g+"=b"},rvalue:!0,funcName:p+"eq"}),t[p+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:p+"s"}),t[p+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+g+"=s"},rvalue:!0,funcName:p+"seq"})}})();var s={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var p in s){var g=s[p];t[p]=a({args:["array","array"],body:{args:["a","b"],body:"a="+g+"b"},funcName:p}),t[p+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+g+"a"},rvalue:!0,count:2,funcName:p+"eq"})}})();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var p in l){var g=l[p];t[p]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:p}),t[p+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:p+"s"}),t[p+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+g+"b"},rvalue:!0,count:2,funcName:p+"eq"}),t[p+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+g+"s"},rvalue:!0,count:2,funcName:p+"seq"})}})();var h=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var p=0;p<h.length;++p){var g=h[p];t[g]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:g}),t[g+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"})}})();var c=["max","min","atan2","pow"];(function(){for(var p=0;p<c.length;++p){var g=c[p];t[g]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g}),t[g+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g+"s"}),t[g+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"}),t[g+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"seq"})}})();var f=["atan2","pow"];(function(){for(var p=0;p<f.length;++p){var g=f[p];t[g+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"op"}),t[g+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"ops"}),t[g+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opeq"}),t[g+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opseq"})}})(),t.any=e({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=e({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=e({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(wo);var BC=nf({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64}),Ed=Ra,OC=BC,MC=function(e,r){for(var n=[],i=e,a=1;Array.isArray(i);)n.push(i.length),a*=i.length,i=i[0];return n.length===0?Ed():(r||(r=Ed(new Float64Array(a),n)),OC(r,e),r)};function q1(t,e,r){var n=t[r]|0;if(n<=0)return[];var i=new Array(n),a;if(r===t.length-1)for(a=0;a<n;++a)i[a]=e;else for(a=0;a<n;++a)i[a]=q1(t,e,r+1);return i}function PC(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function kC(t,e){switch(typeof e>"u"&&(e=0),typeof t){case"number":if(t>0)return PC(t|0,e);break;case"object":if(typeof t.length=="number")return q1(t,e,0);break}return[]}var TC=kC,W1={};(function(t){(function(e,r){r(t)})(dr,function(e){var r,n,i,a,o,s,l,h,c,f,p,g,b,v,m,D,S,y;r={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},n={},n[r.BooleanLiteral]="Boolean",n[r.EOF]="<end>",n[r.Identifier]="Identifier",n[r.Keyword]="Keyword",n[r.NullLiteral]="Null",n[r.NumericLiteral]="Numeric",n[r.Punctuator]="Punctuator",n[r.StringLiteral]="String",n[r.RegularExpression]="RegularExpression",i=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},o={Data:1,Get:2,Set:4},s={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},l={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function A(w,k){if(!w)throw new Error("ASSERT: "+k)}function F(w){return w>=48&&w<=57}function P(w){return"0123456789abcdefABCDEF".indexOf(w)>=0}function O(w){return"01234567".indexOf(w)>=0}function C(w){return w===32||w===9||w===11||w===12||w===160||w>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(w)>=0}function x(w){return w===10||w===13||w===8232||w===8233}function z(w){return w===36||w===95||w>=65&&w<=90||w>=97&&w<=122||w===92||w>=128&&l.NonAsciiIdentifierStart.test(String.fromCharCode(w))}function G(w){return w===36||w===95||w>=65&&w<=90||w>=97&&w<=122||w>=48&&w<=57||w===92||w>=128&&l.NonAsciiIdentifierPart.test(String.fromCharCode(w))}function Z(w){switch(w){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function R(w){switch(w){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function N(w){return w==="eval"||w==="arguments"}function q(w){if(f&&R(w))return!0;switch(w.length){case 2:return w==="if"||w==="in"||w==="do";case 3:return w==="var"||w==="for"||w==="new"||w==="try"||w==="let";case 4:return w==="this"||w==="else"||w==="case"||w==="void"||w==="with"||w==="enum";case 5:return w==="while"||w==="break"||w==="catch"||w==="throw"||w==="const"||w==="yield"||w==="class"||w==="super";case 6:return w==="return"||w==="typeof"||w==="delete"||w==="switch"||w==="export"||w==="import";case 7:return w==="default"||w==="finally"||w==="extends";case 8:return w==="function"||w==="continue"||w==="debugger";case 10:return w==="instanceof";default:return!1}}function j(w,k,$,re,ve){var xe;A(typeof $=="number","Comment must have valid position"),!(S.lastCommentStart>=$)&&(S.lastCommentStart=$,xe={type:w,value:k},y.range&&(xe.range=[$,re]),y.loc&&(xe.loc=ve),y.comments.push(xe),y.attachComment&&(y.leadingComments.push(xe),y.trailingComments.push(xe)))}function J(w){var k,$,re,ve;for(k=p-w,$={start:{line:g,column:p-b-w}};p<v;)if(re=c.charCodeAt(p),++p,x(re)){y.comments&&(ve=c.slice(k+w,p-1),$.end={line:g,column:p-b-1},j("Line",ve,k,p-1,$)),re===13&&c.charCodeAt(p)===10&&++p,++g,b=p;return}y.comments&&(ve=c.slice(k+w,p),$.end={line:g,column:p-b},j("Line",ve,k,p,$))}function Q(){var w,k,$,re;for(y.comments&&(w=p-2,k={start:{line:g,column:p-b-2}});p<v;)if($=c.charCodeAt(p),x($))$===13&&c.charCodeAt(p+1)===10&&++p,++g,++p,b=p,p>=v&&X({},s.UnexpectedToken,"ILLEGAL");else if($===42){if(c.charCodeAt(p+1)===47){++p,++p,y.comments&&(re=c.slice(w+2,p-2),k.end={line:g,column:p-b},j("Block",re,w,p,k));return}++p}else++p;X({},s.UnexpectedToken,"ILLEGAL")}function te(){var w,k;for(k=p===0;p<v;)if(w=c.charCodeAt(p),C(w))++p;else if(x(w))++p,w===13&&c.charCodeAt(p)===10&&++p,++g,b=p,k=!0;else if(w===47)if(w=c.charCodeAt(p+1),w===47)++p,++p,J(2),k=!0;else if(w===42)++p,++p,Q();else break;else if(k&&w===45)if(c.charCodeAt(p+1)===45&&c.charCodeAt(p+2)===62)p+=3,J(3);else break;else if(w===60)if(c.slice(p+1,p+4)==="!--")++p,++p,++p,++p,J(4);else break;else break}function ce(w){var k,$,re,ve=0;for($=w==="u"?4:2,k=0;k<$;++k)if(p<v&&P(c[p]))re=c[p++],ve=ve*16+"0123456789abcdef".indexOf(re.toLowerCase());else return"";return String.fromCharCode(ve)}function me(){var w,k;for(w=c.charCodeAt(p++),k=String.fromCharCode(w),w===92&&(c.charCodeAt(p)!==117&&X({},s.UnexpectedToken,"ILLEGAL"),++p,w=ce("u"),(!w||w==="\\"||!z(w.charCodeAt(0)))&&X({},s.UnexpectedToken,"ILLEGAL"),k=w);p<v&&(w=c.charCodeAt(p),!!G(w));)++p,k+=String.fromCharCode(w),w===92&&(k=k.substr(0,k.length-1),c.charCodeAt(p)!==117&&X({},s.UnexpectedToken,"ILLEGAL"),++p,w=ce("u"),(!w||w==="\\"||!G(w.charCodeAt(0)))&&X({},s.UnexpectedToken,"ILLEGAL"),k+=w);return k}function Ee(){var w,k;for(w=p++;p<v;){if(k=c.charCodeAt(p),k===92)return p=w,me();if(G(k))++p;else break}return c.slice(w,p)}function be(){var w,k,$;return w=p,k=c.charCodeAt(p)===92?me():Ee(),k.length===1?$=r.Identifier:q(k)?$=r.Keyword:k==="null"?$=r.NullLiteral:k==="true"||k==="false"?$=r.BooleanLiteral:$=r.Identifier,{type:$,value:k,lineNumber:g,lineStart:b,start:w,end:p}}function Oe(){var w=p,k=c.charCodeAt(p),$,re=c[p],ve,xe,gt;switch(k){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++p,y.tokenize&&(k===40?y.openParenToken=y.tokens.length:k===123&&(y.openCurlyToken=y.tokens.length)),{type:r.Punctuator,value:String.fromCharCode(k),lineNumber:g,lineStart:b,start:w,end:p};default:if($=c.charCodeAt(p+1),$===61)switch(k){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return p+=2,{type:r.Punctuator,value:String.fromCharCode(k)+String.fromCharCode($),lineNumber:g,lineStart:b,start:w,end:p};case 33:case 61:return p+=2,c.charCodeAt(p)===61&&++p,{type:r.Punctuator,value:c.slice(w,p),lineNumber:g,lineStart:b,start:w,end:p}}}if(gt=c.substr(p,4),gt===">>>=")return p+=4,{type:r.Punctuator,value:gt,lineNumber:g,lineStart:b,start:w,end:p};if(xe=gt.substr(0,3),xe===">>>"||xe==="<<="||xe===">>=")return p+=3,{type:r.Punctuator,value:xe,lineNumber:g,lineStart:b,start:w,end:p};if(ve=xe.substr(0,2),re===ve[1]&&"+-<>&|".indexOf(re)>=0||ve==="=>")return p+=2,{type:r.Punctuator,value:ve,lineNumber:g,lineStart:b,start:w,end:p};if("<>=!+-*%&|^/".indexOf(re)>=0)return++p,{type:r.Punctuator,value:re,lineNumber:g,lineStart:b,start:w,end:p};X({},s.UnexpectedToken,"ILLEGAL")}function ke(w){for(var k="";p<v&&P(c[p]);)k+=c[p++];return k.length===0&&X({},s.UnexpectedToken,"ILLEGAL"),z(c.charCodeAt(p))&&X({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt("0x"+k,16),lineNumber:g,lineStart:b,start:w,end:p}}function Ne(w){for(var k="0"+c[p++];p<v&&O(c[p]);)k+=c[p++];return(z(c.charCodeAt(p))||F(c.charCodeAt(p)))&&X({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt(k,8),octal:!0,lineNumber:g,lineStart:b,start:w,end:p}}function ze(){var w,k;for(w=p+1;w<v;++w){if(k=c[w],k==="8"||k==="9")return!1;if(!O(k))return!0}return!0}function tt(){var w,k,$;if($=c[p],A(F($.charCodeAt(0))||$===".","Numeric literal must start with a decimal digit or a decimal point"),k=p,w="",$!=="."){if(w=c[p++],$=c[p],w==="0"){if($==="x"||$==="X")return++p,ke(k);if(O($)&&ze())return Ne(k)}for(;F(c.charCodeAt(p));)w+=c[p++];$=c[p]}if($==="."){for(w+=c[p++];F(c.charCodeAt(p));)w+=c[p++];$=c[p]}if($==="e"||$==="E")if(w+=c[p++],$=c[p],($==="+"||$==="-")&&(w+=c[p++]),F(c.charCodeAt(p)))for(;F(c.charCodeAt(p));)w+=c[p++];else X({},s.UnexpectedToken,"ILLEGAL");return z(c.charCodeAt(p))&&X({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseFloat(w),lineNumber:g,lineStart:b,start:k,end:p}}function at(){var w="",k,$,re,ve,xe,gt,yt=!1,Wt,or;for(Wt=g,or=b,k=c[p],A(k==="'"||k==='"',"String literal must starts with a quote"),$=p,++p;p<v;)if(re=c[p++],re===k){k="";break}else if(re==="\\")if(re=c[p++],!re||!x(re.charCodeAt(0)))switch(re){case"u":case"x":gt=p,xe=ce(re),xe?w+=xe:(p=gt,w+=re);break;case"n":w+=`
`;break;case"r":w+="\r";break;case"t":w+="	";break;case"b":w+="\b";break;case"f":w+="\f";break;case"v":w+="\v";break;default:O(re)?(ve="01234567".indexOf(re),ve!==0&&(yt=!0),p<v&&O(c[p])&&(yt=!0,ve=ve*8+"01234567".indexOf(c[p++]),"0123".indexOf(re)>=0&&p<v&&O(c[p])&&(ve=ve*8+"01234567".indexOf(c[p++]))),w+=String.fromCharCode(ve)):w+=re;break}else++g,re==="\r"&&c[p]===`
`&&++p,b=p;else{if(x(re.charCodeAt(0)))break;w+=re}return k!==""&&X({},s.UnexpectedToken,"ILLEGAL"),{type:r.StringLiteral,value:w,octal:yt,startLineNumber:Wt,startLineStart:or,lineNumber:g,lineStart:b,start:$,end:p}}function rt(w,k){var $;try{$=new RegExp(w,k)}catch{X({},s.InvalidRegExp)}return $}function St(){var w,k,$,re,ve;for(w=c[p],A(w==="/","Regular expression literal must start with a slash"),k=c[p++],$=!1,re=!1;p<v;)if(w=c[p++],k+=w,w==="\\")w=c[p++],x(w.charCodeAt(0))&&X({},s.UnterminatedRegExp),k+=w;else if(x(w.charCodeAt(0)))X({},s.UnterminatedRegExp);else if($)w==="]"&&($=!1);else if(w==="/"){re=!0;break}else w==="["&&($=!0);return re||X({},s.UnterminatedRegExp),ve=k.substr(1,k.length-2),{value:ve,literal:k}}function Bt(){var w,k,$,re;for(k="",$="";p<v&&(w=c[p],!!G(w.charCodeAt(0)));)if(++p,w==="\\"&&p<v)if(w=c[p],w==="u"){if(++p,re=p,w=ce("u"),w)for($+=w,k+="\\u";re<p;++re)k+=c[re];else p=re,$+="u",k+="\\u";ie({},s.UnexpectedToken,"ILLEGAL")}else k+="\\",ie({},s.UnexpectedToken,"ILLEGAL");else $+=w,k+=w;return{value:$,literal:k}}function vt(){var w,k,$,re;return D=null,te(),w=p,k=St(),$=Bt(),re=rt(k.value,$.value),y.tokenize?{type:r.RegularExpression,value:re,lineNumber:g,lineStart:b,start:w,end:p}:{literal:k.literal+$.literal,value:re,start:w,end:p}}function ct(){var w,k,$,re;return te(),w=p,k={start:{line:g,column:p-b}},$=vt(),k.end={line:g,column:p-b},y.tokenize||(y.tokens.length>0&&(re=y.tokens[y.tokens.length-1],re.range[0]===w&&re.type==="Punctuator"&&(re.value==="/"||re.value==="/=")&&y.tokens.pop()),y.tokens.push({type:"RegularExpression",value:$.literal,range:[w,p],loc:k})),$}function xt(w){return w.type===r.Identifier||w.type===r.Keyword||w.type===r.BooleanLiteral||w.type===r.NullLiteral}function qr(){var w,k;if(w=y.tokens[y.tokens.length-1],!w)return ct();if(w.type==="Punctuator"){if(w.value==="]")return Oe();if(w.value===")")return k=y.tokens[y.openParenToken-1],k&&k.type==="Keyword"&&(k.value==="if"||k.value==="while"||k.value==="for"||k.value==="with")?ct():Oe();if(w.value==="}"){if(y.tokens[y.openCurlyToken-3]&&y.tokens[y.openCurlyToken-3].type==="Keyword"){if(k=y.tokens[y.openCurlyToken-4],!k)return Oe()}else if(y.tokens[y.openCurlyToken-4]&&y.tokens[y.openCurlyToken-4].type==="Keyword"){if(k=y.tokens[y.openCurlyToken-5],!k)return ct()}else return Oe();return i.indexOf(k.value)>=0?Oe():ct()}return ct()}return w.type==="Keyword"&&w.value!=="this"?ct():Oe()}function Ut(){var w;return te(),p>=v?{type:r.EOF,lineNumber:g,lineStart:b,start:p,end:p}:(w=c.charCodeAt(p),z(w)?be():w===40||w===41||w===59?Oe():w===39||w===34?at():w===46?F(c.charCodeAt(p+1))?tt():Oe():F(w)?tt():y.tokenize&&w===47?qr():Oe())}function Wr(){var w,k,$;return te(),w={start:{line:g,column:p-b}},k=Ut(),w.end={line:g,column:p-b},k.type!==r.EOF&&($=c.slice(k.start,k.end),y.tokens.push({type:n[k.type],value:$,range:[k.start,k.end],loc:w})),k}function et(){var w;return w=D,p=w.end,g=w.lineNumber,b=w.lineStart,D=typeof y.tokens<"u"?Wr():Ut(),p=w.end,g=w.lineNumber,b=w.lineStart,w}function pr(){var w,k,$;w=p,k=g,$=b,D=typeof y.tokens<"u"?Wr():Ut(),p=w,g=k,b=$}function Fr(w,k){this.line=w,this.column=k}function Bn(w,k,$,re){this.start=new Fr(w,k),this.end=new Fr($,re)}h={name:"SyntaxTree",processComment:function(w){var k,$;if(!(w.type===a.Program&&w.body.length>0)){for(y.trailingComments.length>0?y.trailingComments[0].range[0]>=w.range[1]?($=y.trailingComments,y.trailingComments=[]):y.trailingComments.length=0:y.bottomRightStack.length>0&&y.bottomRightStack[y.bottomRightStack.length-1].trailingComments&&y.bottomRightStack[y.bottomRightStack.length-1].trailingComments[0].range[0]>=w.range[1]&&($=y.bottomRightStack[y.bottomRightStack.length-1].trailingComments,delete y.bottomRightStack[y.bottomRightStack.length-1].trailingComments);y.bottomRightStack.length>0&&y.bottomRightStack[y.bottomRightStack.length-1].range[0]>=w.range[0];)k=y.bottomRightStack.pop();k?k.leadingComments&&k.leadingComments[k.leadingComments.length-1].range[1]<=w.range[0]&&(w.leadingComments=k.leadingComments,delete k.leadingComments):y.leadingComments.length>0&&y.leadingComments[y.leadingComments.length-1].range[1]<=w.range[0]&&(w.leadingComments=y.leadingComments,y.leadingComments=[]),$&&(w.trailingComments=$),y.bottomRightStack.push(w)}},markEnd:function(w,k){return y.range&&(w.range=[k.start,p]),y.loc&&(w.loc=new Bn(k.startLineNumber===void 0?k.lineNumber:k.startLineNumber,k.start-(k.startLineStart===void 0?k.lineStart:k.startLineStart),g,p-b),this.postProcess(w)),y.attachComment&&this.processComment(w),w},postProcess:function(w){return y.source&&(w.loc.source=y.source),w},createArrayExpression:function(w){return{type:a.ArrayExpression,elements:w}},createAssignmentExpression:function(w,k,$){return{type:a.AssignmentExpression,operator:w,left:k,right:$}},createBinaryExpression:function(w,k,$){var re=w==="||"||w==="&&"?a.LogicalExpression:a.BinaryExpression;return{type:re,operator:w,left:k,right:$}},createBlockStatement:function(w){return{type:a.BlockStatement,body:w}},createBreakStatement:function(w){return{type:a.BreakStatement,label:w}},createCallExpression:function(w,k){return{type:a.CallExpression,callee:w,arguments:k}},createCatchClause:function(w,k){return{type:a.CatchClause,param:w,body:k}},createConditionalExpression:function(w,k,$){return{type:a.ConditionalExpression,test:w,consequent:k,alternate:$}},createContinueStatement:function(w){return{type:a.ContinueStatement,label:w}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(w,k){return{type:a.DoWhileStatement,body:w,test:k}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(w){return{type:a.ExpressionStatement,expression:w}},createForStatement:function(w,k,$,re){return{type:a.ForStatement,init:w,test:k,update:$,body:re}},createForInStatement:function(w,k,$){return{type:a.ForInStatement,left:w,right:k,body:$,each:!1}},createFunctionDeclaration:function(w,k,$,re){return{type:a.FunctionDeclaration,id:w,params:k,defaults:$,body:re,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(w,k,$,re){return{type:a.FunctionExpression,id:w,params:k,defaults:$,body:re,rest:null,generator:!1,expression:!1}},createIdentifier:function(w){return{type:a.Identifier,name:w}},createIfStatement:function(w,k,$){return{type:a.IfStatement,test:w,consequent:k,alternate:$}},createLabeledStatement:function(w,k){return{type:a.LabeledStatement,label:w,body:k}},createLiteral:function(w){return{type:a.Literal,value:w.value,raw:c.slice(w.start,w.end)}},createMemberExpression:function(w,k,$){return{type:a.MemberExpression,computed:w==="[",object:k,property:$}},createNewExpression:function(w,k){return{type:a.NewExpression,callee:w,arguments:k}},createObjectExpression:function(w){return{type:a.ObjectExpression,properties:w}},createPostfixExpression:function(w,k){return{type:a.UpdateExpression,operator:w,argument:k,prefix:!1}},createProgram:function(w){return{type:a.Program,body:w}},createProperty:function(w,k,$){return{type:a.Property,key:k,value:$,kind:w}},createReturnStatement:function(w){return{type:a.ReturnStatement,argument:w}},createSequenceExpression:function(w){return{type:a.SequenceExpression,expressions:w}},createSwitchCase:function(w,k){return{type:a.SwitchCase,test:w,consequent:k}},createSwitchStatement:function(w,k){return{type:a.SwitchStatement,discriminant:w,cases:k}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(w){return{type:a.ThrowStatement,argument:w}},createTryStatement:function(w,k,$,re){return{type:a.TryStatement,block:w,guardedHandlers:k,handlers:$,finalizer:re}},createUnaryExpression:function(w,k){return w==="++"||w==="--"?{type:a.UpdateExpression,operator:w,argument:k,prefix:!0}:{type:a.UnaryExpression,operator:w,argument:k,prefix:!0}},createVariableDeclaration:function(w,k){return{type:a.VariableDeclaration,declarations:w,kind:k}},createVariableDeclarator:function(w,k){return{type:a.VariableDeclarator,id:w,init:k}},createWhileStatement:function(w,k){return{type:a.WhileStatement,test:w,body:k}},createWithStatement:function(w,k){return{type:a.WithStatement,object:w,body:k}}};function K(){var w,k,$,re;return w=p,k=g,$=b,te(),re=g!==k,p=w,g=k,b=$,re}function X(w,k){var $,re=Array.prototype.slice.call(arguments,2),ve=k.replace(/%(\d)/g,function(xe,gt){return A(gt<re.length,"Message reference must be in range"),re[gt]});throw typeof w.lineNumber=="number"?($=new Error("Line "+w.lineNumber+": "+ve),$.index=w.start,$.lineNumber=w.lineNumber,$.column=w.start-b+1):($=new Error("Line "+g+": "+ve),$.index=p,$.lineNumber=g,$.column=p-b+1),$.description=ve,$}function ie(){try{X.apply(null,arguments)}catch(w){if(y.errors)y.errors.push(w);else throw w}}function ge(w){if(w.type===r.EOF&&X(w,s.UnexpectedEOS),w.type===r.NumericLiteral&&X(w,s.UnexpectedNumber),w.type===r.StringLiteral&&X(w,s.UnexpectedString),w.type===r.Identifier&&X(w,s.UnexpectedIdentifier),w.type===r.Keyword){if(Z(w.value))X(w,s.UnexpectedReserved);else if(f&&R(w.value)){ie(w,s.StrictReservedWord);return}X(w,s.UnexpectedToken,w.value)}X(w,s.UnexpectedToken,w.value)}function se(w){var k=et();(k.type!==r.Punctuator||k.value!==w)&&ge(k)}function De(w){var k=et();(k.type!==r.Keyword||k.value!==w)&&ge(k)}function fe(w){return D.type===r.Punctuator&&D.value===w}function de(w){return D.type===r.Keyword&&D.value===w}function Te(){var w;return D.type!==r.Punctuator?!1:(w=D.value,w==="="||w==="*="||w==="/="||w==="%="||w==="+="||w==="-="||w==="<<="||w===">>="||w===">>>="||w==="&="||w==="^="||w==="|=")}function We(){var w,k=p,$=g,re=b,ve=D;if(c.charCodeAt(p)===59||fe(";")){et();return}if(w=g,te(),g!==w){p=k,g=$,b=re,D=ve;return}D.type!==r.EOF&&!fe("}")&&ge(D)}function ot(w){return w.type===a.Identifier||w.type===a.MemberExpression}function Ie(){var w=[],k;for(k=D,se("[");!fe("]");)fe(",")?(et(),w.push(null)):(w.push(Sr()),fe("]")||se(","));return et(),m.markEnd(m.createArrayExpression(w),k)}function Yt(w,k){var $,re,ve;return $=f,ve=D,re=ji(),k&&f&&N(w[0].name)&&ie(k,s.StrictParamName),f=$,m.markEnd(m.createFunctionExpression(null,w,[],re),ve)}function Vt(){var w,k;return k=D,w=et(),w.type===r.StringLiteral||w.type===r.NumericLiteral?(f&&w.octal&&ie(w,s.StrictOctalLiteral),m.markEnd(m.createLiteral(w),k)):m.markEnd(m.createIdentifier(w.value),k)}function nr(){var w,k,$,re,ve,xe;if(w=D,xe=D,w.type===r.Identifier)return $=Vt(),w.value==="get"&&!fe(":")?(k=Vt(),se("("),se(")"),re=Yt([]),m.markEnd(m.createProperty("get",k,re),xe)):w.value==="set"&&!fe(":")?(k=Vt(),se("("),w=D,w.type!==r.Identifier?(se(")"),ie(w,s.UnexpectedToken,w.value),re=Yt([])):(ve=[vn()],se(")"),re=Yt(ve,w)),m.markEnd(m.createProperty("set",k,re),xe)):(se(":"),re=Sr(),m.markEnd(m.createProperty("init",$,re),xe));if(w.type===r.EOF||w.type===r.Punctuator)ge(w);else return k=Vt(),se(":"),re=Sr(),m.markEnd(m.createProperty("init",k,re),xe)}function Zt(){var w=[],k,$,re,ve,xe={},gt=String,yt;for(yt=D,se("{");!fe("}");)k=nr(),k.key.type===a.Identifier?$=k.key.name:$=gt(k.key.value),ve=k.kind==="init"?o.Data:k.kind==="get"?o.Get:o.Set,re="$"+$,Object.prototype.hasOwnProperty.call(xe,re)?(xe[re]===o.Data?f&&ve===o.Data?ie({},s.StrictDuplicateProperty):ve!==o.Data&&ie({},s.AccessorDataProperty):ve===o.Data?ie({},s.AccessorDataProperty):xe[re]&ve&&ie({},s.AccessorGetSet),xe[re]|=ve):xe[re]=ve,w.push(k),fe("}")||se(",");return se("}"),m.markEnd(m.createObjectExpression(w),yt)}function Dr(){var w;return se("("),w=ir(),se(")"),w}function Jt(){var w,k,$,re;if(fe("("))return Dr();if(fe("["))return Ie();if(fe("{"))return Zt();if(w=D.type,re=D,w===r.Identifier)$=m.createIdentifier(et().value);else if(w===r.StringLiteral||w===r.NumericLiteral)f&&D.octal&&ie(D,s.StrictOctalLiteral),$=m.createLiteral(et());else if(w===r.Keyword){if(de("function"))return zi();de("this")?(et(),$=m.createThisExpression()):ge(et())}else w===r.BooleanLiteral?(k=et(),k.value=k.value==="true",$=m.createLiteral(k)):w===r.NullLiteral?(k=et(),k.value=null,$=m.createLiteral(k)):fe("/")||fe("/=")?(typeof y.tokens<"u"?$=m.createLiteral(ct()):$=m.createLiteral(vt()),pr()):ge(et());return m.markEnd($,re)}function wr(){var w=[];if(se("("),!fe(")"))for(;p<v&&(w.push(Sr()),!fe(")"));)se(",");return se(")"),w}function fr(){var w,k;return k=D,w=et(),xt(w)||ge(w),m.markEnd(m.createIdentifier(w.value),k)}function hr(){return se("."),fr()}function gn(){var w;return se("["),w=ir(),se("]"),w}function gr(){var w,k,$;return $=D,De("new"),w=Xn(),k=fe("(")?wr():[],m.markEnd(m.createNewExpression(w,k),$)}function On(){var w,k,$,re,ve=S.allowIn;for(re=D,S.allowIn=!0,w=de("new")?gr():Jt();;){if(fe("."))$=hr(),w=m.createMemberExpression(".",w,$);else if(fe("("))k=wr(),w=m.createCallExpression(w,k);else if(fe("["))$=gn(),w=m.createMemberExpression("[",w,$);else break;m.markEnd(w,re)}return S.allowIn=ve,w}function Xn(){var w,k,$;for(A(S.allowIn,"callee of new expression always allow in keyword."),$=D,w=de("new")?gr():Jt();fe(".")||fe("[");)fe("[")?(k=gn(),w=m.createMemberExpression("[",w,k)):(k=hr(),w=m.createMemberExpression(".",w,k)),m.markEnd(w,$);return w}function Vn(){var w,k,$=D;return w=On(),D.type===r.Punctuator&&(fe("++")||fe("--"))&&!K()&&(f&&w.type===a.Identifier&&N(w.name)&&ie({},s.StrictLHSPostfix),ot(w)||ie({},s.InvalidLHSInAssignment),k=et(),w=m.markEnd(m.createPostfixExpression(k.value,w),$)),w}function jn(){var w,k,$;return D.type!==r.Punctuator&&D.type!==r.Keyword?k=Vn():fe("++")||fe("--")?($=D,w=et(),k=jn(),f&&k.type===a.Identifier&&N(k.name)&&ie({},s.StrictLHSPrefix),ot(k)||ie({},s.InvalidLHSInAssignment),k=m.createUnaryExpression(w.value,k),k=m.markEnd(k,$)):fe("+")||fe("-")||fe("~")||fe("!")?($=D,w=et(),k=jn(),k=m.createUnaryExpression(w.value,k),k=m.markEnd(k,$)):de("delete")||de("void")||de("typeof")?($=D,w=et(),k=jn(),k=m.createUnaryExpression(w.value,k),k=m.markEnd(k,$),f&&k.operator==="delete"&&k.argument.type===a.Identifier&&ie({},s.StrictDelete)):k=Vn(),k}function na(w,k){var $=0;if(w.type!==r.Punctuator&&w.type!==r.Keyword)return 0;switch(w.value){case"||":$=1;break;case"&&":$=2;break;case"|":$=3;break;case"^":$=4;break;case"&":$=5;break;case"==":case"!=":case"===":case"!==":$=6;break;case"<":case">":case"<=":case">=":case"instanceof":$=7;break;case"in":$=k?7:0;break;case"<<":case">>":case">>>":$=8;break;case"+":case"-":$=9;break;case"*":case"/":case"%":$=11;break}return $}function Ui(){var w,k,$,re,ve,xe,gt,yt,Wt,or;if(w=D,Wt=jn(),re=D,ve=na(re,S.allowIn),ve===0)return Wt;for(re.prec=ve,et(),k=[w,D],gt=jn(),xe=[Wt,re,gt];(ve=na(D,S.allowIn))>0;){for(;xe.length>2&&ve<=xe[xe.length-2].prec;)gt=xe.pop(),yt=xe.pop().value,Wt=xe.pop(),$=m.createBinaryExpression(yt,Wt,gt),k.pop(),w=k[k.length-1],m.markEnd($,w),xe.push($);re=et(),re.prec=ve,xe.push(re),k.push(D),$=jn(),xe.push($)}for(or=xe.length-1,$=xe[or],k.pop();or>1;)$=m.createBinaryExpression(xe[or-1].value,xe[or-2],$),or-=2,w=k.pop(),m.markEnd($,w);return $}function Ua(){var w,k,$,re,ve;return ve=D,w=Ui(),fe("?")&&(et(),k=S.allowIn,S.allowIn=!0,$=Sr(),S.allowIn=k,se(":"),re=Sr(),w=m.createConditionalExpression(w,$,re),m.markEnd(w,ve)),w}function Sr(){var w,k,$,re,ve;return w=D,ve=D,re=k=Ua(),Te()&&(ot(k)||ie({},s.InvalidLHSInAssignment),f&&k.type===a.Identifier&&N(k.name)&&ie(w,s.StrictLHSAssignment),w=et(),$=Sr(),re=m.markEnd(m.createAssignmentExpression(w.value,k,$),ve)),re}function ir(){var w,k=D;if(w=Sr(),fe(",")){for(w=m.createSequenceExpression([w]);p<v&&fe(",");)et(),w.expressions.push(Sr());m.markEnd(w,k)}return w}function Va(){for(var w=[],k;p<v&&!(fe("}")||(k=Mn(),typeof k>"u"));)w.push(k);return w}function vi(){var w,k;return k=D,se("{"),w=Va(),se("}"),m.markEnd(m.createBlockStatement(w),k)}function vn(){var w,k;return k=D,w=et(),w.type!==r.Identifier&&ge(w),m.markEnd(m.createIdentifier(w.value),k)}function ei(w){var k=null,$,re;return re=D,$=vn(),f&&N($.name)&&ie({},s.StrictVarName),w==="const"?(se("="),k=Sr()):fe("=")&&(et(),k=Sr()),m.markEnd(m.createVariableDeclarator($,k),re)}function Vi(w){var k=[];do{if(k.push(ei(w)),!fe(","))break;et()}while(p<v);return k}function ja(){var w;return De("var"),w=Vi(),We(),m.createVariableDeclaration(w,"var")}function za(w){var k,$;return $=D,De(w),k=Vi(w),We(),m.markEnd(m.createVariableDeclaration(k,w),$)}function ia(){return se(";"),m.createEmptyStatement()}function qa(){var w=ir();return We(),m.createExpressionStatement(w)}function Wa(){var w,k,$;return De("if"),se("("),w=ir(),se(")"),k=Hr(),de("else")?(et(),$=Hr()):$=null,m.createIfStatement(w,k,$)}function Ha(){var w,k,$;return De("do"),$=S.inIteration,S.inIteration=!0,w=Hr(),S.inIteration=$,De("while"),se("("),k=ir(),se(")"),fe(";")&&et(),m.createDoWhileStatement(w,k)}function $a(){var w,k,$;return De("while"),se("("),w=ir(),se(")"),$=S.inIteration,S.inIteration=!0,k=Hr(),S.inIteration=$,m.createWhileStatement(w,k)}function Ga(){var w,k,$;return $=D,w=et(),k=Vi(),m.markEnd(m.createVariableDeclaration(k,w.value),$)}function Ka(){var w,k,$,re,ve,xe,gt,yt=S.allowIn;return w=k=$=null,De("for"),se("("),fe(";")?et():(de("var")||de("let")?(S.allowIn=!1,w=Ga(),S.allowIn=yt,w.declarations.length===1&&de("in")&&(et(),re=w,ve=ir(),w=null)):(S.allowIn=!1,w=ir(),S.allowIn=yt,de("in")&&(ot(w)||ie({},s.InvalidLHSInForIn),et(),re=w,ve=ir(),w=null)),typeof re>"u"&&se(";")),typeof re>"u"&&(fe(";")||(k=ir()),se(";"),fe(")")||($=ir())),se(")"),gt=S.inIteration,S.inIteration=!0,xe=Hr(),S.inIteration=gt,typeof re>"u"?m.createForStatement(w,k,$,xe):m.createForInStatement(re,ve,xe)}function mi(){var w=null,k;return De("continue"),c.charCodeAt(p)===59?(et(),S.inIteration||X({},s.IllegalContinue),m.createContinueStatement(null)):K()?(S.inIteration||X({},s.IllegalContinue),m.createContinueStatement(null)):(D.type===r.Identifier&&(w=vn(),k="$"+w.name,Object.prototype.hasOwnProperty.call(S.labelSet,k)||X({},s.UnknownLabel,w.name)),We(),w===null&&!S.inIteration&&X({},s.IllegalContinue),m.createContinueStatement(w))}function Ya(){var w=null,k;return De("break"),c.charCodeAt(p)===59?(et(),S.inIteration||S.inSwitch||X({},s.IllegalBreak),m.createBreakStatement(null)):K()?(S.inIteration||S.inSwitch||X({},s.IllegalBreak),m.createBreakStatement(null)):(D.type===r.Identifier&&(w=vn(),k="$"+w.name,Object.prototype.hasOwnProperty.call(S.labelSet,k)||X({},s.UnknownLabel,w.name)),We(),w===null&&!(S.inIteration||S.inSwitch)&&X({},s.IllegalBreak),m.createBreakStatement(w))}function _i(){var w=null;return De("return"),S.inFunctionBody||ie({},s.IllegalReturn),c.charCodeAt(p)===32&&z(c.charCodeAt(p+1))?(w=ir(),We(),m.createReturnStatement(w)):K()?m.createReturnStatement(null):(fe(";")||!fe("}")&&D.type!==r.EOF&&(w=ir()),We(),m.createReturnStatement(w))}function Za(){var w,k;return f&&(te(),ie({},s.StrictModeWith)),De("with"),se("("),w=ir(),se(")"),k=Hr(),m.createWithStatement(w,k)}function Ja(){var w,k=[],$,re;for(re=D,de("default")?(et(),w=null):(De("case"),w=ir()),se(":");p<v&&!(fe("}")||de("default")||de("case"));)$=Hr(),k.push($);return m.markEnd(m.createSwitchCase(w,k),re)}function Qa(){var w,k,$,re,ve;if(De("switch"),se("("),w=ir(),se(")"),se("{"),k=[],fe("}"))return et(),m.createSwitchStatement(w,k);for(re=S.inSwitch,S.inSwitch=!0,ve=!1;p<v&&!fe("}");)$=Ja(),$.test===null&&(ve&&X({},s.MultipleDefaultsInSwitch),ve=!0),k.push($);return S.inSwitch=re,se("}"),m.createSwitchStatement(w,k)}function aa(){var w;return De("throw"),K()&&X({},s.NewlineAfterThrow),w=ir(),We(),m.createThrowStatement(w)}function zn(){var w,k,$;return $=D,De("catch"),se("("),fe(")")&&ge(D),w=vn(),f&&N(w.name)&&ie({},s.StrictCatchVariable),se(")"),k=vi(),m.markEnd(m.createCatchClause(w,k),$)}function yr(){var w,k=[],$=null;return De("try"),w=vi(),de("catch")&&k.push(zn()),de("finally")&&(et(),$=vi()),k.length===0&&!$&&X({},s.NoCatchOrFinally),m.createTryStatement(w,[],k,$)}function sr(){return De("debugger"),We(),m.createDebuggerStatement()}function Hr(){var w=D.type,k,$,re,ve;if(w===r.EOF&&ge(D),w===r.Punctuator&&D.value==="{")return vi();if(ve=D,w===r.Punctuator)switch(D.value){case";":return m.markEnd(ia(),ve);case"(":return m.markEnd(qa(),ve)}if(w===r.Keyword)switch(D.value){case"break":return m.markEnd(Ya(),ve);case"continue":return m.markEnd(mi(),ve);case"debugger":return m.markEnd(sr(),ve);case"do":return m.markEnd(Ha(),ve);case"for":return m.markEnd(Ka(),ve);case"function":return m.markEnd(qn(),ve);case"if":return m.markEnd(Wa(),ve);case"return":return m.markEnd(_i(),ve);case"switch":return m.markEnd(Qa(),ve);case"throw":return m.markEnd(aa(),ve);case"try":return m.markEnd(yr(),ve);case"var":return m.markEnd(ja(),ve);case"while":return m.markEnd($a(),ve);case"with":return m.markEnd(Za(),ve)}return k=ir(),k.type===a.Identifier&&fe(":")?(et(),re="$"+k.name,Object.prototype.hasOwnProperty.call(S.labelSet,re)&&X({},s.Redeclaration,"Label",k.name),S.labelSet[re]=!0,$=Hr(),delete S.labelSet[re],m.markEnd(m.createLabeledStatement(k,$),ve)):(We(),m.markEnd(m.createExpressionStatement(k),ve))}function ji(){var w,k=[],$,re,ve,xe,gt,yt,Wt,or;for(or=D,se("{");p<v&&!(D.type!==r.StringLiteral||($=D,w=Mn(),k.push(w),w.expression.type!==a.Literal));)re=c.slice($.start+1,$.end-1),re==="use strict"?(f=!0,ve&&ie(ve,s.StrictOctalLiteral)):!ve&&$.octal&&(ve=$);for(xe=S.labelSet,gt=S.inIteration,yt=S.inSwitch,Wt=S.inFunctionBody,S.labelSet={},S.inIteration=!1,S.inSwitch=!1,S.inFunctionBody=!0;p<v&&!(fe("}")||(w=Mn(),typeof w>"u"));)k.push(w);return se("}"),S.labelSet=xe,S.inIteration=gt,S.inSwitch=yt,S.inFunctionBody=Wt,m.markEnd(m.createBlockStatement(k),or)}function ti(w){var k,$=[],re,ve,xe,gt,yt;if(se("("),!fe(")"))for(xe={};p<v&&(re=D,k=vn(),gt="$"+re.value,f?(N(re.value)&&(ve=re,yt=s.StrictParamName),Object.prototype.hasOwnProperty.call(xe,gt)&&(ve=re,yt=s.StrictParamDupe)):w||(N(re.value)?(w=re,yt=s.StrictParamName):R(re.value)?(w=re,yt=s.StrictReservedWord):Object.prototype.hasOwnProperty.call(xe,gt)&&(w=re,yt=s.StrictParamDupe)),$.push(k),xe[gt]=!0,!fe(")"));)se(",");return se(")"),{params:$,stricted:ve,firstRestricted:w,message:yt}}function qn(){var w,k=[],$,re,ve,xe,gt,yt,Wt,or;return or=D,De("function"),re=D,w=vn(),f?N(re.value)&&ie(re,s.StrictFunctionName):N(re.value)?(gt=re,yt=s.StrictFunctionName):R(re.value)&&(gt=re,yt=s.StrictReservedWord),xe=ti(gt),k=xe.params,ve=xe.stricted,gt=xe.firstRestricted,xe.message&&(yt=xe.message),Wt=f,$=ji(),f&&gt&&X(gt,yt),f&&ve&&ie(ve,yt),f=Wt,m.markEnd(m.createFunctionDeclaration(w,k,[],$),or)}function zi(){var w,k=null,$,re,ve,xe,gt=[],yt,Wt,or;return or=D,De("function"),fe("(")||(w=D,k=vn(),f?N(w.value)&&ie(w,s.StrictFunctionName):N(w.value)?(re=w,ve=s.StrictFunctionName):R(w.value)&&(re=w,ve=s.StrictReservedWord)),xe=ti(re),gt=xe.params,$=xe.stricted,re=xe.firstRestricted,xe.message&&(ve=xe.message),Wt=f,yt=ji(),f&&re&&X(re,ve),f&&$&&ie($,ve),f=Wt,m.markEnd(m.createFunctionExpression(k,gt,[],yt),or)}function Mn(){if(D.type===r.Keyword)switch(D.value){case"const":case"let":return za(D.value);case"function":return qn();default:return Hr()}if(D.type!==r.EOF)return Hr()}function mn(){for(var w,k=[],$,re,ve;p<v&&($=D,!($.type!==r.StringLiteral||(w=Mn(),k.push(w),w.expression.type!==a.Literal)));)re=c.slice($.start+1,$.end-1),re==="use strict"?(f=!0,ve&&ie(ve,s.StrictOctalLiteral)):!ve&&$.octal&&(ve=$);for(;p<v&&(w=Mn(),!(typeof w>"u"));)k.push(w);return k}function Bo(){var w,k;return te(),pr(),k=D,f=!1,w=mn(),m.markEnd(m.createProgram(w),k)}function Xa(){var w,k,$,re=[];for(w=0;w<y.tokens.length;++w)k=y.tokens[w],$={type:k.type,value:k.value},y.range&&($.range=k.range),y.loc&&($.loc=k.loc),re.push($);y.tokens=re}function ua(w,k){var $,re,ve;$=String,typeof w!="string"&&!(w instanceof String)&&(w=$(w)),m=h,c=w,p=0,g=c.length>0?1:0,b=0,v=c.length,D=null,S={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},y={},k=k||{},k.tokens=!0,y.tokens=[],y.tokenize=!0,y.openParenToken=-1,y.openCurlyToken=-1,y.range=typeof k.range=="boolean"&&k.range,y.loc=typeof k.loc=="boolean"&&k.loc,typeof k.comment=="boolean"&&k.comment&&(y.comments=[]),typeof k.tolerant=="boolean"&&k.tolerant&&(y.errors=[]);try{if(pr(),D.type===r.EOF)return y.tokens;for(re=et();D.type!==r.EOF;)try{re=et()}catch(xe){if(re=D,y.errors){y.errors.push(xe);break}else throw xe}Xa(),ve=y.tokens,typeof y.comments<"u"&&(ve.comments=y.comments),typeof y.errors<"u"&&(ve.errors=y.errors)}catch(xe){throw xe}finally{y={}}return ve}function Bu(w,k){var $,re;re=String,typeof w!="string"&&!(w instanceof String)&&(w=re(w)),m=h,c=w,p=0,g=c.length>0?1:0,b=0,v=c.length,D=null,S={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},y={},typeof k<"u"&&(y.range=typeof k.range=="boolean"&&k.range,y.loc=typeof k.loc=="boolean"&&k.loc,y.attachComment=typeof k.attachComment=="boolean"&&k.attachComment,y.loc&&k.source!==null&&k.source!==void 0&&(y.source=re(k.source)),typeof k.tokens=="boolean"&&k.tokens&&(y.tokens=[]),typeof k.comment=="boolean"&&k.comment&&(y.comments=[]),typeof k.tolerant=="boolean"&&k.tolerant&&(y.errors=[]),y.attachComment&&(y.range=!0,y.comments=[],y.bottomRightStack=[],y.trailingComments=[],y.leadingComments=[]));try{$=Bo(),typeof y.comments<"u"&&($.comments=y.comments),typeof y.tokens<"u"&&(Xa(),$.tokens=y.tokens),typeof y.errors<"u"&&($.errors=y.errors)}catch(ve){throw ve}finally{y={}}return $}e.version="1.2.5",e.tokenize=ua,e.parse=Bu,e.Syntax=function(){var w,k={};typeof Object.create=="function"&&(k=Object.create(null));for(w in a)a.hasOwnProperty(w)&&(k[w]=a[w]);return typeof Object.freeze=="function"&&Object.freeze(k),k}()})})(W1);var IC=W1,Ad=j1,xC=0;function NC(t,e,r){this.name=t,this.lvalue=e,this.rvalue=r,this.count=0}function LC(t,e,r,n){this.body=t,this.args=e,this.thisVars=r,this.localVars=n}function RC(t){if(t==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?t in window:typeof dr<"u"?t in dr:typeof self<"u"?t in self:!1}function UC(t){for(var e=t.body[0].expression.callee.params,r=new Array(e.length),n=0;n<e.length;++n)r[n]=e[n].name;return r}function VC(t){for(var e=["(",t,")()"].join(""),r=IC.parse(e,{range:!0}),n="_inline_"+xC+++"_",i=UC(r),a=new Array(i.length),o=0;o<i.length;++o)a[o]=new NC([n,"arg",o,"_"].join(""),!1,!1);for(var s=new Array(e.length),o=0,l=e.length;o<l;++o)s[o]=e.charAt(o);var h=[],c=[];function f(A){var F=n+A.replace(/\_/g,"__");return h.push(F),F}function p(A){var F="this_"+A.replace(/\_/g,"__");return c.push(F),F}function g(A,F){for(var P=A.range[0],O=A.range[1],C=P+1;C<O;++C)s[C]="";s[P]=F}function b(A){return"'"+A.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function v(A){return s.slice(A.range[0],A.range[1]).join("")}var m=1,D=2;function S(A){return A.parent.type==="AssignmentExpression"&&A.parent.left===A?A.parent.operator==="="?m:m|D:A.parent.type==="UpdateExpression"?m|D:D}(function A(F,P){if(F.parent=P,F.type==="MemberExpression")F.computed?(A(F.object,F),A(F.property,F)):F.object.type==="ThisExpression"?g(F,p(F.property.name)):A(F.object,F);else{if(F.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(F.type==="Identifier"){var O=F.name,C=i.indexOf(O);if(C>=0){var x=a[C],z=S(F);z&m&&(x.lvalue=!0),z&D&&(x.rvalue=!0),++x.count,g(F,x.name)}else RC(O)||g(F,f(O))}else if(F.type==="Literal")typeof F.value=="string"&&g(F,b(F.value));else{if(F.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var G=Object.keys(F),Z=0,R=G.length;Z<R;++Z)if(G[Z]!=="parent"){var N=F[G[Z]];if(N)if(N instanceof Array)for(var q=0;q<N.length;++q)N[q]&&typeof N[q].type=="string"&&A(N[q],F);else typeof N.type=="string"&&A(N,F)}}}})(r.body[0].expression.callee.body,void 0),Ad(h),Ad(c);var y=new LC(v(r.body[0].expression.callee.body),a,c,h);return y}var jC=VC,Hl=jC,zC=nf,ws=["args","body"],qC=["pre","post","printCode","funcName","blockSize"];function WC(t){for(var e in t)ws.indexOf(e)<0&&qC.indexOf(e)<0&&console.warn("cwise: Unknown argument '"+e+"' passed to expression compiler");for(var r=0;r<ws.length;++r)if(!t[ws[r]])throw new Error("cwise: Missing argument: "+ws[r]);return zC({args:t.args,pre:Hl(t.pre||function(){}),body:Hl(t.body),post:Hl(t.post||function(){}),debug:!!t.printCode,funcName:t.funcName||t.body.name||"cwise",blockSize:t.blockSize||64})}var yo=WC,HC=TC,$C=yo,GC=$C({args:["array","scalar","index"],body:function(e,r,n){var i=r,a;for(a=0;a<n.length-1;++a)i=i[n[a]];i[n[n.length-1]]=e}}),KC=function(e){var r=HC(e.shape);return GC(e,r),r},Js={},YC={get exports(){return Js},set exports(t){Js=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(o,s){for(var l=new Float64Array(o*s),h=0;h<l.length;h++)l[h]=a()*1e-4;return(0,n.default)(l,[o,s])};var r=Ra,n=i(r);function i(o){return o&&o.__esModule?o:{default:o}}function a(){var o=2*Math.random()-1,s=2*Math.random()-1,l=o*o+s*s;return l==0||l>1?a():o*Math.sqrt(-2*Math.log(l)/l)}t.exports=e.default})(YC,Js);var Eu={},ZC={get exports(){return Eu},set exports(t){Eu=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(f,p){var g=f.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]);switch(p){case"euclidean":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=s(f.pick(v,null),f.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break;case"manhattan":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=l(f.pick(v,null),f.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break;case"jaccard":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=h(f.pick(v,null),f.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break;case"dice":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=c(f.pick(v,null),f.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break}return b};var r=Ra,n=o(r),i=yo,a=o(i);function o(f){return f&&f.__esModule?f:{default:f}}var s=(0,a.default)({args:["array","array"],pre:function(p,g){this.sum=0},body:function(p,g){var b=p-g;this.sum+=b*b},post:function(p,g){return Math.sqrt(this.sum)}}),l=(0,a.default)({args:["array","array"],pre:function(p,g){this.sum=0},body:function(p,g){this.sum+=Math.abs(p-g)},post:function(p,g){return this.sum}}),h=(0,a.default)({args:["array","array"],pre:function(p,g){this.tf=0,this.tt=0},body:function(p,g){var b=Math.round(p),v=Math.round(g);this.tf+=+(b!=v),this.tt+=+(b==1&&v==1)},post:function(p,g){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),c=(0,a.default)({args:["array","array"],pre:function(p,g){this.tf=0,this.tt=0},body:function(p,g){var b=Math.round(p),v=Math.round(g);this.tf+=+(b!=v),this.tt+=+(b==1&&v==1)},post:function(p,g){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});t.exports=e.default})(ZC,Eu);var Qs={},JC={get exports(){return Qs},set exports(t){Qs=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(c,f){for(var p=100,g=c.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]),v=(0,n.default)(new Float64Array(g*g),[g,g]),m=void 0,D=void 0,S=1/0,y=Math.log(f),A=void 0,F=void 0,P=void 0,O=void 0,C=0;C<g;C++){m=1,D=-1/0,S=1/0;for(var x=0;x<p;x++){for(var z=0;z<g;z++)b.set(C,z,Math.exp(-c.get(C,z)*m));b.set(C,C,0),P=0;for(var z=0;z<g;z++)P+=b.get(C,z);P==0&&(P=s),O=0;for(var z=0;z<g;z++)b.set(C,z,b.get(C,z)/P),O+=c.get(C,z)*b.get(C,z);if(F=Math.log(P)+m*O,A=F-y,Math.abs(A)<=h)break;A>0?(D=m,S==1/0?m=m*2:m=(m+S)/2):(S=m,D==-1/0?m=m/2:m=(m+D)/2)}}a.default.add(v,b,b.transpose(1,0));var G=Math.max(a.default.sum(v),l);return a.default.divseq(v,G),a.default.maxseq(v,l),v};var r=Ra,n=o(r),i=wo,a=o(i);function o(c){return c&&c.__esModule?c:{default:c}}var s=1e-7,l=Number.EPSILON||2220446049250313e-31,h=1e-5;t.exports=e.default})(JC,Qs);var Xs={},QC={get exports(){return Xs},set exports(t){Xs=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(g,b,v){var m=g.shape[0],D=g.shape[1],S=(0,n.default)(new Float64Array(m*m),[m,m]),y=(0,h.default)(g,"euclidean");p(y);var A=(v+1)/-2;a.default.powseq(a.default.divseq(a.default.addseq(y,1),v),A);for(var F=0;F<m;F++)y.set(F,F,0);var P=Math.max(a.default.sum(y),f);a.default.divs(S,y,P),a.default.maxseq(S,f);var O=(0,n.default)(new Float64Array(m*m),[m,m]),C=(0,n.default)(new Float64Array(m*m),[m,m]);a.default.div(O,b,S),a.default.logeq(O),a.default.assign(C,b);var x=a.default.sum(a.default.muleq(O,C)),z=(0,n.default)(new Float64Array(g.size),g.shape),G=(0,n.default)(new Float64Array(m*m),[m,m]);a.default.sub(G,b,S),a.default.muleq(G,y);for(var F=0;F<m;F++)for(var Z=0;Z<D;Z++){var R=(0,n.default)(new Float64Array(g.shape[0]),[g.shape[0]]);a.default.assign(R,g.pick(null,Z)),a.default.addseq(a.default.negeq(R),g.get(F,Z)),a.default.muleq(R,G.pick(F,null)),z.set(F,Z,a.default.sum(R))}var N=2*(v+1)/v;return a.default.mulseq(z,N),[x,z]};var r=Ra,n=c(r),i=wo,a=c(i),o=yo,s=c(o),l=Eu,h=c(l);function c(g){return g&&g.__esModule?g:{default:g}}var f=Number.EPSILON||2220446049250313e-31,p=(0,s.default)({args:["array"],body:function(b){}});t.exports=e.default})(QC,Xs);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function R(N,q){var j=[],J=!0,Q=!1,te=void 0;try{for(var ce=N[Symbol.iterator](),me;!(J=(me=ce.next()).done)&&(j.push(me.value),!(q&&j.length===q));J=!0);}catch(Ee){Q=!0,te=Ee}finally{try{!J&&ce.return&&ce.return()}finally{if(Q)throw te}}return j}return function(N,q){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return R(N,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function R(N,q){for(var j=0;j<q.length;j++){var J=q[j];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(N,J.key,J)}}return function(N,q,j){return q&&R(N.prototype,q),j&&R(N,j),N}}(),i=Ys,a=Ra,o=O(a),s=wo,l=O(s),h=MC,c=O(h),f=KC,p=O(f),g=yo,b=O(g),v=Js,m=O(v),D=Eu,S=O(D),y=Qs,A=O(y),F=Xs,P=O(F);function O(R){return R&&R.__esModule?R:{default:R}}function C(R){if(Array.isArray(R)){for(var N=0,q=Array(R.length);N<R.length;N++)q[N]=R[N];return q}else return Array.from(R)}function x(R,N){if(!(R instanceof N))throw new TypeError("Cannot call a class as a function")}function z(R,N){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:R}function G(R,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);R.prototype=Object.create(N&&N.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(R,N):R.__proto__=N)}var Z=function(R){G(N,R);function N(q){x(this,N);var j=z(this,Object.getPrototypeOf(N).call(this));return q=q||{},j.dim=q.dim||2,j.perplexity=q.perplexity||30,j.earlyExaggeration=q.earlyExaggeration||4,j.learningRate=q.learningRate||1e3,j.nIter=q.nIter||1e3,j.metric=q.metric||"euclidean",j.barneshut=q.barneshut||!1,j.inputData=null,j.outputEmbedding=null,j}return n(N,[{key:"init",value:function(j){j=j||{};var J=j.data||[],Q=j.type||"dense";if(Q==="dense")this.inputData=(0,c.default)(J);else if(Q==="sparse"){for(var te=[],ce=1,me=function(St){var Bt=Math.max.apply(null,J.map(function(vt){return vt[St]}))+1;te.push(Bt),ce*=Bt},Ee=0;Ee<J[0].length;Ee++)me(Ee);this.inputData=(0,o.default)(new Float64Array(ce),te);var be=!0,Oe=!1,ke=void 0;try{for(var Ne=J[Symbol.iterator](),ze;!(be=(ze=Ne.next()).done);be=!0){var tt,at=ze.value;(tt=this.inputData).set.apply(tt,C(at).concat([1]))}}catch(rt){Oe=!0,ke=rt}finally{try{!be&&Ne.return&&Ne.return()}finally{if(Oe)throw ke}}}else throw new Error("input data type must be dense or sparse");this.outputEmbedding=(0,m.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,S.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,A.default)(this.distances,this.perplexity);var j=Number.MAX_VALUE,J=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),l.default.mulseq(this.P,this.earlyExaggeration);var Q=this._gradDesc(J,50,.5,0,0),te=r(Q,2);j=te[0],J=te[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var ce=this._gradDesc(J+1,100,.8,0,0),me=r(ce,2);j=me[0],J=me[1],this.emit("progressStatus","Final optimization with momentum 0.8"),l.default.divseq(this.P,this.earlyExaggeration);var Ee=this._gradDesc(J+1,this.nIter,.8,1e-6,1e-6),be=r(Ee,2);return j=be[0],J=be[1],this.emit("progressStatus","Optimization end"),[j,J]}},{key:"rerun",value:function(){this.outputEmbedding=(0,m.default)(this.inputData.shape[0],this.dim);var j=this.run(),J=r(j,2),Q=J[0],te=J[1];return[Q,te]}},{key:"getOutput",value:function(){return(0,p.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var j=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),J=(0,o.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),Q=0;Q<this.outputEmbedding.shape[1];Q++){var te=l.default.sup(l.default.abs(J,this.outputEmbedding.pick(null,Q)));l.default.divs(j.pick(null,Q),this.outputEmbedding.pick(null,Q),te)}return(0,p.default)(j)}},{key:"_gradDesc",value:function(j,J,Q){for(var te=arguments.length<=3||arguments[3]===void 0?1e-6:arguments[3],ce=arguments.length<=4||arguments[4]===void 0?1e-6:arguments[4],me=30,Ee=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),be=new Float64Array(this.outputEmbedding.size),Oe=0;Oe<be.length;Oe++)be[Oe]=1;var ke=(0,o.default)(be,this.outputEmbedding.shape),Ne=Number.MAX_VALUE,ze=Number.MAX_VALUE,tt=0,at=(0,b.default)({args:["array"],pre:function(pr){this.sum=0},body:function(pr){this.sum+=pr*pr},post:function(pr){return Math.sqrt(this.sum)}}),rt=(0,b.default)({args:["array","array","array"],body:function(pr,Fr,Bn){}}),St=void 0;for(St=j;St<J;St++){var Bt=(0,P.default)(this.outputEmbedding,this.P,this.alpha),vt=r(Bt,2),ct=vt[0],xt=vt[1],qr=Math.abs(ct-Ne);Ne=ct;var Ut=at(xt);if(this.emit("progressIter",[St,Ne,Ut]),Ne<ze)ze=Ne,tt=St;else if(St-tt>me)break;if(te>=Ut||ce>=qr)break;rt(ke,Ee,xt),l.default.muleq(xt,ke);var Wr=(0,o.default)(new Float64Array(xt.size),xt.shape);l.default.muls(Wr,xt,this.learningRate),l.default.mulseq(Ee,Q),l.default.subeq(Ee,Wr),l.default.addeq(this.outputEmbedding,Ee),this.emit("progressData",this.getOutputScaled())}return[Ne,St]}}]),N}(i.EventEmitter);e.default=Z,t.exports=e.default})(G6,Ks);const XC=Gc(Ks);var Ic={},eF={get exports(){return Ic},set exports(t){Ic=t}};(function(t){var e=parseInt(Number.MAX_SAFE_INTEGER/2)||4503599627370496,r=0;function n(){this.C=null,this.row_covered=[],this.col_covered=[],this.n=0,this.Z0_r=0,this.Z0_c=0,this.marked=null,this.path=null}n.prototype.pad_matrix=function(s,l){l=l||r;var h=0,c=s.length,f;for(f=0;f<c;++f)s[f].length>h&&(h=s[f].length);c=h>c?h:c;var p=[];for(f=0;f<c;++f){for(var g=s[f]||[],b=g.slice();c>b.length;)b.push(l);p.push(b)}return p},n.prototype.compute=function(s,l){l=l||{},l.padValue=l.padValue||r,this.C=this.pad_matrix(s,l.padValue),this.n=this.C.length,this.original_length=s.length,this.original_width=s[0].length;for(var h=[];h.length<this.n;)h.push(!1);this.row_covered=h.slice(),this.col_covered=h.slice(),this.Z0_r=0,this.Z0_c=0,this.path=this.__make_matrix(this.n*2,0),this.marked=this.__make_matrix(this.n,0);for(var c=1,f={1:this.__step1,2:this.__step2,3:this.__step3,4:this.__step4,5:this.__step5,6:this.__step6};;){var p=f[c];if(!p)break;c=p.apply(this)}for(var g=[],b=0;b<this.original_length;++b)for(var v=0;v<this.original_width;++v)this.marked[b][v]==1&&g.push([b,v]);return g},n.prototype.__make_matrix=function(s,l){for(var h=[],c=0;c<s;++c){h[c]=[];for(var f=0;f<s;++f)h[c][f]=l}return h},n.prototype.__step1=function(){for(var s=0;s<this.n;++s)for(var l=Math.min.apply(Math,this.C[s]),h=0;h<this.n;++h)this.C[s][h]-=l;return 2},n.prototype.__step2=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)if(this.C[s][l]===0&&!this.col_covered[l]&&!this.row_covered[s]){this.marked[s][l]=1,this.col_covered[l]=!0,this.row_covered[s]=!0;break}return this.__clear_covers(),3},n.prototype.__step3=function(){for(var s=0,l=0;l<this.n;++l)for(var h=0;h<this.n;++h)this.marked[l][h]==1&&this.col_covered[h]==!1&&(this.col_covered[h]=!0,++s);return s>=this.n?7:4},n.prototype.__step4=function(){for(var s=!1,l=-1,h=-1,c=-1;!s;){var f=this.__find_a_zero();if(l=f[0],h=f[1],l<0)return 6;if(this.marked[l][h]=2,c=this.__find_star_in_row(l),c>=0)h=c,this.row_covered[l]=!0,this.col_covered[h]=!1;else return this.Z0_r=l,this.Z0_c=h,5}},n.prototype.__step5=function(){var s=0;this.path[s][0]=this.Z0_r,this.path[s][1]=this.Z0_c;for(var l=!1;!l;){var h=this.__find_star_in_col(this.path[s][1]);if(h>=0?(s++,this.path[s][0]=h,this.path[s][1]=this.path[s-1][1]):l=!0,!l){var c=this.__find_prime_in_row(this.path[s][0]);s++,this.path[s][0]=this.path[s-1][0],this.path[s][1]=c}}return this.__convert_path(this.path,s),this.__clear_covers(),this.__erase_primes(),3},n.prototype.__step6=function(){for(var s=this.__find_smallest(),l=0;l<this.n;++l)for(var h=0;h<this.n;++h)this.row_covered[l]&&(this.C[l][h]+=s),this.col_covered[h]||(this.C[l][h]-=s);return 4},n.prototype.__find_smallest=function(){for(var s=e,l=0;l<this.n;++l)for(var h=0;h<this.n;++h)!this.row_covered[l]&&!this.col_covered[h]&&s>this.C[l][h]&&(s=this.C[l][h]);return s},n.prototype.__find_a_zero=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)if(this.C[s][l]===0&&!this.row_covered[s]&&!this.col_covered[l])return[s,l];return[-1,-1]},n.prototype.__find_star_in_row=function(s){for(var l=0;l<this.n;++l)if(this.marked[s][l]==1)return l;return-1},n.prototype.__find_star_in_col=function(s){for(var l=0;l<this.n;++l)if(this.marked[l][s]==1)return l;return-1},n.prototype.__find_prime_in_row=function(s){for(var l=0;l<this.n;++l)if(this.marked[s][l]==2)return l;return-1},n.prototype.__convert_path=function(s,l){for(var h=0;h<=l;++h)this.marked[s[h][0]][s[h][1]]=this.marked[s[h][0]][s[h][1]]==1?0:1},n.prototype.__clear_covers=function(){for(var s=0;s<this.n;++s)this.row_covered[s]=!1,this.col_covered[s]=!1},n.prototype.__erase_primes=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)this.marked[s][l]==2&&(this.marked[s][l]=0)};function i(s,l){var h,c;if(!l){var f=-1/0;for(h=0;h<s.length;++h)for(c=0;c<s[h].length;++c)s[h][c]>f&&(f=s[h][c]);l=function(b){return f-b}}var p=[];for(h=0;h<s.length;++h){var g=s[h];for(p[h]=[],c=0;c<g.length;++c)p[h][c]=l(s[h][c])}return p}function a(s){var l=[],h,c;for(h=0;h<s.length;++h)for(c=0;c<s[h].length;++c){var f=String(s[h][c]).length;(!l[c]||f>=l[c])&&(l[c]=f)}var p="";for(h=0;h<s.length;++h){for(c=0;c<s[h].length;++c){for(var g=String(s[h][c]);g.length<l[c];)g=" "+g;p+=g,c!=s[h].length-1&&(p+=" ")}h!=s[h].length-1&&(p+=`
`)}return p}function o(s,l){var h=new n;return h.compute(s,l)}o.version="1.2.2",o.format_matrix=a,o.make_cost_matrix=i,o.Munkres=n,t.exports&&(t.exports=o)})(eF);const tF=Ic;function af(t){return t<2?0:t<4?2:t<6?4:t<8?6:8}function Pi(t,e){return new Tc.KMEANS().run(t,e)}function rF(t,e){return t.map(r=>e.map(n=>Pa(r,n)))}function H1(t){switch(t){case 2:return[Vr(Ir([0,0],[0,1]),.5),Vr(Ir([1,0],[1,1]),.5)];case 4:return[[0,0],[0,1],[1,1],[1,0]];case 6:return[Vr(Ir([0,0],[0,1]),.5),Vr(Ir([1,0],[1,1]),.5),[0,0],[0,1],[1,1],[1,0]];case 8:return[Vr(Ir([0,0],[0,1]),.5),Vr(Ir([1,0],[1,1]),.5),[0,0],[0,1],[1,1],[1,0],Vr(Ir([0,0],[1,0]),.5),Vr(Ir([0,1],[1,1]),.5)];default:return[]}}function $1(t,e){if(t.length!==e.length)throw new Error("Both sets should have the same number of points");const r=rF(t,e),n=tF(r);return n?n.map(([i,a])=>({ids:[i,a],points:[t[i],e[a]]})):null}function uf(t){let e=new XC({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:5e3,metric:"euclidean"});const r=Object.keys(t),n=Object.values(t);e.init({data:n,type:"dense"}),e.run();let a=e.getOutputScaled().map(([s,l])=>[(s+1)/2,(l+1)/2]);return r.reduce((s,l,h)=>(s[l]=a[h],s),{})}function nF(t){let e,r,n,i,a,o,s;r=new tf({props:{center:t[6],dimensions:t[2],onMarkerMove:t[7],dataPoints:t[4]}}),a=new rf({props:{useExponentialScaling:t[3].embedExponentialScaling,toggleExponentialScaling:t[9],exponentialScaling:t[3].embedWeightScaling,setExponentialScaling:t[10],connectionLimit:t[3].promptLimit||t[5],setConnectionLimit:t[8],maxConnectionLimit:t[5],clusterCount:t[3].embedClusters||0,setClusterCount:t[11],maxClusterCount:t[5],onShuffle:t[12]}});const l=t[18].default,h=ka(l,t,t[17],null);return{c(){e=W("div"),Le(r.$$.fragment),i=we(),Le(a.$$.fragment),o=we(),h&&h.c(),this.h()},l(c){e=H(c,"DIV",{class:!0});var f=U(e);Re(r.$$.fragment,f),f.forEach(M),i=ye(c),Re(a.$$.fragment,c),o=ye(c),h&&h.l(c),this.h()},h(){B(e,"class","w-full h-full"),gi(()=>t[19].call(e))},m(c,f){ue(c,e,f),Ue(r,e,null),n=ea(e,t[19].bind(e)),ue(c,i,f),Ue(a,c,f),ue(c,o,f),h&&h.m(c,f),s=!0},p(c,[f]){const p={};f&64&&(p.center=c[6]),f&4&&(p.dimensions=c[2]),f&16&&(p.dataPoints=c[4]),r.$set(p);const g={};f&8&&(g.useExponentialScaling=c[3].embedExponentialScaling),f&8&&(g.exponentialScaling=c[3].embedWeightScaling),f&40&&(g.connectionLimit=c[3].promptLimit||c[5]),f&32&&(g.maxConnectionLimit=c[5]),f&8&&(g.clusterCount=c[3].embedClusters||0),f&32&&(g.maxClusterCount=c[5]),a.$set(g),h&&h.p&&(!s||f&131072)&&Ta(h,l,c,c[17],s?xa(l,c[17],f,null):Ia(c[17]),null)},i(c){s||(oe(r.$$.fragment,c),oe(a.$$.fragment,c),oe(h,c),s=!0)},o(c){he(r.$$.fragment,c),he(a.$$.fragment,c),he(h,c),s=!1},d(c){c&&M(e),Ve(r),n(),c&&M(i),Ve(a,c),c&&M(o),h&&h.d(c)}}}function iF(t,e,r){let n,i,a,o,s,l,h,c,f;qe(t,qs,R=>r(16,c=R)),qe(t,Ke,R=>r(3,f=R));let{$$slots:p={},$$scope:g}=e,b=0,v=0,m={};function D(R){c&&f.scaledEmbedMappings&&(F(),A(o,l,h,R))}function S(R,N){R&&N&&(F(),A(o,l,h,s))}function y(R,N){A(o,R,N,s)}function A(R,N,q,j){if(!m)return;let J={...f.weightedPrompts},Q=0;const te=Object.entries(m).reduce((Ee,[be,Oe])=>{const ke=Pa(R,Oe.xy);return Ee[parseInt(be)]=ke,Ee},{});Object.entries(te).sort((Ee,be)=>Ee[1]-be[1]).forEach(([Ee,be],Oe)=>{if(!J[parseInt(Ee)])return;Oe<j+1&&be>Q&&(Q=be*1.1)});const ce=(Ee,be)=>{const Oe=Ee?Math.round(Math.pow(1-be/Q,q)*100)/100:0;return Oe<0?0:Oe},me=(Ee,be)=>{const Oe=Ee?Math.round((1-be/Q)*100)/100:0;return Oe<0?0:Oe};Object.entries(te).sort((Ee,be)=>Ee[1]-be[1]).forEach(([Ee,be],Oe)=>{if(!J[parseInt(Ee)])return;const ke=Oe<j,Ne=N?ce(ke,be):me(ke,be);J[parseInt(Ee)]={...J[parseInt(Ee)],embedWeight:Ne},r(4,m[parseInt(Ee)].opacity=Zr(Ne),m),r(4,m[parseInt(Ee)].connected=ke,m)}),Ke.update({...f,embedMarker:o,weightedPrompts:J})}function F(){if(!c||!f.scaledEmbedMappings)return;const R=Object.keys(f.scaledEmbedMappings),N=j=>{if(!j.length)return i;const J=j.map(Q=>q[Q].xy);return Rs(J)},q=R.reduce((j,J,Q)=>(j[J]={xy:f.scaledEmbedMappings[Q],text:f.weightedPrompts[Q].text,connected:!0,opacity:1},j),{});if(f.embedClusters&&f.embedClusterSets){const j=f.embedClusters,J=f.embedClusterSets[j];let Q=J.map(me=>N(me));const te=H1(j),ce=$1(Q,te);ce&&ce.forEach(me=>{const Ee=me.ids[0],be=me.points[1];J[Ee].forEach(Oe=>{q[Oe].xy=Rs([q[Oe].xy,be])})})}r(4,m=q)}function P(R){o=R,A(o,l,h,s)}function O(R){R>0&&R<=a&&Ke.update({...f,promptLimit:R})}function C(){Ke.update({...f,embedExponentialScaling:!f.embedExponentialScaling})}function x(R){Ke.update({...f,embedWeightScaling:R})}function z(R){[0,2,4,6,8].indexOf(R)!==-1&&Ke.update({...f,embedClusters:R})}async function G(){Ke.update({...f,scaledEmbedMappings:uf(c)})}function Z(){b=this.clientWidth,v=this.clientHeight,r(0,b),r(1,v)}return t.$$set=R=>{"$$scope"in R&&r(17,g=R.$$scope)},t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[b||250,v||250]),t.$$.dirty&4&&r(6,i=ra(n)),t.$$.dirty&8&&r(5,a=Object.keys(f.weightedPrompts||{}).length),t.$$.dirty&8&&(o=f.embedMarker||[.5,.5]),t.$$.dirty&8&&r(13,s=f.promptLimit||Object.keys(f.weightedPrompts).length),t.$$.dirty&8&&r(15,l=f.embedExponentialScaling),t.$$.dirty&8&&r(14,h=f.embedWeightScaling),t.$$.dirty&65544&&c&&Object.keys(c).length<f.embedClusters&&z(af(Object.keys(c).length)),t.$$.dirty&49152&&y(l,h),t.$$.dirty&65544&&S(c,f.scaledEmbedMappings),t.$$.dirty&8192&&D(s)},[b,v,n,f,m,a,i,P,O,C,x,z,G,s,h,l,c,g,p,Z]}class aF extends Je{constructor(e){super(),Qe(this,e,iF,nF,Xe,{})}}const $l="oKey";function uF(){const t=rr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[$l]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[$l]=a,r(a))},get:()=>At(t),delete:()=>{i&&(delete localStorage[$l],r(""))}}}const Yn=uF(),Cd="concept";function sF(){const t=rr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith(Cd+"_")){const s=o.split(/_(.*)/s)[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{if(!a||!i)return;const s=At(t);s[a]=o,r(s)},cache:a=>{if(!i)return;const o=At(t),s=Object.values(Ke.get().weightedPrompts).map(l=>l.text);Object.entries(o).sort(([l,h],[c,f])=>s.includes(l)&&!s.includes(c)?-1:!s.includes(l)&&s.includes(c)?1:0).forEach(([l,h],c)=>{c<=a?localStorage[`concept_${l}`]=JSON.stringify(h):delete localStorage[`concept_${l}`]})},get:()=>At(t),remove:a=>{if(!a||!i)return;const o=At(t);delete o[a],delete localStorage[`concept_${a}`],r(o)},delete:()=>{i&&(delete localStorage[Cd],r({}))}}}const Jr=sF(),oF=Cu(Jr,t=>Object.entries(t).reduce((e,[r,n])=>(n&&(e[r]=n),e),{})),hi=rr({});function lF(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!0,pending:dF,then:hF,catch:fF,value:7,error:8,blocks:[,,,]};return Bs(r=t[2],i),{c(){e=Ct(),i.block.c()},l(a){e=Ct(),i.block.l(a)},m(a,o){ue(a,e,o),i.block.m(a,i.anchor=o),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(a,o){t=a,i.ctx=t,o&4&&r!==(r=t[2])&&Bs(r,i)||qp(i,t,o)},i(a){n||(oe(i.block),n=!0)},o(a){for(let o=0;o<3;o+=1){const s=i.blocks[o];he(s)}n=!1},d(a){a&&M(e),i.block.d(a),i.token=null,i=null}}}function cF(t){let e,r,n,i,a;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("p"),a=Fe("Set OpenAI key in settings to use embedding map."),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=U(e);r=H(s,"DIV",{class:!0});var l=U(r);n=H(l,"DIV",{class:!0});var h=U(n);i=H(h,"P",{class:!0});var c=U(i);a=Se(c,"Set OpenAI key in settings to use embedding map."),c.forEach(M),h.forEach(M),l.forEach(M),s.forEach(M),this.h()},h(){B(i,"class","text-center text-lg"),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(o,s){ue(o,e,s),T(e,r),T(r,n),T(n,i),T(i,a)},p:Pe,i:Pe,o:Pe,d(o){o&&M(e)}}}function fF(t){let e,r=t[8].message+"",n;return{c(){e=W("p"),n=Fe(r),this.h()},l(i){e=H(i,"P",{style:!0});var a=U(e);n=Se(a,r),a.forEach(M),this.h()},h(){Ot(e,"color","red")},m(i,a){ue(i,e,a),T(e,n)},p(i,a){a&4&&r!==(r=i[8].message+"")&&zt(n,r)},i:Pe,o:Pe,d(i){i&&M(e)}}}function hF(t){let e,r;return e=new aF({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},p:Pe,i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function dF(t){let e,r,n,i,a,o,s,l,h;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("p"),a=Fe("Fetching embeddings. This may take a while..."),o=we(),s=W("progress"),this.h()},l(c){e=H(c,"DIV",{class:!0});var f=U(e);r=H(f,"DIV",{class:!0});var p=U(r);n=H(p,"DIV",{class:!0});var g=U(n);i=H(g,"P",{class:!0});var b=U(i);a=Se(b,"Fetching embeddings. This may take a while..."),b.forEach(M),o=ye(g),s=H(g,"PROGRESS",{class:!0,max:!0}),U(s).forEach(M),g.forEach(M),p.forEach(M),f.forEach(M),this.h()},h(){B(i,"class","text-center text-sm"),B(s,"class","progress progress-primary w-56"),s.value=l=Object.keys(t[3]).length,B(s,"max",h=Object.keys(t[0].weightedPrompts).length),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(c,f){ue(c,e,f),T(e,r),T(r,n),T(n,i),T(i,a),T(n,o),T(n,s)},p(c,f){f&8&&l!==(l=Object.keys(c[3]).length)&&(s.value=l),f&1&&h!==(h=Object.keys(c[0].weightedPrompts).length)&&B(s,"max",h)},i:Pe,o:Pe,d(c){c&&M(e)}}}function pF(t){let e,r,n,i,a;const o=[cF,lF],s=[];function l(h,c){return h[1]?1:0}return e=l(t),r=s[e]=o[e](t),i=new La({}),{c(){r.c(),n=we(),Le(i.$$.fragment)},l(h){r.l(h),n=ye(h),Re(i.$$.fragment,h)},m(h,c){s[e].m(h,c),ue(h,n,c),Ue(i,h,c),a=!0},p(h,[c]){let f=e;e=l(h),e===f?s[e].p(h,c):(Gt(),he(s[f],1,1,()=>{s[f]=null}),Kt(),r=s[e],r?r.p(h,c):(r=s[e]=o[e](h),r.c()),oe(r,1),r.m(n.parentNode,n))},i(h){a||(oe(r),oe(i.$$.fragment,h),a=!0)},o(h){he(r),he(i.$$.fragment,h),a=!1},d(h){s[e].d(h),h&&M(n),Ve(i,h)}}}function gF(t,e){return e?t.embedClusterSets?Object.entries(e).length!==Object.entries(t.weightedPrompts).length?(console.log("embeddings length mismatch",Object.entries(e).length,Object.entries(t.weightedPrompts).length),!0):(t.lastPromptChange||0)>(t.lastEmbeddingChange||0)?(console.log("prompt change after embedding change"),!0):!1:(console.log("no active cluster sets"),!0):(console.log("no active embeddings"),!0)}function vF(t,e,r){let n,i,a;qe(t,Ke,c=>r(0,n=c)),qe(t,Yn,c=>r(1,i=c)),qe(t,qs,c=>r(4,a=c));let o=null,s={};async function l(c){return console.log("waiting for embeddings"),new Promise((f,p)=>{r(3,s={});const g=()=>{b(),c.every(D=>s[D]!==void 0)?f(s):setTimeout(g,100)},b=()=>{c.forEach(m=>{const D=Jr.get()[m];D&&r(3,s[m]=D,s)})};b(),c.filter(m=>!s[m]).forEach(m=>{hi.update(D=>(D[m]=!1,D))}),g()})}async function h(){if(console.log("fetching embeddings"),!i||!n.weightedPrompts)return;const c=Object.entries(n.weightedPrompts).map(([y,A])=>[y,A.text]),f=c.map(y=>y[1]);console.log("fetching embedding for",f),r(2,o=l(f)),await o;const p={};c.forEach(([y,A])=>{p[parseInt(y)]=s[A]});let g=Object.entries(p).sort((y,A)=>parseInt(y[0])-parseInt(A[0]));const b=y=>new Array(y).fill(null).map(()=>[]);console.log("clustering embeddings");const v=g.length>=2?Pi(g.map(y=>y[1]),2):[g.map(y=>y[0])];console.log("set of 2 complete");const m=g.length>=4?Pi(g.map(y=>y[1]),4):v;console.log("set of 4 complete");const D=g.length>=6?Pi(g.map(y=>y[1]),6):m;console.log("set of 6 complete");const S=g.length>=8?Pi(g.map(y=>y[1]),8):D;console.log("set of 8 complete"),Ke.update({...n,embedClusterSets:{2:[...v,...b(2-v.length)],4:[...m,...b(4-m.length)],6:[...D,...b(6-D.length)],8:[...S,...b(8-S.length)]},lastEmbeddingChange:Date.now(),scaledEmbedMappings:uf(p)}),qs.set(p),console.log("embeddings complete")}return t.$$.update=()=>{t.$$.dirty&19&&i&&gF(n,a)&&(console.log("Embeddings require update"),h())},[n,i,o,s,a]}class mF extends Je{constructor(e){super(),Qe(this,e,vF,pF,Xe,{})}}function _F(t){let e,r,n,i;return{c(){e=dt("g"),r=dt("circle"),this.h()},l(a){e=pt(a,"g",{});var o=U(e);r=pt(o,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),U(r).forEach(M),o.forEach(M),this.h()},h(){B(r,"cx",n=t[0][0]),B(r,"cy",i=t[0][1]),B(r,"r",t[1]),B(r,"stroke",t[3]),B(r,"stroke-width",t[2]),Ot(r,"fill","rgba(0,0,0,0)")},m(a,o){ue(a,e,o),T(e,r)},p(a,[o]){o&1&&n!==(n=a[0][0])&&B(r,"cx",n),o&1&&i!==(i=a[0][1])&&B(r,"cy",i),o&2&&B(r,"r",a[1]),o&8&&B(r,"stroke",a[3]),o&4&&B(r,"stroke-width",a[2])},i:Pe,o:Pe,d(a){a&&M(e)}}}function bF(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=20}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class DF extends Je{constructor(e){super(),Qe(this,e,bF,_F,Xe,{xy:0,radius:1,stroke:2,color:3})}}function wF(t){let e,r,n,i,a;return{c(){e=dt("polygon"),this.h()},l(o){e=pt(o,"polygon",{points:!0,"stroke-width":!0,fill:!0,transform:!0}),U(e).forEach(M),this.h()},h(){B(e,"points",r=`${t[7][0]},${t[7][1]} ${t[9][0]},${t[9][1]} ${t[8][0]},${t[8][1]} ${t[6][0]},${t[6][1]} ${t[4][0]},${t[4][1]} ${t[5][0]},${t[5][1]}`),B(e,"stroke-width",4),B(e,"fill",t[3]),B(e,"transform",n=`rotate(${t[1].toFixed(2)} ${t[0][0]} ${t[0][1]}) rotate(${t[2]?"180":"0"} ${(t[7][0]+t[6][0])/2} ${(t[7][1]+t[6][1])/2})`)},m(o,s){ue(o,e,s),i||(a=[_e(e,"mouseover",t[10]),_e(e,"mouseout",t[11]),_e(e,"mousedown",t[12]),_e(e,"touchstart",t[12])],i=!0)},p(o,[s]){s&1008&&r!==(r=`${o[7][0]},${o[7][1]} ${o[9][0]},${o[9][1]} ${o[8][0]},${o[8][1]} ${o[6][0]},${o[6][1]} ${o[4][0]},${o[4][1]} ${o[5][0]},${o[5][1]}`)&&B(e,"points",r),s&8&&B(e,"fill",o[3]),s&199&&n!==(n=`rotate(${o[1].toFixed(2)} ${o[0][0]} ${o[0][1]}) rotate(${o[2]?"180":"0"} ${(o[7][0]+o[6][0])/2} ${(o[7][1]+o[6][1])/2})`)&&B(e,"transform",n)},i:Pe,o:Pe,d(o){o&&M(e),i=!1,Rt(a)}}}function yF(t,e,r){let n,i,a,o,s,l,{xy:h=[500,500]}=e,{radius:c=400}=e,{stroke:f=20}=e,{color:p="rgba(46,67,101, 0.4)"}=e,{hoverColor:g="white"}=e,{angle:b=0}=e,{handleMouseDown:v=F=>{}}=e,{reverse:m=!1}=e,D=p;function S(){r(3,D=g)}function y(){r(3,D=p)}function A(F){v(F)}return t.$$set=F=>{"xy"in F&&r(0,h=F.xy),"radius"in F&&r(13,c=F.radius),"stroke"in F&&r(14,f=F.stroke),"color"in F&&r(15,p=F.color),"hoverColor"in F&&r(16,g=F.hoverColor),"angle"in F&&r(1,b=F.angle),"handleMouseDown"in F&&r(17,v=F.handleMouseDown),"reverse"in F&&r(2,m=F.reverse)},t.$$.update=()=>{t.$$.dirty&24577&&r(9,n=xr(h,[-4,1],c-f/2)),t.$$.dirty&24577&&r(8,i=xr(h,[1,1],c-f/2)),t.$$.dirty&8193&&r(7,a=xr(h,[0,1],c)),t.$$.dirty&8193&&r(6,o=xr(h,[4,1],c)),t.$$.dirty&24577&&r(5,s=xr(h,[-3,1],c+f/2)),t.$$.dirty&24577&&r(4,l=xr(h,[1,1],c+f/2))},[h,b,m,D,l,s,o,a,i,n,S,y,A,c,f,p,g,v]}class EF extends Je{constructor(e){super(),Qe(this,e,yF,wF,Xe,{xy:0,radius:13,stroke:14,color:15,hoverColor:16,angle:1,handleMouseDown:17,reverse:2})}}function Fd(t,e,r){const n=t.slice();return n[21]=e[r][0],n[22]=e[r][1],n}function Sd(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,a;e=new Yc({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),s=[];for(let c=0;c<o.length;c+=1)s[c]=Bd(Fd(t,o,c));const l=c=>he(s[c],1,1,()=>{s[c]=null});let h=n&&Od(t);return{c(){Le(e.$$.fragment);for(let c=0;c<s.length;c+=1)s[c].c();r=Ct(),h&&h.c(),i=Ct()},l(c){Re(e.$$.fragment,c);for(let f=0;f<s.length;f+=1)s[f].l(c);r=Ct(),h&&h.l(c),i=Ct()},m(c,f){Ue(e,c,f);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(c,f);ue(c,r,f),h&&h.m(c,f),ue(c,i,f),a=!0},p(c,f){const p={};if(f&1&&(p.xy=c[0]),f&2&&(p.radius=c[1]),e.$set(p),f&1660){o=Object.entries(c[5].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=Fd(c,o,g);s[g]?(s[g].p(b,f),oe(s[g],1)):(s[g]=Bd(b),s[g].c(),oe(s[g],1),s[g].m(r.parentNode,r))}for(Gt(),g=o.length;g<s.length;g+=1)l(g);Kt()}f&32&&(n=Object.entries(c[5].weightedPrompts).length>0),n?h?(h.p(c,f),f&32&&oe(h,1)):(h=Od(c),h.c(),oe(h,1),h.m(i.parentNode,i)):h&&(Gt(),he(h,1,1,()=>{h=null}),Kt())},i(c){if(!a){oe(e.$$.fragment,c);for(let f=0;f<o.length;f+=1)oe(s[f]);oe(h),a=!0}},o(c){he(e.$$.fragment,c),s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)he(s[f]);he(h),a=!1},d(c){Ve(e,c),Au(s,c),c&&M(r),h&&h.d(c),c&&M(i)}}}function Bd(t){let e,r,n;e=new mo({props:{xy:t[10](t[6][t[21]].xy,jr(t[3],$t(t[22].text).length,t[4])),color:`rgba(255,255,255,${Zr(t[6][t[21]].unitWeight)}`,wh:jr(t[3],$t(t[22].text).length,t[4]),fontSize:t[4],text:$t(t[22].text)}});function i(){return t[15](t[21])}return r=new Na({props:{xy:t[6][t[21]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:i}}),{c(){Le(e.$$.fragment),Le(r.$$.fragment)},l(a){Re(e.$$.fragment,a),Re(r.$$.fragment,a)},m(a,o){Ue(e,a,o),Ue(r,a,o),n=!0},p(a,o){t=a;const s={};o&120&&(s.xy=t[10](t[6][t[21]].xy,jr(t[3],$t(t[22].text).length,t[4]))),o&96&&(s.color=`rgba(255,255,255,${Zr(t[6][t[21]].unitWeight)}`),o&56&&(s.wh=jr(t[3],$t(t[22].text).length,t[4])),o&16&&(s.fontSize=t[4]),o&32&&(s.text=$t(t[22].text)),e.$set(s);const l={};o&96&&(l.xy=t[6][t[21]].xy),o&4&&(l.radius=t[2]),o&32&&(l.handleMouseDown=i),r.$set(l)},i(a){n||(oe(e.$$.fragment,a),oe(r.$$.fragment,a),n=!0)},o(a){he(e.$$.fragment,a),he(r.$$.fragment,a),n=!1},d(a){Ve(e,a),Ve(r,a)}}}function Od(t){let e,r,n;return e=new DF({props:{xy:t[0],radius:t[7],stroke:30}}),r=new EF({props:{reverse:t[5].ringReverse,xy:t[0],radius:t[7],stroke:30,angle:t[5].ringStartAngle,color:"rgba(136,157,191, 1)",handleMouseDown:t[16]}}),{c(){Le(e.$$.fragment),Le(r.$$.fragment)},l(i){Re(e.$$.fragment,i),Re(r.$$.fragment,i)},m(i,a){Ue(e,i,a),Ue(r,i,a),n=!0},p(i,a){const o={};a&1&&(o.xy=i[0]),a&128&&(o.radius=i[7]),e.$set(o);const s={};a&32&&(s.reverse=i[5].ringReverse),a&1&&(s.xy=i[0]),a&128&&(s.radius=i[7]),a&32&&(s.angle=i[5].ringStartAngle),r.$set(s)},i(i){n||(oe(e.$$.fragment,i),oe(r.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),he(r.$$.fragment,i),n=!1},d(i){Ve(e,i),Ve(r,i)}}}function AF(t){let e,r,n,i,a,o=t[6]&&t[5].weightedPrompts&&Sd(t);const s=t[14].default,l=ka(s,t,t[13],null);return{c(){e=dt("svg"),o&&o.c(),r=we(),l&&l.c(),this.h()},l(h){e=pt(h,"svg",{id:!0,class:!0});var c=U(e);o&&o.l(c),c.forEach(M),r=ye(h),l&&l.l(h),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(h,c){ue(h,e,c),o&&o.m(e,null),ue(h,r,c),l&&l.m(h,c),n=!0,i||(a=[_e(e,"mousemove",t[11]),_e(e,"touchmove",t[11]),_e(e,"mouseup",t[8]),_e(e,"touchend",t[8]),_e(e,"dblclick",t[12])],i=!0)},p(h,[c]){h[6]&&h[5].weightedPrompts?o?(o.p(h,c),c&96&&oe(o,1)):(o=Sd(h),o.c(),oe(o,1),o.m(e,null)):o&&(Gt(),he(o,1,1,()=>{o=null}),Kt()),l&&l.p&&(!n||c&8192)&&Ta(l,s,h,h[13],n?xa(s,h[13],c,null):Ia(h[13]),null)},i(h){n||(oe(o),oe(l,h),n=!0)},o(h){he(o),he(l,h),n=!1},d(h){h&&M(e),o&&o.d(),h&&M(r),l&&l.d(h),i=!1,Rt(a)}}}function Md(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const o=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function CF(t,e,r){let n,i,a;qe(t,Ke,C=>r(5,a=C));let{$$slots:o={},$$scope:s}=e,{center:l=[450,450]}=e,{radius:h=250}=e,{pointRadius:c=10}=e,{textWidth:f=150}=e,{fontSize:p=13}=e,g=[0,0],b=null;function v(C){b=null}function m(C){b=C}function D(C,x){let z=Ln(C,l,h)[0]-180;z<0&&(z+=360);const G=Zc(ra(x),z);return Ir(C,G)}function S(C){console.log(h,n);const x=Ur(Ln(wu(C,l,n),l,n)[0]);r(6,i=F(a.weightedPrompts,l,h,a.ringWeightScaling,a.ringExponentialScaling,x,a.ringAngles))}function y(C){if(g=ki(C),b==="main")S(g);else if(b){const x={...a.weightedPrompts[b]},z=wu(g,l,h),G=Ln(z,l,h)[0],Z={...a.ringAngles};Z[x.id]=G;const R={...a.weightedPrompts};R[b]=x,r(6,i=F(R,l,h,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,Z))}}function A(C){g=ki(C),S(g)}function F(C,x,z,G,Z,R,N){if(!C||!x||!z||!G)return null;let q=Object.entries(C).reduce((J,[Q,te])=>{const me=a.ringReverse?R-N[Q]:N[Q]-R,Ee=Ur(me),be=Math.pow(1-Ee/360,Z?G:1);return J[Q]={angleDifference:Ee,xy:xr(x,[N[Q],1],z),unitWeight:be},J},{});const j={...C};return Object.entries(q).forEach(([J,Q])=>{j[J].ringWeight=Q.unitWeight}),Ke.update({...a,ringStartAngle:R,weightedPrompts:j,ringAngles:N}),q}const P=C=>m(C),O=()=>m("main");return t.$$set=C=>{"center"in C&&r(0,l=C.center),"radius"in C&&r(1,h=C.radius),"pointRadius"in C&&r(2,c=C.pointRadius),"textWidth"in C&&r(3,f=C.textWidth),"fontSize"in C&&r(4,p=C.fontSize),"$$scope"in C&&r(13,s=C.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&r(7,n=h-30),t.$$.dirty&32&&Object.keys(a.ringAngles).length!==Object.keys(a.weightedPrompts).length&&Ke.update({...a,ringAngles:Md(a.weightedPrompts,{})}),t.$$.dirty&35&&r(6,i=F(a.weightedPrompts,l,h,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,a.ringAngles||Md(a.weightedPrompts,{})))},[l,h,c,f,p,a,i,n,v,m,D,y,A,s,o,P,O]}class FF extends Je{constructor(e){super(),Qe(this,e,CF,AF,Xe,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function Pd(t){let e,r,n,i,a,o,s,l;return{c(){e=W("div"),r=W("label"),n=W("span"),i=Fe("Scaling Power"),a=we(),o=W("input"),this.h()},l(h){e=H(h,"DIV",{class:!0});var c=U(e);r=H(c,"LABEL",{class:!0});var f=U(r);n=H(f,"SPAN",{class:!0});var p=U(n);i=Se(p,"Scaling Power"),p.forEach(M),f.forEach(M),a=ye(c),o=H(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(M),this.h()},h(){B(n,"class","label-text"),B(r,"class","label"),B(o,"type","range"),B(o,"min","0.5"),B(o,"max","5"),B(o,"step","0.1"),B(o,"class","range range-xs"),B(e,"class","w-full px-2")},m(h,c){ue(h,e,c),T(e,r),T(r,n),T(n,i),T(e,a),T(e,o),nn(o,t[0]),s||(l=[_e(o,"change",t[7]),_e(o,"input",t[7])],s=!0)},p(h,c){c&1&&nn(o,h[0])},d(h){h&&M(e),s=!1,Rt(l)}}}function SF(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b,v,m,D,S,y,A,F;r=new FF({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let P=t[1]&&Pd(t);return S=new La({}),{c(){e=W("div"),Le(r.$$.fragment),i=we(),a=W("div"),o=W("div"),s=W("label"),l=W("span"),h=Fe("Exponential Scaling"),c=we(),f=W("input"),p=we(),P&&P.c(),g=we(),b=W("div"),v=W("button"),m=Fe("Reverse"),D=we(),Le(S.$$.fragment),this.h()},l(O){e=H(O,"DIV",{class:!0});var C=U(e);Re(r.$$.fragment,C),C.forEach(M),i=ye(O),a=H(O,"DIV",{class:!0});var x=U(a);o=H(x,"DIV",{class:!0});var z=U(o);s=H(z,"LABEL",{class:!0});var G=U(s);l=H(G,"SPAN",{class:!0});var Z=U(l);h=Se(Z,"Exponential Scaling"),Z.forEach(M),G.forEach(M),c=ye(z),f=H(z,"INPUT",{type:!0,class:!0}),z.forEach(M),p=ye(x),P&&P.l(x),g=ye(x),b=H(x,"DIV",{class:!0});var R=U(b);v=H(R,"BUTTON",{class:!0});var N=U(v);m=Se(N,"Reverse"),N.forEach(M),R.forEach(M),x.forEach(M),D=ye(O),Re(S.$$.fragment,O),this.h()},h(){B(e,"class","w-full h-full"),gi(()=>t[5].call(e)),B(l,"class","label-text"),B(s,"class","label"),B(f,"type","checkbox"),B(f,"class","toggle toggle-xs"),B(o,"class","w-52 px-2"),B(v,"class","btn btn-xs btn-primary"),B(b,"class","w-32 px-2 pb-1 flex flex-col justify-end"),B(a,"class","px-2 py-4 pb-0 flex")},m(O,C){ue(O,e,C),Ue(r,e,null),n=ea(e,t[5].bind(e)),ue(O,i,C),ue(O,a,C),T(a,o),T(o,s),T(s,l),T(l,h),T(o,c),T(o,f),f.checked=t[1],T(a,p),P&&P.m(a,null),T(a,g),T(a,b),T(b,v),T(v,m),ue(O,D,C),Ue(S,O,C),y=!0,A||(F=[_e(f,"change",t[6]),_e(v,"click",t[4])],A=!0)},p(O,[C]){const x={};C&12&&(x.center=[Math.round(O[2]/2),Math.round(O[3]/2)]),C&12&&(x.radius=Math.round(Math.min(O[2],O[3])/2)-150),r.$set(x),C&2&&(f.checked=O[1]),O[1]?P?P.p(O,C):(P=Pd(O),P.c(),P.m(a,g)):P&&(P.d(1),P=null)},i(O){y||(oe(r.$$.fragment,O),oe(S.$$.fragment,O),y=!0)},o(O){he(r.$$.fragment,O),he(S.$$.fragment,O),y=!1},d(O){O&&M(e),Ve(r),n(),O&&M(i),O&&M(a),P&&P.d(),O&&M(D),Ve(S,O),A=!1,Rt(F)}}}function BF(t,e,r){let n;qe(t,Ke,p=>r(8,n=p));let i,a,o=n.ringWeightScaling||2,s=Wc(n.ringExponentialScaling)?!0:n.ringExponentialScaling;function l(){Ke.update({...Ke.get(),ringReverse:!n.ringReverse})}function h(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function c(){s=this.checked,r(1,s)}function f(){o=zp(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&Ke.update({...Ke.get(),ringExponentialScaling:s,ringWeightScaling:o})},[o,s,i,a,l,h,c,f]}class OF extends Je{constructor(e){super(),Qe(this,e,BF,SF,Xe,{})}}function kd(t,e,r){const n=t.slice();return n[20]=e[r][0],n[21]=e[r][1],n}function Td(t){let e,r,n=t[0][t[20]][2].text+"",i,a,o=Kn(t[1],t[20])+"",s,l,h;return{c(){e=W("div"),r=W("p"),i=Fe(n),a=Fe(":"),s=Fe(o),h=we(),this.h()},l(c){e=H(c,"DIV",{class:!0});var f=U(e);r=H(f,"P",{style:!0});var p=U(r);i=Se(p,n),a=Se(p,":"),s=Se(p,o),p.forEach(M),h=ye(f),f.forEach(M),this.h()},h(){B(r,"style",l=`color: rgba(255,255,255, ${Zr(t[21])});`),B(e,"class","hover:bg-slate-800 rounded-md p-2 text-xs")},m(c,f){ue(c,e,f),T(e,r),T(r,i),T(r,a),T(r,s),T(e,h)},p(c,f){f&5&&n!==(n=c[0][c[20]][2].text+"")&&zt(i,n),f&6&&o!==(o=Kn(c[1],c[20])+"")&&zt(s,o),f&4&&l!==(l=`color: rgba(255,255,255, ${Zr(c[21])});`)&&B(r,"style",l)},d(c){c&&M(e)}}}function MF(t){let e,r,n,i,a,o,s,l=(t[1].promptLimit||t[0].length)+"",h,c,f=t[0].length+"",p,g,b,v,m,D,S,y,A,F,P,O,C,x,z=t[2],G=[];for(let N=0;N<z.length;N+=1)G[N]=Td(kd(t,z,N));const Z=t[17].default,R=ka(Z,t,t[16],null);return{c(){e=W("div"),r=W("div");for(let N=0;N<G.length;N+=1)G[N].c();n=we(),i=W("div"),a=W("div"),o=W("label"),s=W("span"),h=Fe(l),c=Fe("/"),p=Fe(f),g=Fe(" Prompts"),b=we(),v=W("input"),S=we(),y=W("div"),A=W("button"),F=Fe("Shuffle"),P=we(),R&&R.c(),this.h()},l(N){e=H(N,"DIV",{class:!0});var q=U(e);r=H(q,"DIV",{class:!0});var j=U(r);for(let be=0;be<G.length;be+=1)G[be].l(j);j.forEach(M),n=ye(q),i=H(q,"DIV",{class:!0});var J=U(i);a=H(J,"DIV",{class:!0});var Q=U(a);o=H(Q,"LABEL",{class:!0});var te=U(o);s=H(te,"SPAN",{class:!0});var ce=U(s);h=Se(ce,l),c=Se(ce,"/"),p=Se(ce,f),g=Se(ce," Prompts"),ce.forEach(M),te.forEach(M),b=ye(Q),v=H(Q,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Q.forEach(M),S=ye(J),y=H(J,"DIV",{class:!0});var me=U(y);A=H(me,"BUTTON",{class:!0});var Ee=U(A);F=Se(Ee,"Shuffle"),Ee.forEach(M),me.forEach(M),J.forEach(M),P=ye(q),R&&R.l(q),q.forEach(M),this.h()},h(){B(r,"class","p-4 w-full h-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-y-auto"),B(s,"class","label-text"),B(o,"class","label"),v.value=m=t[1].promptLimit||t[0].length,B(v,"type","range"),B(v,"min","1"),B(v,"max",D=t[0].length),B(v,"step","1"),B(v,"class","range range-sm"),B(a,"class","w-full px-2"),B(A,"class","btn btn-xs btn-primary"),B(y,"class","w-32 px-2 pb-1 flex flex-col justify-end"),B(i,"class","px-2 py-4 pb-0 flex"),B(e,"class","w-full h-full flex flex-col")},m(N,q){ue(N,e,q),T(e,r);for(let j=0;j<G.length;j+=1)G[j]&&G[j].m(r,null);T(e,n),T(e,i),T(i,a),T(a,o),T(o,s),T(s,h),T(s,c),T(s,p),T(s,g),T(a,b),T(a,v),T(i,S),T(i,y),T(y,A),T(A,F),T(e,P),R&&R.m(e,null),O=!0,C||(x=[_e(v,"change",t[18]),_e(A,"click",t[4])],C=!0)},p(N,[q]){if(q&7){z=N[2];let j;for(j=0;j<z.length;j+=1){const J=kd(N,z,j);G[j]?G[j].p(J,q):(G[j]=Td(J),G[j].c(),G[j].m(r,null))}for(;j<G.length;j+=1)G[j].d(1);G.length=z.length}(!O||q&3)&&l!==(l=(N[1].promptLimit||N[0].length)+"")&&zt(h,l),(!O||q&1)&&f!==(f=N[0].length+"")&&zt(p,f),(!O||q&3&&m!==(m=N[1].promptLimit||N[0].length))&&(v.value=m),(!O||q&1&&D!==(D=N[0].length))&&B(v,"max",D),R&&R.p&&(!O||q&65536)&&Ta(R,Z,N,N[16],O?xa(Z,N[16],q,null):Ia(N[16]),null)},i(N){O||(oe(R,N),O=!0)},o(N){he(R,N),O=!1},d(N){N&&M(e),Au(G,N),R&&R.d(N),C=!1,Rt(x)}}}function PF(t,e,r){let n,i,a,o;qe(t,Ke,O=>r(1,o=O));let{$$slots:s={},$$scope:l}=e,{center:h=[0,0]}=e,{dimensions:c=[100,100]}=e,{maxWidth:f=1e3}=e,{pointRadius:p=10}=e,{textWidth:g=250}=e,{horizontalPad:b=20}=e,{verticalPad:v=2}=e,{textBarPad:m=10}=e,{fontSize:D=13}=e,{handleWidth:S=20}=e;const y=Ni.subscribe(()=>{F()});Wp(()=>{y()});function A(O){Ke.update({...o,promptLimit:O}),F()}function F(){const O=Object.entries(o.weightedPrompts).sort((C,x)=>Math.random()-.5).reduce((C,[x,z],G)=>(C[x]={...z,randomWeight:G<(o.promptLimit||n.length)?Math.random():0},C),{});Ke.update({...o,weightedPrompts:O})}const P=O=>A(parseInt(O.target.value));return t.$$set=O=>{"center"in O&&r(5,h=O.center),"dimensions"in O&&r(6,c=O.dimensions),"maxWidth"in O&&r(7,f=O.maxWidth),"pointRadius"in O&&r(8,p=O.pointRadius),"textWidth"in O&&r(9,g=O.textWidth),"horizontalPad"in O&&r(10,b=O.horizontalPad),"verticalPad"in O&&r(11,v=O.verticalPad),"textBarPad"in O&&r(12,m=O.textBarPad),"fontSize"in O&&r(13,D=O.fontSize),"handleWidth"in O&&r(14,S=O.handleWidth),"$$scope"in O&&r(16,l=O.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&r(0,n=Object.entries(o.weightedPrompts).map(([O,C],x)=>[parseInt(O),x,C])),t.$$.dirty&1&&r(15,i=n.map(([O,C,x])=>[O,x.randomWeight||0])),t.$$.dirty&32768&&r(2,a=i.sort((O,C)=>C[1]-O[1]))},[n,o,a,A,F,h,c,f,p,g,b,v,m,D,S,i,l,s,P]}class kF extends Je{constructor(e){super(),Qe(this,e,PF,MF,Xe,{center:5,dimensions:6,maxWidth:7,pointRadius:8,textWidth:9,horizontalPad:10,verticalPad:11,textBarPad:12,fontSize:13,handleWidth:14})}}function TF(t){let e,r;return e=new La({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function IF(t){let e,r,n,i;return r=new kF({props:{dimensions:t[2],center:t[3],$$slots:{default:[TF]},$$scope:{ctx:t}}}),{c(){e=W("div"),Le(r.$$.fragment),this.h()},l(a){e=H(a,"DIV",{class:!0});var o=U(e);Re(r.$$.fragment,o),o.forEach(M),this.h()},h(){B(e,"class","w-full h-full pt-10"),gi(()=>t[4].call(e))},m(a,o){ue(a,e,o),Ue(r,e,null),n=ea(e,t[4].bind(e)),i=!0},p(a,[o]){const s={};o&4&&(s.dimensions=a[2]),o&8&&(s.center=a[3]),o&32&&(s.$$scope={dirty:o,ctx:a}),r.$set(s)},i(a){i||(oe(r.$$.fragment,a),i=!0)},o(a){he(r.$$.fragment,a),i=!1},d(a){a&&M(e),Ve(r),n()}}}function xF(t,e,r){let n,i,a,o;function s(){a=this.clientWidth,o=this.clientHeight,r(0,a),r(1,o)}return t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[a||0,o||0]),t.$$.dirty&4&&r(3,i=ra(n))},[a,o,n,i,s]}class NF extends Je{constructor(e){super(),Qe(this,e,xF,IF,Xe,{})}}function LF(t){let e,r,n,i,a,o,s;r=new tf({props:{center:t[6],dimensions:t[2],onMarkerMove:t[7],dataPoints:t[4]}}),a=new rf({props:{useExponentialScaling:t[3].embedExponentialScaling,toggleExponentialScaling:t[9],exponentialScaling:t[3].embedWeightScaling,setExponentialScaling:t[10],connectionLimit:t[3].promptLimit||t[5],setConnectionLimit:t[8],maxConnectionLimit:t[5],maxClusterCount:0,onShuffle:t[11]}});const l=t[18].default,h=ka(l,t,t[17],null);return{c(){e=W("div"),Le(r.$$.fragment),i=we(),Le(a.$$.fragment),o=we(),h&&h.c(),this.h()},l(c){e=H(c,"DIV",{class:!0});var f=U(e);Re(r.$$.fragment,f),f.forEach(M),i=ye(c),Re(a.$$.fragment,c),o=ye(c),h&&h.l(c),this.h()},h(){B(e,"class","w-full h-full"),gi(()=>t[19].call(e))},m(c,f){ue(c,e,f),Ue(r,e,null),n=ea(e,t[19].bind(e)),ue(c,i,f),Ue(a,c,f),ue(c,o,f),h&&h.m(c,f),s=!0},p(c,[f]){const p={};f&64&&(p.center=c[6]),f&4&&(p.dimensions=c[2]),f&16&&(p.dataPoints=c[4]),r.$set(p);const g={};f&8&&(g.useExponentialScaling=c[3].embedExponentialScaling),f&8&&(g.exponentialScaling=c[3].embedWeightScaling),f&40&&(g.connectionLimit=c[3].promptLimit||c[5]),f&32&&(g.maxConnectionLimit=c[5]),a.$set(g),h&&h.p&&(!s||f&131072)&&Ta(h,l,c,c[17],s?xa(l,c[17],f,null):Ia(c[17]),null)},i(c){s||(oe(r.$$.fragment,c),oe(a.$$.fragment,c),oe(h,c),s=!0)},o(c){he(r.$$.fragment,c),he(a.$$.fragment,c),he(h,c),s=!1},d(c){c&&M(e),Ve(r),n(),c&&M(i),Ve(a,c),c&&M(o),h&&h.d(c)}}}function RF(t,e,r){let n,i,a,o,s,l,h,c,f,p;qe(t,Ke,N=>r(3,f=N)),qe(t,qs,N=>r(16,p=N));let{$$slots:g={},$$scope:b}=e,v=0,m=0,D={};function S(N){P(),F(o,l,h,s)}function y(N){F(o,l,h,N)}function A(N,q){F(o,N,q,s)}function F(N,q,j,J){if(!D)return;let Q={...f.weightedPrompts},te=0;const ce=Object.entries(D).reduce((be,[Oe,ke])=>{const Ne=Pa(N,ke.xy);return be[parseInt(Oe)]=Ne,be},{});Object.entries(ce).sort((be,Oe)=>be[1]-Oe[1]).forEach(([be,Oe],ke)=>{if(!Q[parseInt(be)])return;ke<J+1&&Oe>te&&(te=Oe*1.1)});const me=(be,Oe)=>{const ke=be?Math.round(Math.pow(1-Oe/te,j)*100)/100:0;return ke<0?0:ke},Ee=(be,Oe)=>{const ke=be?Math.round((1-Oe/te)*100)/100:0;return ke<0?0:ke};Object.entries(ce).sort((be,Oe)=>be[1]-Oe[1]).forEach(([be,Oe],ke)=>{if(!Q[parseInt(be)])return;const Ne=ke<J,ze=q?me(Ne,Oe):Ee(Ne,Oe);Q[parseInt(be)]={...Q[parseInt(be)],embedWeight:ze},r(4,D[parseInt(be)].opacity=Zr(ze),D),r(4,D[parseInt(be)].connected=Ne,D)}),Ke.update({...f,embedMarker:[...o],weightedPrompts:Q})}function P(){const N=Object.keys(f.weightedPrompts),q=Math.ceil(Math.sqrt(N.length));let j;return c===$e.EmbedGrid?j=N.sort(()=>.5-Math.random()).reduce((J,Q,te)=>(J[Q]={xy:[1/q*(te%q)+1/q,1/q*Math.floor(te/q)+1/q],text:f.weightedPrompts[parseInt(Q)].text,connected:!0,opacity:1},J),{}):j=N.sort(()=>.5-Math.random()).reduce((J,Q,te)=>(J[Q]={xy:[1/q*(te%q)+1/q*Math.random(),1/q*Math.floor(te/q)+1/q*Math.random()],text:f.weightedPrompts[parseInt(Q)].text,connected:!0,opacity:1},J),{}),r(4,D=j),D}function O(N){o=N,F(o,l,h,s)}function C(N){N>0&&N<=a&&Ke.update({...f,promptLimit:N})}function x(){Ke.update({...f,embedExponentialScaling:!f.embedExponentialScaling})}function z(N){Ke.update({...f,embedWeightScaling:N})}function G(N){[0,2,4,6,8].indexOf(N)!==-1&&Ke.update({...f,embedClusters:N})}async function Z(){P(),F(o,l,h,s)}Hp(()=>{P(),F(o,l,h,s)});function R(){v=this.clientWidth,m=this.clientHeight,r(0,v),r(1,m)}return t.$$set=N=>{"$$scope"in N&&r(17,b=N.$$scope)},t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[v||250,m||250]),t.$$.dirty&4&&r(6,i=ra(n)),t.$$.dirty&8&&r(5,a=Object.keys(f.weightedPrompts||{}).length),t.$$.dirty&8&&(o=f.embedMarker||[.5,.5]),t.$$.dirty&8&&r(12,s=f.promptLimit||Object.keys(f.weightedPrompts).length),t.$$.dirty&8&&r(14,l=f.embedExponentialScaling),t.$$.dirty&8&&r(13,h=f.embedWeightScaling),t.$$.dirty&8&&r(15,c=f.weightMode),t.$$.dirty&65544&&p&&Object.keys(p).length<f.embedClusters&&G(af(Object.keys(p).length)),t.$$.dirty&32768&&S(),t.$$.dirty&24576&&A(l,h),t.$$.dirty&4096&&y(s)},[v,m,n,f,D,a,i,O,C,x,z,Z,s,h,l,c,p,b,g,R]}class UF extends Je{constructor(e){super(),Qe(this,e,RF,LF,Xe,{})}}function VF(t){let e,r;return e=new UF({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function jF(t){let e,r,n,i,a;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("p"),a=Fe("Set OpenAI key in settings to use embedding map."),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=U(e);r=H(s,"DIV",{class:!0});var l=U(r);n=H(l,"DIV",{class:!0});var h=U(n);i=H(h,"P",{class:!0});var c=U(i);a=Se(c,"Set OpenAI key in settings to use embedding map."),c.forEach(M),h.forEach(M),l.forEach(M),s.forEach(M),this.h()},h(){B(i,"class","text-center text-lg"),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(o,s){ue(o,e,s),T(e,r),T(r,n),T(n,i),T(i,a)},i:Pe,o:Pe,d(o){o&&M(e)}}}function zF(t){let e,r,n,i,a;const o=[jF,VF],s=[];function l(h,c){return h[0]?1:0}return e=l(t),r=s[e]=o[e](t),i=new La({}),{c(){r.c(),n=we(),Le(i.$$.fragment)},l(h){r.l(h),n=ye(h),Re(i.$$.fragment,h)},m(h,c){s[e].m(h,c),ue(h,n,c),Ue(i,h,c),a=!0},p(h,[c]){let f=e;e=l(h),e!==f&&(Gt(),he(s[f],1,1,()=>{s[f]=null}),Kt(),r=s[e],r||(r=s[e]=o[e](h),r.c()),oe(r,1),r.m(n.parentNode,n))},i(h){a||(oe(r),oe(i.$$.fragment,h),a=!0)},o(h){he(r),he(i.$$.fragment,h),a=!1},d(h){s[e].d(h),h&&M(n),Ve(i,h)}}}function qF(t,e,r){let n;return qe(t,Yn,i=>r(0,n=i)),[n]}class WF extends Je{constructor(e){super(),Qe(this,e,qF,zF,Xe,{})}}function HF(t){let e,r;return e=new mF({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function $F(t){let e,r;return e=new WF({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function GF(t){let e,r;return e=new OF({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function KF(t){let e,r;return e=new y6({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function YF(t){let e,r;return e=new k6({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function ZF(t){let e,r;return e=new NF({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function JF(t){let e,r,n,i;const a=[ZF,YF,KF,GF,$F,HF],o=[];function s(l,h){return l[0].weightMode===$e.Random?0:l[0].weightMode===$e.Pie?1:l[0].weightMode===$e.Circle?2:l[0].weightMode===$e.Ring?3:l[0].weightMode===$e.EmbedGrid||l[0].weightMode===$e.EmbedRandom?4:l[0].weightMode===$e.Embed?5:-1}return~(r=s(t))&&(n=o[r]=a[r](t)),{c(){e=W("div"),n&&n.c(),this.h()},l(l){e=H(l,"DIV",{class:!0});var h=U(e);n&&n.l(h),h.forEach(M),this.h()},h(){B(e,"class","w-full h-full flex flex-col")},m(l,h){ue(l,e,h),~r&&o[r].m(e,null),i=!0},p(l,[h]){let c=r;r=s(l),r!==c&&(n&&(Gt(),he(o[c],1,1,()=>{o[c]=null}),Kt()),~r?(n=o[r],n||(n=o[r]=a[r](l),n.c()),oe(n,1),n.m(e,null)):n=null)},i(l){i||(oe(n),i=!0)},o(l){he(n),i=!1},d(l){l&&M(e),~r&&o[r].d()}}}function QF(t,e,r){let n;return qe(t,Ke,i=>r(0,n=i)),[n]}class XF extends Je{constructor(e){super(),Qe(this,e,QF,JF,Xe,{})}}function e5(t){let e,r,n,i,a="<<",o,s,l="<",h,c,f,p,g,b=">",v,m,D=">>",S,y,A,F,P,O,C,x,z,G,Z,R,N,q,j,J,Q;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("button"),o=Fe(a),s=W("button"),h=Fe(l),c=we(),f=W("button"),p=Fe(t[1]),g=W("button"),v=Fe(b),m=W("button"),S=Fe(D),y=we(),A=W("div"),F=W("label"),P=Fe("Page Size"),O=we(),C=W("select"),x=W("option"),z=Fe("10"),G=W("option"),Z=Fe("25"),R=W("option"),N=Fe("50"),q=W("option"),j=Fe("100"),this.h()},l(te){e=H(te,"DIV",{class:!0});var ce=U(e);r=H(ce,"DIV",{class:!0});var me=U(r);n=H(me,"DIV",{class:!0});var Ee=U(n);i=H(Ee,"BUTTON",{class:!0});var be=U(i);o=Se(be,a),be.forEach(M),s=H(Ee,"BUTTON",{class:!0});var Oe=U(s);h=Se(Oe,l),Oe.forEach(M),c=ye(Ee),f=H(Ee,"BUTTON",{class:!0});var ke=U(f);p=Se(ke,t[1]),ke.forEach(M),g=H(Ee,"BUTTON",{class:!0});var Ne=U(g);v=Se(Ne,b),Ne.forEach(M),m=H(Ee,"BUTTON",{class:!0});var ze=U(m);S=Se(ze,D),ze.forEach(M),Ee.forEach(M),me.forEach(M),y=ye(ce),A=H(ce,"DIV",{class:!0});var tt=U(A);F=H(tt,"LABEL",{for:!0,class:!0});var at=U(F);P=Se(at,"Page Size"),at.forEach(M),O=ye(tt),C=H(tt,"SELECT",{class:!0});var rt=U(C);x=H(rt,"OPTION",{});var St=U(x);z=Se(St,"10"),St.forEach(M),G=H(rt,"OPTION",{});var Bt=U(G);Z=Se(Bt,"25"),Bt.forEach(M),R=H(rt,"OPTION",{});var vt=U(R);N=Se(vt,"50"),vt.forEach(M),q=H(rt,"OPTION",{});var ct=U(q);j=Se(ct,"100"),ct.forEach(M),rt.forEach(M),tt.forEach(M),ce.forEach(M),this.h()},h(){B(i,"class","btn"),Ye(i,"btn-disabled",t[1]===1),B(s,"class","btn"),Ye(s,"btn-disabled",t[1]===1),B(f,"class","btn"),Ye(f,"btn-disabled",t[0]===0),B(g,"class","btn"),Ye(g,"btn-disabled",t[0]===0||t[1]===t[0]),B(m,"class","btn"),Ye(m,"btn-disabled",t[0]===0||t[1]===t[0]),B(n,"class","btn-group"),B(r,"class","flex justify-start"),B(F,"for","page-size"),B(F,"class","p-2 text-md min-w-xs"),x.__value=10,x.value=x.__value,G.__value=25,G.value=G.__value,R.__value=50,R.value=R.__value,q.__value=100,q.value=q.__value,B(C,"class","select max-w-xs"),B(A,"class","flex"),B(e,"class","w-full flex justify-between p-4")},m(te,ce){ue(te,e,ce),T(e,r),T(r,n),T(n,i),T(i,o),T(n,s),T(s,h),T(n,c),T(n,f),T(f,p),T(n,g),T(g,v),T(n,m),T(m,S),T(e,y),T(e,A),T(A,F),T(F,P),T(A,O),T(A,C),T(C,x),T(x,z),T(C,G),T(G,Z),T(C,R),T(R,N),T(C,q),T(q,j),J||(Q=[_e(i,"click",t[5]),_e(s,"click",t[6]),_e(f,"click",t[7]),_e(g,"click",t[8]),_e(m,"click",t[9]),_e(C,"change",t[10])],J=!0)},p(te,[ce]){ce&2&&Ye(i,"btn-disabled",te[1]===1),ce&2&&Ye(s,"btn-disabled",te[1]===1),ce&2&&zt(p,te[1]),ce&1&&Ye(f,"btn-disabled",te[0]===0),ce&3&&Ye(g,"btn-disabled",te[0]===0||te[1]===te[0]),ce&3&&Ye(m,"btn-disabled",te[0]===0||te[1]===te[0])},i:Pe,o:Pe,d(te){te&&M(e),J=!1,Rt(Q)}}}function t5(t,e,r){let{total:n}=e,{current:i}=e,{size:a}=e,{onChange:o}=e,{onResize:s}=e;const l=()=>o(1),h=()=>o(i-1),c=()=>o(i),f=()=>o(i+1),p=()=>o(n),g=b=>s(b.target.value);return t.$$set=b=>{"total"in b&&r(0,n=b.total),"current"in b&&r(1,i=b.current),"size"in b&&r(4,a=b.size),"onChange"in b&&r(2,o=b.onChange),"onResize"in b&&r(3,s=b.onResize)},[n,i,o,s,a,l,h,c,f,p,g]}class G1 extends Je{constructor(e){super(),Qe(this,e,t5,e5,Xe,{total:0,current:1,size:4,onChange:2,onResize:3})}}function Id(t,e,r){const n=t.slice();return n[7]=e[r],n[9]=r,n}function xd(t,e){let r,n,i=e[7].date.toDateString()+"",a,o,s,l,h=e[7].prompt+"",c,f,p,g;function b(){return e[6](e[7])}return{key:t,first:null,c(){r=W("tr"),n=W("td"),a=Fe(i),o=we(),s=W("td"),l=W("span"),c=Fe(h),f=we(),this.h()},l(v){r=H(v,"TR",{});var m=U(r);n=H(m,"TD",{style:!0,class:!0});var D=U(n);a=Se(D,i),D.forEach(M),o=ye(m),s=H(m,"TD",{style:!0,class:!0});var S=U(s);l=H(S,"SPAN",{});var y=U(l);c=Se(y,h),y.forEach(M),S.forEach(M),f=ye(m),m.forEach(M),this.h()},h(){Ot(n,"max-width","10rem"),Ot(n,"width","20rem"),B(n,"class","whitespace-nowrap"),Ot(s,"max-width","20px"),B(s,"class","cursor-copy text-ellipsis whitespace-nowrap overflow-hidden select-none hover:text-white"),this.first=r},m(v,m){ue(v,r,m),T(r,n),T(n,a),T(r,o),T(r,s),T(s,l),T(l,c),T(r,f),p||(g=_e(s,"click",b),p=!0)},p(v,m){e=v,m&8&&i!==(i=e[7].date.toDateString()+"")&&zt(a,i),m&8&&h!==(h=e[7].prompt+"")&&zt(c,h)},d(v){v&&M(r),p=!1,g()}}}function r5(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b=[],v=new Map,m;e=new G1({props:{total:Math.ceil(t[2].length/t[1]),current:t[0],size:t[1],onChange:t[4],onResize:t[5]}});let D=t[3];const S=y=>y[9];for(let y=0;y<D.length;y+=1){let A=Id(t,D,y),F=S(A);v.set(F,b[y]=xd(F,A))}return{c(){Le(e.$$.fragment),r=we(),n=W("div"),i=W("table"),a=W("thead"),o=W("tr"),s=W("th"),l=Fe("Date"),h=we(),c=W("th"),f=Fe("Prompt"),p=we(),g=W("tbody");for(let y=0;y<b.length;y+=1)b[y].c();this.h()},l(y){Re(e.$$.fragment,y),r=ye(y),n=H(y,"DIV",{class:!0});var A=U(n);i=H(A,"TABLE",{class:!0});var F=U(i);a=H(F,"THEAD",{});var P=U(a);o=H(P,"TR",{});var O=U(o);s=H(O,"TH",{});var C=U(s);l=Se(C,"Date"),C.forEach(M),h=ye(O),c=H(O,"TH",{});var x=U(c);f=Se(x,"Prompt"),x.forEach(M),O.forEach(M),P.forEach(M),p=ye(F),g=H(F,"TBODY",{});var z=U(g);for(let G=0;G<b.length;G+=1)b[G].l(z);z.forEach(M),F.forEach(M),A.forEach(M),this.h()},h(){B(i,"class","table w-full"),B(n,"class","w-full px-4 overflow-y-auto")},m(y,A){Ue(e,y,A),ue(y,r,A),ue(y,n,A),T(n,i),T(i,a),T(a,o),T(o,s),T(s,l),T(o,h),T(o,c),T(c,f),T(i,p),T(i,g);for(let F=0;F<b.length;F+=1)b[F]&&b[F].m(g,null);m=!0},p(y,[A]){const F={};A&6&&(F.total=Math.ceil(y[2].length/y[1])),A&1&&(F.current=y[0]),A&2&&(F.size=y[1]),e.$set(F),A&8&&(D=y[3],b=Un(b,A,S,1,y,D,v,g,Jn,xd,null,Id))},i(y){m||(oe(e.$$.fragment,y),m=!0)},o(y){he(e.$$.fragment,y),m=!1},d(y){Ve(e,y),y&&M(r),y&&M(n);for(let A=0;A<b.length;A+=1)b[A].d()}}}function n5(t){navigator.clipboard.writeText(t)}function i5(t,e,r){let n;qe(t,ef,c=>r(2,n=c));let i=1,a=10,o=[];function s(c){r(0,i=c)}function l(c){r(0,i=1),r(1,a=c)}const h=c=>n5(c.prompt);return t.$$.update=()=>{t.$$.dirty&7&&r(3,o=n.slice((i-1)*a,i*a))},[i,a,n,o,s,l,h]}class a5 extends Je{constructor(e){super(),Qe(this,e,i5,r5,Xe,{})}}const u5=rr(Os.List);function s5(t){let e,r,n,i,a,o;return r=new tf({props:{center:t[9],dimensions:t[7],onMarkerMove:t[10],dataPoints:t[8]}}),a=new rf({props:{useExponentialScaling:t[3],toggleExponentialScaling:t[12],exponentialScaling:t[4],setExponentialScaling:t[13],connectionLimit:t[2],setConnectionLimit:t[11],maxConnectionLimit:t[6],clusterCount:t[5],setClusterCount:t[14],maxClusterCount:t[6],onShuffle:t[15]}}),{c(){e=W("div"),Le(r.$$.fragment),i=we(),Le(a.$$.fragment),this.h()},l(s){e=H(s,"DIV",{class:!0});var l=U(e);Re(r.$$.fragment,l),l.forEach(M),i=ye(s),Re(a.$$.fragment,s),this.h()},h(){B(e,"class","w-full h-full"),gi(()=>t[18].call(e))},m(s,l){ue(s,e,l),Ue(r,e,null),n=ea(e,t[18].bind(e)),ue(s,i,l),Ue(a,s,l),o=!0},p(s,[l]){const h={};l&512&&(h.center=s[9]),l&128&&(h.dimensions=s[7]),l&256&&(h.dataPoints=s[8]),r.$set(h);const c={};l&8&&(c.useExponentialScaling=s[3]),l&16&&(c.exponentialScaling=s[4]),l&4&&(c.connectionLimit=s[2]),l&64&&(c.maxConnectionLimit=s[6]),l&32&&(c.clusterCount=s[5]),l&64&&(c.maxClusterCount=s[6]),a.$set(c)},i(s){o||(oe(r.$$.fragment,s),oe(a.$$.fragment,s),o=!0)},o(s){he(r.$$.fragment,s),he(a.$$.fragment,s),o=!1},d(s){s&&M(e),Ve(r),n(),s&&M(i),Ve(a,s)}}}function o5(t,e,r){let n,i,a,o;qe(t,oF,q=>r(17,o=q));let s=0,l=0,h={},c=[.5,.5],f=10,p=!1,g=2,b=0,v,m={},D={};function S(q){o&&v?(O(),F(c,p,g,q)):console.log("no concepts or mappings")}function y(q,j){q&&j?(O(),F(c,p,g,f)):console.log("no concepts or mappings")}function A(q,j){F(c,q,j,f)}function F(q,j,J,Q){if(console.log("recomputing weights"),!h)return;let te=0;const ce={...m};Object.values(h).forEach(ke=>{Object.values(h).forEach(Ne=>{const ze=Pa(ke.xy,Ne.xy);ze>te&&(te=ze)})});const me=Object.entries(h).reduce((ke,[Ne,ze])=>{const tt=Pa(q,ze.xy);return ke[Ne]=tt,ke},{}),Ee=(ke,Ne)=>{const ze=ke?Math.round(Math.pow(1-Ne/te,J)*100)/100:0;return ze<0?0:ze},be=(ke,Ne)=>{const ze=ke?Math.round((1-Ne/te)*100)/100:0;return ze<0?0:ze},Oe={...h};Object.entries(me).sort((ke,Ne)=>ke[1]-Ne[1]).forEach(([ke,Ne],ze)=>{if(!o[ke])return;const tt=ze<Q,at=j?Ee(tt,Ne):be(tt,Ne);ce[ke]=at;const rt={...Oe[ke]};rt.opacity=Zr(at),rt.connected=tt,Oe[ke]=rt}),console.log("weights updated"),m=ce,r(8,h=Oe)}function P(){let q=Object.entries(o);const j=me=>new Array(me).fill(null).map(()=>[]);console.log("clustering embeddings");const J=q.length>=2?Pi(q.map(me=>me[1]),2):[q.map(me=>me[0])];console.log("set of 2 complete");const Q=q.length>=4?Pi(q.map(me=>me[1]),4):J;console.log("set of 4 complete");const te=q.length>=6?Pi(q.map(me=>me[1]),6):Q;console.log("set of 6 complete");const ce=q.length>=8?Pi(q.map(me=>me[1]),8):te;return console.log("set of 8 complete"),{2:[...J,...j(2-J.length)],4:[...Q,...j(4-Q.length)],6:[...te,...j(6-te.length)],8:[...ce,...j(8-ce.length)]}}function O(){if(console.log("updating data points"),!o||!v)return;const q=Object.keys(v),j=Q=>{if(!Q.length)return i;const te=Q.map(ce=>J[ce].xy);return Rs(te)},J=q.reduce((Q,te,ce)=>(Q[te]={xy:v[te],text:te,connected:!0,opacity:1},Q),{});if(D=P(),b&&D){const Q=b,te=D[Q];let ce=te.map(be=>j(be));const me=H1(Q),Ee=$1(ce,me);Ee&&Ee.forEach(be=>{const Oe=be.ids[0],ke=be.points[1];te[Oe].forEach(Ne=>{J[Ne].xy=Rs([J[Ne].xy,ke])})})}r(8,h=J)}function C(q){c=q,F(c,p,g,f)}function x(q){q>0&&q<=a&&r(2,f=Math.round(q))}function z(){r(3,p=!p)}function G(q){r(4,g=q)}function Z(q){[0,2,4,6,8].indexOf(q)!==-1&&r(5,b=q)}async function R(){r(16,v=uf(o))}Hp(()=>{R()});function N(){s=this.clientWidth,l=this.clientHeight,r(0,s),r(1,l)}return t.$$.update=()=>{t.$$.dirty&3&&r(7,n=[s||250,l||250]),t.$$.dirty&128&&r(9,i=ra(n)),t.$$.dirty&131072&&r(6,a=Object.keys(o).length),t.$$.dirty&131168&&o&&a<b&&Z(af(a)),t.$$.dirty&24&&A(p,g),t.$$.dirty&196608&&y(o,v),t.$$.dirty&4&&S(f)},[s,l,f,p,g,b,a,n,h,i,C,x,z,G,Z,R,v,o,N]}class l5 extends Je{constructor(e){super(),Qe(this,e,o5,s5,Xe,{})}}function c5(t){let e,r;return e=new l5({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},p:Pe,i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function f5(t){let e,r,n,i,a,o;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("progress"),this.h()},l(s){e=H(s,"DIV",{class:!0});var l=U(e);r=H(l,"DIV",{class:!0});var h=U(r);n=H(h,"DIV",{class:!0});var c=U(n);i=H(c,"PROGRESS",{class:!0,max:!0}),U(i).forEach(M),c.forEach(M),h.forEach(M),l.forEach(M),this.h()},h(){B(i,"class","progress progress-primary w-56"),i.value=a=Object.keys(t[2]).length-Object.keys(t[1]).length,B(i,"max",o=Object.keys(t[2]).length),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(s,l){ue(s,e,l),T(e,r),T(r,n),T(n,i)},p(s,l){l&6&&a!==(a=Object.keys(s[2]).length-Object.keys(s[1]).length)&&(i.value=a),l&4&&o!==(o=Object.keys(s[2]).length)&&B(i,"max",o)},i:Pe,o:Pe,d(s){s&&M(e)}}}function h5(t){let e,r,n,i,a;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("p"),a=Fe("Set OpenAI key in settings to use concept map."),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=U(e);r=H(s,"DIV",{class:!0});var l=U(r);n=H(l,"DIV",{class:!0});var h=U(n);i=H(h,"P",{class:!0});var c=U(i);a=Se(c,"Set OpenAI key in settings to use concept map."),c.forEach(M),h.forEach(M),l.forEach(M),s.forEach(M),this.h()},h(){B(i,"class","text-center text-lg"),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(o,s){ue(o,e,s),T(e,r),T(r,n),T(n,i),T(i,a)},p:Pe,i:Pe,o:Pe,d(o){o&&M(e)}}}function d5(t){let e,r,n,i,a;const o=[h5,f5,c5],s=[];function l(h,c){return c&2&&(e=null),h[0]?(e==null&&(e=Object.keys(h[1]).length>0),e?1:2):0}return r=l(t,-1),n=s[r]=o[r](t),{c(){n.c(),i=Ct()},l(h){n.l(h),i=Ct()},m(h,c){s[r].m(h,c),ue(h,i,c),a=!0},p(h,[c]){let f=r;r=l(h,c),r===f?s[r].p(h,c):(Gt(),he(s[f],1,1,()=>{s[f]=null}),Kt(),n=s[r],n?n.p(h,c):(n=s[r]=o[r](h),n.c()),oe(n,1),n.m(i.parentNode,i))},i(h){a||(oe(n),a=!0)},o(h){he(n),a=!1},d(h){s[r].d(h),h&&M(i)}}}function p5(t,e,r){let n,i,a;return qe(t,Yn,o=>r(0,n=o)),qe(t,hi,o=>r(1,i=o)),qe(t,Jr,o=>r(2,a=o)),[n,i,a]}class g5 extends Je{constructor(e){super(),Qe(this,e,p5,d5,Xe,{})}}function v5(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var K1=v5,m5=typeof dr=="object"&&dr&&dr.Object===Object&&dr,_5=m5,b5=_5,D5=typeof self=="object"&&self&&self.Object===Object&&self,w5=b5||D5||Function("return this")(),Y1=w5,y5=Y1,E5=function(){return y5.Date.now()},A5=E5,C5=/\s/;function F5(t){for(var e=t.length;e--&&C5.test(t.charAt(e)););return e}var S5=F5,B5=S5,O5=/^\s+/;function M5(t){return t&&t.slice(0,B5(t)+1).replace(O5,"")}var P5=M5,k5=Y1,T5=k5.Symbol,Z1=T5,Nd=Z1,J1=Object.prototype,I5=J1.hasOwnProperty,x5=J1.toString,vu=Nd?Nd.toStringTag:void 0;function N5(t){var e=I5.call(t,vu),r=t[vu];try{t[vu]=void 0;var n=!0}catch{}var i=x5.call(t);return n&&(e?t[vu]=r:delete t[vu]),i}var L5=N5,R5=Object.prototype,U5=R5.toString;function V5(t){return U5.call(t)}var j5=V5,Ld=Z1,z5=L5,q5=j5,W5="[object Null]",H5="[object Undefined]",Rd=Ld?Ld.toStringTag:void 0;function $5(t){return t==null?t===void 0?H5:W5:Rd&&Rd in Object(t)?z5(t):q5(t)}var G5=$5;function K5(t){return t!=null&&typeof t=="object"}var Y5=K5,Z5=G5,J5=Y5,Q5="[object Symbol]";function X5(t){return typeof t=="symbol"||J5(t)&&Z5(t)==Q5}var eS=X5,tS=P5,Ud=K1,rS=eS,Vd=0/0,nS=/^[-+]0x[0-9a-f]+$/i,iS=/^0b[01]+$/i,aS=/^0o[0-7]+$/i,uS=parseInt;function sS(t){if(typeof t=="number")return t;if(rS(t))return Vd;if(Ud(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Ud(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=tS(t);var r=iS.test(t);return r||aS.test(t)?uS(t.slice(2),r?2:8):nS.test(t)?Vd:+t}var oS=sS,lS=K1,Gl=A5,jd=oS,cS="Expected a function",fS=Math.max,hS=Math.min;function dS(t,e,r){var n,i,a,o,s,l,h=0,c=!1,f=!1,p=!0;if(typeof t!="function")throw new TypeError(cS);e=jd(e)||0,lS(r)&&(c=!!r.leading,f="maxWait"in r,a=f?fS(jd(r.maxWait)||0,e):a,p="trailing"in r?!!r.trailing:p);function g(P){var O=n,C=i;return n=i=void 0,h=P,o=t.apply(C,O),o}function b(P){return h=P,s=setTimeout(D,e),c?g(P):o}function v(P){var O=P-l,C=P-h,x=e-O;return f?hS(x,a-C):x}function m(P){var O=P-l,C=P-h;return l===void 0||O>=e||O<0||f&&C>=a}function D(){var P=Gl();if(m(P))return S(P);s=setTimeout(D,v(P))}function S(P){return s=void 0,p&&n?g(P):(n=i=void 0,o)}function y(){s!==void 0&&clearTimeout(s),h=0,n=l=i=s=void 0}function A(){return s===void 0?o:S(Gl())}function F(){var P=Gl(),O=m(P);if(n=arguments,i=this,l=P,O){if(s===void 0)return b(l);if(f)return clearTimeout(s),s=setTimeout(D,e),g(l)}return s===void 0&&(s=setTimeout(D,e)),o}return F.cancel=y,F.flush=A,F}var eo=dS;function zd(t,e,r){const n=t.slice();return n[13]=e[r],n[15]=r,n}function qd(t,e){let r,n,i=e[13]+"",a,o,s,l,h,c,f,p,g;function b(){return e[10](e[13])}function v(){return e[12](e[13])}return{key:t,first:null,c(){r=W("tr"),n=W("td"),a=Fe(i),o=we(),s=W("td"),l=W("button"),h=dt("svg"),c=dt("path"),f=we(),this.h()},l(m){r=H(m,"TR",{});var D=U(r);n=H(D,"TD",{style:!0,class:!0});var S=U(n);a=Se(S,i),S.forEach(M),o=ye(D),s=H(D,"TD",{style:!0,class:!0});var y=U(s);l=H(y,"BUTTON",{class:!0});var A=U(l);h=pt(A,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var F=U(h);c=pt(F,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),U(c).forEach(M),F.forEach(M),A.forEach(M),y.forEach(M),f=ye(D),D.forEach(M),this.h()},h(){Ot(n,"max-width","20px"),B(n,"class","text-ellipsis cursor-copy whitespace-nowrap overflow-hidden select-none hover:text-white"),B(c,"stroke-linecap","round"),B(c,"stroke-linejoin","round"),B(c,"stroke-width","2"),B(c,"d","M6 18L18 6M6 6l12 12"),B(h,"xmlns","http://www.w3.org/2000/svg"),B(h,"class","h-6 w-6"),B(h,"fill","none"),B(h,"viewBox","0 0 24 24"),B(h,"stroke","red"),B(l,"class","btn btn-sm btn-circle btn-outline"),Ot(s,"max-width","4rem"),Ot(s,"width","4rem"),B(s,"class",""),this.first=r},m(m,D){ue(m,r,D),T(r,n),T(n,a),T(r,o),T(r,s),T(s,l),T(l,h),T(h,c),T(r,f),p||(g=[_e(n,"click",b),_e(n,"change",e[11]),_e(s,"click",v)],p=!0)},p(m,D){e=m,D&4&&i!==(i=e[13]+"")&&zt(a,i)},d(m){m&&M(r),p=!1,Rt(g)}}}function pS(t){let e,r,n,i,a,o,s,l,h,c,f,p,g=[],b=new Map,v,m,D;e=new G1({props:{total:t[3],current:t[0],size:t[1],onChange:t[5],onResize:t[6]}});let S=t[2];const y=A=>A[15];for(let A=0;A<S.length;A+=1){let F=zd(t,S,A),P=y(F);b.set(P,g[A]=qd(P,F))}return{c(){Le(e.$$.fragment),r=we(),n=W("div"),i=W("table"),a=W("thead"),o=W("tr"),s=W("th"),l=Fe("Concept"),h=we(),c=W("th"),f=we(),p=W("tbody");for(let A=0;A<g.length;A+=1)g[A].c();this.h()},l(A){Re(e.$$.fragment,A),r=ye(A),n=H(A,"DIV",{class:!0});var F=U(n);i=H(F,"TABLE",{class:!0});var P=U(i);a=H(P,"THEAD",{});var O=U(a);o=H(O,"TR",{});var C=U(o);s=H(C,"TH",{});var x=U(s);l=Se(x,"Concept"),x.forEach(M),h=ye(C),c=H(C,"TH",{}),U(c).forEach(M),C.forEach(M),O.forEach(M),f=ye(P),p=H(P,"TBODY",{});var z=U(p);for(let G=0;G<g.length;G+=1)g[G].l(z);z.forEach(M),P.forEach(M),F.forEach(M),this.h()},h(){B(i,"class","table w-full"),B(n,"class","w-full px-4 overflow-y-auto")},m(A,F){Ue(e,A,F),ue(A,r,F),ue(A,n,F),T(n,i),T(i,a),T(a,o),T(o,s),T(s,l),T(o,h),T(o,c),T(i,f),T(i,p);for(let P=0;P<g.length;P+=1)g[P]&&g[P].m(p,null);v=!0,m||(D=_e(n,"paste",t[4]),m=!0)},p(A,[F]){const P={};F&8&&(P.total=A[3]),F&1&&(P.current=A[0]),F&2&&(P.size=A[1]),e.$set(P),F&132&&(S=A[2],g=Un(g,F,y,1,A,S,b,p,Jn,qd,null,zd))},i(A){v||(oe(e.$$.fragment,A),v=!0)},o(A){he(e.$$.fragment,A),v=!1},d(A){Ve(e,A),A&&M(r),A&&M(n);for(let F=0;F<g.length;F+=1)g[F].d();m=!1,D()}}}function gS(t){navigator.clipboard.writeText(t)}function vS(t,e,r){let n,i,a,o;qe(t,Jr,m=>r(9,o=m));let s=1,l=10;function h(){console.log("pasted"),navigator.clipboard.readText().then(m=>{const D=js(m).map(y=>y[0]),S=o;D.forEach(y=>{S[y]||hi.update(A=>(A[y]=!1,A))})})}function c(m){r(0,s=m)}function f(m){r(0,s=1),r(1,l=m)}const p=eo(m=>{hi.update(D=>(D[m]=!1,D))},500),g=m=>gS(m),b=m=>p(m.target.value),v=m=>Jr.remove(m);return t.$$.update=()=>{t.$$.dirty&512&&r(8,n=Object.keys(o)),t.$$.dirty&258&&r(3,i=Math.ceil(n.length/l)),t.$$.dirty&259&&r(2,a=Array.from(n).sort().slice((s-1)*l,s*l))},[s,l,a,i,h,c,f,p,n,o,g,b,v]}class mS extends Je{constructor(e){super(),Qe(this,e,vS,pS,Xe,{})}}function _S(t){let e,r;return e=new g5({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function bS(t){let e,r;return e=new mS({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function DS(t){let e,r,n,i;const a=[bS,_S],o=[];function s(l,h){return l[0]===Os.List?0:l[0]===Os.Map?1:-1}return~(e=s(t))&&(r=o[e]=a[e](t)),{c(){r&&r.c(),n=Ct()},l(l){r&&r.l(l),n=Ct()},m(l,h){~e&&o[e].m(l,h),ue(l,n,h),i=!0},p(l,[h]){let c=e;e=s(l),e!==c&&(r&&(Gt(),he(o[c],1,1,()=>{o[c]=null}),Kt()),~e?(r=o[e],r||(r=o[e]=a[e](l),r.c()),oe(r,1),r.m(n.parentNode,n)):r=null)},i(l){i||(oe(r),i=!0)},o(l){he(r),i=!1},d(l){~e&&o[e].d(l),l&&M(n)}}}function wS(t,e,r){let n;return qe(t,u5,i=>r(0,n=i)),[n]}class yS extends Je{constructor(e){super(),Qe(this,e,wS,DS,Xe,{})}}var xc={},Q1={},to={},ES={get exports(){return to},set exports(t){to=t}},ro={},AS={get exports(){return ro},set exports(t){ro=t}},X1=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}},CS=X1,Ri=Object.prototype.toString;function sf(t){return Array.isArray(t)}function Nc(t){return typeof t>"u"}function FS(t){return t!==null&&!Nc(t)&&t.constructor!==null&&!Nc(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function eg(t){return Ri.call(t)==="[object ArrayBuffer]"}function SS(t){return Ri.call(t)==="[object FormData]"}function BS(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&eg(t.buffer),e}function OS(t){return typeof t=="string"}function MS(t){return typeof t=="number"}function tg(t){return t!==null&&typeof t=="object"}function Fs(t){if(Ri.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function PS(t){return Ri.call(t)==="[object Date]"}function kS(t){return Ri.call(t)==="[object File]"}function TS(t){return Ri.call(t)==="[object Blob]"}function rg(t){return Ri.call(t)==="[object Function]"}function IS(t){return tg(t)&&rg(t.pipe)}function xS(t){return Ri.call(t)==="[object URLSearchParams]"}function NS(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function LS(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function of(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),sf(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Lc(){var t={};function e(i,a){Fs(t[a])&&Fs(i)?t[a]=Lc(t[a],i):Fs(i)?t[a]=Lc({},i):sf(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)of(arguments[r],e);return t}function RS(t,e,r){return of(e,function(i,a){r&&typeof i=="function"?t[a]=CS(i,r):t[a]=i}),t}function US(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var sn={isArray:sf,isArrayBuffer:eg,isBuffer:FS,isFormData:SS,isArrayBufferView:BS,isString:OS,isNumber:MS,isObject:tg,isPlainObject:Fs,isUndefined:Nc,isDate:PS,isFile:kS,isBlob:TS,isFunction:rg,isStream:IS,isURLSearchParams:xS,isStandardBrowserEnv:LS,forEach:of,merge:Lc,extend:RS,trim:NS,stripBOM:US},wa=sn;function Wd(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ng=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(wa.isURLSearchParams(r))i=r.toString();else{var a=[];wa.forEach(r,function(l,h){l===null||typeof l>"u"||(wa.isArray(l)?h=h+"[]":l=[l],wa.forEach(l,function(f){wa.isDate(f)?f=f.toISOString():wa.isObject(f)&&(f=JSON.stringify(f)),a.push(Wd(h)+"="+Wd(f))}))}),i=a.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},VS=sn;function Eo(){this.handlers=[]}Eo.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Eo.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Eo.prototype.forEach=function(e){VS.forEach(this.handlers,function(n){n!==null&&e(n)})};var jS=Eo,zS=sn,qS=function(e,r){zS.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})},ig=function(e,r,n,i,a){return e.config=r,n&&(e.code=n),e.request=i,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},ag={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kl,Hd;function ug(){if(Hd)return Kl;Hd=1;var t=ig;return Kl=function(r,n,i,a,o){var s=new Error(r);return t(s,n,i,a,o)},Kl}var Yl,$d;function WS(){if($d)return Yl;$d=1;var t=ug();return Yl=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},Yl}var Zl,Gd;function HS(){if(Gd)return Zl;Gd=1;var t=sn;return Zl=t.isStandardBrowserEnv()?function(){return{write:function(n,i,a,o,s,l){var h=[];h.push(n+"="+encodeURIComponent(i)),t.isNumber(a)&&h.push("expires="+new Date(a).toGMTString()),t.isString(o)&&h.push("path="+o),t.isString(s)&&h.push("domain="+s),l===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Zl}var Jl,Kd;function $S(){return Kd||(Kd=1,Jl=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),Jl}var Ql,Yd;function GS(){return Yd||(Yd=1,Ql=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Ql}var Xl,Zd;function KS(){if(Zd)return Xl;Zd=1;var t=$S(),e=GS();return Xl=function(n,i){return n&&!t(i)?e(n,i):i},Xl}var ec,Jd;function YS(){if(Jd)return ec;Jd=1;var t=sn,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return ec=function(n){var i={},a,o,s;return n&&t.forEach(n.split(`
`),function(h){if(s=h.indexOf(":"),a=t.trim(h.substr(0,s)).toLowerCase(),o=t.trim(h.substr(s+1)),a){if(i[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([o]):i[a]=i[a]?i[a]+", "+o:o}}),i},ec}var tc,Qd;function ZS(){if(Qd)return tc;Qd=1;var t=sn;return tc=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(o){var s=o;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(s){var l=t.isString(s)?a(s):s;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),tc}var rc,Xd;function Ao(){if(Xd)return rc;Xd=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,rc=t,rc}var nc,ep;function tp(){if(ep)return nc;ep=1;var t=sn,e=WS(),r=HS(),n=ng,i=KS(),a=YS(),o=ZS(),s=ug(),l=ag,h=Ao();return nc=function(f){return new Promise(function(g,b){var v=f.data,m=f.headers,D=f.responseType,S;function y(){f.cancelToken&&f.cancelToken.unsubscribe(S),f.signal&&f.signal.removeEventListener("abort",S)}t.isFormData(v)&&delete m["Content-Type"];var A=new XMLHttpRequest;if(f.auth){var F=f.auth.username||"",P=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";m.Authorization="Basic "+btoa(F+":"+P)}var O=i(f.baseURL,f.url);A.open(f.method.toUpperCase(),n(O,f.params,f.paramsSerializer),!0),A.timeout=f.timeout;function C(){if(A){var z="getAllResponseHeaders"in A?a(A.getAllResponseHeaders()):null,G=!D||D==="text"||D==="json"?A.responseText:A.response,Z={data:G,status:A.status,statusText:A.statusText,headers:z,config:f,request:A};e(function(N){g(N),y()},function(N){b(N),y()},Z),A=null}}if("onloadend"in A?A.onloadend=C:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(C)},A.onabort=function(){A&&(b(s("Request aborted",f,"ECONNABORTED",A)),A=null)},A.onerror=function(){b(s("Network Error",f,null,A)),A=null},A.ontimeout=function(){var G=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",Z=f.transitional||l;f.timeoutErrorMessage&&(G=f.timeoutErrorMessage),b(s(G,f,Z.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",A)),A=null},t.isStandardBrowserEnv()){var x=(f.withCredentials||o(O))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;x&&(m[f.xsrfHeaderName]=x)}"setRequestHeader"in A&&t.forEach(m,function(G,Z){typeof v>"u"&&Z.toLowerCase()==="content-type"?delete m[Z]:A.setRequestHeader(Z,G)}),t.isUndefined(f.withCredentials)||(A.withCredentials=!!f.withCredentials),D&&D!=="json"&&(A.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&A.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&A.upload&&A.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(S=function(z){A&&(b(!z||z&&z.type?new h("canceled"):z),A.abort(),A=null)},f.cancelToken&&f.cancelToken.subscribe(S),f.signal&&(f.signal.aborted?S():f.signal.addEventListener("abort",S))),v||(v=null),A.send(v)})},nc}var Tr=sn,rp=qS,JS=ig,QS=ag,XS={"Content-Type":"application/x-www-form-urlencoded"};function np(t,e){!Tr.isUndefined(t)&&Tr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function e8(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=tp()),t}function t8(t,e,r){if(Tr.isString(t))try{return(e||JSON.parse)(t),Tr.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Co={transitional:QS,adapter:e8(),transformRequest:[function(e,r){return rp(r,"Accept"),rp(r,"Content-Type"),Tr.isFormData(e)||Tr.isArrayBuffer(e)||Tr.isBuffer(e)||Tr.isStream(e)||Tr.isFile(e)||Tr.isBlob(e)?e:Tr.isArrayBufferView(e)?e.buffer:Tr.isURLSearchParams(e)?(np(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Tr.isObject(e)||r&&r["Content-Type"]==="application/json"?(np(r,"application/json"),t8(e)):e}],transformResponse:[function(e){var r=this.transitional||Co.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&Tr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?JS(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Tr.forEach(["delete","get","head"],function(e){Co.headers[e]={}});Tr.forEach(["post","put","patch"],function(e){Co.headers[e]=Tr.merge(XS)});var lf=Co,r8=sn,n8=lf,i8=function(e,r,n){var i=this||n8;return r8.forEach(n,function(o){e=o.call(i,e,r)}),e},ic,ip;function sg(){return ip||(ip=1,ic=function(e){return!!(e&&e.__CANCEL__)}),ic}var ap=sn,ac=i8,a8=sg(),u8=lf,s8=Ao();function uc(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new s8("canceled")}var o8=function(e){uc(e),e.headers=e.headers||{},e.data=ac.call(e,e.data,e.headers,e.transformRequest),e.headers=ap.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),ap.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||u8.adapter;return r(e).then(function(i){return uc(e),i.data=ac.call(e,i.data,i.headers,e.transformResponse),i},function(i){return a8(i)||(uc(e),i&&i.response&&(i.response.data=ac.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},pn=sn,og=function(e,r){r=r||{};var n={};function i(c,f){return pn.isPlainObject(c)&&pn.isPlainObject(f)?pn.merge(c,f):pn.isPlainObject(f)?pn.merge({},f):pn.isArray(f)?f.slice():f}function a(c){if(pn.isUndefined(r[c])){if(!pn.isUndefined(e[c]))return i(void 0,e[c])}else return i(e[c],r[c])}function o(c){if(!pn.isUndefined(r[c]))return i(void 0,r[c])}function s(c){if(pn.isUndefined(r[c])){if(!pn.isUndefined(e[c]))return i(void 0,e[c])}else return i(void 0,r[c])}function l(c){if(c in r)return i(e[c],r[c]);if(c in e)return i(void 0,e[c])}var h={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l};return pn.forEach(Object.keys(e).concat(Object.keys(r)),function(f){var p=h[f]||a,g=p(f);pn.isUndefined(g)&&p!==l||(n[f]=g)}),n},sc,up;function lg(){return up||(up=1,sc={version:"0.26.1"}),sc}var l8=lg().version,cf={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){cf[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var sp={};cf.transitional=function(e,r,n){function i(a,o){return"[Axios v"+l8+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,s){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!sp[o]&&(sp[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,s):!0}};function c8(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],o=e[a];if(o){var s=t[a],l=s===void 0||o(s,a,t);if(l!==!0)throw new TypeError("option "+a+" must be "+l);continue}if(r!==!0)throw Error("Unknown option "+a)}}var f8={assertOptions:c8,validators:cf},cg=sn,h8=ng,op=jS,lp=o8,Fo=og,fg=f8,ya=fg.validators;function Su(t){this.defaults=t,this.interceptors={request:new op,response:new op}}Su.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Fo(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&fg.assertOptions(n,{silentJSONParsing:ya.transitional(ya.boolean),forcedJSONParsing:ya.transitional(ya.boolean),clarifyTimeoutError:ya.transitional(ya.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(a=a&&g.synchronous,i.unshift(g.fulfilled,g.rejected))});var o=[];this.interceptors.response.forEach(function(g){o.push(g.fulfilled,g.rejected)});var s;if(!a){var l=[lp,void 0];for(Array.prototype.unshift.apply(l,i),l=l.concat(o),s=Promise.resolve(r);l.length;)s=s.then(l.shift(),l.shift());return s}for(var h=r;i.length;){var c=i.shift(),f=i.shift();try{h=c(h)}catch(p){f(p);break}}try{s=lp(h)}catch(p){return Promise.reject(p)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};Su.prototype.getUri=function(e){return e=Fo(this.defaults,e),h8(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};cg.forEach(["delete","get","head","options"],function(e){Su.prototype[e]=function(r,n){return this.request(Fo(n||{},{method:e,url:r,data:(n||{}).data}))}});cg.forEach(["post","put","patch"],function(e){Su.prototype[e]=function(r,n,i){return this.request(Fo(i||{},{method:e,url:r,data:n}))}});var d8=Su,oc,cp;function p8(){if(cp)return oc;cp=1;var t=Ao();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(a){if(i._listeners){var o,s=i._listeners.length;for(o=0;o<s;o++)i._listeners[o](a);i._listeners=null}}),this.promise.then=function(a){var o,s=new Promise(function(l){i.subscribe(l),o=l}).then(a);return s.cancel=function(){i.unsubscribe(o)},s},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},oc=e,oc}var lc,fp;function g8(){return fp||(fp=1,lc=function(e){return function(n){return e.apply(null,n)}}),lc}var cc,hp;function v8(){if(hp)return cc;hp=1;var t=sn;return cc=function(r){return t.isObject(r)&&r.isAxiosError===!0},cc}var dp=sn,m8=X1,Ss=d8,_8=og,b8=lf;function hg(t){var e=new Ss(t),r=m8(Ss.prototype.request,e);return dp.extend(r,Ss.prototype,e),dp.extend(r,e),r.create=function(i){return hg(_8(t,i))},r}var Qn=hg(b8);Qn.Axios=Ss;Qn.Cancel=Ao();Qn.CancelToken=p8();Qn.isCancel=sg();Qn.VERSION=lg().version;Qn.all=function(e){return Promise.all(e)};Qn.spread=g8();Qn.isAxiosError=v8();AS.exports=Qn;ro.default=Qn;(function(t){t.exports=ro})(ES);var ur={},ff={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RequiredError=t.BaseAPI=t.COLLECTION_FORMATS=t.BASE_PATH=void 0;const e=to;t.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class r{constructor(a,o=t.BASE_PATH,s=e.default){this.basePath=o,this.axios=s,a&&(this.configuration=a,this.basePath=a.basePath||this.basePath)}}t.BaseAPI=r;class n extends Error{constructor(a,o){super(o),this.field=a,this.name="RequiredError"}}t.RequiredError=n})(ff);var hf=dr&&dr.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{h(n.next(c))}catch(f){o(f)}}function l(c){try{h(n.throw(c))}catch(f){o(f)}}function h(c){c.done?a(c.value):i(c.value).then(s,l)}h((n=n.apply(t,e||[])).next())})};Object.defineProperty(ur,"__esModule",{value:!0});ur.createRequestFunction=ur.toPathString=ur.serializeDataIfNeeded=ur.setSearchParams=ur.setOAuthToObject=ur.setBearerAuthToObject=ur.setBasicAuthToObject=ur.setApiKeyToObject=ur.assertParamExists=ur.DUMMY_BASE_URL=void 0;const D8=ff;ur.DUMMY_BASE_URL="https://example.com";ur.assertParamExists=function(t,e,r){if(r==null)throw new D8.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};ur.setApiKeyToObject=function(t,e,r){return hf(this,void 0,void 0,function*(){if(r&&r.apiKey){const n=typeof r.apiKey=="function"?yield r.apiKey(e):yield r.apiKey;t[e]=n}})};ur.setBasicAuthToObject=function(t,e){e&&(e.username||e.password)&&(t.auth={username:e.username,password:e.password})};ur.setBearerAuthToObject=function(t,e){return hf(this,void 0,void 0,function*(){if(e&&e.accessToken){const r=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;t.Authorization="Bearer "+r}})};ur.setOAuthToObject=function(t,e,r,n){return hf(this,void 0,void 0,function*(){if(n&&n.accessToken){const i=typeof n.accessToken=="function"?yield n.accessToken(e,r):yield n.accessToken;t.Authorization="Bearer "+i}})};function Rc(t,e,r=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(n=>Rc(t,n,r)):Object.keys(e).forEach(n=>Rc(t,e[n],`${r}${r!==""?".":""}${n}`)):t.has(r)?t.append(r,e):t.set(r,e))}ur.setSearchParams=function(t,...e){const r=new URLSearchParams(t.search);Rc(r,e),t.search=r.toString()};ur.serializeDataIfNeeded=function(t,e,r){const n=typeof t!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(t!==void 0?t:{}):t||""};ur.toPathString=function(t){return t.pathname+t.search+t.hash};ur.createRequestFunction=function(t,e,r,n){return(i=e,a=r)=>{const o=Object.assign(Object.assign({},t.options),{url:((n==null?void 0:n.basePath)||a)+t.url});return i.request(o)}};(function(t){var e=dr&&dr.__awaiter||function(o,s,l,h){function c(f){return f instanceof l?f:new l(function(p){p(f)})}return new(l||(l=Promise))(function(f,p){function g(m){try{v(h.next(m))}catch(D){p(D)}}function b(m){try{v(h.throw(m))}catch(D){p(D)}}function v(m){m.done?f(m.value):c(m.value).then(g,b)}v((h=h.apply(o,s||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIApi=t.OpenAIApiFactory=t.OpenAIApiFp=t.OpenAIApiAxiosParamCreator=t.CreateImageRequestResponseFormatEnum=t.CreateImageRequestSizeEnum=t.ChatCompletionResponseMessageRoleEnum=t.ChatCompletionRequestMessageRoleEnum=void 0;const r=to,n=ur,i=ff;t.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},t.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},t.OpenAIApiAxiosParamCreator=function(o){return{cancelFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("cancelFineTune","fineTuneId",s);const h="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(s))),c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:p}}),createAnswer:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createAnswer","createAnswerRequest",s);const h="/answers",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createChatCompletion:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createChatCompletion","createChatCompletionRequest",s);const h="/chat/completions",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createClassification:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createClassification","createClassificationRequest",s);const h="/classifications",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createCompletion:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createCompletion","createCompletionRequest",s);const h="/completions",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createEdit:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEdit","createEditRequest",s);const h="/edits",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createEmbedding:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEmbedding","createEmbeddingRequest",s);const h="/embeddings",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createFile:(s,l,h={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFile","file",s),n.assertParamExists("createFile","purpose",l);const c="/files",f=new URL(c,n.DUMMY_BASE_URL);let p;o&&(p=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},p),h),b={},v={},m=new(o&&o.formDataCtor||FormData);s!==void 0&&m.append("file",s),l!==void 0&&m.append("purpose",l),b["Content-Type"]="multipart/form-data",n.setSearchParams(f,v);let D=p&&p.headers?p.headers:{};return g.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),m.getHeaders()),D),h.headers),g.data=m,{url:n.toPathString(f),options:g}}),createFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFineTune","createFineTuneRequest",s);const h="/fine-tunes",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createImage:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImage","createImageRequest",s);const h="/images/generations",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createImageEdit:(s,l,h,c,f,p,g,b={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageEdit","image",s),n.assertParamExists("createImageEdit","prompt",l);const v="/images/edits",m=new URL(v,n.DUMMY_BASE_URL);let D;o&&(D=o.baseOptions);const S=Object.assign(Object.assign({method:"POST"},D),b),y={},A={},F=new(o&&o.formDataCtor||FormData);s!==void 0&&F.append("image",s),h!==void 0&&F.append("mask",h),l!==void 0&&F.append("prompt",l),c!==void 0&&F.append("n",c),f!==void 0&&F.append("size",f),p!==void 0&&F.append("response_format",p),g!==void 0&&F.append("user",g),y["Content-Type"]="multipart/form-data",n.setSearchParams(m,A);let P=D&&D.headers?D.headers:{};return S.headers=Object.assign(Object.assign(Object.assign(Object.assign({},y),F.getHeaders()),P),b.headers),S.data=F,{url:n.toPathString(m),options:S}}),createImageVariation:(s,l,h,c,f,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageVariation","image",s);const g="/images/variations",b=new URL(g,n.DUMMY_BASE_URL);let v;o&&(v=o.baseOptions);const m=Object.assign(Object.assign({method:"POST"},v),p),D={},S={},y=new(o&&o.formDataCtor||FormData);s!==void 0&&y.append("image",s),l!==void 0&&y.append("n",l),h!==void 0&&y.append("size",h),c!==void 0&&y.append("response_format",c),f!==void 0&&y.append("user",f),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,S);let A=v&&v.headers?v.headers:{};return m.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),y.getHeaders()),A),p.headers),m.data=y,{url:n.toPathString(b),options:m}}),createModeration:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createModeration","createModerationRequest",s);const h="/moderations",c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),p.data=n.serializeDataIfNeeded(s,p,o),{url:n.toPathString(c),options:p}}),createSearch:(s,l,h={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createSearch","engineId",s),n.assertParamExists("createSearch","createSearchRequest",l);const c="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(s))),f=new URL(c,n.DUMMY_BASE_URL);let p;o&&(p=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},p),h),b={},v={};b["Content-Type"]="application/json",n.setSearchParams(f,v);let m=p&&p.headers?p.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),m),h.headers),g.data=n.serializeDataIfNeeded(l,g,o),{url:n.toPathString(f),options:g}}),createTranscription:(s,l,h,c,f,p,g={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranscription","file",s),n.assertParamExists("createTranscription","model",l);const b="/audio/transcriptions",v=new URL(b,n.DUMMY_BASE_URL);let m;o&&(m=o.baseOptions);const D=Object.assign(Object.assign({method:"POST"},m),g),S={},y={},A=new(o&&o.formDataCtor||FormData);s!==void 0&&A.append("file",s),l!==void 0&&A.append("model",l),h!==void 0&&A.append("prompt",h),c!==void 0&&A.append("response_format",c),f!==void 0&&A.append("temperature",f),p!==void 0&&A.append("language",p),S["Content-Type"]="multipart/form-data",n.setSearchParams(v,y);let F=m&&m.headers?m.headers:{};return D.headers=Object.assign(Object.assign(Object.assign(Object.assign({},S),A.getHeaders()),F),g.headers),D.data=A,{url:n.toPathString(v),options:D}}),createTranslation:(s,l,h,c,f,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranslation","file",s),n.assertParamExists("createTranslation","model",l);const g="/audio/translations",b=new URL(g,n.DUMMY_BASE_URL);let v;o&&(v=o.baseOptions);const m=Object.assign(Object.assign({method:"POST"},v),p),D={},S={},y=new(o&&o.formDataCtor||FormData);s!==void 0&&y.append("file",s),l!==void 0&&y.append("model",l),h!==void 0&&y.append("prompt",h),c!==void 0&&y.append("response_format",c),f!==void 0&&y.append("temperature",f),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,S);let A=v&&v.headers?v.headers:{};return m.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),y.getHeaders()),A),p.headers),m.data=y,{url:n.toPathString(b),options:m}}),deleteFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteFile","fileId",s);const h="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"DELETE"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:p}}),deleteModel:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteModel","model",s);const h="/models/{model}".replace("{model}",encodeURIComponent(String(s))),c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"DELETE"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:p}}),downloadFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("downloadFile","fileId",s);const h="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(s))),c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:p}}),listEngines:(s={})=>e(this,void 0,void 0,function*(){const l="/engines",h=new URL(l,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),s),p={},g={};n.setSearchParams(h,g);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},p),b),s.headers),{url:n.toPathString(h),options:f}}),listFiles:(s={})=>e(this,void 0,void 0,function*(){const l="/files",h=new URL(l,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),s),p={},g={};n.setSearchParams(h,g);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},p),b),s.headers),{url:n.toPathString(h),options:f}}),listFineTuneEvents:(s,l,h={})=>e(this,void 0,void 0,function*(){n.assertParamExists("listFineTuneEvents","fineTuneId",s);const c="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(s))),f=new URL(c,n.DUMMY_BASE_URL);let p;o&&(p=o.baseOptions);const g=Object.assign(Object.assign({method:"GET"},p),h),b={},v={};l!==void 0&&(v.stream=l),n.setSearchParams(f,v);let m=p&&p.headers?p.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),m),h.headers),{url:n.toPathString(f),options:g}}),listFineTunes:(s={})=>e(this,void 0,void 0,function*(){const l="/fine-tunes",h=new URL(l,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),s),p={},g={};n.setSearchParams(h,g);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},p),b),s.headers),{url:n.toPathString(h),options:f}}),listModels:(s={})=>e(this,void 0,void 0,function*(){const l="/models",h=new URL(l,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),s),p={},g={};n.setSearchParams(h,g);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},p),b),s.headers),{url:n.toPathString(h),options:f}}),retrieveEngine:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveEngine","engineId",s);const h="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(s))),c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:p}}),retrieveFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFile","fileId",s);const h="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:p}}),retrieveFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFineTune","fineTuneId",s);const h="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(s))),c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:p}}),retrieveModel:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveModel","model",s);const h="/models/{model}".replace("{model}",encodeURIComponent(String(s))),c=new URL(h,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const p=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return p.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:p}})}},t.OpenAIApiFp=function(o){const s=t.OpenAIApiAxiosParamCreator(o);return{cancelFineTune(l,h){return e(this,void 0,void 0,function*(){const c=yield s.cancelFineTune(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createAnswer(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createAnswer(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createChatCompletion(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createChatCompletion(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createClassification(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createClassification(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createCompletion(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createCompletion(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createEdit(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createEdit(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createEmbedding(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createEmbedding(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createFile(l,h,c){return e(this,void 0,void 0,function*(){const f=yield s.createFile(l,h,c);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createFineTune(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createFineTune(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createImage(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createImage(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createImageEdit(l,h,c,f,p,g,b,v){return e(this,void 0,void 0,function*(){const m=yield s.createImageEdit(l,h,c,f,p,g,b,v);return n.createRequestFunction(m,r.default,i.BASE_PATH,o)})},createImageVariation(l,h,c,f,p,g){return e(this,void 0,void 0,function*(){const b=yield s.createImageVariation(l,h,c,f,p,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},createModeration(l,h){return e(this,void 0,void 0,function*(){const c=yield s.createModeration(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createSearch(l,h,c){return e(this,void 0,void 0,function*(){const f=yield s.createSearch(l,h,c);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createTranscription(l,h,c,f,p,g,b){return e(this,void 0,void 0,function*(){const v=yield s.createTranscription(l,h,c,f,p,g,b);return n.createRequestFunction(v,r.default,i.BASE_PATH,o)})},createTranslation(l,h,c,f,p,g){return e(this,void 0,void 0,function*(){const b=yield s.createTranslation(l,h,c,f,p,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},deleteFile(l,h){return e(this,void 0,void 0,function*(){const c=yield s.deleteFile(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},deleteModel(l,h){return e(this,void 0,void 0,function*(){const c=yield s.deleteModel(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},downloadFile(l,h){return e(this,void 0,void 0,function*(){const c=yield s.downloadFile(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},listEngines(l){return e(this,void 0,void 0,function*(){const h=yield s.listEngines(l);return n.createRequestFunction(h,r.default,i.BASE_PATH,o)})},listFiles(l){return e(this,void 0,void 0,function*(){const h=yield s.listFiles(l);return n.createRequestFunction(h,r.default,i.BASE_PATH,o)})},listFineTuneEvents(l,h,c){return e(this,void 0,void 0,function*(){const f=yield s.listFineTuneEvents(l,h,c);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},listFineTunes(l){return e(this,void 0,void 0,function*(){const h=yield s.listFineTunes(l);return n.createRequestFunction(h,r.default,i.BASE_PATH,o)})},listModels(l){return e(this,void 0,void 0,function*(){const h=yield s.listModels(l);return n.createRequestFunction(h,r.default,i.BASE_PATH,o)})},retrieveEngine(l,h){return e(this,void 0,void 0,function*(){const c=yield s.retrieveEngine(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},retrieveFile(l,h){return e(this,void 0,void 0,function*(){const c=yield s.retrieveFile(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},retrieveFineTune(l,h){return e(this,void 0,void 0,function*(){const c=yield s.retrieveFineTune(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},retrieveModel(l,h){return e(this,void 0,void 0,function*(){const c=yield s.retrieveModel(l,h);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})}}},t.OpenAIApiFactory=function(o,s,l){const h=t.OpenAIApiFp(o);return{cancelFineTune(c,f){return h.cancelFineTune(c,f).then(p=>p(l,s))},createAnswer(c,f){return h.createAnswer(c,f).then(p=>p(l,s))},createChatCompletion(c,f){return h.createChatCompletion(c,f).then(p=>p(l,s))},createClassification(c,f){return h.createClassification(c,f).then(p=>p(l,s))},createCompletion(c,f){return h.createCompletion(c,f).then(p=>p(l,s))},createEdit(c,f){return h.createEdit(c,f).then(p=>p(l,s))},createEmbedding(c,f){return h.createEmbedding(c,f).then(p=>p(l,s))},createFile(c,f,p){return h.createFile(c,f,p).then(g=>g(l,s))},createFineTune(c,f){return h.createFineTune(c,f).then(p=>p(l,s))},createImage(c,f){return h.createImage(c,f).then(p=>p(l,s))},createImageEdit(c,f,p,g,b,v,m,D){return h.createImageEdit(c,f,p,g,b,v,m,D).then(S=>S(l,s))},createImageVariation(c,f,p,g,b,v){return h.createImageVariation(c,f,p,g,b,v).then(m=>m(l,s))},createModeration(c,f){return h.createModeration(c,f).then(p=>p(l,s))},createSearch(c,f,p){return h.createSearch(c,f,p).then(g=>g(l,s))},createTranscription(c,f,p,g,b,v,m){return h.createTranscription(c,f,p,g,b,v,m).then(D=>D(l,s))},createTranslation(c,f,p,g,b,v){return h.createTranslation(c,f,p,g,b,v).then(m=>m(l,s))},deleteFile(c,f){return h.deleteFile(c,f).then(p=>p(l,s))},deleteModel(c,f){return h.deleteModel(c,f).then(p=>p(l,s))},downloadFile(c,f){return h.downloadFile(c,f).then(p=>p(l,s))},listEngines(c){return h.listEngines(c).then(f=>f(l,s))},listFiles(c){return h.listFiles(c).then(f=>f(l,s))},listFineTuneEvents(c,f,p){return h.listFineTuneEvents(c,f,p).then(g=>g(l,s))},listFineTunes(c){return h.listFineTunes(c).then(f=>f(l,s))},listModels(c){return h.listModels(c).then(f=>f(l,s))},retrieveEngine(c,f){return h.retrieveEngine(c,f).then(p=>p(l,s))},retrieveFile(c,f){return h.retrieveFile(c,f).then(p=>p(l,s))},retrieveFineTune(c,f){return h.retrieveFineTune(c,f).then(p=>p(l,s))},retrieveModel(c,f){return h.retrieveModel(c,f).then(p=>p(l,s))}}};class a extends i.BaseAPI{cancelFineTune(s,l){return t.OpenAIApiFp(this.configuration).cancelFineTune(s,l).then(h=>h(this.axios,this.basePath))}createAnswer(s,l){return t.OpenAIApiFp(this.configuration).createAnswer(s,l).then(h=>h(this.axios,this.basePath))}createChatCompletion(s,l){return t.OpenAIApiFp(this.configuration).createChatCompletion(s,l).then(h=>h(this.axios,this.basePath))}createClassification(s,l){return t.OpenAIApiFp(this.configuration).createClassification(s,l).then(h=>h(this.axios,this.basePath))}createCompletion(s,l){return t.OpenAIApiFp(this.configuration).createCompletion(s,l).then(h=>h(this.axios,this.basePath))}createEdit(s,l){return t.OpenAIApiFp(this.configuration).createEdit(s,l).then(h=>h(this.axios,this.basePath))}createEmbedding(s,l){return t.OpenAIApiFp(this.configuration).createEmbedding(s,l).then(h=>h(this.axios,this.basePath))}createFile(s,l,h){return t.OpenAIApiFp(this.configuration).createFile(s,l,h).then(c=>c(this.axios,this.basePath))}createFineTune(s,l){return t.OpenAIApiFp(this.configuration).createFineTune(s,l).then(h=>h(this.axios,this.basePath))}createImage(s,l){return t.OpenAIApiFp(this.configuration).createImage(s,l).then(h=>h(this.axios,this.basePath))}createImageEdit(s,l,h,c,f,p,g,b){return t.OpenAIApiFp(this.configuration).createImageEdit(s,l,h,c,f,p,g,b).then(v=>v(this.axios,this.basePath))}createImageVariation(s,l,h,c,f,p){return t.OpenAIApiFp(this.configuration).createImageVariation(s,l,h,c,f,p).then(g=>g(this.axios,this.basePath))}createModeration(s,l){return t.OpenAIApiFp(this.configuration).createModeration(s,l).then(h=>h(this.axios,this.basePath))}createSearch(s,l,h){return t.OpenAIApiFp(this.configuration).createSearch(s,l,h).then(c=>c(this.axios,this.basePath))}createTranscription(s,l,h,c,f,p,g){return t.OpenAIApiFp(this.configuration).createTranscription(s,l,h,c,f,p,g).then(b=>b(this.axios,this.basePath))}createTranslation(s,l,h,c,f,p){return t.OpenAIApiFp(this.configuration).createTranslation(s,l,h,c,f,p).then(g=>g(this.axios,this.basePath))}deleteFile(s,l){return t.OpenAIApiFp(this.configuration).deleteFile(s,l).then(h=>h(this.axios,this.basePath))}deleteModel(s,l){return t.OpenAIApiFp(this.configuration).deleteModel(s,l).then(h=>h(this.axios,this.basePath))}downloadFile(s,l){return t.OpenAIApiFp(this.configuration).downloadFile(s,l).then(h=>h(this.axios,this.basePath))}listEngines(s){return t.OpenAIApiFp(this.configuration).listEngines(s).then(l=>l(this.axios,this.basePath))}listFiles(s){return t.OpenAIApiFp(this.configuration).listFiles(s).then(l=>l(this.axios,this.basePath))}listFineTuneEvents(s,l,h){return t.OpenAIApiFp(this.configuration).listFineTuneEvents(s,l,h).then(c=>c(this.axios,this.basePath))}listFineTunes(s){return t.OpenAIApiFp(this.configuration).listFineTunes(s).then(l=>l(this.axios,this.basePath))}listModels(s){return t.OpenAIApiFp(this.configuration).listModels(s).then(l=>l(this.axios,this.basePath))}retrieveEngine(s,l){return t.OpenAIApiFp(this.configuration).retrieveEngine(s,l).then(h=>h(this.axios,this.basePath))}retrieveFile(s,l){return t.OpenAIApiFp(this.configuration).retrieveFile(s,l).then(h=>h(this.axios,this.basePath))}retrieveFineTune(s,l){return t.OpenAIApiFp(this.configuration).retrieveFineTune(s,l).then(h=>h(this.axios,this.basePath))}retrieveModel(s,l){return t.OpenAIApiFp(this.configuration).retrieveModel(s,l).then(h=>h(this.axios,this.basePath))}}t.OpenAIApi=a})(Q1);var So={};const w8="openai",y8="3.2.1",E8="Node.js library for the OpenAI API",A8={type:"git",url:"git@github.com:openai/openai-node.git"},C8=["openai","open","ai","gpt-3","gpt3"],F8="OpenAI",S8="MIT",B8="./dist/index.js",O8="./dist/index.d.ts",M8={build:"tsc --outDir dist/"},P8={axios:"^0.26.0","form-data":"^4.0.0"},k8={"@types/node":"^12.11.5",typescript:"^3.6.4"},T8={name:w8,version:y8,description:E8,repository:A8,keywords:C8,author:F8,license:S8,main:B8,types:O8,scripts:M8,dependencies:P8,devDependencies:k8};var fc,pp;function I8(){return pp||(pp=1,fc=typeof self=="object"?self.FormData:window.FormData),fc}Object.defineProperty(So,"__esModule",{value:!0});So.Configuration=void 0;const x8=T8;class N8{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${x8.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=I8())}isJsonMime(e){const r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(r.test(e)||e.toLowerCase()==="application/json-patch+json")}}So.Configuration=N8;(function(t){var e=dr&&dr.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=dr&&dr.__exportStar||function(n,i){for(var a in n)a!=="default"&&!i.hasOwnProperty(a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Q1,t),r(So,t)})(xc);function no(t){const e=new xc.Configuration({apiKey:t});return new xc.OpenAIApi(e)}async function L8(t,e,r="text-davinci-003"){return await t.createCompletion({model:r,prompt:e,temperature:.8,max_tokens:250})}async function R8(t,e,r="gpt-3.5-turbo"){return await t.createChatCompletion({model:r,messages:[{role:"user",content:e}],temperature:.8,max_tokens:250})}async function U8(t,e,r="text-embedding-ada-002"){return await t.createEmbedding({model:r,input:e})}async function V8(t){return await t.listModels()}const hc="preferredEmbeddingModel";function j8(){const t=rr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[hc]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[hc]=a,r(a))},get:()=>At(t),delete:()=>{i&&(delete localStorage[hc],r(""))}}}const Uc=j8();async function z8(t){const e=no(Yn.get());return(await U8(e,t,Uc.get()||"text-embedding-ada-002")).data.data[0].embedding}const ys="cacheSize";function q8(){const t=rr(50),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[ys]?parseInt(localStorage[ys]):50),{subscribe:e,update:a=>{i&&(localStorage[ys]=JSON.stringify(a),r(a))},get:()=>At(t),delete:()=>{i&&(delete localStorage[ys],r(50))}}}const Vc=q8();function W8(t){let e,r,n,i;return{c(){e=W("div"),r=W("div"),n=W("p"),i=Fe("Some features require OpenAI Key"),this.h()},l(a){e=H(a,"DIV",{class:!0});var o=U(e);r=H(o,"DIV",{class:!0});var s=U(r);n=H(s,"P",{class:!0});var l=U(n);i=Se(l,"Some features require OpenAI Key"),l.forEach(M),s.forEach(M),o.forEach(M),this.h()},h(){B(n,"class","text-xs"),B(r,"class","flex flex-col justify-start mr-5"),B(e,"class","w-full flex justify-center p-4")},m(a,o){ue(a,e,o),T(e,r),T(r,n),T(n,i)},d(a){a&&M(e)}}}function H8(t){let e,r,n,i,a,o,s;return{c(){e=W("div"),r=W("div"),n=W("progress"),i=we(),a=W("div"),o=W("p"),s=Fe("Embedding..."),this.h()},l(l){e=H(l,"DIV",{class:!0});var h=U(e);r=H(h,"DIV",{class:!0});var c=U(r);n=H(c,"PROGRESS",{class:!0}),U(n).forEach(M),c.forEach(M),i=ye(h),a=H(h,"DIV",{class:!0});var f=U(a);o=H(f,"P",{class:!0});var p=U(o);s=Se(p,"Embedding..."),p.forEach(M),f.forEach(M),h.forEach(M),this.h()},h(){B(n,"class","progress progress-primary w-20"),B(r,"class","flex flex-col justify-start mr-5"),B(o,"class","text-xs"),B(a,"class","flex flex-col justify-start mr-5"),B(e,"class","w-full flex justify-center p-4")},m(l,h){ue(l,e,h),T(e,r),T(r,n),T(e,i),T(e,a),T(a,o),T(o,s)},d(l){l&&M(e)}}}function $8(t){let e;function r(a,o){if(a[0])return H8;if(!a[1])return W8}let n=r(t),i=n&&n(t);return{c(){i&&i.c(),e=Ct()},l(a){i&&i.l(a),e=Ct()},m(a,o){i&&i.m(a,o),ue(a,e,o)},p(a,[o]){n!==(n=r(a))&&(i&&i.d(1),i=n&&n(a),i&&(i.c(),i.m(e.parentNode,e)))},i:Pe,o:Pe,d(a){i&&i.d(a),a&&M(e)}}}function G8(t,e,r){let n,i,a;qe(t,hi,f=>r(2,n=f)),qe(t,Vc,f=>r(3,i=f)),qe(t,Yn,f=>r(1,a=f));let o=!1;function s(){return Object.keys(n).length}const l=Jr.subscribe(f=>{const p=Object.entries(f).filter(([g,b])=>!b);a&&p.length>0&&p.forEach(([g,b])=>{hi.update(v=>(v[g]=!1,v))})}),h=hi.subscribe(f=>{!!(Yn.get()&&s()>0&&!o)&&(r(0,o=!0),c())});function c(){console.log("start embedding");const f=Object.keys(n)[0];hi.update(p=>(p[f]=!0,p)),z8(f).then(p=>{Jr.update(f,p),Jr.cache(i);const g={...n};delete g[f],hi.set(g),s()>0?c():r(0,o=!1)})}return Wp(()=>{l(),h()}),[o,a]}class K8 extends Je{constructor(e){super(),Qe(this,e,G8,$8,Xe,{})}}function Y8(t,e,r){return qe(t,Jr,n=>r(0,n)),[]}class Z8 extends Je{constructor(e){super(),Qe(this,e,Y8,null,Xe,{})}}function J8(t){let e,r,n,i,a;return{c(){e=W("div"),r=W("button"),n=Fe("Delete History"),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=U(e);r=H(s,"BUTTON",{class:!0});var l=U(r);n=Se(l,"Delete History"),l.forEach(M),s.forEach(M),this.h()},h(){B(r,"class","btn btn-sm btn-error"),B(e,"class","flex justify-end p-2")},m(o,s){ue(o,e,s),T(e,r),T(r,n),i||(a=_e(r,"click",t[0]),i=!0)},p:Pe,i:Pe,o:Pe,d(o){o&&M(e),i=!1,a()}}}function Q8(t){function e(){ef.delete()}return[e]}class X8 extends Je{constructor(e){super(),Qe(this,e,Q8,J8,Xe,{})}}function e7(t){let e,r;return e=new X8({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},p:Pe,i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function t7(t){let e,r;return e=new Z8({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},p:Pe,i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function r7(t){let e,r,n,i,a;r=new Mw({});let o=(t[1].weightMode===$e.Circle||t[1].weightMode===$e.Pie||t[1].weightMode===$e.Ring)&&gp(),s=(t[1].weightMode===$e.Embed||t[1].weightMode===$e.EmbedGrid||t[1].weightMode===$e.EmbedRandom)&&vp();return{c(){e=W("div"),Le(r.$$.fragment),n=we(),o&&o.c(),i=we(),s&&s.c()},l(l){e=H(l,"DIV",{});var h=U(e);Re(r.$$.fragment,h),n=ye(h),o&&o.l(h),i=ye(h),s&&s.l(h),h.forEach(M)},m(l,h){ue(l,e,h),Ue(r,e,null),T(e,n),o&&o.m(e,null),T(e,i),s&&s.m(e,null),a=!0},p(l,h){l[1].weightMode===$e.Circle||l[1].weightMode===$e.Pie||l[1].weightMode===$e.Ring?o?h&2&&oe(o,1):(o=gp(),o.c(),oe(o,1),o.m(e,i)):o&&(Gt(),he(o,1,1,()=>{o=null}),Kt()),l[1].weightMode===$e.Embed||l[1].weightMode===$e.EmbedGrid||l[1].weightMode===$e.EmbedRandom?s?h&2&&oe(s,1):(s=vp(),s.c(),oe(s,1),s.m(e,null)):s&&(Gt(),he(s,1,1,()=>{s=null}),Kt())},i(l){a||(oe(r.$$.fragment,l),oe(o),oe(s),a=!0)},o(l){he(r.$$.fragment,l),he(o),he(s),a=!1},d(l){l&&M(e),Ve(r),o&&o.d(),s&&s.d()}}}function gp(t){let e,r;return e=new Uw({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function vp(t){let e,r;return e=new zw({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function n7(t){let e,r,n;return r=new a5({}),{c(){e=W("div"),Le(r.$$.fragment),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=U(e);Re(r.$$.fragment,a),a.forEach(M),this.h()},h(){B(e,"class","flex flex-col h-full mt-10 overflow-hidden")},m(i,a){ue(i,e,a),Ue(r,e,null),n=!0},i(i){n||(oe(r.$$.fragment,i),n=!0)},o(i){he(r.$$.fragment,i),n=!1},d(i){i&&M(e),Ve(r)}}}function i7(t){let e,r,n;return r=new yS({}),{c(){e=W("div"),Le(r.$$.fragment),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=U(e);Re(r.$$.fragment,a),a.forEach(M),this.h()},h(){B(e,"class","flex flex-col h-full mt-10 overflow-hidden")},m(i,a){ue(i,e,a),Ue(r,e,null),n=!0},i(i){n||(oe(r.$$.fragment,i),n=!0)},o(i){he(r.$$.fragment,i),n=!1},d(i){i&&M(e),Ve(r)}}}function a7(t){let e,r,n;return r=new XF({}),{c(){e=W("div"),Le(r.$$.fragment),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=U(e);Re(r.$$.fragment,a),a.forEach(M),this.h()},h(){B(e,"class","flex flex-col h-full place-content-between")},m(i,a){ue(i,e,a),Ue(r,e,null),n=!0},i(i){n||(oe(r.$$.fragment,i),n=!0)},o(i){he(r.$$.fragment,i),n=!1},d(i){i&&M(e),Ve(r)}}}function u7(t){let e,r,n,i,a,o,s,l,h,c,f,p,g;i=new mw({}),o=new K8({});const b=[r7,t7,e7],v=[];function m(A,F){return A[0]===br.Build?0:A[0]===br.Concept?1:A[0]===br.History?2:-1}~(l=m(t))&&(h=v[l]=b[l](t));const D=[a7,i7,n7],S=[];function y(A,F){return A[0]===br.Build?0:A[0]===br.Concept?1:A[0]===br.History?2:-1}return~(f=y(t))&&(p=S[f]=D[f](t)),{c(){e=W("div"),r=W("div"),n=W("div"),Le(i.$$.fragment),a=we(),Le(o.$$.fragment),s=we(),h&&h.c(),c=we(),p&&p.c(),this.h()},l(A){e=H(A,"DIV",{class:!0});var F=U(e);r=H(F,"DIV",{class:!0});var P=U(r);n=H(P,"DIV",{class:!0});var O=U(n);Re(i.$$.fragment,O),a=ye(O),Re(o.$$.fragment,O),s=ye(O),h&&h.l(O),O.forEach(M),P.forEach(M),c=ye(F),p&&p.l(F),F.forEach(M),this.h()},h(){B(n,"class","w-full flex justify-between"),B(r,"class","w-full absolute top-0 z-10"),B(e,"class","relative w-full h-screen flex flex-col")},m(A,F){ue(A,e,F),T(e,r),T(r,n),Ue(i,n,null),T(n,a),Ue(o,n,null),T(n,s),~l&&v[l].m(n,null),T(e,c),~f&&S[f].m(e,null),g=!0},p(A,[F]){let P=l;l=m(A),l===P?~l&&v[l].p(A,F):(h&&(Gt(),he(v[P],1,1,()=>{v[P]=null}),Kt()),~l?(h=v[l],h?h.p(A,F):(h=v[l]=b[l](A),h.c()),oe(h,1),h.m(n,null)):h=null);let O=f;f=y(A),f!==O&&(p&&(Gt(),he(S[O],1,1,()=>{S[O]=null}),Kt()),~f?(p=S[f],p||(p=S[f]=D[f](A),p.c()),oe(p,1),p.m(e,null)):p=null)},i(A){g||(oe(i.$$.fragment,A),oe(o.$$.fragment,A),oe(h),oe(p),g=!0)},o(A){he(i.$$.fragment,A),he(o.$$.fragment,A),he(h),he(p),g=!1},d(A){A&&M(e),Ve(i),Ve(o),~l&&v[l].d(),~f&&S[f].d()}}}function s7(t,e,r){let n,i;return qe(t,mc,a=>r(0,n=a)),qe(t,Ke,a=>r(1,i=a)),[n,i]}class o7 extends Je{constructor(e){super(),Qe(this,e,s7,u7,Xe,{})}}var io={},l7={get exports(){return io},set exports(t){io=t}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var r,n="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",s="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",h=500,c="__lodash_placeholder__",f=1,p=2,g=4,b=1,v=2,m=1,D=2,S=4,y=8,A=16,F=32,P=64,O=128,C=256,x=512,z=30,G="...",Z=800,R=16,N=1,q=2,j=3,J=1/0,Q=9007199254740991,te=17976931348623157e292,ce=0/0,me=4294967295,Ee=me-1,be=me>>>1,Oe=[["ary",O],["bind",m],["bindKey",D],["curry",y],["curryRight",A],["flip",x],["partial",F],["partialRight",P],["rearg",C]],ke="[object Arguments]",Ne="[object Array]",ze="[object AsyncFunction]",tt="[object Boolean]",at="[object Date]",rt="[object DOMException]",St="[object Error]",Bt="[object Function]",vt="[object GeneratorFunction]",ct="[object Map]",xt="[object Number]",qr="[object Null]",Ut="[object Object]",Wr="[object Promise]",et="[object Proxy]",pr="[object RegExp]",Fr="[object Set]",Bn="[object String]",K="[object Symbol]",X="[object Undefined]",ie="[object WeakMap]",ge="[object WeakSet]",se="[object ArrayBuffer]",De="[object DataView]",fe="[object Float32Array]",de="[object Float64Array]",Te="[object Int8Array]",We="[object Int16Array]",ot="[object Int32Array]",Ie="[object Uint8Array]",Yt="[object Uint8ClampedArray]",Vt="[object Uint16Array]",nr="[object Uint32Array]",Zt=/\b__p \+= '';/g,Dr=/\b(__p \+=) '' \+/g,Jt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wr=/&(?:amp|lt|gt|quot|#39);/g,fr=/[&<>"']/g,hr=RegExp(wr.source),gn=RegExp(fr.source),gr=/<%-([\s\S]+?)%>/g,On=/<%([\s\S]+?)%>/g,Xn=/<%=([\s\S]+?)%>/g,Vn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jn=/^\w*$/,na=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ui=/[\\^$.*+?()[\]{}|]/g,Ua=RegExp(Ui.source),Sr=/^\s+/,ir=/\s/,Va=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,vi=/\{\n\/\* \[wrapped with (.+)\] \*/,vn=/,? & /,ei=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Vi=/[()=,{}\[\]\/\s]/,ja=/\\(\\)?/g,za=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ia=/\w*$/,qa=/^[-+]0x[0-9a-f]+$/i,Wa=/^0b[01]+$/i,Ha=/^\[object .+?Constructor\]$/,$a=/^0o[0-7]+$/i,Ga=/^(?:0|[1-9]\d*)$/,Ka=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,mi=/($^)/,Ya=/['\n\r\u2028\u2029\\]/g,_i="\\ud800-\\udfff",Za="\\u0300-\\u036f",Ja="\\ufe20-\\ufe2f",Qa="\\u20d0-\\u20ff",aa=Za+Ja+Qa,zn="\\u2700-\\u27bf",yr="a-z\\xdf-\\xf6\\xf8-\\xff",sr="\\xac\\xb1\\xd7\\xf7",Hr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ji="\\u2000-\\u206f",ti=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qn="A-Z\\xc0-\\xd6\\xd8-\\xde",zi="\\ufe0e\\ufe0f",Mn=sr+Hr+ji+ti,mn="['’]",Bo="["+_i+"]",Xa="["+Mn+"]",ua="["+aa+"]",Bu="\\d+",w="["+zn+"]",k="["+yr+"]",$="[^"+_i+Mn+Bu+zn+yr+qn+"]",re="\\ud83c[\\udffb-\\udfff]",ve="(?:"+ua+"|"+re+")",xe="[^"+_i+"]",gt="(?:\\ud83c[\\udde6-\\uddff]){2}",yt="[\\ud800-\\udbff][\\udc00-\\udfff]",Wt="["+qn+"]",or="\\u200d",df="(?:"+k+"|"+$+")",pg="(?:"+Wt+"|"+$+")",pf="(?:"+mn+"(?:d|ll|m|re|s|t|ve))?",gf="(?:"+mn+"(?:D|LL|M|RE|S|T|VE))?",vf=ve+"?",mf="["+zi+"]?",gg="(?:"+or+"(?:"+[xe,gt,yt].join("|")+")"+mf+vf+")*",vg="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mg="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",_f=mf+vf+gg,_g="(?:"+[w,gt,yt].join("|")+")"+_f,bg="(?:"+[xe+ua+"?",ua,gt,yt,Bo].join("|")+")",Dg=RegExp(mn,"g"),wg=RegExp(ua,"g"),Oo=RegExp(re+"(?="+re+")|"+bg+_f,"g"),yg=RegExp([Wt+"?"+k+"+"+pf+"(?="+[Xa,Wt,"$"].join("|")+")",pg+"+"+gf+"(?="+[Xa,Wt+df,"$"].join("|")+")",Wt+"?"+df+"+"+pf,Wt+"+"+gf,mg,vg,Bu,_g].join("|"),"g"),Eg=RegExp("["+or+_i+aa+zi+"]"),Ag=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Cg=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Fg=-1,qt={};qt[fe]=qt[de]=qt[Te]=qt[We]=qt[ot]=qt[Ie]=qt[Yt]=qt[Vt]=qt[nr]=!0,qt[ke]=qt[Ne]=qt[se]=qt[tt]=qt[De]=qt[at]=qt[St]=qt[Bt]=qt[ct]=qt[xt]=qt[Ut]=qt[pr]=qt[Fr]=qt[Bn]=qt[ie]=!1;var jt={};jt[ke]=jt[Ne]=jt[se]=jt[De]=jt[tt]=jt[at]=jt[fe]=jt[de]=jt[Te]=jt[We]=jt[ot]=jt[ct]=jt[xt]=jt[Ut]=jt[pr]=jt[Fr]=jt[Bn]=jt[K]=jt[Ie]=jt[Yt]=jt[Vt]=jt[nr]=!0,jt[St]=jt[Bt]=jt[ie]=!1;var Sg={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Bg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Og={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Mg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Pg=parseFloat,kg=parseInt,bf=typeof dr=="object"&&dr&&dr.Object===Object&&dr,Tg=typeof self=="object"&&self&&self.Object===Object&&self,Br=bf||Tg||Function("return this")(),Mo=e&&!e.nodeType&&e,qi=Mo&&!0&&t&&!t.nodeType&&t,Df=qi&&qi.exports===Mo,Po=Df&&bf.process,_n=function(){try{var ne=qi&&qi.require&&qi.require("util").types;return ne||Po&&Po.binding&&Po.binding("util")}catch{}}(),wf=_n&&_n.isArrayBuffer,yf=_n&&_n.isDate,Ef=_n&&_n.isMap,Af=_n&&_n.isRegExp,Cf=_n&&_n.isSet,Ff=_n&&_n.isTypedArray;function on(ne,pe,le){switch(le.length){case 0:return ne.call(pe);case 1:return ne.call(pe,le[0]);case 2:return ne.call(pe,le[0],le[1]);case 3:return ne.call(pe,le[0],le[1],le[2])}return ne.apply(pe,le)}function Ig(ne,pe,le,He){for(var ft=-1,Mt=ne==null?0:ne.length;++ft<Mt;){var vr=ne[ft];pe(He,vr,le(vr),ne)}return He}function bn(ne,pe){for(var le=-1,He=ne==null?0:ne.length;++le<He&&pe(ne[le],le,ne)!==!1;);return ne}function xg(ne,pe){for(var le=ne==null?0:ne.length;le--&&pe(ne[le],le,ne)!==!1;);return ne}function Sf(ne,pe){for(var le=-1,He=ne==null?0:ne.length;++le<He;)if(!pe(ne[le],le,ne))return!1;return!0}function bi(ne,pe){for(var le=-1,He=ne==null?0:ne.length,ft=0,Mt=[];++le<He;){var vr=ne[le];pe(vr,le,ne)&&(Mt[ft++]=vr)}return Mt}function Ou(ne,pe){var le=ne==null?0:ne.length;return!!le&&sa(ne,pe,0)>-1}function ko(ne,pe,le){for(var He=-1,ft=ne==null?0:ne.length;++He<ft;)if(le(pe,ne[He]))return!0;return!1}function Ht(ne,pe){for(var le=-1,He=ne==null?0:ne.length,ft=Array(He);++le<He;)ft[le]=pe(ne[le],le,ne);return ft}function Di(ne,pe){for(var le=-1,He=pe.length,ft=ne.length;++le<He;)ne[ft+le]=pe[le];return ne}function To(ne,pe,le,He){var ft=-1,Mt=ne==null?0:ne.length;for(He&&Mt&&(le=ne[++ft]);++ft<Mt;)le=pe(le,ne[ft],ft,ne);return le}function Ng(ne,pe,le,He){var ft=ne==null?0:ne.length;for(He&&ft&&(le=ne[--ft]);ft--;)le=pe(le,ne[ft],ft,ne);return le}function Io(ne,pe){for(var le=-1,He=ne==null?0:ne.length;++le<He;)if(pe(ne[le],le,ne))return!0;return!1}var Lg=xo("length");function Rg(ne){return ne.split("")}function Ug(ne){return ne.match(ei)||[]}function Bf(ne,pe,le){var He;return le(ne,function(ft,Mt,vr){if(pe(ft,Mt,vr))return He=Mt,!1}),He}function Mu(ne,pe,le,He){for(var ft=ne.length,Mt=le+(He?1:-1);He?Mt--:++Mt<ft;)if(pe(ne[Mt],Mt,ne))return Mt;return-1}function sa(ne,pe,le){return pe===pe?Jg(ne,pe,le):Mu(ne,Of,le)}function Vg(ne,pe,le,He){for(var ft=le-1,Mt=ne.length;++ft<Mt;)if(He(ne[ft],pe))return ft;return-1}function Of(ne){return ne!==ne}function Mf(ne,pe){var le=ne==null?0:ne.length;return le?Lo(ne,pe)/le:ce}function xo(ne){return function(pe){return pe==null?r:pe[ne]}}function No(ne){return function(pe){return ne==null?r:ne[pe]}}function Pf(ne,pe,le,He,ft){return ft(ne,function(Mt,vr,Nt){le=He?(He=!1,Mt):pe(le,Mt,vr,Nt)}),le}function jg(ne,pe){var le=ne.length;for(ne.sort(pe);le--;)ne[le]=ne[le].value;return ne}function Lo(ne,pe){for(var le,He=-1,ft=ne.length;++He<ft;){var Mt=pe(ne[He]);Mt!==r&&(le=le===r?Mt:le+Mt)}return le}function Ro(ne,pe){for(var le=-1,He=Array(ne);++le<ne;)He[le]=pe(le);return He}function zg(ne,pe){return Ht(pe,function(le){return[le,ne[le]]})}function kf(ne){return ne&&ne.slice(0,Nf(ne)+1).replace(Sr,"")}function ln(ne){return function(pe){return ne(pe)}}function Uo(ne,pe){return Ht(pe,function(le){return ne[le]})}function eu(ne,pe){return ne.has(pe)}function Tf(ne,pe){for(var le=-1,He=ne.length;++le<He&&sa(pe,ne[le],0)>-1;);return le}function If(ne,pe){for(var le=ne.length;le--&&sa(pe,ne[le],0)>-1;);return le}function qg(ne,pe){for(var le=ne.length,He=0;le--;)ne[le]===pe&&++He;return He}var Wg=No(Sg),Hg=No(Bg);function $g(ne){return"\\"+Mg[ne]}function Gg(ne,pe){return ne==null?r:ne[pe]}function oa(ne){return Eg.test(ne)}function Kg(ne){return Ag.test(ne)}function Yg(ne){for(var pe,le=[];!(pe=ne.next()).done;)le.push(pe.value);return le}function Vo(ne){var pe=-1,le=Array(ne.size);return ne.forEach(function(He,ft){le[++pe]=[ft,He]}),le}function xf(ne,pe){return function(le){return ne(pe(le))}}function wi(ne,pe){for(var le=-1,He=ne.length,ft=0,Mt=[];++le<He;){var vr=ne[le];(vr===pe||vr===c)&&(ne[le]=c,Mt[ft++]=le)}return Mt}function Pu(ne){var pe=-1,le=Array(ne.size);return ne.forEach(function(He){le[++pe]=He}),le}function Zg(ne){var pe=-1,le=Array(ne.size);return ne.forEach(function(He){le[++pe]=[He,He]}),le}function Jg(ne,pe,le){for(var He=le-1,ft=ne.length;++He<ft;)if(ne[He]===pe)return He;return-1}function Qg(ne,pe,le){for(var He=le+1;He--;)if(ne[He]===pe)return He;return He}function la(ne){return oa(ne)?ev(ne):Lg(ne)}function Pn(ne){return oa(ne)?tv(ne):Rg(ne)}function Nf(ne){for(var pe=ne.length;pe--&&ir.test(ne.charAt(pe)););return pe}var Xg=No(Og);function ev(ne){for(var pe=Oo.lastIndex=0;Oo.test(ne);)++pe;return pe}function tv(ne){return ne.match(Oo)||[]}function rv(ne){return ne.match(yg)||[]}var nv=function ne(pe){pe=pe==null?Br:ca.defaults(Br.Object(),pe,ca.pick(Br,Cg));var le=pe.Array,He=pe.Date,ft=pe.Error,Mt=pe.Function,vr=pe.Math,Nt=pe.Object,jo=pe.RegExp,iv=pe.String,Dn=pe.TypeError,ku=le.prototype,av=Mt.prototype,fa=Nt.prototype,Tu=pe["__core-js_shared__"],Iu=av.toString,Tt=fa.hasOwnProperty,uv=0,Lf=function(){var u=/[^.]+$/.exec(Tu&&Tu.keys&&Tu.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),xu=fa.toString,sv=Iu.call(Nt),ov=Br._,lv=jo("^"+Iu.call(Tt).replace(Ui,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nu=Df?pe.Buffer:r,yi=pe.Symbol,Lu=pe.Uint8Array,Rf=Nu?Nu.allocUnsafe:r,Ru=xf(Nt.getPrototypeOf,Nt),Uf=Nt.create,Vf=fa.propertyIsEnumerable,Uu=ku.splice,jf=yi?yi.isConcatSpreadable:r,tu=yi?yi.iterator:r,Wi=yi?yi.toStringTag:r,Vu=function(){try{var u=Yi(Nt,"defineProperty");return u({},"",{}),u}catch{}}(),cv=pe.clearTimeout!==Br.clearTimeout&&pe.clearTimeout,fv=He&&He.now!==Br.Date.now&&He.now,hv=pe.setTimeout!==Br.setTimeout&&pe.setTimeout,ju=vr.ceil,zu=vr.floor,zo=Nt.getOwnPropertySymbols,dv=Nu?Nu.isBuffer:r,zf=pe.isFinite,pv=ku.join,gv=xf(Nt.keys,Nt),mr=vr.max,Lr=vr.min,vv=He.now,mv=pe.parseInt,qf=vr.random,_v=ku.reverse,qo=Yi(pe,"DataView"),ru=Yi(pe,"Map"),Wo=Yi(pe,"Promise"),ha=Yi(pe,"Set"),nu=Yi(pe,"WeakMap"),iu=Yi(Nt,"create"),qu=nu&&new nu,da={},bv=Zi(qo),Dv=Zi(ru),wv=Zi(Wo),yv=Zi(ha),Ev=Zi(nu),Wu=yi?yi.prototype:r,au=Wu?Wu.valueOf:r,Wf=Wu?Wu.toString:r;function L(u){if(ar(u)&&!ht(u)&&!(u instanceof wt)){if(u instanceof wn)return u;if(Tt.call(u,"__wrapped__"))return Hh(u)}return new wn(u)}var pa=function(){function u(){}return function(d){if(!Qt(d))return{};if(Uf)return Uf(d);u.prototype=d;var _=new u;return u.prototype=r,_}}();function Hu(){}function wn(u,d){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=r}L.templateSettings={escape:gr,evaluate:On,interpolate:Xn,variable:"",imports:{_:L}},L.prototype=Hu.prototype,L.prototype.constructor=L,wn.prototype=pa(Hu.prototype),wn.prototype.constructor=wn;function wt(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=me,this.__views__=[]}function Av(){var u=new wt(this.__wrapped__);return u.__actions__=Qr(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Qr(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Qr(this.__views__),u}function Cv(){if(this.__filtered__){var u=new wt(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function Fv(){var u=this.__wrapped__.value(),d=this.__dir__,_=ht(u),E=d<0,I=_?u.length:0,V=Rm(0,I,this.__views__),Y=V.start,ee=V.end,ae=ee-Y,Ae=E?ee:Y-1,Ce=this.__iteratees__,Me=Ce.length,je=0,Ge=Lr(ae,this.__takeCount__);if(!_||!E&&I==ae&&Ge==ae)return ph(u,this.__actions__);var ut=[];e:for(;ae--&&je<Ge;){Ae+=d;for(var _t=-1,st=u[Ae];++_t<Me;){var Dt=Ce[_t],Et=Dt.iteratee,hn=Dt.type,Kr=Et(st);if(hn==q)st=Kr;else if(!Kr){if(hn==N)continue e;break e}}ut[je++]=st}return ut}wt.prototype=pa(Hu.prototype),wt.prototype.constructor=wt;function Hi(u){var d=-1,_=u==null?0:u.length;for(this.clear();++d<_;){var E=u[d];this.set(E[0],E[1])}}function Sv(){this.__data__=iu?iu(null):{},this.size=0}function Bv(u){var d=this.has(u)&&delete this.__data__[u];return this.size-=d?1:0,d}function Ov(u){var d=this.__data__;if(iu){var _=d[u];return _===l?r:_}return Tt.call(d,u)?d[u]:r}function Mv(u){var d=this.__data__;return iu?d[u]!==r:Tt.call(d,u)}function Pv(u,d){var _=this.__data__;return this.size+=this.has(u)?0:1,_[u]=iu&&d===r?l:d,this}Hi.prototype.clear=Sv,Hi.prototype.delete=Bv,Hi.prototype.get=Ov,Hi.prototype.has=Mv,Hi.prototype.set=Pv;function ri(u){var d=-1,_=u==null?0:u.length;for(this.clear();++d<_;){var E=u[d];this.set(E[0],E[1])}}function kv(){this.__data__=[],this.size=0}function Tv(u){var d=this.__data__,_=$u(d,u);if(_<0)return!1;var E=d.length-1;return _==E?d.pop():Uu.call(d,_,1),--this.size,!0}function Iv(u){var d=this.__data__,_=$u(d,u);return _<0?r:d[_][1]}function xv(u){return $u(this.__data__,u)>-1}function Nv(u,d){var _=this.__data__,E=$u(_,u);return E<0?(++this.size,_.push([u,d])):_[E][1]=d,this}ri.prototype.clear=kv,ri.prototype.delete=Tv,ri.prototype.get=Iv,ri.prototype.has=xv,ri.prototype.set=Nv;function ni(u){var d=-1,_=u==null?0:u.length;for(this.clear();++d<_;){var E=u[d];this.set(E[0],E[1])}}function Lv(){this.size=0,this.__data__={hash:new Hi,map:new(ru||ri),string:new Hi}}function Rv(u){var d=is(this,u).delete(u);return this.size-=d?1:0,d}function Uv(u){return is(this,u).get(u)}function Vv(u){return is(this,u).has(u)}function jv(u,d){var _=is(this,u),E=_.size;return _.set(u,d),this.size+=_.size==E?0:1,this}ni.prototype.clear=Lv,ni.prototype.delete=Rv,ni.prototype.get=Uv,ni.prototype.has=Vv,ni.prototype.set=jv;function $i(u){var d=-1,_=u==null?0:u.length;for(this.__data__=new ni;++d<_;)this.add(u[d])}function zv(u){return this.__data__.set(u,l),this}function qv(u){return this.__data__.has(u)}$i.prototype.add=$i.prototype.push=zv,$i.prototype.has=qv;function kn(u){var d=this.__data__=new ri(u);this.size=d.size}function Wv(){this.__data__=new ri,this.size=0}function Hv(u){var d=this.__data__,_=d.delete(u);return this.size=d.size,_}function $v(u){return this.__data__.get(u)}function Gv(u){return this.__data__.has(u)}function Kv(u,d){var _=this.__data__;if(_ instanceof ri){var E=_.__data__;if(!ru||E.length<i-1)return E.push([u,d]),this.size=++_.size,this;_=this.__data__=new ni(E)}return _.set(u,d),this.size=_.size,this}kn.prototype.clear=Wv,kn.prototype.delete=Hv,kn.prototype.get=$v,kn.prototype.has=Gv,kn.prototype.set=Kv;function Hf(u,d){var _=ht(u),E=!_&&Ji(u),I=!_&&!E&&Si(u),V=!_&&!E&&!I&&_a(u),Y=_||E||I||V,ee=Y?Ro(u.length,iv):[],ae=ee.length;for(var Ae in u)(d||Tt.call(u,Ae))&&!(Y&&(Ae=="length"||I&&(Ae=="offset"||Ae=="parent")||V&&(Ae=="buffer"||Ae=="byteLength"||Ae=="byteOffset")||si(Ae,ae)))&&ee.push(Ae);return ee}function $f(u){var d=u.length;return d?u[tl(0,d-1)]:r}function Yv(u,d){return as(Qr(u),Gi(d,0,u.length))}function Zv(u){return as(Qr(u))}function Ho(u,d,_){(_!==r&&!Tn(u[d],_)||_===r&&!(d in u))&&ii(u,d,_)}function uu(u,d,_){var E=u[d];(!(Tt.call(u,d)&&Tn(E,_))||_===r&&!(d in u))&&ii(u,d,_)}function $u(u,d){for(var _=u.length;_--;)if(Tn(u[_][0],d))return _;return-1}function Jv(u,d,_,E){return Ei(u,function(I,V,Y){d(E,I,_(I),Y)}),E}function Gf(u,d){return u&&Hn(d,Er(d),u)}function Qv(u,d){return u&&Hn(d,en(d),u)}function ii(u,d,_){d=="__proto__"&&Vu?Vu(u,d,{configurable:!0,enumerable:!0,value:_,writable:!0}):u[d]=_}function $o(u,d){for(var _=-1,E=d.length,I=le(E),V=u==null;++_<E;)I[_]=V?r:Fl(u,d[_]);return I}function Gi(u,d,_){return u===u&&(_!==r&&(u=u<=_?u:_),d!==r&&(u=u>=d?u:d)),u}function yn(u,d,_,E,I,V){var Y,ee=d&f,ae=d&p,Ae=d&g;if(_&&(Y=I?_(u,E,I,V):_(u)),Y!==r)return Y;if(!Qt(u))return u;var Ce=ht(u);if(Ce){if(Y=Vm(u),!ee)return Qr(u,Y)}else{var Me=Rr(u),je=Me==Bt||Me==vt;if(Si(u))return mh(u,ee);if(Me==Ut||Me==ke||je&&!I){if(Y=ae||je?{}:Nh(u),!ee)return ae?Om(u,Qv(Y,u)):Bm(u,Gf(Y,u))}else{if(!jt[Me])return I?u:{};Y=jm(u,Me,ee)}}V||(V=new kn);var Ge=V.get(u);if(Ge)return Ge;V.set(u,Y),f0(u)?u.forEach(function(st){Y.add(yn(st,d,_,st,u,V))}):l0(u)&&u.forEach(function(st,Dt){Y.set(Dt,yn(st,d,_,Dt,u,V))});var ut=Ae?ae?hl:fl:ae?en:Er,_t=Ce?r:ut(u);return bn(_t||u,function(st,Dt){_t&&(Dt=st,st=u[Dt]),uu(Y,Dt,yn(st,d,_,Dt,u,V))}),Y}function Xv(u){var d=Er(u);return function(_){return Kf(_,u,d)}}function Kf(u,d,_){var E=_.length;if(u==null)return!E;for(u=Nt(u);E--;){var I=_[E],V=d[I],Y=u[I];if(Y===r&&!(I in u)||!V(Y))return!1}return!0}function Yf(u,d,_){if(typeof u!="function")throw new Dn(o);return du(function(){u.apply(r,_)},d)}function su(u,d,_,E){var I=-1,V=Ou,Y=!0,ee=u.length,ae=[],Ae=d.length;if(!ee)return ae;_&&(d=Ht(d,ln(_))),E?(V=ko,Y=!1):d.length>=i&&(V=eu,Y=!1,d=new $i(d));e:for(;++I<ee;){var Ce=u[I],Me=_==null?Ce:_(Ce);if(Ce=E||Ce!==0?Ce:0,Y&&Me===Me){for(var je=Ae;je--;)if(d[je]===Me)continue e;ae.push(Ce)}else V(d,Me,E)||ae.push(Ce)}return ae}var Ei=yh(Wn),Zf=yh(Ko,!0);function em(u,d){var _=!0;return Ei(u,function(E,I,V){return _=!!d(E,I,V),_}),_}function Gu(u,d,_){for(var E=-1,I=u.length;++E<I;){var V=u[E],Y=d(V);if(Y!=null&&(ee===r?Y===Y&&!fn(Y):_(Y,ee)))var ee=Y,ae=V}return ae}function tm(u,d,_,E){var I=u.length;for(_=mt(_),_<0&&(_=-_>I?0:I+_),E=E===r||E>I?I:mt(E),E<0&&(E+=I),E=_>E?0:d0(E);_<E;)u[_++]=d;return u}function Jf(u,d){var _=[];return Ei(u,function(E,I,V){d(E,I,V)&&_.push(E)}),_}function Or(u,d,_,E,I){var V=-1,Y=u.length;for(_||(_=qm),I||(I=[]);++V<Y;){var ee=u[V];d>0&&_(ee)?d>1?Or(ee,d-1,_,E,I):Di(I,ee):E||(I[I.length]=ee)}return I}var Go=Eh(),Qf=Eh(!0);function Wn(u,d){return u&&Go(u,d,Er)}function Ko(u,d){return u&&Qf(u,d,Er)}function Ku(u,d){return bi(d,function(_){return oi(u[_])})}function Ki(u,d){d=Ci(d,u);for(var _=0,E=d.length;u!=null&&_<E;)u=u[$n(d[_++])];return _&&_==E?u:r}function Xf(u,d,_){var E=d(u);return ht(u)?E:Di(E,_(u))}function $r(u){return u==null?u===r?X:qr:Wi&&Wi in Nt(u)?Lm(u):Zm(u)}function Yo(u,d){return u>d}function rm(u,d){return u!=null&&Tt.call(u,d)}function nm(u,d){return u!=null&&d in Nt(u)}function im(u,d,_){return u>=Lr(d,_)&&u<mr(d,_)}function Zo(u,d,_){for(var E=_?ko:Ou,I=u[0].length,V=u.length,Y=V,ee=le(V),ae=1/0,Ae=[];Y--;){var Ce=u[Y];Y&&d&&(Ce=Ht(Ce,ln(d))),ae=Lr(Ce.length,ae),ee[Y]=!_&&(d||I>=120&&Ce.length>=120)?new $i(Y&&Ce):r}Ce=u[0];var Me=-1,je=ee[0];e:for(;++Me<I&&Ae.length<ae;){var Ge=Ce[Me],ut=d?d(Ge):Ge;if(Ge=_||Ge!==0?Ge:0,!(je?eu(je,ut):E(Ae,ut,_))){for(Y=V;--Y;){var _t=ee[Y];if(!(_t?eu(_t,ut):E(u[Y],ut,_)))continue e}je&&je.push(ut),Ae.push(Ge)}}return Ae}function am(u,d,_,E){return Wn(u,function(I,V,Y){d(E,_(I),V,Y)}),E}function ou(u,d,_){d=Ci(d,u),u=Vh(u,d);var E=u==null?u:u[$n(An(d))];return E==null?r:on(E,u,_)}function eh(u){return ar(u)&&$r(u)==ke}function um(u){return ar(u)&&$r(u)==se}function sm(u){return ar(u)&&$r(u)==at}function lu(u,d,_,E,I){return u===d?!0:u==null||d==null||!ar(u)&&!ar(d)?u!==u&&d!==d:om(u,d,_,E,lu,I)}function om(u,d,_,E,I,V){var Y=ht(u),ee=ht(d),ae=Y?Ne:Rr(u),Ae=ee?Ne:Rr(d);ae=ae==ke?Ut:ae,Ae=Ae==ke?Ut:Ae;var Ce=ae==Ut,Me=Ae==Ut,je=ae==Ae;if(je&&Si(u)){if(!Si(d))return!1;Y=!0,Ce=!1}if(je&&!Ce)return V||(V=new kn),Y||_a(u)?Th(u,d,_,E,I,V):xm(u,d,ae,_,E,I,V);if(!(_&b)){var Ge=Ce&&Tt.call(u,"__wrapped__"),ut=Me&&Tt.call(d,"__wrapped__");if(Ge||ut){var _t=Ge?u.value():u,st=ut?d.value():d;return V||(V=new kn),I(_t,st,_,E,V)}}return je?(V||(V=new kn),Nm(u,d,_,E,I,V)):!1}function lm(u){return ar(u)&&Rr(u)==ct}function Jo(u,d,_,E){var I=_.length,V=I,Y=!E;if(u==null)return!V;for(u=Nt(u);I--;){var ee=_[I];if(Y&&ee[2]?ee[1]!==u[ee[0]]:!(ee[0]in u))return!1}for(;++I<V;){ee=_[I];var ae=ee[0],Ae=u[ae],Ce=ee[1];if(Y&&ee[2]){if(Ae===r&&!(ae in u))return!1}else{var Me=new kn;if(E)var je=E(Ae,Ce,ae,u,d,Me);if(!(je===r?lu(Ce,Ae,b|v,E,Me):je))return!1}}return!0}function th(u){if(!Qt(u)||Hm(u))return!1;var d=oi(u)?lv:Ha;return d.test(Zi(u))}function cm(u){return ar(u)&&$r(u)==pr}function fm(u){return ar(u)&&Rr(u)==Fr}function hm(u){return ar(u)&&fs(u.length)&&!!qt[$r(u)]}function rh(u){return typeof u=="function"?u:u==null?tn:typeof u=="object"?ht(u)?ah(u[0],u[1]):ih(u):A0(u)}function Qo(u){if(!hu(u))return gv(u);var d=[];for(var _ in Nt(u))Tt.call(u,_)&&_!="constructor"&&d.push(_);return d}function dm(u){if(!Qt(u))return Ym(u);var d=hu(u),_=[];for(var E in u)E=="constructor"&&(d||!Tt.call(u,E))||_.push(E);return _}function Xo(u,d){return u<d}function nh(u,d){var _=-1,E=Xr(u)?le(u.length):[];return Ei(u,function(I,V,Y){E[++_]=d(I,V,Y)}),E}function ih(u){var d=pl(u);return d.length==1&&d[0][2]?Rh(d[0][0],d[0][1]):function(_){return _===u||Jo(_,u,d)}}function ah(u,d){return vl(u)&&Lh(d)?Rh($n(u),d):function(_){var E=Fl(_,u);return E===r&&E===d?Sl(_,u):lu(d,E,b|v)}}function Yu(u,d,_,E,I){u!==d&&Go(d,function(V,Y){if(I||(I=new kn),Qt(V))pm(u,d,Y,_,Yu,E,I);else{var ee=E?E(_l(u,Y),V,Y+"",u,d,I):r;ee===r&&(ee=V),Ho(u,Y,ee)}},en)}function pm(u,d,_,E,I,V,Y){var ee=_l(u,_),ae=_l(d,_),Ae=Y.get(ae);if(Ae){Ho(u,_,Ae);return}var Ce=V?V(ee,ae,_+"",u,d,Y):r,Me=Ce===r;if(Me){var je=ht(ae),Ge=!je&&Si(ae),ut=!je&&!Ge&&_a(ae);Ce=ae,je||Ge||ut?ht(ee)?Ce=ee:lr(ee)?Ce=Qr(ee):Ge?(Me=!1,Ce=mh(ae,!0)):ut?(Me=!1,Ce=_h(ae,!0)):Ce=[]:pu(ae)||Ji(ae)?(Ce=ee,Ji(ee)?Ce=p0(ee):(!Qt(ee)||oi(ee))&&(Ce=Nh(ae))):Me=!1}Me&&(Y.set(ae,Ce),I(Ce,ae,E,V,Y),Y.delete(ae)),Ho(u,_,Ce)}function uh(u,d){var _=u.length;if(_)return d+=d<0?_:0,si(d,_)?u[d]:r}function sh(u,d,_){d.length?d=Ht(d,function(V){return ht(V)?function(Y){return Ki(Y,V.length===1?V[0]:V)}:V}):d=[tn];var E=-1;d=Ht(d,ln(nt()));var I=nh(u,function(V,Y,ee){var ae=Ht(d,function(Ae){return Ae(V)});return{criteria:ae,index:++E,value:V}});return jg(I,function(V,Y){return Sm(V,Y,_)})}function gm(u,d){return oh(u,d,function(_,E){return Sl(u,E)})}function oh(u,d,_){for(var E=-1,I=d.length,V={};++E<I;){var Y=d[E],ee=Ki(u,Y);_(ee,Y)&&cu(V,Ci(Y,u),ee)}return V}function vm(u){return function(d){return Ki(d,u)}}function el(u,d,_,E){var I=E?Vg:sa,V=-1,Y=d.length,ee=u;for(u===d&&(d=Qr(d)),_&&(ee=Ht(u,ln(_)));++V<Y;)for(var ae=0,Ae=d[V],Ce=_?_(Ae):Ae;(ae=I(ee,Ce,ae,E))>-1;)ee!==u&&Uu.call(ee,ae,1),Uu.call(u,ae,1);return u}function lh(u,d){for(var _=u?d.length:0,E=_-1;_--;){var I=d[_];if(_==E||I!==V){var V=I;si(I)?Uu.call(u,I,1):il(u,I)}}return u}function tl(u,d){return u+zu(qf()*(d-u+1))}function mm(u,d,_,E){for(var I=-1,V=mr(ju((d-u)/(_||1)),0),Y=le(V);V--;)Y[E?V:++I]=u,u+=_;return Y}function rl(u,d){var _="";if(!u||d<1||d>Q)return _;do d%2&&(_+=u),d=zu(d/2),d&&(u+=u);while(d);return _}function bt(u,d){return bl(Uh(u,d,tn),u+"")}function _m(u){return $f(ba(u))}function bm(u,d){var _=ba(u);return as(_,Gi(d,0,_.length))}function cu(u,d,_,E){if(!Qt(u))return u;d=Ci(d,u);for(var I=-1,V=d.length,Y=V-1,ee=u;ee!=null&&++I<V;){var ae=$n(d[I]),Ae=_;if(ae==="__proto__"||ae==="constructor"||ae==="prototype")return u;if(I!=Y){var Ce=ee[ae];Ae=E?E(Ce,ae,ee):r,Ae===r&&(Ae=Qt(Ce)?Ce:si(d[I+1])?[]:{})}uu(ee,ae,Ae),ee=ee[ae]}return u}var ch=qu?function(u,d){return qu.set(u,d),u}:tn,Dm=Vu?function(u,d){return Vu(u,"toString",{configurable:!0,enumerable:!1,value:Ol(d),writable:!0})}:tn;function wm(u){return as(ba(u))}function En(u,d,_){var E=-1,I=u.length;d<0&&(d=-d>I?0:I+d),_=_>I?I:_,_<0&&(_+=I),I=d>_?0:_-d>>>0,d>>>=0;for(var V=le(I);++E<I;)V[E]=u[E+d];return V}function ym(u,d){var _;return Ei(u,function(E,I,V){return _=d(E,I,V),!_}),!!_}function Zu(u,d,_){var E=0,I=u==null?E:u.length;if(typeof d=="number"&&d===d&&I<=be){for(;E<I;){var V=E+I>>>1,Y=u[V];Y!==null&&!fn(Y)&&(_?Y<=d:Y<d)?E=V+1:I=V}return I}return nl(u,d,tn,_)}function nl(u,d,_,E){var I=0,V=u==null?0:u.length;if(V===0)return 0;d=_(d);for(var Y=d!==d,ee=d===null,ae=fn(d),Ae=d===r;I<V;){var Ce=zu((I+V)/2),Me=_(u[Ce]),je=Me!==r,Ge=Me===null,ut=Me===Me,_t=fn(Me);if(Y)var st=E||ut;else Ae?st=ut&&(E||je):ee?st=ut&&je&&(E||!Ge):ae?st=ut&&je&&!Ge&&(E||!_t):Ge||_t?st=!1:st=E?Me<=d:Me<d;st?I=Ce+1:V=Ce}return Lr(V,Ee)}function fh(u,d){for(var _=-1,E=u.length,I=0,V=[];++_<E;){var Y=u[_],ee=d?d(Y):Y;if(!_||!Tn(ee,ae)){var ae=ee;V[I++]=Y===0?0:Y}}return V}function hh(u){return typeof u=="number"?u:fn(u)?ce:+u}function cn(u){if(typeof u=="string")return u;if(ht(u))return Ht(u,cn)+"";if(fn(u))return Wf?Wf.call(u):"";var d=u+"";return d=="0"&&1/u==-J?"-0":d}function Ai(u,d,_){var E=-1,I=Ou,V=u.length,Y=!0,ee=[],ae=ee;if(_)Y=!1,I=ko;else if(V>=i){var Ae=d?null:Tm(u);if(Ae)return Pu(Ae);Y=!1,I=eu,ae=new $i}else ae=d?[]:ee;e:for(;++E<V;){var Ce=u[E],Me=d?d(Ce):Ce;if(Ce=_||Ce!==0?Ce:0,Y&&Me===Me){for(var je=ae.length;je--;)if(ae[je]===Me)continue e;d&&ae.push(Me),ee.push(Ce)}else I(ae,Me,_)||(ae!==ee&&ae.push(Me),ee.push(Ce))}return ee}function il(u,d){return d=Ci(d,u),u=Vh(u,d),u==null||delete u[$n(An(d))]}function dh(u,d,_,E){return cu(u,d,_(Ki(u,d)),E)}function Ju(u,d,_,E){for(var I=u.length,V=E?I:-1;(E?V--:++V<I)&&d(u[V],V,u););return _?En(u,E?0:V,E?V+1:I):En(u,E?V+1:0,E?I:V)}function ph(u,d){var _=u;return _ instanceof wt&&(_=_.value()),To(d,function(E,I){return I.func.apply(I.thisArg,Di([E],I.args))},_)}function al(u,d,_){var E=u.length;if(E<2)return E?Ai(u[0]):[];for(var I=-1,V=le(E);++I<E;)for(var Y=u[I],ee=-1;++ee<E;)ee!=I&&(V[I]=su(V[I]||Y,u[ee],d,_));return Ai(Or(V,1),d,_)}function gh(u,d,_){for(var E=-1,I=u.length,V=d.length,Y={};++E<I;){var ee=E<V?d[E]:r;_(Y,u[E],ee)}return Y}function ul(u){return lr(u)?u:[]}function sl(u){return typeof u=="function"?u:tn}function Ci(u,d){return ht(u)?u:vl(u,d)?[u]:Wh(Pt(u))}var Em=bt;function Fi(u,d,_){var E=u.length;return _=_===r?E:_,!d&&_>=E?u:En(u,d,_)}var vh=cv||function(u){return Br.clearTimeout(u)};function mh(u,d){if(d)return u.slice();var _=u.length,E=Rf?Rf(_):new u.constructor(_);return u.copy(E),E}function ol(u){var d=new u.constructor(u.byteLength);return new Lu(d).set(new Lu(u)),d}function Am(u,d){var _=d?ol(u.buffer):u.buffer;return new u.constructor(_,u.byteOffset,u.byteLength)}function Cm(u){var d=new u.constructor(u.source,ia.exec(u));return d.lastIndex=u.lastIndex,d}function Fm(u){return au?Nt(au.call(u)):{}}function _h(u,d){var _=d?ol(u.buffer):u.buffer;return new u.constructor(_,u.byteOffset,u.length)}function bh(u,d){if(u!==d){var _=u!==r,E=u===null,I=u===u,V=fn(u),Y=d!==r,ee=d===null,ae=d===d,Ae=fn(d);if(!ee&&!Ae&&!V&&u>d||V&&Y&&ae&&!ee&&!Ae||E&&Y&&ae||!_&&ae||!I)return 1;if(!E&&!V&&!Ae&&u<d||Ae&&_&&I&&!E&&!V||ee&&_&&I||!Y&&I||!ae)return-1}return 0}function Sm(u,d,_){for(var E=-1,I=u.criteria,V=d.criteria,Y=I.length,ee=_.length;++E<Y;){var ae=bh(I[E],V[E]);if(ae){if(E>=ee)return ae;var Ae=_[E];return ae*(Ae=="desc"?-1:1)}}return u.index-d.index}function Dh(u,d,_,E){for(var I=-1,V=u.length,Y=_.length,ee=-1,ae=d.length,Ae=mr(V-Y,0),Ce=le(ae+Ae),Me=!E;++ee<ae;)Ce[ee]=d[ee];for(;++I<Y;)(Me||I<V)&&(Ce[_[I]]=u[I]);for(;Ae--;)Ce[ee++]=u[I++];return Ce}function wh(u,d,_,E){for(var I=-1,V=u.length,Y=-1,ee=_.length,ae=-1,Ae=d.length,Ce=mr(V-ee,0),Me=le(Ce+Ae),je=!E;++I<Ce;)Me[I]=u[I];for(var Ge=I;++ae<Ae;)Me[Ge+ae]=d[ae];for(;++Y<ee;)(je||I<V)&&(Me[Ge+_[Y]]=u[I++]);return Me}function Qr(u,d){var _=-1,E=u.length;for(d||(d=le(E));++_<E;)d[_]=u[_];return d}function Hn(u,d,_,E){var I=!_;_||(_={});for(var V=-1,Y=d.length;++V<Y;){var ee=d[V],ae=E?E(_[ee],u[ee],ee,_,u):r;ae===r&&(ae=u[ee]),I?ii(_,ee,ae):uu(_,ee,ae)}return _}function Bm(u,d){return Hn(u,gl(u),d)}function Om(u,d){return Hn(u,Ih(u),d)}function Qu(u,d){return function(_,E){var I=ht(_)?Ig:Jv,V=d?d():{};return I(_,u,nt(E,2),V)}}function ga(u){return bt(function(d,_){var E=-1,I=_.length,V=I>1?_[I-1]:r,Y=I>2?_[2]:r;for(V=u.length>3&&typeof V=="function"?(I--,V):r,Y&&Gr(_[0],_[1],Y)&&(V=I<3?r:V,I=1),d=Nt(d);++E<I;){var ee=_[E];ee&&u(d,ee,E,V)}return d})}function yh(u,d){return function(_,E){if(_==null)return _;if(!Xr(_))return u(_,E);for(var I=_.length,V=d?I:-1,Y=Nt(_);(d?V--:++V<I)&&E(Y[V],V,Y)!==!1;);return _}}function Eh(u){return function(d,_,E){for(var I=-1,V=Nt(d),Y=E(d),ee=Y.length;ee--;){var ae=Y[u?ee:++I];if(_(V[ae],ae,V)===!1)break}return d}}function Mm(u,d,_){var E=d&m,I=fu(u);function V(){var Y=this&&this!==Br&&this instanceof V?I:u;return Y.apply(E?_:this,arguments)}return V}function Ah(u){return function(d){d=Pt(d);var _=oa(d)?Pn(d):r,E=_?_[0]:d.charAt(0),I=_?Fi(_,1).join(""):d.slice(1);return E[u]()+I}}function va(u){return function(d){return To(y0(w0(d).replace(Dg,"")),u,"")}}function fu(u){return function(){var d=arguments;switch(d.length){case 0:return new u;case 1:return new u(d[0]);case 2:return new u(d[0],d[1]);case 3:return new u(d[0],d[1],d[2]);case 4:return new u(d[0],d[1],d[2],d[3]);case 5:return new u(d[0],d[1],d[2],d[3],d[4]);case 6:return new u(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new u(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var _=pa(u.prototype),E=u.apply(_,d);return Qt(E)?E:_}}function Pm(u,d,_){var E=fu(u);function I(){for(var V=arguments.length,Y=le(V),ee=V,ae=ma(I);ee--;)Y[ee]=arguments[ee];var Ae=V<3&&Y[0]!==ae&&Y[V-1]!==ae?[]:wi(Y,ae);if(V-=Ae.length,V<_)return Oh(u,d,Xu,I.placeholder,r,Y,Ae,r,r,_-V);var Ce=this&&this!==Br&&this instanceof I?E:u;return on(Ce,this,Y)}return I}function Ch(u){return function(d,_,E){var I=Nt(d);if(!Xr(d)){var V=nt(_,3);d=Er(d),_=function(ee){return V(I[ee],ee,I)}}var Y=u(d,_,E);return Y>-1?I[V?d[Y]:Y]:r}}function Fh(u){return ui(function(d){var _=d.length,E=_,I=wn.prototype.thru;for(u&&d.reverse();E--;){var V=d[E];if(typeof V!="function")throw new Dn(o);if(I&&!Y&&ns(V)=="wrapper")var Y=new wn([],!0)}for(E=Y?E:_;++E<_;){V=d[E];var ee=ns(V),ae=ee=="wrapper"?dl(V):r;ae&&ml(ae[0])&&ae[1]==(O|y|F|C)&&!ae[4].length&&ae[9]==1?Y=Y[ns(ae[0])].apply(Y,ae[3]):Y=V.length==1&&ml(V)?Y[ee]():Y.thru(V)}return function(){var Ae=arguments,Ce=Ae[0];if(Y&&Ae.length==1&&ht(Ce))return Y.plant(Ce).value();for(var Me=0,je=_?d[Me].apply(this,Ae):Ce;++Me<_;)je=d[Me].call(this,je);return je}})}function Xu(u,d,_,E,I,V,Y,ee,ae,Ae){var Ce=d&O,Me=d&m,je=d&D,Ge=d&(y|A),ut=d&x,_t=je?r:fu(u);function st(){for(var Dt=arguments.length,Et=le(Dt),hn=Dt;hn--;)Et[hn]=arguments[hn];if(Ge)var Kr=ma(st),dn=qg(Et,Kr);if(E&&(Et=Dh(Et,E,I,Ge)),V&&(Et=wh(Et,V,Y,Ge)),Dt-=dn,Ge&&Dt<Ae){var cr=wi(Et,Kr);return Oh(u,d,Xu,st.placeholder,_,Et,cr,ee,ae,Ae-Dt)}var In=Me?_:this,ci=je?In[u]:u;return Dt=Et.length,ee?Et=Jm(Et,ee):ut&&Dt>1&&Et.reverse(),Ce&&ae<Dt&&(Et.length=ae),this&&this!==Br&&this instanceof st&&(ci=_t||fu(ci)),ci.apply(In,Et)}return st}function Sh(u,d){return function(_,E){return am(_,u,d(E),{})}}function es(u,d){return function(_,E){var I;if(_===r&&E===r)return d;if(_!==r&&(I=_),E!==r){if(I===r)return E;typeof _=="string"||typeof E=="string"?(_=cn(_),E=cn(E)):(_=hh(_),E=hh(E)),I=u(_,E)}return I}}function ll(u){return ui(function(d){return d=Ht(d,ln(nt())),bt(function(_){var E=this;return u(d,function(I){return on(I,E,_)})})})}function ts(u,d){d=d===r?" ":cn(d);var _=d.length;if(_<2)return _?rl(d,u):d;var E=rl(d,ju(u/la(d)));return oa(d)?Fi(Pn(E),0,u).join(""):E.slice(0,u)}function km(u,d,_,E){var I=d&m,V=fu(u);function Y(){for(var ee=-1,ae=arguments.length,Ae=-1,Ce=E.length,Me=le(Ce+ae),je=this&&this!==Br&&this instanceof Y?V:u;++Ae<Ce;)Me[Ae]=E[Ae];for(;ae--;)Me[Ae++]=arguments[++ee];return on(je,I?_:this,Me)}return Y}function Bh(u){return function(d,_,E){return E&&typeof E!="number"&&Gr(d,_,E)&&(_=E=r),d=li(d),_===r?(_=d,d=0):_=li(_),E=E===r?d<_?1:-1:li(E),mm(d,_,E,u)}}function rs(u){return function(d,_){return typeof d=="string"&&typeof _=="string"||(d=Cn(d),_=Cn(_)),u(d,_)}}function Oh(u,d,_,E,I,V,Y,ee,ae,Ae){var Ce=d&y,Me=Ce?Y:r,je=Ce?r:Y,Ge=Ce?V:r,ut=Ce?r:V;d|=Ce?F:P,d&=~(Ce?P:F),d&S||(d&=~(m|D));var _t=[u,d,I,Ge,Me,ut,je,ee,ae,Ae],st=_.apply(r,_t);return ml(u)&&jh(st,_t),st.placeholder=E,zh(st,u,d)}function cl(u){var d=vr[u];return function(_,E){if(_=Cn(_),E=E==null?0:Lr(mt(E),292),E&&zf(_)){var I=(Pt(_)+"e").split("e"),V=d(I[0]+"e"+(+I[1]+E));return I=(Pt(V)+"e").split("e"),+(I[0]+"e"+(+I[1]-E))}return d(_)}}var Tm=ha&&1/Pu(new ha([,-0]))[1]==J?function(u){return new ha(u)}:kl;function Mh(u){return function(d){var _=Rr(d);return _==ct?Vo(d):_==Fr?Zg(d):zg(d,u(d))}}function ai(u,d,_,E,I,V,Y,ee){var ae=d&D;if(!ae&&typeof u!="function")throw new Dn(o);var Ae=E?E.length:0;if(Ae||(d&=~(F|P),E=I=r),Y=Y===r?Y:mr(mt(Y),0),ee=ee===r?ee:mt(ee),Ae-=I?I.length:0,d&P){var Ce=E,Me=I;E=I=r}var je=ae?r:dl(u),Ge=[u,d,_,E,I,Ce,Me,V,Y,ee];if(je&&Km(Ge,je),u=Ge[0],d=Ge[1],_=Ge[2],E=Ge[3],I=Ge[4],ee=Ge[9]=Ge[9]===r?ae?0:u.length:mr(Ge[9]-Ae,0),!ee&&d&(y|A)&&(d&=~(y|A)),!d||d==m)var ut=Mm(u,d,_);else d==y||d==A?ut=Pm(u,d,ee):(d==F||d==(m|F))&&!I.length?ut=km(u,d,_,E):ut=Xu.apply(r,Ge);var _t=je?ch:jh;return zh(_t(ut,Ge),u,d)}function Ph(u,d,_,E){return u===r||Tn(u,fa[_])&&!Tt.call(E,_)?d:u}function kh(u,d,_,E,I,V){return Qt(u)&&Qt(d)&&(V.set(d,u),Yu(u,d,r,kh,V),V.delete(d)),u}function Im(u){return pu(u)?r:u}function Th(u,d,_,E,I,V){var Y=_&b,ee=u.length,ae=d.length;if(ee!=ae&&!(Y&&ae>ee))return!1;var Ae=V.get(u),Ce=V.get(d);if(Ae&&Ce)return Ae==d&&Ce==u;var Me=-1,je=!0,Ge=_&v?new $i:r;for(V.set(u,d),V.set(d,u);++Me<ee;){var ut=u[Me],_t=d[Me];if(E)var st=Y?E(_t,ut,Me,d,u,V):E(ut,_t,Me,u,d,V);if(st!==r){if(st)continue;je=!1;break}if(Ge){if(!Io(d,function(Dt,Et){if(!eu(Ge,Et)&&(ut===Dt||I(ut,Dt,_,E,V)))return Ge.push(Et)})){je=!1;break}}else if(!(ut===_t||I(ut,_t,_,E,V))){je=!1;break}}return V.delete(u),V.delete(d),je}function xm(u,d,_,E,I,V,Y){switch(_){case De:if(u.byteLength!=d.byteLength||u.byteOffset!=d.byteOffset)return!1;u=u.buffer,d=d.buffer;case se:return!(u.byteLength!=d.byteLength||!V(new Lu(u),new Lu(d)));case tt:case at:case xt:return Tn(+u,+d);case St:return u.name==d.name&&u.message==d.message;case pr:case Bn:return u==d+"";case ct:var ee=Vo;case Fr:var ae=E&b;if(ee||(ee=Pu),u.size!=d.size&&!ae)return!1;var Ae=Y.get(u);if(Ae)return Ae==d;E|=v,Y.set(u,d);var Ce=Th(ee(u),ee(d),E,I,V,Y);return Y.delete(u),Ce;case K:if(au)return au.call(u)==au.call(d)}return!1}function Nm(u,d,_,E,I,V){var Y=_&b,ee=fl(u),ae=ee.length,Ae=fl(d),Ce=Ae.length;if(ae!=Ce&&!Y)return!1;for(var Me=ae;Me--;){var je=ee[Me];if(!(Y?je in d:Tt.call(d,je)))return!1}var Ge=V.get(u),ut=V.get(d);if(Ge&&ut)return Ge==d&&ut==u;var _t=!0;V.set(u,d),V.set(d,u);for(var st=Y;++Me<ae;){je=ee[Me];var Dt=u[je],Et=d[je];if(E)var hn=Y?E(Et,Dt,je,d,u,V):E(Dt,Et,je,u,d,V);if(!(hn===r?Dt===Et||I(Dt,Et,_,E,V):hn)){_t=!1;break}st||(st=je=="constructor")}if(_t&&!st){var Kr=u.constructor,dn=d.constructor;Kr!=dn&&"constructor"in u&&"constructor"in d&&!(typeof Kr=="function"&&Kr instanceof Kr&&typeof dn=="function"&&dn instanceof dn)&&(_t=!1)}return V.delete(u),V.delete(d),_t}function ui(u){return bl(Uh(u,r,Kh),u+"")}function fl(u){return Xf(u,Er,gl)}function hl(u){return Xf(u,en,Ih)}var dl=qu?function(u){return qu.get(u)}:kl;function ns(u){for(var d=u.name+"",_=da[d],E=Tt.call(da,d)?_.length:0;E--;){var I=_[E],V=I.func;if(V==null||V==u)return I.name}return d}function ma(u){var d=Tt.call(L,"placeholder")?L:u;return d.placeholder}function nt(){var u=L.iteratee||Ml;return u=u===Ml?rh:u,arguments.length?u(arguments[0],arguments[1]):u}function is(u,d){var _=u.__data__;return Wm(d)?_[typeof d=="string"?"string":"hash"]:_.map}function pl(u){for(var d=Er(u),_=d.length;_--;){var E=d[_],I=u[E];d[_]=[E,I,Lh(I)]}return d}function Yi(u,d){var _=Gg(u,d);return th(_)?_:r}function Lm(u){var d=Tt.call(u,Wi),_=u[Wi];try{u[Wi]=r;var E=!0}catch{}var I=xu.call(u);return E&&(d?u[Wi]=_:delete u[Wi]),I}var gl=zo?function(u){return u==null?[]:(u=Nt(u),bi(zo(u),function(d){return Vf.call(u,d)}))}:Tl,Ih=zo?function(u){for(var d=[];u;)Di(d,gl(u)),u=Ru(u);return d}:Tl,Rr=$r;(qo&&Rr(new qo(new ArrayBuffer(1)))!=De||ru&&Rr(new ru)!=ct||Wo&&Rr(Wo.resolve())!=Wr||ha&&Rr(new ha)!=Fr||nu&&Rr(new nu)!=ie)&&(Rr=function(u){var d=$r(u),_=d==Ut?u.constructor:r,E=_?Zi(_):"";if(E)switch(E){case bv:return De;case Dv:return ct;case wv:return Wr;case yv:return Fr;case Ev:return ie}return d});function Rm(u,d,_){for(var E=-1,I=_.length;++E<I;){var V=_[E],Y=V.size;switch(V.type){case"drop":u+=Y;break;case"dropRight":d-=Y;break;case"take":d=Lr(d,u+Y);break;case"takeRight":u=mr(u,d-Y);break}}return{start:u,end:d}}function Um(u){var d=u.match(vi);return d?d[1].split(vn):[]}function xh(u,d,_){d=Ci(d,u);for(var E=-1,I=d.length,V=!1;++E<I;){var Y=$n(d[E]);if(!(V=u!=null&&_(u,Y)))break;u=u[Y]}return V||++E!=I?V:(I=u==null?0:u.length,!!I&&fs(I)&&si(Y,I)&&(ht(u)||Ji(u)))}function Vm(u){var d=u.length,_=new u.constructor(d);return d&&typeof u[0]=="string"&&Tt.call(u,"index")&&(_.index=u.index,_.input=u.input),_}function Nh(u){return typeof u.constructor=="function"&&!hu(u)?pa(Ru(u)):{}}function jm(u,d,_){var E=u.constructor;switch(d){case se:return ol(u);case tt:case at:return new E(+u);case De:return Am(u,_);case fe:case de:case Te:case We:case ot:case Ie:case Yt:case Vt:case nr:return _h(u,_);case ct:return new E;case xt:case Bn:return new E(u);case pr:return Cm(u);case Fr:return new E;case K:return Fm(u)}}function zm(u,d){var _=d.length;if(!_)return u;var E=_-1;return d[E]=(_>1?"& ":"")+d[E],d=d.join(_>2?", ":" "),u.replace(Va,`{
/* [wrapped with `+d+`] */
`)}function qm(u){return ht(u)||Ji(u)||!!(jf&&u&&u[jf])}function si(u,d){var _=typeof u;return d=d??Q,!!d&&(_=="number"||_!="symbol"&&Ga.test(u))&&u>-1&&u%1==0&&u<d}function Gr(u,d,_){if(!Qt(_))return!1;var E=typeof d;return(E=="number"?Xr(_)&&si(d,_.length):E=="string"&&d in _)?Tn(_[d],u):!1}function vl(u,d){if(ht(u))return!1;var _=typeof u;return _=="number"||_=="symbol"||_=="boolean"||u==null||fn(u)?!0:jn.test(u)||!Vn.test(u)||d!=null&&u in Nt(d)}function Wm(u){var d=typeof u;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?u!=="__proto__":u===null}function ml(u){var d=ns(u),_=L[d];if(typeof _!="function"||!(d in wt.prototype))return!1;if(u===_)return!0;var E=dl(_);return!!E&&u===E[0]}function Hm(u){return!!Lf&&Lf in u}var $m=Tu?oi:Il;function hu(u){var d=u&&u.constructor,_=typeof d=="function"&&d.prototype||fa;return u===_}function Lh(u){return u===u&&!Qt(u)}function Rh(u,d){return function(_){return _==null?!1:_[u]===d&&(d!==r||u in Nt(_))}}function Gm(u){var d=ls(u,function(E){return _.size===h&&_.clear(),E}),_=d.cache;return d}function Km(u,d){var _=u[1],E=d[1],I=_|E,V=I<(m|D|O),Y=E==O&&_==y||E==O&&_==C&&u[7].length<=d[8]||E==(O|C)&&d[7].length<=d[8]&&_==y;if(!(V||Y))return u;E&m&&(u[2]=d[2],I|=_&m?0:S);var ee=d[3];if(ee){var ae=u[3];u[3]=ae?Dh(ae,ee,d[4]):ee,u[4]=ae?wi(u[3],c):d[4]}return ee=d[5],ee&&(ae=u[5],u[5]=ae?wh(ae,ee,d[6]):ee,u[6]=ae?wi(u[5],c):d[6]),ee=d[7],ee&&(u[7]=ee),E&O&&(u[8]=u[8]==null?d[8]:Lr(u[8],d[8])),u[9]==null&&(u[9]=d[9]),u[0]=d[0],u[1]=I,u}function Ym(u){var d=[];if(u!=null)for(var _ in Nt(u))d.push(_);return d}function Zm(u){return xu.call(u)}function Uh(u,d,_){return d=mr(d===r?u.length-1:d,0),function(){for(var E=arguments,I=-1,V=mr(E.length-d,0),Y=le(V);++I<V;)Y[I]=E[d+I];I=-1;for(var ee=le(d+1);++I<d;)ee[I]=E[I];return ee[d]=_(Y),on(u,this,ee)}}function Vh(u,d){return d.length<2?u:Ki(u,En(d,0,-1))}function Jm(u,d){for(var _=u.length,E=Lr(d.length,_),I=Qr(u);E--;){var V=d[E];u[E]=si(V,_)?I[V]:r}return u}function _l(u,d){if(!(d==="constructor"&&typeof u[d]=="function")&&d!="__proto__")return u[d]}var jh=qh(ch),du=hv||function(u,d){return Br.setTimeout(u,d)},bl=qh(Dm);function zh(u,d,_){var E=d+"";return bl(u,zm(E,Qm(Um(E),_)))}function qh(u){var d=0,_=0;return function(){var E=vv(),I=R-(E-_);if(_=E,I>0){if(++d>=Z)return arguments[0]}else d=0;return u.apply(r,arguments)}}function as(u,d){var _=-1,E=u.length,I=E-1;for(d=d===r?E:d;++_<d;){var V=tl(_,I),Y=u[V];u[V]=u[_],u[_]=Y}return u.length=d,u}var Wh=Gm(function(u){var d=[];return u.charCodeAt(0)===46&&d.push(""),u.replace(na,function(_,E,I,V){d.push(I?V.replace(ja,"$1"):E||_)}),d});function $n(u){if(typeof u=="string"||fn(u))return u;var d=u+"";return d=="0"&&1/u==-J?"-0":d}function Zi(u){if(u!=null){try{return Iu.call(u)}catch{}try{return u+""}catch{}}return""}function Qm(u,d){return bn(Oe,function(_){var E="_."+_[0];d&_[1]&&!Ou(u,E)&&u.push(E)}),u.sort()}function Hh(u){if(u instanceof wt)return u.clone();var d=new wn(u.__wrapped__,u.__chain__);return d.__actions__=Qr(u.__actions__),d.__index__=u.__index__,d.__values__=u.__values__,d}function Xm(u,d,_){(_?Gr(u,d,_):d===r)?d=1:d=mr(mt(d),0);var E=u==null?0:u.length;if(!E||d<1)return[];for(var I=0,V=0,Y=le(ju(E/d));I<E;)Y[V++]=En(u,I,I+=d);return Y}function e_(u){for(var d=-1,_=u==null?0:u.length,E=0,I=[];++d<_;){var V=u[d];V&&(I[E++]=V)}return I}function t_(){var u=arguments.length;if(!u)return[];for(var d=le(u-1),_=arguments[0],E=u;E--;)d[E-1]=arguments[E];return Di(ht(_)?Qr(_):[_],Or(d,1))}var r_=bt(function(u,d){return lr(u)?su(u,Or(d,1,lr,!0)):[]}),n_=bt(function(u,d){var _=An(d);return lr(_)&&(_=r),lr(u)?su(u,Or(d,1,lr,!0),nt(_,2)):[]}),i_=bt(function(u,d){var _=An(d);return lr(_)&&(_=r),lr(u)?su(u,Or(d,1,lr,!0),r,_):[]});function a_(u,d,_){var E=u==null?0:u.length;return E?(d=_||d===r?1:mt(d),En(u,d<0?0:d,E)):[]}function u_(u,d,_){var E=u==null?0:u.length;return E?(d=_||d===r?1:mt(d),d=E-d,En(u,0,d<0?0:d)):[]}function s_(u,d){return u&&u.length?Ju(u,nt(d,3),!0,!0):[]}function o_(u,d){return u&&u.length?Ju(u,nt(d,3),!0):[]}function l_(u,d,_,E){var I=u==null?0:u.length;return I?(_&&typeof _!="number"&&Gr(u,d,_)&&(_=0,E=I),tm(u,d,_,E)):[]}function $h(u,d,_){var E=u==null?0:u.length;if(!E)return-1;var I=_==null?0:mt(_);return I<0&&(I=mr(E+I,0)),Mu(u,nt(d,3),I)}function Gh(u,d,_){var E=u==null?0:u.length;if(!E)return-1;var I=E-1;return _!==r&&(I=mt(_),I=_<0?mr(E+I,0):Lr(I,E-1)),Mu(u,nt(d,3),I,!0)}function Kh(u){var d=u==null?0:u.length;return d?Or(u,1):[]}function c_(u){var d=u==null?0:u.length;return d?Or(u,J):[]}function f_(u,d){var _=u==null?0:u.length;return _?(d=d===r?1:mt(d),Or(u,d)):[]}function h_(u){for(var d=-1,_=u==null?0:u.length,E={};++d<_;){var I=u[d];E[I[0]]=I[1]}return E}function Yh(u){return u&&u.length?u[0]:r}function d_(u,d,_){var E=u==null?0:u.length;if(!E)return-1;var I=_==null?0:mt(_);return I<0&&(I=mr(E+I,0)),sa(u,d,I)}function p_(u){var d=u==null?0:u.length;return d?En(u,0,-1):[]}var g_=bt(function(u){var d=Ht(u,ul);return d.length&&d[0]===u[0]?Zo(d):[]}),v_=bt(function(u){var d=An(u),_=Ht(u,ul);return d===An(_)?d=r:_.pop(),_.length&&_[0]===u[0]?Zo(_,nt(d,2)):[]}),m_=bt(function(u){var d=An(u),_=Ht(u,ul);return d=typeof d=="function"?d:r,d&&_.pop(),_.length&&_[0]===u[0]?Zo(_,r,d):[]});function __(u,d){return u==null?"":pv.call(u,d)}function An(u){var d=u==null?0:u.length;return d?u[d-1]:r}function b_(u,d,_){var E=u==null?0:u.length;if(!E)return-1;var I=E;return _!==r&&(I=mt(_),I=I<0?mr(E+I,0):Lr(I,E-1)),d===d?Qg(u,d,I):Mu(u,Of,I,!0)}function D_(u,d){return u&&u.length?uh(u,mt(d)):r}var w_=bt(Zh);function Zh(u,d){return u&&u.length&&d&&d.length?el(u,d):u}function y_(u,d,_){return u&&u.length&&d&&d.length?el(u,d,nt(_,2)):u}function E_(u,d,_){return u&&u.length&&d&&d.length?el(u,d,r,_):u}var A_=ui(function(u,d){var _=u==null?0:u.length,E=$o(u,d);return lh(u,Ht(d,function(I){return si(I,_)?+I:I}).sort(bh)),E});function C_(u,d){var _=[];if(!(u&&u.length))return _;var E=-1,I=[],V=u.length;for(d=nt(d,3);++E<V;){var Y=u[E];d(Y,E,u)&&(_.push(Y),I.push(E))}return lh(u,I),_}function Dl(u){return u==null?u:_v.call(u)}function F_(u,d,_){var E=u==null?0:u.length;return E?(_&&typeof _!="number"&&Gr(u,d,_)?(d=0,_=E):(d=d==null?0:mt(d),_=_===r?E:mt(_)),En(u,d,_)):[]}function S_(u,d){return Zu(u,d)}function B_(u,d,_){return nl(u,d,nt(_,2))}function O_(u,d){var _=u==null?0:u.length;if(_){var E=Zu(u,d);if(E<_&&Tn(u[E],d))return E}return-1}function M_(u,d){return Zu(u,d,!0)}function P_(u,d,_){return nl(u,d,nt(_,2),!0)}function k_(u,d){var _=u==null?0:u.length;if(_){var E=Zu(u,d,!0)-1;if(Tn(u[E],d))return E}return-1}function T_(u){return u&&u.length?fh(u):[]}function I_(u,d){return u&&u.length?fh(u,nt(d,2)):[]}function x_(u){var d=u==null?0:u.length;return d?En(u,1,d):[]}function N_(u,d,_){return u&&u.length?(d=_||d===r?1:mt(d),En(u,0,d<0?0:d)):[]}function L_(u,d,_){var E=u==null?0:u.length;return E?(d=_||d===r?1:mt(d),d=E-d,En(u,d<0?0:d,E)):[]}function R_(u,d){return u&&u.length?Ju(u,nt(d,3),!1,!0):[]}function U_(u,d){return u&&u.length?Ju(u,nt(d,3)):[]}var V_=bt(function(u){return Ai(Or(u,1,lr,!0))}),j_=bt(function(u){var d=An(u);return lr(d)&&(d=r),Ai(Or(u,1,lr,!0),nt(d,2))}),z_=bt(function(u){var d=An(u);return d=typeof d=="function"?d:r,Ai(Or(u,1,lr,!0),r,d)});function q_(u){return u&&u.length?Ai(u):[]}function W_(u,d){return u&&u.length?Ai(u,nt(d,2)):[]}function H_(u,d){return d=typeof d=="function"?d:r,u&&u.length?Ai(u,r,d):[]}function wl(u){if(!(u&&u.length))return[];var d=0;return u=bi(u,function(_){if(lr(_))return d=mr(_.length,d),!0}),Ro(d,function(_){return Ht(u,xo(_))})}function Jh(u,d){if(!(u&&u.length))return[];var _=wl(u);return d==null?_:Ht(_,function(E){return on(d,r,E)})}var $_=bt(function(u,d){return lr(u)?su(u,d):[]}),G_=bt(function(u){return al(bi(u,lr))}),K_=bt(function(u){var d=An(u);return lr(d)&&(d=r),al(bi(u,lr),nt(d,2))}),Y_=bt(function(u){var d=An(u);return d=typeof d=="function"?d:r,al(bi(u,lr),r,d)}),Z_=bt(wl);function J_(u,d){return gh(u||[],d||[],uu)}function Q_(u,d){return gh(u||[],d||[],cu)}var X_=bt(function(u){var d=u.length,_=d>1?u[d-1]:r;return _=typeof _=="function"?(u.pop(),_):r,Jh(u,_)});function Qh(u){var d=L(u);return d.__chain__=!0,d}function e2(u,d){return d(u),u}function us(u,d){return d(u)}var t2=ui(function(u){var d=u.length,_=d?u[0]:0,E=this.__wrapped__,I=function(V){return $o(V,u)};return d>1||this.__actions__.length||!(E instanceof wt)||!si(_)?this.thru(I):(E=E.slice(_,+_+(d?1:0)),E.__actions__.push({func:us,args:[I],thisArg:r}),new wn(E,this.__chain__).thru(function(V){return d&&!V.length&&V.push(r),V}))});function r2(){return Qh(this)}function n2(){return new wn(this.value(),this.__chain__)}function i2(){this.__values__===r&&(this.__values__=h0(this.value()));var u=this.__index__>=this.__values__.length,d=u?r:this.__values__[this.__index__++];return{done:u,value:d}}function a2(){return this}function u2(u){for(var d,_=this;_ instanceof Hu;){var E=Hh(_);E.__index__=0,E.__values__=r,d?I.__wrapped__=E:d=E;var I=E;_=_.__wrapped__}return I.__wrapped__=u,d}function s2(){var u=this.__wrapped__;if(u instanceof wt){var d=u;return this.__actions__.length&&(d=new wt(this)),d=d.reverse(),d.__actions__.push({func:us,args:[Dl],thisArg:r}),new wn(d,this.__chain__)}return this.thru(Dl)}function o2(){return ph(this.__wrapped__,this.__actions__)}var l2=Qu(function(u,d,_){Tt.call(u,_)?++u[_]:ii(u,_,1)});function c2(u,d,_){var E=ht(u)?Sf:em;return _&&Gr(u,d,_)&&(d=r),E(u,nt(d,3))}function f2(u,d){var _=ht(u)?bi:Jf;return _(u,nt(d,3))}var h2=Ch($h),d2=Ch(Gh);function p2(u,d){return Or(ss(u,d),1)}function g2(u,d){return Or(ss(u,d),J)}function v2(u,d,_){return _=_===r?1:mt(_),Or(ss(u,d),_)}function Xh(u,d){var _=ht(u)?bn:Ei;return _(u,nt(d,3))}function e0(u,d){var _=ht(u)?xg:Zf;return _(u,nt(d,3))}var m2=Qu(function(u,d,_){Tt.call(u,_)?u[_].push(d):ii(u,_,[d])});function _2(u,d,_,E){u=Xr(u)?u:ba(u),_=_&&!E?mt(_):0;var I=u.length;return _<0&&(_=mr(I+_,0)),hs(u)?_<=I&&u.indexOf(d,_)>-1:!!I&&sa(u,d,_)>-1}var b2=bt(function(u,d,_){var E=-1,I=typeof d=="function",V=Xr(u)?le(u.length):[];return Ei(u,function(Y){V[++E]=I?on(d,Y,_):ou(Y,d,_)}),V}),D2=Qu(function(u,d,_){ii(u,_,d)});function ss(u,d){var _=ht(u)?Ht:nh;return _(u,nt(d,3))}function w2(u,d,_,E){return u==null?[]:(ht(d)||(d=d==null?[]:[d]),_=E?r:_,ht(_)||(_=_==null?[]:[_]),sh(u,d,_))}var y2=Qu(function(u,d,_){u[_?0:1].push(d)},function(){return[[],[]]});function E2(u,d,_){var E=ht(u)?To:Pf,I=arguments.length<3;return E(u,nt(d,4),_,I,Ei)}function A2(u,d,_){var E=ht(u)?Ng:Pf,I=arguments.length<3;return E(u,nt(d,4),_,I,Zf)}function C2(u,d){var _=ht(u)?bi:Jf;return _(u,cs(nt(d,3)))}function F2(u){var d=ht(u)?$f:_m;return d(u)}function S2(u,d,_){(_?Gr(u,d,_):d===r)?d=1:d=mt(d);var E=ht(u)?Yv:bm;return E(u,d)}function B2(u){var d=ht(u)?Zv:wm;return d(u)}function O2(u){if(u==null)return 0;if(Xr(u))return hs(u)?la(u):u.length;var d=Rr(u);return d==ct||d==Fr?u.size:Qo(u).length}function M2(u,d,_){var E=ht(u)?Io:ym;return _&&Gr(u,d,_)&&(d=r),E(u,nt(d,3))}var P2=bt(function(u,d){if(u==null)return[];var _=d.length;return _>1&&Gr(u,d[0],d[1])?d=[]:_>2&&Gr(d[0],d[1],d[2])&&(d=[d[0]]),sh(u,Or(d,1),[])}),os=fv||function(){return Br.Date.now()};function k2(u,d){if(typeof d!="function")throw new Dn(o);return u=mt(u),function(){if(--u<1)return d.apply(this,arguments)}}function t0(u,d,_){return d=_?r:d,d=u&&d==null?u.length:d,ai(u,O,r,r,r,r,d)}function r0(u,d){var _;if(typeof d!="function")throw new Dn(o);return u=mt(u),function(){return--u>0&&(_=d.apply(this,arguments)),u<=1&&(d=r),_}}var yl=bt(function(u,d,_){var E=m;if(_.length){var I=wi(_,ma(yl));E|=F}return ai(u,E,d,_,I)}),n0=bt(function(u,d,_){var E=m|D;if(_.length){var I=wi(_,ma(n0));E|=F}return ai(d,E,u,_,I)});function i0(u,d,_){d=_?r:d;var E=ai(u,y,r,r,r,r,r,d);return E.placeholder=i0.placeholder,E}function a0(u,d,_){d=_?r:d;var E=ai(u,A,r,r,r,r,r,d);return E.placeholder=a0.placeholder,E}function u0(u,d,_){var E,I,V,Y,ee,ae,Ae=0,Ce=!1,Me=!1,je=!0;if(typeof u!="function")throw new Dn(o);d=Cn(d)||0,Qt(_)&&(Ce=!!_.leading,Me="maxWait"in _,V=Me?mr(Cn(_.maxWait)||0,d):V,je="trailing"in _?!!_.trailing:je);function Ge(cr){var In=E,ci=I;return E=I=r,Ae=cr,Y=u.apply(ci,In),Y}function ut(cr){return Ae=cr,ee=du(Dt,d),Ce?Ge(cr):Y}function _t(cr){var In=cr-ae,ci=cr-Ae,C0=d-In;return Me?Lr(C0,V-ci):C0}function st(cr){var In=cr-ae,ci=cr-Ae;return ae===r||In>=d||In<0||Me&&ci>=V}function Dt(){var cr=os();if(st(cr))return Et(cr);ee=du(Dt,_t(cr))}function Et(cr){return ee=r,je&&E?Ge(cr):(E=I=r,Y)}function hn(){ee!==r&&vh(ee),Ae=0,E=ae=I=ee=r}function Kr(){return ee===r?Y:Et(os())}function dn(){var cr=os(),In=st(cr);if(E=arguments,I=this,ae=cr,In){if(ee===r)return ut(ae);if(Me)return vh(ee),ee=du(Dt,d),Ge(ae)}return ee===r&&(ee=du(Dt,d)),Y}return dn.cancel=hn,dn.flush=Kr,dn}var T2=bt(function(u,d){return Yf(u,1,d)}),I2=bt(function(u,d,_){return Yf(u,Cn(d)||0,_)});function x2(u){return ai(u,x)}function ls(u,d){if(typeof u!="function"||d!=null&&typeof d!="function")throw new Dn(o);var _=function(){var E=arguments,I=d?d.apply(this,E):E[0],V=_.cache;if(V.has(I))return V.get(I);var Y=u.apply(this,E);return _.cache=V.set(I,Y)||V,Y};return _.cache=new(ls.Cache||ni),_}ls.Cache=ni;function cs(u){if(typeof u!="function")throw new Dn(o);return function(){var d=arguments;switch(d.length){case 0:return!u.call(this);case 1:return!u.call(this,d[0]);case 2:return!u.call(this,d[0],d[1]);case 3:return!u.call(this,d[0],d[1],d[2])}return!u.apply(this,d)}}function N2(u){return r0(2,u)}var L2=Em(function(u,d){d=d.length==1&&ht(d[0])?Ht(d[0],ln(nt())):Ht(Or(d,1),ln(nt()));var _=d.length;return bt(function(E){for(var I=-1,V=Lr(E.length,_);++I<V;)E[I]=d[I].call(this,E[I]);return on(u,this,E)})}),El=bt(function(u,d){var _=wi(d,ma(El));return ai(u,F,r,d,_)}),s0=bt(function(u,d){var _=wi(d,ma(s0));return ai(u,P,r,d,_)}),R2=ui(function(u,d){return ai(u,C,r,r,r,d)});function U2(u,d){if(typeof u!="function")throw new Dn(o);return d=d===r?d:mt(d),bt(u,d)}function V2(u,d){if(typeof u!="function")throw new Dn(o);return d=d==null?0:mr(mt(d),0),bt(function(_){var E=_[d],I=Fi(_,0,d);return E&&Di(I,E),on(u,this,I)})}function j2(u,d,_){var E=!0,I=!0;if(typeof u!="function")throw new Dn(o);return Qt(_)&&(E="leading"in _?!!_.leading:E,I="trailing"in _?!!_.trailing:I),u0(u,d,{leading:E,maxWait:d,trailing:I})}function z2(u){return t0(u,1)}function q2(u,d){return El(sl(d),u)}function W2(){if(!arguments.length)return[];var u=arguments[0];return ht(u)?u:[u]}function H2(u){return yn(u,g)}function $2(u,d){return d=typeof d=="function"?d:r,yn(u,g,d)}function G2(u){return yn(u,f|g)}function K2(u,d){return d=typeof d=="function"?d:r,yn(u,f|g,d)}function Y2(u,d){return d==null||Kf(u,d,Er(d))}function Tn(u,d){return u===d||u!==u&&d!==d}var Z2=rs(Yo),J2=rs(function(u,d){return u>=d}),Ji=eh(function(){return arguments}())?eh:function(u){return ar(u)&&Tt.call(u,"callee")&&!Vf.call(u,"callee")},ht=le.isArray,Q2=wf?ln(wf):um;function Xr(u){return u!=null&&fs(u.length)&&!oi(u)}function lr(u){return ar(u)&&Xr(u)}function X2(u){return u===!0||u===!1||ar(u)&&$r(u)==tt}var Si=dv||Il,eb=yf?ln(yf):sm;function tb(u){return ar(u)&&u.nodeType===1&&!pu(u)}function rb(u){if(u==null)return!0;if(Xr(u)&&(ht(u)||typeof u=="string"||typeof u.splice=="function"||Si(u)||_a(u)||Ji(u)))return!u.length;var d=Rr(u);if(d==ct||d==Fr)return!u.size;if(hu(u))return!Qo(u).length;for(var _ in u)if(Tt.call(u,_))return!1;return!0}function nb(u,d){return lu(u,d)}function ib(u,d,_){_=typeof _=="function"?_:r;var E=_?_(u,d):r;return E===r?lu(u,d,r,_):!!E}function Al(u){if(!ar(u))return!1;var d=$r(u);return d==St||d==rt||typeof u.message=="string"&&typeof u.name=="string"&&!pu(u)}function ab(u){return typeof u=="number"&&zf(u)}function oi(u){if(!Qt(u))return!1;var d=$r(u);return d==Bt||d==vt||d==ze||d==et}function o0(u){return typeof u=="number"&&u==mt(u)}function fs(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=Q}function Qt(u){var d=typeof u;return u!=null&&(d=="object"||d=="function")}function ar(u){return u!=null&&typeof u=="object"}var l0=Ef?ln(Ef):lm;function ub(u,d){return u===d||Jo(u,d,pl(d))}function sb(u,d,_){return _=typeof _=="function"?_:r,Jo(u,d,pl(d),_)}function ob(u){return c0(u)&&u!=+u}function lb(u){if($m(u))throw new ft(a);return th(u)}function cb(u){return u===null}function fb(u){return u==null}function c0(u){return typeof u=="number"||ar(u)&&$r(u)==xt}function pu(u){if(!ar(u)||$r(u)!=Ut)return!1;var d=Ru(u);if(d===null)return!0;var _=Tt.call(d,"constructor")&&d.constructor;return typeof _=="function"&&_ instanceof _&&Iu.call(_)==sv}var Cl=Af?ln(Af):cm;function hb(u){return o0(u)&&u>=-Q&&u<=Q}var f0=Cf?ln(Cf):fm;function hs(u){return typeof u=="string"||!ht(u)&&ar(u)&&$r(u)==Bn}function fn(u){return typeof u=="symbol"||ar(u)&&$r(u)==K}var _a=Ff?ln(Ff):hm;function db(u){return u===r}function pb(u){return ar(u)&&Rr(u)==ie}function gb(u){return ar(u)&&$r(u)==ge}var vb=rs(Xo),mb=rs(function(u,d){return u<=d});function h0(u){if(!u)return[];if(Xr(u))return hs(u)?Pn(u):Qr(u);if(tu&&u[tu])return Yg(u[tu]());var d=Rr(u),_=d==ct?Vo:d==Fr?Pu:ba;return _(u)}function li(u){if(!u)return u===0?u:0;if(u=Cn(u),u===J||u===-J){var d=u<0?-1:1;return d*te}return u===u?u:0}function mt(u){var d=li(u),_=d%1;return d===d?_?d-_:d:0}function d0(u){return u?Gi(mt(u),0,me):0}function Cn(u){if(typeof u=="number")return u;if(fn(u))return ce;if(Qt(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=Qt(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=kf(u);var _=Wa.test(u);return _||$a.test(u)?kg(u.slice(2),_?2:8):qa.test(u)?ce:+u}function p0(u){return Hn(u,en(u))}function _b(u){return u?Gi(mt(u),-Q,Q):u===0?u:0}function Pt(u){return u==null?"":cn(u)}var bb=ga(function(u,d){if(hu(d)||Xr(d)){Hn(d,Er(d),u);return}for(var _ in d)Tt.call(d,_)&&uu(u,_,d[_])}),g0=ga(function(u,d){Hn(d,en(d),u)}),ds=ga(function(u,d,_,E){Hn(d,en(d),u,E)}),Db=ga(function(u,d,_,E){Hn(d,Er(d),u,E)}),wb=ui($o);function yb(u,d){var _=pa(u);return d==null?_:Gf(_,d)}var Eb=bt(function(u,d){u=Nt(u);var _=-1,E=d.length,I=E>2?d[2]:r;for(I&&Gr(d[0],d[1],I)&&(E=1);++_<E;)for(var V=d[_],Y=en(V),ee=-1,ae=Y.length;++ee<ae;){var Ae=Y[ee],Ce=u[Ae];(Ce===r||Tn(Ce,fa[Ae])&&!Tt.call(u,Ae))&&(u[Ae]=V[Ae])}return u}),Ab=bt(function(u){return u.push(r,kh),on(v0,r,u)});function Cb(u,d){return Bf(u,nt(d,3),Wn)}function Fb(u,d){return Bf(u,nt(d,3),Ko)}function Sb(u,d){return u==null?u:Go(u,nt(d,3),en)}function Bb(u,d){return u==null?u:Qf(u,nt(d,3),en)}function Ob(u,d){return u&&Wn(u,nt(d,3))}function Mb(u,d){return u&&Ko(u,nt(d,3))}function Pb(u){return u==null?[]:Ku(u,Er(u))}function kb(u){return u==null?[]:Ku(u,en(u))}function Fl(u,d,_){var E=u==null?r:Ki(u,d);return E===r?_:E}function Tb(u,d){return u!=null&&xh(u,d,rm)}function Sl(u,d){return u!=null&&xh(u,d,nm)}var Ib=Sh(function(u,d,_){d!=null&&typeof d.toString!="function"&&(d=xu.call(d)),u[d]=_},Ol(tn)),xb=Sh(function(u,d,_){d!=null&&typeof d.toString!="function"&&(d=xu.call(d)),Tt.call(u,d)?u[d].push(_):u[d]=[_]},nt),Nb=bt(ou);function Er(u){return Xr(u)?Hf(u):Qo(u)}function en(u){return Xr(u)?Hf(u,!0):dm(u)}function Lb(u,d){var _={};return d=nt(d,3),Wn(u,function(E,I,V){ii(_,d(E,I,V),E)}),_}function Rb(u,d){var _={};return d=nt(d,3),Wn(u,function(E,I,V){ii(_,I,d(E,I,V))}),_}var Ub=ga(function(u,d,_){Yu(u,d,_)}),v0=ga(function(u,d,_,E){Yu(u,d,_,E)}),Vb=ui(function(u,d){var _={};if(u==null)return _;var E=!1;d=Ht(d,function(V){return V=Ci(V,u),E||(E=V.length>1),V}),Hn(u,hl(u),_),E&&(_=yn(_,f|p|g,Im));for(var I=d.length;I--;)il(_,d[I]);return _});function jb(u,d){return m0(u,cs(nt(d)))}var zb=ui(function(u,d){return u==null?{}:gm(u,d)});function m0(u,d){if(u==null)return{};var _=Ht(hl(u),function(E){return[E]});return d=nt(d),oh(u,_,function(E,I){return d(E,I[0])})}function qb(u,d,_){d=Ci(d,u);var E=-1,I=d.length;for(I||(I=1,u=r);++E<I;){var V=u==null?r:u[$n(d[E])];V===r&&(E=I,V=_),u=oi(V)?V.call(u):V}return u}function Wb(u,d,_){return u==null?u:cu(u,d,_)}function Hb(u,d,_,E){return E=typeof E=="function"?E:r,u==null?u:cu(u,d,_,E)}var _0=Mh(Er),b0=Mh(en);function $b(u,d,_){var E=ht(u),I=E||Si(u)||_a(u);if(d=nt(d,4),_==null){var V=u&&u.constructor;I?_=E?new V:[]:Qt(u)?_=oi(V)?pa(Ru(u)):{}:_={}}return(I?bn:Wn)(u,function(Y,ee,ae){return d(_,Y,ee,ae)}),_}function Gb(u,d){return u==null?!0:il(u,d)}function Kb(u,d,_){return u==null?u:dh(u,d,sl(_))}function Yb(u,d,_,E){return E=typeof E=="function"?E:r,u==null?u:dh(u,d,sl(_),E)}function ba(u){return u==null?[]:Uo(u,Er(u))}function Zb(u){return u==null?[]:Uo(u,en(u))}function Jb(u,d,_){return _===r&&(_=d,d=r),_!==r&&(_=Cn(_),_=_===_?_:0),d!==r&&(d=Cn(d),d=d===d?d:0),Gi(Cn(u),d,_)}function Qb(u,d,_){return d=li(d),_===r?(_=d,d=0):_=li(_),u=Cn(u),im(u,d,_)}function Xb(u,d,_){if(_&&typeof _!="boolean"&&Gr(u,d,_)&&(d=_=r),_===r&&(typeof d=="boolean"?(_=d,d=r):typeof u=="boolean"&&(_=u,u=r)),u===r&&d===r?(u=0,d=1):(u=li(u),d===r?(d=u,u=0):d=li(d)),u>d){var E=u;u=d,d=E}if(_||u%1||d%1){var I=qf();return Lr(u+I*(d-u+Pg("1e-"+((I+"").length-1))),d)}return tl(u,d)}var eD=va(function(u,d,_){return d=d.toLowerCase(),u+(_?D0(d):d)});function D0(u){return Bl(Pt(u).toLowerCase())}function w0(u){return u=Pt(u),u&&u.replace(Ka,Wg).replace(wg,"")}function tD(u,d,_){u=Pt(u),d=cn(d);var E=u.length;_=_===r?E:Gi(mt(_),0,E);var I=_;return _-=d.length,_>=0&&u.slice(_,I)==d}function rD(u){return u=Pt(u),u&&gn.test(u)?u.replace(fr,Hg):u}function nD(u){return u=Pt(u),u&&Ua.test(u)?u.replace(Ui,"\\$&"):u}var iD=va(function(u,d,_){return u+(_?"-":"")+d.toLowerCase()}),aD=va(function(u,d,_){return u+(_?" ":"")+d.toLowerCase()}),uD=Ah("toLowerCase");function sD(u,d,_){u=Pt(u),d=mt(d);var E=d?la(u):0;if(!d||E>=d)return u;var I=(d-E)/2;return ts(zu(I),_)+u+ts(ju(I),_)}function oD(u,d,_){u=Pt(u),d=mt(d);var E=d?la(u):0;return d&&E<d?u+ts(d-E,_):u}function lD(u,d,_){u=Pt(u),d=mt(d);var E=d?la(u):0;return d&&E<d?ts(d-E,_)+u:u}function cD(u,d,_){return _||d==null?d=0:d&&(d=+d),mv(Pt(u).replace(Sr,""),d||0)}function fD(u,d,_){return(_?Gr(u,d,_):d===r)?d=1:d=mt(d),rl(Pt(u),d)}function hD(){var u=arguments,d=Pt(u[0]);return u.length<3?d:d.replace(u[1],u[2])}var dD=va(function(u,d,_){return u+(_?"_":"")+d.toLowerCase()});function pD(u,d,_){return _&&typeof _!="number"&&Gr(u,d,_)&&(d=_=r),_=_===r?me:_>>>0,_?(u=Pt(u),u&&(typeof d=="string"||d!=null&&!Cl(d))&&(d=cn(d),!d&&oa(u))?Fi(Pn(u),0,_):u.split(d,_)):[]}var gD=va(function(u,d,_){return u+(_?" ":"")+Bl(d)});function vD(u,d,_){return u=Pt(u),_=_==null?0:Gi(mt(_),0,u.length),d=cn(d),u.slice(_,_+d.length)==d}function mD(u,d,_){var E=L.templateSettings;_&&Gr(u,d,_)&&(d=r),u=Pt(u),d=ds({},d,E,Ph);var I=ds({},d.imports,E.imports,Ph),V=Er(I),Y=Uo(I,V),ee,ae,Ae=0,Ce=d.interpolate||mi,Me="__p += '",je=jo((d.escape||mi).source+"|"+Ce.source+"|"+(Ce===Xn?za:mi).source+"|"+(d.evaluate||mi).source+"|$","g"),Ge="//# sourceURL="+(Tt.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Fg+"]")+`
`;u.replace(je,function(st,Dt,Et,hn,Kr,dn){return Et||(Et=hn),Me+=u.slice(Ae,dn).replace(Ya,$g),Dt&&(ee=!0,Me+=`' +
__e(`+Dt+`) +
'`),Kr&&(ae=!0,Me+=`';
`+Kr+`;
__p += '`),Et&&(Me+=`' +
((__t = (`+Et+`)) == null ? '' : __t) +
'`),Ae=dn+st.length,st}),Me+=`';
`;var ut=Tt.call(d,"variable")&&d.variable;if(!ut)Me=`with (obj) {
`+Me+`
}
`;else if(Vi.test(ut))throw new ft(s);Me=(ae?Me.replace(Zt,""):Me).replace(Dr,"$1").replace(Jt,"$1;"),Me="function("+(ut||"obj")+`) {
`+(ut?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ee?", __e = _.escape":"")+(ae?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Me+`return __p
}`;var _t=E0(function(){return Mt(V,Ge+"return "+Me).apply(r,Y)});if(_t.source=Me,Al(_t))throw _t;return _t}function _D(u){return Pt(u).toLowerCase()}function bD(u){return Pt(u).toUpperCase()}function DD(u,d,_){if(u=Pt(u),u&&(_||d===r))return kf(u);if(!u||!(d=cn(d)))return u;var E=Pn(u),I=Pn(d),V=Tf(E,I),Y=If(E,I)+1;return Fi(E,V,Y).join("")}function wD(u,d,_){if(u=Pt(u),u&&(_||d===r))return u.slice(0,Nf(u)+1);if(!u||!(d=cn(d)))return u;var E=Pn(u),I=If(E,Pn(d))+1;return Fi(E,0,I).join("")}function yD(u,d,_){if(u=Pt(u),u&&(_||d===r))return u.replace(Sr,"");if(!u||!(d=cn(d)))return u;var E=Pn(u),I=Tf(E,Pn(d));return Fi(E,I).join("")}function ED(u,d){var _=z,E=G;if(Qt(d)){var I="separator"in d?d.separator:I;_="length"in d?mt(d.length):_,E="omission"in d?cn(d.omission):E}u=Pt(u);var V=u.length;if(oa(u)){var Y=Pn(u);V=Y.length}if(_>=V)return u;var ee=_-la(E);if(ee<1)return E;var ae=Y?Fi(Y,0,ee).join(""):u.slice(0,ee);if(I===r)return ae+E;if(Y&&(ee+=ae.length-ee),Cl(I)){if(u.slice(ee).search(I)){var Ae,Ce=ae;for(I.global||(I=jo(I.source,Pt(ia.exec(I))+"g")),I.lastIndex=0;Ae=I.exec(Ce);)var Me=Ae.index;ae=ae.slice(0,Me===r?ee:Me)}}else if(u.indexOf(cn(I),ee)!=ee){var je=ae.lastIndexOf(I);je>-1&&(ae=ae.slice(0,je))}return ae+E}function AD(u){return u=Pt(u),u&&hr.test(u)?u.replace(wr,Xg):u}var CD=va(function(u,d,_){return u+(_?" ":"")+d.toUpperCase()}),Bl=Ah("toUpperCase");function y0(u,d,_){return u=Pt(u),d=_?r:d,d===r?Kg(u)?rv(u):Ug(u):u.match(d)||[]}var E0=bt(function(u,d){try{return on(u,r,d)}catch(_){return Al(_)?_:new ft(_)}}),FD=ui(function(u,d){return bn(d,function(_){_=$n(_),ii(u,_,yl(u[_],u))}),u});function SD(u){var d=u==null?0:u.length,_=nt();return u=d?Ht(u,function(E){if(typeof E[1]!="function")throw new Dn(o);return[_(E[0]),E[1]]}):[],bt(function(E){for(var I=-1;++I<d;){var V=u[I];if(on(V[0],this,E))return on(V[1],this,E)}})}function BD(u){return Xv(yn(u,f))}function Ol(u){return function(){return u}}function OD(u,d){return u==null||u!==u?d:u}var MD=Fh(),PD=Fh(!0);function tn(u){return u}function Ml(u){return rh(typeof u=="function"?u:yn(u,f))}function kD(u){return ih(yn(u,f))}function TD(u,d){return ah(u,yn(d,f))}var ID=bt(function(u,d){return function(_){return ou(_,u,d)}}),xD=bt(function(u,d){return function(_){return ou(u,_,d)}});function Pl(u,d,_){var E=Er(d),I=Ku(d,E);_==null&&!(Qt(d)&&(I.length||!E.length))&&(_=d,d=u,u=this,I=Ku(d,Er(d)));var V=!(Qt(_)&&"chain"in _)||!!_.chain,Y=oi(u);return bn(I,function(ee){var ae=d[ee];u[ee]=ae,Y&&(u.prototype[ee]=function(){var Ae=this.__chain__;if(V||Ae){var Ce=u(this.__wrapped__),Me=Ce.__actions__=Qr(this.__actions__);return Me.push({func:ae,args:arguments,thisArg:u}),Ce.__chain__=Ae,Ce}return ae.apply(u,Di([this.value()],arguments))})}),u}function ND(){return Br._===this&&(Br._=ov),this}function kl(){}function LD(u){return u=mt(u),bt(function(d){return uh(d,u)})}var RD=ll(Ht),UD=ll(Sf),VD=ll(Io);function A0(u){return vl(u)?xo($n(u)):vm(u)}function jD(u){return function(d){return u==null?r:Ki(u,d)}}var zD=Bh(),qD=Bh(!0);function Tl(){return[]}function Il(){return!1}function WD(){return{}}function HD(){return""}function $D(){return!0}function GD(u,d){if(u=mt(u),u<1||u>Q)return[];var _=me,E=Lr(u,me);d=nt(d),u-=me;for(var I=Ro(E,d);++_<u;)d(_);return I}function KD(u){return ht(u)?Ht(u,$n):fn(u)?[u]:Qr(Wh(Pt(u)))}function YD(u){var d=++uv;return Pt(u)+d}var ZD=es(function(u,d){return u+d},0),JD=cl("ceil"),QD=es(function(u,d){return u/d},1),XD=cl("floor");function ew(u){return u&&u.length?Gu(u,tn,Yo):r}function tw(u,d){return u&&u.length?Gu(u,nt(d,2),Yo):r}function rw(u){return Mf(u,tn)}function nw(u,d){return Mf(u,nt(d,2))}function iw(u){return u&&u.length?Gu(u,tn,Xo):r}function aw(u,d){return u&&u.length?Gu(u,nt(d,2),Xo):r}var uw=es(function(u,d){return u*d},1),sw=cl("round"),ow=es(function(u,d){return u-d},0);function lw(u){return u&&u.length?Lo(u,tn):0}function cw(u,d){return u&&u.length?Lo(u,nt(d,2)):0}return L.after=k2,L.ary=t0,L.assign=bb,L.assignIn=g0,L.assignInWith=ds,L.assignWith=Db,L.at=wb,L.before=r0,L.bind=yl,L.bindAll=FD,L.bindKey=n0,L.castArray=W2,L.chain=Qh,L.chunk=Xm,L.compact=e_,L.concat=t_,L.cond=SD,L.conforms=BD,L.constant=Ol,L.countBy=l2,L.create=yb,L.curry=i0,L.curryRight=a0,L.debounce=u0,L.defaults=Eb,L.defaultsDeep=Ab,L.defer=T2,L.delay=I2,L.difference=r_,L.differenceBy=n_,L.differenceWith=i_,L.drop=a_,L.dropRight=u_,L.dropRightWhile=s_,L.dropWhile=o_,L.fill=l_,L.filter=f2,L.flatMap=p2,L.flatMapDeep=g2,L.flatMapDepth=v2,L.flatten=Kh,L.flattenDeep=c_,L.flattenDepth=f_,L.flip=x2,L.flow=MD,L.flowRight=PD,L.fromPairs=h_,L.functions=Pb,L.functionsIn=kb,L.groupBy=m2,L.initial=p_,L.intersection=g_,L.intersectionBy=v_,L.intersectionWith=m_,L.invert=Ib,L.invertBy=xb,L.invokeMap=b2,L.iteratee=Ml,L.keyBy=D2,L.keys=Er,L.keysIn=en,L.map=ss,L.mapKeys=Lb,L.mapValues=Rb,L.matches=kD,L.matchesProperty=TD,L.memoize=ls,L.merge=Ub,L.mergeWith=v0,L.method=ID,L.methodOf=xD,L.mixin=Pl,L.negate=cs,L.nthArg=LD,L.omit=Vb,L.omitBy=jb,L.once=N2,L.orderBy=w2,L.over=RD,L.overArgs=L2,L.overEvery=UD,L.overSome=VD,L.partial=El,L.partialRight=s0,L.partition=y2,L.pick=zb,L.pickBy=m0,L.property=A0,L.propertyOf=jD,L.pull=w_,L.pullAll=Zh,L.pullAllBy=y_,L.pullAllWith=E_,L.pullAt=A_,L.range=zD,L.rangeRight=qD,L.rearg=R2,L.reject=C2,L.remove=C_,L.rest=U2,L.reverse=Dl,L.sampleSize=S2,L.set=Wb,L.setWith=Hb,L.shuffle=B2,L.slice=F_,L.sortBy=P2,L.sortedUniq=T_,L.sortedUniqBy=I_,L.split=pD,L.spread=V2,L.tail=x_,L.take=N_,L.takeRight=L_,L.takeRightWhile=R_,L.takeWhile=U_,L.tap=e2,L.throttle=j2,L.thru=us,L.toArray=h0,L.toPairs=_0,L.toPairsIn=b0,L.toPath=KD,L.toPlainObject=p0,L.transform=$b,L.unary=z2,L.union=V_,L.unionBy=j_,L.unionWith=z_,L.uniq=q_,L.uniqBy=W_,L.uniqWith=H_,L.unset=Gb,L.unzip=wl,L.unzipWith=Jh,L.update=Kb,L.updateWith=Yb,L.values=ba,L.valuesIn=Zb,L.without=$_,L.words=y0,L.wrap=q2,L.xor=G_,L.xorBy=K_,L.xorWith=Y_,L.zip=Z_,L.zipObject=J_,L.zipObjectDeep=Q_,L.zipWith=X_,L.entries=_0,L.entriesIn=b0,L.extend=g0,L.extendWith=ds,Pl(L,L),L.add=ZD,L.attempt=E0,L.camelCase=eD,L.capitalize=D0,L.ceil=JD,L.clamp=Jb,L.clone=H2,L.cloneDeep=G2,L.cloneDeepWith=K2,L.cloneWith=$2,L.conformsTo=Y2,L.deburr=w0,L.defaultTo=OD,L.divide=QD,L.endsWith=tD,L.eq=Tn,L.escape=rD,L.escapeRegExp=nD,L.every=c2,L.find=h2,L.findIndex=$h,L.findKey=Cb,L.findLast=d2,L.findLastIndex=Gh,L.findLastKey=Fb,L.floor=XD,L.forEach=Xh,L.forEachRight=e0,L.forIn=Sb,L.forInRight=Bb,L.forOwn=Ob,L.forOwnRight=Mb,L.get=Fl,L.gt=Z2,L.gte=J2,L.has=Tb,L.hasIn=Sl,L.head=Yh,L.identity=tn,L.includes=_2,L.indexOf=d_,L.inRange=Qb,L.invoke=Nb,L.isArguments=Ji,L.isArray=ht,L.isArrayBuffer=Q2,L.isArrayLike=Xr,L.isArrayLikeObject=lr,L.isBoolean=X2,L.isBuffer=Si,L.isDate=eb,L.isElement=tb,L.isEmpty=rb,L.isEqual=nb,L.isEqualWith=ib,L.isError=Al,L.isFinite=ab,L.isFunction=oi,L.isInteger=o0,L.isLength=fs,L.isMap=l0,L.isMatch=ub,L.isMatchWith=sb,L.isNaN=ob,L.isNative=lb,L.isNil=fb,L.isNull=cb,L.isNumber=c0,L.isObject=Qt,L.isObjectLike=ar,L.isPlainObject=pu,L.isRegExp=Cl,L.isSafeInteger=hb,L.isSet=f0,L.isString=hs,L.isSymbol=fn,L.isTypedArray=_a,L.isUndefined=db,L.isWeakMap=pb,L.isWeakSet=gb,L.join=__,L.kebabCase=iD,L.last=An,L.lastIndexOf=b_,L.lowerCase=aD,L.lowerFirst=uD,L.lt=vb,L.lte=mb,L.max=ew,L.maxBy=tw,L.mean=rw,L.meanBy=nw,L.min=iw,L.minBy=aw,L.stubArray=Tl,L.stubFalse=Il,L.stubObject=WD,L.stubString=HD,L.stubTrue=$D,L.multiply=uw,L.nth=D_,L.noConflict=ND,L.noop=kl,L.now=os,L.pad=sD,L.padEnd=oD,L.padStart=lD,L.parseInt=cD,L.random=Xb,L.reduce=E2,L.reduceRight=A2,L.repeat=fD,L.replace=hD,L.result=qb,L.round=sw,L.runInContext=ne,L.sample=F2,L.size=O2,L.snakeCase=dD,L.some=M2,L.sortedIndex=S_,L.sortedIndexBy=B_,L.sortedIndexOf=O_,L.sortedLastIndex=M_,L.sortedLastIndexBy=P_,L.sortedLastIndexOf=k_,L.startCase=gD,L.startsWith=vD,L.subtract=ow,L.sum=lw,L.sumBy=cw,L.template=mD,L.times=GD,L.toFinite=li,L.toInteger=mt,L.toLength=d0,L.toLower=_D,L.toNumber=Cn,L.toSafeInteger=_b,L.toString=Pt,L.toUpper=bD,L.trim=DD,L.trimEnd=wD,L.trimStart=yD,L.truncate=ED,L.unescape=AD,L.uniqueId=YD,L.upperCase=CD,L.upperFirst=Bl,L.each=Xh,L.eachRight=e0,L.first=Yh,Pl(L,function(){var u={};return Wn(L,function(d,_){Tt.call(L.prototype,_)||(u[_]=d)}),u}(),{chain:!1}),L.VERSION=n,bn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){L[u].placeholder=L}),bn(["drop","take"],function(u,d){wt.prototype[u]=function(_){_=_===r?1:mr(mt(_),0);var E=this.__filtered__&&!d?new wt(this):this.clone();return E.__filtered__?E.__takeCount__=Lr(_,E.__takeCount__):E.__views__.push({size:Lr(_,me),type:u+(E.__dir__<0?"Right":"")}),E},wt.prototype[u+"Right"]=function(_){return this.reverse()[u](_).reverse()}}),bn(["filter","map","takeWhile"],function(u,d){var _=d+1,E=_==N||_==j;wt.prototype[u]=function(I){var V=this.clone();return V.__iteratees__.push({iteratee:nt(I,3),type:_}),V.__filtered__=V.__filtered__||E,V}}),bn(["head","last"],function(u,d){var _="take"+(d?"Right":"");wt.prototype[u]=function(){return this[_](1).value()[0]}}),bn(["initial","tail"],function(u,d){var _="drop"+(d?"":"Right");wt.prototype[u]=function(){return this.__filtered__?new wt(this):this[_](1)}}),wt.prototype.compact=function(){return this.filter(tn)},wt.prototype.find=function(u){return this.filter(u).head()},wt.prototype.findLast=function(u){return this.reverse().find(u)},wt.prototype.invokeMap=bt(function(u,d){return typeof u=="function"?new wt(this):this.map(function(_){return ou(_,u,d)})}),wt.prototype.reject=function(u){return this.filter(cs(nt(u)))},wt.prototype.slice=function(u,d){u=mt(u);var _=this;return _.__filtered__&&(u>0||d<0)?new wt(_):(u<0?_=_.takeRight(-u):u&&(_=_.drop(u)),d!==r&&(d=mt(d),_=d<0?_.dropRight(-d):_.take(d-u)),_)},wt.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},wt.prototype.toArray=function(){return this.take(me)},Wn(wt.prototype,function(u,d){var _=/^(?:filter|find|map|reject)|While$/.test(d),E=/^(?:head|last)$/.test(d),I=L[E?"take"+(d=="last"?"Right":""):d],V=E||/^find/.test(d);I&&(L.prototype[d]=function(){var Y=this.__wrapped__,ee=E?[1]:arguments,ae=Y instanceof wt,Ae=ee[0],Ce=ae||ht(Y),Me=function(Dt){var Et=I.apply(L,Di([Dt],ee));return E&&je?Et[0]:Et};Ce&&_&&typeof Ae=="function"&&Ae.length!=1&&(ae=Ce=!1);var je=this.__chain__,Ge=!!this.__actions__.length,ut=V&&!je,_t=ae&&!Ge;if(!V&&Ce){Y=_t?Y:new wt(this);var st=u.apply(Y,ee);return st.__actions__.push({func:us,args:[Me],thisArg:r}),new wn(st,je)}return ut&&_t?u.apply(this,ee):(st=this.thru(Me),ut?E?st.value()[0]:st.value():st)})}),bn(["pop","push","shift","sort","splice","unshift"],function(u){var d=ku[u],_=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",E=/^(?:pop|shift)$/.test(u);L.prototype[u]=function(){var I=arguments;if(E&&!this.__chain__){var V=this.value();return d.apply(ht(V)?V:[],I)}return this[_](function(Y){return d.apply(ht(Y)?Y:[],I)})}}),Wn(wt.prototype,function(u,d){var _=L[d];if(_){var E=_.name+"";Tt.call(da,E)||(da[E]=[]),da[E].push({name:d,func:_})}}),da[Xu(r,D).name]=[{name:"wrapper",func:r}],wt.prototype.clone=Av,wt.prototype.reverse=Cv,wt.prototype.value=Fv,L.prototype.at=t2,L.prototype.chain=r2,L.prototype.commit=n2,L.prototype.next=i2,L.prototype.plant=u2,L.prototype.reverse=s2,L.prototype.toJSON=L.prototype.valueOf=L.prototype.value=o2,L.prototype.first=L.prototype.head,tu&&(L.prototype[tu]=a2),L},ca=nv();qi?((qi.exports=ca)._=ca,Mo._=ca):Br._=ca}).call(dr)})(l7,io);const c7=io,dc="panelMode";function f7(){const t=rr("select"),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[dc]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[dc]=a,r(a))},get:()=>At(t),delete:()=>{i&&(delete localStorage[dc],r("select"))}}}const pi=f7();function mp(t,e,r){const n=t.slice();return n[7]=e[r][0],n[8]=e[r][1],n}function _p(t,e,r){const n=t.slice();return n[11]=e[r][0],n[12]=e[r][1],n}function bp(t){let e=t[12].text+"",r,n,i,a;return{c(){r=Fe(e),n=W("b"),i=Fe("::"),a=we()},l(o){r=Se(o,e),n=H(o,"B",{});var s=U(n);i=Se(s,"::"),s.forEach(M),a=ye(o)},m(o,s){ue(o,r,s),ue(o,n,s),T(n,i),ue(o,a,s)},p(o,s){s&1&&e!==(e=o[12].text+"")&&zt(r,e)},d(o){o&&M(r),o&&M(n),o&&M(a)}}}function Dp(t,e){let r,n,i,a,o,s=Object.entries(e[8].weightedPrompts),l=[];for(let c=0;c<s.length;c+=1)l[c]=bp(_p(e,s,c));function h(){return e[5](e[7],e[8])}return{key:t,first:null,c(){r=W("li"),n=W("a");for(let c=0;c<l.length;c+=1)l[c].c();i=we(),this.h()},l(c){r=H(c,"LI",{});var f=U(r);n=H(f,"A",{class:!0});var p=U(n);for(let g=0;g<l.length;g+=1)l[g].l(p);p.forEach(M),i=ye(f),f.forEach(M),this.h()},h(){B(n,"class","text-xs inline-block"),Ye(n,"active",e[1]===e[7]),this.first=r},m(c,f){ue(c,r,f),T(r,n);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(n,null);T(r,i),a||(o=_e(n,"click",h),a=!0)},p(c,f){if(e=c,f&5){s=Object.entries(e[8].weightedPrompts);let p;for(p=0;p<s.length;p+=1){const g=_p(e,s,p);l[p]?l[p].p(g,f):(l[p]=bp(g),l[p].c(),l[p].m(n,null))}for(;p<l.length;p+=1)l[p].d(1);l.length=s.length}f&7&&Ye(n,"active",e[1]===e[7])},d(c){c&&M(r),Au(l,c),a=!1,o()}}}function h7(t){let e,r,n,i,a,o=[],s=new Map,l,h,c=t[2](t[0],wp,"desc");const f=p=>p[7];for(let p=0;p<c.length;p+=1){let g=mp(t,c,p),b=f(g);s.set(b,o[p]=Dp(b,g))}return{c(){e=W("ul"),r=W("li"),n=W("a"),i=Fe("New +"),a=we();for(let p=0;p<o.length;p+=1)o[p].c();this.h()},l(p){e=H(p,"UL",{class:!0});var g=U(e);r=H(g,"LI",{});var b=U(r);n=H(b,"A",{class:!0});var v=U(n);i=Se(v,"New +"),v.forEach(M),b.forEach(M),a=ye(g);for(let m=0;m<o.length;m+=1)o[m].l(g);g.forEach(M),this.h()},h(){B(n,"class","text-xs inline-block"),B(e,"class","menu h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(p,g){ue(p,e,g),T(e,r),T(r,n),T(n,i),T(e,a);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(e,null);l||(h=_e(n,"click",t[3]),l=!0)},p(p,[g]){g&23&&(c=p[2](p[0],wp,"desc"),o=Un(o,g,f,1,p,c,s,e,Jn,Dp,null,mp))},i:Pe,o:Pe,d(p){p&&M(e);for(let g=0;g<o.length;g+=1)o[g].d();l=!1,h()}}}const wp=t=>t[1].date;function d7(t,e,r){let n,i,a;qe(t,Ke,c=>r(6,n=c)),qe(t,Aw,c=>r(0,i=c)),qe(t,Xi,c=>r(1,a=c));const{orderBy:o}=c7;function s(){Xi.delete(),Ke.update(Oi({},n.promptLimit,n.weightMode)),pi.update("edit")}function l(c,f){Xi.update(c),Ke.update({...f}),pi.update("edit")}return[i,a,o,s,l,(c,f)=>l(c,f)]}class p7 extends Je{constructor(e){super(),Qe(this,e,d7,h7,Xe,{})}}function yp(t,e,r){const n=t.slice();return n[21]=e[r].id,n[22]=e[r].text,n}function Ep(t,e){let r,n,i,a,o;function s(...h){return e[10](e[21],...h)}function l(...h){return e[11](e[21],...h)}return{key:t,first:null,c(){r=W("li"),n=W("input"),this.h()},l(h){r=H(h,"LI",{class:!0});var c=U(r);n=H(c,"INPUT",{type:!0,placeholder:!0,class:!0}),c.forEach(M),this.h()},h(){n.value=i=e[22],B(n,"type","text"),B(n,"placeholder",""),B(n,"class","input input-bordered input-sm w-full"),B(r,"class","p-1"),this.first=r},m(h,c){ue(h,r,c),T(r,n),a||(o=[_e(n,"input",s),_e(n,"keydown",l),_e(n,"keyup",e[12])],a=!0)},p(h,c){e=h,c&4&&i!==(i=e[22])&&n.value!==i&&(n.value=i)},d(h){h&&M(r),a=!1,Rt(o)}}}function g7(t){let e,r,n,i,a,o,s,l,h,c,f,p=[],g=new Map,b,v,m,D,S,y,A,F,P,O,C,x,z=t[2];const G=Z=>Z[21];for(let Z=0;Z<z.length;Z+=1){let R=yp(t,z,Z),N=G(R);g.set(N,p[Z]=Ep(N,R))}return{c(){e=W("div"),r=W("button"),n=Fe("Paste"),i=we(),a=W("button"),o=Fe("Save"),s=we(),l=W("button"),h=Fe("Delete"),c=we(),f=W("ul");for(let Z=0;Z<p.length;Z+=1)p[Z].c();b=we(),v=W("li"),m=W("input"),D=we(),S=W("div"),y=W("p"),A=Fe("Shift+Enter to add a line"),F=we(),P=W("p"),O=Fe("Bksp to remove an empty line"),this.h()},l(Z){e=H(Z,"DIV",{class:!0});var R=U(e);r=H(R,"BUTTON",{class:!0});var N=U(r);n=Se(N,"Paste"),N.forEach(M),i=ye(R),a=H(R,"BUTTON",{class:!0});var q=U(a);o=Se(q,"Save"),q.forEach(M),s=ye(R),l=H(R,"BUTTON",{class:!0});var j=U(l);h=Se(j,"Delete"),j.forEach(M),R.forEach(M),c=ye(Z),f=H(Z,"UL",{class:!0});var J=U(f);for(let Ee=0;Ee<p.length;Ee+=1)p[Ee].l(J);b=ye(J),v=H(J,"LI",{class:!0});var Q=U(v);m=H(Q,"INPUT",{type:!0,placeholder:!0,class:!0}),Q.forEach(M),J.forEach(M),D=ye(Z),S=H(Z,"DIV",{class:!0});var te=U(S);y=H(te,"P",{});var ce=U(y);A=Se(ce,"Shift+Enter to add a line"),ce.forEach(M),F=ye(te),P=H(te,"P",{});var me=U(P);O=Se(me,"Bksp to remove an empty line"),me.forEach(M),te.forEach(M),this.h()},h(){B(r,"class","btn btn-sm btn-info mx-2"),B(a,"class","btn btn-sm btn-success mx-2"),B(l,"class","btn btn-sm btn-error mx-2"),B(e,"class","flex px-8 py-2 justify-center bg-base-100"),B(m,"type","text"),B(m,"placeholder","Add prompt"),B(m,"class","input input-bordered input-sm w-full italic"),B(v,"class","p-1"),B(f,"class","h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block"),B(S,"class","w-full justify-end bg-base-100 p-2 text-xs select-none")},m(Z,R){ue(Z,e,R),T(e,r),T(r,n),T(e,i),T(e,a),T(a,o),T(e,s),T(e,l),T(l,h),ue(Z,c,R),ue(Z,f,R);for(let N=0;N<p.length;N+=1)p[N]&&p[N].m(f,null);T(f,b),T(f,v),T(v,m),nn(m,t[0]),ue(Z,D,R),ue(Z,S,R),T(S,y),T(y,A),T(S,F),T(S,P),T(P,O),C||(x=[_e(r,"click",t[4]),_e(a,"click",t[3]),_e(l,"click",t[5]),_e(m,"input",t[13]),_e(m,"keydown",t[14])],C=!0)},p(Z,[R]){R&198&&(z=Z[2],p=Un(p,R,G,1,Z,z,g,f,Jn,Ep,b,yp)),R&1&&m.value!==Z[0]&&nn(m,Z[0])},i:Pe,o:Pe,d(Z){Z&&M(e),Z&&M(c),Z&&M(f);for(let R=0;R<p.length;R+=1)p[R].d();Z&&M(D),Z&&M(S),C=!1,Rt(x)}}}function v7(t,e,r){let n,i,a,o;qe(t,Ke,C=>r(9,i=C)),qe(t,Xi,C=>r(15,a=C)),qe(t,Jr,C=>r(16,o=C));let s="",l=Object.keys(i.weightedPrompts).length,h=!1;function c(){_u.update(bo(),{...i,date:Date.now()}),pi.update("select")}function f(){navigator.clipboard.readText().then(C=>{const x=js(C),z=Object.values(i.weightedPrompts).map(G=>[G.text,G.parsedWeight]);p([...z,...x])})}function p(C){const x=Math.max(...C.map(([G,Z])=>Z)),z=C.reduce((G,[Z,R],N)=>(G[N]=kr(N,Z,R,R/x),o[Z]||Jr.update(Z,null),G),{});Xi.delete(),Ke.update(Oi(z,i.promptLimit,i.weightMode)),r(0,s="")}function g(){a&&_u.delete(a),Xi.delete(),Ke.delete(),pi.update("select")}function b(C){console.log("remove",C);const z=Object.entries(i.weightedPrompts).filter(([G])=>G!==C).map(([G,Z])=>[Z.text,Z.parsedWeight]);return p(z)}function v(C,x){console.log("change",C);let z={...i.weightedPrompts};const G={...z[C],text:x};z[C]=G,Ke.update({...i,weightedPrompts:z})}const m=eo(v,500);function D(C){console.log("new",C);const x=Object.entries(i.weightedPrompts).map(([z,G])=>[G.text,G.parsedWeight]);return x.push([C,1]),p(x)}function S(C,x=null){const z=C.key,G=C.target.value;if(z==="Shift"){r(1,h=!0);return}if(x!==null){if(z==="Enter"&&G!==""?v(x,G):z==="Backspace"&&G===""&&b(x),z==="Enter"&&h){const R=Object.entries(i.weightedPrompts).map(([q,j])=>[j.text,j.parsedWeight]),N=parseInt(x)+1;return console.log("adding prompt at",x+1),R.splice(N,0,["",1]),p(R)}}else z==="Enter"&&G!==""&&D(G)}const y=(C,x)=>m(C,x.target.value),A=(C,x)=>S(x,C),F=C=>{C.key==="Shift"&&r(1,h=!1)};function P(){s=this.value,r(0,s),r(9,i),r(8,l)}const O=C=>S(C);return t.$$.update=()=>{if(t.$$.dirty&768){const C=Object.keys(i.weightedPrompts).length;C>l&&(r(8,l=C),r(0,s=""))}t.$$.dirty&512&&r(2,n=Object.entries(i.weightedPrompts).map(([C,x])=>({id:C,text:x.text})))},[s,h,n,c,f,g,m,S,l,i,y,A,F,P,O]}class m7 extends Je{constructor(e){super(),Qe(this,e,v7,g7,Xe,{})}}const _7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. The first sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. The middle three sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. The final sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,b7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 10 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. Four sentences should describe the subject.
    d. Four sentences should describe the scene.
    e. Tow sentences should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,D7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 10 concepts.
    a. Each concept should be 10 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
`,w7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 20 concepts.
    a. Each concept should be 5 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
3. Do not use hyphens to mark list items.
4. Do not title the list.
`,y7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. One sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. Two sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. One sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
    f. One sentence should be a poetic concept or feeling. Example: The unfathomable depths of a lover's sigh.
        i. The poetic concept should be intense.
        ii. The poetic concept should be emotional.
        iii. The poetic concept should include abstract words.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`;function E7(){const t=rr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith("directive")){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=At(t),h={...s[a]||{},...o};i&&(localStorage[`directive_${a}`]=JSON.stringify(h));const c={...s,[a]:h};r(c)},get:a=>At(t)[a],delete:a=>{i&&delete localStorage[`directive_${a}`];const o={...At(t)};delete o[a],r(o)}}}const ao=E7(),A7=Cu(ao,t=>Object.entries(At(ao))),pc="preferredDirective";function C7(){const t=rr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[pc]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[pc]=a,r(a))},get:()=>At(t),delete:()=>{i&&(delete localStorage[pc],r(""))}}}const Es=C7(),gc="metaPrompt";function F7(){const t=rr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[gc]||""),{subscribe:e,update:a=>{i&&(localStorage[gc]=a,r(a))},get:()=>At(t),delete:()=>{i&&(delete localStorage[gc],r(""))}}}const jc=F7(),Ea=rr("");function Ap(t,e,r){const n=t.slice();return n[21]=e[r][0],n[22]=e[r][1],n}function Cp(t,e){let r,n=e[22].name+"",i,a=e[22].builtIn?" (Built-In)":" (User)",o,s,l;return{key:t,first:null,c(){r=W("option"),i=Fe(n),o=Fe(a),this.h()},l(h){r=H(h,"OPTION",{});var c=U(r);i=Se(c,n),o=Se(c,a),c.forEach(M),this.h()},h(){r.__value=s=e[21],r.value=r.__value,r.selected=l=e[3]===e[21],this.first=r},m(h,c){ue(h,r,c),T(r,i),T(r,o)},p(h,c){e=h,c&16&&n!==(n=e[22].name+"")&&zt(i,n),c&16&&a!==(a=e[22].builtIn?" (Built-In)":" (User)")&&zt(o,a),c&16&&s!==(s=e[21])&&(r.__value=s,r.value=r.__value),c&24&&l!==(l=e[3]===e[21])&&(r.selected=l)},d(h){h&&M(r)}}}function Fp(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b,v=!t[7]&&Sp(t),m=t[6]&&Bp(t);function D(A,F){return A[1]?B7:S7}let S=D(t),y=S(t);return{c(){v&&v.c(),e=we(),r=W("div"),n=W("textarea"),i=we(),a=W("div"),o=W("textarea"),s=we(),l=W("div"),m&&m.c(),h=we(),c=W("button"),f=Fe("Preview"),p=we(),y.c(),this.h()},l(A){v&&v.l(A),e=ye(A),r=H(A,"DIV",{class:!0});var F=U(r);n=H(F,"TEXTAREA",{class:!0,placeholder:!0}),U(n).forEach(M),F.forEach(M),i=ye(A),a=H(A,"DIV",{class:!0});var P=U(a);o=H(P,"TEXTAREA",{class:!0,placeholder:!0}),U(o).forEach(M),P.forEach(M),s=ye(A),l=H(A,"DIV",{class:!0});var O=U(l);m&&m.l(O),h=ye(O),c=H(O,"BUTTON",{class:!0});var C=U(c);f=Se(C,"Preview"),C.forEach(M),p=ye(O),y.l(O),O.forEach(M),this.h()},h(){B(n,"class","font-mono text-xs textarea textarea-bordered w-full h-full resize-none"),B(n,"placeholder","GPT Directives"),B(r,"class","w-full p-2 h-1/2"),o.value=t[9],B(o,"class","textarea textarea-bordered w-full h-full resize-none"),B(o,"placeholder","Describe the prompt to generate."),B(a,"class","w-full p-2 h-1/5"),B(c,"class","btn btn-sm btn btn-info"),B(l,"class","w-full p-2 h-12 flex justify-between")},m(A,F){v&&v.m(A,F),ue(A,e,F),ue(A,r,F),T(r,n),nn(n,t[8]),ue(A,i,F),ue(A,a,F),T(a,o),ue(A,s,F),ue(A,l,F),m&&m.m(l,null),T(l,h),T(l,c),T(c,f),T(l,p),y.m(l,null),g||(b=[_e(n,"input",t[17]),_e(o,"input",t[18]),_e(c,"click",function(){Ba(t[0])&&t[0].apply(this,arguments)})],g=!0)},p(A,F){t=A,t[7]?v&&(v.d(1),v=null):v?v.p(t,F):(v=Sp(t),v.c(),v.m(e.parentNode,e)),F&256&&nn(n,t[8]),F&512&&(o.value=t[9]),t[6]?m?m.p(t,F):(m=Bp(t),m.c(),m.m(l,h)):m&&(m.d(1),m=null),S===(S=D(t))&&y?y.p(t,F):(y.d(1),y=S(t),y&&(y.c(),y.m(l,null)))},d(A){v&&v.d(A),A&&M(e),A&&M(r),A&&M(i),A&&M(a),A&&M(s),A&&M(l),m&&m.d(),y.d(),g=!1,Rt(b)}}}function Sp(t){let e,r,n,i,a,o,s;return{c(){e=W("div"),r=W("input"),n=we(),i=W("button"),a=Fe("Save"),this.h()},l(l){e=H(l,"DIV",{class:!0});var h=U(e);r=H(h,"INPUT",{type:!0,placeholder:!0,class:!0}),n=ye(h),i=H(h,"BUTTON",{class:!0});var c=U(i);a=Se(c,"Save"),c.forEach(M),h.forEach(M),this.h()},h(){B(r,"type","text"),B(r,"placeholder","Name"),B(r,"class","input input-bordered input-sm w-full max-w-xs"),B(i,"class","btn btn-sm btn-primary ml-4"),B(e,"class","w-full p-2 h-12 flex justify-between")},m(l,h){ue(l,e,h),T(e,r),nn(r,t[5]),T(e,n),T(e,i),T(i,a),o||(s=[_e(r,"input",t[16]),_e(i,"click",t[10])],o=!0)},p(l,h){h&32&&r.value!==l[5]&&nn(r,l[5])},d(l){l&&M(e),o=!1,Rt(s)}}}function Bp(t){let e,r,n,i;return{c(){e=W("button"),r=Fe("Delete"),this.h()},l(a){e=H(a,"BUTTON",{class:!0});var o=U(e);r=Se(o,"Delete"),o.forEach(M),this.h()},h(){B(e,"class","btn btn-sm btn-error")},m(a,o){ue(a,e,o),T(e,r),n||(i=_e(e,"click",t[11]),n=!0)},p:Pe,d(a){a&&M(e),n=!1,i()}}}function S7(t){let e,r,n,i;return{c(){e=W("button"),r=Fe("Generate"),this.h()},l(a){e=H(a,"BUTTON",{class:!0});var o=U(e);r=Se(o,"Generate"),o.forEach(M),this.h()},h(){B(e,"class","btn btn-sm btn-primary")},m(a,o){ue(a,e,o),T(e,r),n||(i=_e(e,"click",function(){Ba(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(a,o){t=a},d(a){a&&M(e),n=!1,i()}}}function B7(t){let e,r;return{c(){e=W("button"),r=Fe("Generating"),this.h()},l(n){e=H(n,"BUTTON",{class:!0});var i=U(e);r=Se(i,"Generating"),i.forEach(M),this.h()},h(){B(e,"class","btn btn-sm btn disabled")},m(n,i){ue(n,e,i),T(e,r)},p:Pe,d(n){n&&M(e)}}}function O7(t){let e,r,n,i,a,o,s,l,h,c,f=[],p=new Map,g,b,v,m,D,S,y,A=Object.entries(t[4]);const F=O=>O[21];for(let O=0;O<A.length;O+=1){let C=Ap(t,A,O),x=F(C);p.set(x,f[O]=Cp(x,C))}let P=t[3]&&Fp(t);return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=Fe("Pick a directive for prompt creation"),o=we(),s=W("select"),l=W("option"),h=Fe("Pick one");for(let O=0;O<f.length;O+=1)f[O].c();g=W("option"),b=Fe("New"),m=we(),P&&P.c(),D=Ct(),this.h()},l(O){e=H(O,"DIV",{class:!0});var C=U(e);r=H(C,"DIV",{class:!0});var x=U(r);n=H(x,"LABEL",{class:!0});var z=U(n);i=H(z,"SPAN",{class:!0});var G=U(i);a=Se(G,"Pick a directive for prompt creation"),G.forEach(M),z.forEach(M),o=ye(x),s=H(x,"SELECT",{class:!0});var Z=U(s);l=H(Z,"OPTION",{});var R=U(l);h=Se(R,"Pick one"),R.forEach(M);for(let q=0;q<f.length;q+=1)f[q].l(Z);g=H(Z,"OPTION",{});var N=U(g);b=Se(N,"New"),N.forEach(M),Z.forEach(M),x.forEach(M),C.forEach(M),m=ye(O),P&&P.l(O),D=Ct(),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),l.disabled=!0,l.selected=c=t[3]===null,l.__value="Pick one",l.value=l.__value,g.__value="new",g.value=g.__value,g.selected=v=t[3]==="new",B(s,"class","select select-bordered"),B(r,"class","form-control w-full max-w-xs mb-4"),B(e,"class","flex justify-center")},m(O,C){ue(O,e,C),T(e,r),T(r,n),T(n,i),T(i,a),T(r,o),T(r,s),T(s,l),T(l,h);for(let x=0;x<f.length;x+=1)f[x]&&f[x].m(s,null);T(s,g),T(g,b),Ti(s,t[3]),ue(O,m,C),P&&P.m(O,C),ue(O,D,C),S||(y=_e(s,"change",t[12]),S=!0)},p(O,[C]){C&24&&c!==(c=O[3]===null)&&(l.selected=c),C&24&&(A=Object.entries(O[4]),f=Un(f,C,F,1,O,A,p,s,Jn,Cp,g,Ap)),C&24&&v!==(v=O[3]==="new")&&(g.selected=v),C&24&&Ti(s,O[3]),O[3]?P?P.p(O,C):(P=Fp(O),P.c(),P.m(D.parentNode,D)):P&&(P.d(1),P=null)},i:Pe,o:Pe,d(O){O&&M(e);for(let C=0;C<f.length;C+=1)f[C].d();O&&M(m),P&&P.d(O),O&&M(D),S=!1,y()}}}function M7(t,e,r){let n,i,a,o,s,l,h,c;qe(t,Ea,C=>r(8,s=C)),qe(t,Es,C=>r(14,l=C)),qe(t,A7,C=>r(15,h=C)),qe(t,jc,C=>r(9,c=C));let{togglePreview:f=()=>{}}=e,{isGenerating:p=!1}=e,{handleGeneratePrompt:g=()=>{}}=e,b={C:{name:"Five Sentences",text:_7,builtIn:!0},D:{name:"Ten Sentences",text:b7,builtIn:!0},E:{name:"Fragments",text:D7,builtIn:!0},F:{name:"Concept Shotgun",text:w7,builtIn:!0},G:{name:"Poetic Accents",text:y7,builtIn:!0}},v=null,m="";function D(){const C=v==="new"?bo():v;ao.update(C,{name:m,text:s,builtIn:!1}),v==="new"&&(r(3,v=C),Es.update(C))}function S(){ao.delete(v),r(3,v=null),r(5,m=""),Ea.set(""),Es.delete()}function y(C){r(3,v=C),Es.update(C),C&&C!=="new"?(r(5,m=i[C].name),Ea.set(i[C].text)):C==="new"&&(r(5,m=""),Ea.set(""))}function A(C){y(C.target.value)}function F(){m=this.value,r(5,m)}function P(){s=this.value,Ea.set(s)}const O=C=>jc.update(C.target.value);return t.$$set=C=>{"togglePreview"in C&&r(0,f=C.togglePreview),"isGenerating"in C&&r(1,p=C.isGenerating),"handleGeneratePrompt"in C&&r(2,g=C.handleGeneratePrompt)},t.$$.update=()=>{t.$$.dirty&32768&&r(13,n=h.reduce((C,[x,z])=>(C[x]={name:z.name,text:z.text,builtIn:!1},C),{})),t.$$.dirty&8192&&r(4,i=Object.entries({...b,...n}).reduce((C,[x,z])=>(C[x]=z,C),{})),t.$$.dirty&16392&&v===null&&l&&(r(3,v=l),y(v)),t.$$.dirty&24&&r(7,a=v&&v!=="new"&&i[v].builtIn),t.$$.dirty&24&&r(6,o=v&&v!=="new"&&!i[v].builtIn)},[f,p,g,v,i,m,o,a,s,c,D,S,A,n,l,h,F,P,O]}class P7 extends Je{constructor(e){super(),Qe(this,e,M7,O7,Xe,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}function k7(t,e){return`${t}

Use the following text to generate output based on the instructions above:

${e}`}const dg=Cu([Ea,jc,Ni],t=>yu(k7(t[0],t[1]),t[2]));function T7(t){let e,r,n,i;return{c(){e=W("button"),r=Fe("Generate"),this.h()},l(a){e=H(a,"BUTTON",{class:!0});var o=U(e);r=Se(o,"Generate"),o.forEach(M),this.h()},h(){B(e,"class","btn btn-sm btn-primary")},m(a,o){ue(a,e,o),T(e,r),n||(i=_e(e,"click",function(){Ba(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(a,o){t=a},d(a){a&&M(e),n=!1,i()}}}function I7(t){let e,r;return{c(){e=W("button"),r=Fe("Generating"),this.h()},l(n){e=H(n,"BUTTON",{class:!0});var i=U(e);r=Se(i,"Generating"),i.forEach(M),this.h()},h(){B(e,"class","btn btn-sm btn disabled")},m(n,i){ue(n,e,i),T(e,r)},p:Pe,d(n){n&&M(e)}}}function x7(t){let e,r,n,i,a,o,s,l,h,c;function f(b,v){return b[1]?I7:T7}let p=f(t),g=p(t);return{c(){e=W("div"),r=W("p"),n=Fe(t[3]),i=we(),a=W("div"),o=W("button"),s=Fe("Back"),l=we(),g.c(),this.h()},l(b){e=H(b,"DIV",{class:!0});var v=U(e);r=H(v,"P",{class:!0});var m=U(r);n=Se(m,t[3]),m.forEach(M),v.forEach(M),i=ye(b),a=H(b,"DIV",{class:!0});var D=U(a);o=H(D,"BUTTON",{class:!0});var S=U(o);s=Se(S,"Back"),S.forEach(M),l=ye(D),g.l(D),D.forEach(M),this.h()},h(){B(r,"class","font-mono text-xs whitespace-pre-wrap"),B(e,"class","p-4 overflow-y-auto"),B(o,"class","btn btn-sm btn btn-info"),B(a,"class","w-full p-2 h-12 flex justify-between")},m(b,v){ue(b,e,v),T(e,r),T(r,n),ue(b,i,v),ue(b,a,v),T(a,o),T(o,s),T(a,l),g.m(a,null),h||(c=_e(o,"click",function(){Ba(t[0])&&t[0].apply(this,arguments)}),h=!0)},p(b,[v]){t=b,v&8&&zt(n,t[3]),p===(p=f(t))&&g?g.p(t,v):(g.d(1),g=p(t),g&&(g.c(),g.m(a,null)))},i:Pe,o:Pe,d(b){b&&M(e),b&&M(i),b&&M(a),g.d(),h=!1,c()}}}function N7(t,e,r){let n;qe(t,dg,s=>r(3,n=s));let{togglePreview:i=()=>{}}=e,{isGenerating:a=!1}=e,{handleGeneratePrompt:o=()=>{}}=e;return t.$$set=s=>{"togglePreview"in s&&r(0,i=s.togglePreview),"isGenerating"in s&&r(1,a=s.isGenerating),"handleGeneratePrompt"in s&&r(2,o=s.handleGeneratePrompt)},[i,a,o,n]}class L7 extends Je{constructor(e){super(),Qe(this,e,N7,x7,Xe,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}const vc="preferredModel";function R7(){const t=rr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[vc]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[vc]=a,r(a))},get:()=>At(t),delete:()=>{i&&(delete localStorage[vc],r(""))}}}const zc=R7();function U7(t){let e,r,n;return{c(){e=W("div"),r=W("p"),n=Fe("Set Open AI Key in settings for GPT generation."),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=U(e);r=H(a,"P",{class:!0});var o=U(r);n=Se(o,"Set Open AI Key in settings for GPT generation."),o.forEach(M),a.forEach(M),this.h()},h(){B(r,"class","text-center"),B(e,"class","w-full p-2 flex justify-center")},m(i,a){ue(i,e,a),T(e,r),T(r,n)},p:Pe,i:Pe,o:Pe,d(i){i&&M(e)}}}function V7(t){let e,r,n,i;const a=[z7,j7],o=[];function s(l,h){return l[1]?0:1}return e=s(t),r=o[e]=a[e](t),{c(){r.c(),n=Ct()},l(l){r.l(l),n=Ct()},m(l,h){o[e].m(l,h),ue(l,n,h),i=!0},p(l,h){let c=e;e=s(l),e===c?o[e].p(l,h):(Gt(),he(o[c],1,1,()=>{o[c]=null}),Kt(),r=o[e],r?r.p(l,h):(r=o[e]=a[e](l),r.c()),oe(r,1),r.m(n.parentNode,n))},i(l){i||(oe(r),i=!0)},o(l){he(r),i=!1},d(l){o[e].d(l),l&&M(n)}}}function j7(t){let e,r;return e=new P7({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},p(n,i){const a={};i&1&&(a.isGenerating=n[0]),e.$set(a)},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function z7(t){let e,r;return e=new L7({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},p(n,i){const a={};i&1&&(a.isGenerating=n[0]),e.$set(a)},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function q7(t){let e,r,n,i;const a=[V7,U7],o=[];function s(l,h){return l[2]?0:1}return r=s(t),n=o[r]=a[r](t),{c(){e=W("div"),n.c(),this.h()},l(l){e=H(l,"DIV",{class:!0});var h=U(e);n.l(h),h.forEach(M),this.h()},h(){B(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(l,h){ue(l,e,h),o[r].m(e,null),i=!0},p(l,[h]){n.p(l,h)},i(l){i||(oe(n),i=!0)},o(l){he(n),i=!1},d(l){l&&M(e),o[r].d()}}}function W7(t,e,r){let n,i,a,o,s,l;qe(t,dg,D=>r(7,i=D)),qe(t,Ke,D=>r(8,a=D)),qe(t,Jr,D=>r(9,o=D)),qe(t,zc,D=>r(5,s=D)),qe(t,Yn,D=>r(10,l=D));const h=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001"];let c=!1,f=l,p=!1;function g(D,S){const y=no(D),A=n||"gpt-3.5-turbo";r(0,c=!0),R8(y,S,A).then(F=>{console.log(F),F.data.choices.forEach((P,O)=>{const C=js(P.message.content);console.log(C);const x=C.reduce((z,[G,Z],R)=>(z[R]=kr(R,G,Z),o[G]||Jr.update(G,null),z),{});Ke.update(Oi(x,a.promptLimit,a.weightMode)),pi.update("edit"),Ni.shuffle()})}).finally(()=>{r(0,c=!1)})}function b(D,S){const y=no(D),A=n||"text-davinci-003";r(0,c=!0),L8(y,S,A).then(F=>{console.log(F),F.data.choices.forEach((P,O)=>{const C=js(P.text);console.log(C);const x=C.reduce((z,[G,Z],R)=>(z[R]=kr(R,G,Z),o[G]||Jr.update(G,null),z),{});Ke.update(Oi(x,a.promptLimit,a.weightMode)),pi.update("edit"),Ni.shuffle()})}).finally(()=>{r(0,c=!1)})}function v(){f&&(h.includes(n)?b(f,i):g(f,i))}function m(){console.log(i),r(1,p=!p)}return t.$$.update=()=>{t.$$.dirty&32&&(n=s||null)},[c,p,f,v,m,s]}class H7 extends Je{constructor(e){super(),Qe(this,e,W7,q7,Xe,{})}}function Op(t,e,r){const n=t.slice();return n[20]=e[r],n}function Mp(t,e,r){const n=t.slice();return n[20]=e[r],n}function $7(t){return{c:Pe,l:Pe,m:Pe,p:Pe,d:Pe}}function G7(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b=t[0].length>0&&Pp(t),v=t[1].length>0&&Tp(t);return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=Fe("Embed Cache Size: "),o=Fe(t[6]),s=we(),l=W("input"),h=we(),b&&b.c(),c=we(),v&&v.c(),f=Ct(),this.h()},l(m){e=H(m,"DIV",{class:!0});var D=U(e);r=H(D,"DIV",{class:!0});var S=U(r);n=H(S,"LABEL",{class:!0});var y=U(n);i=H(y,"SPAN",{class:!0});var A=U(i);a=Se(A,"Embed Cache Size: "),o=Se(A,t[6]),A.forEach(M),y.forEach(M),s=ye(S),l=H(S,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),S.forEach(M),D.forEach(M),h=ye(m),b&&b.l(m),c=ye(m),v&&v.l(m),f=Ct(),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),l.value=t[6],B(l,"type","range"),B(l,"min","0"),B(l,"max",150),B(l,"step","1"),B(l,"class","range range-sm"),B(r,"class","px-10 w-full"),B(e,"class","flex justify-center")},m(m,D){ue(m,e,D),T(e,r),T(r,n),T(n,i),T(i,a),T(i,o),T(r,s),T(r,l),ue(m,h,D),b&&b.m(m,D),ue(m,c,D),v&&v.m(m,D),ue(m,f,D),p||(g=_e(l,"change",t[12]),p=!0)},p(m,D){D&64&&zt(o,m[6]),D&64&&(l.value=m[6]),m[0].length>0?b?b.p(m,D):(b=Pp(m),b.c(),b.m(c.parentNode,c)):b&&(b.d(1),b=null),m[1].length>0?v?v.p(m,D):(v=Tp(m),v.c(),v.m(f.parentNode,f)):v&&(v.d(1),v=null)},d(m){m&&M(e),m&&M(h),b&&b.d(m),m&&M(c),v&&v.d(m),m&&M(f),p=!1,g()}}}function Pp(t){let e,r,n,i,a,o,s,l,h,c,f=[],p=new Map,g,b,v=t[0];const m=D=>D[20];for(let D=0;D<v.length;D+=1){let S=Mp(t,v,D),y=m(S);p.set(y,f[D]=kp(y,S))}return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=Fe("Pick a model to use for model generation"),o=we(),s=W("select"),l=W("option"),h=Fe("Pick one");for(let D=0;D<f.length;D+=1)f[D].c();this.h()},l(D){e=H(D,"DIV",{class:!0});var S=U(e);r=H(S,"DIV",{class:!0});var y=U(r);n=H(y,"LABEL",{class:!0});var A=U(n);i=H(A,"SPAN",{class:!0});var F=U(i);a=Se(F,"Pick a model to use for model generation"),F.forEach(M),A.forEach(M),o=ye(y),s=H(y,"SELECT",{class:!0});var P=U(s);l=H(P,"OPTION",{});var O=U(l);h=Se(O,"Pick one"),O.forEach(M);for(let C=0;C<f.length;C+=1)f[C].l(P);P.forEach(M),y.forEach(M),S.forEach(M),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),l.disabled=!0,l.selected=c=t[2]===null,l.__value="Pick one",l.value=l.__value,B(s,"class","select select-bordered"),B(r,"class","form-control w-full max-w-xs mb-4"),B(e,"class","flex justify-center")},m(D,S){ue(D,e,S),T(e,r),T(r,n),T(n,i),T(i,a),T(r,o),T(r,s),T(s,l),T(l,h);for(let y=0;y<f.length;y+=1)f[y]&&f[y].m(s,null);Ti(s,t[2]),g||(b=_e(s,"change",t[7]),g=!0)},p(D,S){S&5&&c!==(c=D[2]===null)&&(l.selected=c),S&5&&(v=D[0],f=Un(f,S,m,1,D,v,p,s,Jn,kp,null,Mp)),S&5&&Ti(s,D[2])},d(D){D&&M(e);for(let S=0;S<f.length;S+=1)f[S].d();g=!1,b()}}}function kp(t,e){let r,n=e[20]+"",i,a,o;return{key:t,first:null,c(){r=W("option"),i=Fe(n),this.h()},l(s){r=H(s,"OPTION",{});var l=U(r);i=Se(l,n),l.forEach(M),this.h()},h(){r.__value=a=e[20],r.value=r.__value,r.selected=o=e[2]===e[20],this.first=r},m(s,l){ue(s,r,l),T(r,i)},p(s,l){e=s,l&1&&n!==(n=e[20]+"")&&zt(i,n),l&1&&a!==(a=e[20])&&(r.__value=a,r.value=r.__value),l&5&&o!==(o=e[2]===e[20])&&(r.selected=o)},d(s){s&&M(r)}}}function Tp(t){let e,r,n,i,a,o,s,l,h,c,f=[],p=new Map,g,b,v=t[1];const m=D=>D[20];for(let D=0;D<v.length;D+=1){let S=Op(t,v,D),y=m(S);p.set(y,f[D]=Ip(y,S))}return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=Fe("Pick a model to use for prompt embedding"),o=we(),s=W("select"),l=W("option"),h=Fe("Pick one");for(let D=0;D<f.length;D+=1)f[D].c();this.h()},l(D){e=H(D,"DIV",{class:!0});var S=U(e);r=H(S,"DIV",{class:!0});var y=U(r);n=H(y,"LABEL",{class:!0});var A=U(n);i=H(A,"SPAN",{class:!0});var F=U(i);a=Se(F,"Pick a model to use for prompt embedding"),F.forEach(M),A.forEach(M),o=ye(y),s=H(y,"SELECT",{class:!0});var P=U(s);l=H(P,"OPTION",{});var O=U(l);h=Se(O,"Pick one"),O.forEach(M);for(let C=0;C<f.length;C+=1)f[C].l(P);P.forEach(M),y.forEach(M),S.forEach(M),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),l.disabled=!0,l.selected=c=t[3]===null,l.__value="Pick one",l.value=l.__value,B(s,"class","select select-bordered"),B(r,"class","form-control w-full max-w-xs mb-4"),B(e,"class","flex justify-center")},m(D,S){ue(D,e,S),T(e,r),T(r,n),T(n,i),T(i,a),T(r,o),T(r,s),T(s,l),T(l,h);for(let y=0;y<f.length;y+=1)f[y]&&f[y].m(s,null);Ti(s,t[3]),g||(b=_e(s,"change",t[8]),g=!0)},p(D,S){S&10&&c!==(c=D[3]===null)&&(l.selected=c),S&10&&(v=D[1],f=Un(f,S,m,1,D,v,p,s,Jn,Ip,null,Op)),S&10&&Ti(s,D[3])},d(D){D&&M(e);for(let S=0;S<f.length;S+=1)f[S].d();g=!1,b()}}}function Ip(t,e){let r,n=e[20]+"",i,a,o;return{key:t,first:null,c(){r=W("option"),i=Fe(n),this.h()},l(s){r=H(s,"OPTION",{});var l=U(r);i=Se(l,n),l.forEach(M),this.h()},h(){r.__value=a=e[20],r.value=r.__value,r.selected=o=e[3]===e[20],this.first=r},m(s,l){ue(s,r,l),T(r,i)},p(s,l){e=s,l&2&&n!==(n=e[20]+"")&&zt(i,n),l&2&&a!==(a=e[20])&&(r.__value=a,r.value=r.__value),l&10&&o!==(o=e[3]===e[20])&&(r.selected=o)},d(s){s&&M(r)}}}function K7(t){let e,r,n;return{c(){e=W("div"),r=W("div"),n=W("progress"),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=U(e);r=H(a,"DIV",{class:!0});var o=U(r);n=H(o,"PROGRESS",{class:!0}),U(n).forEach(M),o.forEach(M),a.forEach(M),this.h()},h(){B(n,"class","progress progress-primary w-56"),B(r,"class","form-control w-full flex flex-col max-w-xs"),B(e,"class","py-10 flex justify-center")},m(i,a){ue(i,e,a),T(e,r),T(r,n)},p:Pe,d(i){i&&M(e)}}}function Y7(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b,v,m,D={ctx:t,current:null,token:null,hasCatch:!1,pending:K7,then:G7,catch:$7,value:19};return Bs(b=t[4],D),{c(){e=W("div"),r=W("div"),n=W("div"),i=W("label"),a=W("span"),o=Fe("Open AI Key"),s=we(),l=W("input"),h=we(),c=W("label"),f=W("button"),p=Fe("Clear"),g=we(),D.block.c(),this.h()},l(S){e=H(S,"DIV",{class:!0});var y=U(e);r=H(y,"DIV",{class:!0});var A=U(r);n=H(A,"DIV",{class:!0});var F=U(n);i=H(F,"LABEL",{class:!0});var P=U(i);a=H(P,"SPAN",{class:!0});var O=U(a);o=Se(O,"Open AI Key"),O.forEach(M),P.forEach(M),s=ye(F),l=H(F,"INPUT",{type:!0,placeholder:!0,class:!0}),h=ye(F),c=H(F,"LABEL",{class:!0});var C=U(c);f=H(C,"BUTTON",{class:!0});var x=U(f);p=Se(x,"Clear"),x.forEach(M),C.forEach(M),F.forEach(M),A.forEach(M),g=ye(y),D.block.l(y),y.forEach(M),this.h()},h(){B(a,"class","label-text-alt"),B(i,"class","label"),l.value=t[5],B(l,"type","password"),B(l,"placeholder","Open AI Key"),B(l,"class","input input-bordered w-full max-w-xs"),B(f,"class","btn btn-xs btn-error"),B(c,"class","label"),B(n,"class","form-control w-full max-w-xs"),B(r,"class","flex justify-center"),B(e,"class","h-full p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(S,y){ue(S,e,y),T(e,r),T(r,n),T(n,i),T(i,a),T(a,o),T(n,s),T(n,l),T(n,h),T(n,c),T(c,f),T(f,p),T(e,g),D.block.m(e,D.anchor=null),D.mount=()=>e,D.anchor=null,v||(m=[_e(l,"input",t[9]),_e(f,"click",t[10])],v=!0)},p(S,[y]){t=S,y&32&&l.value!==t[5]&&(l.value=t[5]),D.ctx=t,y&16&&b!==(b=t[4])&&Bs(b,D)||qp(D,t,y)},i:Pe,o:Pe,d(S){S&&M(e),D.block.d(),D.token=null,D=null,v=!1,Rt(m)}}}function Z7(t,e,r){let n,i,a,o,s;qe(t,Ke,P=>r(13,n=P)),qe(t,Uc,P=>r(14,i=P)),qe(t,zc,P=>r(15,a=P)),qe(t,Yn,P=>r(5,o=P)),qe(t,Vc,P=>r(6,s=P));const l=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001","gpt-3.5-turbo","gpt-3.5-turbo-0301"],h=["text-embedding-ada-002"];let c=o,f=[],p=[],g=a,b=i,v=null;async function m(P){if(!P||f.length&&p.length)return;const O=no(P);r(4,v=V8(O));const C=await v;C.data&&r(0,f=C.data.data.map(({id:x})=>x).filter(x=>l.includes(x))),r(1,p=C.data.data.map(({id:x})=>x).filter(x=>h.includes(x)))}function D(P){r(2,g=P.target.value),zc.update(g)}function S(P){r(3,b=P.target.value),Uc.update(b)}function y(P){const O=P.target.value;Yn.update(O),O.length===51&&m(O),O.length===0&&A()}function A(){Yn.delete(),r(11,c=""),r(0,f=[]),r(1,p=[]),n.weightMode===$e.Embed&&Ke.update({...n,weightMode:$e.Circle})}const F=P=>{Vc.update(parseInt(P.target.value)),Jr.cache(s)};return t.$$.update=()=>{t.$$.dirty&2048&&m(c)},[f,p,g,b,v,o,s,D,S,y,A,c,F]}class J7 extends Je{constructor(e){super(),Qe(this,e,Z7,Y7,Xe,{})}}function Q7(t){let e,r;return{c(){e=dt("svg"),r=dt("path"),this.h()},l(n){e=pt(n,"svg",{xmlns:!0,class:!0,viewBox:!0});var i=U(e);r=pt(i,"path",{fill:!0,d:!0}),U(r).forEach(M),i.forEach(M),this.h()},h(){B(r,"fill","rgba(255,255,255, 0.7)"),B(r,"d","M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"class","h-4 w-4"),B(e,"viewBox","0 0 24 24")},m(n,i){ue(n,e,i),T(e,r)},p:Pe,i:Pe,o:Pe,d(n){n&&M(e)}}}class X7 extends Je{constructor(e){super(),Qe(this,e,null,Q7,Xe,{})}}function xp(t,e,r){const n=t.slice();return n[17]=e[r],n[19]=r,n}function Np(t,e,r){const n=t.slice();return n[20]=e[r][0],n[21]=e[r][1],n}function Lp(t,e){let r,n=e[21].name+"",i,a,o;return{key:t,first:null,c(){r=W("option"),i=Fe(n),this.h()},l(s){r=H(s,"OPTION",{});var l=U(r);i=Se(l,n),l.forEach(M),this.h()},h(){r.__value=a=e[20],r.value=r.__value,r.selected=o=e[0]===e[20],this.first=r},m(s,l){ue(s,r,l),T(r,i)},p(s,l){e=s,l&16&&n!==(n=e[21].name+"")&&zt(i,n),l&16&&a!==(a=e[20])&&(r.__value=a,r.value=r.__value),l&17&&o!==(o=e[0]===e[20])&&(r.selected=o)},d(s){s&&M(r)}}}function Rp(t){let e,r,n,i,a,o,s,l,h,c=Vs(t[1])+"",f,p,g=(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1]),b,v,m,D,S,y,A,F,P,O,C,x,z,G,Z=g&&Up(),R=t[3]&&Vp(t);return{c(){e=W("div"),r=W("div"),n=W("input"),i=we(),a=W("div"),o=W("label"),s=W("span"),l=Fe("Alias: "),h=W("b"),f=Fe(c),p=we(),Z&&Z.c(),b=we(),v=W("button"),m=Fe("Save"),D=we(),S=W("ul"),R&&R.c(),y=we(),A=W("li"),F=W("input"),P=we(),O=W("div"),C=W("button"),x=Fe("Delete"),this.h()},l(N){e=H(N,"DIV",{class:!0});var q=U(e);r=H(q,"DIV",{class:!0});var j=U(r);n=H(j,"INPUT",{type:!0,placeholder:!0,class:!0}),i=ye(j),a=H(j,"DIV",{class:!0,"data-tip":!0});var J=U(a);o=H(J,"LABEL",{class:!0});var Q=U(o);s=H(Q,"SPAN",{class:!0});var te=U(s);l=Se(te,"Alias: "),h=H(te,"B",{class:!0});var ce=U(h);f=Se(ce,c),ce.forEach(M),te.forEach(M),Q.forEach(M),J.forEach(M),p=ye(j),Z&&Z.l(j),j.forEach(M),b=ye(q),v=H(q,"BUTTON",{class:!0});var me=U(v);m=Se(me,"Save"),me.forEach(M),q.forEach(M),D=ye(N),S=H(N,"UL",{class:!0});var Ee=U(S);R&&R.l(Ee),y=ye(Ee),A=H(Ee,"LI",{class:!0});var be=U(A);F=H(be,"INPUT",{type:!0,placeholder:!0,class:!0}),be.forEach(M),Ee.forEach(M),P=ye(N),O=H(N,"DIV",{class:!0});var Oe=U(O);C=H(Oe,"BUTTON",{class:!0});var ke=U(C);x=Se(ke,"Delete"),ke.forEach(M),Oe.forEach(M),this.h()},h(){B(n,"type","text"),B(n,"placeholder","Name"),B(n,"class","input input-bordered input-sm w-full max-w-xs"),B(h,"class","text-white cursor-copy"),B(s,"class","label-text"),B(o,"class","label"),B(a,"class","tooltip tooltip-primary tooltip-bottom"),B(a,"data-tip","Use in prompts or directives to get random slot."),B(r,"class","flex flex-col w-full pr-2 "),B(v,"class","btn btn-sm btn-primary"),Ye(v,"btn-disabled",!nd(t[1])||(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1])),B(e,"class","w-full p-2 flex justify-between"),B(F,"type","text"),B(F,"placeholder","Add slot"),B(F,"class","input input-bordered input-sm w-full italic"),B(A,"class","p-1"),B(S,"class","px-4 py-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block"),B(C,"class","btn btn-sm btn-error ml-4"),B(O,"class","w-full p-2 h-12 flex justify-between")},m(N,q){ue(N,e,q),T(e,r),T(r,n),nn(n,t[1]),T(r,i),T(r,a),T(a,o),T(o,s),T(s,l),T(s,h),T(h,f),T(r,p),Z&&Z.m(r,null),T(e,b),T(e,v),T(v,m),ue(N,D,q),ue(N,S,q),R&&R.m(S,null),T(S,y),T(S,A),T(A,F),nn(F,t[2]),ue(N,P,q),ue(N,O,q),T(O,C),T(C,x),z||(G=[_e(n,"input",t[11]),_e(h,"click",t[12]),_e(v,"click",t[6]),_e(F,"input",t[14]),_e(F,"input",t[15]),_e(C,"click",t[7])],z=!0)},p(N,q){q&2&&n.value!==N[1]&&nn(n,N[1]),q&2&&c!==(c=Vs(N[1])+"")&&zt(f,c),q&11&&(g=(N[0]==="new"||N[3]&&N[3].name!==N[1])&&!N[5](N[1])),g?Z||(Z=Up(),Z.c(),Z.m(r,null)):Z&&(Z.d(1),Z=null),q&43&&Ye(v,"btn-disabled",!nd(N[1])||(N[0]==="new"||N[3]&&N[3].name!==N[1])&&!N[5](N[1])),N[3]?R?R.p(N,q):(R=Vp(N),R.c(),R.m(S,y)):R&&(R.d(1),R=null),q&4&&F.value!==N[2]&&nn(F,N[2])},d(N){N&&M(e),Z&&Z.d(),N&&M(D),N&&M(S),R&&R.d(),N&&M(P),N&&M(O),z=!1,Rt(G)}}}function Up(t){let e,r,n;return{c(){e=W("label"),r=W("span"),n=Fe("Name In Use"),this.h()},l(i){e=H(i,"LABEL",{class:!0});var a=U(e);r=H(a,"SPAN",{class:!0});var o=U(r);n=Se(o,"Name In Use"),o.forEach(M),a.forEach(M),this.h()},h(){B(r,"class","label-text text-orange-300"),B(e,"class","label")},m(i,a){ue(i,e,a),T(e,r),T(r,n)},d(i){i&&M(e)}}}function Vp(t){let e=[],r=new Map,n,i=t[3].values;const a=o=>o[19];for(let o=0;o<i.length;o+=1){let s=xp(t,i,o),l=a(s);r.set(l,e[o]=jp(l,s))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();n=Ct()},l(o){for(let s=0;s<e.length;s+=1)e[s].l(o);n=Ct()},m(o,s){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(o,s);ue(o,n,s)},p(o,s){s&264&&(i=o[3].values,e=Un(e,s,a,1,o,i,r,n.parentNode,Jn,jp,n,xp))},d(o){for(let s=0;s<e.length;s+=1)e[s].d(o);o&&M(n)}}}function jp(t,e){let r,n,i,a,o,s;function l(...h){return e[13](e[19],...h)}return{key:t,first:null,c(){r=W("li"),n=W("input"),a=we(),this.h()},l(h){r=H(h,"LI",{class:!0});var c=U(r);n=H(c,"INPUT",{type:!0,placeholder:!0,class:!0}),a=ye(c),c.forEach(M),this.h()},h(){n.value=i=e[17],B(n,"type","text"),B(n,"placeholder",""),B(n,"class","input input-bordered input-sm w-full"),B(r,"class","p-1"),this.first=r},m(h,c){ue(h,r,c),T(r,n),T(r,a),o||(s=_e(n,"input",l),o=!0)},p(h,c){e=h,c&8&&i!==(i=e[17])&&n.value!==i&&(n.value=i)},d(h){h&&M(r),o=!1,s()}}}function e4(t){let e,r,n,i,a,o,s,l,h,c,f,p=[],g=new Map,b,v,m,D,S,y,A=Object.entries(t[4]);const F=O=>O[20];for(let O=0;O<A.length;O+=1){let C=Np(t,A,O),x=F(C);g.set(x,p[O]=Lp(x,C))}let P=t[0]&&Rp(t);return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("label"),a=W("span"),o=Fe("Edit Slots"),s=we(),l=W("select"),h=W("option"),c=Fe("Pick one");for(let O=0;O<p.length;O+=1)p[O].c();b=W("option"),v=Fe("New"),D=we(),P&&P.c(),this.h()},l(O){e=H(O,"DIV",{class:!0});var C=U(e);r=H(C,"DIV",{class:!0});var x=U(r);n=H(x,"DIV",{class:!0});var z=U(n);i=H(z,"LABEL",{class:!0});var G=U(i);a=H(G,"SPAN",{class:!0});var Z=U(a);o=Se(Z,"Edit Slots"),Z.forEach(M),G.forEach(M),s=ye(z),l=H(z,"SELECT",{class:!0});var R=U(l);h=H(R,"OPTION",{});var N=U(h);c=Se(N,"Pick one"),N.forEach(M);for(let j=0;j<p.length;j+=1)p[j].l(R);b=H(R,"OPTION",{});var q=U(b);v=Se(q,"New"),q.forEach(M),R.forEach(M),z.forEach(M),x.forEach(M),D=ye(C),P&&P.l(C),C.forEach(M),this.h()},h(){B(a,"class","label-text"),B(i,"class","label"),h.disabled=!0,h.selected=f=t[0]===null,h.__value="Pick one",h.value=h.__value,b.__value="new",b.value=b.__value,b.selected=m=t[0]==="new",B(l,"class","select select-bordered"),t[0]===void 0&&gi(()=>t[10].call(l)),B(n,"class","form-control w-full max-w-xs mb-4"),B(r,"class","flex justify-center"),B(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(O,C){ue(O,e,C),T(e,r),T(r,n),T(n,i),T(i,a),T(a,o),T(n,s),T(n,l),T(l,h),T(h,c);for(let x=0;x<p.length;x+=1)p[x]&&p[x].m(l,null);T(l,b),T(b,v),Ti(l,t[0],!0),T(e,D),P&&P.m(e,null),S||(y=_e(l,"change",t[10]),S=!0)},p(O,[C]){C&17&&f!==(f=O[0]===null)&&(h.selected=f),C&17&&(A=Object.entries(O[4]),p=Un(p,C,F,1,O,A,g,l,Jn,Lp,b,Np)),C&17&&m!==(m=O[0]==="new")&&(b.selected=m),C&17&&Ti(l,O[0]),O[0]?P?P.p(O,C):(P=Rp(O),P.c(),P.m(e,null)):P&&(P.d(1),P=null)},i:Pe,o:Pe,d(O){O&&M(e);for(let C=0;C<p.length;C+=1)p[C].d();P&&P.d(),S=!1,y()}}}function t4(t,e,r){let n;qe(t,Qi,A=>r(4,n=A));let i=null,a="",o="",s=null;function l(A){r(3,s=A&&A!=="new"?{...n[A]}:A==="new"?{name:"New Slot Set",values:[]}:null),r(1,a=s?s.name:"")}function h(A){return Object.values(n).every(P=>P.name!==A)}function c(){if(s)if(i&&i!=="new")Qi.update(i,{...s,name:a});else{if(!h()){alert("Name already in use");return}const F=bo();Qi.update(F,{...s,name:a}),r(0,i=F)}}function f(){Qi.delete(i),r(1,a=""),r(2,o=""),r(0,i=null),r(3,s=null)}const p=eo((A,F)=>{if(!s||!i)return;const P=[...s.values];F.length===0?P.splice(A,1):P[A]=F,r(3,s.values=P,s),i!=="new"&&Qi.update(i,s)},1e3),g=eo(A=>{if(!s||!i)return;const F=[...s.values];A.length>0&&(F.push(A),r(3,s.values=F,s),r(2,o=""),i!=="new"&&Qi.update(i,s))},1e3);function b(){i=dw(this),r(0,i)}function v(){a=this.value,r(1,a)}const m=()=>navigator.clipboard.writeText(Vs(a)),D=(A,F)=>p(A,F.target.value);function S(){o=this.value,r(2,o)}const y=A=>g(A.target.value);return t.$$.update=()=>{t.$$.dirty&1&&l(i)},[i,a,o,s,n,h,c,f,p,g,b,v,m,D,S,y]}class r4 extends Je{constructor(e){super(),Qe(this,e,t4,e4,Xe,{})}}function n4(t){let e,r;return e=new J7({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function i4(t){let e,r;return e=new r4({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function a4(t){let e,r;return e=new H7({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function u4(t){let e,r;return e=new m7({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function s4(t){let e,r;return e=new p7({}),{c(){Le(e.$$.fragment)},l(n){Re(e.$$.fragment,n)},m(n,i){Ue(e,n,i),r=!0},i(n){r||(oe(e.$$.fragment,n),r=!0)},o(n){he(e.$$.fragment,n),r=!1},d(n){Ve(e,n)}}}function o4(t){let e,r,n,i,a,o,s,l,h,c,f,p,g,b,v,m,D,S,y,A,F,P,O,C,x,z,G,Z;F=new X7({});const R=[s4,u4,a4,i4,n4],N=[];function q(j,J){return j[0]==="select"?0:j[0]==="edit"?1:j[0]==="generate"?2:j[0]==="slots"?3:j[0]==="settings"?4:-1}return~(C=q(t))&&(x=N[C]=R[C](t)),{c(){e=W("div"),r=W("div"),n=W("div"),i=W("button"),a=Fe("Select"),s=we(),l=W("button"),h=Fe("Edit"),f=we(),p=W("button"),g=Fe("Generate"),v=we(),m=W("button"),D=Fe("Slots"),y=we(),A=W("button"),Le(F.$$.fragment),O=we(),x&&x.c(),this.h()},l(j){e=H(j,"DIV",{class:!0});var J=U(e);r=H(J,"DIV",{class:!0});var Q=U(r);n=H(Q,"DIV",{class:!0});var te=U(n);i=H(te,"BUTTON",{class:!0});var ce=U(i);a=Se(ce,"Select"),ce.forEach(M),s=ye(te),l=H(te,"BUTTON",{class:!0});var me=U(l);h=Se(me,"Edit"),me.forEach(M),f=ye(te),p=H(te,"BUTTON",{class:!0});var Ee=U(p);g=Se(Ee,"Generate"),Ee.forEach(M),v=ye(te),m=H(te,"BUTTON",{class:!0});var be=U(m);D=Se(be,"Slots"),be.forEach(M),y=ye(te),A=H(te,"BUTTON",{class:!0});var Oe=U(A);Re(F.$$.fragment,Oe),Oe.forEach(M),te.forEach(M),O=ye(Q),x&&x.l(Q),Q.forEach(M),J.forEach(M),this.h()},h(){B(i,"class",o=t[0]==="select"?"btn btn-active":"btn"),B(l,"class",c=t[0]==="edit"?"btn btn-active":"btn"),B(p,"class",b=t[0]==="generate"?"btn btn-active":"btn"),B(m,"class",S=t[0]==="slots"?"btn btn-active":"btn"),B(A,"class",P=t[0]==="settings"?"btn btn-active":"btn"),B(n,"class","btn-group btn-group-vertical sm:btn-group-horizontal bg-base-100 w-full flex justify-center p-2"),B(r,"class","h-screen overflow-y-auto flex flex-col"),B(e,"class","max-w-md w-1/2 h-screen")},m(j,J){ue(j,e,J),T(e,r),T(r,n),T(n,i),T(i,a),T(n,s),T(n,l),T(l,h),T(n,f),T(n,p),T(p,g),T(n,v),T(n,m),T(m,D),T(n,y),T(n,A),Ue(F,A,null),T(r,O),~C&&N[C].m(r,null),z=!0,G||(Z=[_e(i,"click",t[2]),_e(l,"click",t[3]),_e(p,"click",t[4]),_e(m,"click",t[5]),_e(A,"click",t[6])],G=!0)},p(j,[J]){(!z||J&1&&o!==(o=j[0]==="select"?"btn btn-active":"btn"))&&B(i,"class",o),(!z||J&1&&c!==(c=j[0]==="edit"?"btn btn-active":"btn"))&&B(l,"class",c),(!z||J&1&&b!==(b=j[0]==="generate"?"btn btn-active":"btn"))&&B(p,"class",b),(!z||J&1&&S!==(S=j[0]==="slots"?"btn btn-active":"btn"))&&B(m,"class",S),(!z||J&1&&P!==(P=j[0]==="settings"?"btn btn-active":"btn"))&&B(A,"class",P);let Q=C;C=q(j),C!==Q&&(x&&(Gt(),he(N[Q],1,1,()=>{N[Q]=null}),Kt()),~C?(x=N[C],x||(x=N[C]=R[C](j),x.c()),oe(x,1),x.m(r,null)):x=null)},i(j){z||(oe(F.$$.fragment,j),oe(x),z=!0)},o(j){he(F.$$.fragment,j),he(x),z=!1},d(j){j&&M(e),Ve(F),~C&&N[C].d(),G=!1,Rt(Z)}}}function l4(t,e,r){let n;qe(t,pi,c=>r(0,n=c));function i(c){pi.update(c)}const a=()=>i("select"),o=()=>i("edit"),s=()=>i("generate"),l=()=>i("slots"),h=()=>i("settings");return t.$$.update=()=>{t.$$.dirty&1&&(n||pi.update("select"))},[n,i,a,o,s,l,h]}class c4 extends Je{constructor(e){super(),Qe(this,e,l4,o4,Xe,{})}}function f4(t){let e,r;return{c(){e=W("p"),r=Fe("Loading..."),this.h()},l(n){e=H(n,"P",{class:!0});var i=U(e);r=Se(i,"Loading..."),i.forEach(M),this.h()},h(){B(e,"class","text-lg")},m(n,i){ue(n,e,i),T(e,r)},i:Pe,o:Pe,d(n){n&&M(e)}}}function h4(t){let e,r;return{c(){e=W("p"),r=Fe("This tool is not optimized for small screens or mobile devices."),this.h()},l(n){e=H(n,"P",{class:!0});var i=U(e);r=Se(i,"This tool is not optimized for small screens or mobile devices."),i.forEach(M),this.h()},h(){B(e,"class","text-lg")},m(n,i){ue(n,e,i),T(e,r)},i:Pe,o:Pe,d(n){n&&M(e)}}}function d4(t){let e,r,n,i;return e=new c4({}),n=new o7({}),{c(){Le(e.$$.fragment),r=we(),Le(n.$$.fragment)},l(a){Re(e.$$.fragment,a),r=ye(a),Re(n.$$.fragment,a)},m(a,o){Ue(e,a,o),ue(a,r,o),Ue(n,a,o),i=!0},i(a){i||(oe(e.$$.fragment,a),oe(n.$$.fragment,a),i=!0)},o(a){he(e.$$.fragment,a),he(n.$$.fragment,a),i=!1},d(a){Ve(e,a),a&&M(r),Ve(n,a)}}}function p4(t){let e,r,n,i,a,o;gi(t[2]);const s=[d4,h4,f4],l=[];function h(c,f){return c[0]&&c[1]&&c[0]>1024&&c[1]>800?0:c[0]&&c[1]?1:2}return e=h(t),r=l[e]=s[e](t),{c(){r.c(),n=Ct()},l(c){r.l(c),n=Ct()},m(c,f){l[e].m(c,f),ue(c,n,f),i=!0,a||(o=_e(window,"resize",t[2]),a=!0)},p(c,[f]){let p=e;e=h(c),e!==p&&(Gt(),he(l[p],1,1,()=>{l[p]=null}),Kt(),r=l[e],r||(r=l[e]=s[e](c),r.c()),oe(r,1),r.m(n.parentNode,n))},i(c){i||(oe(r),i=!0)},o(c){he(r),i=!1},d(c){l[e].d(c),c&&M(n),a=!1,o()}}}function g4(t,e,r){let n=null,i=null;function a(){r(0,n=window.innerWidth),r(1,i=window.innerHeight)}return[n,i,a]}class _4 extends Je{constructor(e){super(),Qe(this,e,g4,p4,Xe,{})}}export{_4 as default};
