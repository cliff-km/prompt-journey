import{J as Lt,S as It,i as Tt,s as Nt,K as bt,L as At,m as re,h as V,n as T,p as Zt,b as _e,H as Pe,M as Le,N as Wr,k as ae,q as Ye,l as se,r as $e,G as J,u as Sn,a as Ge,c as Ke,g as Me,v as pn,d as Te,f as vn,I as Mt,y as ot,e as zt,z as lt,A as ft,B as ct,O as $l,P as gs,Q as ms,R as mi,T as xy,U as Wo,V as bi,W as vd,X as Iy,j as Ty,o as Ny,Y as Di,Z as Ds,_ as pu,$ as fu}from"../chunks/index.8f0b1a8a.js";import{d as Bn,w as On}from"../chunks/index.4d4fc2a3.js";function Cl(){return Cl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Cl.apply(this,arguments)}var gd={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function Xt(t){return typeof t=="number"}function dn(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function md(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function Dd(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function _d(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Rn(t){return typeof t=="string"}var Yt=Array.isArray;function Rr(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function $a(t){return Array.isArray(t)||Rr(t)}function ky(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Ry(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Ly(t){return t&&t.constructor.prototype.isRange===!0||!1}function Zl(t){return t&&t.constructor.prototype.isIndex===!0||!1}function Uy(t){return typeof t=="boolean"}function jy(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function Vy(t){return t&&t.constructor.prototype.isHelp===!0||!1}function qy(t){return typeof t=="function"}function zy(t){return t instanceof Date}function Wy(t){return t instanceof RegExp}function Hy(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!md(t)&&!Dd(t))}function Gy(t){return t===null}function yd(t){return t===void 0}function Ky(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Yy(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function $y(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Zy(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function Xy(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Jy(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function Qy(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function eb(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function tb(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function rb(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function nb(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function ib(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function ub(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function ab(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function sb(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function ob(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function lb(t){return t&&t.constructor.prototype.isChain===!0||!1}function Ku(t){var e=typeof t;return e==="object"?t===null?"null":dn(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function _r(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return _r(r)});if(t instanceof Date)return new Date(t.valueOf());if(dn(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return fb(t,_r)}function fb(t,e){var r={};for(var i in t)Yu(t,i)&&(r[i]=e(t[i]));return r}function cb(t,e){for(var r in e)Yu(e,r)&&(t[r]=e[r]);return t}function Za(t,e){var r,i,u;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(i=0,u=t.length;i<u;i++)if(!Za(t[i],e[i]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!Za(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function Yu(t,e){return t&&Object.hasOwnProperty.call(t,e)}function hb(t,e){for(var r={},i=0;i<e.length;i++){var u=e[i],a=t[u];a!==void 0&&(r[u]=a)}return r}var db=["Matrix","Array"],pb=["number","BigNumber","Fraction"],_s=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(gd)};Cl(_s,gd,{MATRIX_OPTIONS:db,NUMBER_OPTIONS:pb});function En(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=vb(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var i=0,u=function(){};return{s:u,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(p){throw p},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){r=r.call(t)},n:function(){var p=r.next();return a=p.done,p},e:function(p){o=!0,l=p},f:function(){try{!a&&r.return!=null&&r.return()}finally{if(o)throw l}}}}function vb(t,e){if(t){if(typeof t=="string")return B0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B0(t,e)}}function B0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function uu(t){return uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uu(t)}function O0(){return!0}function hn(){return!1}function ru(){}var M0="Argument is not a typed-function.";function bd(){function t(R){return uu(R)==="object"&&R!==null&&R.constructor===Object}var e=[{name:"number",test:function(j){return typeof j=="number"}},{name:"string",test:function(j){return typeof j=="string"}},{name:"boolean",test:function(j){return typeof j=="boolean"}},{name:"Function",test:function(j){return typeof j=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(j){return j instanceof Date}},{name:"RegExp",test:function(j){return j instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(j){return j===null}},{name:"undefined",test:function(j){return j===void 0}}],r={name:"any",test:O0,isAny:!0},i,u,a=0,o={createCount:0};function l(R){var j=i.get(R);if(j)return j;var Y='Unknown type "'+R+'"',ue=R.toLowerCase(),ee,he=En(u),ie;try{for(he.s();!(ie=he.n()).done;)if(ee=ie.value,ee.toLowerCase()===ue){Y+='. Did you mean "'+ee+'" ?';break}}catch(oe){he.e(oe)}finally{he.f()}throw new TypeError(Y)}function d(R){for(var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",Y=j?l(j).index:u.length,ue=[],ee=0;ee<R.length;++ee){if(!R[ee]||typeof R[ee].name!="string"||typeof R[ee].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var he=R[ee].name;if(i.has(he))throw new TypeError('Duplicate type name "'+he+'"');ue.push(he),i.set(he,{name:he,test:R[ee].test,isAny:R[ee].isAny,index:Y+ee,conversionsTo:[]})}var ie=u.slice(Y);u=u.slice(0,Y).concat(ue).concat(ie);for(var oe=Y+ue.length;oe<u.length;++oe)i.get(u[oe]).index=oe}function p(){i=new Map,u=[],a=0,d([r],!1)}p(),d(e);function c(){var R,j=En(u),Y;try{for(j.s();!(Y=j.n()).done;)R=Y.value,i.get(R).conversionsTo=[]}catch(ue){j.e(ue)}finally{j.f()}a=0}function f(R){var j=u.filter(function(Y){var ue=i.get(Y);return!ue.isAny&&ue.test(R)});return j.length?j:["any"]}function h(R){return R&&typeof R=="function"&&"_typedFunctionData"in R}function D(R,j,Y){if(!h(R))throw new TypeError(M0);var ue=Y&&Y.exact,ee=Array.isArray(j)?j.join(","):j,he=B(ee),ie=m(he);if(!ue||ie in R.signatures){var oe=R._typedFunctionData.signatureMap.get(ie);if(oe)return oe}var De=he.length,Be;if(ue){Be=[];var We;for(We in R.signatures)Be.push(R._typedFunctionData.signatureMap.get(We))}else Be=R._typedFunctionData.signatures;for(var we=0;we<De;++we){var Wt=he[we],kt=[],Jt=void 0,Ht=En(Be),pr;try{for(Ht.s();!(pr=Ht.n()).done;){Jt=pr.value;var Gt=I(Jt.params,we);if(!(!Gt||Wt.restParam&&!Gt.restParam)){if(!Gt.hasAny){var vr=function(){var fr=w(Gt);if(Wt.types.some(function(Dn){return!fr.has(Dn.name)}))return"continue"}();if(vr==="continue")continue}kt.push(Jt)}}}catch(fr){Ht.e(fr)}finally{Ht.f()}if(Be=kt,Be.length===0)break}var sr,or=En(Be),en;try{for(or.s();!(en=or.n()).done;)if(sr=en.value,sr.params.length<=De)return sr}catch(fr){or.e(fr)}finally{or.f()}throw new TypeError("Signature not found (signature: "+(R.name||"unnamed")+"("+m(he,", ")+"))")}function b(R,j,Y){return D(R,j,Y).implementation}function g(R,j){var Y=l(j);if(Y.test(R))return R;var ue=Y.conversionsTo;if(ue.length===0)throw new Error("There are no conversions to "+j+" defined.");for(var ee=0;ee<ue.length;ee++){var he=l(ue[ee].from);if(he.test(R))return ue[ee].convert(R)}throw new Error("Cannot convert "+R+" to "+j)}function m(R){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return R.map(function(Y){return Y.name}).join(j)}function y(R){var j=R.indexOf("...")===0,Y=j?R.length>3?R.slice(3):"any":R,ue=Y.split("|").map(function(oe){return l(oe.trim())}),ee=!1,he=j?"...":"",ie=ue.map(function(oe){return ee=oe.isAny||ee,he+=oe.name+"|",{name:oe.name,typeIndex:oe.index,test:oe.test,isAny:oe.isAny,conversion:null,conversionIndex:-1}});return{types:ie,name:he.slice(0,-1),hasAny:ee,hasConversion:!1,restParam:j}}function E(R){var j=R.types.map(function(ie){return ie.name}),Y=te(j),ue=R.hasAny,ee=R.name,he=Y.map(function(ie){var oe=l(ie.from);return ue=oe.isAny||ue,ee+="|"+ie.from,{name:ie.from,typeIndex:oe.index,test:oe.test,isAny:oe.isAny,conversion:ie,conversionIndex:ie.index}});return{types:R.types.concat(he),name:ee,hasAny:ue,hasConversion:he.length>0,restParam:R.restParam}}function w(R){return R.typeSet||(R.typeSet=new Set,R.types.forEach(function(j){return R.typeSet.add(j.name)})),R.typeSet}function B(R){var j=[];if(typeof R!="string")throw new TypeError("Signatures must be strings");var Y=R.trim();if(Y==="")return j;for(var ue=Y.split(","),ee=0;ee<ue.length;++ee){var he=y(ue[ee].trim());if(he.restParam&&ee!==ue.length-1)throw new SyntaxError('Unexpected rest parameter "'+ue[ee]+'": only allowed for the last parameter');if(he.types.length===0)return null;j.push(he)}return j}function F(R){var j=Qe(R);return j?j.restParam:!1}function O(R){if(!R||R.types.length===0)return O0;if(R.types.length===1)return l(R.types[0].name).test;if(R.types.length===2){var j=l(R.types[0].name).test,Y=l(R.types[1].name).test;return function(he){return j(he)||Y(he)}}else{var ue=R.types.map(function(ee){return l(ee.name).test});return function(he){for(var ie=0;ie<ue.length;ie++)if(ue[ie](he))return!0;return!1}}}function P(R){var j,Y,ue;if(F(R)){j=vt(R).map(O);var ee=j.length,he=O(Qe(R)),ie=function(De){for(var Be=ee;Be<De.length;Be++)if(!he(De[Be]))return!1;return!0};return function(De){for(var Be=0;Be<j.length;Be++)if(!j[Be](De[Be]))return!1;return ie(De)&&De.length>=ee+1}}else return R.length===0?function(De){return De.length===0}:R.length===1?(Y=O(R[0]),function(De){return Y(De[0])&&De.length===1}):R.length===2?(Y=O(R[0]),ue=O(R[1]),function(De){return Y(De[0])&&ue(De[1])&&De.length===2}):(j=R.map(O),function(De){for(var Be=0;Be<j.length;Be++)if(!j[Be](De[Be]))return!1;return De.length===j.length})}function I(R,j){return j<R.length?R[j]:F(R)?Qe(R):null}function N(R,j){var Y=I(R,j);return Y?w(Y):new Set}function W(R){return R.conversion===null||R.conversion===void 0}function $(R,j){var Y=new Set;return R.forEach(function(ue){var ee=N(ue.params,j),he,ie=En(ee),oe;try{for(ie.s();!(oe=ie.n()).done;)he=oe.value,Y.add(he)}catch(De){ie.e(De)}finally{ie.f()}}),Y.has("any")?["any"]:Array.from(Y)}function K(R,j,Y){var ue,ee,he=R||"unnamed",ie=Y,oe,De=function(){var Ht=[];if(ie.forEach(function(Gt){var vr=I(Gt.params,oe),sr=O(vr);(oe<Gt.params.length||F(Gt.params))&&sr(j[oe])&&Ht.push(Gt)}),Ht.length===0){if(ee=$(ie,oe),ee.length>0){var pr=f(j[oe]);return ue=new TypeError("Unexpected type of argument in function "+he+" (expected: "+ee.join(" or ")+", actual: "+pr.join(" | ")+", index: "+oe+")"),ue.data={category:"wrongType",fn:he,index:oe,actual:pr,expected:ee},{v:ue}}}else ie=Ht};for(oe=0;oe<j.length;oe++){var Be=De();if(uu(Be)==="object")return Be.v}var We=ie.map(function(Jt){return F(Jt.params)?1/0:Jt.params.length});if(j.length<Math.min.apply(null,We))return ee=$(ie,oe),ue=new TypeError("Too few arguments in function "+he+" (expected: "+ee.join(" or ")+", index: "+j.length+")"),ue.data={category:"tooFewArgs",fn:he,index:j.length,expected:ee},ue;var we=Math.max.apply(null,We);if(j.length>we)return ue=new TypeError("Too many arguments in function "+he+" (expected: "+we+", actual: "+j.length+")"),ue.data={category:"tooManyArgs",fn:he,index:j.length,expectedLength:we},ue;for(var Wt=[],kt=0;kt<j.length;++kt)Wt.push(f(j[kt]).join("|"));return ue=new TypeError('Arguments of type "'+Wt.join(", ")+'" do not match any of the defined signatures of function '+he+"."),ue.data={category:"mismatch",actual:Wt},ue}function q(R){for(var j=u.length+1,Y=0;Y<R.types.length;Y++)W(R.types[Y])&&(j=Math.min(j,R.types[Y].typeIndex));return j}function G(R){for(var j=a+1,Y=0;Y<R.types.length;Y++)W(R.types[Y])||(j=Math.min(j,R.types[Y].conversionIndex));return j}function L(R,j){if(R.hasAny){if(!j.hasAny)return 1}else if(j.hasAny)return-1;if(R.restParam){if(!j.restParam)return 1}else if(j.restParam)return-1;if(R.hasConversion){if(!j.hasConversion)return 1}else if(j.hasConversion)return-1;var Y=q(R)-q(j);if(Y<0)return-1;if(Y>0)return 1;var ue=G(R)-G(j);return ue<0?-1:ue>0?1:0}function z(R,j){var Y=R.params,ue=j.params,ee=Qe(Y),he=Qe(ue),ie=F(Y),oe=F(ue);if(ie&&ee.hasAny){if(!oe||!he.hasAny)return 1}else if(oe&&he.hasAny)return-1;var De=0,Be=0,We,we=En(Y),Wt;try{for(we.s();!(Wt=we.n()).done;)We=Wt.value,We.hasAny&&++De,We.hasConversion&&++Be}catch(Mn){we.e(Mn)}finally{we.f()}var kt=0,Jt=0,Ht=En(ue),pr;try{for(Ht.s();!(pr=Ht.n()).done;)We=pr.value,We.hasAny&&++kt,We.hasConversion&&++Jt}catch(Mn){Ht.e(Mn)}finally{Ht.f()}if(De!==kt)return De-kt;if(ie&&ee.hasConversion){if(!oe||!he.hasConversion)return 1}else if(oe&&he.hasConversion)return-1;if(Be!==Jt)return Be-Jt;if(ie){if(!oe)return 1}else if(oe)return-1;var Gt=(Y.length-ue.length)*(ie?-1:1);if(Gt!==0)return Gt;for(var vr=[],sr=0,or=0;or<Y.length;++or){var en=L(Y[or],ue[or]);vr.push(en),sr+=en}if(sr!==0)return sr;for(var fr,Dn=0,qn=vr;Dn<qn.length;Dn++)if(fr=qn[Dn],fr!==0)return fr;return 0}function te(R){if(R.length===0)return[];var j=R.map(l);R.length>1&&j.sort(function(De,Be){return De.index-Be.index});var Y=j[0].conversionsTo;if(R.length===1)return Y;Y=Y.concat([]);for(var ue=new Set(R),ee=1;ee<j.length;++ee){var he=void 0,ie=En(j[ee].conversionsTo),oe;try{for(ie.s();!(oe=ie.n()).done;)he=oe.value,ue.has(he.from)||(Y.push(he),ue.add(he.from))}catch(De){ie.e(De)}finally{ie.f()}}return Y}function le(R,j){var Y=j;if(R.some(function(oe){return oe.hasConversion})){var ue=F(R),ee=R.map(ve);Y=function(){for(var De=[],Be=ue?arguments.length-1:arguments.length,We=0;We<Be;We++)De[We]=ee[We](arguments[We]);return ue&&(De[Be]=arguments[Be].map(ee[Be])),j.apply(this,De)}}var he=Y;if(F(R)){var ie=R.length-1;he=function(){return Y.apply(this,it(arguments,0,ie).concat([it(arguments,ie)]))}}return he}function ve(R){var j,Y,ue,ee,he=[],ie=[];switch(R.types.forEach(function(oe){oe.conversion&&(he.push(l(oe.conversion.from).test),ie.push(oe.conversion.convert))}),ie.length){case 0:return function(De){return De};case 1:return j=he[0],ue=ie[0],function(De){return j(De)?ue(De):De};case 2:return j=he[0],Y=he[1],ue=ie[0],ee=ie[1],function(De){return j(De)?ue(De):Y(De)?ee(De):De};default:return function(De){for(var Be=0;Be<ie.length;Be++)if(he[Be](De))return ie[Be](De);return De}}}function ye(R){function j(Y,ue,ee){if(ue<Y.length){var he=Y[ue],ie=[];if(he.restParam){var oe=he.types.filter(W);oe.length<he.types.length&&ie.push({types:oe,name:"..."+oe.map(function(De){return De.name}).join("|"),hasAny:oe.some(function(De){return De.isAny}),hasConversion:!1,restParam:!0}),ie.push(he)}else ie=he.types.map(function(De){return{types:[De],name:De.name,hasAny:De.isAny,hasConversion:De.conversion,restParam:!1}});return mt(ie,function(De){return j(Y,ue+1,ee.concat([De]))})}else return[ee]}return j(R,0,[])}function Se(R,j){for(var Y=Math.max(R.length,j.length),ue=0;ue<Y;ue++){var ee=N(R,ue),he=N(j,ue),ie=!1,oe=void 0,De=En(he),Be;try{for(De.s();!(Be=De.n()).done;)if(oe=Be.value,ee.has(oe)){ie=!0;break}}catch(Jt){De.e(Jt)}finally{De.f()}if(!ie)return!1}var We=R.length,we=j.length,Wt=F(R),kt=F(j);return Wt?kt?We===we:we>=We:kt?We>=we:We===we}function xe(R){return R.map(function(j){return Ft(j)?wt(j.referToSelf.callback):br(j)?Xe(j.referTo.references,j.referTo.callback):j})}function Fe(R,j,Y){var ue=[],ee,he=En(R),ie;try{for(he.s();!(ie=he.n()).done;){ee=ie.value;var oe=Y[ee];if(typeof oe!="number")throw new TypeError('No definition for referenced signature "'+ee+'"');if(oe=j[oe],typeof oe!="function")return!1;ue.push(oe)}}catch(De){he.e(De)}finally{he.f()}return ue}function Ne(R,j,Y){for(var ue=xe(R),ee=new Array(ue.length).fill(!1),he=!0;he;){he=!1;for(var ie=!0,oe=0;oe<ue.length;++oe)if(!ee[oe]){var De=ue[oe];if(Ft(De))ue[oe]=De.referToSelf.callback(Y),ue[oe].referToSelf=De.referToSelf,ee[oe]=!0,ie=!1;else if(br(De)){var Be=Fe(De.referTo.references,ue,j);Be?(ue[oe]=De.referTo.callback.apply(this,Be),ue[oe].referTo=De.referTo,ee[oe]=!0,ie=!1):he=!0}}if(ie&&he)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return ue}function ke(R){var j=/\bthis(\(|\.signatures\b)/;Object.keys(R).forEach(function(Y){var ue=R[Y];if(j.test(ue.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Ue(R,j){if(o.createCount++,Object.keys(j).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&ke(j);var Y=[],ue=[],ee={},he=[],ie,oe=function(){if(!Object.prototype.hasOwnProperty.call(j,ie))return"continue";var rr=B(ie);if(!rr)return"continue";Y.forEach(function(rn){if(Se(rn,rr))throw new TypeError('Conflicting signatures "'+m(rn)+'" and "'+m(rr)+'".')}),Y.push(rr);var Ir=ue.length;ue.push(j[ie]);var Ci=rr.map(E),Wn=void 0,In=En(ye(Ci)),Si;try{for(In.s();!(Si=In.n()).done;){Wn=Si.value;var _n=m(Wn);he.push({params:Wn,name:_n,fn:Ir}),Wn.every(function(rn){return!rn.hasConversion})&&(ee[_n]=Ir)}}catch(rn){In.e(rn)}finally{In.f()}};for(ie in j)var De=oe();he.sort(z);var Be=Ne(ue,ee,xn),We;for(We in ee)Object.prototype.hasOwnProperty.call(ee,We)&&(ee[We]=Be[ee[We]]);for(var we=[],Wt=new Map,kt=0,Jt=he;kt<Jt.length;kt++)We=Jt[kt],Wt.has(We.name)||(We.fn=Be[We.fn],we.push(We),Wt.set(We.name,We));for(var Ht=we[0]&&we[0].params.length<=2&&!F(we[0].params),pr=we[1]&&we[1].params.length<=2&&!F(we[1].params),Gt=we[2]&&we[2].params.length<=2&&!F(we[2].params),vr=we[3]&&we[3].params.length<=2&&!F(we[3].params),sr=we[4]&&we[4].params.length<=2&&!F(we[4].params),or=we[5]&&we[5].params.length<=2&&!F(we[5].params),en=Ht&&pr&&Gt&&vr&&sr&&or,fr=0;fr<we.length;++fr)we[fr].test=P(we[fr].params);for(var Dn=Ht?O(we[0].params[0]):hn,qn=pr?O(we[1].params[0]):hn,Mn=Gt?O(we[2].params[0]):hn,Pn=vr?O(we[3].params[0]):hn,Ui=sr?O(we[4].params[0]):hn,Ei=or?O(we[5].params[0]):hn,gu=Ht?O(we[0].params[1]):hn,Ar=pr?O(we[1].params[1]):hn,Qt=Gt?O(we[2].params[1]):hn,mu=vr?O(we[3].params[1]):hn,ni=sr?O(we[4].params[1]):hn,tn=or?O(we[5].params[1]):hn,zn=0;zn<we.length;++zn)we[zn].implementation=le(we[zn].params,we[zn].fn);var Fi=Ht?we[0].implementation:ru,Du=pr?we[1].implementation:ru,_u=Gt?we[2].implementation:ru,ji=vr?we[3].implementation:ru,yu=sr?we[4].implementation:ru,bu=or?we[5].implementation:ru,Au=Ht?we[0].params.length:-1,wu=pr?we[1].params.length:-1,Eu=Gt?we[2].params.length:-1,Fu=vr?we[3].params.length:-1,ii=sr?we[4].params.length:-1,Cu=or?we[5].params.length:-1,ui=en?6:0,Su=we.length,Bu=we.map(function(gr){return gr.test}),Ou=we.map(function(gr){return gr.implementation}),Vi=function(){for(var rr=ui;rr<Su;rr++)if(Bu[rr](arguments))return Ou[rr].apply(this,arguments);return o.onMismatch(R,arguments,we)};function xn(gr,rr){return arguments.length===Au&&Dn(gr)&&gu(rr)?Fi.apply(this,arguments):arguments.length===wu&&qn(gr)&&Ar(rr)?Du.apply(this,arguments):arguments.length===Eu&&Mn(gr)&&Qt(rr)?_u.apply(this,arguments):arguments.length===Fu&&Pn(gr)&&mu(rr)?ji.apply(this,arguments):arguments.length===ii&&Ui(gr)&&ni(rr)?yu.apply(this,arguments):arguments.length===Cu&&Ei(gr)&&tn(rr)?bu.apply(this,arguments):Vi.apply(this,arguments)}try{Object.defineProperty(xn,"name",{value:R})}catch{}return xn.signatures=ee,xn._typedFunctionData={signatures:we,signatureMap:Wt},xn}function at(R,j,Y){throw K(R,j,Y)}function vt(R){return it(R,0,R.length-1)}function Qe(R){return R[R.length-1]}function it(R,j,Y){return Array.prototype.slice.call(R,j,Y)}function gt(R,j){for(var Y=0;Y<R.length;Y++)if(j(R[Y]))return R[Y]}function mt(R,j){return Array.prototype.concat.apply([],R.map(j))}function rt(){var R=vt(arguments).map(function(Y){return m(B(Y))}),j=Qe(arguments);if(typeof j!="function")throw new TypeError("Callback function expected as last argument");return Xe(R,j)}function Xe(R,j){return{referTo:{references:R,callback:j}}}function wt(R){if(typeof R!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:R}}}function br(R){return R&&uu(R.referTo)==="object"&&Array.isArray(R.referTo.references)&&typeof R.referTo.callback=="function"}function Ft(R){return R&&uu(R.referToSelf)==="object"&&typeof R.referToSelf.callback=="function"}function Ae(R,j){if(!R)return j;if(j&&j!==R){var Y=new Error("Function names do not match (expected: "+R+", actual: "+j+")");throw Y.data={actual:j,expected:R},Y}return R}function be(R){var j;for(var Y in R)Object.prototype.hasOwnProperty.call(R,Y)&&(h(R[Y])||typeof R[Y].signature=="string")&&(j=Ae(j,R[Y].name));return j}function Dt(R,j){var Y;for(Y in j)if(Object.prototype.hasOwnProperty.call(j,Y)){if(Y in R&&j[Y]!==R[Y]){var ue=new Error('Signature "'+Y+'" is defined twice');throw ue.data={signature:Y,sourceFunction:j[Y],destFunction:R[Y]},ue}R[Y]=j[Y]}}var jt=o;o=function(j){for(var Y=typeof j=="string",ue=Y?1:0,ee=Y?j:"",he={},ie=ue;ie<arguments.length;++ie){var oe=arguments[ie],De={},Be=void 0;if(typeof oe=="function"?(Be=oe.name,typeof oe.signature=="string"?De[oe.signature]=oe:h(oe)&&(De=oe.signatures)):t(oe)&&(De=oe,Y||(Be=be(oe))),Object.keys(De).length===0){var We=new TypeError("Argument to 'typed' at index "+ie+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw We.data={index:ie,argument:oe},We}Y||(ee=Ae(ee,Be)),Dt(he,De)}return Ue(ee||"",he)},o.create=bd,o.createCount=jt.createCount,o.onMismatch=at,o.throwMismatchError=at,o.createError=K,o.clear=p,o.clearConversions=c,o.addTypes=d,o._findType=l,o.referTo=rt,o.referToSelf=wt,o.convert=g,o.findSignature=D,o.find=b,o.isTypedFunction=h,o.warnAgainstDeprecatedThis=!0,o.addType=function(R,j){var Y="any";j!==!1&&i.has("Object")&&(Y="Object"),o.addTypes([R],Y)};function ar(R){if(!R||typeof R.from!="string"||typeof R.to!="string"||typeof R.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(R.to===R.from)throw new SyntaxError('Illegal to define conversion from "'+R.from+'" to itself.')}return o.addConversion=function(R){ar(R);var j=l(R.to);if(j.conversionsTo.every(function(Y){return Y.from!==R.from}))j.conversionsTo.push({from:R.from,convert:R.convert,index:a++});else throw new Error('There is already a conversion from "'+R.from+'" to "'+j.name+'"')},o.addConversions=function(R){R.forEach(o.addConversion)},o.removeConversion=function(R){ar(R);var j=l(R.to),Y=gt(j.conversionsTo,function(ee){return ee.from===R.from});if(!Y)throw new Error("Attempt to remove nonexistent conversion from "+R.from+" to "+R.to);if(Y.convert!==R.convert)throw new Error("Conversion to remove does not match existing conversion");var ue=j.conversionsTo.indexOf(Y);j.conversionsTo.splice(ue,1)},o.resolve=function(R,j){if(!h(R))throw new TypeError(M0);for(var Y=R._typedFunctionData.signatures,ue=0;ue<Y.length;++ue)if(Y[ue].test(j))return Y[ue];return null},o}const P0=bd();function yr(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function Ho(t,e,r){var i={2:"0b",8:"0o",16:"0x"},u=i[e],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!yr(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!yr(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),a="i".concat(r)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(u).concat(t.toString(e)).concat(a)}function Sl(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",i,u;if(e&&(e.notation&&(r=e.notation),Xt(e)?i=e:Xt(e.precision)&&(i=e.precision),e.wordSize&&(u=e.wordSize,typeof u!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return mb(t,i);case"exponential":return Ad(t,i);case"engineering":return gb(t,i);case"bin":return Ho(t,2,u);case"oct":return Ho(t,8,u);case"hex":return Ho(t,16,u);case"auto":return Db(t,i,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],o=arguments[4];return a!=="."?a+o:o});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function ys(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],i=e[2],u=parseFloat(e[4]||"0"),a=i.indexOf(".");u+=a!==-1?a-1:i.length-1;var o=i.replace(".","").replace(/^0*/,function(l){return u-=l.length,""}).replace(/0*$/,"").split("").map(function(l){return parseInt(l)});return o.length===0&&(o.push(0),u++),{sign:r,coefficients:o,exponent:u}}function gb(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=ys(t),i=bs(r,e),u=i.exponent,a=i.coefficients,o=u%3===0?u:u<0?u-3-u%3:u-u%3;if(Xt(e))for(;e>a.length||u-o+1>a.length;)a.push(0);else for(var l=Math.abs(u-o)-(a.length-1),d=0;d<l;d++)a.push(0);for(var p=Math.abs(u-o),c=1;p>0;)c++,p--;var f=a.slice(c).join(""),h=Xt(e)&&f.length||f.match(/[1-9]/)?"."+f:"",D=a.slice(0,c).join("")+h+"e"+(u>=0?"+":"")+o.toString();return i.sign+D}function mb(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=ys(t),i=typeof e=="number"?bs(r,r.exponent+1+e):r,u=i.coefficients,a=i.exponent+1,o=a+(e||0);return u.length<o&&(u=u.concat(ou(o-u.length))),a<0&&(u=ou(-a+1).concat(u),a=1),a<u.length&&u.splice(a,0,a===0?"0.":"."),i.sign+u.join("")}function Ad(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=ys(t),i=e?bs(r,e):r,u=i.coefficients,a=i.exponent;u.length<e&&(u=u.concat(ou(e-u.length)));var o=u.shift();return i.sign+o+(u.length>0?"."+u.join(""):"")+"e"+(a>=0?"+":"")+a}function Db(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var i=r&&r.lowerExp!==void 0?r.lowerExp:-3,u=r&&r.upperExp!==void 0?r.upperExp:5,a=ys(t),o=e?bs(a,e):a;if(o.exponent<i||o.exponent>=u)return Ad(t,e);var l=o.coefficients,d=o.exponent;l.length<e&&(l=l.concat(ou(e-l.length))),l=l.concat(ou(d-l.length+1+(l.length<e?e-l.length:0))),l=ou(-d).concat(l);var p=d>0?d:0;return p<l.length-1&&l.splice(p+1,0,"."),o.sign+l.join("")}function bs(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},i=r.coefficients;e<=0;)i.unshift(0),r.exponent++,e++;if(i.length>e){var u=i.splice(e,i.length-e);if(u[0]>=5){var a=e-1;for(i[a]++;i[a]===10;)i.pop(),a===0&&(i.unshift(0),r.exponent++,a++),a--,i[a]++}}return r}function ou(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function _b(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var yb=Number.EPSILON||2220446049250313e-31;function Xa(t,e,r){if(r==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var i=Math.abs(t-e);return i<yb?!0:i<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}function Go(t,e,r){var i=t.constructor,u=new i(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!yr(r))throw new Error("size must be an integer");if(t.greaterThan(u.pow(r-1).sub(1))||t.lessThan(u.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(u.pow(r))),a="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function bb(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",i,u;if(e!==void 0&&(e.notation&&(r=e.notation),typeof e=="number"?i=e:e.precision&&(i=e.precision),e.wordSize&&(u=e.wordSize,typeof u!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return wb(t,i);case"exponential":return x0(t,i);case"engineering":return Ab(t,i);case"bin":return Go(t,2,u);case"oct":return Go(t,8,u);case"hex":return Go(t,16,u);case"auto":{var a=e&&e.lowerExp!==void 0?e.lowerExp:-3,o=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var l,d=t.toSignificantDigits(i),p=d.e;return p>=a&&p<o?l=d.toFixed():l=x0(t,i),l.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Ab(t,e){var r=t.e,i=r%3===0?r:r<0?r-3-r%3:r-r%3,u=t.mul(Math.pow(10,-i)),a=u.toPrecision(e);return a.indexOf("e")!==-1&&(a=u.toString()),a+"e"+(r>=0?"+":"")+i.toString()}function x0(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function wb(t,e){return t.toFixed(e)}function qr(t,e){var r=Eb(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function Eb(t,e){if(typeof t=="number")return Sl(t,e);if(dn(t))return bb(t,e);if(Fb(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return wd(t,e);if(Rn(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(i=>'"'+i+'": '+qr(t[i],e));return"{"+r.join(", ")+"}"}return String(t)}function wd(t,e){if(Array.isArray(t)){for(var r="[",i=t.length,u=0;u<i;u++)u!==0&&(r+=", "),r+=wd(t[u],e);return r+="]",r}else return qr(t,e)}function Fb(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function Ct(t,e,r){if(!(this instanceof Ct))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Ct.prototype=new RangeError;Ct.prototype.constructor=RangeError;Ct.prototype.name="DimensionError";Ct.prototype.isDimensionError=!0;function Li(t,e,r){if(!(this instanceof Li))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Li.prototype=new RangeError;Li.prototype.constructor=RangeError;Li.prototype.name="IndexError";Li.prototype.isIndexError=!0;function _i(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function Ed(t,e,r){var i,u=t.length;if(u!==e[r])throw new Ct(u,e[r]);if(r<e.length-1){var a=r+1;for(i=0;i<u;i++){var o=t[i];if(!Array.isArray(o))throw new Ct(e.length-1,e.length,"<");Ed(t[i],e,a)}}else for(i=0;i<u;i++)if(Array.isArray(t[i]))throw new Ct(e.length+1,e.length,">")}function I0(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new Ct(t.length,0)}else Ed(t,e,0)}function $t(t,e){if(!Xt(t)||!yr(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Li(t,e)}function T0(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(u){if(!Xt(u)||!yr(u)||u<0)throw new TypeError("Invalid size, must contain positive integers (size: "+qr(e)+")")});var i=r!==void 0?r:0;return Bl(t,e,0,i),t}function Bl(t,e,r,i){var u,a,o=t.length,l=e[r],d=Math.min(o,l);if(t.length=l,r<e.length-1){var p=r+1;for(u=0;u<d;u++)a=t[u],Array.isArray(a)||(a=[a],t[u]=a),Bl(a,e,p,i);for(u=d;u<l;u++)a=[],t[u]=a,Bl(a,e,p,i)}else{for(u=0;u<d;u++)for(;Array.isArray(t[u]);)t[u]=t[u][0];for(u=d;u<l;u++)t[u]=i}}function Cb(t,e){var r=Bb(t),i=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Ct(0,i,"!=");e=Xl(e,i);var u=Fd(e);if(i!==u)throw new Ct(u,i,"!=");try{return Sb(r,e)}catch(a){throw a instanceof Ct?new Ct(u,i,"!="):a}}function Xl(t,e){var r=Fd(t),i=t.slice(),u=-1,a=t.indexOf(u),o=t.indexOf(u,a+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var l=a>=0,d=e%r===0;if(l)if(d)i[a]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return i}function Fd(t){return t.reduce((e,r)=>e*r,1)}function Sb(t,e){for(var r=t,i,u=e.length-1;u>0;u--){var a=e[u];i=[];for(var o=r.length/a,l=0;l<o;l++)i.push(r.slice(l*a,(l+1)*a));r=i}return r}function Cd(t,e,r,i){var u=i||_i(t);if(r)for(var a=0;a<r;a++)t=[t],u.unshift(1);for(t=Sd(t,e,0);u.length<e;)u.push(1);return t}function Sd(t,e,r){var i,u;if(Array.isArray(t)){var a=r+1;for(i=0,u=t.length;i<u;i++)t[i]=Sd(t[i],e,a)}else for(var o=r;o<e;o++)t=[t];return t}function Bb(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function r(i){Array.isArray(i)?i.forEach(r):e.push(i)}),e}function Ja(t,e){for(var r,i=0,u=0;u<t.length;u++){var a=t[u],o=Array.isArray(a);if(u===0&&o&&(i=a.length),o&&a.length!==i)return;var l=o?Ja(a,e):e(a);if(r===void 0)r=l;else if(r!==l)return"mixed"}return r}function Bt(t,e,r,i){function u(a){var o=hb(a,e.map(Pb));return Ob(t,e,a),r(o)}return u.isFactory=!0,u.fn=t,u.dependencies=e.slice().sort(),i&&(u.meta=i),u}function Ob(t,e,r){var i=e.filter(a=>!Mb(a)).every(a=>r[a]!==void 0);if(!i){var u=e.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(u.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function Mb(t){return t&&t[0]==="?"}function Pb(t){return t&&t[0]==="?"?t.slice(1):t}function xb(t,e){if(Od(t)&&Bd(t,e))return t[e];throw typeof t[e]=="function"&&Nb(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Ib(t,e,r){if(Od(t)&&Bd(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function Tb(t,e){return e in t}function Bd(t,e){return!t||typeof t!="object"?!1:Yu(kb,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Nb(t,e){return t==null||typeof t[e]!="function"||Yu(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:Yu(Rb,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Od(t){return typeof t=="object"&&t&&t.constructor===Object}var kb={length:!0,name:!0},Rb={toString:!0,valueOf:!0,toLocaleString:!0};class Lb{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return xb(this.wrappedObject,e)}set(e,r){return Ib(this.wrappedObject,e,r),this}has(e){return Tb(this.wrappedObject,e)}}function Ub(t){return t?t instanceof Map||t instanceof Lb||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var Md=function(){return Md=P0.create,P0},jb=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Vb=Bt("typed",jb,function(e){var{BigNumber:r,Complex:i,DenseMatrix:u,Fraction:a}=e,o=Md();return o.clear(),o.addTypes([{name:"number",test:Xt},{name:"Complex",test:md},{name:"BigNumber",test:dn},{name:"Fraction",test:Dd},{name:"Unit",test:_d},{name:"identifier",test:l=>Rn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(l)},{name:"string",test:Rn},{name:"Chain",test:lb},{name:"Array",test:Yt},{name:"Matrix",test:Rr},{name:"DenseMatrix",test:ky},{name:"SparseMatrix",test:Ry},{name:"Range",test:Ly},{name:"Index",test:Zl},{name:"boolean",test:Uy},{name:"ResultSet",test:jy},{name:"Help",test:Vy},{name:"function",test:qy},{name:"Date",test:zy},{name:"RegExp",test:Wy},{name:"null",test:Gy},{name:"undefined",test:yd},{name:"AccessorNode",test:Ky},{name:"ArrayNode",test:Yy},{name:"AssignmentNode",test:$y},{name:"BlockNode",test:Zy},{name:"ConditionalNode",test:Xy},{name:"ConstantNode",test:Jy},{name:"FunctionNode",test:eb},{name:"FunctionAssignmentNode",test:Qy},{name:"IndexNode",test:tb},{name:"Node",test:rb},{name:"ObjectNode",test:nb},{name:"OperatorNode",test:ib},{name:"ParenthesisNode",test:ub},{name:"RangeNode",test:ab},{name:"RelationalNode",test:sb},{name:"SymbolNode",test:ob},{name:"Map",test:Ub},{name:"Object",test:Hy}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(d){if(r||Ko(d),_b(d)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+d+"). Use function bignumber(x) to convert to BigNumber.");return new r(d)}},{from:"number",to:"Complex",convert:function(d){return i||ja(d),new i(d,0)}},{from:"BigNumber",to:"Complex",convert:function(d){return i||ja(d),new i(d.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(d){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(d){return i||ja(d),new i(d.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(d){a||Yo(d);var p=new a(d);if(p.valueOf()!==d)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+d+"). Use function fraction(x) to convert to Fraction.");return p}},{from:"string",to:"number",convert:function(d){var p=Number(d);if(isNaN(p))throw new Error('Cannot convert "'+d+'" to a number');return p}},{from:"string",to:"BigNumber",convert:function(d){r||Ko(d);try{return new r(d)}catch{throw new Error('Cannot convert "'+d+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(d){a||Yo(d);try{return new a(d)}catch{throw new Error('Cannot convert "'+d+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(d){i||ja(d);try{return new i(d)}catch{throw new Error('Cannot convert "'+d+'" to Complex')}}},{from:"boolean",to:"number",convert:function(d){return+d}},{from:"boolean",to:"BigNumber",convert:function(d){return r||Ko(d),new r(+d)}},{from:"boolean",to:"Fraction",convert:function(d){return a||Yo(d),new a(+d)}},{from:"boolean",to:"string",convert:function(d){return String(d)}},{from:"Array",to:"Matrix",convert:function(d){return u||qb(),new u(d)}},{from:"Matrix",to:"Array",convert:function(d){return d.valueOf()}}]),o.onMismatch=(l,d,p)=>{var c=o.createError(l,d,p);if(["wrongType","mismatch"].includes(c.data.category)&&d.length===1&&$a(d[0])&&p.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(l,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(l,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(l,d,p)=>{var c=o.createError(l,d,p);if(["wrongType","mismatch"].includes(c.data.category)&&d.length===1&&$a(d[0])&&p.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(l,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(l,")'."));throw f.data=c.data,f}throw c},o});function Ko(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function ja(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function qb(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Yo(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var au=9e15,Ai=1e9,Ol="0123456789abcdef",Qa="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",es="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Ml={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-au,maxE:au,crypto:!1},Pd,ti,He=!0,As="[DecimalError] ",yi=As+"Invalid argument: ",xd=As+"Precision limit exceeded",Id=As+"crypto unavailable",Td="[object Decimal]",xr=Math.floor,dr=Math.pow,zb=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Wb=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Hb=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Nd=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Cn=1e7,Ve=7,Gb=9007199254740991,Kb=Qa.length-1,Pl=es.length-1,ge={toStringTag:Td};ge.absoluteValue=ge.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Re(t)};ge.ceil=function(){return Re(new this.constructor(this),this.e+1,2)};ge.clampedTo=ge.clamp=function(t,e){var r,i=this,u=i.constructor;if(t=new u(t),e=new u(e),!t.s||!e.s)return new u(NaN);if(t.gt(e))throw Error(yi+e);return r=i.cmp(t),r<0?t:i.cmp(e)>0?e:new u(i)};ge.comparedTo=ge.cmp=function(t){var e,r,i,u,a=this,o=a.d,l=(t=new a.constructor(t)).d,d=a.s,p=t.s;if(!o||!l)return!d||!p?NaN:d!==p?d:o===l?0:!o^d<0?1:-1;if(!o[0]||!l[0])return o[0]?d:l[0]?-p:0;if(d!==p)return d;if(a.e!==t.e)return a.e>t.e^d<0?1:-1;for(i=o.length,u=l.length,e=0,r=i<u?i:u;e<r;++e)if(o[e]!==l[e])return o[e]>l[e]^d<0?1:-1;return i===u?0:i>u^d<0?1:-1};ge.cosine=ge.cos=function(){var t,e,r=this,i=r.constructor;return r.d?r.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(r.e,r.sd())+Ve,i.rounding=1,r=Yb(i,jd(i,r)),i.precision=t,i.rounding=e,Re(ti==2||ti==3?r.neg():r,t,e,!0)):new i(1):new i(NaN)};ge.cubeRoot=ge.cbrt=function(){var t,e,r,i,u,a,o,l,d,p,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(He=!1,a=c.s*dr(c.s*c,1/3),!a||Math.abs(a)==1/0?(r=Br(c.d),t=c.e,(a=(t-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=dr(r,1/3),t=xr((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?r="5e"+t:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),i=new f(r),i.s=c.s):i=new f(a.toString()),o=(t=f.precision)+3;;)if(l=i,d=l.times(l).times(l),p=d.plus(c),i=xt(p.plus(c).times(l),p.plus(d),o+2,1),Br(l.d).slice(0,o)===(r=Br(i.d)).slice(0,o))if(r=r.slice(o-3,o+1),r=="9999"||!u&&r=="4999"){if(!u&&(Re(l,t+1,0),l.times(l).times(l).eq(c))){i=l;break}o+=4,u=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Re(i,t+1,1),e=!i.times(i).times(i).eq(c));break}return He=!0,Re(i,t,f.rounding,e)};ge.decimalPlaces=ge.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-xr(this.e/Ve))*Ve,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};ge.dividedBy=ge.div=function(t){return xt(this,new this.constructor(t))};ge.dividedToIntegerBy=ge.divToInt=function(t){var e=this,r=e.constructor;return Re(xt(e,new r(t),0,1,1),r.precision,r.rounding)};ge.equals=ge.eq=function(t){return this.cmp(t)===0};ge.floor=function(){return Re(new this.constructor(this),this.e+1,3)};ge.greaterThan=ge.gt=function(t){return this.cmp(t)>0};ge.greaterThanOrEqualTo=ge.gte=function(t){var e=this.cmp(t);return e==1||e===0};ge.hyperbolicCosine=ge.cosh=function(){var t,e,r,i,u,a=this,o=a.constructor,l=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return l;r=o.precision,i=o.rounding,o.precision=r+Math.max(a.e,a.sd())+4,o.rounding=1,u=a.d.length,u<32?(t=Math.ceil(u/3),e=(1/Es(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=cu(o,1,a.times(e),new o(1),!0);for(var d,p=t,c=new o(8);p--;)d=a.times(a),a=l.minus(d.times(c.minus(d.times(c))));return Re(a,o.precision=r,o.rounding=i,!0)};ge.hyperbolicSine=ge.sinh=function(){var t,e,r,i,u=this,a=u.constructor;if(!u.isFinite()||u.isZero())return new a(u);if(e=a.precision,r=a.rounding,a.precision=e+Math.max(u.e,u.sd())+4,a.rounding=1,i=u.d.length,i<3)u=cu(a,2,u,u,!0);else{t=1.4*Math.sqrt(i),t=t>16?16:t|0,u=u.times(1/Es(5,t)),u=cu(a,2,u,u,!0);for(var o,l=new a(5),d=new a(16),p=new a(20);t--;)o=u.times(u),u=u.times(l.plus(o.times(d.times(o).plus(p))))}return a.precision=e,a.rounding=r,Re(u,e,r,!0)};ge.hyperbolicTangent=ge.tanh=function(){var t,e,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,xt(r.sinh(),r.cosh(),i.precision=t,i.rounding=e)):new i(r.s)};ge.inverseCosine=ge.acos=function(){var t,e=this,r=e.constructor,i=e.abs().cmp(1),u=r.precision,a=r.rounding;return i!==-1?i===0?e.isNeg()?Fn(r,u,a):new r(0):new r(NaN):e.isZero()?Fn(r,u+4,a).times(.5):(r.precision=u+6,r.rounding=1,e=e.asin(),t=Fn(r,u+4,a).times(.5),r.precision=u,r.rounding=a,t.minus(e))};ge.inverseHyperbolicCosine=ge.acosh=function(){var t,e,r=this,i=r.constructor;return r.lte(1)?new i(r.eq(1)?0:NaN):r.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(r.e),r.sd())+4,i.rounding=1,He=!1,r=r.times(r).minus(1).sqrt().plus(r),He=!0,i.precision=t,i.rounding=e,r.ln()):new i(r)};ge.inverseHyperbolicSine=ge.asinh=function(){var t,e,r=this,i=r.constructor;return!r.isFinite()||r.isZero()?new i(r):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,i.rounding=1,He=!1,r=r.times(r).plus(1).sqrt().plus(r),He=!0,i.precision=t,i.rounding=e,r.ln())};ge.inverseHyperbolicTangent=ge.atanh=function(){var t,e,r,i,u=this,a=u.constructor;return u.isFinite()?u.e>=0?new a(u.abs().eq(1)?u.s/0:u.isZero()?u:NaN):(t=a.precision,e=a.rounding,i=u.sd(),Math.max(i,t)<2*-u.e-1?Re(new a(u),t,e,!0):(a.precision=r=i-u.e,u=xt(u.plus(1),new a(1).minus(u),r+t,1),a.precision=t+4,a.rounding=1,u=u.ln(),a.precision=t,a.rounding=e,u.times(.5))):new a(NaN)};ge.inverseSine=ge.asin=function(){var t,e,r,i,u=this,a=u.constructor;return u.isZero()?new a(u):(e=u.abs().cmp(1),r=a.precision,i=a.rounding,e!==-1?e===0?(t=Fn(a,r+4,i).times(.5),t.s=u.s,t):new a(NaN):(a.precision=r+6,a.rounding=1,u=u.div(new a(1).minus(u.times(u)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=i,u.times(2)))};ge.inverseTangent=ge.atan=function(){var t,e,r,i,u,a,o,l,d,p=this,c=p.constructor,f=c.precision,h=c.rounding;if(p.isFinite()){if(p.isZero())return new c(p);if(p.abs().eq(1)&&f+4<=Pl)return o=Fn(c,f+4,h).times(.25),o.s=p.s,o}else{if(!p.s)return new c(NaN);if(f+4<=Pl)return o=Fn(c,f+4,h).times(.5),o.s=p.s,o}for(c.precision=l=f+10,c.rounding=1,r=Math.min(28,l/Ve+2|0),t=r;t;--t)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(He=!1,e=Math.ceil(l/Ve),i=1,d=p.times(p),o=new c(p),u=p;t!==-1;)if(u=u.times(d),a=o.minus(u.div(i+=2)),u=u.times(d),o=a.plus(u.div(i+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return r&&(o=o.times(2<<r-1)),He=!0,Re(o,c.precision=f,c.rounding=h,!0)};ge.isFinite=function(){return!!this.d};ge.isInteger=ge.isInt=function(){return!!this.d&&xr(this.e/Ve)>this.d.length-2};ge.isNaN=function(){return!this.s};ge.isNegative=ge.isNeg=function(){return this.s<0};ge.isPositive=ge.isPos=function(){return this.s>0};ge.isZero=function(){return!!this.d&&this.d[0]===0};ge.lessThan=ge.lt=function(t){return this.cmp(t)<0};ge.lessThanOrEqualTo=ge.lte=function(t){return this.cmp(t)<1};ge.logarithm=ge.log=function(t){var e,r,i,u,a,o,l,d,p=this,c=p.constructor,f=c.precision,h=c.rounding,D=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(r=p.d,p.s<0||!r||!r[0]||p.eq(1))return new c(r&&!r[0]?-1/0:p.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)a=!0;else{for(u=r[0];u%10===0;)u/=10;a=u!==1}if(He=!1,l=f+D,o=gi(p,l),i=e?ts(c,l+10):gi(t,l),d=xt(o,i,l,1),$u(d.d,u=f,h))do if(l+=10,o=gi(p,l),i=e?ts(c,l+10):gi(t,l),d=xt(o,i,l,1),!a){+Br(d.d).slice(u+1,u+15)+1==1e14&&(d=Re(d,f+1,0));break}while($u(d.d,u+=10,h));return He=!0,Re(d,f,h)};ge.minus=ge.sub=function(t){var e,r,i,u,a,o,l,d,p,c,f,h,D=this,b=D.constructor;if(t=new b(t),!D.d||!t.d)return!D.s||!t.s?t=new b(NaN):D.d?t.s=-t.s:t=new b(t.d||D.s!==t.s?D:NaN),t;if(D.s!=t.s)return t.s=-t.s,D.plus(t);if(p=D.d,h=t.d,l=b.precision,d=b.rounding,!p[0]||!h[0]){if(h[0])t.s=-t.s;else if(p[0])t=new b(D);else return new b(d===3?-0:0);return He?Re(t,l,d):t}if(r=xr(t.e/Ve),c=xr(D.e/Ve),p=p.slice(),a=c-r,a){for(f=a<0,f?(e=p,a=-a,o=h.length):(e=h,r=c,o=p.length),i=Math.max(Math.ceil(l/Ve),o)+2,a>i&&(a=i,e.length=1),e.reverse(),i=a;i--;)e.push(0);e.reverse()}else{for(i=p.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(p[i]!=h[i]){f=p[i]<h[i];break}a=0}for(f&&(e=p,p=h,h=e,t.s=-t.s),o=p.length,i=h.length-o;i>0;--i)p[o++]=0;for(i=h.length;i>a;){if(p[--i]<h[i]){for(u=i;u&&p[--u]===0;)p[u]=Cn-1;--p[u],p[i]+=Cn}p[i]-=h[i]}for(;p[--o]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=ws(p,r),He?Re(t,l,d):t):new b(d===3?-0:0)};ge.modulo=ge.mod=function(t){var e,r=this,i=r.constructor;return t=new i(t),!r.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||r.d&&!r.d[0]?Re(new i(r),i.precision,i.rounding):(He=!1,i.modulo==9?(e=xt(r,t.abs(),0,3,1),e.s*=t.s):e=xt(r,t,0,i.modulo,1),e=e.times(t),He=!0,r.minus(e))};ge.naturalExponential=ge.exp=function(){return xl(this)};ge.naturalLogarithm=ge.ln=function(){return gi(this)};ge.negated=ge.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Re(t)};ge.plus=ge.add=function(t){var e,r,i,u,a,o,l,d,p,c,f=this,h=f.constructor;if(t=new h(t),!f.d||!t.d)return!f.s||!t.s?t=new h(NaN):f.d||(t=new h(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(p=f.d,c=t.d,l=h.precision,d=h.rounding,!p[0]||!c[0])return c[0]||(t=new h(f)),He?Re(t,l,d):t;if(a=xr(f.e/Ve),i=xr(t.e/Ve),p=p.slice(),u=a-i,u){for(u<0?(r=p,u=-u,o=c.length):(r=c,i=a,o=p.length),a=Math.ceil(l/Ve),o=a>o?a+1:o+1,u>o&&(u=o,r.length=1),r.reverse();u--;)r.push(0);r.reverse()}for(o=p.length,u=c.length,o-u<0&&(u=o,r=c,c=p,p=r),e=0;u;)e=(p[--u]=p[u]+c[u]+e)/Cn|0,p[u]%=Cn;for(e&&(p.unshift(e),++i),o=p.length;p[--o]==0;)p.pop();return t.d=p,t.e=ws(p,i),He?Re(t,l,d):t};ge.precision=ge.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(yi+t);return r.d?(e=kd(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};ge.round=function(){var t=this,e=t.constructor;return Re(new e(t),t.e+1,e.rounding)};ge.sine=ge.sin=function(){var t,e,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(t=i.precision,e=i.rounding,i.precision=t+Math.max(r.e,r.sd())+Ve,i.rounding=1,r=Zb(i,jd(i,r)),i.precision=t,i.rounding=e,Re(ti>2?r.neg():r,t,e,!0)):new i(NaN)};ge.squareRoot=ge.sqrt=function(){var t,e,r,i,u,a,o=this,l=o.d,d=o.e,p=o.s,c=o.constructor;if(p!==1||!l||!l[0])return new c(!p||p<0&&(!l||l[0])?NaN:l?o:1/0);for(He=!1,p=Math.sqrt(+o),p==0||p==1/0?(e=Br(l),(e.length+d)%2==0&&(e+="0"),p=Math.sqrt(e),d=xr((d+1)/2)-(d<0||d%2),p==1/0?e="5e"+d:(e=p.toExponential(),e=e.slice(0,e.indexOf("e")+1)+d),i=new c(e)):i=new c(p.toString()),r=(d=c.precision)+3;;)if(a=i,i=a.plus(xt(o,a,r+2,1)).times(.5),Br(a.d).slice(0,r)===(e=Br(i.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!u&&e=="4999"){if(!u&&(Re(a,d+1,0),a.times(a).eq(o))){i=a;break}r+=4,u=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Re(i,d+1,1),t=!i.times(i).eq(o));break}return He=!0,Re(i,d,c.rounding,t)};ge.tangent=ge.tan=function(){var t,e,r=this,i=r.constructor;return r.isFinite()?r.isZero()?new i(r):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,r=r.sin(),r.s=1,r=xt(r,new i(1).minus(r.times(r)).sqrt(),t+10,0),i.precision=t,i.rounding=e,Re(ti==2||ti==4?r.neg():r,t,e,!0)):new i(NaN)};ge.times=ge.mul=function(t){var e,r,i,u,a,o,l,d,p,c=this,f=c.constructor,h=c.d,D=(t=new f(t)).d;if(t.s*=c.s,!h||!h[0]||!D||!D[0])return new f(!t.s||h&&!h[0]&&!D||D&&!D[0]&&!h?NaN:!h||!D?t.s/0:t.s*0);for(r=xr(c.e/Ve)+xr(t.e/Ve),d=h.length,p=D.length,d<p&&(a=h,h=D,D=a,o=d,d=p,p=o),a=[],o=d+p,i=o;i--;)a.push(0);for(i=p;--i>=0;){for(e=0,u=d+i;u>i;)l=a[u]+D[i]*h[u-i-1]+e,a[u--]=l%Cn|0,e=l/Cn|0;a[u]=(a[u]+e)%Cn|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=ws(a,r),He?Re(t,f.precision,f.rounding):t};ge.toBinary=function(t,e){return Jl(this,2,t,e)};ge.toDecimalPlaces=ge.toDP=function(t,e){var r=this,i=r.constructor;return r=new i(r),t===void 0?r:(zr(t,0,Ai),e===void 0?e=i.rounding:zr(e,0,8),Re(r,t+r.e+1,e))};ge.toExponential=function(t,e){var r,i=this,u=i.constructor;return t===void 0?r=Un(i,!0):(zr(t,0,Ai),e===void 0?e=u.rounding:zr(e,0,8),i=Re(new u(i),t+1,e),r=Un(i,!0,t+1)),i.isNeg()&&!i.isZero()?"-"+r:r};ge.toFixed=function(t,e){var r,i,u=this,a=u.constructor;return t===void 0?r=Un(u):(zr(t,0,Ai),e===void 0?e=a.rounding:zr(e,0,8),i=Re(new a(u),t+u.e+1,e),r=Un(i,!1,t+i.e+1)),u.isNeg()&&!u.isZero()?"-"+r:r};ge.toFraction=function(t){var e,r,i,u,a,o,l,d,p,c,f,h,D=this,b=D.d,g=D.constructor;if(!b)return new g(D);if(p=r=new g(1),i=d=new g(0),e=new g(i),a=e.e=kd(b)-D.e-1,o=a%Ve,e.d[0]=dr(10,o<0?Ve+o:o),t==null)t=a>0?e:p;else{if(l=new g(t),!l.isInt()||l.lt(p))throw Error(yi+l);t=l.gt(e)?a>0?e:p:l}for(He=!1,l=new g(Br(b)),c=g.precision,g.precision=a=b.length*Ve*2;f=xt(l,e,0,1,1),u=r.plus(f.times(i)),u.cmp(t)!=1;)r=i,i=u,u=p,p=d.plus(f.times(u)),d=u,u=e,e=l.minus(f.times(u)),l=u;return u=xt(t.minus(r),i,0,1,1),d=d.plus(u.times(p)),r=r.plus(u.times(i)),d.s=p.s=D.s,h=xt(p,i,a,1).minus(D).abs().cmp(xt(d,r,a,1).minus(D).abs())<1?[p,i]:[d,r],g.precision=c,He=!0,h};ge.toHexadecimal=ge.toHex=function(t,e){return Jl(this,16,t,e)};ge.toNearest=function(t,e){var r=this,i=r.constructor;if(r=new i(r),t==null){if(!r.d)return r;t=new i(1),e=i.rounding}else{if(t=new i(t),e===void 0?e=i.rounding:zr(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(He=!1,r=xt(r,t,0,e,1).times(t),He=!0,Re(r)):(t.s=r.s,r=t),r};ge.toNumber=function(){return+this};ge.toOctal=function(t,e){return Jl(this,8,t,e)};ge.toPower=ge.pow=function(t){var e,r,i,u,a,o,l=this,d=l.constructor,p=+(t=new d(t));if(!l.d||!t.d||!l.d[0]||!t.d[0])return new d(dr(+l,p));if(l=new d(l),l.eq(1))return l;if(i=d.precision,a=d.rounding,t.eq(1))return Re(l,i,a);if(e=xr(t.e/Ve),e>=t.d.length-1&&(r=p<0?-p:p)<=Gb)return u=Rd(d,l,r,i),t.s<0?new d(1).div(u):Re(u,i,a);if(o=l.s,o<0){if(e<t.d.length-1)return new d(NaN);if(t.d[e]&1||(o=1),l.e==0&&l.d[0]==1&&l.d.length==1)return l.s=o,l}return r=dr(+l,p),e=r==0||!isFinite(r)?xr(p*(Math.log("0."+Br(l.d))/Math.LN10+l.e+1)):new d(r+"").e,e>d.maxE+1||e<d.minE-1?new d(e>0?o/0:0):(He=!1,d.rounding=l.s=1,r=Math.min(12,(e+"").length),u=xl(t.times(gi(l,i+r)),i),u.d&&(u=Re(u,i+5,1),$u(u.d,i,a)&&(e=i+10,u=Re(xl(t.times(gi(l,e+r)),e),e+5,1),+Br(u.d).slice(i+1,i+15)+1==1e14&&(u=Re(u,i+1,0)))),u.s=o,He=!0,d.rounding=a,Re(u,i,a))};ge.toPrecision=function(t,e){var r,i=this,u=i.constructor;return t===void 0?r=Un(i,i.e<=u.toExpNeg||i.e>=u.toExpPos):(zr(t,1,Ai),e===void 0?e=u.rounding:zr(e,0,8),i=Re(new u(i),t,e),r=Un(i,t<=i.e||i.e<=u.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+r:r};ge.toSignificantDigits=ge.toSD=function(t,e){var r=this,i=r.constructor;return t===void 0?(t=i.precision,e=i.rounding):(zr(t,1,Ai),e===void 0?e=i.rounding:zr(e,0,8)),Re(new i(r),t,e)};ge.toString=function(){var t=this,e=t.constructor,r=Un(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};ge.truncated=ge.trunc=function(){return Re(new this.constructor(this),this.e+1,1)};ge.valueOf=ge.toJSON=function(){var t=this,e=t.constructor,r=Un(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function Br(t){var e,r,i,u=t.length-1,a="",o=t[0];if(u>0){for(a+=o,e=1;e<u;e++)i=t[e]+"",r=Ve-i.length,r&&(a+=vi(r)),a+=i;o=t[e],i=o+"",r=Ve-i.length,r&&(a+=vi(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function zr(t,e,r){if(t!==~~t||t<e||t>r)throw Error(yi+t)}function $u(t,e,r,i){var u,a,o,l;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=Ve,u=0):(u=Math.ceil((e+1)/Ve),e%=Ve),a=dr(10,Ve-e),l=t[u]%a|0,i==null?e<3?(e==0?l=l/100|0:e==1&&(l=l/10|0),o=r<4&&l==99999||r>3&&l==49999||l==5e4||l==0):o=(r<4&&l+1==a||r>3&&l+1==a/2)&&(t[u+1]/a/100|0)==dr(10,e-2)-1||(l==a/2||l==0)&&(t[u+1]/a/100|0)==0:e<4?(e==0?l=l/1e3|0:e==1?l=l/100|0:e==2&&(l=l/10|0),o=(i||r<4)&&l==9999||!i&&r>3&&l==4999):o=((i||r<4)&&l+1==a||!i&&r>3&&l+1==a/2)&&(t[u+1]/a/1e3|0)==dr(10,e-3)-1,o}function Ha(t,e,r){for(var i,u=[0],a,o=0,l=t.length;o<l;){for(a=u.length;a--;)u[a]*=e;for(u[0]+=Ol.indexOf(t.charAt(o++)),i=0;i<u.length;i++)u[i]>r-1&&(u[i+1]===void 0&&(u[i+1]=0),u[i+1]+=u[i]/r|0,u[i]%=r)}return u.reverse()}function Yb(t,e){var r,i,u;if(e.isZero())return e;i=e.d.length,i<32?(r=Math.ceil(i/3),u=(1/Es(4,r)).toString()):(r=16,u="2.3283064365386962890625e-10"),t.precision+=r,e=cu(t,1,e.times(u),new t(1));for(var a=r;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=r,e}var xt=function(){function t(i,u,a){var o,l=0,d=i.length;for(i=i.slice();d--;)o=i[d]*u+l,i[d]=o%a|0,l=o/a|0;return l&&i.unshift(l),i}function e(i,u,a,o){var l,d;if(a!=o)d=a>o?1:-1;else for(l=d=0;l<a;l++)if(i[l]!=u[l]){d=i[l]>u[l]?1:-1;break}return d}function r(i,u,a,o){for(var l=0;a--;)i[a]-=l,l=i[a]<u[a]?1:0,i[a]=l*o+i[a]-u[a];for(;!i[0]&&i.length>1;)i.shift()}return function(i,u,a,o,l,d){var p,c,f,h,D,b,g,m,y,E,w,B,F,O,P,I,N,W,$,K,q=i.constructor,G=i.s==u.s?1:-1,L=i.d,z=u.d;if(!L||!L[0]||!z||!z[0])return new q(!i.s||!u.s||(L?z&&L[0]==z[0]:!z)?NaN:L&&L[0]==0||!z?G*0:G/0);for(d?(D=1,c=i.e-u.e):(d=Cn,D=Ve,c=xr(i.e/D)-xr(u.e/D)),$=z.length,N=L.length,y=new q(G),E=y.d=[],f=0;z[f]==(L[f]||0);f++);if(z[f]>(L[f]||0)&&c--,a==null?(O=a=q.precision,o=q.rounding):l?O=a+(i.e-u.e)+1:O=a,O<0)E.push(1),b=!0;else{if(O=O/D+2|0,f=0,$==1){for(h=0,z=z[0],O++;(f<N||h)&&O--;f++)P=h*d+(L[f]||0),E[f]=P/z|0,h=P%z|0;b=h||f<N}else{for(h=d/(z[0]+1)|0,h>1&&(z=t(z,h,d),L=t(L,h,d),$=z.length,N=L.length),I=$,w=L.slice(0,$),B=w.length;B<$;)w[B++]=0;K=z.slice(),K.unshift(0),W=z[0],z[1]>=d/2&&++W;do h=0,p=e(z,w,$,B),p<0?(F=w[0],$!=B&&(F=F*d+(w[1]||0)),h=F/W|0,h>1?(h>=d&&(h=d-1),g=t(z,h,d),m=g.length,B=w.length,p=e(g,w,m,B),p==1&&(h--,r(g,$<m?K:z,m,d))):(h==0&&(p=h=1),g=z.slice()),m=g.length,m<B&&g.unshift(0),r(w,g,B,d),p==-1&&(B=w.length,p=e(z,w,$,B),p<1&&(h++,r(w,$<B?K:z,B,d))),B=w.length):p===0&&(h++,w=[0]),E[f++]=h,p&&w[0]?w[B++]=L[I]||0:(w=[L[I]],B=1);while((I++<N||w[0]!==void 0)&&O--);b=w[0]!==void 0}E[0]||E.shift()}if(D==1)y.e=c,Pd=b;else{for(f=1,h=E[0];h>=10;h/=10)f++;y.e=f+c*D-1,Re(y,l?a+y.e+1:a,o,b)}return y}}();function Re(t,e,r,i){var u,a,o,l,d,p,c,f,h,D=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(u=1,l=f[0];l>=10;l/=10)u++;if(a=e-u,a<0)a+=Ve,o=e,c=f[h=0],d=c/dr(10,u-o-1)%10|0;else if(h=Math.ceil((a+1)/Ve),l=f.length,h>=l)if(i){for(;l++<=h;)f.push(0);c=d=0,u=1,a%=Ve,o=a-Ve+1}else break e;else{for(c=l=f[h],u=1;l>=10;l/=10)u++;a%=Ve,o=a-Ve+u,d=o<0?0:c/dr(10,u-o-1)%10|0}if(i=i||e<0||f[h+1]!==void 0||(o<0?c:c%dr(10,u-o-1)),p=r<4?(d||i)&&(r==0||r==(t.s<0?3:2)):d>5||d==5&&(r==4||i||r==6&&(a>0?o>0?c/dr(10,u-o):0:f[h-1])%10&1||r==(t.s<0?8:7)),e<1||!f[0])return f.length=0,p?(e-=t.e+1,f[0]=dr(10,(Ve-e%Ve)%Ve),t.e=-e||0):f[0]=t.e=0,t;if(a==0?(f.length=h,l=1,h--):(f.length=h+1,l=dr(10,Ve-a),f[h]=o>0?(c/dr(10,u-o)%dr(10,o)|0)*l:0),p)for(;;)if(h==0){for(a=1,o=f[0];o>=10;o/=10)a++;for(o=f[0]+=l,l=1;o>=10;o/=10)l++;a!=l&&(t.e++,f[0]==Cn&&(f[0]=1));break}else{if(f[h]+=l,f[h]!=Cn)break;f[h--]=0,l=1}for(a=f.length;f[--a]===0;)f.pop()}return He&&(t.e>D.maxE?(t.d=null,t.e=NaN):t.e<D.minE&&(t.e=0,t.d=[0])),t}function Un(t,e,r){if(!t.isFinite())return Ud(t);var i,u=t.e,a=Br(t.d),o=a.length;return e?(r&&(i=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+vi(i):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):u<0?(a="0."+vi(-u-1)+a,r&&(i=r-o)>0&&(a+=vi(i))):u>=o?(a+=vi(u+1-o),r&&(i=r-u-1)>0&&(a=a+"."+vi(i))):((i=u+1)<o&&(a=a.slice(0,i)+"."+a.slice(i)),r&&(i=r-o)>0&&(u+1===o&&(a+="."),a+=vi(i))),a}function ws(t,e){var r=t[0];for(e*=Ve;r>=10;r/=10)e++;return e}function ts(t,e,r){if(e>Kb)throw He=!0,r&&(t.precision=r),Error(xd);return Re(new t(Qa),e,1,!0)}function Fn(t,e,r){if(e>Pl)throw Error(xd);return Re(new t(es),e,r,!0)}function kd(t){var e=t.length-1,r=e*Ve+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function vi(t){for(var e="";t--;)e+="0";return e}function Rd(t,e,r,i){var u,a=new t(1),o=Math.ceil(i/Ve+4);for(He=!1;;){if(r%2&&(a=a.times(e),k0(a.d,o)&&(u=!0)),r=xr(r/2),r===0){r=a.d.length-1,u&&a.d[r]===0&&++a.d[r];break}e=e.times(e),k0(e.d,o)}return He=!0,a}function N0(t){return t.d[t.d.length-1]&1}function Ld(t,e,r){for(var i,u=new t(e[0]),a=0;++a<e.length;)if(i=new t(e[a]),i.s)u[r](i)&&(u=i);else{u=i;break}return u}function xl(t,e){var r,i,u,a,o,l,d,p=0,c=0,f=0,h=t.constructor,D=h.rounding,b=h.precision;if(!t.d||!t.d[0]||t.e>17)return new h(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(He=!1,d=b):d=e,l=new h(.03125);t.e>-2;)t=t.times(l),f+=5;for(i=Math.log(dr(2,f))/Math.LN10*2+5|0,d+=i,r=a=o=new h(1),h.precision=d;;){if(a=Re(a.times(t),d,1),r=r.times(++c),l=o.plus(xt(a,r,d,1)),Br(l.d).slice(0,d)===Br(o.d).slice(0,d)){for(u=f;u--;)o=Re(o.times(o),d,1);if(e==null)if(p<3&&$u(o.d,d-i,D,p))h.precision=d+=10,r=a=l=new h(1),c=0,p++;else return Re(o,h.precision=b,D,He=!0);else return h.precision=b,o}o=l}}function gi(t,e){var r,i,u,a,o,l,d,p,c,f,h,D=1,b=10,g=t,m=g.d,y=g.constructor,E=y.rounding,w=y.precision;if(g.s<0||!m||!m[0]||!g.e&&m[0]==1&&m.length==1)return new y(m&&!m[0]?-1/0:g.s!=1?NaN:m?0:g);if(e==null?(He=!1,c=w):c=e,y.precision=c+=b,r=Br(m),i=r.charAt(0),Math.abs(a=g.e)<15e14){for(;i<7&&i!=1||i==1&&r.charAt(1)>3;)g=g.times(t),r=Br(g.d),i=r.charAt(0),D++;a=g.e,i>1?(g=new y("0."+r),a++):g=new y(i+"."+r.slice(1))}else return p=ts(y,c+2,w).times(a+""),g=gi(new y(i+"."+r.slice(1)),c-b).plus(p),y.precision=w,e==null?Re(g,w,E,He=!0):g;for(f=g,d=o=g=xt(g.minus(1),g.plus(1),c,1),h=Re(g.times(g),c,1),u=3;;){if(o=Re(o.times(h),c,1),p=d.plus(xt(o,new y(u),c,1)),Br(p.d).slice(0,c)===Br(d.d).slice(0,c))if(d=d.times(2),a!==0&&(d=d.plus(ts(y,c+2,w).times(a+""))),d=xt(d,new y(D),c,1),e==null)if($u(d.d,c-b,E,l))y.precision=c+=b,p=o=g=xt(f.minus(1),f.plus(1),c,1),h=Re(g.times(g),c,1),u=l=1;else return Re(d,y.precision=w,E,He=!0);else return y.precision=w,d;d=p,u+=2}}function Ud(t){return String(t.s*t.s/0)}function Il(t,e){var r,i,u;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(r<0&&(r=i),r+=+e.slice(i+1),e=e.substring(0,i)):r<0&&(r=e.length),i=0;e.charCodeAt(i)===48;i++);for(u=e.length;e.charCodeAt(u-1)===48;--u);if(e=e.slice(i,u),e){if(u-=i,t.e=r=r-i-1,t.d=[],i=(r+1)%Ve,r<0&&(i+=Ve),i<u){for(i&&t.d.push(+e.slice(0,i)),u-=Ve;i<u;)t.d.push(+e.slice(i,i+=Ve));e=e.slice(i),i=Ve-e.length}else i-=u;for(;i--;)e+="0";t.d.push(+e),He&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function $b(t,e){var r,i,u,a,o,l,d,p,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Nd.test(e))return Il(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(Wb.test(e))r=16,e=e.toLowerCase();else if(zb.test(e))r=2;else if(Hb.test(e))r=8;else throw Error(yi+e);for(a=e.search(/p/i),a>0?(d=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,i=t.constructor,o&&(e=e.replace(".",""),l=e.length,a=l-a,u=Rd(i,new i(r),a,a*2)),p=Ha(e,r,Cn),c=p.length-1,a=c;p[a]===0;--a)p.pop();return a<0?new i(t.s*0):(t.e=ws(p,c),t.d=p,He=!1,o&&(t=xt(t,u,l*4)),d&&(t=t.times(Math.abs(d)<54?dr(2,d):hu.pow(2,d))),He=!0,t)}function Zb(t,e){var r,i=e.d.length;if(i<3)return e.isZero()?e:cu(t,2,e,e);r=1.4*Math.sqrt(i),r=r>16?16:r|0,e=e.times(1/Es(5,r)),e=cu(t,2,e,e);for(var u,a=new t(5),o=new t(16),l=new t(20);r--;)u=e.times(e),e=e.times(a.plus(u.times(o.times(u).minus(l))));return e}function cu(t,e,r,i,u){var a,o,l,d,p=t.precision,c=Math.ceil(p/Ve);for(He=!1,d=r.times(r),l=new t(i);;){if(o=xt(l.times(d),new t(e++*e++),p,1),l=u?i.plus(o):i.minus(o),i=xt(o.times(d),new t(e++*e++),p,1),o=l.plus(i),o.d[c]!==void 0){for(a=c;o.d[a]===l.d[a]&&a--;);if(a==-1)break}a=l,l=i,i=o,o=a}return He=!0,o.d.length=c+1,o}function Es(t,e){for(var r=t;--e;)r*=t;return r}function jd(t,e){var r,i=e.s<0,u=Fn(t,t.precision,1),a=u.times(.5);if(e=e.abs(),e.lte(a))return ti=i?4:1,e;if(r=e.divToInt(u),r.isZero())ti=i?3:2;else{if(e=e.minus(r.times(u)),e.lte(a))return ti=N0(r)?i?2:3:i?4:1,e;ti=N0(r)?i?1:4:i?3:2}return e.minus(u).abs()}function Jl(t,e,r,i){var u,a,o,l,d,p,c,f,h,D=t.constructor,b=r!==void 0;if(b?(zr(r,1,Ai),i===void 0?i=D.rounding:zr(i,0,8)):(r=D.precision,i=D.rounding),!t.isFinite())c=Ud(t);else{for(c=Un(t),o=c.indexOf("."),b?(u=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):u=e,o>=0&&(c=c.replace(".",""),h=new D(1),h.e=c.length-o,h.d=Ha(Un(h),10,u),h.e=h.d.length),f=Ha(c,10,u),a=d=f.length;f[--d]==0;)f.pop();if(!f[0])c=b?"0p+0":"0";else{if(o<0?a--:(t=new D(t),t.d=f,t.e=a,t=xt(t,h,r,i,0,u),f=t.d,a=t.e,p=Pd),o=f[r],l=u/2,p=p||f[r+1]!==void 0,p=i<4?(o!==void 0||p)&&(i===0||i===(t.s<0?3:2)):o>l||o===l&&(i===4||p||i===6&&f[r-1]&1||i===(t.s<0?8:7)),f.length=r,p)for(;++f[--r]>u-1;)f[r]=0,r||(++a,f.unshift(1));for(d=f.length;!f[d-1];--d);for(o=0,c="";o<d;o++)c+=Ol.charAt(f[o]);if(b){if(d>1)if(e==16||e==8){for(o=e==16?4:3,--d;d%o;d++)c+="0";for(f=Ha(c,u,e),d=f.length;!f[d-1];--d);for(o=1,c="1.";o<d;o++)c+=Ol.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>d)for(a-=d;a--;)c+="0";else a<d&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function k0(t,e){if(t.length>e)return t.length=e,!0}function Xb(t){return new this(t).abs()}function Jb(t){return new this(t).acos()}function Qb(t){return new this(t).acosh()}function eA(t,e){return new this(t).plus(e)}function tA(t){return new this(t).asin()}function rA(t){return new this(t).asinh()}function nA(t){return new this(t).atan()}function iA(t){return new this(t).atanh()}function uA(t,e){t=new this(t),e=new this(e);var r,i=this.precision,u=this.rounding,a=i+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=Fn(this,a,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?Fn(this,i,u):new this(0),r.s=t.s):!t.d||e.isZero()?(r=Fn(this,a,1).times(.5),r.s=t.s):e.s<0?(this.precision=a,this.rounding=1,r=this.atan(xt(t,e,a,1)),e=Fn(this,a,1),this.precision=i,this.rounding=u,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(xt(t,e,a,1)),r}function aA(t){return new this(t).cbrt()}function sA(t){return Re(t=new this(t),t.e+1,2)}function oA(t,e,r){return new this(t).clamp(e,r)}function lA(t){if(!t||typeof t!="object")throw Error(As+"Object expected");var e,r,i,u=t.defaults===!0,a=["precision",1,Ai,"rounding",0,8,"toExpNeg",-au,0,"toExpPos",0,au,"maxE",0,au,"minE",-au,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(r=a[e],u&&(this[r]=Ml[r]),(i=t[r])!==void 0)if(xr(i)===i&&i>=a[e+1]&&i<=a[e+2])this[r]=i;else throw Error(yi+r+": "+i);if(r="crypto",u&&(this[r]=Ml[r]),(i=t[r])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Id);else this[r]=!1;else throw Error(yi+r+": "+i);return this}function fA(t){return new this(t).cos()}function cA(t){return new this(t).cosh()}function Vd(t){var e,r,i;function u(a){var o,l,d,p=this;if(!(p instanceof u))return new u(a);if(p.constructor=u,R0(a)){p.s=a.s,He?!a.d||a.e>u.maxE?(p.e=NaN,p.d=null):a.e<u.minE?(p.e=0,p.d=[0]):(p.e=a.e,p.d=a.d.slice()):(p.e=a.e,p.d=a.d?a.d.slice():a.d);return}if(d=typeof a,d==="number"){if(a===0){p.s=1/a<0?-1:1,p.e=0,p.d=[0];return}if(a<0?(a=-a,p.s=-1):p.s=1,a===~~a&&a<1e7){for(o=0,l=a;l>=10;l/=10)o++;He?o>u.maxE?(p.e=NaN,p.d=null):o<u.minE?(p.e=0,p.d=[0]):(p.e=o,p.d=[a]):(p.e=o,p.d=[a]);return}else if(a*0!==0){a||(p.s=NaN),p.e=NaN,p.d=null;return}return Il(p,a.toString())}else if(d!=="string")throw Error(yi+a);return(l=a.charCodeAt(0))===45?(a=a.slice(1),p.s=-1):(l===43&&(a=a.slice(1)),p.s=1),Nd.test(a)?Il(p,a):$b(p,a)}if(u.prototype=ge,u.ROUND_UP=0,u.ROUND_DOWN=1,u.ROUND_CEIL=2,u.ROUND_FLOOR=3,u.ROUND_HALF_UP=4,u.ROUND_HALF_DOWN=5,u.ROUND_HALF_EVEN=6,u.ROUND_HALF_CEIL=7,u.ROUND_HALF_FLOOR=8,u.EUCLID=9,u.config=u.set=lA,u.clone=Vd,u.isDecimal=R0,u.abs=Xb,u.acos=Jb,u.acosh=Qb,u.add=eA,u.asin=tA,u.asinh=rA,u.atan=nA,u.atanh=iA,u.atan2=uA,u.cbrt=aA,u.ceil=sA,u.clamp=oA,u.cos=fA,u.cosh=cA,u.div=hA,u.exp=dA,u.floor=pA,u.hypot=vA,u.ln=gA,u.log=mA,u.log10=_A,u.log2=DA,u.max=yA,u.min=bA,u.mod=AA,u.mul=wA,u.pow=EA,u.random=FA,u.round=CA,u.sign=SA,u.sin=BA,u.sinh=OA,u.sqrt=MA,u.sub=PA,u.sum=xA,u.tan=IA,u.tanh=TA,u.trunc=NA,t===void 0&&(t={}),t&&t.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)t.hasOwnProperty(r=i[e++])||(t[r]=this[r]);return u.config(t),u}function hA(t,e){return new this(t).div(e)}function dA(t){return new this(t).exp()}function pA(t){return Re(t=new this(t),t.e+1,3)}function vA(){var t,e,r=new this(0);for(He=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return He=!0,new this(1/0);r=e}return He=!0,r.sqrt()}function R0(t){return t instanceof hu||t&&t.toStringTag===Td||!1}function gA(t){return new this(t).ln()}function mA(t,e){return new this(t).log(e)}function DA(t){return new this(t).log(2)}function _A(t){return new this(t).log(10)}function yA(){return Ld(this,arguments,"lt")}function bA(){return Ld(this,arguments,"gt")}function AA(t,e){return new this(t).mod(e)}function wA(t,e){return new this(t).mul(e)}function EA(t,e){return new this(t).pow(e)}function FA(t){var e,r,i,u,a=0,o=new this(1),l=[];if(t===void 0?t=this.precision:zr(t,1,Ai),i=Math.ceil(t/Ve),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));a<i;)u=e[a],u>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:l[a++]=u%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);a<i;)u=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),u>=214e7?crypto.randomBytes(4).copy(e,a):(l.push(u%1e7),a+=4);a=i/4}else throw Error(Id);else for(;a<i;)l[a++]=Math.random()*1e7|0;for(i=l[--a],t%=Ve,i&&t&&(u=dr(10,Ve-t),l[a]=(i/u|0)*u);l[a]===0;a--)l.pop();if(a<0)r=0,l=[0];else{for(r=-1;l[0]===0;r-=Ve)l.shift();for(i=1,u=l[0];u>=10;u/=10)i++;i<Ve&&(r-=Ve-i)}return o.e=r,o.d=l,o}function CA(t){return Re(t=new this(t),t.e+1,this.rounding)}function SA(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function BA(t){return new this(t).sin()}function OA(t){return new this(t).sinh()}function MA(t){return new this(t).sqrt()}function PA(t,e){return new this(t).sub(e)}function xA(){var t=0,e=arguments,r=new this(e[t]);for(He=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return He=!0,Re(r,this.precision,this.rounding)}function IA(t){return new this(t).tan()}function TA(t){return new this(t).tanh()}function NA(t){return Re(t=new this(t),t.e+1,1)}ge[Symbol.for("nodejs.util.inspect.custom")]=ge.toString;ge[Symbol.toStringTag]="Decimal";var hu=ge.constructor=Vd(Ml);Qa=new hu(Qa);es=new hu(es);var kA="BigNumber",RA=["?on","config"],LA=Bt(kA,RA,t=>{var{on:e,config:r}=t,i=hu.clone({precision:r.precision,modulo:hu.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(u){return new i(u.value)},e&&e("config",function(u,a){u.precision!==a.precision&&i.config({precision:u.precision})}),i},{isClass:!0}),lr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ql(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Tl={},UA={get exports(){return Tl},set exports(t){Tl=t}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var i=Math.cosh||function(f){return Math.abs(f)<1e-9?1-f:(Math.exp(f)+Math.exp(-f))*.5},u=Math.sinh||function(f){return Math.abs(f)<1e-9?f:(Math.exp(f)-Math.exp(-f))*.5},a=function(f){var h=Math.PI/4;if(-h>f||f>h)return Math.cos(f)-1;var D=f*f;return D*(D*(D*(D*(D*(D*(D*(D/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(f,h){var D=Math.abs(f),b=Math.abs(h);return D<3e3&&b<3e3?Math.sqrt(D*D+b*b):(D<b?(D=b,b=f/h):b=h/f,D*Math.sqrt(1+b*b))},l=function(){throw SyntaxError("Invalid Param")};function d(f,h){var D=Math.abs(f),b=Math.abs(h);return f===0?Math.log(b):h===0?Math.log(D):D<3e3&&b<3e3?Math.log(f*f+h*h)*.5:(f=f/2,h=h/2,.5*Math.log(f*f+h*h)+Math.LN2)}var p=function(f,h){var D={re:0,im:0};if(f==null)D.re=D.im=0;else if(h!==void 0)D.re=f,D.im=h;else switch(typeof f){case"object":if("im"in f&&"re"in f)D.re=f.re,D.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return c.INFINITY;D.re=f.abs*Math.cos(f.arg),D.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return c.INFINITY;D.re=f.r*Math.cos(f.phi),D.im=f.r*Math.sin(f.phi)}else f.length===2?(D.re=f[0],D.im=f[1]):l();break;case"string":D.im=D.re=0;var b=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),g=1,m=0;b===null&&l();for(var y=0;y<b.length;y++){var E=b[y];E===" "||E==="	"||E===`
`||(E==="+"?g++:E==="-"?m++:E==="i"||E==="I"?(g+m===0&&l(),b[y+1]!==" "&&!isNaN(b[y+1])?(D.im+=parseFloat((m%2?"-":"")+b[y+1]),y++):D.im+=parseFloat((m%2?"-":"")+"1"),g=m=0):((g+m===0||isNaN(E))&&l(),b[y+1]==="i"||b[y+1]==="I"?(D.im+=parseFloat((m%2?"-":"")+E),y++):D.re+=parseFloat((m%2?"-":"")+E),g=m=0))}g+m>0&&l();break;case"number":D.im=0,D.re=f;break;default:l()}return isNaN(D.re)||isNaN(D.im),D};function c(f,h){if(!(this instanceof c))return new c(f,h);var D=p(f,h);this.re=D.re,this.im=D.im}c.prototype={re:0,im:0,sign:function(){var f=this.abs();return new c(this.re/f,this.im/f)},add:function(f,h){var D=new c(f,h);return this.isInfinite()&&D.isInfinite()?c.NAN:this.isInfinite()||D.isInfinite()?c.INFINITY:new c(this.re+D.re,this.im+D.im)},sub:function(f,h){var D=new c(f,h);return this.isInfinite()&&D.isInfinite()?c.NAN:this.isInfinite()||D.isInfinite()?c.INFINITY:new c(this.re-D.re,this.im-D.im)},mul:function(f,h){var D=new c(f,h);return this.isInfinite()&&D.isZero()||this.isZero()&&D.isInfinite()?c.NAN:this.isInfinite()||D.isInfinite()?c.INFINITY:D.im===0&&this.im===0?new c(this.re*D.re,0):new c(this.re*D.re-this.im*D.im,this.re*D.im+this.im*D.re)},div:function(f,h){var D=new c(f,h);if(this.isZero()&&D.isZero()||this.isInfinite()&&D.isInfinite())return c.NAN;if(this.isInfinite()||D.isZero())return c.INFINITY;if(this.isZero()||D.isInfinite())return c.ZERO;f=this.re,h=this.im;var b=D.re,g=D.im,m,y;return g===0?new c(f/b,h/b):Math.abs(b)<Math.abs(g)?(y=b/g,m=b*y+g,new c((f*y+h)/m,(h*y-f)/m)):(y=g/b,m=g*y+b,new c((f+h*y)/m,(h-f*y)/m))},pow:function(f,h){var D=new c(f,h);if(f=this.re,h=this.im,D.isZero())return c.ONE;if(D.im===0){if(h===0&&f>0)return new c(Math.pow(f,D.re),0);if(f===0)switch((D.re%4+4)%4){case 0:return new c(Math.pow(h,D.re),0);case 1:return new c(0,Math.pow(h,D.re));case 2:return new c(-Math.pow(h,D.re),0);case 3:return new c(0,-Math.pow(h,D.re))}}if(f===0&&h===0&&D.re>0&&D.im>=0)return c.ZERO;var b=Math.atan2(h,f),g=d(f,h);return f=Math.exp(D.re*g-D.im*b),h=D.im*g+D.re*b,new c(f*Math.cos(h),f*Math.sin(h))},sqrt:function(){var f=this.re,h=this.im,D=this.abs(),b,g;if(f>=0){if(h===0)return new c(Math.sqrt(f),0);b=.5*Math.sqrt(2*(D+f))}else b=Math.abs(h)/Math.sqrt(2*(D-f));return f<=0?g=.5*Math.sqrt(2*(D-f)):g=Math.abs(h)/Math.sqrt(2*(D+f)),new c(b,h<0?-g:g)},exp:function(){var f=Math.exp(this.re);return this.im,new c(f*Math.cos(this.im),f*Math.sin(this.im))},expm1:function(){var f=this.re,h=this.im;return new c(Math.expm1(f)*Math.cos(h)+a(h),Math.exp(f)*Math.sin(h))},log:function(){var f=this.re,h=this.im;return new c(d(f,h),Math.atan2(h,f))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var f=this.re,h=this.im;return new c(Math.sin(f)*i(h),Math.cos(f)*u(h))},cos:function(){var f=this.re,h=this.im;return new c(Math.cos(f)*i(h),-Math.sin(f)*u(h))},tan:function(){var f=2*this.re,h=2*this.im,D=Math.cos(f)+i(h);return new c(Math.sin(f)/D,u(h)/D)},cot:function(){var f=2*this.re,h=2*this.im,D=Math.cos(f)-i(h);return new c(-Math.sin(f)/D,u(h)/D)},sec:function(){var f=this.re,h=this.im,D=.5*i(2*h)+.5*Math.cos(2*f);return new c(Math.cos(f)*i(h)/D,Math.sin(f)*u(h)/D)},csc:function(){var f=this.re,h=this.im,D=.5*i(2*h)-.5*Math.cos(2*f);return new c(Math.sin(f)*i(h)/D,-Math.cos(f)*u(h)/D)},asin:function(){var f=this.re,h=this.im,D=new c(h*h-f*f+1,-2*f*h).sqrt(),b=new c(D.re-h,D.im+f).log();return new c(b.im,-b.re)},acos:function(){var f=this.re,h=this.im,D=new c(h*h-f*f+1,-2*f*h).sqrt(),b=new c(D.re-h,D.im+f).log();return new c(Math.PI/2-b.im,b.re)},atan:function(){var f=this.re,h=this.im;if(f===0){if(h===1)return new c(0,1/0);if(h===-1)return new c(0,-1/0)}var D=f*f+(1-h)*(1-h),b=new c((1-h*h-f*f)/D,-2*f/D).log();return new c(-.5*b.im,.5*b.re)},acot:function(){var f=this.re,h=this.im;if(h===0)return new c(Math.atan2(1,f),0);var D=f*f+h*h;return D!==0?new c(f/D,-h/D).atan():new c(f!==0?f/0:0,h!==0?-h/0:0).atan()},asec:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(0,1/0);var D=f*f+h*h;return D!==0?new c(f/D,-h/D).acos():new c(f!==0?f/0:0,h!==0?-h/0:0).acos()},acsc:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(Math.PI/2,1/0);var D=f*f+h*h;return D!==0?new c(f/D,-h/D).asin():new c(f!==0?f/0:0,h!==0?-h/0:0).asin()},sinh:function(){var f=this.re,h=this.im;return new c(u(f)*Math.cos(h),i(f)*Math.sin(h))},cosh:function(){var f=this.re,h=this.im;return new c(i(f)*Math.cos(h),u(f)*Math.sin(h))},tanh:function(){var f=2*this.re,h=2*this.im,D=i(f)+Math.cos(h);return new c(u(f)/D,Math.sin(h)/D)},coth:function(){var f=2*this.re,h=2*this.im,D=i(f)-Math.cos(h);return new c(u(f)/D,-Math.sin(h)/D)},csch:function(){var f=this.re,h=this.im,D=Math.cos(2*h)-i(2*f);return new c(-2*u(f)*Math.cos(h)/D,2*i(f)*Math.sin(h)/D)},sech:function(){var f=this.re,h=this.im,D=Math.cos(2*h)+i(2*f);return new c(2*i(f)*Math.cos(h)/D,-2*u(f)*Math.sin(h)/D)},asinh:function(){var f=this.im;this.im=-this.re,this.re=f;var h=this.asin();return this.re=-this.im,this.im=f,f=h.re,h.re=-h.im,h.im=f,h},acosh:function(){var f=this.acos();if(f.im<=0){var h=f.re;f.re=-f.im,f.im=h}else{var h=f.im;f.im=-f.re,f.re=h}return f},atanh:function(){var f=this.re,h=this.im,D=f>1&&h===0,b=1-f,g=1+f,m=b*b+h*h,y=m!==0?new c((g*b-h*h)/m,(h*b+g*h)/m):new c(f!==-1?f/0:0,h!==0?h/0:0),E=y.re;return y.re=d(y.re,y.im)/2,y.im=Math.atan2(y.im,E)/2,D&&(y.im=-y.im),y},acoth:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(0,Math.PI/2);var D=f*f+h*h;return D!==0?new c(f/D,-h/D).atanh():new c(f!==0?f/0:0,h!==0?-h/0:0).atanh()},acsch:function(){var f=this.re,h=this.im;if(h===0)return new c(f!==0?Math.log(f+Math.sqrt(f*f+1)):1/0,0);var D=f*f+h*h;return D!==0?new c(f/D,-h/D).asinh():new c(f!==0?f/0:0,h!==0?-h/0:0).asinh()},asech:function(){var f=this.re,h=this.im;if(this.isZero())return c.INFINITY;var D=f*f+h*h;return D!==0?new c(f/D,-h/D).acosh():new c(f!==0?f/0:0,h!==0?-h/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var f=this.re,h=this.im,D=f*f+h*h;return new c(f/D,-h/D)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(f){return f=Math.pow(10,f||0),new c(Math.ceil(this.re*f)/f,Math.ceil(this.im*f)/f)},floor:function(f){return f=Math.pow(10,f||0),new c(Math.floor(this.re*f)/f,Math.floor(this.im*f)/f)},round:function(f){return f=Math.pow(10,f||0),new c(Math.round(this.re*f)/f,Math.round(this.im*f)/f)},equals:function(f,h){var D=new c(f,h);return Math.abs(D.re-this.re)<=c.EPSILON&&Math.abs(D.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var f=this.re,h=this.im,D="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(f)<c.EPSILON&&(f=0),Math.abs(h)<c.EPSILON&&(h=0),h===0?D+f:(f!==0?(D+=f,D+=" ",h<0?(h=-h,D+="-"):D+="+",D+=" "):h<0&&(h=-h,D+="-"),h!==1&&(D+=h),D+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,t.exports=c})()})(UA);const Fr=Ql(Tl);var jA="Complex",VA=[],qA=Bt(jA,VA,()=>(Object.defineProperty(Fr,"name",{value:"Complex"}),Fr.prototype.constructor=Fr,Fr.prototype.type="Complex",Fr.prototype.isComplex=!0,Fr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Fr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Fr.prototype.format=function(t){var e="",r=this.im,i=this.re,u=Sl(this.re,t),a=Sl(this.im,t),o=Xt(t)?t:t?t.precision:null;if(o!==null){var l=Math.pow(10,-o);Math.abs(i/r)<l&&(i=0),Math.abs(r/i)<l&&(r=0)}return r===0?e=u:i===0?r===1?e="i":r===-1?e="-i":e=a+"i":r<0?r===-1?e=u+" - i":e=u+" - "+a.substring(1)+"i":r===1?e=u+" + i":e=u+" + "+a+"i",e},Fr.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Fr(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],i=arguments[1];if(Xt(r)){if(_d(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),Xt(i))return new Fr({r,phi:i});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Fr.prototype.valueOf=Fr.prototype.toString,Fr.fromJSON=function(t){return new Fr(t)},Fr.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Fr),{isClass:!0}),Nl={},zA={get exports(){return Nl},set exports(t){Nl=t}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var i=2e3,u={s:1,n:0,d:1};function a(b,g){if(isNaN(b=parseInt(b,10)))throw D.InvalidParameter;return b*g}function o(b,g){if(g===0)throw D.DivisionByZero;var m=Object.create(D.prototype);m.s=b<0?-1:1,b=b<0?-b:b;var y=h(b,g);return m.n=b/y,m.d=g/y,m}function l(b){for(var g={},m=b,y=2,E=4;E<=m;){for(;m%y===0;)m/=y,g[y]=(g[y]||0)+1;E+=1+2*y++}return m!==b?m>1&&(g[m]=(g[m]||0)+1):g[b]=(g[b]||0)+1,g}var d=function(b,g){var m=0,y=1,E=1,w=0,B=0,F=0,O=1,P=1,I=0,N=1,W=1,$=1,K=1e7,q;if(b!=null)if(g!==void 0){if(m=b,y=g,E=m*y,m%1!==0||y%1!==0)throw D.NonIntegerParameter}else switch(typeof b){case"object":{if("d"in b&&"n"in b)m=b.n,y=b.d,"s"in b&&(m*=b.s);else if(0 in b)m=b[0],1 in b&&(y=b[1]);else throw D.InvalidParameter;E=m*y;break}case"number":{if(b<0&&(E=b,b=-b),b%1===0)m=b;else if(b>0){for(b>=1&&(P=Math.pow(10,Math.floor(1+Math.log(b)/Math.LN10)),b/=P);N<=K&&$<=K;)if(q=(I+W)/(N+$),b===q){N+$<=K?(m=I+W,y=N+$):$>N?(m=W,y=$):(m=I,y=N);break}else b>q?(I+=W,N+=$):(W+=I,$+=N),N>K?(m=W,y=$):(m=I,y=N);m*=P}else(isNaN(b)||isNaN(g))&&(y=m=NaN);break}case"string":{if(N=b.match(/\d+|./g),N===null)throw D.InvalidParameter;if(N[I]==="-"?(E=-1,I++):N[I]==="+"&&I++,N.length===I+1?B=a(N[I++],E):N[I+1]==="."||N[I]==="."?(N[I]!=="."&&(w=a(N[I++],E)),I++,(I+1===N.length||N[I+1]==="("&&N[I+3]===")"||N[I+1]==="'"&&N[I+3]==="'")&&(B=a(N[I],E),O=Math.pow(10,N[I].length),I++),(N[I]==="("&&N[I+2]===")"||N[I]==="'"&&N[I+2]==="'")&&(F=a(N[I+1],E),P=Math.pow(10,N[I+1].length)-1,I+=3)):N[I+1]==="/"||N[I+1]===":"?(B=a(N[I],E),O=a(N[I+2],1),I+=3):N[I+3]==="/"&&N[I+1]===" "&&(w=a(N[I],E),B=a(N[I+2],E),O=a(N[I+4],1),I+=5),N.length<=I){y=O*P,E=m=F+y*w+P*B;break}}default:throw D.InvalidParameter}if(y===0)throw D.DivisionByZero;u.s=E<0?-1:1,u.n=Math.abs(m),u.d=Math.abs(y)};function p(b,g,m){for(var y=1;g>0;b=b*b%m,g>>=1)g&1&&(y=y*b%m);return y}function c(b,g){for(;g%2===0;g/=2);for(;g%5===0;g/=5);if(g===1)return 0;for(var m=10%g,y=1;m!==1;y++)if(m=m*10%g,y>i)return 0;return y}function f(b,g,m){for(var y=1,E=p(10,m,g),w=0;w<300;w++){if(y===E)return w;y=y*10%g,E=E*10%g}return 0}function h(b,g){if(!b)return g;if(!g)return b;for(;;){if(b%=g,!b)return g;if(g%=b,!g)return b}}function D(b,g){if(d(b,g),this instanceof D)b=h(u.d,u.n),this.s=u.s,this.n=u.n/b,this.d=u.d/b;else return o(u.s*u.n,u.d)}D.DivisionByZero=new Error("Division by Zero"),D.InvalidParameter=new Error("Invalid argument"),D.NonIntegerParameter=new Error("Parameters must be integer"),D.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(b,g){return d(b,g),o(this.s*this.n*u.d+u.s*this.d*u.n,this.d*u.d)},sub:function(b,g){return d(b,g),o(this.s*this.n*u.d-u.s*this.d*u.n,this.d*u.d)},mul:function(b,g){return d(b,g),o(this.s*u.s*this.n*u.n,this.d*u.d)},div:function(b,g){return d(b,g),o(this.s*u.s*this.n*u.d,this.d*u.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(b,g){if(isNaN(this.n)||isNaN(this.d))return new D(NaN);if(b===void 0)return o(this.s*this.n%this.d,1);if(d(b,g),u.n===0&&this.d===0)throw D.DivisionByZero;return o(this.s*(u.d*this.n)%(u.n*this.d),u.d*this.d)},gcd:function(b,g){return d(b,g),o(h(u.n,this.n)*h(u.d,this.d),u.d*this.d)},lcm:function(b,g){return d(b,g),u.n===0&&this.n===0?o(0,1):o(u.n*this.n,h(u.n,this.n)*h(u.d,this.d))},ceil:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new D(NaN):o(Math.ceil(b*this.s*this.n/this.d),b)},floor:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new D(NaN):o(Math.floor(b*this.s*this.n/this.d),b)},round:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new D(NaN):o(Math.round(b*this.s*this.n/this.d),b)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(b,g){if(d(b,g),u.d===1)return u.s<0?o(Math.pow(this.s*this.d,u.n),Math.pow(this.n,u.n)):o(Math.pow(this.s*this.n,u.n),Math.pow(this.d,u.n));if(this.s<0)return null;var m=l(this.n),y=l(this.d),E=1,w=1;for(var B in m)if(B!=="1"){if(B==="0"){E=0;break}if(m[B]*=u.n,m[B]%u.d===0)m[B]/=u.d;else return null;E*=Math.pow(B,m[B])}for(var B in y)if(B!=="1"){if(y[B]*=u.n,y[B]%u.d===0)y[B]/=u.d;else return null;w*=Math.pow(B,y[B])}return u.s<0?o(w,E):o(E,w)},equals:function(b,g){return d(b,g),this.s*this.n*u.d===u.s*u.n*this.d},compare:function(b,g){d(b,g);var m=this.s*this.n*u.d-u.s*u.n*this.d;return(0<m)-(m<0)},simplify:function(b){if(isNaN(this.n)||isNaN(this.d))return this;b=b||.001;for(var g=this.abs(),m=g.toContinued(),y=1;y<m.length;y++){for(var E=o(m[y-1],1),w=y-2;w>=0;w--)E=E.inverse().add(m[w]);if(E.sub(g).abs().valueOf()<b)return E.mul(this.s)}return this},divisible:function(b,g){return d(b,g),!(!(u.n*this.d)||this.n*u.d%(u.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(b){var g,m="",y=this.n,E=this.d;return this.s<0&&(m+="-"),E===1?m+=y:(b&&(g=Math.floor(y/E))>0&&(m+=g,m+=" ",y%=E),m+=y,m+="/",m+=E),m},toLatex:function(b){var g,m="",y=this.n,E=this.d;return this.s<0&&(m+="-"),E===1?m+=y:(b&&(g=Math.floor(y/E))>0&&(m+=g,y%=E),m+="\\frac{",m+=y,m+="}{",m+=E,m+="}"),m},toContinued:function(){var b,g=this.n,m=this.d,y=[];if(isNaN(g)||isNaN(m))return y;do y.push(Math.floor(g/m)),b=g%m,g=m,m=b;while(g!==1);return y},toString:function(b){var g=this.n,m=this.d;if(isNaN(g)||isNaN(m))return"NaN";b=b||15;var y=c(g,m),E=f(g,m,y),w=this.s<0?"-":"";if(w+=g/m|0,g%=m,g*=10,g&&(w+="."),y){for(var B=E;B--;)w+=g/m|0,g%=m,g*=10;w+="(";for(var B=y;B--;)w+=g/m|0,g%=m,g*=10;w+=")"}else for(var B=b;g&&B--;)w+=g/m|0,g%=m,g*=10;return w}},Object.defineProperty(D,"__esModule",{value:!0}),D.default=D,D.Fraction=D,t.exports=D})()})(zA);const ei=Ql(Nl);var WA="Fraction",HA=[],GA=Bt(WA,HA,()=>(Object.defineProperty(ei,"name",{value:"Fraction"}),ei.prototype.constructor=ei,ei.prototype.type="Fraction",ei.prototype.isFraction=!0,ei.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},ei.fromJSON=function(t){return new ei(t)},ei),{isClass:!0}),KA="Matrix",YA=[],$A=Bt(KA,YA,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,i){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,i){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function qd(t){return Object.keys(t.signatures||{}).reduce(function(e,r){var i=(r.match(/,/g)||[]).length+1;return Math.max(e,i)},-1)}var ZA="DenseMatrix",XA=["Matrix"],JA=Bt(ZA,XA,t=>{var{Matrix:e}=t;function r(c,f){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Rn(f))throw new Error("Invalid datatype: "+f);if(Rr(c))c.type==="DenseMatrix"?(this._data=_r(c._data),this._size=_r(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&Yt(c.data)&&Yt(c.size))this._data=c.data,this._size=c.size,I0(this._data,this._size),this._datatype=f||c.datatype;else if(Yt(c))this._data=p(c),this._size=_i(this._data),I0(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+Ku(c)+")");this._data=[],this._size=[0],this._datatype=f}}r.prototype=new e,r.prototype.createDenseMatrix=function(c,f){return new r(c,f)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return Ja(this._data,Ku)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(c,f){return new r(c,f)},r.prototype.subset=function(c,f,h){switch(arguments.length){case 1:return i(this,c);case 2:case 3:return a(this,c,f,h);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(c){if(!Yt(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new Ct(c.length,this._size.length);for(var f=0;f<c.length;f++)$t(c[f],this._size[f]);for(var h=this._data,D=0,b=c.length;D<b;D++){var g=c[D];$t(g,h.length),h=h[g]}return h},r.prototype.set=function(c,f,h){if(!Yt(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new Ct(c.length,this._size.length,"<");var D,b,g,m=c.map(function(E){return E+1});d(this,m,h);var y=this._data;for(D=0,b=c.length-1;D<b;D++)g=c[D],$t(g,y.length),y=y[g];return g=c[c.length-1],$t(g,y.length),y[g]=f,this};function i(c,f){if(!Zl(f))throw new TypeError("Invalid index");var h=f.isScalar();if(h)return c.get(f.min());var D=f.size();if(D.length!==c._size.length)throw new Ct(D.length,c._size.length);for(var b=f.min(),g=f.max(),m=0,y=c._size.length;m<y;m++)$t(b[m],c._size[m]),$t(g[m],c._size[m]);return new r(u(c._data,f,D.length,0),c._datatype)}function u(c,f,h,D){var b=D===h-1,g=f.dimension(D);return b?g.map(function(m){return $t(m,c.length),c[m]}).valueOf():g.map(function(m){$t(m,c.length);var y=c[m];return u(y,f,h,D+1)}).valueOf()}function a(c,f,h,D){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var b=f.size(),g=f.isScalar(),m;if(Rr(h)?(m=h.size(),h=h.valueOf()):m=_i(h),g){if(m.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),h,D)}else{if(b.length<c._size.length)throw new Ct(b.length,c._size.length,"<");if(m.length<b.length){for(var y=0,E=0;b[y]===1&&m[y]===1;)y++;for(;b[y]===1;)E++,y++;h=Cd(h,b.length,E,m)}if(!Za(b,m))throw new Ct(b,m,">");var w=f.max().map(function(O){return O+1});d(c,w,D);var B=b.length,F=0;o(c._data,f,h,B,F)}return c}function o(c,f,h,D,b){var g=b===D-1,m=f.dimension(b);g?m.forEach(function(y,E){$t(y),c[y]=h[E[0]]}):m.forEach(function(y,E){$t(y),o(c[y],f,h[E[0]],D,b+1)})}r.prototype.resize=function(c,f,h){if(!$a(c))throw new TypeError("Array or Matrix expected");var D=c.valueOf().map(g=>Array.isArray(g)&&g.length===1?g[0]:g),b=h?this.clone():this;return l(b,D,f)};function l(c,f,h){if(f.length===0){for(var D=c._data;Yt(D);)D=D[0];return D}return c._size=f.slice(0),c._data=T0(c._data,c._size,h),c}r.prototype.reshape=function(c,f){var h=f?this.clone():this;h._data=Cb(h._data,c);var D=h._size.reduce((b,g)=>b*g);return h._size=Xl(c,D),h};function d(c,f,h){for(var D=c._size.slice(0),b=!1;D.length<f.length;)D.push(0),b=!0;for(var g=0,m=f.length;g<m;g++)f[g]>D[g]&&(D[g]=f[g],b=!0);b&&l(c,D,h)}r.prototype.clone=function(){var c=new r({data:_r(this._data),size:_r(this._size),datatype:this._datatype});return c},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(c){var f=this,h=qd(c),D=function m(y,E){return Yt(y)?y.map(function(w,B){return m(w,E.concat(B))}):h===1?c(y):h===2?c(y,E):c(y,E,f)},b=D(this._data,[]),g=this._datatype!==void 0?Ja(b,Ku):void 0;return new r(b,g)},r.prototype.forEach=function(c){var f=this,h=function D(b,g){Yt(b)?b.forEach(function(m,y){D(m,g.concat(y))}):c(b,g,f)};h(this._data,[])},r.prototype[Symbol.iterator]=function*(){var c=function*f(h,D){if(Yt(h))for(var b=0;b<h.length;b++)yield*f(h[b],D.concat(b));else yield{value:h,index:D}};yield*c(this._data,[])},r.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var h=this._data;for(var D of h)c.push(new r([D],this._datatype));return c},r.prototype.columns=function(){var c=this,f=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var D=this._data,b=function(y){var E=D.map(w=>[w[y]]);f.push(new r(E,c._datatype))},g=0;g<h[1];g++)b(g);return f},r.prototype.toArray=function(){return _r(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(c){return qr(this._data,c)},r.prototype.toString=function(){return qr(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(c){if(c){if(dn(c)&&(c=c.toNumber()),!Xt(c)||!yr(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,h=c<0?-c:0,D=this._size[0],b=this._size[1],g=Math.min(D-h,b-f),m=[],y=0;y<g;y++)m[y]=this._data[y+h][y+f];return new r({data:m,size:[g],datatype:this._datatype})},r.diagonal=function(c,f,h,D){if(!Yt(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(P){if(dn(P)&&(P=P.toNumber()),!Xt(P)||!yr(P)||P<1)throw new Error("Size values must be positive integers");return P}),h){if(dn(h)&&(h=h.toNumber()),!Xt(h)||!yr(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var b=h>0?h:0,g=h<0?-h:0,m=c[0],y=c[1],E=Math.min(m-g,y-b),w;if(Yt(f)){if(f.length!==E)throw new Error("Invalid value array length");w=function(I){return f[I]}}else if(Rr(f)){var B=f.size();if(B.length!==1||B[0]!==E)throw new Error("Invalid matrix length");w=function(I){return f.get([I])}}else w=function(){return f};D||(D=dn(w(0))?w(0).mul(0):0);var F=[];if(c.length>0){F=T0(F,c,D);for(var O=0;O<E;O++)F[O+g][O+b]=w(O)}return new r({data:F,size:[m,y]})},r.fromJSON=function(c){return new r(c)},r.prototype.swapRows=function(c,f){if(!Xt(c)||!yr(c)||!Xt(f)||!yr(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return $t(c,this._size[0]),$t(f,this._size[0]),r._swapRows(c,f,this._data),this},r._swapRows=function(c,f,h){var D=h[c];h[c]=h[f],h[f]=D};function p(c){for(var f=0,h=c.length;f<h;f++){var D=c[f];Yt(D)?c[f]=p(D):D&&D.isMatrix===!0&&(c[f]=p(D.valueOf()))}return c}return r},{isClass:!0});function ef(t,e,r){return t&&typeof t.map=="function"?t.map(function(i){return ef(i,e)}):e(t)}var L0="isInteger",QA=["typed"],ew=Bt(L0,QA,t=>{var{typed:e}=t;return e(L0,{number:yr,BigNumber:function(i){return i.isInt()},Fraction:function(i){return i.d===1&&isFinite(i.n)},"Array | Matrix":e.referToSelf(r=>i=>ef(i,r))})}),zd="number, number";function Wd(t,e){return t+e}Wd.signature=zd;function Hd(t,e){return t*e}Hd.signature=zd;function tw(t,e,r){if(r==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var i=t.minus(e).abs();if(i.isZero())return!0;var u=t.constructor.max(t.abs(),e.abs());return i.lte(u.times(r))}return!1}function rw(t,e,r){return Xa(t.re,e.re,r)&&Xa(t.im,e.im,r)}var nw=Bt("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(i,u)=>{if(!i.equalBase(u))throw new Error("Cannot compare units with different base");return e.find(r,[i.valueType(),u.valueType()])(i.value,u.value)})}}),rs="equalScalar",iw=["typed","config"],uw=Bt(rs,iw,t=>{var{typed:e,config:r}=t,i=nw({typed:e});return e(rs,{"boolean, boolean":function(a,o){return a===o},"number, number":function(a,o){return Xa(a,o,r.epsilon)},"BigNumber, BigNumber":function(a,o){return a.eq(o)||tw(a,o,r.epsilon)},"Fraction, Fraction":function(a,o){return a.equals(o)},"Complex, Complex":function(a,o){return rw(a,o,r.epsilon)}},i)});Bt(rs,["typed","config"],t=>{var{typed:e,config:r}=t;return e(rs,{"number, number":function(u,a){return Xa(u,a,r.epsilon)}})});var aw="SparseMatrix",sw=["typed","equalScalar","Matrix"],ow=Bt(aw,sw,t=>{var{typed:e,equalScalar:r,Matrix:i}=t;function u(g,m){if(!(this instanceof u))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!Rn(m))throw new Error("Invalid datatype: "+m);if(Rr(g))a(this,g,m);else if(g&&Yt(g.index)&&Yt(g.ptr)&&Yt(g.size))this._values=g.values,this._index=g.index,this._ptr=g.ptr,this._size=g.size,this._datatype=m||g.datatype;else if(Yt(g))o(this,g,m);else{if(g)throw new TypeError("Unsupported type of data ("+Ku(g)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function a(g,m,y){m.type==="SparseMatrix"?(g._values=m._values?_r(m._values):void 0,g._index=_r(m._index),g._ptr=_r(m._ptr),g._size=_r(m._size),g._datatype=y||m._datatype):o(g,m.valueOf(),y||m._datatype)}function o(g,m,y){g._values=[],g._index=[],g._ptr=[],g._datatype=y;var E=m.length,w=0,B=r,F=0;if(Rn(y)&&(B=e.find(r,[y,y])||r,F=e.convert(0,y)),E>0){var O=0;do{g._ptr.push(g._index.length);for(var P=0;P<E;P++){var I=m[P];if(Yt(I)){if(O===0&&w<I.length&&(w=I.length),O<I.length){var N=I[O];B(N,F)||(g._values.push(N),g._index.push(P))}}else O===0&&w<1&&(w=1),B(I,F)||(g._values.push(I),g._index.push(P))}O++}while(O<w)}g._ptr.push(g._index.length),g._size=[E,w]}u.prototype=new i,u.prototype.createSparseMatrix=function(g,m){return new u(g,m)},Object.defineProperty(u,"name",{value:"SparseMatrix"}),u.prototype.constructor=u,u.prototype.type="SparseMatrix",u.prototype.isSparseMatrix=!0,u.prototype.getDataType=function(){return Ja(this._values,Ku)},u.prototype.storage=function(){return"sparse"},u.prototype.datatype=function(){return this._datatype},u.prototype.create=function(g,m){return new u(g,m)},u.prototype.density=function(){var g=this._size[0],m=this._size[1];return g!==0&&m!==0?this._index.length/(g*m):0},u.prototype.subset=function(g,m,y){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return l(this,g);case 2:case 3:return d(this,g,m,y);default:throw new SyntaxError("Wrong number of arguments")}};function l(g,m){if(!Zl(m))throw new TypeError("Invalid index");var y=m.isScalar();if(y)return g.get(m.min());var E=m.size();if(E.length!==g._size.length)throw new Ct(E.length,g._size.length);var w,B,F,O,P=m.min(),I=m.max();for(w=0,B=g._size.length;w<B;w++)$t(P[w],g._size[w]),$t(I[w],g._size[w]);var N=g._values,W=g._index,$=g._ptr,K=m.dimension(0),q=m.dimension(1),G=[],L=[];K.forEach(function(ve,ye){L[ve]=ye[0],G[ve]=!0});var z=N?[]:void 0,te=[],le=[];return q.forEach(function(ve){for(le.push(te.length),F=$[ve],O=$[ve+1];F<O;F++)w=W[F],G[w]===!0&&(te.push(L[w]),z&&z.push(N[F]))}),le.push(te.length),new u({values:z,index:te,ptr:le,size:E,datatype:g._datatype})}function d(g,m,y,E){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var w=m.size(),B=m.isScalar(),F;if(Rr(y)?(F=y.size(),y=y.toArray()):F=_i(y),B){if(F.length!==0)throw new TypeError("Scalar expected");g.set(m.min(),y,E)}else{if(w.length!==1&&w.length!==2)throw new Ct(w.length,g._size.length,"<");if(F.length<w.length){for(var O=0,P=0;w[O]===1&&F[O]===1;)O++;for(;w[O]===1;)P++,O++;y=Cd(y,w.length,P,F)}if(!Za(w,F))throw new Ct(w,F,">");if(w.length===1){var I=m.dimension(0);I.forEach(function($,K){$t($),g.set([$,0],y[K[0]],E)})}else{var N=m.dimension(0),W=m.dimension(1);N.forEach(function($,K){$t($),W.forEach(function(q,G){$t(q),g.set([$,q],y[K[0]][G[0]],E)})})}}return g}u.prototype.get=function(g){if(!Yt(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new Ct(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=g[0],y=g[1];$t(m,this._size[0]),$t(y,this._size[1]);var E=p(m,this._ptr[y],this._ptr[y+1],this._index);return E<this._ptr[y+1]&&this._index[E]===m?this._values[E]:0},u.prototype.set=function(g,m,y){if(!Yt(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new Ct(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var E=g[0],w=g[1],B=this._size[0],F=this._size[1],O=r,P=0;Rn(this._datatype)&&(O=e.find(r,[this._datatype,this._datatype])||r,P=e.convert(0,this._datatype)),(E>B-1||w>F-1)&&(h(this,Math.max(E+1,B),Math.max(w+1,F),y),B=this._size[0],F=this._size[1]),$t(E,B),$t(w,F);var I=p(E,this._ptr[w],this._ptr[w+1],this._index);return I<this._ptr[w+1]&&this._index[I]===E?O(m,P)?c(I,w,this._values,this._index,this._ptr):this._values[I]=m:O(m,P)||f(I,E,w,m,this._values,this._index,this._ptr),this};function p(g,m,y,E){if(y-m===0)return y;for(var w=m;w<y;w++)if(E[w]===g)return w;return m}function c(g,m,y,E,w){y.splice(g,1),E.splice(g,1);for(var B=m+1;B<w.length;B++)w[B]--}function f(g,m,y,E,w,B,F){w.splice(g,0,E),B.splice(g,0,m);for(var O=y+1;O<F.length;O++)F[O]++}u.prototype.resize=function(g,m,y){if(!$a(g))throw new TypeError("Array or Matrix expected");var E=g.valueOf().map(B=>Array.isArray(B)&&B.length===1?B[0]:B);if(E.length!==2)throw new Error("Only two dimensions matrix are supported");E.forEach(function(B){if(!Xt(B)||!yr(B)||B<0)throw new TypeError("Invalid size, must contain positive integers (size: "+qr(E)+")")});var w=y?this.clone():this;return h(w,E[0],E[1],m)};function h(g,m,y,E){var w=E||0,B=r,F=0;Rn(g._datatype)&&(B=e.find(r,[g._datatype,g._datatype])||r,F=e.convert(0,g._datatype),w=e.convert(w,g._datatype));var O=!B(w,F),P=g._size[0],I=g._size[1],N,W,$;if(y>I){for(W=I;W<y;W++)if(g._ptr[W]=g._values.length,O)for(N=0;N<P;N++)g._values.push(w),g._index.push(N);g._ptr[y]=g._values.length}else y<I&&(g._ptr.splice(y+1,I-y),g._values.splice(g._ptr[y],g._values.length),g._index.splice(g._ptr[y],g._index.length));if(I=y,m>P){if(O){var K=0;for(W=0;W<I;W++){g._ptr[W]=g._ptr[W]+K,$=g._ptr[W+1]+K;var q=0;for(N=P;N<m;N++,q++)g._values.splice($+q,0,w),g._index.splice($+q,0,N),K++}g._ptr[I]=g._values.length}}else if(m<P){var G=0;for(W=0;W<I;W++){g._ptr[W]=g._ptr[W]-G;var L=g._ptr[W],z=g._ptr[W+1]-G;for($=L;$<z;$++)N=g._index[$],N>m-1&&(g._values.splice($,1),g._index.splice($,1),G++)}g._ptr[W]=g._values.length}return g._size[0]=m,g._size[1]=y,g}u.prototype.reshape=function(g,m){if(!Yt(g))throw new TypeError("Array expected");if(g.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");g.forEach(function(ve){if(!Xt(ve)||!yr(ve)||ve<=-2||ve===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+qr(g)+")")});var y=this._size[0]*this._size[1];g=Xl(g,y);var E=g[0]*g[1];if(y!==E)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=m?this.clone():this;if(this._size[0]===g[0]&&this._size[1]===g[1])return w;for(var B=[],F=0;F<w._ptr.length;F++)for(var O=0;O<w._ptr[F+1]-w._ptr[F];O++)B.push(F);for(var P=w._values.slice(),I=w._index.slice(),N=0;N<w._index.length;N++){var W=I[N],$=B[N],K=W*w._size[1]+$;B[N]=K%g[1],I[N]=Math.floor(K/g[1])}w._values.length=0,w._index.length=0,w._ptr.length=g[1]+1,w._size=g.slice();for(var q=0;q<w._ptr.length;q++)w._ptr[q]=0;for(var G=0;G<P.length;G++){var L=I[G],z=B[G],te=P[G],le=p(L,w._ptr[z],w._ptr[z+1],w._index);f(le,L,z,te,w._values,w._index,w._ptr)}return w},u.prototype.clone=function(){var g=new u({values:this._values?_r(this._values):void 0,index:_r(this._index),ptr:_r(this._ptr),size:_r(this._size),datatype:this._datatype});return g},u.prototype.size=function(){return this._size.slice(0)},u.prototype.map=function(g,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var y=this,E=this._size[0],w=this._size[1],B=qd(g),F=function(P,I,N){return B===1?g(P):B===2?g(P,[I,N]):g(P,[I,N],y)};return D(this,0,E-1,0,w-1,F,m)};function D(g,m,y,E,w,B,F){var O=[],P=[],I=[],N=r,W=0;Rn(g._datatype)&&(N=e.find(r,[g._datatype,g._datatype])||r,W=e.convert(0,g._datatype));for(var $=function(Fe,Ne,ke){Fe=B(Fe,Ne,ke),N(Fe,W)||(O.push(Fe),P.push(Ne))},K=E;K<=w;K++){I.push(O.length);var q=g._ptr[K],G=g._ptr[K+1];if(F)for(var L=q;L<G;L++){var z=g._index[L];z>=m&&z<=y&&$(g._values[L],z-m,K-E)}else{for(var te={},le=q;le<G;le++){var ve=g._index[le];te[ve]=g._values[le]}for(var ye=m;ye<=y;ye++){var Se=ye in te?te[ye]:0;$(Se,ye-m,K-E)}}}return I.push(O.length),new u({values:O,index:P,ptr:I,size:[y-m+1,w-E+1]})}u.prototype.forEach=function(g,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var y=this,E=this._size[0],w=this._size[1],B=0;B<w;B++){var F=this._ptr[B],O=this._ptr[B+1];if(m)for(var P=F;P<O;P++){var I=this._index[P];g(this._values[P],[I,B],y)}else{for(var N={},W=F;W<O;W++){var $=this._index[W];N[$]=this._values[W]}for(var K=0;K<E;K++){var q=K in N?N[K]:0;g(q,[K,B],y)}}}},u.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var g=this._size[1],m=0;m<g;m++)for(var y=this._ptr[m],E=this._ptr[m+1],w=y;w<E;w++){var B=this._index[w];yield{value:this._values[w],index:[B,m]}}},u.prototype.toArray=function(){return b(this._values,this._index,this._ptr,this._size,!0)},u.prototype.valueOf=function(){return b(this._values,this._index,this._ptr,this._size,!1)};function b(g,m,y,E,w){var B=E[0],F=E[1],O=[],P,I;for(P=0;P<B;P++)for(O[P]=[],I=0;I<F;I++)O[P][I]=0;for(I=0;I<F;I++)for(var N=y[I],W=y[I+1],$=N;$<W;$++)P=m[$],O[P][I]=g?w?_r(g[$]):g[$]:1;return O}return u.prototype.format=function(g){for(var m=this._size[0],y=this._size[1],E=this.density(),w="Sparse Matrix ["+qr(m,g)+" x "+qr(y,g)+"] density: "+qr(E,g)+`
`,B=0;B<y;B++)for(var F=this._ptr[B],O=this._ptr[B+1],P=F;P<O;P++){var I=this._index[P];w+=`
    (`+qr(I,g)+", "+qr(B,g)+") ==> "+(this._values?qr(this._values[P],g):"X")}return w},u.prototype.toString=function(){return qr(this.toArray())},u.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},u.prototype.diagonal=function(g){if(g){if(dn(g)&&(g=g.toNumber()),!Xt(g)||!yr(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var m=g>0?g:0,y=g<0?-g:0,E=this._size[0],w=this._size[1],B=Math.min(E-y,w-m),F=[],O=[],P=[];P[0]=0;for(var I=m;I<w&&F.length<B;I++)for(var N=this._ptr[I],W=this._ptr[I+1],$=N;$<W;$++){var K=this._index[$];if(K===I-m+y){F.push(this._values[$]),O[F.length-1]=K-y;break}}return P.push(F.length),new u({values:F,index:O,ptr:P,size:[B,1]})},u.fromJSON=function(g){return new u(g)},u.diagonal=function(g,m,y,E,w){if(!Yt(g))throw new TypeError("Array expected, size parameter");if(g.length!==2)throw new Error("Only two dimensions matrix are supported");if(g=g.map(function(ve){if(dn(ve)&&(ve=ve.toNumber()),!Xt(ve)||!yr(ve)||ve<1)throw new Error("Size values must be positive integers");return ve}),y){if(dn(y)&&(y=y.toNumber()),!Xt(y)||!yr(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var B=r,F=0;Rn(w)&&(B=e.find(r,[w,w])||r,F=e.convert(0,w));var O=y>0?y:0,P=y<0?-y:0,I=g[0],N=g[1],W=Math.min(I-P,N-O),$;if(Yt(m)){if(m.length!==W)throw new Error("Invalid value array length");$=function(ye){return m[ye]}}else if(Rr(m)){var K=m.size();if(K.length!==1||K[0]!==W)throw new Error("Invalid matrix length");$=function(ye){return m.get([ye])}}else $=function(){return m};for(var q=[],G=[],L=[],z=0;z<N;z++){L.push(q.length);var te=z-O;if(te>=0&&te<W){var le=$(te);B(le,F)||(G.push(te+P),q.push(le))}}return L.push(q.length),new u({values:q,index:G,ptr:L,size:[I,N]})},u.prototype.swapRows=function(g,m){if(!Xt(g)||!yr(g)||!Xt(m)||!yr(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return $t(g,this._size[0]),$t(m,this._size[0]),u._swapRows(g,m,this._size[1],this._values,this._index,this._ptr),this},u._forEachRow=function(g,m,y,E,w){for(var B=E[g],F=E[g+1],O=B;O<F;O++)w(y[O],m[O])},u._swapRows=function(g,m,y,E,w,B){for(var F=0;F<y;F++){var O=B[F],P=B[F+1],I=p(g,O,P,w),N=p(m,O,P,w);if(I<P&&N<P&&w[I]===g&&w[N]===m){if(E){var W=E[I];E[I]=E[N],E[N]=W}continue}if(I<P&&w[I]===g&&(N>=P||w[N]!==m)){var $=E?E[I]:void 0;w.splice(N,0,m),E&&E.splice(N,0,$),w.splice(N<=I?I+1:I,1),E&&E.splice(N<=I?I+1:I,1);continue}if(N<P&&w[N]===m&&(I>=P||w[I]!==g)){var K=E?E[N]:void 0;w.splice(I,0,g),E&&E.splice(I,0,K),w.splice(I<=N?N+1:N,1),E&&E.splice(I<=N?N+1:N,1)}}},u},{isClass:!0}),U0="matrix",lw=["typed","Matrix","DenseMatrix","SparseMatrix"],fw=Bt(U0,lw,t=>{var{typed:e,Matrix:r,DenseMatrix:i,SparseMatrix:u}=t;return e(U0,{"":function(){return a([])},string:function(l){return a([],l)},"string, string":function(l,d){return a([],l,d)},Array:function(l){return a(l)},Matrix:function(l){return a(l,l.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(o,l,d){if(l==="dense"||l==="default"||l===void 0)return new i(o,d);if(l==="sparse")return new u(o,d);throw new TypeError("Unknown matrix type "+JSON.stringify(l)+".")}}),j0="addScalar",cw=["typed"],hw=Bt(j0,cw,t=>{var{typed:e}=t;return e(j0,{"number, number":Wd,"Complex, Complex":function(i,u){return i.add(u)},"BigNumber, BigNumber":function(i,u){return i.plus(u)},"Fraction, Fraction":function(i,u){return i.add(u)},"Unit, Unit":e.referToSelf(r=>(i,u)=>{if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(u.value===null||u.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(u))throw new Error("Units do not match");var a=i.clone();return a.value=e.find(r,[a.valueType(),u.valueType()])(a.value,u.value),a.fixPrefix=!1,a})})}),dw="matAlgo11xS0s",pw=["typed","equalScalar"],vw=Bt(dw,pw,t=>{var{typed:e,equalScalar:r}=t;return function(u,a,o,l){var d=u._values,p=u._index,c=u._ptr,f=u._size,h=u._datatype;if(!d)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var D=f[0],b=f[1],g,m=r,y=0,E=o;typeof h=="string"&&(g=h,m=e.find(r,[g,g]),y=e.convert(0,g),a=e.convert(a,g),E=e.find(o,[g,g]));for(var w=[],B=[],F=[],O=0;O<b;O++){F[O]=B.length;for(var P=c[O],I=c[O+1],N=P;N<I;N++){var W=p[N],$=l?E(a,d[N]):E(d[N],a);m($,y)||(B.push(W),w.push($))}}return F[b]=B.length,u.createSparseMatrix({values:w,index:B,ptr:F,size:[D,b],datatype:g})}}),gw="matAlgo14xDs",mw=["typed"],Gd=Bt(gw,mw,t=>{var{typed:e}=t;return function(u,a,o,l){var d=u._data,p=u._size,c=u._datatype,f,h=o;typeof c=="string"&&(f=c,a=e.convert(a,f),h=e.find(o,[f,f]));var D=p.length>0?r(h,0,p,p[0],d,a,l):[];return u.createDenseMatrix({data:D,size:_r(p),datatype:f})};function r(i,u,a,o,l,d,p){var c=[];if(u===a.length-1)for(var f=0;f<o;f++)c[f]=p?i(d,l[f]):i(l[f],d);else for(var h=0;h<o;h++)c[h]=r(i,u+1,a,a[u+1],l[h],d,p);return c}}),Dw="matAlgo01xDSid",_w=["typed"],yw=Bt(Dw,_w,t=>{var{typed:e}=t;return function(i,u,a,o){var l=i._data,d=i._size,p=i._datatype,c=u._values,f=u._index,h=u._ptr,D=u._size,b=u._datatype;if(d.length!==D.length)throw new Ct(d.length,D.length);if(d[0]!==D[0]||d[1]!==D[1])throw new RangeError("Dimension mismatch. Matrix A ("+d+") must match Matrix B ("+D+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=d[0],m=d[1],y=typeof p=="string"&&p===b?p:void 0,E=y?e.find(a,[y,y]):a,w,B,F=[];for(w=0;w<g;w++)F[w]=[];var O=[],P=[];for(B=0;B<m;B++){for(var I=B+1,N=h[B],W=h[B+1],$=N;$<W;$++)w=f[$],O[w]=o?E(c[$],l[w][B]):E(l[w][B],c[$]),P[w]=I;for(w=0;w<g;w++)P[w]===I?F[w][B]=O[w]:F[w][B]=l[w][B]}return i.createDenseMatrix({data:F,size:[g,m],datatype:y})}}),bw="matAlgo04xSidSid",Aw=["typed","equalScalar"],ww=Bt(bw,Aw,t=>{var{typed:e,equalScalar:r}=t;return function(u,a,o){var l=u._values,d=u._index,p=u._ptr,c=u._size,f=u._datatype,h=a._values,D=a._index,b=a._ptr,g=a._size,m=a._datatype;if(c.length!==g.length)throw new Ct(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var y=c[0],E=c[1],w,B=r,F=0,O=o;typeof f=="string"&&f===m&&(w=f,B=e.find(r,[w,w]),F=e.convert(0,w),O=e.find(o,[w,w]));var P=l&&h?[]:void 0,I=[],N=[],W=l&&h?[]:void 0,$=l&&h?[]:void 0,K=[],q=[],G,L,z,te,le;for(L=0;L<E;L++){N[L]=I.length;var ve=L+1;for(te=p[L],le=p[L+1],z=te;z<le;z++)G=d[z],I.push(G),K[G]=ve,W&&(W[G]=l[z]);for(te=b[L],le=b[L+1],z=te;z<le;z++)if(G=D[z],K[G]===ve){if(W){var ye=O(W[G],h[z]);B(ye,F)?K[G]=null:W[G]=ye}}else I.push(G),q[G]=ve,$&&($[G]=h[z]);if(W&&$)for(z=N[L];z<I.length;)G=I[z],K[G]===ve?(P[z]=W[G],z++):q[G]===ve?(P[z]=$[G],z++):I.splice(z,1)}return N[E]=I.length,u.createSparseMatrix({values:P,index:I,ptr:N,size:[y,E],datatype:w})}}),Ew="matAlgo10xSids",Fw=["typed","DenseMatrix"],Cw=Bt(Ew,Fw,t=>{var{typed:e,DenseMatrix:r}=t;return function(u,a,o,l){var d=u._values,p=u._index,c=u._ptr,f=u._size,h=u._datatype;if(!d)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var D=f[0],b=f[1],g,m=o;typeof h=="string"&&(g=h,a=e.convert(a,g),m=e.find(o,[g,g]));for(var y=[],E=[],w=[],B=0;B<b;B++){for(var F=B+1,O=c[B],P=c[B+1],I=O;I<P;I++){var N=p[I];E[N]=d[I],w[N]=F}for(var W=0;W<D;W++)B===0&&(y[W]=[]),w[W]===F?y[W][B]=l?m(a,E[W]):m(E[W],a):y[W][B]=a}return new r({data:y,size:[D,b],datatype:g})}}),Sw="matAlgo13xDD",Bw=["typed"],Ow=Bt(Sw,Bw,t=>{var{typed:e}=t;return function(u,a,o){var l=u._data,d=u._size,p=u._datatype,c=a._data,f=a._size,h=a._datatype,D=[];if(d.length!==f.length)throw new Ct(d.length,f.length);for(var b=0;b<d.length;b++){if(d[b]!==f[b])throw new RangeError("Dimension mismatch. Matrix A ("+d+") must match Matrix B ("+f+")");D[b]=d[b]}var g,m=o;typeof p=="string"&&p===h&&(g=p,m=e.find(o,[g,g]));var y=D.length>0?r(m,0,D,D[0],l,c):[];return u.createDenseMatrix({data:y,size:D,datatype:g})};function r(i,u,a,o,l,d){var p=[];if(u===a.length-1)for(var c=0;c<o;c++)p[c]=i(l[c],d[c]);else for(var f=0;f<o;f++)p[f]=r(i,u+1,a,a[u+1],l[f],d[f]);return p}}),Mw="broadcast",Pw=["concat"],xw=Bt(Mw,Pw,t=>{var{concat:e}=t;return function(a,o){var l=Math.max(a._size.length,o._size.length);if(a._size.length===o._size.length&&a._size.every((m,y)=>m===o._size[y]))return[a,o];for(var d=r(a._size,l,0),p=r(o._size,l,0),c=[],f=0;f<l;f++)c[f]=Math.max(d[f],p[f]);for(var h=0;h<l;h++)u(d,c,h),u(p,c,h);var D=a.clone(),b=o.clone();D._size.length<l?D.reshape(r(D._size,l,1)):b._size.length<l&&b.reshape(r(b._size,l,1));for(var g=0;g<l;g++)D._size[g]<c[g]&&(D=i(D,c[g],g)),b._size[g]<c[g]&&(b=i(b,c[g],g));return[D,b]};function r(a,o,l){return[...Array(o-a.length).fill(l),...a]}function i(a,o,l){return e(...Array(o).fill(a),l)}function u(a,o,l){if(a[l]<o[l]&a[l]>1)throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(a,") not possible to broadcast dimension ").concat(l," with size ").concat(a[l]," to size ").concat(o[l]))}}),Iw="matrixAlgorithmSuite",Tw=["typed","matrix","concat"],Nw=Bt(Iw,Tw,t=>{var{typed:e,matrix:r,concat:i}=t,u=Ow({typed:e}),a=Gd({typed:e}),o=xw({concat:i});return function(d){var p=d.elop,c=d.SD||d.DS,f;p?(f={"DenseMatrix, DenseMatrix":(g,m)=>u(...o(g,m),p),"Array, Array":(g,m)=>u(...o(r(g),r(m)),p).valueOf(),"Array, DenseMatrix":(g,m)=>u(...o(r(g),m),p),"DenseMatrix, Array":(g,m)=>u(...o(g,r(m)),p)},d.SS&&(f["SparseMatrix, SparseMatrix"]=(g,m)=>d.SS(...o(g,m),p,!1)),d.DS&&(f["DenseMatrix, SparseMatrix"]=(g,m)=>d.DS(...o(g,m),p,!1),f["Array, SparseMatrix"]=(g,m)=>d.DS(...o(r(g),m),p,!1)),c&&(f["SparseMatrix, DenseMatrix"]=(g,m)=>c(...o(m,g),p,!0),f["SparseMatrix, Array"]=(g,m)=>c(...o(r(m),g),p,!0))):(f={"DenseMatrix, DenseMatrix":e.referToSelf(g=>(m,y)=>u(...o(m,y),g)),"Array, Array":e.referToSelf(g=>(m,y)=>u(...o(r(m),r(y)),g).valueOf()),"Array, DenseMatrix":e.referToSelf(g=>(m,y)=>u(...o(r(m),y),g)),"DenseMatrix, Array":e.referToSelf(g=>(m,y)=>u(...o(m,r(y)),g))},d.SS&&(f["SparseMatrix, SparseMatrix"]=e.referToSelf(g=>(m,y)=>d.SS(...o(m,y),g,!1))),d.DS&&(f["DenseMatrix, SparseMatrix"]=e.referToSelf(g=>(m,y)=>d.DS(...o(m,y),g,!1)),f["Array, SparseMatrix"]=e.referToSelf(g=>(m,y)=>d.DS(...o(r(m),y),g,!1))),c&&(f["SparseMatrix, DenseMatrix"]=e.referToSelf(g=>(m,y)=>c(...o(y,m),g,!0)),f["SparseMatrix, Array"]=e.referToSelf(g=>(m,y)=>c(...o(r(y),m),g,!0))));var h=d.scalar||"any",D=d.Ds||d.Ss;D&&(p?(f["DenseMatrix,"+h]=(g,m)=>a(g,m,p,!1),f[h+", DenseMatrix"]=(g,m)=>a(m,g,p,!0),f["Array,"+h]=(g,m)=>a(r(g),m,p,!1).valueOf(),f[h+", Array"]=(g,m)=>a(r(m),g,p,!0).valueOf()):(f["DenseMatrix,"+h]=e.referToSelf(g=>(m,y)=>a(m,y,g,!1)),f[h+", DenseMatrix"]=e.referToSelf(g=>(m,y)=>a(y,m,g,!0)),f["Array,"+h]=e.referToSelf(g=>(m,y)=>a(r(m),y,g,!1).valueOf()),f[h+", Array"]=e.referToSelf(g=>(m,y)=>a(r(y),m,g,!0).valueOf())));var b=d.sS!==void 0?d.sS:d.Ss;return p?(d.Ss&&(f["SparseMatrix,"+h]=(g,m)=>d.Ss(g,m,p,!1)),b&&(f[h+", SparseMatrix"]=(g,m)=>b(m,g,p,!0))):(d.Ss&&(f["SparseMatrix,"+h]=e.referToSelf(g=>(m,y)=>d.Ss(m,y,g,!1))),b&&(f[h+", SparseMatrix"]=e.referToSelf(g=>(m,y)=>b(y,m,g,!0)))),p&&p.signatures&&cb(f,p.signatures),f}}),kw="multiplyScalar",Rw=["typed"],Lw=Bt(kw,Rw,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":Hd,"Complex, Complex":function(i,u){return i.mul(u)},"BigNumber, BigNumber":function(i,u){return i.times(u)},"Fraction, Fraction":function(i,u){return i.mul(u)},"number | Fraction | BigNumber | Complex, Unit":(r,i)=>i.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,i)=>r.multiply(i)})}),V0="multiply",Uw=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],jw=Bt(V0,Uw,t=>{var{typed:e,matrix:r,addScalar:i,multiplyScalar:u,equalScalar:a,dot:o}=t,l=vw({typed:e,equalScalar:a}),d=Gd({typed:e});function p(F,O){switch(F.length){case 1:switch(O.length){case 1:if(F[0]!==O[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(F[0]!==O[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+F[0]+") must match Matrix rows ("+O[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+O.length+" dimensions)")}break;case 2:switch(O.length){case 1:if(F[1]!==O[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+F[1]+") must match Vector length ("+O[0]+")");break;case 2:if(F[1]!==O[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+F[1]+") must match Matrix B rows ("+O[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+O.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+F.length+" dimensions)")}}function c(F,O,P){if(P===0)throw new Error("Cannot multiply two empty vectors");return o(F,O)}function f(F,O){if(O.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return h(F,O)}function h(F,O){var P=F._data,I=F._size,N=F._datatype,W=O._data,$=O._size,K=O._datatype,q=I[0],G=$[1],L,z=i,te=u;N&&K&&N===K&&typeof N=="string"&&(L=N,z=e.find(i,[L,L]),te=e.find(u,[L,L]));for(var le=[],ve=0;ve<G;ve++){for(var ye=te(P[0],W[0][ve]),Se=1;Se<q;Se++)ye=z(ye,te(P[Se],W[Se][ve]));le[ve]=ye}return F.createDenseMatrix({data:le,size:[G],datatype:L})}var D=e("_multiplyMatrixVector",{"DenseMatrix, any":g,"SparseMatrix, any":E}),b=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":y,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":B});function g(F,O){var P=F._data,I=F._size,N=F._datatype,W=O._data,$=O._datatype,K=I[0],q=I[1],G,L=i,z=u;N&&$&&N===$&&typeof N=="string"&&(G=N,L=e.find(i,[G,G]),z=e.find(u,[G,G]));for(var te=[],le=0;le<K;le++){for(var ve=P[le],ye=z(ve[0],W[0]),Se=1;Se<q;Se++)ye=L(ye,z(ve[Se],W[Se]));te[le]=ye}return F.createDenseMatrix({data:te,size:[K],datatype:G})}function m(F,O){var P=F._data,I=F._size,N=F._datatype,W=O._data,$=O._size,K=O._datatype,q=I[0],G=I[1],L=$[1],z,te=i,le=u;N&&K&&N===K&&typeof N=="string"&&(z=N,te=e.find(i,[z,z]),le=e.find(u,[z,z]));for(var ve=[],ye=0;ye<q;ye++){var Se=P[ye];ve[ye]=[];for(var xe=0;xe<L;xe++){for(var Fe=le(Se[0],W[0][xe]),Ne=1;Ne<G;Ne++)Fe=te(Fe,le(Se[Ne],W[Ne][xe]));ve[ye][xe]=Fe}}return F.createDenseMatrix({data:ve,size:[q,L],datatype:z})}function y(F,O){var P=F._data,I=F._size,N=F._datatype,W=O._values,$=O._index,K=O._ptr,q=O._size,G=O._datatype;if(!W)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var L=I[0],z=q[1],te,le=i,ve=u,ye=a,Se=0;N&&G&&N===G&&typeof N=="string"&&(te=N,le=e.find(i,[te,te]),ve=e.find(u,[te,te]),ye=e.find(a,[te,te]),Se=e.convert(0,te));for(var xe=[],Fe=[],Ne=[],ke=O.createSparseMatrix({values:xe,index:Fe,ptr:Ne,size:[L,z],datatype:te}),Ue=0;Ue<z;Ue++){Ne[Ue]=Fe.length;var at=K[Ue],vt=K[Ue+1];if(vt>at)for(var Qe=0,it=0;it<L;it++){for(var gt=it+1,mt=void 0,rt=at;rt<vt;rt++){var Xe=$[rt];Qe!==gt?(mt=ve(P[it][Xe],W[rt]),Qe=gt):mt=le(mt,ve(P[it][Xe],W[rt]))}Qe===gt&&!ye(mt,Se)&&(Fe.push(it),xe.push(mt))}}return Ne[z]=Fe.length,ke}function E(F,O){var P=F._values,I=F._index,N=F._ptr,W=F._datatype;if(!P)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var $=O._data,K=O._datatype,q=F._size[0],G=O._size[0],L=[],z=[],te=[],le,ve=i,ye=u,Se=a,xe=0;W&&K&&W===K&&typeof W=="string"&&(le=W,ve=e.find(i,[le,le]),ye=e.find(u,[le,le]),Se=e.find(a,[le,le]),xe=e.convert(0,le));var Fe=[],Ne=[];te[0]=0;for(var ke=0;ke<G;ke++){var Ue=$[ke];if(!Se(Ue,xe))for(var at=N[ke],vt=N[ke+1],Qe=at;Qe<vt;Qe++){var it=I[Qe];Ne[it]?Fe[it]=ve(Fe[it],ye(Ue,P[Qe])):(Ne[it]=!0,z.push(it),Fe[it]=ye(Ue,P[Qe]))}}for(var gt=z.length,mt=0;mt<gt;mt++){var rt=z[mt];L[mt]=Fe[rt]}return te[1]=z.length,F.createSparseMatrix({values:L,index:z,ptr:te,size:[q,1],datatype:le})}function w(F,O){var P=F._values,I=F._index,N=F._ptr,W=F._datatype;if(!P)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var $=O._data,K=O._datatype,q=F._size[0],G=O._size[0],L=O._size[1],z,te=i,le=u,ve=a,ye=0;W&&K&&W===K&&typeof W=="string"&&(z=W,te=e.find(i,[z,z]),le=e.find(u,[z,z]),ve=e.find(a,[z,z]),ye=e.convert(0,z));for(var Se=[],xe=[],Fe=[],Ne=F.createSparseMatrix({values:Se,index:xe,ptr:Fe,size:[q,L],datatype:z}),ke=[],Ue=[],at=0;at<L;at++){Fe[at]=xe.length;for(var vt=at+1,Qe=0;Qe<G;Qe++){var it=$[Qe][at];if(!ve(it,ye))for(var gt=N[Qe],mt=N[Qe+1],rt=gt;rt<mt;rt++){var Xe=I[rt];Ue[Xe]!==vt?(Ue[Xe]=vt,xe.push(Xe),ke[Xe]=le(it,P[rt])):ke[Xe]=te(ke[Xe],le(it,P[rt]))}}for(var wt=Fe[at],br=xe.length,Ft=wt;Ft<br;Ft++){var Ae=xe[Ft];Se[Ft]=ke[Ae]}}return Fe[L]=xe.length,Ne}function B(F,O){var P=F._values,I=F._index,N=F._ptr,W=F._datatype,$=O._values,K=O._index,q=O._ptr,G=O._datatype,L=F._size[0],z=O._size[1],te=P&&$,le,ve=i,ye=u;W&&G&&W===G&&typeof W=="string"&&(le=W,ve=e.find(i,[le,le]),ye=e.find(u,[le,le]));for(var Se=te?[]:void 0,xe=[],Fe=[],Ne=F.createSparseMatrix({values:Se,index:xe,ptr:Fe,size:[L,z],datatype:le}),ke=te?[]:void 0,Ue=[],at,vt,Qe,it,gt,mt,rt,Xe,wt=0;wt<z;wt++){Fe[wt]=xe.length;var br=wt+1;for(gt=q[wt],mt=q[wt+1],it=gt;it<mt;it++)if(Xe=K[it],te)for(vt=N[Xe],Qe=N[Xe+1],at=vt;at<Qe;at++)rt=I[at],Ue[rt]!==br?(Ue[rt]=br,xe.push(rt),ke[rt]=ye($[it],P[at])):ke[rt]=ve(ke[rt],ye($[it],P[at]));else for(vt=N[Xe],Qe=N[Xe+1],at=vt;at<Qe;at++)rt=I[at],Ue[rt]!==br&&(Ue[rt]=br,xe.push(rt));if(te)for(var Ft=Fe[wt],Ae=xe.length,be=Ft;be<Ae;be++){var Dt=xe[be];Se[be]=ke[Dt]}}return Fe[z]=xe.length,Ne}return e(V0,u,{"Array, Array":e.referTo("Matrix, Matrix",F=>(O,P)=>{p(_i(O),_i(P));var I=F(r(O),r(P));return Rr(I)?I.valueOf():I}),"Matrix, Matrix":function(O,P){var I=O.size(),N=P.size();return p(I,N),I.length===1?N.length===1?c(O,P,I[0]):f(O,P):N.length===1?D(O,P):b(O,P)},"Matrix, Array":e.referTo("Matrix,Matrix",F=>(O,P)=>F(O,r(P))),"Array, Matrix":e.referToSelf(F=>(O,P)=>F(r(O,P.storage()),P)),"SparseMatrix, any":function(O,P){return l(O,P,u,!1)},"DenseMatrix, any":function(O,P){return d(O,P,u,!1)},"any, SparseMatrix":function(O,P){return l(P,O,u,!0)},"any, DenseMatrix":function(O,P){return d(P,O,u,!0)},"Array, any":function(O,P){return d(r(O),P,u,!1).valueOf()},"any, Array":function(O,P){return d(r(P),O,u,!0).valueOf()},"any, any":u,"any, any, ...any":e.referToSelf(F=>(O,P,I)=>{for(var N=F(O,P),W=0;W<I.length;W++)N=F(N,I[W]);return N})})}),q0="conj",Vw=["typed"],qw=Bt(q0,Vw,t=>{var{typed:e}=t;return e(q0,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":e.referToSelf(r=>i=>ef(i,r))})}),z0="concat",zw=["typed","matrix","isInteger"],Ww=Bt(z0,zw,t=>{var{typed:e,matrix:r,isInteger:i}=t;return e(z0,{"...Array | Matrix | number | BigNumber":function(a){var o,l=a.length,d=-1,p,c=!1,f=[];for(o=0;o<l;o++){var h=a[o];if(Rr(h)&&(c=!0),Xt(h)||dn(h)){if(o!==l-1)throw new Error("Dimension must be specified as last argument");if(p=d,d=h.valueOf(),!i(d))throw new TypeError("Integer number expected for dimension");if(d<0||o>0&&d>p)throw new Li(d,p+1)}else{var D=_r(h).valueOf(),b=_i(D);if(f[o]=D,p=d,d=b.length-1,o>0&&d!==p)throw new Ct(p+1,d+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var g=f.shift();f.length;)g=Kd(g,f.shift(),d,0);return c?r(g):g},"...string":function(a){return a.join("")}})});function Kd(t,e,r,i){if(i<r){if(t.length!==e.length)throw new Ct(t.length,e.length);for(var u=[],a=0;a<t.length;a++)u[a]=Kd(t[a],e[a],r,i+1);return u}else return t.concat(e)}function Hw(){throw new Error('No "matrix" implementation available')}var W0="size",Gw=["typed","config","?matrix"],Kw=Bt(W0,Gw,t=>{var{typed:e,config:r,matrix:i}=t;return e(W0,{Matrix:function(a){return a.create(a.size())},Array:_i,string:function(a){return r.matrix==="Array"?[a.length]:i([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return r.matrix==="Array"?[]:i?i([]):Hw()}})}),H0="add",Yw=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],$w=Bt(H0,Yw,t=>{var{typed:e,matrix:r,addScalar:i,equalScalar:u,DenseMatrix:a,SparseMatrix:o,concat:l}=t,d=yw({typed:e}),p=ww({typed:e,equalScalar:u}),c=Cw({typed:e,DenseMatrix:a}),f=Nw({typed:e,matrix:r,concat:l});return e(H0,{"any, any":i,"any, any, ...any":e.referToSelf(h=>(D,b,g)=>{for(var m=h(D,b),y=0;y<g.length;y++)m=h(m,g[y]);return m})},f({elop:i,DS:d,SS:p,Ss:c}))}),G0="dot",Zw=["typed","addScalar","multiplyScalar","conj","size"],Xw=Bt(G0,Zw,t=>{var{typed:e,addScalar:r,multiplyScalar:i,conj:u,size:a}=t;return e(G0,{"Array | DenseMatrix, Array | DenseMatrix":l,"SparseMatrix, SparseMatrix":d});function o(c,f){var h=p(c),D=p(f),b,g;if(h.length===1)b=h[0];else if(h.length===2&&h[1]===1)b=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(D.length===1)g=D[0];else if(D.length===2&&D[1]===1)g=D[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+D.join(", ")+")");if(b!==g)throw new RangeError("Vectors must have equal length ("+b+" != "+g+")");if(b===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return b}function l(c,f){var h=o(c,f),D=Rr(c)?c._data:c,b=Rr(c)?c._datatype:void 0,g=Rr(f)?f._data:f,m=Rr(f)?f._datatype:void 0,y=p(c).length===2,E=p(f).length===2,w=r,B=i;if(b&&m&&b===m&&typeof b=="string"){var F=b;w=e.find(r,[F,F]),B=e.find(i,[F,F])}if(!y&&!E){for(var O=B(u(D[0]),g[0]),P=1;P<h;P++)O=w(O,B(u(D[P]),g[P]));return O}if(!y&&E){for(var I=B(u(D[0]),g[0][0]),N=1;N<h;N++)I=w(I,B(u(D[N]),g[N][0]));return I}if(y&&!E){for(var W=B(u(D[0][0]),g[0]),$=1;$<h;$++)W=w(W,B(u(D[$][0]),g[$]));return W}if(y&&E){for(var K=B(u(D[0][0]),g[0][0]),q=1;q<h;q++)K=w(K,B(u(D[q][0]),g[q][0]));return K}}function d(c,f){o(c,f);for(var h=c._index,D=c._values,b=f._index,g=f._values,m=0,y=r,E=i,w=0,B=0;w<h.length&&B<b.length;){var F=h[w],O=b[B];if(F<O){w++;continue}if(F>O){B++;continue}F===O&&(m=y(m,E(D[w],g[B])),w++,B++)}return m}function p(c){return Rr(c)?c.size():a(c)}}),Jw=LA({config:_s}),Qw=qA({}),eE=GA({}),tf=$A({}),rf=JA({Matrix:tf}),gn=Vb({BigNumber:Jw,Complex:Qw,DenseMatrix:rf,Fraction:eE}),nf=hw({typed:gn}),tE=qw({typed:gn}),uf=uw({config:_s,typed:gn}),rE=ew({typed:gn}),Yd=Lw({typed:gn}),$d=ow({Matrix:tf,equalScalar:uf,typed:gn}),Fs=fw({DenseMatrix:rf,Matrix:tf,SparseMatrix:$d,typed:gn}),nE=Kw({matrix:Fs,config:_s,typed:gn}),iE=Ww({isInteger:rE,matrix:Fs,typed:gn}),Zu=$w({DenseMatrix:rf,SparseMatrix:$d,addScalar:nf,concat:iE,equalScalar:uf,matrix:Fs,typed:gn}),uE=Xw({addScalar:nf,conj:tE,multiplyScalar:Yd,size:nE,typed:gn}),kl=jw({addScalar:nf,dot:uE,equalScalar:uf,matrix:Fs,multiplyScalar:Yd,typed:gn});const Va="activePromptStore";function Dr(t,e,r,i=1){return{id:t,text:e,barWeight:i,parsedWeight:r}}function K0(){return{0:Dr(0,"Magic potion in a mystical bottle",1),1:Dr(1,"A crystalline decanter",1),2:Dr(2,"An ornate tequila bottle",1),3:Dr(3,"An antique sake bottle",1),4:Dr(4,"A colorful perfume bottle",1),5:Dr(5,"A glass vase full of vibrant flowers",1),6:Dr(6,"A minimalist glass tea kettle",1),7:Dr(7,"Chihuly glass art",1),8:Dr(8,"A fine wine bottle",1),9:Dr(9,"A gourmet vinegar bottle",1),10:Dr(10,"A stunning fishbowl",1),11:Dr(11,"A striking piece of tourmaline",1),12:Dr(12,"A finely cut piece of sapphire",1),13:Dr(13,"Iittala glass art",1)}}function du(t,e="circle"){return{weightedPrompts:t||{},weightMode:e,pieAngles:{},circleAngles:{},circleMarker:[270,.33],circleWeightScaling:2,circleExponentialScaling:!0,embedExponentialScaling:2,embedWeightScaling:!0,embedPromptLimit:Object.keys(t).length}}function aE(){const t=On({}),{subscribe:e,set:r,update:i}=t,u=typeof window<"u";return r(u&&localStorage[Va]?JSON.parse(localStorage[Va]):du(K0())),{subscribe:e,updateActivePrompt:a=>{!a||!u||(localStorage[Va]=JSON.stringify(a),r(a))},getActivePrompt:()=>Lt(t),deleteActivePrompt:()=>{u&&(delete localStorage[Va],r(du(K0())))}}}const Pt=aE(),mn=Bn(Pt,t=>Lt(Pt));function sE(t){let e,r,i;return{c(){e=bt("circle"),this.h()},l(u){e=At(u,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),re(e).forEach(V),this.h()},h(){T(e,"cx",r=t[0][0]),T(e,"cy",i=t[0][1]),T(e,"r",t[1]),T(e,"stroke",t[3]),T(e,"stroke-width",t[2]),Zt(e,"fill","rgba(0,0,0,0)")},m(u,a){_e(u,e,a)},p(u,[a]){a&1&&r!==(r=u[0][0])&&T(e,"cx",r),a&1&&i!==(i=u[0][1])&&T(e,"cy",i),a&2&&T(e,"r",u[1]),a&8&&T(e,"stroke",u[3]),a&4&&T(e,"stroke-width",u[2])},i:Pe,o:Pe,d(u){u&&V(e)}}}function oE(t,e,r){let{xy:i=[500,500]}=e,{radius:u=400}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=l=>{"xy"in l&&r(0,i=l.xy),"radius"in l&&r(1,u=l.radius),"stroke"in l&&r(2,a=l.stroke),"color"in l&&r(3,o=l.color)},[i,u,a,o]}class Zd extends It{constructor(e){super(),Tt(this,e,oE,sE,Nt,{xy:0,radius:1,stroke:2,color:3})}}function lE(t){let e,r,i,u,a;return{c(){e=bt("circle"),this.h()},l(o){e=At(o,"circle",{cx:!0,cy:!0,r:!0}),re(e).forEach(V),this.h()},h(){T(e,"cx",r=t[0][0]),T(e,"cy",i=t[0][1]),T(e,"r",t[1]),Zt(e,"fill",t[2])},m(o,l){_e(o,e,l),u||(a=[Le(e,"mouseover",t[3]),Le(e,"mouseout",t[4]),Le(e,"mousedown",t[5])],u=!0)},p(o,[l]){l&1&&r!==(r=o[0][0])&&T(e,"cx",r),l&1&&i!==(i=o[0][1])&&T(e,"cy",i),l&2&&T(e,"r",o[1]),l&4&&Zt(e,"fill",o[2])},i:Pe,o:Pe,d(o){o&&V(e),u=!1,Wr(a)}}}function fE(t,e,r){let{xy:i=[100,100]}=e,{radius:u=5}=e,{color:a="black"}=e,{hoverColor:o="white"}=e,{handleMouseDown:l=h=>{}}=e,d=a;function p(){r(2,d=o)}function c(){r(2,d=a)}function f(h){l(h)}return t.$$set=h=>{"xy"in h&&r(0,i=h.xy),"radius"in h&&r(1,u=h.radius),"color"in h&&r(6,a=h.color),"hoverColor"in h&&r(7,o=h.hoverColor),"handleMouseDown"in h&&r(8,l=h.handleMouseDown)},[i,u,d,p,c,f,a,o,l]}class Ju extends It{constructor(e){super(),Tt(this,e,fE,lE,Nt,{xy:0,radius:1,color:6,hoverColor:7,handleMouseDown:8})}}function cE(t){let e,r,i,u,a;return{c(){e=bt("line"),this.h()},l(o){e=At(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-dasharray":!0,"stroke-width":!0}),re(e).forEach(V),this.h()},h(){T(e,"x1",r=t[0][0]),T(e,"y1",i=t[0][1]),T(e,"x2",u=t[1][0]),T(e,"y2",a=t[1][1]),T(e,"stroke",t[3]),T(e,"stroke-dasharray","10,10"),T(e,"stroke-width",t[2])},m(o,l){_e(o,e,l)},p(o,[l]){l&1&&r!==(r=o[0][0])&&T(e,"x1",r),l&1&&i!==(i=o[0][1])&&T(e,"y1",i),l&2&&u!==(u=o[1][0])&&T(e,"x2",u),l&2&&a!==(a=o[1][1])&&T(e,"y2",a),l&8&&T(e,"stroke",o[3]),l&4&&T(e,"stroke-width",o[2])},i:Pe,o:Pe,d(o){o&&V(e)}}}function hE(t,e,r){let{p1:i=[100,100]}=e,{p2:u=[100,100]}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=l=>{"p1"in l&&r(0,i=l.p1),"p2"in l&&r(1,u=l.p2),"stroke"in l&&r(2,a=l.stroke),"color"in l&&r(3,o=l.color)},[i,u,a,o]}class Xd extends It{constructor(e){super(),Tt(this,e,hE,cE,Nt,{p1:0,p2:1,stroke:2,color:3})}}function dE(t){let e,r,i,u,a,o,l,d;return{c(){e=bt("foreignObject"),r=ae("div"),i=ae("p"),u=Ye(t[2]),this.h()},l(p){e=At(p,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var c=re(e);r=se(c,"DIV",{class:!0});var f=re(r);i=se(f,"P",{});var h=re(i);u=$e(h,t[2]),h.forEach(V),f.forEach(V),c.forEach(V),this.h()},h(){Zt(i,"color",t[3]),Zt(i,"user-select","none"),Zt(i,"margin","0"),Zt(i,"pointer-events","none"),Zt(i,"text-align",t[4]),Zt(i,"font-size",`${t[5]}px`),Zt(i,"font-family","sans-serif"),Zt(i,"font-style","italic"),T(r,"class","h-full flex flex-col justify-center"),T(e,"x",a=t[0][0]),T(e,"y",o=t[0][1]),T(e,"width",l=t[1][0]),T(e,"height",d=t[1][1])},m(p,c){_e(p,e,c),J(e,r),J(r,i),J(i,u)},p(p,[c]){c&4&&Sn(u,p[2]),c&8&&Zt(i,"color",p[3]),c&16&&Zt(i,"text-align",p[4]),c&32&&Zt(i,"font-size",`${p[5]}px`),c&1&&a!==(a=p[0][0])&&T(e,"x",a),c&1&&o!==(o=p[0][1])&&T(e,"y",o),c&2&&l!==(l=p[1][0])&&T(e,"width",l),c&2&&d!==(d=p[1][1])&&T(e,"height",d)},i:Pe,o:Pe,d(p){p&&V(e)}}}function pE(t,e,r){let{xy:i=[100,100]}=e,{wh:u=[100,100]}=e,{text:a=""}=e,{color:o="rgba(96,117,151, 1)"}=e,{textAlign:l="center"}=e,{fontSize:d=12}=e;return t.$$set=p=>{"xy"in p&&r(0,i=p.xy),"wh"in p&&r(1,u=p.wh),"text"in p&&r(2,a=p.text),"color"in p&&r(3,o=p.color),"textAlign"in p&&r(4,l=p.textAlign),"fontSize"in p&&r(5,d=p.fontSize)},[i,u,a,o,l,d]}class Cs extends It{constructor(e){super(),Tt(this,e,pE,dE,Nt,{xy:0,wh:1,text:2,color:3,textAlign:4,fontSize:5})}}function vE(t){let e,r,i,u,a,o,l,d,p,c,f;return{c(){e=bt("circle"),u=Ge(),a=bt("foreignObject"),o=ae("p"),l=Ye(t[4]),this.h()},l(h){e=At(h,"circle",{cx:!0,cy:!0,r:!0}),re(e).forEach(V),u=Ke(h),a=At(h,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var D=re(a);o=se(D,"P",{style:!0,class:!0});var b=re(o);l=$e(b,t[4]),b.forEach(V),D.forEach(V),this.h()},h(){T(e,"cx",r=t[0][0]),T(e,"cy",i=t[0][1]),T(e,"r",t[1]),Zt(e,"fill",t[3]),Zt(o,"color",t[2]),Zt(o,"user-select","none"),Zt(o,"margin","0"),T(o,"class","heavy svelte-6if1p2"),T(a,"x",d=t[0][0]-t[1]),T(a,"y",p=t[0][1]-t[1]),T(a,"width",c=t[1]*2),T(a,"height",f=t[1]*2)},m(h,D){_e(h,e,D),_e(h,u,D),_e(h,a,D),J(a,o),J(o,l)},p(h,[D]){D&1&&r!==(r=h[0][0])&&T(e,"cx",r),D&1&&i!==(i=h[0][1])&&T(e,"cy",i),D&2&&T(e,"r",h[1]),D&8&&Zt(e,"fill",h[3]),D&16&&Sn(l,h[4]),D&4&&Zt(o,"color",h[2]),D&3&&d!==(d=h[0][0]-h[1])&&T(a,"x",d),D&3&&p!==(p=h[0][1]-h[1])&&T(a,"y",p),D&2&&c!==(c=h[1]*2)&&T(a,"width",c),D&2&&f!==(f=h[1]*2)&&T(a,"height",f)},i:Pe,o:Pe,d(h){h&&V(e),h&&V(u),h&&V(a)}}}function gE(t,e,r){let{xy:i=[100,100]}=e,{radius:u=25}=e,{textColor:a="rgba(96,117,151, 1)"}=e,{bgColor:o="black"}=e,{weight:l=""}=e;return t.$$set=d=>{"xy"in d&&r(0,i=d.xy),"radius"in d&&r(1,u=d.radius),"textColor"in d&&r(2,a=d.textColor),"bgColor"in d&&r(3,o=d.bgColor),"weight"in d&&r(4,l=d.weight)},[i,u,a,o,l]}class mE extends It{constructor(e){super(),Tt(this,e,gE,vE,Nt,{xy:0,radius:1,textColor:2,bgColor:3,weight:4})}}function su(t,e,r){const i=t[0]-e[0],u=t[1]-e[1],a=360+Math.atan2(u,i)*180/Math.PI,o=Math.sqrt(i*i+u*u);return[a%360,o/r]}function Ln(t,e,r){const i=e[0]%360*Math.PI/180,u=[r*e[1]*Math.cos(i),r*e[1]*Math.sin(i)];return Zu(t,u)}function Rl(t,e,r){const i=t[0]-e[0],u=t[1]-e[1],a=Math.sqrt(i*i+u*u),o=r/a,l=e[0]+i*o,d=e[1]+u*o;return[l,d]}function DE(t,e,r){const i=t[0]-e[0],u=t[1]-e[1];return Math.sqrt(i*i+u*u)<r}function Jd(t,e){const r=e%360*Math.PI/180;let i,u;const a=Math.cos(r),o=Math.sin(r);return i=(t[0]+5)*-1.2*a,u=(t[1]+5)*-1.2*o,i-=t[0],u-=t[1],[i,u]}function _E(t){return Math.round(t*100)}function Pr(t){return Math.max(1-Math.pow(1-t,2),.25).toFixed(2)}function ri(t,e){let r="parsedWeight";switch(e){case"circle":r="circleWeight";break;case"bars":r="barWeight";break;case"embed":r="embedWeight";break;case"pie":r="pieWeight";break}const i=t[r];return _E(i||0)}function yE(t,e,r){const a=r*.6,o=Math.floor(t/a);return Math.ceil(e/o)*r*1.2}function Qr(t,e,r){const i=yE(t,e,r)+10;return[t,i]}function Ll(t,e){const r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function Ss(t){return kl(t,.5)}function Ri(t){const e=t.currentTarget;var r=e.createSVGPoint();r.x=t.clientX,r.y=t.clientY;const i=r.matrixTransform(e.getScreenCTM().inverse());return[i.x,i.y]}function Y0(t,e,r){const i=t.slice();return i[18]=e[r][0],i[19]=e[r][1],i}function $0(t){let e,r,i=Object.entries(t[5].weightedPrompts).length>0,u,a;e=new Zd({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),l=[];for(let c=0;c<o.length;c+=1)l[c]=Z0(Y0(t,o,c));const d=c=>Te(l[c],1,1,()=>{l[c]=null});let p=i&&X0(t);return{c(){ot(e.$$.fragment);for(let c=0;c<l.length;c+=1)l[c].c();r=zt(),p&&p.c(),u=zt()},l(c){lt(e.$$.fragment,c);for(let f=0;f<l.length;f+=1)l[f].l(c);r=zt(),p&&p.l(c),u=zt()},m(c,f){ft(e,c,f);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(c,f);_e(c,r,f),p&&p.m(c,f),_e(c,u,f),a=!0},p(c,f){const h={};if(f&1&&(h.xy=c[0]),f&2&&(h.radius=c[1]),e.$set(h),f&895){o=Object.entries(c[5].weightedPrompts);let D;for(D=0;D<o.length;D+=1){const b=Y0(c,o,D);l[D]?(l[D].p(b,f),Me(l[D],1)):(l[D]=Z0(b),l[D].c(),Me(l[D],1),l[D].m(r.parentNode,r))}for(pn(),D=o.length;D<l.length;D+=1)d(D);vn()}f&32&&(i=Object.entries(c[5].weightedPrompts).length>0),i?p?(p.p(c,f),f&32&&Me(p,1)):(p=X0(c),p.c(),Me(p,1),p.m(u.parentNode,u)):p&&(pn(),Te(p,1,1,()=>{p=null}),vn())},i(c){if(!a){Me(e.$$.fragment,c);for(let f=0;f<o.length;f+=1)Me(l[f]);Me(p),a=!0}},o(c){Te(e.$$.fragment,c),l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)Te(l[f]);Te(p),a=!1},d(c){ct(e,c),$l(l,c),c&&V(r),p&&p.d(c),c&&V(u)}}}function Z0(t){let e,r,i,u,a;e=new Xd({props:{p1:Ln(t[0],t[5].circleMarker,t[1]),p2:t[6][t[18]].xy}});function o(){return t[12](t[18])}return r=new Ju({props:{xy:t[6][t[18]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:o}}),i=new Cs({props:{xy:t[9](t[6][t[18]].xy,Qr(t[3],t[19].text.length,t[4])),color:`rgba(255,255,255,${Pr(t[6][t[18]].unitWeight)}`,wh:Qr(t[3],t[19].text.length,t[4]),fontSize:t[4],text:t[19].text}}),u=new mE({props:{xy:kl(Zu(Ln(t[0],t[5].circleMarker,t[1]),t[6][t[18]].xy),.5),weight:ri(t[5].weightedPrompts[t[18]],t[5].weightMode),radius:15,textColor:`rgba(255,255,255,${Pr(t[6][t[18]].unitWeight)}`,bgColor:"rgb(8, 11, 22)"}}),{c(){ot(e.$$.fragment),ot(r.$$.fragment),ot(i.$$.fragment),ot(u.$$.fragment)},l(l){lt(e.$$.fragment,l),lt(r.$$.fragment,l),lt(i.$$.fragment,l),lt(u.$$.fragment,l)},m(l,d){ft(e,l,d),ft(r,l,d),ft(i,l,d),ft(u,l,d),a=!0},p(l,d){t=l;const p={};d&35&&(p.p1=Ln(t[0],t[5].circleMarker,t[1])),d&96&&(p.p2=t[6][t[18]].xy),e.$set(p);const c={};d&96&&(c.xy=t[6][t[18]].xy),d&4&&(c.radius=t[2]),d&32&&(c.handleMouseDown=o),r.$set(c);const f={};d&120&&(f.xy=t[9](t[6][t[18]].xy,Qr(t[3],t[19].text.length,t[4]))),d&96&&(f.color=`rgba(255,255,255,${Pr(t[6][t[18]].unitWeight)}`),d&56&&(f.wh=Qr(t[3],t[19].text.length,t[4])),d&16&&(f.fontSize=t[4]),d&32&&(f.text=t[19].text),i.$set(f);const h={};d&99&&(h.xy=kl(Zu(Ln(t[0],t[5].circleMarker,t[1]),t[6][t[18]].xy),.5)),d&32&&(h.weight=ri(t[5].weightedPrompts[t[18]],t[5].weightMode)),d&96&&(h.textColor=`rgba(255,255,255,${Pr(t[6][t[18]].unitWeight)}`),u.$set(h)},i(l){a||(Me(e.$$.fragment,l),Me(r.$$.fragment,l),Me(i.$$.fragment,l),Me(u.$$.fragment,l),a=!0)},o(l){Te(e.$$.fragment,l),Te(r.$$.fragment,l),Te(i.$$.fragment,l),Te(u.$$.fragment,l),a=!1},d(l){ct(e,l),ct(r,l),ct(i,l),ct(u,l)}}}function X0(t){let e,r;return e=new Ju({props:{xy:Ln(t[0],t[5].circleMarker,t[1]),radius:10,color:"rgba(136,157,191, 1)",handleMouseDown:t[13]}}),{c(){ot(e.$$.fragment)},l(i){lt(e.$$.fragment,i)},m(i,u){ft(e,i,u),r=!0},p(i,u){const a={};u&35&&(a.xy=Ln(i[0],i[5].circleMarker,i[1])),e.$set(a)},i(i){r||(Me(e.$$.fragment,i),r=!0)},o(i){Te(e.$$.fragment,i),r=!1},d(i){ct(e,i)}}}function bE(t){let e,r,i,u,a=t[6]&&t[5].weightedPrompts&&$0(t);return{c(){e=bt("svg"),a&&a.c(),this.h()},l(o){e=At(o,"svg",{id:!0,class:!0});var l=re(e);a&&a.l(l),l.forEach(V),this.h()},h(){T(e,"id","svg"),T(e,"class","w-full h-full")},m(o,l){_e(o,e,l),a&&a.m(e,null),r=!0,i||(u=[Le(e,"mousemove",t[10]),Le(e,"mouseup",t[7]),Le(e,"dblclick",t[11])],i=!0)},p(o,[l]){o[6]&&o[5].weightedPrompts?a?(a.p(o,l),l&96&&Me(a,1)):(a=$0(o),a.c(),Me(a,1),a.m(e,null)):a&&(pn(),Te(a,1,1,()=>{a=null}),vn())},i(o){r||(Me(a),r=!0)},o(o){Te(a),r=!1},d(o){o&&V(e),a&&a.d(),i=!1,Wr(u)}}}function J0(t,e){return t?Object.entries(t).reduce((r,[i,u],a)=>{const o=r[i]||a*(360/Object.keys(t).length)-90;return r[i]=o,r},e):null}function AE(t,e,r){let i,u;Mt(t,mn,F=>r(5,u=F));let{center:a=[450,450]}=e,{radius:o=250}=e,{pointRadius:l=10}=e,{textWidth:d=150}=e,{fontSize:p=13}=e,c=[0,0],f=null;function h(F){f=null}function D(F){f=F}function b(F,O){let P=su(F,a,o)[0]-180;P<0&&(P+=360);const I=Jd(Ss(O),P);return Zu(F,I)}function g(F){const O=DE(F,a,o)?su(F,a,o):su(Rl(F,a,o),a,o);r(6,i=E(u.weightedPrompts,a,o,u.circleWeightScaling,u.circleExponentialScaling,O,u.circleAngles))}function m(F){if(c=Ri(F),f==="main")g(c);else if(f){const O={...u.weightedPrompts[f]},P=Rl(c,a,o),I=su(P,a,o)[0],N={...u.circleAngles};N[O.id]=I;const W={...u.weightedPrompts};W[f]=O,r(6,i=E(W,a,o,u.circleWeightScaling,u.circleExponentialScaling,u.circleMarker,N))}}function y(F){c=Ri(F),g(c)}function E(F,O,P,I,N,W,$){if(!F||!O||!P||!I||!W)return null;let K=Object.entries(F).reduce((L,[z,te])=>(L[z]={xy:Ln(O,[$[z],1],P)},L),{});K=Object.entries(K).reduce((L,[z,te])=>(L[z]={...L[z],distance:Ll(te.xy,Ln(O,W,P))},L),K);const q=Object.values(K).reduce((L,z)=>L+z.distance,0);K=Object.entries(K).reduce((L,[z,te])=>(L[z]={...L[z],unitDistance:Math.round(te.distance/q*100)/100},L),K),K=Object.entries(K).reduce((L,[z,te])=>(L[z]={...L[z],invertedUnitDistance:Math.round((1-te.unitDistance)*100)/100},L),K),K=Object.entries(K).reduce((L,[z,te])=>(N?L[z]={...L[z],unitWeight:Math.round(Math.pow(1-te.distance/(2*P),I)*100)/100}:L[z]={...L[z],unitWeight:Math.round((1-te.distance/(2*P))*100)/100},L),K);const G={...F};return Object.entries(K).forEach(([L,z])=>{G[L].circleWeight=z.unitWeight}),Pt.updateActivePrompt({...u,circleMarker:W,weightedPrompts:G,circleAngles:$}),K}const w=F=>D(F),B=()=>D("main");return t.$$set=F=>{"center"in F&&r(0,a=F.center),"radius"in F&&r(1,o=F.radius),"pointRadius"in F&&r(2,l=F.pointRadius),"textWidth"in F&&r(3,d=F.textWidth),"fontSize"in F&&r(4,p=F.fontSize)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(u.circleAngles).length!==Object.keys(u.weightedPrompts).length&&Pt.updateActivePrompt({...u,circleAngles:J0(u.weightedPrompts,{})}),t.$$.dirty&35&&r(6,i=E(u.weightedPrompts,a,o,u.circleWeightScaling,u.circleExponentialScaling,u.circleMarker,u.circleAngles||J0(u.weightedPrompts,{})))},[a,o,l,d,p,u,i,h,D,b,m,y,w,B]}class wE extends It{constructor(e){super(),Tt(this,e,AE,bE,Nt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function Q0(t){let e,r,i,u,a,o,l,d;return{c(){e=ae("div"),r=ae("label"),i=ae("span"),u=Ye("Scaling Power"),a=Ge(),o=ae("input"),this.h()},l(p){e=se(p,"DIV",{class:!0});var c=re(e);r=se(c,"LABEL",{class:!0});var f=re(r);i=se(f,"SPAN",{class:!0});var h=re(i);u=$e(h,"Scaling Power"),h.forEach(V),f.forEach(V),a=Ke(c),o=se(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(V),this.h()},h(){T(i,"class","label-text"),T(r,"class","label"),T(o,"type","range"),T(o,"min","0.5"),T(o,"max","3"),T(o,"step","0.1"),T(o,"class","range"),T(e,"class","w-full px-2")},m(p,c){_e(p,e,c),J(e,r),J(r,i),J(i,u),J(e,a),J(e,o),mi(o,t[0]),l||(d=[Le(o,"change",t[6]),Le(o,"input",t[6])],l=!0)},p(p,c){c&1&&mi(o,p[0])},d(p){p&&V(e),l=!1,Wr(d)}}}function EE(t){let e,r,i,u,a,o,l,d,p,c,f,h,D,b,g;r=new wE({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let m=t[1]&&Q0(t);return{c(){e=ae("div"),ot(r.$$.fragment),u=Ge(),a=ae("div"),o=ae("div"),l=ae("label"),d=ae("span"),p=Ye("Exponential Scaling"),c=Ge(),f=ae("input"),h=Ge(),m&&m.c(),this.h()},l(y){e=se(y,"DIV",{class:!0});var E=re(e);lt(r.$$.fragment,E),E.forEach(V),u=Ke(y),a=se(y,"DIV",{class:!0});var w=re(a);o=se(w,"DIV",{class:!0});var B=re(o);l=se(B,"LABEL",{class:!0});var F=re(l);d=se(F,"SPAN",{class:!0});var O=re(d);p=$e(O,"Exponential Scaling"),O.forEach(V),F.forEach(V),c=Ke(B),f=se(B,"INPUT",{type:!0,class:!0}),B.forEach(V),h=Ke(w),m&&m.l(w),w.forEach(V),this.h()},h(){T(e,"class","w-full h-full"),gs(()=>t[4].call(e)),T(d,"class","label-text"),T(l,"class","label"),T(f,"type","checkbox"),T(f,"class","toggle"),T(o,"class","w-52 px-2"),T(a,"class","px-2 py-4 pb-0 flex")},m(y,E){_e(y,e,E),ft(r,e,null),i=ms(e,t[4].bind(e)),_e(y,u,E),_e(y,a,E),J(a,o),J(o,l),J(l,d),J(d,p),J(o,c),J(o,f),f.checked=t[1],J(a,h),m&&m.m(a,null),D=!0,b||(g=Le(f,"change",t[5]),b=!0)},p(y,[E]){const w={};E&12&&(w.center=[Math.round(y[2]/2),Math.round(y[3]/2)]),E&12&&(w.radius=Math.round(Math.min(y[2],y[3])/2)-150),r.$set(w),E&2&&(f.checked=y[1]),y[1]?m?m.p(y,E):(m=Q0(y),m.c(),m.m(a,null)):m&&(m.d(1),m=null)},i(y){D||(Me(r.$$.fragment,y),D=!0)},o(y){Te(r.$$.fragment,y),D=!1},d(y){y&&V(e),ct(r),i(),y&&V(u),y&&V(a),m&&m.d(),b=!1,g()}}}function FE(t,e,r){let i;Mt(t,mn,f=>r(7,i=f));let u,a,o=i.circleWeightScaling||2,l=yd(i.circleExponentialScaling)?!0:i.circleExponentialScaling;function d(){u=this.clientWidth,a=this.clientHeight,r(2,u),r(3,a)}function p(){l=this.checked,r(1,l)}function c(){o=xy(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&Pt.updateActivePrompt({...Pt.getActivePrompt(),circleExponentialScaling:l,circleWeightScaling:o})},[o,l,u,a,d,p,c]}class CE extends It{constructor(e){super(),Tt(this,e,FE,EE,Nt,{})}}function SE(t){let e,r,i,u,a,o,l;return{c(){e=bt("rect"),this.h()},l(d){e=At(d,"rect",{x:!0,y:!0,width:!0,height:!0}),re(e).forEach(V),this.h()},h(){T(e,"x",r=t[0][0]),T(e,"y",i=t[0][1]),T(e,"width",u=Math.max(t[1][0],0)),T(e,"height",a=Math.max(t[1][1],0)),Zt(e,"fill",t[2])},m(d,p){_e(d,e,p),o||(l=[Le(e,"mouseover",function(){Wo(t[4])&&t[4].apply(this,arguments)}),Le(e,"mouseout",function(){Wo(t[5])&&t[5].apply(this,arguments)}),Le(e,"mousedown",function(){Wo(t[3])&&t[3].apply(this,arguments)})],o=!0)},p(d,[p]){t=d,p&1&&r!==(r=t[0][0])&&T(e,"x",r),p&1&&i!==(i=t[0][1])&&T(e,"y",i),p&2&&u!==(u=Math.max(t[1][0],0))&&T(e,"width",u),p&2&&a!==(a=Math.max(t[1][1],0))&&T(e,"height",a),p&4&&Zt(e,"fill",t[2])},i:Pe,o:Pe,d(d){d&&V(e),o=!1,Wr(l)}}}function BE(t,e,r){let{xy:i=[500,500]}=e,{wh:u=[100,100]}=e,{color:a="rgba(46,67,101, 0.4)"}=e,{handleMouseDown:o=p=>{}}=e,{handleMouseOver:l=p=>{}}=e,{handleMouseOut:d=p=>{}}=e;return t.$$set=p=>{"xy"in p&&r(0,i=p.xy),"wh"in p&&r(1,u=p.wh),"color"in p&&r(2,a=p.color),"handleMouseDown"in p&&r(3,o=p.handleMouseDown),"handleMouseOver"in p&&r(4,l=p.handleMouseOver),"handleMouseOut"in p&&r(5,d=p.handleMouseOut)},[i,u,a,o,l,d]}class $o extends It{constructor(e){super(),Tt(this,e,BE,SE,Nt,{xy:0,wh:1,color:2,handleMouseDown:3,handleMouseOver:4,handleMouseOut:5})}}function eh(t,e,r){const i=t.slice();return i[51]=e[r][0],i[52]=e[r][1],i[53]=e[r][2],i}function th(t,e){let r,i,u,a,o,l;i=new Cs({props:{xy:[e[3][0]+e[0],e[3][1]+e[52]*e[4]+e[52]],color:`rgba(255,255,255,${Pr(e[53].barWeight/e[12]||0)})`,wh:e[5][e[51]],text:e[53].text,textAlign:"right",fontSize:e[1]}});function d(...g){return e[39](e[51],...g)}function p(...g){return e[40](e[51],...g)}u=new $o({props:{color:e[13](0),handleMouseOver:d,handleMouseOut:p,xy:[e[10],e[3][1]+e[52]*e[4]+e[52]],wh:[e[11],e[4]-2]}});function c(...g){return e[41](e[51],...g)}function f(...g){return e[42](e[51],...g)}a=new $o({props:{color:e[8]===e[51]||e[7]===e[51]||e[9]===e[51]?e[13](Pr((e[53].barWeight||0)/e[12]+.15)):e[13](Pr(e[53].barWeight||0)),handleMouseOver:c,handleMouseOut:f,xy:[e[10],e[3][1]+e[52]*e[4]+e[52]],wh:[(e[53].barWeight||0)*e[11],e[4]-2]}});function h(...g){return e[43](e[51],...g)}function D(...g){return e[44](e[51],...g)}function b(...g){return e[45](e[51],...g)}return o=new $o({props:{color:e[9]===e[51]?e[15]:e[14],handleMouseOver:h,handleMouseOut:D,handleMouseDown:b,xy:[e[10]+(e[53].barWeight||0)*e[11],e[3][1]+e[52]*e[4]+e[52]],wh:[e[2],e[4]-2]}}),{key:t,first:null,c(){r=zt(),ot(i.$$.fragment),ot(u.$$.fragment),ot(a.$$.fragment),ot(o.$$.fragment),this.h()},l(g){r=zt(),lt(i.$$.fragment,g),lt(u.$$.fragment,g),lt(a.$$.fragment,g),lt(o.$$.fragment,g),this.h()},h(){this.first=r},m(g,m){_e(g,r,m),ft(i,g,m),ft(u,g,m),ft(a,g,m),ft(o,g,m),l=!0},p(g,m){e=g;const y={};m[0]&89&&(y.xy=[e[3][0]+e[0],e[3][1]+e[52]*e[4]+e[52]]),m[0]&4160&&(y.color=`rgba(255,255,255,${Pr(e[53].barWeight/e[12]||0)})`),m[0]&96&&(y.wh=e[5][e[51]]),m[0]&64&&(y.text=e[53].text),m[0]&2&&(y.fontSize=e[1]),i.$set(y);const E={};m[0]&64&&(E.handleMouseOver=d),m[0]&64&&(E.handleMouseOut=p),m[0]&1112&&(E.xy=[e[10],e[3][1]+e[52]*e[4]+e[52]]),m[0]&2064&&(E.wh=[e[11],e[4]-2]),u.$set(E);const w={};m[0]&5056&&(w.color=e[8]===e[51]||e[7]===e[51]||e[9]===e[51]?e[13](Pr((e[53].barWeight||0)/e[12]+.15)):e[13](Pr(e[53].barWeight||0))),m[0]&64&&(w.handleMouseOver=c),m[0]&64&&(w.handleMouseOut=f),m[0]&1112&&(w.xy=[e[10],e[3][1]+e[52]*e[4]+e[52]]),m[0]&2128&&(w.wh=[(e[53].barWeight||0)*e[11],e[4]-2]),a.$set(w);const B={};m[0]&576&&(B.color=e[9]===e[51]?e[15]:e[14]),m[0]&64&&(B.handleMouseOver=h),m[0]&64&&(B.handleMouseOut=D),m[0]&64&&(B.handleMouseDown=b),m[0]&3160&&(B.xy=[e[10]+(e[53].barWeight||0)*e[11],e[3][1]+e[52]*e[4]+e[52]]),m[0]&20&&(B.wh=[e[2],e[4]-2]),o.$set(B)},i(g){l||(Me(i.$$.fragment,g),Me(u.$$.fragment,g),Me(a.$$.fragment,g),Me(o.$$.fragment,g),l=!0)},o(g){Te(i.$$.fragment,g),Te(u.$$.fragment,g),Te(a.$$.fragment,g),Te(o.$$.fragment,g),l=!1},d(g){g&&V(r),ct(i,g),ct(u,g),ct(a,g),ct(o,g)}}}function OE(t){let e,r=[],i=new Map,u,a,o,l=t[6];const d=p=>p[51];for(let p=0;p<l.length;p+=1){let c=eh(t,l,p),f=d(c);i.set(f,r[p]=th(f,c))}return{c(){e=bt("svg");for(let p=0;p<r.length;p+=1)r[p].c();this.h()},l(p){e=At(p,"svg",{id:!0,class:!0});var c=re(e);for(let f=0;f<r.length;f+=1)r[f].l(c);c.forEach(V),this.h()},h(){T(e,"id","svg"),T(e,"class","w-full h-full")},m(p,c){_e(p,e,c);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(e,null);u=!0,a||(o=[Le(e,"mousemove",t[25]),Le(e,"mouseup",t[24]),Le(e,"dblclick",t[23])],a=!0)},p(p,c){c[0]&8388607&&(l=p[6],pn(),r=bi(r,c,d,1,p,l,i,e,vd,th,null,eh),vn())},i(p){if(!u){for(let c=0;c<l.length;c+=1)Me(r[c]);u=!0}},o(p){for(let c=0;c<r.length;c+=1)Te(r[c]);u=!1},d(p){p&&V(e);for(let c=0;c<r.length;c+=1)r[c].d();a=!1,Wr(o)}}}function ME(t,e,r){let i,u,a,o,l,d,p,c,f,h,D,b,g;Mt(t,mn,Ae=>r(38,g=Ae));let{center:m=[0,0]}=e,{dimensions:y=[100,100]}=e,{maxWidth:E=1e3}=e,{pointRadius:w=10}=e,{textWidth:B=250}=e,{horizontalPad:F=20}=e,{verticalPad:O=2}=e,{textBarPad:P=10}=e,{fontSize:I=13}=e,{handleWidth:N=20}=e,W=Ae=>`rgba(46,67,101, ${Ae})`,$=Ae=>`rgba(76,97,131, ${Ae})`,K=null,q=null,G=null,L=$(.3),z=$(.8),te=null,le=null,ve=null;function ye(Ae,be){r(8,q=Ae)}function Se(Ae,be){r(7,K=Ae)}function xe(Ae,be){r(9,G=Ae)}function Fe(Ae,be){r(8,q=null)}function Ne(Ae,be){r(7,K=null)}function ke(Ae,be){r(9,G=null)}function Ue(Ae,be){te=Ae}function at(Ae){let be=te||q||G||K;if(!be)return;const Dt=Ri(Ae);Qe(be,Dt)}function vt(Ae){te=null,clearInterval(le),le=null,ve=null}function Qe(Ae,be){let jt=Math.min(h,Math.max(0,be[0]-D))/h,ar={...g.weightedPrompts},R={...ar[Ae]};R.barWeight=jt,ar[Ae]=R,Pt.updateActivePrompt({...g,weightedPrompts:ar})}function it(Ae){let be=te;if(!be)return;const Dt=Ri(Ae);if(Qe(be,Dt),te){let jt=D+h+N,ar=D;Dt[0]>jt&&!le?(ve=Date.now(),le=setInterval(()=>{if(Date.now()-ve<1e3)return;let R={...g.weightedPrompts};const j=Object.entries(R).reduce((Y,[ue,ee])=>(ue!==te?Y[ue]={...ee,barWeight:Math.max(0,(ee.barWeight||0)-.01)}:Y[ue]={...ee,barWeight:Math.min(1,(ee.barWeight||0)+.01)},Y),{});Pt.updateActivePrompt({...g,weightedPrompts:j})},100)):Dt[0]<ar&&!le?(ve=Date.now(),le=setInterval(()=>{if(Date.now()-ve<1e3)return;let R={...g.weightedPrompts};const j=Object.entries(R).reduce((Y,[ue,ee])=>(ue!==te?Y[ue]={...ee,barWeight:Math.min(1,(ee.barWeight||0)+.01)}:Y[ue]={...ee,barWeight:Math.max(0,(ee.barWeight||0)-.01)},Y),{});Pt.updateActivePrompt({...g,weightedPrompts:j})},100)):Dt[0]<jt&&Dt[0]>ar&&le&&(clearInterval(le),le=null,ve=null)}}const gt=(Ae,be)=>Se(Ae),mt=(Ae,be)=>Ne(),rt=(Ae,be)=>ye(Ae),Xe=(Ae,be)=>Fe(),wt=(Ae,be)=>xe(Ae),br=(Ae,be)=>ke(),Ft=(Ae,be)=>Ue(Ae);return t.$$set=Ae=>{"center"in Ae&&r(26,m=Ae.center),"dimensions"in Ae&&r(27,y=Ae.dimensions),"maxWidth"in Ae&&r(28,E=Ae.maxWidth),"pointRadius"in Ae&&r(29,w=Ae.pointRadius),"textWidth"in Ae&&r(30,B=Ae.textWidth),"horizontalPad"in Ae&&r(0,F=Ae.horizontalPad),"verticalPad"in Ae&&r(31,O=Ae.verticalPad),"textBarPad"in Ae&&r(32,P=Ae.textBarPad),"fontSize"in Ae&&r(1,I=Ae.fontSize),"handleWidth"in Ae&&r(2,N=Ae.handleWidth)},t.$$.update=()=>{t.$$.dirty[1]&128&&r(6,i=Object.entries(g.weightedPrompts).map(([Ae,be],Dt)=>[Ae,Dt,be])),t.$$.dirty[1]&128&&r(36,u=Object.keys(g.weightedPrompts).length),t.$$.dirty[0]&134217728&&r(35,a=[y[0]-50,y[1]-50]),t.$$.dirty[0]&1073741890&&r(5,o=i.reduce((Ae,[be,Dt,jt])=>{const[ar,R]=Qr(B,jt.text.length,I);return Ae[be]=[ar,R],Ae},{})),t.$$.dirty[0]&32&&r(37,l=Math.max(...Object.values(o).map(([Ae,be])=>be))),t.$$.dirty[1]&112&&r(4,d=Math.min(a[1]/u,l)),t.$$.dirty[0]&16|t.$$.dirty[1]&33&&r(34,p=d*u+O*Math.max(u-1,0)),t.$$.dirty[0]&268435456|t.$$.dirty[1]&16&&r(33,c=Math.min(a[0],E)),t.$$.dirty[0]&67108864|t.$$.dirty[1]&12&&r(3,f=[m[0]-c/2,m[1]-p/2]),t.$$.dirty[0]&1073741829|t.$$.dirty[1]&6&&r(11,h=c-P-B-2*F-N),t.$$.dirty[0]&1073741833|t.$$.dirty[1]&2&&r(10,D=f[0]+P+B+F),t.$$.dirty[1]&128&&r(12,b=Math.max(...Object.values(g.weightedPrompts).map(Ae=>Ae.barWeight||0)))},[F,I,N,f,d,o,i,K,q,G,D,h,b,W,L,z,ye,Se,xe,Fe,Ne,ke,Ue,at,vt,it,m,y,E,w,B,O,P,c,p,a,u,l,g,gt,mt,rt,Xe,wt,br,Ft]}class PE extends It{constructor(e){super(),Tt(this,e,ME,OE,Nt,{center:26,dimensions:27,maxWidth:28,pointRadius:29,textWidth:30,horizontalPad:0,verticalPad:31,textBarPad:32,fontSize:1,handleWidth:2},null,[-1,-1])}}function xE(t){let e,r,i,u;return r=new PE({props:{dimensions:t[2],center:t[3]}}),{c(){e=ae("div"),ot(r.$$.fragment),this.h()},l(a){e=se(a,"DIV",{class:!0});var o=re(e);lt(r.$$.fragment,o),o.forEach(V),this.h()},h(){T(e,"class","w-full h-full"),gs(()=>t[4].call(e))},m(a,o){_e(a,e,o),ft(r,e,null),i=ms(e,t[4].bind(e)),u=!0},p(a,[o]){const l={};o&4&&(l.dimensions=a[2]),o&8&&(l.center=a[3]),r.$set(l)},i(a){u||(Me(r.$$.fragment,a),u=!0)},o(a){Te(r.$$.fragment,a),u=!1},d(a){a&&V(e),ct(r),i()}}}function IE(t,e,r){let i,u,a,o;function l(){a=this.clientWidth,o=this.clientHeight,r(0,a),r(1,o)}return t.$$.update=()=>{t.$$.dirty&3&&r(2,i=[a||0,o||0]),t.$$.dirty&4&&r(3,u=Ss(i))},[a,o,i,u,l]}class TE extends It{constructor(e){super(),Tt(this,e,IE,xE,Nt,{})}}function NE(t){let e,r,i,u,a;return{c(){e=bt("line"),this.h()},l(o){e=At(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),re(e).forEach(V),this.h()},h(){T(e,"x1",r=t[0][0]),T(e,"y1",i=t[0][1]),T(e,"x2",u=t[1][0]),T(e,"y2",a=t[1][1]),T(e,"stroke",t[3]),T(e,"stroke-width",t[2])},m(o,l){_e(o,e,l)},p(o,[l]){l&1&&r!==(r=o[0][0])&&T(e,"x1",r),l&1&&i!==(i=o[0][1])&&T(e,"y1",i),l&2&&u!==(u=o[1][0])&&T(e,"x2",u),l&2&&a!==(a=o[1][1])&&T(e,"y2",a),l&8&&T(e,"stroke",o[3]),l&4&&T(e,"stroke-width",o[2])},i:Pe,o:Pe,d(o){o&&V(e)}}}function kE(t,e,r){let{p1:i=[100,100]}=e,{p2:u=[100,100]}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=l=>{"p1"in l&&r(0,i=l.p1),"p2"in l&&r(1,u=l.p2),"stroke"in l&&r(2,a=l.stroke),"color"in l&&r(3,o=l.color)},[i,u,a,o]}class RE extends It{constructor(e){super(),Tt(this,e,kE,NE,Nt,{p1:0,p2:1,stroke:2,color:3})}}function rh(t,e,r){const i=t.slice();return i[15]=e[r][0],i[16]=e[r][1],i}function nh(t){let e,r,i;e=new Zd({props:{xy:t[0],radius:t[1]}});let u=Object.entries(t[5].weightedPrompts),a=[];for(let l=0;l<u.length;l+=1)a[l]=ih(rh(t,u,l));const o=l=>Te(a[l],1,1,()=>{a[l]=null});return{c(){ot(e.$$.fragment);for(let l=0;l<a.length;l+=1)a[l].c();r=zt()},l(l){lt(e.$$.fragment,l);for(let d=0;d<a.length;d+=1)a[d].l(l);r=zt()},m(l,d){ft(e,l,d);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(l,d);_e(l,r,d),i=!0},p(l,d){const p={};if(d&1&&(p.xy=l[0]),d&2&&(p.radius=l[1]),e.$set(p),d&895){u=Object.entries(l[5].weightedPrompts);let c;for(c=0;c<u.length;c+=1){const f=rh(l,u,c);a[c]?(a[c].p(f,d),Me(a[c],1)):(a[c]=ih(f),a[c].c(),Me(a[c],1),a[c].m(r.parentNode,r))}for(pn(),c=u.length;c<a.length;c+=1)o(c);vn()}},i(l){if(!i){Me(e.$$.fragment,l);for(let d=0;d<u.length;d+=1)Me(a[d]);i=!0}},o(l){Te(e.$$.fragment,l),a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)Te(a[d]);i=!1},d(l){ct(e,l),$l(a,l),l&&V(r)}}}function ih(t){let e,r,i,u,a,o,l;e=new RE({props:{p1:t[0],p2:t[6][t[15]].xy}});function d(){return t[11](t[15])}return a=new Ju({props:{xy:t[6][t[15]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:d}}),o=new Cs({props:{xy:t[9](t[6][t[15]].textXY,Qr(t[3],t[16].text.length,t[4])),color:`rgba(255,255,255,${Pr(t[6][t[15]].unitWeight)}`,wh:Qr(t[3],t[16].text.length,t[4]),fontSize:t[4],text:t[16].text}}),{c(){ot(e.$$.fragment),r=bt("path"),ot(a.$$.fragment),ot(o.$$.fragment),this.h()},l(p){lt(e.$$.fragment,p),r=At(p,"path",{d:!0,fill:!0}),re(r).forEach(V),lt(a.$$.fragment,p),lt(o.$$.fragment,p),this.h()},h(){T(r,"d",i=ah(t[0],t[1],t[6][t[15]].angle,t[6][t[15]].angle+t[6][t[15]].angleDiff)),T(r,"fill",u=`rgba(26,47,91,${Pr(t[6][t[15]].unitWeight)/4}`)},m(p,c){ft(e,p,c),_e(p,r,c),ft(a,p,c),ft(o,p,c),l=!0},p(p,c){t=p;const f={};c&1&&(f.p1=t[0]),c&96&&(f.p2=t[6][t[15]].xy),e.$set(f),(!l||c&99&&i!==(i=ah(t[0],t[1],t[6][t[15]].angle,t[6][t[15]].angle+t[6][t[15]].angleDiff)))&&T(r,"d",i),(!l||c&96&&u!==(u=`rgba(26,47,91,${Pr(t[6][t[15]].unitWeight)/4}`))&&T(r,"fill",u);const h={};c&96&&(h.xy=t[6][t[15]].xy),c&4&&(h.radius=t[2]),c&32&&(h.handleMouseDown=d),a.$set(h);const D={};c&120&&(D.xy=t[9](t[6][t[15]].textXY,Qr(t[3],t[16].text.length,t[4]))),c&96&&(D.color=`rgba(255,255,255,${Pr(t[6][t[15]].unitWeight)}`),c&56&&(D.wh=Qr(t[3],t[16].text.length,t[4])),c&16&&(D.fontSize=t[4]),c&32&&(D.text=t[16].text),o.$set(D)},i(p){l||(Me(e.$$.fragment,p),Me(a.$$.fragment,p),Me(o.$$.fragment,p),l=!0)},o(p){Te(e.$$.fragment,p),Te(a.$$.fragment,p),Te(o.$$.fragment,p),l=!1},d(p){ct(e,p),p&&V(r),ct(a,p),ct(o,p)}}}function LE(t){let e,r,i,u,a=t[6]&&t[5].weightedPrompts&&nh(t);return{c(){e=bt("svg"),a&&a.c(),this.h()},l(o){e=At(o,"svg",{id:!0,class:!0});var l=re(e);a&&a.l(l),l.forEach(V),this.h()},h(){T(e,"id","svg"),T(e,"class","w-full h-full")},m(o,l){_e(o,e,l),a&&a.m(e,null),r=!0,i||(u=[Le(e,"mousemove",t[10]),Le(e,"mouseup",t[7])],i=!0)},p(o,[l]){o[6]&&o[5].weightedPrompts?a?(a.p(o,l),l&96&&Me(a,1)):(a=nh(o),a.c(),Me(a,1),a.m(e,null)):a&&(pn(),Te(a,1,1,()=>{a=null}),vn())},i(o){r||(Me(a),r=!0)},o(o){Te(a),r=!1},d(o){o&&V(e),a&&a.d(),i=!1,Wr(u)}}}function uh(t,e){return t?Object.entries(t).reduce((r,[i,u],a)=>{const o=r[i]||a*(360/Object.keys(t).length)-90;return r[i]=o,r},e):null}function ah(t,e,r,i){const u=t[0]+e*Math.cos(r*Math.PI/180),a=t[1]+e*Math.sin(r*Math.PI/180),o=t[0]+e*Math.cos(i*Math.PI/180),l=t[1]+e*Math.sin(i*Math.PI/180),d=i-r<=180?"0":"1";return`M${t[0]},${t[1]} L${u},${a} A${e},${e} 0 ${d} 1 ${o},${l} Z`}function UE(t,e,r){let i,u;Mt(t,mn,E=>r(5,u=E));let{center:a=[450,450]}=e,{radius:o=250}=e,{pointRadius:l=10}=e,{textWidth:d=150}=e,{fontSize:p=13}=e,c=[0,0],f=null;function h(E){f=null}function D(E){f=E}function b(E,w){let B=su(E,a,o)[0]-180;B<0&&(B+=360);const F=Jd(Ss(w),B);return Zu(E,F)}function g(E){if(c=Ri(E),f){const w={...u.weightedPrompts[f]},B=Rl(c,a,o),F=su(B,a,o)[0],O={...u.pieAngles};O[w.id]=F;const P={...u.weightedPrompts};P[f]=w,r(6,i=m(P,a,o,O))}}function m(E,w,B,F){if(!E||!w||!B)return null;const O=Object.entries(E).sort(($,K)=>F[$[0]]-F[K[0]]),P=O.map(($,K)=>{const q=K+1===O.length?0:K+1,G=F[O[q][0]]-F[O[K][0]];return G<0?[$[0],360+G]:[$[0],G]}),I=Math.max(...P.map($=>$[1])),N=P.reduce(($,[K,q])=>{({...E[K]});const G=F[K],L=Ln(w,[G,1],B),z=Ln(w,[G+.5*q,1],B),te=q/I;return $[K]={xy:L,textXY:z,angle:G,angleDiff:q,unitWeight:te},$},{}),W={...E};return Object.entries(N).forEach(([$,K])=>{W[$].pieWeight=K.unitWeight}),Pt.updateActivePrompt({...u,weightedPrompts:W,pieAngles:F}),N}const y=E=>D(E);return t.$$set=E=>{"center"in E&&r(0,a=E.center),"radius"in E&&r(1,o=E.radius),"pointRadius"in E&&r(2,l=E.pointRadius),"textWidth"in E&&r(3,d=E.textWidth),"fontSize"in E&&r(4,p=E.fontSize)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(u.pieAngles||{}).length!==Object.keys(u.weightedPrompts).length&&Pt.updateActivePrompt({...u,pieAngles:uh(u.weightedPrompts,{})}),t.$$.dirty&35&&r(6,i=m(u.weightedPrompts,a,o,u.pieAngles||uh(u.weightedPrompts,{})))},[a,o,l,d,p,u,i,h,D,b,g,y]}class jE extends It{constructor(e){super(),Tt(this,e,UE,LE,Nt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function VE(t){let e,r,i,u;return r=new jE({props:{center:[Math.round(t[0]/2),Math.round(t[1]/2)],radius:Math.round(Math.min(t[0],t[1])/2)-150}}),{c(){e=ae("div"),ot(r.$$.fragment),this.h()},l(a){e=se(a,"DIV",{class:!0});var o=re(e);lt(r.$$.fragment,o),o.forEach(V),this.h()},h(){T(e,"class","w-full h-full"),gs(()=>t[2].call(e))},m(a,o){_e(a,e,o),ft(r,e,null),i=ms(e,t[2].bind(e)),u=!0},p(a,[o]){const l={};o&3&&(l.center=[Math.round(a[0]/2),Math.round(a[1]/2)]),o&3&&(l.radius=Math.round(Math.min(a[0],a[1])/2)-150),r.$set(l)},i(a){u||(Me(r.$$.fragment,a),u=!0)},o(a){Te(r.$$.fragment,a),u=!1},d(a){a&&V(e),ct(r),i()}}}function qE(t,e,r){let i,u;function a(){i=this.clientWidth,u=this.clientHeight,r(0,i),r(1,u)}return[i,u,a]}class zE extends It{constructor(e){super(),Tt(this,e,qE,VE,Nt,{})}}function sh(t,e,r){const i=t.slice();return i[26]=e[r][0],i[27]=e[r][1],i}function oh(t){let e=[],r=new Map,i,u,a,o=Object.entries(t[4].weightedPrompts);const l=d=>d[26];for(let d=0;d<o.length;d+=1){let p=sh(t,o,d),c=l(p);r.set(c,e[d]=fh(c,p))}return u=new Ju({props:{xy:t[7],radius:t[1],color:"rgba(136,157,191, 1)",handleMouseDown:t[19]}}),{c(){for(let d=0;d<e.length;d+=1)e[d].c();i=zt(),ot(u.$$.fragment)},l(d){for(let p=0;p<e.length;p+=1)e[p].l(d);i=zt(),lt(u.$$.fragment,d)},m(d,p){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(d,p);_e(d,i,p),ft(u,d,p),a=!0},p(d,p){p&221&&(o=Object.entries(d[4].weightedPrompts),pn(),e=bi(e,p,l,1,d,o,r,i.parentNode,vd,fh,i,sh),vn());const c={};p&128&&(c.xy=d[7]),p&2&&(c.radius=d[1]),p&32&&(c.handleMouseDown=d[19]),u.$set(c)},i(d){if(!a){for(let p=0;p<o.length;p+=1)Me(e[p]);Me(u.$$.fragment,d),a=!0}},o(d){for(let p=0;p<e.length;p+=1)Te(e[p]);Te(u.$$.fragment,d),a=!1},d(d){for(let p=0;p<e.length;p+=1)e[p].d(d);d&&V(i),ct(u,d)}}}function lh(t){let e,r;return e=new Xd({props:{p1:t[6][t[26]].embedXY,p2:t[7]}}),{c(){ot(e.$$.fragment)},l(i){lt(e.$$.fragment,i)},m(i,u){ft(e,i,u),r=!0},p(i,u){const a={};u&80&&(a.p1=i[6][i[26]].embedXY),u&128&&(a.p2=i[7]),e.$set(a)},i(i){r||(Me(e.$$.fragment,i),r=!0)},o(i){Te(e.$$.fragment,i),r=!1},d(i){ct(e,i)}}}function fh(t,e){let r,i,u,a,o,l=e[27].embedActive&&lh(e);return u=new Ju({props:{xy:e[6][e[26]].embedXY,radius:e[0],color:"rgba(136,157,191, 1)"}}),a=new Cs({props:{xy:[e[6][e[26]].embedXY[0]-Qr(e[2],e[27].text.length,e[3])[0]/2,e[6][e[26]].embedXY[1]+e[0]],color:`rgba(255,255,255,${Pr(e[27].embedWeight)}`,wh:Qr(e[2],e[27].text.length,e[3]),fontSize:e[3],text:e[27].text}}),{key:t,first:null,c(){r=zt(),l&&l.c(),i=zt(),ot(u.$$.fragment),ot(a.$$.fragment),this.h()},l(d){r=zt(),l&&l.l(d),i=zt(),lt(u.$$.fragment,d),lt(a.$$.fragment,d),this.h()},h(){this.first=r},m(d,p){_e(d,r,p),l&&l.m(d,p),_e(d,i,p),ft(u,d,p),ft(a,d,p),o=!0},p(d,p){e=d,e[27].embedActive?l?(l.p(e,p),p&16&&Me(l,1)):(l=lh(e),l.c(),Me(l,1),l.m(i.parentNode,i)):l&&(pn(),Te(l,1,1,()=>{l=null}),vn());const c={};p&80&&(c.xy=e[6][e[26]].embedXY),p&1&&(c.radius=e[0]),u.$set(c);const f={};p&93&&(f.xy=[e[6][e[26]].embedXY[0]-Qr(e[2],e[27].text.length,e[3])[0]/2,e[6][e[26]].embedXY[1]+e[0]]),p&16&&(f.color=`rgba(255,255,255,${Pr(e[27].embedWeight)}`),p&28&&(f.wh=Qr(e[2],e[27].text.length,e[3])),p&8&&(f.fontSize=e[3]),p&16&&(f.text=e[27].text),a.$set(f)},i(d){o||(Me(l),Me(u.$$.fragment,d),Me(a.$$.fragment,d),o=!0)},o(d){Te(l),Te(u.$$.fragment,d),Te(a.$$.fragment,d),o=!1},d(d){d&&V(r),l&&l.d(d),d&&V(i),ct(u,d),ct(a,d)}}}function WE(t){let e,r=Object.entries(t[4].weightedPrompts).length>0&&Object.entries(t[6]||{}).length>0,i,u,a,o=r&&oh(t);return{c(){e=bt("svg"),o&&o.c(),this.h()},l(l){e=At(l,"svg",{id:!0,class:!0});var d=re(e);o&&o.l(d),d.forEach(V),this.h()},h(){T(e,"id","svg"),T(e,"class","w-full h-full")},m(l,d){_e(l,e,d),o&&o.m(e,null),i=!0,u||(a=[Le(e,"mousemove",t[9]),Le(e,"mouseup",t[10]),Le(e,"dblclick",t[8])],u=!0)},p(l,[d]){d&80&&(r=Object.entries(l[4].weightedPrompts).length>0&&Object.entries(l[6]||{}).length>0),r?o?(o.p(l,d),d&80&&Me(o,1)):(o=oh(l),o.c(),Me(o,1),o.m(e,null)):o&&(pn(),Te(o,1,1,()=>{o=null}),vn())},i(l){i||(Me(o),i=!0)},o(l){Te(o),i=!1},d(l){l&&V(e),o&&o.d(),u=!1,Wr(a)}}}function HE(t,e,r){let i,u,a,o,l;Mt(t,mn,q=>r(4,l=q));let{center:d=[100,100]}=e,{dimensions:p=[100,100]}=e,{pointRadius:c=4}=e,{markerRadius:f=10}=e,{textWidth:h=150}=e,{fontSize:D=12}=e,{innerPad:b=100}=e,g=!1,m=null,y=p,E=[0,0];function w(q){l.embeddings&&l.scaledEmbedMappings&&($(),P(i,u,a,y,q))}function B(q,G){q&&G&&($(),P(i,u,a,y,o))}function F(q,G){P(i,q,G,y,o)}function O(q){l.embeddings&&l.scaledEmbedMappings&&($(),P(i,u,a,q,o))}function P(q,G,L,z,te){if(!m)return;let le={...l.weightedPrompts},ve=0;Object.values(m).forEach(Fe=>{Object.values(m).forEach(Ne=>{const ke=Ll(Fe.embedXY,Ne.embedXY);ke>ve&&(ve=ke)})});const ye=Object.entries(m).reduce((Fe,[Ne,ke])=>{const Ue=Ll(q,ke.embedXY);return Fe[Ne]=Ue,Fe},{}),Se=(Fe,Ne)=>{const ke=Fe?Math.round(Math.pow(1-Ne/ve,L)*100)/100:0;return ke<0?0:ke},xe=(Fe,Ne)=>{const ke=Fe?Math.round((1-Ne/ve)*100)/100:0;return ke<0?0:ke};Object.entries(ye).sort((Fe,Ne)=>Fe[1]-Ne[1]).forEach(([Fe,Ne],ke)=>{if(!le[Fe])return;const Ue=ke<te;le[Fe]={...le[Fe],embedWeight:G?Se(Ue,Ne):xe(Ue,Ne),embedActive:Ue}}),Pt.updateActivePrompt({...l,embedMarker:i,weightedPrompts:le})}function I(q){const G=Ri(q,svg);r(7,i=G),P(i,u,a,y,o)}function N(q){if(g){const G=Ri(q,svg);r(7,i=G),P(i,u,a,y,o)}}function W(q){r(5,g=!1)}function $(){const q=Object.keys(l.scaledEmbedMappings);r(6,m=q.reduce((G,L,z)=>(G[L]={embedXY:[E[0]+y[0]*l.scaledEmbedMappings[z][0],E[1]+y[1]*l.scaledEmbedMappings[z][1]]},G),{}))}const K=()=>r(5,g=!0);return t.$$set=q=>{"center"in q&&r(11,d=q.center),"dimensions"in q&&r(12,p=q.dimensions),"pointRadius"in q&&r(0,c=q.pointRadius),"markerRadius"in q&&r(1,f=q.markerRadius),"textWidth"in q&&r(2,h=q.textWidth),"fontSize"in q&&r(3,D=q.fontSize),"innerPad"in q&&r(13,b=q.innerPad)},t.$$.update=()=>{if(t.$$.dirty&2064&&r(7,i=l.embedMarker||d),t.$$.dirty&16&&r(18,u=l.embedExponentialScaling),t.$$.dirty&16&&r(17,a=l.embedWeightScaling),t.$$.dirty&16&&r(16,o=l.embedPromptLimit||Object.keys(l.weightedPrompts).length),t.$$.dirty&393216&&F(u,a),t.$$.dirty&16&&B(l.embeddings,l.scaledEmbedMappings),t.$$.dirty&45056){const q=Math.min(...p),G=p[0]===q,L=p[1]===q;r(15,E=[Math.max(G?0:(p[0]-q)/2,b),Math.max(L?0:(p[1]-q)/2,b)]),r(14,y=[p[0]-2*E[0],p[1]-2*E[1]])}t.$$.dirty&16384&&O(y),t.$$.dirty&16384&&O(y),t.$$.dirty&65536&&w(o)},[c,f,h,D,l,g,m,i,I,N,W,d,p,b,y,E,o,a,u,K]}class GE extends It{constructor(e){super(),Tt(this,e,HE,WE,Nt,{center:11,dimensions:12,pointRadius:0,markerRadius:1,textWidth:2,fontSize:3,innerPad:13})}}var Ul={},Qd={},ns={},KE={get exports(){return ns},set exports(t){ns=t}},is={},YE={get exports(){return is},set exports(t){is=t}},ep=function(e,r){return function(){for(var u=new Array(arguments.length),a=0;a<u.length;a++)u[a]=arguments[a];return e.apply(r,u)}},$E=ep,wi=Object.prototype.toString;function af(t){return Array.isArray(t)}function jl(t){return typeof t>"u"}function ZE(t){return t!==null&&!jl(t)&&t.constructor!==null&&!jl(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function tp(t){return wi.call(t)==="[object ArrayBuffer]"}function XE(t){return wi.call(t)==="[object FormData]"}function JE(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&tp(t.buffer),e}function QE(t){return typeof t=="string"}function e2(t){return typeof t=="number"}function rp(t){return t!==null&&typeof t=="object"}function Ga(t){if(wi.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function t2(t){return wi.call(t)==="[object Date]"}function r2(t){return wi.call(t)==="[object File]"}function n2(t){return wi.call(t)==="[object Blob]"}function np(t){return wi.call(t)==="[object Function]"}function i2(t){return rp(t)&&np(t.pipe)}function u2(t){return wi.call(t)==="[object URLSearchParams]"}function a2(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function s2(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function sf(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),af(t))for(var r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&e.call(null,t[u],u,t)}function Vl(){var t={};function e(u,a){Ga(t[a])&&Ga(u)?t[a]=Vl(t[a],u):Ga(u)?t[a]=Vl({},u):af(u)?t[a]=u.slice():t[a]=u}for(var r=0,i=arguments.length;r<i;r++)sf(arguments[r],e);return t}function o2(t,e,r){return sf(e,function(u,a){r&&typeof u=="function"?t[a]=$E(u,r):t[a]=u}),t}function l2(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Hr={isArray:af,isArrayBuffer:tp,isBuffer:ZE,isFormData:XE,isArrayBufferView:JE,isString:QE,isNumber:e2,isObject:rp,isPlainObject:Ga,isUndefined:jl,isDate:t2,isFile:r2,isBlob:n2,isFunction:np,isStream:i2,isURLSearchParams:u2,isStandardBrowserEnv:s2,forEach:sf,merge:Vl,extend:o2,trim:a2,stripBOM:l2},nu=Hr;function ch(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ip=function(e,r,i){if(!r)return e;var u;if(i)u=i(r);else if(nu.isURLSearchParams(r))u=r.toString();else{var a=[];nu.forEach(r,function(d,p){d===null||typeof d>"u"||(nu.isArray(d)?p=p+"[]":d=[d],nu.forEach(d,function(f){nu.isDate(f)?f=f.toISOString():nu.isObject(f)&&(f=JSON.stringify(f)),a.push(ch(p)+"="+ch(f))}))}),u=a.join("&")}if(u){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+u}return e},f2=Hr;function Bs(){this.handlers=[]}Bs.prototype.use=function(e,r,i){return this.handlers.push({fulfilled:e,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};Bs.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Bs.prototype.forEach=function(e){f2.forEach(this.handlers,function(i){i!==null&&e(i)})};var c2=Bs,h2=Hr,d2=function(e,r){h2.forEach(e,function(u,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=u,delete e[a])})},up=function(e,r,i,u,a){return e.config=r,i&&(e.code=i),e.request=u,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},ap={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zo,hh;function sp(){if(hh)return Zo;hh=1;var t=up;return Zo=function(r,i,u,a,o){var l=new Error(r);return t(l,i,u,a,o)},Zo}var Xo,dh;function p2(){if(dh)return Xo;dh=1;var t=sp();return Xo=function(r,i,u){var a=u.config.validateStatus;!u.status||!a||a(u.status)?r(u):i(t("Request failed with status code "+u.status,u.config,null,u.request,u))},Xo}var Jo,ph;function v2(){if(ph)return Jo;ph=1;var t=Hr;return Jo=t.isStandardBrowserEnv()?function(){return{write:function(i,u,a,o,l,d){var p=[];p.push(i+"="+encodeURIComponent(u)),t.isNumber(a)&&p.push("expires="+new Date(a).toGMTString()),t.isString(o)&&p.push("path="+o),t.isString(l)&&p.push("domain="+l),d===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(i){var u=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Jo}var Qo,vh;function g2(){return vh||(vh=1,Qo=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),Qo}var el,gh;function m2(){return gh||(gh=1,el=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),el}var tl,mh;function D2(){if(mh)return tl;mh=1;var t=g2(),e=m2();return tl=function(i,u){return i&&!t(u)?e(i,u):u},tl}var rl,Dh;function _2(){if(Dh)return rl;Dh=1;var t=Hr,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return rl=function(i){var u={},a,o,l;return i&&t.forEach(i.split(`
`),function(p){if(l=p.indexOf(":"),a=t.trim(p.substr(0,l)).toLowerCase(),o=t.trim(p.substr(l+1)),a){if(u[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?u[a]=(u[a]?u[a]:[]).concat([o]):u[a]=u[a]?u[a]+", "+o:o}}),u},rl}var nl,_h;function y2(){if(_h)return nl;_h=1;var t=Hr;return nl=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),u;function a(o){var l=o;return r&&(i.setAttribute("href",l),l=i.href),i.setAttribute("href",l),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return u=a(window.location.href),function(l){var d=t.isString(l)?a(l):l;return d.protocol===u.protocol&&d.host===u.host}}():function(){return function(){return!0}}(),nl}var il,yh;function Os(){if(yh)return il;yh=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,il=t,il}var ul,bh;function Ah(){if(bh)return ul;bh=1;var t=Hr,e=p2(),r=v2(),i=ip,u=D2(),a=_2(),o=y2(),l=sp(),d=ap,p=Os();return ul=function(f){return new Promise(function(D,b){var g=f.data,m=f.headers,y=f.responseType,E;function w(){f.cancelToken&&f.cancelToken.unsubscribe(E),f.signal&&f.signal.removeEventListener("abort",E)}t.isFormData(g)&&delete m["Content-Type"];var B=new XMLHttpRequest;if(f.auth){var F=f.auth.username||"",O=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";m.Authorization="Basic "+btoa(F+":"+O)}var P=u(f.baseURL,f.url);B.open(f.method.toUpperCase(),i(P,f.params,f.paramsSerializer),!0),B.timeout=f.timeout;function I(){if(B){var W="getAllResponseHeaders"in B?a(B.getAllResponseHeaders()):null,$=!y||y==="text"||y==="json"?B.responseText:B.response,K={data:$,status:B.status,statusText:B.statusText,headers:W,config:f,request:B};e(function(G){D(G),w()},function(G){b(G),w()},K),B=null}}if("onloadend"in B?B.onloadend=I:B.onreadystatechange=function(){!B||B.readyState!==4||B.status===0&&!(B.responseURL&&B.responseURL.indexOf("file:")===0)||setTimeout(I)},B.onabort=function(){B&&(b(l("Request aborted",f,"ECONNABORTED",B)),B=null)},B.onerror=function(){b(l("Network Error",f,null,B)),B=null},B.ontimeout=function(){var $=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",K=f.transitional||d;f.timeoutErrorMessage&&($=f.timeoutErrorMessage),b(l($,f,K.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",B)),B=null},t.isStandardBrowserEnv()){var N=(f.withCredentials||o(P))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;N&&(m[f.xsrfHeaderName]=N)}"setRequestHeader"in B&&t.forEach(m,function($,K){typeof g>"u"&&K.toLowerCase()==="content-type"?delete m[K]:B.setRequestHeader(K,$)}),t.isUndefined(f.withCredentials)||(B.withCredentials=!!f.withCredentials),y&&y!=="json"&&(B.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&B.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&B.upload&&B.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(E=function(W){B&&(b(!W||W&&W.type?new p("canceled"):W),B.abort(),B=null)},f.cancelToken&&f.cancelToken.subscribe(E),f.signal&&(f.signal.aborted?E():f.signal.addEventListener("abort",E))),g||(g=null),B.send(g)})},ul}var Sr=Hr,wh=d2,b2=up,A2=ap,w2={"Content-Type":"application/x-www-form-urlencoded"};function Eh(t,e){!Sr.isUndefined(t)&&Sr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function E2(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Ah()),t}function F2(t,e,r){if(Sr.isString(t))try{return(e||JSON.parse)(t),Sr.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(t)}var Ms={transitional:A2,adapter:E2(),transformRequest:[function(e,r){return wh(r,"Accept"),wh(r,"Content-Type"),Sr.isFormData(e)||Sr.isArrayBuffer(e)||Sr.isBuffer(e)||Sr.isStream(e)||Sr.isFile(e)||Sr.isBlob(e)?e:Sr.isArrayBufferView(e)?e.buffer:Sr.isURLSearchParams(e)?(Eh(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Sr.isObject(e)||r&&r["Content-Type"]==="application/json"?(Eh(r,"application/json"),F2(e)):e}],transformResponse:[function(e){var r=this.transitional||Ms.transitional,i=r&&r.silentJSONParsing,u=r&&r.forcedJSONParsing,a=!i&&this.responseType==="json";if(a||u&&Sr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?b2(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Sr.forEach(["delete","get","head"],function(e){Ms.headers[e]={}});Sr.forEach(["post","put","patch"],function(e){Ms.headers[e]=Sr.merge(w2)});var of=Ms,C2=Hr,S2=of,B2=function(e,r,i){var u=this||S2;return C2.forEach(i,function(o){e=o.call(u,e,r)}),e},al,Fh;function op(){return Fh||(Fh=1,al=function(e){return!!(e&&e.__CANCEL__)}),al}var Ch=Hr,sl=B2,O2=op(),M2=of,P2=Os();function ol(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new P2("canceled")}var x2=function(e){ol(e),e.headers=e.headers||{},e.data=sl.call(e,e.data,e.headers,e.transformRequest),e.headers=Ch.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Ch.forEach(["delete","get","head","post","put","patch","common"],function(u){delete e.headers[u]});var r=e.adapter||M2.adapter;return r(e).then(function(u){return ol(e),u.data=sl.call(e,u.data,u.headers,e.transformResponse),u},function(u){return O2(u)||(ol(e),u&&u.response&&(u.response.data=sl.call(e,u.response.data,u.response.headers,e.transformResponse))),Promise.reject(u)})},Jr=Hr,lp=function(e,r){r=r||{};var i={};function u(c,f){return Jr.isPlainObject(c)&&Jr.isPlainObject(f)?Jr.merge(c,f):Jr.isPlainObject(f)?Jr.merge({},f):Jr.isArray(f)?f.slice():f}function a(c){if(Jr.isUndefined(r[c])){if(!Jr.isUndefined(e[c]))return u(void 0,e[c])}else return u(e[c],r[c])}function o(c){if(!Jr.isUndefined(r[c]))return u(void 0,r[c])}function l(c){if(Jr.isUndefined(r[c])){if(!Jr.isUndefined(e[c]))return u(void 0,e[c])}else return u(void 0,r[c])}function d(c){if(c in r)return u(e[c],r[c]);if(c in e)return u(void 0,e[c])}var p={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d};return Jr.forEach(Object.keys(e).concat(Object.keys(r)),function(f){var h=p[f]||a,D=h(f);Jr.isUndefined(D)&&h!==d||(i[f]=D)}),i},ll,Sh;function fp(){return Sh||(Sh=1,ll={version:"0.26.1"}),ll}var I2=fp().version,lf={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){lf[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});var Bh={};lf.transitional=function(e,r,i){function u(a,o){return"[Axios v"+I2+"] Transitional option '"+a+"'"+o+(i?". "+i:"")}return function(a,o,l){if(e===!1)throw new Error(u(o," has been removed"+(r?" in "+r:"")));return r&&!Bh[o]&&(Bh[o]=!0,console.warn(u(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,l):!0}};function T2(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var i=Object.keys(t),u=i.length;u-- >0;){var a=i[u],o=e[a];if(o){var l=t[a],d=l===void 0||o(l,a,t);if(d!==!0)throw new TypeError("option "+a+" must be "+d);continue}if(r!==!0)throw Error("Unknown option "+a)}}var N2={assertOptions:T2,validators:lf},cp=Hr,k2=ip,Oh=c2,Mh=x2,Ps=lp,hp=N2,iu=hp.validators;function Qu(t){this.defaults=t,this.interceptors={request:new Oh,response:new Oh}}Qu.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Ps(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var i=r.transitional;i!==void 0&&hp.assertOptions(i,{silentJSONParsing:iu.transitional(iu.boolean),forcedJSONParsing:iu.transitional(iu.boolean),clarifyTimeoutError:iu.transitional(iu.boolean)},!1);var u=[],a=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(r)===!1||(a=a&&D.synchronous,u.unshift(D.fulfilled,D.rejected))});var o=[];this.interceptors.response.forEach(function(D){o.push(D.fulfilled,D.rejected)});var l;if(!a){var d=[Mh,void 0];for(Array.prototype.unshift.apply(d,u),d=d.concat(o),l=Promise.resolve(r);d.length;)l=l.then(d.shift(),d.shift());return l}for(var p=r;u.length;){var c=u.shift(),f=u.shift();try{p=c(p)}catch(h){f(h);break}}try{l=Mh(p)}catch(h){return Promise.reject(h)}for(;o.length;)l=l.then(o.shift(),o.shift());return l};Qu.prototype.getUri=function(e){return e=Ps(this.defaults,e),k2(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};cp.forEach(["delete","get","head","options"],function(e){Qu.prototype[e]=function(r,i){return this.request(Ps(i||{},{method:e,url:r,data:(i||{}).data}))}});cp.forEach(["post","put","patch"],function(e){Qu.prototype[e]=function(r,i,u){return this.request(Ps(u||{},{method:e,url:r,data:i}))}});var R2=Qu,fl,Ph;function L2(){if(Ph)return fl;Ph=1;var t=Os();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(o){i=o});var u=this;this.promise.then(function(a){if(u._listeners){var o,l=u._listeners.length;for(o=0;o<l;o++)u._listeners[o](a);u._listeners=null}}),this.promise.then=function(a){var o,l=new Promise(function(d){u.subscribe(d),o=d}).then(a);return l.cancel=function(){u.unsubscribe(o)},l},r(function(o){u.reason||(u.reason=new t(o),i(u.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]},e.prototype.unsubscribe=function(i){if(this._listeners){var u=this._listeners.indexOf(i);u!==-1&&this._listeners.splice(u,1)}},e.source=function(){var i,u=new e(function(o){i=o});return{token:u,cancel:i}},fl=e,fl}var cl,xh;function U2(){return xh||(xh=1,cl=function(e){return function(i){return e.apply(null,i)}}),cl}var hl,Ih;function j2(){if(Ih)return hl;Ih=1;var t=Hr;return hl=function(r){return t.isObject(r)&&r.isAxiosError===!0},hl}var Th=Hr,V2=ep,Ka=R2,q2=lp,z2=of;function dp(t){var e=new Ka(t),r=V2(Ka.prototype.request,e);return Th.extend(r,Ka.prototype,e),Th.extend(r,e),r.create=function(u){return dp(q2(t,u))},r}var Vn=dp(z2);Vn.Axios=Ka;Vn.Cancel=Os();Vn.CancelToken=L2();Vn.isCancel=op();Vn.VERSION=fp().version;Vn.all=function(e){return Promise.all(e)};Vn.spread=U2();Vn.isAxiosError=j2();YE.exports=Vn;is.default=Vn;(function(t){t.exports=is})(KE);var tr={},ff={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RequiredError=t.BaseAPI=t.COLLECTION_FORMATS=t.BASE_PATH=void 0;const e=ns;t.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class r{constructor(a,o=t.BASE_PATH,l=e.default){this.basePath=o,this.axios=l,a&&(this.configuration=a,this.basePath=a.basePath||this.basePath)}}t.BaseAPI=r;class i extends Error{constructor(a,o){super(o),this.field=a,this.name="RequiredError"}}t.RequiredError=i})(ff);var cf=lr&&lr.__awaiter||function(t,e,r,i){function u(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(c){try{p(i.next(c))}catch(f){o(f)}}function d(c){try{p(i.throw(c))}catch(f){o(f)}}function p(c){c.done?a(c.value):u(c.value).then(l,d)}p((i=i.apply(t,e||[])).next())})};Object.defineProperty(tr,"__esModule",{value:!0});tr.createRequestFunction=tr.toPathString=tr.serializeDataIfNeeded=tr.setSearchParams=tr.setOAuthToObject=tr.setBearerAuthToObject=tr.setBasicAuthToObject=tr.setApiKeyToObject=tr.assertParamExists=tr.DUMMY_BASE_URL=void 0;const W2=ff;tr.DUMMY_BASE_URL="https://example.com";tr.assertParamExists=function(t,e,r){if(r==null)throw new W2.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};tr.setApiKeyToObject=function(t,e,r){return cf(this,void 0,void 0,function*(){if(r&&r.apiKey){const i=typeof r.apiKey=="function"?yield r.apiKey(e):yield r.apiKey;t[e]=i}})};tr.setBasicAuthToObject=function(t,e){e&&(e.username||e.password)&&(t.auth={username:e.username,password:e.password})};tr.setBearerAuthToObject=function(t,e){return cf(this,void 0,void 0,function*(){if(e&&e.accessToken){const r=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;t.Authorization="Bearer "+r}})};tr.setOAuthToObject=function(t,e,r,i){return cf(this,void 0,void 0,function*(){if(i&&i.accessToken){const u=typeof i.accessToken=="function"?yield i.accessToken(e,r):yield i.accessToken;t.Authorization="Bearer "+u}})};function ql(t,e,r=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(i=>ql(t,i,r)):Object.keys(e).forEach(i=>ql(t,e[i],`${r}${r!==""?".":""}${i}`)):t.has(r)?t.append(r,e):t.set(r,e))}tr.setSearchParams=function(t,...e){const r=new URLSearchParams(t.search);ql(r,e),t.search=r.toString()};tr.serializeDataIfNeeded=function(t,e,r){const i=typeof t!="string";return(i&&r&&r.isJsonMime?r.isJsonMime(e.headers["Content-Type"]):i)?JSON.stringify(t!==void 0?t:{}):t||""};tr.toPathString=function(t){return t.pathname+t.search+t.hash};tr.createRequestFunction=function(t,e,r,i){return(u=e,a=r)=>{const o=Object.assign(Object.assign({},t.options),{url:((i==null?void 0:i.basePath)||a)+t.url});return u.request(o)}};(function(t){var e=lr&&lr.__awaiter||function(o,l,d,p){function c(f){return f instanceof d?f:new d(function(h){h(f)})}return new(d||(d=Promise))(function(f,h){function D(m){try{g(p.next(m))}catch(y){h(y)}}function b(m){try{g(p.throw(m))}catch(y){h(y)}}function g(m){m.done?f(m.value):c(m.value).then(D,b)}g((p=p.apply(o,l||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIApi=t.OpenAIApiFactory=t.OpenAIApiFp=t.OpenAIApiAxiosParamCreator=t.CreateImageRequestResponseFormatEnum=t.CreateImageRequestSizeEnum=t.ChatCompletionResponseMessageRoleEnum=t.ChatCompletionRequestMessageRoleEnum=void 0;const r=ns,i=tr,u=ff;t.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},t.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},t.OpenAIApiAxiosParamCreator=function(o){return{cancelFineTune:(l,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("cancelFineTune","fineTuneId",l);const p="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(l))),c=new URL(p,i.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},f),d),D={},b={};i.setSearchParams(c,b);let g=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},D),g),d.headers),{url:i.toPathString(c),options:h}}),createAnswer:(l,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createAnswer","createAnswerRequest",l);const p="/answers",c=new URL(p,i.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},f),d),D={},b={};D["Content-Type"]="application/json",i.setSearchParams(c,b);let g=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},D),g),d.headers),h.data=i.serializeDataIfNeeded(l,h,o),{url:i.toPathString(c),options:h}}),createChatCompletion:(l,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createChatCompletion","createChatCompletionRequest",l);const p="/chat/completions",c=new URL(p,i.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},f),d),D={},b={};D["Content-Type"]="application/json",i.setSearchParams(c,b);let g=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},D),g),d.headers),h.data=i.serializeDataIfNeeded(l,h,o),{url:i.toPathString(c),options:h}}),createClassification:(l,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createClassification","createClassificationRequest",l);const p="/classifications",c=new URL(p,i.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},f),d),D={},b={};D["Content-Type"]="application/json",i.setSearchParams(c,b);let g=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},D),g),d.headers),h.data=i.serializeDataIfNeeded(l,h,o),{url:i.toPathString(c),options:h}}),createCompletion:(l,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createCompletion","createCompletionRequest",l);const p="/completions",c=new URL(p,i.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},f),d),D={},b={};D["Content-Type"]="application/json",i.setSearchParams(c,b);let g=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},D),g),d.headers),h.data=i.serializeDataIfNeeded(l,h,o),{url:i.toPathString(c),options:h}}),createEdit:(l,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createEdit","createEditRequest",l);const p="/edits",c=new URL(p,i.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},f),d),D={},b={};D["Content-Type"]="application/json",i.setSearchParams(c,b);let g=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},D),g),d.headers),h.data=i.serializeDataIfNeeded(l,h,o),{url:i.toPathString(c),options:h}}),createEmbedding:(l,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createEmbedding","createEmbeddingRequest",l);const p="/embeddings",c=new URL(p,i.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},f),d),D={},b={};D["Content-Type"]="application/json",i.setSearchParams(c,b);let g=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},D),g),d.headers),h.data=i.serializeDataIfNeeded(l,h,o),{url:i.toPathString(c),options:h}}),createFile:(l,d,p={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createFile","file",l),i.assertParamExists("createFile","purpose",d);const c="/files",f=new URL(c,i.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const D=Object.assign(Object.assign({method:"POST"},h),p),b={},g={},m=new(o&&o.formDataCtor||FormData);l!==void 0&&m.append("file",l),d!==void 0&&m.append("purpose",d),b["Content-Type"]="multipart/form-data",i.setSearchParams(f,g);let y=h&&h.headers?h.headers:{};return D.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),m.getHeaders()),y),p.headers),D.data=m,{url:i.toPathString(f),options:D}}),createFineTune:(l,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createFineTune","createFineTuneRequest",l);const p="/fine-tunes",c=new URL(p,i.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},f),d),D={},b={};D["Content-Type"]="application/json",i.setSearchParams(c,b);let g=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},D),g),d.headers),h.data=i.serializeDataIfNeeded(l,h,o),{url:i.toPathString(c),options:h}}),createImage:(l,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createImage","createImageRequest",l);const p="/images/generations",c=new URL(p,i.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},f),d),D={},b={};D["Content-Type"]="application/json",i.setSearchParams(c,b);let g=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},D),g),d.headers),h.data=i.serializeDataIfNeeded(l,h,o),{url:i.toPathString(c),options:h}}),createImageEdit:(l,d,p,c,f,h,D,b={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createImageEdit","image",l),i.assertParamExists("createImageEdit","prompt",d);const g="/images/edits",m=new URL(g,i.DUMMY_BASE_URL);let y;o&&(y=o.baseOptions);const E=Object.assign(Object.assign({method:"POST"},y),b),w={},B={},F=new(o&&o.formDataCtor||FormData);l!==void 0&&F.append("image",l),p!==void 0&&F.append("mask",p),d!==void 0&&F.append("prompt",d),c!==void 0&&F.append("n",c),f!==void 0&&F.append("size",f),h!==void 0&&F.append("response_format",h),D!==void 0&&F.append("user",D),w["Content-Type"]="multipart/form-data",i.setSearchParams(m,B);let O=y&&y.headers?y.headers:{};return E.headers=Object.assign(Object.assign(Object.assign(Object.assign({},w),F.getHeaders()),O),b.headers),E.data=F,{url:i.toPathString(m),options:E}}),createImageVariation:(l,d,p,c,f,h={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createImageVariation","image",l);const D="/images/variations",b=new URL(D,i.DUMMY_BASE_URL);let g;o&&(g=o.baseOptions);const m=Object.assign(Object.assign({method:"POST"},g),h),y={},E={},w=new(o&&o.formDataCtor||FormData);l!==void 0&&w.append("image",l),d!==void 0&&w.append("n",d),p!==void 0&&w.append("size",p),c!==void 0&&w.append("response_format",c),f!==void 0&&w.append("user",f),y["Content-Type"]="multipart/form-data",i.setSearchParams(b,E);let B=g&&g.headers?g.headers:{};return m.headers=Object.assign(Object.assign(Object.assign(Object.assign({},y),w.getHeaders()),B),h.headers),m.data=w,{url:i.toPathString(b),options:m}}),createModeration:(l,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createModeration","createModerationRequest",l);const p="/moderations",c=new URL(p,i.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},f),d),D={},b={};D["Content-Type"]="application/json",i.setSearchParams(c,b);let g=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},D),g),d.headers),h.data=i.serializeDataIfNeeded(l,h,o),{url:i.toPathString(c),options:h}}),createSearch:(l,d,p={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createSearch","engineId",l),i.assertParamExists("createSearch","createSearchRequest",d);const c="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(l))),f=new URL(c,i.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const D=Object.assign(Object.assign({method:"POST"},h),p),b={},g={};b["Content-Type"]="application/json",i.setSearchParams(f,g);let m=h&&h.headers?h.headers:{};return D.headers=Object.assign(Object.assign(Object.assign({},b),m),p.headers),D.data=i.serializeDataIfNeeded(d,D,o),{url:i.toPathString(f),options:D}}),createTranscription:(l,d,p,c,f,h,D={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createTranscription","file",l),i.assertParamExists("createTranscription","model",d);const b="/audio/transcriptions",g=new URL(b,i.DUMMY_BASE_URL);let m;o&&(m=o.baseOptions);const y=Object.assign(Object.assign({method:"POST"},m),D),E={},w={},B=new(o&&o.formDataCtor||FormData);l!==void 0&&B.append("file",l),d!==void 0&&B.append("model",d),p!==void 0&&B.append("prompt",p),c!==void 0&&B.append("response_format",c),f!==void 0&&B.append("temperature",f),h!==void 0&&B.append("language",h),E["Content-Type"]="multipart/form-data",i.setSearchParams(g,w);let F=m&&m.headers?m.headers:{};return y.headers=Object.assign(Object.assign(Object.assign(Object.assign({},E),B.getHeaders()),F),D.headers),y.data=B,{url:i.toPathString(g),options:y}}),createTranslation:(l,d,p,c,f,h={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createTranslation","file",l),i.assertParamExists("createTranslation","model",d);const D="/audio/translations",b=new URL(D,i.DUMMY_BASE_URL);let g;o&&(g=o.baseOptions);const m=Object.assign(Object.assign({method:"POST"},g),h),y={},E={},w=new(o&&o.formDataCtor||FormData);l!==void 0&&w.append("file",l),d!==void 0&&w.append("model",d),p!==void 0&&w.append("prompt",p),c!==void 0&&w.append("response_format",c),f!==void 0&&w.append("temperature",f),y["Content-Type"]="multipart/form-data",i.setSearchParams(b,E);let B=g&&g.headers?g.headers:{};return m.headers=Object.assign(Object.assign(Object.assign(Object.assign({},y),w.getHeaders()),B),h.headers),m.data=w,{url:i.toPathString(b),options:m}}),deleteFile:(l,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("deleteFile","fileId",l);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(l))),c=new URL(p,i.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"DELETE"},f),d),D={},b={};i.setSearchParams(c,b);let g=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},D),g),d.headers),{url:i.toPathString(c),options:h}}),deleteModel:(l,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("deleteModel","model",l);const p="/models/{model}".replace("{model}",encodeURIComponent(String(l))),c=new URL(p,i.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"DELETE"},f),d),D={},b={};i.setSearchParams(c,b);let g=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},D),g),d.headers),{url:i.toPathString(c),options:h}}),downloadFile:(l,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("downloadFile","fileId",l);const p="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(l))),c=new URL(p,i.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),d),D={},b={};i.setSearchParams(c,b);let g=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},D),g),d.headers),{url:i.toPathString(c),options:h}}),listEngines:(l={})=>e(this,void 0,void 0,function*(){const d="/engines",p=new URL(d,i.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),l),h={},D={};i.setSearchParams(p,D);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},h),b),l.headers),{url:i.toPathString(p),options:f}}),listFiles:(l={})=>e(this,void 0,void 0,function*(){const d="/files",p=new URL(d,i.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),l),h={},D={};i.setSearchParams(p,D);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},h),b),l.headers),{url:i.toPathString(p),options:f}}),listFineTuneEvents:(l,d,p={})=>e(this,void 0,void 0,function*(){i.assertParamExists("listFineTuneEvents","fineTuneId",l);const c="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(l))),f=new URL(c,i.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const D=Object.assign(Object.assign({method:"GET"},h),p),b={},g={};d!==void 0&&(g.stream=d),i.setSearchParams(f,g);let m=h&&h.headers?h.headers:{};return D.headers=Object.assign(Object.assign(Object.assign({},b),m),p.headers),{url:i.toPathString(f),options:D}}),listFineTunes:(l={})=>e(this,void 0,void 0,function*(){const d="/fine-tunes",p=new URL(d,i.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),l),h={},D={};i.setSearchParams(p,D);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},h),b),l.headers),{url:i.toPathString(p),options:f}}),listModels:(l={})=>e(this,void 0,void 0,function*(){const d="/models",p=new URL(d,i.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),l),h={},D={};i.setSearchParams(p,D);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},h),b),l.headers),{url:i.toPathString(p),options:f}}),retrieveEngine:(l,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("retrieveEngine","engineId",l);const p="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(l))),c=new URL(p,i.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),d),D={},b={};i.setSearchParams(c,b);let g=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},D),g),d.headers),{url:i.toPathString(c),options:h}}),retrieveFile:(l,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("retrieveFile","fileId",l);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(l))),c=new URL(p,i.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),d),D={},b={};i.setSearchParams(c,b);let g=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},D),g),d.headers),{url:i.toPathString(c),options:h}}),retrieveFineTune:(l,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("retrieveFineTune","fineTuneId",l);const p="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(l))),c=new URL(p,i.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),d),D={},b={};i.setSearchParams(c,b);let g=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},D),g),d.headers),{url:i.toPathString(c),options:h}}),retrieveModel:(l,d={})=>e(this,void 0,void 0,function*(){i.assertParamExists("retrieveModel","model",l);const p="/models/{model}".replace("{model}",encodeURIComponent(String(l))),c=new URL(p,i.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),d),D={},b={};i.setSearchParams(c,b);let g=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},D),g),d.headers),{url:i.toPathString(c),options:h}})}},t.OpenAIApiFp=function(o){const l=t.OpenAIApiAxiosParamCreator(o);return{cancelFineTune(d,p){return e(this,void 0,void 0,function*(){const c=yield l.cancelFineTune(d,p);return i.createRequestFunction(c,r.default,u.BASE_PATH,o)})},createAnswer(d,p){return e(this,void 0,void 0,function*(){const c=yield l.createAnswer(d,p);return i.createRequestFunction(c,r.default,u.BASE_PATH,o)})},createChatCompletion(d,p){return e(this,void 0,void 0,function*(){const c=yield l.createChatCompletion(d,p);return i.createRequestFunction(c,r.default,u.BASE_PATH,o)})},createClassification(d,p){return e(this,void 0,void 0,function*(){const c=yield l.createClassification(d,p);return i.createRequestFunction(c,r.default,u.BASE_PATH,o)})},createCompletion(d,p){return e(this,void 0,void 0,function*(){const c=yield l.createCompletion(d,p);return i.createRequestFunction(c,r.default,u.BASE_PATH,o)})},createEdit(d,p){return e(this,void 0,void 0,function*(){const c=yield l.createEdit(d,p);return i.createRequestFunction(c,r.default,u.BASE_PATH,o)})},createEmbedding(d,p){return e(this,void 0,void 0,function*(){const c=yield l.createEmbedding(d,p);return i.createRequestFunction(c,r.default,u.BASE_PATH,o)})},createFile(d,p,c){return e(this,void 0,void 0,function*(){const f=yield l.createFile(d,p,c);return i.createRequestFunction(f,r.default,u.BASE_PATH,o)})},createFineTune(d,p){return e(this,void 0,void 0,function*(){const c=yield l.createFineTune(d,p);return i.createRequestFunction(c,r.default,u.BASE_PATH,o)})},createImage(d,p){return e(this,void 0,void 0,function*(){const c=yield l.createImage(d,p);return i.createRequestFunction(c,r.default,u.BASE_PATH,o)})},createImageEdit(d,p,c,f,h,D,b,g){return e(this,void 0,void 0,function*(){const m=yield l.createImageEdit(d,p,c,f,h,D,b,g);return i.createRequestFunction(m,r.default,u.BASE_PATH,o)})},createImageVariation(d,p,c,f,h,D){return e(this,void 0,void 0,function*(){const b=yield l.createImageVariation(d,p,c,f,h,D);return i.createRequestFunction(b,r.default,u.BASE_PATH,o)})},createModeration(d,p){return e(this,void 0,void 0,function*(){const c=yield l.createModeration(d,p);return i.createRequestFunction(c,r.default,u.BASE_PATH,o)})},createSearch(d,p,c){return e(this,void 0,void 0,function*(){const f=yield l.createSearch(d,p,c);return i.createRequestFunction(f,r.default,u.BASE_PATH,o)})},createTranscription(d,p,c,f,h,D,b){return e(this,void 0,void 0,function*(){const g=yield l.createTranscription(d,p,c,f,h,D,b);return i.createRequestFunction(g,r.default,u.BASE_PATH,o)})},createTranslation(d,p,c,f,h,D){return e(this,void 0,void 0,function*(){const b=yield l.createTranslation(d,p,c,f,h,D);return i.createRequestFunction(b,r.default,u.BASE_PATH,o)})},deleteFile(d,p){return e(this,void 0,void 0,function*(){const c=yield l.deleteFile(d,p);return i.createRequestFunction(c,r.default,u.BASE_PATH,o)})},deleteModel(d,p){return e(this,void 0,void 0,function*(){const c=yield l.deleteModel(d,p);return i.createRequestFunction(c,r.default,u.BASE_PATH,o)})},downloadFile(d,p){return e(this,void 0,void 0,function*(){const c=yield l.downloadFile(d,p);return i.createRequestFunction(c,r.default,u.BASE_PATH,o)})},listEngines(d){return e(this,void 0,void 0,function*(){const p=yield l.listEngines(d);return i.createRequestFunction(p,r.default,u.BASE_PATH,o)})},listFiles(d){return e(this,void 0,void 0,function*(){const p=yield l.listFiles(d);return i.createRequestFunction(p,r.default,u.BASE_PATH,o)})},listFineTuneEvents(d,p,c){return e(this,void 0,void 0,function*(){const f=yield l.listFineTuneEvents(d,p,c);return i.createRequestFunction(f,r.default,u.BASE_PATH,o)})},listFineTunes(d){return e(this,void 0,void 0,function*(){const p=yield l.listFineTunes(d);return i.createRequestFunction(p,r.default,u.BASE_PATH,o)})},listModels(d){return e(this,void 0,void 0,function*(){const p=yield l.listModels(d);return i.createRequestFunction(p,r.default,u.BASE_PATH,o)})},retrieveEngine(d,p){return e(this,void 0,void 0,function*(){const c=yield l.retrieveEngine(d,p);return i.createRequestFunction(c,r.default,u.BASE_PATH,o)})},retrieveFile(d,p){return e(this,void 0,void 0,function*(){const c=yield l.retrieveFile(d,p);return i.createRequestFunction(c,r.default,u.BASE_PATH,o)})},retrieveFineTune(d,p){return e(this,void 0,void 0,function*(){const c=yield l.retrieveFineTune(d,p);return i.createRequestFunction(c,r.default,u.BASE_PATH,o)})},retrieveModel(d,p){return e(this,void 0,void 0,function*(){const c=yield l.retrieveModel(d,p);return i.createRequestFunction(c,r.default,u.BASE_PATH,o)})}}},t.OpenAIApiFactory=function(o,l,d){const p=t.OpenAIApiFp(o);return{cancelFineTune(c,f){return p.cancelFineTune(c,f).then(h=>h(d,l))},createAnswer(c,f){return p.createAnswer(c,f).then(h=>h(d,l))},createChatCompletion(c,f){return p.createChatCompletion(c,f).then(h=>h(d,l))},createClassification(c,f){return p.createClassification(c,f).then(h=>h(d,l))},createCompletion(c,f){return p.createCompletion(c,f).then(h=>h(d,l))},createEdit(c,f){return p.createEdit(c,f).then(h=>h(d,l))},createEmbedding(c,f){return p.createEmbedding(c,f).then(h=>h(d,l))},createFile(c,f,h){return p.createFile(c,f,h).then(D=>D(d,l))},createFineTune(c,f){return p.createFineTune(c,f).then(h=>h(d,l))},createImage(c,f){return p.createImage(c,f).then(h=>h(d,l))},createImageEdit(c,f,h,D,b,g,m,y){return p.createImageEdit(c,f,h,D,b,g,m,y).then(E=>E(d,l))},createImageVariation(c,f,h,D,b,g){return p.createImageVariation(c,f,h,D,b,g).then(m=>m(d,l))},createModeration(c,f){return p.createModeration(c,f).then(h=>h(d,l))},createSearch(c,f,h){return p.createSearch(c,f,h).then(D=>D(d,l))},createTranscription(c,f,h,D,b,g,m){return p.createTranscription(c,f,h,D,b,g,m).then(y=>y(d,l))},createTranslation(c,f,h,D,b,g){return p.createTranslation(c,f,h,D,b,g).then(m=>m(d,l))},deleteFile(c,f){return p.deleteFile(c,f).then(h=>h(d,l))},deleteModel(c,f){return p.deleteModel(c,f).then(h=>h(d,l))},downloadFile(c,f){return p.downloadFile(c,f).then(h=>h(d,l))},listEngines(c){return p.listEngines(c).then(f=>f(d,l))},listFiles(c){return p.listFiles(c).then(f=>f(d,l))},listFineTuneEvents(c,f,h){return p.listFineTuneEvents(c,f,h).then(D=>D(d,l))},listFineTunes(c){return p.listFineTunes(c).then(f=>f(d,l))},listModels(c){return p.listModels(c).then(f=>f(d,l))},retrieveEngine(c,f){return p.retrieveEngine(c,f).then(h=>h(d,l))},retrieveFile(c,f){return p.retrieveFile(c,f).then(h=>h(d,l))},retrieveFineTune(c,f){return p.retrieveFineTune(c,f).then(h=>h(d,l))},retrieveModel(c,f){return p.retrieveModel(c,f).then(h=>h(d,l))}}};class a extends u.BaseAPI{cancelFineTune(l,d){return t.OpenAIApiFp(this.configuration).cancelFineTune(l,d).then(p=>p(this.axios,this.basePath))}createAnswer(l,d){return t.OpenAIApiFp(this.configuration).createAnswer(l,d).then(p=>p(this.axios,this.basePath))}createChatCompletion(l,d){return t.OpenAIApiFp(this.configuration).createChatCompletion(l,d).then(p=>p(this.axios,this.basePath))}createClassification(l,d){return t.OpenAIApiFp(this.configuration).createClassification(l,d).then(p=>p(this.axios,this.basePath))}createCompletion(l,d){return t.OpenAIApiFp(this.configuration).createCompletion(l,d).then(p=>p(this.axios,this.basePath))}createEdit(l,d){return t.OpenAIApiFp(this.configuration).createEdit(l,d).then(p=>p(this.axios,this.basePath))}createEmbedding(l,d){return t.OpenAIApiFp(this.configuration).createEmbedding(l,d).then(p=>p(this.axios,this.basePath))}createFile(l,d,p){return t.OpenAIApiFp(this.configuration).createFile(l,d,p).then(c=>c(this.axios,this.basePath))}createFineTune(l,d){return t.OpenAIApiFp(this.configuration).createFineTune(l,d).then(p=>p(this.axios,this.basePath))}createImage(l,d){return t.OpenAIApiFp(this.configuration).createImage(l,d).then(p=>p(this.axios,this.basePath))}createImageEdit(l,d,p,c,f,h,D,b){return t.OpenAIApiFp(this.configuration).createImageEdit(l,d,p,c,f,h,D,b).then(g=>g(this.axios,this.basePath))}createImageVariation(l,d,p,c,f,h){return t.OpenAIApiFp(this.configuration).createImageVariation(l,d,p,c,f,h).then(D=>D(this.axios,this.basePath))}createModeration(l,d){return t.OpenAIApiFp(this.configuration).createModeration(l,d).then(p=>p(this.axios,this.basePath))}createSearch(l,d,p){return t.OpenAIApiFp(this.configuration).createSearch(l,d,p).then(c=>c(this.axios,this.basePath))}createTranscription(l,d,p,c,f,h,D){return t.OpenAIApiFp(this.configuration).createTranscription(l,d,p,c,f,h,D).then(b=>b(this.axios,this.basePath))}createTranslation(l,d,p,c,f,h){return t.OpenAIApiFp(this.configuration).createTranslation(l,d,p,c,f,h).then(D=>D(this.axios,this.basePath))}deleteFile(l,d){return t.OpenAIApiFp(this.configuration).deleteFile(l,d).then(p=>p(this.axios,this.basePath))}deleteModel(l,d){return t.OpenAIApiFp(this.configuration).deleteModel(l,d).then(p=>p(this.axios,this.basePath))}downloadFile(l,d){return t.OpenAIApiFp(this.configuration).downloadFile(l,d).then(p=>p(this.axios,this.basePath))}listEngines(l){return t.OpenAIApiFp(this.configuration).listEngines(l).then(d=>d(this.axios,this.basePath))}listFiles(l){return t.OpenAIApiFp(this.configuration).listFiles(l).then(d=>d(this.axios,this.basePath))}listFineTuneEvents(l,d,p){return t.OpenAIApiFp(this.configuration).listFineTuneEvents(l,d,p).then(c=>c(this.axios,this.basePath))}listFineTunes(l){return t.OpenAIApiFp(this.configuration).listFineTunes(l).then(d=>d(this.axios,this.basePath))}listModels(l){return t.OpenAIApiFp(this.configuration).listModels(l).then(d=>d(this.axios,this.basePath))}retrieveEngine(l,d){return t.OpenAIApiFp(this.configuration).retrieveEngine(l,d).then(p=>p(this.axios,this.basePath))}retrieveFile(l,d){return t.OpenAIApiFp(this.configuration).retrieveFile(l,d).then(p=>p(this.axios,this.basePath))}retrieveFineTune(l,d){return t.OpenAIApiFp(this.configuration).retrieveFineTune(l,d).then(p=>p(this.axios,this.basePath))}retrieveModel(l,d){return t.OpenAIApiFp(this.configuration).retrieveModel(l,d).then(p=>p(this.axios,this.basePath))}}t.OpenAIApi=a})(Qd);var xs={};const H2="openai",G2="3.2.1",K2="Node.js library for the OpenAI API",Y2={type:"git",url:"git@github.com:openai/openai-node.git"},$2=["openai","open","ai","gpt-3","gpt3"],Z2="OpenAI",X2="MIT",J2="./dist/index.js",Q2="./dist/index.d.ts",eF={build:"tsc --outDir dist/"},tF={axios:"^0.26.0","form-data":"^4.0.0"},rF={"@types/node":"^12.11.5",typescript:"^3.6.4"},nF={name:H2,version:G2,description:K2,repository:Y2,keywords:$2,author:Z2,license:X2,main:J2,types:Q2,scripts:eF,dependencies:tF,devDependencies:rF};var dl,Nh;function iF(){return Nh||(Nh=1,dl=typeof self=="object"?self.FormData:window.FormData),dl}Object.defineProperty(xs,"__esModule",{value:!0});xs.Configuration=void 0;const uF=nF;class aF{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${uF.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=iF())}isJsonMime(e){const r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(r.test(e)||e.toLowerCase()==="application/json-patch+json")}}xs.Configuration=aF;(function(t){var e=lr&&lr.__createBinding||(Object.create?function(i,u,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return u[a]}})}:function(i,u,a,o){o===void 0&&(o=a),i[o]=u[a]}),r=lr&&lr.__exportStar||function(i,u){for(var a in i)a!=="default"&&!u.hasOwnProperty(a)&&e(u,i,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Qd,t),r(xs,t)})(Ul);function hf(t){const e=new Ul.Configuration({apiKey:t});return new Ul.OpenAIApi(e)}async function sF(t,e,r="text-davinci-003"){return await t.createCompletion({model:r,prompt:e,temperature:.8,max_tokens:250})}async function oF(t,e,r="gpt-3.5-turbo"){return await t.createChatCompletion({model:r,messages:[{role:"user",content:e}],temperature:.8,max_tokens:250})}async function lF(t,e,r="text-embedding-ada-002"){return await t.createEmbedding({model:r,input:e})}async function fF(t){return await t.listModels()}const pl="preferredEmbeddingModelStore";function cF(){const t=On(""),{subscribe:e,set:r,update:i}=t,u=typeof window<"u";return r(u&&localStorage[pl]||""),{subscribe:e,updateEmbeddingModel:a=>{!a||!u||(localStorage[pl]=a,r(a))},getEmbeddingModel:()=>Lt(t),deleteEmbeddingModel:()=>{u&&(delete localStorage[pl],r(""))}}}const zl=cF(),pp=Bn(zl,t=>Lt(zl)),vl="oKeyStore";function hF(){const t=On(""),{subscribe:e,set:r,update:i}=t,u=typeof window<"u";return r(u&&localStorage[vl]||""),{subscribe:e,updateKey:a=>{!a||!u||(localStorage[vl]=a,r(a))},getKey:()=>Lt(t),deleteKey:()=>{u&&(delete localStorage[vl],r(""))}}}const us=hF(),df=Bn(us,t=>Lt(us));var as={},dF={get exports(){return as},set exports(t){as=t}},ss={},pF={get exports(){return ss},set exports(t){ss=t}},lu=typeof Reflect=="object"?Reflect:null,kh=lu&&typeof lu.apply=="function"?lu.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},Ya;lu&&typeof lu.ownKeys=="function"?Ya=lu.ownKeys:Object.getOwnPropertySymbols?Ya=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ya=function(e){return Object.getOwnPropertyNames(e)};function vF(t){console&&console.warn&&console.warn(t)}var vp=Number.isNaN||function(e){return e!==e};function St(){St.init.call(this)}pF.exports=St;ss.once=_F;St.EventEmitter=St;St.prototype._events=void 0;St.prototype._eventsCount=0;St.prototype._maxListeners=void 0;var Rh=10;function Is(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(St,"defaultMaxListeners",{enumerable:!0,get:function(){return Rh},set:function(t){if(typeof t!="number"||t<0||vp(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Rh=t}});St.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};St.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||vp(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function gp(t){return t._maxListeners===void 0?St.defaultMaxListeners:t._maxListeners}St.prototype.getMaxListeners=function(){return gp(this)};St.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var u=e==="error",a=this._events;if(a!==void 0)u=u&&a.error===void 0;else if(!u)return!1;if(u){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var l=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw l.context=o,l}var d=a[e];if(d===void 0)return!1;if(typeof d=="function")kh(d,this,r);else for(var p=d.length,c=bp(d,p),i=0;i<p;++i)kh(c[i],this,r);return!0};function mp(t,e,r,i){var u,a,o;if(Is(r),a=t._events,a===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),o=a[e]),o===void 0)o=a[e]=r,++t._eventsCount;else if(typeof o=="function"?o=a[e]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),u=gp(t),u>0&&o.length>u&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=o.length,vF(l)}return t}St.prototype.addListener=function(e,r){return mp(this,e,r,!1)};St.prototype.on=St.prototype.addListener;St.prototype.prependListener=function(e,r){return mp(this,e,r,!0)};function gF(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Dp(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},u=gF.bind(i);return u.listener=r,i.wrapFn=u,u}St.prototype.once=function(e,r){return Is(r),this.on(e,Dp(this,e,r)),this};St.prototype.prependOnceListener=function(e,r){return Is(r),this.prependListener(e,Dp(this,e,r)),this};St.prototype.removeListener=function(e,r){var i,u,a,o,l;if(Is(r),u=this._events,u===void 0)return this;if(i=u[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete u[e],u.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(a=-1,o=i.length-1;o>=0;o--)if(i[o]===r||i[o].listener===r){l=i[o].listener,a=o;break}if(a<0)return this;a===0?i.shift():mF(i,a),i.length===1&&(u[e]=i[0]),u.removeListener!==void 0&&this.emit("removeListener",e,l||r)}return this};St.prototype.off=St.prototype.removeListener;St.prototype.removeAllListeners=function(e){var r,i,u;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var a=Object.keys(i),o;for(u=0;u<a.length;++u)o=a[u],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(u=r.length-1;u>=0;u--)this.removeListener(e,r[u]);return this};function _p(t,e,r){var i=t._events;if(i===void 0)return[];var u=i[e];return u===void 0?[]:typeof u=="function"?r?[u.listener||u]:[u]:r?DF(u):bp(u,u.length)}St.prototype.listeners=function(e){return _p(this,e,!0)};St.prototype.rawListeners=function(e){return _p(this,e,!1)};St.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):yp.call(t,e)};St.prototype.listenerCount=yp;function yp(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}St.prototype.eventNames=function(){return this._eventsCount>0?Ya(this._events):[]};function bp(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function mF(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function DF(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function _F(t,e){return new Promise(function(r,i){function u(o){t.removeListener(e,a),i(o)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",u),r([].slice.call(arguments))}Ap(t,e,a,{once:!0}),e!=="error"&&yF(t,u,{once:!0})})}function yF(t,e,r){typeof t.on=="function"&&Ap(t,"error",e,r)}function Ap(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function u(a){i.once&&t.removeEventListener(e,u),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}function bF(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}var AF=bF;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var wF=function(t){return t!=null&&(wp(t)||EF(t)||!!t._isBuffer)};function wp(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function EF(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&wp(t.slice(0,0))}var FF=AF,CF=wF,SF=typeof Float64Array<"u";function BF(t,e){return t[0]-e[0]}function OF(){var t=this.stride,e=new Array(t.length),r;for(r=0;r<e.length;++r)e[r]=[Math.abs(t[r]),r];e.sort(BF);var i=new Array(e.length);for(r=0;r<i.length;++r)i[r]=e[r][1];return i}function MF(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var i=t==="generic";if(e===-1){var u="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",g=new Function(u);return g()}else if(e===0){var u="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",g=new Function("TrivialArray",u);return g(os[t][0])}var u=["'use strict'"],a=FF(e),o=a.map(function(m){return"i"+m}),l="this.offset+"+a.map(function(m){return"this.stride["+m+"]*i"+m}).join("+"),d=a.map(function(m){return"b"+m}).join(","),p=a.map(function(m){return"c"+m}).join(",");u.push("function "+r+"(a,"+d+","+p+",d){this.data=a","this.shape=["+d+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),u.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(m){return"this.shape["+m+"]"}).join("*"),"}})"),e===1?u.push("proto.order=[0]"):(u.push("Object.defineProperty(proto,'order',{get:"),e<4?(u.push("function "+r+"_order(){"),e===2?u.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&u.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):u.push("ORDER})")),u.push("proto.set=function "+r+"_set("+o.join(",")+",v){"),i?u.push("return this.data.set("+l+",v)}"):u.push("return this.data["+l+"]=v}"),u.push("proto.get=function "+r+"_get("+o.join(",")+"){"),i?u.push("return this.data.get("+l+")}"):u.push("return this.data["+l+"]}"),u.push("proto.index=function "+r+"_index(",o.join(),"){return "+l+"}"),u.push("proto.hi=function "+r+"_hi("+o.join(",")+"){return new "+r+"(this.data,"+a.map(function(m){return["(typeof i",m,"!=='number'||i",m,"<0)?this.shape[",m,"]:i",m,"|0"].join("")}).join(",")+","+a.map(function(m){return"this.stride["+m+"]"}).join(",")+",this.offset)}");var c=a.map(function(m){return"a"+m+"=this.shape["+m+"]"}),f=a.map(function(m){return"c"+m+"=this.stride["+m+"]"});u.push("proto.lo=function "+r+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+c.join(",")+","+f.join(","));for(var h=0;h<e;++h)u.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");u.push("return new "+r+"(this.data,"+a.map(function(m){return"a"+m}).join(",")+","+a.map(function(m){return"c"+m}).join(",")+",b)}"),u.push("proto.step=function "+r+"_step("+o.join(",")+"){var "+a.map(function(m){return"a"+m+"=this.shape["+m+"]"}).join(",")+","+a.map(function(m){return"b"+m+"=this.stride["+m+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var h=0;h<e;++h)u.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");u.push("return new "+r+"(this.data,"+a.map(function(m){return"a"+m}).join(",")+","+a.map(function(m){return"b"+m}).join(",")+",c)}");for(var D=new Array(e),b=new Array(e),h=0;h<e;++h)D[h]="a[i"+h+"]",b[h]="b[i"+h+"]";u.push("proto.transpose=function "+r+"_transpose("+o+"){"+o.map(function(m,y){return m+"=("+m+"===undefined?"+y+":"+m+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+D.join(",")+","+b.join(",")+",this.offset)}"),u.push("proto.pick=function "+r+"_pick("+o+"){var a=[],b=[],c=this.offset");for(var h=0;h<e;++h)u.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");u.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),u.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(m){return"shape["+m+"]"}).join(",")+","+a.map(function(m){return"stride["+m+"]"}).join(",")+",offset)}");var g=new Function("CTOR_LIST","ORDER",u.join(`
`));return g(os[t],OF)}function PF(t){if(CF(t))return"buffer";if(SF)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var os={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function xF(t,e,r,i){if(t===void 0){var p=os.array[0];return p([])}else typeof t=="number"&&(t=[t]);e===void 0&&(e=[t.length]);var u=e.length;if(r===void 0){r=new Array(u);for(var a=u-1,o=1;a>=0;--a)r[a]=o,o*=e[a]}if(i===void 0){i=0;for(var a=0;a<u;++a)r[a]<0&&(i-=(e[a]-1)*r[a])}for(var l=PF(t),d=os[l];d.length<=u+1;)d.push(MF(l,d.length-1));var p=d[u+1];return p(t,e,r,i)}var vu=xF,Ts={};function IF(t,e){for(var r=1,i=t.length,u=t[0],a=t[0],o=1;o<i;++o)if(a=u,u=t[o],e(u,a)){if(o===r){r++;continue}t[r++]=u}return t.length=r,t}function TF(t){for(var e=1,r=t.length,i=t[0],u=t[0],a=1;a<r;++a,u=i)if(u=i,i=t[a],i!==u){if(a===e){e++;continue}t[e++]=i}return t.length=e,t}function NF(t,e,r){return t.length===0?t:e?(r||t.sort(e),IF(t,e)):(r||t.sort(),TF(t))}var Ep=NF,kF=Ep;function Fp(t,e,r){var i=t.length,u=e.arrayArgs.length,a=e.indexArgs.length>0,o=[],l=[],d=0,p=0,c,f;for(c=0;c<i;++c)l.push(["i",c,"=0"].join(""));for(f=0;f<u;++f)for(c=0;c<i;++c)p=d,d=t[c],c===0?l.push(["d",f,"s",c,"=t",f,"p",d].join("")):l.push(["d",f,"s",c,"=(t",f,"p",d,"-s",p,"*t",f,"p",p,")"].join(""));for(l.length>0&&o.push("var "+l.join(",")),c=i-1;c>=0;--c)d=t[c],o.push(["for(i",c,"=0;i",c,"<s",d,";++i",c,"){"].join(""));for(o.push(r),c=0;c<i;++c){for(p=d,d=t[c],f=0;f<u;++f)o.push(["p",f,"+=d",f,"s",c].join(""));a&&(c>0&&o.push(["index[",p,"]-=s",p].join("")),o.push(["++index[",d,"]"].join(""))),o.push("}")}return o.join(`
`)}function RF(t,e,r,i){for(var u=e.length,a=r.arrayArgs.length,o=r.blockSize,l=r.indexArgs.length>0,d=[],p=0;p<a;++p)d.push(["var offset",p,"=p",p].join(""));for(var p=t;p<u;++p)d.push(["for(var j"+p+"=SS[",e[p],"]|0;j",p,">0;){"].join("")),d.push(["if(j",p,"<",o,"){"].join("")),d.push(["s",e[p],"=j",p].join("")),d.push(["j",p,"=0"].join("")),d.push(["}else{s",e[p],"=",o].join("")),d.push(["j",p,"-=",o,"}"].join("")),l&&d.push(["index[",e[p],"]=j",p].join(""));for(var p=0;p<a;++p){for(var c=["offset"+p],f=t;f<u;++f)c.push(["j",f,"*t",p,"p",e[f]].join(""));d.push(["p",p,"=(",c.join("+"),")"].join(""))}d.push(Fp(e,r,i));for(var p=t;p<u;++p)d.push("}");return d.join(`
`)}function LF(t){for(var e=0,r=t[0].length;e<r;){for(var i=1;i<t.length;++i)if(t[i][e]!==t[0][e])return e;++e}return e}function gl(t,e,r){for(var i=t.body,u=[],a=[],o=0;o<t.args.length;++o){var l=t.args[o];if(!(l.count<=0)){var d=new RegExp(l.name,"g"),p="",c=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var f=e.offsetArgIndex.indexOf(o),h=e.offsetArgs[f];c=h.array,p="+q"+f;case"array":p="p"+c+p;var D="l"+o,b="a"+c;if(e.arrayBlockIndices[c]===0)l.count===1?r[c]==="generic"?l.lvalue?(u.push(["var ",D,"=",b,".get(",p,")"].join("")),i=i.replace(d,D),a.push([b,".set(",p,",",D,")"].join(""))):i=i.replace(d,[b,".get(",p,")"].join("")):i=i.replace(d,[b,"[",p,"]"].join("")):r[c]==="generic"?(u.push(["var ",D,"=",b,".get(",p,")"].join("")),i=i.replace(d,D),l.lvalue&&a.push([b,".set(",p,",",D,")"].join(""))):(u.push(["var ",D,"=",b,"[",p,"]"].join("")),i=i.replace(d,D),l.lvalue&&a.push([b,"[",p,"]=",D].join("")));else{for(var g=[l.name],m=[p],y=0;y<Math.abs(e.arrayBlockIndices[c]);y++)g.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(y+1)+"*t"+c+"b"+y);if(d=new RegExp(g.join(""),"g"),p=m.join("+"),r[c]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");i=i.replace(d,[b,"[",p,"]"].join(""))}break;case"scalar":i=i.replace(d,"Y"+e.scalarArgs.indexOf(o));break;case"index":i=i.replace(d,"index");break;case"shape":i=i.replace(d,"shape");break}}}return[u.join(`
`),i,a.join(`
`)].join(`
`).trim()}function UF(t){for(var e=new Array(t.length),r=!0,i=0;i<t.length;++i){var u=t[i],a=u.match(/\d+/);a?a=a[0]:a="",u.charAt(0)===0?e[i]="u"+u.charAt(1)+a:e[i]=u.charAt(0)+a,i>0&&(r=r&&e[i]===e[i-1])}return r?e[0]:e.join("")}function jF(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,i=new Array(t.arrayArgs.length),u=new Array(t.arrayArgs.length),a=0;a<t.arrayArgs.length;++a)u[a]=e[2*a],i[a]=e[2*a+1];for(var o=[],l=[],d=[],p=[],c=[],a=0;a<t.arrayArgs.length;++a){t.arrayBlockIndices[a]<0?(d.push(0),p.push(r),o.push(r),l.push(r+t.arrayBlockIndices[a])):(d.push(t.arrayBlockIndices[a]),p.push(t.arrayBlockIndices[a]+r),o.push(0),l.push(t.arrayBlockIndices[a]));for(var f=[],h=0;h<i[a].length;h++)d[a]<=i[a][h]&&i[a][h]<p[a]&&f.push(i[a][h]-d[a]);c.push(f)}for(var D=["SS"],b=["'use strict'"],g=[],h=0;h<r;++h)g.push(["s",h,"=SS[",h,"]"].join(""));for(var a=0;a<t.arrayArgs.length;++a){D.push("a"+a),D.push("t"+a),D.push("p"+a);for(var h=0;h<r;++h)g.push(["t",a,"p",h,"=t",a,"[",d[a]+h,"]"].join(""));for(var h=0;h<Math.abs(t.arrayBlockIndices[a]);++h)g.push(["t",a,"b",h,"=t",a,"[",o[a]+h,"]"].join(""))}for(var a=0;a<t.scalarArgs.length;++a)D.push("Y"+a);if(t.shapeArgs.length>0&&g.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var m=new Array(r),a=0;a<r;++a)m[a]="0";g.push(["index=[",m.join(","),"]"].join(""))}for(var a=0;a<t.offsetArgs.length;++a){for(var y=t.offsetArgs[a],E=[],h=0;h<y.offset.length;++h)y.offset[h]!==0&&(y.offset[h]===1?E.push(["t",y.array,"p",h].join("")):E.push([y.offset[h],"*t",y.array,"p",h].join("")));E.length===0?g.push("q"+a+"=0"):g.push(["q",a,"=",E.join("+")].join(""))}var w=kF([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));g=g.concat(w),g.length>0&&b.push("var "+g.join(","));for(var a=0;a<t.arrayArgs.length;++a)b.push("p"+a+"|=0");t.pre.body.length>3&&b.push(gl(t.pre,t,u));var B=gl(t.body,t,u),F=LF(c);F<r?b.push(RF(F,c[0],t,B)):b.push(Fp(c[0],t,B)),t.post.body.length>3&&b.push(gl(t.post,t,u)),t.debug&&console.log("-----Generated cwise routine for ",e,`:
`+b.join(`
`)+`
----------`);var O=[t.funcName||"unnamed","_cwise_loop_",i[0].join("s"),"m",F,UF(u)].join(""),P=new Function(["function ",O,"(",D.join(","),"){",b.join(`
`),"} return ",O].join(""));return P()}var VF=jF,qF=VF;function zF(t){var e=["'use strict'","var CACHED={}"],r=[],i=t.funcName+"_cwise_thunk";e.push(["return function ",i,"(",t.shimArgs.join(","),"){"].join(""));for(var u=[],a=[],o=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],l=[],d=[],p=0;p<t.arrayArgs.length;++p){var c=t.arrayArgs[p];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),u.push("t"+c),u.push("r"+c),a.push("t"+c),a.push("r"+c+".join()"),o.push("array"+c+".data"),o.push("array"+c+".stride"),o.push("array"+c+".offset|0"),p>0&&(l.push("array"+t.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[p]))),d.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[p])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+d.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var p=0;p<t.scalarArgs.length;++p)o.push("scalar"+t.scalarArgs[p]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",u.join(","),"])}","return proc(",o.join(","),")}"].join("")),t.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var f=new Function("compile",e.join(`
`));return f(qF.bind(void 0,t))}var WF=zF,HF=WF;function GF(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function KF(t){var e=new GF;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var i=0;i<r.length;++i){var u=r[i];if(u==="array"||typeof u=="object"&&u.blockIndices){if(e.argTypes[i]="array",e.arrayArgs.push(i),e.arrayBlockIndices.push(u.blockIndices?u.blockIndices:0),e.shimArgs.push("array"+i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if(u==="scalar")e.scalarArgs.push(i),e.shimArgs.push("scalar"+i);else if(u==="index"){if(e.indexArgs.push(i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if(u==="shape"){if(e.shapeArgs.push(i),i<e.pre.args.length&&e.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<e.post.args.length&&e.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof u=="object"&&u.offset)e.argTypes[i]="offset",e.offsetArgs.push({array:u.array,offset:u.offset}),e.offsetArgIndex.push(i);else throw new Error("cwise: Unknown argument type "+r[i])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,HF(e)}var pf=KF;(function(t){var e=pf,r={body:"",args:[],thisVars:[],localVars:[]};function i(h){if(!h)return r;for(var D=0;D<h.args.length;++D){var b=h.args[D];D===0?h.args[D]={name:b,lvalue:!0,rvalue:!!h.rvalue,count:h.count||1}:h.args[D]={name:b,lvalue:!1,rvalue:!0,count:1}}return h.thisVars||(h.thisVars=[]),h.localVars||(h.localVars=[]),h}function u(h){return e({args:h.args,pre:i(h.pre),body:i(h.body),post:i(h.proc),funcName:h.funcName})}function a(h){for(var D=[],b=0;b<h.args.length;++b)D.push("a"+b);var g=new Function("P",["return function ",h.funcName,"_ndarrayops(",D.join(","),") {P(",D.join(","),");return a0}"].join(""));return g(u(h))}var o={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var h in o){var D=o[h];t[h]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+D+"c"},funcName:h}),t[h+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+D+"=b"},rvalue:!0,funcName:h+"eq"}),t[h+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+D+"s"},funcName:h+"s"}),t[h+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+D+"=s"},rvalue:!0,funcName:h+"seq"})}})();var l={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var h in l){var D=l[h];t[h]=a({args:["array","array"],body:{args:["a","b"],body:"a="+D+"b"},funcName:h}),t[h+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+D+"a"},rvalue:!0,count:2,funcName:h+"eq"})}})();var d={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var h in d){var D=d[h];t[h]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+D+"c"},funcName:h}),t[h+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+D+"s"},funcName:h+"s"}),t[h+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+D+"b"},rvalue:!0,count:2,funcName:h+"eq"}),t[h+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+D+"s"},rvalue:!0,count:2,funcName:h+"seq"})}})();var p=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var h=0;h<p.length;++h){var D=p[h];t[D]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+D,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:D}),t[D+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+D,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:D+"eq"})}})();var c=["max","min","atan2","pow"];(function(){for(var h=0;h<c.length;++h){var D=c[h];t[D]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+D,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:D}),t[D+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+D,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:D+"s"}),t[D+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+D,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:D+"eq"}),t[D+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+D,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:D+"seq"})}})();var f=["atan2","pow"];(function(){for(var h=0;h<f.length;++h){var D=f[h];t[D+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+D,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:D+"op"}),t[D+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+D,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:D+"ops"}),t[D+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+D,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:D+"opeq"}),t[D+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+D,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:D+"opseq"})}})(),t.any=e({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=e({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=e({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(Ts);var YF=pf({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64}),Lh=vu,$F=YF,ZF=function(e,r){for(var i=[],u=e,a=1;Array.isArray(u);)i.push(u.length),a*=u.length,u=u[0];return i.length===0?Lh():(r||(r=Lh(new Float64Array(a),i)),$F(r,e),r)};function Cp(t,e,r){var i=t[r]|0;if(i<=0)return[];var u=new Array(i),a;if(r===t.length-1)for(a=0;a<i;++a)u[a]=e;else for(a=0;a<i;++a)u[a]=Cp(t,e,r+1);return u}function XF(t,e){var r,i;for(r=new Array(t),i=0;i<t;++i)r[i]=e;return r}function JF(t,e){switch(typeof e>"u"&&(e=0),typeof t){case"number":if(t>0)return XF(t|0,e);break;case"object":if(typeof t.length=="number")return Cp(t,e,0);break}return[]}var QF=JF,Sp={};(function(t){(function(e,r){r(t)})(lr,function(e){var r,i,u,a,o,l,d,p,c,f,h,D,b,g,m,y,E,w;r={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},i={},i[r.BooleanLiteral]="Boolean",i[r.EOF]="<end>",i[r.Identifier]="Identifier",i[r.Keyword]="Keyword",i[r.NullLiteral]="Null",i[r.NumericLiteral]="Numeric",i[r.Punctuator]="Punctuator",i[r.StringLiteral]="String",i[r.RegularExpression]="RegularExpression",u=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},o={Data:1,Get:2,Set:4},l={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},d={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function B(_,C){if(!_)throw new Error("ASSERT: "+C)}function F(_){return _>=48&&_<=57}function O(_){return"0123456789abcdefABCDEF".indexOf(_)>=0}function P(_){return"01234567".indexOf(_)>=0}function I(_){return _===32||_===9||_===11||_===12||_===160||_>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(_)>=0}function N(_){return _===10||_===13||_===8232||_===8233}function W(_){return _===36||_===95||_>=65&&_<=90||_>=97&&_<=122||_===92||_>=128&&d.NonAsciiIdentifierStart.test(String.fromCharCode(_))}function $(_){return _===36||_===95||_>=65&&_<=90||_>=97&&_<=122||_>=48&&_<=57||_===92||_>=128&&d.NonAsciiIdentifierPart.test(String.fromCharCode(_))}function K(_){switch(_){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function q(_){switch(_){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function G(_){return _==="eval"||_==="arguments"}function L(_){if(f&&q(_))return!0;switch(_.length){case 2:return _==="if"||_==="in"||_==="do";case 3:return _==="var"||_==="for"||_==="new"||_==="try"||_==="let";case 4:return _==="this"||_==="else"||_==="case"||_==="void"||_==="with"||_==="enum";case 5:return _==="while"||_==="break"||_==="catch"||_==="throw"||_==="const"||_==="yield"||_==="class"||_==="super";case 6:return _==="return"||_==="typeof"||_==="delete"||_==="switch"||_==="export"||_==="import";case 7:return _==="default"||_==="finally"||_==="extends";case 8:return _==="function"||_==="continue"||_==="debugger";case 10:return _==="instanceof";default:return!1}}function z(_,C,k,Z,ce){var Ee;B(typeof k=="number","Comment must have valid position"),!(E.lastCommentStart>=k)&&(E.lastCommentStart=k,Ee={type:_,value:C},w.range&&(Ee.range=[k,Z]),w.loc&&(Ee.loc=ce),w.comments.push(Ee),w.attachComment&&(w.leadingComments.push(Ee),w.trailingComments.push(Ee)))}function te(_){var C,k,Z,ce;for(C=h-_,k={start:{line:D,column:h-b-_}};h<g;)if(Z=c.charCodeAt(h),++h,N(Z)){w.comments&&(ce=c.slice(C+_,h-1),k.end={line:D,column:h-b-1},z("Line",ce,C,h-1,k)),Z===13&&c.charCodeAt(h)===10&&++h,++D,b=h;return}w.comments&&(ce=c.slice(C+_,h),k.end={line:D,column:h-b},z("Line",ce,C,h,k))}function le(){var _,C,k,Z;for(w.comments&&(_=h-2,C={start:{line:D,column:h-b-2}});h<g;)if(k=c.charCodeAt(h),N(k))k===13&&c.charCodeAt(h+1)===10&&++h,++D,++h,b=h,h>=g&&j({},l.UnexpectedToken,"ILLEGAL");else if(k===42){if(c.charCodeAt(h+1)===47){++h,++h,w.comments&&(Z=c.slice(_+2,h-2),C.end={line:D,column:h-b},z("Block",Z,_,h,C));return}++h}else++h;j({},l.UnexpectedToken,"ILLEGAL")}function ve(){var _,C;for(C=h===0;h<g;)if(_=c.charCodeAt(h),I(_))++h;else if(N(_))++h,_===13&&c.charCodeAt(h)===10&&++h,++D,b=h,C=!0;else if(_===47)if(_=c.charCodeAt(h+1),_===47)++h,++h,te(2),C=!0;else if(_===42)++h,++h,le();else break;else if(C&&_===45)if(c.charCodeAt(h+1)===45&&c.charCodeAt(h+2)===62)h+=3,te(3);else break;else if(_===60)if(c.slice(h+1,h+4)==="!--")++h,++h,++h,++h,te(4);else break;else break}function ye(_){var C,k,Z,ce=0;for(k=_==="u"?4:2,C=0;C<k;++C)if(h<g&&O(c[h]))Z=c[h++],ce=ce*16+"0123456789abcdef".indexOf(Z.toLowerCase());else return"";return String.fromCharCode(ce)}function Se(){var _,C;for(_=c.charCodeAt(h++),C=String.fromCharCode(_),_===92&&(c.charCodeAt(h)!==117&&j({},l.UnexpectedToken,"ILLEGAL"),++h,_=ye("u"),(!_||_==="\\"||!W(_.charCodeAt(0)))&&j({},l.UnexpectedToken,"ILLEGAL"),C=_);h<g&&(_=c.charCodeAt(h),!!$(_));)++h,C+=String.fromCharCode(_),_===92&&(C=C.substr(0,C.length-1),c.charCodeAt(h)!==117&&j({},l.UnexpectedToken,"ILLEGAL"),++h,_=ye("u"),(!_||_==="\\"||!$(_.charCodeAt(0)))&&j({},l.UnexpectedToken,"ILLEGAL"),C+=_);return C}function xe(){var _,C;for(_=h++;h<g;){if(C=c.charCodeAt(h),C===92)return h=_,Se();if($(C))++h;else break}return c.slice(_,h)}function Fe(){var _,C,k;return _=h,C=c.charCodeAt(h)===92?Se():xe(),C.length===1?k=r.Identifier:L(C)?k=r.Keyword:C==="null"?k=r.NullLiteral:C==="true"||C==="false"?k=r.BooleanLiteral:k=r.Identifier,{type:k,value:C,lineNumber:D,lineStart:b,start:_,end:h}}function Ne(){var _=h,C=c.charCodeAt(h),k,Z=c[h],ce,Ee,et;switch(C){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++h,w.tokenize&&(C===40?w.openParenToken=w.tokens.length:C===123&&(w.openCurlyToken=w.tokens.length)),{type:r.Punctuator,value:String.fromCharCode(C),lineNumber:D,lineStart:b,start:_,end:h};default:if(k=c.charCodeAt(h+1),k===61)switch(C){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return h+=2,{type:r.Punctuator,value:String.fromCharCode(C)+String.fromCharCode(k),lineNumber:D,lineStart:b,start:_,end:h};case 33:case 61:return h+=2,c.charCodeAt(h)===61&&++h,{type:r.Punctuator,value:c.slice(_,h),lineNumber:D,lineStart:b,start:_,end:h}}}if(et=c.substr(h,4),et===">>>=")return h+=4,{type:r.Punctuator,value:et,lineNumber:D,lineStart:b,start:_,end:h};if(Ee=et.substr(0,3),Ee===">>>"||Ee==="<<="||Ee===">>=")return h+=3,{type:r.Punctuator,value:Ee,lineNumber:D,lineStart:b,start:_,end:h};if(ce=Ee.substr(0,2),Z===ce[1]&&"+-<>&|".indexOf(Z)>=0||ce==="=>")return h+=2,{type:r.Punctuator,value:ce,lineNumber:D,lineStart:b,start:_,end:h};if("<>=!+-*%&|^/".indexOf(Z)>=0)return++h,{type:r.Punctuator,value:Z,lineNumber:D,lineStart:b,start:_,end:h};j({},l.UnexpectedToken,"ILLEGAL")}function ke(_){for(var C="";h<g&&O(c[h]);)C+=c[h++];return C.length===0&&j({},l.UnexpectedToken,"ILLEGAL"),W(c.charCodeAt(h))&&j({},l.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt("0x"+C,16),lineNumber:D,lineStart:b,start:_,end:h}}function Ue(_){for(var C="0"+c[h++];h<g&&P(c[h]);)C+=c[h++];return(W(c.charCodeAt(h))||F(c.charCodeAt(h)))&&j({},l.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt(C,8),octal:!0,lineNumber:D,lineStart:b,start:_,end:h}}function at(){var _,C;for(_=h+1;_<g;++_){if(C=c[_],C==="8"||C==="9")return!1;if(!P(C))return!0}return!0}function vt(){var _,C,k;if(k=c[h],B(F(k.charCodeAt(0))||k===".","Numeric literal must start with a decimal digit or a decimal point"),C=h,_="",k!=="."){if(_=c[h++],k=c[h],_==="0"){if(k==="x"||k==="X")return++h,ke(C);if(P(k)&&at())return Ue(C)}for(;F(c.charCodeAt(h));)_+=c[h++];k=c[h]}if(k==="."){for(_+=c[h++];F(c.charCodeAt(h));)_+=c[h++];k=c[h]}if(k==="e"||k==="E")if(_+=c[h++],k=c[h],(k==="+"||k==="-")&&(_+=c[h++]),F(c.charCodeAt(h)))for(;F(c.charCodeAt(h));)_+=c[h++];else j({},l.UnexpectedToken,"ILLEGAL");return W(c.charCodeAt(h))&&j({},l.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseFloat(_),lineNumber:D,lineStart:b,start:C,end:h}}function Qe(){var _="",C,k,Z,ce,Ee,et,dt=!1,Vt,nr;for(Vt=D,nr=b,C=c[h],B(C==="'"||C==='"',"String literal must starts with a quote"),k=h,++h;h<g;)if(Z=c[h++],Z===C){C="";break}else if(Z==="\\")if(Z=c[h++],!Z||!N(Z.charCodeAt(0)))switch(Z){case"u":case"x":et=h,Ee=ye(Z),Ee?_+=Ee:(h=et,_+=Z);break;case"n":_+=`
`;break;case"r":_+="\r";break;case"t":_+="	";break;case"b":_+="\b";break;case"f":_+="\f";break;case"v":_+="\v";break;default:P(Z)?(ce="01234567".indexOf(Z),ce!==0&&(dt=!0),h<g&&P(c[h])&&(dt=!0,ce=ce*8+"01234567".indexOf(c[h++]),"0123".indexOf(Z)>=0&&h<g&&P(c[h])&&(ce=ce*8+"01234567".indexOf(c[h++]))),_+=String.fromCharCode(ce)):_+=Z;break}else++D,Z==="\r"&&c[h]===`
`&&++h,b=h;else{if(N(Z.charCodeAt(0)))break;_+=Z}return C!==""&&j({},l.UnexpectedToken,"ILLEGAL"),{type:r.StringLiteral,value:_,octal:dt,startLineNumber:Vt,startLineStart:nr,lineNumber:D,lineStart:b,start:k,end:h}}function it(_,C){var k;try{k=new RegExp(_,C)}catch{j({},l.InvalidRegExp)}return k}function gt(){var _,C,k,Z,ce;for(_=c[h],B(_==="/","Regular expression literal must start with a slash"),C=c[h++],k=!1,Z=!1;h<g;)if(_=c[h++],C+=_,_==="\\")_=c[h++],N(_.charCodeAt(0))&&j({},l.UnterminatedRegExp),C+=_;else if(N(_.charCodeAt(0)))j({},l.UnterminatedRegExp);else if(k)_==="]"&&(k=!1);else if(_==="/"){Z=!0;break}else _==="["&&(k=!0);return Z||j({},l.UnterminatedRegExp),ce=C.substr(1,C.length-2),{value:ce,literal:C}}function mt(){var _,C,k,Z;for(C="",k="";h<g&&(_=c[h],!!$(_.charCodeAt(0)));)if(++h,_==="\\"&&h<g)if(_=c[h],_==="u"){if(++h,Z=h,_=ye("u"),_)for(k+=_,C+="\\u";Z<h;++Z)C+=c[Z];else h=Z,k+="u",C+="\\u";Y({},l.UnexpectedToken,"ILLEGAL")}else C+="\\",Y({},l.UnexpectedToken,"ILLEGAL");else k+=_,C+=_;return{value:k,literal:C}}function rt(){var _,C,k,Z;return y=null,ve(),_=h,C=gt(),k=mt(),Z=it(C.value,k.value),w.tokenize?{type:r.RegularExpression,value:Z,lineNumber:D,lineStart:b,start:_,end:h}:{literal:C.literal+k.literal,value:Z,start:_,end:h}}function Xe(){var _,C,k,Z;return ve(),_=h,C={start:{line:D,column:h-b}},k=rt(),C.end={line:D,column:h-b},w.tokenize||(w.tokens.length>0&&(Z=w.tokens[w.tokens.length-1],Z.range[0]===_&&Z.type==="Punctuator"&&(Z.value==="/"||Z.value==="/=")&&w.tokens.pop()),w.tokens.push({type:"RegularExpression",value:k.literal,range:[_,h],loc:C})),k}function wt(_){return _.type===r.Identifier||_.type===r.Keyword||_.type===r.BooleanLiteral||_.type===r.NullLiteral}function br(){var _,C;if(_=w.tokens[w.tokens.length-1],!_)return Xe();if(_.type==="Punctuator"){if(_.value==="]")return Ne();if(_.value===")")return C=w.tokens[w.openParenToken-1],C&&C.type==="Keyword"&&(C.value==="if"||C.value==="while"||C.value==="for"||C.value==="with")?Xe():Ne();if(_.value==="}"){if(w.tokens[w.openCurlyToken-3]&&w.tokens[w.openCurlyToken-3].type==="Keyword"){if(C=w.tokens[w.openCurlyToken-4],!C)return Ne()}else if(w.tokens[w.openCurlyToken-4]&&w.tokens[w.openCurlyToken-4].type==="Keyword"){if(C=w.tokens[w.openCurlyToken-5],!C)return Xe()}else return Ne();return u.indexOf(C.value)>=0?Ne():Xe()}return Xe()}return _.type==="Keyword"&&_.value!=="this"?Xe():Ne()}function Ft(){var _;return ve(),h>=g?{type:r.EOF,lineNumber:D,lineStart:b,start:h,end:h}:(_=c.charCodeAt(h),W(_)?Fe():_===40||_===41||_===59?Ne():_===39||_===34?Qe():_===46?F(c.charCodeAt(h+1))?vt():Ne():F(_)?vt():w.tokenize&&_===47?br():Ne())}function Ae(){var _,C,k;return ve(),_={start:{line:D,column:h-b}},C=Ft(),_.end={line:D,column:h-b},C.type!==r.EOF&&(k=c.slice(C.start,C.end),w.tokens.push({type:i[C.type],value:k,range:[C.start,C.end],loc:_})),C}function be(){var _;return _=y,h=_.end,D=_.lineNumber,b=_.lineStart,y=typeof w.tokens<"u"?Ae():Ft(),h=_.end,D=_.lineNumber,b=_.lineStart,_}function Dt(){var _,C,k;_=h,C=D,k=b,y=typeof w.tokens<"u"?Ae():Ft(),h=_,D=C,b=k}function jt(_,C){this.line=_,this.column=C}function ar(_,C,k,Z){this.start=new jt(_,C),this.end=new jt(k,Z)}p={name:"SyntaxTree",processComment:function(_){var C,k;if(!(_.type===a.Program&&_.body.length>0)){for(w.trailingComments.length>0?w.trailingComments[0].range[0]>=_.range[1]?(k=w.trailingComments,w.trailingComments=[]):w.trailingComments.length=0:w.bottomRightStack.length>0&&w.bottomRightStack[w.bottomRightStack.length-1].trailingComments&&w.bottomRightStack[w.bottomRightStack.length-1].trailingComments[0].range[0]>=_.range[1]&&(k=w.bottomRightStack[w.bottomRightStack.length-1].trailingComments,delete w.bottomRightStack[w.bottomRightStack.length-1].trailingComments);w.bottomRightStack.length>0&&w.bottomRightStack[w.bottomRightStack.length-1].range[0]>=_.range[0];)C=w.bottomRightStack.pop();C?C.leadingComments&&C.leadingComments[C.leadingComments.length-1].range[1]<=_.range[0]&&(_.leadingComments=C.leadingComments,delete C.leadingComments):w.leadingComments.length>0&&w.leadingComments[w.leadingComments.length-1].range[1]<=_.range[0]&&(_.leadingComments=w.leadingComments,w.leadingComments=[]),k&&(_.trailingComments=k),w.bottomRightStack.push(_)}},markEnd:function(_,C){return w.range&&(_.range=[C.start,h]),w.loc&&(_.loc=new ar(C.startLineNumber===void 0?C.lineNumber:C.startLineNumber,C.start-(C.startLineStart===void 0?C.lineStart:C.startLineStart),D,h-b),this.postProcess(_)),w.attachComment&&this.processComment(_),_},postProcess:function(_){return w.source&&(_.loc.source=w.source),_},createArrayExpression:function(_){return{type:a.ArrayExpression,elements:_}},createAssignmentExpression:function(_,C,k){return{type:a.AssignmentExpression,operator:_,left:C,right:k}},createBinaryExpression:function(_,C,k){var Z=_==="||"||_==="&&"?a.LogicalExpression:a.BinaryExpression;return{type:Z,operator:_,left:C,right:k}},createBlockStatement:function(_){return{type:a.BlockStatement,body:_}},createBreakStatement:function(_){return{type:a.BreakStatement,label:_}},createCallExpression:function(_,C){return{type:a.CallExpression,callee:_,arguments:C}},createCatchClause:function(_,C){return{type:a.CatchClause,param:_,body:C}},createConditionalExpression:function(_,C,k){return{type:a.ConditionalExpression,test:_,consequent:C,alternate:k}},createContinueStatement:function(_){return{type:a.ContinueStatement,label:_}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(_,C){return{type:a.DoWhileStatement,body:_,test:C}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(_){return{type:a.ExpressionStatement,expression:_}},createForStatement:function(_,C,k,Z){return{type:a.ForStatement,init:_,test:C,update:k,body:Z}},createForInStatement:function(_,C,k){return{type:a.ForInStatement,left:_,right:C,body:k,each:!1}},createFunctionDeclaration:function(_,C,k,Z){return{type:a.FunctionDeclaration,id:_,params:C,defaults:k,body:Z,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(_,C,k,Z){return{type:a.FunctionExpression,id:_,params:C,defaults:k,body:Z,rest:null,generator:!1,expression:!1}},createIdentifier:function(_){return{type:a.Identifier,name:_}},createIfStatement:function(_,C,k){return{type:a.IfStatement,test:_,consequent:C,alternate:k}},createLabeledStatement:function(_,C){return{type:a.LabeledStatement,label:_,body:C}},createLiteral:function(_){return{type:a.Literal,value:_.value,raw:c.slice(_.start,_.end)}},createMemberExpression:function(_,C,k){return{type:a.MemberExpression,computed:_==="[",object:C,property:k}},createNewExpression:function(_,C){return{type:a.NewExpression,callee:_,arguments:C}},createObjectExpression:function(_){return{type:a.ObjectExpression,properties:_}},createPostfixExpression:function(_,C){return{type:a.UpdateExpression,operator:_,argument:C,prefix:!1}},createProgram:function(_){return{type:a.Program,body:_}},createProperty:function(_,C,k){return{type:a.Property,key:C,value:k,kind:_}},createReturnStatement:function(_){return{type:a.ReturnStatement,argument:_}},createSequenceExpression:function(_){return{type:a.SequenceExpression,expressions:_}},createSwitchCase:function(_,C){return{type:a.SwitchCase,test:_,consequent:C}},createSwitchStatement:function(_,C){return{type:a.SwitchStatement,discriminant:_,cases:C}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(_){return{type:a.ThrowStatement,argument:_}},createTryStatement:function(_,C,k,Z){return{type:a.TryStatement,block:_,guardedHandlers:C,handlers:k,finalizer:Z}},createUnaryExpression:function(_,C){return _==="++"||_==="--"?{type:a.UpdateExpression,operator:_,argument:C,prefix:!0}:{type:a.UnaryExpression,operator:_,argument:C,prefix:!0}},createVariableDeclaration:function(_,C){return{type:a.VariableDeclaration,declarations:_,kind:C}},createVariableDeclarator:function(_,C){return{type:a.VariableDeclarator,id:_,init:C}},createWhileStatement:function(_,C){return{type:a.WhileStatement,test:_,body:C}},createWithStatement:function(_,C){return{type:a.WithStatement,object:_,body:C}}};function R(){var _,C,k,Z;return _=h,C=D,k=b,ve(),Z=D!==C,h=_,D=C,b=k,Z}function j(_,C){var k,Z=Array.prototype.slice.call(arguments,2),ce=C.replace(/%(\d)/g,function(Ee,et){return B(et<Z.length,"Message reference must be in range"),Z[et]});throw typeof _.lineNumber=="number"?(k=new Error("Line "+_.lineNumber+": "+ce),k.index=_.start,k.lineNumber=_.lineNumber,k.column=_.start-b+1):(k=new Error("Line "+D+": "+ce),k.index=h,k.lineNumber=D,k.column=h-b+1),k.description=ce,k}function Y(){try{j.apply(null,arguments)}catch(_){if(w.errors)w.errors.push(_);else throw _}}function ue(_){if(_.type===r.EOF&&j(_,l.UnexpectedEOS),_.type===r.NumericLiteral&&j(_,l.UnexpectedNumber),_.type===r.StringLiteral&&j(_,l.UnexpectedString),_.type===r.Identifier&&j(_,l.UnexpectedIdentifier),_.type===r.Keyword){if(K(_.value))j(_,l.UnexpectedReserved);else if(f&&q(_.value)){Y(_,l.StrictReservedWord);return}j(_,l.UnexpectedToken,_.value)}j(_,l.UnexpectedToken,_.value)}function ee(_){var C=be();(C.type!==r.Punctuator||C.value!==_)&&ue(C)}function he(_){var C=be();(C.type!==r.Keyword||C.value!==_)&&ue(C)}function ie(_){return y.type===r.Punctuator&&y.value===_}function oe(_){return y.type===r.Keyword&&y.value===_}function De(){var _;return y.type!==r.Punctuator?!1:(_=y.value,_==="="||_==="*="||_==="/="||_==="%="||_==="+="||_==="-="||_==="<<="||_===">>="||_===">>>="||_==="&="||_==="^="||_==="|=")}function Be(){var _,C=h,k=D,Z=b,ce=y;if(c.charCodeAt(h)===59||ie(";")){be();return}if(_=D,ve(),D!==_){h=C,D=k,b=Z,y=ce;return}y.type!==r.EOF&&!ie("}")&&ue(y)}function We(_){return _.type===a.Identifier||_.type===a.MemberExpression}function we(){var _=[],C;for(C=y,ee("[");!ie("]");)ie(",")?(be(),_.push(null)):(_.push(Ar()),ie("]")||ee(","));return be(),m.markEnd(m.createArrayExpression(_),C)}function Wt(_,C){var k,Z,ce;return k=f,ce=y,Z=Ci(),C&&f&&G(_[0].name)&&Y(C,l.StrictParamName),f=k,m.markEnd(m.createFunctionExpression(null,_,[],Z),ce)}function kt(){var _,C;return C=y,_=be(),_.type===r.StringLiteral||_.type===r.NumericLiteral?(f&&_.octal&&Y(_,l.StrictOctalLiteral),m.markEnd(m.createLiteral(_),C)):m.markEnd(m.createIdentifier(_.value),C)}function Jt(){var _,C,k,Z,ce,Ee;if(_=y,Ee=y,_.type===r.Identifier)return k=kt(),_.value==="get"&&!ie(":")?(C=kt(),ee("("),ee(")"),Z=Wt([]),m.markEnd(m.createProperty("get",C,Z),Ee)):_.value==="set"&&!ie(":")?(C=kt(),ee("("),_=y,_.type!==r.Identifier?(ee(")"),Y(_,l.UnexpectedToken,_.value),Z=Wt([])):(ce=[tn()],ee(")"),Z=Wt(ce,_)),m.markEnd(m.createProperty("set",C,Z),Ee)):(ee(":"),Z=Ar(),m.markEnd(m.createProperty("init",k,Z),Ee));if(_.type===r.EOF||_.type===r.Punctuator)ue(_);else return C=kt(),ee(":"),Z=Ar(),m.markEnd(m.createProperty("init",C,Z),Ee)}function Ht(){var _=[],C,k,Z,ce,Ee={},et=String,dt;for(dt=y,ee("{");!ie("}");)C=Jt(),C.key.type===a.Identifier?k=C.key.name:k=et(C.key.value),ce=C.kind==="init"?o.Data:C.kind==="get"?o.Get:o.Set,Z="$"+k,Object.prototype.hasOwnProperty.call(Ee,Z)?(Ee[Z]===o.Data?f&&ce===o.Data?Y({},l.StrictDuplicateProperty):ce!==o.Data&&Y({},l.AccessorDataProperty):ce===o.Data?Y({},l.AccessorDataProperty):Ee[Z]&ce&&Y({},l.AccessorGetSet),Ee[Z]|=ce):Ee[Z]=ce,_.push(C),ie("}")||ee(",");return ee("}"),m.markEnd(m.createObjectExpression(_),dt)}function pr(){var _;return ee("("),_=Qt(),ee(")"),_}function Gt(){var _,C,k,Z;if(ie("("))return pr();if(ie("["))return we();if(ie("{"))return Ht();if(_=y.type,Z=y,_===r.Identifier)k=m.createIdentifier(be().value);else if(_===r.StringLiteral||_===r.NumericLiteral)f&&y.octal&&Y(y,l.StrictOctalLiteral),k=m.createLiteral(be());else if(_===r.Keyword){if(oe("function"))return Si();oe("this")?(be(),k=m.createThisExpression()):ue(be())}else _===r.BooleanLiteral?(C=be(),C.value=C.value==="true",k=m.createLiteral(C)):_===r.NullLiteral?(C=be(),C.value=null,k=m.createLiteral(C)):ie("/")||ie("/=")?(typeof w.tokens<"u"?k=m.createLiteral(Xe()):k=m.createLiteral(rt()),Dt()):ue(be());return m.markEnd(k,Z)}function vr(){var _=[];if(ee("("),!ie(")"))for(;h<g&&(_.push(Ar()),!ie(")"));)ee(",");return ee(")"),_}function sr(){var _,C;return C=y,_=be(),wt(_)||ue(_),m.markEnd(m.createIdentifier(_.value),C)}function or(){return ee("."),sr()}function en(){var _;return ee("["),_=Qt(),ee("]"),_}function fr(){var _,C,k;return k=y,he("new"),_=qn(),C=ie("(")?vr():[],m.markEnd(m.createNewExpression(_,C),k)}function Dn(){var _,C,k,Z,ce=E.allowIn;for(Z=y,E.allowIn=!0,_=oe("new")?fr():Gt();;){if(ie("."))k=or(),_=m.createMemberExpression(".",_,k);else if(ie("("))C=vr(),_=m.createCallExpression(_,C);else if(ie("["))k=en(),_=m.createMemberExpression("[",_,k);else break;m.markEnd(_,Z)}return E.allowIn=ce,_}function qn(){var _,C,k;for(B(E.allowIn,"callee of new expression always allow in keyword."),k=y,_=oe("new")?fr():Gt();ie(".")||ie("[");)ie("[")?(C=en(),_=m.createMemberExpression("[",_,C)):(C=or(),_=m.createMemberExpression(".",_,C)),m.markEnd(_,k);return _}function Mn(){var _,C,k=y;return _=Dn(),y.type===r.Punctuator&&(ie("++")||ie("--"))&&!R()&&(f&&_.type===a.Identifier&&G(_.name)&&Y({},l.StrictLHSPostfix),We(_)||Y({},l.InvalidLHSInAssignment),C=be(),_=m.markEnd(m.createPostfixExpression(C.value,_),k)),_}function Pn(){var _,C,k;return y.type!==r.Punctuator&&y.type!==r.Keyword?C=Mn():ie("++")||ie("--")?(k=y,_=be(),C=Pn(),f&&C.type===a.Identifier&&G(C.name)&&Y({},l.StrictLHSPrefix),We(C)||Y({},l.InvalidLHSInAssignment),C=m.createUnaryExpression(_.value,C),C=m.markEnd(C,k)):ie("+")||ie("-")||ie("~")||ie("!")?(k=y,_=be(),C=Pn(),C=m.createUnaryExpression(_.value,C),C=m.markEnd(C,k)):oe("delete")||oe("void")||oe("typeof")?(k=y,_=be(),C=Pn(),C=m.createUnaryExpression(_.value,C),C=m.markEnd(C,k),f&&C.operator==="delete"&&C.argument.type===a.Identifier&&Y({},l.StrictDelete)):C=Mn(),C}function Ui(_,C){var k=0;if(_.type!==r.Punctuator&&_.type!==r.Keyword)return 0;switch(_.value){case"||":k=1;break;case"&&":k=2;break;case"|":k=3;break;case"^":k=4;break;case"&":k=5;break;case"==":case"!=":case"===":case"!==":k=6;break;case"<":case">":case"<=":case">=":case"instanceof":k=7;break;case"in":k=C?7:0;break;case"<<":case">>":case">>>":k=8;break;case"+":case"-":k=9;break;case"*":case"/":case"%":k=11;break}return k}function Ei(){var _,C,k,Z,ce,Ee,et,dt,Vt,nr;if(_=y,Vt=Pn(),Z=y,ce=Ui(Z,E.allowIn),ce===0)return Vt;for(Z.prec=ce,be(),C=[_,y],et=Pn(),Ee=[Vt,Z,et];(ce=Ui(y,E.allowIn))>0;){for(;Ee.length>2&&ce<=Ee[Ee.length-2].prec;)et=Ee.pop(),dt=Ee.pop().value,Vt=Ee.pop(),k=m.createBinaryExpression(dt,Vt,et),C.pop(),_=C[C.length-1],m.markEnd(k,_),Ee.push(k);Z=be(),Z.prec=ce,Ee.push(Z),C.push(y),k=Pn(),Ee.push(k)}for(nr=Ee.length-1,k=Ee[nr],C.pop();nr>1;)k=m.createBinaryExpression(Ee[nr-1].value,Ee[nr-2],k),nr-=2,_=C.pop(),m.markEnd(k,_);return k}function gu(){var _,C,k,Z,ce;return ce=y,_=Ei(),ie("?")&&(be(),C=E.allowIn,E.allowIn=!0,k=Ar(),E.allowIn=C,ee(":"),Z=Ar(),_=m.createConditionalExpression(_,k,Z),m.markEnd(_,ce)),_}function Ar(){var _,C,k,Z,ce;return _=y,ce=y,Z=C=gu(),De()&&(We(C)||Y({},l.InvalidLHSInAssignment),f&&C.type===a.Identifier&&G(C.name)&&Y(_,l.StrictLHSAssignment),_=be(),k=Ar(),Z=m.markEnd(m.createAssignmentExpression(_.value,C,k),ce)),Z}function Qt(){var _,C=y;if(_=Ar(),ie(",")){for(_=m.createSequenceExpression([_]);h<g&&ie(",");)be(),_.expressions.push(Ar());m.markEnd(_,C)}return _}function mu(){for(var _=[],C;h<g&&!(ie("}")||(C=_n(),typeof C>"u"));)_.push(C);return _}function ni(){var _,C;return C=y,ee("{"),_=mu(),ee("}"),m.markEnd(m.createBlockStatement(_),C)}function tn(){var _,C;return C=y,_=be(),_.type!==r.Identifier&&ue(_),m.markEnd(m.createIdentifier(_.value),C)}function zn(_){var C=null,k,Z;return Z=y,k=tn(),f&&G(k.name)&&Y({},l.StrictVarName),_==="const"?(ee("="),C=Ar()):ie("=")&&(be(),C=Ar()),m.markEnd(m.createVariableDeclarator(k,C),Z)}function Fi(_){var C=[];do{if(C.push(zn(_)),!ie(","))break;be()}while(h<g);return C}function Du(){var _;return he("var"),_=Fi(),Be(),m.createVariableDeclaration(_,"var")}function _u(_){var C,k;return k=y,he(_),C=Fi(_),Be(),m.markEnd(m.createVariableDeclaration(C,_),k)}function ji(){return ee(";"),m.createEmptyStatement()}function yu(){var _=Qt();return Be(),m.createExpressionStatement(_)}function bu(){var _,C,k;return he("if"),ee("("),_=Qt(),ee(")"),C=Ir(),oe("else")?(be(),k=Ir()):k=null,m.createIfStatement(_,C,k)}function Au(){var _,C,k;return he("do"),k=E.inIteration,E.inIteration=!0,_=Ir(),E.inIteration=k,he("while"),ee("("),C=Qt(),ee(")"),ie(";")&&be(),m.createDoWhileStatement(_,C)}function wu(){var _,C,k;return he("while"),ee("("),_=Qt(),ee(")"),k=E.inIteration,E.inIteration=!0,C=Ir(),E.inIteration=k,m.createWhileStatement(_,C)}function Eu(){var _,C,k;return k=y,_=be(),C=Fi(),m.markEnd(m.createVariableDeclaration(C,_.value),k)}function Fu(){var _,C,k,Z,ce,Ee,et,dt=E.allowIn;return _=C=k=null,he("for"),ee("("),ie(";")?be():(oe("var")||oe("let")?(E.allowIn=!1,_=Eu(),E.allowIn=dt,_.declarations.length===1&&oe("in")&&(be(),Z=_,ce=Qt(),_=null)):(E.allowIn=!1,_=Qt(),E.allowIn=dt,oe("in")&&(We(_)||Y({},l.InvalidLHSInForIn),be(),Z=_,ce=Qt(),_=null)),typeof Z>"u"&&ee(";")),typeof Z>"u"&&(ie(";")||(C=Qt()),ee(";"),ie(")")||(k=Qt())),ee(")"),et=E.inIteration,E.inIteration=!0,Ee=Ir(),E.inIteration=et,typeof Z>"u"?m.createForStatement(_,C,k,Ee):m.createForInStatement(Z,ce,Ee)}function ii(){var _=null,C;return he("continue"),c.charCodeAt(h)===59?(be(),E.inIteration||j({},l.IllegalContinue),m.createContinueStatement(null)):R()?(E.inIteration||j({},l.IllegalContinue),m.createContinueStatement(null)):(y.type===r.Identifier&&(_=tn(),C="$"+_.name,Object.prototype.hasOwnProperty.call(E.labelSet,C)||j({},l.UnknownLabel,_.name)),Be(),_===null&&!E.inIteration&&j({},l.IllegalContinue),m.createContinueStatement(_))}function Cu(){var _=null,C;return he("break"),c.charCodeAt(h)===59?(be(),E.inIteration||E.inSwitch||j({},l.IllegalBreak),m.createBreakStatement(null)):R()?(E.inIteration||E.inSwitch||j({},l.IllegalBreak),m.createBreakStatement(null)):(y.type===r.Identifier&&(_=tn(),C="$"+_.name,Object.prototype.hasOwnProperty.call(E.labelSet,C)||j({},l.UnknownLabel,_.name)),Be(),_===null&&!(E.inIteration||E.inSwitch)&&j({},l.IllegalBreak),m.createBreakStatement(_))}function ui(){var _=null;return he("return"),E.inFunctionBody||Y({},l.IllegalReturn),c.charCodeAt(h)===32&&W(c.charCodeAt(h+1))?(_=Qt(),Be(),m.createReturnStatement(_)):R()?m.createReturnStatement(null):(ie(";")||!ie("}")&&y.type!==r.EOF&&(_=Qt()),Be(),m.createReturnStatement(_))}function Su(){var _,C;return f&&(ve(),Y({},l.StrictModeWith)),he("with"),ee("("),_=Qt(),ee(")"),C=Ir(),m.createWithStatement(_,C)}function Bu(){var _,C=[],k,Z;for(Z=y,oe("default")?(be(),_=null):(he("case"),_=Qt()),ee(":");h<g&&!(ie("}")||oe("default")||oe("case"));)k=Ir(),C.push(k);return m.markEnd(m.createSwitchCase(_,C),Z)}function Ou(){var _,C,k,Z,ce;if(he("switch"),ee("("),_=Qt(),ee(")"),ee("{"),C=[],ie("}"))return be(),m.createSwitchStatement(_,C);for(Z=E.inSwitch,E.inSwitch=!0,ce=!1;h<g&&!ie("}");)k=Bu(),k.test===null&&(ce&&j({},l.MultipleDefaultsInSwitch),ce=!0),C.push(k);return E.inSwitch=Z,ee("}"),m.createSwitchStatement(_,C)}function Vi(){var _;return he("throw"),R()&&j({},l.NewlineAfterThrow),_=Qt(),Be(),m.createThrowStatement(_)}function xn(){var _,C,k;return k=y,he("catch"),ee("("),ie(")")&&ue(y),_=tn(),f&&G(_.name)&&Y({},l.StrictCatchVariable),ee(")"),C=ni(),m.markEnd(m.createCatchClause(_,C),k)}function gr(){var _,C=[],k=null;return he("try"),_=ni(),oe("catch")&&C.push(xn()),oe("finally")&&(be(),k=ni()),C.length===0&&!k&&j({},l.NoCatchOrFinally),m.createTryStatement(_,[],C,k)}function rr(){return he("debugger"),Be(),m.createDebuggerStatement()}function Ir(){var _=y.type,C,k,Z,ce;if(_===r.EOF&&ue(y),_===r.Punctuator&&y.value==="{")return ni();if(ce=y,_===r.Punctuator)switch(y.value){case";":return m.markEnd(ji(),ce);case"(":return m.markEnd(yu(),ce)}if(_===r.Keyword)switch(y.value){case"break":return m.markEnd(Cu(),ce);case"continue":return m.markEnd(ii(),ce);case"debugger":return m.markEnd(rr(),ce);case"do":return m.markEnd(Au(),ce);case"for":return m.markEnd(Fu(),ce);case"function":return m.markEnd(In(),ce);case"if":return m.markEnd(bu(),ce);case"return":return m.markEnd(ui(),ce);case"switch":return m.markEnd(Ou(),ce);case"throw":return m.markEnd(Vi(),ce);case"try":return m.markEnd(gr(),ce);case"var":return m.markEnd(Du(),ce);case"while":return m.markEnd(wu(),ce);case"with":return m.markEnd(Su(),ce)}return C=Qt(),C.type===a.Identifier&&ie(":")?(be(),Z="$"+C.name,Object.prototype.hasOwnProperty.call(E.labelSet,Z)&&j({},l.Redeclaration,"Label",C.name),E.labelSet[Z]=!0,k=Ir(),delete E.labelSet[Z],m.markEnd(m.createLabeledStatement(C,k),ce)):(Be(),m.markEnd(m.createExpressionStatement(C),ce))}function Ci(){var _,C=[],k,Z,ce,Ee,et,dt,Vt,nr;for(nr=y,ee("{");h<g&&!(y.type!==r.StringLiteral||(k=y,_=_n(),C.push(_),_.expression.type!==a.Literal));)Z=c.slice(k.start+1,k.end-1),Z==="use strict"?(f=!0,ce&&Y(ce,l.StrictOctalLiteral)):!ce&&k.octal&&(ce=k);for(Ee=E.labelSet,et=E.inIteration,dt=E.inSwitch,Vt=E.inFunctionBody,E.labelSet={},E.inIteration=!1,E.inSwitch=!1,E.inFunctionBody=!0;h<g&&!(ie("}")||(_=_n(),typeof _>"u"));)C.push(_);return ee("}"),E.labelSet=Ee,E.inIteration=et,E.inSwitch=dt,E.inFunctionBody=Vt,m.markEnd(m.createBlockStatement(C),nr)}function Wn(_){var C,k=[],Z,ce,Ee,et,dt;if(ee("("),!ie(")"))for(Ee={};h<g&&(Z=y,C=tn(),et="$"+Z.value,f?(G(Z.value)&&(ce=Z,dt=l.StrictParamName),Object.prototype.hasOwnProperty.call(Ee,et)&&(ce=Z,dt=l.StrictParamDupe)):_||(G(Z.value)?(_=Z,dt=l.StrictParamName):q(Z.value)?(_=Z,dt=l.StrictReservedWord):Object.prototype.hasOwnProperty.call(Ee,et)&&(_=Z,dt=l.StrictParamDupe)),k.push(C),Ee[et]=!0,!ie(")"));)ee(",");return ee(")"),{params:k,stricted:ce,firstRestricted:_,message:dt}}function In(){var _,C=[],k,Z,ce,Ee,et,dt,Vt,nr;return nr=y,he("function"),Z=y,_=tn(),f?G(Z.value)&&Y(Z,l.StrictFunctionName):G(Z.value)?(et=Z,dt=l.StrictFunctionName):q(Z.value)&&(et=Z,dt=l.StrictReservedWord),Ee=Wn(et),C=Ee.params,ce=Ee.stricted,et=Ee.firstRestricted,Ee.message&&(dt=Ee.message),Vt=f,k=Ci(),f&&et&&j(et,dt),f&&ce&&Y(ce,dt),f=Vt,m.markEnd(m.createFunctionDeclaration(_,C,[],k),nr)}function Si(){var _,C=null,k,Z,ce,Ee,et=[],dt,Vt,nr;return nr=y,he("function"),ie("(")||(_=y,C=tn(),f?G(_.value)&&Y(_,l.StrictFunctionName):G(_.value)?(Z=_,ce=l.StrictFunctionName):q(_.value)&&(Z=_,ce=l.StrictReservedWord)),Ee=Wn(Z),et=Ee.params,k=Ee.stricted,Z=Ee.firstRestricted,Ee.message&&(ce=Ee.message),Vt=f,dt=Ci(),f&&Z&&j(Z,ce),f&&k&&Y(k,ce),f=Vt,m.markEnd(m.createFunctionExpression(C,et,[],dt),nr)}function _n(){if(y.type===r.Keyword)switch(y.value){case"const":case"let":return _u(y.value);case"function":return In();default:return Ir()}if(y.type!==r.EOF)return Ir()}function rn(){for(var _,C=[],k,Z,ce;h<g&&(k=y,!(k.type!==r.StringLiteral||(_=_n(),C.push(_),_.expression.type!==a.Literal)));)Z=c.slice(k.start+1,k.end-1),Z==="use strict"?(f=!0,ce&&Y(ce,l.StrictOctalLiteral)):!ce&&k.octal&&(ce=k);for(;h<g&&(_=_n(),!(typeof _>"u"));)C.push(_);return C}function ks(){var _,C;return ve(),Dt(),C=y,f=!1,_=rn(),m.markEnd(m.createProgram(_),C)}function Mu(){var _,C,k,Z=[];for(_=0;_<w.tokens.length;++_)C=w.tokens[_],k={type:C.type,value:C.value},w.range&&(k.range=C.range),w.loc&&(k.loc=C.loc),Z.push(k);w.tokens=Z}function qi(_,C){var k,Z,ce;k=String,typeof _!="string"&&!(_ instanceof String)&&(_=k(_)),m=p,c=_,h=0,D=c.length>0?1:0,b=0,g=c.length,y=null,E={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},w={},C=C||{},C.tokens=!0,w.tokens=[],w.tokenize=!0,w.openParenToken=-1,w.openCurlyToken=-1,w.range=typeof C.range=="boolean"&&C.range,w.loc=typeof C.loc=="boolean"&&C.loc,typeof C.comment=="boolean"&&C.comment&&(w.comments=[]),typeof C.tolerant=="boolean"&&C.tolerant&&(w.errors=[]);try{if(Dt(),y.type===r.EOF)return w.tokens;for(Z=be();y.type!==r.EOF;)try{Z=be()}catch(Ee){if(Z=y,w.errors){w.errors.push(Ee);break}else throw Ee}Mu(),ce=w.tokens,typeof w.comments<"u"&&(ce.comments=w.comments),typeof w.errors<"u"&&(ce.errors=w.errors)}catch(Ee){throw Ee}finally{w={}}return ce}function ea(_,C){var k,Z;Z=String,typeof _!="string"&&!(_ instanceof String)&&(_=Z(_)),m=p,c=_,h=0,D=c.length>0?1:0,b=0,g=c.length,y=null,E={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},w={},typeof C<"u"&&(w.range=typeof C.range=="boolean"&&C.range,w.loc=typeof C.loc=="boolean"&&C.loc,w.attachComment=typeof C.attachComment=="boolean"&&C.attachComment,w.loc&&C.source!==null&&C.source!==void 0&&(w.source=Z(C.source)),typeof C.tokens=="boolean"&&C.tokens&&(w.tokens=[]),typeof C.comment=="boolean"&&C.comment&&(w.comments=[]),typeof C.tolerant=="boolean"&&C.tolerant&&(w.errors=[]),w.attachComment&&(w.range=!0,w.comments=[],w.bottomRightStack=[],w.trailingComments=[],w.leadingComments=[]));try{k=ks(),typeof w.comments<"u"&&(k.comments=w.comments),typeof w.tokens<"u"&&(Mu(),k.tokens=w.tokens),typeof w.errors<"u"&&(k.errors=w.errors)}catch(ce){throw ce}finally{w={}}return k}e.version="1.2.5",e.tokenize=qi,e.parse=ea,e.Syntax=function(){var _,C={};typeof Object.create=="function"&&(C=Object.create(null));for(_ in a)a.hasOwnProperty(_)&&(C[_]=a[_]);return typeof Object.freeze=="function"&&Object.freeze(C),C}()})})(Sp);var eC=Sp,Uh=Ep,tC=0;function rC(t,e,r){this.name=t,this.lvalue=e,this.rvalue=r,this.count=0}function nC(t,e,r,i){this.body=t,this.args=e,this.thisVars=r,this.localVars=i}function iC(t){if(t==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?t in window:typeof lr<"u"?t in lr:typeof self<"u"?t in self:!1}function uC(t){for(var e=t.body[0].expression.callee.params,r=new Array(e.length),i=0;i<e.length;++i)r[i]=e[i].name;return r}function aC(t){for(var e=["(",t,")()"].join(""),r=eC.parse(e,{range:!0}),i="_inline_"+tC+++"_",u=uC(r),a=new Array(u.length),o=0;o<u.length;++o)a[o]=new rC([i,"arg",o,"_"].join(""),!1,!1);for(var l=new Array(e.length),o=0,d=e.length;o<d;++o)l[o]=e.charAt(o);var p=[],c=[];function f(B){var F=i+B.replace(/\_/g,"__");return p.push(F),F}function h(B){var F="this_"+B.replace(/\_/g,"__");return c.push(F),F}function D(B,F){for(var O=B.range[0],P=B.range[1],I=O+1;I<P;++I)l[I]="";l[O]=F}function b(B){return"'"+B.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function g(B){return l.slice(B.range[0],B.range[1]).join("")}var m=1,y=2;function E(B){return B.parent.type==="AssignmentExpression"&&B.parent.left===B?B.parent.operator==="="?m:m|y:B.parent.type==="UpdateExpression"?m|y:y}(function B(F,O){if(F.parent=O,F.type==="MemberExpression")F.computed?(B(F.object,F),B(F.property,F)):F.object.type==="ThisExpression"?D(F,h(F.property.name)):B(F.object,F);else{if(F.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(F.type==="Identifier"){var P=F.name,I=u.indexOf(P);if(I>=0){var N=a[I],W=E(F);W&m&&(N.lvalue=!0),W&y&&(N.rvalue=!0),++N.count,D(F,N.name)}else iC(P)||D(F,f(P))}else if(F.type==="Literal")typeof F.value=="string"&&D(F,b(F.value));else{if(F.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var $=Object.keys(F),K=0,q=$.length;K<q;++K)if($[K]!=="parent"){var G=F[$[K]];if(G)if(G instanceof Array)for(var L=0;L<G.length;++L)G[L]&&typeof G[L].type=="string"&&B(G[L],F);else typeof G.type=="string"&&B(G,F)}}}})(r.body[0].expression.callee.body,void 0),Uh(p),Uh(c);var w=new nC(g(r.body[0].expression.callee.body),a,c,p);return w}var sC=aC,ml=sC,oC=pf,qa=["args","body"],lC=["pre","post","printCode","funcName","blockSize"];function fC(t){for(var e in t)qa.indexOf(e)<0&&lC.indexOf(e)<0&&console.warn("cwise: Unknown argument '"+e+"' passed to expression compiler");for(var r=0;r<qa.length;++r)if(!t[qa[r]])throw new Error("cwise: Missing argument: "+qa[r]);return oC({args:t.args,pre:ml(t.pre||function(){}),body:ml(t.body),post:ml(t.post||function(){}),debug:!!t.printCode,funcName:t.funcName||t.body.name||"cwise",blockSize:t.blockSize||64})}var Ns=fC,cC=QF,hC=Ns,dC=hC({args:["array","scalar","index"],body:function(e,r,i){var u=r,a;for(a=0;a<i.length-1;++a)u=u[i[a]];u[i[i.length-1]]=e}}),pC=function(e){var r=cC(e.shape);return dC(e,r),r},ls={},vC={get exports(){return ls},set exports(t){ls=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(o,l){for(var d=new Float64Array(o*l),p=0;p<d.length;p++)d[p]=a()*1e-4;return(0,i.default)(d,[o,l])};var r=vu,i=u(r);function u(o){return o&&o.__esModule?o:{default:o}}function a(){var o=2*Math.random()-1,l=2*Math.random()-1,d=o*o+l*l;return d==0||d>1?a():o*Math.sqrt(-2*Math.log(d)/d)}t.exports=e.default})(vC,ls);var Xu={},gC={get exports(){return Xu},set exports(t){Xu=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(f,h){var D=f.shape[0],b=(0,i.default)(new Float64Array(D*D),[D,D]);switch(h){case"euclidean":for(var g=0;g<D;g++)for(var m=g+1;m<D;m++){var y=l(f.pick(g,null),f.pick(m,null));b.set(g,m,y),b.set(m,g,y)}break;case"manhattan":for(var g=0;g<D;g++)for(var m=g+1;m<D;m++){var y=d(f.pick(g,null),f.pick(m,null));b.set(g,m,y),b.set(m,g,y)}break;case"jaccard":for(var g=0;g<D;g++)for(var m=g+1;m<D;m++){var y=p(f.pick(g,null),f.pick(m,null));b.set(g,m,y),b.set(m,g,y)}break;case"dice":for(var g=0;g<D;g++)for(var m=g+1;m<D;m++){var y=c(f.pick(g,null),f.pick(m,null));b.set(g,m,y),b.set(m,g,y)}break}return b};var r=vu,i=o(r),u=Ns,a=o(u);function o(f){return f&&f.__esModule?f:{default:f}}var l=(0,a.default)({args:["array","array"],pre:function(h,D){this.sum=0},body:function(h,D){var b=h-D;this.sum+=b*b},post:function(h,D){return Math.sqrt(this.sum)}}),d=(0,a.default)({args:["array","array"],pre:function(h,D){this.sum=0},body:function(h,D){this.sum+=Math.abs(h-D)},post:function(h,D){return this.sum}}),p=(0,a.default)({args:["array","array"],pre:function(h,D){this.tf=0,this.tt=0},body:function(h,D){var b=Math.round(h),g=Math.round(D);this.tf+=+(b!=g),this.tt+=+(b==1&&g==1)},post:function(h,D){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),c=(0,a.default)({args:["array","array"],pre:function(h,D){this.tf=0,this.tt=0},body:function(h,D){var b=Math.round(h),g=Math.round(D);this.tf+=+(b!=g),this.tt+=+(b==1&&g==1)},post:function(h,D){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});t.exports=e.default})(gC,Xu);var fs={},mC={get exports(){return fs},set exports(t){fs=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(c,f){for(var h=100,D=c.shape[0],b=(0,i.default)(new Float64Array(D*D),[D,D]),g=(0,i.default)(new Float64Array(D*D),[D,D]),m=void 0,y=void 0,E=1/0,w=Math.log(f),B=void 0,F=void 0,O=void 0,P=void 0,I=0;I<D;I++){m=1,y=-1/0,E=1/0;for(var N=0;N<h;N++){for(var W=0;W<D;W++)b.set(I,W,Math.exp(-c.get(I,W)*m));b.set(I,I,0),O=0;for(var W=0;W<D;W++)O+=b.get(I,W);O==0&&(O=l),P=0;for(var W=0;W<D;W++)b.set(I,W,b.get(I,W)/O),P+=c.get(I,W)*b.get(I,W);if(F=Math.log(O)+m*P,B=F-w,Math.abs(B)<=p)break;B>0?(y=m,E==1/0?m=m*2:m=(m+E)/2):(E=m,y==-1/0?m=m/2:m=(m+y)/2)}}a.default.add(g,b,b.transpose(1,0));var $=Math.max(a.default.sum(g),d);return a.default.divseq(g,$),a.default.maxseq(g,d),g};var r=vu,i=o(r),u=Ts,a=o(u);function o(c){return c&&c.__esModule?c:{default:c}}var l=1e-7,d=Number.EPSILON||2220446049250313e-31,p=1e-5;t.exports=e.default})(mC,fs);var cs={},DC={get exports(){return cs},set exports(t){cs=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(D,b,g){var m=D.shape[0],y=D.shape[1],E=(0,i.default)(new Float64Array(m*m),[m,m]),w=(0,p.default)(D,"euclidean");h(w);var B=(g+1)/-2;a.default.powseq(a.default.divseq(a.default.addseq(w,1),g),B);for(var F=0;F<m;F++)w.set(F,F,0);var O=Math.max(a.default.sum(w),f);a.default.divs(E,w,O),a.default.maxseq(E,f);var P=(0,i.default)(new Float64Array(m*m),[m,m]),I=(0,i.default)(new Float64Array(m*m),[m,m]);a.default.div(P,b,E),a.default.logeq(P),a.default.assign(I,b);var N=a.default.sum(a.default.muleq(P,I)),W=(0,i.default)(new Float64Array(D.size),D.shape),$=(0,i.default)(new Float64Array(m*m),[m,m]);a.default.sub($,b,E),a.default.muleq($,w);for(var F=0;F<m;F++)for(var K=0;K<y;K++){var q=(0,i.default)(new Float64Array(D.shape[0]),[D.shape[0]]);a.default.assign(q,D.pick(null,K)),a.default.addseq(a.default.negeq(q),D.get(F,K)),a.default.muleq(q,$.pick(F,null)),W.set(F,K,a.default.sum(q))}var G=2*(g+1)/g;return a.default.mulseq(W,G),[N,W]};var r=vu,i=c(r),u=Ts,a=c(u),o=Ns,l=c(o),d=Xu,p=c(d);function c(D){return D&&D.__esModule?D:{default:D}}var f=Number.EPSILON||2220446049250313e-31,h=(0,l.default)({args:["array"],body:function(b){}});t.exports=e.default})(DC,cs);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function q(G,L){var z=[],te=!0,le=!1,ve=void 0;try{for(var ye=G[Symbol.iterator](),Se;!(te=(Se=ye.next()).done)&&(z.push(Se.value),!(L&&z.length===L));te=!0);}catch(xe){le=!0,ve=xe}finally{try{!te&&ye.return&&ye.return()}finally{if(le)throw ve}}return z}return function(G,L){if(Array.isArray(G))return G;if(Symbol.iterator in Object(G))return q(G,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function q(G,L){for(var z=0;z<L.length;z++){var te=L[z];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(G,te.key,te)}}return function(G,L,z){return L&&q(G.prototype,L),z&&q(G,z),G}}(),u=ss,a=vu,o=P(a),l=Ts,d=P(l),p=ZF,c=P(p),f=pC,h=P(f),D=Ns,b=P(D),g=ls,m=P(g),y=Xu,E=P(y),w=fs,B=P(w),F=cs,O=P(F);function P(q){return q&&q.__esModule?q:{default:q}}function I(q){if(Array.isArray(q)){for(var G=0,L=Array(q.length);G<q.length;G++)L[G]=q[G];return L}else return Array.from(q)}function N(q,G){if(!(q instanceof G))throw new TypeError("Cannot call a class as a function")}function W(q,G){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G&&(typeof G=="object"||typeof G=="function")?G:q}function $(q,G){if(typeof G!="function"&&G!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof G);q.prototype=Object.create(G&&G.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),G&&(Object.setPrototypeOf?Object.setPrototypeOf(q,G):q.__proto__=G)}var K=function(q){$(G,q);function G(L){N(this,G);var z=W(this,Object.getPrototypeOf(G).call(this));return L=L||{},z.dim=L.dim||2,z.perplexity=L.perplexity||30,z.earlyExaggeration=L.earlyExaggeration||4,z.learningRate=L.learningRate||1e3,z.nIter=L.nIter||1e3,z.metric=L.metric||"euclidean",z.barneshut=L.barneshut||!1,z.inputData=null,z.outputEmbedding=null,z}return i(G,[{key:"init",value:function(z){z=z||{};var te=z.data||[],le=z.type||"dense";if(le==="dense")this.inputData=(0,c.default)(te);else if(le==="sparse"){for(var ve=[],ye=1,Se=function(gt){var mt=Math.max.apply(null,te.map(function(rt){return rt[gt]}))+1;ve.push(mt),ye*=mt},xe=0;xe<te[0].length;xe++)Se(xe);this.inputData=(0,o.default)(new Float64Array(ye),ve);var Fe=!0,Ne=!1,ke=void 0;try{for(var Ue=te[Symbol.iterator](),at;!(Fe=(at=Ue.next()).done);Fe=!0){var vt,Qe=at.value;(vt=this.inputData).set.apply(vt,I(Qe).concat([1]))}}catch(it){Ne=!0,ke=it}finally{try{!Fe&&Ue.return&&Ue.return()}finally{if(Ne)throw ke}}}else throw new Error("input data type must be dense or sparse");this.outputEmbedding=(0,m.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,E.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,B.default)(this.distances,this.perplexity);var z=Number.MAX_VALUE,te=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),d.default.mulseq(this.P,this.earlyExaggeration);var le=this._gradDesc(te,50,.5,0,0),ve=r(le,2);z=ve[0],te=ve[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var ye=this._gradDesc(te+1,100,.8,0,0),Se=r(ye,2);z=Se[0],te=Se[1],this.emit("progressStatus","Final optimization with momentum 0.8"),d.default.divseq(this.P,this.earlyExaggeration);var xe=this._gradDesc(te+1,this.nIter,.8,1e-6,1e-6),Fe=r(xe,2);return z=Fe[0],te=Fe[1],this.emit("progressStatus","Optimization end"),[z,te]}},{key:"rerun",value:function(){this.outputEmbedding=(0,m.default)(this.inputData.shape[0],this.dim);var z=this.run(),te=r(z,2),le=te[0],ve=te[1];return[le,ve]}},{key:"getOutput",value:function(){return(0,h.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var z=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),te=(0,o.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),le=0;le<this.outputEmbedding.shape[1];le++){var ve=d.default.sup(d.default.abs(te,this.outputEmbedding.pick(null,le)));d.default.divs(z.pick(null,le),this.outputEmbedding.pick(null,le),ve)}return(0,h.default)(z)}},{key:"_gradDesc",value:function(z,te,le){for(var ve=arguments.length<=3||arguments[3]===void 0?1e-6:arguments[3],ye=arguments.length<=4||arguments[4]===void 0?1e-6:arguments[4],Se=30,xe=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),Fe=new Float64Array(this.outputEmbedding.size),Ne=0;Ne<Fe.length;Ne++)Fe[Ne]=1;var ke=(0,o.default)(Fe,this.outputEmbedding.shape),Ue=Number.MAX_VALUE,at=Number.MAX_VALUE,vt=0,Qe=(0,b.default)({args:["array"],pre:function(Dt){this.sum=0},body:function(Dt){this.sum+=Dt*Dt},post:function(Dt){return Math.sqrt(this.sum)}}),it=(0,b.default)({args:["array","array","array"],body:function(Dt,jt,ar){}}),gt=void 0;for(gt=z;gt<te;gt++){var mt=(0,O.default)(this.outputEmbedding,this.P,this.alpha),rt=r(mt,2),Xe=rt[0],wt=rt[1],br=Math.abs(Xe-Ue);Ue=Xe;var Ft=Qe(wt);if(this.emit("progressIter",[gt,Ue,Ft]),Ue<at)at=Ue,vt=gt;else if(gt-vt>Se)break;if(ve>=Ft||ye>=br)break;it(ke,xe,wt),d.default.muleq(wt,ke);var Ae=(0,o.default)(new Float64Array(wt.size),wt.shape);d.default.muls(Ae,wt,this.learningRate),d.default.mulseq(xe,le),d.default.subeq(xe,Ae),d.default.addeq(this.outputEmbedding,xe),this.emit("progressData",this.getOutputScaled())}return[Ue,gt]}}]),G}(u.EventEmitter);e.default=K,t.exports=e.default})(dF,as);const _C=Ql(as);function yC(t){let e,r,i,u={ctx:t,current:null,token:null,hasCatch:!0,pending:EC,then:wC,catch:AC,value:18,error:19,blocks:[,,,]};return Di(r=t[6],u),{c(){e=zt(),u.block.c()},l(a){e=zt(),u.block.l(a)},m(a,o){_e(a,e,o),u.block.m(a,u.anchor=o),u.mount=()=>e.parentNode,u.anchor=e,i=!0},p(a,o){t=a,u.ctx=t,o&64&&r!==(r=t[6])&&Di(r,u)||Ds(u,t,o)},i(a){i||(Me(u.block),i=!0)},o(a){for(let o=0;o<3;o+=1){const l=u.blocks[o];Te(l)}i=!1},d(a){a&&V(e),u.block.d(a),u.token=null,u=null}}}function bC(t){let e,r,i,u,a;return{c(){e=ae("div"),r=ae("div"),i=ae("div"),u=ae("p"),a=Ye("Set OpenAI key in settings to use embedding map."),this.h()},l(o){e=se(o,"DIV",{class:!0});var l=re(e);r=se(l,"DIV",{class:!0});var d=re(r);i=se(d,"DIV",{class:!0});var p=re(i);u=se(p,"P",{class:!0});var c=re(u);a=$e(c,"Set OpenAI key in settings to use embedding map."),c.forEach(V),p.forEach(V),d.forEach(V),l.forEach(V),this.h()},h(){T(u,"class","text-center text-lg"),T(i,"class","h-20 w-52"),T(r,"class","flex flex-col justify-center"),T(e,"class","w-full h-full flex justify-center")},m(o,l){_e(o,e,l),J(e,r),J(r,i),J(i,u),J(u,a)},p:Pe,i:Pe,o:Pe,d(o){o&&V(e)}}}function AC(t){let e,r=t[19].message+"",i;return{c(){e=ae("p"),i=Ye(r),this.h()},l(u){e=se(u,"P",{style:!0});var a=re(e);i=$e(a,r),a.forEach(V),this.h()},h(){Zt(e,"color","red")},m(u,a){_e(u,e,a),J(e,i)},p(u,a){a&64&&r!==(r=u[19].message+"")&&Sn(i,r)},i:Pe,o:Pe,d(u){u&&V(e)}}}function wC(t){let e,r,i,u,a,o,l,d,p,c,f,h,D,b,g,m,y,E,w,B,F,O,P,I,N,W,$;r=new GE({props:{dimensions:t[3],center:t[8]}});let K=t[4].embedExponentialScaling&&jh(t);return{c(){e=ae("div"),ot(r.$$.fragment),u=Ge(),a=ae("div"),o=ae("div"),l=ae("label"),d=ae("span"),p=Ye("Exponential Scaling"),c=Ge(),f=ae("input"),D=Ge(),K&&K.c(),b=Ge(),g=ae("div"),m=ae("label"),y=ae("span"),E=Ye("# Prompts"),w=Ge(),B=ae("input"),F=Ge(),O=ae("div"),P=ae("button"),I=Ye("Shuffle"),this.h()},l(q){e=se(q,"DIV",{class:!0});var G=re(e);lt(r.$$.fragment,G),G.forEach(V),u=Ke(q),a=se(q,"DIV",{class:!0});var L=re(a);o=se(L,"DIV",{class:!0});var z=re(o);l=se(z,"LABEL",{class:!0});var te=re(l);d=se(te,"SPAN",{class:!0});var le=re(d);p=$e(le,"Exponential Scaling"),le.forEach(V),te.forEach(V),c=Ke(z),f=se(z,"INPUT",{type:!0,class:!0}),z.forEach(V),D=Ke(L),K&&K.l(L),b=Ke(L),g=se(L,"DIV",{class:!0});var ve=re(g);m=se(ve,"LABEL",{class:!0});var ye=re(m);y=se(ye,"SPAN",{class:!0});var Se=re(y);E=$e(Se,"# Prompts"),Se.forEach(V),ye.forEach(V),w=Ke(ve),B=se(ve,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),ve.forEach(V),F=Ke(L),O=se(L,"DIV",{class:!0});var xe=re(O);P=se(xe,"BUTTON",{class:!0});var Fe=re(P);I=$e(Fe,"Shuffle"),Fe.forEach(V),xe.forEach(V),L.forEach(V),this.h()},h(){T(e,"class","w-full h-full"),gs(()=>t[14].call(e)),T(d,"class","label-text"),T(l,"class","label"),T(f,"type","checkbox"),T(f,"class","toggle"),f.checked=h=t[4].embedExponentialScaling,T(o,"class","min-w-max px-2"),T(y,"class","label-text"),T(m,"class","label"),B.value=t[9],T(B,"type","range"),T(B,"min","1"),T(B,"max",t[2]),T(B,"step","1"),T(B,"class","range"),T(g,"class","w-full px-2"),T(P,"class","btn btn-sm btn-primary"),T(O,"class","w-32 px-2 pb-1 flex flex-col justify-end"),T(a,"class","px-2 py-4 pb-0 flex")},m(q,G){_e(q,e,G),ft(r,e,null),i=ms(e,t[14].bind(e)),_e(q,u,G),_e(q,a,G),J(a,o),J(o,l),J(l,d),J(d,p),J(o,c),J(o,f),J(a,D),K&&K.m(a,null),J(a,b),J(a,g),J(g,m),J(m,y),J(y,E),J(g,w),J(g,B),J(a,F),J(a,O),J(O,P),J(P,I),N=!0,W||($=[Le(f,"change",t[11]),Le(B,"change",t[10]),Le(P,"click",t[13])],W=!0)},p(q,G){const L={};G&8&&(L.dimensions=q[3]),G&256&&(L.center=q[8]),r.$set(L),(!N||G&16&&h!==(h=q[4].embedExponentialScaling))&&(f.checked=h),q[4].embedExponentialScaling?K?K.p(q,G):(K=jh(q),K.c(),K.m(a,b)):K&&(K.d(1),K=null),(!N||G&512)&&(B.value=q[9]),(!N||G&4)&&T(B,"max",q[2])},i(q){N||(Me(r.$$.fragment,q),N=!0)},o(q){Te(r.$$.fragment,q),N=!1},d(q){q&&V(e),ct(r),i(),q&&V(u),q&&V(a),K&&K.d(),W=!1,Wr($)}}}function jh(t){let e,r,i,u,a,o,l,d,p;return{c(){e=ae("div"),r=ae("label"),i=ae("span"),u=Ye("Scaling Power"),a=Ge(),o=ae("input"),this.h()},l(c){e=se(c,"DIV",{class:!0});var f=re(e);r=se(f,"LABEL",{class:!0});var h=re(r);i=se(h,"SPAN",{class:!0});var D=re(i);u=$e(D,"Scaling Power"),D.forEach(V),h.forEach(V),a=Ke(f),o=se(f,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),f.forEach(V),this.h()},h(){T(i,"class","label-text"),T(r,"class","label"),o.value=l=t[4].embedWeightScaling,T(o,"type","range"),T(o,"min","0.5"),T(o,"max","3"),T(o,"step","0.1"),T(o,"class","range"),T(e,"class","w-full px-2")},m(c,f){_e(c,e,f),J(e,r),J(r,i),J(i,u),J(e,a),J(e,o),d||(p=Le(o,"change",t[12]),d=!0)},p(c,f){f&16&&l!==(l=c[4].embedWeightScaling)&&(o.value=l)},d(c){c&&V(e),d=!1,p()}}}function EC(t){let e,r,i,u,a,o;return{c(){e=ae("div"),r=ae("div"),i=ae("div"),u=ae("progress"),this.h()},l(l){e=se(l,"DIV",{class:!0});var d=re(e);r=se(d,"DIV",{class:!0});var p=re(r);i=se(p,"DIV",{class:!0});var c=re(i);u=se(c,"PROGRESS",{class:!0,max:!0}),re(u).forEach(V),c.forEach(V),p.forEach(V),d.forEach(V),this.h()},h(){T(u,"class","progress progress-primary w-56"),u.value=a=Object.keys(t[7]).length,T(u,"max",o=Object.keys(t[4].weightedPrompts).length),T(i,"class","h-20 w-52"),T(r,"class","flex flex-col justify-center"),T(e,"class","w-full h-full flex justify-center")},m(l,d){_e(l,e,d),J(e,r),J(r,i),J(i,u)},p(l,d){d&128&&a!==(a=Object.keys(l[7]).length)&&(u.value=a),d&16&&o!==(o=Object.keys(l[4].weightedPrompts).length)&&T(u,"max",o)},i:Pe,o:Pe,d(l){l&&V(e)}}}function FC(t){let e,r,i,u;const a=[bC,yC],o=[];function l(d,p){return d[5]?1:0}return e=l(t),r=o[e]=a[e](t),{c(){r.c(),i=zt()},l(d){r.l(d),i=zt()},m(d,p){o[e].m(d,p),_e(d,i,p),u=!0},p(d,[p]){let c=e;e=l(d),e===c?o[e].p(d,p):(pn(),Te(o[c],1,1,()=>{o[c]=null}),vn(),r=o[e],r?r.p(d,p):(r=o[e]=a[e](d),r.c()),Me(r,1),r.m(i.parentNode,i))},i(d){u||(Me(r),u=!0)},o(d){Te(r),u=!1},d(d){o[e].d(d),d&&V(i)}}}function Vh(t){return!t.embeddings||Object.entries(t.embeddings).length!==Object.entries(t.weightedPrompts).length||(t.lastPromptChange||0)>(t.lastEmbeddingChange||0)}function CC(t,e,r){let i,u,a,o,l,d,p;Mt(t,mn,F=>r(4,l=F)),Mt(t,df,F=>r(5,d=F)),Mt(t,pp,F=>r(15,p=F));let c=0,f=0,h=null,D={};function b(F){F.target.value>0&&F.target.value<=i&&Pt.updateActivePrompt({...l,embedPromptLimit:F.target.value})}function g(F){Pt.updateActivePrompt({...l,embedExponentialScaling:!l.embedExponentialScaling})}function m(F){Pt.updateActivePrompt({...l,embedWeightScaling:F.target.value})}function y(F){let O=new _C({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:5e3,metric:"euclidean"});const P=Object.keys(F),I=Object.values(F);O.init({data:I,type:"dense"}),O.run();let W=O.getOutputScaled().map(([K,q])=>[(K+1)/2,(q+1)/2]);return P.reduce((K,q,G)=>(K[q]=W[G],K),{})}async function E(){Pt.updateActivePrompt({...l,scaledEmbedMappings:y(l.embeddings)})}async function w(){if(!d||!l.weightedPrompts)return;const F=Object.entries(l.weightedPrompts).map(([P,I])=>[P,I.text]),O=hf(d);r(7,D={});for(let P of F){const I=await lF(O,P[1],p);r(7,D[P[0]]=I.data.data[0].embedding,D)}Pt.updateActivePrompt({...l,embeddings:D,lastEmbeddingChange:Date.now(),scaledEmbedMappings:y(D)})}Iy(()=>{console.log(l.embedPromptLimit,i)}),Ty(()=>{console.log(l.embedPromptLimit,i)}),Ny(()=>{console.log(l.embedPromptLimit,i),d&&Vh(l)&&r(6,h=w())});function B(){c=this.clientWidth,f=this.clientHeight,r(0,c),r(1,f)}return t.$$.update=()=>{t.$$.dirty&16&&r(2,i=Object.keys(l.weightedPrompts||{}).length),t.$$.dirty&20&&r(9,u=l.embedPromptLimit||i),t.$$.dirty&3&&r(3,a=[c||250,f||250]),t.$$.dirty&8&&r(8,o=Ss(a)),t.$$.dirty&48&&d&&Vh(l)&&r(6,h=w())},[c,f,i,a,l,d,h,D,o,u,b,g,m,E,B]}class SC extends It{constructor(e){super(),Tt(this,e,CC,FC,Nt,{})}}const za="zeroPromptHandlingStore";function BC(){const t=On(!1),{subscribe:e,set:r,update:i}=t,u=typeof window<"u";return r(u&&localStorage[za]?JSON.parse(localStorage[za]):!1),{subscribe:e,update:a=>{u&&(localStorage[za]=JSON.stringify(!!a),r(!!a))},get:()=>Lt(t),delete:()=>{u&&(delete localStorage[za],r(!1))}}}const Wl=BC(),Bp=Bn(Wl,t=>Lt(Wl));function qh(t,e,r){const i=t.slice();return i[8]=e[r][0],i[9]=e[r][1],i}function zh(t,e){let r,i=e[9].text+"",u,a,o,l=ri(e[9],e[1].weightMode)+"",d,p,c;return{key:t,first:null,c(){r=ae("span"),u=Ye(i),a=Ye("::"),o=ae("b"),d=Ye(l),p=Ge(),this.h()},l(f){r=se(f,"SPAN",{style:!0});var h=re(r);u=$e(h,i),a=$e(h,"::"),o=se(h,"B",{});var D=re(o);d=$e(D,l),p=Ke(D),D.forEach(V),h.forEach(V),this.h()},h(){T(r,"style",c=`color: rgba(255,255,255,${e[3](e[9][e[0]])});`),this.first=r},m(f,h){_e(f,r,h),J(r,u),J(r,a),J(r,o),J(o,d),J(o,p)},p(f,h){e=f,h&6&&i!==(i=e[9].text+"")&&Sn(u,i),h&6&&l!==(l=ri(e[9],e[1].weightMode)+"")&&Sn(d,l),h&7&&c!==(c=`color: rgba(255,255,255,${e[3](e[9][e[0]])});`)&&T(r,"style",c)},d(f){f&&V(r)}}}function OC(t){let e,r,i=[],u=new Map,a,o,l=Object.entries(t[1].weightedPrompts).filter(t[6]);const d=p=>p[8];for(let p=0;p<l.length;p+=1){let c=qh(t,l,p),f=d(c);u.set(f,i[p]=zh(f,c))}return{c(){e=ae("div"),r=ae("p");for(let p=0;p<i.length;p+=1)i[p].c();this.h()},l(p){e=se(p,"DIV",{class:!0});var c=re(e);r=se(c,"P",{class:!0});var f=re(r);for(let h=0;h<i.length;h+=1)i[h].l(f);f.forEach(V),c.forEach(V),this.h()},h(){T(r,"class","text-sm select-none"),T(e,"class","normal-case font-light text-left cursor-copy bg-slate-900 rounded-md p-4 w-full h-32 overflow-y-auto hover:bg-slate-800 active:bg-slate-950")},m(p,c){_e(p,e,c),J(e,r);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(r,null);a||(o=Le(e,"click",t[4]),a=!0)},p(p,[c]){c&15&&(l=Object.entries(p[1].weightedPrompts).filter(p[6]),i=bi(i,c,d,1,p,l,u,r,pu,zh,null,qh))},i:Pe,o:Pe,d(p){p&&V(e);for(let c=0;c<i.length;c+=1)i[c].d();a=!1,o()}}}function MC(t,e,r){let i,u,a,o;Mt(t,mn,f=>r(1,a=f)),Mt(t,Bp,f=>r(2,o=f));let l="parsedWeight";function d(f){return((f/i/u+.75)/2).toFixed(2)}function p(){const f=Object.entries(a.weightedPrompts).filter(h=>o||ri(h[1],a.weightMode)).map(([h,D])=>`${D.text}::${ri(D,a.weightMode)}`).join(" ");navigator.clipboard.writeText(f)}const c=f=>o||ri(f[1],a.weightMode);return t.$$.update=()=>{if(t.$$.dirty&2)switch(a.weightMode){case"circle":r(0,l="circleWeight");break;case"bars":r(0,l="barWeight");break;case"embed":r(0,l="embedWeight");break;case"pie":r(0,l="pieWeight");break}t.$$.dirty&3&&r(5,i=Object.values(a.weightedPrompts).reduce((f,h)=>h[l]+f,0)),t.$$.dirty&35&&(u=Math.max(...Object.values(a.weightedPrompts).map(f=>f[l]/i)))},[l,a,o,d,p,i,c]}class PC extends It{constructor(e){super(),Tt(this,e,MC,OC,Nt,{})}}function xC(t){let e,r,i,u;return{c(){e=bt("svg"),r=bt("rect"),i=bt("rect"),u=bt("rect"),this.h()},l(a){e=At(a,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var o=re(e);r=At(o,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),re(r).forEach(V),i=At(o,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),re(i).forEach(V),u=At(o,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),re(u).forEach(V),o.forEach(V),this.h()},h(){T(r,"x","5"),T(r,"y","12"),T(r,"width","40"),T(r,"height","4"),T(r,"fill","rgba(255,255,255, 0.7)"),T(i,"x","5"),T(i,"y","23"),T(i,"width","30"),T(i,"height","4"),T(i,"fill","rgba(255,255,255, 0.7)"),T(u,"x","5"),T(u,"y","34"),T(u,"width","35"),T(u,"height","4"),T(u,"fill","rgba(255,255,255, 0.7)"),T(e,"xmlns","http://www.w3.org/2000/svg"),T(e,"fill","rgba(255,255,255, 0.7)"),T(e,"class","h-6 w-6"),T(e,"viewBox","0 0 50 50")},m(a,o){_e(a,e,o),J(e,r),J(e,i),J(e,u)},p:Pe,i:Pe,o:Pe,d(a){a&&V(e)}}}class IC extends It{constructor(e){super(),Tt(this,e,null,xC,Nt,{})}}function TC(t){let e,r,i;return{c(){e=bt("svg"),r=bt("circle"),i=bt("circle"),this.h()},l(u){e=At(u,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var a=re(e);r=At(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),re(r).forEach(V),i=At(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),re(i).forEach(V),a.forEach(V),this.h()},h(){T(r,"cx","25"),T(r,"cy","25"),T(r,"r","20"),T(r,"stroke","rgba(255,255,255, 0.7)"),T(r,"stroke-width","2"),T(r,"fill","none"),T(i,"cx","25"),T(i,"cy","25"),T(i,"r","2"),T(i,"stroke","rgba(255,255,255, 0.7)"),T(i,"stroke-width","1"),T(i,"fill","rgba(255,255,255, 0.7)"),T(e,"xmlns","http://www.w3.org/2000/svg"),T(e,"fill","rgba(255,255,255, 0.7)"),T(e,"class","h-6 w-6"),T(e,"viewBox","0 0 50 50")},m(u,a){_e(u,e,a),J(e,r),J(e,i)},p:Pe,i:Pe,o:Pe,d(u){u&&V(e)}}}class NC extends It{constructor(e){super(),Tt(this,e,null,TC,Nt,{})}}function kC(t){let e,r,i,u,a,o;return{c(){e=bt("svg"),r=bt("circle"),i=bt("circle"),u=bt("circle"),a=bt("circle"),o=bt("circle"),this.h()},l(l){e=At(l,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var d=re(e);r=At(d,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),re(r).forEach(V),i=At(d,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),re(i).forEach(V),u=At(d,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),re(u).forEach(V),a=At(d,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),re(a).forEach(V),o=At(d,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),re(o).forEach(V),d.forEach(V),this.h()},h(){T(r,"cx","20"),T(r,"cy","80"),T(r,"r","5"),T(r,"fill","rgba(255,255,255, 0.7)"),T(i,"cx","40"),T(i,"cy","40"),T(i,"r","5"),T(i,"fill","rgba(255,255,255, 0.7)"),T(u,"cx","70"),T(u,"cy","20"),T(u,"r","5"),T(u,"fill","rgba(255,255,255, 0.7)"),T(a,"cx","80"),T(a,"cy","60"),T(a,"r","5"),T(a,"fill","rgba(255,255,255, 0.7)"),T(o,"cx","60"),T(o,"cy","75"),T(o,"r","5"),T(o,"fill","rgba(255,255,255, 0.7)"),T(e,"xmlns","http://www.w3.org/2000/svg"),T(e,"fill","rgba(255,255,255, 0.7)"),T(e,"class","h-6 w-6"),T(e,"viewBox","0 0 100 100")},m(l,d){_e(l,e,d),J(e,r),J(e,i),J(e,u),J(e,a),J(e,o)},p:Pe,i:Pe,o:Pe,d(l){l&&V(e)}}}class RC extends It{constructor(e){super(),Tt(this,e,null,kC,Nt,{})}}function LC(t){let e,r,i,u;return{c(){e=bt("svg"),r=bt("path"),i=bt("path"),u=bt("path"),this.h()},l(a){e=At(a,"svg",{xmlns:!0,class:!0,viewBox:!0});var o=re(e);r=At(o,"path",{d:!0,fill:!0}),re(r).forEach(V),i=At(o,"path",{d:!0,fill:!0}),re(i).forEach(V),u=At(o,"path",{d:!0,fill:!0}),re(u).forEach(V),o.forEach(V),this.h()},h(){T(r,"d","M50 50 L50 10 A40 40 0 0 1 90 50 z"),T(r,"fill","rgba(255,255,255, 0.7)"),T(i,"d","M50 50 L90 50 A40 40 0 0 1 50 90 z"),T(i,"fill","rgba(255,255,255, 0.3)"),T(u,"d","M50 50 L50 90 A40 40 0 0 1 10 50 z"),T(u,"fill","rgba(255,255,255, 0.9)"),T(e,"xmlns","http://www.w3.org/2000/svg"),T(e,"class","h-6 w-6"),T(e,"viewBox","0 0 100 100")},m(a,o){_e(a,e,o),J(e,r),J(e,i),J(e,u)},p:Pe,i:Pe,o:Pe,d(a){a&&V(e)}}}class UC extends It{constructor(e){super(),Tt(this,e,null,LC,Nt,{})}}function jC(t){let e,r;return e=new SC({}),{c(){ot(e.$$.fragment)},l(i){lt(e.$$.fragment,i)},m(i,u){ft(e,i,u),r=!0},i(i){r||(Me(e.$$.fragment,i),r=!0)},o(i){Te(e.$$.fragment,i),r=!1},d(i){ct(e,i)}}}function VC(t){let e,r;return e=new CE({}),{c(){ot(e.$$.fragment)},l(i){lt(e.$$.fragment,i)},m(i,u){ft(e,i,u),r=!0},i(i){r||(Me(e.$$.fragment,i),r=!0)},o(i){Te(e.$$.fragment,i),r=!1},d(i){ct(e,i)}}}function qC(t){let e,r;return e=new zE({}),{c(){ot(e.$$.fragment)},l(i){lt(e.$$.fragment,i)},m(i,u){ft(e,i,u),r=!0},i(i){r||(Me(e.$$.fragment,i),r=!0)},o(i){Te(e.$$.fragment,i),r=!1},d(i){ct(e,i)}}}function zC(t){let e,r;return e=new TE({}),{c(){ot(e.$$.fragment)},l(i){lt(e.$$.fragment,i)},m(i,u){ft(e,i,u),r=!0},i(i){r||(Me(e.$$.fragment,i),r=!0)},o(i){Te(e.$$.fragment,i),r=!1},d(i){ct(e,i)}}}function WC(t){let e,r,i,u,a,o,l,d,p,c,f,h,D,b,g,m,y,E,w,B,F,O,P,I,N,W,$;a=new IC({}),p=new UC({}),D=new NC({}),y=new RC({});const K=[zC,qC,VC,jC],q=[];function G(L,z){return L[0].weightMode==="bars"?0:L[0].weightMode==="pie"?1:L[0].weightMode==="circle"?2:L[0].weightMode==="embed"?3:-1}return~(B=G(t))&&(F=q[B]=K[B](t)),I=new PC({}),{c(){e=ae("div"),r=ae("div"),i=ae("div"),u=ae("button"),ot(a.$$.fragment),l=Ge(),d=ae("button"),ot(p.$$.fragment),f=Ge(),h=ae("button"),ot(D.$$.fragment),g=Ge(),m=ae("button"),ot(y.$$.fragment),w=Ge(),F&&F.c(),O=Ge(),P=ae("div"),ot(I.$$.fragment),this.h()},l(L){e=se(L,"DIV",{class:!0});var z=re(e);r=se(z,"DIV",{class:!0});var te=re(r);i=se(te,"DIV",{class:!0});var le=re(i);u=se(le,"BUTTON",{class:!0});var ve=re(u);lt(a.$$.fragment,ve),ve.forEach(V),l=Ke(le),d=se(le,"BUTTON",{class:!0});var ye=re(d);lt(p.$$.fragment,ye),ye.forEach(V),f=Ke(le),h=se(le,"BUTTON",{class:!0});var Se=re(h);lt(D.$$.fragment,Se),Se.forEach(V),g=Ke(le),m=se(le,"BUTTON",{class:!0});var xe=re(m);lt(y.$$.fragment,xe),xe.forEach(V),le.forEach(V),w=Ke(te),F&&F.l(te),O=Ke(te),P=se(te,"DIV",{class:!0});var Fe=re(P);lt(I.$$.fragment,Fe),Fe.forEach(V),te.forEach(V),z.forEach(V),this.h()},h(){T(u,"class",o=t[0].weightMode==="bars"?"btn btn-sm btn-active":"btn btn-sm"),T(d,"class",c=t[0].weightMode==="pie"?"btn btn-sm btn-active":"btn btn-sm"),T(h,"class",b=t[0].weightMode==="circle"?"btn btn-sm btn-active":"btn btn-sm"),T(m,"class",E=t[0].weightMode==="embed"?"btn btn-sm btn-active":"btn btn-sm"),T(i,"class","btn-group btn-group-horizontal w-full flex justify-end p-2"),T(P,"class","h-48 w-full p-4 flex flex-col"),T(r,"class","flex flex-col h-full place-content-between"),T(e,"class","w-full h-full flex flex-col")},m(L,z){_e(L,e,z),J(e,r),J(r,i),J(i,u),ft(a,u,null),J(i,l),J(i,d),ft(p,d,null),J(i,f),J(i,h),ft(D,h,null),J(i,g),J(i,m),ft(y,m,null),J(r,w),~B&&q[B].m(r,null),J(r,O),J(r,P),ft(I,P,null),N=!0,W||($=[Le(u,"click",t[2]),Le(d,"click",t[3]),Le(h,"click",t[4]),Le(m,"click",t[5])],W=!0)},p(L,[z]){(!N||z&1&&o!==(o=L[0].weightMode==="bars"?"btn btn-sm btn-active":"btn btn-sm"))&&T(u,"class",o),(!N||z&1&&c!==(c=L[0].weightMode==="pie"?"btn btn-sm btn-active":"btn btn-sm"))&&T(d,"class",c),(!N||z&1&&b!==(b=L[0].weightMode==="circle"?"btn btn-sm btn-active":"btn btn-sm"))&&T(h,"class",b),(!N||z&1&&E!==(E=L[0].weightMode==="embed"?"btn btn-sm btn-active":"btn btn-sm"))&&T(m,"class",E);let te=B;B=G(L),B!==te&&(F&&(pn(),Te(q[te],1,1,()=>{q[te]=null}),vn()),~B?(F=q[B],F||(F=q[B]=K[B](L),F.c()),Me(F,1),F.m(r,O)):F=null)},i(L){N||(Me(a.$$.fragment,L),Me(p.$$.fragment,L),Me(D.$$.fragment,L),Me(y.$$.fragment,L),Me(F),Me(I.$$.fragment,L),N=!0)},o(L){Te(a.$$.fragment,L),Te(p.$$.fragment,L),Te(D.$$.fragment,L),Te(y.$$.fragment,L),Te(F),Te(I.$$.fragment,L),N=!1},d(L){L&&V(e),ct(a),ct(p),ct(D),ct(y),~B&&q[B].d(),ct(I),W=!1,Wr($)}}}function HC(t,e,r){let i;Mt(t,mn,p=>r(0,i=p));function u(p){const c={...i,weightMode:p};Pt.updateActivePrompt(c)}return[i,u,()=>u("bars"),()=>u("pie"),()=>u("circle"),()=>u("embed")]}class GC extends It{constructor(e){super(),Tt(this,e,HC,WC,Nt,{})}}function KC(){const t=On({}),{subscribe:e,set:r,update:i}=t,u=typeof window<"u";return r(u&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith("prompt")){const l=o.split("_")[1];a[l]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,updatePrompt:(a,o)=>{const l=Lt(t),p={...l[a]||{},...o};u&&(localStorage[`prompt_${a}`]=JSON.stringify(p));const c={...l,[a]:p};r(c)},getPrompt:a=>Lt(t)[a],deletePrompt:a=>{u&&delete localStorage[`prompt_${a}`];const o={...Lt(t)};delete o[a],r(o)}}}const hs=KC(),YC=Bn(hs,t=>Object.entries(Lt(hs)));var ds={},$C={get exports(){return ds},set exports(t){ds=t}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var r,i="4.17.21",u=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",p=500,c="__lodash_placeholder__",f=1,h=2,D=4,b=1,g=2,m=1,y=2,E=4,w=8,B=16,F=32,O=64,P=128,I=256,N=512,W=30,$="...",K=800,q=16,G=1,L=2,z=3,te=1/0,le=9007199254740991,ve=17976931348623157e292,ye=0/0,Se=4294967295,xe=Se-1,Fe=Se>>>1,Ne=[["ary",P],["bind",m],["bindKey",y],["curry",w],["curryRight",B],["flip",N],["partial",F],["partialRight",O],["rearg",I]],ke="[object Arguments]",Ue="[object Array]",at="[object AsyncFunction]",vt="[object Boolean]",Qe="[object Date]",it="[object DOMException]",gt="[object Error]",mt="[object Function]",rt="[object GeneratorFunction]",Xe="[object Map]",wt="[object Number]",br="[object Null]",Ft="[object Object]",Ae="[object Promise]",be="[object Proxy]",Dt="[object RegExp]",jt="[object Set]",ar="[object String]",R="[object Symbol]",j="[object Undefined]",Y="[object WeakMap]",ue="[object WeakSet]",ee="[object ArrayBuffer]",he="[object DataView]",ie="[object Float32Array]",oe="[object Float64Array]",De="[object Int8Array]",Be="[object Int16Array]",We="[object Int32Array]",we="[object Uint8Array]",Wt="[object Uint8ClampedArray]",kt="[object Uint16Array]",Jt="[object Uint32Array]",Ht=/\b__p \+= '';/g,pr=/\b(__p \+=) '' \+/g,Gt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vr=/&(?:amp|lt|gt|quot|#39);/g,sr=/[&<>"']/g,or=RegExp(vr.source),en=RegExp(sr.source),fr=/<%-([\s\S]+?)%>/g,Dn=/<%([\s\S]+?)%>/g,qn=/<%=([\s\S]+?)%>/g,Mn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pn=/^\w*$/,Ui=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ei=/[\\^$.*+?()[\]{}|]/g,gu=RegExp(Ei.source),Ar=/^\s+/,Qt=/\s/,mu=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ni=/\{\n\/\* \[wrapped with (.+)\] \*/,tn=/,? & /,zn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Fi=/[()=,{}\[\]\/\s]/,Du=/\\(\\)?/g,_u=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ji=/\w*$/,yu=/^[-+]0x[0-9a-f]+$/i,bu=/^0b[01]+$/i,Au=/^\[object .+?Constructor\]$/,wu=/^0o[0-7]+$/i,Eu=/^(?:0|[1-9]\d*)$/,Fu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ii=/($^)/,Cu=/['\n\r\u2028\u2029\\]/g,ui="\\ud800-\\udfff",Su="\\u0300-\\u036f",Bu="\\ufe20-\\ufe2f",Ou="\\u20d0-\\u20ff",Vi=Su+Bu+Ou,xn="\\u2700-\\u27bf",gr="a-z\\xdf-\\xf6\\xf8-\\xff",rr="\\xac\\xb1\\xd7\\xf7",Ir="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ci="\\u2000-\\u206f",Wn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",In="A-Z\\xc0-\\xd6\\xd8-\\xde",Si="\\ufe0e\\ufe0f",_n=rr+Ir+Ci+Wn,rn="['’]",ks="["+ui+"]",Mu="["+_n+"]",qi="["+Vi+"]",ea="\\d+",_="["+xn+"]",C="["+gr+"]",k="[^"+ui+_n+ea+xn+gr+In+"]",Z="\\ud83c[\\udffb-\\udfff]",ce="(?:"+qi+"|"+Z+")",Ee="[^"+ui+"]",et="(?:\\ud83c[\\udde6-\\uddff]){2}",dt="[\\ud800-\\udbff][\\udc00-\\udfff]",Vt="["+In+"]",nr="\\u200d",vf="(?:"+C+"|"+k+")",Np="(?:"+Vt+"|"+k+")",gf="(?:"+rn+"(?:d|ll|m|re|s|t|ve))?",mf="(?:"+rn+"(?:D|LL|M|RE|S|T|VE))?",Df=ce+"?",_f="["+Si+"]?",kp="(?:"+nr+"(?:"+[Ee,et,dt].join("|")+")"+_f+Df+")*",Rp="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Lp="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",yf=_f+Df+kp,Up="(?:"+[_,et,dt].join("|")+")"+yf,jp="(?:"+[Ee+qi+"?",qi,et,dt,ks].join("|")+")",Vp=RegExp(rn,"g"),qp=RegExp(qi,"g"),Rs=RegExp(Z+"(?="+Z+")|"+jp+yf,"g"),zp=RegExp([Vt+"?"+C+"+"+gf+"(?="+[Mu,Vt,"$"].join("|")+")",Np+"+"+mf+"(?="+[Mu,Vt+vf,"$"].join("|")+")",Vt+"?"+vf+"+"+gf,Vt+"+"+mf,Lp,Rp,ea,Up].join("|"),"g"),Wp=RegExp("["+nr+ui+Vi+Si+"]"),Hp=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gp=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kp=-1,Ut={};Ut[ie]=Ut[oe]=Ut[De]=Ut[Be]=Ut[We]=Ut[we]=Ut[Wt]=Ut[kt]=Ut[Jt]=!0,Ut[ke]=Ut[Ue]=Ut[ee]=Ut[vt]=Ut[he]=Ut[Qe]=Ut[gt]=Ut[mt]=Ut[Xe]=Ut[wt]=Ut[Ft]=Ut[Dt]=Ut[jt]=Ut[ar]=Ut[Y]=!1;var Rt={};Rt[ke]=Rt[Ue]=Rt[ee]=Rt[he]=Rt[vt]=Rt[Qe]=Rt[ie]=Rt[oe]=Rt[De]=Rt[Be]=Rt[We]=Rt[Xe]=Rt[wt]=Rt[Ft]=Rt[Dt]=Rt[jt]=Rt[ar]=Rt[R]=Rt[we]=Rt[Wt]=Rt[kt]=Rt[Jt]=!0,Rt[gt]=Rt[mt]=Rt[Y]=!1;var Yp={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},$p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Zp={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Xp={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Jp=parseFloat,Qp=parseInt,bf=typeof lr=="object"&&lr&&lr.Object===Object&&lr,e1=typeof self=="object"&&self&&self.Object===Object&&self,wr=bf||e1||Function("return this")(),Ls=e&&!e.nodeType&&e,Bi=Ls&&!0&&t&&!t.nodeType&&t,Af=Bi&&Bi.exports===Ls,Us=Af&&bf.process,nn=function(){try{var X=Bi&&Bi.require&&Bi.require("util").types;return X||Us&&Us.binding&&Us.binding("util")}catch{}}(),wf=nn&&nn.isArrayBuffer,Ef=nn&&nn.isDate,Ff=nn&&nn.isMap,Cf=nn&&nn.isRegExp,Sf=nn&&nn.isSet,Bf=nn&&nn.isTypedArray;function Gr(X,fe,ne){switch(ne.length){case 0:return X.call(fe);case 1:return X.call(fe,ne[0]);case 2:return X.call(fe,ne[0],ne[1]);case 3:return X.call(fe,ne[0],ne[1],ne[2])}return X.apply(fe,ne)}function t1(X,fe,ne,Oe){for(var Ze=-1,_t=X==null?0:X.length;++Ze<_t;){var cr=X[Ze];fe(Oe,cr,ne(cr),X)}return Oe}function un(X,fe){for(var ne=-1,Oe=X==null?0:X.length;++ne<Oe&&fe(X[ne],ne,X)!==!1;);return X}function r1(X,fe){for(var ne=X==null?0:X.length;ne--&&fe(X[ne],ne,X)!==!1;);return X}function Of(X,fe){for(var ne=-1,Oe=X==null?0:X.length;++ne<Oe;)if(!fe(X[ne],ne,X))return!1;return!0}function ai(X,fe){for(var ne=-1,Oe=X==null?0:X.length,Ze=0,_t=[];++ne<Oe;){var cr=X[ne];fe(cr,ne,X)&&(_t[Ze++]=cr)}return _t}function ta(X,fe){var ne=X==null?0:X.length;return!!ne&&zi(X,fe,0)>-1}function js(X,fe,ne){for(var Oe=-1,Ze=X==null?0:X.length;++Oe<Ze;)if(ne(fe,X[Oe]))return!0;return!1}function qt(X,fe){for(var ne=-1,Oe=X==null?0:X.length,Ze=Array(Oe);++ne<Oe;)Ze[ne]=fe(X[ne],ne,X);return Ze}function si(X,fe){for(var ne=-1,Oe=fe.length,Ze=X.length;++ne<Oe;)X[Ze+ne]=fe[ne];return X}function Vs(X,fe,ne,Oe){var Ze=-1,_t=X==null?0:X.length;for(Oe&&_t&&(ne=X[++Ze]);++Ze<_t;)ne=fe(ne,X[Ze],Ze,X);return ne}function n1(X,fe,ne,Oe){var Ze=X==null?0:X.length;for(Oe&&Ze&&(ne=X[--Ze]);Ze--;)ne=fe(ne,X[Ze],Ze,X);return ne}function qs(X,fe){for(var ne=-1,Oe=X==null?0:X.length;++ne<Oe;)if(fe(X[ne],ne,X))return!0;return!1}var i1=zs("length");function u1(X){return X.split("")}function a1(X){return X.match(zn)||[]}function Mf(X,fe,ne){var Oe;return ne(X,function(Ze,_t,cr){if(fe(Ze,_t,cr))return Oe=_t,!1}),Oe}function ra(X,fe,ne,Oe){for(var Ze=X.length,_t=ne+(Oe?1:-1);Oe?_t--:++_t<Ze;)if(fe(X[_t],_t,X))return _t;return-1}function zi(X,fe,ne){return fe===fe?D1(X,fe,ne):ra(X,Pf,ne)}function s1(X,fe,ne,Oe){for(var Ze=ne-1,_t=X.length;++Ze<_t;)if(Oe(X[Ze],fe))return Ze;return-1}function Pf(X){return X!==X}function xf(X,fe){var ne=X==null?0:X.length;return ne?Hs(X,fe)/ne:ye}function zs(X){return function(fe){return fe==null?r:fe[X]}}function Ws(X){return function(fe){return X==null?r:X[fe]}}function If(X,fe,ne,Oe,Ze){return Ze(X,function(_t,cr,Ot){ne=Oe?(Oe=!1,_t):fe(ne,_t,cr,Ot)}),ne}function o1(X,fe){var ne=X.length;for(X.sort(fe);ne--;)X[ne]=X[ne].value;return X}function Hs(X,fe){for(var ne,Oe=-1,Ze=X.length;++Oe<Ze;){var _t=fe(X[Oe]);_t!==r&&(ne=ne===r?_t:ne+_t)}return ne}function Gs(X,fe){for(var ne=-1,Oe=Array(X);++ne<X;)Oe[ne]=fe(ne);return Oe}function l1(X,fe){return qt(fe,function(ne){return[ne,X[ne]]})}function Tf(X){return X&&X.slice(0,Lf(X)+1).replace(Ar,"")}function Kr(X){return function(fe){return X(fe)}}function Ks(X,fe){return qt(fe,function(ne){return X[ne]})}function Pu(X,fe){return X.has(fe)}function Nf(X,fe){for(var ne=-1,Oe=X.length;++ne<Oe&&zi(fe,X[ne],0)>-1;);return ne}function kf(X,fe){for(var ne=X.length;ne--&&zi(fe,X[ne],0)>-1;);return ne}function f1(X,fe){for(var ne=X.length,Oe=0;ne--;)X[ne]===fe&&++Oe;return Oe}var c1=Ws(Yp),h1=Ws($p);function d1(X){return"\\"+Xp[X]}function p1(X,fe){return X==null?r:X[fe]}function Wi(X){return Wp.test(X)}function v1(X){return Hp.test(X)}function g1(X){for(var fe,ne=[];!(fe=X.next()).done;)ne.push(fe.value);return ne}function Ys(X){var fe=-1,ne=Array(X.size);return X.forEach(function(Oe,Ze){ne[++fe]=[Ze,Oe]}),ne}function Rf(X,fe){return function(ne){return X(fe(ne))}}function oi(X,fe){for(var ne=-1,Oe=X.length,Ze=0,_t=[];++ne<Oe;){var cr=X[ne];(cr===fe||cr===c)&&(X[ne]=c,_t[Ze++]=ne)}return _t}function na(X){var fe=-1,ne=Array(X.size);return X.forEach(function(Oe){ne[++fe]=Oe}),ne}function m1(X){var fe=-1,ne=Array(X.size);return X.forEach(function(Oe){ne[++fe]=[Oe,Oe]}),ne}function D1(X,fe,ne){for(var Oe=ne-1,Ze=X.length;++Oe<Ze;)if(X[Oe]===fe)return Oe;return-1}function _1(X,fe,ne){for(var Oe=ne+1;Oe--;)if(X[Oe]===fe)return Oe;return Oe}function Hi(X){return Wi(X)?b1(X):i1(X)}function yn(X){return Wi(X)?A1(X):u1(X)}function Lf(X){for(var fe=X.length;fe--&&Qt.test(X.charAt(fe)););return fe}var y1=Ws(Zp);function b1(X){for(var fe=Rs.lastIndex=0;Rs.test(X);)++fe;return fe}function A1(X){return X.match(Rs)||[]}function w1(X){return X.match(zp)||[]}var E1=function X(fe){fe=fe==null?wr:Gi.defaults(wr.Object(),fe,Gi.pick(wr,Gp));var ne=fe.Array,Oe=fe.Date,Ze=fe.Error,_t=fe.Function,cr=fe.Math,Ot=fe.Object,$s=fe.RegExp,F1=fe.String,an=fe.TypeError,ia=ne.prototype,C1=_t.prototype,Ki=Ot.prototype,ua=fe["__core-js_shared__"],aa=C1.toString,Et=Ki.hasOwnProperty,S1=0,Uf=function(){var n=/[^.]+$/.exec(ua&&ua.keys&&ua.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),sa=Ki.toString,B1=aa.call(Ot),O1=wr._,M1=$s("^"+aa.call(Et).replace(Ei,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oa=Af?fe.Buffer:r,li=fe.Symbol,la=fe.Uint8Array,jf=oa?oa.allocUnsafe:r,fa=Rf(Ot.getPrototypeOf,Ot),Vf=Ot.create,qf=Ki.propertyIsEnumerable,ca=ia.splice,zf=li?li.isConcatSpreadable:r,xu=li?li.iterator:r,Oi=li?li.toStringTag:r,ha=function(){try{var n=Ti(Ot,"defineProperty");return n({},"",{}),n}catch{}}(),P1=fe.clearTimeout!==wr.clearTimeout&&fe.clearTimeout,x1=Oe&&Oe.now!==wr.Date.now&&Oe.now,I1=fe.setTimeout!==wr.setTimeout&&fe.setTimeout,da=cr.ceil,pa=cr.floor,Zs=Ot.getOwnPropertySymbols,T1=oa?oa.isBuffer:r,Wf=fe.isFinite,N1=ia.join,k1=Rf(Ot.keys,Ot),hr=cr.max,Or=cr.min,R1=Oe.now,L1=fe.parseInt,Hf=cr.random,U1=ia.reverse,Xs=Ti(fe,"DataView"),Iu=Ti(fe,"Map"),Js=Ti(fe,"Promise"),Yi=Ti(fe,"Set"),Tu=Ti(fe,"WeakMap"),Nu=Ti(Ot,"create"),va=Tu&&new Tu,$i={},j1=Ni(Xs),V1=Ni(Iu),q1=Ni(Js),z1=Ni(Yi),W1=Ni(Tu),ga=li?li.prototype:r,ku=ga?ga.valueOf:r,Gf=ga?ga.toString:r;function M(n){if(er(n)&&!Je(n)&&!(n instanceof ht)){if(n instanceof sn)return n;if(Et.call(n,"__wrapped__"))return Kc(n)}return new sn(n)}var Zi=function(){function n(){}return function(s){if(!Kt(s))return{};if(Vf)return Vf(s);n.prototype=s;var v=new n;return n.prototype=r,v}}();function ma(){}function sn(n,s){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=r}M.templateSettings={escape:fr,evaluate:Dn,interpolate:qn,variable:"",imports:{_:M}},M.prototype=ma.prototype,M.prototype.constructor=M,sn.prototype=Zi(ma.prototype),sn.prototype.constructor=sn;function ht(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Se,this.__views__=[]}function H1(){var n=new ht(this.__wrapped__);return n.__actions__=Lr(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Lr(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Lr(this.__views__),n}function G1(){if(this.__filtered__){var n=new ht(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function K1(){var n=this.__wrapped__.value(),s=this.__dir__,v=Je(n),A=s<0,S=v?n.length:0,x=ug(0,S,this.__views__),U=x.start,H=x.end,Q=H-U,de=A?H:U-1,pe=this.__iteratees__,me=pe.length,Ce=0,Ie=Or(Q,this.__takeCount__);if(!v||!A&&S==Q&&Ie==Q)return gc(n,this.__actions__);var qe=[];e:for(;Q--&&Ce<Ie;){de+=s;for(var nt=-1,ze=n[de];++nt<me;){var st=pe[nt],pt=st.iteratee,Zr=st.type,kr=pt(ze);if(Zr==L)ze=kr;else if(!kr){if(Zr==G)continue e;break e}}qe[Ce++]=ze}return qe}ht.prototype=Zi(ma.prototype),ht.prototype.constructor=ht;function Mi(n){var s=-1,v=n==null?0:n.length;for(this.clear();++s<v;){var A=n[s];this.set(A[0],A[1])}}function Y1(){this.__data__=Nu?Nu(null):{},this.size=0}function $1(n){var s=this.has(n)&&delete this.__data__[n];return this.size-=s?1:0,s}function Z1(n){var s=this.__data__;if(Nu){var v=s[n];return v===d?r:v}return Et.call(s,n)?s[n]:r}function X1(n){var s=this.__data__;return Nu?s[n]!==r:Et.call(s,n)}function J1(n,s){var v=this.__data__;return this.size+=this.has(n)?0:1,v[n]=Nu&&s===r?d:s,this}Mi.prototype.clear=Y1,Mi.prototype.delete=$1,Mi.prototype.get=Z1,Mi.prototype.has=X1,Mi.prototype.set=J1;function Hn(n){var s=-1,v=n==null?0:n.length;for(this.clear();++s<v;){var A=n[s];this.set(A[0],A[1])}}function Q1(){this.__data__=[],this.size=0}function ev(n){var s=this.__data__,v=Da(s,n);if(v<0)return!1;var A=s.length-1;return v==A?s.pop():ca.call(s,v,1),--this.size,!0}function tv(n){var s=this.__data__,v=Da(s,n);return v<0?r:s[v][1]}function rv(n){return Da(this.__data__,n)>-1}function nv(n,s){var v=this.__data__,A=Da(v,n);return A<0?(++this.size,v.push([n,s])):v[A][1]=s,this}Hn.prototype.clear=Q1,Hn.prototype.delete=ev,Hn.prototype.get=tv,Hn.prototype.has=rv,Hn.prototype.set=nv;function Gn(n){var s=-1,v=n==null?0:n.length;for(this.clear();++s<v;){var A=n[s];this.set(A[0],A[1])}}function iv(){this.size=0,this.__data__={hash:new Mi,map:new(Iu||Hn),string:new Mi}}function uv(n){var s=Ma(this,n).delete(n);return this.size-=s?1:0,s}function av(n){return Ma(this,n).get(n)}function sv(n){return Ma(this,n).has(n)}function ov(n,s){var v=Ma(this,n),A=v.size;return v.set(n,s),this.size+=v.size==A?0:1,this}Gn.prototype.clear=iv,Gn.prototype.delete=uv,Gn.prototype.get=av,Gn.prototype.has=sv,Gn.prototype.set=ov;function Pi(n){var s=-1,v=n==null?0:n.length;for(this.__data__=new Gn;++s<v;)this.add(n[s])}function lv(n){return this.__data__.set(n,d),this}function fv(n){return this.__data__.has(n)}Pi.prototype.add=Pi.prototype.push=lv,Pi.prototype.has=fv;function bn(n){var s=this.__data__=new Hn(n);this.size=s.size}function cv(){this.__data__=new Hn,this.size=0}function hv(n){var s=this.__data__,v=s.delete(n);return this.size=s.size,v}function dv(n){return this.__data__.get(n)}function pv(n){return this.__data__.has(n)}function vv(n,s){var v=this.__data__;if(v instanceof Hn){var A=v.__data__;if(!Iu||A.length<u-1)return A.push([n,s]),this.size=++v.size,this;v=this.__data__=new Gn(A)}return v.set(n,s),this.size=v.size,this}bn.prototype.clear=cv,bn.prototype.delete=hv,bn.prototype.get=dv,bn.prototype.has=pv,bn.prototype.set=vv;function Kf(n,s){var v=Je(n),A=!v&&ki(n),S=!v&&!A&&pi(n),x=!v&&!A&&!S&&eu(n),U=v||A||S||x,H=U?Gs(n.length,F1):[],Q=H.length;for(var de in n)(s||Et.call(n,de))&&!(U&&(de=="length"||S&&(de=="offset"||de=="parent")||x&&(de=="buffer"||de=="byteLength"||de=="byteOffset")||Zn(de,Q)))&&H.push(de);return H}function Yf(n){var s=n.length;return s?n[lo(0,s-1)]:r}function gv(n,s){return Pa(Lr(n),xi(s,0,n.length))}function mv(n){return Pa(Lr(n))}function Qs(n,s,v){(v!==r&&!An(n[s],v)||v===r&&!(s in n))&&Kn(n,s,v)}function Ru(n,s,v){var A=n[s];(!(Et.call(n,s)&&An(A,v))||v===r&&!(s in n))&&Kn(n,s,v)}function Da(n,s){for(var v=n.length;v--;)if(An(n[v][0],s))return v;return-1}function Dv(n,s,v,A){return fi(n,function(S,x,U){s(A,S,v(S),U)}),A}function $f(n,s){return n&&Nn(s,mr(s),n)}function _v(n,s){return n&&Nn(s,jr(s),n)}function Kn(n,s,v){s=="__proto__"&&ha?ha(n,s,{configurable:!0,enumerable:!0,value:v,writable:!0}):n[s]=v}function eo(n,s){for(var v=-1,A=s.length,S=ne(A),x=n==null;++v<A;)S[v]=x?r:No(n,s[v]);return S}function xi(n,s,v){return n===n&&(v!==r&&(n=n<=v?n:v),s!==r&&(n=n>=s?n:s)),n}function on(n,s,v,A,S,x){var U,H=s&f,Q=s&h,de=s&D;if(v&&(U=S?v(n,A,S,x):v(n)),U!==r)return U;if(!Kt(n))return n;var pe=Je(n);if(pe){if(U=sg(n),!H)return Lr(n,U)}else{var me=Mr(n),Ce=me==mt||me==rt;if(pi(n))return _c(n,H);if(me==Ft||me==ke||Ce&&!S){if(U=Q||Ce?{}:Lc(n),!H)return Q?Zv(n,_v(U,n)):$v(n,$f(U,n))}else{if(!Rt[me])return S?n:{};U=og(n,me,H)}}x||(x=new bn);var Ie=x.get(n);if(Ie)return Ie;x.set(n,U),d0(n)?n.forEach(function(ze){U.add(on(ze,s,v,ze,n,x))}):c0(n)&&n.forEach(function(ze,st){U.set(st,on(ze,s,v,st,n,x))});var qe=de?Q?bo:yo:Q?jr:mr,nt=pe?r:qe(n);return un(nt||n,function(ze,st){nt&&(st=ze,ze=n[st]),Ru(U,st,on(ze,s,v,st,n,x))}),U}function yv(n){var s=mr(n);return function(v){return Zf(v,n,s)}}function Zf(n,s,v){var A=v.length;if(n==null)return!A;for(n=Ot(n);A--;){var S=v[A],x=s[S],U=n[S];if(U===r&&!(S in n)||!x(U))return!1}return!0}function Xf(n,s,v){if(typeof n!="function")throw new an(o);return Wu(function(){n.apply(r,v)},s)}function Lu(n,s,v,A){var S=-1,x=ta,U=!0,H=n.length,Q=[],de=s.length;if(!H)return Q;v&&(s=qt(s,Kr(v))),A?(x=js,U=!1):s.length>=u&&(x=Pu,U=!1,s=new Pi(s));e:for(;++S<H;){var pe=n[S],me=v==null?pe:v(pe);if(pe=A||pe!==0?pe:0,U&&me===me){for(var Ce=de;Ce--;)if(s[Ce]===me)continue e;Q.push(pe)}else x(s,me,A)||Q.push(pe)}return Q}var fi=Ec(Tn),Jf=Ec(ro,!0);function bv(n,s){var v=!0;return fi(n,function(A,S,x){return v=!!s(A,S,x),v}),v}function _a(n,s,v){for(var A=-1,S=n.length;++A<S;){var x=n[A],U=s(x);if(U!=null&&(H===r?U===U&&!$r(U):v(U,H)))var H=U,Q=x}return Q}function Av(n,s,v,A){var S=n.length;for(v=tt(v),v<0&&(v=-v>S?0:S+v),A=A===r||A>S?S:tt(A),A<0&&(A+=S),A=v>A?0:v0(A);v<A;)n[v++]=s;return n}function Qf(n,s){var v=[];return fi(n,function(A,S,x){s(A,S,x)&&v.push(A)}),v}function Er(n,s,v,A,S){var x=-1,U=n.length;for(v||(v=fg),S||(S=[]);++x<U;){var H=n[x];s>0&&v(H)?s>1?Er(H,s-1,v,A,S):si(S,H):A||(S[S.length]=H)}return S}var to=Fc(),ec=Fc(!0);function Tn(n,s){return n&&to(n,s,mr)}function ro(n,s){return n&&ec(n,s,mr)}function ya(n,s){return ai(s,function(v){return Xn(n[v])})}function Ii(n,s){s=hi(s,n);for(var v=0,A=s.length;n!=null&&v<A;)n=n[kn(s[v++])];return v&&v==A?n:r}function tc(n,s,v){var A=s(n);return Je(n)?A:si(A,v(n))}function Tr(n){return n==null?n===r?j:br:Oi&&Oi in Ot(n)?ig(n):mg(n)}function no(n,s){return n>s}function wv(n,s){return n!=null&&Et.call(n,s)}function Ev(n,s){return n!=null&&s in Ot(n)}function Fv(n,s,v){return n>=Or(s,v)&&n<hr(s,v)}function io(n,s,v){for(var A=v?js:ta,S=n[0].length,x=n.length,U=x,H=ne(x),Q=1/0,de=[];U--;){var pe=n[U];U&&s&&(pe=qt(pe,Kr(s))),Q=Or(pe.length,Q),H[U]=!v&&(s||S>=120&&pe.length>=120)?new Pi(U&&pe):r}pe=n[0];var me=-1,Ce=H[0];e:for(;++me<S&&de.length<Q;){var Ie=pe[me],qe=s?s(Ie):Ie;if(Ie=v||Ie!==0?Ie:0,!(Ce?Pu(Ce,qe):A(de,qe,v))){for(U=x;--U;){var nt=H[U];if(!(nt?Pu(nt,qe):A(n[U],qe,v)))continue e}Ce&&Ce.push(qe),de.push(Ie)}}return de}function Cv(n,s,v,A){return Tn(n,function(S,x,U){s(A,v(S),x,U)}),A}function Uu(n,s,v){s=hi(s,n),n=qc(n,s);var A=n==null?n:n[kn(fn(s))];return A==null?r:Gr(A,n,v)}function rc(n){return er(n)&&Tr(n)==ke}function Sv(n){return er(n)&&Tr(n)==ee}function Bv(n){return er(n)&&Tr(n)==Qe}function ju(n,s,v,A,S){return n===s?!0:n==null||s==null||!er(n)&&!er(s)?n!==n&&s!==s:Ov(n,s,v,A,ju,S)}function Ov(n,s,v,A,S,x){var U=Je(n),H=Je(s),Q=U?Ue:Mr(n),de=H?Ue:Mr(s);Q=Q==ke?Ft:Q,de=de==ke?Ft:de;var pe=Q==Ft,me=de==Ft,Ce=Q==de;if(Ce&&pi(n)){if(!pi(s))return!1;U=!0,pe=!1}if(Ce&&!pe)return x||(x=new bn),U||eu(n)?Nc(n,s,v,A,S,x):rg(n,s,Q,v,A,S,x);if(!(v&b)){var Ie=pe&&Et.call(n,"__wrapped__"),qe=me&&Et.call(s,"__wrapped__");if(Ie||qe){var nt=Ie?n.value():n,ze=qe?s.value():s;return x||(x=new bn),S(nt,ze,v,A,x)}}return Ce?(x||(x=new bn),ng(n,s,v,A,S,x)):!1}function Mv(n){return er(n)&&Mr(n)==Xe}function uo(n,s,v,A){var S=v.length,x=S,U=!A;if(n==null)return!x;for(n=Ot(n);S--;){var H=v[S];if(U&&H[2]?H[1]!==n[H[0]]:!(H[0]in n))return!1}for(;++S<x;){H=v[S];var Q=H[0],de=n[Q],pe=H[1];if(U&&H[2]){if(de===r&&!(Q in n))return!1}else{var me=new bn;if(A)var Ce=A(de,pe,Q,n,s,me);if(!(Ce===r?ju(pe,de,b|g,A,me):Ce))return!1}}return!0}function nc(n){if(!Kt(n)||hg(n))return!1;var s=Xn(n)?M1:Au;return s.test(Ni(n))}function Pv(n){return er(n)&&Tr(n)==Dt}function xv(n){return er(n)&&Mr(n)==jt}function Iv(n){return er(n)&&Ra(n.length)&&!!Ut[Tr(n)]}function ic(n){return typeof n=="function"?n:n==null?Vr:typeof n=="object"?Je(n)?sc(n[0],n[1]):ac(n):C0(n)}function ao(n){if(!zu(n))return k1(n);var s=[];for(var v in Ot(n))Et.call(n,v)&&v!="constructor"&&s.push(v);return s}function Tv(n){if(!Kt(n))return gg(n);var s=zu(n),v=[];for(var A in n)A=="constructor"&&(s||!Et.call(n,A))||v.push(A);return v}function so(n,s){return n<s}function uc(n,s){var v=-1,A=Ur(n)?ne(n.length):[];return fi(n,function(S,x,U){A[++v]=s(S,x,U)}),A}function ac(n){var s=wo(n);return s.length==1&&s[0][2]?jc(s[0][0],s[0][1]):function(v){return v===n||uo(v,n,s)}}function sc(n,s){return Fo(n)&&Uc(s)?jc(kn(n),s):function(v){var A=No(v,n);return A===r&&A===s?ko(v,n):ju(s,A,b|g)}}function ba(n,s,v,A,S){n!==s&&to(s,function(x,U){if(S||(S=new bn),Kt(x))Nv(n,s,U,v,ba,A,S);else{var H=A?A(So(n,U),x,U+"",n,s,S):r;H===r&&(H=x),Qs(n,U,H)}},jr)}function Nv(n,s,v,A,S,x,U){var H=So(n,v),Q=So(s,v),de=U.get(Q);if(de){Qs(n,v,de);return}var pe=x?x(H,Q,v+"",n,s,U):r,me=pe===r;if(me){var Ce=Je(Q),Ie=!Ce&&pi(Q),qe=!Ce&&!Ie&&eu(Q);pe=Q,Ce||Ie||qe?Je(H)?pe=H:ir(H)?pe=Lr(H):Ie?(me=!1,pe=_c(Q,!0)):qe?(me=!1,pe=yc(Q,!0)):pe=[]:Hu(Q)||ki(Q)?(pe=H,ki(H)?pe=g0(H):(!Kt(H)||Xn(H))&&(pe=Lc(Q))):me=!1}me&&(U.set(Q,pe),S(pe,Q,A,x,U),U.delete(Q)),Qs(n,v,pe)}function oc(n,s){var v=n.length;if(v)return s+=s<0?v:0,Zn(s,v)?n[s]:r}function lc(n,s,v){s.length?s=qt(s,function(x){return Je(x)?function(U){return Ii(U,x.length===1?x[0]:x)}:x}):s=[Vr];var A=-1;s=qt(s,Kr(je()));var S=uc(n,function(x,U,H){var Q=qt(s,function(de){return de(x)});return{criteria:Q,index:++A,value:x}});return o1(S,function(x,U){return Yv(x,U,v)})}function kv(n,s){return fc(n,s,function(v,A){return ko(n,A)})}function fc(n,s,v){for(var A=-1,S=s.length,x={};++A<S;){var U=s[A],H=Ii(n,U);v(H,U)&&Vu(x,hi(U,n),H)}return x}function Rv(n){return function(s){return Ii(s,n)}}function oo(n,s,v,A){var S=A?s1:zi,x=-1,U=s.length,H=n;for(n===s&&(s=Lr(s)),v&&(H=qt(n,Kr(v)));++x<U;)for(var Q=0,de=s[x],pe=v?v(de):de;(Q=S(H,pe,Q,A))>-1;)H!==n&&ca.call(H,Q,1),ca.call(n,Q,1);return n}function cc(n,s){for(var v=n?s.length:0,A=v-1;v--;){var S=s[v];if(v==A||S!==x){var x=S;Zn(S)?ca.call(n,S,1):ho(n,S)}}return n}function lo(n,s){return n+pa(Hf()*(s-n+1))}function Lv(n,s,v,A){for(var S=-1,x=hr(da((s-n)/(v||1)),0),U=ne(x);x--;)U[A?x:++S]=n,n+=v;return U}function fo(n,s){var v="";if(!n||s<1||s>le)return v;do s%2&&(v+=n),s=pa(s/2),s&&(n+=n);while(s);return v}function ut(n,s){return Bo(Vc(n,s,Vr),n+"")}function Uv(n){return Yf(tu(n))}function jv(n,s){var v=tu(n);return Pa(v,xi(s,0,v.length))}function Vu(n,s,v,A){if(!Kt(n))return n;s=hi(s,n);for(var S=-1,x=s.length,U=x-1,H=n;H!=null&&++S<x;){var Q=kn(s[S]),de=v;if(Q==="__proto__"||Q==="constructor"||Q==="prototype")return n;if(S!=U){var pe=H[Q];de=A?A(pe,Q,H):r,de===r&&(de=Kt(pe)?pe:Zn(s[S+1])?[]:{})}Ru(H,Q,de),H=H[Q]}return n}var hc=va?function(n,s){return va.set(n,s),n}:Vr,Vv=ha?function(n,s){return ha(n,"toString",{configurable:!0,enumerable:!1,value:Lo(s),writable:!0})}:Vr;function qv(n){return Pa(tu(n))}function ln(n,s,v){var A=-1,S=n.length;s<0&&(s=-s>S?0:S+s),v=v>S?S:v,v<0&&(v+=S),S=s>v?0:v-s>>>0,s>>>=0;for(var x=ne(S);++A<S;)x[A]=n[A+s];return x}function zv(n,s){var v;return fi(n,function(A,S,x){return v=s(A,S,x),!v}),!!v}function Aa(n,s,v){var A=0,S=n==null?A:n.length;if(typeof s=="number"&&s===s&&S<=Fe){for(;A<S;){var x=A+S>>>1,U=n[x];U!==null&&!$r(U)&&(v?U<=s:U<s)?A=x+1:S=x}return S}return co(n,s,Vr,v)}function co(n,s,v,A){var S=0,x=n==null?0:n.length;if(x===0)return 0;s=v(s);for(var U=s!==s,H=s===null,Q=$r(s),de=s===r;S<x;){var pe=pa((S+x)/2),me=v(n[pe]),Ce=me!==r,Ie=me===null,qe=me===me,nt=$r(me);if(U)var ze=A||qe;else de?ze=qe&&(A||Ce):H?ze=qe&&Ce&&(A||!Ie):Q?ze=qe&&Ce&&!Ie&&(A||!nt):Ie||nt?ze=!1:ze=A?me<=s:me<s;ze?S=pe+1:x=pe}return Or(x,xe)}function dc(n,s){for(var v=-1,A=n.length,S=0,x=[];++v<A;){var U=n[v],H=s?s(U):U;if(!v||!An(H,Q)){var Q=H;x[S++]=U===0?0:U}}return x}function pc(n){return typeof n=="number"?n:$r(n)?ye:+n}function Yr(n){if(typeof n=="string")return n;if(Je(n))return qt(n,Yr)+"";if($r(n))return Gf?Gf.call(n):"";var s=n+"";return s=="0"&&1/n==-te?"-0":s}function ci(n,s,v){var A=-1,S=ta,x=n.length,U=!0,H=[],Q=H;if(v)U=!1,S=js;else if(x>=u){var de=s?null:eg(n);if(de)return na(de);U=!1,S=Pu,Q=new Pi}else Q=s?[]:H;e:for(;++A<x;){var pe=n[A],me=s?s(pe):pe;if(pe=v||pe!==0?pe:0,U&&me===me){for(var Ce=Q.length;Ce--;)if(Q[Ce]===me)continue e;s&&Q.push(me),H.push(pe)}else S(Q,me,v)||(Q!==H&&Q.push(me),H.push(pe))}return H}function ho(n,s){return s=hi(s,n),n=qc(n,s),n==null||delete n[kn(fn(s))]}function vc(n,s,v,A){return Vu(n,s,v(Ii(n,s)),A)}function wa(n,s,v,A){for(var S=n.length,x=A?S:-1;(A?x--:++x<S)&&s(n[x],x,n););return v?ln(n,A?0:x,A?x+1:S):ln(n,A?x+1:0,A?S:x)}function gc(n,s){var v=n;return v instanceof ht&&(v=v.value()),Vs(s,function(A,S){return S.func.apply(S.thisArg,si([A],S.args))},v)}function po(n,s,v){var A=n.length;if(A<2)return A?ci(n[0]):[];for(var S=-1,x=ne(A);++S<A;)for(var U=n[S],H=-1;++H<A;)H!=S&&(x[S]=Lu(x[S]||U,n[H],s,v));return ci(Er(x,1),s,v)}function mc(n,s,v){for(var A=-1,S=n.length,x=s.length,U={};++A<S;){var H=A<x?s[A]:r;v(U,n[A],H)}return U}function vo(n){return ir(n)?n:[]}function go(n){return typeof n=="function"?n:Vr}function hi(n,s){return Je(n)?n:Fo(n,s)?[n]:Gc(yt(n))}var Wv=ut;function di(n,s,v){var A=n.length;return v=v===r?A:v,!s&&v>=A?n:ln(n,s,v)}var Dc=P1||function(n){return wr.clearTimeout(n)};function _c(n,s){if(s)return n.slice();var v=n.length,A=jf?jf(v):new n.constructor(v);return n.copy(A),A}function mo(n){var s=new n.constructor(n.byteLength);return new la(s).set(new la(n)),s}function Hv(n,s){var v=s?mo(n.buffer):n.buffer;return new n.constructor(v,n.byteOffset,n.byteLength)}function Gv(n){var s=new n.constructor(n.source,ji.exec(n));return s.lastIndex=n.lastIndex,s}function Kv(n){return ku?Ot(ku.call(n)):{}}function yc(n,s){var v=s?mo(n.buffer):n.buffer;return new n.constructor(v,n.byteOffset,n.length)}function bc(n,s){if(n!==s){var v=n!==r,A=n===null,S=n===n,x=$r(n),U=s!==r,H=s===null,Q=s===s,de=$r(s);if(!H&&!de&&!x&&n>s||x&&U&&Q&&!H&&!de||A&&U&&Q||!v&&Q||!S)return 1;if(!A&&!x&&!de&&n<s||de&&v&&S&&!A&&!x||H&&v&&S||!U&&S||!Q)return-1}return 0}function Yv(n,s,v){for(var A=-1,S=n.criteria,x=s.criteria,U=S.length,H=v.length;++A<U;){var Q=bc(S[A],x[A]);if(Q){if(A>=H)return Q;var de=v[A];return Q*(de=="desc"?-1:1)}}return n.index-s.index}function Ac(n,s,v,A){for(var S=-1,x=n.length,U=v.length,H=-1,Q=s.length,de=hr(x-U,0),pe=ne(Q+de),me=!A;++H<Q;)pe[H]=s[H];for(;++S<U;)(me||S<x)&&(pe[v[S]]=n[S]);for(;de--;)pe[H++]=n[S++];return pe}function wc(n,s,v,A){for(var S=-1,x=n.length,U=-1,H=v.length,Q=-1,de=s.length,pe=hr(x-H,0),me=ne(pe+de),Ce=!A;++S<pe;)me[S]=n[S];for(var Ie=S;++Q<de;)me[Ie+Q]=s[Q];for(;++U<H;)(Ce||S<x)&&(me[Ie+v[U]]=n[S++]);return me}function Lr(n,s){var v=-1,A=n.length;for(s||(s=ne(A));++v<A;)s[v]=n[v];return s}function Nn(n,s,v,A){var S=!v;v||(v={});for(var x=-1,U=s.length;++x<U;){var H=s[x],Q=A?A(v[H],n[H],H,v,n):r;Q===r&&(Q=n[H]),S?Kn(v,H,Q):Ru(v,H,Q)}return v}function $v(n,s){return Nn(n,Eo(n),s)}function Zv(n,s){return Nn(n,kc(n),s)}function Ea(n,s){return function(v,A){var S=Je(v)?t1:Dv,x=s?s():{};return S(v,n,je(A,2),x)}}function Xi(n){return ut(function(s,v){var A=-1,S=v.length,x=S>1?v[S-1]:r,U=S>2?v[2]:r;for(x=n.length>3&&typeof x=="function"?(S--,x):r,U&&Nr(v[0],v[1],U)&&(x=S<3?r:x,S=1),s=Ot(s);++A<S;){var H=v[A];H&&n(s,H,A,x)}return s})}function Ec(n,s){return function(v,A){if(v==null)return v;if(!Ur(v))return n(v,A);for(var S=v.length,x=s?S:-1,U=Ot(v);(s?x--:++x<S)&&A(U[x],x,U)!==!1;);return v}}function Fc(n){return function(s,v,A){for(var S=-1,x=Ot(s),U=A(s),H=U.length;H--;){var Q=U[n?H:++S];if(v(x[Q],Q,x)===!1)break}return s}}function Xv(n,s,v){var A=s&m,S=qu(n);function x(){var U=this&&this!==wr&&this instanceof x?S:n;return U.apply(A?v:this,arguments)}return x}function Cc(n){return function(s){s=yt(s);var v=Wi(s)?yn(s):r,A=v?v[0]:s.charAt(0),S=v?di(v,1).join(""):s.slice(1);return A[n]()+S}}function Ji(n){return function(s){return Vs(E0(w0(s).replace(Vp,"")),n,"")}}function qu(n){return function(){var s=arguments;switch(s.length){case 0:return new n;case 1:return new n(s[0]);case 2:return new n(s[0],s[1]);case 3:return new n(s[0],s[1],s[2]);case 4:return new n(s[0],s[1],s[2],s[3]);case 5:return new n(s[0],s[1],s[2],s[3],s[4]);case 6:return new n(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new n(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var v=Zi(n.prototype),A=n.apply(v,s);return Kt(A)?A:v}}function Jv(n,s,v){var A=qu(n);function S(){for(var x=arguments.length,U=ne(x),H=x,Q=Qi(S);H--;)U[H]=arguments[H];var de=x<3&&U[0]!==Q&&U[x-1]!==Q?[]:oi(U,Q);if(x-=de.length,x<v)return Pc(n,s,Fa,S.placeholder,r,U,de,r,r,v-x);var pe=this&&this!==wr&&this instanceof S?A:n;return Gr(pe,this,U)}return S}function Sc(n){return function(s,v,A){var S=Ot(s);if(!Ur(s)){var x=je(v,3);s=mr(s),v=function(H){return x(S[H],H,S)}}var U=n(s,v,A);return U>-1?S[x?s[U]:U]:r}}function Bc(n){return $n(function(s){var v=s.length,A=v,S=sn.prototype.thru;for(n&&s.reverse();A--;){var x=s[A];if(typeof x!="function")throw new an(o);if(S&&!U&&Oa(x)=="wrapper")var U=new sn([],!0)}for(A=U?A:v;++A<v;){x=s[A];var H=Oa(x),Q=H=="wrapper"?Ao(x):r;Q&&Co(Q[0])&&Q[1]==(P|w|F|I)&&!Q[4].length&&Q[9]==1?U=U[Oa(Q[0])].apply(U,Q[3]):U=x.length==1&&Co(x)?U[H]():U.thru(x)}return function(){var de=arguments,pe=de[0];if(U&&de.length==1&&Je(pe))return U.plant(pe).value();for(var me=0,Ce=v?s[me].apply(this,de):pe;++me<v;)Ce=s[me].call(this,Ce);return Ce}})}function Fa(n,s,v,A,S,x,U,H,Q,de){var pe=s&P,me=s&m,Ce=s&y,Ie=s&(w|B),qe=s&N,nt=Ce?r:qu(n);function ze(){for(var st=arguments.length,pt=ne(st),Zr=st;Zr--;)pt[Zr]=arguments[Zr];if(Ie)var kr=Qi(ze),Xr=f1(pt,kr);if(A&&(pt=Ac(pt,A,S,Ie)),x&&(pt=wc(pt,x,U,Ie)),st-=Xr,Ie&&st<de){var ur=oi(pt,kr);return Pc(n,s,Fa,ze.placeholder,v,pt,ur,H,Q,de-st)}var wn=me?v:this,Qn=Ce?wn[n]:n;return st=pt.length,H?pt=Dg(pt,H):qe&&st>1&&pt.reverse(),pe&&Q<st&&(pt.length=Q),this&&this!==wr&&this instanceof ze&&(Qn=nt||qu(Qn)),Qn.apply(wn,pt)}return ze}function Oc(n,s){return function(v,A){return Cv(v,n,s(A),{})}}function Ca(n,s){return function(v,A){var S;if(v===r&&A===r)return s;if(v!==r&&(S=v),A!==r){if(S===r)return A;typeof v=="string"||typeof A=="string"?(v=Yr(v),A=Yr(A)):(v=pc(v),A=pc(A)),S=n(v,A)}return S}}function Do(n){return $n(function(s){return s=qt(s,Kr(je())),ut(function(v){var A=this;return n(s,function(S){return Gr(S,A,v)})})})}function Sa(n,s){s=s===r?" ":Yr(s);var v=s.length;if(v<2)return v?fo(s,n):s;var A=fo(s,da(n/Hi(s)));return Wi(s)?di(yn(A),0,n).join(""):A.slice(0,n)}function Qv(n,s,v,A){var S=s&m,x=qu(n);function U(){for(var H=-1,Q=arguments.length,de=-1,pe=A.length,me=ne(pe+Q),Ce=this&&this!==wr&&this instanceof U?x:n;++de<pe;)me[de]=A[de];for(;Q--;)me[de++]=arguments[++H];return Gr(Ce,S?v:this,me)}return U}function Mc(n){return function(s,v,A){return A&&typeof A!="number"&&Nr(s,v,A)&&(v=A=r),s=Jn(s),v===r?(v=s,s=0):v=Jn(v),A=A===r?s<v?1:-1:Jn(A),Lv(s,v,A,n)}}function Ba(n){return function(s,v){return typeof s=="string"&&typeof v=="string"||(s=cn(s),v=cn(v)),n(s,v)}}function Pc(n,s,v,A,S,x,U,H,Q,de){var pe=s&w,me=pe?U:r,Ce=pe?r:U,Ie=pe?x:r,qe=pe?r:x;s|=pe?F:O,s&=~(pe?O:F),s&E||(s&=~(m|y));var nt=[n,s,S,Ie,me,qe,Ce,H,Q,de],ze=v.apply(r,nt);return Co(n)&&zc(ze,nt),ze.placeholder=A,Wc(ze,n,s)}function _o(n){var s=cr[n];return function(v,A){if(v=cn(v),A=A==null?0:Or(tt(A),292),A&&Wf(v)){var S=(yt(v)+"e").split("e"),x=s(S[0]+"e"+(+S[1]+A));return S=(yt(x)+"e").split("e"),+(S[0]+"e"+(+S[1]-A))}return s(v)}}var eg=Yi&&1/na(new Yi([,-0]))[1]==te?function(n){return new Yi(n)}:Vo;function xc(n){return function(s){var v=Mr(s);return v==Xe?Ys(s):v==jt?m1(s):l1(s,n(s))}}function Yn(n,s,v,A,S,x,U,H){var Q=s&y;if(!Q&&typeof n!="function")throw new an(o);var de=A?A.length:0;if(de||(s&=~(F|O),A=S=r),U=U===r?U:hr(tt(U),0),H=H===r?H:tt(H),de-=S?S.length:0,s&O){var pe=A,me=S;A=S=r}var Ce=Q?r:Ao(n),Ie=[n,s,v,A,S,pe,me,x,U,H];if(Ce&&vg(Ie,Ce),n=Ie[0],s=Ie[1],v=Ie[2],A=Ie[3],S=Ie[4],H=Ie[9]=Ie[9]===r?Q?0:n.length:hr(Ie[9]-de,0),!H&&s&(w|B)&&(s&=~(w|B)),!s||s==m)var qe=Xv(n,s,v);else s==w||s==B?qe=Jv(n,s,H):(s==F||s==(m|F))&&!S.length?qe=Qv(n,s,v,A):qe=Fa.apply(r,Ie);var nt=Ce?hc:zc;return Wc(nt(qe,Ie),n,s)}function Ic(n,s,v,A){return n===r||An(n,Ki[v])&&!Et.call(A,v)?s:n}function Tc(n,s,v,A,S,x){return Kt(n)&&Kt(s)&&(x.set(s,n),ba(n,s,r,Tc,x),x.delete(s)),n}function tg(n){return Hu(n)?r:n}function Nc(n,s,v,A,S,x){var U=v&b,H=n.length,Q=s.length;if(H!=Q&&!(U&&Q>H))return!1;var de=x.get(n),pe=x.get(s);if(de&&pe)return de==s&&pe==n;var me=-1,Ce=!0,Ie=v&g?new Pi:r;for(x.set(n,s),x.set(s,n);++me<H;){var qe=n[me],nt=s[me];if(A)var ze=U?A(nt,qe,me,s,n,x):A(qe,nt,me,n,s,x);if(ze!==r){if(ze)continue;Ce=!1;break}if(Ie){if(!qs(s,function(st,pt){if(!Pu(Ie,pt)&&(qe===st||S(qe,st,v,A,x)))return Ie.push(pt)})){Ce=!1;break}}else if(!(qe===nt||S(qe,nt,v,A,x))){Ce=!1;break}}return x.delete(n),x.delete(s),Ce}function rg(n,s,v,A,S,x,U){switch(v){case he:if(n.byteLength!=s.byteLength||n.byteOffset!=s.byteOffset)return!1;n=n.buffer,s=s.buffer;case ee:return!(n.byteLength!=s.byteLength||!x(new la(n),new la(s)));case vt:case Qe:case wt:return An(+n,+s);case gt:return n.name==s.name&&n.message==s.message;case Dt:case ar:return n==s+"";case Xe:var H=Ys;case jt:var Q=A&b;if(H||(H=na),n.size!=s.size&&!Q)return!1;var de=U.get(n);if(de)return de==s;A|=g,U.set(n,s);var pe=Nc(H(n),H(s),A,S,x,U);return U.delete(n),pe;case R:if(ku)return ku.call(n)==ku.call(s)}return!1}function ng(n,s,v,A,S,x){var U=v&b,H=yo(n),Q=H.length,de=yo(s),pe=de.length;if(Q!=pe&&!U)return!1;for(var me=Q;me--;){var Ce=H[me];if(!(U?Ce in s:Et.call(s,Ce)))return!1}var Ie=x.get(n),qe=x.get(s);if(Ie&&qe)return Ie==s&&qe==n;var nt=!0;x.set(n,s),x.set(s,n);for(var ze=U;++me<Q;){Ce=H[me];var st=n[Ce],pt=s[Ce];if(A)var Zr=U?A(pt,st,Ce,s,n,x):A(st,pt,Ce,n,s,x);if(!(Zr===r?st===pt||S(st,pt,v,A,x):Zr)){nt=!1;break}ze||(ze=Ce=="constructor")}if(nt&&!ze){var kr=n.constructor,Xr=s.constructor;kr!=Xr&&"constructor"in n&&"constructor"in s&&!(typeof kr=="function"&&kr instanceof kr&&typeof Xr=="function"&&Xr instanceof Xr)&&(nt=!1)}return x.delete(n),x.delete(s),nt}function $n(n){return Bo(Vc(n,r,Zc),n+"")}function yo(n){return tc(n,mr,Eo)}function bo(n){return tc(n,jr,kc)}var Ao=va?function(n){return va.get(n)}:Vo;function Oa(n){for(var s=n.name+"",v=$i[s],A=Et.call($i,s)?v.length:0;A--;){var S=v[A],x=S.func;if(x==null||x==n)return S.name}return s}function Qi(n){var s=Et.call(M,"placeholder")?M:n;return s.placeholder}function je(){var n=M.iteratee||Uo;return n=n===Uo?ic:n,arguments.length?n(arguments[0],arguments[1]):n}function Ma(n,s){var v=n.__data__;return cg(s)?v[typeof s=="string"?"string":"hash"]:v.map}function wo(n){for(var s=mr(n),v=s.length;v--;){var A=s[v],S=n[A];s[v]=[A,S,Uc(S)]}return s}function Ti(n,s){var v=p1(n,s);return nc(v)?v:r}function ig(n){var s=Et.call(n,Oi),v=n[Oi];try{n[Oi]=r;var A=!0}catch{}var S=sa.call(n);return A&&(s?n[Oi]=v:delete n[Oi]),S}var Eo=Zs?function(n){return n==null?[]:(n=Ot(n),ai(Zs(n),function(s){return qf.call(n,s)}))}:qo,kc=Zs?function(n){for(var s=[];n;)si(s,Eo(n)),n=fa(n);return s}:qo,Mr=Tr;(Xs&&Mr(new Xs(new ArrayBuffer(1)))!=he||Iu&&Mr(new Iu)!=Xe||Js&&Mr(Js.resolve())!=Ae||Yi&&Mr(new Yi)!=jt||Tu&&Mr(new Tu)!=Y)&&(Mr=function(n){var s=Tr(n),v=s==Ft?n.constructor:r,A=v?Ni(v):"";if(A)switch(A){case j1:return he;case V1:return Xe;case q1:return Ae;case z1:return jt;case W1:return Y}return s});function ug(n,s,v){for(var A=-1,S=v.length;++A<S;){var x=v[A],U=x.size;switch(x.type){case"drop":n+=U;break;case"dropRight":s-=U;break;case"take":s=Or(s,n+U);break;case"takeRight":n=hr(n,s-U);break}}return{start:n,end:s}}function ag(n){var s=n.match(ni);return s?s[1].split(tn):[]}function Rc(n,s,v){s=hi(s,n);for(var A=-1,S=s.length,x=!1;++A<S;){var U=kn(s[A]);if(!(x=n!=null&&v(n,U)))break;n=n[U]}return x||++A!=S?x:(S=n==null?0:n.length,!!S&&Ra(S)&&Zn(U,S)&&(Je(n)||ki(n)))}function sg(n){var s=n.length,v=new n.constructor(s);return s&&typeof n[0]=="string"&&Et.call(n,"index")&&(v.index=n.index,v.input=n.input),v}function Lc(n){return typeof n.constructor=="function"&&!zu(n)?Zi(fa(n)):{}}function og(n,s,v){var A=n.constructor;switch(s){case ee:return mo(n);case vt:case Qe:return new A(+n);case he:return Hv(n,v);case ie:case oe:case De:case Be:case We:case we:case Wt:case kt:case Jt:return yc(n,v);case Xe:return new A;case wt:case ar:return new A(n);case Dt:return Gv(n);case jt:return new A;case R:return Kv(n)}}function lg(n,s){var v=s.length;if(!v)return n;var A=v-1;return s[A]=(v>1?"& ":"")+s[A],s=s.join(v>2?", ":" "),n.replace(mu,`{
/* [wrapped with `+s+`] */
`)}function fg(n){return Je(n)||ki(n)||!!(zf&&n&&n[zf])}function Zn(n,s){var v=typeof n;return s=s??le,!!s&&(v=="number"||v!="symbol"&&Eu.test(n))&&n>-1&&n%1==0&&n<s}function Nr(n,s,v){if(!Kt(v))return!1;var A=typeof s;return(A=="number"?Ur(v)&&Zn(s,v.length):A=="string"&&s in v)?An(v[s],n):!1}function Fo(n,s){if(Je(n))return!1;var v=typeof n;return v=="number"||v=="symbol"||v=="boolean"||n==null||$r(n)?!0:Pn.test(n)||!Mn.test(n)||s!=null&&n in Ot(s)}function cg(n){var s=typeof n;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?n!=="__proto__":n===null}function Co(n){var s=Oa(n),v=M[s];if(typeof v!="function"||!(s in ht.prototype))return!1;if(n===v)return!0;var A=Ao(v);return!!A&&n===A[0]}function hg(n){return!!Uf&&Uf in n}var dg=ua?Xn:zo;function zu(n){var s=n&&n.constructor,v=typeof s=="function"&&s.prototype||Ki;return n===v}function Uc(n){return n===n&&!Kt(n)}function jc(n,s){return function(v){return v==null?!1:v[n]===s&&(s!==r||n in Ot(v))}}function pg(n){var s=Na(n,function(A){return v.size===p&&v.clear(),A}),v=s.cache;return s}function vg(n,s){var v=n[1],A=s[1],S=v|A,x=S<(m|y|P),U=A==P&&v==w||A==P&&v==I&&n[7].length<=s[8]||A==(P|I)&&s[7].length<=s[8]&&v==w;if(!(x||U))return n;A&m&&(n[2]=s[2],S|=v&m?0:E);var H=s[3];if(H){var Q=n[3];n[3]=Q?Ac(Q,H,s[4]):H,n[4]=Q?oi(n[3],c):s[4]}return H=s[5],H&&(Q=n[5],n[5]=Q?wc(Q,H,s[6]):H,n[6]=Q?oi(n[5],c):s[6]),H=s[7],H&&(n[7]=H),A&P&&(n[8]=n[8]==null?s[8]:Or(n[8],s[8])),n[9]==null&&(n[9]=s[9]),n[0]=s[0],n[1]=S,n}function gg(n){var s=[];if(n!=null)for(var v in Ot(n))s.push(v);return s}function mg(n){return sa.call(n)}function Vc(n,s,v){return s=hr(s===r?n.length-1:s,0),function(){for(var A=arguments,S=-1,x=hr(A.length-s,0),U=ne(x);++S<x;)U[S]=A[s+S];S=-1;for(var H=ne(s+1);++S<s;)H[S]=A[S];return H[s]=v(U),Gr(n,this,H)}}function qc(n,s){return s.length<2?n:Ii(n,ln(s,0,-1))}function Dg(n,s){for(var v=n.length,A=Or(s.length,v),S=Lr(n);A--;){var x=s[A];n[A]=Zn(x,v)?S[x]:r}return n}function So(n,s){if(!(s==="constructor"&&typeof n[s]=="function")&&s!="__proto__")return n[s]}var zc=Hc(hc),Wu=I1||function(n,s){return wr.setTimeout(n,s)},Bo=Hc(Vv);function Wc(n,s,v){var A=s+"";return Bo(n,lg(A,_g(ag(A),v)))}function Hc(n){var s=0,v=0;return function(){var A=R1(),S=q-(A-v);if(v=A,S>0){if(++s>=K)return arguments[0]}else s=0;return n.apply(r,arguments)}}function Pa(n,s){var v=-1,A=n.length,S=A-1;for(s=s===r?A:s;++v<s;){var x=lo(v,S),U=n[x];n[x]=n[v],n[v]=U}return n.length=s,n}var Gc=pg(function(n){var s=[];return n.charCodeAt(0)===46&&s.push(""),n.replace(Ui,function(v,A,S,x){s.push(S?x.replace(Du,"$1"):A||v)}),s});function kn(n){if(typeof n=="string"||$r(n))return n;var s=n+"";return s=="0"&&1/n==-te?"-0":s}function Ni(n){if(n!=null){try{return aa.call(n)}catch{}try{return n+""}catch{}}return""}function _g(n,s){return un(Ne,function(v){var A="_."+v[0];s&v[1]&&!ta(n,A)&&n.push(A)}),n.sort()}function Kc(n){if(n instanceof ht)return n.clone();var s=new sn(n.__wrapped__,n.__chain__);return s.__actions__=Lr(n.__actions__),s.__index__=n.__index__,s.__values__=n.__values__,s}function yg(n,s,v){(v?Nr(n,s,v):s===r)?s=1:s=hr(tt(s),0);var A=n==null?0:n.length;if(!A||s<1)return[];for(var S=0,x=0,U=ne(da(A/s));S<A;)U[x++]=ln(n,S,S+=s);return U}function bg(n){for(var s=-1,v=n==null?0:n.length,A=0,S=[];++s<v;){var x=n[s];x&&(S[A++]=x)}return S}function Ag(){var n=arguments.length;if(!n)return[];for(var s=ne(n-1),v=arguments[0],A=n;A--;)s[A-1]=arguments[A];return si(Je(v)?Lr(v):[v],Er(s,1))}var wg=ut(function(n,s){return ir(n)?Lu(n,Er(s,1,ir,!0)):[]}),Eg=ut(function(n,s){var v=fn(s);return ir(v)&&(v=r),ir(n)?Lu(n,Er(s,1,ir,!0),je(v,2)):[]}),Fg=ut(function(n,s){var v=fn(s);return ir(v)&&(v=r),ir(n)?Lu(n,Er(s,1,ir,!0),r,v):[]});function Cg(n,s,v){var A=n==null?0:n.length;return A?(s=v||s===r?1:tt(s),ln(n,s<0?0:s,A)):[]}function Sg(n,s,v){var A=n==null?0:n.length;return A?(s=v||s===r?1:tt(s),s=A-s,ln(n,0,s<0?0:s)):[]}function Bg(n,s){return n&&n.length?wa(n,je(s,3),!0,!0):[]}function Og(n,s){return n&&n.length?wa(n,je(s,3),!0):[]}function Mg(n,s,v,A){var S=n==null?0:n.length;return S?(v&&typeof v!="number"&&Nr(n,s,v)&&(v=0,A=S),Av(n,s,v,A)):[]}function Yc(n,s,v){var A=n==null?0:n.length;if(!A)return-1;var S=v==null?0:tt(v);return S<0&&(S=hr(A+S,0)),ra(n,je(s,3),S)}function $c(n,s,v){var A=n==null?0:n.length;if(!A)return-1;var S=A-1;return v!==r&&(S=tt(v),S=v<0?hr(A+S,0):Or(S,A-1)),ra(n,je(s,3),S,!0)}function Zc(n){var s=n==null?0:n.length;return s?Er(n,1):[]}function Pg(n){var s=n==null?0:n.length;return s?Er(n,te):[]}function xg(n,s){var v=n==null?0:n.length;return v?(s=s===r?1:tt(s),Er(n,s)):[]}function Ig(n){for(var s=-1,v=n==null?0:n.length,A={};++s<v;){var S=n[s];A[S[0]]=S[1]}return A}function Xc(n){return n&&n.length?n[0]:r}function Tg(n,s,v){var A=n==null?0:n.length;if(!A)return-1;var S=v==null?0:tt(v);return S<0&&(S=hr(A+S,0)),zi(n,s,S)}function Ng(n){var s=n==null?0:n.length;return s?ln(n,0,-1):[]}var kg=ut(function(n){var s=qt(n,vo);return s.length&&s[0]===n[0]?io(s):[]}),Rg=ut(function(n){var s=fn(n),v=qt(n,vo);return s===fn(v)?s=r:v.pop(),v.length&&v[0]===n[0]?io(v,je(s,2)):[]}),Lg=ut(function(n){var s=fn(n),v=qt(n,vo);return s=typeof s=="function"?s:r,s&&v.pop(),v.length&&v[0]===n[0]?io(v,r,s):[]});function Ug(n,s){return n==null?"":N1.call(n,s)}function fn(n){var s=n==null?0:n.length;return s?n[s-1]:r}function jg(n,s,v){var A=n==null?0:n.length;if(!A)return-1;var S=A;return v!==r&&(S=tt(v),S=S<0?hr(A+S,0):Or(S,A-1)),s===s?_1(n,s,S):ra(n,Pf,S,!0)}function Vg(n,s){return n&&n.length?oc(n,tt(s)):r}var qg=ut(Jc);function Jc(n,s){return n&&n.length&&s&&s.length?oo(n,s):n}function zg(n,s,v){return n&&n.length&&s&&s.length?oo(n,s,je(v,2)):n}function Wg(n,s,v){return n&&n.length&&s&&s.length?oo(n,s,r,v):n}var Hg=$n(function(n,s){var v=n==null?0:n.length,A=eo(n,s);return cc(n,qt(s,function(S){return Zn(S,v)?+S:S}).sort(bc)),A});function Gg(n,s){var v=[];if(!(n&&n.length))return v;var A=-1,S=[],x=n.length;for(s=je(s,3);++A<x;){var U=n[A];s(U,A,n)&&(v.push(U),S.push(A))}return cc(n,S),v}function Oo(n){return n==null?n:U1.call(n)}function Kg(n,s,v){var A=n==null?0:n.length;return A?(v&&typeof v!="number"&&Nr(n,s,v)?(s=0,v=A):(s=s==null?0:tt(s),v=v===r?A:tt(v)),ln(n,s,v)):[]}function Yg(n,s){return Aa(n,s)}function $g(n,s,v){return co(n,s,je(v,2))}function Zg(n,s){var v=n==null?0:n.length;if(v){var A=Aa(n,s);if(A<v&&An(n[A],s))return A}return-1}function Xg(n,s){return Aa(n,s,!0)}function Jg(n,s,v){return co(n,s,je(v,2),!0)}function Qg(n,s){var v=n==null?0:n.length;if(v){var A=Aa(n,s,!0)-1;if(An(n[A],s))return A}return-1}function em(n){return n&&n.length?dc(n):[]}function tm(n,s){return n&&n.length?dc(n,je(s,2)):[]}function rm(n){var s=n==null?0:n.length;return s?ln(n,1,s):[]}function nm(n,s,v){return n&&n.length?(s=v||s===r?1:tt(s),ln(n,0,s<0?0:s)):[]}function im(n,s,v){var A=n==null?0:n.length;return A?(s=v||s===r?1:tt(s),s=A-s,ln(n,s<0?0:s,A)):[]}function um(n,s){return n&&n.length?wa(n,je(s,3),!1,!0):[]}function am(n,s){return n&&n.length?wa(n,je(s,3)):[]}var sm=ut(function(n){return ci(Er(n,1,ir,!0))}),om=ut(function(n){var s=fn(n);return ir(s)&&(s=r),ci(Er(n,1,ir,!0),je(s,2))}),lm=ut(function(n){var s=fn(n);return s=typeof s=="function"?s:r,ci(Er(n,1,ir,!0),r,s)});function fm(n){return n&&n.length?ci(n):[]}function cm(n,s){return n&&n.length?ci(n,je(s,2)):[]}function hm(n,s){return s=typeof s=="function"?s:r,n&&n.length?ci(n,r,s):[]}function Mo(n){if(!(n&&n.length))return[];var s=0;return n=ai(n,function(v){if(ir(v))return s=hr(v.length,s),!0}),Gs(s,function(v){return qt(n,zs(v))})}function Qc(n,s){if(!(n&&n.length))return[];var v=Mo(n);return s==null?v:qt(v,function(A){return Gr(s,r,A)})}var dm=ut(function(n,s){return ir(n)?Lu(n,s):[]}),pm=ut(function(n){return po(ai(n,ir))}),vm=ut(function(n){var s=fn(n);return ir(s)&&(s=r),po(ai(n,ir),je(s,2))}),gm=ut(function(n){var s=fn(n);return s=typeof s=="function"?s:r,po(ai(n,ir),r,s)}),mm=ut(Mo);function Dm(n,s){return mc(n||[],s||[],Ru)}function _m(n,s){return mc(n||[],s||[],Vu)}var ym=ut(function(n){var s=n.length,v=s>1?n[s-1]:r;return v=typeof v=="function"?(n.pop(),v):r,Qc(n,v)});function e0(n){var s=M(n);return s.__chain__=!0,s}function bm(n,s){return s(n),n}function xa(n,s){return s(n)}var Am=$n(function(n){var s=n.length,v=s?n[0]:0,A=this.__wrapped__,S=function(x){return eo(x,n)};return s>1||this.__actions__.length||!(A instanceof ht)||!Zn(v)?this.thru(S):(A=A.slice(v,+v+(s?1:0)),A.__actions__.push({func:xa,args:[S],thisArg:r}),new sn(A,this.__chain__).thru(function(x){return s&&!x.length&&x.push(r),x}))});function wm(){return e0(this)}function Em(){return new sn(this.value(),this.__chain__)}function Fm(){this.__values__===r&&(this.__values__=p0(this.value()));var n=this.__index__>=this.__values__.length,s=n?r:this.__values__[this.__index__++];return{done:n,value:s}}function Cm(){return this}function Sm(n){for(var s,v=this;v instanceof ma;){var A=Kc(v);A.__index__=0,A.__values__=r,s?S.__wrapped__=A:s=A;var S=A;v=v.__wrapped__}return S.__wrapped__=n,s}function Bm(){var n=this.__wrapped__;if(n instanceof ht){var s=n;return this.__actions__.length&&(s=new ht(this)),s=s.reverse(),s.__actions__.push({func:xa,args:[Oo],thisArg:r}),new sn(s,this.__chain__)}return this.thru(Oo)}function Om(){return gc(this.__wrapped__,this.__actions__)}var Mm=Ea(function(n,s,v){Et.call(n,v)?++n[v]:Kn(n,v,1)});function Pm(n,s,v){var A=Je(n)?Of:bv;return v&&Nr(n,s,v)&&(s=r),A(n,je(s,3))}function xm(n,s){var v=Je(n)?ai:Qf;return v(n,je(s,3))}var Im=Sc(Yc),Tm=Sc($c);function Nm(n,s){return Er(Ia(n,s),1)}function km(n,s){return Er(Ia(n,s),te)}function Rm(n,s,v){return v=v===r?1:tt(v),Er(Ia(n,s),v)}function t0(n,s){var v=Je(n)?un:fi;return v(n,je(s,3))}function r0(n,s){var v=Je(n)?r1:Jf;return v(n,je(s,3))}var Lm=Ea(function(n,s,v){Et.call(n,v)?n[v].push(s):Kn(n,v,[s])});function Um(n,s,v,A){n=Ur(n)?n:tu(n),v=v&&!A?tt(v):0;var S=n.length;return v<0&&(v=hr(S+v,0)),La(n)?v<=S&&n.indexOf(s,v)>-1:!!S&&zi(n,s,v)>-1}var jm=ut(function(n,s,v){var A=-1,S=typeof s=="function",x=Ur(n)?ne(n.length):[];return fi(n,function(U){x[++A]=S?Gr(s,U,v):Uu(U,s,v)}),x}),Vm=Ea(function(n,s,v){Kn(n,v,s)});function Ia(n,s){var v=Je(n)?qt:uc;return v(n,je(s,3))}function qm(n,s,v,A){return n==null?[]:(Je(s)||(s=s==null?[]:[s]),v=A?r:v,Je(v)||(v=v==null?[]:[v]),lc(n,s,v))}var zm=Ea(function(n,s,v){n[v?0:1].push(s)},function(){return[[],[]]});function Wm(n,s,v){var A=Je(n)?Vs:If,S=arguments.length<3;return A(n,je(s,4),v,S,fi)}function Hm(n,s,v){var A=Je(n)?n1:If,S=arguments.length<3;return A(n,je(s,4),v,S,Jf)}function Gm(n,s){var v=Je(n)?ai:Qf;return v(n,ka(je(s,3)))}function Km(n){var s=Je(n)?Yf:Uv;return s(n)}function Ym(n,s,v){(v?Nr(n,s,v):s===r)?s=1:s=tt(s);var A=Je(n)?gv:jv;return A(n,s)}function $m(n){var s=Je(n)?mv:qv;return s(n)}function Zm(n){if(n==null)return 0;if(Ur(n))return La(n)?Hi(n):n.length;var s=Mr(n);return s==Xe||s==jt?n.size:ao(n).length}function Xm(n,s,v){var A=Je(n)?qs:zv;return v&&Nr(n,s,v)&&(s=r),A(n,je(s,3))}var Jm=ut(function(n,s){if(n==null)return[];var v=s.length;return v>1&&Nr(n,s[0],s[1])?s=[]:v>2&&Nr(s[0],s[1],s[2])&&(s=[s[0]]),lc(n,Er(s,1),[])}),Ta=x1||function(){return wr.Date.now()};function Qm(n,s){if(typeof s!="function")throw new an(o);return n=tt(n),function(){if(--n<1)return s.apply(this,arguments)}}function n0(n,s,v){return s=v?r:s,s=n&&s==null?n.length:s,Yn(n,P,r,r,r,r,s)}function i0(n,s){var v;if(typeof s!="function")throw new an(o);return n=tt(n),function(){return--n>0&&(v=s.apply(this,arguments)),n<=1&&(s=r),v}}var Po=ut(function(n,s,v){var A=m;if(v.length){var S=oi(v,Qi(Po));A|=F}return Yn(n,A,s,v,S)}),u0=ut(function(n,s,v){var A=m|y;if(v.length){var S=oi(v,Qi(u0));A|=F}return Yn(s,A,n,v,S)});function a0(n,s,v){s=v?r:s;var A=Yn(n,w,r,r,r,r,r,s);return A.placeholder=a0.placeholder,A}function s0(n,s,v){s=v?r:s;var A=Yn(n,B,r,r,r,r,r,s);return A.placeholder=s0.placeholder,A}function o0(n,s,v){var A,S,x,U,H,Q,de=0,pe=!1,me=!1,Ce=!0;if(typeof n!="function")throw new an(o);s=cn(s)||0,Kt(v)&&(pe=!!v.leading,me="maxWait"in v,x=me?hr(cn(v.maxWait)||0,s):x,Ce="trailing"in v?!!v.trailing:Ce);function Ie(ur){var wn=A,Qn=S;return A=S=r,de=ur,U=n.apply(Qn,wn),U}function qe(ur){return de=ur,H=Wu(st,s),pe?Ie(ur):U}function nt(ur){var wn=ur-Q,Qn=ur-de,S0=s-wn;return me?Or(S0,x-Qn):S0}function ze(ur){var wn=ur-Q,Qn=ur-de;return Q===r||wn>=s||wn<0||me&&Qn>=x}function st(){var ur=Ta();if(ze(ur))return pt(ur);H=Wu(st,nt(ur))}function pt(ur){return H=r,Ce&&A?Ie(ur):(A=S=r,U)}function Zr(){H!==r&&Dc(H),de=0,A=Q=S=H=r}function kr(){return H===r?U:pt(Ta())}function Xr(){var ur=Ta(),wn=ze(ur);if(A=arguments,S=this,Q=ur,wn){if(H===r)return qe(Q);if(me)return Dc(H),H=Wu(st,s),Ie(Q)}return H===r&&(H=Wu(st,s)),U}return Xr.cancel=Zr,Xr.flush=kr,Xr}var eD=ut(function(n,s){return Xf(n,1,s)}),tD=ut(function(n,s,v){return Xf(n,cn(s)||0,v)});function rD(n){return Yn(n,N)}function Na(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new an(o);var v=function(){var A=arguments,S=s?s.apply(this,A):A[0],x=v.cache;if(x.has(S))return x.get(S);var U=n.apply(this,A);return v.cache=x.set(S,U)||x,U};return v.cache=new(Na.Cache||Gn),v}Na.Cache=Gn;function ka(n){if(typeof n!="function")throw new an(o);return function(){var s=arguments;switch(s.length){case 0:return!n.call(this);case 1:return!n.call(this,s[0]);case 2:return!n.call(this,s[0],s[1]);case 3:return!n.call(this,s[0],s[1],s[2])}return!n.apply(this,s)}}function nD(n){return i0(2,n)}var iD=Wv(function(n,s){s=s.length==1&&Je(s[0])?qt(s[0],Kr(je())):qt(Er(s,1),Kr(je()));var v=s.length;return ut(function(A){for(var S=-1,x=Or(A.length,v);++S<x;)A[S]=s[S].call(this,A[S]);return Gr(n,this,A)})}),xo=ut(function(n,s){var v=oi(s,Qi(xo));return Yn(n,F,r,s,v)}),l0=ut(function(n,s){var v=oi(s,Qi(l0));return Yn(n,O,r,s,v)}),uD=$n(function(n,s){return Yn(n,I,r,r,r,s)});function aD(n,s){if(typeof n!="function")throw new an(o);return s=s===r?s:tt(s),ut(n,s)}function sD(n,s){if(typeof n!="function")throw new an(o);return s=s==null?0:hr(tt(s),0),ut(function(v){var A=v[s],S=di(v,0,s);return A&&si(S,A),Gr(n,this,S)})}function oD(n,s,v){var A=!0,S=!0;if(typeof n!="function")throw new an(o);return Kt(v)&&(A="leading"in v?!!v.leading:A,S="trailing"in v?!!v.trailing:S),o0(n,s,{leading:A,maxWait:s,trailing:S})}function lD(n){return n0(n,1)}function fD(n,s){return xo(go(s),n)}function cD(){if(!arguments.length)return[];var n=arguments[0];return Je(n)?n:[n]}function hD(n){return on(n,D)}function dD(n,s){return s=typeof s=="function"?s:r,on(n,D,s)}function pD(n){return on(n,f|D)}function vD(n,s){return s=typeof s=="function"?s:r,on(n,f|D,s)}function gD(n,s){return s==null||Zf(n,s,mr(s))}function An(n,s){return n===s||n!==n&&s!==s}var mD=Ba(no),DD=Ba(function(n,s){return n>=s}),ki=rc(function(){return arguments}())?rc:function(n){return er(n)&&Et.call(n,"callee")&&!qf.call(n,"callee")},Je=ne.isArray,_D=wf?Kr(wf):Sv;function Ur(n){return n!=null&&Ra(n.length)&&!Xn(n)}function ir(n){return er(n)&&Ur(n)}function yD(n){return n===!0||n===!1||er(n)&&Tr(n)==vt}var pi=T1||zo,bD=Ef?Kr(Ef):Bv;function AD(n){return er(n)&&n.nodeType===1&&!Hu(n)}function wD(n){if(n==null)return!0;if(Ur(n)&&(Je(n)||typeof n=="string"||typeof n.splice=="function"||pi(n)||eu(n)||ki(n)))return!n.length;var s=Mr(n);if(s==Xe||s==jt)return!n.size;if(zu(n))return!ao(n).length;for(var v in n)if(Et.call(n,v))return!1;return!0}function ED(n,s){return ju(n,s)}function FD(n,s,v){v=typeof v=="function"?v:r;var A=v?v(n,s):r;return A===r?ju(n,s,r,v):!!A}function Io(n){if(!er(n))return!1;var s=Tr(n);return s==gt||s==it||typeof n.message=="string"&&typeof n.name=="string"&&!Hu(n)}function CD(n){return typeof n=="number"&&Wf(n)}function Xn(n){if(!Kt(n))return!1;var s=Tr(n);return s==mt||s==rt||s==at||s==be}function f0(n){return typeof n=="number"&&n==tt(n)}function Ra(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=le}function Kt(n){var s=typeof n;return n!=null&&(s=="object"||s=="function")}function er(n){return n!=null&&typeof n=="object"}var c0=Ff?Kr(Ff):Mv;function SD(n,s){return n===s||uo(n,s,wo(s))}function BD(n,s,v){return v=typeof v=="function"?v:r,uo(n,s,wo(s),v)}function OD(n){return h0(n)&&n!=+n}function MD(n){if(dg(n))throw new Ze(a);return nc(n)}function PD(n){return n===null}function xD(n){return n==null}function h0(n){return typeof n=="number"||er(n)&&Tr(n)==wt}function Hu(n){if(!er(n)||Tr(n)!=Ft)return!1;var s=fa(n);if(s===null)return!0;var v=Et.call(s,"constructor")&&s.constructor;return typeof v=="function"&&v instanceof v&&aa.call(v)==B1}var To=Cf?Kr(Cf):Pv;function ID(n){return f0(n)&&n>=-le&&n<=le}var d0=Sf?Kr(Sf):xv;function La(n){return typeof n=="string"||!Je(n)&&er(n)&&Tr(n)==ar}function $r(n){return typeof n=="symbol"||er(n)&&Tr(n)==R}var eu=Bf?Kr(Bf):Iv;function TD(n){return n===r}function ND(n){return er(n)&&Mr(n)==Y}function kD(n){return er(n)&&Tr(n)==ue}var RD=Ba(so),LD=Ba(function(n,s){return n<=s});function p0(n){if(!n)return[];if(Ur(n))return La(n)?yn(n):Lr(n);if(xu&&n[xu])return g1(n[xu]());var s=Mr(n),v=s==Xe?Ys:s==jt?na:tu;return v(n)}function Jn(n){if(!n)return n===0?n:0;if(n=cn(n),n===te||n===-te){var s=n<0?-1:1;return s*ve}return n===n?n:0}function tt(n){var s=Jn(n),v=s%1;return s===s?v?s-v:s:0}function v0(n){return n?xi(tt(n),0,Se):0}function cn(n){if(typeof n=="number")return n;if($r(n))return ye;if(Kt(n)){var s=typeof n.valueOf=="function"?n.valueOf():n;n=Kt(s)?s+"":s}if(typeof n!="string")return n===0?n:+n;n=Tf(n);var v=bu.test(n);return v||wu.test(n)?Qp(n.slice(2),v?2:8):yu.test(n)?ye:+n}function g0(n){return Nn(n,jr(n))}function UD(n){return n?xi(tt(n),-le,le):n===0?n:0}function yt(n){return n==null?"":Yr(n)}var jD=Xi(function(n,s){if(zu(s)||Ur(s)){Nn(s,mr(s),n);return}for(var v in s)Et.call(s,v)&&Ru(n,v,s[v])}),m0=Xi(function(n,s){Nn(s,jr(s),n)}),Ua=Xi(function(n,s,v,A){Nn(s,jr(s),n,A)}),VD=Xi(function(n,s,v,A){Nn(s,mr(s),n,A)}),qD=$n(eo);function zD(n,s){var v=Zi(n);return s==null?v:$f(v,s)}var WD=ut(function(n,s){n=Ot(n);var v=-1,A=s.length,S=A>2?s[2]:r;for(S&&Nr(s[0],s[1],S)&&(A=1);++v<A;)for(var x=s[v],U=jr(x),H=-1,Q=U.length;++H<Q;){var de=U[H],pe=n[de];(pe===r||An(pe,Ki[de])&&!Et.call(n,de))&&(n[de]=x[de])}return n}),HD=ut(function(n){return n.push(r,Tc),Gr(D0,r,n)});function GD(n,s){return Mf(n,je(s,3),Tn)}function KD(n,s){return Mf(n,je(s,3),ro)}function YD(n,s){return n==null?n:to(n,je(s,3),jr)}function $D(n,s){return n==null?n:ec(n,je(s,3),jr)}function ZD(n,s){return n&&Tn(n,je(s,3))}function XD(n,s){return n&&ro(n,je(s,3))}function JD(n){return n==null?[]:ya(n,mr(n))}function QD(n){return n==null?[]:ya(n,jr(n))}function No(n,s,v){var A=n==null?r:Ii(n,s);return A===r?v:A}function e_(n,s){return n!=null&&Rc(n,s,wv)}function ko(n,s){return n!=null&&Rc(n,s,Ev)}var t_=Oc(function(n,s,v){s!=null&&typeof s.toString!="function"&&(s=sa.call(s)),n[s]=v},Lo(Vr)),r_=Oc(function(n,s,v){s!=null&&typeof s.toString!="function"&&(s=sa.call(s)),Et.call(n,s)?n[s].push(v):n[s]=[v]},je),n_=ut(Uu);function mr(n){return Ur(n)?Kf(n):ao(n)}function jr(n){return Ur(n)?Kf(n,!0):Tv(n)}function i_(n,s){var v={};return s=je(s,3),Tn(n,function(A,S,x){Kn(v,s(A,S,x),A)}),v}function u_(n,s){var v={};return s=je(s,3),Tn(n,function(A,S,x){Kn(v,S,s(A,S,x))}),v}var a_=Xi(function(n,s,v){ba(n,s,v)}),D0=Xi(function(n,s,v,A){ba(n,s,v,A)}),s_=$n(function(n,s){var v={};if(n==null)return v;var A=!1;s=qt(s,function(x){return x=hi(x,n),A||(A=x.length>1),x}),Nn(n,bo(n),v),A&&(v=on(v,f|h|D,tg));for(var S=s.length;S--;)ho(v,s[S]);return v});function o_(n,s){return _0(n,ka(je(s)))}var l_=$n(function(n,s){return n==null?{}:kv(n,s)});function _0(n,s){if(n==null)return{};var v=qt(bo(n),function(A){return[A]});return s=je(s),fc(n,v,function(A,S){return s(A,S[0])})}function f_(n,s,v){s=hi(s,n);var A=-1,S=s.length;for(S||(S=1,n=r);++A<S;){var x=n==null?r:n[kn(s[A])];x===r&&(A=S,x=v),n=Xn(x)?x.call(n):x}return n}function c_(n,s,v){return n==null?n:Vu(n,s,v)}function h_(n,s,v,A){return A=typeof A=="function"?A:r,n==null?n:Vu(n,s,v,A)}var y0=xc(mr),b0=xc(jr);function d_(n,s,v){var A=Je(n),S=A||pi(n)||eu(n);if(s=je(s,4),v==null){var x=n&&n.constructor;S?v=A?new x:[]:Kt(n)?v=Xn(x)?Zi(fa(n)):{}:v={}}return(S?un:Tn)(n,function(U,H,Q){return s(v,U,H,Q)}),v}function p_(n,s){return n==null?!0:ho(n,s)}function v_(n,s,v){return n==null?n:vc(n,s,go(v))}function g_(n,s,v,A){return A=typeof A=="function"?A:r,n==null?n:vc(n,s,go(v),A)}function tu(n){return n==null?[]:Ks(n,mr(n))}function m_(n){return n==null?[]:Ks(n,jr(n))}function D_(n,s,v){return v===r&&(v=s,s=r),v!==r&&(v=cn(v),v=v===v?v:0),s!==r&&(s=cn(s),s=s===s?s:0),xi(cn(n),s,v)}function __(n,s,v){return s=Jn(s),v===r?(v=s,s=0):v=Jn(v),n=cn(n),Fv(n,s,v)}function y_(n,s,v){if(v&&typeof v!="boolean"&&Nr(n,s,v)&&(s=v=r),v===r&&(typeof s=="boolean"?(v=s,s=r):typeof n=="boolean"&&(v=n,n=r)),n===r&&s===r?(n=0,s=1):(n=Jn(n),s===r?(s=n,n=0):s=Jn(s)),n>s){var A=n;n=s,s=A}if(v||n%1||s%1){var S=Hf();return Or(n+S*(s-n+Jp("1e-"+((S+"").length-1))),s)}return lo(n,s)}var b_=Ji(function(n,s,v){return s=s.toLowerCase(),n+(v?A0(s):s)});function A0(n){return Ro(yt(n).toLowerCase())}function w0(n){return n=yt(n),n&&n.replace(Fu,c1).replace(qp,"")}function A_(n,s,v){n=yt(n),s=Yr(s);var A=n.length;v=v===r?A:xi(tt(v),0,A);var S=v;return v-=s.length,v>=0&&n.slice(v,S)==s}function w_(n){return n=yt(n),n&&en.test(n)?n.replace(sr,h1):n}function E_(n){return n=yt(n),n&&gu.test(n)?n.replace(Ei,"\\$&"):n}var F_=Ji(function(n,s,v){return n+(v?"-":"")+s.toLowerCase()}),C_=Ji(function(n,s,v){return n+(v?" ":"")+s.toLowerCase()}),S_=Cc("toLowerCase");function B_(n,s,v){n=yt(n),s=tt(s);var A=s?Hi(n):0;if(!s||A>=s)return n;var S=(s-A)/2;return Sa(pa(S),v)+n+Sa(da(S),v)}function O_(n,s,v){n=yt(n),s=tt(s);var A=s?Hi(n):0;return s&&A<s?n+Sa(s-A,v):n}function M_(n,s,v){n=yt(n),s=tt(s);var A=s?Hi(n):0;return s&&A<s?Sa(s-A,v)+n:n}function P_(n,s,v){return v||s==null?s=0:s&&(s=+s),L1(yt(n).replace(Ar,""),s||0)}function x_(n,s,v){return(v?Nr(n,s,v):s===r)?s=1:s=tt(s),fo(yt(n),s)}function I_(){var n=arguments,s=yt(n[0]);return n.length<3?s:s.replace(n[1],n[2])}var T_=Ji(function(n,s,v){return n+(v?"_":"")+s.toLowerCase()});function N_(n,s,v){return v&&typeof v!="number"&&Nr(n,s,v)&&(s=v=r),v=v===r?Se:v>>>0,v?(n=yt(n),n&&(typeof s=="string"||s!=null&&!To(s))&&(s=Yr(s),!s&&Wi(n))?di(yn(n),0,v):n.split(s,v)):[]}var k_=Ji(function(n,s,v){return n+(v?" ":"")+Ro(s)});function R_(n,s,v){return n=yt(n),v=v==null?0:xi(tt(v),0,n.length),s=Yr(s),n.slice(v,v+s.length)==s}function L_(n,s,v){var A=M.templateSettings;v&&Nr(n,s,v)&&(s=r),n=yt(n),s=Ua({},s,A,Ic);var S=Ua({},s.imports,A.imports,Ic),x=mr(S),U=Ks(S,x),H,Q,de=0,pe=s.interpolate||ii,me="__p += '",Ce=$s((s.escape||ii).source+"|"+pe.source+"|"+(pe===qn?_u:ii).source+"|"+(s.evaluate||ii).source+"|$","g"),Ie="//# sourceURL="+(Et.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Kp+"]")+`
`;n.replace(Ce,function(ze,st,pt,Zr,kr,Xr){return pt||(pt=Zr),me+=n.slice(de,Xr).replace(Cu,d1),st&&(H=!0,me+=`' +
__e(`+st+`) +
'`),kr&&(Q=!0,me+=`';
`+kr+`;
__p += '`),pt&&(me+=`' +
((__t = (`+pt+`)) == null ? '' : __t) +
'`),de=Xr+ze.length,ze}),me+=`';
`;var qe=Et.call(s,"variable")&&s.variable;if(!qe)me=`with (obj) {
`+me+`
}
`;else if(Fi.test(qe))throw new Ze(l);me=(Q?me.replace(Ht,""):me).replace(pr,"$1").replace(Gt,"$1;"),me="function("+(qe||"obj")+`) {
`+(qe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(H?", __e = _.escape":"")+(Q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+me+`return __p
}`;var nt=F0(function(){return _t(x,Ie+"return "+me).apply(r,U)});if(nt.source=me,Io(nt))throw nt;return nt}function U_(n){return yt(n).toLowerCase()}function j_(n){return yt(n).toUpperCase()}function V_(n,s,v){if(n=yt(n),n&&(v||s===r))return Tf(n);if(!n||!(s=Yr(s)))return n;var A=yn(n),S=yn(s),x=Nf(A,S),U=kf(A,S)+1;return di(A,x,U).join("")}function q_(n,s,v){if(n=yt(n),n&&(v||s===r))return n.slice(0,Lf(n)+1);if(!n||!(s=Yr(s)))return n;var A=yn(n),S=kf(A,yn(s))+1;return di(A,0,S).join("")}function z_(n,s,v){if(n=yt(n),n&&(v||s===r))return n.replace(Ar,"");if(!n||!(s=Yr(s)))return n;var A=yn(n),S=Nf(A,yn(s));return di(A,S).join("")}function W_(n,s){var v=W,A=$;if(Kt(s)){var S="separator"in s?s.separator:S;v="length"in s?tt(s.length):v,A="omission"in s?Yr(s.omission):A}n=yt(n);var x=n.length;if(Wi(n)){var U=yn(n);x=U.length}if(v>=x)return n;var H=v-Hi(A);if(H<1)return A;var Q=U?di(U,0,H).join(""):n.slice(0,H);if(S===r)return Q+A;if(U&&(H+=Q.length-H),To(S)){if(n.slice(H).search(S)){var de,pe=Q;for(S.global||(S=$s(S.source,yt(ji.exec(S))+"g")),S.lastIndex=0;de=S.exec(pe);)var me=de.index;Q=Q.slice(0,me===r?H:me)}}else if(n.indexOf(Yr(S),H)!=H){var Ce=Q.lastIndexOf(S);Ce>-1&&(Q=Q.slice(0,Ce))}return Q+A}function H_(n){return n=yt(n),n&&or.test(n)?n.replace(vr,y1):n}var G_=Ji(function(n,s,v){return n+(v?" ":"")+s.toUpperCase()}),Ro=Cc("toUpperCase");function E0(n,s,v){return n=yt(n),s=v?r:s,s===r?v1(n)?w1(n):a1(n):n.match(s)||[]}var F0=ut(function(n,s){try{return Gr(n,r,s)}catch(v){return Io(v)?v:new Ze(v)}}),K_=$n(function(n,s){return un(s,function(v){v=kn(v),Kn(n,v,Po(n[v],n))}),n});function Y_(n){var s=n==null?0:n.length,v=je();return n=s?qt(n,function(A){if(typeof A[1]!="function")throw new an(o);return[v(A[0]),A[1]]}):[],ut(function(A){for(var S=-1;++S<s;){var x=n[S];if(Gr(x[0],this,A))return Gr(x[1],this,A)}})}function $_(n){return yv(on(n,f))}function Lo(n){return function(){return n}}function Z_(n,s){return n==null||n!==n?s:n}var X_=Bc(),J_=Bc(!0);function Vr(n){return n}function Uo(n){return ic(typeof n=="function"?n:on(n,f))}function Q_(n){return ac(on(n,f))}function ey(n,s){return sc(n,on(s,f))}var ty=ut(function(n,s){return function(v){return Uu(v,n,s)}}),ry=ut(function(n,s){return function(v){return Uu(n,v,s)}});function jo(n,s,v){var A=mr(s),S=ya(s,A);v==null&&!(Kt(s)&&(S.length||!A.length))&&(v=s,s=n,n=this,S=ya(s,mr(s)));var x=!(Kt(v)&&"chain"in v)||!!v.chain,U=Xn(n);return un(S,function(H){var Q=s[H];n[H]=Q,U&&(n.prototype[H]=function(){var de=this.__chain__;if(x||de){var pe=n(this.__wrapped__),me=pe.__actions__=Lr(this.__actions__);return me.push({func:Q,args:arguments,thisArg:n}),pe.__chain__=de,pe}return Q.apply(n,si([this.value()],arguments))})}),n}function ny(){return wr._===this&&(wr._=O1),this}function Vo(){}function iy(n){return n=tt(n),ut(function(s){return oc(s,n)})}var uy=Do(qt),ay=Do(Of),sy=Do(qs);function C0(n){return Fo(n)?zs(kn(n)):Rv(n)}function oy(n){return function(s){return n==null?r:Ii(n,s)}}var ly=Mc(),fy=Mc(!0);function qo(){return[]}function zo(){return!1}function cy(){return{}}function hy(){return""}function dy(){return!0}function py(n,s){if(n=tt(n),n<1||n>le)return[];var v=Se,A=Or(n,Se);s=je(s),n-=Se;for(var S=Gs(A,s);++v<n;)s(v);return S}function vy(n){return Je(n)?qt(n,kn):$r(n)?[n]:Lr(Gc(yt(n)))}function gy(n){var s=++S1;return yt(n)+s}var my=Ca(function(n,s){return n+s},0),Dy=_o("ceil"),_y=Ca(function(n,s){return n/s},1),yy=_o("floor");function by(n){return n&&n.length?_a(n,Vr,no):r}function Ay(n,s){return n&&n.length?_a(n,je(s,2),no):r}function wy(n){return xf(n,Vr)}function Ey(n,s){return xf(n,je(s,2))}function Fy(n){return n&&n.length?_a(n,Vr,so):r}function Cy(n,s){return n&&n.length?_a(n,je(s,2),so):r}var Sy=Ca(function(n,s){return n*s},1),By=_o("round"),Oy=Ca(function(n,s){return n-s},0);function My(n){return n&&n.length?Hs(n,Vr):0}function Py(n,s){return n&&n.length?Hs(n,je(s,2)):0}return M.after=Qm,M.ary=n0,M.assign=jD,M.assignIn=m0,M.assignInWith=Ua,M.assignWith=VD,M.at=qD,M.before=i0,M.bind=Po,M.bindAll=K_,M.bindKey=u0,M.castArray=cD,M.chain=e0,M.chunk=yg,M.compact=bg,M.concat=Ag,M.cond=Y_,M.conforms=$_,M.constant=Lo,M.countBy=Mm,M.create=zD,M.curry=a0,M.curryRight=s0,M.debounce=o0,M.defaults=WD,M.defaultsDeep=HD,M.defer=eD,M.delay=tD,M.difference=wg,M.differenceBy=Eg,M.differenceWith=Fg,M.drop=Cg,M.dropRight=Sg,M.dropRightWhile=Bg,M.dropWhile=Og,M.fill=Mg,M.filter=xm,M.flatMap=Nm,M.flatMapDeep=km,M.flatMapDepth=Rm,M.flatten=Zc,M.flattenDeep=Pg,M.flattenDepth=xg,M.flip=rD,M.flow=X_,M.flowRight=J_,M.fromPairs=Ig,M.functions=JD,M.functionsIn=QD,M.groupBy=Lm,M.initial=Ng,M.intersection=kg,M.intersectionBy=Rg,M.intersectionWith=Lg,M.invert=t_,M.invertBy=r_,M.invokeMap=jm,M.iteratee=Uo,M.keyBy=Vm,M.keys=mr,M.keysIn=jr,M.map=Ia,M.mapKeys=i_,M.mapValues=u_,M.matches=Q_,M.matchesProperty=ey,M.memoize=Na,M.merge=a_,M.mergeWith=D0,M.method=ty,M.methodOf=ry,M.mixin=jo,M.negate=ka,M.nthArg=iy,M.omit=s_,M.omitBy=o_,M.once=nD,M.orderBy=qm,M.over=uy,M.overArgs=iD,M.overEvery=ay,M.overSome=sy,M.partial=xo,M.partialRight=l0,M.partition=zm,M.pick=l_,M.pickBy=_0,M.property=C0,M.propertyOf=oy,M.pull=qg,M.pullAll=Jc,M.pullAllBy=zg,M.pullAllWith=Wg,M.pullAt=Hg,M.range=ly,M.rangeRight=fy,M.rearg=uD,M.reject=Gm,M.remove=Gg,M.rest=aD,M.reverse=Oo,M.sampleSize=Ym,M.set=c_,M.setWith=h_,M.shuffle=$m,M.slice=Kg,M.sortBy=Jm,M.sortedUniq=em,M.sortedUniqBy=tm,M.split=N_,M.spread=sD,M.tail=rm,M.take=nm,M.takeRight=im,M.takeRightWhile=um,M.takeWhile=am,M.tap=bm,M.throttle=oD,M.thru=xa,M.toArray=p0,M.toPairs=y0,M.toPairsIn=b0,M.toPath=vy,M.toPlainObject=g0,M.transform=d_,M.unary=lD,M.union=sm,M.unionBy=om,M.unionWith=lm,M.uniq=fm,M.uniqBy=cm,M.uniqWith=hm,M.unset=p_,M.unzip=Mo,M.unzipWith=Qc,M.update=v_,M.updateWith=g_,M.values=tu,M.valuesIn=m_,M.without=dm,M.words=E0,M.wrap=fD,M.xor=pm,M.xorBy=vm,M.xorWith=gm,M.zip=mm,M.zipObject=Dm,M.zipObjectDeep=_m,M.zipWith=ym,M.entries=y0,M.entriesIn=b0,M.extend=m0,M.extendWith=Ua,jo(M,M),M.add=my,M.attempt=F0,M.camelCase=b_,M.capitalize=A0,M.ceil=Dy,M.clamp=D_,M.clone=hD,M.cloneDeep=pD,M.cloneDeepWith=vD,M.cloneWith=dD,M.conformsTo=gD,M.deburr=w0,M.defaultTo=Z_,M.divide=_y,M.endsWith=A_,M.eq=An,M.escape=w_,M.escapeRegExp=E_,M.every=Pm,M.find=Im,M.findIndex=Yc,M.findKey=GD,M.findLast=Tm,M.findLastIndex=$c,M.findLastKey=KD,M.floor=yy,M.forEach=t0,M.forEachRight=r0,M.forIn=YD,M.forInRight=$D,M.forOwn=ZD,M.forOwnRight=XD,M.get=No,M.gt=mD,M.gte=DD,M.has=e_,M.hasIn=ko,M.head=Xc,M.identity=Vr,M.includes=Um,M.indexOf=Tg,M.inRange=__,M.invoke=n_,M.isArguments=ki,M.isArray=Je,M.isArrayBuffer=_D,M.isArrayLike=Ur,M.isArrayLikeObject=ir,M.isBoolean=yD,M.isBuffer=pi,M.isDate=bD,M.isElement=AD,M.isEmpty=wD,M.isEqual=ED,M.isEqualWith=FD,M.isError=Io,M.isFinite=CD,M.isFunction=Xn,M.isInteger=f0,M.isLength=Ra,M.isMap=c0,M.isMatch=SD,M.isMatchWith=BD,M.isNaN=OD,M.isNative=MD,M.isNil=xD,M.isNull=PD,M.isNumber=h0,M.isObject=Kt,M.isObjectLike=er,M.isPlainObject=Hu,M.isRegExp=To,M.isSafeInteger=ID,M.isSet=d0,M.isString=La,M.isSymbol=$r,M.isTypedArray=eu,M.isUndefined=TD,M.isWeakMap=ND,M.isWeakSet=kD,M.join=Ug,M.kebabCase=F_,M.last=fn,M.lastIndexOf=jg,M.lowerCase=C_,M.lowerFirst=S_,M.lt=RD,M.lte=LD,M.max=by,M.maxBy=Ay,M.mean=wy,M.meanBy=Ey,M.min=Fy,M.minBy=Cy,M.stubArray=qo,M.stubFalse=zo,M.stubObject=cy,M.stubString=hy,M.stubTrue=dy,M.multiply=Sy,M.nth=Vg,M.noConflict=ny,M.noop=Vo,M.now=Ta,M.pad=B_,M.padEnd=O_,M.padStart=M_,M.parseInt=P_,M.random=y_,M.reduce=Wm,M.reduceRight=Hm,M.repeat=x_,M.replace=I_,M.result=f_,M.round=By,M.runInContext=X,M.sample=Km,M.size=Zm,M.snakeCase=T_,M.some=Xm,M.sortedIndex=Yg,M.sortedIndexBy=$g,M.sortedIndexOf=Zg,M.sortedLastIndex=Xg,M.sortedLastIndexBy=Jg,M.sortedLastIndexOf=Qg,M.startCase=k_,M.startsWith=R_,M.subtract=Oy,M.sum=My,M.sumBy=Py,M.template=L_,M.times=py,M.toFinite=Jn,M.toInteger=tt,M.toLength=v0,M.toLower=U_,M.toNumber=cn,M.toSafeInteger=UD,M.toString=yt,M.toUpper=j_,M.trim=V_,M.trimEnd=q_,M.trimStart=z_,M.truncate=W_,M.unescape=H_,M.uniqueId=gy,M.upperCase=G_,M.upperFirst=Ro,M.each=t0,M.eachRight=r0,M.first=Xc,jo(M,function(){var n={};return Tn(M,function(s,v){Et.call(M.prototype,v)||(n[v]=s)}),n}(),{chain:!1}),M.VERSION=i,un(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){M[n].placeholder=M}),un(["drop","take"],function(n,s){ht.prototype[n]=function(v){v=v===r?1:hr(tt(v),0);var A=this.__filtered__&&!s?new ht(this):this.clone();return A.__filtered__?A.__takeCount__=Or(v,A.__takeCount__):A.__views__.push({size:Or(v,Se),type:n+(A.__dir__<0?"Right":"")}),A},ht.prototype[n+"Right"]=function(v){return this.reverse()[n](v).reverse()}}),un(["filter","map","takeWhile"],function(n,s){var v=s+1,A=v==G||v==z;ht.prototype[n]=function(S){var x=this.clone();return x.__iteratees__.push({iteratee:je(S,3),type:v}),x.__filtered__=x.__filtered__||A,x}}),un(["head","last"],function(n,s){var v="take"+(s?"Right":"");ht.prototype[n]=function(){return this[v](1).value()[0]}}),un(["initial","tail"],function(n,s){var v="drop"+(s?"":"Right");ht.prototype[n]=function(){return this.__filtered__?new ht(this):this[v](1)}}),ht.prototype.compact=function(){return this.filter(Vr)},ht.prototype.find=function(n){return this.filter(n).head()},ht.prototype.findLast=function(n){return this.reverse().find(n)},ht.prototype.invokeMap=ut(function(n,s){return typeof n=="function"?new ht(this):this.map(function(v){return Uu(v,n,s)})}),ht.prototype.reject=function(n){return this.filter(ka(je(n)))},ht.prototype.slice=function(n,s){n=tt(n);var v=this;return v.__filtered__&&(n>0||s<0)?new ht(v):(n<0?v=v.takeRight(-n):n&&(v=v.drop(n)),s!==r&&(s=tt(s),v=s<0?v.dropRight(-s):v.take(s-n)),v)},ht.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},ht.prototype.toArray=function(){return this.take(Se)},Tn(ht.prototype,function(n,s){var v=/^(?:filter|find|map|reject)|While$/.test(s),A=/^(?:head|last)$/.test(s),S=M[A?"take"+(s=="last"?"Right":""):s],x=A||/^find/.test(s);S&&(M.prototype[s]=function(){var U=this.__wrapped__,H=A?[1]:arguments,Q=U instanceof ht,de=H[0],pe=Q||Je(U),me=function(st){var pt=S.apply(M,si([st],H));return A&&Ce?pt[0]:pt};pe&&v&&typeof de=="function"&&de.length!=1&&(Q=pe=!1);var Ce=this.__chain__,Ie=!!this.__actions__.length,qe=x&&!Ce,nt=Q&&!Ie;if(!x&&pe){U=nt?U:new ht(this);var ze=n.apply(U,H);return ze.__actions__.push({func:xa,args:[me],thisArg:r}),new sn(ze,Ce)}return qe&&nt?n.apply(this,H):(ze=this.thru(me),qe?A?ze.value()[0]:ze.value():ze)})}),un(["pop","push","shift","sort","splice","unshift"],function(n){var s=ia[n],v=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",A=/^(?:pop|shift)$/.test(n);M.prototype[n]=function(){var S=arguments;if(A&&!this.__chain__){var x=this.value();return s.apply(Je(x)?x:[],S)}return this[v](function(U){return s.apply(Je(U)?U:[],S)})}}),Tn(ht.prototype,function(n,s){var v=M[s];if(v){var A=v.name+"";Et.call($i,A)||($i[A]=[]),$i[A].push({name:s,func:v})}}),$i[Fa(r,y).name]=[{name:"wrapper",func:r}],ht.prototype.clone=H1,ht.prototype.reverse=G1,ht.prototype.value=K1,M.prototype.at=Am,M.prototype.chain=wm,M.prototype.commit=Em,M.prototype.next=Fm,M.prototype.plant=Sm,M.prototype.reverse=Bm,M.prototype.toJSON=M.prototype.valueOf=M.prototype.value=Om,M.prototype.first=M.prototype.head,xu&&(M.prototype[xu]=Cm),M},Gi=E1();Bi?((Bi.exports=Gi)._=Gi,Ls._=Gi):wr._=Gi}).call(lr)})($C,ds);const ZC=ds,Dl="panelModeStore";function XC(){const t=On("select"),{subscribe:e,set:r,update:i}=t,u=typeof window<"u";return r(u&&localStorage[Dl]||""),{subscribe:e,updateMode:a=>{!a||!u||(localStorage[Dl]=a,r(a))},getMode:()=>Lt(t),resetMode:()=>{u&&(delete localStorage[Dl],r("select"))}}}const jn=XC(),JC=Bn(jn,t=>Lt(jn)),_l="selectedPromptStore";function QC(){const t=On(""),{subscribe:e,set:r,update:i}=t,u=typeof window<"u";return r(u&&localStorage[_l]||""),{subscribe:e,updateId:a=>{!a||!u||(localStorage[_l]=a,r(a))},getId:()=>Lt(t),clearId:()=>{u&&(delete localStorage[_l],r(""))}}}const Hl=QC(),e3=Bn(Hl,t=>Lt(Hl));function Wh(t,e,r){const i=t.slice();return i[6]=e[r][0],i[7]=e[r][1],i}function Hh(t,e,r){const i=t.slice();return i[10]=e[r][0],i[11]=e[r][1],i}function Gh(t){let e=t[11].text+"",r,i,u,a=ri(t[11],t[7].weightMode)+"",o,l;return{c(){r=Ye(e),i=Ye("::"),u=ae("b"),o=Ye(a),l=Ge()},l(d){r=$e(d,e),i=$e(d,"::"),u=se(d,"B",{});var p=re(u);o=$e(p,a),p.forEach(V),l=Ke(d)},m(d,p){_e(d,r,p),_e(d,i,p),_e(d,u,p),J(u,o),_e(d,l,p)},p(d,p){p&1&&e!==(e=d[11].text+"")&&Sn(r,e),p&1&&a!==(a=ri(d[11],d[7].weightMode)+"")&&Sn(o,a)},d(d){d&&V(r),d&&V(i),d&&V(u),d&&V(l)}}}function Kh(t,e){let r,i,u,a,o,l=Object.entries(e[7].weightedPrompts),d=[];for(let c=0;c<l.length;c+=1)d[c]=Gh(Hh(e,l,c));function p(){return e[4](e[6],e[7])}return{key:t,first:null,c(){r=ae("li"),i=ae("a");for(let c=0;c<d.length;c+=1)d[c].c();u=Ge(),this.h()},l(c){r=se(c,"LI",{});var f=re(r);i=se(f,"A",{class:!0});var h=re(i);for(let D=0;D<d.length;D+=1)d[D].l(h);h.forEach(V),u=Ke(f),f.forEach(V),this.h()},h(){T(i,"class","text-xs inline-block"),this.first=r},m(c,f){_e(c,r,f),J(r,i);for(let h=0;h<d.length;h+=1)d[h]&&d[h].m(i,null);J(r,u),a||(o=Le(i,"click",p),a=!0)},p(c,f){if(e=c,f&3){l=Object.entries(e[7].weightedPrompts);let h;for(h=0;h<l.length;h+=1){const D=Hh(e,l,h);d[h]?d[h].p(D,f):(d[h]=Gh(D),d[h].c(),d[h].m(i,null))}for(;h<d.length;h+=1)d[h].d(1);d.length=l.length}},d(c){c&&V(r),$l(d,c),a=!1,o()}}}function t3(t){let e,r,i,u,a,o=[],l=new Map,d,p,c=t[1](t[0],Yh,"desc");const f=h=>h[6];for(let h=0;h<c.length;h+=1){let D=Wh(t,c,h),b=f(D);l.set(b,o[h]=Kh(b,D))}return{c(){e=ae("ul"),r=ae("li"),i=ae("a"),u=Ye("New +"),a=Ge();for(let h=0;h<o.length;h+=1)o[h].c();this.h()},l(h){e=se(h,"UL",{class:!0});var D=re(e);r=se(D,"LI",{});var b=re(r);i=se(b,"A",{class:!0});var g=re(i);u=$e(g,"New +"),g.forEach(V),b.forEach(V),a=Ke(D);for(let m=0;m<o.length;m+=1)o[m].l(D);D.forEach(V),this.h()},h(){T(i,"class","text-xs inline-block"),T(e,"class","menu h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(h,D){_e(h,e,D),J(e,r),J(r,i),J(i,u),J(e,a);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(e,null);d||(p=Le(i,"click",t[2]),d=!0)},p(h,[D]){D&11&&(c=h[1](h[0],Yh,"desc"),o=bi(o,D,f,1,h,c,l,e,pu,Kh,null,Wh))},i:Pe,o:Pe,d(h){h&&V(e);for(let D=0;D<o.length;D+=1)o[D].d();d=!1,p()}}}const Yh=t=>t[1].date;function r3(t,e,r){let i,u;Mt(t,mn,p=>r(5,i=p)),Mt(t,YC,p=>r(0,u=p));const{orderBy:a}=ZC;function o(){Pt.updateActivePrompt(du({},i.weightMode)),jn.updateMode("edit")}function l(p,c){Hl.updateId(p),Pt.updateActivePrompt({...c}),jn.updateMode("edit")}return[u,a,o,l,(p,c)=>l(p,c)]}class n3 extends It{constructor(e){super(),Tt(this,e,r3,t3,Nt,{})}}let Wa;const i3=new Uint8Array(16);function u3(){if(!Wa&&(Wa=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Wa))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Wa(i3)}const Cr=[];for(let t=0;t<256;++t)Cr.push((t+256).toString(16).slice(1));function a3(t,e=0){return(Cr[t[e+0]]+Cr[t[e+1]]+Cr[t[e+2]]+Cr[t[e+3]]+"-"+Cr[t[e+4]]+Cr[t[e+5]]+"-"+Cr[t[e+6]]+Cr[t[e+7]]+"-"+Cr[t[e+8]]+Cr[t[e+9]]+"-"+Cr[t[e+10]]+Cr[t[e+11]]+Cr[t[e+12]]+Cr[t[e+13]]+Cr[t[e+14]]+Cr[t[e+15]]).toLowerCase()}const s3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),$h={randomUUID:s3};function Op(t,e,r){if($h.randomUUID&&!e&&!t)return $h.randomUUID();t=t||{};const i=t.random||(t.rng||u3)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){r=r||0;for(let u=0;u<16;++u)e[r+u]=i[u];return e}return a3(i)}function o3(t){const e=[],r=/((?:[^:]+|:(?!:))+)(?:::(\d+(?:\.\d+)?))?(?=\s|$)/g;let i;for(;(i=r.exec(t))!==null;){const u=i[1].trim(),a=i[2]?parseFloat(i[2]):1;u&&e.push([u,a])}return e}function yl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=t.length-1;let r=t;for(;r[e]===",";)r=r.slice(0,e);return r}function bl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=["-","#","*","•","◦",">","<","+","^","~","(",")","[","]","{","}"];let r=t.trim();for(;e.includes(r[0]);)r=r.slice(1).trim();return/^\d+(\.|\))\s/.test(r)&&(r=r.replace(/^\d+(\.|\))\s/,"")),r}function Gl(t){if(t=t.replace(/^\n+|\n+$/g,""),t.includes("::"))return o3(t);if(t.includes(`
`))return t.split(`
`).map(a=>bl(yl(a))).filter(a=>a.length>0).map(a=>[a,1]);const e=t.match(/[^.!?]+[.!?]+/g)||[],r=e.length,i=t.split(",").map(a=>bl(yl(a))).filter(a=>a.length>0),u=i.length-1;return r>u?e.map(a=>bl(yl(a))).filter(a=>a.length>0).map(a=>[a,1]):i.map(a=>[a,1])}function l3(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Mp=l3,f3=typeof lr=="object"&&lr&&lr.Object===Object&&lr,c3=f3,h3=c3,d3=typeof self=="object"&&self&&self.Object===Object&&self,p3=h3||d3||Function("return this")(),Pp=p3,v3=Pp,g3=function(){return v3.Date.now()},m3=g3,D3=/\s/;function _3(t){for(var e=t.length;e--&&D3.test(t.charAt(e)););return e}var y3=_3,b3=y3,A3=/^\s+/;function w3(t){return t&&t.slice(0,b3(t)+1).replace(A3,"")}var E3=w3,F3=Pp,C3=F3.Symbol,xp=C3,Zh=xp,Ip=Object.prototype,S3=Ip.hasOwnProperty,B3=Ip.toString,Gu=Zh?Zh.toStringTag:void 0;function O3(t){var e=S3.call(t,Gu),r=t[Gu];try{t[Gu]=void 0;var i=!0}catch{}var u=B3.call(t);return i&&(e?t[Gu]=r:delete t[Gu]),u}var M3=O3,P3=Object.prototype,x3=P3.toString;function I3(t){return x3.call(t)}var T3=I3,Xh=xp,N3=M3,k3=T3,R3="[object Null]",L3="[object Undefined]",Jh=Xh?Xh.toStringTag:void 0;function U3(t){return t==null?t===void 0?L3:R3:Jh&&Jh in Object(t)?N3(t):k3(t)}var j3=U3;function V3(t){return t!=null&&typeof t=="object"}var q3=V3,z3=j3,W3=q3,H3="[object Symbol]";function G3(t){return typeof t=="symbol"||W3(t)&&z3(t)==H3}var K3=G3,Y3=E3,Qh=Mp,$3=K3,ed=0/0,Z3=/^[-+]0x[0-9a-f]+$/i,X3=/^0b[01]+$/i,J3=/^0o[0-7]+$/i,Q3=parseInt;function eS(t){if(typeof t=="number")return t;if($3(t))return ed;if(Qh(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Qh(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Y3(t);var r=X3.test(t);return r||J3.test(t)?Q3(t.slice(2),r?2:8):Z3.test(t)?ed:+t}var tS=eS,rS=Mp,Al=m3,td=tS,nS="Expected a function",iS=Math.max,uS=Math.min;function aS(t,e,r){var i,u,a,o,l,d,p=0,c=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(nS);e=td(e)||0,rS(r)&&(c=!!r.leading,f="maxWait"in r,a=f?iS(td(r.maxWait)||0,e):a,h="trailing"in r?!!r.trailing:h);function D(O){var P=i,I=u;return i=u=void 0,p=O,o=t.apply(I,P),o}function b(O){return p=O,l=setTimeout(y,e),c?D(O):o}function g(O){var P=O-d,I=O-p,N=e-P;return f?uS(N,a-I):N}function m(O){var P=O-d,I=O-p;return d===void 0||P>=e||P<0||f&&I>=a}function y(){var O=Al();if(m(O))return E(O);l=setTimeout(y,g(O))}function E(O){return l=void 0,h&&i?D(O):(i=u=void 0,o)}function w(){l!==void 0&&clearTimeout(l),p=0,i=d=u=l=void 0}function B(){return l===void 0?o:E(Al())}function F(){var O=Al(),P=m(O);if(i=arguments,u=this,d=O,P){if(l===void 0)return b(d);if(f)return clearTimeout(l),l=setTimeout(y,e),D(d)}return l===void 0&&(l=setTimeout(y,e)),o}return F.cancel=w,F.flush=B,F}var rd=aS;function nd(t,e,r){const i=t.slice();return i[13]=e[r].id,i[14]=e[r].text,i}function id(t,e){let r,i,u,a,o;function l(...d){return e[9](e[13],...d)}return{key:t,first:null,c(){r=ae("li"),i=ae("input"),this.h()},l(d){r=se(d,"LI",{class:!0});var p=re(r);i=se(p,"INPUT",{type:!0,placeholder:!0,class:!0}),p.forEach(V),this.h()},h(){i.value=u=e[14],T(i,"type","text"),T(i,"placeholder",""),T(i,"class","input input-bordered input-sm w-full"),T(r,"class","p-1"),this.first=r},m(d,p){_e(d,r,p),J(r,i),a||(o=Le(i,"input",l),a=!0)},p(d,p){e=d,p&2&&u!==(u=e[14])&&i.value!==u&&(i.value=u)},d(d){d&&V(r),a=!1,o()}}}function sS(t){let e,r,i,u,a,o,l,d,p,c,f,h=[],D=new Map,b,g,m,y,E,w=t[1];const B=F=>F[13];for(let F=0;F<w.length;F+=1){let O=nd(t,w,F),P=B(O);D.set(P,h[F]=id(P,O))}return{c(){e=ae("div"),r=ae("button"),i=Ye("Paste"),u=Ge(),a=ae("button"),o=Ye("Save"),l=Ge(),d=ae("button"),p=Ye("Delete"),c=Ge(),f=ae("ul");for(let F=0;F<h.length;F+=1)h[F].c();b=Ge(),g=ae("li"),m=ae("input"),this.h()},l(F){e=se(F,"DIV",{class:!0});var O=re(e);r=se(O,"BUTTON",{class:!0});var P=re(r);i=$e(P,"Paste"),P.forEach(V),u=Ke(O),a=se(O,"BUTTON",{class:!0});var I=re(a);o=$e(I,"Save"),I.forEach(V),l=Ke(O),d=se(O,"BUTTON",{class:!0});var N=re(d);p=$e(N,"Delete"),N.forEach(V),O.forEach(V),c=Ke(F),f=se(F,"UL",{class:!0});var W=re(f);for(let K=0;K<h.length;K+=1)h[K].l(W);b=Ke(W),g=se(W,"LI",{class:!0});var $=re(g);m=se($,"INPUT",{type:!0,placeholder:!0,class:!0}),$.forEach(V),W.forEach(V),this.h()},h(){T(r,"class","btn btn-sm btn-info mx-2"),T(a,"class","btn btn-sm btn-success mx-2"),T(d,"class","btn btn-sm btn-error mx-2"),T(e,"class","flex px-8 py-2 justify-center bg-base-100"),T(m,"type","text"),T(m,"placeholder","Add prompt"),T(m,"class","input input-bordered input-sm w-full italic"),T(g,"class","p-1"),T(f,"class","h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(F,O){_e(F,e,O),J(e,r),J(r,i),J(e,u),J(e,a),J(a,o),J(e,l),J(e,d),J(d,p),_e(F,c,O),_e(F,f,O);for(let P=0;P<h.length;P+=1)h[P]&&h[P].m(f,null);J(f,b),J(f,g),J(g,m),mi(m,t[0]),y||(E=[Le(r,"click",t[3]),Le(a,"click",t[2]),Le(d,"click",t[4]),Le(m,"input",t[10]),Le(m,"input",t[11])],y=!0)},p(F,[O]){O&34&&(w=F[1],h=bi(h,O,B,1,F,w,D,f,pu,id,b,nd)),O&1&&m.value!==F[0]&&mi(m,F[0])},i:Pe,o:Pe,d(F){F&&V(e),F&&V(c),F&&V(f);for(let O=0;O<h.length;O+=1)h[O].d();y=!1,Wr(E)}}}function oS(t,e,r){let i,u,a;Mt(t,mn,m=>r(8,u=m)),Mt(t,e3,m=>r(12,a=m));let o="",l=Object.keys(u.weightedPrompts).length;function d(){hs.updatePrompt(Op(),{...u,date:Date.now()}),jn.updateMode("select")}function p(){navigator.clipboard.readText().then(m=>{const y=Gl(m),E=Math.max(...y.map(([B,F])=>F)),w=y.reduce((B,[F,O],P)=>(B[P]=Dr(P,F,O,O/E),B),{});Pt.updateActivePrompt(du(w,u.weightMode))})}function c(){a&&hs.deletePrompt(a),jn.updateMode("select"),Pt.deleteActivePrompt()}const f=rd((m,y)=>{const E={...u.weightedPrompts},w={...E[m],text:y};E[m]=w,Pt.updateActivePrompt({...u,weightedPrompts:E})},500),h=rd(m=>{const y=Object.keys(u.weightedPrompts).length,E={...u.weightedPrompts},w=Dr(y,m,1);E[y]=w,Pt.updateActivePrompt({...u,weightedPrompts:E})},500),D=(m,y)=>f(m,y.target.value);function b(){o=this.value,r(0,o),r(8,u),r(7,l)}const g=m=>h(m.target.value);return t.$$.update=()=>{if(t.$$.dirty&384){const m=Object.keys(u.weightedPrompts).length;m>l&&(r(7,l=m),r(0,o=""))}t.$$.dirty&256&&r(1,i=Object.entries(u.weightedPrompts).map(([m,y])=>({id:m,text:y.text})))},[o,i,d,p,c,f,h,l,u,D,b,g]}class lS extends It{constructor(e){super(),Tt(this,e,oS,sS,Nt,{})}}const fS=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. The first sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. The middle three sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. The final sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,cS=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 10 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. Four sentences should describe the subject.
    d. Four sentences should describe the scene.
    e. Tow sentences should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,hS=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 10 concepts.
    a. Each concept should be 10 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
`,dS=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 20 concepts.
    a. Each concept should be 5 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
3. Do not use hyphens to mark list items.
4. Do not title the list.
`,pS=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. One sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. Two sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. One sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
    f. One sentence should be a poetic concept or feeling. Example: The unfathomable depths of a lover's sigh.
        i. The poetic concept should be intense.
        ii. The poetic concept should be emotional.
        iii. The poetic concept should include abstract words.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`;function vS(){const t=On({}),{subscribe:e,set:r,update:i}=t,u=typeof window<"u";return r(u&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith("directive")){const l=o.split("_")[1];a[l]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,updateDirective:(a,o)=>{const l=Lt(t),p={...l[a]||{},...o};u&&(localStorage[`directive_${a}`]=JSON.stringify(p));const c={...l,[a]:p};r(c)},getDirective:a=>Lt(t)[a],deleteDirective:a=>{u&&delete localStorage[`directive_${a}`];const o={...Lt(t)};delete o[a],r(o)}}}const ps=vS(),gS=Bn(ps,t=>Object.entries(Lt(ps))),wl="preferredModelStore";function mS(){const t=On(""),{subscribe:e,set:r,update:i}=t,u=typeof window<"u";return r(u&&localStorage[wl]||""),{subscribe:e,updateModel:a=>{!a||!u||(localStorage[wl]=a,r(a))},getModel:()=>Lt(t),deleteModel:()=>{u&&(delete localStorage[wl],r(""))}}}const Kl=mS(),Tp=Bn(Kl,t=>Lt(Kl)),El="preferredDirectiveStore";function DS(){const t=On(""),{subscribe:e,set:r,update:i}=t,u=typeof window<"u";return r(u&&localStorage[El]||""),{subscribe:e,updateDirectiveKey:a=>{!a||!u||(localStorage[El]=a,r(a))},getDirectiveKey:()=>Lt(t),deleteDirectiveKey:()=>{u&&(delete localStorage[El],r(""))}}}const vs=DS(),_S=Bn(vs,t=>Lt(vs)),Fl="metaPromptStore";function yS(){const t=On(""),{subscribe:e,set:r,update:i}=t,u=typeof window<"u";return r(u&&localStorage[Fl]||""),{subscribe:e,updateMetaPrompt:a=>{!a||!u||(localStorage[Fl]=a,r(a))},getMetaPrompt:()=>Lt(t),deleteMetaPrompt:()=>{u&&(delete localStorage[Fl],r(""))}}}const Yl=yS(),bS=Bn(Yl,t=>Lt(Yl));function ud(t,e,r){const i=t.slice();return i[30]=e[r][0],i[31]=e[r][1],i}function AS(t){let e,r,i;return{c(){e=ae("div"),r=ae("p"),i=Ye("Set Open AI Key in settings for GPT generation."),this.h()},l(u){e=se(u,"DIV",{class:!0});var a=re(e);r=se(a,"P",{class:!0});var o=re(r);i=$e(o,"Set Open AI Key in settings for GPT generation."),o.forEach(V),a.forEach(V),this.h()},h(){T(r,"class","text-center"),T(e,"class","w-full p-2 flex justify-center")},m(u,a){_e(u,e,a),J(e,r),J(r,i)},p:Pe,d(u){u&&V(e)}}}function wS(t){let e,r,i,u,a,o,l,d,p,c,f=[],h=new Map,D,b,g,m,y,E,w,B=Object.entries(t[1]);const F=P=>P[30];for(let P=0;P<B.length;P+=1){let I=ud(t,B,P),N=F(I);h.set(N,f[P]=ad(N,I))}let O=t[0]&&sd(t);return{c(){e=ae("div"),r=ae("div"),i=ae("label"),u=ae("span"),a=Ye("Pick a directive for prompt creation"),o=Ge(),l=ae("select"),d=ae("option"),p=Ye("Pick one");for(let P=0;P<f.length;P+=1)f[P].c();D=ae("option"),b=Ye("New"),m=Ge(),O&&O.c(),y=zt(),this.h()},l(P){e=se(P,"DIV",{class:!0});var I=re(e);r=se(I,"DIV",{class:!0});var N=re(r);i=se(N,"LABEL",{class:!0});var W=re(i);u=se(W,"SPAN",{class:!0});var $=re(u);a=$e($,"Pick a directive for prompt creation"),$.forEach(V),W.forEach(V),o=Ke(N),l=se(N,"SELECT",{class:!0});var K=re(l);d=se(K,"OPTION",{});var q=re(d);p=$e(q,"Pick one"),q.forEach(V);for(let L=0;L<f.length;L+=1)f[L].l(K);D=se(K,"OPTION",{});var G=re(D);b=$e(G,"New"),G.forEach(V),K.forEach(V),N.forEach(V),I.forEach(V),m=Ke(P),O&&O.l(P),y=zt(),this.h()},h(){T(u,"class","label-text"),T(i,"class","label"),d.disabled=!0,d.selected=c=t[0]===null,d.__value="Pick one",d.value=d.__value,D.__value="new",D.value=D.__value,D.selected=g=t[0]==="new",T(l,"class","select select-bordered"),T(r,"class","form-control w-full max-w-xs mb-4"),T(e,"class","flex justify-center")},m(P,I){_e(P,e,I),J(e,r),J(r,i),J(i,u),J(u,a),J(r,o),J(r,l),J(l,d),J(d,p);for(let N=0;N<f.length;N+=1)f[N]&&f[N].m(l,null);J(l,D),J(D,b),fu(l,t[0]),_e(P,m,I),O&&O.m(P,I),_e(P,y,I),E||(w=Le(l,"change",t[11]),E=!0)},p(P,I){I[0]&3&&c!==(c=P[0]===null)&&(d.selected=c),I[0]&3&&(B=Object.entries(P[1]),f=bi(f,I,F,1,P,B,h,l,pu,ad,D,ud)),I[0]&3&&g!==(g=P[0]==="new")&&(D.selected=g),I[0]&3&&fu(l,P[0]),P[0]?O?O.p(P,I):(O=sd(P),O.c(),O.m(y.parentNode,y)):O&&(O.d(1),O=null)},d(P){P&&V(e);for(let I=0;I<f.length;I+=1)f[I].d();P&&V(m),O&&O.d(P),P&&V(y),E=!1,w()}}}function ad(t,e){let r,i=e[31].name+"",u,a=e[31].builtIn?" (Built-In)":" (User)",o,l,d;return{key:t,first:null,c(){r=ae("option"),u=Ye(i),o=Ye(a),this.h()},l(p){r=se(p,"OPTION",{});var c=re(r);u=$e(c,i),o=$e(c,a),c.forEach(V),this.h()},h(){r.__value=l=e[30],r.value=r.__value,r.selected=d=e[0]===e[30],this.first=r},m(p,c){_e(p,r,c),J(r,u),J(r,o)},p(p,c){e=p,c[0]&2&&i!==(i=e[31].name+"")&&Sn(u,i),c[0]&2&&a!==(a=e[31].builtIn?" (Built-In)":" (User)")&&Sn(o,a),c[0]&2&&l!==(l=e[30])&&(r.__value=l,r.value=r.__value),c[0]&3&&d!==(d=e[0]===e[30])&&(r.selected=d)},d(p){p&&V(r)}}}function sd(t){let e,r,i,u,a,o,l,d,p,c,f=!t[6]&&od(t);function h(g,m){return g[5]?FS:ES}let D=h(t),b=D(t);return{c(){f&&f.c(),e=Ge(),r=ae("div"),i=ae("textarea"),u=Ge(),a=ae("div"),o=ae("textarea"),l=Ge(),b.c(),d=zt(),this.h()},l(g){f&&f.l(g),e=Ke(g),r=se(g,"DIV",{class:!0});var m=re(r);i=se(m,"TEXTAREA",{class:!0,placeholder:!0}),re(i).forEach(V),m.forEach(V),u=Ke(g),a=se(g,"DIV",{class:!0});var y=re(a);o=se(y,"TEXTAREA",{class:!0,placeholder:!0}),re(o).forEach(V),y.forEach(V),l=Ke(g),b.l(g),d=zt(),this.h()},h(){T(i,"class","textarea textarea-bordered w-full h-full"),T(i,"placeholder","GPT Directives"),T(r,"class","w-full p-2 h-1/2"),o.value=t[7],T(o,"class","textarea textarea-bordered w-full h-full"),T(o,"placeholder","Describe the prompt to generate."),T(a,"class","w-full p-2 h-1/5")},m(g,m){f&&f.m(g,m),_e(g,e,m),_e(g,r,m),J(r,i),mi(i,t[4]),_e(g,u,m),_e(g,a,m),J(a,o),_e(g,l,m),b.m(g,m),_e(g,d,m),p||(c=[Le(i,"input",t[17]),Le(o,"input",t[18])],p=!0)},p(g,m){g[6]?f&&(f.d(1),f=null):f?f.p(g,m):(f=od(g),f.c(),f.m(e.parentNode,e)),m[0]&16&&mi(i,g[4]),m[0]&128&&(o.value=g[7]),D===(D=h(g))&&b?b.p(g,m):(b.d(1),b=D(g),b&&(b.c(),b.m(d.parentNode,d)))},d(g){f&&f.d(g),g&&V(e),g&&V(r),g&&V(u),g&&V(a),g&&V(l),b.d(g),g&&V(d),p=!1,Wr(c)}}}function od(t){let e,r,i,u,a,o,l;return{c(){e=ae("div"),r=ae("input"),i=Ge(),u=ae("button"),a=Ye("Save"),this.h()},l(d){e=se(d,"DIV",{class:!0});var p=re(e);r=se(p,"INPUT",{type:!0,placeholder:!0,class:!0}),i=Ke(p),u=se(p,"BUTTON",{class:!0});var c=re(u);a=$e(c,"Save"),c.forEach(V),p.forEach(V),this.h()},h(){T(r,"type","text"),T(r,"placeholder","Name"),T(r,"class","input input-bordered input-sm w-full max-w-xs"),T(u,"class","btn btn-sm btn-primary ml-4"),T(e,"class","w-full p-2 h-12 flex justify-between")},m(d,p){_e(d,e,p),J(e,r),mi(r,t[3]),J(e,i),J(e,u),J(u,a),o||(l=[Le(r,"input",t[16]),Le(u,"click",t[9])],o=!0)},p(d,p){p[0]&8&&r.value!==d[3]&&mi(r,d[3])},d(d){d&&V(e),o=!1,Wr(l)}}}function ES(t){let e,r,i={ctx:t,current:null,token:null,hasCatch:!1,pending:BS,then:SS,catch:CS,value:29};return Di(r=t[2],i),{c(){e=ae("div"),i.block.c(),this.h()},l(u){e=se(u,"DIV",{class:!0});var a=re(e);i.block.l(a),a.forEach(V),this.h()},h(){T(e,"class","w-full p-2 h-12 flex justify-end")},m(u,a){_e(u,e,a),i.block.m(e,i.anchor=null),i.mount=()=>e,i.anchor=null},p(u,a){t=u,i.ctx=t,a[0]&4&&r!==(r=t[2])&&Di(r,i)||Ds(i,t,a)},d(u){u&&V(e),i.block.d(),i.token=null,i=null}}}function FS(t){let e,r,i,u,a,o,l,d={ctx:t,current:null,token:null,hasCatch:!1,pending:PS,then:MS,catch:OS,value:29};return Di(a=t[2],d),{c(){e=ae("div"),r=ae("button"),i=Ye("Delete"),u=Ge(),d.block.c(),this.h()},l(p){e=se(p,"DIV",{class:!0});var c=re(e);r=se(c,"BUTTON",{class:!0});var f=re(r);i=$e(f,"Delete"),f.forEach(V),u=Ke(c),d.block.l(c),c.forEach(V),this.h()},h(){T(r,"class","btn btn-sm btn-error ml-4"),T(e,"class","w-full p-2 h-12 flex justify-between")},m(p,c){_e(p,e,c),J(e,r),J(r,i),J(e,u),d.block.m(e,d.anchor=null),d.mount=()=>e,d.anchor=null,o||(l=Le(r,"click",t[10]),o=!0)},p(p,c){t=p,d.ctx=t,c[0]&4&&a!==(a=t[2])&&Di(a,d)||Ds(d,t,c)},d(p){p&&V(e),d.block.d(),d.token=null,d=null,o=!1,l()}}}function CS(t){return{c:Pe,l:Pe,m:Pe,p:Pe,d:Pe}}function SS(t){let e,r,i,u;return{c(){e=ae("button"),r=Ye("Generate"),this.h()},l(a){e=se(a,"BUTTON",{class:!0});var o=re(e);r=$e(o,"Generate"),o.forEach(V),this.h()},h(){T(e,"class","btn btn-sm btn-primary ml-4")},m(a,o){_e(a,e,o),J(e,r),i||(u=Le(e,"click",t[12]),i=!0)},p:Pe,d(a){a&&V(e),i=!1,u()}}}function BS(t){let e,r,i,u;return{c(){e=ae("button"),r=Ye("Generating"),this.h()},l(a){e=se(a,"BUTTON",{class:!0});var o=re(e);r=$e(o,"Generating"),o.forEach(V),this.h()},h(){T(e,"class","btn btn-sm btn ml-4 disabled")},m(a,o){_e(a,e,o),J(e,r),i||(u=Le(e,"click",t[12]),i=!0)},p:Pe,d(a){a&&V(e),i=!1,u()}}}function OS(t){return{c:Pe,l:Pe,m:Pe,p:Pe,d:Pe}}function MS(t){let e,r,i,u;return{c(){e=ae("button"),r=Ye("Generate"),this.h()},l(a){e=se(a,"BUTTON",{class:!0});var o=re(e);r=$e(o,"Generate"),o.forEach(V),this.h()},h(){T(e,"class","btn btn-sm btn-primary ml-4")},m(a,o){_e(a,e,o),J(e,r),i||(u=Le(e,"click",t[12]),i=!0)},p:Pe,d(a){a&&V(e),i=!1,u()}}}function PS(t){let e,r,i,u;return{c(){e=ae("button"),r=Ye("Generating"),this.h()},l(a){e=se(a,"BUTTON",{class:!0});var o=re(e);r=$e(o,"Generating"),o.forEach(V),this.h()},h(){T(e,"class","btn btn-sm btn ml-4 disabled")},m(a,o){_e(a,e,o),J(e,r),i||(u=Le(e,"click",t[12]),i=!0)},p:Pe,d(a){a&&V(e),i=!1,u()}}}function xS(t){let e;function r(a,o){return a[8]?wS:AS}let u=r(t)(t);return{c(){e=ae("div"),u.c(),this.h()},l(a){e=se(a,"DIV",{class:!0});var o=re(e);u.l(o),o.forEach(V),this.h()},h(){T(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(a,o){_e(a,e,o),u.m(e,null)},p(a,o){u.p(a,o)},i:Pe,o:Pe,d(a){a&&V(e),u.d()}}}function IS(t,e,r){let i,u,a,o,l,d,p,c,f,h;Mt(t,bS,L=>r(7,l=L)),Mt(t,mn,L=>r(19,d=L)),Mt(t,_S,L=>r(14,p=L)),Mt(t,gS,L=>r(15,c=L)),Mt(t,Tp,L=>r(20,f=L)),Mt(t,df,L=>r(21,h=L));let D=h,b=f,g=null;const m=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001"];let y={C:{name:"Five Sentences",text:fS,builtIn:!0},D:{name:"Ten Sentences",text:cS,builtIn:!0},E:{name:"Fragments",text:hS,builtIn:!0},F:{name:"Concept Shotgun",text:dS,builtIn:!0},G:{name:"Poetic Accents",text:pS,builtIn:!0}},E=null,w="",B="";function F(){const L=E==="new"?Op():E;ps.updateDirective(L,{name:w,text:B,builtIn:!1}),E==="new"&&r(0,E=L)}function O(){ps.deleteDirective(E),r(0,E=null),r(3,w=""),r(4,B=""),vs.deleteDirectiveKey(null)}function P(L){r(0,E=L),console.log(E),vs.updateDirectiveKey(L),L&&L!=="new"?(r(3,w=u[L].name),r(4,B=u[L].text)):L==="new"&&(r(3,w=""),r(4,B=""))}function I(L){P(L.target.value)}function N(L,z){r(2,g=oF(L,z,b||"gpt-3.5-turbo")),g.then(le=>{console.log(le),le.data.choices.forEach((ve,ye)=>{const Se=Gl(ve.message.content);console.log(Se);const xe=Se.reduce((Fe,[Ne,ke],Ue)=>(Fe[Ue]=Dr(Ue,Ne,ke),Fe),{});Pt.updateActivePrompt(du(xe,d.weightMode)),jn.updateMode("edit")})})}function W(L,z){r(2,g=sF(L,z,b||"text-davinci-003")),g.then(le=>{console.log(le),le.data.choices.forEach((ve,ye)=>{const Se=Gl(ve.text);console.log(Se);const xe=Se.reduce((Fe,[Ne,ke],Ue)=>(Fe[Ue]=Dr(Ue,Ne,ke),Fe),{});Pt.updateActivePrompt(du(xe,d.weightMode)),jn.updateMode("edit")})})}function $(){if(!D||!B||!l)return;const L=hf(D),z=`${B}

        Using the above rules create a prompt from:
        ${l}
        `;m.includes(b)?W(L,z):N(L,z)}function K(){w=this.value,r(3,w)}function q(){B=this.value,r(4,B)}const G=L=>Yl.updateMetaPrompt(L.target.value);return t.$$.update=()=>{t.$$.dirty[0]&32768&&r(13,i=c.reduce((L,[z,te])=>(L[z]={name:te.name,text:te.text,builtIn:!1},L),{})),t.$$.dirty[0]&8192&&r(1,u=Object.entries({...y,...i}).reduce((L,[z,te])=>(L[z]=te,L),{})),t.$$.dirty[0]&16385&&(E===null&&r(0,E=p),P(E)),t.$$.dirty[0]&3&&r(6,a=E&&E!=="new"&&u[E].builtIn),t.$$.dirty[0]&3&&r(5,o=E&&E!=="new"&&!u[E].builtIn)},[E,u,g,w,B,o,a,l,D,F,O,I,$,i,p,c,K,q,G]}class TS extends It{constructor(e){super(),Tt(this,e,IS,xS,Nt,{},null,[-1,-1])}}function ld(t,e,r){const i=t.slice();return i[20]=e[r],i}function fd(t,e,r){const i=t.slice();return i[20]=e[r],i}function NS(t){return{c:Pe,l:Pe,m:Pe,p:Pe,d:Pe}}function kS(t){let e,r,i=t[0].length>0&&cd(t),u=t[1].length>0&&dd(t);return{c(){i&&i.c(),e=Ge(),u&&u.c(),r=zt()},l(a){i&&i.l(a),e=Ke(a),u&&u.l(a),r=zt()},m(a,o){i&&i.m(a,o),_e(a,e,o),u&&u.m(a,o),_e(a,r,o)},p(a,o){a[0].length>0?i?i.p(a,o):(i=cd(a),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),a[1].length>0?u?u.p(a,o):(u=dd(a),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},d(a){i&&i.d(a),a&&V(e),u&&u.d(a),a&&V(r)}}}function cd(t){let e,r,i,u,a,o,l,d,p,c,f=[],h=new Map,D,b,g=t[0];const m=y=>y[20];for(let y=0;y<g.length;y+=1){let E=fd(t,g,y),w=m(E);h.set(w,f[y]=hd(w,E))}return{c(){e=ae("div"),r=ae("div"),i=ae("label"),u=ae("span"),a=Ye("Pick a model to use for model generation"),o=Ge(),l=ae("select"),d=ae("option"),p=Ye("Pick one");for(let y=0;y<f.length;y+=1)f[y].c();this.h()},l(y){e=se(y,"DIV",{class:!0});var E=re(e);r=se(E,"DIV",{class:!0});var w=re(r);i=se(w,"LABEL",{class:!0});var B=re(i);u=se(B,"SPAN",{class:!0});var F=re(u);a=$e(F,"Pick a model to use for model generation"),F.forEach(V),B.forEach(V),o=Ke(w),l=se(w,"SELECT",{class:!0});var O=re(l);d=se(O,"OPTION",{});var P=re(d);p=$e(P,"Pick one"),P.forEach(V);for(let I=0;I<f.length;I+=1)f[I].l(O);O.forEach(V),w.forEach(V),E.forEach(V),this.h()},h(){T(u,"class","label-text"),T(i,"class","label"),d.disabled=!0,d.selected=c=t[2]===null,d.__value="Pick one",d.value=d.__value,T(l,"class","select select-bordered"),T(r,"class","form-control w-full max-w-xs mb-4"),T(e,"class","flex justify-center")},m(y,E){_e(y,e,E),J(e,r),J(r,i),J(i,u),J(u,a),J(r,o),J(r,l),J(l,d),J(d,p);for(let w=0;w<f.length;w+=1)f[w]&&f[w].m(l,null);fu(l,t[2]),D||(b=Le(l,"change",t[7]),D=!0)},p(y,E){E&5&&c!==(c=y[2]===null)&&(d.selected=c),E&5&&(g=y[0],f=bi(f,E,m,1,y,g,h,l,pu,hd,null,fd)),E&5&&fu(l,y[2])},d(y){y&&V(e);for(let E=0;E<f.length;E+=1)f[E].d();D=!1,b()}}}function hd(t,e){let r,i=e[20]+"",u,a,o;return{key:t,first:null,c(){r=ae("option"),u=Ye(i),this.h()},l(l){r=se(l,"OPTION",{});var d=re(r);u=$e(d,i),d.forEach(V),this.h()},h(){r.__value=a=e[20],r.value=r.__value,r.selected=o=e[2]===e[20],this.first=r},m(l,d){_e(l,r,d),J(r,u)},p(l,d){e=l,d&1&&i!==(i=e[20]+"")&&Sn(u,i),d&1&&a!==(a=e[20])&&(r.__value=a,r.value=r.__value),d&5&&o!==(o=e[2]===e[20])&&(r.selected=o)},d(l){l&&V(r)}}}function dd(t){let e,r,i,u,a,o,l,d,p,c,f=[],h=new Map,D,b,g=t[1];const m=y=>y[20];for(let y=0;y<g.length;y+=1){let E=ld(t,g,y),w=m(E);h.set(w,f[y]=pd(w,E))}return{c(){e=ae("div"),r=ae("div"),i=ae("label"),u=ae("span"),a=Ye("Pick a model to use for prompt embedding"),o=Ge(),l=ae("select"),d=ae("option"),p=Ye("Pick one");for(let y=0;y<f.length;y+=1)f[y].c();this.h()},l(y){e=se(y,"DIV",{class:!0});var E=re(e);r=se(E,"DIV",{class:!0});var w=re(r);i=se(w,"LABEL",{class:!0});var B=re(i);u=se(B,"SPAN",{class:!0});var F=re(u);a=$e(F,"Pick a model to use for prompt embedding"),F.forEach(V),B.forEach(V),o=Ke(w),l=se(w,"SELECT",{class:!0});var O=re(l);d=se(O,"OPTION",{});var P=re(d);p=$e(P,"Pick one"),P.forEach(V);for(let I=0;I<f.length;I+=1)f[I].l(O);O.forEach(V),w.forEach(V),E.forEach(V),this.h()},h(){T(u,"class","label-text"),T(i,"class","label"),d.disabled=!0,d.selected=c=t[3]===null,d.__value="Pick one",d.value=d.__value,T(l,"class","select select-bordered"),T(r,"class","form-control w-full max-w-xs mb-4"),T(e,"class","flex justify-center")},m(y,E){_e(y,e,E),J(e,r),J(r,i),J(i,u),J(u,a),J(r,o),J(r,l),J(l,d),J(d,p);for(let w=0;w<f.length;w+=1)f[w]&&f[w].m(l,null);fu(l,t[3]),D||(b=Le(l,"change",t[8]),D=!0)},p(y,E){E&10&&c!==(c=y[3]===null)&&(d.selected=c),E&10&&(g=y[1],f=bi(f,E,m,1,y,g,h,l,pu,pd,null,ld)),E&10&&fu(l,y[3])},d(y){y&&V(e);for(let E=0;E<f.length;E+=1)f[E].d();D=!1,b()}}}function pd(t,e){let r,i=e[20]+"",u,a,o;return{key:t,first:null,c(){r=ae("option"),u=Ye(i),this.h()},l(l){r=se(l,"OPTION",{});var d=re(r);u=$e(d,i),d.forEach(V),this.h()},h(){r.__value=a=e[20],r.value=r.__value,r.selected=o=e[3]===e[20],this.first=r},m(l,d){_e(l,r,d),J(r,u)},p(l,d){e=l,d&2&&i!==(i=e[20]+"")&&Sn(u,i),d&2&&a!==(a=e[20])&&(r.__value=a,r.value=r.__value),d&10&&o!==(o=e[3]===e[20])&&(r.selected=o)},d(l){l&&V(r)}}}function RS(t){let e,r,i;return{c(){e=ae("div"),r=ae("div"),i=ae("progress"),this.h()},l(u){e=se(u,"DIV",{class:!0});var a=re(e);r=se(a,"DIV",{class:!0});var o=re(r);i=se(o,"PROGRESS",{class:!0}),re(i).forEach(V),o.forEach(V),a.forEach(V),this.h()},h(){T(i,"class","progress progress-primary w-56"),T(r,"class","form-control w-full flex flex-col max-w-xs"),T(e,"class","py-10 flex justify-center")},m(u,a){_e(u,e,a),J(e,r),J(r,i)},p:Pe,d(u){u&&V(e)}}}function LS(t){let e,r,i,u,a,o,l,d,p,c,f,h,D,b,g,m,y,E,w,B,F,O,P,I,N={ctx:t,current:null,token:null,hasCatch:!1,pending:RS,then:kS,catch:NS,value:19};return Di(O=t[4],N),{c(){e=ae("div"),r=ae("div"),i=ae("div"),u=ae("label"),a=ae("span"),o=Ye("Include Prompts With Zero Weight"),l=Ge(),d=ae("input"),p=Ge(),c=ae("div"),f=ae("div"),h=ae("label"),D=ae("span"),b=Ye("Open AI Key"),g=Ge(),m=ae("input"),y=Ge(),E=ae("label"),w=ae("button"),B=Ye("Clear"),F=Ge(),N.block.c(),this.h()},l(W){e=se(W,"DIV",{class:!0});var $=re(e);r=se($,"DIV",{class:!0});var K=re(r);i=se(K,"DIV",{class:!0});var q=re(i);u=se(q,"LABEL",{class:!0});var G=re(u);a=se(G,"SPAN",{class:!0});var L=re(a);o=$e(L,"Include Prompts With Zero Weight"),L.forEach(V),G.forEach(V),l=Ke(q),d=se(q,"INPUT",{type:!0,class:!0}),q.forEach(V),K.forEach(V),p=Ke($),c=se($,"DIV",{class:!0});var z=re(c);f=se(z,"DIV",{class:!0});var te=re(f);h=se(te,"LABEL",{class:!0});var le=re(h);D=se(le,"SPAN",{class:!0});var ve=re(D);b=$e(ve,"Open AI Key"),ve.forEach(V),le.forEach(V),g=Ke(te),m=se(te,"INPUT",{type:!0,placeholder:!0,class:!0}),y=Ke(te),E=se(te,"LABEL",{class:!0});var ye=re(E);w=se(ye,"BUTTON",{class:!0});var Se=re(w);B=$e(Se,"Clear"),Se.forEach(V),ye.forEach(V),te.forEach(V),z.forEach(V),F=Ke($),N.block.l($),$.forEach(V),this.h()},h(){T(a,"class","label-text-alt"),T(u,"class","label"),T(d,"type","checkbox"),T(d,"class","toggle"),d.checked=t[5],T(i,"class","form-control w-full max-w-xs"),T(r,"class","flex justify-center"),T(D,"class","label-text-alt"),T(h,"class","label"),m.value=t[6],T(m,"type","password"),T(m,"placeholder","Open AI Key"),T(m,"class","input input-bordered w-full max-w-xs"),T(w,"class","btn btn-xs btn-error"),T(E,"class","label"),T(f,"class","form-control w-full max-w-xs"),T(c,"class","flex justify-center"),T(e,"class","h-full p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(W,$){_e(W,e,$),J(e,r),J(r,i),J(i,u),J(u,a),J(a,o),J(i,l),J(i,d),J(e,p),J(e,c),J(c,f),J(f,h),J(h,D),J(D,b),J(f,g),J(f,m),J(f,y),J(f,E),J(E,w),J(w,B),J(e,F),N.block.m(e,N.anchor=null),N.mount=()=>e,N.anchor=null,P||(I=[Le(d,"change",t[11]),Le(m,"input",t[9]),Le(w,"click",t[10])],P=!0)},p(W,[$]){t=W,$&32&&(d.checked=t[5]),$&64&&m.value!==t[6]&&(m.value=t[6]),N.ctx=t,$&16&&O!==(O=t[4])&&Di(O,N)||Ds(N,t,$)},i:Pe,o:Pe,d(W){W&&V(e),N.block.d(),N.token=null,N=null,P=!1,Wr(I)}}}function US(t,e,r){let i,u,a,o,l;Mt(t,Bp,O=>r(5,i=O)),Mt(t,mn,O=>r(13,u=O)),Mt(t,pp,O=>r(14,a=O)),Mt(t,Tp,O=>r(15,o=O)),Mt(t,df,O=>r(6,l=O));const d=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001","gpt-3.5-turbo","gpt-3.5-turbo-0301"],p=["text-embedding-ada-002"];let c=l,f=[],h=[],D=o,b=a,g=null;async function m(O){if(!O||f.length&&h.length)return;const P=hf(O);r(4,g=fF(P));const I=await g;I.data&&r(0,f=I.data.data.map(({id:N})=>N).filter(N=>d.includes(N))),r(1,h=I.data.data.map(({id:N})=>N).filter(N=>p.includes(N)))}function y(O){r(2,D=O.target.value),Kl.updateModel(D)}function E(O){r(3,b=O.target.value),zl.updateEmbeddingModel(b)}function w(O){const P=O.target.value;us.updateKey(P),P.length===51&&m(P),P.length===0&&B()}function B(){us.deleteKey(),r(12,c=""),r(0,f=[]),r(1,h=[]),u.weightMode==="embed"&&Pt.updateActivePrompt({...u,weightMode:"circle"})}function F(){Wl.update(!i)}return t.$$.update=()=>{t.$$.dirty&4096&&m(c)},[f,h,D,b,g,i,l,y,E,w,B,F,c]}class jS extends It{constructor(e){super(),Tt(this,e,US,LS,Nt,{})}}function VS(t){let e,r;return e=new jS({}),{c(){ot(e.$$.fragment)},l(i){lt(e.$$.fragment,i)},m(i,u){ft(e,i,u),r=!0},i(i){r||(Me(e.$$.fragment,i),r=!0)},o(i){Te(e.$$.fragment,i),r=!1},d(i){ct(e,i)}}}function qS(t){let e,r;return e=new TS({}),{c(){ot(e.$$.fragment)},l(i){lt(e.$$.fragment,i)},m(i,u){ft(e,i,u),r=!0},i(i){r||(Me(e.$$.fragment,i),r=!0)},o(i){Te(e.$$.fragment,i),r=!1},d(i){ct(e,i)}}}function zS(t){let e,r;return e=new lS({}),{c(){ot(e.$$.fragment)},l(i){lt(e.$$.fragment,i)},m(i,u){ft(e,i,u),r=!0},i(i){r||(Me(e.$$.fragment,i),r=!0)},o(i){Te(e.$$.fragment,i),r=!1},d(i){ct(e,i)}}}function WS(t){let e,r;return e=new n3({}),{c(){ot(e.$$.fragment)},l(i){lt(e.$$.fragment,i)},m(i,u){ft(e,i,u),r=!0},i(i){r||(Me(e.$$.fragment,i),r=!0)},o(i){Te(e.$$.fragment,i),r=!1},d(i){ct(e,i)}}}function HS(t){let e,r,i,u,a,o,l,d,p,c,f,h,D,b,g,m,y,E,w,B,F,O,P,I;const N=[WS,zS,qS,VS],W=[];function $(K,q){return K[0]==="select"?0:K[0]==="edit"?1:K[0]==="generate"?2:K[0]==="settings"?3:-1}return~(B=$(t))&&(F=W[B]=N[B](t)),{c(){e=ae("div"),r=ae("div"),i=ae("div"),u=ae("button"),a=Ye("Select"),l=Ge(),d=ae("button"),p=Ye("Edit"),f=Ge(),h=ae("button"),D=Ye("Generate"),g=Ge(),m=ae("button"),y=Ye("Settings"),w=Ge(),F&&F.c(),this.h()},l(K){e=se(K,"DIV",{class:!0});var q=re(e);r=se(q,"DIV",{class:!0});var G=re(r);i=se(G,"DIV",{class:!0});var L=re(i);u=se(L,"BUTTON",{class:!0});var z=re(u);a=$e(z,"Select"),z.forEach(V),l=Ke(L),d=se(L,"BUTTON",{class:!0});var te=re(d);p=$e(te,"Edit"),te.forEach(V),f=Ke(L),h=se(L,"BUTTON",{class:!0});var le=re(h);D=$e(le,"Generate"),le.forEach(V),g=Ke(L),m=se(L,"BUTTON",{class:!0});var ve=re(m);y=$e(ve,"Settings"),ve.forEach(V),L.forEach(V),w=Ke(G),F&&F.l(G),G.forEach(V),q.forEach(V),this.h()},h(){T(u,"class",o=t[0]==="select"?"btn btn-active":"btn"),T(d,"class",c=t[0]==="edit"?"btn btn-active":"btn"),T(h,"class",b=t[0]==="generate"?"btn btn-active":"btn"),T(m,"class",E=t[0]==="settings"?"btn btn-active":"btn"),T(i,"class","btn-group btn-group-vertical sm:btn-group-horizontal bg-base-100 w-full flex justify-center p-2"),T(r,"class","h-screen overflow-y-auto flex flex-col"),T(e,"class","max-w-md w-1/2 h-screen overflow-y-auto")},m(K,q){_e(K,e,q),J(e,r),J(r,i),J(i,u),J(u,a),J(i,l),J(i,d),J(d,p),J(i,f),J(i,h),J(h,D),J(i,g),J(i,m),J(m,y),J(r,w),~B&&W[B].m(r,null),O=!0,P||(I=[Le(u,"click",t[2]),Le(d,"click",t[3]),Le(h,"click",t[4]),Le(m,"click",t[5])],P=!0)},p(K,[q]){(!O||q&1&&o!==(o=K[0]==="select"?"btn btn-active":"btn"))&&T(u,"class",o),(!O||q&1&&c!==(c=K[0]==="edit"?"btn btn-active":"btn"))&&T(d,"class",c),(!O||q&1&&b!==(b=K[0]==="generate"?"btn btn-active":"btn"))&&T(h,"class",b),(!O||q&1&&E!==(E=K[0]==="settings"?"btn btn-active":"btn"))&&T(m,"class",E);let G=B;B=$(K),B!==G&&(F&&(pn(),Te(W[G],1,1,()=>{W[G]=null}),vn()),~B?(F=W[B],F||(F=W[B]=N[B](K),F.c()),Me(F,1),F.m(r,null)):F=null)},i(K){O||(Me(F),O=!0)},o(K){Te(F),O=!1},d(K){K&&V(e),~B&&W[B].d(),P=!1,Wr(I)}}}function GS(t,e,r){let i;Mt(t,JC,p=>r(0,i=p));function u(p){jn.updateMode(p)}const a=()=>u("select"),o=()=>u("edit"),l=()=>u("generate"),d=()=>u("settings");return t.$$.update=()=>{t.$$.dirty&1&&(i||jn.updateMode("select"))},[i,u,a,o,l,d]}class KS extends It{constructor(e){super(),Tt(this,e,GS,HS,Nt,{})}}function YS(t){let e,r,i,u;return e=new KS({}),i=new GC({}),{c(){ot(e.$$.fragment),r=Ge(),ot(i.$$.fragment)},l(a){lt(e.$$.fragment,a),r=Ke(a),lt(i.$$.fragment,a)},m(a,o){ft(e,a,o),_e(a,r,o),ft(i,a,o),u=!0},p:Pe,i(a){u||(Me(e.$$.fragment,a),Me(i.$$.fragment,a),u=!0)},o(a){Te(e.$$.fragment,a),Te(i.$$.fragment,a),u=!1},d(a){ct(e,a),a&&V(r),ct(i,a)}}}class XS extends It{constructor(e){super(),Tt(this,e,null,YS,Nt,{})}}export{XS as default};
