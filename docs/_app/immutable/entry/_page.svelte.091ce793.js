import{J as Ot,S as Xe,i as et,s as tt,k as q,q as Se,a as Ee,l as W,m as R,r as Be,h as M,c as Ae,n as S,K as Qe,b as se,G as T,L as _e,H as Me,M as zt,I as Ge,N as ut,O as st,y as Ve,z as je,A as ze,g as fe,d as ve,B as qe,p as Bt,u as hr,P as w0,C as yu,v as ar,f as ur,D as wu,E as Eu,F as Au,e as Ft,Q as Cu,R as Un,T as Jn,U as Ni,V as Pa,W as nn,X as Np,Y as oy,Z as ly,_ as Sa,$ as Ms,a0 as Lp,a1 as Rp,o as cy,a2 as ki,a3 as fy}from"../chunks/index.f38d4254.js";import{w as sr,d as Fu}from"../chunks/index.4c6e4564.js";var gt=(t=>(t.Circle="circle",t.Ring="ring",t.Bars="bars",t.Embed="embed",t.Pie="pie",t.Random="random",t))(gt||{}),yr=(t=>(t.Build="build",t.Concept="concept",t.History="history",t))(yr||{}),Kn=(t=>(t.List="list",t.Map="map",t))(Kn||{});const Il="appStage";function hy(){const t=sr(yr.Build),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Il]||yr.Build),{subscribe:e,update:a=>{!a||!i||(localStorage[Il]=a,r(a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[Il],r(yr.Build))}}}const vc=hy();function dy(t){let e,r,n,i,a,o,s,l,p,c,f;return{c(){e=q("div"),r=q("button"),n=Se("Build"),i=Ee(),a=q("button"),o=Se("Concept"),s=Ee(),l=q("button"),p=Se("History"),this.h()},l(d){e=W(d,"DIV",{class:!0});var g=R(e);r=W(g,"BUTTON",{class:!0});var b=R(r);n=Be(b,"Build"),b.forEach(M),i=Ae(g),a=W(g,"BUTTON",{class:!0});var v=R(a);o=Be(v,"Concept"),v.forEach(M),s=Ae(g),l=W(g,"BUTTON",{class:!0});var m=R(l);p=Be(m,"History"),m.forEach(M),g.forEach(M),this.h()},h(){S(r,"class","btn btn-sm"),Qe(r,"btn-active",t[0]===yr.Build),S(a,"class","btn btn-sm"),Qe(a,"btn-active",t[0]===yr.Concept),S(l,"class","btn btn-sm"),Qe(l,"btn-active",t[0]===yr.History),S(e,"class","btn-group btn-group-horizontal p-2")},m(d,g){se(d,e,g),T(e,r),T(r,n),T(e,i),T(e,a),T(a,o),T(e,s),T(e,l),T(l,p),c||(f=[_e(r,"click",t[2]),_e(a,"click",t[3]),_e(l,"click",t[4])],c=!0)},p(d,[g]){g&1&&Qe(r,"btn-active",d[0]===yr.Build),g&1&&Qe(a,"btn-active",d[0]===yr.Concept),g&1&&Qe(l,"btn-active",d[0]===yr.History)},i:Me,o:Me,d(d){d&&M(e),c=!1,zt(f)}}}function py(t,e,r){let n;Ge(t,vc,l=>r(0,n=l));function i(l){vc.update(l)}return[n,i,()=>i(yr.Build),()=>i(yr.Concept),()=>i(yr.History)]}class gy extends Xe{constructor(e){super(),et(this,e,py,dy,tt,{})}}function vy(t){let e,r;return{c(){e=ut("svg"),r=ut("circle"),this.h()},l(n){e=st(n,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var i=R(e);r=st(i,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(r).forEach(M),i.forEach(M),this.h()},h(){S(r,"cx","25"),S(r,"cy","25"),S(r,"r","20"),S(r,"fill","rgba(255,255,255, 0.7)"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"fill","rgba(255,255,255, 0.7)"),S(e,"class","h-6 w-6"),S(e,"viewBox","0 0 50 50")},m(n,i){se(n,e,i),T(e,r)},p:Me,i:Me,o:Me,d(n){n&&M(e)}}}class my extends Xe{constructor(e){super(),et(this,e,null,vy,tt,{})}}function _y(t){let e,r,n,i,a,o;return{c(){e=ut("svg"),r=ut("circle"),n=ut("circle"),i=ut("circle"),a=ut("circle"),o=ut("circle"),this.h()},l(s){e=st(s,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var l=R(e);r=st(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(r).forEach(M),n=st(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(n).forEach(M),i=st(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(i).forEach(M),a=st(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(a).forEach(M),o=st(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(o).forEach(M),l.forEach(M),this.h()},h(){S(r,"cx","20"),S(r,"cy","80"),S(r,"r","5"),S(r,"fill","rgba(255,255,255, 0.7)"),S(n,"cx","40"),S(n,"cy","40"),S(n,"r","5"),S(n,"fill","rgba(255,255,255, 0.7)"),S(i,"cx","70"),S(i,"cy","20"),S(i,"r","5"),S(i,"fill","rgba(255,255,255, 0.7)"),S(a,"cx","80"),S(a,"cy","60"),S(a,"r","5"),S(a,"fill","rgba(255,255,255, 0.7)"),S(o,"cx","60"),S(o,"cy","75"),S(o,"r","5"),S(o,"fill","rgba(255,255,255, 0.7)"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"fill","rgba(255,255,255, 0.7)"),S(e,"class","h-6 w-6"),S(e,"viewBox","0 0 100 100")},m(s,l){se(s,e,l),T(e,r),T(e,n),T(e,i),T(e,a),T(e,o)},p:Me,i:Me,o:Me,d(s){s&&M(e)}}}class Up extends Xe{constructor(e){super(),et(this,e,null,_y,tt,{})}}const xl="selectedPrompt";function by(){const t=sr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[xl]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[xl]=a,r(a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[xl],r(""))}}}const Xi=by();function Dy(){const t=sr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith("prompt_")){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=Ot(t),p={...s[a]||{},...o};i&&(localStorage[`prompt_${a}`]=JSON.stringify(p));const c={...s,[a]:p};r(c)},get:a=>Ot(t)[a],delete:a=>{i&&delete localStorage[`prompt_${a}`];const o={...Ot(t)};delete o[a],r(o)}}}const pu=Dy(),yy=Fu(pu,t=>Object.entries(Ot(pu))),vs="activePrompt";function Ir(t,e,r,n=1){return{id:t,text:e,barWeight:n,parsedWeight:r,randomWeight:Math.random()}}function E0(){return{0:Ir(0,"Magic potion in a mystical bottle",1),1:Ir(1,"A crystalline decanter",1),2:Ir(2,"An ornate tequila bottle",1),3:Ir(3,"An antique sake bottle",1),4:Ir(4,"A colorful perfume bottle",1),5:Ir(5,"A glass vase full of vibrant flowers",1),6:Ir(6,"A minimalist glass tea kettle",1),7:Ir(7,"Chihuly glass art",1),8:Ir(8,"A fine wine bottle",1),9:Ir(9,"A gourmet vinegar bottle",1),10:Ir(10,"A stunning fishbowl",1),11:Ir(11,"A striking piece of tourmaline",1),12:Ir(12,"A finely cut piece of sapphire",1),13:Ir(13,"Iittala glass art",1)}}function Bi(t,e=gt.Pie){return{weightedPrompts:t||{},weightMode:e,pieAngles:{},ringAngles:{},ringStartAngle:0,ringReverse:!1,ringWeightScaling:2,ringExponentialScaling:!0,circleAngles:{},circleMarker:[270,.33],circleWeightScaling:2,circleExponentialScaling:!0,embedWeightScaling:2,embedExponentialScaling:!0,embedClusters:0,embedPromptLimit:Object.keys(t).length,randomPromptLimit:Object.keys(t).length}}function wy(){const t=sr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",a=i&&localStorage[vs]?JSON.parse(localStorage[vs]):Bi(E0());return r({...Bi({}),...a}),{subscribe:e,update:o=>{const s=Xi.get();s&&pu.update(s,o),!(!o||!i)&&(localStorage[vs]=JSON.stringify(o),r({...Bi({}),...o}))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[vs],r(Bi(E0())))}}}const ot=wy();function Ey(t){let e,r,n,i;return{c(){e=ut("svg"),r=ut("path"),n=ut("path"),i=ut("path"),this.h()},l(a){e=st(a,"svg",{class:!0,fill:!0,viewBox:!0,version:!0,xmlns:!0});var o=R(e);r=st(o,"path",{d:!0}),R(r).forEach(M),n=st(o,"path",{d:!0}),R(n).forEach(M),i=st(o,"path",{d:!0}),R(i).forEach(M),o.forEach(M),this.h()},h(){S(r,"d","M341.333333 385.706667c-11.946667 0-22.186667-4.266667-30.72-12.8-7.970133-7.970133-11.946667-17.92-11.946666-29.866667s3.976533-22.186667 11.946666-30.72c8.533333-7.953067 18.773333-11.946667 30.72-11.946667s21.896533 3.976533 29.866667 11.946667c8.533333 8.533333 12.8 18.773333 12.8 30.72s-4.266667 21.896533-12.8 29.866667c-7.970133 8.533333-17.92 12.8-29.866667 12.8z m128-213.333334c11.946667 0 21.896533 3.976533 29.866667 11.946667 8.533333 8.533333 12.8 18.773333 12.8 30.72s-4.266667 21.896533-12.8 29.866667c-7.970133 8.533333-17.92 12.8-29.866667 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.970133-11.946667-17.92-11.946666-29.866667s3.976533-22.186667 11.946666-30.72c8.533333-7.970133 18.773333-11.946667 30.72-11.946667zM243.2 500.906667c-7.970133 8.533333-17.92 12.8-29.866667 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.970133-11.946667-17.92-11.946666-29.866667s3.976533-22.186667 11.946666-30.72c8.533333-7.953067 18.773333-11.946667 30.72-11.946667s21.896533 3.976533 29.866667 11.946667c8.533333 8.533333 12.8 18.773333 12.8 30.72s-4.266667 21.896533-12.8 29.866667z"),S(n,"d","M512 954.026667c-27.0336-0.682667-50.176-10.683733-69.239467-29.730134-19.3024-19.3536-30.429867-42.666667-33.0752-69.2736L409.6 616.106667H170.666667c-27.0336-0.682667-50.176-10.683733-69.239467-29.730134-19.285333-19.319467-30.4128-42.615467-33.0752-69.256533L68.266667 169.813333c2.082133-27.562667 12.629333-50.414933 31.4368-69.239466 19.626667-19.626667 43.3664-29.917867 70.536533-30.583467h344.302933c27.016533 0.682667 50.158933 10.666667 69.239467 29.730133 19.643733 19.626667 29.934933 43.349333 30.6176 70.519467V407.893333h241.493333c27.050667 0.7168 50.176 10.7008 69.239467 29.7472 19.6096 19.626667 29.917867 43.3664 30.600533 70.519467V854.186667c-2.065067 27.5456-12.612267 50.397867-31.453866 69.256533-19.643733 19.626667-43.3664 29.917867-70.536534 30.600533H512z m-68.266667-354.986667V853.333333c1.792 17.152 9.403733 33.041067 23.176534 46.848 12.817067 12.817067 27.716267 19.268267 45.5168 19.712H853.333333c17.937067-0.443733 33.399467-7.202133 46.813867-20.599466 13.073067-13.090133 20.1216-28.279467 21.504-46.421334L921.6 508.586667c-0.443733-17.954133-7.202133-33.399467-20.599467-46.813867-12.834133-12.817067-27.733333-19.285333-45.550933-19.7632L512 442.026667c-17.937067 0.4608-33.399467 7.202133-46.830933 20.616533-13.056 13.073067-20.087467 28.245333-21.486934 46.404267L443.733333 599.04zM123.8528 124.706133c-13.073067 13.073067-20.104533 28.2624-21.504 46.421334L102.4 515.413333c1.792 17.169067 9.403733 33.058133 23.159467 46.813867 12.817067 12.834133 27.733333 19.285333 45.533866 19.729067H409.6v-74.24c2.082133-27.562667 12.629333-50.414933 31.4368-69.239467 19.643733-19.6096 43.3664-29.9008 70.519467-30.583467h68.693333V170.666667c-0.443733-17.954133-7.202133-33.399467-20.599467-46.813867-12.834133-12.8512-27.733333-19.3024-45.5168-19.746133H170.666667c-17.954133 0.443733-33.399467 7.185067-46.813867 20.599466z"),S(i,"d","M840.533333 522.24c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.9872-7.953067-11.946667-17.92-11.946667-29.866667s3.959467-22.203733 11.946667-30.737067c8.533333-7.970133 18.773333-11.963733 30.72-11.963733s21.896533 4.027733 29.866666 11.9808z m0 128c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.9872-7.953067-11.946667-17.92-11.946667-29.866667s3.959467-22.203733 11.946667-30.737067c8.533333-7.970133 18.773333-11.9296 30.72-11.9296s21.896533 3.9936 29.866666 11.946667z m-60.586666 128c8.533333-7.953067 18.773333-11.9296 30.72-11.9296s21.896533 3.976533 29.866666 11.9296c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.9872-7.953067-11.946667-17.92-11.946667-29.866667s3.959467-22.186667 11.946667-30.72zM597.333333 552.96c0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.953067-11.946667-17.92-11.946667-29.866667s3.976533-22.203733 11.946667-30.737067c8.533333-7.970133 18.773333-11.963733 30.72-11.963733s21.896533 3.9936 29.866666 11.963733c8.533333 8.5504 12.8 18.7904 12.8 30.737067z m-73.386666 225.28c8.533333-7.953067 18.773333-11.9296 30.72-11.9296s21.896533 3.976533 29.866666 11.9296c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.953067-11.946667-17.92-11.946667-29.866667s3.976533-22.186667 11.946667-30.72z m-11.946667-97.28c0-11.946667 3.976533-22.203733 11.946667-30.737067 8.533333-7.970133 18.773333-11.9296 30.72-11.9296s21.896533 3.959467 29.866666 11.9296c8.533333 8.5504 12.8 18.7904 12.8 30.737067 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.953067-11.946667-17.92-11.946667-29.866667z"),S(e,"class","h-5 w-5"),S(e,"fill","rgba(255,255,255, 0.7)"),S(e,"viewBox","0 0 1024 1024"),S(e,"version","1.1"),S(e,"xmlns","http://www.w3.org/2000/svg")},m(a,o){se(a,e,o),T(e,r),T(e,n),T(e,i)},p:Me,i:Me,o:Me,d(a){a&&M(e)}}}class Ay extends Xe{constructor(e){super(),et(this,e,null,Ey,tt,{})}}function Cy(t){let e,r,n,i,a,o,s,l,p,c,f,d;return n=new Ay({}),o=new my({}),p=new Up({}),{c(){e=q("div"),r=q("button"),Ve(n.$$.fragment),i=Ee(),a=q("button"),Ve(o.$$.fragment),s=Ee(),l=q("button"),Ve(p.$$.fragment),this.h()},l(g){e=W(g,"DIV",{class:!0});var b=R(e);r=W(b,"BUTTON",{class:!0});var v=R(r);je(n.$$.fragment,v),v.forEach(M),i=Ae(b),a=W(b,"BUTTON",{class:!0});var m=R(a);je(o.$$.fragment,m),m.forEach(M),s=Ae(b),l=W(b,"BUTTON",{class:!0});var D=R(l);je(p.$$.fragment,D),D.forEach(M),b.forEach(M),this.h()},h(){S(r,"class","btn btn-sm"),Qe(r,"btn-active",t[0].weightMode===gt.Random),S(a,"class","btn btn-sm"),Qe(a,"btn-active",t[0].weightMode===gt.Circle||t[0].weightMode===gt.Pie||t[0].weightMode===gt.Ring),S(l,"class","btn btn-sm"),Qe(l,"btn-active",t[0].weightMode===gt.Embed),S(e,"class","btn-group btn-group-horizontal w-full flex justify-end p-2")},m(g,b){se(g,e,b),T(e,r),ze(n,r,null),T(e,i),T(e,a),ze(o,a,null),T(e,s),T(e,l),ze(p,l,null),c=!0,f||(d=[_e(r,"click",t[2]),_e(a,"click",t[3]),_e(l,"click",t[4])],f=!0)},p(g,[b]){(!c||b&1)&&Qe(r,"btn-active",g[0].weightMode===gt.Random),(!c||b&1)&&Qe(a,"btn-active",g[0].weightMode===gt.Circle||g[0].weightMode===gt.Pie||g[0].weightMode===gt.Ring),(!c||b&1)&&Qe(l,"btn-active",g[0].weightMode===gt.Embed)},i(g){c||(fe(n.$$.fragment,g),fe(o.$$.fragment,g),fe(p.$$.fragment,g),c=!0)},o(g){ve(n.$$.fragment,g),ve(o.$$.fragment,g),ve(p.$$.fragment,g),c=!1},d(g){g&&M(e),qe(n),qe(o),qe(p),f=!1,zt(d)}}}function Fy(t,e,r){let n;Ge(t,ot,l=>r(0,n=l));function i(l){const p={...n,weightMode:l};ot.update(p)}return[n,i,()=>i(gt.Random),()=>i(gt.Pie),()=>i(gt.Embed)]}class Sy extends Xe{constructor(e){super(),et(this,e,Fy,Cy,tt,{})}}function By(t){let e,r,n,i;return{c(){e=ut("svg"),r=ut("path"),n=ut("path"),i=ut("path"),this.h()},l(a){e=st(a,"svg",{xmlns:!0,class:!0,viewBox:!0});var o=R(e);r=st(o,"path",{d:!0,fill:!0}),R(r).forEach(M),n=st(o,"path",{d:!0,fill:!0}),R(n).forEach(M),i=st(o,"path",{d:!0,fill:!0}),R(i).forEach(M),o.forEach(M),this.h()},h(){S(r,"d","M50 50 L50 10 A40 40 0 0 1 90 50 z"),S(r,"fill","rgba(255,255,255, 0.7)"),S(n,"d","M50 50 L90 50 A40 40 0 0 1 50 90 z"),S(n,"fill","rgba(255,255,255, 0.3)"),S(i,"d","M50 50 L50 90 A40 40 0 0 1 10 50 z"),S(i,"fill","rgba(255,255,255, 0.9)"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"class","h-5 w-5"),S(e,"viewBox","0 0 100 100")},m(a,o){se(a,e,o),T(e,r),T(e,n),T(e,i)},p:Me,i:Me,o:Me,d(a){a&&M(e)}}}class Oy extends Xe{constructor(e){super(),et(this,e,null,By,tt,{})}}function My(t){let e,r,n;return{c(){e=ut("svg"),r=ut("circle"),n=ut("circle"),this.h()},l(i){e=st(i,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var a=R(e);r=st(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),R(r).forEach(M),n=st(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),R(n).forEach(M),a.forEach(M),this.h()},h(){S(r,"cx","25"),S(r,"cy","25"),S(r,"r","20"),S(r,"stroke","rgba(255,255,255, 0.7)"),S(r,"stroke-width","4"),S(r,"fill","none"),S(n,"cx","25"),S(n,"cy","25"),S(n,"r","4"),S(n,"stroke","rgba(255,255,255, 0.7)"),S(n,"stroke-width","1"),S(n,"fill","rgba(255,255,255, 0.7)"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"fill","rgba(255,255,255, 0.7)"),S(e,"class","h-5 w-5"),S(e,"viewBox","0 0 50 50")},m(i,a){se(i,e,a),T(e,r),T(e,n)},p:Me,i:Me,o:Me,d(i){i&&M(e)}}}class Py extends Xe{constructor(e){super(),et(this,e,null,My,tt,{})}}function ky(t){let e,r,n,i,a;return{c(){e=ut("svg"),r=ut("mask"),n=ut("circle"),i=ut("path"),a=ut("circle"),this.h()},l(o){e=st(o,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var s=R(e);r=st(s,"mask",{id:!0});var l=R(r);n=st(l,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),R(n).forEach(M),i=st(l,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),R(i).forEach(M),l.forEach(M),a=st(s,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,mask:!0}),R(a).forEach(M),s.forEach(M),this.h()},h(){S(n,"cx","25"),S(n,"cy","25"),S(n,"r","20"),S(n,"stroke","white"),S(n,"stroke-width","6"),S(n,"fill","none"),S(i,"d","M40,22 L45,27 L50,22"),S(i,"stroke","black"),S(i,"stroke-width","4"),S(i,"fill","none"),S(r,"id","hole"),S(a,"cx","25"),S(a,"cy","25"),S(a,"r","20"),S(a,"stroke","rgba(255,255,255, 0.7)"),S(a,"stroke-width","4"),S(a,"fill","none"),S(a,"mask","url(#hole)"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"fill","rgba(255,255,255, 0.7)"),S(e,"class","h-5 w-5"),S(e,"viewBox","0 0 50 50")},m(o,s){se(o,e,s),T(e,r),T(r,n),T(r,i),T(e,a)},p:Me,i:Me,o:Me,d(o){o&&M(e)}}}class Ty extends Xe{constructor(e){super(),et(this,e,null,ky,tt,{})}}function Iy(t){let e,r,n,i,a,o,s,l,p,c,f,d;return n=new Oy({}),o=new Py({}),p=new Ty({}),{c(){e=q("div"),r=q("button"),Ve(n.$$.fragment),i=Ee(),a=q("button"),Ve(o.$$.fragment),s=Ee(),l=q("button"),Ve(p.$$.fragment),this.h()},l(g){e=W(g,"DIV",{class:!0});var b=R(e);r=W(b,"BUTTON",{class:!0});var v=R(r);je(n.$$.fragment,v),v.forEach(M),i=Ae(b),a=W(b,"BUTTON",{class:!0});var m=R(a);je(o.$$.fragment,m),m.forEach(M),s=Ae(b),l=W(b,"BUTTON",{class:!0});var D=R(l);je(p.$$.fragment,D),D.forEach(M),b.forEach(M),this.h()},h(){S(r,"class","btn btn-xs"),Qe(r,"btn-active",t[0].weightMode===gt.Pie),S(a,"class","btn btn-xs"),Qe(a,"btn-active",t[0].weightMode===gt.Circle),S(l,"class","btn btn-xs"),Qe(l,"btn-active",t[0].weightMode===gt.Ring),S(e,"class","btn-group btn-group-horizontal w-full flex justify-center p-1")},m(g,b){se(g,e,b),T(e,r),ze(n,r,null),T(e,i),T(e,a),ze(o,a,null),T(e,s),T(e,l),ze(p,l,null),c=!0,f||(d=[_e(r,"click",t[2]),_e(a,"click",t[3]),_e(l,"click",t[4])],f=!0)},p(g,[b]){(!c||b&1)&&Qe(r,"btn-active",g[0].weightMode===gt.Pie),(!c||b&1)&&Qe(a,"btn-active",g[0].weightMode===gt.Circle),(!c||b&1)&&Qe(l,"btn-active",g[0].weightMode===gt.Ring)},i(g){c||(fe(n.$$.fragment,g),fe(o.$$.fragment,g),fe(p.$$.fragment,g),c=!0)},o(g){ve(n.$$.fragment,g),ve(o.$$.fragment,g),ve(p.$$.fragment,g),c=!1},d(g){g&&M(e),qe(n),qe(o),qe(p),f=!1,zt(d)}}}function xy(t,e,r){let n;Ge(t,ot,l=>r(0,n=l));function i(l){const p={...n,weightMode:l};ot.update(p)}return[n,i,()=>i(gt.Pie),()=>i(gt.Circle),()=>i(gt.Ring)]}class Ny extends Xe{constructor(e){super(),et(this,e,xy,Iy,tt,{})}}function mc(){return mc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mc.apply(this,arguments)}var Vp={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function Xt(t){return typeof t=="number"}function Bn(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function jp(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function zp(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function qp(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Gn(t){return typeof t=="string"}var Jt=Array.isArray;function Zr(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Ps(t){return Array.isArray(t)||Zr(t)}function Ly(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Ry(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Uy(t){return t&&t.constructor.prototype.isRange===!0||!1}function zc(t){return t&&t.constructor.prototype.isIndex===!0||!1}function Vy(t){return typeof t=="boolean"}function jy(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function zy(t){return t&&t.constructor.prototype.isHelp===!0||!1}function qy(t){return typeof t=="function"}function Wy(t){return t instanceof Date}function Hy(t){return t instanceof RegExp}function $y(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!jp(t)&&!zp(t))}function Gy(t){return t===null}function qc(t){return t===void 0}function Ky(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Yy(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function Zy(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Jy(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function Qy(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Xy(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function ew(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function tw(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function rw(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function nw(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function iw(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function aw(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function uw(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function sw(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function ow(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function lw(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function cw(t){return t&&t.constructor.prototype.isChain===!0||!1}function du(t){var e=typeof t;return e==="object"?t===null?"null":Bn(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Sr(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return Sr(r)});if(t instanceof Date)return new Date(t.valueOf());if(Bn(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return fw(t,Sr)}function fw(t,e){var r={};for(var n in t)gu(t,n)&&(r[n]=e(t[n]));return r}function hw(t,e){for(var r in e)gu(e,r)&&(t[r]=e[r]);return t}function ks(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!ks(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!ks(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function gu(t,e){return t&&Object.hasOwnProperty.call(t,e)}function dw(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],a=t[i];a!==void 0&&(r[i]=a)}return r}var pw=["Matrix","Array"],gw=["number","BigNumber","Fraction"],ao=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Vp)};mc(ao,Vp,{MATRIX_OPTIONS:pw,NUMBER_OPTIONS:gw});function xn(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=vw(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){r=r.call(t)},n:function(){var p=r.next();return a=p.done,p},e:function(p){o=!0,s=p},f:function(){try{!a&&r.return!=null&&r.return()}finally{if(o)throw s}}}}function vw(t,e){if(t){if(typeof t=="string")return A0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A0(t,e)}}function A0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ea(t){return Ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ea(t)}function C0(){return!0}function Sn(){return!1}function _a(){}var F0="Argument is not a typed-function.";function Wp(){function t(G){return Ea(G)==="object"&&G!==null&&G.constructor===Object}var e=[{name:"number",test:function(Z){return typeof Z=="number"}},{name:"string",test:function(Z){return typeof Z=="string"}},{name:"boolean",test:function(Z){return typeof Z=="boolean"}},{name:"Function",test:function(Z){return typeof Z=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(Z){return Z instanceof Date}},{name:"RegExp",test:function(Z){return Z instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(Z){return Z===null}},{name:"undefined",test:function(Z){return Z===void 0}}],r={name:"any",test:C0,isAny:!0},n,i,a=0,o={createCount:0};function s(G){var Z=n.get(G);if(Z)return Z;var ie='Unknown type "'+G+'"',de=G.toLowerCase(),ue,me=xn(i),ce;try{for(me.s();!(ce=me.n()).done;)if(ue=ce.value,ue.toLowerCase()===de){ie+='. Did you mean "'+ue+'" ?';break}}catch(he){me.e(he)}finally{me.f()}throw new TypeError(ie)}function l(G){for(var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",ie=Z?s(Z).index:i.length,de=[],ue=0;ue<G.length;++ue){if(!G[ue]||typeof G[ue].name!="string"||typeof G[ue].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var me=G[ue].name;if(n.has(me))throw new TypeError('Duplicate type name "'+me+'"');de.push(me),n.set(me,{name:me,test:G[ue].test,isAny:G[ue].isAny,index:ie+ue,conversionsTo:[]})}var ce=i.slice(ie);i=i.slice(0,ie).concat(de).concat(ce);for(var he=ie+de.length;he<i.length;++he)n.get(i[he]).index=he}function p(){n=new Map,i=[],a=0,l([r],!1)}p(),l(e);function c(){var G,Z=xn(i),ie;try{for(Z.s();!(ie=Z.n()).done;)G=ie.value,n.get(G).conversionsTo=[]}catch(de){Z.e(de)}finally{Z.f()}a=0}function f(G){var Z=i.filter(function(ie){var de=n.get(ie);return!de.isAny&&de.test(G)});return Z.length?Z:["any"]}function d(G){return G&&typeof G=="function"&&"_typedFunctionData"in G}function g(G,Z,ie){if(!d(G))throw new TypeError(F0);var de=ie&&ie.exact,ue=Array.isArray(Z)?Z.join(","):Z,me=C(ue),ce=m(me);if(!de||ce in G.signatures){var he=G._typedFunctionData.signatureMap.get(ce);if(he)return he}var ke=me.length,He;if(de){He=[];var ct;for(ct in G.signatures)He.push(G._typedFunctionData.signatureMap.get(ct))}else He=G._typedFunctionData.signatures;for(var Ie=0;Ie<ke;++Ie){var Gt=me[Ie],Vt=[],tr=void 0,Kt=xn(He),Er;try{for(Kt.s();!(Er=Kt.n()).done;){tr=Er.value;var Yt=A(tr.params,Ie);if(!(!Yt||Gt.restParam&&!Yt.restParam)){if(!Yt.hasAny){var Ar=function(){var mr=w(Yt);if(Gt.types.some(function(On){return!mr.has(On.name)}))return"continue"}();if(Ar==="continue")continue}Vt.push(tr)}}}catch(mr){Kt.e(mr)}finally{Kt.f()}if(He=Vt,He.length===0)break}var pr,gr=xn(He),vn;try{for(gr.s();!(vn=gr.n()).done;)if(pr=vn.value,pr.params.length<=ke)return pr}catch(mr){gr.e(mr)}finally{gr.f()}throw new TypeError("Signature not found (signature: "+(G.name||"unnamed")+"("+m(me,", ")+"))")}function b(G,Z,ie){return g(G,Z,ie).implementation}function v(G,Z){var ie=s(Z);if(ie.test(G))return G;var de=ie.conversionsTo;if(de.length===0)throw new Error("There are no conversions to "+Z+" defined.");for(var ue=0;ue<de.length;ue++){var me=s(de[ue].from);if(me.test(G))return de[ue].convert(G)}throw new Error("Cannot convert "+G+" to "+Z)}function m(G){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return G.map(function(ie){return ie.name}).join(Z)}function D(G){var Z=G.indexOf("...")===0,ie=Z?G.length>3?G.slice(3):"any":G,de=ie.split("|").map(function(he){return s(he.trim())}),ue=!1,me=Z?"...":"",ce=de.map(function(he){return ue=he.isAny||ue,me+=he.name+"|",{name:he.name,typeIndex:he.index,test:he.test,isAny:he.isAny,conversion:null,conversionIndex:-1}});return{types:ce,name:me.slice(0,-1),hasAny:ue,hasConversion:!1,restParam:Z}}function B(G){var Z=G.types.map(function(ce){return ce.name}),ie=Q(Z),de=G.hasAny,ue=G.name,me=ie.map(function(ce){var he=s(ce.from);return de=he.isAny||de,ue+="|"+ce.from,{name:ce.from,typeIndex:he.index,test:he.test,isAny:he.isAny,conversion:ce,conversionIndex:ce.index}});return{types:G.types.concat(me),name:ue,hasAny:de,hasConversion:me.length>0,restParam:G.restParam}}function w(G){return G.typeSet||(G.typeSet=new Set,G.types.forEach(function(Z){return G.typeSet.add(Z.name)})),G.typeSet}function C(G){var Z=[];if(typeof G!="string")throw new TypeError("Signatures must be strings");var ie=G.trim();if(ie==="")return Z;for(var de=ie.split(","),ue=0;ue<de.length;++ue){var me=D(de[ue].trim());if(me.restParam&&ue!==de.length-1)throw new SyntaxError('Unexpected rest parameter "'+de[ue]+'": only allowed for the last parameter');if(me.types.length===0)return null;Z.push(me)}return Z}function F(G){var Z=Ye(G);return Z?Z.restParam:!1}function k(G){if(!G||G.types.length===0)return C0;if(G.types.length===1)return s(G.types[0].name).test;if(G.types.length===2){var Z=s(G.types[0].name).test,ie=s(G.types[1].name).test;return function(me){return Z(me)||ie(me)}}else{var de=G.types.map(function(ue){return s(ue.name).test});return function(me){for(var ce=0;ce<de.length;ce++)if(de[ce](me))return!0;return!1}}}function O(G){var Z,ie,de;if(F(G)){Z=We(G).map(k);var ue=Z.length,me=k(Ye(G)),ce=function(ke){for(var He=ue;He<ke.length;He++)if(!me(ke[He]))return!1;return!0};return function(ke){for(var He=0;He<Z.length;He++)if(!Z[He](ke[He]))return!1;return ce(ke)&&ke.length>=ue+1}}else return G.length===0?function(ke){return ke.length===0}:G.length===1?(ie=k(G[0]),function(ke){return ie(ke[0])&&ke.length===1}):G.length===2?(ie=k(G[0]),de=k(G[1]),function(ke){return ie(ke[0])&&de(ke[1])&&ke.length===2}):(Z=G.map(k),function(ke){for(var He=0;He<Z.length;He++)if(!Z[He](ke[He]))return!1;return ke.length===Z.length})}function A(G,Z){return Z<G.length?G[Z]:F(G)?Ye(G):null}function x(G,Z){var ie=A(G,Z);return ie?w(ie):new Set}function U(G){return G.conversion===null||G.conversion===void 0}function K(G,Z){var ie=new Set;return G.forEach(function(de){var ue=x(de.params,Z),me,ce=xn(ue),he;try{for(ce.s();!(he=ce.n()).done;)me=he.value,ie.add(me)}catch(ke){ce.e(ke)}finally{ce.f()}}),ie.has("any")?["any"]:Array.from(ie)}function J(G,Z,ie){var de,ue,me=G||"unnamed",ce=ie,he,ke=function(){var Kt=[];if(ce.forEach(function(Yt){var Ar=A(Yt.params,he),pr=k(Ar);(he<Yt.params.length||F(Yt.params))&&pr(Z[he])&&Kt.push(Yt)}),Kt.length===0){if(ue=K(ce,he),ue.length>0){var Er=f(Z[he]);return de=new TypeError("Unexpected type of argument in function "+me+" (expected: "+ue.join(" or ")+", actual: "+Er.join(" | ")+", index: "+he+")"),de.data={category:"wrongType",fn:me,index:he,actual:Er,expected:ue},{v:de}}}else ce=Kt};for(he=0;he<Z.length;he++){var He=ke();if(Ea(He)==="object")return He.v}var ct=ce.map(function(tr){return F(tr.params)?1/0:tr.params.length});if(Z.length<Math.min.apply(null,ct))return ue=K(ce,he),de=new TypeError("Too few arguments in function "+me+" (expected: "+ue.join(" or ")+", index: "+Z.length+")"),de.data={category:"tooFewArgs",fn:me,index:Z.length,expected:ue},de;var Ie=Math.max.apply(null,ct);if(Z.length>Ie)return de=new TypeError("Too many arguments in function "+me+" (expected: "+Ie+", actual: "+Z.length+")"),de.data={category:"tooManyArgs",fn:me,index:Z.length,expectedLength:Ie},de;for(var Gt=[],Vt=0;Vt<Z.length;++Vt)Gt.push(f(Z[Vt]).join("|"));return de=new TypeError('Arguments of type "'+Gt.join(", ")+'" do not match any of the defined signatures of function '+me+"."),de.data={category:"mismatch",actual:Gt},de}function j(G){for(var Z=i.length+1,ie=0;ie<G.types.length;ie++)U(G.types[ie])&&(Z=Math.min(Z,G.types[ie].typeIndex));return Z}function V(G){for(var Z=a+1,ie=0;ie<G.types.length;ie++)U(G.types[ie])||(Z=Math.min(Z,G.types[ie].conversionIndex));return Z}function H(G,Z){if(G.hasAny){if(!Z.hasAny)return 1}else if(Z.hasAny)return-1;if(G.restParam){if(!Z.restParam)return 1}else if(Z.restParam)return-1;if(G.hasConversion){if(!Z.hasConversion)return 1}else if(Z.hasConversion)return-1;var ie=j(G)-j(Z);if(ie<0)return-1;if(ie>0)return 1;var de=V(G)-V(Z);return de<0?-1:de>0?1:0}function z(G,Z){var ie=G.params,de=Z.params,ue=Ye(ie),me=Ye(de),ce=F(ie),he=F(de);if(ce&&ue.hasAny){if(!he||!me.hasAny)return 1}else if(he&&me.hasAny)return-1;var ke=0,He=0,ct,Ie=xn(ie),Gt;try{for(Ie.s();!(Gt=Ie.n()).done;)ct=Gt.value,ct.hasAny&&++ke,ct.hasConversion&&++He}catch(Vn){Ie.e(Vn)}finally{Ie.f()}var Vt=0,tr=0,Kt=xn(de),Er;try{for(Kt.s();!(Er=Kt.n()).done;)ct=Er.value,ct.hasAny&&++Vt,ct.hasConversion&&++tr}catch(Vn){Kt.e(Vn)}finally{Kt.f()}if(ke!==Vt)return ke-Vt;if(ce&&ue.hasConversion){if(!he||!me.hasConversion)return 1}else if(he&&me.hasConversion)return-1;if(He!==tr)return He-tr;if(ce){if(!he)return 1}else if(he)return-1;var Yt=(ie.length-de.length)*(ce?-1:1);if(Yt!==0)return Yt;for(var Ar=[],pr=0,gr=0;gr<ie.length;++gr){var vn=H(ie[gr],de[gr]);Ar.push(vn),pr+=vn}if(pr!==0)return pr;for(var mr,On=0,Xn=Ar;On<Xn.length;On++)if(mr=Xn[On],mr!==0)return mr;return 0}function Q(G){if(G.length===0)return[];var Z=G.map(s);G.length>1&&Z.sort(function(ke,He){return ke.index-He.index});var ie=Z[0].conversionsTo;if(G.length===1)return ie;ie=ie.concat([]);for(var de=new Set(G),ue=1;ue<Z.length;++ue){var me=void 0,ce=xn(Z[ue].conversionsTo),he;try{for(ce.s();!(he=ce.n()).done;)me=he.value,de.has(me.from)||(ie.push(me),de.add(me.from))}catch(ke){ce.e(ke)}finally{ce.f()}}return ie}function X(G,Z){var ie=Z;if(G.some(function(he){return he.hasConversion})){var de=F(G),ue=G.map(te);ie=function(){for(var ke=[],He=de?arguments.length-1:arguments.length,ct=0;ct<He;ct++)ke[ct]=ue[ct](arguments[ct]);return de&&(ke[He]=arguments[He].map(ue[He])),Z.apply(this,ke)}}var me=ie;if(F(G)){var ce=G.length-1;me=function(){return ie.apply(this,xe(arguments,0,ce).concat([xe(arguments,ce)]))}}return me}function te(G){var Z,ie,de,ue,me=[],ce=[];switch(G.types.forEach(function(he){he.conversion&&(me.push(s(he.conversion.from).test),ce.push(he.conversion.convert))}),ce.length){case 0:return function(ke){return ke};case 1:return Z=me[0],de=ce[0],function(ke){return Z(ke)?de(ke):ke};case 2:return Z=me[0],ie=me[1],de=ce[0],ue=ce[1],function(ke){return Z(ke)?de(ke):ie(ke)?ue(ke):ke};default:return function(ke){for(var He=0;He<ce.length;He++)if(me[He](ke))return ce[He](ke);return ke}}}function le(G){function Z(ie,de,ue){if(de<ie.length){var me=ie[de],ce=[];if(me.restParam){var he=me.types.filter(U);he.length<me.types.length&&ce.push({types:he,name:"..."+he.map(function(ke){return ke.name}).join("|"),hasAny:he.some(function(ke){return ke.isAny}),hasConversion:!1,restParam:!0}),ce.push(me)}else ce=me.types.map(function(ke){return{types:[ke],name:ke.name,hasAny:ke.isAny,hasConversion:ke.conversion,restParam:!1}});return Et(ce,function(ke){return Z(ie,de+1,ue.concat([ke]))})}else return[ue]}return Z(G,0,[])}function be(G,Z){for(var ie=Math.max(G.length,Z.length),de=0;de<ie;de++){var ue=x(G,de),me=x(Z,de),ce=!1,he=void 0,ke=xn(me),He;try{for(ke.s();!(He=ke.n()).done;)if(he=He.value,ue.has(he)){ce=!0;break}}catch(tr){ke.e(tr)}finally{ke.f()}if(!ce)return!1}var ct=G.length,Ie=Z.length,Gt=F(G),Vt=F(Z);return Gt?Vt?ct===Ie:Ie>=ct:Vt?ct>=Ie:ct===Ie}function we(G){return G.map(function(Z){return It(Z)?Pt(Z.referToSelf.callback):wr(Z)?lt(Z.referTo.references,Z.referTo.callback):Z})}function Oe(G,Z,ie){var de=[],ue,me=xn(G),ce;try{for(me.s();!(ce=me.n()).done;){ue=ce.value;var he=ie[ue];if(typeof he!="number")throw new TypeError('No definition for referenced signature "'+ue+'"');if(he=Z[he],typeof he!="function")return!1;de.push(he)}}catch(ke){me.e(ke)}finally{me.f()}return de}function Pe(G,Z,ie){for(var de=we(G),ue=new Array(de.length).fill(!1),me=!0;me;){me=!1;for(var ce=!0,he=0;he<de.length;++he)if(!ue[he]){var ke=de[he];if(It(ke))de[he]=ke.referToSelf.callback(ie),de[he].referToSelf=ke.referToSelf,ue[he]=!0,ce=!1;else if(wr(ke)){var He=Oe(ke.referTo.references,de,Z);He?(de[he]=ke.referTo.callback.apply(this,He),de[he].referTo=ke.referTo,ue[he]=!0,ce=!1):me=!0}}if(ce&&me)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return de}function Te(G){var Z=/\bthis(\(|\.signatures\b)/;Object.keys(G).forEach(function(ie){var de=G[ie];if(Z.test(de.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Re(G,Z){if(o.createCount++,Object.keys(Z).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&Te(Z);var ie=[],de=[],ue={},me=[],ce,he=function(){if(!Object.prototype.hasOwnProperty.call(Z,ce))return"continue";var or=C(ce);if(!or)return"continue";ie.forEach(function(_n){if(be(_n,or))throw new TypeError('Conflicting signatures "'+m(_n)+'" and "'+m(or)+'".')}),ie.push(or);var $r=de.length;de.push(Z[ce]);var ji=or.map(B),ti=void 0,qn=xn(le(ji)),zi;try{for(qn.s();!(zi=qn.n()).done;){ti=zi.value;var Mn=m(ti);me.push({params:ti,name:Mn,fn:$r}),ti.every(function(_n){return!_n.hasConversion})&&(ue[Mn]=$r)}}catch(_n){qn.e(_n)}finally{qn.f()}};for(ce in Z)var ke=he();me.sort(z);var He=Pe(de,ue,zn),ct;for(ct in ue)Object.prototype.hasOwnProperty.call(ue,ct)&&(ue[ct]=He[ue[ct]]);for(var Ie=[],Gt=new Map,Vt=0,tr=me;Vt<tr.length;Vt++)ct=tr[Vt],Gt.has(ct.name)||(ct.fn=He[ct.fn],Ie.push(ct),Gt.set(ct.name,ct));for(var Kt=Ie[0]&&Ie[0].params.length<=2&&!F(Ie[0].params),Er=Ie[1]&&Ie[1].params.length<=2&&!F(Ie[1].params),Yt=Ie[2]&&Ie[2].params.length<=2&&!F(Ie[2].params),Ar=Ie[3]&&Ie[3].params.length<=2&&!F(Ie[3].params),pr=Ie[4]&&Ie[4].params.length<=2&&!F(Ie[4].params),gr=Ie[5]&&Ie[5].params.length<=2&&!F(Ie[5].params),vn=Kt&&Er&&Yt&&Ar&&pr&&gr,mr=0;mr<Ie.length;++mr)Ie[mr].test=O(Ie[mr].params);for(var On=Kt?k(Ie[0].params[0]):Sn,Xn=Er?k(Ie[1].params[0]):Sn,Vn=Yt?k(Ie[2].params[0]):Sn,jn=Ar?k(Ie[3].params[0]):Sn,ta=pr?k(Ie[4].params[0]):Sn,Ui=gr?k(Ie[5].params[0]):Sn,xa=Kt?k(Ie[0].params[1]):Sn,Or=Er?k(Ie[1].params[1]):Sn,rr=Yt?k(Ie[2].params[1]):Sn,Na=Ar?k(Ie[3].params[1]):Sn,gi=pr?k(Ie[4].params[1]):Sn,mn=gr?k(Ie[5].params[1]):Sn,ei=0;ei<Ie.length;++ei)Ie[ei].implementation=X(Ie[ei].params,Ie[ei].fn);var Vi=Kt?Ie[0].implementation:_a,La=Er?Ie[1].implementation:_a,Ra=Yt?Ie[2].implementation:_a,ra=Ar?Ie[3].implementation:_a,Ua=pr?Ie[4].implementation:_a,Va=gr?Ie[5].implementation:_a,ja=Kt?Ie[0].params.length:-1,za=Er?Ie[1].params.length:-1,qa=Yt?Ie[2].params.length:-1,Wa=Ar?Ie[3].params.length:-1,vi=pr?Ie[4].params.length:-1,Ha=gr?Ie[5].params.length:-1,mi=vn?6:0,$a=Ie.length,Ga=Ie.map(function(Cr){return Cr.test}),Ka=Ie.map(function(Cr){return Cr.implementation}),na=function(){for(var or=mi;or<$a;or++)if(Ga[or](arguments))return Ka[or].apply(this,arguments);return o.onMismatch(G,arguments,Ie)};function zn(Cr,or){return arguments.length===ja&&On(Cr)&&xa(or)?Vi.apply(this,arguments):arguments.length===za&&Xn(Cr)&&Or(or)?La.apply(this,arguments):arguments.length===qa&&Vn(Cr)&&rr(or)?Ra.apply(this,arguments):arguments.length===Wa&&jn(Cr)&&Na(or)?ra.apply(this,arguments):arguments.length===vi&&ta(Cr)&&gi(or)?Ua.apply(this,arguments):arguments.length===Ha&&Ui(Cr)&&mn(or)?Va.apply(this,arguments):na.apply(this,arguments)}try{Object.defineProperty(zn,"name",{value:G})}catch{}return zn.signatures=ue,zn._typedFunctionData={signatures:Ie,signatureMap:Gt},zn}function Ue(G,Z,ie){throw J(G,Z,ie)}function We(G){return xe(G,0,G.length-1)}function Ye(G){return G[G.length-1]}function xe(G,Z,ie){return Array.prototype.slice.call(G,Z,ie)}function Dt(G,Z){for(var ie=0;ie<G.length;ie++)if(Z(G[ie]))return G[ie]}function Et(G,Z){return Array.prototype.concat.apply([],G.map(Z))}function ht(){var G=We(arguments).map(function(ie){return m(C(ie))}),Z=Ye(arguments);if(typeof Z!="function")throw new TypeError("Callback function expected as last argument");return lt(G,Z)}function lt(G,Z){return{referTo:{references:G,callback:Z}}}function Pt(G){if(typeof G!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:G}}}function wr(G){return G&&Ea(G.referTo)==="object"&&Array.isArray(G.referTo.references)&&typeof G.referTo.callback=="function"}function It(G){return G&&Ea(G.referToSelf)==="object"&&typeof G.referToSelf.callback=="function"}function dr(G,Z){if(!G)return Z;if(Z&&Z!==G){var ie=new Error("Function names do not match (expected: "+G+", actual: "+Z+")");throw ie.data={actual:Z,expected:G},ie}return G}function Ze(G){var Z;for(var ie in G)Object.prototype.hasOwnProperty.call(G,ie)&&(d(G[ie])||typeof G[ie].signature=="string")&&(Z=dr(Z,G[ie].name));return Z}function er(G,Z){var ie;for(ie in Z)if(Object.prototype.hasOwnProperty.call(Z,ie)){if(ie in G&&Z[ie]!==G[ie]){var de=new Error('Signature "'+ie+'" is defined twice');throw de.data={signature:ie,sourceFunction:Z[ie],destFunction:G[ie]},de}G[ie]=Z[ie]}}var Nt=o;o=function(Z){for(var ie=typeof Z=="string",de=ie?1:0,ue=ie?Z:"",me={},ce=de;ce<arguments.length;++ce){var he=arguments[ce],ke={},He=void 0;if(typeof he=="function"?(He=he.name,typeof he.signature=="string"?ke[he.signature]=he:d(he)&&(ke=he.signatures)):t(he)&&(ke=he,ie||(He=Ze(he))),Object.keys(ke).length===0){var ct=new TypeError("Argument to 'typed' at index "+ce+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw ct.data={index:ce,argument:he},ct}ie||(ue=dr(ue,He)),er(me,ke)}return Re(ue||"",me)},o.create=Wp,o.createCount=Nt.createCount,o.onMismatch=Ue,o.throwMismatchError=Ue,o.createError=J,o.clear=p,o.clearConversions=c,o.addTypes=l,o._findType=s,o.referTo=ht,o.referToSelf=Pt,o.convert=v,o.findSignature=g,o.find=b,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function(G,Z){var ie="any";Z!==!1&&n.has("Object")&&(ie="Object"),o.addTypes([G],ie)};function Jr(G){if(!G||typeof G.from!="string"||typeof G.to!="string"||typeof G.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(G.to===G.from)throw new SyntaxError('Illegal to define conversion from "'+G.from+'" to itself.')}return o.addConversion=function(G){Jr(G);var Z=s(G.to);if(Z.conversionsTo.every(function(ie){return ie.from!==G.from}))Z.conversionsTo.push({from:G.from,convert:G.convert,index:a++});else throw new Error('There is already a conversion from "'+G.from+'" to "'+Z.name+'"')},o.addConversions=function(G){G.forEach(o.addConversion)},o.removeConversion=function(G){Jr(G);var Z=s(G.to),ie=Dt(Z.conversionsTo,function(ue){return ue.from===G.from});if(!ie)throw new Error("Attempt to remove nonexistent conversion from "+G.from+" to "+G.to);if(ie.convert!==G.convert)throw new Error("Conversion to remove does not match existing conversion");var de=Z.conversionsTo.indexOf(ie);Z.conversionsTo.splice(de,1)},o.resolve=function(G,Z){if(!d(G))throw new TypeError(F0);for(var ie=G._typedFunctionData.signatures,de=0;de<ie.length;++de)if(ie[de].test(Z))return ie[de];return null},o}const S0=Wp();function Br(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function Nl(t,e,r){var n={2:"0b",8:"0o",16:"0x"},i=n[e],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Br(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Br(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),a="i".concat(r)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(i).concat(t.toString(e)).concat(a)}function _c(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",n,i;if(e&&(e.notation&&(r=e.notation),Xt(e)?n=e:Xt(e.precision)&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return _w(t,n);case"exponential":return Hp(t,n);case"engineering":return mw(t,n);case"bin":return Nl(t,2,i);case"oct":return Nl(t,8,i);case"hex":return Nl(t,16,i);case"auto":return bw(t,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],o=arguments[4];return a!=="."?a+o:o});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function uo(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),a=n.indexOf(".");i+=a!==-1?a-1:n.length-1;var o=n.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return o.length===0&&(o.push(0),i++),{sign:r,coefficients:o,exponent:i}}function mw(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=uo(t),n=so(r,e),i=n.exponent,a=n.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(Xt(e))for(;e>a.length||i-o+1>a.length;)a.push(0);else for(var s=Math.abs(i-o)-(a.length-1),l=0;l<s;l++)a.push(0);for(var p=Math.abs(i-o),c=1;p>0;)c++,p--;var f=a.slice(c).join(""),d=Xt(e)&&f.length||f.match(/[1-9]/)?"."+f:"",g=a.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+o.toString();return n.sign+g}function _w(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=uo(t),n=typeof e=="number"?so(r,r.exponent+1+e):r,i=n.coefficients,a=n.exponent+1,o=a+(e||0);return i.length<o&&(i=i.concat(Ca(o-i.length))),a<0&&(i=Ca(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),n.sign+i.join("")}function Hp(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=uo(t),n=e?so(r,e):r,i=n.coefficients,a=n.exponent;i.length<e&&(i=i.concat(Ca(e-i.length)));var o=i.shift();return n.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function bw(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=r&&r.lowerExp!==void 0?r.lowerExp:-3,i=r&&r.upperExp!==void 0?r.upperExp:5,a=uo(t),o=e?so(a,e):a;if(o.exponent<n||o.exponent>=i)return Hp(t,e);var s=o.coefficients,l=o.exponent;s.length<e&&(s=s.concat(Ca(e-s.length))),s=s.concat(Ca(l-s.length+1+(s.length<e?e-s.length:0))),s=Ca(-l).concat(s);var p=l>0?l:0;return p<s.length-1&&s.splice(p+1,0,"."),o.sign+s.join("")}function so(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var a=e-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),r.exponent++,a++),a--,n[a]++}}return r}function Ca(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function Dw(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var yw=Number.EPSILON||2220446049250313e-31;function Ts(t,e,r){if(r==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var n=Math.abs(t-e);return n<yw?!0:n<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}function Ll(t,e,r){var n=t.constructor,i=new n(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Br(r))throw new Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),a="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function ww(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",n,i;if(e!==void 0&&(e.notation&&(r=e.notation),typeof e=="number"?n=e:e.precision&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Aw(t,n);case"exponential":return B0(t,n);case"engineering":return Ew(t,n);case"bin":return Ll(t,2,i);case"oct":return Ll(t,8,i);case"hex":return Ll(t,16,i);case"auto":{var a=e&&e.lowerExp!==void 0?e.lowerExp:-3,o=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var s,l=t.toSignificantDigits(n),p=l.e;return p>=a&&p<o?s=l.toFixed():s=B0(t,n),s.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Ew(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),a=i.toPrecision(e);return a.indexOf("e")!==-1&&(a=i.toString()),a+"e"+(r>=0?"+":"")+n.toString()}function B0(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function Aw(t,e){return t.toFixed(e)}function rn(t,e){var r=Cw(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function Cw(t,e){if(typeof t=="number")return _c(t,e);if(Bn(t))return ww(t,e);if(Fw(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return $p(t,e);if(Gn(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>'"'+n+'": '+rn(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function $p(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=$p(t[i],e);return r+="]",r}else return rn(t,e)}function Fw(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function Tt(t,e,r){if(!(this instanceof Tt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Tt.prototype=new RangeError;Tt.prototype.constructor=RangeError;Tt.prototype.name="DimensionError";Tt.prototype.isDimensionError=!0;function ea(t,e,r){if(!(this instanceof ea))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}ea.prototype=new RangeError;ea.prototype.constructor=RangeError;ea.prototype.name="IndexError";ea.prototype.isIndexError=!0;function Ti(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function Gp(t,e,r){var n,i=t.length;if(i!==e[r])throw new Tt(i,e[r]);if(r<e.length-1){var a=r+1;for(n=0;n<i;n++){var o=t[n];if(!Array.isArray(o))throw new Tt(e.length-1,e.length,"<");Gp(t[n],e,a)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new Tt(e.length+1,e.length,">")}function O0(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new Tt(t.length,0)}else Gp(t,e,0)}function Qt(t,e){if(!Xt(t)||!Br(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new ea(t,e)}function M0(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!Xt(i)||!Br(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+rn(e)+")")});var n=r!==void 0?r:0;return bc(t,e,0,n),t}function bc(t,e,r,n){var i,a,o=t.length,s=e[r],l=Math.min(o,s);if(t.length=s,r<e.length-1){var p=r+1;for(i=0;i<l;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),bc(a,e,p,n);for(i=l;i<s;i++)a=[],t[i]=a,bc(a,e,p,n)}else{for(i=0;i<l;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=l;i<s;i++)t[i]=n}}function Sw(t,e){var r=Ow(t),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Tt(0,n,"!=");e=Wc(e,n);var i=Kp(e);if(n!==i)throw new Tt(i,n,"!=");try{return Bw(r,e)}catch(a){throw a instanceof Tt?new Tt(i,n,"!="):a}}function Wc(t,e){var r=Kp(t),n=t.slice(),i=-1,a=t.indexOf(i),o=t.indexOf(i,a+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var s=a>=0,l=e%r===0;if(s)if(l)n[a]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function Kp(t){return t.reduce((e,r)=>e*r,1)}function Bw(t,e){for(var r=t,n,i=e.length-1;i>0;i--){var a=e[i];n=[];for(var o=r.length/a,s=0;s<o;s++)n.push(r.slice(s*a,(s+1)*a));r=n}return r}function Yp(t,e,r,n){var i=n||Ti(t);if(r)for(var a=0;a<r;a++)t=[t],i.unshift(1);for(t=Zp(t,e,0);i.length<e;)i.push(1);return t}function Zp(t,e,r){var n,i;if(Array.isArray(t)){var a=r+1;for(n=0,i=t.length;n<i;n++)t[n]=Zp(t[n],e,a)}else for(var o=r;o<e;o++)t=[t];return t}function Ow(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function r(n){Array.isArray(n)?n.forEach(r):e.push(n)}),e}function Is(t,e){for(var r,n=0,i=0;i<t.length;i++){var a=t[i],o=Array.isArray(a);if(i===0&&o&&(n=a.length),o&&a.length!==n)return;var s=o?Is(a,e):e(a);if(r===void 0)r=s;else if(r!==s)return"mixed"}return r}function St(t,e,r,n){function i(a){var o=dw(a,e.map(kw));return Mw(t,e,a),r(o)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Mw(t,e,r){var n=e.filter(a=>!Pw(a)).every(a=>r[a]!==void 0);if(!n){var i=e.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function Pw(t){return t&&t[0]==="?"}function kw(t){return t&&t[0]==="?"?t.slice(1):t}function Tw(t,e){if(Qp(t)&&Jp(t,e))return t[e];throw typeof t[e]=="function"&&Nw(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Iw(t,e,r){if(Qp(t)&&Jp(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function xw(t,e){return e in t}function Jp(t,e){return!t||typeof t!="object"?!1:gu(Lw,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Nw(t,e){return t==null||typeof t[e]!="function"||gu(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:gu(Rw,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Qp(t){return typeof t=="object"&&t&&t.constructor===Object}var Lw={length:!0,name:!0},Rw={toString:!0,valueOf:!0,toLocaleString:!0};class Uw{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return Tw(this.wrappedObject,e)}set(e,r){return Iw(this.wrappedObject,e,r),this}has(e){return xw(this.wrappedObject,e)}}function Vw(t){return t?t instanceof Map||t instanceof Uw||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var Xp=function(){return Xp=S0.create,S0},jw=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],zw=St("typed",jw,function(e){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:a}=e,o=Xp();return o.clear(),o.addTypes([{name:"number",test:Xt},{name:"Complex",test:jp},{name:"BigNumber",test:Bn},{name:"Fraction",test:zp},{name:"Unit",test:qp},{name:"identifier",test:s=>Gn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(s)},{name:"string",test:Gn},{name:"Chain",test:cw},{name:"Array",test:Jt},{name:"Matrix",test:Zr},{name:"DenseMatrix",test:Ly},{name:"SparseMatrix",test:Ry},{name:"Range",test:Uy},{name:"Index",test:zc},{name:"boolean",test:Vy},{name:"ResultSet",test:jy},{name:"Help",test:zy},{name:"function",test:qy},{name:"Date",test:Wy},{name:"RegExp",test:Hy},{name:"null",test:Gy},{name:"undefined",test:qc},{name:"AccessorNode",test:Ky},{name:"ArrayNode",test:Yy},{name:"AssignmentNode",test:Zy},{name:"BlockNode",test:Jy},{name:"ConditionalNode",test:Qy},{name:"ConstantNode",test:Xy},{name:"FunctionNode",test:tw},{name:"FunctionAssignmentNode",test:ew},{name:"IndexNode",test:rw},{name:"Node",test:nw},{name:"ObjectNode",test:iw},{name:"OperatorNode",test:aw},{name:"ParenthesisNode",test:uw},{name:"RangeNode",test:sw},{name:"RelationalNode",test:ow},{name:"SymbolNode",test:lw},{name:"Map",test:Vw},{name:"Object",test:$y}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(r||Rl(l),Dw(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new r(l)}},{from:"number",to:"Complex",convert:function(l){return n||ms(l),new n(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return n||ms(l),new n(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return n||ms(l),new n(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){a||Ul(l);var p=new a(l);if(p.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return p}},{from:"string",to:"number",convert:function(l){var p=Number(l);if(isNaN(p))throw new Error('Cannot convert "'+l+'" to a number');return p}},{from:"string",to:"BigNumber",convert:function(l){r||Rl(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){a||Ul(l);try{return new a(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){n||ms(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return r||Rl(l),new r(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return a||Ul(l),new a(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||qw(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),o.onMismatch=(s,l,p)=>{var c=o.createError(s,l,p);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Ps(l[0])&&p.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(s,l,p)=>{var c=o.createError(s,l,p);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&Ps(l[0])&&p.some(d=>!d.params.includes(","))){var f=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw f.data=c.data,f}throw c},o});function Rl(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function ms(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function qw(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Ul(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Aa=9e15,Li=1e9,Dc="0123456789abcdef",xs="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Ns="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",yc={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Aa,maxE:Aa,crypto:!1},e1,hi,ft=!0,oo="[DecimalError] ",Ii=oo+"Invalid argument: ",t1=oo+"Precision limit exceeded",r1=oo+"crypto unavailable",n1="[object Decimal]",Hr=Math.floor,Dr=Math.pow,Ww=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Hw=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,$w=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,i1=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Rn=1e7,nt=7,Gw=9007199254740991,Kw=xs.length-1,wc=Ns.length-1,Ce={toStringTag:n1};Ce.absoluteValue=Ce.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Je(t)};Ce.ceil=function(){return Je(new this.constructor(this),this.e+1,2)};Ce.clampedTo=Ce.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Ii+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};Ce.comparedTo=Ce.cmp=function(t){var e,r,n,i,a=this,o=a.d,s=(t=new a.constructor(t)).d,l=a.s,p=t.s;if(!o||!s)return!l||!p?NaN:l!==p?l:o===s?0:!o^l<0?1:-1;if(!o[0]||!s[0])return o[0]?l:s[0]?-p:0;if(l!==p)return l;if(a.e!==t.e)return a.e>t.e^l<0?1:-1;for(n=o.length,i=s.length,e=0,r=n<i?n:i;e<r;++e)if(o[e]!==s[e])return o[e]>s[e]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1};Ce.cosine=Ce.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+nt,n.rounding=1,r=Yw(n,l1(n,r)),n.precision=t,n.rounding=e,Je(hi==2||hi==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};Ce.cubeRoot=Ce.cbrt=function(){var t,e,r,n,i,a,o,s,l,p,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(ft=!1,a=c.s*Dr(c.s*c,1/3),!a||Math.abs(a)==1/0?(r=Rr(c.d),t=c.e,(a=(t-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=Dr(r,1/3),t=Hr((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?r="5e"+t:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new f(r),n.s=c.s):n=new f(a.toString()),o=(t=f.precision)+3;;)if(s=n,l=s.times(s).times(s),p=l.plus(c),n=Ut(p.plus(c).times(s),p.plus(l),o+2,1),Rr(s.d).slice(0,o)===(r=Rr(n.d)).slice(0,o))if(r=r.slice(o-3,o+1),r=="9999"||!i&&r=="4999"){if(!i&&(Je(s,t+1,0),s.times(s).times(s).eq(c))){n=s;break}o+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Je(n,t+1,1),e=!n.times(n).times(n).eq(c));break}return ft=!0,Je(n,t,f.rounding,e)};Ce.decimalPlaces=Ce.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-Hr(this.e/nt))*nt,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};Ce.dividedBy=Ce.div=function(t){return Ut(this,new this.constructor(t))};Ce.dividedToIntegerBy=Ce.divToInt=function(t){var e=this,r=e.constructor;return Je(Ut(e,new r(t),0,1,1),r.precision,r.rounding)};Ce.equals=Ce.eq=function(t){return this.cmp(t)===0};Ce.floor=function(){return Je(new this.constructor(this),this.e+1,3)};Ce.greaterThan=Ce.gt=function(t){return this.cmp(t)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(t){var e=this.cmp(t);return e==1||e===0};Ce.hyperbolicCosine=Ce.cosh=function(){var t,e,r,n,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;r=o.precision,n=o.rounding,o.precision=r+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/co(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=Ba(o,1,a.times(e),new o(1),!0);for(var l,p=t,c=new o(8);p--;)l=a.times(a),a=s.minus(l.times(c.minus(l.times(c))));return Je(a,o.precision=r,o.rounding=n,!0)};Ce.hyperbolicSine=Ce.sinh=function(){var t,e,r,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,r=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=Ba(a,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/co(5,t)),i=Ba(a,2,i,i,!0);for(var o,s=new a(5),l=new a(16),p=new a(20);t--;)o=i.times(i),i=i.times(s.plus(o.times(l.times(o).plus(p))))}return a.precision=e,a.rounding=r,Je(i,e,r,!0)};Ce.hyperbolicTangent=Ce.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,Ut(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};Ce.inverseCosine=Ce.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),i=r.precision,a=r.rounding;return n!==-1?n===0?e.isNeg()?Nn(r,i,a):new r(0):new r(NaN):e.isZero()?Nn(r,i+4,a).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),t=Nn(r,i+4,a).times(.5),r.precision=i,r.rounding=a,t.minus(e))};Ce.inverseHyperbolicCosine=Ce.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,ft=!1,r=r.times(r).minus(1).sqrt().plus(r),ft=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};Ce.inverseHyperbolicSine=Ce.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,ft=!1,r=r.times(r).plus(1).sqrt().plus(r),ft=!0,n.precision=t,n.rounding=e,r.ln())};Ce.inverseHyperbolicTangent=Ce.atanh=function(){var t,e,r,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?Je(new a(i),t,e,!0):(a.precision=r=n-i.e,i=Ut(i.plus(1),new a(1).minus(i),r+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};Ce.inverseSine=Ce.asin=function(){var t,e,r,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),r=a.precision,n=a.rounding,e!==-1?e===0?(t=Nn(a,r+4,n).times(.5),t.s=i.s,t):new a(NaN):(a.precision=r+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,i.times(2)))};Ce.inverseTangent=Ce.atan=function(){var t,e,r,n,i,a,o,s,l,p=this,c=p.constructor,f=c.precision,d=c.rounding;if(p.isFinite()){if(p.isZero())return new c(p);if(p.abs().eq(1)&&f+4<=wc)return o=Nn(c,f+4,d).times(.25),o.s=p.s,o}else{if(!p.s)return new c(NaN);if(f+4<=wc)return o=Nn(c,f+4,d).times(.5),o.s=p.s,o}for(c.precision=s=f+10,c.rounding=1,r=Math.min(28,s/nt+2|0),t=r;t;--t)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(ft=!1,e=Math.ceil(s/nt),n=1,l=p.times(p),o=new c(p),i=p;t!==-1;)if(i=i.times(l),a=o.minus(i.div(n+=2)),i=i.times(l),o=a.plus(i.div(n+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return r&&(o=o.times(2<<r-1)),ft=!0,Je(o,c.precision=f,c.rounding=d,!0)};Ce.isFinite=function(){return!!this.d};Ce.isInteger=Ce.isInt=function(){return!!this.d&&Hr(this.e/nt)>this.d.length-2};Ce.isNaN=function(){return!this.s};Ce.isNegative=Ce.isNeg=function(){return this.s<0};Ce.isPositive=Ce.isPos=function(){return this.s>0};Ce.isZero=function(){return!!this.d&&this.d[0]===0};Ce.lessThan=Ce.lt=function(t){return this.cmp(t)<0};Ce.lessThanOrEqualTo=Ce.lte=function(t){return this.cmp(t)<1};Ce.logarithm=Ce.log=function(t){var e,r,n,i,a,o,s,l,p=this,c=p.constructor,f=c.precision,d=c.rounding,g=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(r=p.d,p.s<0||!r||!r[0]||p.eq(1))return new c(r&&!r[0]?-1/0:p.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)a=!0;else{for(i=r[0];i%10===0;)i/=10;a=i!==1}if(ft=!1,s=f+g,o=Oi(p,s),n=e?Ls(c,s+10):Oi(t,s),l=Ut(o,n,s,1),vu(l.d,i=f,d))do if(s+=10,o=Oi(p,s),n=e?Ls(c,s+10):Oi(t,s),l=Ut(o,n,s,1),!a){+Rr(l.d).slice(i+1,i+15)+1==1e14&&(l=Je(l,f+1,0));break}while(vu(l.d,i+=10,d));return ft=!0,Je(l,f,d)};Ce.minus=Ce.sub=function(t){var e,r,n,i,a,o,s,l,p,c,f,d,g=this,b=g.constructor;if(t=new b(t),!g.d||!t.d)return!g.s||!t.s?t=new b(NaN):g.d?t.s=-t.s:t=new b(t.d||g.s!==t.s?g:NaN),t;if(g.s!=t.s)return t.s=-t.s,g.plus(t);if(p=g.d,d=t.d,s=b.precision,l=b.rounding,!p[0]||!d[0]){if(d[0])t.s=-t.s;else if(p[0])t=new b(g);else return new b(l===3?-0:0);return ft?Je(t,s,l):t}if(r=Hr(t.e/nt),c=Hr(g.e/nt),p=p.slice(),a=c-r,a){for(f=a<0,f?(e=p,a=-a,o=d.length):(e=d,r=c,o=p.length),n=Math.max(Math.ceil(s/nt),o)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=p.length,o=d.length,f=n<o,f&&(o=n),n=0;n<o;n++)if(p[n]!=d[n]){f=p[n]<d[n];break}a=0}for(f&&(e=p,p=d,d=e,t.s=-t.s),o=p.length,n=d.length-o;n>0;--n)p[o++]=0;for(n=d.length;n>a;){if(p[--n]<d[n]){for(i=n;i&&p[--i]===0;)p[i]=Rn-1;--p[i],p[n]+=Rn}p[n]-=d[n]}for(;p[--o]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=lo(p,r),ft?Je(t,s,l):t):new b(l===3?-0:0)};Ce.modulo=Ce.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?Je(new n(r),n.precision,n.rounding):(ft=!1,n.modulo==9?(e=Ut(r,t.abs(),0,3,1),e.s*=t.s):e=Ut(r,t,0,n.modulo,1),e=e.times(t),ft=!0,r.minus(e))};Ce.naturalExponential=Ce.exp=function(){return Ec(this)};Ce.naturalLogarithm=Ce.ln=function(){return Oi(this)};Ce.negated=Ce.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Je(t)};Ce.plus=Ce.add=function(t){var e,r,n,i,a,o,s,l,p,c,f=this,d=f.constructor;if(t=new d(t),!f.d||!t.d)return!f.s||!t.s?t=new d(NaN):f.d||(t=new d(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(p=f.d,c=t.d,s=d.precision,l=d.rounding,!p[0]||!c[0])return c[0]||(t=new d(f)),ft?Je(t,s,l):t;if(a=Hr(f.e/nt),n=Hr(t.e/nt),p=p.slice(),i=a-n,i){for(i<0?(r=p,i=-i,o=c.length):(r=c,n=a,o=p.length),a=Math.ceil(s/nt),o=a>o?a+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=p.length,i=c.length,o-i<0&&(i=o,r=c,c=p,p=r),e=0;i;)e=(p[--i]=p[i]+c[i]+e)/Rn|0,p[i]%=Rn;for(e&&(p.unshift(e),++n),o=p.length;p[--o]==0;)p.pop();return t.d=p,t.e=lo(p,n),ft?Je(t,s,l):t};Ce.precision=Ce.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ii+t);return r.d?(e=a1(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};Ce.round=function(){var t=this,e=t.constructor;return Je(new e(t),t.e+1,e.rounding)};Ce.sine=Ce.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+nt,n.rounding=1,r=Jw(n,l1(n,r)),n.precision=t,n.rounding=e,Je(hi>2?r.neg():r,t,e,!0)):new n(NaN)};Ce.squareRoot=Ce.sqrt=function(){var t,e,r,n,i,a,o=this,s=o.d,l=o.e,p=o.s,c=o.constructor;if(p!==1||!s||!s[0])return new c(!p||p<0&&(!s||s[0])?NaN:s?o:1/0);for(ft=!1,p=Math.sqrt(+o),p==0||p==1/0?(e=Rr(s),(e.length+l)%2==0&&(e+="0"),p=Math.sqrt(e),l=Hr((l+1)/2)-(l<0||l%2),p==1/0?e="5e"+l:(e=p.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new c(e)):n=new c(p.toString()),r=(l=c.precision)+3;;)if(a=n,n=a.plus(Ut(o,a,r+2,1)).times(.5),Rr(a.d).slice(0,r)===(e=Rr(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(Je(a,l+1,0),a.times(a).eq(o))){n=a;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Je(n,l+1,1),t=!n.times(n).eq(o));break}return ft=!0,Je(n,l,c.rounding,t)};Ce.tangent=Ce.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=Ut(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,Je(hi==2||hi==4?r.neg():r,t,e,!0)):new n(NaN)};Ce.times=Ce.mul=function(t){var e,r,n,i,a,o,s,l,p,c=this,f=c.constructor,d=c.d,g=(t=new f(t)).d;if(t.s*=c.s,!d||!d[0]||!g||!g[0])return new f(!t.s||d&&!d[0]&&!g||g&&!g[0]&&!d?NaN:!d||!g?t.s/0:t.s*0);for(r=Hr(c.e/nt)+Hr(t.e/nt),l=d.length,p=g.length,l<p&&(a=d,d=g,g=a,o=l,l=p,p=o),a=[],o=l+p,n=o;n--;)a.push(0);for(n=p;--n>=0;){for(e=0,i=l+n;i>n;)s=a[i]+g[n]*d[i-n-1]+e,a[i--]=s%Rn|0,e=s/Rn|0;a[i]=(a[i]+e)%Rn|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=lo(a,r),ft?Je(t,f.precision,f.rounding):t};Ce.toBinary=function(t,e){return Hc(this,2,t,e)};Ce.toDecimalPlaces=Ce.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(un(t,0,Li),e===void 0?e=n.rounding:un(e,0,8),Je(r,t+r.e+1,e))};Ce.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Zn(n,!0):(un(t,0,Li),e===void 0?e=i.rounding:un(e,0,8),n=Je(new i(n),t+1,e),r=Zn(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};Ce.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?r=Zn(i):(un(t,0,Li),e===void 0?e=a.rounding:un(e,0,8),n=Je(new a(i),t+i.e+1,e),r=Zn(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};Ce.toFraction=function(t){var e,r,n,i,a,o,s,l,p,c,f,d,g=this,b=g.d,v=g.constructor;if(!b)return new v(g);if(p=r=new v(1),n=l=new v(0),e=new v(n),a=e.e=a1(b)-g.e-1,o=a%nt,e.d[0]=Dr(10,o<0?nt+o:o),t==null)t=a>0?e:p;else{if(s=new v(t),!s.isInt()||s.lt(p))throw Error(Ii+s);t=s.gt(e)?a>0?e:p:s}for(ft=!1,s=new v(Rr(b)),c=v.precision,v.precision=a=b.length*nt*2;f=Ut(s,e,0,1,1),i=r.plus(f.times(n)),i.cmp(t)!=1;)r=n,n=i,i=p,p=l.plus(f.times(i)),l=i,i=e,e=s.minus(f.times(i)),s=i;return i=Ut(t.minus(r),n,0,1,1),l=l.plus(i.times(p)),r=r.plus(i.times(n)),l.s=p.s=g.s,d=Ut(p,n,a,1).minus(g).abs().cmp(Ut(l,r,a,1).minus(g).abs())<1?[p,n]:[l,r],v.precision=c,ft=!0,d};Ce.toHexadecimal=Ce.toHex=function(t,e){return Hc(this,16,t,e)};Ce.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:un(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(ft=!1,r=Ut(r,t,0,e,1).times(t),ft=!0,Je(r)):(t.s=r.s,r=t),r};Ce.toNumber=function(){return+this};Ce.toOctal=function(t,e){return Hc(this,8,t,e)};Ce.toPower=Ce.pow=function(t){var e,r,n,i,a,o,s=this,l=s.constructor,p=+(t=new l(t));if(!s.d||!t.d||!s.d[0]||!t.d[0])return new l(Dr(+s,p));if(s=new l(s),s.eq(1))return s;if(n=l.precision,a=l.rounding,t.eq(1))return Je(s,n,a);if(e=Hr(t.e/nt),e>=t.d.length-1&&(r=p<0?-p:p)<=Gw)return i=u1(l,s,r,n),t.s<0?new l(1).div(i):Je(i,n,a);if(o=s.s,o<0){if(e<t.d.length-1)return new l(NaN);if(t.d[e]&1||(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return r=Dr(+s,p),e=r==0||!isFinite(r)?Hr(p*(Math.log("0."+Rr(s.d))/Math.LN10+s.e+1)):new l(r+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?o/0:0):(ft=!1,l.rounding=s.s=1,r=Math.min(12,(e+"").length),i=Ec(t.times(Oi(s,n+r)),n),i.d&&(i=Je(i,n+5,1),vu(i.d,n,a)&&(e=n+10,i=Je(Ec(t.times(Oi(s,e+r)),e),e+5,1),+Rr(i.d).slice(n+1,n+15)+1==1e14&&(i=Je(i,n+1,0)))),i.s=o,ft=!0,l.rounding=a,Je(i,n,a))};Ce.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Zn(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(un(t,1,Li),e===void 0?e=i.rounding:un(e,0,8),n=Je(new i(n),t,e),r=Zn(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};Ce.toSignificantDigits=Ce.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(un(t,1,Li),e===void 0?e=n.rounding:un(e,0,8)),Je(new n(r),t,e)};Ce.toString=function(){var t=this,e=t.constructor,r=Zn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};Ce.truncated=Ce.trunc=function(){return Je(new this.constructor(this),this.e+1,1)};Ce.valueOf=Ce.toJSON=function(){var t=this,e=t.constructor,r=Zn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function Rr(t){var e,r,n,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)n=t[e]+"",r=nt-n.length,r&&(a+=Si(r)),a+=n;o=t[e],n=o+"",r=nt-n.length,r&&(a+=Si(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function un(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Ii+t)}function vu(t,e,r,n){var i,a,o,s;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=nt,i=0):(i=Math.ceil((e+1)/nt),e%=nt),a=Dr(10,nt-e),s=t[i]%a|0,n==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=r<4&&s==99999||r>3&&s==49999||s==5e4||s==0):o=(r<4&&s+1==a||r>3&&s+1==a/2)&&(t[i+1]/a/100|0)==Dr(10,e-2)-1||(s==a/2||s==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(n||r<4)&&s==9999||!n&&r>3&&s==4999):o=((n||r<4)&&s+1==a||!n&&r>3&&s+1==a/2)&&(t[i+1]/a/1e3|0)==Dr(10,e-3)-1,o}function Cs(t,e,r){for(var n,i=[0],a,o=0,s=t.length;o<s;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=Dc.indexOf(t.charAt(o++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function Yw(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/co(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=Ba(t,1,e.times(i),new t(1));for(var a=r;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=r,e}var Ut=function(){function t(n,i,a){var o,s=0,l=n.length;for(n=n.slice();l--;)o=n[l]*i+s,n[l]=o%a|0,s=o/a|0;return s&&n.unshift(s),n}function e(n,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(n[s]!=i[s]){l=n[s]>i[s]?1:-1;break}return l}function r(n,i,a,o){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*o+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o,s,l){var p,c,f,d,g,b,v,m,D,B,w,C,F,k,O,A,x,U,K,J,j=n.constructor,V=n.s==i.s?1:-1,H=n.d,z=i.d;if(!H||!H[0]||!z||!z[0])return new j(!n.s||!i.s||(H?z&&H[0]==z[0]:!z)?NaN:H&&H[0]==0||!z?V*0:V/0);for(l?(g=1,c=n.e-i.e):(l=Rn,g=nt,c=Hr(n.e/g)-Hr(i.e/g)),K=z.length,x=H.length,D=new j(V),B=D.d=[],f=0;z[f]==(H[f]||0);f++);if(z[f]>(H[f]||0)&&c--,a==null?(k=a=j.precision,o=j.rounding):s?k=a+(n.e-i.e)+1:k=a,k<0)B.push(1),b=!0;else{if(k=k/g+2|0,f=0,K==1){for(d=0,z=z[0],k++;(f<x||d)&&k--;f++)O=d*l+(H[f]||0),B[f]=O/z|0,d=O%z|0;b=d||f<x}else{for(d=l/(z[0]+1)|0,d>1&&(z=t(z,d,l),H=t(H,d,l),K=z.length,x=H.length),A=K,w=H.slice(0,K),C=w.length;C<K;)w[C++]=0;J=z.slice(),J.unshift(0),U=z[0],z[1]>=l/2&&++U;do d=0,p=e(z,w,K,C),p<0?(F=w[0],K!=C&&(F=F*l+(w[1]||0)),d=F/U|0,d>1?(d>=l&&(d=l-1),v=t(z,d,l),m=v.length,C=w.length,p=e(v,w,m,C),p==1&&(d--,r(v,K<m?J:z,m,l))):(d==0&&(p=d=1),v=z.slice()),m=v.length,m<C&&v.unshift(0),r(w,v,C,l),p==-1&&(C=w.length,p=e(z,w,K,C),p<1&&(d++,r(w,K<C?J:z,C,l))),C=w.length):p===0&&(d++,w=[0]),B[f++]=d,p&&w[0]?w[C++]=H[A]||0:(w=[H[A]],C=1);while((A++<x||w[0]!==void 0)&&k--);b=w[0]!==void 0}B[0]||B.shift()}if(g==1)D.e=c,e1=b;else{for(f=1,d=B[0];d>=10;d/=10)f++;D.e=f+c*g-1,Je(D,s?a+D.e+1:a,o,b)}return D}}();function Je(t,e,r,n){var i,a,o,s,l,p,c,f,d,g=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(i=1,s=f[0];s>=10;s/=10)i++;if(a=e-i,a<0)a+=nt,o=e,c=f[d=0],l=c/Dr(10,i-o-1)%10|0;else if(d=Math.ceil((a+1)/nt),s=f.length,d>=s)if(n){for(;s++<=d;)f.push(0);c=l=0,i=1,a%=nt,o=a-nt+1}else break e;else{for(c=s=f[d],i=1;s>=10;s/=10)i++;a%=nt,o=a-nt+i,l=o<0?0:c/Dr(10,i-o-1)%10|0}if(n=n||e<0||f[d+1]!==void 0||(o<0?c:c%Dr(10,i-o-1)),p=r<4?(l||n)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||n||r==6&&(a>0?o>0?c/Dr(10,i-o):0:f[d-1])%10&1||r==(t.s<0?8:7)),e<1||!f[0])return f.length=0,p?(e-=t.e+1,f[0]=Dr(10,(nt-e%nt)%nt),t.e=-e||0):f[0]=t.e=0,t;if(a==0?(f.length=d,s=1,d--):(f.length=d+1,s=Dr(10,nt-a),f[d]=o>0?(c/Dr(10,i-o)%Dr(10,o)|0)*s:0),p)for(;;)if(d==0){for(a=1,o=f[0];o>=10;o/=10)a++;for(o=f[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(t.e++,f[0]==Rn&&(f[0]=1));break}else{if(f[d]+=s,f[d]!=Rn)break;f[d--]=0,s=1}for(a=f.length;f[--a]===0;)f.pop()}return ft&&(t.e>g.maxE?(t.d=null,t.e=NaN):t.e<g.minE&&(t.e=0,t.d=[0])),t}function Zn(t,e,r){if(!t.isFinite())return o1(t);var n,i=t.e,a=Rr(t.d),o=a.length;return e?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+Si(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+Si(-i-1)+a,r&&(n=r-o)>0&&(a+=Si(n))):i>=o?(a+=Si(i+1-o),r&&(n=r-i-1)>0&&(a=a+"."+Si(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(a+="."),a+=Si(n))),a}function lo(t,e){var r=t[0];for(e*=nt;r>=10;r/=10)e++;return e}function Ls(t,e,r){if(e>Kw)throw ft=!0,r&&(t.precision=r),Error(t1);return Je(new t(xs),e,1,!0)}function Nn(t,e,r){if(e>wc)throw Error(t1);return Je(new t(Ns),e,r,!0)}function a1(t){var e=t.length-1,r=e*nt+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function Si(t){for(var e="";t--;)e+="0";return e}function u1(t,e,r,n){var i,a=new t(1),o=Math.ceil(n/nt+4);for(ft=!1;;){if(r%2&&(a=a.times(e),k0(a.d,o)&&(i=!0)),r=Hr(r/2),r===0){r=a.d.length-1,i&&a.d[r]===0&&++a.d[r];break}e=e.times(e),k0(e.d,o)}return ft=!0,a}function P0(t){return t.d[t.d.length-1]&1}function s1(t,e,r){for(var n,i=new t(e[0]),a=0;++a<e.length;)if(n=new t(e[a]),n.s)i[r](n)&&(i=n);else{i=n;break}return i}function Ec(t,e){var r,n,i,a,o,s,l,p=0,c=0,f=0,d=t.constructor,g=d.rounding,b=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(ft=!1,l=b):l=e,s=new d(.03125);t.e>-2;)t=t.times(s),f+=5;for(n=Math.log(Dr(2,f))/Math.LN10*2+5|0,l+=n,r=a=o=new d(1),d.precision=l;;){if(a=Je(a.times(t),l,1),r=r.times(++c),s=o.plus(Ut(a,r,l,1)),Rr(s.d).slice(0,l)===Rr(o.d).slice(0,l)){for(i=f;i--;)o=Je(o.times(o),l,1);if(e==null)if(p<3&&vu(o.d,l-n,g,p))d.precision=l+=10,r=a=s=new d(1),c=0,p++;else return Je(o,d.precision=b,g,ft=!0);else return d.precision=b,o}o=s}}function Oi(t,e){var r,n,i,a,o,s,l,p,c,f,d,g=1,b=10,v=t,m=v.d,D=v.constructor,B=D.rounding,w=D.precision;if(v.s<0||!m||!m[0]||!v.e&&m[0]==1&&m.length==1)return new D(m&&!m[0]?-1/0:v.s!=1?NaN:m?0:v);if(e==null?(ft=!1,c=w):c=e,D.precision=c+=b,r=Rr(m),n=r.charAt(0),Math.abs(a=v.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(t),r=Rr(v.d),n=r.charAt(0),g++;a=v.e,n>1?(v=new D("0."+r),a++):v=new D(n+"."+r.slice(1))}else return p=Ls(D,c+2,w).times(a+""),v=Oi(new D(n+"."+r.slice(1)),c-b).plus(p),D.precision=w,e==null?Je(v,w,B,ft=!0):v;for(f=v,l=o=v=Ut(v.minus(1),v.plus(1),c,1),d=Je(v.times(v),c,1),i=3;;){if(o=Je(o.times(d),c,1),p=l.plus(Ut(o,new D(i),c,1)),Rr(p.d).slice(0,c)===Rr(l.d).slice(0,c))if(l=l.times(2),a!==0&&(l=l.plus(Ls(D,c+2,w).times(a+""))),l=Ut(l,new D(g),c,1),e==null)if(vu(l.d,c-b,B,s))D.precision=c+=b,p=o=v=Ut(f.minus(1),f.plus(1),c,1),d=Je(v.times(v),c,1),i=s=1;else return Je(l,D.precision=w,B,ft=!0);else return D.precision=w,l;l=p,i+=2}}function o1(t){return String(t.s*t.s/0)}function Ac(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%nt,r<0&&(n+=nt),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=nt;n<i;)t.d.push(+e.slice(n,n+=nt));e=e.slice(n),n=nt-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),ft&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Zw(t,e){var r,n,i,a,o,s,l,p,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),i1.test(e))return Ac(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(Hw.test(e))r=16,e=e.toLowerCase();else if(Ww.test(e))r=2;else if($w.test(e))r=8;else throw Error(Ii+e);for(a=e.search(/p/i),a>0?(l=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,n=t.constructor,o&&(e=e.replace(".",""),s=e.length,a=s-a,i=u1(n,new n(r),a,a*2)),p=Cs(e,r,Rn),c=p.length-1,a=c;p[a]===0;--a)p.pop();return a<0?new n(t.s*0):(t.e=lo(p,c),t.d=p,ft=!1,o&&(t=Ut(t,i,s*4)),l&&(t=t.times(Math.abs(l)<54?Dr(2,l):Oa.pow(2,l))),ft=!0,t)}function Jw(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:Ba(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/co(5,r)),e=Ba(t,2,e,e);for(var i,a=new t(5),o=new t(16),s=new t(20);r--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(s))));return e}function Ba(t,e,r,n,i){var a,o,s,l,p=t.precision,c=Math.ceil(p/nt);for(ft=!1,l=r.times(r),s=new t(n);;){if(o=Ut(s.times(l),new t(e++*e++),p,1),s=i?n.plus(o):n.minus(o),n=Ut(o.times(l),new t(e++*e++),p,1),o=s.plus(n),o.d[c]!==void 0){for(a=c;o.d[a]===s.d[a]&&a--;);if(a==-1)break}a=s,s=n,n=o,o=a}return ft=!0,o.d.length=c+1,o}function co(t,e){for(var r=t;--e;)r*=t;return r}function l1(t,e){var r,n=e.s<0,i=Nn(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return hi=n?4:1,e;if(r=e.divToInt(i),r.isZero())hi=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(a))return hi=P0(r)?n?2:3:n?4:1,e;hi=P0(r)?n?1:4:n?3:2}return e.minus(i).abs()}function Hc(t,e,r,n){var i,a,o,s,l,p,c,f,d,g=t.constructor,b=r!==void 0;if(b?(un(r,1,Li),n===void 0?n=g.rounding:un(n,0,8)):(r=g.precision,n=g.rounding),!t.isFinite())c=o1(t);else{for(c=Zn(t),o=c.indexOf("."),b?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,o>=0&&(c=c.replace(".",""),d=new g(1),d.e=c.length-o,d.d=Cs(Zn(d),10,i),d.e=d.d.length),f=Cs(c,10,i),a=l=f.length;f[--l]==0;)f.pop();if(!f[0])c=b?"0p+0":"0";else{if(o<0?a--:(t=new g(t),t.d=f,t.e=a,t=Ut(t,d,r,n,0,i),f=t.d,a=t.e,p=e1),o=f[r],s=i/2,p=p||f[r+1]!==void 0,p=n<4?(o!==void 0||p)&&(n===0||n===(t.s<0?3:2)):o>s||o===s&&(n===4||p||n===6&&f[r-1]&1||n===(t.s<0?8:7)),f.length=r,p)for(;++f[--r]>i-1;)f[r]=0,r||(++a,f.unshift(1));for(l=f.length;!f[l-1];--l);for(o=0,c="";o<l;o++)c+=Dc.charAt(f[o]);if(b){if(l>1)if(e==16||e==8){for(o=e==16?4:3,--l;l%o;l++)c+="0";for(f=Cs(c,i,e),l=f.length;!f[l-1];--l);for(o=1,c="1.";o<l;o++)c+=Dc.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>l)for(a-=l;a--;)c+="0";else a<l&&(c=c.slice(0,a)+"."+c.slice(a))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function k0(t,e){if(t.length>e)return t.length=e,!0}function Qw(t){return new this(t).abs()}function Xw(t){return new this(t).acos()}function eE(t){return new this(t).acosh()}function tE(t,e){return new this(t).plus(e)}function rE(t){return new this(t).asin()}function nE(t){return new this(t).asinh()}function iE(t){return new this(t).atan()}function aE(t){return new this(t).atanh()}function uE(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,a=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=Nn(this,a,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?Nn(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=Nn(this,a,1).times(.5),r.s=t.s):e.s<0?(this.precision=a,this.rounding=1,r=this.atan(Ut(t,e,a,1)),e=Nn(this,a,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(Ut(t,e,a,1)),r}function sE(t){return new this(t).cbrt()}function oE(t){return Je(t=new this(t),t.e+1,2)}function lE(t,e,r){return new this(t).clamp(e,r)}function cE(t){if(!t||typeof t!="object")throw Error(oo+"Object expected");var e,r,n,i=t.defaults===!0,a=["precision",1,Li,"rounding",0,8,"toExpNeg",-Aa,0,"toExpPos",0,Aa,"maxE",0,Aa,"minE",-Aa,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(r=a[e],i&&(this[r]=yc[r]),(n=t[r])!==void 0)if(Hr(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Ii+r+": "+n);if(r="crypto",i&&(this[r]=yc[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(r1);else this[r]=!1;else throw Error(Ii+r+": "+n);return this}function fE(t){return new this(t).cos()}function hE(t){return new this(t).cosh()}function c1(t){var e,r,n;function i(a){var o,s,l,p=this;if(!(p instanceof i))return new i(a);if(p.constructor=i,T0(a)){p.s=a.s,ft?!a.d||a.e>i.maxE?(p.e=NaN,p.d=null):a.e<i.minE?(p.e=0,p.d=[0]):(p.e=a.e,p.d=a.d.slice()):(p.e=a.e,p.d=a.d?a.d.slice():a.d);return}if(l=typeof a,l==="number"){if(a===0){p.s=1/a<0?-1:1,p.e=0,p.d=[0];return}if(a<0?(a=-a,p.s=-1):p.s=1,a===~~a&&a<1e7){for(o=0,s=a;s>=10;s/=10)o++;ft?o>i.maxE?(p.e=NaN,p.d=null):o<i.minE?(p.e=0,p.d=[0]):(p.e=o,p.d=[a]):(p.e=o,p.d=[a]);return}else if(a*0!==0){a||(p.s=NaN),p.e=NaN,p.d=null;return}return Ac(p,a.toString())}else if(l!=="string")throw Error(Ii+a);return(s=a.charCodeAt(0))===45?(a=a.slice(1),p.s=-1):(s===43&&(a=a.slice(1)),p.s=1),i1.test(a)?Ac(p,a):Zw(p,a)}if(i.prototype=Ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=cE,i.clone=c1,i.isDecimal=T0,i.abs=Qw,i.acos=Xw,i.acosh=eE,i.add=tE,i.asin=rE,i.asinh=nE,i.atan=iE,i.atanh=aE,i.atan2=uE,i.cbrt=sE,i.ceil=oE,i.clamp=lE,i.cos=fE,i.cosh=hE,i.div=dE,i.exp=pE,i.floor=gE,i.hypot=vE,i.ln=mE,i.log=_E,i.log10=DE,i.log2=bE,i.max=yE,i.min=wE,i.mod=EE,i.mul=AE,i.pow=CE,i.random=FE,i.round=SE,i.sign=BE,i.sin=OE,i.sinh=ME,i.sqrt=PE,i.sub=kE,i.sum=TE,i.tan=IE,i.tanh=xE,i.trunc=NE,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function dE(t,e){return new this(t).div(e)}function pE(t){return new this(t).exp()}function gE(t){return Je(t=new this(t),t.e+1,3)}function vE(){var t,e,r=new this(0);for(ft=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return ft=!0,new this(1/0);r=e}return ft=!0,r.sqrt()}function T0(t){return t instanceof Oa||t&&t.toStringTag===n1||!1}function mE(t){return new this(t).ln()}function _E(t,e){return new this(t).log(e)}function bE(t){return new this(t).log(2)}function DE(t){return new this(t).log(10)}function yE(){return s1(this,arguments,"lt")}function wE(){return s1(this,arguments,"gt")}function EE(t,e){return new this(t).mod(e)}function AE(t,e){return new this(t).mul(e)}function CE(t,e){return new this(t).pow(e)}function FE(t){var e,r,n,i,a=0,o=new this(1),s=[];if(t===void 0?t=this.precision:un(t,1,Li),n=Math.ceil(t/nt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(s.push(i%1e7),a+=4);a=n/4}else throw Error(r1);else for(;a<n;)s[a++]=Math.random()*1e7|0;for(n=s[--a],t%=nt,n&&t&&(i=Dr(10,nt-t),s[a]=(n/i|0)*i);s[a]===0;a--)s.pop();if(a<0)r=0,s=[0];else{for(r=-1;s[0]===0;r-=nt)s.shift();for(n=1,i=s[0];i>=10;i/=10)n++;n<nt&&(r-=nt-n)}return o.e=r,o.d=s,o}function SE(t){return Je(t=new this(t),t.e+1,this.rounding)}function BE(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function OE(t){return new this(t).sin()}function ME(t){return new this(t).sinh()}function PE(t){return new this(t).sqrt()}function kE(t,e){return new this(t).sub(e)}function TE(){var t=0,e=arguments,r=new this(e[t]);for(ft=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return ft=!0,Je(r,this.precision,this.rounding)}function IE(t){return new this(t).tan()}function xE(t){return new this(t).tanh()}function NE(t){return Je(t=new this(t),t.e+1,1)}Ce[Symbol.for("nodejs.util.inspect.custom")]=Ce.toString;Ce[Symbol.toStringTag]="Decimal";var Oa=Ce.constructor=c1(yc);xs=new Oa(xs);Ns=new Oa(Ns);var LE="BigNumber",RE=["?on","config"],UE=St(LE,RE,t=>{var{on:e,config:r}=t,n=Oa.clone({precision:r.precision,modulo:Oa.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&n.config({precision:i.precision})}),n},{isClass:!0}),vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $c(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cc={},VE={get exports(){return Cc},set exports(t){Cc=t}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=Math.cosh||function(f){return Math.abs(f)<1e-9?1-f:(Math.exp(f)+Math.exp(-f))*.5},i=Math.sinh||function(f){return Math.abs(f)<1e-9?f:(Math.exp(f)-Math.exp(-f))*.5},a=function(f){var d=Math.PI/4;if(-d>f||f>d)return Math.cos(f)-1;var g=f*f;return g*(g*(g*(g*(g*(g*(g*(g/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(f,d){var g=Math.abs(f),b=Math.abs(d);return g<3e3&&b<3e3?Math.sqrt(g*g+b*b):(g<b?(g=b,b=f/d):b=d/f,g*Math.sqrt(1+b*b))},s=function(){throw SyntaxError("Invalid Param")};function l(f,d){var g=Math.abs(f),b=Math.abs(d);return f===0?Math.log(b):d===0?Math.log(g):g<3e3&&b<3e3?Math.log(f*f+d*d)*.5:(f=f/2,d=d/2,.5*Math.log(f*f+d*d)+Math.LN2)}var p=function(f,d){var g={re:0,im:0};if(f==null)g.re=g.im=0;else if(d!==void 0)g.re=f,g.im=d;else switch(typeof f){case"object":if("im"in f&&"re"in f)g.re=f.re,g.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return c.INFINITY;g.re=f.abs*Math.cos(f.arg),g.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return c.INFINITY;g.re=f.r*Math.cos(f.phi),g.im=f.r*Math.sin(f.phi)}else f.length===2?(g.re=f[0],g.im=f[1]):s();break;case"string":g.im=g.re=0;var b=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,m=0;b===null&&s();for(var D=0;D<b.length;D++){var B=b[D];B===" "||B==="	"||B===`
`||(B==="+"?v++:B==="-"?m++:B==="i"||B==="I"?(v+m===0&&s(),b[D+1]!==" "&&!isNaN(b[D+1])?(g.im+=parseFloat((m%2?"-":"")+b[D+1]),D++):g.im+=parseFloat((m%2?"-":"")+"1"),v=m=0):((v+m===0||isNaN(B))&&s(),b[D+1]==="i"||b[D+1]==="I"?(g.im+=parseFloat((m%2?"-":"")+B),D++):g.re+=parseFloat((m%2?"-":"")+B),v=m=0))}v+m>0&&s();break;case"number":g.im=0,g.re=f;break;default:s()}return isNaN(g.re)||isNaN(g.im),g};function c(f,d){if(!(this instanceof c))return new c(f,d);var g=p(f,d);this.re=g.re,this.im=g.im}c.prototype={re:0,im:0,sign:function(){var f=this.abs();return new c(this.re/f,this.im/f)},add:function(f,d){var g=new c(f,d);return this.isInfinite()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:new c(this.re+g.re,this.im+g.im)},sub:function(f,d){var g=new c(f,d);return this.isInfinite()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:new c(this.re-g.re,this.im-g.im)},mul:function(f,d){var g=new c(f,d);return this.isInfinite()&&g.isZero()||this.isZero()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:g.im===0&&this.im===0?new c(this.re*g.re,0):new c(this.re*g.re-this.im*g.im,this.re*g.im+this.im*g.re)},div:function(f,d){var g=new c(f,d);if(this.isZero()&&g.isZero()||this.isInfinite()&&g.isInfinite())return c.NAN;if(this.isInfinite()||g.isZero())return c.INFINITY;if(this.isZero()||g.isInfinite())return c.ZERO;f=this.re,d=this.im;var b=g.re,v=g.im,m,D;return v===0?new c(f/b,d/b):Math.abs(b)<Math.abs(v)?(D=b/v,m=b*D+v,new c((f*D+d)/m,(d*D-f)/m)):(D=v/b,m=v*D+b,new c((f+d*D)/m,(d-f*D)/m))},pow:function(f,d){var g=new c(f,d);if(f=this.re,d=this.im,g.isZero())return c.ONE;if(g.im===0){if(d===0&&f>0)return new c(Math.pow(f,g.re),0);if(f===0)switch((g.re%4+4)%4){case 0:return new c(Math.pow(d,g.re),0);case 1:return new c(0,Math.pow(d,g.re));case 2:return new c(-Math.pow(d,g.re),0);case 3:return new c(0,-Math.pow(d,g.re))}}if(f===0&&d===0&&g.re>0&&g.im>=0)return c.ZERO;var b=Math.atan2(d,f),v=l(f,d);return f=Math.exp(g.re*v-g.im*b),d=g.im*v+g.re*b,new c(f*Math.cos(d),f*Math.sin(d))},sqrt:function(){var f=this.re,d=this.im,g=this.abs(),b,v;if(f>=0){if(d===0)return new c(Math.sqrt(f),0);b=.5*Math.sqrt(2*(g+f))}else b=Math.abs(d)/Math.sqrt(2*(g-f));return f<=0?v=.5*Math.sqrt(2*(g-f)):v=Math.abs(d)/Math.sqrt(2*(g+f)),new c(b,d<0?-v:v)},exp:function(){var f=Math.exp(this.re);return this.im,new c(f*Math.cos(this.im),f*Math.sin(this.im))},expm1:function(){var f=this.re,d=this.im;return new c(Math.expm1(f)*Math.cos(d)+a(d),Math.exp(f)*Math.sin(d))},log:function(){var f=this.re,d=this.im;return new c(l(f,d),Math.atan2(d,f))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var f=this.re,d=this.im;return new c(Math.sin(f)*n(d),Math.cos(f)*i(d))},cos:function(){var f=this.re,d=this.im;return new c(Math.cos(f)*n(d),-Math.sin(f)*i(d))},tan:function(){var f=2*this.re,d=2*this.im,g=Math.cos(f)+n(d);return new c(Math.sin(f)/g,i(d)/g)},cot:function(){var f=2*this.re,d=2*this.im,g=Math.cos(f)-n(d);return new c(-Math.sin(f)/g,i(d)/g)},sec:function(){var f=this.re,d=this.im,g=.5*n(2*d)+.5*Math.cos(2*f);return new c(Math.cos(f)*n(d)/g,Math.sin(f)*i(d)/g)},csc:function(){var f=this.re,d=this.im,g=.5*n(2*d)-.5*Math.cos(2*f);return new c(Math.sin(f)*n(d)/g,-Math.cos(f)*i(d)/g)},asin:function(){var f=this.re,d=this.im,g=new c(d*d-f*f+1,-2*f*d).sqrt(),b=new c(g.re-d,g.im+f).log();return new c(b.im,-b.re)},acos:function(){var f=this.re,d=this.im,g=new c(d*d-f*f+1,-2*f*d).sqrt(),b=new c(g.re-d,g.im+f).log();return new c(Math.PI/2-b.im,b.re)},atan:function(){var f=this.re,d=this.im;if(f===0){if(d===1)return new c(0,1/0);if(d===-1)return new c(0,-1/0)}var g=f*f+(1-d)*(1-d),b=new c((1-d*d-f*f)/g,-2*f/g).log();return new c(-.5*b.im,.5*b.re)},acot:function(){var f=this.re,d=this.im;if(d===0)return new c(Math.atan2(1,f),0);var g=f*f+d*d;return g!==0?new c(f/g,-d/g).atan():new c(f!==0?f/0:0,d!==0?-d/0:0).atan()},asec:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,1/0);var g=f*f+d*d;return g!==0?new c(f/g,-d/g).acos():new c(f!==0?f/0:0,d!==0?-d/0:0).acos()},acsc:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(Math.PI/2,1/0);var g=f*f+d*d;return g!==0?new c(f/g,-d/g).asin():new c(f!==0?f/0:0,d!==0?-d/0:0).asin()},sinh:function(){var f=this.re,d=this.im;return new c(i(f)*Math.cos(d),n(f)*Math.sin(d))},cosh:function(){var f=this.re,d=this.im;return new c(n(f)*Math.cos(d),i(f)*Math.sin(d))},tanh:function(){var f=2*this.re,d=2*this.im,g=n(f)+Math.cos(d);return new c(i(f)/g,Math.sin(d)/g)},coth:function(){var f=2*this.re,d=2*this.im,g=n(f)-Math.cos(d);return new c(i(f)/g,-Math.sin(d)/g)},csch:function(){var f=this.re,d=this.im,g=Math.cos(2*d)-n(2*f);return new c(-2*i(f)*Math.cos(d)/g,2*n(f)*Math.sin(d)/g)},sech:function(){var f=this.re,d=this.im,g=Math.cos(2*d)+n(2*f);return new c(2*n(f)*Math.cos(d)/g,-2*i(f)*Math.sin(d)/g)},asinh:function(){var f=this.im;this.im=-this.re,this.re=f;var d=this.asin();return this.re=-this.im,this.im=f,f=d.re,d.re=-d.im,d.im=f,d},acosh:function(){var f=this.acos();if(f.im<=0){var d=f.re;f.re=-f.im,f.im=d}else{var d=f.im;f.im=-f.re,f.re=d}return f},atanh:function(){var f=this.re,d=this.im,g=f>1&&d===0,b=1-f,v=1+f,m=b*b+d*d,D=m!==0?new c((v*b-d*d)/m,(d*b+v*d)/m):new c(f!==-1?f/0:0,d!==0?d/0:0),B=D.re;return D.re=l(D.re,D.im)/2,D.im=Math.atan2(D.im,B)/2,g&&(D.im=-D.im),D},acoth:function(){var f=this.re,d=this.im;if(f===0&&d===0)return new c(0,Math.PI/2);var g=f*f+d*d;return g!==0?new c(f/g,-d/g).atanh():new c(f!==0?f/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var f=this.re,d=this.im;if(d===0)return new c(f!==0?Math.log(f+Math.sqrt(f*f+1)):1/0,0);var g=f*f+d*d;return g!==0?new c(f/g,-d/g).asinh():new c(f!==0?f/0:0,d!==0?-d/0:0).asinh()},asech:function(){var f=this.re,d=this.im;if(this.isZero())return c.INFINITY;var g=f*f+d*d;return g!==0?new c(f/g,-d/g).acosh():new c(f!==0?f/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var f=this.re,d=this.im,g=f*f+d*d;return new c(f/g,-d/g)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(f){return f=Math.pow(10,f||0),new c(Math.ceil(this.re*f)/f,Math.ceil(this.im*f)/f)},floor:function(f){return f=Math.pow(10,f||0),new c(Math.floor(this.re*f)/f,Math.floor(this.im*f)/f)},round:function(f){return f=Math.pow(10,f||0),new c(Math.round(this.re*f)/f,Math.round(this.im*f)/f)},equals:function(f,d){var g=new c(f,d);return Math.abs(g.re-this.re)<=c.EPSILON&&Math.abs(g.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var f=this.re,d=this.im,g="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(f)<c.EPSILON&&(f=0),Math.abs(d)<c.EPSILON&&(d=0),d===0?g+f:(f!==0?(g+=f,g+=" ",d<0?(d=-d,g+="-"):g+="+",g+=" "):d<0&&(d=-d,g+="-"),d!==1&&(g+=d),g+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,t.exports=c})()})(VE);const kr=$c(Cc);var jE="Complex",zE=[],qE=St(jE,zE,()=>(Object.defineProperty(kr,"name",{value:"Complex"}),kr.prototype.constructor=kr,kr.prototype.type="Complex",kr.prototype.isComplex=!0,kr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},kr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},kr.prototype.format=function(t){var e="",r=this.im,n=this.re,i=_c(this.re,t),a=_c(this.im,t),o=Xt(t)?t:t?t.precision:null;if(o!==null){var s=Math.pow(10,-o);Math.abs(n/r)<s&&(n=0),Math.abs(r/n)<s&&(r=0)}return r===0?e=i:n===0?r===1?e="i":r===-1?e="-i":e=a+"i":r<0?r===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+a+"i",e},kr.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return kr(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(Xt(r)){if(qp(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),Xt(n))return new kr({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},kr.prototype.valueOf=kr.prototype.toString,kr.fromJSON=function(t){return new kr(t)},kr.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},kr),{isClass:!0}),Fc={},WE={get exports(){return Fc},set exports(t){Fc=t}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=2e3,i={s:1,n:0,d:1};function a(b,v){if(isNaN(b=parseInt(b,10)))throw g.InvalidParameter;return b*v}function o(b,v){if(v===0)throw g.DivisionByZero;var m=Object.create(g.prototype);m.s=b<0?-1:1,b=b<0?-b:b;var D=d(b,v);return m.n=b/D,m.d=v/D,m}function s(b){for(var v={},m=b,D=2,B=4;B<=m;){for(;m%D===0;)m/=D,v[D]=(v[D]||0)+1;B+=1+2*D++}return m!==b?m>1&&(v[m]=(v[m]||0)+1):v[b]=(v[b]||0)+1,v}var l=function(b,v){var m=0,D=1,B=1,w=0,C=0,F=0,k=1,O=1,A=0,x=1,U=1,K=1,J=1e7,j;if(b!=null)if(v!==void 0){if(m=b,D=v,B=m*D,m%1!==0||D%1!==0)throw g.NonIntegerParameter}else switch(typeof b){case"object":{if("d"in b&&"n"in b)m=b.n,D=b.d,"s"in b&&(m*=b.s);else if(0 in b)m=b[0],1 in b&&(D=b[1]);else throw g.InvalidParameter;B=m*D;break}case"number":{if(b<0&&(B=b,b=-b),b%1===0)m=b;else if(b>0){for(b>=1&&(O=Math.pow(10,Math.floor(1+Math.log(b)/Math.LN10)),b/=O);x<=J&&K<=J;)if(j=(A+U)/(x+K),b===j){x+K<=J?(m=A+U,D=x+K):K>x?(m=U,D=K):(m=A,D=x);break}else b>j?(A+=U,x+=K):(U+=A,K+=x),x>J?(m=U,D=K):(m=A,D=x);m*=O}else(isNaN(b)||isNaN(v))&&(D=m=NaN);break}case"string":{if(x=b.match(/\d+|./g),x===null)throw g.InvalidParameter;if(x[A]==="-"?(B=-1,A++):x[A]==="+"&&A++,x.length===A+1?C=a(x[A++],B):x[A+1]==="."||x[A]==="."?(x[A]!=="."&&(w=a(x[A++],B)),A++,(A+1===x.length||x[A+1]==="("&&x[A+3]===")"||x[A+1]==="'"&&x[A+3]==="'")&&(C=a(x[A],B),k=Math.pow(10,x[A].length),A++),(x[A]==="("&&x[A+2]===")"||x[A]==="'"&&x[A+2]==="'")&&(F=a(x[A+1],B),O=Math.pow(10,x[A+1].length)-1,A+=3)):x[A+1]==="/"||x[A+1]===":"?(C=a(x[A],B),k=a(x[A+2],1),A+=3):x[A+3]==="/"&&x[A+1]===" "&&(w=a(x[A],B),C=a(x[A+2],B),k=a(x[A+4],1),A+=5),x.length<=A){D=k*O,B=m=F+D*w+O*C;break}}default:throw g.InvalidParameter}if(D===0)throw g.DivisionByZero;i.s=B<0?-1:1,i.n=Math.abs(m),i.d=Math.abs(D)};function p(b,v,m){for(var D=1;v>0;b=b*b%m,v>>=1)v&1&&(D=D*b%m);return D}function c(b,v){for(;v%2===0;v/=2);for(;v%5===0;v/=5);if(v===1)return 0;for(var m=10%v,D=1;m!==1;D++)if(m=m*10%v,D>n)return 0;return D}function f(b,v,m){for(var D=1,B=p(10,m,v),w=0;w<300;w++){if(D===B)return w;D=D*10%v,B=B*10%v}return 0}function d(b,v){if(!b)return v;if(!v)return b;for(;;){if(b%=v,!b)return v;if(v%=b,!v)return b}}function g(b,v){if(l(b,v),this instanceof g)b=d(i.d,i.n),this.s=i.s,this.n=i.n/b,this.d=i.d/b;else return o(i.s*i.n,i.d)}g.DivisionByZero=new Error("Division by Zero"),g.InvalidParameter=new Error("Invalid argument"),g.NonIntegerParameter=new Error("Parameters must be integer"),g.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(b,v){return l(b,v),o(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(b,v){return l(b,v),o(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(b,v){return l(b,v),o(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(b,v){return l(b,v),o(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(b,v){if(isNaN(this.n)||isNaN(this.d))return new g(NaN);if(b===void 0)return o(this.s*this.n%this.d,1);if(l(b,v),i.n===0&&this.d===0)throw g.DivisionByZero;return o(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(b,v){return l(b,v),o(d(i.n,this.n)*d(i.d,this.d),i.d*this.d)},lcm:function(b,v){return l(b,v),i.n===0&&this.n===0?o(0,1):o(i.n*this.n,d(i.n,this.n)*d(i.d,this.d))},ceil:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.ceil(b*this.s*this.n/this.d),b)},floor:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.floor(b*this.s*this.n/this.d),b)},round:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.round(b*this.s*this.n/this.d),b)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(b,v){if(l(b,v),i.d===1)return i.s<0?o(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):o(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var m=s(this.n),D=s(this.d),B=1,w=1;for(var C in m)if(C!=="1"){if(C==="0"){B=0;break}if(m[C]*=i.n,m[C]%i.d===0)m[C]/=i.d;else return null;B*=Math.pow(C,m[C])}for(var C in D)if(C!=="1"){if(D[C]*=i.n,D[C]%i.d===0)D[C]/=i.d;else return null;w*=Math.pow(C,D[C])}return i.s<0?o(w,B):o(B,w)},equals:function(b,v){return l(b,v),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(b,v){l(b,v);var m=this.s*this.n*i.d-i.s*i.n*this.d;return(0<m)-(m<0)},simplify:function(b){if(isNaN(this.n)||isNaN(this.d))return this;b=b||.001;for(var v=this.abs(),m=v.toContinued(),D=1;D<m.length;D++){for(var B=o(m[D-1],1),w=D-2;w>=0;w--)B=B.inverse().add(m[w]);if(B.sub(v).abs().valueOf()<b)return B.mul(this.s)}return this},divisible:function(b,v){return l(b,v),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(b){var v,m="",D=this.n,B=this.d;return this.s<0&&(m+="-"),B===1?m+=D:(b&&(v=Math.floor(D/B))>0&&(m+=v,m+=" ",D%=B),m+=D,m+="/",m+=B),m},toLatex:function(b){var v,m="",D=this.n,B=this.d;return this.s<0&&(m+="-"),B===1?m+=D:(b&&(v=Math.floor(D/B))>0&&(m+=v,D%=B),m+="\\frac{",m+=D,m+="}{",m+=B,m+="}"),m},toContinued:function(){var b,v=this.n,m=this.d,D=[];if(isNaN(v)||isNaN(m))return D;do D.push(Math.floor(v/m)),b=v%m,v=m,m=b;while(v!==1);return D},toString:function(b){var v=this.n,m=this.d;if(isNaN(v)||isNaN(m))return"NaN";b=b||15;var D=c(v,m),B=f(v,m,D),w=this.s<0?"-":"";if(w+=v/m|0,v%=m,v*=10,v&&(w+="."),D){for(var C=B;C--;)w+=v/m|0,v%=m,v*=10;w+="(";for(var C=D;C--;)w+=v/m|0,v%=m,v*=10;w+=")"}else for(var C=b;v&&C--;)w+=v/m|0,v%=m,v*=10;return w}},Object.defineProperty(g,"__esModule",{value:!0}),g.default=g,g.Fraction=g,t.exports=g})()})(WE);const fi=$c(Fc);var HE="Fraction",$E=[],GE=St(HE,$E,()=>(Object.defineProperty(fi,"name",{value:"Fraction"}),fi.prototype.constructor=fi,fi.prototype.type="Fraction",fi.prototype.isFraction=!0,fi.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},fi.fromJSON=function(t){return new fi(t)},fi),{isClass:!0}),KE="Matrix",YE=[],ZE=St(KE,YE,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function f1(t){return Object.keys(t.signatures||{}).reduce(function(e,r){var n=(r.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var JE="DenseMatrix",QE=["Matrix"],XE=St(JE,QE,t=>{var{Matrix:e}=t;function r(c,f){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!Gn(f))throw new Error("Invalid datatype: "+f);if(Zr(c))c.type==="DenseMatrix"?(this._data=Sr(c._data),this._size=Sr(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&Jt(c.data)&&Jt(c.size))this._data=c.data,this._size=c.size,O0(this._data,this._size),this._datatype=f||c.datatype;else if(Jt(c))this._data=p(c),this._size=Ti(this._data),O0(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+du(c)+")");this._data=[],this._size=[0],this._datatype=f}}r.prototype=new e,r.prototype.createDenseMatrix=function(c,f){return new r(c,f)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return Is(this._data,du)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(c,f){return new r(c,f)},r.prototype.subset=function(c,f,d){switch(arguments.length){case 1:return n(this,c);case 2:case 3:return a(this,c,f,d);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(c){if(!Jt(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new Tt(c.length,this._size.length);for(var f=0;f<c.length;f++)Qt(c[f],this._size[f]);for(var d=this._data,g=0,b=c.length;g<b;g++){var v=c[g];Qt(v,d.length),d=d[v]}return d},r.prototype.set=function(c,f,d){if(!Jt(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new Tt(c.length,this._size.length,"<");var g,b,v,m=c.map(function(B){return B+1});l(this,m,d);var D=this._data;for(g=0,b=c.length-1;g<b;g++)v=c[g],Qt(v,D.length),D=D[v];return v=c[c.length-1],Qt(v,D.length),D[v]=f,this};function n(c,f){if(!zc(f))throw new TypeError("Invalid index");var d=f.isScalar();if(d)return c.get(f.min());var g=f.size();if(g.length!==c._size.length)throw new Tt(g.length,c._size.length);for(var b=f.min(),v=f.max(),m=0,D=c._size.length;m<D;m++)Qt(b[m],c._size[m]),Qt(v[m],c._size[m]);return new r(i(c._data,f,g.length,0),c._datatype)}function i(c,f,d,g){var b=g===d-1,v=f.dimension(g);return b?v.map(function(m){return Qt(m,c.length),c[m]}).valueOf():v.map(function(m){Qt(m,c.length);var D=c[m];return i(D,f,d,g+1)}).valueOf()}function a(c,f,d,g){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var b=f.size(),v=f.isScalar(),m;if(Zr(d)?(m=d.size(),d=d.valueOf()):m=Ti(d),v){if(m.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),d,g)}else{if(b.length<c._size.length)throw new Tt(b.length,c._size.length,"<");if(m.length<b.length){for(var D=0,B=0;b[D]===1&&m[D]===1;)D++;for(;b[D]===1;)B++,D++;d=Yp(d,b.length,B,m)}if(!ks(b,m))throw new Tt(b,m,">");var w=f.max().map(function(k){return k+1});l(c,w,g);var C=b.length,F=0;o(c._data,f,d,C,F)}return c}function o(c,f,d,g,b){var v=b===g-1,m=f.dimension(b);v?m.forEach(function(D,B){Qt(D),c[D]=d[B[0]]}):m.forEach(function(D,B){Qt(D),o(c[D],f,d[B[0]],g,b+1)})}r.prototype.resize=function(c,f,d){if(!Ps(c))throw new TypeError("Array or Matrix expected");var g=c.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),b=d?this.clone():this;return s(b,g,f)};function s(c,f,d){if(f.length===0){for(var g=c._data;Jt(g);)g=g[0];return g}return c._size=f.slice(0),c._data=M0(c._data,c._size,d),c}r.prototype.reshape=function(c,f){var d=f?this.clone():this;d._data=Sw(d._data,c);var g=d._size.reduce((b,v)=>b*v);return d._size=Wc(c,g),d};function l(c,f,d){for(var g=c._size.slice(0),b=!1;g.length<f.length;)g.push(0),b=!0;for(var v=0,m=f.length;v<m;v++)f[v]>g[v]&&(g[v]=f[v],b=!0);b&&s(c,g,d)}r.prototype.clone=function(){var c=new r({data:Sr(this._data),size:Sr(this._size),datatype:this._datatype});return c},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(c){var f=this,d=f1(c),g=function m(D,B){return Jt(D)?D.map(function(w,C){return m(w,B.concat(C))}):d===1?c(D):d===2?c(D,B):c(D,B,f)},b=g(this._data,[]),v=this._datatype!==void 0?Is(b,du):void 0;return new r(b,v)},r.prototype.forEach=function(c){var f=this,d=function g(b,v){Jt(b)?b.forEach(function(m,D){g(m,v.concat(D))}):c(b,v,f)};d(this._data,[])},r.prototype[Symbol.iterator]=function*(){var c=function*f(d,g){if(Jt(d))for(var b=0;b<d.length;b++)yield*f(d[b],g.concat(b));else yield{value:d,index:g}};yield*c(this._data,[])},r.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var g of d)c.push(new r([g],this._datatype));return c},r.prototype.columns=function(){var c=this,f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var g=this._data,b=function(D){var B=g.map(w=>[w[D]]);f.push(new r(B,c._datatype))},v=0;v<d[1];v++)b(v);return f},r.prototype.toArray=function(){return Sr(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(c){return rn(this._data,c)},r.prototype.toString=function(){return rn(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(c){if(c){if(Bn(c)&&(c=c.toNumber()),!Xt(c)||!Br(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,d=c<0?-c:0,g=this._size[0],b=this._size[1],v=Math.min(g-d,b-f),m=[],D=0;D<v;D++)m[D]=this._data[D+d][D+f];return new r({data:m,size:[v],datatype:this._datatype})},r.diagonal=function(c,f,d,g){if(!Jt(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(O){if(Bn(O)&&(O=O.toNumber()),!Xt(O)||!Br(O)||O<1)throw new Error("Size values must be positive integers");return O}),d){if(Bn(d)&&(d=d.toNumber()),!Xt(d)||!Br(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var b=d>0?d:0,v=d<0?-d:0,m=c[0],D=c[1],B=Math.min(m-v,D-b),w;if(Jt(f)){if(f.length!==B)throw new Error("Invalid value array length");w=function(A){return f[A]}}else if(Zr(f)){var C=f.size();if(C.length!==1||C[0]!==B)throw new Error("Invalid matrix length");w=function(A){return f.get([A])}}else w=function(){return f};g||(g=Bn(w(0))?w(0).mul(0):0);var F=[];if(c.length>0){F=M0(F,c,g);for(var k=0;k<B;k++)F[k+v][k+b]=w(k)}return new r({data:F,size:[m,D]})},r.fromJSON=function(c){return new r(c)},r.prototype.swapRows=function(c,f){if(!Xt(c)||!Br(c)||!Xt(f)||!Br(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Qt(c,this._size[0]),Qt(f,this._size[0]),r._swapRows(c,f,this._data),this},r._swapRows=function(c,f,d){var g=d[c];d[c]=d[f],d[f]=g};function p(c){for(var f=0,d=c.length;f<d;f++){var g=c[f];Jt(g)?c[f]=p(g):g&&g.isMatrix===!0&&(c[f]=p(g.valueOf()))}return c}return r},{isClass:!0});function fo(t,e,r){return t&&typeof t.map=="function"?t.map(function(n){return fo(n,e)}):e(t)}var I0="isInteger",eA=["typed"],tA=St(I0,eA,t=>{var{typed:e}=t;return e(I0,{number:Br,BigNumber:function(n){return n.isInt()},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":e.referToSelf(r=>n=>fo(n,r))})}),rA="number",h1="number, number";function d1(t,e){return t+e}d1.signature=h1;function p1(t,e){return t*e}p1.signature=h1;function g1(t){return-t}g1.signature=rA;function nA(t,e,r){if(r==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return n.lte(i.times(r))}return!1}function iA(t,e,r){return Ts(t.re,e.re,r)&&Ts(t.im,e.im,r)}var aA=St("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),Rs="equalScalar",uA=["typed","config"],sA=St(Rs,uA,t=>{var{typed:e,config:r}=t,n=aA({typed:e});return e(Rs,{"boolean, boolean":function(a,o){return a===o},"number, number":function(a,o){return Ts(a,o,r.epsilon)},"BigNumber, BigNumber":function(a,o){return a.eq(o)||nA(a,o,r.epsilon)},"Fraction, Fraction":function(a,o){return a.equals(o)},"Complex, Complex":function(a,o){return iA(a,o,r.epsilon)}},n)});St(Rs,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Rs,{"number, number":function(i,a){return Ts(i,a,r.epsilon)}})});var oA="SparseMatrix",lA=["typed","equalScalar","Matrix"],cA=St(oA,lA,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(v,m){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!Gn(m))throw new Error("Invalid datatype: "+m);if(Zr(v))a(this,v,m);else if(v&&Jt(v.index)&&Jt(v.ptr)&&Jt(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=m||v.datatype;else if(Jt(v))o(this,v,m);else{if(v)throw new TypeError("Unsupported type of data ("+du(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function a(v,m,D){m.type==="SparseMatrix"?(v._values=m._values?Sr(m._values):void 0,v._index=Sr(m._index),v._ptr=Sr(m._ptr),v._size=Sr(m._size),v._datatype=D||m._datatype):o(v,m.valueOf(),D||m._datatype)}function o(v,m,D){v._values=[],v._index=[],v._ptr=[],v._datatype=D;var B=m.length,w=0,C=r,F=0;if(Gn(D)&&(C=e.find(r,[D,D])||r,F=e.convert(0,D)),B>0){var k=0;do{v._ptr.push(v._index.length);for(var O=0;O<B;O++){var A=m[O];if(Jt(A)){if(k===0&&w<A.length&&(w=A.length),k<A.length){var x=A[k];C(x,F)||(v._values.push(x),v._index.push(O))}}else k===0&&w<1&&(w=1),C(A,F)||(v._values.push(A),v._index.push(O))}k++}while(k<w)}v._ptr.push(v._index.length),v._size=[B,w]}i.prototype=new n,i.prototype.createSparseMatrix=function(v,m){return new i(v,m)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Is(this._values,du)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(v,m){return new i(v,m)},i.prototype.density=function(){var v=this._size[0],m=this._size[1];return v!==0&&m!==0?this._index.length/(v*m):0},i.prototype.subset=function(v,m,D){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,v);case 2:case 3:return l(this,v,m,D);default:throw new SyntaxError("Wrong number of arguments")}};function s(v,m){if(!zc(m))throw new TypeError("Invalid index");var D=m.isScalar();if(D)return v.get(m.min());var B=m.size();if(B.length!==v._size.length)throw new Tt(B.length,v._size.length);var w,C,F,k,O=m.min(),A=m.max();for(w=0,C=v._size.length;w<C;w++)Qt(O[w],v._size[w]),Qt(A[w],v._size[w]);var x=v._values,U=v._index,K=v._ptr,J=m.dimension(0),j=m.dimension(1),V=[],H=[];J.forEach(function(te,le){H[te]=le[0],V[te]=!0});var z=x?[]:void 0,Q=[],X=[];return j.forEach(function(te){for(X.push(Q.length),F=K[te],k=K[te+1];F<k;F++)w=U[F],V[w]===!0&&(Q.push(H[w]),z&&z.push(x[F]))}),X.push(Q.length),new i({values:z,index:Q,ptr:X,size:B,datatype:v._datatype})}function l(v,m,D,B){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var w=m.size(),C=m.isScalar(),F;if(Zr(D)?(F=D.size(),D=D.toArray()):F=Ti(D),C){if(F.length!==0)throw new TypeError("Scalar expected");v.set(m.min(),D,B)}else{if(w.length!==1&&w.length!==2)throw new Tt(w.length,v._size.length,"<");if(F.length<w.length){for(var k=0,O=0;w[k]===1&&F[k]===1;)k++;for(;w[k]===1;)O++,k++;D=Yp(D,w.length,O,F)}if(!ks(w,F))throw new Tt(w,F,">");if(w.length===1){var A=m.dimension(0);A.forEach(function(K,J){Qt(K),v.set([K,0],D[J[0]],B)})}else{var x=m.dimension(0),U=m.dimension(1);x.forEach(function(K,J){Qt(K),U.forEach(function(j,V){Qt(j),v.set([K,j],D[J[0]][V[0]],B)})})}}return v}i.prototype.get=function(v){if(!Jt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Tt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=v[0],D=v[1];Qt(m,this._size[0]),Qt(D,this._size[1]);var B=p(m,this._ptr[D],this._ptr[D+1],this._index);return B<this._ptr[D+1]&&this._index[B]===m?this._values[B]:0},i.prototype.set=function(v,m,D){if(!Jt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Tt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var B=v[0],w=v[1],C=this._size[0],F=this._size[1],k=r,O=0;Gn(this._datatype)&&(k=e.find(r,[this._datatype,this._datatype])||r,O=e.convert(0,this._datatype)),(B>C-1||w>F-1)&&(d(this,Math.max(B+1,C),Math.max(w+1,F),D),C=this._size[0],F=this._size[1]),Qt(B,C),Qt(w,F);var A=p(B,this._ptr[w],this._ptr[w+1],this._index);return A<this._ptr[w+1]&&this._index[A]===B?k(m,O)?c(A,w,this._values,this._index,this._ptr):this._values[A]=m:k(m,O)||f(A,B,w,m,this._values,this._index,this._ptr),this};function p(v,m,D,B){if(D-m===0)return D;for(var w=m;w<D;w++)if(B[w]===v)return w;return m}function c(v,m,D,B,w){D.splice(v,1),B.splice(v,1);for(var C=m+1;C<w.length;C++)w[C]--}function f(v,m,D,B,w,C,F){w.splice(v,0,B),C.splice(v,0,m);for(var k=D+1;k<F.length;k++)F[k]++}i.prototype.resize=function(v,m,D){if(!Ps(v))throw new TypeError("Array or Matrix expected");var B=v.valueOf().map(C=>Array.isArray(C)&&C.length===1?C[0]:C);if(B.length!==2)throw new Error("Only two dimensions matrix are supported");B.forEach(function(C){if(!Xt(C)||!Br(C)||C<0)throw new TypeError("Invalid size, must contain positive integers (size: "+rn(B)+")")});var w=D?this.clone():this;return d(w,B[0],B[1],m)};function d(v,m,D,B){var w=B||0,C=r,F=0;Gn(v._datatype)&&(C=e.find(r,[v._datatype,v._datatype])||r,F=e.convert(0,v._datatype),w=e.convert(w,v._datatype));var k=!C(w,F),O=v._size[0],A=v._size[1],x,U,K;if(D>A){for(U=A;U<D;U++)if(v._ptr[U]=v._values.length,k)for(x=0;x<O;x++)v._values.push(w),v._index.push(x);v._ptr[D]=v._values.length}else D<A&&(v._ptr.splice(D+1,A-D),v._values.splice(v._ptr[D],v._values.length),v._index.splice(v._ptr[D],v._index.length));if(A=D,m>O){if(k){var J=0;for(U=0;U<A;U++){v._ptr[U]=v._ptr[U]+J,K=v._ptr[U+1]+J;var j=0;for(x=O;x<m;x++,j++)v._values.splice(K+j,0,w),v._index.splice(K+j,0,x),J++}v._ptr[A]=v._values.length}}else if(m<O){var V=0;for(U=0;U<A;U++){v._ptr[U]=v._ptr[U]-V;var H=v._ptr[U],z=v._ptr[U+1]-V;for(K=H;K<z;K++)x=v._index[K],x>m-1&&(v._values.splice(K,1),v._index.splice(K,1),V++)}v._ptr[U]=v._values.length}return v._size[0]=m,v._size[1]=D,v}i.prototype.reshape=function(v,m){if(!Jt(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(te){if(!Xt(te)||!Br(te)||te<=-2||te===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+rn(v)+")")});var D=this._size[0]*this._size[1];v=Wc(v,D);var B=v[0]*v[1];if(D!==B)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=m?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return w;for(var C=[],F=0;F<w._ptr.length;F++)for(var k=0;k<w._ptr[F+1]-w._ptr[F];k++)C.push(F);for(var O=w._values.slice(),A=w._index.slice(),x=0;x<w._index.length;x++){var U=A[x],K=C[x],J=U*w._size[1]+K;C[x]=J%v[1],A[x]=Math.floor(J/v[1])}w._values.length=0,w._index.length=0,w._ptr.length=v[1]+1,w._size=v.slice();for(var j=0;j<w._ptr.length;j++)w._ptr[j]=0;for(var V=0;V<O.length;V++){var H=A[V],z=C[V],Q=O[V],X=p(H,w._ptr[z],w._ptr[z+1],w._index);f(X,H,z,Q,w._values,w._index,w._ptr)}return w},i.prototype.clone=function(){var v=new i({values:this._values?Sr(this._values):void 0,index:Sr(this._index),ptr:Sr(this._ptr),size:Sr(this._size),datatype:this._datatype});return v},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(v,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var D=this,B=this._size[0],w=this._size[1],C=f1(v),F=function(O,A,x){return C===1?v(O):C===2?v(O,[A,x]):v(O,[A,x],D)};return g(this,0,B-1,0,w-1,F,m)};function g(v,m,D,B,w,C,F){var k=[],O=[],A=[],x=r,U=0;Gn(v._datatype)&&(x=e.find(r,[v._datatype,v._datatype])||r,U=e.convert(0,v._datatype));for(var K=function(Oe,Pe,Te){Oe=C(Oe,Pe,Te),x(Oe,U)||(k.push(Oe),O.push(Pe))},J=B;J<=w;J++){A.push(k.length);var j=v._ptr[J],V=v._ptr[J+1];if(F)for(var H=j;H<V;H++){var z=v._index[H];z>=m&&z<=D&&K(v._values[H],z-m,J-B)}else{for(var Q={},X=j;X<V;X++){var te=v._index[X];Q[te]=v._values[X]}for(var le=m;le<=D;le++){var be=le in Q?Q[le]:0;K(be,le-m,J-B)}}}return A.push(k.length),new i({values:k,index:O,ptr:A,size:[D-m+1,w-B+1]})}i.prototype.forEach=function(v,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var D=this,B=this._size[0],w=this._size[1],C=0;C<w;C++){var F=this._ptr[C],k=this._ptr[C+1];if(m)for(var O=F;O<k;O++){var A=this._index[O];v(this._values[O],[A,C],D)}else{for(var x={},U=F;U<k;U++){var K=this._index[U];x[K]=this._values[U]}for(var J=0;J<B;J++){var j=J in x?x[J]:0;v(j,[J,C],D)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],m=0;m<v;m++)for(var D=this._ptr[m],B=this._ptr[m+1],w=D;w<B;w++){var C=this._index[w];yield{value:this._values[w],index:[C,m]}}},i.prototype.toArray=function(){return b(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return b(this._values,this._index,this._ptr,this._size,!1)};function b(v,m,D,B,w){var C=B[0],F=B[1],k=[],O,A;for(O=0;O<C;O++)for(k[O]=[],A=0;A<F;A++)k[O][A]=0;for(A=0;A<F;A++)for(var x=D[A],U=D[A+1],K=x;K<U;K++)O=m[K],k[O][A]=v?w?Sr(v[K]):v[K]:1;return k}return i.prototype.format=function(v){for(var m=this._size[0],D=this._size[1],B=this.density(),w="Sparse Matrix ["+rn(m,v)+" x "+rn(D,v)+"] density: "+rn(B,v)+`
`,C=0;C<D;C++)for(var F=this._ptr[C],k=this._ptr[C+1],O=F;O<k;O++){var A=this._index[O];w+=`
    (`+rn(A,v)+", "+rn(C,v)+") ==> "+(this._values?rn(this._values[O],v):"X")}return w},i.prototype.toString=function(){return rn(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(v){if(v){if(Bn(v)&&(v=v.toNumber()),!Xt(v)||!Br(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var m=v>0?v:0,D=v<0?-v:0,B=this._size[0],w=this._size[1],C=Math.min(B-D,w-m),F=[],k=[],O=[];O[0]=0;for(var A=m;A<w&&F.length<C;A++)for(var x=this._ptr[A],U=this._ptr[A+1],K=x;K<U;K++){var J=this._index[K];if(J===A-m+D){F.push(this._values[K]),k[F.length-1]=J-D;break}}return O.push(F.length),new i({values:F,index:k,ptr:O,size:[C,1]})},i.fromJSON=function(v){return new i(v)},i.diagonal=function(v,m,D,B,w){if(!Jt(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(te){if(Bn(te)&&(te=te.toNumber()),!Xt(te)||!Br(te)||te<1)throw new Error("Size values must be positive integers");return te}),D){if(Bn(D)&&(D=D.toNumber()),!Xt(D)||!Br(D))throw new TypeError("The parameter k must be an integer number")}else D=0;var C=r,F=0;Gn(w)&&(C=e.find(r,[w,w])||r,F=e.convert(0,w));var k=D>0?D:0,O=D<0?-D:0,A=v[0],x=v[1],U=Math.min(A-O,x-k),K;if(Jt(m)){if(m.length!==U)throw new Error("Invalid value array length");K=function(le){return m[le]}}else if(Zr(m)){var J=m.size();if(J.length!==1||J[0]!==U)throw new Error("Invalid matrix length");K=function(le){return m.get([le])}}else K=function(){return m};for(var j=[],V=[],H=[],z=0;z<x;z++){H.push(j.length);var Q=z-k;if(Q>=0&&Q<U){var X=K(Q);C(X,F)||(V.push(Q+O),j.push(X))}}return H.push(j.length),new i({values:j,index:V,ptr:H,size:[A,x]})},i.prototype.swapRows=function(v,m){if(!Xt(v)||!Br(v)||!Xt(m)||!Br(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Qt(v,this._size[0]),Qt(m,this._size[0]),i._swapRows(v,m,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(v,m,D,B,w){for(var C=B[v],F=B[v+1],k=C;k<F;k++)w(D[k],m[k])},i._swapRows=function(v,m,D,B,w,C){for(var F=0;F<D;F++){var k=C[F],O=C[F+1],A=p(v,k,O,w),x=p(m,k,O,w);if(A<O&&x<O&&w[A]===v&&w[x]===m){if(B){var U=B[A];B[A]=B[x],B[x]=U}continue}if(A<O&&w[A]===v&&(x>=O||w[x]!==m)){var K=B?B[A]:void 0;w.splice(x,0,m),B&&B.splice(x,0,K),w.splice(x<=A?A+1:A,1),B&&B.splice(x<=A?A+1:A,1);continue}if(x<O&&w[x]===m&&(A>=O||w[A]!==v)){var J=B?B[x]:void 0;w.splice(A,0,v),B&&B.splice(A,0,J),w.splice(A<=x?x+1:x,1),B&&B.splice(A<=x?x+1:x,1)}}},i},{isClass:!0}),x0="matrix",fA=["typed","Matrix","DenseMatrix","SparseMatrix"],hA=St(x0,fA,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(x0,{"":function(){return a([])},string:function(s){return a([],s)},"string, string":function(s,l){return a([],s,l)},Array:function(s){return a(s)},Matrix:function(s){return a(s,s.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(o,s,l){if(s==="dense"||s==="default"||s===void 0)return new n(o,l);if(s==="sparse")return new i(o,l);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),N0="unaryMinus",dA=["typed"],pA=St(N0,dA,t=>{var{typed:e}=t;return e(N0,{number:g1,"Complex | BigNumber | Fraction":r=>r.neg(),Unit:e.referToSelf(r=>n=>{var i=n.clone();return i.value=e.find(r,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(r=>n=>fo(n,r))})}),L0="addScalar",gA=["typed"],vA=St(L0,gA,t=>{var{typed:e}=t;return e(L0,{"number, number":d1,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),mA="matAlgo11xS0s",_A=["typed","equalScalar"],bA=St(mA,_A,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o,s){var l=i._values,p=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=f[0],b=f[1],v,m=r,D=0,B=o;typeof d=="string"&&(v=d,m=e.find(r,[v,v]),D=e.convert(0,v),a=e.convert(a,v),B=e.find(o,[v,v]));for(var w=[],C=[],F=[],k=0;k<b;k++){F[k]=C.length;for(var O=c[k],A=c[k+1],x=O;x<A;x++){var U=p[x],K=s?B(a,l[x]):B(l[x],a);m(K,D)||(C.push(U),w.push(K))}}return F[b]=C.length,i.createSparseMatrix({values:w,index:C,ptr:F,size:[g,b],datatype:v})}}),DA="matAlgo12xSfs",yA=["typed","DenseMatrix"],wA=St(DA,yA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,o,s){var l=i._values,p=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=f[0],b=f[1],v,m=o;typeof d=="string"&&(v=d,a=e.convert(a,v),m=e.find(o,[v,v]));for(var D=[],B=[],w=[],C=0;C<b;C++){for(var F=C+1,k=c[C],O=c[C+1],A=k;A<O;A++){var x=p[A];B[x]=l[A],w[x]=F}for(var U=0;U<g;U++)C===0&&(D[U]=[]),w[U]===F?D[U][C]=s?m(a,B[U]):m(B[U],a):D[U][C]=s?m(a,0):m(0,a)}return new r({data:D,size:[g,b],datatype:v})}}),EA="matAlgo14xDs",AA=["typed"],v1=St(EA,AA,t=>{var{typed:e}=t;return function(i,a,o,s){var l=i._data,p=i._size,c=i._datatype,f,d=o;typeof c=="string"&&(f=c,a=e.convert(a,f),d=e.find(o,[f,f]));var g=p.length>0?r(d,0,p,p[0],l,a,s):[];return i.createDenseMatrix({data:g,size:Sr(p),datatype:f})};function r(n,i,a,o,s,l,p){var c=[];if(i===a.length-1)for(var f=0;f<o;f++)c[f]=p?n(l,s[f]):n(s[f],l);else for(var d=0;d<o;d++)c[d]=r(n,i+1,a,a[i+1],s[d],l,p);return c}}),CA="matAlgo01xDSid",FA=["typed"],m1=St(CA,FA,t=>{var{typed:e}=t;return function(n,i,a,o){var s=n._data,l=n._size,p=n._datatype,c=i._values,f=i._index,d=i._ptr,g=i._size,b=i._datatype;if(l.length!==g.length)throw new Tt(l.length,g.length);if(l[0]!==g[0]||l[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+g+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],m=l[1],D=typeof p=="string"&&p===b?p:void 0,B=D?e.find(a,[D,D]):a,w,C,F=[];for(w=0;w<v;w++)F[w]=[];var k=[],O=[];for(C=0;C<m;C++){for(var A=C+1,x=d[C],U=d[C+1],K=x;K<U;K++)w=f[K],k[w]=o?B(c[K],s[w][C]):B(s[w][C],c[K]),O[w]=A;for(w=0;w<v;w++)O[w]===A?F[w][C]=k[w]:F[w][C]=s[w][C]}return n.createDenseMatrix({data:F,size:[v,m],datatype:D})}}),SA="matAlgo04xSidSid",BA=["typed","equalScalar"],OA=St(SA,BA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,l=i._index,p=i._ptr,c=i._size,f=i._datatype,d=a._values,g=a._index,b=a._ptr,v=a._size,m=a._datatype;if(c.length!==v.length)throw new Tt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var D=c[0],B=c[1],w,C=r,F=0,k=o;typeof f=="string"&&f===m&&(w=f,C=e.find(r,[w,w]),F=e.convert(0,w),k=e.find(o,[w,w]));var O=s&&d?[]:void 0,A=[],x=[],U=s&&d?[]:void 0,K=s&&d?[]:void 0,J=[],j=[],V,H,z,Q,X;for(H=0;H<B;H++){x[H]=A.length;var te=H+1;for(Q=p[H],X=p[H+1],z=Q;z<X;z++)V=l[z],A.push(V),J[V]=te,U&&(U[V]=s[z]);for(Q=b[H],X=b[H+1],z=Q;z<X;z++)if(V=g[z],J[V]===te){if(U){var le=k(U[V],d[z]);C(le,F)?J[V]=null:U[V]=le}}else A.push(V),j[V]=te,K&&(K[V]=d[z]);if(U&&K)for(z=x[H];z<A.length;)V=A[z],J[V]===te?(O[z]=U[V],z++):j[V]===te?(O[z]=K[V],z++):A.splice(z,1)}return x[B]=A.length,i.createSparseMatrix({values:O,index:A,ptr:x,size:[D,B],datatype:w})}}),MA="matAlgo10xSids",PA=["typed","DenseMatrix"],_1=St(MA,PA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,o,s){var l=i._values,p=i._index,c=i._ptr,f=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=f[0],b=f[1],v,m=o;typeof d=="string"&&(v=d,a=e.convert(a,v),m=e.find(o,[v,v]));for(var D=[],B=[],w=[],C=0;C<b;C++){for(var F=C+1,k=c[C],O=c[C+1],A=k;A<O;A++){var x=p[A];B[x]=l[A],w[x]=F}for(var U=0;U<g;U++)C===0&&(D[U]=[]),w[U]===F?D[U][C]=s?m(a,B[U]):m(B[U],a):D[U][C]=a}return new r({data:D,size:[g,b],datatype:v})}}),kA="matAlgo13xDD",TA=["typed"],IA=St(kA,TA,t=>{var{typed:e}=t;return function(i,a,o){var s=i._data,l=i._size,p=i._datatype,c=a._data,f=a._size,d=a._datatype,g=[];if(l.length!==f.length)throw new Tt(l.length,f.length);for(var b=0;b<l.length;b++){if(l[b]!==f[b])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");g[b]=l[b]}var v,m=o;typeof p=="string"&&p===d&&(v=p,m=e.find(o,[v,v]));var D=g.length>0?r(m,0,g,g[0],s,c):[];return i.createDenseMatrix({data:D,size:g,datatype:v})};function r(n,i,a,o,s,l){var p=[];if(i===a.length-1)for(var c=0;c<o;c++)p[c]=n(s[c],l[c]);else for(var f=0;f<o;f++)p[f]=r(n,i+1,a,a[i+1],s[f],l[f]);return p}}),xA="broadcast",NA=["concat"],LA=St(xA,NA,t=>{var{concat:e}=t;return function(a,o){var s=Math.max(a._size.length,o._size.length);if(a._size.length===o._size.length&&a._size.every((m,D)=>m===o._size[D]))return[a,o];for(var l=r(a._size,s,0),p=r(o._size,s,0),c=[],f=0;f<s;f++)c[f]=Math.max(l[f],p[f]);for(var d=0;d<s;d++)i(l,c,d),i(p,c,d);var g=a.clone(),b=o.clone();g._size.length<s?g.reshape(r(g._size,s,1)):b._size.length<s&&b.reshape(r(b._size,s,1));for(var v=0;v<s;v++)g._size[v]<c[v]&&(g=n(g,c[v],v)),b._size[v]<c[v]&&(b=n(b,c[v],v));return[g,b]};function r(a,o,s){return[...Array(o-a.length).fill(s),...a]}function n(a,o,s){return e(...Array(o).fill(a),s)}function i(a,o,s){if(a[s]<o[s]&a[s]>1)throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(a,") not possible to broadcast dimension ").concat(s," with size ").concat(a[s]," to size ").concat(o[s]))}}),RA="matrixAlgorithmSuite",UA=["typed","matrix","concat"],b1=St(RA,UA,t=>{var{typed:e,matrix:r,concat:n}=t,i=IA({typed:e}),a=v1({typed:e}),o=LA({concat:n});return function(l){var p=l.elop,c=l.SD||l.DS,f;p?(f={"DenseMatrix, DenseMatrix":(v,m)=>i(...o(v,m),p),"Array, Array":(v,m)=>i(...o(r(v),r(m)),p).valueOf(),"Array, DenseMatrix":(v,m)=>i(...o(r(v),m),p),"DenseMatrix, Array":(v,m)=>i(...o(v,r(m)),p)},l.SS&&(f["SparseMatrix, SparseMatrix"]=(v,m)=>l.SS(...o(v,m),p,!1)),l.DS&&(f["DenseMatrix, SparseMatrix"]=(v,m)=>l.DS(...o(v,m),p,!1),f["Array, SparseMatrix"]=(v,m)=>l.DS(...o(r(v),m),p,!1)),c&&(f["SparseMatrix, DenseMatrix"]=(v,m)=>c(...o(m,v),p,!0),f["SparseMatrix, Array"]=(v,m)=>c(...o(r(m),v),p,!0))):(f={"DenseMatrix, DenseMatrix":e.referToSelf(v=>(m,D)=>i(...o(m,D),v)),"Array, Array":e.referToSelf(v=>(m,D)=>i(...o(r(m),r(D)),v).valueOf()),"Array, DenseMatrix":e.referToSelf(v=>(m,D)=>i(...o(r(m),D),v)),"DenseMatrix, Array":e.referToSelf(v=>(m,D)=>i(...o(m,r(D)),v))},l.SS&&(f["SparseMatrix, SparseMatrix"]=e.referToSelf(v=>(m,D)=>l.SS(...o(m,D),v,!1))),l.DS&&(f["DenseMatrix, SparseMatrix"]=e.referToSelf(v=>(m,D)=>l.DS(...o(m,D),v,!1)),f["Array, SparseMatrix"]=e.referToSelf(v=>(m,D)=>l.DS(...o(r(m),D),v,!1))),c&&(f["SparseMatrix, DenseMatrix"]=e.referToSelf(v=>(m,D)=>c(...o(D,m),v,!0)),f["SparseMatrix, Array"]=e.referToSelf(v=>(m,D)=>c(...o(r(D),m),v,!0))));var d=l.scalar||"any",g=l.Ds||l.Ss;g&&(p?(f["DenseMatrix,"+d]=(v,m)=>a(v,m,p,!1),f[d+", DenseMatrix"]=(v,m)=>a(m,v,p,!0),f["Array,"+d]=(v,m)=>a(r(v),m,p,!1).valueOf(),f[d+", Array"]=(v,m)=>a(r(m),v,p,!0).valueOf()):(f["DenseMatrix,"+d]=e.referToSelf(v=>(m,D)=>a(m,D,v,!1)),f[d+", DenseMatrix"]=e.referToSelf(v=>(m,D)=>a(D,m,v,!0)),f["Array,"+d]=e.referToSelf(v=>(m,D)=>a(r(m),D,v,!1).valueOf()),f[d+", Array"]=e.referToSelf(v=>(m,D)=>a(r(D),m,v,!0).valueOf())));var b=l.sS!==void 0?l.sS:l.Ss;return p?(l.Ss&&(f["SparseMatrix,"+d]=(v,m)=>l.Ss(v,m,p,!1)),b&&(f[d+", SparseMatrix"]=(v,m)=>b(m,v,p,!0))):(l.Ss&&(f["SparseMatrix,"+d]=e.referToSelf(v=>(m,D)=>l.Ss(m,D,v,!1))),b&&(f[d+", SparseMatrix"]=e.referToSelf(v=>(m,D)=>b(D,m,v,!0)))),p&&p.signatures&&hw(f,p.signatures),f}}),VA="matAlgo03xDSf",jA=["typed"],zA=St(VA,jA,t=>{var{typed:e}=t;return function(n,i,a,o){var s=n._data,l=n._size,p=n._datatype,c=i._values,f=i._index,d=i._ptr,g=i._size,b=i._datatype;if(l.length!==g.length)throw new Tt(l.length,g.length);if(l[0]!==g[0]||l[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+g+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],m=l[1],D,B=0,w=a;typeof p=="string"&&p===b&&(D=p,B=e.convert(0,D),w=e.find(a,[D,D]));for(var C=[],F=0;F<v;F++)C[F]=[];for(var k=[],O=[],A=0;A<m;A++){for(var x=A+1,U=d[A],K=d[A+1],J=U;J<K;J++){var j=f[J];k[j]=o?w(c[J],s[j][A]):w(s[j][A],c[J]),O[j]=x}for(var V=0;V<v;V++)O[V]===x?C[V][A]=k[V]:C[V][A]=o?w(B,s[V][A]):w(s[V][A],B)}return n.createDenseMatrix({data:C,size:[v,m],datatype:D})}}),qA="matAlgo05xSfSf",WA=["typed","equalScalar"],HA=St(qA,WA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,l=i._index,p=i._ptr,c=i._size,f=i._datatype,d=a._values,g=a._index,b=a._ptr,v=a._size,m=a._datatype;if(c.length!==v.length)throw new Tt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var D=c[0],B=c[1],w,C=r,F=0,k=o;typeof f=="string"&&f===m&&(w=f,C=e.find(r,[w,w]),F=e.convert(0,w),k=e.find(o,[w,w]));var O=s&&d?[]:void 0,A=[],x=[],U=O?[]:void 0,K=O?[]:void 0,J=[],j=[],V,H,z,Q;for(H=0;H<B;H++){x[H]=A.length;var X=H+1;for(z=p[H],Q=p[H+1];z<Q;z++)V=l[z],A.push(V),J[V]=X,U&&(U[V]=s[z]);for(z=b[H],Q=b[H+1];z<Q;z++)V=g[z],J[V]!==X&&A.push(V),j[V]=X,K&&(K[V]=d[z]);if(O)for(z=x[H];z<A.length;){V=A[z];var te=J[V],le=j[V];if(te===X||le===X){var be=te===X?U[V]:F,we=le===X?K[V]:F,Oe=k(be,we);C(Oe,F)?A.splice(z,1):(O.push(Oe),z++)}}}return x[B]=A.length,i.createSparseMatrix({values:O,index:A,ptr:x,size:[D,B],datatype:w})}}),$A="multiplyScalar",GA=["typed"],KA=St($A,GA,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":p1,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),R0="multiply",YA=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],ZA=St(R0,YA,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:a,dot:o}=t,s=bA({typed:e,equalScalar:a}),l=v1({typed:e});function p(F,k){switch(F.length){case 1:switch(k.length){case 1:if(F[0]!==k[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(F[0]!==k[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+F[0]+") must match Matrix rows ("+k[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+k.length+" dimensions)")}break;case 2:switch(k.length){case 1:if(F[1]!==k[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+F[1]+") must match Vector length ("+k[0]+")");break;case 2:if(F[1]!==k[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+F[1]+") must match Matrix B rows ("+k[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+k.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+F.length+" dimensions)")}}function c(F,k,O){if(O===0)throw new Error("Cannot multiply two empty vectors");return o(F,k)}function f(F,k){if(k.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(F,k)}function d(F,k){var O=F._data,A=F._size,x=F._datatype,U=k._data,K=k._size,J=k._datatype,j=A[0],V=K[1],H,z=n,Q=i;x&&J&&x===J&&typeof x=="string"&&(H=x,z=e.find(n,[H,H]),Q=e.find(i,[H,H]));for(var X=[],te=0;te<V;te++){for(var le=Q(O[0],U[0][te]),be=1;be<j;be++)le=z(le,Q(O[be],U[be][te]));X[te]=le}return F.createDenseMatrix({data:X,size:[V],datatype:H})}var g=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":B}),b=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":D,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":C});function v(F,k){var O=F._data,A=F._size,x=F._datatype,U=k._data,K=k._datatype,J=A[0],j=A[1],V,H=n,z=i;x&&K&&x===K&&typeof x=="string"&&(V=x,H=e.find(n,[V,V]),z=e.find(i,[V,V]));for(var Q=[],X=0;X<J;X++){for(var te=O[X],le=z(te[0],U[0]),be=1;be<j;be++)le=H(le,z(te[be],U[be]));Q[X]=le}return F.createDenseMatrix({data:Q,size:[J],datatype:V})}function m(F,k){var O=F._data,A=F._size,x=F._datatype,U=k._data,K=k._size,J=k._datatype,j=A[0],V=A[1],H=K[1],z,Q=n,X=i;x&&J&&x===J&&typeof x=="string"&&(z=x,Q=e.find(n,[z,z]),X=e.find(i,[z,z]));for(var te=[],le=0;le<j;le++){var be=O[le];te[le]=[];for(var we=0;we<H;we++){for(var Oe=X(be[0],U[0][we]),Pe=1;Pe<V;Pe++)Oe=Q(Oe,X(be[Pe],U[Pe][we]));te[le][we]=Oe}}return F.createDenseMatrix({data:te,size:[j,H],datatype:z})}function D(F,k){var O=F._data,A=F._size,x=F._datatype,U=k._values,K=k._index,J=k._ptr,j=k._size,V=k._datatype;if(!U)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var H=A[0],z=j[1],Q,X=n,te=i,le=a,be=0;x&&V&&x===V&&typeof x=="string"&&(Q=x,X=e.find(n,[Q,Q]),te=e.find(i,[Q,Q]),le=e.find(a,[Q,Q]),be=e.convert(0,Q));for(var we=[],Oe=[],Pe=[],Te=k.createSparseMatrix({values:we,index:Oe,ptr:Pe,size:[H,z],datatype:Q}),Re=0;Re<z;Re++){Pe[Re]=Oe.length;var Ue=J[Re],We=J[Re+1];if(We>Ue)for(var Ye=0,xe=0;xe<H;xe++){for(var Dt=xe+1,Et=void 0,ht=Ue;ht<We;ht++){var lt=K[ht];Ye!==Dt?(Et=te(O[xe][lt],U[ht]),Ye=Dt):Et=X(Et,te(O[xe][lt],U[ht]))}Ye===Dt&&!le(Et,be)&&(Oe.push(xe),we.push(Et))}}return Pe[z]=Oe.length,Te}function B(F,k){var O=F._values,A=F._index,x=F._ptr,U=F._datatype;if(!O)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var K=k._data,J=k._datatype,j=F._size[0],V=k._size[0],H=[],z=[],Q=[],X,te=n,le=i,be=a,we=0;U&&J&&U===J&&typeof U=="string"&&(X=U,te=e.find(n,[X,X]),le=e.find(i,[X,X]),be=e.find(a,[X,X]),we=e.convert(0,X));var Oe=[],Pe=[];Q[0]=0;for(var Te=0;Te<V;Te++){var Re=K[Te];if(!be(Re,we))for(var Ue=x[Te],We=x[Te+1],Ye=Ue;Ye<We;Ye++){var xe=A[Ye];Pe[xe]?Oe[xe]=te(Oe[xe],le(Re,O[Ye])):(Pe[xe]=!0,z.push(xe),Oe[xe]=le(Re,O[Ye]))}}for(var Dt=z.length,Et=0;Et<Dt;Et++){var ht=z[Et];H[Et]=Oe[ht]}return Q[1]=z.length,F.createSparseMatrix({values:H,index:z,ptr:Q,size:[j,1],datatype:X})}function w(F,k){var O=F._values,A=F._index,x=F._ptr,U=F._datatype;if(!O)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var K=k._data,J=k._datatype,j=F._size[0],V=k._size[0],H=k._size[1],z,Q=n,X=i,te=a,le=0;U&&J&&U===J&&typeof U=="string"&&(z=U,Q=e.find(n,[z,z]),X=e.find(i,[z,z]),te=e.find(a,[z,z]),le=e.convert(0,z));for(var be=[],we=[],Oe=[],Pe=F.createSparseMatrix({values:be,index:we,ptr:Oe,size:[j,H],datatype:z}),Te=[],Re=[],Ue=0;Ue<H;Ue++){Oe[Ue]=we.length;for(var We=Ue+1,Ye=0;Ye<V;Ye++){var xe=K[Ye][Ue];if(!te(xe,le))for(var Dt=x[Ye],Et=x[Ye+1],ht=Dt;ht<Et;ht++){var lt=A[ht];Re[lt]!==We?(Re[lt]=We,we.push(lt),Te[lt]=X(xe,O[ht])):Te[lt]=Q(Te[lt],X(xe,O[ht]))}}for(var Pt=Oe[Ue],wr=we.length,It=Pt;It<wr;It++){var dr=we[It];be[It]=Te[dr]}}return Oe[H]=we.length,Pe}function C(F,k){var O=F._values,A=F._index,x=F._ptr,U=F._datatype,K=k._values,J=k._index,j=k._ptr,V=k._datatype,H=F._size[0],z=k._size[1],Q=O&&K,X,te=n,le=i;U&&V&&U===V&&typeof U=="string"&&(X=U,te=e.find(n,[X,X]),le=e.find(i,[X,X]));for(var be=Q?[]:void 0,we=[],Oe=[],Pe=F.createSparseMatrix({values:be,index:we,ptr:Oe,size:[H,z],datatype:X}),Te=Q?[]:void 0,Re=[],Ue,We,Ye,xe,Dt,Et,ht,lt,Pt=0;Pt<z;Pt++){Oe[Pt]=we.length;var wr=Pt+1;for(Dt=j[Pt],Et=j[Pt+1],xe=Dt;xe<Et;xe++)if(lt=J[xe],Q)for(We=x[lt],Ye=x[lt+1],Ue=We;Ue<Ye;Ue++)ht=A[Ue],Re[ht]!==wr?(Re[ht]=wr,we.push(ht),Te[ht]=le(K[xe],O[Ue])):Te[ht]=te(Te[ht],le(K[xe],O[Ue]));else for(We=x[lt],Ye=x[lt+1],Ue=We;Ue<Ye;Ue++)ht=A[Ue],Re[ht]!==wr&&(Re[ht]=wr,we.push(ht));if(Q)for(var It=Oe[Pt],dr=we.length,Ze=It;Ze<dr;Ze++){var er=we[Ze];be[Ze]=Te[er]}}return Oe[z]=we.length,Pe}return e(R0,i,{"Array, Array":e.referTo("Matrix, Matrix",F=>(k,O)=>{p(Ti(k),Ti(O));var A=F(r(k),r(O));return Zr(A)?A.valueOf():A}),"Matrix, Matrix":function(k,O){var A=k.size(),x=O.size();return p(A,x),A.length===1?x.length===1?c(k,O,A[0]):f(k,O):x.length===1?g(k,O):b(k,O)},"Matrix, Array":e.referTo("Matrix,Matrix",F=>(k,O)=>F(k,r(O))),"Array, Matrix":e.referToSelf(F=>(k,O)=>F(r(k,O.storage()),O)),"SparseMatrix, any":function(k,O){return s(k,O,i,!1)},"DenseMatrix, any":function(k,O){return l(k,O,i,!1)},"any, SparseMatrix":function(k,O){return s(O,k,i,!0)},"any, DenseMatrix":function(k,O){return l(O,k,i,!0)},"Array, any":function(k,O){return l(r(k),O,i,!1).valueOf()},"any, Array":function(k,O){return l(r(O),k,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(F=>(k,O,A)=>{for(var x=F(k,O),U=0;U<A.length;U++)x=F(x,A[U]);return x})})}),U0="subtract",JA=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix","concat"],QA=St(U0,JA,t=>{var{typed:e,matrix:r,equalScalar:n,addScalar:i,unaryMinus:a,DenseMatrix:o,concat:s}=t,l=m1({typed:e}),p=zA({typed:e}),c=HA({typed:e,equalScalar:n}),f=_1({typed:e,DenseMatrix:o}),d=wA({typed:e,DenseMatrix:o}),g=b1({typed:e,matrix:r,concat:s});return e(U0,{"number, number":(b,v)=>b-v,"Complex, Complex":(b,v)=>b.sub(v),"BigNumber, BigNumber":(b,v)=>b.minus(v),"Fraction, Fraction":(b,v)=>b.sub(v),"Unit, Unit":e.referToSelf(b=>(v,m)=>{if(v.value===null)throw new Error("Parameter x contains a unit with undefined value");if(m.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!v.equalBase(m))throw new Error("Units do not match");var D=v.clone();return D.value=e.find(b,[D.valueType(),m.valueType()])(D.value,m.value),D.fixPrefix=!1,D})},g({SS:c,DS:l,SD:p,Ss:d,sS:f}))}),V0="conj",XA=["typed"],e3=St(V0,XA,t=>{var{typed:e}=t;return e(V0,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":e.referToSelf(r=>n=>fo(n,r))})}),j0="concat",t3=["typed","matrix","isInteger"],r3=St(j0,t3,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(j0,{"...Array | Matrix | number | BigNumber":function(a){var o,s=a.length,l=-1,p,c=!1,f=[];for(o=0;o<s;o++){var d=a[o];if(Zr(d)&&(c=!0),Xt(d)||Bn(d)){if(o!==s-1)throw new Error("Dimension must be specified as last argument");if(p=l,l=d.valueOf(),!n(l))throw new TypeError("Integer number expected for dimension");if(l<0||o>0&&l>p)throw new ea(l,p+1)}else{var g=Sr(d).valueOf(),b=Ti(g);if(f[o]=g,p=l,l=b.length-1,o>0&&l!==p)throw new Tt(p+1,l+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var v=f.shift();f.length;)v=D1(v,f.shift(),l,0);return c?r(v):v},"...string":function(a){return a.join("")}})});function D1(t,e,r,n){if(n<r){if(t.length!==e.length)throw new Tt(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=D1(t[a],e[a],r,n+1);return i}else return t.concat(e)}function n3(){throw new Error('No "matrix" implementation available')}var z0="size",i3=["typed","config","?matrix"],a3=St(z0,i3,t=>{var{typed:e,config:r,matrix:n}=t;return e(z0,{Matrix:function(a){return a.create(a.size())},Array:Ti,string:function(a){return r.matrix==="Array"?[a.length]:n([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return r.matrix==="Array"?[]:n?n([]):n3()}})}),q0="add",u3=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],s3=St(q0,u3,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:a,SparseMatrix:o,concat:s}=t,l=m1({typed:e}),p=OA({typed:e,equalScalar:i}),c=_1({typed:e,DenseMatrix:a}),f=b1({typed:e,matrix:r,concat:s});return e(q0,{"any, any":n,"any, any, ...any":e.referToSelf(d=>(g,b,v)=>{for(var m=d(g,b),D=0;D<v.length;D++)m=d(m,v[D]);return m})},f({elop:n,DS:l,SS:p,Ss:c}))}),W0="dot",o3=["typed","addScalar","multiplyScalar","conj","size"],l3=St(W0,o3,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:a}=t;return e(W0,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":l});function o(c,f){var d=p(c),g=p(f),b,v;if(d.length===1)b=d[0];else if(d.length===2&&d[1]===1)b=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(g.length===1)v=g[0];else if(g.length===2&&g[1]===1)v=g[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+g.join(", ")+")");if(b!==v)throw new RangeError("Vectors must have equal length ("+b+" != "+v+")");if(b===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return b}function s(c,f){var d=o(c,f),g=Zr(c)?c._data:c,b=Zr(c)?c._datatype:void 0,v=Zr(f)?f._data:f,m=Zr(f)?f._datatype:void 0,D=p(c).length===2,B=p(f).length===2,w=r,C=n;if(b&&m&&b===m&&typeof b=="string"){var F=b;w=e.find(r,[F,F]),C=e.find(n,[F,F])}if(!D&&!B){for(var k=C(i(g[0]),v[0]),O=1;O<d;O++)k=w(k,C(i(g[O]),v[O]));return k}if(!D&&B){for(var A=C(i(g[0]),v[0][0]),x=1;x<d;x++)A=w(A,C(i(g[x]),v[x][0]));return A}if(D&&!B){for(var U=C(i(g[0][0]),v[0]),K=1;K<d;K++)U=w(U,C(i(g[K][0]),v[K]));return U}if(D&&B){for(var J=C(i(g[0][0]),v[0][0]),j=1;j<d;j++)J=w(J,C(i(g[j][0]),v[j][0]));return J}}function l(c,f){o(c,f);for(var d=c._index,g=c._values,b=f._index,v=f._values,m=0,D=r,B=n,w=0,C=0;w<d.length&&C<b.length;){var F=d[w],k=b[C];if(F<k){w++;continue}if(F>k){C++;continue}F===k&&(m=D(m,B(g[w],v[C])),w++,C++)}return m}function p(c){return Zr(c)?c.size():a(c)}}),c3=UE({config:ao}),f3=qE({}),h3=GE({}),Gc=ZE({}),ho=XE({Matrix:Gc}),sn=zw({BigNumber:c3,Complex:f3,DenseMatrix:ho,Fraction:h3}),po=vA({typed:sn}),d3=e3({typed:sn}),go=sA({config:ao,typed:sn}),p3=tA({typed:sn}),y1=KA({typed:sn}),w1=cA({Matrix:Gc,equalScalar:go,typed:sn}),g3=pA({typed:sn}),Su=hA({DenseMatrix:ho,Matrix:Gc,SparseMatrix:w1,typed:sn}),v3=a3({matrix:Su,config:ao,typed:sn}),E1=r3({isInteger:p3,matrix:Su,typed:sn}),Nr=s3({DenseMatrix:ho,SparseMatrix:w1,addScalar:po,concat:E1,equalScalar:go,matrix:Su,typed:sn}),m3=l3({addScalar:po,conj:d3,multiplyScalar:y1,size:v3,typed:sn}),qr=ZA({addScalar:po,dot:m3,equalScalar:go,matrix:Su,multiplyScalar:y1,typed:sn}),_s=QA({DenseMatrix:ho,addScalar:po,concat:E1,equalScalar:go,matrix:Su,typed:sn,unaryMinus:g3});function _3(t){let e,r,n;return{c(){e=ut("circle"),this.h()},l(i){e=st(i,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),R(e).forEach(M),this.h()},h(){S(e,"cx",r=t[0][0]),S(e,"cy",n=t[0][1]),S(e,"r",t[1]),S(e,"stroke",t[3]),S(e,"stroke-width",t[2]),Bt(e,"fill","rgba(0,0,0,0)")},m(i,a){se(i,e,a)},p(i,[a]){a&1&&r!==(r=i[0][0])&&S(e,"cx",r),a&1&&n!==(n=i[0][1])&&S(e,"cy",n),a&2&&S(e,"r",i[1]),a&8&&S(e,"stroke",i[3]),a&4&&S(e,"stroke-width",i[2])},i:Me,o:Me,d(i){i&&M(e)}}}function b3(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class Kc extends Xe{constructor(e){super(),et(this,e,b3,_3,tt,{xy:0,radius:1,stroke:2,color:3})}}function D3(t){let e,r,n,i,a;return{c(){e=ut("circle"),this.h()},l(o){e=st(o,"circle",{cx:!0,cy:!0,r:!0}),R(e).forEach(M),this.h()},h(){S(e,"cx",r=t[0][0]),S(e,"cy",n=t[0][1]),S(e,"r",t[1]),Bt(e,"fill",t[2])},m(o,s){se(o,e,s),i||(a=[_e(e,"mouseover",t[3]),_e(e,"mouseout",t[4]),_e(e,"mousedown",t[5]),_e(e,"touchstart",t[5])],i=!0)},p(o,[s]){s&1&&r!==(r=o[0][0])&&S(e,"cx",r),s&1&&n!==(n=o[0][1])&&S(e,"cy",n),s&2&&S(e,"r",o[1]),s&4&&Bt(e,"fill",o[2])},i:Me,o:Me,d(o){o&&M(e),i=!1,zt(a)}}}function y3(t,e,r){let{xy:n=[100,100]}=e,{radius:i=5}=e,{color:a="black"}=e,{hoverColor:o="white"}=e,{handleMouseDown:s=d=>{}}=e,l=a;function p(){r(2,l=o)}function c(){r(2,l=a)}function f(d){s(d)}return t.$$set=d=>{"xy"in d&&r(0,n=d.xy),"radius"in d&&r(1,i=d.radius),"color"in d&&r(6,a=d.color),"hoverColor"in d&&r(7,o=d.hoverColor),"handleMouseDown"in d&&r(8,s=d.handleMouseDown)},[n,i,l,p,c,f,a,o,s]}class ka extends Xe{constructor(e){super(),et(this,e,y3,D3,tt,{xy:0,radius:1,color:6,hoverColor:7,handleMouseDown:8})}}function w3(t){let e,r,n,i,a;return{c(){e=ut("line"),this.h()},l(o){e=st(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-dasharray":!0,"stroke-width":!0}),R(e).forEach(M),this.h()},h(){S(e,"x1",r=t[0][0]),S(e,"y1",n=t[0][1]),S(e,"x2",i=t[1][0]),S(e,"y2",a=t[1][1]),S(e,"stroke",t[3]),S(e,"stroke-dasharray","10,10"),S(e,"stroke-width",t[2])},m(o,s){se(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&S(e,"x1",r),s&1&&n!==(n=o[0][1])&&S(e,"y1",n),s&2&&i!==(i=o[1][0])&&S(e,"x2",i),s&2&&a!==(a=o[1][1])&&S(e,"y2",a),s&8&&S(e,"stroke",o[3]),s&4&&S(e,"stroke-width",o[2])},i:Me,o:Me,d(o){o&&M(e)}}}function E3(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class A1 extends Xe{constructor(e){super(),et(this,e,E3,w3,tt,{p1:0,p2:1,stroke:2,color:3})}}function A3(t){let e,r;return{c(){e=q("p"),r=Se(t[2]),this.h()},l(n){e=W(n,"P",{});var i=R(e);r=Be(i,t[2]),i.forEach(M),this.h()},h(){Bt(e,"color",t[3]),Bt(e,"user-select","none"),Bt(e,"margin","0"),Bt(e,"pointer-events","none"),Bt(e,"text-align",t[4]),Bt(e,"font-size",`${t[5]}px`),Bt(e,"font-family","sans-serif"),Bt(e,"font-style","italic")},m(n,i){se(n,e,i),T(e,r)},p(n,i){i&4&&hr(r,n[2]),i&8&&Bt(e,"color",n[3]),i&16&&Bt(e,"text-align",n[4]),i&32&&Bt(e,"font-size",`${n[5]}px`)},d(n){n&&M(e)}}}function C3(t){let e,r;return{c(){e=q("img"),this.h()},l(n){e=W(n,"IMG",{src:!0}),this.h()},h(){w0(e.src,r=t[2])||S(e,"src",r),Bt(e,"user-select","none"),Bt(e,"width","100%"),Bt(e,"height","100%"),Bt(e,"object-fit","contain")},m(n,i){se(n,e,i)},p(n,i){i&4&&!w0(e.src,r=n[2])&&S(e,"src",r)},d(n){n&&M(e)}}}function F3(t){let e,r,n,i,a,o,s;function l(f,d){return d&4&&(n=null),n==null&&(n=!!f[2].startsWith("http")),n?C3:A3}let p=l(t,-1),c=p(t);return{c(){e=ut("foreignObject"),r=q("div"),c.c(),this.h()},l(f){e=st(f,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var d=R(e);r=W(d,"DIV",{class:!0});var g=R(r);c.l(g),g.forEach(M),d.forEach(M),this.h()},h(){S(r,"class","h-full flex flex-col justify-center"),S(e,"x",i=t[0][0]),S(e,"y",a=t[0][1]),S(e,"width",o=t[1][0]),S(e,"height",s=t[1][1])},m(f,d){se(f,e,d),T(e,r),c.m(r,null)},p(f,[d]){p===(p=l(f,d))&&c?c.p(f,d):(c.d(1),c=p(f),c&&(c.c(),c.m(r,null))),d&1&&i!==(i=f[0][0])&&S(e,"x",i),d&1&&a!==(a=f[0][1])&&S(e,"y",a),d&2&&o!==(o=f[1][0])&&S(e,"width",o),d&2&&s!==(s=f[1][1])&&S(e,"height",s)},i:Me,o:Me,d(f){f&&M(e),c.d()}}}function S3(t,e,r){let{xy:n=[100,100]}=e,{wh:i=[100,100]}=e,{text:a=""}=e,{color:o="rgba(96,117,151, 1)"}=e,{textAlign:s="center"}=e,{fontSize:l=12}=e;return t.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,i=p.wh),"text"in p&&r(2,a=p.text),"color"in p&&r(3,o=p.color),"textAlign"in p&&r(4,s=p.textAlign),"fontSize"in p&&r(5,l=p.fontSize)},[n,i,a,o,s,l]}class vo extends Xe{constructor(e){super(),et(this,e,S3,F3,tt,{xy:0,wh:1,text:2,color:3,textAlign:4,fontSize:5})}}function B3(t){let e,r,n,i,a,o,s,l,p,c,f;return{c(){e=ut("circle"),i=Ee(),a=ut("foreignObject"),o=q("p"),s=Se(t[4]),this.h()},l(d){e=st(d,"circle",{cx:!0,cy:!0,r:!0}),R(e).forEach(M),i=Ae(d),a=st(d,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var g=R(a);o=W(g,"P",{style:!0,class:!0});var b=R(o);s=Be(b,t[4]),b.forEach(M),g.forEach(M),this.h()},h(){S(e,"cx",r=t[0][0]),S(e,"cy",n=t[0][1]),S(e,"r",t[1]),Bt(e,"fill",t[3]),Bt(o,"color",t[2]),Bt(o,"user-select","none"),Bt(o,"margin","0"),S(o,"class","heavy svelte-6if1p2"),S(a,"x",l=t[0][0]-t[1]),S(a,"y",p=t[0][1]-t[1]),S(a,"width",c=t[1]*2),S(a,"height",f=t[1]*2)},m(d,g){se(d,e,g),se(d,i,g),se(d,a,g),T(a,o),T(o,s)},p(d,[g]){g&1&&r!==(r=d[0][0])&&S(e,"cx",r),g&1&&n!==(n=d[0][1])&&S(e,"cy",n),g&2&&S(e,"r",d[1]),g&8&&Bt(e,"fill",d[3]),g&16&&hr(s,d[4]),g&4&&Bt(o,"color",d[2]),g&3&&l!==(l=d[0][0]-d[1])&&S(a,"x",l),g&3&&p!==(p=d[0][1]-d[1])&&S(a,"y",p),g&2&&c!==(c=d[1]*2)&&S(a,"width",c),g&2&&f!==(f=d[1]*2)&&S(a,"height",f)},i:Me,o:Me,d(d){d&&M(e),d&&M(i),d&&M(a)}}}function O3(t,e,r){let{xy:n=[100,100]}=e,{radius:i=25}=e,{textColor:a="rgba(96,117,151, 1)"}=e,{bgColor:o="black"}=e,{weight:s=""}=e;return t.$$set=l=>{"xy"in l&&r(0,n=l.xy),"radius"in l&&r(1,i=l.radius),"textColor"in l&&r(2,a=l.textColor),"bgColor"in l&&r(3,o=l.bgColor),"weight"in l&&r(4,s=l.weight)},[n,i,a,o,s]}class M3 extends Xe{constructor(e){super(),et(this,e,O3,B3,tt,{xy:0,radius:1,textColor:2,bgColor:3,weight:4})}}function Ln(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=360+Math.atan2(i,n)*180/Math.PI,o=Math.sqrt(n*n+i*i);return[a%360,o/r]}function Lr(t,e,r){const n=e[0]%360*Math.PI/180,i=[r*e[1]*Math.cos(n),r*e[1]*Math.sin(n)];return Nr(t,i)}function mu(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=Math.sqrt(n*n+i*i),o=r/a,s=e[0]+n*o,l=e[1]+i*o;return[s,l]}function P3(t,e,r){const n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)<r}function Yc(t,e){const r=e%360*Math.PI/180;let n,i;const a=Math.cos(r),o=Math.sin(r);return n=(t[0]+5)*-1.2*a,i=(t[1]+5)*-1.2*o,n-=t[0],i-=t[1],[n,i]}function zr(t){return t<0?360+-1*(Math.abs(t)%360):t>360?t%360:t}function k3(t){return Math.round(t*100)}function an(t){return Math.round(Math.max(1-Math.pow(1-t,2),.25)*100)/100}function mo(t){let e="parsedWeight";switch(t){case gt.Circle:e="circleWeight";break;case gt.Bars:e="barWeight";break;case gt.Embed:e="embedWeight";break;case gt.Pie:e="pieWeight";break;case gt.Ring:e="ringWeight";break;case gt.Random:e="randomWeight";break}return e}function T3(t){const e=t.weightMode,r=mo(e);return t.weightedPrompts?Math.max(...Object.values(t.weightedPrompts).map(n=>n[r])):0}function I3(t){const e=t.weightMode,r=mo(e);return t.weightedPrompts?Object.values(t.weightedPrompts).reduce((n,i)=>n+i[r],0):0}function H0(t,e){const r=t.weightMode,n=mo(r);return t.weightedPrompts[e]?t.weightedPrompts[e][n]/T3(t):0}function Yn(t,e){const r=t.weightMode,n=mo(r);if(!t.weightedPrompts[e])return 0;const i=t.weightedPrompts[e][n];return k3((i||0)/I3(t))}function x3(t,e,r){const a=r*.6,o=Math.floor(t/a);return Math.ceil(e/o)*r*1.2}function Wr(t,e,r){const n=x3(t,e,r)+10;return[t,n]}function $t(t){let e=t;if(t.length>40){const r=t.split(",");r.length>1?e=r[0]+"...":e=t.slice(0,20)+"..."}return e}function Ma(t,e){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function Ta(t){return qr(t,.5)}function Pi(t){const e=t.currentTarget;if(!e)throw new Error("No SVG element found");var r=e.createSVGPoint();t instanceof TouchEvent?(r.x=t.touches[0].clientX,r.y=t.touches[0].clientY):(r.x=t.clientX,r.y=t.clientY);const n=e.getScreenCTM();if(!n)throw new Error("No DOM Matrix found");const i=r.matrixTransform(n.inverse());return[i.x,i.y]}function Us(t){const e=t.reduce((r,n)=>Nr(r,n),[0,0]);return qr(e,1/t.length)}function $0(t,e,r){const n=t.slice();return n[20]=e[r][0],n[21]=e[r][1],n}function G0(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,a;e=new Kc({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),s=[];for(let c=0;c<o.length;c+=1)s[c]=K0($0(t,o,c));const l=c=>ve(s[c],1,1,()=>{s[c]=null});let p=n&&Y0(t);return{c(){Ve(e.$$.fragment);for(let c=0;c<s.length;c+=1)s[c].c();r=Ft(),p&&p.c(),i=Ft()},l(c){je(e.$$.fragment,c);for(let f=0;f<s.length;f+=1)s[f].l(c);r=Ft(),p&&p.l(c),i=Ft()},m(c,f){ze(e,c,f);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(c,f);se(c,r,f),p&&p.m(c,f),se(c,i,f),a=!0},p(c,f){const d={};if(f&1&&(d.xy=c[0]),f&2&&(d.radius=c[1]),e.$set(d),f&895){o=Object.entries(c[5].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=$0(c,o,g);s[g]?(s[g].p(b,f),fe(s[g],1)):(s[g]=K0(b),s[g].c(),fe(s[g],1),s[g].m(r.parentNode,r))}for(ar(),g=o.length;g<s.length;g+=1)l(g);ur()}f&32&&(n=Object.entries(c[5].weightedPrompts).length>0),n?p?(p.p(c,f),f&32&&fe(p,1)):(p=Y0(c),p.c(),fe(p,1),p.m(i.parentNode,i)):p&&(ar(),ve(p,1,1,()=>{p=null}),ur())},i(c){if(!a){fe(e.$$.fragment,c);for(let f=0;f<o.length;f+=1)fe(s[f]);fe(p),a=!0}},o(c){ve(e.$$.fragment,c),s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)ve(s[f]);ve(p),a=!1},d(c){qe(e,c),Cu(s,c),c&&M(r),p&&p.d(c),c&&M(i)}}}function K0(t){let e,r,n,i,a;e=new A1({props:{p1:Lr(t[0],t[5].circleMarker,t[1]),p2:t[6][t[20]].xy}});function o(){return t[14](t[20])}return r=new ka({props:{xy:t[6][t[20]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:o}}),n=new vo({props:{xy:t[9](t[6][t[20]].xy,Wr(t[3],$t(t[21].text).length,t[4])),color:`rgba(255,255,255,${an(t[6][t[20]].unitWeight)}`,wh:Wr(t[3],$t(t[21].text).length,t[4]),fontSize:t[4],text:$t(t[21].text)}}),i=new M3({props:{xy:qr(Nr(Lr(t[0],t[5].circleMarker,t[1]),t[6][t[20]].xy),.5),weight:Yn(t[5],t[20]),radius:15,textColor:`rgba(255,255,255,${an(t[6][t[20]].unitWeight)}`,bgColor:"rgb(8, 11, 22)"}}),{c(){Ve(e.$$.fragment),Ve(r.$$.fragment),Ve(n.$$.fragment),Ve(i.$$.fragment)},l(s){je(e.$$.fragment,s),je(r.$$.fragment,s),je(n.$$.fragment,s),je(i.$$.fragment,s)},m(s,l){ze(e,s,l),ze(r,s,l),ze(n,s,l),ze(i,s,l),a=!0},p(s,l){t=s;const p={};l&35&&(p.p1=Lr(t[0],t[5].circleMarker,t[1])),l&96&&(p.p2=t[6][t[20]].xy),e.$set(p);const c={};l&96&&(c.xy=t[6][t[20]].xy),l&4&&(c.radius=t[2]),l&32&&(c.handleMouseDown=o),r.$set(c);const f={};l&120&&(f.xy=t[9](t[6][t[20]].xy,Wr(t[3],$t(t[21].text).length,t[4]))),l&96&&(f.color=`rgba(255,255,255,${an(t[6][t[20]].unitWeight)}`),l&56&&(f.wh=Wr(t[3],$t(t[21].text).length,t[4])),l&16&&(f.fontSize=t[4]),l&32&&(f.text=$t(t[21].text)),n.$set(f);const d={};l&99&&(d.xy=qr(Nr(Lr(t[0],t[5].circleMarker,t[1]),t[6][t[20]].xy),.5)),l&32&&(d.weight=Yn(t[5],t[20])),l&96&&(d.textColor=`rgba(255,255,255,${an(t[6][t[20]].unitWeight)}`),i.$set(d)},i(s){a||(fe(e.$$.fragment,s),fe(r.$$.fragment,s),fe(n.$$.fragment,s),fe(i.$$.fragment,s),a=!0)},o(s){ve(e.$$.fragment,s),ve(r.$$.fragment,s),ve(n.$$.fragment,s),ve(i.$$.fragment,s),a=!1},d(s){qe(e,s),qe(r,s),qe(n,s),qe(i,s)}}}function Y0(t){let e,r;return e=new ka({props:{xy:Lr(t[0],t[5].circleMarker,t[1]),radius:10,color:"rgba(136,157,191, 1)",handleMouseDown:t[15]}}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p(n,i){const a={};i&35&&(a.xy=Lr(n[0],n[5].circleMarker,n[1])),e.$set(a)},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function N3(t){let e,r,n,i,a,o=t[6]&&t[5].weightedPrompts&&G0(t);const s=t[13].default,l=yu(s,t,t[12],null);return{c(){e=ut("svg"),o&&o.c(),r=Ee(),l&&l.c(),this.h()},l(p){e=st(p,"svg",{id:!0,class:!0});var c=R(e);o&&o.l(c),c.forEach(M),r=Ae(p),l&&l.l(p),this.h()},h(){S(e,"id","svg"),S(e,"class","w-full h-full")},m(p,c){se(p,e,c),o&&o.m(e,null),se(p,r,c),l&&l.m(p,c),n=!0,i||(a=[_e(e,"mousemove",t[10]),_e(e,"touchmove",t[10]),_e(e,"mouseup",t[7]),_e(e,"touchend",t[7]),_e(e,"dblclick",t[11])],i=!0)},p(p,[c]){p[6]&&p[5].weightedPrompts?o?(o.p(p,c),c&96&&fe(o,1)):(o=G0(p),o.c(),fe(o,1),o.m(e,null)):o&&(ar(),ve(o,1,1,()=>{o=null}),ur()),l&&l.p&&(!n||c&4096)&&wu(l,s,p,p[12],n?Au(s,p[12],c,null):Eu(p[12]),null)},i(p){n||(fe(o),fe(l,p),n=!0)},o(p){ve(o),ve(l,p),n=!1},d(p){p&&M(e),o&&o.d(),p&&M(r),l&&l.d(p),i=!1,zt(a)}}}function Z0(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const o=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function L3(t,e,r){let n,i;Ge(t,ot,O=>r(5,i=O));let{$$slots:a={},$$scope:o}=e,{center:s=[450,450]}=e,{radius:l=250}=e,{pointRadius:p=10}=e,{textWidth:c=150}=e,{fontSize:f=13}=e,d=[0,0],g=null;function b(O){g=null}function v(O){g=O}function m(O,A){let x=Ln(O,s,l)[0]-180;x<0&&(x+=360);const U=Yc(Ta(A),x);return Nr(O,U)}function D(O){const A=P3(O,s,l)?Ln(O,s,l):Ln(mu(O,s,l),s,l);r(6,n=C(i.weightedPrompts,s,l,i.circleWeightScaling,i.circleExponentialScaling,A,i.circleAngles))}function B(O){if(d=Pi(O),g==="main")D(d);else if(g){const A={...i.weightedPrompts[g]},x=mu(d,s,l),U=Ln(x,s,l)[0],K={...i.circleAngles};K[A.id]=U;const J={...i.weightedPrompts};J[g]=A,r(6,n=C(J,s,l,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,K))}}function w(O){d=Pi(O),D(d)}function C(O,A,x,U,K,J,j){if(!O||!A||!x||!U||!J)return null;let V=Object.entries(O).reduce((Q,[X,te])=>(Q[X]={xy:Lr(A,[j[X],1],x)},Q),{});V=Object.entries(V).reduce((Q,[X,te])=>(Q[X]={...Q[X],distance:Ma(te.xy,Lr(A,J,x))},Q),V);const H=Object.values(V).reduce((Q,X)=>Q+X.distance,0);V=Object.entries(V).reduce((Q,[X,te])=>(Q[X]={...Q[X],unitDistance:Math.round(te.distance/H*100)/100},Q),V),V=Object.entries(V).reduce((Q,[X,te])=>(Q[X]={...Q[X],invertedUnitDistance:Math.round((1-te.unitDistance)*100)/100},Q),V),V=Object.entries(V).reduce((Q,[X,te])=>(K?Q[X]={...Q[X],unitWeight:Math.round(Math.pow(1-te.distance/(2*x),U)*100)/100}:Q[X]={...Q[X],unitWeight:Math.round((1-te.distance/(2*x))*100)/100},Q),V);const z={...O};return Object.entries(V).forEach(([Q,X])=>{z[Q].circleWeight=X.unitWeight}),ot.update({...i,circleMarker:J,weightedPrompts:z,circleAngles:j}),V}const F=O=>v(O),k=()=>v("main");return t.$$set=O=>{"center"in O&&r(0,s=O.center),"radius"in O&&r(1,l=O.radius),"pointRadius"in O&&r(2,p=O.pointRadius),"textWidth"in O&&r(3,c=O.textWidth),"fontSize"in O&&r(4,f=O.fontSize),"$$scope"in O&&r(12,o=O.$$scope)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(i.circleAngles).length!==Object.keys(i.weightedPrompts).length&&ot.update({...i,circleAngles:Z0(i.weightedPrompts,{})}),t.$$.dirty&35&&r(6,n=C(i.weightedPrompts,s,l,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,i.circleAngles||Z0(i.weightedPrompts,{})))},[s,l,p,c,f,i,n,b,v,m,B,w,o,a,F,k]}class R3 extends Xe{constructor(e){super(),et(this,e,L3,N3,tt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}let bs;const U3=new Uint8Array(16);function V3(){if(!bs&&(bs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!bs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return bs(U3)}const Tr=[];for(let t=0;t<256;++t)Tr.push((t+256).toString(16).slice(1));function j3(t,e=0){return(Tr[t[e+0]]+Tr[t[e+1]]+Tr[t[e+2]]+Tr[t[e+3]]+"-"+Tr[t[e+4]]+Tr[t[e+5]]+"-"+Tr[t[e+6]]+Tr[t[e+7]]+"-"+Tr[t[e+8]]+Tr[t[e+9]]+"-"+Tr[t[e+10]]+Tr[t[e+11]]+Tr[t[e+12]]+Tr[t[e+13]]+Tr[t[e+14]]+Tr[t[e+15]]).toLowerCase()}const z3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),J0={randomUUID:z3};function _o(t,e,r){if(J0.randomUUID&&!e&&!t)return J0.randomUUID();t=t||{};const n=t.random||(t.rng||V3)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return j3(n)}const Ds="showZeroPrompts";function q3(){const t=sr(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Ds]?JSON.parse(localStorage[Ds]):!1),{subscribe:e,update:a=>{i&&(localStorage[Ds]=JSON.stringify(!!a),r(!!a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[Ds],r(!1))}}}const Vs=q3(),ys="useWeightOrdering";function W3(){const t=sr(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[ys]?JSON.parse(localStorage[ys]):!1),{subscribe:e,update:a=>{i&&(localStorage[ys]=JSON.stringify(!!a),r(!!a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[ys],r(!1))}}}const Sc=W3(),Zc=Fu(Sc,t=>Ot(Sc));var Bc=function(t,e){return Bc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Bc(t,e)};function Jc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Bc(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Oc,Qc=function(){function t(){}return t._xfnv1a=function(e){for(var r=2166136261,n=0;n<e.length;n++)r=Math.imul(r^e.charCodeAt(n),16777619);return function(){return r+=r<<13,r^=r>>>7,r+=r<<3,r^=r>>>17,(r+=r<<5)>>>0}},t}(),H3=function(t){function e(r){var n=t.call(this)||this;return n.a=e._xfnv1a(r)(),n}return Jc(e,t),e.prototype.next=function(){var r=this.a+=1831565813;return r=Math.imul(r^r>>>15,1|r),(((r^=r+Math.imul(r^r>>>7,61|r))^r>>>14)>>>0)/4294967296},e}(Qc),$3=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Jc(e,t),e.prototype.next=function(){this.a>>>=0,this.b>>>=0,this.c>>>=0,this.d>>>=0;var r=this.a+this.b|0;return this.a=this.b^this.b>>>9,this.b=this.c+(this.c<<3)|0,this.c=this.c<<21|this.c>>>11,this.d=this.d+1|0,r=r+this.d|0,this.c=this.c+r|0,(r>>>0)/4294967296},e}(Qc),G3=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Jc(e,t),e.prototype.next=function(){var r=this.b<<9,n=5*this.a;return n=n<<7|9*(n>>>25),this.c^=this.a,this.d^=this.b,this.b^=this.c,this.a^=this.d,this.c^=r,this.d=this.d<<11|this.d>>>21,(n>>>0)/4294967296},e}(Qc);(function(t){t.sfc32="sfc32",t.mulberry32="mulberry32",t.xoshiro128ss="xoshiro128ss"})(Oc||(Oc={}));var K3=function(){function t(e,r){r===void 0&&(r=Oc.sfc32),this.str=e,this.prng=r,this.generator=this._initializeGenerator()}return t.prototype.next=function(){return this.generator.next()},t.prototype._initializeGenerator=function(){if(function(r){return r===null}(e=this.str)||function(r){return r===void 0}(e))return this.wrap();var e;switch(this.prng){case"sfc32":return new $3(this.str);case"mulberry32":return new H3(this.str);case"xoshiro128ss":return new G3(this.str);default:return this.wrap()}},t.prototype.wrap=function(){return{next:function(){return Math.random()}}},t}();const Vl="slotSet";function Y3(){const t=sr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith(Vl)){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=Ot(t),p={...s[a]||{},...o};i&&(localStorage[`${Vl}_${a}`]=JSON.stringify(p));const c={...s,[a]:p};r(c)},get:a=>Ot(t)[a],getAll:()=>Ot(t),delete:a=>{i&&delete localStorage[`${Vl}_${a}`];const o={...Ot(t)};delete o[a],r(o)}}}const Qi=Y3();function Q0(){return(Math.random()*1e6).toFixed(0)}function Z3(){const t=sr(Q0()),{subscribe:e,set:r}=t;return{subscribe:e,get:()=>Ot(t),shuffle:()=>{r(Q0())}}}const xi=Z3();function js(t){let e=t.replace(/\s+/g,"_");return e=e.toUpperCase(),"$"+e}function X0(t){const e=t.length>0&&t.length<32,r=/^[a-zA-Z0-9 ]+$/.test(t),n=/^[a-zA-Z]/.test(t),i=/[a-zA-Z0-9]$/.test(t);return e&&r&&n&&i}function J3(){const t=Qi.getAll();return Object.values(t).reduce((r,n)=>{const i=js(n.name);return i&&(r[i]=[...n.values]),r},{})}function Q3(t,e){const r=new K3(e);return Object.entries(t).reduce((i,[a,o])=>(i[a]=[...o].sort(()=>r.next()-.5),i),{})}function _u(t,e){let r=Q3(J3(),e),n=t;for(const[i,a]of Object.entries(r)){if(a.length===0)continue;let o=0;for(;n.includes(i);)o>=a.length&&(o=0),n=n.replace(i,a[o]),o++}return n}function X3(t){const e=[],r=/((?:[^:]+|:(?!:))+)(?:::(\d+(?:\.\d+)?))?(?=\s|$)/g;let n;for(;(n=r.exec(t))!==null;){const i=n[1].trim(),a=n[2]?parseFloat(n[2]):1;i&&e.push([i,a])}return e}function jl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=t.length-1;let r=t;for(;r[e]===",";)r=r.slice(0,e);return r}function zl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=["-","#","*","•","◦",">","<","+","^","~","(",")","[","]","{","}"];let r=t.trim();for(;e.includes(r[0]);)r=r.slice(1).trim();return/^\d+(\.|\))\s/.test(r)&&(r=r.replace(/^\d+(\.|\))\s/,"")),r}function bu(t){if(t=t.replace(/^\n+|\n+$/g,""),t.includes("::"))return X3(t);if(t.includes(`
`))return t.split(`
`).map(a=>zl(jl(a))).filter(a=>a.length>0).map(a=>[a,1]);const e=t.match(/[^.!?]+[.!?]+/g)||[],r=e.length,n=t.split(",").map(a=>zl(jl(a))).filter(a=>a.length>0),i=n.length-1;return r>i?e.map(a=>zl(jl(a))).filter(a=>a.length>0).map(a=>[a,1]):n.map(a=>[a,1])}function zs(t,e,r){let n=Object.entries(t.weightedPrompts);return e&&(n=n.sort((i,a)=>Yn(t,parseInt(a[0]))-Yn(t,parseInt(i[0])))),r||(n=n.filter(i=>r||Yn(t,parseInt(i[0])))),n}function e6(t){return t.trim().endsWith(".")}function t6(t){let e="",r=[];return t.forEach((n,i)=>{e6(n)?(r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+". ",r=[]),e+=n+" "):r.push(n.trim())}),r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+"."),e.trim()}function Mc(t,e,r,n,i){if(r)return zs(t,n,i).map(([o,s],l)=>`${_u(s.text,`${e}${o}${l}`)}::${Yn(t,parseInt(o))}`).join(" ");const a=zs(t,n,i).map(([o,s],l)=>_u(s.text,`${e}${o}${l}`));return t6(a)}function ed(t,e,r){const n=t.slice();return n[4]=e[r][0],n[5]=e[r][1],n[7]=r,n}function td(t,e){let r,n=_u(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"",i,a,o,s=Yn(e[0],parseInt(e[4]))+"",l,p,c;return{key:t,first:null,c(){r=q("span"),i=Se(n),a=Se("::"),o=q("b"),l=Se(s),p=Ee(),this.h()},l(f){r=W(f,"SPAN",{style:!0});var d=R(r);i=Be(d,n),a=Be(d,"::"),o=W(d,"B",{});var g=R(o);l=Be(g,s),p=Ae(g),g.forEach(M),d.forEach(M),this.h()},h(){S(r,"style",c=`color: rgba(255,255,255,${Math.max(.25,H0(e[0],parseInt(e[4])))});`),this.first=r},m(f,d){se(f,r,d),T(r,i),T(r,a),T(r,o),T(o,l),T(o,p)},p(f,d){e=f,d&15&&n!==(n=_u(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"")&&hr(i,n),d&7&&s!==(s=Yn(e[0],parseInt(e[4]))+"")&&hr(l,s),d&7&&c!==(c=`color: rgba(255,255,255,${Math.max(.25,H0(e[0],parseInt(e[4])))});`)&&S(r,"style",c)},d(f){f&&M(r)}}}function r6(t){let e,r,n=[],i=new Map,a=zs(t[0],t[1],t[2]);const o=s=>s[4];for(let s=0;s<a.length;s+=1){let l=ed(t,a,s),p=o(l);i.set(p,n[s]=td(p,l))}return{c(){e=q("div"),r=q("p");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=W(s,"DIV",{class:!0});var l=R(e);r=W(l,"P",{class:!0});var p=R(r);for(let c=0;c<n.length;c+=1)n[c].l(p);p.forEach(M),l.forEach(M),this.h()},h(){S(r,"class","text-sm select-none"),S(e,"class","overflow-y-auto h-full")},m(s,l){se(s,e,l),T(e,r);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(r,null)},p(s,[l]){l&15&&(a=zs(s[0],s[1],s[2]),n=Un(n,l,o,1,s,a,i,r,Jn,td,null,ed))},i:Me,o:Me,d(s){s&&M(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function n6(t,e,r){let n,i,a,o;return Ge(t,ot,s=>r(0,n=s)),Ge(t,Zc,s=>r(1,i=s)),Ge(t,Vs,s=>r(2,a=s)),Ge(t,xi,s=>r(3,o=s)),[n,i,a,o]}class i6 extends Xe{constructor(e){super(),et(this,e,n6,r6,tt,{})}}const ws="outputMultiPrompt";function a6(){const t=sr(!0),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[ws]?JSON.parse(localStorage[ws]):!1),{subscribe:e,update:a=>{i&&(localStorage[ws]=JSON.stringify(!!a),r(!!a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[ws],r(!0))}}}const Pc=a6();function u6(t){let e,r,n,i=Mc(t[0],t[1],t[2],t[3],t[4])+"",a;return{c(){e=q("div"),r=q("p"),n=q("span"),a=Se(i),this.h()},l(o){e=W(o,"DIV",{class:!0});var s=R(e);r=W(s,"P",{class:!0});var l=R(r);n=W(l,"SPAN",{style:!0});var p=R(n);a=Be(p,i),p.forEach(M),l.forEach(M),s.forEach(M),this.h()},h(){S(n,"style","color: rgba(255,255,255,0.75});"),S(r,"class","text-sm select-none"),S(e,"class","overflow-y-auto h-full")},m(o,s){se(o,e,s),T(e,r),T(r,n),T(n,a)},p(o,[s]){s&31&&i!==(i=Mc(o[0],o[1],o[2],o[3],o[4])+"")&&hr(a,i)},i:Me,o:Me,d(o){o&&M(e)}}}function s6(t,e,r){let n,i,a,o,s;return Ge(t,ot,l=>r(0,n=l)),Ge(t,xi,l=>r(1,i=l)),Ge(t,Pc,l=>r(2,a=l)),Ge(t,Zc,l=>r(3,o=l)),Ge(t,Vs,l=>r(4,s=l)),[n,i,a,o,s]}class o6 extends Xe{constructor(e){super(),et(this,e,s6,u6,tt,{})}}const fu="promptHistory";function l6(){const t=sr([]),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",a=(i&&JSON.parse(localStorage[fu]||"[]")||[]).map(o=>({...o,date:new Date(o.date)}));return r(a),{subscribe:e,add:o=>{if(!o||!i)return;const l=[...Ot(t),o];localStorage[fu]=JSON.stringify(l),r(l)},update:o=>{!o||!i||(localStorage[fu]=o,r(o))},get:()=>Ot(t),remove:o=>{if(!i)return;const l=Ot(t).filter(p=>p.id!==o);localStorage[fu]=JSON.stringify(l),r(l)},delete:()=>{i&&(delete localStorage[fu],r([]))}}}const Xc=l6();function c6(t){let e,r;return e=new o6({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function f6(t){let e,r;return e=new i6({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function h6(t){let e,r,n,i,a,o,s,l,p,c,f,d=t[2]?"Multi":"Single",g,b,v,m,D,B,w,C,F,k,O,A,x,U,K,J,j,V;const H=[f6,c6],z=[];function Q(X,te){return X[2]?0:1}return n=Q(t),i=z[n]=H[n](t),{c(){e=q("div"),r=q("div"),i.c(),a=Ee(),o=q("div"),s=q("div"),l=q("input"),p=Ee(),c=q("label"),f=q("span"),g=Se(d),b=Ee(),v=q("div"),m=q("input"),D=Ee(),B=q("label"),w=q("span"),C=Se("Use Weight Ordering"),F=Ee(),k=q("div"),O=q("input"),A=Ee(),x=q("label"),U=q("span"),K=Se("Include Zero Weights"),this.h()},l(X){e=W(X,"DIV",{class:!0});var te=R(e);r=W(te,"DIV",{class:!0});var le=R(r);i.l(le),le.forEach(M),a=Ae(te),o=W(te,"DIV",{class:!0});var be=R(o);s=W(be,"DIV",{class:!0});var we=R(s);l=W(we,"INPUT",{type:!0,class:!0}),p=Ae(we),c=W(we,"LABEL",{class:!0});var Oe=R(c);f=W(Oe,"SPAN",{class:!0});var Pe=R(f);g=Be(Pe,d),Pe.forEach(M),Oe.forEach(M),we.forEach(M),b=Ae(be),v=W(be,"DIV",{class:!0});var Te=R(v);m=W(Te,"INPUT",{type:!0,class:!0}),D=Ae(Te),B=W(Te,"LABEL",{class:!0});var Re=R(B);w=W(Re,"SPAN",{class:!0});var Ue=R(w);C=Be(Ue,"Use Weight Ordering"),Ue.forEach(M),Re.forEach(M),Te.forEach(M),F=Ae(be),k=W(be,"DIV",{class:!0});var We=R(k);O=W(We,"INPUT",{type:!0,class:!0}),A=Ae(We),x=W(We,"LABEL",{class:!0});var Ye=R(x);U=W(Ye,"SPAN",{class:!0});var xe=R(U);K=Be(xe,"Include Zero Weights"),xe.forEach(M),Ye.forEach(M),We.forEach(M),be.forEach(M),te.forEach(M),this.h()},h(){S(r,"class","normal-case font-light text-left cursor-copy bg-slate-900 rounded-t-md rounded-br-md p-4 w-full h-28 active:bg-slate-950 hover:bg-slate-800"),l.checked=t[2],S(l,"type","checkbox"),S(l,"class","toggle toggle-sm mt-2 mr-2"),S(f,"class","label-text"),S(c,"class","label w-10"),S(s,"class","mx-2 flex"),m.checked=t[1],S(m,"type","checkbox"),S(m,"class","toggle toggle-sm mt-2 mr-2"),S(w,"class","label-text"),S(B,"class","label"),S(v,"class","mx-2 flex"),O.checked=t[0],S(O,"type","checkbox"),S(O,"class","toggle toggle-sm mt-2 mr-2"),S(U,"class","label-text"),S(x,"class","label"),S(k,"class","mx-2 flex"),S(o,"class","w-full rounded-b-md flex pl-2 justify-start bg-slate-900"),S(e,"class","h-48 p-4")},m(X,te){se(X,e,te),T(e,r),z[n].m(r,null),T(e,a),T(e,o),T(o,s),T(s,l),T(s,p),T(s,c),T(c,f),T(f,g),T(o,b),T(o,v),T(v,m),T(v,D),T(v,B),T(B,w),T(w,C),T(o,F),T(o,k),T(k,O),T(k,A),T(k,x),T(x,U),T(U,K),J=!0,j||(V=[_e(r,"click",t[3]),_e(l,"change",t[4]),_e(m,"change",t[5]),_e(O,"change",t[6])],j=!0)},p(X,[te]){let le=n;n=Q(X),n!==le&&(ar(),ve(z[le],1,1,()=>{z[le]=null}),ur(),i=z[n],i||(i=z[n]=H[n](X),i.c()),fe(i,1),i.m(r,null)),(!J||te&4)&&(l.checked=X[2]),(!J||te&4)&&d!==(d=X[2]?"Multi":"Single")&&hr(g,d),(!J||te&2)&&(m.checked=X[1]),(!J||te&1)&&(O.checked=X[0])},i(X){J||(fe(i),J=!0)},o(X){ve(i),J=!1},d(X){X&&M(e),z[n].d(),j=!1,zt(V)}}}function d6(t,e,r){let n,i,a,o,s;Ge(t,Vs,d=>r(0,n=d)),Ge(t,Zc,d=>r(1,i=d)),Ge(t,Pc,d=>r(2,a=d)),Ge(t,xi,d=>r(7,o=d)),Ge(t,ot,d=>r(8,s=d));function l(){const d=Mc(s,o,a,i,n);navigator.clipboard.writeText(d),xi.shuffle(),Xc.add({id:_o(),prompt:d,date:new Date})}function p(){Pc.update(!a)}function c(){Sc.update(!i)}function f(){Vs.update(!n)}return[n,i,a,l,p,c,f]}class Bu extends Xe{constructor(e){super(),et(this,e,d6,h6,tt,{})}}function rd(t){let e,r,n,i,a,o,s,l;return{c(){e=q("div"),r=q("label"),n=q("span"),i=Se("Scaling Power"),a=Ee(),o=q("input"),this.h()},l(p){e=W(p,"DIV",{class:!0});var c=R(e);r=W(c,"LABEL",{class:!0});var f=R(r);n=W(f,"SPAN",{class:!0});var d=R(n);i=Be(d,"Scaling Power"),d.forEach(M),f.forEach(M),a=Ae(c),o=W(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(M),this.h()},h(){S(n,"class","label-text"),S(r,"class","label"),S(o,"type","range"),S(o,"min","0.5"),S(o,"max","3"),S(o,"step","0.1"),S(o,"class","range range-xs"),S(e,"class","w-full px-2")},m(p,c){se(p,e,c),T(e,r),T(r,n),T(n,i),T(e,a),T(e,o),nn(o,t[0]),s||(l=[_e(o,"change",t[6]),_e(o,"input",t[6])],s=!0)},p(p,c){c&1&&nn(o,p[0])},d(p){p&&M(e),s=!1,zt(l)}}}function p6(t){let e,r,n,i,a,o,s,l,p,c,f,d,g,b,v,m,D;r=new R3({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let B=t[1]&&rd(t);return b=new Bu({}),{c(){e=q("div"),Ve(r.$$.fragment),i=Ee(),a=q("div"),o=q("div"),s=q("label"),l=q("span"),p=Se("Exponential Scaling"),c=Ee(),f=q("input"),d=Ee(),B&&B.c(),g=Ee(),Ve(b.$$.fragment),this.h()},l(w){e=W(w,"DIV",{class:!0});var C=R(e);je(r.$$.fragment,C),C.forEach(M),i=Ae(w),a=W(w,"DIV",{class:!0});var F=R(a);o=W(F,"DIV",{class:!0});var k=R(o);s=W(k,"LABEL",{class:!0});var O=R(s);l=W(O,"SPAN",{class:!0});var A=R(l);p=Be(A,"Exponential Scaling"),A.forEach(M),O.forEach(M),c=Ae(k),f=W(k,"INPUT",{type:!0,class:!0}),k.forEach(M),d=Ae(F),B&&B.l(F),F.forEach(M),g=Ae(w),je(b.$$.fragment,w),this.h()},h(){S(e,"class","w-full h-full"),Ni(()=>t[4].call(e)),S(l,"class","label-text"),S(s,"class","label"),S(f,"type","checkbox"),S(f,"class","toggle toggle-xs"),S(o,"class","w-52 px-2"),S(a,"class","px-2 py-4 pb-0 flex")},m(w,C){se(w,e,C),ze(r,e,null),n=Pa(e,t[4].bind(e)),se(w,i,C),se(w,a,C),T(a,o),T(o,s),T(s,l),T(l,p),T(o,c),T(o,f),f.checked=t[1],T(a,d),B&&B.m(a,null),se(w,g,C),ze(b,w,C),v=!0,m||(D=_e(f,"change",t[5]),m=!0)},p(w,[C]){const F={};C&12&&(F.center=[Math.round(w[2]/2),Math.round(w[3]/2)]),C&12&&(F.radius=Math.round(Math.min(w[2],w[3])/2)-150),r.$set(F),C&2&&(f.checked=w[1]),w[1]?B?B.p(w,C):(B=rd(w),B.c(),B.m(a,null)):B&&(B.d(1),B=null)},i(w){v||(fe(r.$$.fragment,w),fe(b.$$.fragment,w),v=!0)},o(w){ve(r.$$.fragment,w),ve(b.$$.fragment,w),v=!1},d(w){w&&M(e),qe(r),n(),w&&M(i),w&&M(a),B&&B.d(),w&&M(g),qe(b,w),m=!1,D()}}}function g6(t,e,r){let n;Ge(t,ot,f=>r(7,n=f));let i,a,o=n.circleWeightScaling||2,s=qc(n.circleExponentialScaling)?!0:n.circleExponentialScaling;function l(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function p(){s=this.checked,r(1,s)}function c(){o=Np(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&ot.update({...ot.get(),circleExponentialScaling:s,circleWeightScaling:o})},[o,s,i,a,l,p,c]}class v6 extends Xe{constructor(e){super(),et(this,e,g6,p6,tt,{})}}function m6(t){let e,r,n,i,a;return{c(){e=ut("line"),this.h()},l(o){e=st(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),R(e).forEach(M),this.h()},h(){S(e,"x1",r=t[0][0]),S(e,"y1",n=t[0][1]),S(e,"x2",i=t[1][0]),S(e,"y2",a=t[1][1]),S(e,"stroke",t[3]),S(e,"stroke-width",t[2])},m(o,s){se(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&S(e,"x1",r),s&1&&n!==(n=o[0][1])&&S(e,"y1",n),s&2&&i!==(i=o[1][0])&&S(e,"x2",i),s&2&&a!==(a=o[1][1])&&S(e,"y2",a),s&8&&S(e,"stroke",o[3]),s&4&&S(e,"stroke-width",o[2])},i:Me,o:Me,d(o){o&&M(e)}}}function _6(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class b6 extends Xe{constructor(e){super(),et(this,e,_6,m6,tt,{p1:0,p2:1,stroke:2,color:3})}}function nd(t,e,r){const n=t.slice();return n[29]=e[r][0],n[30]=e[r][1],n}function id(t){let e,r,n;e=new Kc({props:{xy:t[0],radius:t[1]}});let i=Object.entries(t[5].weightedPrompts),a=[];for(let s=0;s<i.length;s+=1)a[s]=ad(nd(t,i,s));const o=s=>ve(a[s],1,1,()=>{a[s]=null});return{c(){Ve(e.$$.fragment);for(let s=0;s<a.length;s+=1)a[s].c();r=Ft()},l(s){je(e.$$.fragment,s);for(let l=0;l<a.length;l+=1)a[l].l(s);r=Ft()},m(s,l){ze(e,s,l);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,l);se(s,r,l),n=!0},p(s,l){const p={};if(l[0]&1&&(p.xy=s[0]),l[0]&2&&(p.radius=s[1]),e.$set(p),l[0]&6015){i=Object.entries(s[5].weightedPrompts);let c;for(c=0;c<i.length;c+=1){const f=nd(s,i,c);a[c]?(a[c].p(f,l),fe(a[c],1)):(a[c]=ad(f),a[c].c(),fe(a[c],1),a[c].m(r.parentNode,r))}for(ar(),c=i.length;c<a.length;c+=1)o(c);ur()}},i(s){if(!n){fe(e.$$.fragment,s);for(let l=0;l<i.length;l+=1)fe(a[l]);n=!0}},o(s){ve(e.$$.fragment,s),a=a.filter(Boolean);for(let l=0;l<a.length;l+=1)ve(a[l]);n=!1},d(s){qe(e,s),Cu(a,s),s&&M(r)}}}function ad(t){let e,r,n,i,a,o,s,l,p;e=new b6({props:{p1:t[0],p2:t[6][t[29]].xy}});function c(...b){return t[15](t[29],...b)}function f(...b){return t[16](t[29],...b)}function d(...b){return t[17](t[29],...b)}function g(){return t[18](t[29])}return a=new ka({props:{xy:t[6][t[29]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:g}}),o=new vo({props:{xy:t[9](t[6][t[29]].textXY,Wr(t[3],$t(t[30].text).length,t[4])),color:`rgba(255,255,255,${an(t[6][t[29]].unitWeight)}`,wh:Wr(t[3],$t(t[30].text).length,t[4]),fontSize:t[4],text:$t(t[30].text)}}),{c(){Ve(e.$$.fragment),r=ut("path"),Ve(a.$$.fragment),Ve(o.$$.fragment),this.h()},l(b){je(e.$$.fragment,b),r=st(b,"path",{d:!0,fill:!0}),R(r).forEach(M),je(a.$$.fragment,b),je(o.$$.fragment,b),this.h()},h(){S(r,"d",n=ud(t[0],t[1],t[6][t[29]].angle,t[6][t[29]].angle+t[6][t[29]].angleDiff)),S(r,"fill",i=`rgba(26,47,91,${an(t[6][t[29]].unitWeight)/4}`)},m(b,v){ze(e,b,v),se(b,r,v),ze(a,b,v),ze(o,b,v),s=!0,l||(p=[_e(r,"mousewheel",c),_e(r,"touchstart",f),_e(r,"mousedown",d)],l=!0)},p(b,v){t=b;const m={};v[0]&1&&(m.p1=t[0]),v[0]&96&&(m.p2=t[6][t[29]].xy),e.$set(m),(!s||v[0]&99&&n!==(n=ud(t[0],t[1],t[6][t[29]].angle,t[6][t[29]].angle+t[6][t[29]].angleDiff)))&&S(r,"d",n),(!s||v[0]&96&&i!==(i=`rgba(26,47,91,${an(t[6][t[29]].unitWeight)/4}`))&&S(r,"fill",i);const D={};v[0]&96&&(D.xy=t[6][t[29]].xy),v[0]&4&&(D.radius=t[2]),v[0]&32&&(D.handleMouseDown=g),a.$set(D);const B={};v[0]&120&&(B.xy=t[9](t[6][t[29]].textXY,Wr(t[3],$t(t[30].text).length,t[4]))),v[0]&96&&(B.color=`rgba(255,255,255,${an(t[6][t[29]].unitWeight)}`),v[0]&56&&(B.wh=Wr(t[3],$t(t[30].text).length,t[4])),v[0]&16&&(B.fontSize=t[4]),v[0]&32&&(B.text=$t(t[30].text)),o.$set(B)},i(b){s||(fe(e.$$.fragment,b),fe(a.$$.fragment,b),fe(o.$$.fragment,b),s=!0)},o(b){ve(e.$$.fragment,b),ve(a.$$.fragment,b),ve(o.$$.fragment,b),s=!1},d(b){qe(e,b),b&&M(r),qe(a,b),qe(o,b),l=!1,zt(p)}}}function D6(t){let e,r,n,i,a,o=t[6]&&t[5].weightedPrompts&&id(t);const s=t[14].default,l=yu(s,t,t[13],null);return{c(){e=ut("svg"),o&&o.c(),r=Ee(),l&&l.c(),this.h()},l(p){e=st(p,"svg",{id:!0,class:!0});var c=R(e);o&&o.l(c),c.forEach(M),r=Ae(p),l&&l.l(p),this.h()},h(){S(e,"id","svg"),S(e,"class","w-full h-full")},m(p,c){se(p,e,c),o&&o.m(e,null),se(p,r,c),l&&l.m(p,c),n=!0,i||(a=[_e(e,"mousemove",t[11]),_e(e,"touchmove",t[11]),_e(e,"mouseup",t[7]),_e(e,"touchend",t[7])],i=!0)},p(p,c){p[6]&&p[5].weightedPrompts?o?(o.p(p,c),c[0]&96&&fe(o,1)):(o=id(p),o.c(),fe(o,1),o.m(e,null)):o&&(ar(),ve(o,1,1,()=>{o=null}),ur()),l&&l.p&&(!n||c[0]&8192)&&wu(l,s,p,p[13],n?Au(s,p[13],c,null):Eu(p[13]),null)},i(p){n||(fe(o),fe(l,p),n=!0)},o(p){ve(o),ve(l,p),n=!1},d(p){p&&M(e),o&&o.d(),p&&M(r),l&&l.d(p),i=!1,zt(a)}}}function y6(t,e){if(t.length!==e.length)return!1;const r=t.length;let n=-1;for(let i=0;i<r;i++)if(e[i]===t[0]){n=i;break}if(n===-1)return!1;for(let i=0;i<r;i++)if(t[i]!==e[(i+n)%r])return!1;return!0}function ud(t,e,r,n){const i=t[0]+e*Math.cos(r*Math.PI/180),a=t[1]+e*Math.sin(r*Math.PI/180),o=t[0]+e*Math.cos(n*Math.PI/180),s=t[1]+e*Math.sin(n*Math.PI/180),l=n-r<=180?"0":"1";return`M${t[0]},${t[1]} L${i},${a} A${e},${e} 0 ${l} 1 ${o},${s} Z`}function w6(t,e,r){let n,i;Ge(t,ot,H=>r(5,i=H));let{$$slots:a={},$$scope:o}=e,{center:s=[450,450]}=e,{radius:l=250}=e,{pointRadius:p=10}=e,{textWidth:c=150}=e,{fontSize:f=13}=e,d=[0,0],g=null,b={},v=null,m;function D(H){v=null,m=null,g=null,b={}}function B(H){v=H}function w(H,z){let Q=Ln(H,s,l)[0]-180;Q<0&&(Q+=360);const X=Yc(Ta(z),Q);return Nr(H,X)}function C(H,z){return H?Object.entries(H).reduce((Q,[X,te],le)=>{const be=Q[X]||le*(360/Object.keys(H).length)-90;return Q[X]=zr(be),Q},z):null}function F(H,z){m=z}function k(H){const z=m,Q={...i.pieAngles},X=Object.entries(Q).sort((Ue,We)=>zr(Ue[1])-zr(We[1])).map(Ue=>Ue[0]),te=X.indexOf(z),le=te+1===X.length?0:te+1,be=X[le];b[z]||(b[z]=Q[z]),b[be]||(b[be]=Q[be]);const Oe=Ln(H,s,l)[0]-g,Pe={...Q};Pe[z]=zr(Oe+b[z]),Pe[be]=zr(Oe+b[be]);const Te=Object.entries(Pe).sort((Ue,We)=>zr(Ue[1])-zr(We[1])).map(Ue=>Ue[0]);y6(X,Te)&&r(6,n=U(i.weightedPrompts,s,l,Pe))}function O(H){const z={...i.weightedPrompts[v]},Q=mu(H,s,l),X=zr(Ln(Q,s,l)[0]),te={...i.pieAngles};te[z.id]=X;const le={...i.weightedPrompts};le[v]=z,r(6,n=U(le,s,l,te))}function A(H){H.preventDefault(),d=Pi(H),v?O(d):m?k(d):g=Ln(d,s,l)[0]}function x(H,z){H.preventDefault();const Q={...i.pieAngles},X=Object.entries(Q).sort((we,Oe)=>zr(we[1])-zr(Oe[1])).map(we=>we[0]),te=X.indexOf(z),le=te+1===X.length?0:te+1,be=X[le];Q[z]=zr(Q[z]-H.deltaY/100),Q[be]=zr(Q[be]+H.deltaY/100),r(6,n=U(i.weightedPrompts,s,l,Q))}function U(H,z,Q,X){if(!H||!z||!Q)return null;const te=Object.entries(H).sort((Pe,Te)=>zr(X[Pe[0]])-zr(X[Te[0]])),le=te.map((Pe,Te)=>{const Re=Te+1===te.length?0:Te+1,Ue=X[te[Re][0]]-X[te[Te][0]];return Ue<0?[Pe[0],360+Ue]:[Pe[0],Ue]}),be=Math.max(...le.map(Pe=>Pe[1])),we=le.reduce((Pe,[Te,Re])=>{({...H[Te]});const Ue=X[Te],We=Lr(z,[Ue,1],Q),Ye=Lr(z,[Ue+.5*Re,1],Q),xe=Re/be;return Pe[Te]={xy:We,textXY:Ye,angle:Ue,angleDiff:Re,unitWeight:xe},Pe},{}),Oe={...H};return Object.entries(we).forEach(([Pe,Te])=>{Oe[Pe].pieWeight=Te.unitWeight}),ot.update({...i,weightedPrompts:Oe,pieAngles:X}),we}const K=(H,z)=>x(z,H),J=(H,z)=>F(z,H),j=(H,z)=>F(z,H),V=H=>B(H);return t.$$set=H=>{"center"in H&&r(0,s=H.center),"radius"in H&&r(1,l=H.radius),"pointRadius"in H&&r(2,p=H.pointRadius),"textWidth"in H&&r(3,c=H.textWidth),"fontSize"in H&&r(4,f=H.fontSize),"$$scope"in H&&r(13,o=H.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&32&&Object.keys(i.pieAngles||{}).length!==Object.keys(i.weightedPrompts).length&&ot.update({...i,pieAngles:C(i.weightedPrompts,{})}),t.$$.dirty[0]&35&&r(6,n=U(i.weightedPrompts,s,l,i.pieAngles||C(i.weightedPrompts,{})))},[s,l,p,c,f,i,n,D,B,w,F,A,x,o,a,K,J,j,V]}class E6 extends Xe{constructor(e){super(),et(this,e,w6,D6,tt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4},null,[-1,-1])}}function A6(t){let e,r,n,i,a,o;return r=new E6({props:{center:[Math.round(t[0]/2),Math.round(t[1]/2)],radius:Math.round(Math.min(t[0],t[1])/2)-150}}),a=new Bu({}),{c(){e=q("div"),Ve(r.$$.fragment),i=Ee(),Ve(a.$$.fragment),this.h()},l(s){e=W(s,"DIV",{class:!0});var l=R(e);je(r.$$.fragment,l),l.forEach(M),i=Ae(s),je(a.$$.fragment,s),this.h()},h(){S(e,"class","w-full h-full"),Ni(()=>t[2].call(e))},m(s,l){se(s,e,l),ze(r,e,null),n=Pa(e,t[2].bind(e)),se(s,i,l),ze(a,s,l),o=!0},p(s,[l]){const p={};l&3&&(p.center=[Math.round(s[0]/2),Math.round(s[1]/2)]),l&3&&(p.radius=Math.round(Math.min(s[0],s[1])/2)-150),r.$set(p)},i(s){o||(fe(r.$$.fragment,s),fe(a.$$.fragment,s),o=!0)},o(s){ve(r.$$.fragment,s),ve(a.$$.fragment,s),o=!1},d(s){s&&M(e),qe(r),n(),s&&M(i),qe(a,s)}}}function C6(t,e,r){let n,i;function a(){n=this.clientWidth,i=this.clientHeight,r(0,n),r(1,i)}return[n,i,a]}class F6 extends Xe{constructor(e){super(),et(this,e,C6,A6,tt,{})}}const{window:S6}=oy;function sd(t,e,r){const n=t.slice();return n[26]=e[r][0],n[27]=e[r][1],n}function od(t){let e=[],r=new Map,n,i,a,o=Object.entries(t[1]);const s=l=>l[26];for(let l=0;l<o.length;l+=1){let p=sd(t,o,l),c=s(p);r.set(c,e[l]=cd(c,p))}return i=new ka({props:{xy:t[17](t[0],t[6],t[10],t[9],!0),radius:t[3],color:"rgba(136,157,191, 1)",handleMouseDown:t[22]}}),{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=Ft(),Ve(i.$$.fragment)},l(l){for(let p=0;p<e.length;p+=1)e[p].l(l);n=Ft(),je(i.$$.fragment,l)},m(l,p){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(l,p);se(l,n,p),ze(i,l,p),a=!0},p(l,p){p&132983&&(o=Object.entries(l[1]),ar(),e=Un(e,p,s,1,l,o,r,n.parentNode,ly,cd,n,sd),ur());const c={};p&1601&&(c.xy=l[17](l[0],l[6],l[10],l[9],!0)),p&8&&(c.radius=l[3]),p&128&&(c.handleMouseDown=l[22]),i.$set(c)},i(l){if(!a){for(let p=0;p<o.length;p+=1)fe(e[p]);fe(i.$$.fragment,l),a=!0}},o(l){for(let p=0;p<e.length;p+=1)ve(e[p]);ve(i.$$.fragment,l),a=!1},d(l){for(let p=0;p<e.length;p+=1)e[p].d(l);l&&M(n),qe(i,l)}}}function ld(t){let e,r;return e=new A1({props:{p1:t[17](t[27].xy,t[6],t[10],t[9],!0),p2:t[17](t[0],t[6],t[10],t[9],!0)}}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p(n,i){const a={};i&1602&&(a.p1=n[17](n[27].xy,n[6],n[10],n[9],!0)),i&1601&&(a.p2=n[17](n[0],n[6],n[10],n[9],!0)),e.$set(a)},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function cd(t,e){let r,n,i,a,o,s=e[27].connected&&ld(e);return i=new ka({props:{xy:e[17](e[27].xy,e[6],e[10],e[9],!0),radius:e[2],color:"rgba(136,157,191, 1)"}}),a=new vo({props:{xy:[(e[27].xy[0]*e[8][0]+e[6][0])*e[9]+e[10][0]-Wr(e[4],$t(e[27].text).length,e[5])[0]/2,(e[27].xy[1]*e[8][1]+e[6][1])*e[9]+e[10][1]+e[2]],color:`rgba(255,255,255,${e[27].opacity}`,wh:Wr(e[4],$t(e[27].text).length,e[5]),fontSize:e[5],text:$t(e[27].text)}}),{key:t,first:null,c(){r=Ft(),s&&s.c(),n=Ft(),Ve(i.$$.fragment),Ve(a.$$.fragment),this.h()},l(l){r=Ft(),s&&s.l(l),n=Ft(),je(i.$$.fragment,l),je(a.$$.fragment,l),this.h()},h(){this.first=r},m(l,p){se(l,r,p),s&&s.m(l,p),se(l,n,p),ze(i,l,p),ze(a,l,p),o=!0},p(l,p){e=l,e[27].connected?s?(s.p(e,p),p&2&&fe(s,1)):(s=ld(e),s.c(),fe(s,1),s.m(n.parentNode,n)):s&&(ar(),ve(s,1,1,()=>{s=null}),ur());const c={};p&1602&&(c.xy=e[17](e[27].xy,e[6],e[10],e[9],!0)),p&4&&(c.radius=e[2]),i.$set(c);const f={};p&1910&&(f.xy=[(e[27].xy[0]*e[8][0]+e[6][0])*e[9]+e[10][0]-Wr(e[4],$t(e[27].text).length,e[5])[0]/2,(e[27].xy[1]*e[8][1]+e[6][1])*e[9]+e[10][1]+e[2]]),p&2&&(f.color=`rgba(255,255,255,${e[27].opacity}`),p&50&&(f.wh=Wr(e[4],$t(e[27].text).length,e[5])),p&32&&(f.fontSize=e[5]),p&2&&(f.text=$t(e[27].text)),a.$set(f)},i(l){o||(fe(s),fe(i.$$.fragment,l),fe(a.$$.fragment,l),o=!0)},o(l){ve(s),ve(i.$$.fragment,l),ve(a.$$.fragment,l),o=!1},d(l){l&&M(r),s&&s.d(l),l&&M(n),qe(i,l),qe(a,l)}}}function B6(t){let e,r,n=Object.entries(t[1]).length>0,i,a,o,s=n&&od(t);return{c(){e=q("div"),r=ut("svg"),s&&s.c(),this.h()},l(l){e=W(l,"DIV",{class:!0});var p=R(e);r=st(p,"svg",{id:!0,class:!0});var c=R(r);s&&s.l(c),c.forEach(M),p.forEach(M),this.h()},h(){S(r,"id","svg"),S(r,"class","w-full h-full outline-none"),S(e,"class","w-full h-full")},m(l,p){se(l,e,p),T(e,r),s&&s.m(r,null),i=!0,a||(o=[_e(S6,"keydown",t[16]),_e(r,"mousewheel",t[15]),_e(r,"mousemove",t[13]),_e(r,"touchmove",t[13]),_e(r,"mouseup",t[14]),_e(r,"touchend",t[14]),_e(r,"dblclick",t[12]),_e(r,"focusin",t[23]),_e(r,"focusout",t[24])],a=!0)},p(l,[p]){p&2&&(n=Object.entries(l[1]).length>0),n?s?(s.p(l,p),p&2&&fe(s,1)):(s=od(l),s.c(),fe(s,1),s.m(r,null)):s&&(ar(),ve(s,1,1,()=>{s=null}),ur())},i(l){i||(fe(s),i=!0)},o(l){ve(s),i=!1},d(l){l&&M(e),s&&s.d(),a=!1,zt(o)}}}function O6(t){var e=!1;return t.deltaY?t.deltaY===t.deltaY*-3&&(e=!0):t.deltaMode===0&&(e=!0),e}function M6(t,e,r){let{onMarkerMove:n=j=>{}}=e,{dataPoints:i}=e,{center:a=[100,100]}=e,{dimensions:o=[100,100]}=e,{pointRadius:s=4}=e,{markerRadius:l=10}=e,{textWidth:p=150}=e,{fontSize:c=12}=e,{innerPad:f=100}=e,{markerLocation:d=[.5,.5]}=e,g=!1,b=o,v=[0,0],m=1,D=[0,0],B=!0;function w(j){const V=Pi(j);r(0,d=A(qr(_s(V,D),1/m))),n(d)}function C(j){if(g){const V=Pi(j);r(0,d=A(qr(_s(V,D),1/m))),n(d)}}function F(j){r(7,g=!1)}function k(j){j.preventDefault();const V=O6(j),H=Pi(j),z=qr(_s(H,D),1/m);r(9,m=Math.min(Math.max(m+(V?-1:1)*j.deltaY*-.01,.5),20)),r(10,D=[H[0]-z[0]*m,H[1]-z[1]*m])}function O(j){B&&(j=j||window.event,j.key==="ArrowUp"||j.key==="w"?r(10,D[1]+=10,D):j.key=="ArrowDown"||j.key=="s"?r(10,D[1]-=10,D):j.key=="ArrowLeft"||j.key=="a"?r(10,D[0]+=10,D):(j.key=="ArrowRight"||j.key=="d")&&r(10,D[0]-=10,D))}function A(j){let V=_s(j,v);return[V[0]/b[0],V[1]/b[1]]}function x(j,V,H,z,Q=!1){let X=j;return Q&&(X=Nr(V,[j[0]*b[0],j[1]*b[1]])),Nr(qr(X,z),H)}const U=()=>r(7,g=!0),K=()=>r(11,B=!0),J=()=>r(11,B=!1);return t.$$set=j=>{"onMarkerMove"in j&&r(18,n=j.onMarkerMove),"dataPoints"in j&&r(1,i=j.dataPoints),"center"in j&&r(19,a=j.center),"dimensions"in j&&r(20,o=j.dimensions),"pointRadius"in j&&r(2,s=j.pointRadius),"markerRadius"in j&&r(3,l=j.markerRadius),"textWidth"in j&&r(4,p=j.textWidth),"fontSize"in j&&r(5,c=j.fontSize),"innerPad"in j&&r(21,f=j.innerPad),"markerLocation"in j&&r(0,d=j.markerLocation)},t.$$.update=()=>{if(t.$$.dirty&3145792){const j=Math.min(...o),V=o[0]===j,H=o[1]===j;r(6,v=[Math.max(V?0:(o[0]-j)/2,f),Math.max(H?0:(o[1]-j)/2,f)]),r(8,b=[o[0]-2*v[0],o[1]-2*v[1]])}},[d,i,s,l,p,c,v,g,b,m,D,B,w,C,F,k,O,x,n,a,o,f,U,K,J]}class C1 extends Xe{constructor(e){super(),et(this,e,M6,B6,tt,{onMarkerMove:18,dataPoints:1,center:19,dimensions:20,pointRadius:2,markerRadius:3,textWidth:4,fontSize:5,innerPad:21,markerLocation:0})}}function fd(t){let e,r,n,i,a,o,s,l;return{c(){e=q("div"),r=q("label"),n=q("span"),i=Se("Scaling Power"),a=Ee(),o=q("input"),this.h()},l(p){e=W(p,"DIV",{class:!0});var c=R(e);r=W(c,"LABEL",{class:!0});var f=R(r);n=W(f,"SPAN",{class:!0});var d=R(n);i=Be(d,"Scaling Power"),d.forEach(M),f.forEach(M),a=Ae(c),o=W(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(M),this.h()},h(){S(n,"class","label-text"),S(r,"class","label"),o.value=t[2],S(o,"type","range"),S(o,"min","0.5"),S(o,"max","3"),S(o,"step","0.1"),S(o,"class","range range-sm"),S(e,"class","w-full px-2")},m(p,c){se(p,e,c),T(e,r),T(r,n),T(n,i),T(e,a),T(e,o),s||(l=_e(o,"change",t[11]),s=!0)},p(p,c){c&4&&(o.value=p[2])},d(p){p&&M(e),s=!1,l()}}}function P6(t){let e,r,n,i,a,o,s,l,p,c,f,d,g,b,v,m,D,B,w,C,F,k,O,A,x,U,K,J,j,V,H,z,Q,X,te,le,be,we,Oe,Pe,Te,Re,Ue,We=t[0]&&fd(t);return{c(){e=q("div"),r=q("div"),n=q("label"),i=q("span"),a=Se("Exponential Scaling"),o=Ee(),s=q("input"),l=Ee(),We&&We.c(),p=Ee(),c=q("div"),f=q("label"),d=q("span"),g=Se("# Prompts"),b=Ee(),v=q("input"),m=Ee(),D=q("div"),B=q("div"),w=q("label"),C=q("span"),F=Se("Clusters"),k=Ee(),O=q("div"),A=q("button"),x=Se("0"),U=Ee(),K=q("button"),J=Se("2"),j=Ee(),V=q("button"),H=Se("4"),z=Ee(),Q=q("button"),X=Se("6"),te=Ee(),le=q("button"),be=Se("8"),we=Ee(),Oe=q("div"),Pe=q("button"),Te=Se("Shuffle"),this.h()},l(Ye){e=W(Ye,"DIV",{class:!0});var xe=R(e);r=W(xe,"DIV",{class:!0});var Dt=R(r);n=W(Dt,"LABEL",{class:!0});var Et=R(n);i=W(Et,"SPAN",{class:!0});var ht=R(i);a=Be(ht,"Exponential Scaling"),ht.forEach(M),Et.forEach(M),o=Ae(Dt),s=W(Dt,"INPUT",{type:!0,class:!0}),Dt.forEach(M),l=Ae(xe),We&&We.l(xe),p=Ae(xe),c=W(xe,"DIV",{class:!0});var lt=R(c);f=W(lt,"LABEL",{class:!0});var Pt=R(f);d=W(Pt,"SPAN",{class:!0});var wr=R(d);g=Be(wr,"# Prompts"),wr.forEach(M),Pt.forEach(M),b=Ae(lt),v=W(lt,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),lt.forEach(M),m=Ae(xe),D=W(xe,"DIV",{class:!0});var It=R(D);B=W(It,"DIV",{class:!0});var dr=R(B);w=W(dr,"LABEL",{class:!0});var Ze=R(w);C=W(Ze,"SPAN",{class:!0});var er=R(C);F=Be(er,"Clusters"),er.forEach(M),Ze.forEach(M),k=Ae(dr),O=W(dr,"DIV",{class:!0});var Nt=R(O);A=W(Nt,"BUTTON",{class:!0});var Jr=R(A);x=Be(Jr,"0"),Jr.forEach(M),U=Ae(Nt),K=W(Nt,"BUTTON",{class:!0});var G=R(K);J=Be(G,"2"),G.forEach(M),j=Ae(Nt),V=W(Nt,"BUTTON",{class:!0});var Z=R(V);H=Be(Z,"4"),Z.forEach(M),z=Ae(Nt),Q=W(Nt,"BUTTON",{class:!0});var ie=R(Q);X=Be(ie,"6"),ie.forEach(M),te=Ae(Nt),le=W(Nt,"BUTTON",{class:!0});var de=R(le);be=Be(de,"8"),de.forEach(M),Nt.forEach(M),dr.forEach(M),It.forEach(M),we=Ae(xe),Oe=W(xe,"DIV",{class:!0});var ue=R(Oe);Pe=W(ue,"BUTTON",{class:!0});var me=R(Pe);Te=Be(me,"Shuffle"),me.forEach(M),ue.forEach(M),xe.forEach(M),this.h()},h(){S(i,"class","label-text"),S(n,"class","label"),S(s,"type","checkbox"),S(s,"class","toggle toggle-sm"),s.checked=t[0],S(r,"class","min-w-max px-2"),S(d,"class","label-text"),S(f,"class","label"),v.value=t[4],S(v,"type","range"),S(v,"min","1"),S(v,"max",t[5]),S(v,"step","1"),S(v,"class","range range-sm"),S(c,"class","w-full px-2"),S(C,"class","label-text"),S(w,"class","label pb-1 m-0"),S(A,"class","btn btn-xs"),Qe(A,"btn-active",t[7]===0),S(K,"class","btn btn-xs"),Qe(K,"btn-active",t[7]===2),Qe(K,"btn-disabled",t[9]<2),S(V,"class","btn btn-xs"),Qe(V,"btn-active",t[7]===4),Qe(V,"btn-disabled",t[9]<4),S(Q,"class","btn btn-xs"),Qe(Q,"btn-active",t[7]===6),Qe(Q,"btn-disabled",t[9]<6),S(le,"class","btn btn-xs"),Qe(le,"btn-active",t[7]===8),Qe(le,"btn-disabled",t[9]<8),S(O,"class","btn-group btn-group-horizontal p-0"),S(B,"class",""),S(D,"class",""),S(Pe,"class","btn btn-xs btn-primary"),S(Oe,"class","w-32 px-2 pb-1 flex flex-col justify-end"),S(e,"class","px-2 py-4 pb-0 flex")},m(Ye,xe){se(Ye,e,xe),T(e,r),T(r,n),T(n,i),T(i,a),T(r,o),T(r,s),T(e,l),We&&We.m(e,null),T(e,p),T(e,c),T(c,f),T(f,d),T(d,g),T(c,b),T(c,v),T(e,m),T(e,D),T(D,B),T(B,w),T(w,C),T(C,F),T(B,k),T(B,O),T(O,A),T(A,x),T(O,U),T(O,K),T(K,J),T(O,j),T(O,V),T(V,H),T(O,z),T(O,Q),T(Q,X),T(O,te),T(O,le),T(le,be),T(e,we),T(e,Oe),T(Oe,Pe),T(Pe,Te),Re||(Ue=[_e(s,"change",function(){Sa(t[1])&&t[1].apply(this,arguments)}),_e(v,"change",t[12]),_e(A,"click",t[13]),_e(K,"click",t[14]),_e(V,"click",t[15]),_e(Q,"click",t[16]),_e(le,"click",t[17]),_e(Pe,"click",function(){Sa(t[10])&&t[10].apply(this,arguments)})],Re=!0)},p(Ye,[xe]){t=Ye,xe&1&&(s.checked=t[0]),t[0]?We?We.p(t,xe):(We=fd(t),We.c(),We.m(e,p)):We&&(We.d(1),We=null),xe&16&&(v.value=t[4]),xe&32&&S(v,"max",t[5]),xe&128&&Qe(A,"btn-active",t[7]===0),xe&128&&Qe(K,"btn-active",t[7]===2),xe&512&&Qe(K,"btn-disabled",t[9]<2),xe&128&&Qe(V,"btn-active",t[7]===4),xe&512&&Qe(V,"btn-disabled",t[9]<4),xe&128&&Qe(Q,"btn-active",t[7]===6),xe&512&&Qe(Q,"btn-disabled",t[9]<6),xe&128&&Qe(le,"btn-active",t[7]===8),xe&512&&Qe(le,"btn-disabled",t[9]<8)},i:Me,o:Me,d(Ye){Ye&&M(e),We&&We.d(),Re=!1,zt(Ue)}}}function k6(t,e,r){let{useExponentialScaling:n=!1}=e,{toggleExponentialScaling:i=()=>{}}=e,{exponentialScaling:a=2}=e,{setExponentialScaling:o=()=>{}}=e,{connectionLimit:s=1}=e,{maxConnectionLimit:l=1}=e,{setConnectionLimit:p=()=>{}}=e,{clusterCount:c=0}=e,{setClusterCount:f=()=>{}}=e,{maxClusterCount:d=0}=e,{onShuffle:g=()=>{}}=e;const b=F=>o(parseFloat(F.target.value)),v=F=>p(parseInt(F.target.value)),m=()=>f(0),D=()=>f(2),B=()=>f(4),w=()=>f(6),C=()=>f(8);return t.$$set=F=>{"useExponentialScaling"in F&&r(0,n=F.useExponentialScaling),"toggleExponentialScaling"in F&&r(1,i=F.toggleExponentialScaling),"exponentialScaling"in F&&r(2,a=F.exponentialScaling),"setExponentialScaling"in F&&r(3,o=F.setExponentialScaling),"connectionLimit"in F&&r(4,s=F.connectionLimit),"maxConnectionLimit"in F&&r(5,l=F.maxConnectionLimit),"setConnectionLimit"in F&&r(6,p=F.setConnectionLimit),"clusterCount"in F&&r(7,c=F.clusterCount),"setClusterCount"in F&&r(8,f=F.setClusterCount),"maxClusterCount"in F&&r(9,d=F.maxClusterCount),"onShuffle"in F&&r(10,g=F.onShuffle)},[n,i,a,o,s,l,p,c,f,d,g,b,v,m,D,B,w,C]}class F1 extends Xe{constructor(e){super(),et(this,e,k6,P6,tt,{useExponentialScaling:0,toggleExponentialScaling:1,exponentialScaling:2,setExponentialScaling:3,connectionLimit:4,maxConnectionLimit:5,setConnectionLimit:6,clusterCount:7,setClusterCount:8,maxClusterCount:9,onShuffle:10})}}const kc=sr({});var Tc={},T6={get exports(){return Tc},set exports(t){Tc=t}},qs={},I6={get exports(){return qs},set exports(t){qs=t}},hd;function x6(){return hd||(hd=1,function(t){function e(r,n,i,a){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,i,a)}e.prototype.run=function(r,n,i,a){this._init(r,n,i,a);for(var o=0;o<this._datasetLength;o++)if(this._visited[o]!==1){this._visited[o]=1;var s=this._regionQuery(o);if(s.length<this.minPts)this.noise.push(o);else{var l=this.clusters.length;this.clusters.push([]),this._addToCluster(o,l),this._expandCluster(l,s)}}return this.clusters},e.prototype._init=function(r,n,i,a){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),i&&(this.minPts=i),a&&(this.distance=a)},e.prototype._expandCluster=function(r,n){for(var i=0;i<n.length;i++){var a=n[i];if(this._visited[a]!==1){this._visited[a]=1;var o=this._regionQuery(a);o.length>=this.minPts&&(n=this._mergeArrays(n,o))}this._assigned[a]!==1&&this._addToCluster(a,r)}},e.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1},e.prototype._regionQuery=function(r){for(var n=[],i=0;i<this._datasetLength;i++){var a=this.distance(this.dataset[r],this.dataset[i]);a<this.epsilon&&n.push(i)}return n},e.prototype._mergeArrays=function(r,n){for(var i=n.length,a=0;a<i;a++){var o=n[a];r.indexOf(o)<0&&r.push(o)}return r},e.prototype._euclideanDistance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;)i+=(r[a]-n[a])*(r[a]-n[a]);return Math.sqrt(i)},t.exports&&(t.exports=e)}(I6)),qs}var Ws={},N6={get exports(){return Ws},set exports(t){Ws=t}},dd;function L6(){return dd||(dd=1,function(t){function e(r,n,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,i)}e.prototype.init=function(r,n,i){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof i<"u"&&(this.distance=i)},e.prototype.run=function(r,n){this.init(r,n);for(var i=this.dataset.length,a=0;a<this.k;a++)this.centroids[a]=this.randomCentroid();for(var o=!0;o;){o=this.assign();for(var s=0;s<this.k;s++){for(var l=new Array(d),p=0,c=0;c<d;c++)l[c]=0;for(var f=0;f<i;f++){var d=this.dataset[f].length;if(s===this.assignments[f]){for(var c=0;c<d;c++)l[c]+=this.dataset[f][c];p++}}if(p>0){for(var c=0;c<d;c++)l[c]/=p;this.centroids[s]=l}else this.centroids[s]=this.randomCentroid(),o=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,i;do i=Math.round(Math.random()*r),n=this.dataset[i];while(this.centroids.indexOf(n)>=0);return n},e.prototype.assign=function(){for(var r=!1,n=this.dataset.length,i,a=0;a<n;a++)i=this.argmin(this.dataset[a],this.centroids,this.distance),i!=this.assignments[a]&&(this.assignments[a]=i,r=!0);return r},e.prototype.getClusters=function(){for(var r=new Array(this.k),n,i=0;i<this.assignments.length;i++)n=this.assignments[i],typeof r[n]>"u"&&(r[n]=[]),r[n].push(i);return r},e.prototype.argmin=function(r,n,i){for(var a=Number.MAX_VALUE,o=0,s=n.length,l,p=0;p<s;p++)l=i(r,n[p]),l<a&&(a=l,o=p);return o},e.prototype.distance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;){var o=r[a]-n[a];i+=o*o}return Math.sqrt(i)},t.exports&&(t.exports=e)}(N6)),Ws}var Hs={},R6={get exports(){return Hs},set exports(t){Hs=t}},$s={},U6={get exports(){return $s},set exports(t){$s=t}},pd;function S1(){return pd||(pd=1,function(t){function e(r,n,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,i)}e.prototype.insert=function(r,n){for(var i=this._queue.length,a=i;a--;){var o=this._priorities[a];this._sorting==="desc"?n>o&&(i=a):n<o&&(i=a)}this._insertAt(r,n,i)},e.prototype.remove=function(r){for(var n=this._queue.length;n--;){var i=this._queue[n];if(r===i){this._queue.splice(n,1),this._priorities.splice(n,1);break}}},e.prototype.forEach=function(r){this._queue.forEach(r)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(r){return this._priorities[r]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,i=this._queue.length;n<i;n++)r.push([this._queue[n],this._priorities[n]]);return r},e.prototype._init=function(r,n,i){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var a=0;a<r.length;a++)this.insert(r[a],n[a])}i&&(this._sorting=i)},e.prototype._insertAt=function(r,n,i){this._queue.length===i?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(i,0,r),this._priorities.splice(i,0,n))},t.exports&&(t.exports=e)}(U6)),$s}var gd;function V6(){return gd||(gd=1,function(t){if(t.exports)var e=S1();function r(n,i,a,o){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,i,a,o)}r.prototype.run=function(n,i,a,o){this._init(n,i,a,o);for(var s=0,l=this.dataset.length;s<l;s++)if(this._processed[s]!==1){this._processed[s]=1,this.clusters.push([s]);var p=this.clusters.length-1;this._orderedList.push(s);var c=new e(null,null,"asc"),f=this._regionQuery(s);this._distanceToCore(s)!==void 0&&(this._updateQueue(s,f,c),this._expandCluster(p,c))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var n=[],i=0,a=this._orderedList.length;i<a;i++){var o=this._orderedList[i],s=this._reachability[o];n.push([o,s])}return n},r.prototype._init=function(n,i,a,o){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}i&&(this.epsilon=i),a&&(this.minPts=a),o&&(this.distance=o)},r.prototype._updateQueue=function(n,i,a){var o=this;this._coreDistance=this._distanceToCore(n),i.forEach(function(s){if(o._processed[s]===void 0){var l=o.distance(o.dataset[n],o.dataset[s]),p=Math.max(o._coreDistance,l);o._reachability[s]===void 0?(o._reachability[s]=p,a.insert(s,p)):p<o._reachability[s]&&(o._reachability[s]=p,a.remove(s),a.insert(s,p))}})},r.prototype._expandCluster=function(n,i){for(var a=i.getElements(),o=0,s=a.length;o<s;o++){var l=a[o];if(this._processed[l]===void 0){var p=this._regionQuery(l);this._processed[l]=1,this.clusters[n].push(l),this._orderedList.push(l),this._distanceToCore(l)!==void 0&&(this._updateQueue(l,p,i),this._expandCluster(n,i))}}},r.prototype._distanceToCore=function(n){for(var i=this.epsilon,a=0;a<i;a++){var o=this._regionQuery(n,a);if(o.length>=this.minPts)return a}},r.prototype._regionQuery=function(n,i){i=i||this.epsilon;for(var a=[],o=0,s=this.dataset.length;o<s;o++)this.distance(this.dataset[n],this.dataset[o])<i&&a.push(o);return a},r.prototype._euclideanDistance=function(n,i){for(var a=0,o=Math.min(n.length,i.length);o--;)a+=(n[o]-i[o])*(n[o]-i[o]);return Math.sqrt(a)},t.exports&&(t.exports=r)}(R6)),Hs}(function(t){t.exports&&(t.exports={DBSCAN:x6(),KMEANS:L6(),OPTICS:V6(),PriorityQueue:S1()})})(T6);var Gs={},j6={get exports(){return Gs},set exports(t){Gs=t}},Ks={},z6={get exports(){return Ks},set exports(t){Ks=t}},Fa=typeof Reflect=="object"?Reflect:null,vd=Fa&&typeof Fa.apply=="function"?Fa.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Fs;Fa&&typeof Fa.ownKeys=="function"?Fs=Fa.ownKeys:Object.getOwnPropertySymbols?Fs=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Fs=function(e){return Object.getOwnPropertyNames(e)};function q6(t){console&&console.warn&&console.warn(t)}var B1=Number.isNaN||function(e){return e!==e};function Lt(){Lt.init.call(this)}z6.exports=Lt;Ks.once=G6;Lt.EventEmitter=Lt;Lt.prototype._events=void 0;Lt.prototype._eventsCount=0;Lt.prototype._maxListeners=void 0;var md=10;function bo(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Lt,"defaultMaxListeners",{enumerable:!0,get:function(){return md},set:function(t){if(typeof t!="number"||t<0||B1(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");md=t}});Lt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Lt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||B1(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function O1(t){return t._maxListeners===void 0?Lt.defaultMaxListeners:t._maxListeners}Lt.prototype.getMaxListeners=function(){return O1(this)};Lt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[e];if(l===void 0)return!1;if(typeof l=="function")vd(l,this,r);else for(var p=l.length,c=I1(l,p),n=0;n<p;++n)vd(c[n],this,r);return!0};function M1(t,e,r,n){var i,a,o;if(bo(r),a=t._events,a===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),o=a[e]),o===void 0)o=a[e]=r,++t._eventsCount;else if(typeof o=="function"?o=a[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=O1(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=o.length,q6(s)}return t}Lt.prototype.addListener=function(e,r){return M1(this,e,r,!1)};Lt.prototype.on=Lt.prototype.addListener;Lt.prototype.prependListener=function(e,r){return M1(this,e,r,!0)};function W6(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function P1(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=W6.bind(n);return i.listener=r,n.wrapFn=i,i}Lt.prototype.once=function(e,r){return bo(r),this.on(e,P1(this,e,r)),this};Lt.prototype.prependOnceListener=function(e,r){return bo(r),this.prependListener(e,P1(this,e,r)),this};Lt.prototype.removeListener=function(e,r){var n,i,a,o,s;if(bo(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){s=n[o].listener,a=o;break}if(a<0)return this;a===0?n.shift():H6(n,a),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this};Lt.prototype.off=Lt.prototype.removeListener;Lt.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var a=Object.keys(n),o;for(i=0;i<a.length;++i)o=a[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function k1(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?$6(i):I1(i,i.length)}Lt.prototype.listeners=function(e){return k1(this,e,!0)};Lt.prototype.rawListeners=function(e){return k1(this,e,!1)};Lt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):T1.call(t,e)};Lt.prototype.listenerCount=T1;function T1(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Lt.prototype.eventNames=function(){return this._eventsCount>0?Fs(this._events):[]};function I1(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function H6(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function $6(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function G6(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,a),n(o)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}x1(t,e,a,{once:!0}),e!=="error"&&K6(t,i,{once:!0})})}function K6(t,e,r){typeof t.on=="function"&&x1(t,"error",e,r)}function x1(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(a){n.once&&t.removeEventListener(e,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}function Y6(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}var Z6=Y6;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var J6=function(t){return t!=null&&(N1(t)||Q6(t)||!!t._isBuffer)};function N1(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Q6(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&N1(t.slice(0,0))}var X6=Z6,eC=J6,tC=typeof Float64Array<"u";function rC(t,e){return t[0]-e[0]}function nC(){var t=this.stride,e=new Array(t.length),r;for(r=0;r<e.length;++r)e[r]=[Math.abs(t[r]),r];e.sort(rC);var n=new Array(e.length);for(r=0;r<n.length;++r)n[r]=e[r][1];return n}function iC(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n=t==="generic";if(e===-1){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",v=new Function(i);return v()}else if(e===0){var i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",v=new Function("TrivialArray",i);return v(Ys[t][0])}var i=["'use strict'"],a=X6(e),o=a.map(function(m){return"i"+m}),s="this.offset+"+a.map(function(m){return"this.stride["+m+"]*i"+m}).join("+"),l=a.map(function(m){return"b"+m}).join(","),p=a.map(function(m){return"c"+m}).join(",");i.push("function "+r+"(a,"+l+","+p+",d){this.data=a","this.shape=["+l+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(m){return"this.shape["+m+"]"}).join("*"),"}})"),e===1?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+r+"_order(){"),e===2?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+o.join(",")+",v){"),n?i.push("return this.data.set("+s+",v)}"):i.push("return this.data["+s+"]=v}"),i.push("proto.get=function "+r+"_get("+o.join(",")+"){"),n?i.push("return this.data.get("+s+")}"):i.push("return this.data["+s+"]}"),i.push("proto.index=function "+r+"_index(",o.join(),"){return "+s+"}"),i.push("proto.hi=function "+r+"_hi("+o.join(",")+"){return new "+r+"(this.data,"+a.map(function(m){return["(typeof i",m,"!=='number'||i",m,"<0)?this.shape[",m,"]:i",m,"|0"].join("")}).join(",")+","+a.map(function(m){return"this.stride["+m+"]"}).join(",")+",this.offset)}");var c=a.map(function(m){return"a"+m+"=this.shape["+m+"]"}),f=a.map(function(m){return"c"+m+"=this.stride["+m+"]"});i.push("proto.lo=function "+r+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+c.join(",")+","+f.join(","));for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");i.push("return new "+r+"(this.data,"+a.map(function(m){return"a"+m}).join(",")+","+a.map(function(m){return"c"+m}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+o.join(",")+"){var "+a.map(function(m){return"a"+m+"=this.shape["+m+"]"}).join(",")+","+a.map(function(m){return"b"+m+"=this.stride["+m+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");i.push("return new "+r+"(this.data,"+a.map(function(m){return"a"+m}).join(",")+","+a.map(function(m){return"b"+m}).join(",")+",c)}");for(var g=new Array(e),b=new Array(e),d=0;d<e;++d)g[d]="a[i"+d+"]",b[d]="b[i"+d+"]";i.push("proto.transpose=function "+r+"_transpose("+o+"){"+o.map(function(m,D){return m+"=("+m+"===undefined?"+D+":"+m+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+b.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+o+"){var a=[],b=[],c=this.offset");for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(m){return"shape["+m+"]"}).join(",")+","+a.map(function(m){return"stride["+m+"]"}).join(",")+",offset)}");var v=new Function("CTOR_LIST","ORDER",i.join(`
`));return v(Ys[t],nC)}function aC(t){if(eC(t))return"buffer";if(tC)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var Ys={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function uC(t,e,r,n){if(t===void 0){var p=Ys.array[0];return p([])}else typeof t=="number"&&(t=[t]);e===void 0&&(e=[t.length]);var i=e.length;if(r===void 0){r=new Array(i);for(var a=i-1,o=1;a>=0;--a)r[a]=o,o*=e[a]}if(n===void 0){n=0;for(var a=0;a<i;++a)r[a]<0&&(n-=(e[a]-1)*r[a])}for(var s=aC(t),l=Ys[s];l.length<=i+1;)l.push(iC(s,l.length-1));var p=l[i+1];return p(t,e,r,n)}var Ia=uC,Do={};function sC(t,e){for(var r=1,n=t.length,i=t[0],a=t[0],o=1;o<n;++o)if(a=i,i=t[o],e(i,a)){if(o===r){r++;continue}t[r++]=i}return t.length=r,t}function oC(t){for(var e=1,r=t.length,n=t[0],i=t[0],a=1;a<r;++a,i=n)if(i=n,n=t[a],n!==i){if(a===e){e++;continue}t[e++]=n}return t.length=e,t}function lC(t,e,r){return t.length===0?t:e?(r||t.sort(e),sC(t,e)):(r||t.sort(),oC(t))}var L1=lC,cC=L1;function R1(t,e,r){var n=t.length,i=e.arrayArgs.length,a=e.indexArgs.length>0,o=[],s=[],l=0,p=0,c,f;for(c=0;c<n;++c)s.push(["i",c,"=0"].join(""));for(f=0;f<i;++f)for(c=0;c<n;++c)p=l,l=t[c],c===0?s.push(["d",f,"s",c,"=t",f,"p",l].join("")):s.push(["d",f,"s",c,"=(t",f,"p",l,"-s",p,"*t",f,"p",p,")"].join(""));for(s.length>0&&o.push("var "+s.join(",")),c=n-1;c>=0;--c)l=t[c],o.push(["for(i",c,"=0;i",c,"<s",l,";++i",c,"){"].join(""));for(o.push(r),c=0;c<n;++c){for(p=l,l=t[c],f=0;f<i;++f)o.push(["p",f,"+=d",f,"s",c].join(""));a&&(c>0&&o.push(["index[",p,"]-=s",p].join("")),o.push(["++index[",l,"]"].join(""))),o.push("}")}return o.join(`
`)}function fC(t,e,r,n){for(var i=e.length,a=r.arrayArgs.length,o=r.blockSize,s=r.indexArgs.length>0,l=[],p=0;p<a;++p)l.push(["var offset",p,"=p",p].join(""));for(var p=t;p<i;++p)l.push(["for(var j"+p+"=SS[",e[p],"]|0;j",p,">0;){"].join("")),l.push(["if(j",p,"<",o,"){"].join("")),l.push(["s",e[p],"=j",p].join("")),l.push(["j",p,"=0"].join("")),l.push(["}else{s",e[p],"=",o].join("")),l.push(["j",p,"-=",o,"}"].join("")),s&&l.push(["index[",e[p],"]=j",p].join(""));for(var p=0;p<a;++p){for(var c=["offset"+p],f=t;f<i;++f)c.push(["j",f,"*t",p,"p",e[f]].join(""));l.push(["p",p,"=(",c.join("+"),")"].join(""))}l.push(R1(e,r,n));for(var p=t;p<i;++p)l.push("}");return l.join(`
`)}function hC(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}function ql(t,e,r){for(var n=t.body,i=[],a=[],o=0;o<t.args.length;++o){var s=t.args[o];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),p="",c=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var f=e.offsetArgIndex.indexOf(o),d=e.offsetArgs[f];c=d.array,p="+q"+f;case"array":p="p"+c+p;var g="l"+o,b="a"+c;if(e.arrayBlockIndices[c]===0)s.count===1?r[c]==="generic"?s.lvalue?(i.push(["var ",g,"=",b,".get(",p,")"].join("")),n=n.replace(l,g),a.push([b,".set(",p,",",g,")"].join(""))):n=n.replace(l,[b,".get(",p,")"].join("")):n=n.replace(l,[b,"[",p,"]"].join("")):r[c]==="generic"?(i.push(["var ",g,"=",b,".get(",p,")"].join("")),n=n.replace(l,g),s.lvalue&&a.push([b,".set(",p,",",g,")"].join(""))):(i.push(["var ",g,"=",b,"[",p,"]"].join("")),n=n.replace(l,g),s.lvalue&&a.push([b,"[",p,"]=",g].join("")));else{for(var v=[s.name],m=[p],D=0;D<Math.abs(e.arrayBlockIndices[c]);D++)v.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(D+1)+"*t"+c+"b"+D);if(l=new RegExp(v.join(""),"g"),p=m.join("+"),r[c]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(l,[b,"[",p,"]"].join(""))}break;case"scalar":n=n.replace(l,"Y"+e.scalarArgs.indexOf(o));break;case"index":n=n.replace(l,"index");break;case"shape":n=n.replace(l,"shape");break}}}return[i.join(`
`),n,a.join(`
`)].join(`
`).trim()}function dC(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],a=i.match(/\d+/);a?a=a[0]:a="",i.charAt(0)===0?e[n]="u"+i.charAt(1)+a:e[n]=i.charAt(0)+a,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}function pC(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,n=new Array(t.arrayArgs.length),i=new Array(t.arrayArgs.length),a=0;a<t.arrayArgs.length;++a)i[a]=e[2*a],n[a]=e[2*a+1];for(var o=[],s=[],l=[],p=[],c=[],a=0;a<t.arrayArgs.length;++a){t.arrayBlockIndices[a]<0?(l.push(0),p.push(r),o.push(r),s.push(r+t.arrayBlockIndices[a])):(l.push(t.arrayBlockIndices[a]),p.push(t.arrayBlockIndices[a]+r),o.push(0),s.push(t.arrayBlockIndices[a]));for(var f=[],d=0;d<n[a].length;d++)l[a]<=n[a][d]&&n[a][d]<p[a]&&f.push(n[a][d]-l[a]);c.push(f)}for(var g=["SS"],b=["'use strict'"],v=[],d=0;d<r;++d)v.push(["s",d,"=SS[",d,"]"].join(""));for(var a=0;a<t.arrayArgs.length;++a){g.push("a"+a),g.push("t"+a),g.push("p"+a);for(var d=0;d<r;++d)v.push(["t",a,"p",d,"=t",a,"[",l[a]+d,"]"].join(""));for(var d=0;d<Math.abs(t.arrayBlockIndices[a]);++d)v.push(["t",a,"b",d,"=t",a,"[",o[a]+d,"]"].join(""))}for(var a=0;a<t.scalarArgs.length;++a)g.push("Y"+a);if(t.shapeArgs.length>0&&v.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var m=new Array(r),a=0;a<r;++a)m[a]="0";v.push(["index=[",m.join(","),"]"].join(""))}for(var a=0;a<t.offsetArgs.length;++a){for(var D=t.offsetArgs[a],B=[],d=0;d<D.offset.length;++d)D.offset[d]!==0&&(D.offset[d]===1?B.push(["t",D.array,"p",d].join("")):B.push([D.offset[d],"*t",D.array,"p",d].join("")));B.length===0?v.push("q"+a+"=0"):v.push(["q",a,"=",B.join("+")].join(""))}var w=cC([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));v=v.concat(w),v.length>0&&b.push("var "+v.join(","));for(var a=0;a<t.arrayArgs.length;++a)b.push("p"+a+"|=0");t.pre.body.length>3&&b.push(ql(t.pre,t,i));var C=ql(t.body,t,i),F=hC(c);F<r?b.push(fC(F,c[0],t,C)):b.push(R1(c[0],t,C)),t.post.body.length>3&&b.push(ql(t.post,t,i)),t.debug&&console.log("-----Generated cwise routine for ",e,`:
`+b.join(`
`)+`
----------`);var k=[t.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",F,dC(i)].join(""),O=new Function(["function ",k,"(",g.join(","),"){",b.join(`
`),"} return ",k].join(""));return O()}var gC=pC,vC=gC;function mC(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var i=[],a=[],o=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],s=[],l=[],p=0;p<t.arrayArgs.length;++p){var c=t.arrayArgs[p];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),i.push("t"+c),i.push("r"+c),a.push("t"+c),a.push("r"+c+".join()"),o.push("array"+c+".data"),o.push("array"+c+".stride"),o.push("array"+c+".offset|0"),p>0&&(s.push("array"+t.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[p]))),l.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[p])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var p=0;p<t.scalarArgs.length;++p)o.push("scalar"+t.scalarArgs[p]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",o.join(","),")}"].join("")),t.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var f=new Function("compile",e.join(`
`));return f(vC.bind(void 0,t))}var _C=mC,bC=_C;function DC(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function yC(t){var e=new DC;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var n=0;n<r.length;++n){var i=r[n];if(i==="array"||typeof i=="object"&&i.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(i==="scalar")e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if(i==="index"){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(i==="shape"){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof i=="object"&&i.offset)e.argTypes[n]="offset",e.offsetArgs.push({array:i.array,offset:i.offset}),e.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+r[n])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,bC(e)}var ef=yC;(function(t){var e=ef,r={body:"",args:[],thisVars:[],localVars:[]};function n(d){if(!d)return r;for(var g=0;g<d.args.length;++g){var b=d.args[g];g===0?d.args[g]={name:b,lvalue:!0,rvalue:!!d.rvalue,count:d.count||1}:d.args[g]={name:b,lvalue:!1,rvalue:!0,count:1}}return d.thisVars||(d.thisVars=[]),d.localVars||(d.localVars=[]),d}function i(d){return e({args:d.args,pre:n(d.pre),body:n(d.body),post:n(d.proc),funcName:d.funcName})}function a(d){for(var g=[],b=0;b<d.args.length;++b)g.push("a"+b);var v=new Function("P",["return function ",d.funcName,"_ndarrayops(",g.join(","),") {P(",g.join(","),");return a0}"].join(""));return v(i(d))}var o={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var d in o){var g=o[d];t[d]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:d}),t[d+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+g+"=b"},rvalue:!0,funcName:d+"eq"}),t[d+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:d+"s"}),t[d+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+g+"=s"},rvalue:!0,funcName:d+"seq"})}})();var s={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var d in s){var g=s[d];t[d]=a({args:["array","array"],body:{args:["a","b"],body:"a="+g+"b"},funcName:d}),t[d+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+g+"a"},rvalue:!0,count:2,funcName:d+"eq"})}})();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var d in l){var g=l[d];t[d]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:d}),t[d+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:d+"s"}),t[d+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+g+"b"},rvalue:!0,count:2,funcName:d+"eq"}),t[d+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+g+"s"},rvalue:!0,count:2,funcName:d+"seq"})}})();var p=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var d=0;d<p.length;++d){var g=p[d];t[g]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:g}),t[g+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"})}})();var c=["max","min","atan2","pow"];(function(){for(var d=0;d<c.length;++d){var g=c[d];t[g]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g}),t[g+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g+"s"}),t[g+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"}),t[g+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"seq"})}})();var f=["atan2","pow"];(function(){for(var d=0;d<f.length;++d){var g=f[d];t[g+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"op"}),t[g+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"ops"}),t[g+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opeq"}),t[g+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opseq"})}})(),t.any=e({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=e({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=e({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(Do);var wC=ef({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64}),_d=Ia,EC=wC,AC=function(e,r){for(var n=[],i=e,a=1;Array.isArray(i);)n.push(i.length),a*=i.length,i=i[0];return n.length===0?_d():(r||(r=_d(new Float64Array(a),n)),EC(r,e),r)};function U1(t,e,r){var n=t[r]|0;if(n<=0)return[];var i=new Array(n),a;if(r===t.length-1)for(a=0;a<n;++a)i[a]=e;else for(a=0;a<n;++a)i[a]=U1(t,e,r+1);return i}function CC(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function FC(t,e){switch(typeof e>"u"&&(e=0),typeof t){case"number":if(t>0)return CC(t|0,e);break;case"object":if(typeof t.length=="number")return U1(t,e,0);break}return[]}var SC=FC,V1={};(function(t){(function(e,r){r(t)})(vr,function(e){var r,n,i,a,o,s,l,p,c,f,d,g,b,v,m,D,B,w;r={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},n={},n[r.BooleanLiteral]="Boolean",n[r.EOF]="<end>",n[r.Identifier]="Identifier",n[r.Keyword]="Keyword",n[r.NullLiteral]="Null",n[r.NumericLiteral]="Numeric",n[r.Punctuator]="Punctuator",n[r.StringLiteral]="String",n[r.RegularExpression]="RegularExpression",i=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},o={Data:1,Get:2,Set:4},s={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},l={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function C(y,P){if(!y)throw new Error("ASSERT: "+P)}function F(y){return y>=48&&y<=57}function k(y){return"0123456789abcdefABCDEF".indexOf(y)>=0}function O(y){return"01234567".indexOf(y)>=0}function A(y){return y===32||y===9||y===11||y===12||y===160||y>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(y)>=0}function x(y){return y===10||y===13||y===8232||y===8233}function U(y){return y===36||y===95||y>=65&&y<=90||y>=97&&y<=122||y===92||y>=128&&l.NonAsciiIdentifierStart.test(String.fromCharCode(y))}function K(y){return y===36||y===95||y>=65&&y<=90||y>=97&&y<=122||y>=48&&y<=57||y===92||y>=128&&l.NonAsciiIdentifierPart.test(String.fromCharCode(y))}function J(y){switch(y){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function j(y){switch(y){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function V(y){return y==="eval"||y==="arguments"}function H(y){if(f&&j(y))return!0;switch(y.length){case 2:return y==="if"||y==="in"||y==="do";case 3:return y==="var"||y==="for"||y==="new"||y==="try"||y==="let";case 4:return y==="this"||y==="else"||y==="case"||y==="void"||y==="with"||y==="enum";case 5:return y==="while"||y==="break"||y==="catch"||y==="throw"||y==="const"||y==="yield"||y==="class"||y==="super";case 6:return y==="return"||y==="typeof"||y==="delete"||y==="switch"||y==="export"||y==="import";case 7:return y==="default"||y==="finally"||y==="extends";case 8:return y==="function"||y==="continue"||y==="debugger";case 10:return y==="instanceof";default:return!1}}function z(y,P,$,re,ge){var Ne;C(typeof $=="number","Comment must have valid position"),!(B.lastCommentStart>=$)&&(B.lastCommentStart=$,Ne={type:y,value:P},w.range&&(Ne.range=[$,re]),w.loc&&(Ne.loc=ge),w.comments.push(Ne),w.attachComment&&(w.leadingComments.push(Ne),w.trailingComments.push(Ne)))}function Q(y){var P,$,re,ge;for(P=d-y,$={start:{line:g,column:d-b-y}};d<v;)if(re=c.charCodeAt(d),++d,x(re)){w.comments&&(ge=c.slice(P+y,d-1),$.end={line:g,column:d-b-1},z("Line",ge,P,d-1,$)),re===13&&c.charCodeAt(d)===10&&++d,++g,b=d;return}w.comments&&(ge=c.slice(P+y,d),$.end={line:g,column:d-b},z("Line",ge,P,d,$))}function X(){var y,P,$,re;for(w.comments&&(y=d-2,P={start:{line:g,column:d-b-2}});d<v;)if($=c.charCodeAt(d),x($))$===13&&c.charCodeAt(d+1)===10&&++d,++g,++d,b=d,d>=v&&Z({},s.UnexpectedToken,"ILLEGAL");else if($===42){if(c.charCodeAt(d+1)===47){++d,++d,w.comments&&(re=c.slice(y+2,d-2),P.end={line:g,column:d-b},z("Block",re,y,d,P));return}++d}else++d;Z({},s.UnexpectedToken,"ILLEGAL")}function te(){var y,P;for(P=d===0;d<v;)if(y=c.charCodeAt(d),A(y))++d;else if(x(y))++d,y===13&&c.charCodeAt(d)===10&&++d,++g,b=d,P=!0;else if(y===47)if(y=c.charCodeAt(d+1),y===47)++d,++d,Q(2),P=!0;else if(y===42)++d,++d,X();else break;else if(P&&y===45)if(c.charCodeAt(d+1)===45&&c.charCodeAt(d+2)===62)d+=3,Q(3);else break;else if(y===60)if(c.slice(d+1,d+4)==="!--")++d,++d,++d,++d,Q(4);else break;else break}function le(y){var P,$,re,ge=0;for($=y==="u"?4:2,P=0;P<$;++P)if(d<v&&k(c[d]))re=c[d++],ge=ge*16+"0123456789abcdef".indexOf(re.toLowerCase());else return"";return String.fromCharCode(ge)}function be(){var y,P;for(y=c.charCodeAt(d++),P=String.fromCharCode(y),y===92&&(c.charCodeAt(d)!==117&&Z({},s.UnexpectedToken,"ILLEGAL"),++d,y=le("u"),(!y||y==="\\"||!U(y.charCodeAt(0)))&&Z({},s.UnexpectedToken,"ILLEGAL"),P=y);d<v&&(y=c.charCodeAt(d),!!K(y));)++d,P+=String.fromCharCode(y),y===92&&(P=P.substr(0,P.length-1),c.charCodeAt(d)!==117&&Z({},s.UnexpectedToken,"ILLEGAL"),++d,y=le("u"),(!y||y==="\\"||!K(y.charCodeAt(0)))&&Z({},s.UnexpectedToken,"ILLEGAL"),P+=y);return P}function we(){var y,P;for(y=d++;d<v;){if(P=c.charCodeAt(d),P===92)return d=y,be();if(K(P))++d;else break}return c.slice(y,d)}function Oe(){var y,P,$;return y=d,P=c.charCodeAt(d)===92?be():we(),P.length===1?$=r.Identifier:H(P)?$=r.Keyword:P==="null"?$=r.NullLiteral:P==="true"||P==="false"?$=r.BooleanLiteral:$=r.Identifier,{type:$,value:P,lineNumber:g,lineStart:b,start:y,end:d}}function Pe(){var y=d,P=c.charCodeAt(d),$,re=c[d],ge,Ne,vt;switch(P){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++d,w.tokenize&&(P===40?w.openParenToken=w.tokens.length:P===123&&(w.openCurlyToken=w.tokens.length)),{type:r.Punctuator,value:String.fromCharCode(P),lineNumber:g,lineStart:b,start:y,end:d};default:if($=c.charCodeAt(d+1),$===61)switch(P){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return d+=2,{type:r.Punctuator,value:String.fromCharCode(P)+String.fromCharCode($),lineNumber:g,lineStart:b,start:y,end:d};case 33:case 61:return d+=2,c.charCodeAt(d)===61&&++d,{type:r.Punctuator,value:c.slice(y,d),lineNumber:g,lineStart:b,start:y,end:d}}}if(vt=c.substr(d,4),vt===">>>=")return d+=4,{type:r.Punctuator,value:vt,lineNumber:g,lineStart:b,start:y,end:d};if(Ne=vt.substr(0,3),Ne===">>>"||Ne==="<<="||Ne===">>=")return d+=3,{type:r.Punctuator,value:Ne,lineNumber:g,lineStart:b,start:y,end:d};if(ge=Ne.substr(0,2),re===ge[1]&&"+-<>&|".indexOf(re)>=0||ge==="=>")return d+=2,{type:r.Punctuator,value:ge,lineNumber:g,lineStart:b,start:y,end:d};if("<>=!+-*%&|^/".indexOf(re)>=0)return++d,{type:r.Punctuator,value:re,lineNumber:g,lineStart:b,start:y,end:d};Z({},s.UnexpectedToken,"ILLEGAL")}function Te(y){for(var P="";d<v&&k(c[d]);)P+=c[d++];return P.length===0&&Z({},s.UnexpectedToken,"ILLEGAL"),U(c.charCodeAt(d))&&Z({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt("0x"+P,16),lineNumber:g,lineStart:b,start:y,end:d}}function Re(y){for(var P="0"+c[d++];d<v&&O(c[d]);)P+=c[d++];return(U(c.charCodeAt(d))||F(c.charCodeAt(d)))&&Z({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt(P,8),octal:!0,lineNumber:g,lineStart:b,start:y,end:d}}function Ue(){var y,P;for(y=d+1;y<v;++y){if(P=c[y],P==="8"||P==="9")return!1;if(!O(P))return!0}return!0}function We(){var y,P,$;if($=c[d],C(F($.charCodeAt(0))||$===".","Numeric literal must start with a decimal digit or a decimal point"),P=d,y="",$!=="."){if(y=c[d++],$=c[d],y==="0"){if($==="x"||$==="X")return++d,Te(P);if(O($)&&Ue())return Re(P)}for(;F(c.charCodeAt(d));)y+=c[d++];$=c[d]}if($==="."){for(y+=c[d++];F(c.charCodeAt(d));)y+=c[d++];$=c[d]}if($==="e"||$==="E")if(y+=c[d++],$=c[d],($==="+"||$==="-")&&(y+=c[d++]),F(c.charCodeAt(d)))for(;F(c.charCodeAt(d));)y+=c[d++];else Z({},s.UnexpectedToken,"ILLEGAL");return U(c.charCodeAt(d))&&Z({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseFloat(y),lineNumber:g,lineStart:b,start:P,end:d}}function Ye(){var y="",P,$,re,ge,Ne,vt,At=!1,Wt,lr;for(Wt=g,lr=b,P=c[d],C(P==="'"||P==='"',"String literal must starts with a quote"),$=d,++d;d<v;)if(re=c[d++],re===P){P="";break}else if(re==="\\")if(re=c[d++],!re||!x(re.charCodeAt(0)))switch(re){case"u":case"x":vt=d,Ne=le(re),Ne?y+=Ne:(d=vt,y+=re);break;case"n":y+=`
`;break;case"r":y+="\r";break;case"t":y+="	";break;case"b":y+="\b";break;case"f":y+="\f";break;case"v":y+="\v";break;default:O(re)?(ge="01234567".indexOf(re),ge!==0&&(At=!0),d<v&&O(c[d])&&(At=!0,ge=ge*8+"01234567".indexOf(c[d++]),"0123".indexOf(re)>=0&&d<v&&O(c[d])&&(ge=ge*8+"01234567".indexOf(c[d++]))),y+=String.fromCharCode(ge)):y+=re;break}else++g,re==="\r"&&c[d]===`
`&&++d,b=d;else{if(x(re.charCodeAt(0)))break;y+=re}return P!==""&&Z({},s.UnexpectedToken,"ILLEGAL"),{type:r.StringLiteral,value:y,octal:At,startLineNumber:Wt,startLineStart:lr,lineNumber:g,lineStart:b,start:$,end:d}}function xe(y,P){var $;try{$=new RegExp(y,P)}catch{Z({},s.InvalidRegExp)}return $}function Dt(){var y,P,$,re,ge;for(y=c[d],C(y==="/","Regular expression literal must start with a slash"),P=c[d++],$=!1,re=!1;d<v;)if(y=c[d++],P+=y,y==="\\")y=c[d++],x(y.charCodeAt(0))&&Z({},s.UnterminatedRegExp),P+=y;else if(x(y.charCodeAt(0)))Z({},s.UnterminatedRegExp);else if($)y==="]"&&($=!1);else if(y==="/"){re=!0;break}else y==="["&&($=!0);return re||Z({},s.UnterminatedRegExp),ge=P.substr(1,P.length-2),{value:ge,literal:P}}function Et(){var y,P,$,re;for(P="",$="";d<v&&(y=c[d],!!K(y.charCodeAt(0)));)if(++d,y==="\\"&&d<v)if(y=c[d],y==="u"){if(++d,re=d,y=le("u"),y)for($+=y,P+="\\u";re<d;++re)P+=c[re];else d=re,$+="u",P+="\\u";ie({},s.UnexpectedToken,"ILLEGAL")}else P+="\\",ie({},s.UnexpectedToken,"ILLEGAL");else $+=y,P+=y;return{value:$,literal:P}}function ht(){var y,P,$,re;return D=null,te(),y=d,P=Dt(),$=Et(),re=xe(P.value,$.value),w.tokenize?{type:r.RegularExpression,value:re,lineNumber:g,lineStart:b,start:y,end:d}:{literal:P.literal+$.literal,value:re,start:y,end:d}}function lt(){var y,P,$,re;return te(),y=d,P={start:{line:g,column:d-b}},$=ht(),P.end={line:g,column:d-b},w.tokenize||(w.tokens.length>0&&(re=w.tokens[w.tokens.length-1],re.range[0]===y&&re.type==="Punctuator"&&(re.value==="/"||re.value==="/=")&&w.tokens.pop()),w.tokens.push({type:"RegularExpression",value:$.literal,range:[y,d],loc:P})),$}function Pt(y){return y.type===r.Identifier||y.type===r.Keyword||y.type===r.BooleanLiteral||y.type===r.NullLiteral}function wr(){var y,P;if(y=w.tokens[w.tokens.length-1],!y)return lt();if(y.type==="Punctuator"){if(y.value==="]")return Pe();if(y.value===")")return P=w.tokens[w.openParenToken-1],P&&P.type==="Keyword"&&(P.value==="if"||P.value==="while"||P.value==="for"||P.value==="with")?lt():Pe();if(y.value==="}"){if(w.tokens[w.openCurlyToken-3]&&w.tokens[w.openCurlyToken-3].type==="Keyword"){if(P=w.tokens[w.openCurlyToken-4],!P)return Pe()}else if(w.tokens[w.openCurlyToken-4]&&w.tokens[w.openCurlyToken-4].type==="Keyword"){if(P=w.tokens[w.openCurlyToken-5],!P)return lt()}else return Pe();return i.indexOf(P.value)>=0?Pe():lt()}return lt()}return y.type==="Keyword"&&y.value!=="this"?lt():Pe()}function It(){var y;return te(),d>=v?{type:r.EOF,lineNumber:g,lineStart:b,start:d,end:d}:(y=c.charCodeAt(d),U(y)?Oe():y===40||y===41||y===59?Pe():y===39||y===34?Ye():y===46?F(c.charCodeAt(d+1))?We():Pe():F(y)?We():w.tokenize&&y===47?wr():Pe())}function dr(){var y,P,$;return te(),y={start:{line:g,column:d-b}},P=It(),y.end={line:g,column:d-b},P.type!==r.EOF&&($=c.slice(P.start,P.end),w.tokens.push({type:n[P.type],value:$,range:[P.start,P.end],loc:y})),P}function Ze(){var y;return y=D,d=y.end,g=y.lineNumber,b=y.lineStart,D=typeof w.tokens<"u"?dr():It(),d=y.end,g=y.lineNumber,b=y.lineStart,y}function er(){var y,P,$;y=d,P=g,$=b,D=typeof w.tokens<"u"?dr():It(),d=y,g=P,b=$}function Nt(y,P){this.line=y,this.column=P}function Jr(y,P,$,re){this.start=new Nt(y,P),this.end=new Nt($,re)}p={name:"SyntaxTree",processComment:function(y){var P,$;if(!(y.type===a.Program&&y.body.length>0)){for(w.trailingComments.length>0?w.trailingComments[0].range[0]>=y.range[1]?($=w.trailingComments,w.trailingComments=[]):w.trailingComments.length=0:w.bottomRightStack.length>0&&w.bottomRightStack[w.bottomRightStack.length-1].trailingComments&&w.bottomRightStack[w.bottomRightStack.length-1].trailingComments[0].range[0]>=y.range[1]&&($=w.bottomRightStack[w.bottomRightStack.length-1].trailingComments,delete w.bottomRightStack[w.bottomRightStack.length-1].trailingComments);w.bottomRightStack.length>0&&w.bottomRightStack[w.bottomRightStack.length-1].range[0]>=y.range[0];)P=w.bottomRightStack.pop();P?P.leadingComments&&P.leadingComments[P.leadingComments.length-1].range[1]<=y.range[0]&&(y.leadingComments=P.leadingComments,delete P.leadingComments):w.leadingComments.length>0&&w.leadingComments[w.leadingComments.length-1].range[1]<=y.range[0]&&(y.leadingComments=w.leadingComments,w.leadingComments=[]),$&&(y.trailingComments=$),w.bottomRightStack.push(y)}},markEnd:function(y,P){return w.range&&(y.range=[P.start,d]),w.loc&&(y.loc=new Jr(P.startLineNumber===void 0?P.lineNumber:P.startLineNumber,P.start-(P.startLineStart===void 0?P.lineStart:P.startLineStart),g,d-b),this.postProcess(y)),w.attachComment&&this.processComment(y),y},postProcess:function(y){return w.source&&(y.loc.source=w.source),y},createArrayExpression:function(y){return{type:a.ArrayExpression,elements:y}},createAssignmentExpression:function(y,P,$){return{type:a.AssignmentExpression,operator:y,left:P,right:$}},createBinaryExpression:function(y,P,$){var re=y==="||"||y==="&&"?a.LogicalExpression:a.BinaryExpression;return{type:re,operator:y,left:P,right:$}},createBlockStatement:function(y){return{type:a.BlockStatement,body:y}},createBreakStatement:function(y){return{type:a.BreakStatement,label:y}},createCallExpression:function(y,P){return{type:a.CallExpression,callee:y,arguments:P}},createCatchClause:function(y,P){return{type:a.CatchClause,param:y,body:P}},createConditionalExpression:function(y,P,$){return{type:a.ConditionalExpression,test:y,consequent:P,alternate:$}},createContinueStatement:function(y){return{type:a.ContinueStatement,label:y}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(y,P){return{type:a.DoWhileStatement,body:y,test:P}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(y){return{type:a.ExpressionStatement,expression:y}},createForStatement:function(y,P,$,re){return{type:a.ForStatement,init:y,test:P,update:$,body:re}},createForInStatement:function(y,P,$){return{type:a.ForInStatement,left:y,right:P,body:$,each:!1}},createFunctionDeclaration:function(y,P,$,re){return{type:a.FunctionDeclaration,id:y,params:P,defaults:$,body:re,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(y,P,$,re){return{type:a.FunctionExpression,id:y,params:P,defaults:$,body:re,rest:null,generator:!1,expression:!1}},createIdentifier:function(y){return{type:a.Identifier,name:y}},createIfStatement:function(y,P,$){return{type:a.IfStatement,test:y,consequent:P,alternate:$}},createLabeledStatement:function(y,P){return{type:a.LabeledStatement,label:y,body:P}},createLiteral:function(y){return{type:a.Literal,value:y.value,raw:c.slice(y.start,y.end)}},createMemberExpression:function(y,P,$){return{type:a.MemberExpression,computed:y==="[",object:P,property:$}},createNewExpression:function(y,P){return{type:a.NewExpression,callee:y,arguments:P}},createObjectExpression:function(y){return{type:a.ObjectExpression,properties:y}},createPostfixExpression:function(y,P){return{type:a.UpdateExpression,operator:y,argument:P,prefix:!1}},createProgram:function(y){return{type:a.Program,body:y}},createProperty:function(y,P,$){return{type:a.Property,key:P,value:$,kind:y}},createReturnStatement:function(y){return{type:a.ReturnStatement,argument:y}},createSequenceExpression:function(y){return{type:a.SequenceExpression,expressions:y}},createSwitchCase:function(y,P){return{type:a.SwitchCase,test:y,consequent:P}},createSwitchStatement:function(y,P){return{type:a.SwitchStatement,discriminant:y,cases:P}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(y){return{type:a.ThrowStatement,argument:y}},createTryStatement:function(y,P,$,re){return{type:a.TryStatement,block:y,guardedHandlers:P,handlers:$,finalizer:re}},createUnaryExpression:function(y,P){return y==="++"||y==="--"?{type:a.UpdateExpression,operator:y,argument:P,prefix:!0}:{type:a.UnaryExpression,operator:y,argument:P,prefix:!0}},createVariableDeclaration:function(y,P){return{type:a.VariableDeclaration,declarations:y,kind:P}},createVariableDeclarator:function(y,P){return{type:a.VariableDeclarator,id:y,init:P}},createWhileStatement:function(y,P){return{type:a.WhileStatement,test:y,body:P}},createWithStatement:function(y,P){return{type:a.WithStatement,object:y,body:P}}};function G(){var y,P,$,re;return y=d,P=g,$=b,te(),re=g!==P,d=y,g=P,b=$,re}function Z(y,P){var $,re=Array.prototype.slice.call(arguments,2),ge=P.replace(/%(\d)/g,function(Ne,vt){return C(vt<re.length,"Message reference must be in range"),re[vt]});throw typeof y.lineNumber=="number"?($=new Error("Line "+y.lineNumber+": "+ge),$.index=y.start,$.lineNumber=y.lineNumber,$.column=y.start-b+1):($=new Error("Line "+g+": "+ge),$.index=d,$.lineNumber=g,$.column=d-b+1),$.description=ge,$}function ie(){try{Z.apply(null,arguments)}catch(y){if(w.errors)w.errors.push(y);else throw y}}function de(y){if(y.type===r.EOF&&Z(y,s.UnexpectedEOS),y.type===r.NumericLiteral&&Z(y,s.UnexpectedNumber),y.type===r.StringLiteral&&Z(y,s.UnexpectedString),y.type===r.Identifier&&Z(y,s.UnexpectedIdentifier),y.type===r.Keyword){if(J(y.value))Z(y,s.UnexpectedReserved);else if(f&&j(y.value)){ie(y,s.StrictReservedWord);return}Z(y,s.UnexpectedToken,y.value)}Z(y,s.UnexpectedToken,y.value)}function ue(y){var P=Ze();(P.type!==r.Punctuator||P.value!==y)&&de(P)}function me(y){var P=Ze();(P.type!==r.Keyword||P.value!==y)&&de(P)}function ce(y){return D.type===r.Punctuator&&D.value===y}function he(y){return D.type===r.Keyword&&D.value===y}function ke(){var y;return D.type!==r.Punctuator?!1:(y=D.value,y==="="||y==="*="||y==="/="||y==="%="||y==="+="||y==="-="||y==="<<="||y===">>="||y===">>>="||y==="&="||y==="^="||y==="|=")}function He(){var y,P=d,$=g,re=b,ge=D;if(c.charCodeAt(d)===59||ce(";")){Ze();return}if(y=g,te(),g!==y){d=P,g=$,b=re,D=ge;return}D.type!==r.EOF&&!ce("}")&&de(D)}function ct(y){return y.type===a.Identifier||y.type===a.MemberExpression}function Ie(){var y=[],P;for(P=D,ue("[");!ce("]");)ce(",")?(Ze(),y.push(null)):(y.push(Or()),ce("]")||ue(","));return Ze(),m.markEnd(m.createArrayExpression(y),P)}function Gt(y,P){var $,re,ge;return $=f,ge=D,re=ji(),P&&f&&V(y[0].name)&&ie(P,s.StrictParamName),f=$,m.markEnd(m.createFunctionExpression(null,y,[],re),ge)}function Vt(){var y,P;return P=D,y=Ze(),y.type===r.StringLiteral||y.type===r.NumericLiteral?(f&&y.octal&&ie(y,s.StrictOctalLiteral),m.markEnd(m.createLiteral(y),P)):m.markEnd(m.createIdentifier(y.value),P)}function tr(){var y,P,$,re,ge,Ne;if(y=D,Ne=D,y.type===r.Identifier)return $=Vt(),y.value==="get"&&!ce(":")?(P=Vt(),ue("("),ue(")"),re=Gt([]),m.markEnd(m.createProperty("get",P,re),Ne)):y.value==="set"&&!ce(":")?(P=Vt(),ue("("),y=D,y.type!==r.Identifier?(ue(")"),ie(y,s.UnexpectedToken,y.value),re=Gt([])):(ge=[mn()],ue(")"),re=Gt(ge,y)),m.markEnd(m.createProperty("set",P,re),Ne)):(ue(":"),re=Or(),m.markEnd(m.createProperty("init",$,re),Ne));if(y.type===r.EOF||y.type===r.Punctuator)de(y);else return P=Vt(),ue(":"),re=Or(),m.markEnd(m.createProperty("init",P,re),Ne)}function Kt(){var y=[],P,$,re,ge,Ne={},vt=String,At;for(At=D,ue("{");!ce("}");)P=tr(),P.key.type===a.Identifier?$=P.key.name:$=vt(P.key.value),ge=P.kind==="init"?o.Data:P.kind==="get"?o.Get:o.Set,re="$"+$,Object.prototype.hasOwnProperty.call(Ne,re)?(Ne[re]===o.Data?f&&ge===o.Data?ie({},s.StrictDuplicateProperty):ge!==o.Data&&ie({},s.AccessorDataProperty):ge===o.Data?ie({},s.AccessorDataProperty):Ne[re]&ge&&ie({},s.AccessorGetSet),Ne[re]|=ge):Ne[re]=ge,y.push(P),ce("}")||ue(",");return ue("}"),m.markEnd(m.createObjectExpression(y),At)}function Er(){var y;return ue("("),y=rr(),ue(")"),y}function Yt(){var y,P,$,re;if(ce("("))return Er();if(ce("["))return Ie();if(ce("{"))return Kt();if(y=D.type,re=D,y===r.Identifier)$=m.createIdentifier(Ze().value);else if(y===r.StringLiteral||y===r.NumericLiteral)f&&D.octal&&ie(D,s.StrictOctalLiteral),$=m.createLiteral(Ze());else if(y===r.Keyword){if(he("function"))return zi();he("this")?(Ze(),$=m.createThisExpression()):de(Ze())}else y===r.BooleanLiteral?(P=Ze(),P.value=P.value==="true",$=m.createLiteral(P)):y===r.NullLiteral?(P=Ze(),P.value=null,$=m.createLiteral(P)):ce("/")||ce("/=")?(typeof w.tokens<"u"?$=m.createLiteral(lt()):$=m.createLiteral(ht()),er()):de(Ze());return m.markEnd($,re)}function Ar(){var y=[];if(ue("("),!ce(")"))for(;d<v&&(y.push(Or()),!ce(")"));)ue(",");return ue(")"),y}function pr(){var y,P;return P=D,y=Ze(),Pt(y)||de(y),m.markEnd(m.createIdentifier(y.value),P)}function gr(){return ue("."),pr()}function vn(){var y;return ue("["),y=rr(),ue("]"),y}function mr(){var y,P,$;return $=D,me("new"),y=Xn(),P=ce("(")?Ar():[],m.markEnd(m.createNewExpression(y,P),$)}function On(){var y,P,$,re,ge=B.allowIn;for(re=D,B.allowIn=!0,y=he("new")?mr():Yt();;){if(ce("."))$=gr(),y=m.createMemberExpression(".",y,$);else if(ce("("))P=Ar(),y=m.createCallExpression(y,P);else if(ce("["))$=vn(),y=m.createMemberExpression("[",y,$);else break;m.markEnd(y,re)}return B.allowIn=ge,y}function Xn(){var y,P,$;for(C(B.allowIn,"callee of new expression always allow in keyword."),$=D,y=he("new")?mr():Yt();ce(".")||ce("[");)ce("[")?(P=vn(),y=m.createMemberExpression("[",y,P)):(P=gr(),y=m.createMemberExpression(".",y,P)),m.markEnd(y,$);return y}function Vn(){var y,P,$=D;return y=On(),D.type===r.Punctuator&&(ce("++")||ce("--"))&&!G()&&(f&&y.type===a.Identifier&&V(y.name)&&ie({},s.StrictLHSPostfix),ct(y)||ie({},s.InvalidLHSInAssignment),P=Ze(),y=m.markEnd(m.createPostfixExpression(P.value,y),$)),y}function jn(){var y,P,$;return D.type!==r.Punctuator&&D.type!==r.Keyword?P=Vn():ce("++")||ce("--")?($=D,y=Ze(),P=jn(),f&&P.type===a.Identifier&&V(P.name)&&ie({},s.StrictLHSPrefix),ct(P)||ie({},s.InvalidLHSInAssignment),P=m.createUnaryExpression(y.value,P),P=m.markEnd(P,$)):ce("+")||ce("-")||ce("~")||ce("!")?($=D,y=Ze(),P=jn(),P=m.createUnaryExpression(y.value,P),P=m.markEnd(P,$)):he("delete")||he("void")||he("typeof")?($=D,y=Ze(),P=jn(),P=m.createUnaryExpression(y.value,P),P=m.markEnd(P,$),f&&P.operator==="delete"&&P.argument.type===a.Identifier&&ie({},s.StrictDelete)):P=Vn(),P}function ta(y,P){var $=0;if(y.type!==r.Punctuator&&y.type!==r.Keyword)return 0;switch(y.value){case"||":$=1;break;case"&&":$=2;break;case"|":$=3;break;case"^":$=4;break;case"&":$=5;break;case"==":case"!=":case"===":case"!==":$=6;break;case"<":case">":case"<=":case">=":case"instanceof":$=7;break;case"in":$=P?7:0;break;case"<<":case">>":case">>>":$=8;break;case"+":case"-":$=9;break;case"*":case"/":case"%":$=11;break}return $}function Ui(){var y,P,$,re,ge,Ne,vt,At,Wt,lr;if(y=D,Wt=jn(),re=D,ge=ta(re,B.allowIn),ge===0)return Wt;for(re.prec=ge,Ze(),P=[y,D],vt=jn(),Ne=[Wt,re,vt];(ge=ta(D,B.allowIn))>0;){for(;Ne.length>2&&ge<=Ne[Ne.length-2].prec;)vt=Ne.pop(),At=Ne.pop().value,Wt=Ne.pop(),$=m.createBinaryExpression(At,Wt,vt),P.pop(),y=P[P.length-1],m.markEnd($,y),Ne.push($);re=Ze(),re.prec=ge,Ne.push(re),P.push(D),$=jn(),Ne.push($)}for(lr=Ne.length-1,$=Ne[lr],P.pop();lr>1;)$=m.createBinaryExpression(Ne[lr-1].value,Ne[lr-2],$),lr-=2,y=P.pop(),m.markEnd($,y);return $}function xa(){var y,P,$,re,ge;return ge=D,y=Ui(),ce("?")&&(Ze(),P=B.allowIn,B.allowIn=!0,$=Or(),B.allowIn=P,ue(":"),re=Or(),y=m.createConditionalExpression(y,$,re),m.markEnd(y,ge)),y}function Or(){var y,P,$,re,ge;return y=D,ge=D,re=P=xa(),ke()&&(ct(P)||ie({},s.InvalidLHSInAssignment),f&&P.type===a.Identifier&&V(P.name)&&ie(y,s.StrictLHSAssignment),y=Ze(),$=Or(),re=m.markEnd(m.createAssignmentExpression(y.value,P,$),ge)),re}function rr(){var y,P=D;if(y=Or(),ce(",")){for(y=m.createSequenceExpression([y]);d<v&&ce(",");)Ze(),y.expressions.push(Or());m.markEnd(y,P)}return y}function Na(){for(var y=[],P;d<v&&!(ce("}")||(P=Mn(),typeof P>"u"));)y.push(P);return y}function gi(){var y,P;return P=D,ue("{"),y=Na(),ue("}"),m.markEnd(m.createBlockStatement(y),P)}function mn(){var y,P;return P=D,y=Ze(),y.type!==r.Identifier&&de(y),m.markEnd(m.createIdentifier(y.value),P)}function ei(y){var P=null,$,re;return re=D,$=mn(),f&&V($.name)&&ie({},s.StrictVarName),y==="const"?(ue("="),P=Or()):ce("=")&&(Ze(),P=Or()),m.markEnd(m.createVariableDeclarator($,P),re)}function Vi(y){var P=[];do{if(P.push(ei(y)),!ce(","))break;Ze()}while(d<v);return P}function La(){var y;return me("var"),y=Vi(),He(),m.createVariableDeclaration(y,"var")}function Ra(y){var P,$;return $=D,me(y),P=Vi(y),He(),m.markEnd(m.createVariableDeclaration(P,y),$)}function ra(){return ue(";"),m.createEmptyStatement()}function Ua(){var y=rr();return He(),m.createExpressionStatement(y)}function Va(){var y,P,$;return me("if"),ue("("),y=rr(),ue(")"),P=$r(),he("else")?(Ze(),$=$r()):$=null,m.createIfStatement(y,P,$)}function ja(){var y,P,$;return me("do"),$=B.inIteration,B.inIteration=!0,y=$r(),B.inIteration=$,me("while"),ue("("),P=rr(),ue(")"),ce(";")&&Ze(),m.createDoWhileStatement(y,P)}function za(){var y,P,$;return me("while"),ue("("),y=rr(),ue(")"),$=B.inIteration,B.inIteration=!0,P=$r(),B.inIteration=$,m.createWhileStatement(y,P)}function qa(){var y,P,$;return $=D,y=Ze(),P=Vi(),m.markEnd(m.createVariableDeclaration(P,y.value),$)}function Wa(){var y,P,$,re,ge,Ne,vt,At=B.allowIn;return y=P=$=null,me("for"),ue("("),ce(";")?Ze():(he("var")||he("let")?(B.allowIn=!1,y=qa(),B.allowIn=At,y.declarations.length===1&&he("in")&&(Ze(),re=y,ge=rr(),y=null)):(B.allowIn=!1,y=rr(),B.allowIn=At,he("in")&&(ct(y)||ie({},s.InvalidLHSInForIn),Ze(),re=y,ge=rr(),y=null)),typeof re>"u"&&ue(";")),typeof re>"u"&&(ce(";")||(P=rr()),ue(";"),ce(")")||($=rr())),ue(")"),vt=B.inIteration,B.inIteration=!0,Ne=$r(),B.inIteration=vt,typeof re>"u"?m.createForStatement(y,P,$,Ne):m.createForInStatement(re,ge,Ne)}function vi(){var y=null,P;return me("continue"),c.charCodeAt(d)===59?(Ze(),B.inIteration||Z({},s.IllegalContinue),m.createContinueStatement(null)):G()?(B.inIteration||Z({},s.IllegalContinue),m.createContinueStatement(null)):(D.type===r.Identifier&&(y=mn(),P="$"+y.name,Object.prototype.hasOwnProperty.call(B.labelSet,P)||Z({},s.UnknownLabel,y.name)),He(),y===null&&!B.inIteration&&Z({},s.IllegalContinue),m.createContinueStatement(y))}function Ha(){var y=null,P;return me("break"),c.charCodeAt(d)===59?(Ze(),B.inIteration||B.inSwitch||Z({},s.IllegalBreak),m.createBreakStatement(null)):G()?(B.inIteration||B.inSwitch||Z({},s.IllegalBreak),m.createBreakStatement(null)):(D.type===r.Identifier&&(y=mn(),P="$"+y.name,Object.prototype.hasOwnProperty.call(B.labelSet,P)||Z({},s.UnknownLabel,y.name)),He(),y===null&&!(B.inIteration||B.inSwitch)&&Z({},s.IllegalBreak),m.createBreakStatement(y))}function mi(){var y=null;return me("return"),B.inFunctionBody||ie({},s.IllegalReturn),c.charCodeAt(d)===32&&U(c.charCodeAt(d+1))?(y=rr(),He(),m.createReturnStatement(y)):G()?m.createReturnStatement(null):(ce(";")||!ce("}")&&D.type!==r.EOF&&(y=rr()),He(),m.createReturnStatement(y))}function $a(){var y,P;return f&&(te(),ie({},s.StrictModeWith)),me("with"),ue("("),y=rr(),ue(")"),P=$r(),m.createWithStatement(y,P)}function Ga(){var y,P=[],$,re;for(re=D,he("default")?(Ze(),y=null):(me("case"),y=rr()),ue(":");d<v&&!(ce("}")||he("default")||he("case"));)$=$r(),P.push($);return m.markEnd(m.createSwitchCase(y,P),re)}function Ka(){var y,P,$,re,ge;if(me("switch"),ue("("),y=rr(),ue(")"),ue("{"),P=[],ce("}"))return Ze(),m.createSwitchStatement(y,P);for(re=B.inSwitch,B.inSwitch=!0,ge=!1;d<v&&!ce("}");)$=Ga(),$.test===null&&(ge&&Z({},s.MultipleDefaultsInSwitch),ge=!0),P.push($);return B.inSwitch=re,ue("}"),m.createSwitchStatement(y,P)}function na(){var y;return me("throw"),G()&&Z({},s.NewlineAfterThrow),y=rr(),He(),m.createThrowStatement(y)}function zn(){var y,P,$;return $=D,me("catch"),ue("("),ce(")")&&de(D),y=mn(),f&&V(y.name)&&ie({},s.StrictCatchVariable),ue(")"),P=gi(),m.markEnd(m.createCatchClause(y,P),$)}function Cr(){var y,P=[],$=null;return me("try"),y=gi(),he("catch")&&P.push(zn()),he("finally")&&(Ze(),$=gi()),P.length===0&&!$&&Z({},s.NoCatchOrFinally),m.createTryStatement(y,[],P,$)}function or(){return me("debugger"),He(),m.createDebuggerStatement()}function $r(){var y=D.type,P,$,re,ge;if(y===r.EOF&&de(D),y===r.Punctuator&&D.value==="{")return gi();if(ge=D,y===r.Punctuator)switch(D.value){case";":return m.markEnd(ra(),ge);case"(":return m.markEnd(Ua(),ge)}if(y===r.Keyword)switch(D.value){case"break":return m.markEnd(Ha(),ge);case"continue":return m.markEnd(vi(),ge);case"debugger":return m.markEnd(or(),ge);case"do":return m.markEnd(ja(),ge);case"for":return m.markEnd(Wa(),ge);case"function":return m.markEnd(qn(),ge);case"if":return m.markEnd(Va(),ge);case"return":return m.markEnd(mi(),ge);case"switch":return m.markEnd(Ka(),ge);case"throw":return m.markEnd(na(),ge);case"try":return m.markEnd(Cr(),ge);case"var":return m.markEnd(La(),ge);case"while":return m.markEnd(za(),ge);case"with":return m.markEnd($a(),ge)}return P=rr(),P.type===a.Identifier&&ce(":")?(Ze(),re="$"+P.name,Object.prototype.hasOwnProperty.call(B.labelSet,re)&&Z({},s.Redeclaration,"Label",P.name),B.labelSet[re]=!0,$=$r(),delete B.labelSet[re],m.markEnd(m.createLabeledStatement(P,$),ge)):(He(),m.markEnd(m.createExpressionStatement(P),ge))}function ji(){var y,P=[],$,re,ge,Ne,vt,At,Wt,lr;for(lr=D,ue("{");d<v&&!(D.type!==r.StringLiteral||($=D,y=Mn(),P.push(y),y.expression.type!==a.Literal));)re=c.slice($.start+1,$.end-1),re==="use strict"?(f=!0,ge&&ie(ge,s.StrictOctalLiteral)):!ge&&$.octal&&(ge=$);for(Ne=B.labelSet,vt=B.inIteration,At=B.inSwitch,Wt=B.inFunctionBody,B.labelSet={},B.inIteration=!1,B.inSwitch=!1,B.inFunctionBody=!0;d<v&&!(ce("}")||(y=Mn(),typeof y>"u"));)P.push(y);return ue("}"),B.labelSet=Ne,B.inIteration=vt,B.inSwitch=At,B.inFunctionBody=Wt,m.markEnd(m.createBlockStatement(P),lr)}function ti(y){var P,$=[],re,ge,Ne,vt,At;if(ue("("),!ce(")"))for(Ne={};d<v&&(re=D,P=mn(),vt="$"+re.value,f?(V(re.value)&&(ge=re,At=s.StrictParamName),Object.prototype.hasOwnProperty.call(Ne,vt)&&(ge=re,At=s.StrictParamDupe)):y||(V(re.value)?(y=re,At=s.StrictParamName):j(re.value)?(y=re,At=s.StrictReservedWord):Object.prototype.hasOwnProperty.call(Ne,vt)&&(y=re,At=s.StrictParamDupe)),$.push(P),Ne[vt]=!0,!ce(")"));)ue(",");return ue(")"),{params:$,stricted:ge,firstRestricted:y,message:At}}function qn(){var y,P=[],$,re,ge,Ne,vt,At,Wt,lr;return lr=D,me("function"),re=D,y=mn(),f?V(re.value)&&ie(re,s.StrictFunctionName):V(re.value)?(vt=re,At=s.StrictFunctionName):j(re.value)&&(vt=re,At=s.StrictReservedWord),Ne=ti(vt),P=Ne.params,ge=Ne.stricted,vt=Ne.firstRestricted,Ne.message&&(At=Ne.message),Wt=f,$=ji(),f&&vt&&Z(vt,At),f&&ge&&ie(ge,At),f=Wt,m.markEnd(m.createFunctionDeclaration(y,P,[],$),lr)}function zi(){var y,P=null,$,re,ge,Ne,vt=[],At,Wt,lr;return lr=D,me("function"),ce("(")||(y=D,P=mn(),f?V(y.value)&&ie(y,s.StrictFunctionName):V(y.value)?(re=y,ge=s.StrictFunctionName):j(y.value)&&(re=y,ge=s.StrictReservedWord)),Ne=ti(re),vt=Ne.params,$=Ne.stricted,re=Ne.firstRestricted,Ne.message&&(ge=Ne.message),Wt=f,At=ji(),f&&re&&Z(re,ge),f&&$&&ie($,ge),f=Wt,m.markEnd(m.createFunctionExpression(P,vt,[],At),lr)}function Mn(){if(D.type===r.Keyword)switch(D.value){case"const":case"let":return Ra(D.value);case"function":return qn();default:return $r()}if(D.type!==r.EOF)return $r()}function _n(){for(var y,P=[],$,re,ge;d<v&&($=D,!($.type!==r.StringLiteral||(y=Mn(),P.push(y),y.expression.type!==a.Literal)));)re=c.slice($.start+1,$.end-1),re==="use strict"?(f=!0,ge&&ie(ge,s.StrictOctalLiteral)):!ge&&$.octal&&(ge=$);for(;d<v&&(y=Mn(),!(typeof y>"u"));)P.push(y);return P}function So(){var y,P;return te(),er(),P=D,f=!1,y=_n(),m.markEnd(m.createProgram(y),P)}function Ya(){var y,P,$,re=[];for(y=0;y<w.tokens.length;++y)P=w.tokens[y],$={type:P.type,value:P.value},w.range&&($.range=P.range),w.loc&&($.loc=P.loc),re.push($);w.tokens=re}function ia(y,P){var $,re,ge;$=String,typeof y!="string"&&!(y instanceof String)&&(y=$(y)),m=p,c=y,d=0,g=c.length>0?1:0,b=0,v=c.length,D=null,B={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},w={},P=P||{},P.tokens=!0,w.tokens=[],w.tokenize=!0,w.openParenToken=-1,w.openCurlyToken=-1,w.range=typeof P.range=="boolean"&&P.range,w.loc=typeof P.loc=="boolean"&&P.loc,typeof P.comment=="boolean"&&P.comment&&(w.comments=[]),typeof P.tolerant=="boolean"&&P.tolerant&&(w.errors=[]);try{if(er(),D.type===r.EOF)return w.tokens;for(re=Ze();D.type!==r.EOF;)try{re=Ze()}catch(Ne){if(re=D,w.errors){w.errors.push(Ne);break}else throw Ne}Ya(),ge=w.tokens,typeof w.comments<"u"&&(ge.comments=w.comments),typeof w.errors<"u"&&(ge.errors=w.errors)}catch(Ne){throw Ne}finally{w={}}return ge}function Mu(y,P){var $,re;re=String,typeof y!="string"&&!(y instanceof String)&&(y=re(y)),m=p,c=y,d=0,g=c.length>0?1:0,b=0,v=c.length,D=null,B={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},w={},typeof P<"u"&&(w.range=typeof P.range=="boolean"&&P.range,w.loc=typeof P.loc=="boolean"&&P.loc,w.attachComment=typeof P.attachComment=="boolean"&&P.attachComment,w.loc&&P.source!==null&&P.source!==void 0&&(w.source=re(P.source)),typeof P.tokens=="boolean"&&P.tokens&&(w.tokens=[]),typeof P.comment=="boolean"&&P.comment&&(w.comments=[]),typeof P.tolerant=="boolean"&&P.tolerant&&(w.errors=[]),w.attachComment&&(w.range=!0,w.comments=[],w.bottomRightStack=[],w.trailingComments=[],w.leadingComments=[]));try{$=So(),typeof w.comments<"u"&&($.comments=w.comments),typeof w.tokens<"u"&&(Ya(),$.tokens=w.tokens),typeof w.errors<"u"&&($.errors=w.errors)}catch(ge){throw ge}finally{w={}}return $}e.version="1.2.5",e.tokenize=ia,e.parse=Mu,e.Syntax=function(){var y,P={};typeof Object.create=="function"&&(P=Object.create(null));for(y in a)a.hasOwnProperty(y)&&(P[y]=a[y]);return typeof Object.freeze=="function"&&Object.freeze(P),P}()})})(V1);var BC=V1,bd=L1,OC=0;function MC(t,e,r){this.name=t,this.lvalue=e,this.rvalue=r,this.count=0}function PC(t,e,r,n){this.body=t,this.args=e,this.thisVars=r,this.localVars=n}function kC(t){if(t==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?t in window:typeof vr<"u"?t in vr:typeof self<"u"?t in self:!1}function TC(t){for(var e=t.body[0].expression.callee.params,r=new Array(e.length),n=0;n<e.length;++n)r[n]=e[n].name;return r}function IC(t){for(var e=["(",t,")()"].join(""),r=BC.parse(e,{range:!0}),n="_inline_"+OC+++"_",i=TC(r),a=new Array(i.length),o=0;o<i.length;++o)a[o]=new MC([n,"arg",o,"_"].join(""),!1,!1);for(var s=new Array(e.length),o=0,l=e.length;o<l;++o)s[o]=e.charAt(o);var p=[],c=[];function f(C){var F=n+C.replace(/\_/g,"__");return p.push(F),F}function d(C){var F="this_"+C.replace(/\_/g,"__");return c.push(F),F}function g(C,F){for(var k=C.range[0],O=C.range[1],A=k+1;A<O;++A)s[A]="";s[k]=F}function b(C){return"'"+C.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function v(C){return s.slice(C.range[0],C.range[1]).join("")}var m=1,D=2;function B(C){return C.parent.type==="AssignmentExpression"&&C.parent.left===C?C.parent.operator==="="?m:m|D:C.parent.type==="UpdateExpression"?m|D:D}(function C(F,k){if(F.parent=k,F.type==="MemberExpression")F.computed?(C(F.object,F),C(F.property,F)):F.object.type==="ThisExpression"?g(F,d(F.property.name)):C(F.object,F);else{if(F.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(F.type==="Identifier"){var O=F.name,A=i.indexOf(O);if(A>=0){var x=a[A],U=B(F);U&m&&(x.lvalue=!0),U&D&&(x.rvalue=!0),++x.count,g(F,x.name)}else kC(O)||g(F,f(O))}else if(F.type==="Literal")typeof F.value=="string"&&g(F,b(F.value));else{if(F.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var K=Object.keys(F),J=0,j=K.length;J<j;++J)if(K[J]!=="parent"){var V=F[K[J]];if(V)if(V instanceof Array)for(var H=0;H<V.length;++H)V[H]&&typeof V[H].type=="string"&&C(V[H],F);else typeof V.type=="string"&&C(V,F)}}}})(r.body[0].expression.callee.body,void 0),bd(p),bd(c);var w=new PC(v(r.body[0].expression.callee.body),a,c,p);return w}var xC=IC,Wl=xC,NC=ef,Es=["args","body"],LC=["pre","post","printCode","funcName","blockSize"];function RC(t){for(var e in t)Es.indexOf(e)<0&&LC.indexOf(e)<0&&console.warn("cwise: Unknown argument '"+e+"' passed to expression compiler");for(var r=0;r<Es.length;++r)if(!t[Es[r]])throw new Error("cwise: Missing argument: "+Es[r]);return NC({args:t.args,pre:Wl(t.pre||function(){}),body:Wl(t.body),post:Wl(t.post||function(){}),debug:!!t.printCode,funcName:t.funcName||t.body.name||"cwise",blockSize:t.blockSize||64})}var yo=RC,UC=SC,VC=yo,jC=VC({args:["array","scalar","index"],body:function(e,r,n){var i=r,a;for(a=0;a<n.length-1;++a)i=i[n[a]];i[n[n.length-1]]=e}}),zC=function(e){var r=UC(e.shape);return jC(e,r),r},Zs={},qC={get exports(){return Zs},set exports(t){Zs=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(o,s){for(var l=new Float64Array(o*s),p=0;p<l.length;p++)l[p]=a()*1e-4;return(0,n.default)(l,[o,s])};var r=Ia,n=i(r);function i(o){return o&&o.__esModule?o:{default:o}}function a(){var o=2*Math.random()-1,s=2*Math.random()-1,l=o*o+s*s;return l==0||l>1?a():o*Math.sqrt(-2*Math.log(l)/l)}t.exports=e.default})(qC,Zs);var Du={},WC={get exports(){return Du},set exports(t){Du=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(f,d){var g=f.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]);switch(d){case"euclidean":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=s(f.pick(v,null),f.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break;case"manhattan":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=l(f.pick(v,null),f.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break;case"jaccard":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=p(f.pick(v,null),f.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break;case"dice":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=c(f.pick(v,null),f.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break}return b};var r=Ia,n=o(r),i=yo,a=o(i);function o(f){return f&&f.__esModule?f:{default:f}}var s=(0,a.default)({args:["array","array"],pre:function(d,g){this.sum=0},body:function(d,g){var b=d-g;this.sum+=b*b},post:function(d,g){return Math.sqrt(this.sum)}}),l=(0,a.default)({args:["array","array"],pre:function(d,g){this.sum=0},body:function(d,g){this.sum+=Math.abs(d-g)},post:function(d,g){return this.sum}}),p=(0,a.default)({args:["array","array"],pre:function(d,g){this.tf=0,this.tt=0},body:function(d,g){var b=Math.round(d),v=Math.round(g);this.tf+=+(b!=v),this.tt+=+(b==1&&v==1)},post:function(d,g){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),c=(0,a.default)({args:["array","array"],pre:function(d,g){this.tf=0,this.tt=0},body:function(d,g){var b=Math.round(d),v=Math.round(g);this.tf+=+(b!=v),this.tt+=+(b==1&&v==1)},post:function(d,g){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});t.exports=e.default})(WC,Du);var Js={},HC={get exports(){return Js},set exports(t){Js=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(c,f){for(var d=100,g=c.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]),v=(0,n.default)(new Float64Array(g*g),[g,g]),m=void 0,D=void 0,B=1/0,w=Math.log(f),C=void 0,F=void 0,k=void 0,O=void 0,A=0;A<g;A++){m=1,D=-1/0,B=1/0;for(var x=0;x<d;x++){for(var U=0;U<g;U++)b.set(A,U,Math.exp(-c.get(A,U)*m));b.set(A,A,0),k=0;for(var U=0;U<g;U++)k+=b.get(A,U);k==0&&(k=s),O=0;for(var U=0;U<g;U++)b.set(A,U,b.get(A,U)/k),O+=c.get(A,U)*b.get(A,U);if(F=Math.log(k)+m*O,C=F-w,Math.abs(C)<=p)break;C>0?(D=m,B==1/0?m=m*2:m=(m+B)/2):(B=m,D==-1/0?m=m/2:m=(m+D)/2)}}a.default.add(v,b,b.transpose(1,0));var K=Math.max(a.default.sum(v),l);return a.default.divseq(v,K),a.default.maxseq(v,l),v};var r=Ia,n=o(r),i=Do,a=o(i);function o(c){return c&&c.__esModule?c:{default:c}}var s=1e-7,l=Number.EPSILON||2220446049250313e-31,p=1e-5;t.exports=e.default})(HC,Js);var Qs={},$C={get exports(){return Qs},set exports(t){Qs=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(g,b,v){var m=g.shape[0],D=g.shape[1],B=(0,n.default)(new Float64Array(m*m),[m,m]),w=(0,p.default)(g,"euclidean");d(w);var C=(v+1)/-2;a.default.powseq(a.default.divseq(a.default.addseq(w,1),v),C);for(var F=0;F<m;F++)w.set(F,F,0);var k=Math.max(a.default.sum(w),f);a.default.divs(B,w,k),a.default.maxseq(B,f);var O=(0,n.default)(new Float64Array(m*m),[m,m]),A=(0,n.default)(new Float64Array(m*m),[m,m]);a.default.div(O,b,B),a.default.logeq(O),a.default.assign(A,b);var x=a.default.sum(a.default.muleq(O,A)),U=(0,n.default)(new Float64Array(g.size),g.shape),K=(0,n.default)(new Float64Array(m*m),[m,m]);a.default.sub(K,b,B),a.default.muleq(K,w);for(var F=0;F<m;F++)for(var J=0;J<D;J++){var j=(0,n.default)(new Float64Array(g.shape[0]),[g.shape[0]]);a.default.assign(j,g.pick(null,J)),a.default.addseq(a.default.negeq(j),g.get(F,J)),a.default.muleq(j,K.pick(F,null)),U.set(F,J,a.default.sum(j))}var V=2*(v+1)/v;return a.default.mulseq(U,V),[x,U]};var r=Ia,n=c(r),i=Do,a=c(i),o=yo,s=c(o),l=Du,p=c(l);function c(g){return g&&g.__esModule?g:{default:g}}var f=Number.EPSILON||2220446049250313e-31,d=(0,s.default)({args:["array"],body:function(b){}});t.exports=e.default})($C,Qs);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function j(V,H){var z=[],Q=!0,X=!1,te=void 0;try{for(var le=V[Symbol.iterator](),be;!(Q=(be=le.next()).done)&&(z.push(be.value),!(H&&z.length===H));Q=!0);}catch(we){X=!0,te=we}finally{try{!Q&&le.return&&le.return()}finally{if(X)throw te}}return z}return function(V,H){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return j(V,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function j(V,H){for(var z=0;z<H.length;z++){var Q=H[z];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(V,Q.key,Q)}}return function(V,H,z){return H&&j(V.prototype,H),z&&j(V,z),V}}(),i=Ks,a=Ia,o=O(a),s=Do,l=O(s),p=AC,c=O(p),f=zC,d=O(f),g=yo,b=O(g),v=Zs,m=O(v),D=Du,B=O(D),w=Js,C=O(w),F=Qs,k=O(F);function O(j){return j&&j.__esModule?j:{default:j}}function A(j){if(Array.isArray(j)){for(var V=0,H=Array(j.length);V<j.length;V++)H[V]=j[V];return H}else return Array.from(j)}function x(j,V){if(!(j instanceof V))throw new TypeError("Cannot call a class as a function")}function U(j,V){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:j}function K(j,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);j.prototype=Object.create(V&&V.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(j,V):j.__proto__=V)}var J=function(j){K(V,j);function V(H){x(this,V);var z=U(this,Object.getPrototypeOf(V).call(this));return H=H||{},z.dim=H.dim||2,z.perplexity=H.perplexity||30,z.earlyExaggeration=H.earlyExaggeration||4,z.learningRate=H.learningRate||1e3,z.nIter=H.nIter||1e3,z.metric=H.metric||"euclidean",z.barneshut=H.barneshut||!1,z.inputData=null,z.outputEmbedding=null,z}return n(V,[{key:"init",value:function(z){z=z||{};var Q=z.data||[],X=z.type||"dense";if(X==="dense")this.inputData=(0,c.default)(Q);else if(X==="sparse"){for(var te=[],le=1,be=function(Dt){var Et=Math.max.apply(null,Q.map(function(ht){return ht[Dt]}))+1;te.push(Et),le*=Et},we=0;we<Q[0].length;we++)be(we);this.inputData=(0,o.default)(new Float64Array(le),te);var Oe=!0,Pe=!1,Te=void 0;try{for(var Re=Q[Symbol.iterator](),Ue;!(Oe=(Ue=Re.next()).done);Oe=!0){var We,Ye=Ue.value;(We=this.inputData).set.apply(We,A(Ye).concat([1]))}}catch(xe){Pe=!0,Te=xe}finally{try{!Oe&&Re.return&&Re.return()}finally{if(Pe)throw Te}}}else throw new Error("input data type must be dense or sparse");this.outputEmbedding=(0,m.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,B.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,C.default)(this.distances,this.perplexity);var z=Number.MAX_VALUE,Q=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),l.default.mulseq(this.P,this.earlyExaggeration);var X=this._gradDesc(Q,50,.5,0,0),te=r(X,2);z=te[0],Q=te[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var le=this._gradDesc(Q+1,100,.8,0,0),be=r(le,2);z=be[0],Q=be[1],this.emit("progressStatus","Final optimization with momentum 0.8"),l.default.divseq(this.P,this.earlyExaggeration);var we=this._gradDesc(Q+1,this.nIter,.8,1e-6,1e-6),Oe=r(we,2);return z=Oe[0],Q=Oe[1],this.emit("progressStatus","Optimization end"),[z,Q]}},{key:"rerun",value:function(){this.outputEmbedding=(0,m.default)(this.inputData.shape[0],this.dim);var z=this.run(),Q=r(z,2),X=Q[0],te=Q[1];return[X,te]}},{key:"getOutput",value:function(){return(0,d.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var z=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),Q=(0,o.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),X=0;X<this.outputEmbedding.shape[1];X++){var te=l.default.sup(l.default.abs(Q,this.outputEmbedding.pick(null,X)));l.default.divs(z.pick(null,X),this.outputEmbedding.pick(null,X),te)}return(0,d.default)(z)}},{key:"_gradDesc",value:function(z,Q,X){for(var te=arguments.length<=3||arguments[3]===void 0?1e-6:arguments[3],le=arguments.length<=4||arguments[4]===void 0?1e-6:arguments[4],be=30,we=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),Oe=new Float64Array(this.outputEmbedding.size),Pe=0;Pe<Oe.length;Pe++)Oe[Pe]=1;var Te=(0,o.default)(Oe,this.outputEmbedding.shape),Re=Number.MAX_VALUE,Ue=Number.MAX_VALUE,We=0,Ye=(0,b.default)({args:["array"],pre:function(er){this.sum=0},body:function(er){this.sum+=er*er},post:function(er){return Math.sqrt(this.sum)}}),xe=(0,b.default)({args:["array","array","array"],body:function(er,Nt,Jr){}}),Dt=void 0;for(Dt=z;Dt<Q;Dt++){var Et=(0,k.default)(this.outputEmbedding,this.P,this.alpha),ht=r(Et,2),lt=ht[0],Pt=ht[1],wr=Math.abs(lt-Re);Re=lt;var It=Ye(Pt);if(this.emit("progressIter",[Dt,Re,It]),Re<Ue)Ue=Re,We=Dt;else if(Dt-We>be)break;if(te>=It||le>=wr)break;xe(Te,we,Pt),l.default.muleq(Pt,Te);var dr=(0,o.default)(new Float64Array(Pt.size),Pt.shape);l.default.muls(dr,Pt,this.learningRate),l.default.mulseq(we,X),l.default.subeq(we,dr),l.default.addeq(this.outputEmbedding,we),this.emit("progressData",this.getOutputScaled())}return[Re,Dt]}}]),V}(i.EventEmitter);e.default=J,t.exports=e.default})(j6,Gs);const GC=$c(Gs);var Ic={},KC={get exports(){return Ic},set exports(t){Ic=t}};(function(t){var e=parseInt(Number.MAX_SAFE_INTEGER/2)||4503599627370496,r=0;function n(){this.C=null,this.row_covered=[],this.col_covered=[],this.n=0,this.Z0_r=0,this.Z0_c=0,this.marked=null,this.path=null}n.prototype.pad_matrix=function(s,l){l=l||r;var p=0,c=s.length,f;for(f=0;f<c;++f)s[f].length>p&&(p=s[f].length);c=p>c?p:c;var d=[];for(f=0;f<c;++f){for(var g=s[f]||[],b=g.slice();c>b.length;)b.push(l);d.push(b)}return d},n.prototype.compute=function(s,l){l=l||{},l.padValue=l.padValue||r,this.C=this.pad_matrix(s,l.padValue),this.n=this.C.length,this.original_length=s.length,this.original_width=s[0].length;for(var p=[];p.length<this.n;)p.push(!1);this.row_covered=p.slice(),this.col_covered=p.slice(),this.Z0_r=0,this.Z0_c=0,this.path=this.__make_matrix(this.n*2,0),this.marked=this.__make_matrix(this.n,0);for(var c=1,f={1:this.__step1,2:this.__step2,3:this.__step3,4:this.__step4,5:this.__step5,6:this.__step6};;){var d=f[c];if(!d)break;c=d.apply(this)}for(var g=[],b=0;b<this.original_length;++b)for(var v=0;v<this.original_width;++v)this.marked[b][v]==1&&g.push([b,v]);return g},n.prototype.__make_matrix=function(s,l){for(var p=[],c=0;c<s;++c){p[c]=[];for(var f=0;f<s;++f)p[c][f]=l}return p},n.prototype.__step1=function(){for(var s=0;s<this.n;++s)for(var l=Math.min.apply(Math,this.C[s]),p=0;p<this.n;++p)this.C[s][p]-=l;return 2},n.prototype.__step2=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)if(this.C[s][l]===0&&!this.col_covered[l]&&!this.row_covered[s]){this.marked[s][l]=1,this.col_covered[l]=!0,this.row_covered[s]=!0;break}return this.__clear_covers(),3},n.prototype.__step3=function(){for(var s=0,l=0;l<this.n;++l)for(var p=0;p<this.n;++p)this.marked[l][p]==1&&this.col_covered[p]==!1&&(this.col_covered[p]=!0,++s);return s>=this.n?7:4},n.prototype.__step4=function(){for(var s=!1,l=-1,p=-1,c=-1;!s;){var f=this.__find_a_zero();if(l=f[0],p=f[1],l<0)return 6;if(this.marked[l][p]=2,c=this.__find_star_in_row(l),c>=0)p=c,this.row_covered[l]=!0,this.col_covered[p]=!1;else return this.Z0_r=l,this.Z0_c=p,5}},n.prototype.__step5=function(){var s=0;this.path[s][0]=this.Z0_r,this.path[s][1]=this.Z0_c;for(var l=!1;!l;){var p=this.__find_star_in_col(this.path[s][1]);if(p>=0?(s++,this.path[s][0]=p,this.path[s][1]=this.path[s-1][1]):l=!0,!l){var c=this.__find_prime_in_row(this.path[s][0]);s++,this.path[s][0]=this.path[s-1][0],this.path[s][1]=c}}return this.__convert_path(this.path,s),this.__clear_covers(),this.__erase_primes(),3},n.prototype.__step6=function(){for(var s=this.__find_smallest(),l=0;l<this.n;++l)for(var p=0;p<this.n;++p)this.row_covered[l]&&(this.C[l][p]+=s),this.col_covered[p]||(this.C[l][p]-=s);return 4},n.prototype.__find_smallest=function(){for(var s=e,l=0;l<this.n;++l)for(var p=0;p<this.n;++p)!this.row_covered[l]&&!this.col_covered[p]&&s>this.C[l][p]&&(s=this.C[l][p]);return s},n.prototype.__find_a_zero=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)if(this.C[s][l]===0&&!this.row_covered[s]&&!this.col_covered[l])return[s,l];return[-1,-1]},n.prototype.__find_star_in_row=function(s){for(var l=0;l<this.n;++l)if(this.marked[s][l]==1)return l;return-1},n.prototype.__find_star_in_col=function(s){for(var l=0;l<this.n;++l)if(this.marked[l][s]==1)return l;return-1},n.prototype.__find_prime_in_row=function(s){for(var l=0;l<this.n;++l)if(this.marked[s][l]==2)return l;return-1},n.prototype.__convert_path=function(s,l){for(var p=0;p<=l;++p)this.marked[s[p][0]][s[p][1]]=this.marked[s[p][0]][s[p][1]]==1?0:1},n.prototype.__clear_covers=function(){for(var s=0;s<this.n;++s)this.row_covered[s]=!1,this.col_covered[s]=!1},n.prototype.__erase_primes=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)this.marked[s][l]==2&&(this.marked[s][l]=0)};function i(s,l){var p,c;if(!l){var f=-1/0;for(p=0;p<s.length;++p)for(c=0;c<s[p].length;++c)s[p][c]>f&&(f=s[p][c]);l=function(b){return f-b}}var d=[];for(p=0;p<s.length;++p){var g=s[p];for(d[p]=[],c=0;c<g.length;++c)d[p][c]=l(s[p][c])}return d}function a(s){var l=[],p,c;for(p=0;p<s.length;++p)for(c=0;c<s[p].length;++c){var f=String(s[p][c]).length;(!l[c]||f>=l[c])&&(l[c]=f)}var d="";for(p=0;p<s.length;++p){for(c=0;c<s[p].length;++c){for(var g=String(s[p][c]);g.length<l[c];)g=" "+g;d+=g,c!=s[p].length-1&&(d+=" ")}p!=s[p].length-1&&(d+=`
`)}return d}function o(s,l){var p=new n;return p.compute(s,l)}o.version="1.2.2",o.format_matrix=a,o.make_cost_matrix=i,o.Munkres=n,t.exports&&(t.exports=o)})(KC);const YC=Ic;function j1(t){return t<2?0:t<4?2:t<6?4:t<8?6:8}function Mi(t,e){return new Tc.KMEANS().run(t,e)}function ZC(t,e){return t.map(r=>e.map(n=>Ma(r,n)))}function z1(t){switch(t){case 2:return[qr(Nr([0,0],[0,1]),.5),qr(Nr([1,0],[1,1]),.5)];case 4:return[[0,0],[0,1],[1,1],[1,0]];case 6:return[qr(Nr([0,0],[0,1]),.5),qr(Nr([1,0],[1,1]),.5),[0,0],[0,1],[1,1],[1,0]];case 8:return[qr(Nr([0,0],[0,1]),.5),qr(Nr([1,0],[1,1]),.5),[0,0],[0,1],[1,1],[1,0],qr(Nr([0,0],[1,0]),.5),qr(Nr([0,1],[1,1]),.5)];default:return[]}}function q1(t,e){if(t.length!==e.length)throw new Error("Both sets should have the same number of points");const r=ZC(t,e),n=YC(r);return n?n.map(([i,a])=>({ids:[i,a],points:[t[i],e[a]]})):null}function tf(t){let e=new GC({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:5e3,metric:"euclidean"});const r=Object.keys(t),n=Object.values(t);e.init({data:n,type:"dense"}),e.run();let a=e.getOutputScaled().map(([s,l])=>[(s+1)/2,(l+1)/2]);return r.reduce((s,l,p)=>(s[l]=a[p],s),{})}function JC(t){let e,r,n,i,a,o,s;r=new C1({props:{center:t[6],dimensions:t[2],onMarkerMove:t[7],dataPoints:t[4]}}),a=new F1({props:{useExponentialScaling:t[3].embedExponentialScaling,toggleExponentialScaling:t[9],exponentialScaling:t[3].embedWeightScaling,setExponentialScaling:t[10],connectionLimit:t[3].embedPromptLimit||t[5],setConnectionLimit:t[8],maxConnectionLimit:t[5],clusterCount:t[3].embedClusters||0,setClusterCount:t[11],maxClusterCount:t[5],onShuffle:t[12]}});const l=t[18].default,p=yu(l,t,t[17],null);return{c(){e=q("div"),Ve(r.$$.fragment),i=Ee(),Ve(a.$$.fragment),o=Ee(),p&&p.c(),this.h()},l(c){e=W(c,"DIV",{class:!0});var f=R(e);je(r.$$.fragment,f),f.forEach(M),i=Ae(c),je(a.$$.fragment,c),o=Ae(c),p&&p.l(c),this.h()},h(){S(e,"class","w-full h-full"),Ni(()=>t[19].call(e))},m(c,f){se(c,e,f),ze(r,e,null),n=Pa(e,t[19].bind(e)),se(c,i,f),ze(a,c,f),se(c,o,f),p&&p.m(c,f),s=!0},p(c,[f]){const d={};f&64&&(d.center=c[6]),f&4&&(d.dimensions=c[2]),f&16&&(d.dataPoints=c[4]),r.$set(d);const g={};f&8&&(g.useExponentialScaling=c[3].embedExponentialScaling),f&8&&(g.exponentialScaling=c[3].embedWeightScaling),f&40&&(g.connectionLimit=c[3].embedPromptLimit||c[5]),f&32&&(g.maxConnectionLimit=c[5]),f&8&&(g.clusterCount=c[3].embedClusters||0),f&32&&(g.maxClusterCount=c[5]),a.$set(g),p&&p.p&&(!s||f&131072)&&wu(p,l,c,c[17],s?Au(l,c[17],f,null):Eu(c[17]),null)},i(c){s||(fe(r.$$.fragment,c),fe(a.$$.fragment,c),fe(p,c),s=!0)},o(c){ve(r.$$.fragment,c),ve(a.$$.fragment,c),ve(p,c),s=!1},d(c){c&&M(e),qe(r),n(),c&&M(i),qe(a,c),c&&M(o),p&&p.d(c)}}}function QC(t,e,r){let n,i,a,o,s,l,p,c,f;Ge(t,kc,j=>r(16,c=j)),Ge(t,ot,j=>r(3,f=j));let{$$slots:d={},$$scope:g}=e,b=0,v=0,m={};function D(j){c&&f.scaledEmbedMappings&&(F(),C(o,l,p,j))}function B(j,V){j&&V&&(F(),C(o,l,p,s))}function w(j,V){C(o,j,V,s)}function C(j,V,H,z){if(!m)return;let Q={...f.weightedPrompts},X=0;Object.values(m).forEach(we=>{Object.values(m).forEach(Oe=>{const Pe=Ma(we.xy,Oe.xy);Pe>X&&(X=Pe)})});const te=Object.entries(m).reduce((we,[Oe,Pe])=>{const Te=Ma(j,Pe.xy);return we[parseInt(Oe)]=Te,we},{}),le=(we,Oe)=>{const Pe=we?Math.round(Math.pow(1-Oe/X,H)*100)/100:0;return Pe<0?0:Pe},be=(we,Oe)=>{const Pe=we?Math.round((1-Oe/X)*100)/100:0;return Pe<0?0:Pe};Object.entries(te).sort((we,Oe)=>we[1]-Oe[1]).forEach(([we,Oe],Pe)=>{if(!Q[parseInt(we)])return;const Te=Pe<z,Re=V?le(Te,Oe):be(Te,Oe);Q[parseInt(we)]={...Q[parseInt(we)],embedWeight:Re},r(4,m[parseInt(we)].opacity=an(Re),m),r(4,m[parseInt(we)].connected=Te,m)}),ot.update({...f,embedMarker:o,weightedPrompts:Q})}function F(){if(!c||!f.scaledEmbedMappings)return;const j=Object.keys(f.scaledEmbedMappings),V=z=>{if(!z.length)return i;const Q=z.map(X=>H[X].xy);return Us(Q)},H=j.reduce((z,Q,X)=>(z[Q]={xy:f.scaledEmbedMappings[X],text:f.weightedPrompts[X].text,connected:!0,opacity:1},z),{});if(f.embedClusters&&f.embedClusterSets){const z=f.embedClusters,Q=f.embedClusterSets[z];let X=Q.map(be=>V(be));const te=z1(z),le=q1(X,te);le&&le.forEach(be=>{const we=be.ids[0],Oe=be.points[1];Q[we].forEach(Pe=>{H[Pe].xy=Us([H[Pe].xy,Oe])})})}r(4,m=H)}function k(j){o=j,C(o,l,p,s)}function O(j){j>0&&j<=a&&ot.update({...f,embedPromptLimit:j})}function A(){ot.update({...f,embedExponentialScaling:!f.embedExponentialScaling})}function x(j){ot.update({...f,embedWeightScaling:j})}function U(j){[0,2,4,6,8].indexOf(j)!==-1&&ot.update({...f,embedClusters:j})}async function K(){ot.update({...f,scaledEmbedMappings:tf(c)})}function J(){b=this.clientWidth,v=this.clientHeight,r(0,b),r(1,v)}return t.$$set=j=>{"$$scope"in j&&r(17,g=j.$$scope)},t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[b||250,v||250]),t.$$.dirty&4&&r(6,i=Ta(n)),t.$$.dirty&8&&r(5,a=Object.keys(f.weightedPrompts||{}).length),t.$$.dirty&8&&(o=f.embedMarker||[.5,.5]),t.$$.dirty&8&&r(13,s=f.embedPromptLimit||Object.keys(f.weightedPrompts).length),t.$$.dirty&8&&r(15,l=f.embedExponentialScaling),t.$$.dirty&8&&r(14,p=f.embedWeightScaling),t.$$.dirty&65544&&c&&Object.keys(c).length<f.embedClusters&&U(j1(Object.keys(c).length)),t.$$.dirty&49152&&w(l,p),t.$$.dirty&65544&&B(c,f.scaledEmbedMappings),t.$$.dirty&8192&&D(s)},[b,v,n,f,m,a,i,k,O,A,x,U,K,s,p,l,c,g,d,J]}class XC extends Xe{constructor(e){super(),et(this,e,QC,JC,tt,{})}}const Hl="oKey";function eF(){const t=sr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Hl]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[Hl]=a,r(a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[Hl],r(""))}}}const di=eF(),Dd="concept";function tF(){const t=sr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith(Dd+"_")){const s=o.split(/_(.*)/s)[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{if(!a||!i)return;const s=Ot(t);s[a]=o,localStorage[`concept_${a}`]=JSON.stringify(o),r(s)},get:()=>Ot(t),remove:a=>{if(!a||!i)return;const o=Ot(t);delete o[a],delete localStorage[`concept_${a}`],r(o)},delete:()=>{i&&(delete localStorage[Dd],r({}))}}}const Ur=tF(),rF=Fu(Ur,t=>Object.entries(t).reduce((e,[r,n])=>(n&&(e[r]=n),e),{}));function nF(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!0,pending:sF,then:uF,catch:aF,value:7,error:8,blocks:[,,,]};return Ms(r=t[2],i),{c(){e=Ft(),i.block.c()},l(a){e=Ft(),i.block.l(a)},m(a,o){se(a,e,o),i.block.m(a,i.anchor=o),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(a,o){t=a,i.ctx=t,o&4&&r!==(r=t[2])&&Ms(r,i)||Lp(i,t,o)},i(a){n||(fe(i.block),n=!0)},o(a){for(let o=0;o<3;o+=1){const s=i.blocks[o];ve(s)}n=!1},d(a){a&&M(e),i.block.d(a),i.token=null,i=null}}}function iF(t){let e,r,n,i,a;return{c(){e=q("div"),r=q("div"),n=q("div"),i=q("p"),a=Se("Set OpenAI key in settings to use embedding map."),this.h()},l(o){e=W(o,"DIV",{class:!0});var s=R(e);r=W(s,"DIV",{class:!0});var l=R(r);n=W(l,"DIV",{class:!0});var p=R(n);i=W(p,"P",{class:!0});var c=R(i);a=Be(c,"Set OpenAI key in settings to use embedding map."),c.forEach(M),p.forEach(M),l.forEach(M),s.forEach(M),this.h()},h(){S(i,"class","text-center text-lg"),S(n,"class","h-20 w-52"),S(r,"class","flex flex-col justify-center"),S(e,"class","w-full h-full flex justify-center")},m(o,s){se(o,e,s),T(e,r),T(r,n),T(n,i),T(i,a)},p:Me,i:Me,o:Me,d(o){o&&M(e)}}}function aF(t){let e,r=t[8].message+"",n;return{c(){e=q("p"),n=Se(r),this.h()},l(i){e=W(i,"P",{style:!0});var a=R(e);n=Be(a,r),a.forEach(M),this.h()},h(){Bt(e,"color","red")},m(i,a){se(i,e,a),T(e,n)},p(i,a){a&4&&r!==(r=i[8].message+"")&&hr(n,r)},i:Me,o:Me,d(i){i&&M(e)}}}function uF(t){let e,r;return e=new XC({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p:Me,i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function sF(t){let e,r,n,i,a,o;return{c(){e=q("div"),r=q("div"),n=q("div"),i=q("progress"),this.h()},l(s){e=W(s,"DIV",{class:!0});var l=R(e);r=W(l,"DIV",{class:!0});var p=R(r);n=W(p,"DIV",{class:!0});var c=R(n);i=W(c,"PROGRESS",{class:!0,max:!0}),R(i).forEach(M),c.forEach(M),p.forEach(M),l.forEach(M),this.h()},h(){S(i,"class","progress progress-primary w-56"),i.value=a=Object.keys(t[3]).length,S(i,"max",o=Object.keys(t[0].weightedPrompts).length),S(n,"class","h-20 w-52"),S(r,"class","flex flex-col justify-center"),S(e,"class","w-full h-full flex justify-center")},m(s,l){se(s,e,l),T(e,r),T(r,n),T(n,i)},p(s,l){l&8&&a!==(a=Object.keys(s[3]).length)&&(i.value=a),l&1&&o!==(o=Object.keys(s[0].weightedPrompts).length)&&S(i,"max",o)},i:Me,o:Me,d(s){s&&M(e)}}}function oF(t){let e,r,n,i,a;const o=[iF,nF],s=[];function l(p,c){return p[1]?1:0}return e=l(t),r=s[e]=o[e](t),i=new Bu({}),{c(){r.c(),n=Ee(),Ve(i.$$.fragment)},l(p){r.l(p),n=Ae(p),je(i.$$.fragment,p)},m(p,c){s[e].m(p,c),se(p,n,c),ze(i,p,c),a=!0},p(p,[c]){let f=e;e=l(p),e===f?s[e].p(p,c):(ar(),ve(s[f],1,1,()=>{s[f]=null}),ur(),r=s[e],r?r.p(p,c):(r=s[e]=o[e](p),r.c()),fe(r,1),r.m(n.parentNode,n))},i(p){a||(fe(r),fe(i.$$.fragment,p),a=!0)},o(p){ve(r),ve(i.$$.fragment,p),a=!1},d(p){s[e].d(p),p&&M(n),qe(i,p)}}}function lF(t,e){return e?t.embedClusterSets?Object.entries(e).length!==Object.entries(t.weightedPrompts).length?(console.log("embeddings length mismatch",Object.entries(e).length,Object.entries(t.weightedPrompts).length),!0):(t.lastPromptChange||0)>(t.lastEmbeddingChange||0)?(console.log("prompt change after embedding change"),!0):!1:(console.log("no active cluster sets"),!0):(console.log("no active embeddings"),!0)}function cF(t,e,r){let n,i,a;Ge(t,ot,c=>r(0,n=c)),Ge(t,di,c=>r(1,i=c)),Ge(t,kc,c=>r(4,a=c));let o=null,s={};async function l(c){return console.log("waiting for embedding for",c),new Promise((f,d)=>{const g=()=>{const b=Ur.get()[c];console.log("embeddingFromConcept",b),b?f(b):b===null?setTimeout(g,500):b===void 0?(console.log("setting embedding to null for",c),Ur.update(c,null),setTimeout(g,5e3)):(console.log("not found embedding for",c,b),d(b))};g()})}async function p(){if(console.log("fetching embeddings"),!i||!n.weightedPrompts)return;const c=Object.entries(n.weightedPrompts).map(([D,B])=>[D,B.text]);r(3,s={});for(let D of c){console.log("fetching embedding for",D[1]);const B=await l(D[1]);r(3,s[D[0]]=B,s)}let f=Object.entries(s).sort((D,B)=>D[0]-B[0]);const d=D=>new Array(D).fill(null).map(()=>[]);console.log("clustering embeddings");const g=f.length>=2?Mi(f.map(D=>D[1]),2):[f.map(D=>D[0])];console.log("set of 2 complete");const b=f.length>=4?Mi(f.map(D=>D[1]),4):g;console.log("set of 4 complete");const v=f.length>=6?Mi(f.map(D=>D[1]),6):b;console.log("set of 6 complete");const m=f.length>=8?Mi(f.map(D=>D[1]),8):v;console.log("set of 8 complete"),ot.update({...n,embedClusterSets:{2:[...g,...d(2-g.length)],4:[...b,...d(4-b.length)],6:[...v,...d(6-v.length)],8:[...m,...d(8-m.length)]},lastEmbeddingChange:Date.now(),scaledEmbedMappings:tf(s)}),kc.set(s),console.log("embeddings complete")}return t.$$.update=()=>{t.$$.dirty&19&&i&&lF(n,a)&&(console.log("Embeddings require update"),r(2,o=p()))},[n,i,o,s,a]}class fF extends Xe{constructor(e){super(),et(this,e,cF,oF,tt,{})}}function hF(t){let e,r,n,i;return{c(){e=ut("g"),r=ut("circle"),this.h()},l(a){e=st(a,"g",{});var o=R(e);r=st(o,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),R(r).forEach(M),o.forEach(M),this.h()},h(){S(r,"cx",n=t[0][0]),S(r,"cy",i=t[0][1]),S(r,"r",t[1]),S(r,"stroke",t[3]),S(r,"stroke-width",t[2]),Bt(r,"fill","rgba(0,0,0,0)")},m(a,o){se(a,e,o),T(e,r)},p(a,[o]){o&1&&n!==(n=a[0][0])&&S(r,"cx",n),o&1&&i!==(i=a[0][1])&&S(r,"cy",i),o&2&&S(r,"r",a[1]),o&8&&S(r,"stroke",a[3]),o&4&&S(r,"stroke-width",a[2])},i:Me,o:Me,d(a){a&&M(e)}}}function dF(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=20}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class pF extends Xe{constructor(e){super(),et(this,e,dF,hF,tt,{xy:0,radius:1,stroke:2,color:3})}}function gF(t){let e,r,n,i,a;return{c(){e=ut("polygon"),this.h()},l(o){e=st(o,"polygon",{points:!0,"stroke-width":!0,fill:!0,transform:!0}),R(e).forEach(M),this.h()},h(){S(e,"points",r=`${t[7][0]},${t[7][1]} ${t[9][0]},${t[9][1]} ${t[8][0]},${t[8][1]} ${t[6][0]},${t[6][1]} ${t[4][0]},${t[4][1]} ${t[5][0]},${t[5][1]}`),S(e,"stroke-width",4),S(e,"fill",t[3]),S(e,"transform",n=`rotate(${t[1].toFixed(2)} ${t[0][0]} ${t[0][1]}) rotate(${t[2]?"180":"0"} ${(t[7][0]+t[6][0])/2} ${(t[7][1]+t[6][1])/2})`)},m(o,s){se(o,e,s),i||(a=[_e(e,"mouseover",t[10]),_e(e,"mouseout",t[11]),_e(e,"mousedown",t[12]),_e(e,"touchstart",t[12])],i=!0)},p(o,[s]){s&1008&&r!==(r=`${o[7][0]},${o[7][1]} ${o[9][0]},${o[9][1]} ${o[8][0]},${o[8][1]} ${o[6][0]},${o[6][1]} ${o[4][0]},${o[4][1]} ${o[5][0]},${o[5][1]}`)&&S(e,"points",r),s&8&&S(e,"fill",o[3]),s&199&&n!==(n=`rotate(${o[1].toFixed(2)} ${o[0][0]} ${o[0][1]}) rotate(${o[2]?"180":"0"} ${(o[7][0]+o[6][0])/2} ${(o[7][1]+o[6][1])/2})`)&&S(e,"transform",n)},i:Me,o:Me,d(o){o&&M(e),i=!1,zt(a)}}}function vF(t,e,r){let n,i,a,o,s,l,{xy:p=[500,500]}=e,{radius:c=400}=e,{stroke:f=20}=e,{color:d="rgba(46,67,101, 0.4)"}=e,{hoverColor:g="white"}=e,{angle:b=0}=e,{handleMouseDown:v=F=>{}}=e,{reverse:m=!1}=e,D=d;function B(){r(3,D=g)}function w(){r(3,D=d)}function C(F){v(F)}return t.$$set=F=>{"xy"in F&&r(0,p=F.xy),"radius"in F&&r(13,c=F.radius),"stroke"in F&&r(14,f=F.stroke),"color"in F&&r(15,d=F.color),"hoverColor"in F&&r(16,g=F.hoverColor),"angle"in F&&r(1,b=F.angle),"handleMouseDown"in F&&r(17,v=F.handleMouseDown),"reverse"in F&&r(2,m=F.reverse)},t.$$.update=()=>{t.$$.dirty&24577&&r(9,n=Lr(p,[-4,1],c-f/2)),t.$$.dirty&24577&&r(8,i=Lr(p,[1,1],c-f/2)),t.$$.dirty&8193&&r(7,a=Lr(p,[0,1],c)),t.$$.dirty&8193&&r(6,o=Lr(p,[4,1],c)),t.$$.dirty&24577&&r(5,s=Lr(p,[-3,1],c+f/2)),t.$$.dirty&24577&&r(4,l=Lr(p,[1,1],c+f/2))},[p,b,m,D,l,s,o,a,i,n,B,w,C,c,f,d,g,v]}class mF extends Xe{constructor(e){super(),et(this,e,vF,gF,tt,{xy:0,radius:13,stroke:14,color:15,hoverColor:16,angle:1,handleMouseDown:17,reverse:2})}}function yd(t,e,r){const n=t.slice();return n[21]=e[r][0],n[22]=e[r][1],n}function wd(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,a;e=new Kc({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),s=[];for(let c=0;c<o.length;c+=1)s[c]=Ed(yd(t,o,c));const l=c=>ve(s[c],1,1,()=>{s[c]=null});let p=n&&Ad(t);return{c(){Ve(e.$$.fragment);for(let c=0;c<s.length;c+=1)s[c].c();r=Ft(),p&&p.c(),i=Ft()},l(c){je(e.$$.fragment,c);for(let f=0;f<s.length;f+=1)s[f].l(c);r=Ft(),p&&p.l(c),i=Ft()},m(c,f){ze(e,c,f);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(c,f);se(c,r,f),p&&p.m(c,f),se(c,i,f),a=!0},p(c,f){const d={};if(f&1&&(d.xy=c[0]),f&2&&(d.radius=c[1]),e.$set(d),f&1660){o=Object.entries(c[5].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=yd(c,o,g);s[g]?(s[g].p(b,f),fe(s[g],1)):(s[g]=Ed(b),s[g].c(),fe(s[g],1),s[g].m(r.parentNode,r))}for(ar(),g=o.length;g<s.length;g+=1)l(g);ur()}f&32&&(n=Object.entries(c[5].weightedPrompts).length>0),n?p?(p.p(c,f),f&32&&fe(p,1)):(p=Ad(c),p.c(),fe(p,1),p.m(i.parentNode,i)):p&&(ar(),ve(p,1,1,()=>{p=null}),ur())},i(c){if(!a){fe(e.$$.fragment,c);for(let f=0;f<o.length;f+=1)fe(s[f]);fe(p),a=!0}},o(c){ve(e.$$.fragment,c),s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)ve(s[f]);ve(p),a=!1},d(c){qe(e,c),Cu(s,c),c&&M(r),p&&p.d(c),c&&M(i)}}}function Ed(t){let e,r,n;e=new vo({props:{xy:t[10](t[6][t[21]].xy,Wr(t[3],$t(t[22].text).length,t[4])),color:`rgba(255,255,255,${an(t[6][t[21]].unitWeight)}`,wh:Wr(t[3],$t(t[22].text).length,t[4]),fontSize:t[4],text:$t(t[22].text)}});function i(){return t[15](t[21])}return r=new ka({props:{xy:t[6][t[21]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:i}}),{c(){Ve(e.$$.fragment),Ve(r.$$.fragment)},l(a){je(e.$$.fragment,a),je(r.$$.fragment,a)},m(a,o){ze(e,a,o),ze(r,a,o),n=!0},p(a,o){t=a;const s={};o&120&&(s.xy=t[10](t[6][t[21]].xy,Wr(t[3],$t(t[22].text).length,t[4]))),o&96&&(s.color=`rgba(255,255,255,${an(t[6][t[21]].unitWeight)}`),o&56&&(s.wh=Wr(t[3],$t(t[22].text).length,t[4])),o&16&&(s.fontSize=t[4]),o&32&&(s.text=$t(t[22].text)),e.$set(s);const l={};o&96&&(l.xy=t[6][t[21]].xy),o&4&&(l.radius=t[2]),o&32&&(l.handleMouseDown=i),r.$set(l)},i(a){n||(fe(e.$$.fragment,a),fe(r.$$.fragment,a),n=!0)},o(a){ve(e.$$.fragment,a),ve(r.$$.fragment,a),n=!1},d(a){qe(e,a),qe(r,a)}}}function Ad(t){let e,r,n;return e=new pF({props:{xy:t[0],radius:t[7],stroke:30}}),r=new mF({props:{reverse:t[5].ringReverse,xy:t[0],radius:t[7],stroke:30,angle:t[5].ringStartAngle,color:"rgba(136,157,191, 1)",handleMouseDown:t[16]}}),{c(){Ve(e.$$.fragment),Ve(r.$$.fragment)},l(i){je(e.$$.fragment,i),je(r.$$.fragment,i)},m(i,a){ze(e,i,a),ze(r,i,a),n=!0},p(i,a){const o={};a&1&&(o.xy=i[0]),a&128&&(o.radius=i[7]),e.$set(o);const s={};a&32&&(s.reverse=i[5].ringReverse),a&1&&(s.xy=i[0]),a&128&&(s.radius=i[7]),a&32&&(s.angle=i[5].ringStartAngle),r.$set(s)},i(i){n||(fe(e.$$.fragment,i),fe(r.$$.fragment,i),n=!0)},o(i){ve(e.$$.fragment,i),ve(r.$$.fragment,i),n=!1},d(i){qe(e,i),qe(r,i)}}}function _F(t){let e,r,n,i,a,o=t[6]&&t[5].weightedPrompts&&wd(t);const s=t[14].default,l=yu(s,t,t[13],null);return{c(){e=ut("svg"),o&&o.c(),r=Ee(),l&&l.c(),this.h()},l(p){e=st(p,"svg",{id:!0,class:!0});var c=R(e);o&&o.l(c),c.forEach(M),r=Ae(p),l&&l.l(p),this.h()},h(){S(e,"id","svg"),S(e,"class","w-full h-full")},m(p,c){se(p,e,c),o&&o.m(e,null),se(p,r,c),l&&l.m(p,c),n=!0,i||(a=[_e(e,"mousemove",t[11]),_e(e,"touchmove",t[11]),_e(e,"mouseup",t[8]),_e(e,"touchend",t[8]),_e(e,"dblclick",t[12])],i=!0)},p(p,[c]){p[6]&&p[5].weightedPrompts?o?(o.p(p,c),c&96&&fe(o,1)):(o=wd(p),o.c(),fe(o,1),o.m(e,null)):o&&(ar(),ve(o,1,1,()=>{o=null}),ur()),l&&l.p&&(!n||c&8192)&&wu(l,s,p,p[13],n?Au(s,p[13],c,null):Eu(p[13]),null)},i(p){n||(fe(o),fe(l,p),n=!0)},o(p){ve(o),ve(l,p),n=!1},d(p){p&&M(e),o&&o.d(),p&&M(r),l&&l.d(p),i=!1,zt(a)}}}function Cd(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const o=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function bF(t,e,r){let n,i,a;Ge(t,ot,A=>r(5,a=A));let{$$slots:o={},$$scope:s}=e,{center:l=[450,450]}=e,{radius:p=250}=e,{pointRadius:c=10}=e,{textWidth:f=150}=e,{fontSize:d=13}=e,g=[0,0],b=null;function v(A){b=null}function m(A){b=A}function D(A,x){let U=Ln(A,l,p)[0]-180;U<0&&(U+=360);const K=Yc(Ta(x),U);return Nr(A,K)}function B(A){console.log(p,n);const x=zr(Ln(mu(A,l,n),l,n)[0]);r(6,i=F(a.weightedPrompts,l,p,a.ringWeightScaling,a.ringExponentialScaling,x,a.ringAngles))}function w(A){if(g=Pi(A),b==="main")B(g);else if(b){const x={...a.weightedPrompts[b]},U=mu(g,l,p),K=Ln(U,l,p)[0],J={...a.ringAngles};J[x.id]=K;const j={...a.weightedPrompts};j[b]=x,r(6,i=F(j,l,p,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,J))}}function C(A){g=Pi(A),B(g)}function F(A,x,U,K,J,j,V){if(!A||!x||!U||!K)return null;let H=Object.entries(A).reduce((Q,[X,te])=>{const be=a.ringReverse?j-V[X]:V[X]-j,we=zr(be),Oe=Math.pow(1-we/360,J?K:1);return Q[X]={angleDifference:we,xy:Lr(x,[V[X],1],U),unitWeight:Oe},Q},{});const z={...A};return Object.entries(H).forEach(([Q,X])=>{z[Q].ringWeight=X.unitWeight}),ot.update({...a,ringStartAngle:j,weightedPrompts:z,ringAngles:V}),H}const k=A=>m(A),O=()=>m("main");return t.$$set=A=>{"center"in A&&r(0,l=A.center),"radius"in A&&r(1,p=A.radius),"pointRadius"in A&&r(2,c=A.pointRadius),"textWidth"in A&&r(3,f=A.textWidth),"fontSize"in A&&r(4,d=A.fontSize),"$$scope"in A&&r(13,s=A.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&r(7,n=p-30),t.$$.dirty&32&&Object.keys(a.ringAngles).length!==Object.keys(a.weightedPrompts).length&&ot.update({...a,ringAngles:Cd(a.weightedPrompts,{})}),t.$$.dirty&35&&r(6,i=F(a.weightedPrompts,l,p,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,a.ringAngles||Cd(a.weightedPrompts,{})))},[l,p,c,f,d,a,i,n,v,m,D,w,C,s,o,k,O]}class DF extends Xe{constructor(e){super(),et(this,e,bF,_F,tt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function Fd(t){let e,r,n,i,a,o,s,l;return{c(){e=q("div"),r=q("label"),n=q("span"),i=Se("Scaling Power"),a=Ee(),o=q("input"),this.h()},l(p){e=W(p,"DIV",{class:!0});var c=R(e);r=W(c,"LABEL",{class:!0});var f=R(r);n=W(f,"SPAN",{class:!0});var d=R(n);i=Be(d,"Scaling Power"),d.forEach(M),f.forEach(M),a=Ae(c),o=W(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(M),this.h()},h(){S(n,"class","label-text"),S(r,"class","label"),S(o,"type","range"),S(o,"min","0.5"),S(o,"max","5"),S(o,"step","0.1"),S(o,"class","range range-xs"),S(e,"class","w-full px-2")},m(p,c){se(p,e,c),T(e,r),T(r,n),T(n,i),T(e,a),T(e,o),nn(o,t[0]),s||(l=[_e(o,"change",t[7]),_e(o,"input",t[7])],s=!0)},p(p,c){c&1&&nn(o,p[0])},d(p){p&&M(e),s=!1,zt(l)}}}function yF(t){let e,r,n,i,a,o,s,l,p,c,f,d,g,b,v,m,D,B,w,C,F;r=new DF({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let k=t[1]&&Fd(t);return B=new Bu({}),{c(){e=q("div"),Ve(r.$$.fragment),i=Ee(),a=q("div"),o=q("div"),s=q("label"),l=q("span"),p=Se("Exponential Scaling"),c=Ee(),f=q("input"),d=Ee(),k&&k.c(),g=Ee(),b=q("div"),v=q("button"),m=Se("Reverse"),D=Ee(),Ve(B.$$.fragment),this.h()},l(O){e=W(O,"DIV",{class:!0});var A=R(e);je(r.$$.fragment,A),A.forEach(M),i=Ae(O),a=W(O,"DIV",{class:!0});var x=R(a);o=W(x,"DIV",{class:!0});var U=R(o);s=W(U,"LABEL",{class:!0});var K=R(s);l=W(K,"SPAN",{class:!0});var J=R(l);p=Be(J,"Exponential Scaling"),J.forEach(M),K.forEach(M),c=Ae(U),f=W(U,"INPUT",{type:!0,class:!0}),U.forEach(M),d=Ae(x),k&&k.l(x),g=Ae(x),b=W(x,"DIV",{class:!0});var j=R(b);v=W(j,"BUTTON",{class:!0});var V=R(v);m=Be(V,"Reverse"),V.forEach(M),j.forEach(M),x.forEach(M),D=Ae(O),je(B.$$.fragment,O),this.h()},h(){S(e,"class","w-full h-full"),Ni(()=>t[5].call(e)),S(l,"class","label-text"),S(s,"class","label"),S(f,"type","checkbox"),S(f,"class","toggle toggle-xs"),S(o,"class","w-52 px-2"),S(v,"class","btn btn-xs btn-primary"),S(b,"class","w-32 px-2 pb-1 flex flex-col justify-end"),S(a,"class","px-2 py-4 pb-0 flex")},m(O,A){se(O,e,A),ze(r,e,null),n=Pa(e,t[5].bind(e)),se(O,i,A),se(O,a,A),T(a,o),T(o,s),T(s,l),T(l,p),T(o,c),T(o,f),f.checked=t[1],T(a,d),k&&k.m(a,null),T(a,g),T(a,b),T(b,v),T(v,m),se(O,D,A),ze(B,O,A),w=!0,C||(F=[_e(f,"change",t[6]),_e(v,"click",t[4])],C=!0)},p(O,[A]){const x={};A&12&&(x.center=[Math.round(O[2]/2),Math.round(O[3]/2)]),A&12&&(x.radius=Math.round(Math.min(O[2],O[3])/2)-150),r.$set(x),A&2&&(f.checked=O[1]),O[1]?k?k.p(O,A):(k=Fd(O),k.c(),k.m(a,g)):k&&(k.d(1),k=null)},i(O){w||(fe(r.$$.fragment,O),fe(B.$$.fragment,O),w=!0)},o(O){ve(r.$$.fragment,O),ve(B.$$.fragment,O),w=!1},d(O){O&&M(e),qe(r),n(),O&&M(i),O&&M(a),k&&k.d(),O&&M(D),qe(B,O),C=!1,zt(F)}}}function wF(t,e,r){let n;Ge(t,ot,d=>r(8,n=d));let i,a,o=n.ringWeightScaling||2,s=qc(n.ringExponentialScaling)?!0:n.ringExponentialScaling;function l(){ot.update({...ot.get(),ringReverse:!n.ringReverse})}function p(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function c(){s=this.checked,r(1,s)}function f(){o=Np(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&ot.update({...ot.get(),ringExponentialScaling:s,ringWeightScaling:o})},[o,s,i,a,l,p,c,f]}class EF extends Xe{constructor(e){super(),et(this,e,wF,yF,tt,{})}}function Sd(t,e,r){const n=t.slice();return n[21]=e[r][0],n[22]=e[r][1],n}function Bd(t){let e,r,n=t[0][t[21]][2].text+"",i,a,o=Yn(t[1],t[21])+"",s,l,p;return{c(){e=q("div"),r=q("p"),i=Se(n),a=Se(":"),s=Se(o),p=Ee(),this.h()},l(c){e=W(c,"DIV",{class:!0});var f=R(e);r=W(f,"P",{style:!0});var d=R(r);i=Be(d,n),a=Be(d,":"),s=Be(d,o),d.forEach(M),p=Ae(f),f.forEach(M),this.h()},h(){S(r,"style",l=`color: rgba(255,255,255, ${an(t[22])});`),S(e,"class","hover:bg-slate-800 rounded-md p-2 text-xs")},m(c,f){se(c,e,f),T(e,r),T(r,i),T(r,a),T(r,s),T(e,p)},p(c,f){f&5&&n!==(n=c[0][c[21]][2].text+"")&&hr(i,n),f&6&&o!==(o=Yn(c[1],c[21])+"")&&hr(s,o),f&4&&l!==(l=`color: rgba(255,255,255, ${an(c[22])});`)&&S(r,"style",l)},d(c){c&&M(e)}}}function AF(t){let e,r,n,i,a,o,s,l,p,c,f,d,g,b,v,m,D,B,w,C=t[2],F=[];for(let A=0;A<C.length;A+=1)F[A]=Bd(Sd(t,C,A));const k=t[18].default,O=yu(k,t,t[17],null);return{c(){e=q("div"),r=q("div");for(let A=0;A<F.length;A+=1)F[A].c();n=Ee(),i=q("div"),a=q("div"),o=q("label"),s=q("span"),l=Se("# Prompts"),p=Ee(),c=q("input"),d=Ee(),g=q("div"),b=q("button"),v=Se("Shuffle"),m=Ee(),O&&O.c(),this.h()},l(A){e=W(A,"DIV",{class:!0});var x=R(e);r=W(x,"DIV",{class:!0});var U=R(r);for(let Q=0;Q<F.length;Q+=1)F[Q].l(U);U.forEach(M),n=Ae(x),i=W(x,"DIV",{class:!0});var K=R(i);a=W(K,"DIV",{class:!0});var J=R(a);o=W(J,"LABEL",{class:!0});var j=R(o);s=W(j,"SPAN",{class:!0});var V=R(s);l=Be(V,"# Prompts"),V.forEach(M),j.forEach(M),p=Ae(J),c=W(J,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),J.forEach(M),d=Ae(K),g=W(K,"DIV",{class:!0});var H=R(g);b=W(H,"BUTTON",{class:!0});var z=R(b);v=Be(z,"Shuffle"),z.forEach(M),H.forEach(M),K.forEach(M),m=Ae(x),O&&O.l(x),x.forEach(M),this.h()},h(){S(r,"class","p-4 w-full h-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-y-auto"),S(s,"class","label-text"),S(o,"class","label"),c.value=f=t[1].randomPromptLimit||t[3](),S(c,"type","range"),S(c,"min","1"),S(c,"max",t[3]()),S(c,"step","1"),S(c,"class","range range-sm"),S(a,"class","w-full px-2"),S(b,"class","btn btn-xs btn-primary"),S(g,"class","w-32 px-2 pb-1 flex flex-col justify-end"),S(i,"class","px-2 py-4 pb-0 flex"),S(e,"class","w-full h-full flex flex-col")},m(A,x){se(A,e,x),T(e,r);for(let U=0;U<F.length;U+=1)F[U]&&F[U].m(r,null);T(e,n),T(e,i),T(i,a),T(a,o),T(o,s),T(s,l),T(a,p),T(a,c),T(i,d),T(i,g),T(g,b),T(b,v),T(e,m),O&&O.m(e,null),D=!0,B||(w=[_e(c,"change",t[19]),_e(b,"click",t[5])],B=!0)},p(A,[x]){if(x&7){C=A[2];let U;for(U=0;U<C.length;U+=1){const K=Sd(A,C,U);F[U]?F[U].p(K,x):(F[U]=Bd(K),F[U].c(),F[U].m(r,null))}for(;U<F.length;U+=1)F[U].d(1);F.length=C.length}(!D||x&2&&f!==(f=A[1].randomPromptLimit||A[3]()))&&(c.value=f),O&&O.p&&(!D||x&131072)&&wu(O,k,A,A[17],D?Au(k,A[17],x,null):Eu(A[17]),null)},i(A){D||(fe(O,A),D=!0)},o(A){ve(O,A),D=!1},d(A){A&&M(e),Cu(F,A),O&&O.d(A),B=!1,zt(w)}}}function CF(t,e,r){let n,i,a,o;Ge(t,ot,A=>r(1,o=A));let{$$slots:s={},$$scope:l}=e,{center:p=[0,0]}=e,{dimensions:c=[100,100]}=e,{maxWidth:f=1e3}=e,{pointRadius:d=10}=e,{textWidth:g=250}=e,{horizontalPad:b=20}=e,{verticalPad:v=2}=e,{textBarPad:m=10}=e,{fontSize:D=13}=e,{handleWidth:B=20}=e;function w(){return Object.keys(o.weightedPrompts).length}const C=xi.subscribe(()=>{k()});Rp(()=>{C()});function F(A){ot.update({...o,randomPromptLimit:A}),k()}function k(){const A=Object.entries(o.weightedPrompts).sort((x,U)=>Math.random()-.5).reduce((x,[U,K],J)=>(x[U]={...K,randomWeight:J<(o.randomPromptLimit||w())?Math.random():0},x),{});ot.update({...o,weightedPrompts:A})}const O=A=>F(parseInt(A.target.value));return t.$$set=A=>{"center"in A&&r(6,p=A.center),"dimensions"in A&&r(7,c=A.dimensions),"maxWidth"in A&&r(8,f=A.maxWidth),"pointRadius"in A&&r(9,d=A.pointRadius),"textWidth"in A&&r(10,g=A.textWidth),"horizontalPad"in A&&r(11,b=A.horizontalPad),"verticalPad"in A&&r(12,v=A.verticalPad),"textBarPad"in A&&r(13,m=A.textBarPad),"fontSize"in A&&r(14,D=A.fontSize),"handleWidth"in A&&r(15,B=A.handleWidth),"$$scope"in A&&r(17,l=A.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&r(0,n=Object.entries(o.weightedPrompts).map(([A,x],U)=>[parseInt(A),U,x])),t.$$.dirty&1&&r(16,i=n.map(([A,x,U])=>[A,U.randomWeight||0])),t.$$.dirty&65536&&r(2,a=i.sort((A,x)=>x[1]-A[1]))},[n,o,a,w,F,k,p,c,f,d,g,b,v,m,D,B,i,l,s,O]}class FF extends Xe{constructor(e){super(),et(this,e,CF,AF,tt,{center:6,dimensions:7,maxWidth:8,pointRadius:9,textWidth:10,horizontalPad:11,verticalPad:12,textBarPad:13,fontSize:14,handleWidth:15})}}function SF(t){let e,r;return e=new Bu({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function BF(t){let e,r,n,i;return r=new FF({props:{dimensions:t[2],center:t[3],$$slots:{default:[SF]},$$scope:{ctx:t}}}),{c(){e=q("div"),Ve(r.$$.fragment),this.h()},l(a){e=W(a,"DIV",{class:!0});var o=R(e);je(r.$$.fragment,o),o.forEach(M),this.h()},h(){S(e,"class","w-full h-full pt-10"),Ni(()=>t[4].call(e))},m(a,o){se(a,e,o),ze(r,e,null),n=Pa(e,t[4].bind(e)),i=!0},p(a,[o]){const s={};o&4&&(s.dimensions=a[2]),o&8&&(s.center=a[3]),o&32&&(s.$$scope={dirty:o,ctx:a}),r.$set(s)},i(a){i||(fe(r.$$.fragment,a),i=!0)},o(a){ve(r.$$.fragment,a),i=!1},d(a){a&&M(e),qe(r),n()}}}function OF(t,e,r){let n,i,a,o;function s(){a=this.clientWidth,o=this.clientHeight,r(0,a),r(1,o)}return t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[a||0,o||0]),t.$$.dirty&4&&r(3,i=Ta(n))},[a,o,n,i,s]}class MF extends Xe{constructor(e){super(),et(this,e,OF,BF,tt,{})}}function PF(t){let e,r;return e=new fF({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function kF(t){let e,r;return e=new EF({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function TF(t){let e,r;return e=new v6({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function IF(t){let e,r;return e=new F6({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function xF(t){let e,r;return e=new MF({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function NF(t){let e,r,n,i;const a=[xF,IF,TF,kF,PF],o=[];function s(l,p){return l[0].weightMode===gt.Random?0:l[0].weightMode===gt.Pie?1:l[0].weightMode===gt.Circle?2:l[0].weightMode===gt.Ring?3:l[0].weightMode===gt.Embed?4:-1}return~(r=s(t))&&(n=o[r]=a[r](t)),{c(){e=q("div"),n&&n.c(),this.h()},l(l){e=W(l,"DIV",{class:!0});var p=R(e);n&&n.l(p),p.forEach(M),this.h()},h(){S(e,"class","w-full h-full flex flex-col")},m(l,p){se(l,e,p),~r&&o[r].m(e,null),i=!0},p(l,[p]){let c=r;r=s(l),r!==c&&(n&&(ar(),ve(o[c],1,1,()=>{o[c]=null}),ur()),~r?(n=o[r],n||(n=o[r]=a[r](l),n.c()),fe(n,1),n.m(e,null)):n=null)},i(l){i||(fe(n),i=!0)},o(l){ve(n),i=!1},d(l){l&&M(e),~r&&o[r].d()}}}function LF(t,e,r){let n;return Ge(t,ot,i=>r(0,n=i)),[n]}class RF extends Xe{constructor(e){super(),et(this,e,LF,NF,tt,{})}}function UF(t){let e,r,n,i,a="<<",o,s,l="<",p,c,f,d,g,b=">",v,m,D=">>",B,w,C,F,k,O,A,x,U,K,J,j,V,H,z,Q,X;return{c(){e=q("div"),r=q("div"),n=q("div"),i=q("button"),o=Se(a),s=q("button"),p=Se(l),c=Ee(),f=q("button"),d=Se(t[1]),g=q("button"),v=Se(b),m=q("button"),B=Se(D),w=Ee(),C=q("div"),F=q("label"),k=Se("Page Size"),O=Ee(),A=q("select"),x=q("option"),U=Se("10"),K=q("option"),J=Se("25"),j=q("option"),V=Se("50"),H=q("option"),z=Se("100"),this.h()},l(te){e=W(te,"DIV",{class:!0});var le=R(e);r=W(le,"DIV",{class:!0});var be=R(r);n=W(be,"DIV",{class:!0});var we=R(n);i=W(we,"BUTTON",{class:!0});var Oe=R(i);o=Be(Oe,a),Oe.forEach(M),s=W(we,"BUTTON",{class:!0});var Pe=R(s);p=Be(Pe,l),Pe.forEach(M),c=Ae(we),f=W(we,"BUTTON",{class:!0});var Te=R(f);d=Be(Te,t[1]),Te.forEach(M),g=W(we,"BUTTON",{class:!0});var Re=R(g);v=Be(Re,b),Re.forEach(M),m=W(we,"BUTTON",{class:!0});var Ue=R(m);B=Be(Ue,D),Ue.forEach(M),we.forEach(M),be.forEach(M),w=Ae(le),C=W(le,"DIV",{class:!0});var We=R(C);F=W(We,"LABEL",{for:!0,class:!0});var Ye=R(F);k=Be(Ye,"Page Size"),Ye.forEach(M),O=Ae(We),A=W(We,"SELECT",{class:!0});var xe=R(A);x=W(xe,"OPTION",{});var Dt=R(x);U=Be(Dt,"10"),Dt.forEach(M),K=W(xe,"OPTION",{});var Et=R(K);J=Be(Et,"25"),Et.forEach(M),j=W(xe,"OPTION",{});var ht=R(j);V=Be(ht,"50"),ht.forEach(M),H=W(xe,"OPTION",{});var lt=R(H);z=Be(lt,"100"),lt.forEach(M),xe.forEach(M),We.forEach(M),le.forEach(M),this.h()},h(){S(i,"class","btn"),Qe(i,"btn-disabled",t[1]===1),S(s,"class","btn"),Qe(s,"btn-disabled",t[1]===1),S(f,"class","btn"),Qe(f,"btn-disabled",t[0]===0),S(g,"class","btn"),Qe(g,"btn-disabled",t[0]===0||t[1]===t[0]),S(m,"class","btn"),Qe(m,"btn-disabled",t[0]===0||t[1]===t[0]),S(n,"class","btn-group"),S(r,"class","flex justify-start"),S(F,"for","page-size"),S(F,"class","p-2 text-md min-w-xs"),x.__value=10,x.value=x.__value,K.__value=25,K.value=K.__value,j.__value=50,j.value=j.__value,H.__value=100,H.value=H.__value,S(A,"class","select max-w-xs"),S(C,"class","flex"),S(e,"class","w-full flex justify-between p-4")},m(te,le){se(te,e,le),T(e,r),T(r,n),T(n,i),T(i,o),T(n,s),T(s,p),T(n,c),T(n,f),T(f,d),T(n,g),T(g,v),T(n,m),T(m,B),T(e,w),T(e,C),T(C,F),T(F,k),T(C,O),T(C,A),T(A,x),T(x,U),T(A,K),T(K,J),T(A,j),T(j,V),T(A,H),T(H,z),Q||(X=[_e(i,"click",t[5]),_e(s,"click",t[6]),_e(f,"click",t[7]),_e(g,"click",t[8]),_e(m,"click",t[9]),_e(A,"change",t[10])],Q=!0)},p(te,[le]){le&2&&Qe(i,"btn-disabled",te[1]===1),le&2&&Qe(s,"btn-disabled",te[1]===1),le&2&&hr(d,te[1]),le&1&&Qe(f,"btn-disabled",te[0]===0),le&3&&Qe(g,"btn-disabled",te[0]===0||te[1]===te[0]),le&3&&Qe(m,"btn-disabled",te[0]===0||te[1]===te[0])},i:Me,o:Me,d(te){te&&M(e),Q=!1,zt(X)}}}function VF(t,e,r){let{total:n}=e,{current:i}=e,{size:a}=e,{onChange:o}=e,{onResize:s}=e;const l=()=>o(1),p=()=>o(i-1),c=()=>o(i),f=()=>o(i+1),d=()=>o(n),g=b=>s(b.target.value);return t.$$set=b=>{"total"in b&&r(0,n=b.total),"current"in b&&r(1,i=b.current),"size"in b&&r(4,a=b.size),"onChange"in b&&r(2,o=b.onChange),"onResize"in b&&r(3,s=b.onResize)},[n,i,o,s,a,l,p,c,f,d,g]}class W1 extends Xe{constructor(e){super(),et(this,e,VF,UF,tt,{total:0,current:1,size:4,onChange:2,onResize:3})}}function Od(t,e,r){const n=t.slice();return n[7]=e[r],n[9]=r,n}function Md(t,e){let r,n,i=e[7].date.toDateString()+"",a,o,s,l,p=e[7].prompt+"",c,f,d,g;function b(){return e[6](e[7])}return{key:t,first:null,c(){r=q("tr"),n=q("td"),a=Se(i),o=Ee(),s=q("td"),l=q("span"),c=Se(p),f=Ee(),this.h()},l(v){r=W(v,"TR",{});var m=R(r);n=W(m,"TD",{style:!0,class:!0});var D=R(n);a=Be(D,i),D.forEach(M),o=Ae(m),s=W(m,"TD",{style:!0,class:!0});var B=R(s);l=W(B,"SPAN",{});var w=R(l);c=Be(w,p),w.forEach(M),B.forEach(M),f=Ae(m),m.forEach(M),this.h()},h(){Bt(n,"max-width","10rem"),Bt(n,"width","20rem"),S(n,"class","whitespace-nowrap"),Bt(s,"max-width","20px"),S(s,"class","cursor-copy text-ellipsis whitespace-nowrap overflow-hidden select-none hover:text-white"),this.first=r},m(v,m){se(v,r,m),T(r,n),T(n,a),T(r,o),T(r,s),T(s,l),T(l,c),T(r,f),d||(g=_e(s,"click",b),d=!0)},p(v,m){e=v,m&8&&i!==(i=e[7].date.toDateString()+"")&&hr(a,i),m&8&&p!==(p=e[7].prompt+"")&&hr(c,p)},d(v){v&&M(r),d=!1,g()}}}function jF(t){let e,r,n,i,a,o,s,l,p,c,f,d,g,b=[],v=new Map,m;e=new W1({props:{total:Math.ceil(t[2].length/t[1]),current:t[0],size:t[1],onChange:t[4],onResize:t[5]}});let D=t[3];const B=w=>w[9];for(let w=0;w<D.length;w+=1){let C=Od(t,D,w),F=B(C);v.set(F,b[w]=Md(F,C))}return{c(){Ve(e.$$.fragment),r=Ee(),n=q("div"),i=q("table"),a=q("thead"),o=q("tr"),s=q("th"),l=Se("Date"),p=Ee(),c=q("th"),f=Se("Prompt"),d=Ee(),g=q("tbody");for(let w=0;w<b.length;w+=1)b[w].c();this.h()},l(w){je(e.$$.fragment,w),r=Ae(w),n=W(w,"DIV",{class:!0});var C=R(n);i=W(C,"TABLE",{class:!0});var F=R(i);a=W(F,"THEAD",{});var k=R(a);o=W(k,"TR",{});var O=R(o);s=W(O,"TH",{});var A=R(s);l=Be(A,"Date"),A.forEach(M),p=Ae(O),c=W(O,"TH",{});var x=R(c);f=Be(x,"Prompt"),x.forEach(M),O.forEach(M),k.forEach(M),d=Ae(F),g=W(F,"TBODY",{});var U=R(g);for(let K=0;K<b.length;K+=1)b[K].l(U);U.forEach(M),F.forEach(M),C.forEach(M),this.h()},h(){S(i,"class","table w-full"),S(n,"class","w-full px-4 overflow-y-auto")},m(w,C){ze(e,w,C),se(w,r,C),se(w,n,C),T(n,i),T(i,a),T(a,o),T(o,s),T(s,l),T(o,p),T(o,c),T(c,f),T(i,d),T(i,g);for(let F=0;F<b.length;F+=1)b[F]&&b[F].m(g,null);m=!0},p(w,[C]){const F={};C&6&&(F.total=Math.ceil(w[2].length/w[1])),C&1&&(F.current=w[0]),C&2&&(F.size=w[1]),e.$set(F),C&8&&(D=w[3],b=Un(b,C,B,1,w,D,v,g,Jn,Md,null,Od))},i(w){m||(fe(e.$$.fragment,w),m=!0)},o(w){ve(e.$$.fragment,w),m=!1},d(w){qe(e,w),w&&M(r),w&&M(n);for(let C=0;C<b.length;C+=1)b[C].d()}}}function zF(t){navigator.clipboard.writeText(t)}function qF(t,e,r){let n;Ge(t,Xc,c=>r(2,n=c));let i=1,a=10,o=[];function s(c){r(0,i=c)}function l(c){r(0,i=1),r(1,a=c)}const p=c=>zF(c.prompt);return t.$$.update=()=>{t.$$.dirty&7&&r(3,o=n.slice((i-1)*a,i*a))},[i,a,n,o,s,l,p]}class WF extends Xe{constructor(e){super(),et(this,e,qF,jF,tt,{})}}const Ss=sr(Kn.List),ya=sr({});function HF(t){let e,r,n,i,a,o;return r=new C1({props:{center:t[9],dimensions:t[7],onMarkerMove:t[10],dataPoints:t[8]}}),a=new F1({props:{useExponentialScaling:t[3],toggleExponentialScaling:t[12],exponentialScaling:t[4],setExponentialScaling:t[13],connectionLimit:t[2],setConnectionLimit:t[11],maxConnectionLimit:t[6],clusterCount:t[5],setClusterCount:t[14],maxClusterCount:t[6],onShuffle:t[15]}}),{c(){e=q("div"),Ve(r.$$.fragment),i=Ee(),Ve(a.$$.fragment),this.h()},l(s){e=W(s,"DIV",{class:!0});var l=R(e);je(r.$$.fragment,l),l.forEach(M),i=Ae(s),je(a.$$.fragment,s),this.h()},h(){S(e,"class","w-full h-full"),Ni(()=>t[18].call(e))},m(s,l){se(s,e,l),ze(r,e,null),n=Pa(e,t[18].bind(e)),se(s,i,l),ze(a,s,l),o=!0},p(s,[l]){const p={};l&512&&(p.center=s[9]),l&128&&(p.dimensions=s[7]),l&256&&(p.dataPoints=s[8]),r.$set(p);const c={};l&8&&(c.useExponentialScaling=s[3]),l&16&&(c.exponentialScaling=s[4]),l&4&&(c.connectionLimit=s[2]),l&64&&(c.maxConnectionLimit=s[6]),l&32&&(c.clusterCount=s[5]),l&64&&(c.maxClusterCount=s[6]),a.$set(c)},i(s){o||(fe(r.$$.fragment,s),fe(a.$$.fragment,s),o=!0)},o(s){ve(r.$$.fragment,s),ve(a.$$.fragment,s),o=!1},d(s){s&&M(e),qe(r),n(),s&&M(i),qe(a,s)}}}function $F(t,e,r){let n,i,a,o;Ge(t,rF,H=>r(17,o=H));let s=0,l=0,p={},c=[.5,.5],f=10,d=!1,g=2,b=0,v,m={},D={};function B(H){o&&v?(O(),F(c,d,g,H)):console.log("no concepts or mappings")}function w(H,z){H&&z?(O(),F(c,d,g,f)):console.log("no concepts or mappings")}function C(H,z){F(c,H,z,f)}function F(H,z,Q,X){if(console.log("recomputing weights"),!p)return;let te=0;const le={...m};Object.values(p).forEach(Te=>{Object.values(p).forEach(Re=>{const Ue=Ma(Te.xy,Re.xy);Ue>te&&(te=Ue)})});const be=Object.entries(p).reduce((Te,[Re,Ue])=>{const We=Ma(H,Ue.xy);return Te[Re]=We,Te},{}),we=(Te,Re)=>{const Ue=Te?Math.round(Math.pow(1-Re/te,Q)*100)/100:0;return Ue<0?0:Ue},Oe=(Te,Re)=>{const Ue=Te?Math.round((1-Re/te)*100)/100:0;return Ue<0?0:Ue},Pe={...p};Object.entries(be).sort((Te,Re)=>Te[1]-Re[1]).forEach(([Te,Re],Ue)=>{if(!o[Te])return;const We=Ue<X,Ye=z?we(We,Re):Oe(We,Re);le[Te]=Ye;const xe={...Pe[Te]};xe.opacity=an(Ye),xe.connected=We,Pe[Te]=xe}),console.log("weights updated"),m=le,r(8,p=Pe)}function k(){let H=Object.entries(o);const z=be=>new Array(be).fill(null).map(()=>[]);console.log("clustering embeddings");const Q=H.length>=2?Mi(H.map(be=>be[1]),2):[H.map(be=>be[0])];console.log("set of 2 complete");const X=H.length>=4?Mi(H.map(be=>be[1]),4):Q;console.log("set of 4 complete");const te=H.length>=6?Mi(H.map(be=>be[1]),6):X;console.log("set of 6 complete");const le=H.length>=8?Mi(H.map(be=>be[1]),8):te;return console.log("set of 8 complete"),{2:[...Q,...z(2-Q.length)],4:[...X,...z(4-X.length)],6:[...te,...z(6-te.length)],8:[...le,...z(8-le.length)]}}function O(){if(console.log("updating data points"),!o||!v)return;const H=Object.keys(v),z=X=>{if(!X.length)return i;const te=X.map(le=>Q[le].xy);return Us(te)},Q=H.reduce((X,te,le)=>(X[te]={xy:v[te],text:te,connected:!0,opacity:1},X),{});if(D=k(),b&&D){const X=b,te=D[X];let le=te.map(Oe=>z(Oe));const be=z1(X),we=q1(le,be);we&&we.forEach(Oe=>{const Pe=Oe.ids[0],Te=Oe.points[1];te[Pe].forEach(Re=>{Q[Re].xy=Us([Q[Re].xy,Te])})})}r(8,p=Q)}function A(H){c=H,F(c,d,g,f)}function x(H){H>0&&H<=a&&r(2,f=Math.round(H))}function U(){r(3,d=!d)}function K(H){r(4,g=H)}function J(H){[0,2,4,6,8].indexOf(H)!==-1&&r(5,b=H)}async function j(){r(16,v=tf(o))}cy(()=>{j()});function V(){s=this.clientWidth,l=this.clientHeight,r(0,s),r(1,l)}return t.$$.update=()=>{t.$$.dirty&3&&r(7,n=[s||250,l||250]),t.$$.dirty&128&&r(9,i=Ta(n)),t.$$.dirty&131072&&r(6,a=Object.keys(o).length),t.$$.dirty&131168&&o&&a<b&&J(j1(a)),t.$$.dirty&24&&C(d,g),t.$$.dirty&196608&&w(o,v),t.$$.dirty&4&&B(f)},[s,l,f,d,g,b,a,n,p,i,A,x,U,K,J,j,v,o,V]}class GF extends Xe{constructor(e){super(),et(this,e,$F,HF,tt,{})}}function KF(t){let e,r;return e=new GF({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p:Me,i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function YF(t){let e,r,n,i,a,o;return{c(){e=q("div"),r=q("div"),n=q("div"),i=q("progress"),this.h()},l(s){e=W(s,"DIV",{class:!0});var l=R(e);r=W(l,"DIV",{class:!0});var p=R(r);n=W(p,"DIV",{class:!0});var c=R(n);i=W(c,"PROGRESS",{class:!0,max:!0}),R(i).forEach(M),c.forEach(M),p.forEach(M),l.forEach(M),this.h()},h(){S(i,"class","progress progress-primary w-56"),i.value=a=Object.keys(t[2]).length-Object.keys(t[1]).length,S(i,"max",o=Object.keys(t[2]).length),S(n,"class","h-20 w-52"),S(r,"class","flex flex-col justify-center"),S(e,"class","w-full h-full flex justify-center")},m(s,l){se(s,e,l),T(e,r),T(r,n),T(n,i)},p(s,l){l&6&&a!==(a=Object.keys(s[2]).length-Object.keys(s[1]).length)&&(i.value=a),l&4&&o!==(o=Object.keys(s[2]).length)&&S(i,"max",o)},i:Me,o:Me,d(s){s&&M(e)}}}function ZF(t){let e,r,n,i,a;return{c(){e=q("div"),r=q("div"),n=q("div"),i=q("p"),a=Se("Set OpenAI key in settings to use concept map."),this.h()},l(o){e=W(o,"DIV",{class:!0});var s=R(e);r=W(s,"DIV",{class:!0});var l=R(r);n=W(l,"DIV",{class:!0});var p=R(n);i=W(p,"P",{class:!0});var c=R(i);a=Be(c,"Set OpenAI key in settings to use concept map."),c.forEach(M),p.forEach(M),l.forEach(M),s.forEach(M),this.h()},h(){S(i,"class","text-center text-lg"),S(n,"class","h-20 w-52"),S(r,"class","flex flex-col justify-center"),S(e,"class","w-full h-full flex justify-center")},m(o,s){se(o,e,s),T(e,r),T(r,n),T(n,i),T(i,a)},p:Me,i:Me,o:Me,d(o){o&&M(e)}}}function JF(t){let e,r,n,i,a;const o=[ZF,YF,KF],s=[];function l(p,c){return c&2&&(e=null),p[0]?(e==null&&(e=Object.keys(p[1]).length>0),e?1:2):0}return r=l(t,-1),n=s[r]=o[r](t),{c(){n.c(),i=Ft()},l(p){n.l(p),i=Ft()},m(p,c){s[r].m(p,c),se(p,i,c),a=!0},p(p,[c]){let f=r;r=l(p,c),r===f?s[r].p(p,c):(ar(),ve(s[f],1,1,()=>{s[f]=null}),ur(),n=s[r],n?n.p(p,c):(n=s[r]=o[r](p),n.c()),fe(n,1),n.m(i.parentNode,i))},i(p){a||(fe(n),a=!0)},o(p){ve(n),a=!1},d(p){s[r].d(p),p&&M(i)}}}function QF(t,e,r){let n,i,a;return Ge(t,di,o=>r(0,n=o)),Ge(t,ya,o=>r(1,i=o)),Ge(t,Ur,o=>r(2,a=o)),[n,i,a]}class XF extends Xe{constructor(e){super(),et(this,e,QF,JF,tt,{})}}function e5(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var H1=e5,t5=typeof vr=="object"&&vr&&vr.Object===Object&&vr,r5=t5,n5=r5,i5=typeof self=="object"&&self&&self.Object===Object&&self,a5=n5||i5||Function("return this")(),$1=a5,u5=$1,s5=function(){return u5.Date.now()},o5=s5,l5=/\s/;function c5(t){for(var e=t.length;e--&&l5.test(t.charAt(e)););return e}var f5=c5,h5=f5,d5=/^\s+/;function p5(t){return t&&t.slice(0,h5(t)+1).replace(d5,"")}var g5=p5,v5=$1,m5=v5.Symbol,G1=m5,Pd=G1,K1=Object.prototype,_5=K1.hasOwnProperty,b5=K1.toString,hu=Pd?Pd.toStringTag:void 0;function D5(t){var e=_5.call(t,hu),r=t[hu];try{t[hu]=void 0;var n=!0}catch{}var i=b5.call(t);return n&&(e?t[hu]=r:delete t[hu]),i}var y5=D5,w5=Object.prototype,E5=w5.toString;function A5(t){return E5.call(t)}var C5=A5,kd=G1,F5=y5,S5=C5,B5="[object Null]",O5="[object Undefined]",Td=kd?kd.toStringTag:void 0;function M5(t){return t==null?t===void 0?O5:B5:Td&&Td in Object(t)?F5(t):S5(t)}var P5=M5;function k5(t){return t!=null&&typeof t=="object"}var T5=k5,I5=P5,x5=T5,N5="[object Symbol]";function L5(t){return typeof t=="symbol"||x5(t)&&I5(t)==N5}var R5=L5,U5=g5,Id=H1,V5=R5,xd=0/0,j5=/^[-+]0x[0-9a-f]+$/i,z5=/^0b[01]+$/i,q5=/^0o[0-7]+$/i,W5=parseInt;function H5(t){if(typeof t=="number")return t;if(V5(t))return xd;if(Id(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Id(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=U5(t);var r=z5.test(t);return r||q5.test(t)?W5(t.slice(2),r?2:8):j5.test(t)?xd:+t}var $5=H5,G5=H1,$l=o5,Nd=$5,K5="Expected a function",Y5=Math.max,Z5=Math.min;function J5(t,e,r){var n,i,a,o,s,l,p=0,c=!1,f=!1,d=!0;if(typeof t!="function")throw new TypeError(K5);e=Nd(e)||0,G5(r)&&(c=!!r.leading,f="maxWait"in r,a=f?Y5(Nd(r.maxWait)||0,e):a,d="trailing"in r?!!r.trailing:d);function g(k){var O=n,A=i;return n=i=void 0,p=k,o=t.apply(A,O),o}function b(k){return p=k,s=setTimeout(D,e),c?g(k):o}function v(k){var O=k-l,A=k-p,x=e-O;return f?Z5(x,a-A):x}function m(k){var O=k-l,A=k-p;return l===void 0||O>=e||O<0||f&&A>=a}function D(){var k=$l();if(m(k))return B(k);s=setTimeout(D,v(k))}function B(k){return s=void 0,d&&n?g(k):(n=i=void 0,o)}function w(){s!==void 0&&clearTimeout(s),p=0,n=l=i=s=void 0}function C(){return s===void 0?o:B($l())}function F(){var k=$l(),O=m(k);if(n=arguments,i=this,l=k,O){if(s===void 0)return b(l);if(f)return clearTimeout(s),s=setTimeout(D,e),g(l)}return s===void 0&&(s=setTimeout(D,e)),o}return F.cancel=w,F.flush=C,F}var Xs=J5;function Ld(t,e,r){const n=t.slice();return n[13]=e[r],n[15]=r,n}function Rd(t,e){let r,n,i=e[13]+"",a,o,s,l,p,c,f,d,g;function b(){return e[10](e[13])}function v(){return e[12](e[13])}return{key:t,first:null,c(){r=q("tr"),n=q("td"),a=Se(i),o=Ee(),s=q("td"),l=q("button"),p=ut("svg"),c=ut("path"),f=Ee(),this.h()},l(m){r=W(m,"TR",{});var D=R(r);n=W(D,"TD",{style:!0,class:!0});var B=R(n);a=Be(B,i),B.forEach(M),o=Ae(D),s=W(D,"TD",{style:!0,class:!0});var w=R(s);l=W(w,"BUTTON",{class:!0});var C=R(l);p=st(C,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var F=R(p);c=st(F,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),R(c).forEach(M),F.forEach(M),C.forEach(M),w.forEach(M),f=Ae(D),D.forEach(M),this.h()},h(){Bt(n,"max-width","20px"),S(n,"class","text-ellipsis cursor-copy whitespace-nowrap overflow-hidden select-none hover:text-white"),S(c,"stroke-linecap","round"),S(c,"stroke-linejoin","round"),S(c,"stroke-width","2"),S(c,"d","M6 18L18 6M6 6l12 12"),S(p,"xmlns","http://www.w3.org/2000/svg"),S(p,"class","h-6 w-6"),S(p,"fill","none"),S(p,"viewBox","0 0 24 24"),S(p,"stroke","red"),S(l,"class","btn btn-sm btn-circle btn-outline"),Bt(s,"max-width","4rem"),Bt(s,"width","4rem"),S(s,"class",""),this.first=r},m(m,D){se(m,r,D),T(r,n),T(n,a),T(r,o),T(r,s),T(s,l),T(l,p),T(p,c),T(r,f),d||(g=[_e(n,"click",b),_e(n,"change",e[11]),_e(s,"click",v)],d=!0)},p(m,D){e=m,D&4&&i!==(i=e[13]+"")&&hr(a,i)},d(m){m&&M(r),d=!1,zt(g)}}}function Q5(t){let e,r,n,i,a,o,s,l,p,c,f,d,g=[],b=new Map,v,m,D;e=new W1({props:{total:t[3],current:t[0],size:t[1],onChange:t[5],onResize:t[6]}});let B=t[2];const w=C=>C[15];for(let C=0;C<B.length;C+=1){let F=Ld(t,B,C),k=w(F);b.set(k,g[C]=Rd(k,F))}return{c(){Ve(e.$$.fragment),r=Ee(),n=q("div"),i=q("table"),a=q("thead"),o=q("tr"),s=q("th"),l=Se("Concept"),p=Ee(),c=q("th"),f=Ee(),d=q("tbody");for(let C=0;C<g.length;C+=1)g[C].c();this.h()},l(C){je(e.$$.fragment,C),r=Ae(C),n=W(C,"DIV",{class:!0});var F=R(n);i=W(F,"TABLE",{class:!0});var k=R(i);a=W(k,"THEAD",{});var O=R(a);o=W(O,"TR",{});var A=R(o);s=W(A,"TH",{});var x=R(s);l=Be(x,"Concept"),x.forEach(M),p=Ae(A),c=W(A,"TH",{}),R(c).forEach(M),A.forEach(M),O.forEach(M),f=Ae(k),d=W(k,"TBODY",{});var U=R(d);for(let K=0;K<g.length;K+=1)g[K].l(U);U.forEach(M),k.forEach(M),F.forEach(M),this.h()},h(){S(i,"class","table w-full"),S(n,"class","w-full px-4 overflow-y-auto")},m(C,F){ze(e,C,F),se(C,r,F),se(C,n,F),T(n,i),T(i,a),T(a,o),T(o,s),T(s,l),T(o,p),T(o,c),T(i,f),T(i,d);for(let k=0;k<g.length;k+=1)g[k]&&g[k].m(d,null);v=!0,m||(D=_e(n,"paste",t[4]),m=!0)},p(C,[F]){const k={};F&8&&(k.total=C[3]),F&1&&(k.current=C[0]),F&2&&(k.size=C[1]),e.$set(k),F&132&&(B=C[2],g=Un(g,F,w,1,C,B,b,d,Jn,Rd,null,Ld))},i(C){v||(fe(e.$$.fragment,C),v=!0)},o(C){ve(e.$$.fragment,C),v=!1},d(C){qe(e,C),C&&M(r),C&&M(n);for(let F=0;F<g.length;F+=1)g[F].d();m=!1,D()}}}function X5(t){navigator.clipboard.writeText(t)}function eS(t,e,r){let n,i,a,o;Ge(t,Ur,m=>r(9,o=m));let s=1,l=10;function p(){console.log("pasted"),navigator.clipboard.readText().then(m=>{const D=bu(m).map(w=>w[0]),B=o;D.forEach(w=>{B[w]||Ur.update(w,null)})})}function c(m){r(0,s=m)}function f(m){r(0,s=1),r(1,l=m)}const d=Xs(m=>{Ur.update(m,null)},500),g=m=>X5(m),b=m=>d(m.target.value),v=m=>Ur.remove(m);return t.$$.update=()=>{t.$$.dirty&512&&r(8,n=Object.keys(o)),t.$$.dirty&258&&r(3,i=Math.ceil(n.length/l)),t.$$.dirty&259&&r(2,a=Array.from(n).sort().slice((s-1)*l,s*l))},[s,l,a,i,p,c,f,d,n,o,g,b,v]}class tS extends Xe{constructor(e){super(),et(this,e,eS,Q5,tt,{})}}function rS(t){let e,r;return e=new XF({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function nS(t){let e,r;return e=new tS({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function iS(t){let e,r,n,i;const a=[nS,rS],o=[];function s(l,p){return l[0]===Kn.List?0:l[0]===Kn.Map?1:-1}return~(e=s(t))&&(r=o[e]=a[e](t)),{c(){r&&r.c(),n=Ft()},l(l){r&&r.l(l),n=Ft()},m(l,p){~e&&o[e].m(l,p),se(l,n,p),i=!0},p(l,[p]){let c=e;e=s(l),e!==c&&(r&&(ar(),ve(o[c],1,1,()=>{o[c]=null}),ur()),~e?(r=o[e],r||(r=o[e]=a[e](l),r.c()),fe(r,1),r.m(n.parentNode,n)):r=null)},i(l){i||(fe(r),i=!0)},o(l){ve(r),i=!1},d(l){~e&&o[e].d(l),l&&M(n)}}}function aS(t,e,r){let n;return Ge(t,Ss,i=>r(0,n=i)),[n]}class uS extends Xe{constructor(e){super(),et(this,e,aS,iS,tt,{})}}var xc={},Y1={},eo={},sS={get exports(){return eo},set exports(t){eo=t}},to={},oS={get exports(){return to},set exports(t){to=t}},Z1=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}},lS=Z1,Ri=Object.prototype.toString;function rf(t){return Array.isArray(t)}function Nc(t){return typeof t>"u"}function cS(t){return t!==null&&!Nc(t)&&t.constructor!==null&&!Nc(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function J1(t){return Ri.call(t)==="[object ArrayBuffer]"}function fS(t){return Ri.call(t)==="[object FormData]"}function hS(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&J1(t.buffer),e}function dS(t){return typeof t=="string"}function pS(t){return typeof t=="number"}function Q1(t){return t!==null&&typeof t=="object"}function Bs(t){if(Ri.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function gS(t){return Ri.call(t)==="[object Date]"}function vS(t){return Ri.call(t)==="[object File]"}function mS(t){return Ri.call(t)==="[object Blob]"}function X1(t){return Ri.call(t)==="[object Function]"}function _S(t){return Q1(t)&&X1(t.pipe)}function bS(t){return Ri.call(t)==="[object URLSearchParams]"}function DS(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function yS(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function nf(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),rf(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Lc(){var t={};function e(i,a){Bs(t[a])&&Bs(i)?t[a]=Lc(t[a],i):Bs(i)?t[a]=Lc({},i):rf(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)nf(arguments[r],e);return t}function wS(t,e,r){return nf(e,function(i,a){r&&typeof i=="function"?t[a]=lS(i,r):t[a]=i}),t}function ES(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var on={isArray:rf,isArrayBuffer:J1,isBuffer:cS,isFormData:fS,isArrayBufferView:hS,isString:dS,isNumber:pS,isObject:Q1,isPlainObject:Bs,isUndefined:Nc,isDate:gS,isFile:vS,isBlob:mS,isFunction:X1,isStream:_S,isURLSearchParams:bS,isStandardBrowserEnv:yS,forEach:nf,merge:Lc,extend:wS,trim:DS,stripBOM:ES},ba=on;function Ud(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var eg=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(ba.isURLSearchParams(r))i=r.toString();else{var a=[];ba.forEach(r,function(l,p){l===null||typeof l>"u"||(ba.isArray(l)?p=p+"[]":l=[l],ba.forEach(l,function(f){ba.isDate(f)?f=f.toISOString():ba.isObject(f)&&(f=JSON.stringify(f)),a.push(Ud(p)+"="+Ud(f))}))}),i=a.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},AS=on;function wo(){this.handlers=[]}wo.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};wo.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};wo.prototype.forEach=function(e){AS.forEach(this.handlers,function(n){n!==null&&e(n)})};var CS=wo,FS=on,SS=function(e,r){FS.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})},tg=function(e,r,n,i,a){return e.config=r,n&&(e.code=n),e.request=i,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},rg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Gl,Vd;function ng(){if(Vd)return Gl;Vd=1;var t=tg;return Gl=function(r,n,i,a,o){var s=new Error(r);return t(s,n,i,a,o)},Gl}var Kl,jd;function BS(){if(jd)return Kl;jd=1;var t=ng();return Kl=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},Kl}var Yl,zd;function OS(){if(zd)return Yl;zd=1;var t=on;return Yl=t.isStandardBrowserEnv()?function(){return{write:function(n,i,a,o,s,l){var p=[];p.push(n+"="+encodeURIComponent(i)),t.isNumber(a)&&p.push("expires="+new Date(a).toGMTString()),t.isString(o)&&p.push("path="+o),t.isString(s)&&p.push("domain="+s),l===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Yl}var Zl,qd;function MS(){return qd||(qd=1,Zl=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),Zl}var Jl,Wd;function PS(){return Wd||(Wd=1,Jl=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Jl}var Ql,Hd;function kS(){if(Hd)return Ql;Hd=1;var t=MS(),e=PS();return Ql=function(n,i){return n&&!t(i)?e(n,i):i},Ql}var Xl,$d;function TS(){if($d)return Xl;$d=1;var t=on,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Xl=function(n){var i={},a,o,s;return n&&t.forEach(n.split(`
`),function(p){if(s=p.indexOf(":"),a=t.trim(p.substr(0,s)).toLowerCase(),o=t.trim(p.substr(s+1)),a){if(i[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([o]):i[a]=i[a]?i[a]+", "+o:o}}),i},Xl}var ec,Gd;function IS(){if(Gd)return ec;Gd=1;var t=on;return ec=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(o){var s=o;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(s){var l=t.isString(s)?a(s):s;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),ec}var tc,Kd;function Eo(){if(Kd)return tc;Kd=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,tc=t,tc}var rc,Yd;function Zd(){if(Yd)return rc;Yd=1;var t=on,e=BS(),r=OS(),n=eg,i=kS(),a=TS(),o=IS(),s=ng(),l=rg,p=Eo();return rc=function(f){return new Promise(function(g,b){var v=f.data,m=f.headers,D=f.responseType,B;function w(){f.cancelToken&&f.cancelToken.unsubscribe(B),f.signal&&f.signal.removeEventListener("abort",B)}t.isFormData(v)&&delete m["Content-Type"];var C=new XMLHttpRequest;if(f.auth){var F=f.auth.username||"",k=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";m.Authorization="Basic "+btoa(F+":"+k)}var O=i(f.baseURL,f.url);C.open(f.method.toUpperCase(),n(O,f.params,f.paramsSerializer),!0),C.timeout=f.timeout;function A(){if(C){var U="getAllResponseHeaders"in C?a(C.getAllResponseHeaders()):null,K=!D||D==="text"||D==="json"?C.responseText:C.response,J={data:K,status:C.status,statusText:C.statusText,headers:U,config:f,request:C};e(function(V){g(V),w()},function(V){b(V),w()},J),C=null}}if("onloadend"in C?C.onloadend=A:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(A)},C.onabort=function(){C&&(b(s("Request aborted",f,"ECONNABORTED",C)),C=null)},C.onerror=function(){b(s("Network Error",f,null,C)),C=null},C.ontimeout=function(){var K=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",J=f.transitional||l;f.timeoutErrorMessage&&(K=f.timeoutErrorMessage),b(s(K,f,J.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",C)),C=null},t.isStandardBrowserEnv()){var x=(f.withCredentials||o(O))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;x&&(m[f.xsrfHeaderName]=x)}"setRequestHeader"in C&&t.forEach(m,function(K,J){typeof v>"u"&&J.toLowerCase()==="content-type"?delete m[J]:C.setRequestHeader(J,K)}),t.isUndefined(f.withCredentials)||(C.withCredentials=!!f.withCredentials),D&&D!=="json"&&(C.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&C.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(B=function(U){C&&(b(!U||U&&U.type?new p("canceled"):U),C.abort(),C=null)},f.cancelToken&&f.cancelToken.subscribe(B),f.signal&&(f.signal.aborted?B():f.signal.addEventListener("abort",B))),v||(v=null),C.send(v)})},rc}var xr=on,Jd=SS,xS=tg,NS=rg,LS={"Content-Type":"application/x-www-form-urlencoded"};function Qd(t,e){!xr.isUndefined(t)&&xr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function RS(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Zd()),t}function US(t,e,r){if(xr.isString(t))try{return(e||JSON.parse)(t),xr.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Ao={transitional:NS,adapter:RS(),transformRequest:[function(e,r){return Jd(r,"Accept"),Jd(r,"Content-Type"),xr.isFormData(e)||xr.isArrayBuffer(e)||xr.isBuffer(e)||xr.isStream(e)||xr.isFile(e)||xr.isBlob(e)?e:xr.isArrayBufferView(e)?e.buffer:xr.isURLSearchParams(e)?(Qd(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):xr.isObject(e)||r&&r["Content-Type"]==="application/json"?(Qd(r,"application/json"),US(e)):e}],transformResponse:[function(e){var r=this.transitional||Ao.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&xr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?xS(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};xr.forEach(["delete","get","head"],function(e){Ao.headers[e]={}});xr.forEach(["post","put","patch"],function(e){Ao.headers[e]=xr.merge(LS)});var af=Ao,VS=on,jS=af,zS=function(e,r,n){var i=this||jS;return VS.forEach(n,function(o){e=o.call(i,e,r)}),e},nc,Xd;function ig(){return Xd||(Xd=1,nc=function(e){return!!(e&&e.__CANCEL__)}),nc}var ep=on,ic=zS,qS=ig(),WS=af,HS=Eo();function ac(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new HS("canceled")}var $S=function(e){ac(e),e.headers=e.headers||{},e.data=ic.call(e,e.data,e.headers,e.transformRequest),e.headers=ep.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),ep.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||WS.adapter;return r(e).then(function(i){return ac(e),i.data=ic.call(e,i.data,i.headers,e.transformResponse),i},function(i){return qS(i)||(ac(e),i&&i.response&&(i.response.data=ic.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},gn=on,ag=function(e,r){r=r||{};var n={};function i(c,f){return gn.isPlainObject(c)&&gn.isPlainObject(f)?gn.merge(c,f):gn.isPlainObject(f)?gn.merge({},f):gn.isArray(f)?f.slice():f}function a(c){if(gn.isUndefined(r[c])){if(!gn.isUndefined(e[c]))return i(void 0,e[c])}else return i(e[c],r[c])}function o(c){if(!gn.isUndefined(r[c]))return i(void 0,r[c])}function s(c){if(gn.isUndefined(r[c])){if(!gn.isUndefined(e[c]))return i(void 0,e[c])}else return i(void 0,r[c])}function l(c){if(c in r)return i(e[c],r[c]);if(c in e)return i(void 0,e[c])}var p={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l};return gn.forEach(Object.keys(e).concat(Object.keys(r)),function(f){var d=p[f]||a,g=d(f);gn.isUndefined(g)&&d!==l||(n[f]=g)}),n},uc,tp;function ug(){return tp||(tp=1,uc={version:"0.26.1"}),uc}var GS=ug().version,uf={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){uf[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var rp={};uf.transitional=function(e,r,n){function i(a,o){return"[Axios v"+GS+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,s){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!rp[o]&&(rp[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,s):!0}};function KS(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],o=e[a];if(o){var s=t[a],l=s===void 0||o(s,a,t);if(l!==!0)throw new TypeError("option "+a+" must be "+l);continue}if(r!==!0)throw Error("Unknown option "+a)}}var YS={assertOptions:KS,validators:uf},sg=on,ZS=eg,np=CS,ip=$S,Co=ag,og=YS,Da=og.validators;function Ou(t){this.defaults=t,this.interceptors={request:new np,response:new np}}Ou.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Co(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&og.assertOptions(n,{silentJSONParsing:Da.transitional(Da.boolean),forcedJSONParsing:Da.transitional(Da.boolean),clarifyTimeoutError:Da.transitional(Da.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(a=a&&g.synchronous,i.unshift(g.fulfilled,g.rejected))});var o=[];this.interceptors.response.forEach(function(g){o.push(g.fulfilled,g.rejected)});var s;if(!a){var l=[ip,void 0];for(Array.prototype.unshift.apply(l,i),l=l.concat(o),s=Promise.resolve(r);l.length;)s=s.then(l.shift(),l.shift());return s}for(var p=r;i.length;){var c=i.shift(),f=i.shift();try{p=c(p)}catch(d){f(d);break}}try{s=ip(p)}catch(d){return Promise.reject(d)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};Ou.prototype.getUri=function(e){return e=Co(this.defaults,e),ZS(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};sg.forEach(["delete","get","head","options"],function(e){Ou.prototype[e]=function(r,n){return this.request(Co(n||{},{method:e,url:r,data:(n||{}).data}))}});sg.forEach(["post","put","patch"],function(e){Ou.prototype[e]=function(r,n,i){return this.request(Co(i||{},{method:e,url:r,data:n}))}});var JS=Ou,sc,ap;function QS(){if(ap)return sc;ap=1;var t=Eo();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(a){if(i._listeners){var o,s=i._listeners.length;for(o=0;o<s;o++)i._listeners[o](a);i._listeners=null}}),this.promise.then=function(a){var o,s=new Promise(function(l){i.subscribe(l),o=l}).then(a);return s.cancel=function(){i.unsubscribe(o)},s},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},sc=e,sc}var oc,up;function XS(){return up||(up=1,oc=function(e){return function(n){return e.apply(null,n)}}),oc}var lc,sp;function e8(){if(sp)return lc;sp=1;var t=on;return lc=function(r){return t.isObject(r)&&r.isAxiosError===!0},lc}var op=on,t8=Z1,Os=JS,r8=ag,n8=af;function lg(t){var e=new Os(t),r=t8(Os.prototype.request,e);return op.extend(r,Os.prototype,e),op.extend(r,e),r.create=function(i){return lg(r8(t,i))},r}var Qn=lg(n8);Qn.Axios=Os;Qn.Cancel=Eo();Qn.CancelToken=QS();Qn.isCancel=ig();Qn.VERSION=ug().version;Qn.all=function(e){return Promise.all(e)};Qn.spread=XS();Qn.isAxiosError=e8();oS.exports=Qn;to.default=Qn;(function(t){t.exports=to})(sS);var ir={},sf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RequiredError=t.BaseAPI=t.COLLECTION_FORMATS=t.BASE_PATH=void 0;const e=eo;t.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class r{constructor(a,o=t.BASE_PATH,s=e.default){this.basePath=o,this.axios=s,a&&(this.configuration=a,this.basePath=a.basePath||this.basePath)}}t.BaseAPI=r;class n extends Error{constructor(a,o){super(o),this.field=a,this.name="RequiredError"}}t.RequiredError=n})(sf);var of=vr&&vr.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{p(n.next(c))}catch(f){o(f)}}function l(c){try{p(n.throw(c))}catch(f){o(f)}}function p(c){c.done?a(c.value):i(c.value).then(s,l)}p((n=n.apply(t,e||[])).next())})};Object.defineProperty(ir,"__esModule",{value:!0});ir.createRequestFunction=ir.toPathString=ir.serializeDataIfNeeded=ir.setSearchParams=ir.setOAuthToObject=ir.setBearerAuthToObject=ir.setBasicAuthToObject=ir.setApiKeyToObject=ir.assertParamExists=ir.DUMMY_BASE_URL=void 0;const i8=sf;ir.DUMMY_BASE_URL="https://example.com";ir.assertParamExists=function(t,e,r){if(r==null)throw new i8.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};ir.setApiKeyToObject=function(t,e,r){return of(this,void 0,void 0,function*(){if(r&&r.apiKey){const n=typeof r.apiKey=="function"?yield r.apiKey(e):yield r.apiKey;t[e]=n}})};ir.setBasicAuthToObject=function(t,e){e&&(e.username||e.password)&&(t.auth={username:e.username,password:e.password})};ir.setBearerAuthToObject=function(t,e){return of(this,void 0,void 0,function*(){if(e&&e.accessToken){const r=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;t.Authorization="Bearer "+r}})};ir.setOAuthToObject=function(t,e,r,n){return of(this,void 0,void 0,function*(){if(n&&n.accessToken){const i=typeof n.accessToken=="function"?yield n.accessToken(e,r):yield n.accessToken;t.Authorization="Bearer "+i}})};function Rc(t,e,r=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(n=>Rc(t,n,r)):Object.keys(e).forEach(n=>Rc(t,e[n],`${r}${r!==""?".":""}${n}`)):t.has(r)?t.append(r,e):t.set(r,e))}ir.setSearchParams=function(t,...e){const r=new URLSearchParams(t.search);Rc(r,e),t.search=r.toString()};ir.serializeDataIfNeeded=function(t,e,r){const n=typeof t!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(t!==void 0?t:{}):t||""};ir.toPathString=function(t){return t.pathname+t.search+t.hash};ir.createRequestFunction=function(t,e,r,n){return(i=e,a=r)=>{const o=Object.assign(Object.assign({},t.options),{url:((n==null?void 0:n.basePath)||a)+t.url});return i.request(o)}};(function(t){var e=vr&&vr.__awaiter||function(o,s,l,p){function c(f){return f instanceof l?f:new l(function(d){d(f)})}return new(l||(l=Promise))(function(f,d){function g(m){try{v(p.next(m))}catch(D){d(D)}}function b(m){try{v(p.throw(m))}catch(D){d(D)}}function v(m){m.done?f(m.value):c(m.value).then(g,b)}v((p=p.apply(o,s||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIApi=t.OpenAIApiFactory=t.OpenAIApiFp=t.OpenAIApiAxiosParamCreator=t.CreateImageRequestResponseFormatEnum=t.CreateImageRequestSizeEnum=t.ChatCompletionResponseMessageRoleEnum=t.ChatCompletionRequestMessageRoleEnum=void 0;const r=eo,n=ir,i=sf;t.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},t.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},t.OpenAIApiAxiosParamCreator=function(o){return{cancelFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("cancelFineTune","fineTuneId",s);const p="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:d}}),createAnswer:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createAnswer","createAnswerRequest",s);const p="/answers",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createChatCompletion:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createChatCompletion","createChatCompletionRequest",s);const p="/chat/completions",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createClassification:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createClassification","createClassificationRequest",s);const p="/classifications",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createCompletion:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createCompletion","createCompletionRequest",s);const p="/completions",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createEdit:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEdit","createEditRequest",s);const p="/edits",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createEmbedding:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEmbedding","createEmbeddingRequest",s);const p="/embeddings",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createFile:(s,l,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFile","file",s),n.assertParamExists("createFile","purpose",l);const c="/files",f=new URL(c,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},d),p),b={},v={},m=new(o&&o.formDataCtor||FormData);s!==void 0&&m.append("file",s),l!==void 0&&m.append("purpose",l),b["Content-Type"]="multipart/form-data",n.setSearchParams(f,v);let D=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),m.getHeaders()),D),p.headers),g.data=m,{url:n.toPathString(f),options:g}}),createFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFineTune","createFineTuneRequest",s);const p="/fine-tunes",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createImage:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImage","createImageRequest",s);const p="/images/generations",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createImageEdit:(s,l,p,c,f,d,g,b={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageEdit","image",s),n.assertParamExists("createImageEdit","prompt",l);const v="/images/edits",m=new URL(v,n.DUMMY_BASE_URL);let D;o&&(D=o.baseOptions);const B=Object.assign(Object.assign({method:"POST"},D),b),w={},C={},F=new(o&&o.formDataCtor||FormData);s!==void 0&&F.append("image",s),p!==void 0&&F.append("mask",p),l!==void 0&&F.append("prompt",l),c!==void 0&&F.append("n",c),f!==void 0&&F.append("size",f),d!==void 0&&F.append("response_format",d),g!==void 0&&F.append("user",g),w["Content-Type"]="multipart/form-data",n.setSearchParams(m,C);let k=D&&D.headers?D.headers:{};return B.headers=Object.assign(Object.assign(Object.assign(Object.assign({},w),F.getHeaders()),k),b.headers),B.data=F,{url:n.toPathString(m),options:B}}),createImageVariation:(s,l,p,c,f,d={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageVariation","image",s);const g="/images/variations",b=new URL(g,n.DUMMY_BASE_URL);let v;o&&(v=o.baseOptions);const m=Object.assign(Object.assign({method:"POST"},v),d),D={},B={},w=new(o&&o.formDataCtor||FormData);s!==void 0&&w.append("image",s),l!==void 0&&w.append("n",l),p!==void 0&&w.append("size",p),c!==void 0&&w.append("response_format",c),f!==void 0&&w.append("user",f),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,B);let C=v&&v.headers?v.headers:{};return m.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),w.getHeaders()),C),d.headers),m.data=w,{url:n.toPathString(b),options:m}}),createModeration:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createModeration","createModerationRequest",s);const p="/moderations",c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},f),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(c),options:d}}),createSearch:(s,l,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createSearch","engineId",s),n.assertParamExists("createSearch","createSearchRequest",l);const c="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(s))),f=new URL(c,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},d),p),b={},v={};b["Content-Type"]="application/json",n.setSearchParams(f,v);let m=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),m),p.headers),g.data=n.serializeDataIfNeeded(l,g,o),{url:n.toPathString(f),options:g}}),createTranscription:(s,l,p,c,f,d,g={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranscription","file",s),n.assertParamExists("createTranscription","model",l);const b="/audio/transcriptions",v=new URL(b,n.DUMMY_BASE_URL);let m;o&&(m=o.baseOptions);const D=Object.assign(Object.assign({method:"POST"},m),g),B={},w={},C=new(o&&o.formDataCtor||FormData);s!==void 0&&C.append("file",s),l!==void 0&&C.append("model",l),p!==void 0&&C.append("prompt",p),c!==void 0&&C.append("response_format",c),f!==void 0&&C.append("temperature",f),d!==void 0&&C.append("language",d),B["Content-Type"]="multipart/form-data",n.setSearchParams(v,w);let F=m&&m.headers?m.headers:{};return D.headers=Object.assign(Object.assign(Object.assign(Object.assign({},B),C.getHeaders()),F),g.headers),D.data=C,{url:n.toPathString(v),options:D}}),createTranslation:(s,l,p,c,f,d={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranslation","file",s),n.assertParamExists("createTranslation","model",l);const g="/audio/translations",b=new URL(g,n.DUMMY_BASE_URL);let v;o&&(v=o.baseOptions);const m=Object.assign(Object.assign({method:"POST"},v),d),D={},B={},w=new(o&&o.formDataCtor||FormData);s!==void 0&&w.append("file",s),l!==void 0&&w.append("model",l),p!==void 0&&w.append("prompt",p),c!==void 0&&w.append("response_format",c),f!==void 0&&w.append("temperature",f),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,B);let C=v&&v.headers?v.headers:{};return m.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),w.getHeaders()),C),d.headers),m.data=w,{url:n.toPathString(b),options:m}}),deleteFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteFile","fileId",s);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:d}}),deleteModel:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteModel","model",s);const p="/models/{model}".replace("{model}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:d}}),downloadFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("downloadFile","fileId",s);const p="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:d}}),listEngines:(s={})=>e(this,void 0,void 0,function*(){const l="/engines",p=new URL(l,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),s),d={},g={};n.setSearchParams(p,g);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:f}}),listFiles:(s={})=>e(this,void 0,void 0,function*(){const l="/files",p=new URL(l,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),s),d={},g={};n.setSearchParams(p,g);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:f}}),listFineTuneEvents:(s,l,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("listFineTuneEvents","fineTuneId",s);const c="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(s))),f=new URL(c,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"GET"},d),p),b={},v={};l!==void 0&&(v.stream=l),n.setSearchParams(f,v);let m=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),m),p.headers),{url:n.toPathString(f),options:g}}),listFineTunes:(s={})=>e(this,void 0,void 0,function*(){const l="/fine-tunes",p=new URL(l,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),s),d={},g={};n.setSearchParams(p,g);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:f}}),listModels:(s={})=>e(this,void 0,void 0,function*(){const l="/models",p=new URL(l,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const f=Object.assign(Object.assign({method:"GET"},c),s),d={},g={};n.setSearchParams(p,g);let b=c&&c.headers?c.headers:{};return f.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:f}}),retrieveEngine:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveEngine","engineId",s);const p="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:d}}),retrieveFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFile","fileId",s);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:d}}),retrieveFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFineTune","fineTuneId",s);const p="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:d}}),retrieveModel:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveModel","model",s);const p="/models/{model}".replace("{model}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),l),g={},b={};n.setSearchParams(c,b);let v=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(c),options:d}})}},t.OpenAIApiFp=function(o){const s=t.OpenAIApiAxiosParamCreator(o);return{cancelFineTune(l,p){return e(this,void 0,void 0,function*(){const c=yield s.cancelFineTune(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createAnswer(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createAnswer(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createChatCompletion(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createChatCompletion(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createClassification(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createClassification(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createCompletion(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createCompletion(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createEdit(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createEdit(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createEmbedding(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createEmbedding(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createFile(l,p,c){return e(this,void 0,void 0,function*(){const f=yield s.createFile(l,p,c);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createFineTune(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createFineTune(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createImage(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createImage(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createImageEdit(l,p,c,f,d,g,b,v){return e(this,void 0,void 0,function*(){const m=yield s.createImageEdit(l,p,c,f,d,g,b,v);return n.createRequestFunction(m,r.default,i.BASE_PATH,o)})},createImageVariation(l,p,c,f,d,g){return e(this,void 0,void 0,function*(){const b=yield s.createImageVariation(l,p,c,f,d,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},createModeration(l,p){return e(this,void 0,void 0,function*(){const c=yield s.createModeration(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createSearch(l,p,c){return e(this,void 0,void 0,function*(){const f=yield s.createSearch(l,p,c);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createTranscription(l,p,c,f,d,g,b){return e(this,void 0,void 0,function*(){const v=yield s.createTranscription(l,p,c,f,d,g,b);return n.createRequestFunction(v,r.default,i.BASE_PATH,o)})},createTranslation(l,p,c,f,d,g){return e(this,void 0,void 0,function*(){const b=yield s.createTranslation(l,p,c,f,d,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},deleteFile(l,p){return e(this,void 0,void 0,function*(){const c=yield s.deleteFile(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},deleteModel(l,p){return e(this,void 0,void 0,function*(){const c=yield s.deleteModel(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},downloadFile(l,p){return e(this,void 0,void 0,function*(){const c=yield s.downloadFile(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},listEngines(l){return e(this,void 0,void 0,function*(){const p=yield s.listEngines(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listFiles(l){return e(this,void 0,void 0,function*(){const p=yield s.listFiles(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listFineTuneEvents(l,p,c){return e(this,void 0,void 0,function*(){const f=yield s.listFineTuneEvents(l,p,c);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},listFineTunes(l){return e(this,void 0,void 0,function*(){const p=yield s.listFineTunes(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listModels(l){return e(this,void 0,void 0,function*(){const p=yield s.listModels(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},retrieveEngine(l,p){return e(this,void 0,void 0,function*(){const c=yield s.retrieveEngine(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},retrieveFile(l,p){return e(this,void 0,void 0,function*(){const c=yield s.retrieveFile(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},retrieveFineTune(l,p){return e(this,void 0,void 0,function*(){const c=yield s.retrieveFineTune(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},retrieveModel(l,p){return e(this,void 0,void 0,function*(){const c=yield s.retrieveModel(l,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})}}},t.OpenAIApiFactory=function(o,s,l){const p=t.OpenAIApiFp(o);return{cancelFineTune(c,f){return p.cancelFineTune(c,f).then(d=>d(l,s))},createAnswer(c,f){return p.createAnswer(c,f).then(d=>d(l,s))},createChatCompletion(c,f){return p.createChatCompletion(c,f).then(d=>d(l,s))},createClassification(c,f){return p.createClassification(c,f).then(d=>d(l,s))},createCompletion(c,f){return p.createCompletion(c,f).then(d=>d(l,s))},createEdit(c,f){return p.createEdit(c,f).then(d=>d(l,s))},createEmbedding(c,f){return p.createEmbedding(c,f).then(d=>d(l,s))},createFile(c,f,d){return p.createFile(c,f,d).then(g=>g(l,s))},createFineTune(c,f){return p.createFineTune(c,f).then(d=>d(l,s))},createImage(c,f){return p.createImage(c,f).then(d=>d(l,s))},createImageEdit(c,f,d,g,b,v,m,D){return p.createImageEdit(c,f,d,g,b,v,m,D).then(B=>B(l,s))},createImageVariation(c,f,d,g,b,v){return p.createImageVariation(c,f,d,g,b,v).then(m=>m(l,s))},createModeration(c,f){return p.createModeration(c,f).then(d=>d(l,s))},createSearch(c,f,d){return p.createSearch(c,f,d).then(g=>g(l,s))},createTranscription(c,f,d,g,b,v,m){return p.createTranscription(c,f,d,g,b,v,m).then(D=>D(l,s))},createTranslation(c,f,d,g,b,v){return p.createTranslation(c,f,d,g,b,v).then(m=>m(l,s))},deleteFile(c,f){return p.deleteFile(c,f).then(d=>d(l,s))},deleteModel(c,f){return p.deleteModel(c,f).then(d=>d(l,s))},downloadFile(c,f){return p.downloadFile(c,f).then(d=>d(l,s))},listEngines(c){return p.listEngines(c).then(f=>f(l,s))},listFiles(c){return p.listFiles(c).then(f=>f(l,s))},listFineTuneEvents(c,f,d){return p.listFineTuneEvents(c,f,d).then(g=>g(l,s))},listFineTunes(c){return p.listFineTunes(c).then(f=>f(l,s))},listModels(c){return p.listModels(c).then(f=>f(l,s))},retrieveEngine(c,f){return p.retrieveEngine(c,f).then(d=>d(l,s))},retrieveFile(c,f){return p.retrieveFile(c,f).then(d=>d(l,s))},retrieveFineTune(c,f){return p.retrieveFineTune(c,f).then(d=>d(l,s))},retrieveModel(c,f){return p.retrieveModel(c,f).then(d=>d(l,s))}}};class a extends i.BaseAPI{cancelFineTune(s,l){return t.OpenAIApiFp(this.configuration).cancelFineTune(s,l).then(p=>p(this.axios,this.basePath))}createAnswer(s,l){return t.OpenAIApiFp(this.configuration).createAnswer(s,l).then(p=>p(this.axios,this.basePath))}createChatCompletion(s,l){return t.OpenAIApiFp(this.configuration).createChatCompletion(s,l).then(p=>p(this.axios,this.basePath))}createClassification(s,l){return t.OpenAIApiFp(this.configuration).createClassification(s,l).then(p=>p(this.axios,this.basePath))}createCompletion(s,l){return t.OpenAIApiFp(this.configuration).createCompletion(s,l).then(p=>p(this.axios,this.basePath))}createEdit(s,l){return t.OpenAIApiFp(this.configuration).createEdit(s,l).then(p=>p(this.axios,this.basePath))}createEmbedding(s,l){return t.OpenAIApiFp(this.configuration).createEmbedding(s,l).then(p=>p(this.axios,this.basePath))}createFile(s,l,p){return t.OpenAIApiFp(this.configuration).createFile(s,l,p).then(c=>c(this.axios,this.basePath))}createFineTune(s,l){return t.OpenAIApiFp(this.configuration).createFineTune(s,l).then(p=>p(this.axios,this.basePath))}createImage(s,l){return t.OpenAIApiFp(this.configuration).createImage(s,l).then(p=>p(this.axios,this.basePath))}createImageEdit(s,l,p,c,f,d,g,b){return t.OpenAIApiFp(this.configuration).createImageEdit(s,l,p,c,f,d,g,b).then(v=>v(this.axios,this.basePath))}createImageVariation(s,l,p,c,f,d){return t.OpenAIApiFp(this.configuration).createImageVariation(s,l,p,c,f,d).then(g=>g(this.axios,this.basePath))}createModeration(s,l){return t.OpenAIApiFp(this.configuration).createModeration(s,l).then(p=>p(this.axios,this.basePath))}createSearch(s,l,p){return t.OpenAIApiFp(this.configuration).createSearch(s,l,p).then(c=>c(this.axios,this.basePath))}createTranscription(s,l,p,c,f,d,g){return t.OpenAIApiFp(this.configuration).createTranscription(s,l,p,c,f,d,g).then(b=>b(this.axios,this.basePath))}createTranslation(s,l,p,c,f,d){return t.OpenAIApiFp(this.configuration).createTranslation(s,l,p,c,f,d).then(g=>g(this.axios,this.basePath))}deleteFile(s,l){return t.OpenAIApiFp(this.configuration).deleteFile(s,l).then(p=>p(this.axios,this.basePath))}deleteModel(s,l){return t.OpenAIApiFp(this.configuration).deleteModel(s,l).then(p=>p(this.axios,this.basePath))}downloadFile(s,l){return t.OpenAIApiFp(this.configuration).downloadFile(s,l).then(p=>p(this.axios,this.basePath))}listEngines(s){return t.OpenAIApiFp(this.configuration).listEngines(s).then(l=>l(this.axios,this.basePath))}listFiles(s){return t.OpenAIApiFp(this.configuration).listFiles(s).then(l=>l(this.axios,this.basePath))}listFineTuneEvents(s,l,p){return t.OpenAIApiFp(this.configuration).listFineTuneEvents(s,l,p).then(c=>c(this.axios,this.basePath))}listFineTunes(s){return t.OpenAIApiFp(this.configuration).listFineTunes(s).then(l=>l(this.axios,this.basePath))}listModels(s){return t.OpenAIApiFp(this.configuration).listModels(s).then(l=>l(this.axios,this.basePath))}retrieveEngine(s,l){return t.OpenAIApiFp(this.configuration).retrieveEngine(s,l).then(p=>p(this.axios,this.basePath))}retrieveFile(s,l){return t.OpenAIApiFp(this.configuration).retrieveFile(s,l).then(p=>p(this.axios,this.basePath))}retrieveFineTune(s,l){return t.OpenAIApiFp(this.configuration).retrieveFineTune(s,l).then(p=>p(this.axios,this.basePath))}retrieveModel(s,l){return t.OpenAIApiFp(this.configuration).retrieveModel(s,l).then(p=>p(this.axios,this.basePath))}}t.OpenAIApi=a})(Y1);var Fo={};const a8="openai",u8="3.2.1",s8="Node.js library for the OpenAI API",o8={type:"git",url:"git@github.com:openai/openai-node.git"},l8=["openai","open","ai","gpt-3","gpt3"],c8="OpenAI",f8="MIT",h8="./dist/index.js",d8="./dist/index.d.ts",p8={build:"tsc --outDir dist/"},g8={axios:"^0.26.0","form-data":"^4.0.0"},v8={"@types/node":"^12.11.5",typescript:"^3.6.4"},m8={name:a8,version:u8,description:s8,repository:o8,keywords:l8,author:c8,license:f8,main:h8,types:d8,scripts:p8,dependencies:g8,devDependencies:v8};var cc,lp;function _8(){return lp||(lp=1,cc=typeof self=="object"?self.FormData:window.FormData),cc}Object.defineProperty(Fo,"__esModule",{value:!0});Fo.Configuration=void 0;const b8=m8;class D8{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${b8.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=_8())}isJsonMime(e){const r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(r.test(e)||e.toLowerCase()==="application/json-patch+json")}}Fo.Configuration=D8;(function(t){var e=vr&&vr.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=vr&&vr.__exportStar||function(n,i){for(var a in n)a!=="default"&&!i.hasOwnProperty(a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Y1,t),r(Fo,t)})(xc);function ro(t){const e=new xc.Configuration({apiKey:t});return new xc.OpenAIApi(e)}async function y8(t,e,r="text-davinci-003"){return await t.createCompletion({model:r,prompt:e,temperature:.8,max_tokens:250})}async function w8(t,e,r="gpt-3.5-turbo"){return await t.createChatCompletion({model:r,messages:[{role:"user",content:e}],temperature:.8,max_tokens:250})}async function E8(t,e,r="text-embedding-ada-002"){return await t.createEmbedding({model:r,input:e})}async function A8(t){return await t.listModels()}const fc="preferredEmbeddingModel";function C8(){const t=sr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[fc]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[fc]=a,r(a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[fc],r(""))}}}const Uc=C8();async function F8(t){const e=ro(di.get());return(await E8(e,t,Uc.get()||"text-embedding-ada-002")).data.data[0].embedding}function S8(t){let e,r,n,i;return{c(){e=q("div"),r=q("div"),n=q("p"),i=Se("Some features require OpenAI Key"),this.h()},l(a){e=W(a,"DIV",{class:!0});var o=R(e);r=W(o,"DIV",{class:!0});var s=R(r);n=W(s,"P",{class:!0});var l=R(n);i=Be(l,"Some features require OpenAI Key"),l.forEach(M),s.forEach(M),o.forEach(M),this.h()},h(){S(n,"class","text-xs"),S(r,"class","flex flex-col justify-start mr-5"),S(e,"class","w-full flex justify-center p-4")},m(a,o){se(a,e,o),T(e,r),T(r,n),T(n,i)},d(a){a&&M(e)}}}function B8(t){let e,r,n,i,a,o,s;return{c(){e=q("div"),r=q("div"),n=q("progress"),i=Ee(),a=q("div"),o=q("p"),s=Se("Embedding..."),this.h()},l(l){e=W(l,"DIV",{class:!0});var p=R(e);r=W(p,"DIV",{class:!0});var c=R(r);n=W(c,"PROGRESS",{class:!0}),R(n).forEach(M),c.forEach(M),i=Ae(p),a=W(p,"DIV",{class:!0});var f=R(a);o=W(f,"P",{class:!0});var d=R(o);s=Be(d,"Embedding..."),d.forEach(M),f.forEach(M),p.forEach(M),this.h()},h(){S(n,"class","progress progress-primary w-20"),S(r,"class","flex flex-col justify-start mr-5"),S(o,"class","text-xs"),S(a,"class","flex flex-col justify-start mr-5"),S(e,"class","w-full flex justify-center p-4")},m(l,p){se(l,e,p),T(e,r),T(r,n),T(e,i),T(e,a),T(a,o),T(o,s)},d(l){l&&M(e)}}}function O8(t){let e;function r(a,o){if(a[0])return B8;if(!a[1])return S8}let n=r(t),i=n&&n(t);return{c(){i&&i.c(),e=Ft()},l(a){i&&i.l(a),e=Ft()},m(a,o){i&&i.m(a,o),se(a,e,o)},p(a,[o]){n!==(n=r(a))&&(i&&i.d(1),i=n&&n(a),i&&(i.c(),i.m(e.parentNode,e)))},i:Me,o:Me,d(a){i&&i.d(a),a&&M(e)}}}function M8(t,e,r){let n,i;Ge(t,ya,c=>r(2,n=c)),Ge(t,di,c=>r(1,i=c));let a=!1;function o(){return Object.keys(n).length}const s=Ur.subscribe(c=>{const f=Object.entries(c).filter(([d,g])=>!g);i&&f.length>0&&f.forEach(([d,g])=>{ya.update(b=>(b[d]=!1,b))})}),l=ya.subscribe(c=>{!!(di.get()&&o()>0&&!a)&&(r(0,a=!0),p())});function p(){console.log("start embedding");const c=Object.keys(n)[0];ya.update(f=>(f[c]=!0,f)),F8(c).then(f=>{Ur.update(c,f);const d={...n};delete d[c],ya.set(d),o()>0?p():r(0,a=!1)})}return Rp(()=>{s(),l()}),[a,i]}class P8 extends Xe{constructor(e){super(),et(this,e,M8,O8,tt,{})}}function k8(t){let e,r,n,i,a,o,s;return{c(){e=ut("svg"),r=ut("circle"),n=ut("circle"),i=ut("circle"),a=ut("rect"),o=ut("rect"),s=ut("rect"),this.h()},l(l){e=st(l,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var p=R(e);r=st(p,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(r).forEach(M),n=st(p,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(n).forEach(M),i=st(p,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(i).forEach(M),a=st(p,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),R(a).forEach(M),o=st(p,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),R(o).forEach(M),s=st(p,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),R(s).forEach(M),p.forEach(M),this.h()},h(){S(r,"cx","5"),S(r,"cy","14"),S(r,"r","2"),S(r,"fill","rgba(255,255,255, 0.7)"),S(n,"cx","5"),S(n,"cy","25"),S(n,"r","2"),S(n,"fill","rgba(255,255,255, 0.7)"),S(i,"cx","5"),S(i,"cy","36"),S(i,"r","2"),S(i,"fill","rgba(255,255,255, 0.7)"),S(a,"x","10"),S(a,"y","12"),S(a,"width","35"),S(a,"height","4"),S(a,"fill","rgba(255,255,255, 0.7)"),S(o,"x","10"),S(o,"y","23"),S(o,"width","35"),S(o,"height","4"),S(o,"fill","rgba(255,255,255, 0.7)"),S(s,"x","10"),S(s,"y","34"),S(s,"width","35"),S(s,"height","4"),S(s,"fill","rgba(255,255,255, 0.7)"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"fill","rgba(255,255,255, 0.7)"),S(e,"class","h-6 w-6"),S(e,"viewBox","0 0 50 50")},m(l,p){se(l,e,p),T(e,r),T(e,n),T(e,i),T(e,a),T(e,o),T(e,s)},p:Me,i:Me,o:Me,d(l){l&&M(e)}}}class T8 extends Xe{constructor(e){super(),et(this,e,null,k8,tt,{})}}function I8(t){let e,r,n,i,a,o,s,l,p,c,f,d,g;return i=new T8({}),s=new Up({}),{c(){e=q("div"),r=q("div"),n=q("button"),Ve(i.$$.fragment),a=Ee(),o=q("button"),Ve(s.$$.fragment),l=Ee(),p=q("button"),c=Se("Paste"),this.h()},l(b){e=W(b,"DIV",{class:!0});var v=R(e);r=W(v,"DIV",{class:!0});var m=R(r);n=W(m,"BUTTON",{class:!0});var D=R(n);je(i.$$.fragment,D),D.forEach(M),a=Ae(m),o=W(m,"BUTTON",{class:!0});var B=R(o);je(s.$$.fragment,B),B.forEach(M),m.forEach(M),l=Ae(v),p=W(v,"BUTTON",{class:!0});var w=R(p);c=Be(w,"Paste"),w.forEach(M),v.forEach(M),this.h()},h(){S(n,"class","btn btn-sm"),Qe(n,"btn-active",t[0]===Kn.List),S(o,"class","btn btn-sm"),Qe(o,"btn-active",t[0]===Kn.Map),S(r,"class","btn-group btn-group-horizontal w-full flex justify-end"),S(p,"class","btn btn-sm btn-info ml-2"),S(e,"class","flex justify-center p-2")},m(b,v){se(b,e,v),T(e,r),T(r,n),ze(i,n,null),T(r,a),T(r,o),ze(s,o,null),T(e,l),T(e,p),T(p,c),f=!0,d||(g=[_e(n,"click",t[2]),_e(o,"click",t[3]),_e(p,"click",t[1])],d=!0)},p(b,[v]){(!f||v&1)&&Qe(n,"btn-active",b[0]===Kn.List),(!f||v&1)&&Qe(o,"btn-active",b[0]===Kn.Map)},i(b){f||(fe(i.$$.fragment,b),fe(s.$$.fragment,b),f=!0)},o(b){ve(i.$$.fragment,b),ve(s.$$.fragment,b),f=!1},d(b){b&&M(e),qe(i),qe(s),d=!1,zt(g)}}}function x8(t,e,r){let n,i;Ge(t,Ur,l=>r(4,n=l)),Ge(t,Ss,l=>r(0,i=l));function a(){console.log("pasted"),navigator.clipboard.readText().then(l=>{const p=bu(l).map(f=>f[0]),c=n;p.forEach(f=>{c[f]||Ur.update(f,null)})})}return[i,a,()=>Ss.set(Kn.List),()=>Ss.set(Kn.Map)]}class N8 extends Xe{constructor(e){super(),et(this,e,x8,I8,tt,{})}}function L8(t){let e,r,n,i,a;return{c(){e=q("div"),r=q("button"),n=Se("Delete History"),this.h()},l(o){e=W(o,"DIV",{class:!0});var s=R(e);r=W(s,"BUTTON",{class:!0});var l=R(r);n=Be(l,"Delete History"),l.forEach(M),s.forEach(M),this.h()},h(){S(r,"class","btn btn-sm btn-error"),S(e,"class","flex justify-end p-2")},m(o,s){se(o,e,s),T(e,r),T(r,n),i||(a=_e(r,"click",t[0]),i=!0)},p:Me,i:Me,o:Me,d(o){o&&M(e),i=!1,a()}}}function R8(t){function e(){Xc.delete()}return[e]}class U8 extends Xe{constructor(e){super(),et(this,e,R8,L8,tt,{})}}function V8(t){let e,r;return e=new U8({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p:Me,i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function j8(t){let e,r;return e=new N8({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p:Me,i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function z8(t){let e,r,n,i;r=new Sy({});let a=(t[1].weightMode===gt.Circle||t[1].weightMode===gt.Pie||t[1].weightMode===gt.Ring)&&cp();return{c(){e=q("div"),Ve(r.$$.fragment),n=Ee(),a&&a.c()},l(o){e=W(o,"DIV",{});var s=R(e);je(r.$$.fragment,s),n=Ae(s),a&&a.l(s),s.forEach(M)},m(o,s){se(o,e,s),ze(r,e,null),T(e,n),a&&a.m(e,null),i=!0},p(o,s){o[1].weightMode===gt.Circle||o[1].weightMode===gt.Pie||o[1].weightMode===gt.Ring?a?s&2&&fe(a,1):(a=cp(),a.c(),fe(a,1),a.m(e,null)):a&&(ar(),ve(a,1,1,()=>{a=null}),ur())},i(o){i||(fe(r.$$.fragment,o),fe(a),i=!0)},o(o){ve(r.$$.fragment,o),ve(a),i=!1},d(o){o&&M(e),qe(r),a&&a.d()}}}function cp(t){let e,r;return e=new Ny({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function q8(t){let e,r,n;return r=new WF({}),{c(){e=q("div"),Ve(r.$$.fragment),this.h()},l(i){e=W(i,"DIV",{class:!0});var a=R(e);je(r.$$.fragment,a),a.forEach(M),this.h()},h(){S(e,"class","flex flex-col h-full mt-10 overflow-hidden")},m(i,a){se(i,e,a),ze(r,e,null),n=!0},i(i){n||(fe(r.$$.fragment,i),n=!0)},o(i){ve(r.$$.fragment,i),n=!1},d(i){i&&M(e),qe(r)}}}function W8(t){let e,r,n;return r=new uS({}),{c(){e=q("div"),Ve(r.$$.fragment),this.h()},l(i){e=W(i,"DIV",{class:!0});var a=R(e);je(r.$$.fragment,a),a.forEach(M),this.h()},h(){S(e,"class","flex flex-col h-full mt-10 overflow-hidden")},m(i,a){se(i,e,a),ze(r,e,null),n=!0},i(i){n||(fe(r.$$.fragment,i),n=!0)},o(i){ve(r.$$.fragment,i),n=!1},d(i){i&&M(e),qe(r)}}}function H8(t){let e,r,n;return r=new RF({}),{c(){e=q("div"),Ve(r.$$.fragment),this.h()},l(i){e=W(i,"DIV",{class:!0});var a=R(e);je(r.$$.fragment,a),a.forEach(M),this.h()},h(){S(e,"class","flex flex-col h-full place-content-between")},m(i,a){se(i,e,a),ze(r,e,null),n=!0},i(i){n||(fe(r.$$.fragment,i),n=!0)},o(i){ve(r.$$.fragment,i),n=!1},d(i){i&&M(e),qe(r)}}}function $8(t){let e,r,n,i,a,o,s,l,p,c,f,d,g;i=new gy({}),o=new P8({});const b=[z8,j8,V8],v=[];function m(C,F){return C[0]===yr.Build?0:C[0]===yr.Concept?1:C[0]===yr.History?2:-1}~(l=m(t))&&(p=v[l]=b[l](t));const D=[H8,W8,q8],B=[];function w(C,F){return C[0]===yr.Build?0:C[0]===yr.Concept?1:C[0]===yr.History?2:-1}return~(f=w(t))&&(d=B[f]=D[f](t)),{c(){e=q("div"),r=q("div"),n=q("div"),Ve(i.$$.fragment),a=Ee(),Ve(o.$$.fragment),s=Ee(),p&&p.c(),c=Ee(),d&&d.c(),this.h()},l(C){e=W(C,"DIV",{class:!0});var F=R(e);r=W(F,"DIV",{class:!0});var k=R(r);n=W(k,"DIV",{class:!0});var O=R(n);je(i.$$.fragment,O),a=Ae(O),je(o.$$.fragment,O),s=Ae(O),p&&p.l(O),O.forEach(M),k.forEach(M),c=Ae(F),d&&d.l(F),F.forEach(M),this.h()},h(){S(n,"class","w-full flex justify-between"),S(r,"class","w-full absolute top-0 z-10"),S(e,"class","relative w-full h-screen flex flex-col")},m(C,F){se(C,e,F),T(e,r),T(r,n),ze(i,n,null),T(n,a),ze(o,n,null),T(n,s),~l&&v[l].m(n,null),T(e,c),~f&&B[f].m(e,null),g=!0},p(C,[F]){let k=l;l=m(C),l===k?~l&&v[l].p(C,F):(p&&(ar(),ve(v[k],1,1,()=>{v[k]=null}),ur()),~l?(p=v[l],p?p.p(C,F):(p=v[l]=b[l](C),p.c()),fe(p,1),p.m(n,null)):p=null);let O=f;f=w(C),f!==O&&(d&&(ar(),ve(B[O],1,1,()=>{B[O]=null}),ur()),~f?(d=B[f],d||(d=B[f]=D[f](C),d.c()),fe(d,1),d.m(e,null)):d=null)},i(C){g||(fe(i.$$.fragment,C),fe(o.$$.fragment,C),fe(p),fe(d),g=!0)},o(C){ve(i.$$.fragment,C),ve(o.$$.fragment,C),ve(p),ve(d),g=!1},d(C){C&&M(e),qe(i),qe(o),~l&&v[l].d(),~f&&B[f].d()}}}function G8(t,e,r){let n,i;return Ge(t,vc,a=>r(0,n=a)),Ge(t,ot,a=>r(1,i=a)),[n,i]}class K8 extends Xe{constructor(e){super(),et(this,e,G8,$8,tt,{})}}var no={},Y8={get exports(){return no},set exports(t){no=t}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var r,n="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",s="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",p=500,c="__lodash_placeholder__",f=1,d=2,g=4,b=1,v=2,m=1,D=2,B=4,w=8,C=16,F=32,k=64,O=128,A=256,x=512,U=30,K="...",J=800,j=16,V=1,H=2,z=3,Q=1/0,X=9007199254740991,te=17976931348623157e292,le=0/0,be=4294967295,we=be-1,Oe=be>>>1,Pe=[["ary",O],["bind",m],["bindKey",D],["curry",w],["curryRight",C],["flip",x],["partial",F],["partialRight",k],["rearg",A]],Te="[object Arguments]",Re="[object Array]",Ue="[object AsyncFunction]",We="[object Boolean]",Ye="[object Date]",xe="[object DOMException]",Dt="[object Error]",Et="[object Function]",ht="[object GeneratorFunction]",lt="[object Map]",Pt="[object Number]",wr="[object Null]",It="[object Object]",dr="[object Promise]",Ze="[object Proxy]",er="[object RegExp]",Nt="[object Set]",Jr="[object String]",G="[object Symbol]",Z="[object Undefined]",ie="[object WeakMap]",de="[object WeakSet]",ue="[object ArrayBuffer]",me="[object DataView]",ce="[object Float32Array]",he="[object Float64Array]",ke="[object Int8Array]",He="[object Int16Array]",ct="[object Int32Array]",Ie="[object Uint8Array]",Gt="[object Uint8ClampedArray]",Vt="[object Uint16Array]",tr="[object Uint32Array]",Kt=/\b__p \+= '';/g,Er=/\b(__p \+=) '' \+/g,Yt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ar=/&(?:amp|lt|gt|quot|#39);/g,pr=/[&<>"']/g,gr=RegExp(Ar.source),vn=RegExp(pr.source),mr=/<%-([\s\S]+?)%>/g,On=/<%([\s\S]+?)%>/g,Xn=/<%=([\s\S]+?)%>/g,Vn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jn=/^\w*$/,ta=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ui=/[\\^$.*+?()[\]{}|]/g,xa=RegExp(Ui.source),Or=/^\s+/,rr=/\s/,Na=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gi=/\{\n\/\* \[wrapped with (.+)\] \*/,mn=/,? & /,ei=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Vi=/[()=,{}\[\]\/\s]/,La=/\\(\\)?/g,Ra=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ra=/\w*$/,Ua=/^[-+]0x[0-9a-f]+$/i,Va=/^0b[01]+$/i,ja=/^\[object .+?Constructor\]$/,za=/^0o[0-7]+$/i,qa=/^(?:0|[1-9]\d*)$/,Wa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vi=/($^)/,Ha=/['\n\r\u2028\u2029\\]/g,mi="\\ud800-\\udfff",$a="\\u0300-\\u036f",Ga="\\ufe20-\\ufe2f",Ka="\\u20d0-\\u20ff",na=$a+Ga+Ka,zn="\\u2700-\\u27bf",Cr="a-z\\xdf-\\xf6\\xf8-\\xff",or="\\xac\\xb1\\xd7\\xf7",$r="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ji="\\u2000-\\u206f",ti=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qn="A-Z\\xc0-\\xd6\\xd8-\\xde",zi="\\ufe0e\\ufe0f",Mn=or+$r+ji+ti,_n="['’]",So="["+mi+"]",Ya="["+Mn+"]",ia="["+na+"]",Mu="\\d+",y="["+zn+"]",P="["+Cr+"]",$="[^"+mi+Mn+Mu+zn+Cr+qn+"]",re="\\ud83c[\\udffb-\\udfff]",ge="(?:"+ia+"|"+re+")",Ne="[^"+mi+"]",vt="(?:\\ud83c[\\udde6-\\uddff]){2}",At="[\\ud800-\\udbff][\\udc00-\\udfff]",Wt="["+qn+"]",lr="\\u200d",lf="(?:"+P+"|"+$+")",fg="(?:"+Wt+"|"+$+")",cf="(?:"+_n+"(?:d|ll|m|re|s|t|ve))?",ff="(?:"+_n+"(?:D|LL|M|RE|S|T|VE))?",hf=ge+"?",df="["+zi+"]?",hg="(?:"+lr+"(?:"+[Ne,vt,At].join("|")+")"+df+hf+")*",dg="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",pg="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",pf=df+hf+hg,gg="(?:"+[y,vt,At].join("|")+")"+pf,vg="(?:"+[Ne+ia+"?",ia,vt,At,So].join("|")+")",mg=RegExp(_n,"g"),_g=RegExp(ia,"g"),Bo=RegExp(re+"(?="+re+")|"+vg+pf,"g"),bg=RegExp([Wt+"?"+P+"+"+cf+"(?="+[Ya,Wt,"$"].join("|")+")",fg+"+"+ff+"(?="+[Ya,Wt+lf,"$"].join("|")+")",Wt+"?"+lf+"+"+cf,Wt+"+"+ff,pg,dg,Mu,gg].join("|"),"g"),Dg=RegExp("["+lr+mi+na+zi+"]"),yg=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wg=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Eg=-1,qt={};qt[ce]=qt[he]=qt[ke]=qt[He]=qt[ct]=qt[Ie]=qt[Gt]=qt[Vt]=qt[tr]=!0,qt[Te]=qt[Re]=qt[ue]=qt[We]=qt[me]=qt[Ye]=qt[Dt]=qt[Et]=qt[lt]=qt[Pt]=qt[It]=qt[er]=qt[Nt]=qt[Jr]=qt[ie]=!1;var jt={};jt[Te]=jt[Re]=jt[ue]=jt[me]=jt[We]=jt[Ye]=jt[ce]=jt[he]=jt[ke]=jt[He]=jt[ct]=jt[lt]=jt[Pt]=jt[It]=jt[er]=jt[Nt]=jt[Jr]=jt[G]=jt[Ie]=jt[Gt]=jt[Vt]=jt[tr]=!0,jt[Dt]=jt[Et]=jt[ie]=!1;var Ag={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Cg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Fg={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Sg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bg=parseFloat,Og=parseInt,gf=typeof vr=="object"&&vr&&vr.Object===Object&&vr,Mg=typeof self=="object"&&self&&self.Object===Object&&self,Mr=gf||Mg||Function("return this")(),Oo=e&&!e.nodeType&&e,qi=Oo&&!0&&t&&!t.nodeType&&t,vf=qi&&qi.exports===Oo,Mo=vf&&gf.process,bn=function(){try{var ne=qi&&qi.require&&qi.require("util").types;return ne||Mo&&Mo.binding&&Mo.binding("util")}catch{}}(),mf=bn&&bn.isArrayBuffer,_f=bn&&bn.isDate,bf=bn&&bn.isMap,Df=bn&&bn.isRegExp,yf=bn&&bn.isSet,wf=bn&&bn.isTypedArray;function ln(ne,pe,oe){switch(oe.length){case 0:return ne.call(pe);case 1:return ne.call(pe,oe[0]);case 2:return ne.call(pe,oe[0],oe[1]);case 3:return ne.call(pe,oe[0],oe[1],oe[2])}return ne.apply(pe,oe)}function Pg(ne,pe,oe,$e){for(var dt=-1,Mt=ne==null?0:ne.length;++dt<Mt;){var _r=ne[dt];pe($e,_r,oe(_r),ne)}return $e}function Dn(ne,pe){for(var oe=-1,$e=ne==null?0:ne.length;++oe<$e&&pe(ne[oe],oe,ne)!==!1;);return ne}function kg(ne,pe){for(var oe=ne==null?0:ne.length;oe--&&pe(ne[oe],oe,ne)!==!1;);return ne}function Ef(ne,pe){for(var oe=-1,$e=ne==null?0:ne.length;++oe<$e;)if(!pe(ne[oe],oe,ne))return!1;return!0}function _i(ne,pe){for(var oe=-1,$e=ne==null?0:ne.length,dt=0,Mt=[];++oe<$e;){var _r=ne[oe];pe(_r,oe,ne)&&(Mt[dt++]=_r)}return Mt}function Pu(ne,pe){var oe=ne==null?0:ne.length;return!!oe&&aa(ne,pe,0)>-1}function Po(ne,pe,oe){for(var $e=-1,dt=ne==null?0:ne.length;++$e<dt;)if(oe(pe,ne[$e]))return!0;return!1}function Ht(ne,pe){for(var oe=-1,$e=ne==null?0:ne.length,dt=Array($e);++oe<$e;)dt[oe]=pe(ne[oe],oe,ne);return dt}function bi(ne,pe){for(var oe=-1,$e=pe.length,dt=ne.length;++oe<$e;)ne[dt+oe]=pe[oe];return ne}function ko(ne,pe,oe,$e){var dt=-1,Mt=ne==null?0:ne.length;for($e&&Mt&&(oe=ne[++dt]);++dt<Mt;)oe=pe(oe,ne[dt],dt,ne);return oe}function Tg(ne,pe,oe,$e){var dt=ne==null?0:ne.length;for($e&&dt&&(oe=ne[--dt]);dt--;)oe=pe(oe,ne[dt],dt,ne);return oe}function To(ne,pe){for(var oe=-1,$e=ne==null?0:ne.length;++oe<$e;)if(pe(ne[oe],oe,ne))return!0;return!1}var Ig=Io("length");function xg(ne){return ne.split("")}function Ng(ne){return ne.match(ei)||[]}function Af(ne,pe,oe){var $e;return oe(ne,function(dt,Mt,_r){if(pe(dt,Mt,_r))return $e=Mt,!1}),$e}function ku(ne,pe,oe,$e){for(var dt=ne.length,Mt=oe+($e?1:-1);$e?Mt--:++Mt<dt;)if(pe(ne[Mt],Mt,ne))return Mt;return-1}function aa(ne,pe,oe){return pe===pe?Kg(ne,pe,oe):ku(ne,Cf,oe)}function Lg(ne,pe,oe,$e){for(var dt=oe-1,Mt=ne.length;++dt<Mt;)if($e(ne[dt],pe))return dt;return-1}function Cf(ne){return ne!==ne}function Ff(ne,pe){var oe=ne==null?0:ne.length;return oe?No(ne,pe)/oe:le}function Io(ne){return function(pe){return pe==null?r:pe[ne]}}function xo(ne){return function(pe){return ne==null?r:ne[pe]}}function Sf(ne,pe,oe,$e,dt){return dt(ne,function(Mt,_r,Rt){oe=$e?($e=!1,Mt):pe(oe,Mt,_r,Rt)}),oe}function Rg(ne,pe){var oe=ne.length;for(ne.sort(pe);oe--;)ne[oe]=ne[oe].value;return ne}function No(ne,pe){for(var oe,$e=-1,dt=ne.length;++$e<dt;){var Mt=pe(ne[$e]);Mt!==r&&(oe=oe===r?Mt:oe+Mt)}return oe}function Lo(ne,pe){for(var oe=-1,$e=Array(ne);++oe<ne;)$e[oe]=pe(oe);return $e}function Ug(ne,pe){return Ht(pe,function(oe){return[oe,ne[oe]]})}function Bf(ne){return ne&&ne.slice(0,kf(ne)+1).replace(Or,"")}function cn(ne){return function(pe){return ne(pe)}}function Ro(ne,pe){return Ht(pe,function(oe){return ne[oe]})}function Za(ne,pe){return ne.has(pe)}function Of(ne,pe){for(var oe=-1,$e=ne.length;++oe<$e&&aa(pe,ne[oe],0)>-1;);return oe}function Mf(ne,pe){for(var oe=ne.length;oe--&&aa(pe,ne[oe],0)>-1;);return oe}function Vg(ne,pe){for(var oe=ne.length,$e=0;oe--;)ne[oe]===pe&&++$e;return $e}var jg=xo(Ag),zg=xo(Cg);function qg(ne){return"\\"+Sg[ne]}function Wg(ne,pe){return ne==null?r:ne[pe]}function ua(ne){return Dg.test(ne)}function Hg(ne){return yg.test(ne)}function $g(ne){for(var pe,oe=[];!(pe=ne.next()).done;)oe.push(pe.value);return oe}function Uo(ne){var pe=-1,oe=Array(ne.size);return ne.forEach(function($e,dt){oe[++pe]=[dt,$e]}),oe}function Pf(ne,pe){return function(oe){return ne(pe(oe))}}function Di(ne,pe){for(var oe=-1,$e=ne.length,dt=0,Mt=[];++oe<$e;){var _r=ne[oe];(_r===pe||_r===c)&&(ne[oe]=c,Mt[dt++]=oe)}return Mt}function Tu(ne){var pe=-1,oe=Array(ne.size);return ne.forEach(function($e){oe[++pe]=$e}),oe}function Gg(ne){var pe=-1,oe=Array(ne.size);return ne.forEach(function($e){oe[++pe]=[$e,$e]}),oe}function Kg(ne,pe,oe){for(var $e=oe-1,dt=ne.length;++$e<dt;)if(ne[$e]===pe)return $e;return-1}function Yg(ne,pe,oe){for(var $e=oe+1;$e--;)if(ne[$e]===pe)return $e;return $e}function sa(ne){return ua(ne)?Jg(ne):Ig(ne)}function Pn(ne){return ua(ne)?Qg(ne):xg(ne)}function kf(ne){for(var pe=ne.length;pe--&&rr.test(ne.charAt(pe)););return pe}var Zg=xo(Fg);function Jg(ne){for(var pe=Bo.lastIndex=0;Bo.test(ne);)++pe;return pe}function Qg(ne){return ne.match(Bo)||[]}function Xg(ne){return ne.match(bg)||[]}var ev=function ne(pe){pe=pe==null?Mr:oa.defaults(Mr.Object(),pe,oa.pick(Mr,wg));var oe=pe.Array,$e=pe.Date,dt=pe.Error,Mt=pe.Function,_r=pe.Math,Rt=pe.Object,Vo=pe.RegExp,tv=pe.String,yn=pe.TypeError,Iu=oe.prototype,rv=Mt.prototype,la=Rt.prototype,xu=pe["__core-js_shared__"],Nu=rv.toString,xt=la.hasOwnProperty,nv=0,Tf=function(){var u=/[^.]+$/.exec(xu&&xu.keys&&xu.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),Lu=la.toString,iv=Nu.call(Rt),av=Mr._,uv=Vo("^"+Nu.call(xt).replace(Ui,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ru=vf?pe.Buffer:r,yi=pe.Symbol,Uu=pe.Uint8Array,If=Ru?Ru.allocUnsafe:r,Vu=Pf(Rt.getPrototypeOf,Rt),xf=Rt.create,Nf=la.propertyIsEnumerable,ju=Iu.splice,Lf=yi?yi.isConcatSpreadable:r,Ja=yi?yi.iterator:r,Wi=yi?yi.toStringTag:r,zu=function(){try{var u=Yi(Rt,"defineProperty");return u({},"",{}),u}catch{}}(),sv=pe.clearTimeout!==Mr.clearTimeout&&pe.clearTimeout,ov=$e&&$e.now!==Mr.Date.now&&$e.now,lv=pe.setTimeout!==Mr.setTimeout&&pe.setTimeout,qu=_r.ceil,Wu=_r.floor,jo=Rt.getOwnPropertySymbols,cv=Ru?Ru.isBuffer:r,Rf=pe.isFinite,fv=Iu.join,hv=Pf(Rt.keys,Rt),br=_r.max,Vr=_r.min,dv=$e.now,pv=pe.parseInt,Uf=_r.random,gv=Iu.reverse,zo=Yi(pe,"DataView"),Qa=Yi(pe,"Map"),qo=Yi(pe,"Promise"),ca=Yi(pe,"Set"),Xa=Yi(pe,"WeakMap"),eu=Yi(Rt,"create"),Hu=Xa&&new Xa,fa={},vv=Zi(zo),mv=Zi(Qa),_v=Zi(qo),bv=Zi(ca),Dv=Zi(Xa),$u=yi?yi.prototype:r,tu=$u?$u.valueOf:r,Vf=$u?$u.toString:r;function N(u){if(nr(u)&&!pt(u)&&!(u instanceof wt)){if(u instanceof wn)return u;if(xt.call(u,"__wrapped__"))return jh(u)}return new wn(u)}var ha=function(){function u(){}return function(h){if(!Zt(h))return{};if(xf)return xf(h);u.prototype=h;var _=new u;return u.prototype=r,_}}();function Gu(){}function wn(u,h){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=r}N.templateSettings={escape:mr,evaluate:On,interpolate:Xn,variable:"",imports:{_:N}},N.prototype=Gu.prototype,N.prototype.constructor=N,wn.prototype=ha(Gu.prototype),wn.prototype.constructor=wn;function wt(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=be,this.__views__=[]}function yv(){var u=new wt(this.__wrapped__);return u.__actions__=Qr(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Qr(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Qr(this.__views__),u}function wv(){if(this.__filtered__){var u=new wt(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function Ev(){var u=this.__wrapped__.value(),h=this.__dir__,_=pt(u),E=h<0,I=_?u.length:0,L=xm(0,I,this.__views__),Y=L.start,ee=L.end,ae=ee-Y,De=E?ee:Y-1,ye=this.__iteratees__,Fe=ye.length,Le=0,Ke=Vr(ae,this.__takeCount__);if(!_||!E&&I==ae&&Ke==ae)return ch(u,this.__actions__);var it=[];e:for(;ae--&&Le<Ke;){De+=h;for(var _t=-1,at=u[De];++_t<Fe;){var yt=ye[_t],Ct=yt.iteratee,dn=yt.type,Yr=Ct(at);if(dn==H)at=Yr;else if(!Yr){if(dn==V)continue e;break e}}it[Le++]=at}return it}wt.prototype=ha(Gu.prototype),wt.prototype.constructor=wt;function Hi(u){var h=-1,_=u==null?0:u.length;for(this.clear();++h<_;){var E=u[h];this.set(E[0],E[1])}}function Av(){this.__data__=eu?eu(null):{},this.size=0}function Cv(u){var h=this.has(u)&&delete this.__data__[u];return this.size-=h?1:0,h}function Fv(u){var h=this.__data__;if(eu){var _=h[u];return _===l?r:_}return xt.call(h,u)?h[u]:r}function Sv(u){var h=this.__data__;return eu?h[u]!==r:xt.call(h,u)}function Bv(u,h){var _=this.__data__;return this.size+=this.has(u)?0:1,_[u]=eu&&h===r?l:h,this}Hi.prototype.clear=Av,Hi.prototype.delete=Cv,Hi.prototype.get=Fv,Hi.prototype.has=Sv,Hi.prototype.set=Bv;function ri(u){var h=-1,_=u==null?0:u.length;for(this.clear();++h<_;){var E=u[h];this.set(E[0],E[1])}}function Ov(){this.__data__=[],this.size=0}function Mv(u){var h=this.__data__,_=Ku(h,u);if(_<0)return!1;var E=h.length-1;return _==E?h.pop():ju.call(h,_,1),--this.size,!0}function Pv(u){var h=this.__data__,_=Ku(h,u);return _<0?r:h[_][1]}function kv(u){return Ku(this.__data__,u)>-1}function Tv(u,h){var _=this.__data__,E=Ku(_,u);return E<0?(++this.size,_.push([u,h])):_[E][1]=h,this}ri.prototype.clear=Ov,ri.prototype.delete=Mv,ri.prototype.get=Pv,ri.prototype.has=kv,ri.prototype.set=Tv;function ni(u){var h=-1,_=u==null?0:u.length;for(this.clear();++h<_;){var E=u[h];this.set(E[0],E[1])}}function Iv(){this.size=0,this.__data__={hash:new Hi,map:new(Qa||ri),string:new Hi}}function xv(u){var h=us(this,u).delete(u);return this.size-=h?1:0,h}function Nv(u){return us(this,u).get(u)}function Lv(u){return us(this,u).has(u)}function Rv(u,h){var _=us(this,u),E=_.size;return _.set(u,h),this.size+=_.size==E?0:1,this}ni.prototype.clear=Iv,ni.prototype.delete=xv,ni.prototype.get=Nv,ni.prototype.has=Lv,ni.prototype.set=Rv;function $i(u){var h=-1,_=u==null?0:u.length;for(this.__data__=new ni;++h<_;)this.add(u[h])}function Uv(u){return this.__data__.set(u,l),this}function Vv(u){return this.__data__.has(u)}$i.prototype.add=$i.prototype.push=Uv,$i.prototype.has=Vv;function kn(u){var h=this.__data__=new ri(u);this.size=h.size}function jv(){this.__data__=new ri,this.size=0}function zv(u){var h=this.__data__,_=h.delete(u);return this.size=h.size,_}function qv(u){return this.__data__.get(u)}function Wv(u){return this.__data__.has(u)}function Hv(u,h){var _=this.__data__;if(_ instanceof ri){var E=_.__data__;if(!Qa||E.length<i-1)return E.push([u,h]),this.size=++_.size,this;_=this.__data__=new ni(E)}return _.set(u,h),this.size=_.size,this}kn.prototype.clear=jv,kn.prototype.delete=zv,kn.prototype.get=qv,kn.prototype.has=Wv,kn.prototype.set=Hv;function jf(u,h){var _=pt(u),E=!_&&Ji(u),I=!_&&!E&&Fi(u),L=!_&&!E&&!I&&va(u),Y=_||E||I||L,ee=Y?Lo(u.length,tv):[],ae=ee.length;for(var De in u)(h||xt.call(u,De))&&!(Y&&(De=="length"||I&&(De=="offset"||De=="parent")||L&&(De=="buffer"||De=="byteLength"||De=="byteOffset")||si(De,ae)))&&ee.push(De);return ee}function zf(u){var h=u.length;return h?u[el(0,h-1)]:r}function $v(u,h){return ss(Qr(u),Gi(h,0,u.length))}function Gv(u){return ss(Qr(u))}function Wo(u,h,_){(_!==r&&!Tn(u[h],_)||_===r&&!(h in u))&&ii(u,h,_)}function ru(u,h,_){var E=u[h];(!(xt.call(u,h)&&Tn(E,_))||_===r&&!(h in u))&&ii(u,h,_)}function Ku(u,h){for(var _=u.length;_--;)if(Tn(u[_][0],h))return _;return-1}function Kv(u,h,_,E){return wi(u,function(I,L,Y){h(E,I,_(I),Y)}),E}function qf(u,h){return u&&Hn(h,Fr(h),u)}function Yv(u,h){return u&&Hn(h,en(h),u)}function ii(u,h,_){h=="__proto__"&&zu?zu(u,h,{configurable:!0,enumerable:!0,value:_,writable:!0}):u[h]=_}function Ho(u,h){for(var _=-1,E=h.length,I=oe(E),L=u==null;++_<E;)I[_]=L?r:Cl(u,h[_]);return I}function Gi(u,h,_){return u===u&&(_!==r&&(u=u<=_?u:_),h!==r&&(u=u>=h?u:h)),u}function En(u,h,_,E,I,L){var Y,ee=h&f,ae=h&d,De=h&g;if(_&&(Y=I?_(u,E,I,L):_(u)),Y!==r)return Y;if(!Zt(u))return u;var ye=pt(u);if(ye){if(Y=Lm(u),!ee)return Qr(u,Y)}else{var Fe=jr(u),Le=Fe==Et||Fe==ht;if(Fi(u))return dh(u,ee);if(Fe==It||Fe==Te||Le&&!I){if(Y=ae||Le?{}:kh(u),!ee)return ae?Fm(u,Yv(Y,u)):Cm(u,qf(Y,u))}else{if(!jt[Fe])return I?u:{};Y=Rm(u,Fe,ee)}}L||(L=new kn);var Ke=L.get(u);if(Ke)return Ke;L.set(u,Y),s0(u)?u.forEach(function(at){Y.add(En(at,h,_,at,u,L))}):a0(u)&&u.forEach(function(at,yt){Y.set(yt,En(at,h,_,yt,u,L))});var it=De?ae?fl:cl:ae?en:Fr,_t=ye?r:it(u);return Dn(_t||u,function(at,yt){_t&&(yt=at,at=u[yt]),ru(Y,yt,En(at,h,_,yt,u,L))}),Y}function Zv(u){var h=Fr(u);return function(_){return Wf(_,u,h)}}function Wf(u,h,_){var E=_.length;if(u==null)return!E;for(u=Rt(u);E--;){var I=_[E],L=h[I],Y=u[I];if(Y===r&&!(I in u)||!L(Y))return!1}return!0}function Hf(u,h,_){if(typeof u!="function")throw new yn(o);return lu(function(){u.apply(r,_)},h)}function nu(u,h,_,E){var I=-1,L=Pu,Y=!0,ee=u.length,ae=[],De=h.length;if(!ee)return ae;_&&(h=Ht(h,cn(_))),E?(L=Po,Y=!1):h.length>=i&&(L=Za,Y=!1,h=new $i(h));e:for(;++I<ee;){var ye=u[I],Fe=_==null?ye:_(ye);if(ye=E||ye!==0?ye:0,Y&&Fe===Fe){for(var Le=De;Le--;)if(h[Le]===Fe)continue e;ae.push(ye)}else L(h,Fe,E)||ae.push(ye)}return ae}var wi=_h(Wn),$f=_h(Go,!0);function Jv(u,h){var _=!0;return wi(u,function(E,I,L){return _=!!h(E,I,L),_}),_}function Yu(u,h,_){for(var E=-1,I=u.length;++E<I;){var L=u[E],Y=h(L);if(Y!=null&&(ee===r?Y===Y&&!hn(Y):_(Y,ee)))var ee=Y,ae=L}return ae}function Qv(u,h,_,E){var I=u.length;for(_=mt(_),_<0&&(_=-_>I?0:I+_),E=E===r||E>I?I:mt(E),E<0&&(E+=I),E=_>E?0:l0(E);_<E;)u[_++]=h;return u}function Gf(u,h){var _=[];return wi(u,function(E,I,L){h(E,I,L)&&_.push(E)}),_}function Pr(u,h,_,E,I){var L=-1,Y=u.length;for(_||(_=Vm),I||(I=[]);++L<Y;){var ee=u[L];h>0&&_(ee)?h>1?Pr(ee,h-1,_,E,I):bi(I,ee):E||(I[I.length]=ee)}return I}var $o=bh(),Kf=bh(!0);function Wn(u,h){return u&&$o(u,h,Fr)}function Go(u,h){return u&&Kf(u,h,Fr)}function Zu(u,h){return _i(h,function(_){return oi(u[_])})}function Ki(u,h){h=Ai(h,u);for(var _=0,E=h.length;u!=null&&_<E;)u=u[$n(h[_++])];return _&&_==E?u:r}function Yf(u,h,_){var E=h(u);return pt(u)?E:bi(E,_(u))}function Gr(u){return u==null?u===r?Z:wr:Wi&&Wi in Rt(u)?Im(u):Gm(u)}function Ko(u,h){return u>h}function Xv(u,h){return u!=null&&xt.call(u,h)}function em(u,h){return u!=null&&h in Rt(u)}function tm(u,h,_){return u>=Vr(h,_)&&u<br(h,_)}function Yo(u,h,_){for(var E=_?Po:Pu,I=u[0].length,L=u.length,Y=L,ee=oe(L),ae=1/0,De=[];Y--;){var ye=u[Y];Y&&h&&(ye=Ht(ye,cn(h))),ae=Vr(ye.length,ae),ee[Y]=!_&&(h||I>=120&&ye.length>=120)?new $i(Y&&ye):r}ye=u[0];var Fe=-1,Le=ee[0];e:for(;++Fe<I&&De.length<ae;){var Ke=ye[Fe],it=h?h(Ke):Ke;if(Ke=_||Ke!==0?Ke:0,!(Le?Za(Le,it):E(De,it,_))){for(Y=L;--Y;){var _t=ee[Y];if(!(_t?Za(_t,it):E(u[Y],it,_)))continue e}Le&&Le.push(it),De.push(Ke)}}return De}function rm(u,h,_,E){return Wn(u,function(I,L,Y){h(E,_(I),L,Y)}),E}function iu(u,h,_){h=Ai(h,u),u=Nh(u,h);var E=u==null?u:u[$n(Cn(h))];return E==null?r:ln(E,u,_)}function Zf(u){return nr(u)&&Gr(u)==Te}function nm(u){return nr(u)&&Gr(u)==ue}function im(u){return nr(u)&&Gr(u)==Ye}function au(u,h,_,E,I){return u===h?!0:u==null||h==null||!nr(u)&&!nr(h)?u!==u&&h!==h:am(u,h,_,E,au,I)}function am(u,h,_,E,I,L){var Y=pt(u),ee=pt(h),ae=Y?Re:jr(u),De=ee?Re:jr(h);ae=ae==Te?It:ae,De=De==Te?It:De;var ye=ae==It,Fe=De==It,Le=ae==De;if(Le&&Fi(u)){if(!Fi(h))return!1;Y=!0,ye=!1}if(Le&&!ye)return L||(L=new kn),Y||va(u)?Oh(u,h,_,E,I,L):km(u,h,ae,_,E,I,L);if(!(_&b)){var Ke=ye&&xt.call(u,"__wrapped__"),it=Fe&&xt.call(h,"__wrapped__");if(Ke||it){var _t=Ke?u.value():u,at=it?h.value():h;return L||(L=new kn),I(_t,at,_,E,L)}}return Le?(L||(L=new kn),Tm(u,h,_,E,I,L)):!1}function um(u){return nr(u)&&jr(u)==lt}function Zo(u,h,_,E){var I=_.length,L=I,Y=!E;if(u==null)return!L;for(u=Rt(u);I--;){var ee=_[I];if(Y&&ee[2]?ee[1]!==u[ee[0]]:!(ee[0]in u))return!1}for(;++I<L;){ee=_[I];var ae=ee[0],De=u[ae],ye=ee[1];if(Y&&ee[2]){if(De===r&&!(ae in u))return!1}else{var Fe=new kn;if(E)var Le=E(De,ye,ae,u,h,Fe);if(!(Le===r?au(ye,De,b|v,E,Fe):Le))return!1}}return!0}function Jf(u){if(!Zt(u)||zm(u))return!1;var h=oi(u)?uv:ja;return h.test(Zi(u))}function sm(u){return nr(u)&&Gr(u)==er}function om(u){return nr(u)&&jr(u)==Nt}function lm(u){return nr(u)&&ds(u.length)&&!!qt[Gr(u)]}function Qf(u){return typeof u=="function"?u:u==null?tn:typeof u=="object"?pt(u)?th(u[0],u[1]):eh(u):D0(u)}function Jo(u){if(!ou(u))return hv(u);var h=[];for(var _ in Rt(u))xt.call(u,_)&&_!="constructor"&&h.push(_);return h}function cm(u){if(!Zt(u))return $m(u);var h=ou(u),_=[];for(var E in u)E=="constructor"&&(h||!xt.call(u,E))||_.push(E);return _}function Qo(u,h){return u<h}function Xf(u,h){var _=-1,E=Xr(u)?oe(u.length):[];return wi(u,function(I,L,Y){E[++_]=h(I,L,Y)}),E}function eh(u){var h=dl(u);return h.length==1&&h[0][2]?Ih(h[0][0],h[0][1]):function(_){return _===u||Zo(_,u,h)}}function th(u,h){return gl(u)&&Th(h)?Ih($n(u),h):function(_){var E=Cl(_,u);return E===r&&E===h?Fl(_,u):au(h,E,b|v)}}function Ju(u,h,_,E,I){u!==h&&$o(h,function(L,Y){if(I||(I=new kn),Zt(L))fm(u,h,Y,_,Ju,E,I);else{var ee=E?E(ml(u,Y),L,Y+"",u,h,I):r;ee===r&&(ee=L),Wo(u,Y,ee)}},en)}function fm(u,h,_,E,I,L,Y){var ee=ml(u,_),ae=ml(h,_),De=Y.get(ae);if(De){Wo(u,_,De);return}var ye=L?L(ee,ae,_+"",u,h,Y):r,Fe=ye===r;if(Fe){var Le=pt(ae),Ke=!Le&&Fi(ae),it=!Le&&!Ke&&va(ae);ye=ae,Le||Ke||it?pt(ee)?ye=ee:cr(ee)?ye=Qr(ee):Ke?(Fe=!1,ye=dh(ae,!0)):it?(Fe=!1,ye=ph(ae,!0)):ye=[]:cu(ae)||Ji(ae)?(ye=ee,Ji(ee)?ye=c0(ee):(!Zt(ee)||oi(ee))&&(ye=kh(ae))):Fe=!1}Fe&&(Y.set(ae,ye),I(ye,ae,E,L,Y),Y.delete(ae)),Wo(u,_,ye)}function rh(u,h){var _=u.length;if(_)return h+=h<0?_:0,si(h,_)?u[h]:r}function nh(u,h,_){h.length?h=Ht(h,function(L){return pt(L)?function(Y){return Ki(Y,L.length===1?L[0]:L)}:L}):h=[tn];var E=-1;h=Ht(h,cn(rt()));var I=Xf(u,function(L,Y,ee){var ae=Ht(h,function(De){return De(L)});return{criteria:ae,index:++E,value:L}});return Rg(I,function(L,Y){return Am(L,Y,_)})}function hm(u,h){return ih(u,h,function(_,E){return Fl(u,E)})}function ih(u,h,_){for(var E=-1,I=h.length,L={};++E<I;){var Y=h[E],ee=Ki(u,Y);_(ee,Y)&&uu(L,Ai(Y,u),ee)}return L}function dm(u){return function(h){return Ki(h,u)}}function Xo(u,h,_,E){var I=E?Lg:aa,L=-1,Y=h.length,ee=u;for(u===h&&(h=Qr(h)),_&&(ee=Ht(u,cn(_)));++L<Y;)for(var ae=0,De=h[L],ye=_?_(De):De;(ae=I(ee,ye,ae,E))>-1;)ee!==u&&ju.call(ee,ae,1),ju.call(u,ae,1);return u}function ah(u,h){for(var _=u?h.length:0,E=_-1;_--;){var I=h[_];if(_==E||I!==L){var L=I;si(I)?ju.call(u,I,1):nl(u,I)}}return u}function el(u,h){return u+Wu(Uf()*(h-u+1))}function pm(u,h,_,E){for(var I=-1,L=br(qu((h-u)/(_||1)),0),Y=oe(L);L--;)Y[E?L:++I]=u,u+=_;return Y}function tl(u,h){var _="";if(!u||h<1||h>X)return _;do h%2&&(_+=u),h=Wu(h/2),h&&(u+=u);while(h);return _}function bt(u,h){return _l(xh(u,h,tn),u+"")}function gm(u){return zf(ma(u))}function vm(u,h){var _=ma(u);return ss(_,Gi(h,0,_.length))}function uu(u,h,_,E){if(!Zt(u))return u;h=Ai(h,u);for(var I=-1,L=h.length,Y=L-1,ee=u;ee!=null&&++I<L;){var ae=$n(h[I]),De=_;if(ae==="__proto__"||ae==="constructor"||ae==="prototype")return u;if(I!=Y){var ye=ee[ae];De=E?E(ye,ae,ee):r,De===r&&(De=Zt(ye)?ye:si(h[I+1])?[]:{})}ru(ee,ae,De),ee=ee[ae]}return u}var uh=Hu?function(u,h){return Hu.set(u,h),u}:tn,mm=zu?function(u,h){return zu(u,"toString",{configurable:!0,enumerable:!1,value:Bl(h),writable:!0})}:tn;function _m(u){return ss(ma(u))}function An(u,h,_){var E=-1,I=u.length;h<0&&(h=-h>I?0:I+h),_=_>I?I:_,_<0&&(_+=I),I=h>_?0:_-h>>>0,h>>>=0;for(var L=oe(I);++E<I;)L[E]=u[E+h];return L}function bm(u,h){var _;return wi(u,function(E,I,L){return _=h(E,I,L),!_}),!!_}function Qu(u,h,_){var E=0,I=u==null?E:u.length;if(typeof h=="number"&&h===h&&I<=Oe){for(;E<I;){var L=E+I>>>1,Y=u[L];Y!==null&&!hn(Y)&&(_?Y<=h:Y<h)?E=L+1:I=L}return I}return rl(u,h,tn,_)}function rl(u,h,_,E){var I=0,L=u==null?0:u.length;if(L===0)return 0;h=_(h);for(var Y=h!==h,ee=h===null,ae=hn(h),De=h===r;I<L;){var ye=Wu((I+L)/2),Fe=_(u[ye]),Le=Fe!==r,Ke=Fe===null,it=Fe===Fe,_t=hn(Fe);if(Y)var at=E||it;else De?at=it&&(E||Le):ee?at=it&&Le&&(E||!Ke):ae?at=it&&Le&&!Ke&&(E||!_t):Ke||_t?at=!1:at=E?Fe<=h:Fe<h;at?I=ye+1:L=ye}return Vr(L,we)}function sh(u,h){for(var _=-1,E=u.length,I=0,L=[];++_<E;){var Y=u[_],ee=h?h(Y):Y;if(!_||!Tn(ee,ae)){var ae=ee;L[I++]=Y===0?0:Y}}return L}function oh(u){return typeof u=="number"?u:hn(u)?le:+u}function fn(u){if(typeof u=="string")return u;if(pt(u))return Ht(u,fn)+"";if(hn(u))return Vf?Vf.call(u):"";var h=u+"";return h=="0"&&1/u==-Q?"-0":h}function Ei(u,h,_){var E=-1,I=Pu,L=u.length,Y=!0,ee=[],ae=ee;if(_)Y=!1,I=Po;else if(L>=i){var De=h?null:Mm(u);if(De)return Tu(De);Y=!1,I=Za,ae=new $i}else ae=h?[]:ee;e:for(;++E<L;){var ye=u[E],Fe=h?h(ye):ye;if(ye=_||ye!==0?ye:0,Y&&Fe===Fe){for(var Le=ae.length;Le--;)if(ae[Le]===Fe)continue e;h&&ae.push(Fe),ee.push(ye)}else I(ae,Fe,_)||(ae!==ee&&ae.push(Fe),ee.push(ye))}return ee}function nl(u,h){return h=Ai(h,u),u=Nh(u,h),u==null||delete u[$n(Cn(h))]}function lh(u,h,_,E){return uu(u,h,_(Ki(u,h)),E)}function Xu(u,h,_,E){for(var I=u.length,L=E?I:-1;(E?L--:++L<I)&&h(u[L],L,u););return _?An(u,E?0:L,E?L+1:I):An(u,E?L+1:0,E?I:L)}function ch(u,h){var _=u;return _ instanceof wt&&(_=_.value()),ko(h,function(E,I){return I.func.apply(I.thisArg,bi([E],I.args))},_)}function il(u,h,_){var E=u.length;if(E<2)return E?Ei(u[0]):[];for(var I=-1,L=oe(E);++I<E;)for(var Y=u[I],ee=-1;++ee<E;)ee!=I&&(L[I]=nu(L[I]||Y,u[ee],h,_));return Ei(Pr(L,1),h,_)}function fh(u,h,_){for(var E=-1,I=u.length,L=h.length,Y={};++E<I;){var ee=E<L?h[E]:r;_(Y,u[E],ee)}return Y}function al(u){return cr(u)?u:[]}function ul(u){return typeof u=="function"?u:tn}function Ai(u,h){return pt(u)?u:gl(u,h)?[u]:Vh(kt(u))}var Dm=bt;function Ci(u,h,_){var E=u.length;return _=_===r?E:_,!h&&_>=E?u:An(u,h,_)}var hh=sv||function(u){return Mr.clearTimeout(u)};function dh(u,h){if(h)return u.slice();var _=u.length,E=If?If(_):new u.constructor(_);return u.copy(E),E}function sl(u){var h=new u.constructor(u.byteLength);return new Uu(h).set(new Uu(u)),h}function ym(u,h){var _=h?sl(u.buffer):u.buffer;return new u.constructor(_,u.byteOffset,u.byteLength)}function wm(u){var h=new u.constructor(u.source,ra.exec(u));return h.lastIndex=u.lastIndex,h}function Em(u){return tu?Rt(tu.call(u)):{}}function ph(u,h){var _=h?sl(u.buffer):u.buffer;return new u.constructor(_,u.byteOffset,u.length)}function gh(u,h){if(u!==h){var _=u!==r,E=u===null,I=u===u,L=hn(u),Y=h!==r,ee=h===null,ae=h===h,De=hn(h);if(!ee&&!De&&!L&&u>h||L&&Y&&ae&&!ee&&!De||E&&Y&&ae||!_&&ae||!I)return 1;if(!E&&!L&&!De&&u<h||De&&_&&I&&!E&&!L||ee&&_&&I||!Y&&I||!ae)return-1}return 0}function Am(u,h,_){for(var E=-1,I=u.criteria,L=h.criteria,Y=I.length,ee=_.length;++E<Y;){var ae=gh(I[E],L[E]);if(ae){if(E>=ee)return ae;var De=_[E];return ae*(De=="desc"?-1:1)}}return u.index-h.index}function vh(u,h,_,E){for(var I=-1,L=u.length,Y=_.length,ee=-1,ae=h.length,De=br(L-Y,0),ye=oe(ae+De),Fe=!E;++ee<ae;)ye[ee]=h[ee];for(;++I<Y;)(Fe||I<L)&&(ye[_[I]]=u[I]);for(;De--;)ye[ee++]=u[I++];return ye}function mh(u,h,_,E){for(var I=-1,L=u.length,Y=-1,ee=_.length,ae=-1,De=h.length,ye=br(L-ee,0),Fe=oe(ye+De),Le=!E;++I<ye;)Fe[I]=u[I];for(var Ke=I;++ae<De;)Fe[Ke+ae]=h[ae];for(;++Y<ee;)(Le||I<L)&&(Fe[Ke+_[Y]]=u[I++]);return Fe}function Qr(u,h){var _=-1,E=u.length;for(h||(h=oe(E));++_<E;)h[_]=u[_];return h}function Hn(u,h,_,E){var I=!_;_||(_={});for(var L=-1,Y=h.length;++L<Y;){var ee=h[L],ae=E?E(_[ee],u[ee],ee,_,u):r;ae===r&&(ae=u[ee]),I?ii(_,ee,ae):ru(_,ee,ae)}return _}function Cm(u,h){return Hn(u,pl(u),h)}function Fm(u,h){return Hn(u,Mh(u),h)}function es(u,h){return function(_,E){var I=pt(_)?Pg:Kv,L=h?h():{};return I(_,u,rt(E,2),L)}}function da(u){return bt(function(h,_){var E=-1,I=_.length,L=I>1?_[I-1]:r,Y=I>2?_[2]:r;for(L=u.length>3&&typeof L=="function"?(I--,L):r,Y&&Kr(_[0],_[1],Y)&&(L=I<3?r:L,I=1),h=Rt(h);++E<I;){var ee=_[E];ee&&u(h,ee,E,L)}return h})}function _h(u,h){return function(_,E){if(_==null)return _;if(!Xr(_))return u(_,E);for(var I=_.length,L=h?I:-1,Y=Rt(_);(h?L--:++L<I)&&E(Y[L],L,Y)!==!1;);return _}}function bh(u){return function(h,_,E){for(var I=-1,L=Rt(h),Y=E(h),ee=Y.length;ee--;){var ae=Y[u?ee:++I];if(_(L[ae],ae,L)===!1)break}return h}}function Sm(u,h,_){var E=h&m,I=su(u);function L(){var Y=this&&this!==Mr&&this instanceof L?I:u;return Y.apply(E?_:this,arguments)}return L}function Dh(u){return function(h){h=kt(h);var _=ua(h)?Pn(h):r,E=_?_[0]:h.charAt(0),I=_?Ci(_,1).join(""):h.slice(1);return E[u]()+I}}function pa(u){return function(h){return ko(_0(m0(h).replace(mg,"")),u,"")}}function su(u){return function(){var h=arguments;switch(h.length){case 0:return new u;case 1:return new u(h[0]);case 2:return new u(h[0],h[1]);case 3:return new u(h[0],h[1],h[2]);case 4:return new u(h[0],h[1],h[2],h[3]);case 5:return new u(h[0],h[1],h[2],h[3],h[4]);case 6:return new u(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new u(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var _=ha(u.prototype),E=u.apply(_,h);return Zt(E)?E:_}}function Bm(u,h,_){var E=su(u);function I(){for(var L=arguments.length,Y=oe(L),ee=L,ae=ga(I);ee--;)Y[ee]=arguments[ee];var De=L<3&&Y[0]!==ae&&Y[L-1]!==ae?[]:Di(Y,ae);if(L-=De.length,L<_)return Ch(u,h,ts,I.placeholder,r,Y,De,r,r,_-L);var ye=this&&this!==Mr&&this instanceof I?E:u;return ln(ye,this,Y)}return I}function yh(u){return function(h,_,E){var I=Rt(h);if(!Xr(h)){var L=rt(_,3);h=Fr(h),_=function(ee){return L(I[ee],ee,I)}}var Y=u(h,_,E);return Y>-1?I[L?h[Y]:Y]:r}}function wh(u){return ui(function(h){var _=h.length,E=_,I=wn.prototype.thru;for(u&&h.reverse();E--;){var L=h[E];if(typeof L!="function")throw new yn(o);if(I&&!Y&&as(L)=="wrapper")var Y=new wn([],!0)}for(E=Y?E:_;++E<_;){L=h[E];var ee=as(L),ae=ee=="wrapper"?hl(L):r;ae&&vl(ae[0])&&ae[1]==(O|w|F|A)&&!ae[4].length&&ae[9]==1?Y=Y[as(ae[0])].apply(Y,ae[3]):Y=L.length==1&&vl(L)?Y[ee]():Y.thru(L)}return function(){var De=arguments,ye=De[0];if(Y&&De.length==1&&pt(ye))return Y.plant(ye).value();for(var Fe=0,Le=_?h[Fe].apply(this,De):ye;++Fe<_;)Le=h[Fe].call(this,Le);return Le}})}function ts(u,h,_,E,I,L,Y,ee,ae,De){var ye=h&O,Fe=h&m,Le=h&D,Ke=h&(w|C),it=h&x,_t=Le?r:su(u);function at(){for(var yt=arguments.length,Ct=oe(yt),dn=yt;dn--;)Ct[dn]=arguments[dn];if(Ke)var Yr=ga(at),pn=Vg(Ct,Yr);if(E&&(Ct=vh(Ct,E,I,Ke)),L&&(Ct=mh(Ct,L,Y,Ke)),yt-=pn,Ke&&yt<De){var fr=Di(Ct,Yr);return Ch(u,h,ts,at.placeholder,_,Ct,fr,ee,ae,De-yt)}var In=Fe?_:this,ci=Le?In[u]:u;return yt=Ct.length,ee?Ct=Km(Ct,ee):it&&yt>1&&Ct.reverse(),ye&&ae<yt&&(Ct.length=ae),this&&this!==Mr&&this instanceof at&&(ci=_t||su(ci)),ci.apply(In,Ct)}return at}function Eh(u,h){return function(_,E){return rm(_,u,h(E),{})}}function rs(u,h){return function(_,E){var I;if(_===r&&E===r)return h;if(_!==r&&(I=_),E!==r){if(I===r)return E;typeof _=="string"||typeof E=="string"?(_=fn(_),E=fn(E)):(_=oh(_),E=oh(E)),I=u(_,E)}return I}}function ol(u){return ui(function(h){return h=Ht(h,cn(rt())),bt(function(_){var E=this;return u(h,function(I){return ln(I,E,_)})})})}function ns(u,h){h=h===r?" ":fn(h);var _=h.length;if(_<2)return _?tl(h,u):h;var E=tl(h,qu(u/sa(h)));return ua(h)?Ci(Pn(E),0,u).join(""):E.slice(0,u)}function Om(u,h,_,E){var I=h&m,L=su(u);function Y(){for(var ee=-1,ae=arguments.length,De=-1,ye=E.length,Fe=oe(ye+ae),Le=this&&this!==Mr&&this instanceof Y?L:u;++De<ye;)Fe[De]=E[De];for(;ae--;)Fe[De++]=arguments[++ee];return ln(Le,I?_:this,Fe)}return Y}function Ah(u){return function(h,_,E){return E&&typeof E!="number"&&Kr(h,_,E)&&(_=E=r),h=li(h),_===r?(_=h,h=0):_=li(_),E=E===r?h<_?1:-1:li(E),pm(h,_,E,u)}}function is(u){return function(h,_){return typeof h=="string"&&typeof _=="string"||(h=Fn(h),_=Fn(_)),u(h,_)}}function Ch(u,h,_,E,I,L,Y,ee,ae,De){var ye=h&w,Fe=ye?Y:r,Le=ye?r:Y,Ke=ye?L:r,it=ye?r:L;h|=ye?F:k,h&=~(ye?k:F),h&B||(h&=~(m|D));var _t=[u,h,I,Ke,Fe,it,Le,ee,ae,De],at=_.apply(r,_t);return vl(u)&&Lh(at,_t),at.placeholder=E,Rh(at,u,h)}function ll(u){var h=_r[u];return function(_,E){if(_=Fn(_),E=E==null?0:Vr(mt(E),292),E&&Rf(_)){var I=(kt(_)+"e").split("e"),L=h(I[0]+"e"+(+I[1]+E));return I=(kt(L)+"e").split("e"),+(I[0]+"e"+(+I[1]-E))}return h(_)}}var Mm=ca&&1/Tu(new ca([,-0]))[1]==Q?function(u){return new ca(u)}:Pl;function Fh(u){return function(h){var _=jr(h);return _==lt?Uo(h):_==Nt?Gg(h):Ug(h,u(h))}}function ai(u,h,_,E,I,L,Y,ee){var ae=h&D;if(!ae&&typeof u!="function")throw new yn(o);var De=E?E.length:0;if(De||(h&=~(F|k),E=I=r),Y=Y===r?Y:br(mt(Y),0),ee=ee===r?ee:mt(ee),De-=I?I.length:0,h&k){var ye=E,Fe=I;E=I=r}var Le=ae?r:hl(u),Ke=[u,h,_,E,I,ye,Fe,L,Y,ee];if(Le&&Hm(Ke,Le),u=Ke[0],h=Ke[1],_=Ke[2],E=Ke[3],I=Ke[4],ee=Ke[9]=Ke[9]===r?ae?0:u.length:br(Ke[9]-De,0),!ee&&h&(w|C)&&(h&=~(w|C)),!h||h==m)var it=Sm(u,h,_);else h==w||h==C?it=Bm(u,h,ee):(h==F||h==(m|F))&&!I.length?it=Om(u,h,_,E):it=ts.apply(r,Ke);var _t=Le?uh:Lh;return Rh(_t(it,Ke),u,h)}function Sh(u,h,_,E){return u===r||Tn(u,la[_])&&!xt.call(E,_)?h:u}function Bh(u,h,_,E,I,L){return Zt(u)&&Zt(h)&&(L.set(h,u),Ju(u,h,r,Bh,L),L.delete(h)),u}function Pm(u){return cu(u)?r:u}function Oh(u,h,_,E,I,L){var Y=_&b,ee=u.length,ae=h.length;if(ee!=ae&&!(Y&&ae>ee))return!1;var De=L.get(u),ye=L.get(h);if(De&&ye)return De==h&&ye==u;var Fe=-1,Le=!0,Ke=_&v?new $i:r;for(L.set(u,h),L.set(h,u);++Fe<ee;){var it=u[Fe],_t=h[Fe];if(E)var at=Y?E(_t,it,Fe,h,u,L):E(it,_t,Fe,u,h,L);if(at!==r){if(at)continue;Le=!1;break}if(Ke){if(!To(h,function(yt,Ct){if(!Za(Ke,Ct)&&(it===yt||I(it,yt,_,E,L)))return Ke.push(Ct)})){Le=!1;break}}else if(!(it===_t||I(it,_t,_,E,L))){Le=!1;break}}return L.delete(u),L.delete(h),Le}function km(u,h,_,E,I,L,Y){switch(_){case me:if(u.byteLength!=h.byteLength||u.byteOffset!=h.byteOffset)return!1;u=u.buffer,h=h.buffer;case ue:return!(u.byteLength!=h.byteLength||!L(new Uu(u),new Uu(h)));case We:case Ye:case Pt:return Tn(+u,+h);case Dt:return u.name==h.name&&u.message==h.message;case er:case Jr:return u==h+"";case lt:var ee=Uo;case Nt:var ae=E&b;if(ee||(ee=Tu),u.size!=h.size&&!ae)return!1;var De=Y.get(u);if(De)return De==h;E|=v,Y.set(u,h);var ye=Oh(ee(u),ee(h),E,I,L,Y);return Y.delete(u),ye;case G:if(tu)return tu.call(u)==tu.call(h)}return!1}function Tm(u,h,_,E,I,L){var Y=_&b,ee=cl(u),ae=ee.length,De=cl(h),ye=De.length;if(ae!=ye&&!Y)return!1;for(var Fe=ae;Fe--;){var Le=ee[Fe];if(!(Y?Le in h:xt.call(h,Le)))return!1}var Ke=L.get(u),it=L.get(h);if(Ke&&it)return Ke==h&&it==u;var _t=!0;L.set(u,h),L.set(h,u);for(var at=Y;++Fe<ae;){Le=ee[Fe];var yt=u[Le],Ct=h[Le];if(E)var dn=Y?E(Ct,yt,Le,h,u,L):E(yt,Ct,Le,u,h,L);if(!(dn===r?yt===Ct||I(yt,Ct,_,E,L):dn)){_t=!1;break}at||(at=Le=="constructor")}if(_t&&!at){var Yr=u.constructor,pn=h.constructor;Yr!=pn&&"constructor"in u&&"constructor"in h&&!(typeof Yr=="function"&&Yr instanceof Yr&&typeof pn=="function"&&pn instanceof pn)&&(_t=!1)}return L.delete(u),L.delete(h),_t}function ui(u){return _l(xh(u,r,Wh),u+"")}function cl(u){return Yf(u,Fr,pl)}function fl(u){return Yf(u,en,Mh)}var hl=Hu?function(u){return Hu.get(u)}:Pl;function as(u){for(var h=u.name+"",_=fa[h],E=xt.call(fa,h)?_.length:0;E--;){var I=_[E],L=I.func;if(L==null||L==u)return I.name}return h}function ga(u){var h=xt.call(N,"placeholder")?N:u;return h.placeholder}function rt(){var u=N.iteratee||Ol;return u=u===Ol?Qf:u,arguments.length?u(arguments[0],arguments[1]):u}function us(u,h){var _=u.__data__;return jm(h)?_[typeof h=="string"?"string":"hash"]:_.map}function dl(u){for(var h=Fr(u),_=h.length;_--;){var E=h[_],I=u[E];h[_]=[E,I,Th(I)]}return h}function Yi(u,h){var _=Wg(u,h);return Jf(_)?_:r}function Im(u){var h=xt.call(u,Wi),_=u[Wi];try{u[Wi]=r;var E=!0}catch{}var I=Lu.call(u);return E&&(h?u[Wi]=_:delete u[Wi]),I}var pl=jo?function(u){return u==null?[]:(u=Rt(u),_i(jo(u),function(h){return Nf.call(u,h)}))}:kl,Mh=jo?function(u){for(var h=[];u;)bi(h,pl(u)),u=Vu(u);return h}:kl,jr=Gr;(zo&&jr(new zo(new ArrayBuffer(1)))!=me||Qa&&jr(new Qa)!=lt||qo&&jr(qo.resolve())!=dr||ca&&jr(new ca)!=Nt||Xa&&jr(new Xa)!=ie)&&(jr=function(u){var h=Gr(u),_=h==It?u.constructor:r,E=_?Zi(_):"";if(E)switch(E){case vv:return me;case mv:return lt;case _v:return dr;case bv:return Nt;case Dv:return ie}return h});function xm(u,h,_){for(var E=-1,I=_.length;++E<I;){var L=_[E],Y=L.size;switch(L.type){case"drop":u+=Y;break;case"dropRight":h-=Y;break;case"take":h=Vr(h,u+Y);break;case"takeRight":u=br(u,h-Y);break}}return{start:u,end:h}}function Nm(u){var h=u.match(gi);return h?h[1].split(mn):[]}function Ph(u,h,_){h=Ai(h,u);for(var E=-1,I=h.length,L=!1;++E<I;){var Y=$n(h[E]);if(!(L=u!=null&&_(u,Y)))break;u=u[Y]}return L||++E!=I?L:(I=u==null?0:u.length,!!I&&ds(I)&&si(Y,I)&&(pt(u)||Ji(u)))}function Lm(u){var h=u.length,_=new u.constructor(h);return h&&typeof u[0]=="string"&&xt.call(u,"index")&&(_.index=u.index,_.input=u.input),_}function kh(u){return typeof u.constructor=="function"&&!ou(u)?ha(Vu(u)):{}}function Rm(u,h,_){var E=u.constructor;switch(h){case ue:return sl(u);case We:case Ye:return new E(+u);case me:return ym(u,_);case ce:case he:case ke:case He:case ct:case Ie:case Gt:case Vt:case tr:return ph(u,_);case lt:return new E;case Pt:case Jr:return new E(u);case er:return wm(u);case Nt:return new E;case G:return Em(u)}}function Um(u,h){var _=h.length;if(!_)return u;var E=_-1;return h[E]=(_>1?"& ":"")+h[E],h=h.join(_>2?", ":" "),u.replace(Na,`{
/* [wrapped with `+h+`] */
`)}function Vm(u){return pt(u)||Ji(u)||!!(Lf&&u&&u[Lf])}function si(u,h){var _=typeof u;return h=h??X,!!h&&(_=="number"||_!="symbol"&&qa.test(u))&&u>-1&&u%1==0&&u<h}function Kr(u,h,_){if(!Zt(_))return!1;var E=typeof h;return(E=="number"?Xr(_)&&si(h,_.length):E=="string"&&h in _)?Tn(_[h],u):!1}function gl(u,h){if(pt(u))return!1;var _=typeof u;return _=="number"||_=="symbol"||_=="boolean"||u==null||hn(u)?!0:jn.test(u)||!Vn.test(u)||h!=null&&u in Rt(h)}function jm(u){var h=typeof u;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?u!=="__proto__":u===null}function vl(u){var h=as(u),_=N[h];if(typeof _!="function"||!(h in wt.prototype))return!1;if(u===_)return!0;var E=hl(_);return!!E&&u===E[0]}function zm(u){return!!Tf&&Tf in u}var qm=xu?oi:Tl;function ou(u){var h=u&&u.constructor,_=typeof h=="function"&&h.prototype||la;return u===_}function Th(u){return u===u&&!Zt(u)}function Ih(u,h){return function(_){return _==null?!1:_[u]===h&&(h!==r||u in Rt(_))}}function Wm(u){var h=fs(u,function(E){return _.size===p&&_.clear(),E}),_=h.cache;return h}function Hm(u,h){var _=u[1],E=h[1],I=_|E,L=I<(m|D|O),Y=E==O&&_==w||E==O&&_==A&&u[7].length<=h[8]||E==(O|A)&&h[7].length<=h[8]&&_==w;if(!(L||Y))return u;E&m&&(u[2]=h[2],I|=_&m?0:B);var ee=h[3];if(ee){var ae=u[3];u[3]=ae?vh(ae,ee,h[4]):ee,u[4]=ae?Di(u[3],c):h[4]}return ee=h[5],ee&&(ae=u[5],u[5]=ae?mh(ae,ee,h[6]):ee,u[6]=ae?Di(u[5],c):h[6]),ee=h[7],ee&&(u[7]=ee),E&O&&(u[8]=u[8]==null?h[8]:Vr(u[8],h[8])),u[9]==null&&(u[9]=h[9]),u[0]=h[0],u[1]=I,u}function $m(u){var h=[];if(u!=null)for(var _ in Rt(u))h.push(_);return h}function Gm(u){return Lu.call(u)}function xh(u,h,_){return h=br(h===r?u.length-1:h,0),function(){for(var E=arguments,I=-1,L=br(E.length-h,0),Y=oe(L);++I<L;)Y[I]=E[h+I];I=-1;for(var ee=oe(h+1);++I<h;)ee[I]=E[I];return ee[h]=_(Y),ln(u,this,ee)}}function Nh(u,h){return h.length<2?u:Ki(u,An(h,0,-1))}function Km(u,h){for(var _=u.length,E=Vr(h.length,_),I=Qr(u);E--;){var L=h[E];u[E]=si(L,_)?I[L]:r}return u}function ml(u,h){if(!(h==="constructor"&&typeof u[h]=="function")&&h!="__proto__")return u[h]}var Lh=Uh(uh),lu=lv||function(u,h){return Mr.setTimeout(u,h)},_l=Uh(mm);function Rh(u,h,_){var E=h+"";return _l(u,Um(E,Ym(Nm(E),_)))}function Uh(u){var h=0,_=0;return function(){var E=dv(),I=j-(E-_);if(_=E,I>0){if(++h>=J)return arguments[0]}else h=0;return u.apply(r,arguments)}}function ss(u,h){var _=-1,E=u.length,I=E-1;for(h=h===r?E:h;++_<h;){var L=el(_,I),Y=u[L];u[L]=u[_],u[_]=Y}return u.length=h,u}var Vh=Wm(function(u){var h=[];return u.charCodeAt(0)===46&&h.push(""),u.replace(ta,function(_,E,I,L){h.push(I?L.replace(La,"$1"):E||_)}),h});function $n(u){if(typeof u=="string"||hn(u))return u;var h=u+"";return h=="0"&&1/u==-Q?"-0":h}function Zi(u){if(u!=null){try{return Nu.call(u)}catch{}try{return u+""}catch{}}return""}function Ym(u,h){return Dn(Pe,function(_){var E="_."+_[0];h&_[1]&&!Pu(u,E)&&u.push(E)}),u.sort()}function jh(u){if(u instanceof wt)return u.clone();var h=new wn(u.__wrapped__,u.__chain__);return h.__actions__=Qr(u.__actions__),h.__index__=u.__index__,h.__values__=u.__values__,h}function Zm(u,h,_){(_?Kr(u,h,_):h===r)?h=1:h=br(mt(h),0);var E=u==null?0:u.length;if(!E||h<1)return[];for(var I=0,L=0,Y=oe(qu(E/h));I<E;)Y[L++]=An(u,I,I+=h);return Y}function Jm(u){for(var h=-1,_=u==null?0:u.length,E=0,I=[];++h<_;){var L=u[h];L&&(I[E++]=L)}return I}function Qm(){var u=arguments.length;if(!u)return[];for(var h=oe(u-1),_=arguments[0],E=u;E--;)h[E-1]=arguments[E];return bi(pt(_)?Qr(_):[_],Pr(h,1))}var Xm=bt(function(u,h){return cr(u)?nu(u,Pr(h,1,cr,!0)):[]}),e_=bt(function(u,h){var _=Cn(h);return cr(_)&&(_=r),cr(u)?nu(u,Pr(h,1,cr,!0),rt(_,2)):[]}),t_=bt(function(u,h){var _=Cn(h);return cr(_)&&(_=r),cr(u)?nu(u,Pr(h,1,cr,!0),r,_):[]});function r_(u,h,_){var E=u==null?0:u.length;return E?(h=_||h===r?1:mt(h),An(u,h<0?0:h,E)):[]}function n_(u,h,_){var E=u==null?0:u.length;return E?(h=_||h===r?1:mt(h),h=E-h,An(u,0,h<0?0:h)):[]}function i_(u,h){return u&&u.length?Xu(u,rt(h,3),!0,!0):[]}function a_(u,h){return u&&u.length?Xu(u,rt(h,3),!0):[]}function u_(u,h,_,E){var I=u==null?0:u.length;return I?(_&&typeof _!="number"&&Kr(u,h,_)&&(_=0,E=I),Qv(u,h,_,E)):[]}function zh(u,h,_){var E=u==null?0:u.length;if(!E)return-1;var I=_==null?0:mt(_);return I<0&&(I=br(E+I,0)),ku(u,rt(h,3),I)}function qh(u,h,_){var E=u==null?0:u.length;if(!E)return-1;var I=E-1;return _!==r&&(I=mt(_),I=_<0?br(E+I,0):Vr(I,E-1)),ku(u,rt(h,3),I,!0)}function Wh(u){var h=u==null?0:u.length;return h?Pr(u,1):[]}function s_(u){var h=u==null?0:u.length;return h?Pr(u,Q):[]}function o_(u,h){var _=u==null?0:u.length;return _?(h=h===r?1:mt(h),Pr(u,h)):[]}function l_(u){for(var h=-1,_=u==null?0:u.length,E={};++h<_;){var I=u[h];E[I[0]]=I[1]}return E}function Hh(u){return u&&u.length?u[0]:r}function c_(u,h,_){var E=u==null?0:u.length;if(!E)return-1;var I=_==null?0:mt(_);return I<0&&(I=br(E+I,0)),aa(u,h,I)}function f_(u){var h=u==null?0:u.length;return h?An(u,0,-1):[]}var h_=bt(function(u){var h=Ht(u,al);return h.length&&h[0]===u[0]?Yo(h):[]}),d_=bt(function(u){var h=Cn(u),_=Ht(u,al);return h===Cn(_)?h=r:_.pop(),_.length&&_[0]===u[0]?Yo(_,rt(h,2)):[]}),p_=bt(function(u){var h=Cn(u),_=Ht(u,al);return h=typeof h=="function"?h:r,h&&_.pop(),_.length&&_[0]===u[0]?Yo(_,r,h):[]});function g_(u,h){return u==null?"":fv.call(u,h)}function Cn(u){var h=u==null?0:u.length;return h?u[h-1]:r}function v_(u,h,_){var E=u==null?0:u.length;if(!E)return-1;var I=E;return _!==r&&(I=mt(_),I=I<0?br(E+I,0):Vr(I,E-1)),h===h?Yg(u,h,I):ku(u,Cf,I,!0)}function m_(u,h){return u&&u.length?rh(u,mt(h)):r}var __=bt($h);function $h(u,h){return u&&u.length&&h&&h.length?Xo(u,h):u}function b_(u,h,_){return u&&u.length&&h&&h.length?Xo(u,h,rt(_,2)):u}function D_(u,h,_){return u&&u.length&&h&&h.length?Xo(u,h,r,_):u}var y_=ui(function(u,h){var _=u==null?0:u.length,E=Ho(u,h);return ah(u,Ht(h,function(I){return si(I,_)?+I:I}).sort(gh)),E});function w_(u,h){var _=[];if(!(u&&u.length))return _;var E=-1,I=[],L=u.length;for(h=rt(h,3);++E<L;){var Y=u[E];h(Y,E,u)&&(_.push(Y),I.push(E))}return ah(u,I),_}function bl(u){return u==null?u:gv.call(u)}function E_(u,h,_){var E=u==null?0:u.length;return E?(_&&typeof _!="number"&&Kr(u,h,_)?(h=0,_=E):(h=h==null?0:mt(h),_=_===r?E:mt(_)),An(u,h,_)):[]}function A_(u,h){return Qu(u,h)}function C_(u,h,_){return rl(u,h,rt(_,2))}function F_(u,h){var _=u==null?0:u.length;if(_){var E=Qu(u,h);if(E<_&&Tn(u[E],h))return E}return-1}function S_(u,h){return Qu(u,h,!0)}function B_(u,h,_){return rl(u,h,rt(_,2),!0)}function O_(u,h){var _=u==null?0:u.length;if(_){var E=Qu(u,h,!0)-1;if(Tn(u[E],h))return E}return-1}function M_(u){return u&&u.length?sh(u):[]}function P_(u,h){return u&&u.length?sh(u,rt(h,2)):[]}function k_(u){var h=u==null?0:u.length;return h?An(u,1,h):[]}function T_(u,h,_){return u&&u.length?(h=_||h===r?1:mt(h),An(u,0,h<0?0:h)):[]}function I_(u,h,_){var E=u==null?0:u.length;return E?(h=_||h===r?1:mt(h),h=E-h,An(u,h<0?0:h,E)):[]}function x_(u,h){return u&&u.length?Xu(u,rt(h,3),!1,!0):[]}function N_(u,h){return u&&u.length?Xu(u,rt(h,3)):[]}var L_=bt(function(u){return Ei(Pr(u,1,cr,!0))}),R_=bt(function(u){var h=Cn(u);return cr(h)&&(h=r),Ei(Pr(u,1,cr,!0),rt(h,2))}),U_=bt(function(u){var h=Cn(u);return h=typeof h=="function"?h:r,Ei(Pr(u,1,cr,!0),r,h)});function V_(u){return u&&u.length?Ei(u):[]}function j_(u,h){return u&&u.length?Ei(u,rt(h,2)):[]}function z_(u,h){return h=typeof h=="function"?h:r,u&&u.length?Ei(u,r,h):[]}function Dl(u){if(!(u&&u.length))return[];var h=0;return u=_i(u,function(_){if(cr(_))return h=br(_.length,h),!0}),Lo(h,function(_){return Ht(u,Io(_))})}function Gh(u,h){if(!(u&&u.length))return[];var _=Dl(u);return h==null?_:Ht(_,function(E){return ln(h,r,E)})}var q_=bt(function(u,h){return cr(u)?nu(u,h):[]}),W_=bt(function(u){return il(_i(u,cr))}),H_=bt(function(u){var h=Cn(u);return cr(h)&&(h=r),il(_i(u,cr),rt(h,2))}),$_=bt(function(u){var h=Cn(u);return h=typeof h=="function"?h:r,il(_i(u,cr),r,h)}),G_=bt(Dl);function K_(u,h){return fh(u||[],h||[],ru)}function Y_(u,h){return fh(u||[],h||[],uu)}var Z_=bt(function(u){var h=u.length,_=h>1?u[h-1]:r;return _=typeof _=="function"?(u.pop(),_):r,Gh(u,_)});function Kh(u){var h=N(u);return h.__chain__=!0,h}function J_(u,h){return h(u),u}function os(u,h){return h(u)}var Q_=ui(function(u){var h=u.length,_=h?u[0]:0,E=this.__wrapped__,I=function(L){return Ho(L,u)};return h>1||this.__actions__.length||!(E instanceof wt)||!si(_)?this.thru(I):(E=E.slice(_,+_+(h?1:0)),E.__actions__.push({func:os,args:[I],thisArg:r}),new wn(E,this.__chain__).thru(function(L){return h&&!L.length&&L.push(r),L}))});function X_(){return Kh(this)}function e2(){return new wn(this.value(),this.__chain__)}function t2(){this.__values__===r&&(this.__values__=o0(this.value()));var u=this.__index__>=this.__values__.length,h=u?r:this.__values__[this.__index__++];return{done:u,value:h}}function r2(){return this}function n2(u){for(var h,_=this;_ instanceof Gu;){var E=jh(_);E.__index__=0,E.__values__=r,h?I.__wrapped__=E:h=E;var I=E;_=_.__wrapped__}return I.__wrapped__=u,h}function i2(){var u=this.__wrapped__;if(u instanceof wt){var h=u;return this.__actions__.length&&(h=new wt(this)),h=h.reverse(),h.__actions__.push({func:os,args:[bl],thisArg:r}),new wn(h,this.__chain__)}return this.thru(bl)}function a2(){return ch(this.__wrapped__,this.__actions__)}var u2=es(function(u,h,_){xt.call(u,_)?++u[_]:ii(u,_,1)});function s2(u,h,_){var E=pt(u)?Ef:Jv;return _&&Kr(u,h,_)&&(h=r),E(u,rt(h,3))}function o2(u,h){var _=pt(u)?_i:Gf;return _(u,rt(h,3))}var l2=yh(zh),c2=yh(qh);function f2(u,h){return Pr(ls(u,h),1)}function h2(u,h){return Pr(ls(u,h),Q)}function d2(u,h,_){return _=_===r?1:mt(_),Pr(ls(u,h),_)}function Yh(u,h){var _=pt(u)?Dn:wi;return _(u,rt(h,3))}function Zh(u,h){var _=pt(u)?kg:$f;return _(u,rt(h,3))}var p2=es(function(u,h,_){xt.call(u,_)?u[_].push(h):ii(u,_,[h])});function g2(u,h,_,E){u=Xr(u)?u:ma(u),_=_&&!E?mt(_):0;var I=u.length;return _<0&&(_=br(I+_,0)),ps(u)?_<=I&&u.indexOf(h,_)>-1:!!I&&aa(u,h,_)>-1}var v2=bt(function(u,h,_){var E=-1,I=typeof h=="function",L=Xr(u)?oe(u.length):[];return wi(u,function(Y){L[++E]=I?ln(h,Y,_):iu(Y,h,_)}),L}),m2=es(function(u,h,_){ii(u,_,h)});function ls(u,h){var _=pt(u)?Ht:Xf;return _(u,rt(h,3))}function _2(u,h,_,E){return u==null?[]:(pt(h)||(h=h==null?[]:[h]),_=E?r:_,pt(_)||(_=_==null?[]:[_]),nh(u,h,_))}var b2=es(function(u,h,_){u[_?0:1].push(h)},function(){return[[],[]]});function D2(u,h,_){var E=pt(u)?ko:Sf,I=arguments.length<3;return E(u,rt(h,4),_,I,wi)}function y2(u,h,_){var E=pt(u)?Tg:Sf,I=arguments.length<3;return E(u,rt(h,4),_,I,$f)}function w2(u,h){var _=pt(u)?_i:Gf;return _(u,hs(rt(h,3)))}function E2(u){var h=pt(u)?zf:gm;return h(u)}function A2(u,h,_){(_?Kr(u,h,_):h===r)?h=1:h=mt(h);var E=pt(u)?$v:vm;return E(u,h)}function C2(u){var h=pt(u)?Gv:_m;return h(u)}function F2(u){if(u==null)return 0;if(Xr(u))return ps(u)?sa(u):u.length;var h=jr(u);return h==lt||h==Nt?u.size:Jo(u).length}function S2(u,h,_){var E=pt(u)?To:bm;return _&&Kr(u,h,_)&&(h=r),E(u,rt(h,3))}var B2=bt(function(u,h){if(u==null)return[];var _=h.length;return _>1&&Kr(u,h[0],h[1])?h=[]:_>2&&Kr(h[0],h[1],h[2])&&(h=[h[0]]),nh(u,Pr(h,1),[])}),cs=ov||function(){return Mr.Date.now()};function O2(u,h){if(typeof h!="function")throw new yn(o);return u=mt(u),function(){if(--u<1)return h.apply(this,arguments)}}function Jh(u,h,_){return h=_?r:h,h=u&&h==null?u.length:h,ai(u,O,r,r,r,r,h)}function Qh(u,h){var _;if(typeof h!="function")throw new yn(o);return u=mt(u),function(){return--u>0&&(_=h.apply(this,arguments)),u<=1&&(h=r),_}}var yl=bt(function(u,h,_){var E=m;if(_.length){var I=Di(_,ga(yl));E|=F}return ai(u,E,h,_,I)}),Xh=bt(function(u,h,_){var E=m|D;if(_.length){var I=Di(_,ga(Xh));E|=F}return ai(h,E,u,_,I)});function e0(u,h,_){h=_?r:h;var E=ai(u,w,r,r,r,r,r,h);return E.placeholder=e0.placeholder,E}function t0(u,h,_){h=_?r:h;var E=ai(u,C,r,r,r,r,r,h);return E.placeholder=t0.placeholder,E}function r0(u,h,_){var E,I,L,Y,ee,ae,De=0,ye=!1,Fe=!1,Le=!0;if(typeof u!="function")throw new yn(o);h=Fn(h)||0,Zt(_)&&(ye=!!_.leading,Fe="maxWait"in _,L=Fe?br(Fn(_.maxWait)||0,h):L,Le="trailing"in _?!!_.trailing:Le);function Ke(fr){var In=E,ci=I;return E=I=r,De=fr,Y=u.apply(ci,In),Y}function it(fr){return De=fr,ee=lu(yt,h),ye?Ke(fr):Y}function _t(fr){var In=fr-ae,ci=fr-De,y0=h-In;return Fe?Vr(y0,L-ci):y0}function at(fr){var In=fr-ae,ci=fr-De;return ae===r||In>=h||In<0||Fe&&ci>=L}function yt(){var fr=cs();if(at(fr))return Ct(fr);ee=lu(yt,_t(fr))}function Ct(fr){return ee=r,Le&&E?Ke(fr):(E=I=r,Y)}function dn(){ee!==r&&hh(ee),De=0,E=ae=I=ee=r}function Yr(){return ee===r?Y:Ct(cs())}function pn(){var fr=cs(),In=at(fr);if(E=arguments,I=this,ae=fr,In){if(ee===r)return it(ae);if(Fe)return hh(ee),ee=lu(yt,h),Ke(ae)}return ee===r&&(ee=lu(yt,h)),Y}return pn.cancel=dn,pn.flush=Yr,pn}var M2=bt(function(u,h){return Hf(u,1,h)}),P2=bt(function(u,h,_){return Hf(u,Fn(h)||0,_)});function k2(u){return ai(u,x)}function fs(u,h){if(typeof u!="function"||h!=null&&typeof h!="function")throw new yn(o);var _=function(){var E=arguments,I=h?h.apply(this,E):E[0],L=_.cache;if(L.has(I))return L.get(I);var Y=u.apply(this,E);return _.cache=L.set(I,Y)||L,Y};return _.cache=new(fs.Cache||ni),_}fs.Cache=ni;function hs(u){if(typeof u!="function")throw new yn(o);return function(){var h=arguments;switch(h.length){case 0:return!u.call(this);case 1:return!u.call(this,h[0]);case 2:return!u.call(this,h[0],h[1]);case 3:return!u.call(this,h[0],h[1],h[2])}return!u.apply(this,h)}}function T2(u){return Qh(2,u)}var I2=Dm(function(u,h){h=h.length==1&&pt(h[0])?Ht(h[0],cn(rt())):Ht(Pr(h,1),cn(rt()));var _=h.length;return bt(function(E){for(var I=-1,L=Vr(E.length,_);++I<L;)E[I]=h[I].call(this,E[I]);return ln(u,this,E)})}),wl=bt(function(u,h){var _=Di(h,ga(wl));return ai(u,F,r,h,_)}),n0=bt(function(u,h){var _=Di(h,ga(n0));return ai(u,k,r,h,_)}),x2=ui(function(u,h){return ai(u,A,r,r,r,h)});function N2(u,h){if(typeof u!="function")throw new yn(o);return h=h===r?h:mt(h),bt(u,h)}function L2(u,h){if(typeof u!="function")throw new yn(o);return h=h==null?0:br(mt(h),0),bt(function(_){var E=_[h],I=Ci(_,0,h);return E&&bi(I,E),ln(u,this,I)})}function R2(u,h,_){var E=!0,I=!0;if(typeof u!="function")throw new yn(o);return Zt(_)&&(E="leading"in _?!!_.leading:E,I="trailing"in _?!!_.trailing:I),r0(u,h,{leading:E,maxWait:h,trailing:I})}function U2(u){return Jh(u,1)}function V2(u,h){return wl(ul(h),u)}function j2(){if(!arguments.length)return[];var u=arguments[0];return pt(u)?u:[u]}function z2(u){return En(u,g)}function q2(u,h){return h=typeof h=="function"?h:r,En(u,g,h)}function W2(u){return En(u,f|g)}function H2(u,h){return h=typeof h=="function"?h:r,En(u,f|g,h)}function $2(u,h){return h==null||Wf(u,h,Fr(h))}function Tn(u,h){return u===h||u!==u&&h!==h}var G2=is(Ko),K2=is(function(u,h){return u>=h}),Ji=Zf(function(){return arguments}())?Zf:function(u){return nr(u)&&xt.call(u,"callee")&&!Nf.call(u,"callee")},pt=oe.isArray,Y2=mf?cn(mf):nm;function Xr(u){return u!=null&&ds(u.length)&&!oi(u)}function cr(u){return nr(u)&&Xr(u)}function Z2(u){return u===!0||u===!1||nr(u)&&Gr(u)==We}var Fi=cv||Tl,J2=_f?cn(_f):im;function Q2(u){return nr(u)&&u.nodeType===1&&!cu(u)}function X2(u){if(u==null)return!0;if(Xr(u)&&(pt(u)||typeof u=="string"||typeof u.splice=="function"||Fi(u)||va(u)||Ji(u)))return!u.length;var h=jr(u);if(h==lt||h==Nt)return!u.size;if(ou(u))return!Jo(u).length;for(var _ in u)if(xt.call(u,_))return!1;return!0}function eb(u,h){return au(u,h)}function tb(u,h,_){_=typeof _=="function"?_:r;var E=_?_(u,h):r;return E===r?au(u,h,r,_):!!E}function El(u){if(!nr(u))return!1;var h=Gr(u);return h==Dt||h==xe||typeof u.message=="string"&&typeof u.name=="string"&&!cu(u)}function rb(u){return typeof u=="number"&&Rf(u)}function oi(u){if(!Zt(u))return!1;var h=Gr(u);return h==Et||h==ht||h==Ue||h==Ze}function i0(u){return typeof u=="number"&&u==mt(u)}function ds(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=X}function Zt(u){var h=typeof u;return u!=null&&(h=="object"||h=="function")}function nr(u){return u!=null&&typeof u=="object"}var a0=bf?cn(bf):um;function nb(u,h){return u===h||Zo(u,h,dl(h))}function ib(u,h,_){return _=typeof _=="function"?_:r,Zo(u,h,dl(h),_)}function ab(u){return u0(u)&&u!=+u}function ub(u){if(qm(u))throw new dt(a);return Jf(u)}function sb(u){return u===null}function ob(u){return u==null}function u0(u){return typeof u=="number"||nr(u)&&Gr(u)==Pt}function cu(u){if(!nr(u)||Gr(u)!=It)return!1;var h=Vu(u);if(h===null)return!0;var _=xt.call(h,"constructor")&&h.constructor;return typeof _=="function"&&_ instanceof _&&Nu.call(_)==iv}var Al=Df?cn(Df):sm;function lb(u){return i0(u)&&u>=-X&&u<=X}var s0=yf?cn(yf):om;function ps(u){return typeof u=="string"||!pt(u)&&nr(u)&&Gr(u)==Jr}function hn(u){return typeof u=="symbol"||nr(u)&&Gr(u)==G}var va=wf?cn(wf):lm;function cb(u){return u===r}function fb(u){return nr(u)&&jr(u)==ie}function hb(u){return nr(u)&&Gr(u)==de}var db=is(Qo),pb=is(function(u,h){return u<=h});function o0(u){if(!u)return[];if(Xr(u))return ps(u)?Pn(u):Qr(u);if(Ja&&u[Ja])return $g(u[Ja]());var h=jr(u),_=h==lt?Uo:h==Nt?Tu:ma;return _(u)}function li(u){if(!u)return u===0?u:0;if(u=Fn(u),u===Q||u===-Q){var h=u<0?-1:1;return h*te}return u===u?u:0}function mt(u){var h=li(u),_=h%1;return h===h?_?h-_:h:0}function l0(u){return u?Gi(mt(u),0,be):0}function Fn(u){if(typeof u=="number")return u;if(hn(u))return le;if(Zt(u)){var h=typeof u.valueOf=="function"?u.valueOf():u;u=Zt(h)?h+"":h}if(typeof u!="string")return u===0?u:+u;u=Bf(u);var _=Va.test(u);return _||za.test(u)?Og(u.slice(2),_?2:8):Ua.test(u)?le:+u}function c0(u){return Hn(u,en(u))}function gb(u){return u?Gi(mt(u),-X,X):u===0?u:0}function kt(u){return u==null?"":fn(u)}var vb=da(function(u,h){if(ou(h)||Xr(h)){Hn(h,Fr(h),u);return}for(var _ in h)xt.call(h,_)&&ru(u,_,h[_])}),f0=da(function(u,h){Hn(h,en(h),u)}),gs=da(function(u,h,_,E){Hn(h,en(h),u,E)}),mb=da(function(u,h,_,E){Hn(h,Fr(h),u,E)}),_b=ui(Ho);function bb(u,h){var _=ha(u);return h==null?_:qf(_,h)}var Db=bt(function(u,h){u=Rt(u);var _=-1,E=h.length,I=E>2?h[2]:r;for(I&&Kr(h[0],h[1],I)&&(E=1);++_<E;)for(var L=h[_],Y=en(L),ee=-1,ae=Y.length;++ee<ae;){var De=Y[ee],ye=u[De];(ye===r||Tn(ye,la[De])&&!xt.call(u,De))&&(u[De]=L[De])}return u}),yb=bt(function(u){return u.push(r,Bh),ln(h0,r,u)});function wb(u,h){return Af(u,rt(h,3),Wn)}function Eb(u,h){return Af(u,rt(h,3),Go)}function Ab(u,h){return u==null?u:$o(u,rt(h,3),en)}function Cb(u,h){return u==null?u:Kf(u,rt(h,3),en)}function Fb(u,h){return u&&Wn(u,rt(h,3))}function Sb(u,h){return u&&Go(u,rt(h,3))}function Bb(u){return u==null?[]:Zu(u,Fr(u))}function Ob(u){return u==null?[]:Zu(u,en(u))}function Cl(u,h,_){var E=u==null?r:Ki(u,h);return E===r?_:E}function Mb(u,h){return u!=null&&Ph(u,h,Xv)}function Fl(u,h){return u!=null&&Ph(u,h,em)}var Pb=Eh(function(u,h,_){h!=null&&typeof h.toString!="function"&&(h=Lu.call(h)),u[h]=_},Bl(tn)),kb=Eh(function(u,h,_){h!=null&&typeof h.toString!="function"&&(h=Lu.call(h)),xt.call(u,h)?u[h].push(_):u[h]=[_]},rt),Tb=bt(iu);function Fr(u){return Xr(u)?jf(u):Jo(u)}function en(u){return Xr(u)?jf(u,!0):cm(u)}function Ib(u,h){var _={};return h=rt(h,3),Wn(u,function(E,I,L){ii(_,h(E,I,L),E)}),_}function xb(u,h){var _={};return h=rt(h,3),Wn(u,function(E,I,L){ii(_,I,h(E,I,L))}),_}var Nb=da(function(u,h,_){Ju(u,h,_)}),h0=da(function(u,h,_,E){Ju(u,h,_,E)}),Lb=ui(function(u,h){var _={};if(u==null)return _;var E=!1;h=Ht(h,function(L){return L=Ai(L,u),E||(E=L.length>1),L}),Hn(u,fl(u),_),E&&(_=En(_,f|d|g,Pm));for(var I=h.length;I--;)nl(_,h[I]);return _});function Rb(u,h){return d0(u,hs(rt(h)))}var Ub=ui(function(u,h){return u==null?{}:hm(u,h)});function d0(u,h){if(u==null)return{};var _=Ht(fl(u),function(E){return[E]});return h=rt(h),ih(u,_,function(E,I){return h(E,I[0])})}function Vb(u,h,_){h=Ai(h,u);var E=-1,I=h.length;for(I||(I=1,u=r);++E<I;){var L=u==null?r:u[$n(h[E])];L===r&&(E=I,L=_),u=oi(L)?L.call(u):L}return u}function jb(u,h,_){return u==null?u:uu(u,h,_)}function zb(u,h,_,E){return E=typeof E=="function"?E:r,u==null?u:uu(u,h,_,E)}var p0=Fh(Fr),g0=Fh(en);function qb(u,h,_){var E=pt(u),I=E||Fi(u)||va(u);if(h=rt(h,4),_==null){var L=u&&u.constructor;I?_=E?new L:[]:Zt(u)?_=oi(L)?ha(Vu(u)):{}:_={}}return(I?Dn:Wn)(u,function(Y,ee,ae){return h(_,Y,ee,ae)}),_}function Wb(u,h){return u==null?!0:nl(u,h)}function Hb(u,h,_){return u==null?u:lh(u,h,ul(_))}function $b(u,h,_,E){return E=typeof E=="function"?E:r,u==null?u:lh(u,h,ul(_),E)}function ma(u){return u==null?[]:Ro(u,Fr(u))}function Gb(u){return u==null?[]:Ro(u,en(u))}function Kb(u,h,_){return _===r&&(_=h,h=r),_!==r&&(_=Fn(_),_=_===_?_:0),h!==r&&(h=Fn(h),h=h===h?h:0),Gi(Fn(u),h,_)}function Yb(u,h,_){return h=li(h),_===r?(_=h,h=0):_=li(_),u=Fn(u),tm(u,h,_)}function Zb(u,h,_){if(_&&typeof _!="boolean"&&Kr(u,h,_)&&(h=_=r),_===r&&(typeof h=="boolean"?(_=h,h=r):typeof u=="boolean"&&(_=u,u=r)),u===r&&h===r?(u=0,h=1):(u=li(u),h===r?(h=u,u=0):h=li(h)),u>h){var E=u;u=h,h=E}if(_||u%1||h%1){var I=Uf();return Vr(u+I*(h-u+Bg("1e-"+((I+"").length-1))),h)}return el(u,h)}var Jb=pa(function(u,h,_){return h=h.toLowerCase(),u+(_?v0(h):h)});function v0(u){return Sl(kt(u).toLowerCase())}function m0(u){return u=kt(u),u&&u.replace(Wa,jg).replace(_g,"")}function Qb(u,h,_){u=kt(u),h=fn(h);var E=u.length;_=_===r?E:Gi(mt(_),0,E);var I=_;return _-=h.length,_>=0&&u.slice(_,I)==h}function Xb(u){return u=kt(u),u&&vn.test(u)?u.replace(pr,zg):u}function eD(u){return u=kt(u),u&&xa.test(u)?u.replace(Ui,"\\$&"):u}var tD=pa(function(u,h,_){return u+(_?"-":"")+h.toLowerCase()}),rD=pa(function(u,h,_){return u+(_?" ":"")+h.toLowerCase()}),nD=Dh("toLowerCase");function iD(u,h,_){u=kt(u),h=mt(h);var E=h?sa(u):0;if(!h||E>=h)return u;var I=(h-E)/2;return ns(Wu(I),_)+u+ns(qu(I),_)}function aD(u,h,_){u=kt(u),h=mt(h);var E=h?sa(u):0;return h&&E<h?u+ns(h-E,_):u}function uD(u,h,_){u=kt(u),h=mt(h);var E=h?sa(u):0;return h&&E<h?ns(h-E,_)+u:u}function sD(u,h,_){return _||h==null?h=0:h&&(h=+h),pv(kt(u).replace(Or,""),h||0)}function oD(u,h,_){return(_?Kr(u,h,_):h===r)?h=1:h=mt(h),tl(kt(u),h)}function lD(){var u=arguments,h=kt(u[0]);return u.length<3?h:h.replace(u[1],u[2])}var cD=pa(function(u,h,_){return u+(_?"_":"")+h.toLowerCase()});function fD(u,h,_){return _&&typeof _!="number"&&Kr(u,h,_)&&(h=_=r),_=_===r?be:_>>>0,_?(u=kt(u),u&&(typeof h=="string"||h!=null&&!Al(h))&&(h=fn(h),!h&&ua(u))?Ci(Pn(u),0,_):u.split(h,_)):[]}var hD=pa(function(u,h,_){return u+(_?" ":"")+Sl(h)});function dD(u,h,_){return u=kt(u),_=_==null?0:Gi(mt(_),0,u.length),h=fn(h),u.slice(_,_+h.length)==h}function pD(u,h,_){var E=N.templateSettings;_&&Kr(u,h,_)&&(h=r),u=kt(u),h=gs({},h,E,Sh);var I=gs({},h.imports,E.imports,Sh),L=Fr(I),Y=Ro(I,L),ee,ae,De=0,ye=h.interpolate||vi,Fe="__p += '",Le=Vo((h.escape||vi).source+"|"+ye.source+"|"+(ye===Xn?Ra:vi).source+"|"+(h.evaluate||vi).source+"|$","g"),Ke="//# sourceURL="+(xt.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Eg+"]")+`
`;u.replace(Le,function(at,yt,Ct,dn,Yr,pn){return Ct||(Ct=dn),Fe+=u.slice(De,pn).replace(Ha,qg),yt&&(ee=!0,Fe+=`' +
__e(`+yt+`) +
'`),Yr&&(ae=!0,Fe+=`';
`+Yr+`;
__p += '`),Ct&&(Fe+=`' +
((__t = (`+Ct+`)) == null ? '' : __t) +
'`),De=pn+at.length,at}),Fe+=`';
`;var it=xt.call(h,"variable")&&h.variable;if(!it)Fe=`with (obj) {
`+Fe+`
}
`;else if(Vi.test(it))throw new dt(s);Fe=(ae?Fe.replace(Kt,""):Fe).replace(Er,"$1").replace(Yt,"$1;"),Fe="function("+(it||"obj")+`) {
`+(it?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ee?", __e = _.escape":"")+(ae?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Fe+`return __p
}`;var _t=b0(function(){return Mt(L,Ke+"return "+Fe).apply(r,Y)});if(_t.source=Fe,El(_t))throw _t;return _t}function gD(u){return kt(u).toLowerCase()}function vD(u){return kt(u).toUpperCase()}function mD(u,h,_){if(u=kt(u),u&&(_||h===r))return Bf(u);if(!u||!(h=fn(h)))return u;var E=Pn(u),I=Pn(h),L=Of(E,I),Y=Mf(E,I)+1;return Ci(E,L,Y).join("")}function _D(u,h,_){if(u=kt(u),u&&(_||h===r))return u.slice(0,kf(u)+1);if(!u||!(h=fn(h)))return u;var E=Pn(u),I=Mf(E,Pn(h))+1;return Ci(E,0,I).join("")}function bD(u,h,_){if(u=kt(u),u&&(_||h===r))return u.replace(Or,"");if(!u||!(h=fn(h)))return u;var E=Pn(u),I=Of(E,Pn(h));return Ci(E,I).join("")}function DD(u,h){var _=U,E=K;if(Zt(h)){var I="separator"in h?h.separator:I;_="length"in h?mt(h.length):_,E="omission"in h?fn(h.omission):E}u=kt(u);var L=u.length;if(ua(u)){var Y=Pn(u);L=Y.length}if(_>=L)return u;var ee=_-sa(E);if(ee<1)return E;var ae=Y?Ci(Y,0,ee).join(""):u.slice(0,ee);if(I===r)return ae+E;if(Y&&(ee+=ae.length-ee),Al(I)){if(u.slice(ee).search(I)){var De,ye=ae;for(I.global||(I=Vo(I.source,kt(ra.exec(I))+"g")),I.lastIndex=0;De=I.exec(ye);)var Fe=De.index;ae=ae.slice(0,Fe===r?ee:Fe)}}else if(u.indexOf(fn(I),ee)!=ee){var Le=ae.lastIndexOf(I);Le>-1&&(ae=ae.slice(0,Le))}return ae+E}function yD(u){return u=kt(u),u&&gr.test(u)?u.replace(Ar,Zg):u}var wD=pa(function(u,h,_){return u+(_?" ":"")+h.toUpperCase()}),Sl=Dh("toUpperCase");function _0(u,h,_){return u=kt(u),h=_?r:h,h===r?Hg(u)?Xg(u):Ng(u):u.match(h)||[]}var b0=bt(function(u,h){try{return ln(u,r,h)}catch(_){return El(_)?_:new dt(_)}}),ED=ui(function(u,h){return Dn(h,function(_){_=$n(_),ii(u,_,yl(u[_],u))}),u});function AD(u){var h=u==null?0:u.length,_=rt();return u=h?Ht(u,function(E){if(typeof E[1]!="function")throw new yn(o);return[_(E[0]),E[1]]}):[],bt(function(E){for(var I=-1;++I<h;){var L=u[I];if(ln(L[0],this,E))return ln(L[1],this,E)}})}function CD(u){return Zv(En(u,f))}function Bl(u){return function(){return u}}function FD(u,h){return u==null||u!==u?h:u}var SD=wh(),BD=wh(!0);function tn(u){return u}function Ol(u){return Qf(typeof u=="function"?u:En(u,f))}function OD(u){return eh(En(u,f))}function MD(u,h){return th(u,En(h,f))}var PD=bt(function(u,h){return function(_){return iu(_,u,h)}}),kD=bt(function(u,h){return function(_){return iu(u,_,h)}});function Ml(u,h,_){var E=Fr(h),I=Zu(h,E);_==null&&!(Zt(h)&&(I.length||!E.length))&&(_=h,h=u,u=this,I=Zu(h,Fr(h)));var L=!(Zt(_)&&"chain"in _)||!!_.chain,Y=oi(u);return Dn(I,function(ee){var ae=h[ee];u[ee]=ae,Y&&(u.prototype[ee]=function(){var De=this.__chain__;if(L||De){var ye=u(this.__wrapped__),Fe=ye.__actions__=Qr(this.__actions__);return Fe.push({func:ae,args:arguments,thisArg:u}),ye.__chain__=De,ye}return ae.apply(u,bi([this.value()],arguments))})}),u}function TD(){return Mr._===this&&(Mr._=av),this}function Pl(){}function ID(u){return u=mt(u),bt(function(h){return rh(h,u)})}var xD=ol(Ht),ND=ol(Ef),LD=ol(To);function D0(u){return gl(u)?Io($n(u)):dm(u)}function RD(u){return function(h){return u==null?r:Ki(u,h)}}var UD=Ah(),VD=Ah(!0);function kl(){return[]}function Tl(){return!1}function jD(){return{}}function zD(){return""}function qD(){return!0}function WD(u,h){if(u=mt(u),u<1||u>X)return[];var _=be,E=Vr(u,be);h=rt(h),u-=be;for(var I=Lo(E,h);++_<u;)h(_);return I}function HD(u){return pt(u)?Ht(u,$n):hn(u)?[u]:Qr(Vh(kt(u)))}function $D(u){var h=++nv;return kt(u)+h}var GD=rs(function(u,h){return u+h},0),KD=ll("ceil"),YD=rs(function(u,h){return u/h},1),ZD=ll("floor");function JD(u){return u&&u.length?Yu(u,tn,Ko):r}function QD(u,h){return u&&u.length?Yu(u,rt(h,2),Ko):r}function XD(u){return Ff(u,tn)}function ey(u,h){return Ff(u,rt(h,2))}function ty(u){return u&&u.length?Yu(u,tn,Qo):r}function ry(u,h){return u&&u.length?Yu(u,rt(h,2),Qo):r}var ny=rs(function(u,h){return u*h},1),iy=ll("round"),ay=rs(function(u,h){return u-h},0);function uy(u){return u&&u.length?No(u,tn):0}function sy(u,h){return u&&u.length?No(u,rt(h,2)):0}return N.after=O2,N.ary=Jh,N.assign=vb,N.assignIn=f0,N.assignInWith=gs,N.assignWith=mb,N.at=_b,N.before=Qh,N.bind=yl,N.bindAll=ED,N.bindKey=Xh,N.castArray=j2,N.chain=Kh,N.chunk=Zm,N.compact=Jm,N.concat=Qm,N.cond=AD,N.conforms=CD,N.constant=Bl,N.countBy=u2,N.create=bb,N.curry=e0,N.curryRight=t0,N.debounce=r0,N.defaults=Db,N.defaultsDeep=yb,N.defer=M2,N.delay=P2,N.difference=Xm,N.differenceBy=e_,N.differenceWith=t_,N.drop=r_,N.dropRight=n_,N.dropRightWhile=i_,N.dropWhile=a_,N.fill=u_,N.filter=o2,N.flatMap=f2,N.flatMapDeep=h2,N.flatMapDepth=d2,N.flatten=Wh,N.flattenDeep=s_,N.flattenDepth=o_,N.flip=k2,N.flow=SD,N.flowRight=BD,N.fromPairs=l_,N.functions=Bb,N.functionsIn=Ob,N.groupBy=p2,N.initial=f_,N.intersection=h_,N.intersectionBy=d_,N.intersectionWith=p_,N.invert=Pb,N.invertBy=kb,N.invokeMap=v2,N.iteratee=Ol,N.keyBy=m2,N.keys=Fr,N.keysIn=en,N.map=ls,N.mapKeys=Ib,N.mapValues=xb,N.matches=OD,N.matchesProperty=MD,N.memoize=fs,N.merge=Nb,N.mergeWith=h0,N.method=PD,N.methodOf=kD,N.mixin=Ml,N.negate=hs,N.nthArg=ID,N.omit=Lb,N.omitBy=Rb,N.once=T2,N.orderBy=_2,N.over=xD,N.overArgs=I2,N.overEvery=ND,N.overSome=LD,N.partial=wl,N.partialRight=n0,N.partition=b2,N.pick=Ub,N.pickBy=d0,N.property=D0,N.propertyOf=RD,N.pull=__,N.pullAll=$h,N.pullAllBy=b_,N.pullAllWith=D_,N.pullAt=y_,N.range=UD,N.rangeRight=VD,N.rearg=x2,N.reject=w2,N.remove=w_,N.rest=N2,N.reverse=bl,N.sampleSize=A2,N.set=jb,N.setWith=zb,N.shuffle=C2,N.slice=E_,N.sortBy=B2,N.sortedUniq=M_,N.sortedUniqBy=P_,N.split=fD,N.spread=L2,N.tail=k_,N.take=T_,N.takeRight=I_,N.takeRightWhile=x_,N.takeWhile=N_,N.tap=J_,N.throttle=R2,N.thru=os,N.toArray=o0,N.toPairs=p0,N.toPairsIn=g0,N.toPath=HD,N.toPlainObject=c0,N.transform=qb,N.unary=U2,N.union=L_,N.unionBy=R_,N.unionWith=U_,N.uniq=V_,N.uniqBy=j_,N.uniqWith=z_,N.unset=Wb,N.unzip=Dl,N.unzipWith=Gh,N.update=Hb,N.updateWith=$b,N.values=ma,N.valuesIn=Gb,N.without=q_,N.words=_0,N.wrap=V2,N.xor=W_,N.xorBy=H_,N.xorWith=$_,N.zip=G_,N.zipObject=K_,N.zipObjectDeep=Y_,N.zipWith=Z_,N.entries=p0,N.entriesIn=g0,N.extend=f0,N.extendWith=gs,Ml(N,N),N.add=GD,N.attempt=b0,N.camelCase=Jb,N.capitalize=v0,N.ceil=KD,N.clamp=Kb,N.clone=z2,N.cloneDeep=W2,N.cloneDeepWith=H2,N.cloneWith=q2,N.conformsTo=$2,N.deburr=m0,N.defaultTo=FD,N.divide=YD,N.endsWith=Qb,N.eq=Tn,N.escape=Xb,N.escapeRegExp=eD,N.every=s2,N.find=l2,N.findIndex=zh,N.findKey=wb,N.findLast=c2,N.findLastIndex=qh,N.findLastKey=Eb,N.floor=ZD,N.forEach=Yh,N.forEachRight=Zh,N.forIn=Ab,N.forInRight=Cb,N.forOwn=Fb,N.forOwnRight=Sb,N.get=Cl,N.gt=G2,N.gte=K2,N.has=Mb,N.hasIn=Fl,N.head=Hh,N.identity=tn,N.includes=g2,N.indexOf=c_,N.inRange=Yb,N.invoke=Tb,N.isArguments=Ji,N.isArray=pt,N.isArrayBuffer=Y2,N.isArrayLike=Xr,N.isArrayLikeObject=cr,N.isBoolean=Z2,N.isBuffer=Fi,N.isDate=J2,N.isElement=Q2,N.isEmpty=X2,N.isEqual=eb,N.isEqualWith=tb,N.isError=El,N.isFinite=rb,N.isFunction=oi,N.isInteger=i0,N.isLength=ds,N.isMap=a0,N.isMatch=nb,N.isMatchWith=ib,N.isNaN=ab,N.isNative=ub,N.isNil=ob,N.isNull=sb,N.isNumber=u0,N.isObject=Zt,N.isObjectLike=nr,N.isPlainObject=cu,N.isRegExp=Al,N.isSafeInteger=lb,N.isSet=s0,N.isString=ps,N.isSymbol=hn,N.isTypedArray=va,N.isUndefined=cb,N.isWeakMap=fb,N.isWeakSet=hb,N.join=g_,N.kebabCase=tD,N.last=Cn,N.lastIndexOf=v_,N.lowerCase=rD,N.lowerFirst=nD,N.lt=db,N.lte=pb,N.max=JD,N.maxBy=QD,N.mean=XD,N.meanBy=ey,N.min=ty,N.minBy=ry,N.stubArray=kl,N.stubFalse=Tl,N.stubObject=jD,N.stubString=zD,N.stubTrue=qD,N.multiply=ny,N.nth=m_,N.noConflict=TD,N.noop=Pl,N.now=cs,N.pad=iD,N.padEnd=aD,N.padStart=uD,N.parseInt=sD,N.random=Zb,N.reduce=D2,N.reduceRight=y2,N.repeat=oD,N.replace=lD,N.result=Vb,N.round=iy,N.runInContext=ne,N.sample=E2,N.size=F2,N.snakeCase=cD,N.some=S2,N.sortedIndex=A_,N.sortedIndexBy=C_,N.sortedIndexOf=F_,N.sortedLastIndex=S_,N.sortedLastIndexBy=B_,N.sortedLastIndexOf=O_,N.startCase=hD,N.startsWith=dD,N.subtract=ay,N.sum=uy,N.sumBy=sy,N.template=pD,N.times=WD,N.toFinite=li,N.toInteger=mt,N.toLength=l0,N.toLower=gD,N.toNumber=Fn,N.toSafeInteger=gb,N.toString=kt,N.toUpper=vD,N.trim=mD,N.trimEnd=_D,N.trimStart=bD,N.truncate=DD,N.unescape=yD,N.uniqueId=$D,N.upperCase=wD,N.upperFirst=Sl,N.each=Yh,N.eachRight=Zh,N.first=Hh,Ml(N,function(){var u={};return Wn(N,function(h,_){xt.call(N.prototype,_)||(u[_]=h)}),u}(),{chain:!1}),N.VERSION=n,Dn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){N[u].placeholder=N}),Dn(["drop","take"],function(u,h){wt.prototype[u]=function(_){_=_===r?1:br(mt(_),0);var E=this.__filtered__&&!h?new wt(this):this.clone();return E.__filtered__?E.__takeCount__=Vr(_,E.__takeCount__):E.__views__.push({size:Vr(_,be),type:u+(E.__dir__<0?"Right":"")}),E},wt.prototype[u+"Right"]=function(_){return this.reverse()[u](_).reverse()}}),Dn(["filter","map","takeWhile"],function(u,h){var _=h+1,E=_==V||_==z;wt.prototype[u]=function(I){var L=this.clone();return L.__iteratees__.push({iteratee:rt(I,3),type:_}),L.__filtered__=L.__filtered__||E,L}}),Dn(["head","last"],function(u,h){var _="take"+(h?"Right":"");wt.prototype[u]=function(){return this[_](1).value()[0]}}),Dn(["initial","tail"],function(u,h){var _="drop"+(h?"":"Right");wt.prototype[u]=function(){return this.__filtered__?new wt(this):this[_](1)}}),wt.prototype.compact=function(){return this.filter(tn)},wt.prototype.find=function(u){return this.filter(u).head()},wt.prototype.findLast=function(u){return this.reverse().find(u)},wt.prototype.invokeMap=bt(function(u,h){return typeof u=="function"?new wt(this):this.map(function(_){return iu(_,u,h)})}),wt.prototype.reject=function(u){return this.filter(hs(rt(u)))},wt.prototype.slice=function(u,h){u=mt(u);var _=this;return _.__filtered__&&(u>0||h<0)?new wt(_):(u<0?_=_.takeRight(-u):u&&(_=_.drop(u)),h!==r&&(h=mt(h),_=h<0?_.dropRight(-h):_.take(h-u)),_)},wt.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},wt.prototype.toArray=function(){return this.take(be)},Wn(wt.prototype,function(u,h){var _=/^(?:filter|find|map|reject)|While$/.test(h),E=/^(?:head|last)$/.test(h),I=N[E?"take"+(h=="last"?"Right":""):h],L=E||/^find/.test(h);I&&(N.prototype[h]=function(){var Y=this.__wrapped__,ee=E?[1]:arguments,ae=Y instanceof wt,De=ee[0],ye=ae||pt(Y),Fe=function(yt){var Ct=I.apply(N,bi([yt],ee));return E&&Le?Ct[0]:Ct};ye&&_&&typeof De=="function"&&De.length!=1&&(ae=ye=!1);var Le=this.__chain__,Ke=!!this.__actions__.length,it=L&&!Le,_t=ae&&!Ke;if(!L&&ye){Y=_t?Y:new wt(this);var at=u.apply(Y,ee);return at.__actions__.push({func:os,args:[Fe],thisArg:r}),new wn(at,Le)}return it&&_t?u.apply(this,ee):(at=this.thru(Fe),it?E?at.value()[0]:at.value():at)})}),Dn(["pop","push","shift","sort","splice","unshift"],function(u){var h=Iu[u],_=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",E=/^(?:pop|shift)$/.test(u);N.prototype[u]=function(){var I=arguments;if(E&&!this.__chain__){var L=this.value();return h.apply(pt(L)?L:[],I)}return this[_](function(Y){return h.apply(pt(Y)?Y:[],I)})}}),Wn(wt.prototype,function(u,h){var _=N[h];if(_){var E=_.name+"";xt.call(fa,E)||(fa[E]=[]),fa[E].push({name:h,func:_})}}),fa[ts(r,D).name]=[{name:"wrapper",func:r}],wt.prototype.clone=yv,wt.prototype.reverse=wv,wt.prototype.value=Ev,N.prototype.at=Q_,N.prototype.chain=X_,N.prototype.commit=e2,N.prototype.next=t2,N.prototype.plant=n2,N.prototype.reverse=i2,N.prototype.toJSON=N.prototype.valueOf=N.prototype.value=a2,N.prototype.first=N.prototype.head,Ja&&(N.prototype[Ja]=r2),N},oa=ev();qi?((qi.exports=oa)._=oa,Oo._=oa):Mr._=oa}).call(vr)})(Y8,no);const Z8=no,hc="panelMode";function J8(){const t=sr("select"),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[hc]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[hc]=a,r(a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[hc],r("select"))}}}const pi=J8();function fp(t,e,r){const n=t.slice();return n[7]=e[r][0],n[8]=e[r][1],n}function hp(t,e,r){const n=t.slice();return n[11]=e[r][0],n[12]=e[r][1],n}function dp(t){let e=t[12].text+"",r,n,i,a;return{c(){r=Se(e),n=q("b"),i=Se("::"),a=Ee()},l(o){r=Be(o,e),n=W(o,"B",{});var s=R(n);i=Be(s,"::"),s.forEach(M),a=Ae(o)},m(o,s){se(o,r,s),se(o,n,s),T(n,i),se(o,a,s)},p(o,s){s&1&&e!==(e=o[12].text+"")&&hr(r,e)},d(o){o&&M(r),o&&M(n),o&&M(a)}}}function pp(t,e){let r,n,i,a,o,s=Object.entries(e[8].weightedPrompts),l=[];for(let c=0;c<s.length;c+=1)l[c]=dp(hp(e,s,c));function p(){return e[5](e[7],e[8])}return{key:t,first:null,c(){r=q("li"),n=q("a");for(let c=0;c<l.length;c+=1)l[c].c();i=Ee(),this.h()},l(c){r=W(c,"LI",{});var f=R(r);n=W(f,"A",{class:!0});var d=R(n);for(let g=0;g<l.length;g+=1)l[g].l(d);d.forEach(M),i=Ae(f),f.forEach(M),this.h()},h(){S(n,"class","text-xs inline-block"),Qe(n,"active",e[1]===e[7]),this.first=r},m(c,f){se(c,r,f),T(r,n);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(n,null);T(r,i),a||(o=_e(n,"click",p),a=!0)},p(c,f){if(e=c,f&5){s=Object.entries(e[8].weightedPrompts);let d;for(d=0;d<s.length;d+=1){const g=hp(e,s,d);l[d]?l[d].p(g,f):(l[d]=dp(g),l[d].c(),l[d].m(n,null))}for(;d<l.length;d+=1)l[d].d(1);l.length=s.length}f&7&&Qe(n,"active",e[1]===e[7])},d(c){c&&M(r),Cu(l,c),a=!1,o()}}}function Q8(t){let e,r,n,i,a,o=[],s=new Map,l,p,c=t[2](t[0],gp,"desc");const f=d=>d[7];for(let d=0;d<c.length;d+=1){let g=fp(t,c,d),b=f(g);s.set(b,o[d]=pp(b,g))}return{c(){e=q("ul"),r=q("li"),n=q("a"),i=Se("New +"),a=Ee();for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=W(d,"UL",{class:!0});var g=R(e);r=W(g,"LI",{});var b=R(r);n=W(b,"A",{class:!0});var v=R(n);i=Be(v,"New +"),v.forEach(M),b.forEach(M),a=Ae(g);for(let m=0;m<o.length;m+=1)o[m].l(g);g.forEach(M),this.h()},h(){S(n,"class","text-xs inline-block"),S(e,"class","menu h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(d,g){se(d,e,g),T(e,r),T(r,n),T(n,i),T(e,a);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(e,null);l||(p=_e(n,"click",t[3]),l=!0)},p(d,[g]){g&23&&(c=d[2](d[0],gp,"desc"),o=Un(o,g,f,1,d,c,s,e,Jn,pp,null,fp))},i:Me,o:Me,d(d){d&&M(e);for(let g=0;g<o.length;g+=1)o[g].d();l=!1,p()}}}const gp=t=>t[1].date;function X8(t,e,r){let n,i,a;Ge(t,ot,c=>r(6,n=c)),Ge(t,yy,c=>r(0,i=c)),Ge(t,Xi,c=>r(1,a=c));const{orderBy:o}=Z8;function s(){Xi.delete(),ot.update(Bi({},n.weightMode)),pi.update("edit")}function l(c,f){Xi.update(c),ot.update({...f}),pi.update("edit")}return[i,a,o,s,l,(c,f)=>l(c,f)]}class e7 extends Xe{constructor(e){super(),et(this,e,X8,Q8,tt,{})}}function vp(t,e,r){const n=t.slice();return n[21]=e[r].id,n[22]=e[r].text,n}function mp(t,e){let r,n,i,a,o;function s(...p){return e[10](e[21],...p)}function l(...p){return e[11](e[21],...p)}return{key:t,first:null,c(){r=q("li"),n=q("input"),this.h()},l(p){r=W(p,"LI",{class:!0});var c=R(r);n=W(c,"INPUT",{type:!0,placeholder:!0,class:!0}),c.forEach(M),this.h()},h(){n.value=i=e[22],S(n,"type","text"),S(n,"placeholder",""),S(n,"class","input input-bordered input-sm w-full"),S(r,"class","p-1"),this.first=r},m(p,c){se(p,r,c),T(r,n),a||(o=[_e(n,"input",s),_e(n,"keydown",l),_e(n,"keyup",e[12])],a=!0)},p(p,c){e=p,c&4&&i!==(i=e[22])&&n.value!==i&&(n.value=i)},d(p){p&&M(r),a=!1,zt(o)}}}function t7(t){let e,r,n,i,a,o,s,l,p,c,f,d=[],g=new Map,b,v,m,D,B,w,C,F,k,O,A,x,U=t[2];const K=J=>J[21];for(let J=0;J<U.length;J+=1){let j=vp(t,U,J),V=K(j);g.set(V,d[J]=mp(V,j))}return{c(){e=q("div"),r=q("button"),n=Se("Paste"),i=Ee(),a=q("button"),o=Se("Save"),s=Ee(),l=q("button"),p=Se("Delete"),c=Ee(),f=q("ul");for(let J=0;J<d.length;J+=1)d[J].c();b=Ee(),v=q("li"),m=q("input"),D=Ee(),B=q("div"),w=q("p"),C=Se("Shift+Enter to add a line"),F=Ee(),k=q("p"),O=Se("Bksp to remove an empty line"),this.h()},l(J){e=W(J,"DIV",{class:!0});var j=R(e);r=W(j,"BUTTON",{class:!0});var V=R(r);n=Be(V,"Paste"),V.forEach(M),i=Ae(j),a=W(j,"BUTTON",{class:!0});var H=R(a);o=Be(H,"Save"),H.forEach(M),s=Ae(j),l=W(j,"BUTTON",{class:!0});var z=R(l);p=Be(z,"Delete"),z.forEach(M),j.forEach(M),c=Ae(J),f=W(J,"UL",{class:!0});var Q=R(f);for(let we=0;we<d.length;we+=1)d[we].l(Q);b=Ae(Q),v=W(Q,"LI",{class:!0});var X=R(v);m=W(X,"INPUT",{type:!0,placeholder:!0,class:!0}),X.forEach(M),Q.forEach(M),D=Ae(J),B=W(J,"DIV",{class:!0});var te=R(B);w=W(te,"P",{});var le=R(w);C=Be(le,"Shift+Enter to add a line"),le.forEach(M),F=Ae(te),k=W(te,"P",{});var be=R(k);O=Be(be,"Bksp to remove an empty line"),be.forEach(M),te.forEach(M),this.h()},h(){S(r,"class","btn btn-sm btn-info mx-2"),S(a,"class","btn btn-sm btn-success mx-2"),S(l,"class","btn btn-sm btn-error mx-2"),S(e,"class","flex px-8 py-2 justify-center bg-base-100"),S(m,"type","text"),S(m,"placeholder","Add prompt"),S(m,"class","input input-bordered input-sm w-full italic"),S(v,"class","p-1"),S(f,"class","h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block"),S(B,"class","w-full justify-end bg-base-100 p-2 text-xs select-none")},m(J,j){se(J,e,j),T(e,r),T(r,n),T(e,i),T(e,a),T(a,o),T(e,s),T(e,l),T(l,p),se(J,c,j),se(J,f,j);for(let V=0;V<d.length;V+=1)d[V]&&d[V].m(f,null);T(f,b),T(f,v),T(v,m),nn(m,t[0]),se(J,D,j),se(J,B,j),T(B,w),T(w,C),T(B,F),T(B,k),T(k,O),A||(x=[_e(r,"click",t[4]),_e(a,"click",t[3]),_e(l,"click",t[5]),_e(m,"input",t[13]),_e(m,"keydown",t[14])],A=!0)},p(J,[j]){j&198&&(U=J[2],d=Un(d,j,K,1,J,U,g,f,Jn,mp,b,vp)),j&1&&m.value!==J[0]&&nn(m,J[0])},i:Me,o:Me,d(J){J&&M(e),J&&M(c),J&&M(f);for(let j=0;j<d.length;j+=1)d[j].d();J&&M(D),J&&M(B),A=!1,zt(x)}}}function r7(t,e,r){let n,i,a,o;Ge(t,ot,A=>r(9,i=A)),Ge(t,Xi,A=>r(15,a=A)),Ge(t,Ur,A=>r(16,o=A));let s="",l=Object.keys(i.weightedPrompts).length,p=!1;function c(){pu.update(_o(),{...i,date:Date.now()}),pi.update("select")}function f(){navigator.clipboard.readText().then(A=>{const x=bu(A);d(x)})}function d(A){const x=Math.max(...A.map(([K,J])=>J)),U=A.reduce((K,[J,j],V)=>(K[V]=Ir(V,J,j,j/x),o[J]||Ur.update(J,null),K),{});Xi.delete(),ot.update(Bi(U,i.weightMode)),r(0,s="")}function g(){a&&pu.delete(a),Xi.delete(),ot.delete(),pi.update("select")}function b(A){console.log("remove",A);const U=Object.entries(i.weightedPrompts).filter(([K])=>K!==A).map(([K,J])=>[J.text,J.parsedWeight]);return d(U)}function v(A,x){console.log("change",A);let U={...i.weightedPrompts};const K={...U[A],text:x};U[A]=K,ot.update({...i,weightedPrompts:U})}const m=Xs(v,500);function D(A){console.log("new",A);const x=Object.entries(i.weightedPrompts).map(([U,K])=>[K.text,K.parsedWeight]);return x.push([A,1]),d(x)}function B(A,x=null){const U=A.key,K=A.target.value;if(U==="Shift"){r(1,p=!0);return}if(x!==null){if(U==="Enter"&&K!==""?v(x,K):U==="Backspace"&&K===""&&b(x),U==="Enter"&&p){const j=Object.entries(i.weightedPrompts).map(([H,z])=>[z.text,z.parsedWeight]),V=parseInt(x)+1;return console.log("adding prompt at",x+1),j.splice(V,0,["",1]),d(j)}}else U==="Enter"&&K!==""&&D(K)}const w=(A,x)=>m(A,x.target.value),C=(A,x)=>B(x,A),F=A=>{A.key==="Shift"&&r(1,p=!1)};function k(){s=this.value,r(0,s),r(9,i),r(8,l)}const O=A=>B(A);return t.$$.update=()=>{if(t.$$.dirty&768){const A=Object.keys(i.weightedPrompts).length;A>l&&(r(8,l=A),r(0,s=""))}t.$$.dirty&512&&r(2,n=Object.entries(i.weightedPrompts).map(([A,x])=>({id:A,text:x.text})))},[s,p,n,c,f,g,m,B,l,i,w,C,F,k,O]}class n7 extends Xe{constructor(e){super(),et(this,e,r7,t7,tt,{})}}const i7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. The first sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. The middle three sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. The final sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,a7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 10 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. Four sentences should describe the subject.
    d. Four sentences should describe the scene.
    e. Tow sentences should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,u7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 10 concepts.
    a. Each concept should be 10 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
`,s7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 20 concepts.
    a. Each concept should be 5 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
3. Do not use hyphens to mark list items.
4. Do not title the list.
`,o7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. One sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. Two sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. One sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
    f. One sentence should be a poetic concept or feeling. Example: The unfathomable depths of a lover's sigh.
        i. The poetic concept should be intense.
        ii. The poetic concept should be emotional.
        iii. The poetic concept should include abstract words.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`;function l7(){const t=sr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith("directive")){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=Ot(t),p={...s[a]||{},...o};i&&(localStorage[`directive_${a}`]=JSON.stringify(p));const c={...s,[a]:p};r(c)},get:a=>Ot(t)[a],delete:a=>{i&&delete localStorage[`directive_${a}`];const o={...Ot(t)};delete o[a],r(o)}}}const io=l7(),c7=Fu(io,t=>Object.entries(Ot(io))),dc="preferredDirective";function f7(){const t=sr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[dc]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[dc]=a,r(a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[dc],r(""))}}}const As=f7(),pc="metaPrompt";function h7(){const t=sr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[pc]||""),{subscribe:e,update:a=>{i&&(localStorage[pc]=a,r(a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[pc],r(""))}}}const Vc=h7(),wa=sr("");function _p(t,e,r){const n=t.slice();return n[21]=e[r][0],n[22]=e[r][1],n}function bp(t,e){let r,n=e[22].name+"",i,a=e[22].builtIn?" (Built-In)":" (User)",o,s,l;return{key:t,first:null,c(){r=q("option"),i=Se(n),o=Se(a),this.h()},l(p){r=W(p,"OPTION",{});var c=R(r);i=Be(c,n),o=Be(c,a),c.forEach(M),this.h()},h(){r.__value=s=e[21],r.value=r.__value,r.selected=l=e[3]===e[21],this.first=r},m(p,c){se(p,r,c),T(r,i),T(r,o)},p(p,c){e=p,c&16&&n!==(n=e[22].name+"")&&hr(i,n),c&16&&a!==(a=e[22].builtIn?" (Built-In)":" (User)")&&hr(o,a),c&16&&s!==(s=e[21])&&(r.__value=s,r.value=r.__value),c&24&&l!==(l=e[3]===e[21])&&(r.selected=l)},d(p){p&&M(r)}}}function Dp(t){let e,r,n,i,a,o,s,l,p,c,f,d,g,b,v=!t[7]&&yp(t),m=t[6]&&wp(t);function D(C,F){return C[1]?p7:d7}let B=D(t),w=B(t);return{c(){v&&v.c(),e=Ee(),r=q("div"),n=q("textarea"),i=Ee(),a=q("div"),o=q("textarea"),s=Ee(),l=q("div"),m&&m.c(),p=Ee(),c=q("button"),f=Se("Preview"),d=Ee(),w.c(),this.h()},l(C){v&&v.l(C),e=Ae(C),r=W(C,"DIV",{class:!0});var F=R(r);n=W(F,"TEXTAREA",{class:!0,placeholder:!0}),R(n).forEach(M),F.forEach(M),i=Ae(C),a=W(C,"DIV",{class:!0});var k=R(a);o=W(k,"TEXTAREA",{class:!0,placeholder:!0}),R(o).forEach(M),k.forEach(M),s=Ae(C),l=W(C,"DIV",{class:!0});var O=R(l);m&&m.l(O),p=Ae(O),c=W(O,"BUTTON",{class:!0});var A=R(c);f=Be(A,"Preview"),A.forEach(M),d=Ae(O),w.l(O),O.forEach(M),this.h()},h(){S(n,"class","font-mono text-xs textarea textarea-bordered w-full h-full resize-none"),S(n,"placeholder","GPT Directives"),S(r,"class","w-full p-2 h-1/2"),o.value=t[9],S(o,"class","textarea textarea-bordered w-full h-full resize-none"),S(o,"placeholder","Describe the prompt to generate."),S(a,"class","w-full p-2 h-1/5"),S(c,"class","btn btn-sm btn btn-info"),S(l,"class","w-full p-2 h-12 flex justify-between")},m(C,F){v&&v.m(C,F),se(C,e,F),se(C,r,F),T(r,n),nn(n,t[8]),se(C,i,F),se(C,a,F),T(a,o),se(C,s,F),se(C,l,F),m&&m.m(l,null),T(l,p),T(l,c),T(c,f),T(l,d),w.m(l,null),g||(b=[_e(n,"input",t[17]),_e(o,"input",t[18]),_e(c,"click",function(){Sa(t[0])&&t[0].apply(this,arguments)})],g=!0)},p(C,F){t=C,t[7]?v&&(v.d(1),v=null):v?v.p(t,F):(v=yp(t),v.c(),v.m(e.parentNode,e)),F&256&&nn(n,t[8]),F&512&&(o.value=t[9]),t[6]?m?m.p(t,F):(m=wp(t),m.c(),m.m(l,p)):m&&(m.d(1),m=null),B===(B=D(t))&&w?w.p(t,F):(w.d(1),w=B(t),w&&(w.c(),w.m(l,null)))},d(C){v&&v.d(C),C&&M(e),C&&M(r),C&&M(i),C&&M(a),C&&M(s),C&&M(l),m&&m.d(),w.d(),g=!1,zt(b)}}}function yp(t){let e,r,n,i,a,o,s;return{c(){e=q("div"),r=q("input"),n=Ee(),i=q("button"),a=Se("Save"),this.h()},l(l){e=W(l,"DIV",{class:!0});var p=R(e);r=W(p,"INPUT",{type:!0,placeholder:!0,class:!0}),n=Ae(p),i=W(p,"BUTTON",{class:!0});var c=R(i);a=Be(c,"Save"),c.forEach(M),p.forEach(M),this.h()},h(){S(r,"type","text"),S(r,"placeholder","Name"),S(r,"class","input input-bordered input-sm w-full max-w-xs"),S(i,"class","btn btn-sm btn-primary ml-4"),S(e,"class","w-full p-2 h-12 flex justify-between")},m(l,p){se(l,e,p),T(e,r),nn(r,t[5]),T(e,n),T(e,i),T(i,a),o||(s=[_e(r,"input",t[16]),_e(i,"click",t[10])],o=!0)},p(l,p){p&32&&r.value!==l[5]&&nn(r,l[5])},d(l){l&&M(e),o=!1,zt(s)}}}function wp(t){let e,r,n,i;return{c(){e=q("button"),r=Se("Delete"),this.h()},l(a){e=W(a,"BUTTON",{class:!0});var o=R(e);r=Be(o,"Delete"),o.forEach(M),this.h()},h(){S(e,"class","btn btn-sm btn-error")},m(a,o){se(a,e,o),T(e,r),n||(i=_e(e,"click",t[11]),n=!0)},p:Me,d(a){a&&M(e),n=!1,i()}}}function d7(t){let e,r,n,i;return{c(){e=q("button"),r=Se("Generate"),this.h()},l(a){e=W(a,"BUTTON",{class:!0});var o=R(e);r=Be(o,"Generate"),o.forEach(M),this.h()},h(){S(e,"class","btn btn-sm btn-primary")},m(a,o){se(a,e,o),T(e,r),n||(i=_e(e,"click",function(){Sa(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(a,o){t=a},d(a){a&&M(e),n=!1,i()}}}function p7(t){let e,r;return{c(){e=q("button"),r=Se("Generating"),this.h()},l(n){e=W(n,"BUTTON",{class:!0});var i=R(e);r=Be(i,"Generating"),i.forEach(M),this.h()},h(){S(e,"class","btn btn-sm btn disabled")},m(n,i){se(n,e,i),T(e,r)},p:Me,d(n){n&&M(e)}}}function g7(t){let e,r,n,i,a,o,s,l,p,c,f=[],d=new Map,g,b,v,m,D,B,w,C=Object.entries(t[4]);const F=O=>O[21];for(let O=0;O<C.length;O+=1){let A=_p(t,C,O),x=F(A);d.set(x,f[O]=bp(x,A))}let k=t[3]&&Dp(t);return{c(){e=q("div"),r=q("div"),n=q("label"),i=q("span"),a=Se("Pick a directive for prompt creation"),o=Ee(),s=q("select"),l=q("option"),p=Se("Pick one");for(let O=0;O<f.length;O+=1)f[O].c();g=q("option"),b=Se("New"),m=Ee(),k&&k.c(),D=Ft(),this.h()},l(O){e=W(O,"DIV",{class:!0});var A=R(e);r=W(A,"DIV",{class:!0});var x=R(r);n=W(x,"LABEL",{class:!0});var U=R(n);i=W(U,"SPAN",{class:!0});var K=R(i);a=Be(K,"Pick a directive for prompt creation"),K.forEach(M),U.forEach(M),o=Ae(x),s=W(x,"SELECT",{class:!0});var J=R(s);l=W(J,"OPTION",{});var j=R(l);p=Be(j,"Pick one"),j.forEach(M);for(let H=0;H<f.length;H+=1)f[H].l(J);g=W(J,"OPTION",{});var V=R(g);b=Be(V,"New"),V.forEach(M),J.forEach(M),x.forEach(M),A.forEach(M),m=Ae(O),k&&k.l(O),D=Ft(),this.h()},h(){S(i,"class","label-text"),S(n,"class","label"),l.disabled=!0,l.selected=c=t[3]===null,l.__value="Pick one",l.value=l.__value,g.__value="new",g.value=g.__value,g.selected=v=t[3]==="new",S(s,"class","select select-bordered"),S(r,"class","form-control w-full max-w-xs mb-4"),S(e,"class","flex justify-center")},m(O,A){se(O,e,A),T(e,r),T(r,n),T(n,i),T(i,a),T(r,o),T(r,s),T(s,l),T(l,p);for(let x=0;x<f.length;x+=1)f[x]&&f[x].m(s,null);T(s,g),T(g,b),ki(s,t[3]),se(O,m,A),k&&k.m(O,A),se(O,D,A),B||(w=_e(s,"change",t[12]),B=!0)},p(O,[A]){A&24&&c!==(c=O[3]===null)&&(l.selected=c),A&24&&(C=Object.entries(O[4]),f=Un(f,A,F,1,O,C,d,s,Jn,bp,g,_p)),A&24&&v!==(v=O[3]==="new")&&(g.selected=v),A&24&&ki(s,O[3]),O[3]?k?k.p(O,A):(k=Dp(O),k.c(),k.m(D.parentNode,D)):k&&(k.d(1),k=null)},i:Me,o:Me,d(O){O&&M(e);for(let A=0;A<f.length;A+=1)f[A].d();O&&M(m),k&&k.d(O),O&&M(D),B=!1,w()}}}function v7(t,e,r){let n,i,a,o,s,l,p,c;Ge(t,wa,A=>r(8,s=A)),Ge(t,As,A=>r(14,l=A)),Ge(t,c7,A=>r(15,p=A)),Ge(t,Vc,A=>r(9,c=A));let{togglePreview:f=()=>{}}=e,{isGenerating:d=!1}=e,{handleGeneratePrompt:g=()=>{}}=e,b={C:{name:"Five Sentences",text:i7,builtIn:!0},D:{name:"Ten Sentences",text:a7,builtIn:!0},E:{name:"Fragments",text:u7,builtIn:!0},F:{name:"Concept Shotgun",text:s7,builtIn:!0},G:{name:"Poetic Accents",text:o7,builtIn:!0}},v=null,m="";function D(){const A=v==="new"?_o():v;io.update(A,{name:m,text:s,builtIn:!1}),v==="new"&&(r(3,v=A),As.update(A))}function B(){io.delete(v),r(3,v=null),r(5,m=""),wa.set(""),As.delete()}function w(A){r(3,v=A),As.update(A),A&&A!=="new"?(r(5,m=i[A].name),wa.set(i[A].text)):A==="new"&&(r(5,m=""),wa.set(""))}function C(A){w(A.target.value)}function F(){m=this.value,r(5,m)}function k(){s=this.value,wa.set(s)}const O=A=>Vc.update(A.target.value);return t.$$set=A=>{"togglePreview"in A&&r(0,f=A.togglePreview),"isGenerating"in A&&r(1,d=A.isGenerating),"handleGeneratePrompt"in A&&r(2,g=A.handleGeneratePrompt)},t.$$.update=()=>{t.$$.dirty&32768&&r(13,n=p.reduce((A,[x,U])=>(A[x]={name:U.name,text:U.text,builtIn:!1},A),{})),t.$$.dirty&8192&&r(4,i=Object.entries({...b,...n}).reduce((A,[x,U])=>(A[x]=U,A),{})),t.$$.dirty&16392&&v===null&&l&&(r(3,v=l),w(v)),t.$$.dirty&24&&r(7,a=v&&v!=="new"&&i[v].builtIn),t.$$.dirty&24&&r(6,o=v&&v!=="new"&&!i[v].builtIn)},[f,d,g,v,i,m,o,a,s,c,D,B,C,n,l,p,F,k,O]}class m7 extends Xe{constructor(e){super(),et(this,e,v7,g7,tt,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}function _7(t,e){return`${t}

Use the following text to generate output based on the instructions above:

${e}`}const cg=Fu([wa,Vc,xi],t=>_u(_7(t[0],t[1]),t[2]));function b7(t){let e,r,n,i;return{c(){e=q("button"),r=Se("Generate"),this.h()},l(a){e=W(a,"BUTTON",{class:!0});var o=R(e);r=Be(o,"Generate"),o.forEach(M),this.h()},h(){S(e,"class","btn btn-sm btn-primary")},m(a,o){se(a,e,o),T(e,r),n||(i=_e(e,"click",function(){Sa(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(a,o){t=a},d(a){a&&M(e),n=!1,i()}}}function D7(t){let e,r;return{c(){e=q("button"),r=Se("Generating"),this.h()},l(n){e=W(n,"BUTTON",{class:!0});var i=R(e);r=Be(i,"Generating"),i.forEach(M),this.h()},h(){S(e,"class","btn btn-sm btn disabled")},m(n,i){se(n,e,i),T(e,r)},p:Me,d(n){n&&M(e)}}}function y7(t){let e,r,n,i,a,o,s,l,p,c;function f(b,v){return b[1]?D7:b7}let d=f(t),g=d(t);return{c(){e=q("div"),r=q("p"),n=Se(t[3]),i=Ee(),a=q("div"),o=q("button"),s=Se("Back"),l=Ee(),g.c(),this.h()},l(b){e=W(b,"DIV",{class:!0});var v=R(e);r=W(v,"P",{class:!0});var m=R(r);n=Be(m,t[3]),m.forEach(M),v.forEach(M),i=Ae(b),a=W(b,"DIV",{class:!0});var D=R(a);o=W(D,"BUTTON",{class:!0});var B=R(o);s=Be(B,"Back"),B.forEach(M),l=Ae(D),g.l(D),D.forEach(M),this.h()},h(){S(r,"class","font-mono text-xs whitespace-pre-wrap"),S(e,"class","p-4 overflow-y-auto"),S(o,"class","btn btn-sm btn btn-info"),S(a,"class","w-full p-2 h-12 flex justify-between")},m(b,v){se(b,e,v),T(e,r),T(r,n),se(b,i,v),se(b,a,v),T(a,o),T(o,s),T(a,l),g.m(a,null),p||(c=_e(o,"click",function(){Sa(t[0])&&t[0].apply(this,arguments)}),p=!0)},p(b,[v]){t=b,v&8&&hr(n,t[3]),d===(d=f(t))&&g?g.p(t,v):(g.d(1),g=d(t),g&&(g.c(),g.m(a,null)))},i:Me,o:Me,d(b){b&&M(e),b&&M(i),b&&M(a),g.d(),p=!1,c()}}}function w7(t,e,r){let n;Ge(t,cg,s=>r(3,n=s));let{togglePreview:i=()=>{}}=e,{isGenerating:a=!1}=e,{handleGeneratePrompt:o=()=>{}}=e;return t.$$set=s=>{"togglePreview"in s&&r(0,i=s.togglePreview),"isGenerating"in s&&r(1,a=s.isGenerating),"handleGeneratePrompt"in s&&r(2,o=s.handleGeneratePrompt)},[i,a,o,n]}class E7 extends Xe{constructor(e){super(),et(this,e,w7,y7,tt,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}const gc="preferredModel";function A7(){const t=sr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[gc]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[gc]=a,r(a))},get:()=>Ot(t),delete:()=>{i&&(delete localStorage[gc],r(""))}}}const jc=A7();function C7(t){let e,r,n;return{c(){e=q("div"),r=q("p"),n=Se("Set Open AI Key in settings for GPT generation."),this.h()},l(i){e=W(i,"DIV",{class:!0});var a=R(e);r=W(a,"P",{class:!0});var o=R(r);n=Be(o,"Set Open AI Key in settings for GPT generation."),o.forEach(M),a.forEach(M),this.h()},h(){S(r,"class","text-center"),S(e,"class","w-full p-2 flex justify-center")},m(i,a){se(i,e,a),T(e,r),T(r,n)},p:Me,i:Me,o:Me,d(i){i&&M(e)}}}function F7(t){let e,r,n,i;const a=[B7,S7],o=[];function s(l,p){return l[1]?0:1}return e=s(t),r=o[e]=a[e](t),{c(){r.c(),n=Ft()},l(l){r.l(l),n=Ft()},m(l,p){o[e].m(l,p),se(l,n,p),i=!0},p(l,p){let c=e;e=s(l),e===c?o[e].p(l,p):(ar(),ve(o[c],1,1,()=>{o[c]=null}),ur(),r=o[e],r?r.p(l,p):(r=o[e]=a[e](l),r.c()),fe(r,1),r.m(n.parentNode,n))},i(l){i||(fe(r),i=!0)},o(l){ve(r),i=!1},d(l){o[e].d(l),l&&M(n)}}}function S7(t){let e,r;return e=new m7({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p(n,i){const a={};i&1&&(a.isGenerating=n[0]),e.$set(a)},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function B7(t){let e,r;return e=new E7({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p(n,i){const a={};i&1&&(a.isGenerating=n[0]),e.$set(a)},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function O7(t){let e,r,n,i;const a=[F7,C7],o=[];function s(l,p){return l[2]?0:1}return r=s(t),n=o[r]=a[r](t),{c(){e=q("div"),n.c(),this.h()},l(l){e=W(l,"DIV",{class:!0});var p=R(e);n.l(p),p.forEach(M),this.h()},h(){S(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(l,p){se(l,e,p),o[r].m(e,null),i=!0},p(l,[p]){n.p(l,p)},i(l){i||(fe(n),i=!0)},o(l){ve(n),i=!1},d(l){l&&M(e),o[r].d()}}}function M7(t,e,r){let n,i,a,o,s,l;Ge(t,cg,D=>r(7,i=D)),Ge(t,ot,D=>r(8,a=D)),Ge(t,Ur,D=>r(9,o=D)),Ge(t,jc,D=>r(5,s=D)),Ge(t,di,D=>r(10,l=D));const p=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001"];let c=!1,f=l,d=!1;function g(D,B){const w=ro(D),C=n||"gpt-3.5-turbo";r(0,c=!0),w8(w,B,C).then(F=>{console.log(F),F.data.choices.forEach((k,O)=>{const A=bu(k.message.content);console.log(A);const x=A.reduce((U,[K,J],j)=>(U[j]=Ir(j,K,J),o[K]||Ur.update(K,null),U),{});ot.update(Bi(x,a.weightMode)),pi.update("edit"),xi.shuffle()})}).finally(()=>{r(0,c=!1)})}function b(D,B){const w=ro(D),C=n||"text-davinci-003";r(0,c=!0),y8(w,B,C).then(F=>{console.log(F),F.data.choices.forEach((k,O)=>{const A=bu(k.text);console.log(A);const x=A.reduce((U,[K,J],j)=>(U[j]=Ir(j,K,J),o[K]||Ur.update(K,null),U),{});ot.update(Bi(x,a.weightMode)),pi.update("edit"),xi.shuffle()})}).finally(()=>{r(0,c=!1)})}function v(){f&&(p.includes(n)?b(f,i):g(f,i))}function m(){console.log(i),r(1,d=!d)}return t.$$.update=()=>{t.$$.dirty&32&&(n=s||null)},[c,d,f,v,m,s]}class P7 extends Xe{constructor(e){super(),et(this,e,M7,O7,tt,{})}}function Ep(t,e,r){const n=t.slice();return n[18]=e[r],n}function Ap(t,e,r){const n=t.slice();return n[18]=e[r],n}function k7(t){return{c:Me,l:Me,m:Me,p:Me,d:Me}}function T7(t){let e,r,n=t[0].length>0&&Cp(t),i=t[1].length>0&&Sp(t);return{c(){n&&n.c(),e=Ee(),i&&i.c(),r=Ft()},l(a){n&&n.l(a),e=Ae(a),i&&i.l(a),r=Ft()},m(a,o){n&&n.m(a,o),se(a,e,o),i&&i.m(a,o),se(a,r,o)},p(a,o){a[0].length>0?n?n.p(a,o):(n=Cp(a),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),a[1].length>0?i?i.p(a,o):(i=Sp(a),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){n&&n.d(a),a&&M(e),i&&i.d(a),a&&M(r)}}}function Cp(t){let e,r,n,i,a,o,s,l,p,c,f=[],d=new Map,g,b,v=t[0];const m=D=>D[18];for(let D=0;D<v.length;D+=1){let B=Ap(t,v,D),w=m(B);d.set(w,f[D]=Fp(w,B))}return{c(){e=q("div"),r=q("div"),n=q("label"),i=q("span"),a=Se("Pick a model to use for model generation"),o=Ee(),s=q("select"),l=q("option"),p=Se("Pick one");for(let D=0;D<f.length;D+=1)f[D].c();this.h()},l(D){e=W(D,"DIV",{class:!0});var B=R(e);r=W(B,"DIV",{class:!0});var w=R(r);n=W(w,"LABEL",{class:!0});var C=R(n);i=W(C,"SPAN",{class:!0});var F=R(i);a=Be(F,"Pick a model to use for model generation"),F.forEach(M),C.forEach(M),o=Ae(w),s=W(w,"SELECT",{class:!0});var k=R(s);l=W(k,"OPTION",{});var O=R(l);p=Be(O,"Pick one"),O.forEach(M);for(let A=0;A<f.length;A+=1)f[A].l(k);k.forEach(M),w.forEach(M),B.forEach(M),this.h()},h(){S(i,"class","label-text"),S(n,"class","label"),l.disabled=!0,l.selected=c=t[2]===null,l.__value="Pick one",l.value=l.__value,S(s,"class","select select-bordered"),S(r,"class","form-control w-full max-w-xs mb-4"),S(e,"class","flex justify-center")},m(D,B){se(D,e,B),T(e,r),T(r,n),T(n,i),T(i,a),T(r,o),T(r,s),T(s,l),T(l,p);for(let w=0;w<f.length;w+=1)f[w]&&f[w].m(s,null);ki(s,t[2]),g||(b=_e(s,"change",t[6]),g=!0)},p(D,B){B&5&&c!==(c=D[2]===null)&&(l.selected=c),B&5&&(v=D[0],f=Un(f,B,m,1,D,v,d,s,Jn,Fp,null,Ap)),B&5&&ki(s,D[2])},d(D){D&&M(e);for(let B=0;B<f.length;B+=1)f[B].d();g=!1,b()}}}function Fp(t,e){let r,n=e[18]+"",i,a,o;return{key:t,first:null,c(){r=q("option"),i=Se(n),this.h()},l(s){r=W(s,"OPTION",{});var l=R(r);i=Be(l,n),l.forEach(M),this.h()},h(){r.__value=a=e[18],r.value=r.__value,r.selected=o=e[2]===e[18],this.first=r},m(s,l){se(s,r,l),T(r,i)},p(s,l){e=s,l&1&&n!==(n=e[18]+"")&&hr(i,n),l&1&&a!==(a=e[18])&&(r.__value=a,r.value=r.__value),l&5&&o!==(o=e[2]===e[18])&&(r.selected=o)},d(s){s&&M(r)}}}function Sp(t){let e,r,n,i,a,o,s,l,p,c,f=[],d=new Map,g,b,v=t[1];const m=D=>D[18];for(let D=0;D<v.length;D+=1){let B=Ep(t,v,D),w=m(B);d.set(w,f[D]=Bp(w,B))}return{c(){e=q("div"),r=q("div"),n=q("label"),i=q("span"),a=Se("Pick a model to use for prompt embedding"),o=Ee(),s=q("select"),l=q("option"),p=Se("Pick one");for(let D=0;D<f.length;D+=1)f[D].c();this.h()},l(D){e=W(D,"DIV",{class:!0});var B=R(e);r=W(B,"DIV",{class:!0});var w=R(r);n=W(w,"LABEL",{class:!0});var C=R(n);i=W(C,"SPAN",{class:!0});var F=R(i);a=Be(F,"Pick a model to use for prompt embedding"),F.forEach(M),C.forEach(M),o=Ae(w),s=W(w,"SELECT",{class:!0});var k=R(s);l=W(k,"OPTION",{});var O=R(l);p=Be(O,"Pick one"),O.forEach(M);for(let A=0;A<f.length;A+=1)f[A].l(k);k.forEach(M),w.forEach(M),B.forEach(M),this.h()},h(){S(i,"class","label-text"),S(n,"class","label"),l.disabled=!0,l.selected=c=t[3]===null,l.__value="Pick one",l.value=l.__value,S(s,"class","select select-bordered"),S(r,"class","form-control w-full max-w-xs mb-4"),S(e,"class","flex justify-center")},m(D,B){se(D,e,B),T(e,r),T(r,n),T(n,i),T(i,a),T(r,o),T(r,s),T(s,l),T(l,p);for(let w=0;w<f.length;w+=1)f[w]&&f[w].m(s,null);ki(s,t[3]),g||(b=_e(s,"change",t[7]),g=!0)},p(D,B){B&10&&c!==(c=D[3]===null)&&(l.selected=c),B&10&&(v=D[1],f=Un(f,B,m,1,D,v,d,s,Jn,Bp,null,Ep)),B&10&&ki(s,D[3])},d(D){D&&M(e);for(let B=0;B<f.length;B+=1)f[B].d();g=!1,b()}}}function Bp(t,e){let r,n=e[18]+"",i,a,o;return{key:t,first:null,c(){r=q("option"),i=Se(n),this.h()},l(s){r=W(s,"OPTION",{});var l=R(r);i=Be(l,n),l.forEach(M),this.h()},h(){r.__value=a=e[18],r.value=r.__value,r.selected=o=e[3]===e[18],this.first=r},m(s,l){se(s,r,l),T(r,i)},p(s,l){e=s,l&2&&n!==(n=e[18]+"")&&hr(i,n),l&2&&a!==(a=e[18])&&(r.__value=a,r.value=r.__value),l&10&&o!==(o=e[3]===e[18])&&(r.selected=o)},d(s){s&&M(r)}}}function I7(t){let e,r,n;return{c(){e=q("div"),r=q("div"),n=q("progress"),this.h()},l(i){e=W(i,"DIV",{class:!0});var a=R(e);r=W(a,"DIV",{class:!0});var o=R(r);n=W(o,"PROGRESS",{class:!0}),R(n).forEach(M),o.forEach(M),a.forEach(M),this.h()},h(){S(n,"class","progress progress-primary w-56"),S(r,"class","form-control w-full flex flex-col max-w-xs"),S(e,"class","py-10 flex justify-center")},m(i,a){se(i,e,a),T(e,r),T(r,n)},p:Me,d(i){i&&M(e)}}}function x7(t){let e,r,n,i,a,o,s,l,p,c,f,d,g,b,v,m,D={ctx:t,current:null,token:null,hasCatch:!1,pending:I7,then:T7,catch:k7,value:17};return Ms(b=t[4],D),{c(){e=q("div"),r=q("div"),n=q("div"),i=q("label"),a=q("span"),o=Se("Open AI Key"),s=Ee(),l=q("input"),p=Ee(),c=q("label"),f=q("button"),d=Se("Clear"),g=Ee(),D.block.c(),this.h()},l(B){e=W(B,"DIV",{class:!0});var w=R(e);r=W(w,"DIV",{class:!0});var C=R(r);n=W(C,"DIV",{class:!0});var F=R(n);i=W(F,"LABEL",{class:!0});var k=R(i);a=W(k,"SPAN",{class:!0});var O=R(a);o=Be(O,"Open AI Key"),O.forEach(M),k.forEach(M),s=Ae(F),l=W(F,"INPUT",{type:!0,placeholder:!0,class:!0}),p=Ae(F),c=W(F,"LABEL",{class:!0});var A=R(c);f=W(A,"BUTTON",{class:!0});var x=R(f);d=Be(x,"Clear"),x.forEach(M),A.forEach(M),F.forEach(M),C.forEach(M),g=Ae(w),D.block.l(w),w.forEach(M),this.h()},h(){S(a,"class","label-text-alt"),S(i,"class","label"),l.value=t[5],S(l,"type","password"),S(l,"placeholder","Open AI Key"),S(l,"class","input input-bordered w-full max-w-xs"),S(f,"class","btn btn-xs btn-error"),S(c,"class","label"),S(n,"class","form-control w-full max-w-xs"),S(r,"class","flex justify-center"),S(e,"class","h-full p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(B,w){se(B,e,w),T(e,r),T(r,n),T(n,i),T(i,a),T(a,o),T(n,s),T(n,l),T(n,p),T(n,c),T(c,f),T(f,d),T(e,g),D.block.m(e,D.anchor=null),D.mount=()=>e,D.anchor=null,v||(m=[_e(l,"input",t[8]),_e(f,"click",t[9])],v=!0)},p(B,[w]){t=B,w&32&&l.value!==t[5]&&(l.value=t[5]),D.ctx=t,w&16&&b!==(b=t[4])&&Ms(b,D)||Lp(D,t,w)},i:Me,o:Me,d(B){B&&M(e),D.block.d(),D.token=null,D=null,v=!1,zt(m)}}}function N7(t,e,r){let n,i,a,o;Ge(t,ot,C=>r(11,n=C)),Ge(t,Uc,C=>r(12,i=C)),Ge(t,jc,C=>r(13,a=C)),Ge(t,di,C=>r(5,o=C));const s=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001","gpt-3.5-turbo","gpt-3.5-turbo-0301"],l=["text-embedding-ada-002"];let p=o,c=[],f=[],d=a,g=i,b=null;async function v(C){if(!C||c.length&&f.length)return;const F=ro(C);r(4,b=A8(F));const k=await b;k.data&&r(0,c=k.data.data.map(({id:O})=>O).filter(O=>s.includes(O))),r(1,f=k.data.data.map(({id:O})=>O).filter(O=>l.includes(O)))}function m(C){r(2,d=C.target.value),jc.update(d)}function D(C){r(3,g=C.target.value),Uc.update(g)}function B(C){const F=C.target.value;di.update(F),F.length===51&&v(F),F.length===0&&w()}function w(){di.delete(),r(10,p=""),r(0,c=[]),r(1,f=[]),n.weightMode===gt.Embed&&ot.update({...n,weightMode:gt.Circle})}return t.$$.update=()=>{t.$$.dirty&1024&&v(p)},[c,f,d,g,b,o,m,D,B,w,p]}class L7 extends Xe{constructor(e){super(),et(this,e,N7,x7,tt,{})}}function R7(t){let e,r;return{c(){e=ut("svg"),r=ut("path"),this.h()},l(n){e=st(n,"svg",{xmlns:!0,class:!0,viewBox:!0});var i=R(e);r=st(i,"path",{fill:!0,d:!0}),R(r).forEach(M),i.forEach(M),this.h()},h(){S(r,"fill","rgba(255,255,255, 0.7)"),S(r,"d","M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"class","h-4 w-4"),S(e,"viewBox","0 0 24 24")},m(n,i){se(n,e,i),T(e,r)},p:Me,i:Me,o:Me,d(n){n&&M(e)}}}class U7 extends Xe{constructor(e){super(),et(this,e,null,R7,tt,{})}}function Op(t,e,r){const n=t.slice();return n[17]=e[r],n[19]=r,n}function Mp(t,e,r){const n=t.slice();return n[20]=e[r][0],n[21]=e[r][1],n}function Pp(t,e){let r,n=e[21].name+"",i,a,o;return{key:t,first:null,c(){r=q("option"),i=Se(n),this.h()},l(s){r=W(s,"OPTION",{});var l=R(r);i=Be(l,n),l.forEach(M),this.h()},h(){r.__value=a=e[20],r.value=r.__value,r.selected=o=e[0]===e[20],this.first=r},m(s,l){se(s,r,l),T(r,i)},p(s,l){e=s,l&16&&n!==(n=e[21].name+"")&&hr(i,n),l&16&&a!==(a=e[20])&&(r.__value=a,r.value=r.__value),l&17&&o!==(o=e[0]===e[20])&&(r.selected=o)},d(s){s&&M(r)}}}function kp(t){let e,r,n,i,a,o,s,l,p,c=js(t[1])+"",f,d,g=(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1]),b,v,m,D,B,w,C,F,k,O,A,x,U,K,J=g&&Tp(),j=t[3]&&Ip(t);return{c(){e=q("div"),r=q("div"),n=q("input"),i=Ee(),a=q("div"),o=q("label"),s=q("span"),l=Se("Alias: "),p=q("b"),f=Se(c),d=Ee(),J&&J.c(),b=Ee(),v=q("button"),m=Se("Save"),D=Ee(),B=q("ul"),j&&j.c(),w=Ee(),C=q("li"),F=q("input"),k=Ee(),O=q("div"),A=q("button"),x=Se("Delete"),this.h()},l(V){e=W(V,"DIV",{class:!0});var H=R(e);r=W(H,"DIV",{class:!0});var z=R(r);n=W(z,"INPUT",{type:!0,placeholder:!0,class:!0}),i=Ae(z),a=W(z,"DIV",{class:!0,"data-tip":!0});var Q=R(a);o=W(Q,"LABEL",{class:!0});var X=R(o);s=W(X,"SPAN",{class:!0});var te=R(s);l=Be(te,"Alias: "),p=W(te,"B",{class:!0});var le=R(p);f=Be(le,c),le.forEach(M),te.forEach(M),X.forEach(M),Q.forEach(M),d=Ae(z),J&&J.l(z),z.forEach(M),b=Ae(H),v=W(H,"BUTTON",{class:!0});var be=R(v);m=Be(be,"Save"),be.forEach(M),H.forEach(M),D=Ae(V),B=W(V,"UL",{class:!0});var we=R(B);j&&j.l(we),w=Ae(we),C=W(we,"LI",{class:!0});var Oe=R(C);F=W(Oe,"INPUT",{type:!0,placeholder:!0,class:!0}),Oe.forEach(M),we.forEach(M),k=Ae(V),O=W(V,"DIV",{class:!0});var Pe=R(O);A=W(Pe,"BUTTON",{class:!0});var Te=R(A);x=Be(Te,"Delete"),Te.forEach(M),Pe.forEach(M),this.h()},h(){S(n,"type","text"),S(n,"placeholder","Name"),S(n,"class","input input-bordered input-sm w-full max-w-xs"),S(p,"class","text-white cursor-copy"),S(s,"class","label-text"),S(o,"class","label"),S(a,"class","tooltip tooltip-primary tooltip-bottom"),S(a,"data-tip","Use in prompts or directives to get random slot."),S(r,"class","flex flex-col w-full pr-2 "),S(v,"class","btn btn-sm btn-primary"),Qe(v,"btn-disabled",!X0(t[1])||(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1])),S(e,"class","w-full p-2 flex justify-between"),S(F,"type","text"),S(F,"placeholder","Add slot"),S(F,"class","input input-bordered input-sm w-full italic"),S(C,"class","p-1"),S(B,"class","px-4 py-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block"),S(A,"class","btn btn-sm btn-error ml-4"),S(O,"class","w-full p-2 h-12 flex justify-between")},m(V,H){se(V,e,H),T(e,r),T(r,n),nn(n,t[1]),T(r,i),T(r,a),T(a,o),T(o,s),T(s,l),T(s,p),T(p,f),T(r,d),J&&J.m(r,null),T(e,b),T(e,v),T(v,m),se(V,D,H),se(V,B,H),j&&j.m(B,null),T(B,w),T(B,C),T(C,F),nn(F,t[2]),se(V,k,H),se(V,O,H),T(O,A),T(A,x),U||(K=[_e(n,"input",t[11]),_e(p,"click",t[12]),_e(v,"click",t[6]),_e(F,"input",t[14]),_e(F,"input",t[15]),_e(A,"click",t[7])],U=!0)},p(V,H){H&2&&n.value!==V[1]&&nn(n,V[1]),H&2&&c!==(c=js(V[1])+"")&&hr(f,c),H&11&&(g=(V[0]==="new"||V[3]&&V[3].name!==V[1])&&!V[5](V[1])),g?J||(J=Tp(),J.c(),J.m(r,null)):J&&(J.d(1),J=null),H&43&&Qe(v,"btn-disabled",!X0(V[1])||(V[0]==="new"||V[3]&&V[3].name!==V[1])&&!V[5](V[1])),V[3]?j?j.p(V,H):(j=Ip(V),j.c(),j.m(B,w)):j&&(j.d(1),j=null),H&4&&F.value!==V[2]&&nn(F,V[2])},d(V){V&&M(e),J&&J.d(),V&&M(D),V&&M(B),j&&j.d(),V&&M(k),V&&M(O),U=!1,zt(K)}}}function Tp(t){let e,r,n;return{c(){e=q("label"),r=q("span"),n=Se("Name In Use"),this.h()},l(i){e=W(i,"LABEL",{class:!0});var a=R(e);r=W(a,"SPAN",{class:!0});var o=R(r);n=Be(o,"Name In Use"),o.forEach(M),a.forEach(M),this.h()},h(){S(r,"class","label-text text-orange-300"),S(e,"class","label")},m(i,a){se(i,e,a),T(e,r),T(r,n)},d(i){i&&M(e)}}}function Ip(t){let e=[],r=new Map,n,i=t[3].values;const a=o=>o[19];for(let o=0;o<i.length;o+=1){let s=Op(t,i,o),l=a(s);r.set(l,e[o]=xp(l,s))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();n=Ft()},l(o){for(let s=0;s<e.length;s+=1)e[s].l(o);n=Ft()},m(o,s){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(o,s);se(o,n,s)},p(o,s){s&264&&(i=o[3].values,e=Un(e,s,a,1,o,i,r,n.parentNode,Jn,xp,n,Op))},d(o){for(let s=0;s<e.length;s+=1)e[s].d(o);o&&M(n)}}}function xp(t,e){let r,n,i,a,o,s;function l(...p){return e[13](e[19],...p)}return{key:t,first:null,c(){r=q("li"),n=q("input"),a=Ee(),this.h()},l(p){r=W(p,"LI",{class:!0});var c=R(r);n=W(c,"INPUT",{type:!0,placeholder:!0,class:!0}),a=Ae(c),c.forEach(M),this.h()},h(){n.value=i=e[17],S(n,"type","text"),S(n,"placeholder",""),S(n,"class","input input-bordered input-sm w-full"),S(r,"class","p-1"),this.first=r},m(p,c){se(p,r,c),T(r,n),T(r,a),o||(s=_e(n,"input",l),o=!0)},p(p,c){e=p,c&8&&i!==(i=e[17])&&n.value!==i&&(n.value=i)},d(p){p&&M(r),o=!1,s()}}}function V7(t){let e,r,n,i,a,o,s,l,p,c,f,d=[],g=new Map,b,v,m,D,B,w,C=Object.entries(t[4]);const F=O=>O[20];for(let O=0;O<C.length;O+=1){let A=Mp(t,C,O),x=F(A);g.set(x,d[O]=Pp(x,A))}let k=t[0]&&kp(t);return{c(){e=q("div"),r=q("div"),n=q("div"),i=q("label"),a=q("span"),o=Se("Edit Slots"),s=Ee(),l=q("select"),p=q("option"),c=Se("Pick one");for(let O=0;O<d.length;O+=1)d[O].c();b=q("option"),v=Se("New"),D=Ee(),k&&k.c(),this.h()},l(O){e=W(O,"DIV",{class:!0});var A=R(e);r=W(A,"DIV",{class:!0});var x=R(r);n=W(x,"DIV",{class:!0});var U=R(n);i=W(U,"LABEL",{class:!0});var K=R(i);a=W(K,"SPAN",{class:!0});var J=R(a);o=Be(J,"Edit Slots"),J.forEach(M),K.forEach(M),s=Ae(U),l=W(U,"SELECT",{class:!0});var j=R(l);p=W(j,"OPTION",{});var V=R(p);c=Be(V,"Pick one"),V.forEach(M);for(let z=0;z<d.length;z+=1)d[z].l(j);b=W(j,"OPTION",{});var H=R(b);v=Be(H,"New"),H.forEach(M),j.forEach(M),U.forEach(M),x.forEach(M),D=Ae(A),k&&k.l(A),A.forEach(M),this.h()},h(){S(a,"class","label-text"),S(i,"class","label"),p.disabled=!0,p.selected=f=t[0]===null,p.__value="Pick one",p.value=p.__value,b.__value="new",b.value=b.__value,b.selected=m=t[0]==="new",S(l,"class","select select-bordered"),t[0]===void 0&&Ni(()=>t[10].call(l)),S(n,"class","form-control w-full max-w-xs mb-4"),S(r,"class","flex justify-center"),S(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(O,A){se(O,e,A),T(e,r),T(r,n),T(n,i),T(i,a),T(a,o),T(n,s),T(n,l),T(l,p),T(p,c);for(let x=0;x<d.length;x+=1)d[x]&&d[x].m(l,null);T(l,b),T(b,v),ki(l,t[0],!0),T(e,D),k&&k.m(e,null),B||(w=_e(l,"change",t[10]),B=!0)},p(O,[A]){A&17&&f!==(f=O[0]===null)&&(p.selected=f),A&17&&(C=Object.entries(O[4]),d=Un(d,A,F,1,O,C,g,l,Jn,Pp,b,Mp)),A&17&&m!==(m=O[0]==="new")&&(b.selected=m),A&17&&ki(l,O[0]),O[0]?k?k.p(O,A):(k=kp(O),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},i:Me,o:Me,d(O){O&&M(e);for(let A=0;A<d.length;A+=1)d[A].d();k&&k.d(),B=!1,w()}}}function j7(t,e,r){let n;Ge(t,Qi,C=>r(4,n=C));let i=null,a="",o="",s=null;function l(C){r(3,s=C&&C!=="new"?{...n[C]}:C==="new"?{name:"New Slot Set",values:[]}:null),r(1,a=s?s.name:"")}function p(C){return Object.values(n).every(k=>k.name!==C)}function c(){if(s)if(i&&i!=="new")Qi.update(i,{...s,name:a});else{if(!p()){alert("Name already in use");return}const F=_o();Qi.update(F,{...s,name:a}),r(0,i=F)}}function f(){Qi.delete(i),r(1,a=""),r(2,o=""),r(0,i=null),r(3,s=null)}const d=Xs((C,F)=>{if(!s||!i)return;const k=[...s.values];F.length===0?k.splice(C,1):k[C]=F,r(3,s.values=k,s),i!=="new"&&Qi.update(i,s)},1e3),g=Xs(C=>{if(!s||!i)return;const F=[...s.values];C.length>0&&(F.push(C),r(3,s.values=F,s),r(2,o=""),i!=="new"&&Qi.update(i,s))},1e3);function b(){i=fy(this),r(0,i)}function v(){a=this.value,r(1,a)}const m=()=>navigator.clipboard.writeText(js(a)),D=(C,F)=>d(C,F.target.value);function B(){o=this.value,r(2,o)}const w=C=>g(C.target.value);return t.$$.update=()=>{t.$$.dirty&1&&l(i)},[i,a,o,s,n,p,c,f,d,g,b,v,m,D,B,w]}class z7 extends Xe{constructor(e){super(),et(this,e,j7,V7,tt,{})}}function q7(t){let e,r;return e=new L7({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function W7(t){let e,r;return e=new z7({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function H7(t){let e,r;return e=new P7({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function $7(t){let e,r;return e=new n7({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function G7(t){let e,r;return e=new e7({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(fe(e.$$.fragment,n),r=!0)},o(n){ve(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function K7(t){let e,r,n,i,a,o,s,l,p,c,f,d,g,b,v,m,D,B,w,C,F,k,O,A,x,U,K,J;F=new U7({});const j=[G7,$7,H7,W7,q7],V=[];function H(z,Q){return z[0]==="select"?0:z[0]==="edit"?1:z[0]==="generate"?2:z[0]==="slots"?3:z[0]==="settings"?4:-1}return~(A=H(t))&&(x=V[A]=j[A](t)),{c(){e=q("div"),r=q("div"),n=q("div"),i=q("button"),a=Se("Select"),s=Ee(),l=q("button"),p=Se("Edit"),f=Ee(),d=q("button"),g=Se("Generate"),v=Ee(),m=q("button"),D=Se("Slots"),w=Ee(),C=q("button"),Ve(F.$$.fragment),O=Ee(),x&&x.c(),this.h()},l(z){e=W(z,"DIV",{class:!0});var Q=R(e);r=W(Q,"DIV",{class:!0});var X=R(r);n=W(X,"DIV",{class:!0});var te=R(n);i=W(te,"BUTTON",{class:!0});var le=R(i);a=Be(le,"Select"),le.forEach(M),s=Ae(te),l=W(te,"BUTTON",{class:!0});var be=R(l);p=Be(be,"Edit"),be.forEach(M),f=Ae(te),d=W(te,"BUTTON",{class:!0});var we=R(d);g=Be(we,"Generate"),we.forEach(M),v=Ae(te),m=W(te,"BUTTON",{class:!0});var Oe=R(m);D=Be(Oe,"Slots"),Oe.forEach(M),w=Ae(te),C=W(te,"BUTTON",{class:!0});var Pe=R(C);je(F.$$.fragment,Pe),Pe.forEach(M),te.forEach(M),O=Ae(X),x&&x.l(X),X.forEach(M),Q.forEach(M),this.h()},h(){S(i,"class",o=t[0]==="select"?"btn btn-active":"btn"),S(l,"class",c=t[0]==="edit"?"btn btn-active":"btn"),S(d,"class",b=t[0]==="generate"?"btn btn-active":"btn"),S(m,"class",B=t[0]==="slots"?"btn btn-active":"btn"),S(C,"class",k=t[0]==="settings"?"btn btn-active":"btn"),S(n,"class","btn-group btn-group-vertical sm:btn-group-horizontal bg-base-100 w-full flex justify-center p-2"),S(r,"class","h-screen overflow-y-auto flex flex-col"),S(e,"class","max-w-md w-1/2 h-screen")},m(z,Q){se(z,e,Q),T(e,r),T(r,n),T(n,i),T(i,a),T(n,s),T(n,l),T(l,p),T(n,f),T(n,d),T(d,g),T(n,v),T(n,m),T(m,D),T(n,w),T(n,C),ze(F,C,null),T(r,O),~A&&V[A].m(r,null),U=!0,K||(J=[_e(i,"click",t[2]),_e(l,"click",t[3]),_e(d,"click",t[4]),_e(m,"click",t[5]),_e(C,"click",t[6])],K=!0)},p(z,[Q]){(!U||Q&1&&o!==(o=z[0]==="select"?"btn btn-active":"btn"))&&S(i,"class",o),(!U||Q&1&&c!==(c=z[0]==="edit"?"btn btn-active":"btn"))&&S(l,"class",c),(!U||Q&1&&b!==(b=z[0]==="generate"?"btn btn-active":"btn"))&&S(d,"class",b),(!U||Q&1&&B!==(B=z[0]==="slots"?"btn btn-active":"btn"))&&S(m,"class",B),(!U||Q&1&&k!==(k=z[0]==="settings"?"btn btn-active":"btn"))&&S(C,"class",k);let X=A;A=H(z),A!==X&&(x&&(ar(),ve(V[X],1,1,()=>{V[X]=null}),ur()),~A?(x=V[A],x||(x=V[A]=j[A](z),x.c()),fe(x,1),x.m(r,null)):x=null)},i(z){U||(fe(F.$$.fragment,z),fe(x),U=!0)},o(z){ve(F.$$.fragment,z),ve(x),U=!1},d(z){z&&M(e),qe(F),~A&&V[A].d(),K=!1,zt(J)}}}function Y7(t,e,r){let n;Ge(t,pi,c=>r(0,n=c));function i(c){pi.update(c)}const a=()=>i("select"),o=()=>i("edit"),s=()=>i("generate"),l=()=>i("slots"),p=()=>i("settings");return t.$$.update=()=>{t.$$.dirty&1&&(n||pi.update("select"))},[n,i,a,o,s,l,p]}class Z7 extends Xe{constructor(e){super(),et(this,e,Y7,K7,tt,{})}}function J7(t){let e,r;return{c(){e=q("p"),r=Se("Loading..."),this.h()},l(n){e=W(n,"P",{class:!0});var i=R(e);r=Be(i,"Loading..."),i.forEach(M),this.h()},h(){S(e,"class","text-lg")},m(n,i){se(n,e,i),T(e,r)},i:Me,o:Me,d(n){n&&M(e)}}}function Q7(t){let e,r;return{c(){e=q("p"),r=Se("This tool is not optimized for small screens or mobile devices."),this.h()},l(n){e=W(n,"P",{class:!0});var i=R(e);r=Be(i,"This tool is not optimized for small screens or mobile devices."),i.forEach(M),this.h()},h(){S(e,"class","text-lg")},m(n,i){se(n,e,i),T(e,r)},i:Me,o:Me,d(n){n&&M(e)}}}function X7(t){let e,r,n,i;return e=new Z7({}),n=new K8({}),{c(){Ve(e.$$.fragment),r=Ee(),Ve(n.$$.fragment)},l(a){je(e.$$.fragment,a),r=Ae(a),je(n.$$.fragment,a)},m(a,o){ze(e,a,o),se(a,r,o),ze(n,a,o),i=!0},i(a){i||(fe(e.$$.fragment,a),fe(n.$$.fragment,a),i=!0)},o(a){ve(e.$$.fragment,a),ve(n.$$.fragment,a),i=!1},d(a){qe(e,a),a&&M(r),qe(n,a)}}}function e4(t){let e,r,n,i,a,o;Ni(t[2]);const s=[X7,Q7,J7],l=[];function p(c,f){return c[0]&&c[1]&&c[0]>1024&&c[1]>800?0:c[0]&&c[1]?1:2}return e=p(t),r=l[e]=s[e](t),{c(){r.c(),n=Ft()},l(c){r.l(c),n=Ft()},m(c,f){l[e].m(c,f),se(c,n,f),i=!0,a||(o=_e(window,"resize",t[2]),a=!0)},p(c,[f]){let d=e;e=p(c),e!==d&&(ar(),ve(l[d],1,1,()=>{l[d]=null}),ur(),r=l[e],r||(r=l[e]=s[e](c),r.c()),fe(r,1),r.m(n.parentNode,n))},i(c){i||(fe(r),i=!0)},o(c){ve(r),i=!1},d(c){l[e].d(c),c&&M(n),a=!1,o()}}}function t4(t,e,r){let n=null,i=null;function a(){r(0,n=window.innerWidth),r(1,i=window.innerHeight)}return[n,i,a]}class i4 extends Xe{constructor(e){super(),et(this,e,t4,e4,tt,{})}}export{i4 as default};
