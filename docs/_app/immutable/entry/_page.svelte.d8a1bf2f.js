import{J as Wt,S as Rt,i as Lt,s as Ut,K as Ft,L as St,m as ie,h as V,n as x,p as Qt,b as Ce,H as Te,M as Ne,N as Lr,k as se,q as $e,l as oe,r as Xe,G as K,u as Mn,a as Ke,c as Ye,g as xe,v as mn,d as Le,f as _n,I as Nt,y as ht,e as Zt,z as dt,A as pt,B as vt,O as rf,P as Cs,Q as Fs,R as Ai,T as Hb,U as Qo,V as Fi,W as Sd,o as Gb,X as wi,Y as Ss,Z as mu,_ as pu}from"../chunks/index.4b6ced97.js";import{d as Pn,w as xn}from"../chunks/index.99b0775d.js";function Kb(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const u in n)if(u!=="default"&&!(u in e)){const a=Object.getOwnPropertyDescriptor(n,u);a&&Object.defineProperty(e,u,a.get?a:{enumerable:!0,get:()=>n[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function Nl(){return Nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nl.apply(this,arguments)}var Bd={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function er(e){return typeof e=="number"}function gn(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function Od(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function Md(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function Pd(e){return e&&e.constructor.prototype.isUnit===!0||!1}function Vn(e){return typeof e=="string"}var Xt=Array.isArray;function Rr(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function Ja(e){return Array.isArray(e)||Rr(e)}function Yb(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function Zb(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function $b(e){return e&&e.constructor.prototype.isRange===!0||!1}function nf(e){return e&&e.constructor.prototype.isIndex===!0||!1}function Xb(e){return typeof e=="boolean"}function Jb(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function Qb(e){return e&&e.constructor.prototype.isHelp===!0||!1}function ey(e){return typeof e=="function"}function ty(e){return e instanceof Date}function ry(e){return e instanceof RegExp}function ny(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!Od(e)&&!Md(e))}function iy(e){return e===null}function xd(e){return e===void 0}function uy(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function ay(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function sy(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function oy(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function ly(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function fy(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function cy(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function hy(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function dy(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function py(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function vy(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function gy(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function my(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function _y(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function Dy(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function by(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function yy(e){return e&&e.constructor.prototype.isChain===!0||!1}function $u(e){var t=typeof e;return t==="object"?e===null?"null":gn(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function br(e){var t=typeof e;if(t==="number"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(r){return br(r)});if(e instanceof Date)return new Date(e.valueOf());if(gn(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return Ay(e,br)}function Ay(e,t){var r={};for(var n in e)Xu(e,n)&&(r[n]=t(e[n]));return r}function wy(e,t){for(var r in t)Xu(t,r)&&(e[r]=t[r]);return e}function Qa(e,t){var r,n,u;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(n=0,u=e.length;n<u;n++)if(!Qa(e[n],t[n]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(r in e)if(!(r in t)||!Qa(e[r],t[r]))return!1;for(r in t)if(!(r in e))return!1;return!0}else return e===t}}function Xu(e,t){return e&&Object.hasOwnProperty.call(e,t)}function Ey(e,t){for(var r={},n=0;n<t.length;n++){var u=t[n],a=e[u];a!==void 0&&(r[u]=a)}return r}var Cy=["Matrix","Array"],Fy=["number","BigNumber","Fraction"],Bs=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Bd)};Nl(Bs,Bd,{MATRIX_OPTIONS:Cy,NUMBER_OPTIONS:Fy});function Sn(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Sy(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,u=function(){};return{s:u,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(p){throw p},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,l=!1,o;return{s:function(){r=r.call(e)},n:function(){var p=r.next();return a=p.done,p},e:function(p){l=!0,o=p},f:function(){try{!a&&r.return!=null&&r.return()}finally{if(l)throw o}}}}function Sy(e,t){if(e){if(typeof e=="string")return Nh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nh(e,t)}}function Nh(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fu(e){return fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fu(e)}function kh(){return!0}function pn(){return!1}function su(){}var Rh="Argument is not a typed-function.";function Td(){function e(L){return fu(L)==="object"&&L!==null&&L.constructor===Object}var t=[{name:"number",test:function(j){return typeof j=="number"}},{name:"string",test:function(j){return typeof j=="string"}},{name:"boolean",test:function(j){return typeof j=="boolean"}},{name:"Function",test:function(j){return typeof j=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(j){return j instanceof Date}},{name:"RegExp",test:function(j){return j instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(j){return j===null}},{name:"undefined",test:function(j){return j===void 0}}],r={name:"any",test:kh,isAny:!0},n,u,a=0,l={createCount:0};function o(L){var j=n.get(L);if(j)return j;var Z='Unknown type "'+L+'"',le=L.toLowerCase(),ne,de=Sn(u),ue;try{for(de.s();!(ue=de.n()).done;)if(ne=ue.value,ne.toLowerCase()===le){Z+='. Did you mean "'+ne+'" ?';break}}catch(fe){de.e(fe)}finally{de.f()}throw new TypeError(Z)}function c(L){for(var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",Z=j?o(j).index:u.length,le=[],ne=0;ne<L.length;++ne){if(!L[ne]||typeof L[ne].name!="string"||typeof L[ne].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var de=L[ne].name;if(n.has(de))throw new TypeError('Duplicate type name "'+de+'"');le.push(de),n.set(de,{name:de,test:L[ne].test,isAny:L[ne].isAny,index:Z+ne,conversionsTo:[]})}var ue=u.slice(Z);u=u.slice(0,Z).concat(le).concat(ue);for(var fe=Z+le.length;fe<u.length;++fe)n.get(u[fe]).index=fe}function p(){n=new Map,u=[],a=0,c([r],!1)}p(),c(t);function f(){var L,j=Sn(u),Z;try{for(j.s();!(Z=j.n()).done;)L=Z.value,n.get(L).conversionsTo=[]}catch(le){j.e(le)}finally{j.f()}a=0}function h(L){var j=u.filter(function(Z){var le=n.get(Z);return!le.isAny&&le.test(L)});return j.length?j:["any"]}function d(L){return L&&typeof L=="function"&&"_typedFunctionData"in L}function m(L,j,Z){if(!d(L))throw new TypeError(Rh);var le=Z&&Z.exact,ne=Array.isArray(j)?j.join(","):j,de=B(ne),ue=_(de);if(!le||ue in L.signatures){var fe=L._typedFunctionData.signatureMap.get(ue);if(fe)return fe}var ye=de.length,Oe;if(le){Oe=[];var je;for(je in L.signatures)Oe.push(L._typedFunctionData.signatureMap.get(je))}else Oe=L._typedFunctionData.signatures;for(var Ee=0;Ee<ye;++Ee){var Vt=de[Ee],Bt=[],Ht=void 0,jt=Sn(Oe),ir;try{for(jt.s();!(ir=jt.n()).done;){Ht=ir.value;var qt=I(Ht.params,Ee);if(!(!qt||Vt.restParam&&!qt.restParam)){if(!qt.hasAny){var gr=function(){var hr=w(qt);if(Vt.types.some(function(yn){return!hr.has(yn.name)}))return"continue"}();if(gr==="continue")continue}Bt.push(Ht)}}}catch(hr){jt.e(hr)}finally{jt.f()}if(Oe=Bt,Oe.length===0)break}var lr,fr=Sn(Oe),rn;try{for(fr.s();!(rn=fr.n()).done;)if(lr=rn.value,lr.params.length<=ye)return lr}catch(hr){fr.e(hr)}finally{fr.f()}throw new TypeError("Signature not found (signature: "+(L.name||"unnamed")+"("+_(de,", ")+"))")}function y(L,j,Z){return m(L,j,Z).implementation}function g(L,j){var Z=o(j);if(Z.test(L))return L;var le=Z.conversionsTo;if(le.length===0)throw new Error("There are no conversions to "+j+" defined.");for(var ne=0;ne<le.length;ne++){var de=o(le[ne].from);if(de.test(L))return le[ne].convert(L)}throw new Error("Cannot convert "+L+" to "+j)}function _(L){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return L.map(function(Z){return Z.name}).join(j)}function b(L){var j=L.indexOf("...")===0,Z=j?L.length>3?L.slice(3):"any":L,le=Z.split("|").map(function(fe){return o(fe.trim())}),ne=!1,de=j?"...":"",ue=le.map(function(fe){return ne=fe.isAny||ne,de+=fe.name+"|",{name:fe.name,typeIndex:fe.index,test:fe.test,isAny:fe.isAny,conversion:null,conversionIndex:-1}});return{types:ue,name:de.slice(0,-1),hasAny:ne,hasConversion:!1,restParam:j}}function C(L){var j=L.types.map(function(ue){return ue.name}),Z=re(j),le=L.hasAny,ne=L.name,de=Z.map(function(ue){var fe=o(ue.from);return le=fe.isAny||le,ne+="|"+ue.from,{name:ue.from,typeIndex:fe.index,test:fe.test,isAny:fe.isAny,conversion:ue,conversionIndex:ue.index}});return{types:L.types.concat(de),name:ne,hasAny:le,hasConversion:de.length>0,restParam:L.restParam}}function w(L){return L.typeSet||(L.typeSet=new Set,L.types.forEach(function(j){return L.typeSet.add(j.name)})),L.typeSet}function B(L){var j=[];if(typeof L!="string")throw new TypeError("Signatures must be strings");var Z=L.trim();if(Z==="")return j;for(var le=Z.split(","),ne=0;ne<le.length;++ne){var de=b(le[ne].trim());if(de.restParam&&ne!==le.length-1)throw new SyntaxError('Unexpected rest parameter "'+le[ne]+'": only allowed for the last parameter');if(de.types.length===0)return null;j.push(de)}return j}function F(L){var j=Me(L);return j?j.restParam:!1}function O(L){if(!L||L.types.length===0)return kh;if(L.types.length===1)return o(L.types[0].name).test;if(L.types.length===2){var j=o(L.types[0].name).test,Z=o(L.types[1].name).test;return function(de){return j(de)||Z(de)}}else{var le=L.types.map(function(ne){return o(ne.name).test});return function(de){for(var ue=0;ue<le.length;ue++)if(le[ue](de))return!0;return!1}}}function P(L){var j,Z,le;if(F(L)){j=We(L).map(O);var ne=j.length,de=O(Me(L)),ue=function(ye){for(var Oe=ne;Oe<ye.length;Oe++)if(!de(ye[Oe]))return!1;return!0};return function(ye){for(var Oe=0;Oe<j.length;Oe++)if(!j[Oe](ye[Oe]))return!1;return ue(ye)&&ye.length>=ne+1}}else return L.length===0?function(ye){return ye.length===0}:L.length===1?(Z=O(L[0]),function(ye){return Z(ye[0])&&ye.length===1}):L.length===2?(Z=O(L[0]),le=O(L[1]),function(ye){return Z(ye[0])&&le(ye[1])&&ye.length===2}):(j=L.map(O),function(ye){for(var Oe=0;Oe<j.length;Oe++)if(!j[Oe](ye[Oe]))return!1;return ye.length===j.length})}function I(L,j){return j<L.length?L[j]:F(L)?Me(L):null}function N(L,j){var Z=I(L,j);return Z?w(Z):new Set}function H(L){return L.conversion===null||L.conversion===void 0}function W(L,j){var Z=new Set;return L.forEach(function(le){var ne=N(le.params,j),de,ue=Sn(ne),fe;try{for(ue.s();!(fe=ue.n()).done;)de=fe.value,Z.add(de)}catch(ye){ue.e(ye)}finally{ue.f()}}),Z.has("any")?["any"]:Array.from(Z)}function q(L,j,Z){var le,ne,de=L||"unnamed",ue=Z,fe,ye=function(){var jt=[];if(ue.forEach(function(qt){var gr=I(qt.params,fe),lr=O(gr);(fe<qt.params.length||F(qt.params))&&lr(j[fe])&&jt.push(qt)}),jt.length===0){if(ne=W(ue,fe),ne.length>0){var ir=h(j[fe]);return le=new TypeError("Unexpected type of argument in function "+de+" (expected: "+ne.join(" or ")+", actual: "+ir.join(" | ")+", index: "+fe+")"),le.data={category:"wrongType",fn:de,index:fe,actual:ir,expected:ne},{v:le}}}else ue=jt};for(fe=0;fe<j.length;fe++){var Oe=ye();if(fu(Oe)==="object")return Oe.v}var je=ue.map(function(Ht){return F(Ht.params)?1/0:Ht.params.length});if(j.length<Math.min.apply(null,je))return ne=W(ue,fe),le=new TypeError("Too few arguments in function "+de+" (expected: "+ne.join(" or ")+", index: "+j.length+")"),le.data={category:"tooFewArgs",fn:de,index:j.length,expected:ne},le;var Ee=Math.max.apply(null,je);if(j.length>Ee)return le=new TypeError("Too many arguments in function "+de+" (expected: "+Ee+", actual: "+j.length+")"),le.data={category:"tooManyArgs",fn:de,index:j.length,expectedLength:Ee},le;for(var Vt=[],Bt=0;Bt<j.length;++Bt)Vt.push(h(j[Bt]).join("|"));return le=new TypeError('Arguments of type "'+Vt.join(", ")+'" do not match any of the defined signatures of function '+de+"."),le.data={category:"mismatch",actual:Vt},le}function J(L){for(var j=u.length+1,Z=0;Z<L.types.length;Z++)H(L.types[Z])&&(j=Math.min(j,L.types[Z].typeIndex));return j}function Y(L){for(var j=a+1,Z=0;Z<L.types.length;Z++)H(L.types[Z])||(j=Math.min(j,L.types[Z].conversionIndex));return j}function R(L,j){if(L.hasAny){if(!j.hasAny)return 1}else if(j.hasAny)return-1;if(L.restParam){if(!j.restParam)return 1}else if(j.restParam)return-1;if(L.hasConversion){if(!j.hasConversion)return 1}else if(j.hasConversion)return-1;var Z=J(L)-J(j);if(Z<0)return-1;if(Z>0)return 1;var le=Y(L)-Y(j);return le<0?-1:le>0?1:0}function z(L,j){var Z=L.params,le=j.params,ne=Me(Z),de=Me(le),ue=F(Z),fe=F(le);if(ue&&ne.hasAny){if(!fe||!de.hasAny)return 1}else if(fe&&de.hasAny)return-1;var ye=0,Oe=0,je,Ee=Sn(Z),Vt;try{for(Ee.s();!(Vt=Ee.n()).done;)je=Vt.value,je.hasAny&&++ye,je.hasConversion&&++Oe}catch(Tn){Ee.e(Tn)}finally{Ee.f()}var Bt=0,Ht=0,jt=Sn(le),ir;try{for(jt.s();!(ir=jt.n()).done;)je=ir.value,je.hasAny&&++Bt,je.hasConversion&&++Ht}catch(Tn){jt.e(Tn)}finally{jt.f()}if(ye!==Bt)return ye-Bt;if(ue&&ne.hasConversion){if(!fe||!de.hasConversion)return 1}else if(fe&&de.hasConversion)return-1;if(Oe!==Ht)return Oe-Ht;if(ue){if(!fe)return 1}else if(fe)return-1;var qt=(Z.length-le.length)*(ue?-1:1);if(qt!==0)return qt;for(var gr=[],lr=0,fr=0;fr<Z.length;++fr){var rn=R(Z[fr],le[fr]);gr.push(rn),lr+=rn}if(lr!==0)return lr;for(var hr,yn=0,Hn=gr;yn<Hn.length;yn++)if(hr=Hn[yn],hr!==0)return hr;return 0}function re(L){if(L.length===0)return[];var j=L.map(o);L.length>1&&j.sort(function(ye,Oe){return ye.index-Oe.index});var Z=j[0].conversionsTo;if(L.length===1)return Z;Z=Z.concat([]);for(var le=new Set(L),ne=1;ne<j.length;++ne){var de=void 0,ue=Sn(j[ne].conversionsTo),fe;try{for(ue.s();!(fe=ue.n()).done;)de=fe.value,le.has(de.from)||(Z.push(de),le.add(de.from))}catch(ye){ue.e(ye)}finally{ue.f()}}return Z}function Q(L,j){var Z=j;if(L.some(function(fe){return fe.hasConversion})){var le=F(L),ne=L.map(te);Z=function(){for(var ye=[],Oe=le?arguments.length-1:arguments.length,je=0;je<Oe;je++)ye[je]=ne[je](arguments[je]);return le&&(ye[Oe]=arguments[Oe].map(ne[Oe])),j.apply(this,ye)}}var de=Z;if(F(L)){var ue=L.length-1;de=function(){return Z.apply(this,qe(arguments,0,ue).concat([qe(arguments,ue)]))}}return de}function te(L){var j,Z,le,ne,de=[],ue=[];switch(L.types.forEach(function(fe){fe.conversion&&(de.push(o(fe.conversion.from).test),ue.push(fe.conversion.convert))}),ue.length){case 0:return function(ye){return ye};case 1:return j=de[0],le=ue[0],function(ye){return j(ye)?le(ye):ye};case 2:return j=de[0],Z=de[1],le=ue[0],ne=ue[1],function(ye){return j(ye)?le(ye):Z(ye)?ne(ye):ye};default:return function(ye){for(var Oe=0;Oe<ue.length;Oe++)if(de[Oe](ye))return ue[Oe](ye);return ye}}}function ve(L){function j(Z,le,ne){if(le<Z.length){var de=Z[le],ue=[];if(de.restParam){var fe=de.types.filter(H);fe.length<de.types.length&&ue.push({types:fe,name:"..."+fe.map(function(ye){return ye.name}).join("|"),hasAny:fe.some(function(ye){return ye.isAny}),hasConversion:!1,restParam:!0}),ue.push(de)}else ue=de.types.map(function(ye){return{types:[ye],name:ye.name,hasAny:ye.isAny,hasConversion:ye.conversion,restParam:!1}});return mt(ue,function(ye){return j(Z,le+1,ne.concat([ye]))})}else return[ne]}return j(L,0,[])}function me(L,j){for(var Z=Math.max(L.length,j.length),le=0;le<Z;le++){var ne=N(L,le),de=N(j,le),ue=!1,fe=void 0,ye=Sn(de),Oe;try{for(ye.s();!(Oe=ye.n()).done;)if(fe=Oe.value,ne.has(fe)){ue=!0;break}}catch(Ht){ye.e(Ht)}finally{ye.f()}if(!ue)return!1}var je=L.length,Ee=j.length,Vt=F(L),Bt=F(j);return Vt?Bt?je===Ee:Ee>=je:Bt?je>=Ee:je===Ee}function Fe(L){return L.map(function(j){return At(j)?yt(j.referToSelf.callback):Et(j)?He(j.referTo.references,j.referTo.callback):j})}function Ae(L,j,Z){var le=[],ne,de=Sn(L),ue;try{for(de.s();!(ue=de.n()).done;){ne=ue.value;var fe=Z[ne];if(typeof fe!="number")throw new TypeError('No definition for referenced signature "'+ne+'"');if(fe=j[fe],typeof fe!="function")return!1;le.push(fe)}}catch(ye){de.e(ye)}finally{de.f()}return le}function Ie(L,j,Z){for(var le=Fe(L),ne=new Array(le.length).fill(!1),de=!0;de;){de=!1;for(var ue=!0,fe=0;fe<le.length;++fe)if(!ne[fe]){var ye=le[fe];if(At(ye))le[fe]=ye.referToSelf.callback(Z),le[fe].referToSelf=ye.referToSelf,ne[fe]=!0,ue=!1;else if(Et(ye)){var Oe=Ae(ye.referTo.references,le,j);Oe?(le[fe]=ye.referTo.callback.apply(this,Oe),le[fe].referTo=ye.referTo,ne[fe]=!0,ue=!1):de=!0}}if(ue&&de)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return le}function Ue(L){var j=/\bthis(\(|\.signatures\b)/;Object.keys(L).forEach(function(Z){var le=L[Z];if(j.test(le.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Ve(L,j){if(l.createCount++,Object.keys(j).length===0)throw new SyntaxError("No signatures provided");l.warnAgainstDeprecatedThis&&Ue(j);var Z=[],le=[],ne={},de=[],ue,fe=function(){if(!Object.prototype.hasOwnProperty.call(j,ue))return"continue";var ur=B(ue);if(!ur)return"continue";Z.forEach(function(un){if(me(un,ur))throw new TypeError('Conflicting signatures "'+_(un)+'" and "'+_(ur)+'".')}),Z.push(ur);var Tr=le.length;le.push(j[ue]);var Pi=ur.map(C),Kn=void 0,kn=Sn(ve(Pi)),xi;try{for(kn.s();!(xi=kn.n()).done;){Kn=xi.value;var An=_(Kn);de.push({params:Kn,name:An,fn:Tr}),Kn.every(function(un){return!un.hasConversion})&&(ne[An]=Tr)}}catch(un){kn.e(un)}finally{kn.f()}};for(ue in j)var ye=fe();de.sort(z);var Oe=Ie(le,ne,Nn),je;for(je in ne)Object.prototype.hasOwnProperty.call(ne,je)&&(ne[je]=Oe[ne[je]]);for(var Ee=[],Vt=new Map,Bt=0,Ht=de;Bt<Ht.length;Bt++)je=Ht[Bt],Vt.has(je.name)||(je.fn=Oe[je.fn],Ee.push(je),Vt.set(je.name,je));for(var jt=Ee[0]&&Ee[0].params.length<=2&&!F(Ee[0].params),ir=Ee[1]&&Ee[1].params.length<=2&&!F(Ee[1].params),qt=Ee[2]&&Ee[2].params.length<=2&&!F(Ee[2].params),gr=Ee[3]&&Ee[3].params.length<=2&&!F(Ee[3].params),lr=Ee[4]&&Ee[4].params.length<=2&&!F(Ee[4].params),fr=Ee[5]&&Ee[5].params.length<=2&&!F(Ee[5].params),rn=jt&&ir&&qt&&gr&&lr&&fr,hr=0;hr<Ee.length;++hr)Ee[hr].test=P(Ee[hr].params);for(var yn=jt?O(Ee[0].params[0]):pn,Hn=ir?O(Ee[1].params[0]):pn,Tn=qt?O(Ee[2].params[0]):pn,In=gr?O(Ee[3].params[0]):pn,Wi=lr?O(Ee[4].params[0]):pn,Oi=fr?O(Ee[5].params[0]):pn,Du=jt?O(Ee[0].params[1]):pn,Ar=ir?O(Ee[1].params[1]):pn,tr=qt?O(Ee[2].params[1]):pn,bu=gr?O(Ee[3].params[1]):pn,ai=lr?O(Ee[4].params[1]):pn,nn=fr?O(Ee[5].params[1]):pn,Gn=0;Gn<Ee.length;++Gn)Ee[Gn].implementation=Q(Ee[Gn].params,Ee[Gn].fn);var Mi=jt?Ee[0].implementation:su,yu=ir?Ee[1].implementation:su,Au=qt?Ee[2].implementation:su,Hi=gr?Ee[3].implementation:su,wu=lr?Ee[4].implementation:su,Eu=fr?Ee[5].implementation:su,Cu=jt?Ee[0].params.length:-1,Fu=ir?Ee[1].params.length:-1,Su=qt?Ee[2].params.length:-1,Bu=gr?Ee[3].params.length:-1,si=lr?Ee[4].params.length:-1,Ou=fr?Ee[5].params.length:-1,oi=rn?6:0,Mu=Ee.length,Pu=Ee.map(function(mr){return mr.test}),xu=Ee.map(function(mr){return mr.implementation}),Gi=function(){for(var ur=oi;ur<Mu;ur++)if(Pu[ur](arguments))return xu[ur].apply(this,arguments);return l.onMismatch(L,arguments,Ee)};function Nn(mr,ur){return arguments.length===Cu&&yn(mr)&&Du(ur)?Mi.apply(this,arguments):arguments.length===Fu&&Hn(mr)&&Ar(ur)?yu.apply(this,arguments):arguments.length===Su&&Tn(mr)&&tr(ur)?Au.apply(this,arguments):arguments.length===Bu&&In(mr)&&bu(ur)?Hi.apply(this,arguments):arguments.length===si&&Wi(mr)&&ai(ur)?wu.apply(this,arguments):arguments.length===Ou&&Oi(mr)&&nn(ur)?Eu.apply(this,arguments):Gi.apply(this,arguments)}try{Object.defineProperty(Nn,"name",{value:L})}catch{}return Nn.signatures=ne,Nn._typedFunctionData={signatures:Ee,signatureMap:Vt},Nn}function tt(L,j,Z){throw q(L,j,Z)}function We(L){return qe(L,0,L.length-1)}function Me(L){return L[L.length-1]}function qe(L,j,Z){return Array.prototype.slice.call(L,j,Z)}function at(L,j){for(var Z=0;Z<L.length;Z++)if(j(L[Z]))return L[Z]}function mt(L,j){return Array.prototype.concat.apply([],L.map(j))}function et(){var L=We(arguments).map(function(Z){return _(B(Z))}),j=Me(arguments);if(typeof j!="function")throw new TypeError("Callback function expected as last argument");return He(L,j)}function He(L,j){return{referTo:{references:L,callback:j}}}function yt(L){if(typeof L!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:L}}}function Et(L){return L&&fu(L.referTo)==="object"&&Array.isArray(L.referTo.references)&&typeof L.referTo.callback=="function"}function At(L){return L&&fu(L.referToSelf)==="object"&&typeof L.referToSelf.callback=="function"}function we(L,j){if(!L)return j;if(j&&j!==L){var Z=new Error("Function names do not match (expected: "+L+", actual: "+j+")");throw Z.data={actual:j,expected:L},Z}return L}function be(L){var j;for(var Z in L)Object.prototype.hasOwnProperty.call(L,Z)&&(d(L[Z])||typeof L[Z].signature=="string")&&(j=we(j,L[Z].name));return j}function ke(L,j){var Z;for(Z in j)if(Object.prototype.hasOwnProperty.call(j,Z)){if(Z in L&&j[Z]!==L[Z]){var le=new Error('Signature "'+Z+'" is defined twice');throw le.data={signature:Z,sourceFunction:j[Z],destFunction:L[Z]},le}L[Z]=j[Z]}}var it=l;l=function(j){for(var Z=typeof j=="string",le=Z?1:0,ne=Z?j:"",de={},ue=le;ue<arguments.length;++ue){var fe=arguments[ue],ye={},Oe=void 0;if(typeof fe=="function"?(Oe=fe.name,typeof fe.signature=="string"?ye[fe.signature]=fe:d(fe)&&(ye=fe.signatures)):e(fe)&&(ye=fe,Z||(Oe=be(fe))),Object.keys(ye).length===0){var je=new TypeError("Argument to 'typed' at index "+ue+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw je.data={index:ue,argument:fe},je}Z||(ne=we(ne,Oe)),ke(de,ye)}return Ve(ne||"",de)},l.create=Td,l.createCount=it.createCount,l.onMismatch=tt,l.throwMismatchError=tt,l.createError=q,l.clear=p,l.clearConversions=f,l.addTypes=c,l._findType=o,l.referTo=et,l.referToSelf=yt,l.convert=g,l.findSignature=m,l.find=y,l.isTypedFunction=d,l.warnAgainstDeprecatedThis=!0,l.addType=function(L,j){var Z="any";j!==!1&&n.has("Object")&&(Z="Object"),l.addTypes([L],Z)};function _t(L){if(!L||typeof L.from!="string"||typeof L.to!="string"||typeof L.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(L.to===L.from)throw new SyntaxError('Illegal to define conversion from "'+L.from+'" to itself.')}return l.addConversion=function(L){_t(L);var j=o(L.to);if(j.conversionsTo.every(function(Z){return Z.from!==L.from}))j.conversionsTo.push({from:L.from,convert:L.convert,index:a++});else throw new Error('There is already a conversion from "'+L.from+'" to "'+j.name+'"')},l.addConversions=function(L){L.forEach(l.addConversion)},l.removeConversion=function(L){_t(L);var j=o(L.to),Z=at(j.conversionsTo,function(ne){return ne.from===L.from});if(!Z)throw new Error("Attempt to remove nonexistent conversion from "+L.from+" to "+L.to);if(Z.convert!==L.convert)throw new Error("Conversion to remove does not match existing conversion");var le=j.conversionsTo.indexOf(Z);j.conversionsTo.splice(le,1)},l.resolve=function(L,j){if(!d(L))throw new TypeError(Rh);for(var Z=L._typedFunctionData.signatures,le=0;le<Z.length;++le)if(Z[le].test(j))return Z[le];return null},l}const Lh=Td();function yr(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function el(e,t,r){var n={2:"0b",8:"0o",16:"0x"},u=n[t],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!yr(r))throw new Error("size must be an integer");if(e>2**(r-1)-1||e<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!yr(e))throw new Error("Value must be an integer");e<0&&(e=e+2**r),a="i".concat(r)}var l="";return e<0&&(e=-e,l="-"),"".concat(l).concat(u).concat(e.toString(t)).concat(a)}function kl(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var r="auto",n,u;if(t&&(t.notation&&(r=t.notation),er(t)?n=t:er(t.precision)&&(n=t.precision),t.wordSize&&(u=t.wordSize,typeof u!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Oy(e,n);case"exponential":return Id(e,n);case"engineering":return By(e,n);case"bin":return el(e,2,u);case"oct":return el(e,8,u);case"hex":return el(e,16,u);case"auto":return My(e,n,t&&t).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],l=arguments[4];return a!=="."?a+l:l});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Os(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var r=t[1],n=t[2],u=parseFloat(t[4]||"0"),a=n.indexOf(".");u+=a!==-1?a-1:n.length-1;var l=n.replace(".","").replace(/^0*/,function(o){return u-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return l.length===0&&(l.push(0),u++),{sign:r,coefficients:l,exponent:u}}function By(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=Os(e),n=Ms(r,t),u=n.exponent,a=n.coefficients,l=u%3===0?u:u<0?u-3-u%3:u-u%3;if(er(t))for(;t>a.length||u-l+1>a.length;)a.push(0);else for(var o=Math.abs(u-l)-(a.length-1),c=0;c<o;c++)a.push(0);for(var p=Math.abs(u-l),f=1;p>0;)f++,p--;var h=a.slice(f).join(""),d=er(t)&&h.length||h.match(/[1-9]/)?"."+h:"",m=a.slice(0,f).join("")+d+"e"+(u>=0?"+":"")+l.toString();return n.sign+m}function Oy(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=Os(e),n=typeof t=="number"?Ms(r,r.exponent+1+t):r,u=n.coefficients,a=n.exponent+1,l=a+(t||0);return u.length<l&&(u=u.concat(hu(l-u.length))),a<0&&(u=hu(-a+1).concat(u),a=1),a<u.length&&u.splice(a,0,a===0?"0.":"."),n.sign+u.join("")}function Id(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=Os(e),n=t?Ms(r,t):r,u=n.coefficients,a=n.exponent;u.length<t&&(u=u.concat(hu(t-u.length)));var l=u.shift();return n.sign+l+(u.length>0?"."+u.join(""):"")+"e"+(a>=0?"+":"")+a}function My(e,t,r){if(isNaN(e)||!isFinite(e))return String(e);var n=r&&r.lowerExp!==void 0?r.lowerExp:-3,u=r&&r.upperExp!==void 0?r.upperExp:5,a=Os(e),l=t?Ms(a,t):a;if(l.exponent<n||l.exponent>=u)return Id(e,t);var o=l.coefficients,c=l.exponent;o.length<t&&(o=o.concat(hu(t-o.length))),o=o.concat(hu(c-o.length+1+(o.length<t?t-o.length:0))),o=hu(-c).concat(o);var p=c>0?c:0;return p<o.length-1&&o.splice(p+1,0,"."),l.sign+o.join("")}function Ms(e,t){for(var r={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},n=r.coefficients;t<=0;)n.unshift(0),r.exponent++,t++;if(n.length>t){var u=n.splice(t,n.length-t);if(u[0]>=5){var a=t-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),r.exponent++,a++),a--,n[a]++}}return r}function hu(e){for(var t=[],r=0;r<e;r++)t.push(0);return t}function Py(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var xy=Number.EPSILON||2220446049250313e-31;function es(e,t,r){if(r==null)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var n=Math.abs(e-t);return n<xy?!0:n<=Math.max(Math.abs(e),Math.abs(t))*r}return!1}function tl(e,t,r){var n=e.constructor,u=new n(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!yr(r))throw new Error("size must be an integer");if(e.greaterThan(u.pow(r-1).sub(1))||e.lessThan(u.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(u.pow(r))),a="i".concat(r)}switch(t){case 2:return"".concat(e.toBinary()).concat(a);case 8:return"".concat(e.toOctal()).concat(a);case 16:return"".concat(e.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(t," not supported "))}}function Ty(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var r="auto",n,u;if(t!==void 0&&(t.notation&&(r=t.notation),typeof t=="number"?n=t:t.precision&&(n=t.precision),t.wordSize&&(u=t.wordSize,typeof u!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Ny(e,n);case"exponential":return Uh(e,n);case"engineering":return Iy(e,n);case"bin":return tl(e,2,u);case"oct":return tl(e,8,u);case"hex":return tl(e,16,u);case"auto":{var a=t&&t.lowerExp!==void 0?t.lowerExp:-3,l=t&&t.upperExp!==void 0?t.upperExp:5;if(e.isZero())return"0";var o,c=e.toSignificantDigits(n),p=c.e;return p>=a&&p<l?o=c.toFixed():o=Uh(e,n),o.replace(/((\.\d*?)(0+))($|e)/,function(){var f=arguments[2],h=arguments[4];return f!=="."?f+h:h})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Iy(e,t){var r=e.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,u=e.mul(Math.pow(10,-n)),a=u.toPrecision(t);return a.indexOf("e")!==-1&&(a=u.toString()),a+"e"+(r>=0?"+":"")+n.toString()}function Uh(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function Ny(e,t){return e.toFixed(t)}function zr(e,t){var r=ky(e,t);return t&&typeof t=="object"&&"truncate"in t&&r.length>t.truncate?r.substring(0,t.truncate-3)+"...":r}function ky(e,t){if(typeof e=="number")return kl(e,t);if(gn(e))return Ty(e,t);if(Ry(e))return!t||t.fraction!=="decimal"?e.s*e.n+"/"+e.d:e.toString();if(Array.isArray(e))return Nd(e,t);if(Vn(e))return'"'+e+'"';if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var r=Object.keys(e).map(n=>'"'+n+'": '+zr(e[n],t));return"{"+r.join(", ")+"}"}return String(e)}function Nd(e,t){if(Array.isArray(e)){for(var r="[",n=e.length,u=0;u<n;u++)u!==0&&(r+=", "),r+=Nd(e[u],t);return r+="]",r}else return zr(e,t)}function Ry(e){return e&&typeof e=="object"&&typeof e.s=="number"&&typeof e.n=="number"&&typeof e.d=="number"||!1}function Pt(e,t,r){if(!(this instanceof Pt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}Pt.prototype=new RangeError;Pt.prototype.constructor=RangeError;Pt.prototype.name="DimensionError";Pt.prototype.isDimensionError=!0;function zi(e,t,r){if(!(this instanceof zi))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}zi.prototype=new RangeError;zi.prototype.constructor=RangeError;zi.prototype.name="IndexError";zi.prototype.isIndexError=!0;function Ei(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function kd(e,t,r){var n,u=e.length;if(u!==t[r])throw new Pt(u,t[r]);if(r<t.length-1){var a=r+1;for(n=0;n<u;n++){var l=e[n];if(!Array.isArray(l))throw new Pt(t.length-1,t.length,"<");kd(e[n],t,a)}}else for(n=0;n<u;n++)if(Array.isArray(e[n]))throw new Pt(t.length+1,t.length,">")}function Vh(e,t){var r=t.length===0;if(r){if(Array.isArray(e))throw new Pt(e.length,0)}else kd(e,t,0)}function Jt(e,t){if(!er(e)||!yr(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new zi(e,t)}function jh(e,t,r){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(u){if(!er(u)||!yr(u)||u<0)throw new TypeError("Invalid size, must contain positive integers (size: "+zr(t)+")")});var n=r!==void 0?r:0;return Rl(e,t,0,n),e}function Rl(e,t,r,n){var u,a,l=e.length,o=t[r],c=Math.min(l,o);if(e.length=o,r<t.length-1){var p=r+1;for(u=0;u<c;u++)a=e[u],Array.isArray(a)||(a=[a],e[u]=a),Rl(a,t,p,n);for(u=c;u<o;u++)a=[],e[u]=a,Rl(a,t,p,n)}else{for(u=0;u<c;u++)for(;Array.isArray(e[u]);)e[u]=e[u][0];for(u=c;u<o;u++)e[u]=n}}function Ly(e,t){var r=Vy(e),n=r.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Pt(0,n,"!=");t=uf(t,n);var u=Rd(t);if(n!==u)throw new Pt(u,n,"!=");try{return Uy(r,t)}catch(a){throw a instanceof Pt?new Pt(u,n,"!="):a}}function uf(e,t){var r=Rd(e),n=e.slice(),u=-1,a=e.indexOf(u),l=e.indexOf(u,a+1)>=0;if(l)throw new Error("More than one wildcard in sizes");var o=a>=0,c=t%r===0;if(o)if(c)n[a]=-t/r;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-r);return n}function Rd(e){return e.reduce((t,r)=>t*r,1)}function Uy(e,t){for(var r=e,n,u=t.length-1;u>0;u--){var a=t[u];n=[];for(var l=r.length/a,o=0;o<l;o++)n.push(r.slice(o*a,(o+1)*a));r=n}return r}function Ld(e,t,r,n){var u=n||Ei(e);if(r)for(var a=0;a<r;a++)e=[e],u.unshift(1);for(e=Ud(e,t,0);u.length<t;)u.push(1);return e}function Ud(e,t,r){var n,u;if(Array.isArray(e)){var a=r+1;for(n=0,u=e.length;n<u;n++)e[n]=Ud(e[n],t,a)}else for(var l=r;l<t;l++)e=[e];return e}function Vy(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function r(n){Array.isArray(n)?n.forEach(r):t.push(n)}),t}function ts(e,t){for(var r,n=0,u=0;u<e.length;u++){var a=e[u],l=Array.isArray(a);if(u===0&&l&&(n=a.length),l&&a.length!==n)return;var o=l?ts(a,t):t(a);if(r===void 0)r=o;else if(r!==o)return"mixed"}return r}function Tt(e,t,r,n){function u(a){var l=Ey(a,t.map(zy));return jy(e,t,a),r(l)}return u.isFactory=!0,u.fn=e,u.dependencies=t.slice().sort(),n&&(u.meta=n),u}function jy(e,t,r){var n=t.filter(a=>!qy(a)).every(a=>r[a]!==void 0);if(!n){var u=t.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(u.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function qy(e){return e&&e[0]==="?"}function zy(e){return e&&e[0]==="?"?e.slice(1):e}function Wy(e,t){if(jd(e)&&Vd(e,t))return e[t];throw typeof e[t]=="function"&&Ky(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function Hy(e,t,r){if(jd(e)&&Vd(e,t))return e[t]=r,r;throw new Error('No access to property "'+t+'"')}function Gy(e,t){return t in e}function Vd(e,t){return!e||typeof e!="object"?!1:Xu(Yy,t)?!0:!(t in Object.prototype||t in Function.prototype)}function Ky(e,t){return e==null||typeof e[t]!="function"||Xu(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:Xu(Zy,t)?!0:!(t in Object.prototype||t in Function.prototype)}function jd(e){return typeof e=="object"&&e&&e.constructor===Object}var Yy={length:!0,name:!0},Zy={toString:!0,valueOf:!0,toLocaleString:!0};class $y{constructor(t){this.wrappedObject=t}keys(){return Object.keys(this.wrappedObject)}get(t){return Wy(this.wrappedObject,t)}set(t,r){return Hy(this.wrappedObject,t,r),this}has(t){return Gy(this.wrappedObject,t)}}function Xy(e){return e?e instanceof Map||e instanceof $y||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}var qd=function(){return qd=Lh.create,Lh},Jy=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Qy=Tt("typed",Jy,function(t){var{BigNumber:r,Complex:n,DenseMatrix:u,Fraction:a}=t,l=qd();return l.clear(),l.addTypes([{name:"number",test:er},{name:"Complex",test:Od},{name:"BigNumber",test:gn},{name:"Fraction",test:Md},{name:"Unit",test:Pd},{name:"identifier",test:o=>Vn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(o)},{name:"string",test:Vn},{name:"Chain",test:yy},{name:"Array",test:Xt},{name:"Matrix",test:Rr},{name:"DenseMatrix",test:Yb},{name:"SparseMatrix",test:Zb},{name:"Range",test:$b},{name:"Index",test:nf},{name:"boolean",test:Xb},{name:"ResultSet",test:Jb},{name:"Help",test:Qb},{name:"function",test:ey},{name:"Date",test:ty},{name:"RegExp",test:ry},{name:"null",test:iy},{name:"undefined",test:xd},{name:"AccessorNode",test:uy},{name:"ArrayNode",test:ay},{name:"AssignmentNode",test:sy},{name:"BlockNode",test:oy},{name:"ConditionalNode",test:ly},{name:"ConstantNode",test:fy},{name:"FunctionNode",test:hy},{name:"FunctionAssignmentNode",test:cy},{name:"IndexNode",test:dy},{name:"Node",test:py},{name:"ObjectNode",test:vy},{name:"OperatorNode",test:gy},{name:"ParenthesisNode",test:my},{name:"RangeNode",test:_y},{name:"RelationalNode",test:Dy},{name:"SymbolNode",test:by},{name:"Map",test:Xy},{name:"Object",test:ny}]),l.addConversions([{from:"number",to:"BigNumber",convert:function(c){if(r||rl(c),Py(c)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+c+"). Use function bignumber(x) to convert to BigNumber.");return new r(c)}},{from:"number",to:"Complex",convert:function(c){return n||qa(c),new n(c,0)}},{from:"BigNumber",to:"Complex",convert:function(c){return n||qa(c),new n(c.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(c){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(c){return n||qa(c),new n(c.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(c){a||nl(c);var p=new a(c);if(p.valueOf()!==c)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+c+"). Use function fraction(x) to convert to Fraction.");return p}},{from:"string",to:"number",convert:function(c){var p=Number(c);if(isNaN(p))throw new Error('Cannot convert "'+c+'" to a number');return p}},{from:"string",to:"BigNumber",convert:function(c){r||rl(c);try{return new r(c)}catch{throw new Error('Cannot convert "'+c+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(c){a||nl(c);try{return new a(c)}catch{throw new Error('Cannot convert "'+c+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(c){n||qa(c);try{return new n(c)}catch{throw new Error('Cannot convert "'+c+'" to Complex')}}},{from:"boolean",to:"number",convert:function(c){return+c}},{from:"boolean",to:"BigNumber",convert:function(c){return r||rl(c),new r(+c)}},{from:"boolean",to:"Fraction",convert:function(c){return a||nl(c),new a(+c)}},{from:"boolean",to:"string",convert:function(c){return String(c)}},{from:"Array",to:"Matrix",convert:function(c){return u||eA(),new u(c)}},{from:"Matrix",to:"Array",convert:function(c){return c.valueOf()}}]),l.onMismatch=(o,c,p)=>{var f=l.createError(o,c,p);if(["wrongType","mismatch"].includes(f.data.category)&&c.length===1&&Ja(c[0])&&p.some(d=>!d.params.includes(","))){var h=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw h.data=f.data,h}throw f},l.onMismatch=(o,c,p)=>{var f=l.createError(o,c,p);if(["wrongType","mismatch"].includes(f.data.category)&&c.length===1&&Ja(c[0])&&p.some(d=>!d.params.includes(","))){var h=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw h.data=f.data,h}throw f},l});function rl(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function qa(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function eA(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function nl(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var cu=9e15,Si=1e9,Ll="0123456789abcdef",rs="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",ns="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Ul={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-cu,maxE:cu,crypto:!1},zd,ii,rt=!0,Ps="[DecimalError] ",Ci=Ps+"Invalid argument: ",Wd=Ps+"Precision limit exceeded",Hd=Ps+"crypto unavailable",Gd="[object Decimal]",xr=Math.floor,vr=Math.pow,tA=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,rA=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,nA=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Kd=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,On=1e7,Ze=7,iA=9007199254740991,uA=rs.length-1,Vl=ns.length-1,_e={toStringTag:Gd};_e.absoluteValue=_e.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),ze(e)};_e.ceil=function(){return ze(new this.constructor(this),this.e+1,2)};_e.clampedTo=_e.clamp=function(e,t){var r,n=this,u=n.constructor;if(e=new u(e),t=new u(t),!e.s||!t.s)return new u(NaN);if(e.gt(t))throw Error(Ci+t);return r=n.cmp(e),r<0?e:n.cmp(t)>0?t:new u(n)};_e.comparedTo=_e.cmp=function(e){var t,r,n,u,a=this,l=a.d,o=(e=new a.constructor(e)).d,c=a.s,p=e.s;if(!l||!o)return!c||!p?NaN:c!==p?c:l===o?0:!l^c<0?1:-1;if(!l[0]||!o[0])return l[0]?c:o[0]?-p:0;if(c!==p)return c;if(a.e!==e.e)return a.e>e.e^c<0?1:-1;for(n=l.length,u=o.length,t=0,r=n<u?n:u;t<r;++t)if(l[t]!==o[t])return l[t]>o[t]^c<0?1:-1;return n===u?0:n>u^c<0?1:-1};_e.cosine=_e.cos=function(){var e,t,r=this,n=r.constructor;return r.d?r.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+Ze,n.rounding=1,r=aA(n,Jd(n,r)),n.precision=e,n.rounding=t,ze(ii==2||ii==3?r.neg():r,e,t,!0)):new n(1):new n(NaN)};_e.cubeRoot=_e.cbrt=function(){var e,t,r,n,u,a,l,o,c,p,f=this,h=f.constructor;if(!f.isFinite()||f.isZero())return new h(f);for(rt=!1,a=f.s*vr(f.s*f,1/3),!a||Math.abs(a)==1/0?(r=Br(f.d),e=f.e,(a=(e-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=vr(r,1/3),e=xr((e+1)/3)-(e%3==(e<0?-1:2)),a==1/0?r="5e"+e:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),n=new h(r),n.s=f.s):n=new h(a.toString()),l=(e=h.precision)+3;;)if(o=n,c=o.times(o).times(o),p=c.plus(f),n=kt(p.plus(f).times(o),p.plus(c),l+2,1),Br(o.d).slice(0,l)===(r=Br(n.d)).slice(0,l))if(r=r.slice(l-3,l+1),r=="9999"||!u&&r=="4999"){if(!u&&(ze(o,e+1,0),o.times(o).times(o).eq(f))){n=o;break}l+=4,u=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(ze(n,e+1,1),t=!n.times(n).times(n).eq(f));break}return rt=!0,ze(n,e,h.rounding,t)};_e.decimalPlaces=_e.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-xr(this.e/Ze))*Ze,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};_e.dividedBy=_e.div=function(e){return kt(this,new this.constructor(e))};_e.dividedToIntegerBy=_e.divToInt=function(e){var t=this,r=t.constructor;return ze(kt(t,new r(e),0,1,1),r.precision,r.rounding)};_e.equals=_e.eq=function(e){return this.cmp(e)===0};_e.floor=function(){return ze(new this.constructor(this),this.e+1,3)};_e.greaterThan=_e.gt=function(e){return this.cmp(e)>0};_e.greaterThanOrEqualTo=_e.gte=function(e){var t=this.cmp(e);return t==1||t===0};_e.hyperbolicCosine=_e.cosh=function(){var e,t,r,n,u,a=this,l=a.constructor,o=new l(1);if(!a.isFinite())return new l(a.s?1/0:NaN);if(a.isZero())return o;r=l.precision,n=l.rounding,l.precision=r+Math.max(a.e,a.sd())+4,l.rounding=1,u=a.d.length,u<32?(e=Math.ceil(u/3),t=(1/Ts(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),a=vu(l,1,a.times(t),new l(1),!0);for(var c,p=e,f=new l(8);p--;)c=a.times(a),a=o.minus(c.times(f.minus(c.times(f))));return ze(a,l.precision=r,l.rounding=n,!0)};_e.hyperbolicSine=_e.sinh=function(){var e,t,r,n,u=this,a=u.constructor;if(!u.isFinite()||u.isZero())return new a(u);if(t=a.precision,r=a.rounding,a.precision=t+Math.max(u.e,u.sd())+4,a.rounding=1,n=u.d.length,n<3)u=vu(a,2,u,u,!0);else{e=1.4*Math.sqrt(n),e=e>16?16:e|0,u=u.times(1/Ts(5,e)),u=vu(a,2,u,u,!0);for(var l,o=new a(5),c=new a(16),p=new a(20);e--;)l=u.times(u),u=u.times(o.plus(l.times(c.times(l).plus(p))))}return a.precision=t,a.rounding=r,ze(u,t,r,!0)};_e.hyperbolicTangent=_e.tanh=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,kt(r.sinh(),r.cosh(),n.precision=e,n.rounding=t)):new n(r.s)};_e.inverseCosine=_e.acos=function(){var e,t=this,r=t.constructor,n=t.abs().cmp(1),u=r.precision,a=r.rounding;return n!==-1?n===0?t.isNeg()?Bn(r,u,a):new r(0):new r(NaN):t.isZero()?Bn(r,u+4,a).times(.5):(r.precision=u+6,r.rounding=1,t=t.asin(),e=Bn(r,u+4,a).times(.5),r.precision=u,r.rounding=a,e.minus(t))};_e.inverseHyperbolicCosine=_e.acosh=function(){var e,t,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,rt=!1,r=r.times(r).minus(1).sqrt().plus(r),rt=!0,n.precision=e,n.rounding=t,r.ln()):new n(r)};_e.inverseHyperbolicSine=_e.asinh=function(){var e,t,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,rt=!1,r=r.times(r).plus(1).sqrt().plus(r),rt=!0,n.precision=e,n.rounding=t,r.ln())};_e.inverseHyperbolicTangent=_e.atanh=function(){var e,t,r,n,u=this,a=u.constructor;return u.isFinite()?u.e>=0?new a(u.abs().eq(1)?u.s/0:u.isZero()?u:NaN):(e=a.precision,t=a.rounding,n=u.sd(),Math.max(n,e)<2*-u.e-1?ze(new a(u),e,t,!0):(a.precision=r=n-u.e,u=kt(u.plus(1),new a(1).minus(u),r+e,1),a.precision=e+4,a.rounding=1,u=u.ln(),a.precision=e,a.rounding=t,u.times(.5))):new a(NaN)};_e.inverseSine=_e.asin=function(){var e,t,r,n,u=this,a=u.constructor;return u.isZero()?new a(u):(t=u.abs().cmp(1),r=a.precision,n=a.rounding,t!==-1?t===0?(e=Bn(a,r+4,n).times(.5),e.s=u.s,e):new a(NaN):(a.precision=r+6,a.rounding=1,u=u.div(new a(1).minus(u.times(u)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,u.times(2)))};_e.inverseTangent=_e.atan=function(){var e,t,r,n,u,a,l,o,c,p=this,f=p.constructor,h=f.precision,d=f.rounding;if(p.isFinite()){if(p.isZero())return new f(p);if(p.abs().eq(1)&&h+4<=Vl)return l=Bn(f,h+4,d).times(.25),l.s=p.s,l}else{if(!p.s)return new f(NaN);if(h+4<=Vl)return l=Bn(f,h+4,d).times(.5),l.s=p.s,l}for(f.precision=o=h+10,f.rounding=1,r=Math.min(28,o/Ze+2|0),e=r;e;--e)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(rt=!1,t=Math.ceil(o/Ze),n=1,c=p.times(p),l=new f(p),u=p;e!==-1;)if(u=u.times(c),a=l.minus(u.div(n+=2)),u=u.times(c),l=a.plus(u.div(n+=2)),l.d[t]!==void 0)for(e=t;l.d[e]===a.d[e]&&e--;);return r&&(l=l.times(2<<r-1)),rt=!0,ze(l,f.precision=h,f.rounding=d,!0)};_e.isFinite=function(){return!!this.d};_e.isInteger=_e.isInt=function(){return!!this.d&&xr(this.e/Ze)>this.d.length-2};_e.isNaN=function(){return!this.s};_e.isNegative=_e.isNeg=function(){return this.s<0};_e.isPositive=_e.isPos=function(){return this.s>0};_e.isZero=function(){return!!this.d&&this.d[0]===0};_e.lessThan=_e.lt=function(e){return this.cmp(e)<0};_e.lessThanOrEqualTo=_e.lte=function(e){return this.cmp(e)<1};_e.logarithm=_e.log=function(e){var t,r,n,u,a,l,o,c,p=this,f=p.constructor,h=f.precision,d=f.rounding,m=5;if(e==null)e=new f(10),t=!0;else{if(e=new f(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new f(NaN);t=e.eq(10)}if(r=p.d,p.s<0||!r||!r[0]||p.eq(1))return new f(r&&!r[0]?-1/0:p.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)a=!0;else{for(u=r[0];u%10===0;)u/=10;a=u!==1}if(rt=!1,o=h+m,l=Di(p,o),n=t?is(f,o+10):Di(e,o),c=kt(l,n,o,1),Ju(c.d,u=h,d))do if(o+=10,l=Di(p,o),n=t?is(f,o+10):Di(e,o),c=kt(l,n,o,1),!a){+Br(c.d).slice(u+1,u+15)+1==1e14&&(c=ze(c,h+1,0));break}while(Ju(c.d,u+=10,d));return rt=!0,ze(c,h,d)};_e.minus=_e.sub=function(e){var t,r,n,u,a,l,o,c,p,f,h,d,m=this,y=m.constructor;if(e=new y(e),!m.d||!e.d)return!m.s||!e.s?e=new y(NaN):m.d?e.s=-e.s:e=new y(e.d||m.s!==e.s?m:NaN),e;if(m.s!=e.s)return e.s=-e.s,m.plus(e);if(p=m.d,d=e.d,o=y.precision,c=y.rounding,!p[0]||!d[0]){if(d[0])e.s=-e.s;else if(p[0])e=new y(m);else return new y(c===3?-0:0);return rt?ze(e,o,c):e}if(r=xr(e.e/Ze),f=xr(m.e/Ze),p=p.slice(),a=f-r,a){for(h=a<0,h?(t=p,a=-a,l=d.length):(t=d,r=f,l=p.length),n=Math.max(Math.ceil(o/Ze),l)+2,a>n&&(a=n,t.length=1),t.reverse(),n=a;n--;)t.push(0);t.reverse()}else{for(n=p.length,l=d.length,h=n<l,h&&(l=n),n=0;n<l;n++)if(p[n]!=d[n]){h=p[n]<d[n];break}a=0}for(h&&(t=p,p=d,d=t,e.s=-e.s),l=p.length,n=d.length-l;n>0;--n)p[l++]=0;for(n=d.length;n>a;){if(p[--n]<d[n]){for(u=n;u&&p[--u]===0;)p[u]=On-1;--p[u],p[n]+=On}p[n]-=d[n]}for(;p[--l]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(e.d=p,e.e=xs(p,r),rt?ze(e,o,c):e):new y(c===3?-0:0)};_e.modulo=_e.mod=function(e){var t,r=this,n=r.constructor;return e=new n(e),!r.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||r.d&&!r.d[0]?ze(new n(r),n.precision,n.rounding):(rt=!1,n.modulo==9?(t=kt(r,e.abs(),0,3,1),t.s*=e.s):t=kt(r,e,0,n.modulo,1),t=t.times(e),rt=!0,r.minus(t))};_e.naturalExponential=_e.exp=function(){return jl(this)};_e.naturalLogarithm=_e.ln=function(){return Di(this)};_e.negated=_e.neg=function(){var e=new this.constructor(this);return e.s=-e.s,ze(e)};_e.plus=_e.add=function(e){var t,r,n,u,a,l,o,c,p,f,h=this,d=h.constructor;if(e=new d(e),!h.d||!e.d)return!h.s||!e.s?e=new d(NaN):h.d||(e=new d(e.d||h.s===e.s?h:NaN)),e;if(h.s!=e.s)return e.s=-e.s,h.minus(e);if(p=h.d,f=e.d,o=d.precision,c=d.rounding,!p[0]||!f[0])return f[0]||(e=new d(h)),rt?ze(e,o,c):e;if(a=xr(h.e/Ze),n=xr(e.e/Ze),p=p.slice(),u=a-n,u){for(u<0?(r=p,u=-u,l=f.length):(r=f,n=a,l=p.length),a=Math.ceil(o/Ze),l=a>l?a+1:l+1,u>l&&(u=l,r.length=1),r.reverse();u--;)r.push(0);r.reverse()}for(l=p.length,u=f.length,l-u<0&&(u=l,r=f,f=p,p=r),t=0;u;)t=(p[--u]=p[u]+f[u]+t)/On|0,p[u]%=On;for(t&&(p.unshift(t),++n),l=p.length;p[--l]==0;)p.pop();return e.d=p,e.e=xs(p,n),rt?ze(e,o,c):e};_e.precision=_e.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ci+e);return r.d?(t=Yd(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};_e.round=function(){var e=this,t=e.constructor;return ze(new t(e),e.e+1,t.rounding)};_e.sine=_e.sin=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+Ze,n.rounding=1,r=oA(n,Jd(n,r)),n.precision=e,n.rounding=t,ze(ii>2?r.neg():r,e,t,!0)):new n(NaN)};_e.squareRoot=_e.sqrt=function(){var e,t,r,n,u,a,l=this,o=l.d,c=l.e,p=l.s,f=l.constructor;if(p!==1||!o||!o[0])return new f(!p||p<0&&(!o||o[0])?NaN:o?l:1/0);for(rt=!1,p=Math.sqrt(+l),p==0||p==1/0?(t=Br(o),(t.length+c)%2==0&&(t+="0"),p=Math.sqrt(t),c=xr((c+1)/2)-(c<0||c%2),p==1/0?t="5e"+c:(t=p.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),n=new f(t)):n=new f(p.toString()),r=(c=f.precision)+3;;)if(a=n,n=a.plus(kt(l,a,r+2,1)).times(.5),Br(a.d).slice(0,r)===(t=Br(n.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!u&&t=="4999"){if(!u&&(ze(a,c+1,0),a.times(a).eq(l))){n=a;break}r+=4,u=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(ze(n,c+1,1),e=!n.times(n).eq(l));break}return rt=!0,ze(n,c,f.rounding,e)};_e.tangent=_e.tan=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,r=r.sin(),r.s=1,r=kt(r,new n(1).minus(r.times(r)).sqrt(),e+10,0),n.precision=e,n.rounding=t,ze(ii==2||ii==4?r.neg():r,e,t,!0)):new n(NaN)};_e.times=_e.mul=function(e){var t,r,n,u,a,l,o,c,p,f=this,h=f.constructor,d=f.d,m=(e=new h(e)).d;if(e.s*=f.s,!d||!d[0]||!m||!m[0])return new h(!e.s||d&&!d[0]&&!m||m&&!m[0]&&!d?NaN:!d||!m?e.s/0:e.s*0);for(r=xr(f.e/Ze)+xr(e.e/Ze),c=d.length,p=m.length,c<p&&(a=d,d=m,m=a,l=c,c=p,p=l),a=[],l=c+p,n=l;n--;)a.push(0);for(n=p;--n>=0;){for(t=0,u=c+n;u>n;)o=a[u]+m[n]*d[u-n-1]+t,a[u--]=o%On|0,t=o/On|0;a[u]=(a[u]+t)%On|0}for(;!a[--l];)a.pop();return t?++r:a.shift(),e.d=a,e.e=xs(a,r),rt?ze(e,h.precision,h.rounding):e};_e.toBinary=function(e,t){return af(this,2,e,t)};_e.toDecimalPlaces=_e.toDP=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Hr(e,0,Si),t===void 0?t=n.rounding:Hr(t,0,8),ze(r,e+r.e+1,t))};_e.toExponential=function(e,t){var r,n=this,u=n.constructor;return e===void 0?r=qn(n,!0):(Hr(e,0,Si),t===void 0?t=u.rounding:Hr(t,0,8),n=ze(new u(n),e+1,t),r=qn(n,!0,e+1)),n.isNeg()&&!n.isZero()?"-"+r:r};_e.toFixed=function(e,t){var r,n,u=this,a=u.constructor;return e===void 0?r=qn(u):(Hr(e,0,Si),t===void 0?t=a.rounding:Hr(t,0,8),n=ze(new a(u),e+u.e+1,t),r=qn(n,!1,e+n.e+1)),u.isNeg()&&!u.isZero()?"-"+r:r};_e.toFraction=function(e){var t,r,n,u,a,l,o,c,p,f,h,d,m=this,y=m.d,g=m.constructor;if(!y)return new g(m);if(p=r=new g(1),n=c=new g(0),t=new g(n),a=t.e=Yd(y)-m.e-1,l=a%Ze,t.d[0]=vr(10,l<0?Ze+l:l),e==null)e=a>0?t:p;else{if(o=new g(e),!o.isInt()||o.lt(p))throw Error(Ci+o);e=o.gt(t)?a>0?t:p:o}for(rt=!1,o=new g(Br(y)),f=g.precision,g.precision=a=y.length*Ze*2;h=kt(o,t,0,1,1),u=r.plus(h.times(n)),u.cmp(e)!=1;)r=n,n=u,u=p,p=c.plus(h.times(u)),c=u,u=t,t=o.minus(h.times(u)),o=u;return u=kt(e.minus(r),n,0,1,1),c=c.plus(u.times(p)),r=r.plus(u.times(n)),c.s=p.s=m.s,d=kt(p,n,a,1).minus(m).abs().cmp(kt(c,r,a,1).minus(m).abs())<1?[p,n]:[c,r],g.precision=f,rt=!0,d};_e.toHexadecimal=_e.toHex=function(e,t){return af(this,16,e,t)};_e.toNearest=function(e,t){var r=this,n=r.constructor;if(r=new n(r),e==null){if(!r.d)return r;e=new n(1),t=n.rounding}else{if(e=new n(e),t===void 0?t=n.rounding:Hr(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(rt=!1,r=kt(r,e,0,t,1).times(e),rt=!0,ze(r)):(e.s=r.s,r=e),r};_e.toNumber=function(){return+this};_e.toOctal=function(e,t){return af(this,8,e,t)};_e.toPower=_e.pow=function(e){var t,r,n,u,a,l,o=this,c=o.constructor,p=+(e=new c(e));if(!o.d||!e.d||!o.d[0]||!e.d[0])return new c(vr(+o,p));if(o=new c(o),o.eq(1))return o;if(n=c.precision,a=c.rounding,e.eq(1))return ze(o,n,a);if(t=xr(e.e/Ze),t>=e.d.length-1&&(r=p<0?-p:p)<=iA)return u=Zd(c,o,r,n),e.s<0?new c(1).div(u):ze(u,n,a);if(l=o.s,l<0){if(t<e.d.length-1)return new c(NaN);if(e.d[t]&1||(l=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=l,o}return r=vr(+o,p),t=r==0||!isFinite(r)?xr(p*(Math.log("0."+Br(o.d))/Math.LN10+o.e+1)):new c(r+"").e,t>c.maxE+1||t<c.minE-1?new c(t>0?l/0:0):(rt=!1,c.rounding=o.s=1,r=Math.min(12,(t+"").length),u=jl(e.times(Di(o,n+r)),n),u.d&&(u=ze(u,n+5,1),Ju(u.d,n,a)&&(t=n+10,u=ze(jl(e.times(Di(o,t+r)),t),t+5,1),+Br(u.d).slice(n+1,n+15)+1==1e14&&(u=ze(u,n+1,0)))),u.s=l,rt=!0,c.rounding=a,ze(u,n,a))};_e.toPrecision=function(e,t){var r,n=this,u=n.constructor;return e===void 0?r=qn(n,n.e<=u.toExpNeg||n.e>=u.toExpPos):(Hr(e,1,Si),t===void 0?t=u.rounding:Hr(t,0,8),n=ze(new u(n),e,t),r=qn(n,e<=n.e||n.e<=u.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+r:r};_e.toSignificantDigits=_e.toSD=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Hr(e,1,Si),t===void 0?t=n.rounding:Hr(t,0,8)),ze(new n(r),e,t)};_e.toString=function(){var e=this,t=e.constructor,r=qn(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};_e.truncated=_e.trunc=function(){return ze(new this.constructor(this),this.e+1,1)};_e.valueOf=_e.toJSON=function(){var e=this,t=e.constructor,r=qn(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function Br(e){var t,r,n,u=e.length-1,a="",l=e[0];if(u>0){for(a+=l,t=1;t<u;t++)n=e[t]+"",r=Ze-n.length,r&&(a+=_i(r)),a+=n;l=e[t],n=l+"",r=Ze-n.length,r&&(a+=_i(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}function Hr(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ci+e)}function Ju(e,t,r,n){var u,a,l,o;for(a=e[0];a>=10;a/=10)--t;return--t<0?(t+=Ze,u=0):(u=Math.ceil((t+1)/Ze),t%=Ze),a=vr(10,Ze-t),o=e[u]%a|0,n==null?t<3?(t==0?o=o/100|0:t==1&&(o=o/10|0),l=r<4&&o==99999||r>3&&o==49999||o==5e4||o==0):l=(r<4&&o+1==a||r>3&&o+1==a/2)&&(e[u+1]/a/100|0)==vr(10,t-2)-1||(o==a/2||o==0)&&(e[u+1]/a/100|0)==0:t<4?(t==0?o=o/1e3|0:t==1?o=o/100|0:t==2&&(o=o/10|0),l=(n||r<4)&&o==9999||!n&&r>3&&o==4999):l=((n||r<4)&&o+1==a||!n&&r>3&&o+1==a/2)&&(e[u+1]/a/1e3|0)==vr(10,t-3)-1,l}function Ka(e,t,r){for(var n,u=[0],a,l=0,o=e.length;l<o;){for(a=u.length;a--;)u[a]*=t;for(u[0]+=Ll.indexOf(e.charAt(l++)),n=0;n<u.length;n++)u[n]>r-1&&(u[n+1]===void 0&&(u[n+1]=0),u[n+1]+=u[n]/r|0,u[n]%=r)}return u.reverse()}function aA(e,t){var r,n,u;if(t.isZero())return t;n=t.d.length,n<32?(r=Math.ceil(n/3),u=(1/Ts(4,r)).toString()):(r=16,u="2.3283064365386962890625e-10"),e.precision+=r,t=vu(e,1,t.times(u),new e(1));for(var a=r;a--;){var l=t.times(t);t=l.times(l).minus(l).times(8).plus(1)}return e.precision-=r,t}var kt=function(){function e(n,u,a){var l,o=0,c=n.length;for(n=n.slice();c--;)l=n[c]*u+o,n[c]=l%a|0,o=l/a|0;return o&&n.unshift(o),n}function t(n,u,a,l){var o,c;if(a!=l)c=a>l?1:-1;else for(o=c=0;o<a;o++)if(n[o]!=u[o]){c=n[o]>u[o]?1:-1;break}return c}function r(n,u,a,l){for(var o=0;a--;)n[a]-=o,o=n[a]<u[a]?1:0,n[a]=o*l+n[a]-u[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,u,a,l,o,c){var p,f,h,d,m,y,g,_,b,C,w,B,F,O,P,I,N,H,W,q,J=n.constructor,Y=n.s==u.s?1:-1,R=n.d,z=u.d;if(!R||!R[0]||!z||!z[0])return new J(!n.s||!u.s||(R?z&&R[0]==z[0]:!z)?NaN:R&&R[0]==0||!z?Y*0:Y/0);for(c?(m=1,f=n.e-u.e):(c=On,m=Ze,f=xr(n.e/m)-xr(u.e/m)),W=z.length,N=R.length,b=new J(Y),C=b.d=[],h=0;z[h]==(R[h]||0);h++);if(z[h]>(R[h]||0)&&f--,a==null?(O=a=J.precision,l=J.rounding):o?O=a+(n.e-u.e)+1:O=a,O<0)C.push(1),y=!0;else{if(O=O/m+2|0,h=0,W==1){for(d=0,z=z[0],O++;(h<N||d)&&O--;h++)P=d*c+(R[h]||0),C[h]=P/z|0,d=P%z|0;y=d||h<N}else{for(d=c/(z[0]+1)|0,d>1&&(z=e(z,d,c),R=e(R,d,c),W=z.length,N=R.length),I=W,w=R.slice(0,W),B=w.length;B<W;)w[B++]=0;q=z.slice(),q.unshift(0),H=z[0],z[1]>=c/2&&++H;do d=0,p=t(z,w,W,B),p<0?(F=w[0],W!=B&&(F=F*c+(w[1]||0)),d=F/H|0,d>1?(d>=c&&(d=c-1),g=e(z,d,c),_=g.length,B=w.length,p=t(g,w,_,B),p==1&&(d--,r(g,W<_?q:z,_,c))):(d==0&&(p=d=1),g=z.slice()),_=g.length,_<B&&g.unshift(0),r(w,g,B,c),p==-1&&(B=w.length,p=t(z,w,W,B),p<1&&(d++,r(w,W<B?q:z,B,c))),B=w.length):p===0&&(d++,w=[0]),C[h++]=d,p&&w[0]?w[B++]=R[I]||0:(w=[R[I]],B=1);while((I++<N||w[0]!==void 0)&&O--);y=w[0]!==void 0}C[0]||C.shift()}if(m==1)b.e=f,zd=y;else{for(h=1,d=C[0];d>=10;d/=10)h++;b.e=h+f*m-1,ze(b,o?a+b.e+1:a,l,y)}return b}}();function ze(e,t,r,n){var u,a,l,o,c,p,f,h,d,m=e.constructor;e:if(t!=null){if(h=e.d,!h)return e;for(u=1,o=h[0];o>=10;o/=10)u++;if(a=t-u,a<0)a+=Ze,l=t,f=h[d=0],c=f/vr(10,u-l-1)%10|0;else if(d=Math.ceil((a+1)/Ze),o=h.length,d>=o)if(n){for(;o++<=d;)h.push(0);f=c=0,u=1,a%=Ze,l=a-Ze+1}else break e;else{for(f=o=h[d],u=1;o>=10;o/=10)u++;a%=Ze,l=a-Ze+u,c=l<0?0:f/vr(10,u-l-1)%10|0}if(n=n||t<0||h[d+1]!==void 0||(l<0?f:f%vr(10,u-l-1)),p=r<4?(c||n)&&(r==0||r==(e.s<0?3:2)):c>5||c==5&&(r==4||n||r==6&&(a>0?l>0?f/vr(10,u-l):0:h[d-1])%10&1||r==(e.s<0?8:7)),t<1||!h[0])return h.length=0,p?(t-=e.e+1,h[0]=vr(10,(Ze-t%Ze)%Ze),e.e=-t||0):h[0]=e.e=0,e;if(a==0?(h.length=d,o=1,d--):(h.length=d+1,o=vr(10,Ze-a),h[d]=l>0?(f/vr(10,u-l)%vr(10,l)|0)*o:0),p)for(;;)if(d==0){for(a=1,l=h[0];l>=10;l/=10)a++;for(l=h[0]+=o,o=1;l>=10;l/=10)o++;a!=o&&(e.e++,h[0]==On&&(h[0]=1));break}else{if(h[d]+=o,h[d]!=On)break;h[d--]=0,o=1}for(a=h.length;h[--a]===0;)h.pop()}return rt&&(e.e>m.maxE?(e.d=null,e.e=NaN):e.e<m.minE&&(e.e=0,e.d=[0])),e}function qn(e,t,r){if(!e.isFinite())return Xd(e);var n,u=e.e,a=Br(e.d),l=a.length;return t?(r&&(n=r-l)>0?a=a.charAt(0)+"."+a.slice(1)+_i(n):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):u<0?(a="0."+_i(-u-1)+a,r&&(n=r-l)>0&&(a+=_i(n))):u>=l?(a+=_i(u+1-l),r&&(n=r-u-1)>0&&(a=a+"."+_i(n))):((n=u+1)<l&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-l)>0&&(u+1===l&&(a+="."),a+=_i(n))),a}function xs(e,t){var r=e[0];for(t*=Ze;r>=10;r/=10)t++;return t}function is(e,t,r){if(t>uA)throw rt=!0,r&&(e.precision=r),Error(Wd);return ze(new e(rs),t,1,!0)}function Bn(e,t,r){if(t>Vl)throw Error(Wd);return ze(new e(ns),t,r,!0)}function Yd(e){var t=e.length-1,r=t*Ze+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function _i(e){for(var t="";e--;)t+="0";return t}function Zd(e,t,r,n){var u,a=new e(1),l=Math.ceil(n/Ze+4);for(rt=!1;;){if(r%2&&(a=a.times(t),zh(a.d,l)&&(u=!0)),r=xr(r/2),r===0){r=a.d.length-1,u&&a.d[r]===0&&++a.d[r];break}t=t.times(t),zh(t.d,l)}return rt=!0,a}function qh(e){return e.d[e.d.length-1]&1}function $d(e,t,r){for(var n,u=new e(t[0]),a=0;++a<t.length;)if(n=new e(t[a]),n.s)u[r](n)&&(u=n);else{u=n;break}return u}function jl(e,t){var r,n,u,a,l,o,c,p=0,f=0,h=0,d=e.constructor,m=d.rounding,y=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(rt=!1,c=y):c=t,o=new d(.03125);e.e>-2;)e=e.times(o),h+=5;for(n=Math.log(vr(2,h))/Math.LN10*2+5|0,c+=n,r=a=l=new d(1),d.precision=c;;){if(a=ze(a.times(e),c,1),r=r.times(++f),o=l.plus(kt(a,r,c,1)),Br(o.d).slice(0,c)===Br(l.d).slice(0,c)){for(u=h;u--;)l=ze(l.times(l),c,1);if(t==null)if(p<3&&Ju(l.d,c-n,m,p))d.precision=c+=10,r=a=o=new d(1),f=0,p++;else return ze(l,d.precision=y,m,rt=!0);else return d.precision=y,l}l=o}}function Di(e,t){var r,n,u,a,l,o,c,p,f,h,d,m=1,y=10,g=e,_=g.d,b=g.constructor,C=b.rounding,w=b.precision;if(g.s<0||!_||!_[0]||!g.e&&_[0]==1&&_.length==1)return new b(_&&!_[0]?-1/0:g.s!=1?NaN:_?0:g);if(t==null?(rt=!1,f=w):f=t,b.precision=f+=y,r=Br(_),n=r.charAt(0),Math.abs(a=g.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(e),r=Br(g.d),n=r.charAt(0),m++;a=g.e,n>1?(g=new b("0."+r),a++):g=new b(n+"."+r.slice(1))}else return p=is(b,f+2,w).times(a+""),g=Di(new b(n+"."+r.slice(1)),f-y).plus(p),b.precision=w,t==null?ze(g,w,C,rt=!0):g;for(h=g,c=l=g=kt(g.minus(1),g.plus(1),f,1),d=ze(g.times(g),f,1),u=3;;){if(l=ze(l.times(d),f,1),p=c.plus(kt(l,new b(u),f,1)),Br(p.d).slice(0,f)===Br(c.d).slice(0,f))if(c=c.times(2),a!==0&&(c=c.plus(is(b,f+2,w).times(a+""))),c=kt(c,new b(m),f,1),t==null)if(Ju(c.d,f-y,C,o))b.precision=f+=y,p=l=g=kt(h.minus(1),h.plus(1),f,1),d=ze(g.times(g),f,1),u=o=1;else return ze(c,b.precision=w,C,rt=!0);else return b.precision=w,c;c=p,u+=2}}function Xd(e){return String(e.s*e.s/0)}function ql(e,t){var r,n,u;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;n++);for(u=t.length;t.charCodeAt(u-1)===48;--u);if(t=t.slice(n,u),t){if(u-=n,e.e=r=r-n-1,e.d=[],n=(r+1)%Ze,r<0&&(n+=Ze),n<u){for(n&&e.d.push(+t.slice(0,n)),u-=Ze;n<u;)e.d.push(+t.slice(n,n+=Ze));t=t.slice(n),n=Ze-t.length}else n-=u;for(;n--;)t+="0";e.d.push(+t),rt&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function sA(e,t){var r,n,u,a,l,o,c,p,f;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Kd.test(t))return ql(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(rA.test(t))r=16,t=t.toLowerCase();else if(tA.test(t))r=2;else if(nA.test(t))r=8;else throw Error(Ci+t);for(a=t.search(/p/i),a>0?(c=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),a=t.indexOf("."),l=a>=0,n=e.constructor,l&&(t=t.replace(".",""),o=t.length,a=o-a,u=Zd(n,new n(r),a,a*2)),p=Ka(t,r,On),f=p.length-1,a=f;p[a]===0;--a)p.pop();return a<0?new n(e.s*0):(e.e=xs(p,f),e.d=p,rt=!1,l&&(e=kt(e,u,o*4)),c&&(e=e.times(Math.abs(c)<54?vr(2,c):gu.pow(2,c))),rt=!0,e)}function oA(e,t){var r,n=t.d.length;if(n<3)return t.isZero()?t:vu(e,2,t,t);r=1.4*Math.sqrt(n),r=r>16?16:r|0,t=t.times(1/Ts(5,r)),t=vu(e,2,t,t);for(var u,a=new e(5),l=new e(16),o=new e(20);r--;)u=t.times(t),t=t.times(a.plus(u.times(l.times(u).minus(o))));return t}function vu(e,t,r,n,u){var a,l,o,c,p=e.precision,f=Math.ceil(p/Ze);for(rt=!1,c=r.times(r),o=new e(n);;){if(l=kt(o.times(c),new e(t++*t++),p,1),o=u?n.plus(l):n.minus(l),n=kt(l.times(c),new e(t++*t++),p,1),l=o.plus(n),l.d[f]!==void 0){for(a=f;l.d[a]===o.d[a]&&a--;);if(a==-1)break}a=o,o=n,n=l,l=a}return rt=!0,l.d.length=f+1,l}function Ts(e,t){for(var r=e;--t;)r*=e;return r}function Jd(e,t){var r,n=t.s<0,u=Bn(e,e.precision,1),a=u.times(.5);if(t=t.abs(),t.lte(a))return ii=n?4:1,t;if(r=t.divToInt(u),r.isZero())ii=n?3:2;else{if(t=t.minus(r.times(u)),t.lte(a))return ii=qh(r)?n?2:3:n?4:1,t;ii=qh(r)?n?1:4:n?3:2}return t.minus(u).abs()}function af(e,t,r,n){var u,a,l,o,c,p,f,h,d,m=e.constructor,y=r!==void 0;if(y?(Hr(r,1,Si),n===void 0?n=m.rounding:Hr(n,0,8)):(r=m.precision,n=m.rounding),!e.isFinite())f=Xd(e);else{for(f=qn(e),l=f.indexOf("."),y?(u=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):u=t,l>=0&&(f=f.replace(".",""),d=new m(1),d.e=f.length-l,d.d=Ka(qn(d),10,u),d.e=d.d.length),h=Ka(f,10,u),a=c=h.length;h[--c]==0;)h.pop();if(!h[0])f=y?"0p+0":"0";else{if(l<0?a--:(e=new m(e),e.d=h,e.e=a,e=kt(e,d,r,n,0,u),h=e.d,a=e.e,p=zd),l=h[r],o=u/2,p=p||h[r+1]!==void 0,p=n<4?(l!==void 0||p)&&(n===0||n===(e.s<0?3:2)):l>o||l===o&&(n===4||p||n===6&&h[r-1]&1||n===(e.s<0?8:7)),h.length=r,p)for(;++h[--r]>u-1;)h[r]=0,r||(++a,h.unshift(1));for(c=h.length;!h[c-1];--c);for(l=0,f="";l<c;l++)f+=Ll.charAt(h[l]);if(y){if(c>1)if(t==16||t==8){for(l=t==16?4:3,--c;c%l;c++)f+="0";for(h=Ka(f,u,t),c=h.length;!h[c-1];--c);for(l=1,f="1.";l<c;l++)f+=Ll.charAt(h[l])}else f=f.charAt(0)+"."+f.slice(1);f=f+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)f="0"+f;f="0."+f}else if(++a>c)for(a-=c;a--;)f+="0";else a<c&&(f=f.slice(0,a)+"."+f.slice(a))}f=(t==16?"0x":t==2?"0b":t==8?"0o":"")+f}return e.s<0?"-"+f:f}function zh(e,t){if(e.length>t)return e.length=t,!0}function lA(e){return new this(e).abs()}function fA(e){return new this(e).acos()}function cA(e){return new this(e).acosh()}function hA(e,t){return new this(e).plus(t)}function dA(e){return new this(e).asin()}function pA(e){return new this(e).asinh()}function vA(e){return new this(e).atan()}function gA(e){return new this(e).atanh()}function mA(e,t){e=new this(e),t=new this(t);var r,n=this.precision,u=this.rounding,a=n+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=Bn(this,a,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?Bn(this,n,u):new this(0),r.s=e.s):!e.d||t.isZero()?(r=Bn(this,a,1).times(.5),r.s=e.s):t.s<0?(this.precision=a,this.rounding=1,r=this.atan(kt(e,t,a,1)),t=Bn(this,a,1),this.precision=n,this.rounding=u,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(kt(e,t,a,1)),r}function _A(e){return new this(e).cbrt()}function DA(e){return ze(e=new this(e),e.e+1,2)}function bA(e,t,r){return new this(e).clamp(t,r)}function yA(e){if(!e||typeof e!="object")throw Error(Ps+"Object expected");var t,r,n,u=e.defaults===!0,a=["precision",1,Si,"rounding",0,8,"toExpNeg",-cu,0,"toExpPos",0,cu,"maxE",0,cu,"minE",-cu,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(r=a[t],u&&(this[r]=Ul[r]),(n=e[r])!==void 0)if(xr(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Ci+r+": "+n);if(r="crypto",u&&(this[r]=Ul[r]),(n=e[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Hd);else this[r]=!1;else throw Error(Ci+r+": "+n);return this}function AA(e){return new this(e).cos()}function wA(e){return new this(e).cosh()}function Qd(e){var t,r,n;function u(a){var l,o,c,p=this;if(!(p instanceof u))return new u(a);if(p.constructor=u,Wh(a)){p.s=a.s,rt?!a.d||a.e>u.maxE?(p.e=NaN,p.d=null):a.e<u.minE?(p.e=0,p.d=[0]):(p.e=a.e,p.d=a.d.slice()):(p.e=a.e,p.d=a.d?a.d.slice():a.d);return}if(c=typeof a,c==="number"){if(a===0){p.s=1/a<0?-1:1,p.e=0,p.d=[0];return}if(a<0?(a=-a,p.s=-1):p.s=1,a===~~a&&a<1e7){for(l=0,o=a;o>=10;o/=10)l++;rt?l>u.maxE?(p.e=NaN,p.d=null):l<u.minE?(p.e=0,p.d=[0]):(p.e=l,p.d=[a]):(p.e=l,p.d=[a]);return}else if(a*0!==0){a||(p.s=NaN),p.e=NaN,p.d=null;return}return ql(p,a.toString())}else if(c!=="string")throw Error(Ci+a);return(o=a.charCodeAt(0))===45?(a=a.slice(1),p.s=-1):(o===43&&(a=a.slice(1)),p.s=1),Kd.test(a)?ql(p,a):sA(p,a)}if(u.prototype=_e,u.ROUND_UP=0,u.ROUND_DOWN=1,u.ROUND_CEIL=2,u.ROUND_FLOOR=3,u.ROUND_HALF_UP=4,u.ROUND_HALF_DOWN=5,u.ROUND_HALF_EVEN=6,u.ROUND_HALF_CEIL=7,u.ROUND_HALF_FLOOR=8,u.EUCLID=9,u.config=u.set=yA,u.clone=Qd,u.isDecimal=Wh,u.abs=lA,u.acos=fA,u.acosh=cA,u.add=hA,u.asin=dA,u.asinh=pA,u.atan=vA,u.atanh=gA,u.atan2=mA,u.cbrt=_A,u.ceil=DA,u.clamp=bA,u.cos=AA,u.cosh=wA,u.div=EA,u.exp=CA,u.floor=FA,u.hypot=SA,u.ln=BA,u.log=OA,u.log10=PA,u.log2=MA,u.max=xA,u.min=TA,u.mod=IA,u.mul=NA,u.pow=kA,u.random=RA,u.round=LA,u.sign=UA,u.sin=VA,u.sinh=jA,u.sqrt=qA,u.sub=zA,u.sum=WA,u.tan=HA,u.tanh=GA,u.trunc=KA,e===void 0&&(e={}),e&&e.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return u.config(e),u}function EA(e,t){return new this(e).div(t)}function CA(e){return new this(e).exp()}function FA(e){return ze(e=new this(e),e.e+1,3)}function SA(){var e,t,r=new this(0);for(rt=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return rt=!0,new this(1/0);r=t}return rt=!0,r.sqrt()}function Wh(e){return e instanceof gu||e&&e.toStringTag===Gd||!1}function BA(e){return new this(e).ln()}function OA(e,t){return new this(e).log(t)}function MA(e){return new this(e).log(2)}function PA(e){return new this(e).log(10)}function xA(){return $d(this,arguments,"lt")}function TA(){return $d(this,arguments,"gt")}function IA(e,t){return new this(e).mod(t)}function NA(e,t){return new this(e).mul(t)}function kA(e,t){return new this(e).pow(t)}function RA(e){var t,r,n,u,a=0,l=new this(1),o=[];if(e===void 0?e=this.precision:Hr(e,1,Si),n=Math.ceil(e/Ze),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));a<n;)u=t[a],u>=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=u%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(n*=4);a<n;)u=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((t[a+3]&127)<<24),u>=214e7?crypto.randomBytes(4).copy(t,a):(o.push(u%1e7),a+=4);a=n/4}else throw Error(Hd);else for(;a<n;)o[a++]=Math.random()*1e7|0;for(n=o[--a],e%=Ze,n&&e&&(u=vr(10,Ze-e),o[a]=(n/u|0)*u);o[a]===0;a--)o.pop();if(a<0)r=0,o=[0];else{for(r=-1;o[0]===0;r-=Ze)o.shift();for(n=1,u=o[0];u>=10;u/=10)n++;n<Ze&&(r-=Ze-n)}return l.e=r,l.d=o,l}function LA(e){return ze(e=new this(e),e.e+1,this.rounding)}function UA(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function VA(e){return new this(e).sin()}function jA(e){return new this(e).sinh()}function qA(e){return new this(e).sqrt()}function zA(e,t){return new this(e).sub(t)}function WA(){var e=0,t=arguments,r=new this(t[e]);for(rt=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return rt=!0,ze(r,this.precision,this.rounding)}function HA(e){return new this(e).tan()}function GA(e){return new this(e).tanh()}function KA(e){return ze(e=new this(e),e.e+1,1)}_e[Symbol.for("nodejs.util.inspect.custom")]=_e.toString;_e[Symbol.toStringTag]="Decimal";var gu=_e.constructor=Qd(Ul);rs=new gu(rs);ns=new gu(ns);var YA="BigNumber",ZA=["?on","config"],$A=Tt(YA,ZA,e=>{var{on:t,config:r}=e,n=gu.clone({precision:r.precision,modulo:gu.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(u){return new n(u.value)},t&&t("config",function(u,a){u.precision!==a.precision&&n.config({precision:u.precision})}),n},{isClass:!0}),cr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zl={},XA={get exports(){return zl},set exports(e){zl=e}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,t){(function(r){var n=Math.cosh||function(h){return Math.abs(h)<1e-9?1-h:(Math.exp(h)+Math.exp(-h))*.5},u=Math.sinh||function(h){return Math.abs(h)<1e-9?h:(Math.exp(h)-Math.exp(-h))*.5},a=function(h){var d=Math.PI/4;if(-d>h||h>d)return Math.cos(h)-1;var m=h*h;return m*(m*(m*(m*(m*(m*(m*(m/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},l=function(h,d){var m=Math.abs(h),y=Math.abs(d);return m<3e3&&y<3e3?Math.sqrt(m*m+y*y):(m<y?(m=y,y=h/d):y=d/h,m*Math.sqrt(1+y*y))},o=function(){throw SyntaxError("Invalid Param")};function c(h,d){var m=Math.abs(h),y=Math.abs(d);return h===0?Math.log(y):d===0?Math.log(m):m<3e3&&y<3e3?Math.log(h*h+d*d)*.5:(h=h/2,d=d/2,.5*Math.log(h*h+d*d)+Math.LN2)}var p=function(h,d){var m={re:0,im:0};if(h==null)m.re=m.im=0;else if(d!==void 0)m.re=h,m.im=d;else switch(typeof h){case"object":if("im"in h&&"re"in h)m.re=h.re,m.im=h.im;else if("abs"in h&&"arg"in h){if(!Number.isFinite(h.abs)&&Number.isFinite(h.arg))return f.INFINITY;m.re=h.abs*Math.cos(h.arg),m.im=h.abs*Math.sin(h.arg)}else if("r"in h&&"phi"in h){if(!Number.isFinite(h.r)&&Number.isFinite(h.phi))return f.INFINITY;m.re=h.r*Math.cos(h.phi),m.im=h.r*Math.sin(h.phi)}else h.length===2?(m.re=h[0],m.im=h[1]):o();break;case"string":m.im=m.re=0;var y=h.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),g=1,_=0;y===null&&o();for(var b=0;b<y.length;b++){var C=y[b];C===" "||C==="	"||C===`
`||(C==="+"?g++:C==="-"?_++:C==="i"||C==="I"?(g+_===0&&o(),y[b+1]!==" "&&!isNaN(y[b+1])?(m.im+=parseFloat((_%2?"-":"")+y[b+1]),b++):m.im+=parseFloat((_%2?"-":"")+"1"),g=_=0):((g+_===0||isNaN(C))&&o(),y[b+1]==="i"||y[b+1]==="I"?(m.im+=parseFloat((_%2?"-":"")+C),b++):m.re+=parseFloat((_%2?"-":"")+C),g=_=0))}g+_>0&&o();break;case"number":m.im=0,m.re=h;break;default:o()}return isNaN(m.re)||isNaN(m.im),m};function f(h,d){if(!(this instanceof f))return new f(h,d);var m=p(h,d);this.re=m.re,this.im=m.im}f.prototype={re:0,im:0,sign:function(){var h=this.abs();return new f(this.re/h,this.im/h)},add:function(h,d){var m=new f(h,d);return this.isInfinite()&&m.isInfinite()?f.NAN:this.isInfinite()||m.isInfinite()?f.INFINITY:new f(this.re+m.re,this.im+m.im)},sub:function(h,d){var m=new f(h,d);return this.isInfinite()&&m.isInfinite()?f.NAN:this.isInfinite()||m.isInfinite()?f.INFINITY:new f(this.re-m.re,this.im-m.im)},mul:function(h,d){var m=new f(h,d);return this.isInfinite()&&m.isZero()||this.isZero()&&m.isInfinite()?f.NAN:this.isInfinite()||m.isInfinite()?f.INFINITY:m.im===0&&this.im===0?new f(this.re*m.re,0):new f(this.re*m.re-this.im*m.im,this.re*m.im+this.im*m.re)},div:function(h,d){var m=new f(h,d);if(this.isZero()&&m.isZero()||this.isInfinite()&&m.isInfinite())return f.NAN;if(this.isInfinite()||m.isZero())return f.INFINITY;if(this.isZero()||m.isInfinite())return f.ZERO;h=this.re,d=this.im;var y=m.re,g=m.im,_,b;return g===0?new f(h/y,d/y):Math.abs(y)<Math.abs(g)?(b=y/g,_=y*b+g,new f((h*b+d)/_,(d*b-h)/_)):(b=g/y,_=g*b+y,new f((h+d*b)/_,(d-h*b)/_))},pow:function(h,d){var m=new f(h,d);if(h=this.re,d=this.im,m.isZero())return f.ONE;if(m.im===0){if(d===0&&h>0)return new f(Math.pow(h,m.re),0);if(h===0)switch((m.re%4+4)%4){case 0:return new f(Math.pow(d,m.re),0);case 1:return new f(0,Math.pow(d,m.re));case 2:return new f(-Math.pow(d,m.re),0);case 3:return new f(0,-Math.pow(d,m.re))}}if(h===0&&d===0&&m.re>0&&m.im>=0)return f.ZERO;var y=Math.atan2(d,h),g=c(h,d);return h=Math.exp(m.re*g-m.im*y),d=m.im*g+m.re*y,new f(h*Math.cos(d),h*Math.sin(d))},sqrt:function(){var h=this.re,d=this.im,m=this.abs(),y,g;if(h>=0){if(d===0)return new f(Math.sqrt(h),0);y=.5*Math.sqrt(2*(m+h))}else y=Math.abs(d)/Math.sqrt(2*(m-h));return h<=0?g=.5*Math.sqrt(2*(m-h)):g=Math.abs(d)/Math.sqrt(2*(m+h)),new f(y,d<0?-g:g)},exp:function(){var h=Math.exp(this.re);return this.im,new f(h*Math.cos(this.im),h*Math.sin(this.im))},expm1:function(){var h=this.re,d=this.im;return new f(Math.expm1(h)*Math.cos(d)+a(d),Math.exp(h)*Math.sin(d))},log:function(){var h=this.re,d=this.im;return new f(c(h,d),Math.atan2(d,h))},abs:function(){return l(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var h=this.re,d=this.im;return new f(Math.sin(h)*n(d),Math.cos(h)*u(d))},cos:function(){var h=this.re,d=this.im;return new f(Math.cos(h)*n(d),-Math.sin(h)*u(d))},tan:function(){var h=2*this.re,d=2*this.im,m=Math.cos(h)+n(d);return new f(Math.sin(h)/m,u(d)/m)},cot:function(){var h=2*this.re,d=2*this.im,m=Math.cos(h)-n(d);return new f(-Math.sin(h)/m,u(d)/m)},sec:function(){var h=this.re,d=this.im,m=.5*n(2*d)+.5*Math.cos(2*h);return new f(Math.cos(h)*n(d)/m,Math.sin(h)*u(d)/m)},csc:function(){var h=this.re,d=this.im,m=.5*n(2*d)-.5*Math.cos(2*h);return new f(Math.sin(h)*n(d)/m,-Math.cos(h)*u(d)/m)},asin:function(){var h=this.re,d=this.im,m=new f(d*d-h*h+1,-2*h*d).sqrt(),y=new f(m.re-d,m.im+h).log();return new f(y.im,-y.re)},acos:function(){var h=this.re,d=this.im,m=new f(d*d-h*h+1,-2*h*d).sqrt(),y=new f(m.re-d,m.im+h).log();return new f(Math.PI/2-y.im,y.re)},atan:function(){var h=this.re,d=this.im;if(h===0){if(d===1)return new f(0,1/0);if(d===-1)return new f(0,-1/0)}var m=h*h+(1-d)*(1-d),y=new f((1-d*d-h*h)/m,-2*h/m).log();return new f(-.5*y.im,.5*y.re)},acot:function(){var h=this.re,d=this.im;if(d===0)return new f(Math.atan2(1,h),0);var m=h*h+d*d;return m!==0?new f(h/m,-d/m).atan():new f(h!==0?h/0:0,d!==0?-d/0:0).atan()},asec:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new f(0,1/0);var m=h*h+d*d;return m!==0?new f(h/m,-d/m).acos():new f(h!==0?h/0:0,d!==0?-d/0:0).acos()},acsc:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new f(Math.PI/2,1/0);var m=h*h+d*d;return m!==0?new f(h/m,-d/m).asin():new f(h!==0?h/0:0,d!==0?-d/0:0).asin()},sinh:function(){var h=this.re,d=this.im;return new f(u(h)*Math.cos(d),n(h)*Math.sin(d))},cosh:function(){var h=this.re,d=this.im;return new f(n(h)*Math.cos(d),u(h)*Math.sin(d))},tanh:function(){var h=2*this.re,d=2*this.im,m=n(h)+Math.cos(d);return new f(u(h)/m,Math.sin(d)/m)},coth:function(){var h=2*this.re,d=2*this.im,m=n(h)-Math.cos(d);return new f(u(h)/m,-Math.sin(d)/m)},csch:function(){var h=this.re,d=this.im,m=Math.cos(2*d)-n(2*h);return new f(-2*u(h)*Math.cos(d)/m,2*n(h)*Math.sin(d)/m)},sech:function(){var h=this.re,d=this.im,m=Math.cos(2*d)+n(2*h);return new f(2*n(h)*Math.cos(d)/m,-2*u(h)*Math.sin(d)/m)},asinh:function(){var h=this.im;this.im=-this.re,this.re=h;var d=this.asin();return this.re=-this.im,this.im=h,h=d.re,d.re=-d.im,d.im=h,d},acosh:function(){var h=this.acos();if(h.im<=0){var d=h.re;h.re=-h.im,h.im=d}else{var d=h.im;h.im=-h.re,h.re=d}return h},atanh:function(){var h=this.re,d=this.im,m=h>1&&d===0,y=1-h,g=1+h,_=y*y+d*d,b=_!==0?new f((g*y-d*d)/_,(d*y+g*d)/_):new f(h!==-1?h/0:0,d!==0?d/0:0),C=b.re;return b.re=c(b.re,b.im)/2,b.im=Math.atan2(b.im,C)/2,m&&(b.im=-b.im),b},acoth:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new f(0,Math.PI/2);var m=h*h+d*d;return m!==0?new f(h/m,-d/m).atanh():new f(h!==0?h/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var h=this.re,d=this.im;if(d===0)return new f(h!==0?Math.log(h+Math.sqrt(h*h+1)):1/0,0);var m=h*h+d*d;return m!==0?new f(h/m,-d/m).asinh():new f(h!==0?h/0:0,d!==0?-d/0:0).asinh()},asech:function(){var h=this.re,d=this.im;if(this.isZero())return f.INFINITY;var m=h*h+d*d;return m!==0?new f(h/m,-d/m).acosh():new f(h!==0?h/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return f.INFINITY;if(this.isInfinite())return f.ZERO;var h=this.re,d=this.im,m=h*h+d*d;return new f(h/m,-d/m)},conjugate:function(){return new f(this.re,-this.im)},neg:function(){return new f(-this.re,-this.im)},ceil:function(h){return h=Math.pow(10,h||0),new f(Math.ceil(this.re*h)/h,Math.ceil(this.im*h)/h)},floor:function(h){return h=Math.pow(10,h||0),new f(Math.floor(this.re*h)/h,Math.floor(this.im*h)/h)},round:function(h){return h=Math.pow(10,h||0),new f(Math.round(this.re*h)/h,Math.round(this.im*h)/h)},equals:function(h,d){var m=new f(h,d);return Math.abs(m.re-this.re)<=f.EPSILON&&Math.abs(m.im-this.im)<=f.EPSILON},clone:function(){return new f(this.re,this.im)},toString:function(){var h=this.re,d=this.im,m="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(h)<f.EPSILON&&(h=0),Math.abs(d)<f.EPSILON&&(d=0),d===0?m+h:(h!==0?(m+=h,m+=" ",d<0?(d=-d,m+="-"):m+="+",m+=" "):d<0&&(d=-d,m+="-"),d!==1&&(m+=d),m+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},f.ZERO=new f(0,0),f.ONE=new f(1,0),f.I=new f(0,1),f.PI=new f(Math.PI,0),f.E=new f(Math.E,0),f.INFINITY=new f(1/0,1/0),f.NAN=new f(NaN,NaN),f.EPSILON=1e-15,Object.defineProperty(f,"__esModule",{value:!0}),f.default=f,f.Complex=f,e.exports=f})()})(XA);const Cr=sf(zl);var JA="Complex",QA=[],ew=Tt(JA,QA,()=>(Object.defineProperty(Cr,"name",{value:"Complex"}),Cr.prototype.constructor=Cr,Cr.prototype.type="Complex",Cr.prototype.isComplex=!0,Cr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Cr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Cr.prototype.format=function(e){var t="",r=this.im,n=this.re,u=kl(this.re,e),a=kl(this.im,e),l=er(e)?e:e?e.precision:null;if(l!==null){var o=Math.pow(10,-l);Math.abs(n/r)<o&&(n=0),Math.abs(r/n)<o&&(r=0)}return r===0?t=u:n===0?r===1?t="i":r===-1?t="-i":t=a+"i":r<0?r===-1?t=u+" - i":t=u+" - "+a.substring(1)+"i":r===1?t=u+" + i":t=u+" + "+a+"i",t},Cr.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return Cr(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(er(r)){if(Pd(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),er(n))return new Cr({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Cr.prototype.valueOf=Cr.prototype.toString,Cr.fromJSON=function(e){return new Cr(e)},Cr.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},Cr),{isClass:!0}),Wl={},tw={get exports(){return Wl},set exports(e){Wl=e}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,t){(function(r){var n=2e3,u={s:1,n:0,d:1};function a(y,g){if(isNaN(y=parseInt(y,10)))throw m.InvalidParameter;return y*g}function l(y,g){if(g===0)throw m.DivisionByZero;var _=Object.create(m.prototype);_.s=y<0?-1:1,y=y<0?-y:y;var b=d(y,g);return _.n=y/b,_.d=g/b,_}function o(y){for(var g={},_=y,b=2,C=4;C<=_;){for(;_%b===0;)_/=b,g[b]=(g[b]||0)+1;C+=1+2*b++}return _!==y?_>1&&(g[_]=(g[_]||0)+1):g[y]=(g[y]||0)+1,g}var c=function(y,g){var _=0,b=1,C=1,w=0,B=0,F=0,O=1,P=1,I=0,N=1,H=1,W=1,q=1e7,J;if(y!=null)if(g!==void 0){if(_=y,b=g,C=_*b,_%1!==0||b%1!==0)throw m.NonIntegerParameter}else switch(typeof y){case"object":{if("d"in y&&"n"in y)_=y.n,b=y.d,"s"in y&&(_*=y.s);else if(0 in y)_=y[0],1 in y&&(b=y[1]);else throw m.InvalidParameter;C=_*b;break}case"number":{if(y<0&&(C=y,y=-y),y%1===0)_=y;else if(y>0){for(y>=1&&(P=Math.pow(10,Math.floor(1+Math.log(y)/Math.LN10)),y/=P);N<=q&&W<=q;)if(J=(I+H)/(N+W),y===J){N+W<=q?(_=I+H,b=N+W):W>N?(_=H,b=W):(_=I,b=N);break}else y>J?(I+=H,N+=W):(H+=I,W+=N),N>q?(_=H,b=W):(_=I,b=N);_*=P}else(isNaN(y)||isNaN(g))&&(b=_=NaN);break}case"string":{if(N=y.match(/\d+|./g),N===null)throw m.InvalidParameter;if(N[I]==="-"?(C=-1,I++):N[I]==="+"&&I++,N.length===I+1?B=a(N[I++],C):N[I+1]==="."||N[I]==="."?(N[I]!=="."&&(w=a(N[I++],C)),I++,(I+1===N.length||N[I+1]==="("&&N[I+3]===")"||N[I+1]==="'"&&N[I+3]==="'")&&(B=a(N[I],C),O=Math.pow(10,N[I].length),I++),(N[I]==="("&&N[I+2]===")"||N[I]==="'"&&N[I+2]==="'")&&(F=a(N[I+1],C),P=Math.pow(10,N[I+1].length)-1,I+=3)):N[I+1]==="/"||N[I+1]===":"?(B=a(N[I],C),O=a(N[I+2],1),I+=3):N[I+3]==="/"&&N[I+1]===" "&&(w=a(N[I],C),B=a(N[I+2],C),O=a(N[I+4],1),I+=5),N.length<=I){b=O*P,C=_=F+b*w+P*B;break}}default:throw m.InvalidParameter}if(b===0)throw m.DivisionByZero;u.s=C<0?-1:1,u.n=Math.abs(_),u.d=Math.abs(b)};function p(y,g,_){for(var b=1;g>0;y=y*y%_,g>>=1)g&1&&(b=b*y%_);return b}function f(y,g){for(;g%2===0;g/=2);for(;g%5===0;g/=5);if(g===1)return 0;for(var _=10%g,b=1;_!==1;b++)if(_=_*10%g,b>n)return 0;return b}function h(y,g,_){for(var b=1,C=p(10,_,g),w=0;w<300;w++){if(b===C)return w;b=b*10%g,C=C*10%g}return 0}function d(y,g){if(!y)return g;if(!g)return y;for(;;){if(y%=g,!y)return g;if(g%=y,!g)return y}}function m(y,g){if(c(y,g),this instanceof m)y=d(u.d,u.n),this.s=u.s,this.n=u.n/y,this.d=u.d/y;else return l(u.s*u.n,u.d)}m.DivisionByZero=new Error("Division by Zero"),m.InvalidParameter=new Error("Invalid argument"),m.NonIntegerParameter=new Error("Parameters must be integer"),m.prototype={s:1,n:0,d:1,abs:function(){return l(this.n,this.d)},neg:function(){return l(-this.s*this.n,this.d)},add:function(y,g){return c(y,g),l(this.s*this.n*u.d+u.s*this.d*u.n,this.d*u.d)},sub:function(y,g){return c(y,g),l(this.s*this.n*u.d-u.s*this.d*u.n,this.d*u.d)},mul:function(y,g){return c(y,g),l(this.s*u.s*this.n*u.n,this.d*u.d)},div:function(y,g){return c(y,g),l(this.s*u.s*this.n*u.d,this.d*u.n)},clone:function(){return l(this.s*this.n,this.d)},mod:function(y,g){if(isNaN(this.n)||isNaN(this.d))return new m(NaN);if(y===void 0)return l(this.s*this.n%this.d,1);if(c(y,g),u.n===0&&this.d===0)throw m.DivisionByZero;return l(this.s*(u.d*this.n)%(u.n*this.d),u.d*this.d)},gcd:function(y,g){return c(y,g),l(d(u.n,this.n)*d(u.d,this.d),u.d*this.d)},lcm:function(y,g){return c(y,g),u.n===0&&this.n===0?l(0,1):l(u.n*this.n,d(u.n,this.n)*d(u.d,this.d))},ceil:function(y){return y=Math.pow(10,y||0),isNaN(this.n)||isNaN(this.d)?new m(NaN):l(Math.ceil(y*this.s*this.n/this.d),y)},floor:function(y){return y=Math.pow(10,y||0),isNaN(this.n)||isNaN(this.d)?new m(NaN):l(Math.floor(y*this.s*this.n/this.d),y)},round:function(y){return y=Math.pow(10,y||0),isNaN(this.n)||isNaN(this.d)?new m(NaN):l(Math.round(y*this.s*this.n/this.d),y)},inverse:function(){return l(this.s*this.d,this.n)},pow:function(y,g){if(c(y,g),u.d===1)return u.s<0?l(Math.pow(this.s*this.d,u.n),Math.pow(this.n,u.n)):l(Math.pow(this.s*this.n,u.n),Math.pow(this.d,u.n));if(this.s<0)return null;var _=o(this.n),b=o(this.d),C=1,w=1;for(var B in _)if(B!=="1"){if(B==="0"){C=0;break}if(_[B]*=u.n,_[B]%u.d===0)_[B]/=u.d;else return null;C*=Math.pow(B,_[B])}for(var B in b)if(B!=="1"){if(b[B]*=u.n,b[B]%u.d===0)b[B]/=u.d;else return null;w*=Math.pow(B,b[B])}return u.s<0?l(w,C):l(C,w)},equals:function(y,g){return c(y,g),this.s*this.n*u.d===u.s*u.n*this.d},compare:function(y,g){c(y,g);var _=this.s*this.n*u.d-u.s*u.n*this.d;return(0<_)-(_<0)},simplify:function(y){if(isNaN(this.n)||isNaN(this.d))return this;y=y||.001;for(var g=this.abs(),_=g.toContinued(),b=1;b<_.length;b++){for(var C=l(_[b-1],1),w=b-2;w>=0;w--)C=C.inverse().add(_[w]);if(C.sub(g).abs().valueOf()<y)return C.mul(this.s)}return this},divisible:function(y,g){return c(y,g),!(!(u.n*this.d)||this.n*u.d%(u.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(y){var g,_="",b=this.n,C=this.d;return this.s<0&&(_+="-"),C===1?_+=b:(y&&(g=Math.floor(b/C))>0&&(_+=g,_+=" ",b%=C),_+=b,_+="/",_+=C),_},toLatex:function(y){var g,_="",b=this.n,C=this.d;return this.s<0&&(_+="-"),C===1?_+=b:(y&&(g=Math.floor(b/C))>0&&(_+=g,b%=C),_+="\\frac{",_+=b,_+="}{",_+=C,_+="}"),_},toContinued:function(){var y,g=this.n,_=this.d,b=[];if(isNaN(g)||isNaN(_))return b;do b.push(Math.floor(g/_)),y=g%_,g=_,_=y;while(g!==1);return b},toString:function(y){var g=this.n,_=this.d;if(isNaN(g)||isNaN(_))return"NaN";y=y||15;var b=f(g,_),C=h(g,_,b),w=this.s<0?"-":"";if(w+=g/_|0,g%=_,g*=10,g&&(w+="."),b){for(var B=C;B--;)w+=g/_|0,g%=_,g*=10;w+="(";for(var B=b;B--;)w+=g/_|0,g%=_,g*=10;w+=")"}else for(var B=y;g&&B--;)w+=g/_|0,g%=_,g*=10;return w}},Object.defineProperty(m,"__esModule",{value:!0}),m.default=m,m.Fraction=m,e.exports=m})()})(tw);const ni=sf(Wl);var rw="Fraction",nw=[],iw=Tt(rw,nw,()=>(Object.defineProperty(ni,"name",{value:"Fraction"}),ni.prototype.constructor=ni,ni.prototype.type="Fraction",ni.prototype.isFraction=!0,ni.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},ni.fromJSON=function(e){return new ni(e)},ni),{isClass:!0}),uw="Matrix",aw=[],sw=Tt(uw,aw,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,r){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,r,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,r){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,r){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,r){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function ep(e){return Object.keys(e.signatures||{}).reduce(function(t,r){var n=(r.match(/,/g)||[]).length+1;return Math.max(t,n)},-1)}var ow="DenseMatrix",lw=["Matrix"],fw=Tt(ow,lw,e=>{var{Matrix:t}=e;function r(f,h){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(h&&!Vn(h))throw new Error("Invalid datatype: "+h);if(Rr(f))f.type==="DenseMatrix"?(this._data=br(f._data),this._size=br(f._size),this._datatype=h||f._datatype):(this._data=f.toArray(),this._size=f.size(),this._datatype=h||f._datatype);else if(f&&Xt(f.data)&&Xt(f.size))this._data=f.data,this._size=f.size,Vh(this._data,this._size),this._datatype=h||f.datatype;else if(Xt(f))this._data=p(f),this._size=Ei(this._data),Vh(this._data,this._size),this._datatype=h;else{if(f)throw new TypeError("Unsupported type of data ("+$u(f)+")");this._data=[],this._size=[0],this._datatype=h}}r.prototype=new t,r.prototype.createDenseMatrix=function(f,h){return new r(f,h)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return ts(this._data,$u)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(f,h){return new r(f,h)},r.prototype.subset=function(f,h,d){switch(arguments.length){case 1:return n(this,f);case 2:case 3:return a(this,f,h,d);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(f){if(!Xt(f))throw new TypeError("Array expected");if(f.length!==this._size.length)throw new Pt(f.length,this._size.length);for(var h=0;h<f.length;h++)Jt(f[h],this._size[h]);for(var d=this._data,m=0,y=f.length;m<y;m++){var g=f[m];Jt(g,d.length),d=d[g]}return d},r.prototype.set=function(f,h,d){if(!Xt(f))throw new TypeError("Array expected");if(f.length<this._size.length)throw new Pt(f.length,this._size.length,"<");var m,y,g,_=f.map(function(C){return C+1});c(this,_,d);var b=this._data;for(m=0,y=f.length-1;m<y;m++)g=f[m],Jt(g,b.length),b=b[g];return g=f[f.length-1],Jt(g,b.length),b[g]=h,this};function n(f,h){if(!nf(h))throw new TypeError("Invalid index");var d=h.isScalar();if(d)return f.get(h.min());var m=h.size();if(m.length!==f._size.length)throw new Pt(m.length,f._size.length);for(var y=h.min(),g=h.max(),_=0,b=f._size.length;_<b;_++)Jt(y[_],f._size[_]),Jt(g[_],f._size[_]);return new r(u(f._data,h,m.length,0),f._datatype)}function u(f,h,d,m){var y=m===d-1,g=h.dimension(m);return y?g.map(function(_){return Jt(_,f.length),f[_]}).valueOf():g.map(function(_){Jt(_,f.length);var b=f[_];return u(b,h,d,m+1)}).valueOf()}function a(f,h,d,m){if(!h||h.isIndex!==!0)throw new TypeError("Invalid index");var y=h.size(),g=h.isScalar(),_;if(Rr(d)?(_=d.size(),d=d.valueOf()):_=Ei(d),g){if(_.length!==0)throw new TypeError("Scalar expected");f.set(h.min(),d,m)}else{if(y.length<f._size.length)throw new Pt(y.length,f._size.length,"<");if(_.length<y.length){for(var b=0,C=0;y[b]===1&&_[b]===1;)b++;for(;y[b]===1;)C++,b++;d=Ld(d,y.length,C,_)}if(!Qa(y,_))throw new Pt(y,_,">");var w=h.max().map(function(O){return O+1});c(f,w,m);var B=y.length,F=0;l(f._data,h,d,B,F)}return f}function l(f,h,d,m,y){var g=y===m-1,_=h.dimension(y);g?_.forEach(function(b,C){Jt(b),f[b]=d[C[0]]}):_.forEach(function(b,C){Jt(b),l(f[b],h,d[C[0]],m,y+1)})}r.prototype.resize=function(f,h,d){if(!Ja(f))throw new TypeError("Array or Matrix expected");var m=f.valueOf().map(g=>Array.isArray(g)&&g.length===1?g[0]:g),y=d?this.clone():this;return o(y,m,h)};function o(f,h,d){if(h.length===0){for(var m=f._data;Xt(m);)m=m[0];return m}return f._size=h.slice(0),f._data=jh(f._data,f._size,d),f}r.prototype.reshape=function(f,h){var d=h?this.clone():this;d._data=Ly(d._data,f);var m=d._size.reduce((y,g)=>y*g);return d._size=uf(f,m),d};function c(f,h,d){for(var m=f._size.slice(0),y=!1;m.length<h.length;)m.push(0),y=!0;for(var g=0,_=h.length;g<_;g++)h[g]>m[g]&&(m[g]=h[g],y=!0);y&&o(f,m,d)}r.prototype.clone=function(){var f=new r({data:br(this._data),size:br(this._size),datatype:this._datatype});return f},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(f){var h=this,d=ep(f),m=function _(b,C){return Xt(b)?b.map(function(w,B){return _(w,C.concat(B))}):d===1?f(b):d===2?f(b,C):f(b,C,h)},y=m(this._data,[]),g=this._datatype!==void 0?ts(y,$u):void 0;return new r(y,g)},r.prototype.forEach=function(f){var h=this,d=function m(y,g){Xt(y)?y.forEach(function(_,b){m(_,g.concat(b))}):f(y,g,h)};d(this._data,[])},r.prototype[Symbol.iterator]=function*(){var f=function*h(d,m){if(Xt(d))for(var y=0;y<d.length;y++)yield*h(d[y],m.concat(y));else yield{value:d,index:m}};yield*f(this._data,[])},r.prototype.rows=function(){var f=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var m of d)f.push(new r([m],this._datatype));return f},r.prototype.columns=function(){var f=this,h=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var m=this._data,y=function(b){var C=m.map(w=>[w[b]]);h.push(new r(C,f._datatype))},g=0;g<d[1];g++)y(g);return h},r.prototype.toArray=function(){return br(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(f){return zr(this._data,f)},r.prototype.toString=function(){return zr(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(f){if(f){if(gn(f)&&(f=f.toNumber()),!er(f)||!yr(f))throw new TypeError("The parameter k must be an integer number")}else f=0;for(var h=f>0?f:0,d=f<0?-f:0,m=this._size[0],y=this._size[1],g=Math.min(m-d,y-h),_=[],b=0;b<g;b++)_[b]=this._data[b+d][b+h];return new r({data:_,size:[g],datatype:this._datatype})},r.diagonal=function(f,h,d,m){if(!Xt(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(P){if(gn(P)&&(P=P.toNumber()),!er(P)||!yr(P)||P<1)throw new Error("Size values must be positive integers");return P}),d){if(gn(d)&&(d=d.toNumber()),!er(d)||!yr(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var y=d>0?d:0,g=d<0?-d:0,_=f[0],b=f[1],C=Math.min(_-g,b-y),w;if(Xt(h)){if(h.length!==C)throw new Error("Invalid value array length");w=function(I){return h[I]}}else if(Rr(h)){var B=h.size();if(B.length!==1||B[0]!==C)throw new Error("Invalid matrix length");w=function(I){return h.get([I])}}else w=function(){return h};m||(m=gn(w(0))?w(0).mul(0):0);var F=[];if(f.length>0){F=jh(F,f,m);for(var O=0;O<C;O++)F[O+g][O+y]=w(O)}return new r({data:F,size:[_,b]})},r.fromJSON=function(f){return new r(f)},r.prototype.swapRows=function(f,h){if(!er(f)||!yr(f)||!er(h)||!yr(h))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Jt(f,this._size[0]),Jt(h,this._size[0]),r._swapRows(f,h,this._data),this},r._swapRows=function(f,h,d){var m=d[f];d[f]=d[h],d[h]=m};function p(f){for(var h=0,d=f.length;h<d;h++){var m=f[h];Xt(m)?f[h]=p(m):m&&m.isMatrix===!0&&(f[h]=p(m.valueOf()))}return f}return r},{isClass:!0});function of(e,t,r){return e&&typeof e.map=="function"?e.map(function(n){return of(n,t)}):t(e)}var Hh="isInteger",cw=["typed"],hw=Tt(Hh,cw,e=>{var{typed:t}=e;return t(Hh,{number:yr,BigNumber:function(n){return n.isInt()},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":t.referToSelf(r=>n=>of(n,r))})}),tp="number, number";function rp(e,t){return e+t}rp.signature=tp;function np(e,t){return e*t}np.signature=tp;function dw(e,t,r){if(r==null)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var n=e.minus(t).abs();if(n.isZero())return!0;var u=e.constructor.max(e.abs(),t.abs());return n.lte(u.times(r))}return!1}function pw(e,t,r){return es(e.re,t.re,r)&&es(e.im,t.im,r)}var vw=Tt("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(r=>(n,u)=>{if(!n.equalBase(u))throw new Error("Cannot compare units with different base");return t.find(r,[n.valueType(),u.valueType()])(n.value,u.value)})}}),us="equalScalar",gw=["typed","config"],mw=Tt(us,gw,e=>{var{typed:t,config:r}=e,n=vw({typed:t});return t(us,{"boolean, boolean":function(a,l){return a===l},"number, number":function(a,l){return es(a,l,r.epsilon)},"BigNumber, BigNumber":function(a,l){return a.eq(l)||dw(a,l,r.epsilon)},"Fraction, Fraction":function(a,l){return a.equals(l)},"Complex, Complex":function(a,l){return pw(a,l,r.epsilon)}},n)});Tt(us,["typed","config"],e=>{var{typed:t,config:r}=e;return t(us,{"number, number":function(u,a){return es(u,a,r.epsilon)}})});var _w="SparseMatrix",Dw=["typed","equalScalar","Matrix"],bw=Tt(_w,Dw,e=>{var{typed:t,equalScalar:r,Matrix:n}=e;function u(g,_){if(!(this instanceof u))throw new SyntaxError("Constructor must be called with the new operator");if(_&&!Vn(_))throw new Error("Invalid datatype: "+_);if(Rr(g))a(this,g,_);else if(g&&Xt(g.index)&&Xt(g.ptr)&&Xt(g.size))this._values=g.values,this._index=g.index,this._ptr=g.ptr,this._size=g.size,this._datatype=_||g.datatype;else if(Xt(g))l(this,g,_);else{if(g)throw new TypeError("Unsupported type of data ("+$u(g)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=_}}function a(g,_,b){_.type==="SparseMatrix"?(g._values=_._values?br(_._values):void 0,g._index=br(_._index),g._ptr=br(_._ptr),g._size=br(_._size),g._datatype=b||_._datatype):l(g,_.valueOf(),b||_._datatype)}function l(g,_,b){g._values=[],g._index=[],g._ptr=[],g._datatype=b;var C=_.length,w=0,B=r,F=0;if(Vn(b)&&(B=t.find(r,[b,b])||r,F=t.convert(0,b)),C>0){var O=0;do{g._ptr.push(g._index.length);for(var P=0;P<C;P++){var I=_[P];if(Xt(I)){if(O===0&&w<I.length&&(w=I.length),O<I.length){var N=I[O];B(N,F)||(g._values.push(N),g._index.push(P))}}else O===0&&w<1&&(w=1),B(I,F)||(g._values.push(I),g._index.push(P))}O++}while(O<w)}g._ptr.push(g._index.length),g._size=[C,w]}u.prototype=new n,u.prototype.createSparseMatrix=function(g,_){return new u(g,_)},Object.defineProperty(u,"name",{value:"SparseMatrix"}),u.prototype.constructor=u,u.prototype.type="SparseMatrix",u.prototype.isSparseMatrix=!0,u.prototype.getDataType=function(){return ts(this._values,$u)},u.prototype.storage=function(){return"sparse"},u.prototype.datatype=function(){return this._datatype},u.prototype.create=function(g,_){return new u(g,_)},u.prototype.density=function(){var g=this._size[0],_=this._size[1];return g!==0&&_!==0?this._index.length/(g*_):0},u.prototype.subset=function(g,_,b){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,g);case 2:case 3:return c(this,g,_,b);default:throw new SyntaxError("Wrong number of arguments")}};function o(g,_){if(!nf(_))throw new TypeError("Invalid index");var b=_.isScalar();if(b)return g.get(_.min());var C=_.size();if(C.length!==g._size.length)throw new Pt(C.length,g._size.length);var w,B,F,O,P=_.min(),I=_.max();for(w=0,B=g._size.length;w<B;w++)Jt(P[w],g._size[w]),Jt(I[w],g._size[w]);var N=g._values,H=g._index,W=g._ptr,q=_.dimension(0),J=_.dimension(1),Y=[],R=[];q.forEach(function(te,ve){R[te]=ve[0],Y[te]=!0});var z=N?[]:void 0,re=[],Q=[];return J.forEach(function(te){for(Q.push(re.length),F=W[te],O=W[te+1];F<O;F++)w=H[F],Y[w]===!0&&(re.push(R[w]),z&&z.push(N[F]))}),Q.push(re.length),new u({values:z,index:re,ptr:Q,size:C,datatype:g._datatype})}function c(g,_,b,C){if(!_||_.isIndex!==!0)throw new TypeError("Invalid index");var w=_.size(),B=_.isScalar(),F;if(Rr(b)?(F=b.size(),b=b.toArray()):F=Ei(b),B){if(F.length!==0)throw new TypeError("Scalar expected");g.set(_.min(),b,C)}else{if(w.length!==1&&w.length!==2)throw new Pt(w.length,g._size.length,"<");if(F.length<w.length){for(var O=0,P=0;w[O]===1&&F[O]===1;)O++;for(;w[O]===1;)P++,O++;b=Ld(b,w.length,P,F)}if(!Qa(w,F))throw new Pt(w,F,">");if(w.length===1){var I=_.dimension(0);I.forEach(function(W,q){Jt(W),g.set([W,0],b[q[0]],C)})}else{var N=_.dimension(0),H=_.dimension(1);N.forEach(function(W,q){Jt(W),H.forEach(function(J,Y){Jt(J),g.set([W,J],b[q[0]][Y[0]],C)})})}}return g}u.prototype.get=function(g){if(!Xt(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new Pt(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var _=g[0],b=g[1];Jt(_,this._size[0]),Jt(b,this._size[1]);var C=p(_,this._ptr[b],this._ptr[b+1],this._index);return C<this._ptr[b+1]&&this._index[C]===_?this._values[C]:0},u.prototype.set=function(g,_,b){if(!Xt(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new Pt(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var C=g[0],w=g[1],B=this._size[0],F=this._size[1],O=r,P=0;Vn(this._datatype)&&(O=t.find(r,[this._datatype,this._datatype])||r,P=t.convert(0,this._datatype)),(C>B-1||w>F-1)&&(d(this,Math.max(C+1,B),Math.max(w+1,F),b),B=this._size[0],F=this._size[1]),Jt(C,B),Jt(w,F);var I=p(C,this._ptr[w],this._ptr[w+1],this._index);return I<this._ptr[w+1]&&this._index[I]===C?O(_,P)?f(I,w,this._values,this._index,this._ptr):this._values[I]=_:O(_,P)||h(I,C,w,_,this._values,this._index,this._ptr),this};function p(g,_,b,C){if(b-_===0)return b;for(var w=_;w<b;w++)if(C[w]===g)return w;return _}function f(g,_,b,C,w){b.splice(g,1),C.splice(g,1);for(var B=_+1;B<w.length;B++)w[B]--}function h(g,_,b,C,w,B,F){w.splice(g,0,C),B.splice(g,0,_);for(var O=b+1;O<F.length;O++)F[O]++}u.prototype.resize=function(g,_,b){if(!Ja(g))throw new TypeError("Array or Matrix expected");var C=g.valueOf().map(B=>Array.isArray(B)&&B.length===1?B[0]:B);if(C.length!==2)throw new Error("Only two dimensions matrix are supported");C.forEach(function(B){if(!er(B)||!yr(B)||B<0)throw new TypeError("Invalid size, must contain positive integers (size: "+zr(C)+")")});var w=b?this.clone():this;return d(w,C[0],C[1],_)};function d(g,_,b,C){var w=C||0,B=r,F=0;Vn(g._datatype)&&(B=t.find(r,[g._datatype,g._datatype])||r,F=t.convert(0,g._datatype),w=t.convert(w,g._datatype));var O=!B(w,F),P=g._size[0],I=g._size[1],N,H,W;if(b>I){for(H=I;H<b;H++)if(g._ptr[H]=g._values.length,O)for(N=0;N<P;N++)g._values.push(w),g._index.push(N);g._ptr[b]=g._values.length}else b<I&&(g._ptr.splice(b+1,I-b),g._values.splice(g._ptr[b],g._values.length),g._index.splice(g._ptr[b],g._index.length));if(I=b,_>P){if(O){var q=0;for(H=0;H<I;H++){g._ptr[H]=g._ptr[H]+q,W=g._ptr[H+1]+q;var J=0;for(N=P;N<_;N++,J++)g._values.splice(W+J,0,w),g._index.splice(W+J,0,N),q++}g._ptr[I]=g._values.length}}else if(_<P){var Y=0;for(H=0;H<I;H++){g._ptr[H]=g._ptr[H]-Y;var R=g._ptr[H],z=g._ptr[H+1]-Y;for(W=R;W<z;W++)N=g._index[W],N>_-1&&(g._values.splice(W,1),g._index.splice(W,1),Y++)}g._ptr[H]=g._values.length}return g._size[0]=_,g._size[1]=b,g}u.prototype.reshape=function(g,_){if(!Xt(g))throw new TypeError("Array expected");if(g.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");g.forEach(function(te){if(!er(te)||!yr(te)||te<=-2||te===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+zr(g)+")")});var b=this._size[0]*this._size[1];g=uf(g,b);var C=g[0]*g[1];if(b!==C)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=_?this.clone():this;if(this._size[0]===g[0]&&this._size[1]===g[1])return w;for(var B=[],F=0;F<w._ptr.length;F++)for(var O=0;O<w._ptr[F+1]-w._ptr[F];O++)B.push(F);for(var P=w._values.slice(),I=w._index.slice(),N=0;N<w._index.length;N++){var H=I[N],W=B[N],q=H*w._size[1]+W;B[N]=q%g[1],I[N]=Math.floor(q/g[1])}w._values.length=0,w._index.length=0,w._ptr.length=g[1]+1,w._size=g.slice();for(var J=0;J<w._ptr.length;J++)w._ptr[J]=0;for(var Y=0;Y<P.length;Y++){var R=I[Y],z=B[Y],re=P[Y],Q=p(R,w._ptr[z],w._ptr[z+1],w._index);h(Q,R,z,re,w._values,w._index,w._ptr)}return w},u.prototype.clone=function(){var g=new u({values:this._values?br(this._values):void 0,index:br(this._index),ptr:br(this._ptr),size:br(this._size),datatype:this._datatype});return g},u.prototype.size=function(){return this._size.slice(0)},u.prototype.map=function(g,_){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var b=this,C=this._size[0],w=this._size[1],B=ep(g),F=function(P,I,N){return B===1?g(P):B===2?g(P,[I,N]):g(P,[I,N],b)};return m(this,0,C-1,0,w-1,F,_)};function m(g,_,b,C,w,B,F){var O=[],P=[],I=[],N=r,H=0;Vn(g._datatype)&&(N=t.find(r,[g._datatype,g._datatype])||r,H=t.convert(0,g._datatype));for(var W=function(Ae,Ie,Ue){Ae=B(Ae,Ie,Ue),N(Ae,H)||(O.push(Ae),P.push(Ie))},q=C;q<=w;q++){I.push(O.length);var J=g._ptr[q],Y=g._ptr[q+1];if(F)for(var R=J;R<Y;R++){var z=g._index[R];z>=_&&z<=b&&W(g._values[R],z-_,q-C)}else{for(var re={},Q=J;Q<Y;Q++){var te=g._index[Q];re[te]=g._values[Q]}for(var ve=_;ve<=b;ve++){var me=ve in re?re[ve]:0;W(me,ve-_,q-C)}}}return I.push(O.length),new u({values:O,index:P,ptr:I,size:[b-_+1,w-C+1]})}u.prototype.forEach=function(g,_){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var b=this,C=this._size[0],w=this._size[1],B=0;B<w;B++){var F=this._ptr[B],O=this._ptr[B+1];if(_)for(var P=F;P<O;P++){var I=this._index[P];g(this._values[P],[I,B],b)}else{for(var N={},H=F;H<O;H++){var W=this._index[H];N[W]=this._values[H]}for(var q=0;q<C;q++){var J=q in N?N[q]:0;g(J,[q,B],b)}}}},u.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var g=this._size[1],_=0;_<g;_++)for(var b=this._ptr[_],C=this._ptr[_+1],w=b;w<C;w++){var B=this._index[w];yield{value:this._values[w],index:[B,_]}}},u.prototype.toArray=function(){return y(this._values,this._index,this._ptr,this._size,!0)},u.prototype.valueOf=function(){return y(this._values,this._index,this._ptr,this._size,!1)};function y(g,_,b,C,w){var B=C[0],F=C[1],O=[],P,I;for(P=0;P<B;P++)for(O[P]=[],I=0;I<F;I++)O[P][I]=0;for(I=0;I<F;I++)for(var N=b[I],H=b[I+1],W=N;W<H;W++)P=_[W],O[P][I]=g?w?br(g[W]):g[W]:1;return O}return u.prototype.format=function(g){for(var _=this._size[0],b=this._size[1],C=this.density(),w="Sparse Matrix ["+zr(_,g)+" x "+zr(b,g)+"] density: "+zr(C,g)+`
`,B=0;B<b;B++)for(var F=this._ptr[B],O=this._ptr[B+1],P=F;P<O;P++){var I=this._index[P];w+=`
    (`+zr(I,g)+", "+zr(B,g)+") ==> "+(this._values?zr(this._values[P],g):"X")}return w},u.prototype.toString=function(){return zr(this.toArray())},u.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},u.prototype.diagonal=function(g){if(g){if(gn(g)&&(g=g.toNumber()),!er(g)||!yr(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var _=g>0?g:0,b=g<0?-g:0,C=this._size[0],w=this._size[1],B=Math.min(C-b,w-_),F=[],O=[],P=[];P[0]=0;for(var I=_;I<w&&F.length<B;I++)for(var N=this._ptr[I],H=this._ptr[I+1],W=N;W<H;W++){var q=this._index[W];if(q===I-_+b){F.push(this._values[W]),O[F.length-1]=q-b;break}}return P.push(F.length),new u({values:F,index:O,ptr:P,size:[B,1]})},u.fromJSON=function(g){return new u(g)},u.diagonal=function(g,_,b,C,w){if(!Xt(g))throw new TypeError("Array expected, size parameter");if(g.length!==2)throw new Error("Only two dimensions matrix are supported");if(g=g.map(function(te){if(gn(te)&&(te=te.toNumber()),!er(te)||!yr(te)||te<1)throw new Error("Size values must be positive integers");return te}),b){if(gn(b)&&(b=b.toNumber()),!er(b)||!yr(b))throw new TypeError("The parameter k must be an integer number")}else b=0;var B=r,F=0;Vn(w)&&(B=t.find(r,[w,w])||r,F=t.convert(0,w));var O=b>0?b:0,P=b<0?-b:0,I=g[0],N=g[1],H=Math.min(I-P,N-O),W;if(Xt(_)){if(_.length!==H)throw new Error("Invalid value array length");W=function(ve){return _[ve]}}else if(Rr(_)){var q=_.size();if(q.length!==1||q[0]!==H)throw new Error("Invalid matrix length");W=function(ve){return _.get([ve])}}else W=function(){return _};for(var J=[],Y=[],R=[],z=0;z<N;z++){R.push(J.length);var re=z-O;if(re>=0&&re<H){var Q=W(re);B(Q,F)||(Y.push(re+P),J.push(Q))}}return R.push(J.length),new u({values:J,index:Y,ptr:R,size:[I,N]})},u.prototype.swapRows=function(g,_){if(!er(g)||!yr(g)||!er(_)||!yr(_))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Jt(g,this._size[0]),Jt(_,this._size[0]),u._swapRows(g,_,this._size[1],this._values,this._index,this._ptr),this},u._forEachRow=function(g,_,b,C,w){for(var B=C[g],F=C[g+1],O=B;O<F;O++)w(b[O],_[O])},u._swapRows=function(g,_,b,C,w,B){for(var F=0;F<b;F++){var O=B[F],P=B[F+1],I=p(g,O,P,w),N=p(_,O,P,w);if(I<P&&N<P&&w[I]===g&&w[N]===_){if(C){var H=C[I];C[I]=C[N],C[N]=H}continue}if(I<P&&w[I]===g&&(N>=P||w[N]!==_)){var W=C?C[I]:void 0;w.splice(N,0,_),C&&C.splice(N,0,W),w.splice(N<=I?I+1:I,1),C&&C.splice(N<=I?I+1:I,1);continue}if(N<P&&w[N]===_&&(I>=P||w[I]!==g)){var q=C?C[N]:void 0;w.splice(I,0,g),C&&C.splice(I,0,q),w.splice(I<=N?N+1:N,1),C&&C.splice(I<=N?N+1:N,1)}}},u},{isClass:!0}),Gh="matrix",yw=["typed","Matrix","DenseMatrix","SparseMatrix"],Aw=Tt(Gh,yw,e=>{var{typed:t,Matrix:r,DenseMatrix:n,SparseMatrix:u}=e;return t(Gh,{"":function(){return a([])},string:function(o){return a([],o)},"string, string":function(o,c){return a([],o,c)},Array:function(o){return a(o)},Matrix:function(o){return a(o,o.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(l,o,c){if(o==="dense"||o==="default"||o===void 0)return new n(l,c);if(o==="sparse")return new u(l,c);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),Kh="addScalar",ww=["typed"],Ew=Tt(Kh,ww,e=>{var{typed:t}=e;return t(Kh,{"number, number":rp,"Complex, Complex":function(n,u){return n.add(u)},"BigNumber, BigNumber":function(n,u){return n.plus(u)},"Fraction, Fraction":function(n,u){return n.add(u)},"Unit, Unit":t.referToSelf(r=>(n,u)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(u.value===null||u.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(u))throw new Error("Units do not match");var a=n.clone();return a.value=t.find(r,[a.valueType(),u.valueType()])(a.value,u.value),a.fixPrefix=!1,a})})}),Cw="matAlgo11xS0s",Fw=["typed","equalScalar"],Sw=Tt(Cw,Fw,e=>{var{typed:t,equalScalar:r}=e;return function(u,a,l,o){var c=u._values,p=u._index,f=u._ptr,h=u._size,d=u._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=h[0],y=h[1],g,_=r,b=0,C=l;typeof d=="string"&&(g=d,_=t.find(r,[g,g]),b=t.convert(0,g),a=t.convert(a,g),C=t.find(l,[g,g]));for(var w=[],B=[],F=[],O=0;O<y;O++){F[O]=B.length;for(var P=f[O],I=f[O+1],N=P;N<I;N++){var H=p[N],W=o?C(a,c[N]):C(c[N],a);_(W,b)||(B.push(H),w.push(W))}}return F[y]=B.length,u.createSparseMatrix({values:w,index:B,ptr:F,size:[m,y],datatype:g})}}),Bw="matAlgo14xDs",Ow=["typed"],ip=Tt(Bw,Ow,e=>{var{typed:t}=e;return function(u,a,l,o){var c=u._data,p=u._size,f=u._datatype,h,d=l;typeof f=="string"&&(h=f,a=t.convert(a,h),d=t.find(l,[h,h]));var m=p.length>0?r(d,0,p,p[0],c,a,o):[];return u.createDenseMatrix({data:m,size:br(p),datatype:h})};function r(n,u,a,l,o,c,p){var f=[];if(u===a.length-1)for(var h=0;h<l;h++)f[h]=p?n(c,o[h]):n(o[h],c);else for(var d=0;d<l;d++)f[d]=r(n,u+1,a,a[u+1],o[d],c,p);return f}}),Mw="matAlgo01xDSid",Pw=["typed"],xw=Tt(Mw,Pw,e=>{var{typed:t}=e;return function(n,u,a,l){var o=n._data,c=n._size,p=n._datatype,f=u._values,h=u._index,d=u._ptr,m=u._size,y=u._datatype;if(c.length!==m.length)throw new Pt(c.length,m.length);if(c[0]!==m[0]||c[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+m+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=c[0],_=c[1],b=typeof p=="string"&&p===y?p:void 0,C=b?t.find(a,[b,b]):a,w,B,F=[];for(w=0;w<g;w++)F[w]=[];var O=[],P=[];for(B=0;B<_;B++){for(var I=B+1,N=d[B],H=d[B+1],W=N;W<H;W++)w=h[W],O[w]=l?C(f[W],o[w][B]):C(o[w][B],f[W]),P[w]=I;for(w=0;w<g;w++)P[w]===I?F[w][B]=O[w]:F[w][B]=o[w][B]}return n.createDenseMatrix({data:F,size:[g,_],datatype:b})}}),Tw="matAlgo04xSidSid",Iw=["typed","equalScalar"],Nw=Tt(Tw,Iw,e=>{var{typed:t,equalScalar:r}=e;return function(u,a,l){var o=u._values,c=u._index,p=u._ptr,f=u._size,h=u._datatype,d=a._values,m=a._index,y=a._ptr,g=a._size,_=a._datatype;if(f.length!==g.length)throw new Pt(f.length,g.length);if(f[0]!==g[0]||f[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+g+")");var b=f[0],C=f[1],w,B=r,F=0,O=l;typeof h=="string"&&h===_&&(w=h,B=t.find(r,[w,w]),F=t.convert(0,w),O=t.find(l,[w,w]));var P=o&&d?[]:void 0,I=[],N=[],H=o&&d?[]:void 0,W=o&&d?[]:void 0,q=[],J=[],Y,R,z,re,Q;for(R=0;R<C;R++){N[R]=I.length;var te=R+1;for(re=p[R],Q=p[R+1],z=re;z<Q;z++)Y=c[z],I.push(Y),q[Y]=te,H&&(H[Y]=o[z]);for(re=y[R],Q=y[R+1],z=re;z<Q;z++)if(Y=m[z],q[Y]===te){if(H){var ve=O(H[Y],d[z]);B(ve,F)?q[Y]=null:H[Y]=ve}}else I.push(Y),J[Y]=te,W&&(W[Y]=d[z]);if(H&&W)for(z=N[R];z<I.length;)Y=I[z],q[Y]===te?(P[z]=H[Y],z++):J[Y]===te?(P[z]=W[Y],z++):I.splice(z,1)}return N[C]=I.length,u.createSparseMatrix({values:P,index:I,ptr:N,size:[b,C],datatype:w})}}),kw="matAlgo10xSids",Rw=["typed","DenseMatrix"],Lw=Tt(kw,Rw,e=>{var{typed:t,DenseMatrix:r}=e;return function(u,a,l,o){var c=u._values,p=u._index,f=u._ptr,h=u._size,d=u._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=h[0],y=h[1],g,_=l;typeof d=="string"&&(g=d,a=t.convert(a,g),_=t.find(l,[g,g]));for(var b=[],C=[],w=[],B=0;B<y;B++){for(var F=B+1,O=f[B],P=f[B+1],I=O;I<P;I++){var N=p[I];C[N]=c[I],w[N]=F}for(var H=0;H<m;H++)B===0&&(b[H]=[]),w[H]===F?b[H][B]=o?_(a,C[H]):_(C[H],a):b[H][B]=a}return new r({data:b,size:[m,y],datatype:g})}}),Uw="matAlgo13xDD",Vw=["typed"],jw=Tt(Uw,Vw,e=>{var{typed:t}=e;return function(u,a,l){var o=u._data,c=u._size,p=u._datatype,f=a._data,h=a._size,d=a._datatype,m=[];if(c.length!==h.length)throw new Pt(c.length,h.length);for(var y=0;y<c.length;y++){if(c[y]!==h[y])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+h+")");m[y]=c[y]}var g,_=l;typeof p=="string"&&p===d&&(g=p,_=t.find(l,[g,g]));var b=m.length>0?r(_,0,m,m[0],o,f):[];return u.createDenseMatrix({data:b,size:m,datatype:g})};function r(n,u,a,l,o,c){var p=[];if(u===a.length-1)for(var f=0;f<l;f++)p[f]=n(o[f],c[f]);else for(var h=0;h<l;h++)p[h]=r(n,u+1,a,a[u+1],o[h],c[h]);return p}}),qw="broadcast",zw=["concat"],Ww=Tt(qw,zw,e=>{var{concat:t}=e;return function(a,l){var o=Math.max(a._size.length,l._size.length);if(a._size.length===l._size.length&&a._size.every((_,b)=>_===l._size[b]))return[a,l];for(var c=r(a._size,o,0),p=r(l._size,o,0),f=[],h=0;h<o;h++)f[h]=Math.max(c[h],p[h]);for(var d=0;d<o;d++)u(c,f,d),u(p,f,d);var m=a.clone(),y=l.clone();m._size.length<o?m.reshape(r(m._size,o,1)):y._size.length<o&&y.reshape(r(y._size,o,1));for(var g=0;g<o;g++)m._size[g]<f[g]&&(m=n(m,f[g],g)),y._size[g]<f[g]&&(y=n(y,f[g],g));return[m,y]};function r(a,l,o){return[...Array(l-a.length).fill(o),...a]}function n(a,l,o){return t(...Array(l).fill(a),o)}function u(a,l,o){if(a[o]<l[o]&a[o]>1)throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(a,") not possible to broadcast dimension ").concat(o," with size ").concat(a[o]," to size ").concat(l[o]))}}),Hw="matrixAlgorithmSuite",Gw=["typed","matrix","concat"],Kw=Tt(Hw,Gw,e=>{var{typed:t,matrix:r,concat:n}=e,u=jw({typed:t}),a=ip({typed:t}),l=Ww({concat:n});return function(c){var p=c.elop,f=c.SD||c.DS,h;p?(h={"DenseMatrix, DenseMatrix":(g,_)=>u(...l(g,_),p),"Array, Array":(g,_)=>u(...l(r(g),r(_)),p).valueOf(),"Array, DenseMatrix":(g,_)=>u(...l(r(g),_),p),"DenseMatrix, Array":(g,_)=>u(...l(g,r(_)),p)},c.SS&&(h["SparseMatrix, SparseMatrix"]=(g,_)=>c.SS(...l(g,_),p,!1)),c.DS&&(h["DenseMatrix, SparseMatrix"]=(g,_)=>c.DS(...l(g,_),p,!1),h["Array, SparseMatrix"]=(g,_)=>c.DS(...l(r(g),_),p,!1)),f&&(h["SparseMatrix, DenseMatrix"]=(g,_)=>f(...l(_,g),p,!0),h["SparseMatrix, Array"]=(g,_)=>f(...l(r(_),g),p,!0))):(h={"DenseMatrix, DenseMatrix":t.referToSelf(g=>(_,b)=>u(...l(_,b),g)),"Array, Array":t.referToSelf(g=>(_,b)=>u(...l(r(_),r(b)),g).valueOf()),"Array, DenseMatrix":t.referToSelf(g=>(_,b)=>u(...l(r(_),b),g)),"DenseMatrix, Array":t.referToSelf(g=>(_,b)=>u(...l(_,r(b)),g))},c.SS&&(h["SparseMatrix, SparseMatrix"]=t.referToSelf(g=>(_,b)=>c.SS(...l(_,b),g,!1))),c.DS&&(h["DenseMatrix, SparseMatrix"]=t.referToSelf(g=>(_,b)=>c.DS(...l(_,b),g,!1)),h["Array, SparseMatrix"]=t.referToSelf(g=>(_,b)=>c.DS(...l(r(_),b),g,!1))),f&&(h["SparseMatrix, DenseMatrix"]=t.referToSelf(g=>(_,b)=>f(...l(b,_),g,!0)),h["SparseMatrix, Array"]=t.referToSelf(g=>(_,b)=>f(...l(r(b),_),g,!0))));var d=c.scalar||"any",m=c.Ds||c.Ss;m&&(p?(h["DenseMatrix,"+d]=(g,_)=>a(g,_,p,!1),h[d+", DenseMatrix"]=(g,_)=>a(_,g,p,!0),h["Array,"+d]=(g,_)=>a(r(g),_,p,!1).valueOf(),h[d+", Array"]=(g,_)=>a(r(_),g,p,!0).valueOf()):(h["DenseMatrix,"+d]=t.referToSelf(g=>(_,b)=>a(_,b,g,!1)),h[d+", DenseMatrix"]=t.referToSelf(g=>(_,b)=>a(b,_,g,!0)),h["Array,"+d]=t.referToSelf(g=>(_,b)=>a(r(_),b,g,!1).valueOf()),h[d+", Array"]=t.referToSelf(g=>(_,b)=>a(r(b),_,g,!0).valueOf())));var y=c.sS!==void 0?c.sS:c.Ss;return p?(c.Ss&&(h["SparseMatrix,"+d]=(g,_)=>c.Ss(g,_,p,!1)),y&&(h[d+", SparseMatrix"]=(g,_)=>y(_,g,p,!0))):(c.Ss&&(h["SparseMatrix,"+d]=t.referToSelf(g=>(_,b)=>c.Ss(_,b,g,!1))),y&&(h[d+", SparseMatrix"]=t.referToSelf(g=>(_,b)=>y(b,_,g,!0)))),p&&p.signatures&&wy(h,p.signatures),h}}),Yw="multiplyScalar",Zw=["typed"],$w=Tt(Yw,Zw,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":np,"Complex, Complex":function(n,u){return n.mul(u)},"BigNumber, BigNumber":function(n,u){return n.times(u)},"Fraction, Fraction":function(n,u){return n.mul(u)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),Yh="multiply",Xw=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Jw=Tt(Yh,Xw,e=>{var{typed:t,matrix:r,addScalar:n,multiplyScalar:u,equalScalar:a,dot:l}=e,o=Sw({typed:t,equalScalar:a}),c=ip({typed:t});function p(F,O){switch(F.length){case 1:switch(O.length){case 1:if(F[0]!==O[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(F[0]!==O[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+F[0]+") must match Matrix rows ("+O[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+O.length+" dimensions)")}break;case 2:switch(O.length){case 1:if(F[1]!==O[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+F[1]+") must match Vector length ("+O[0]+")");break;case 2:if(F[1]!==O[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+F[1]+") must match Matrix B rows ("+O[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+O.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+F.length+" dimensions)")}}function f(F,O,P){if(P===0)throw new Error("Cannot multiply two empty vectors");return l(F,O)}function h(F,O){if(O.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(F,O)}function d(F,O){var P=F._data,I=F._size,N=F._datatype,H=O._data,W=O._size,q=O._datatype,J=I[0],Y=W[1],R,z=n,re=u;N&&q&&N===q&&typeof N=="string"&&(R=N,z=t.find(n,[R,R]),re=t.find(u,[R,R]));for(var Q=[],te=0;te<Y;te++){for(var ve=re(P[0],H[0][te]),me=1;me<J;me++)ve=z(ve,re(P[me],H[me][te]));Q[te]=ve}return F.createDenseMatrix({data:Q,size:[Y],datatype:R})}var m=t("_multiplyMatrixVector",{"DenseMatrix, any":g,"SparseMatrix, any":C}),y=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":_,"DenseMatrix, SparseMatrix":b,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":B});function g(F,O){var P=F._data,I=F._size,N=F._datatype,H=O._data,W=O._datatype,q=I[0],J=I[1],Y,R=n,z=u;N&&W&&N===W&&typeof N=="string"&&(Y=N,R=t.find(n,[Y,Y]),z=t.find(u,[Y,Y]));for(var re=[],Q=0;Q<q;Q++){for(var te=P[Q],ve=z(te[0],H[0]),me=1;me<J;me++)ve=R(ve,z(te[me],H[me]));re[Q]=ve}return F.createDenseMatrix({data:re,size:[q],datatype:Y})}function _(F,O){var P=F._data,I=F._size,N=F._datatype,H=O._data,W=O._size,q=O._datatype,J=I[0],Y=I[1],R=W[1],z,re=n,Q=u;N&&q&&N===q&&typeof N=="string"&&(z=N,re=t.find(n,[z,z]),Q=t.find(u,[z,z]));for(var te=[],ve=0;ve<J;ve++){var me=P[ve];te[ve]=[];for(var Fe=0;Fe<R;Fe++){for(var Ae=Q(me[0],H[0][Fe]),Ie=1;Ie<Y;Ie++)Ae=re(Ae,Q(me[Ie],H[Ie][Fe]));te[ve][Fe]=Ae}}return F.createDenseMatrix({data:te,size:[J,R],datatype:z})}function b(F,O){var P=F._data,I=F._size,N=F._datatype,H=O._values,W=O._index,q=O._ptr,J=O._size,Y=O._datatype;if(!H)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var R=I[0],z=J[1],re,Q=n,te=u,ve=a,me=0;N&&Y&&N===Y&&typeof N=="string"&&(re=N,Q=t.find(n,[re,re]),te=t.find(u,[re,re]),ve=t.find(a,[re,re]),me=t.convert(0,re));for(var Fe=[],Ae=[],Ie=[],Ue=O.createSparseMatrix({values:Fe,index:Ae,ptr:Ie,size:[R,z],datatype:re}),Ve=0;Ve<z;Ve++){Ie[Ve]=Ae.length;var tt=q[Ve],We=q[Ve+1];if(We>tt)for(var Me=0,qe=0;qe<R;qe++){for(var at=qe+1,mt=void 0,et=tt;et<We;et++){var He=W[et];Me!==at?(mt=te(P[qe][He],H[et]),Me=at):mt=Q(mt,te(P[qe][He],H[et]))}Me===at&&!ve(mt,me)&&(Ae.push(qe),Fe.push(mt))}}return Ie[z]=Ae.length,Ue}function C(F,O){var P=F._values,I=F._index,N=F._ptr,H=F._datatype;if(!P)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var W=O._data,q=O._datatype,J=F._size[0],Y=O._size[0],R=[],z=[],re=[],Q,te=n,ve=u,me=a,Fe=0;H&&q&&H===q&&typeof H=="string"&&(Q=H,te=t.find(n,[Q,Q]),ve=t.find(u,[Q,Q]),me=t.find(a,[Q,Q]),Fe=t.convert(0,Q));var Ae=[],Ie=[];re[0]=0;for(var Ue=0;Ue<Y;Ue++){var Ve=W[Ue];if(!me(Ve,Fe))for(var tt=N[Ue],We=N[Ue+1],Me=tt;Me<We;Me++){var qe=I[Me];Ie[qe]?Ae[qe]=te(Ae[qe],ve(Ve,P[Me])):(Ie[qe]=!0,z.push(qe),Ae[qe]=ve(Ve,P[Me]))}}for(var at=z.length,mt=0;mt<at;mt++){var et=z[mt];R[mt]=Ae[et]}return re[1]=z.length,F.createSparseMatrix({values:R,index:z,ptr:re,size:[J,1],datatype:Q})}function w(F,O){var P=F._values,I=F._index,N=F._ptr,H=F._datatype;if(!P)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var W=O._data,q=O._datatype,J=F._size[0],Y=O._size[0],R=O._size[1],z,re=n,Q=u,te=a,ve=0;H&&q&&H===q&&typeof H=="string"&&(z=H,re=t.find(n,[z,z]),Q=t.find(u,[z,z]),te=t.find(a,[z,z]),ve=t.convert(0,z));for(var me=[],Fe=[],Ae=[],Ie=F.createSparseMatrix({values:me,index:Fe,ptr:Ae,size:[J,R],datatype:z}),Ue=[],Ve=[],tt=0;tt<R;tt++){Ae[tt]=Fe.length;for(var We=tt+1,Me=0;Me<Y;Me++){var qe=W[Me][tt];if(!te(qe,ve))for(var at=N[Me],mt=N[Me+1],et=at;et<mt;et++){var He=I[et];Ve[He]!==We?(Ve[He]=We,Fe.push(He),Ue[He]=Q(qe,P[et])):Ue[He]=re(Ue[He],Q(qe,P[et]))}}for(var yt=Ae[tt],Et=Fe.length,At=yt;At<Et;At++){var we=Fe[At];me[At]=Ue[we]}}return Ae[R]=Fe.length,Ie}function B(F,O){var P=F._values,I=F._index,N=F._ptr,H=F._datatype,W=O._values,q=O._index,J=O._ptr,Y=O._datatype,R=F._size[0],z=O._size[1],re=P&&W,Q,te=n,ve=u;H&&Y&&H===Y&&typeof H=="string"&&(Q=H,te=t.find(n,[Q,Q]),ve=t.find(u,[Q,Q]));for(var me=re?[]:void 0,Fe=[],Ae=[],Ie=F.createSparseMatrix({values:me,index:Fe,ptr:Ae,size:[R,z],datatype:Q}),Ue=re?[]:void 0,Ve=[],tt,We,Me,qe,at,mt,et,He,yt=0;yt<z;yt++){Ae[yt]=Fe.length;var Et=yt+1;for(at=J[yt],mt=J[yt+1],qe=at;qe<mt;qe++)if(He=q[qe],re)for(We=N[He],Me=N[He+1],tt=We;tt<Me;tt++)et=I[tt],Ve[et]!==Et?(Ve[et]=Et,Fe.push(et),Ue[et]=ve(W[qe],P[tt])):Ue[et]=te(Ue[et],ve(W[qe],P[tt]));else for(We=N[He],Me=N[He+1],tt=We;tt<Me;tt++)et=I[tt],Ve[et]!==Et&&(Ve[et]=Et,Fe.push(et));if(re)for(var At=Ae[yt],we=Fe.length,be=At;be<we;be++){var ke=Fe[be];me[be]=Ue[ke]}}return Ae[z]=Fe.length,Ie}return t(Yh,u,{"Array, Array":t.referTo("Matrix, Matrix",F=>(O,P)=>{p(Ei(O),Ei(P));var I=F(r(O),r(P));return Rr(I)?I.valueOf():I}),"Matrix, Matrix":function(O,P){var I=O.size(),N=P.size();return p(I,N),I.length===1?N.length===1?f(O,P,I[0]):h(O,P):N.length===1?m(O,P):y(O,P)},"Matrix, Array":t.referTo("Matrix,Matrix",F=>(O,P)=>F(O,r(P))),"Array, Matrix":t.referToSelf(F=>(O,P)=>F(r(O,P.storage()),P)),"SparseMatrix, any":function(O,P){return o(O,P,u,!1)},"DenseMatrix, any":function(O,P){return c(O,P,u,!1)},"any, SparseMatrix":function(O,P){return o(P,O,u,!0)},"any, DenseMatrix":function(O,P){return c(P,O,u,!0)},"Array, any":function(O,P){return c(r(O),P,u,!1).valueOf()},"any, Array":function(O,P){return c(r(P),O,u,!0).valueOf()},"any, any":u,"any, any, ...any":t.referToSelf(F=>(O,P,I)=>{for(var N=F(O,P),H=0;H<I.length;H++)N=F(N,I[H]);return N})})}),Zh="conj",Qw=["typed"],eE=Tt(Zh,Qw,e=>{var{typed:t}=e;return t(Zh,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":t.referToSelf(r=>n=>of(n,r))})}),$h="concat",tE=["typed","matrix","isInteger"],rE=Tt($h,tE,e=>{var{typed:t,matrix:r,isInteger:n}=e;return t($h,{"...Array | Matrix | number | BigNumber":function(a){var l,o=a.length,c=-1,p,f=!1,h=[];for(l=0;l<o;l++){var d=a[l];if(Rr(d)&&(f=!0),er(d)||gn(d)){if(l!==o-1)throw new Error("Dimension must be specified as last argument");if(p=c,c=d.valueOf(),!n(c))throw new TypeError("Integer number expected for dimension");if(c<0||l>0&&c>p)throw new zi(c,p+1)}else{var m=br(d).valueOf(),y=Ei(m);if(h[l]=m,p=c,c=y.length-1,l>0&&c!==p)throw new Pt(p+1,c+1)}}if(h.length===0)throw new SyntaxError("At least one matrix expected");for(var g=h.shift();h.length;)g=up(g,h.shift(),c,0);return f?r(g):g},"...string":function(a){return a.join("")}})});function up(e,t,r,n){if(n<r){if(e.length!==t.length)throw new Pt(e.length,t.length);for(var u=[],a=0;a<e.length;a++)u[a]=up(e[a],t[a],r,n+1);return u}else return e.concat(t)}function nE(){throw new Error('No "matrix" implementation available')}var Xh="size",iE=["typed","config","?matrix"],uE=Tt(Xh,iE,e=>{var{typed:t,config:r,matrix:n}=e;return t(Xh,{Matrix:function(a){return a.create(a.size())},Array:Ei,string:function(a){return r.matrix==="Array"?[a.length]:n([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return r.matrix==="Array"?[]:n?n([]):nE()}})}),Jh="add",aE=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],sE=Tt(Jh,aE,e=>{var{typed:t,matrix:r,addScalar:n,equalScalar:u,DenseMatrix:a,SparseMatrix:l,concat:o}=e,c=xw({typed:t}),p=Nw({typed:t,equalScalar:u}),f=Lw({typed:t,DenseMatrix:a}),h=Kw({typed:t,matrix:r,concat:o});return t(Jh,{"any, any":n,"any, any, ...any":t.referToSelf(d=>(m,y,g)=>{for(var _=d(m,y),b=0;b<g.length;b++)_=d(_,g[b]);return _})},h({elop:n,DS:c,SS:p,Ss:f}))}),Qh="dot",oE=["typed","addScalar","multiplyScalar","conj","size"],lE=Tt(Qh,oE,e=>{var{typed:t,addScalar:r,multiplyScalar:n,conj:u,size:a}=e;return t(Qh,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":c});function l(f,h){var d=p(f),m=p(h),y,g;if(d.length===1)y=d[0];else if(d.length===2&&d[1]===1)y=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(m.length===1)g=m[0];else if(m.length===2&&m[1]===1)g=m[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+m.join(", ")+")");if(y!==g)throw new RangeError("Vectors must have equal length ("+y+" != "+g+")");if(y===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return y}function o(f,h){var d=l(f,h),m=Rr(f)?f._data:f,y=Rr(f)?f._datatype:void 0,g=Rr(h)?h._data:h,_=Rr(h)?h._datatype:void 0,b=p(f).length===2,C=p(h).length===2,w=r,B=n;if(y&&_&&y===_&&typeof y=="string"){var F=y;w=t.find(r,[F,F]),B=t.find(n,[F,F])}if(!b&&!C){for(var O=B(u(m[0]),g[0]),P=1;P<d;P++)O=w(O,B(u(m[P]),g[P]));return O}if(!b&&C){for(var I=B(u(m[0]),g[0][0]),N=1;N<d;N++)I=w(I,B(u(m[N]),g[N][0]));return I}if(b&&!C){for(var H=B(u(m[0][0]),g[0]),W=1;W<d;W++)H=w(H,B(u(m[W][0]),g[W]));return H}if(b&&C){for(var q=B(u(m[0][0]),g[0][0]),J=1;J<d;J++)q=w(q,B(u(m[J][0]),g[J][0]));return q}}function c(f,h){l(f,h);for(var d=f._index,m=f._values,y=h._index,g=h._values,_=0,b=r,C=n,w=0,B=0;w<d.length&&B<y.length;){var F=d[w],O=y[B];if(F<O){w++;continue}if(F>O){B++;continue}F===O&&(_=b(_,C(m[w],g[B])),w++,B++)}return _}function p(f){return Rr(f)?f.size():a(f)}}),fE=$A({config:Bs}),cE=ew({}),hE=iw({}),lf=sw({}),ff=fw({Matrix:lf}),Dn=Qy({BigNumber:fE,Complex:cE,DenseMatrix:ff,Fraction:hE}),cf=Ew({typed:Dn}),dE=eE({typed:Dn}),hf=mw({config:Bs,typed:Dn}),pE=hw({typed:Dn}),ap=$w({typed:Dn}),sp=bw({Matrix:lf,equalScalar:hf,typed:Dn}),Is=Aw({DenseMatrix:ff,Matrix:lf,SparseMatrix:sp,typed:Dn}),vE=uE({matrix:Is,config:Bs,typed:Dn}),gE=rE({isInteger:pE,matrix:Is,typed:Dn}),Wr=sE({DenseMatrix:ff,SparseMatrix:sp,addScalar:cf,concat:gE,equalScalar:hf,matrix:Is,typed:Dn}),mE=lE({addScalar:cf,conj:dE,multiplyScalar:ap,size:vE,typed:Dn}),vn=Jw({addScalar:cf,dot:mE,equalScalar:hf,matrix:Is,multiplyScalar:ap,typed:Dn});const za="activePromptStore";function Dr(e,t,r,n=1){return{id:e,text:t,barWeight:n,parsedWeight:r}}function e0(){return{0:Dr(0,"Magic potion in a mystical bottle",1),1:Dr(1,"A crystalline decanter",1),2:Dr(2,"An ornate tequila bottle",1),3:Dr(3,"An antique sake bottle",1),4:Dr(4,"A colorful perfume bottle",1),5:Dr(5,"A glass vase full of vibrant flowers",1),6:Dr(6,"A minimalist glass tea kettle",1),7:Dr(7,"Chihuly glass art",1),8:Dr(8,"A fine wine bottle",1),9:Dr(9,"A gourmet vinegar bottle",1),10:Dr(10,"A stunning fishbowl",1),11:Dr(11,"A striking piece of tourmaline",1),12:Dr(12,"A finely cut piece of sapphire",1),13:Dr(13,"Iittala glass art",1)}}function bi(e,t="circle"){return{weightedPrompts:e||{},weightMode:t,pieAngles:{},circleAngles:{},circleMarker:[270,.33],circleWeightScaling:2,circleExponentialScaling:!0,embedExponentialScaling:2,embedWeightScaling:!0,embedClusters:0,embedPromptLimit:Object.keys(e).length}}function _E(){const e=xn({}),{subscribe:t,set:r,update:n}=e,u=typeof window<"u",a=u&&localStorage[za]?JSON.parse(localStorage[za]):bi(e0());return r({...bi({}),...a}),{subscribe:t,update:l=>{!l||!u||(localStorage[za]=JSON.stringify(l),r({...bi({}),...l}))},get:()=>Wt(e),delete:()=>{u&&(delete localStorage[za],r(bi(e0())))}}}const Mt=_E(),bn=Pn(Mt,e=>Wt(Mt));function DE(e){let t,r,n;return{c(){t=Ft("circle"),this.h()},l(u){t=St(u,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),ie(t).forEach(V),this.h()},h(){x(t,"cx",r=e[0][0]),x(t,"cy",n=e[0][1]),x(t,"r",e[1]),x(t,"stroke",e[3]),x(t,"stroke-width",e[2]),Qt(t,"fill","rgba(0,0,0,0)")},m(u,a){Ce(u,t,a)},p(u,[a]){a&1&&r!==(r=u[0][0])&&x(t,"cx",r),a&1&&n!==(n=u[0][1])&&x(t,"cy",n),a&2&&x(t,"r",u[1]),a&8&&x(t,"stroke",u[3]),a&4&&x(t,"stroke-width",u[2])},i:Te,o:Te,d(u){u&&V(t)}}}function bE(e,t,r){let{xy:n=[500,500]}=t,{radius:u=400}=t,{stroke:a=2}=t,{color:l="rgba(46,67,101, 0.4)"}=t;return e.$$set=o=>{"xy"in o&&r(0,n=o.xy),"radius"in o&&r(1,u=o.radius),"stroke"in o&&r(2,a=o.stroke),"color"in o&&r(3,l=o.color)},[n,u,a,l]}class op extends Rt{constructor(t){super(),Lt(this,t,bE,DE,Ut,{xy:0,radius:1,stroke:2,color:3})}}function yE(e){let t,r,n,u,a;return{c(){t=Ft("circle"),this.h()},l(l){t=St(l,"circle",{cx:!0,cy:!0,r:!0}),ie(t).forEach(V),this.h()},h(){x(t,"cx",r=e[0][0]),x(t,"cy",n=e[0][1]),x(t,"r",e[1]),Qt(t,"fill",e[2])},m(l,o){Ce(l,t,o),u||(a=[Ne(t,"mouseover",e[3]),Ne(t,"mouseout",e[4]),Ne(t,"mousedown",e[5])],u=!0)},p(l,[o]){o&1&&r!==(r=l[0][0])&&x(t,"cx",r),o&1&&n!==(n=l[0][1])&&x(t,"cy",n),o&2&&x(t,"r",l[1]),o&4&&Qt(t,"fill",l[2])},i:Te,o:Te,d(l){l&&V(t),u=!1,Lr(a)}}}function AE(e,t,r){let{xy:n=[100,100]}=t,{radius:u=5}=t,{color:a="black"}=t,{hoverColor:l="white"}=t,{handleMouseDown:o=d=>{}}=t,c=a;function p(){r(2,c=l)}function f(){r(2,c=a)}function h(d){o(d)}return e.$$set=d=>{"xy"in d&&r(0,n=d.xy),"radius"in d&&r(1,u=d.radius),"color"in d&&r(6,a=d.color),"hoverColor"in d&&r(7,l=d.hoverColor),"handleMouseDown"in d&&r(8,o=d.handleMouseDown)},[n,u,c,p,f,h,a,l,o]}class ea extends Rt{constructor(t){super(),Lt(this,t,AE,yE,Ut,{xy:0,radius:1,color:6,hoverColor:7,handleMouseDown:8})}}function wE(e){let t,r,n,u,a;return{c(){t=Ft("line"),this.h()},l(l){t=St(l,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-dasharray":!0,"stroke-width":!0}),ie(t).forEach(V),this.h()},h(){x(t,"x1",r=e[0][0]),x(t,"y1",n=e[0][1]),x(t,"x2",u=e[1][0]),x(t,"y2",a=e[1][1]),x(t,"stroke",e[3]),x(t,"stroke-dasharray","10,10"),x(t,"stroke-width",e[2])},m(l,o){Ce(l,t,o)},p(l,[o]){o&1&&r!==(r=l[0][0])&&x(t,"x1",r),o&1&&n!==(n=l[0][1])&&x(t,"y1",n),o&2&&u!==(u=l[1][0])&&x(t,"x2",u),o&2&&a!==(a=l[1][1])&&x(t,"y2",a),o&8&&x(t,"stroke",l[3]),o&4&&x(t,"stroke-width",l[2])},i:Te,o:Te,d(l){l&&V(t)}}}function EE(e,t,r){let{p1:n=[100,100]}=t,{p2:u=[100,100]}=t,{stroke:a=2}=t,{color:l="rgba(46,67,101, 0.4)"}=t;return e.$$set=o=>{"p1"in o&&r(0,n=o.p1),"p2"in o&&r(1,u=o.p2),"stroke"in o&&r(2,a=o.stroke),"color"in o&&r(3,l=o.color)},[n,u,a,l]}class lp extends Rt{constructor(t){super(),Lt(this,t,EE,wE,Ut,{p1:0,p2:1,stroke:2,color:3})}}function CE(e){let t,r,n,u,a,l,o,c;return{c(){t=Ft("foreignObject"),r=se("div"),n=se("p"),u=$e(e[2]),this.h()},l(p){t=St(p,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var f=ie(t);r=oe(f,"DIV",{class:!0});var h=ie(r);n=oe(h,"P",{});var d=ie(n);u=Xe(d,e[2]),d.forEach(V),h.forEach(V),f.forEach(V),this.h()},h(){Qt(n,"color",e[3]),Qt(n,"user-select","none"),Qt(n,"margin","0"),Qt(n,"pointer-events","none"),Qt(n,"text-align",e[4]),Qt(n,"font-size",`${e[5]}px`),Qt(n,"font-family","sans-serif"),Qt(n,"font-style","italic"),x(r,"class","h-full flex flex-col justify-center"),x(t,"x",a=e[0][0]),x(t,"y",l=e[0][1]),x(t,"width",o=e[1][0]),x(t,"height",c=e[1][1])},m(p,f){Ce(p,t,f),K(t,r),K(r,n),K(n,u)},p(p,[f]){f&4&&Mn(u,p[2]),f&8&&Qt(n,"color",p[3]),f&16&&Qt(n,"text-align",p[4]),f&32&&Qt(n,"font-size",`${p[5]}px`),f&1&&a!==(a=p[0][0])&&x(t,"x",a),f&1&&l!==(l=p[0][1])&&x(t,"y",l),f&2&&o!==(o=p[1][0])&&x(t,"width",o),f&2&&c!==(c=p[1][1])&&x(t,"height",c)},i:Te,o:Te,d(p){p&&V(t)}}}function FE(e,t,r){let{xy:n=[100,100]}=t,{wh:u=[100,100]}=t,{text:a=""}=t,{color:l="rgba(96,117,151, 1)"}=t,{textAlign:o="center"}=t,{fontSize:c=12}=t;return e.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,u=p.wh),"text"in p&&r(2,a=p.text),"color"in p&&r(3,l=p.color),"textAlign"in p&&r(4,o=p.textAlign),"fontSize"in p&&r(5,c=p.fontSize)},[n,u,a,l,o,c]}class Ns extends Rt{constructor(t){super(),Lt(this,t,FE,CE,Ut,{xy:0,wh:1,text:2,color:3,textAlign:4,fontSize:5})}}function SE(e){let t,r,n,u,a,l,o,c,p,f,h;return{c(){t=Ft("circle"),u=Ke(),a=Ft("foreignObject"),l=se("p"),o=$e(e[4]),this.h()},l(d){t=St(d,"circle",{cx:!0,cy:!0,r:!0}),ie(t).forEach(V),u=Ye(d),a=St(d,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var m=ie(a);l=oe(m,"P",{style:!0,class:!0});var y=ie(l);o=Xe(y,e[4]),y.forEach(V),m.forEach(V),this.h()},h(){x(t,"cx",r=e[0][0]),x(t,"cy",n=e[0][1]),x(t,"r",e[1]),Qt(t,"fill",e[3]),Qt(l,"color",e[2]),Qt(l,"user-select","none"),Qt(l,"margin","0"),x(l,"class","heavy svelte-6if1p2"),x(a,"x",c=e[0][0]-e[1]),x(a,"y",p=e[0][1]-e[1]),x(a,"width",f=e[1]*2),x(a,"height",h=e[1]*2)},m(d,m){Ce(d,t,m),Ce(d,u,m),Ce(d,a,m),K(a,l),K(l,o)},p(d,[m]){m&1&&r!==(r=d[0][0])&&x(t,"cx",r),m&1&&n!==(n=d[0][1])&&x(t,"cy",n),m&2&&x(t,"r",d[1]),m&8&&Qt(t,"fill",d[3]),m&16&&Mn(o,d[4]),m&4&&Qt(l,"color",d[2]),m&3&&c!==(c=d[0][0]-d[1])&&x(a,"x",c),m&3&&p!==(p=d[0][1]-d[1])&&x(a,"y",p),m&2&&f!==(f=d[1]*2)&&x(a,"width",f),m&2&&h!==(h=d[1]*2)&&x(a,"height",h)},i:Te,o:Te,d(d){d&&V(t),d&&V(u),d&&V(a)}}}function BE(e,t,r){let{xy:n=[100,100]}=t,{radius:u=25}=t,{textColor:a="rgba(96,117,151, 1)"}=t,{bgColor:l="black"}=t,{weight:o=""}=t;return e.$$set=c=>{"xy"in c&&r(0,n=c.xy),"radius"in c&&r(1,u=c.radius),"textColor"in c&&r(2,a=c.textColor),"bgColor"in c&&r(3,l=c.bgColor),"weight"in c&&r(4,o=c.weight)},[n,u,a,l,o]}class OE extends Rt{constructor(t){super(),Lt(this,t,BE,SE,Ut,{xy:0,radius:1,textColor:2,bgColor:3,weight:4})}}function yi(e,t,r){const n=e[0]-t[0],u=e[1]-t[1],a=360+Math.atan2(u,n)*180/Math.PI,l=Math.sqrt(n*n+u*u);return[a%360,l/r]}function jn(e,t,r){const n=t[0]%360*Math.PI/180,u=[r*t[1]*Math.cos(n),r*t[1]*Math.sin(n)];return Wr(e,u)}function Hl(e,t,r){const n=e[0]-t[0],u=e[1]-t[1],a=Math.sqrt(n*n+u*u),l=r/a,o=t[0]+n*l,c=t[1]+u*l;return[o,c]}function ME(e,t,r){const n=e[0]-t[0],u=e[1]-t[1];return Math.sqrt(n*n+u*u)<r}function fp(e,t){const r=t%360*Math.PI/180;let n,u;const a=Math.cos(r),l=Math.sin(r);return n=(e[0]+5)*-1.2*a,u=(e[1]+5)*-1.2*l,n-=e[0],u-=e[1],[n,u]}function PE(e){return Math.round(e*100)}function Pr(e){return Math.max(1-Math.pow(1-e,2),.25).toFixed(2)}function xE(e){const t=e.weightMode;let r="parsedWeight";switch(t){case"circle":r="circleWeight";break;case"bars":r="barWeight";break;case"embed":r="embedWeight";break;case"pie":r="pieWeight";break}return e.weightedPrompts?Math.max(...Object.values(e.weightedPrompts).map(n=>n[r])):0}function TE(e){const t=e.weightMode;let r="parsedWeight";switch(t){case"circle":r="circleWeight";break;case"bars":r="barWeight";break;case"embed":r="embedWeight";break;case"pie":r="pieWeight";break}return e.weightedPrompts?Object.values(e.weightedPrompts).reduce((n,u)=>n+u[r],0):0}function t0(e,t){const r=e.weightMode;let n="parsedWeight";switch(r){case"circle":n="circleWeight";break;case"bars":n="barWeight";break;case"embed":n="embedWeight";break;case"pie":n="pieWeight";break}return e.weightedPrompts[t]?e.weightedPrompts[t][n]/xE(e):0}function ui(e,t){const r=e.weightMode;let n="parsedWeight";switch(r){case"circle":n="circleWeight";break;case"bars":n="barWeight";break;case"embed":n="embedWeight";break;case"pie":n="pieWeight";break}if(!e.weightedPrompts[t])return 0;const u=e.weightedPrompts[t][n];return PE((u||0)/TE(e))}function IE(e,t,r){const a=r*.6,l=Math.floor(e/a);return Math.ceil(t/l)*r*1.2}function tn(e,t,r){const n=IE(e,t,r)+10;return[e,n]}function Ya(e,t){const r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function ks(e){return vn(e,.5)}function qi(e){const t=e.currentTarget;var r=t.createSVGPoint();r.x=e.clientX,r.y=e.clientY;const n=r.matrixTransform(t.getScreenCTM().inverse());return[n.x,n.y]}function r0(e,t,r){const n=e.slice();return n[18]=t[r][0],n[19]=t[r][1],n}function n0(e){let t,r,n=Object.entries(e[5].weightedPrompts).length>0,u,a;t=new op({props:{xy:e[0],radius:e[1]}});let l=Object.entries(e[5].weightedPrompts),o=[];for(let f=0;f<l.length;f+=1)o[f]=i0(r0(e,l,f));const c=f=>Le(o[f],1,1,()=>{o[f]=null});let p=n&&u0(e);return{c(){ht(t.$$.fragment);for(let f=0;f<o.length;f+=1)o[f].c();r=Zt(),p&&p.c(),u=Zt()},l(f){dt(t.$$.fragment,f);for(let h=0;h<o.length;h+=1)o[h].l(f);r=Zt(),p&&p.l(f),u=Zt()},m(f,h){pt(t,f,h);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(f,h);Ce(f,r,h),p&&p.m(f,h),Ce(f,u,h),a=!0},p(f,h){const d={};if(h&1&&(d.xy=f[0]),h&2&&(d.radius=f[1]),t.$set(d),h&895){l=Object.entries(f[5].weightedPrompts);let m;for(m=0;m<l.length;m+=1){const y=r0(f,l,m);o[m]?(o[m].p(y,h),xe(o[m],1)):(o[m]=i0(y),o[m].c(),xe(o[m],1),o[m].m(r.parentNode,r))}for(mn(),m=l.length;m<o.length;m+=1)c(m);_n()}h&32&&(n=Object.entries(f[5].weightedPrompts).length>0),n?p?(p.p(f,h),h&32&&xe(p,1)):(p=u0(f),p.c(),xe(p,1),p.m(u.parentNode,u)):p&&(mn(),Le(p,1,1,()=>{p=null}),_n())},i(f){if(!a){xe(t.$$.fragment,f);for(let h=0;h<l.length;h+=1)xe(o[h]);xe(p),a=!0}},o(f){Le(t.$$.fragment,f),o=o.filter(Boolean);for(let h=0;h<o.length;h+=1)Le(o[h]);Le(p),a=!1},d(f){vt(t,f),rf(o,f),f&&V(r),p&&p.d(f),f&&V(u)}}}function i0(e){let t,r,n,u,a;t=new lp({props:{p1:jn(e[0],e[5].circleMarker,e[1]),p2:e[6][e[18]].xy}});function l(){return e[12](e[18])}return r=new ea({props:{xy:e[6][e[18]].xy,radius:e[2],color:"rgba(76,97,141, 1)",handleMouseDown:l}}),n=new Ns({props:{xy:e[9](e[6][e[18]].xy,tn(e[3],e[19].text.length,e[4])),color:`rgba(255,255,255,${Pr(e[6][e[18]].unitWeight)}`,wh:tn(e[3],e[19].text.length,e[4]),fontSize:e[4],text:e[19].text}}),u=new OE({props:{xy:vn(Wr(jn(e[0],e[5].circleMarker,e[1]),e[6][e[18]].xy),.5),weight:ui(e[5],e[18]),radius:15,textColor:`rgba(255,255,255,${Pr(e[6][e[18]].unitWeight)}`,bgColor:"rgb(8, 11, 22)"}}),{c(){ht(t.$$.fragment),ht(r.$$.fragment),ht(n.$$.fragment),ht(u.$$.fragment)},l(o){dt(t.$$.fragment,o),dt(r.$$.fragment,o),dt(n.$$.fragment,o),dt(u.$$.fragment,o)},m(o,c){pt(t,o,c),pt(r,o,c),pt(n,o,c),pt(u,o,c),a=!0},p(o,c){e=o;const p={};c&35&&(p.p1=jn(e[0],e[5].circleMarker,e[1])),c&96&&(p.p2=e[6][e[18]].xy),t.$set(p);const f={};c&96&&(f.xy=e[6][e[18]].xy),c&4&&(f.radius=e[2]),c&32&&(f.handleMouseDown=l),r.$set(f);const h={};c&120&&(h.xy=e[9](e[6][e[18]].xy,tn(e[3],e[19].text.length,e[4]))),c&96&&(h.color=`rgba(255,255,255,${Pr(e[6][e[18]].unitWeight)}`),c&56&&(h.wh=tn(e[3],e[19].text.length,e[4])),c&16&&(h.fontSize=e[4]),c&32&&(h.text=e[19].text),n.$set(h);const d={};c&99&&(d.xy=vn(Wr(jn(e[0],e[5].circleMarker,e[1]),e[6][e[18]].xy),.5)),c&32&&(d.weight=ui(e[5],e[18])),c&96&&(d.textColor=`rgba(255,255,255,${Pr(e[6][e[18]].unitWeight)}`),u.$set(d)},i(o){a||(xe(t.$$.fragment,o),xe(r.$$.fragment,o),xe(n.$$.fragment,o),xe(u.$$.fragment,o),a=!0)},o(o){Le(t.$$.fragment,o),Le(r.$$.fragment,o),Le(n.$$.fragment,o),Le(u.$$.fragment,o),a=!1},d(o){vt(t,o),vt(r,o),vt(n,o),vt(u,o)}}}function u0(e){let t,r;return t=new ea({props:{xy:jn(e[0],e[5].circleMarker,e[1]),radius:10,color:"rgba(136,157,191, 1)",handleMouseDown:e[13]}}),{c(){ht(t.$$.fragment)},l(n){dt(t.$$.fragment,n)},m(n,u){pt(t,n,u),r=!0},p(n,u){const a={};u&35&&(a.xy=jn(n[0],n[5].circleMarker,n[1])),t.$set(a)},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Le(t.$$.fragment,n),r=!1},d(n){vt(t,n)}}}function NE(e){let t,r,n,u,a=e[6]&&e[5].weightedPrompts&&n0(e);return{c(){t=Ft("svg"),a&&a.c(),this.h()},l(l){t=St(l,"svg",{id:!0,class:!0});var o=ie(t);a&&a.l(o),o.forEach(V),this.h()},h(){x(t,"id","svg"),x(t,"class","w-full h-full")},m(l,o){Ce(l,t,o),a&&a.m(t,null),r=!0,n||(u=[Ne(t,"mousemove",e[10]),Ne(t,"mouseup",e[7]),Ne(t,"dblclick",e[11])],n=!0)},p(l,[o]){l[6]&&l[5].weightedPrompts?a?(a.p(l,o),o&96&&xe(a,1)):(a=n0(l),a.c(),xe(a,1),a.m(t,null)):a&&(mn(),Le(a,1,1,()=>{a=null}),_n())},i(l){r||(xe(a),r=!0)},o(l){Le(a),r=!1},d(l){l&&V(t),a&&a.d(),n=!1,Lr(u)}}}function a0(e,t){return e?Object.entries(e).reduce((r,[n,u],a)=>{const l=r[n]||a*(360/Object.keys(e).length)-90;return r[n]=l,r},t):null}function kE(e,t,r){let n,u;Nt(e,bn,F=>r(5,u=F));let{center:a=[450,450]}=t,{radius:l=250}=t,{pointRadius:o=10}=t,{textWidth:c=150}=t,{fontSize:p=13}=t,f=[0,0],h=null;function d(F){h=null}function m(F){h=F}function y(F,O){let P=yi(F,a,l)[0]-180;P<0&&(P+=360);const I=fp(ks(O),P);return Wr(F,I)}function g(F){const O=ME(F,a,l)?yi(F,a,l):yi(Hl(F,a,l),a,l);r(6,n=C(u.weightedPrompts,a,l,u.circleWeightScaling,u.circleExponentialScaling,O,u.circleAngles))}function _(F){if(f=qi(F),h==="main")g(f);else if(h){const O={...u.weightedPrompts[h]},P=Hl(f,a,l),I=yi(P,a,l)[0],N={...u.circleAngles};N[O.id]=I;const H={...u.weightedPrompts};H[h]=O,r(6,n=C(H,a,l,u.circleWeightScaling,u.circleExponentialScaling,u.circleMarker,N))}}function b(F){f=qi(F),g(f)}function C(F,O,P,I,N,H,W){if(!F||!O||!P||!I||!H)return null;let q=Object.entries(F).reduce((R,[z,re])=>(R[z]={xy:jn(O,[W[z],1],P)},R),{});q=Object.entries(q).reduce((R,[z,re])=>(R[z]={...R[z],distance:Ya(re.xy,jn(O,H,P))},R),q);const J=Object.values(q).reduce((R,z)=>R+z.distance,0);q=Object.entries(q).reduce((R,[z,re])=>(R[z]={...R[z],unitDistance:Math.round(re.distance/J*100)/100},R),q),q=Object.entries(q).reduce((R,[z,re])=>(R[z]={...R[z],invertedUnitDistance:Math.round((1-re.unitDistance)*100)/100},R),q),q=Object.entries(q).reduce((R,[z,re])=>(N?R[z]={...R[z],unitWeight:Math.round(Math.pow(1-re.distance/(2*P),I)*100)/100}:R[z]={...R[z],unitWeight:Math.round((1-re.distance/(2*P))*100)/100},R),q);const Y={...F};return Object.entries(q).forEach(([R,z])=>{Y[R].circleWeight=z.unitWeight}),Mt.update({...u,circleMarker:H,weightedPrompts:Y,circleAngles:W}),q}const w=F=>m(F),B=()=>m("main");return e.$$set=F=>{"center"in F&&r(0,a=F.center),"radius"in F&&r(1,l=F.radius),"pointRadius"in F&&r(2,o=F.pointRadius),"textWidth"in F&&r(3,c=F.textWidth),"fontSize"in F&&r(4,p=F.fontSize)},e.$$.update=()=>{e.$$.dirty&32&&Object.keys(u.circleAngles).length!==Object.keys(u.weightedPrompts).length&&Mt.update({...u,circleAngles:a0(u.weightedPrompts,{})}),e.$$.dirty&35&&r(6,n=C(u.weightedPrompts,a,l,u.circleWeightScaling,u.circleExponentialScaling,u.circleMarker,u.circleAngles||a0(u.weightedPrompts,{})))},[a,l,o,c,p,u,n,d,m,y,_,b,w,B]}class RE extends Rt{constructor(t){super(),Lt(this,t,kE,NE,Ut,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function s0(e){let t,r,n,u,a,l,o,c;return{c(){t=se("div"),r=se("label"),n=se("span"),u=$e("Scaling Power"),a=Ke(),l=se("input"),this.h()},l(p){t=oe(p,"DIV",{class:!0});var f=ie(t);r=oe(f,"LABEL",{class:!0});var h=ie(r);n=oe(h,"SPAN",{class:!0});var d=ie(n);u=Xe(d,"Scaling Power"),d.forEach(V),h.forEach(V),a=Ye(f),l=oe(f,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),f.forEach(V),this.h()},h(){x(n,"class","label-text"),x(r,"class","label"),x(l,"type","range"),x(l,"min","0.5"),x(l,"max","3"),x(l,"step","0.1"),x(l,"class","range"),x(t,"class","w-full px-2")},m(p,f){Ce(p,t,f),K(t,r),K(r,n),K(n,u),K(t,a),K(t,l),Ai(l,e[0]),o||(c=[Ne(l,"change",e[6]),Ne(l,"input",e[6])],o=!0)},p(p,f){f&1&&Ai(l,p[0])},d(p){p&&V(t),o=!1,Lr(c)}}}function LE(e){let t,r,n,u,a,l,o,c,p,f,h,d,m,y,g;r=new RE({props:{center:[Math.round(e[2]/2),Math.round(e[3]/2)],radius:Math.round(Math.min(e[2],e[3])/2)-150}});let _=e[1]&&s0(e);return{c(){t=se("div"),ht(r.$$.fragment),u=Ke(),a=se("div"),l=se("div"),o=se("label"),c=se("span"),p=$e("Exponential Scaling"),f=Ke(),h=se("input"),d=Ke(),_&&_.c(),this.h()},l(b){t=oe(b,"DIV",{class:!0});var C=ie(t);dt(r.$$.fragment,C),C.forEach(V),u=Ye(b),a=oe(b,"DIV",{class:!0});var w=ie(a);l=oe(w,"DIV",{class:!0});var B=ie(l);o=oe(B,"LABEL",{class:!0});var F=ie(o);c=oe(F,"SPAN",{class:!0});var O=ie(c);p=Xe(O,"Exponential Scaling"),O.forEach(V),F.forEach(V),f=Ye(B),h=oe(B,"INPUT",{type:!0,class:!0}),B.forEach(V),d=Ye(w),_&&_.l(w),w.forEach(V),this.h()},h(){x(t,"class","w-full h-full"),Cs(()=>e[4].call(t)),x(c,"class","label-text"),x(o,"class","label"),x(h,"type","checkbox"),x(h,"class","toggle"),x(l,"class","w-52 px-2"),x(a,"class","px-2 py-4 pb-0 flex")},m(b,C){Ce(b,t,C),pt(r,t,null),n=Fs(t,e[4].bind(t)),Ce(b,u,C),Ce(b,a,C),K(a,l),K(l,o),K(o,c),K(c,p),K(l,f),K(l,h),h.checked=e[1],K(a,d),_&&_.m(a,null),m=!0,y||(g=Ne(h,"change",e[5]),y=!0)},p(b,[C]){const w={};C&12&&(w.center=[Math.round(b[2]/2),Math.round(b[3]/2)]),C&12&&(w.radius=Math.round(Math.min(b[2],b[3])/2)-150),r.$set(w),C&2&&(h.checked=b[1]),b[1]?_?_.p(b,C):(_=s0(b),_.c(),_.m(a,null)):_&&(_.d(1),_=null)},i(b){m||(xe(r.$$.fragment,b),m=!0)},o(b){Le(r.$$.fragment,b),m=!1},d(b){b&&V(t),vt(r),n(),b&&V(u),b&&V(a),_&&_.d(),y=!1,g()}}}function UE(e,t,r){let n;Nt(e,bn,h=>r(7,n=h));let u,a,l=n.circleWeightScaling||2,o=xd(n.circleExponentialScaling)?!0:n.circleExponentialScaling;function c(){u=this.clientWidth,a=this.clientHeight,r(2,u),r(3,a)}function p(){o=this.checked,r(1,o)}function f(){l=Hb(this.value),r(0,l)}return e.$$.update=()=>{e.$$.dirty&3&&Mt.update({...Mt.get(),circleExponentialScaling:o,circleWeightScaling:l})},[l,o,u,a,c,p,f]}class VE extends Rt{constructor(t){super(),Lt(this,t,UE,LE,Ut,{})}}function jE(e){let t,r,n,u,a,l,o;return{c(){t=Ft("rect"),this.h()},l(c){t=St(c,"rect",{x:!0,y:!0,width:!0,height:!0}),ie(t).forEach(V),this.h()},h(){x(t,"x",r=e[0][0]),x(t,"y",n=e[0][1]),x(t,"width",u=Math.max(e[1][0],0)),x(t,"height",a=Math.max(e[1][1],0)),Qt(t,"fill",e[2])},m(c,p){Ce(c,t,p),l||(o=[Ne(t,"mouseover",function(){Qo(e[4])&&e[4].apply(this,arguments)}),Ne(t,"mouseout",function(){Qo(e[5])&&e[5].apply(this,arguments)}),Ne(t,"mousedown",function(){Qo(e[3])&&e[3].apply(this,arguments)})],l=!0)},p(c,[p]){e=c,p&1&&r!==(r=e[0][0])&&x(t,"x",r),p&1&&n!==(n=e[0][1])&&x(t,"y",n),p&2&&u!==(u=Math.max(e[1][0],0))&&x(t,"width",u),p&2&&a!==(a=Math.max(e[1][1],0))&&x(t,"height",a),p&4&&Qt(t,"fill",e[2])},i:Te,o:Te,d(c){c&&V(t),l=!1,Lr(o)}}}function qE(e,t,r){let{xy:n=[500,500]}=t,{wh:u=[100,100]}=t,{color:a="rgba(46,67,101, 0.4)"}=t,{handleMouseDown:l=p=>{}}=t,{handleMouseOver:o=p=>{}}=t,{handleMouseOut:c=p=>{}}=t;return e.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,u=p.wh),"color"in p&&r(2,a=p.color),"handleMouseDown"in p&&r(3,l=p.handleMouseDown),"handleMouseOver"in p&&r(4,o=p.handleMouseOver),"handleMouseOut"in p&&r(5,c=p.handleMouseOut)},[n,u,a,l,o,c]}class il extends Rt{constructor(t){super(),Lt(this,t,qE,jE,Ut,{xy:0,wh:1,color:2,handleMouseDown:3,handleMouseOver:4,handleMouseOut:5})}}function o0(e,t,r){const n=e.slice();return n[51]=t[r][0],n[52]=t[r][1],n[53]=t[r][2],n}function l0(e,t){let r,n,u,a,l,o;n=new Ns({props:{xy:[t[3][0]+t[0],t[3][1]+t[52]*t[4]+t[52]],color:`rgba(255,255,255,${Pr(t[53].barWeight/t[12]||0)})`,wh:t[5][t[51]],text:t[53].text,textAlign:"right",fontSize:t[1]}});function c(...g){return t[39](t[51],...g)}function p(...g){return t[40](t[51],...g)}u=new il({props:{color:t[13](0),handleMouseOver:c,handleMouseOut:p,xy:[t[10],t[3][1]+t[52]*t[4]+t[52]],wh:[t[11],t[4]-2]}});function f(...g){return t[41](t[51],...g)}function h(...g){return t[42](t[51],...g)}a=new il({props:{color:t[8]===t[51]||t[7]===t[51]||t[9]===t[51]?t[13](Pr((t[53].barWeight||0)/t[12]+.15)):t[13](Pr(t[53].barWeight||0)),handleMouseOver:f,handleMouseOut:h,xy:[t[10],t[3][1]+t[52]*t[4]+t[52]],wh:[(t[53].barWeight||0)*t[11],t[4]-2]}});function d(...g){return t[43](t[51],...g)}function m(...g){return t[44](t[51],...g)}function y(...g){return t[45](t[51],...g)}return l=new il({props:{color:t[9]===t[51]?t[15]:t[14],handleMouseOver:d,handleMouseOut:m,handleMouseDown:y,xy:[t[10]+(t[53].barWeight||0)*t[11],t[3][1]+t[52]*t[4]+t[52]],wh:[t[2],t[4]-2]}}),{key:e,first:null,c(){r=Zt(),ht(n.$$.fragment),ht(u.$$.fragment),ht(a.$$.fragment),ht(l.$$.fragment),this.h()},l(g){r=Zt(),dt(n.$$.fragment,g),dt(u.$$.fragment,g),dt(a.$$.fragment,g),dt(l.$$.fragment,g),this.h()},h(){this.first=r},m(g,_){Ce(g,r,_),pt(n,g,_),pt(u,g,_),pt(a,g,_),pt(l,g,_),o=!0},p(g,_){t=g;const b={};_[0]&89&&(b.xy=[t[3][0]+t[0],t[3][1]+t[52]*t[4]+t[52]]),_[0]&4160&&(b.color=`rgba(255,255,255,${Pr(t[53].barWeight/t[12]||0)})`),_[0]&96&&(b.wh=t[5][t[51]]),_[0]&64&&(b.text=t[53].text),_[0]&2&&(b.fontSize=t[1]),n.$set(b);const C={};_[0]&64&&(C.handleMouseOver=c),_[0]&64&&(C.handleMouseOut=p),_[0]&1112&&(C.xy=[t[10],t[3][1]+t[52]*t[4]+t[52]]),_[0]&2064&&(C.wh=[t[11],t[4]-2]),u.$set(C);const w={};_[0]&5056&&(w.color=t[8]===t[51]||t[7]===t[51]||t[9]===t[51]?t[13](Pr((t[53].barWeight||0)/t[12]+.15)):t[13](Pr(t[53].barWeight||0))),_[0]&64&&(w.handleMouseOver=f),_[0]&64&&(w.handleMouseOut=h),_[0]&1112&&(w.xy=[t[10],t[3][1]+t[52]*t[4]+t[52]]),_[0]&2128&&(w.wh=[(t[53].barWeight||0)*t[11],t[4]-2]),a.$set(w);const B={};_[0]&576&&(B.color=t[9]===t[51]?t[15]:t[14]),_[0]&64&&(B.handleMouseOver=d),_[0]&64&&(B.handleMouseOut=m),_[0]&64&&(B.handleMouseDown=y),_[0]&3160&&(B.xy=[t[10]+(t[53].barWeight||0)*t[11],t[3][1]+t[52]*t[4]+t[52]]),_[0]&20&&(B.wh=[t[2],t[4]-2]),l.$set(B)},i(g){o||(xe(n.$$.fragment,g),xe(u.$$.fragment,g),xe(a.$$.fragment,g),xe(l.$$.fragment,g),o=!0)},o(g){Le(n.$$.fragment,g),Le(u.$$.fragment,g),Le(a.$$.fragment,g),Le(l.$$.fragment,g),o=!1},d(g){g&&V(r),vt(n,g),vt(u,g),vt(a,g),vt(l,g)}}}function zE(e){let t,r=[],n=new Map,u,a,l,o=e[6];const c=p=>p[51];for(let p=0;p<o.length;p+=1){let f=o0(e,o,p),h=c(f);n.set(h,r[p]=l0(h,f))}return{c(){t=Ft("svg");for(let p=0;p<r.length;p+=1)r[p].c();this.h()},l(p){t=St(p,"svg",{id:!0,class:!0});var f=ie(t);for(let h=0;h<r.length;h+=1)r[h].l(f);f.forEach(V),this.h()},h(){x(t,"id","svg"),x(t,"class","w-full h-full")},m(p,f){Ce(p,t,f);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(t,null);u=!0,a||(l=[Ne(t,"mousemove",e[25]),Ne(t,"mouseup",e[24]),Ne(t,"dblclick",e[23])],a=!0)},p(p,f){f[0]&8388607&&(o=p[6],mn(),r=Fi(r,f,c,1,p,o,n,t,Sd,l0,null,o0),_n())},i(p){if(!u){for(let f=0;f<o.length;f+=1)xe(r[f]);u=!0}},o(p){for(let f=0;f<r.length;f+=1)Le(r[f]);u=!1},d(p){p&&V(t);for(let f=0;f<r.length;f+=1)r[f].d();a=!1,Lr(l)}}}function WE(e,t,r){let n,u,a,l,o,c,p,f,h,d,m,y,g;Nt(e,bn,we=>r(38,g=we));let{center:_=[0,0]}=t,{dimensions:b=[100,100]}=t,{maxWidth:C=1e3}=t,{pointRadius:w=10}=t,{textWidth:B=250}=t,{horizontalPad:F=20}=t,{verticalPad:O=2}=t,{textBarPad:P=10}=t,{fontSize:I=13}=t,{handleWidth:N=20}=t,H=we=>`rgba(46,67,101, ${we})`,W=we=>`rgba(76,97,131, ${we})`,q=null,J=null,Y=null,R=W(.3),z=W(.8),re=null,Q=null,te=null;function ve(we,be){r(8,J=we)}function me(we,be){r(7,q=we)}function Fe(we,be){r(9,Y=we)}function Ae(we,be){r(8,J=null)}function Ie(we,be){r(7,q=null)}function Ue(we,be){r(9,Y=null)}function Ve(we,be){re=we}function tt(we){let be=re||J||Y||q;if(!be)return;const ke=qi(we);Me(be,ke)}function We(we){re=null,clearInterval(Q),Q=null,te=null}function Me(we,be){let it=Math.min(d,Math.max(0,be[0]-m))/d,_t={...g.weightedPrompts},L={..._t[we]};L.barWeight=it,_t[we]=L,Mt.update({...g,weightedPrompts:_t})}function qe(we){let be=re;if(!be)return;const ke=qi(we);if(Me(be,ke),re){let it=m+d+N,_t=m;ke[0]>it&&!Q?(te=Date.now(),Q=setInterval(()=>{if(Date.now()-te<1e3)return;let L={...g.weightedPrompts};const j=Object.entries(L).reduce((Z,[le,ne])=>(le!==re?Z[le]={...ne,barWeight:Math.max(0,(ne.barWeight||0)-.01)}:Z[le]={...ne,barWeight:Math.min(1,(ne.barWeight||0)+.01)},Z),{});Mt.update({...g,weightedPrompts:j})},100)):ke[0]<_t&&!Q?(te=Date.now(),Q=setInterval(()=>{if(Date.now()-te<1e3)return;let L={...g.weightedPrompts};const j=Object.entries(L).reduce((Z,[le,ne])=>(le!==re?Z[le]={...ne,barWeight:Math.min(1,(ne.barWeight||0)+.01)}:Z[le]={...ne,barWeight:Math.max(0,(ne.barWeight||0)-.01)},Z),{});Mt.update({...g,weightedPrompts:j})},100)):ke[0]<it&&ke[0]>_t&&Q&&(clearInterval(Q),Q=null,te=null)}}const at=(we,be)=>me(we),mt=(we,be)=>Ie(),et=(we,be)=>ve(we),He=(we,be)=>Ae(),yt=(we,be)=>Fe(we),Et=(we,be)=>Ue(),At=(we,be)=>Ve(we);return e.$$set=we=>{"center"in we&&r(26,_=we.center),"dimensions"in we&&r(27,b=we.dimensions),"maxWidth"in we&&r(28,C=we.maxWidth),"pointRadius"in we&&r(29,w=we.pointRadius),"textWidth"in we&&r(30,B=we.textWidth),"horizontalPad"in we&&r(0,F=we.horizontalPad),"verticalPad"in we&&r(31,O=we.verticalPad),"textBarPad"in we&&r(32,P=we.textBarPad),"fontSize"in we&&r(1,I=we.fontSize),"handleWidth"in we&&r(2,N=we.handleWidth)},e.$$.update=()=>{e.$$.dirty[1]&128&&r(6,n=Object.entries(g.weightedPrompts).map(([we,be],ke)=>[we,ke,be])),e.$$.dirty[1]&128&&r(36,u=Object.keys(g.weightedPrompts).length),e.$$.dirty[0]&134217728&&r(35,a=[b[0]-50,b[1]-50]),e.$$.dirty[0]&1073741890&&r(5,l=n.reduce((we,[be,ke,it])=>{const[_t,L]=tn(B,it.text.length,I);return we[be]=[_t,L],we},{})),e.$$.dirty[0]&32&&r(37,o=Math.max(...Object.values(l).map(([we,be])=>be))),e.$$.dirty[1]&112&&r(4,c=Math.min(a[1]/u,o)),e.$$.dirty[0]&16|e.$$.dirty[1]&33&&r(34,p=c*u+O*Math.max(u-1,0)),e.$$.dirty[0]&268435456|e.$$.dirty[1]&16&&r(33,f=Math.min(a[0],C)),e.$$.dirty[0]&67108864|e.$$.dirty[1]&12&&r(3,h=[_[0]-f/2,_[1]-p/2]),e.$$.dirty[0]&1073741829|e.$$.dirty[1]&6&&r(11,d=f-P-B-2*F-N),e.$$.dirty[0]&1073741833|e.$$.dirty[1]&2&&r(10,m=h[0]+P+B+F),e.$$.dirty[1]&128&&r(12,y=Math.max(...Object.values(g.weightedPrompts).map(we=>we.barWeight||0)))},[F,I,N,h,c,l,n,q,J,Y,m,d,y,H,R,z,ve,me,Fe,Ae,Ie,Ue,Ve,tt,We,qe,_,b,C,w,B,O,P,f,p,a,u,o,g,at,mt,et,He,yt,Et,At]}class HE extends Rt{constructor(t){super(),Lt(this,t,WE,zE,Ut,{center:26,dimensions:27,maxWidth:28,pointRadius:29,textWidth:30,horizontalPad:0,verticalPad:31,textBarPad:32,fontSize:1,handleWidth:2},null,[-1,-1])}}function GE(e){let t,r,n,u;return r=new HE({props:{dimensions:e[2],center:e[3]}}),{c(){t=se("div"),ht(r.$$.fragment),this.h()},l(a){t=oe(a,"DIV",{class:!0});var l=ie(t);dt(r.$$.fragment,l),l.forEach(V),this.h()},h(){x(t,"class","w-full h-full"),Cs(()=>e[4].call(t))},m(a,l){Ce(a,t,l),pt(r,t,null),n=Fs(t,e[4].bind(t)),u=!0},p(a,[l]){const o={};l&4&&(o.dimensions=a[2]),l&8&&(o.center=a[3]),r.$set(o)},i(a){u||(xe(r.$$.fragment,a),u=!0)},o(a){Le(r.$$.fragment,a),u=!1},d(a){a&&V(t),vt(r),n()}}}function KE(e,t,r){let n,u,a,l;function o(){a=this.clientWidth,l=this.clientHeight,r(0,a),r(1,l)}return e.$$.update=()=>{e.$$.dirty&3&&r(2,n=[a||0,l||0]),e.$$.dirty&4&&r(3,u=ks(n))},[a,l,n,u,o]}class YE extends Rt{constructor(t){super(),Lt(this,t,KE,GE,Ut,{})}}function ZE(e){let t,r,n,u,a;return{c(){t=Ft("line"),this.h()},l(l){t=St(l,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),ie(t).forEach(V),this.h()},h(){x(t,"x1",r=e[0][0]),x(t,"y1",n=e[0][1]),x(t,"x2",u=e[1][0]),x(t,"y2",a=e[1][1]),x(t,"stroke",e[3]),x(t,"stroke-width",e[2])},m(l,o){Ce(l,t,o)},p(l,[o]){o&1&&r!==(r=l[0][0])&&x(t,"x1",r),o&1&&n!==(n=l[0][1])&&x(t,"y1",n),o&2&&u!==(u=l[1][0])&&x(t,"x2",u),o&2&&a!==(a=l[1][1])&&x(t,"y2",a),o&8&&x(t,"stroke",l[3]),o&4&&x(t,"stroke-width",l[2])},i:Te,o:Te,d(l){l&&V(t)}}}function $E(e,t,r){let{p1:n=[100,100]}=t,{p2:u=[100,100]}=t,{stroke:a=2}=t,{color:l="rgba(46,67,101, 0.4)"}=t;return e.$$set=o=>{"p1"in o&&r(0,n=o.p1),"p2"in o&&r(1,u=o.p2),"stroke"in o&&r(2,a=o.stroke),"color"in o&&r(3,l=o.color)},[n,u,a,l]}class XE extends Rt{constructor(t){super(),Lt(this,t,$E,ZE,Ut,{p1:0,p2:1,stroke:2,color:3})}}function f0(e,t,r){const n=e.slice();return n[25]=t[r][0],n[26]=t[r][1],n}function c0(e){let t,r,n;t=new op({props:{xy:e[0],radius:e[1]}});let u=Object.entries(e[5].weightedPrompts),a=[];for(let o=0;o<u.length;o+=1)a[o]=h0(f0(e,u,o));const l=o=>Le(a[o],1,1,()=>{a[o]=null});return{c(){ht(t.$$.fragment);for(let o=0;o<a.length;o+=1)a[o].c();r=Zt()},l(o){dt(t.$$.fragment,o);for(let c=0;c<a.length;c+=1)a[c].l(o);r=Zt()},m(o,c){pt(t,o,c);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(o,c);Ce(o,r,c),n=!0},p(o,c){const p={};if(c&1&&(p.xy=o[0]),c&2&&(p.radius=o[1]),t.$set(p),c&6015){u=Object.entries(o[5].weightedPrompts);let f;for(f=0;f<u.length;f+=1){const h=f0(o,u,f);a[f]?(a[f].p(h,c),xe(a[f],1)):(a[f]=h0(h),a[f].c(),xe(a[f],1),a[f].m(r.parentNode,r))}for(mn(),f=u.length;f<a.length;f+=1)l(f);_n()}},i(o){if(!n){xe(t.$$.fragment,o);for(let c=0;c<u.length;c+=1)xe(a[c]);n=!0}},o(o){Le(t.$$.fragment,o),a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)Le(a[c]);n=!1},d(o){vt(t,o),rf(a,o),o&&V(r)}}}function h0(e){let t,r,n,u,a,l,o,c,p;t=new XE({props:{p1:e[0],p2:e[6][e[25]].xy}});function f(...m){return e[13](e[25],...m)}function h(...m){return e[14](e[25],...m)}function d(){return e[15](e[25])}return a=new ea({props:{xy:e[6][e[25]].xy,radius:e[2],color:"rgba(76,97,141, 1)",handleMouseDown:d}}),l=new Ns({props:{xy:e[9](e[6][e[25]].textXY,tn(e[3],e[26].text.length,e[4])),color:`rgba(255,255,255,${Pr(e[6][e[25]].unitWeight)}`,wh:tn(e[3],e[26].text.length,e[4]),fontSize:e[4],text:e[26].text}}),{c(){ht(t.$$.fragment),r=Ft("path"),ht(a.$$.fragment),ht(l.$$.fragment),this.h()},l(m){dt(t.$$.fragment,m),r=St(m,"path",{d:!0,fill:!0}),ie(r).forEach(V),dt(a.$$.fragment,m),dt(l.$$.fragment,m),this.h()},h(){x(r,"d",n=p0(e[0],e[1],e[6][e[25]].angle,e[6][e[25]].angle+e[6][e[25]].angleDiff)),x(r,"fill",u=`rgba(26,47,91,${Pr(e[6][e[25]].unitWeight)/4}`)},m(m,y){pt(t,m,y),Ce(m,r,y),pt(a,m,y),pt(l,m,y),o=!0,c||(p=[Ne(r,"mousewheel",f),Ne(r,"mousedown",h)],c=!0)},p(m,y){e=m;const g={};y&1&&(g.p1=e[0]),y&96&&(g.p2=e[6][e[25]].xy),t.$set(g),(!o||y&99&&n!==(n=p0(e[0],e[1],e[6][e[25]].angle,e[6][e[25]].angle+e[6][e[25]].angleDiff)))&&x(r,"d",n),(!o||y&96&&u!==(u=`rgba(26,47,91,${Pr(e[6][e[25]].unitWeight)/4}`))&&x(r,"fill",u);const _={};y&96&&(_.xy=e[6][e[25]].xy),y&4&&(_.radius=e[2]),y&32&&(_.handleMouseDown=d),a.$set(_);const b={};y&120&&(b.xy=e[9](e[6][e[25]].textXY,tn(e[3],e[26].text.length,e[4]))),y&96&&(b.color=`rgba(255,255,255,${Pr(e[6][e[25]].unitWeight)}`),y&56&&(b.wh=tn(e[3],e[26].text.length,e[4])),y&16&&(b.fontSize=e[4]),y&32&&(b.text=e[26].text),l.$set(b)},i(m){o||(xe(t.$$.fragment,m),xe(a.$$.fragment,m),xe(l.$$.fragment,m),o=!0)},o(m){Le(t.$$.fragment,m),Le(a.$$.fragment,m),Le(l.$$.fragment,m),o=!1},d(m){vt(t,m),m&&V(r),vt(a,m),vt(l,m),c=!1,Lr(p)}}}function JE(e){let t,r,n,u,a=e[6]&&e[5].weightedPrompts&&c0(e);return{c(){t=Ft("svg"),a&&a.c(),this.h()},l(l){t=St(l,"svg",{id:!0,class:!0});var o=ie(t);a&&a.l(o),o.forEach(V),this.h()},h(){x(t,"id","svg"),x(t,"class","w-full h-full")},m(l,o){Ce(l,t,o),a&&a.m(t,null),r=!0,n||(u=[Ne(t,"mousemove",e[11]),Ne(t,"mouseup",e[7])],n=!0)},p(l,[o]){l[6]&&l[5].weightedPrompts?a?(a.p(l,o),o&96&&xe(a,1)):(a=c0(l),a.c(),xe(a,1),a.m(t,null)):a&&(mn(),Le(a,1,1,()=>{a=null}),_n())},i(l){r||(xe(a),r=!0)},o(l){Le(a),r=!1},d(l){l&&V(t),a&&a.d(),n=!1,Lr(u)}}}function d0(e,t){return e?Object.entries(e).reduce((r,[n,u],a)=>{const l=r[n]||a*(360/Object.keys(e).length)-90;return r[n]=l,r},t):null}function QE(e,t){if(e.length!==t.length)return!1;const r=e.length;let n=-1;for(let u=0;u<r;u++)if(t[u]===e[0]){n=u;break}if(n===-1)return!1;for(let u=0;u<r;u++)if(e[u]!==t[(u+n)%r])return!1;return!0}function Qr(e){return e<0?360+-1*(Math.abs(e)%360):e>360?e%360:e}function p0(e,t,r,n){const u=e[0]+t*Math.cos(r*Math.PI/180),a=e[1]+t*Math.sin(r*Math.PI/180),l=e[0]+t*Math.cos(n*Math.PI/180),o=e[1]+t*Math.sin(n*Math.PI/180),c=n-r<=180?"0":"1";return`M${e[0]},${e[1]} L${u},${a} A${t},${t} 0 ${c} 1 ${l},${o} Z`}function e2(e,t,r){let n,u;Nt(e,bn,W=>r(5,u=W));let{center:a=[450,450]}=t,{radius:l=250}=t,{pointRadius:o=10}=t,{textWidth:c=150}=t,{fontSize:p=13}=t,f=[0,0],h=null,d={},m=null,y;function g(W){m=null,y=null,h=null,d={}}function _(W){m=W}function b(W,q){let J=yi(W,a,l)[0]-180;J<0&&(J+=360);const Y=fp(ks(q),J);return Wr(W,Y)}function C(W,q){y=q}function w(W){const q=y,J={...u.pieAngles},Y=Object.entries(J).sort((Ae,Ie)=>Qr(Ae[1])-Qr(Ie[1])).map(Ae=>Ae[0]),R=Y.indexOf(q),z=R+1===Y.length?0:R+1,re=Y[z];d[q]||(d[q]=J[q]),d[re]||(d[re]=J[re]);const te=yi(W,a,l)[0]-h,ve={...J};ve[q]=Qr(te+d[q]),ve[re]=Qr(te+d[re]);const me=Object.entries(ve).sort((Ae,Ie)=>Qr(Ae[1])-Qr(Ie[1])).map(Ae=>Ae[0]);QE(Y,me)&&r(6,n=P(u.weightedPrompts,a,l,ve))}function B(W){const q={...u.weightedPrompts[m]},J=Hl(W,a,l),Y=Qr(yi(J,a,l)[0]),R={...u.pieAngles};R[q.id]=Y;const z={...u.weightedPrompts};z[m]=q,r(6,n=P(z,a,l,R))}function F(W){W.preventDefault(),f=qi(W),m?B(f):y?w(f):h=yi(f,a,l)[0]}function O(W,q){W.preventDefault();const J={...u.pieAngles},Y=Object.entries(J).sort((Q,te)=>Qr(Q[1])-Qr(te[1])).map(Q=>Q[0]),R=Y.indexOf(q),z=R+1===Y.length?0:R+1,re=Y[z];J[q]=Qr(J[q]-W.deltaY/100),J[re]=Qr(J[re]+W.deltaY/100),r(6,n=P(u.weightedPrompts,a,l,J))}function P(W,q,J,Y){if(!W||!q||!J)return null;const R=Object.entries(W).sort((ve,me)=>Qr(Y[ve[0]])-Qr(Y[me[0]])),z=R.map((ve,me)=>{const Fe=me+1===R.length?0:me+1,Ae=Y[R[Fe][0]]-Y[R[me][0]];return Ae<0?[ve[0],360+Ae]:[ve[0],Ae]}),re=Math.max(...z.map(ve=>ve[1])),Q=z.reduce((ve,[me,Fe])=>{({...W[me]});const Ae=Y[me],Ie=jn(q,[Ae,1],J),Ue=jn(q,[Ae+.5*Fe,1],J),Ve=Fe/re;return ve[me]={xy:Ie,textXY:Ue,angle:Ae,angleDiff:Fe,unitWeight:Ve},ve},{}),te={...W};return Object.entries(Q).forEach(([ve,me])=>{te[ve].pieWeight=me.unitWeight}),Mt.update({...u,weightedPrompts:te,pieAngles:Y}),Q}const I=(W,q)=>O(q,W),N=(W,q)=>C(q,W),H=W=>_(W);return e.$$set=W=>{"center"in W&&r(0,a=W.center),"radius"in W&&r(1,l=W.radius),"pointRadius"in W&&r(2,o=W.pointRadius),"textWidth"in W&&r(3,c=W.textWidth),"fontSize"in W&&r(4,p=W.fontSize)},e.$$.update=()=>{e.$$.dirty&32&&Object.keys(u.pieAngles||{}).length!==Object.keys(u.weightedPrompts).length&&Mt.update({...u,pieAngles:d0(u.weightedPrompts,{})}),e.$$.dirty&35&&r(6,n=P(u.weightedPrompts,a,l,u.pieAngles||d0(u.weightedPrompts,{})))},[a,l,o,c,p,u,n,g,_,b,C,F,O,I,N,H]}class t2 extends Rt{constructor(t){super(),Lt(this,t,e2,JE,Ut,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function r2(e){let t,r,n,u;return r=new t2({props:{center:[Math.round(e[0]/2),Math.round(e[1]/2)],radius:Math.round(Math.min(e[0],e[1])/2)-150}}),{c(){t=se("div"),ht(r.$$.fragment),this.h()},l(a){t=oe(a,"DIV",{class:!0});var l=ie(t);dt(r.$$.fragment,l),l.forEach(V),this.h()},h(){x(t,"class","w-full h-full"),Cs(()=>e[2].call(t))},m(a,l){Ce(a,t,l),pt(r,t,null),n=Fs(t,e[2].bind(t)),u=!0},p(a,[l]){const o={};l&3&&(o.center=[Math.round(a[0]/2),Math.round(a[1]/2)]),l&3&&(o.radius=Math.round(Math.min(a[0],a[1])/2)-150),r.$set(o)},i(a){u||(xe(r.$$.fragment,a),u=!0)},o(a){Le(r.$$.fragment,a),u=!1},d(a){a&&V(t),vt(r),n()}}}function n2(e,t,r){let n,u;function a(){n=this.clientWidth,u=this.clientHeight,r(0,n),r(1,u)}return[n,u,a]}class i2 extends Rt{constructor(t){super(),Lt(this,t,n2,r2,Ut,{})}}var as={},u2={get exports(){return as},set exports(e){as=e}},ss={},a2={get exports(){return ss},set exports(e){ss=e}},du=typeof Reflect=="object"?Reflect:null,v0=du&&typeof du.apply=="function"?du.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},Za;du&&typeof du.ownKeys=="function"?Za=du.ownKeys:Object.getOwnPropertySymbols?Za=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Za=function(t){return Object.getOwnPropertyNames(t)};function s2(e){console&&console.warn&&console.warn(e)}var cp=Number.isNaN||function(t){return t!==t};function xt(){xt.init.call(this)}a2.exports=xt;ss.once=c2;xt.EventEmitter=xt;xt.prototype._events=void 0;xt.prototype._eventsCount=0;xt.prototype._maxListeners=void 0;var g0=10;function Rs(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(xt,"defaultMaxListeners",{enumerable:!0,get:function(){return g0},set:function(e){if(typeof e!="number"||e<0||cp(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");g0=e}});xt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};xt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||cp(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function hp(e){return e._maxListeners===void 0?xt.defaultMaxListeners:e._maxListeners}xt.prototype.getMaxListeners=function(){return hp(this)};xt.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var u=t==="error",a=this._events;if(a!==void 0)u=u&&a.error===void 0;else if(!u)return!1;if(u){var l;if(r.length>0&&(l=r[0]),l instanceof Error)throw l;var o=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw o.context=l,o}var c=a[t];if(c===void 0)return!1;if(typeof c=="function")v0(c,this,r);else for(var p=c.length,f=mp(c,p),n=0;n<p;++n)v0(f[n],this,r);return!0};function dp(e,t,r,n){var u,a,l;if(Rs(r),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),l=a[t]),l===void 0)l=a[t]=r,++e._eventsCount;else if(typeof l=="function"?l=a[t]=n?[r,l]:[l,r]:n?l.unshift(r):l.push(r),u=hp(e),u>0&&l.length>u&&!l.warned){l.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=l.length,s2(o)}return e}xt.prototype.addListener=function(t,r){return dp(this,t,r,!1)};xt.prototype.on=xt.prototype.addListener;xt.prototype.prependListener=function(t,r){return dp(this,t,r,!0)};function o2(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function pp(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},u=o2.bind(n);return u.listener=r,n.wrapFn=u,u}xt.prototype.once=function(t,r){return Rs(r),this.on(t,pp(this,t,r)),this};xt.prototype.prependOnceListener=function(t,r){return Rs(r),this.prependListener(t,pp(this,t,r)),this};xt.prototype.removeListener=function(t,r){var n,u,a,l,o;if(Rs(r),u=this._events,u===void 0)return this;if(n=u[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete u[t],u.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(a=-1,l=n.length-1;l>=0;l--)if(n[l]===r||n[l].listener===r){o=n[l].listener,a=l;break}if(a<0)return this;a===0?n.shift():l2(n,a),n.length===1&&(u[t]=n[0]),u.removeListener!==void 0&&this.emit("removeListener",t,o||r)}return this};xt.prototype.off=xt.prototype.removeListener;xt.prototype.removeAllListeners=function(t){var r,n,u;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var a=Object.keys(n),l;for(u=0;u<a.length;++u)l=a[u],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(u=r.length-1;u>=0;u--)this.removeListener(t,r[u]);return this};function vp(e,t,r){var n=e._events;if(n===void 0)return[];var u=n[t];return u===void 0?[]:typeof u=="function"?r?[u.listener||u]:[u]:r?f2(u):mp(u,u.length)}xt.prototype.listeners=function(t){return vp(this,t,!0)};xt.prototype.rawListeners=function(t){return vp(this,t,!1)};xt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):gp.call(e,t)};xt.prototype.listenerCount=gp;function gp(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}xt.prototype.eventNames=function(){return this._eventsCount>0?Za(this._events):[]};function mp(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function l2(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function f2(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function c2(e,t){return new Promise(function(r,n){function u(l){e.removeListener(t,a),n(l)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",u),r([].slice.call(arguments))}_p(e,t,a,{once:!0}),t!=="error"&&h2(e,u,{once:!0})})}function h2(e,t,r){typeof e.on=="function"&&_p(e,"error",t,r)}function _p(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function u(a){n.once&&e.removeEventListener(t,u),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}function d2(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}var p2=d2;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var v2=function(e){return e!=null&&(Dp(e)||g2(e)||!!e._isBuffer)};function Dp(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function g2(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&Dp(e.slice(0,0))}var m2=p2,_2=v2,D2=typeof Float64Array<"u";function b2(e,t){return e[0]-t[0]}function y2(){var e=this.stride,t=new Array(e.length),r;for(r=0;r<t.length;++r)t[r]=[Math.abs(e[r]),r];t.sort(b2);var n=new Array(t.length);for(r=0;r<n.length;++r)n[r]=t[r][1];return n}function A2(e,t){var r=["View",t,"d",e].join("");t<0&&(r="View_Nil"+e);var n=e==="generic";if(t===-1){var u="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",g=new Function(u);return g()}else if(t===0){var u="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",g=new Function("TrivialArray",u);return g(os[e][0])}var u=["'use strict'"],a=m2(t),l=a.map(function(_){return"i"+_}),o="this.offset+"+a.map(function(_){return"this.stride["+_+"]*i"+_}).join("+"),c=a.map(function(_){return"b"+_}).join(","),p=a.map(function(_){return"c"+_}).join(",");u.push("function "+r+"(a,"+c+","+p+",d){this.data=a","this.shape=["+c+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),u.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(_){return"this.shape["+_+"]"}).join("*"),"}})"),t===1?u.push("proto.order=[0]"):(u.push("Object.defineProperty(proto,'order',{get:"),t<4?(u.push("function "+r+"_order(){"),t===2?u.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):t===3&&u.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):u.push("ORDER})")),u.push("proto.set=function "+r+"_set("+l.join(",")+",v){"),n?u.push("return this.data.set("+o+",v)}"):u.push("return this.data["+o+"]=v}"),u.push("proto.get=function "+r+"_get("+l.join(",")+"){"),n?u.push("return this.data.get("+o+")}"):u.push("return this.data["+o+"]}"),u.push("proto.index=function "+r+"_index(",l.join(),"){return "+o+"}"),u.push("proto.hi=function "+r+"_hi("+l.join(",")+"){return new "+r+"(this.data,"+a.map(function(_){return["(typeof i",_,"!=='number'||i",_,"<0)?this.shape[",_,"]:i",_,"|0"].join("")}).join(",")+","+a.map(function(_){return"this.stride["+_+"]"}).join(",")+",this.offset)}");var f=a.map(function(_){return"a"+_+"=this.shape["+_+"]"}),h=a.map(function(_){return"c"+_+"=this.stride["+_+"]"});u.push("proto.lo=function "+r+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+f.join(",")+","+h.join(","));for(var d=0;d<t;++d)u.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");u.push("return new "+r+"(this.data,"+a.map(function(_){return"a"+_}).join(",")+","+a.map(function(_){return"c"+_}).join(",")+",b)}"),u.push("proto.step=function "+r+"_step("+l.join(",")+"){var "+a.map(function(_){return"a"+_+"=this.shape["+_+"]"}).join(",")+","+a.map(function(_){return"b"+_+"=this.stride["+_+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var d=0;d<t;++d)u.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");u.push("return new "+r+"(this.data,"+a.map(function(_){return"a"+_}).join(",")+","+a.map(function(_){return"b"+_}).join(",")+",c)}");for(var m=new Array(t),y=new Array(t),d=0;d<t;++d)m[d]="a[i"+d+"]",y[d]="b[i"+d+"]";u.push("proto.transpose=function "+r+"_transpose("+l+"){"+l.map(function(_,b){return _+"=("+_+"===undefined?"+b+":"+_+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+m.join(",")+","+y.join(",")+",this.offset)}"),u.push("proto.pick=function "+r+"_pick("+l+"){var a=[],b=[],c=this.offset");for(var d=0;d<t;++d)u.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");u.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),u.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(_){return"shape["+_+"]"}).join(",")+","+a.map(function(_){return"stride["+_+"]"}).join(",")+",offset)}");var g=new Function("CTOR_LIST","ORDER",u.join(`
`));return g(os[e],y2)}function w2(e){if(_2(e))return"buffer";if(D2)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}var os={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function E2(e,t,r,n){if(e===void 0){var p=os.array[0];return p([])}else typeof e=="number"&&(e=[e]);t===void 0&&(t=[e.length]);var u=t.length;if(r===void 0){r=new Array(u);for(var a=u-1,l=1;a>=0;--a)r[a]=l,l*=t[a]}if(n===void 0){n=0;for(var a=0;a<u;++a)r[a]<0&&(n-=(t[a]-1)*r[a])}for(var o=w2(e),c=os[o];c.length<=u+1;)c.push(A2(o,c.length-1));var p=c[u+1];return p(e,t,r,n)}var _u=E2,Ls={};function C2(e,t){for(var r=1,n=e.length,u=e[0],a=e[0],l=1;l<n;++l)if(a=u,u=e[l],t(u,a)){if(l===r){r++;continue}e[r++]=u}return e.length=r,e}function F2(e){for(var t=1,r=e.length,n=e[0],u=e[0],a=1;a<r;++a,u=n)if(u=n,n=e[a],n!==u){if(a===t){t++;continue}e[t++]=n}return e.length=t,e}function S2(e,t,r){return e.length===0?e:t?(r||e.sort(t),C2(e,t)):(r||e.sort(),F2(e))}var bp=S2,B2=bp;function yp(e,t,r){var n=e.length,u=t.arrayArgs.length,a=t.indexArgs.length>0,l=[],o=[],c=0,p=0,f,h;for(f=0;f<n;++f)o.push(["i",f,"=0"].join(""));for(h=0;h<u;++h)for(f=0;f<n;++f)p=c,c=e[f],f===0?o.push(["d",h,"s",f,"=t",h,"p",c].join("")):o.push(["d",h,"s",f,"=(t",h,"p",c,"-s",p,"*t",h,"p",p,")"].join(""));for(o.length>0&&l.push("var "+o.join(",")),f=n-1;f>=0;--f)c=e[f],l.push(["for(i",f,"=0;i",f,"<s",c,";++i",f,"){"].join(""));for(l.push(r),f=0;f<n;++f){for(p=c,c=e[f],h=0;h<u;++h)l.push(["p",h,"+=d",h,"s",f].join(""));a&&(f>0&&l.push(["index[",p,"]-=s",p].join("")),l.push(["++index[",c,"]"].join(""))),l.push("}")}return l.join(`
`)}function O2(e,t,r,n){for(var u=t.length,a=r.arrayArgs.length,l=r.blockSize,o=r.indexArgs.length>0,c=[],p=0;p<a;++p)c.push(["var offset",p,"=p",p].join(""));for(var p=e;p<u;++p)c.push(["for(var j"+p+"=SS[",t[p],"]|0;j",p,">0;){"].join("")),c.push(["if(j",p,"<",l,"){"].join("")),c.push(["s",t[p],"=j",p].join("")),c.push(["j",p,"=0"].join("")),c.push(["}else{s",t[p],"=",l].join("")),c.push(["j",p,"-=",l,"}"].join("")),o&&c.push(["index[",t[p],"]=j",p].join(""));for(var p=0;p<a;++p){for(var f=["offset"+p],h=e;h<u;++h)f.push(["j",h,"*t",p,"p",t[h]].join(""));c.push(["p",p,"=(",f.join("+"),")"].join(""))}c.push(yp(t,r,n));for(var p=e;p<u;++p)c.push("}");return c.join(`
`)}function M2(e){for(var t=0,r=e[0].length;t<r;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}function ul(e,t,r){for(var n=e.body,u=[],a=[],l=0;l<e.args.length;++l){var o=e.args[l];if(!(o.count<=0)){var c=new RegExp(o.name,"g"),p="",f=t.arrayArgs.indexOf(l);switch(t.argTypes[l]){case"offset":var h=t.offsetArgIndex.indexOf(l),d=t.offsetArgs[h];f=d.array,p="+q"+h;case"array":p="p"+f+p;var m="l"+l,y="a"+f;if(t.arrayBlockIndices[f]===0)o.count===1?r[f]==="generic"?o.lvalue?(u.push(["var ",m,"=",y,".get(",p,")"].join("")),n=n.replace(c,m),a.push([y,".set(",p,",",m,")"].join(""))):n=n.replace(c,[y,".get(",p,")"].join("")):n=n.replace(c,[y,"[",p,"]"].join("")):r[f]==="generic"?(u.push(["var ",m,"=",y,".get(",p,")"].join("")),n=n.replace(c,m),o.lvalue&&a.push([y,".set(",p,",",m,")"].join(""))):(u.push(["var ",m,"=",y,"[",p,"]"].join("")),n=n.replace(c,m),o.lvalue&&a.push([y,"[",p,"]=",m].join("")));else{for(var g=[o.name],_=[p],b=0;b<Math.abs(t.arrayBlockIndices[f]);b++)g.push("\\s*\\[([^\\]]+)\\]"),_.push("$"+(b+1)+"*t"+f+"b"+b);if(c=new RegExp(g.join(""),"g"),p=_.join("+"),r[f]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(c,[y,"[",p,"]"].join(""))}break;case"scalar":n=n.replace(c,"Y"+t.scalarArgs.indexOf(l));break;case"index":n=n.replace(c,"index");break;case"shape":n=n.replace(c,"shape");break}}}return[u.join(`
`),n,a.join(`
`)].join(`
`).trim()}function P2(e){for(var t=new Array(e.length),r=!0,n=0;n<e.length;++n){var u=e[n],a=u.match(/\d+/);a?a=a[0]:a="",u.charAt(0)===0?t[n]="u"+u.charAt(1)+a:t[n]=u.charAt(0)+a,n>0&&(r=r&&t[n]===t[n-1])}return r?t[0]:t.join("")}function x2(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,n=new Array(e.arrayArgs.length),u=new Array(e.arrayArgs.length),a=0;a<e.arrayArgs.length;++a)u[a]=t[2*a],n[a]=t[2*a+1];for(var l=[],o=[],c=[],p=[],f=[],a=0;a<e.arrayArgs.length;++a){e.arrayBlockIndices[a]<0?(c.push(0),p.push(r),l.push(r),o.push(r+e.arrayBlockIndices[a])):(c.push(e.arrayBlockIndices[a]),p.push(e.arrayBlockIndices[a]+r),l.push(0),o.push(e.arrayBlockIndices[a]));for(var h=[],d=0;d<n[a].length;d++)c[a]<=n[a][d]&&n[a][d]<p[a]&&h.push(n[a][d]-c[a]);f.push(h)}for(var m=["SS"],y=["'use strict'"],g=[],d=0;d<r;++d)g.push(["s",d,"=SS[",d,"]"].join(""));for(var a=0;a<e.arrayArgs.length;++a){m.push("a"+a),m.push("t"+a),m.push("p"+a);for(var d=0;d<r;++d)g.push(["t",a,"p",d,"=t",a,"[",c[a]+d,"]"].join(""));for(var d=0;d<Math.abs(e.arrayBlockIndices[a]);++d)g.push(["t",a,"b",d,"=t",a,"[",l[a]+d,"]"].join(""))}for(var a=0;a<e.scalarArgs.length;++a)m.push("Y"+a);if(e.shapeArgs.length>0&&g.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var _=new Array(r),a=0;a<r;++a)_[a]="0";g.push(["index=[",_.join(","),"]"].join(""))}for(var a=0;a<e.offsetArgs.length;++a){for(var b=e.offsetArgs[a],C=[],d=0;d<b.offset.length;++d)b.offset[d]!==0&&(b.offset[d]===1?C.push(["t",b.array,"p",d].join("")):C.push([b.offset[d],"*t",b.array,"p",d].join("")));C.length===0?g.push("q"+a+"=0"):g.push(["q",a,"=",C.join("+")].join(""))}var w=B2([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));g=g.concat(w),g.length>0&&y.push("var "+g.join(","));for(var a=0;a<e.arrayArgs.length;++a)y.push("p"+a+"|=0");e.pre.body.length>3&&y.push(ul(e.pre,e,u));var B=ul(e.body,e,u),F=M2(f);F<r?y.push(O2(F,f[0],e,B)):y.push(yp(f[0],e,B)),e.post.body.length>3&&y.push(ul(e.post,e,u)),e.debug&&console.log("-----Generated cwise routine for ",t,`:
`+y.join(`
`)+`
----------`);var O=[e.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",F,P2(u)].join(""),P=new Function(["function ",O,"(",m.join(","),"){",y.join(`
`),"} return ",O].join(""));return P()}var T2=x2,I2=T2;function N2(e){var t=["'use strict'","var CACHED={}"],r=[],n=e.funcName+"_cwise_thunk";t.push(["return function ",n,"(",e.shimArgs.join(","),"){"].join(""));for(var u=[],a=[],l=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],o=[],c=[],p=0;p<e.arrayArgs.length;++p){var f=e.arrayArgs[p];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),u.push("t"+f),u.push("r"+f),a.push("t"+f),a.push("r"+f+".join()"),l.push("array"+f+".data"),l.push("array"+f+".stride"),l.push("array"+f+".offset|0"),p>0&&(o.push("array"+e.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[p]))),c.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[p])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+o.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var p=0;p<e.scalarArgs.length;++p)l.push("scalar"+e.scalarArgs[p]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",u.join(","),"])}","return proc(",l.join(","),")}"].join("")),e.debug&&console.log(`-----Generated thunk:
`+t.join(`
`)+`
----------`);var h=new Function("compile",t.join(`
`));return h(I2.bind(void 0,e))}var k2=N2,R2=k2;function L2(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function U2(e){var t=new L2;t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var n=0;n<r.length;++n){var u=r[n];if(u==="array"||typeof u=="object"&&u.blockIndices){if(t.argTypes[n]="array",t.arrayArgs.push(n),t.arrayBlockIndices.push(u.blockIndices?u.blockIndices:0),t.shimArgs.push("array"+n),n<t.pre.args.length&&t.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<t.post.args.length&&t.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(u==="scalar")t.scalarArgs.push(n),t.shimArgs.push("scalar"+n);else if(u==="index"){if(t.indexArgs.push(n),n<t.pre.args.length&&t.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<t.body.args.length&&t.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<t.post.args.length&&t.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(u==="shape"){if(t.shapeArgs.push(n),n<t.pre.args.length&&t.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<t.body.args.length&&t.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<t.post.args.length&&t.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof u=="object"&&u.offset)t.argTypes[n]="offset",t.offsetArgs.push({array:u.array,offset:u.offset}),t.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+r[n])}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,R2(t)}var df=U2;(function(e){var t=df,r={body:"",args:[],thisVars:[],localVars:[]};function n(d){if(!d)return r;for(var m=0;m<d.args.length;++m){var y=d.args[m];m===0?d.args[m]={name:y,lvalue:!0,rvalue:!!d.rvalue,count:d.count||1}:d.args[m]={name:y,lvalue:!1,rvalue:!0,count:1}}return d.thisVars||(d.thisVars=[]),d.localVars||(d.localVars=[]),d}function u(d){return t({args:d.args,pre:n(d.pre),body:n(d.body),post:n(d.proc),funcName:d.funcName})}function a(d){for(var m=[],y=0;y<d.args.length;++y)m.push("a"+y);var g=new Function("P",["return function ",d.funcName,"_ndarrayops(",m.join(","),") {P(",m.join(","),");return a0}"].join(""));return g(u(d))}var l={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var d in l){var m=l[d];e[d]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+m+"c"},funcName:d}),e[d+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+m+"=b"},rvalue:!0,funcName:d+"eq"}),e[d+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+m+"s"},funcName:d+"s"}),e[d+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+m+"=s"},rvalue:!0,funcName:d+"seq"})}})();var o={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var d in o){var m=o[d];e[d]=a({args:["array","array"],body:{args:["a","b"],body:"a="+m+"b"},funcName:d}),e[d+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+m+"a"},rvalue:!0,count:2,funcName:d+"eq"})}})();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var d in c){var m=c[d];e[d]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+m+"c"},funcName:d}),e[d+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+m+"s"},funcName:d+"s"}),e[d+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+m+"b"},rvalue:!0,count:2,funcName:d+"eq"}),e[d+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+m+"s"},rvalue:!0,count:2,funcName:d+"seq"})}})();var p=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var d=0;d<p.length;++d){var m=p[d];e[m]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:m}),e[m+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"eq"})}})();var f=["max","min","atan2","pow"];(function(){for(var d=0;d<f.length;++d){var m=f[d];e[m]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:m}),e[m+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:m+"s"}),e[m+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"eq"}),e[m+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"seq"})}})();var h=["atan2","pow"];(function(){for(var d=0;d<h.length;++d){var m=h[d];e[m+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:m+"op"}),e[m+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:m+"ops"}),e[m+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"opeq"}),e[m+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"opseq"})}})(),e.any=t({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=t({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=t({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=t({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=t({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=t({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=t({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(Ls);var V2=df({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64}),m0=_u,j2=V2,q2=function(t,r){for(var n=[],u=t,a=1;Array.isArray(u);)n.push(u.length),a*=u.length,u=u[0];return n.length===0?m0():(r||(r=m0(new Float64Array(a),n)),j2(r,t),r)};function Ap(e,t,r){var n=e[r]|0;if(n<=0)return[];var u=new Array(n),a;if(r===e.length-1)for(a=0;a<n;++a)u[a]=t;else for(a=0;a<n;++a)u[a]=Ap(e,t,r+1);return u}function z2(e,t){var r,n;for(r=new Array(e),n=0;n<e;++n)r[n]=t;return r}function W2(e,t){switch(typeof t>"u"&&(t=0),typeof e){case"number":if(e>0)return z2(e|0,t);break;case"object":if(typeof e.length=="number")return Ap(e,t,0);break}return[]}var H2=W2,wp={};(function(e){(function(t,r){r(e)})(cr,function(t){var r,n,u,a,l,o,c,p,f,h,d,m,y,g,_,b,C,w;r={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},n={},n[r.BooleanLiteral]="Boolean",n[r.EOF]="<end>",n[r.Identifier]="Identifier",n[r.Keyword]="Keyword",n[r.NullLiteral]="Null",n[r.NumericLiteral]="Numeric",n[r.Punctuator]="Punctuator",n[r.StringLiteral]="String",n[r.RegularExpression]="RegularExpression",u=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},l={Data:1,Get:2,Set:4},o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},c={NonAsciiIdentifierStart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")};function B(D,E){if(!D)throw new Error("ASSERT: "+E)}function F(D){return D>=48&&D<=57}function O(D){return"0123456789abcdefABCDEF".indexOf(D)>=0}function P(D){return"01234567".indexOf(D)>=0}function I(D){return D===32||D===9||D===11||D===12||D===160||D>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(D)>=0}function N(D){return D===10||D===13||D===8232||D===8233}function H(D){return D===36||D===95||D>=65&&D<=90||D>=97&&D<=122||D===92||D>=128&&c.NonAsciiIdentifierStart.test(String.fromCharCode(D))}function W(D){return D===36||D===95||D>=65&&D<=90||D>=97&&D<=122||D>=48&&D<=57||D===92||D>=128&&c.NonAsciiIdentifierPart.test(String.fromCharCode(D))}function q(D){switch(D){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function J(D){switch(D){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function Y(D){return D==="eval"||D==="arguments"}function R(D){if(h&&J(D))return!0;switch(D.length){case 2:return D==="if"||D==="in"||D==="do";case 3:return D==="var"||D==="for"||D==="new"||D==="try"||D==="let";case 4:return D==="this"||D==="else"||D==="case"||D==="void"||D==="with"||D==="enum";case 5:return D==="while"||D==="break"||D==="catch"||D==="throw"||D==="const"||D==="yield"||D==="class"||D==="super";case 6:return D==="return"||D==="typeof"||D==="delete"||D==="switch"||D==="export"||D==="import";case 7:return D==="default"||D==="finally"||D==="extends";case 8:return D==="function"||D==="continue"||D==="debugger";case 10:return D==="instanceof";default:return!1}}function z(D,E,k,$,he){var Se;B(typeof k=="number","Comment must have valid position"),!(C.lastCommentStart>=k)&&(C.lastCommentStart=k,Se={type:D,value:E},w.range&&(Se.range=[k,$]),w.loc&&(Se.loc=he),w.comments.push(Se),w.attachComment&&(w.leadingComments.push(Se),w.trailingComments.push(Se)))}function re(D){var E,k,$,he;for(E=d-D,k={start:{line:m,column:d-y-D}};d<g;)if($=f.charCodeAt(d),++d,N($)){w.comments&&(he=f.slice(E+D,d-1),k.end={line:m,column:d-y-1},z("Line",he,E,d-1,k)),$===13&&f.charCodeAt(d)===10&&++d,++m,y=d;return}w.comments&&(he=f.slice(E+D,d),k.end={line:m,column:d-y},z("Line",he,E,d,k))}function Q(){var D,E,k,$;for(w.comments&&(D=d-2,E={start:{line:m,column:d-y-2}});d<g;)if(k=f.charCodeAt(d),N(k))k===13&&f.charCodeAt(d+1)===10&&++d,++m,++d,y=d,d>=g&&j({},o.UnexpectedToken,"ILLEGAL");else if(k===42){if(f.charCodeAt(d+1)===47){++d,++d,w.comments&&($=f.slice(D+2,d-2),E.end={line:m,column:d-y},z("Block",$,D,d,E));return}++d}else++d;j({},o.UnexpectedToken,"ILLEGAL")}function te(){var D,E;for(E=d===0;d<g;)if(D=f.charCodeAt(d),I(D))++d;else if(N(D))++d,D===13&&f.charCodeAt(d)===10&&++d,++m,y=d,E=!0;else if(D===47)if(D=f.charCodeAt(d+1),D===47)++d,++d,re(2),E=!0;else if(D===42)++d,++d,Q();else break;else if(E&&D===45)if(f.charCodeAt(d+1)===45&&f.charCodeAt(d+2)===62)d+=3,re(3);else break;else if(D===60)if(f.slice(d+1,d+4)==="!--")++d,++d,++d,++d,re(4);else break;else break}function ve(D){var E,k,$,he=0;for(k=D==="u"?4:2,E=0;E<k;++E)if(d<g&&O(f[d]))$=f[d++],he=he*16+"0123456789abcdef".indexOf($.toLowerCase());else return"";return String.fromCharCode(he)}function me(){var D,E;for(D=f.charCodeAt(d++),E=String.fromCharCode(D),D===92&&(f.charCodeAt(d)!==117&&j({},o.UnexpectedToken,"ILLEGAL"),++d,D=ve("u"),(!D||D==="\\"||!H(D.charCodeAt(0)))&&j({},o.UnexpectedToken,"ILLEGAL"),E=D);d<g&&(D=f.charCodeAt(d),!!W(D));)++d,E+=String.fromCharCode(D),D===92&&(E=E.substr(0,E.length-1),f.charCodeAt(d)!==117&&j({},o.UnexpectedToken,"ILLEGAL"),++d,D=ve("u"),(!D||D==="\\"||!W(D.charCodeAt(0)))&&j({},o.UnexpectedToken,"ILLEGAL"),E+=D);return E}function Fe(){var D,E;for(D=d++;d<g;){if(E=f.charCodeAt(d),E===92)return d=D,me();if(W(E))++d;else break}return f.slice(D,d)}function Ae(){var D,E,k;return D=d,E=f.charCodeAt(d)===92?me():Fe(),E.length===1?k=r.Identifier:R(E)?k=r.Keyword:E==="null"?k=r.NullLiteral:E==="true"||E==="false"?k=r.BooleanLiteral:k=r.Identifier,{type:k,value:E,lineNumber:m,lineStart:y,start:D,end:d}}function Ie(){var D=d,E=f.charCodeAt(d),k,$=f[d],he,Se,st;switch(E){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++d,w.tokenize&&(E===40?w.openParenToken=w.tokens.length:E===123&&(w.openCurlyToken=w.tokens.length)),{type:r.Punctuator,value:String.fromCharCode(E),lineNumber:m,lineStart:y,start:D,end:d};default:if(k=f.charCodeAt(d+1),k===61)switch(E){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return d+=2,{type:r.Punctuator,value:String.fromCharCode(E)+String.fromCharCode(k),lineNumber:m,lineStart:y,start:D,end:d};case 33:case 61:return d+=2,f.charCodeAt(d)===61&&++d,{type:r.Punctuator,value:f.slice(D,d),lineNumber:m,lineStart:y,start:D,end:d}}}if(st=f.substr(d,4),st===">>>=")return d+=4,{type:r.Punctuator,value:st,lineNumber:m,lineStart:y,start:D,end:d};if(Se=st.substr(0,3),Se===">>>"||Se==="<<="||Se===">>=")return d+=3,{type:r.Punctuator,value:Se,lineNumber:m,lineStart:y,start:D,end:d};if(he=Se.substr(0,2),$===he[1]&&"+-<>&|".indexOf($)>=0||he==="=>")return d+=2,{type:r.Punctuator,value:he,lineNumber:m,lineStart:y,start:D,end:d};if("<>=!+-*%&|^/".indexOf($)>=0)return++d,{type:r.Punctuator,value:$,lineNumber:m,lineStart:y,start:D,end:d};j({},o.UnexpectedToken,"ILLEGAL")}function Ue(D){for(var E="";d<g&&O(f[d]);)E+=f[d++];return E.length===0&&j({},o.UnexpectedToken,"ILLEGAL"),H(f.charCodeAt(d))&&j({},o.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt("0x"+E,16),lineNumber:m,lineStart:y,start:D,end:d}}function Ve(D){for(var E="0"+f[d++];d<g&&P(f[d]);)E+=f[d++];return(H(f.charCodeAt(d))||F(f.charCodeAt(d)))&&j({},o.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt(E,8),octal:!0,lineNumber:m,lineStart:y,start:D,end:d}}function tt(){var D,E;for(D=d+1;D<g;++D){if(E=f[D],E==="8"||E==="9")return!1;if(!P(E))return!0}return!0}function We(){var D,E,k;if(k=f[d],B(F(k.charCodeAt(0))||k===".","Numeric literal must start with a decimal digit or a decimal point"),E=d,D="",k!=="."){if(D=f[d++],k=f[d],D==="0"){if(k==="x"||k==="X")return++d,Ue(E);if(P(k)&&tt())return Ve(E)}for(;F(f.charCodeAt(d));)D+=f[d++];k=f[d]}if(k==="."){for(D+=f[d++];F(f.charCodeAt(d));)D+=f[d++];k=f[d]}if(k==="e"||k==="E")if(D+=f[d++],k=f[d],(k==="+"||k==="-")&&(D+=f[d++]),F(f.charCodeAt(d)))for(;F(f.charCodeAt(d));)D+=f[d++];else j({},o.UnexpectedToken,"ILLEGAL");return H(f.charCodeAt(d))&&j({},o.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseFloat(D),lineNumber:m,lineStart:y,start:E,end:d}}function Me(){var D="",E,k,$,he,Se,st,Dt=!1,Kt,ar;for(Kt=m,ar=y,E=f[d],B(E==="'"||E==='"',"String literal must starts with a quote"),k=d,++d;d<g;)if($=f[d++],$===E){E="";break}else if($==="\\")if($=f[d++],!$||!N($.charCodeAt(0)))switch($){case"u":case"x":st=d,Se=ve($),Se?D+=Se:(d=st,D+=$);break;case"n":D+=`
`;break;case"r":D+="\r";break;case"t":D+="	";break;case"b":D+="\b";break;case"f":D+="\f";break;case"v":D+="\v";break;default:P($)?(he="01234567".indexOf($),he!==0&&(Dt=!0),d<g&&P(f[d])&&(Dt=!0,he=he*8+"01234567".indexOf(f[d++]),"0123".indexOf($)>=0&&d<g&&P(f[d])&&(he=he*8+"01234567".indexOf(f[d++]))),D+=String.fromCharCode(he)):D+=$;break}else++m,$==="\r"&&f[d]===`
`&&++d,y=d;else{if(N($.charCodeAt(0)))break;D+=$}return E!==""&&j({},o.UnexpectedToken,"ILLEGAL"),{type:r.StringLiteral,value:D,octal:Dt,startLineNumber:Kt,startLineStart:ar,lineNumber:m,lineStart:y,start:k,end:d}}function qe(D,E){var k;try{k=new RegExp(D,E)}catch{j({},o.InvalidRegExp)}return k}function at(){var D,E,k,$,he;for(D=f[d],B(D==="/","Regular expression literal must start with a slash"),E=f[d++],k=!1,$=!1;d<g;)if(D=f[d++],E+=D,D==="\\")D=f[d++],N(D.charCodeAt(0))&&j({},o.UnterminatedRegExp),E+=D;else if(N(D.charCodeAt(0)))j({},o.UnterminatedRegExp);else if(k)D==="]"&&(k=!1);else if(D==="/"){$=!0;break}else D==="["&&(k=!0);return $||j({},o.UnterminatedRegExp),he=E.substr(1,E.length-2),{value:he,literal:E}}function mt(){var D,E,k,$;for(E="",k="";d<g&&(D=f[d],!!W(D.charCodeAt(0)));)if(++d,D==="\\"&&d<g)if(D=f[d],D==="u"){if(++d,$=d,D=ve("u"),D)for(k+=D,E+="\\u";$<d;++$)E+=f[$];else d=$,k+="u",E+="\\u";Z({},o.UnexpectedToken,"ILLEGAL")}else E+="\\",Z({},o.UnexpectedToken,"ILLEGAL");else k+=D,E+=D;return{value:k,literal:E}}function et(){var D,E,k,$;return b=null,te(),D=d,E=at(),k=mt(),$=qe(E.value,k.value),w.tokenize?{type:r.RegularExpression,value:$,lineNumber:m,lineStart:y,start:D,end:d}:{literal:E.literal+k.literal,value:$,start:D,end:d}}function He(){var D,E,k,$;return te(),D=d,E={start:{line:m,column:d-y}},k=et(),E.end={line:m,column:d-y},w.tokenize||(w.tokens.length>0&&($=w.tokens[w.tokens.length-1],$.range[0]===D&&$.type==="Punctuator"&&($.value==="/"||$.value==="/=")&&w.tokens.pop()),w.tokens.push({type:"RegularExpression",value:k.literal,range:[D,d],loc:E})),k}function yt(D){return D.type===r.Identifier||D.type===r.Keyword||D.type===r.BooleanLiteral||D.type===r.NullLiteral}function Et(){var D,E;if(D=w.tokens[w.tokens.length-1],!D)return He();if(D.type==="Punctuator"){if(D.value==="]")return Ie();if(D.value===")")return E=w.tokens[w.openParenToken-1],E&&E.type==="Keyword"&&(E.value==="if"||E.value==="while"||E.value==="for"||E.value==="with")?He():Ie();if(D.value==="}"){if(w.tokens[w.openCurlyToken-3]&&w.tokens[w.openCurlyToken-3].type==="Keyword"){if(E=w.tokens[w.openCurlyToken-4],!E)return Ie()}else if(w.tokens[w.openCurlyToken-4]&&w.tokens[w.openCurlyToken-4].type==="Keyword"){if(E=w.tokens[w.openCurlyToken-5],!E)return He()}else return Ie();return u.indexOf(E.value)>=0?Ie():He()}return He()}return D.type==="Keyword"&&D.value!=="this"?He():Ie()}function At(){var D;return te(),d>=g?{type:r.EOF,lineNumber:m,lineStart:y,start:d,end:d}:(D=f.charCodeAt(d),H(D)?Ae():D===40||D===41||D===59?Ie():D===39||D===34?Me():D===46?F(f.charCodeAt(d+1))?We():Ie():F(D)?We():w.tokenize&&D===47?Et():Ie())}function we(){var D,E,k;return te(),D={start:{line:m,column:d-y}},E=At(),D.end={line:m,column:d-y},E.type!==r.EOF&&(k=f.slice(E.start,E.end),w.tokens.push({type:n[E.type],value:k,range:[E.start,E.end],loc:D})),E}function be(){var D;return D=b,d=D.end,m=D.lineNumber,y=D.lineStart,b=typeof w.tokens<"u"?we():At(),d=D.end,m=D.lineNumber,y=D.lineStart,D}function ke(){var D,E,k;D=d,E=m,k=y,b=typeof w.tokens<"u"?we():At(),d=D,m=E,y=k}function it(D,E){this.line=D,this.column=E}function _t(D,E,k,$){this.start=new it(D,E),this.end=new it(k,$)}p={name:"SyntaxTree",processComment:function(D){var E,k;if(!(D.type===a.Program&&D.body.length>0)){for(w.trailingComments.length>0?w.trailingComments[0].range[0]>=D.range[1]?(k=w.trailingComments,w.trailingComments=[]):w.trailingComments.length=0:w.bottomRightStack.length>0&&w.bottomRightStack[w.bottomRightStack.length-1].trailingComments&&w.bottomRightStack[w.bottomRightStack.length-1].trailingComments[0].range[0]>=D.range[1]&&(k=w.bottomRightStack[w.bottomRightStack.length-1].trailingComments,delete w.bottomRightStack[w.bottomRightStack.length-1].trailingComments);w.bottomRightStack.length>0&&w.bottomRightStack[w.bottomRightStack.length-1].range[0]>=D.range[0];)E=w.bottomRightStack.pop();E?E.leadingComments&&E.leadingComments[E.leadingComments.length-1].range[1]<=D.range[0]&&(D.leadingComments=E.leadingComments,delete E.leadingComments):w.leadingComments.length>0&&w.leadingComments[w.leadingComments.length-1].range[1]<=D.range[0]&&(D.leadingComments=w.leadingComments,w.leadingComments=[]),k&&(D.trailingComments=k),w.bottomRightStack.push(D)}},markEnd:function(D,E){return w.range&&(D.range=[E.start,d]),w.loc&&(D.loc=new _t(E.startLineNumber===void 0?E.lineNumber:E.startLineNumber,E.start-(E.startLineStart===void 0?E.lineStart:E.startLineStart),m,d-y),this.postProcess(D)),w.attachComment&&this.processComment(D),D},postProcess:function(D){return w.source&&(D.loc.source=w.source),D},createArrayExpression:function(D){return{type:a.ArrayExpression,elements:D}},createAssignmentExpression:function(D,E,k){return{type:a.AssignmentExpression,operator:D,left:E,right:k}},createBinaryExpression:function(D,E,k){var $=D==="||"||D==="&&"?a.LogicalExpression:a.BinaryExpression;return{type:$,operator:D,left:E,right:k}},createBlockStatement:function(D){return{type:a.BlockStatement,body:D}},createBreakStatement:function(D){return{type:a.BreakStatement,label:D}},createCallExpression:function(D,E){return{type:a.CallExpression,callee:D,arguments:E}},createCatchClause:function(D,E){return{type:a.CatchClause,param:D,body:E}},createConditionalExpression:function(D,E,k){return{type:a.ConditionalExpression,test:D,consequent:E,alternate:k}},createContinueStatement:function(D){return{type:a.ContinueStatement,label:D}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(D,E){return{type:a.DoWhileStatement,body:D,test:E}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(D){return{type:a.ExpressionStatement,expression:D}},createForStatement:function(D,E,k,$){return{type:a.ForStatement,init:D,test:E,update:k,body:$}},createForInStatement:function(D,E,k){return{type:a.ForInStatement,left:D,right:E,body:k,each:!1}},createFunctionDeclaration:function(D,E,k,$){return{type:a.FunctionDeclaration,id:D,params:E,defaults:k,body:$,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(D,E,k,$){return{type:a.FunctionExpression,id:D,params:E,defaults:k,body:$,rest:null,generator:!1,expression:!1}},createIdentifier:function(D){return{type:a.Identifier,name:D}},createIfStatement:function(D,E,k){return{type:a.IfStatement,test:D,consequent:E,alternate:k}},createLabeledStatement:function(D,E){return{type:a.LabeledStatement,label:D,body:E}},createLiteral:function(D){return{type:a.Literal,value:D.value,raw:f.slice(D.start,D.end)}},createMemberExpression:function(D,E,k){return{type:a.MemberExpression,computed:D==="[",object:E,property:k}},createNewExpression:function(D,E){return{type:a.NewExpression,callee:D,arguments:E}},createObjectExpression:function(D){return{type:a.ObjectExpression,properties:D}},createPostfixExpression:function(D,E){return{type:a.UpdateExpression,operator:D,argument:E,prefix:!1}},createProgram:function(D){return{type:a.Program,body:D}},createProperty:function(D,E,k){return{type:a.Property,key:E,value:k,kind:D}},createReturnStatement:function(D){return{type:a.ReturnStatement,argument:D}},createSequenceExpression:function(D){return{type:a.SequenceExpression,expressions:D}},createSwitchCase:function(D,E){return{type:a.SwitchCase,test:D,consequent:E}},createSwitchStatement:function(D,E){return{type:a.SwitchStatement,discriminant:D,cases:E}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(D){return{type:a.ThrowStatement,argument:D}},createTryStatement:function(D,E,k,$){return{type:a.TryStatement,block:D,guardedHandlers:E,handlers:k,finalizer:$}},createUnaryExpression:function(D,E){return D==="++"||D==="--"?{type:a.UpdateExpression,operator:D,argument:E,prefix:!0}:{type:a.UnaryExpression,operator:D,argument:E,prefix:!0}},createVariableDeclaration:function(D,E){return{type:a.VariableDeclaration,declarations:D,kind:E}},createVariableDeclarator:function(D,E){return{type:a.VariableDeclarator,id:D,init:E}},createWhileStatement:function(D,E){return{type:a.WhileStatement,test:D,body:E}},createWithStatement:function(D,E){return{type:a.WithStatement,object:D,body:E}}};function L(){var D,E,k,$;return D=d,E=m,k=y,te(),$=m!==E,d=D,m=E,y=k,$}function j(D,E){var k,$=Array.prototype.slice.call(arguments,2),he=E.replace(/%(\d)/g,function(Se,st){return B(st<$.length,"Message reference must be in range"),$[st]});throw typeof D.lineNumber=="number"?(k=new Error("Line "+D.lineNumber+": "+he),k.index=D.start,k.lineNumber=D.lineNumber,k.column=D.start-y+1):(k=new Error("Line "+m+": "+he),k.index=d,k.lineNumber=m,k.column=d-y+1),k.description=he,k}function Z(){try{j.apply(null,arguments)}catch(D){if(w.errors)w.errors.push(D);else throw D}}function le(D){if(D.type===r.EOF&&j(D,o.UnexpectedEOS),D.type===r.NumericLiteral&&j(D,o.UnexpectedNumber),D.type===r.StringLiteral&&j(D,o.UnexpectedString),D.type===r.Identifier&&j(D,o.UnexpectedIdentifier),D.type===r.Keyword){if(q(D.value))j(D,o.UnexpectedReserved);else if(h&&J(D.value)){Z(D,o.StrictReservedWord);return}j(D,o.UnexpectedToken,D.value)}j(D,o.UnexpectedToken,D.value)}function ne(D){var E=be();(E.type!==r.Punctuator||E.value!==D)&&le(E)}function de(D){var E=be();(E.type!==r.Keyword||E.value!==D)&&le(E)}function ue(D){return b.type===r.Punctuator&&b.value===D}function fe(D){return b.type===r.Keyword&&b.value===D}function ye(){var D;return b.type!==r.Punctuator?!1:(D=b.value,D==="="||D==="*="||D==="/="||D==="%="||D==="+="||D==="-="||D==="<<="||D===">>="||D===">>>="||D==="&="||D==="^="||D==="|=")}function Oe(){var D,E=d,k=m,$=y,he=b;if(f.charCodeAt(d)===59||ue(";")){be();return}if(D=m,te(),m!==D){d=E,m=k,y=$,b=he;return}b.type!==r.EOF&&!ue("}")&&le(b)}function je(D){return D.type===a.Identifier||D.type===a.MemberExpression}function Ee(){var D=[],E;for(E=b,ne("[");!ue("]");)ue(",")?(be(),D.push(null)):(D.push(Ar()),ue("]")||ne(","));return be(),_.markEnd(_.createArrayExpression(D),E)}function Vt(D,E){var k,$,he;return k=h,he=b,$=Pi(),E&&h&&Y(D[0].name)&&Z(E,o.StrictParamName),h=k,_.markEnd(_.createFunctionExpression(null,D,[],$),he)}function Bt(){var D,E;return E=b,D=be(),D.type===r.StringLiteral||D.type===r.NumericLiteral?(h&&D.octal&&Z(D,o.StrictOctalLiteral),_.markEnd(_.createLiteral(D),E)):_.markEnd(_.createIdentifier(D.value),E)}function Ht(){var D,E,k,$,he,Se;if(D=b,Se=b,D.type===r.Identifier)return k=Bt(),D.value==="get"&&!ue(":")?(E=Bt(),ne("("),ne(")"),$=Vt([]),_.markEnd(_.createProperty("get",E,$),Se)):D.value==="set"&&!ue(":")?(E=Bt(),ne("("),D=b,D.type!==r.Identifier?(ne(")"),Z(D,o.UnexpectedToken,D.value),$=Vt([])):(he=[nn()],ne(")"),$=Vt(he,D)),_.markEnd(_.createProperty("set",E,$),Se)):(ne(":"),$=Ar(),_.markEnd(_.createProperty("init",k,$),Se));if(D.type===r.EOF||D.type===r.Punctuator)le(D);else return E=Bt(),ne(":"),$=Ar(),_.markEnd(_.createProperty("init",E,$),Se)}function jt(){var D=[],E,k,$,he,Se={},st=String,Dt;for(Dt=b,ne("{");!ue("}");)E=Ht(),E.key.type===a.Identifier?k=E.key.name:k=st(E.key.value),he=E.kind==="init"?l.Data:E.kind==="get"?l.Get:l.Set,$="$"+k,Object.prototype.hasOwnProperty.call(Se,$)?(Se[$]===l.Data?h&&he===l.Data?Z({},o.StrictDuplicateProperty):he!==l.Data&&Z({},o.AccessorDataProperty):he===l.Data?Z({},o.AccessorDataProperty):Se[$]&he&&Z({},o.AccessorGetSet),Se[$]|=he):Se[$]=he,D.push(E),ue("}")||ne(",");return ne("}"),_.markEnd(_.createObjectExpression(D),Dt)}function ir(){var D;return ne("("),D=tr(),ne(")"),D}function qt(){var D,E,k,$;if(ue("("))return ir();if(ue("["))return Ee();if(ue("{"))return jt();if(D=b.type,$=b,D===r.Identifier)k=_.createIdentifier(be().value);else if(D===r.StringLiteral||D===r.NumericLiteral)h&&b.octal&&Z(b,o.StrictOctalLiteral),k=_.createLiteral(be());else if(D===r.Keyword){if(fe("function"))return xi();fe("this")?(be(),k=_.createThisExpression()):le(be())}else D===r.BooleanLiteral?(E=be(),E.value=E.value==="true",k=_.createLiteral(E)):D===r.NullLiteral?(E=be(),E.value=null,k=_.createLiteral(E)):ue("/")||ue("/=")?(typeof w.tokens<"u"?k=_.createLiteral(He()):k=_.createLiteral(et()),ke()):le(be());return _.markEnd(k,$)}function gr(){var D=[];if(ne("("),!ue(")"))for(;d<g&&(D.push(Ar()),!ue(")"));)ne(",");return ne(")"),D}function lr(){var D,E;return E=b,D=be(),yt(D)||le(D),_.markEnd(_.createIdentifier(D.value),E)}function fr(){return ne("."),lr()}function rn(){var D;return ne("["),D=tr(),ne("]"),D}function hr(){var D,E,k;return k=b,de("new"),D=Hn(),E=ue("(")?gr():[],_.markEnd(_.createNewExpression(D,E),k)}function yn(){var D,E,k,$,he=C.allowIn;for($=b,C.allowIn=!0,D=fe("new")?hr():qt();;){if(ue("."))k=fr(),D=_.createMemberExpression(".",D,k);else if(ue("("))E=gr(),D=_.createCallExpression(D,E);else if(ue("["))k=rn(),D=_.createMemberExpression("[",D,k);else break;_.markEnd(D,$)}return C.allowIn=he,D}function Hn(){var D,E,k;for(B(C.allowIn,"callee of new expression always allow in keyword."),k=b,D=fe("new")?hr():qt();ue(".")||ue("[");)ue("[")?(E=rn(),D=_.createMemberExpression("[",D,E)):(E=fr(),D=_.createMemberExpression(".",D,E)),_.markEnd(D,k);return D}function Tn(){var D,E,k=b;return D=yn(),b.type===r.Punctuator&&(ue("++")||ue("--"))&&!L()&&(h&&D.type===a.Identifier&&Y(D.name)&&Z({},o.StrictLHSPostfix),je(D)||Z({},o.InvalidLHSInAssignment),E=be(),D=_.markEnd(_.createPostfixExpression(E.value,D),k)),D}function In(){var D,E,k;return b.type!==r.Punctuator&&b.type!==r.Keyword?E=Tn():ue("++")||ue("--")?(k=b,D=be(),E=In(),h&&E.type===a.Identifier&&Y(E.name)&&Z({},o.StrictLHSPrefix),je(E)||Z({},o.InvalidLHSInAssignment),E=_.createUnaryExpression(D.value,E),E=_.markEnd(E,k)):ue("+")||ue("-")||ue("~")||ue("!")?(k=b,D=be(),E=In(),E=_.createUnaryExpression(D.value,E),E=_.markEnd(E,k)):fe("delete")||fe("void")||fe("typeof")?(k=b,D=be(),E=In(),E=_.createUnaryExpression(D.value,E),E=_.markEnd(E,k),h&&E.operator==="delete"&&E.argument.type===a.Identifier&&Z({},o.StrictDelete)):E=Tn(),E}function Wi(D,E){var k=0;if(D.type!==r.Punctuator&&D.type!==r.Keyword)return 0;switch(D.value){case"||":k=1;break;case"&&":k=2;break;case"|":k=3;break;case"^":k=4;break;case"&":k=5;break;case"==":case"!=":case"===":case"!==":k=6;break;case"<":case">":case"<=":case">=":case"instanceof":k=7;break;case"in":k=E?7:0;break;case"<<":case">>":case">>>":k=8;break;case"+":case"-":k=9;break;case"*":case"/":case"%":k=11;break}return k}function Oi(){var D,E,k,$,he,Se,st,Dt,Kt,ar;if(D=b,Kt=In(),$=b,he=Wi($,C.allowIn),he===0)return Kt;for($.prec=he,be(),E=[D,b],st=In(),Se=[Kt,$,st];(he=Wi(b,C.allowIn))>0;){for(;Se.length>2&&he<=Se[Se.length-2].prec;)st=Se.pop(),Dt=Se.pop().value,Kt=Se.pop(),k=_.createBinaryExpression(Dt,Kt,st),E.pop(),D=E[E.length-1],_.markEnd(k,D),Se.push(k);$=be(),$.prec=he,Se.push($),E.push(b),k=In(),Se.push(k)}for(ar=Se.length-1,k=Se[ar],E.pop();ar>1;)k=_.createBinaryExpression(Se[ar-1].value,Se[ar-2],k),ar-=2,D=E.pop(),_.markEnd(k,D);return k}function Du(){var D,E,k,$,he;return he=b,D=Oi(),ue("?")&&(be(),E=C.allowIn,C.allowIn=!0,k=Ar(),C.allowIn=E,ne(":"),$=Ar(),D=_.createConditionalExpression(D,k,$),_.markEnd(D,he)),D}function Ar(){var D,E,k,$,he;return D=b,he=b,$=E=Du(),ye()&&(je(E)||Z({},o.InvalidLHSInAssignment),h&&E.type===a.Identifier&&Y(E.name)&&Z(D,o.StrictLHSAssignment),D=be(),k=Ar(),$=_.markEnd(_.createAssignmentExpression(D.value,E,k),he)),$}function tr(){var D,E=b;if(D=Ar(),ue(",")){for(D=_.createSequenceExpression([D]);d<g&&ue(",");)be(),D.expressions.push(Ar());_.markEnd(D,E)}return D}function bu(){for(var D=[],E;d<g&&!(ue("}")||(E=An(),typeof E>"u"));)D.push(E);return D}function ai(){var D,E;return E=b,ne("{"),D=bu(),ne("}"),_.markEnd(_.createBlockStatement(D),E)}function nn(){var D,E;return E=b,D=be(),D.type!==r.Identifier&&le(D),_.markEnd(_.createIdentifier(D.value),E)}function Gn(D){var E=null,k,$;return $=b,k=nn(),h&&Y(k.name)&&Z({},o.StrictVarName),D==="const"?(ne("="),E=Ar()):ue("=")&&(be(),E=Ar()),_.markEnd(_.createVariableDeclarator(k,E),$)}function Mi(D){var E=[];do{if(E.push(Gn(D)),!ue(","))break;be()}while(d<g);return E}function yu(){var D;return de("var"),D=Mi(),Oe(),_.createVariableDeclaration(D,"var")}function Au(D){var E,k;return k=b,de(D),E=Mi(D),Oe(),_.markEnd(_.createVariableDeclaration(E,D),k)}function Hi(){return ne(";"),_.createEmptyStatement()}function wu(){var D=tr();return Oe(),_.createExpressionStatement(D)}function Eu(){var D,E,k;return de("if"),ne("("),D=tr(),ne(")"),E=Tr(),fe("else")?(be(),k=Tr()):k=null,_.createIfStatement(D,E,k)}function Cu(){var D,E,k;return de("do"),k=C.inIteration,C.inIteration=!0,D=Tr(),C.inIteration=k,de("while"),ne("("),E=tr(),ne(")"),ue(";")&&be(),_.createDoWhileStatement(D,E)}function Fu(){var D,E,k;return de("while"),ne("("),D=tr(),ne(")"),k=C.inIteration,C.inIteration=!0,E=Tr(),C.inIteration=k,_.createWhileStatement(D,E)}function Su(){var D,E,k;return k=b,D=be(),E=Mi(),_.markEnd(_.createVariableDeclaration(E,D.value),k)}function Bu(){var D,E,k,$,he,Se,st,Dt=C.allowIn;return D=E=k=null,de("for"),ne("("),ue(";")?be():(fe("var")||fe("let")?(C.allowIn=!1,D=Su(),C.allowIn=Dt,D.declarations.length===1&&fe("in")&&(be(),$=D,he=tr(),D=null)):(C.allowIn=!1,D=tr(),C.allowIn=Dt,fe("in")&&(je(D)||Z({},o.InvalidLHSInForIn),be(),$=D,he=tr(),D=null)),typeof $>"u"&&ne(";")),typeof $>"u"&&(ue(";")||(E=tr()),ne(";"),ue(")")||(k=tr())),ne(")"),st=C.inIteration,C.inIteration=!0,Se=Tr(),C.inIteration=st,typeof $>"u"?_.createForStatement(D,E,k,Se):_.createForInStatement($,he,Se)}function si(){var D=null,E;return de("continue"),f.charCodeAt(d)===59?(be(),C.inIteration||j({},o.IllegalContinue),_.createContinueStatement(null)):L()?(C.inIteration||j({},o.IllegalContinue),_.createContinueStatement(null)):(b.type===r.Identifier&&(D=nn(),E="$"+D.name,Object.prototype.hasOwnProperty.call(C.labelSet,E)||j({},o.UnknownLabel,D.name)),Oe(),D===null&&!C.inIteration&&j({},o.IllegalContinue),_.createContinueStatement(D))}function Ou(){var D=null,E;return de("break"),f.charCodeAt(d)===59?(be(),C.inIteration||C.inSwitch||j({},o.IllegalBreak),_.createBreakStatement(null)):L()?(C.inIteration||C.inSwitch||j({},o.IllegalBreak),_.createBreakStatement(null)):(b.type===r.Identifier&&(D=nn(),E="$"+D.name,Object.prototype.hasOwnProperty.call(C.labelSet,E)||j({},o.UnknownLabel,D.name)),Oe(),D===null&&!(C.inIteration||C.inSwitch)&&j({},o.IllegalBreak),_.createBreakStatement(D))}function oi(){var D=null;return de("return"),C.inFunctionBody||Z({},o.IllegalReturn),f.charCodeAt(d)===32&&H(f.charCodeAt(d+1))?(D=tr(),Oe(),_.createReturnStatement(D)):L()?_.createReturnStatement(null):(ue(";")||!ue("}")&&b.type!==r.EOF&&(D=tr()),Oe(),_.createReturnStatement(D))}function Mu(){var D,E;return h&&(te(),Z({},o.StrictModeWith)),de("with"),ne("("),D=tr(),ne(")"),E=Tr(),_.createWithStatement(D,E)}function Pu(){var D,E=[],k,$;for($=b,fe("default")?(be(),D=null):(de("case"),D=tr()),ne(":");d<g&&!(ue("}")||fe("default")||fe("case"));)k=Tr(),E.push(k);return _.markEnd(_.createSwitchCase(D,E),$)}function xu(){var D,E,k,$,he;if(de("switch"),ne("("),D=tr(),ne(")"),ne("{"),E=[],ue("}"))return be(),_.createSwitchStatement(D,E);for($=C.inSwitch,C.inSwitch=!0,he=!1;d<g&&!ue("}");)k=Pu(),k.test===null&&(he&&j({},o.MultipleDefaultsInSwitch),he=!0),E.push(k);return C.inSwitch=$,ne("}"),_.createSwitchStatement(D,E)}function Gi(){var D;return de("throw"),L()&&j({},o.NewlineAfterThrow),D=tr(),Oe(),_.createThrowStatement(D)}function Nn(){var D,E,k;return k=b,de("catch"),ne("("),ue(")")&&le(b),D=nn(),h&&Y(D.name)&&Z({},o.StrictCatchVariable),ne(")"),E=ai(),_.markEnd(_.createCatchClause(D,E),k)}function mr(){var D,E=[],k=null;return de("try"),D=ai(),fe("catch")&&E.push(Nn()),fe("finally")&&(be(),k=ai()),E.length===0&&!k&&j({},o.NoCatchOrFinally),_.createTryStatement(D,[],E,k)}function ur(){return de("debugger"),Oe(),_.createDebuggerStatement()}function Tr(){var D=b.type,E,k,$,he;if(D===r.EOF&&le(b),D===r.Punctuator&&b.value==="{")return ai();if(he=b,D===r.Punctuator)switch(b.value){case";":return _.markEnd(Hi(),he);case"(":return _.markEnd(wu(),he)}if(D===r.Keyword)switch(b.value){case"break":return _.markEnd(Ou(),he);case"continue":return _.markEnd(si(),he);case"debugger":return _.markEnd(ur(),he);case"do":return _.markEnd(Cu(),he);case"for":return _.markEnd(Bu(),he);case"function":return _.markEnd(kn(),he);case"if":return _.markEnd(Eu(),he);case"return":return _.markEnd(oi(),he);case"switch":return _.markEnd(xu(),he);case"throw":return _.markEnd(Gi(),he);case"try":return _.markEnd(mr(),he);case"var":return _.markEnd(yu(),he);case"while":return _.markEnd(Fu(),he);case"with":return _.markEnd(Mu(),he)}return E=tr(),E.type===a.Identifier&&ue(":")?(be(),$="$"+E.name,Object.prototype.hasOwnProperty.call(C.labelSet,$)&&j({},o.Redeclaration,"Label",E.name),C.labelSet[$]=!0,k=Tr(),delete C.labelSet[$],_.markEnd(_.createLabeledStatement(E,k),he)):(Oe(),_.markEnd(_.createExpressionStatement(E),he))}function Pi(){var D,E=[],k,$,he,Se,st,Dt,Kt,ar;for(ar=b,ne("{");d<g&&!(b.type!==r.StringLiteral||(k=b,D=An(),E.push(D),D.expression.type!==a.Literal));)$=f.slice(k.start+1,k.end-1),$==="use strict"?(h=!0,he&&Z(he,o.StrictOctalLiteral)):!he&&k.octal&&(he=k);for(Se=C.labelSet,st=C.inIteration,Dt=C.inSwitch,Kt=C.inFunctionBody,C.labelSet={},C.inIteration=!1,C.inSwitch=!1,C.inFunctionBody=!0;d<g&&!(ue("}")||(D=An(),typeof D>"u"));)E.push(D);return ne("}"),C.labelSet=Se,C.inIteration=st,C.inSwitch=Dt,C.inFunctionBody=Kt,_.markEnd(_.createBlockStatement(E),ar)}function Kn(D){var E,k=[],$,he,Se,st,Dt;if(ne("("),!ue(")"))for(Se={};d<g&&($=b,E=nn(),st="$"+$.value,h?(Y($.value)&&(he=$,Dt=o.StrictParamName),Object.prototype.hasOwnProperty.call(Se,st)&&(he=$,Dt=o.StrictParamDupe)):D||(Y($.value)?(D=$,Dt=o.StrictParamName):J($.value)?(D=$,Dt=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(Se,st)&&(D=$,Dt=o.StrictParamDupe)),k.push(E),Se[st]=!0,!ue(")"));)ne(",");return ne(")"),{params:k,stricted:he,firstRestricted:D,message:Dt}}function kn(){var D,E=[],k,$,he,Se,st,Dt,Kt,ar;return ar=b,de("function"),$=b,D=nn(),h?Y($.value)&&Z($,o.StrictFunctionName):Y($.value)?(st=$,Dt=o.StrictFunctionName):J($.value)&&(st=$,Dt=o.StrictReservedWord),Se=Kn(st),E=Se.params,he=Se.stricted,st=Se.firstRestricted,Se.message&&(Dt=Se.message),Kt=h,k=Pi(),h&&st&&j(st,Dt),h&&he&&Z(he,Dt),h=Kt,_.markEnd(_.createFunctionDeclaration(D,E,[],k),ar)}function xi(){var D,E=null,k,$,he,Se,st=[],Dt,Kt,ar;return ar=b,de("function"),ue("(")||(D=b,E=nn(),h?Y(D.value)&&Z(D,o.StrictFunctionName):Y(D.value)?($=D,he=o.StrictFunctionName):J(D.value)&&($=D,he=o.StrictReservedWord)),Se=Kn($),st=Se.params,k=Se.stricted,$=Se.firstRestricted,Se.message&&(he=Se.message),Kt=h,Dt=Pi(),h&&$&&j($,he),h&&k&&Z(k,he),h=Kt,_.markEnd(_.createFunctionExpression(E,st,[],Dt),ar)}function An(){if(b.type===r.Keyword)switch(b.value){case"const":case"let":return Au(b.value);case"function":return kn();default:return Tr()}if(b.type!==r.EOF)return Tr()}function un(){for(var D,E=[],k,$,he;d<g&&(k=b,!(k.type!==r.StringLiteral||(D=An(),E.push(D),D.expression.type!==a.Literal)));)$=f.slice(k.start+1,k.end-1),$==="use strict"?(h=!0,he&&Z(he,o.StrictOctalLiteral)):!he&&k.octal&&(he=k);for(;d<g&&(D=An(),!(typeof D>"u"));)E.push(D);return E}function Hs(){var D,E;return te(),ke(),E=b,h=!1,D=un(),_.markEnd(_.createProgram(D),E)}function Tu(){var D,E,k,$=[];for(D=0;D<w.tokens.length;++D)E=w.tokens[D],k={type:E.type,value:E.value},w.range&&(k.range=E.range),w.loc&&(k.loc=E.loc),$.push(k);w.tokens=$}function Ki(D,E){var k,$,he;k=String,typeof D!="string"&&!(D instanceof String)&&(D=k(D)),_=p,f=D,d=0,m=f.length>0?1:0,y=0,g=f.length,b=null,C={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},w={},E=E||{},E.tokens=!0,w.tokens=[],w.tokenize=!0,w.openParenToken=-1,w.openCurlyToken=-1,w.range=typeof E.range=="boolean"&&E.range,w.loc=typeof E.loc=="boolean"&&E.loc,typeof E.comment=="boolean"&&E.comment&&(w.comments=[]),typeof E.tolerant=="boolean"&&E.tolerant&&(w.errors=[]);try{if(ke(),b.type===r.EOF)return w.tokens;for($=be();b.type!==r.EOF;)try{$=be()}catch(Se){if($=b,w.errors){w.errors.push(Se);break}else throw Se}Tu(),he=w.tokens,typeof w.comments<"u"&&(he.comments=w.comments),typeof w.errors<"u"&&(he.errors=w.errors)}catch(Se){throw Se}finally{w={}}return he}function ra(D,E){var k,$;$=String,typeof D!="string"&&!(D instanceof String)&&(D=$(D)),_=p,f=D,d=0,m=f.length>0?1:0,y=0,g=f.length,b=null,C={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},w={},typeof E<"u"&&(w.range=typeof E.range=="boolean"&&E.range,w.loc=typeof E.loc=="boolean"&&E.loc,w.attachComment=typeof E.attachComment=="boolean"&&E.attachComment,w.loc&&E.source!==null&&E.source!==void 0&&(w.source=$(E.source)),typeof E.tokens=="boolean"&&E.tokens&&(w.tokens=[]),typeof E.comment=="boolean"&&E.comment&&(w.comments=[]),typeof E.tolerant=="boolean"&&E.tolerant&&(w.errors=[]),w.attachComment&&(w.range=!0,w.comments=[],w.bottomRightStack=[],w.trailingComments=[],w.leadingComments=[]));try{k=Hs(),typeof w.comments<"u"&&(k.comments=w.comments),typeof w.tokens<"u"&&(Tu(),k.tokens=w.tokens),typeof w.errors<"u"&&(k.errors=w.errors)}catch(he){throw he}finally{w={}}return k}t.version="1.2.5",t.tokenize=Ki,t.parse=ra,t.Syntax=function(){var D,E={};typeof Object.create=="function"&&(E=Object.create(null));for(D in a)a.hasOwnProperty(D)&&(E[D]=a[D]);return typeof Object.freeze=="function"&&Object.freeze(E),E}()})})(wp);var G2=wp,_0=bp,K2=0;function Y2(e,t,r){this.name=e,this.lvalue=t,this.rvalue=r,this.count=0}function Z2(e,t,r,n){this.body=e,this.args=t,this.thisVars=r,this.localVars=n}function $2(e){if(e==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?e in window:typeof cr<"u"?e in cr:typeof self<"u"?e in self:!1}function X2(e){for(var t=e.body[0].expression.callee.params,r=new Array(t.length),n=0;n<t.length;++n)r[n]=t[n].name;return r}function J2(e){for(var t=["(",e,")()"].join(""),r=G2.parse(t,{range:!0}),n="_inline_"+K2+++"_",u=X2(r),a=new Array(u.length),l=0;l<u.length;++l)a[l]=new Y2([n,"arg",l,"_"].join(""),!1,!1);for(var o=new Array(t.length),l=0,c=t.length;l<c;++l)o[l]=t.charAt(l);var p=[],f=[];function h(B){var F=n+B.replace(/\_/g,"__");return p.push(F),F}function d(B){var F="this_"+B.replace(/\_/g,"__");return f.push(F),F}function m(B,F){for(var O=B.range[0],P=B.range[1],I=O+1;I<P;++I)o[I]="";o[O]=F}function y(B){return"'"+B.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function g(B){return o.slice(B.range[0],B.range[1]).join("")}var _=1,b=2;function C(B){return B.parent.type==="AssignmentExpression"&&B.parent.left===B?B.parent.operator==="="?_:_|b:B.parent.type==="UpdateExpression"?_|b:b}(function B(F,O){if(F.parent=O,F.type==="MemberExpression")F.computed?(B(F.object,F),B(F.property,F)):F.object.type==="ThisExpression"?m(F,d(F.property.name)):B(F.object,F);else{if(F.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(F.type==="Identifier"){var P=F.name,I=u.indexOf(P);if(I>=0){var N=a[I],H=C(F);H&_&&(N.lvalue=!0),H&b&&(N.rvalue=!0),++N.count,m(F,N.name)}else $2(P)||m(F,h(P))}else if(F.type==="Literal")typeof F.value=="string"&&m(F,y(F.value));else{if(F.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var W=Object.keys(F),q=0,J=W.length;q<J;++q)if(W[q]!=="parent"){var Y=F[W[q]];if(Y)if(Y instanceof Array)for(var R=0;R<Y.length;++R)Y[R]&&typeof Y[R].type=="string"&&B(Y[R],F);else typeof Y.type=="string"&&B(Y,F)}}}})(r.body[0].expression.callee.body,void 0),_0(p),_0(f);var w=new Z2(g(r.body[0].expression.callee.body),a,f,p);return w}var Q2=J2,al=Q2,eC=df,Wa=["args","body"],tC=["pre","post","printCode","funcName","blockSize"];function rC(e){for(var t in e)Wa.indexOf(t)<0&&tC.indexOf(t)<0&&console.warn("cwise: Unknown argument '"+t+"' passed to expression compiler");for(var r=0;r<Wa.length;++r)if(!e[Wa[r]])throw new Error("cwise: Missing argument: "+Wa[r]);return eC({args:e.args,pre:al(e.pre||function(){}),body:al(e.body),post:al(e.post||function(){}),debug:!!e.printCode,funcName:e.funcName||e.body.name||"cwise",blockSize:e.blockSize||64})}var Us=rC,nC=H2,iC=Us,uC=iC({args:["array","scalar","index"],body:function(t,r,n){var u=r,a;for(a=0;a<n.length-1;++a)u=u[n[a]];u[n[n.length-1]]=t}}),aC=function(t){var r=nC(t.shape);return uC(t,r),r},ls={},sC={get exports(){return ls},set exports(e){ls=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(l,o){for(var c=new Float64Array(l*o),p=0;p<c.length;p++)c[p]=a()*1e-4;return(0,n.default)(c,[l,o])};var r=_u,n=u(r);function u(l){return l&&l.__esModule?l:{default:l}}function a(){var l=2*Math.random()-1,o=2*Math.random()-1,c=l*l+o*o;return c==0||c>1?a():l*Math.sqrt(-2*Math.log(c)/c)}e.exports=t.default})(sC,ls);var Qu={},oC={get exports(){return Qu},set exports(e){Qu=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(h,d){var m=h.shape[0],y=(0,n.default)(new Float64Array(m*m),[m,m]);switch(d){case"euclidean":for(var g=0;g<m;g++)for(var _=g+1;_<m;_++){var b=o(h.pick(g,null),h.pick(_,null));y.set(g,_,b),y.set(_,g,b)}break;case"manhattan":for(var g=0;g<m;g++)for(var _=g+1;_<m;_++){var b=c(h.pick(g,null),h.pick(_,null));y.set(g,_,b),y.set(_,g,b)}break;case"jaccard":for(var g=0;g<m;g++)for(var _=g+1;_<m;_++){var b=p(h.pick(g,null),h.pick(_,null));y.set(g,_,b),y.set(_,g,b)}break;case"dice":for(var g=0;g<m;g++)for(var _=g+1;_<m;_++){var b=f(h.pick(g,null),h.pick(_,null));y.set(g,_,b),y.set(_,g,b)}break}return y};var r=_u,n=l(r),u=Us,a=l(u);function l(h){return h&&h.__esModule?h:{default:h}}var o=(0,a.default)({args:["array","array"],pre:function(d,m){this.sum=0},body:function(d,m){var y=d-m;this.sum+=y*y},post:function(d,m){return Math.sqrt(this.sum)}}),c=(0,a.default)({args:["array","array"],pre:function(d,m){this.sum=0},body:function(d,m){this.sum+=Math.abs(d-m)},post:function(d,m){return this.sum}}),p=(0,a.default)({args:["array","array"],pre:function(d,m){this.tf=0,this.tt=0},body:function(d,m){var y=Math.round(d),g=Math.round(m);this.tf+=+(y!=g),this.tt+=+(y==1&&g==1)},post:function(d,m){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),f=(0,a.default)({args:["array","array"],pre:function(d,m){this.tf=0,this.tt=0},body:function(d,m){var y=Math.round(d),g=Math.round(m);this.tf+=+(y!=g),this.tt+=+(y==1&&g==1)},post:function(d,m){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});e.exports=t.default})(oC,Qu);var fs={},lC={get exports(){return fs},set exports(e){fs=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(f,h){for(var d=100,m=f.shape[0],y=(0,n.default)(new Float64Array(m*m),[m,m]),g=(0,n.default)(new Float64Array(m*m),[m,m]),_=void 0,b=void 0,C=1/0,w=Math.log(h),B=void 0,F=void 0,O=void 0,P=void 0,I=0;I<m;I++){_=1,b=-1/0,C=1/0;for(var N=0;N<d;N++){for(var H=0;H<m;H++)y.set(I,H,Math.exp(-f.get(I,H)*_));y.set(I,I,0),O=0;for(var H=0;H<m;H++)O+=y.get(I,H);O==0&&(O=o),P=0;for(var H=0;H<m;H++)y.set(I,H,y.get(I,H)/O),P+=f.get(I,H)*y.get(I,H);if(F=Math.log(O)+_*P,B=F-w,Math.abs(B)<=p)break;B>0?(b=_,C==1/0?_=_*2:_=(_+C)/2):(C=_,b==-1/0?_=_/2:_=(_+b)/2)}}a.default.add(g,y,y.transpose(1,0));var W=Math.max(a.default.sum(g),c);return a.default.divseq(g,W),a.default.maxseq(g,c),g};var r=_u,n=l(r),u=Ls,a=l(u);function l(f){return f&&f.__esModule?f:{default:f}}var o=1e-7,c=Number.EPSILON||2220446049250313e-31,p=1e-5;e.exports=t.default})(lC,fs);var cs={},fC={get exports(){return cs},set exports(e){cs=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(m,y,g){var _=m.shape[0],b=m.shape[1],C=(0,n.default)(new Float64Array(_*_),[_,_]),w=(0,p.default)(m,"euclidean");d(w);var B=(g+1)/-2;a.default.powseq(a.default.divseq(a.default.addseq(w,1),g),B);for(var F=0;F<_;F++)w.set(F,F,0);var O=Math.max(a.default.sum(w),h);a.default.divs(C,w,O),a.default.maxseq(C,h);var P=(0,n.default)(new Float64Array(_*_),[_,_]),I=(0,n.default)(new Float64Array(_*_),[_,_]);a.default.div(P,y,C),a.default.logeq(P),a.default.assign(I,y);var N=a.default.sum(a.default.muleq(P,I)),H=(0,n.default)(new Float64Array(m.size),m.shape),W=(0,n.default)(new Float64Array(_*_),[_,_]);a.default.sub(W,y,C),a.default.muleq(W,w);for(var F=0;F<_;F++)for(var q=0;q<b;q++){var J=(0,n.default)(new Float64Array(m.shape[0]),[m.shape[0]]);a.default.assign(J,m.pick(null,q)),a.default.addseq(a.default.negeq(J),m.get(F,q)),a.default.muleq(J,W.pick(F,null)),H.set(F,q,a.default.sum(J))}var Y=2*(g+1)/g;return a.default.mulseq(H,Y),[N,H]};var r=_u,n=f(r),u=Ls,a=f(u),l=Us,o=f(l),c=Qu,p=f(c);function f(m){return m&&m.__esModule?m:{default:m}}var h=Number.EPSILON||2220446049250313e-31,d=(0,o.default)({args:["array"],body:function(y){}});e.exports=t.default})(fC,cs);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function J(Y,R){var z=[],re=!0,Q=!1,te=void 0;try{for(var ve=Y[Symbol.iterator](),me;!(re=(me=ve.next()).done)&&(z.push(me.value),!(R&&z.length===R));re=!0);}catch(Fe){Q=!0,te=Fe}finally{try{!re&&ve.return&&ve.return()}finally{if(Q)throw te}}return z}return function(Y,R){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return J(Y,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function J(Y,R){for(var z=0;z<R.length;z++){var re=R[z];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(Y,re.key,re)}}return function(Y,R,z){return R&&J(Y.prototype,R),z&&J(Y,z),Y}}(),u=ss,a=_u,l=P(a),o=Ls,c=P(o),p=q2,f=P(p),h=aC,d=P(h),m=Us,y=P(m),g=ls,_=P(g),b=Qu,C=P(b),w=fs,B=P(w),F=cs,O=P(F);function P(J){return J&&J.__esModule?J:{default:J}}function I(J){if(Array.isArray(J)){for(var Y=0,R=Array(J.length);Y<J.length;Y++)R[Y]=J[Y];return R}else return Array.from(J)}function N(J,Y){if(!(J instanceof Y))throw new TypeError("Cannot call a class as a function")}function H(J,Y){if(!J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:J}function W(J,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);J.prototype=Object.create(Y&&Y.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(J,Y):J.__proto__=Y)}var q=function(J){W(Y,J);function Y(R){N(this,Y);var z=H(this,Object.getPrototypeOf(Y).call(this));return R=R||{},z.dim=R.dim||2,z.perplexity=R.perplexity||30,z.earlyExaggeration=R.earlyExaggeration||4,z.learningRate=R.learningRate||1e3,z.nIter=R.nIter||1e3,z.metric=R.metric||"euclidean",z.barneshut=R.barneshut||!1,z.inputData=null,z.outputEmbedding=null,z}return n(Y,[{key:"init",value:function(z){z=z||{};var re=z.data||[],Q=z.type||"dense";if(Q==="dense")this.inputData=(0,f.default)(re);else if(Q==="sparse"){for(var te=[],ve=1,me=function(at){var mt=Math.max.apply(null,re.map(function(et){return et[at]}))+1;te.push(mt),ve*=mt},Fe=0;Fe<re[0].length;Fe++)me(Fe);this.inputData=(0,l.default)(new Float64Array(ve),te);var Ae=!0,Ie=!1,Ue=void 0;try{for(var Ve=re[Symbol.iterator](),tt;!(Ae=(tt=Ve.next()).done);Ae=!0){var We,Me=tt.value;(We=this.inputData).set.apply(We,I(Me).concat([1]))}}catch(qe){Ie=!0,Ue=qe}finally{try{!Ae&&Ve.return&&Ve.return()}finally{if(Ie)throw Ue}}}else throw new Error("input data type must be dense or sparse");this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,C.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,B.default)(this.distances,this.perplexity);var z=Number.MAX_VALUE,re=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),c.default.mulseq(this.P,this.earlyExaggeration);var Q=this._gradDesc(re,50,.5,0,0),te=r(Q,2);z=te[0],re=te[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var ve=this._gradDesc(re+1,100,.8,0,0),me=r(ve,2);z=me[0],re=me[1],this.emit("progressStatus","Final optimization with momentum 0.8"),c.default.divseq(this.P,this.earlyExaggeration);var Fe=this._gradDesc(re+1,this.nIter,.8,1e-6,1e-6),Ae=r(Fe,2);return z=Ae[0],re=Ae[1],this.emit("progressStatus","Optimization end"),[z,re]}},{key:"rerun",value:function(){this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim);var z=this.run(),re=r(z,2),Q=re[0],te=re[1];return[Q,te]}},{key:"getOutput",value:function(){return(0,d.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var z=(0,l.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),re=(0,l.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),Q=0;Q<this.outputEmbedding.shape[1];Q++){var te=c.default.sup(c.default.abs(re,this.outputEmbedding.pick(null,Q)));c.default.divs(z.pick(null,Q),this.outputEmbedding.pick(null,Q),te)}return(0,d.default)(z)}},{key:"_gradDesc",value:function(z,re,Q){for(var te=arguments.length<=3||arguments[3]===void 0?1e-6:arguments[3],ve=arguments.length<=4||arguments[4]===void 0?1e-6:arguments[4],me=30,Fe=(0,l.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),Ae=new Float64Array(this.outputEmbedding.size),Ie=0;Ie<Ae.length;Ie++)Ae[Ie]=1;var Ue=(0,l.default)(Ae,this.outputEmbedding.shape),Ve=Number.MAX_VALUE,tt=Number.MAX_VALUE,We=0,Me=(0,y.default)({args:["array"],pre:function(ke){this.sum=0},body:function(ke){this.sum+=ke*ke},post:function(ke){return Math.sqrt(this.sum)}}),qe=(0,y.default)({args:["array","array","array"],body:function(ke,it,_t){}}),at=void 0;for(at=z;at<re;at++){var mt=(0,O.default)(this.outputEmbedding,this.P,this.alpha),et=r(mt,2),He=et[0],yt=et[1],Et=Math.abs(He-Ve);Ve=He;var At=Me(yt);if(this.emit("progressIter",[at,Ve,At]),Ve<tt)tt=Ve,We=at;else if(at-We>me)break;if(te>=At||ve>=Et)break;qe(Ue,Fe,yt),c.default.muleq(yt,Ue);var we=(0,l.default)(new Float64Array(yt.size),yt.shape);c.default.muls(we,yt,this.learningRate),c.default.mulseq(Fe,Q),c.default.subeq(Fe,we),c.default.addeq(this.outputEmbedding,Fe),this.emit("progressData",this.getOutputScaled())}return[Ve,at]}}]),Y}(u.EventEmitter);t.default=q,e.exports=t.default})(u2,as);const cC=sf(as);var Gl={},hC={get exports(){return Gl},set exports(e){Gl=e}},hs={},dC={get exports(){return hs},set exports(e){hs=e}},D0;function pC(){return D0||(D0=1,function(e){function t(r,n,u,a){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,u,a)}t.prototype.run=function(r,n,u,a){this._init(r,n,u,a);for(var l=0;l<this._datasetLength;l++)if(this._visited[l]!==1){this._visited[l]=1;var o=this._regionQuery(l);if(o.length<this.minPts)this.noise.push(l);else{var c=this.clusters.length;this.clusters.push([]),this._addToCluster(l,c),this._expandCluster(c,o)}}return this.clusters},t.prototype._init=function(r,n,u,a){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),u&&(this.minPts=u),a&&(this.distance=a)},t.prototype._expandCluster=function(r,n){for(var u=0;u<n.length;u++){var a=n[u];if(this._visited[a]!==1){this._visited[a]=1;var l=this._regionQuery(a);l.length>=this.minPts&&(n=this._mergeArrays(n,l))}this._assigned[a]!==1&&this._addToCluster(a,r)}},t.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1},t.prototype._regionQuery=function(r){for(var n=[],u=0;u<this._datasetLength;u++){var a=this.distance(this.dataset[r],this.dataset[u]);a<this.epsilon&&n.push(u)}return n},t.prototype._mergeArrays=function(r,n){for(var u=n.length,a=0;a<u;a++){var l=n[a];r.indexOf(l)<0&&r.push(l)}return r},t.prototype._euclideanDistance=function(r,n){for(var u=0,a=Math.min(r.length,n.length);a--;)u+=(r[a]-n[a])*(r[a]-n[a]);return Math.sqrt(u)},e.exports&&(e.exports=t)}(dC)),hs}var ds={},vC={get exports(){return ds},set exports(e){ds=e}},b0;function gC(){return b0||(b0=1,function(e){function t(r,n,u){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,u)}t.prototype.init=function(r,n,u){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof u<"u"&&(this.distance=u)},t.prototype.run=function(r,n){this.init(r,n);for(var u=this.dataset.length,a=0;a<this.k;a++)this.centroids[a]=this.randomCentroid();for(var l=!0;l;){l=this.assign();for(var o=0;o<this.k;o++){for(var c=new Array(d),p=0,f=0;f<d;f++)c[f]=0;for(var h=0;h<u;h++){var d=this.dataset[h].length;if(o===this.assignments[h]){for(var f=0;f<d;f++)c[f]+=this.dataset[h][f];p++}}if(p>0){for(var f=0;f<d;f++)c[f]/=p;this.centroids[o]=c}else this.centroids[o]=this.randomCentroid(),l=!0}}return this.getClusters()},t.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,u;do u=Math.round(Math.random()*r),n=this.dataset[u];while(this.centroids.indexOf(n)>=0);return n},t.prototype.assign=function(){for(var r=!1,n=this.dataset.length,u,a=0;a<n;a++)u=this.argmin(this.dataset[a],this.centroids,this.distance),u!=this.assignments[a]&&(this.assignments[a]=u,r=!0);return r},t.prototype.getClusters=function(){for(var r=new Array(this.k),n,u=0;u<this.assignments.length;u++)n=this.assignments[u],typeof r[n]>"u"&&(r[n]=[]),r[n].push(u);return r},t.prototype.argmin=function(r,n,u){for(var a=Number.MAX_VALUE,l=0,o=n.length,c,p=0;p<o;p++)c=u(r,n[p]),c<a&&(a=c,l=p);return l},t.prototype.distance=function(r,n){for(var u=0,a=Math.min(r.length,n.length);a--;){var l=r[a]-n[a];u+=l*l}return Math.sqrt(u)},e.exports&&(e.exports=t)}(vC)),ds}var ps={},mC={get exports(){return ps},set exports(e){ps=e}},vs={},_C={get exports(){return vs},set exports(e){vs=e}},y0;function Ep(){return y0||(y0=1,function(e){function t(r,n,u){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,u)}t.prototype.insert=function(r,n){for(var u=this._queue.length,a=u;a--;){var l=this._priorities[a];this._sorting==="desc"?n>l&&(u=a):n<l&&(u=a)}this._insertAt(r,n,u)},t.prototype.remove=function(r){for(var n=this._queue.length;n--;){var u=this._queue[n];if(r===u){this._queue.splice(n,1),this._priorities.splice(n,1);break}}},t.prototype.forEach=function(r){this._queue.forEach(r)},t.prototype.getElements=function(){return this._queue},t.prototype.getElementPriority=function(r){return this._priorities[r]},t.prototype.getPriorities=function(){return this._priorities},t.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,u=this._queue.length;n<u;n++)r.push([this._queue[n],this._priorities[n]]);return r},t.prototype._init=function(r,n,u){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var a=0;a<r.length;a++)this.insert(r[a],n[a])}u&&(this._sorting=u)},t.prototype._insertAt=function(r,n,u){this._queue.length===u?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(u,0,r),this._priorities.splice(u,0,n))},e.exports&&(e.exports=t)}(_C)),vs}var A0;function DC(){return A0||(A0=1,function(e){if(e.exports)var t=Ep();function r(n,u,a,l){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,u,a,l)}r.prototype.run=function(n,u,a,l){this._init(n,u,a,l);for(var o=0,c=this.dataset.length;o<c;o++)if(this._processed[o]!==1){this._processed[o]=1,this.clusters.push([o]);var p=this.clusters.length-1;this._orderedList.push(o);var f=new t(null,null,"asc"),h=this._regionQuery(o);this._distanceToCore(o)!==void 0&&(this._updateQueue(o,h,f),this._expandCluster(p,f))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var n=[],u=0,a=this._orderedList.length;u<a;u++){var l=this._orderedList[u],o=this._reachability[l];n.push([l,o])}return n},r.prototype._init=function(n,u,a,l){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}u&&(this.epsilon=u),a&&(this.minPts=a),l&&(this.distance=l)},r.prototype._updateQueue=function(n,u,a){var l=this;this._coreDistance=this._distanceToCore(n),u.forEach(function(o){if(l._processed[o]===void 0){var c=l.distance(l.dataset[n],l.dataset[o]),p=Math.max(l._coreDistance,c);l._reachability[o]===void 0?(l._reachability[o]=p,a.insert(o,p)):p<l._reachability[o]&&(l._reachability[o]=p,a.remove(o),a.insert(o,p))}})},r.prototype._expandCluster=function(n,u){for(var a=u.getElements(),l=0,o=a.length;l<o;l++){var c=a[l];if(this._processed[c]===void 0){var p=this._regionQuery(c);this._processed[c]=1,this.clusters[n].push(c),this._orderedList.push(c),this._distanceToCore(c)!==void 0&&(this._updateQueue(c,p,u),this._expandCluster(n,u))}}},r.prototype._distanceToCore=function(n){for(var u=this.epsilon,a=0;a<u;a++){var l=this._regionQuery(n,a);if(l.length>=this.minPts)return a}},r.prototype._regionQuery=function(n,u){u=u||this.epsilon;for(var a=[],l=0,o=this.dataset.length;l<o;l++)this.distance(this.dataset[n],this.dataset[l])<u&&a.push(l);return a},r.prototype._euclideanDistance=function(n,u){for(var a=0,l=Math.min(n.length,u.length);l--;)a+=(n[l]-u[l])*(n[l]-u[l]);return Math.sqrt(a)},e.exports&&(e.exports=r)}(mC)),ps}(function(e){e.exports&&(e.exports={DBSCAN:pC(),KMEANS:gC(),OPTICS:DC(),PriorityQueue:Ep()})})(hC);var gs={},bC={get exports(){return gs},set exports(e){gs=e}};(function(e){var t=parseInt(Number.MAX_SAFE_INTEGER/2)||4503599627370496,r=0;function n(){this.C=null,this.row_covered=[],this.col_covered=[],this.n=0,this.Z0_r=0,this.Z0_c=0,this.marked=null,this.path=null}n.prototype.pad_matrix=function(o,c){c=c||r;var p=0,f=o.length,h;for(h=0;h<f;++h)o[h].length>p&&(p=o[h].length);f=p>f?p:f;var d=[];for(h=0;h<f;++h){for(var m=o[h]||[],y=m.slice();f>y.length;)y.push(c);d.push(y)}return d},n.prototype.compute=function(o,c){c=c||{},c.padValue=c.padValue||r,this.C=this.pad_matrix(o,c.padValue),this.n=this.C.length,this.original_length=o.length,this.original_width=o[0].length;for(var p=[];p.length<this.n;)p.push(!1);this.row_covered=p.slice(),this.col_covered=p.slice(),this.Z0_r=0,this.Z0_c=0,this.path=this.__make_matrix(this.n*2,0),this.marked=this.__make_matrix(this.n,0);for(var f=1,h={1:this.__step1,2:this.__step2,3:this.__step3,4:this.__step4,5:this.__step5,6:this.__step6};;){var d=h[f];if(!d)break;f=d.apply(this)}for(var m=[],y=0;y<this.original_length;++y)for(var g=0;g<this.original_width;++g)this.marked[y][g]==1&&m.push([y,g]);return m},n.prototype.__make_matrix=function(o,c){for(var p=[],f=0;f<o;++f){p[f]=[];for(var h=0;h<o;++h)p[f][h]=c}return p},n.prototype.__step1=function(){for(var o=0;o<this.n;++o)for(var c=Math.min.apply(Math,this.C[o]),p=0;p<this.n;++p)this.C[o][p]-=c;return 2},n.prototype.__step2=function(){for(var o=0;o<this.n;++o)for(var c=0;c<this.n;++c)if(this.C[o][c]===0&&!this.col_covered[c]&&!this.row_covered[o]){this.marked[o][c]=1,this.col_covered[c]=!0,this.row_covered[o]=!0;break}return this.__clear_covers(),3},n.prototype.__step3=function(){for(var o=0,c=0;c<this.n;++c)for(var p=0;p<this.n;++p)this.marked[c][p]==1&&this.col_covered[p]==!1&&(this.col_covered[p]=!0,++o);return o>=this.n?7:4},n.prototype.__step4=function(){for(var o=!1,c=-1,p=-1,f=-1;!o;){var h=this.__find_a_zero();if(c=h[0],p=h[1],c<0)return 6;if(this.marked[c][p]=2,f=this.__find_star_in_row(c),f>=0)p=f,this.row_covered[c]=!0,this.col_covered[p]=!1;else return this.Z0_r=c,this.Z0_c=p,5}},n.prototype.__step5=function(){var o=0;this.path[o][0]=this.Z0_r,this.path[o][1]=this.Z0_c;for(var c=!1;!c;){var p=this.__find_star_in_col(this.path[o][1]);if(p>=0?(o++,this.path[o][0]=p,this.path[o][1]=this.path[o-1][1]):c=!0,!c){var f=this.__find_prime_in_row(this.path[o][0]);o++,this.path[o][0]=this.path[o-1][0],this.path[o][1]=f}}return this.__convert_path(this.path,o),this.__clear_covers(),this.__erase_primes(),3},n.prototype.__step6=function(){for(var o=this.__find_smallest(),c=0;c<this.n;++c)for(var p=0;p<this.n;++p)this.row_covered[c]&&(this.C[c][p]+=o),this.col_covered[p]||(this.C[c][p]-=o);return 4},n.prototype.__find_smallest=function(){for(var o=t,c=0;c<this.n;++c)for(var p=0;p<this.n;++p)!this.row_covered[c]&&!this.col_covered[p]&&o>this.C[c][p]&&(o=this.C[c][p]);return o},n.prototype.__find_a_zero=function(){for(var o=0;o<this.n;++o)for(var c=0;c<this.n;++c)if(this.C[o][c]===0&&!this.row_covered[o]&&!this.col_covered[c])return[o,c];return[-1,-1]},n.prototype.__find_star_in_row=function(o){for(var c=0;c<this.n;++c)if(this.marked[o][c]==1)return c;return-1},n.prototype.__find_star_in_col=function(o){for(var c=0;c<this.n;++c)if(this.marked[c][o]==1)return c;return-1},n.prototype.__find_prime_in_row=function(o){for(var c=0;c<this.n;++c)if(this.marked[o][c]==2)return c;return-1},n.prototype.__convert_path=function(o,c){for(var p=0;p<=c;++p)this.marked[o[p][0]][o[p][1]]=this.marked[o[p][0]][o[p][1]]==1?0:1},n.prototype.__clear_covers=function(){for(var o=0;o<this.n;++o)this.row_covered[o]=!1,this.col_covered[o]=!1},n.prototype.__erase_primes=function(){for(var o=0;o<this.n;++o)for(var c=0;c<this.n;++c)this.marked[o][c]==2&&(this.marked[o][c]=0)};function u(o,c){var p,f;if(!c){var h=-1/0;for(p=0;p<o.length;++p)for(f=0;f<o[p].length;++f)o[p][f]>h&&(h=o[p][f]);c=function(y){return h-y}}var d=[];for(p=0;p<o.length;++p){var m=o[p];for(d[p]=[],f=0;f<m.length;++f)d[p][f]=c(o[p][f])}return d}function a(o){var c=[],p,f;for(p=0;p<o.length;++p)for(f=0;f<o[p].length;++f){var h=String(o[p][f]).length;(!c[f]||h>=c[f])&&(c[f]=h)}var d="";for(p=0;p<o.length;++p){for(f=0;f<o[p].length;++f){for(var m=String(o[p][f]);m.length<c[f];)m=" "+m;d+=m,f!=o[p].length-1&&(d+=" ")}p!=o[p].length-1&&(d+=`
`)}return d}function l(o,c){var p=new n;return p.compute(o,c)}l.version="1.2.2",l.format_matrix=a,l.make_cost_matrix=u,l.Munkres=n,e.exports&&(e.exports=l)})(bC);const yC=gs,AC=Kb({__proto__:null,default:yC},[gs]);function w0(e,t,r){const n=e.slice();return n[31]=t[r][0],n[32]=t[r][1],n}function E0(e){let t=[],r=new Map,n,u,a,l=Object.entries(e[4].weightedPrompts);const o=c=>c[31];for(let c=0;c<l.length;c+=1){let p=w0(e,l,c),f=o(p);r.set(f,t[c]=F0(f,p))}return u=new ea({props:{xy:e[7],radius:e[1],color:"rgba(136,157,191, 1)",handleMouseDown:e[19]}}),{c(){for(let c=0;c<t.length;c+=1)t[c].c();n=Zt(),ht(u.$$.fragment)},l(c){for(let p=0;p<t.length;p+=1)t[p].l(c);n=Zt(),dt(u.$$.fragment,c)},m(c,p){for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(c,p);Ce(c,n,p),pt(u,c,p),a=!0},p(c,p){p[0]&221&&(l=Object.entries(c[4].weightedPrompts),mn(),t=Fi(t,p,o,1,c,l,r,n.parentNode,Sd,F0,n,w0),_n());const f={};p[0]&128&&(f.xy=c[7]),p[0]&2&&(f.radius=c[1]),p[0]&32&&(f.handleMouseDown=c[19]),u.$set(f)},i(c){if(!a){for(let p=0;p<l.length;p+=1)xe(t[p]);xe(u.$$.fragment,c),a=!0}},o(c){for(let p=0;p<t.length;p+=1)Le(t[p]);Le(u.$$.fragment,c),a=!1},d(c){for(let p=0;p<t.length;p+=1)t[p].d(c);c&&V(n),vt(u,c)}}}function C0(e){let t,r;return t=new lp({props:{p1:e[6][e[31]].embedXY,p2:e[7]}}),{c(){ht(t.$$.fragment)},l(n){dt(t.$$.fragment,n)},m(n,u){pt(t,n,u),r=!0},p(n,u){const a={};u[0]&80&&(a.p1=n[6][n[31]].embedXY),u[0]&128&&(a.p2=n[7]),t.$set(a)},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Le(t.$$.fragment,n),r=!1},d(n){vt(t,n)}}}function F0(e,t){let r,n,u,a,l,o=t[32].embedActive&&C0(t);return u=new ea({props:{xy:t[6][t[31]].embedXY,radius:t[0],color:"rgba(136,157,191, 1)"}}),a=new Ns({props:{xy:[t[6][t[31]].embedXY[0]-tn(t[2],t[32].text.length,t[3])[0]/2,t[6][t[31]].embedXY[1]+t[0]],color:`rgba(255,255,255,${Pr(t[32].embedWeight)}`,wh:tn(t[2],t[32].text.length,t[3]),fontSize:t[3],text:t[32].text}}),{key:e,first:null,c(){r=Zt(),o&&o.c(),n=Zt(),ht(u.$$.fragment),ht(a.$$.fragment),this.h()},l(c){r=Zt(),o&&o.l(c),n=Zt(),dt(u.$$.fragment,c),dt(a.$$.fragment,c),this.h()},h(){this.first=r},m(c,p){Ce(c,r,p),o&&o.m(c,p),Ce(c,n,p),pt(u,c,p),pt(a,c,p),l=!0},p(c,p){t=c,t[32].embedActive?o?(o.p(t,p),p[0]&16&&xe(o,1)):(o=C0(t),o.c(),xe(o,1),o.m(n.parentNode,n)):o&&(mn(),Le(o,1,1,()=>{o=null}),_n());const f={};p[0]&80&&(f.xy=t[6][t[31]].embedXY),p[0]&1&&(f.radius=t[0]),u.$set(f);const h={};p[0]&93&&(h.xy=[t[6][t[31]].embedXY[0]-tn(t[2],t[32].text.length,t[3])[0]/2,t[6][t[31]].embedXY[1]+t[0]]),p[0]&16&&(h.color=`rgba(255,255,255,${Pr(t[32].embedWeight)}`),p[0]&28&&(h.wh=tn(t[2],t[32].text.length,t[3])),p[0]&8&&(h.fontSize=t[3]),p[0]&16&&(h.text=t[32].text),a.$set(h)},i(c){l||(xe(o),xe(u.$$.fragment,c),xe(a.$$.fragment,c),l=!0)},o(c){Le(o),Le(u.$$.fragment,c),Le(a.$$.fragment,c),l=!1},d(c){c&&V(r),o&&o.d(c),c&&V(n),vt(u,c),vt(a,c)}}}function wC(e){let t,r=Object.entries(e[4].weightedPrompts).length>0&&Object.entries(e[6]||{}).length>0,n,u,a,l=r&&E0(e);return{c(){t=Ft("svg"),l&&l.c(),this.h()},l(o){t=St(o,"svg",{id:!0,class:!0});var c=ie(t);l&&l.l(c),c.forEach(V),this.h()},h(){x(t,"id","svg"),x(t,"class","w-full h-full")},m(o,c){Ce(o,t,c),l&&l.m(t,null),n=!0,u||(a=[Ne(t,"mousemove",e[9]),Ne(t,"mouseup",e[10]),Ne(t,"dblclick",e[8])],u=!0)},p(o,c){c[0]&80&&(r=Object.entries(o[4].weightedPrompts).length>0&&Object.entries(o[6]||{}).length>0),r?l?(l.p(o,c),c[0]&80&&xe(l,1)):(l=E0(o),l.c(),xe(l,1),l.m(t,null)):l&&(mn(),Le(l,1,1,()=>{l=null}),_n())},i(o){n||(xe(l),n=!0)},o(o){Le(l),n=!1},d(o){o&&V(t),l&&l.d(),u=!1,Lr(a)}}}function EC(e,t,r){let n,u,a,l,o;Nt(e,bn,Q=>r(4,o=Q));let{center:c=[100,100]}=t,{dimensions:p=[100,100]}=t,{pointRadius:f=4}=t,{markerRadius:h=10}=t,{textWidth:d=150}=t,{fontSize:m=12}=t,{innerPad:y=100}=t,g=!1,_=null,b=p,C=[0,0];function w(){return{"00":[C[0],C[1]],"01":[C[0],C[1]+b[1]],11:[C[0]+b[0],C[1]+b[1]],10:[C[0]+b[0],C[1]]}}function B(Q,te){return Q.map(ve=>te.map(me=>Ya(ve,me)))}function F(Q,te){if(Q.length!==te.length)throw new Error("Both sets should have the same number of points");const ve=B(Q,te);return console.log(ve),AC(ve).map(([Fe,Ae])=>({ids:[Fe,Ae],points:[Q[Fe],te[Ae]]}))}function O(Q){const te=Q.reduce((ve,me)=>Wr(ve,me),[0,0]);return vn(te,1/Q.length)}function P(Q){const te=w();switch(Q){case 2:return[vn(Wr(te["00"],te["01"]),.5),vn(Wr(te[10],te[11]),.5)];case 4:return[te["00"],te["01"],te[11],te[10]];case 6:return[vn(Wr(te["00"],te["01"]),.5),vn(Wr(te[10],te[11]),.5),te["00"],te["01"],te[11],te[10]];case 8:return[vn(Wr(te["00"],te["01"]),.5),vn(Wr(te[10],te[11]),.5),te["00"],te["01"],te[11],te[10],vn(Wr(te["00"],te[10]),.5),vn(Wr(te["01"],te[11]),.5)];default:return null}}function I(Q){o.embeddings&&o.scaledEmbedMappings&&(z(),q(n,u,a,b,Q))}function N(Q,te){Q&&te&&(z(),q(n,u,a,b,l))}function H(Q,te){q(n,Q,te,b,l)}function W(Q){o.embeddings&&o.scaledEmbedMappings&&(z(),q(n,u,a,Q,l))}function q(Q,te,ve,me,Fe){if(!_)return;let Ae={...o.weightedPrompts},Ie=0;Object.values(_).forEach(We=>{Object.values(_).forEach(Me=>{const qe=Ya(We.embedXY,Me.embedXY);qe>Ie&&(Ie=qe)})});const Ue=Object.entries(_).reduce((We,[Me,qe])=>{const at=Ya(Q,qe.embedXY);return We[Me]=at,We},{}),Ve=(We,Me)=>{const qe=We?Math.round(Math.pow(1-Me/Ie,ve)*100)/100:0;return qe<0?0:qe},tt=(We,Me)=>{const qe=We?Math.round((1-Me/Ie)*100)/100:0;return qe<0?0:qe};Object.entries(Ue).sort((We,Me)=>We[1]-Me[1]).forEach(([We,Me],qe)=>{if(!Ae[We])return;const at=qe<Fe;Ae[We]={...Ae[We],embedWeight:te?Ve(at,Me):tt(at,Me),embedActive:at}}),Mt.update({...o,embedMarker:n,weightedPrompts:Ae})}function J(Q){const te=qi(Q,svg);r(7,n=te),q(n,u,a,b,l)}function Y(Q){if(g){const te=qi(Q,svg);r(7,n=te),q(n,u,a,b,l)}}function R(Q){r(5,g=!1)}function z(){const te=Object.keys(o.scaledEmbedMappings).reduce((me,Fe,Ae)=>(me[Fe]={embedXY:[C[0]+b[0]*o.scaledEmbedMappings[Ae][0],C[1]+b[1]*o.scaledEmbedMappings[Ae][1]]},me),{}),ve=me=>{const Fe=me.map(Ae=>te[Ae].embedXY);return O(Fe)};if(o.embedClusters){const me=o.embedClusters,Fe=o.embedClusterSets[me],Ae=Fe.map(Ve=>ve(Ve)),Ie=P(me),Ue=F(Ae,Ie);Ue.forEach(Ve=>{const tt=Ve.ids[0],We=Ve.points[1];Fe[tt].forEach(Me=>{te[Me].embedXY=O([te[Me].embedXY,We])})}),console.log("paired",Ue)}r(6,_=te)}const re=()=>r(5,g=!0);return e.$$set=Q=>{"center"in Q&&r(11,c=Q.center),"dimensions"in Q&&r(12,p=Q.dimensions),"pointRadius"in Q&&r(0,f=Q.pointRadius),"markerRadius"in Q&&r(1,h=Q.markerRadius),"textWidth"in Q&&r(2,d=Q.textWidth),"fontSize"in Q&&r(3,m=Q.fontSize),"innerPad"in Q&&r(13,y=Q.innerPad)},e.$$.update=()=>{if(e.$$.dirty[0]&2064&&r(7,n=o.embedMarker||c),e.$$.dirty[0]&16&&r(18,u=o.embedExponentialScaling),e.$$.dirty[0]&16&&r(17,a=o.embedWeightScaling),e.$$.dirty[0]&16&&r(16,l=o.embedPromptLimit||Object.keys(o.weightedPrompts).length),e.$$.dirty[0]&393216&&H(u,a),e.$$.dirty[0]&16&&N(o.embeddings,o.scaledEmbedMappings),e.$$.dirty[0]&45056){const Q=Math.min(...p),te=p[0]===Q,ve=p[1]===Q;r(15,C=[Math.max(te?0:(p[0]-Q)/2,y),Math.max(ve?0:(p[1]-Q)/2,y)]),r(14,b=[p[0]-2*C[0],p[1]-2*C[1]])}e.$$.dirty[0]&16384&&W(b),e.$$.dirty[0]&65536&&I(l)},[f,h,d,m,o,g,_,n,J,Y,R,c,p,y,b,C,l,a,u,re]}class CC extends Rt{constructor(t){super(),Lt(this,t,EC,wC,Ut,{center:11,dimensions:12,pointRadius:0,markerRadius:1,textWidth:2,fontSize:3,innerPad:13},null,[-1,-1])}}var Kl={},Cp={},ms={},FC={get exports(){return ms},set exports(e){ms=e}},_s={},SC={get exports(){return _s},set exports(e){_s=e}},Fp=function(t,r){return function(){for(var u=new Array(arguments.length),a=0;a<u.length;a++)u[a]=arguments[a];return t.apply(r,u)}},BC=Fp,Bi=Object.prototype.toString;function pf(e){return Array.isArray(e)}function Yl(e){return typeof e>"u"}function OC(e){return e!==null&&!Yl(e)&&e.constructor!==null&&!Yl(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Sp(e){return Bi.call(e)==="[object ArrayBuffer]"}function MC(e){return Bi.call(e)==="[object FormData]"}function PC(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Sp(e.buffer),t}function xC(e){return typeof e=="string"}function TC(e){return typeof e=="number"}function Bp(e){return e!==null&&typeof e=="object"}function $a(e){if(Bi.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function IC(e){return Bi.call(e)==="[object Date]"}function NC(e){return Bi.call(e)==="[object File]"}function kC(e){return Bi.call(e)==="[object Blob]"}function Op(e){return Bi.call(e)==="[object Function]"}function RC(e){return Bp(e)&&Op(e.pipe)}function LC(e){return Bi.call(e)==="[object URLSearchParams]"}function UC(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function VC(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function vf(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),pf(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&t.call(null,e[u],u,e)}function Zl(){var e={};function t(u,a){$a(e[a])&&$a(u)?e[a]=Zl(e[a],u):$a(u)?e[a]=Zl({},u):pf(u)?e[a]=u.slice():e[a]=u}for(var r=0,n=arguments.length;r<n;r++)vf(arguments[r],t);return e}function jC(e,t,r){return vf(t,function(u,a){r&&typeof u=="function"?e[a]=BC(u,r):e[a]=u}),e}function qC(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Gr={isArray:pf,isArrayBuffer:Sp,isBuffer:OC,isFormData:MC,isArrayBufferView:PC,isString:xC,isNumber:TC,isObject:Bp,isPlainObject:$a,isUndefined:Yl,isDate:IC,isFile:NC,isBlob:kC,isFunction:Op,isStream:RC,isURLSearchParams:LC,isStandardBrowserEnv:VC,forEach:vf,merge:Zl,extend:jC,trim:UC,stripBOM:qC},ou=Gr;function S0(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Mp=function(t,r,n){if(!r)return t;var u;if(n)u=n(r);else if(ou.isURLSearchParams(r))u=r.toString();else{var a=[];ou.forEach(r,function(c,p){c===null||typeof c>"u"||(ou.isArray(c)?p=p+"[]":c=[c],ou.forEach(c,function(h){ou.isDate(h)?h=h.toISOString():ou.isObject(h)&&(h=JSON.stringify(h)),a.push(S0(p)+"="+S0(h))}))}),u=a.join("&")}if(u){var l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+u}return t},zC=Gr;function Vs(){this.handlers=[]}Vs.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Vs.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Vs.prototype.forEach=function(t){zC.forEach(this.handlers,function(n){n!==null&&t(n)})};var WC=Vs,HC=Gr,GC=function(t,r){HC.forEach(t,function(u,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(t[r]=u,delete t[a])})},Pp=function(t,r,n,u,a){return t.config=r,n&&(t.code=n),t.request=u,t.response=a,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},xp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},sl,B0;function Tp(){if(B0)return sl;B0=1;var e=Pp;return sl=function(r,n,u,a,l){var o=new Error(r);return e(o,n,u,a,l)},sl}var ol,O0;function KC(){if(O0)return ol;O0=1;var e=Tp();return ol=function(r,n,u){var a=u.config.validateStatus;!u.status||!a||a(u.status)?r(u):n(e("Request failed with status code "+u.status,u.config,null,u.request,u))},ol}var ll,M0;function YC(){if(M0)return ll;M0=1;var e=Gr;return ll=e.isStandardBrowserEnv()?function(){return{write:function(n,u,a,l,o,c){var p=[];p.push(n+"="+encodeURIComponent(u)),e.isNumber(a)&&p.push("expires="+new Date(a).toGMTString()),e.isString(l)&&p.push("path="+l),e.isString(o)&&p.push("domain="+o),c===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var u=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),ll}var fl,P0;function ZC(){return P0||(P0=1,fl=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}),fl}var cl,x0;function $C(){return x0||(x0=1,cl=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}),cl}var hl,T0;function XC(){if(T0)return hl;T0=1;var e=ZC(),t=$C();return hl=function(n,u){return n&&!e(u)?t(n,u):u},hl}var dl,I0;function JC(){if(I0)return dl;I0=1;var e=Gr,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return dl=function(n){var u={},a,l,o;return n&&e.forEach(n.split(`
`),function(p){if(o=p.indexOf(":"),a=e.trim(p.substr(0,o)).toLowerCase(),l=e.trim(p.substr(o+1)),a){if(u[a]&&t.indexOf(a)>=0)return;a==="set-cookie"?u[a]=(u[a]?u[a]:[]).concat([l]):u[a]=u[a]?u[a]+", "+l:l}}),u},dl}var pl,N0;function QC(){if(N0)return pl;N0=1;var e=Gr;return pl=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),u;function a(l){var o=l;return r&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return u=a(window.location.href),function(o){var c=e.isString(o)?a(o):o;return c.protocol===u.protocol&&c.host===u.host}}():function(){return function(){return!0}}(),pl}var vl,k0;function js(){if(k0)return vl;k0=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,vl=e,vl}var gl,R0;function L0(){if(R0)return gl;R0=1;var e=Gr,t=KC(),r=YC(),n=Mp,u=XC(),a=JC(),l=QC(),o=Tp(),c=xp,p=js();return gl=function(h){return new Promise(function(m,y){var g=h.data,_=h.headers,b=h.responseType,C;function w(){h.cancelToken&&h.cancelToken.unsubscribe(C),h.signal&&h.signal.removeEventListener("abort",C)}e.isFormData(g)&&delete _["Content-Type"];var B=new XMLHttpRequest;if(h.auth){var F=h.auth.username||"",O=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";_.Authorization="Basic "+btoa(F+":"+O)}var P=u(h.baseURL,h.url);B.open(h.method.toUpperCase(),n(P,h.params,h.paramsSerializer),!0),B.timeout=h.timeout;function I(){if(B){var H="getAllResponseHeaders"in B?a(B.getAllResponseHeaders()):null,W=!b||b==="text"||b==="json"?B.responseText:B.response,q={data:W,status:B.status,statusText:B.statusText,headers:H,config:h,request:B};t(function(Y){m(Y),w()},function(Y){y(Y),w()},q),B=null}}if("onloadend"in B?B.onloadend=I:B.onreadystatechange=function(){!B||B.readyState!==4||B.status===0&&!(B.responseURL&&B.responseURL.indexOf("file:")===0)||setTimeout(I)},B.onabort=function(){B&&(y(o("Request aborted",h,"ECONNABORTED",B)),B=null)},B.onerror=function(){y(o("Network Error",h,null,B)),B=null},B.ontimeout=function(){var W=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",q=h.transitional||c;h.timeoutErrorMessage&&(W=h.timeoutErrorMessage),y(o(W,h,q.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",B)),B=null},e.isStandardBrowserEnv()){var N=(h.withCredentials||l(P))&&h.xsrfCookieName?r.read(h.xsrfCookieName):void 0;N&&(_[h.xsrfHeaderName]=N)}"setRequestHeader"in B&&e.forEach(_,function(W,q){typeof g>"u"&&q.toLowerCase()==="content-type"?delete _[q]:B.setRequestHeader(q,W)}),e.isUndefined(h.withCredentials)||(B.withCredentials=!!h.withCredentials),b&&b!=="json"&&(B.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&B.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&B.upload&&B.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(C=function(H){B&&(y(!H||H&&H.type?new p("canceled"):H),B.abort(),B=null)},h.cancelToken&&h.cancelToken.subscribe(C),h.signal&&(h.signal.aborted?C():h.signal.addEventListener("abort",C))),g||(g=null),B.send(g)})},gl}var Sr=Gr,U0=GC,eF=Pp,tF=xp,rF={"Content-Type":"application/x-www-form-urlencoded"};function V0(e,t){!Sr.isUndefined(e)&&Sr.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function nF(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=L0()),e}function iF(e,t,r){if(Sr.isString(e))try{return(t||JSON.parse)(e),Sr.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var qs={transitional:tF,adapter:nF(),transformRequest:[function(t,r){return U0(r,"Accept"),U0(r,"Content-Type"),Sr.isFormData(t)||Sr.isArrayBuffer(t)||Sr.isBuffer(t)||Sr.isStream(t)||Sr.isFile(t)||Sr.isBlob(t)?t:Sr.isArrayBufferView(t)?t.buffer:Sr.isURLSearchParams(t)?(V0(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Sr.isObject(t)||r&&r["Content-Type"]==="application/json"?(V0(r,"application/json"),iF(t)):t}],transformResponse:[function(t){var r=this.transitional||qs.transitional,n=r&&r.silentJSONParsing,u=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||u&&Sr.isString(t)&&t.length)try{return JSON.parse(t)}catch(l){if(a)throw l.name==="SyntaxError"?eF(l,this,"E_JSON_PARSE"):l}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Sr.forEach(["delete","get","head"],function(t){qs.headers[t]={}});Sr.forEach(["post","put","patch"],function(t){qs.headers[t]=Sr.merge(rF)});var gf=qs,uF=Gr,aF=gf,sF=function(t,r,n){var u=this||aF;return uF.forEach(n,function(l){t=l.call(u,t,r)}),t},ml,j0;function Ip(){return j0||(j0=1,ml=function(t){return!!(t&&t.__CANCEL__)}),ml}var q0=Gr,_l=sF,oF=Ip(),lF=gf,fF=js();function Dl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new fF("canceled")}var cF=function(t){Dl(t),t.headers=t.headers||{},t.data=_l.call(t,t.data,t.headers,t.transformRequest),t.headers=q0.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),q0.forEach(["delete","get","head","post","put","patch","common"],function(u){delete t.headers[u]});var r=t.adapter||lF.adapter;return r(t).then(function(u){return Dl(t),u.data=_l.call(t,u.data,u.headers,t.transformResponse),u},function(u){return oF(u)||(Dl(t),u&&u.response&&(u.response.data=_l.call(t,u.response.data,u.response.headers,t.transformResponse))),Promise.reject(u)})},en=Gr,Np=function(t,r){r=r||{};var n={};function u(f,h){return en.isPlainObject(f)&&en.isPlainObject(h)?en.merge(f,h):en.isPlainObject(h)?en.merge({},h):en.isArray(h)?h.slice():h}function a(f){if(en.isUndefined(r[f])){if(!en.isUndefined(t[f]))return u(void 0,t[f])}else return u(t[f],r[f])}function l(f){if(!en.isUndefined(r[f]))return u(void 0,r[f])}function o(f){if(en.isUndefined(r[f])){if(!en.isUndefined(t[f]))return u(void 0,t[f])}else return u(void 0,r[f])}function c(f){if(f in r)return u(t[f],r[f]);if(f in t)return u(void 0,t[f])}var p={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c};return en.forEach(Object.keys(t).concat(Object.keys(r)),function(h){var d=p[h]||a,m=d(h);en.isUndefined(m)&&d!==c||(n[h]=m)}),n},bl,z0;function kp(){return z0||(z0=1,bl={version:"0.26.1"}),bl}var hF=kp().version,mf={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){mf[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var W0={};mf.transitional=function(t,r,n){function u(a,l){return"[Axios v"+hF+"] Transitional option '"+a+"'"+l+(n?". "+n:"")}return function(a,l,o){if(t===!1)throw new Error(u(l," has been removed"+(r?" in "+r:"")));return r&&!W0[l]&&(W0[l]=!0,console.warn(u(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,l,o):!0}};function dF(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),u=n.length;u-- >0;){var a=n[u],l=t[a];if(l){var o=e[a],c=o===void 0||l(o,a,e);if(c!==!0)throw new TypeError("option "+a+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+a)}}var pF={assertOptions:dF,validators:mf},Rp=Gr,vF=Mp,H0=WC,G0=cF,zs=Np,Lp=pF,lu=Lp.validators;function ta(e){this.defaults=e,this.interceptors={request:new H0,response:new H0}}ta.prototype.request=function(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=zs(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Lp.assertOptions(n,{silentJSONParsing:lu.transitional(lu.boolean),forcedJSONParsing:lu.transitional(lu.boolean),clarifyTimeoutError:lu.transitional(lu.boolean)},!1);var u=[],a=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(a=a&&m.synchronous,u.unshift(m.fulfilled,m.rejected))});var l=[];this.interceptors.response.forEach(function(m){l.push(m.fulfilled,m.rejected)});var o;if(!a){var c=[G0,void 0];for(Array.prototype.unshift.apply(c,u),c=c.concat(l),o=Promise.resolve(r);c.length;)o=o.then(c.shift(),c.shift());return o}for(var p=r;u.length;){var f=u.shift(),h=u.shift();try{p=f(p)}catch(d){h(d);break}}try{o=G0(p)}catch(d){return Promise.reject(d)}for(;l.length;)o=o.then(l.shift(),l.shift());return o};ta.prototype.getUri=function(t){return t=zs(this.defaults,t),vF(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};Rp.forEach(["delete","get","head","options"],function(t){ta.prototype[t]=function(r,n){return this.request(zs(n||{},{method:t,url:r,data:(n||{}).data}))}});Rp.forEach(["post","put","patch"],function(t){ta.prototype[t]=function(r,n,u){return this.request(zs(u||{},{method:t,url:r,data:n}))}});var gF=ta,yl,K0;function mF(){if(K0)return yl;K0=1;var e=js();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(l){n=l});var u=this;this.promise.then(function(a){if(u._listeners){var l,o=u._listeners.length;for(l=0;l<o;l++)u._listeners[l](a);u._listeners=null}}),this.promise.then=function(a){var l,o=new Promise(function(c){u.subscribe(c),l=c}).then(a);return o.cancel=function(){u.unsubscribe(l)},o},r(function(l){u.reason||(u.reason=new e(l),n(u.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},t.prototype.unsubscribe=function(n){if(this._listeners){var u=this._listeners.indexOf(n);u!==-1&&this._listeners.splice(u,1)}},t.source=function(){var n,u=new t(function(l){n=l});return{token:u,cancel:n}},yl=t,yl}var Al,Y0;function _F(){return Y0||(Y0=1,Al=function(t){return function(n){return t.apply(null,n)}}),Al}var wl,Z0;function DF(){if(Z0)return wl;Z0=1;var e=Gr;return wl=function(r){return e.isObject(r)&&r.isAxiosError===!0},wl}var $0=Gr,bF=Fp,Xa=gF,yF=Np,AF=gf;function Up(e){var t=new Xa(e),r=bF(Xa.prototype.request,t);return $0.extend(r,Xa.prototype,t),$0.extend(r,t),r.create=function(u){return Up(yF(e,u))},r}var Wn=Up(AF);Wn.Axios=Xa;Wn.Cancel=js();Wn.CancelToken=mF();Wn.isCancel=Ip();Wn.VERSION=kp().version;Wn.all=function(t){return Promise.all(t)};Wn.spread=_F();Wn.isAxiosError=DF();SC.exports=Wn;_s.default=Wn;(function(e){e.exports=_s})(FC);var nr={},_f={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RequiredError=e.BaseAPI=e.COLLECTION_FORMATS=e.BASE_PATH=void 0;const t=ms;e.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),e.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class r{constructor(a,l=e.BASE_PATH,o=t.default){this.basePath=l,this.axios=o,a&&(this.configuration=a,this.basePath=a.basePath||this.basePath)}}e.BaseAPI=r;class n extends Error{constructor(a,l){super(l),this.field=a,this.name="RequiredError"}}e.RequiredError=n})(_f);var Df=cr&&cr.__awaiter||function(e,t,r,n){function u(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(f){try{p(n.next(f))}catch(h){l(h)}}function c(f){try{p(n.throw(f))}catch(h){l(h)}}function p(f){f.done?a(f.value):u(f.value).then(o,c)}p((n=n.apply(e,t||[])).next())})};Object.defineProperty(nr,"__esModule",{value:!0});nr.createRequestFunction=nr.toPathString=nr.serializeDataIfNeeded=nr.setSearchParams=nr.setOAuthToObject=nr.setBearerAuthToObject=nr.setBasicAuthToObject=nr.setApiKeyToObject=nr.assertParamExists=nr.DUMMY_BASE_URL=void 0;const wF=_f;nr.DUMMY_BASE_URL="https://example.com";nr.assertParamExists=function(e,t,r){if(r==null)throw new wF.RequiredError(t,`Required parameter ${t} was null or undefined when calling ${e}.`)};nr.setApiKeyToObject=function(e,t,r){return Df(this,void 0,void 0,function*(){if(r&&r.apiKey){const n=typeof r.apiKey=="function"?yield r.apiKey(t):yield r.apiKey;e[t]=n}})};nr.setBasicAuthToObject=function(e,t){t&&(t.username||t.password)&&(e.auth={username:t.username,password:t.password})};nr.setBearerAuthToObject=function(e,t){return Df(this,void 0,void 0,function*(){if(t&&t.accessToken){const r=typeof t.accessToken=="function"?yield t.accessToken():yield t.accessToken;e.Authorization="Bearer "+r}})};nr.setOAuthToObject=function(e,t,r,n){return Df(this,void 0,void 0,function*(){if(n&&n.accessToken){const u=typeof n.accessToken=="function"?yield n.accessToken(t,r):yield n.accessToken;e.Authorization="Bearer "+u}})};function $l(e,t,r=""){t!=null&&(typeof t=="object"?Array.isArray(t)?t.forEach(n=>$l(e,n,r)):Object.keys(t).forEach(n=>$l(e,t[n],`${r}${r!==""?".":""}${n}`)):e.has(r)?e.append(r,t):e.set(r,t))}nr.setSearchParams=function(e,...t){const r=new URLSearchParams(e.search);$l(r,t),e.search=r.toString()};nr.serializeDataIfNeeded=function(e,t,r){const n=typeof e!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(t.headers["Content-Type"]):n)?JSON.stringify(e!==void 0?e:{}):e||""};nr.toPathString=function(e){return e.pathname+e.search+e.hash};nr.createRequestFunction=function(e,t,r,n){return(u=t,a=r)=>{const l=Object.assign(Object.assign({},e.options),{url:((n==null?void 0:n.basePath)||a)+e.url});return u.request(l)}};(function(e){var t=cr&&cr.__awaiter||function(l,o,c,p){function f(h){return h instanceof c?h:new c(function(d){d(h)})}return new(c||(c=Promise))(function(h,d){function m(_){try{g(p.next(_))}catch(b){d(b)}}function y(_){try{g(p.throw(_))}catch(b){d(b)}}function g(_){_.done?h(_.value):f(_.value).then(m,y)}g((p=p.apply(l,o||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.OpenAIApi=e.OpenAIApiFactory=e.OpenAIApiFp=e.OpenAIApiAxiosParamCreator=e.CreateImageRequestResponseFormatEnum=e.CreateImageRequestSizeEnum=e.ChatCompletionResponseMessageRoleEnum=e.ChatCompletionRequestMessageRoleEnum=void 0;const r=ms,n=nr,u=_f;e.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},e.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},e.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},e.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},e.OpenAIApiAxiosParamCreator=function(l){return{cancelFineTune:(o,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("cancelFineTune","fineTuneId",o);const p="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let h;l&&(h=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),m={},y={};n.setSearchParams(f,y);let g=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),{url:n.toPathString(f),options:d}}),createAnswer:(o,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createAnswer","createAnswerRequest",o);const p="/answers",f=new URL(p,n.DUMMY_BASE_URL);let h;l&&(h=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createChatCompletion:(o,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createChatCompletion","createChatCompletionRequest",o);const p="/chat/completions",f=new URL(p,n.DUMMY_BASE_URL);let h;l&&(h=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createClassification:(o,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createClassification","createClassificationRequest",o);const p="/classifications",f=new URL(p,n.DUMMY_BASE_URL);let h;l&&(h=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createCompletion:(o,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createCompletion","createCompletionRequest",o);const p="/completions",f=new URL(p,n.DUMMY_BASE_URL);let h;l&&(h=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createEdit:(o,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createEdit","createEditRequest",o);const p="/edits",f=new URL(p,n.DUMMY_BASE_URL);let h;l&&(h=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createEmbedding:(o,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createEmbedding","createEmbeddingRequest",o);const p="/embeddings",f=new URL(p,n.DUMMY_BASE_URL);let h;l&&(h=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createFile:(o,c,p={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createFile","file",o),n.assertParamExists("createFile","purpose",c);const f="/files",h=new URL(f,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const m=Object.assign(Object.assign({method:"POST"},d),p),y={},g={},_=new(l&&l.formDataCtor||FormData);o!==void 0&&_.append("file",o),c!==void 0&&_.append("purpose",c),y["Content-Type"]="multipart/form-data",n.setSearchParams(h,g);let b=d&&d.headers?d.headers:{};return m.headers=Object.assign(Object.assign(Object.assign(Object.assign({},y),_.getHeaders()),b),p.headers),m.data=_,{url:n.toPathString(h),options:m}}),createFineTune:(o,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createFineTune","createFineTuneRequest",o);const p="/fine-tunes",f=new URL(p,n.DUMMY_BASE_URL);let h;l&&(h=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createImage:(o,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createImage","createImageRequest",o);const p="/images/generations",f=new URL(p,n.DUMMY_BASE_URL);let h;l&&(h=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createImageEdit:(o,c,p,f,h,d,m,y={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createImageEdit","image",o),n.assertParamExists("createImageEdit","prompt",c);const g="/images/edits",_=new URL(g,n.DUMMY_BASE_URL);let b;l&&(b=l.baseOptions);const C=Object.assign(Object.assign({method:"POST"},b),y),w={},B={},F=new(l&&l.formDataCtor||FormData);o!==void 0&&F.append("image",o),p!==void 0&&F.append("mask",p),c!==void 0&&F.append("prompt",c),f!==void 0&&F.append("n",f),h!==void 0&&F.append("size",h),d!==void 0&&F.append("response_format",d),m!==void 0&&F.append("user",m),w["Content-Type"]="multipart/form-data",n.setSearchParams(_,B);let O=b&&b.headers?b.headers:{};return C.headers=Object.assign(Object.assign(Object.assign(Object.assign({},w),F.getHeaders()),O),y.headers),C.data=F,{url:n.toPathString(_),options:C}}),createImageVariation:(o,c,p,f,h,d={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createImageVariation","image",o);const m="/images/variations",y=new URL(m,n.DUMMY_BASE_URL);let g;l&&(g=l.baseOptions);const _=Object.assign(Object.assign({method:"POST"},g),d),b={},C={},w=new(l&&l.formDataCtor||FormData);o!==void 0&&w.append("image",o),c!==void 0&&w.append("n",c),p!==void 0&&w.append("size",p),f!==void 0&&w.append("response_format",f),h!==void 0&&w.append("user",h),b["Content-Type"]="multipart/form-data",n.setSearchParams(y,C);let B=g&&g.headers?g.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),w.getHeaders()),B),d.headers),_.data=w,{url:n.toPathString(y),options:_}}),createModeration:(o,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createModeration","createModerationRequest",o);const p="/moderations",f=new URL(p,n.DUMMY_BASE_URL);let h;l&&(h=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createSearch:(o,c,p={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createSearch","engineId",o),n.assertParamExists("createSearch","createSearchRequest",c);const f="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(o))),h=new URL(f,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const m=Object.assign(Object.assign({method:"POST"},d),p),y={},g={};y["Content-Type"]="application/json",n.setSearchParams(h,g);let _=d&&d.headers?d.headers:{};return m.headers=Object.assign(Object.assign(Object.assign({},y),_),p.headers),m.data=n.serializeDataIfNeeded(c,m,l),{url:n.toPathString(h),options:m}}),createTranscription:(o,c,p,f,h,d,m={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createTranscription","file",o),n.assertParamExists("createTranscription","model",c);const y="/audio/transcriptions",g=new URL(y,n.DUMMY_BASE_URL);let _;l&&(_=l.baseOptions);const b=Object.assign(Object.assign({method:"POST"},_),m),C={},w={},B=new(l&&l.formDataCtor||FormData);o!==void 0&&B.append("file",o),c!==void 0&&B.append("model",c),p!==void 0&&B.append("prompt",p),f!==void 0&&B.append("response_format",f),h!==void 0&&B.append("temperature",h),d!==void 0&&B.append("language",d),C["Content-Type"]="multipart/form-data",n.setSearchParams(g,w);let F=_&&_.headers?_.headers:{};return b.headers=Object.assign(Object.assign(Object.assign(Object.assign({},C),B.getHeaders()),F),m.headers),b.data=B,{url:n.toPathString(g),options:b}}),createTranslation:(o,c,p,f,h,d={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createTranslation","file",o),n.assertParamExists("createTranslation","model",c);const m="/audio/translations",y=new URL(m,n.DUMMY_BASE_URL);let g;l&&(g=l.baseOptions);const _=Object.assign(Object.assign({method:"POST"},g),d),b={},C={},w=new(l&&l.formDataCtor||FormData);o!==void 0&&w.append("file",o),c!==void 0&&w.append("model",c),p!==void 0&&w.append("prompt",p),f!==void 0&&w.append("response_format",f),h!==void 0&&w.append("temperature",h),b["Content-Type"]="multipart/form-data",n.setSearchParams(y,C);let B=g&&g.headers?g.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),w.getHeaders()),B),d.headers),_.data=w,{url:n.toPathString(y),options:_}}),deleteFile:(o,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("deleteFile","fileId",o);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let h;l&&(h=l.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},h),c),m={},y={};n.setSearchParams(f,y);let g=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),{url:n.toPathString(f),options:d}}),deleteModel:(o,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("deleteModel","model",o);const p="/models/{model}".replace("{model}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let h;l&&(h=l.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},h),c),m={},y={};n.setSearchParams(f,y);let g=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),{url:n.toPathString(f),options:d}}),downloadFile:(o,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("downloadFile","fileId",o);const p="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let h;l&&(h=l.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),c),m={},y={};n.setSearchParams(f,y);let g=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),{url:n.toPathString(f),options:d}}),listEngines:(o={})=>t(this,void 0,void 0,function*(){const c="/engines",p=new URL(c,n.DUMMY_BASE_URL);let f;l&&(f=l.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),o),d={},m={};n.setSearchParams(p,m);let y=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),y),o.headers),{url:n.toPathString(p),options:h}}),listFiles:(o={})=>t(this,void 0,void 0,function*(){const c="/files",p=new URL(c,n.DUMMY_BASE_URL);let f;l&&(f=l.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),o),d={},m={};n.setSearchParams(p,m);let y=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),y),o.headers),{url:n.toPathString(p),options:h}}),listFineTuneEvents:(o,c,p={})=>t(this,void 0,void 0,function*(){n.assertParamExists("listFineTuneEvents","fineTuneId",o);const f="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(o))),h=new URL(f,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const m=Object.assign(Object.assign({method:"GET"},d),p),y={},g={};c!==void 0&&(g.stream=c),n.setSearchParams(h,g);let _=d&&d.headers?d.headers:{};return m.headers=Object.assign(Object.assign(Object.assign({},y),_),p.headers),{url:n.toPathString(h),options:m}}),listFineTunes:(o={})=>t(this,void 0,void 0,function*(){const c="/fine-tunes",p=new URL(c,n.DUMMY_BASE_URL);let f;l&&(f=l.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),o),d={},m={};n.setSearchParams(p,m);let y=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),y),o.headers),{url:n.toPathString(p),options:h}}),listModels:(o={})=>t(this,void 0,void 0,function*(){const c="/models",p=new URL(c,n.DUMMY_BASE_URL);let f;l&&(f=l.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),o),d={},m={};n.setSearchParams(p,m);let y=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),y),o.headers),{url:n.toPathString(p),options:h}}),retrieveEngine:(o,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("retrieveEngine","engineId",o);const p="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let h;l&&(h=l.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),c),m={},y={};n.setSearchParams(f,y);let g=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),{url:n.toPathString(f),options:d}}),retrieveFile:(o,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("retrieveFile","fileId",o);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let h;l&&(h=l.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),c),m={},y={};n.setSearchParams(f,y);let g=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),{url:n.toPathString(f),options:d}}),retrieveFineTune:(o,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("retrieveFineTune","fineTuneId",o);const p="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let h;l&&(h=l.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),c),m={},y={};n.setSearchParams(f,y);let g=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),{url:n.toPathString(f),options:d}}),retrieveModel:(o,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("retrieveModel","model",o);const p="/models/{model}".replace("{model}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let h;l&&(h=l.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),c),m={},y={};n.setSearchParams(f,y);let g=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),c.headers),{url:n.toPathString(f),options:d}})}},e.OpenAIApiFp=function(l){const o=e.OpenAIApiAxiosParamCreator(l);return{cancelFineTune(c,p){return t(this,void 0,void 0,function*(){const f=yield o.cancelFineTune(c,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createAnswer(c,p){return t(this,void 0,void 0,function*(){const f=yield o.createAnswer(c,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createChatCompletion(c,p){return t(this,void 0,void 0,function*(){const f=yield o.createChatCompletion(c,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createClassification(c,p){return t(this,void 0,void 0,function*(){const f=yield o.createClassification(c,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createCompletion(c,p){return t(this,void 0,void 0,function*(){const f=yield o.createCompletion(c,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createEdit(c,p){return t(this,void 0,void 0,function*(){const f=yield o.createEdit(c,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createEmbedding(c,p){return t(this,void 0,void 0,function*(){const f=yield o.createEmbedding(c,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createFile(c,p,f){return t(this,void 0,void 0,function*(){const h=yield o.createFile(c,p,f);return n.createRequestFunction(h,r.default,u.BASE_PATH,l)})},createFineTune(c,p){return t(this,void 0,void 0,function*(){const f=yield o.createFineTune(c,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createImage(c,p){return t(this,void 0,void 0,function*(){const f=yield o.createImage(c,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createImageEdit(c,p,f,h,d,m,y,g){return t(this,void 0,void 0,function*(){const _=yield o.createImageEdit(c,p,f,h,d,m,y,g);return n.createRequestFunction(_,r.default,u.BASE_PATH,l)})},createImageVariation(c,p,f,h,d,m){return t(this,void 0,void 0,function*(){const y=yield o.createImageVariation(c,p,f,h,d,m);return n.createRequestFunction(y,r.default,u.BASE_PATH,l)})},createModeration(c,p){return t(this,void 0,void 0,function*(){const f=yield o.createModeration(c,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createSearch(c,p,f){return t(this,void 0,void 0,function*(){const h=yield o.createSearch(c,p,f);return n.createRequestFunction(h,r.default,u.BASE_PATH,l)})},createTranscription(c,p,f,h,d,m,y){return t(this,void 0,void 0,function*(){const g=yield o.createTranscription(c,p,f,h,d,m,y);return n.createRequestFunction(g,r.default,u.BASE_PATH,l)})},createTranslation(c,p,f,h,d,m){return t(this,void 0,void 0,function*(){const y=yield o.createTranslation(c,p,f,h,d,m);return n.createRequestFunction(y,r.default,u.BASE_PATH,l)})},deleteFile(c,p){return t(this,void 0,void 0,function*(){const f=yield o.deleteFile(c,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},deleteModel(c,p){return t(this,void 0,void 0,function*(){const f=yield o.deleteModel(c,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},downloadFile(c,p){return t(this,void 0,void 0,function*(){const f=yield o.downloadFile(c,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},listEngines(c){return t(this,void 0,void 0,function*(){const p=yield o.listEngines(c);return n.createRequestFunction(p,r.default,u.BASE_PATH,l)})},listFiles(c){return t(this,void 0,void 0,function*(){const p=yield o.listFiles(c);return n.createRequestFunction(p,r.default,u.BASE_PATH,l)})},listFineTuneEvents(c,p,f){return t(this,void 0,void 0,function*(){const h=yield o.listFineTuneEvents(c,p,f);return n.createRequestFunction(h,r.default,u.BASE_PATH,l)})},listFineTunes(c){return t(this,void 0,void 0,function*(){const p=yield o.listFineTunes(c);return n.createRequestFunction(p,r.default,u.BASE_PATH,l)})},listModels(c){return t(this,void 0,void 0,function*(){const p=yield o.listModels(c);return n.createRequestFunction(p,r.default,u.BASE_PATH,l)})},retrieveEngine(c,p){return t(this,void 0,void 0,function*(){const f=yield o.retrieveEngine(c,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},retrieveFile(c,p){return t(this,void 0,void 0,function*(){const f=yield o.retrieveFile(c,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},retrieveFineTune(c,p){return t(this,void 0,void 0,function*(){const f=yield o.retrieveFineTune(c,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},retrieveModel(c,p){return t(this,void 0,void 0,function*(){const f=yield o.retrieveModel(c,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})}}},e.OpenAIApiFactory=function(l,o,c){const p=e.OpenAIApiFp(l);return{cancelFineTune(f,h){return p.cancelFineTune(f,h).then(d=>d(c,o))},createAnswer(f,h){return p.createAnswer(f,h).then(d=>d(c,o))},createChatCompletion(f,h){return p.createChatCompletion(f,h).then(d=>d(c,o))},createClassification(f,h){return p.createClassification(f,h).then(d=>d(c,o))},createCompletion(f,h){return p.createCompletion(f,h).then(d=>d(c,o))},createEdit(f,h){return p.createEdit(f,h).then(d=>d(c,o))},createEmbedding(f,h){return p.createEmbedding(f,h).then(d=>d(c,o))},createFile(f,h,d){return p.createFile(f,h,d).then(m=>m(c,o))},createFineTune(f,h){return p.createFineTune(f,h).then(d=>d(c,o))},createImage(f,h){return p.createImage(f,h).then(d=>d(c,o))},createImageEdit(f,h,d,m,y,g,_,b){return p.createImageEdit(f,h,d,m,y,g,_,b).then(C=>C(c,o))},createImageVariation(f,h,d,m,y,g){return p.createImageVariation(f,h,d,m,y,g).then(_=>_(c,o))},createModeration(f,h){return p.createModeration(f,h).then(d=>d(c,o))},createSearch(f,h,d){return p.createSearch(f,h,d).then(m=>m(c,o))},createTranscription(f,h,d,m,y,g,_){return p.createTranscription(f,h,d,m,y,g,_).then(b=>b(c,o))},createTranslation(f,h,d,m,y,g){return p.createTranslation(f,h,d,m,y,g).then(_=>_(c,o))},deleteFile(f,h){return p.deleteFile(f,h).then(d=>d(c,o))},deleteModel(f,h){return p.deleteModel(f,h).then(d=>d(c,o))},downloadFile(f,h){return p.downloadFile(f,h).then(d=>d(c,o))},listEngines(f){return p.listEngines(f).then(h=>h(c,o))},listFiles(f){return p.listFiles(f).then(h=>h(c,o))},listFineTuneEvents(f,h,d){return p.listFineTuneEvents(f,h,d).then(m=>m(c,o))},listFineTunes(f){return p.listFineTunes(f).then(h=>h(c,o))},listModels(f){return p.listModels(f).then(h=>h(c,o))},retrieveEngine(f,h){return p.retrieveEngine(f,h).then(d=>d(c,o))},retrieveFile(f,h){return p.retrieveFile(f,h).then(d=>d(c,o))},retrieveFineTune(f,h){return p.retrieveFineTune(f,h).then(d=>d(c,o))},retrieveModel(f,h){return p.retrieveModel(f,h).then(d=>d(c,o))}}};class a extends u.BaseAPI{cancelFineTune(o,c){return e.OpenAIApiFp(this.configuration).cancelFineTune(o,c).then(p=>p(this.axios,this.basePath))}createAnswer(o,c){return e.OpenAIApiFp(this.configuration).createAnswer(o,c).then(p=>p(this.axios,this.basePath))}createChatCompletion(o,c){return e.OpenAIApiFp(this.configuration).createChatCompletion(o,c).then(p=>p(this.axios,this.basePath))}createClassification(o,c){return e.OpenAIApiFp(this.configuration).createClassification(o,c).then(p=>p(this.axios,this.basePath))}createCompletion(o,c){return e.OpenAIApiFp(this.configuration).createCompletion(o,c).then(p=>p(this.axios,this.basePath))}createEdit(o,c){return e.OpenAIApiFp(this.configuration).createEdit(o,c).then(p=>p(this.axios,this.basePath))}createEmbedding(o,c){return e.OpenAIApiFp(this.configuration).createEmbedding(o,c).then(p=>p(this.axios,this.basePath))}createFile(o,c,p){return e.OpenAIApiFp(this.configuration).createFile(o,c,p).then(f=>f(this.axios,this.basePath))}createFineTune(o,c){return e.OpenAIApiFp(this.configuration).createFineTune(o,c).then(p=>p(this.axios,this.basePath))}createImage(o,c){return e.OpenAIApiFp(this.configuration).createImage(o,c).then(p=>p(this.axios,this.basePath))}createImageEdit(o,c,p,f,h,d,m,y){return e.OpenAIApiFp(this.configuration).createImageEdit(o,c,p,f,h,d,m,y).then(g=>g(this.axios,this.basePath))}createImageVariation(o,c,p,f,h,d){return e.OpenAIApiFp(this.configuration).createImageVariation(o,c,p,f,h,d).then(m=>m(this.axios,this.basePath))}createModeration(o,c){return e.OpenAIApiFp(this.configuration).createModeration(o,c).then(p=>p(this.axios,this.basePath))}createSearch(o,c,p){return e.OpenAIApiFp(this.configuration).createSearch(o,c,p).then(f=>f(this.axios,this.basePath))}createTranscription(o,c,p,f,h,d,m){return e.OpenAIApiFp(this.configuration).createTranscription(o,c,p,f,h,d,m).then(y=>y(this.axios,this.basePath))}createTranslation(o,c,p,f,h,d){return e.OpenAIApiFp(this.configuration).createTranslation(o,c,p,f,h,d).then(m=>m(this.axios,this.basePath))}deleteFile(o,c){return e.OpenAIApiFp(this.configuration).deleteFile(o,c).then(p=>p(this.axios,this.basePath))}deleteModel(o,c){return e.OpenAIApiFp(this.configuration).deleteModel(o,c).then(p=>p(this.axios,this.basePath))}downloadFile(o,c){return e.OpenAIApiFp(this.configuration).downloadFile(o,c).then(p=>p(this.axios,this.basePath))}listEngines(o){return e.OpenAIApiFp(this.configuration).listEngines(o).then(c=>c(this.axios,this.basePath))}listFiles(o){return e.OpenAIApiFp(this.configuration).listFiles(o).then(c=>c(this.axios,this.basePath))}listFineTuneEvents(o,c,p){return e.OpenAIApiFp(this.configuration).listFineTuneEvents(o,c,p).then(f=>f(this.axios,this.basePath))}listFineTunes(o){return e.OpenAIApiFp(this.configuration).listFineTunes(o).then(c=>c(this.axios,this.basePath))}listModels(o){return e.OpenAIApiFp(this.configuration).listModels(o).then(c=>c(this.axios,this.basePath))}retrieveEngine(o,c){return e.OpenAIApiFp(this.configuration).retrieveEngine(o,c).then(p=>p(this.axios,this.basePath))}retrieveFile(o,c){return e.OpenAIApiFp(this.configuration).retrieveFile(o,c).then(p=>p(this.axios,this.basePath))}retrieveFineTune(o,c){return e.OpenAIApiFp(this.configuration).retrieveFineTune(o,c).then(p=>p(this.axios,this.basePath))}retrieveModel(o,c){return e.OpenAIApiFp(this.configuration).retrieveModel(o,c).then(p=>p(this.axios,this.basePath))}}e.OpenAIApi=a})(Cp);var Ws={};const EF="openai",CF="3.2.1",FF="Node.js library for the OpenAI API",SF={type:"git",url:"git@github.com:openai/openai-node.git"},BF=["openai","open","ai","gpt-3","gpt3"],OF="OpenAI",MF="MIT",PF="./dist/index.js",xF="./dist/index.d.ts",TF={build:"tsc --outDir dist/"},IF={axios:"^0.26.0","form-data":"^4.0.0"},NF={"@types/node":"^12.11.5",typescript:"^3.6.4"},kF={name:EF,version:CF,description:FF,repository:SF,keywords:BF,author:OF,license:MF,main:PF,types:xF,scripts:TF,dependencies:IF,devDependencies:NF};var El,X0;function RF(){return X0||(X0=1,El=typeof self=="object"?self.FormData:window.FormData),El}Object.defineProperty(Ws,"__esModule",{value:!0});Ws.Configuration=void 0;const LF=kF;class UF{constructor(t={}){this.apiKey=t.apiKey,this.organization=t.organization,this.username=t.username,this.password=t.password,this.accessToken=t.accessToken,this.basePath=t.basePath,this.baseOptions=t.baseOptions,this.formDataCtor=t.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${LF.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=RF())}isJsonMime(t){const r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return t!==null&&(r.test(t)||t.toLowerCase()==="application/json-patch+json")}}Ws.Configuration=UF;(function(e){var t=cr&&cr.__createBinding||(Object.create?function(n,u,a,l){l===void 0&&(l=a),Object.defineProperty(n,l,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,l){l===void 0&&(l=a),n[l]=u[a]}),r=cr&&cr.__exportStar||function(n,u){for(var a in n)a!=="default"&&!u.hasOwnProperty(a)&&t(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Cp,e),r(Ws,e)})(Kl);function bf(e){const t=new Kl.Configuration({apiKey:e});return new Kl.OpenAIApi(t)}async function VF(e,t,r="text-davinci-003"){return await e.createCompletion({model:r,prompt:t,temperature:.8,max_tokens:250})}async function jF(e,t,r="gpt-3.5-turbo"){return await e.createChatCompletion({model:r,messages:[{role:"user",content:t}],temperature:.8,max_tokens:250})}async function qF(e,t,r="text-embedding-ada-002"){return await e.createEmbedding({model:r,input:t})}async function zF(e){return await e.listModels()}const Cl="preferredEmbeddingModelStore";function WF(){const e=xn(""),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&localStorage[Cl]||""),{subscribe:t,update:a=>{!a||!u||(localStorage[Cl]=a,r(a))},get:()=>Wt(e),delete:()=>{u&&(delete localStorage[Cl],r(""))}}}const Xl=WF(),Vp=Pn(Xl,e=>Wt(Xl)),Fl="oKeyStore";function HF(){const e=xn(""),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&localStorage[Fl]||""),{subscribe:t,update:a=>{!a||!u||(localStorage[Fl]=a,r(a))},get:()=>Wt(e),delete:()=>{u&&(delete localStorage[Fl],r(""))}}}const Ds=HF(),yf=Pn(Ds,e=>Wt(Ds));function GF(e){let t,r,n,u={ctx:e,current:null,token:null,hasCatch:!0,pending:$F,then:ZF,catch:YF,value:25,error:26,blocks:[,,,]};return wi(r=e[6],u),{c(){t=Zt(),u.block.c()},l(a){t=Zt(),u.block.l(a)},m(a,l){Ce(a,t,l),u.block.m(a,u.anchor=l),u.mount=()=>t.parentNode,u.anchor=t,n=!0},p(a,l){e=a,u.ctx=e,l&64&&r!==(r=e[6])&&wi(r,u)||Ss(u,e,l)},i(a){n||(xe(u.block),n=!0)},o(a){for(let l=0;l<3;l+=1){const o=u.blocks[l];Le(o)}n=!1},d(a){a&&V(t),u.block.d(a),u.token=null,u=null}}}function KF(e){let t,r,n,u,a;return{c(){t=se("div"),r=se("div"),n=se("div"),u=se("p"),a=$e("Set OpenAI key in settings to use embedding map."),this.h()},l(l){t=oe(l,"DIV",{class:!0});var o=ie(t);r=oe(o,"DIV",{class:!0});var c=ie(r);n=oe(c,"DIV",{class:!0});var p=ie(n);u=oe(p,"P",{class:!0});var f=ie(u);a=Xe(f,"Set OpenAI key in settings to use embedding map."),f.forEach(V),p.forEach(V),c.forEach(V),o.forEach(V),this.h()},h(){x(u,"class","text-center text-lg"),x(n,"class","h-20 w-52"),x(r,"class","flex flex-col justify-center"),x(t,"class","w-full h-full flex justify-center")},m(l,o){Ce(l,t,o),K(t,r),K(r,n),K(n,u),K(u,a)},p:Te,i:Te,o:Te,d(l){l&&V(t)}}}function YF(e){let t,r=e[26].message+"",n;return{c(){t=se("p"),n=$e(r),this.h()},l(u){t=oe(u,"P",{style:!0});var a=ie(t);n=Xe(a,r),a.forEach(V),this.h()},h(){Qt(t,"color","red")},m(u,a){Ce(u,t,a),K(t,n)},p(u,a){a&64&&r!==(r=u[26].message+"")&&Mn(n,r)},i:Te,o:Te,d(u){u&&V(t)}}}function ZF(e){let t,r,n,u,a,l,o,c,p,f,h,d,m,y,g,_,b,C,w,B,F,O,P,I,N,H,W,q,J,Y,R,z,re,Q,te,ve,me,Fe,Ae,Ie,Ue,Ve,tt,We,Me,qe,at,mt,et,He,yt,Et,At,we;r=new CC({props:{dimensions:e[3],center:e[8]}});let be=e[4].embedExponentialScaling&&J0(e);return{c(){t=se("div"),ht(r.$$.fragment),u=Ke(),a=se("div"),l=se("div"),o=se("label"),c=se("span"),p=$e("Exponential Scaling"),f=Ke(),h=se("input"),m=Ke(),be&&be.c(),y=Ke(),g=se("div"),_=se("label"),b=se("span"),C=$e("# Prompts"),w=Ke(),B=se("input"),F=Ke(),O=se("div"),P=se("div"),I=se("label"),N=se("span"),H=$e("Clusters"),W=Ke(),q=se("div"),J=se("button"),Y=$e("0"),z=Ke(),re=se("button"),Q=$e("2"),ve=Ke(),me=se("button"),Fe=$e("4"),Ie=Ke(),Ue=se("button"),Ve=$e("6"),We=Ke(),Me=se("button"),qe=$e("8"),mt=Ke(),et=se("div"),He=se("button"),yt=$e("Shuffle"),this.h()},l(ke){t=oe(ke,"DIV",{class:!0});var it=ie(t);dt(r.$$.fragment,it),it.forEach(V),u=Ye(ke),a=oe(ke,"DIV",{class:!0});var _t=ie(a);l=oe(_t,"DIV",{class:!0});var L=ie(l);o=oe(L,"LABEL",{class:!0});var j=ie(o);c=oe(j,"SPAN",{class:!0});var Z=ie(c);p=Xe(Z,"Exponential Scaling"),Z.forEach(V),j.forEach(V),f=Ye(L),h=oe(L,"INPUT",{type:!0,class:!0}),L.forEach(V),m=Ye(_t),be&&be.l(_t),y=Ye(_t),g=oe(_t,"DIV",{class:!0});var le=ie(g);_=oe(le,"LABEL",{class:!0});var ne=ie(_);b=oe(ne,"SPAN",{class:!0});var de=ie(b);C=Xe(de,"# Prompts"),de.forEach(V),ne.forEach(V),w=Ye(le),B=oe(le,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),le.forEach(V),F=Ye(_t),O=oe(_t,"DIV",{class:!0});var ue=ie(O);P=oe(ue,"DIV",{class:!0});var fe=ie(P);I=oe(fe,"LABEL",{class:!0});var ye=ie(I);N=oe(ye,"SPAN",{class:!0});var Oe=ie(N);H=Xe(Oe,"Clusters"),Oe.forEach(V),ye.forEach(V),W=Ye(fe),q=oe(fe,"DIV",{class:!0});var je=ie(q);J=oe(je,"BUTTON",{class:!0});var Ee=ie(J);Y=Xe(Ee,"0"),Ee.forEach(V),z=Ye(je),re=oe(je,"BUTTON",{class:!0});var Vt=ie(re);Q=Xe(Vt,"2"),Vt.forEach(V),ve=Ye(je),me=oe(je,"BUTTON",{class:!0});var Bt=ie(me);Fe=Xe(Bt,"4"),Bt.forEach(V),Ie=Ye(je),Ue=oe(je,"BUTTON",{class:!0});var Ht=ie(Ue);Ve=Xe(Ht,"6"),Ht.forEach(V),We=Ye(je),Me=oe(je,"BUTTON",{class:!0});var jt=ie(Me);qe=Xe(jt,"8"),jt.forEach(V),je.forEach(V),fe.forEach(V),ue.forEach(V),mt=Ye(_t),et=oe(_t,"DIV",{class:!0});var ir=ie(et);He=oe(ir,"BUTTON",{class:!0});var qt=ie(He);yt=Xe(qt,"Shuffle"),qt.forEach(V),ir.forEach(V),_t.forEach(V),this.h()},h(){x(t,"class","w-full h-full"),Cs(()=>e[15].call(t)),x(c,"class","label-text"),x(o,"class","label"),x(h,"type","checkbox"),x(h,"class","toggle toggle-sm"),h.checked=d=e[4].embedExponentialScaling,x(l,"class","min-w-max px-2"),x(b,"class","label-text"),x(_,"class","label"),B.value=e[9],x(B,"type","range"),x(B,"min","1"),x(B,"max",e[2]),x(B,"step","1"),x(B,"class","range range-sm"),x(g,"class","w-full px-2"),x(N,"class","label-text"),x(I,"class","label pb-1 m-0"),x(J,"class",R=(e[4].embedClusters||0)===0?"btn btn-xs btn-active":"btn btn-xs"),x(re,"class",te=e[4].embedClusters===2?"btn btn-xs btn-active":"btn btn-xs"),x(me,"class",Ae=e[4].embedClusters===4?"btn btn-xs btn-active":"btn btn-xs"),x(Ue,"class",tt=e[4].embedClusters===6?"btn btn-xs btn-active":"btn btn-xs"),x(Me,"class",at=e[4].embedClusters===8?"btn btn-xs btn-active":"btn btn-xs"),x(q,"class","btn-group btn-group-horizontal p-0"),x(P,"class",""),x(O,"class",""),x(He,"class","btn btn-xs btn-primary"),x(et,"class","w-32 px-2 pb-1 flex flex-col justify-end"),x(a,"class","px-2 py-4 pb-0 flex")},m(ke,it){Ce(ke,t,it),pt(r,t,null),n=Fs(t,e[15].bind(t)),Ce(ke,u,it),Ce(ke,a,it),K(a,l),K(l,o),K(o,c),K(c,p),K(l,f),K(l,h),K(a,m),be&&be.m(a,null),K(a,y),K(a,g),K(g,_),K(_,b),K(b,C),K(g,w),K(g,B),K(a,F),K(a,O),K(O,P),K(P,I),K(I,N),K(N,H),K(P,W),K(P,q),K(q,J),K(J,Y),K(q,z),K(q,re),K(re,Q),K(q,ve),K(q,me),K(me,Fe),K(q,Ie),K(q,Ue),K(Ue,Ve),K(q,We),K(q,Me),K(Me,qe),K(a,mt),K(a,et),K(et,He),K(He,yt),Et=!0,At||(we=[Ne(h,"change",e[11]),Ne(B,"change",e[10]),Ne(J,"click",e[16]),Ne(re,"click",e[17]),Ne(me,"click",e[18]),Ne(Ue,"click",e[19]),Ne(Me,"click",e[20]),Ne(He,"click",e[14])],At=!0)},p(ke,it){const _t={};it&8&&(_t.dimensions=ke[3]),it&256&&(_t.center=ke[8]),r.$set(_t),(!Et||it&16&&d!==(d=ke[4].embedExponentialScaling))&&(h.checked=d),ke[4].embedExponentialScaling?be?be.p(ke,it):(be=J0(ke),be.c(),be.m(a,y)):be&&(be.d(1),be=null),(!Et||it&512)&&(B.value=ke[9]),(!Et||it&4)&&x(B,"max",ke[2]),(!Et||it&16&&R!==(R=(ke[4].embedClusters||0)===0?"btn btn-xs btn-active":"btn btn-xs"))&&x(J,"class",R),(!Et||it&16&&te!==(te=ke[4].embedClusters===2?"btn btn-xs btn-active":"btn btn-xs"))&&x(re,"class",te),(!Et||it&16&&Ae!==(Ae=ke[4].embedClusters===4?"btn btn-xs btn-active":"btn btn-xs"))&&x(me,"class",Ae),(!Et||it&16&&tt!==(tt=ke[4].embedClusters===6?"btn btn-xs btn-active":"btn btn-xs"))&&x(Ue,"class",tt),(!Et||it&16&&at!==(at=ke[4].embedClusters===8?"btn btn-xs btn-active":"btn btn-xs"))&&x(Me,"class",at)},i(ke){Et||(xe(r.$$.fragment,ke),Et=!0)},o(ke){Le(r.$$.fragment,ke),Et=!1},d(ke){ke&&V(t),vt(r),n(),ke&&V(u),ke&&V(a),be&&be.d(),At=!1,Lr(we)}}}function J0(e){let t,r,n,u,a,l,o,c,p;return{c(){t=se("div"),r=se("label"),n=se("span"),u=$e("Scaling Power"),a=Ke(),l=se("input"),this.h()},l(f){t=oe(f,"DIV",{class:!0});var h=ie(t);r=oe(h,"LABEL",{class:!0});var d=ie(r);n=oe(d,"SPAN",{class:!0});var m=ie(n);u=Xe(m,"Scaling Power"),m.forEach(V),d.forEach(V),a=Ye(h),l=oe(h,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),h.forEach(V),this.h()},h(){x(n,"class","label-text"),x(r,"class","label"),l.value=o=e[4].embedWeightScaling,x(l,"type","range"),x(l,"min","0.5"),x(l,"max","3"),x(l,"step","0.1"),x(l,"class","range range-sm"),x(t,"class","w-full px-2")},m(f,h){Ce(f,t,h),K(t,r),K(r,n),K(n,u),K(t,a),K(t,l),c||(p=Ne(l,"change",e[12]),c=!0)},p(f,h){h&16&&o!==(o=f[4].embedWeightScaling)&&(l.value=o)},d(f){f&&V(t),c=!1,p()}}}function $F(e){let t,r,n,u,a,l;return{c(){t=se("div"),r=se("div"),n=se("div"),u=se("progress"),this.h()},l(o){t=oe(o,"DIV",{class:!0});var c=ie(t);r=oe(c,"DIV",{class:!0});var p=ie(r);n=oe(p,"DIV",{class:!0});var f=ie(n);u=oe(f,"PROGRESS",{class:!0,max:!0}),ie(u).forEach(V),f.forEach(V),p.forEach(V),c.forEach(V),this.h()},h(){x(u,"class","progress progress-primary w-56"),u.value=a=Object.keys(e[7]).length,x(u,"max",l=Object.keys(e[4].weightedPrompts).length),x(n,"class","h-20 w-52"),x(r,"class","flex flex-col justify-center"),x(t,"class","w-full h-full flex justify-center")},m(o,c){Ce(o,t,c),K(t,r),K(r,n),K(n,u)},p(o,c){c&128&&a!==(a=Object.keys(o[7]).length)&&(u.value=a),c&16&&l!==(l=Object.keys(o[4].weightedPrompts).length)&&x(u,"max",l)},i:Te,o:Te,d(o){o&&V(t)}}}function XF(e){let t,r,n,u;const a=[KF,GF],l=[];function o(c,p){return c[5]?1:0}return t=o(e),r=l[t]=a[t](e),{c(){r.c(),n=Zt()},l(c){r.l(c),n=Zt()},m(c,p){l[t].m(c,p),Ce(c,n,p),u=!0},p(c,[p]){let f=t;t=o(c),t===f?l[t].p(c,p):(mn(),Le(l[f],1,1,()=>{l[f]=null}),_n(),r=l[t],r?r.p(c,p):(r=l[t]=a[t](c),r.c()),xe(r,1),r.m(n.parentNode,n))},i(c){u||(xe(r),u=!0)},o(c){Le(r),u=!1},d(c){l[t].d(c),c&&V(n)}}}function Q0(e){return!e.embeddings||!e.embedClusterSets||Object.entries(e.embeddings).length!==Object.entries(e.weightedPrompts).length||(e.lastPromptChange||0)>(e.lastEmbeddingChange||0)}function JF(e,t,r){let n,u,a,l,o,c,p;Nt(e,bn,q=>r(4,o=q)),Nt(e,yf,q=>r(5,c=q)),Nt(e,Vp,q=>r(21,p=q));let f=0,h=0,d=null,m={};function y(q){q.target.value>0&&q.target.value<=n&&Mt.update({...o,embedPromptLimit:q.target.value})}function g(q){Mt.update({...o,embedExponentialScaling:!o.embedExponentialScaling})}function _(q){Mt.update({...o,embedWeightScaling:q.target.value})}function b(q){Mt.update({...o,embedClusters:q})}function C(q){let J=new cC({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:5e3,metric:"euclidean"});const Y=Object.keys(q),R=Object.values(q);J.init({data:R,type:"dense"}),J.run();let re=J.getOutputScaled().map(([te,ve])=>[(te+1)/2,(ve+1)/2]);return Y.reduce((te,ve,me)=>(te[ve]=re[me],te),{})}function w(q,J){return new Gl.KMEANS().run(q,J)}async function B(){Mt.update({...o,scaledEmbedMappings:C(o.embeddings)})}async function F(){if(!c||!o.weightedPrompts)return;const q=Object.entries(o.weightedPrompts).map(([R,z])=>[R,z.text]),J=bf(c);r(7,m={});for(let R of q){const z=await qF(J,R[1],p);r(7,m[R[0]]=z.data.data[0].embedding,m)}let Y=Object.entries(m).sort((R,z)=>R[0]-z[0]);Mt.update({...o,embeddings:m,embedClusterSets:{2:w(Y.map(R=>R[1]),2),4:w(Y.map(R=>R[1]),4),6:w(Y.map(R=>R[1]),6),8:w(Y.map(R=>R[1]),8)},lastEmbeddingChange:Date.now(),scaledEmbedMappings:C(m)})}Gb(()=>{c&&Q0(o)&&r(6,d=F())});function O(){f=this.clientWidth,h=this.clientHeight,r(0,f),r(1,h)}const P=()=>b(0),I=()=>b(2),N=()=>b(4),H=()=>b(6),W=()=>b(8);return e.$$.update=()=>{e.$$.dirty&16&&r(2,n=Object.keys(o.weightedPrompts||{}).length),e.$$.dirty&20&&r(9,u=o.embedPromptLimit||n),e.$$.dirty&3&&r(3,a=[f||250,h||250]),e.$$.dirty&8&&r(8,l=ks(a)),e.$$.dirty&48&&c&&Q0(o)&&r(6,d=F())},[f,h,n,a,o,c,d,m,l,u,y,g,_,b,B,O,P,I,N,H,W]}class QF extends Rt{constructor(t){super(),Lt(this,t,JF,XF,Ut,{})}}const Ha="zeroPromptHandlingStore";function e3(){const e=xn(!1),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&localStorage[Ha]?JSON.parse(localStorage[Ha]):!1),{subscribe:t,update:a=>{u&&(localStorage[Ha]=JSON.stringify(!!a),r(!!a))},get:()=>Wt(e),delete:()=>{u&&(delete localStorage[Ha],r(!1))}}}const Jl=e3(),jp=Pn(Jl,e=>Wt(Jl));function ed(e,t,r){const n=e.slice();return n[4]=t[r][0],n[5]=t[r][1],n}function td(e,t){let r,n=t[5].text+"",u,a,l,o=ui(t[0],t[4])+"",c,p,f;return{key:e,first:null,c(){r=se("span"),u=$e(n),a=$e("::"),l=se("b"),c=$e(o),p=Ke(),this.h()},l(h){r=oe(h,"SPAN",{style:!0});var d=ie(r);u=Xe(d,n),a=Xe(d,"::"),l=oe(d,"B",{});var m=ie(l);c=Xe(m,o),p=Ye(m),m.forEach(V),d.forEach(V),this.h()},h(){x(r,"style",f=`color: rgba(255,255,255,${Math.max(.25,t0(t[0],t[4]))});`),this.first=r},m(h,d){Ce(h,r,d),K(r,u),K(r,a),K(r,l),K(l,c),K(l,p)},p(h,d){t=h,d&3&&n!==(n=t[5].text+"")&&Mn(u,n),d&3&&o!==(o=ui(t[0],t[4])+"")&&Mn(c,o),d&3&&f!==(f=`color: rgba(255,255,255,${Math.max(.25,t0(t[0],t[4]))});`)&&x(r,"style",f)},d(h){h&&V(r)}}}function t3(e){let t,r,n=[],u=new Map,a,l,o=Object.entries(e[0].weightedPrompts).filter(e[3]);const c=p=>p[4];for(let p=0;p<o.length;p+=1){let f=ed(e,o,p),h=c(f);u.set(h,n[p]=td(h,f))}return{c(){t=se("div"),r=se("p");for(let p=0;p<n.length;p+=1)n[p].c();this.h()},l(p){t=oe(p,"DIV",{class:!0});var f=ie(t);r=oe(f,"P",{class:!0});var h=ie(r);for(let d=0;d<n.length;d+=1)n[d].l(h);h.forEach(V),f.forEach(V),this.h()},h(){x(r,"class","text-sm select-none"),x(t,"class","normal-case font-light text-left cursor-copy bg-slate-900 rounded-md p-4 w-full h-32 overflow-y-auto hover:bg-slate-800 active:bg-slate-950")},m(p,f){Ce(p,t,f),K(t,r);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(r,null);a||(l=Ne(t,"click",e[2]),a=!0)},p(p,[f]){f&3&&(o=Object.entries(p[0].weightedPrompts).filter(p[3]),n=Fi(n,f,c,1,p,o,u,r,mu,td,null,ed))},i:Te,o:Te,d(p){p&&V(t);for(let f=0;f<n.length;f+=1)n[f].d();a=!1,l()}}}function r3(e,t,r){let n,u;Nt(e,bn,o=>r(0,n=o)),Nt(e,jp,o=>r(1,u=o));function a(){const o=Object.entries(n.weightedPrompts).filter(c=>u||ui(n,c[0])).map(([c,p])=>`${p.text}::${ui(n,c)}`).join(" ");navigator.clipboard.writeText(o)}return[n,u,a,o=>u||ui(n,o[0])]}class n3 extends Rt{constructor(t){super(),Lt(this,t,r3,t3,Ut,{})}}function i3(e){let t,r,n,u;return{c(){t=Ft("svg"),r=Ft("rect"),n=Ft("rect"),u=Ft("rect"),this.h()},l(a){t=St(a,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var l=ie(t);r=St(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),ie(r).forEach(V),n=St(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),ie(n).forEach(V),u=St(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),ie(u).forEach(V),l.forEach(V),this.h()},h(){x(r,"x","5"),x(r,"y","12"),x(r,"width","40"),x(r,"height","4"),x(r,"fill","rgba(255,255,255, 0.7)"),x(n,"x","5"),x(n,"y","23"),x(n,"width","30"),x(n,"height","4"),x(n,"fill","rgba(255,255,255, 0.7)"),x(u,"x","5"),x(u,"y","34"),x(u,"width","35"),x(u,"height","4"),x(u,"fill","rgba(255,255,255, 0.7)"),x(t,"xmlns","http://www.w3.org/2000/svg"),x(t,"fill","rgba(255,255,255, 0.7)"),x(t,"class","h-6 w-6"),x(t,"viewBox","0 0 50 50")},m(a,l){Ce(a,t,l),K(t,r),K(t,n),K(t,u)},p:Te,i:Te,o:Te,d(a){a&&V(t)}}}class u3 extends Rt{constructor(t){super(),Lt(this,t,null,i3,Ut,{})}}function a3(e){let t,r,n;return{c(){t=Ft("svg"),r=Ft("circle"),n=Ft("circle"),this.h()},l(u){t=St(u,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var a=ie(t);r=St(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),ie(r).forEach(V),n=St(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),ie(n).forEach(V),a.forEach(V),this.h()},h(){x(r,"cx","25"),x(r,"cy","25"),x(r,"r","20"),x(r,"stroke","rgba(255,255,255, 0.7)"),x(r,"stroke-width","2"),x(r,"fill","none"),x(n,"cx","25"),x(n,"cy","25"),x(n,"r","2"),x(n,"stroke","rgba(255,255,255, 0.7)"),x(n,"stroke-width","1"),x(n,"fill","rgba(255,255,255, 0.7)"),x(t,"xmlns","http://www.w3.org/2000/svg"),x(t,"fill","rgba(255,255,255, 0.7)"),x(t,"class","h-6 w-6"),x(t,"viewBox","0 0 50 50")},m(u,a){Ce(u,t,a),K(t,r),K(t,n)},p:Te,i:Te,o:Te,d(u){u&&V(t)}}}class s3 extends Rt{constructor(t){super(),Lt(this,t,null,a3,Ut,{})}}function o3(e){let t,r,n,u,a,l;return{c(){t=Ft("svg"),r=Ft("circle"),n=Ft("circle"),u=Ft("circle"),a=Ft("circle"),l=Ft("circle"),this.h()},l(o){t=St(o,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var c=ie(t);r=St(c,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),ie(r).forEach(V),n=St(c,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),ie(n).forEach(V),u=St(c,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),ie(u).forEach(V),a=St(c,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),ie(a).forEach(V),l=St(c,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),ie(l).forEach(V),c.forEach(V),this.h()},h(){x(r,"cx","20"),x(r,"cy","80"),x(r,"r","5"),x(r,"fill","rgba(255,255,255, 0.7)"),x(n,"cx","40"),x(n,"cy","40"),x(n,"r","5"),x(n,"fill","rgba(255,255,255, 0.7)"),x(u,"cx","70"),x(u,"cy","20"),x(u,"r","5"),x(u,"fill","rgba(255,255,255, 0.7)"),x(a,"cx","80"),x(a,"cy","60"),x(a,"r","5"),x(a,"fill","rgba(255,255,255, 0.7)"),x(l,"cx","60"),x(l,"cy","75"),x(l,"r","5"),x(l,"fill","rgba(255,255,255, 0.7)"),x(t,"xmlns","http://www.w3.org/2000/svg"),x(t,"fill","rgba(255,255,255, 0.7)"),x(t,"class","h-6 w-6"),x(t,"viewBox","0 0 100 100")},m(o,c){Ce(o,t,c),K(t,r),K(t,n),K(t,u),K(t,a),K(t,l)},p:Te,i:Te,o:Te,d(o){o&&V(t)}}}class l3 extends Rt{constructor(t){super(),Lt(this,t,null,o3,Ut,{})}}function f3(e){let t,r,n,u;return{c(){t=Ft("svg"),r=Ft("path"),n=Ft("path"),u=Ft("path"),this.h()},l(a){t=St(a,"svg",{xmlns:!0,class:!0,viewBox:!0});var l=ie(t);r=St(l,"path",{d:!0,fill:!0}),ie(r).forEach(V),n=St(l,"path",{d:!0,fill:!0}),ie(n).forEach(V),u=St(l,"path",{d:!0,fill:!0}),ie(u).forEach(V),l.forEach(V),this.h()},h(){x(r,"d","M50 50 L50 10 A40 40 0 0 1 90 50 z"),x(r,"fill","rgba(255,255,255, 0.7)"),x(n,"d","M50 50 L90 50 A40 40 0 0 1 50 90 z"),x(n,"fill","rgba(255,255,255, 0.3)"),x(u,"d","M50 50 L50 90 A40 40 0 0 1 10 50 z"),x(u,"fill","rgba(255,255,255, 0.9)"),x(t,"xmlns","http://www.w3.org/2000/svg"),x(t,"class","h-6 w-6"),x(t,"viewBox","0 0 100 100")},m(a,l){Ce(a,t,l),K(t,r),K(t,n),K(t,u)},p:Te,i:Te,o:Te,d(a){a&&V(t)}}}class c3 extends Rt{constructor(t){super(),Lt(this,t,null,f3,Ut,{})}}function h3(e){let t,r;return t=new QF({}),{c(){ht(t.$$.fragment)},l(n){dt(t.$$.fragment,n)},m(n,u){pt(t,n,u),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Le(t.$$.fragment,n),r=!1},d(n){vt(t,n)}}}function d3(e){let t,r;return t=new VE({}),{c(){ht(t.$$.fragment)},l(n){dt(t.$$.fragment,n)},m(n,u){pt(t,n,u),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Le(t.$$.fragment,n),r=!1},d(n){vt(t,n)}}}function p3(e){let t,r;return t=new i2({}),{c(){ht(t.$$.fragment)},l(n){dt(t.$$.fragment,n)},m(n,u){pt(t,n,u),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Le(t.$$.fragment,n),r=!1},d(n){vt(t,n)}}}function v3(e){let t,r;return t=new YE({}),{c(){ht(t.$$.fragment)},l(n){dt(t.$$.fragment,n)},m(n,u){pt(t,n,u),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Le(t.$$.fragment,n),r=!1},d(n){vt(t,n)}}}function g3(e){let t,r,n,u,a,l,o,c,p,f,h,d,m,y,g,_,b,C,w,B,F,O,P,I,N,H,W;a=new u3({}),p=new c3({}),m=new s3({}),b=new l3({});const q=[v3,p3,d3,h3],J=[];function Y(R,z){return R[0].weightMode==="bars"?0:R[0].weightMode==="pie"?1:R[0].weightMode==="circle"?2:R[0].weightMode==="embed"?3:-1}return~(B=Y(e))&&(F=J[B]=q[B](e)),I=new n3({}),{c(){t=se("div"),r=se("div"),n=se("div"),u=se("button"),ht(a.$$.fragment),o=Ke(),c=se("button"),ht(p.$$.fragment),h=Ke(),d=se("button"),ht(m.$$.fragment),g=Ke(),_=se("button"),ht(b.$$.fragment),w=Ke(),F&&F.c(),O=Ke(),P=se("div"),ht(I.$$.fragment),this.h()},l(R){t=oe(R,"DIV",{class:!0});var z=ie(t);r=oe(z,"DIV",{class:!0});var re=ie(r);n=oe(re,"DIV",{class:!0});var Q=ie(n);u=oe(Q,"BUTTON",{class:!0});var te=ie(u);dt(a.$$.fragment,te),te.forEach(V),o=Ye(Q),c=oe(Q,"BUTTON",{class:!0});var ve=ie(c);dt(p.$$.fragment,ve),ve.forEach(V),h=Ye(Q),d=oe(Q,"BUTTON",{class:!0});var me=ie(d);dt(m.$$.fragment,me),me.forEach(V),g=Ye(Q),_=oe(Q,"BUTTON",{class:!0});var Fe=ie(_);dt(b.$$.fragment,Fe),Fe.forEach(V),Q.forEach(V),w=Ye(re),F&&F.l(re),O=Ye(re),P=oe(re,"DIV",{class:!0});var Ae=ie(P);dt(I.$$.fragment,Ae),Ae.forEach(V),re.forEach(V),z.forEach(V),this.h()},h(){x(u,"class",l=e[0].weightMode==="bars"?"btn btn-sm btn-active":"btn btn-sm"),x(c,"class",f=e[0].weightMode==="pie"?"btn btn-sm btn-active":"btn btn-sm"),x(d,"class",y=e[0].weightMode==="circle"?"btn btn-sm btn-active":"btn btn-sm"),x(_,"class",C=e[0].weightMode==="embed"?"btn btn-sm btn-active":"btn btn-sm"),x(n,"class","btn-group btn-group-horizontal w-full flex justify-end p-2"),x(P,"class","h-48 w-full p-4 flex flex-col"),x(r,"class","flex flex-col h-full place-content-between"),x(t,"class","w-full h-full flex flex-col")},m(R,z){Ce(R,t,z),K(t,r),K(r,n),K(n,u),pt(a,u,null),K(n,o),K(n,c),pt(p,c,null),K(n,h),K(n,d),pt(m,d,null),K(n,g),K(n,_),pt(b,_,null),K(r,w),~B&&J[B].m(r,null),K(r,O),K(r,P),pt(I,P,null),N=!0,H||(W=[Ne(u,"click",e[2]),Ne(c,"click",e[3]),Ne(d,"click",e[4]),Ne(_,"click",e[5])],H=!0)},p(R,[z]){(!N||z&1&&l!==(l=R[0].weightMode==="bars"?"btn btn-sm btn-active":"btn btn-sm"))&&x(u,"class",l),(!N||z&1&&f!==(f=R[0].weightMode==="pie"?"btn btn-sm btn-active":"btn btn-sm"))&&x(c,"class",f),(!N||z&1&&y!==(y=R[0].weightMode==="circle"?"btn btn-sm btn-active":"btn btn-sm"))&&x(d,"class",y),(!N||z&1&&C!==(C=R[0].weightMode==="embed"?"btn btn-sm btn-active":"btn btn-sm"))&&x(_,"class",C);let re=B;B=Y(R),B!==re&&(F&&(mn(),Le(J[re],1,1,()=>{J[re]=null}),_n()),~B?(F=J[B],F||(F=J[B]=q[B](R),F.c()),xe(F,1),F.m(r,O)):F=null)},i(R){N||(xe(a.$$.fragment,R),xe(p.$$.fragment,R),xe(m.$$.fragment,R),xe(b.$$.fragment,R),xe(F),xe(I.$$.fragment,R),N=!0)},o(R){Le(a.$$.fragment,R),Le(p.$$.fragment,R),Le(m.$$.fragment,R),Le(b.$$.fragment,R),Le(F),Le(I.$$.fragment,R),N=!1},d(R){R&&V(t),vt(a),vt(p),vt(m),vt(b),~B&&J[B].d(),vt(I),H=!1,Lr(W)}}}function m3(e,t,r){let n;Nt(e,bn,p=>r(0,n=p));function u(p){const f={...n,weightMode:p};Mt.update(f)}return[n,u,()=>u("bars"),()=>u("pie"),()=>u("circle"),()=>u("embed")]}class _3 extends Rt{constructor(t){super(),Lt(this,t,m3,g3,Ut,{})}}function D3(){const e=xn({}),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&Object.keys(localStorage).reduce((a,l)=>{if(l.startsWith("prompt")){const o=l.split("_")[1];a[o]=JSON.parse(localStorage[l])}return a},{})||{}),{subscribe:t,update:(a,l)=>{const o=Wt(e),p={...o[a]||{},...l};u&&(localStorage[`prompt_${a}`]=JSON.stringify(p));const f={...o,[a]:p};r(f)},get:a=>Wt(e)[a],delete:a=>{u&&delete localStorage[`prompt_${a}`];const l={...Wt(e)};delete l[a],r(l)}}}const bs=D3(),b3=Pn(bs,e=>Object.entries(Wt(bs)));var ys={},y3={get exports(){return ys},set exports(e){ys=e}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var r,n="4.17.21",u=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",o="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",p=500,f="__lodash_placeholder__",h=1,d=2,m=4,y=1,g=2,_=1,b=2,C=4,w=8,B=16,F=32,O=64,P=128,I=256,N=512,H=30,W="...",q=800,J=16,Y=1,R=2,z=3,re=1/0,Q=9007199254740991,te=17976931348623157e292,ve=0/0,me=4294967295,Fe=me-1,Ae=me>>>1,Ie=[["ary",P],["bind",_],["bindKey",b],["curry",w],["curryRight",B],["flip",N],["partial",F],["partialRight",O],["rearg",I]],Ue="[object Arguments]",Ve="[object Array]",tt="[object AsyncFunction]",We="[object Boolean]",Me="[object Date]",qe="[object DOMException]",at="[object Error]",mt="[object Function]",et="[object GeneratorFunction]",He="[object Map]",yt="[object Number]",Et="[object Null]",At="[object Object]",we="[object Promise]",be="[object Proxy]",ke="[object RegExp]",it="[object Set]",_t="[object String]",L="[object Symbol]",j="[object Undefined]",Z="[object WeakMap]",le="[object WeakSet]",ne="[object ArrayBuffer]",de="[object DataView]",ue="[object Float32Array]",fe="[object Float64Array]",ye="[object Int8Array]",Oe="[object Int16Array]",je="[object Int32Array]",Ee="[object Uint8Array]",Vt="[object Uint8ClampedArray]",Bt="[object Uint16Array]",Ht="[object Uint32Array]",jt=/\b__p \+= '';/g,ir=/\b(__p \+=) '' \+/g,qt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gr=/&(?:amp|lt|gt|quot|#39);/g,lr=/[&<>"']/g,fr=RegExp(gr.source),rn=RegExp(lr.source),hr=/<%-([\s\S]+?)%>/g,yn=/<%([\s\S]+?)%>/g,Hn=/<%=([\s\S]+?)%>/g,Tn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,In=/^\w*$/,Wi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oi=/[\\^$.*+?()[\]{}|]/g,Du=RegExp(Oi.source),Ar=/^\s+/,tr=/\s/,bu=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ai=/\{\n\/\* \[wrapped with (.+)\] \*/,nn=/,? & /,Gn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Mi=/[()=,{}\[\]\/\s]/,yu=/\\(\\)?/g,Au=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Hi=/\w*$/,wu=/^[-+]0x[0-9a-f]+$/i,Eu=/^0b[01]+$/i,Cu=/^\[object .+?Constructor\]$/,Fu=/^0o[0-7]+$/i,Su=/^(?:0|[1-9]\d*)$/,Bu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,si=/($^)/,Ou=/['\n\r\u2028\u2029\\]/g,oi="\\ud800-\\udfff",Mu="\\u0300-\\u036f",Pu="\\ufe20-\\ufe2f",xu="\\u20d0-\\u20ff",Gi=Mu+Pu+xu,Nn="\\u2700-\\u27bf",mr="a-z\\xdf-\\xf6\\xf8-\\xff",ur="\\xac\\xb1\\xd7\\xf7",Tr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Pi="\\u2000-\\u206f",Kn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",kn="A-Z\\xc0-\\xd6\\xd8-\\xde",xi="\\ufe0e\\ufe0f",An=ur+Tr+Pi+Kn,un="[']",Hs="["+oi+"]",Tu="["+An+"]",Ki="["+Gi+"]",ra="\\d+",D="["+Nn+"]",E="["+mr+"]",k="[^"+oi+An+ra+Nn+mr+kn+"]",$="\\ud83c[\\udffb-\\udfff]",he="(?:"+Ki+"|"+$+")",Se="[^"+oi+"]",st="(?:\\ud83c[\\udde6-\\uddff]){2}",Dt="[\\ud800-\\udbff][\\udc00-\\udfff]",Kt="["+kn+"]",ar="\\u200d",Af="(?:"+E+"|"+k+")",Yp="(?:"+Kt+"|"+k+")",wf="(?:"+un+"(?:d|ll|m|re|s|t|ve))?",Ef="(?:"+un+"(?:D|LL|M|RE|S|T|VE))?",Cf=he+"?",Ff="["+xi+"]?",Zp="(?:"+ar+"(?:"+[Se,st,Dt].join("|")+")"+Ff+Cf+")*",$p="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Xp="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Sf=Ff+Cf+Zp,Jp="(?:"+[D,st,Dt].join("|")+")"+Sf,Qp="(?:"+[Se+Ki+"?",Ki,st,Dt,Hs].join("|")+")",e1=RegExp(un,"g"),t1=RegExp(Ki,"g"),Gs=RegExp($+"(?="+$+")|"+Qp+Sf,"g"),r1=RegExp([Kt+"?"+E+"+"+wf+"(?="+[Tu,Kt,"$"].join("|")+")",Yp+"+"+Ef+"(?="+[Tu,Kt+Af,"$"].join("|")+")",Kt+"?"+Af+"+"+wf,Kt+"+"+Ef,Xp,$p,ra,Jp].join("|"),"g"),n1=RegExp("["+ar+oi+Gi+xi+"]"),i1=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,u1=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],a1=-1,Gt={};Gt[ue]=Gt[fe]=Gt[ye]=Gt[Oe]=Gt[je]=Gt[Ee]=Gt[Vt]=Gt[Bt]=Gt[Ht]=!0,Gt[Ue]=Gt[Ve]=Gt[ne]=Gt[We]=Gt[de]=Gt[Me]=Gt[at]=Gt[mt]=Gt[He]=Gt[yt]=Gt[At]=Gt[ke]=Gt[it]=Gt[_t]=Gt[Z]=!1;var zt={};zt[Ue]=zt[Ve]=zt[ne]=zt[de]=zt[We]=zt[Me]=zt[ue]=zt[fe]=zt[ye]=zt[Oe]=zt[je]=zt[He]=zt[yt]=zt[At]=zt[ke]=zt[it]=zt[_t]=zt[L]=zt[Ee]=zt[Vt]=zt[Bt]=zt[Ht]=!0,zt[at]=zt[mt]=zt[Z]=!1;var s1={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},o1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l1={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},f1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},c1=parseFloat,h1=parseInt,Bf=typeof cr=="object"&&cr&&cr.Object===Object&&cr,d1=typeof self=="object"&&self&&self.Object===Object&&self,wr=Bf||d1||Function("return this")(),Ks=t&&!t.nodeType&&t,Ti=Ks&&!0&&e&&!e.nodeType&&e,Of=Ti&&Ti.exports===Ks,Ys=Of&&Bf.process,an=function(){try{var X=Ti&&Ti.require&&Ti.require("util").types;return X||Ys&&Ys.binding&&Ys.binding("util")}catch{}}(),Mf=an&&an.isArrayBuffer,Pf=an&&an.isDate,xf=an&&an.isMap,Tf=an&&an.isRegExp,If=an&&an.isSet,Nf=an&&an.isTypedArray;function Kr(X,ce,ae){switch(ae.length){case 0:return X.call(ce);case 1:return X.call(ce,ae[0]);case 2:return X.call(ce,ae[0],ae[1]);case 3:return X.call(ce,ae[0],ae[1],ae[2])}return X.apply(ce,ae)}function p1(X,ce,ae,Pe){for(var nt=-1,wt=X==null?0:X.length;++nt<wt;){var dr=X[nt];ce(Pe,dr,ae(dr),X)}return Pe}function sn(X,ce){for(var ae=-1,Pe=X==null?0:X.length;++ae<Pe&&ce(X[ae],ae,X)!==!1;);return X}function v1(X,ce){for(var ae=X==null?0:X.length;ae--&&ce(X[ae],ae,X)!==!1;);return X}function kf(X,ce){for(var ae=-1,Pe=X==null?0:X.length;++ae<Pe;)if(!ce(X[ae],ae,X))return!1;return!0}function li(X,ce){for(var ae=-1,Pe=X==null?0:X.length,nt=0,wt=[];++ae<Pe;){var dr=X[ae];ce(dr,ae,X)&&(wt[nt++]=dr)}return wt}function na(X,ce){var ae=X==null?0:X.length;return!!ae&&Yi(X,ce,0)>-1}function Zs(X,ce,ae){for(var Pe=-1,nt=X==null?0:X.length;++Pe<nt;)if(ae(ce,X[Pe]))return!0;return!1}function Yt(X,ce){for(var ae=-1,Pe=X==null?0:X.length,nt=Array(Pe);++ae<Pe;)nt[ae]=ce(X[ae],ae,X);return nt}function fi(X,ce){for(var ae=-1,Pe=ce.length,nt=X.length;++ae<Pe;)X[nt+ae]=ce[ae];return X}function $s(X,ce,ae,Pe){var nt=-1,wt=X==null?0:X.length;for(Pe&&wt&&(ae=X[++nt]);++nt<wt;)ae=ce(ae,X[nt],nt,X);return ae}function g1(X,ce,ae,Pe){var nt=X==null?0:X.length;for(Pe&&nt&&(ae=X[--nt]);nt--;)ae=ce(ae,X[nt],nt,X);return ae}function Xs(X,ce){for(var ae=-1,Pe=X==null?0:X.length;++ae<Pe;)if(ce(X[ae],ae,X))return!0;return!1}var m1=Js("length");function _1(X){return X.split("")}function D1(X){return X.match(Gn)||[]}function Rf(X,ce,ae){var Pe;return ae(X,function(nt,wt,dr){if(ce(nt,wt,dr))return Pe=wt,!1}),Pe}function ia(X,ce,ae,Pe){for(var nt=X.length,wt=ae+(Pe?1:-1);Pe?wt--:++wt<nt;)if(ce(X[wt],wt,X))return wt;return-1}function Yi(X,ce,ae){return ce===ce?P1(X,ce,ae):ia(X,Lf,ae)}function b1(X,ce,ae,Pe){for(var nt=ae-1,wt=X.length;++nt<wt;)if(Pe(X[nt],ce))return nt;return-1}function Lf(X){return X!==X}function Uf(X,ce){var ae=X==null?0:X.length;return ae?eo(X,ce)/ae:ve}function Js(X){return function(ce){return ce==null?r:ce[X]}}function Qs(X){return function(ce){return X==null?r:X[ce]}}function Vf(X,ce,ae,Pe,nt){return nt(X,function(wt,dr,It){ae=Pe?(Pe=!1,wt):ce(ae,wt,dr,It)}),ae}function y1(X,ce){var ae=X.length;for(X.sort(ce);ae--;)X[ae]=X[ae].value;return X}function eo(X,ce){for(var ae,Pe=-1,nt=X.length;++Pe<nt;){var wt=ce(X[Pe]);wt!==r&&(ae=ae===r?wt:ae+wt)}return ae}function to(X,ce){for(var ae=-1,Pe=Array(X);++ae<X;)Pe[ae]=ce(ae);return Pe}function A1(X,ce){return Yt(ce,function(ae){return[ae,X[ae]]})}function jf(X){return X&&X.slice(0,Hf(X)+1).replace(Ar,"")}function Yr(X){return function(ce){return X(ce)}}function ro(X,ce){return Yt(ce,function(ae){return X[ae]})}function Iu(X,ce){return X.has(ce)}function qf(X,ce){for(var ae=-1,Pe=X.length;++ae<Pe&&Yi(ce,X[ae],0)>-1;);return ae}function zf(X,ce){for(var ae=X.length;ae--&&Yi(ce,X[ae],0)>-1;);return ae}function w1(X,ce){for(var ae=X.length,Pe=0;ae--;)X[ae]===ce&&++Pe;return Pe}var E1=Qs(s1),C1=Qs(o1);function F1(X){return"\\"+f1[X]}function S1(X,ce){return X==null?r:X[ce]}function Zi(X){return n1.test(X)}function B1(X){return i1.test(X)}function O1(X){for(var ce,ae=[];!(ce=X.next()).done;)ae.push(ce.value);return ae}function no(X){var ce=-1,ae=Array(X.size);return X.forEach(function(Pe,nt){ae[++ce]=[nt,Pe]}),ae}function Wf(X,ce){return function(ae){return X(ce(ae))}}function ci(X,ce){for(var ae=-1,Pe=X.length,nt=0,wt=[];++ae<Pe;){var dr=X[ae];(dr===ce||dr===f)&&(X[ae]=f,wt[nt++]=ae)}return wt}function ua(X){var ce=-1,ae=Array(X.size);return X.forEach(function(Pe){ae[++ce]=Pe}),ae}function M1(X){var ce=-1,ae=Array(X.size);return X.forEach(function(Pe){ae[++ce]=[Pe,Pe]}),ae}function P1(X,ce,ae){for(var Pe=ae-1,nt=X.length;++Pe<nt;)if(X[Pe]===ce)return Pe;return-1}function x1(X,ce,ae){for(var Pe=ae+1;Pe--;)if(X[Pe]===ce)return Pe;return Pe}function $i(X){return Zi(X)?I1(X):m1(X)}function wn(X){return Zi(X)?N1(X):_1(X)}function Hf(X){for(var ce=X.length;ce--&&tr.test(X.charAt(ce)););return ce}var T1=Qs(l1);function I1(X){for(var ce=Gs.lastIndex=0;Gs.test(X);)++ce;return ce}function N1(X){return X.match(Gs)||[]}function k1(X){return X.match(r1)||[]}var R1=function X(ce){ce=ce==null?wr:Xi.defaults(wr.Object(),ce,Xi.pick(wr,u1));var ae=ce.Array,Pe=ce.Date,nt=ce.Error,wt=ce.Function,dr=ce.Math,It=ce.Object,io=ce.RegExp,L1=ce.String,on=ce.TypeError,aa=ae.prototype,U1=wt.prototype,Ji=It.prototype,sa=ce["__core-js_shared__"],oa=U1.toString,Ot=Ji.hasOwnProperty,V1=0,Gf=function(){var i=/[^.]+$/.exec(sa&&sa.keys&&sa.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),la=Ji.toString,j1=oa.call(It),q1=wr._,z1=io("^"+oa.call(Ot).replace(Oi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fa=Of?ce.Buffer:r,hi=ce.Symbol,ca=ce.Uint8Array,Kf=fa?fa.allocUnsafe:r,ha=Wf(It.getPrototypeOf,It),Yf=It.create,Zf=Ji.propertyIsEnumerable,da=aa.splice,$f=hi?hi.isConcatSpreadable:r,Nu=hi?hi.iterator:r,Ii=hi?hi.toStringTag:r,pa=function(){try{var i=Ui(It,"defineProperty");return i({},"",{}),i}catch{}}(),W1=ce.clearTimeout!==wr.clearTimeout&&ce.clearTimeout,H1=Pe&&Pe.now!==wr.Date.now&&Pe.now,G1=ce.setTimeout!==wr.setTimeout&&ce.setTimeout,va=dr.ceil,ga=dr.floor,uo=It.getOwnPropertySymbols,K1=fa?fa.isBuffer:r,Xf=ce.isFinite,Y1=aa.join,Z1=Wf(It.keys,It),pr=dr.max,Or=dr.min,$1=Pe.now,X1=ce.parseInt,Jf=dr.random,J1=aa.reverse,ao=Ui(ce,"DataView"),ku=Ui(ce,"Map"),so=Ui(ce,"Promise"),Qi=Ui(ce,"Set"),Ru=Ui(ce,"WeakMap"),Lu=Ui(It,"create"),ma=Ru&&new Ru,eu={},Q1=Vi(ao),ev=Vi(ku),tv=Vi(so),rv=Vi(Qi),nv=Vi(Ru),_a=hi?hi.prototype:r,Uu=_a?_a.valueOf:r,Qf=_a?_a.toString:r;function M(i){if(rr(i)&&!ut(i)&&!(i instanceof gt)){if(i instanceof ln)return i;if(Ot.call(i,"__wrapped__"))return eh(i)}return new ln(i)}var tu=function(){function i(){}return function(s){if(!$t(s))return{};if(Yf)return Yf(s);i.prototype=s;var v=new i;return i.prototype=r,v}}();function Da(){}function ln(i,s){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=r}M.templateSettings={escape:hr,evaluate:yn,interpolate:Hn,variable:"",imports:{_:M}},M.prototype=Da.prototype,M.prototype.constructor=M,ln.prototype=tu(Da.prototype),ln.prototype.constructor=ln;function gt(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=me,this.__views__=[]}function iv(){var i=new gt(this.__wrapped__);return i.__actions__=Ur(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=Ur(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=Ur(this.__views__),i}function uv(){if(this.__filtered__){var i=new gt(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function av(){var i=this.__wrapped__.value(),s=this.__dir__,v=ut(i),A=s<0,S=v?i.length:0,T=_g(0,S,this.__views__),U=T.start,G=T.end,ee=G-U,pe=A?G:U-1,ge=this.__iteratees__,De=ge.length,Be=0,Re=Or(ee,this.__takeCount__);if(!v||!A&&S==ee&&Re==ee)return wc(i,this.__actions__);var Je=[];e:for(;ee--&&Be<Re;){pe+=s;for(var lt=-1,Qe=i[pe];++lt<De;){var ct=ge[lt],bt=ct.iteratee,Xr=ct.type,kr=bt(Qe);if(Xr==R)Qe=kr;else if(!kr){if(Xr==Y)continue e;break e}}Je[Be++]=Qe}return Je}gt.prototype=tu(Da.prototype),gt.prototype.constructor=gt;function Ni(i){var s=-1,v=i==null?0:i.length;for(this.clear();++s<v;){var A=i[s];this.set(A[0],A[1])}}function sv(){this.__data__=Lu?Lu(null):{},this.size=0}function ov(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s}function lv(i){var s=this.__data__;if(Lu){var v=s[i];return v===c?r:v}return Ot.call(s,i)?s[i]:r}function fv(i){var s=this.__data__;return Lu?s[i]!==r:Ot.call(s,i)}function cv(i,s){var v=this.__data__;return this.size+=this.has(i)?0:1,v[i]=Lu&&s===r?c:s,this}Ni.prototype.clear=sv,Ni.prototype.delete=ov,Ni.prototype.get=lv,Ni.prototype.has=fv,Ni.prototype.set=cv;function Yn(i){var s=-1,v=i==null?0:i.length;for(this.clear();++s<v;){var A=i[s];this.set(A[0],A[1])}}function hv(){this.__data__=[],this.size=0}function dv(i){var s=this.__data__,v=ba(s,i);if(v<0)return!1;var A=s.length-1;return v==A?s.pop():da.call(s,v,1),--this.size,!0}function pv(i){var s=this.__data__,v=ba(s,i);return v<0?r:s[v][1]}function vv(i){return ba(this.__data__,i)>-1}function gv(i,s){var v=this.__data__,A=ba(v,i);return A<0?(++this.size,v.push([i,s])):v[A][1]=s,this}Yn.prototype.clear=hv,Yn.prototype.delete=dv,Yn.prototype.get=pv,Yn.prototype.has=vv,Yn.prototype.set=gv;function Zn(i){var s=-1,v=i==null?0:i.length;for(this.clear();++s<v;){var A=i[s];this.set(A[0],A[1])}}function mv(){this.size=0,this.__data__={hash:new Ni,map:new(ku||Yn),string:new Ni}}function _v(i){var s=xa(this,i).delete(i);return this.size-=s?1:0,s}function Dv(i){return xa(this,i).get(i)}function bv(i){return xa(this,i).has(i)}function yv(i,s){var v=xa(this,i),A=v.size;return v.set(i,s),this.size+=v.size==A?0:1,this}Zn.prototype.clear=mv,Zn.prototype.delete=_v,Zn.prototype.get=Dv,Zn.prototype.has=bv,Zn.prototype.set=yv;function ki(i){var s=-1,v=i==null?0:i.length;for(this.__data__=new Zn;++s<v;)this.add(i[s])}function Av(i){return this.__data__.set(i,c),this}function wv(i){return this.__data__.has(i)}ki.prototype.add=ki.prototype.push=Av,ki.prototype.has=wv;function En(i){var s=this.__data__=new Yn(i);this.size=s.size}function Ev(){this.__data__=new Yn,this.size=0}function Cv(i){var s=this.__data__,v=s.delete(i);return this.size=s.size,v}function Fv(i){return this.__data__.get(i)}function Sv(i){return this.__data__.has(i)}function Bv(i,s){var v=this.__data__;if(v instanceof Yn){var A=v.__data__;if(!ku||A.length<u-1)return A.push([i,s]),this.size=++v.size,this;v=this.__data__=new Zn(A)}return v.set(i,s),this.size=v.size,this}En.prototype.clear=Ev,En.prototype.delete=Cv,En.prototype.get=Fv,En.prototype.has=Sv,En.prototype.set=Bv;function ec(i,s){var v=ut(i),A=!v&&ji(i),S=!v&&!A&&mi(i),T=!v&&!A&&!S&&uu(i),U=v||A||S||T,G=U?to(i.length,L1):[],ee=G.length;for(var pe in i)(s||Ot.call(i,pe))&&!(U&&(pe=="length"||S&&(pe=="offset"||pe=="parent")||T&&(pe=="buffer"||pe=="byteLength"||pe=="byteOffset")||Qn(pe,ee)))&&G.push(pe);return G}function tc(i){var s=i.length;return s?i[Do(0,s-1)]:r}function Ov(i,s){return Ta(Ur(i),Ri(s,0,i.length))}function Mv(i){return Ta(Ur(i))}function oo(i,s,v){(v!==r&&!Cn(i[s],v)||v===r&&!(s in i))&&$n(i,s,v)}function Vu(i,s,v){var A=i[s];(!(Ot.call(i,s)&&Cn(A,v))||v===r&&!(s in i))&&$n(i,s,v)}function ba(i,s){for(var v=i.length;v--;)if(Cn(i[v][0],s))return v;return-1}function Pv(i,s,v,A){return di(i,function(S,T,U){s(A,S,v(S),U)}),A}function rc(i,s){return i&&Ln(s,_r(s),i)}function xv(i,s){return i&&Ln(s,jr(s),i)}function $n(i,s,v){s=="__proto__"&&pa?pa(i,s,{configurable:!0,enumerable:!0,value:v,writable:!0}):i[s]=v}function lo(i,s){for(var v=-1,A=s.length,S=ae(A),T=i==null;++v<A;)S[v]=T?r:Wo(i,s[v]);return S}function Ri(i,s,v){return i===i&&(v!==r&&(i=i<=v?i:v),s!==r&&(i=i>=s?i:s)),i}function fn(i,s,v,A,S,T){var U,G=s&h,ee=s&d,pe=s&m;if(v&&(U=S?v(i,A,S,T):v(i)),U!==r)return U;if(!$t(i))return i;var ge=ut(i);if(ge){if(U=bg(i),!G)return Ur(i,U)}else{var De=Mr(i),Be=De==mt||De==et;if(mi(i))return Fc(i,G);if(De==At||De==Ue||Be&&!S){if(U=ee||Be?{}:Hc(i),!G)return ee?lg(i,xv(U,i)):og(i,rc(U,i))}else{if(!zt[De])return S?i:{};U=yg(i,De,G)}}T||(T=new En);var Re=T.get(i);if(Re)return Re;T.set(i,U),bh(i)?i.forEach(function(Qe){U.add(fn(Qe,s,v,Qe,i,T))}):_h(i)&&i.forEach(function(Qe,ct){U.set(ct,fn(Qe,s,v,ct,i,T))});var Je=pe?ee?Mo:Oo:ee?jr:_r,lt=ge?r:Je(i);return sn(lt||i,function(Qe,ct){lt&&(ct=Qe,Qe=i[ct]),Vu(U,ct,fn(Qe,s,v,ct,i,T))}),U}function Tv(i){var s=_r(i);return function(v){return nc(v,i,s)}}function nc(i,s,v){var A=v.length;if(i==null)return!A;for(i=It(i);A--;){var S=v[A],T=s[S],U=i[S];if(U===r&&!(S in i)||!T(U))return!1}return!0}function ic(i,s,v){if(typeof i!="function")throw new on(l);return Ku(function(){i.apply(r,v)},s)}function ju(i,s,v,A){var S=-1,T=na,U=!0,G=i.length,ee=[],pe=s.length;if(!G)return ee;v&&(s=Yt(s,Yr(v))),A?(T=Zs,U=!1):s.length>=u&&(T=Iu,U=!1,s=new ki(s));e:for(;++S<G;){var ge=i[S],De=v==null?ge:v(ge);if(ge=A||ge!==0?ge:0,U&&De===De){for(var Be=pe;Be--;)if(s[Be]===De)continue e;ee.push(ge)}else T(s,De,A)||ee.push(ge)}return ee}var di=Pc(Rn),uc=Pc(co,!0);function Iv(i,s){var v=!0;return di(i,function(A,S,T){return v=!!s(A,S,T),v}),v}function ya(i,s,v){for(var A=-1,S=i.length;++A<S;){var T=i[A],U=s(T);if(U!=null&&(G===r?U===U&&!$r(U):v(U,G)))var G=U,ee=T}return ee}function Nv(i,s,v,A){var S=i.length;for(v=ot(v),v<0&&(v=-v>S?0:S+v),A=A===r||A>S?S:ot(A),A<0&&(A+=S),A=v>A?0:Ah(A);v<A;)i[v++]=s;return i}function ac(i,s){var v=[];return di(i,function(A,S,T){s(A,S,T)&&v.push(A)}),v}function Er(i,s,v,A,S){var T=-1,U=i.length;for(v||(v=wg),S||(S=[]);++T<U;){var G=i[T];s>0&&v(G)?s>1?Er(G,s-1,v,A,S):fi(S,G):A||(S[S.length]=G)}return S}var fo=xc(),sc=xc(!0);function Rn(i,s){return i&&fo(i,s,_r)}function co(i,s){return i&&sc(i,s,_r)}function Aa(i,s){return li(s,function(v){return ei(i[v])})}function Li(i,s){s=vi(s,i);for(var v=0,A=s.length;i!=null&&v<A;)i=i[Un(s[v++])];return v&&v==A?i:r}function oc(i,s,v){var A=s(i);return ut(i)?A:fi(A,v(i))}function Ir(i){return i==null?i===r?j:Et:Ii&&Ii in It(i)?mg(i):Mg(i)}function ho(i,s){return i>s}function kv(i,s){return i!=null&&Ot.call(i,s)}function Rv(i,s){return i!=null&&s in It(i)}function Lv(i,s,v){return i>=Or(s,v)&&i<pr(s,v)}function po(i,s,v){for(var A=v?Zs:na,S=i[0].length,T=i.length,U=T,G=ae(T),ee=1/0,pe=[];U--;){var ge=i[U];U&&s&&(ge=Yt(ge,Yr(s))),ee=Or(ge.length,ee),G[U]=!v&&(s||S>=120&&ge.length>=120)?new ki(U&&ge):r}ge=i[0];var De=-1,Be=G[0];e:for(;++De<S&&pe.length<ee;){var Re=ge[De],Je=s?s(Re):Re;if(Re=v||Re!==0?Re:0,!(Be?Iu(Be,Je):A(pe,Je,v))){for(U=T;--U;){var lt=G[U];if(!(lt?Iu(lt,Je):A(i[U],Je,v)))continue e}Be&&Be.push(Je),pe.push(Re)}}return pe}function Uv(i,s,v,A){return Rn(i,function(S,T,U){s(A,v(S),T,U)}),A}function qu(i,s,v){s=vi(s,i),i=Zc(i,s);var A=i==null?i:i[Un(hn(s))];return A==null?r:Kr(A,i,v)}function lc(i){return rr(i)&&Ir(i)==Ue}function Vv(i){return rr(i)&&Ir(i)==ne}function jv(i){return rr(i)&&Ir(i)==Me}function zu(i,s,v,A,S){return i===s?!0:i==null||s==null||!rr(i)&&!rr(s)?i!==i&&s!==s:qv(i,s,v,A,zu,S)}function qv(i,s,v,A,S,T){var U=ut(i),G=ut(s),ee=U?Ve:Mr(i),pe=G?Ve:Mr(s);ee=ee==Ue?At:ee,pe=pe==Ue?At:pe;var ge=ee==At,De=pe==At,Be=ee==pe;if(Be&&mi(i)){if(!mi(s))return!1;U=!0,ge=!1}if(Be&&!ge)return T||(T=new En),U||uu(i)?qc(i,s,v,A,S,T):vg(i,s,ee,v,A,S,T);if(!(v&y)){var Re=ge&&Ot.call(i,"__wrapped__"),Je=De&&Ot.call(s,"__wrapped__");if(Re||Je){var lt=Re?i.value():i,Qe=Je?s.value():s;return T||(T=new En),S(lt,Qe,v,A,T)}}return Be?(T||(T=new En),gg(i,s,v,A,S,T)):!1}function zv(i){return rr(i)&&Mr(i)==He}function vo(i,s,v,A){var S=v.length,T=S,U=!A;if(i==null)return!T;for(i=It(i);S--;){var G=v[S];if(U&&G[2]?G[1]!==i[G[0]]:!(G[0]in i))return!1}for(;++S<T;){G=v[S];var ee=G[0],pe=i[ee],ge=G[1];if(U&&G[2]){if(pe===r&&!(ee in i))return!1}else{var De=new En;if(A)var Be=A(pe,ge,ee,i,s,De);if(!(Be===r?zu(ge,pe,y|g,A,De):Be))return!1}}return!0}function fc(i){if(!$t(i)||Cg(i))return!1;var s=ei(i)?z1:Cu;return s.test(Vi(i))}function Wv(i){return rr(i)&&Ir(i)==ke}function Hv(i){return rr(i)&&Mr(i)==it}function Gv(i){return rr(i)&&Ua(i.length)&&!!Gt[Ir(i)]}function cc(i){return typeof i=="function"?i:i==null?qr:typeof i=="object"?ut(i)?pc(i[0],i[1]):dc(i):Th(i)}function go(i){if(!Gu(i))return Z1(i);var s=[];for(var v in It(i))Ot.call(i,v)&&v!="constructor"&&s.push(v);return s}function Kv(i){if(!$t(i))return Og(i);var s=Gu(i),v=[];for(var A in i)A=="constructor"&&(s||!Ot.call(i,A))||v.push(A);return v}function mo(i,s){return i<s}function hc(i,s){var v=-1,A=Vr(i)?ae(i.length):[];return di(i,function(S,T,U){A[++v]=s(S,T,U)}),A}function dc(i){var s=xo(i);return s.length==1&&s[0][2]?Kc(s[0][0],s[0][1]):function(v){return v===i||vo(v,i,s)}}function pc(i,s){return Io(i)&&Gc(s)?Kc(Un(i),s):function(v){var A=Wo(v,i);return A===r&&A===s?Ho(v,i):zu(s,A,y|g)}}function wa(i,s,v,A,S){i!==s&&fo(s,function(T,U){if(S||(S=new En),$t(T))Yv(i,s,U,v,wa,A,S);else{var G=A?A(ko(i,U),T,U+"",i,s,S):r;G===r&&(G=T),oo(i,U,G)}},jr)}function Yv(i,s,v,A,S,T,U){var G=ko(i,v),ee=ko(s,v),pe=U.get(ee);if(pe){oo(i,v,pe);return}var ge=T?T(G,ee,v+"",i,s,U):r,De=ge===r;if(De){var Be=ut(ee),Re=!Be&&mi(ee),Je=!Be&&!Re&&uu(ee);ge=ee,Be||Re||Je?ut(G)?ge=G:sr(G)?ge=Ur(G):Re?(De=!1,ge=Fc(ee,!0)):Je?(De=!1,ge=Sc(ee,!0)):ge=[]:Yu(ee)||ji(ee)?(ge=G,ji(G)?ge=wh(G):(!$t(G)||ei(G))&&(ge=Hc(ee))):De=!1}De&&(U.set(ee,ge),S(ge,ee,A,T,U),U.delete(ee)),oo(i,v,ge)}function vc(i,s){var v=i.length;if(v)return s+=s<0?v:0,Qn(s,v)?i[s]:r}function gc(i,s,v){s.length?s=Yt(s,function(T){return ut(T)?function(U){return Li(U,T.length===1?T[0]:T)}:T}):s=[qr];var A=-1;s=Yt(s,Yr(Ge()));var S=hc(i,function(T,U,G){var ee=Yt(s,function(pe){return pe(T)});return{criteria:ee,index:++A,value:T}});return y1(S,function(T,U){return sg(T,U,v)})}function Zv(i,s){return mc(i,s,function(v,A){return Ho(i,A)})}function mc(i,s,v){for(var A=-1,S=s.length,T={};++A<S;){var U=s[A],G=Li(i,U);v(G,U)&&Wu(T,vi(U,i),G)}return T}function $v(i){return function(s){return Li(s,i)}}function _o(i,s,v,A){var S=A?b1:Yi,T=-1,U=s.length,G=i;for(i===s&&(s=Ur(s)),v&&(G=Yt(i,Yr(v)));++T<U;)for(var ee=0,pe=s[T],ge=v?v(pe):pe;(ee=S(G,ge,ee,A))>-1;)G!==i&&da.call(G,ee,1),da.call(i,ee,1);return i}function _c(i,s){for(var v=i?s.length:0,A=v-1;v--;){var S=s[v];if(v==A||S!==T){var T=S;Qn(S)?da.call(i,S,1):Ao(i,S)}}return i}function Do(i,s){return i+ga(Jf()*(s-i+1))}function Xv(i,s,v,A){for(var S=-1,T=pr(va((s-i)/(v||1)),0),U=ae(T);T--;)U[A?T:++S]=i,i+=v;return U}function bo(i,s){var v="";if(!i||s<1||s>Q)return v;do s%2&&(v+=i),s=ga(s/2),s&&(i+=i);while(s);return v}function ft(i,s){return Ro(Yc(i,s,qr),i+"")}function Jv(i){return tc(au(i))}function Qv(i,s){var v=au(i);return Ta(v,Ri(s,0,v.length))}function Wu(i,s,v,A){if(!$t(i))return i;s=vi(s,i);for(var S=-1,T=s.length,U=T-1,G=i;G!=null&&++S<T;){var ee=Un(s[S]),pe=v;if(ee==="__proto__"||ee==="constructor"||ee==="prototype")return i;if(S!=U){var ge=G[ee];pe=A?A(ge,ee,G):r,pe===r&&(pe=$t(ge)?ge:Qn(s[S+1])?[]:{})}Vu(G,ee,pe),G=G[ee]}return i}var Dc=ma?function(i,s){return ma.set(i,s),i}:qr,eg=pa?function(i,s){return pa(i,"toString",{configurable:!0,enumerable:!1,value:Ko(s),writable:!0})}:qr;function tg(i){return Ta(au(i))}function cn(i,s,v){var A=-1,S=i.length;s<0&&(s=-s>S?0:S+s),v=v>S?S:v,v<0&&(v+=S),S=s>v?0:v-s>>>0,s>>>=0;for(var T=ae(S);++A<S;)T[A]=i[A+s];return T}function rg(i,s){var v;return di(i,function(A,S,T){return v=s(A,S,T),!v}),!!v}function Ea(i,s,v){var A=0,S=i==null?A:i.length;if(typeof s=="number"&&s===s&&S<=Ae){for(;A<S;){var T=A+S>>>1,U=i[T];U!==null&&!$r(U)&&(v?U<=s:U<s)?A=T+1:S=T}return S}return yo(i,s,qr,v)}function yo(i,s,v,A){var S=0,T=i==null?0:i.length;if(T===0)return 0;s=v(s);for(var U=s!==s,G=s===null,ee=$r(s),pe=s===r;S<T;){var ge=ga((S+T)/2),De=v(i[ge]),Be=De!==r,Re=De===null,Je=De===De,lt=$r(De);if(U)var Qe=A||Je;else pe?Qe=Je&&(A||Be):G?Qe=Je&&Be&&(A||!Re):ee?Qe=Je&&Be&&!Re&&(A||!lt):Re||lt?Qe=!1:Qe=A?De<=s:De<s;Qe?S=ge+1:T=ge}return Or(T,Fe)}function bc(i,s){for(var v=-1,A=i.length,S=0,T=[];++v<A;){var U=i[v],G=s?s(U):U;if(!v||!Cn(G,ee)){var ee=G;T[S++]=U===0?0:U}}return T}function yc(i){return typeof i=="number"?i:$r(i)?ve:+i}function Zr(i){if(typeof i=="string")return i;if(ut(i))return Yt(i,Zr)+"";if($r(i))return Qf?Qf.call(i):"";var s=i+"";return s=="0"&&1/i==-re?"-0":s}function pi(i,s,v){var A=-1,S=na,T=i.length,U=!0,G=[],ee=G;if(v)U=!1,S=Zs;else if(T>=u){var pe=s?null:dg(i);if(pe)return ua(pe);U=!1,S=Iu,ee=new ki}else ee=s?[]:G;e:for(;++A<T;){var ge=i[A],De=s?s(ge):ge;if(ge=v||ge!==0?ge:0,U&&De===De){for(var Be=ee.length;Be--;)if(ee[Be]===De)continue e;s&&ee.push(De),G.push(ge)}else S(ee,De,v)||(ee!==G&&ee.push(De),G.push(ge))}return G}function Ao(i,s){return s=vi(s,i),i=Zc(i,s),i==null||delete i[Un(hn(s))]}function Ac(i,s,v,A){return Wu(i,s,v(Li(i,s)),A)}function Ca(i,s,v,A){for(var S=i.length,T=A?S:-1;(A?T--:++T<S)&&s(i[T],T,i););return v?cn(i,A?0:T,A?T+1:S):cn(i,A?T+1:0,A?S:T)}function wc(i,s){var v=i;return v instanceof gt&&(v=v.value()),$s(s,function(A,S){return S.func.apply(S.thisArg,fi([A],S.args))},v)}function wo(i,s,v){var A=i.length;if(A<2)return A?pi(i[0]):[];for(var S=-1,T=ae(A);++S<A;)for(var U=i[S],G=-1;++G<A;)G!=S&&(T[S]=ju(T[S]||U,i[G],s,v));return pi(Er(T,1),s,v)}function Ec(i,s,v){for(var A=-1,S=i.length,T=s.length,U={};++A<S;){var G=A<T?s[A]:r;v(U,i[A],G)}return U}function Eo(i){return sr(i)?i:[]}function Co(i){return typeof i=="function"?i:qr}function vi(i,s){return ut(i)?i:Io(i,s)?[i]:Qc(Ct(i))}var ng=ft;function gi(i,s,v){var A=i.length;return v=v===r?A:v,!s&&v>=A?i:cn(i,s,v)}var Cc=W1||function(i){return wr.clearTimeout(i)};function Fc(i,s){if(s)return i.slice();var v=i.length,A=Kf?Kf(v):new i.constructor(v);return i.copy(A),A}function Fo(i){var s=new i.constructor(i.byteLength);return new ca(s).set(new ca(i)),s}function ig(i,s){var v=s?Fo(i.buffer):i.buffer;return new i.constructor(v,i.byteOffset,i.byteLength)}function ug(i){var s=new i.constructor(i.source,Hi.exec(i));return s.lastIndex=i.lastIndex,s}function ag(i){return Uu?It(Uu.call(i)):{}}function Sc(i,s){var v=s?Fo(i.buffer):i.buffer;return new i.constructor(v,i.byteOffset,i.length)}function Bc(i,s){if(i!==s){var v=i!==r,A=i===null,S=i===i,T=$r(i),U=s!==r,G=s===null,ee=s===s,pe=$r(s);if(!G&&!pe&&!T&&i>s||T&&U&&ee&&!G&&!pe||A&&U&&ee||!v&&ee||!S)return 1;if(!A&&!T&&!pe&&i<s||pe&&v&&S&&!A&&!T||G&&v&&S||!U&&S||!ee)return-1}return 0}function sg(i,s,v){for(var A=-1,S=i.criteria,T=s.criteria,U=S.length,G=v.length;++A<U;){var ee=Bc(S[A],T[A]);if(ee){if(A>=G)return ee;var pe=v[A];return ee*(pe=="desc"?-1:1)}}return i.index-s.index}function Oc(i,s,v,A){for(var S=-1,T=i.length,U=v.length,G=-1,ee=s.length,pe=pr(T-U,0),ge=ae(ee+pe),De=!A;++G<ee;)ge[G]=s[G];for(;++S<U;)(De||S<T)&&(ge[v[S]]=i[S]);for(;pe--;)ge[G++]=i[S++];return ge}function Mc(i,s,v,A){for(var S=-1,T=i.length,U=-1,G=v.length,ee=-1,pe=s.length,ge=pr(T-G,0),De=ae(ge+pe),Be=!A;++S<ge;)De[S]=i[S];for(var Re=S;++ee<pe;)De[Re+ee]=s[ee];for(;++U<G;)(Be||S<T)&&(De[Re+v[U]]=i[S++]);return De}function Ur(i,s){var v=-1,A=i.length;for(s||(s=ae(A));++v<A;)s[v]=i[v];return s}function Ln(i,s,v,A){var S=!v;v||(v={});for(var T=-1,U=s.length;++T<U;){var G=s[T],ee=A?A(v[G],i[G],G,v,i):r;ee===r&&(ee=i[G]),S?$n(v,G,ee):Vu(v,G,ee)}return v}function og(i,s){return Ln(i,To(i),s)}function lg(i,s){return Ln(i,zc(i),s)}function Fa(i,s){return function(v,A){var S=ut(v)?p1:Pv,T=s?s():{};return S(v,i,Ge(A,2),T)}}function ru(i){return ft(function(s,v){var A=-1,S=v.length,T=S>1?v[S-1]:r,U=S>2?v[2]:r;for(T=i.length>3&&typeof T=="function"?(S--,T):r,U&&Nr(v[0],v[1],U)&&(T=S<3?r:T,S=1),s=It(s);++A<S;){var G=v[A];G&&i(s,G,A,T)}return s})}function Pc(i,s){return function(v,A){if(v==null)return v;if(!Vr(v))return i(v,A);for(var S=v.length,T=s?S:-1,U=It(v);(s?T--:++T<S)&&A(U[T],T,U)!==!1;);return v}}function xc(i){return function(s,v,A){for(var S=-1,T=It(s),U=A(s),G=U.length;G--;){var ee=U[i?G:++S];if(v(T[ee],ee,T)===!1)break}return s}}function fg(i,s,v){var A=s&_,S=Hu(i);function T(){var U=this&&this!==wr&&this instanceof T?S:i;return U.apply(A?v:this,arguments)}return T}function Tc(i){return function(s){s=Ct(s);var v=Zi(s)?wn(s):r,A=v?v[0]:s.charAt(0),S=v?gi(v,1).join(""):s.slice(1);return A[i]()+S}}function nu(i){return function(s){return $s(Ph(Mh(s).replace(e1,"")),i,"")}}function Hu(i){return function(){var s=arguments;switch(s.length){case 0:return new i;case 1:return new i(s[0]);case 2:return new i(s[0],s[1]);case 3:return new i(s[0],s[1],s[2]);case 4:return new i(s[0],s[1],s[2],s[3]);case 5:return new i(s[0],s[1],s[2],s[3],s[4]);case 6:return new i(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new i(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var v=tu(i.prototype),A=i.apply(v,s);return $t(A)?A:v}}function cg(i,s,v){var A=Hu(i);function S(){for(var T=arguments.length,U=ae(T),G=T,ee=iu(S);G--;)U[G]=arguments[G];var pe=T<3&&U[0]!==ee&&U[T-1]!==ee?[]:ci(U,ee);if(T-=pe.length,T<v)return Lc(i,s,Sa,S.placeholder,r,U,pe,r,r,v-T);var ge=this&&this!==wr&&this instanceof S?A:i;return Kr(ge,this,U)}return S}function Ic(i){return function(s,v,A){var S=It(s);if(!Vr(s)){var T=Ge(v,3);s=_r(s),v=function(G){return T(S[G],G,S)}}var U=i(s,v,A);return U>-1?S[T?s[U]:U]:r}}function Nc(i){return Jn(function(s){var v=s.length,A=v,S=ln.prototype.thru;for(i&&s.reverse();A--;){var T=s[A];if(typeof T!="function")throw new on(l);if(S&&!U&&Pa(T)=="wrapper")var U=new ln([],!0)}for(A=U?A:v;++A<v;){T=s[A];var G=Pa(T),ee=G=="wrapper"?Po(T):r;ee&&No(ee[0])&&ee[1]==(P|w|F|I)&&!ee[4].length&&ee[9]==1?U=U[Pa(ee[0])].apply(U,ee[3]):U=T.length==1&&No(T)?U[G]():U.thru(T)}return function(){var pe=arguments,ge=pe[0];if(U&&pe.length==1&&ut(ge))return U.plant(ge).value();for(var De=0,Be=v?s[De].apply(this,pe):ge;++De<v;)Be=s[De].call(this,Be);return Be}})}function Sa(i,s,v,A,S,T,U,G,ee,pe){var ge=s&P,De=s&_,Be=s&b,Re=s&(w|B),Je=s&N,lt=Be?r:Hu(i);function Qe(){for(var ct=arguments.length,bt=ae(ct),Xr=ct;Xr--;)bt[Xr]=arguments[Xr];if(Re)var kr=iu(Qe),Jr=w1(bt,kr);if(A&&(bt=Oc(bt,A,S,Re)),T&&(bt=Mc(bt,T,U,Re)),ct-=Jr,Re&&ct<pe){var or=ci(bt,kr);return Lc(i,s,Sa,Qe.placeholder,v,bt,or,G,ee,pe-ct)}var Fn=De?v:this,ri=Be?Fn[i]:i;return ct=bt.length,G?bt=Pg(bt,G):Je&&ct>1&&bt.reverse(),ge&&ee<ct&&(bt.length=ee),this&&this!==wr&&this instanceof Qe&&(ri=lt||Hu(ri)),ri.apply(Fn,bt)}return Qe}function kc(i,s){return function(v,A){return Uv(v,i,s(A),{})}}function Ba(i,s){return function(v,A){var S;if(v===r&&A===r)return s;if(v!==r&&(S=v),A!==r){if(S===r)return A;typeof v=="string"||typeof A=="string"?(v=Zr(v),A=Zr(A)):(v=yc(v),A=yc(A)),S=i(v,A)}return S}}function So(i){return Jn(function(s){return s=Yt(s,Yr(Ge())),ft(function(v){var A=this;return i(s,function(S){return Kr(S,A,v)})})})}function Oa(i,s){s=s===r?" ":Zr(s);var v=s.length;if(v<2)return v?bo(s,i):s;var A=bo(s,va(i/$i(s)));return Zi(s)?gi(wn(A),0,i).join(""):A.slice(0,i)}function hg(i,s,v,A){var S=s&_,T=Hu(i);function U(){for(var G=-1,ee=arguments.length,pe=-1,ge=A.length,De=ae(ge+ee),Be=this&&this!==wr&&this instanceof U?T:i;++pe<ge;)De[pe]=A[pe];for(;ee--;)De[pe++]=arguments[++G];return Kr(Be,S?v:this,De)}return U}function Rc(i){return function(s,v,A){return A&&typeof A!="number"&&Nr(s,v,A)&&(v=A=r),s=ti(s),v===r?(v=s,s=0):v=ti(v),A=A===r?s<v?1:-1:ti(A),Xv(s,v,A,i)}}function Ma(i){return function(s,v){return typeof s=="string"&&typeof v=="string"||(s=dn(s),v=dn(v)),i(s,v)}}function Lc(i,s,v,A,S,T,U,G,ee,pe){var ge=s&w,De=ge?U:r,Be=ge?r:U,Re=ge?T:r,Je=ge?r:T;s|=ge?F:O,s&=~(ge?O:F),s&C||(s&=~(_|b));var lt=[i,s,S,Re,De,Je,Be,G,ee,pe],Qe=v.apply(r,lt);return No(i)&&$c(Qe,lt),Qe.placeholder=A,Xc(Qe,i,s)}function Bo(i){var s=dr[i];return function(v,A){if(v=dn(v),A=A==null?0:Or(ot(A),292),A&&Xf(v)){var S=(Ct(v)+"e").split("e"),T=s(S[0]+"e"+(+S[1]+A));return S=(Ct(T)+"e").split("e"),+(S[0]+"e"+(+S[1]-A))}return s(v)}}var dg=Qi&&1/ua(new Qi([,-0]))[1]==re?function(i){return new Qi(i)}:$o;function Uc(i){return function(s){var v=Mr(s);return v==He?no(s):v==it?M1(s):A1(s,i(s))}}function Xn(i,s,v,A,S,T,U,G){var ee=s&b;if(!ee&&typeof i!="function")throw new on(l);var pe=A?A.length:0;if(pe||(s&=~(F|O),A=S=r),U=U===r?U:pr(ot(U),0),G=G===r?G:ot(G),pe-=S?S.length:0,s&O){var ge=A,De=S;A=S=r}var Be=ee?r:Po(i),Re=[i,s,v,A,S,ge,De,T,U,G];if(Be&&Bg(Re,Be),i=Re[0],s=Re[1],v=Re[2],A=Re[3],S=Re[4],G=Re[9]=Re[9]===r?ee?0:i.length:pr(Re[9]-pe,0),!G&&s&(w|B)&&(s&=~(w|B)),!s||s==_)var Je=fg(i,s,v);else s==w||s==B?Je=cg(i,s,G):(s==F||s==(_|F))&&!S.length?Je=hg(i,s,v,A):Je=Sa.apply(r,Re);var lt=Be?Dc:$c;return Xc(lt(Je,Re),i,s)}function Vc(i,s,v,A){return i===r||Cn(i,Ji[v])&&!Ot.call(A,v)?s:i}function jc(i,s,v,A,S,T){return $t(i)&&$t(s)&&(T.set(s,i),wa(i,s,r,jc,T),T.delete(s)),i}function pg(i){return Yu(i)?r:i}function qc(i,s,v,A,S,T){var U=v&y,G=i.length,ee=s.length;if(G!=ee&&!(U&&ee>G))return!1;var pe=T.get(i),ge=T.get(s);if(pe&&ge)return pe==s&&ge==i;var De=-1,Be=!0,Re=v&g?new ki:r;for(T.set(i,s),T.set(s,i);++De<G;){var Je=i[De],lt=s[De];if(A)var Qe=U?A(lt,Je,De,s,i,T):A(Je,lt,De,i,s,T);if(Qe!==r){if(Qe)continue;Be=!1;break}if(Re){if(!Xs(s,function(ct,bt){if(!Iu(Re,bt)&&(Je===ct||S(Je,ct,v,A,T)))return Re.push(bt)})){Be=!1;break}}else if(!(Je===lt||S(Je,lt,v,A,T))){Be=!1;break}}return T.delete(i),T.delete(s),Be}function vg(i,s,v,A,S,T,U){switch(v){case de:if(i.byteLength!=s.byteLength||i.byteOffset!=s.byteOffset)return!1;i=i.buffer,s=s.buffer;case ne:return!(i.byteLength!=s.byteLength||!T(new ca(i),new ca(s)));case We:case Me:case yt:return Cn(+i,+s);case at:return i.name==s.name&&i.message==s.message;case ke:case _t:return i==s+"";case He:var G=no;case it:var ee=A&y;if(G||(G=ua),i.size!=s.size&&!ee)return!1;var pe=U.get(i);if(pe)return pe==s;A|=g,U.set(i,s);var ge=qc(G(i),G(s),A,S,T,U);return U.delete(i),ge;case L:if(Uu)return Uu.call(i)==Uu.call(s)}return!1}function gg(i,s,v,A,S,T){var U=v&y,G=Oo(i),ee=G.length,pe=Oo(s),ge=pe.length;if(ee!=ge&&!U)return!1;for(var De=ee;De--;){var Be=G[De];if(!(U?Be in s:Ot.call(s,Be)))return!1}var Re=T.get(i),Je=T.get(s);if(Re&&Je)return Re==s&&Je==i;var lt=!0;T.set(i,s),T.set(s,i);for(var Qe=U;++De<ee;){Be=G[De];var ct=i[Be],bt=s[Be];if(A)var Xr=U?A(bt,ct,Be,s,i,T):A(ct,bt,Be,i,s,T);if(!(Xr===r?ct===bt||S(ct,bt,v,A,T):Xr)){lt=!1;break}Qe||(Qe=Be=="constructor")}if(lt&&!Qe){var kr=i.constructor,Jr=s.constructor;kr!=Jr&&"constructor"in i&&"constructor"in s&&!(typeof kr=="function"&&kr instanceof kr&&typeof Jr=="function"&&Jr instanceof Jr)&&(lt=!1)}return T.delete(i),T.delete(s),lt}function Jn(i){return Ro(Yc(i,r,nh),i+"")}function Oo(i){return oc(i,_r,To)}function Mo(i){return oc(i,jr,zc)}var Po=ma?function(i){return ma.get(i)}:$o;function Pa(i){for(var s=i.name+"",v=eu[s],A=Ot.call(eu,s)?v.length:0;A--;){var S=v[A],T=S.func;if(T==null||T==i)return S.name}return s}function iu(i){var s=Ot.call(M,"placeholder")?M:i;return s.placeholder}function Ge(){var i=M.iteratee||Yo;return i=i===Yo?cc:i,arguments.length?i(arguments[0],arguments[1]):i}function xa(i,s){var v=i.__data__;return Eg(s)?v[typeof s=="string"?"string":"hash"]:v.map}function xo(i){for(var s=_r(i),v=s.length;v--;){var A=s[v],S=i[A];s[v]=[A,S,Gc(S)]}return s}function Ui(i,s){var v=S1(i,s);return fc(v)?v:r}function mg(i){var s=Ot.call(i,Ii),v=i[Ii];try{i[Ii]=r;var A=!0}catch{}var S=la.call(i);return A&&(s?i[Ii]=v:delete i[Ii]),S}var To=uo?function(i){return i==null?[]:(i=It(i),li(uo(i),function(s){return Zf.call(i,s)}))}:Xo,zc=uo?function(i){for(var s=[];i;)fi(s,To(i)),i=ha(i);return s}:Xo,Mr=Ir;(ao&&Mr(new ao(new ArrayBuffer(1)))!=de||ku&&Mr(new ku)!=He||so&&Mr(so.resolve())!=we||Qi&&Mr(new Qi)!=it||Ru&&Mr(new Ru)!=Z)&&(Mr=function(i){var s=Ir(i),v=s==At?i.constructor:r,A=v?Vi(v):"";if(A)switch(A){case Q1:return de;case ev:return He;case tv:return we;case rv:return it;case nv:return Z}return s});function _g(i,s,v){for(var A=-1,S=v.length;++A<S;){var T=v[A],U=T.size;switch(T.type){case"drop":i+=U;break;case"dropRight":s-=U;break;case"take":s=Or(s,i+U);break;case"takeRight":i=pr(i,s-U);break}}return{start:i,end:s}}function Dg(i){var s=i.match(ai);return s?s[1].split(nn):[]}function Wc(i,s,v){s=vi(s,i);for(var A=-1,S=s.length,T=!1;++A<S;){var U=Un(s[A]);if(!(T=i!=null&&v(i,U)))break;i=i[U]}return T||++A!=S?T:(S=i==null?0:i.length,!!S&&Ua(S)&&Qn(U,S)&&(ut(i)||ji(i)))}function bg(i){var s=i.length,v=new i.constructor(s);return s&&typeof i[0]=="string"&&Ot.call(i,"index")&&(v.index=i.index,v.input=i.input),v}function Hc(i){return typeof i.constructor=="function"&&!Gu(i)?tu(ha(i)):{}}function yg(i,s,v){var A=i.constructor;switch(s){case ne:return Fo(i);case We:case Me:return new A(+i);case de:return ig(i,v);case ue:case fe:case ye:case Oe:case je:case Ee:case Vt:case Bt:case Ht:return Sc(i,v);case He:return new A;case yt:case _t:return new A(i);case ke:return ug(i);case it:return new A;case L:return ag(i)}}function Ag(i,s){var v=s.length;if(!v)return i;var A=v-1;return s[A]=(v>1?"& ":"")+s[A],s=s.join(v>2?", ":" "),i.replace(bu,`{
/* [wrapped with `+s+`] */
`)}function wg(i){return ut(i)||ji(i)||!!($f&&i&&i[$f])}function Qn(i,s){var v=typeof i;return s=s??Q,!!s&&(v=="number"||v!="symbol"&&Su.test(i))&&i>-1&&i%1==0&&i<s}function Nr(i,s,v){if(!$t(v))return!1;var A=typeof s;return(A=="number"?Vr(v)&&Qn(s,v.length):A=="string"&&s in v)?Cn(v[s],i):!1}function Io(i,s){if(ut(i))return!1;var v=typeof i;return v=="number"||v=="symbol"||v=="boolean"||i==null||$r(i)?!0:In.test(i)||!Tn.test(i)||s!=null&&i in It(s)}function Eg(i){var s=typeof i;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?i!=="__proto__":i===null}function No(i){var s=Pa(i),v=M[s];if(typeof v!="function"||!(s in gt.prototype))return!1;if(i===v)return!0;var A=Po(v);return!!A&&i===A[0]}function Cg(i){return!!Gf&&Gf in i}var Fg=sa?ei:Jo;function Gu(i){var s=i&&i.constructor,v=typeof s=="function"&&s.prototype||Ji;return i===v}function Gc(i){return i===i&&!$t(i)}function Kc(i,s){return function(v){return v==null?!1:v[i]===s&&(s!==r||i in It(v))}}function Sg(i){var s=Ra(i,function(A){return v.size===p&&v.clear(),A}),v=s.cache;return s}function Bg(i,s){var v=i[1],A=s[1],S=v|A,T=S<(_|b|P),U=A==P&&v==w||A==P&&v==I&&i[7].length<=s[8]||A==(P|I)&&s[7].length<=s[8]&&v==w;if(!(T||U))return i;A&_&&(i[2]=s[2],S|=v&_?0:C);var G=s[3];if(G){var ee=i[3];i[3]=ee?Oc(ee,G,s[4]):G,i[4]=ee?ci(i[3],f):s[4]}return G=s[5],G&&(ee=i[5],i[5]=ee?Mc(ee,G,s[6]):G,i[6]=ee?ci(i[5],f):s[6]),G=s[7],G&&(i[7]=G),A&P&&(i[8]=i[8]==null?s[8]:Or(i[8],s[8])),i[9]==null&&(i[9]=s[9]),i[0]=s[0],i[1]=S,i}function Og(i){var s=[];if(i!=null)for(var v in It(i))s.push(v);return s}function Mg(i){return la.call(i)}function Yc(i,s,v){return s=pr(s===r?i.length-1:s,0),function(){for(var A=arguments,S=-1,T=pr(A.length-s,0),U=ae(T);++S<T;)U[S]=A[s+S];S=-1;for(var G=ae(s+1);++S<s;)G[S]=A[S];return G[s]=v(U),Kr(i,this,G)}}function Zc(i,s){return s.length<2?i:Li(i,cn(s,0,-1))}function Pg(i,s){for(var v=i.length,A=Or(s.length,v),S=Ur(i);A--;){var T=s[A];i[A]=Qn(T,v)?S[T]:r}return i}function ko(i,s){if(!(s==="constructor"&&typeof i[s]=="function")&&s!="__proto__")return i[s]}var $c=Jc(Dc),Ku=G1||function(i,s){return wr.setTimeout(i,s)},Ro=Jc(eg);function Xc(i,s,v){var A=s+"";return Ro(i,Ag(A,xg(Dg(A),v)))}function Jc(i){var s=0,v=0;return function(){var A=$1(),S=J-(A-v);if(v=A,S>0){if(++s>=q)return arguments[0]}else s=0;return i.apply(r,arguments)}}function Ta(i,s){var v=-1,A=i.length,S=A-1;for(s=s===r?A:s;++v<s;){var T=Do(v,S),U=i[T];i[T]=i[v],i[v]=U}return i.length=s,i}var Qc=Sg(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(Wi,function(v,A,S,T){s.push(S?T.replace(yu,"$1"):A||v)}),s});function Un(i){if(typeof i=="string"||$r(i))return i;var s=i+"";return s=="0"&&1/i==-re?"-0":s}function Vi(i){if(i!=null){try{return oa.call(i)}catch{}try{return i+""}catch{}}return""}function xg(i,s){return sn(Ie,function(v){var A="_."+v[0];s&v[1]&&!na(i,A)&&i.push(A)}),i.sort()}function eh(i){if(i instanceof gt)return i.clone();var s=new ln(i.__wrapped__,i.__chain__);return s.__actions__=Ur(i.__actions__),s.__index__=i.__index__,s.__values__=i.__values__,s}function Tg(i,s,v){(v?Nr(i,s,v):s===r)?s=1:s=pr(ot(s),0);var A=i==null?0:i.length;if(!A||s<1)return[];for(var S=0,T=0,U=ae(va(A/s));S<A;)U[T++]=cn(i,S,S+=s);return U}function Ig(i){for(var s=-1,v=i==null?0:i.length,A=0,S=[];++s<v;){var T=i[s];T&&(S[A++]=T)}return S}function Ng(){var i=arguments.length;if(!i)return[];for(var s=ae(i-1),v=arguments[0],A=i;A--;)s[A-1]=arguments[A];return fi(ut(v)?Ur(v):[v],Er(s,1))}var kg=ft(function(i,s){return sr(i)?ju(i,Er(s,1,sr,!0)):[]}),Rg=ft(function(i,s){var v=hn(s);return sr(v)&&(v=r),sr(i)?ju(i,Er(s,1,sr,!0),Ge(v,2)):[]}),Lg=ft(function(i,s){var v=hn(s);return sr(v)&&(v=r),sr(i)?ju(i,Er(s,1,sr,!0),r,v):[]});function Ug(i,s,v){var A=i==null?0:i.length;return A?(s=v||s===r?1:ot(s),cn(i,s<0?0:s,A)):[]}function Vg(i,s,v){var A=i==null?0:i.length;return A?(s=v||s===r?1:ot(s),s=A-s,cn(i,0,s<0?0:s)):[]}function jg(i,s){return i&&i.length?Ca(i,Ge(s,3),!0,!0):[]}function qg(i,s){return i&&i.length?Ca(i,Ge(s,3),!0):[]}function zg(i,s,v,A){var S=i==null?0:i.length;return S?(v&&typeof v!="number"&&Nr(i,s,v)&&(v=0,A=S),Nv(i,s,v,A)):[]}function th(i,s,v){var A=i==null?0:i.length;if(!A)return-1;var S=v==null?0:ot(v);return S<0&&(S=pr(A+S,0)),ia(i,Ge(s,3),S)}function rh(i,s,v){var A=i==null?0:i.length;if(!A)return-1;var S=A-1;return v!==r&&(S=ot(v),S=v<0?pr(A+S,0):Or(S,A-1)),ia(i,Ge(s,3),S,!0)}function nh(i){var s=i==null?0:i.length;return s?Er(i,1):[]}function Wg(i){var s=i==null?0:i.length;return s?Er(i,re):[]}function Hg(i,s){var v=i==null?0:i.length;return v?(s=s===r?1:ot(s),Er(i,s)):[]}function Gg(i){for(var s=-1,v=i==null?0:i.length,A={};++s<v;){var S=i[s];A[S[0]]=S[1]}return A}function ih(i){return i&&i.length?i[0]:r}function Kg(i,s,v){var A=i==null?0:i.length;if(!A)return-1;var S=v==null?0:ot(v);return S<0&&(S=pr(A+S,0)),Yi(i,s,S)}function Yg(i){var s=i==null?0:i.length;return s?cn(i,0,-1):[]}var Zg=ft(function(i){var s=Yt(i,Eo);return s.length&&s[0]===i[0]?po(s):[]}),$g=ft(function(i){var s=hn(i),v=Yt(i,Eo);return s===hn(v)?s=r:v.pop(),v.length&&v[0]===i[0]?po(v,Ge(s,2)):[]}),Xg=ft(function(i){var s=hn(i),v=Yt(i,Eo);return s=typeof s=="function"?s:r,s&&v.pop(),v.length&&v[0]===i[0]?po(v,r,s):[]});function Jg(i,s){return i==null?"":Y1.call(i,s)}function hn(i){var s=i==null?0:i.length;return s?i[s-1]:r}function Qg(i,s,v){var A=i==null?0:i.length;if(!A)return-1;var S=A;return v!==r&&(S=ot(v),S=S<0?pr(A+S,0):Or(S,A-1)),s===s?x1(i,s,S):ia(i,Lf,S,!0)}function em(i,s){return i&&i.length?vc(i,ot(s)):r}var tm=ft(uh);function uh(i,s){return i&&i.length&&s&&s.length?_o(i,s):i}function rm(i,s,v){return i&&i.length&&s&&s.length?_o(i,s,Ge(v,2)):i}function nm(i,s,v){return i&&i.length&&s&&s.length?_o(i,s,r,v):i}var im=Jn(function(i,s){var v=i==null?0:i.length,A=lo(i,s);return _c(i,Yt(s,function(S){return Qn(S,v)?+S:S}).sort(Bc)),A});function um(i,s){var v=[];if(!(i&&i.length))return v;var A=-1,S=[],T=i.length;for(s=Ge(s,3);++A<T;){var U=i[A];s(U,A,i)&&(v.push(U),S.push(A))}return _c(i,S),v}function Lo(i){return i==null?i:J1.call(i)}function am(i,s,v){var A=i==null?0:i.length;return A?(v&&typeof v!="number"&&Nr(i,s,v)?(s=0,v=A):(s=s==null?0:ot(s),v=v===r?A:ot(v)),cn(i,s,v)):[]}function sm(i,s){return Ea(i,s)}function om(i,s,v){return yo(i,s,Ge(v,2))}function lm(i,s){var v=i==null?0:i.length;if(v){var A=Ea(i,s);if(A<v&&Cn(i[A],s))return A}return-1}function fm(i,s){return Ea(i,s,!0)}function cm(i,s,v){return yo(i,s,Ge(v,2),!0)}function hm(i,s){var v=i==null?0:i.length;if(v){var A=Ea(i,s,!0)-1;if(Cn(i[A],s))return A}return-1}function dm(i){return i&&i.length?bc(i):[]}function pm(i,s){return i&&i.length?bc(i,Ge(s,2)):[]}function vm(i){var s=i==null?0:i.length;return s?cn(i,1,s):[]}function gm(i,s,v){return i&&i.length?(s=v||s===r?1:ot(s),cn(i,0,s<0?0:s)):[]}function mm(i,s,v){var A=i==null?0:i.length;return A?(s=v||s===r?1:ot(s),s=A-s,cn(i,s<0?0:s,A)):[]}function _m(i,s){return i&&i.length?Ca(i,Ge(s,3),!1,!0):[]}function Dm(i,s){return i&&i.length?Ca(i,Ge(s,3)):[]}var bm=ft(function(i){return pi(Er(i,1,sr,!0))}),ym=ft(function(i){var s=hn(i);return sr(s)&&(s=r),pi(Er(i,1,sr,!0),Ge(s,2))}),Am=ft(function(i){var s=hn(i);return s=typeof s=="function"?s:r,pi(Er(i,1,sr,!0),r,s)});function wm(i){return i&&i.length?pi(i):[]}function Em(i,s){return i&&i.length?pi(i,Ge(s,2)):[]}function Cm(i,s){return s=typeof s=="function"?s:r,i&&i.length?pi(i,r,s):[]}function Uo(i){if(!(i&&i.length))return[];var s=0;return i=li(i,function(v){if(sr(v))return s=pr(v.length,s),!0}),to(s,function(v){return Yt(i,Js(v))})}function ah(i,s){if(!(i&&i.length))return[];var v=Uo(i);return s==null?v:Yt(v,function(A){return Kr(s,r,A)})}var Fm=ft(function(i,s){return sr(i)?ju(i,s):[]}),Sm=ft(function(i){return wo(li(i,sr))}),Bm=ft(function(i){var s=hn(i);return sr(s)&&(s=r),wo(li(i,sr),Ge(s,2))}),Om=ft(function(i){var s=hn(i);return s=typeof s=="function"?s:r,wo(li(i,sr),r,s)}),Mm=ft(Uo);function Pm(i,s){return Ec(i||[],s||[],Vu)}function xm(i,s){return Ec(i||[],s||[],Wu)}var Tm=ft(function(i){var s=i.length,v=s>1?i[s-1]:r;return v=typeof v=="function"?(i.pop(),v):r,ah(i,v)});function sh(i){var s=M(i);return s.__chain__=!0,s}function Im(i,s){return s(i),i}function Ia(i,s){return s(i)}var Nm=Jn(function(i){var s=i.length,v=s?i[0]:0,A=this.__wrapped__,S=function(T){return lo(T,i)};return s>1||this.__actions__.length||!(A instanceof gt)||!Qn(v)?this.thru(S):(A=A.slice(v,+v+(s?1:0)),A.__actions__.push({func:Ia,args:[S],thisArg:r}),new ln(A,this.__chain__).thru(function(T){return s&&!T.length&&T.push(r),T}))});function km(){return sh(this)}function Rm(){return new ln(this.value(),this.__chain__)}function Lm(){this.__values__===r&&(this.__values__=yh(this.value()));var i=this.__index__>=this.__values__.length,s=i?r:this.__values__[this.__index__++];return{done:i,value:s}}function Um(){return this}function Vm(i){for(var s,v=this;v instanceof Da;){var A=eh(v);A.__index__=0,A.__values__=r,s?S.__wrapped__=A:s=A;var S=A;v=v.__wrapped__}return S.__wrapped__=i,s}function jm(){var i=this.__wrapped__;if(i instanceof gt){var s=i;return this.__actions__.length&&(s=new gt(this)),s=s.reverse(),s.__actions__.push({func:Ia,args:[Lo],thisArg:r}),new ln(s,this.__chain__)}return this.thru(Lo)}function qm(){return wc(this.__wrapped__,this.__actions__)}var zm=Fa(function(i,s,v){Ot.call(i,v)?++i[v]:$n(i,v,1)});function Wm(i,s,v){var A=ut(i)?kf:Iv;return v&&Nr(i,s,v)&&(s=r),A(i,Ge(s,3))}function Hm(i,s){var v=ut(i)?li:ac;return v(i,Ge(s,3))}var Gm=Ic(th),Km=Ic(rh);function Ym(i,s){return Er(Na(i,s),1)}function Zm(i,s){return Er(Na(i,s),re)}function $m(i,s,v){return v=v===r?1:ot(v),Er(Na(i,s),v)}function oh(i,s){var v=ut(i)?sn:di;return v(i,Ge(s,3))}function lh(i,s){var v=ut(i)?v1:uc;return v(i,Ge(s,3))}var Xm=Fa(function(i,s,v){Ot.call(i,v)?i[v].push(s):$n(i,v,[s])});function Jm(i,s,v,A){i=Vr(i)?i:au(i),v=v&&!A?ot(v):0;var S=i.length;return v<0&&(v=pr(S+v,0)),Va(i)?v<=S&&i.indexOf(s,v)>-1:!!S&&Yi(i,s,v)>-1}var Qm=ft(function(i,s,v){var A=-1,S=typeof s=="function",T=Vr(i)?ae(i.length):[];return di(i,function(U){T[++A]=S?Kr(s,U,v):qu(U,s,v)}),T}),e_=Fa(function(i,s,v){$n(i,v,s)});function Na(i,s){var v=ut(i)?Yt:hc;return v(i,Ge(s,3))}function t_(i,s,v,A){return i==null?[]:(ut(s)||(s=s==null?[]:[s]),v=A?r:v,ut(v)||(v=v==null?[]:[v]),gc(i,s,v))}var r_=Fa(function(i,s,v){i[v?0:1].push(s)},function(){return[[],[]]});function n_(i,s,v){var A=ut(i)?$s:Vf,S=arguments.length<3;return A(i,Ge(s,4),v,S,di)}function i_(i,s,v){var A=ut(i)?g1:Vf,S=arguments.length<3;return A(i,Ge(s,4),v,S,uc)}function u_(i,s){var v=ut(i)?li:ac;return v(i,La(Ge(s,3)))}function a_(i){var s=ut(i)?tc:Jv;return s(i)}function s_(i,s,v){(v?Nr(i,s,v):s===r)?s=1:s=ot(s);var A=ut(i)?Ov:Qv;return A(i,s)}function o_(i){var s=ut(i)?Mv:tg;return s(i)}function l_(i){if(i==null)return 0;if(Vr(i))return Va(i)?$i(i):i.length;var s=Mr(i);return s==He||s==it?i.size:go(i).length}function f_(i,s,v){var A=ut(i)?Xs:rg;return v&&Nr(i,s,v)&&(s=r),A(i,Ge(s,3))}var c_=ft(function(i,s){if(i==null)return[];var v=s.length;return v>1&&Nr(i,s[0],s[1])?s=[]:v>2&&Nr(s[0],s[1],s[2])&&(s=[s[0]]),gc(i,Er(s,1),[])}),ka=H1||function(){return wr.Date.now()};function h_(i,s){if(typeof s!="function")throw new on(l);return i=ot(i),function(){if(--i<1)return s.apply(this,arguments)}}function fh(i,s,v){return s=v?r:s,s=i&&s==null?i.length:s,Xn(i,P,r,r,r,r,s)}function ch(i,s){var v;if(typeof s!="function")throw new on(l);return i=ot(i),function(){return--i>0&&(v=s.apply(this,arguments)),i<=1&&(s=r),v}}var Vo=ft(function(i,s,v){var A=_;if(v.length){var S=ci(v,iu(Vo));A|=F}return Xn(i,A,s,v,S)}),hh=ft(function(i,s,v){var A=_|b;if(v.length){var S=ci(v,iu(hh));A|=F}return Xn(s,A,i,v,S)});function dh(i,s,v){s=v?r:s;var A=Xn(i,w,r,r,r,r,r,s);return A.placeholder=dh.placeholder,A}function ph(i,s,v){s=v?r:s;var A=Xn(i,B,r,r,r,r,r,s);return A.placeholder=ph.placeholder,A}function vh(i,s,v){var A,S,T,U,G,ee,pe=0,ge=!1,De=!1,Be=!0;if(typeof i!="function")throw new on(l);s=dn(s)||0,$t(v)&&(ge=!!v.leading,De="maxWait"in v,T=De?pr(dn(v.maxWait)||0,s):T,Be="trailing"in v?!!v.trailing:Be);function Re(or){var Fn=A,ri=S;return A=S=r,pe=or,U=i.apply(ri,Fn),U}function Je(or){return pe=or,G=Ku(ct,s),ge?Re(or):U}function lt(or){var Fn=or-ee,ri=or-pe,Ih=s-Fn;return De?Or(Ih,T-ri):Ih}function Qe(or){var Fn=or-ee,ri=or-pe;return ee===r||Fn>=s||Fn<0||De&&ri>=T}function ct(){var or=ka();if(Qe(or))return bt(or);G=Ku(ct,lt(or))}function bt(or){return G=r,Be&&A?Re(or):(A=S=r,U)}function Xr(){G!==r&&Cc(G),pe=0,A=ee=S=G=r}function kr(){return G===r?U:bt(ka())}function Jr(){var or=ka(),Fn=Qe(or);if(A=arguments,S=this,ee=or,Fn){if(G===r)return Je(ee);if(De)return Cc(G),G=Ku(ct,s),Re(ee)}return G===r&&(G=Ku(ct,s)),U}return Jr.cancel=Xr,Jr.flush=kr,Jr}var d_=ft(function(i,s){return ic(i,1,s)}),p_=ft(function(i,s,v){return ic(i,dn(s)||0,v)});function v_(i){return Xn(i,N)}function Ra(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new on(l);var v=function(){var A=arguments,S=s?s.apply(this,A):A[0],T=v.cache;if(T.has(S))return T.get(S);var U=i.apply(this,A);return v.cache=T.set(S,U)||T,U};return v.cache=new(Ra.Cache||Zn),v}Ra.Cache=Zn;function La(i){if(typeof i!="function")throw new on(l);return function(){var s=arguments;switch(s.length){case 0:return!i.call(this);case 1:return!i.call(this,s[0]);case 2:return!i.call(this,s[0],s[1]);case 3:return!i.call(this,s[0],s[1],s[2])}return!i.apply(this,s)}}function g_(i){return ch(2,i)}var m_=ng(function(i,s){s=s.length==1&&ut(s[0])?Yt(s[0],Yr(Ge())):Yt(Er(s,1),Yr(Ge()));var v=s.length;return ft(function(A){for(var S=-1,T=Or(A.length,v);++S<T;)A[S]=s[S].call(this,A[S]);return Kr(i,this,A)})}),jo=ft(function(i,s){var v=ci(s,iu(jo));return Xn(i,F,r,s,v)}),gh=ft(function(i,s){var v=ci(s,iu(gh));return Xn(i,O,r,s,v)}),__=Jn(function(i,s){return Xn(i,I,r,r,r,s)});function D_(i,s){if(typeof i!="function")throw new on(l);return s=s===r?s:ot(s),ft(i,s)}function b_(i,s){if(typeof i!="function")throw new on(l);return s=s==null?0:pr(ot(s),0),ft(function(v){var A=v[s],S=gi(v,0,s);return A&&fi(S,A),Kr(i,this,S)})}function y_(i,s,v){var A=!0,S=!0;if(typeof i!="function")throw new on(l);return $t(v)&&(A="leading"in v?!!v.leading:A,S="trailing"in v?!!v.trailing:S),vh(i,s,{leading:A,maxWait:s,trailing:S})}function A_(i){return fh(i,1)}function w_(i,s){return jo(Co(s),i)}function E_(){if(!arguments.length)return[];var i=arguments[0];return ut(i)?i:[i]}function C_(i){return fn(i,m)}function F_(i,s){return s=typeof s=="function"?s:r,fn(i,m,s)}function S_(i){return fn(i,h|m)}function B_(i,s){return s=typeof s=="function"?s:r,fn(i,h|m,s)}function O_(i,s){return s==null||nc(i,s,_r(s))}function Cn(i,s){return i===s||i!==i&&s!==s}var M_=Ma(ho),P_=Ma(function(i,s){return i>=s}),ji=lc(function(){return arguments}())?lc:function(i){return rr(i)&&Ot.call(i,"callee")&&!Zf.call(i,"callee")},ut=ae.isArray,x_=Mf?Yr(Mf):Vv;function Vr(i){return i!=null&&Ua(i.length)&&!ei(i)}function sr(i){return rr(i)&&Vr(i)}function T_(i){return i===!0||i===!1||rr(i)&&Ir(i)==We}var mi=K1||Jo,I_=Pf?Yr(Pf):jv;function N_(i){return rr(i)&&i.nodeType===1&&!Yu(i)}function k_(i){if(i==null)return!0;if(Vr(i)&&(ut(i)||typeof i=="string"||typeof i.splice=="function"||mi(i)||uu(i)||ji(i)))return!i.length;var s=Mr(i);if(s==He||s==it)return!i.size;if(Gu(i))return!go(i).length;for(var v in i)if(Ot.call(i,v))return!1;return!0}function R_(i,s){return zu(i,s)}function L_(i,s,v){v=typeof v=="function"?v:r;var A=v?v(i,s):r;return A===r?zu(i,s,r,v):!!A}function qo(i){if(!rr(i))return!1;var s=Ir(i);return s==at||s==qe||typeof i.message=="string"&&typeof i.name=="string"&&!Yu(i)}function U_(i){return typeof i=="number"&&Xf(i)}function ei(i){if(!$t(i))return!1;var s=Ir(i);return s==mt||s==et||s==tt||s==be}function mh(i){return typeof i=="number"&&i==ot(i)}function Ua(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=Q}function $t(i){var s=typeof i;return i!=null&&(s=="object"||s=="function")}function rr(i){return i!=null&&typeof i=="object"}var _h=xf?Yr(xf):zv;function V_(i,s){return i===s||vo(i,s,xo(s))}function j_(i,s,v){return v=typeof v=="function"?v:r,vo(i,s,xo(s),v)}function q_(i){return Dh(i)&&i!=+i}function z_(i){if(Fg(i))throw new nt(a);return fc(i)}function W_(i){return i===null}function H_(i){return i==null}function Dh(i){return typeof i=="number"||rr(i)&&Ir(i)==yt}function Yu(i){if(!rr(i)||Ir(i)!=At)return!1;var s=ha(i);if(s===null)return!0;var v=Ot.call(s,"constructor")&&s.constructor;return typeof v=="function"&&v instanceof v&&oa.call(v)==j1}var zo=Tf?Yr(Tf):Wv;function G_(i){return mh(i)&&i>=-Q&&i<=Q}var bh=If?Yr(If):Hv;function Va(i){return typeof i=="string"||!ut(i)&&rr(i)&&Ir(i)==_t}function $r(i){return typeof i=="symbol"||rr(i)&&Ir(i)==L}var uu=Nf?Yr(Nf):Gv;function K_(i){return i===r}function Y_(i){return rr(i)&&Mr(i)==Z}function Z_(i){return rr(i)&&Ir(i)==le}var $_=Ma(mo),X_=Ma(function(i,s){return i<=s});function yh(i){if(!i)return[];if(Vr(i))return Va(i)?wn(i):Ur(i);if(Nu&&i[Nu])return O1(i[Nu]());var s=Mr(i),v=s==He?no:s==it?ua:au;return v(i)}function ti(i){if(!i)return i===0?i:0;if(i=dn(i),i===re||i===-re){var s=i<0?-1:1;return s*te}return i===i?i:0}function ot(i){var s=ti(i),v=s%1;return s===s?v?s-v:s:0}function Ah(i){return i?Ri(ot(i),0,me):0}function dn(i){if(typeof i=="number")return i;if($r(i))return ve;if($t(i)){var s=typeof i.valueOf=="function"?i.valueOf():i;i=$t(s)?s+"":s}if(typeof i!="string")return i===0?i:+i;i=jf(i);var v=Eu.test(i);return v||Fu.test(i)?h1(i.slice(2),v?2:8):wu.test(i)?ve:+i}function wh(i){return Ln(i,jr(i))}function J_(i){return i?Ri(ot(i),-Q,Q):i===0?i:0}function Ct(i){return i==null?"":Zr(i)}var Q_=ru(function(i,s){if(Gu(s)||Vr(s)){Ln(s,_r(s),i);return}for(var v in s)Ot.call(s,v)&&Vu(i,v,s[v])}),Eh=ru(function(i,s){Ln(s,jr(s),i)}),ja=ru(function(i,s,v,A){Ln(s,jr(s),i,A)}),eD=ru(function(i,s,v,A){Ln(s,_r(s),i,A)}),tD=Jn(lo);function rD(i,s){var v=tu(i);return s==null?v:rc(v,s)}var nD=ft(function(i,s){i=It(i);var v=-1,A=s.length,S=A>2?s[2]:r;for(S&&Nr(s[0],s[1],S)&&(A=1);++v<A;)for(var T=s[v],U=jr(T),G=-1,ee=U.length;++G<ee;){var pe=U[G],ge=i[pe];(ge===r||Cn(ge,Ji[pe])&&!Ot.call(i,pe))&&(i[pe]=T[pe])}return i}),iD=ft(function(i){return i.push(r,jc),Kr(Ch,r,i)});function uD(i,s){return Rf(i,Ge(s,3),Rn)}function aD(i,s){return Rf(i,Ge(s,3),co)}function sD(i,s){return i==null?i:fo(i,Ge(s,3),jr)}function oD(i,s){return i==null?i:sc(i,Ge(s,3),jr)}function lD(i,s){return i&&Rn(i,Ge(s,3))}function fD(i,s){return i&&co(i,Ge(s,3))}function cD(i){return i==null?[]:Aa(i,_r(i))}function hD(i){return i==null?[]:Aa(i,jr(i))}function Wo(i,s,v){var A=i==null?r:Li(i,s);return A===r?v:A}function dD(i,s){return i!=null&&Wc(i,s,kv)}function Ho(i,s){return i!=null&&Wc(i,s,Rv)}var pD=kc(function(i,s,v){s!=null&&typeof s.toString!="function"&&(s=la.call(s)),i[s]=v},Ko(qr)),vD=kc(function(i,s,v){s!=null&&typeof s.toString!="function"&&(s=la.call(s)),Ot.call(i,s)?i[s].push(v):i[s]=[v]},Ge),gD=ft(qu);function _r(i){return Vr(i)?ec(i):go(i)}function jr(i){return Vr(i)?ec(i,!0):Kv(i)}function mD(i,s){var v={};return s=Ge(s,3),Rn(i,function(A,S,T){$n(v,s(A,S,T),A)}),v}function _D(i,s){var v={};return s=Ge(s,3),Rn(i,function(A,S,T){$n(v,S,s(A,S,T))}),v}var DD=ru(function(i,s,v){wa(i,s,v)}),Ch=ru(function(i,s,v,A){wa(i,s,v,A)}),bD=Jn(function(i,s){var v={};if(i==null)return v;var A=!1;s=Yt(s,function(T){return T=vi(T,i),A||(A=T.length>1),T}),Ln(i,Mo(i),v),A&&(v=fn(v,h|d|m,pg));for(var S=s.length;S--;)Ao(v,s[S]);return v});function yD(i,s){return Fh(i,La(Ge(s)))}var AD=Jn(function(i,s){return i==null?{}:Zv(i,s)});function Fh(i,s){if(i==null)return{};var v=Yt(Mo(i),function(A){return[A]});return s=Ge(s),mc(i,v,function(A,S){return s(A,S[0])})}function wD(i,s,v){s=vi(s,i);var A=-1,S=s.length;for(S||(S=1,i=r);++A<S;){var T=i==null?r:i[Un(s[A])];T===r&&(A=S,T=v),i=ei(T)?T.call(i):T}return i}function ED(i,s,v){return i==null?i:Wu(i,s,v)}function CD(i,s,v,A){return A=typeof A=="function"?A:r,i==null?i:Wu(i,s,v,A)}var Sh=Uc(_r),Bh=Uc(jr);function FD(i,s,v){var A=ut(i),S=A||mi(i)||uu(i);if(s=Ge(s,4),v==null){var T=i&&i.constructor;S?v=A?new T:[]:$t(i)?v=ei(T)?tu(ha(i)):{}:v={}}return(S?sn:Rn)(i,function(U,G,ee){return s(v,U,G,ee)}),v}function SD(i,s){return i==null?!0:Ao(i,s)}function BD(i,s,v){return i==null?i:Ac(i,s,Co(v))}function OD(i,s,v,A){return A=typeof A=="function"?A:r,i==null?i:Ac(i,s,Co(v),A)}function au(i){return i==null?[]:ro(i,_r(i))}function MD(i){return i==null?[]:ro(i,jr(i))}function PD(i,s,v){return v===r&&(v=s,s=r),v!==r&&(v=dn(v),v=v===v?v:0),s!==r&&(s=dn(s),s=s===s?s:0),Ri(dn(i),s,v)}function xD(i,s,v){return s=ti(s),v===r?(v=s,s=0):v=ti(v),i=dn(i),Lv(i,s,v)}function TD(i,s,v){if(v&&typeof v!="boolean"&&Nr(i,s,v)&&(s=v=r),v===r&&(typeof s=="boolean"?(v=s,s=r):typeof i=="boolean"&&(v=i,i=r)),i===r&&s===r?(i=0,s=1):(i=ti(i),s===r?(s=i,i=0):s=ti(s)),i>s){var A=i;i=s,s=A}if(v||i%1||s%1){var S=Jf();return Or(i+S*(s-i+c1("1e-"+((S+"").length-1))),s)}return Do(i,s)}var ID=nu(function(i,s,v){return s=s.toLowerCase(),i+(v?Oh(s):s)});function Oh(i){return Go(Ct(i).toLowerCase())}function Mh(i){return i=Ct(i),i&&i.replace(Bu,E1).replace(t1,"")}function ND(i,s,v){i=Ct(i),s=Zr(s);var A=i.length;v=v===r?A:Ri(ot(v),0,A);var S=v;return v-=s.length,v>=0&&i.slice(v,S)==s}function kD(i){return i=Ct(i),i&&rn.test(i)?i.replace(lr,C1):i}function RD(i){return i=Ct(i),i&&Du.test(i)?i.replace(Oi,"\\$&"):i}var LD=nu(function(i,s,v){return i+(v?"-":"")+s.toLowerCase()}),UD=nu(function(i,s,v){return i+(v?" ":"")+s.toLowerCase()}),VD=Tc("toLowerCase");function jD(i,s,v){i=Ct(i),s=ot(s);var A=s?$i(i):0;if(!s||A>=s)return i;var S=(s-A)/2;return Oa(ga(S),v)+i+Oa(va(S),v)}function qD(i,s,v){i=Ct(i),s=ot(s);var A=s?$i(i):0;return s&&A<s?i+Oa(s-A,v):i}function zD(i,s,v){i=Ct(i),s=ot(s);var A=s?$i(i):0;return s&&A<s?Oa(s-A,v)+i:i}function WD(i,s,v){return v||s==null?s=0:s&&(s=+s),X1(Ct(i).replace(Ar,""),s||0)}function HD(i,s,v){return(v?Nr(i,s,v):s===r)?s=1:s=ot(s),bo(Ct(i),s)}function GD(){var i=arguments,s=Ct(i[0]);return i.length<3?s:s.replace(i[1],i[2])}var KD=nu(function(i,s,v){return i+(v?"_":"")+s.toLowerCase()});function YD(i,s,v){return v&&typeof v!="number"&&Nr(i,s,v)&&(s=v=r),v=v===r?me:v>>>0,v?(i=Ct(i),i&&(typeof s=="string"||s!=null&&!zo(s))&&(s=Zr(s),!s&&Zi(i))?gi(wn(i),0,v):i.split(s,v)):[]}var ZD=nu(function(i,s,v){return i+(v?" ":"")+Go(s)});function $D(i,s,v){return i=Ct(i),v=v==null?0:Ri(ot(v),0,i.length),s=Zr(s),i.slice(v,v+s.length)==s}function XD(i,s,v){var A=M.templateSettings;v&&Nr(i,s,v)&&(s=r),i=Ct(i),s=ja({},s,A,Vc);var S=ja({},s.imports,A.imports,Vc),T=_r(S),U=ro(S,T),G,ee,pe=0,ge=s.interpolate||si,De="__p += '",Be=io((s.escape||si).source+"|"+ge.source+"|"+(ge===Hn?Au:si).source+"|"+(s.evaluate||si).source+"|$","g"),Re="//# sourceURL="+(Ot.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++a1+"]")+`
`;i.replace(Be,function(Qe,ct,bt,Xr,kr,Jr){return bt||(bt=Xr),De+=i.slice(pe,Jr).replace(Ou,F1),ct&&(G=!0,De+=`' +
__e(`+ct+`) +
'`),kr&&(ee=!0,De+=`';
`+kr+`;
__p += '`),bt&&(De+=`' +
((__t = (`+bt+`)) == null ? '' : __t) +
'`),pe=Jr+Qe.length,Qe}),De+=`';
`;var Je=Ot.call(s,"variable")&&s.variable;if(!Je)De=`with (obj) {
`+De+`
}
`;else if(Mi.test(Je))throw new nt(o);De=(ee?De.replace(jt,""):De).replace(ir,"$1").replace(qt,"$1;"),De="function("+(Je||"obj")+`) {
`+(Je?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(G?", __e = _.escape":"")+(ee?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+De+`return __p
}`;var lt=xh(function(){return wt(T,Re+"return "+De).apply(r,U)});if(lt.source=De,qo(lt))throw lt;return lt}function JD(i){return Ct(i).toLowerCase()}function QD(i){return Ct(i).toUpperCase()}function eb(i,s,v){if(i=Ct(i),i&&(v||s===r))return jf(i);if(!i||!(s=Zr(s)))return i;var A=wn(i),S=wn(s),T=qf(A,S),U=zf(A,S)+1;return gi(A,T,U).join("")}function tb(i,s,v){if(i=Ct(i),i&&(v||s===r))return i.slice(0,Hf(i)+1);if(!i||!(s=Zr(s)))return i;var A=wn(i),S=zf(A,wn(s))+1;return gi(A,0,S).join("")}function rb(i,s,v){if(i=Ct(i),i&&(v||s===r))return i.replace(Ar,"");if(!i||!(s=Zr(s)))return i;var A=wn(i),S=qf(A,wn(s));return gi(A,S).join("")}function nb(i,s){var v=H,A=W;if($t(s)){var S="separator"in s?s.separator:S;v="length"in s?ot(s.length):v,A="omission"in s?Zr(s.omission):A}i=Ct(i);var T=i.length;if(Zi(i)){var U=wn(i);T=U.length}if(v>=T)return i;var G=v-$i(A);if(G<1)return A;var ee=U?gi(U,0,G).join(""):i.slice(0,G);if(S===r)return ee+A;if(U&&(G+=ee.length-G),zo(S)){if(i.slice(G).search(S)){var pe,ge=ee;for(S.global||(S=io(S.source,Ct(Hi.exec(S))+"g")),S.lastIndex=0;pe=S.exec(ge);)var De=pe.index;ee=ee.slice(0,De===r?G:De)}}else if(i.indexOf(Zr(S),G)!=G){var Be=ee.lastIndexOf(S);Be>-1&&(ee=ee.slice(0,Be))}return ee+A}function ib(i){return i=Ct(i),i&&fr.test(i)?i.replace(gr,T1):i}var ub=nu(function(i,s,v){return i+(v?" ":"")+s.toUpperCase()}),Go=Tc("toUpperCase");function Ph(i,s,v){return i=Ct(i),s=v?r:s,s===r?B1(i)?k1(i):D1(i):i.match(s)||[]}var xh=ft(function(i,s){try{return Kr(i,r,s)}catch(v){return qo(v)?v:new nt(v)}}),ab=Jn(function(i,s){return sn(s,function(v){v=Un(v),$n(i,v,Vo(i[v],i))}),i});function sb(i){var s=i==null?0:i.length,v=Ge();return i=s?Yt(i,function(A){if(typeof A[1]!="function")throw new on(l);return[v(A[0]),A[1]]}):[],ft(function(A){for(var S=-1;++S<s;){var T=i[S];if(Kr(T[0],this,A))return Kr(T[1],this,A)}})}function ob(i){return Tv(fn(i,h))}function Ko(i){return function(){return i}}function lb(i,s){return i==null||i!==i?s:i}var fb=Nc(),cb=Nc(!0);function qr(i){return i}function Yo(i){return cc(typeof i=="function"?i:fn(i,h))}function hb(i){return dc(fn(i,h))}function db(i,s){return pc(i,fn(s,h))}var pb=ft(function(i,s){return function(v){return qu(v,i,s)}}),vb=ft(function(i,s){return function(v){return qu(i,v,s)}});function Zo(i,s,v){var A=_r(s),S=Aa(s,A);v==null&&!($t(s)&&(S.length||!A.length))&&(v=s,s=i,i=this,S=Aa(s,_r(s)));var T=!($t(v)&&"chain"in v)||!!v.chain,U=ei(i);return sn(S,function(G){var ee=s[G];i[G]=ee,U&&(i.prototype[G]=function(){var pe=this.__chain__;if(T||pe){var ge=i(this.__wrapped__),De=ge.__actions__=Ur(this.__actions__);return De.push({func:ee,args:arguments,thisArg:i}),ge.__chain__=pe,ge}return ee.apply(i,fi([this.value()],arguments))})}),i}function gb(){return wr._===this&&(wr._=q1),this}function $o(){}function mb(i){return i=ot(i),ft(function(s){return vc(s,i)})}var _b=So(Yt),Db=So(kf),bb=So(Xs);function Th(i){return Io(i)?Js(Un(i)):$v(i)}function yb(i){return function(s){return i==null?r:Li(i,s)}}var Ab=Rc(),wb=Rc(!0);function Xo(){return[]}function Jo(){return!1}function Eb(){return{}}function Cb(){return""}function Fb(){return!0}function Sb(i,s){if(i=ot(i),i<1||i>Q)return[];var v=me,A=Or(i,me);s=Ge(s),i-=me;for(var S=to(A,s);++v<i;)s(v);return S}function Bb(i){return ut(i)?Yt(i,Un):$r(i)?[i]:Ur(Qc(Ct(i)))}function Ob(i){var s=++V1;return Ct(i)+s}var Mb=Ba(function(i,s){return i+s},0),Pb=Bo("ceil"),xb=Ba(function(i,s){return i/s},1),Tb=Bo("floor");function Ib(i){return i&&i.length?ya(i,qr,ho):r}function Nb(i,s){return i&&i.length?ya(i,Ge(s,2),ho):r}function kb(i){return Uf(i,qr)}function Rb(i,s){return Uf(i,Ge(s,2))}function Lb(i){return i&&i.length?ya(i,qr,mo):r}function Ub(i,s){return i&&i.length?ya(i,Ge(s,2),mo):r}var Vb=Ba(function(i,s){return i*s},1),jb=Bo("round"),qb=Ba(function(i,s){return i-s},0);function zb(i){return i&&i.length?eo(i,qr):0}function Wb(i,s){return i&&i.length?eo(i,Ge(s,2)):0}return M.after=h_,M.ary=fh,M.assign=Q_,M.assignIn=Eh,M.assignInWith=ja,M.assignWith=eD,M.at=tD,M.before=ch,M.bind=Vo,M.bindAll=ab,M.bindKey=hh,M.castArray=E_,M.chain=sh,M.chunk=Tg,M.compact=Ig,M.concat=Ng,M.cond=sb,M.conforms=ob,M.constant=Ko,M.countBy=zm,M.create=rD,M.curry=dh,M.curryRight=ph,M.debounce=vh,M.defaults=nD,M.defaultsDeep=iD,M.defer=d_,M.delay=p_,M.difference=kg,M.differenceBy=Rg,M.differenceWith=Lg,M.drop=Ug,M.dropRight=Vg,M.dropRightWhile=jg,M.dropWhile=qg,M.fill=zg,M.filter=Hm,M.flatMap=Ym,M.flatMapDeep=Zm,M.flatMapDepth=$m,M.flatten=nh,M.flattenDeep=Wg,M.flattenDepth=Hg,M.flip=v_,M.flow=fb,M.flowRight=cb,M.fromPairs=Gg,M.functions=cD,M.functionsIn=hD,M.groupBy=Xm,M.initial=Yg,M.intersection=Zg,M.intersectionBy=$g,M.intersectionWith=Xg,M.invert=pD,M.invertBy=vD,M.invokeMap=Qm,M.iteratee=Yo,M.keyBy=e_,M.keys=_r,M.keysIn=jr,M.map=Na,M.mapKeys=mD,M.mapValues=_D,M.matches=hb,M.matchesProperty=db,M.memoize=Ra,M.merge=DD,M.mergeWith=Ch,M.method=pb,M.methodOf=vb,M.mixin=Zo,M.negate=La,M.nthArg=mb,M.omit=bD,M.omitBy=yD,M.once=g_,M.orderBy=t_,M.over=_b,M.overArgs=m_,M.overEvery=Db,M.overSome=bb,M.partial=jo,M.partialRight=gh,M.partition=r_,M.pick=AD,M.pickBy=Fh,M.property=Th,M.propertyOf=yb,M.pull=tm,M.pullAll=uh,M.pullAllBy=rm,M.pullAllWith=nm,M.pullAt=im,M.range=Ab,M.rangeRight=wb,M.rearg=__,M.reject=u_,M.remove=um,M.rest=D_,M.reverse=Lo,M.sampleSize=s_,M.set=ED,M.setWith=CD,M.shuffle=o_,M.slice=am,M.sortBy=c_,M.sortedUniq=dm,M.sortedUniqBy=pm,M.split=YD,M.spread=b_,M.tail=vm,M.take=gm,M.takeRight=mm,M.takeRightWhile=_m,M.takeWhile=Dm,M.tap=Im,M.throttle=y_,M.thru=Ia,M.toArray=yh,M.toPairs=Sh,M.toPairsIn=Bh,M.toPath=Bb,M.toPlainObject=wh,M.transform=FD,M.unary=A_,M.union=bm,M.unionBy=ym,M.unionWith=Am,M.uniq=wm,M.uniqBy=Em,M.uniqWith=Cm,M.unset=SD,M.unzip=Uo,M.unzipWith=ah,M.update=BD,M.updateWith=OD,M.values=au,M.valuesIn=MD,M.without=Fm,M.words=Ph,M.wrap=w_,M.xor=Sm,M.xorBy=Bm,M.xorWith=Om,M.zip=Mm,M.zipObject=Pm,M.zipObjectDeep=xm,M.zipWith=Tm,M.entries=Sh,M.entriesIn=Bh,M.extend=Eh,M.extendWith=ja,Zo(M,M),M.add=Mb,M.attempt=xh,M.camelCase=ID,M.capitalize=Oh,M.ceil=Pb,M.clamp=PD,M.clone=C_,M.cloneDeep=S_,M.cloneDeepWith=B_,M.cloneWith=F_,M.conformsTo=O_,M.deburr=Mh,M.defaultTo=lb,M.divide=xb,M.endsWith=ND,M.eq=Cn,M.escape=kD,M.escapeRegExp=RD,M.every=Wm,M.find=Gm,M.findIndex=th,M.findKey=uD,M.findLast=Km,M.findLastIndex=rh,M.findLastKey=aD,M.floor=Tb,M.forEach=oh,M.forEachRight=lh,M.forIn=sD,M.forInRight=oD,M.forOwn=lD,M.forOwnRight=fD,M.get=Wo,M.gt=M_,M.gte=P_,M.has=dD,M.hasIn=Ho,M.head=ih,M.identity=qr,M.includes=Jm,M.indexOf=Kg,M.inRange=xD,M.invoke=gD,M.isArguments=ji,M.isArray=ut,M.isArrayBuffer=x_,M.isArrayLike=Vr,M.isArrayLikeObject=sr,M.isBoolean=T_,M.isBuffer=mi,M.isDate=I_,M.isElement=N_,M.isEmpty=k_,M.isEqual=R_,M.isEqualWith=L_,M.isError=qo,M.isFinite=U_,M.isFunction=ei,M.isInteger=mh,M.isLength=Ua,M.isMap=_h,M.isMatch=V_,M.isMatchWith=j_,M.isNaN=q_,M.isNative=z_,M.isNil=H_,M.isNull=W_,M.isNumber=Dh,M.isObject=$t,M.isObjectLike=rr,M.isPlainObject=Yu,M.isRegExp=zo,M.isSafeInteger=G_,M.isSet=bh,M.isString=Va,M.isSymbol=$r,M.isTypedArray=uu,M.isUndefined=K_,M.isWeakMap=Y_,M.isWeakSet=Z_,M.join=Jg,M.kebabCase=LD,M.last=hn,M.lastIndexOf=Qg,M.lowerCase=UD,M.lowerFirst=VD,M.lt=$_,M.lte=X_,M.max=Ib,M.maxBy=Nb,M.mean=kb,M.meanBy=Rb,M.min=Lb,M.minBy=Ub,M.stubArray=Xo,M.stubFalse=Jo,M.stubObject=Eb,M.stubString=Cb,M.stubTrue=Fb,M.multiply=Vb,M.nth=em,M.noConflict=gb,M.noop=$o,M.now=ka,M.pad=jD,M.padEnd=qD,M.padStart=zD,M.parseInt=WD,M.random=TD,M.reduce=n_,M.reduceRight=i_,M.repeat=HD,M.replace=GD,M.result=wD,M.round=jb,M.runInContext=X,M.sample=a_,M.size=l_,M.snakeCase=KD,M.some=f_,M.sortedIndex=sm,M.sortedIndexBy=om,M.sortedIndexOf=lm,M.sortedLastIndex=fm,M.sortedLastIndexBy=cm,M.sortedLastIndexOf=hm,M.startCase=ZD,M.startsWith=$D,M.subtract=qb,M.sum=zb,M.sumBy=Wb,M.template=XD,M.times=Sb,M.toFinite=ti,M.toInteger=ot,M.toLength=Ah,M.toLower=JD,M.toNumber=dn,M.toSafeInteger=J_,M.toString=Ct,M.toUpper=QD,M.trim=eb,M.trimEnd=tb,M.trimStart=rb,M.truncate=nb,M.unescape=ib,M.uniqueId=Ob,M.upperCase=ub,M.upperFirst=Go,M.each=oh,M.eachRight=lh,M.first=ih,Zo(M,function(){var i={};return Rn(M,function(s,v){Ot.call(M.prototype,v)||(i[v]=s)}),i}(),{chain:!1}),M.VERSION=n,sn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){M[i].placeholder=M}),sn(["drop","take"],function(i,s){gt.prototype[i]=function(v){v=v===r?1:pr(ot(v),0);var A=this.__filtered__&&!s?new gt(this):this.clone();return A.__filtered__?A.__takeCount__=Or(v,A.__takeCount__):A.__views__.push({size:Or(v,me),type:i+(A.__dir__<0?"Right":"")}),A},gt.prototype[i+"Right"]=function(v){return this.reverse()[i](v).reverse()}}),sn(["filter","map","takeWhile"],function(i,s){var v=s+1,A=v==Y||v==z;gt.prototype[i]=function(S){var T=this.clone();return T.__iteratees__.push({iteratee:Ge(S,3),type:v}),T.__filtered__=T.__filtered__||A,T}}),sn(["head","last"],function(i,s){var v="take"+(s?"Right":"");gt.prototype[i]=function(){return this[v](1).value()[0]}}),sn(["initial","tail"],function(i,s){var v="drop"+(s?"":"Right");gt.prototype[i]=function(){return this.__filtered__?new gt(this):this[v](1)}}),gt.prototype.compact=function(){return this.filter(qr)},gt.prototype.find=function(i){return this.filter(i).head()},gt.prototype.findLast=function(i){return this.reverse().find(i)},gt.prototype.invokeMap=ft(function(i,s){return typeof i=="function"?new gt(this):this.map(function(v){return qu(v,i,s)})}),gt.prototype.reject=function(i){return this.filter(La(Ge(i)))},gt.prototype.slice=function(i,s){i=ot(i);var v=this;return v.__filtered__&&(i>0||s<0)?new gt(v):(i<0?v=v.takeRight(-i):i&&(v=v.drop(i)),s!==r&&(s=ot(s),v=s<0?v.dropRight(-s):v.take(s-i)),v)},gt.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},gt.prototype.toArray=function(){return this.take(me)},Rn(gt.prototype,function(i,s){var v=/^(?:filter|find|map|reject)|While$/.test(s),A=/^(?:head|last)$/.test(s),S=M[A?"take"+(s=="last"?"Right":""):s],T=A||/^find/.test(s);S&&(M.prototype[s]=function(){var U=this.__wrapped__,G=A?[1]:arguments,ee=U instanceof gt,pe=G[0],ge=ee||ut(U),De=function(ct){var bt=S.apply(M,fi([ct],G));return A&&Be?bt[0]:bt};ge&&v&&typeof pe=="function"&&pe.length!=1&&(ee=ge=!1);var Be=this.__chain__,Re=!!this.__actions__.length,Je=T&&!Be,lt=ee&&!Re;if(!T&&ge){U=lt?U:new gt(this);var Qe=i.apply(U,G);return Qe.__actions__.push({func:Ia,args:[De],thisArg:r}),new ln(Qe,Be)}return Je&&lt?i.apply(this,G):(Qe=this.thru(De),Je?A?Qe.value()[0]:Qe.value():Qe)})}),sn(["pop","push","shift","sort","splice","unshift"],function(i){var s=aa[i],v=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",A=/^(?:pop|shift)$/.test(i);M.prototype[i]=function(){var S=arguments;if(A&&!this.__chain__){var T=this.value();return s.apply(ut(T)?T:[],S)}return this[v](function(U){return s.apply(ut(U)?U:[],S)})}}),Rn(gt.prototype,function(i,s){var v=M[s];if(v){var A=v.name+"";Ot.call(eu,A)||(eu[A]=[]),eu[A].push({name:s,func:v})}}),eu[Sa(r,b).name]=[{name:"wrapper",func:r}],gt.prototype.clone=iv,gt.prototype.reverse=uv,gt.prototype.value=av,M.prototype.at=Nm,M.prototype.chain=km,M.prototype.commit=Rm,M.prototype.next=Lm,M.prototype.plant=Vm,M.prototype.reverse=jm,M.prototype.toJSON=M.prototype.valueOf=M.prototype.value=qm,M.prototype.first=M.prototype.head,Nu&&(M.prototype[Nu]=Um),M},Xi=R1();Ti?((Ti.exports=Xi)._=Xi,Ks._=Xi):wr._=Xi}).call(cr)})(y3,ys);const A3=ys,Sl="panelModeStore";function w3(){const e=xn("select"),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&localStorage[Sl]||""),{subscribe:t,update:a=>{!a||!u||(localStorage[Sl]=a,r(a))},get:()=>Wt(e),delete:()=>{u&&(delete localStorage[Sl],r("select"))}}}const zn=w3(),E3=Pn(zn,e=>Wt(zn)),Bl="selectedPromptStore";function C3(){const e=xn(""),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&localStorage[Bl]||""),{subscribe:t,update:a=>{!a||!u||(localStorage[Bl]=a,r(a))},get:()=>Wt(e),delete:()=>{u&&(delete localStorage[Bl],r(""))}}}const As=C3(),F3=Pn(As,e=>Wt(As));function rd(e,t,r){const n=e.slice();return n[6]=t[r][0],n[7]=t[r][1],n}function nd(e,t,r){const n=e.slice();return n[10]=t[r][0],n[11]=t[r][1],n}function id(e){let t=e[11].text+"",r,n,u,a=ui(e[7],e[10])+"",l,o;return{c(){r=$e(t),n=$e("::"),u=se("b"),l=$e(a),o=Ke()},l(c){r=Xe(c,t),n=Xe(c,"::"),u=oe(c,"B",{});var p=ie(u);l=Xe(p,a),p.forEach(V),o=Ye(c)},m(c,p){Ce(c,r,p),Ce(c,n,p),Ce(c,u,p),K(u,l),Ce(c,o,p)},p(c,p){p&1&&t!==(t=c[11].text+"")&&Mn(r,t),p&1&&a!==(a=ui(c[7],c[10])+"")&&Mn(l,a)},d(c){c&&V(r),c&&V(n),c&&V(u),c&&V(o)}}}function ud(e,t){let r,n,u,a,l,o=Object.entries(t[7].weightedPrompts),c=[];for(let f=0;f<o.length;f+=1)c[f]=id(nd(t,o,f));function p(){return t[4](t[6],t[7])}return{key:e,first:null,c(){r=se("li"),n=se("a");for(let f=0;f<c.length;f+=1)c[f].c();u=Ke(),this.h()},l(f){r=oe(f,"LI",{});var h=ie(r);n=oe(h,"A",{class:!0});var d=ie(n);for(let m=0;m<c.length;m+=1)c[m].l(d);d.forEach(V),u=Ye(h),h.forEach(V),this.h()},h(){x(n,"class","text-xs inline-block"),this.first=r},m(f,h){Ce(f,r,h),K(r,n);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(n,null);K(r,u),a||(l=Ne(n,"click",p),a=!0)},p(f,h){if(t=f,h&3){o=Object.entries(t[7].weightedPrompts);let d;for(d=0;d<o.length;d+=1){const m=nd(t,o,d);c[d]?c[d].p(m,h):(c[d]=id(m),c[d].c(),c[d].m(n,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=o.length}},d(f){f&&V(r),rf(c,f),a=!1,l()}}}function S3(e){let t,r,n,u,a,l=[],o=new Map,c,p,f=e[1](e[0],ad,"desc");const h=d=>d[6];for(let d=0;d<f.length;d+=1){let m=rd(e,f,d),y=h(m);o.set(y,l[d]=ud(y,m))}return{c(){t=se("ul"),r=se("li"),n=se("a"),u=$e("New +"),a=Ke();for(let d=0;d<l.length;d+=1)l[d].c();this.h()},l(d){t=oe(d,"UL",{class:!0});var m=ie(t);r=oe(m,"LI",{});var y=ie(r);n=oe(y,"A",{class:!0});var g=ie(n);u=Xe(g,"New +"),g.forEach(V),y.forEach(V),a=Ye(m);for(let _=0;_<l.length;_+=1)l[_].l(m);m.forEach(V),this.h()},h(){x(n,"class","text-xs inline-block"),x(t,"class","menu h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(d,m){Ce(d,t,m),K(t,r),K(r,n),K(n,u),K(t,a);for(let y=0;y<l.length;y+=1)l[y]&&l[y].m(t,null);c||(p=Ne(n,"click",e[2]),c=!0)},p(d,[m]){m&11&&(f=d[1](d[0],ad,"desc"),l=Fi(l,m,h,1,d,f,o,t,mu,ud,null,rd))},i:Te,o:Te,d(d){d&&V(t);for(let m=0;m<l.length;m+=1)l[m].d();c=!1,p()}}}const ad=e=>e[1].date;function B3(e,t,r){let n,u;Nt(e,bn,p=>r(5,n=p)),Nt(e,b3,p=>r(0,u=p));const{orderBy:a}=A3;function l(){As.delete(),Mt.update(bi({},n.weightMode)),zn.update("edit")}function o(p,f){As.update(p),Mt.update({...f}),zn.update("edit")}return[u,a,l,o,(p,f)=>o(p,f)]}class O3 extends Rt{constructor(t){super(),Lt(this,t,B3,S3,Ut,{})}}let Ga;const M3=new Uint8Array(16);function P3(){if(!Ga&&(Ga=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ga))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ga(M3)}const Fr=[];for(let e=0;e<256;++e)Fr.push((e+256).toString(16).slice(1));function x3(e,t=0){return(Fr[e[t+0]]+Fr[e[t+1]]+Fr[e[t+2]]+Fr[e[t+3]]+"-"+Fr[e[t+4]]+Fr[e[t+5]]+"-"+Fr[e[t+6]]+Fr[e[t+7]]+"-"+Fr[e[t+8]]+Fr[e[t+9]]+"-"+Fr[e[t+10]]+Fr[e[t+11]]+Fr[e[t+12]]+Fr[e[t+13]]+Fr[e[t+14]]+Fr[e[t+15]]).toLowerCase()}const T3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),sd={randomUUID:T3};function qp(e,t,r){if(sd.randomUUID&&!t&&!e)return sd.randomUUID();e=e||{};const n=e.random||(e.rng||P3)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let u=0;u<16;++u)t[r+u]=n[u];return t}return x3(n)}function I3(e){const t=[],r=/((?:[^:]+|:(?!:))+)(?:::(\d+(?:\.\d+)?))?(?=\s|$)/g;let n;for(;(n=r.exec(e))!==null;){const u=n[1].trim(),a=n[2]?parseFloat(n[2]):1;u&&t.push([u,a])}return t}function Ol(e){if(typeof e!="string")throw new Error("Input must be a string");const t=e.length-1;let r=e;for(;r[t]===",";)r=r.slice(0,t);return r}function Ml(e){if(typeof e!="string")throw new Error("Input must be a string");const t=["-","#","*","","",">","<","+","^","~","(",")","[","]","{","}"];let r=e.trim();for(;t.includes(r[0]);)r=r.slice(1).trim();return/^\d+(\.|\))\s/.test(r)&&(r=r.replace(/^\d+(\.|\))\s/,"")),r}function Ql(e){if(e=e.replace(/^\n+|\n+$/g,""),e.includes("::"))return I3(e);if(e.includes(`
`))return e.split(`
`).map(a=>Ml(Ol(a))).filter(a=>a.length>0).map(a=>[a,1]);const t=e.match(/[^.!?]+[.!?]+/g)||[],r=t.length,n=e.split(",").map(a=>Ml(Ol(a))).filter(a=>a.length>0),u=n.length-1;return r>u?t.map(a=>Ml(Ol(a))).filter(a=>a.length>0).map(a=>[a,1]):n.map(a=>[a,1])}function N3(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var zp=N3,k3=typeof cr=="object"&&cr&&cr.Object===Object&&cr,R3=k3,L3=R3,U3=typeof self=="object"&&self&&self.Object===Object&&self,V3=L3||U3||Function("return this")(),Wp=V3,j3=Wp,q3=function(){return j3.Date.now()},z3=q3,W3=/\s/;function H3(e){for(var t=e.length;t--&&W3.test(e.charAt(t)););return t}var G3=H3,K3=G3,Y3=/^\s+/;function Z3(e){return e&&e.slice(0,K3(e)+1).replace(Y3,"")}var $3=Z3,X3=Wp,J3=X3.Symbol,Hp=J3,od=Hp,Gp=Object.prototype,Q3=Gp.hasOwnProperty,eS=Gp.toString,Zu=od?od.toStringTag:void 0;function tS(e){var t=Q3.call(e,Zu),r=e[Zu];try{e[Zu]=void 0;var n=!0}catch{}var u=eS.call(e);return n&&(t?e[Zu]=r:delete e[Zu]),u}var rS=tS,nS=Object.prototype,iS=nS.toString;function uS(e){return iS.call(e)}var aS=uS,ld=Hp,sS=rS,oS=aS,lS="[object Null]",fS="[object Undefined]",fd=ld?ld.toStringTag:void 0;function cS(e){return e==null?e===void 0?fS:lS:fd&&fd in Object(e)?sS(e):oS(e)}var hS=cS;function dS(e){return e!=null&&typeof e=="object"}var pS=dS,vS=hS,gS=pS,mS="[object Symbol]";function _S(e){return typeof e=="symbol"||gS(e)&&vS(e)==mS}var DS=_S,bS=$3,cd=zp,yS=DS,hd=0/0,AS=/^[-+]0x[0-9a-f]+$/i,wS=/^0b[01]+$/i,ES=/^0o[0-7]+$/i,CS=parseInt;function FS(e){if(typeof e=="number")return e;if(yS(e))return hd;if(cd(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=cd(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=bS(e);var r=wS.test(e);return r||ES.test(e)?CS(e.slice(2),r?2:8):AS.test(e)?hd:+e}var SS=FS,BS=zp,Pl=z3,dd=SS,OS="Expected a function",MS=Math.max,PS=Math.min;function xS(e,t,r){var n,u,a,l,o,c,p=0,f=!1,h=!1,d=!0;if(typeof e!="function")throw new TypeError(OS);t=dd(t)||0,BS(r)&&(f=!!r.leading,h="maxWait"in r,a=h?MS(dd(r.maxWait)||0,t):a,d="trailing"in r?!!r.trailing:d);function m(O){var P=n,I=u;return n=u=void 0,p=O,l=e.apply(I,P),l}function y(O){return p=O,o=setTimeout(b,t),f?m(O):l}function g(O){var P=O-c,I=O-p,N=t-P;return h?PS(N,a-I):N}function _(O){var P=O-c,I=O-p;return c===void 0||P>=t||P<0||h&&I>=a}function b(){var O=Pl();if(_(O))return C(O);o=setTimeout(b,g(O))}function C(O){return o=void 0,d&&n?m(O):(n=u=void 0,l)}function w(){o!==void 0&&clearTimeout(o),p=0,n=c=u=o=void 0}function B(){return o===void 0?l:C(Pl())}function F(){var O=Pl(),P=_(O);if(n=arguments,u=this,c=O,P){if(o===void 0)return y(c);if(h)return clearTimeout(o),o=setTimeout(b,t),m(c)}return o===void 0&&(o=setTimeout(b,t)),l}return F.cancel=w,F.flush=B,F}var pd=xS;function vd(e,t,r){const n=e.slice();return n[13]=t[r].id,n[14]=t[r].text,n}function gd(e,t){let r,n,u,a,l;function o(...c){return t[9](t[13],...c)}return{key:e,first:null,c(){r=se("li"),n=se("input"),this.h()},l(c){r=oe(c,"LI",{class:!0});var p=ie(r);n=oe(p,"INPUT",{type:!0,placeholder:!0,class:!0}),p.forEach(V),this.h()},h(){n.value=u=t[14],x(n,"type","text"),x(n,"placeholder",""),x(n,"class","input input-bordered input-sm w-full"),x(r,"class","p-1"),this.first=r},m(c,p){Ce(c,r,p),K(r,n),a||(l=Ne(n,"input",o),a=!0)},p(c,p){t=c,p&2&&u!==(u=t[14])&&n.value!==u&&(n.value=u)},d(c){c&&V(r),a=!1,l()}}}function TS(e){let t,r,n,u,a,l,o,c,p,f,h,d=[],m=new Map,y,g,_,b,C,w=e[1];const B=F=>F[13];for(let F=0;F<w.length;F+=1){let O=vd(e,w,F),P=B(O);m.set(P,d[F]=gd(P,O))}return{c(){t=se("div"),r=se("button"),n=$e("Paste"),u=Ke(),a=se("button"),l=$e("Save"),o=Ke(),c=se("button"),p=$e("Delete"),f=Ke(),h=se("ul");for(let F=0;F<d.length;F+=1)d[F].c();y=Ke(),g=se("li"),_=se("input"),this.h()},l(F){t=oe(F,"DIV",{class:!0});var O=ie(t);r=oe(O,"BUTTON",{class:!0});var P=ie(r);n=Xe(P,"Paste"),P.forEach(V),u=Ye(O),a=oe(O,"BUTTON",{class:!0});var I=ie(a);l=Xe(I,"Save"),I.forEach(V),o=Ye(O),c=oe(O,"BUTTON",{class:!0});var N=ie(c);p=Xe(N,"Delete"),N.forEach(V),O.forEach(V),f=Ye(F),h=oe(F,"UL",{class:!0});var H=ie(h);for(let q=0;q<d.length;q+=1)d[q].l(H);y=Ye(H),g=oe(H,"LI",{class:!0});var W=ie(g);_=oe(W,"INPUT",{type:!0,placeholder:!0,class:!0}),W.forEach(V),H.forEach(V),this.h()},h(){x(r,"class","btn btn-sm btn-info mx-2"),x(a,"class","btn btn-sm btn-success mx-2"),x(c,"class","btn btn-sm btn-error mx-2"),x(t,"class","flex px-8 py-2 justify-center bg-base-100"),x(_,"type","text"),x(_,"placeholder","Add prompt"),x(_,"class","input input-bordered input-sm w-full italic"),x(g,"class","p-1"),x(h,"class","h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(F,O){Ce(F,t,O),K(t,r),K(r,n),K(t,u),K(t,a),K(a,l),K(t,o),K(t,c),K(c,p),Ce(F,f,O),Ce(F,h,O);for(let P=0;P<d.length;P+=1)d[P]&&d[P].m(h,null);K(h,y),K(h,g),K(g,_),Ai(_,e[0]),b||(C=[Ne(r,"click",e[3]),Ne(a,"click",e[2]),Ne(c,"click",e[4]),Ne(_,"input",e[10]),Ne(_,"input",e[11])],b=!0)},p(F,[O]){O&34&&(w=F[1],d=Fi(d,O,B,1,F,w,m,h,mu,gd,y,vd)),O&1&&_.value!==F[0]&&Ai(_,F[0])},i:Te,o:Te,d(F){F&&V(t),F&&V(f),F&&V(h);for(let O=0;O<d.length;O+=1)d[O].d();b=!1,Lr(C)}}}function IS(e,t,r){let n,u,a;Nt(e,bn,_=>r(8,u=_)),Nt(e,F3,_=>r(12,a=_));let l="",o=Object.keys(u.weightedPrompts).length;function c(){bs.update(qp(),{...u,date:Date.now()}),zn.update("select")}function p(){navigator.clipboard.readText().then(_=>{const b=Ql(_),C=Math.max(...b.map(([B,F])=>F)),w=b.reduce((B,[F,O],P)=>(B[P]=Dr(P,F,O,O/C),B),{});Mt.update(bi(w,u.weightMode))})}function f(){a&&bs.delete(a),zn.update("select"),Mt.delete()}const h=pd((_,b)=>{const C={...u.weightedPrompts},w={...C[_],text:b};C[_]=w,Mt.update({...u,weightedPrompts:C})},500),d=pd(_=>{const b=Object.keys(u.weightedPrompts).length,C={...u.weightedPrompts},w=Dr(b,_,1);C[b]=w,Mt.update({...u,weightedPrompts:C})},500),m=(_,b)=>h(_,b.target.value);function y(){l=this.value,r(0,l),r(8,u),r(7,o)}const g=_=>d(_.target.value);return e.$$.update=()=>{if(e.$$.dirty&384){const _=Object.keys(u.weightedPrompts).length;_>o&&(r(7,o=_),r(0,l=""))}e.$$.dirty&256&&r(1,n=Object.entries(u.weightedPrompts).map(([_,b])=>({id:_,text:b.text})))},[l,n,c,p,f,h,d,o,u,m,y,g]}class NS extends Rt{constructor(t){super(),Lt(this,t,IS,TS,Ut,{})}}const kS=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. The first sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. The middle three sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. The final sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,RS=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 10 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. Four sentences should describe the subject.
    d. Four sentences should describe the scene.
    e. Tow sentences should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,LS=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 10 concepts.
    a. Each concept should be 10 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
`,US=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 20 concepts.
    a. Each concept should be 5 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
3. Do not use hyphens to mark list items.
4. Do not title the list.
`,VS=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. One sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. Two sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. One sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
    f. One sentence should be a poetic concept or feeling. Example: The unfathomable depths of a lover's sigh.
        i. The poetic concept should be intense.
        ii. The poetic concept should be emotional.
        iii. The poetic concept should include abstract words.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`;function jS(){const e=xn({}),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&Object.keys(localStorage).reduce((a,l)=>{if(l.startsWith("directive")){const o=l.split("_")[1];a[o]=JSON.parse(localStorage[l])}return a},{})||{}),{subscribe:t,update:(a,l)=>{const o=Wt(e),p={...o[a]||{},...l};u&&(localStorage[`directive_${a}`]=JSON.stringify(p));const f={...o,[a]:p};r(f)},get:a=>Wt(e)[a],delete:a=>{u&&delete localStorage[`directive_${a}`];const l={...Wt(e)};delete l[a],r(l)}}}const ws=jS(),qS=Pn(ws,e=>Object.entries(Wt(ws))),xl="preferredModelStore";function zS(){const e=xn(""),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&localStorage[xl]||""),{subscribe:t,update:a=>{!a||!u||(localStorage[xl]=a,r(a))},get:()=>Wt(e),delete:()=>{u&&(delete localStorage[xl],r(""))}}}const ef=zS(),Kp=Pn(ef,e=>Wt(ef)),Tl="preferredDirectiveStore";function WS(){const e=xn(""),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&localStorage[Tl]||""),{subscribe:t,update:a=>{!a||!u||(localStorage[Tl]=a,r(a))},get:()=>Wt(e),delete:()=>{u&&(delete localStorage[Tl],r(""))}}}const Es=WS(),HS=Pn(Es,e=>Wt(Es)),Il="metaPromptStore";function GS(){const e=xn(""),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&localStorage[Il]||""),{subscribe:t,update:a=>{!a||!u||(localStorage[Il]=a,r(a))},get:()=>Wt(e),delete:()=>{u&&(delete localStorage[Il],r(""))}}}const tf=GS(),KS=Pn(tf,e=>Wt(tf));function md(e,t,r){const n=e.slice();return n[30]=t[r][0],n[31]=t[r][1],n}function YS(e){let t,r,n;return{c(){t=se("div"),r=se("p"),n=$e("Set Open AI Key in settings for GPT generation."),this.h()},l(u){t=oe(u,"DIV",{class:!0});var a=ie(t);r=oe(a,"P",{class:!0});var l=ie(r);n=Xe(l,"Set Open AI Key in settings for GPT generation."),l.forEach(V),a.forEach(V),this.h()},h(){x(r,"class","text-center"),x(t,"class","w-full p-2 flex justify-center")},m(u,a){Ce(u,t,a),K(t,r),K(r,n)},p:Te,d(u){u&&V(t)}}}function ZS(e){let t,r,n,u,a,l,o,c,p,f,h=[],d=new Map,m,y,g,_,b,C,w,B=Object.entries(e[1]);const F=P=>P[30];for(let P=0;P<B.length;P+=1){let I=md(e,B,P),N=F(I);d.set(N,h[P]=_d(N,I))}let O=e[0]&&Dd(e);return{c(){t=se("div"),r=se("div"),n=se("label"),u=se("span"),a=$e("Pick a directive for prompt creation"),l=Ke(),o=se("select"),c=se("option"),p=$e("Pick one");for(let P=0;P<h.length;P+=1)h[P].c();m=se("option"),y=$e("New"),_=Ke(),O&&O.c(),b=Zt(),this.h()},l(P){t=oe(P,"DIV",{class:!0});var I=ie(t);r=oe(I,"DIV",{class:!0});var N=ie(r);n=oe(N,"LABEL",{class:!0});var H=ie(n);u=oe(H,"SPAN",{class:!0});var W=ie(u);a=Xe(W,"Pick a directive for prompt creation"),W.forEach(V),H.forEach(V),l=Ye(N),o=oe(N,"SELECT",{class:!0});var q=ie(o);c=oe(q,"OPTION",{});var J=ie(c);p=Xe(J,"Pick one"),J.forEach(V);for(let R=0;R<h.length;R+=1)h[R].l(q);m=oe(q,"OPTION",{});var Y=ie(m);y=Xe(Y,"New"),Y.forEach(V),q.forEach(V),N.forEach(V),I.forEach(V),_=Ye(P),O&&O.l(P),b=Zt(),this.h()},h(){x(u,"class","label-text"),x(n,"class","label"),c.disabled=!0,c.selected=f=e[0]===null,c.__value="Pick one",c.value=c.__value,m.__value="new",m.value=m.__value,m.selected=g=e[0]==="new",x(o,"class","select select-bordered"),x(r,"class","form-control w-full max-w-xs mb-4"),x(t,"class","flex justify-center")},m(P,I){Ce(P,t,I),K(t,r),K(r,n),K(n,u),K(u,a),K(r,l),K(r,o),K(o,c),K(c,p);for(let N=0;N<h.length;N+=1)h[N]&&h[N].m(o,null);K(o,m),K(m,y),pu(o,e[0]),Ce(P,_,I),O&&O.m(P,I),Ce(P,b,I),C||(w=Ne(o,"change",e[11]),C=!0)},p(P,I){I[0]&3&&f!==(f=P[0]===null)&&(c.selected=f),I[0]&3&&(B=Object.entries(P[1]),h=Fi(h,I,F,1,P,B,d,o,mu,_d,m,md)),I[0]&3&&g!==(g=P[0]==="new")&&(m.selected=g),I[0]&3&&pu(o,P[0]),P[0]?O?O.p(P,I):(O=Dd(P),O.c(),O.m(b.parentNode,b)):O&&(O.d(1),O=null)},d(P){P&&V(t);for(let I=0;I<h.length;I+=1)h[I].d();P&&V(_),O&&O.d(P),P&&V(b),C=!1,w()}}}function _d(e,t){let r,n=t[31].name+"",u,a=t[31].builtIn?" (Built-In)":" (User)",l,o,c;return{key:e,first:null,c(){r=se("option"),u=$e(n),l=$e(a),this.h()},l(p){r=oe(p,"OPTION",{});var f=ie(r);u=Xe(f,n),l=Xe(f,a),f.forEach(V),this.h()},h(){r.__value=o=t[30],r.value=r.__value,r.selected=c=t[0]===t[30],this.first=r},m(p,f){Ce(p,r,f),K(r,u),K(r,l)},p(p,f){t=p,f[0]&2&&n!==(n=t[31].name+"")&&Mn(u,n),f[0]&2&&a!==(a=t[31].builtIn?" (Built-In)":" (User)")&&Mn(l,a),f[0]&2&&o!==(o=t[30])&&(r.__value=o,r.value=r.__value),f[0]&3&&c!==(c=t[0]===t[30])&&(r.selected=c)},d(p){p&&V(r)}}}function Dd(e){let t,r,n,u,a,l,o,c,p,f,h=!e[6]&&bd(e);function d(g,_){return g[5]?XS:$S}let m=d(e),y=m(e);return{c(){h&&h.c(),t=Ke(),r=se("div"),n=se("textarea"),u=Ke(),a=se("div"),l=se("textarea"),o=Ke(),y.c(),c=Zt(),this.h()},l(g){h&&h.l(g),t=Ye(g),r=oe(g,"DIV",{class:!0});var _=ie(r);n=oe(_,"TEXTAREA",{class:!0,placeholder:!0}),ie(n).forEach(V),_.forEach(V),u=Ye(g),a=oe(g,"DIV",{class:!0});var b=ie(a);l=oe(b,"TEXTAREA",{class:!0,placeholder:!0}),ie(l).forEach(V),b.forEach(V),o=Ye(g),y.l(g),c=Zt(),this.h()},h(){x(n,"class","textarea textarea-bordered w-full h-full"),x(n,"placeholder","GPT Directives"),x(r,"class","w-full p-2 h-1/2"),l.value=e[7],x(l,"class","textarea textarea-bordered w-full h-full"),x(l,"placeholder","Describe the prompt to generate."),x(a,"class","w-full p-2 h-1/5")},m(g,_){h&&h.m(g,_),Ce(g,t,_),Ce(g,r,_),K(r,n),Ai(n,e[4]),Ce(g,u,_),Ce(g,a,_),K(a,l),Ce(g,o,_),y.m(g,_),Ce(g,c,_),p||(f=[Ne(n,"input",e[17]),Ne(l,"input",e[18])],p=!0)},p(g,_){g[6]?h&&(h.d(1),h=null):h?h.p(g,_):(h=bd(g),h.c(),h.m(t.parentNode,t)),_[0]&16&&Ai(n,g[4]),_[0]&128&&(l.value=g[7]),m===(m=d(g))&&y?y.p(g,_):(y.d(1),y=m(g),y&&(y.c(),y.m(c.parentNode,c)))},d(g){h&&h.d(g),g&&V(t),g&&V(r),g&&V(u),g&&V(a),g&&V(o),y.d(g),g&&V(c),p=!1,Lr(f)}}}function bd(e){let t,r,n,u,a,l,o;return{c(){t=se("div"),r=se("input"),n=Ke(),u=se("button"),a=$e("Save"),this.h()},l(c){t=oe(c,"DIV",{class:!0});var p=ie(t);r=oe(p,"INPUT",{type:!0,placeholder:!0,class:!0}),n=Ye(p),u=oe(p,"BUTTON",{class:!0});var f=ie(u);a=Xe(f,"Save"),f.forEach(V),p.forEach(V),this.h()},h(){x(r,"type","text"),x(r,"placeholder","Name"),x(r,"class","input input-bordered input-sm w-full max-w-xs"),x(u,"class","btn btn-sm btn-primary ml-4"),x(t,"class","w-full p-2 h-12 flex justify-between")},m(c,p){Ce(c,t,p),K(t,r),Ai(r,e[3]),K(t,n),K(t,u),K(u,a),l||(o=[Ne(r,"input",e[16]),Ne(u,"click",e[9])],l=!0)},p(c,p){p[0]&8&&r.value!==c[3]&&Ai(r,c[3])},d(c){c&&V(t),l=!1,Lr(o)}}}function $S(e){let t,r,n={ctx:e,current:null,token:null,hasCatch:!1,pending:e5,then:QS,catch:JS,value:29};return wi(r=e[2],n),{c(){t=se("div"),n.block.c(),this.h()},l(u){t=oe(u,"DIV",{class:!0});var a=ie(t);n.block.l(a),a.forEach(V),this.h()},h(){x(t,"class","w-full p-2 h-12 flex justify-end")},m(u,a){Ce(u,t,a),n.block.m(t,n.anchor=null),n.mount=()=>t,n.anchor=null},p(u,a){e=u,n.ctx=e,a[0]&4&&r!==(r=e[2])&&wi(r,n)||Ss(n,e,a)},d(u){u&&V(t),n.block.d(),n.token=null,n=null}}}function XS(e){let t,r,n,u,a,l,o,c={ctx:e,current:null,token:null,hasCatch:!1,pending:n5,then:r5,catch:t5,value:29};return wi(a=e[2],c),{c(){t=se("div"),r=se("button"),n=$e("Delete"),u=Ke(),c.block.c(),this.h()},l(p){t=oe(p,"DIV",{class:!0});var f=ie(t);r=oe(f,"BUTTON",{class:!0});var h=ie(r);n=Xe(h,"Delete"),h.forEach(V),u=Ye(f),c.block.l(f),f.forEach(V),this.h()},h(){x(r,"class","btn btn-sm btn-error ml-4"),x(t,"class","w-full p-2 h-12 flex justify-between")},m(p,f){Ce(p,t,f),K(t,r),K(r,n),K(t,u),c.block.m(t,c.anchor=null),c.mount=()=>t,c.anchor=null,l||(o=Ne(r,"click",e[10]),l=!0)},p(p,f){e=p,c.ctx=e,f[0]&4&&a!==(a=e[2])&&wi(a,c)||Ss(c,e,f)},d(p){p&&V(t),c.block.d(),c.token=null,c=null,l=!1,o()}}}function JS(e){return{c:Te,l:Te,m:Te,p:Te,d:Te}}function QS(e){let t,r,n,u;return{c(){t=se("button"),r=$e("Generate"),this.h()},l(a){t=oe(a,"BUTTON",{class:!0});var l=ie(t);r=Xe(l,"Generate"),l.forEach(V),this.h()},h(){x(t,"class","btn btn-sm btn-primary ml-4")},m(a,l){Ce(a,t,l),K(t,r),n||(u=Ne(t,"click",e[12]),n=!0)},p:Te,d(a){a&&V(t),n=!1,u()}}}function e5(e){let t,r,n,u;return{c(){t=se("button"),r=$e("Generating"),this.h()},l(a){t=oe(a,"BUTTON",{class:!0});var l=ie(t);r=Xe(l,"Generating"),l.forEach(V),this.h()},h(){x(t,"class","btn btn-sm btn ml-4 disabled")},m(a,l){Ce(a,t,l),K(t,r),n||(u=Ne(t,"click",e[12]),n=!0)},p:Te,d(a){a&&V(t),n=!1,u()}}}function t5(e){return{c:Te,l:Te,m:Te,p:Te,d:Te}}function r5(e){let t,r,n,u;return{c(){t=se("button"),r=$e("Generate"),this.h()},l(a){t=oe(a,"BUTTON",{class:!0});var l=ie(t);r=Xe(l,"Generate"),l.forEach(V),this.h()},h(){x(t,"class","btn btn-sm btn-primary ml-4")},m(a,l){Ce(a,t,l),K(t,r),n||(u=Ne(t,"click",e[12]),n=!0)},p:Te,d(a){a&&V(t),n=!1,u()}}}function n5(e){let t,r,n,u;return{c(){t=se("button"),r=$e("Generating"),this.h()},l(a){t=oe(a,"BUTTON",{class:!0});var l=ie(t);r=Xe(l,"Generating"),l.forEach(V),this.h()},h(){x(t,"class","btn btn-sm btn ml-4 disabled")},m(a,l){Ce(a,t,l),K(t,r),n||(u=Ne(t,"click",e[12]),n=!0)},p:Te,d(a){a&&V(t),n=!1,u()}}}function i5(e){let t;function r(a,l){return a[8]?ZS:YS}let u=r(e)(e);return{c(){t=se("div"),u.c(),this.h()},l(a){t=oe(a,"DIV",{class:!0});var l=ie(t);u.l(l),l.forEach(V),this.h()},h(){x(t,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(a,l){Ce(a,t,l),u.m(t,null)},p(a,l){u.p(a,l)},i:Te,o:Te,d(a){a&&V(t),u.d()}}}function u5(e,t,r){let n,u,a,l,o,c,p,f,h,d;Nt(e,KS,R=>r(7,o=R)),Nt(e,bn,R=>r(19,c=R)),Nt(e,HS,R=>r(14,p=R)),Nt(e,qS,R=>r(15,f=R)),Nt(e,Kp,R=>r(20,h=R)),Nt(e,yf,R=>r(21,d=R));let m=d,y=h,g=null;const _=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001"];let b={C:{name:"Five Sentences",text:kS,builtIn:!0},D:{name:"Ten Sentences",text:RS,builtIn:!0},E:{name:"Fragments",text:LS,builtIn:!0},F:{name:"Concept Shotgun",text:US,builtIn:!0},G:{name:"Poetic Accents",text:VS,builtIn:!0}},C=null,w="",B="";function F(){const R=C==="new"?qp():C;ws.update(R,{name:w,text:B,builtIn:!1}),C==="new"&&r(0,C=R)}function O(){ws.delete(C),r(0,C=null),r(3,w=""),r(4,B=""),Es.delete()}function P(R){r(0,C=R),Es.update(R),R&&R!=="new"?(r(3,w=u[R].name),r(4,B=u[R].text)):R==="new"&&(r(3,w=""),r(4,B=""))}function I(R){P(R.target.value)}function N(R,z){r(2,g=jF(R,z,y||"gpt-3.5-turbo")),g.then(Q=>{console.log(Q),Q.data.choices.forEach((te,ve)=>{const me=Ql(te.message.content);console.log(me);const Fe=me.reduce((Ae,[Ie,Ue],Ve)=>(Ae[Ve]=Dr(Ve,Ie,Ue),Ae),{});Mt.update(bi(Fe,c.weightMode)),zn.update("edit")})})}function H(R,z){r(2,g=VF(R,z,y||"text-davinci-003")),g.then(Q=>{console.log(Q),Q.data.choices.forEach((te,ve)=>{const me=Ql(te.text);console.log(me);const Fe=me.reduce((Ae,[Ie,Ue],Ve)=>(Ae[Ve]=Dr(Ve,Ie,Ue),Ae),{});Mt.update(bi(Fe,c.weightMode)),zn.update("edit")})})}function W(){if(!m||!B||!o)return;const R=bf(m),z=`${B}

        Using the above rules create a prompt from:
        ${o}
        `;_.includes(y)?H(R,z):N(R,z)}function q(){w=this.value,r(3,w)}function J(){B=this.value,r(4,B)}const Y=R=>tf.update(R.target.value);return e.$$.update=()=>{e.$$.dirty[0]&32768&&r(13,n=f.reduce((R,[z,re])=>(R[z]={name:re.name,text:re.text,builtIn:!1},R),{})),e.$$.dirty[0]&8192&&r(1,u=Object.entries({...b,...n}).reduce((R,[z,re])=>(R[z]=re,R),{})),e.$$.dirty[0]&16385&&(C===null&&r(0,C=p),P(C)),e.$$.dirty[0]&3&&r(6,a=C&&C!=="new"&&u[C].builtIn),e.$$.dirty[0]&3&&r(5,l=C&&C!=="new"&&!u[C].builtIn)},[C,u,g,w,B,l,a,o,m,F,O,I,W,n,p,f,q,J,Y]}class a5 extends Rt{constructor(t){super(),Lt(this,t,u5,i5,Ut,{},null,[-1,-1])}}function yd(e,t,r){const n=e.slice();return n[20]=t[r],n}function Ad(e,t,r){const n=e.slice();return n[20]=t[r],n}function s5(e){return{c:Te,l:Te,m:Te,p:Te,d:Te}}function o5(e){let t,r,n=e[0].length>0&&wd(e),u=e[1].length>0&&Cd(e);return{c(){n&&n.c(),t=Ke(),u&&u.c(),r=Zt()},l(a){n&&n.l(a),t=Ye(a),u&&u.l(a),r=Zt()},m(a,l){n&&n.m(a,l),Ce(a,t,l),u&&u.m(a,l),Ce(a,r,l)},p(a,l){a[0].length>0?n?n.p(a,l):(n=wd(a),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null),a[1].length>0?u?u.p(a,l):(u=Cd(a),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},d(a){n&&n.d(a),a&&V(t),u&&u.d(a),a&&V(r)}}}function wd(e){let t,r,n,u,a,l,o,c,p,f,h=[],d=new Map,m,y,g=e[0];const _=b=>b[20];for(let b=0;b<g.length;b+=1){let C=Ad(e,g,b),w=_(C);d.set(w,h[b]=Ed(w,C))}return{c(){t=se("div"),r=se("div"),n=se("label"),u=se("span"),a=$e("Pick a model to use for model generation"),l=Ke(),o=se("select"),c=se("option"),p=$e("Pick one");for(let b=0;b<h.length;b+=1)h[b].c();this.h()},l(b){t=oe(b,"DIV",{class:!0});var C=ie(t);r=oe(C,"DIV",{class:!0});var w=ie(r);n=oe(w,"LABEL",{class:!0});var B=ie(n);u=oe(B,"SPAN",{class:!0});var F=ie(u);a=Xe(F,"Pick a model to use for model generation"),F.forEach(V),B.forEach(V),l=Ye(w),o=oe(w,"SELECT",{class:!0});var O=ie(o);c=oe(O,"OPTION",{});var P=ie(c);p=Xe(P,"Pick one"),P.forEach(V);for(let I=0;I<h.length;I+=1)h[I].l(O);O.forEach(V),w.forEach(V),C.forEach(V),this.h()},h(){x(u,"class","label-text"),x(n,"class","label"),c.disabled=!0,c.selected=f=e[2]===null,c.__value="Pick one",c.value=c.__value,x(o,"class","select select-bordered"),x(r,"class","form-control w-full max-w-xs mb-4"),x(t,"class","flex justify-center")},m(b,C){Ce(b,t,C),K(t,r),K(r,n),K(n,u),K(u,a),K(r,l),K(r,o),K(o,c),K(c,p);for(let w=0;w<h.length;w+=1)h[w]&&h[w].m(o,null);pu(o,e[2]),m||(y=Ne(o,"change",e[7]),m=!0)},p(b,C){C&5&&f!==(f=b[2]===null)&&(c.selected=f),C&5&&(g=b[0],h=Fi(h,C,_,1,b,g,d,o,mu,Ed,null,Ad)),C&5&&pu(o,b[2])},d(b){b&&V(t);for(let C=0;C<h.length;C+=1)h[C].d();m=!1,y()}}}function Ed(e,t){let r,n=t[20]+"",u,a,l;return{key:e,first:null,c(){r=se("option"),u=$e(n),this.h()},l(o){r=oe(o,"OPTION",{});var c=ie(r);u=Xe(c,n),c.forEach(V),this.h()},h(){r.__value=a=t[20],r.value=r.__value,r.selected=l=t[2]===t[20],this.first=r},m(o,c){Ce(o,r,c),K(r,u)},p(o,c){t=o,c&1&&n!==(n=t[20]+"")&&Mn(u,n),c&1&&a!==(a=t[20])&&(r.__value=a,r.value=r.__value),c&5&&l!==(l=t[2]===t[20])&&(r.selected=l)},d(o){o&&V(r)}}}function Cd(e){let t,r,n,u,a,l,o,c,p,f,h=[],d=new Map,m,y,g=e[1];const _=b=>b[20];for(let b=0;b<g.length;b+=1){let C=yd(e,g,b),w=_(C);d.set(w,h[b]=Fd(w,C))}return{c(){t=se("div"),r=se("div"),n=se("label"),u=se("span"),a=$e("Pick a model to use for prompt embedding"),l=Ke(),o=se("select"),c=se("option"),p=$e("Pick one");for(let b=0;b<h.length;b+=1)h[b].c();this.h()},l(b){t=oe(b,"DIV",{class:!0});var C=ie(t);r=oe(C,"DIV",{class:!0});var w=ie(r);n=oe(w,"LABEL",{class:!0});var B=ie(n);u=oe(B,"SPAN",{class:!0});var F=ie(u);a=Xe(F,"Pick a model to use for prompt embedding"),F.forEach(V),B.forEach(V),l=Ye(w),o=oe(w,"SELECT",{class:!0});var O=ie(o);c=oe(O,"OPTION",{});var P=ie(c);p=Xe(P,"Pick one"),P.forEach(V);for(let I=0;I<h.length;I+=1)h[I].l(O);O.forEach(V),w.forEach(V),C.forEach(V),this.h()},h(){x(u,"class","label-text"),x(n,"class","label"),c.disabled=!0,c.selected=f=e[3]===null,c.__value="Pick one",c.value=c.__value,x(o,"class","select select-bordered"),x(r,"class","form-control w-full max-w-xs mb-4"),x(t,"class","flex justify-center")},m(b,C){Ce(b,t,C),K(t,r),K(r,n),K(n,u),K(u,a),K(r,l),K(r,o),K(o,c),K(c,p);for(let w=0;w<h.length;w+=1)h[w]&&h[w].m(o,null);pu(o,e[3]),m||(y=Ne(o,"change",e[8]),m=!0)},p(b,C){C&10&&f!==(f=b[3]===null)&&(c.selected=f),C&10&&(g=b[1],h=Fi(h,C,_,1,b,g,d,o,mu,Fd,null,yd)),C&10&&pu(o,b[3])},d(b){b&&V(t);for(let C=0;C<h.length;C+=1)h[C].d();m=!1,y()}}}function Fd(e,t){let r,n=t[20]+"",u,a,l;return{key:e,first:null,c(){r=se("option"),u=$e(n),this.h()},l(o){r=oe(o,"OPTION",{});var c=ie(r);u=Xe(c,n),c.forEach(V),this.h()},h(){r.__value=a=t[20],r.value=r.__value,r.selected=l=t[3]===t[20],this.first=r},m(o,c){Ce(o,r,c),K(r,u)},p(o,c){t=o,c&2&&n!==(n=t[20]+"")&&Mn(u,n),c&2&&a!==(a=t[20])&&(r.__value=a,r.value=r.__value),c&10&&l!==(l=t[3]===t[20])&&(r.selected=l)},d(o){o&&V(r)}}}function l5(e){let t,r,n;return{c(){t=se("div"),r=se("div"),n=se("progress"),this.h()},l(u){t=oe(u,"DIV",{class:!0});var a=ie(t);r=oe(a,"DIV",{class:!0});var l=ie(r);n=oe(l,"PROGRESS",{class:!0}),ie(n).forEach(V),l.forEach(V),a.forEach(V),this.h()},h(){x(n,"class","progress progress-primary w-56"),x(r,"class","form-control w-full flex flex-col max-w-xs"),x(t,"class","py-10 flex justify-center")},m(u,a){Ce(u,t,a),K(t,r),K(r,n)},p:Te,d(u){u&&V(t)}}}function f5(e){let t,r,n,u,a,l,o,c,p,f,h,d,m,y,g,_,b,C,w,B,F,O,P,I,N={ctx:e,current:null,token:null,hasCatch:!1,pending:l5,then:o5,catch:s5,value:19};return wi(O=e[4],N),{c(){t=se("div"),r=se("div"),n=se("div"),u=se("label"),a=se("span"),l=$e("Include Prompts With Zero Weight"),o=Ke(),c=se("input"),p=Ke(),f=se("div"),h=se("div"),d=se("label"),m=se("span"),y=$e("Open AI Key"),g=Ke(),_=se("input"),b=Ke(),C=se("label"),w=se("button"),B=$e("Clear"),F=Ke(),N.block.c(),this.h()},l(H){t=oe(H,"DIV",{class:!0});var W=ie(t);r=oe(W,"DIV",{class:!0});var q=ie(r);n=oe(q,"DIV",{class:!0});var J=ie(n);u=oe(J,"LABEL",{class:!0});var Y=ie(u);a=oe(Y,"SPAN",{class:!0});var R=ie(a);l=Xe(R,"Include Prompts With Zero Weight"),R.forEach(V),Y.forEach(V),o=Ye(J),c=oe(J,"INPUT",{type:!0,class:!0}),J.forEach(V),q.forEach(V),p=Ye(W),f=oe(W,"DIV",{class:!0});var z=ie(f);h=oe(z,"DIV",{class:!0});var re=ie(h);d=oe(re,"LABEL",{class:!0});var Q=ie(d);m=oe(Q,"SPAN",{class:!0});var te=ie(m);y=Xe(te,"Open AI Key"),te.forEach(V),Q.forEach(V),g=Ye(re),_=oe(re,"INPUT",{type:!0,placeholder:!0,class:!0}),b=Ye(re),C=oe(re,"LABEL",{class:!0});var ve=ie(C);w=oe(ve,"BUTTON",{class:!0});var me=ie(w);B=Xe(me,"Clear"),me.forEach(V),ve.forEach(V),re.forEach(V),z.forEach(V),F=Ye(W),N.block.l(W),W.forEach(V),this.h()},h(){x(a,"class","label-text-alt"),x(u,"class","label"),x(c,"type","checkbox"),x(c,"class","toggle"),c.checked=e[5],x(n,"class","form-control w-full max-w-xs"),x(r,"class","flex justify-center"),x(m,"class","label-text-alt"),x(d,"class","label"),_.value=e[6],x(_,"type","password"),x(_,"placeholder","Open AI Key"),x(_,"class","input input-bordered w-full max-w-xs"),x(w,"class","btn btn-xs btn-error"),x(C,"class","label"),x(h,"class","form-control w-full max-w-xs"),x(f,"class","flex justify-center"),x(t,"class","h-full p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(H,W){Ce(H,t,W),K(t,r),K(r,n),K(n,u),K(u,a),K(a,l),K(n,o),K(n,c),K(t,p),K(t,f),K(f,h),K(h,d),K(d,m),K(m,y),K(h,g),K(h,_),K(h,b),K(h,C),K(C,w),K(w,B),K(t,F),N.block.m(t,N.anchor=null),N.mount=()=>t,N.anchor=null,P||(I=[Ne(c,"change",e[11]),Ne(_,"input",e[9]),Ne(w,"click",e[10])],P=!0)},p(H,[W]){e=H,W&32&&(c.checked=e[5]),W&64&&_.value!==e[6]&&(_.value=e[6]),N.ctx=e,W&16&&O!==(O=e[4])&&wi(O,N)||Ss(N,e,W)},i:Te,o:Te,d(H){H&&V(t),N.block.d(),N.token=null,N=null,P=!1,Lr(I)}}}function c5(e,t,r){let n,u,a,l,o;Nt(e,jp,O=>r(5,n=O)),Nt(e,bn,O=>r(13,u=O)),Nt(e,Vp,O=>r(14,a=O)),Nt(e,Kp,O=>r(15,l=O)),Nt(e,yf,O=>r(6,o=O));const c=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001","gpt-3.5-turbo","gpt-3.5-turbo-0301"],p=["text-embedding-ada-002"];let f=o,h=[],d=[],m=l,y=a,g=null;async function _(O){if(!O||h.length&&d.length)return;const P=bf(O);r(4,g=zF(P));const I=await g;I.data&&r(0,h=I.data.data.map(({id:N})=>N).filter(N=>c.includes(N))),r(1,d=I.data.data.map(({id:N})=>N).filter(N=>p.includes(N)))}function b(O){r(2,m=O.target.value),ef.update(m)}function C(O){r(3,y=O.target.value),Xl.update(y)}function w(O){const P=O.target.value;Ds.update(P),P.length===51&&_(P),P.length===0&&B()}function B(){Ds.delete(),r(12,f=""),r(0,h=[]),r(1,d=[]),u.weightMode==="embed"&&Mt.update({...u,weightMode:"circle"})}function F(){Jl.update(!n)}return e.$$.update=()=>{e.$$.dirty&4096&&_(f)},[h,d,m,y,g,n,o,b,C,w,B,F,f]}class h5 extends Rt{constructor(t){super(),Lt(this,t,c5,f5,Ut,{})}}function d5(e){let t,r;return t=new h5({}),{c(){ht(t.$$.fragment)},l(n){dt(t.$$.fragment,n)},m(n,u){pt(t,n,u),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Le(t.$$.fragment,n),r=!1},d(n){vt(t,n)}}}function p5(e){let t,r;return t=new a5({}),{c(){ht(t.$$.fragment)},l(n){dt(t.$$.fragment,n)},m(n,u){pt(t,n,u),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Le(t.$$.fragment,n),r=!1},d(n){vt(t,n)}}}function v5(e){let t,r;return t=new NS({}),{c(){ht(t.$$.fragment)},l(n){dt(t.$$.fragment,n)},m(n,u){pt(t,n,u),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Le(t.$$.fragment,n),r=!1},d(n){vt(t,n)}}}function g5(e){let t,r;return t=new O3({}),{c(){ht(t.$$.fragment)},l(n){dt(t.$$.fragment,n)},m(n,u){pt(t,n,u),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Le(t.$$.fragment,n),r=!1},d(n){vt(t,n)}}}function m5(e){let t,r,n,u,a,l,o,c,p,f,h,d,m,y,g,_,b,C,w,B,F,O,P,I;const N=[g5,v5,p5,d5],H=[];function W(q,J){return q[0]==="select"?0:q[0]==="edit"?1:q[0]==="generate"?2:q[0]==="settings"?3:-1}return~(B=W(e))&&(F=H[B]=N[B](e)),{c(){t=se("div"),r=se("div"),n=se("div"),u=se("button"),a=$e("Select"),o=Ke(),c=se("button"),p=$e("Edit"),h=Ke(),d=se("button"),m=$e("Generate"),g=Ke(),_=se("button"),b=$e("Settings"),w=Ke(),F&&F.c(),this.h()},l(q){t=oe(q,"DIV",{class:!0});var J=ie(t);r=oe(J,"DIV",{class:!0});var Y=ie(r);n=oe(Y,"DIV",{class:!0});var R=ie(n);u=oe(R,"BUTTON",{class:!0});var z=ie(u);a=Xe(z,"Select"),z.forEach(V),o=Ye(R),c=oe(R,"BUTTON",{class:!0});var re=ie(c);p=Xe(re,"Edit"),re.forEach(V),h=Ye(R),d=oe(R,"BUTTON",{class:!0});var Q=ie(d);m=Xe(Q,"Generate"),Q.forEach(V),g=Ye(R),_=oe(R,"BUTTON",{class:!0});var te=ie(_);b=Xe(te,"Settings"),te.forEach(V),R.forEach(V),w=Ye(Y),F&&F.l(Y),Y.forEach(V),J.forEach(V),this.h()},h(){x(u,"class",l=e[0]==="select"?"btn btn-active":"btn"),x(c,"class",f=e[0]==="edit"?"btn btn-active":"btn"),x(d,"class",y=e[0]==="generate"?"btn btn-active":"btn"),x(_,"class",C=e[0]==="settings"?"btn btn-active":"btn"),x(n,"class","btn-group btn-group-vertical sm:btn-group-horizontal bg-base-100 w-full flex justify-center p-2"),x(r,"class","h-screen overflow-y-auto flex flex-col"),x(t,"class","max-w-md w-1/2 h-screen overflow-y-auto")},m(q,J){Ce(q,t,J),K(t,r),K(r,n),K(n,u),K(u,a),K(n,o),K(n,c),K(c,p),K(n,h),K(n,d),K(d,m),K(n,g),K(n,_),K(_,b),K(r,w),~B&&H[B].m(r,null),O=!0,P||(I=[Ne(u,"click",e[2]),Ne(c,"click",e[3]),Ne(d,"click",e[4]),Ne(_,"click",e[5])],P=!0)},p(q,[J]){(!O||J&1&&l!==(l=q[0]==="select"?"btn btn-active":"btn"))&&x(u,"class",l),(!O||J&1&&f!==(f=q[0]==="edit"?"btn btn-active":"btn"))&&x(c,"class",f),(!O||J&1&&y!==(y=q[0]==="generate"?"btn btn-active":"btn"))&&x(d,"class",y),(!O||J&1&&C!==(C=q[0]==="settings"?"btn btn-active":"btn"))&&x(_,"class",C);let Y=B;B=W(q),B!==Y&&(F&&(mn(),Le(H[Y],1,1,()=>{H[Y]=null}),_n()),~B?(F=H[B],F||(F=H[B]=N[B](q),F.c()),xe(F,1),F.m(r,null)):F=null)},i(q){O||(xe(F),O=!0)},o(q){Le(F),O=!1},d(q){q&&V(t),~B&&H[B].d(),P=!1,Lr(I)}}}function _5(e,t,r){let n;Nt(e,E3,p=>r(0,n=p));function u(p){zn.update(p)}const a=()=>u("select"),l=()=>u("edit"),o=()=>u("generate"),c=()=>u("settings");return e.$$.update=()=>{e.$$.dirty&1&&(n||zn.update("select"))},[n,u,a,l,o,c]}class D5 extends Rt{constructor(t){super(),Lt(this,t,_5,m5,Ut,{})}}function b5(e){let t,r,n,u;return t=new D5({}),n=new _3({}),{c(){ht(t.$$.fragment),r=Ke(),ht(n.$$.fragment)},l(a){dt(t.$$.fragment,a),r=Ye(a),dt(n.$$.fragment,a)},m(a,l){pt(t,a,l),Ce(a,r,l),pt(n,a,l),u=!0},p:Te,i(a){u||(xe(t.$$.fragment,a),xe(n.$$.fragment,a),u=!0)},o(a){Le(t.$$.fragment,a),Le(n.$$.fragment,a),u=!1},d(a){vt(t,a),a&&V(r),vt(n,a)}}}class w5 extends Rt{constructor(t){super(),Lt(this,t,null,b5,Ut,{})}}export{w5 as default};
