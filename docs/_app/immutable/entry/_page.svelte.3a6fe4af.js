import{S as Dt,i as bt,s as yt,J as dt,K as pt,m as G,h as I,n as B,b as me,G as R,H as Te,L as Ct,k as Z,y as Ke,a as Ie,l as X,z as $e,c as Ne,M as Pt,A as Ye,N as Se,g as ye,d as Ee,B as Ze,O as ar,I as ut,p as Yt,q as Re,r as Le,u as Zr,v as _r,f as Dr,e as Tt,P as zs,Q as Zi,R as ha,T as rn,U as dp,V as $i,W as $n,X as pp,Y as ps,Z as gp,_ as Pi,$ as Bi,a0 as Ty}from"../chunks/index.3ecf25e2.js";import{d as qr,w as zr}from"../chunks/index.e812f28f.js";function Xl(){return Xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xl.apply(this,arguments)}var vp={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function tr(t){return typeof t=="number"}function Fn(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function mp(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function _p(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Dp(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Hn(t){return typeof t=="string"}var Qt=Array.isArray;function Yr(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function gs(t){return Array.isArray(t)||Yr(t)}function ky(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Iy(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Ny(t){return t&&t.constructor.prototype.isRange===!0||!1}function Af(t){return t&&t.constructor.prototype.isIndex===!0||!1}function xy(t){return typeof t=="boolean"}function Ry(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function Ly(t){return t&&t.constructor.prototype.isHelp===!0||!1}function Uy(t){return typeof t=="function"}function Vy(t){return t instanceof Date}function jy(t){return t instanceof RegExp}function qy(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!mp(t)&&!_p(t))}function zy(t){return t===null}function Ef(t){return t===void 0}function Wy(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Hy(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function Gy(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ky(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function $y(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Yy(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function Zy(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Xy(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function Jy(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function Qy(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function ew(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function tw(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function rw(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function nw(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function iw(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function uw(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function aw(t){return t&&t.constructor.prototype.isChain===!0||!1}function ia(t){var e=typeof t;return e==="object"?t===null?"null":Fn(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Er(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return Er(r)});if(t instanceof Date)return new Date(t.valueOf());if(Fn(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return sw(t,Er)}function sw(t,e){var r={};for(var n in t)aa(t,n)&&(r[n]=e(t[n]));return r}function ow(t,e){for(var r in e)aa(e,r)&&(t[r]=e[r]);return t}function vs(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!vs(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!vs(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function aa(t,e){return t&&Object.hasOwnProperty.call(t,e)}function lw(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],u=t[i];u!==void 0&&(r[i]=u)}return r}var fw=["Matrix","Array"],cw=["number","BigNumber","Fraction"],Ws=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(vp)};Xl(Ws,vp,{MATRIX_OPTIONS:fw,NUMBER_OPTIONS:cw});function In(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=hw(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,o=!1,s;return{s:function(){r=r.call(t)},n:function(){var p=r.next();return u=p.done,p},e:function(p){o=!0,s=p},f:function(){try{!u&&r.return!=null&&r.return()}finally{if(o)throw s}}}}function hw(t,e){if(t){if(typeof t=="string")return s0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s0(t,e)}}function s0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _u(t){return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_u(t)}function o0(){return!0}function En(){return!1}function gu(){}var l0="Argument is not a typed-function.";function bp(){function t(j){return _u(j)==="object"&&j!==null&&j.constructor===Object}var e=[{name:"number",test:function(W){return typeof W=="number"}},{name:"string",test:function(W){return typeof W=="string"}},{name:"boolean",test:function(W){return typeof W=="boolean"}},{name:"Function",test:function(W){return typeof W=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(W){return W instanceof Date}},{name:"RegExp",test:function(W){return W instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(W){return W===null}},{name:"undefined",test:function(W){return W===void 0}}],r={name:"any",test:o0,isAny:!0},n,i,u=0,o={createCount:0};function s(j){var W=n.get(j);if(W)return W;var ee='Unknown type "'+j+'"',fe=j.toLowerCase(),ae,he=In(i),se;try{for(he.s();!(se=he.n()).done;)if(ae=se.value,ae.toLowerCase()===fe){ee+='. Did you mean "'+ae+'" ?';break}}catch(ce){he.e(ce)}finally{he.f()}throw new TypeError(ee)}function f(j){for(var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",ee=W?s(W).index:i.length,fe=[],ae=0;ae<j.length;++ae){if(!j[ae]||typeof j[ae].name!="string"||typeof j[ae].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var he=j[ae].name;if(n.has(he))throw new TypeError('Duplicate type name "'+he+'"');fe.push(he),n.set(he,{name:he,test:j[ae].test,isAny:j[ae].isAny,index:ee+ae,conversionsTo:[]})}var se=i.slice(ee);i=i.slice(0,ee).concat(fe).concat(se);for(var ce=ee+fe.length;ce<i.length;++ce)n.get(i[ce]).index=ce}function p(){n=new Map,i=[],u=0,f([r],!1)}p(),f(e);function c(){var j,W=In(i),ee;try{for(W.s();!(ee=W.n()).done;)j=ee.value,n.get(j).conversionsTo=[]}catch(fe){W.e(fe)}finally{W.f()}u=0}function d(j){var W=i.filter(function(ee){var fe=n.get(ee);return!fe.isAny&&fe.test(j)});return W.length?W:["any"]}function h(j){return j&&typeof j=="function"&&"_typedFunctionData"in j}function g(j,W,ee){if(!h(j))throw new TypeError(l0);var fe=ee&&ee.exact,ae=Array.isArray(W)?W.join(","):W,he=F(ae),se=_(he);if(!fe||se in j.signatures){var ce=j._typedFunctionData.signatureMap.get(se);if(ce)return ce}var we=he.length,xe;if(fe){xe=[];var rt;for(rt in j.signatures)xe.push(j._typedFunctionData.signatureMap.get(rt))}else xe=j._typedFunctionData.signatures;for(var Be=0;Be<we;++Be){var zt=he[Be],Nt=[],rr=void 0,Zt=In(xe),br;try{for(Zt.s();!(br=Zt.n()).done;){rr=br.value;var Xt=P(rr.params,Be);if(!(!Xt||zt.restParam&&!Xt.restParam)){if(!Xt.hasAny){var yr=function(){var pr=A(Xt);if(zt.types.some(function(Bn){return!pr.has(Bn.name)}))return"continue"}();if(yr==="continue")continue}Nt.push(rr)}}}catch(pr){Zt.e(pr)}finally{Zt.f()}if(xe=Nt,xe.length===0)break}var cr,hr=In(xe),dn;try{for(hr.s();!(dn=hr.n()).done;)if(cr=dn.value,cr.params.length<=we)return cr}catch(pr){hr.e(pr)}finally{hr.f()}throw new TypeError("Signature not found (signature: "+(j.name||"unnamed")+"("+_(he,", ")+"))")}function b(j,W,ee){return g(j,W,ee).implementation}function v(j,W){var ee=s(W);if(ee.test(j))return j;var fe=ee.conversionsTo;if(fe.length===0)throw new Error("There are no conversions to "+W+" defined.");for(var ae=0;ae<fe.length;ae++){var he=s(fe[ae].from);if(he.test(j))return fe[ae].convert(j)}throw new Error("Cannot convert "+j+" to "+W)}function _(j){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return j.map(function(ee){return ee.name}).join(W)}function D(j){var W=j.indexOf("...")===0,ee=W?j.length>3?j.slice(3):"any":j,fe=ee.split("|").map(function(ce){return s(ce.trim())}),ae=!1,he=W?"...":"",se=fe.map(function(ce){return ae=ce.isAny||ae,he+=ce.name+"|",{name:ce.name,typeIndex:ce.index,test:ce.test,isAny:ce.isAny,conversion:null,conversionIndex:-1}});return{types:se,name:he.slice(0,-1),hasAny:ae,hasConversion:!1,restParam:W}}function C(j){var W=j.types.map(function(se){return se.name}),ee=te(W),fe=j.hasAny,ae=j.name,he=ee.map(function(se){var ce=s(se.from);return fe=ce.isAny||fe,ae+="|"+se.from,{name:se.from,typeIndex:ce.index,test:ce.test,isAny:ce.isAny,conversion:se,conversionIndex:se.index}});return{types:j.types.concat(he),name:ae,hasAny:fe,hasConversion:he.length>0,restParam:j.restParam}}function A(j){return j.typeSet||(j.typeSet=new Set,j.types.forEach(function(W){return j.typeSet.add(W.name)})),j.typeSet}function F(j){var W=[];if(typeof j!="string")throw new TypeError("Signatures must be strings");var ee=j.trim();if(ee==="")return W;for(var fe=ee.split(","),ae=0;ae<fe.length;++ae){var he=D(fe[ae].trim());if(he.restParam&&ae!==fe.length-1)throw new SyntaxError('Unexpected rest parameter "'+fe[ae]+'": only allowed for the last parameter');if(he.types.length===0)return null;W.push(he)}return W}function E(j){var W=je(j);return W?W.restParam:!1}function S(j){if(!j||j.types.length===0)return o0;if(j.types.length===1)return s(j.types[0].name).test;if(j.types.length===2){var W=s(j.types[0].name).test,ee=s(j.types[1].name).test;return function(he){return W(he)||ee(he)}}else{var fe=j.types.map(function(ae){return s(ae.name).test});return function(he){for(var se=0;se<fe.length;se++)if(fe[se](he))return!0;return!1}}}function T(j){var W,ee,fe;if(E(j)){W=He(j).map(S);var ae=W.length,he=S(je(j)),se=function(we){for(var xe=ae;xe<we.length;xe++)if(!he(we[xe]))return!1;return!0};return function(we){for(var xe=0;xe<W.length;xe++)if(!W[xe](we[xe]))return!1;return se(we)&&we.length>=ae+1}}else return j.length===0?function(we){return we.length===0}:j.length===1?(ee=S(j[0]),function(we){return ee(we[0])&&we.length===1}):j.length===2?(ee=S(j[0]),fe=S(j[1]),function(we){return ee(we[0])&&fe(we[1])&&we.length===2}):(W=j.map(S),function(we){for(var xe=0;xe<W.length;xe++)if(!W[xe](we[xe]))return!1;return we.length===W.length})}function P(j,W){return W<j.length?j[W]:E(j)?je(j):null}function x(j,W){var ee=P(j,W);return ee?A(ee):new Set}function H(j){return j.conversion===null||j.conversion===void 0}function re(j,W){var ee=new Set;return j.forEach(function(fe){var ae=x(fe.params,W),he,se=In(ae),ce;try{for(se.s();!(ce=se.n()).done;)he=ce.value,ee.add(he)}catch(we){se.e(we)}finally{se.f()}}),ee.has("any")?["any"]:Array.from(ee)}function V(j,W,ee){var fe,ae,he=j||"unnamed",se=ee,ce,we=function(){var Zt=[];if(se.forEach(function(Xt){var yr=P(Xt.params,ce),cr=S(yr);(ce<Xt.params.length||E(Xt.params))&&cr(W[ce])&&Zt.push(Xt)}),Zt.length===0){if(ae=re(se,ce),ae.length>0){var br=d(W[ce]);return fe=new TypeError("Unexpected type of argument in function "+he+" (expected: "+ae.join(" or ")+", actual: "+br.join(" | ")+", index: "+ce+")"),fe.data={category:"wrongType",fn:he,index:ce,actual:br,expected:ae},{v:fe}}}else se=Zt};for(ce=0;ce<W.length;ce++){var xe=we();if(_u(xe)==="object")return xe.v}var rt=se.map(function(rr){return E(rr.params)?1/0:rr.params.length});if(W.length<Math.min.apply(null,rt))return ae=re(se,ce),fe=new TypeError("Too few arguments in function "+he+" (expected: "+ae.join(" or ")+", index: "+W.length+")"),fe.data={category:"tooFewArgs",fn:he,index:W.length,expected:ae},fe;var Be=Math.max.apply(null,rt);if(W.length>Be)return fe=new TypeError("Too many arguments in function "+he+" (expected: "+Be+", actual: "+W.length+")"),fe.data={category:"tooManyArgs",fn:he,index:W.length,expectedLength:Be},fe;for(var zt=[],Nt=0;Nt<W.length;++Nt)zt.push(d(W[Nt]).join("|"));return fe=new TypeError('Arguments of type "'+zt.join(", ")+'" do not match any of the defined signatures of function '+he+"."),fe.data={category:"mismatch",actual:zt},fe}function Y(j){for(var W=i.length+1,ee=0;ee<j.types.length;ee++)H(j.types[ee])&&(W=Math.min(W,j.types[ee].typeIndex));return W}function U(j){for(var W=u+1,ee=0;ee<j.types.length;ee++)H(j.types[ee])||(W=Math.min(W,j.types[ee].conversionIndex));return W}function K(j,W){if(j.hasAny){if(!W.hasAny)return 1}else if(W.hasAny)return-1;if(j.restParam){if(!W.restParam)return 1}else if(W.restParam)return-1;if(j.hasConversion){if(!W.hasConversion)return 1}else if(W.hasConversion)return-1;var ee=Y(j)-Y(W);if(ee<0)return-1;if(ee>0)return 1;var fe=U(j)-U(W);return fe<0?-1:fe>0?1:0}function q(j,W){var ee=j.params,fe=W.params,ae=je(ee),he=je(fe),se=E(ee),ce=E(fe);if(se&&ae.hasAny){if(!ce||!he.hasAny)return 1}else if(ce&&he.hasAny)return-1;var we=0,xe=0,rt,Be=In(ee),zt;try{for(Be.s();!(zt=Be.n()).done;)rt=zt.value,rt.hasAny&&++we,rt.hasConversion&&++xe}catch(Ln){Be.e(Ln)}finally{Be.f()}var Nt=0,rr=0,Zt=In(fe),br;try{for(Zt.s();!(br=Zt.n()).done;)rt=br.value,rt.hasAny&&++Nt,rt.hasConversion&&++rr}catch(Ln){Zt.e(Ln)}finally{Zt.f()}if(we!==Nt)return we-Nt;if(se&&ae.hasConversion){if(!ce||!he.hasConversion)return 1}else if(ce&&he.hasConversion)return-1;if(xe!==rr)return xe-rr;if(se){if(!ce)return 1}else if(ce)return-1;var Xt=(ee.length-fe.length)*(se?-1:1);if(Xt!==0)return Xt;for(var yr=[],cr=0,hr=0;hr<ee.length;++hr){var dn=K(ee[hr],fe[hr]);yr.push(dn),cr+=dn}if(cr!==0)return cr;for(var pr,Bn=0,Zn=yr;Bn<Zn.length;Bn++)if(pr=Zn[Bn],pr!==0)return pr;return 0}function te(j){if(j.length===0)return[];var W=j.map(s);j.length>1&&W.sort(function(we,xe){return we.index-xe.index});var ee=W[0].conversionsTo;if(j.length===1)return ee;ee=ee.concat([]);for(var fe=new Set(j),ae=1;ae<W.length;++ae){var he=void 0,se=In(W[ae].conversionsTo),ce;try{for(se.s();!(ce=se.n()).done;)he=ce.value,fe.has(he.from)||(ee.push(he),fe.add(he.from))}catch(we){se.e(we)}finally{se.f()}}return ee}function Q(j,W){var ee=W;if(j.some(function(ce){return ce.hasConversion})){var fe=E(j),ae=j.map(J);ee=function(){for(var we=[],xe=fe?arguments.length-1:arguments.length,rt=0;rt<xe;rt++)we[rt]=ae[rt](arguments[rt]);return fe&&(we[xe]=arguments[xe].map(ae[xe])),W.apply(this,we)}}var he=ee;if(E(j)){var se=j.length-1;he=function(){return ee.apply(this,ze(arguments,0,se).concat([ze(arguments,se)]))}}return he}function J(j){var W,ee,fe,ae,he=[],se=[];switch(j.types.forEach(function(ce){ce.conversion&&(he.push(s(ce.conversion.from).test),se.push(ce.conversion.convert))}),se.length){case 0:return function(we){return we};case 1:return W=he[0],fe=se[0],function(we){return W(we)?fe(we):we};case 2:return W=he[0],ee=he[1],fe=se[0],ae=se[1],function(we){return W(we)?fe(we):ee(we)?ae(we):we};default:return function(we){for(var xe=0;xe<se.length;xe++)if(he[xe](we))return se[xe](we);return we}}}function le(j){function W(ee,fe,ae){if(fe<ee.length){var he=ee[fe],se=[];if(he.restParam){var ce=he.types.filter(H);ce.length<he.types.length&&se.push({types:ce,name:"..."+ce.map(function(we){return we.name}).join("|"),hasAny:ce.some(function(we){return we.isAny}),hasConversion:!1,restParam:!0}),se.push(he)}else se=he.types.map(function(we){return{types:[we],name:we.name,hasAny:we.isAny,hasConversion:we.conversion,restParam:!1}});return at(se,function(we){return W(ee,fe+1,ae.concat([we]))})}else return[ae]}return W(j,0,[])}function _e(j,W){for(var ee=Math.max(j.length,W.length),fe=0;fe<ee;fe++){var ae=x(j,fe),he=x(W,fe),se=!1,ce=void 0,we=In(he),xe;try{for(we.s();!(xe=we.n()).done;)if(ce=xe.value,ae.has(ce)){se=!0;break}}catch(rr){we.e(rr)}finally{we.f()}if(!se)return!1}var rt=j.length,Be=W.length,zt=E(j),Nt=E(W);return zt?Nt?rt===Be:Be>=rt:Nt?rt>=Be:rt===Be}function Fe(j){return j.map(function(W){return Je(W)?ot(W.referToSelf.callback):Xe(W)?st(W.referTo.references,W.referTo.callback):W})}function Ae(j,W,ee){var fe=[],ae,he=In(j),se;try{for(he.s();!(se=he.n()).done;){ae=se.value;var ce=ee[ae];if(typeof ce!="number")throw new TypeError('No definition for referenced signature "'+ae+'"');if(ce=W[ce],typeof ce!="function")return!1;fe.push(ce)}}catch(we){he.e(we)}finally{he.f()}return fe}function Me(j,W,ee){for(var fe=Fe(j),ae=new Array(fe.length).fill(!1),he=!0;he;){he=!1;for(var se=!0,ce=0;ce<fe.length;++ce)if(!ae[ce]){var we=fe[ce];if(Je(we))fe[ce]=we.referToSelf.callback(ee),fe[ce].referToSelf=we.referToSelf,ae[ce]=!0,se=!1;else if(Xe(we)){var xe=Ae(we.referTo.references,fe,W);xe?(fe[ce]=we.referTo.callback.apply(this,xe),fe[ce].referTo=we.referTo,ae[ce]=!0,se=!1):he=!0}}if(se&&he)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return fe}function qe(j){var W=/\bthis(\(|\.signatures\b)/;Object.keys(j).forEach(function(ee){var fe=j[ee];if(W.test(fe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Ve(j,W){if(o.createCount++,Object.keys(W).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&qe(W);var ee=[],fe=[],ae={},he=[],se,ce=function(){if(!Object.prototype.hasOwnProperty.call(W,se))return"continue";var sr=F(se);if(!sr)return"continue";ee.forEach(function(gn){if(_e(gn,sr))throw new TypeError('Conflicting signatures "'+_(gn)+'" and "'+_(sr)+'".')}),ee.push(sr);var Wr=fe.length;fe.push(W[se]);var xi=sr.map(C),Jn=void 0,jn=In(le(xi)),Ri;try{for(jn.s();!(Ri=jn.n()).done;){Jn=Ri.value;var On=_(Jn);he.push({params:Jn,name:On,fn:Wr}),Jn.every(function(gn){return!gn.hasConversion})&&(ae[On]=Wr)}}catch(gn){jn.e(gn)}finally{jn.f()}};for(se in W)var we=ce();he.sort(q);var xe=Me(fe,ae,Vn),rt;for(rt in ae)Object.prototype.hasOwnProperty.call(ae,rt)&&(ae[rt]=xe[ae[rt]]);for(var Be=[],zt=new Map,Nt=0,rr=he;Nt<rr.length;Nt++)rt=rr[Nt],zt.has(rt.name)||(rt.fn=xe[rt.fn],Be.push(rt),zt.set(rt.name,rt));for(var Zt=Be[0]&&Be[0].params.length<=2&&!E(Be[0].params),br=Be[1]&&Be[1].params.length<=2&&!E(Be[1].params),Xt=Be[2]&&Be[2].params.length<=2&&!E(Be[2].params),yr=Be[3]&&Be[3].params.length<=2&&!E(Be[3].params),cr=Be[4]&&Be[4].params.length<=2&&!E(Be[4].params),hr=Be[5]&&Be[5].params.length<=2&&!E(Be[5].params),dn=Zt&&br&&Xt&&yr&&cr&&hr,pr=0;pr<Be.length;++pr)Be[pr].test=T(Be[pr].params);for(var Bn=Zt?S(Be[0].params[0]):En,Zn=br?S(Be[1].params[0]):En,Ln=Xt?S(Be[2].params[0]):En,Un=yr?S(Be[3].params[0]):En,Ji=cr?S(Be[4].params[0]):En,Ii=hr?S(Be[5].params[0]):En,Su=Zt?S(Be[0].params[1]):En,Br=br?S(Be[1].params[1]):En,nr=Xt?S(Be[2].params[1]):En,Bu=yr?S(Be[3].params[1]):En,ci=cr?S(Be[4].params[1]):En,pn=hr?S(Be[5].params[1]):En,Xn=0;Xn<Be.length;++Xn)Be[Xn].implementation=Q(Be[Xn].params,Be[Xn].fn);var Ni=Zt?Be[0].implementation:gu,Ou=br?Be[1].implementation:gu,Mu=Xt?Be[2].implementation:gu,Qi=yr?Be[3].implementation:gu,Pu=cr?Be[4].implementation:gu,Tu=hr?Be[5].implementation:gu,ku=Zt?Be[0].params.length:-1,Iu=br?Be[1].params.length:-1,Nu=Xt?Be[2].params.length:-1,xu=yr?Be[3].params.length:-1,hi=cr?Be[4].params.length:-1,Ru=hr?Be[5].params.length:-1,di=dn?6:0,Lu=Be.length,Uu=Be.map(function(wr){return wr.test}),Vu=Be.map(function(wr){return wr.implementation}),eu=function(){for(var sr=di;sr<Lu;sr++)if(Uu[sr](arguments))return Vu[sr].apply(this,arguments);return o.onMismatch(j,arguments,Be)};function Vn(wr,sr){return arguments.length===ku&&Bn(wr)&&Su(sr)?Ni.apply(this,arguments):arguments.length===Iu&&Zn(wr)&&Br(sr)?Ou.apply(this,arguments):arguments.length===Nu&&Ln(wr)&&nr(sr)?Mu.apply(this,arguments):arguments.length===xu&&Un(wr)&&Bu(sr)?Qi.apply(this,arguments):arguments.length===hi&&Ji(wr)&&ci(sr)?Pu.apply(this,arguments):arguments.length===Ru&&Ii(wr)&&pn(sr)?Tu.apply(this,arguments):eu.apply(this,arguments)}try{Object.defineProperty(Vn,"name",{value:j})}catch{}return Vn.signatures=ae,Vn._typedFunctionData={signatures:Be,signatureMap:zt},Vn}function tt(j,W,ee){throw V(j,W,ee)}function He(j){return ze(j,0,j.length-1)}function je(j){return j[j.length-1]}function ze(j,W,ee){return Array.prototype.slice.call(j,W,ee)}function mt(j,W){for(var ee=0;ee<j.length;ee++)if(W(j[ee]))return j[ee]}function at(j,W){return Array.prototype.concat.apply([],j.map(W))}function ft(){var j=He(arguments).map(function(ee){return _(F(ee))}),W=je(arguments);if(typeof W!="function")throw new TypeError("Callback function expected as last argument");return st(j,W)}function st(j,W){return{referTo:{references:j,callback:W}}}function ot(j){if(typeof j!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:j}}}function Xe(j){return j&&_u(j.referTo)==="object"&&Array.isArray(j.referTo.references)&&typeof j.referTo.callback=="function"}function Je(j){return j&&_u(j.referToSelf)==="object"&&typeof j.referToSelf.callback=="function"}function Ce(j,W){if(!j)return W;if(W&&W!==j){var ee=new Error("Function names do not match (expected: "+j+", actual: "+W+")");throw ee.data={actual:W,expected:j},ee}return j}function Pe(j){var W;for(var ee in j)Object.prototype.hasOwnProperty.call(j,ee)&&(h(j[ee])||typeof j[ee].signature=="string")&&(W=Ce(W,j[ee].name));return W}function Ot(j,W){var ee;for(ee in W)if(Object.prototype.hasOwnProperty.call(W,ee)){if(ee in j&&W[ee]!==j[ee]){var fe=new Error('Signature "'+ee+'" is defined twice');throw fe.data={signature:ee,sourceFunction:W[ee],destFunction:j[ee]},fe}j[ee]=W[ee]}}var Vt=o;o=function(W){for(var ee=typeof W=="string",fe=ee?1:0,ae=ee?W:"",he={},se=fe;se<arguments.length;++se){var ce=arguments[se],we={},xe=void 0;if(typeof ce=="function"?(xe=ce.name,typeof ce.signature=="string"?we[ce.signature]=ce:h(ce)&&(we=ce.signatures)):t(ce)&&(we=ce,ee||(xe=Pe(ce))),Object.keys(we).length===0){var rt=new TypeError("Argument to 'typed' at index "+se+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw rt.data={index:se,argument:ce},rt}ee||(ae=Ce(ae,xe)),Ot(he,we)}return Ve(ae||"",he)},o.create=bp,o.createCount=Vt.createCount,o.onMismatch=tt,o.throwMismatchError=tt,o.createError=V,o.clear=p,o.clearConversions=c,o.addTypes=f,o._findType=s,o.referTo=ft,o.referToSelf=ot,o.convert=v,o.findSignature=g,o.find=b,o.isTypedFunction=h,o.warnAgainstDeprecatedThis=!0,o.addType=function(j,W){var ee="any";W!==!1&&n.has("Object")&&(ee="Object"),o.addTypes([j],ee)};function Ht(j){if(!j||typeof j.from!="string"||typeof j.to!="string"||typeof j.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(j.to===j.from)throw new SyntaxError('Illegal to define conversion from "'+j.from+'" to itself.')}return o.addConversion=function(j){Ht(j);var W=s(j.to);if(W.conversionsTo.every(function(ee){return ee.from!==j.from}))W.conversionsTo.push({from:j.from,convert:j.convert,index:u++});else throw new Error('There is already a conversion from "'+j.from+'" to "'+W.name+'"')},o.addConversions=function(j){j.forEach(o.addConversion)},o.removeConversion=function(j){Ht(j);var W=s(j.to),ee=mt(W.conversionsTo,function(ae){return ae.from===j.from});if(!ee)throw new Error("Attempt to remove nonexistent conversion from "+j.from+" to "+j.to);if(ee.convert!==j.convert)throw new Error("Conversion to remove does not match existing conversion");var fe=W.conversionsTo.indexOf(ee);W.conversionsTo.splice(fe,1)},o.resolve=function(j,W){if(!h(j))throw new TypeError(l0);for(var ee=j._typedFunctionData.signatures,fe=0;fe<ee.length;++fe)if(ee[fe].test(W))return ee[fe];return null},o}const f0=bp();function Cr(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function gl(t,e,r){var n={2:"0b",8:"0o",16:"0x"},i=n[e],u="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Cr(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Cr(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),u="i".concat(r)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(i).concat(t.toString(e)).concat(u)}function Jl(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",n,i;if(e&&(e.notation&&(r=e.notation),tr(e)?n=e:tr(e.precision)&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return pw(t,n);case"exponential":return yp(t,n);case"engineering":return dw(t,n);case"bin":return gl(t,2,i);case"oct":return gl(t,8,i);case"hex":return gl(t,16,i);case"auto":return gw(t,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var u=arguments[2],o=arguments[4];return u!=="."?u+o:o});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Hs(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),u=n.indexOf(".");i+=u!==-1?u-1:n.length-1;var o=n.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return o.length===0&&(o.push(0),i++),{sign:r,coefficients:o,exponent:i}}function dw(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Hs(t),n=Gs(r,e),i=n.exponent,u=n.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(tr(e))for(;e>u.length||i-o+1>u.length;)u.push(0);else for(var s=Math.abs(i-o)-(u.length-1),f=0;f<s;f++)u.push(0);for(var p=Math.abs(i-o),c=1;p>0;)c++,p--;var d=u.slice(c).join(""),h=tr(e)&&d.length||d.match(/[1-9]/)?"."+d:"",g=u.slice(0,c).join("")+h+"e"+(i>=0?"+":"")+o.toString();return n.sign+g}function pw(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Hs(t),n=typeof e=="number"?Gs(r,r.exponent+1+e):r,i=n.coefficients,u=n.exponent+1,o=u+(e||0);return i.length<o&&(i=i.concat(bu(o-i.length))),u<0&&(i=bu(-u+1).concat(i),u=1),u<i.length&&i.splice(u,0,u===0?"0.":"."),n.sign+i.join("")}function yp(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=Hs(t),n=e?Gs(r,e):r,i=n.coefficients,u=n.exponent;i.length<e&&(i=i.concat(bu(e-i.length)));var o=i.shift();return n.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(u>=0?"+":"")+u}function gw(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=r&&r.lowerExp!==void 0?r.lowerExp:-3,i=r&&r.upperExp!==void 0?r.upperExp:5,u=Hs(t),o=e?Gs(u,e):u;if(o.exponent<n||o.exponent>=i)return yp(t,e);var s=o.coefficients,f=o.exponent;s.length<e&&(s=s.concat(bu(e-s.length))),s=s.concat(bu(f-s.length+1+(s.length<e?e-s.length:0))),s=bu(-f).concat(s);var p=f>0?f:0;return p<s.length-1&&s.splice(p+1,0,"."),o.sign+s.join("")}function Gs(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var u=e-1;for(n[u]++;n[u]===10;)n.pop(),u===0&&(n.unshift(0),r.exponent++,u++),u--,n[u]++}}return r}function bu(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function vw(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var mw=Number.EPSILON||2220446049250313e-31;function ms(t,e,r){if(r==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var n=Math.abs(t-e);return n<mw?!0:n<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}function vl(t,e,r){var n=t.constructor,i=new n(2),u="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Cr(r))throw new Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),u="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(u);case 8:return"".concat(t.toOctal()).concat(u);case 16:return"".concat(t.toHexadecimal()).concat(u);default:throw new Error("Base ".concat(e," not supported "))}}function _w(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",n,i;if(e!==void 0&&(e.notation&&(r=e.notation),typeof e=="number"?n=e:e.precision&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return bw(t,n);case"exponential":return c0(t,n);case"engineering":return Dw(t,n);case"bin":return vl(t,2,i);case"oct":return vl(t,8,i);case"hex":return vl(t,16,i);case"auto":{var u=e&&e.lowerExp!==void 0?e.lowerExp:-3,o=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var s,f=t.toSignificantDigits(n),p=f.e;return p>=u&&p<o?s=f.toFixed():s=c0(t,n),s.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],d=arguments[4];return c!=="."?c+d:d})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Dw(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),u=i.toPrecision(e);return u.indexOf("e")!==-1&&(u=i.toString()),u+"e"+(r>=0?"+":"")+n.toString()}function c0(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function bw(t,e){return t.toFixed(e)}function tn(t,e){var r=yw(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function yw(t,e){if(typeof t=="number")return Jl(t,e);if(Fn(t))return _w(t,e);if(ww(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return wp(t,e);if(Hn(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>'"'+n+'": '+tn(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function wp(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=wp(t[i],e);return r+="]",r}else return tn(t,e)}function ww(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function Rt(t,e,r){if(!(this instanceof Rt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Rt.prototype=new RangeError;Rt.prototype.constructor=RangeError;Rt.prototype.name="DimensionError";Rt.prototype.isDimensionError=!0;function Xi(t,e,r){if(!(this instanceof Xi))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Xi.prototype=new RangeError;Xi.prototype.constructor=RangeError;Xi.prototype.name="IndexError";Xi.prototype.isIndexError=!0;function Oi(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function Ap(t,e,r){var n,i=t.length;if(i!==e[r])throw new Rt(i,e[r]);if(r<e.length-1){var u=r+1;for(n=0;n<i;n++){var o=t[n];if(!Array.isArray(o))throw new Rt(e.length-1,e.length,"<");Ap(t[n],e,u)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new Rt(e.length+1,e.length,">")}function h0(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new Rt(t.length,0)}else Ap(t,e,0)}function er(t,e){if(!tr(t)||!Cr(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Xi(t,e)}function d0(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!tr(i)||!Cr(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+tn(e)+")")});var n=r!==void 0?r:0;return Ql(t,e,0,n),t}function Ql(t,e,r,n){var i,u,o=t.length,s=e[r],f=Math.min(o,s);if(t.length=s,r<e.length-1){var p=r+1;for(i=0;i<f;i++)u=t[i],Array.isArray(u)||(u=[u],t[i]=u),Ql(u,e,p,n);for(i=f;i<s;i++)u=[],t[i]=u,Ql(u,e,p,n)}else{for(i=0;i<f;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=f;i<s;i++)t[i]=n}}function Aw(t,e){var r=Cw(t),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Rt(0,n,"!=");e=Cf(e,n);var i=Ep(e);if(n!==i)throw new Rt(i,n,"!=");try{return Ew(r,e)}catch(u){throw u instanceof Rt?new Rt(i,n,"!="):u}}function Cf(t,e){var r=Ep(t),n=t.slice(),i=-1,u=t.indexOf(i),o=t.indexOf(i,u+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var s=u>=0,f=e%r===0;if(s)if(f)n[u]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function Ep(t){return t.reduce((e,r)=>e*r,1)}function Ew(t,e){for(var r=t,n,i=e.length-1;i>0;i--){var u=e[i];n=[];for(var o=r.length/u,s=0;s<o;s++)n.push(r.slice(s*u,(s+1)*u));r=n}return r}function Cp(t,e,r,n){var i=n||Oi(t);if(r)for(var u=0;u<r;u++)t=[t],i.unshift(1);for(t=Fp(t,e,0);i.length<e;)i.push(1);return t}function Fp(t,e,r){var n,i;if(Array.isArray(t)){var u=r+1;for(n=0,i=t.length;n<i;n++)t[n]=Fp(t[n],e,u)}else for(var o=r;o<e;o++)t=[t];return t}function Cw(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function r(n){Array.isArray(n)?n.forEach(r):e.push(n)}),e}function _s(t,e){for(var r,n=0,i=0;i<t.length;i++){var u=t[i],o=Array.isArray(u);if(i===0&&o&&(n=u.length),o&&u.length!==n)return;var s=o?_s(u,e):e(u);if(r===void 0)r=s;else if(r!==s)return"mixed"}return r}function Ut(t,e,r,n){function i(u){var o=lw(u,e.map(Bw));return Fw(t,e,u),r(o)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Fw(t,e,r){var n=e.filter(u=>!Sw(u)).every(u=>r[u]!==void 0);if(!n){var i=e.filter(u=>r[u]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(u=>'"'.concat(u,'"')).join(", "),"."))}}function Sw(t){return t&&t[0]==="?"}function Bw(t){return t&&t[0]==="?"?t.slice(1):t}function Ow(t,e){if(Bp(t)&&Sp(t,e))return t[e];throw typeof t[e]=="function"&&Tw(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Mw(t,e,r){if(Bp(t)&&Sp(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function Pw(t,e){return e in t}function Sp(t,e){return!t||typeof t!="object"?!1:aa(kw,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Tw(t,e){return t==null||typeof t[e]!="function"||aa(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:aa(Iw,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Bp(t){return typeof t=="object"&&t&&t.constructor===Object}var kw={length:!0,name:!0},Iw={toString:!0,valueOf:!0,toLocaleString:!0};class Nw{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return Ow(this.wrappedObject,e)}set(e,r){return Mw(this.wrappedObject,e,r),this}has(e){return Pw(this.wrappedObject,e)}}function xw(t){return t?t instanceof Map||t instanceof Nw||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var Op=function(){return Op=f0.create,f0},Rw=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Lw=Ut("typed",Rw,function(e){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:u}=e,o=Op();return o.clear(),o.addTypes([{name:"number",test:tr},{name:"Complex",test:mp},{name:"BigNumber",test:Fn},{name:"Fraction",test:_p},{name:"Unit",test:Dp},{name:"identifier",test:s=>Hn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(s)},{name:"string",test:Hn},{name:"Chain",test:aw},{name:"Array",test:Qt},{name:"Matrix",test:Yr},{name:"DenseMatrix",test:ky},{name:"SparseMatrix",test:Iy},{name:"Range",test:Ny},{name:"Index",test:Af},{name:"boolean",test:xy},{name:"ResultSet",test:Ry},{name:"Help",test:Ly},{name:"function",test:Uy},{name:"Date",test:Vy},{name:"RegExp",test:jy},{name:"null",test:zy},{name:"undefined",test:Ef},{name:"AccessorNode",test:Wy},{name:"ArrayNode",test:Hy},{name:"AssignmentNode",test:Gy},{name:"BlockNode",test:Ky},{name:"ConditionalNode",test:$y},{name:"ConstantNode",test:Yy},{name:"FunctionNode",test:Xy},{name:"FunctionAssignmentNode",test:Zy},{name:"IndexNode",test:Jy},{name:"Node",test:Qy},{name:"ObjectNode",test:ew},{name:"OperatorNode",test:tw},{name:"ParenthesisNode",test:rw},{name:"RangeNode",test:nw},{name:"RelationalNode",test:iw},{name:"SymbolNode",test:uw},{name:"Map",test:xw},{name:"Object",test:qy}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(f){if(r||ml(f),vw(f)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+f+"). Use function bignumber(x) to convert to BigNumber.");return new r(f)}},{from:"number",to:"Complex",convert:function(f){return n||rs(f),new n(f,0)}},{from:"BigNumber",to:"Complex",convert:function(f){return n||rs(f),new n(f.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(f){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(f){return n||rs(f),new n(f.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(f){u||_l(f);var p=new u(f);if(p.valueOf()!==f)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+f+"). Use function fraction(x) to convert to Fraction.");return p}},{from:"string",to:"number",convert:function(f){var p=Number(f);if(isNaN(p))throw new Error('Cannot convert "'+f+'" to a number');return p}},{from:"string",to:"BigNumber",convert:function(f){r||ml(f);try{return new r(f)}catch{throw new Error('Cannot convert "'+f+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(f){u||_l(f);try{return new u(f)}catch{throw new Error('Cannot convert "'+f+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(f){n||rs(f);try{return new n(f)}catch{throw new Error('Cannot convert "'+f+'" to Complex')}}},{from:"boolean",to:"number",convert:function(f){return+f}},{from:"boolean",to:"BigNumber",convert:function(f){return r||ml(f),new r(+f)}},{from:"boolean",to:"Fraction",convert:function(f){return u||_l(f),new u(+f)}},{from:"boolean",to:"string",convert:function(f){return String(f)}},{from:"Array",to:"Matrix",convert:function(f){return i||Uw(),new i(f)}},{from:"Matrix",to:"Array",convert:function(f){return f.valueOf()}}]),o.onMismatch=(s,f,p)=>{var c=o.createError(s,f,p);if(["wrongType","mismatch"].includes(c.data.category)&&f.length===1&&gs(f[0])&&p.some(h=>!h.params.includes(","))){var d=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw d.data=c.data,d}throw c},o.onMismatch=(s,f,p)=>{var c=o.createError(s,f,p);if(["wrongType","mismatch"].includes(c.data.category)&&f.length===1&&gs(f[0])&&p.some(h=>!h.params.includes(","))){var d=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw d.data=c.data,d}throw c},o});function ml(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function rs(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function Uw(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function _l(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Du=9e15,Ti=1e9,ef="0123456789abcdef",Ds="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",bs="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",tf={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Du,maxE:Du,crypto:!1},Mp,li,lt=!0,Ks="[DecimalError] ",Mi=Ks+"Invalid argument: ",Pp=Ks+"Precision limit exceeded",Tp=Ks+"crypto unavailable",kp="[object Decimal]",jr=Math.floor,mr=Math.pow,Vw=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,jw=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,qw=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Ip=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Rn=1e7,et=7,zw=9007199254740991,Ww=Ds.length-1,rf=bs.length-1,De={toStringTag:kp};De.absoluteValue=De.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Ge(t)};De.ceil=function(){return Ge(new this.constructor(this),this.e+1,2)};De.clampedTo=De.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Mi+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};De.comparedTo=De.cmp=function(t){var e,r,n,i,u=this,o=u.d,s=(t=new u.constructor(t)).d,f=u.s,p=t.s;if(!o||!s)return!f||!p?NaN:f!==p?f:o===s?0:!o^f<0?1:-1;if(!o[0]||!s[0])return o[0]?f:s[0]?-p:0;if(f!==p)return f;if(u.e!==t.e)return u.e>t.e^f<0?1:-1;for(n=o.length,i=s.length,e=0,r=n<i?n:i;e<r;++e)if(o[e]!==s[e])return o[e]>s[e]^f<0?1:-1;return n===i?0:n>i^f<0?1:-1};De.cosine=De.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+et,n.rounding=1,r=Hw(n,Up(n,r)),n.precision=t,n.rounding=e,Ge(li==2||li==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};De.cubeRoot=De.cbrt=function(){var t,e,r,n,i,u,o,s,f,p,c=this,d=c.constructor;if(!c.isFinite()||c.isZero())return new d(c);for(lt=!1,u=c.s*mr(c.s*c,1/3),!u||Math.abs(u)==1/0?(r=xr(c.d),t=c.e,(u=(t-r.length+1)%3)&&(r+=u==1||u==-2?"0":"00"),u=mr(r,1/3),t=jr((t+1)/3)-(t%3==(t<0?-1:2)),u==1/0?r="5e"+t:(r=u.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new d(r),n.s=c.s):n=new d(u.toString()),o=(t=d.precision)+3;;)if(s=n,f=s.times(s).times(s),p=f.plus(c),n=qt(p.plus(c).times(s),p.plus(f),o+2,1),xr(s.d).slice(0,o)===(r=xr(n.d)).slice(0,o))if(r=r.slice(o-3,o+1),r=="9999"||!i&&r=="4999"){if(!i&&(Ge(s,t+1,0),s.times(s).times(s).eq(c))){n=s;break}o+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Ge(n,t+1,1),e=!n.times(n).times(n).eq(c));break}return lt=!0,Ge(n,t,d.rounding,e)};De.decimalPlaces=De.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-jr(this.e/et))*et,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};De.dividedBy=De.div=function(t){return qt(this,new this.constructor(t))};De.dividedToIntegerBy=De.divToInt=function(t){var e=this,r=e.constructor;return Ge(qt(e,new r(t),0,1,1),r.precision,r.rounding)};De.equals=De.eq=function(t){return this.cmp(t)===0};De.floor=function(){return Ge(new this.constructor(this),this.e+1,3)};De.greaterThan=De.gt=function(t){return this.cmp(t)>0};De.greaterThanOrEqualTo=De.gte=function(t){var e=this.cmp(t);return e==1||e===0};De.hyperbolicCosine=De.cosh=function(){var t,e,r,n,i,u=this,o=u.constructor,s=new o(1);if(!u.isFinite())return new o(u.s?1/0:NaN);if(u.isZero())return s;r=o.precision,n=o.rounding,o.precision=r+Math.max(u.e,u.sd())+4,o.rounding=1,i=u.d.length,i<32?(t=Math.ceil(i/3),e=(1/Ys(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),u=wu(o,1,u.times(e),new o(1),!0);for(var f,p=t,c=new o(8);p--;)f=u.times(u),u=s.minus(f.times(c.minus(f.times(c))));return Ge(u,o.precision=r,o.rounding=n,!0)};De.hyperbolicSine=De.sinh=function(){var t,e,r,n,i=this,u=i.constructor;if(!i.isFinite()||i.isZero())return new u(i);if(e=u.precision,r=u.rounding,u.precision=e+Math.max(i.e,i.sd())+4,u.rounding=1,n=i.d.length,n<3)i=wu(u,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/Ys(5,t)),i=wu(u,2,i,i,!0);for(var o,s=new u(5),f=new u(16),p=new u(20);t--;)o=i.times(i),i=i.times(s.plus(o.times(f.times(o).plus(p))))}return u.precision=e,u.rounding=r,Ge(i,e,r,!0)};De.hyperbolicTangent=De.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,qt(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};De.inverseCosine=De.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),i=r.precision,u=r.rounding;return n!==-1?n===0?e.isNeg()?Nn(r,i,u):new r(0):new r(NaN):e.isZero()?Nn(r,i+4,u).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),t=Nn(r,i+4,u).times(.5),r.precision=i,r.rounding=u,t.minus(e))};De.inverseHyperbolicCosine=De.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,lt=!1,r=r.times(r).minus(1).sqrt().plus(r),lt=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};De.inverseHyperbolicSine=De.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,lt=!1,r=r.times(r).plus(1).sqrt().plus(r),lt=!0,n.precision=t,n.rounding=e,r.ln())};De.inverseHyperbolicTangent=De.atanh=function(){var t,e,r,n,i=this,u=i.constructor;return i.isFinite()?i.e>=0?new u(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=u.precision,e=u.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?Ge(new u(i),t,e,!0):(u.precision=r=n-i.e,i=qt(i.plus(1),new u(1).minus(i),r+t,1),u.precision=t+4,u.rounding=1,i=i.ln(),u.precision=t,u.rounding=e,i.times(.5))):new u(NaN)};De.inverseSine=De.asin=function(){var t,e,r,n,i=this,u=i.constructor;return i.isZero()?new u(i):(e=i.abs().cmp(1),r=u.precision,n=u.rounding,e!==-1?e===0?(t=Nn(u,r+4,n).times(.5),t.s=i.s,t):new u(NaN):(u.precision=r+6,u.rounding=1,i=i.div(new u(1).minus(i.times(i)).sqrt().plus(1)).atan(),u.precision=r,u.rounding=n,i.times(2)))};De.inverseTangent=De.atan=function(){var t,e,r,n,i,u,o,s,f,p=this,c=p.constructor,d=c.precision,h=c.rounding;if(p.isFinite()){if(p.isZero())return new c(p);if(p.abs().eq(1)&&d+4<=rf)return o=Nn(c,d+4,h).times(.25),o.s=p.s,o}else{if(!p.s)return new c(NaN);if(d+4<=rf)return o=Nn(c,d+4,h).times(.5),o.s=p.s,o}for(c.precision=s=d+10,c.rounding=1,r=Math.min(28,s/et+2|0),t=r;t;--t)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(lt=!1,e=Math.ceil(s/et),n=1,f=p.times(p),o=new c(p),i=p;t!==-1;)if(i=i.times(f),u=o.minus(i.div(n+=2)),i=i.times(f),o=u.plus(i.div(n+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===u.d[t]&&t--;);return r&&(o=o.times(2<<r-1)),lt=!0,Ge(o,c.precision=d,c.rounding=h,!0)};De.isFinite=function(){return!!this.d};De.isInteger=De.isInt=function(){return!!this.d&&jr(this.e/et)>this.d.length-2};De.isNaN=function(){return!this.s};De.isNegative=De.isNeg=function(){return this.s<0};De.isPositive=De.isPos=function(){return this.s>0};De.isZero=function(){return!!this.d&&this.d[0]===0};De.lessThan=De.lt=function(t){return this.cmp(t)<0};De.lessThanOrEqualTo=De.lte=function(t){return this.cmp(t)<1};De.logarithm=De.log=function(t){var e,r,n,i,u,o,s,f,p=this,c=p.constructor,d=c.precision,h=c.rounding,g=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(r=p.d,p.s<0||!r||!r[0]||p.eq(1))return new c(r&&!r[0]?-1/0:p.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)u=!0;else{for(i=r[0];i%10===0;)i/=10;u=i!==1}if(lt=!1,s=d+g,o=Ci(p,s),n=e?ys(c,s+10):Ci(t,s),f=qt(o,n,s,1),sa(f.d,i=d,h))do if(s+=10,o=Ci(p,s),n=e?ys(c,s+10):Ci(t,s),f=qt(o,n,s,1),!u){+xr(f.d).slice(i+1,i+15)+1==1e14&&(f=Ge(f,d+1,0));break}while(sa(f.d,i+=10,h));return lt=!0,Ge(f,d,h)};De.minus=De.sub=function(t){var e,r,n,i,u,o,s,f,p,c,d,h,g=this,b=g.constructor;if(t=new b(t),!g.d||!t.d)return!g.s||!t.s?t=new b(NaN):g.d?t.s=-t.s:t=new b(t.d||g.s!==t.s?g:NaN),t;if(g.s!=t.s)return t.s=-t.s,g.plus(t);if(p=g.d,h=t.d,s=b.precision,f=b.rounding,!p[0]||!h[0]){if(h[0])t.s=-t.s;else if(p[0])t=new b(g);else return new b(f===3?-0:0);return lt?Ge(t,s,f):t}if(r=jr(t.e/et),c=jr(g.e/et),p=p.slice(),u=c-r,u){for(d=u<0,d?(e=p,u=-u,o=h.length):(e=h,r=c,o=p.length),n=Math.max(Math.ceil(s/et),o)+2,u>n&&(u=n,e.length=1),e.reverse(),n=u;n--;)e.push(0);e.reverse()}else{for(n=p.length,o=h.length,d=n<o,d&&(o=n),n=0;n<o;n++)if(p[n]!=h[n]){d=p[n]<h[n];break}u=0}for(d&&(e=p,p=h,h=e,t.s=-t.s),o=p.length,n=h.length-o;n>0;--n)p[o++]=0;for(n=h.length;n>u;){if(p[--n]<h[n]){for(i=n;i&&p[--i]===0;)p[i]=Rn-1;--p[i],p[n]+=Rn}p[n]-=h[n]}for(;p[--o]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=$s(p,r),lt?Ge(t,s,f):t):new b(f===3?-0:0)};De.modulo=De.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?Ge(new n(r),n.precision,n.rounding):(lt=!1,n.modulo==9?(e=qt(r,t.abs(),0,3,1),e.s*=t.s):e=qt(r,t,0,n.modulo,1),e=e.times(t),lt=!0,r.minus(e))};De.naturalExponential=De.exp=function(){return nf(this)};De.naturalLogarithm=De.ln=function(){return Ci(this)};De.negated=De.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Ge(t)};De.plus=De.add=function(t){var e,r,n,i,u,o,s,f,p,c,d=this,h=d.constructor;if(t=new h(t),!d.d||!t.d)return!d.s||!t.s?t=new h(NaN):d.d||(t=new h(t.d||d.s===t.s?d:NaN)),t;if(d.s!=t.s)return t.s=-t.s,d.minus(t);if(p=d.d,c=t.d,s=h.precision,f=h.rounding,!p[0]||!c[0])return c[0]||(t=new h(d)),lt?Ge(t,s,f):t;if(u=jr(d.e/et),n=jr(t.e/et),p=p.slice(),i=u-n,i){for(i<0?(r=p,i=-i,o=c.length):(r=c,n=u,o=p.length),u=Math.ceil(s/et),o=u>o?u+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=p.length,i=c.length,o-i<0&&(i=o,r=c,c=p,p=r),e=0;i;)e=(p[--i]=p[i]+c[i]+e)/Rn|0,p[i]%=Rn;for(e&&(p.unshift(e),++n),o=p.length;p[--o]==0;)p.pop();return t.d=p,t.e=$s(p,n),lt?Ge(t,s,f):t};De.precision=De.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Mi+t);return r.d?(e=Np(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};De.round=function(){var t=this,e=t.constructor;return Ge(new e(t),t.e+1,e.rounding)};De.sine=De.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+et,n.rounding=1,r=Kw(n,Up(n,r)),n.precision=t,n.rounding=e,Ge(li>2?r.neg():r,t,e,!0)):new n(NaN)};De.squareRoot=De.sqrt=function(){var t,e,r,n,i,u,o=this,s=o.d,f=o.e,p=o.s,c=o.constructor;if(p!==1||!s||!s[0])return new c(!p||p<0&&(!s||s[0])?NaN:s?o:1/0);for(lt=!1,p=Math.sqrt(+o),p==0||p==1/0?(e=xr(s),(e.length+f)%2==0&&(e+="0"),p=Math.sqrt(e),f=jr((f+1)/2)-(f<0||f%2),p==1/0?e="5e"+f:(e=p.toExponential(),e=e.slice(0,e.indexOf("e")+1)+f),n=new c(e)):n=new c(p.toString()),r=(f=c.precision)+3;;)if(u=n,n=u.plus(qt(o,u,r+2,1)).times(.5),xr(u.d).slice(0,r)===(e=xr(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(Ge(u,f+1,0),u.times(u).eq(o))){n=u;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ge(n,f+1,1),t=!n.times(n).eq(o));break}return lt=!0,Ge(n,f,c.rounding,t)};De.tangent=De.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=qt(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,Ge(li==2||li==4?r.neg():r,t,e,!0)):new n(NaN)};De.times=De.mul=function(t){var e,r,n,i,u,o,s,f,p,c=this,d=c.constructor,h=c.d,g=(t=new d(t)).d;if(t.s*=c.s,!h||!h[0]||!g||!g[0])return new d(!t.s||h&&!h[0]&&!g||g&&!g[0]&&!h?NaN:!h||!g?t.s/0:t.s*0);for(r=jr(c.e/et)+jr(t.e/et),f=h.length,p=g.length,f<p&&(u=h,h=g,g=u,o=f,f=p,p=o),u=[],o=f+p,n=o;n--;)u.push(0);for(n=p;--n>=0;){for(e=0,i=f+n;i>n;)s=u[i]+g[n]*h[i-n-1]+e,u[i--]=s%Rn|0,e=s/Rn|0;u[i]=(u[i]+e)%Rn|0}for(;!u[--o];)u.pop();return e?++r:u.shift(),t.d=u,t.e=$s(u,r),lt?Ge(t,d.precision,d.rounding):t};De.toBinary=function(t,e){return Ff(this,2,t,e)};De.toDecimalPlaces=De.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(nn(t,0,Ti),e===void 0?e=n.rounding:nn(e,0,8),Ge(r,t+r.e+1,e))};De.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Gn(n,!0):(nn(t,0,Ti),e===void 0?e=i.rounding:nn(e,0,8),n=Ge(new i(n),t+1,e),r=Gn(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};De.toFixed=function(t,e){var r,n,i=this,u=i.constructor;return t===void 0?r=Gn(i):(nn(t,0,Ti),e===void 0?e=u.rounding:nn(e,0,8),n=Ge(new u(i),t+i.e+1,e),r=Gn(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};De.toFraction=function(t){var e,r,n,i,u,o,s,f,p,c,d,h,g=this,b=g.d,v=g.constructor;if(!b)return new v(g);if(p=r=new v(1),n=f=new v(0),e=new v(n),u=e.e=Np(b)-g.e-1,o=u%et,e.d[0]=mr(10,o<0?et+o:o),t==null)t=u>0?e:p;else{if(s=new v(t),!s.isInt()||s.lt(p))throw Error(Mi+s);t=s.gt(e)?u>0?e:p:s}for(lt=!1,s=new v(xr(b)),c=v.precision,v.precision=u=b.length*et*2;d=qt(s,e,0,1,1),i=r.plus(d.times(n)),i.cmp(t)!=1;)r=n,n=i,i=p,p=f.plus(d.times(i)),f=i,i=e,e=s.minus(d.times(i)),s=i;return i=qt(t.minus(r),n,0,1,1),f=f.plus(i.times(p)),r=r.plus(i.times(n)),f.s=p.s=g.s,h=qt(p,n,u,1).minus(g).abs().cmp(qt(f,r,u,1).minus(g).abs())<1?[p,n]:[f,r],v.precision=c,lt=!0,h};De.toHexadecimal=De.toHex=function(t,e){return Ff(this,16,t,e)};De.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:nn(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(lt=!1,r=qt(r,t,0,e,1).times(t),lt=!0,Ge(r)):(t.s=r.s,r=t),r};De.toNumber=function(){return+this};De.toOctal=function(t,e){return Ff(this,8,t,e)};De.toPower=De.pow=function(t){var e,r,n,i,u,o,s=this,f=s.constructor,p=+(t=new f(t));if(!s.d||!t.d||!s.d[0]||!t.d[0])return new f(mr(+s,p));if(s=new f(s),s.eq(1))return s;if(n=f.precision,u=f.rounding,t.eq(1))return Ge(s,n,u);if(e=jr(t.e/et),e>=t.d.length-1&&(r=p<0?-p:p)<=zw)return i=xp(f,s,r,n),t.s<0?new f(1).div(i):Ge(i,n,u);if(o=s.s,o<0){if(e<t.d.length-1)return new f(NaN);if(t.d[e]&1||(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return r=mr(+s,p),e=r==0||!isFinite(r)?jr(p*(Math.log("0."+xr(s.d))/Math.LN10+s.e+1)):new f(r+"").e,e>f.maxE+1||e<f.minE-1?new f(e>0?o/0:0):(lt=!1,f.rounding=s.s=1,r=Math.min(12,(e+"").length),i=nf(t.times(Ci(s,n+r)),n),i.d&&(i=Ge(i,n+5,1),sa(i.d,n,u)&&(e=n+10,i=Ge(nf(t.times(Ci(s,e+r)),e),e+5,1),+xr(i.d).slice(n+1,n+15)+1==1e14&&(i=Ge(i,n+1,0)))),i.s=o,lt=!0,f.rounding=u,Ge(i,n,u))};De.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Gn(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(nn(t,1,Ti),e===void 0?e=i.rounding:nn(e,0,8),n=Ge(new i(n),t,e),r=Gn(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};De.toSignificantDigits=De.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(nn(t,1,Ti),e===void 0?e=n.rounding:nn(e,0,8)),Ge(new n(r),t,e)};De.toString=function(){var t=this,e=t.constructor,r=Gn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};De.truncated=De.trunc=function(){return Ge(new this.constructor(this),this.e+1,1)};De.valueOf=De.toJSON=function(){var t=this,e=t.constructor,r=Gn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function xr(t){var e,r,n,i=t.length-1,u="",o=t[0];if(i>0){for(u+=o,e=1;e<i;e++)n=t[e]+"",r=et-n.length,r&&(u+=Ai(r)),u+=n;o=t[e],n=o+"",r=et-n.length,r&&(u+=Ai(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return u+o}function nn(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Mi+t)}function sa(t,e,r,n){var i,u,o,s;for(u=t[0];u>=10;u/=10)--e;return--e<0?(e+=et,i=0):(i=Math.ceil((e+1)/et),e%=et),u=mr(10,et-e),s=t[i]%u|0,n==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=r<4&&s==99999||r>3&&s==49999||s==5e4||s==0):o=(r<4&&s+1==u||r>3&&s+1==u/2)&&(t[i+1]/u/100|0)==mr(10,e-2)-1||(s==u/2||s==0)&&(t[i+1]/u/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(n||r<4)&&s==9999||!n&&r>3&&s==4999):o=((n||r<4)&&s+1==u||!n&&r>3&&s+1==u/2)&&(t[i+1]/u/1e3|0)==mr(10,e-3)-1,o}function ls(t,e,r){for(var n,i=[0],u,o=0,s=t.length;o<s;){for(u=i.length;u--;)i[u]*=e;for(i[0]+=ef.indexOf(t.charAt(o++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function Hw(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/Ys(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=wu(t,1,e.times(i),new t(1));for(var u=r;u--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=r,e}var qt=function(){function t(n,i,u){var o,s=0,f=n.length;for(n=n.slice();f--;)o=n[f]*i+s,n[f]=o%u|0,s=o/u|0;return s&&n.unshift(s),n}function e(n,i,u,o){var s,f;if(u!=o)f=u>o?1:-1;else for(s=f=0;s<u;s++)if(n[s]!=i[s]){f=n[s]>i[s]?1:-1;break}return f}function r(n,i,u,o){for(var s=0;u--;)n[u]-=s,s=n[u]<i[u]?1:0,n[u]=s*o+n[u]-i[u];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,u,o,s,f){var p,c,d,h,g,b,v,_,D,C,A,F,E,S,T,P,x,H,re,V,Y=n.constructor,U=n.s==i.s?1:-1,K=n.d,q=i.d;if(!K||!K[0]||!q||!q[0])return new Y(!n.s||!i.s||(K?q&&K[0]==q[0]:!q)?NaN:K&&K[0]==0||!q?U*0:U/0);for(f?(g=1,c=n.e-i.e):(f=Rn,g=et,c=jr(n.e/g)-jr(i.e/g)),re=q.length,x=K.length,D=new Y(U),C=D.d=[],d=0;q[d]==(K[d]||0);d++);if(q[d]>(K[d]||0)&&c--,u==null?(S=u=Y.precision,o=Y.rounding):s?S=u+(n.e-i.e)+1:S=u,S<0)C.push(1),b=!0;else{if(S=S/g+2|0,d=0,re==1){for(h=0,q=q[0],S++;(d<x||h)&&S--;d++)T=h*f+(K[d]||0),C[d]=T/q|0,h=T%q|0;b=h||d<x}else{for(h=f/(q[0]+1)|0,h>1&&(q=t(q,h,f),K=t(K,h,f),re=q.length,x=K.length),P=re,A=K.slice(0,re),F=A.length;F<re;)A[F++]=0;V=q.slice(),V.unshift(0),H=q[0],q[1]>=f/2&&++H;do h=0,p=e(q,A,re,F),p<0?(E=A[0],re!=F&&(E=E*f+(A[1]||0)),h=E/H|0,h>1?(h>=f&&(h=f-1),v=t(q,h,f),_=v.length,F=A.length,p=e(v,A,_,F),p==1&&(h--,r(v,re<_?V:q,_,f))):(h==0&&(p=h=1),v=q.slice()),_=v.length,_<F&&v.unshift(0),r(A,v,F,f),p==-1&&(F=A.length,p=e(q,A,re,F),p<1&&(h++,r(A,re<F?V:q,F,f))),F=A.length):p===0&&(h++,A=[0]),C[d++]=h,p&&A[0]?A[F++]=K[P]||0:(A=[K[P]],F=1);while((P++<x||A[0]!==void 0)&&S--);b=A[0]!==void 0}C[0]||C.shift()}if(g==1)D.e=c,Mp=b;else{for(d=1,h=C[0];h>=10;h/=10)d++;D.e=d+c*g-1,Ge(D,s?u+D.e+1:u,o,b)}return D}}();function Ge(t,e,r,n){var i,u,o,s,f,p,c,d,h,g=t.constructor;e:if(e!=null){if(d=t.d,!d)return t;for(i=1,s=d[0];s>=10;s/=10)i++;if(u=e-i,u<0)u+=et,o=e,c=d[h=0],f=c/mr(10,i-o-1)%10|0;else if(h=Math.ceil((u+1)/et),s=d.length,h>=s)if(n){for(;s++<=h;)d.push(0);c=f=0,i=1,u%=et,o=u-et+1}else break e;else{for(c=s=d[h],i=1;s>=10;s/=10)i++;u%=et,o=u-et+i,f=o<0?0:c/mr(10,i-o-1)%10|0}if(n=n||e<0||d[h+1]!==void 0||(o<0?c:c%mr(10,i-o-1)),p=r<4?(f||n)&&(r==0||r==(t.s<0?3:2)):f>5||f==5&&(r==4||n||r==6&&(u>0?o>0?c/mr(10,i-o):0:d[h-1])%10&1||r==(t.s<0?8:7)),e<1||!d[0])return d.length=0,p?(e-=t.e+1,d[0]=mr(10,(et-e%et)%et),t.e=-e||0):d[0]=t.e=0,t;if(u==0?(d.length=h,s=1,h--):(d.length=h+1,s=mr(10,et-u),d[h]=o>0?(c/mr(10,i-o)%mr(10,o)|0)*s:0),p)for(;;)if(h==0){for(u=1,o=d[0];o>=10;o/=10)u++;for(o=d[0]+=s,s=1;o>=10;o/=10)s++;u!=s&&(t.e++,d[0]==Rn&&(d[0]=1));break}else{if(d[h]+=s,d[h]!=Rn)break;d[h--]=0,s=1}for(u=d.length;d[--u]===0;)d.pop()}return lt&&(t.e>g.maxE?(t.d=null,t.e=NaN):t.e<g.minE&&(t.e=0,t.d=[0])),t}function Gn(t,e,r){if(!t.isFinite())return Lp(t);var n,i=t.e,u=xr(t.d),o=u.length;return e?(r&&(n=r-o)>0?u=u.charAt(0)+"."+u.slice(1)+Ai(n):o>1&&(u=u.charAt(0)+"."+u.slice(1)),u=u+(t.e<0?"e":"e+")+t.e):i<0?(u="0."+Ai(-i-1)+u,r&&(n=r-o)>0&&(u+=Ai(n))):i>=o?(u+=Ai(i+1-o),r&&(n=r-i-1)>0&&(u=u+"."+Ai(n))):((n=i+1)<o&&(u=u.slice(0,n)+"."+u.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(u+="."),u+=Ai(n))),u}function $s(t,e){var r=t[0];for(e*=et;r>=10;r/=10)e++;return e}function ys(t,e,r){if(e>Ww)throw lt=!0,r&&(t.precision=r),Error(Pp);return Ge(new t(Ds),e,1,!0)}function Nn(t,e,r){if(e>rf)throw Error(Pp);return Ge(new t(bs),e,r,!0)}function Np(t){var e=t.length-1,r=e*et+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function Ai(t){for(var e="";t--;)e+="0";return e}function xp(t,e,r,n){var i,u=new t(1),o=Math.ceil(n/et+4);for(lt=!1;;){if(r%2&&(u=u.times(e),g0(u.d,o)&&(i=!0)),r=jr(r/2),r===0){r=u.d.length-1,i&&u.d[r]===0&&++u.d[r];break}e=e.times(e),g0(e.d,o)}return lt=!0,u}function p0(t){return t.d[t.d.length-1]&1}function Rp(t,e,r){for(var n,i=new t(e[0]),u=0;++u<e.length;)if(n=new t(e[u]),n.s)i[r](n)&&(i=n);else{i=n;break}return i}function nf(t,e){var r,n,i,u,o,s,f,p=0,c=0,d=0,h=t.constructor,g=h.rounding,b=h.precision;if(!t.d||!t.d[0]||t.e>17)return new h(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(lt=!1,f=b):f=e,s=new h(.03125);t.e>-2;)t=t.times(s),d+=5;for(n=Math.log(mr(2,d))/Math.LN10*2+5|0,f+=n,r=u=o=new h(1),h.precision=f;;){if(u=Ge(u.times(t),f,1),r=r.times(++c),s=o.plus(qt(u,r,f,1)),xr(s.d).slice(0,f)===xr(o.d).slice(0,f)){for(i=d;i--;)o=Ge(o.times(o),f,1);if(e==null)if(p<3&&sa(o.d,f-n,g,p))h.precision=f+=10,r=u=s=new h(1),c=0,p++;else return Ge(o,h.precision=b,g,lt=!0);else return h.precision=b,o}o=s}}function Ci(t,e){var r,n,i,u,o,s,f,p,c,d,h,g=1,b=10,v=t,_=v.d,D=v.constructor,C=D.rounding,A=D.precision;if(v.s<0||!_||!_[0]||!v.e&&_[0]==1&&_.length==1)return new D(_&&!_[0]?-1/0:v.s!=1?NaN:_?0:v);if(e==null?(lt=!1,c=A):c=e,D.precision=c+=b,r=xr(_),n=r.charAt(0),Math.abs(u=v.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(t),r=xr(v.d),n=r.charAt(0),g++;u=v.e,n>1?(v=new D("0."+r),u++):v=new D(n+"."+r.slice(1))}else return p=ys(D,c+2,A).times(u+""),v=Ci(new D(n+"."+r.slice(1)),c-b).plus(p),D.precision=A,e==null?Ge(v,A,C,lt=!0):v;for(d=v,f=o=v=qt(v.minus(1),v.plus(1),c,1),h=Ge(v.times(v),c,1),i=3;;){if(o=Ge(o.times(h),c,1),p=f.plus(qt(o,new D(i),c,1)),xr(p.d).slice(0,c)===xr(f.d).slice(0,c))if(f=f.times(2),u!==0&&(f=f.plus(ys(D,c+2,A).times(u+""))),f=qt(f,new D(g),c,1),e==null)if(sa(f.d,c-b,C,s))D.precision=c+=b,p=o=v=qt(d.minus(1),d.plus(1),c,1),h=Ge(v.times(v),c,1),i=s=1;else return Ge(f,D.precision=A,C,lt=!0);else return D.precision=A,f;f=p,i+=2}}function Lp(t){return String(t.s*t.s/0)}function uf(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%et,r<0&&(n+=et),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=et;n<i;)t.d.push(+e.slice(n,n+=et));e=e.slice(n),n=et-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),lt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Gw(t,e){var r,n,i,u,o,s,f,p,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Ip.test(e))return uf(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(jw.test(e))r=16,e=e.toLowerCase();else if(Vw.test(e))r=2;else if(qw.test(e))r=8;else throw Error(Mi+e);for(u=e.search(/p/i),u>0?(f=+e.slice(u+1),e=e.substring(2,u)):e=e.slice(2),u=e.indexOf("."),o=u>=0,n=t.constructor,o&&(e=e.replace(".",""),s=e.length,u=s-u,i=xp(n,new n(r),u,u*2)),p=ls(e,r,Rn),c=p.length-1,u=c;p[u]===0;--u)p.pop();return u<0?new n(t.s*0):(t.e=$s(p,c),t.d=p,lt=!1,o&&(t=qt(t,i,s*4)),f&&(t=t.times(Math.abs(f)<54?mr(2,f):Au.pow(2,f))),lt=!0,t)}function Kw(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:wu(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/Ys(5,r)),e=wu(t,2,e,e);for(var i,u=new t(5),o=new t(16),s=new t(20);r--;)i=e.times(e),e=e.times(u.plus(i.times(o.times(i).minus(s))));return e}function wu(t,e,r,n,i){var u,o,s,f,p=t.precision,c=Math.ceil(p/et);for(lt=!1,f=r.times(r),s=new t(n);;){if(o=qt(s.times(f),new t(e++*e++),p,1),s=i?n.plus(o):n.minus(o),n=qt(o.times(f),new t(e++*e++),p,1),o=s.plus(n),o.d[c]!==void 0){for(u=c;o.d[u]===s.d[u]&&u--;);if(u==-1)break}u=s,s=n,n=o,o=u}return lt=!0,o.d.length=c+1,o}function Ys(t,e){for(var r=t;--e;)r*=t;return r}function Up(t,e){var r,n=e.s<0,i=Nn(t,t.precision,1),u=i.times(.5);if(e=e.abs(),e.lte(u))return li=n?4:1,e;if(r=e.divToInt(i),r.isZero())li=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(u))return li=p0(r)?n?2:3:n?4:1,e;li=p0(r)?n?1:4:n?3:2}return e.minus(i).abs()}function Ff(t,e,r,n){var i,u,o,s,f,p,c,d,h,g=t.constructor,b=r!==void 0;if(b?(nn(r,1,Ti),n===void 0?n=g.rounding:nn(n,0,8)):(r=g.precision,n=g.rounding),!t.isFinite())c=Lp(t);else{for(c=Gn(t),o=c.indexOf("."),b?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,o>=0&&(c=c.replace(".",""),h=new g(1),h.e=c.length-o,h.d=ls(Gn(h),10,i),h.e=h.d.length),d=ls(c,10,i),u=f=d.length;d[--f]==0;)d.pop();if(!d[0])c=b?"0p+0":"0";else{if(o<0?u--:(t=new g(t),t.d=d,t.e=u,t=qt(t,h,r,n,0,i),d=t.d,u=t.e,p=Mp),o=d[r],s=i/2,p=p||d[r+1]!==void 0,p=n<4?(o!==void 0||p)&&(n===0||n===(t.s<0?3:2)):o>s||o===s&&(n===4||p||n===6&&d[r-1]&1||n===(t.s<0?8:7)),d.length=r,p)for(;++d[--r]>i-1;)d[r]=0,r||(++u,d.unshift(1));for(f=d.length;!d[f-1];--f);for(o=0,c="";o<f;o++)c+=ef.charAt(d[o]);if(b){if(f>1)if(e==16||e==8){for(o=e==16?4:3,--f;f%o;f++)c+="0";for(d=ls(c,i,e),f=d.length;!d[f-1];--f);for(o=1,c="1.";o<f;o++)c+=ef.charAt(d[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(u<0?"p":"p+")+u}else if(u<0){for(;++u;)c="0"+c;c="0."+c}else if(++u>f)for(u-=f;u--;)c+="0";else u<f&&(c=c.slice(0,u)+"."+c.slice(u))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function g0(t,e){if(t.length>e)return t.length=e,!0}function $w(t){return new this(t).abs()}function Yw(t){return new this(t).acos()}function Zw(t){return new this(t).acosh()}function Xw(t,e){return new this(t).plus(e)}function Jw(t){return new this(t).asin()}function Qw(t){return new this(t).asinh()}function e2(t){return new this(t).atan()}function t2(t){return new this(t).atanh()}function r2(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,u=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=Nn(this,u,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?Nn(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=Nn(this,u,1).times(.5),r.s=t.s):e.s<0?(this.precision=u,this.rounding=1,r=this.atan(qt(t,e,u,1)),e=Nn(this,u,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(qt(t,e,u,1)),r}function n2(t){return new this(t).cbrt()}function i2(t){return Ge(t=new this(t),t.e+1,2)}function u2(t,e,r){return new this(t).clamp(e,r)}function a2(t){if(!t||typeof t!="object")throw Error(Ks+"Object expected");var e,r,n,i=t.defaults===!0,u=["precision",1,Ti,"rounding",0,8,"toExpNeg",-Du,0,"toExpPos",0,Du,"maxE",0,Du,"minE",-Du,0,"modulo",0,9];for(e=0;e<u.length;e+=3)if(r=u[e],i&&(this[r]=tf[r]),(n=t[r])!==void 0)if(jr(n)===n&&n>=u[e+1]&&n<=u[e+2])this[r]=n;else throw Error(Mi+r+": "+n);if(r="crypto",i&&(this[r]=tf[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Tp);else this[r]=!1;else throw Error(Mi+r+": "+n);return this}function s2(t){return new this(t).cos()}function o2(t){return new this(t).cosh()}function Vp(t){var e,r,n;function i(u){var o,s,f,p=this;if(!(p instanceof i))return new i(u);if(p.constructor=i,v0(u)){p.s=u.s,lt?!u.d||u.e>i.maxE?(p.e=NaN,p.d=null):u.e<i.minE?(p.e=0,p.d=[0]):(p.e=u.e,p.d=u.d.slice()):(p.e=u.e,p.d=u.d?u.d.slice():u.d);return}if(f=typeof u,f==="number"){if(u===0){p.s=1/u<0?-1:1,p.e=0,p.d=[0];return}if(u<0?(u=-u,p.s=-1):p.s=1,u===~~u&&u<1e7){for(o=0,s=u;s>=10;s/=10)o++;lt?o>i.maxE?(p.e=NaN,p.d=null):o<i.minE?(p.e=0,p.d=[0]):(p.e=o,p.d=[u]):(p.e=o,p.d=[u]);return}else if(u*0!==0){u||(p.s=NaN),p.e=NaN,p.d=null;return}return uf(p,u.toString())}else if(f!=="string")throw Error(Mi+u);return(s=u.charCodeAt(0))===45?(u=u.slice(1),p.s=-1):(s===43&&(u=u.slice(1)),p.s=1),Ip.test(u)?uf(p,u):Gw(p,u)}if(i.prototype=De,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=a2,i.clone=Vp,i.isDecimal=v0,i.abs=$w,i.acos=Yw,i.acosh=Zw,i.add=Xw,i.asin=Jw,i.asinh=Qw,i.atan=e2,i.atanh=t2,i.atan2=r2,i.cbrt=n2,i.ceil=i2,i.clamp=u2,i.cos=s2,i.cosh=o2,i.div=l2,i.exp=f2,i.floor=c2,i.hypot=h2,i.ln=d2,i.log=p2,i.log10=v2,i.log2=g2,i.max=m2,i.min=_2,i.mod=D2,i.mul=b2,i.pow=y2,i.random=w2,i.round=A2,i.sign=E2,i.sin=C2,i.sinh=F2,i.sqrt=S2,i.sub=B2,i.sum=O2,i.tan=M2,i.tanh=P2,i.trunc=T2,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function l2(t,e){return new this(t).div(e)}function f2(t){return new this(t).exp()}function c2(t){return Ge(t=new this(t),t.e+1,3)}function h2(){var t,e,r=new this(0);for(lt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return lt=!0,new this(1/0);r=e}return lt=!0,r.sqrt()}function v0(t){return t instanceof Au||t&&t.toStringTag===kp||!1}function d2(t){return new this(t).ln()}function p2(t,e){return new this(t).log(e)}function g2(t){return new this(t).log(2)}function v2(t){return new this(t).log(10)}function m2(){return Rp(this,arguments,"lt")}function _2(){return Rp(this,arguments,"gt")}function D2(t,e){return new this(t).mod(e)}function b2(t,e){return new this(t).mul(e)}function y2(t,e){return new this(t).pow(e)}function w2(t){var e,r,n,i,u=0,o=new this(1),s=[];if(t===void 0?t=this.precision:nn(t,1,Ti),n=Math.ceil(t/et),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));u<n;)i=e[u],i>=429e7?e[u]=crypto.getRandomValues(new Uint32Array(1))[0]:s[u++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);u<n;)i=e[u]+(e[u+1]<<8)+(e[u+2]<<16)+((e[u+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,u):(s.push(i%1e7),u+=4);u=n/4}else throw Error(Tp);else for(;u<n;)s[u++]=Math.random()*1e7|0;for(n=s[--u],t%=et,n&&t&&(i=mr(10,et-t),s[u]=(n/i|0)*i);s[u]===0;u--)s.pop();if(u<0)r=0,s=[0];else{for(r=-1;s[0]===0;r-=et)s.shift();for(n=1,i=s[0];i>=10;i/=10)n++;n<et&&(r-=et-n)}return o.e=r,o.d=s,o}function A2(t){return Ge(t=new this(t),t.e+1,this.rounding)}function E2(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function C2(t){return new this(t).sin()}function F2(t){return new this(t).sinh()}function S2(t){return new this(t).sqrt()}function B2(t,e){return new this(t).sub(e)}function O2(){var t=0,e=arguments,r=new this(e[t]);for(lt=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return lt=!0,Ge(r,this.precision,this.rounding)}function M2(t){return new this(t).tan()}function P2(t){return new this(t).tanh()}function T2(t){return Ge(t=new this(t),t.e+1,1)}De[Symbol.for("nodejs.util.inspect.custom")]=De.toString;De[Symbol.toStringTag]="Decimal";var Au=De.constructor=Vp(tf);Ds=new Au(Ds);bs=new Au(bs);var k2="BigNumber",I2=["?on","config"],N2=Ut(k2,I2,t=>{var{on:e,config:r}=t,n=Au.clone({precision:r.precision,modulo:Au.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,u){i.precision!==u.precision&&n.config({precision:i.precision})}),n},{isClass:!0}),dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var af={},x2={get exports(){return af},set exports(t){af=t}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=Math.cosh||function(d){return Math.abs(d)<1e-9?1-d:(Math.exp(d)+Math.exp(-d))*.5},i=Math.sinh||function(d){return Math.abs(d)<1e-9?d:(Math.exp(d)-Math.exp(-d))*.5},u=function(d){var h=Math.PI/4;if(-h>d||d>h)return Math.cos(d)-1;var g=d*d;return g*(g*(g*(g*(g*(g*(g*(g/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(d,h){var g=Math.abs(d),b=Math.abs(h);return g<3e3&&b<3e3?Math.sqrt(g*g+b*b):(g<b?(g=b,b=d/h):b=h/d,g*Math.sqrt(1+b*b))},s=function(){throw SyntaxError("Invalid Param")};function f(d,h){var g=Math.abs(d),b=Math.abs(h);return d===0?Math.log(b):h===0?Math.log(g):g<3e3&&b<3e3?Math.log(d*d+h*h)*.5:(d=d/2,h=h/2,.5*Math.log(d*d+h*h)+Math.LN2)}var p=function(d,h){var g={re:0,im:0};if(d==null)g.re=g.im=0;else if(h!==void 0)g.re=d,g.im=h;else switch(typeof d){case"object":if("im"in d&&"re"in d)g.re=d.re,g.im=d.im;else if("abs"in d&&"arg"in d){if(!Number.isFinite(d.abs)&&Number.isFinite(d.arg))return c.INFINITY;g.re=d.abs*Math.cos(d.arg),g.im=d.abs*Math.sin(d.arg)}else if("r"in d&&"phi"in d){if(!Number.isFinite(d.r)&&Number.isFinite(d.phi))return c.INFINITY;g.re=d.r*Math.cos(d.phi),g.im=d.r*Math.sin(d.phi)}else d.length===2?(g.re=d[0],g.im=d[1]):s();break;case"string":g.im=g.re=0;var b=d.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,_=0;b===null&&s();for(var D=0;D<b.length;D++){var C=b[D];C===" "||C==="	"||C===`
`||(C==="+"?v++:C==="-"?_++:C==="i"||C==="I"?(v+_===0&&s(),b[D+1]!==" "&&!isNaN(b[D+1])?(g.im+=parseFloat((_%2?"-":"")+b[D+1]),D++):g.im+=parseFloat((_%2?"-":"")+"1"),v=_=0):((v+_===0||isNaN(C))&&s(),b[D+1]==="i"||b[D+1]==="I"?(g.im+=parseFloat((_%2?"-":"")+C),D++):g.re+=parseFloat((_%2?"-":"")+C),v=_=0))}v+_>0&&s();break;case"number":g.im=0,g.re=d;break;default:s()}return isNaN(g.re)||isNaN(g.im),g};function c(d,h){if(!(this instanceof c))return new c(d,h);var g=p(d,h);this.re=g.re,this.im=g.im}c.prototype={re:0,im:0,sign:function(){var d=this.abs();return new c(this.re/d,this.im/d)},add:function(d,h){var g=new c(d,h);return this.isInfinite()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:new c(this.re+g.re,this.im+g.im)},sub:function(d,h){var g=new c(d,h);return this.isInfinite()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:new c(this.re-g.re,this.im-g.im)},mul:function(d,h){var g=new c(d,h);return this.isInfinite()&&g.isZero()||this.isZero()&&g.isInfinite()?c.NAN:this.isInfinite()||g.isInfinite()?c.INFINITY:g.im===0&&this.im===0?new c(this.re*g.re,0):new c(this.re*g.re-this.im*g.im,this.re*g.im+this.im*g.re)},div:function(d,h){var g=new c(d,h);if(this.isZero()&&g.isZero()||this.isInfinite()&&g.isInfinite())return c.NAN;if(this.isInfinite()||g.isZero())return c.INFINITY;if(this.isZero()||g.isInfinite())return c.ZERO;d=this.re,h=this.im;var b=g.re,v=g.im,_,D;return v===0?new c(d/b,h/b):Math.abs(b)<Math.abs(v)?(D=b/v,_=b*D+v,new c((d*D+h)/_,(h*D-d)/_)):(D=v/b,_=v*D+b,new c((d+h*D)/_,(h-d*D)/_))},pow:function(d,h){var g=new c(d,h);if(d=this.re,h=this.im,g.isZero())return c.ONE;if(g.im===0){if(h===0&&d>0)return new c(Math.pow(d,g.re),0);if(d===0)switch((g.re%4+4)%4){case 0:return new c(Math.pow(h,g.re),0);case 1:return new c(0,Math.pow(h,g.re));case 2:return new c(-Math.pow(h,g.re),0);case 3:return new c(0,-Math.pow(h,g.re))}}if(d===0&&h===0&&g.re>0&&g.im>=0)return c.ZERO;var b=Math.atan2(h,d),v=f(d,h);return d=Math.exp(g.re*v-g.im*b),h=g.im*v+g.re*b,new c(d*Math.cos(h),d*Math.sin(h))},sqrt:function(){var d=this.re,h=this.im,g=this.abs(),b,v;if(d>=0){if(h===0)return new c(Math.sqrt(d),0);b=.5*Math.sqrt(2*(g+d))}else b=Math.abs(h)/Math.sqrt(2*(g-d));return d<=0?v=.5*Math.sqrt(2*(g-d)):v=Math.abs(h)/Math.sqrt(2*(g+d)),new c(b,h<0?-v:v)},exp:function(){var d=Math.exp(this.re);return this.im,new c(d*Math.cos(this.im),d*Math.sin(this.im))},expm1:function(){var d=this.re,h=this.im;return new c(Math.expm1(d)*Math.cos(h)+u(h),Math.exp(d)*Math.sin(h))},log:function(){var d=this.re,h=this.im;return new c(f(d,h),Math.atan2(h,d))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var d=this.re,h=this.im;return new c(Math.sin(d)*n(h),Math.cos(d)*i(h))},cos:function(){var d=this.re,h=this.im;return new c(Math.cos(d)*n(h),-Math.sin(d)*i(h))},tan:function(){var d=2*this.re,h=2*this.im,g=Math.cos(d)+n(h);return new c(Math.sin(d)/g,i(h)/g)},cot:function(){var d=2*this.re,h=2*this.im,g=Math.cos(d)-n(h);return new c(-Math.sin(d)/g,i(h)/g)},sec:function(){var d=this.re,h=this.im,g=.5*n(2*h)+.5*Math.cos(2*d);return new c(Math.cos(d)*n(h)/g,Math.sin(d)*i(h)/g)},csc:function(){var d=this.re,h=this.im,g=.5*n(2*h)-.5*Math.cos(2*d);return new c(Math.sin(d)*n(h)/g,-Math.cos(d)*i(h)/g)},asin:function(){var d=this.re,h=this.im,g=new c(h*h-d*d+1,-2*d*h).sqrt(),b=new c(g.re-h,g.im+d).log();return new c(b.im,-b.re)},acos:function(){var d=this.re,h=this.im,g=new c(h*h-d*d+1,-2*d*h).sqrt(),b=new c(g.re-h,g.im+d).log();return new c(Math.PI/2-b.im,b.re)},atan:function(){var d=this.re,h=this.im;if(d===0){if(h===1)return new c(0,1/0);if(h===-1)return new c(0,-1/0)}var g=d*d+(1-h)*(1-h),b=new c((1-h*h-d*d)/g,-2*d/g).log();return new c(-.5*b.im,.5*b.re)},acot:function(){var d=this.re,h=this.im;if(h===0)return new c(Math.atan2(1,d),0);var g=d*d+h*h;return g!==0?new c(d/g,-h/g).atan():new c(d!==0?d/0:0,h!==0?-h/0:0).atan()},asec:function(){var d=this.re,h=this.im;if(d===0&&h===0)return new c(0,1/0);var g=d*d+h*h;return g!==0?new c(d/g,-h/g).acos():new c(d!==0?d/0:0,h!==0?-h/0:0).acos()},acsc:function(){var d=this.re,h=this.im;if(d===0&&h===0)return new c(Math.PI/2,1/0);var g=d*d+h*h;return g!==0?new c(d/g,-h/g).asin():new c(d!==0?d/0:0,h!==0?-h/0:0).asin()},sinh:function(){var d=this.re,h=this.im;return new c(i(d)*Math.cos(h),n(d)*Math.sin(h))},cosh:function(){var d=this.re,h=this.im;return new c(n(d)*Math.cos(h),i(d)*Math.sin(h))},tanh:function(){var d=2*this.re,h=2*this.im,g=n(d)+Math.cos(h);return new c(i(d)/g,Math.sin(h)/g)},coth:function(){var d=2*this.re,h=2*this.im,g=n(d)-Math.cos(h);return new c(i(d)/g,-Math.sin(h)/g)},csch:function(){var d=this.re,h=this.im,g=Math.cos(2*h)-n(2*d);return new c(-2*i(d)*Math.cos(h)/g,2*n(d)*Math.sin(h)/g)},sech:function(){var d=this.re,h=this.im,g=Math.cos(2*h)+n(2*d);return new c(2*n(d)*Math.cos(h)/g,-2*i(d)*Math.sin(h)/g)},asinh:function(){var d=this.im;this.im=-this.re,this.re=d;var h=this.asin();return this.re=-this.im,this.im=d,d=h.re,h.re=-h.im,h.im=d,h},acosh:function(){var d=this.acos();if(d.im<=0){var h=d.re;d.re=-d.im,d.im=h}else{var h=d.im;d.im=-d.re,d.re=h}return d},atanh:function(){var d=this.re,h=this.im,g=d>1&&h===0,b=1-d,v=1+d,_=b*b+h*h,D=_!==0?new c((v*b-h*h)/_,(h*b+v*h)/_):new c(d!==-1?d/0:0,h!==0?h/0:0),C=D.re;return D.re=f(D.re,D.im)/2,D.im=Math.atan2(D.im,C)/2,g&&(D.im=-D.im),D},acoth:function(){var d=this.re,h=this.im;if(d===0&&h===0)return new c(0,Math.PI/2);var g=d*d+h*h;return g!==0?new c(d/g,-h/g).atanh():new c(d!==0?d/0:0,h!==0?-h/0:0).atanh()},acsch:function(){var d=this.re,h=this.im;if(h===0)return new c(d!==0?Math.log(d+Math.sqrt(d*d+1)):1/0,0);var g=d*d+h*h;return g!==0?new c(d/g,-h/g).asinh():new c(d!==0?d/0:0,h!==0?-h/0:0).asinh()},asech:function(){var d=this.re,h=this.im;if(this.isZero())return c.INFINITY;var g=d*d+h*h;return g!==0?new c(d/g,-h/g).acosh():new c(d!==0?d/0:0,h!==0?-h/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var d=this.re,h=this.im,g=d*d+h*h;return new c(d/g,-h/g)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(d){return d=Math.pow(10,d||0),new c(Math.ceil(this.re*d)/d,Math.ceil(this.im*d)/d)},floor:function(d){return d=Math.pow(10,d||0),new c(Math.floor(this.re*d)/d,Math.floor(this.im*d)/d)},round:function(d){return d=Math.pow(10,d||0),new c(Math.round(this.re*d)/d,Math.round(this.im*d)/d)},equals:function(d,h){var g=new c(d,h);return Math.abs(g.re-this.re)<=c.EPSILON&&Math.abs(g.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var d=this.re,h=this.im,g="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(d)<c.EPSILON&&(d=0),Math.abs(h)<c.EPSILON&&(h=0),h===0?g+d:(d!==0?(g+=d,g+=" ",h<0?(h=-h,g+="-"):g+="+",g+=" "):h<0&&(h=-h,g+="-"),h!==1&&(g+=h),g+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,t.exports=c})()})(x2);const Pr=Sf(af);var R2="Complex",L2=[],U2=Ut(R2,L2,()=>(Object.defineProperty(Pr,"name",{value:"Complex"}),Pr.prototype.constructor=Pr,Pr.prototype.type="Complex",Pr.prototype.isComplex=!0,Pr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Pr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Pr.prototype.format=function(t){var e="",r=this.im,n=this.re,i=Jl(this.re,t),u=Jl(this.im,t),o=tr(t)?t:t?t.precision:null;if(o!==null){var s=Math.pow(10,-o);Math.abs(n/r)<s&&(n=0),Math.abs(r/n)<s&&(r=0)}return r===0?e=i:n===0?r===1?e="i":r===-1?e="-i":e=u+"i":r<0?r===-1?e=i+" - i":e=i+" - "+u.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+u+"i",e},Pr.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Pr(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(tr(r)){if(Dp(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),tr(n))return new Pr({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Pr.prototype.valueOf=Pr.prototype.toString,Pr.fromJSON=function(t){return new Pr(t)},Pr.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Pr),{isClass:!0}),sf={},V2={get exports(){return sf},set exports(t){sf=t}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=2e3,i={s:1,n:0,d:1};function u(b,v){if(isNaN(b=parseInt(b,10)))throw g.InvalidParameter;return b*v}function o(b,v){if(v===0)throw g.DivisionByZero;var _=Object.create(g.prototype);_.s=b<0?-1:1,b=b<0?-b:b;var D=h(b,v);return _.n=b/D,_.d=v/D,_}function s(b){for(var v={},_=b,D=2,C=4;C<=_;){for(;_%D===0;)_/=D,v[D]=(v[D]||0)+1;C+=1+2*D++}return _!==b?_>1&&(v[_]=(v[_]||0)+1):v[b]=(v[b]||0)+1,v}var f=function(b,v){var _=0,D=1,C=1,A=0,F=0,E=0,S=1,T=1,P=0,x=1,H=1,re=1,V=1e7,Y;if(b!=null)if(v!==void 0){if(_=b,D=v,C=_*D,_%1!==0||D%1!==0)throw g.NonIntegerParameter}else switch(typeof b){case"object":{if("d"in b&&"n"in b)_=b.n,D=b.d,"s"in b&&(_*=b.s);else if(0 in b)_=b[0],1 in b&&(D=b[1]);else throw g.InvalidParameter;C=_*D;break}case"number":{if(b<0&&(C=b,b=-b),b%1===0)_=b;else if(b>0){for(b>=1&&(T=Math.pow(10,Math.floor(1+Math.log(b)/Math.LN10)),b/=T);x<=V&&re<=V;)if(Y=(P+H)/(x+re),b===Y){x+re<=V?(_=P+H,D=x+re):re>x?(_=H,D=re):(_=P,D=x);break}else b>Y?(P+=H,x+=re):(H+=P,re+=x),x>V?(_=H,D=re):(_=P,D=x);_*=T}else(isNaN(b)||isNaN(v))&&(D=_=NaN);break}case"string":{if(x=b.match(/\d+|./g),x===null)throw g.InvalidParameter;if(x[P]==="-"?(C=-1,P++):x[P]==="+"&&P++,x.length===P+1?F=u(x[P++],C):x[P+1]==="."||x[P]==="."?(x[P]!=="."&&(A=u(x[P++],C)),P++,(P+1===x.length||x[P+1]==="("&&x[P+3]===")"||x[P+1]==="'"&&x[P+3]==="'")&&(F=u(x[P],C),S=Math.pow(10,x[P].length),P++),(x[P]==="("&&x[P+2]===")"||x[P]==="'"&&x[P+2]==="'")&&(E=u(x[P+1],C),T=Math.pow(10,x[P+1].length)-1,P+=3)):x[P+1]==="/"||x[P+1]===":"?(F=u(x[P],C),S=u(x[P+2],1),P+=3):x[P+3]==="/"&&x[P+1]===" "&&(A=u(x[P],C),F=u(x[P+2],C),S=u(x[P+4],1),P+=5),x.length<=P){D=S*T,C=_=E+D*A+T*F;break}}default:throw g.InvalidParameter}if(D===0)throw g.DivisionByZero;i.s=C<0?-1:1,i.n=Math.abs(_),i.d=Math.abs(D)};function p(b,v,_){for(var D=1;v>0;b=b*b%_,v>>=1)v&1&&(D=D*b%_);return D}function c(b,v){for(;v%2===0;v/=2);for(;v%5===0;v/=5);if(v===1)return 0;for(var _=10%v,D=1;_!==1;D++)if(_=_*10%v,D>n)return 0;return D}function d(b,v,_){for(var D=1,C=p(10,_,v),A=0;A<300;A++){if(D===C)return A;D=D*10%v,C=C*10%v}return 0}function h(b,v){if(!b)return v;if(!v)return b;for(;;){if(b%=v,!b)return v;if(v%=b,!v)return b}}function g(b,v){if(f(b,v),this instanceof g)b=h(i.d,i.n),this.s=i.s,this.n=i.n/b,this.d=i.d/b;else return o(i.s*i.n,i.d)}g.DivisionByZero=new Error("Division by Zero"),g.InvalidParameter=new Error("Invalid argument"),g.NonIntegerParameter=new Error("Parameters must be integer"),g.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(b,v){return f(b,v),o(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(b,v){return f(b,v),o(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(b,v){return f(b,v),o(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(b,v){return f(b,v),o(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(b,v){if(isNaN(this.n)||isNaN(this.d))return new g(NaN);if(b===void 0)return o(this.s*this.n%this.d,1);if(f(b,v),i.n===0&&this.d===0)throw g.DivisionByZero;return o(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(b,v){return f(b,v),o(h(i.n,this.n)*h(i.d,this.d),i.d*this.d)},lcm:function(b,v){return f(b,v),i.n===0&&this.n===0?o(0,1):o(i.n*this.n,h(i.n,this.n)*h(i.d,this.d))},ceil:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.ceil(b*this.s*this.n/this.d),b)},floor:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.floor(b*this.s*this.n/this.d),b)},round:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.round(b*this.s*this.n/this.d),b)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(b,v){if(f(b,v),i.d===1)return i.s<0?o(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):o(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var _=s(this.n),D=s(this.d),C=1,A=1;for(var F in _)if(F!=="1"){if(F==="0"){C=0;break}if(_[F]*=i.n,_[F]%i.d===0)_[F]/=i.d;else return null;C*=Math.pow(F,_[F])}for(var F in D)if(F!=="1"){if(D[F]*=i.n,D[F]%i.d===0)D[F]/=i.d;else return null;A*=Math.pow(F,D[F])}return i.s<0?o(A,C):o(C,A)},equals:function(b,v){return f(b,v),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(b,v){f(b,v);var _=this.s*this.n*i.d-i.s*i.n*this.d;return(0<_)-(_<0)},simplify:function(b){if(isNaN(this.n)||isNaN(this.d))return this;b=b||.001;for(var v=this.abs(),_=v.toContinued(),D=1;D<_.length;D++){for(var C=o(_[D-1],1),A=D-2;A>=0;A--)C=C.inverse().add(_[A]);if(C.sub(v).abs().valueOf()<b)return C.mul(this.s)}return this},divisible:function(b,v){return f(b,v),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(b){var v,_="",D=this.n,C=this.d;return this.s<0&&(_+="-"),C===1?_+=D:(b&&(v=Math.floor(D/C))>0&&(_+=v,_+=" ",D%=C),_+=D,_+="/",_+=C),_},toLatex:function(b){var v,_="",D=this.n,C=this.d;return this.s<0&&(_+="-"),C===1?_+=D:(b&&(v=Math.floor(D/C))>0&&(_+=v,D%=C),_+="\\frac{",_+=D,_+="}{",_+=C,_+="}"),_},toContinued:function(){var b,v=this.n,_=this.d,D=[];if(isNaN(v)||isNaN(_))return D;do D.push(Math.floor(v/_)),b=v%_,v=_,_=b;while(v!==1);return D},toString:function(b){var v=this.n,_=this.d;if(isNaN(v)||isNaN(_))return"NaN";b=b||15;var D=c(v,_),C=d(v,_,D),A=this.s<0?"-":"";if(A+=v/_|0,v%=_,v*=10,v&&(A+="."),D){for(var F=C;F--;)A+=v/_|0,v%=_,v*=10;A+="(";for(var F=D;F--;)A+=v/_|0,v%=_,v*=10;A+=")"}else for(var F=b;v&&F--;)A+=v/_|0,v%=_,v*=10;return A}},Object.defineProperty(g,"__esModule",{value:!0}),g.default=g,g.Fraction=g,t.exports=g})()})(V2);const oi=Sf(sf);var j2="Fraction",q2=[],z2=Ut(j2,q2,()=>(Object.defineProperty(oi,"name",{value:"Fraction"}),oi.prototype.constructor=oi,oi.prototype.type="Fraction",oi.prototype.isFraction=!0,oi.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},oi.fromJSON=function(t){return new oi(t)},oi),{isClass:!0}),W2="Matrix",H2=[],G2=Ut(W2,H2,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function jp(t){return Object.keys(t.signatures||{}).reduce(function(e,r){var n=(r.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var K2="DenseMatrix",$2=["Matrix"],Y2=Ut(K2,$2,t=>{var{Matrix:e}=t;function r(c,d){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!Hn(d))throw new Error("Invalid datatype: "+d);if(Yr(c))c.type==="DenseMatrix"?(this._data=Er(c._data),this._size=Er(c._size),this._datatype=d||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=d||c._datatype);else if(c&&Qt(c.data)&&Qt(c.size))this._data=c.data,this._size=c.size,h0(this._data,this._size),this._datatype=d||c.datatype;else if(Qt(c))this._data=p(c),this._size=Oi(this._data),h0(this._data,this._size),this._datatype=d;else{if(c)throw new TypeError("Unsupported type of data ("+ia(c)+")");this._data=[],this._size=[0],this._datatype=d}}r.prototype=new e,r.prototype.createDenseMatrix=function(c,d){return new r(c,d)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return _s(this._data,ia)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(c,d){return new r(c,d)},r.prototype.subset=function(c,d,h){switch(arguments.length){case 1:return n(this,c);case 2:case 3:return u(this,c,d,h);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(c){if(!Qt(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new Rt(c.length,this._size.length);for(var d=0;d<c.length;d++)er(c[d],this._size[d]);for(var h=this._data,g=0,b=c.length;g<b;g++){var v=c[g];er(v,h.length),h=h[v]}return h},r.prototype.set=function(c,d,h){if(!Qt(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new Rt(c.length,this._size.length,"<");var g,b,v,_=c.map(function(C){return C+1});f(this,_,h);var D=this._data;for(g=0,b=c.length-1;g<b;g++)v=c[g],er(v,D.length),D=D[v];return v=c[c.length-1],er(v,D.length),D[v]=d,this};function n(c,d){if(!Af(d))throw new TypeError("Invalid index");var h=d.isScalar();if(h)return c.get(d.min());var g=d.size();if(g.length!==c._size.length)throw new Rt(g.length,c._size.length);for(var b=d.min(),v=d.max(),_=0,D=c._size.length;_<D;_++)er(b[_],c._size[_]),er(v[_],c._size[_]);return new r(i(c._data,d,g.length,0),c._datatype)}function i(c,d,h,g){var b=g===h-1,v=d.dimension(g);return b?v.map(function(_){return er(_,c.length),c[_]}).valueOf():v.map(function(_){er(_,c.length);var D=c[_];return i(D,d,h,g+1)}).valueOf()}function u(c,d,h,g){if(!d||d.isIndex!==!0)throw new TypeError("Invalid index");var b=d.size(),v=d.isScalar(),_;if(Yr(h)?(_=h.size(),h=h.valueOf()):_=Oi(h),v){if(_.length!==0)throw new TypeError("Scalar expected");c.set(d.min(),h,g)}else{if(b.length<c._size.length)throw new Rt(b.length,c._size.length,"<");if(_.length<b.length){for(var D=0,C=0;b[D]===1&&_[D]===1;)D++;for(;b[D]===1;)C++,D++;h=Cp(h,b.length,C,_)}if(!vs(b,_))throw new Rt(b,_,">");var A=d.max().map(function(S){return S+1});f(c,A,g);var F=b.length,E=0;o(c._data,d,h,F,E)}return c}function o(c,d,h,g,b){var v=b===g-1,_=d.dimension(b);v?_.forEach(function(D,C){er(D),c[D]=h[C[0]]}):_.forEach(function(D,C){er(D),o(c[D],d,h[C[0]],g,b+1)})}r.prototype.resize=function(c,d,h){if(!gs(c))throw new TypeError("Array or Matrix expected");var g=c.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),b=h?this.clone():this;return s(b,g,d)};function s(c,d,h){if(d.length===0){for(var g=c._data;Qt(g);)g=g[0];return g}return c._size=d.slice(0),c._data=d0(c._data,c._size,h),c}r.prototype.reshape=function(c,d){var h=d?this.clone():this;h._data=Aw(h._data,c);var g=h._size.reduce((b,v)=>b*v);return h._size=Cf(c,g),h};function f(c,d,h){for(var g=c._size.slice(0),b=!1;g.length<d.length;)g.push(0),b=!0;for(var v=0,_=d.length;v<_;v++)d[v]>g[v]&&(g[v]=d[v],b=!0);b&&s(c,g,h)}r.prototype.clone=function(){var c=new r({data:Er(this._data),size:Er(this._size),datatype:this._datatype});return c},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(c){var d=this,h=jp(c),g=function _(D,C){return Qt(D)?D.map(function(A,F){return _(A,C.concat(F))}):h===1?c(D):h===2?c(D,C):c(D,C,d)},b=g(this._data,[]),v=this._datatype!==void 0?_s(b,ia):void 0;return new r(b,v)},r.prototype.forEach=function(c){var d=this,h=function g(b,v){Qt(b)?b.forEach(function(_,D){g(_,v.concat(D))}):c(b,v,d)};h(this._data,[])},r.prototype[Symbol.iterator]=function*(){var c=function*d(h,g){if(Qt(h))for(var b=0;b<h.length;b++)yield*d(h[b],g.concat(b));else yield{value:h,index:g}};yield*c(this._data,[])},r.prototype.rows=function(){var c=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var h=this._data;for(var g of h)c.push(new r([g],this._datatype));return c},r.prototype.columns=function(){var c=this,d=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var g=this._data,b=function(D){var C=g.map(A=>[A[D]]);d.push(new r(C,c._datatype))},v=0;v<h[1];v++)b(v);return d},r.prototype.toArray=function(){return Er(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(c){return tn(this._data,c)},r.prototype.toString=function(){return tn(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(c){if(c){if(Fn(c)&&(c=c.toNumber()),!tr(c)||!Cr(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var d=c>0?c:0,h=c<0?-c:0,g=this._size[0],b=this._size[1],v=Math.min(g-h,b-d),_=[],D=0;D<v;D++)_[D]=this._data[D+h][D+d];return new r({data:_,size:[v],datatype:this._datatype})},r.diagonal=function(c,d,h,g){if(!Qt(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(T){if(Fn(T)&&(T=T.toNumber()),!tr(T)||!Cr(T)||T<1)throw new Error("Size values must be positive integers");return T}),h){if(Fn(h)&&(h=h.toNumber()),!tr(h)||!Cr(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var b=h>0?h:0,v=h<0?-h:0,_=c[0],D=c[1],C=Math.min(_-v,D-b),A;if(Qt(d)){if(d.length!==C)throw new Error("Invalid value array length");A=function(P){return d[P]}}else if(Yr(d)){var F=d.size();if(F.length!==1||F[0]!==C)throw new Error("Invalid matrix length");A=function(P){return d.get([P])}}else A=function(){return d};g||(g=Fn(A(0))?A(0).mul(0):0);var E=[];if(c.length>0){E=d0(E,c,g);for(var S=0;S<C;S++)E[S+v][S+b]=A(S)}return new r({data:E,size:[_,D]})},r.fromJSON=function(c){return new r(c)},r.prototype.swapRows=function(c,d){if(!tr(c)||!Cr(c)||!tr(d)||!Cr(d))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return er(c,this._size[0]),er(d,this._size[0]),r._swapRows(c,d,this._data),this},r._swapRows=function(c,d,h){var g=h[c];h[c]=h[d],h[d]=g};function p(c){for(var d=0,h=c.length;d<h;d++){var g=c[d];Qt(g)?c[d]=p(g):g&&g.isMatrix===!0&&(c[d]=p(g.valueOf()))}return c}return r},{isClass:!0});function Bf(t,e,r){return t&&typeof t.map=="function"?t.map(function(n){return Bf(n,e)}):e(t)}var m0="isInteger",Z2=["typed"],X2=Ut(m0,Z2,t=>{var{typed:e}=t;return e(m0,{number:Cr,BigNumber:function(n){return n.isInt()},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":e.referToSelf(r=>n=>Bf(n,r))})}),qp="number, number";function zp(t,e){return t+e}zp.signature=qp;function Wp(t,e){return t*e}Wp.signature=qp;function J2(t,e,r){if(r==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return n.lte(i.times(r))}return!1}function Q2(t,e,r){return ms(t.re,e.re,r)&&ms(t.im,e.im,r)}var eA=Ut("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),ws="equalScalar",tA=["typed","config"],rA=Ut(ws,tA,t=>{var{typed:e,config:r}=t,n=eA({typed:e});return e(ws,{"boolean, boolean":function(u,o){return u===o},"number, number":function(u,o){return ms(u,o,r.epsilon)},"BigNumber, BigNumber":function(u,o){return u.eq(o)||J2(u,o,r.epsilon)},"Fraction, Fraction":function(u,o){return u.equals(o)},"Complex, Complex":function(u,o){return Q2(u,o,r.epsilon)}},n)});Ut(ws,["typed","config"],t=>{var{typed:e,config:r}=t;return e(ws,{"number, number":function(i,u){return ms(i,u,r.epsilon)}})});var nA="SparseMatrix",iA=["typed","equalScalar","Matrix"],uA=Ut(nA,iA,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(v,_){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(_&&!Hn(_))throw new Error("Invalid datatype: "+_);if(Yr(v))u(this,v,_);else if(v&&Qt(v.index)&&Qt(v.ptr)&&Qt(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=_||v.datatype;else if(Qt(v))o(this,v,_);else{if(v)throw new TypeError("Unsupported type of data ("+ia(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=_}}function u(v,_,D){_.type==="SparseMatrix"?(v._values=_._values?Er(_._values):void 0,v._index=Er(_._index),v._ptr=Er(_._ptr),v._size=Er(_._size),v._datatype=D||_._datatype):o(v,_.valueOf(),D||_._datatype)}function o(v,_,D){v._values=[],v._index=[],v._ptr=[],v._datatype=D;var C=_.length,A=0,F=r,E=0;if(Hn(D)&&(F=e.find(r,[D,D])||r,E=e.convert(0,D)),C>0){var S=0;do{v._ptr.push(v._index.length);for(var T=0;T<C;T++){var P=_[T];if(Qt(P)){if(S===0&&A<P.length&&(A=P.length),S<P.length){var x=P[S];F(x,E)||(v._values.push(x),v._index.push(T))}}else S===0&&A<1&&(A=1),F(P,E)||(v._values.push(P),v._index.push(T))}S++}while(S<A)}v._ptr.push(v._index.length),v._size=[C,A]}i.prototype=new n,i.prototype.createSparseMatrix=function(v,_){return new i(v,_)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return _s(this._values,ia)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(v,_){return new i(v,_)},i.prototype.density=function(){var v=this._size[0],_=this._size[1];return v!==0&&_!==0?this._index.length/(v*_):0},i.prototype.subset=function(v,_,D){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,v);case 2:case 3:return f(this,v,_,D);default:throw new SyntaxError("Wrong number of arguments")}};function s(v,_){if(!Af(_))throw new TypeError("Invalid index");var D=_.isScalar();if(D)return v.get(_.min());var C=_.size();if(C.length!==v._size.length)throw new Rt(C.length,v._size.length);var A,F,E,S,T=_.min(),P=_.max();for(A=0,F=v._size.length;A<F;A++)er(T[A],v._size[A]),er(P[A],v._size[A]);var x=v._values,H=v._index,re=v._ptr,V=_.dimension(0),Y=_.dimension(1),U=[],K=[];V.forEach(function(J,le){K[J]=le[0],U[J]=!0});var q=x?[]:void 0,te=[],Q=[];return Y.forEach(function(J){for(Q.push(te.length),E=re[J],S=re[J+1];E<S;E++)A=H[E],U[A]===!0&&(te.push(K[A]),q&&q.push(x[E]))}),Q.push(te.length),new i({values:q,index:te,ptr:Q,size:C,datatype:v._datatype})}function f(v,_,D,C){if(!_||_.isIndex!==!0)throw new TypeError("Invalid index");var A=_.size(),F=_.isScalar(),E;if(Yr(D)?(E=D.size(),D=D.toArray()):E=Oi(D),F){if(E.length!==0)throw new TypeError("Scalar expected");v.set(_.min(),D,C)}else{if(A.length!==1&&A.length!==2)throw new Rt(A.length,v._size.length,"<");if(E.length<A.length){for(var S=0,T=0;A[S]===1&&E[S]===1;)S++;for(;A[S]===1;)T++,S++;D=Cp(D,A.length,T,E)}if(!vs(A,E))throw new Rt(A,E,">");if(A.length===1){var P=_.dimension(0);P.forEach(function(re,V){er(re),v.set([re,0],D[V[0]],C)})}else{var x=_.dimension(0),H=_.dimension(1);x.forEach(function(re,V){er(re),H.forEach(function(Y,U){er(Y),v.set([re,Y],D[V[0]][U[0]],C)})})}}return v}i.prototype.get=function(v){if(!Qt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Rt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var _=v[0],D=v[1];er(_,this._size[0]),er(D,this._size[1]);var C=p(_,this._ptr[D],this._ptr[D+1],this._index);return C<this._ptr[D+1]&&this._index[C]===_?this._values[C]:0},i.prototype.set=function(v,_,D){if(!Qt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Rt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var C=v[0],A=v[1],F=this._size[0],E=this._size[1],S=r,T=0;Hn(this._datatype)&&(S=e.find(r,[this._datatype,this._datatype])||r,T=e.convert(0,this._datatype)),(C>F-1||A>E-1)&&(h(this,Math.max(C+1,F),Math.max(A+1,E),D),F=this._size[0],E=this._size[1]),er(C,F),er(A,E);var P=p(C,this._ptr[A],this._ptr[A+1],this._index);return P<this._ptr[A+1]&&this._index[P]===C?S(_,T)?c(P,A,this._values,this._index,this._ptr):this._values[P]=_:S(_,T)||d(P,C,A,_,this._values,this._index,this._ptr),this};function p(v,_,D,C){if(D-_===0)return D;for(var A=_;A<D;A++)if(C[A]===v)return A;return _}function c(v,_,D,C,A){D.splice(v,1),C.splice(v,1);for(var F=_+1;F<A.length;F++)A[F]--}function d(v,_,D,C,A,F,E){A.splice(v,0,C),F.splice(v,0,_);for(var S=D+1;S<E.length;S++)E[S]++}i.prototype.resize=function(v,_,D){if(!gs(v))throw new TypeError("Array or Matrix expected");var C=v.valueOf().map(F=>Array.isArray(F)&&F.length===1?F[0]:F);if(C.length!==2)throw new Error("Only two dimensions matrix are supported");C.forEach(function(F){if(!tr(F)||!Cr(F)||F<0)throw new TypeError("Invalid size, must contain positive integers (size: "+tn(C)+")")});var A=D?this.clone():this;return h(A,C[0],C[1],_)};function h(v,_,D,C){var A=C||0,F=r,E=0;Hn(v._datatype)&&(F=e.find(r,[v._datatype,v._datatype])||r,E=e.convert(0,v._datatype),A=e.convert(A,v._datatype));var S=!F(A,E),T=v._size[0],P=v._size[1],x,H,re;if(D>P){for(H=P;H<D;H++)if(v._ptr[H]=v._values.length,S)for(x=0;x<T;x++)v._values.push(A),v._index.push(x);v._ptr[D]=v._values.length}else D<P&&(v._ptr.splice(D+1,P-D),v._values.splice(v._ptr[D],v._values.length),v._index.splice(v._ptr[D],v._index.length));if(P=D,_>T){if(S){var V=0;for(H=0;H<P;H++){v._ptr[H]=v._ptr[H]+V,re=v._ptr[H+1]+V;var Y=0;for(x=T;x<_;x++,Y++)v._values.splice(re+Y,0,A),v._index.splice(re+Y,0,x),V++}v._ptr[P]=v._values.length}}else if(_<T){var U=0;for(H=0;H<P;H++){v._ptr[H]=v._ptr[H]-U;var K=v._ptr[H],q=v._ptr[H+1]-U;for(re=K;re<q;re++)x=v._index[re],x>_-1&&(v._values.splice(re,1),v._index.splice(re,1),U++)}v._ptr[H]=v._values.length}return v._size[0]=_,v._size[1]=D,v}i.prototype.reshape=function(v,_){if(!Qt(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(J){if(!tr(J)||!Cr(J)||J<=-2||J===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+tn(v)+")")});var D=this._size[0]*this._size[1];v=Cf(v,D);var C=v[0]*v[1];if(D!==C)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var A=_?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return A;for(var F=[],E=0;E<A._ptr.length;E++)for(var S=0;S<A._ptr[E+1]-A._ptr[E];S++)F.push(E);for(var T=A._values.slice(),P=A._index.slice(),x=0;x<A._index.length;x++){var H=P[x],re=F[x],V=H*A._size[1]+re;F[x]=V%v[1],P[x]=Math.floor(V/v[1])}A._values.length=0,A._index.length=0,A._ptr.length=v[1]+1,A._size=v.slice();for(var Y=0;Y<A._ptr.length;Y++)A._ptr[Y]=0;for(var U=0;U<T.length;U++){var K=P[U],q=F[U],te=T[U],Q=p(K,A._ptr[q],A._ptr[q+1],A._index);d(Q,K,q,te,A._values,A._index,A._ptr)}return A},i.prototype.clone=function(){var v=new i({values:this._values?Er(this._values):void 0,index:Er(this._index),ptr:Er(this._ptr),size:Er(this._size),datatype:this._datatype});return v},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(v,_){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var D=this,C=this._size[0],A=this._size[1],F=jp(v),E=function(T,P,x){return F===1?v(T):F===2?v(T,[P,x]):v(T,[P,x],D)};return g(this,0,C-1,0,A-1,E,_)};function g(v,_,D,C,A,F,E){var S=[],T=[],P=[],x=r,H=0;Hn(v._datatype)&&(x=e.find(r,[v._datatype,v._datatype])||r,H=e.convert(0,v._datatype));for(var re=function(Ae,Me,qe){Ae=F(Ae,Me,qe),x(Ae,H)||(S.push(Ae),T.push(Me))},V=C;V<=A;V++){P.push(S.length);var Y=v._ptr[V],U=v._ptr[V+1];if(E)for(var K=Y;K<U;K++){var q=v._index[K];q>=_&&q<=D&&re(v._values[K],q-_,V-C)}else{for(var te={},Q=Y;Q<U;Q++){var J=v._index[Q];te[J]=v._values[Q]}for(var le=_;le<=D;le++){var _e=le in te?te[le]:0;re(_e,le-_,V-C)}}}return P.push(S.length),new i({values:S,index:T,ptr:P,size:[D-_+1,A-C+1]})}i.prototype.forEach=function(v,_){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var D=this,C=this._size[0],A=this._size[1],F=0;F<A;F++){var E=this._ptr[F],S=this._ptr[F+1];if(_)for(var T=E;T<S;T++){var P=this._index[T];v(this._values[T],[P,F],D)}else{for(var x={},H=E;H<S;H++){var re=this._index[H];x[re]=this._values[H]}for(var V=0;V<C;V++){var Y=V in x?x[V]:0;v(Y,[V,F],D)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],_=0;_<v;_++)for(var D=this._ptr[_],C=this._ptr[_+1],A=D;A<C;A++){var F=this._index[A];yield{value:this._values[A],index:[F,_]}}},i.prototype.toArray=function(){return b(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return b(this._values,this._index,this._ptr,this._size,!1)};function b(v,_,D,C,A){var F=C[0],E=C[1],S=[],T,P;for(T=0;T<F;T++)for(S[T]=[],P=0;P<E;P++)S[T][P]=0;for(P=0;P<E;P++)for(var x=D[P],H=D[P+1],re=x;re<H;re++)T=_[re],S[T][P]=v?A?Er(v[re]):v[re]:1;return S}return i.prototype.format=function(v){for(var _=this._size[0],D=this._size[1],C=this.density(),A="Sparse Matrix ["+tn(_,v)+" x "+tn(D,v)+"] density: "+tn(C,v)+`
`,F=0;F<D;F++)for(var E=this._ptr[F],S=this._ptr[F+1],T=E;T<S;T++){var P=this._index[T];A+=`
    (`+tn(P,v)+", "+tn(F,v)+") ==> "+(this._values?tn(this._values[T],v):"X")}return A},i.prototype.toString=function(){return tn(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(v){if(v){if(Fn(v)&&(v=v.toNumber()),!tr(v)||!Cr(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var _=v>0?v:0,D=v<0?-v:0,C=this._size[0],A=this._size[1],F=Math.min(C-D,A-_),E=[],S=[],T=[];T[0]=0;for(var P=_;P<A&&E.length<F;P++)for(var x=this._ptr[P],H=this._ptr[P+1],re=x;re<H;re++){var V=this._index[re];if(V===P-_+D){E.push(this._values[re]),S[E.length-1]=V-D;break}}return T.push(E.length),new i({values:E,index:S,ptr:T,size:[F,1]})},i.fromJSON=function(v){return new i(v)},i.diagonal=function(v,_,D,C,A){if(!Qt(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(J){if(Fn(J)&&(J=J.toNumber()),!tr(J)||!Cr(J)||J<1)throw new Error("Size values must be positive integers");return J}),D){if(Fn(D)&&(D=D.toNumber()),!tr(D)||!Cr(D))throw new TypeError("The parameter k must be an integer number")}else D=0;var F=r,E=0;Hn(A)&&(F=e.find(r,[A,A])||r,E=e.convert(0,A));var S=D>0?D:0,T=D<0?-D:0,P=v[0],x=v[1],H=Math.min(P-T,x-S),re;if(Qt(_)){if(_.length!==H)throw new Error("Invalid value array length");re=function(le){return _[le]}}else if(Yr(_)){var V=_.size();if(V.length!==1||V[0]!==H)throw new Error("Invalid matrix length");re=function(le){return _.get([le])}}else re=function(){return _};for(var Y=[],U=[],K=[],q=0;q<x;q++){K.push(Y.length);var te=q-S;if(te>=0&&te<H){var Q=re(te);F(Q,E)||(U.push(te+T),Y.push(Q))}}return K.push(Y.length),new i({values:Y,index:U,ptr:K,size:[P,x]})},i.prototype.swapRows=function(v,_){if(!tr(v)||!Cr(v)||!tr(_)||!Cr(_))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return er(v,this._size[0]),er(_,this._size[0]),i._swapRows(v,_,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(v,_,D,C,A){for(var F=C[v],E=C[v+1],S=F;S<E;S++)A(D[S],_[S])},i._swapRows=function(v,_,D,C,A,F){for(var E=0;E<D;E++){var S=F[E],T=F[E+1],P=p(v,S,T,A),x=p(_,S,T,A);if(P<T&&x<T&&A[P]===v&&A[x]===_){if(C){var H=C[P];C[P]=C[x],C[x]=H}continue}if(P<T&&A[P]===v&&(x>=T||A[x]!==_)){var re=C?C[P]:void 0;A.splice(x,0,_),C&&C.splice(x,0,re),A.splice(x<=P?P+1:P,1),C&&C.splice(x<=P?P+1:P,1);continue}if(x<T&&A[x]===_&&(P>=T||A[P]!==v)){var V=C?C[x]:void 0;A.splice(P,0,v),C&&C.splice(P,0,V),A.splice(P<=x?x+1:x,1),C&&C.splice(P<=x?x+1:x,1)}}},i},{isClass:!0}),_0="matrix",aA=["typed","Matrix","DenseMatrix","SparseMatrix"],sA=Ut(_0,aA,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(_0,{"":function(){return u([])},string:function(s){return u([],s)},"string, string":function(s,f){return u([],s,f)},Array:function(s){return u(s)},Matrix:function(s){return u(s,s.storage())},"Array | Matrix, string":u,"Array | Matrix, string, string":u});function u(o,s,f){if(s==="dense"||s==="default"||s===void 0)return new n(o,f);if(s==="sparse")return new i(o,f);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),D0="addScalar",oA=["typed"],lA=Ut(D0,oA,t=>{var{typed:e}=t;return e(D0,{"number, number":zp,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var u=n.clone();return u.value=e.find(r,[u.valueType(),i.valueType()])(u.value,i.value),u.fixPrefix=!1,u})})}),fA="matAlgo11xS0s",cA=["typed","equalScalar"],hA=Ut(fA,cA,t=>{var{typed:e,equalScalar:r}=t;return function(i,u,o,s){var f=i._values,p=i._index,c=i._ptr,d=i._size,h=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=d[0],b=d[1],v,_=r,D=0,C=o;typeof h=="string"&&(v=h,_=e.find(r,[v,v]),D=e.convert(0,v),u=e.convert(u,v),C=e.find(o,[v,v]));for(var A=[],F=[],E=[],S=0;S<b;S++){E[S]=F.length;for(var T=c[S],P=c[S+1],x=T;x<P;x++){var H=p[x],re=s?C(u,f[x]):C(f[x],u);_(re,D)||(F.push(H),A.push(re))}}return E[b]=F.length,i.createSparseMatrix({values:A,index:F,ptr:E,size:[g,b],datatype:v})}}),dA="matAlgo14xDs",pA=["typed"],Hp=Ut(dA,pA,t=>{var{typed:e}=t;return function(i,u,o,s){var f=i._data,p=i._size,c=i._datatype,d,h=o;typeof c=="string"&&(d=c,u=e.convert(u,d),h=e.find(o,[d,d]));var g=p.length>0?r(h,0,p,p[0],f,u,s):[];return i.createDenseMatrix({data:g,size:Er(p),datatype:d})};function r(n,i,u,o,s,f,p){var c=[];if(i===u.length-1)for(var d=0;d<o;d++)c[d]=p?n(f,s[d]):n(s[d],f);else for(var h=0;h<o;h++)c[h]=r(n,i+1,u,u[i+1],s[h],f,p);return c}}),gA="matAlgo01xDSid",vA=["typed"],mA=Ut(gA,vA,t=>{var{typed:e}=t;return function(n,i,u,o){var s=n._data,f=n._size,p=n._datatype,c=i._values,d=i._index,h=i._ptr,g=i._size,b=i._datatype;if(f.length!==g.length)throw new Rt(f.length,g.length);if(f[0]!==g[0]||f[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+g+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=f[0],_=f[1],D=typeof p=="string"&&p===b?p:void 0,C=D?e.find(u,[D,D]):u,A,F,E=[];for(A=0;A<v;A++)E[A]=[];var S=[],T=[];for(F=0;F<_;F++){for(var P=F+1,x=h[F],H=h[F+1],re=x;re<H;re++)A=d[re],S[A]=o?C(c[re],s[A][F]):C(s[A][F],c[re]),T[A]=P;for(A=0;A<v;A++)T[A]===P?E[A][F]=S[A]:E[A][F]=s[A][F]}return n.createDenseMatrix({data:E,size:[v,_],datatype:D})}}),_A="matAlgo04xSidSid",DA=["typed","equalScalar"],bA=Ut(_A,DA,t=>{var{typed:e,equalScalar:r}=t;return function(i,u,o){var s=i._values,f=i._index,p=i._ptr,c=i._size,d=i._datatype,h=u._values,g=u._index,b=u._ptr,v=u._size,_=u._datatype;if(c.length!==v.length)throw new Rt(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var D=c[0],C=c[1],A,F=r,E=0,S=o;typeof d=="string"&&d===_&&(A=d,F=e.find(r,[A,A]),E=e.convert(0,A),S=e.find(o,[A,A]));var T=s&&h?[]:void 0,P=[],x=[],H=s&&h?[]:void 0,re=s&&h?[]:void 0,V=[],Y=[],U,K,q,te,Q;for(K=0;K<C;K++){x[K]=P.length;var J=K+1;for(te=p[K],Q=p[K+1],q=te;q<Q;q++)U=f[q],P.push(U),V[U]=J,H&&(H[U]=s[q]);for(te=b[K],Q=b[K+1],q=te;q<Q;q++)if(U=g[q],V[U]===J){if(H){var le=S(H[U],h[q]);F(le,E)?V[U]=null:H[U]=le}}else P.push(U),Y[U]=J,re&&(re[U]=h[q]);if(H&&re)for(q=x[K];q<P.length;)U=P[q],V[U]===J?(T[q]=H[U],q++):Y[U]===J?(T[q]=re[U],q++):P.splice(q,1)}return x[C]=P.length,i.createSparseMatrix({values:T,index:P,ptr:x,size:[D,C],datatype:A})}}),yA="matAlgo10xSids",wA=["typed","DenseMatrix"],AA=Ut(yA,wA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,u,o,s){var f=i._values,p=i._index,c=i._ptr,d=i._size,h=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=d[0],b=d[1],v,_=o;typeof h=="string"&&(v=h,u=e.convert(u,v),_=e.find(o,[v,v]));for(var D=[],C=[],A=[],F=0;F<b;F++){for(var E=F+1,S=c[F],T=c[F+1],P=S;P<T;P++){var x=p[P];C[x]=f[P],A[x]=E}for(var H=0;H<g;H++)F===0&&(D[H]=[]),A[H]===E?D[H][F]=s?_(u,C[H]):_(C[H],u):D[H][F]=u}return new r({data:D,size:[g,b],datatype:v})}}),EA="matAlgo13xDD",CA=["typed"],FA=Ut(EA,CA,t=>{var{typed:e}=t;return function(i,u,o){var s=i._data,f=i._size,p=i._datatype,c=u._data,d=u._size,h=u._datatype,g=[];if(f.length!==d.length)throw new Rt(f.length,d.length);for(var b=0;b<f.length;b++){if(f[b]!==d[b])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+d+")");g[b]=f[b]}var v,_=o;typeof p=="string"&&p===h&&(v=p,_=e.find(o,[v,v]));var D=g.length>0?r(_,0,g,g[0],s,c):[];return i.createDenseMatrix({data:D,size:g,datatype:v})};function r(n,i,u,o,s,f){var p=[];if(i===u.length-1)for(var c=0;c<o;c++)p[c]=n(s[c],f[c]);else for(var d=0;d<o;d++)p[d]=r(n,i+1,u,u[i+1],s[d],f[d]);return p}}),SA="broadcast",BA=["concat"],OA=Ut(SA,BA,t=>{var{concat:e}=t;return function(u,o){var s=Math.max(u._size.length,o._size.length);if(u._size.length===o._size.length&&u._size.every((_,D)=>_===o._size[D]))return[u,o];for(var f=r(u._size,s,0),p=r(o._size,s,0),c=[],d=0;d<s;d++)c[d]=Math.max(f[d],p[d]);for(var h=0;h<s;h++)i(f,c,h),i(p,c,h);var g=u.clone(),b=o.clone();g._size.length<s?g.reshape(r(g._size,s,1)):b._size.length<s&&b.reshape(r(b._size,s,1));for(var v=0;v<s;v++)g._size[v]<c[v]&&(g=n(g,c[v],v)),b._size[v]<c[v]&&(b=n(b,c[v],v));return[g,b]};function r(u,o,s){return[...Array(o-u.length).fill(s),...u]}function n(u,o,s){return e(...Array(o).fill(u),s)}function i(u,o,s){if(u[s]<o[s]&u[s]>1)throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(u,") not possible to broadcast dimension ").concat(s," with size ").concat(u[s]," to size ").concat(o[s]))}}),MA="matrixAlgorithmSuite",PA=["typed","matrix","concat"],TA=Ut(MA,PA,t=>{var{typed:e,matrix:r,concat:n}=t,i=FA({typed:e}),u=Hp({typed:e}),o=OA({concat:n});return function(f){var p=f.elop,c=f.SD||f.DS,d;p?(d={"DenseMatrix, DenseMatrix":(v,_)=>i(...o(v,_),p),"Array, Array":(v,_)=>i(...o(r(v),r(_)),p).valueOf(),"Array, DenseMatrix":(v,_)=>i(...o(r(v),_),p),"DenseMatrix, Array":(v,_)=>i(...o(v,r(_)),p)},f.SS&&(d["SparseMatrix, SparseMatrix"]=(v,_)=>f.SS(...o(v,_),p,!1)),f.DS&&(d["DenseMatrix, SparseMatrix"]=(v,_)=>f.DS(...o(v,_),p,!1),d["Array, SparseMatrix"]=(v,_)=>f.DS(...o(r(v),_),p,!1)),c&&(d["SparseMatrix, DenseMatrix"]=(v,_)=>c(...o(_,v),p,!0),d["SparseMatrix, Array"]=(v,_)=>c(...o(r(_),v),p,!0))):(d={"DenseMatrix, DenseMatrix":e.referToSelf(v=>(_,D)=>i(...o(_,D),v)),"Array, Array":e.referToSelf(v=>(_,D)=>i(...o(r(_),r(D)),v).valueOf()),"Array, DenseMatrix":e.referToSelf(v=>(_,D)=>i(...o(r(_),D),v)),"DenseMatrix, Array":e.referToSelf(v=>(_,D)=>i(...o(_,r(D)),v))},f.SS&&(d["SparseMatrix, SparseMatrix"]=e.referToSelf(v=>(_,D)=>f.SS(...o(_,D),v,!1))),f.DS&&(d["DenseMatrix, SparseMatrix"]=e.referToSelf(v=>(_,D)=>f.DS(...o(_,D),v,!1)),d["Array, SparseMatrix"]=e.referToSelf(v=>(_,D)=>f.DS(...o(r(_),D),v,!1))),c&&(d["SparseMatrix, DenseMatrix"]=e.referToSelf(v=>(_,D)=>c(...o(D,_),v,!0)),d["SparseMatrix, Array"]=e.referToSelf(v=>(_,D)=>c(...o(r(D),_),v,!0))));var h=f.scalar||"any",g=f.Ds||f.Ss;g&&(p?(d["DenseMatrix,"+h]=(v,_)=>u(v,_,p,!1),d[h+", DenseMatrix"]=(v,_)=>u(_,v,p,!0),d["Array,"+h]=(v,_)=>u(r(v),_,p,!1).valueOf(),d[h+", Array"]=(v,_)=>u(r(_),v,p,!0).valueOf()):(d["DenseMatrix,"+h]=e.referToSelf(v=>(_,D)=>u(_,D,v,!1)),d[h+", DenseMatrix"]=e.referToSelf(v=>(_,D)=>u(D,_,v,!0)),d["Array,"+h]=e.referToSelf(v=>(_,D)=>u(r(_),D,v,!1).valueOf()),d[h+", Array"]=e.referToSelf(v=>(_,D)=>u(r(D),_,v,!0).valueOf())));var b=f.sS!==void 0?f.sS:f.Ss;return p?(f.Ss&&(d["SparseMatrix,"+h]=(v,_)=>f.Ss(v,_,p,!1)),b&&(d[h+", SparseMatrix"]=(v,_)=>b(_,v,p,!0))):(f.Ss&&(d["SparseMatrix,"+h]=e.referToSelf(v=>(_,D)=>f.Ss(_,D,v,!1))),b&&(d[h+", SparseMatrix"]=e.referToSelf(v=>(_,D)=>b(D,_,v,!0)))),p&&p.signatures&&ow(d,p.signatures),d}}),kA="multiplyScalar",IA=["typed"],NA=Ut(kA,IA,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":Wp,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),b0="multiply",xA=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],RA=Ut(b0,xA,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:u,dot:o}=t,s=hA({typed:e,equalScalar:u}),f=Hp({typed:e});function p(E,S){switch(E.length){case 1:switch(S.length){case 1:if(E[0]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(E[0]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+E[0]+") must match Matrix rows ("+S[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+S.length+" dimensions)")}break;case 2:switch(S.length){case 1:if(E[1]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+E[1]+") must match Vector length ("+S[0]+")");break;case 2:if(E[1]!==S[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+E[1]+") must match Matrix B rows ("+S[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+S.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+E.length+" dimensions)")}}function c(E,S,T){if(T===0)throw new Error("Cannot multiply two empty vectors");return o(E,S)}function d(E,S){if(S.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return h(E,S)}function h(E,S){var T=E._data,P=E._size,x=E._datatype,H=S._data,re=S._size,V=S._datatype,Y=P[0],U=re[1],K,q=n,te=i;x&&V&&x===V&&typeof x=="string"&&(K=x,q=e.find(n,[K,K]),te=e.find(i,[K,K]));for(var Q=[],J=0;J<U;J++){for(var le=te(T[0],H[0][J]),_e=1;_e<Y;_e++)le=q(le,te(T[_e],H[_e][J]));Q[J]=le}return E.createDenseMatrix({data:Q,size:[U],datatype:K})}var g=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":C}),b=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":_,"DenseMatrix, SparseMatrix":D,"SparseMatrix, DenseMatrix":A,"SparseMatrix, SparseMatrix":F});function v(E,S){var T=E._data,P=E._size,x=E._datatype,H=S._data,re=S._datatype,V=P[0],Y=P[1],U,K=n,q=i;x&&re&&x===re&&typeof x=="string"&&(U=x,K=e.find(n,[U,U]),q=e.find(i,[U,U]));for(var te=[],Q=0;Q<V;Q++){for(var J=T[Q],le=q(J[0],H[0]),_e=1;_e<Y;_e++)le=K(le,q(J[_e],H[_e]));te[Q]=le}return E.createDenseMatrix({data:te,size:[V],datatype:U})}function _(E,S){var T=E._data,P=E._size,x=E._datatype,H=S._data,re=S._size,V=S._datatype,Y=P[0],U=P[1],K=re[1],q,te=n,Q=i;x&&V&&x===V&&typeof x=="string"&&(q=x,te=e.find(n,[q,q]),Q=e.find(i,[q,q]));for(var J=[],le=0;le<Y;le++){var _e=T[le];J[le]=[];for(var Fe=0;Fe<K;Fe++){for(var Ae=Q(_e[0],H[0][Fe]),Me=1;Me<U;Me++)Ae=te(Ae,Q(_e[Me],H[Me][Fe]));J[le][Fe]=Ae}}return E.createDenseMatrix({data:J,size:[Y,K],datatype:q})}function D(E,S){var T=E._data,P=E._size,x=E._datatype,H=S._values,re=S._index,V=S._ptr,Y=S._size,U=S._datatype;if(!H)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var K=P[0],q=Y[1],te,Q=n,J=i,le=u,_e=0;x&&U&&x===U&&typeof x=="string"&&(te=x,Q=e.find(n,[te,te]),J=e.find(i,[te,te]),le=e.find(u,[te,te]),_e=e.convert(0,te));for(var Fe=[],Ae=[],Me=[],qe=S.createSparseMatrix({values:Fe,index:Ae,ptr:Me,size:[K,q],datatype:te}),Ve=0;Ve<q;Ve++){Me[Ve]=Ae.length;var tt=V[Ve],He=V[Ve+1];if(He>tt)for(var je=0,ze=0;ze<K;ze++){for(var mt=ze+1,at=void 0,ft=tt;ft<He;ft++){var st=re[ft];je!==mt?(at=J(T[ze][st],H[ft]),je=mt):at=Q(at,J(T[ze][st],H[ft]))}je===mt&&!le(at,_e)&&(Ae.push(ze),Fe.push(at))}}return Me[q]=Ae.length,qe}function C(E,S){var T=E._values,P=E._index,x=E._ptr,H=E._datatype;if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var re=S._data,V=S._datatype,Y=E._size[0],U=S._size[0],K=[],q=[],te=[],Q,J=n,le=i,_e=u,Fe=0;H&&V&&H===V&&typeof H=="string"&&(Q=H,J=e.find(n,[Q,Q]),le=e.find(i,[Q,Q]),_e=e.find(u,[Q,Q]),Fe=e.convert(0,Q));var Ae=[],Me=[];te[0]=0;for(var qe=0;qe<U;qe++){var Ve=re[qe];if(!_e(Ve,Fe))for(var tt=x[qe],He=x[qe+1],je=tt;je<He;je++){var ze=P[je];Me[ze]?Ae[ze]=J(Ae[ze],le(Ve,T[je])):(Me[ze]=!0,q.push(ze),Ae[ze]=le(Ve,T[je]))}}for(var mt=q.length,at=0;at<mt;at++){var ft=q[at];K[at]=Ae[ft]}return te[1]=q.length,E.createSparseMatrix({values:K,index:q,ptr:te,size:[Y,1],datatype:Q})}function A(E,S){var T=E._values,P=E._index,x=E._ptr,H=E._datatype;if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var re=S._data,V=S._datatype,Y=E._size[0],U=S._size[0],K=S._size[1],q,te=n,Q=i,J=u,le=0;H&&V&&H===V&&typeof H=="string"&&(q=H,te=e.find(n,[q,q]),Q=e.find(i,[q,q]),J=e.find(u,[q,q]),le=e.convert(0,q));for(var _e=[],Fe=[],Ae=[],Me=E.createSparseMatrix({values:_e,index:Fe,ptr:Ae,size:[Y,K],datatype:q}),qe=[],Ve=[],tt=0;tt<K;tt++){Ae[tt]=Fe.length;for(var He=tt+1,je=0;je<U;je++){var ze=re[je][tt];if(!J(ze,le))for(var mt=x[je],at=x[je+1],ft=mt;ft<at;ft++){var st=P[ft];Ve[st]!==He?(Ve[st]=He,Fe.push(st),qe[st]=Q(ze,T[ft])):qe[st]=te(qe[st],Q(ze,T[ft]))}}for(var ot=Ae[tt],Xe=Fe.length,Je=ot;Je<Xe;Je++){var Ce=Fe[Je];_e[Je]=qe[Ce]}}return Ae[K]=Fe.length,Me}function F(E,S){var T=E._values,P=E._index,x=E._ptr,H=E._datatype,re=S._values,V=S._index,Y=S._ptr,U=S._datatype,K=E._size[0],q=S._size[1],te=T&&re,Q,J=n,le=i;H&&U&&H===U&&typeof H=="string"&&(Q=H,J=e.find(n,[Q,Q]),le=e.find(i,[Q,Q]));for(var _e=te?[]:void 0,Fe=[],Ae=[],Me=E.createSparseMatrix({values:_e,index:Fe,ptr:Ae,size:[K,q],datatype:Q}),qe=te?[]:void 0,Ve=[],tt,He,je,ze,mt,at,ft,st,ot=0;ot<q;ot++){Ae[ot]=Fe.length;var Xe=ot+1;for(mt=Y[ot],at=Y[ot+1],ze=mt;ze<at;ze++)if(st=V[ze],te)for(He=x[st],je=x[st+1],tt=He;tt<je;tt++)ft=P[tt],Ve[ft]!==Xe?(Ve[ft]=Xe,Fe.push(ft),qe[ft]=le(re[ze],T[tt])):qe[ft]=J(qe[ft],le(re[ze],T[tt]));else for(He=x[st],je=x[st+1],tt=He;tt<je;tt++)ft=P[tt],Ve[ft]!==Xe&&(Ve[ft]=Xe,Fe.push(ft));if(te)for(var Je=Ae[ot],Ce=Fe.length,Pe=Je;Pe<Ce;Pe++){var Ot=Fe[Pe];_e[Pe]=qe[Ot]}}return Ae[q]=Fe.length,Me}return e(b0,i,{"Array, Array":e.referTo("Matrix, Matrix",E=>(S,T)=>{p(Oi(S),Oi(T));var P=E(r(S),r(T));return Yr(P)?P.valueOf():P}),"Matrix, Matrix":function(S,T){var P=S.size(),x=T.size();return p(P,x),P.length===1?x.length===1?c(S,T,P[0]):d(S,T):x.length===1?g(S,T):b(S,T)},"Matrix, Array":e.referTo("Matrix,Matrix",E=>(S,T)=>E(S,r(T))),"Array, Matrix":e.referToSelf(E=>(S,T)=>E(r(S,T.storage()),T)),"SparseMatrix, any":function(S,T){return s(S,T,i,!1)},"DenseMatrix, any":function(S,T){return f(S,T,i,!1)},"any, SparseMatrix":function(S,T){return s(T,S,i,!0)},"any, DenseMatrix":function(S,T){return f(T,S,i,!0)},"Array, any":function(S,T){return f(r(S),T,i,!1).valueOf()},"any, Array":function(S,T){return f(r(T),S,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(E=>(S,T,P)=>{for(var x=E(S,T),H=0;H<P.length;H++)x=E(x,P[H]);return x})})}),y0="conj",LA=["typed"],UA=Ut(y0,LA,t=>{var{typed:e}=t;return e(y0,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":e.referToSelf(r=>n=>Bf(n,r))})}),w0="concat",VA=["typed","matrix","isInteger"],jA=Ut(w0,VA,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(w0,{"...Array | Matrix | number | BigNumber":function(u){var o,s=u.length,f=-1,p,c=!1,d=[];for(o=0;o<s;o++){var h=u[o];if(Yr(h)&&(c=!0),tr(h)||Fn(h)){if(o!==s-1)throw new Error("Dimension must be specified as last argument");if(p=f,f=h.valueOf(),!n(f))throw new TypeError("Integer number expected for dimension");if(f<0||o>0&&f>p)throw new Xi(f,p+1)}else{var g=Er(h).valueOf(),b=Oi(g);if(d[o]=g,p=f,f=b.length-1,o>0&&f!==p)throw new Rt(p+1,f+1)}}if(d.length===0)throw new SyntaxError("At least one matrix expected");for(var v=d.shift();d.length;)v=Gp(v,d.shift(),f,0);return c?r(v):v},"...string":function(u){return u.join("")}})});function Gp(t,e,r,n){if(n<r){if(t.length!==e.length)throw new Rt(t.length,e.length);for(var i=[],u=0;u<t.length;u++)i[u]=Gp(t[u],e[u],r,n+1);return i}else return t.concat(e)}function qA(){throw new Error('No "matrix" implementation available')}var A0="size",zA=["typed","config","?matrix"],WA=Ut(A0,zA,t=>{var{typed:e,config:r,matrix:n}=t;return e(A0,{Matrix:function(u){return u.create(u.size())},Array:Oi,string:function(u){return r.matrix==="Array"?[u.length]:n([u.length])},"number | Complex | BigNumber | Unit | boolean | null":function(u){return r.matrix==="Array"?[]:n?n([]):qA()}})}),E0="add",HA=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],GA=Ut(E0,HA,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:u,SparseMatrix:o,concat:s}=t,f=mA({typed:e}),p=bA({typed:e,equalScalar:i}),c=AA({typed:e,DenseMatrix:u}),d=TA({typed:e,matrix:r,concat:s});return e(E0,{"any, any":n,"any, any, ...any":e.referToSelf(h=>(g,b,v)=>{for(var _=h(g,b),D=0;D<v.length;D++)_=h(_,v[D]);return _})},d({elop:n,DS:f,SS:p,Ss:c}))}),C0="dot",KA=["typed","addScalar","multiplyScalar","conj","size"],$A=Ut(C0,KA,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:u}=t;return e(C0,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":f});function o(c,d){var h=p(c),g=p(d),b,v;if(h.length===1)b=h[0];else if(h.length===2&&h[1]===1)b=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(g.length===1)v=g[0];else if(g.length===2&&g[1]===1)v=g[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+g.join(", ")+")");if(b!==v)throw new RangeError("Vectors must have equal length ("+b+" != "+v+")");if(b===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return b}function s(c,d){var h=o(c,d),g=Yr(c)?c._data:c,b=Yr(c)?c._datatype:void 0,v=Yr(d)?d._data:d,_=Yr(d)?d._datatype:void 0,D=p(c).length===2,C=p(d).length===2,A=r,F=n;if(b&&_&&b===_&&typeof b=="string"){var E=b;A=e.find(r,[E,E]),F=e.find(n,[E,E])}if(!D&&!C){for(var S=F(i(g[0]),v[0]),T=1;T<h;T++)S=A(S,F(i(g[T]),v[T]));return S}if(!D&&C){for(var P=F(i(g[0]),v[0][0]),x=1;x<h;x++)P=A(P,F(i(g[x]),v[x][0]));return P}if(D&&!C){for(var H=F(i(g[0][0]),v[0]),re=1;re<h;re++)H=A(H,F(i(g[re][0]),v[re]));return H}if(D&&C){for(var V=F(i(g[0][0]),v[0][0]),Y=1;Y<h;Y++)V=A(V,F(i(g[Y][0]),v[Y][0]));return V}}function f(c,d){o(c,d);for(var h=c._index,g=c._values,b=d._index,v=d._values,_=0,D=r,C=n,A=0,F=0;A<h.length&&F<b.length;){var E=h[A],S=b[F];if(E<S){A++;continue}if(E>S){F++;continue}E===S&&(_=D(_,C(g[A],v[F])),A++,F++)}return _}function p(c){return Yr(c)?c.size():u(c)}}),YA=N2({config:Ws}),ZA=U2({}),XA=z2({}),Of=G2({}),Mf=Y2({Matrix:Of}),Sn=Lw({BigNumber:YA,Complex:ZA,DenseMatrix:Mf,Fraction:XA}),Pf=lA({typed:Sn}),JA=UA({typed:Sn}),Tf=rA({config:Ws,typed:Sn}),QA=X2({typed:Sn}),Kp=NA({typed:Sn}),$p=uA({Matrix:Of,equalScalar:Tf,typed:Sn}),Zs=sA({DenseMatrix:Mf,Matrix:Of,SparseMatrix:$p,typed:Sn}),eE=WA({matrix:Zs,config:Ws,typed:Sn}),tE=jA({isInteger:QA,matrix:Zs,typed:Sn}),$r=GA({DenseMatrix:Mf,SparseMatrix:$p,addScalar:Pf,concat:tE,equalScalar:Tf,matrix:Zs,typed:Sn}),rE=$A({addScalar:Pf,conj:JA,multiplyScalar:Kp,size:eE,typed:Sn}),Cn=RA({addScalar:Pf,dot:rE,equalScalar:Tf,matrix:Zs,multiplyScalar:Kp,typed:Sn}),vt=(t=>(t.Circle="circle",t.Ring="ring",t.Bars="bars",t.Embed="embed",t.Pie="pie",t))(vt||{});function nE(t){let e,r,n,i;return{c(){e=dt("svg"),r=dt("rect"),n=dt("rect"),i=dt("rect"),this.h()},l(u){e=pt(u,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var o=G(e);r=pt(o,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),G(r).forEach(I),n=pt(o,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),G(n).forEach(I),i=pt(o,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),G(i).forEach(I),o.forEach(I),this.h()},h(){B(r,"x","5"),B(r,"y","12"),B(r,"width","40"),B(r,"height","4"),B(r,"fill","rgba(255,255,255, 0.7)"),B(n,"x","5"),B(n,"y","23"),B(n,"width","30"),B(n,"height","4"),B(n,"fill","rgba(255,255,255, 0.7)"),B(i,"x","5"),B(i,"y","34"),B(i,"width","35"),B(i,"height","4"),B(i,"fill","rgba(255,255,255, 0.7)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-6 w-6"),B(e,"viewBox","0 0 50 50")},m(u,o){me(u,e,o),R(e,r),R(e,n),R(e,i)},p:Te,i:Te,o:Te,d(u){u&&I(e)}}}class iE extends Dt{constructor(e){super(),bt(this,e,null,nE,yt,{})}}function uE(t){let e,r;return{c(){e=dt("svg"),r=dt("circle"),this.h()},l(n){e=pt(n,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var i=G(e);r=pt(i,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),G(r).forEach(I),i.forEach(I),this.h()},h(){B(r,"cx","25"),B(r,"cy","25"),B(r,"r","20"),B(r,"fill","rgba(255,255,255, 0.7)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-6 w-6"),B(e,"viewBox","0 0 50 50")},m(n,i){me(n,e,i),R(e,r)},p:Te,i:Te,o:Te,d(n){n&&I(e)}}}class aE extends Dt{constructor(e){super(),bt(this,e,null,uE,yt,{})}}function sE(t){let e,r,n,i,u,o;return{c(){e=dt("svg"),r=dt("circle"),n=dt("circle"),i=dt("circle"),u=dt("circle"),o=dt("circle"),this.h()},l(s){e=pt(s,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var f=G(e);r=pt(f,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),G(r).forEach(I),n=pt(f,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),G(n).forEach(I),i=pt(f,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),G(i).forEach(I),u=pt(f,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),G(u).forEach(I),o=pt(f,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),G(o).forEach(I),f.forEach(I),this.h()},h(){B(r,"cx","20"),B(r,"cy","80"),B(r,"r","5"),B(r,"fill","rgba(255,255,255, 0.7)"),B(n,"cx","40"),B(n,"cy","40"),B(n,"r","5"),B(n,"fill","rgba(255,255,255, 0.7)"),B(i,"cx","70"),B(i,"cy","20"),B(i,"r","5"),B(i,"fill","rgba(255,255,255, 0.7)"),B(u,"cx","80"),B(u,"cy","60"),B(u,"r","5"),B(u,"fill","rgba(255,255,255, 0.7)"),B(o,"cx","60"),B(o,"cy","75"),B(o,"r","5"),B(o,"fill","rgba(255,255,255, 0.7)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-6 w-6"),B(e,"viewBox","0 0 100 100")},m(s,f){me(s,e,f),R(e,r),R(e,n),R(e,i),R(e,u),R(e,o)},p:Te,i:Te,o:Te,d(s){s&&I(e)}}}class oE extends Dt{constructor(e){super(),bt(this,e,null,sE,yt,{})}}const Dl="selectedPromptStore";function lE(){const t=zr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Dl]||""),{subscribe:e,update:u=>{!u||!i||(localStorage[Dl]=u,r(u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[Dl],r(""))}}}const Yi=lE(),Yp=qr(Yi,t=>Ct(Yi));function fE(){const t=zr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((u,o)=>{if(o.startsWith("prompt")){const s=o.split("_")[1];u[s]=JSON.parse(localStorage[o])}return u},{})||{}),{subscribe:e,update:(u,o)=>{const s=Ct(t),p={...s[u]||{},...o};i&&(localStorage[`prompt_${u}`]=JSON.stringify(p));const c={...s,[u]:p};r(c)},get:u=>Ct(t)[u],delete:u=>{i&&delete localStorage[`prompt_${u}`];const o={...Ct(t)};delete o[u],r(o)}}}const oa=fE(),cE=qr(oa,t=>Object.entries(Ct(oa))),ns="activePromptStore";function kr(t,e,r,n=1){return{id:t,text:e,barWeight:n,parsedWeight:r}}function F0(){return{0:kr(0,"Magic potion in a mystical bottle",1),1:kr(1,"A crystalline decanter",1),2:kr(2,"An ornate tequila bottle",1),3:kr(3,"An antique sake bottle",1),4:kr(4,"A colorful perfume bottle",1),5:kr(5,"A glass vase full of vibrant flowers",1),6:kr(6,"A minimalist glass tea kettle",1),7:kr(7,"Chihuly glass art",1),8:kr(8,"A fine wine bottle",1),9:kr(9,"A gourmet vinegar bottle",1),10:kr(10,"A stunning fishbowl",1),11:kr(11,"A striking piece of tourmaline",1),12:kr(12,"A finely cut piece of sapphire",1),13:kr(13,"Iittala glass art",1)}}function Fi(t,e=vt.Pie){return{weightedPrompts:t||{},weightMode:e,pieAngles:{},ringAngles:{},ringStartAngle:0,ringReverse:!1,ringWeightScaling:2,ringExponentialScaling:!0,circleAngles:{},circleMarker:[270,.33],circleWeightScaling:2,circleExponentialScaling:!0,embeddings:{},embedWeightScaling:2,embedExponentialScaling:!0,embedClusters:0,embedPromptLimit:Object.keys(t).length}}function hE(){const t=zr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",u=i&&localStorage[ns]?JSON.parse(localStorage[ns]):Fi(F0());return r({...Fi({}),...u}),{subscribe:e,update:o=>{const s=Yi.get();s&&oa.update(s,o),!(!o||!i)&&(localStorage[ns]=JSON.stringify(o),r({...Fi({}),...o}))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[ns],r(Fi(F0())))}}}const Mt=hE(),Sr=qr(Mt,t=>Ct(Mt));function dE(t){let e,r,n,i,u,o,s,f,p,c,d,h;return n=new iE({}),o=new aE({}),p=new oE({}),{c(){e=Z("div"),r=Z("button"),Ke(n.$$.fragment),i=Ie(),u=Z("button"),Ke(o.$$.fragment),s=Ie(),f=Z("button"),Ke(p.$$.fragment),this.h()},l(g){e=X(g,"DIV",{class:!0});var b=G(e);r=X(b,"BUTTON",{class:!0});var v=G(r);$e(n.$$.fragment,v),v.forEach(I),i=Ne(b),u=X(b,"BUTTON",{class:!0});var _=G(u);$e(o.$$.fragment,_),_.forEach(I),s=Ne(b),f=X(b,"BUTTON",{class:!0});var D=G(f);$e(p.$$.fragment,D),D.forEach(I),b.forEach(I),this.h()},h(){B(r,"class","btn btn-sm"),Pt(r,"btn-active",t[0].weightMode===vt.Bars),B(u,"class","btn btn-sm"),Pt(u,"btn-active",t[0].weightMode===vt.Circle||t[0].weightMode===vt.Pie||t[0].weightMode===vt.Ring),B(f,"class","btn btn-sm"),Pt(f,"btn-active",t[0].weightMode===vt.Embed),B(e,"class","btn-group btn-group-horizontal w-full flex justify-end p-2")},m(g,b){me(g,e,b),R(e,r),Ye(n,r,null),R(e,i),R(e,u),Ye(o,u,null),R(e,s),R(e,f),Ye(p,f,null),c=!0,d||(h=[Se(r,"click",t[2]),Se(u,"click",t[3]),Se(f,"click",t[4])],d=!0)},p(g,[b]){(!c||b&1)&&Pt(r,"btn-active",g[0].weightMode===vt.Bars),(!c||b&1)&&Pt(u,"btn-active",g[0].weightMode===vt.Circle||g[0].weightMode===vt.Pie||g[0].weightMode===vt.Ring),(!c||b&1)&&Pt(f,"btn-active",g[0].weightMode===vt.Embed)},i(g){c||(ye(n.$$.fragment,g),ye(o.$$.fragment,g),ye(p.$$.fragment,g),c=!0)},o(g){Ee(n.$$.fragment,g),Ee(o.$$.fragment,g),Ee(p.$$.fragment,g),c=!1},d(g){g&&I(e),Ze(n),Ze(o),Ze(p),d=!1,ar(h)}}}function pE(t,e,r){let n;ut(t,Sr,f=>r(0,n=f));function i(f){const p={...n,weightMode:f};Mt.update(p)}return[n,i,()=>i(vt.Bars),()=>i(vt.Pie),()=>i(vt.Embed)]}class gE extends Dt{constructor(e){super(),bt(this,e,pE,dE,yt,{})}}function vE(t){let e,r,n,i;return{c(){e=dt("svg"),r=dt("path"),n=dt("path"),i=dt("path"),this.h()},l(u){e=pt(u,"svg",{xmlns:!0,class:!0,viewBox:!0});var o=G(e);r=pt(o,"path",{d:!0,fill:!0}),G(r).forEach(I),n=pt(o,"path",{d:!0,fill:!0}),G(n).forEach(I),i=pt(o,"path",{d:!0,fill:!0}),G(i).forEach(I),o.forEach(I),this.h()},h(){B(r,"d","M50 50 L50 10 A40 40 0 0 1 90 50 z"),B(r,"fill","rgba(255,255,255, 0.7)"),B(n,"d","M50 50 L90 50 A40 40 0 0 1 50 90 z"),B(n,"fill","rgba(255,255,255, 0.3)"),B(i,"d","M50 50 L50 90 A40 40 0 0 1 10 50 z"),B(i,"fill","rgba(255,255,255, 0.9)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"class","h-5 w-5"),B(e,"viewBox","0 0 100 100")},m(u,o){me(u,e,o),R(e,r),R(e,n),R(e,i)},p:Te,i:Te,o:Te,d(u){u&&I(e)}}}class mE extends Dt{constructor(e){super(),bt(this,e,null,vE,yt,{})}}function _E(t){let e,r,n;return{c(){e=dt("svg"),r=dt("circle"),n=dt("circle"),this.h()},l(i){e=pt(i,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var u=G(e);r=pt(u,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),G(r).forEach(I),n=pt(u,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),G(n).forEach(I),u.forEach(I),this.h()},h(){B(r,"cx","25"),B(r,"cy","25"),B(r,"r","20"),B(r,"stroke","rgba(255,255,255, 0.7)"),B(r,"stroke-width","4"),B(r,"fill","none"),B(n,"cx","25"),B(n,"cy","25"),B(n,"r","4"),B(n,"stroke","rgba(255,255,255, 0.7)"),B(n,"stroke-width","1"),B(n,"fill","rgba(255,255,255, 0.7)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-5 w-5"),B(e,"viewBox","0 0 50 50")},m(i,u){me(i,e,u),R(e,r),R(e,n)},p:Te,i:Te,o:Te,d(i){i&&I(e)}}}class DE extends Dt{constructor(e){super(),bt(this,e,null,_E,yt,{})}}function bE(t){let e,r,n,i,u;return{c(){e=dt("svg"),r=dt("mask"),n=dt("circle"),i=dt("path"),u=dt("circle"),this.h()},l(o){e=pt(o,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var s=G(e);r=pt(s,"mask",{id:!0});var f=G(r);n=pt(f,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),G(n).forEach(I),i=pt(f,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),G(i).forEach(I),f.forEach(I),u=pt(s,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,mask:!0}),G(u).forEach(I),s.forEach(I),this.h()},h(){B(n,"cx","25"),B(n,"cy","25"),B(n,"r","20"),B(n,"stroke","white"),B(n,"stroke-width","6"),B(n,"fill","none"),B(i,"d","M40,22 L45,27 L50,22"),B(i,"stroke","black"),B(i,"stroke-width","4"),B(i,"fill","none"),B(r,"id","hole"),B(u,"cx","25"),B(u,"cy","25"),B(u,"r","20"),B(u,"stroke","rgba(255,255,255, 0.7)"),B(u,"stroke-width","4"),B(u,"fill","none"),B(u,"mask","url(#hole)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-5 w-5"),B(e,"viewBox","0 0 50 50")},m(o,s){me(o,e,s),R(e,r),R(r,n),R(r,i),R(e,u)},p:Te,i:Te,o:Te,d(o){o&&I(e)}}}class yE extends Dt{constructor(e){super(),bt(this,e,null,bE,yt,{})}}function wE(t){let e,r,n,i,u,o,s,f,p,c,d,h;return n=new mE({}),o=new DE({}),p=new yE({}),{c(){e=Z("div"),r=Z("button"),Ke(n.$$.fragment),i=Ie(),u=Z("button"),Ke(o.$$.fragment),s=Ie(),f=Z("button"),Ke(p.$$.fragment),this.h()},l(g){e=X(g,"DIV",{class:!0});var b=G(e);r=X(b,"BUTTON",{class:!0});var v=G(r);$e(n.$$.fragment,v),v.forEach(I),i=Ne(b),u=X(b,"BUTTON",{class:!0});var _=G(u);$e(o.$$.fragment,_),_.forEach(I),s=Ne(b),f=X(b,"BUTTON",{class:!0});var D=G(f);$e(p.$$.fragment,D),D.forEach(I),b.forEach(I),this.h()},h(){B(r,"class","btn btn-xs"),Pt(r,"btn-active",t[0].weightMode===vt.Pie),B(u,"class","btn btn-xs"),Pt(u,"btn-active",t[0].weightMode===vt.Circle),B(f,"class","btn btn-xs"),Pt(f,"btn-active",t[0].weightMode===vt.Ring),B(e,"class","btn-group btn-group-horizontal w-full flex justify-center p-1")},m(g,b){me(g,e,b),R(e,r),Ye(n,r,null),R(e,i),R(e,u),Ye(o,u,null),R(e,s),R(e,f),Ye(p,f,null),c=!0,d||(h=[Se(r,"click",t[2]),Se(u,"click",t[3]),Se(f,"click",t[4])],d=!0)},p(g,[b]){(!c||b&1)&&Pt(r,"btn-active",g[0].weightMode===vt.Pie),(!c||b&1)&&Pt(u,"btn-active",g[0].weightMode===vt.Circle),(!c||b&1)&&Pt(f,"btn-active",g[0].weightMode===vt.Ring)},i(g){c||(ye(n.$$.fragment,g),ye(o.$$.fragment,g),ye(p.$$.fragment,g),c=!0)},o(g){Ee(n.$$.fragment,g),Ee(o.$$.fragment,g),Ee(p.$$.fragment,g),c=!1},d(g){g&&I(e),Ze(n),Ze(o),Ze(p),d=!1,ar(h)}}}function AE(t,e,r){let n;ut(t,Sr,f=>r(0,n=f));function i(f){const p={...n,weightMode:f};Mt.update(p)}return[n,i,()=>i(vt.Pie),()=>i(vt.Circle),()=>i(vt.Ring)]}class EE extends Dt{constructor(e){super(),bt(this,e,AE,wE,yt,{})}}function CE(t){let e,r,n;return{c(){e=dt("circle"),this.h()},l(i){e=pt(i,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),G(e).forEach(I),this.h()},h(){B(e,"cx",r=t[0][0]),B(e,"cy",n=t[0][1]),B(e,"r",t[1]),B(e,"stroke",t[3]),B(e,"stroke-width",t[2]),Yt(e,"fill","rgba(0,0,0,0)")},m(i,u){me(i,e,u)},p(i,[u]){u&1&&r!==(r=i[0][0])&&B(e,"cx",r),u&1&&n!==(n=i[0][1])&&B(e,"cy",n),u&2&&B(e,"r",i[1]),u&8&&B(e,"stroke",i[3]),u&4&&B(e,"stroke-width",i[2])},i:Te,o:Te,d(i){i&&I(e)}}}function FE(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:u=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,u=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,u,o]}class kf extends Dt{constructor(e){super(),bt(this,e,FE,CE,yt,{xy:0,radius:1,stroke:2,color:3})}}function SE(t){let e,r,n,i,u;return{c(){e=dt("circle"),this.h()},l(o){e=pt(o,"circle",{cx:!0,cy:!0,r:!0}),G(e).forEach(I),this.h()},h(){B(e,"cx",r=t[0][0]),B(e,"cy",n=t[0][1]),B(e,"r",t[1]),Yt(e,"fill",t[2])},m(o,s){me(o,e,s),i||(u=[Se(e,"mouseover",t[3]),Se(e,"mouseout",t[4]),Se(e,"mousedown",t[5])],i=!0)},p(o,[s]){s&1&&r!==(r=o[0][0])&&B(e,"cx",r),s&1&&n!==(n=o[0][1])&&B(e,"cy",n),s&2&&B(e,"r",o[1]),s&4&&Yt(e,"fill",o[2])},i:Te,o:Te,d(o){o&&I(e),i=!1,ar(u)}}}function BE(t,e,r){let{xy:n=[100,100]}=e,{radius:i=5}=e,{color:u="black"}=e,{hoverColor:o="white"}=e,{handleMouseDown:s=h=>{}}=e,f=u;function p(){r(2,f=o)}function c(){r(2,f=u)}function d(h){s(h)}return t.$$set=h=>{"xy"in h&&r(0,n=h.xy),"radius"in h&&r(1,i=h.radius),"color"in h&&r(6,u=h.color),"hoverColor"in h&&r(7,o=h.hoverColor),"handleMouseDown"in h&&r(8,s=h.handleMouseDown)},[n,i,f,p,c,d,u,o,s]}class Cu extends Dt{constructor(e){super(),bt(this,e,BE,SE,yt,{xy:0,radius:1,color:6,hoverColor:7,handleMouseDown:8})}}function OE(t){let e,r,n,i,u;return{c(){e=dt("line"),this.h()},l(o){e=pt(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-dasharray":!0,"stroke-width":!0}),G(e).forEach(I),this.h()},h(){B(e,"x1",r=t[0][0]),B(e,"y1",n=t[0][1]),B(e,"x2",i=t[1][0]),B(e,"y2",u=t[1][1]),B(e,"stroke",t[3]),B(e,"stroke-dasharray","10,10"),B(e,"stroke-width",t[2])},m(o,s){me(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&B(e,"x1",r),s&1&&n!==(n=o[0][1])&&B(e,"y1",n),s&2&&i!==(i=o[1][0])&&B(e,"x2",i),s&2&&u!==(u=o[1][1])&&B(e,"y2",u),s&8&&B(e,"stroke",o[3]),s&4&&B(e,"stroke-width",o[2])},i:Te,o:Te,d(o){o&&I(e)}}}function ME(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:u=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,u=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,u,o]}class Zp extends Dt{constructor(e){super(),bt(this,e,ME,OE,yt,{p1:0,p2:1,stroke:2,color:3})}}function PE(t){let e,r,n,i,u,o,s,f;return{c(){e=dt("foreignObject"),r=Z("div"),n=Z("p"),i=Re(t[2]),this.h()},l(p){e=pt(p,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var c=G(e);r=X(c,"DIV",{class:!0});var d=G(r);n=X(d,"P",{});var h=G(n);i=Le(h,t[2]),h.forEach(I),d.forEach(I),c.forEach(I),this.h()},h(){Yt(n,"color",t[3]),Yt(n,"user-select","none"),Yt(n,"margin","0"),Yt(n,"pointer-events","none"),Yt(n,"text-align",t[4]),Yt(n,"font-size",`${t[5]}px`),Yt(n,"font-family","sans-serif"),Yt(n,"font-style","italic"),B(r,"class","h-full flex flex-col justify-center"),B(e,"x",u=t[0][0]),B(e,"y",o=t[0][1]),B(e,"width",s=t[1][0]),B(e,"height",f=t[1][1])},m(p,c){me(p,e,c),R(e,r),R(r,n),R(n,i)},p(p,[c]){c&4&&Zr(i,p[2]),c&8&&Yt(n,"color",p[3]),c&16&&Yt(n,"text-align",p[4]),c&32&&Yt(n,"font-size",`${p[5]}px`),c&1&&u!==(u=p[0][0])&&B(e,"x",u),c&1&&o!==(o=p[0][1])&&B(e,"y",o),c&2&&s!==(s=p[1][0])&&B(e,"width",s),c&2&&f!==(f=p[1][1])&&B(e,"height",f)},i:Te,o:Te,d(p){p&&I(e)}}}function TE(t,e,r){let{xy:n=[100,100]}=e,{wh:i=[100,100]}=e,{text:u=""}=e,{color:o="rgba(96,117,151, 1)"}=e,{textAlign:s="center"}=e,{fontSize:f=12}=e;return t.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,i=p.wh),"text"in p&&r(2,u=p.text),"color"in p&&r(3,o=p.color),"textAlign"in p&&r(4,s=p.textAlign),"fontSize"in p&&r(5,f=p.fontSize)},[n,i,u,o,s,f]}class da extends Dt{constructor(e){super(),bt(this,e,TE,PE,yt,{xy:0,wh:1,text:2,color:3,textAlign:4,fontSize:5})}}function kE(t){let e,r,n,i,u,o,s,f,p,c,d;return{c(){e=dt("circle"),i=Ie(),u=dt("foreignObject"),o=Z("p"),s=Re(t[4]),this.h()},l(h){e=pt(h,"circle",{cx:!0,cy:!0,r:!0}),G(e).forEach(I),i=Ne(h),u=pt(h,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var g=G(u);o=X(g,"P",{style:!0,class:!0});var b=G(o);s=Le(b,t[4]),b.forEach(I),g.forEach(I),this.h()},h(){B(e,"cx",r=t[0][0]),B(e,"cy",n=t[0][1]),B(e,"r",t[1]),Yt(e,"fill",t[3]),Yt(o,"color",t[2]),Yt(o,"user-select","none"),Yt(o,"margin","0"),B(o,"class","heavy svelte-6if1p2"),B(u,"x",f=t[0][0]-t[1]),B(u,"y",p=t[0][1]-t[1]),B(u,"width",c=t[1]*2),B(u,"height",d=t[1]*2)},m(h,g){me(h,e,g),me(h,i,g),me(h,u,g),R(u,o),R(o,s)},p(h,[g]){g&1&&r!==(r=h[0][0])&&B(e,"cx",r),g&1&&n!==(n=h[0][1])&&B(e,"cy",n),g&2&&B(e,"r",h[1]),g&8&&Yt(e,"fill",h[3]),g&16&&Zr(s,h[4]),g&4&&Yt(o,"color",h[2]),g&3&&f!==(f=h[0][0]-h[1])&&B(u,"x",f),g&3&&p!==(p=h[0][1]-h[1])&&B(u,"y",p),g&2&&c!==(c=h[1]*2)&&B(u,"width",c),g&2&&d!==(d=h[1]*2)&&B(u,"height",d)},i:Te,o:Te,d(h){h&&I(e),h&&I(i),h&&I(u)}}}function IE(t,e,r){let{xy:n=[100,100]}=e,{radius:i=25}=e,{textColor:u="rgba(96,117,151, 1)"}=e,{bgColor:o="black"}=e,{weight:s=""}=e;return t.$$set=f=>{"xy"in f&&r(0,n=f.xy),"radius"in f&&r(1,i=f.radius),"textColor"in f&&r(2,u=f.textColor),"bgColor"in f&&r(3,o=f.bgColor),"weight"in f&&r(4,s=f.weight)},[n,i,u,o,s]}class NE extends Dt{constructor(e){super(),bt(this,e,IE,kE,yt,{xy:0,radius:1,textColor:2,bgColor:3,weight:4})}}function xn(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],u=360+Math.atan2(i,n)*180/Math.PI,o=Math.sqrt(n*n+i*i);return[u%360,o/r]}function Nr(t,e,r){const n=e[0]%360*Math.PI/180,i=[r*e[1]*Math.cos(n),r*e[1]*Math.sin(n)];return $r(t,i)}function la(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],u=Math.sqrt(n*n+i*i),o=r/u,s=e[0]+n*o,f=e[1]+i*o;return[s,f]}function xE(t,e,r){const n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)<r}function If(t,e){const r=e%360*Math.PI/180;let n,i;const u=Math.cos(r),o=Math.sin(r);return n=(t[0]+5)*-1.2*u,i=(t[1]+5)*-1.2*o,n-=t[0],i-=t[1],[n,i]}function Vr(t){return t<0?360+-1*(Math.abs(t)%360):t>360?t%360:t}function RE(t){return Math.round(t*100)}function Fr(t){return Math.round(Math.max(1-Math.pow(1-t,2),.25)*100)/100}function Xs(t){let e="parsedWeight";switch(t){case vt.Circle:e="circleWeight";break;case vt.Bars:e="barWeight";break;case vt.Embed:e="embedWeight";break;case vt.Pie:e="pieWeight";break;case vt.Ring:e="ringWeight";break}return e}function LE(t){const e=t.weightMode,r=Xs(e);return t.weightedPrompts?Math.max(...Object.values(t.weightedPrompts).map(n=>n[r])):0}function UE(t){const e=t.weightMode,r=Xs(e);return t.weightedPrompts?Object.values(t.weightedPrompts).reduce((n,i)=>n+i[r],0):0}function S0(t,e){const r=t.weightMode,n=Xs(r);return t.weightedPrompts[e]?t.weightedPrompts[e][n]/LE(t):0}function Si(t,e){const r=t.weightMode,n=Xs(r);if(!t.weightedPrompts[e])return 0;const i=t.weightedPrompts[e][n];return RE((i||0)/UE(t))}function VE(t,e,r){const u=r*.6,o=Math.floor(t/u);return Math.ceil(e/o)*r*1.2}function Rr(t,e,r){const n=VE(t,e,r)+10;return[t,n]}function fs(t,e){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function pa(t){return Cn(t,.5)}function fi(t){const e=t.currentTarget;if(!e)throw new Error("No SVG element found");var r=e.createSVGPoint();r.x=t.clientX,r.y=t.clientY;const n=e.getScreenCTM();if(!n)throw new Error("No DOM Matrix found");const i=r.matrixTransform(n.inverse());return[i.x,i.y]}function B0(t,e,r){const n=t.slice();return n[18]=e[r][0],n[19]=e[r][1],n}function O0(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,u;e=new kf({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),s=[];for(let c=0;c<o.length;c+=1)s[c]=M0(B0(t,o,c));const f=c=>Ee(s[c],1,1,()=>{s[c]=null});let p=n&&P0(t);return{c(){Ke(e.$$.fragment);for(let c=0;c<s.length;c+=1)s[c].c();r=Tt(),p&&p.c(),i=Tt()},l(c){$e(e.$$.fragment,c);for(let d=0;d<s.length;d+=1)s[d].l(c);r=Tt(),p&&p.l(c),i=Tt()},m(c,d){Ye(e,c,d);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(c,d);me(c,r,d),p&&p.m(c,d),me(c,i,d),u=!0},p(c,d){const h={};if(d&1&&(h.xy=c[0]),d&2&&(h.radius=c[1]),e.$set(h),d&895){o=Object.entries(c[5].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=B0(c,o,g);s[g]?(s[g].p(b,d),ye(s[g],1)):(s[g]=M0(b),s[g].c(),ye(s[g],1),s[g].m(r.parentNode,r))}for(_r(),g=o.length;g<s.length;g+=1)f(g);Dr()}d&32&&(n=Object.entries(c[5].weightedPrompts).length>0),n?p?(p.p(c,d),d&32&&ye(p,1)):(p=P0(c),p.c(),ye(p,1),p.m(i.parentNode,i)):p&&(_r(),Ee(p,1,1,()=>{p=null}),Dr())},i(c){if(!u){ye(e.$$.fragment,c);for(let d=0;d<o.length;d+=1)ye(s[d]);ye(p),u=!0}},o(c){Ee(e.$$.fragment,c),s=s.filter(Boolean);for(let d=0;d<s.length;d+=1)Ee(s[d]);Ee(p),u=!1},d(c){Ze(e,c),zs(s,c),c&&I(r),p&&p.d(c),c&&I(i)}}}function M0(t){let e,r,n,i,u;e=new Zp({props:{p1:Nr(t[0],t[5].circleMarker,t[1]),p2:t[6][t[18]].xy}});function o(){return t[12](t[18])}return r=new Cu({props:{xy:t[6][t[18]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:o}}),n=new da({props:{xy:t[9](t[6][t[18]].xy,Rr(t[3],t[19].text.length,t[4])),color:`rgba(255,255,255,${Fr(t[6][t[18]].unitWeight)}`,wh:Rr(t[3],t[19].text.length,t[4]),fontSize:t[4],text:t[19].text}}),i=new NE({props:{xy:Cn($r(Nr(t[0],t[5].circleMarker,t[1]),t[6][t[18]].xy),.5),weight:Si(t[5],t[18]),radius:15,textColor:`rgba(255,255,255,${Fr(t[6][t[18]].unitWeight)}`,bgColor:"rgb(8, 11, 22)"}}),{c(){Ke(e.$$.fragment),Ke(r.$$.fragment),Ke(n.$$.fragment),Ke(i.$$.fragment)},l(s){$e(e.$$.fragment,s),$e(r.$$.fragment,s),$e(n.$$.fragment,s),$e(i.$$.fragment,s)},m(s,f){Ye(e,s,f),Ye(r,s,f),Ye(n,s,f),Ye(i,s,f),u=!0},p(s,f){t=s;const p={};f&35&&(p.p1=Nr(t[0],t[5].circleMarker,t[1])),f&96&&(p.p2=t[6][t[18]].xy),e.$set(p);const c={};f&96&&(c.xy=t[6][t[18]].xy),f&4&&(c.radius=t[2]),f&32&&(c.handleMouseDown=o),r.$set(c);const d={};f&120&&(d.xy=t[9](t[6][t[18]].xy,Rr(t[3],t[19].text.length,t[4]))),f&96&&(d.color=`rgba(255,255,255,${Fr(t[6][t[18]].unitWeight)}`),f&56&&(d.wh=Rr(t[3],t[19].text.length,t[4])),f&16&&(d.fontSize=t[4]),f&32&&(d.text=t[19].text),n.$set(d);const h={};f&99&&(h.xy=Cn($r(Nr(t[0],t[5].circleMarker,t[1]),t[6][t[18]].xy),.5)),f&32&&(h.weight=Si(t[5],t[18])),f&96&&(h.textColor=`rgba(255,255,255,${Fr(t[6][t[18]].unitWeight)}`),i.$set(h)},i(s){u||(ye(e.$$.fragment,s),ye(r.$$.fragment,s),ye(n.$$.fragment,s),ye(i.$$.fragment,s),u=!0)},o(s){Ee(e.$$.fragment,s),Ee(r.$$.fragment,s),Ee(n.$$.fragment,s),Ee(i.$$.fragment,s),u=!1},d(s){Ze(e,s),Ze(r,s),Ze(n,s),Ze(i,s)}}}function P0(t){let e,r;return e=new Cu({props:{xy:Nr(t[0],t[5].circleMarker,t[1]),radius:10,color:"rgba(136,157,191, 1)",handleMouseDown:t[13]}}),{c(){Ke(e.$$.fragment)},l(n){$e(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},p(n,i){const u={};i&35&&(u.xy=Nr(n[0],n[5].circleMarker,n[1])),e.$set(u)},i(n){r||(ye(e.$$.fragment,n),r=!0)},o(n){Ee(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function jE(t){let e,r,n,i,u=t[6]&&t[5].weightedPrompts&&O0(t);return{c(){e=dt("svg"),u&&u.c(),this.h()},l(o){e=pt(o,"svg",{id:!0,class:!0});var s=G(e);u&&u.l(s),s.forEach(I),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(o,s){me(o,e,s),u&&u.m(e,null),r=!0,n||(i=[Se(e,"mousemove",t[10]),Se(e,"mouseup",t[7]),Se(e,"dblclick",t[11])],n=!0)},p(o,[s]){o[6]&&o[5].weightedPrompts?u?(u.p(o,s),s&96&&ye(u,1)):(u=O0(o),u.c(),ye(u,1),u.m(e,null)):u&&(_r(),Ee(u,1,1,()=>{u=null}),Dr())},i(o){r||(ye(u),r=!0)},o(o){Ee(u),r=!1},d(o){o&&I(e),u&&u.d(),n=!1,ar(i)}}}function T0(t,e){return t?Object.entries(t).reduce((r,[n,i],u)=>{const o=r[n]||u*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function qE(t,e,r){let n,i;ut(t,Sr,E=>r(5,i=E));let{center:u=[450,450]}=e,{radius:o=250}=e,{pointRadius:s=10}=e,{textWidth:f=150}=e,{fontSize:p=13}=e,c=[0,0],d=null;function h(E){d=null}function g(E){d=E}function b(E,S){let T=xn(E,u,o)[0]-180;T<0&&(T+=360);const P=If(pa(S),T);return $r(E,P)}function v(E){const S=xE(E,u,o)?xn(E,u,o):xn(la(E,u,o),u,o);r(6,n=C(i.weightedPrompts,u,o,i.circleWeightScaling,i.circleExponentialScaling,S,i.circleAngles))}function _(E){if(c=fi(E),d==="main")v(c);else if(d){const S={...i.weightedPrompts[d]},T=la(c,u,o),P=xn(T,u,o)[0],x={...i.circleAngles};x[S.id]=P;const H={...i.weightedPrompts};H[d]=S,r(6,n=C(H,u,o,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,x))}}function D(E){c=fi(E),v(c)}function C(E,S,T,P,x,H,re){if(!E||!S||!T||!P||!H)return null;let V=Object.entries(E).reduce((K,[q,te])=>(K[q]={xy:Nr(S,[re[q],1],T)},K),{});V=Object.entries(V).reduce((K,[q,te])=>(K[q]={...K[q],distance:fs(te.xy,Nr(S,H,T))},K),V);const Y=Object.values(V).reduce((K,q)=>K+q.distance,0);V=Object.entries(V).reduce((K,[q,te])=>(K[q]={...K[q],unitDistance:Math.round(te.distance/Y*100)/100},K),V),V=Object.entries(V).reduce((K,[q,te])=>(K[q]={...K[q],invertedUnitDistance:Math.round((1-te.unitDistance)*100)/100},K),V),V=Object.entries(V).reduce((K,[q,te])=>(x?K[q]={...K[q],unitWeight:Math.round(Math.pow(1-te.distance/(2*T),P)*100)/100}:K[q]={...K[q],unitWeight:Math.round((1-te.distance/(2*T))*100)/100},K),V);const U={...E};return Object.entries(V).forEach(([K,q])=>{U[K].circleWeight=q.unitWeight}),Mt.update({...i,circleMarker:H,weightedPrompts:U,circleAngles:re}),V}const A=E=>g(E),F=()=>g("main");return t.$$set=E=>{"center"in E&&r(0,u=E.center),"radius"in E&&r(1,o=E.radius),"pointRadius"in E&&r(2,s=E.pointRadius),"textWidth"in E&&r(3,f=E.textWidth),"fontSize"in E&&r(4,p=E.fontSize)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(i.circleAngles).length!==Object.keys(i.weightedPrompts).length&&Mt.update({...i,circleAngles:T0(i.weightedPrompts,{})}),t.$$.dirty&35&&r(6,n=C(i.weightedPrompts,u,o,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,i.circleAngles||T0(i.weightedPrompts,{})))},[u,o,s,f,p,i,n,h,g,b,_,D,A,F]}class zE extends Dt{constructor(e){super(),bt(this,e,qE,jE,yt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function k0(t){let e,r,n,i,u,o,s,f;return{c(){e=Z("div"),r=Z("label"),n=Z("span"),i=Re("Scaling Power"),u=Ie(),o=Z("input"),this.h()},l(p){e=X(p,"DIV",{class:!0});var c=G(e);r=X(c,"LABEL",{class:!0});var d=G(r);n=X(d,"SPAN",{class:!0});var h=G(n);i=Le(h,"Scaling Power"),h.forEach(I),d.forEach(I),u=Ne(c),o=X(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(I),this.h()},h(){B(n,"class","label-text"),B(r,"class","label"),B(o,"type","range"),B(o,"min","0.5"),B(o,"max","3"),B(o,"step","0.1"),B(o,"class","range range-xs"),B(e,"class","w-full px-2")},m(p,c){me(p,e,c),R(e,r),R(r,n),R(n,i),R(e,u),R(e,o),rn(o,t[0]),s||(f=[Se(o,"change",t[6]),Se(o,"input",t[6])],s=!0)},p(p,c){c&1&&rn(o,p[0])},d(p){p&&I(e),s=!1,ar(f)}}}function WE(t){let e,r,n,i,u,o,s,f,p,c,d,h,g,b,v;r=new zE({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let _=t[1]&&k0(t);return{c(){e=Z("div"),Ke(r.$$.fragment),i=Ie(),u=Z("div"),o=Z("div"),s=Z("label"),f=Z("span"),p=Re("Exponential Scaling"),c=Ie(),d=Z("input"),h=Ie(),_&&_.c(),this.h()},l(D){e=X(D,"DIV",{class:!0});var C=G(e);$e(r.$$.fragment,C),C.forEach(I),i=Ne(D),u=X(D,"DIV",{class:!0});var A=G(u);o=X(A,"DIV",{class:!0});var F=G(o);s=X(F,"LABEL",{class:!0});var E=G(s);f=X(E,"SPAN",{class:!0});var S=G(f);p=Le(S,"Exponential Scaling"),S.forEach(I),E.forEach(I),c=Ne(F),d=X(F,"INPUT",{type:!0,class:!0}),F.forEach(I),h=Ne(A),_&&_.l(A),A.forEach(I),this.h()},h(){B(e,"class","w-full h-full"),Zi(()=>t[4].call(e)),B(f,"class","label-text"),B(s,"class","label"),B(d,"type","checkbox"),B(d,"class","toggle toggle-xs"),B(o,"class","w-52 px-2"),B(u,"class","px-2 py-4 pb-0 flex")},m(D,C){me(D,e,C),Ye(r,e,null),n=ha(e,t[4].bind(e)),me(D,i,C),me(D,u,C),R(u,o),R(o,s),R(s,f),R(f,p),R(o,c),R(o,d),d.checked=t[1],R(u,h),_&&_.m(u,null),g=!0,b||(v=Se(d,"change",t[5]),b=!0)},p(D,[C]){const A={};C&12&&(A.center=[Math.round(D[2]/2),Math.round(D[3]/2)]),C&12&&(A.radius=Math.round(Math.min(D[2],D[3])/2)-150),r.$set(A),C&2&&(d.checked=D[1]),D[1]?_?_.p(D,C):(_=k0(D),_.c(),_.m(u,null)):_&&(_.d(1),_=null)},i(D){g||(ye(r.$$.fragment,D),g=!0)},o(D){Ee(r.$$.fragment,D),g=!1},d(D){D&&I(e),Ze(r),n(),D&&I(i),D&&I(u),_&&_.d(),b=!1,v()}}}function HE(t,e,r){let n;ut(t,Sr,d=>r(7,n=d));let i,u,o=n.circleWeightScaling||2,s=Ef(n.circleExponentialScaling)?!0:n.circleExponentialScaling;function f(){i=this.clientWidth,u=this.clientHeight,r(2,i),r(3,u)}function p(){s=this.checked,r(1,s)}function c(){o=dp(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&Mt.update({...Mt.get(),circleExponentialScaling:s,circleWeightScaling:o})},[o,s,i,u,f,p,c]}class GE extends Dt{constructor(e){super(),bt(this,e,HE,WE,yt,{})}}function KE(t){let e,r,n,i,u,o,s;return{c(){e=dt("rect"),this.h()},l(f){e=pt(f,"rect",{x:!0,y:!0,width:!0,height:!0}),G(e).forEach(I),this.h()},h(){B(e,"x",r=t[0][0]),B(e,"y",n=t[0][1]),B(e,"width",i=Math.max(t[1][0],0)),B(e,"height",u=Math.max(t[1][1],0)),Yt(e,"fill",t[2])},m(f,p){me(f,e,p),o||(s=[Se(e,"mouseover",function(){$i(t[4])&&t[4].apply(this,arguments)}),Se(e,"mouseout",function(){$i(t[5])&&t[5].apply(this,arguments)}),Se(e,"mousedown",function(){$i(t[3])&&t[3].apply(this,arguments)})],o=!0)},p(f,[p]){t=f,p&1&&r!==(r=t[0][0])&&B(e,"x",r),p&1&&n!==(n=t[0][1])&&B(e,"y",n),p&2&&i!==(i=Math.max(t[1][0],0))&&B(e,"width",i),p&2&&u!==(u=Math.max(t[1][1],0))&&B(e,"height",u),p&4&&Yt(e,"fill",t[2])},i:Te,o:Te,d(f){f&&I(e),o=!1,ar(s)}}}function $E(t,e,r){let{xy:n=[500,500]}=e,{wh:i=[100,100]}=e,{color:u="rgba(46,67,101, 0.4)"}=e,{handleMouseDown:o=p=>{}}=e,{handleMouseOver:s=p=>{}}=e,{handleMouseOut:f=p=>{}}=e;return t.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,i=p.wh),"color"in p&&r(2,u=p.color),"handleMouseDown"in p&&r(3,o=p.handleMouseDown),"handleMouseOver"in p&&r(4,s=p.handleMouseOver),"handleMouseOut"in p&&r(5,f=p.handleMouseOut)},[n,i,u,o,s,f]}class bl extends Dt{constructor(e){super(),bt(this,e,$E,KE,yt,{xy:0,wh:1,color:2,handleMouseDown:3,handleMouseOver:4,handleMouseOut:5})}}function I0(t,e,r){const n=t.slice();return n[51]=e[r][0],n[52]=e[r][1],n[53]=e[r][2],n}function N0(t,e){let r,n,i,u,o,s;n=new da({props:{xy:[e[3][0]+e[0],e[3][1]+e[52]*e[4]+e[52]],color:`rgba(255,255,255,${Fr(e[53].barWeight/e[12]||0)})`,wh:e[5][e[51]],text:e[53].text,textAlign:"right",fontSize:e[1]}});function f(...h){return e[39](e[51],...h)}i=new bl({props:{color:e[13](0),handleMouseOver:f,handleMouseOut:e[40],xy:[e[10],e[3][1]+e[52]*e[4]+e[52]],wh:[e[11],e[4]-2]}});function p(...h){return e[41](e[51],...h)}u=new bl({props:{color:e[8]===e[51]||e[7]===e[51]||e[9]===e[51]?e[13](Fr((e[53].barWeight||0)/e[12]+.15)):e[13](Fr(e[53].barWeight||0)),handleMouseOver:p,handleMouseOut:e[42],xy:[e[10],e[3][1]+e[52]*e[4]+e[52]],wh:[(e[53].barWeight||0)*e[11],e[4]-2]}});function c(...h){return e[43](e[51],...h)}function d(...h){return e[45](e[51],...h)}return o=new bl({props:{color:e[9]===e[51]?e[15]:e[14],handleMouseOver:c,handleMouseOut:e[44],handleMouseDown:d,xy:[e[10]+(e[53].barWeight||0)*e[11],e[3][1]+e[52]*e[4]+e[52]],wh:[e[2],e[4]-2]}}),{key:t,first:null,c(){r=Tt(),Ke(n.$$.fragment),Ke(i.$$.fragment),Ke(u.$$.fragment),Ke(o.$$.fragment),this.h()},l(h){r=Tt(),$e(n.$$.fragment,h),$e(i.$$.fragment,h),$e(u.$$.fragment,h),$e(o.$$.fragment,h),this.h()},h(){this.first=r},m(h,g){me(h,r,g),Ye(n,h,g),Ye(i,h,g),Ye(u,h,g),Ye(o,h,g),s=!0},p(h,g){e=h;const b={};g[0]&89&&(b.xy=[e[3][0]+e[0],e[3][1]+e[52]*e[4]+e[52]]),g[0]&4160&&(b.color=`rgba(255,255,255,${Fr(e[53].barWeight/e[12]||0)})`),g[0]&96&&(b.wh=e[5][e[51]]),g[0]&64&&(b.text=e[53].text),g[0]&2&&(b.fontSize=e[1]),n.$set(b);const v={};g[0]&64&&(v.handleMouseOver=f),g[0]&1112&&(v.xy=[e[10],e[3][1]+e[52]*e[4]+e[52]]),g[0]&2064&&(v.wh=[e[11],e[4]-2]),i.$set(v);const _={};g[0]&5056&&(_.color=e[8]===e[51]||e[7]===e[51]||e[9]===e[51]?e[13](Fr((e[53].barWeight||0)/e[12]+.15)):e[13](Fr(e[53].barWeight||0))),g[0]&64&&(_.handleMouseOver=p),g[0]&1112&&(_.xy=[e[10],e[3][1]+e[52]*e[4]+e[52]]),g[0]&2128&&(_.wh=[(e[53].barWeight||0)*e[11],e[4]-2]),u.$set(_);const D={};g[0]&576&&(D.color=e[9]===e[51]?e[15]:e[14]),g[0]&64&&(D.handleMouseOver=c),g[0]&64&&(D.handleMouseDown=d),g[0]&3160&&(D.xy=[e[10]+(e[53].barWeight||0)*e[11],e[3][1]+e[52]*e[4]+e[52]]),g[0]&20&&(D.wh=[e[2],e[4]-2]),o.$set(D)},i(h){s||(ye(n.$$.fragment,h),ye(i.$$.fragment,h),ye(u.$$.fragment,h),ye(o.$$.fragment,h),s=!0)},o(h){Ee(n.$$.fragment,h),Ee(i.$$.fragment,h),Ee(u.$$.fragment,h),Ee(o.$$.fragment,h),s=!1},d(h){h&&I(r),Ze(n,h),Ze(i,h),Ze(u,h),Ze(o,h)}}}function YE(t){let e,r=[],n=new Map,i,u,o,s=t[6];const f=p=>p[51];for(let p=0;p<s.length;p+=1){let c=I0(t,s,p),d=f(c);n.set(d,r[p]=N0(d,c))}return{c(){e=dt("svg");for(let p=0;p<r.length;p+=1)r[p].c();this.h()},l(p){e=pt(p,"svg",{id:!0,class:!0});var c=G(e);for(let d=0;d<r.length;d+=1)r[d].l(c);c.forEach(I),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(p,c){me(p,e,c);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(e,null);i=!0,u||(o=[Se(e,"mousemove",t[25]),Se(e,"mouseup",t[24]),Se(e,"dblclick",t[23])],u=!0)},p(p,c){c[0]&8388607&&(s=p[6],_r(),r=$n(r,c,f,1,p,s,n,e,pp,N0,null,I0),Dr())},i(p){if(!i){for(let c=0;c<s.length;c+=1)ye(r[c]);i=!0}},o(p){for(let c=0;c<r.length;c+=1)Ee(r[c]);i=!1},d(p){p&&I(e);for(let c=0;c<r.length;c+=1)r[c].d();u=!1,ar(o)}}}function ZE(t,e,r){let n,i,u,o,s,f,p,c,d,h,g,b,v;ut(t,Sr,Ce=>r(38,v=Ce));let{center:_=[0,0]}=e,{dimensions:D=[100,100]}=e,{maxWidth:C=1e3}=e,{pointRadius:A=10}=e,{textWidth:F=250}=e,{horizontalPad:E=20}=e,{verticalPad:S=2}=e,{textBarPad:T=10}=e,{fontSize:P=13}=e,{handleWidth:x=20}=e,H=Ce=>`rgba(46,67,101, ${Ce})`,re=Ce=>`rgba(76,97,131, ${Ce})`,V=null,Y=null,U=null,K=re(.3),q=re(.8),te=null,Q=null,J=null;function le(Ce){r(8,Y=Ce)}function _e(Ce){r(7,V=Ce)}function Fe(Ce){r(9,U=Ce)}function Ae(){r(8,Y=null)}function Me(){r(7,V=null)}function qe(){r(9,U=null)}function Ve(Ce){te=Ce}function tt(Ce){let Pe=te!==null?te:Y!==null?Y:U!==null?U:V!==null?V:null;if(Pe===null)return;const Ot=fi(Ce);je(Pe,Ot)}function He(){te=null,Q&&clearInterval(Q),Q=null,J=null}function je(Ce,Pe){let Vt=Math.min(h,Math.max(0,Pe[0]-g))/h,Ht={...v.weightedPrompts},j={...Ht[Ce]};j.barWeight=Vt,Ht[Ce]=j,Mt.update({...v,weightedPrompts:Ht})}function ze(Ce){let Pe=te;if(Pe===null)return;const Ot=fi(Ce);if(je(Pe,Ot),te!==null){let Vt=g+h+x,Ht=g;Ot[0]>Vt&&!Q?(J=Date.now(),Q=setInterval(()=>{if(!J||Date.now()-J<1e3)return;let j={...v.weightedPrompts};const W=Object.entries(j).reduce((ee,[fe,ae])=>{const he=parseInt(fe);return he!==te?ee[he]={...ae,barWeight:Math.max(0,(ae.barWeight||0)-.01)}:ee[he]={...ae,barWeight:Math.min(1,(ae.barWeight||0)+.01)},ee},{});Mt.update({...v,weightedPrompts:W})},100)):Ot[0]<Ht&&!Q?(J=Date.now(),Q=setInterval(()=>{if(!J||Date.now()-J<1e3)return;let j={...v.weightedPrompts};const W=Object.entries(j).reduce((ee,[fe,ae])=>{const he=parseInt(fe);return he!==te?ee[he]={...ae,barWeight:Math.min(1,(ae.barWeight||0)+.01)}:ee[he]={...ae,barWeight:Math.max(0,(ae.barWeight||0)-.01)},ee},{});Mt.update({...v,weightedPrompts:W})},100)):Ot[0]<Vt&&Ot[0]>Ht&&Q&&(clearInterval(Q),Q=null,J=null)}}const mt=(Ce,Pe)=>_e(Ce),at=Ce=>Me(),ft=(Ce,Pe)=>le(Ce),st=Ce=>Ae(),ot=(Ce,Pe)=>Fe(Ce),Xe=Ce=>qe(),Je=(Ce,Pe)=>Ve(Ce);return t.$$set=Ce=>{"center"in Ce&&r(26,_=Ce.center),"dimensions"in Ce&&r(27,D=Ce.dimensions),"maxWidth"in Ce&&r(28,C=Ce.maxWidth),"pointRadius"in Ce&&r(29,A=Ce.pointRadius),"textWidth"in Ce&&r(30,F=Ce.textWidth),"horizontalPad"in Ce&&r(0,E=Ce.horizontalPad),"verticalPad"in Ce&&r(31,S=Ce.verticalPad),"textBarPad"in Ce&&r(32,T=Ce.textBarPad),"fontSize"in Ce&&r(1,P=Ce.fontSize),"handleWidth"in Ce&&r(2,x=Ce.handleWidth)},t.$$.update=()=>{t.$$.dirty[1]&128&&r(6,n=Object.entries(v.weightedPrompts).map(([Ce,Pe],Ot)=>[parseInt(Ce),Ot,Pe])),t.$$.dirty[1]&128&&r(36,i=Object.keys(v.weightedPrompts).length),t.$$.dirty[0]&134217728&&r(35,u=[D[0]-50,D[1]-50]),t.$$.dirty[0]&1073741890&&r(5,o=n.reduce((Ce,[Pe,Ot,Vt])=>{const[Ht,j]=Rr(F,Vt.text.length,P);return Ce[Pe]=[Ht,j],Ce},{})),t.$$.dirty[0]&32&&r(37,s=Math.max(...Object.values(o).map(([Ce,Pe])=>Pe))),t.$$.dirty[1]&112&&r(4,f=Math.min(u[1]/i,s)),t.$$.dirty[0]&16|t.$$.dirty[1]&33&&r(34,p=f*i+S*Math.max(i-1,0)),t.$$.dirty[0]&268435456|t.$$.dirty[1]&16&&r(33,c=Math.min(u[0],C)),t.$$.dirty[0]&67108864|t.$$.dirty[1]&12&&r(3,d=[_[0]-c/2,_[1]-p/2]),t.$$.dirty[0]&1073741829|t.$$.dirty[1]&6&&r(11,h=c-T-F-2*E-x),t.$$.dirty[0]&1073741833|t.$$.dirty[1]&2&&r(10,g=d[0]+T+F+E),t.$$.dirty[1]&128&&r(12,b=Math.max(...Object.values(v.weightedPrompts).map(Ce=>Ce.barWeight||0)))},[E,P,x,d,f,o,n,V,Y,U,g,h,b,H,K,q,le,_e,Fe,Ae,Me,qe,Ve,tt,He,ze,_,D,C,A,F,S,T,c,p,u,i,s,v,mt,at,ft,st,ot,Xe,Je]}class XE extends Dt{constructor(e){super(),bt(this,e,ZE,YE,yt,{center:26,dimensions:27,maxWidth:28,pointRadius:29,textWidth:30,horizontalPad:0,verticalPad:31,textBarPad:32,fontSize:1,handleWidth:2},null,[-1,-1])}}function JE(t){let e,r,n,i;return r=new XE({props:{dimensions:t[2],center:t[3]}}),{c(){e=Z("div"),Ke(r.$$.fragment),this.h()},l(u){e=X(u,"DIV",{class:!0});var o=G(e);$e(r.$$.fragment,o),o.forEach(I),this.h()},h(){B(e,"class","w-full h-full pt-10"),Zi(()=>t[4].call(e))},m(u,o){me(u,e,o),Ye(r,e,null),n=ha(e,t[4].bind(e)),i=!0},p(u,[o]){const s={};o&4&&(s.dimensions=u[2]),o&8&&(s.center=u[3]),r.$set(s)},i(u){i||(ye(r.$$.fragment,u),i=!0)},o(u){Ee(r.$$.fragment,u),i=!1},d(u){u&&I(e),Ze(r),n()}}}function QE(t,e,r){let n,i,u,o;function s(){u=this.clientWidth,o=this.clientHeight,r(0,u),r(1,o)}return t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[u||0,o||0]),t.$$.dirty&4&&r(3,i=pa(n))},[u,o,n,i,s]}class eC extends Dt{constructor(e){super(),bt(this,e,QE,JE,yt,{})}}function tC(t){let e,r,n,i,u;return{c(){e=dt("line"),this.h()},l(o){e=pt(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),G(e).forEach(I),this.h()},h(){B(e,"x1",r=t[0][0]),B(e,"y1",n=t[0][1]),B(e,"x2",i=t[1][0]),B(e,"y2",u=t[1][1]),B(e,"stroke",t[3]),B(e,"stroke-width",t[2])},m(o,s){me(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&B(e,"x1",r),s&1&&n!==(n=o[0][1])&&B(e,"y1",n),s&2&&i!==(i=o[1][0])&&B(e,"x2",i),s&2&&u!==(u=o[1][1])&&B(e,"y2",u),s&8&&B(e,"stroke",o[3]),s&4&&B(e,"stroke-width",o[2])},i:Te,o:Te,d(o){o&&I(e)}}}function rC(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:u=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,u=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,u,o]}class nC extends Dt{constructor(e){super(),bt(this,e,rC,tC,yt,{p1:0,p2:1,stroke:2,color:3})}}function x0(t,e,r){const n=t.slice();return n[26]=e[r][0],n[27]=e[r][1],n}function R0(t){let e,r,n;e=new kf({props:{xy:t[0],radius:t[1]}});let i=Object.entries(t[5].weightedPrompts),u=[];for(let s=0;s<i.length;s+=1)u[s]=L0(x0(t,i,s));const o=s=>Ee(u[s],1,1,()=>{u[s]=null});return{c(){Ke(e.$$.fragment);for(let s=0;s<u.length;s+=1)u[s].c();r=Tt()},l(s){$e(e.$$.fragment,s);for(let f=0;f<u.length;f+=1)u[f].l(s);r=Tt()},m(s,f){Ye(e,s,f);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(s,f);me(s,r,f),n=!0},p(s,f){const p={};if(f&1&&(p.xy=s[0]),f&2&&(p.radius=s[1]),e.$set(p),f&6015){i=Object.entries(s[5].weightedPrompts);let c;for(c=0;c<i.length;c+=1){const d=x0(s,i,c);u[c]?(u[c].p(d,f),ye(u[c],1)):(u[c]=L0(d),u[c].c(),ye(u[c],1),u[c].m(r.parentNode,r))}for(_r(),c=i.length;c<u.length;c+=1)o(c);Dr()}},i(s){if(!n){ye(e.$$.fragment,s);for(let f=0;f<i.length;f+=1)ye(u[f]);n=!0}},o(s){Ee(e.$$.fragment,s),u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)Ee(u[f]);n=!1},d(s){Ze(e,s),zs(u,s),s&&I(r)}}}function L0(t){let e,r,n,i,u,o,s,f,p;e=new nC({props:{p1:t[0],p2:t[6][t[26]].xy}});function c(...g){return t[13](t[26],...g)}function d(...g){return t[14](t[26],...g)}function h(){return t[15](t[26])}return u=new Cu({props:{xy:t[6][t[26]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:h}}),o=new da({props:{xy:t[9](t[6][t[26]].textXY,Rr(t[3],t[27].text.length,t[4])),color:`rgba(255,255,255,${Fr(t[6][t[26]].unitWeight)}`,wh:Rr(t[3],t[27].text.length,t[4]),fontSize:t[4],text:t[27].text}}),{c(){Ke(e.$$.fragment),r=dt("path"),Ke(u.$$.fragment),Ke(o.$$.fragment),this.h()},l(g){$e(e.$$.fragment,g),r=pt(g,"path",{d:!0,fill:!0}),G(r).forEach(I),$e(u.$$.fragment,g),$e(o.$$.fragment,g),this.h()},h(){B(r,"d",n=U0(t[0],t[1],t[6][t[26]].angle,t[6][t[26]].angle+t[6][t[26]].angleDiff)),B(r,"fill",i=`rgba(26,47,91,${Fr(t[6][t[26]].unitWeight)/4}`)},m(g,b){Ye(e,g,b),me(g,r,b),Ye(u,g,b),Ye(o,g,b),s=!0,f||(p=[Se(r,"mousewheel",c),Se(r,"mousedown",d)],f=!0)},p(g,b){t=g;const v={};b&1&&(v.p1=t[0]),b&96&&(v.p2=t[6][t[26]].xy),e.$set(v),(!s||b&99&&n!==(n=U0(t[0],t[1],t[6][t[26]].angle,t[6][t[26]].angle+t[6][t[26]].angleDiff)))&&B(r,"d",n),(!s||b&96&&i!==(i=`rgba(26,47,91,${Fr(t[6][t[26]].unitWeight)/4}`))&&B(r,"fill",i);const _={};b&96&&(_.xy=t[6][t[26]].xy),b&4&&(_.radius=t[2]),b&32&&(_.handleMouseDown=h),u.$set(_);const D={};b&120&&(D.xy=t[9](t[6][t[26]].textXY,Rr(t[3],t[27].text.length,t[4]))),b&96&&(D.color=`rgba(255,255,255,${Fr(t[6][t[26]].unitWeight)}`),b&56&&(D.wh=Rr(t[3],t[27].text.length,t[4])),b&16&&(D.fontSize=t[4]),b&32&&(D.text=t[27].text),o.$set(D)},i(g){s||(ye(e.$$.fragment,g),ye(u.$$.fragment,g),ye(o.$$.fragment,g),s=!0)},o(g){Ee(e.$$.fragment,g),Ee(u.$$.fragment,g),Ee(o.$$.fragment,g),s=!1},d(g){Ze(e,g),g&&I(r),Ze(u,g),Ze(o,g),f=!1,ar(p)}}}function iC(t){let e,r,n,i,u=t[6]&&t[5].weightedPrompts&&R0(t);return{c(){e=dt("svg"),u&&u.c(),this.h()},l(o){e=pt(o,"svg",{id:!0,class:!0});var s=G(e);u&&u.l(s),s.forEach(I),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(o,s){me(o,e,s),u&&u.m(e,null),r=!0,n||(i=[Se(e,"mousemove",t[11]),Se(e,"mouseup",t[7])],n=!0)},p(o,[s]){o[6]&&o[5].weightedPrompts?u?(u.p(o,s),s&96&&ye(u,1)):(u=R0(o),u.c(),ye(u,1),u.m(e,null)):u&&(_r(),Ee(u,1,1,()=>{u=null}),Dr())},i(o){r||(ye(u),r=!0)},o(o){Ee(u),r=!1},d(o){o&&I(e),u&&u.d(),n=!1,ar(i)}}}function uC(t,e){if(t.length!==e.length)return!1;const r=t.length;let n=-1;for(let i=0;i<r;i++)if(e[i]===t[0]){n=i;break}if(n===-1)return!1;for(let i=0;i<r;i++)if(t[i]!==e[(i+n)%r])return!1;return!0}function U0(t,e,r,n){const i=t[0]+e*Math.cos(r*Math.PI/180),u=t[1]+e*Math.sin(r*Math.PI/180),o=t[0]+e*Math.cos(n*Math.PI/180),s=t[1]+e*Math.sin(n*Math.PI/180),f=n-r<=180?"0":"1";return`M${t[0]},${t[1]} L${i},${u} A${e},${e} 0 ${f} 1 ${o},${s} Z`}function aC(t,e,r){let n,i;ut(t,Sr,V=>r(5,i=V));let{center:u=[450,450]}=e,{radius:o=250}=e,{pointRadius:s=10}=e,{textWidth:f=150}=e,{fontSize:p=13}=e,c=[0,0],d=null,h={},g=null,b;function v(V){g=null,b=null,d=null,h={}}function _(V){g=V}function D(V,Y){let U=xn(V,u,o)[0]-180;U<0&&(U+=360);const K=If(pa(Y),U);return $r(V,K)}function C(V,Y){return V?Object.entries(V).reduce((U,[K,q],te)=>{const Q=U[K]||te*(360/Object.keys(V).length)-90;return U[K]=Vr(Q),U},Y):null}function A(V,Y){b=Y}function F(V){const Y=b,U={...i.pieAngles},K=Object.entries(U).sort((Me,qe)=>Vr(Me[1])-Vr(qe[1])).map(Me=>Me[0]),q=K.indexOf(Y),te=q+1===K.length?0:q+1,Q=K[te];h[Y]||(h[Y]=U[Y]),h[Q]||(h[Q]=U[Q]);const le=xn(V,u,o)[0]-d,_e={...U};_e[Y]=Vr(le+h[Y]),_e[Q]=Vr(le+h[Q]);const Fe=Object.entries(_e).sort((Me,qe)=>Vr(Me[1])-Vr(qe[1])).map(Me=>Me[0]);uC(K,Fe)&&r(6,n=P(i.weightedPrompts,u,o,_e))}function E(V){const Y={...i.weightedPrompts[g]},U=la(V,u,o),K=Vr(xn(U,u,o)[0]),q={...i.pieAngles};q[Y.id]=K;const te={...i.weightedPrompts};te[g]=Y,r(6,n=P(te,u,o,q))}function S(V){V.preventDefault(),c=fi(V),g?E(c):b?F(c):d=xn(c,u,o)[0]}function T(V,Y){V.preventDefault();const U={...i.pieAngles},K=Object.entries(U).sort((J,le)=>Vr(J[1])-Vr(le[1])).map(J=>J[0]),q=K.indexOf(Y),te=q+1===K.length?0:q+1,Q=K[te];U[Y]=Vr(U[Y]-V.deltaY/100),U[Q]=Vr(U[Q]+V.deltaY/100),r(6,n=P(i.weightedPrompts,u,o,U))}function P(V,Y,U,K){if(!V||!Y||!U)return null;const q=Object.entries(V).sort((_e,Fe)=>Vr(K[_e[0]])-Vr(K[Fe[0]])),te=q.map((_e,Fe)=>{const Ae=Fe+1===q.length?0:Fe+1,Me=K[q[Ae][0]]-K[q[Fe][0]];return Me<0?[_e[0],360+Me]:[_e[0],Me]}),Q=Math.max(...te.map(_e=>_e[1])),J=te.reduce((_e,[Fe,Ae])=>{({...V[Fe]});const Me=K[Fe],qe=Nr(Y,[Me,1],U),Ve=Nr(Y,[Me+.5*Ae,1],U),tt=Ae/Q;return _e[Fe]={xy:qe,textXY:Ve,angle:Me,angleDiff:Ae,unitWeight:tt},_e},{}),le={...V};return Object.entries(J).forEach(([_e,Fe])=>{le[_e].pieWeight=Fe.unitWeight}),Mt.update({...i,weightedPrompts:le,pieAngles:K}),J}const x=(V,Y)=>T(Y,V),H=(V,Y)=>A(Y,V),re=V=>_(V);return t.$$set=V=>{"center"in V&&r(0,u=V.center),"radius"in V&&r(1,o=V.radius),"pointRadius"in V&&r(2,s=V.pointRadius),"textWidth"in V&&r(3,f=V.textWidth),"fontSize"in V&&r(4,p=V.fontSize)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(i.pieAngles||{}).length!==Object.keys(i.weightedPrompts).length&&Mt.update({...i,pieAngles:C(i.weightedPrompts,{})}),t.$$.dirty&35&&r(6,n=P(i.weightedPrompts,u,o,i.pieAngles||C(i.weightedPrompts,{})))},[u,o,s,f,p,i,n,v,_,D,A,S,T,x,H,re]}class sC extends Dt{constructor(e){super(),bt(this,e,aC,iC,yt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function oC(t){let e,r,n,i;return r=new sC({props:{center:[Math.round(t[0]/2),Math.round(t[1]/2)],radius:Math.round(Math.min(t[0],t[1])/2)-150}}),{c(){e=Z("div"),Ke(r.$$.fragment),this.h()},l(u){e=X(u,"DIV",{class:!0});var o=G(e);$e(r.$$.fragment,o),o.forEach(I),this.h()},h(){B(e,"class","w-full h-full"),Zi(()=>t[2].call(e))},m(u,o){me(u,e,o),Ye(r,e,null),n=ha(e,t[2].bind(e)),i=!0},p(u,[o]){const s={};o&3&&(s.center=[Math.round(u[0]/2),Math.round(u[1]/2)]),o&3&&(s.radius=Math.round(Math.min(u[0],u[1])/2)-150),r.$set(s)},i(u){i||(ye(r.$$.fragment,u),i=!0)},o(u){Ee(r.$$.fragment,u),i=!1},d(u){u&&I(e),Ze(r),n()}}}function lC(t,e,r){let n,i;function u(){n=this.clientWidth,i=this.clientHeight,r(0,n),r(1,i)}return[n,i,u]}class fC extends Dt{constructor(e){super(),bt(this,e,lC,oC,yt,{})}}var As={},cC={get exports(){return As},set exports(t){As=t}},Es={},hC={get exports(){return Es},set exports(t){Es=t}},yu=typeof Reflect=="object"?Reflect:null,V0=yu&&typeof yu.apply=="function"?yu.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},cs;yu&&typeof yu.ownKeys=="function"?cs=yu.ownKeys:Object.getOwnPropertySymbols?cs=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:cs=function(e){return Object.getOwnPropertyNames(e)};function dC(t){console&&console.warn&&console.warn(t)}var Xp=Number.isNaN||function(e){return e!==e};function Lt(){Lt.init.call(this)}hC.exports=Lt;Es.once=mC;Lt.EventEmitter=Lt;Lt.prototype._events=void 0;Lt.prototype._eventsCount=0;Lt.prototype._maxListeners=void 0;var j0=10;function Js(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Lt,"defaultMaxListeners",{enumerable:!0,get:function(){return j0},set:function(t){if(typeof t!="number"||t<0||Xp(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");j0=t}});Lt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Lt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Xp(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Jp(t){return t._maxListeners===void 0?Lt.defaultMaxListeners:t._maxListeners}Lt.prototype.getMaxListeners=function(){return Jp(this)};Lt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",u=this._events;if(u!==void 0)i=i&&u.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var f=u[e];if(f===void 0)return!1;if(typeof f=="function")V0(f,this,r);else for(var p=f.length,c=n1(f,p),n=0;n<p;++n)V0(c[n],this,r);return!0};function Qp(t,e,r,n){var i,u,o;if(Js(r),u=t._events,u===void 0?(u=t._events=Object.create(null),t._eventsCount=0):(u.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),u=t._events),o=u[e]),o===void 0)o=u[e]=r,++t._eventsCount;else if(typeof o=="function"?o=u[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Jp(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=o.length,dC(s)}return t}Lt.prototype.addListener=function(e,r){return Qp(this,e,r,!1)};Lt.prototype.on=Lt.prototype.addListener;Lt.prototype.prependListener=function(e,r){return Qp(this,e,r,!0)};function pC(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function e1(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=pC.bind(n);return i.listener=r,n.wrapFn=i,i}Lt.prototype.once=function(e,r){return Js(r),this.on(e,e1(this,e,r)),this};Lt.prototype.prependOnceListener=function(e,r){return Js(r),this.prependListener(e,e1(this,e,r)),this};Lt.prototype.removeListener=function(e,r){var n,i,u,o,s;if(Js(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(u=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){s=n[o].listener,u=o;break}if(u<0)return this;u===0?n.shift():gC(n,u),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this};Lt.prototype.off=Lt.prototype.removeListener;Lt.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var u=Object.keys(n),o;for(i=0;i<u.length;++i)o=u[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function t1(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?vC(i):n1(i,i.length)}Lt.prototype.listeners=function(e){return t1(this,e,!0)};Lt.prototype.rawListeners=function(e){return t1(this,e,!1)};Lt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):r1.call(t,e)};Lt.prototype.listenerCount=r1;function r1(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Lt.prototype.eventNames=function(){return this._eventsCount>0?cs(this._events):[]};function n1(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function gC(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function vC(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function mC(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,u),n(o)}function u(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}i1(t,e,u,{once:!0}),e!=="error"&&_C(t,i,{once:!0})})}function _C(t,e,r){typeof t.on=="function"&&i1(t,"error",e,r)}function i1(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(u){n.once&&t.removeEventListener(e,i),r(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}function DC(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}var bC=DC;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var yC=function(t){return t!=null&&(u1(t)||wC(t)||!!t._isBuffer)};function u1(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function wC(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&u1(t.slice(0,0))}var AC=bC,EC=yC,CC=typeof Float64Array<"u";function FC(t,e){return t[0]-e[0]}function SC(){var t=this.stride,e=new Array(t.length),r;for(r=0;r<e.length;++r)e[r]=[Math.abs(t[r]),r];e.sort(FC);var n=new Array(e.length);for(r=0;r<n.length;++r)n[r]=e[r][1];return n}function BC(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n=t==="generic";if(e===-1){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",v=new Function(i);return v()}else if(e===0){var i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",v=new Function("TrivialArray",i);return v(Cs[t][0])}var i=["'use strict'"],u=AC(e),o=u.map(function(_){return"i"+_}),s="this.offset+"+u.map(function(_){return"this.stride["+_+"]*i"+_}).join("+"),f=u.map(function(_){return"b"+_}).join(","),p=u.map(function(_){return"c"+_}).join(",");i.push("function "+r+"(a,"+f+","+p+",d){this.data=a","this.shape=["+f+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+u.map(function(_){return"this.shape["+_+"]"}).join("*"),"}})"),e===1?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+r+"_order(){"),e===2?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+o.join(",")+",v){"),n?i.push("return this.data.set("+s+",v)}"):i.push("return this.data["+s+"]=v}"),i.push("proto.get=function "+r+"_get("+o.join(",")+"){"),n?i.push("return this.data.get("+s+")}"):i.push("return this.data["+s+"]}"),i.push("proto.index=function "+r+"_index(",o.join(),"){return "+s+"}"),i.push("proto.hi=function "+r+"_hi("+o.join(",")+"){return new "+r+"(this.data,"+u.map(function(_){return["(typeof i",_,"!=='number'||i",_,"<0)?this.shape[",_,"]:i",_,"|0"].join("")}).join(",")+","+u.map(function(_){return"this.stride["+_+"]"}).join(",")+",this.offset)}");var c=u.map(function(_){return"a"+_+"=this.shape["+_+"]"}),d=u.map(function(_){return"c"+_+"=this.stride["+_+"]"});i.push("proto.lo=function "+r+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+c.join(",")+","+d.join(","));for(var h=0;h<e;++h)i.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");i.push("return new "+r+"(this.data,"+u.map(function(_){return"a"+_}).join(",")+","+u.map(function(_){return"c"+_}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+o.join(",")+"){var "+u.map(function(_){return"a"+_+"=this.shape["+_+"]"}).join(",")+","+u.map(function(_){return"b"+_+"=this.stride["+_+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var h=0;h<e;++h)i.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");i.push("return new "+r+"(this.data,"+u.map(function(_){return"a"+_}).join(",")+","+u.map(function(_){return"b"+_}).join(",")+",c)}");for(var g=new Array(e),b=new Array(e),h=0;h<e;++h)g[h]="a[i"+h+"]",b[h]="b[i"+h+"]";i.push("proto.transpose=function "+r+"_transpose("+o+"){"+o.map(function(_,D){return _+"=("+_+"===undefined?"+D+":"+_+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+b.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+o+"){var a=[],b=[],c=this.offset");for(var h=0;h<e;++h)i.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+u.map(function(_){return"shape["+_+"]"}).join(",")+","+u.map(function(_){return"stride["+_+"]"}).join(",")+",offset)}");var v=new Function("CTOR_LIST","ORDER",i.join(`
`));return v(Cs[t],SC)}function OC(t){if(EC(t))return"buffer";if(CC)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var Cs={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function MC(t,e,r,n){if(t===void 0){var p=Cs.array[0];return p([])}else typeof t=="number"&&(t=[t]);e===void 0&&(e=[t.length]);var i=e.length;if(r===void 0){r=new Array(i);for(var u=i-1,o=1;u>=0;--u)r[u]=o,o*=e[u]}if(n===void 0){n=0;for(var u=0;u<i;++u)r[u]<0&&(n-=(e[u]-1)*r[u])}for(var s=OC(t),f=Cs[s];f.length<=i+1;)f.push(BC(s,f.length-1));var p=f[i+1];return p(t,e,r,n)}var Fu=MC,Qs={};function PC(t,e){for(var r=1,n=t.length,i=t[0],u=t[0],o=1;o<n;++o)if(u=i,i=t[o],e(i,u)){if(o===r){r++;continue}t[r++]=i}return t.length=r,t}function TC(t){for(var e=1,r=t.length,n=t[0],i=t[0],u=1;u<r;++u,i=n)if(i=n,n=t[u],n!==i){if(u===e){e++;continue}t[e++]=n}return t.length=e,t}function kC(t,e,r){return t.length===0?t:e?(r||t.sort(e),PC(t,e)):(r||t.sort(),TC(t))}var a1=kC,IC=a1;function s1(t,e,r){var n=t.length,i=e.arrayArgs.length,u=e.indexArgs.length>0,o=[],s=[],f=0,p=0,c,d;for(c=0;c<n;++c)s.push(["i",c,"=0"].join(""));for(d=0;d<i;++d)for(c=0;c<n;++c)p=f,f=t[c],c===0?s.push(["d",d,"s",c,"=t",d,"p",f].join("")):s.push(["d",d,"s",c,"=(t",d,"p",f,"-s",p,"*t",d,"p",p,")"].join(""));for(s.length>0&&o.push("var "+s.join(",")),c=n-1;c>=0;--c)f=t[c],o.push(["for(i",c,"=0;i",c,"<s",f,";++i",c,"){"].join(""));for(o.push(r),c=0;c<n;++c){for(p=f,f=t[c],d=0;d<i;++d)o.push(["p",d,"+=d",d,"s",c].join(""));u&&(c>0&&o.push(["index[",p,"]-=s",p].join("")),o.push(["++index[",f,"]"].join(""))),o.push("}")}return o.join(`
`)}function NC(t,e,r,n){for(var i=e.length,u=r.arrayArgs.length,o=r.blockSize,s=r.indexArgs.length>0,f=[],p=0;p<u;++p)f.push(["var offset",p,"=p",p].join(""));for(var p=t;p<i;++p)f.push(["for(var j"+p+"=SS[",e[p],"]|0;j",p,">0;){"].join("")),f.push(["if(j",p,"<",o,"){"].join("")),f.push(["s",e[p],"=j",p].join("")),f.push(["j",p,"=0"].join("")),f.push(["}else{s",e[p],"=",o].join("")),f.push(["j",p,"-=",o,"}"].join("")),s&&f.push(["index[",e[p],"]=j",p].join(""));for(var p=0;p<u;++p){for(var c=["offset"+p],d=t;d<i;++d)c.push(["j",d,"*t",p,"p",e[d]].join(""));f.push(["p",p,"=(",c.join("+"),")"].join(""))}f.push(s1(e,r,n));for(var p=t;p<i;++p)f.push("}");return f.join(`
`)}function xC(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}function yl(t,e,r){for(var n=t.body,i=[],u=[],o=0;o<t.args.length;++o){var s=t.args[o];if(!(s.count<=0)){var f=new RegExp(s.name,"g"),p="",c=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var d=e.offsetArgIndex.indexOf(o),h=e.offsetArgs[d];c=h.array,p="+q"+d;case"array":p="p"+c+p;var g="l"+o,b="a"+c;if(e.arrayBlockIndices[c]===0)s.count===1?r[c]==="generic"?s.lvalue?(i.push(["var ",g,"=",b,".get(",p,")"].join("")),n=n.replace(f,g),u.push([b,".set(",p,",",g,")"].join(""))):n=n.replace(f,[b,".get(",p,")"].join("")):n=n.replace(f,[b,"[",p,"]"].join("")):r[c]==="generic"?(i.push(["var ",g,"=",b,".get(",p,")"].join("")),n=n.replace(f,g),s.lvalue&&u.push([b,".set(",p,",",g,")"].join(""))):(i.push(["var ",g,"=",b,"[",p,"]"].join("")),n=n.replace(f,g),s.lvalue&&u.push([b,"[",p,"]=",g].join("")));else{for(var v=[s.name],_=[p],D=0;D<Math.abs(e.arrayBlockIndices[c]);D++)v.push("\\s*\\[([^\\]]+)\\]"),_.push("$"+(D+1)+"*t"+c+"b"+D);if(f=new RegExp(v.join(""),"g"),p=_.join("+"),r[c]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(f,[b,"[",p,"]"].join(""))}break;case"scalar":n=n.replace(f,"Y"+e.scalarArgs.indexOf(o));break;case"index":n=n.replace(f,"index");break;case"shape":n=n.replace(f,"shape");break}}}return[i.join(`
`),n,u.join(`
`)].join(`
`).trim()}function RC(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],u=i.match(/\d+/);u?u=u[0]:u="",i.charAt(0)===0?e[n]="u"+i.charAt(1)+u:e[n]=i.charAt(0)+u,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}function LC(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,n=new Array(t.arrayArgs.length),i=new Array(t.arrayArgs.length),u=0;u<t.arrayArgs.length;++u)i[u]=e[2*u],n[u]=e[2*u+1];for(var o=[],s=[],f=[],p=[],c=[],u=0;u<t.arrayArgs.length;++u){t.arrayBlockIndices[u]<0?(f.push(0),p.push(r),o.push(r),s.push(r+t.arrayBlockIndices[u])):(f.push(t.arrayBlockIndices[u]),p.push(t.arrayBlockIndices[u]+r),o.push(0),s.push(t.arrayBlockIndices[u]));for(var d=[],h=0;h<n[u].length;h++)f[u]<=n[u][h]&&n[u][h]<p[u]&&d.push(n[u][h]-f[u]);c.push(d)}for(var g=["SS"],b=["'use strict'"],v=[],h=0;h<r;++h)v.push(["s",h,"=SS[",h,"]"].join(""));for(var u=0;u<t.arrayArgs.length;++u){g.push("a"+u),g.push("t"+u),g.push("p"+u);for(var h=0;h<r;++h)v.push(["t",u,"p",h,"=t",u,"[",f[u]+h,"]"].join(""));for(var h=0;h<Math.abs(t.arrayBlockIndices[u]);++h)v.push(["t",u,"b",h,"=t",u,"[",o[u]+h,"]"].join(""))}for(var u=0;u<t.scalarArgs.length;++u)g.push("Y"+u);if(t.shapeArgs.length>0&&v.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var _=new Array(r),u=0;u<r;++u)_[u]="0";v.push(["index=[",_.join(","),"]"].join(""))}for(var u=0;u<t.offsetArgs.length;++u){for(var D=t.offsetArgs[u],C=[],h=0;h<D.offset.length;++h)D.offset[h]!==0&&(D.offset[h]===1?C.push(["t",D.array,"p",h].join("")):C.push([D.offset[h],"*t",D.array,"p",h].join("")));C.length===0?v.push("q"+u+"=0"):v.push(["q",u,"=",C.join("+")].join(""))}var A=IC([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));v=v.concat(A),v.length>0&&b.push("var "+v.join(","));for(var u=0;u<t.arrayArgs.length;++u)b.push("p"+u+"|=0");t.pre.body.length>3&&b.push(yl(t.pre,t,i));var F=yl(t.body,t,i),E=xC(c);E<r?b.push(NC(E,c[0],t,F)):b.push(s1(c[0],t,F)),t.post.body.length>3&&b.push(yl(t.post,t,i)),t.debug&&console.log("-----Generated cwise routine for ",e,`:
`+b.join(`
`)+`
----------`);var S=[t.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",E,RC(i)].join(""),T=new Function(["function ",S,"(",g.join(","),"){",b.join(`
`),"} return ",S].join(""));return T()}var UC=LC,VC=UC;function jC(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var i=[],u=[],o=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],s=[],f=[],p=0;p<t.arrayArgs.length;++p){var c=t.arrayArgs[p];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),i.push("t"+c),i.push("r"+c),u.push("t"+c),u.push("r"+c+".join()"),o.push("array"+c+".data"),o.push("array"+c+".stride"),o.push("array"+c+".offset|0"),p>0&&(s.push("array"+t.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[p]))),f.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[p])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+f.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var p=0;p<t.scalarArgs.length;++p)o.push("scalar"+t.scalarArgs[p]);r.push(["type=[",u.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",o.join(","),")}"].join("")),t.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var d=new Function("compile",e.join(`
`));return d(VC.bind(void 0,t))}var qC=jC,zC=qC;function WC(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function HC(t){var e=new WC;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var n=0;n<r.length;++n){var i=r[n];if(i==="array"||typeof i=="object"&&i.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(i==="scalar")e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if(i==="index"){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(i==="shape"){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof i=="object"&&i.offset)e.argTypes[n]="offset",e.offsetArgs.push({array:i.array,offset:i.offset}),e.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+r[n])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,zC(e)}var Nf=HC;(function(t){var e=Nf,r={body:"",args:[],thisVars:[],localVars:[]};function n(h){if(!h)return r;for(var g=0;g<h.args.length;++g){var b=h.args[g];g===0?h.args[g]={name:b,lvalue:!0,rvalue:!!h.rvalue,count:h.count||1}:h.args[g]={name:b,lvalue:!1,rvalue:!0,count:1}}return h.thisVars||(h.thisVars=[]),h.localVars||(h.localVars=[]),h}function i(h){return e({args:h.args,pre:n(h.pre),body:n(h.body),post:n(h.proc),funcName:h.funcName})}function u(h){for(var g=[],b=0;b<h.args.length;++b)g.push("a"+b);var v=new Function("P",["return function ",h.funcName,"_ndarrayops(",g.join(","),") {P(",g.join(","),");return a0}"].join(""));return v(i(h))}var o={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var h in o){var g=o[h];t[h]=u({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:h}),t[h+"eq"]=u({args:["array","array"],body:{args:["a","b"],body:"a"+g+"=b"},rvalue:!0,funcName:h+"eq"}),t[h+"s"]=u({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:h+"s"}),t[h+"seq"]=u({args:["array","scalar"],body:{args:["a","s"],body:"a"+g+"=s"},rvalue:!0,funcName:h+"seq"})}})();var s={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var h in s){var g=s[h];t[h]=u({args:["array","array"],body:{args:["a","b"],body:"a="+g+"b"},funcName:h}),t[h+"eq"]=u({args:["array"],body:{args:["a"],body:"a="+g+"a"},rvalue:!0,count:2,funcName:h+"eq"})}})();var f={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var h in f){var g=f[h];t[h]=u({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:h}),t[h+"s"]=u({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:h+"s"}),t[h+"eq"]=u({args:["array","array"],body:{args:["a","b"],body:"a=a"+g+"b"},rvalue:!0,count:2,funcName:h+"eq"}),t[h+"seq"]=u({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+g+"s"},rvalue:!0,count:2,funcName:h+"seq"})}})();var p=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var h=0;h<p.length;++h){var g=p[h];t[g]=u({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:g}),t[g+"eq"]=u({args:["array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"})}})();var c=["max","min","atan2","pow"];(function(){for(var h=0;h<c.length;++h){var g=c[h];t[g]=u({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g}),t[g+"s"]=u({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g+"s"}),t[g+"eq"]=u({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"}),t[g+"seq"]=u({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"seq"})}})();var d=["atan2","pow"];(function(){for(var h=0;h<d.length;++h){var g=d[h];t[g+"op"]=u({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"op"}),t[g+"ops"]=u({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"ops"}),t[g+"opeq"]=u({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opeq"}),t[g+"opseq"]=u({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opseq"})}})(),t.any=e({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=e({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=u({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=u({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=u({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=e({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(Qs);var GC=Nf({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64}),q0=Fu,KC=GC,$C=function(e,r){for(var n=[],i=e,u=1;Array.isArray(i);)n.push(i.length),u*=i.length,i=i[0];return n.length===0?q0():(r||(r=q0(new Float64Array(u),n)),KC(r,e),r)};function o1(t,e,r){var n=t[r]|0;if(n<=0)return[];var i=new Array(n),u;if(r===t.length-1)for(u=0;u<n;++u)i[u]=e;else for(u=0;u<n;++u)i[u]=o1(t,e,r+1);return i}function YC(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function ZC(t,e){switch(typeof e>"u"&&(e=0),typeof t){case"number":if(t>0)return YC(t|0,e);break;case"object":if(typeof t.length=="number")return o1(t,e,0);break}return[]}var XC=ZC,l1={};(function(t){(function(e,r){r(t)})(dr,function(e){var r,n,i,u,o,s,f,p,c,d,h,g,b,v,_,D,C,A;r={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},n={},n[r.BooleanLiteral]="Boolean",n[r.EOF]="<end>",n[r.Identifier]="Identifier",n[r.Keyword]="Keyword",n[r.NullLiteral]="Null",n[r.NumericLiteral]="Numeric",n[r.Punctuator]="Punctuator",n[r.StringLiteral]="String",n[r.RegularExpression]="RegularExpression",i=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],u={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},o={Data:1,Get:2,Set:4},s={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},f={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function F(y,O){if(!y)throw new Error("ASSERT: "+O)}function E(y){return y>=48&&y<=57}function S(y){return"0123456789abcdefABCDEF".indexOf(y)>=0}function T(y){return"01234567".indexOf(y)>=0}function P(y){return y===32||y===9||y===11||y===12||y===160||y>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(y)>=0}function x(y){return y===10||y===13||y===8232||y===8233}function H(y){return y===36||y===95||y>=65&&y<=90||y>=97&&y<=122||y===92||y>=128&&f.NonAsciiIdentifierStart.test(String.fromCharCode(y))}function re(y){return y===36||y===95||y>=65&&y<=90||y>=97&&y<=122||y>=48&&y<=57||y===92||y>=128&&f.NonAsciiIdentifierPart.test(String.fromCharCode(y))}function V(y){switch(y){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function Y(y){switch(y){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function U(y){return y==="eval"||y==="arguments"}function K(y){if(d&&Y(y))return!0;switch(y.length){case 2:return y==="if"||y==="in"||y==="do";case 3:return y==="var"||y==="for"||y==="new"||y==="try"||y==="let";case 4:return y==="this"||y==="else"||y==="case"||y==="void"||y==="with"||y==="enum";case 5:return y==="while"||y==="break"||y==="catch"||y==="throw"||y==="const"||y==="yield"||y==="class"||y==="super";case 6:return y==="return"||y==="typeof"||y==="delete"||y==="switch"||y==="export"||y==="import";case 7:return y==="default"||y==="finally"||y==="extends";case 8:return y==="function"||y==="continue"||y==="debugger";case 10:return y==="instanceof";default:return!1}}function q(y,O,L,ne,pe){var Oe;F(typeof L=="number","Comment must have valid position"),!(C.lastCommentStart>=L)&&(C.lastCommentStart=L,Oe={type:y,value:O},A.range&&(Oe.range=[L,ne]),A.loc&&(Oe.loc=pe),A.comments.push(Oe),A.attachComment&&(A.leadingComments.push(Oe),A.trailingComments.push(Oe)))}function te(y){var O,L,ne,pe;for(O=h-y,L={start:{line:g,column:h-b-y}};h<v;)if(ne=c.charCodeAt(h),++h,x(ne)){A.comments&&(pe=c.slice(O+y,h-1),L.end={line:g,column:h-b-1},q("Line",pe,O,h-1,L)),ne===13&&c.charCodeAt(h)===10&&++h,++g,b=h;return}A.comments&&(pe=c.slice(O+y,h),L.end={line:g,column:h-b},q("Line",pe,O,h,L))}function Q(){var y,O,L,ne;for(A.comments&&(y=h-2,O={start:{line:g,column:h-b-2}});h<v;)if(L=c.charCodeAt(h),x(L))L===13&&c.charCodeAt(h+1)===10&&++h,++g,++h,b=h,h>=v&&W({},s.UnexpectedToken,"ILLEGAL");else if(L===42){if(c.charCodeAt(h+1)===47){++h,++h,A.comments&&(ne=c.slice(y+2,h-2),O.end={line:g,column:h-b},q("Block",ne,y,h,O));return}++h}else++h;W({},s.UnexpectedToken,"ILLEGAL")}function J(){var y,O;for(O=h===0;h<v;)if(y=c.charCodeAt(h),P(y))++h;else if(x(y))++h,y===13&&c.charCodeAt(h)===10&&++h,++g,b=h,O=!0;else if(y===47)if(y=c.charCodeAt(h+1),y===47)++h,++h,te(2),O=!0;else if(y===42)++h,++h,Q();else break;else if(O&&y===45)if(c.charCodeAt(h+1)===45&&c.charCodeAt(h+2)===62)h+=3,te(3);else break;else if(y===60)if(c.slice(h+1,h+4)==="!--")++h,++h,++h,++h,te(4);else break;else break}function le(y){var O,L,ne,pe=0;for(L=y==="u"?4:2,O=0;O<L;++O)if(h<v&&S(c[h]))ne=c[h++],pe=pe*16+"0123456789abcdef".indexOf(ne.toLowerCase());else return"";return String.fromCharCode(pe)}function _e(){var y,O;for(y=c.charCodeAt(h++),O=String.fromCharCode(y),y===92&&(c.charCodeAt(h)!==117&&W({},s.UnexpectedToken,"ILLEGAL"),++h,y=le("u"),(!y||y==="\\"||!H(y.charCodeAt(0)))&&W({},s.UnexpectedToken,"ILLEGAL"),O=y);h<v&&(y=c.charCodeAt(h),!!re(y));)++h,O+=String.fromCharCode(y),y===92&&(O=O.substr(0,O.length-1),c.charCodeAt(h)!==117&&W({},s.UnexpectedToken,"ILLEGAL"),++h,y=le("u"),(!y||y==="\\"||!re(y.charCodeAt(0)))&&W({},s.UnexpectedToken,"ILLEGAL"),O+=y);return O}function Fe(){var y,O;for(y=h++;h<v;){if(O=c.charCodeAt(h),O===92)return h=y,_e();if(re(O))++h;else break}return c.slice(y,h)}function Ae(){var y,O,L;return y=h,O=c.charCodeAt(h)===92?_e():Fe(),O.length===1?L=r.Identifier:K(O)?L=r.Keyword:O==="null"?L=r.NullLiteral:O==="true"||O==="false"?L=r.BooleanLiteral:L=r.Identifier,{type:L,value:O,lineNumber:g,lineStart:b,start:y,end:h}}function Me(){var y=h,O=c.charCodeAt(h),L,ne=c[h],pe,Oe,gt;switch(O){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++h,A.tokenize&&(O===40?A.openParenToken=A.tokens.length:O===123&&(A.openCurlyToken=A.tokens.length)),{type:r.Punctuator,value:String.fromCharCode(O),lineNumber:g,lineStart:b,start:y,end:h};default:if(L=c.charCodeAt(h+1),L===61)switch(O){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return h+=2,{type:r.Punctuator,value:String.fromCharCode(O)+String.fromCharCode(L),lineNumber:g,lineStart:b,start:y,end:h};case 33:case 61:return h+=2,c.charCodeAt(h)===61&&++h,{type:r.Punctuator,value:c.slice(y,h),lineNumber:g,lineStart:b,start:y,end:h}}}if(gt=c.substr(h,4),gt===">>>=")return h+=4,{type:r.Punctuator,value:gt,lineNumber:g,lineStart:b,start:y,end:h};if(Oe=gt.substr(0,3),Oe===">>>"||Oe==="<<="||Oe===">>=")return h+=3,{type:r.Punctuator,value:Oe,lineNumber:g,lineStart:b,start:y,end:h};if(pe=Oe.substr(0,2),ne===pe[1]&&"+-<>&|".indexOf(ne)>=0||pe==="=>")return h+=2,{type:r.Punctuator,value:pe,lineNumber:g,lineStart:b,start:y,end:h};if("<>=!+-*%&|^/".indexOf(ne)>=0)return++h,{type:r.Punctuator,value:ne,lineNumber:g,lineStart:b,start:y,end:h};W({},s.UnexpectedToken,"ILLEGAL")}function qe(y){for(var O="";h<v&&S(c[h]);)O+=c[h++];return O.length===0&&W({},s.UnexpectedToken,"ILLEGAL"),H(c.charCodeAt(h))&&W({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt("0x"+O,16),lineNumber:g,lineStart:b,start:y,end:h}}function Ve(y){for(var O="0"+c[h++];h<v&&T(c[h]);)O+=c[h++];return(H(c.charCodeAt(h))||E(c.charCodeAt(h)))&&W({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt(O,8),octal:!0,lineNumber:g,lineStart:b,start:y,end:h}}function tt(){var y,O;for(y=h+1;y<v;++y){if(O=c[y],O==="8"||O==="9")return!1;if(!T(O))return!0}return!0}function He(){var y,O,L;if(L=c[h],F(E(L.charCodeAt(0))||L===".","Numeric literal must start with a decimal digit or a decimal point"),O=h,y="",L!=="."){if(y=c[h++],L=c[h],y==="0"){if(L==="x"||L==="X")return++h,qe(O);if(T(L)&&tt())return Ve(O)}for(;E(c.charCodeAt(h));)y+=c[h++];L=c[h]}if(L==="."){for(y+=c[h++];E(c.charCodeAt(h));)y+=c[h++];L=c[h]}if(L==="e"||L==="E")if(y+=c[h++],L=c[h],(L==="+"||L==="-")&&(y+=c[h++]),E(c.charCodeAt(h)))for(;E(c.charCodeAt(h));)y+=c[h++];else W({},s.UnexpectedToken,"ILLEGAL");return H(c.charCodeAt(h))&&W({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseFloat(y),lineNumber:g,lineStart:b,start:O,end:h}}function je(){var y="",O,L,ne,pe,Oe,gt,St=!1,Kt,or;for(Kt=g,or=b,O=c[h],F(O==="'"||O==='"',"String literal must starts with a quote"),L=h,++h;h<v;)if(ne=c[h++],ne===O){O="";break}else if(ne==="\\")if(ne=c[h++],!ne||!x(ne.charCodeAt(0)))switch(ne){case"u":case"x":gt=h,Oe=le(ne),Oe?y+=Oe:(h=gt,y+=ne);break;case"n":y+=`
`;break;case"r":y+="\r";break;case"t":y+="	";break;case"b":y+="\b";break;case"f":y+="\f";break;case"v":y+="\v";break;default:T(ne)?(pe="01234567".indexOf(ne),pe!==0&&(St=!0),h<v&&T(c[h])&&(St=!0,pe=pe*8+"01234567".indexOf(c[h++]),"0123".indexOf(ne)>=0&&h<v&&T(c[h])&&(pe=pe*8+"01234567".indexOf(c[h++]))),y+=String.fromCharCode(pe)):y+=ne;break}else++g,ne==="\r"&&c[h]===`
`&&++h,b=h;else{if(x(ne.charCodeAt(0)))break;y+=ne}return O!==""&&W({},s.UnexpectedToken,"ILLEGAL"),{type:r.StringLiteral,value:y,octal:St,startLineNumber:Kt,startLineStart:or,lineNumber:g,lineStart:b,start:L,end:h}}function ze(y,O){var L;try{L=new RegExp(y,O)}catch{W({},s.InvalidRegExp)}return L}function mt(){var y,O,L,ne,pe;for(y=c[h],F(y==="/","Regular expression literal must start with a slash"),O=c[h++],L=!1,ne=!1;h<v;)if(y=c[h++],O+=y,y==="\\")y=c[h++],x(y.charCodeAt(0))&&W({},s.UnterminatedRegExp),O+=y;else if(x(y.charCodeAt(0)))W({},s.UnterminatedRegExp);else if(L)y==="]"&&(L=!1);else if(y==="/"){ne=!0;break}else y==="["&&(L=!0);return ne||W({},s.UnterminatedRegExp),pe=O.substr(1,O.length-2),{value:pe,literal:O}}function at(){var y,O,L,ne;for(O="",L="";h<v&&(y=c[h],!!re(y.charCodeAt(0)));)if(++h,y==="\\"&&h<v)if(y=c[h],y==="u"){if(++h,ne=h,y=le("u"),y)for(L+=y,O+="\\u";ne<h;++ne)O+=c[ne];else h=ne,L+="u",O+="\\u";ee({},s.UnexpectedToken,"ILLEGAL")}else O+="\\",ee({},s.UnexpectedToken,"ILLEGAL");else L+=y,O+=y;return{value:L,literal:O}}function ft(){var y,O,L,ne;return D=null,J(),y=h,O=mt(),L=at(),ne=ze(O.value,L.value),A.tokenize?{type:r.RegularExpression,value:ne,lineNumber:g,lineStart:b,start:y,end:h}:{literal:O.literal+L.literal,value:ne,start:y,end:h}}function st(){var y,O,L,ne;return J(),y=h,O={start:{line:g,column:h-b}},L=ft(),O.end={line:g,column:h-b},A.tokenize||(A.tokens.length>0&&(ne=A.tokens[A.tokens.length-1],ne.range[0]===y&&ne.type==="Punctuator"&&(ne.value==="/"||ne.value==="/=")&&A.tokens.pop()),A.tokens.push({type:"RegularExpression",value:L.literal,range:[y,h],loc:O})),L}function ot(y){return y.type===r.Identifier||y.type===r.Keyword||y.type===r.BooleanLiteral||y.type===r.NullLiteral}function Xe(){var y,O;if(y=A.tokens[A.tokens.length-1],!y)return st();if(y.type==="Punctuator"){if(y.value==="]")return Me();if(y.value===")")return O=A.tokens[A.openParenToken-1],O&&O.type==="Keyword"&&(O.value==="if"||O.value==="while"||O.value==="for"||O.value==="with")?st():Me();if(y.value==="}"){if(A.tokens[A.openCurlyToken-3]&&A.tokens[A.openCurlyToken-3].type==="Keyword"){if(O=A.tokens[A.openCurlyToken-4],!O)return Me()}else if(A.tokens[A.openCurlyToken-4]&&A.tokens[A.openCurlyToken-4].type==="Keyword"){if(O=A.tokens[A.openCurlyToken-5],!O)return st()}else return Me();return i.indexOf(O.value)>=0?Me():st()}return st()}return y.type==="Keyword"&&y.value!=="this"?st():Me()}function Je(){var y;return J(),h>=v?{type:r.EOF,lineNumber:g,lineStart:b,start:h,end:h}:(y=c.charCodeAt(h),H(y)?Ae():y===40||y===41||y===59?Me():y===39||y===34?je():y===46?E(c.charCodeAt(h+1))?He():Me():E(y)?He():A.tokenize&&y===47?Xe():Me())}function Ce(){var y,O,L;return J(),y={start:{line:g,column:h-b}},O=Je(),y.end={line:g,column:h-b},O.type!==r.EOF&&(L=c.slice(O.start,O.end),A.tokens.push({type:n[O.type],value:L,range:[O.start,O.end],loc:y})),O}function Pe(){var y;return y=D,h=y.end,g=y.lineNumber,b=y.lineStart,D=typeof A.tokens<"u"?Ce():Je(),h=y.end,g=y.lineNumber,b=y.lineStart,y}function Ot(){var y,O,L;y=h,O=g,L=b,D=typeof A.tokens<"u"?Ce():Je(),h=y,g=O,b=L}function Vt(y,O){this.line=y,this.column=O}function Ht(y,O,L,ne){this.start=new Vt(y,O),this.end=new Vt(L,ne)}p={name:"SyntaxTree",processComment:function(y){var O,L;if(!(y.type===u.Program&&y.body.length>0)){for(A.trailingComments.length>0?A.trailingComments[0].range[0]>=y.range[1]?(L=A.trailingComments,A.trailingComments=[]):A.trailingComments.length=0:A.bottomRightStack.length>0&&A.bottomRightStack[A.bottomRightStack.length-1].trailingComments&&A.bottomRightStack[A.bottomRightStack.length-1].trailingComments[0].range[0]>=y.range[1]&&(L=A.bottomRightStack[A.bottomRightStack.length-1].trailingComments,delete A.bottomRightStack[A.bottomRightStack.length-1].trailingComments);A.bottomRightStack.length>0&&A.bottomRightStack[A.bottomRightStack.length-1].range[0]>=y.range[0];)O=A.bottomRightStack.pop();O?O.leadingComments&&O.leadingComments[O.leadingComments.length-1].range[1]<=y.range[0]&&(y.leadingComments=O.leadingComments,delete O.leadingComments):A.leadingComments.length>0&&A.leadingComments[A.leadingComments.length-1].range[1]<=y.range[0]&&(y.leadingComments=A.leadingComments,A.leadingComments=[]),L&&(y.trailingComments=L),A.bottomRightStack.push(y)}},markEnd:function(y,O){return A.range&&(y.range=[O.start,h]),A.loc&&(y.loc=new Ht(O.startLineNumber===void 0?O.lineNumber:O.startLineNumber,O.start-(O.startLineStart===void 0?O.lineStart:O.startLineStart),g,h-b),this.postProcess(y)),A.attachComment&&this.processComment(y),y},postProcess:function(y){return A.source&&(y.loc.source=A.source),y},createArrayExpression:function(y){return{type:u.ArrayExpression,elements:y}},createAssignmentExpression:function(y,O,L){return{type:u.AssignmentExpression,operator:y,left:O,right:L}},createBinaryExpression:function(y,O,L){var ne=y==="||"||y==="&&"?u.LogicalExpression:u.BinaryExpression;return{type:ne,operator:y,left:O,right:L}},createBlockStatement:function(y){return{type:u.BlockStatement,body:y}},createBreakStatement:function(y){return{type:u.BreakStatement,label:y}},createCallExpression:function(y,O){return{type:u.CallExpression,callee:y,arguments:O}},createCatchClause:function(y,O){return{type:u.CatchClause,param:y,body:O}},createConditionalExpression:function(y,O,L){return{type:u.ConditionalExpression,test:y,consequent:O,alternate:L}},createContinueStatement:function(y){return{type:u.ContinueStatement,label:y}},createDebuggerStatement:function(){return{type:u.DebuggerStatement}},createDoWhileStatement:function(y,O){return{type:u.DoWhileStatement,body:y,test:O}},createEmptyStatement:function(){return{type:u.EmptyStatement}},createExpressionStatement:function(y){return{type:u.ExpressionStatement,expression:y}},createForStatement:function(y,O,L,ne){return{type:u.ForStatement,init:y,test:O,update:L,body:ne}},createForInStatement:function(y,O,L){return{type:u.ForInStatement,left:y,right:O,body:L,each:!1}},createFunctionDeclaration:function(y,O,L,ne){return{type:u.FunctionDeclaration,id:y,params:O,defaults:L,body:ne,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(y,O,L,ne){return{type:u.FunctionExpression,id:y,params:O,defaults:L,body:ne,rest:null,generator:!1,expression:!1}},createIdentifier:function(y){return{type:u.Identifier,name:y}},createIfStatement:function(y,O,L){return{type:u.IfStatement,test:y,consequent:O,alternate:L}},createLabeledStatement:function(y,O){return{type:u.LabeledStatement,label:y,body:O}},createLiteral:function(y){return{type:u.Literal,value:y.value,raw:c.slice(y.start,y.end)}},createMemberExpression:function(y,O,L){return{type:u.MemberExpression,computed:y==="[",object:O,property:L}},createNewExpression:function(y,O){return{type:u.NewExpression,callee:y,arguments:O}},createObjectExpression:function(y){return{type:u.ObjectExpression,properties:y}},createPostfixExpression:function(y,O){return{type:u.UpdateExpression,operator:y,argument:O,prefix:!1}},createProgram:function(y){return{type:u.Program,body:y}},createProperty:function(y,O,L){return{type:u.Property,key:O,value:L,kind:y}},createReturnStatement:function(y){return{type:u.ReturnStatement,argument:y}},createSequenceExpression:function(y){return{type:u.SequenceExpression,expressions:y}},createSwitchCase:function(y,O){return{type:u.SwitchCase,test:y,consequent:O}},createSwitchStatement:function(y,O){return{type:u.SwitchStatement,discriminant:y,cases:O}},createThisExpression:function(){return{type:u.ThisExpression}},createThrowStatement:function(y){return{type:u.ThrowStatement,argument:y}},createTryStatement:function(y,O,L,ne){return{type:u.TryStatement,block:y,guardedHandlers:O,handlers:L,finalizer:ne}},createUnaryExpression:function(y,O){return y==="++"||y==="--"?{type:u.UpdateExpression,operator:y,argument:O,prefix:!0}:{type:u.UnaryExpression,operator:y,argument:O,prefix:!0}},createVariableDeclaration:function(y,O){return{type:u.VariableDeclaration,declarations:y,kind:O}},createVariableDeclarator:function(y,O){return{type:u.VariableDeclarator,id:y,init:O}},createWhileStatement:function(y,O){return{type:u.WhileStatement,test:y,body:O}},createWithStatement:function(y,O){return{type:u.WithStatement,object:y,body:O}}};function j(){var y,O,L,ne;return y=h,O=g,L=b,J(),ne=g!==O,h=y,g=O,b=L,ne}function W(y,O){var L,ne=Array.prototype.slice.call(arguments,2),pe=O.replace(/%(\d)/g,function(Oe,gt){return F(gt<ne.length,"Message reference must be in range"),ne[gt]});throw typeof y.lineNumber=="number"?(L=new Error("Line "+y.lineNumber+": "+pe),L.index=y.start,L.lineNumber=y.lineNumber,L.column=y.start-b+1):(L=new Error("Line "+g+": "+pe),L.index=h,L.lineNumber=g,L.column=h-b+1),L.description=pe,L}function ee(){try{W.apply(null,arguments)}catch(y){if(A.errors)A.errors.push(y);else throw y}}function fe(y){if(y.type===r.EOF&&W(y,s.UnexpectedEOS),y.type===r.NumericLiteral&&W(y,s.UnexpectedNumber),y.type===r.StringLiteral&&W(y,s.UnexpectedString),y.type===r.Identifier&&W(y,s.UnexpectedIdentifier),y.type===r.Keyword){if(V(y.value))W(y,s.UnexpectedReserved);else if(d&&Y(y.value)){ee(y,s.StrictReservedWord);return}W(y,s.UnexpectedToken,y.value)}W(y,s.UnexpectedToken,y.value)}function ae(y){var O=Pe();(O.type!==r.Punctuator||O.value!==y)&&fe(O)}function he(y){var O=Pe();(O.type!==r.Keyword||O.value!==y)&&fe(O)}function se(y){return D.type===r.Punctuator&&D.value===y}function ce(y){return D.type===r.Keyword&&D.value===y}function we(){var y;return D.type!==r.Punctuator?!1:(y=D.value,y==="="||y==="*="||y==="/="||y==="%="||y==="+="||y==="-="||y==="<<="||y===">>="||y===">>>="||y==="&="||y==="^="||y==="|=")}function xe(){var y,O=h,L=g,ne=b,pe=D;if(c.charCodeAt(h)===59||se(";")){Pe();return}if(y=g,J(),g!==y){h=O,g=L,b=ne,D=pe;return}D.type!==r.EOF&&!se("}")&&fe(D)}function rt(y){return y.type===u.Identifier||y.type===u.MemberExpression}function Be(){var y=[],O;for(O=D,ae("[");!se("]");)se(",")?(Pe(),y.push(null)):(y.push(Br()),se("]")||ae(","));return Pe(),_.markEnd(_.createArrayExpression(y),O)}function zt(y,O){var L,ne,pe;return L=d,pe=D,ne=xi(),O&&d&&U(y[0].name)&&ee(O,s.StrictParamName),d=L,_.markEnd(_.createFunctionExpression(null,y,[],ne),pe)}function Nt(){var y,O;return O=D,y=Pe(),y.type===r.StringLiteral||y.type===r.NumericLiteral?(d&&y.octal&&ee(y,s.StrictOctalLiteral),_.markEnd(_.createLiteral(y),O)):_.markEnd(_.createIdentifier(y.value),O)}function rr(){var y,O,L,ne,pe,Oe;if(y=D,Oe=D,y.type===r.Identifier)return L=Nt(),y.value==="get"&&!se(":")?(O=Nt(),ae("("),ae(")"),ne=zt([]),_.markEnd(_.createProperty("get",O,ne),Oe)):y.value==="set"&&!se(":")?(O=Nt(),ae("("),y=D,y.type!==r.Identifier?(ae(")"),ee(y,s.UnexpectedToken,y.value),ne=zt([])):(pe=[pn()],ae(")"),ne=zt(pe,y)),_.markEnd(_.createProperty("set",O,ne),Oe)):(ae(":"),ne=Br(),_.markEnd(_.createProperty("init",L,ne),Oe));if(y.type===r.EOF||y.type===r.Punctuator)fe(y);else return O=Nt(),ae(":"),ne=Br(),_.markEnd(_.createProperty("init",O,ne),Oe)}function Zt(){var y=[],O,L,ne,pe,Oe={},gt=String,St;for(St=D,ae("{");!se("}");)O=rr(),O.key.type===u.Identifier?L=O.key.name:L=gt(O.key.value),pe=O.kind==="init"?o.Data:O.kind==="get"?o.Get:o.Set,ne="$"+L,Object.prototype.hasOwnProperty.call(Oe,ne)?(Oe[ne]===o.Data?d&&pe===o.Data?ee({},s.StrictDuplicateProperty):pe!==o.Data&&ee({},s.AccessorDataProperty):pe===o.Data?ee({},s.AccessorDataProperty):Oe[ne]&pe&&ee({},s.AccessorGetSet),Oe[ne]|=pe):Oe[ne]=pe,y.push(O),se("}")||ae(",");return ae("}"),_.markEnd(_.createObjectExpression(y),St)}function br(){var y;return ae("("),y=nr(),ae(")"),y}function Xt(){var y,O,L,ne;if(se("("))return br();if(se("["))return Be();if(se("{"))return Zt();if(y=D.type,ne=D,y===r.Identifier)L=_.createIdentifier(Pe().value);else if(y===r.StringLiteral||y===r.NumericLiteral)d&&D.octal&&ee(D,s.StrictOctalLiteral),L=_.createLiteral(Pe());else if(y===r.Keyword){if(ce("function"))return Ri();ce("this")?(Pe(),L=_.createThisExpression()):fe(Pe())}else y===r.BooleanLiteral?(O=Pe(),O.value=O.value==="true",L=_.createLiteral(O)):y===r.NullLiteral?(O=Pe(),O.value=null,L=_.createLiteral(O)):se("/")||se("/=")?(typeof A.tokens<"u"?L=_.createLiteral(st()):L=_.createLiteral(ft()),Ot()):fe(Pe());return _.markEnd(L,ne)}function yr(){var y=[];if(ae("("),!se(")"))for(;h<v&&(y.push(Br()),!se(")"));)ae(",");return ae(")"),y}function cr(){var y,O;return O=D,y=Pe(),ot(y)||fe(y),_.markEnd(_.createIdentifier(y.value),O)}function hr(){return ae("."),cr()}function dn(){var y;return ae("["),y=nr(),ae("]"),y}function pr(){var y,O,L;return L=D,he("new"),y=Zn(),O=se("(")?yr():[],_.markEnd(_.createNewExpression(y,O),L)}function Bn(){var y,O,L,ne,pe=C.allowIn;for(ne=D,C.allowIn=!0,y=ce("new")?pr():Xt();;){if(se("."))L=hr(),y=_.createMemberExpression(".",y,L);else if(se("("))O=yr(),y=_.createCallExpression(y,O);else if(se("["))L=dn(),y=_.createMemberExpression("[",y,L);else break;_.markEnd(y,ne)}return C.allowIn=pe,y}function Zn(){var y,O,L;for(F(C.allowIn,"callee of new expression always allow in keyword."),L=D,y=ce("new")?pr():Xt();se(".")||se("[");)se("[")?(O=dn(),y=_.createMemberExpression("[",y,O)):(O=hr(),y=_.createMemberExpression(".",y,O)),_.markEnd(y,L);return y}function Ln(){var y,O,L=D;return y=Bn(),D.type===r.Punctuator&&(se("++")||se("--"))&&!j()&&(d&&y.type===u.Identifier&&U(y.name)&&ee({},s.StrictLHSPostfix),rt(y)||ee({},s.InvalidLHSInAssignment),O=Pe(),y=_.markEnd(_.createPostfixExpression(O.value,y),L)),y}function Un(){var y,O,L;return D.type!==r.Punctuator&&D.type!==r.Keyword?O=Ln():se("++")||se("--")?(L=D,y=Pe(),O=Un(),d&&O.type===u.Identifier&&U(O.name)&&ee({},s.StrictLHSPrefix),rt(O)||ee({},s.InvalidLHSInAssignment),O=_.createUnaryExpression(y.value,O),O=_.markEnd(O,L)):se("+")||se("-")||se("~")||se("!")?(L=D,y=Pe(),O=Un(),O=_.createUnaryExpression(y.value,O),O=_.markEnd(O,L)):ce("delete")||ce("void")||ce("typeof")?(L=D,y=Pe(),O=Un(),O=_.createUnaryExpression(y.value,O),O=_.markEnd(O,L),d&&O.operator==="delete"&&O.argument.type===u.Identifier&&ee({},s.StrictDelete)):O=Ln(),O}function Ji(y,O){var L=0;if(y.type!==r.Punctuator&&y.type!==r.Keyword)return 0;switch(y.value){case"||":L=1;break;case"&&":L=2;break;case"|":L=3;break;case"^":L=4;break;case"&":L=5;break;case"==":case"!=":case"===":case"!==":L=6;break;case"<":case">":case"<=":case">=":case"instanceof":L=7;break;case"in":L=O?7:0;break;case"<<":case">>":case">>>":L=8;break;case"+":case"-":L=9;break;case"*":case"/":case"%":L=11;break}return L}function Ii(){var y,O,L,ne,pe,Oe,gt,St,Kt,or;if(y=D,Kt=Un(),ne=D,pe=Ji(ne,C.allowIn),pe===0)return Kt;for(ne.prec=pe,Pe(),O=[y,D],gt=Un(),Oe=[Kt,ne,gt];(pe=Ji(D,C.allowIn))>0;){for(;Oe.length>2&&pe<=Oe[Oe.length-2].prec;)gt=Oe.pop(),St=Oe.pop().value,Kt=Oe.pop(),L=_.createBinaryExpression(St,Kt,gt),O.pop(),y=O[O.length-1],_.markEnd(L,y),Oe.push(L);ne=Pe(),ne.prec=pe,Oe.push(ne),O.push(D),L=Un(),Oe.push(L)}for(or=Oe.length-1,L=Oe[or],O.pop();or>1;)L=_.createBinaryExpression(Oe[or-1].value,Oe[or-2],L),or-=2,y=O.pop(),_.markEnd(L,y);return L}function Su(){var y,O,L,ne,pe;return pe=D,y=Ii(),se("?")&&(Pe(),O=C.allowIn,C.allowIn=!0,L=Br(),C.allowIn=O,ae(":"),ne=Br(),y=_.createConditionalExpression(y,L,ne),_.markEnd(y,pe)),y}function Br(){var y,O,L,ne,pe;return y=D,pe=D,ne=O=Su(),we()&&(rt(O)||ee({},s.InvalidLHSInAssignment),d&&O.type===u.Identifier&&U(O.name)&&ee(y,s.StrictLHSAssignment),y=Pe(),L=Br(),ne=_.markEnd(_.createAssignmentExpression(y.value,O,L),pe)),ne}function nr(){var y,O=D;if(y=Br(),se(",")){for(y=_.createSequenceExpression([y]);h<v&&se(",");)Pe(),y.expressions.push(Br());_.markEnd(y,O)}return y}function Bu(){for(var y=[],O;h<v&&!(se("}")||(O=On(),typeof O>"u"));)y.push(O);return y}function ci(){var y,O;return O=D,ae("{"),y=Bu(),ae("}"),_.markEnd(_.createBlockStatement(y),O)}function pn(){var y,O;return O=D,y=Pe(),y.type!==r.Identifier&&fe(y),_.markEnd(_.createIdentifier(y.value),O)}function Xn(y){var O=null,L,ne;return ne=D,L=pn(),d&&U(L.name)&&ee({},s.StrictVarName),y==="const"?(ae("="),O=Br()):se("=")&&(Pe(),O=Br()),_.markEnd(_.createVariableDeclarator(L,O),ne)}function Ni(y){var O=[];do{if(O.push(Xn(y)),!se(","))break;Pe()}while(h<v);return O}function Ou(){var y;return he("var"),y=Ni(),xe(),_.createVariableDeclaration(y,"var")}function Mu(y){var O,L;return L=D,he(y),O=Ni(y),xe(),_.markEnd(_.createVariableDeclaration(O,y),L)}function Qi(){return ae(";"),_.createEmptyStatement()}function Pu(){var y=nr();return xe(),_.createExpressionStatement(y)}function Tu(){var y,O,L;return he("if"),ae("("),y=nr(),ae(")"),O=Wr(),ce("else")?(Pe(),L=Wr()):L=null,_.createIfStatement(y,O,L)}function ku(){var y,O,L;return he("do"),L=C.inIteration,C.inIteration=!0,y=Wr(),C.inIteration=L,he("while"),ae("("),O=nr(),ae(")"),se(";")&&Pe(),_.createDoWhileStatement(y,O)}function Iu(){var y,O,L;return he("while"),ae("("),y=nr(),ae(")"),L=C.inIteration,C.inIteration=!0,O=Wr(),C.inIteration=L,_.createWhileStatement(y,O)}function Nu(){var y,O,L;return L=D,y=Pe(),O=Ni(),_.markEnd(_.createVariableDeclaration(O,y.value),L)}function xu(){var y,O,L,ne,pe,Oe,gt,St=C.allowIn;return y=O=L=null,he("for"),ae("("),se(";")?Pe():(ce("var")||ce("let")?(C.allowIn=!1,y=Nu(),C.allowIn=St,y.declarations.length===1&&ce("in")&&(Pe(),ne=y,pe=nr(),y=null)):(C.allowIn=!1,y=nr(),C.allowIn=St,ce("in")&&(rt(y)||ee({},s.InvalidLHSInForIn),Pe(),ne=y,pe=nr(),y=null)),typeof ne>"u"&&ae(";")),typeof ne>"u"&&(se(";")||(O=nr()),ae(";"),se(")")||(L=nr())),ae(")"),gt=C.inIteration,C.inIteration=!0,Oe=Wr(),C.inIteration=gt,typeof ne>"u"?_.createForStatement(y,O,L,Oe):_.createForInStatement(ne,pe,Oe)}function hi(){var y=null,O;return he("continue"),c.charCodeAt(h)===59?(Pe(),C.inIteration||W({},s.IllegalContinue),_.createContinueStatement(null)):j()?(C.inIteration||W({},s.IllegalContinue),_.createContinueStatement(null)):(D.type===r.Identifier&&(y=pn(),O="$"+y.name,Object.prototype.hasOwnProperty.call(C.labelSet,O)||W({},s.UnknownLabel,y.name)),xe(),y===null&&!C.inIteration&&W({},s.IllegalContinue),_.createContinueStatement(y))}function Ru(){var y=null,O;return he("break"),c.charCodeAt(h)===59?(Pe(),C.inIteration||C.inSwitch||W({},s.IllegalBreak),_.createBreakStatement(null)):j()?(C.inIteration||C.inSwitch||W({},s.IllegalBreak),_.createBreakStatement(null)):(D.type===r.Identifier&&(y=pn(),O="$"+y.name,Object.prototype.hasOwnProperty.call(C.labelSet,O)||W({},s.UnknownLabel,y.name)),xe(),y===null&&!(C.inIteration||C.inSwitch)&&W({},s.IllegalBreak),_.createBreakStatement(y))}function di(){var y=null;return he("return"),C.inFunctionBody||ee({},s.IllegalReturn),c.charCodeAt(h)===32&&H(c.charCodeAt(h+1))?(y=nr(),xe(),_.createReturnStatement(y)):j()?_.createReturnStatement(null):(se(";")||!se("}")&&D.type!==r.EOF&&(y=nr()),xe(),_.createReturnStatement(y))}function Lu(){var y,O;return d&&(J(),ee({},s.StrictModeWith)),he("with"),ae("("),y=nr(),ae(")"),O=Wr(),_.createWithStatement(y,O)}function Uu(){var y,O=[],L,ne;for(ne=D,ce("default")?(Pe(),y=null):(he("case"),y=nr()),ae(":");h<v&&!(se("}")||ce("default")||ce("case"));)L=Wr(),O.push(L);return _.markEnd(_.createSwitchCase(y,O),ne)}function Vu(){var y,O,L,ne,pe;if(he("switch"),ae("("),y=nr(),ae(")"),ae("{"),O=[],se("}"))return Pe(),_.createSwitchStatement(y,O);for(ne=C.inSwitch,C.inSwitch=!0,pe=!1;h<v&&!se("}");)L=Uu(),L.test===null&&(pe&&W({},s.MultipleDefaultsInSwitch),pe=!0),O.push(L);return C.inSwitch=ne,ae("}"),_.createSwitchStatement(y,O)}function eu(){var y;return he("throw"),j()&&W({},s.NewlineAfterThrow),y=nr(),xe(),_.createThrowStatement(y)}function Vn(){var y,O,L;return L=D,he("catch"),ae("("),se(")")&&fe(D),y=pn(),d&&U(y.name)&&ee({},s.StrictCatchVariable),ae(")"),O=ci(),_.markEnd(_.createCatchClause(y,O),L)}function wr(){var y,O=[],L=null;return he("try"),y=ci(),ce("catch")&&O.push(Vn()),ce("finally")&&(Pe(),L=ci()),O.length===0&&!L&&W({},s.NoCatchOrFinally),_.createTryStatement(y,[],O,L)}function sr(){return he("debugger"),xe(),_.createDebuggerStatement()}function Wr(){var y=D.type,O,L,ne,pe;if(y===r.EOF&&fe(D),y===r.Punctuator&&D.value==="{")return ci();if(pe=D,y===r.Punctuator)switch(D.value){case";":return _.markEnd(Qi(),pe);case"(":return _.markEnd(Pu(),pe)}if(y===r.Keyword)switch(D.value){case"break":return _.markEnd(Ru(),pe);case"continue":return _.markEnd(hi(),pe);case"debugger":return _.markEnd(sr(),pe);case"do":return _.markEnd(ku(),pe);case"for":return _.markEnd(xu(),pe);case"function":return _.markEnd(jn(),pe);case"if":return _.markEnd(Tu(),pe);case"return":return _.markEnd(di(),pe);case"switch":return _.markEnd(Vu(),pe);case"throw":return _.markEnd(eu(),pe);case"try":return _.markEnd(wr(),pe);case"var":return _.markEnd(Ou(),pe);case"while":return _.markEnd(Iu(),pe);case"with":return _.markEnd(Lu(),pe)}return O=nr(),O.type===u.Identifier&&se(":")?(Pe(),ne="$"+O.name,Object.prototype.hasOwnProperty.call(C.labelSet,ne)&&W({},s.Redeclaration,"Label",O.name),C.labelSet[ne]=!0,L=Wr(),delete C.labelSet[ne],_.markEnd(_.createLabeledStatement(O,L),pe)):(xe(),_.markEnd(_.createExpressionStatement(O),pe))}function xi(){var y,O=[],L,ne,pe,Oe,gt,St,Kt,or;for(or=D,ae("{");h<v&&!(D.type!==r.StringLiteral||(L=D,y=On(),O.push(y),y.expression.type!==u.Literal));)ne=c.slice(L.start+1,L.end-1),ne==="use strict"?(d=!0,pe&&ee(pe,s.StrictOctalLiteral)):!pe&&L.octal&&(pe=L);for(Oe=C.labelSet,gt=C.inIteration,St=C.inSwitch,Kt=C.inFunctionBody,C.labelSet={},C.inIteration=!1,C.inSwitch=!1,C.inFunctionBody=!0;h<v&&!(se("}")||(y=On(),typeof y>"u"));)O.push(y);return ae("}"),C.labelSet=Oe,C.inIteration=gt,C.inSwitch=St,C.inFunctionBody=Kt,_.markEnd(_.createBlockStatement(O),or)}function Jn(y){var O,L=[],ne,pe,Oe,gt,St;if(ae("("),!se(")"))for(Oe={};h<v&&(ne=D,O=pn(),gt="$"+ne.value,d?(U(ne.value)&&(pe=ne,St=s.StrictParamName),Object.prototype.hasOwnProperty.call(Oe,gt)&&(pe=ne,St=s.StrictParamDupe)):y||(U(ne.value)?(y=ne,St=s.StrictParamName):Y(ne.value)?(y=ne,St=s.StrictReservedWord):Object.prototype.hasOwnProperty.call(Oe,gt)&&(y=ne,St=s.StrictParamDupe)),L.push(O),Oe[gt]=!0,!se(")"));)ae(",");return ae(")"),{params:L,stricted:pe,firstRestricted:y,message:St}}function jn(){var y,O=[],L,ne,pe,Oe,gt,St,Kt,or;return or=D,he("function"),ne=D,y=pn(),d?U(ne.value)&&ee(ne,s.StrictFunctionName):U(ne.value)?(gt=ne,St=s.StrictFunctionName):Y(ne.value)&&(gt=ne,St=s.StrictReservedWord),Oe=Jn(gt),O=Oe.params,pe=Oe.stricted,gt=Oe.firstRestricted,Oe.message&&(St=Oe.message),Kt=d,L=xi(),d&&gt&&W(gt,St),d&&pe&&ee(pe,St),d=Kt,_.markEnd(_.createFunctionDeclaration(y,O,[],L),or)}function Ri(){var y,O=null,L,ne,pe,Oe,gt=[],St,Kt,or;return or=D,he("function"),se("(")||(y=D,O=pn(),d?U(y.value)&&ee(y,s.StrictFunctionName):U(y.value)?(ne=y,pe=s.StrictFunctionName):Y(y.value)&&(ne=y,pe=s.StrictReservedWord)),Oe=Jn(ne),gt=Oe.params,L=Oe.stricted,ne=Oe.firstRestricted,Oe.message&&(pe=Oe.message),Kt=d,St=xi(),d&&ne&&W(ne,pe),d&&L&&ee(L,pe),d=Kt,_.markEnd(_.createFunctionExpression(O,gt,[],St),or)}function On(){if(D.type===r.Keyword)switch(D.value){case"const":case"let":return Mu(D.value);case"function":return jn();default:return Wr()}if(D.type!==r.EOF)return Wr()}function gn(){for(var y,O=[],L,ne,pe;h<v&&(L=D,!(L.type!==r.StringLiteral||(y=On(),O.push(y),y.expression.type!==u.Literal)));)ne=c.slice(L.start+1,L.end-1),ne==="use strict"?(d=!0,pe&&ee(pe,s.StrictOctalLiteral)):!pe&&L.octal&&(pe=L);for(;h<v&&(y=On(),!(typeof y>"u"));)O.push(y);return O}function so(){var y,O;return J(),Ot(),O=D,d=!1,y=gn(),_.markEnd(_.createProgram(y),O)}function ju(){var y,O,L,ne=[];for(y=0;y<A.tokens.length;++y)O=A.tokens[y],L={type:O.type,value:O.value},A.range&&(L.range=O.range),A.loc&&(L.loc=O.loc),ne.push(L);A.tokens=ne}function tu(y,O){var L,ne,pe;L=String,typeof y!="string"&&!(y instanceof String)&&(y=L(y)),_=p,c=y,h=0,g=c.length>0?1:0,b=0,v=c.length,D=null,C={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},A={},O=O||{},O.tokens=!0,A.tokens=[],A.tokenize=!0,A.openParenToken=-1,A.openCurlyToken=-1,A.range=typeof O.range=="boolean"&&O.range,A.loc=typeof O.loc=="boolean"&&O.loc,typeof O.comment=="boolean"&&O.comment&&(A.comments=[]),typeof O.tolerant=="boolean"&&O.tolerant&&(A.errors=[]);try{if(Ot(),D.type===r.EOF)return A.tokens;for(ne=Pe();D.type!==r.EOF;)try{ne=Pe()}catch(Oe){if(ne=D,A.errors){A.errors.push(Oe);break}else throw Oe}ju(),pe=A.tokens,typeof A.comments<"u"&&(pe.comments=A.comments),typeof A.errors<"u"&&(pe.errors=A.errors)}catch(Oe){throw Oe}finally{A={}}return pe}function va(y,O){var L,ne;ne=String,typeof y!="string"&&!(y instanceof String)&&(y=ne(y)),_=p,c=y,h=0,g=c.length>0?1:0,b=0,v=c.length,D=null,C={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},A={},typeof O<"u"&&(A.range=typeof O.range=="boolean"&&O.range,A.loc=typeof O.loc=="boolean"&&O.loc,A.attachComment=typeof O.attachComment=="boolean"&&O.attachComment,A.loc&&O.source!==null&&O.source!==void 0&&(A.source=ne(O.source)),typeof O.tokens=="boolean"&&O.tokens&&(A.tokens=[]),typeof O.comment=="boolean"&&O.comment&&(A.comments=[]),typeof O.tolerant=="boolean"&&O.tolerant&&(A.errors=[]),A.attachComment&&(A.range=!0,A.comments=[],A.bottomRightStack=[],A.trailingComments=[],A.leadingComments=[]));try{L=so(),typeof A.comments<"u"&&(L.comments=A.comments),typeof A.tokens<"u"&&(ju(),L.tokens=A.tokens),typeof A.errors<"u"&&(L.errors=A.errors)}catch(pe){throw pe}finally{A={}}return L}e.version="1.2.5",e.tokenize=tu,e.parse=va,e.Syntax=function(){var y,O={};typeof Object.create=="function"&&(O=Object.create(null));for(y in u)u.hasOwnProperty(y)&&(O[y]=u[y]);return typeof Object.freeze=="function"&&Object.freeze(O),O}()})})(l1);var JC=l1,z0=a1,QC=0;function eF(t,e,r){this.name=t,this.lvalue=e,this.rvalue=r,this.count=0}function tF(t,e,r,n){this.body=t,this.args=e,this.thisVars=r,this.localVars=n}function rF(t){if(t==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?t in window:typeof dr<"u"?t in dr:typeof self<"u"?t in self:!1}function nF(t){for(var e=t.body[0].expression.callee.params,r=new Array(e.length),n=0;n<e.length;++n)r[n]=e[n].name;return r}function iF(t){for(var e=["(",t,")()"].join(""),r=JC.parse(e,{range:!0}),n="_inline_"+QC+++"_",i=nF(r),u=new Array(i.length),o=0;o<i.length;++o)u[o]=new eF([n,"arg",o,"_"].join(""),!1,!1);for(var s=new Array(e.length),o=0,f=e.length;o<f;++o)s[o]=e.charAt(o);var p=[],c=[];function d(F){var E=n+F.replace(/\_/g,"__");return p.push(E),E}function h(F){var E="this_"+F.replace(/\_/g,"__");return c.push(E),E}function g(F,E){for(var S=F.range[0],T=F.range[1],P=S+1;P<T;++P)s[P]="";s[S]=E}function b(F){return"'"+F.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function v(F){return s.slice(F.range[0],F.range[1]).join("")}var _=1,D=2;function C(F){return F.parent.type==="AssignmentExpression"&&F.parent.left===F?F.parent.operator==="="?_:_|D:F.parent.type==="UpdateExpression"?_|D:D}(function F(E,S){if(E.parent=S,E.type==="MemberExpression")E.computed?(F(E.object,E),F(E.property,E)):E.object.type==="ThisExpression"?g(E,h(E.property.name)):F(E.object,E);else{if(E.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(E.type==="Identifier"){var T=E.name,P=i.indexOf(T);if(P>=0){var x=u[P],H=C(E);H&_&&(x.lvalue=!0),H&D&&(x.rvalue=!0),++x.count,g(E,x.name)}else rF(T)||g(E,d(T))}else if(E.type==="Literal")typeof E.value=="string"&&g(E,b(E.value));else{if(E.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var re=Object.keys(E),V=0,Y=re.length;V<Y;++V)if(re[V]!=="parent"){var U=E[re[V]];if(U)if(U instanceof Array)for(var K=0;K<U.length;++K)U[K]&&typeof U[K].type=="string"&&F(U[K],E);else typeof U.type=="string"&&F(U,E)}}}})(r.body[0].expression.callee.body,void 0),z0(p),z0(c);var A=new tF(v(r.body[0].expression.callee.body),u,c,p);return A}var uF=iF,wl=uF,aF=Nf,is=["args","body"],sF=["pre","post","printCode","funcName","blockSize"];function oF(t){for(var e in t)is.indexOf(e)<0&&sF.indexOf(e)<0&&console.warn("cwise: Unknown argument '"+e+"' passed to expression compiler");for(var r=0;r<is.length;++r)if(!t[is[r]])throw new Error("cwise: Missing argument: "+is[r]);return aF({args:t.args,pre:wl(t.pre||function(){}),body:wl(t.body),post:wl(t.post||function(){}),debug:!!t.printCode,funcName:t.funcName||t.body.name||"cwise",blockSize:t.blockSize||64})}var eo=oF,lF=XC,fF=eo,cF=fF({args:["array","scalar","index"],body:function(e,r,n){var i=r,u;for(u=0;u<n.length-1;++u)i=i[n[u]];i[n[n.length-1]]=e}}),hF=function(e){var r=lF(e.shape);return cF(e,r),r},Fs={},dF={get exports(){return Fs},set exports(t){Fs=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(o,s){for(var f=new Float64Array(o*s),p=0;p<f.length;p++)f[p]=u()*1e-4;return(0,n.default)(f,[o,s])};var r=Fu,n=i(r);function i(o){return o&&o.__esModule?o:{default:o}}function u(){var o=2*Math.random()-1,s=2*Math.random()-1,f=o*o+s*s;return f==0||f>1?u():o*Math.sqrt(-2*Math.log(f)/f)}t.exports=e.default})(dF,Fs);var fa={},pF={get exports(){return fa},set exports(t){fa=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(d,h){var g=d.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]);switch(h){case"euclidean":for(var v=0;v<g;v++)for(var _=v+1;_<g;_++){var D=s(d.pick(v,null),d.pick(_,null));b.set(v,_,D),b.set(_,v,D)}break;case"manhattan":for(var v=0;v<g;v++)for(var _=v+1;_<g;_++){var D=f(d.pick(v,null),d.pick(_,null));b.set(v,_,D),b.set(_,v,D)}break;case"jaccard":for(var v=0;v<g;v++)for(var _=v+1;_<g;_++){var D=p(d.pick(v,null),d.pick(_,null));b.set(v,_,D),b.set(_,v,D)}break;case"dice":for(var v=0;v<g;v++)for(var _=v+1;_<g;_++){var D=c(d.pick(v,null),d.pick(_,null));b.set(v,_,D),b.set(_,v,D)}break}return b};var r=Fu,n=o(r),i=eo,u=o(i);function o(d){return d&&d.__esModule?d:{default:d}}var s=(0,u.default)({args:["array","array"],pre:function(h,g){this.sum=0},body:function(h,g){var b=h-g;this.sum+=b*b},post:function(h,g){return Math.sqrt(this.sum)}}),f=(0,u.default)({args:["array","array"],pre:function(h,g){this.sum=0},body:function(h,g){this.sum+=Math.abs(h-g)},post:function(h,g){return this.sum}}),p=(0,u.default)({args:["array","array"],pre:function(h,g){this.tf=0,this.tt=0},body:function(h,g){var b=Math.round(h),v=Math.round(g);this.tf+=+(b!=v),this.tt+=+(b==1&&v==1)},post:function(h,g){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),c=(0,u.default)({args:["array","array"],pre:function(h,g){this.tf=0,this.tt=0},body:function(h,g){var b=Math.round(h),v=Math.round(g);this.tf+=+(b!=v),this.tt+=+(b==1&&v==1)},post:function(h,g){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});t.exports=e.default})(pF,fa);var Ss={},gF={get exports(){return Ss},set exports(t){Ss=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(c,d){for(var h=100,g=c.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]),v=(0,n.default)(new Float64Array(g*g),[g,g]),_=void 0,D=void 0,C=1/0,A=Math.log(d),F=void 0,E=void 0,S=void 0,T=void 0,P=0;P<g;P++){_=1,D=-1/0,C=1/0;for(var x=0;x<h;x++){for(var H=0;H<g;H++)b.set(P,H,Math.exp(-c.get(P,H)*_));b.set(P,P,0),S=0;for(var H=0;H<g;H++)S+=b.get(P,H);S==0&&(S=s),T=0;for(var H=0;H<g;H++)b.set(P,H,b.get(P,H)/S),T+=c.get(P,H)*b.get(P,H);if(E=Math.log(S)+_*T,F=E-A,Math.abs(F)<=p)break;F>0?(D=_,C==1/0?_=_*2:_=(_+C)/2):(C=_,D==-1/0?_=_/2:_=(_+D)/2)}}u.default.add(v,b,b.transpose(1,0));var re=Math.max(u.default.sum(v),f);return u.default.divseq(v,re),u.default.maxseq(v,f),v};var r=Fu,n=o(r),i=Qs,u=o(i);function o(c){return c&&c.__esModule?c:{default:c}}var s=1e-7,f=Number.EPSILON||2220446049250313e-31,p=1e-5;t.exports=e.default})(gF,Ss);var Bs={},vF={get exports(){return Bs},set exports(t){Bs=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(g,b,v){var _=g.shape[0],D=g.shape[1],C=(0,n.default)(new Float64Array(_*_),[_,_]),A=(0,p.default)(g,"euclidean");h(A);var F=(v+1)/-2;u.default.powseq(u.default.divseq(u.default.addseq(A,1),v),F);for(var E=0;E<_;E++)A.set(E,E,0);var S=Math.max(u.default.sum(A),d);u.default.divs(C,A,S),u.default.maxseq(C,d);var T=(0,n.default)(new Float64Array(_*_),[_,_]),P=(0,n.default)(new Float64Array(_*_),[_,_]);u.default.div(T,b,C),u.default.logeq(T),u.default.assign(P,b);var x=u.default.sum(u.default.muleq(T,P)),H=(0,n.default)(new Float64Array(g.size),g.shape),re=(0,n.default)(new Float64Array(_*_),[_,_]);u.default.sub(re,b,C),u.default.muleq(re,A);for(var E=0;E<_;E++)for(var V=0;V<D;V++){var Y=(0,n.default)(new Float64Array(g.shape[0]),[g.shape[0]]);u.default.assign(Y,g.pick(null,V)),u.default.addseq(u.default.negeq(Y),g.get(E,V)),u.default.muleq(Y,re.pick(E,null)),H.set(E,V,u.default.sum(Y))}var U=2*(v+1)/v;return u.default.mulseq(H,U),[x,H]};var r=Fu,n=c(r),i=Qs,u=c(i),o=eo,s=c(o),f=fa,p=c(f);function c(g){return g&&g.__esModule?g:{default:g}}var d=Number.EPSILON||2220446049250313e-31,h=(0,s.default)({args:["array"],body:function(b){}});t.exports=e.default})(vF,Bs);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function Y(U,K){var q=[],te=!0,Q=!1,J=void 0;try{for(var le=U[Symbol.iterator](),_e;!(te=(_e=le.next()).done)&&(q.push(_e.value),!(K&&q.length===K));te=!0);}catch(Fe){Q=!0,J=Fe}finally{try{!te&&le.return&&le.return()}finally{if(Q)throw J}}return q}return function(U,K){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return Y(U,K);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function Y(U,K){for(var q=0;q<K.length;q++){var te=K[q];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(U,te.key,te)}}return function(U,K,q){return K&&Y(U.prototype,K),q&&Y(U,q),U}}(),i=Es,u=Fu,o=T(u),s=Qs,f=T(s),p=$C,c=T(p),d=hF,h=T(d),g=eo,b=T(g),v=Fs,_=T(v),D=fa,C=T(D),A=Ss,F=T(A),E=Bs,S=T(E);function T(Y){return Y&&Y.__esModule?Y:{default:Y}}function P(Y){if(Array.isArray(Y)){for(var U=0,K=Array(Y.length);U<Y.length;U++)K[U]=Y[U];return K}else return Array.from(Y)}function x(Y,U){if(!(Y instanceof U))throw new TypeError("Cannot call a class as a function")}function H(Y,U){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:Y}function re(Y,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);Y.prototype=Object.create(U&&U.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,U):Y.__proto__=U)}var V=function(Y){re(U,Y);function U(K){x(this,U);var q=H(this,Object.getPrototypeOf(U).call(this));return K=K||{},q.dim=K.dim||2,q.perplexity=K.perplexity||30,q.earlyExaggeration=K.earlyExaggeration||4,q.learningRate=K.learningRate||1e3,q.nIter=K.nIter||1e3,q.metric=K.metric||"euclidean",q.barneshut=K.barneshut||!1,q.inputData=null,q.outputEmbedding=null,q}return n(U,[{key:"init",value:function(q){q=q||{};var te=q.data||[],Q=q.type||"dense";if(Q==="dense")this.inputData=(0,c.default)(te);else if(Q==="sparse"){for(var J=[],le=1,_e=function(mt){var at=Math.max.apply(null,te.map(function(ft){return ft[mt]}))+1;J.push(at),le*=at},Fe=0;Fe<te[0].length;Fe++)_e(Fe);this.inputData=(0,o.default)(new Float64Array(le),J);var Ae=!0,Me=!1,qe=void 0;try{for(var Ve=te[Symbol.iterator](),tt;!(Ae=(tt=Ve.next()).done);Ae=!0){var He,je=tt.value;(He=this.inputData).set.apply(He,P(je).concat([1]))}}catch(ze){Me=!0,qe=ze}finally{try{!Ae&&Ve.return&&Ve.return()}finally{if(Me)throw qe}}}else throw new Error("input data type must be dense or sparse");this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,C.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,F.default)(this.distances,this.perplexity);var q=Number.MAX_VALUE,te=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),f.default.mulseq(this.P,this.earlyExaggeration);var Q=this._gradDesc(te,50,.5,0,0),J=r(Q,2);q=J[0],te=J[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var le=this._gradDesc(te+1,100,.8,0,0),_e=r(le,2);q=_e[0],te=_e[1],this.emit("progressStatus","Final optimization with momentum 0.8"),f.default.divseq(this.P,this.earlyExaggeration);var Fe=this._gradDesc(te+1,this.nIter,.8,1e-6,1e-6),Ae=r(Fe,2);return q=Ae[0],te=Ae[1],this.emit("progressStatus","Optimization end"),[q,te]}},{key:"rerun",value:function(){this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim);var q=this.run(),te=r(q,2),Q=te[0],J=te[1];return[Q,J]}},{key:"getOutput",value:function(){return(0,h.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var q=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),te=(0,o.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),Q=0;Q<this.outputEmbedding.shape[1];Q++){var J=f.default.sup(f.default.abs(te,this.outputEmbedding.pick(null,Q)));f.default.divs(q.pick(null,Q),this.outputEmbedding.pick(null,Q),J)}return(0,h.default)(q)}},{key:"_gradDesc",value:function(q,te,Q){for(var J=arguments.length<=3||arguments[3]===void 0?1e-6:arguments[3],le=arguments.length<=4||arguments[4]===void 0?1e-6:arguments[4],_e=30,Fe=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),Ae=new Float64Array(this.outputEmbedding.size),Me=0;Me<Ae.length;Me++)Ae[Me]=1;var qe=(0,o.default)(Ae,this.outputEmbedding.shape),Ve=Number.MAX_VALUE,tt=Number.MAX_VALUE,He=0,je=(0,b.default)({args:["array"],pre:function(Ot){this.sum=0},body:function(Ot){this.sum+=Ot*Ot},post:function(Ot){return Math.sqrt(this.sum)}}),ze=(0,b.default)({args:["array","array","array"],body:function(Ot,Vt,Ht){}}),mt=void 0;for(mt=q;mt<te;mt++){var at=(0,S.default)(this.outputEmbedding,this.P,this.alpha),ft=r(at,2),st=ft[0],ot=ft[1],Xe=Math.abs(st-Ve);Ve=st;var Je=je(ot);if(this.emit("progressIter",[mt,Ve,Je]),Ve<tt)tt=Ve,He=mt;else if(mt-He>_e)break;if(J>=Je||le>=Xe)break;ze(qe,Fe,ot),f.default.muleq(ot,qe);var Ce=(0,o.default)(new Float64Array(ot.size),ot.shape);f.default.muls(Ce,ot,this.learningRate),f.default.mulseq(Fe,Q),f.default.subeq(Fe,Ce),f.default.addeq(this.outputEmbedding,Fe),this.emit("progressData",this.getOutputScaled())}return[Ve,mt]}}]),U}(i.EventEmitter);e.default=V,t.exports=e.default})(cC,As);const mF=Sf(As);var of={},_F={get exports(){return of},set exports(t){of=t}},Os={},DF={get exports(){return Os},set exports(t){Os=t}},W0;function bF(){return W0||(W0=1,function(t){function e(r,n,i,u){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,i,u)}e.prototype.run=function(r,n,i,u){this._init(r,n,i,u);for(var o=0;o<this._datasetLength;o++)if(this._visited[o]!==1){this._visited[o]=1;var s=this._regionQuery(o);if(s.length<this.minPts)this.noise.push(o);else{var f=this.clusters.length;this.clusters.push([]),this._addToCluster(o,f),this._expandCluster(f,s)}}return this.clusters},e.prototype._init=function(r,n,i,u){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),i&&(this.minPts=i),u&&(this.distance=u)},e.prototype._expandCluster=function(r,n){for(var i=0;i<n.length;i++){var u=n[i];if(this._visited[u]!==1){this._visited[u]=1;var o=this._regionQuery(u);o.length>=this.minPts&&(n=this._mergeArrays(n,o))}this._assigned[u]!==1&&this._addToCluster(u,r)}},e.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1},e.prototype._regionQuery=function(r){for(var n=[],i=0;i<this._datasetLength;i++){var u=this.distance(this.dataset[r],this.dataset[i]);u<this.epsilon&&n.push(i)}return n},e.prototype._mergeArrays=function(r,n){for(var i=n.length,u=0;u<i;u++){var o=n[u];r.indexOf(o)<0&&r.push(o)}return r},e.prototype._euclideanDistance=function(r,n){for(var i=0,u=Math.min(r.length,n.length);u--;)i+=(r[u]-n[u])*(r[u]-n[u]);return Math.sqrt(i)},t.exports&&(t.exports=e)}(DF)),Os}var Ms={},yF={get exports(){return Ms},set exports(t){Ms=t}},H0;function wF(){return H0||(H0=1,function(t){function e(r,n,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,i)}e.prototype.init=function(r,n,i){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof i<"u"&&(this.distance=i)},e.prototype.run=function(r,n){this.init(r,n);for(var i=this.dataset.length,u=0;u<this.k;u++)this.centroids[u]=this.randomCentroid();for(var o=!0;o;){o=this.assign();for(var s=0;s<this.k;s++){for(var f=new Array(h),p=0,c=0;c<h;c++)f[c]=0;for(var d=0;d<i;d++){var h=this.dataset[d].length;if(s===this.assignments[d]){for(var c=0;c<h;c++)f[c]+=this.dataset[d][c];p++}}if(p>0){for(var c=0;c<h;c++)f[c]/=p;this.centroids[s]=f}else this.centroids[s]=this.randomCentroid(),o=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,i;do i=Math.round(Math.random()*r),n=this.dataset[i];while(this.centroids.indexOf(n)>=0);return n},e.prototype.assign=function(){for(var r=!1,n=this.dataset.length,i,u=0;u<n;u++)i=this.argmin(this.dataset[u],this.centroids,this.distance),i!=this.assignments[u]&&(this.assignments[u]=i,r=!0);return r},e.prototype.getClusters=function(){for(var r=new Array(this.k),n,i=0;i<this.assignments.length;i++)n=this.assignments[i],typeof r[n]>"u"&&(r[n]=[]),r[n].push(i);return r},e.prototype.argmin=function(r,n,i){for(var u=Number.MAX_VALUE,o=0,s=n.length,f,p=0;p<s;p++)f=i(r,n[p]),f<u&&(u=f,o=p);return o},e.prototype.distance=function(r,n){for(var i=0,u=Math.min(r.length,n.length);u--;){var o=r[u]-n[u];i+=o*o}return Math.sqrt(i)},t.exports&&(t.exports=e)}(yF)),Ms}var Ps={},AF={get exports(){return Ps},set exports(t){Ps=t}},Ts={},EF={get exports(){return Ts},set exports(t){Ts=t}},G0;function f1(){return G0||(G0=1,function(t){function e(r,n,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,i)}e.prototype.insert=function(r,n){for(var i=this._queue.length,u=i;u--;){var o=this._priorities[u];this._sorting==="desc"?n>o&&(i=u):n<o&&(i=u)}this._insertAt(r,n,i)},e.prototype.remove=function(r){for(var n=this._queue.length;n--;){var i=this._queue[n];if(r===i){this._queue.splice(n,1),this._priorities.splice(n,1);break}}},e.prototype.forEach=function(r){this._queue.forEach(r)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(r){return this._priorities[r]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,i=this._queue.length;n<i;n++)r.push([this._queue[n],this._priorities[n]]);return r},e.prototype._init=function(r,n,i){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var u=0;u<r.length;u++)this.insert(r[u],n[u])}i&&(this._sorting=i)},e.prototype._insertAt=function(r,n,i){this._queue.length===i?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(i,0,r),this._priorities.splice(i,0,n))},t.exports&&(t.exports=e)}(EF)),Ts}var K0;function CF(){return K0||(K0=1,function(t){if(t.exports)var e=f1();function r(n,i,u,o){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,i,u,o)}r.prototype.run=function(n,i,u,o){this._init(n,i,u,o);for(var s=0,f=this.dataset.length;s<f;s++)if(this._processed[s]!==1){this._processed[s]=1,this.clusters.push([s]);var p=this.clusters.length-1;this._orderedList.push(s);var c=new e(null,null,"asc"),d=this._regionQuery(s);this._distanceToCore(s)!==void 0&&(this._updateQueue(s,d,c),this._expandCluster(p,c))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var n=[],i=0,u=this._orderedList.length;i<u;i++){var o=this._orderedList[i],s=this._reachability[o];n.push([o,s])}return n},r.prototype._init=function(n,i,u,o){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}i&&(this.epsilon=i),u&&(this.minPts=u),o&&(this.distance=o)},r.prototype._updateQueue=function(n,i,u){var o=this;this._coreDistance=this._distanceToCore(n),i.forEach(function(s){if(o._processed[s]===void 0){var f=o.distance(o.dataset[n],o.dataset[s]),p=Math.max(o._coreDistance,f);o._reachability[s]===void 0?(o._reachability[s]=p,u.insert(s,p)):p<o._reachability[s]&&(o._reachability[s]=p,u.remove(s),u.insert(s,p))}})},r.prototype._expandCluster=function(n,i){for(var u=i.getElements(),o=0,s=u.length;o<s;o++){var f=u[o];if(this._processed[f]===void 0){var p=this._regionQuery(f);this._processed[f]=1,this.clusters[n].push(f),this._orderedList.push(f),this._distanceToCore(f)!==void 0&&(this._updateQueue(f,p,i),this._expandCluster(n,i))}}},r.prototype._distanceToCore=function(n){for(var i=this.epsilon,u=0;u<i;u++){var o=this._regionQuery(n,u);if(o.length>=this.minPts)return u}},r.prototype._regionQuery=function(n,i){i=i||this.epsilon;for(var u=[],o=0,s=this.dataset.length;o<s;o++)this.distance(this.dataset[n],this.dataset[o])<i&&u.push(o);return u},r.prototype._euclideanDistance=function(n,i){for(var u=0,o=Math.min(n.length,i.length);o--;)u+=(n[o]-i[o])*(n[o]-i[o]);return Math.sqrt(u)},t.exports&&(t.exports=r)}(AF)),Ps}(function(t){t.exports&&(t.exports={DBSCAN:bF(),KMEANS:wF(),OPTICS:CF(),PriorityQueue:f1()})})(_F);var lf={},FF={get exports(){return lf},set exports(t){lf=t}};(function(t){var e=parseInt(Number.MAX_SAFE_INTEGER/2)||4503599627370496,r=0;function n(){this.C=null,this.row_covered=[],this.col_covered=[],this.n=0,this.Z0_r=0,this.Z0_c=0,this.marked=null,this.path=null}n.prototype.pad_matrix=function(s,f){f=f||r;var p=0,c=s.length,d;for(d=0;d<c;++d)s[d].length>p&&(p=s[d].length);c=p>c?p:c;var h=[];for(d=0;d<c;++d){for(var g=s[d]||[],b=g.slice();c>b.length;)b.push(f);h.push(b)}return h},n.prototype.compute=function(s,f){f=f||{},f.padValue=f.padValue||r,this.C=this.pad_matrix(s,f.padValue),this.n=this.C.length,this.original_length=s.length,this.original_width=s[0].length;for(var p=[];p.length<this.n;)p.push(!1);this.row_covered=p.slice(),this.col_covered=p.slice(),this.Z0_r=0,this.Z0_c=0,this.path=this.__make_matrix(this.n*2,0),this.marked=this.__make_matrix(this.n,0);for(var c=1,d={1:this.__step1,2:this.__step2,3:this.__step3,4:this.__step4,5:this.__step5,6:this.__step6};;){var h=d[c];if(!h)break;c=h.apply(this)}for(var g=[],b=0;b<this.original_length;++b)for(var v=0;v<this.original_width;++v)this.marked[b][v]==1&&g.push([b,v]);return g},n.prototype.__make_matrix=function(s,f){for(var p=[],c=0;c<s;++c){p[c]=[];for(var d=0;d<s;++d)p[c][d]=f}return p},n.prototype.__step1=function(){for(var s=0;s<this.n;++s)for(var f=Math.min.apply(Math,this.C[s]),p=0;p<this.n;++p)this.C[s][p]-=f;return 2},n.prototype.__step2=function(){for(var s=0;s<this.n;++s)for(var f=0;f<this.n;++f)if(this.C[s][f]===0&&!this.col_covered[f]&&!this.row_covered[s]){this.marked[s][f]=1,this.col_covered[f]=!0,this.row_covered[s]=!0;break}return this.__clear_covers(),3},n.prototype.__step3=function(){for(var s=0,f=0;f<this.n;++f)for(var p=0;p<this.n;++p)this.marked[f][p]==1&&this.col_covered[p]==!1&&(this.col_covered[p]=!0,++s);return s>=this.n?7:4},n.prototype.__step4=function(){for(var s=!1,f=-1,p=-1,c=-1;!s;){var d=this.__find_a_zero();if(f=d[0],p=d[1],f<0)return 6;if(this.marked[f][p]=2,c=this.__find_star_in_row(f),c>=0)p=c,this.row_covered[f]=!0,this.col_covered[p]=!1;else return this.Z0_r=f,this.Z0_c=p,5}},n.prototype.__step5=function(){var s=0;this.path[s][0]=this.Z0_r,this.path[s][1]=this.Z0_c;for(var f=!1;!f;){var p=this.__find_star_in_col(this.path[s][1]);if(p>=0?(s++,this.path[s][0]=p,this.path[s][1]=this.path[s-1][1]):f=!0,!f){var c=this.__find_prime_in_row(this.path[s][0]);s++,this.path[s][0]=this.path[s-1][0],this.path[s][1]=c}}return this.__convert_path(this.path,s),this.__clear_covers(),this.__erase_primes(),3},n.prototype.__step6=function(){for(var s=this.__find_smallest(),f=0;f<this.n;++f)for(var p=0;p<this.n;++p)this.row_covered[f]&&(this.C[f][p]+=s),this.col_covered[p]||(this.C[f][p]-=s);return 4},n.prototype.__find_smallest=function(){for(var s=e,f=0;f<this.n;++f)for(var p=0;p<this.n;++p)!this.row_covered[f]&&!this.col_covered[p]&&s>this.C[f][p]&&(s=this.C[f][p]);return s},n.prototype.__find_a_zero=function(){for(var s=0;s<this.n;++s)for(var f=0;f<this.n;++f)if(this.C[s][f]===0&&!this.row_covered[s]&&!this.col_covered[f])return[s,f];return[-1,-1]},n.prototype.__find_star_in_row=function(s){for(var f=0;f<this.n;++f)if(this.marked[s][f]==1)return f;return-1},n.prototype.__find_star_in_col=function(s){for(var f=0;f<this.n;++f)if(this.marked[f][s]==1)return f;return-1},n.prototype.__find_prime_in_row=function(s){for(var f=0;f<this.n;++f)if(this.marked[s][f]==2)return f;return-1},n.prototype.__convert_path=function(s,f){for(var p=0;p<=f;++p)this.marked[s[p][0]][s[p][1]]=this.marked[s[p][0]][s[p][1]]==1?0:1},n.prototype.__clear_covers=function(){for(var s=0;s<this.n;++s)this.row_covered[s]=!1,this.col_covered[s]=!1},n.prototype.__erase_primes=function(){for(var s=0;s<this.n;++s)for(var f=0;f<this.n;++f)this.marked[s][f]==2&&(this.marked[s][f]=0)};function i(s,f){var p,c;if(!f){var d=-1/0;for(p=0;p<s.length;++p)for(c=0;c<s[p].length;++c)s[p][c]>d&&(d=s[p][c]);f=function(b){return d-b}}var h=[];for(p=0;p<s.length;++p){var g=s[p];for(h[p]=[],c=0;c<g.length;++c)h[p][c]=f(s[p][c])}return h}function u(s){var f=[],p,c;for(p=0;p<s.length;++p)for(c=0;c<s[p].length;++c){var d=String(s[p][c]).length;(!f[c]||d>=f[c])&&(f[c]=d)}var h="";for(p=0;p<s.length;++p){for(c=0;c<s[p].length;++c){for(var g=String(s[p][c]);g.length<f[c];)g=" "+g;h+=g,c!=s[p].length-1&&(h+=" ")}p!=s[p].length-1&&(h+=`
`)}return h}function o(s,f){var p=new n;return p.compute(s,f)}o.version="1.2.2",o.format_matrix=u,o.make_cost_matrix=i,o.Munkres=n,t.exports&&(t.exports=o)})(FF);const SF=lf;function $0(t,e,r){const n=t.slice();return n[31]=e[r][0],n[32]=e[r][1],n}function Y0(t){let e=[],r=new Map,n,i,u,o=Object.entries(t[4].weightedPrompts);const s=f=>f[31];for(let f=0;f<o.length;f+=1){let p=$0(t,o,f),c=s(p);r.set(c,e[f]=X0(c,p))}return i=new Cu({props:{xy:t[7],radius:t[1],color:"rgba(136,157,191, 1)",handleMouseDown:t[19]}}),{c(){for(let f=0;f<e.length;f+=1)e[f].c();n=Tt(),Ke(i.$$.fragment)},l(f){for(let p=0;p<e.length;p+=1)e[p].l(f);n=Tt(),$e(i.$$.fragment,f)},m(f,p){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(f,p);me(f,n,p),Ye(i,f,p),u=!0},p(f,p){p[0]&221&&(o=Object.entries(f[4].weightedPrompts),_r(),e=$n(e,p,s,1,f,o,r,n.parentNode,pp,X0,n,$0),Dr());const c={};p[0]&128&&(c.xy=f[7]),p[0]&2&&(c.radius=f[1]),p[0]&32&&(c.handleMouseDown=f[19]),i.$set(c)},i(f){if(!u){for(let p=0;p<o.length;p+=1)ye(e[p]);ye(i.$$.fragment,f),u=!0}},o(f){for(let p=0;p<e.length;p+=1)Ee(e[p]);Ee(i.$$.fragment,f),u=!1},d(f){for(let p=0;p<e.length;p+=1)e[p].d(f);f&&I(n),Ze(i,f)}}}function Z0(t){let e,r;return e=new Zp({props:{p1:t[6][t[31]].embedXY,p2:t[7]}}),{c(){Ke(e.$$.fragment)},l(n){$e(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},p(n,i){const u={};i[0]&80&&(u.p1=n[6][n[31]].embedXY),i[0]&128&&(u.p2=n[7]),e.$set(u)},i(n){r||(ye(e.$$.fragment,n),r=!0)},o(n){Ee(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function X0(t,e){let r,n,i,u,o,s=e[32].embedActive&&Z0(e);return i=new Cu({props:{xy:e[6][e[31]].embedXY,radius:e[0],color:"rgba(136,157,191, 1)"}}),u=new da({props:{xy:[e[6][e[31]].embedXY[0]-Rr(e[2],e[32].text.length,e[3])[0]/2,e[6][e[31]].embedXY[1]+e[0]],color:`rgba(255,255,255,${Fr(e[32].embedWeight)}`,wh:Rr(e[2],e[32].text.length,e[3]),fontSize:e[3],text:e[32].text}}),{key:t,first:null,c(){r=Tt(),s&&s.c(),n=Tt(),Ke(i.$$.fragment),Ke(u.$$.fragment),this.h()},l(f){r=Tt(),s&&s.l(f),n=Tt(),$e(i.$$.fragment,f),$e(u.$$.fragment,f),this.h()},h(){this.first=r},m(f,p){me(f,r,p),s&&s.m(f,p),me(f,n,p),Ye(i,f,p),Ye(u,f,p),o=!0},p(f,p){e=f,e[32].embedActive?s?(s.p(e,p),p[0]&16&&ye(s,1)):(s=Z0(e),s.c(),ye(s,1),s.m(n.parentNode,n)):s&&(_r(),Ee(s,1,1,()=>{s=null}),Dr());const c={};p[0]&80&&(c.xy=e[6][e[31]].embedXY),p[0]&1&&(c.radius=e[0]),i.$set(c);const d={};p[0]&93&&(d.xy=[e[6][e[31]].embedXY[0]-Rr(e[2],e[32].text.length,e[3])[0]/2,e[6][e[31]].embedXY[1]+e[0]]),p[0]&16&&(d.color=`rgba(255,255,255,${Fr(e[32].embedWeight)}`),p[0]&28&&(d.wh=Rr(e[2],e[32].text.length,e[3])),p[0]&8&&(d.fontSize=e[3]),p[0]&16&&(d.text=e[32].text),u.$set(d)},i(f){o||(ye(s),ye(i.$$.fragment,f),ye(u.$$.fragment,f),o=!0)},o(f){Ee(s),Ee(i.$$.fragment,f),Ee(u.$$.fragment,f),o=!1},d(f){f&&I(r),s&&s.d(f),f&&I(n),Ze(i,f),Ze(u,f)}}}function BF(t){let e,r=Object.entries(t[4].weightedPrompts).length>0&&Object.entries(t[6]||{}).length>0,n,i,u,o=r&&Y0(t);return{c(){e=dt("svg"),o&&o.c(),this.h()},l(s){e=pt(s,"svg",{id:!0,class:!0});var f=G(e);o&&o.l(f),f.forEach(I),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(s,f){me(s,e,f),o&&o.m(e,null),n=!0,i||(u=[Se(e,"mousemove",t[9]),Se(e,"mouseup",t[10]),Se(e,"dblclick",t[8])],i=!0)},p(s,f){f[0]&80&&(r=Object.entries(s[4].weightedPrompts).length>0&&Object.entries(s[6]||{}).length>0),r?o?(o.p(s,f),f[0]&80&&ye(o,1)):(o=Y0(s),o.c(),ye(o,1),o.m(e,null)):o&&(_r(),Ee(o,1,1,()=>{o=null}),Dr())},i(s){n||(ye(o),n=!0)},o(s){Ee(o),n=!1},d(s){s&&I(e),o&&o.d(),i=!1,ar(u)}}}function OF(t,e,r){let n,i,u,o,s;ut(t,Sr,Q=>r(4,s=Q));let{center:f=[100,100]}=e,{dimensions:p=[100,100]}=e,{pointRadius:c=4}=e,{markerRadius:d=10}=e,{textWidth:h=150}=e,{fontSize:g=12}=e,{innerPad:b=100}=e,v=!1,_=null,D=p,C=[0,0];function A(){return{"00":[C[0],C[1]],"01":[C[0],C[1]+D[1]],11:[C[0]+D[0],C[1]+D[1]],10:[C[0]+D[0],C[1]]}}function F(Q,J){return Q.map(le=>J.map(_e=>fs(le,_e)))}function E(Q,J){if(Q.length!==J.length)throw new Error("Both sets should have the same number of points");const le=F(Q,J),_e=SF(le);return _e?_e.map(([Fe,Ae])=>({ids:[Fe,Ae],points:[Q[Fe],J[Ae]]})):null}function S(Q){const J=Q.reduce((le,_e)=>$r(le,_e),[0,0]);return Cn(J,1/Q.length)}function T(Q){const J=A();switch(Q){case 2:return[Cn($r(J["00"],J["01"]),.5),Cn($r(J[10],J[11]),.5)];case 4:return[J["00"],J["01"],J[11],J[10]];case 6:return[Cn($r(J["00"],J["01"]),.5),Cn($r(J[10],J[11]),.5),J["00"],J["01"],J[11],J[10]];case 8:return[Cn($r(J["00"],J["01"]),.5),Cn($r(J[10],J[11]),.5),J["00"],J["01"],J[11],J[10],Cn($r(J["00"],J[10]),.5),Cn($r(J["01"],J[11]),.5)];default:return null}}function P(Q){s.embeddings&&s.scaledEmbedMappings&&(q(),V(n,i,u,D,Q))}function x(Q,J){Q&&J&&(q(),V(n,i,u,D,o))}function H(Q,J){V(n,Q,J,D,o)}function re(Q){s.embeddings&&s.scaledEmbedMappings&&(q(),V(n,i,u,Q,o))}function V(Q,J,le,_e,Fe){if(!_)return;let Ae={...s.weightedPrompts},Me=0;Object.values(_).forEach(He=>{Object.values(_).forEach(je=>{const ze=fs(He.embedXY,je.embedXY);ze>Me&&(Me=ze)})});const qe=Object.entries(_).reduce((He,[je,ze])=>{const mt=fs(Q,ze.embedXY);return He[je]=mt,He},{}),Ve=(He,je)=>{const ze=He?Math.round(Math.pow(1-je/Me,le)*100)/100:0;return ze<0?0:ze},tt=(He,je)=>{const ze=He?Math.round((1-je/Me)*100)/100:0;return ze<0?0:ze};Object.entries(qe).sort((He,je)=>He[1]-je[1]).forEach(([He,je],ze)=>{if(!Ae[He])return;const mt=ze<Fe;Ae[He]={...Ae[He],embedWeight:J?Ve(mt,je):tt(mt,je),embedActive:mt}}),Mt.update({...s,embedMarker:n,weightedPrompts:Ae})}function Y(Q){const J=fi(Q,svg);r(7,n=J),V(n,i,u,D,o)}function U(Q){if(v){const J=fi(Q,svg);r(7,n=J),V(n,i,u,D,o)}}function K(Q){r(5,v=!1)}function q(){const J=Object.keys(s.scaledEmbedMappings).reduce((_e,Fe,Ae)=>(_e[Fe]={embedXY:[C[0]+D[0]*s.scaledEmbedMappings[Ae][0],C[1]+D[1]*s.scaledEmbedMappings[Ae][1]]},_e),{}),le=_e=>{if(!_e.length)return f;const Fe=_e.map(Ae=>J[Ae].embedXY);return S(Fe)};if(s.embedClusters){const _e=s.embedClusters,Fe=s.embedClusterSets[_e];let Ae=Fe.map(Ve=>le(Ve));const Me=T(_e),qe=E(Ae,Me);qe&&qe.forEach(Ve=>{const tt=Ve.ids[0],He=Ve.points[1];Fe[tt].forEach(je=>{J[je].embedXY=S([J[je].embedXY,He])})})}r(6,_=J)}const te=()=>r(5,v=!0);return t.$$set=Q=>{"center"in Q&&r(11,f=Q.center),"dimensions"in Q&&r(12,p=Q.dimensions),"pointRadius"in Q&&r(0,c=Q.pointRadius),"markerRadius"in Q&&r(1,d=Q.markerRadius),"textWidth"in Q&&r(2,h=Q.textWidth),"fontSize"in Q&&r(3,g=Q.fontSize),"innerPad"in Q&&r(13,b=Q.innerPad)},t.$$.update=()=>{if(t.$$.dirty[0]&2064&&r(7,n=s.embedMarker||f),t.$$.dirty[0]&16&&r(18,i=s.embedExponentialScaling),t.$$.dirty[0]&16&&r(17,u=s.embedWeightScaling),t.$$.dirty[0]&16&&r(16,o=s.embedPromptLimit||Object.keys(s.weightedPrompts).length),t.$$.dirty[0]&393216&&H(i,u),t.$$.dirty[0]&16&&x(s.embeddings,s.scaledEmbedMappings),t.$$.dirty[0]&45056){const Q=Math.min(...p),J=p[0]===Q,le=p[1]===Q;r(15,C=[Math.max(J?0:(p[0]-Q)/2,b),Math.max(le?0:(p[1]-Q)/2,b)]),r(14,D=[p[0]-2*C[0],p[1]-2*C[1]])}t.$$.dirty[0]&16384&&re(D),t.$$.dirty[0]&65536&&P(o)},[c,d,h,g,s,v,_,n,Y,U,K,f,p,b,D,C,o,u,i,te]}class MF extends Dt{constructor(e){super(),bt(this,e,OF,BF,yt,{center:11,dimensions:12,pointRadius:0,markerRadius:1,textWidth:2,fontSize:3,innerPad:13},null,[-1,-1])}}var ff={},c1={},ks={},PF={get exports(){return ks},set exports(t){ks=t}},Is={},TF={get exports(){return Is},set exports(t){Is=t}},h1=function(e,r){return function(){for(var i=new Array(arguments.length),u=0;u<i.length;u++)i[u]=arguments[u];return e.apply(r,i)}},kF=h1,ki=Object.prototype.toString;function xf(t){return Array.isArray(t)}function cf(t){return typeof t>"u"}function IF(t){return t!==null&&!cf(t)&&t.constructor!==null&&!cf(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function d1(t){return ki.call(t)==="[object ArrayBuffer]"}function NF(t){return ki.call(t)==="[object FormData]"}function xF(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&d1(t.buffer),e}function RF(t){return typeof t=="string"}function LF(t){return typeof t=="number"}function p1(t){return t!==null&&typeof t=="object"}function hs(t){if(ki.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function UF(t){return ki.call(t)==="[object Date]"}function VF(t){return ki.call(t)==="[object File]"}function jF(t){return ki.call(t)==="[object Blob]"}function g1(t){return ki.call(t)==="[object Function]"}function qF(t){return p1(t)&&g1(t.pipe)}function zF(t){return ki.call(t)==="[object URLSearchParams]"}function WF(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function HF(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Rf(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),xf(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function hf(){var t={};function e(i,u){hs(t[u])&&hs(i)?t[u]=hf(t[u],i):hs(i)?t[u]=hf({},i):xf(i)?t[u]=i.slice():t[u]=i}for(var r=0,n=arguments.length;r<n;r++)Rf(arguments[r],e);return t}function GF(t,e,r){return Rf(e,function(i,u){r&&typeof i=="function"?t[u]=kF(i,r):t[u]=i}),t}function KF(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var un={isArray:xf,isArrayBuffer:d1,isBuffer:IF,isFormData:NF,isArrayBufferView:xF,isString:RF,isNumber:LF,isObject:p1,isPlainObject:hs,isUndefined:cf,isDate:UF,isFile:VF,isBlob:jF,isFunction:g1,isStream:qF,isURLSearchParams:zF,isStandardBrowserEnv:HF,forEach:Rf,merge:hf,extend:GF,trim:WF,stripBOM:KF},vu=un;function J0(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var v1=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(vu.isURLSearchParams(r))i=r.toString();else{var u=[];vu.forEach(r,function(f,p){f===null||typeof f>"u"||(vu.isArray(f)?p=p+"[]":f=[f],vu.forEach(f,function(d){vu.isDate(d)?d=d.toISOString():vu.isObject(d)&&(d=JSON.stringify(d)),u.push(J0(p)+"="+J0(d))}))}),i=u.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},$F=un;function to(){this.handlers=[]}to.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};to.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};to.prototype.forEach=function(e){$F.forEach(this.handlers,function(n){n!==null&&e(n)})};var YF=to,ZF=un,XF=function(e,r){ZF.forEach(e,function(i,u){u!==r&&u.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[u])})},m1=function(e,r,n,i,u){return e.config=r,n&&(e.code=n),e.request=i,e.response=u,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},_1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Al,Q0;function D1(){if(Q0)return Al;Q0=1;var t=m1;return Al=function(r,n,i,u,o){var s=new Error(r);return t(s,n,i,u,o)},Al}var El,ed;function JF(){if(ed)return El;ed=1;var t=D1();return El=function(r,n,i){var u=i.config.validateStatus;!i.status||!u||u(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},El}var Cl,td;function QF(){if(td)return Cl;td=1;var t=un;return Cl=t.isStandardBrowserEnv()?function(){return{write:function(n,i,u,o,s,f){var p=[];p.push(n+"="+encodeURIComponent(i)),t.isNumber(u)&&p.push("expires="+new Date(u).toGMTString()),t.isString(o)&&p.push("path="+o),t.isString(s)&&p.push("domain="+s),f===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Cl}var Fl,rd;function e3(){return rd||(rd=1,Fl=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),Fl}var Sl,nd;function t3(){return nd||(nd=1,Sl=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Sl}var Bl,id;function r3(){if(id)return Bl;id=1;var t=e3(),e=t3();return Bl=function(n,i){return n&&!t(i)?e(n,i):i},Bl}var Ol,ud;function n3(){if(ud)return Ol;ud=1;var t=un,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Ol=function(n){var i={},u,o,s;return n&&t.forEach(n.split(`
`),function(p){if(s=p.indexOf(":"),u=t.trim(p.substr(0,s)).toLowerCase(),o=t.trim(p.substr(s+1)),u){if(i[u]&&e.indexOf(u)>=0)return;u==="set-cookie"?i[u]=(i[u]?i[u]:[]).concat([o]):i[u]=i[u]?i[u]+", "+o:o}}),i},Ol}var Ml,ad;function i3(){if(ad)return Ml;ad=1;var t=un;return Ml=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function u(o){var s=o;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=u(window.location.href),function(s){var f=t.isString(s)?u(s):s;return f.protocol===i.protocol&&f.host===i.host}}():function(){return function(){return!0}}(),Ml}var Pl,sd;function ro(){if(sd)return Pl;sd=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Pl=t,Pl}var Tl,od;function ld(){if(od)return Tl;od=1;var t=un,e=JF(),r=QF(),n=v1,i=r3(),u=n3(),o=i3(),s=D1(),f=_1,p=ro();return Tl=function(d){return new Promise(function(g,b){var v=d.data,_=d.headers,D=d.responseType,C;function A(){d.cancelToken&&d.cancelToken.unsubscribe(C),d.signal&&d.signal.removeEventListener("abort",C)}t.isFormData(v)&&delete _["Content-Type"];var F=new XMLHttpRequest;if(d.auth){var E=d.auth.username||"",S=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";_.Authorization="Basic "+btoa(E+":"+S)}var T=i(d.baseURL,d.url);F.open(d.method.toUpperCase(),n(T,d.params,d.paramsSerializer),!0),F.timeout=d.timeout;function P(){if(F){var H="getAllResponseHeaders"in F?u(F.getAllResponseHeaders()):null,re=!D||D==="text"||D==="json"?F.responseText:F.response,V={data:re,status:F.status,statusText:F.statusText,headers:H,config:d,request:F};e(function(U){g(U),A()},function(U){b(U),A()},V),F=null}}if("onloadend"in F?F.onloadend=P:F.onreadystatechange=function(){!F||F.readyState!==4||F.status===0&&!(F.responseURL&&F.responseURL.indexOf("file:")===0)||setTimeout(P)},F.onabort=function(){F&&(b(s("Request aborted",d,"ECONNABORTED",F)),F=null)},F.onerror=function(){b(s("Network Error",d,null,F)),F=null},F.ontimeout=function(){var re=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",V=d.transitional||f;d.timeoutErrorMessage&&(re=d.timeoutErrorMessage),b(s(re,d,V.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",F)),F=null},t.isStandardBrowserEnv()){var x=(d.withCredentials||o(T))&&d.xsrfCookieName?r.read(d.xsrfCookieName):void 0;x&&(_[d.xsrfHeaderName]=x)}"setRequestHeader"in F&&t.forEach(_,function(re,V){typeof v>"u"&&V.toLowerCase()==="content-type"?delete _[V]:F.setRequestHeader(V,re)}),t.isUndefined(d.withCredentials)||(F.withCredentials=!!d.withCredentials),D&&D!=="json"&&(F.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&F.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&F.upload&&F.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(C=function(H){F&&(b(!H||H&&H.type?new p("canceled"):H),F.abort(),F=null)},d.cancelToken&&d.cancelToken.subscribe(C),d.signal&&(d.signal.aborted?C():d.signal.addEventListener("abort",C))),v||(v=null),F.send(v)})},Tl}var Ir=un,fd=XF,u3=m1,a3=_1,s3={"Content-Type":"application/x-www-form-urlencoded"};function cd(t,e){!Ir.isUndefined(t)&&Ir.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function o3(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=ld()),t}function l3(t,e,r){if(Ir.isString(t))try{return(e||JSON.parse)(t),Ir.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var no={transitional:a3,adapter:o3(),transformRequest:[function(e,r){return fd(r,"Accept"),fd(r,"Content-Type"),Ir.isFormData(e)||Ir.isArrayBuffer(e)||Ir.isBuffer(e)||Ir.isStream(e)||Ir.isFile(e)||Ir.isBlob(e)?e:Ir.isArrayBufferView(e)?e.buffer:Ir.isURLSearchParams(e)?(cd(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Ir.isObject(e)||r&&r["Content-Type"]==="application/json"?(cd(r,"application/json"),l3(e)):e}],transformResponse:[function(e){var r=this.transitional||no.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,u=!n&&this.responseType==="json";if(u||i&&Ir.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(u)throw o.name==="SyntaxError"?u3(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ir.forEach(["delete","get","head"],function(e){no.headers[e]={}});Ir.forEach(["post","put","patch"],function(e){no.headers[e]=Ir.merge(s3)});var Lf=no,f3=un,c3=Lf,h3=function(e,r,n){var i=this||c3;return f3.forEach(n,function(o){e=o.call(i,e,r)}),e},kl,hd;function b1(){return hd||(hd=1,kl=function(e){return!!(e&&e.__CANCEL__)}),kl}var dd=un,Il=h3,d3=b1(),p3=Lf,g3=ro();function Nl(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new g3("canceled")}var v3=function(e){Nl(e),e.headers=e.headers||{},e.data=Il.call(e,e.data,e.headers,e.transformRequest),e.headers=dd.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),dd.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||p3.adapter;return r(e).then(function(i){return Nl(e),i.data=Il.call(e,i.data,i.headers,e.transformResponse),i},function(i){return d3(i)||(Nl(e),i&&i.response&&(i.response.data=Il.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},hn=un,y1=function(e,r){r=r||{};var n={};function i(c,d){return hn.isPlainObject(c)&&hn.isPlainObject(d)?hn.merge(c,d):hn.isPlainObject(d)?hn.merge({},d):hn.isArray(d)?d.slice():d}function u(c){if(hn.isUndefined(r[c])){if(!hn.isUndefined(e[c]))return i(void 0,e[c])}else return i(e[c],r[c])}function o(c){if(!hn.isUndefined(r[c]))return i(void 0,r[c])}function s(c){if(hn.isUndefined(r[c])){if(!hn.isUndefined(e[c]))return i(void 0,e[c])}else return i(void 0,r[c])}function f(c){if(c in r)return i(e[c],r[c]);if(c in e)return i(void 0,e[c])}var p={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:f};return hn.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var h=p[d]||u,g=h(d);hn.isUndefined(g)&&h!==f||(n[d]=g)}),n},xl,pd;function w1(){return pd||(pd=1,xl={version:"0.26.1"}),xl}var m3=w1().version,Uf={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Uf[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var gd={};Uf.transitional=function(e,r,n){function i(u,o){return"[Axios v"+m3+"] Transitional option '"+u+"'"+o+(n?". "+n:"")}return function(u,o,s){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!gd[o]&&(gd[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(u,o,s):!0}};function _3(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var u=n[i],o=e[u];if(o){var s=t[u],f=s===void 0||o(s,u,t);if(f!==!0)throw new TypeError("option "+u+" must be "+f);continue}if(r!==!0)throw Error("Unknown option "+u)}}var D3={assertOptions:_3,validators:Uf},A1=un,b3=v1,vd=YF,md=v3,io=y1,E1=D3,mu=E1.validators;function ga(t){this.defaults=t,this.interceptors={request:new vd,response:new vd}}ga.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=io(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&E1.assertOptions(n,{silentJSONParsing:mu.transitional(mu.boolean),forcedJSONParsing:mu.transitional(mu.boolean),clarifyTimeoutError:mu.transitional(mu.boolean)},!1);var i=[],u=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(u=u&&g.synchronous,i.unshift(g.fulfilled,g.rejected))});var o=[];this.interceptors.response.forEach(function(g){o.push(g.fulfilled,g.rejected)});var s;if(!u){var f=[md,void 0];for(Array.prototype.unshift.apply(f,i),f=f.concat(o),s=Promise.resolve(r);f.length;)s=s.then(f.shift(),f.shift());return s}for(var p=r;i.length;){var c=i.shift(),d=i.shift();try{p=c(p)}catch(h){d(h);break}}try{s=md(p)}catch(h){return Promise.reject(h)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};ga.prototype.getUri=function(e){return e=io(this.defaults,e),b3(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};A1.forEach(["delete","get","head","options"],function(e){ga.prototype[e]=function(r,n){return this.request(io(n||{},{method:e,url:r,data:(n||{}).data}))}});A1.forEach(["post","put","patch"],function(e){ga.prototype[e]=function(r,n,i){return this.request(io(i||{},{method:e,url:r,data:n}))}});var y3=ga,Rl,_d;function w3(){if(_d)return Rl;_d=1;var t=ro();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(u){if(i._listeners){var o,s=i._listeners.length;for(o=0;o<s;o++)i._listeners[o](u);i._listeners=null}}),this.promise.then=function(u){var o,s=new Promise(function(f){i.subscribe(f),o=f}).then(u);return s.cancel=function(){i.unsubscribe(o)},s},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},Rl=e,Rl}var Ll,Dd;function A3(){return Dd||(Dd=1,Ll=function(e){return function(n){return e.apply(null,n)}}),Ll}var Ul,bd;function E3(){if(bd)return Ul;bd=1;var t=un;return Ul=function(r){return t.isObject(r)&&r.isAxiosError===!0},Ul}var yd=un,C3=h1,ds=y3,F3=y1,S3=Lf;function C1(t){var e=new ds(t),r=C3(ds.prototype.request,e);return yd.extend(r,ds.prototype,e),yd.extend(r,e),r.create=function(i){return C1(F3(t,i))},r}var Yn=C1(S3);Yn.Axios=ds;Yn.Cancel=ro();Yn.CancelToken=w3();Yn.isCancel=b1();Yn.VERSION=w1().version;Yn.all=function(e){return Promise.all(e)};Yn.spread=A3();Yn.isAxiosError=E3();TF.exports=Yn;Is.default=Yn;(function(t){t.exports=Is})(PF);var ur={},Vf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RequiredError=t.BaseAPI=t.COLLECTION_FORMATS=t.BASE_PATH=void 0;const e=ks;t.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class r{constructor(u,o=t.BASE_PATH,s=e.default){this.basePath=o,this.axios=s,u&&(this.configuration=u,this.basePath=u.basePath||this.basePath)}}t.BaseAPI=r;class n extends Error{constructor(u,o){super(o),this.field=u,this.name="RequiredError"}}t.RequiredError=n})(Vf);var jf=dr&&dr.__awaiter||function(t,e,r,n){function i(u){return u instanceof r?u:new r(function(o){o(u)})}return new(r||(r=Promise))(function(u,o){function s(c){try{p(n.next(c))}catch(d){o(d)}}function f(c){try{p(n.throw(c))}catch(d){o(d)}}function p(c){c.done?u(c.value):i(c.value).then(s,f)}p((n=n.apply(t,e||[])).next())})};Object.defineProperty(ur,"__esModule",{value:!0});ur.createRequestFunction=ur.toPathString=ur.serializeDataIfNeeded=ur.setSearchParams=ur.setOAuthToObject=ur.setBearerAuthToObject=ur.setBasicAuthToObject=ur.setApiKeyToObject=ur.assertParamExists=ur.DUMMY_BASE_URL=void 0;const B3=Vf;ur.DUMMY_BASE_URL="https://example.com";ur.assertParamExists=function(t,e,r){if(r==null)throw new B3.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};ur.setApiKeyToObject=function(t,e,r){return jf(this,void 0,void 0,function*(){if(r&&r.apiKey){const n=typeof r.apiKey=="function"?yield r.apiKey(e):yield r.apiKey;t[e]=n}})};ur.setBasicAuthToObject=function(t,e){e&&(e.username||e.password)&&(t.auth={username:e.username,password:e.password})};ur.setBearerAuthToObject=function(t,e){return jf(this,void 0,void 0,function*(){if(e&&e.accessToken){const r=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;t.Authorization="Bearer "+r}})};ur.setOAuthToObject=function(t,e,r,n){return jf(this,void 0,void 0,function*(){if(n&&n.accessToken){const i=typeof n.accessToken=="function"?yield n.accessToken(e,r):yield n.accessToken;t.Authorization="Bearer "+i}})};function df(t,e,r=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(n=>df(t,n,r)):Object.keys(e).forEach(n=>df(t,e[n],`${r}${r!==""?".":""}${n}`)):t.has(r)?t.append(r,e):t.set(r,e))}ur.setSearchParams=function(t,...e){const r=new URLSearchParams(t.search);df(r,e),t.search=r.toString()};ur.serializeDataIfNeeded=function(t,e,r){const n=typeof t!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(t!==void 0?t:{}):t||""};ur.toPathString=function(t){return t.pathname+t.search+t.hash};ur.createRequestFunction=function(t,e,r,n){return(i=e,u=r)=>{const o=Object.assign(Object.assign({},t.options),{url:((n==null?void 0:n.basePath)||u)+t.url});return i.request(o)}};(function(t){var e=dr&&dr.__awaiter||function(o,s,f,p){function c(d){return d instanceof f?d:new f(function(h){h(d)})}return new(f||(f=Promise))(function(d,h){function g(_){try{v(p.next(_))}catch(D){h(D)}}function b(_){try{v(p.throw(_))}catch(D){h(D)}}function v(_){_.done?d(_.value):c(_.value).then(g,b)}v((p=p.apply(o,s||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIApi=t.OpenAIApiFactory=t.OpenAIApiFp=t.OpenAIApiAxiosParamCreator=t.CreateImageRequestResponseFormatEnum=t.CreateImageRequestSizeEnum=t.ChatCompletionResponseMessageRoleEnum=t.ChatCompletionRequestMessageRoleEnum=void 0;const r=ks,n=ur,i=Vf;t.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},t.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},t.OpenAIApiAxiosParamCreator=function(o){return{cancelFineTune:(s,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("cancelFineTune","fineTuneId",s);const p="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),f),g={},b={};n.setSearchParams(c,b);let v=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),{url:n.toPathString(c),options:h}}),createAnswer:(s,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createAnswer","createAnswerRequest",s);const p="/answers",c=new URL(p,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),h.data=n.serializeDataIfNeeded(s,h,o),{url:n.toPathString(c),options:h}}),createChatCompletion:(s,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createChatCompletion","createChatCompletionRequest",s);const p="/chat/completions",c=new URL(p,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),h.data=n.serializeDataIfNeeded(s,h,o),{url:n.toPathString(c),options:h}}),createClassification:(s,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createClassification","createClassificationRequest",s);const p="/classifications",c=new URL(p,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),h.data=n.serializeDataIfNeeded(s,h,o),{url:n.toPathString(c),options:h}}),createCompletion:(s,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createCompletion","createCompletionRequest",s);const p="/completions",c=new URL(p,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),h.data=n.serializeDataIfNeeded(s,h,o),{url:n.toPathString(c),options:h}}),createEdit:(s,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEdit","createEditRequest",s);const p="/edits",c=new URL(p,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),h.data=n.serializeDataIfNeeded(s,h,o),{url:n.toPathString(c),options:h}}),createEmbedding:(s,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEmbedding","createEmbeddingRequest",s);const p="/embeddings",c=new URL(p,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),h.data=n.serializeDataIfNeeded(s,h,o),{url:n.toPathString(c),options:h}}),createFile:(s,f,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFile","file",s),n.assertParamExists("createFile","purpose",f);const c="/files",d=new URL(c,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},h),p),b={},v={},_=new(o&&o.formDataCtor||FormData);s!==void 0&&_.append("file",s),f!==void 0&&_.append("purpose",f),b["Content-Type"]="multipart/form-data",n.setSearchParams(d,v);let D=h&&h.headers?h.headers:{};return g.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),_.getHeaders()),D),p.headers),g.data=_,{url:n.toPathString(d),options:g}}),createFineTune:(s,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFineTune","createFineTuneRequest",s);const p="/fine-tunes",c=new URL(p,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),h.data=n.serializeDataIfNeeded(s,h,o),{url:n.toPathString(c),options:h}}),createImage:(s,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImage","createImageRequest",s);const p="/images/generations",c=new URL(p,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),h.data=n.serializeDataIfNeeded(s,h,o),{url:n.toPathString(c),options:h}}),createImageEdit:(s,f,p,c,d,h,g,b={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageEdit","image",s),n.assertParamExists("createImageEdit","prompt",f);const v="/images/edits",_=new URL(v,n.DUMMY_BASE_URL);let D;o&&(D=o.baseOptions);const C=Object.assign(Object.assign({method:"POST"},D),b),A={},F={},E=new(o&&o.formDataCtor||FormData);s!==void 0&&E.append("image",s),p!==void 0&&E.append("mask",p),f!==void 0&&E.append("prompt",f),c!==void 0&&E.append("n",c),d!==void 0&&E.append("size",d),h!==void 0&&E.append("response_format",h),g!==void 0&&E.append("user",g),A["Content-Type"]="multipart/form-data",n.setSearchParams(_,F);let S=D&&D.headers?D.headers:{};return C.headers=Object.assign(Object.assign(Object.assign(Object.assign({},A),E.getHeaders()),S),b.headers),C.data=E,{url:n.toPathString(_),options:C}}),createImageVariation:(s,f,p,c,d,h={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageVariation","image",s);const g="/images/variations",b=new URL(g,n.DUMMY_BASE_URL);let v;o&&(v=o.baseOptions);const _=Object.assign(Object.assign({method:"POST"},v),h),D={},C={},A=new(o&&o.formDataCtor||FormData);s!==void 0&&A.append("image",s),f!==void 0&&A.append("n",f),p!==void 0&&A.append("size",p),c!==void 0&&A.append("response_format",c),d!==void 0&&A.append("user",d),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,C);let F=v&&v.headers?v.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),A.getHeaders()),F),h.headers),_.data=A,{url:n.toPathString(b),options:_}}),createModeration:(s,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createModeration","createModerationRequest",s);const p="/moderations",c=new URL(p,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const h=Object.assign(Object.assign({method:"POST"},d),f),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(c,b);let v=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),h.data=n.serializeDataIfNeeded(s,h,o),{url:n.toPathString(c),options:h}}),createSearch:(s,f,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createSearch","engineId",s),n.assertParamExists("createSearch","createSearchRequest",f);const c="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(s))),d=new URL(c,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},h),p),b={},v={};b["Content-Type"]="application/json",n.setSearchParams(d,v);let _=h&&h.headers?h.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),_),p.headers),g.data=n.serializeDataIfNeeded(f,g,o),{url:n.toPathString(d),options:g}}),createTranscription:(s,f,p,c,d,h,g={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranscription","file",s),n.assertParamExists("createTranscription","model",f);const b="/audio/transcriptions",v=new URL(b,n.DUMMY_BASE_URL);let _;o&&(_=o.baseOptions);const D=Object.assign(Object.assign({method:"POST"},_),g),C={},A={},F=new(o&&o.formDataCtor||FormData);s!==void 0&&F.append("file",s),f!==void 0&&F.append("model",f),p!==void 0&&F.append("prompt",p),c!==void 0&&F.append("response_format",c),d!==void 0&&F.append("temperature",d),h!==void 0&&F.append("language",h),C["Content-Type"]="multipart/form-data",n.setSearchParams(v,A);let E=_&&_.headers?_.headers:{};return D.headers=Object.assign(Object.assign(Object.assign(Object.assign({},C),F.getHeaders()),E),g.headers),D.data=F,{url:n.toPathString(v),options:D}}),createTranslation:(s,f,p,c,d,h={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranslation","file",s),n.assertParamExists("createTranslation","model",f);const g="/audio/translations",b=new URL(g,n.DUMMY_BASE_URL);let v;o&&(v=o.baseOptions);const _=Object.assign(Object.assign({method:"POST"},v),h),D={},C={},A=new(o&&o.formDataCtor||FormData);s!==void 0&&A.append("file",s),f!==void 0&&A.append("model",f),p!==void 0&&A.append("prompt",p),c!==void 0&&A.append("response_format",c),d!==void 0&&A.append("temperature",d),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,C);let F=v&&v.headers?v.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),A.getHeaders()),F),h.headers),_.data=A,{url:n.toPathString(b),options:_}}),deleteFile:(s,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteFile","fileId",s);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const h=Object.assign(Object.assign({method:"DELETE"},d),f),g={},b={};n.setSearchParams(c,b);let v=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),{url:n.toPathString(c),options:h}}),deleteModel:(s,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteModel","model",s);const p="/models/{model}".replace("{model}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const h=Object.assign(Object.assign({method:"DELETE"},d),f),g={},b={};n.setSearchParams(c,b);let v=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),{url:n.toPathString(c),options:h}}),downloadFile:(s,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("downloadFile","fileId",s);const p="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},d),f),g={},b={};n.setSearchParams(c,b);let v=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),{url:n.toPathString(c),options:h}}),listEngines:(s={})=>e(this,void 0,void 0,function*(){const f="/engines",p=new URL(f,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},c),s),h={},g={};n.setSearchParams(p,g);let b=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},h),b),s.headers),{url:n.toPathString(p),options:d}}),listFiles:(s={})=>e(this,void 0,void 0,function*(){const f="/files",p=new URL(f,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},c),s),h={},g={};n.setSearchParams(p,g);let b=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},h),b),s.headers),{url:n.toPathString(p),options:d}}),listFineTuneEvents:(s,f,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("listFineTuneEvents","fineTuneId",s);const c="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(s))),d=new URL(c,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const g=Object.assign(Object.assign({method:"GET"},h),p),b={},v={};f!==void 0&&(v.stream=f),n.setSearchParams(d,v);let _=h&&h.headers?h.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),_),p.headers),{url:n.toPathString(d),options:g}}),listFineTunes:(s={})=>e(this,void 0,void 0,function*(){const f="/fine-tunes",p=new URL(f,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},c),s),h={},g={};n.setSearchParams(p,g);let b=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},h),b),s.headers),{url:n.toPathString(p),options:d}}),listModels:(s={})=>e(this,void 0,void 0,function*(){const f="/models",p=new URL(f,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},c),s),h={},g={};n.setSearchParams(p,g);let b=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},h),b),s.headers),{url:n.toPathString(p),options:d}}),retrieveEngine:(s,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveEngine","engineId",s);const p="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},d),f),g={},b={};n.setSearchParams(c,b);let v=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),{url:n.toPathString(c),options:h}}),retrieveFile:(s,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFile","fileId",s);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},d),f),g={},b={};n.setSearchParams(c,b);let v=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),{url:n.toPathString(c),options:h}}),retrieveFineTune:(s,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFineTune","fineTuneId",s);const p="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},d),f),g={},b={};n.setSearchParams(c,b);let v=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),{url:n.toPathString(c),options:h}}),retrieveModel:(s,f={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveModel","model",s);const p="/models/{model}".replace("{model}",encodeURIComponent(String(s))),c=new URL(p,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},d),f),g={},b={};n.setSearchParams(c,b);let v=d&&d.headers?d.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},g),v),f.headers),{url:n.toPathString(c),options:h}})}},t.OpenAIApiFp=function(o){const s=t.OpenAIApiAxiosParamCreator(o);return{cancelFineTune(f,p){return e(this,void 0,void 0,function*(){const c=yield s.cancelFineTune(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createAnswer(f,p){return e(this,void 0,void 0,function*(){const c=yield s.createAnswer(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createChatCompletion(f,p){return e(this,void 0,void 0,function*(){const c=yield s.createChatCompletion(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createClassification(f,p){return e(this,void 0,void 0,function*(){const c=yield s.createClassification(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createCompletion(f,p){return e(this,void 0,void 0,function*(){const c=yield s.createCompletion(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createEdit(f,p){return e(this,void 0,void 0,function*(){const c=yield s.createEdit(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createEmbedding(f,p){return e(this,void 0,void 0,function*(){const c=yield s.createEmbedding(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createFile(f,p,c){return e(this,void 0,void 0,function*(){const d=yield s.createFile(f,p,c);return n.createRequestFunction(d,r.default,i.BASE_PATH,o)})},createFineTune(f,p){return e(this,void 0,void 0,function*(){const c=yield s.createFineTune(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createImage(f,p){return e(this,void 0,void 0,function*(){const c=yield s.createImage(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createImageEdit(f,p,c,d,h,g,b,v){return e(this,void 0,void 0,function*(){const _=yield s.createImageEdit(f,p,c,d,h,g,b,v);return n.createRequestFunction(_,r.default,i.BASE_PATH,o)})},createImageVariation(f,p,c,d,h,g){return e(this,void 0,void 0,function*(){const b=yield s.createImageVariation(f,p,c,d,h,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},createModeration(f,p){return e(this,void 0,void 0,function*(){const c=yield s.createModeration(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createSearch(f,p,c){return e(this,void 0,void 0,function*(){const d=yield s.createSearch(f,p,c);return n.createRequestFunction(d,r.default,i.BASE_PATH,o)})},createTranscription(f,p,c,d,h,g,b){return e(this,void 0,void 0,function*(){const v=yield s.createTranscription(f,p,c,d,h,g,b);return n.createRequestFunction(v,r.default,i.BASE_PATH,o)})},createTranslation(f,p,c,d,h,g){return e(this,void 0,void 0,function*(){const b=yield s.createTranslation(f,p,c,d,h,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},deleteFile(f,p){return e(this,void 0,void 0,function*(){const c=yield s.deleteFile(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},deleteModel(f,p){return e(this,void 0,void 0,function*(){const c=yield s.deleteModel(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},downloadFile(f,p){return e(this,void 0,void 0,function*(){const c=yield s.downloadFile(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},listEngines(f){return e(this,void 0,void 0,function*(){const p=yield s.listEngines(f);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listFiles(f){return e(this,void 0,void 0,function*(){const p=yield s.listFiles(f);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listFineTuneEvents(f,p,c){return e(this,void 0,void 0,function*(){const d=yield s.listFineTuneEvents(f,p,c);return n.createRequestFunction(d,r.default,i.BASE_PATH,o)})},listFineTunes(f){return e(this,void 0,void 0,function*(){const p=yield s.listFineTunes(f);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listModels(f){return e(this,void 0,void 0,function*(){const p=yield s.listModels(f);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},retrieveEngine(f,p){return e(this,void 0,void 0,function*(){const c=yield s.retrieveEngine(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},retrieveFile(f,p){return e(this,void 0,void 0,function*(){const c=yield s.retrieveFile(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},retrieveFineTune(f,p){return e(this,void 0,void 0,function*(){const c=yield s.retrieveFineTune(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},retrieveModel(f,p){return e(this,void 0,void 0,function*(){const c=yield s.retrieveModel(f,p);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})}}},t.OpenAIApiFactory=function(o,s,f){const p=t.OpenAIApiFp(o);return{cancelFineTune(c,d){return p.cancelFineTune(c,d).then(h=>h(f,s))},createAnswer(c,d){return p.createAnswer(c,d).then(h=>h(f,s))},createChatCompletion(c,d){return p.createChatCompletion(c,d).then(h=>h(f,s))},createClassification(c,d){return p.createClassification(c,d).then(h=>h(f,s))},createCompletion(c,d){return p.createCompletion(c,d).then(h=>h(f,s))},createEdit(c,d){return p.createEdit(c,d).then(h=>h(f,s))},createEmbedding(c,d){return p.createEmbedding(c,d).then(h=>h(f,s))},createFile(c,d,h){return p.createFile(c,d,h).then(g=>g(f,s))},createFineTune(c,d){return p.createFineTune(c,d).then(h=>h(f,s))},createImage(c,d){return p.createImage(c,d).then(h=>h(f,s))},createImageEdit(c,d,h,g,b,v,_,D){return p.createImageEdit(c,d,h,g,b,v,_,D).then(C=>C(f,s))},createImageVariation(c,d,h,g,b,v){return p.createImageVariation(c,d,h,g,b,v).then(_=>_(f,s))},createModeration(c,d){return p.createModeration(c,d).then(h=>h(f,s))},createSearch(c,d,h){return p.createSearch(c,d,h).then(g=>g(f,s))},createTranscription(c,d,h,g,b,v,_){return p.createTranscription(c,d,h,g,b,v,_).then(D=>D(f,s))},createTranslation(c,d,h,g,b,v){return p.createTranslation(c,d,h,g,b,v).then(_=>_(f,s))},deleteFile(c,d){return p.deleteFile(c,d).then(h=>h(f,s))},deleteModel(c,d){return p.deleteModel(c,d).then(h=>h(f,s))},downloadFile(c,d){return p.downloadFile(c,d).then(h=>h(f,s))},listEngines(c){return p.listEngines(c).then(d=>d(f,s))},listFiles(c){return p.listFiles(c).then(d=>d(f,s))},listFineTuneEvents(c,d,h){return p.listFineTuneEvents(c,d,h).then(g=>g(f,s))},listFineTunes(c){return p.listFineTunes(c).then(d=>d(f,s))},listModels(c){return p.listModels(c).then(d=>d(f,s))},retrieveEngine(c,d){return p.retrieveEngine(c,d).then(h=>h(f,s))},retrieveFile(c,d){return p.retrieveFile(c,d).then(h=>h(f,s))},retrieveFineTune(c,d){return p.retrieveFineTune(c,d).then(h=>h(f,s))},retrieveModel(c,d){return p.retrieveModel(c,d).then(h=>h(f,s))}}};class u extends i.BaseAPI{cancelFineTune(s,f){return t.OpenAIApiFp(this.configuration).cancelFineTune(s,f).then(p=>p(this.axios,this.basePath))}createAnswer(s,f){return t.OpenAIApiFp(this.configuration).createAnswer(s,f).then(p=>p(this.axios,this.basePath))}createChatCompletion(s,f){return t.OpenAIApiFp(this.configuration).createChatCompletion(s,f).then(p=>p(this.axios,this.basePath))}createClassification(s,f){return t.OpenAIApiFp(this.configuration).createClassification(s,f).then(p=>p(this.axios,this.basePath))}createCompletion(s,f){return t.OpenAIApiFp(this.configuration).createCompletion(s,f).then(p=>p(this.axios,this.basePath))}createEdit(s,f){return t.OpenAIApiFp(this.configuration).createEdit(s,f).then(p=>p(this.axios,this.basePath))}createEmbedding(s,f){return t.OpenAIApiFp(this.configuration).createEmbedding(s,f).then(p=>p(this.axios,this.basePath))}createFile(s,f,p){return t.OpenAIApiFp(this.configuration).createFile(s,f,p).then(c=>c(this.axios,this.basePath))}createFineTune(s,f){return t.OpenAIApiFp(this.configuration).createFineTune(s,f).then(p=>p(this.axios,this.basePath))}createImage(s,f){return t.OpenAIApiFp(this.configuration).createImage(s,f).then(p=>p(this.axios,this.basePath))}createImageEdit(s,f,p,c,d,h,g,b){return t.OpenAIApiFp(this.configuration).createImageEdit(s,f,p,c,d,h,g,b).then(v=>v(this.axios,this.basePath))}createImageVariation(s,f,p,c,d,h){return t.OpenAIApiFp(this.configuration).createImageVariation(s,f,p,c,d,h).then(g=>g(this.axios,this.basePath))}createModeration(s,f){return t.OpenAIApiFp(this.configuration).createModeration(s,f).then(p=>p(this.axios,this.basePath))}createSearch(s,f,p){return t.OpenAIApiFp(this.configuration).createSearch(s,f,p).then(c=>c(this.axios,this.basePath))}createTranscription(s,f,p,c,d,h,g){return t.OpenAIApiFp(this.configuration).createTranscription(s,f,p,c,d,h,g).then(b=>b(this.axios,this.basePath))}createTranslation(s,f,p,c,d,h){return t.OpenAIApiFp(this.configuration).createTranslation(s,f,p,c,d,h).then(g=>g(this.axios,this.basePath))}deleteFile(s,f){return t.OpenAIApiFp(this.configuration).deleteFile(s,f).then(p=>p(this.axios,this.basePath))}deleteModel(s,f){return t.OpenAIApiFp(this.configuration).deleteModel(s,f).then(p=>p(this.axios,this.basePath))}downloadFile(s,f){return t.OpenAIApiFp(this.configuration).downloadFile(s,f).then(p=>p(this.axios,this.basePath))}listEngines(s){return t.OpenAIApiFp(this.configuration).listEngines(s).then(f=>f(this.axios,this.basePath))}listFiles(s){return t.OpenAIApiFp(this.configuration).listFiles(s).then(f=>f(this.axios,this.basePath))}listFineTuneEvents(s,f,p){return t.OpenAIApiFp(this.configuration).listFineTuneEvents(s,f,p).then(c=>c(this.axios,this.basePath))}listFineTunes(s){return t.OpenAIApiFp(this.configuration).listFineTunes(s).then(f=>f(this.axios,this.basePath))}listModels(s){return t.OpenAIApiFp(this.configuration).listModels(s).then(f=>f(this.axios,this.basePath))}retrieveEngine(s,f){return t.OpenAIApiFp(this.configuration).retrieveEngine(s,f).then(p=>p(this.axios,this.basePath))}retrieveFile(s,f){return t.OpenAIApiFp(this.configuration).retrieveFile(s,f).then(p=>p(this.axios,this.basePath))}retrieveFineTune(s,f){return t.OpenAIApiFp(this.configuration).retrieveFineTune(s,f).then(p=>p(this.axios,this.basePath))}retrieveModel(s,f){return t.OpenAIApiFp(this.configuration).retrieveModel(s,f).then(p=>p(this.axios,this.basePath))}}t.OpenAIApi=u})(c1);var uo={};const O3="openai",M3="3.2.1",P3="Node.js library for the OpenAI API",T3={type:"git",url:"git@github.com:openai/openai-node.git"},k3=["openai","open","ai","gpt-3","gpt3"],I3="OpenAI",N3="MIT",x3="./dist/index.js",R3="./dist/index.d.ts",L3={build:"tsc --outDir dist/"},U3={axios:"^0.26.0","form-data":"^4.0.0"},V3={"@types/node":"^12.11.5",typescript:"^3.6.4"},j3={name:O3,version:M3,description:P3,repository:T3,keywords:k3,author:I3,license:N3,main:x3,types:R3,scripts:L3,dependencies:U3,devDependencies:V3};var Vl,wd;function q3(){return wd||(wd=1,Vl=typeof self=="object"?self.FormData:window.FormData),Vl}Object.defineProperty(uo,"__esModule",{value:!0});uo.Configuration=void 0;const z3=j3;class W3{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${z3.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=q3())}isJsonMime(e){const r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(r.test(e)||e.toLowerCase()==="application/json-patch+json")}}uo.Configuration=W3;(function(t){var e=dr&&dr.__createBinding||(Object.create?function(n,i,u,o){o===void 0&&(o=u),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[u]}})}:function(n,i,u,o){o===void 0&&(o=u),n[o]=i[u]}),r=dr&&dr.__exportStar||function(n,i){for(var u in n)u!=="default"&&!i.hasOwnProperty(u)&&e(i,n,u)};Object.defineProperty(t,"__esModule",{value:!0}),r(c1,t),r(uo,t)})(ff);function Ns(t){const e=new ff.Configuration({apiKey:t});return new ff.OpenAIApi(e)}async function H3(t,e,r="text-davinci-003"){return await t.createCompletion({model:r,prompt:e,temperature:.8,max_tokens:250})}async function G3(t,e,r="gpt-3.5-turbo"){return await t.createChatCompletion({model:r,messages:[{role:"user",content:e}],temperature:.8,max_tokens:250})}async function K3(t,e,r="text-embedding-ada-002"){return await t.createEmbedding({model:r,input:e})}async function $3(t){return await t.listModels()}const jl="preferredEmbeddingModelStore";function Y3(){const t=zr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[jl]||""),{subscribe:e,update:u=>{!u||!i||(localStorage[jl]=u,r(u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[jl],r(""))}}}const pf=Y3(),F1=qr(pf,t=>Ct(pf)),ql="oKeyStore";function Z3(){const t=zr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[ql]||""),{subscribe:e,update:u=>{!u||!i||(localStorage[ql]=u,r(u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[ql],r(""))}}}const xs=Z3(),qf=qr(xs,t=>Ct(xs));function X3(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!0,pending:tS,then:eS,catch:Q3,value:25,error:26,blocks:[,,,]};return ps(r=t[6],i),{c(){e=Tt(),i.block.c()},l(u){e=Tt(),i.block.l(u)},m(u,o){me(u,e,o),i.block.m(u,i.anchor=o),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(u,o){t=u,i.ctx=t,o&64&&r!==(r=t[6])&&ps(r,i)||gp(i,t,o)},i(u){n||(ye(i.block),n=!0)},o(u){for(let o=0;o<3;o+=1){const s=i.blocks[o];Ee(s)}n=!1},d(u){u&&I(e),i.block.d(u),i.token=null,i=null}}}function J3(t){let e,r,n,i,u;return{c(){e=Z("div"),r=Z("div"),n=Z("div"),i=Z("p"),u=Re("Set OpenAI key in settings to use embedding map."),this.h()},l(o){e=X(o,"DIV",{class:!0});var s=G(e);r=X(s,"DIV",{class:!0});var f=G(r);n=X(f,"DIV",{class:!0});var p=G(n);i=X(p,"P",{class:!0});var c=G(i);u=Le(c,"Set OpenAI key in settings to use embedding map."),c.forEach(I),p.forEach(I),f.forEach(I),s.forEach(I),this.h()},h(){B(i,"class","text-center text-lg"),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(o,s){me(o,e,s),R(e,r),R(r,n),R(n,i),R(i,u)},p:Te,i:Te,o:Te,d(o){o&&I(e)}}}function Q3(t){let e,r=t[26].message+"",n;return{c(){e=Z("p"),n=Re(r),this.h()},l(i){e=X(i,"P",{style:!0});var u=G(e);n=Le(u,r),u.forEach(I),this.h()},h(){Yt(e,"color","red")},m(i,u){me(i,e,u),R(e,n)},p(i,u){u&64&&r!==(r=i[26].message+"")&&Zr(n,r)},i:Te,o:Te,d(i){i&&I(e)}}}function eS(t){let e,r,n,i,u,o,s,f,p,c,d,h,g,b,v,_,D,C,A,F,E,S,T,P,x,H,re,V,Y,U,K,q,te,Q,J,le,_e,Fe,Ae,Me,qe,Ve,tt,He,je,ze,mt,at,ft,st;r=new MF({props:{dimensions:t[3],center:t[8]}});let ot=t[4].embedExponentialScaling&&Ad(t);return{c(){e=Z("div"),Ke(r.$$.fragment),i=Ie(),u=Z("div"),o=Z("div"),s=Z("label"),f=Z("span"),p=Re("Exponential Scaling"),c=Ie(),d=Z("input"),g=Ie(),ot&&ot.c(),b=Ie(),v=Z("div"),_=Z("label"),D=Z("span"),C=Re("# Prompts"),A=Ie(),F=Z("input"),E=Ie(),S=Z("div"),T=Z("div"),P=Z("label"),x=Z("span"),H=Re("Clusters"),re=Ie(),V=Z("div"),Y=Z("button"),U=Re("0"),q=Ie(),te=Z("button"),Q=Re("2"),J=Ie(),le=Z("button"),_e=Re("4"),Fe=Ie(),Ae=Z("button"),Me=Re("6"),qe=Ie(),Ve=Z("button"),tt=Re("8"),He=Ie(),je=Z("div"),ze=Z("button"),mt=Re("Shuffle"),this.h()},l(Xe){e=X(Xe,"DIV",{class:!0});var Je=G(e);$e(r.$$.fragment,Je),Je.forEach(I),i=Ne(Xe),u=X(Xe,"DIV",{class:!0});var Ce=G(u);o=X(Ce,"DIV",{class:!0});var Pe=G(o);s=X(Pe,"LABEL",{class:!0});var Ot=G(s);f=X(Ot,"SPAN",{class:!0});var Vt=G(f);p=Le(Vt,"Exponential Scaling"),Vt.forEach(I),Ot.forEach(I),c=Ne(Pe),d=X(Pe,"INPUT",{type:!0,class:!0}),Pe.forEach(I),g=Ne(Ce),ot&&ot.l(Ce),b=Ne(Ce),v=X(Ce,"DIV",{class:!0});var Ht=G(v);_=X(Ht,"LABEL",{class:!0});var j=G(_);D=X(j,"SPAN",{class:!0});var W=G(D);C=Le(W,"# Prompts"),W.forEach(I),j.forEach(I),A=Ne(Ht),F=X(Ht,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Ht.forEach(I),E=Ne(Ce),S=X(Ce,"DIV",{class:!0});var ee=G(S);T=X(ee,"DIV",{class:!0});var fe=G(T);P=X(fe,"LABEL",{class:!0});var ae=G(P);x=X(ae,"SPAN",{class:!0});var he=G(x);H=Le(he,"Clusters"),he.forEach(I),ae.forEach(I),re=Ne(fe),V=X(fe,"DIV",{class:!0});var se=G(V);Y=X(se,"BUTTON",{class:!0});var ce=G(Y);U=Le(ce,"0"),ce.forEach(I),q=Ne(se),te=X(se,"BUTTON",{class:!0});var we=G(te);Q=Le(we,"2"),we.forEach(I),J=Ne(se),le=X(se,"BUTTON",{class:!0});var xe=G(le);_e=Le(xe,"4"),xe.forEach(I),Fe=Ne(se),Ae=X(se,"BUTTON",{class:!0});var rt=G(Ae);Me=Le(rt,"6"),rt.forEach(I),qe=Ne(se),Ve=X(se,"BUTTON",{class:!0});var Be=G(Ve);tt=Le(Be,"8"),Be.forEach(I),se.forEach(I),fe.forEach(I),ee.forEach(I),He=Ne(Ce),je=X(Ce,"DIV",{class:!0});var zt=G(je);ze=X(zt,"BUTTON",{class:!0});var Nt=G(ze);mt=Le(Nt,"Shuffle"),Nt.forEach(I),zt.forEach(I),Ce.forEach(I),this.h()},h(){B(e,"class","w-full h-full"),Zi(()=>t[15].call(e)),B(f,"class","label-text"),B(s,"class","label"),B(d,"type","checkbox"),B(d,"class","toggle toggle-sm"),d.checked=h=t[4].embedExponentialScaling,B(o,"class","min-w-max px-2"),B(D,"class","label-text"),B(_,"class","label"),F.value=t[9],B(F,"type","range"),B(F,"min","1"),B(F,"max",t[2]),B(F,"step","1"),B(F,"class","range range-sm"),B(v,"class","w-full px-2"),B(x,"class","label-text"),B(P,"class","label pb-1 m-0"),B(Y,"class",K=(t[4].embedClusters||0)===0?"btn btn-xs btn-active":"btn btn-xs"),B(te,"class","btn btn-xs"),Pt(te,"btn-active",t[4].embedClusters===2),Pt(te,"btn-disabled",Object.keys(t[4].embeddings).length<2),B(le,"class","btn btn-xs"),Pt(le,"btn-active",t[4].embedClusters===4),Pt(le,"btn-disabled",Object.keys(t[4].embeddings).length<4),B(Ae,"class","btn btn-xs"),Pt(Ae,"btn-active",t[4].embedClusters===6),Pt(Ae,"btn-disabled",Object.keys(t[4].embeddings).length<6),B(Ve,"class","btn btn-xs"),Pt(Ve,"btn-active",t[4].embedClusters===8),Pt(Ve,"btn-disabled",Object.keys(t[4].embeddings).length<8),B(V,"class","btn-group btn-group-horizontal p-0"),B(T,"class",""),B(S,"class",""),B(ze,"class","btn btn-xs btn-primary"),B(je,"class","w-32 px-2 pb-1 flex flex-col justify-end"),B(u,"class","px-2 py-4 pb-0 flex")},m(Xe,Je){me(Xe,e,Je),Ye(r,e,null),n=ha(e,t[15].bind(e)),me(Xe,i,Je),me(Xe,u,Je),R(u,o),R(o,s),R(s,f),R(f,p),R(o,c),R(o,d),R(u,g),ot&&ot.m(u,null),R(u,b),R(u,v),R(v,_),R(_,D),R(D,C),R(v,A),R(v,F),R(u,E),R(u,S),R(S,T),R(T,P),R(P,x),R(x,H),R(T,re),R(T,V),R(V,Y),R(Y,U),R(V,q),R(V,te),R(te,Q),R(V,J),R(V,le),R(le,_e),R(V,Fe),R(V,Ae),R(Ae,Me),R(V,qe),R(V,Ve),R(Ve,tt),R(u,He),R(u,je),R(je,ze),R(ze,mt),at=!0,ft||(st=[Se(d,"change",t[11]),Se(F,"change",t[10]),Se(Y,"click",t[16]),Se(te,"click",t[17]),Se(le,"click",t[18]),Se(Ae,"click",t[19]),Se(Ve,"click",t[20]),Se(ze,"click",t[14])],ft=!0)},p(Xe,Je){const Ce={};Je&8&&(Ce.dimensions=Xe[3]),Je&256&&(Ce.center=Xe[8]),r.$set(Ce),(!at||Je&16&&h!==(h=Xe[4].embedExponentialScaling))&&(d.checked=h),Xe[4].embedExponentialScaling?ot?ot.p(Xe,Je):(ot=Ad(Xe),ot.c(),ot.m(u,b)):ot&&(ot.d(1),ot=null),(!at||Je&512)&&(F.value=Xe[9]),(!at||Je&4)&&B(F,"max",Xe[2]),(!at||Je&16&&K!==(K=(Xe[4].embedClusters||0)===0?"btn btn-xs btn-active":"btn btn-xs"))&&B(Y,"class",K),(!at||Je&16)&&Pt(te,"btn-active",Xe[4].embedClusters===2),(!at||Je&16)&&Pt(te,"btn-disabled",Object.keys(Xe[4].embeddings).length<2),(!at||Je&16)&&Pt(le,"btn-active",Xe[4].embedClusters===4),(!at||Je&16)&&Pt(le,"btn-disabled",Object.keys(Xe[4].embeddings).length<4),(!at||Je&16)&&Pt(Ae,"btn-active",Xe[4].embedClusters===6),(!at||Je&16)&&Pt(Ae,"btn-disabled",Object.keys(Xe[4].embeddings).length<6),(!at||Je&16)&&Pt(Ve,"btn-active",Xe[4].embedClusters===8),(!at||Je&16)&&Pt(Ve,"btn-disabled",Object.keys(Xe[4].embeddings).length<8)},i(Xe){at||(ye(r.$$.fragment,Xe),at=!0)},o(Xe){Ee(r.$$.fragment,Xe),at=!1},d(Xe){Xe&&I(e),Ze(r),n(),Xe&&I(i),Xe&&I(u),ot&&ot.d(),ft=!1,ar(st)}}}function Ad(t){let e,r,n,i,u,o,s,f,p;return{c(){e=Z("div"),r=Z("label"),n=Z("span"),i=Re("Scaling Power"),u=Ie(),o=Z("input"),this.h()},l(c){e=X(c,"DIV",{class:!0});var d=G(e);r=X(d,"LABEL",{class:!0});var h=G(r);n=X(h,"SPAN",{class:!0});var g=G(n);i=Le(g,"Scaling Power"),g.forEach(I),h.forEach(I),u=Ne(d),o=X(d,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),d.forEach(I),this.h()},h(){B(n,"class","label-text"),B(r,"class","label"),o.value=s=t[4].embedWeightScaling,B(o,"type","range"),B(o,"min","0.5"),B(o,"max","3"),B(o,"step","0.1"),B(o,"class","range range-sm"),B(e,"class","w-full px-2")},m(c,d){me(c,e,d),R(e,r),R(r,n),R(n,i),R(e,u),R(e,o),f||(p=Se(o,"change",t[12]),f=!0)},p(c,d){d&16&&s!==(s=c[4].embedWeightScaling)&&(o.value=s)},d(c){c&&I(e),f=!1,p()}}}function tS(t){let e,r,n,i,u,o;return{c(){e=Z("div"),r=Z("div"),n=Z("div"),i=Z("progress"),this.h()},l(s){e=X(s,"DIV",{class:!0});var f=G(e);r=X(f,"DIV",{class:!0});var p=G(r);n=X(p,"DIV",{class:!0});var c=G(n);i=X(c,"PROGRESS",{class:!0,max:!0}),G(i).forEach(I),c.forEach(I),p.forEach(I),f.forEach(I),this.h()},h(){B(i,"class","progress progress-primary w-56"),i.value=u=Object.keys(t[7]).length,B(i,"max",o=Object.keys(t[4].weightedPrompts).length),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(s,f){me(s,e,f),R(e,r),R(r,n),R(n,i)},p(s,f){f&128&&u!==(u=Object.keys(s[7]).length)&&(i.value=u),f&16&&o!==(o=Object.keys(s[4].weightedPrompts).length)&&B(i,"max",o)},i:Te,o:Te,d(s){s&&I(e)}}}function rS(t){let e,r,n,i;const u=[J3,X3],o=[];function s(f,p){return f[5]?1:0}return e=s(t),r=o[e]=u[e](t),{c(){r.c(),n=Tt()},l(f){r.l(f),n=Tt()},m(f,p){o[e].m(f,p),me(f,n,p),i=!0},p(f,[p]){let c=e;e=s(f),e===c?o[e].p(f,p):(_r(),Ee(o[c],1,1,()=>{o[c]=null}),Dr(),r=o[e],r?r.p(f,p):(r=o[e]=u[e](f),r.c()),ye(r,1),r.m(n.parentNode,n))},i(f){i||(ye(r),i=!0)},o(f){Ee(r),i=!1},d(f){o[e].d(f),f&&I(n)}}}function nS(t){return t<2?0:t<4?2:t<6?4:t<8?6:8}function iS(t){return!t.embeddings||!t.embedClusterSets||Object.entries(t.embeddings).length!==Object.entries(t.weightedPrompts).length||(t.lastPromptChange||0)>(t.lastEmbeddingChange||0)}function uS(t,e,r){let n,i,u,o,s,f,p;ut(t,Sr,V=>r(4,s=V)),ut(t,F1,V=>r(21,f=V)),ut(t,qf,V=>r(5,p=V));let c=0,d=0,h=null,g={};function b(V){const{target:Y}=V;if(!Y)return;const U=Y;if(!U.value)return;const K=parseInt(U.value);K>0&&K<=n&&Mt.update({...s,embedPromptLimit:K})}function v(){Mt.update({...s,embedExponentialScaling:!s.embedExponentialScaling})}function _(V){const{target:Y}=V;if(!Y)return;const U=Y;if(!U.value)return;const K=parseInt(U.value);Mt.update({...s,embedWeightScaling:K})}function D(V){[0,2,4,6,8].indexOf(V)!==-1&&Mt.update({...s,embedClusters:V})}function C(V){let Y=new mF({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:5e3,metric:"euclidean"});const U=Object.keys(V),K=Object.values(V);Y.init({data:K,type:"dense"}),Y.run();let te=Y.getOutputScaled().map(([J,le])=>[(J+1)/2,(le+1)/2]);return U.reduce((J,le,_e)=>(J[le]=te[_e],J),{})}function A(V,Y){return new of.KMEANS().run(V,Y)}async function F(){Mt.update({...s,scaledEmbedMappings:C(s.embeddings)})}async function E(){if(console.log("fetching embeddings"),!p||!s.weightedPrompts)return;const V=Object.entries(s.weightedPrompts).map(([le,_e])=>[le,_e.text]),Y=Ns(p);r(7,g={});for(let le of V){const _e=await K3(Y,le[1],f);r(7,g[le[0]]=_e.data.data[0].embedding,g)}let U=Object.entries(g).sort((le,_e)=>le[0]-_e[0]);const K=le=>new Array(le).fill(null).map(()=>[]);console.log("clustering embeddings");const q=U.length>=2?A(U.map(le=>le[1]),2):[U.map(le=>le[0])];console.log("set of 2 complete");const te=U.length>=4?A(U.map(le=>le[1]),4):q;console.log("set of 4 complete");const Q=U.length>=6?A(U.map(le=>le[1]),6):te;console.log("set of 6 complete");const J=U.length>=8?A(U.map(le=>le[1]),8):Q;console.log("set of 8 complete"),Mt.update({...s,embeddings:g,embedClusterSets:{2:[...q,...K(2-q.length)],4:[...te,...K(4-te.length)],6:[...Q,...K(6-Q.length)],8:[...J,...K(8-J.length)]},lastEmbeddingChange:Date.now(),scaledEmbedMappings:C(g)}),console.log("embeddings complete")}function S(){c=this.clientWidth,d=this.clientHeight,r(0,c),r(1,d)}const T=()=>D(0),P=()=>D(2),x=()=>D(4),H=()=>D(6),re=()=>D(8);return t.$$.update=()=>{t.$$.dirty&16&&r(2,n=Object.keys(s.weightedPrompts||{}).length),t.$$.dirty&20&&r(9,i=s.embedPromptLimit||n),t.$$.dirty&3&&r(3,u=[c||250,d||250]),t.$$.dirty&8&&r(8,o=pa(u)),t.$$.dirty&16&&s.embeddings&&Object.keys(s.embeddings).length<s.embedClusters&&D(nS(Object.keys(s.embeddings).length)),t.$$.dirty&48&&p&&iS(s)&&r(6,h=E())},[c,d,n,u,s,p,h,g,o,i,b,v,_,D,F,S,T,P,x,H,re]}class aS extends Dt{constructor(e){super(),bt(this,e,uS,rS,yt,{})}}const us="showZeroPrompts";function sS(){const t=zr(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[us]?JSON.parse(localStorage[us]):!1),{subscribe:e,update:u=>{i&&(localStorage[us]=JSON.stringify(!!u),r(!!u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[us],r(!1))}}}const gf=sS(),zf=qr(gf,t=>Ct(gf)),as="useWeightOrdering";function oS(){const t=zr(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[as]?JSON.parse(localStorage[as]):!1),{subscribe:e,update:u=>{i&&(localStorage[as]=JSON.stringify(!!u),r(!!u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[as],r(!1))}}}const vf=oS(),Wf=qr(vf,t=>Ct(vf));var mf=function(t,e){return mf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},mf(t,e)};function Hf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}mf(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var _f,Gf=function(){function t(){}return t._xfnv1a=function(e){for(var r=2166136261,n=0;n<e.length;n++)r=Math.imul(r^e.charCodeAt(n),16777619);return function(){return r+=r<<13,r^=r>>>7,r+=r<<3,r^=r>>>17,(r+=r<<5)>>>0}},t}(),lS=function(t){function e(r){var n=t.call(this)||this;return n.a=e._xfnv1a(r)(),n}return Hf(e,t),e.prototype.next=function(){var r=this.a+=1831565813;return r=Math.imul(r^r>>>15,1|r),(((r^=r+Math.imul(r^r>>>7,61|r))^r>>>14)>>>0)/4294967296},e}(Gf),fS=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Hf(e,t),e.prototype.next=function(){this.a>>>=0,this.b>>>=0,this.c>>>=0,this.d>>>=0;var r=this.a+this.b|0;return this.a=this.b^this.b>>>9,this.b=this.c+(this.c<<3)|0,this.c=this.c<<21|this.c>>>11,this.d=this.d+1|0,r=r+this.d|0,this.c=this.c+r|0,(r>>>0)/4294967296},e}(Gf),cS=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Hf(e,t),e.prototype.next=function(){var r=this.b<<9,n=5*this.a;return n=n<<7|9*(n>>>25),this.c^=this.a,this.d^=this.b,this.b^=this.c,this.a^=this.d,this.c^=r,this.d=this.d<<11|this.d>>>21,(n>>>0)/4294967296},e}(Gf);(function(t){t.sfc32="sfc32",t.mulberry32="mulberry32",t.xoshiro128ss="xoshiro128ss"})(_f||(_f={}));var hS=function(){function t(e,r){r===void 0&&(r=_f.sfc32),this.str=e,this.prng=r,this.generator=this._initializeGenerator()}return t.prototype.next=function(){return this.generator.next()},t.prototype._initializeGenerator=function(){if(function(r){return r===null}(e=this.str)||function(r){return r===void 0}(e))return this.wrap();var e;switch(this.prng){case"sfc32":return new fS(this.str);case"mulberry32":return new lS(this.str);case"xoshiro128ss":return new cS(this.str);default:return this.wrap()}},t.prototype.wrap=function(){return{next:function(){return Math.random()}}},t}();const zl="slotSet";function dS(){const t=zr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((u,o)=>{if(o.startsWith(zl)){const s=o.split("_")[1];u[s]=JSON.parse(localStorage[o])}return u},{})||{}),{subscribe:e,update:(u,o)=>{const s=Ct(t),p={...s[u]||{},...o};i&&(localStorage[`${zl}_${u}`]=JSON.stringify(p));const c={...s,[u]:p};r(c)},get:u=>Ct(t)[u],getAll:()=>Ct(t),delete:u=>{i&&delete localStorage[`${zl}_${u}`];const o={...Ct(t)};delete o[u],r(o)}}}const Ei=dS(),pS=qr(Ei,t=>Ct(Ei));function Ed(){return(Math.random()*1e6).toFixed(0)}function gS(){const t=zr(Ed()),{subscribe:e,set:r}=t;return{subscribe:e,get:()=>Ct(t),shuffle:()=>{r(Ed())}}}const Eu=gS(),ao=qr(Eu,t=>Ct(Eu));function Rs(t){let e=t.replace(/\s+/g,"_");return e=e.toUpperCase(),"$"+e}function Cd(t){const e=t.length>0&&t.length<32,r=/^[a-zA-Z0-9 ]+$/.test(t),n=/^[a-zA-Z]/.test(t),i=/[a-zA-Z0-9]$/.test(t);return e&&r&&n&&i}function vS(){const t=Ei.getAll();return Object.values(t).reduce((r,n)=>{const i=Rs(n.name);return i&&(r[i]=[...n.values]),r},{})}function mS(t,e){const r=new hS(e);return Object.entries(t).reduce((i,[u,o])=>(i[u]=[...o].sort(()=>r.next()-.5),i),{})}function ca(t,e){let r=mS(vS(),e),n=t;for(const[i,u]of Object.entries(r)){if(u.length===0)continue;let o=0;for(;n.includes(i);)o>=u.length&&(o=0),n=n.replace(i,u[o]),o++}return n}function _S(t){const e=[],r=/((?:[^:]+|:(?!:))+)(?:::(\d+(?:\.\d+)?))?(?=\s|$)/g;let n;for(;(n=r.exec(t))!==null;){const i=n[1].trim(),u=n[2]?parseFloat(n[2]):1;i&&e.push([i,u])}return e}function Wl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=t.length-1;let r=t;for(;r[e]===",";)r=r.slice(0,e);return r}function Hl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=["-","#","*","•","◦",">","<","+","^","~","(",")","[","]","{","}"];let r=t.trim();for(;e.includes(r[0]);)r=r.slice(1).trim();return/^\d+(\.|\))\s/.test(r)&&(r=r.replace(/^\d+(\.|\))\s/,"")),r}function Df(t){if(t=t.replace(/^\n+|\n+$/g,""),t.includes("::"))return _S(t);if(t.includes(`
`))return t.split(`
`).map(u=>Hl(Wl(u))).filter(u=>u.length>0).map(u=>[u,1]);const e=t.match(/[^.!?]+[.!?]+/g)||[],r=e.length,n=t.split(",").map(u=>Hl(Wl(u))).filter(u=>u.length>0),i=n.length-1;return r>i?e.map(u=>Hl(Wl(u))).filter(u=>u.length>0).map(u=>[u,1]):n.map(u=>[u,1])}function Ls(t,e,r){let n=Object.entries(t.weightedPrompts);return e&&(n=n.sort((i,u)=>Si(t,parseInt(u[0]))-Si(t,parseInt(i[0])))),r||(n=n.filter(i=>r||Si(t,parseInt(i[0])))),n}function DS(t){return t.trim().endsWith(".")}function bS(t){let e="",r=[];return t.forEach((n,i)=>{DS(n)?(r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+". ",r=[]),e+=n+" "):r.push(n.trim())}),r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+"."),e.trim()}function bf(t,e,r,n,i){if(r)return Ls(t,n,i).map(([o,s],f)=>`${ca(s.text,`${e}${o}${f}`)}::${Si(t,parseInt(o))}`).join(" ");const u=Ls(t,n,i).map(([o,s],f)=>ca(s.text,`${e}${o}${f}`));return bS(u)}function Fd(t,e,r){const n=t.slice();return n[4]=e[r][0],n[5]=e[r][1],n[7]=r,n}function Sd(t,e){let r,n=ca(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"",i,u,o,s=Si(e[0],parseInt(e[4]))+"",f,p,c;return{key:t,first:null,c(){r=Z("span"),i=Re(n),u=Re("::"),o=Z("b"),f=Re(s),p=Ie(),this.h()},l(d){r=X(d,"SPAN",{style:!0});var h=G(r);i=Le(h,n),u=Le(h,"::"),o=X(h,"B",{});var g=G(o);f=Le(g,s),p=Ne(g),g.forEach(I),h.forEach(I),this.h()},h(){B(r,"style",c=`color: rgba(255,255,255,${Math.max(.25,S0(e[0],parseInt(e[4])))});`),this.first=r},m(d,h){me(d,r,h),R(r,i),R(r,u),R(r,o),R(o,f),R(o,p)},p(d,h){e=d,h&15&&n!==(n=ca(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"")&&Zr(i,n),h&7&&s!==(s=Si(e[0],parseInt(e[4]))+"")&&Zr(f,s),h&7&&c!==(c=`color: rgba(255,255,255,${Math.max(.25,S0(e[0],parseInt(e[4])))});`)&&B(r,"style",c)},d(d){d&&I(r)}}}function yS(t){let e,r,n=[],i=new Map,u=Ls(t[0],t[1],t[2]);const o=s=>s[4];for(let s=0;s<u.length;s+=1){let f=Fd(t,u,s),p=o(f);i.set(p,n[s]=Sd(p,f))}return{c(){e=Z("div"),r=Z("p");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=X(s,"DIV",{class:!0});var f=G(e);r=X(f,"P",{class:!0});var p=G(r);for(let c=0;c<n.length;c+=1)n[c].l(p);p.forEach(I),f.forEach(I),this.h()},h(){B(r,"class","text-sm select-none"),B(e,"class","overflow-y-auto h-full")},m(s,f){me(s,e,f),R(e,r);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(r,null)},p(s,[f]){f&15&&(u=Ls(s[0],s[1],s[2]),n=$n(n,f,o,1,s,u,i,r,Pi,Sd,null,Fd))},i:Te,o:Te,d(s){s&&I(e);for(let f=0;f<n.length;f+=1)n[f].d()}}}function wS(t,e,r){let n,i,u,o;return ut(t,Sr,s=>r(0,n=s)),ut(t,Wf,s=>r(1,i=s)),ut(t,zf,s=>r(2,u=s)),ut(t,ao,s=>r(3,o=s)),[n,i,u,o]}class AS extends Dt{constructor(e){super(),bt(this,e,wS,yS,yt,{})}}const ss="outputMultiPrompt";function ES(){const t=zr(!0),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[ss]?JSON.parse(localStorage[ss]):!1),{subscribe:e,update:u=>{i&&(localStorage[ss]=JSON.stringify(!!u),r(!!u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[ss],r(!0))}}}const yf=ES(),S1=qr(yf,t=>Ct(yf));function CS(t){let e,r,n,i=bf(t[0],t[1],t[2],t[3],t[4])+"",u;return{c(){e=Z("div"),r=Z("p"),n=Z("span"),u=Re(i),this.h()},l(o){e=X(o,"DIV",{class:!0});var s=G(e);r=X(s,"P",{class:!0});var f=G(r);n=X(f,"SPAN",{style:!0});var p=G(n);u=Le(p,i),p.forEach(I),f.forEach(I),s.forEach(I),this.h()},h(){B(n,"style","color: rgba(255,255,255,0.75});"),B(r,"class","text-sm select-none"),B(e,"class","overflow-y-auto h-full")},m(o,s){me(o,e,s),R(e,r),R(r,n),R(n,u)},p(o,[s]){s&31&&i!==(i=bf(o[0],o[1],o[2],o[3],o[4])+"")&&Zr(u,i)},i:Te,o:Te,d(o){o&&I(e)}}}function FS(t,e,r){let n,i,u,o,s;return ut(t,Sr,f=>r(0,n=f)),ut(t,ao,f=>r(1,i=f)),ut(t,S1,f=>r(2,u=f)),ut(t,Wf,f=>r(3,o=f)),ut(t,zf,f=>r(4,s=f)),[n,i,u,o,s]}class SS extends Dt{constructor(e){super(),bt(this,e,FS,CS,yt,{})}}function BS(t){let e,r;return e=new SS({}),{c(){Ke(e.$$.fragment)},l(n){$e(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(ye(e.$$.fragment,n),r=!0)},o(n){Ee(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function OS(t){let e,r;return e=new AS({}),{c(){Ke(e.$$.fragment)},l(n){$e(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(ye(e.$$.fragment,n),r=!0)},o(n){Ee(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function MS(t){let e,r,n,i,u,o,s,f,p,c,d=t[2]?"Multi":"Single",h,g,b,v,_,D,C,A,F,E,S,T,P,x,H,re,V,Y;const U=[OS,BS],K=[];function q(te,Q){return te[2]?0:1}return r=q(t),n=K[r]=U[r](t),{c(){e=Z("div"),n.c(),i=Ie(),u=Z("div"),o=Z("div"),s=Z("input"),f=Ie(),p=Z("label"),c=Z("span"),h=Re(d),g=Ie(),b=Z("div"),v=Z("input"),_=Ie(),D=Z("label"),C=Z("span"),A=Re("Use Weight Ordering"),F=Ie(),E=Z("div"),S=Z("input"),T=Ie(),P=Z("label"),x=Z("span"),H=Re("Include Zero Weights"),this.h()},l(te){e=X(te,"DIV",{class:!0});var Q=G(e);n.l(Q),Q.forEach(I),i=Ne(te),u=X(te,"DIV",{class:!0});var J=G(u);o=X(J,"DIV",{class:!0});var le=G(o);s=X(le,"INPUT",{type:!0,class:!0}),f=Ne(le),p=X(le,"LABEL",{class:!0});var _e=G(p);c=X(_e,"SPAN",{class:!0});var Fe=G(c);h=Le(Fe,d),Fe.forEach(I),_e.forEach(I),le.forEach(I),g=Ne(J),b=X(J,"DIV",{class:!0});var Ae=G(b);v=X(Ae,"INPUT",{type:!0,class:!0}),_=Ne(Ae),D=X(Ae,"LABEL",{class:!0});var Me=G(D);C=X(Me,"SPAN",{class:!0});var qe=G(C);A=Le(qe,"Use Weight Ordering"),qe.forEach(I),Me.forEach(I),Ae.forEach(I),F=Ne(J),E=X(J,"DIV",{class:!0});var Ve=G(E);S=X(Ve,"INPUT",{type:!0,class:!0}),T=Ne(Ve),P=X(Ve,"LABEL",{class:!0});var tt=G(P);x=X(tt,"SPAN",{class:!0});var He=G(x);H=Le(He,"Include Zero Weights"),He.forEach(I),tt.forEach(I),Ve.forEach(I),J.forEach(I),this.h()},h(){B(e,"class","normal-case font-light text-left cursor-copy bg-slate-900 rounded-t-md rounded-br-md p-4 w-full h-28 active:bg-slate-950 hover:bg-slate-800"),s.checked=t[2],B(s,"type","checkbox"),B(s,"class","toggle toggle-sm mt-2 mr-2"),B(c,"class","label-text"),B(p,"class","label w-10"),B(o,"class","mx-2 flex"),v.checked=t[1],B(v,"type","checkbox"),B(v,"class","toggle toggle-sm mt-2 mr-2"),B(C,"class","label-text"),B(D,"class","label"),B(b,"class","mx-2 flex"),S.checked=t[0],B(S,"type","checkbox"),B(S,"class","toggle toggle-sm mt-2 mr-2"),B(x,"class","label-text"),B(P,"class","label"),B(E,"class","mx-2 flex"),B(u,"class","w-full rounded-b-md flex pl-2 justify-start bg-slate-900")},m(te,Q){me(te,e,Q),K[r].m(e,null),me(te,i,Q),me(te,u,Q),R(u,o),R(o,s),R(o,f),R(o,p),R(p,c),R(c,h),R(u,g),R(u,b),R(b,v),R(b,_),R(b,D),R(D,C),R(C,A),R(u,F),R(u,E),R(E,S),R(E,T),R(E,P),R(P,x),R(x,H),re=!0,V||(Y=[Se(e,"click",t[3]),Se(s,"change",t[4]),Se(v,"change",t[5]),Se(S,"change",t[6])],V=!0)},p(te,[Q]){let J=r;r=q(te),r!==J&&(_r(),Ee(K[J],1,1,()=>{K[J]=null}),Dr(),n=K[r],n||(n=K[r]=U[r](te),n.c()),ye(n,1),n.m(e,null)),(!re||Q&4)&&(s.checked=te[2]),(!re||Q&4)&&d!==(d=te[2]?"Multi":"Single")&&Zr(h,d),(!re||Q&2)&&(v.checked=te[1]),(!re||Q&1)&&(S.checked=te[0])},i(te){re||(ye(n),re=!0)},o(te){Ee(n),re=!1},d(te){te&&I(e),K[r].d(),te&&I(i),te&&I(u),V=!1,ar(Y)}}}function PS(t,e,r){let n,i,u,o,s;ut(t,zf,h=>r(0,n=h)),ut(t,Wf,h=>r(1,i=h)),ut(t,S1,h=>r(2,u=h)),ut(t,ao,h=>r(7,o=h)),ut(t,Sr,h=>r(8,s=h));function f(){const h=bf(s,o,u,i,n);navigator.clipboard.writeText(h),Eu.shuffle()}function p(){yf.update(!u)}function c(){vf.update(!i)}function d(){gf.update(!n)}return[n,i,u,f,p,c,d]}class TS extends Dt{constructor(e){super(),bt(this,e,PS,MS,yt,{})}}function kS(t){let e,r,n,i;return{c(){e=dt("g"),r=dt("circle"),this.h()},l(u){e=pt(u,"g",{});var o=G(e);r=pt(o,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),G(r).forEach(I),o.forEach(I),this.h()},h(){B(r,"cx",n=t[0][0]),B(r,"cy",i=t[0][1]),B(r,"r",t[1]),B(r,"stroke",t[3]),B(r,"stroke-width",t[2]),Yt(r,"fill","rgba(0,0,0,0)")},m(u,o){me(u,e,o),R(e,r)},p(u,[o]){o&1&&n!==(n=u[0][0])&&B(r,"cx",n),o&1&&i!==(i=u[0][1])&&B(r,"cy",i),o&2&&B(r,"r",u[1]),o&8&&B(r,"stroke",u[3]),o&4&&B(r,"stroke-width",u[2])},i:Te,o:Te,d(u){u&&I(e)}}}function IS(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:u=20}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,u=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,u,o]}class NS extends Dt{constructor(e){super(),bt(this,e,IS,kS,yt,{xy:0,radius:1,stroke:2,color:3})}}function xS(t){let e,r,n,i,u;return{c(){e=dt("polygon"),this.h()},l(o){e=pt(o,"polygon",{points:!0,"stroke-width":!0,fill:!0,transform:!0}),G(e).forEach(I),this.h()},h(){B(e,"points",r=`${t[7][0]},${t[7][1]} ${t[9][0]},${t[9][1]} ${t[8][0]},${t[8][1]} ${t[6][0]},${t[6][1]} ${t[4][0]},${t[4][1]} ${t[5][0]},${t[5][1]}`),B(e,"stroke-width",4),B(e,"fill",t[3]),B(e,"transform",n=`rotate(${t[1].toFixed(2)} ${t[0][0]} ${t[0][1]}) rotate(${t[2]?"180":"0"} ${(t[7][0]+t[6][0])/2} ${(t[7][1]+t[6][1])/2})`)},m(o,s){me(o,e,s),i||(u=[Se(e,"mouseover",t[10]),Se(e,"mouseout",t[11]),Se(e,"mousedown",t[12])],i=!0)},p(o,[s]){s&1008&&r!==(r=`${o[7][0]},${o[7][1]} ${o[9][0]},${o[9][1]} ${o[8][0]},${o[8][1]} ${o[6][0]},${o[6][1]} ${o[4][0]},${o[4][1]} ${o[5][0]},${o[5][1]}`)&&B(e,"points",r),s&8&&B(e,"fill",o[3]),s&199&&n!==(n=`rotate(${o[1].toFixed(2)} ${o[0][0]} ${o[0][1]}) rotate(${o[2]?"180":"0"} ${(o[7][0]+o[6][0])/2} ${(o[7][1]+o[6][1])/2})`)&&B(e,"transform",n)},i:Te,o:Te,d(o){o&&I(e),i=!1,ar(u)}}}function RS(t,e,r){let n,i,u,o,s,f,{xy:p=[500,500]}=e,{radius:c=400}=e,{stroke:d=20}=e,{color:h="rgba(46,67,101, 0.4)"}=e,{hoverColor:g="white"}=e,{angle:b=0}=e,{handleMouseDown:v=E=>{}}=e,{reverse:_=!1}=e,D=h;function C(){r(3,D=g)}function A(){r(3,D=h)}function F(E){v(E)}return t.$$set=E=>{"xy"in E&&r(0,p=E.xy),"radius"in E&&r(13,c=E.radius),"stroke"in E&&r(14,d=E.stroke),"color"in E&&r(15,h=E.color),"hoverColor"in E&&r(16,g=E.hoverColor),"angle"in E&&r(1,b=E.angle),"handleMouseDown"in E&&r(17,v=E.handleMouseDown),"reverse"in E&&r(2,_=E.reverse)},t.$$.update=()=>{t.$$.dirty&24577&&r(9,n=Nr(p,[-4,1],c-d/2)),t.$$.dirty&24577&&r(8,i=Nr(p,[1,1],c-d/2)),t.$$.dirty&8193&&r(7,u=Nr(p,[0,1],c)),t.$$.dirty&8193&&r(6,o=Nr(p,[4,1],c)),t.$$.dirty&24577&&r(5,s=Nr(p,[-3,1],c+d/2)),t.$$.dirty&24577&&r(4,f=Nr(p,[1,1],c+d/2))},[p,b,_,D,f,s,o,u,i,n,C,A,F,c,d,h,g,v]}class LS extends Dt{constructor(e){super(),bt(this,e,RS,xS,yt,{xy:0,radius:13,stroke:14,color:15,hoverColor:16,angle:1,handleMouseDown:17,reverse:2})}}function Bd(t,e,r){const n=t.slice();return n[19]=e[r][0],n[20]=e[r][1],n}function Od(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,u;e=new kf({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),s=[];for(let c=0;c<o.length;c+=1)s[c]=Md(Bd(t,o,c));const f=c=>Ee(s[c],1,1,()=>{s[c]=null});let p=n&&Pd(t);return{c(){Ke(e.$$.fragment);for(let c=0;c<s.length;c+=1)s[c].c();r=Tt(),p&&p.c(),i=Tt()},l(c){$e(e.$$.fragment,c);for(let d=0;d<s.length;d+=1)s[d].l(c);r=Tt(),p&&p.l(c),i=Tt()},m(c,d){Ye(e,c,d);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(c,d);me(c,r,d),p&&p.m(c,d),me(c,i,d),u=!0},p(c,d){const h={};if(d&1&&(h.xy=c[0]),d&2&&(h.radius=c[1]),e.$set(h),d&1660){o=Object.entries(c[5].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=Bd(c,o,g);s[g]?(s[g].p(b,d),ye(s[g],1)):(s[g]=Md(b),s[g].c(),ye(s[g],1),s[g].m(r.parentNode,r))}for(_r(),g=o.length;g<s.length;g+=1)f(g);Dr()}d&32&&(n=Object.entries(c[5].weightedPrompts).length>0),n?p?(p.p(c,d),d&32&&ye(p,1)):(p=Pd(c),p.c(),ye(p,1),p.m(i.parentNode,i)):p&&(_r(),Ee(p,1,1,()=>{p=null}),Dr())},i(c){if(!u){ye(e.$$.fragment,c);for(let d=0;d<o.length;d+=1)ye(s[d]);ye(p),u=!0}},o(c){Ee(e.$$.fragment,c),s=s.filter(Boolean);for(let d=0;d<s.length;d+=1)Ee(s[d]);Ee(p),u=!1},d(c){Ze(e,c),zs(s,c),c&&I(r),p&&p.d(c),c&&I(i)}}}function Md(t){let e,r,n;e=new da({props:{xy:t[10](t[6][t[19]].xy,Rr(t[3],t[20].text.length,t[4])),color:`rgba(255,255,255,${Fr(t[6][t[19]].unitWeight)}`,wh:Rr(t[3],t[20].text.length,t[4]),fontSize:t[4],text:t[20].text}});function i(){return t[13](t[19])}return r=new Cu({props:{xy:t[6][t[19]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:i}}),{c(){Ke(e.$$.fragment),Ke(r.$$.fragment)},l(u){$e(e.$$.fragment,u),$e(r.$$.fragment,u)},m(u,o){Ye(e,u,o),Ye(r,u,o),n=!0},p(u,o){t=u;const s={};o&120&&(s.xy=t[10](t[6][t[19]].xy,Rr(t[3],t[20].text.length,t[4]))),o&96&&(s.color=`rgba(255,255,255,${Fr(t[6][t[19]].unitWeight)}`),o&56&&(s.wh=Rr(t[3],t[20].text.length,t[4])),o&16&&(s.fontSize=t[4]),o&32&&(s.text=t[20].text),e.$set(s);const f={};o&96&&(f.xy=t[6][t[19]].xy),o&4&&(f.radius=t[2]),o&32&&(f.handleMouseDown=i),r.$set(f)},i(u){n||(ye(e.$$.fragment,u),ye(r.$$.fragment,u),n=!0)},o(u){Ee(e.$$.fragment,u),Ee(r.$$.fragment,u),n=!1},d(u){Ze(e,u),Ze(r,u)}}}function Pd(t){let e,r,n;return e=new NS({props:{xy:t[0],radius:t[7],stroke:30}}),r=new LS({props:{reverse:t[5].ringReverse,xy:t[0],radius:t[7],stroke:30,angle:t[5].ringStartAngle,color:"rgba(136,157,191, 1)",handleMouseDown:t[14]}}),{c(){Ke(e.$$.fragment),Ke(r.$$.fragment)},l(i){$e(e.$$.fragment,i),$e(r.$$.fragment,i)},m(i,u){Ye(e,i,u),Ye(r,i,u),n=!0},p(i,u){const o={};u&1&&(o.xy=i[0]),u&128&&(o.radius=i[7]),e.$set(o);const s={};u&32&&(s.reverse=i[5].ringReverse),u&1&&(s.xy=i[0]),u&128&&(s.radius=i[7]),u&32&&(s.angle=i[5].ringStartAngle),r.$set(s)},i(i){n||(ye(e.$$.fragment,i),ye(r.$$.fragment,i),n=!0)},o(i){Ee(e.$$.fragment,i),Ee(r.$$.fragment,i),n=!1},d(i){Ze(e,i),Ze(r,i)}}}function US(t){let e,r,n,i,u=t[6]&&t[5].weightedPrompts&&Od(t);return{c(){e=dt("svg"),u&&u.c(),this.h()},l(o){e=pt(o,"svg",{id:!0,class:!0});var s=G(e);u&&u.l(s),s.forEach(I),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(o,s){me(o,e,s),u&&u.m(e,null),r=!0,n||(i=[Se(e,"mousemove",t[11]),Se(e,"mouseup",t[8]),Se(e,"dblclick",t[12])],n=!0)},p(o,[s]){o[6]&&o[5].weightedPrompts?u?(u.p(o,s),s&96&&ye(u,1)):(u=Od(o),u.c(),ye(u,1),u.m(e,null)):u&&(_r(),Ee(u,1,1,()=>{u=null}),Dr())},i(o){r||(ye(u),r=!0)},o(o){Ee(u),r=!1},d(o){o&&I(e),u&&u.d(),n=!1,ar(i)}}}function Td(t,e){return t?Object.entries(t).reduce((r,[n,i],u)=>{const o=r[n]||u*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function VS(t,e,r){let n,i,u;ut(t,Sr,S=>r(5,u=S));let{center:o=[450,450]}=e,{radius:s=250}=e,{pointRadius:f=10}=e,{textWidth:p=150}=e,{fontSize:c=13}=e,d=[0,0],h=null;function g(S){h=null}function b(S){h=S}function v(S,T){let P=xn(S,o,s)[0]-180;P<0&&(P+=360);const x=If(pa(T),P);return $r(S,x)}function _(S){console.log(s,n);const T=Vr(xn(la(S,o,n),o,n)[0]);r(6,i=A(u.weightedPrompts,o,s,u.ringWeightScaling,u.ringExponentialScaling,T,u.ringAngles))}function D(S){if(d=fi(S),h==="main")_(d);else if(h){const T={...u.weightedPrompts[h]},P=la(d,o,s),x=xn(P,o,s)[0],H={...u.ringAngles};H[T.id]=x;const re={...u.weightedPrompts};re[h]=T,r(6,i=A(re,o,s,u.ringWeightScaling,u.ringExponentialScaling,u.ringStartAngle,H))}}function C(S){d=fi(S),_(d)}function A(S,T,P,x,H,re,V){if(!S||!T||!P||!x)return null;let Y=Object.entries(S).reduce((K,[q,te])=>{const J=u.ringReverse?re-V[q]:V[q]-re,le=Vr(J),_e=Math.pow(1-le/360,H?x:1);return K[q]={angleDifference:le,xy:Nr(T,[V[q],1],P),unitWeight:_e},K},{});const U={...S};return Object.entries(Y).forEach(([K,q])=>{U[K].ringWeight=q.unitWeight}),Mt.update({...u,ringStartAngle:re,weightedPrompts:U,ringAngles:V}),Y}const F=S=>b(S),E=()=>b("main");return t.$$set=S=>{"center"in S&&r(0,o=S.center),"radius"in S&&r(1,s=S.radius),"pointRadius"in S&&r(2,f=S.pointRadius),"textWidth"in S&&r(3,p=S.textWidth),"fontSize"in S&&r(4,c=S.fontSize)},t.$$.update=()=>{t.$$.dirty&2&&r(7,n=s-30),t.$$.dirty&32&&Object.keys(u.ringAngles).length!==Object.keys(u.weightedPrompts).length&&Mt.update({...u,ringAngles:Td(u.weightedPrompts,{})}),t.$$.dirty&35&&r(6,i=A(u.weightedPrompts,o,s,u.ringWeightScaling,u.ringExponentialScaling,u.ringStartAngle,u.ringAngles||Td(u.weightedPrompts,{})))},[o,s,f,p,c,u,i,n,g,b,v,D,C,F,E]}class jS extends Dt{constructor(e){super(),bt(this,e,VS,US,yt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function kd(t){let e,r,n,i,u,o,s,f;return{c(){e=Z("div"),r=Z("label"),n=Z("span"),i=Re("Scaling Power"),u=Ie(),o=Z("input"),this.h()},l(p){e=X(p,"DIV",{class:!0});var c=G(e);r=X(c,"LABEL",{class:!0});var d=G(r);n=X(d,"SPAN",{class:!0});var h=G(n);i=Le(h,"Scaling Power"),h.forEach(I),d.forEach(I),u=Ne(c),o=X(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(I),this.h()},h(){B(n,"class","label-text"),B(r,"class","label"),B(o,"type","range"),B(o,"min","0.5"),B(o,"max","5"),B(o,"step","0.1"),B(o,"class","range range-xs"),B(e,"class","w-full px-2")},m(p,c){me(p,e,c),R(e,r),R(r,n),R(n,i),R(e,u),R(e,o),rn(o,t[0]),s||(f=[Se(o,"change",t[7]),Se(o,"input",t[7])],s=!0)},p(p,c){c&1&&rn(o,p[0])},d(p){p&&I(e),s=!1,ar(f)}}}function qS(t){let e,r,n,i,u,o,s,f,p,c,d,h,g,b,v,_,D,C,A;r=new jS({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let F=t[1]&&kd(t);return{c(){e=Z("div"),Ke(r.$$.fragment),i=Ie(),u=Z("div"),o=Z("div"),s=Z("label"),f=Z("span"),p=Re("Exponential Scaling"),c=Ie(),d=Z("input"),h=Ie(),F&&F.c(),g=Ie(),b=Z("div"),v=Z("button"),_=Re("Reverse"),this.h()},l(E){e=X(E,"DIV",{class:!0});var S=G(e);$e(r.$$.fragment,S),S.forEach(I),i=Ne(E),u=X(E,"DIV",{class:!0});var T=G(u);o=X(T,"DIV",{class:!0});var P=G(o);s=X(P,"LABEL",{class:!0});var x=G(s);f=X(x,"SPAN",{class:!0});var H=G(f);p=Le(H,"Exponential Scaling"),H.forEach(I),x.forEach(I),c=Ne(P),d=X(P,"INPUT",{type:!0,class:!0}),P.forEach(I),h=Ne(T),F&&F.l(T),g=Ne(T),b=X(T,"DIV",{class:!0});var re=G(b);v=X(re,"BUTTON",{class:!0});var V=G(v);_=Le(V,"Reverse"),V.forEach(I),re.forEach(I),T.forEach(I),this.h()},h(){B(e,"class","w-full h-full"),Zi(()=>t[5].call(e)),B(f,"class","label-text"),B(s,"class","label"),B(d,"type","checkbox"),B(d,"class","toggle toggle-xs"),B(o,"class","w-52 px-2"),B(v,"class","btn btn-xs btn-primary"),B(b,"class","w-32 px-2 pb-1 flex flex-col justify-end"),B(u,"class","px-2 py-4 pb-0 flex")},m(E,S){me(E,e,S),Ye(r,e,null),n=ha(e,t[5].bind(e)),me(E,i,S),me(E,u,S),R(u,o),R(o,s),R(s,f),R(f,p),R(o,c),R(o,d),d.checked=t[1],R(u,h),F&&F.m(u,null),R(u,g),R(u,b),R(b,v),R(v,_),D=!0,C||(A=[Se(d,"change",t[6]),Se(v,"click",t[4])],C=!0)},p(E,[S]){const T={};S&12&&(T.center=[Math.round(E[2]/2),Math.round(E[3]/2)]),S&12&&(T.radius=Math.round(Math.min(E[2],E[3])/2)-150),r.$set(T),S&2&&(d.checked=E[1]),E[1]?F?F.p(E,S):(F=kd(E),F.c(),F.m(u,g)):F&&(F.d(1),F=null)},i(E){D||(ye(r.$$.fragment,E),D=!0)},o(E){Ee(r.$$.fragment,E),D=!1},d(E){E&&I(e),Ze(r),n(),E&&I(i),E&&I(u),F&&F.d(),C=!1,ar(A)}}}function zS(t,e,r){let n;ut(t,Sr,h=>r(8,n=h));let i,u,o=n.ringWeightScaling||2,s=Ef(n.ringExponentialScaling)?!0:n.ringExponentialScaling;function f(){Mt.update({...Mt.get(),ringReverse:!n.ringReverse})}function p(){i=this.clientWidth,u=this.clientHeight,r(2,i),r(3,u)}function c(){s=this.checked,r(1,s)}function d(){o=dp(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&Mt.update({...Mt.get(),ringExponentialScaling:s,ringWeightScaling:o})},[o,s,i,u,f,p,c,d]}class WS extends Dt{constructor(e){super(),bt(this,e,zS,qS,yt,{})}}function Id(t){let e,r;return e=new EE({}),{c(){Ke(e.$$.fragment)},l(n){$e(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(ye(e.$$.fragment,n),r=!0)},o(n){Ee(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function HS(t){let e,r;return e=new aS({}),{c(){Ke(e.$$.fragment)},l(n){$e(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(ye(e.$$.fragment,n),r=!0)},o(n){Ee(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function GS(t){let e,r;return e=new WS({}),{c(){Ke(e.$$.fragment)},l(n){$e(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(ye(e.$$.fragment,n),r=!0)},o(n){Ee(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function KS(t){let e,r;return e=new GE({}),{c(){Ke(e.$$.fragment)},l(n){$e(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(ye(e.$$.fragment,n),r=!0)},o(n){Ee(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function $S(t){let e,r;return e=new fC({}),{c(){Ke(e.$$.fragment)},l(n){$e(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(ye(e.$$.fragment,n),r=!0)},o(n){Ee(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function YS(t){let e,r;return e=new eC({}),{c(){Ke(e.$$.fragment)},l(n){$e(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(ye(e.$$.fragment,n),r=!0)},o(n){Ee(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function ZS(t){let e,r,n,i,u,o,s,f,p,c,d,h;i=new gE({});let g=(t[0].weightMode===vt.Circle||t[0].weightMode===vt.Pie||t[0].weightMode===vt.Ring)&&Id();const b=[YS,$S,KS,GS,HS],v=[];function _(D,C){return D[0].weightMode===vt.Bars?0:D[0].weightMode===vt.Pie?1:D[0].weightMode===vt.Circle?2:D[0].weightMode===vt.Ring?3:D[0].weightMode===vt.Embed?4:-1}return~(s=_(t))&&(f=v[s]=b[s](t)),d=new TS({}),{c(){e=Z("div"),r=Z("div"),n=Z("div"),Ke(i.$$.fragment),u=Ie(),g&&g.c(),o=Ie(),f&&f.c(),p=Ie(),c=Z("div"),Ke(d.$$.fragment),this.h()},l(D){e=X(D,"DIV",{class:!0});var C=G(e);r=X(C,"DIV",{class:!0});var A=G(r);n=X(A,"DIV",{class:!0});var F=G(n);$e(i.$$.fragment,F),u=Ne(F),g&&g.l(F),F.forEach(I),o=Ne(A),f&&f.l(A),p=Ne(A),c=X(A,"DIV",{class:!0});var E=G(c);$e(d.$$.fragment,E),E.forEach(I),A.forEach(I),C.forEach(I),this.h()},h(){B(n,"class","absolute top-0 right-0 z-10"),B(c,"class","h-48 w-full p-4 flex flex-col"),B(r,"class","flex flex-col h-full place-content-between"),B(e,"class","relative w-full h-full flex flex-col")},m(D,C){me(D,e,C),R(e,r),R(r,n),Ye(i,n,null),R(n,u),g&&g.m(n,null),R(r,o),~s&&v[s].m(r,null),R(r,p),R(r,c),Ye(d,c,null),h=!0},p(D,[C]){D[0].weightMode===vt.Circle||D[0].weightMode===vt.Pie||D[0].weightMode===vt.Ring?g?C&1&&ye(g,1):(g=Id(),g.c(),ye(g,1),g.m(n,null)):g&&(_r(),Ee(g,1,1,()=>{g=null}),Dr());let A=s;s=_(D),s!==A&&(f&&(_r(),Ee(v[A],1,1,()=>{v[A]=null}),Dr()),~s?(f=v[s],f||(f=v[s]=b[s](D),f.c()),ye(f,1),f.m(r,p)):f=null)},i(D){h||(ye(i.$$.fragment,D),ye(g),ye(f),ye(d.$$.fragment,D),h=!0)},o(D){Ee(i.$$.fragment,D),Ee(g),Ee(f),Ee(d.$$.fragment,D),h=!1},d(D){D&&I(e),Ze(i),g&&g.d(),~s&&v[s].d(),Ze(d)}}}function XS(t,e,r){let n;return ut(t,Sr,i=>r(0,n=i)),[n]}class JS extends Dt{constructor(e){super(),bt(this,e,XS,ZS,yt,{})}}var Us={},QS={get exports(){return Us},set exports(t){Us=t}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var r,n="4.17.21",i=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",s="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",p=500,c="__lodash_placeholder__",d=1,h=2,g=4,b=1,v=2,_=1,D=2,C=4,A=8,F=16,E=32,S=64,T=128,P=256,x=512,H=30,re="...",V=800,Y=16,U=1,K=2,q=3,te=1/0,Q=9007199254740991,J=17976931348623157e292,le=0/0,_e=4294967295,Fe=_e-1,Ae=_e>>>1,Me=[["ary",T],["bind",_],["bindKey",D],["curry",A],["curryRight",F],["flip",x],["partial",E],["partialRight",S],["rearg",P]],qe="[object Arguments]",Ve="[object Array]",tt="[object AsyncFunction]",He="[object Boolean]",je="[object Date]",ze="[object DOMException]",mt="[object Error]",at="[object Function]",ft="[object GeneratorFunction]",st="[object Map]",ot="[object Number]",Xe="[object Null]",Je="[object Object]",Ce="[object Promise]",Pe="[object Proxy]",Ot="[object RegExp]",Vt="[object Set]",Ht="[object String]",j="[object Symbol]",W="[object Undefined]",ee="[object WeakMap]",fe="[object WeakSet]",ae="[object ArrayBuffer]",he="[object DataView]",se="[object Float32Array]",ce="[object Float64Array]",we="[object Int8Array]",xe="[object Int16Array]",rt="[object Int32Array]",Be="[object Uint8Array]",zt="[object Uint8ClampedArray]",Nt="[object Uint16Array]",rr="[object Uint32Array]",Zt=/\b__p \+= '';/g,br=/\b(__p \+=) '' \+/g,Xt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yr=/&(?:amp|lt|gt|quot|#39);/g,cr=/[&<>"']/g,hr=RegExp(yr.source),dn=RegExp(cr.source),pr=/<%-([\s\S]+?)%>/g,Bn=/<%([\s\S]+?)%>/g,Zn=/<%=([\s\S]+?)%>/g,Ln=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Un=/^\w*$/,Ji=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ii=/[\\^$.*+?()[\]{}|]/g,Su=RegExp(Ii.source),Br=/^\s+/,nr=/\s/,Bu=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ci=/\{\n\/\* \[wrapped with (.+)\] \*/,pn=/,? & /,Xn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ni=/[()=,{}\[\]\/\s]/,Ou=/\\(\\)?/g,Mu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qi=/\w*$/,Pu=/^[-+]0x[0-9a-f]+$/i,Tu=/^0b[01]+$/i,ku=/^\[object .+?Constructor\]$/,Iu=/^0o[0-7]+$/i,Nu=/^(?:0|[1-9]\d*)$/,xu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,hi=/($^)/,Ru=/['\n\r\u2028\u2029\\]/g,di="\\ud800-\\udfff",Lu="\\u0300-\\u036f",Uu="\\ufe20-\\ufe2f",Vu="\\u20d0-\\u20ff",eu=Lu+Uu+Vu,Vn="\\u2700-\\u27bf",wr="a-z\\xdf-\\xf6\\xf8-\\xff",sr="\\xac\\xb1\\xd7\\xf7",Wr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xi="\\u2000-\\u206f",Jn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jn="A-Z\\xc0-\\xd6\\xd8-\\xde",Ri="\\ufe0e\\ufe0f",On=sr+Wr+xi+Jn,gn="['’]",so="["+di+"]",ju="["+On+"]",tu="["+eu+"]",va="\\d+",y="["+Vn+"]",O="["+wr+"]",L="[^"+di+On+va+Vn+wr+jn+"]",ne="\\ud83c[\\udffb-\\udfff]",pe="(?:"+tu+"|"+ne+")",Oe="[^"+di+"]",gt="(?:\\ud83c[\\udde6-\\uddff]){2}",St="[\\ud800-\\udbff][\\udc00-\\udfff]",Kt="["+jn+"]",or="\\u200d",$f="(?:"+O+"|"+L+")",N1="(?:"+Kt+"|"+L+")",Yf="(?:"+gn+"(?:d|ll|m|re|s|t|ve))?",Zf="(?:"+gn+"(?:D|LL|M|RE|S|T|VE))?",Xf=pe+"?",Jf="["+Ri+"]?",x1="(?:"+or+"(?:"+[Oe,gt,St].join("|")+")"+Jf+Xf+")*",R1="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",L1="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qf=Jf+Xf+x1,U1="(?:"+[y,gt,St].join("|")+")"+Qf,V1="(?:"+[Oe+tu+"?",tu,gt,St,so].join("|")+")",j1=RegExp(gn,"g"),q1=RegExp(tu,"g"),oo=RegExp(ne+"(?="+ne+")|"+V1+Qf,"g"),z1=RegExp([Kt+"?"+O+"+"+Yf+"(?="+[ju,Kt,"$"].join("|")+")",N1+"+"+Zf+"(?="+[ju,Kt+$f,"$"].join("|")+")",Kt+"?"+$f+"+"+Yf,Kt+"+"+Zf,L1,R1,va,U1].join("|"),"g"),W1=RegExp("["+or+di+eu+Ri+"]"),H1=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,G1=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],K1=-1,Gt={};Gt[se]=Gt[ce]=Gt[we]=Gt[xe]=Gt[rt]=Gt[Be]=Gt[zt]=Gt[Nt]=Gt[rr]=!0,Gt[qe]=Gt[Ve]=Gt[ae]=Gt[He]=Gt[he]=Gt[je]=Gt[mt]=Gt[at]=Gt[st]=Gt[ot]=Gt[Je]=Gt[Ot]=Gt[Vt]=Gt[Ht]=Gt[ee]=!1;var Wt={};Wt[qe]=Wt[Ve]=Wt[ae]=Wt[he]=Wt[He]=Wt[je]=Wt[se]=Wt[ce]=Wt[we]=Wt[xe]=Wt[rt]=Wt[st]=Wt[ot]=Wt[Je]=Wt[Ot]=Wt[Vt]=Wt[Ht]=Wt[j]=Wt[Be]=Wt[zt]=Wt[Nt]=Wt[rr]=!0,Wt[mt]=Wt[at]=Wt[ee]=!1;var $1={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Y1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Z1={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},X1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},J1=parseFloat,Q1=parseInt,ec=typeof dr=="object"&&dr&&dr.Object===Object&&dr,eg=typeof self=="object"&&self&&self.Object===Object&&self,Or=ec||eg||Function("return this")(),lo=e&&!e.nodeType&&e,Li=lo&&!0&&t&&!t.nodeType&&t,tc=Li&&Li.exports===lo,fo=tc&&ec.process,vn=function(){try{var ie=Li&&Li.require&&Li.require("util").types;return ie||fo&&fo.binding&&fo.binding("util")}catch{}}(),rc=vn&&vn.isArrayBuffer,nc=vn&&vn.isDate,ic=vn&&vn.isMap,uc=vn&&vn.isRegExp,ac=vn&&vn.isSet,sc=vn&&vn.isTypedArray;function an(ie,de,oe){switch(oe.length){case 0:return ie.call(de);case 1:return ie.call(de,oe[0]);case 2:return ie.call(de,oe[0],oe[1]);case 3:return ie.call(de,oe[0],oe[1],oe[2])}return ie.apply(de,oe)}function tg(ie,de,oe,Ue){for(var ct=-1,kt=ie==null?0:ie.length;++ct<kt;){var gr=ie[ct];de(Ue,gr,oe(gr),ie)}return Ue}function mn(ie,de){for(var oe=-1,Ue=ie==null?0:ie.length;++oe<Ue&&de(ie[oe],oe,ie)!==!1;);return ie}function rg(ie,de){for(var oe=ie==null?0:ie.length;oe--&&de(ie[oe],oe,ie)!==!1;);return ie}function oc(ie,de){for(var oe=-1,Ue=ie==null?0:ie.length;++oe<Ue;)if(!de(ie[oe],oe,ie))return!1;return!0}function pi(ie,de){for(var oe=-1,Ue=ie==null?0:ie.length,ct=0,kt=[];++oe<Ue;){var gr=ie[oe];de(gr,oe,ie)&&(kt[ct++]=gr)}return kt}function ma(ie,de){var oe=ie==null?0:ie.length;return!!oe&&ru(ie,de,0)>-1}function co(ie,de,oe){for(var Ue=-1,ct=ie==null?0:ie.length;++Ue<ct;)if(oe(de,ie[Ue]))return!0;return!1}function $t(ie,de){for(var oe=-1,Ue=ie==null?0:ie.length,ct=Array(Ue);++oe<Ue;)ct[oe]=de(ie[oe],oe,ie);return ct}function gi(ie,de){for(var oe=-1,Ue=de.length,ct=ie.length;++oe<Ue;)ie[ct+oe]=de[oe];return ie}function ho(ie,de,oe,Ue){var ct=-1,kt=ie==null?0:ie.length;for(Ue&&kt&&(oe=ie[++ct]);++ct<kt;)oe=de(oe,ie[ct],ct,ie);return oe}function ng(ie,de,oe,Ue){var ct=ie==null?0:ie.length;for(Ue&&ct&&(oe=ie[--ct]);ct--;)oe=de(oe,ie[ct],ct,ie);return oe}function po(ie,de){for(var oe=-1,Ue=ie==null?0:ie.length;++oe<Ue;)if(de(ie[oe],oe,ie))return!0;return!1}var ig=go("length");function ug(ie){return ie.split("")}function ag(ie){return ie.match(Xn)||[]}function lc(ie,de,oe){var Ue;return oe(ie,function(ct,kt,gr){if(de(ct,kt,gr))return Ue=kt,!1}),Ue}function _a(ie,de,oe,Ue){for(var ct=ie.length,kt=oe+(Ue?1:-1);Ue?kt--:++kt<ct;)if(de(ie[kt],kt,ie))return kt;return-1}function ru(ie,de,oe){return de===de?_g(ie,de,oe):_a(ie,fc,oe)}function sg(ie,de,oe,Ue){for(var ct=oe-1,kt=ie.length;++ct<kt;)if(Ue(ie[ct],de))return ct;return-1}function fc(ie){return ie!==ie}function cc(ie,de){var oe=ie==null?0:ie.length;return oe?mo(ie,de)/oe:le}function go(ie){return function(de){return de==null?r:de[ie]}}function vo(ie){return function(de){return ie==null?r:ie[de]}}function hc(ie,de,oe,Ue,ct){return ct(ie,function(kt,gr,jt){oe=Ue?(Ue=!1,kt):de(oe,kt,gr,jt)}),oe}function og(ie,de){var oe=ie.length;for(ie.sort(de);oe--;)ie[oe]=ie[oe].value;return ie}function mo(ie,de){for(var oe,Ue=-1,ct=ie.length;++Ue<ct;){var kt=de(ie[Ue]);kt!==r&&(oe=oe===r?kt:oe+kt)}return oe}function _o(ie,de){for(var oe=-1,Ue=Array(ie);++oe<ie;)Ue[oe]=de(oe);return Ue}function lg(ie,de){return $t(de,function(oe){return[oe,ie[oe]]})}function dc(ie){return ie&&ie.slice(0,mc(ie)+1).replace(Br,"")}function sn(ie){return function(de){return ie(de)}}function Do(ie,de){return $t(de,function(oe){return ie[oe]})}function qu(ie,de){return ie.has(de)}function pc(ie,de){for(var oe=-1,Ue=ie.length;++oe<Ue&&ru(de,ie[oe],0)>-1;);return oe}function gc(ie,de){for(var oe=ie.length;oe--&&ru(de,ie[oe],0)>-1;);return oe}function fg(ie,de){for(var oe=ie.length,Ue=0;oe--;)ie[oe]===de&&++Ue;return Ue}var cg=vo($1),hg=vo(Y1);function dg(ie){return"\\"+X1[ie]}function pg(ie,de){return ie==null?r:ie[de]}function nu(ie){return W1.test(ie)}function gg(ie){return H1.test(ie)}function vg(ie){for(var de,oe=[];!(de=ie.next()).done;)oe.push(de.value);return oe}function bo(ie){var de=-1,oe=Array(ie.size);return ie.forEach(function(Ue,ct){oe[++de]=[ct,Ue]}),oe}function vc(ie,de){return function(oe){return ie(de(oe))}}function vi(ie,de){for(var oe=-1,Ue=ie.length,ct=0,kt=[];++oe<Ue;){var gr=ie[oe];(gr===de||gr===c)&&(ie[oe]=c,kt[ct++]=oe)}return kt}function Da(ie){var de=-1,oe=Array(ie.size);return ie.forEach(function(Ue){oe[++de]=Ue}),oe}function mg(ie){var de=-1,oe=Array(ie.size);return ie.forEach(function(Ue){oe[++de]=[Ue,Ue]}),oe}function _g(ie,de,oe){for(var Ue=oe-1,ct=ie.length;++Ue<ct;)if(ie[Ue]===de)return Ue;return-1}function Dg(ie,de,oe){for(var Ue=oe+1;Ue--;)if(ie[Ue]===de)return Ue;return Ue}function iu(ie){return nu(ie)?yg(ie):ig(ie)}function Mn(ie){return nu(ie)?wg(ie):ug(ie)}function mc(ie){for(var de=ie.length;de--&&nr.test(ie.charAt(de)););return de}var bg=vo(Z1);function yg(ie){for(var de=oo.lastIndex=0;oo.test(ie);)++de;return de}function wg(ie){return ie.match(oo)||[]}function Ag(ie){return ie.match(z1)||[]}var Eg=function ie(de){de=de==null?Or:uu.defaults(Or.Object(),de,uu.pick(Or,G1));var oe=de.Array,Ue=de.Date,ct=de.Error,kt=de.Function,gr=de.Math,jt=de.Object,yo=de.RegExp,Cg=de.String,_n=de.TypeError,ba=oe.prototype,Fg=kt.prototype,au=jt.prototype,ya=de["__core-js_shared__"],wa=Fg.toString,xt=au.hasOwnProperty,Sg=0,_c=function(){var a=/[^.]+$/.exec(ya&&ya.keys&&ya.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Aa=au.toString,Bg=wa.call(jt),Og=Or._,Mg=yo("^"+wa.call(xt).replace(Ii,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ea=tc?de.Buffer:r,mi=de.Symbol,Ca=de.Uint8Array,Dc=Ea?Ea.allocUnsafe:r,Fa=vc(jt.getPrototypeOf,jt),bc=jt.create,yc=au.propertyIsEnumerable,Sa=ba.splice,wc=mi?mi.isConcatSpreadable:r,zu=mi?mi.iterator:r,Ui=mi?mi.toStringTag:r,Ba=function(){try{var a=Wi(jt,"defineProperty");return a({},"",{}),a}catch{}}(),Pg=de.clearTimeout!==Or.clearTimeout&&de.clearTimeout,Tg=Ue&&Ue.now!==Or.Date.now&&Ue.now,kg=de.setTimeout!==Or.setTimeout&&de.setTimeout,Oa=gr.ceil,Ma=gr.floor,wo=jt.getOwnPropertySymbols,Ig=Ea?Ea.isBuffer:r,Ac=de.isFinite,Ng=ba.join,xg=vc(jt.keys,jt),vr=gr.max,Lr=gr.min,Rg=Ue.now,Lg=de.parseInt,Ec=gr.random,Ug=ba.reverse,Ao=Wi(de,"DataView"),Wu=Wi(de,"Map"),Eo=Wi(de,"Promise"),su=Wi(de,"Set"),Hu=Wi(de,"WeakMap"),Gu=Wi(jt,"create"),Pa=Hu&&new Hu,ou={},Vg=Hi(Ao),jg=Hi(Wu),qg=Hi(Eo),zg=Hi(su),Wg=Hi(Hu),Ta=mi?mi.prototype:r,Ku=Ta?Ta.valueOf:r,Cc=Ta?Ta.toString:r;function k(a){if(ir(a)&&!ht(a)&&!(a instanceof Ft)){if(a instanceof Dn)return a;if(xt.call(a,"__wrapped__"))return Fh(a)}return new Dn(a)}var lu=function(){function a(){}return function(l){if(!Jt(l))return{};if(bc)return bc(l);a.prototype=l;var m=new a;return a.prototype=r,m}}();function ka(){}function Dn(a,l){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=r}k.templateSettings={escape:pr,evaluate:Bn,interpolate:Zn,variable:"",imports:{_:k}},k.prototype=ka.prototype,k.prototype.constructor=k,Dn.prototype=lu(ka.prototype),Dn.prototype.constructor=Dn;function Ft(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}function Hg(){var a=new Ft(this.__wrapped__);return a.__actions__=Xr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Xr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Xr(this.__views__),a}function Gg(){if(this.__filtered__){var a=new Ft(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function Kg(){var a=this.__wrapped__.value(),l=this.__dir__,m=ht(a),w=l<0,M=m?a.length:0,N=um(0,M,this.__views__),z=N.start,$=N.end,ue=$-z,ge=w?$:z-1,ve=this.__iteratees__,be=ve.length,ke=0,We=Lr(ue,this.__takeCount__);if(!m||!w&&M==ue&&We==ue)return Yc(a,this.__actions__);var nt=[];e:for(;ue--&&ke<We;){ge+=l;for(var wt=-1,it=a[ge];++wt<be;){var Et=ve[wt],Bt=Et.iteratee,fn=Et.type,Kr=Bt(it);if(fn==K)it=Kr;else if(!Kr){if(fn==U)continue e;break e}}nt[ke++]=it}return nt}Ft.prototype=lu(ka.prototype),Ft.prototype.constructor=Ft;function Vi(a){var l=-1,m=a==null?0:a.length;for(this.clear();++l<m;){var w=a[l];this.set(w[0],w[1])}}function $g(){this.__data__=Gu?Gu(null):{},this.size=0}function Yg(a){var l=this.has(a)&&delete this.__data__[a];return this.size-=l?1:0,l}function Zg(a){var l=this.__data__;if(Gu){var m=l[a];return m===f?r:m}return xt.call(l,a)?l[a]:r}function Xg(a){var l=this.__data__;return Gu?l[a]!==r:xt.call(l,a)}function Jg(a,l){var m=this.__data__;return this.size+=this.has(a)?0:1,m[a]=Gu&&l===r?f:l,this}Vi.prototype.clear=$g,Vi.prototype.delete=Yg,Vi.prototype.get=Zg,Vi.prototype.has=Xg,Vi.prototype.set=Jg;function Qn(a){var l=-1,m=a==null?0:a.length;for(this.clear();++l<m;){var w=a[l];this.set(w[0],w[1])}}function Qg(){this.__data__=[],this.size=0}function ev(a){var l=this.__data__,m=Ia(l,a);if(m<0)return!1;var w=l.length-1;return m==w?l.pop():Sa.call(l,m,1),--this.size,!0}function tv(a){var l=this.__data__,m=Ia(l,a);return m<0?r:l[m][1]}function rv(a){return Ia(this.__data__,a)>-1}function nv(a,l){var m=this.__data__,w=Ia(m,a);return w<0?(++this.size,m.push([a,l])):m[w][1]=l,this}Qn.prototype.clear=Qg,Qn.prototype.delete=ev,Qn.prototype.get=tv,Qn.prototype.has=rv,Qn.prototype.set=nv;function ei(a){var l=-1,m=a==null?0:a.length;for(this.clear();++l<m;){var w=a[l];this.set(w[0],w[1])}}function iv(){this.size=0,this.__data__={hash:new Vi,map:new(Wu||Qn),string:new Vi}}function uv(a){var l=Ga(this,a).delete(a);return this.size-=l?1:0,l}function av(a){return Ga(this,a).get(a)}function sv(a){return Ga(this,a).has(a)}function ov(a,l){var m=Ga(this,a),w=m.size;return m.set(a,l),this.size+=m.size==w?0:1,this}ei.prototype.clear=iv,ei.prototype.delete=uv,ei.prototype.get=av,ei.prototype.has=sv,ei.prototype.set=ov;function ji(a){var l=-1,m=a==null?0:a.length;for(this.__data__=new ei;++l<m;)this.add(a[l])}function lv(a){return this.__data__.set(a,f),this}function fv(a){return this.__data__.has(a)}ji.prototype.add=ji.prototype.push=lv,ji.prototype.has=fv;function Pn(a){var l=this.__data__=new Qn(a);this.size=l.size}function cv(){this.__data__=new Qn,this.size=0}function hv(a){var l=this.__data__,m=l.delete(a);return this.size=l.size,m}function dv(a){return this.__data__.get(a)}function pv(a){return this.__data__.has(a)}function gv(a,l){var m=this.__data__;if(m instanceof Qn){var w=m.__data__;if(!Wu||w.length<i-1)return w.push([a,l]),this.size=++m.size,this;m=this.__data__=new ei(w)}return m.set(a,l),this.size=m.size,this}Pn.prototype.clear=cv,Pn.prototype.delete=hv,Pn.prototype.get=dv,Pn.prototype.has=pv,Pn.prototype.set=gv;function Fc(a,l){var m=ht(a),w=!m&&Gi(a),M=!m&&!w&&wi(a),N=!m&&!w&&!M&&du(a),z=m||w||M||N,$=z?_o(a.length,Cg):[],ue=$.length;for(var ge in a)(l||xt.call(a,ge))&&!(z&&(ge=="length"||M&&(ge=="offset"||ge=="parent")||N&&(ge=="buffer"||ge=="byteLength"||ge=="byteOffset")||ii(ge,ue)))&&$.push(ge);return $}function Sc(a){var l=a.length;return l?a[No(0,l-1)]:r}function vv(a,l){return Ka(Xr(a),qi(l,0,a.length))}function mv(a){return Ka(Xr(a))}function Co(a,l,m){(m!==r&&!Tn(a[l],m)||m===r&&!(l in a))&&ti(a,l,m)}function $u(a,l,m){var w=a[l];(!(xt.call(a,l)&&Tn(w,m))||m===r&&!(l in a))&&ti(a,l,m)}function Ia(a,l){for(var m=a.length;m--;)if(Tn(a[m][0],l))return m;return-1}function _v(a,l,m,w){return _i(a,function(M,N,z){l(w,M,m(M),z)}),w}function Bc(a,l){return a&&zn(l,Ar(l),a)}function Dv(a,l){return a&&zn(l,Qr(l),a)}function ti(a,l,m){l=="__proto__"&&Ba?Ba(a,l,{configurable:!0,enumerable:!0,value:m,writable:!0}):a[l]=m}function Fo(a,l){for(var m=-1,w=l.length,M=oe(w),N=a==null;++m<w;)M[m]=N?r:al(a,l[m]);return M}function qi(a,l,m){return a===a&&(m!==r&&(a=a<=m?a:m),l!==r&&(a=a>=l?a:l)),a}function bn(a,l,m,w,M,N){var z,$=l&d,ue=l&h,ge=l&g;if(m&&(z=M?m(a,w,M,N):m(a)),z!==r)return z;if(!Jt(a))return a;var ve=ht(a);if(ve){if(z=sm(a),!$)return Xr(a,z)}else{var be=Ur(a),ke=be==at||be==ft;if(wi(a))return Jc(a,$);if(be==Je||be==qe||ke&&!M){if(z=ue||ke?{}:mh(a),!$)return ue?Zv(a,Dv(z,a)):Yv(a,Bc(z,a))}else{if(!Wt[be])return M?a:{};z=om(a,be,$)}}N||(N=new Pn);var We=N.get(a);if(We)return We;N.set(a,z),Gh(a)?a.forEach(function(it){z.add(bn(it,l,m,it,a,N))}):Wh(a)&&a.forEach(function(it,Et){z.set(Et,bn(it,l,m,Et,a,N))});var nt=ge?ue?Go:Ho:ue?Qr:Ar,wt=ve?r:nt(a);return mn(wt||a,function(it,Et){wt&&(Et=it,it=a[Et]),$u(z,Et,bn(it,l,m,Et,a,N))}),z}function bv(a){var l=Ar(a);return function(m){return Oc(m,a,l)}}function Oc(a,l,m){var w=m.length;if(a==null)return!w;for(a=jt(a);w--;){var M=m[w],N=l[M],z=a[M];if(z===r&&!(M in a)||!N(z))return!1}return!0}function Mc(a,l,m){if(typeof a!="function")throw new _n(o);return ta(function(){a.apply(r,m)},l)}function Yu(a,l,m,w){var M=-1,N=ma,z=!0,$=a.length,ue=[],ge=l.length;if(!$)return ue;m&&(l=$t(l,sn(m))),w?(N=co,z=!1):l.length>=i&&(N=qu,z=!1,l=new ji(l));e:for(;++M<$;){var ve=a[M],be=m==null?ve:m(ve);if(ve=w||ve!==0?ve:0,z&&be===be){for(var ke=ge;ke--;)if(l[ke]===be)continue e;ue.push(ve)}else N(l,be,w)||ue.push(ve)}return ue}var _i=nh(qn),Pc=nh(Bo,!0);function yv(a,l){var m=!0;return _i(a,function(w,M,N){return m=!!l(w,M,N),m}),m}function Na(a,l,m){for(var w=-1,M=a.length;++w<M;){var N=a[w],z=l(N);if(z!=null&&($===r?z===z&&!ln(z):m(z,$)))var $=z,ue=N}return ue}function wv(a,l,m,w){var M=a.length;for(m=_t(m),m<0&&(m=-m>M?0:M+m),w=w===r||w>M?M:_t(w),w<0&&(w+=M),w=m>w?0:$h(w);m<w;)a[m++]=l;return a}function Tc(a,l){var m=[];return _i(a,function(w,M,N){l(w,M,N)&&m.push(w)}),m}function Mr(a,l,m,w,M){var N=-1,z=a.length;for(m||(m=fm),M||(M=[]);++N<z;){var $=a[N];l>0&&m($)?l>1?Mr($,l-1,m,w,M):gi(M,$):w||(M[M.length]=$)}return M}var So=ih(),kc=ih(!0);function qn(a,l){return a&&So(a,l,Ar)}function Bo(a,l){return a&&kc(a,l,Ar)}function xa(a,l){return pi(l,function(m){return ui(a[m])})}function zi(a,l){l=bi(l,a);for(var m=0,w=l.length;a!=null&&m<w;)a=a[Wn(l[m++])];return m&&m==w?a:r}function Ic(a,l,m){var w=l(a);return ht(a)?w:gi(w,m(a))}function Hr(a){return a==null?a===r?W:Xe:Ui&&Ui in jt(a)?im(a):mm(a)}function Oo(a,l){return a>l}function Av(a,l){return a!=null&&xt.call(a,l)}function Ev(a,l){return a!=null&&l in jt(a)}function Cv(a,l,m){return a>=Lr(l,m)&&a<vr(l,m)}function Mo(a,l,m){for(var w=m?co:ma,M=a[0].length,N=a.length,z=N,$=oe(N),ue=1/0,ge=[];z--;){var ve=a[z];z&&l&&(ve=$t(ve,sn(l))),ue=Lr(ve.length,ue),$[z]=!m&&(l||M>=120&&ve.length>=120)?new ji(z&&ve):r}ve=a[0];var be=-1,ke=$[0];e:for(;++be<M&&ge.length<ue;){var We=ve[be],nt=l?l(We):We;if(We=m||We!==0?We:0,!(ke?qu(ke,nt):w(ge,nt,m))){for(z=N;--z;){var wt=$[z];if(!(wt?qu(wt,nt):w(a[z],nt,m)))continue e}ke&&ke.push(nt),ge.push(We)}}return ge}function Fv(a,l,m,w){return qn(a,function(M,N,z){l(w,m(M),N,z)}),w}function Zu(a,l,m){l=bi(l,a),a=yh(a,l);var w=a==null?a:a[Wn(wn(l))];return w==null?r:an(w,a,m)}function Nc(a){return ir(a)&&Hr(a)==qe}function Sv(a){return ir(a)&&Hr(a)==ae}function Bv(a){return ir(a)&&Hr(a)==je}function Xu(a,l,m,w,M){return a===l?!0:a==null||l==null||!ir(a)&&!ir(l)?a!==a&&l!==l:Ov(a,l,m,w,Xu,M)}function Ov(a,l,m,w,M,N){var z=ht(a),$=ht(l),ue=z?Ve:Ur(a),ge=$?Ve:Ur(l);ue=ue==qe?Je:ue,ge=ge==qe?Je:ge;var ve=ue==Je,be=ge==Je,ke=ue==ge;if(ke&&wi(a)){if(!wi(l))return!1;z=!0,ve=!1}if(ke&&!ve)return N||(N=new Pn),z||du(a)?ph(a,l,m,w,M,N):rm(a,l,ue,m,w,M,N);if(!(m&b)){var We=ve&&xt.call(a,"__wrapped__"),nt=be&&xt.call(l,"__wrapped__");if(We||nt){var wt=We?a.value():a,it=nt?l.value():l;return N||(N=new Pn),M(wt,it,m,w,N)}}return ke?(N||(N=new Pn),nm(a,l,m,w,M,N)):!1}function Mv(a){return ir(a)&&Ur(a)==st}function Po(a,l,m,w){var M=m.length,N=M,z=!w;if(a==null)return!N;for(a=jt(a);M--;){var $=m[M];if(z&&$[2]?$[1]!==a[$[0]]:!($[0]in a))return!1}for(;++M<N;){$=m[M];var ue=$[0],ge=a[ue],ve=$[1];if(z&&$[2]){if(ge===r&&!(ue in a))return!1}else{var be=new Pn;if(w)var ke=w(ge,ve,ue,a,l,be);if(!(ke===r?Xu(ve,ge,b|v,w,be):ke))return!1}}return!0}function xc(a){if(!Jt(a)||hm(a))return!1;var l=ui(a)?Mg:ku;return l.test(Hi(a))}function Pv(a){return ir(a)&&Hr(a)==Ot}function Tv(a){return ir(a)&&Ur(a)==Vt}function kv(a){return ir(a)&&Qa(a.length)&&!!Gt[Hr(a)]}function Rc(a){return typeof a=="function"?a:a==null?en:typeof a=="object"?ht(a)?Vc(a[0],a[1]):Uc(a):u0(a)}function To(a){if(!ea(a))return xg(a);var l=[];for(var m in jt(a))xt.call(a,m)&&m!="constructor"&&l.push(m);return l}function Iv(a){if(!Jt(a))return vm(a);var l=ea(a),m=[];for(var w in a)w=="constructor"&&(l||!xt.call(a,w))||m.push(w);return m}function ko(a,l){return a<l}function Lc(a,l){var m=-1,w=Jr(a)?oe(a.length):[];return _i(a,function(M,N,z){w[++m]=l(M,N,z)}),w}function Uc(a){var l=$o(a);return l.length==1&&l[0][2]?Dh(l[0][0],l[0][1]):function(m){return m===a||Po(m,a,l)}}function Vc(a,l){return Zo(a)&&_h(l)?Dh(Wn(a),l):function(m){var w=al(m,a);return w===r&&w===l?sl(m,a):Xu(l,w,b|v)}}function Ra(a,l,m,w,M){a!==l&&So(l,function(N,z){if(M||(M=new Pn),Jt(N))Nv(a,l,z,m,Ra,w,M);else{var $=w?w(Jo(a,z),N,z+"",a,l,M):r;$===r&&($=N),Co(a,z,$)}},Qr)}function Nv(a,l,m,w,M,N,z){var $=Jo(a,m),ue=Jo(l,m),ge=z.get(ue);if(ge){Co(a,m,ge);return}var ve=N?N($,ue,m+"",a,l,z):r,be=ve===r;if(be){var ke=ht(ue),We=!ke&&wi(ue),nt=!ke&&!We&&du(ue);ve=ue,ke||We||nt?ht($)?ve=$:lr($)?ve=Xr($):We?(be=!1,ve=Jc(ue,!0)):nt?(be=!1,ve=Qc(ue,!0)):ve=[]:ra(ue)||Gi(ue)?(ve=$,Gi($)?ve=Yh($):(!Jt($)||ui($))&&(ve=mh(ue))):be=!1}be&&(z.set(ue,ve),M(ve,ue,w,N,z),z.delete(ue)),Co(a,m,ve)}function jc(a,l){var m=a.length;if(m)return l+=l<0?m:0,ii(l,m)?a[l]:r}function qc(a,l,m){l.length?l=$t(l,function(N){return ht(N)?function(z){return zi(z,N.length===1?N[0]:N)}:N}):l=[en];var w=-1;l=$t(l,sn(Qe()));var M=Lc(a,function(N,z,$){var ue=$t(l,function(ge){return ge(N)});return{criteria:ue,index:++w,value:N}});return og(M,function(N,z){return $v(N,z,m)})}function xv(a,l){return zc(a,l,function(m,w){return sl(a,w)})}function zc(a,l,m){for(var w=-1,M=l.length,N={};++w<M;){var z=l[w],$=zi(a,z);m($,z)&&Ju(N,bi(z,a),$)}return N}function Rv(a){return function(l){return zi(l,a)}}function Io(a,l,m,w){var M=w?sg:ru,N=-1,z=l.length,$=a;for(a===l&&(l=Xr(l)),m&&($=$t(a,sn(m)));++N<z;)for(var ue=0,ge=l[N],ve=m?m(ge):ge;(ue=M($,ve,ue,w))>-1;)$!==a&&Sa.call($,ue,1),Sa.call(a,ue,1);return a}function Wc(a,l){for(var m=a?l.length:0,w=m-1;m--;){var M=l[m];if(m==w||M!==N){var N=M;ii(M)?Sa.call(a,M,1):Lo(a,M)}}return a}function No(a,l){return a+Ma(Ec()*(l-a+1))}function Lv(a,l,m,w){for(var M=-1,N=vr(Oa((l-a)/(m||1)),0),z=oe(N);N--;)z[w?N:++M]=a,a+=m;return z}function xo(a,l){var m="";if(!a||l<1||l>Q)return m;do l%2&&(m+=a),l=Ma(l/2),l&&(a+=a);while(l);return m}function At(a,l){return Qo(bh(a,l,en),a+"")}function Uv(a){return Sc(pu(a))}function Vv(a,l){var m=pu(a);return Ka(m,qi(l,0,m.length))}function Ju(a,l,m,w){if(!Jt(a))return a;l=bi(l,a);for(var M=-1,N=l.length,z=N-1,$=a;$!=null&&++M<N;){var ue=Wn(l[M]),ge=m;if(ue==="__proto__"||ue==="constructor"||ue==="prototype")return a;if(M!=z){var ve=$[ue];ge=w?w(ve,ue,$):r,ge===r&&(ge=Jt(ve)?ve:ii(l[M+1])?[]:{})}$u($,ue,ge),$=$[ue]}return a}var Hc=Pa?function(a,l){return Pa.set(a,l),a}:en,jv=Ba?function(a,l){return Ba(a,"toString",{configurable:!0,enumerable:!1,value:ll(l),writable:!0})}:en;function qv(a){return Ka(pu(a))}function yn(a,l,m){var w=-1,M=a.length;l<0&&(l=-l>M?0:M+l),m=m>M?M:m,m<0&&(m+=M),M=l>m?0:m-l>>>0,l>>>=0;for(var N=oe(M);++w<M;)N[w]=a[w+l];return N}function zv(a,l){var m;return _i(a,function(w,M,N){return m=l(w,M,N),!m}),!!m}function La(a,l,m){var w=0,M=a==null?w:a.length;if(typeof l=="number"&&l===l&&M<=Ae){for(;w<M;){var N=w+M>>>1,z=a[N];z!==null&&!ln(z)&&(m?z<=l:z<l)?w=N+1:M=N}return M}return Ro(a,l,en,m)}function Ro(a,l,m,w){var M=0,N=a==null?0:a.length;if(N===0)return 0;l=m(l);for(var z=l!==l,$=l===null,ue=ln(l),ge=l===r;M<N;){var ve=Ma((M+N)/2),be=m(a[ve]),ke=be!==r,We=be===null,nt=be===be,wt=ln(be);if(z)var it=w||nt;else ge?it=nt&&(w||ke):$?it=nt&&ke&&(w||!We):ue?it=nt&&ke&&!We&&(w||!wt):We||wt?it=!1:it=w?be<=l:be<l;it?M=ve+1:N=ve}return Lr(N,Fe)}function Gc(a,l){for(var m=-1,w=a.length,M=0,N=[];++m<w;){var z=a[m],$=l?l(z):z;if(!m||!Tn($,ue)){var ue=$;N[M++]=z===0?0:z}}return N}function Kc(a){return typeof a=="number"?a:ln(a)?le:+a}function on(a){if(typeof a=="string")return a;if(ht(a))return $t(a,on)+"";if(ln(a))return Cc?Cc.call(a):"";var l=a+"";return l=="0"&&1/a==-te?"-0":l}function Di(a,l,m){var w=-1,M=ma,N=a.length,z=!0,$=[],ue=$;if(m)z=!1,M=co;else if(N>=i){var ge=l?null:em(a);if(ge)return Da(ge);z=!1,M=qu,ue=new ji}else ue=l?[]:$;e:for(;++w<N;){var ve=a[w],be=l?l(ve):ve;if(ve=m||ve!==0?ve:0,z&&be===be){for(var ke=ue.length;ke--;)if(ue[ke]===be)continue e;l&&ue.push(be),$.push(ve)}else M(ue,be,m)||(ue!==$&&ue.push(be),$.push(ve))}return $}function Lo(a,l){return l=bi(l,a),a=yh(a,l),a==null||delete a[Wn(wn(l))]}function $c(a,l,m,w){return Ju(a,l,m(zi(a,l)),w)}function Ua(a,l,m,w){for(var M=a.length,N=w?M:-1;(w?N--:++N<M)&&l(a[N],N,a););return m?yn(a,w?0:N,w?N+1:M):yn(a,w?N+1:0,w?M:N)}function Yc(a,l){var m=a;return m instanceof Ft&&(m=m.value()),ho(l,function(w,M){return M.func.apply(M.thisArg,gi([w],M.args))},m)}function Uo(a,l,m){var w=a.length;if(w<2)return w?Di(a[0]):[];for(var M=-1,N=oe(w);++M<w;)for(var z=a[M],$=-1;++$<w;)$!=M&&(N[M]=Yu(N[M]||z,a[$],l,m));return Di(Mr(N,1),l,m)}function Zc(a,l,m){for(var w=-1,M=a.length,N=l.length,z={};++w<M;){var $=w<N?l[w]:r;m(z,a[w],$)}return z}function Vo(a){return lr(a)?a:[]}function jo(a){return typeof a=="function"?a:en}function bi(a,l){return ht(a)?a:Zo(a,l)?[a]:Ch(It(a))}var Wv=At;function yi(a,l,m){var w=a.length;return m=m===r?w:m,!l&&m>=w?a:yn(a,l,m)}var Xc=Pg||function(a){return Or.clearTimeout(a)};function Jc(a,l){if(l)return a.slice();var m=a.length,w=Dc?Dc(m):new a.constructor(m);return a.copy(w),w}function qo(a){var l=new a.constructor(a.byteLength);return new Ca(l).set(new Ca(a)),l}function Hv(a,l){var m=l?qo(a.buffer):a.buffer;return new a.constructor(m,a.byteOffset,a.byteLength)}function Gv(a){var l=new a.constructor(a.source,Qi.exec(a));return l.lastIndex=a.lastIndex,l}function Kv(a){return Ku?jt(Ku.call(a)):{}}function Qc(a,l){var m=l?qo(a.buffer):a.buffer;return new a.constructor(m,a.byteOffset,a.length)}function eh(a,l){if(a!==l){var m=a!==r,w=a===null,M=a===a,N=ln(a),z=l!==r,$=l===null,ue=l===l,ge=ln(l);if(!$&&!ge&&!N&&a>l||N&&z&&ue&&!$&&!ge||w&&z&&ue||!m&&ue||!M)return 1;if(!w&&!N&&!ge&&a<l||ge&&m&&M&&!w&&!N||$&&m&&M||!z&&M||!ue)return-1}return 0}function $v(a,l,m){for(var w=-1,M=a.criteria,N=l.criteria,z=M.length,$=m.length;++w<z;){var ue=eh(M[w],N[w]);if(ue){if(w>=$)return ue;var ge=m[w];return ue*(ge=="desc"?-1:1)}}return a.index-l.index}function th(a,l,m,w){for(var M=-1,N=a.length,z=m.length,$=-1,ue=l.length,ge=vr(N-z,0),ve=oe(ue+ge),be=!w;++$<ue;)ve[$]=l[$];for(;++M<z;)(be||M<N)&&(ve[m[M]]=a[M]);for(;ge--;)ve[$++]=a[M++];return ve}function rh(a,l,m,w){for(var M=-1,N=a.length,z=-1,$=m.length,ue=-1,ge=l.length,ve=vr(N-$,0),be=oe(ve+ge),ke=!w;++M<ve;)be[M]=a[M];for(var We=M;++ue<ge;)be[We+ue]=l[ue];for(;++z<$;)(ke||M<N)&&(be[We+m[z]]=a[M++]);return be}function Xr(a,l){var m=-1,w=a.length;for(l||(l=oe(w));++m<w;)l[m]=a[m];return l}function zn(a,l,m,w){var M=!m;m||(m={});for(var N=-1,z=l.length;++N<z;){var $=l[N],ue=w?w(m[$],a[$],$,m,a):r;ue===r&&(ue=a[$]),M?ti(m,$,ue):$u(m,$,ue)}return m}function Yv(a,l){return zn(a,Yo(a),l)}function Zv(a,l){return zn(a,gh(a),l)}function Va(a,l){return function(m,w){var M=ht(m)?tg:_v,N=l?l():{};return M(m,a,Qe(w,2),N)}}function fu(a){return At(function(l,m){var w=-1,M=m.length,N=M>1?m[M-1]:r,z=M>2?m[2]:r;for(N=a.length>3&&typeof N=="function"?(M--,N):r,z&&Gr(m[0],m[1],z)&&(N=M<3?r:N,M=1),l=jt(l);++w<M;){var $=m[w];$&&a(l,$,w,N)}return l})}function nh(a,l){return function(m,w){if(m==null)return m;if(!Jr(m))return a(m,w);for(var M=m.length,N=l?M:-1,z=jt(m);(l?N--:++N<M)&&w(z[N],N,z)!==!1;);return m}}function ih(a){return function(l,m,w){for(var M=-1,N=jt(l),z=w(l),$=z.length;$--;){var ue=z[a?$:++M];if(m(N[ue],ue,N)===!1)break}return l}}function Xv(a,l,m){var w=l&_,M=Qu(a);function N(){var z=this&&this!==Or&&this instanceof N?M:a;return z.apply(w?m:this,arguments)}return N}function uh(a){return function(l){l=It(l);var m=nu(l)?Mn(l):r,w=m?m[0]:l.charAt(0),M=m?yi(m,1).join(""):l.slice(1);return w[a]()+M}}function cu(a){return function(l){return ho(n0(r0(l).replace(j1,"")),a,"")}}function Qu(a){return function(){var l=arguments;switch(l.length){case 0:return new a;case 1:return new a(l[0]);case 2:return new a(l[0],l[1]);case 3:return new a(l[0],l[1],l[2]);case 4:return new a(l[0],l[1],l[2],l[3]);case 5:return new a(l[0],l[1],l[2],l[3],l[4]);case 6:return new a(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new a(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var m=lu(a.prototype),w=a.apply(m,l);return Jt(w)?w:m}}function Jv(a,l,m){var w=Qu(a);function M(){for(var N=arguments.length,z=oe(N),$=N,ue=hu(M);$--;)z[$]=arguments[$];var ge=N<3&&z[0]!==ue&&z[N-1]!==ue?[]:vi(z,ue);if(N-=ge.length,N<m)return fh(a,l,ja,M.placeholder,r,z,ge,r,r,m-N);var ve=this&&this!==Or&&this instanceof M?w:a;return an(ve,this,z)}return M}function ah(a){return function(l,m,w){var M=jt(l);if(!Jr(l)){var N=Qe(m,3);l=Ar(l),m=function($){return N(M[$],$,M)}}var z=a(l,m,w);return z>-1?M[N?l[z]:z]:r}}function sh(a){return ni(function(l){var m=l.length,w=m,M=Dn.prototype.thru;for(a&&l.reverse();w--;){var N=l[w];if(typeof N!="function")throw new _n(o);if(M&&!z&&Ha(N)=="wrapper")var z=new Dn([],!0)}for(w=z?w:m;++w<m;){N=l[w];var $=Ha(N),ue=$=="wrapper"?Ko(N):r;ue&&Xo(ue[0])&&ue[1]==(T|A|E|P)&&!ue[4].length&&ue[9]==1?z=z[Ha(ue[0])].apply(z,ue[3]):z=N.length==1&&Xo(N)?z[$]():z.thru(N)}return function(){var ge=arguments,ve=ge[0];if(z&&ge.length==1&&ht(ve))return z.plant(ve).value();for(var be=0,ke=m?l[be].apply(this,ge):ve;++be<m;)ke=l[be].call(this,ke);return ke}})}function ja(a,l,m,w,M,N,z,$,ue,ge){var ve=l&T,be=l&_,ke=l&D,We=l&(A|F),nt=l&x,wt=ke?r:Qu(a);function it(){for(var Et=arguments.length,Bt=oe(Et),fn=Et;fn--;)Bt[fn]=arguments[fn];if(We)var Kr=hu(it),cn=fg(Bt,Kr);if(w&&(Bt=th(Bt,w,M,We)),N&&(Bt=rh(Bt,N,z,We)),Et-=cn,We&&Et<ge){var fr=vi(Bt,Kr);return fh(a,l,ja,it.placeholder,m,Bt,fr,$,ue,ge-Et)}var kn=be?m:this,si=ke?kn[a]:a;return Et=Bt.length,$?Bt=_m(Bt,$):nt&&Et>1&&Bt.reverse(),ve&&ue<Et&&(Bt.length=ue),this&&this!==Or&&this instanceof it&&(si=wt||Qu(si)),si.apply(kn,Bt)}return it}function oh(a,l){return function(m,w){return Fv(m,a,l(w),{})}}function qa(a,l){return function(m,w){var M;if(m===r&&w===r)return l;if(m!==r&&(M=m),w!==r){if(M===r)return w;typeof m=="string"||typeof w=="string"?(m=on(m),w=on(w)):(m=Kc(m),w=Kc(w)),M=a(m,w)}return M}}function zo(a){return ni(function(l){return l=$t(l,sn(Qe())),At(function(m){var w=this;return a(l,function(M){return an(M,w,m)})})})}function za(a,l){l=l===r?" ":on(l);var m=l.length;if(m<2)return m?xo(l,a):l;var w=xo(l,Oa(a/iu(l)));return nu(l)?yi(Mn(w),0,a).join(""):w.slice(0,a)}function Qv(a,l,m,w){var M=l&_,N=Qu(a);function z(){for(var $=-1,ue=arguments.length,ge=-1,ve=w.length,be=oe(ve+ue),ke=this&&this!==Or&&this instanceof z?N:a;++ge<ve;)be[ge]=w[ge];for(;ue--;)be[ge++]=arguments[++$];return an(ke,M?m:this,be)}return z}function lh(a){return function(l,m,w){return w&&typeof w!="number"&&Gr(l,m,w)&&(m=w=r),l=ai(l),m===r?(m=l,l=0):m=ai(m),w=w===r?l<m?1:-1:ai(w),Lv(l,m,w,a)}}function Wa(a){return function(l,m){return typeof l=="string"&&typeof m=="string"||(l=An(l),m=An(m)),a(l,m)}}function fh(a,l,m,w,M,N,z,$,ue,ge){var ve=l&A,be=ve?z:r,ke=ve?r:z,We=ve?N:r,nt=ve?r:N;l|=ve?E:S,l&=~(ve?S:E),l&C||(l&=~(_|D));var wt=[a,l,M,We,be,nt,ke,$,ue,ge],it=m.apply(r,wt);return Xo(a)&&wh(it,wt),it.placeholder=w,Ah(it,a,l)}function Wo(a){var l=gr[a];return function(m,w){if(m=An(m),w=w==null?0:Lr(_t(w),292),w&&Ac(m)){var M=(It(m)+"e").split("e"),N=l(M[0]+"e"+(+M[1]+w));return M=(It(N)+"e").split("e"),+(M[0]+"e"+(+M[1]-w))}return l(m)}}var em=su&&1/Da(new su([,-0]))[1]==te?function(a){return new su(a)}:hl;function ch(a){return function(l){var m=Ur(l);return m==st?bo(l):m==Vt?mg(l):lg(l,a(l))}}function ri(a,l,m,w,M,N,z,$){var ue=l&D;if(!ue&&typeof a!="function")throw new _n(o);var ge=w?w.length:0;if(ge||(l&=~(E|S),w=M=r),z=z===r?z:vr(_t(z),0),$=$===r?$:_t($),ge-=M?M.length:0,l&S){var ve=w,be=M;w=M=r}var ke=ue?r:Ko(a),We=[a,l,m,w,M,ve,be,N,z,$];if(ke&&gm(We,ke),a=We[0],l=We[1],m=We[2],w=We[3],M=We[4],$=We[9]=We[9]===r?ue?0:a.length:vr(We[9]-ge,0),!$&&l&(A|F)&&(l&=~(A|F)),!l||l==_)var nt=Xv(a,l,m);else l==A||l==F?nt=Jv(a,l,$):(l==E||l==(_|E))&&!M.length?nt=Qv(a,l,m,w):nt=ja.apply(r,We);var wt=ke?Hc:wh;return Ah(wt(nt,We),a,l)}function hh(a,l,m,w){return a===r||Tn(a,au[m])&&!xt.call(w,m)?l:a}function dh(a,l,m,w,M,N){return Jt(a)&&Jt(l)&&(N.set(l,a),Ra(a,l,r,dh,N),N.delete(l)),a}function tm(a){return ra(a)?r:a}function ph(a,l,m,w,M,N){var z=m&b,$=a.length,ue=l.length;if($!=ue&&!(z&&ue>$))return!1;var ge=N.get(a),ve=N.get(l);if(ge&&ve)return ge==l&&ve==a;var be=-1,ke=!0,We=m&v?new ji:r;for(N.set(a,l),N.set(l,a);++be<$;){var nt=a[be],wt=l[be];if(w)var it=z?w(wt,nt,be,l,a,N):w(nt,wt,be,a,l,N);if(it!==r){if(it)continue;ke=!1;break}if(We){if(!po(l,function(Et,Bt){if(!qu(We,Bt)&&(nt===Et||M(nt,Et,m,w,N)))return We.push(Bt)})){ke=!1;break}}else if(!(nt===wt||M(nt,wt,m,w,N))){ke=!1;break}}return N.delete(a),N.delete(l),ke}function rm(a,l,m,w,M,N,z){switch(m){case he:if(a.byteLength!=l.byteLength||a.byteOffset!=l.byteOffset)return!1;a=a.buffer,l=l.buffer;case ae:return!(a.byteLength!=l.byteLength||!N(new Ca(a),new Ca(l)));case He:case je:case ot:return Tn(+a,+l);case mt:return a.name==l.name&&a.message==l.message;case Ot:case Ht:return a==l+"";case st:var $=bo;case Vt:var ue=w&b;if($||($=Da),a.size!=l.size&&!ue)return!1;var ge=z.get(a);if(ge)return ge==l;w|=v,z.set(a,l);var ve=ph($(a),$(l),w,M,N,z);return z.delete(a),ve;case j:if(Ku)return Ku.call(a)==Ku.call(l)}return!1}function nm(a,l,m,w,M,N){var z=m&b,$=Ho(a),ue=$.length,ge=Ho(l),ve=ge.length;if(ue!=ve&&!z)return!1;for(var be=ue;be--;){var ke=$[be];if(!(z?ke in l:xt.call(l,ke)))return!1}var We=N.get(a),nt=N.get(l);if(We&&nt)return We==l&&nt==a;var wt=!0;N.set(a,l),N.set(l,a);for(var it=z;++be<ue;){ke=$[be];var Et=a[ke],Bt=l[ke];if(w)var fn=z?w(Bt,Et,ke,l,a,N):w(Et,Bt,ke,a,l,N);if(!(fn===r?Et===Bt||M(Et,Bt,m,w,N):fn)){wt=!1;break}it||(it=ke=="constructor")}if(wt&&!it){var Kr=a.constructor,cn=l.constructor;Kr!=cn&&"constructor"in a&&"constructor"in l&&!(typeof Kr=="function"&&Kr instanceof Kr&&typeof cn=="function"&&cn instanceof cn)&&(wt=!1)}return N.delete(a),N.delete(l),wt}function ni(a){return Qo(bh(a,r,Oh),a+"")}function Ho(a){return Ic(a,Ar,Yo)}function Go(a){return Ic(a,Qr,gh)}var Ko=Pa?function(a){return Pa.get(a)}:hl;function Ha(a){for(var l=a.name+"",m=ou[l],w=xt.call(ou,l)?m.length:0;w--;){var M=m[w],N=M.func;if(N==null||N==a)return M.name}return l}function hu(a){var l=xt.call(k,"placeholder")?k:a;return l.placeholder}function Qe(){var a=k.iteratee||fl;return a=a===fl?Rc:a,arguments.length?a(arguments[0],arguments[1]):a}function Ga(a,l){var m=a.__data__;return cm(l)?m[typeof l=="string"?"string":"hash"]:m.map}function $o(a){for(var l=Ar(a),m=l.length;m--;){var w=l[m],M=a[w];l[m]=[w,M,_h(M)]}return l}function Wi(a,l){var m=pg(a,l);return xc(m)?m:r}function im(a){var l=xt.call(a,Ui),m=a[Ui];try{a[Ui]=r;var w=!0}catch{}var M=Aa.call(a);return w&&(l?a[Ui]=m:delete a[Ui]),M}var Yo=wo?function(a){return a==null?[]:(a=jt(a),pi(wo(a),function(l){return yc.call(a,l)}))}:dl,gh=wo?function(a){for(var l=[];a;)gi(l,Yo(a)),a=Fa(a);return l}:dl,Ur=Hr;(Ao&&Ur(new Ao(new ArrayBuffer(1)))!=he||Wu&&Ur(new Wu)!=st||Eo&&Ur(Eo.resolve())!=Ce||su&&Ur(new su)!=Vt||Hu&&Ur(new Hu)!=ee)&&(Ur=function(a){var l=Hr(a),m=l==Je?a.constructor:r,w=m?Hi(m):"";if(w)switch(w){case Vg:return he;case jg:return st;case qg:return Ce;case zg:return Vt;case Wg:return ee}return l});function um(a,l,m){for(var w=-1,M=m.length;++w<M;){var N=m[w],z=N.size;switch(N.type){case"drop":a+=z;break;case"dropRight":l-=z;break;case"take":l=Lr(l,a+z);break;case"takeRight":a=vr(a,l-z);break}}return{start:a,end:l}}function am(a){var l=a.match(ci);return l?l[1].split(pn):[]}function vh(a,l,m){l=bi(l,a);for(var w=-1,M=l.length,N=!1;++w<M;){var z=Wn(l[w]);if(!(N=a!=null&&m(a,z)))break;a=a[z]}return N||++w!=M?N:(M=a==null?0:a.length,!!M&&Qa(M)&&ii(z,M)&&(ht(a)||Gi(a)))}function sm(a){var l=a.length,m=new a.constructor(l);return l&&typeof a[0]=="string"&&xt.call(a,"index")&&(m.index=a.index,m.input=a.input),m}function mh(a){return typeof a.constructor=="function"&&!ea(a)?lu(Fa(a)):{}}function om(a,l,m){var w=a.constructor;switch(l){case ae:return qo(a);case He:case je:return new w(+a);case he:return Hv(a,m);case se:case ce:case we:case xe:case rt:case Be:case zt:case Nt:case rr:return Qc(a,m);case st:return new w;case ot:case Ht:return new w(a);case Ot:return Gv(a);case Vt:return new w;case j:return Kv(a)}}function lm(a,l){var m=l.length;if(!m)return a;var w=m-1;return l[w]=(m>1?"& ":"")+l[w],l=l.join(m>2?", ":" "),a.replace(Bu,`{
/* [wrapped with `+l+`] */
`)}function fm(a){return ht(a)||Gi(a)||!!(wc&&a&&a[wc])}function ii(a,l){var m=typeof a;return l=l??Q,!!l&&(m=="number"||m!="symbol"&&Nu.test(a))&&a>-1&&a%1==0&&a<l}function Gr(a,l,m){if(!Jt(m))return!1;var w=typeof l;return(w=="number"?Jr(m)&&ii(l,m.length):w=="string"&&l in m)?Tn(m[l],a):!1}function Zo(a,l){if(ht(a))return!1;var m=typeof a;return m=="number"||m=="symbol"||m=="boolean"||a==null||ln(a)?!0:Un.test(a)||!Ln.test(a)||l!=null&&a in jt(l)}function cm(a){var l=typeof a;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?a!=="__proto__":a===null}function Xo(a){var l=Ha(a),m=k[l];if(typeof m!="function"||!(l in Ft.prototype))return!1;if(a===m)return!0;var w=Ko(m);return!!w&&a===w[0]}function hm(a){return!!_c&&_c in a}var dm=ya?ui:pl;function ea(a){var l=a&&a.constructor,m=typeof l=="function"&&l.prototype||au;return a===m}function _h(a){return a===a&&!Jt(a)}function Dh(a,l){return function(m){return m==null?!1:m[a]===l&&(l!==r||a in jt(m))}}function pm(a){var l=Xa(a,function(w){return m.size===p&&m.clear(),w}),m=l.cache;return l}function gm(a,l){var m=a[1],w=l[1],M=m|w,N=M<(_|D|T),z=w==T&&m==A||w==T&&m==P&&a[7].length<=l[8]||w==(T|P)&&l[7].length<=l[8]&&m==A;if(!(N||z))return a;w&_&&(a[2]=l[2],M|=m&_?0:C);var $=l[3];if($){var ue=a[3];a[3]=ue?th(ue,$,l[4]):$,a[4]=ue?vi(a[3],c):l[4]}return $=l[5],$&&(ue=a[5],a[5]=ue?rh(ue,$,l[6]):$,a[6]=ue?vi(a[5],c):l[6]),$=l[7],$&&(a[7]=$),w&T&&(a[8]=a[8]==null?l[8]:Lr(a[8],l[8])),a[9]==null&&(a[9]=l[9]),a[0]=l[0],a[1]=M,a}function vm(a){var l=[];if(a!=null)for(var m in jt(a))l.push(m);return l}function mm(a){return Aa.call(a)}function bh(a,l,m){return l=vr(l===r?a.length-1:l,0),function(){for(var w=arguments,M=-1,N=vr(w.length-l,0),z=oe(N);++M<N;)z[M]=w[l+M];M=-1;for(var $=oe(l+1);++M<l;)$[M]=w[M];return $[l]=m(z),an(a,this,$)}}function yh(a,l){return l.length<2?a:zi(a,yn(l,0,-1))}function _m(a,l){for(var m=a.length,w=Lr(l.length,m),M=Xr(a);w--;){var N=l[w];a[w]=ii(N,m)?M[N]:r}return a}function Jo(a,l){if(!(l==="constructor"&&typeof a[l]=="function")&&l!="__proto__")return a[l]}var wh=Eh(Hc),ta=kg||function(a,l){return Or.setTimeout(a,l)},Qo=Eh(jv);function Ah(a,l,m){var w=l+"";return Qo(a,lm(w,Dm(am(w),m)))}function Eh(a){var l=0,m=0;return function(){var w=Rg(),M=Y-(w-m);if(m=w,M>0){if(++l>=V)return arguments[0]}else l=0;return a.apply(r,arguments)}}function Ka(a,l){var m=-1,w=a.length,M=w-1;for(l=l===r?w:l;++m<l;){var N=No(m,M),z=a[N];a[N]=a[m],a[m]=z}return a.length=l,a}var Ch=pm(function(a){var l=[];return a.charCodeAt(0)===46&&l.push(""),a.replace(Ji,function(m,w,M,N){l.push(M?N.replace(Ou,"$1"):w||m)}),l});function Wn(a){if(typeof a=="string"||ln(a))return a;var l=a+"";return l=="0"&&1/a==-te?"-0":l}function Hi(a){if(a!=null){try{return wa.call(a)}catch{}try{return a+""}catch{}}return""}function Dm(a,l){return mn(Me,function(m){var w="_."+m[0];l&m[1]&&!ma(a,w)&&a.push(w)}),a.sort()}function Fh(a){if(a instanceof Ft)return a.clone();var l=new Dn(a.__wrapped__,a.__chain__);return l.__actions__=Xr(a.__actions__),l.__index__=a.__index__,l.__values__=a.__values__,l}function bm(a,l,m){(m?Gr(a,l,m):l===r)?l=1:l=vr(_t(l),0);var w=a==null?0:a.length;if(!w||l<1)return[];for(var M=0,N=0,z=oe(Oa(w/l));M<w;)z[N++]=yn(a,M,M+=l);return z}function ym(a){for(var l=-1,m=a==null?0:a.length,w=0,M=[];++l<m;){var N=a[l];N&&(M[w++]=N)}return M}function wm(){var a=arguments.length;if(!a)return[];for(var l=oe(a-1),m=arguments[0],w=a;w--;)l[w-1]=arguments[w];return gi(ht(m)?Xr(m):[m],Mr(l,1))}var Am=At(function(a,l){return lr(a)?Yu(a,Mr(l,1,lr,!0)):[]}),Em=At(function(a,l){var m=wn(l);return lr(m)&&(m=r),lr(a)?Yu(a,Mr(l,1,lr,!0),Qe(m,2)):[]}),Cm=At(function(a,l){var m=wn(l);return lr(m)&&(m=r),lr(a)?Yu(a,Mr(l,1,lr,!0),r,m):[]});function Fm(a,l,m){var w=a==null?0:a.length;return w?(l=m||l===r?1:_t(l),yn(a,l<0?0:l,w)):[]}function Sm(a,l,m){var w=a==null?0:a.length;return w?(l=m||l===r?1:_t(l),l=w-l,yn(a,0,l<0?0:l)):[]}function Bm(a,l){return a&&a.length?Ua(a,Qe(l,3),!0,!0):[]}function Om(a,l){return a&&a.length?Ua(a,Qe(l,3),!0):[]}function Mm(a,l,m,w){var M=a==null?0:a.length;return M?(m&&typeof m!="number"&&Gr(a,l,m)&&(m=0,w=M),wv(a,l,m,w)):[]}function Sh(a,l,m){var w=a==null?0:a.length;if(!w)return-1;var M=m==null?0:_t(m);return M<0&&(M=vr(w+M,0)),_a(a,Qe(l,3),M)}function Bh(a,l,m){var w=a==null?0:a.length;if(!w)return-1;var M=w-1;return m!==r&&(M=_t(m),M=m<0?vr(w+M,0):Lr(M,w-1)),_a(a,Qe(l,3),M,!0)}function Oh(a){var l=a==null?0:a.length;return l?Mr(a,1):[]}function Pm(a){var l=a==null?0:a.length;return l?Mr(a,te):[]}function Tm(a,l){var m=a==null?0:a.length;return m?(l=l===r?1:_t(l),Mr(a,l)):[]}function km(a){for(var l=-1,m=a==null?0:a.length,w={};++l<m;){var M=a[l];w[M[0]]=M[1]}return w}function Mh(a){return a&&a.length?a[0]:r}function Im(a,l,m){var w=a==null?0:a.length;if(!w)return-1;var M=m==null?0:_t(m);return M<0&&(M=vr(w+M,0)),ru(a,l,M)}function Nm(a){var l=a==null?0:a.length;return l?yn(a,0,-1):[]}var xm=At(function(a){var l=$t(a,Vo);return l.length&&l[0]===a[0]?Mo(l):[]}),Rm=At(function(a){var l=wn(a),m=$t(a,Vo);return l===wn(m)?l=r:m.pop(),m.length&&m[0]===a[0]?Mo(m,Qe(l,2)):[]}),Lm=At(function(a){var l=wn(a),m=$t(a,Vo);return l=typeof l=="function"?l:r,l&&m.pop(),m.length&&m[0]===a[0]?Mo(m,r,l):[]});function Um(a,l){return a==null?"":Ng.call(a,l)}function wn(a){var l=a==null?0:a.length;return l?a[l-1]:r}function Vm(a,l,m){var w=a==null?0:a.length;if(!w)return-1;var M=w;return m!==r&&(M=_t(m),M=M<0?vr(w+M,0):Lr(M,w-1)),l===l?Dg(a,l,M):_a(a,fc,M,!0)}function jm(a,l){return a&&a.length?jc(a,_t(l)):r}var qm=At(Ph);function Ph(a,l){return a&&a.length&&l&&l.length?Io(a,l):a}function zm(a,l,m){return a&&a.length&&l&&l.length?Io(a,l,Qe(m,2)):a}function Wm(a,l,m){return a&&a.length&&l&&l.length?Io(a,l,r,m):a}var Hm=ni(function(a,l){var m=a==null?0:a.length,w=Fo(a,l);return Wc(a,$t(l,function(M){return ii(M,m)?+M:M}).sort(eh)),w});function Gm(a,l){var m=[];if(!(a&&a.length))return m;var w=-1,M=[],N=a.length;for(l=Qe(l,3);++w<N;){var z=a[w];l(z,w,a)&&(m.push(z),M.push(w))}return Wc(a,M),m}function el(a){return a==null?a:Ug.call(a)}function Km(a,l,m){var w=a==null?0:a.length;return w?(m&&typeof m!="number"&&Gr(a,l,m)?(l=0,m=w):(l=l==null?0:_t(l),m=m===r?w:_t(m)),yn(a,l,m)):[]}function $m(a,l){return La(a,l)}function Ym(a,l,m){return Ro(a,l,Qe(m,2))}function Zm(a,l){var m=a==null?0:a.length;if(m){var w=La(a,l);if(w<m&&Tn(a[w],l))return w}return-1}function Xm(a,l){return La(a,l,!0)}function Jm(a,l,m){return Ro(a,l,Qe(m,2),!0)}function Qm(a,l){var m=a==null?0:a.length;if(m){var w=La(a,l,!0)-1;if(Tn(a[w],l))return w}return-1}function e_(a){return a&&a.length?Gc(a):[]}function t_(a,l){return a&&a.length?Gc(a,Qe(l,2)):[]}function r_(a){var l=a==null?0:a.length;return l?yn(a,1,l):[]}function n_(a,l,m){return a&&a.length?(l=m||l===r?1:_t(l),yn(a,0,l<0?0:l)):[]}function i_(a,l,m){var w=a==null?0:a.length;return w?(l=m||l===r?1:_t(l),l=w-l,yn(a,l<0?0:l,w)):[]}function u_(a,l){return a&&a.length?Ua(a,Qe(l,3),!1,!0):[]}function a_(a,l){return a&&a.length?Ua(a,Qe(l,3)):[]}var s_=At(function(a){return Di(Mr(a,1,lr,!0))}),o_=At(function(a){var l=wn(a);return lr(l)&&(l=r),Di(Mr(a,1,lr,!0),Qe(l,2))}),l_=At(function(a){var l=wn(a);return l=typeof l=="function"?l:r,Di(Mr(a,1,lr,!0),r,l)});function f_(a){return a&&a.length?Di(a):[]}function c_(a,l){return a&&a.length?Di(a,Qe(l,2)):[]}function h_(a,l){return l=typeof l=="function"?l:r,a&&a.length?Di(a,r,l):[]}function tl(a){if(!(a&&a.length))return[];var l=0;return a=pi(a,function(m){if(lr(m))return l=vr(m.length,l),!0}),_o(l,function(m){return $t(a,go(m))})}function Th(a,l){if(!(a&&a.length))return[];var m=tl(a);return l==null?m:$t(m,function(w){return an(l,r,w)})}var d_=At(function(a,l){return lr(a)?Yu(a,l):[]}),p_=At(function(a){return Uo(pi(a,lr))}),g_=At(function(a){var l=wn(a);return lr(l)&&(l=r),Uo(pi(a,lr),Qe(l,2))}),v_=At(function(a){var l=wn(a);return l=typeof l=="function"?l:r,Uo(pi(a,lr),r,l)}),m_=At(tl);function __(a,l){return Zc(a||[],l||[],$u)}function D_(a,l){return Zc(a||[],l||[],Ju)}var b_=At(function(a){var l=a.length,m=l>1?a[l-1]:r;return m=typeof m=="function"?(a.pop(),m):r,Th(a,m)});function kh(a){var l=k(a);return l.__chain__=!0,l}function y_(a,l){return l(a),a}function $a(a,l){return l(a)}var w_=ni(function(a){var l=a.length,m=l?a[0]:0,w=this.__wrapped__,M=function(N){return Fo(N,a)};return l>1||this.__actions__.length||!(w instanceof Ft)||!ii(m)?this.thru(M):(w=w.slice(m,+m+(l?1:0)),w.__actions__.push({func:$a,args:[M],thisArg:r}),new Dn(w,this.__chain__).thru(function(N){return l&&!N.length&&N.push(r),N}))});function A_(){return kh(this)}function E_(){return new Dn(this.value(),this.__chain__)}function C_(){this.__values__===r&&(this.__values__=Kh(this.value()));var a=this.__index__>=this.__values__.length,l=a?r:this.__values__[this.__index__++];return{done:a,value:l}}function F_(){return this}function S_(a){for(var l,m=this;m instanceof ka;){var w=Fh(m);w.__index__=0,w.__values__=r,l?M.__wrapped__=w:l=w;var M=w;m=m.__wrapped__}return M.__wrapped__=a,l}function B_(){var a=this.__wrapped__;if(a instanceof Ft){var l=a;return this.__actions__.length&&(l=new Ft(this)),l=l.reverse(),l.__actions__.push({func:$a,args:[el],thisArg:r}),new Dn(l,this.__chain__)}return this.thru(el)}function O_(){return Yc(this.__wrapped__,this.__actions__)}var M_=Va(function(a,l,m){xt.call(a,m)?++a[m]:ti(a,m,1)});function P_(a,l,m){var w=ht(a)?oc:yv;return m&&Gr(a,l,m)&&(l=r),w(a,Qe(l,3))}function T_(a,l){var m=ht(a)?pi:Tc;return m(a,Qe(l,3))}var k_=ah(Sh),I_=ah(Bh);function N_(a,l){return Mr(Ya(a,l),1)}function x_(a,l){return Mr(Ya(a,l),te)}function R_(a,l,m){return m=m===r?1:_t(m),Mr(Ya(a,l),m)}function Ih(a,l){var m=ht(a)?mn:_i;return m(a,Qe(l,3))}function Nh(a,l){var m=ht(a)?rg:Pc;return m(a,Qe(l,3))}var L_=Va(function(a,l,m){xt.call(a,m)?a[m].push(l):ti(a,m,[l])});function U_(a,l,m,w){a=Jr(a)?a:pu(a),m=m&&!w?_t(m):0;var M=a.length;return m<0&&(m=vr(M+m,0)),es(a)?m<=M&&a.indexOf(l,m)>-1:!!M&&ru(a,l,m)>-1}var V_=At(function(a,l,m){var w=-1,M=typeof l=="function",N=Jr(a)?oe(a.length):[];return _i(a,function(z){N[++w]=M?an(l,z,m):Zu(z,l,m)}),N}),j_=Va(function(a,l,m){ti(a,m,l)});function Ya(a,l){var m=ht(a)?$t:Lc;return m(a,Qe(l,3))}function q_(a,l,m,w){return a==null?[]:(ht(l)||(l=l==null?[]:[l]),m=w?r:m,ht(m)||(m=m==null?[]:[m]),qc(a,l,m))}var z_=Va(function(a,l,m){a[m?0:1].push(l)},function(){return[[],[]]});function W_(a,l,m){var w=ht(a)?ho:hc,M=arguments.length<3;return w(a,Qe(l,4),m,M,_i)}function H_(a,l,m){var w=ht(a)?ng:hc,M=arguments.length<3;return w(a,Qe(l,4),m,M,Pc)}function G_(a,l){var m=ht(a)?pi:Tc;return m(a,Ja(Qe(l,3)))}function K_(a){var l=ht(a)?Sc:Uv;return l(a)}function $_(a,l,m){(m?Gr(a,l,m):l===r)?l=1:l=_t(l);var w=ht(a)?vv:Vv;return w(a,l)}function Y_(a){var l=ht(a)?mv:qv;return l(a)}function Z_(a){if(a==null)return 0;if(Jr(a))return es(a)?iu(a):a.length;var l=Ur(a);return l==st||l==Vt?a.size:To(a).length}function X_(a,l,m){var w=ht(a)?po:zv;return m&&Gr(a,l,m)&&(l=r),w(a,Qe(l,3))}var J_=At(function(a,l){if(a==null)return[];var m=l.length;return m>1&&Gr(a,l[0],l[1])?l=[]:m>2&&Gr(l[0],l[1],l[2])&&(l=[l[0]]),qc(a,Mr(l,1),[])}),Za=Tg||function(){return Or.Date.now()};function Q_(a,l){if(typeof l!="function")throw new _n(o);return a=_t(a),function(){if(--a<1)return l.apply(this,arguments)}}function xh(a,l,m){return l=m?r:l,l=a&&l==null?a.length:l,ri(a,T,r,r,r,r,l)}function Rh(a,l){var m;if(typeof l!="function")throw new _n(o);return a=_t(a),function(){return--a>0&&(m=l.apply(this,arguments)),a<=1&&(l=r),m}}var rl=At(function(a,l,m){var w=_;if(m.length){var M=vi(m,hu(rl));w|=E}return ri(a,w,l,m,M)}),Lh=At(function(a,l,m){var w=_|D;if(m.length){var M=vi(m,hu(Lh));w|=E}return ri(l,w,a,m,M)});function Uh(a,l,m){l=m?r:l;var w=ri(a,A,r,r,r,r,r,l);return w.placeholder=Uh.placeholder,w}function Vh(a,l,m){l=m?r:l;var w=ri(a,F,r,r,r,r,r,l);return w.placeholder=Vh.placeholder,w}function jh(a,l,m){var w,M,N,z,$,ue,ge=0,ve=!1,be=!1,ke=!0;if(typeof a!="function")throw new _n(o);l=An(l)||0,Jt(m)&&(ve=!!m.leading,be="maxWait"in m,N=be?vr(An(m.maxWait)||0,l):N,ke="trailing"in m?!!m.trailing:ke);function We(fr){var kn=w,si=M;return w=M=r,ge=fr,z=a.apply(si,kn),z}function nt(fr){return ge=fr,$=ta(Et,l),ve?We(fr):z}function wt(fr){var kn=fr-ue,si=fr-ge,a0=l-kn;return be?Lr(a0,N-si):a0}function it(fr){var kn=fr-ue,si=fr-ge;return ue===r||kn>=l||kn<0||be&&si>=N}function Et(){var fr=Za();if(it(fr))return Bt(fr);$=ta(Et,wt(fr))}function Bt(fr){return $=r,ke&&w?We(fr):(w=M=r,z)}function fn(){$!==r&&Xc($),ge=0,w=ue=M=$=r}function Kr(){return $===r?z:Bt(Za())}function cn(){var fr=Za(),kn=it(fr);if(w=arguments,M=this,ue=fr,kn){if($===r)return nt(ue);if(be)return Xc($),$=ta(Et,l),We(ue)}return $===r&&($=ta(Et,l)),z}return cn.cancel=fn,cn.flush=Kr,cn}var eD=At(function(a,l){return Mc(a,1,l)}),tD=At(function(a,l,m){return Mc(a,An(l)||0,m)});function rD(a){return ri(a,x)}function Xa(a,l){if(typeof a!="function"||l!=null&&typeof l!="function")throw new _n(o);var m=function(){var w=arguments,M=l?l.apply(this,w):w[0],N=m.cache;if(N.has(M))return N.get(M);var z=a.apply(this,w);return m.cache=N.set(M,z)||N,z};return m.cache=new(Xa.Cache||ei),m}Xa.Cache=ei;function Ja(a){if(typeof a!="function")throw new _n(o);return function(){var l=arguments;switch(l.length){case 0:return!a.call(this);case 1:return!a.call(this,l[0]);case 2:return!a.call(this,l[0],l[1]);case 3:return!a.call(this,l[0],l[1],l[2])}return!a.apply(this,l)}}function nD(a){return Rh(2,a)}var iD=Wv(function(a,l){l=l.length==1&&ht(l[0])?$t(l[0],sn(Qe())):$t(Mr(l,1),sn(Qe()));var m=l.length;return At(function(w){for(var M=-1,N=Lr(w.length,m);++M<N;)w[M]=l[M].call(this,w[M]);return an(a,this,w)})}),nl=At(function(a,l){var m=vi(l,hu(nl));return ri(a,E,r,l,m)}),qh=At(function(a,l){var m=vi(l,hu(qh));return ri(a,S,r,l,m)}),uD=ni(function(a,l){return ri(a,P,r,r,r,l)});function aD(a,l){if(typeof a!="function")throw new _n(o);return l=l===r?l:_t(l),At(a,l)}function sD(a,l){if(typeof a!="function")throw new _n(o);return l=l==null?0:vr(_t(l),0),At(function(m){var w=m[l],M=yi(m,0,l);return w&&gi(M,w),an(a,this,M)})}function oD(a,l,m){var w=!0,M=!0;if(typeof a!="function")throw new _n(o);return Jt(m)&&(w="leading"in m?!!m.leading:w,M="trailing"in m?!!m.trailing:M),jh(a,l,{leading:w,maxWait:l,trailing:M})}function lD(a){return xh(a,1)}function fD(a,l){return nl(jo(l),a)}function cD(){if(!arguments.length)return[];var a=arguments[0];return ht(a)?a:[a]}function hD(a){return bn(a,g)}function dD(a,l){return l=typeof l=="function"?l:r,bn(a,g,l)}function pD(a){return bn(a,d|g)}function gD(a,l){return l=typeof l=="function"?l:r,bn(a,d|g,l)}function vD(a,l){return l==null||Oc(a,l,Ar(l))}function Tn(a,l){return a===l||a!==a&&l!==l}var mD=Wa(Oo),_D=Wa(function(a,l){return a>=l}),Gi=Nc(function(){return arguments}())?Nc:function(a){return ir(a)&&xt.call(a,"callee")&&!yc.call(a,"callee")},ht=oe.isArray,DD=rc?sn(rc):Sv;function Jr(a){return a!=null&&Qa(a.length)&&!ui(a)}function lr(a){return ir(a)&&Jr(a)}function bD(a){return a===!0||a===!1||ir(a)&&Hr(a)==He}var wi=Ig||pl,yD=nc?sn(nc):Bv;function wD(a){return ir(a)&&a.nodeType===1&&!ra(a)}function AD(a){if(a==null)return!0;if(Jr(a)&&(ht(a)||typeof a=="string"||typeof a.splice=="function"||wi(a)||du(a)||Gi(a)))return!a.length;var l=Ur(a);if(l==st||l==Vt)return!a.size;if(ea(a))return!To(a).length;for(var m in a)if(xt.call(a,m))return!1;return!0}function ED(a,l){return Xu(a,l)}function CD(a,l,m){m=typeof m=="function"?m:r;var w=m?m(a,l):r;return w===r?Xu(a,l,r,m):!!w}function il(a){if(!ir(a))return!1;var l=Hr(a);return l==mt||l==ze||typeof a.message=="string"&&typeof a.name=="string"&&!ra(a)}function FD(a){return typeof a=="number"&&Ac(a)}function ui(a){if(!Jt(a))return!1;var l=Hr(a);return l==at||l==ft||l==tt||l==Pe}function zh(a){return typeof a=="number"&&a==_t(a)}function Qa(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Q}function Jt(a){var l=typeof a;return a!=null&&(l=="object"||l=="function")}function ir(a){return a!=null&&typeof a=="object"}var Wh=ic?sn(ic):Mv;function SD(a,l){return a===l||Po(a,l,$o(l))}function BD(a,l,m){return m=typeof m=="function"?m:r,Po(a,l,$o(l),m)}function OD(a){return Hh(a)&&a!=+a}function MD(a){if(dm(a))throw new ct(u);return xc(a)}function PD(a){return a===null}function TD(a){return a==null}function Hh(a){return typeof a=="number"||ir(a)&&Hr(a)==ot}function ra(a){if(!ir(a)||Hr(a)!=Je)return!1;var l=Fa(a);if(l===null)return!0;var m=xt.call(l,"constructor")&&l.constructor;return typeof m=="function"&&m instanceof m&&wa.call(m)==Bg}var ul=uc?sn(uc):Pv;function kD(a){return zh(a)&&a>=-Q&&a<=Q}var Gh=ac?sn(ac):Tv;function es(a){return typeof a=="string"||!ht(a)&&ir(a)&&Hr(a)==Ht}function ln(a){return typeof a=="symbol"||ir(a)&&Hr(a)==j}var du=sc?sn(sc):kv;function ID(a){return a===r}function ND(a){return ir(a)&&Ur(a)==ee}function xD(a){return ir(a)&&Hr(a)==fe}var RD=Wa(ko),LD=Wa(function(a,l){return a<=l});function Kh(a){if(!a)return[];if(Jr(a))return es(a)?Mn(a):Xr(a);if(zu&&a[zu])return vg(a[zu]());var l=Ur(a),m=l==st?bo:l==Vt?Da:pu;return m(a)}function ai(a){if(!a)return a===0?a:0;if(a=An(a),a===te||a===-te){var l=a<0?-1:1;return l*J}return a===a?a:0}function _t(a){var l=ai(a),m=l%1;return l===l?m?l-m:l:0}function $h(a){return a?qi(_t(a),0,_e):0}function An(a){if(typeof a=="number")return a;if(ln(a))return le;if(Jt(a)){var l=typeof a.valueOf=="function"?a.valueOf():a;a=Jt(l)?l+"":l}if(typeof a!="string")return a===0?a:+a;a=dc(a);var m=Tu.test(a);return m||Iu.test(a)?Q1(a.slice(2),m?2:8):Pu.test(a)?le:+a}function Yh(a){return zn(a,Qr(a))}function UD(a){return a?qi(_t(a),-Q,Q):a===0?a:0}function It(a){return a==null?"":on(a)}var VD=fu(function(a,l){if(ea(l)||Jr(l)){zn(l,Ar(l),a);return}for(var m in l)xt.call(l,m)&&$u(a,m,l[m])}),Zh=fu(function(a,l){zn(l,Qr(l),a)}),ts=fu(function(a,l,m,w){zn(l,Qr(l),a,w)}),jD=fu(function(a,l,m,w){zn(l,Ar(l),a,w)}),qD=ni(Fo);function zD(a,l){var m=lu(a);return l==null?m:Bc(m,l)}var WD=At(function(a,l){a=jt(a);var m=-1,w=l.length,M=w>2?l[2]:r;for(M&&Gr(l[0],l[1],M)&&(w=1);++m<w;)for(var N=l[m],z=Qr(N),$=-1,ue=z.length;++$<ue;){var ge=z[$],ve=a[ge];(ve===r||Tn(ve,au[ge])&&!xt.call(a,ge))&&(a[ge]=N[ge])}return a}),HD=At(function(a){return a.push(r,dh),an(Xh,r,a)});function GD(a,l){return lc(a,Qe(l,3),qn)}function KD(a,l){return lc(a,Qe(l,3),Bo)}function $D(a,l){return a==null?a:So(a,Qe(l,3),Qr)}function YD(a,l){return a==null?a:kc(a,Qe(l,3),Qr)}function ZD(a,l){return a&&qn(a,Qe(l,3))}function XD(a,l){return a&&Bo(a,Qe(l,3))}function JD(a){return a==null?[]:xa(a,Ar(a))}function QD(a){return a==null?[]:xa(a,Qr(a))}function al(a,l,m){var w=a==null?r:zi(a,l);return w===r?m:w}function eb(a,l){return a!=null&&vh(a,l,Av)}function sl(a,l){return a!=null&&vh(a,l,Ev)}var tb=oh(function(a,l,m){l!=null&&typeof l.toString!="function"&&(l=Aa.call(l)),a[l]=m},ll(en)),rb=oh(function(a,l,m){l!=null&&typeof l.toString!="function"&&(l=Aa.call(l)),xt.call(a,l)?a[l].push(m):a[l]=[m]},Qe),nb=At(Zu);function Ar(a){return Jr(a)?Fc(a):To(a)}function Qr(a){return Jr(a)?Fc(a,!0):Iv(a)}function ib(a,l){var m={};return l=Qe(l,3),qn(a,function(w,M,N){ti(m,l(w,M,N),w)}),m}function ub(a,l){var m={};return l=Qe(l,3),qn(a,function(w,M,N){ti(m,M,l(w,M,N))}),m}var ab=fu(function(a,l,m){Ra(a,l,m)}),Xh=fu(function(a,l,m,w){Ra(a,l,m,w)}),sb=ni(function(a,l){var m={};if(a==null)return m;var w=!1;l=$t(l,function(N){return N=bi(N,a),w||(w=N.length>1),N}),zn(a,Go(a),m),w&&(m=bn(m,d|h|g,tm));for(var M=l.length;M--;)Lo(m,l[M]);return m});function ob(a,l){return Jh(a,Ja(Qe(l)))}var lb=ni(function(a,l){return a==null?{}:xv(a,l)});function Jh(a,l){if(a==null)return{};var m=$t(Go(a),function(w){return[w]});return l=Qe(l),zc(a,m,function(w,M){return l(w,M[0])})}function fb(a,l,m){l=bi(l,a);var w=-1,M=l.length;for(M||(M=1,a=r);++w<M;){var N=a==null?r:a[Wn(l[w])];N===r&&(w=M,N=m),a=ui(N)?N.call(a):N}return a}function cb(a,l,m){return a==null?a:Ju(a,l,m)}function hb(a,l,m,w){return w=typeof w=="function"?w:r,a==null?a:Ju(a,l,m,w)}var Qh=ch(Ar),e0=ch(Qr);function db(a,l,m){var w=ht(a),M=w||wi(a)||du(a);if(l=Qe(l,4),m==null){var N=a&&a.constructor;M?m=w?new N:[]:Jt(a)?m=ui(N)?lu(Fa(a)):{}:m={}}return(M?mn:qn)(a,function(z,$,ue){return l(m,z,$,ue)}),m}function pb(a,l){return a==null?!0:Lo(a,l)}function gb(a,l,m){return a==null?a:$c(a,l,jo(m))}function vb(a,l,m,w){return w=typeof w=="function"?w:r,a==null?a:$c(a,l,jo(m),w)}function pu(a){return a==null?[]:Do(a,Ar(a))}function mb(a){return a==null?[]:Do(a,Qr(a))}function _b(a,l,m){return m===r&&(m=l,l=r),m!==r&&(m=An(m),m=m===m?m:0),l!==r&&(l=An(l),l=l===l?l:0),qi(An(a),l,m)}function Db(a,l,m){return l=ai(l),m===r?(m=l,l=0):m=ai(m),a=An(a),Cv(a,l,m)}function bb(a,l,m){if(m&&typeof m!="boolean"&&Gr(a,l,m)&&(l=m=r),m===r&&(typeof l=="boolean"?(m=l,l=r):typeof a=="boolean"&&(m=a,a=r)),a===r&&l===r?(a=0,l=1):(a=ai(a),l===r?(l=a,a=0):l=ai(l)),a>l){var w=a;a=l,l=w}if(m||a%1||l%1){var M=Ec();return Lr(a+M*(l-a+J1("1e-"+((M+"").length-1))),l)}return No(a,l)}var yb=cu(function(a,l,m){return l=l.toLowerCase(),a+(m?t0(l):l)});function t0(a){return ol(It(a).toLowerCase())}function r0(a){return a=It(a),a&&a.replace(xu,cg).replace(q1,"")}function wb(a,l,m){a=It(a),l=on(l);var w=a.length;m=m===r?w:qi(_t(m),0,w);var M=m;return m-=l.length,m>=0&&a.slice(m,M)==l}function Ab(a){return a=It(a),a&&dn.test(a)?a.replace(cr,hg):a}function Eb(a){return a=It(a),a&&Su.test(a)?a.replace(Ii,"\\$&"):a}var Cb=cu(function(a,l,m){return a+(m?"-":"")+l.toLowerCase()}),Fb=cu(function(a,l,m){return a+(m?" ":"")+l.toLowerCase()}),Sb=uh("toLowerCase");function Bb(a,l,m){a=It(a),l=_t(l);var w=l?iu(a):0;if(!l||w>=l)return a;var M=(l-w)/2;return za(Ma(M),m)+a+za(Oa(M),m)}function Ob(a,l,m){a=It(a),l=_t(l);var w=l?iu(a):0;return l&&w<l?a+za(l-w,m):a}function Mb(a,l,m){a=It(a),l=_t(l);var w=l?iu(a):0;return l&&w<l?za(l-w,m)+a:a}function Pb(a,l,m){return m||l==null?l=0:l&&(l=+l),Lg(It(a).replace(Br,""),l||0)}function Tb(a,l,m){return(m?Gr(a,l,m):l===r)?l=1:l=_t(l),xo(It(a),l)}function kb(){var a=arguments,l=It(a[0]);return a.length<3?l:l.replace(a[1],a[2])}var Ib=cu(function(a,l,m){return a+(m?"_":"")+l.toLowerCase()});function Nb(a,l,m){return m&&typeof m!="number"&&Gr(a,l,m)&&(l=m=r),m=m===r?_e:m>>>0,m?(a=It(a),a&&(typeof l=="string"||l!=null&&!ul(l))&&(l=on(l),!l&&nu(a))?yi(Mn(a),0,m):a.split(l,m)):[]}var xb=cu(function(a,l,m){return a+(m?" ":"")+ol(l)});function Rb(a,l,m){return a=It(a),m=m==null?0:qi(_t(m),0,a.length),l=on(l),a.slice(m,m+l.length)==l}function Lb(a,l,m){var w=k.templateSettings;m&&Gr(a,l,m)&&(l=r),a=It(a),l=ts({},l,w,hh);var M=ts({},l.imports,w.imports,hh),N=Ar(M),z=Do(M,N),$,ue,ge=0,ve=l.interpolate||hi,be="__p += '",ke=yo((l.escape||hi).source+"|"+ve.source+"|"+(ve===Zn?Mu:hi).source+"|"+(l.evaluate||hi).source+"|$","g"),We="//# sourceURL="+(xt.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++K1+"]")+`
`;a.replace(ke,function(it,Et,Bt,fn,Kr,cn){return Bt||(Bt=fn),be+=a.slice(ge,cn).replace(Ru,dg),Et&&($=!0,be+=`' +
__e(`+Et+`) +
'`),Kr&&(ue=!0,be+=`';
`+Kr+`;
__p += '`),Bt&&(be+=`' +
((__t = (`+Bt+`)) == null ? '' : __t) +
'`),ge=cn+it.length,it}),be+=`';
`;var nt=xt.call(l,"variable")&&l.variable;if(!nt)be=`with (obj) {
`+be+`
}
`;else if(Ni.test(nt))throw new ct(s);be=(ue?be.replace(Zt,""):be).replace(br,"$1").replace(Xt,"$1;"),be="function("+(nt||"obj")+`) {
`+(nt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($?", __e = _.escape":"")+(ue?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+be+`return __p
}`;var wt=i0(function(){return kt(N,We+"return "+be).apply(r,z)});if(wt.source=be,il(wt))throw wt;return wt}function Ub(a){return It(a).toLowerCase()}function Vb(a){return It(a).toUpperCase()}function jb(a,l,m){if(a=It(a),a&&(m||l===r))return dc(a);if(!a||!(l=on(l)))return a;var w=Mn(a),M=Mn(l),N=pc(w,M),z=gc(w,M)+1;return yi(w,N,z).join("")}function qb(a,l,m){if(a=It(a),a&&(m||l===r))return a.slice(0,mc(a)+1);if(!a||!(l=on(l)))return a;var w=Mn(a),M=gc(w,Mn(l))+1;return yi(w,0,M).join("")}function zb(a,l,m){if(a=It(a),a&&(m||l===r))return a.replace(Br,"");if(!a||!(l=on(l)))return a;var w=Mn(a),M=pc(w,Mn(l));return yi(w,M).join("")}function Wb(a,l){var m=H,w=re;if(Jt(l)){var M="separator"in l?l.separator:M;m="length"in l?_t(l.length):m,w="omission"in l?on(l.omission):w}a=It(a);var N=a.length;if(nu(a)){var z=Mn(a);N=z.length}if(m>=N)return a;var $=m-iu(w);if($<1)return w;var ue=z?yi(z,0,$).join(""):a.slice(0,$);if(M===r)return ue+w;if(z&&($+=ue.length-$),ul(M)){if(a.slice($).search(M)){var ge,ve=ue;for(M.global||(M=yo(M.source,It(Qi.exec(M))+"g")),M.lastIndex=0;ge=M.exec(ve);)var be=ge.index;ue=ue.slice(0,be===r?$:be)}}else if(a.indexOf(on(M),$)!=$){var ke=ue.lastIndexOf(M);ke>-1&&(ue=ue.slice(0,ke))}return ue+w}function Hb(a){return a=It(a),a&&hr.test(a)?a.replace(yr,bg):a}var Gb=cu(function(a,l,m){return a+(m?" ":"")+l.toUpperCase()}),ol=uh("toUpperCase");function n0(a,l,m){return a=It(a),l=m?r:l,l===r?gg(a)?Ag(a):ag(a):a.match(l)||[]}var i0=At(function(a,l){try{return an(a,r,l)}catch(m){return il(m)?m:new ct(m)}}),Kb=ni(function(a,l){return mn(l,function(m){m=Wn(m),ti(a,m,rl(a[m],a))}),a});function $b(a){var l=a==null?0:a.length,m=Qe();return a=l?$t(a,function(w){if(typeof w[1]!="function")throw new _n(o);return[m(w[0]),w[1]]}):[],At(function(w){for(var M=-1;++M<l;){var N=a[M];if(an(N[0],this,w))return an(N[1],this,w)}})}function Yb(a){return bv(bn(a,d))}function ll(a){return function(){return a}}function Zb(a,l){return a==null||a!==a?l:a}var Xb=sh(),Jb=sh(!0);function en(a){return a}function fl(a){return Rc(typeof a=="function"?a:bn(a,d))}function Qb(a){return Uc(bn(a,d))}function ey(a,l){return Vc(a,bn(l,d))}var ty=At(function(a,l){return function(m){return Zu(m,a,l)}}),ry=At(function(a,l){return function(m){return Zu(a,m,l)}});function cl(a,l,m){var w=Ar(l),M=xa(l,w);m==null&&!(Jt(l)&&(M.length||!w.length))&&(m=l,l=a,a=this,M=xa(l,Ar(l)));var N=!(Jt(m)&&"chain"in m)||!!m.chain,z=ui(a);return mn(M,function($){var ue=l[$];a[$]=ue,z&&(a.prototype[$]=function(){var ge=this.__chain__;if(N||ge){var ve=a(this.__wrapped__),be=ve.__actions__=Xr(this.__actions__);return be.push({func:ue,args:arguments,thisArg:a}),ve.__chain__=ge,ve}return ue.apply(a,gi([this.value()],arguments))})}),a}function ny(){return Or._===this&&(Or._=Og),this}function hl(){}function iy(a){return a=_t(a),At(function(l){return jc(l,a)})}var uy=zo($t),ay=zo(oc),sy=zo(po);function u0(a){return Zo(a)?go(Wn(a)):Rv(a)}function oy(a){return function(l){return a==null?r:zi(a,l)}}var ly=lh(),fy=lh(!0);function dl(){return[]}function pl(){return!1}function cy(){return{}}function hy(){return""}function dy(){return!0}function py(a,l){if(a=_t(a),a<1||a>Q)return[];var m=_e,w=Lr(a,_e);l=Qe(l),a-=_e;for(var M=_o(w,l);++m<a;)l(m);return M}function gy(a){return ht(a)?$t(a,Wn):ln(a)?[a]:Xr(Ch(It(a)))}function vy(a){var l=++Sg;return It(a)+l}var my=qa(function(a,l){return a+l},0),_y=Wo("ceil"),Dy=qa(function(a,l){return a/l},1),by=Wo("floor");function yy(a){return a&&a.length?Na(a,en,Oo):r}function wy(a,l){return a&&a.length?Na(a,Qe(l,2),Oo):r}function Ay(a){return cc(a,en)}function Ey(a,l){return cc(a,Qe(l,2))}function Cy(a){return a&&a.length?Na(a,en,ko):r}function Fy(a,l){return a&&a.length?Na(a,Qe(l,2),ko):r}var Sy=qa(function(a,l){return a*l},1),By=Wo("round"),Oy=qa(function(a,l){return a-l},0);function My(a){return a&&a.length?mo(a,en):0}function Py(a,l){return a&&a.length?mo(a,Qe(l,2)):0}return k.after=Q_,k.ary=xh,k.assign=VD,k.assignIn=Zh,k.assignInWith=ts,k.assignWith=jD,k.at=qD,k.before=Rh,k.bind=rl,k.bindAll=Kb,k.bindKey=Lh,k.castArray=cD,k.chain=kh,k.chunk=bm,k.compact=ym,k.concat=wm,k.cond=$b,k.conforms=Yb,k.constant=ll,k.countBy=M_,k.create=zD,k.curry=Uh,k.curryRight=Vh,k.debounce=jh,k.defaults=WD,k.defaultsDeep=HD,k.defer=eD,k.delay=tD,k.difference=Am,k.differenceBy=Em,k.differenceWith=Cm,k.drop=Fm,k.dropRight=Sm,k.dropRightWhile=Bm,k.dropWhile=Om,k.fill=Mm,k.filter=T_,k.flatMap=N_,k.flatMapDeep=x_,k.flatMapDepth=R_,k.flatten=Oh,k.flattenDeep=Pm,k.flattenDepth=Tm,k.flip=rD,k.flow=Xb,k.flowRight=Jb,k.fromPairs=km,k.functions=JD,k.functionsIn=QD,k.groupBy=L_,k.initial=Nm,k.intersection=xm,k.intersectionBy=Rm,k.intersectionWith=Lm,k.invert=tb,k.invertBy=rb,k.invokeMap=V_,k.iteratee=fl,k.keyBy=j_,k.keys=Ar,k.keysIn=Qr,k.map=Ya,k.mapKeys=ib,k.mapValues=ub,k.matches=Qb,k.matchesProperty=ey,k.memoize=Xa,k.merge=ab,k.mergeWith=Xh,k.method=ty,k.methodOf=ry,k.mixin=cl,k.negate=Ja,k.nthArg=iy,k.omit=sb,k.omitBy=ob,k.once=nD,k.orderBy=q_,k.over=uy,k.overArgs=iD,k.overEvery=ay,k.overSome=sy,k.partial=nl,k.partialRight=qh,k.partition=z_,k.pick=lb,k.pickBy=Jh,k.property=u0,k.propertyOf=oy,k.pull=qm,k.pullAll=Ph,k.pullAllBy=zm,k.pullAllWith=Wm,k.pullAt=Hm,k.range=ly,k.rangeRight=fy,k.rearg=uD,k.reject=G_,k.remove=Gm,k.rest=aD,k.reverse=el,k.sampleSize=$_,k.set=cb,k.setWith=hb,k.shuffle=Y_,k.slice=Km,k.sortBy=J_,k.sortedUniq=e_,k.sortedUniqBy=t_,k.split=Nb,k.spread=sD,k.tail=r_,k.take=n_,k.takeRight=i_,k.takeRightWhile=u_,k.takeWhile=a_,k.tap=y_,k.throttle=oD,k.thru=$a,k.toArray=Kh,k.toPairs=Qh,k.toPairsIn=e0,k.toPath=gy,k.toPlainObject=Yh,k.transform=db,k.unary=lD,k.union=s_,k.unionBy=o_,k.unionWith=l_,k.uniq=f_,k.uniqBy=c_,k.uniqWith=h_,k.unset=pb,k.unzip=tl,k.unzipWith=Th,k.update=gb,k.updateWith=vb,k.values=pu,k.valuesIn=mb,k.without=d_,k.words=n0,k.wrap=fD,k.xor=p_,k.xorBy=g_,k.xorWith=v_,k.zip=m_,k.zipObject=__,k.zipObjectDeep=D_,k.zipWith=b_,k.entries=Qh,k.entriesIn=e0,k.extend=Zh,k.extendWith=ts,cl(k,k),k.add=my,k.attempt=i0,k.camelCase=yb,k.capitalize=t0,k.ceil=_y,k.clamp=_b,k.clone=hD,k.cloneDeep=pD,k.cloneDeepWith=gD,k.cloneWith=dD,k.conformsTo=vD,k.deburr=r0,k.defaultTo=Zb,k.divide=Dy,k.endsWith=wb,k.eq=Tn,k.escape=Ab,k.escapeRegExp=Eb,k.every=P_,k.find=k_,k.findIndex=Sh,k.findKey=GD,k.findLast=I_,k.findLastIndex=Bh,k.findLastKey=KD,k.floor=by,k.forEach=Ih,k.forEachRight=Nh,k.forIn=$D,k.forInRight=YD,k.forOwn=ZD,k.forOwnRight=XD,k.get=al,k.gt=mD,k.gte=_D,k.has=eb,k.hasIn=sl,k.head=Mh,k.identity=en,k.includes=U_,k.indexOf=Im,k.inRange=Db,k.invoke=nb,k.isArguments=Gi,k.isArray=ht,k.isArrayBuffer=DD,k.isArrayLike=Jr,k.isArrayLikeObject=lr,k.isBoolean=bD,k.isBuffer=wi,k.isDate=yD,k.isElement=wD,k.isEmpty=AD,k.isEqual=ED,k.isEqualWith=CD,k.isError=il,k.isFinite=FD,k.isFunction=ui,k.isInteger=zh,k.isLength=Qa,k.isMap=Wh,k.isMatch=SD,k.isMatchWith=BD,k.isNaN=OD,k.isNative=MD,k.isNil=TD,k.isNull=PD,k.isNumber=Hh,k.isObject=Jt,k.isObjectLike=ir,k.isPlainObject=ra,k.isRegExp=ul,k.isSafeInteger=kD,k.isSet=Gh,k.isString=es,k.isSymbol=ln,k.isTypedArray=du,k.isUndefined=ID,k.isWeakMap=ND,k.isWeakSet=xD,k.join=Um,k.kebabCase=Cb,k.last=wn,k.lastIndexOf=Vm,k.lowerCase=Fb,k.lowerFirst=Sb,k.lt=RD,k.lte=LD,k.max=yy,k.maxBy=wy,k.mean=Ay,k.meanBy=Ey,k.min=Cy,k.minBy=Fy,k.stubArray=dl,k.stubFalse=pl,k.stubObject=cy,k.stubString=hy,k.stubTrue=dy,k.multiply=Sy,k.nth=jm,k.noConflict=ny,k.noop=hl,k.now=Za,k.pad=Bb,k.padEnd=Ob,k.padStart=Mb,k.parseInt=Pb,k.random=bb,k.reduce=W_,k.reduceRight=H_,k.repeat=Tb,k.replace=kb,k.result=fb,k.round=By,k.runInContext=ie,k.sample=K_,k.size=Z_,k.snakeCase=Ib,k.some=X_,k.sortedIndex=$m,k.sortedIndexBy=Ym,k.sortedIndexOf=Zm,k.sortedLastIndex=Xm,k.sortedLastIndexBy=Jm,k.sortedLastIndexOf=Qm,k.startCase=xb,k.startsWith=Rb,k.subtract=Oy,k.sum=My,k.sumBy=Py,k.template=Lb,k.times=py,k.toFinite=ai,k.toInteger=_t,k.toLength=$h,k.toLower=Ub,k.toNumber=An,k.toSafeInteger=UD,k.toString=It,k.toUpper=Vb,k.trim=jb,k.trimEnd=qb,k.trimStart=zb,k.truncate=Wb,k.unescape=Hb,k.uniqueId=vy,k.upperCase=Gb,k.upperFirst=ol,k.each=Ih,k.eachRight=Nh,k.first=Mh,cl(k,function(){var a={};return qn(k,function(l,m){xt.call(k.prototype,m)||(a[m]=l)}),a}(),{chain:!1}),k.VERSION=n,mn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){k[a].placeholder=k}),mn(["drop","take"],function(a,l){Ft.prototype[a]=function(m){m=m===r?1:vr(_t(m),0);var w=this.__filtered__&&!l?new Ft(this):this.clone();return w.__filtered__?w.__takeCount__=Lr(m,w.__takeCount__):w.__views__.push({size:Lr(m,_e),type:a+(w.__dir__<0?"Right":"")}),w},Ft.prototype[a+"Right"]=function(m){return this.reverse()[a](m).reverse()}}),mn(["filter","map","takeWhile"],function(a,l){var m=l+1,w=m==U||m==q;Ft.prototype[a]=function(M){var N=this.clone();return N.__iteratees__.push({iteratee:Qe(M,3),type:m}),N.__filtered__=N.__filtered__||w,N}}),mn(["head","last"],function(a,l){var m="take"+(l?"Right":"");Ft.prototype[a]=function(){return this[m](1).value()[0]}}),mn(["initial","tail"],function(a,l){var m="drop"+(l?"":"Right");Ft.prototype[a]=function(){return this.__filtered__?new Ft(this):this[m](1)}}),Ft.prototype.compact=function(){return this.filter(en)},Ft.prototype.find=function(a){return this.filter(a).head()},Ft.prototype.findLast=function(a){return this.reverse().find(a)},Ft.prototype.invokeMap=At(function(a,l){return typeof a=="function"?new Ft(this):this.map(function(m){return Zu(m,a,l)})}),Ft.prototype.reject=function(a){return this.filter(Ja(Qe(a)))},Ft.prototype.slice=function(a,l){a=_t(a);var m=this;return m.__filtered__&&(a>0||l<0)?new Ft(m):(a<0?m=m.takeRight(-a):a&&(m=m.drop(a)),l!==r&&(l=_t(l),m=l<0?m.dropRight(-l):m.take(l-a)),m)},Ft.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Ft.prototype.toArray=function(){return this.take(_e)},qn(Ft.prototype,function(a,l){var m=/^(?:filter|find|map|reject)|While$/.test(l),w=/^(?:head|last)$/.test(l),M=k[w?"take"+(l=="last"?"Right":""):l],N=w||/^find/.test(l);M&&(k.prototype[l]=function(){var z=this.__wrapped__,$=w?[1]:arguments,ue=z instanceof Ft,ge=$[0],ve=ue||ht(z),be=function(Et){var Bt=M.apply(k,gi([Et],$));return w&&ke?Bt[0]:Bt};ve&&m&&typeof ge=="function"&&ge.length!=1&&(ue=ve=!1);var ke=this.__chain__,We=!!this.__actions__.length,nt=N&&!ke,wt=ue&&!We;if(!N&&ve){z=wt?z:new Ft(this);var it=a.apply(z,$);return it.__actions__.push({func:$a,args:[be],thisArg:r}),new Dn(it,ke)}return nt&&wt?a.apply(this,$):(it=this.thru(be),nt?w?it.value()[0]:it.value():it)})}),mn(["pop","push","shift","sort","splice","unshift"],function(a){var l=ba[a],m=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",w=/^(?:pop|shift)$/.test(a);k.prototype[a]=function(){var M=arguments;if(w&&!this.__chain__){var N=this.value();return l.apply(ht(N)?N:[],M)}return this[m](function(z){return l.apply(ht(z)?z:[],M)})}}),qn(Ft.prototype,function(a,l){var m=k[l];if(m){var w=m.name+"";xt.call(ou,w)||(ou[w]=[]),ou[w].push({name:l,func:m})}}),ou[ja(r,D).name]=[{name:"wrapper",func:r}],Ft.prototype.clone=Hg,Ft.prototype.reverse=Gg,Ft.prototype.value=Kg,k.prototype.at=w_,k.prototype.chain=A_,k.prototype.commit=E_,k.prototype.next=C_,k.prototype.plant=S_,k.prototype.reverse=B_,k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=O_,k.prototype.first=k.prototype.head,zu&&(k.prototype[zu]=F_),k},uu=Eg();Li?((Li.exports=uu)._=uu,lo._=uu):Or._=uu}).call(dr)})(QS,Us);const e5=Us,Gl="panelModeStore";function t5(){const t=zr("select"),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Gl]||""),{subscribe:e,update:u=>{!u||!i||(localStorage[Gl]=u,r(u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[Gl],r("select"))}}}const Kn=t5(),r5=qr(Kn,t=>Ct(Kn));function Nd(t,e,r){const n=t.slice();return n[7]=e[r][0],n[8]=e[r][1],n}function xd(t,e,r){const n=t.slice();return n[11]=e[r][0],n[12]=e[r][1],n}function Rd(t){let e=t[12].text+"",r,n,i,u;return{c(){r=Re(e),n=Z("b"),i=Re("::"),u=Ie()},l(o){r=Le(o,e),n=X(o,"B",{});var s=G(n);i=Le(s,"::"),s.forEach(I),u=Ne(o)},m(o,s){me(o,r,s),me(o,n,s),R(n,i),me(o,u,s)},p(o,s){s&1&&e!==(e=o[12].text+"")&&Zr(r,e)},d(o){o&&I(r),o&&I(n),o&&I(u)}}}function Ld(t,e){let r,n,i,u,o,s=Object.entries(e[8].weightedPrompts),f=[];for(let c=0;c<s.length;c+=1)f[c]=Rd(xd(e,s,c));function p(){return e[5](e[7],e[8])}return{key:t,first:null,c(){r=Z("li"),n=Z("a");for(let c=0;c<f.length;c+=1)f[c].c();i=Ie(),this.h()},l(c){r=X(c,"LI",{});var d=G(r);n=X(d,"A",{class:!0});var h=G(n);for(let g=0;g<f.length;g+=1)f[g].l(h);h.forEach(I),i=Ne(d),d.forEach(I),this.h()},h(){B(n,"class","text-xs inline-block"),Pt(n,"active",e[1]===e[7]),this.first=r},m(c,d){me(c,r,d),R(r,n);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(n,null);R(r,i),u||(o=Se(n,"click",p),u=!0)},p(c,d){if(e=c,d&5){s=Object.entries(e[8].weightedPrompts);let h;for(h=0;h<s.length;h+=1){const g=xd(e,s,h);f[h]?f[h].p(g,d):(f[h]=Rd(g),f[h].c(),f[h].m(n,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=s.length}d&7&&Pt(n,"active",e[1]===e[7])},d(c){c&&I(r),zs(f,c),u=!1,o()}}}function n5(t){let e,r,n,i,u,o=[],s=new Map,f,p,c=t[2](t[0],Ud,"desc");const d=h=>h[7];for(let h=0;h<c.length;h+=1){let g=Nd(t,c,h),b=d(g);s.set(b,o[h]=Ld(b,g))}return{c(){e=Z("ul"),r=Z("li"),n=Z("a"),i=Re("New +"),u=Ie();for(let h=0;h<o.length;h+=1)o[h].c();this.h()},l(h){e=X(h,"UL",{class:!0});var g=G(e);r=X(g,"LI",{});var b=G(r);n=X(b,"A",{class:!0});var v=G(n);i=Le(v,"New +"),v.forEach(I),b.forEach(I),u=Ne(g);for(let _=0;_<o.length;_+=1)o[_].l(g);g.forEach(I),this.h()},h(){B(n,"class","text-xs inline-block"),B(e,"class","menu h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(h,g){me(h,e,g),R(e,r),R(r,n),R(n,i),R(e,u);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(e,null);f||(p=Se(n,"click",t[3]),f=!0)},p(h,[g]){g&23&&(c=h[2](h[0],Ud,"desc"),o=$n(o,g,d,1,h,c,s,e,Pi,Ld,null,Nd))},i:Te,o:Te,d(h){h&&I(e);for(let g=0;g<o.length;g+=1)o[g].d();f=!1,p()}}}const Ud=t=>t[1].date;function i5(t,e,r){let n,i,u;ut(t,Sr,c=>r(6,n=c)),ut(t,cE,c=>r(0,i=c)),ut(t,Yp,c=>r(1,u=c));const{orderBy:o}=e5;function s(){Yi.delete(),Mt.update(Fi({},n.weightMode)),Kn.update("edit")}function f(c,d){Yi.update(c),Mt.update({...d}),Kn.update("edit")}return[i,u,o,s,f,(c,d)=>f(c,d)]}class u5 extends Dt{constructor(e){super(),bt(this,e,i5,n5,yt,{})}}let os;const a5=new Uint8Array(16);function s5(){if(!os&&(os=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!os))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return os(a5)}const Tr=[];for(let t=0;t<256;++t)Tr.push((t+256).toString(16).slice(1));function o5(t,e=0){return(Tr[t[e+0]]+Tr[t[e+1]]+Tr[t[e+2]]+Tr[t[e+3]]+"-"+Tr[t[e+4]]+Tr[t[e+5]]+"-"+Tr[t[e+6]]+Tr[t[e+7]]+"-"+Tr[t[e+8]]+Tr[t[e+9]]+"-"+Tr[t[e+10]]+Tr[t[e+11]]+Tr[t[e+12]]+Tr[t[e+13]]+Tr[t[e+14]]+Tr[t[e+15]]).toLowerCase()}const l5=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Vd={randomUUID:l5};function Kf(t,e,r){if(Vd.randomUUID&&!e&&!t)return Vd.randomUUID();t=t||{};const n=t.random||(t.rng||s5)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return o5(n)}function f5(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var B1=f5,c5=typeof dr=="object"&&dr&&dr.Object===Object&&dr,h5=c5,d5=h5,p5=typeof self=="object"&&self&&self.Object===Object&&self,g5=d5||p5||Function("return this")(),O1=g5,v5=O1,m5=function(){return v5.Date.now()},_5=m5,D5=/\s/;function b5(t){for(var e=t.length;e--&&D5.test(t.charAt(e)););return e}var y5=b5,w5=y5,A5=/^\s+/;function E5(t){return t&&t.slice(0,w5(t)+1).replace(A5,"")}var C5=E5,F5=O1,S5=F5.Symbol,M1=S5,jd=M1,P1=Object.prototype,B5=P1.hasOwnProperty,O5=P1.toString,na=jd?jd.toStringTag:void 0;function M5(t){var e=B5.call(t,na),r=t[na];try{t[na]=void 0;var n=!0}catch{}var i=O5.call(t);return n&&(e?t[na]=r:delete t[na]),i}var P5=M5,T5=Object.prototype,k5=T5.toString;function I5(t){return k5.call(t)}var N5=I5,qd=M1,x5=P5,R5=N5,L5="[object Null]",U5="[object Undefined]",zd=qd?qd.toStringTag:void 0;function V5(t){return t==null?t===void 0?U5:L5:zd&&zd in Object(t)?x5(t):R5(t)}var j5=V5;function q5(t){return t!=null&&typeof t=="object"}var z5=q5,W5=j5,H5=z5,G5="[object Symbol]";function K5(t){return typeof t=="symbol"||H5(t)&&W5(t)==G5}var $5=K5,Y5=C5,Wd=B1,Z5=$5,Hd=0/0,X5=/^[-+]0x[0-9a-f]+$/i,J5=/^0b[01]+$/i,Q5=/^0o[0-7]+$/i,e8=parseInt;function t8(t){if(typeof t=="number")return t;if(Z5(t))return Hd;if(Wd(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Wd(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Y5(t);var r=J5.test(t);return r||Q5.test(t)?e8(t.slice(2),r?2:8):X5.test(t)?Hd:+t}var r8=t8,n8=B1,Kl=_5,Gd=r8,i8="Expected a function",u8=Math.max,a8=Math.min;function s8(t,e,r){var n,i,u,o,s,f,p=0,c=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(i8);e=Gd(e)||0,n8(r)&&(c=!!r.leading,d="maxWait"in r,u=d?u8(Gd(r.maxWait)||0,e):u,h="trailing"in r?!!r.trailing:h);function g(S){var T=n,P=i;return n=i=void 0,p=S,o=t.apply(P,T),o}function b(S){return p=S,s=setTimeout(D,e),c?g(S):o}function v(S){var T=S-f,P=S-p,x=e-T;return d?a8(x,u-P):x}function _(S){var T=S-f,P=S-p;return f===void 0||T>=e||T<0||d&&P>=u}function D(){var S=Kl();if(_(S))return C(S);s=setTimeout(D,v(S))}function C(S){return s=void 0,h&&n?g(S):(n=i=void 0,o)}function A(){s!==void 0&&clearTimeout(s),p=0,n=f=i=s=void 0}function F(){return s===void 0?o:C(Kl())}function E(){var S=Kl(),T=_(S);if(n=arguments,i=this,f=S,T){if(s===void 0)return b(f);if(d)return clearTimeout(s),s=setTimeout(D,e),g(f)}return s===void 0&&(s=setTimeout(D,e)),o}return E.cancel=A,E.flush=F,E}var Vs=s8;function Kd(t,e,r){const n=t.slice();return n[14]=e[r].id,n[15]=e[r].text,n}function $d(t,e){let r,n,i,u,o;function s(...f){return e[9](e[14],...f)}return{key:t,first:null,c(){r=Z("li"),n=Z("input"),this.h()},l(f){r=X(f,"LI",{class:!0});var p=G(r);n=X(p,"INPUT",{type:!0,placeholder:!0,class:!0}),p.forEach(I),this.h()},h(){n.value=i=e[15],B(n,"type","text"),B(n,"placeholder",""),B(n,"class","input input-bordered input-sm w-full"),B(r,"class","p-1"),this.first=r},m(f,p){me(f,r,p),R(r,n),u||(o=Se(n,"input",s),u=!0)},p(f,p){e=f,p&2&&i!==(i=e[15])&&n.value!==i&&(n.value=i)},d(f){f&&I(r),u=!1,o()}}}function o8(t){let e,r,n,i,u,o,s,f,p,c,d,h=[],g=new Map,b,v,_,D,C,A=t[1];const F=E=>E[14];for(let E=0;E<A.length;E+=1){let S=Kd(t,A,E),T=F(S);g.set(T,h[E]=$d(T,S))}return{c(){e=Z("div"),r=Z("button"),n=Re("Paste"),i=Ie(),u=Z("button"),o=Re("Save"),s=Ie(),f=Z("button"),p=Re("Delete"),c=Ie(),d=Z("ul");for(let E=0;E<h.length;E+=1)h[E].c();b=Ie(),v=Z("li"),_=Z("input"),this.h()},l(E){e=X(E,"DIV",{class:!0});var S=G(e);r=X(S,"BUTTON",{class:!0});var T=G(r);n=Le(T,"Paste"),T.forEach(I),i=Ne(S),u=X(S,"BUTTON",{class:!0});var P=G(u);o=Le(P,"Save"),P.forEach(I),s=Ne(S),f=X(S,"BUTTON",{class:!0});var x=G(f);p=Le(x,"Delete"),x.forEach(I),S.forEach(I),c=Ne(E),d=X(E,"UL",{class:!0});var H=G(d);for(let V=0;V<h.length;V+=1)h[V].l(H);b=Ne(H),v=X(H,"LI",{class:!0});var re=G(v);_=X(re,"INPUT",{type:!0,placeholder:!0,class:!0}),re.forEach(I),H.forEach(I),this.h()},h(){B(r,"class","btn btn-sm btn-info mx-2"),B(u,"class","btn btn-sm btn-success mx-2"),B(f,"class","btn btn-sm btn-error mx-2"),B(e,"class","flex px-8 py-2 justify-center bg-base-100"),B(_,"type","text"),B(_,"placeholder","Add prompt"),B(_,"class","input input-bordered input-sm w-full italic"),B(v,"class","p-1"),B(d,"class","h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(E,S){me(E,e,S),R(e,r),R(r,n),R(e,i),R(e,u),R(u,o),R(e,s),R(e,f),R(f,p),me(E,c,S),me(E,d,S);for(let T=0;T<h.length;T+=1)h[T]&&h[T].m(d,null);R(d,b),R(d,v),R(v,_),rn(_,t[0]),D||(C=[Se(r,"click",t[3]),Se(u,"click",t[2]),Se(f,"click",t[4]),Se(_,"input",t[10]),Se(_,"input",t[11])],D=!0)},p(E,[S]){S&34&&(A=E[1],h=$n(h,S,F,1,E,A,g,d,Pi,$d,b,Kd)),S&1&&_.value!==E[0]&&rn(_,E[0])},i:Te,o:Te,d(E){E&&I(e),E&&I(c),E&&I(d);for(let S=0;S<h.length;S+=1)h[S].d();D=!1,ar(C)}}}function l8(t,e,r){let n,i,u;ut(t,Sr,D=>r(8,i=D)),ut(t,Yp,D=>r(12,u=D));let o="",s=Object.keys(i.weightedPrompts).length;function f(){oa.update(Kf(),{...i,date:Date.now()}),Kn.update("select")}function p(){navigator.clipboard.readText().then(D=>{const C=Df(D);c(C)})}function c(D){const C=Math.max(...D.map(([F,E])=>E)),A=D.reduce((F,[E,S],T)=>(F[T]=kr(T,E,S,S/C),F),{});Yi.delete(),Mt.update(Fi(A,i.weightMode)),r(0,o="")}function d(){u&&oa.delete(u),Yi.delete(),Mt.delete(),Kn.update("select")}const h=Vs((D,C)=>{let A={...i.weightedPrompts};if(!C){const S=Object.entries(i.weightedPrompts).filter(([T])=>T!==D).map(([T,P])=>[P.text,P.parsedWeight]);return c(S)}const F={...A[D],text:C};A[D]=F,Mt.update({...i,weightedPrompts:A})},1e3),g=Vs(D=>{const C=Object.entries(i.weightedPrompts).map(([A,F])=>[F.text,F.parsedWeight]);return C.push([D,1]),c(C)},1e3),b=(D,C)=>h(D,C.target.value);function v(){o=this.value,r(0,o),r(8,i),r(7,s)}const _=D=>g(D.target.value);return t.$$.update=()=>{if(t.$$.dirty&384){const D=Object.keys(i.weightedPrompts).length;D>s&&(r(7,s=D),r(0,o=""))}t.$$.dirty&256&&r(1,n=Object.entries(i.weightedPrompts).map(([D,C])=>({id:D,text:C.text})))},[o,n,f,p,d,h,g,s,i,b,v,_]}class f8 extends Dt{constructor(e){super(),bt(this,e,l8,o8,yt,{})}}const c8=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. The first sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. The middle three sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. The final sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,h8=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 10 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. Four sentences should describe the subject.
    d. Four sentences should describe the scene.
    e. Tow sentences should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,d8=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 10 concepts.
    a. Each concept should be 10 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
`,p8=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 20 concepts.
    a. Each concept should be 5 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
3. Do not use hyphens to mark list items.
4. Do not title the list.
`,g8=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. One sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. Two sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. One sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
    f. One sentence should be a poetic concept or feeling. Example: The unfathomable depths of a lover's sigh.
        i. The poetic concept should be intense.
        ii. The poetic concept should be emotional.
        iii. The poetic concept should include abstract words.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`;function v8(){const t=zr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((u,o)=>{if(o.startsWith("directive")){const s=o.split("_")[1];u[s]=JSON.parse(localStorage[o])}return u},{})||{}),{subscribe:e,update:(u,o)=>{const s=Ct(t),p={...s[u]||{},...o};i&&(localStorage[`directive_${u}`]=JSON.stringify(p));const c={...s,[u]:p};r(c)},get:u=>Ct(t)[u],delete:u=>{i&&delete localStorage[`directive_${u}`];const o={...Ct(t)};delete o[u],r(o)}}}const js=v8(),m8=qr(js,t=>Object.entries(Ct(js))),$l="preferredDirectiveStore";function _8(){const t=zr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[$l]||""),{subscribe:e,update:u=>{!u||!i||(localStorage[$l]=u,r(u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[$l],r(""))}}}const ua=_8(),D8=qr(ua,t=>Ct(ua)),Yl="metaPromptStore";function b8(){const t=zr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Yl]||""),{subscribe:e,update:u=>{i&&(localStorage[Yl]=u,r(u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[Yl],r(""))}}}const qs=b8(),T1=qr(qs,t=>Ct(qs)),Ki=zr("");function Yd(t,e,r){const n=t.slice();return n[21]=e[r][0],n[22]=e[r][1],n}function Zd(t,e){let r,n=e[22].name+"",i,u=e[22].builtIn?" (Built-In)":" (User)",o,s,f;return{key:t,first:null,c(){r=Z("option"),i=Re(n),o=Re(u),this.h()},l(p){r=X(p,"OPTION",{});var c=G(r);i=Le(c,n),o=Le(c,u),c.forEach(I),this.h()},h(){r.__value=s=e[21],r.value=r.__value,r.selected=f=e[3]===e[21],this.first=r},m(p,c){me(p,r,c),R(r,i),R(r,o)},p(p,c){e=p,c&16&&n!==(n=e[22].name+"")&&Zr(i,n),c&16&&u!==(u=e[22].builtIn?" (Built-In)":" (User)")&&Zr(o,u),c&16&&s!==(s=e[21])&&(r.__value=s,r.value=r.__value),c&24&&f!==(f=e[3]===e[21])&&(r.selected=f)},d(p){p&&I(r)}}}function Xd(t){let e,r,n,i,u,o,s,f,p,c,d,h,g,b,v=!t[7]&&Jd(t),_=t[6]&&Qd(t);function D(F,E){return F[1]?w8:y8}let C=D(t),A=C(t);return{c(){v&&v.c(),e=Ie(),r=Z("div"),n=Z("textarea"),i=Ie(),u=Z("div"),o=Z("textarea"),s=Ie(),f=Z("div"),_&&_.c(),p=Ie(),c=Z("button"),d=Re("Preview"),h=Ie(),A.c(),this.h()},l(F){v&&v.l(F),e=Ne(F),r=X(F,"DIV",{class:!0});var E=G(r);n=X(E,"TEXTAREA",{class:!0,placeholder:!0}),G(n).forEach(I),E.forEach(I),i=Ne(F),u=X(F,"DIV",{class:!0});var S=G(u);o=X(S,"TEXTAREA",{class:!0,placeholder:!0}),G(o).forEach(I),S.forEach(I),s=Ne(F),f=X(F,"DIV",{class:!0});var T=G(f);_&&_.l(T),p=Ne(T),c=X(T,"BUTTON",{class:!0});var P=G(c);d=Le(P,"Preview"),P.forEach(I),h=Ne(T),A.l(T),T.forEach(I),this.h()},h(){B(n,"class","font-mono text-xs textarea textarea-bordered w-full h-full resize-none"),B(n,"placeholder","GPT Directives"),B(r,"class","w-full p-2 h-1/2"),o.value=t[9],B(o,"class","textarea textarea-bordered w-full h-full resize-none"),B(o,"placeholder","Describe the prompt to generate."),B(u,"class","w-full p-2 h-1/5"),B(c,"class","btn btn-sm btn btn-info"),B(f,"class","w-full p-2 h-12 flex justify-between")},m(F,E){v&&v.m(F,E),me(F,e,E),me(F,r,E),R(r,n),rn(n,t[8]),me(F,i,E),me(F,u,E),R(u,o),me(F,s,E),me(F,f,E),_&&_.m(f,null),R(f,p),R(f,c),R(c,d),R(f,h),A.m(f,null),g||(b=[Se(n,"input",t[17]),Se(o,"input",t[18]),Se(c,"click",function(){$i(t[0])&&t[0].apply(this,arguments)})],g=!0)},p(F,E){t=F,t[7]?v&&(v.d(1),v=null):v?v.p(t,E):(v=Jd(t),v.c(),v.m(e.parentNode,e)),E&256&&rn(n,t[8]),E&512&&(o.value=t[9]),t[6]?_?_.p(t,E):(_=Qd(t),_.c(),_.m(f,p)):_&&(_.d(1),_=null),C===(C=D(t))&&A?A.p(t,E):(A.d(1),A=C(t),A&&(A.c(),A.m(f,null)))},d(F){v&&v.d(F),F&&I(e),F&&I(r),F&&I(i),F&&I(u),F&&I(s),F&&I(f),_&&_.d(),A.d(),g=!1,ar(b)}}}function Jd(t){let e,r,n,i,u,o,s;return{c(){e=Z("div"),r=Z("input"),n=Ie(),i=Z("button"),u=Re("Save"),this.h()},l(f){e=X(f,"DIV",{class:!0});var p=G(e);r=X(p,"INPUT",{type:!0,placeholder:!0,class:!0}),n=Ne(p),i=X(p,"BUTTON",{class:!0});var c=G(i);u=Le(c,"Save"),c.forEach(I),p.forEach(I),this.h()},h(){B(r,"type","text"),B(r,"placeholder","Name"),B(r,"class","input input-bordered input-sm w-full max-w-xs"),B(i,"class","btn btn-sm btn-primary ml-4"),B(e,"class","w-full p-2 h-12 flex justify-between")},m(f,p){me(f,e,p),R(e,r),rn(r,t[5]),R(e,n),R(e,i),R(i,u),o||(s=[Se(r,"input",t[16]),Se(i,"click",t[10])],o=!0)},p(f,p){p&32&&r.value!==f[5]&&rn(r,f[5])},d(f){f&&I(e),o=!1,ar(s)}}}function Qd(t){let e,r,n,i;return{c(){e=Z("button"),r=Re("Delete"),this.h()},l(u){e=X(u,"BUTTON",{class:!0});var o=G(e);r=Le(o,"Delete"),o.forEach(I),this.h()},h(){B(e,"class","btn btn-sm btn-error")},m(u,o){me(u,e,o),R(e,r),n||(i=Se(e,"click",t[11]),n=!0)},p:Te,d(u){u&&I(e),n=!1,i()}}}function y8(t){let e,r,n,i;return{c(){e=Z("button"),r=Re("Generate"),this.h()},l(u){e=X(u,"BUTTON",{class:!0});var o=G(e);r=Le(o,"Generate"),o.forEach(I),this.h()},h(){B(e,"class","btn btn-sm btn-primary")},m(u,o){me(u,e,o),R(e,r),n||(i=Se(e,"click",function(){$i(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(u,o){t=u},d(u){u&&I(e),n=!1,i()}}}function w8(t){let e,r;return{c(){e=Z("button"),r=Re("Generating"),this.h()},l(n){e=X(n,"BUTTON",{class:!0});var i=G(e);r=Le(i,"Generating"),i.forEach(I),this.h()},h(){B(e,"class","btn btn-sm btn disabled")},m(n,i){me(n,e,i),R(e,r)},p:Te,d(n){n&&I(e)}}}function A8(t){let e,r,n,i,u,o,s,f,p,c,d=[],h=new Map,g,b,v,_,D,C,A,F=Object.entries(t[4]);const E=T=>T[21];for(let T=0;T<F.length;T+=1){let P=Yd(t,F,T),x=E(P);h.set(x,d[T]=Zd(x,P))}let S=t[3]&&Xd(t);return{c(){e=Z("div"),r=Z("div"),n=Z("label"),i=Z("span"),u=Re("Pick a directive for prompt creation"),o=Ie(),s=Z("select"),f=Z("option"),p=Re("Pick one");for(let T=0;T<d.length;T+=1)d[T].c();g=Z("option"),b=Re("New"),_=Ie(),S&&S.c(),D=Tt(),this.h()},l(T){e=X(T,"DIV",{class:!0});var P=G(e);r=X(P,"DIV",{class:!0});var x=G(r);n=X(x,"LABEL",{class:!0});var H=G(n);i=X(H,"SPAN",{class:!0});var re=G(i);u=Le(re,"Pick a directive for prompt creation"),re.forEach(I),H.forEach(I),o=Ne(x),s=X(x,"SELECT",{class:!0});var V=G(s);f=X(V,"OPTION",{});var Y=G(f);p=Le(Y,"Pick one"),Y.forEach(I);for(let K=0;K<d.length;K+=1)d[K].l(V);g=X(V,"OPTION",{});var U=G(g);b=Le(U,"New"),U.forEach(I),V.forEach(I),x.forEach(I),P.forEach(I),_=Ne(T),S&&S.l(T),D=Tt(),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),f.disabled=!0,f.selected=c=t[3]===null,f.__value="Pick one",f.value=f.__value,g.__value="new",g.value=g.__value,g.selected=v=t[3]==="new",B(s,"class","select select-bordered"),B(r,"class","form-control w-full max-w-xs mb-4"),B(e,"class","flex justify-center")},m(T,P){me(T,e,P),R(e,r),R(r,n),R(n,i),R(i,u),R(r,o),R(r,s),R(s,f),R(f,p);for(let x=0;x<d.length;x+=1)d[x]&&d[x].m(s,null);R(s,g),R(g,b),Bi(s,t[3]),me(T,_,P),S&&S.m(T,P),me(T,D,P),C||(A=Se(s,"change",t[12]),C=!0)},p(T,[P]){P&24&&c!==(c=T[3]===null)&&(f.selected=c),P&24&&(F=Object.entries(T[4]),d=$n(d,P,E,1,T,F,h,s,Pi,Zd,g,Yd)),P&24&&v!==(v=T[3]==="new")&&(g.selected=v),P&24&&Bi(s,T[3]),T[3]?S?S.p(T,P):(S=Xd(T),S.c(),S.m(D.parentNode,D)):S&&(S.d(1),S=null)},i:Te,o:Te,d(T){T&&I(e);for(let P=0;P<d.length;P+=1)d[P].d();T&&I(_),S&&S.d(T),T&&I(D),C=!1,A()}}}function E8(t,e,r){let n,i,u,o,s,f,p,c;ut(t,Ki,P=>r(8,s=P)),ut(t,D8,P=>r(14,f=P)),ut(t,m8,P=>r(15,p=P)),ut(t,T1,P=>r(9,c=P));let{togglePreview:d=()=>{}}=e,{isGenerating:h=!1}=e,{handleGeneratePrompt:g=()=>{}}=e,b={C:{name:"Five Sentences",text:c8,builtIn:!0},D:{name:"Ten Sentences",text:h8,builtIn:!0},E:{name:"Fragments",text:d8,builtIn:!0},F:{name:"Concept Shotgun",text:p8,builtIn:!0},G:{name:"Poetic Accents",text:g8,builtIn:!0}},v=null,_="";function D(){const P=v==="new"?Kf():v;js.update(P,{name:_,text:s,builtIn:!1}),v==="new"&&(r(3,v=P),ua.update(P))}function C(){js.delete(v),r(3,v=null),r(5,_=""),Ki.set(""),ua.delete()}function A(P){r(3,v=P),ua.update(P),P&&P!=="new"?(r(5,_=i[P].name),Ki.set(i[P].text)):P==="new"&&(r(5,_=""),Ki.set(""))}function F(P){A(P.target.value)}function E(){_=this.value,r(5,_)}function S(){s=this.value,Ki.set(s)}const T=P=>qs.update(P.target.value);return t.$$set=P=>{"togglePreview"in P&&r(0,d=P.togglePreview),"isGenerating"in P&&r(1,h=P.isGenerating),"handleGeneratePrompt"in P&&r(2,g=P.handleGeneratePrompt)},t.$$.update=()=>{t.$$.dirty&32768&&r(13,n=p.reduce((P,[x,H])=>(P[x]={name:H.name,text:H.text,builtIn:!1},P),{})),t.$$.dirty&8192&&r(4,i=Object.entries({...b,...n}).reduce((P,[x,H])=>(P[x]=H,P),{})),t.$$.dirty&16392&&v===null&&f&&(r(3,v=f),A(v)),t.$$.dirty&24&&r(7,u=v&&v!=="new"&&i[v].builtIn),t.$$.dirty&24&&r(6,o=v&&v!=="new"&&!i[v].builtIn)},[d,h,g,v,i,_,o,u,s,c,D,C,F,n,f,p,E,S,T]}class C8 extends Dt{constructor(e){super(),bt(this,e,E8,A8,yt,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}function F8(t,e){return`${t}

Use the following text to generate output based on the instructions above:

${e}`}const k1=qr([Ki,qs,Eu],t=>ca(F8(t[0],t[1]),t[2]));function S8(t){let e,r,n,i;return{c(){e=Z("button"),r=Re("Generate"),this.h()},l(u){e=X(u,"BUTTON",{class:!0});var o=G(e);r=Le(o,"Generate"),o.forEach(I),this.h()},h(){B(e,"class","btn btn-sm btn-primary")},m(u,o){me(u,e,o),R(e,r),n||(i=Se(e,"click",function(){$i(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(u,o){t=u},d(u){u&&I(e),n=!1,i()}}}function B8(t){let e,r;return{c(){e=Z("button"),r=Re("Generating"),this.h()},l(n){e=X(n,"BUTTON",{class:!0});var i=G(e);r=Le(i,"Generating"),i.forEach(I),this.h()},h(){B(e,"class","btn btn-sm btn disabled")},m(n,i){me(n,e,i),R(e,r)},p:Te,d(n){n&&I(e)}}}function O8(t){let e,r,n,i,u,o,s,f,p,c;function d(b,v){return b[1]?B8:S8}let h=d(t),g=h(t);return{c(){e=Z("div"),r=Z("p"),n=Re(t[3]),i=Ie(),u=Z("div"),o=Z("button"),s=Re("Back"),f=Ie(),g.c(),this.h()},l(b){e=X(b,"DIV",{class:!0});var v=G(e);r=X(v,"P",{class:!0});var _=G(r);n=Le(_,t[3]),_.forEach(I),v.forEach(I),i=Ne(b),u=X(b,"DIV",{class:!0});var D=G(u);o=X(D,"BUTTON",{class:!0});var C=G(o);s=Le(C,"Back"),C.forEach(I),f=Ne(D),g.l(D),D.forEach(I),this.h()},h(){B(r,"class","font-mono text-xs whitespace-pre-wrap"),B(e,"class","p-4 overflow-y-auto"),B(o,"class","btn btn-sm btn btn-info"),B(u,"class","w-full p-2 h-12 flex justify-between")},m(b,v){me(b,e,v),R(e,r),R(r,n),me(b,i,v),me(b,u,v),R(u,o),R(o,s),R(u,f),g.m(u,null),p||(c=Se(o,"click",function(){$i(t[0])&&t[0].apply(this,arguments)}),p=!0)},p(b,[v]){t=b,v&8&&Zr(n,t[3]),h===(h=d(t))&&g?g.p(t,v):(g.d(1),g=h(t),g&&(g.c(),g.m(u,null)))},i:Te,o:Te,d(b){b&&I(e),b&&I(i),b&&I(u),g.d(),p=!1,c()}}}function M8(t,e,r){let n;ut(t,k1,s=>r(3,n=s));let{togglePreview:i=()=>{}}=e,{isGenerating:u=!1}=e,{handleGeneratePrompt:o=()=>{}}=e;return t.$$set=s=>{"togglePreview"in s&&r(0,i=s.togglePreview),"isGenerating"in s&&r(1,u=s.isGenerating),"handleGeneratePrompt"in s&&r(2,o=s.handleGeneratePrompt)},[i,u,o,n]}class P8 extends Dt{constructor(e){super(),bt(this,e,M8,O8,yt,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}const Zl="preferredModelStore";function T8(){const t=zr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Zl]||""),{subscribe:e,update:u=>{!u||!i||(localStorage[Zl]=u,r(u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[Zl],r(""))}}}const wf=T8(),I1=qr(wf,t=>Ct(wf));function k8(t){let e,r,n;return{c(){e=Z("div"),r=Z("p"),n=Re("Set Open AI Key in settings for GPT generation."),this.h()},l(i){e=X(i,"DIV",{class:!0});var u=G(e);r=X(u,"P",{class:!0});var o=G(r);n=Le(o,"Set Open AI Key in settings for GPT generation."),o.forEach(I),u.forEach(I),this.h()},h(){B(r,"class","text-center"),B(e,"class","w-full p-2 flex justify-center")},m(i,u){me(i,e,u),R(e,r),R(r,n)},p:Te,i:Te,o:Te,d(i){i&&I(e)}}}function I8(t){let e,r,n,i;const u=[x8,N8],o=[];function s(f,p){return f[1]?0:1}return e=s(t),r=o[e]=u[e](t),{c(){r.c(),n=Tt()},l(f){r.l(f),n=Tt()},m(f,p){o[e].m(f,p),me(f,n,p),i=!0},p(f,p){let c=e;e=s(f),e===c?o[e].p(f,p):(_r(),Ee(o[c],1,1,()=>{o[c]=null}),Dr(),r=o[e],r?r.p(f,p):(r=o[e]=u[e](f),r.c()),ye(r,1),r.m(n.parentNode,n))},i(f){i||(ye(r),i=!0)},o(f){Ee(r),i=!1},d(f){o[e].d(f),f&&I(n)}}}function N8(t){let e,r;return e=new C8({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){Ke(e.$$.fragment)},l(n){$e(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},p(n,i){const u={};i&1&&(u.isGenerating=n[0]),e.$set(u)},i(n){r||(ye(e.$$.fragment,n),r=!0)},o(n){Ee(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function x8(t){let e,r;return e=new P8({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){Ke(e.$$.fragment)},l(n){$e(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},p(n,i){const u={};i&1&&(u.isGenerating=n[0]),e.$set(u)},i(n){r||(ye(e.$$.fragment,n),r=!0)},o(n){Ee(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function R8(t){let e,r,n,i;const u=[I8,k8],o=[];function s(f,p){return f[2]?0:1}return r=s(t),n=o[r]=u[r](t),{c(){e=Z("div"),n.c(),this.h()},l(f){e=X(f,"DIV",{class:!0});var p=G(e);n.l(p),p.forEach(I),this.h()},h(){B(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(f,p){me(f,e,p),o[r].m(e,null),i=!0},p(f,[p]){n.p(f,p)},i(f){i||(ye(n),i=!0)},o(f){Ee(n),i=!1},d(f){f&&I(e),o[r].d()}}}function L8(t,e,r){let n,i,u,o,s,f,p;ut(t,k1,C=>r(7,i=C)),ut(t,ao,C=>r(8,u=C)),ut(t,T1,C=>r(9,o=C)),ut(t,Sr,C=>r(10,s=C)),ut(t,I1,C=>r(5,f=C)),ut(t,qf,C=>r(11,p=C));const c=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001"];let d=!1,h=p,g=!1;function b(C,A){const F=Ns(C),E=n||"gpt-3.5-turbo";r(0,d=!0),G3(F,A,E).then(S=>{console.log(S),S.data.choices.forEach((T,P)=>{const x=Df(T.message.content);console.log(x);const H=x.reduce((re,[V,Y],U)=>(re[U]=kr(U,V,Y),re),{});Mt.update(Fi(H,s.weightMode)),Kn.update("edit"),Eu.shuffle()})}).finally(()=>{r(0,d=!1)})}function v(C,A){const F=Ns(C),E=n||"text-davinci-003";r(0,d=!0),H3(F,A,E).then(S=>{console.log(S),S.data.choices.forEach((T,P)=>{const x=Df(T.text);console.log(x);const H=x.reduce((re,[V,Y],U)=>(re[U]=kr(U,V,Y),re),{});Mt.update(Fi(H,s.weightMode)),Kn.update("edit"),Eu.shuffle()})}).finally(()=>{r(0,d=!1)})}function _(){console.log("handleGeneratePrompt"),console.log(h),console.log(Ki),console.log(o),console.log(u),h&&(console.log(i),c.includes(n)?v(h,i):b(h,i))}function D(){console.log(i),r(1,g=!g)}return t.$$.update=()=>{t.$$.dirty&32&&(n=f||null)},[d,g,h,_,D,f]}class U8 extends Dt{constructor(e){super(),bt(this,e,L8,R8,yt,{})}}function ep(t,e,r){const n=t.slice();return n[18]=e[r],n}function tp(t,e,r){const n=t.slice();return n[18]=e[r],n}function V8(t){return{c:Te,l:Te,m:Te,p:Te,d:Te}}function j8(t){let e,r,n=t[0].length>0&&rp(t),i=t[1].length>0&&ip(t);return{c(){n&&n.c(),e=Ie(),i&&i.c(),r=Tt()},l(u){n&&n.l(u),e=Ne(u),i&&i.l(u),r=Tt()},m(u,o){n&&n.m(u,o),me(u,e,o),i&&i.m(u,o),me(u,r,o)},p(u,o){u[0].length>0?n?n.p(u,o):(n=rp(u),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),u[1].length>0?i?i.p(u,o):(i=ip(u),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(u){n&&n.d(u),u&&I(e),i&&i.d(u),u&&I(r)}}}function rp(t){let e,r,n,i,u,o,s,f,p,c,d=[],h=new Map,g,b,v=t[0];const _=D=>D[18];for(let D=0;D<v.length;D+=1){let C=tp(t,v,D),A=_(C);h.set(A,d[D]=np(A,C))}return{c(){e=Z("div"),r=Z("div"),n=Z("label"),i=Z("span"),u=Re("Pick a model to use for model generation"),o=Ie(),s=Z("select"),f=Z("option"),p=Re("Pick one");for(let D=0;D<d.length;D+=1)d[D].c();this.h()},l(D){e=X(D,"DIV",{class:!0});var C=G(e);r=X(C,"DIV",{class:!0});var A=G(r);n=X(A,"LABEL",{class:!0});var F=G(n);i=X(F,"SPAN",{class:!0});var E=G(i);u=Le(E,"Pick a model to use for model generation"),E.forEach(I),F.forEach(I),o=Ne(A),s=X(A,"SELECT",{class:!0});var S=G(s);f=X(S,"OPTION",{});var T=G(f);p=Le(T,"Pick one"),T.forEach(I);for(let P=0;P<d.length;P+=1)d[P].l(S);S.forEach(I),A.forEach(I),C.forEach(I),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),f.disabled=!0,f.selected=c=t[2]===null,f.__value="Pick one",f.value=f.__value,B(s,"class","select select-bordered"),B(r,"class","form-control w-full max-w-xs mb-4"),B(e,"class","flex justify-center")},m(D,C){me(D,e,C),R(e,r),R(r,n),R(n,i),R(i,u),R(r,o),R(r,s),R(s,f),R(f,p);for(let A=0;A<d.length;A+=1)d[A]&&d[A].m(s,null);Bi(s,t[2]),g||(b=Se(s,"change",t[6]),g=!0)},p(D,C){C&5&&c!==(c=D[2]===null)&&(f.selected=c),C&5&&(v=D[0],d=$n(d,C,_,1,D,v,h,s,Pi,np,null,tp)),C&5&&Bi(s,D[2])},d(D){D&&I(e);for(let C=0;C<d.length;C+=1)d[C].d();g=!1,b()}}}function np(t,e){let r,n=e[18]+"",i,u,o;return{key:t,first:null,c(){r=Z("option"),i=Re(n),this.h()},l(s){r=X(s,"OPTION",{});var f=G(r);i=Le(f,n),f.forEach(I),this.h()},h(){r.__value=u=e[18],r.value=r.__value,r.selected=o=e[2]===e[18],this.first=r},m(s,f){me(s,r,f),R(r,i)},p(s,f){e=s,f&1&&n!==(n=e[18]+"")&&Zr(i,n),f&1&&u!==(u=e[18])&&(r.__value=u,r.value=r.__value),f&5&&o!==(o=e[2]===e[18])&&(r.selected=o)},d(s){s&&I(r)}}}function ip(t){let e,r,n,i,u,o,s,f,p,c,d=[],h=new Map,g,b,v=t[1];const _=D=>D[18];for(let D=0;D<v.length;D+=1){let C=ep(t,v,D),A=_(C);h.set(A,d[D]=up(A,C))}return{c(){e=Z("div"),r=Z("div"),n=Z("label"),i=Z("span"),u=Re("Pick a model to use for prompt embedding"),o=Ie(),s=Z("select"),f=Z("option"),p=Re("Pick one");for(let D=0;D<d.length;D+=1)d[D].c();this.h()},l(D){e=X(D,"DIV",{class:!0});var C=G(e);r=X(C,"DIV",{class:!0});var A=G(r);n=X(A,"LABEL",{class:!0});var F=G(n);i=X(F,"SPAN",{class:!0});var E=G(i);u=Le(E,"Pick a model to use for prompt embedding"),E.forEach(I),F.forEach(I),o=Ne(A),s=X(A,"SELECT",{class:!0});var S=G(s);f=X(S,"OPTION",{});var T=G(f);p=Le(T,"Pick one"),T.forEach(I);for(let P=0;P<d.length;P+=1)d[P].l(S);S.forEach(I),A.forEach(I),C.forEach(I),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),f.disabled=!0,f.selected=c=t[3]===null,f.__value="Pick one",f.value=f.__value,B(s,"class","select select-bordered"),B(r,"class","form-control w-full max-w-xs mb-4"),B(e,"class","flex justify-center")},m(D,C){me(D,e,C),R(e,r),R(r,n),R(n,i),R(i,u),R(r,o),R(r,s),R(s,f),R(f,p);for(let A=0;A<d.length;A+=1)d[A]&&d[A].m(s,null);Bi(s,t[3]),g||(b=Se(s,"change",t[7]),g=!0)},p(D,C){C&10&&c!==(c=D[3]===null)&&(f.selected=c),C&10&&(v=D[1],d=$n(d,C,_,1,D,v,h,s,Pi,up,null,ep)),C&10&&Bi(s,D[3])},d(D){D&&I(e);for(let C=0;C<d.length;C+=1)d[C].d();g=!1,b()}}}function up(t,e){let r,n=e[18]+"",i,u,o;return{key:t,first:null,c(){r=Z("option"),i=Re(n),this.h()},l(s){r=X(s,"OPTION",{});var f=G(r);i=Le(f,n),f.forEach(I),this.h()},h(){r.__value=u=e[18],r.value=r.__value,r.selected=o=e[3]===e[18],this.first=r},m(s,f){me(s,r,f),R(r,i)},p(s,f){e=s,f&2&&n!==(n=e[18]+"")&&Zr(i,n),f&2&&u!==(u=e[18])&&(r.__value=u,r.value=r.__value),f&10&&o!==(o=e[3]===e[18])&&(r.selected=o)},d(s){s&&I(r)}}}function q8(t){let e,r,n;return{c(){e=Z("div"),r=Z("div"),n=Z("progress"),this.h()},l(i){e=X(i,"DIV",{class:!0});var u=G(e);r=X(u,"DIV",{class:!0});var o=G(r);n=X(o,"PROGRESS",{class:!0}),G(n).forEach(I),o.forEach(I),u.forEach(I),this.h()},h(){B(n,"class","progress progress-primary w-56"),B(r,"class","form-control w-full flex flex-col max-w-xs"),B(e,"class","py-10 flex justify-center")},m(i,u){me(i,e,u),R(e,r),R(r,n)},p:Te,d(i){i&&I(e)}}}function z8(t){let e,r,n,i,u,o,s,f,p,c,d,h,g,b,v,_,D={ctx:t,current:null,token:null,hasCatch:!1,pending:q8,then:j8,catch:V8,value:17};return ps(b=t[4],D),{c(){e=Z("div"),r=Z("div"),n=Z("div"),i=Z("label"),u=Z("span"),o=Re("Open AI Key"),s=Ie(),f=Z("input"),p=Ie(),c=Z("label"),d=Z("button"),h=Re("Clear"),g=Ie(),D.block.c(),this.h()},l(C){e=X(C,"DIV",{class:!0});var A=G(e);r=X(A,"DIV",{class:!0});var F=G(r);n=X(F,"DIV",{class:!0});var E=G(n);i=X(E,"LABEL",{class:!0});var S=G(i);u=X(S,"SPAN",{class:!0});var T=G(u);o=Le(T,"Open AI Key"),T.forEach(I),S.forEach(I),s=Ne(E),f=X(E,"INPUT",{type:!0,placeholder:!0,class:!0}),p=Ne(E),c=X(E,"LABEL",{class:!0});var P=G(c);d=X(P,"BUTTON",{class:!0});var x=G(d);h=Le(x,"Clear"),x.forEach(I),P.forEach(I),E.forEach(I),F.forEach(I),g=Ne(A),D.block.l(A),A.forEach(I),this.h()},h(){B(u,"class","label-text-alt"),B(i,"class","label"),f.value=t[5],B(f,"type","password"),B(f,"placeholder","Open AI Key"),B(f,"class","input input-bordered w-full max-w-xs"),B(d,"class","btn btn-xs btn-error"),B(c,"class","label"),B(n,"class","form-control w-full max-w-xs"),B(r,"class","flex justify-center"),B(e,"class","h-full p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(C,A){me(C,e,A),R(e,r),R(r,n),R(n,i),R(i,u),R(u,o),R(n,s),R(n,f),R(n,p),R(n,c),R(c,d),R(d,h),R(e,g),D.block.m(e,D.anchor=null),D.mount=()=>e,D.anchor=null,v||(_=[Se(f,"input",t[8]),Se(d,"click",t[9])],v=!0)},p(C,[A]){t=C,A&32&&f.value!==t[5]&&(f.value=t[5]),D.ctx=t,A&16&&b!==(b=t[4])&&ps(b,D)||gp(D,t,A)},i:Te,o:Te,d(C){C&&I(e),D.block.d(),D.token=null,D=null,v=!1,ar(_)}}}function W8(t,e,r){let n,i,u,o;ut(t,Sr,F=>r(11,n=F)),ut(t,F1,F=>r(12,i=F)),ut(t,I1,F=>r(13,u=F)),ut(t,qf,F=>r(5,o=F));const s=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001","gpt-3.5-turbo","gpt-3.5-turbo-0301"],f=["text-embedding-ada-002"];let p=o,c=[],d=[],h=u,g=i,b=null;async function v(F){if(!F||c.length&&d.length)return;const E=Ns(F);r(4,b=$3(E));const S=await b;S.data&&r(0,c=S.data.data.map(({id:T})=>T).filter(T=>s.includes(T))),r(1,d=S.data.data.map(({id:T})=>T).filter(T=>f.includes(T)))}function _(F){r(2,h=F.target.value),wf.update(h)}function D(F){r(3,g=F.target.value),pf.update(g)}function C(F){const E=F.target.value;xs.update(E),E.length===51&&v(E),E.length===0&&A()}function A(){xs.delete(),r(10,p=""),r(0,c=[]),r(1,d=[]),n.weightMode===vt.Embed&&Mt.update({...n,weightMode:vt.Circle})}return t.$$.update=()=>{t.$$.dirty&1024&&v(p)},[c,d,h,g,b,o,_,D,C,A,p]}class H8 extends Dt{constructor(e){super(),bt(this,e,W8,z8,yt,{})}}function G8(t){let e,r;return{c(){e=dt("svg"),r=dt("path"),this.h()},l(n){e=pt(n,"svg",{xmlns:!0,class:!0,viewBox:!0});var i=G(e);r=pt(i,"path",{fill:!0,d:!0}),G(r).forEach(I),i.forEach(I),this.h()},h(){B(r,"fill","rgba(255,255,255, 0.7)"),B(r,"d","M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"class","h-4 w-4"),B(e,"viewBox","0 0 24 24")},m(n,i){me(n,e,i),R(e,r)},p:Te,i:Te,o:Te,d(n){n&&I(e)}}}class K8 extends Dt{constructor(e){super(),bt(this,e,null,G8,yt,{})}}function ap(t,e,r){const n=t.slice();return n[17]=e[r],n[19]=r,n}function sp(t,e,r){const n=t.slice();return n[20]=e[r][0],n[21]=e[r][1],n}function op(t,e){let r,n=e[21].name+"",i,u,o;return{key:t,first:null,c(){r=Z("option"),i=Re(n),this.h()},l(s){r=X(s,"OPTION",{});var f=G(r);i=Le(f,n),f.forEach(I),this.h()},h(){r.__value=u=e[20],r.value=r.__value,r.selected=o=e[0]===e[20],this.first=r},m(s,f){me(s,r,f),R(r,i)},p(s,f){e=s,f&16&&n!==(n=e[21].name+"")&&Zr(i,n),f&16&&u!==(u=e[20])&&(r.__value=u,r.value=r.__value),f&17&&o!==(o=e[0]===e[20])&&(r.selected=o)},d(s){s&&I(r)}}}function lp(t){let e,r,n,i,u,o,s,f,p,c=Rs(t[1])+"",d,h,g=(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1]),b,v,_,D,C,A,F,E,S,T,P,x,H,re,V=g&&fp(),Y=t[3]&&cp(t);return{c(){e=Z("div"),r=Z("div"),n=Z("input"),i=Ie(),u=Z("div"),o=Z("label"),s=Z("span"),f=Re("Alias: "),p=Z("b"),d=Re(c),h=Ie(),V&&V.c(),b=Ie(),v=Z("button"),_=Re("Save"),D=Ie(),C=Z("ul"),Y&&Y.c(),A=Ie(),F=Z("li"),E=Z("input"),S=Ie(),T=Z("div"),P=Z("button"),x=Re("Delete"),this.h()},l(U){e=X(U,"DIV",{class:!0});var K=G(e);r=X(K,"DIV",{class:!0});var q=G(r);n=X(q,"INPUT",{type:!0,placeholder:!0,class:!0}),i=Ne(q),u=X(q,"DIV",{class:!0,"data-tip":!0});var te=G(u);o=X(te,"LABEL",{class:!0});var Q=G(o);s=X(Q,"SPAN",{class:!0});var J=G(s);f=Le(J,"Alias: "),p=X(J,"B",{class:!0});var le=G(p);d=Le(le,c),le.forEach(I),J.forEach(I),Q.forEach(I),te.forEach(I),h=Ne(q),V&&V.l(q),q.forEach(I),b=Ne(K),v=X(K,"BUTTON",{class:!0});var _e=G(v);_=Le(_e,"Save"),_e.forEach(I),K.forEach(I),D=Ne(U),C=X(U,"UL",{class:!0});var Fe=G(C);Y&&Y.l(Fe),A=Ne(Fe),F=X(Fe,"LI",{class:!0});var Ae=G(F);E=X(Ae,"INPUT",{type:!0,placeholder:!0,class:!0}),Ae.forEach(I),Fe.forEach(I),S=Ne(U),T=X(U,"DIV",{class:!0});var Me=G(T);P=X(Me,"BUTTON",{class:!0});var qe=G(P);x=Le(qe,"Delete"),qe.forEach(I),Me.forEach(I),this.h()},h(){B(n,"type","text"),B(n,"placeholder","Name"),B(n,"class","input input-bordered input-sm w-full max-w-xs"),B(p,"class","text-white cursor-copy"),B(s,"class","label-text"),B(o,"class","label"),B(u,"class","tooltip tooltip-primary tooltip-bottom"),B(u,"data-tip","Use in prompts or directives to get random slot."),B(r,"class","flex flex-col w-full pr-2 "),B(v,"class","btn btn-sm btn-primary"),Pt(v,"btn-disabled",!Cd(t[1])||(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1])),B(e,"class","w-full p-2 flex justify-between"),B(E,"type","text"),B(E,"placeholder","Add slot"),B(E,"class","input input-bordered input-sm w-full italic"),B(F,"class","p-1"),B(C,"class","px-4 py-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block"),B(P,"class","btn btn-sm btn-error ml-4"),B(T,"class","w-full p-2 h-12 flex justify-between")},m(U,K){me(U,e,K),R(e,r),R(r,n),rn(n,t[1]),R(r,i),R(r,u),R(u,o),R(o,s),R(s,f),R(s,p),R(p,d),R(r,h),V&&V.m(r,null),R(e,b),R(e,v),R(v,_),me(U,D,K),me(U,C,K),Y&&Y.m(C,null),R(C,A),R(C,F),R(F,E),rn(E,t[2]),me(U,S,K),me(U,T,K),R(T,P),R(P,x),H||(re=[Se(n,"input",t[11]),Se(p,"click",t[12]),Se(v,"click",t[6]),Se(E,"input",t[14]),Se(E,"input",t[15]),Se(P,"click",t[7])],H=!0)},p(U,K){K&2&&n.value!==U[1]&&rn(n,U[1]),K&2&&c!==(c=Rs(U[1])+"")&&Zr(d,c),K&11&&(g=(U[0]==="new"||U[3]&&U[3].name!==U[1])&&!U[5](U[1])),g?V||(V=fp(),V.c(),V.m(r,null)):V&&(V.d(1),V=null),K&43&&Pt(v,"btn-disabled",!Cd(U[1])||(U[0]==="new"||U[3]&&U[3].name!==U[1])&&!U[5](U[1])),U[3]?Y?Y.p(U,K):(Y=cp(U),Y.c(),Y.m(C,A)):Y&&(Y.d(1),Y=null),K&4&&E.value!==U[2]&&rn(E,U[2])},d(U){U&&I(e),V&&V.d(),U&&I(D),U&&I(C),Y&&Y.d(),U&&I(S),U&&I(T),H=!1,ar(re)}}}function fp(t){let e,r,n;return{c(){e=Z("label"),r=Z("span"),n=Re("Name In Use"),this.h()},l(i){e=X(i,"LABEL",{class:!0});var u=G(e);r=X(u,"SPAN",{class:!0});var o=G(r);n=Le(o,"Name In Use"),o.forEach(I),u.forEach(I),this.h()},h(){B(r,"class","label-text text-orange-300"),B(e,"class","label")},m(i,u){me(i,e,u),R(e,r),R(r,n)},d(i){i&&I(e)}}}function cp(t){let e=[],r=new Map,n,i=t[3].values;const u=o=>o[19];for(let o=0;o<i.length;o+=1){let s=ap(t,i,o),f=u(s);r.set(f,e[o]=hp(f,s))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();n=Tt()},l(o){for(let s=0;s<e.length;s+=1)e[s].l(o);n=Tt()},m(o,s){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(o,s);me(o,n,s)},p(o,s){s&264&&(i=o[3].values,e=$n(e,s,u,1,o,i,r,n.parentNode,Pi,hp,n,ap))},d(o){for(let s=0;s<e.length;s+=1)e[s].d(o);o&&I(n)}}}function hp(t,e){let r,n,i,u,o,s;function f(...p){return e[13](e[19],...p)}return{key:t,first:null,c(){r=Z("li"),n=Z("input"),u=Ie(),this.h()},l(p){r=X(p,"LI",{class:!0});var c=G(r);n=X(c,"INPUT",{type:!0,placeholder:!0,class:!0}),u=Ne(c),c.forEach(I),this.h()},h(){n.value=i=e[17],B(n,"type","text"),B(n,"placeholder",""),B(n,"class","input input-bordered input-sm w-full"),B(r,"class","p-1"),this.first=r},m(p,c){me(p,r,c),R(r,n),R(r,u),o||(s=Se(n,"input",f),o=!0)},p(p,c){e=p,c&8&&i!==(i=e[17])&&n.value!==i&&(n.value=i)},d(p){p&&I(r),o=!1,s()}}}function $8(t){let e,r,n,i,u,o,s,f,p,c,d,h=[],g=new Map,b,v,_,D,C,A,F=Object.entries(t[4]);const E=T=>T[20];for(let T=0;T<F.length;T+=1){let P=sp(t,F,T),x=E(P);g.set(x,h[T]=op(x,P))}let S=t[0]&&lp(t);return{c(){e=Z("div"),r=Z("div"),n=Z("div"),i=Z("label"),u=Z("span"),o=Re("Edit Slots"),s=Ie(),f=Z("select"),p=Z("option"),c=Re("Pick one");for(let T=0;T<h.length;T+=1)h[T].c();b=Z("option"),v=Re("New"),D=Ie(),S&&S.c(),this.h()},l(T){e=X(T,"DIV",{class:!0});var P=G(e);r=X(P,"DIV",{class:!0});var x=G(r);n=X(x,"DIV",{class:!0});var H=G(n);i=X(H,"LABEL",{class:!0});var re=G(i);u=X(re,"SPAN",{class:!0});var V=G(u);o=Le(V,"Edit Slots"),V.forEach(I),re.forEach(I),s=Ne(H),f=X(H,"SELECT",{class:!0});var Y=G(f);p=X(Y,"OPTION",{});var U=G(p);c=Le(U,"Pick one"),U.forEach(I);for(let q=0;q<h.length;q+=1)h[q].l(Y);b=X(Y,"OPTION",{});var K=G(b);v=Le(K,"New"),K.forEach(I),Y.forEach(I),H.forEach(I),x.forEach(I),D=Ne(P),S&&S.l(P),P.forEach(I),this.h()},h(){B(u,"class","label-text"),B(i,"class","label"),p.disabled=!0,p.selected=d=t[0]===null,p.__value="Pick one",p.value=p.__value,b.__value="new",b.value=b.__value,b.selected=_=t[0]==="new",B(f,"class","select select-bordered"),t[0]===void 0&&Zi(()=>t[10].call(f)),B(n,"class","form-control w-full max-w-xs mb-4"),B(r,"class","flex justify-center"),B(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(T,P){me(T,e,P),R(e,r),R(r,n),R(n,i),R(i,u),R(u,o),R(n,s),R(n,f),R(f,p),R(p,c);for(let x=0;x<h.length;x+=1)h[x]&&h[x].m(f,null);R(f,b),R(b,v),Bi(f,t[0],!0),R(e,D),S&&S.m(e,null),C||(A=Se(f,"change",t[10]),C=!0)},p(T,[P]){P&17&&d!==(d=T[0]===null)&&(p.selected=d),P&17&&(F=Object.entries(T[4]),h=$n(h,P,E,1,T,F,g,f,Pi,op,b,sp)),P&17&&_!==(_=T[0]==="new")&&(b.selected=_),P&17&&Bi(f,T[0]),T[0]?S?S.p(T,P):(S=lp(T),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},i:Te,o:Te,d(T){T&&I(e);for(let P=0;P<h.length;P+=1)h[P].d();S&&S.d(),C=!1,A()}}}function Y8(t,e,r){let n;ut(t,pS,F=>r(4,n=F));let i=null,u="",o="",s=null;function f(F){r(3,s=F&&F!=="new"?{...n[F]}:F==="new"?{name:"New Slot Set",values:[]}:null),r(1,u=s?s.name:"")}function p(F){return Object.values(n).every(S=>S.name!==F)}function c(){if(s)if(i&&i!=="new")Ei.update(i,{...s,name:u});else{if(!p()){alert("Name already in use");return}const E=Kf();Ei.update(E,{...s,name:u}),r(0,i=E)}}function d(){Ei.delete(i),r(1,u=""),r(2,o=""),r(0,i=null),r(3,s=null)}const h=Vs((F,E)=>{if(!s||!i)return;const S=[...s.values];E.length===0?S.splice(F,1):S[F]=E,r(3,s.values=S,s),i!=="new"&&Ei.update(i,s)},1e3),g=Vs(F=>{if(!s||!i)return;const E=[...s.values];F.length>0&&(E.push(F),r(3,s.values=E,s),r(2,o=""),i!=="new"&&Ei.update(i,s))},1e3);function b(){i=Ty(this),r(0,i)}function v(){u=this.value,r(1,u)}const _=()=>navigator.clipboard.writeText(Rs(u)),D=(F,E)=>h(F,E.target.value);function C(){o=this.value,r(2,o)}const A=F=>g(F.target.value);return t.$$.update=()=>{t.$$.dirty&1&&f(i)},[i,u,o,s,n,p,c,d,h,g,b,v,_,D,C,A]}class Z8 extends Dt{constructor(e){super(),bt(this,e,Y8,$8,yt,{})}}function X8(t){let e,r;return e=new H8({}),{c(){Ke(e.$$.fragment)},l(n){$e(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(ye(e.$$.fragment,n),r=!0)},o(n){Ee(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function J8(t){let e,r;return e=new Z8({}),{c(){Ke(e.$$.fragment)},l(n){$e(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(ye(e.$$.fragment,n),r=!0)},o(n){Ee(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function Q8(t){let e,r;return e=new U8({}),{c(){Ke(e.$$.fragment)},l(n){$e(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(ye(e.$$.fragment,n),r=!0)},o(n){Ee(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function e6(t){let e,r;return e=new f8({}),{c(){Ke(e.$$.fragment)},l(n){$e(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(ye(e.$$.fragment,n),r=!0)},o(n){Ee(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function t6(t){let e,r;return e=new u5({}),{c(){Ke(e.$$.fragment)},l(n){$e(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(ye(e.$$.fragment,n),r=!0)},o(n){Ee(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function r6(t){let e,r,n,i,u,o,s,f,p,c,d,h,g,b,v,_,D,C,A,F,E,S,T,P,x,H,re,V;E=new K8({});const Y=[t6,e6,Q8,J8,X8],U=[];function K(q,te){return q[0]==="select"?0:q[0]==="edit"?1:q[0]==="generate"?2:q[0]==="slots"?3:q[0]==="settings"?4:-1}return~(P=K(t))&&(x=U[P]=Y[P](t)),{c(){e=Z("div"),r=Z("div"),n=Z("div"),i=Z("button"),u=Re("Select"),s=Ie(),f=Z("button"),p=Re("Edit"),d=Ie(),h=Z("button"),g=Re("Generate"),v=Ie(),_=Z("button"),D=Re("Slots"),A=Ie(),F=Z("button"),Ke(E.$$.fragment),T=Ie(),x&&x.c(),this.h()},l(q){e=X(q,"DIV",{class:!0});var te=G(e);r=X(te,"DIV",{class:!0});var Q=G(r);n=X(Q,"DIV",{class:!0});var J=G(n);i=X(J,"BUTTON",{class:!0});var le=G(i);u=Le(le,"Select"),le.forEach(I),s=Ne(J),f=X(J,"BUTTON",{class:!0});var _e=G(f);p=Le(_e,"Edit"),_e.forEach(I),d=Ne(J),h=X(J,"BUTTON",{class:!0});var Fe=G(h);g=Le(Fe,"Generate"),Fe.forEach(I),v=Ne(J),_=X(J,"BUTTON",{class:!0});var Ae=G(_);D=Le(Ae,"Slots"),Ae.forEach(I),A=Ne(J),F=X(J,"BUTTON",{class:!0});var Me=G(F);$e(E.$$.fragment,Me),Me.forEach(I),J.forEach(I),T=Ne(Q),x&&x.l(Q),Q.forEach(I),te.forEach(I),this.h()},h(){B(i,"class",o=t[0]==="select"?"btn btn-active":"btn"),B(f,"class",c=t[0]==="edit"?"btn btn-active":"btn"),B(h,"class",b=t[0]==="generate"?"btn btn-active":"btn"),B(_,"class",C=t[0]==="slots"?"btn btn-active":"btn"),B(F,"class",S=t[0]==="settings"?"btn btn-active":"btn"),B(n,"class","btn-group btn-group-vertical sm:btn-group-horizontal bg-base-100 w-full flex justify-center p-2"),B(r,"class","h-screen overflow-y-auto flex flex-col"),B(e,"class","max-w-md w-1/2 h-screen overflow-y-auto")},m(q,te){me(q,e,te),R(e,r),R(r,n),R(n,i),R(i,u),R(n,s),R(n,f),R(f,p),R(n,d),R(n,h),R(h,g),R(n,v),R(n,_),R(_,D),R(n,A),R(n,F),Ye(E,F,null),R(r,T),~P&&U[P].m(r,null),H=!0,re||(V=[Se(i,"click",t[2]),Se(f,"click",t[3]),Se(h,"click",t[4]),Se(_,"click",t[5]),Se(F,"click",t[6])],re=!0)},p(q,[te]){(!H||te&1&&o!==(o=q[0]==="select"?"btn btn-active":"btn"))&&B(i,"class",o),(!H||te&1&&c!==(c=q[0]==="edit"?"btn btn-active":"btn"))&&B(f,"class",c),(!H||te&1&&b!==(b=q[0]==="generate"?"btn btn-active":"btn"))&&B(h,"class",b),(!H||te&1&&C!==(C=q[0]==="slots"?"btn btn-active":"btn"))&&B(_,"class",C),(!H||te&1&&S!==(S=q[0]==="settings"?"btn btn-active":"btn"))&&B(F,"class",S);let Q=P;P=K(q),P!==Q&&(x&&(_r(),Ee(U[Q],1,1,()=>{U[Q]=null}),Dr()),~P?(x=U[P],x||(x=U[P]=Y[P](q),x.c()),ye(x,1),x.m(r,null)):x=null)},i(q){H||(ye(E.$$.fragment,q),ye(x),H=!0)},o(q){Ee(E.$$.fragment,q),Ee(x),H=!1},d(q){q&&I(e),Ze(E),~P&&U[P].d(),re=!1,ar(V)}}}function n6(t,e,r){let n;ut(t,r5,c=>r(0,n=c));function i(c){Kn.update(c)}const u=()=>i("select"),o=()=>i("edit"),s=()=>i("generate"),f=()=>i("slots"),p=()=>i("settings");return t.$$.update=()=>{t.$$.dirty&1&&(n||Kn.update("select"))},[n,i,u,o,s,f,p]}class i6 extends Dt{constructor(e){super(),bt(this,e,n6,r6,yt,{})}}function u6(t){let e,r;return{c(){e=Z("p"),r=Re("This tool is not optimized for small screens or mobile devices."),this.h()},l(n){e=X(n,"P",{class:!0});var i=G(e);r=Le(i,"This tool is not optimized for small screens or mobile devices."),i.forEach(I),this.h()},h(){B(e,"class","text-lg")},m(n,i){me(n,e,i),R(e,r)},i:Te,o:Te,d(n){n&&I(e)}}}function a6(t){let e,r,n,i;return e=new i6({}),n=new JS({}),{c(){Ke(e.$$.fragment),r=Ie(),Ke(n.$$.fragment)},l(u){$e(e.$$.fragment,u),r=Ne(u),$e(n.$$.fragment,u)},m(u,o){Ye(e,u,o),me(u,r,o),Ye(n,u,o),i=!0},i(u){i||(ye(e.$$.fragment,u),ye(n.$$.fragment,u),i=!0)},o(u){Ee(e.$$.fragment,u),Ee(n.$$.fragment,u),i=!1},d(u){Ze(e,u),u&&I(r),Ze(n,u)}}}function s6(t){let e,r,n,i,u,o;Zi(t[2]);const s=[a6,u6],f=[];function p(c,d){return c[0]>1024&&c[1]>800?0:1}return e=p(t),r=f[e]=s[e](t),{c(){r.c(),n=Tt()},l(c){r.l(c),n=Tt()},m(c,d){f[e].m(c,d),me(c,n,d),i=!0,u||(o=Se(window,"resize",t[2]),u=!0)},p(c,[d]){let h=e;e=p(c),e!==h&&(_r(),Ee(f[h],1,1,()=>{f[h]=null}),Dr(),r=f[e],r||(r=f[e]=s[e](c),r.c()),ye(r,1),r.m(n.parentNode,n))},i(c){i||(ye(r),i=!0)},o(c){Ee(r),i=!1},d(c){f[e].d(c),c&&I(n),u=!1,o()}}}function o6(t,e,r){let n=0,i=0;function u(){r(0,n=window.innerWidth),r(1,i=window.innerHeight)}return[n,i,u]}class c6 extends Dt{constructor(e){super(),bt(this,e,o6,s6,yt,{})}}export{c6 as default};
