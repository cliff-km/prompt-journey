import{J as qt,S as kt,i as Rt,s as Lt,K as Et,L as Ct,m as ie,h as V,n as T,p as Qt,b as Ce,H as Ie,M as ke,N as Ur,k as se,q as Ze,l as oe,r as $e,G as Y,u as Pn,a as Ge,c as Ke,g as xe,v as _n,d as Ue,f as Dn,I as Bt,y as pt,e as Kt,z as vt,A as gt,B as mt,O as nf,P as Fs,Q as Ss,R as wi,T as Gb,U as el,V as Si,W as Sd,X as Ei,Y as Bs,Z as jt,_ as _u,$ as vu}from"../chunks/index.98d4e505.js";import{d as xn,w as Tn}from"../chunks/index.29baef3a.js";function Kb(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const u in n)if(u!=="default"&&!(u in e)){const a=Object.getOwnPropertyDescriptor(n,u);a&&Object.defineProperty(e,u,a.get?a:{enumerable:!0,get:()=>n[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function kl(){return kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kl.apply(this,arguments)}var Bd={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function er(e){return typeof e=="number"}function mn(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function Od(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function Md(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function Pd(e){return e&&e.constructor.prototype.isUnit===!0||!1}function jn(e){return typeof e=="string"}var Xt=Array.isArray;function Lr(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function ts(e){return Array.isArray(e)||Lr(e)}function Yb(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function Zb(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function $b(e){return e&&e.constructor.prototype.isRange===!0||!1}function uf(e){return e&&e.constructor.prototype.isIndex===!0||!1}function Xb(e){return typeof e=="boolean"}function Jb(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function Qb(e){return e&&e.constructor.prototype.isHelp===!0||!1}function ey(e){return typeof e=="function"}function ty(e){return e instanceof Date}function ry(e){return e instanceof RegExp}function ny(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!Od(e)&&!Md(e))}function iy(e){return e===null}function xd(e){return e===void 0}function uy(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function ay(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function sy(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function oy(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function ly(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function fy(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function cy(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function hy(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function dy(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function py(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function vy(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function gy(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function my(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function _y(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function Dy(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function by(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function yy(e){return e&&e.constructor.prototype.isChain===!0||!1}function Xu(e){var t=typeof e;return t==="object"?e===null?"null":mn(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function yr(e){var t=typeof e;if(t==="number"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(r){return yr(r)});if(e instanceof Date)return new Date(e.valueOf());if(mn(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return Ay(e,yr)}function Ay(e,t){var r={};for(var n in e)Ju(e,n)&&(r[n]=t(e[n]));return r}function wy(e,t){for(var r in t)Ju(t,r)&&(e[r]=t[r]);return e}function rs(e,t){var r,n,u;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(n=0,u=e.length;n<u;n++)if(!rs(e[n],t[n]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(r in e)if(!(r in t)||!rs(e[r],t[r]))return!1;for(r in t)if(!(r in e))return!1;return!0}else return e===t}}function Ju(e,t){return e&&Object.hasOwnProperty.call(e,t)}function Ey(e,t){for(var r={},n=0;n<t.length;n++){var u=t[n],a=e[u];a!==void 0&&(r[u]=a)}return r}var Cy=["Matrix","Array"],Fy=["number","BigNumber","Fraction"],Os=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Bd)};kl(Os,Bd,{MATRIX_OPTIONS:Cy,NUMBER_OPTIONS:Fy});function Bn(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Sy(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,u=function(){};return{s:u,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(p){throw p},f:u}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,l=!1,o;return{s:function(){r=r.call(e)},n:function(){var p=r.next();return a=p.done,p},e:function(p){l=!0,o=p},f:function(){try{!a&&r.return!=null&&r.return()}finally{if(l)throw o}}}}function Sy(e,t){if(e){if(typeof e=="string")return kh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kh(e,t)}}function kh(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cu(e){return cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cu(e)}function Rh(){return!0}function vn(){return!1}function ou(){}var Lh="Argument is not a typed-function.";function Td(){function e(R){return cu(R)==="object"&&R!==null&&R.constructor===Object}var t=[{name:"number",test:function(j){return typeof j=="number"}},{name:"string",test:function(j){return typeof j=="string"}},{name:"boolean",test:function(j){return typeof j=="boolean"}},{name:"Function",test:function(j){return typeof j=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(j){return j instanceof Date}},{name:"RegExp",test:function(j){return j instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(j){return j===null}},{name:"undefined",test:function(j){return j===void 0}}],r={name:"any",test:Rh,isAny:!0},n,u,a=0,l={createCount:0};function o(R){var j=n.get(R);if(j)return j;var Z='Unknown type "'+R+'"',fe=R.toLowerCase(),ne,pe=Bn(u),ue;try{for(pe.s();!(ue=pe.n()).done;)if(ne=ue.value,ne.toLowerCase()===fe){Z+='. Did you mean "'+ne+'" ?';break}}catch(ce){pe.e(ce)}finally{pe.f()}throw new TypeError(Z)}function h(R){for(var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",Z=j?o(j).index:u.length,fe=[],ne=0;ne<R.length;++ne){if(!R[ne]||typeof R[ne].name!="string"||typeof R[ne].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var pe=R[ne].name;if(n.has(pe))throw new TypeError('Duplicate type name "'+pe+'"');fe.push(pe),n.set(pe,{name:pe,test:R[ne].test,isAny:R[ne].isAny,index:Z+ne,conversionsTo:[]})}var ue=u.slice(Z);u=u.slice(0,Z).concat(fe).concat(ue);for(var ce=Z+fe.length;ce<u.length;++ce)n.get(u[ce]).index=ce}function p(){n=new Map,u=[],a=0,h([r],!1)}p(),h(t);function f(){var R,j=Bn(u),Z;try{for(j.s();!(Z=j.n()).done;)R=Z.value,n.get(R).conversionsTo=[]}catch(fe){j.e(fe)}finally{j.f()}a=0}function c(R){var j=u.filter(function(Z){var fe=n.get(Z);return!fe.isAny&&fe.test(R)});return j.length?j:["any"]}function d(R){return R&&typeof R=="function"&&"_typedFunctionData"in R}function m(R,j,Z){if(!d(R))throw new TypeError(Lh);var fe=Z&&Z.exact,ne=Array.isArray(j)?j.join(","):j,pe=B(ne),ue=_(pe);if(!fe||ue in R.signatures){var ce=R._typedFunctionData.signatureMap.get(ue);if(ce)return ce}var ye=pe.length,Oe;if(fe){Oe=[];var Xe;for(Xe in R.signatures)Oe.push(R._typedFunctionData.signatureMap.get(Xe))}else Oe=R._typedFunctionData.signatures;for(var Ee=0;Ee<ye;++Ee){var Ut=pe[Ee],Ft=[],tr=void 0,Yt=Bn(Oe),gr;try{for(Yt.s();!(gr=Yt.n()).done;){tr=gr.value;var Zt=I(tr.params,Ee);if(!(!Zt||Ut.restParam&&!Zt.restParam)){if(!Zt.hasAny){var mr=function(){var hr=w(Zt);if(Ut.types.some(function(An){return!hr.has(An.name)}))return"continue"}();if(mr==="continue")continue}Ft.push(tr)}}}catch(hr){Yt.e(hr)}finally{Yt.f()}if(Oe=Ft,Oe.length===0)break}var lr,fr=Bn(Oe),nn;try{for(fr.s();!(nn=fr.n()).done;)if(lr=nn.value,lr.params.length<=ye)return lr}catch(hr){fr.e(hr)}finally{fr.f()}throw new TypeError("Signature not found (signature: "+(R.name||"unnamed")+"("+_(pe,", ")+"))")}function y(R,j,Z){return m(R,j,Z).implementation}function g(R,j){var Z=o(j);if(Z.test(R))return R;var fe=Z.conversionsTo;if(fe.length===0)throw new Error("There are no conversions to "+j+" defined.");for(var ne=0;ne<fe.length;ne++){var pe=o(fe[ne].from);if(pe.test(R))return fe[ne].convert(R)}throw new Error("Cannot convert "+R+" to "+j)}function _(R){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return R.map(function(Z){return Z.name}).join(j)}function b(R){var j=R.indexOf("...")===0,Z=j?R.length>3?R.slice(3):"any":R,fe=Z.split("|").map(function(ce){return o(ce.trim())}),ne=!1,pe=j?"...":"",ue=fe.map(function(ce){return ne=ce.isAny||ne,pe+=ce.name+"|",{name:ce.name,typeIndex:ce.index,test:ce.test,isAny:ce.isAny,conversion:null,conversionIndex:-1}});return{types:ue,name:pe.slice(0,-1),hasAny:ne,hasConversion:!1,restParam:j}}function C(R){var j=R.types.map(function(ue){return ue.name}),Z=re(j),fe=R.hasAny,ne=R.name,pe=Z.map(function(ue){var ce=o(ue.from);return fe=ce.isAny||fe,ne+="|"+ue.from,{name:ue.from,typeIndex:ce.index,test:ce.test,isAny:ce.isAny,conversion:ue,conversionIndex:ue.index}});return{types:R.types.concat(pe),name:ne,hasAny:fe,hasConversion:pe.length>0,restParam:R.restParam}}function w(R){return R.typeSet||(R.typeSet=new Set,R.types.forEach(function(j){return R.typeSet.add(j.name)})),R.typeSet}function B(R){var j=[];if(typeof R!="string")throw new TypeError("Signatures must be strings");var Z=R.trim();if(Z==="")return j;for(var fe=Z.split(","),ne=0;ne<fe.length;++ne){var pe=b(fe[ne].trim());if(pe.restParam&&ne!==fe.length-1)throw new SyntaxError('Unexpected rest parameter "'+fe[ne]+'": only allowed for the last parameter');if(pe.types.length===0)return null;j.push(pe)}return j}function S(R){var j=Te(R);return j?j.restParam:!1}function O(R){if(!R||R.types.length===0)return Rh;if(R.types.length===1)return o(R.types[0].name).test;if(R.types.length===2){var j=o(R.types[0].name).test,Z=o(R.types[1].name).test;return function(pe){return j(pe)||Z(pe)}}else{var fe=R.types.map(function(ne){return o(ne.name).test});return function(pe){for(var ue=0;ue<fe.length;ue++)if(fe[ue](pe))return!0;return!1}}}function P(R){var j,Z,fe;if(S(R)){j=qe(R).map(O);var ne=j.length,pe=O(Te(R)),ue=function(ye){for(var Oe=ne;Oe<ye.length;Oe++)if(!pe(ye[Oe]))return!1;return!0};return function(ye){for(var Oe=0;Oe<j.length;Oe++)if(!j[Oe](ye[Oe]))return!1;return ue(ye)&&ye.length>=ne+1}}else return R.length===0?function(ye){return ye.length===0}:R.length===1?(Z=O(R[0]),function(ye){return Z(ye[0])&&ye.length===1}):R.length===2?(Z=O(R[0]),fe=O(R[1]),function(ye){return Z(ye[0])&&fe(ye[1])&&ye.length===2}):(j=R.map(O),function(ye){for(var Oe=0;Oe<j.length;Oe++)if(!j[Oe](ye[Oe]))return!1;return ye.length===j.length})}function I(R,j){return j<R.length?R[j]:S(R)?Te(R):null}function N(R,j){var Z=I(R,j);return Z?w(Z):new Set}function G(R){return R.conversion===null||R.conversion===void 0}function L(R,j){var Z=new Set;return R.forEach(function(fe){var ne=N(fe.params,j),pe,ue=Bn(ne),ce;try{for(ue.s();!(ce=ue.n()).done;)pe=ce.value,Z.add(pe)}catch(ye){ue.e(ye)}finally{ue.f()}}),Z.has("any")?["any"]:Array.from(Z)}function q(R,j,Z){var fe,ne,pe=R||"unnamed",ue=Z,ce,ye=function(){var Yt=[];if(ue.forEach(function(Zt){var mr=I(Zt.params,ce),lr=O(mr);(ce<Zt.params.length||S(Zt.params))&&lr(j[ce])&&Yt.push(Zt)}),Yt.length===0){if(ne=L(ue,ce),ne.length>0){var gr=c(j[ce]);return fe=new TypeError("Unexpected type of argument in function "+pe+" (expected: "+ne.join(" or ")+", actual: "+gr.join(" | ")+", index: "+ce+")"),fe.data={category:"wrongType",fn:pe,index:ce,actual:gr,expected:ne},{v:fe}}}else ue=Yt};for(ce=0;ce<j.length;ce++){var Oe=ye();if(cu(Oe)==="object")return Oe.v}var Xe=ue.map(function(tr){return S(tr.params)?1/0:tr.params.length});if(j.length<Math.min.apply(null,Xe))return ne=L(ue,ce),fe=new TypeError("Too few arguments in function "+pe+" (expected: "+ne.join(" or ")+", index: "+j.length+")"),fe.data={category:"tooFewArgs",fn:pe,index:j.length,expected:ne},fe;var Ee=Math.max.apply(null,Xe);if(j.length>Ee)return fe=new TypeError("Too many arguments in function "+pe+" (expected: "+Ee+", actual: "+j.length+")"),fe.data={category:"tooManyArgs",fn:pe,index:j.length,expectedLength:Ee},fe;for(var Ut=[],Ft=0;Ft<j.length;++Ft)Ut.push(c(j[Ft]).join("|"));return fe=new TypeError('Arguments of type "'+Ut.join(", ")+'" do not match any of the defined signatures of function '+pe+"."),fe.data={category:"mismatch",actual:Ut},fe}function $(R){for(var j=u.length+1,Z=0;Z<R.types.length;Z++)G(R.types[Z])&&(j=Math.min(j,R.types[Z].typeIndex));return j}function H(R){for(var j=a+1,Z=0;Z<R.types.length;Z++)G(R.types[Z])||(j=Math.min(j,R.types[Z].conversionIndex));return j}function z(R,j){if(R.hasAny){if(!j.hasAny)return 1}else if(j.hasAny)return-1;if(R.restParam){if(!j.restParam)return 1}else if(j.restParam)return-1;if(R.hasConversion){if(!j.hasConversion)return 1}else if(j.hasConversion)return-1;var Z=$(R)-$(j);if(Z<0)return-1;if(Z>0)return 1;var fe=H(R)-H(j);return fe<0?-1:fe>0?1:0}function W(R,j){var Z=R.params,fe=j.params,ne=Te(Z),pe=Te(fe),ue=S(Z),ce=S(fe);if(ue&&ne.hasAny){if(!ce||!pe.hasAny)return 1}else if(ce&&pe.hasAny)return-1;var ye=0,Oe=0,Xe,Ee=Bn(Z),Ut;try{for(Ee.s();!(Ut=Ee.n()).done;)Xe=Ut.value,Xe.hasAny&&++ye,Xe.hasConversion&&++Oe}catch(In){Ee.e(In)}finally{Ee.f()}var Ft=0,tr=0,Yt=Bn(fe),gr;try{for(Yt.s();!(gr=Yt.n()).done;)Xe=gr.value,Xe.hasAny&&++Ft,Xe.hasConversion&&++tr}catch(In){Yt.e(In)}finally{Yt.f()}if(ye!==Ft)return ye-Ft;if(ue&&ne.hasConversion){if(!ce||!pe.hasConversion)return 1}else if(ce&&pe.hasConversion)return-1;if(Oe!==tr)return Oe-tr;if(ue){if(!ce)return 1}else if(ce)return-1;var Zt=(Z.length-fe.length)*(ue?-1:1);if(Zt!==0)return Zt;for(var mr=[],lr=0,fr=0;fr<Z.length;++fr){var nn=z(Z[fr],fe[fr]);mr.push(nn),lr+=nn}if(lr!==0)return lr;for(var hr,An=0,Gn=mr;An<Gn.length;An++)if(hr=Gn[An],hr!==0)return hr;return 0}function re(R){if(R.length===0)return[];var j=R.map(o);R.length>1&&j.sort(function(ye,Oe){return ye.index-Oe.index});var Z=j[0].conversionsTo;if(R.length===1)return Z;Z=Z.concat([]);for(var fe=new Set(R),ne=1;ne<j.length;++ne){var pe=void 0,ue=Bn(j[ne].conversionsTo),ce;try{for(ue.s();!(ce=ue.n()).done;)pe=ce.value,fe.has(pe.from)||(Z.push(pe),fe.add(pe.from))}catch(ye){ue.e(ye)}finally{ue.f()}}return Z}function ee(R,j){var Z=j;if(R.some(function(ce){return ce.hasConversion})){var fe=S(R),ne=R.map(Q);Z=function(){for(var ye=[],Oe=fe?arguments.length-1:arguments.length,Xe=0;Xe<Oe;Xe++)ye[Xe]=ne[Xe](arguments[Xe]);return fe&&(ye[Oe]=arguments[Oe].map(ne[Oe])),j.apply(this,ye)}}var pe=Z;if(S(R)){var ue=R.length-1;pe=function(){return Z.apply(this,Re(arguments,0,ue).concat([Re(arguments,ue)]))}}return pe}function Q(R){var j,Z,fe,ne,pe=[],ue=[];switch(R.types.forEach(function(ce){ce.conversion&&(pe.push(o(ce.conversion.from).test),ue.push(ce.conversion.convert))}),ue.length){case 0:return function(ye){return ye};case 1:return j=pe[0],fe=ue[0],function(ye){return j(ye)?fe(ye):ye};case 2:return j=pe[0],Z=pe[1],fe=ue[0],ne=ue[1],function(ye){return j(ye)?fe(ye):Z(ye)?ne(ye):ye};default:return function(ye){for(var Oe=0;Oe<ue.length;Oe++)if(pe[Oe](ye))return ue[Oe](ye);return ye}}}function le(R){function j(Z,fe,ne){if(fe<Z.length){var pe=Z[fe],ue=[];if(pe.restParam){var ce=pe.types.filter(G);ce.length<pe.types.length&&ue.push({types:ce,name:"..."+ce.map(function(ye){return ye.name}).join("|"),hasAny:ce.some(function(ye){return ye.isAny}),hasConversion:!1,restParam:!0}),ue.push(pe)}else ue=pe.types.map(function(ye){return{types:[ye],name:ye.name,hasAny:ye.isAny,hasConversion:ye.conversion,restParam:!1}});return et(ue,function(ye){return j(Z,fe+1,ne.concat([ye]))})}else return[ne]}return j(R,0,[])}function me(R,j){for(var Z=Math.max(R.length,j.length),fe=0;fe<Z;fe++){var ne=N(R,fe),pe=N(j,fe),ue=!1,ce=void 0,ye=Bn(pe),Oe;try{for(ye.s();!(Oe=ye.n()).done;)if(ce=Oe.value,ne.has(ce)){ue=!0;break}}catch(tr){ye.e(tr)}finally{ye.f()}if(!ue)return!1}var Xe=R.length,Ee=j.length,Ut=S(R),Ft=S(j);return Ut?Ft?Xe===Ee:Ee>=Xe:Ft?Xe>=Ee:Xe===Ee}function Se(R){return R.map(function(j){return We(j)?rt(j.referToSelf.callback):ze(j)?tt(j.referTo.references,j.referTo.callback):j})}function be(R,j,Z){var fe=[],ne,pe=Bn(R),ue;try{for(pe.s();!(ue=pe.n()).done;){ne=ue.value;var ce=Z[ne];if(typeof ce!="number")throw new TypeError('No definition for referenced signature "'+ne+'"');if(ce=j[ce],typeof ce!="function")return!1;fe.push(ce)}}catch(ye){pe.e(ye)}finally{pe.f()}return fe}function Ne(R,j,Z){for(var fe=Se(R),ne=new Array(fe.length).fill(!1),pe=!0;pe;){pe=!1;for(var ue=!0,ce=0;ce<fe.length;++ce)if(!ne[ce]){var ye=fe[ce];if(We(ye))fe[ce]=ye.referToSelf.callback(Z),fe[ce].referToSelf=ye.referToSelf,ne[ce]=!0,ue=!1;else if(ze(ye)){var Oe=be(ye.referTo.references,fe,j);Oe?(fe[ce]=ye.referTo.callback.apply(this,Oe),fe[ce].referTo=ye.referTo,ne[ce]=!0,ue=!1):pe=!0}}if(ue&&pe)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return fe}function je(R){var j=/\bthis(\(|\.signatures\b)/;Object.keys(R).forEach(function(Z){var fe=R[Z];if(j.test(fe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Me(R,j){if(l.createCount++,Object.keys(j).length===0)throw new SyntaxError("No signatures provided");l.warnAgainstDeprecatedThis&&je(j);var Z=[],fe=[],ne={},pe=[],ue,ce=function(){if(!Object.prototype.hasOwnProperty.call(j,ue))return"continue";var ur=B(ue);if(!ur)return"continue";Z.forEach(function(an){if(me(an,ur))throw new TypeError('Conflicting signatures "'+_(an)+'" and "'+_(ur)+'".')}),Z.push(ur);var Ir=fe.length;fe.push(j[ue]);var xi=ur.map(C),Yn=void 0,Rn=Bn(le(xi)),Ti;try{for(Rn.s();!(Ti=Rn.n()).done;){Yn=Ti.value;var wn=_(Yn);pe.push({params:Yn,name:wn,fn:Ir}),Yn.every(function(an){return!an.hasConversion})&&(ne[wn]=Ir)}}catch(an){Rn.e(an)}finally{Rn.f()}};for(ue in j)var ye=ce();pe.sort(W);var Oe=Ne(fe,ne,kn),Xe;for(Xe in ne)Object.prototype.hasOwnProperty.call(ne,Xe)&&(ne[Xe]=Oe[ne[Xe]]);for(var Ee=[],Ut=new Map,Ft=0,tr=pe;Ft<tr.length;Ft++)Xe=tr[Ft],Ut.has(Xe.name)||(Xe.fn=Oe[Xe.fn],Ee.push(Xe),Ut.set(Xe.name,Xe));for(var Yt=Ee[0]&&Ee[0].params.length<=2&&!S(Ee[0].params),gr=Ee[1]&&Ee[1].params.length<=2&&!S(Ee[1].params),Zt=Ee[2]&&Ee[2].params.length<=2&&!S(Ee[2].params),mr=Ee[3]&&Ee[3].params.length<=2&&!S(Ee[3].params),lr=Ee[4]&&Ee[4].params.length<=2&&!S(Ee[4].params),fr=Ee[5]&&Ee[5].params.length<=2&&!S(Ee[5].params),nn=Yt&&gr&&Zt&&mr&&lr&&fr,hr=0;hr<Ee.length;++hr)Ee[hr].test=P(Ee[hr].params);for(var An=Yt?O(Ee[0].params[0]):vn,Gn=gr?O(Ee[1].params[0]):vn,In=Zt?O(Ee[2].params[0]):vn,Nn=mr?O(Ee[3].params[0]):vn,Hi=lr?O(Ee[4].params[0]):vn,Mi=fr?O(Ee[5].params[0]):vn,bu=Yt?O(Ee[0].params[1]):vn,wr=gr?O(Ee[1].params[1]):vn,rr=Zt?O(Ee[2].params[1]):vn,yu=mr?O(Ee[3].params[1]):vn,si=lr?O(Ee[4].params[1]):vn,un=fr?O(Ee[5].params[1]):vn,Kn=0;Kn<Ee.length;++Kn)Ee[Kn].implementation=ee(Ee[Kn].params,Ee[Kn].fn);var Pi=Yt?Ee[0].implementation:ou,Au=gr?Ee[1].implementation:ou,wu=Zt?Ee[2].implementation:ou,Gi=mr?Ee[3].implementation:ou,Eu=lr?Ee[4].implementation:ou,Cu=fr?Ee[5].implementation:ou,Fu=Yt?Ee[0].params.length:-1,Su=gr?Ee[1].params.length:-1,Bu=Zt?Ee[2].params.length:-1,Ou=mr?Ee[3].params.length:-1,oi=lr?Ee[4].params.length:-1,Mu=fr?Ee[5].params.length:-1,li=nn?6:0,Pu=Ee.length,xu=Ee.map(function(_r){return _r.test}),Tu=Ee.map(function(_r){return _r.implementation}),Ki=function(){for(var ur=li;ur<Pu;ur++)if(xu[ur](arguments))return Tu[ur].apply(this,arguments);return l.onMismatch(R,arguments,Ee)};function kn(_r,ur){return arguments.length===Fu&&An(_r)&&bu(ur)?Pi.apply(this,arguments):arguments.length===Su&&Gn(_r)&&wr(ur)?Au.apply(this,arguments):arguments.length===Bu&&In(_r)&&rr(ur)?wu.apply(this,arguments):arguments.length===Ou&&Nn(_r)&&yu(ur)?Gi.apply(this,arguments):arguments.length===oi&&Hi(_r)&&si(ur)?Eu.apply(this,arguments):arguments.length===Mu&&Mi(_r)&&un(ur)?Cu.apply(this,arguments):Ki.apply(this,arguments)}try{Object.defineProperty(kn,"name",{value:R})}catch{}return kn.signatures=ne,kn._typedFunctionData={signatures:Ee,signatureMap:Ut},kn}function it(R,j,Z){throw q(R,j,Z)}function qe(R){return Re(R,0,R.length-1)}function Te(R){return R[R.length-1]}function Re(R,j,Z){return Array.prototype.slice.call(R,j,Z)}function lt(R,j){for(var Z=0;Z<R.length;Z++)if(j(R[Z]))return R[Z]}function et(R,j){return Array.prototype.concat.apply([],R.map(j))}function ut(){var R=qe(arguments).map(function(Z){return _(B(Z))}),j=Te(arguments);if(typeof j!="function")throw new TypeError("Callback function expected as last argument");return tt(R,j)}function tt(R,j){return{referTo:{references:R,callback:j}}}function rt(R){if(typeof R!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:R}}}function ze(R){return R&&cu(R.referTo)==="object"&&Array.isArray(R.referTo.references)&&typeof R.referTo.callback=="function"}function We(R){return R&&cu(R.referToSelf)==="object"&&typeof R.referToSelf.callback=="function"}function Ae(R,j){if(!R)return j;if(j&&j!==R){var Z=new Error("Function names do not match (expected: "+R+", actual: "+j+")");throw Z.data={actual:j,expected:R},Z}return R}function we(R){var j;for(var Z in R)Object.prototype.hasOwnProperty.call(R,Z)&&(d(R[Z])||typeof R[Z].signature=="string")&&(j=Ae(j,R[Z].name));return j}function yt(R,j){var Z;for(Z in j)if(Object.prototype.hasOwnProperty.call(j,Z)){if(Z in R&&j[Z]!==R[Z]){var fe=new Error('Signature "'+Z+'" is defined twice');throw fe.data={signature:Z,sourceFunction:j[Z],destFunction:R[Z]},fe}R[Z]=j[Z]}}var Tt=l;l=function(j){for(var Z=typeof j=="string",fe=Z?1:0,ne=Z?j:"",pe={},ue=fe;ue<arguments.length;++ue){var ce=arguments[ue],ye={},Oe=void 0;if(typeof ce=="function"?(Oe=ce.name,typeof ce.signature=="string"?ye[ce.signature]=ce:d(ce)&&(ye=ce.signatures)):e(ce)&&(ye=ce,Z||(Oe=we(ce))),Object.keys(ye).length===0){var Xe=new TypeError("Argument to 'typed' at index "+ue+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Xe.data={index:ue,argument:ce},Xe}Z||(ne=Ae(ne,Oe)),yt(pe,ye)}return Me(ne||"",pe)},l.create=Td,l.createCount=Tt.createCount,l.onMismatch=it,l.throwMismatchError=it,l.createError=q,l.clear=p,l.clearConversions=f,l.addTypes=h,l._findType=o,l.referTo=ut,l.referToSelf=rt,l.convert=g,l.findSignature=m,l.find=y,l.isTypedFunction=d,l.warnAgainstDeprecatedThis=!0,l.addType=function(R,j){var Z="any";j!==!1&&n.has("Object")&&(Z="Object"),l.addTypes([R],Z)};function zt(R){if(!R||typeof R.from!="string"||typeof R.to!="string"||typeof R.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(R.to===R.from)throw new SyntaxError('Illegal to define conversion from "'+R.from+'" to itself.')}return l.addConversion=function(R){zt(R);var j=o(R.to);if(j.conversionsTo.every(function(Z){return Z.from!==R.from}))j.conversionsTo.push({from:R.from,convert:R.convert,index:a++});else throw new Error('There is already a conversion from "'+R.from+'" to "'+j.name+'"')},l.addConversions=function(R){R.forEach(l.addConversion)},l.removeConversion=function(R){zt(R);var j=o(R.to),Z=lt(j.conversionsTo,function(ne){return ne.from===R.from});if(!Z)throw new Error("Attempt to remove nonexistent conversion from "+R.from+" to "+R.to);if(Z.convert!==R.convert)throw new Error("Conversion to remove does not match existing conversion");var fe=j.conversionsTo.indexOf(Z);j.conversionsTo.splice(fe,1)},l.resolve=function(R,j){if(!d(R))throw new TypeError(Lh);for(var Z=R._typedFunctionData.signatures,fe=0;fe<Z.length;++fe)if(Z[fe].test(j))return Z[fe];return null},l}const Uh=Td();function Ar(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function tl(e,t,r){var n={2:"0b",8:"0o",16:"0x"},u=n[t],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Ar(r))throw new Error("size must be an integer");if(e>2**(r-1)-1||e<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Ar(e))throw new Error("Value must be an integer");e<0&&(e=e+2**r),a="i".concat(r)}var l="";return e<0&&(e=-e,l="-"),"".concat(l).concat(u).concat(e.toString(t)).concat(a)}function Rl(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var r="auto",n,u;if(t&&(t.notation&&(r=t.notation),er(t)?n=t:er(t.precision)&&(n=t.precision),t.wordSize&&(u=t.wordSize,typeof u!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Oy(e,n);case"exponential":return Id(e,n);case"engineering":return By(e,n);case"bin":return tl(e,2,u);case"oct":return tl(e,8,u);case"hex":return tl(e,16,u);case"auto":return My(e,n,t&&t).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],l=arguments[4];return a!=="."?a+l:l});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Ms(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var r=t[1],n=t[2],u=parseFloat(t[4]||"0"),a=n.indexOf(".");u+=a!==-1?a-1:n.length-1;var l=n.replace(".","").replace(/^0*/,function(o){return u-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return l.length===0&&(l.push(0),u++),{sign:r,coefficients:l,exponent:u}}function By(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=Ms(e),n=Ps(r,t),u=n.exponent,a=n.coefficients,l=u%3===0?u:u<0?u-3-u%3:u-u%3;if(er(t))for(;t>a.length||u-l+1>a.length;)a.push(0);else for(var o=Math.abs(u-l)-(a.length-1),h=0;h<o;h++)a.push(0);for(var p=Math.abs(u-l),f=1;p>0;)f++,p--;var c=a.slice(f).join(""),d=er(t)&&c.length||c.match(/[1-9]/)?"."+c:"",m=a.slice(0,f).join("")+d+"e"+(u>=0?"+":"")+l.toString();return n.sign+m}function Oy(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=Ms(e),n=typeof t=="number"?Ps(r,r.exponent+1+t):r,u=n.coefficients,a=n.exponent+1,l=a+(t||0);return u.length<l&&(u=u.concat(du(l-u.length))),a<0&&(u=du(-a+1).concat(u),a=1),a<u.length&&u.splice(a,0,a===0?"0.":"."),n.sign+u.join("")}function Id(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=Ms(e),n=t?Ps(r,t):r,u=n.coefficients,a=n.exponent;u.length<t&&(u=u.concat(du(t-u.length)));var l=u.shift();return n.sign+l+(u.length>0?"."+u.join(""):"")+"e"+(a>=0?"+":"")+a}function My(e,t,r){if(isNaN(e)||!isFinite(e))return String(e);var n=r&&r.lowerExp!==void 0?r.lowerExp:-3,u=r&&r.upperExp!==void 0?r.upperExp:5,a=Ms(e),l=t?Ps(a,t):a;if(l.exponent<n||l.exponent>=u)return Id(e,t);var o=l.coefficients,h=l.exponent;o.length<t&&(o=o.concat(du(t-o.length))),o=o.concat(du(h-o.length+1+(o.length<t?t-o.length:0))),o=du(-h).concat(o);var p=h>0?h:0;return p<o.length-1&&o.splice(p+1,0,"."),l.sign+o.join("")}function Ps(e,t){for(var r={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},n=r.coefficients;t<=0;)n.unshift(0),r.exponent++,t++;if(n.length>t){var u=n.splice(t,n.length-t);if(u[0]>=5){var a=t-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),r.exponent++,a++),a--,n[a]++}}return r}function du(e){for(var t=[],r=0;r<e;r++)t.push(0);return t}function Py(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var xy=Number.EPSILON||2220446049250313e-31;function ns(e,t,r){if(r==null)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var n=Math.abs(e-t);return n<xy?!0:n<=Math.max(Math.abs(e),Math.abs(t))*r}return!1}function rl(e,t,r){var n=e.constructor,u=new n(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Ar(r))throw new Error("size must be an integer");if(e.greaterThan(u.pow(r-1).sub(1))||e.lessThan(u.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(u.pow(r))),a="i".concat(r)}switch(t){case 2:return"".concat(e.toBinary()).concat(a);case 8:return"".concat(e.toOctal()).concat(a);case 16:return"".concat(e.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(t," not supported "))}}function Ty(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var r="auto",n,u;if(t!==void 0&&(t.notation&&(r=t.notation),typeof t=="number"?n=t:t.precision&&(n=t.precision),t.wordSize&&(u=t.wordSize,typeof u!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Ny(e,n);case"exponential":return Vh(e,n);case"engineering":return Iy(e,n);case"bin":return rl(e,2,u);case"oct":return rl(e,8,u);case"hex":return rl(e,16,u);case"auto":{var a=t&&t.lowerExp!==void 0?t.lowerExp:-3,l=t&&t.upperExp!==void 0?t.upperExp:5;if(e.isZero())return"0";var o,h=e.toSignificantDigits(n),p=h.e;return p>=a&&p<l?o=h.toFixed():o=Vh(e,n),o.replace(/((\.\d*?)(0+))($|e)/,function(){var f=arguments[2],c=arguments[4];return f!=="."?f+c:c})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Iy(e,t){var r=e.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,u=e.mul(Math.pow(10,-n)),a=u.toPrecision(t);return a.indexOf("e")!==-1&&(a=u.toString()),a+"e"+(r>=0?"+":"")+n.toString()}function Vh(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function Ny(e,t){return e.toFixed(t)}function Wr(e,t){var r=ky(e,t);return t&&typeof t=="object"&&"truncate"in t&&r.length>t.truncate?r.substring(0,t.truncate-3)+"...":r}function ky(e,t){if(typeof e=="number")return Rl(e,t);if(mn(e))return Ty(e,t);if(Ry(e))return!t||t.fraction!=="decimal"?e.s*e.n+"/"+e.d:e.toString();if(Array.isArray(e))return Nd(e,t);if(jn(e))return'"'+e+'"';if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var r=Object.keys(e).map(n=>'"'+n+'": '+Wr(e[n],t));return"{"+r.join(", ")+"}"}return String(e)}function Nd(e,t){if(Array.isArray(e)){for(var r="[",n=e.length,u=0;u<n;u++)u!==0&&(r+=", "),r+=Nd(e[u],t);return r+="]",r}else return Wr(e,t)}function Ry(e){return e&&typeof e=="object"&&typeof e.s=="number"&&typeof e.n=="number"&&typeof e.d=="number"||!1}function Mt(e,t,r){if(!(this instanceof Mt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}Mt.prototype=new RangeError;Mt.prototype.constructor=RangeError;Mt.prototype.name="DimensionError";Mt.prototype.isDimensionError=!0;function Wi(e,t,r){if(!(this instanceof Wi))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Wi.prototype=new RangeError;Wi.prototype.constructor=RangeError;Wi.prototype.name="IndexError";Wi.prototype.isIndexError=!0;function Ci(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function kd(e,t,r){var n,u=e.length;if(u!==t[r])throw new Mt(u,t[r]);if(r<t.length-1){var a=r+1;for(n=0;n<u;n++){var l=e[n];if(!Array.isArray(l))throw new Mt(t.length-1,t.length,"<");kd(e[n],t,a)}}else for(n=0;n<u;n++)if(Array.isArray(e[n]))throw new Mt(t.length+1,t.length,">")}function jh(e,t){var r=t.length===0;if(r){if(Array.isArray(e))throw new Mt(e.length,0)}else kd(e,t,0)}function Jt(e,t){if(!er(e)||!Ar(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new Wi(e,t)}function qh(e,t,r){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(u){if(!er(u)||!Ar(u)||u<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Wr(t)+")")});var n=r!==void 0?r:0;return Ll(e,t,0,n),e}function Ll(e,t,r,n){var u,a,l=e.length,o=t[r],h=Math.min(l,o);if(e.length=o,r<t.length-1){var p=r+1;for(u=0;u<h;u++)a=e[u],Array.isArray(a)||(a=[a],e[u]=a),Ll(a,t,p,n);for(u=h;u<o;u++)a=[],e[u]=a,Ll(a,t,p,n)}else{for(u=0;u<h;u++)for(;Array.isArray(e[u]);)e[u]=e[u][0];for(u=h;u<o;u++)e[u]=n}}function Ly(e,t){var r=Vy(e),n=r.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Mt(0,n,"!=");t=af(t,n);var u=Rd(t);if(n!==u)throw new Mt(u,n,"!=");try{return Uy(r,t)}catch(a){throw a instanceof Mt?new Mt(u,n,"!="):a}}function af(e,t){var r=Rd(e),n=e.slice(),u=-1,a=e.indexOf(u),l=e.indexOf(u,a+1)>=0;if(l)throw new Error("More than one wildcard in sizes");var o=a>=0,h=t%r===0;if(o)if(h)n[a]=-t/r;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-r);return n}function Rd(e){return e.reduce((t,r)=>t*r,1)}function Uy(e,t){for(var r=e,n,u=t.length-1;u>0;u--){var a=t[u];n=[];for(var l=r.length/a,o=0;o<l;o++)n.push(r.slice(o*a,(o+1)*a));r=n}return r}function Ld(e,t,r,n){var u=n||Ci(e);if(r)for(var a=0;a<r;a++)e=[e],u.unshift(1);for(e=Ud(e,t,0);u.length<t;)u.push(1);return e}function Ud(e,t,r){var n,u;if(Array.isArray(e)){var a=r+1;for(n=0,u=e.length;n<u;n++)e[n]=Ud(e[n],t,a)}else for(var l=r;l<t;l++)e=[e];return e}function Vy(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function r(n){Array.isArray(n)?n.forEach(r):t.push(n)}),t}function is(e,t){for(var r,n=0,u=0;u<e.length;u++){var a=e[u],l=Array.isArray(a);if(u===0&&l&&(n=a.length),l&&a.length!==n)return;var o=l?is(a,t):t(a);if(r===void 0)r=o;else if(r!==o)return"mixed"}return r}function xt(e,t,r,n){function u(a){var l=Ey(a,t.map(zy));return jy(e,t,a),r(l)}return u.isFactory=!0,u.fn=e,u.dependencies=t.slice().sort(),n&&(u.meta=n),u}function jy(e,t,r){var n=t.filter(a=>!qy(a)).every(a=>r[a]!==void 0);if(!n){var u=t.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(u.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function qy(e){return e&&e[0]==="?"}function zy(e){return e&&e[0]==="?"?e.slice(1):e}function Wy(e,t){if(jd(e)&&Vd(e,t))return e[t];throw typeof e[t]=="function"&&Ky(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function Hy(e,t,r){if(jd(e)&&Vd(e,t))return e[t]=r,r;throw new Error('No access to property "'+t+'"')}function Gy(e,t){return t in e}function Vd(e,t){return!e||typeof e!="object"?!1:Ju(Yy,t)?!0:!(t in Object.prototype||t in Function.prototype)}function Ky(e,t){return e==null||typeof e[t]!="function"||Ju(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:Ju(Zy,t)?!0:!(t in Object.prototype||t in Function.prototype)}function jd(e){return typeof e=="object"&&e&&e.constructor===Object}var Yy={length:!0,name:!0},Zy={toString:!0,valueOf:!0,toLocaleString:!0};class $y{constructor(t){this.wrappedObject=t}keys(){return Object.keys(this.wrappedObject)}get(t){return Wy(this.wrappedObject,t)}set(t,r){return Hy(this.wrappedObject,t,r),this}has(t){return Gy(this.wrappedObject,t)}}function Xy(e){return e?e instanceof Map||e instanceof $y||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}var qd=function(){return qd=Uh.create,Uh},Jy=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Qy=xt("typed",Jy,function(t){var{BigNumber:r,Complex:n,DenseMatrix:u,Fraction:a}=t,l=qd();return l.clear(),l.addTypes([{name:"number",test:er},{name:"Complex",test:Od},{name:"BigNumber",test:mn},{name:"Fraction",test:Md},{name:"Unit",test:Pd},{name:"identifier",test:o=>jn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(o)},{name:"string",test:jn},{name:"Chain",test:yy},{name:"Array",test:Xt},{name:"Matrix",test:Lr},{name:"DenseMatrix",test:Yb},{name:"SparseMatrix",test:Zb},{name:"Range",test:$b},{name:"Index",test:uf},{name:"boolean",test:Xb},{name:"ResultSet",test:Jb},{name:"Help",test:Qb},{name:"function",test:ey},{name:"Date",test:ty},{name:"RegExp",test:ry},{name:"null",test:iy},{name:"undefined",test:xd},{name:"AccessorNode",test:uy},{name:"ArrayNode",test:ay},{name:"AssignmentNode",test:sy},{name:"BlockNode",test:oy},{name:"ConditionalNode",test:ly},{name:"ConstantNode",test:fy},{name:"FunctionNode",test:hy},{name:"FunctionAssignmentNode",test:cy},{name:"IndexNode",test:dy},{name:"Node",test:py},{name:"ObjectNode",test:vy},{name:"OperatorNode",test:gy},{name:"ParenthesisNode",test:my},{name:"RangeNode",test:_y},{name:"RelationalNode",test:Dy},{name:"SymbolNode",test:by},{name:"Map",test:Xy},{name:"Object",test:ny}]),l.addConversions([{from:"number",to:"BigNumber",convert:function(h){if(r||nl(h),Py(h)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+h+"). Use function bignumber(x) to convert to BigNumber.");return new r(h)}},{from:"number",to:"Complex",convert:function(h){return n||Ha(h),new n(h,0)}},{from:"BigNumber",to:"Complex",convert:function(h){return n||Ha(h),new n(h.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(h){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(h){return n||Ha(h),new n(h.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(h){a||il(h);var p=new a(h);if(p.valueOf()!==h)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+h+"). Use function fraction(x) to convert to Fraction.");return p}},{from:"string",to:"number",convert:function(h){var p=Number(h);if(isNaN(p))throw new Error('Cannot convert "'+h+'" to a number');return p}},{from:"string",to:"BigNumber",convert:function(h){r||nl(h);try{return new r(h)}catch{throw new Error('Cannot convert "'+h+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(h){a||il(h);try{return new a(h)}catch{throw new Error('Cannot convert "'+h+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(h){n||Ha(h);try{return new n(h)}catch{throw new Error('Cannot convert "'+h+'" to Complex')}}},{from:"boolean",to:"number",convert:function(h){return+h}},{from:"boolean",to:"BigNumber",convert:function(h){return r||nl(h),new r(+h)}},{from:"boolean",to:"Fraction",convert:function(h){return a||il(h),new a(+h)}},{from:"boolean",to:"string",convert:function(h){return String(h)}},{from:"Array",to:"Matrix",convert:function(h){return u||eA(),new u(h)}},{from:"Matrix",to:"Array",convert:function(h){return h.valueOf()}}]),l.onMismatch=(o,h,p)=>{var f=l.createError(o,h,p);if(["wrongType","mismatch"].includes(f.data.category)&&h.length===1&&ts(h[0])&&p.some(d=>!d.params.includes(","))){var c=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw c.data=f.data,c}throw f},l.onMismatch=(o,h,p)=>{var f=l.createError(o,h,p);if(["wrongType","mismatch"].includes(f.data.category)&&h.length===1&&ts(h[0])&&p.some(d=>!d.params.includes(","))){var c=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw c.data=f.data,c}throw f},l});function nl(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function Ha(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function eA(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function il(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var hu=9e15,Bi=1e9,Ul="0123456789abcdef",us="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",as="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Vl={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-hu,maxE:hu,crypto:!1},zd,ui,nt=!0,xs="[DecimalError] ",Fi=xs+"Invalid argument: ",Wd=xs+"Precision limit exceeded",Hd=xs+"crypto unavailable",Gd="[object Decimal]",Tr=Math.floor,vr=Math.pow,tA=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,rA=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,nA=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Kd=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Mn=1e7,Ye=7,iA=9007199254740991,uA=us.length-1,jl=as.length-1,_e={toStringTag:Gd};_e.absoluteValue=_e.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),Ve(e)};_e.ceil=function(){return Ve(new this.constructor(this),this.e+1,2)};_e.clampedTo=_e.clamp=function(e,t){var r,n=this,u=n.constructor;if(e=new u(e),t=new u(t),!e.s||!t.s)return new u(NaN);if(e.gt(t))throw Error(Fi+t);return r=n.cmp(e),r<0?e:n.cmp(t)>0?t:new u(n)};_e.comparedTo=_e.cmp=function(e){var t,r,n,u,a=this,l=a.d,o=(e=new a.constructor(e)).d,h=a.s,p=e.s;if(!l||!o)return!h||!p?NaN:h!==p?h:l===o?0:!l^h<0?1:-1;if(!l[0]||!o[0])return l[0]?h:o[0]?-p:0;if(h!==p)return h;if(a.e!==e.e)return a.e>e.e^h<0?1:-1;for(n=l.length,u=o.length,t=0,r=n<u?n:u;t<r;++t)if(l[t]!==o[t])return l[t]>o[t]^h<0?1:-1;return n===u?0:n>u^h<0?1:-1};_e.cosine=_e.cos=function(){var e,t,r=this,n=r.constructor;return r.d?r.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+Ye,n.rounding=1,r=aA(n,Jd(n,r)),n.precision=e,n.rounding=t,Ve(ui==2||ui==3?r.neg():r,e,t,!0)):new n(1):new n(NaN)};_e.cubeRoot=_e.cbrt=function(){var e,t,r,n,u,a,l,o,h,p,f=this,c=f.constructor;if(!f.isFinite()||f.isZero())return new c(f);for(nt=!1,a=f.s*vr(f.s*f,1/3),!a||Math.abs(a)==1/0?(r=Or(f.d),e=f.e,(a=(e-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=vr(r,1/3),e=Tr((e+1)/3)-(e%3==(e<0?-1:2)),a==1/0?r="5e"+e:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),n=new c(r),n.s=f.s):n=new c(a.toString()),l=(e=c.precision)+3;;)if(o=n,h=o.times(o).times(o),p=h.plus(f),n=Nt(p.plus(f).times(o),p.plus(h),l+2,1),Or(o.d).slice(0,l)===(r=Or(n.d)).slice(0,l))if(r=r.slice(l-3,l+1),r=="9999"||!u&&r=="4999"){if(!u&&(Ve(o,e+1,0),o.times(o).times(o).eq(f))){n=o;break}l+=4,u=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Ve(n,e+1,1),t=!n.times(n).times(n).eq(f));break}return nt=!0,Ve(n,e,c.rounding,t)};_e.decimalPlaces=_e.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-Tr(this.e/Ye))*Ye,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};_e.dividedBy=_e.div=function(e){return Nt(this,new this.constructor(e))};_e.dividedToIntegerBy=_e.divToInt=function(e){var t=this,r=t.constructor;return Ve(Nt(t,new r(e),0,1,1),r.precision,r.rounding)};_e.equals=_e.eq=function(e){return this.cmp(e)===0};_e.floor=function(){return Ve(new this.constructor(this),this.e+1,3)};_e.greaterThan=_e.gt=function(e){return this.cmp(e)>0};_e.greaterThanOrEqualTo=_e.gte=function(e){var t=this.cmp(e);return t==1||t===0};_e.hyperbolicCosine=_e.cosh=function(){var e,t,r,n,u,a=this,l=a.constructor,o=new l(1);if(!a.isFinite())return new l(a.s?1/0:NaN);if(a.isZero())return o;r=l.precision,n=l.rounding,l.precision=r+Math.max(a.e,a.sd())+4,l.rounding=1,u=a.d.length,u<32?(e=Math.ceil(u/3),t=(1/Is(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),a=gu(l,1,a.times(t),new l(1),!0);for(var h,p=e,f=new l(8);p--;)h=a.times(a),a=o.minus(h.times(f.minus(h.times(f))));return Ve(a,l.precision=r,l.rounding=n,!0)};_e.hyperbolicSine=_e.sinh=function(){var e,t,r,n,u=this,a=u.constructor;if(!u.isFinite()||u.isZero())return new a(u);if(t=a.precision,r=a.rounding,a.precision=t+Math.max(u.e,u.sd())+4,a.rounding=1,n=u.d.length,n<3)u=gu(a,2,u,u,!0);else{e=1.4*Math.sqrt(n),e=e>16?16:e|0,u=u.times(1/Is(5,e)),u=gu(a,2,u,u,!0);for(var l,o=new a(5),h=new a(16),p=new a(20);e--;)l=u.times(u),u=u.times(o.plus(l.times(h.times(l).plus(p))))}return a.precision=t,a.rounding=r,Ve(u,t,r,!0)};_e.hyperbolicTangent=_e.tanh=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,Nt(r.sinh(),r.cosh(),n.precision=e,n.rounding=t)):new n(r.s)};_e.inverseCosine=_e.acos=function(){var e,t=this,r=t.constructor,n=t.abs().cmp(1),u=r.precision,a=r.rounding;return n!==-1?n===0?t.isNeg()?On(r,u,a):new r(0):new r(NaN):t.isZero()?On(r,u+4,a).times(.5):(r.precision=u+6,r.rounding=1,t=t.asin(),e=On(r,u+4,a).times(.5),r.precision=u,r.rounding=a,e.minus(t))};_e.inverseHyperbolicCosine=_e.acosh=function(){var e,t,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,nt=!1,r=r.times(r).minus(1).sqrt().plus(r),nt=!0,n.precision=e,n.rounding=t,r.ln()):new n(r)};_e.inverseHyperbolicSine=_e.asinh=function(){var e,t,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,nt=!1,r=r.times(r).plus(1).sqrt().plus(r),nt=!0,n.precision=e,n.rounding=t,r.ln())};_e.inverseHyperbolicTangent=_e.atanh=function(){var e,t,r,n,u=this,a=u.constructor;return u.isFinite()?u.e>=0?new a(u.abs().eq(1)?u.s/0:u.isZero()?u:NaN):(e=a.precision,t=a.rounding,n=u.sd(),Math.max(n,e)<2*-u.e-1?Ve(new a(u),e,t,!0):(a.precision=r=n-u.e,u=Nt(u.plus(1),new a(1).minus(u),r+e,1),a.precision=e+4,a.rounding=1,u=u.ln(),a.precision=e,a.rounding=t,u.times(.5))):new a(NaN)};_e.inverseSine=_e.asin=function(){var e,t,r,n,u=this,a=u.constructor;return u.isZero()?new a(u):(t=u.abs().cmp(1),r=a.precision,n=a.rounding,t!==-1?t===0?(e=On(a,r+4,n).times(.5),e.s=u.s,e):new a(NaN):(a.precision=r+6,a.rounding=1,u=u.div(new a(1).minus(u.times(u)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,u.times(2)))};_e.inverseTangent=_e.atan=function(){var e,t,r,n,u,a,l,o,h,p=this,f=p.constructor,c=f.precision,d=f.rounding;if(p.isFinite()){if(p.isZero())return new f(p);if(p.abs().eq(1)&&c+4<=jl)return l=On(f,c+4,d).times(.25),l.s=p.s,l}else{if(!p.s)return new f(NaN);if(c+4<=jl)return l=On(f,c+4,d).times(.5),l.s=p.s,l}for(f.precision=o=c+10,f.rounding=1,r=Math.min(28,o/Ye+2|0),e=r;e;--e)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(nt=!1,t=Math.ceil(o/Ye),n=1,h=p.times(p),l=new f(p),u=p;e!==-1;)if(u=u.times(h),a=l.minus(u.div(n+=2)),u=u.times(h),l=a.plus(u.div(n+=2)),l.d[t]!==void 0)for(e=t;l.d[e]===a.d[e]&&e--;);return r&&(l=l.times(2<<r-1)),nt=!0,Ve(l,f.precision=c,f.rounding=d,!0)};_e.isFinite=function(){return!!this.d};_e.isInteger=_e.isInt=function(){return!!this.d&&Tr(this.e/Ye)>this.d.length-2};_e.isNaN=function(){return!this.s};_e.isNegative=_e.isNeg=function(){return this.s<0};_e.isPositive=_e.isPos=function(){return this.s>0};_e.isZero=function(){return!!this.d&&this.d[0]===0};_e.lessThan=_e.lt=function(e){return this.cmp(e)<0};_e.lessThanOrEqualTo=_e.lte=function(e){return this.cmp(e)<1};_e.logarithm=_e.log=function(e){var t,r,n,u,a,l,o,h,p=this,f=p.constructor,c=f.precision,d=f.rounding,m=5;if(e==null)e=new f(10),t=!0;else{if(e=new f(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new f(NaN);t=e.eq(10)}if(r=p.d,p.s<0||!r||!r[0]||p.eq(1))return new f(r&&!r[0]?-1/0:p.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)a=!0;else{for(u=r[0];u%10===0;)u/=10;a=u!==1}if(nt=!1,o=c+m,l=bi(p,o),n=t?ss(f,o+10):bi(e,o),h=Nt(l,n,o,1),Qu(h.d,u=c,d))do if(o+=10,l=bi(p,o),n=t?ss(f,o+10):bi(e,o),h=Nt(l,n,o,1),!a){+Or(h.d).slice(u+1,u+15)+1==1e14&&(h=Ve(h,c+1,0));break}while(Qu(h.d,u+=10,d));return nt=!0,Ve(h,c,d)};_e.minus=_e.sub=function(e){var t,r,n,u,a,l,o,h,p,f,c,d,m=this,y=m.constructor;if(e=new y(e),!m.d||!e.d)return!m.s||!e.s?e=new y(NaN):m.d?e.s=-e.s:e=new y(e.d||m.s!==e.s?m:NaN),e;if(m.s!=e.s)return e.s=-e.s,m.plus(e);if(p=m.d,d=e.d,o=y.precision,h=y.rounding,!p[0]||!d[0]){if(d[0])e.s=-e.s;else if(p[0])e=new y(m);else return new y(h===3?-0:0);return nt?Ve(e,o,h):e}if(r=Tr(e.e/Ye),f=Tr(m.e/Ye),p=p.slice(),a=f-r,a){for(c=a<0,c?(t=p,a=-a,l=d.length):(t=d,r=f,l=p.length),n=Math.max(Math.ceil(o/Ye),l)+2,a>n&&(a=n,t.length=1),t.reverse(),n=a;n--;)t.push(0);t.reverse()}else{for(n=p.length,l=d.length,c=n<l,c&&(l=n),n=0;n<l;n++)if(p[n]!=d[n]){c=p[n]<d[n];break}a=0}for(c&&(t=p,p=d,d=t,e.s=-e.s),l=p.length,n=d.length-l;n>0;--n)p[l++]=0;for(n=d.length;n>a;){if(p[--n]<d[n]){for(u=n;u&&p[--u]===0;)p[u]=Mn-1;--p[u],p[n]+=Mn}p[n]-=d[n]}for(;p[--l]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(e.d=p,e.e=Ts(p,r),nt?Ve(e,o,h):e):new y(h===3?-0:0)};_e.modulo=_e.mod=function(e){var t,r=this,n=r.constructor;return e=new n(e),!r.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||r.d&&!r.d[0]?Ve(new n(r),n.precision,n.rounding):(nt=!1,n.modulo==9?(t=Nt(r,e.abs(),0,3,1),t.s*=e.s):t=Nt(r,e,0,n.modulo,1),t=t.times(e),nt=!0,r.minus(t))};_e.naturalExponential=_e.exp=function(){return ql(this)};_e.naturalLogarithm=_e.ln=function(){return bi(this)};_e.negated=_e.neg=function(){var e=new this.constructor(this);return e.s=-e.s,Ve(e)};_e.plus=_e.add=function(e){var t,r,n,u,a,l,o,h,p,f,c=this,d=c.constructor;if(e=new d(e),!c.d||!e.d)return!c.s||!e.s?e=new d(NaN):c.d||(e=new d(e.d||c.s===e.s?c:NaN)),e;if(c.s!=e.s)return e.s=-e.s,c.minus(e);if(p=c.d,f=e.d,o=d.precision,h=d.rounding,!p[0]||!f[0])return f[0]||(e=new d(c)),nt?Ve(e,o,h):e;if(a=Tr(c.e/Ye),n=Tr(e.e/Ye),p=p.slice(),u=a-n,u){for(u<0?(r=p,u=-u,l=f.length):(r=f,n=a,l=p.length),a=Math.ceil(o/Ye),l=a>l?a+1:l+1,u>l&&(u=l,r.length=1),r.reverse();u--;)r.push(0);r.reverse()}for(l=p.length,u=f.length,l-u<0&&(u=l,r=f,f=p,p=r),t=0;u;)t=(p[--u]=p[u]+f[u]+t)/Mn|0,p[u]%=Mn;for(t&&(p.unshift(t),++n),l=p.length;p[--l]==0;)p.pop();return e.d=p,e.e=Ts(p,n),nt?Ve(e,o,h):e};_e.precision=_e.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Fi+e);return r.d?(t=Yd(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};_e.round=function(){var e=this,t=e.constructor;return Ve(new t(e),e.e+1,t.rounding)};_e.sine=_e.sin=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+Ye,n.rounding=1,r=oA(n,Jd(n,r)),n.precision=e,n.rounding=t,Ve(ui>2?r.neg():r,e,t,!0)):new n(NaN)};_e.squareRoot=_e.sqrt=function(){var e,t,r,n,u,a,l=this,o=l.d,h=l.e,p=l.s,f=l.constructor;if(p!==1||!o||!o[0])return new f(!p||p<0&&(!o||o[0])?NaN:o?l:1/0);for(nt=!1,p=Math.sqrt(+l),p==0||p==1/0?(t=Or(o),(t.length+h)%2==0&&(t+="0"),p=Math.sqrt(t),h=Tr((h+1)/2)-(h<0||h%2),p==1/0?t="5e"+h:(t=p.toExponential(),t=t.slice(0,t.indexOf("e")+1)+h),n=new f(t)):n=new f(p.toString()),r=(h=f.precision)+3;;)if(a=n,n=a.plus(Nt(l,a,r+2,1)).times(.5),Or(a.d).slice(0,r)===(t=Or(n.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!u&&t=="4999"){if(!u&&(Ve(a,h+1,0),a.times(a).eq(l))){n=a;break}r+=4,u=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Ve(n,h+1,1),e=!n.times(n).eq(l));break}return nt=!0,Ve(n,h,f.rounding,e)};_e.tangent=_e.tan=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,r=r.sin(),r.s=1,r=Nt(r,new n(1).minus(r.times(r)).sqrt(),e+10,0),n.precision=e,n.rounding=t,Ve(ui==2||ui==4?r.neg():r,e,t,!0)):new n(NaN)};_e.times=_e.mul=function(e){var t,r,n,u,a,l,o,h,p,f=this,c=f.constructor,d=f.d,m=(e=new c(e)).d;if(e.s*=f.s,!d||!d[0]||!m||!m[0])return new c(!e.s||d&&!d[0]&&!m||m&&!m[0]&&!d?NaN:!d||!m?e.s/0:e.s*0);for(r=Tr(f.e/Ye)+Tr(e.e/Ye),h=d.length,p=m.length,h<p&&(a=d,d=m,m=a,l=h,h=p,p=l),a=[],l=h+p,n=l;n--;)a.push(0);for(n=p;--n>=0;){for(t=0,u=h+n;u>n;)o=a[u]+m[n]*d[u-n-1]+t,a[u--]=o%Mn|0,t=o/Mn|0;a[u]=(a[u]+t)%Mn|0}for(;!a[--l];)a.pop();return t?++r:a.shift(),e.d=a,e.e=Ts(a,r),nt?Ve(e,c.precision,c.rounding):e};_e.toBinary=function(e,t){return sf(this,2,e,t)};_e.toDecimalPlaces=_e.toDP=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Gr(e,0,Bi),t===void 0?t=n.rounding:Gr(t,0,8),Ve(r,e+r.e+1,t))};_e.toExponential=function(e,t){var r,n=this,u=n.constructor;return e===void 0?r=zn(n,!0):(Gr(e,0,Bi),t===void 0?t=u.rounding:Gr(t,0,8),n=Ve(new u(n),e+1,t),r=zn(n,!0,e+1)),n.isNeg()&&!n.isZero()?"-"+r:r};_e.toFixed=function(e,t){var r,n,u=this,a=u.constructor;return e===void 0?r=zn(u):(Gr(e,0,Bi),t===void 0?t=a.rounding:Gr(t,0,8),n=Ve(new a(u),e+u.e+1,t),r=zn(n,!1,e+n.e+1)),u.isNeg()&&!u.isZero()?"-"+r:r};_e.toFraction=function(e){var t,r,n,u,a,l,o,h,p,f,c,d,m=this,y=m.d,g=m.constructor;if(!y)return new g(m);if(p=r=new g(1),n=h=new g(0),t=new g(n),a=t.e=Yd(y)-m.e-1,l=a%Ye,t.d[0]=vr(10,l<0?Ye+l:l),e==null)e=a>0?t:p;else{if(o=new g(e),!o.isInt()||o.lt(p))throw Error(Fi+o);e=o.gt(t)?a>0?t:p:o}for(nt=!1,o=new g(Or(y)),f=g.precision,g.precision=a=y.length*Ye*2;c=Nt(o,t,0,1,1),u=r.plus(c.times(n)),u.cmp(e)!=1;)r=n,n=u,u=p,p=h.plus(c.times(u)),h=u,u=t,t=o.minus(c.times(u)),o=u;return u=Nt(e.minus(r),n,0,1,1),h=h.plus(u.times(p)),r=r.plus(u.times(n)),h.s=p.s=m.s,d=Nt(p,n,a,1).minus(m).abs().cmp(Nt(h,r,a,1).minus(m).abs())<1?[p,n]:[h,r],g.precision=f,nt=!0,d};_e.toHexadecimal=_e.toHex=function(e,t){return sf(this,16,e,t)};_e.toNearest=function(e,t){var r=this,n=r.constructor;if(r=new n(r),e==null){if(!r.d)return r;e=new n(1),t=n.rounding}else{if(e=new n(e),t===void 0?t=n.rounding:Gr(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(nt=!1,r=Nt(r,e,0,t,1).times(e),nt=!0,Ve(r)):(e.s=r.s,r=e),r};_e.toNumber=function(){return+this};_e.toOctal=function(e,t){return sf(this,8,e,t)};_e.toPower=_e.pow=function(e){var t,r,n,u,a,l,o=this,h=o.constructor,p=+(e=new h(e));if(!o.d||!e.d||!o.d[0]||!e.d[0])return new h(vr(+o,p));if(o=new h(o),o.eq(1))return o;if(n=h.precision,a=h.rounding,e.eq(1))return Ve(o,n,a);if(t=Tr(e.e/Ye),t>=e.d.length-1&&(r=p<0?-p:p)<=iA)return u=Zd(h,o,r,n),e.s<0?new h(1).div(u):Ve(u,n,a);if(l=o.s,l<0){if(t<e.d.length-1)return new h(NaN);if(e.d[t]&1||(l=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=l,o}return r=vr(+o,p),t=r==0||!isFinite(r)?Tr(p*(Math.log("0."+Or(o.d))/Math.LN10+o.e+1)):new h(r+"").e,t>h.maxE+1||t<h.minE-1?new h(t>0?l/0:0):(nt=!1,h.rounding=o.s=1,r=Math.min(12,(t+"").length),u=ql(e.times(bi(o,n+r)),n),u.d&&(u=Ve(u,n+5,1),Qu(u.d,n,a)&&(t=n+10,u=Ve(ql(e.times(bi(o,t+r)),t),t+5,1),+Or(u.d).slice(n+1,n+15)+1==1e14&&(u=Ve(u,n+1,0)))),u.s=l,nt=!0,h.rounding=a,Ve(u,n,a))};_e.toPrecision=function(e,t){var r,n=this,u=n.constructor;return e===void 0?r=zn(n,n.e<=u.toExpNeg||n.e>=u.toExpPos):(Gr(e,1,Bi),t===void 0?t=u.rounding:Gr(t,0,8),n=Ve(new u(n),e,t),r=zn(n,e<=n.e||n.e<=u.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+r:r};_e.toSignificantDigits=_e.toSD=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Gr(e,1,Bi),t===void 0?t=n.rounding:Gr(t,0,8)),Ve(new n(r),e,t)};_e.toString=function(){var e=this,t=e.constructor,r=zn(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};_e.truncated=_e.trunc=function(){return Ve(new this.constructor(this),this.e+1,1)};_e.valueOf=_e.toJSON=function(){var e=this,t=e.constructor,r=zn(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function Or(e){var t,r,n,u=e.length-1,a="",l=e[0];if(u>0){for(a+=l,t=1;t<u;t++)n=e[t]+"",r=Ye-n.length,r&&(a+=Di(r)),a+=n;l=e[t],n=l+"",r=Ye-n.length,r&&(a+=Di(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}function Gr(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Fi+e)}function Qu(e,t,r,n){var u,a,l,o;for(a=e[0];a>=10;a/=10)--t;return--t<0?(t+=Ye,u=0):(u=Math.ceil((t+1)/Ye),t%=Ye),a=vr(10,Ye-t),o=e[u]%a|0,n==null?t<3?(t==0?o=o/100|0:t==1&&(o=o/10|0),l=r<4&&o==99999||r>3&&o==49999||o==5e4||o==0):l=(r<4&&o+1==a||r>3&&o+1==a/2)&&(e[u+1]/a/100|0)==vr(10,t-2)-1||(o==a/2||o==0)&&(e[u+1]/a/100|0)==0:t<4?(t==0?o=o/1e3|0:t==1?o=o/100|0:t==2&&(o=o/10|0),l=(n||r<4)&&o==9999||!n&&r>3&&o==4999):l=((n||r<4)&&o+1==a||!n&&r>3&&o+1==a/2)&&(e[u+1]/a/1e3|0)==vr(10,t-3)-1,l}function $a(e,t,r){for(var n,u=[0],a,l=0,o=e.length;l<o;){for(a=u.length;a--;)u[a]*=t;for(u[0]+=Ul.indexOf(e.charAt(l++)),n=0;n<u.length;n++)u[n]>r-1&&(u[n+1]===void 0&&(u[n+1]=0),u[n+1]+=u[n]/r|0,u[n]%=r)}return u.reverse()}function aA(e,t){var r,n,u;if(t.isZero())return t;n=t.d.length,n<32?(r=Math.ceil(n/3),u=(1/Is(4,r)).toString()):(r=16,u="2.3283064365386962890625e-10"),e.precision+=r,t=gu(e,1,t.times(u),new e(1));for(var a=r;a--;){var l=t.times(t);t=l.times(l).minus(l).times(8).plus(1)}return e.precision-=r,t}var Nt=function(){function e(n,u,a){var l,o=0,h=n.length;for(n=n.slice();h--;)l=n[h]*u+o,n[h]=l%a|0,o=l/a|0;return o&&n.unshift(o),n}function t(n,u,a,l){var o,h;if(a!=l)h=a>l?1:-1;else for(o=h=0;o<a;o++)if(n[o]!=u[o]){h=n[o]>u[o]?1:-1;break}return h}function r(n,u,a,l){for(var o=0;a--;)n[a]-=o,o=n[a]<u[a]?1:0,n[a]=o*l+n[a]-u[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,u,a,l,o,h){var p,f,c,d,m,y,g,_,b,C,w,B,S,O,P,I,N,G,L,q,$=n.constructor,H=n.s==u.s?1:-1,z=n.d,W=u.d;if(!z||!z[0]||!W||!W[0])return new $(!n.s||!u.s||(z?W&&z[0]==W[0]:!W)?NaN:z&&z[0]==0||!W?H*0:H/0);for(h?(m=1,f=n.e-u.e):(h=Mn,m=Ye,f=Tr(n.e/m)-Tr(u.e/m)),L=W.length,N=z.length,b=new $(H),C=b.d=[],c=0;W[c]==(z[c]||0);c++);if(W[c]>(z[c]||0)&&f--,a==null?(O=a=$.precision,l=$.rounding):o?O=a+(n.e-u.e)+1:O=a,O<0)C.push(1),y=!0;else{if(O=O/m+2|0,c=0,L==1){for(d=0,W=W[0],O++;(c<N||d)&&O--;c++)P=d*h+(z[c]||0),C[c]=P/W|0,d=P%W|0;y=d||c<N}else{for(d=h/(W[0]+1)|0,d>1&&(W=e(W,d,h),z=e(z,d,h),L=W.length,N=z.length),I=L,w=z.slice(0,L),B=w.length;B<L;)w[B++]=0;q=W.slice(),q.unshift(0),G=W[0],W[1]>=h/2&&++G;do d=0,p=t(W,w,L,B),p<0?(S=w[0],L!=B&&(S=S*h+(w[1]||0)),d=S/G|0,d>1?(d>=h&&(d=h-1),g=e(W,d,h),_=g.length,B=w.length,p=t(g,w,_,B),p==1&&(d--,r(g,L<_?q:W,_,h))):(d==0&&(p=d=1),g=W.slice()),_=g.length,_<B&&g.unshift(0),r(w,g,B,h),p==-1&&(B=w.length,p=t(W,w,L,B),p<1&&(d++,r(w,L<B?q:W,B,h))),B=w.length):p===0&&(d++,w=[0]),C[c++]=d,p&&w[0]?w[B++]=z[I]||0:(w=[z[I]],B=1);while((I++<N||w[0]!==void 0)&&O--);y=w[0]!==void 0}C[0]||C.shift()}if(m==1)b.e=f,zd=y;else{for(c=1,d=C[0];d>=10;d/=10)c++;b.e=c+f*m-1,Ve(b,o?a+b.e+1:a,l,y)}return b}}();function Ve(e,t,r,n){var u,a,l,o,h,p,f,c,d,m=e.constructor;e:if(t!=null){if(c=e.d,!c)return e;for(u=1,o=c[0];o>=10;o/=10)u++;if(a=t-u,a<0)a+=Ye,l=t,f=c[d=0],h=f/vr(10,u-l-1)%10|0;else if(d=Math.ceil((a+1)/Ye),o=c.length,d>=o)if(n){for(;o++<=d;)c.push(0);f=h=0,u=1,a%=Ye,l=a-Ye+1}else break e;else{for(f=o=c[d],u=1;o>=10;o/=10)u++;a%=Ye,l=a-Ye+u,h=l<0?0:f/vr(10,u-l-1)%10|0}if(n=n||t<0||c[d+1]!==void 0||(l<0?f:f%vr(10,u-l-1)),p=r<4?(h||n)&&(r==0||r==(e.s<0?3:2)):h>5||h==5&&(r==4||n||r==6&&(a>0?l>0?f/vr(10,u-l):0:c[d-1])%10&1||r==(e.s<0?8:7)),t<1||!c[0])return c.length=0,p?(t-=e.e+1,c[0]=vr(10,(Ye-t%Ye)%Ye),e.e=-t||0):c[0]=e.e=0,e;if(a==0?(c.length=d,o=1,d--):(c.length=d+1,o=vr(10,Ye-a),c[d]=l>0?(f/vr(10,u-l)%vr(10,l)|0)*o:0),p)for(;;)if(d==0){for(a=1,l=c[0];l>=10;l/=10)a++;for(l=c[0]+=o,o=1;l>=10;l/=10)o++;a!=o&&(e.e++,c[0]==Mn&&(c[0]=1));break}else{if(c[d]+=o,c[d]!=Mn)break;c[d--]=0,o=1}for(a=c.length;c[--a]===0;)c.pop()}return nt&&(e.e>m.maxE?(e.d=null,e.e=NaN):e.e<m.minE&&(e.e=0,e.d=[0])),e}function zn(e,t,r){if(!e.isFinite())return Xd(e);var n,u=e.e,a=Or(e.d),l=a.length;return t?(r&&(n=r-l)>0?a=a.charAt(0)+"."+a.slice(1)+Di(n):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):u<0?(a="0."+Di(-u-1)+a,r&&(n=r-l)>0&&(a+=Di(n))):u>=l?(a+=Di(u+1-l),r&&(n=r-u-1)>0&&(a=a+"."+Di(n))):((n=u+1)<l&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-l)>0&&(u+1===l&&(a+="."),a+=Di(n))),a}function Ts(e,t){var r=e[0];for(t*=Ye;r>=10;r/=10)t++;return t}function ss(e,t,r){if(t>uA)throw nt=!0,r&&(e.precision=r),Error(Wd);return Ve(new e(us),t,1,!0)}function On(e,t,r){if(t>jl)throw Error(Wd);return Ve(new e(as),t,r,!0)}function Yd(e){var t=e.length-1,r=t*Ye+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function Di(e){for(var t="";e--;)t+="0";return t}function Zd(e,t,r,n){var u,a=new e(1),l=Math.ceil(n/Ye+4);for(nt=!1;;){if(r%2&&(a=a.times(t),Wh(a.d,l)&&(u=!0)),r=Tr(r/2),r===0){r=a.d.length-1,u&&a.d[r]===0&&++a.d[r];break}t=t.times(t),Wh(t.d,l)}return nt=!0,a}function zh(e){return e.d[e.d.length-1]&1}function $d(e,t,r){for(var n,u=new e(t[0]),a=0;++a<t.length;)if(n=new e(t[a]),n.s)u[r](n)&&(u=n);else{u=n;break}return u}function ql(e,t){var r,n,u,a,l,o,h,p=0,f=0,c=0,d=e.constructor,m=d.rounding,y=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(nt=!1,h=y):h=t,o=new d(.03125);e.e>-2;)e=e.times(o),c+=5;for(n=Math.log(vr(2,c))/Math.LN10*2+5|0,h+=n,r=a=l=new d(1),d.precision=h;;){if(a=Ve(a.times(e),h,1),r=r.times(++f),o=l.plus(Nt(a,r,h,1)),Or(o.d).slice(0,h)===Or(l.d).slice(0,h)){for(u=c;u--;)l=Ve(l.times(l),h,1);if(t==null)if(p<3&&Qu(l.d,h-n,m,p))d.precision=h+=10,r=a=o=new d(1),f=0,p++;else return Ve(l,d.precision=y,m,nt=!0);else return d.precision=y,l}l=o}}function bi(e,t){var r,n,u,a,l,o,h,p,f,c,d,m=1,y=10,g=e,_=g.d,b=g.constructor,C=b.rounding,w=b.precision;if(g.s<0||!_||!_[0]||!g.e&&_[0]==1&&_.length==1)return new b(_&&!_[0]?-1/0:g.s!=1?NaN:_?0:g);if(t==null?(nt=!1,f=w):f=t,b.precision=f+=y,r=Or(_),n=r.charAt(0),Math.abs(a=g.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(e),r=Or(g.d),n=r.charAt(0),m++;a=g.e,n>1?(g=new b("0."+r),a++):g=new b(n+"."+r.slice(1))}else return p=ss(b,f+2,w).times(a+""),g=bi(new b(n+"."+r.slice(1)),f-y).plus(p),b.precision=w,t==null?Ve(g,w,C,nt=!0):g;for(c=g,h=l=g=Nt(g.minus(1),g.plus(1),f,1),d=Ve(g.times(g),f,1),u=3;;){if(l=Ve(l.times(d),f,1),p=h.plus(Nt(l,new b(u),f,1)),Or(p.d).slice(0,f)===Or(h.d).slice(0,f))if(h=h.times(2),a!==0&&(h=h.plus(ss(b,f+2,w).times(a+""))),h=Nt(h,new b(m),f,1),t==null)if(Qu(h.d,f-y,C,o))b.precision=f+=y,p=l=g=Nt(c.minus(1),c.plus(1),f,1),d=Ve(g.times(g),f,1),u=o=1;else return Ve(h,b.precision=w,C,nt=!0);else return b.precision=w,h;h=p,u+=2}}function Xd(e){return String(e.s*e.s/0)}function zl(e,t){var r,n,u;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;n++);for(u=t.length;t.charCodeAt(u-1)===48;--u);if(t=t.slice(n,u),t){if(u-=n,e.e=r=r-n-1,e.d=[],n=(r+1)%Ye,r<0&&(n+=Ye),n<u){for(n&&e.d.push(+t.slice(0,n)),u-=Ye;n<u;)e.d.push(+t.slice(n,n+=Ye));t=t.slice(n),n=Ye-t.length}else n-=u;for(;n--;)t+="0";e.d.push(+t),nt&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function sA(e,t){var r,n,u,a,l,o,h,p,f;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Kd.test(t))return zl(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(rA.test(t))r=16,t=t.toLowerCase();else if(tA.test(t))r=2;else if(nA.test(t))r=8;else throw Error(Fi+t);for(a=t.search(/p/i),a>0?(h=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),a=t.indexOf("."),l=a>=0,n=e.constructor,l&&(t=t.replace(".",""),o=t.length,a=o-a,u=Zd(n,new n(r),a,a*2)),p=$a(t,r,Mn),f=p.length-1,a=f;p[a]===0;--a)p.pop();return a<0?new n(e.s*0):(e.e=Ts(p,f),e.d=p,nt=!1,l&&(e=Nt(e,u,o*4)),h&&(e=e.times(Math.abs(h)<54?vr(2,h):mu.pow(2,h))),nt=!0,e)}function oA(e,t){var r,n=t.d.length;if(n<3)return t.isZero()?t:gu(e,2,t,t);r=1.4*Math.sqrt(n),r=r>16?16:r|0,t=t.times(1/Is(5,r)),t=gu(e,2,t,t);for(var u,a=new e(5),l=new e(16),o=new e(20);r--;)u=t.times(t),t=t.times(a.plus(u.times(l.times(u).minus(o))));return t}function gu(e,t,r,n,u){var a,l,o,h,p=e.precision,f=Math.ceil(p/Ye);for(nt=!1,h=r.times(r),o=new e(n);;){if(l=Nt(o.times(h),new e(t++*t++),p,1),o=u?n.plus(l):n.minus(l),n=Nt(l.times(h),new e(t++*t++),p,1),l=o.plus(n),l.d[f]!==void 0){for(a=f;l.d[a]===o.d[a]&&a--;);if(a==-1)break}a=o,o=n,n=l,l=a}return nt=!0,l.d.length=f+1,l}function Is(e,t){for(var r=e;--t;)r*=e;return r}function Jd(e,t){var r,n=t.s<0,u=On(e,e.precision,1),a=u.times(.5);if(t=t.abs(),t.lte(a))return ui=n?4:1,t;if(r=t.divToInt(u),r.isZero())ui=n?3:2;else{if(t=t.minus(r.times(u)),t.lte(a))return ui=zh(r)?n?2:3:n?4:1,t;ui=zh(r)?n?1:4:n?3:2}return t.minus(u).abs()}function sf(e,t,r,n){var u,a,l,o,h,p,f,c,d,m=e.constructor,y=r!==void 0;if(y?(Gr(r,1,Bi),n===void 0?n=m.rounding:Gr(n,0,8)):(r=m.precision,n=m.rounding),!e.isFinite())f=Xd(e);else{for(f=zn(e),l=f.indexOf("."),y?(u=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):u=t,l>=0&&(f=f.replace(".",""),d=new m(1),d.e=f.length-l,d.d=$a(zn(d),10,u),d.e=d.d.length),c=$a(f,10,u),a=h=c.length;c[--h]==0;)c.pop();if(!c[0])f=y?"0p+0":"0";else{if(l<0?a--:(e=new m(e),e.d=c,e.e=a,e=Nt(e,d,r,n,0,u),c=e.d,a=e.e,p=zd),l=c[r],o=u/2,p=p||c[r+1]!==void 0,p=n<4?(l!==void 0||p)&&(n===0||n===(e.s<0?3:2)):l>o||l===o&&(n===4||p||n===6&&c[r-1]&1||n===(e.s<0?8:7)),c.length=r,p)for(;++c[--r]>u-1;)c[r]=0,r||(++a,c.unshift(1));for(h=c.length;!c[h-1];--h);for(l=0,f="";l<h;l++)f+=Ul.charAt(c[l]);if(y){if(h>1)if(t==16||t==8){for(l=t==16?4:3,--h;h%l;h++)f+="0";for(c=$a(f,u,t),h=c.length;!c[h-1];--h);for(l=1,f="1.";l<h;l++)f+=Ul.charAt(c[l])}else f=f.charAt(0)+"."+f.slice(1);f=f+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)f="0"+f;f="0."+f}else if(++a>h)for(a-=h;a--;)f+="0";else a<h&&(f=f.slice(0,a)+"."+f.slice(a))}f=(t==16?"0x":t==2?"0b":t==8?"0o":"")+f}return e.s<0?"-"+f:f}function Wh(e,t){if(e.length>t)return e.length=t,!0}function lA(e){return new this(e).abs()}function fA(e){return new this(e).acos()}function cA(e){return new this(e).acosh()}function hA(e,t){return new this(e).plus(t)}function dA(e){return new this(e).asin()}function pA(e){return new this(e).asinh()}function vA(e){return new this(e).atan()}function gA(e){return new this(e).atanh()}function mA(e,t){e=new this(e),t=new this(t);var r,n=this.precision,u=this.rounding,a=n+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=On(this,a,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?On(this,n,u):new this(0),r.s=e.s):!e.d||t.isZero()?(r=On(this,a,1).times(.5),r.s=e.s):t.s<0?(this.precision=a,this.rounding=1,r=this.atan(Nt(e,t,a,1)),t=On(this,a,1),this.precision=n,this.rounding=u,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(Nt(e,t,a,1)),r}function _A(e){return new this(e).cbrt()}function DA(e){return Ve(e=new this(e),e.e+1,2)}function bA(e,t,r){return new this(e).clamp(t,r)}function yA(e){if(!e||typeof e!="object")throw Error(xs+"Object expected");var t,r,n,u=e.defaults===!0,a=["precision",1,Bi,"rounding",0,8,"toExpNeg",-hu,0,"toExpPos",0,hu,"maxE",0,hu,"minE",-hu,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(r=a[t],u&&(this[r]=Vl[r]),(n=e[r])!==void 0)if(Tr(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Fi+r+": "+n);if(r="crypto",u&&(this[r]=Vl[r]),(n=e[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Hd);else this[r]=!1;else throw Error(Fi+r+": "+n);return this}function AA(e){return new this(e).cos()}function wA(e){return new this(e).cosh()}function Qd(e){var t,r,n;function u(a){var l,o,h,p=this;if(!(p instanceof u))return new u(a);if(p.constructor=u,Hh(a)){p.s=a.s,nt?!a.d||a.e>u.maxE?(p.e=NaN,p.d=null):a.e<u.minE?(p.e=0,p.d=[0]):(p.e=a.e,p.d=a.d.slice()):(p.e=a.e,p.d=a.d?a.d.slice():a.d);return}if(h=typeof a,h==="number"){if(a===0){p.s=1/a<0?-1:1,p.e=0,p.d=[0];return}if(a<0?(a=-a,p.s=-1):p.s=1,a===~~a&&a<1e7){for(l=0,o=a;o>=10;o/=10)l++;nt?l>u.maxE?(p.e=NaN,p.d=null):l<u.minE?(p.e=0,p.d=[0]):(p.e=l,p.d=[a]):(p.e=l,p.d=[a]);return}else if(a*0!==0){a||(p.s=NaN),p.e=NaN,p.d=null;return}return zl(p,a.toString())}else if(h!=="string")throw Error(Fi+a);return(o=a.charCodeAt(0))===45?(a=a.slice(1),p.s=-1):(o===43&&(a=a.slice(1)),p.s=1),Kd.test(a)?zl(p,a):sA(p,a)}if(u.prototype=_e,u.ROUND_UP=0,u.ROUND_DOWN=1,u.ROUND_CEIL=2,u.ROUND_FLOOR=3,u.ROUND_HALF_UP=4,u.ROUND_HALF_DOWN=5,u.ROUND_HALF_EVEN=6,u.ROUND_HALF_CEIL=7,u.ROUND_HALF_FLOOR=8,u.EUCLID=9,u.config=u.set=yA,u.clone=Qd,u.isDecimal=Hh,u.abs=lA,u.acos=fA,u.acosh=cA,u.add=hA,u.asin=dA,u.asinh=pA,u.atan=vA,u.atanh=gA,u.atan2=mA,u.cbrt=_A,u.ceil=DA,u.clamp=bA,u.cos=AA,u.cosh=wA,u.div=EA,u.exp=CA,u.floor=FA,u.hypot=SA,u.ln=BA,u.log=OA,u.log10=PA,u.log2=MA,u.max=xA,u.min=TA,u.mod=IA,u.mul=NA,u.pow=kA,u.random=RA,u.round=LA,u.sign=UA,u.sin=VA,u.sinh=jA,u.sqrt=qA,u.sub=zA,u.sum=WA,u.tan=HA,u.tanh=GA,u.trunc=KA,e===void 0&&(e={}),e&&e.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return u.config(e),u}function EA(e,t){return new this(e).div(t)}function CA(e){return new this(e).exp()}function FA(e){return Ve(e=new this(e),e.e+1,3)}function SA(){var e,t,r=new this(0);for(nt=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return nt=!0,new this(1/0);r=t}return nt=!0,r.sqrt()}function Hh(e){return e instanceof mu||e&&e.toStringTag===Gd||!1}function BA(e){return new this(e).ln()}function OA(e,t){return new this(e).log(t)}function MA(e){return new this(e).log(2)}function PA(e){return new this(e).log(10)}function xA(){return $d(this,arguments,"lt")}function TA(){return $d(this,arguments,"gt")}function IA(e,t){return new this(e).mod(t)}function NA(e,t){return new this(e).mul(t)}function kA(e,t){return new this(e).pow(t)}function RA(e){var t,r,n,u,a=0,l=new this(1),o=[];if(e===void 0?e=this.precision:Gr(e,1,Bi),n=Math.ceil(e/Ye),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));a<n;)u=t[a],u>=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=u%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(n*=4);a<n;)u=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((t[a+3]&127)<<24),u>=214e7?crypto.randomBytes(4).copy(t,a):(o.push(u%1e7),a+=4);a=n/4}else throw Error(Hd);else for(;a<n;)o[a++]=Math.random()*1e7|0;for(n=o[--a],e%=Ye,n&&e&&(u=vr(10,Ye-e),o[a]=(n/u|0)*u);o[a]===0;a--)o.pop();if(a<0)r=0,o=[0];else{for(r=-1;o[0]===0;r-=Ye)o.shift();for(n=1,u=o[0];u>=10;u/=10)n++;n<Ye&&(r-=Ye-n)}return l.e=r,l.d=o,l}function LA(e){return Ve(e=new this(e),e.e+1,this.rounding)}function UA(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function VA(e){return new this(e).sin()}function jA(e){return new this(e).sinh()}function qA(e){return new this(e).sqrt()}function zA(e,t){return new this(e).sub(t)}function WA(){var e=0,t=arguments,r=new this(t[e]);for(nt=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return nt=!0,Ve(r,this.precision,this.rounding)}function HA(e){return new this(e).tan()}function GA(e){return new this(e).tanh()}function KA(e){return Ve(e=new this(e),e.e+1,1)}_e[Symbol.for("nodejs.util.inspect.custom")]=_e.toString;_e[Symbol.toStringTag]="Decimal";var mu=_e.constructor=Qd(Vl);us=new mu(us);as=new mu(as);var YA="BigNumber",ZA=["?on","config"],$A=xt(YA,ZA,e=>{var{on:t,config:r}=e,n=mu.clone({precision:r.precision,modulo:mu.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(u){return new n(u.value)},t&&t("config",function(u,a){u.precision!==a.precision&&n.config({precision:u.precision})}),n},{isClass:!0}),cr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function of(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wl={},XA={get exports(){return Wl},set exports(e){Wl=e}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,t){(function(r){var n=Math.cosh||function(c){return Math.abs(c)<1e-9?1-c:(Math.exp(c)+Math.exp(-c))*.5},u=Math.sinh||function(c){return Math.abs(c)<1e-9?c:(Math.exp(c)-Math.exp(-c))*.5},a=function(c){var d=Math.PI/4;if(-d>c||c>d)return Math.cos(c)-1;var m=c*c;return m*(m*(m*(m*(m*(m*(m*(m/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},l=function(c,d){var m=Math.abs(c),y=Math.abs(d);return m<3e3&&y<3e3?Math.sqrt(m*m+y*y):(m<y?(m=y,y=c/d):y=d/c,m*Math.sqrt(1+y*y))},o=function(){throw SyntaxError("Invalid Param")};function h(c,d){var m=Math.abs(c),y=Math.abs(d);return c===0?Math.log(y):d===0?Math.log(m):m<3e3&&y<3e3?Math.log(c*c+d*d)*.5:(c=c/2,d=d/2,.5*Math.log(c*c+d*d)+Math.LN2)}var p=function(c,d){var m={re:0,im:0};if(c==null)m.re=m.im=0;else if(d!==void 0)m.re=c,m.im=d;else switch(typeof c){case"object":if("im"in c&&"re"in c)m.re=c.re,m.im=c.im;else if("abs"in c&&"arg"in c){if(!Number.isFinite(c.abs)&&Number.isFinite(c.arg))return f.INFINITY;m.re=c.abs*Math.cos(c.arg),m.im=c.abs*Math.sin(c.arg)}else if("r"in c&&"phi"in c){if(!Number.isFinite(c.r)&&Number.isFinite(c.phi))return f.INFINITY;m.re=c.r*Math.cos(c.phi),m.im=c.r*Math.sin(c.phi)}else c.length===2?(m.re=c[0],m.im=c[1]):o();break;case"string":m.im=m.re=0;var y=c.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),g=1,_=0;y===null&&o();for(var b=0;b<y.length;b++){var C=y[b];C===" "||C==="	"||C===`
`||(C==="+"?g++:C==="-"?_++:C==="i"||C==="I"?(g+_===0&&o(),y[b+1]!==" "&&!isNaN(y[b+1])?(m.im+=parseFloat((_%2?"-":"")+y[b+1]),b++):m.im+=parseFloat((_%2?"-":"")+"1"),g=_=0):((g+_===0||isNaN(C))&&o(),y[b+1]==="i"||y[b+1]==="I"?(m.im+=parseFloat((_%2?"-":"")+C),b++):m.re+=parseFloat((_%2?"-":"")+C),g=_=0))}g+_>0&&o();break;case"number":m.im=0,m.re=c;break;default:o()}return isNaN(m.re)||isNaN(m.im),m};function f(c,d){if(!(this instanceof f))return new f(c,d);var m=p(c,d);this.re=m.re,this.im=m.im}f.prototype={re:0,im:0,sign:function(){var c=this.abs();return new f(this.re/c,this.im/c)},add:function(c,d){var m=new f(c,d);return this.isInfinite()&&m.isInfinite()?f.NAN:this.isInfinite()||m.isInfinite()?f.INFINITY:new f(this.re+m.re,this.im+m.im)},sub:function(c,d){var m=new f(c,d);return this.isInfinite()&&m.isInfinite()?f.NAN:this.isInfinite()||m.isInfinite()?f.INFINITY:new f(this.re-m.re,this.im-m.im)},mul:function(c,d){var m=new f(c,d);return this.isInfinite()&&m.isZero()||this.isZero()&&m.isInfinite()?f.NAN:this.isInfinite()||m.isInfinite()?f.INFINITY:m.im===0&&this.im===0?new f(this.re*m.re,0):new f(this.re*m.re-this.im*m.im,this.re*m.im+this.im*m.re)},div:function(c,d){var m=new f(c,d);if(this.isZero()&&m.isZero()||this.isInfinite()&&m.isInfinite())return f.NAN;if(this.isInfinite()||m.isZero())return f.INFINITY;if(this.isZero()||m.isInfinite())return f.ZERO;c=this.re,d=this.im;var y=m.re,g=m.im,_,b;return g===0?new f(c/y,d/y):Math.abs(y)<Math.abs(g)?(b=y/g,_=y*b+g,new f((c*b+d)/_,(d*b-c)/_)):(b=g/y,_=g*b+y,new f((c+d*b)/_,(d-c*b)/_))},pow:function(c,d){var m=new f(c,d);if(c=this.re,d=this.im,m.isZero())return f.ONE;if(m.im===0){if(d===0&&c>0)return new f(Math.pow(c,m.re),0);if(c===0)switch((m.re%4+4)%4){case 0:return new f(Math.pow(d,m.re),0);case 1:return new f(0,Math.pow(d,m.re));case 2:return new f(-Math.pow(d,m.re),0);case 3:return new f(0,-Math.pow(d,m.re))}}if(c===0&&d===0&&m.re>0&&m.im>=0)return f.ZERO;var y=Math.atan2(d,c),g=h(c,d);return c=Math.exp(m.re*g-m.im*y),d=m.im*g+m.re*y,new f(c*Math.cos(d),c*Math.sin(d))},sqrt:function(){var c=this.re,d=this.im,m=this.abs(),y,g;if(c>=0){if(d===0)return new f(Math.sqrt(c),0);y=.5*Math.sqrt(2*(m+c))}else y=Math.abs(d)/Math.sqrt(2*(m-c));return c<=0?g=.5*Math.sqrt(2*(m-c)):g=Math.abs(d)/Math.sqrt(2*(m+c)),new f(y,d<0?-g:g)},exp:function(){var c=Math.exp(this.re);return this.im,new f(c*Math.cos(this.im),c*Math.sin(this.im))},expm1:function(){var c=this.re,d=this.im;return new f(Math.expm1(c)*Math.cos(d)+a(d),Math.exp(c)*Math.sin(d))},log:function(){var c=this.re,d=this.im;return new f(h(c,d),Math.atan2(d,c))},abs:function(){return l(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var c=this.re,d=this.im;return new f(Math.sin(c)*n(d),Math.cos(c)*u(d))},cos:function(){var c=this.re,d=this.im;return new f(Math.cos(c)*n(d),-Math.sin(c)*u(d))},tan:function(){var c=2*this.re,d=2*this.im,m=Math.cos(c)+n(d);return new f(Math.sin(c)/m,u(d)/m)},cot:function(){var c=2*this.re,d=2*this.im,m=Math.cos(c)-n(d);return new f(-Math.sin(c)/m,u(d)/m)},sec:function(){var c=this.re,d=this.im,m=.5*n(2*d)+.5*Math.cos(2*c);return new f(Math.cos(c)*n(d)/m,Math.sin(c)*u(d)/m)},csc:function(){var c=this.re,d=this.im,m=.5*n(2*d)-.5*Math.cos(2*c);return new f(Math.sin(c)*n(d)/m,-Math.cos(c)*u(d)/m)},asin:function(){var c=this.re,d=this.im,m=new f(d*d-c*c+1,-2*c*d).sqrt(),y=new f(m.re-d,m.im+c).log();return new f(y.im,-y.re)},acos:function(){var c=this.re,d=this.im,m=new f(d*d-c*c+1,-2*c*d).sqrt(),y=new f(m.re-d,m.im+c).log();return new f(Math.PI/2-y.im,y.re)},atan:function(){var c=this.re,d=this.im;if(c===0){if(d===1)return new f(0,1/0);if(d===-1)return new f(0,-1/0)}var m=c*c+(1-d)*(1-d),y=new f((1-d*d-c*c)/m,-2*c/m).log();return new f(-.5*y.im,.5*y.re)},acot:function(){var c=this.re,d=this.im;if(d===0)return new f(Math.atan2(1,c),0);var m=c*c+d*d;return m!==0?new f(c/m,-d/m).atan():new f(c!==0?c/0:0,d!==0?-d/0:0).atan()},asec:function(){var c=this.re,d=this.im;if(c===0&&d===0)return new f(0,1/0);var m=c*c+d*d;return m!==0?new f(c/m,-d/m).acos():new f(c!==0?c/0:0,d!==0?-d/0:0).acos()},acsc:function(){var c=this.re,d=this.im;if(c===0&&d===0)return new f(Math.PI/2,1/0);var m=c*c+d*d;return m!==0?new f(c/m,-d/m).asin():new f(c!==0?c/0:0,d!==0?-d/0:0).asin()},sinh:function(){var c=this.re,d=this.im;return new f(u(c)*Math.cos(d),n(c)*Math.sin(d))},cosh:function(){var c=this.re,d=this.im;return new f(n(c)*Math.cos(d),u(c)*Math.sin(d))},tanh:function(){var c=2*this.re,d=2*this.im,m=n(c)+Math.cos(d);return new f(u(c)/m,Math.sin(d)/m)},coth:function(){var c=2*this.re,d=2*this.im,m=n(c)-Math.cos(d);return new f(u(c)/m,-Math.sin(d)/m)},csch:function(){var c=this.re,d=this.im,m=Math.cos(2*d)-n(2*c);return new f(-2*u(c)*Math.cos(d)/m,2*n(c)*Math.sin(d)/m)},sech:function(){var c=this.re,d=this.im,m=Math.cos(2*d)+n(2*c);return new f(2*n(c)*Math.cos(d)/m,-2*u(c)*Math.sin(d)/m)},asinh:function(){var c=this.im;this.im=-this.re,this.re=c;var d=this.asin();return this.re=-this.im,this.im=c,c=d.re,d.re=-d.im,d.im=c,d},acosh:function(){var c=this.acos();if(c.im<=0){var d=c.re;c.re=-c.im,c.im=d}else{var d=c.im;c.im=-c.re,c.re=d}return c},atanh:function(){var c=this.re,d=this.im,m=c>1&&d===0,y=1-c,g=1+c,_=y*y+d*d,b=_!==0?new f((g*y-d*d)/_,(d*y+g*d)/_):new f(c!==-1?c/0:0,d!==0?d/0:0),C=b.re;return b.re=h(b.re,b.im)/2,b.im=Math.atan2(b.im,C)/2,m&&(b.im=-b.im),b},acoth:function(){var c=this.re,d=this.im;if(c===0&&d===0)return new f(0,Math.PI/2);var m=c*c+d*d;return m!==0?new f(c/m,-d/m).atanh():new f(c!==0?c/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var c=this.re,d=this.im;if(d===0)return new f(c!==0?Math.log(c+Math.sqrt(c*c+1)):1/0,0);var m=c*c+d*d;return m!==0?new f(c/m,-d/m).asinh():new f(c!==0?c/0:0,d!==0?-d/0:0).asinh()},asech:function(){var c=this.re,d=this.im;if(this.isZero())return f.INFINITY;var m=c*c+d*d;return m!==0?new f(c/m,-d/m).acosh():new f(c!==0?c/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return f.INFINITY;if(this.isInfinite())return f.ZERO;var c=this.re,d=this.im,m=c*c+d*d;return new f(c/m,-d/m)},conjugate:function(){return new f(this.re,-this.im)},neg:function(){return new f(-this.re,-this.im)},ceil:function(c){return c=Math.pow(10,c||0),new f(Math.ceil(this.re*c)/c,Math.ceil(this.im*c)/c)},floor:function(c){return c=Math.pow(10,c||0),new f(Math.floor(this.re*c)/c,Math.floor(this.im*c)/c)},round:function(c){return c=Math.pow(10,c||0),new f(Math.round(this.re*c)/c,Math.round(this.im*c)/c)},equals:function(c,d){var m=new f(c,d);return Math.abs(m.re-this.re)<=f.EPSILON&&Math.abs(m.im-this.im)<=f.EPSILON},clone:function(){return new f(this.re,this.im)},toString:function(){var c=this.re,d=this.im,m="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(c)<f.EPSILON&&(c=0),Math.abs(d)<f.EPSILON&&(d=0),d===0?m+c:(c!==0?(m+=c,m+=" ",d<0?(d=-d,m+="-"):m+="+",m+=" "):d<0&&(d=-d,m+="-"),d!==1&&(m+=d),m+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},f.ZERO=new f(0,0),f.ONE=new f(1,0),f.I=new f(0,1),f.PI=new f(Math.PI,0),f.E=new f(Math.E,0),f.INFINITY=new f(1/0,1/0),f.NAN=new f(NaN,NaN),f.EPSILON=1e-15,Object.defineProperty(f,"__esModule",{value:!0}),f.default=f,f.Complex=f,e.exports=f})()})(XA);const Fr=of(Wl);var JA="Complex",QA=[],ew=xt(JA,QA,()=>(Object.defineProperty(Fr,"name",{value:"Complex"}),Fr.prototype.constructor=Fr,Fr.prototype.type="Complex",Fr.prototype.isComplex=!0,Fr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Fr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Fr.prototype.format=function(e){var t="",r=this.im,n=this.re,u=Rl(this.re,e),a=Rl(this.im,e),l=er(e)?e:e?e.precision:null;if(l!==null){var o=Math.pow(10,-l);Math.abs(n/r)<o&&(n=0),Math.abs(r/n)<o&&(r=0)}return r===0?t=u:n===0?r===1?t="i":r===-1?t="-i":t=a+"i":r<0?r===-1?t=u+" - i":t=u+" - "+a.substring(1)+"i":r===1?t=u+" + i":t=u+" + "+a+"i",t},Fr.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return Fr(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(er(r)){if(Pd(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),er(n))return new Fr({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Fr.prototype.valueOf=Fr.prototype.toString,Fr.fromJSON=function(e){return new Fr(e)},Fr.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},Fr),{isClass:!0}),Hl={},tw={get exports(){return Hl},set exports(e){Hl=e}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,t){(function(r){var n=2e3,u={s:1,n:0,d:1};function a(y,g){if(isNaN(y=parseInt(y,10)))throw m.InvalidParameter;return y*g}function l(y,g){if(g===0)throw m.DivisionByZero;var _=Object.create(m.prototype);_.s=y<0?-1:1,y=y<0?-y:y;var b=d(y,g);return _.n=y/b,_.d=g/b,_}function o(y){for(var g={},_=y,b=2,C=4;C<=_;){for(;_%b===0;)_/=b,g[b]=(g[b]||0)+1;C+=1+2*b++}return _!==y?_>1&&(g[_]=(g[_]||0)+1):g[y]=(g[y]||0)+1,g}var h=function(y,g){var _=0,b=1,C=1,w=0,B=0,S=0,O=1,P=1,I=0,N=1,G=1,L=1,q=1e7,$;if(y!=null)if(g!==void 0){if(_=y,b=g,C=_*b,_%1!==0||b%1!==0)throw m.NonIntegerParameter}else switch(typeof y){case"object":{if("d"in y&&"n"in y)_=y.n,b=y.d,"s"in y&&(_*=y.s);else if(0 in y)_=y[0],1 in y&&(b=y[1]);else throw m.InvalidParameter;C=_*b;break}case"number":{if(y<0&&(C=y,y=-y),y%1===0)_=y;else if(y>0){for(y>=1&&(P=Math.pow(10,Math.floor(1+Math.log(y)/Math.LN10)),y/=P);N<=q&&L<=q;)if($=(I+G)/(N+L),y===$){N+L<=q?(_=I+G,b=N+L):L>N?(_=G,b=L):(_=I,b=N);break}else y>$?(I+=G,N+=L):(G+=I,L+=N),N>q?(_=G,b=L):(_=I,b=N);_*=P}else(isNaN(y)||isNaN(g))&&(b=_=NaN);break}case"string":{if(N=y.match(/\d+|./g),N===null)throw m.InvalidParameter;if(N[I]==="-"?(C=-1,I++):N[I]==="+"&&I++,N.length===I+1?B=a(N[I++],C):N[I+1]==="."||N[I]==="."?(N[I]!=="."&&(w=a(N[I++],C)),I++,(I+1===N.length||N[I+1]==="("&&N[I+3]===")"||N[I+1]==="'"&&N[I+3]==="'")&&(B=a(N[I],C),O=Math.pow(10,N[I].length),I++),(N[I]==="("&&N[I+2]===")"||N[I]==="'"&&N[I+2]==="'")&&(S=a(N[I+1],C),P=Math.pow(10,N[I+1].length)-1,I+=3)):N[I+1]==="/"||N[I+1]===":"?(B=a(N[I],C),O=a(N[I+2],1),I+=3):N[I+3]==="/"&&N[I+1]===" "&&(w=a(N[I],C),B=a(N[I+2],C),O=a(N[I+4],1),I+=5),N.length<=I){b=O*P,C=_=S+b*w+P*B;break}}default:throw m.InvalidParameter}if(b===0)throw m.DivisionByZero;u.s=C<0?-1:1,u.n=Math.abs(_),u.d=Math.abs(b)};function p(y,g,_){for(var b=1;g>0;y=y*y%_,g>>=1)g&1&&(b=b*y%_);return b}function f(y,g){for(;g%2===0;g/=2);for(;g%5===0;g/=5);if(g===1)return 0;for(var _=10%g,b=1;_!==1;b++)if(_=_*10%g,b>n)return 0;return b}function c(y,g,_){for(var b=1,C=p(10,_,g),w=0;w<300;w++){if(b===C)return w;b=b*10%g,C=C*10%g}return 0}function d(y,g){if(!y)return g;if(!g)return y;for(;;){if(y%=g,!y)return g;if(g%=y,!g)return y}}function m(y,g){if(h(y,g),this instanceof m)y=d(u.d,u.n),this.s=u.s,this.n=u.n/y,this.d=u.d/y;else return l(u.s*u.n,u.d)}m.DivisionByZero=new Error("Division by Zero"),m.InvalidParameter=new Error("Invalid argument"),m.NonIntegerParameter=new Error("Parameters must be integer"),m.prototype={s:1,n:0,d:1,abs:function(){return l(this.n,this.d)},neg:function(){return l(-this.s*this.n,this.d)},add:function(y,g){return h(y,g),l(this.s*this.n*u.d+u.s*this.d*u.n,this.d*u.d)},sub:function(y,g){return h(y,g),l(this.s*this.n*u.d-u.s*this.d*u.n,this.d*u.d)},mul:function(y,g){return h(y,g),l(this.s*u.s*this.n*u.n,this.d*u.d)},div:function(y,g){return h(y,g),l(this.s*u.s*this.n*u.d,this.d*u.n)},clone:function(){return l(this.s*this.n,this.d)},mod:function(y,g){if(isNaN(this.n)||isNaN(this.d))return new m(NaN);if(y===void 0)return l(this.s*this.n%this.d,1);if(h(y,g),u.n===0&&this.d===0)throw m.DivisionByZero;return l(this.s*(u.d*this.n)%(u.n*this.d),u.d*this.d)},gcd:function(y,g){return h(y,g),l(d(u.n,this.n)*d(u.d,this.d),u.d*this.d)},lcm:function(y,g){return h(y,g),u.n===0&&this.n===0?l(0,1):l(u.n*this.n,d(u.n,this.n)*d(u.d,this.d))},ceil:function(y){return y=Math.pow(10,y||0),isNaN(this.n)||isNaN(this.d)?new m(NaN):l(Math.ceil(y*this.s*this.n/this.d),y)},floor:function(y){return y=Math.pow(10,y||0),isNaN(this.n)||isNaN(this.d)?new m(NaN):l(Math.floor(y*this.s*this.n/this.d),y)},round:function(y){return y=Math.pow(10,y||0),isNaN(this.n)||isNaN(this.d)?new m(NaN):l(Math.round(y*this.s*this.n/this.d),y)},inverse:function(){return l(this.s*this.d,this.n)},pow:function(y,g){if(h(y,g),u.d===1)return u.s<0?l(Math.pow(this.s*this.d,u.n),Math.pow(this.n,u.n)):l(Math.pow(this.s*this.n,u.n),Math.pow(this.d,u.n));if(this.s<0)return null;var _=o(this.n),b=o(this.d),C=1,w=1;for(var B in _)if(B!=="1"){if(B==="0"){C=0;break}if(_[B]*=u.n,_[B]%u.d===0)_[B]/=u.d;else return null;C*=Math.pow(B,_[B])}for(var B in b)if(B!=="1"){if(b[B]*=u.n,b[B]%u.d===0)b[B]/=u.d;else return null;w*=Math.pow(B,b[B])}return u.s<0?l(w,C):l(C,w)},equals:function(y,g){return h(y,g),this.s*this.n*u.d===u.s*u.n*this.d},compare:function(y,g){h(y,g);var _=this.s*this.n*u.d-u.s*u.n*this.d;return(0<_)-(_<0)},simplify:function(y){if(isNaN(this.n)||isNaN(this.d))return this;y=y||.001;for(var g=this.abs(),_=g.toContinued(),b=1;b<_.length;b++){for(var C=l(_[b-1],1),w=b-2;w>=0;w--)C=C.inverse().add(_[w]);if(C.sub(g).abs().valueOf()<y)return C.mul(this.s)}return this},divisible:function(y,g){return h(y,g),!(!(u.n*this.d)||this.n*u.d%(u.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(y){var g,_="",b=this.n,C=this.d;return this.s<0&&(_+="-"),C===1?_+=b:(y&&(g=Math.floor(b/C))>0&&(_+=g,_+=" ",b%=C),_+=b,_+="/",_+=C),_},toLatex:function(y){var g,_="",b=this.n,C=this.d;return this.s<0&&(_+="-"),C===1?_+=b:(y&&(g=Math.floor(b/C))>0&&(_+=g,b%=C),_+="\\frac{",_+=b,_+="}{",_+=C,_+="}"),_},toContinued:function(){var y,g=this.n,_=this.d,b=[];if(isNaN(g)||isNaN(_))return b;do b.push(Math.floor(g/_)),y=g%_,g=_,_=y;while(g!==1);return b},toString:function(y){var g=this.n,_=this.d;if(isNaN(g)||isNaN(_))return"NaN";y=y||15;var b=f(g,_),C=c(g,_,b),w=this.s<0?"-":"";if(w+=g/_|0,g%=_,g*=10,g&&(w+="."),b){for(var B=C;B--;)w+=g/_|0,g%=_,g*=10;w+="(";for(var B=b;B--;)w+=g/_|0,g%=_,g*=10;w+=")"}else for(var B=y;g&&B--;)w+=g/_|0,g%=_,g*=10;return w}},Object.defineProperty(m,"__esModule",{value:!0}),m.default=m,m.Fraction=m,e.exports=m})()})(tw);const ii=of(Hl);var rw="Fraction",nw=[],iw=xt(rw,nw,()=>(Object.defineProperty(ii,"name",{value:"Fraction"}),ii.prototype.constructor=ii,ii.prototype.type="Fraction",ii.prototype.isFraction=!0,ii.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},ii.fromJSON=function(e){return new ii(e)},ii),{isClass:!0}),uw="Matrix",aw=[],sw=xt(uw,aw,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,r){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,r,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,r){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,r){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,r){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function ep(e){return Object.keys(e.signatures||{}).reduce(function(t,r){var n=(r.match(/,/g)||[]).length+1;return Math.max(t,n)},-1)}var ow="DenseMatrix",lw=["Matrix"],fw=xt(ow,lw,e=>{var{Matrix:t}=e;function r(f,c){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(c&&!jn(c))throw new Error("Invalid datatype: "+c);if(Lr(f))f.type==="DenseMatrix"?(this._data=yr(f._data),this._size=yr(f._size),this._datatype=c||f._datatype):(this._data=f.toArray(),this._size=f.size(),this._datatype=c||f._datatype);else if(f&&Xt(f.data)&&Xt(f.size))this._data=f.data,this._size=f.size,jh(this._data,this._size),this._datatype=c||f.datatype;else if(Xt(f))this._data=p(f),this._size=Ci(this._data),jh(this._data,this._size),this._datatype=c;else{if(f)throw new TypeError("Unsupported type of data ("+Xu(f)+")");this._data=[],this._size=[0],this._datatype=c}}r.prototype=new t,r.prototype.createDenseMatrix=function(f,c){return new r(f,c)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return is(this._data,Xu)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(f,c){return new r(f,c)},r.prototype.subset=function(f,c,d){switch(arguments.length){case 1:return n(this,f);case 2:case 3:return a(this,f,c,d);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(f){if(!Xt(f))throw new TypeError("Array expected");if(f.length!==this._size.length)throw new Mt(f.length,this._size.length);for(var c=0;c<f.length;c++)Jt(f[c],this._size[c]);for(var d=this._data,m=0,y=f.length;m<y;m++){var g=f[m];Jt(g,d.length),d=d[g]}return d},r.prototype.set=function(f,c,d){if(!Xt(f))throw new TypeError("Array expected");if(f.length<this._size.length)throw new Mt(f.length,this._size.length,"<");var m,y,g,_=f.map(function(C){return C+1});h(this,_,d);var b=this._data;for(m=0,y=f.length-1;m<y;m++)g=f[m],Jt(g,b.length),b=b[g];return g=f[f.length-1],Jt(g,b.length),b[g]=c,this};function n(f,c){if(!uf(c))throw new TypeError("Invalid index");var d=c.isScalar();if(d)return f.get(c.min());var m=c.size();if(m.length!==f._size.length)throw new Mt(m.length,f._size.length);for(var y=c.min(),g=c.max(),_=0,b=f._size.length;_<b;_++)Jt(y[_],f._size[_]),Jt(g[_],f._size[_]);return new r(u(f._data,c,m.length,0),f._datatype)}function u(f,c,d,m){var y=m===d-1,g=c.dimension(m);return y?g.map(function(_){return Jt(_,f.length),f[_]}).valueOf():g.map(function(_){Jt(_,f.length);var b=f[_];return u(b,c,d,m+1)}).valueOf()}function a(f,c,d,m){if(!c||c.isIndex!==!0)throw new TypeError("Invalid index");var y=c.size(),g=c.isScalar(),_;if(Lr(d)?(_=d.size(),d=d.valueOf()):_=Ci(d),g){if(_.length!==0)throw new TypeError("Scalar expected");f.set(c.min(),d,m)}else{if(y.length<f._size.length)throw new Mt(y.length,f._size.length,"<");if(_.length<y.length){for(var b=0,C=0;y[b]===1&&_[b]===1;)b++;for(;y[b]===1;)C++,b++;d=Ld(d,y.length,C,_)}if(!rs(y,_))throw new Mt(y,_,">");var w=c.max().map(function(O){return O+1});h(f,w,m);var B=y.length,S=0;l(f._data,c,d,B,S)}return f}function l(f,c,d,m,y){var g=y===m-1,_=c.dimension(y);g?_.forEach(function(b,C){Jt(b),f[b]=d[C[0]]}):_.forEach(function(b,C){Jt(b),l(f[b],c,d[C[0]],m,y+1)})}r.prototype.resize=function(f,c,d){if(!ts(f))throw new TypeError("Array or Matrix expected");var m=f.valueOf().map(g=>Array.isArray(g)&&g.length===1?g[0]:g),y=d?this.clone():this;return o(y,m,c)};function o(f,c,d){if(c.length===0){for(var m=f._data;Xt(m);)m=m[0];return m}return f._size=c.slice(0),f._data=qh(f._data,f._size,d),f}r.prototype.reshape=function(f,c){var d=c?this.clone():this;d._data=Ly(d._data,f);var m=d._size.reduce((y,g)=>y*g);return d._size=af(f,m),d};function h(f,c,d){for(var m=f._size.slice(0),y=!1;m.length<c.length;)m.push(0),y=!0;for(var g=0,_=c.length;g<_;g++)c[g]>m[g]&&(m[g]=c[g],y=!0);y&&o(f,m,d)}r.prototype.clone=function(){var f=new r({data:yr(this._data),size:yr(this._size),datatype:this._datatype});return f},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(f){var c=this,d=ep(f),m=function _(b,C){return Xt(b)?b.map(function(w,B){return _(w,C.concat(B))}):d===1?f(b):d===2?f(b,C):f(b,C,c)},y=m(this._data,[]),g=this._datatype!==void 0?is(y,Xu):void 0;return new r(y,g)},r.prototype.forEach=function(f){var c=this,d=function m(y,g){Xt(y)?y.forEach(function(_,b){m(_,g.concat(b))}):f(y,g,c)};d(this._data,[])},r.prototype[Symbol.iterator]=function*(){var f=function*c(d,m){if(Xt(d))for(var y=0;y<d.length;y++)yield*c(d[y],m.concat(y));else yield{value:d,index:m}};yield*f(this._data,[])},r.prototype.rows=function(){var f=[],c=this.size();if(c.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var m of d)f.push(new r([m],this._datatype));return f},r.prototype.columns=function(){var f=this,c=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var m=this._data,y=function(b){var C=m.map(w=>[w[b]]);c.push(new r(C,f._datatype))},g=0;g<d[1];g++)y(g);return c},r.prototype.toArray=function(){return yr(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(f){return Wr(this._data,f)},r.prototype.toString=function(){return Wr(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(f){if(f){if(mn(f)&&(f=f.toNumber()),!er(f)||!Ar(f))throw new TypeError("The parameter k must be an integer number")}else f=0;for(var c=f>0?f:0,d=f<0?-f:0,m=this._size[0],y=this._size[1],g=Math.min(m-d,y-c),_=[],b=0;b<g;b++)_[b]=this._data[b+d][b+c];return new r({data:_,size:[g],datatype:this._datatype})},r.diagonal=function(f,c,d,m){if(!Xt(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(P){if(mn(P)&&(P=P.toNumber()),!er(P)||!Ar(P)||P<1)throw new Error("Size values must be positive integers");return P}),d){if(mn(d)&&(d=d.toNumber()),!er(d)||!Ar(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var y=d>0?d:0,g=d<0?-d:0,_=f[0],b=f[1],C=Math.min(_-g,b-y),w;if(Xt(c)){if(c.length!==C)throw new Error("Invalid value array length");w=function(I){return c[I]}}else if(Lr(c)){var B=c.size();if(B.length!==1||B[0]!==C)throw new Error("Invalid matrix length");w=function(I){return c.get([I])}}else w=function(){return c};m||(m=mn(w(0))?w(0).mul(0):0);var S=[];if(f.length>0){S=qh(S,f,m);for(var O=0;O<C;O++)S[O+g][O+y]=w(O)}return new r({data:S,size:[_,b]})},r.fromJSON=function(f){return new r(f)},r.prototype.swapRows=function(f,c){if(!er(f)||!Ar(f)||!er(c)||!Ar(c))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Jt(f,this._size[0]),Jt(c,this._size[0]),r._swapRows(f,c,this._data),this},r._swapRows=function(f,c,d){var m=d[f];d[f]=d[c],d[c]=m};function p(f){for(var c=0,d=f.length;c<d;c++){var m=f[c];Xt(m)?f[c]=p(m):m&&m.isMatrix===!0&&(f[c]=p(m.valueOf()))}return f}return r},{isClass:!0});function lf(e,t,r){return e&&typeof e.map=="function"?e.map(function(n){return lf(n,t)}):t(e)}var Gh="isInteger",cw=["typed"],hw=xt(Gh,cw,e=>{var{typed:t}=e;return t(Gh,{number:Ar,BigNumber:function(n){return n.isInt()},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":t.referToSelf(r=>n=>lf(n,r))})}),tp="number, number";function rp(e,t){return e+t}rp.signature=tp;function np(e,t){return e*t}np.signature=tp;function dw(e,t,r){if(r==null)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var n=e.minus(t).abs();if(n.isZero())return!0;var u=e.constructor.max(e.abs(),t.abs());return n.lte(u.times(r))}return!1}function pw(e,t,r){return ns(e.re,t.re,r)&&ns(e.im,t.im,r)}var vw=xt("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(r=>(n,u)=>{if(!n.equalBase(u))throw new Error("Cannot compare units with different base");return t.find(r,[n.valueType(),u.valueType()])(n.value,u.value)})}}),os="equalScalar",gw=["typed","config"],mw=xt(os,gw,e=>{var{typed:t,config:r}=e,n=vw({typed:t});return t(os,{"boolean, boolean":function(a,l){return a===l},"number, number":function(a,l){return ns(a,l,r.epsilon)},"BigNumber, BigNumber":function(a,l){return a.eq(l)||dw(a,l,r.epsilon)},"Fraction, Fraction":function(a,l){return a.equals(l)},"Complex, Complex":function(a,l){return pw(a,l,r.epsilon)}},n)});xt(os,["typed","config"],e=>{var{typed:t,config:r}=e;return t(os,{"number, number":function(u,a){return ns(u,a,r.epsilon)}})});var _w="SparseMatrix",Dw=["typed","equalScalar","Matrix"],bw=xt(_w,Dw,e=>{var{typed:t,equalScalar:r,Matrix:n}=e;function u(g,_){if(!(this instanceof u))throw new SyntaxError("Constructor must be called with the new operator");if(_&&!jn(_))throw new Error("Invalid datatype: "+_);if(Lr(g))a(this,g,_);else if(g&&Xt(g.index)&&Xt(g.ptr)&&Xt(g.size))this._values=g.values,this._index=g.index,this._ptr=g.ptr,this._size=g.size,this._datatype=_||g.datatype;else if(Xt(g))l(this,g,_);else{if(g)throw new TypeError("Unsupported type of data ("+Xu(g)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=_}}function a(g,_,b){_.type==="SparseMatrix"?(g._values=_._values?yr(_._values):void 0,g._index=yr(_._index),g._ptr=yr(_._ptr),g._size=yr(_._size),g._datatype=b||_._datatype):l(g,_.valueOf(),b||_._datatype)}function l(g,_,b){g._values=[],g._index=[],g._ptr=[],g._datatype=b;var C=_.length,w=0,B=r,S=0;if(jn(b)&&(B=t.find(r,[b,b])||r,S=t.convert(0,b)),C>0){var O=0;do{g._ptr.push(g._index.length);for(var P=0;P<C;P++){var I=_[P];if(Xt(I)){if(O===0&&w<I.length&&(w=I.length),O<I.length){var N=I[O];B(N,S)||(g._values.push(N),g._index.push(P))}}else O===0&&w<1&&(w=1),B(I,S)||(g._values.push(I),g._index.push(P))}O++}while(O<w)}g._ptr.push(g._index.length),g._size=[C,w]}u.prototype=new n,u.prototype.createSparseMatrix=function(g,_){return new u(g,_)},Object.defineProperty(u,"name",{value:"SparseMatrix"}),u.prototype.constructor=u,u.prototype.type="SparseMatrix",u.prototype.isSparseMatrix=!0,u.prototype.getDataType=function(){return is(this._values,Xu)},u.prototype.storage=function(){return"sparse"},u.prototype.datatype=function(){return this._datatype},u.prototype.create=function(g,_){return new u(g,_)},u.prototype.density=function(){var g=this._size[0],_=this._size[1];return g!==0&&_!==0?this._index.length/(g*_):0},u.prototype.subset=function(g,_,b){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,g);case 2:case 3:return h(this,g,_,b);default:throw new SyntaxError("Wrong number of arguments")}};function o(g,_){if(!uf(_))throw new TypeError("Invalid index");var b=_.isScalar();if(b)return g.get(_.min());var C=_.size();if(C.length!==g._size.length)throw new Mt(C.length,g._size.length);var w,B,S,O,P=_.min(),I=_.max();for(w=0,B=g._size.length;w<B;w++)Jt(P[w],g._size[w]),Jt(I[w],g._size[w]);var N=g._values,G=g._index,L=g._ptr,q=_.dimension(0),$=_.dimension(1),H=[],z=[];q.forEach(function(Q,le){z[Q]=le[0],H[Q]=!0});var W=N?[]:void 0,re=[],ee=[];return $.forEach(function(Q){for(ee.push(re.length),S=L[Q],O=L[Q+1];S<O;S++)w=G[S],H[w]===!0&&(re.push(z[w]),W&&W.push(N[S]))}),ee.push(re.length),new u({values:W,index:re,ptr:ee,size:C,datatype:g._datatype})}function h(g,_,b,C){if(!_||_.isIndex!==!0)throw new TypeError("Invalid index");var w=_.size(),B=_.isScalar(),S;if(Lr(b)?(S=b.size(),b=b.toArray()):S=Ci(b),B){if(S.length!==0)throw new TypeError("Scalar expected");g.set(_.min(),b,C)}else{if(w.length!==1&&w.length!==2)throw new Mt(w.length,g._size.length,"<");if(S.length<w.length){for(var O=0,P=0;w[O]===1&&S[O]===1;)O++;for(;w[O]===1;)P++,O++;b=Ld(b,w.length,P,S)}if(!rs(w,S))throw new Mt(w,S,">");if(w.length===1){var I=_.dimension(0);I.forEach(function(L,q){Jt(L),g.set([L,0],b[q[0]],C)})}else{var N=_.dimension(0),G=_.dimension(1);N.forEach(function(L,q){Jt(L),G.forEach(function($,H){Jt($),g.set([L,$],b[q[0]][H[0]],C)})})}}return g}u.prototype.get=function(g){if(!Xt(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new Mt(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var _=g[0],b=g[1];Jt(_,this._size[0]),Jt(b,this._size[1]);var C=p(_,this._ptr[b],this._ptr[b+1],this._index);return C<this._ptr[b+1]&&this._index[C]===_?this._values[C]:0},u.prototype.set=function(g,_,b){if(!Xt(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new Mt(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var C=g[0],w=g[1],B=this._size[0],S=this._size[1],O=r,P=0;jn(this._datatype)&&(O=t.find(r,[this._datatype,this._datatype])||r,P=t.convert(0,this._datatype)),(C>B-1||w>S-1)&&(d(this,Math.max(C+1,B),Math.max(w+1,S),b),B=this._size[0],S=this._size[1]),Jt(C,B),Jt(w,S);var I=p(C,this._ptr[w],this._ptr[w+1],this._index);return I<this._ptr[w+1]&&this._index[I]===C?O(_,P)?f(I,w,this._values,this._index,this._ptr):this._values[I]=_:O(_,P)||c(I,C,w,_,this._values,this._index,this._ptr),this};function p(g,_,b,C){if(b-_===0)return b;for(var w=_;w<b;w++)if(C[w]===g)return w;return _}function f(g,_,b,C,w){b.splice(g,1),C.splice(g,1);for(var B=_+1;B<w.length;B++)w[B]--}function c(g,_,b,C,w,B,S){w.splice(g,0,C),B.splice(g,0,_);for(var O=b+1;O<S.length;O++)S[O]++}u.prototype.resize=function(g,_,b){if(!ts(g))throw new TypeError("Array or Matrix expected");var C=g.valueOf().map(B=>Array.isArray(B)&&B.length===1?B[0]:B);if(C.length!==2)throw new Error("Only two dimensions matrix are supported");C.forEach(function(B){if(!er(B)||!Ar(B)||B<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Wr(C)+")")});var w=b?this.clone():this;return d(w,C[0],C[1],_)};function d(g,_,b,C){var w=C||0,B=r,S=0;jn(g._datatype)&&(B=t.find(r,[g._datatype,g._datatype])||r,S=t.convert(0,g._datatype),w=t.convert(w,g._datatype));var O=!B(w,S),P=g._size[0],I=g._size[1],N,G,L;if(b>I){for(G=I;G<b;G++)if(g._ptr[G]=g._values.length,O)for(N=0;N<P;N++)g._values.push(w),g._index.push(N);g._ptr[b]=g._values.length}else b<I&&(g._ptr.splice(b+1,I-b),g._values.splice(g._ptr[b],g._values.length),g._index.splice(g._ptr[b],g._index.length));if(I=b,_>P){if(O){var q=0;for(G=0;G<I;G++){g._ptr[G]=g._ptr[G]+q,L=g._ptr[G+1]+q;var $=0;for(N=P;N<_;N++,$++)g._values.splice(L+$,0,w),g._index.splice(L+$,0,N),q++}g._ptr[I]=g._values.length}}else if(_<P){var H=0;for(G=0;G<I;G++){g._ptr[G]=g._ptr[G]-H;var z=g._ptr[G],W=g._ptr[G+1]-H;for(L=z;L<W;L++)N=g._index[L],N>_-1&&(g._values.splice(L,1),g._index.splice(L,1),H++)}g._ptr[G]=g._values.length}return g._size[0]=_,g._size[1]=b,g}u.prototype.reshape=function(g,_){if(!Xt(g))throw new TypeError("Array expected");if(g.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");g.forEach(function(Q){if(!er(Q)||!Ar(Q)||Q<=-2||Q===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Wr(g)+")")});var b=this._size[0]*this._size[1];g=af(g,b);var C=g[0]*g[1];if(b!==C)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=_?this.clone():this;if(this._size[0]===g[0]&&this._size[1]===g[1])return w;for(var B=[],S=0;S<w._ptr.length;S++)for(var O=0;O<w._ptr[S+1]-w._ptr[S];O++)B.push(S);for(var P=w._values.slice(),I=w._index.slice(),N=0;N<w._index.length;N++){var G=I[N],L=B[N],q=G*w._size[1]+L;B[N]=q%g[1],I[N]=Math.floor(q/g[1])}w._values.length=0,w._index.length=0,w._ptr.length=g[1]+1,w._size=g.slice();for(var $=0;$<w._ptr.length;$++)w._ptr[$]=0;for(var H=0;H<P.length;H++){var z=I[H],W=B[H],re=P[H],ee=p(z,w._ptr[W],w._ptr[W+1],w._index);c(ee,z,W,re,w._values,w._index,w._ptr)}return w},u.prototype.clone=function(){var g=new u({values:this._values?yr(this._values):void 0,index:yr(this._index),ptr:yr(this._ptr),size:yr(this._size),datatype:this._datatype});return g},u.prototype.size=function(){return this._size.slice(0)},u.prototype.map=function(g,_){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var b=this,C=this._size[0],w=this._size[1],B=ep(g),S=function(P,I,N){return B===1?g(P):B===2?g(P,[I,N]):g(P,[I,N],b)};return m(this,0,C-1,0,w-1,S,_)};function m(g,_,b,C,w,B,S){var O=[],P=[],I=[],N=r,G=0;jn(g._datatype)&&(N=t.find(r,[g._datatype,g._datatype])||r,G=t.convert(0,g._datatype));for(var L=function(be,Ne,je){be=B(be,Ne,je),N(be,G)||(O.push(be),P.push(Ne))},q=C;q<=w;q++){I.push(O.length);var $=g._ptr[q],H=g._ptr[q+1];if(S)for(var z=$;z<H;z++){var W=g._index[z];W>=_&&W<=b&&L(g._values[z],W-_,q-C)}else{for(var re={},ee=$;ee<H;ee++){var Q=g._index[ee];re[Q]=g._values[ee]}for(var le=_;le<=b;le++){var me=le in re?re[le]:0;L(me,le-_,q-C)}}}return I.push(O.length),new u({values:O,index:P,ptr:I,size:[b-_+1,w-C+1]})}u.prototype.forEach=function(g,_){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var b=this,C=this._size[0],w=this._size[1],B=0;B<w;B++){var S=this._ptr[B],O=this._ptr[B+1];if(_)for(var P=S;P<O;P++){var I=this._index[P];g(this._values[P],[I,B],b)}else{for(var N={},G=S;G<O;G++){var L=this._index[G];N[L]=this._values[G]}for(var q=0;q<C;q++){var $=q in N?N[q]:0;g($,[q,B],b)}}}},u.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var g=this._size[1],_=0;_<g;_++)for(var b=this._ptr[_],C=this._ptr[_+1],w=b;w<C;w++){var B=this._index[w];yield{value:this._values[w],index:[B,_]}}},u.prototype.toArray=function(){return y(this._values,this._index,this._ptr,this._size,!0)},u.prototype.valueOf=function(){return y(this._values,this._index,this._ptr,this._size,!1)};function y(g,_,b,C,w){var B=C[0],S=C[1],O=[],P,I;for(P=0;P<B;P++)for(O[P]=[],I=0;I<S;I++)O[P][I]=0;for(I=0;I<S;I++)for(var N=b[I],G=b[I+1],L=N;L<G;L++)P=_[L],O[P][I]=g?w?yr(g[L]):g[L]:1;return O}return u.prototype.format=function(g){for(var _=this._size[0],b=this._size[1],C=this.density(),w="Sparse Matrix ["+Wr(_,g)+" x "+Wr(b,g)+"] density: "+Wr(C,g)+`
`,B=0;B<b;B++)for(var S=this._ptr[B],O=this._ptr[B+1],P=S;P<O;P++){var I=this._index[P];w+=`
    (`+Wr(I,g)+", "+Wr(B,g)+") ==> "+(this._values?Wr(this._values[P],g):"X")}return w},u.prototype.toString=function(){return Wr(this.toArray())},u.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},u.prototype.diagonal=function(g){if(g){if(mn(g)&&(g=g.toNumber()),!er(g)||!Ar(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var _=g>0?g:0,b=g<0?-g:0,C=this._size[0],w=this._size[1],B=Math.min(C-b,w-_),S=[],O=[],P=[];P[0]=0;for(var I=_;I<w&&S.length<B;I++)for(var N=this._ptr[I],G=this._ptr[I+1],L=N;L<G;L++){var q=this._index[L];if(q===I-_+b){S.push(this._values[L]),O[S.length-1]=q-b;break}}return P.push(S.length),new u({values:S,index:O,ptr:P,size:[B,1]})},u.fromJSON=function(g){return new u(g)},u.diagonal=function(g,_,b,C,w){if(!Xt(g))throw new TypeError("Array expected, size parameter");if(g.length!==2)throw new Error("Only two dimensions matrix are supported");if(g=g.map(function(Q){if(mn(Q)&&(Q=Q.toNumber()),!er(Q)||!Ar(Q)||Q<1)throw new Error("Size values must be positive integers");return Q}),b){if(mn(b)&&(b=b.toNumber()),!er(b)||!Ar(b))throw new TypeError("The parameter k must be an integer number")}else b=0;var B=r,S=0;jn(w)&&(B=t.find(r,[w,w])||r,S=t.convert(0,w));var O=b>0?b:0,P=b<0?-b:0,I=g[0],N=g[1],G=Math.min(I-P,N-O),L;if(Xt(_)){if(_.length!==G)throw new Error("Invalid value array length");L=function(le){return _[le]}}else if(Lr(_)){var q=_.size();if(q.length!==1||q[0]!==G)throw new Error("Invalid matrix length");L=function(le){return _.get([le])}}else L=function(){return _};for(var $=[],H=[],z=[],W=0;W<N;W++){z.push($.length);var re=W-O;if(re>=0&&re<G){var ee=L(re);B(ee,S)||(H.push(re+P),$.push(ee))}}return z.push($.length),new u({values:$,index:H,ptr:z,size:[I,N]})},u.prototype.swapRows=function(g,_){if(!er(g)||!Ar(g)||!er(_)||!Ar(_))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Jt(g,this._size[0]),Jt(_,this._size[0]),u._swapRows(g,_,this._size[1],this._values,this._index,this._ptr),this},u._forEachRow=function(g,_,b,C,w){for(var B=C[g],S=C[g+1],O=B;O<S;O++)w(b[O],_[O])},u._swapRows=function(g,_,b,C,w,B){for(var S=0;S<b;S++){var O=B[S],P=B[S+1],I=p(g,O,P,w),N=p(_,O,P,w);if(I<P&&N<P&&w[I]===g&&w[N]===_){if(C){var G=C[I];C[I]=C[N],C[N]=G}continue}if(I<P&&w[I]===g&&(N>=P||w[N]!==_)){var L=C?C[I]:void 0;w.splice(N,0,_),C&&C.splice(N,0,L),w.splice(N<=I?I+1:I,1),C&&C.splice(N<=I?I+1:I,1);continue}if(N<P&&w[N]===_&&(I>=P||w[I]!==g)){var q=C?C[N]:void 0;w.splice(I,0,g),C&&C.splice(I,0,q),w.splice(I<=N?N+1:N,1),C&&C.splice(I<=N?N+1:N,1)}}},u},{isClass:!0}),Kh="matrix",yw=["typed","Matrix","DenseMatrix","SparseMatrix"],Aw=xt(Kh,yw,e=>{var{typed:t,Matrix:r,DenseMatrix:n,SparseMatrix:u}=e;return t(Kh,{"":function(){return a([])},string:function(o){return a([],o)},"string, string":function(o,h){return a([],o,h)},Array:function(o){return a(o)},Matrix:function(o){return a(o,o.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(l,o,h){if(o==="dense"||o==="default"||o===void 0)return new n(l,h);if(o==="sparse")return new u(l,h);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),Yh="addScalar",ww=["typed"],Ew=xt(Yh,ww,e=>{var{typed:t}=e;return t(Yh,{"number, number":rp,"Complex, Complex":function(n,u){return n.add(u)},"BigNumber, BigNumber":function(n,u){return n.plus(u)},"Fraction, Fraction":function(n,u){return n.add(u)},"Unit, Unit":t.referToSelf(r=>(n,u)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(u.value===null||u.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(u))throw new Error("Units do not match");var a=n.clone();return a.value=t.find(r,[a.valueType(),u.valueType()])(a.value,u.value),a.fixPrefix=!1,a})})}),Cw="matAlgo11xS0s",Fw=["typed","equalScalar"],Sw=xt(Cw,Fw,e=>{var{typed:t,equalScalar:r}=e;return function(u,a,l,o){var h=u._values,p=u._index,f=u._ptr,c=u._size,d=u._datatype;if(!h)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=c[0],y=c[1],g,_=r,b=0,C=l;typeof d=="string"&&(g=d,_=t.find(r,[g,g]),b=t.convert(0,g),a=t.convert(a,g),C=t.find(l,[g,g]));for(var w=[],B=[],S=[],O=0;O<y;O++){S[O]=B.length;for(var P=f[O],I=f[O+1],N=P;N<I;N++){var G=p[N],L=o?C(a,h[N]):C(h[N],a);_(L,b)||(B.push(G),w.push(L))}}return S[y]=B.length,u.createSparseMatrix({values:w,index:B,ptr:S,size:[m,y],datatype:g})}}),Bw="matAlgo14xDs",Ow=["typed"],ip=xt(Bw,Ow,e=>{var{typed:t}=e;return function(u,a,l,o){var h=u._data,p=u._size,f=u._datatype,c,d=l;typeof f=="string"&&(c=f,a=t.convert(a,c),d=t.find(l,[c,c]));var m=p.length>0?r(d,0,p,p[0],h,a,o):[];return u.createDenseMatrix({data:m,size:yr(p),datatype:c})};function r(n,u,a,l,o,h,p){var f=[];if(u===a.length-1)for(var c=0;c<l;c++)f[c]=p?n(h,o[c]):n(o[c],h);else for(var d=0;d<l;d++)f[d]=r(n,u+1,a,a[u+1],o[d],h,p);return f}}),Mw="matAlgo01xDSid",Pw=["typed"],xw=xt(Mw,Pw,e=>{var{typed:t}=e;return function(n,u,a,l){var o=n._data,h=n._size,p=n._datatype,f=u._values,c=u._index,d=u._ptr,m=u._size,y=u._datatype;if(h.length!==m.length)throw new Mt(h.length,m.length);if(h[0]!==m[0]||h[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+m+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=h[0],_=h[1],b=typeof p=="string"&&p===y?p:void 0,C=b?t.find(a,[b,b]):a,w,B,S=[];for(w=0;w<g;w++)S[w]=[];var O=[],P=[];for(B=0;B<_;B++){for(var I=B+1,N=d[B],G=d[B+1],L=N;L<G;L++)w=c[L],O[w]=l?C(f[L],o[w][B]):C(o[w][B],f[L]),P[w]=I;for(w=0;w<g;w++)P[w]===I?S[w][B]=O[w]:S[w][B]=o[w][B]}return n.createDenseMatrix({data:S,size:[g,_],datatype:b})}}),Tw="matAlgo04xSidSid",Iw=["typed","equalScalar"],Nw=xt(Tw,Iw,e=>{var{typed:t,equalScalar:r}=e;return function(u,a,l){var o=u._values,h=u._index,p=u._ptr,f=u._size,c=u._datatype,d=a._values,m=a._index,y=a._ptr,g=a._size,_=a._datatype;if(f.length!==g.length)throw new Mt(f.length,g.length);if(f[0]!==g[0]||f[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+g+")");var b=f[0],C=f[1],w,B=r,S=0,O=l;typeof c=="string"&&c===_&&(w=c,B=t.find(r,[w,w]),S=t.convert(0,w),O=t.find(l,[w,w]));var P=o&&d?[]:void 0,I=[],N=[],G=o&&d?[]:void 0,L=o&&d?[]:void 0,q=[],$=[],H,z,W,re,ee;for(z=0;z<C;z++){N[z]=I.length;var Q=z+1;for(re=p[z],ee=p[z+1],W=re;W<ee;W++)H=h[W],I.push(H),q[H]=Q,G&&(G[H]=o[W]);for(re=y[z],ee=y[z+1],W=re;W<ee;W++)if(H=m[W],q[H]===Q){if(G){var le=O(G[H],d[W]);B(le,S)?q[H]=null:G[H]=le}}else I.push(H),$[H]=Q,L&&(L[H]=d[W]);if(G&&L)for(W=N[z];W<I.length;)H=I[W],q[H]===Q?(P[W]=G[H],W++):$[H]===Q?(P[W]=L[H],W++):I.splice(W,1)}return N[C]=I.length,u.createSparseMatrix({values:P,index:I,ptr:N,size:[b,C],datatype:w})}}),kw="matAlgo10xSids",Rw=["typed","DenseMatrix"],Lw=xt(kw,Rw,e=>{var{typed:t,DenseMatrix:r}=e;return function(u,a,l,o){var h=u._values,p=u._index,f=u._ptr,c=u._size,d=u._datatype;if(!h)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=c[0],y=c[1],g,_=l;typeof d=="string"&&(g=d,a=t.convert(a,g),_=t.find(l,[g,g]));for(var b=[],C=[],w=[],B=0;B<y;B++){for(var S=B+1,O=f[B],P=f[B+1],I=O;I<P;I++){var N=p[I];C[N]=h[I],w[N]=S}for(var G=0;G<m;G++)B===0&&(b[G]=[]),w[G]===S?b[G][B]=o?_(a,C[G]):_(C[G],a):b[G][B]=a}return new r({data:b,size:[m,y],datatype:g})}}),Uw="matAlgo13xDD",Vw=["typed"],jw=xt(Uw,Vw,e=>{var{typed:t}=e;return function(u,a,l){var o=u._data,h=u._size,p=u._datatype,f=a._data,c=a._size,d=a._datatype,m=[];if(h.length!==c.length)throw new Mt(h.length,c.length);for(var y=0;y<h.length;y++){if(h[y]!==c[y])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+c+")");m[y]=h[y]}var g,_=l;typeof p=="string"&&p===d&&(g=p,_=t.find(l,[g,g]));var b=m.length>0?r(_,0,m,m[0],o,f):[];return u.createDenseMatrix({data:b,size:m,datatype:g})};function r(n,u,a,l,o,h){var p=[];if(u===a.length-1)for(var f=0;f<l;f++)p[f]=n(o[f],h[f]);else for(var c=0;c<l;c++)p[c]=r(n,u+1,a,a[u+1],o[c],h[c]);return p}}),qw="broadcast",zw=["concat"],Ww=xt(qw,zw,e=>{var{concat:t}=e;return function(a,l){var o=Math.max(a._size.length,l._size.length);if(a._size.length===l._size.length&&a._size.every((_,b)=>_===l._size[b]))return[a,l];for(var h=r(a._size,o,0),p=r(l._size,o,0),f=[],c=0;c<o;c++)f[c]=Math.max(h[c],p[c]);for(var d=0;d<o;d++)u(h,f,d),u(p,f,d);var m=a.clone(),y=l.clone();m._size.length<o?m.reshape(r(m._size,o,1)):y._size.length<o&&y.reshape(r(y._size,o,1));for(var g=0;g<o;g++)m._size[g]<f[g]&&(m=n(m,f[g],g)),y._size[g]<f[g]&&(y=n(y,f[g],g));return[m,y]};function r(a,l,o){return[...Array(l-a.length).fill(o),...a]}function n(a,l,o){return t(...Array(l).fill(a),o)}function u(a,l,o){if(a[o]<l[o]&a[o]>1)throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(a,") not possible to broadcast dimension ").concat(o," with size ").concat(a[o]," to size ").concat(l[o]))}}),Hw="matrixAlgorithmSuite",Gw=["typed","matrix","concat"],Kw=xt(Hw,Gw,e=>{var{typed:t,matrix:r,concat:n}=e,u=jw({typed:t}),a=ip({typed:t}),l=Ww({concat:n});return function(h){var p=h.elop,f=h.SD||h.DS,c;p?(c={"DenseMatrix, DenseMatrix":(g,_)=>u(...l(g,_),p),"Array, Array":(g,_)=>u(...l(r(g),r(_)),p).valueOf(),"Array, DenseMatrix":(g,_)=>u(...l(r(g),_),p),"DenseMatrix, Array":(g,_)=>u(...l(g,r(_)),p)},h.SS&&(c["SparseMatrix, SparseMatrix"]=(g,_)=>h.SS(...l(g,_),p,!1)),h.DS&&(c["DenseMatrix, SparseMatrix"]=(g,_)=>h.DS(...l(g,_),p,!1),c["Array, SparseMatrix"]=(g,_)=>h.DS(...l(r(g),_),p,!1)),f&&(c["SparseMatrix, DenseMatrix"]=(g,_)=>f(...l(_,g),p,!0),c["SparseMatrix, Array"]=(g,_)=>f(...l(r(_),g),p,!0))):(c={"DenseMatrix, DenseMatrix":t.referToSelf(g=>(_,b)=>u(...l(_,b),g)),"Array, Array":t.referToSelf(g=>(_,b)=>u(...l(r(_),r(b)),g).valueOf()),"Array, DenseMatrix":t.referToSelf(g=>(_,b)=>u(...l(r(_),b),g)),"DenseMatrix, Array":t.referToSelf(g=>(_,b)=>u(...l(_,r(b)),g))},h.SS&&(c["SparseMatrix, SparseMatrix"]=t.referToSelf(g=>(_,b)=>h.SS(...l(_,b),g,!1))),h.DS&&(c["DenseMatrix, SparseMatrix"]=t.referToSelf(g=>(_,b)=>h.DS(...l(_,b),g,!1)),c["Array, SparseMatrix"]=t.referToSelf(g=>(_,b)=>h.DS(...l(r(_),b),g,!1))),f&&(c["SparseMatrix, DenseMatrix"]=t.referToSelf(g=>(_,b)=>f(...l(b,_),g,!0)),c["SparseMatrix, Array"]=t.referToSelf(g=>(_,b)=>f(...l(r(b),_),g,!0))));var d=h.scalar||"any",m=h.Ds||h.Ss;m&&(p?(c["DenseMatrix,"+d]=(g,_)=>a(g,_,p,!1),c[d+", DenseMatrix"]=(g,_)=>a(_,g,p,!0),c["Array,"+d]=(g,_)=>a(r(g),_,p,!1).valueOf(),c[d+", Array"]=(g,_)=>a(r(_),g,p,!0).valueOf()):(c["DenseMatrix,"+d]=t.referToSelf(g=>(_,b)=>a(_,b,g,!1)),c[d+", DenseMatrix"]=t.referToSelf(g=>(_,b)=>a(b,_,g,!0)),c["Array,"+d]=t.referToSelf(g=>(_,b)=>a(r(_),b,g,!1).valueOf()),c[d+", Array"]=t.referToSelf(g=>(_,b)=>a(r(b),_,g,!0).valueOf())));var y=h.sS!==void 0?h.sS:h.Ss;return p?(h.Ss&&(c["SparseMatrix,"+d]=(g,_)=>h.Ss(g,_,p,!1)),y&&(c[d+", SparseMatrix"]=(g,_)=>y(_,g,p,!0))):(h.Ss&&(c["SparseMatrix,"+d]=t.referToSelf(g=>(_,b)=>h.Ss(_,b,g,!1))),y&&(c[d+", SparseMatrix"]=t.referToSelf(g=>(_,b)=>y(b,_,g,!0)))),p&&p.signatures&&wy(c,p.signatures),c}}),Yw="multiplyScalar",Zw=["typed"],$w=xt(Yw,Zw,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":np,"Complex, Complex":function(n,u){return n.mul(u)},"BigNumber, BigNumber":function(n,u){return n.times(u)},"Fraction, Fraction":function(n,u){return n.mul(u)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),Zh="multiply",Xw=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Jw=xt(Zh,Xw,e=>{var{typed:t,matrix:r,addScalar:n,multiplyScalar:u,equalScalar:a,dot:l}=e,o=Sw({typed:t,equalScalar:a}),h=ip({typed:t});function p(S,O){switch(S.length){case 1:switch(O.length){case 1:if(S[0]!==O[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(S[0]!==O[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+S[0]+") must match Matrix rows ("+O[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+O.length+" dimensions)")}break;case 2:switch(O.length){case 1:if(S[1]!==O[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+S[1]+") must match Vector length ("+O[0]+")");break;case 2:if(S[1]!==O[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+S[1]+") must match Matrix B rows ("+O[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+O.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+S.length+" dimensions)")}}function f(S,O,P){if(P===0)throw new Error("Cannot multiply two empty vectors");return l(S,O)}function c(S,O){if(O.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(S,O)}function d(S,O){var P=S._data,I=S._size,N=S._datatype,G=O._data,L=O._size,q=O._datatype,$=I[0],H=L[1],z,W=n,re=u;N&&q&&N===q&&typeof N=="string"&&(z=N,W=t.find(n,[z,z]),re=t.find(u,[z,z]));for(var ee=[],Q=0;Q<H;Q++){for(var le=re(P[0],G[0][Q]),me=1;me<$;me++)le=W(le,re(P[me],G[me][Q]));ee[Q]=le}return S.createDenseMatrix({data:ee,size:[H],datatype:z})}var m=t("_multiplyMatrixVector",{"DenseMatrix, any":g,"SparseMatrix, any":C}),y=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":_,"DenseMatrix, SparseMatrix":b,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":B});function g(S,O){var P=S._data,I=S._size,N=S._datatype,G=O._data,L=O._datatype,q=I[0],$=I[1],H,z=n,W=u;N&&L&&N===L&&typeof N=="string"&&(H=N,z=t.find(n,[H,H]),W=t.find(u,[H,H]));for(var re=[],ee=0;ee<q;ee++){for(var Q=P[ee],le=W(Q[0],G[0]),me=1;me<$;me++)le=z(le,W(Q[me],G[me]));re[ee]=le}return S.createDenseMatrix({data:re,size:[q],datatype:H})}function _(S,O){var P=S._data,I=S._size,N=S._datatype,G=O._data,L=O._size,q=O._datatype,$=I[0],H=I[1],z=L[1],W,re=n,ee=u;N&&q&&N===q&&typeof N=="string"&&(W=N,re=t.find(n,[W,W]),ee=t.find(u,[W,W]));for(var Q=[],le=0;le<$;le++){var me=P[le];Q[le]=[];for(var Se=0;Se<z;Se++){for(var be=ee(me[0],G[0][Se]),Ne=1;Ne<H;Ne++)be=re(be,ee(me[Ne],G[Ne][Se]));Q[le][Se]=be}}return S.createDenseMatrix({data:Q,size:[$,z],datatype:W})}function b(S,O){var P=S._data,I=S._size,N=S._datatype,G=O._values,L=O._index,q=O._ptr,$=O._size,H=O._datatype;if(!G)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var z=I[0],W=$[1],re,ee=n,Q=u,le=a,me=0;N&&H&&N===H&&typeof N=="string"&&(re=N,ee=t.find(n,[re,re]),Q=t.find(u,[re,re]),le=t.find(a,[re,re]),me=t.convert(0,re));for(var Se=[],be=[],Ne=[],je=O.createSparseMatrix({values:Se,index:be,ptr:Ne,size:[z,W],datatype:re}),Me=0;Me<W;Me++){Ne[Me]=be.length;var it=q[Me],qe=q[Me+1];if(qe>it)for(var Te=0,Re=0;Re<z;Re++){for(var lt=Re+1,et=void 0,ut=it;ut<qe;ut++){var tt=L[ut];Te!==lt?(et=Q(P[Re][tt],G[ut]),Te=lt):et=ee(et,Q(P[Re][tt],G[ut]))}Te===lt&&!le(et,me)&&(be.push(Re),Se.push(et))}}return Ne[W]=be.length,je}function C(S,O){var P=S._values,I=S._index,N=S._ptr,G=S._datatype;if(!P)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var L=O._data,q=O._datatype,$=S._size[0],H=O._size[0],z=[],W=[],re=[],ee,Q=n,le=u,me=a,Se=0;G&&q&&G===q&&typeof G=="string"&&(ee=G,Q=t.find(n,[ee,ee]),le=t.find(u,[ee,ee]),me=t.find(a,[ee,ee]),Se=t.convert(0,ee));var be=[],Ne=[];re[0]=0;for(var je=0;je<H;je++){var Me=L[je];if(!me(Me,Se))for(var it=N[je],qe=N[je+1],Te=it;Te<qe;Te++){var Re=I[Te];Ne[Re]?be[Re]=Q(be[Re],le(Me,P[Te])):(Ne[Re]=!0,W.push(Re),be[Re]=le(Me,P[Te]))}}for(var lt=W.length,et=0;et<lt;et++){var ut=W[et];z[et]=be[ut]}return re[1]=W.length,S.createSparseMatrix({values:z,index:W,ptr:re,size:[$,1],datatype:ee})}function w(S,O){var P=S._values,I=S._index,N=S._ptr,G=S._datatype;if(!P)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var L=O._data,q=O._datatype,$=S._size[0],H=O._size[0],z=O._size[1],W,re=n,ee=u,Q=a,le=0;G&&q&&G===q&&typeof G=="string"&&(W=G,re=t.find(n,[W,W]),ee=t.find(u,[W,W]),Q=t.find(a,[W,W]),le=t.convert(0,W));for(var me=[],Se=[],be=[],Ne=S.createSparseMatrix({values:me,index:Se,ptr:be,size:[$,z],datatype:W}),je=[],Me=[],it=0;it<z;it++){be[it]=Se.length;for(var qe=it+1,Te=0;Te<H;Te++){var Re=L[Te][it];if(!Q(Re,le))for(var lt=N[Te],et=N[Te+1],ut=lt;ut<et;ut++){var tt=I[ut];Me[tt]!==qe?(Me[tt]=qe,Se.push(tt),je[tt]=ee(Re,P[ut])):je[tt]=re(je[tt],ee(Re,P[ut]))}}for(var rt=be[it],ze=Se.length,We=rt;We<ze;We++){var Ae=Se[We];me[We]=je[Ae]}}return be[z]=Se.length,Ne}function B(S,O){var P=S._values,I=S._index,N=S._ptr,G=S._datatype,L=O._values,q=O._index,$=O._ptr,H=O._datatype,z=S._size[0],W=O._size[1],re=P&&L,ee,Q=n,le=u;G&&H&&G===H&&typeof G=="string"&&(ee=G,Q=t.find(n,[ee,ee]),le=t.find(u,[ee,ee]));for(var me=re?[]:void 0,Se=[],be=[],Ne=S.createSparseMatrix({values:me,index:Se,ptr:be,size:[z,W],datatype:ee}),je=re?[]:void 0,Me=[],it,qe,Te,Re,lt,et,ut,tt,rt=0;rt<W;rt++){be[rt]=Se.length;var ze=rt+1;for(lt=$[rt],et=$[rt+1],Re=lt;Re<et;Re++)if(tt=q[Re],re)for(qe=N[tt],Te=N[tt+1],it=qe;it<Te;it++)ut=I[it],Me[ut]!==ze?(Me[ut]=ze,Se.push(ut),je[ut]=le(L[Re],P[it])):je[ut]=Q(je[ut],le(L[Re],P[it]));else for(qe=N[tt],Te=N[tt+1],it=qe;it<Te;it++)ut=I[it],Me[ut]!==ze&&(Me[ut]=ze,Se.push(ut));if(re)for(var We=be[rt],Ae=Se.length,we=We;we<Ae;we++){var yt=Se[we];me[we]=je[yt]}}return be[W]=Se.length,Ne}return t(Zh,u,{"Array, Array":t.referTo("Matrix, Matrix",S=>(O,P)=>{p(Ci(O),Ci(P));var I=S(r(O),r(P));return Lr(I)?I.valueOf():I}),"Matrix, Matrix":function(O,P){var I=O.size(),N=P.size();return p(I,N),I.length===1?N.length===1?f(O,P,I[0]):c(O,P):N.length===1?m(O,P):y(O,P)},"Matrix, Array":t.referTo("Matrix,Matrix",S=>(O,P)=>S(O,r(P))),"Array, Matrix":t.referToSelf(S=>(O,P)=>S(r(O,P.storage()),P)),"SparseMatrix, any":function(O,P){return o(O,P,u,!1)},"DenseMatrix, any":function(O,P){return h(O,P,u,!1)},"any, SparseMatrix":function(O,P){return o(P,O,u,!0)},"any, DenseMatrix":function(O,P){return h(P,O,u,!0)},"Array, any":function(O,P){return h(r(O),P,u,!1).valueOf()},"any, Array":function(O,P){return h(r(P),O,u,!0).valueOf()},"any, any":u,"any, any, ...any":t.referToSelf(S=>(O,P,I)=>{for(var N=S(O,P),G=0;G<I.length;G++)N=S(N,I[G]);return N})})}),$h="conj",Qw=["typed"],eE=xt($h,Qw,e=>{var{typed:t}=e;return t($h,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":t.referToSelf(r=>n=>lf(n,r))})}),Xh="concat",tE=["typed","matrix","isInteger"],rE=xt(Xh,tE,e=>{var{typed:t,matrix:r,isInteger:n}=e;return t(Xh,{"...Array | Matrix | number | BigNumber":function(a){var l,o=a.length,h=-1,p,f=!1,c=[];for(l=0;l<o;l++){var d=a[l];if(Lr(d)&&(f=!0),er(d)||mn(d)){if(l!==o-1)throw new Error("Dimension must be specified as last argument");if(p=h,h=d.valueOf(),!n(h))throw new TypeError("Integer number expected for dimension");if(h<0||l>0&&h>p)throw new Wi(h,p+1)}else{var m=yr(d).valueOf(),y=Ci(m);if(c[l]=m,p=h,h=y.length-1,l>0&&h!==p)throw new Mt(p+1,h+1)}}if(c.length===0)throw new SyntaxError("At least one matrix expected");for(var g=c.shift();c.length;)g=up(g,c.shift(),h,0);return f?r(g):g},"...string":function(a){return a.join("")}})});function up(e,t,r,n){if(n<r){if(e.length!==t.length)throw new Mt(e.length,t.length);for(var u=[],a=0;a<e.length;a++)u[a]=up(e[a],t[a],r,n+1);return u}else return e.concat(t)}function nE(){throw new Error('No "matrix" implementation available')}var Jh="size",iE=["typed","config","?matrix"],uE=xt(Jh,iE,e=>{var{typed:t,config:r,matrix:n}=e;return t(Jh,{Matrix:function(a){return a.create(a.size())},Array:Ci,string:function(a){return r.matrix==="Array"?[a.length]:n([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return r.matrix==="Array"?[]:n?n([]):nE()}})}),Qh="add",aE=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],sE=xt(Qh,aE,e=>{var{typed:t,matrix:r,addScalar:n,equalScalar:u,DenseMatrix:a,SparseMatrix:l,concat:o}=e,h=xw({typed:t}),p=Nw({typed:t,equalScalar:u}),f=Lw({typed:t,DenseMatrix:a}),c=Kw({typed:t,matrix:r,concat:o});return t(Qh,{"any, any":n,"any, any, ...any":t.referToSelf(d=>(m,y,g)=>{for(var _=d(m,y),b=0;b<g.length;b++)_=d(_,g[b]);return _})},c({elop:n,DS:h,SS:p,Ss:f}))}),e0="dot",oE=["typed","addScalar","multiplyScalar","conj","size"],lE=xt(e0,oE,e=>{var{typed:t,addScalar:r,multiplyScalar:n,conj:u,size:a}=e;return t(e0,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":h});function l(f,c){var d=p(f),m=p(c),y,g;if(d.length===1)y=d[0];else if(d.length===2&&d[1]===1)y=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(m.length===1)g=m[0];else if(m.length===2&&m[1]===1)g=m[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+m.join(", ")+")");if(y!==g)throw new RangeError("Vectors must have equal length ("+y+" != "+g+")");if(y===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return y}function o(f,c){var d=l(f,c),m=Lr(f)?f._data:f,y=Lr(f)?f._datatype:void 0,g=Lr(c)?c._data:c,_=Lr(c)?c._datatype:void 0,b=p(f).length===2,C=p(c).length===2,w=r,B=n;if(y&&_&&y===_&&typeof y=="string"){var S=y;w=t.find(r,[S,S]),B=t.find(n,[S,S])}if(!b&&!C){for(var O=B(u(m[0]),g[0]),P=1;P<d;P++)O=w(O,B(u(m[P]),g[P]));return O}if(!b&&C){for(var I=B(u(m[0]),g[0][0]),N=1;N<d;N++)I=w(I,B(u(m[N]),g[N][0]));return I}if(b&&!C){for(var G=B(u(m[0][0]),g[0]),L=1;L<d;L++)G=w(G,B(u(m[L][0]),g[L]));return G}if(b&&C){for(var q=B(u(m[0][0]),g[0][0]),$=1;$<d;$++)q=w(q,B(u(m[$][0]),g[$][0]));return q}}function h(f,c){l(f,c);for(var d=f._index,m=f._values,y=c._index,g=c._values,_=0,b=r,C=n,w=0,B=0;w<d.length&&B<y.length;){var S=d[w],O=y[B];if(S<O){w++;continue}if(S>O){B++;continue}S===O&&(_=b(_,C(m[w],g[B])),w++,B++)}return _}function p(f){return Lr(f)?f.size():a(f)}}),fE=$A({config:Os}),cE=ew({}),hE=iw({}),ff=sw({}),cf=fw({Matrix:ff}),bn=Qy({BigNumber:fE,Complex:cE,DenseMatrix:cf,Fraction:hE}),hf=Ew({typed:bn}),dE=eE({typed:bn}),df=mw({config:Os,typed:bn}),pE=hw({typed:bn}),ap=$w({typed:bn}),sp=bw({Matrix:ff,equalScalar:df,typed:bn}),Ns=Aw({DenseMatrix:cf,Matrix:ff,SparseMatrix:sp,typed:bn}),vE=uE({matrix:Ns,config:Os,typed:bn}),gE=rE({isInteger:pE,matrix:Ns,typed:bn}),Hr=sE({DenseMatrix:cf,SparseMatrix:sp,addScalar:hf,concat:gE,equalScalar:df,matrix:Ns,typed:bn}),mE=lE({addScalar:hf,conj:dE,multiplyScalar:ap,size:vE,typed:bn}),gn=Jw({addScalar:hf,dot:mE,equalScalar:df,matrix:Ns,multiplyScalar:ap,typed:bn});const ul="selectedPromptStore";function _E(){const e=Tn(""),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&localStorage[ul]||""),{subscribe:t,update:a=>{!a||!u||(localStorage[ul]=a,r(a))},get:()=>qt(e),delete:()=>{u&&(delete localStorage[ul],r(""))}}}const ea=_E(),op=xn(ea,e=>qt(ea));function DE(){const e=Tn({}),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&Object.keys(localStorage).reduce((a,l)=>{if(l.startsWith("prompt")){const o=l.split("_")[1];a[o]=JSON.parse(localStorage[l])}return a},{})||{}),{subscribe:t,update:(a,l)=>{const o=qt(e),p={...o[a]||{},...l};u&&(localStorage[`prompt_${a}`]=JSON.stringify(p));const f={...o,[a]:p};r(f)},get:a=>qt(e)[a],delete:a=>{u&&delete localStorage[`prompt_${a}`];const l={...qt(e)};delete l[a],r(l)}}}const ta=DE(),bE=xn(ta,e=>Object.entries(qt(ta))),Ga="activePromptStore";function br(e,t,r,n=1){return{id:e,text:t,barWeight:n,parsedWeight:r}}function t0(){return{0:br(0,"Magic potion in a mystical bottle",1),1:br(1,"A crystalline decanter",1),2:br(2,"An ornate tequila bottle",1),3:br(3,"An antique sake bottle",1),4:br(4,"A colorful perfume bottle",1),5:br(5,"A glass vase full of vibrant flowers",1),6:br(6,"A minimalist glass tea kettle",1),7:br(7,"Chihuly glass art",1),8:br(8,"A fine wine bottle",1),9:br(9,"A gourmet vinegar bottle",1),10:br(10,"A stunning fishbowl",1),11:br(11,"A striking piece of tourmaline",1),12:br(12,"A finely cut piece of sapphire",1),13:br(13,"Iittala glass art",1)}}function yi(e,t="circle"){return{weightedPrompts:e||{},weightMode:t,pieAngles:{},circleAngles:{},circleMarker:[270,.33],circleWeightScaling:2,circleExponentialScaling:!0,embedExponentialScaling:2,embedWeightScaling:!0,embedClusters:0,embedPromptLimit:Object.keys(e).length}}function yE(){const e=Tn({}),{subscribe:t,set:r,update:n}=e,u=typeof window<"u",a=u&&localStorage[Ga]?JSON.parse(localStorage[Ga]):yi(t0());return r({...yi({}),...a}),{subscribe:t,update:l=>{const o=ea.get();o&&ta.update(o,l),!(!l||!u)&&(localStorage[Ga]=JSON.stringify(l),r({...yi({}),...l}))},get:()=>qt(e),delete:()=>{u&&(delete localStorage[Ga],r(yi(t0())))}}}const Ot=yE(),yn=xn(Ot,e=>qt(Ot));function AE(e){let t,r,n;return{c(){t=Et("circle"),this.h()},l(u){t=Ct(u,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),ie(t).forEach(V),this.h()},h(){T(t,"cx",r=e[0][0]),T(t,"cy",n=e[0][1]),T(t,"r",e[1]),T(t,"stroke",e[3]),T(t,"stroke-width",e[2]),Qt(t,"fill","rgba(0,0,0,0)")},m(u,a){Ce(u,t,a)},p(u,[a]){a&1&&r!==(r=u[0][0])&&T(t,"cx",r),a&1&&n!==(n=u[0][1])&&T(t,"cy",n),a&2&&T(t,"r",u[1]),a&8&&T(t,"stroke",u[3]),a&4&&T(t,"stroke-width",u[2])},i:Ie,o:Ie,d(u){u&&V(t)}}}function wE(e,t,r){let{xy:n=[500,500]}=t,{radius:u=400}=t,{stroke:a=2}=t,{color:l="rgba(46,67,101, 0.4)"}=t;return e.$$set=o=>{"xy"in o&&r(0,n=o.xy),"radius"in o&&r(1,u=o.radius),"stroke"in o&&r(2,a=o.stroke),"color"in o&&r(3,l=o.color)},[n,u,a,l]}class lp extends kt{constructor(t){super(),Rt(this,t,wE,AE,Lt,{xy:0,radius:1,stroke:2,color:3})}}function EE(e){let t,r,n,u,a;return{c(){t=Et("circle"),this.h()},l(l){t=Ct(l,"circle",{cx:!0,cy:!0,r:!0}),ie(t).forEach(V),this.h()},h(){T(t,"cx",r=e[0][0]),T(t,"cy",n=e[0][1]),T(t,"r",e[1]),Qt(t,"fill",e[2])},m(l,o){Ce(l,t,o),u||(a=[ke(t,"mouseover",e[3]),ke(t,"mouseout",e[4]),ke(t,"mousedown",e[5])],u=!0)},p(l,[o]){o&1&&r!==(r=l[0][0])&&T(t,"cx",r),o&1&&n!==(n=l[0][1])&&T(t,"cy",n),o&2&&T(t,"r",l[1]),o&4&&Qt(t,"fill",l[2])},i:Ie,o:Ie,d(l){l&&V(t),u=!1,Ur(a)}}}function CE(e,t,r){let{xy:n=[100,100]}=t,{radius:u=5}=t,{color:a="black"}=t,{hoverColor:l="white"}=t,{handleMouseDown:o=d=>{}}=t,h=a;function p(){r(2,h=l)}function f(){r(2,h=a)}function c(d){o(d)}return e.$$set=d=>{"xy"in d&&r(0,n=d.xy),"radius"in d&&r(1,u=d.radius),"color"in d&&r(6,a=d.color),"hoverColor"in d&&r(7,l=d.hoverColor),"handleMouseDown"in d&&r(8,o=d.handleMouseDown)},[n,u,h,p,f,c,a,l,o]}class na extends kt{constructor(t){super(),Rt(this,t,CE,EE,Lt,{xy:0,radius:1,color:6,hoverColor:7,handleMouseDown:8})}}function FE(e){let t,r,n,u,a;return{c(){t=Et("line"),this.h()},l(l){t=Ct(l,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-dasharray":!0,"stroke-width":!0}),ie(t).forEach(V),this.h()},h(){T(t,"x1",r=e[0][0]),T(t,"y1",n=e[0][1]),T(t,"x2",u=e[1][0]),T(t,"y2",a=e[1][1]),T(t,"stroke",e[3]),T(t,"stroke-dasharray","10,10"),T(t,"stroke-width",e[2])},m(l,o){Ce(l,t,o)},p(l,[o]){o&1&&r!==(r=l[0][0])&&T(t,"x1",r),o&1&&n!==(n=l[0][1])&&T(t,"y1",n),o&2&&u!==(u=l[1][0])&&T(t,"x2",u),o&2&&a!==(a=l[1][1])&&T(t,"y2",a),o&8&&T(t,"stroke",l[3]),o&4&&T(t,"stroke-width",l[2])},i:Ie,o:Ie,d(l){l&&V(t)}}}function SE(e,t,r){let{p1:n=[100,100]}=t,{p2:u=[100,100]}=t,{stroke:a=2}=t,{color:l="rgba(46,67,101, 0.4)"}=t;return e.$$set=o=>{"p1"in o&&r(0,n=o.p1),"p2"in o&&r(1,u=o.p2),"stroke"in o&&r(2,a=o.stroke),"color"in o&&r(3,l=o.color)},[n,u,a,l]}class fp extends kt{constructor(t){super(),Rt(this,t,SE,FE,Lt,{p1:0,p2:1,stroke:2,color:3})}}function BE(e){let t,r,n,u,a,l,o,h;return{c(){t=Et("foreignObject"),r=se("div"),n=se("p"),u=Ze(e[2]),this.h()},l(p){t=Ct(p,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var f=ie(t);r=oe(f,"DIV",{class:!0});var c=ie(r);n=oe(c,"P",{});var d=ie(n);u=$e(d,e[2]),d.forEach(V),c.forEach(V),f.forEach(V),this.h()},h(){Qt(n,"color",e[3]),Qt(n,"user-select","none"),Qt(n,"margin","0"),Qt(n,"pointer-events","none"),Qt(n,"text-align",e[4]),Qt(n,"font-size",`${e[5]}px`),Qt(n,"font-family","sans-serif"),Qt(n,"font-style","italic"),T(r,"class","h-full flex flex-col justify-center"),T(t,"x",a=e[0][0]),T(t,"y",l=e[0][1]),T(t,"width",o=e[1][0]),T(t,"height",h=e[1][1])},m(p,f){Ce(p,t,f),Y(t,r),Y(r,n),Y(n,u)},p(p,[f]){f&4&&Pn(u,p[2]),f&8&&Qt(n,"color",p[3]),f&16&&Qt(n,"text-align",p[4]),f&32&&Qt(n,"font-size",`${p[5]}px`),f&1&&a!==(a=p[0][0])&&T(t,"x",a),f&1&&l!==(l=p[0][1])&&T(t,"y",l),f&2&&o!==(o=p[1][0])&&T(t,"width",o),f&2&&h!==(h=p[1][1])&&T(t,"height",h)},i:Ie,o:Ie,d(p){p&&V(t)}}}function OE(e,t,r){let{xy:n=[100,100]}=t,{wh:u=[100,100]}=t,{text:a=""}=t,{color:l="rgba(96,117,151, 1)"}=t,{textAlign:o="center"}=t,{fontSize:h=12}=t;return e.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,u=p.wh),"text"in p&&r(2,a=p.text),"color"in p&&r(3,l=p.color),"textAlign"in p&&r(4,o=p.textAlign),"fontSize"in p&&r(5,h=p.fontSize)},[n,u,a,l,o,h]}class ks extends kt{constructor(t){super(),Rt(this,t,OE,BE,Lt,{xy:0,wh:1,text:2,color:3,textAlign:4,fontSize:5})}}function ME(e){let t,r,n,u,a,l,o,h,p,f,c;return{c(){t=Et("circle"),u=Ge(),a=Et("foreignObject"),l=se("p"),o=Ze(e[4]),this.h()},l(d){t=Ct(d,"circle",{cx:!0,cy:!0,r:!0}),ie(t).forEach(V),u=Ke(d),a=Ct(d,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var m=ie(a);l=oe(m,"P",{style:!0,class:!0});var y=ie(l);o=$e(y,e[4]),y.forEach(V),m.forEach(V),this.h()},h(){T(t,"cx",r=e[0][0]),T(t,"cy",n=e[0][1]),T(t,"r",e[1]),Qt(t,"fill",e[3]),Qt(l,"color",e[2]),Qt(l,"user-select","none"),Qt(l,"margin","0"),T(l,"class","heavy svelte-6if1p2"),T(a,"x",h=e[0][0]-e[1]),T(a,"y",p=e[0][1]-e[1]),T(a,"width",f=e[1]*2),T(a,"height",c=e[1]*2)},m(d,m){Ce(d,t,m),Ce(d,u,m),Ce(d,a,m),Y(a,l),Y(l,o)},p(d,[m]){m&1&&r!==(r=d[0][0])&&T(t,"cx",r),m&1&&n!==(n=d[0][1])&&T(t,"cy",n),m&2&&T(t,"r",d[1]),m&8&&Qt(t,"fill",d[3]),m&16&&Pn(o,d[4]),m&4&&Qt(l,"color",d[2]),m&3&&h!==(h=d[0][0]-d[1])&&T(a,"x",h),m&3&&p!==(p=d[0][1]-d[1])&&T(a,"y",p),m&2&&f!==(f=d[1]*2)&&T(a,"width",f),m&2&&c!==(c=d[1]*2)&&T(a,"height",c)},i:Ie,o:Ie,d(d){d&&V(t),d&&V(u),d&&V(a)}}}function PE(e,t,r){let{xy:n=[100,100]}=t,{radius:u=25}=t,{textColor:a="rgba(96,117,151, 1)"}=t,{bgColor:l="black"}=t,{weight:o=""}=t;return e.$$set=h=>{"xy"in h&&r(0,n=h.xy),"radius"in h&&r(1,u=h.radius),"textColor"in h&&r(2,a=h.textColor),"bgColor"in h&&r(3,l=h.bgColor),"weight"in h&&r(4,o=h.weight)},[n,u,a,l,o]}class xE extends kt{constructor(t){super(),Rt(this,t,PE,ME,Lt,{xy:0,radius:1,textColor:2,bgColor:3,weight:4})}}function Ai(e,t,r){const n=e[0]-t[0],u=e[1]-t[1],a=360+Math.atan2(u,n)*180/Math.PI,l=Math.sqrt(n*n+u*u);return[a%360,l/r]}function qn(e,t,r){const n=t[0]%360*Math.PI/180,u=[r*t[1]*Math.cos(n),r*t[1]*Math.sin(n)];return Hr(e,u)}function Gl(e,t,r){const n=e[0]-t[0],u=e[1]-t[1],a=Math.sqrt(n*n+u*u),l=r/a,o=t[0]+n*l,h=t[1]+u*l;return[o,h]}function TE(e,t,r){const n=e[0]-t[0],u=e[1]-t[1];return Math.sqrt(n*n+u*u)<r}function cp(e,t){const r=t%360*Math.PI/180;let n,u;const a=Math.cos(r),l=Math.sin(r);return n=(e[0]+5)*-1.2*a,u=(e[1]+5)*-1.2*l,n-=e[0],u-=e[1],[n,u]}function IE(e){return Math.round(e*100)}function xr(e){return Math.max(1-Math.pow(1-e,2),.25).toFixed(2)}function NE(e){const t=e.weightMode;let r="parsedWeight";switch(t){case"circle":r="circleWeight";break;case"bars":r="barWeight";break;case"embed":r="embedWeight";break;case"pie":r="pieWeight";break}return e.weightedPrompts?Math.max(...Object.values(e.weightedPrompts).map(n=>n[r])):0}function kE(e){const t=e.weightMode;let r="parsedWeight";switch(t){case"circle":r="circleWeight";break;case"bars":r="barWeight";break;case"embed":r="embedWeight";break;case"pie":r="pieWeight";break}return e.weightedPrompts?Object.values(e.weightedPrompts).reduce((n,u)=>n+u[r],0):0}function r0(e,t){const r=e.weightMode;let n="parsedWeight";switch(r){case"circle":n="circleWeight";break;case"bars":n="barWeight";break;case"embed":n="embedWeight";break;case"pie":n="pieWeight";break}return e.weightedPrompts[t]?e.weightedPrompts[t][n]/NE(e):0}function ai(e,t){const r=e.weightMode;let n="parsedWeight";switch(r){case"circle":n="circleWeight";break;case"bars":n="barWeight";break;case"embed":n="embedWeight";break;case"pie":n="pieWeight";break}if(!e.weightedPrompts[t])return 0;const u=e.weightedPrompts[t][n];return IE((u||0)/kE(e))}function RE(e,t,r){const a=r*.6,l=Math.floor(e/a);return Math.ceil(t/l)*r*1.2}function rn(e,t,r){const n=RE(e,t,r)+10;return[e,n]}function Xa(e,t){const r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function Rs(e){return gn(e,.5)}function zi(e){const t=e.currentTarget;var r=t.createSVGPoint();r.x=e.clientX,r.y=e.clientY;const n=r.matrixTransform(t.getScreenCTM().inverse());return[n.x,n.y]}function n0(e,t,r){const n=e.slice();return n[18]=t[r][0],n[19]=t[r][1],n}function i0(e){let t,r,n=Object.entries(e[5].weightedPrompts).length>0,u,a;t=new lp({props:{xy:e[0],radius:e[1]}});let l=Object.entries(e[5].weightedPrompts),o=[];for(let f=0;f<l.length;f+=1)o[f]=u0(n0(e,l,f));const h=f=>Ue(o[f],1,1,()=>{o[f]=null});let p=n&&a0(e);return{c(){pt(t.$$.fragment);for(let f=0;f<o.length;f+=1)o[f].c();r=Kt(),p&&p.c(),u=Kt()},l(f){vt(t.$$.fragment,f);for(let c=0;c<o.length;c+=1)o[c].l(f);r=Kt(),p&&p.l(f),u=Kt()},m(f,c){gt(t,f,c);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(f,c);Ce(f,r,c),p&&p.m(f,c),Ce(f,u,c),a=!0},p(f,c){const d={};if(c&1&&(d.xy=f[0]),c&2&&(d.radius=f[1]),t.$set(d),c&895){l=Object.entries(f[5].weightedPrompts);let m;for(m=0;m<l.length;m+=1){const y=n0(f,l,m);o[m]?(o[m].p(y,c),xe(o[m],1)):(o[m]=u0(y),o[m].c(),xe(o[m],1),o[m].m(r.parentNode,r))}for(_n(),m=l.length;m<o.length;m+=1)h(m);Dn()}c&32&&(n=Object.entries(f[5].weightedPrompts).length>0),n?p?(p.p(f,c),c&32&&xe(p,1)):(p=a0(f),p.c(),xe(p,1),p.m(u.parentNode,u)):p&&(_n(),Ue(p,1,1,()=>{p=null}),Dn())},i(f){if(!a){xe(t.$$.fragment,f);for(let c=0;c<l.length;c+=1)xe(o[c]);xe(p),a=!0}},o(f){Ue(t.$$.fragment,f),o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)Ue(o[c]);Ue(p),a=!1},d(f){mt(t,f),nf(o,f),f&&V(r),p&&p.d(f),f&&V(u)}}}function u0(e){let t,r,n,u,a;t=new fp({props:{p1:qn(e[0],e[5].circleMarker,e[1]),p2:e[6][e[18]].xy}});function l(){return e[12](e[18])}return r=new na({props:{xy:e[6][e[18]].xy,radius:e[2],color:"rgba(76,97,141, 1)",handleMouseDown:l}}),n=new ks({props:{xy:e[9](e[6][e[18]].xy,rn(e[3],e[19].text.length,e[4])),color:`rgba(255,255,255,${xr(e[6][e[18]].unitWeight)}`,wh:rn(e[3],e[19].text.length,e[4]),fontSize:e[4],text:e[19].text}}),u=new xE({props:{xy:gn(Hr(qn(e[0],e[5].circleMarker,e[1]),e[6][e[18]].xy),.5),weight:ai(e[5],e[18]),radius:15,textColor:`rgba(255,255,255,${xr(e[6][e[18]].unitWeight)}`,bgColor:"rgb(8, 11, 22)"}}),{c(){pt(t.$$.fragment),pt(r.$$.fragment),pt(n.$$.fragment),pt(u.$$.fragment)},l(o){vt(t.$$.fragment,o),vt(r.$$.fragment,o),vt(n.$$.fragment,o),vt(u.$$.fragment,o)},m(o,h){gt(t,o,h),gt(r,o,h),gt(n,o,h),gt(u,o,h),a=!0},p(o,h){e=o;const p={};h&35&&(p.p1=qn(e[0],e[5].circleMarker,e[1])),h&96&&(p.p2=e[6][e[18]].xy),t.$set(p);const f={};h&96&&(f.xy=e[6][e[18]].xy),h&4&&(f.radius=e[2]),h&32&&(f.handleMouseDown=l),r.$set(f);const c={};h&120&&(c.xy=e[9](e[6][e[18]].xy,rn(e[3],e[19].text.length,e[4]))),h&96&&(c.color=`rgba(255,255,255,${xr(e[6][e[18]].unitWeight)}`),h&56&&(c.wh=rn(e[3],e[19].text.length,e[4])),h&16&&(c.fontSize=e[4]),h&32&&(c.text=e[19].text),n.$set(c);const d={};h&99&&(d.xy=gn(Hr(qn(e[0],e[5].circleMarker,e[1]),e[6][e[18]].xy),.5)),h&32&&(d.weight=ai(e[5],e[18])),h&96&&(d.textColor=`rgba(255,255,255,${xr(e[6][e[18]].unitWeight)}`),u.$set(d)},i(o){a||(xe(t.$$.fragment,o),xe(r.$$.fragment,o),xe(n.$$.fragment,o),xe(u.$$.fragment,o),a=!0)},o(o){Ue(t.$$.fragment,o),Ue(r.$$.fragment,o),Ue(n.$$.fragment,o),Ue(u.$$.fragment,o),a=!1},d(o){mt(t,o),mt(r,o),mt(n,o),mt(u,o)}}}function a0(e){let t,r;return t=new na({props:{xy:qn(e[0],e[5].circleMarker,e[1]),radius:10,color:"rgba(136,157,191, 1)",handleMouseDown:e[13]}}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,u){gt(t,n,u),r=!0},p(n,u){const a={};u&35&&(a.xy=qn(n[0],n[5].circleMarker,n[1])),t.$set(a)},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function LE(e){let t,r,n,u,a=e[6]&&e[5].weightedPrompts&&i0(e);return{c(){t=Et("svg"),a&&a.c(),this.h()},l(l){t=Ct(l,"svg",{id:!0,class:!0});var o=ie(t);a&&a.l(o),o.forEach(V),this.h()},h(){T(t,"id","svg"),T(t,"class","w-full h-full")},m(l,o){Ce(l,t,o),a&&a.m(t,null),r=!0,n||(u=[ke(t,"mousemove",e[10]),ke(t,"mouseup",e[7]),ke(t,"dblclick",e[11])],n=!0)},p(l,[o]){l[6]&&l[5].weightedPrompts?a?(a.p(l,o),o&96&&xe(a,1)):(a=i0(l),a.c(),xe(a,1),a.m(t,null)):a&&(_n(),Ue(a,1,1,()=>{a=null}),Dn())},i(l){r||(xe(a),r=!0)},o(l){Ue(a),r=!1},d(l){l&&V(t),a&&a.d(),n=!1,Ur(u)}}}function s0(e,t){return e?Object.entries(e).reduce((r,[n,u],a)=>{const l=r[n]||a*(360/Object.keys(e).length)-90;return r[n]=l,r},t):null}function UE(e,t,r){let n,u;Bt(e,yn,S=>r(5,u=S));let{center:a=[450,450]}=t,{radius:l=250}=t,{pointRadius:o=10}=t,{textWidth:h=150}=t,{fontSize:p=13}=t,f=[0,0],c=null;function d(S){c=null}function m(S){c=S}function y(S,O){let P=Ai(S,a,l)[0]-180;P<0&&(P+=360);const I=cp(Rs(O),P);return Hr(S,I)}function g(S){const O=TE(S,a,l)?Ai(S,a,l):Ai(Gl(S,a,l),a,l);r(6,n=C(u.weightedPrompts,a,l,u.circleWeightScaling,u.circleExponentialScaling,O,u.circleAngles))}function _(S){if(f=zi(S),c==="main")g(f);else if(c){const O={...u.weightedPrompts[c]},P=Gl(f,a,l),I=Ai(P,a,l)[0],N={...u.circleAngles};N[O.id]=I;const G={...u.weightedPrompts};G[c]=O,r(6,n=C(G,a,l,u.circleWeightScaling,u.circleExponentialScaling,u.circleMarker,N))}}function b(S){f=zi(S),g(f)}function C(S,O,P,I,N,G,L){if(!S||!O||!P||!I||!G)return null;let q=Object.entries(S).reduce((z,[W,re])=>(z[W]={xy:qn(O,[L[W],1],P)},z),{});q=Object.entries(q).reduce((z,[W,re])=>(z[W]={...z[W],distance:Xa(re.xy,qn(O,G,P))},z),q);const $=Object.values(q).reduce((z,W)=>z+W.distance,0);q=Object.entries(q).reduce((z,[W,re])=>(z[W]={...z[W],unitDistance:Math.round(re.distance/$*100)/100},z),q),q=Object.entries(q).reduce((z,[W,re])=>(z[W]={...z[W],invertedUnitDistance:Math.round((1-re.unitDistance)*100)/100},z),q),q=Object.entries(q).reduce((z,[W,re])=>(N?z[W]={...z[W],unitWeight:Math.round(Math.pow(1-re.distance/(2*P),I)*100)/100}:z[W]={...z[W],unitWeight:Math.round((1-re.distance/(2*P))*100)/100},z),q);const H={...S};return Object.entries(q).forEach(([z,W])=>{H[z].circleWeight=W.unitWeight}),Ot.update({...u,circleMarker:G,weightedPrompts:H,circleAngles:L}),q}const w=S=>m(S),B=()=>m("main");return e.$$set=S=>{"center"in S&&r(0,a=S.center),"radius"in S&&r(1,l=S.radius),"pointRadius"in S&&r(2,o=S.pointRadius),"textWidth"in S&&r(3,h=S.textWidth),"fontSize"in S&&r(4,p=S.fontSize)},e.$$.update=()=>{e.$$.dirty&32&&Object.keys(u.circleAngles).length!==Object.keys(u.weightedPrompts).length&&Ot.update({...u,circleAngles:s0(u.weightedPrompts,{})}),e.$$.dirty&35&&r(6,n=C(u.weightedPrompts,a,l,u.circleWeightScaling,u.circleExponentialScaling,u.circleMarker,u.circleAngles||s0(u.weightedPrompts,{})))},[a,l,o,h,p,u,n,d,m,y,_,b,w,B]}class VE extends kt{constructor(t){super(),Rt(this,t,UE,LE,Lt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function o0(e){let t,r,n,u,a,l,o,h;return{c(){t=se("div"),r=se("label"),n=se("span"),u=Ze("Scaling Power"),a=Ge(),l=se("input"),this.h()},l(p){t=oe(p,"DIV",{class:!0});var f=ie(t);r=oe(f,"LABEL",{class:!0});var c=ie(r);n=oe(c,"SPAN",{class:!0});var d=ie(n);u=$e(d,"Scaling Power"),d.forEach(V),c.forEach(V),a=Ke(f),l=oe(f,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),f.forEach(V),this.h()},h(){T(n,"class","label-text"),T(r,"class","label"),T(l,"type","range"),T(l,"min","0.5"),T(l,"max","3"),T(l,"step","0.1"),T(l,"class","range"),T(t,"class","w-full px-2")},m(p,f){Ce(p,t,f),Y(t,r),Y(r,n),Y(n,u),Y(t,a),Y(t,l),wi(l,e[0]),o||(h=[ke(l,"change",e[6]),ke(l,"input",e[6])],o=!0)},p(p,f){f&1&&wi(l,p[0])},d(p){p&&V(t),o=!1,Ur(h)}}}function jE(e){let t,r,n,u,a,l,o,h,p,f,c,d,m,y,g;r=new VE({props:{center:[Math.round(e[2]/2),Math.round(e[3]/2)],radius:Math.round(Math.min(e[2],e[3])/2)-150}});let _=e[1]&&o0(e);return{c(){t=se("div"),pt(r.$$.fragment),u=Ge(),a=se("div"),l=se("div"),o=se("label"),h=se("span"),p=Ze("Exponential Scaling"),f=Ge(),c=se("input"),d=Ge(),_&&_.c(),this.h()},l(b){t=oe(b,"DIV",{class:!0});var C=ie(t);vt(r.$$.fragment,C),C.forEach(V),u=Ke(b),a=oe(b,"DIV",{class:!0});var w=ie(a);l=oe(w,"DIV",{class:!0});var B=ie(l);o=oe(B,"LABEL",{class:!0});var S=ie(o);h=oe(S,"SPAN",{class:!0});var O=ie(h);p=$e(O,"Exponential Scaling"),O.forEach(V),S.forEach(V),f=Ke(B),c=oe(B,"INPUT",{type:!0,class:!0}),B.forEach(V),d=Ke(w),_&&_.l(w),w.forEach(V),this.h()},h(){T(t,"class","w-full h-full"),Fs(()=>e[4].call(t)),T(h,"class","label-text"),T(o,"class","label"),T(c,"type","checkbox"),T(c,"class","toggle"),T(l,"class","w-52 px-2"),T(a,"class","px-2 py-4 pb-0 flex")},m(b,C){Ce(b,t,C),gt(r,t,null),n=Ss(t,e[4].bind(t)),Ce(b,u,C),Ce(b,a,C),Y(a,l),Y(l,o),Y(o,h),Y(h,p),Y(l,f),Y(l,c),c.checked=e[1],Y(a,d),_&&_.m(a,null),m=!0,y||(g=ke(c,"change",e[5]),y=!0)},p(b,[C]){const w={};C&12&&(w.center=[Math.round(b[2]/2),Math.round(b[3]/2)]),C&12&&(w.radius=Math.round(Math.min(b[2],b[3])/2)-150),r.$set(w),C&2&&(c.checked=b[1]),b[1]?_?_.p(b,C):(_=o0(b),_.c(),_.m(a,null)):_&&(_.d(1),_=null)},i(b){m||(xe(r.$$.fragment,b),m=!0)},o(b){Ue(r.$$.fragment,b),m=!1},d(b){b&&V(t),mt(r),n(),b&&V(u),b&&V(a),_&&_.d(),y=!1,g()}}}function qE(e,t,r){let n;Bt(e,yn,c=>r(7,n=c));let u,a,l=n.circleWeightScaling||2,o=xd(n.circleExponentialScaling)?!0:n.circleExponentialScaling;function h(){u=this.clientWidth,a=this.clientHeight,r(2,u),r(3,a)}function p(){o=this.checked,r(1,o)}function f(){l=Gb(this.value),r(0,l)}return e.$$.update=()=>{e.$$.dirty&3&&Ot.update({...Ot.get(),circleExponentialScaling:o,circleWeightScaling:l})},[l,o,u,a,h,p,f]}class zE extends kt{constructor(t){super(),Rt(this,t,qE,jE,Lt,{})}}function WE(e){let t,r,n,u,a,l,o;return{c(){t=Et("rect"),this.h()},l(h){t=Ct(h,"rect",{x:!0,y:!0,width:!0,height:!0}),ie(t).forEach(V),this.h()},h(){T(t,"x",r=e[0][0]),T(t,"y",n=e[0][1]),T(t,"width",u=Math.max(e[1][0],0)),T(t,"height",a=Math.max(e[1][1],0)),Qt(t,"fill",e[2])},m(h,p){Ce(h,t,p),l||(o=[ke(t,"mouseover",function(){el(e[4])&&e[4].apply(this,arguments)}),ke(t,"mouseout",function(){el(e[5])&&e[5].apply(this,arguments)}),ke(t,"mousedown",function(){el(e[3])&&e[3].apply(this,arguments)})],l=!0)},p(h,[p]){e=h,p&1&&r!==(r=e[0][0])&&T(t,"x",r),p&1&&n!==(n=e[0][1])&&T(t,"y",n),p&2&&u!==(u=Math.max(e[1][0],0))&&T(t,"width",u),p&2&&a!==(a=Math.max(e[1][1],0))&&T(t,"height",a),p&4&&Qt(t,"fill",e[2])},i:Ie,o:Ie,d(h){h&&V(t),l=!1,Ur(o)}}}function HE(e,t,r){let{xy:n=[500,500]}=t,{wh:u=[100,100]}=t,{color:a="rgba(46,67,101, 0.4)"}=t,{handleMouseDown:l=p=>{}}=t,{handleMouseOver:o=p=>{}}=t,{handleMouseOut:h=p=>{}}=t;return e.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,u=p.wh),"color"in p&&r(2,a=p.color),"handleMouseDown"in p&&r(3,l=p.handleMouseDown),"handleMouseOver"in p&&r(4,o=p.handleMouseOver),"handleMouseOut"in p&&r(5,h=p.handleMouseOut)},[n,u,a,l,o,h]}class al extends kt{constructor(t){super(),Rt(this,t,HE,WE,Lt,{xy:0,wh:1,color:2,handleMouseDown:3,handleMouseOver:4,handleMouseOut:5})}}function l0(e,t,r){const n=e.slice();return n[51]=t[r][0],n[52]=t[r][1],n[53]=t[r][2],n}function f0(e,t){let r,n,u,a,l,o;n=new ks({props:{xy:[t[3][0]+t[0],t[3][1]+t[52]*t[4]+t[52]],color:`rgba(255,255,255,${xr(t[53].barWeight/t[12]||0)})`,wh:t[5][t[51]],text:t[53].text,textAlign:"right",fontSize:t[1]}});function h(...g){return t[39](t[51],...g)}function p(...g){return t[40](t[51],...g)}u=new al({props:{color:t[13](0),handleMouseOver:h,handleMouseOut:p,xy:[t[10],t[3][1]+t[52]*t[4]+t[52]],wh:[t[11],t[4]-2]}});function f(...g){return t[41](t[51],...g)}function c(...g){return t[42](t[51],...g)}a=new al({props:{color:t[8]===t[51]||t[7]===t[51]||t[9]===t[51]?t[13](xr((t[53].barWeight||0)/t[12]+.15)):t[13](xr(t[53].barWeight||0)),handleMouseOver:f,handleMouseOut:c,xy:[t[10],t[3][1]+t[52]*t[4]+t[52]],wh:[(t[53].barWeight||0)*t[11],t[4]-2]}});function d(...g){return t[43](t[51],...g)}function m(...g){return t[44](t[51],...g)}function y(...g){return t[45](t[51],...g)}return l=new al({props:{color:t[9]===t[51]?t[15]:t[14],handleMouseOver:d,handleMouseOut:m,handleMouseDown:y,xy:[t[10]+(t[53].barWeight||0)*t[11],t[3][1]+t[52]*t[4]+t[52]],wh:[t[2],t[4]-2]}}),{key:e,first:null,c(){r=Kt(),pt(n.$$.fragment),pt(u.$$.fragment),pt(a.$$.fragment),pt(l.$$.fragment),this.h()},l(g){r=Kt(),vt(n.$$.fragment,g),vt(u.$$.fragment,g),vt(a.$$.fragment,g),vt(l.$$.fragment,g),this.h()},h(){this.first=r},m(g,_){Ce(g,r,_),gt(n,g,_),gt(u,g,_),gt(a,g,_),gt(l,g,_),o=!0},p(g,_){t=g;const b={};_[0]&89&&(b.xy=[t[3][0]+t[0],t[3][1]+t[52]*t[4]+t[52]]),_[0]&4160&&(b.color=`rgba(255,255,255,${xr(t[53].barWeight/t[12]||0)})`),_[0]&96&&(b.wh=t[5][t[51]]),_[0]&64&&(b.text=t[53].text),_[0]&2&&(b.fontSize=t[1]),n.$set(b);const C={};_[0]&64&&(C.handleMouseOver=h),_[0]&64&&(C.handleMouseOut=p),_[0]&1112&&(C.xy=[t[10],t[3][1]+t[52]*t[4]+t[52]]),_[0]&2064&&(C.wh=[t[11],t[4]-2]),u.$set(C);const w={};_[0]&5056&&(w.color=t[8]===t[51]||t[7]===t[51]||t[9]===t[51]?t[13](xr((t[53].barWeight||0)/t[12]+.15)):t[13](xr(t[53].barWeight||0))),_[0]&64&&(w.handleMouseOver=f),_[0]&64&&(w.handleMouseOut=c),_[0]&1112&&(w.xy=[t[10],t[3][1]+t[52]*t[4]+t[52]]),_[0]&2128&&(w.wh=[(t[53].barWeight||0)*t[11],t[4]-2]),a.$set(w);const B={};_[0]&576&&(B.color=t[9]===t[51]?t[15]:t[14]),_[0]&64&&(B.handleMouseOver=d),_[0]&64&&(B.handleMouseOut=m),_[0]&64&&(B.handleMouseDown=y),_[0]&3160&&(B.xy=[t[10]+(t[53].barWeight||0)*t[11],t[3][1]+t[52]*t[4]+t[52]]),_[0]&20&&(B.wh=[t[2],t[4]-2]),l.$set(B)},i(g){o||(xe(n.$$.fragment,g),xe(u.$$.fragment,g),xe(a.$$.fragment,g),xe(l.$$.fragment,g),o=!0)},o(g){Ue(n.$$.fragment,g),Ue(u.$$.fragment,g),Ue(a.$$.fragment,g),Ue(l.$$.fragment,g),o=!1},d(g){g&&V(r),mt(n,g),mt(u,g),mt(a,g),mt(l,g)}}}function GE(e){let t,r=[],n=new Map,u,a,l,o=e[6];const h=p=>p[51];for(let p=0;p<o.length;p+=1){let f=l0(e,o,p),c=h(f);n.set(c,r[p]=f0(c,f))}return{c(){t=Et("svg");for(let p=0;p<r.length;p+=1)r[p].c();this.h()},l(p){t=Ct(p,"svg",{id:!0,class:!0});var f=ie(t);for(let c=0;c<r.length;c+=1)r[c].l(f);f.forEach(V),this.h()},h(){T(t,"id","svg"),T(t,"class","w-full h-full")},m(p,f){Ce(p,t,f);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(t,null);u=!0,a||(l=[ke(t,"mousemove",e[25]),ke(t,"mouseup",e[24]),ke(t,"dblclick",e[23])],a=!0)},p(p,f){f[0]&8388607&&(o=p[6],_n(),r=Si(r,f,h,1,p,o,n,t,Sd,f0,null,l0),Dn())},i(p){if(!u){for(let f=0;f<o.length;f+=1)xe(r[f]);u=!0}},o(p){for(let f=0;f<r.length;f+=1)Ue(r[f]);u=!1},d(p){p&&V(t);for(let f=0;f<r.length;f+=1)r[f].d();a=!1,Ur(l)}}}function KE(e,t,r){let n,u,a,l,o,h,p,f,c,d,m,y,g;Bt(e,yn,Ae=>r(38,g=Ae));let{center:_=[0,0]}=t,{dimensions:b=[100,100]}=t,{maxWidth:C=1e3}=t,{pointRadius:w=10}=t,{textWidth:B=250}=t,{horizontalPad:S=20}=t,{verticalPad:O=2}=t,{textBarPad:P=10}=t,{fontSize:I=13}=t,{handleWidth:N=20}=t,G=Ae=>`rgba(46,67,101, ${Ae})`,L=Ae=>`rgba(76,97,131, ${Ae})`,q=null,$=null,H=null,z=L(.3),W=L(.8),re=null,ee=null,Q=null;function le(Ae,we){r(8,$=Ae)}function me(Ae,we){r(7,q=Ae)}function Se(Ae,we){r(9,H=Ae)}function be(Ae,we){r(8,$=null)}function Ne(Ae,we){r(7,q=null)}function je(Ae,we){r(9,H=null)}function Me(Ae,we){re=Ae}function it(Ae){let we=re||$||H||q;if(!we)return;const yt=zi(Ae);Te(we,yt)}function qe(Ae){re=null,clearInterval(ee),ee=null,Q=null}function Te(Ae,we){let Tt=Math.min(d,Math.max(0,we[0]-m))/d,zt={...g.weightedPrompts},R={...zt[Ae]};R.barWeight=Tt,zt[Ae]=R,Ot.update({...g,weightedPrompts:zt})}function Re(Ae){let we=re;if(!we)return;const yt=zi(Ae);if(Te(we,yt),re){let Tt=m+d+N,zt=m;yt[0]>Tt&&!ee?(Q=Date.now(),ee=setInterval(()=>{if(Date.now()-Q<1e3)return;let R={...g.weightedPrompts};const j=Object.entries(R).reduce((Z,[fe,ne])=>(fe!==re?Z[fe]={...ne,barWeight:Math.max(0,(ne.barWeight||0)-.01)}:Z[fe]={...ne,barWeight:Math.min(1,(ne.barWeight||0)+.01)},Z),{});Ot.update({...g,weightedPrompts:j})},100)):yt[0]<zt&&!ee?(Q=Date.now(),ee=setInterval(()=>{if(Date.now()-Q<1e3)return;let R={...g.weightedPrompts};const j=Object.entries(R).reduce((Z,[fe,ne])=>(fe!==re?Z[fe]={...ne,barWeight:Math.min(1,(ne.barWeight||0)+.01)}:Z[fe]={...ne,barWeight:Math.max(0,(ne.barWeight||0)-.01)},Z),{});Ot.update({...g,weightedPrompts:j})},100)):yt[0]<Tt&&yt[0]>zt&&ee&&(clearInterval(ee),ee=null,Q=null)}}const lt=(Ae,we)=>me(Ae),et=(Ae,we)=>Ne(),ut=(Ae,we)=>le(Ae),tt=(Ae,we)=>be(),rt=(Ae,we)=>Se(Ae),ze=(Ae,we)=>je(),We=(Ae,we)=>Me(Ae);return e.$$set=Ae=>{"center"in Ae&&r(26,_=Ae.center),"dimensions"in Ae&&r(27,b=Ae.dimensions),"maxWidth"in Ae&&r(28,C=Ae.maxWidth),"pointRadius"in Ae&&r(29,w=Ae.pointRadius),"textWidth"in Ae&&r(30,B=Ae.textWidth),"horizontalPad"in Ae&&r(0,S=Ae.horizontalPad),"verticalPad"in Ae&&r(31,O=Ae.verticalPad),"textBarPad"in Ae&&r(32,P=Ae.textBarPad),"fontSize"in Ae&&r(1,I=Ae.fontSize),"handleWidth"in Ae&&r(2,N=Ae.handleWidth)},e.$$.update=()=>{e.$$.dirty[1]&128&&r(6,n=Object.entries(g.weightedPrompts).map(([Ae,we],yt)=>[Ae,yt,we])),e.$$.dirty[1]&128&&r(36,u=Object.keys(g.weightedPrompts).length),e.$$.dirty[0]&134217728&&r(35,a=[b[0]-50,b[1]-50]),e.$$.dirty[0]&1073741890&&r(5,l=n.reduce((Ae,[we,yt,Tt])=>{const[zt,R]=rn(B,Tt.text.length,I);return Ae[we]=[zt,R],Ae},{})),e.$$.dirty[0]&32&&r(37,o=Math.max(...Object.values(l).map(([Ae,we])=>we))),e.$$.dirty[1]&112&&r(4,h=Math.min(a[1]/u,o)),e.$$.dirty[0]&16|e.$$.dirty[1]&33&&r(34,p=h*u+O*Math.max(u-1,0)),e.$$.dirty[0]&268435456|e.$$.dirty[1]&16&&r(33,f=Math.min(a[0],C)),e.$$.dirty[0]&67108864|e.$$.dirty[1]&12&&r(3,c=[_[0]-f/2,_[1]-p/2]),e.$$.dirty[0]&1073741829|e.$$.dirty[1]&6&&r(11,d=f-P-B-2*S-N),e.$$.dirty[0]&1073741833|e.$$.dirty[1]&2&&r(10,m=c[0]+P+B+S),e.$$.dirty[1]&128&&r(12,y=Math.max(...Object.values(g.weightedPrompts).map(Ae=>Ae.barWeight||0)))},[S,I,N,c,h,l,n,q,$,H,m,d,y,G,z,W,le,me,Se,be,Ne,je,Me,it,qe,Re,_,b,C,w,B,O,P,f,p,a,u,o,g,lt,et,ut,tt,rt,ze,We]}class YE extends kt{constructor(t){super(),Rt(this,t,KE,GE,Lt,{center:26,dimensions:27,maxWidth:28,pointRadius:29,textWidth:30,horizontalPad:0,verticalPad:31,textBarPad:32,fontSize:1,handleWidth:2},null,[-1,-1])}}function ZE(e){let t,r,n,u;return r=new YE({props:{dimensions:e[2],center:e[3]}}),{c(){t=se("div"),pt(r.$$.fragment),this.h()},l(a){t=oe(a,"DIV",{class:!0});var l=ie(t);vt(r.$$.fragment,l),l.forEach(V),this.h()},h(){T(t,"class","w-full h-full"),Fs(()=>e[4].call(t))},m(a,l){Ce(a,t,l),gt(r,t,null),n=Ss(t,e[4].bind(t)),u=!0},p(a,[l]){const o={};l&4&&(o.dimensions=a[2]),l&8&&(o.center=a[3]),r.$set(o)},i(a){u||(xe(r.$$.fragment,a),u=!0)},o(a){Ue(r.$$.fragment,a),u=!1},d(a){a&&V(t),mt(r),n()}}}function $E(e,t,r){let n,u,a,l;function o(){a=this.clientWidth,l=this.clientHeight,r(0,a),r(1,l)}return e.$$.update=()=>{e.$$.dirty&3&&r(2,n=[a||0,l||0]),e.$$.dirty&4&&r(3,u=Rs(n))},[a,l,n,u,o]}class XE extends kt{constructor(t){super(),Rt(this,t,$E,ZE,Lt,{})}}function JE(e){let t,r,n,u,a;return{c(){t=Et("line"),this.h()},l(l){t=Ct(l,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),ie(t).forEach(V),this.h()},h(){T(t,"x1",r=e[0][0]),T(t,"y1",n=e[0][1]),T(t,"x2",u=e[1][0]),T(t,"y2",a=e[1][1]),T(t,"stroke",e[3]),T(t,"stroke-width",e[2])},m(l,o){Ce(l,t,o)},p(l,[o]){o&1&&r!==(r=l[0][0])&&T(t,"x1",r),o&1&&n!==(n=l[0][1])&&T(t,"y1",n),o&2&&u!==(u=l[1][0])&&T(t,"x2",u),o&2&&a!==(a=l[1][1])&&T(t,"y2",a),o&8&&T(t,"stroke",l[3]),o&4&&T(t,"stroke-width",l[2])},i:Ie,o:Ie,d(l){l&&V(t)}}}function QE(e,t,r){let{p1:n=[100,100]}=t,{p2:u=[100,100]}=t,{stroke:a=2}=t,{color:l="rgba(46,67,101, 0.4)"}=t;return e.$$set=o=>{"p1"in o&&r(0,n=o.p1),"p2"in o&&r(1,u=o.p2),"stroke"in o&&r(2,a=o.stroke),"color"in o&&r(3,l=o.color)},[n,u,a,l]}class e2 extends kt{constructor(t){super(),Rt(this,t,QE,JE,Lt,{p1:0,p2:1,stroke:2,color:3})}}function c0(e,t,r){const n=e.slice();return n[25]=t[r][0],n[26]=t[r][1],n}function h0(e){let t,r,n;t=new lp({props:{xy:e[0],radius:e[1]}});let u=Object.entries(e[5].weightedPrompts),a=[];for(let o=0;o<u.length;o+=1)a[o]=d0(c0(e,u,o));const l=o=>Ue(a[o],1,1,()=>{a[o]=null});return{c(){pt(t.$$.fragment);for(let o=0;o<a.length;o+=1)a[o].c();r=Kt()},l(o){vt(t.$$.fragment,o);for(let h=0;h<a.length;h+=1)a[h].l(o);r=Kt()},m(o,h){gt(t,o,h);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(o,h);Ce(o,r,h),n=!0},p(o,h){const p={};if(h&1&&(p.xy=o[0]),h&2&&(p.radius=o[1]),t.$set(p),h&6015){u=Object.entries(o[5].weightedPrompts);let f;for(f=0;f<u.length;f+=1){const c=c0(o,u,f);a[f]?(a[f].p(c,h),xe(a[f],1)):(a[f]=d0(c),a[f].c(),xe(a[f],1),a[f].m(r.parentNode,r))}for(_n(),f=u.length;f<a.length;f+=1)l(f);Dn()}},i(o){if(!n){xe(t.$$.fragment,o);for(let h=0;h<u.length;h+=1)xe(a[h]);n=!0}},o(o){Ue(t.$$.fragment,o),a=a.filter(Boolean);for(let h=0;h<a.length;h+=1)Ue(a[h]);n=!1},d(o){mt(t,o),nf(a,o),o&&V(r)}}}function d0(e){let t,r,n,u,a,l,o,h,p;t=new e2({props:{p1:e[0],p2:e[6][e[25]].xy}});function f(...m){return e[13](e[25],...m)}function c(...m){return e[14](e[25],...m)}function d(){return e[15](e[25])}return a=new na({props:{xy:e[6][e[25]].xy,radius:e[2],color:"rgba(76,97,141, 1)",handleMouseDown:d}}),l=new ks({props:{xy:e[9](e[6][e[25]].textXY,rn(e[3],e[26].text.length,e[4])),color:`rgba(255,255,255,${xr(e[6][e[25]].unitWeight)}`,wh:rn(e[3],e[26].text.length,e[4]),fontSize:e[4],text:e[26].text}}),{c(){pt(t.$$.fragment),r=Et("path"),pt(a.$$.fragment),pt(l.$$.fragment),this.h()},l(m){vt(t.$$.fragment,m),r=Ct(m,"path",{d:!0,fill:!0}),ie(r).forEach(V),vt(a.$$.fragment,m),vt(l.$$.fragment,m),this.h()},h(){T(r,"d",n=v0(e[0],e[1],e[6][e[25]].angle,e[6][e[25]].angle+e[6][e[25]].angleDiff)),T(r,"fill",u=`rgba(26,47,91,${xr(e[6][e[25]].unitWeight)/4}`)},m(m,y){gt(t,m,y),Ce(m,r,y),gt(a,m,y),gt(l,m,y),o=!0,h||(p=[ke(r,"mousewheel",f),ke(r,"mousedown",c)],h=!0)},p(m,y){e=m;const g={};y&1&&(g.p1=e[0]),y&96&&(g.p2=e[6][e[25]].xy),t.$set(g),(!o||y&99&&n!==(n=v0(e[0],e[1],e[6][e[25]].angle,e[6][e[25]].angle+e[6][e[25]].angleDiff)))&&T(r,"d",n),(!o||y&96&&u!==(u=`rgba(26,47,91,${xr(e[6][e[25]].unitWeight)/4}`))&&T(r,"fill",u);const _={};y&96&&(_.xy=e[6][e[25]].xy),y&4&&(_.radius=e[2]),y&32&&(_.handleMouseDown=d),a.$set(_);const b={};y&120&&(b.xy=e[9](e[6][e[25]].textXY,rn(e[3],e[26].text.length,e[4]))),y&96&&(b.color=`rgba(255,255,255,${xr(e[6][e[25]].unitWeight)}`),y&56&&(b.wh=rn(e[3],e[26].text.length,e[4])),y&16&&(b.fontSize=e[4]),y&32&&(b.text=e[26].text),l.$set(b)},i(m){o||(xe(t.$$.fragment,m),xe(a.$$.fragment,m),xe(l.$$.fragment,m),o=!0)},o(m){Ue(t.$$.fragment,m),Ue(a.$$.fragment,m),Ue(l.$$.fragment,m),o=!1},d(m){mt(t,m),m&&V(r),mt(a,m),mt(l,m),h=!1,Ur(p)}}}function t2(e){let t,r,n,u,a=e[6]&&e[5].weightedPrompts&&h0(e);return{c(){t=Et("svg"),a&&a.c(),this.h()},l(l){t=Ct(l,"svg",{id:!0,class:!0});var o=ie(t);a&&a.l(o),o.forEach(V),this.h()},h(){T(t,"id","svg"),T(t,"class","w-full h-full")},m(l,o){Ce(l,t,o),a&&a.m(t,null),r=!0,n||(u=[ke(t,"mousemove",e[11]),ke(t,"mouseup",e[7])],n=!0)},p(l,[o]){l[6]&&l[5].weightedPrompts?a?(a.p(l,o),o&96&&xe(a,1)):(a=h0(l),a.c(),xe(a,1),a.m(t,null)):a&&(_n(),Ue(a,1,1,()=>{a=null}),Dn())},i(l){r||(xe(a),r=!0)},o(l){Ue(a),r=!1},d(l){l&&V(t),a&&a.d(),n=!1,Ur(u)}}}function p0(e,t){return e?Object.entries(e).reduce((r,[n,u],a)=>{const l=r[n]||a*(360/Object.keys(e).length)-90;return r[n]=l,r},t):null}function r2(e,t){if(e.length!==t.length)return!1;const r=e.length;let n=-1;for(let u=0;u<r;u++)if(t[u]===e[0]){n=u;break}if(n===-1)return!1;for(let u=0;u<r;u++)if(e[u]!==t[(u+n)%r])return!1;return!0}function en(e){return e<0?360+-1*(Math.abs(e)%360):e>360?e%360:e}function v0(e,t,r,n){const u=e[0]+t*Math.cos(r*Math.PI/180),a=e[1]+t*Math.sin(r*Math.PI/180),l=e[0]+t*Math.cos(n*Math.PI/180),o=e[1]+t*Math.sin(n*Math.PI/180),h=n-r<=180?"0":"1";return`M${e[0]},${e[1]} L${u},${a} A${t},${t} 0 ${h} 1 ${l},${o} Z`}function n2(e,t,r){let n,u;Bt(e,yn,L=>r(5,u=L));let{center:a=[450,450]}=t,{radius:l=250}=t,{pointRadius:o=10}=t,{textWidth:h=150}=t,{fontSize:p=13}=t,f=[0,0],c=null,d={},m=null,y;function g(L){m=null,y=null,c=null,d={}}function _(L){m=L}function b(L,q){let $=Ai(L,a,l)[0]-180;$<0&&($+=360);const H=cp(Rs(q),$);return Hr(L,H)}function C(L,q){y=q}function w(L){const q=y,$={...u.pieAngles},H=Object.entries($).sort((be,Ne)=>en(be[1])-en(Ne[1])).map(be=>be[0]),z=H.indexOf(q),W=z+1===H.length?0:z+1,re=H[W];d[q]||(d[q]=$[q]),d[re]||(d[re]=$[re]);const Q=Ai(L,a,l)[0]-c,le={...$};le[q]=en(Q+d[q]),le[re]=en(Q+d[re]);const me=Object.entries(le).sort((be,Ne)=>en(be[1])-en(Ne[1])).map(be=>be[0]);r2(H,me)&&r(6,n=P(u.weightedPrompts,a,l,le))}function B(L){const q={...u.weightedPrompts[m]},$=Gl(L,a,l),H=en(Ai($,a,l)[0]),z={...u.pieAngles};z[q.id]=H;const W={...u.weightedPrompts};W[m]=q,r(6,n=P(W,a,l,z))}function S(L){L.preventDefault(),f=zi(L),m?B(f):y?w(f):c=Ai(f,a,l)[0]}function O(L,q){L.preventDefault();const $={...u.pieAngles},H=Object.entries($).sort((ee,Q)=>en(ee[1])-en(Q[1])).map(ee=>ee[0]),z=H.indexOf(q),W=z+1===H.length?0:z+1,re=H[W];$[q]=en($[q]-L.deltaY/100),$[re]=en($[re]+L.deltaY/100),r(6,n=P(u.weightedPrompts,a,l,$))}function P(L,q,$,H){if(!L||!q||!$)return null;const z=Object.entries(L).sort((le,me)=>en(H[le[0]])-en(H[me[0]])),W=z.map((le,me)=>{const Se=me+1===z.length?0:me+1,be=H[z[Se][0]]-H[z[me][0]];return be<0?[le[0],360+be]:[le[0],be]}),re=Math.max(...W.map(le=>le[1])),ee=W.reduce((le,[me,Se])=>{({...L[me]});const be=H[me],Ne=qn(q,[be,1],$),je=qn(q,[be+.5*Se,1],$),Me=Se/re;return le[me]={xy:Ne,textXY:je,angle:be,angleDiff:Se,unitWeight:Me},le},{}),Q={...L};return Object.entries(ee).forEach(([le,me])=>{Q[le].pieWeight=me.unitWeight}),Ot.update({...u,weightedPrompts:Q,pieAngles:H}),ee}const I=(L,q)=>O(q,L),N=(L,q)=>C(q,L),G=L=>_(L);return e.$$set=L=>{"center"in L&&r(0,a=L.center),"radius"in L&&r(1,l=L.radius),"pointRadius"in L&&r(2,o=L.pointRadius),"textWidth"in L&&r(3,h=L.textWidth),"fontSize"in L&&r(4,p=L.fontSize)},e.$$.update=()=>{e.$$.dirty&32&&Object.keys(u.pieAngles||{}).length!==Object.keys(u.weightedPrompts).length&&Ot.update({...u,pieAngles:p0(u.weightedPrompts,{})}),e.$$.dirty&35&&r(6,n=P(u.weightedPrompts,a,l,u.pieAngles||p0(u.weightedPrompts,{})))},[a,l,o,h,p,u,n,g,_,b,C,S,O,I,N,G]}class i2 extends kt{constructor(t){super(),Rt(this,t,n2,t2,Lt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function u2(e){let t,r,n,u;return r=new i2({props:{center:[Math.round(e[0]/2),Math.round(e[1]/2)],radius:Math.round(Math.min(e[0],e[1])/2)-150}}),{c(){t=se("div"),pt(r.$$.fragment),this.h()},l(a){t=oe(a,"DIV",{class:!0});var l=ie(t);vt(r.$$.fragment,l),l.forEach(V),this.h()},h(){T(t,"class","w-full h-full"),Fs(()=>e[2].call(t))},m(a,l){Ce(a,t,l),gt(r,t,null),n=Ss(t,e[2].bind(t)),u=!0},p(a,[l]){const o={};l&3&&(o.center=[Math.round(a[0]/2),Math.round(a[1]/2)]),l&3&&(o.radius=Math.round(Math.min(a[0],a[1])/2)-150),r.$set(o)},i(a){u||(xe(r.$$.fragment,a),u=!0)},o(a){Ue(r.$$.fragment,a),u=!1},d(a){a&&V(t),mt(r),n()}}}function a2(e,t,r){let n,u;function a(){n=this.clientWidth,u=this.clientHeight,r(0,n),r(1,u)}return[n,u,a]}class s2 extends kt{constructor(t){super(),Rt(this,t,a2,u2,Lt,{})}}var ls={},o2={get exports(){return ls},set exports(e){ls=e}},fs={},l2={get exports(){return fs},set exports(e){fs=e}},pu=typeof Reflect=="object"?Reflect:null,g0=pu&&typeof pu.apply=="function"?pu.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},Ja;pu&&typeof pu.ownKeys=="function"?Ja=pu.ownKeys:Object.getOwnPropertySymbols?Ja=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Ja=function(t){return Object.getOwnPropertyNames(t)};function f2(e){console&&console.warn&&console.warn(e)}var hp=Number.isNaN||function(t){return t!==t};function Pt(){Pt.init.call(this)}l2.exports=Pt;fs.once=p2;Pt.EventEmitter=Pt;Pt.prototype._events=void 0;Pt.prototype._eventsCount=0;Pt.prototype._maxListeners=void 0;var m0=10;function Ls(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Pt,"defaultMaxListeners",{enumerable:!0,get:function(){return m0},set:function(e){if(typeof e!="number"||e<0||hp(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");m0=e}});Pt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Pt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||hp(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function dp(e){return e._maxListeners===void 0?Pt.defaultMaxListeners:e._maxListeners}Pt.prototype.getMaxListeners=function(){return dp(this)};Pt.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var u=t==="error",a=this._events;if(a!==void 0)u=u&&a.error===void 0;else if(!u)return!1;if(u){var l;if(r.length>0&&(l=r[0]),l instanceof Error)throw l;var o=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw o.context=l,o}var h=a[t];if(h===void 0)return!1;if(typeof h=="function")g0(h,this,r);else for(var p=h.length,f=_p(h,p),n=0;n<p;++n)g0(f[n],this,r);return!0};function pp(e,t,r,n){var u,a,l;if(Ls(r),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),l=a[t]),l===void 0)l=a[t]=r,++e._eventsCount;else if(typeof l=="function"?l=a[t]=n?[r,l]:[l,r]:n?l.unshift(r):l.push(r),u=dp(e),u>0&&l.length>u&&!l.warned){l.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=l.length,f2(o)}return e}Pt.prototype.addListener=function(t,r){return pp(this,t,r,!1)};Pt.prototype.on=Pt.prototype.addListener;Pt.prototype.prependListener=function(t,r){return pp(this,t,r,!0)};function c2(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function vp(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},u=c2.bind(n);return u.listener=r,n.wrapFn=u,u}Pt.prototype.once=function(t,r){return Ls(r),this.on(t,vp(this,t,r)),this};Pt.prototype.prependOnceListener=function(t,r){return Ls(r),this.prependListener(t,vp(this,t,r)),this};Pt.prototype.removeListener=function(t,r){var n,u,a,l,o;if(Ls(r),u=this._events,u===void 0)return this;if(n=u[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete u[t],u.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(a=-1,l=n.length-1;l>=0;l--)if(n[l]===r||n[l].listener===r){o=n[l].listener,a=l;break}if(a<0)return this;a===0?n.shift():h2(n,a),n.length===1&&(u[t]=n[0]),u.removeListener!==void 0&&this.emit("removeListener",t,o||r)}return this};Pt.prototype.off=Pt.prototype.removeListener;Pt.prototype.removeAllListeners=function(t){var r,n,u;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var a=Object.keys(n),l;for(u=0;u<a.length;++u)l=a[u],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(u=r.length-1;u>=0;u--)this.removeListener(t,r[u]);return this};function gp(e,t,r){var n=e._events;if(n===void 0)return[];var u=n[t];return u===void 0?[]:typeof u=="function"?r?[u.listener||u]:[u]:r?d2(u):_p(u,u.length)}Pt.prototype.listeners=function(t){return gp(this,t,!0)};Pt.prototype.rawListeners=function(t){return gp(this,t,!1)};Pt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):mp.call(e,t)};Pt.prototype.listenerCount=mp;function mp(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Pt.prototype.eventNames=function(){return this._eventsCount>0?Ja(this._events):[]};function _p(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function h2(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function d2(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function p2(e,t){return new Promise(function(r,n){function u(l){e.removeListener(t,a),n(l)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",u),r([].slice.call(arguments))}Dp(e,t,a,{once:!0}),t!=="error"&&v2(e,u,{once:!0})})}function v2(e,t,r){typeof e.on=="function"&&Dp(e,"error",t,r)}function Dp(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function u(a){n.once&&e.removeEventListener(t,u),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}function g2(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}var m2=g2;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var _2=function(e){return e!=null&&(bp(e)||D2(e)||!!e._isBuffer)};function bp(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function D2(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&bp(e.slice(0,0))}var b2=m2,y2=_2,A2=typeof Float64Array<"u";function w2(e,t){return e[0]-t[0]}function E2(){var e=this.stride,t=new Array(e.length),r;for(r=0;r<t.length;++r)t[r]=[Math.abs(e[r]),r];t.sort(w2);var n=new Array(t.length);for(r=0;r<n.length;++r)n[r]=t[r][1];return n}function C2(e,t){var r=["View",t,"d",e].join("");t<0&&(r="View_Nil"+e);var n=e==="generic";if(t===-1){var u="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",g=new Function(u);return g()}else if(t===0){var u="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",g=new Function("TrivialArray",u);return g(cs[e][0])}var u=["'use strict'"],a=b2(t),l=a.map(function(_){return"i"+_}),o="this.offset+"+a.map(function(_){return"this.stride["+_+"]*i"+_}).join("+"),h=a.map(function(_){return"b"+_}).join(","),p=a.map(function(_){return"c"+_}).join(",");u.push("function "+r+"(a,"+h+","+p+",d){this.data=a","this.shape=["+h+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),u.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(_){return"this.shape["+_+"]"}).join("*"),"}})"),t===1?u.push("proto.order=[0]"):(u.push("Object.defineProperty(proto,'order',{get:"),t<4?(u.push("function "+r+"_order(){"),t===2?u.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):t===3&&u.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):u.push("ORDER})")),u.push("proto.set=function "+r+"_set("+l.join(",")+",v){"),n?u.push("return this.data.set("+o+",v)}"):u.push("return this.data["+o+"]=v}"),u.push("proto.get=function "+r+"_get("+l.join(",")+"){"),n?u.push("return this.data.get("+o+")}"):u.push("return this.data["+o+"]}"),u.push("proto.index=function "+r+"_index(",l.join(),"){return "+o+"}"),u.push("proto.hi=function "+r+"_hi("+l.join(",")+"){return new "+r+"(this.data,"+a.map(function(_){return["(typeof i",_,"!=='number'||i",_,"<0)?this.shape[",_,"]:i",_,"|0"].join("")}).join(",")+","+a.map(function(_){return"this.stride["+_+"]"}).join(",")+",this.offset)}");var f=a.map(function(_){return"a"+_+"=this.shape["+_+"]"}),c=a.map(function(_){return"c"+_+"=this.stride["+_+"]"});u.push("proto.lo=function "+r+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+f.join(",")+","+c.join(","));for(var d=0;d<t;++d)u.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");u.push("return new "+r+"(this.data,"+a.map(function(_){return"a"+_}).join(",")+","+a.map(function(_){return"c"+_}).join(",")+",b)}"),u.push("proto.step=function "+r+"_step("+l.join(",")+"){var "+a.map(function(_){return"a"+_+"=this.shape["+_+"]"}).join(",")+","+a.map(function(_){return"b"+_+"=this.stride["+_+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var d=0;d<t;++d)u.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");u.push("return new "+r+"(this.data,"+a.map(function(_){return"a"+_}).join(",")+","+a.map(function(_){return"b"+_}).join(",")+",c)}");for(var m=new Array(t),y=new Array(t),d=0;d<t;++d)m[d]="a[i"+d+"]",y[d]="b[i"+d+"]";u.push("proto.transpose=function "+r+"_transpose("+l+"){"+l.map(function(_,b){return _+"=("+_+"===undefined?"+b+":"+_+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+m.join(",")+","+y.join(",")+",this.offset)}"),u.push("proto.pick=function "+r+"_pick("+l+"){var a=[],b=[],c=this.offset");for(var d=0;d<t;++d)u.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");u.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),u.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(_){return"shape["+_+"]"}).join(",")+","+a.map(function(_){return"stride["+_+"]"}).join(",")+",offset)}");var g=new Function("CTOR_LIST","ORDER",u.join(`
`));return g(cs[e],E2)}function F2(e){if(y2(e))return"buffer";if(A2)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}var cs={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function S2(e,t,r,n){if(e===void 0){var p=cs.array[0];return p([])}else typeof e=="number"&&(e=[e]);t===void 0&&(t=[e.length]);var u=t.length;if(r===void 0){r=new Array(u);for(var a=u-1,l=1;a>=0;--a)r[a]=l,l*=t[a]}if(n===void 0){n=0;for(var a=0;a<u;++a)r[a]<0&&(n-=(t[a]-1)*r[a])}for(var o=F2(e),h=cs[o];h.length<=u+1;)h.push(C2(o,h.length-1));var p=h[u+1];return p(e,t,r,n)}var Du=S2,Us={};function B2(e,t){for(var r=1,n=e.length,u=e[0],a=e[0],l=1;l<n;++l)if(a=u,u=e[l],t(u,a)){if(l===r){r++;continue}e[r++]=u}return e.length=r,e}function O2(e){for(var t=1,r=e.length,n=e[0],u=e[0],a=1;a<r;++a,u=n)if(u=n,n=e[a],n!==u){if(a===t){t++;continue}e[t++]=n}return e.length=t,e}function M2(e,t,r){return e.length===0?e:t?(r||e.sort(t),B2(e,t)):(r||e.sort(),O2(e))}var yp=M2,P2=yp;function Ap(e,t,r){var n=e.length,u=t.arrayArgs.length,a=t.indexArgs.length>0,l=[],o=[],h=0,p=0,f,c;for(f=0;f<n;++f)o.push(["i",f,"=0"].join(""));for(c=0;c<u;++c)for(f=0;f<n;++f)p=h,h=e[f],f===0?o.push(["d",c,"s",f,"=t",c,"p",h].join("")):o.push(["d",c,"s",f,"=(t",c,"p",h,"-s",p,"*t",c,"p",p,")"].join(""));for(o.length>0&&l.push("var "+o.join(",")),f=n-1;f>=0;--f)h=e[f],l.push(["for(i",f,"=0;i",f,"<s",h,";++i",f,"){"].join(""));for(l.push(r),f=0;f<n;++f){for(p=h,h=e[f],c=0;c<u;++c)l.push(["p",c,"+=d",c,"s",f].join(""));a&&(f>0&&l.push(["index[",p,"]-=s",p].join("")),l.push(["++index[",h,"]"].join(""))),l.push("}")}return l.join(`
`)}function x2(e,t,r,n){for(var u=t.length,a=r.arrayArgs.length,l=r.blockSize,o=r.indexArgs.length>0,h=[],p=0;p<a;++p)h.push(["var offset",p,"=p",p].join(""));for(var p=e;p<u;++p)h.push(["for(var j"+p+"=SS[",t[p],"]|0;j",p,">0;){"].join("")),h.push(["if(j",p,"<",l,"){"].join("")),h.push(["s",t[p],"=j",p].join("")),h.push(["j",p,"=0"].join("")),h.push(["}else{s",t[p],"=",l].join("")),h.push(["j",p,"-=",l,"}"].join("")),o&&h.push(["index[",t[p],"]=j",p].join(""));for(var p=0;p<a;++p){for(var f=["offset"+p],c=e;c<u;++c)f.push(["j",c,"*t",p,"p",t[c]].join(""));h.push(["p",p,"=(",f.join("+"),")"].join(""))}h.push(Ap(t,r,n));for(var p=e;p<u;++p)h.push("}");return h.join(`
`)}function T2(e){for(var t=0,r=e[0].length;t<r;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}function sl(e,t,r){for(var n=e.body,u=[],a=[],l=0;l<e.args.length;++l){var o=e.args[l];if(!(o.count<=0)){var h=new RegExp(o.name,"g"),p="",f=t.arrayArgs.indexOf(l);switch(t.argTypes[l]){case"offset":var c=t.offsetArgIndex.indexOf(l),d=t.offsetArgs[c];f=d.array,p="+q"+c;case"array":p="p"+f+p;var m="l"+l,y="a"+f;if(t.arrayBlockIndices[f]===0)o.count===1?r[f]==="generic"?o.lvalue?(u.push(["var ",m,"=",y,".get(",p,")"].join("")),n=n.replace(h,m),a.push([y,".set(",p,",",m,")"].join(""))):n=n.replace(h,[y,".get(",p,")"].join("")):n=n.replace(h,[y,"[",p,"]"].join("")):r[f]==="generic"?(u.push(["var ",m,"=",y,".get(",p,")"].join("")),n=n.replace(h,m),o.lvalue&&a.push([y,".set(",p,",",m,")"].join(""))):(u.push(["var ",m,"=",y,"[",p,"]"].join("")),n=n.replace(h,m),o.lvalue&&a.push([y,"[",p,"]=",m].join("")));else{for(var g=[o.name],_=[p],b=0;b<Math.abs(t.arrayBlockIndices[f]);b++)g.push("\\s*\\[([^\\]]+)\\]"),_.push("$"+(b+1)+"*t"+f+"b"+b);if(h=new RegExp(g.join(""),"g"),p=_.join("+"),r[f]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(h,[y,"[",p,"]"].join(""))}break;case"scalar":n=n.replace(h,"Y"+t.scalarArgs.indexOf(l));break;case"index":n=n.replace(h,"index");break;case"shape":n=n.replace(h,"shape");break}}}return[u.join(`
`),n,a.join(`
`)].join(`
`).trim()}function I2(e){for(var t=new Array(e.length),r=!0,n=0;n<e.length;++n){var u=e[n],a=u.match(/\d+/);a?a=a[0]:a="",u.charAt(0)===0?t[n]="u"+u.charAt(1)+a:t[n]=u.charAt(0)+a,n>0&&(r=r&&t[n]===t[n-1])}return r?t[0]:t.join("")}function N2(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,n=new Array(e.arrayArgs.length),u=new Array(e.arrayArgs.length),a=0;a<e.arrayArgs.length;++a)u[a]=t[2*a],n[a]=t[2*a+1];for(var l=[],o=[],h=[],p=[],f=[],a=0;a<e.arrayArgs.length;++a){e.arrayBlockIndices[a]<0?(h.push(0),p.push(r),l.push(r),o.push(r+e.arrayBlockIndices[a])):(h.push(e.arrayBlockIndices[a]),p.push(e.arrayBlockIndices[a]+r),l.push(0),o.push(e.arrayBlockIndices[a]));for(var c=[],d=0;d<n[a].length;d++)h[a]<=n[a][d]&&n[a][d]<p[a]&&c.push(n[a][d]-h[a]);f.push(c)}for(var m=["SS"],y=["'use strict'"],g=[],d=0;d<r;++d)g.push(["s",d,"=SS[",d,"]"].join(""));for(var a=0;a<e.arrayArgs.length;++a){m.push("a"+a),m.push("t"+a),m.push("p"+a);for(var d=0;d<r;++d)g.push(["t",a,"p",d,"=t",a,"[",h[a]+d,"]"].join(""));for(var d=0;d<Math.abs(e.arrayBlockIndices[a]);++d)g.push(["t",a,"b",d,"=t",a,"[",l[a]+d,"]"].join(""))}for(var a=0;a<e.scalarArgs.length;++a)m.push("Y"+a);if(e.shapeArgs.length>0&&g.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var _=new Array(r),a=0;a<r;++a)_[a]="0";g.push(["index=[",_.join(","),"]"].join(""))}for(var a=0;a<e.offsetArgs.length;++a){for(var b=e.offsetArgs[a],C=[],d=0;d<b.offset.length;++d)b.offset[d]!==0&&(b.offset[d]===1?C.push(["t",b.array,"p",d].join("")):C.push([b.offset[d],"*t",b.array,"p",d].join("")));C.length===0?g.push("q"+a+"=0"):g.push(["q",a,"=",C.join("+")].join(""))}var w=P2([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));g=g.concat(w),g.length>0&&y.push("var "+g.join(","));for(var a=0;a<e.arrayArgs.length;++a)y.push("p"+a+"|=0");e.pre.body.length>3&&y.push(sl(e.pre,e,u));var B=sl(e.body,e,u),S=T2(f);S<r?y.push(x2(S,f[0],e,B)):y.push(Ap(f[0],e,B)),e.post.body.length>3&&y.push(sl(e.post,e,u)),e.debug&&console.log("-----Generated cwise routine for ",t,`:
`+y.join(`
`)+`
----------`);var O=[e.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",S,I2(u)].join(""),P=new Function(["function ",O,"(",m.join(","),"){",y.join(`
`),"} return ",O].join(""));return P()}var k2=N2,R2=k2;function L2(e){var t=["'use strict'","var CACHED={}"],r=[],n=e.funcName+"_cwise_thunk";t.push(["return function ",n,"(",e.shimArgs.join(","),"){"].join(""));for(var u=[],a=[],l=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],o=[],h=[],p=0;p<e.arrayArgs.length;++p){var f=e.arrayArgs[p];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),u.push("t"+f),u.push("r"+f),a.push("t"+f),a.push("r"+f+".join()"),l.push("array"+f+".data"),l.push("array"+f+".stride"),l.push("array"+f+".offset|0"),p>0&&(o.push("array"+e.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[p]))),h.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[p])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+o.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+h.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var p=0;p<e.scalarArgs.length;++p)l.push("scalar"+e.scalarArgs[p]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",u.join(","),"])}","return proc(",l.join(","),")}"].join("")),e.debug&&console.log(`-----Generated thunk:
`+t.join(`
`)+`
----------`);var c=new Function("compile",t.join(`
`));return c(R2.bind(void 0,e))}var U2=L2,V2=U2;function j2(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function q2(e){var t=new j2;t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var n=0;n<r.length;++n){var u=r[n];if(u==="array"||typeof u=="object"&&u.blockIndices){if(t.argTypes[n]="array",t.arrayArgs.push(n),t.arrayBlockIndices.push(u.blockIndices?u.blockIndices:0),t.shimArgs.push("array"+n),n<t.pre.args.length&&t.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<t.post.args.length&&t.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(u==="scalar")t.scalarArgs.push(n),t.shimArgs.push("scalar"+n);else if(u==="index"){if(t.indexArgs.push(n),n<t.pre.args.length&&t.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<t.body.args.length&&t.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<t.post.args.length&&t.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(u==="shape"){if(t.shapeArgs.push(n),n<t.pre.args.length&&t.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<t.body.args.length&&t.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<t.post.args.length&&t.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof u=="object"&&u.offset)t.argTypes[n]="offset",t.offsetArgs.push({array:u.array,offset:u.offset}),t.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+r[n])}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,V2(t)}var pf=q2;(function(e){var t=pf,r={body:"",args:[],thisVars:[],localVars:[]};function n(d){if(!d)return r;for(var m=0;m<d.args.length;++m){var y=d.args[m];m===0?d.args[m]={name:y,lvalue:!0,rvalue:!!d.rvalue,count:d.count||1}:d.args[m]={name:y,lvalue:!1,rvalue:!0,count:1}}return d.thisVars||(d.thisVars=[]),d.localVars||(d.localVars=[]),d}function u(d){return t({args:d.args,pre:n(d.pre),body:n(d.body),post:n(d.proc),funcName:d.funcName})}function a(d){for(var m=[],y=0;y<d.args.length;++y)m.push("a"+y);var g=new Function("P",["return function ",d.funcName,"_ndarrayops(",m.join(","),") {P(",m.join(","),");return a0}"].join(""));return g(u(d))}var l={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var d in l){var m=l[d];e[d]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+m+"c"},funcName:d}),e[d+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+m+"=b"},rvalue:!0,funcName:d+"eq"}),e[d+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+m+"s"},funcName:d+"s"}),e[d+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+m+"=s"},rvalue:!0,funcName:d+"seq"})}})();var o={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var d in o){var m=o[d];e[d]=a({args:["array","array"],body:{args:["a","b"],body:"a="+m+"b"},funcName:d}),e[d+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+m+"a"},rvalue:!0,count:2,funcName:d+"eq"})}})();var h={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var d in h){var m=h[d];e[d]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+m+"c"},funcName:d}),e[d+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+m+"s"},funcName:d+"s"}),e[d+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+m+"b"},rvalue:!0,count:2,funcName:d+"eq"}),e[d+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+m+"s"},rvalue:!0,count:2,funcName:d+"seq"})}})();var p=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var d=0;d<p.length;++d){var m=p[d];e[m]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:m}),e[m+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"eq"})}})();var f=["max","min","atan2","pow"];(function(){for(var d=0;d<f.length;++d){var m=f[d];e[m]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:m}),e[m+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:m+"s"}),e[m+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"eq"}),e[m+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"seq"})}})();var c=["atan2","pow"];(function(){for(var d=0;d<c.length;++d){var m=c[d];e[m+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:m+"op"}),e[m+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:m+"ops"}),e[m+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"opeq"}),e[m+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+m,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:m+"opseq"})}})(),e.any=t({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=t({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=t({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=t({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=t({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=t({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=t({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(Us);var z2=pf({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64}),_0=Du,W2=z2,H2=function(t,r){for(var n=[],u=t,a=1;Array.isArray(u);)n.push(u.length),a*=u.length,u=u[0];return n.length===0?_0():(r||(r=_0(new Float64Array(a),n)),W2(r,t),r)};function wp(e,t,r){var n=e[r]|0;if(n<=0)return[];var u=new Array(n),a;if(r===e.length-1)for(a=0;a<n;++a)u[a]=t;else for(a=0;a<n;++a)u[a]=wp(e,t,r+1);return u}function G2(e,t){var r,n;for(r=new Array(e),n=0;n<e;++n)r[n]=t;return r}function K2(e,t){switch(typeof t>"u"&&(t=0),typeof e){case"number":if(e>0)return G2(e|0,t);break;case"object":if(typeof e.length=="number")return wp(e,t,0);break}return[]}var Y2=K2,Ep={};(function(e){(function(t,r){r(e)})(cr,function(t){var r,n,u,a,l,o,h,p,f,c,d,m,y,g,_,b,C,w;r={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},n={},n[r.BooleanLiteral]="Boolean",n[r.EOF]="<end>",n[r.Identifier]="Identifier",n[r.Keyword]="Keyword",n[r.NullLiteral]="Null",n[r.NumericLiteral]="Numeric",n[r.Punctuator]="Punctuator",n[r.StringLiteral]="String",n[r.RegularExpression]="RegularExpression",u=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},l={Data:1,Get:2,Set:4},o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},h={NonAsciiIdentifierStart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")};function B(D,E){if(!D)throw new Error("ASSERT: "+E)}function S(D){return D>=48&&D<=57}function O(D){return"0123456789abcdefABCDEF".indexOf(D)>=0}function P(D){return"01234567".indexOf(D)>=0}function I(D){return D===32||D===9||D===11||D===12||D===160||D>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(D)>=0}function N(D){return D===10||D===13||D===8232||D===8233}function G(D){return D===36||D===95||D>=65&&D<=90||D>=97&&D<=122||D===92||D>=128&&h.NonAsciiIdentifierStart.test(String.fromCharCode(D))}function L(D){return D===36||D===95||D>=65&&D<=90||D>=97&&D<=122||D>=48&&D<=57||D===92||D>=128&&h.NonAsciiIdentifierPart.test(String.fromCharCode(D))}function q(D){switch(D){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function $(D){switch(D){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function H(D){return D==="eval"||D==="arguments"}function z(D){if(c&&$(D))return!0;switch(D.length){case 2:return D==="if"||D==="in"||D==="do";case 3:return D==="var"||D==="for"||D==="new"||D==="try"||D==="let";case 4:return D==="this"||D==="else"||D==="case"||D==="void"||D==="with"||D==="enum";case 5:return D==="while"||D==="break"||D==="catch"||D==="throw"||D==="const"||D==="yield"||D==="class"||D==="super";case 6:return D==="return"||D==="typeof"||D==="delete"||D==="switch"||D==="export"||D==="import";case 7:return D==="default"||D==="finally"||D==="extends";case 8:return D==="function"||D==="continue"||D==="debugger";case 10:return D==="instanceof";default:return!1}}function W(D,E,k,X,de){var Fe;B(typeof k=="number","Comment must have valid position"),!(C.lastCommentStart>=k)&&(C.lastCommentStart=k,Fe={type:D,value:E},w.range&&(Fe.range=[k,X]),w.loc&&(Fe.loc=de),w.comments.push(Fe),w.attachComment&&(w.leadingComments.push(Fe),w.trailingComments.push(Fe)))}function re(D){var E,k,X,de;for(E=d-D,k={start:{line:m,column:d-y-D}};d<g;)if(X=f.charCodeAt(d),++d,N(X)){w.comments&&(de=f.slice(E+D,d-1),k.end={line:m,column:d-y-1},W("Line",de,E,d-1,k)),X===13&&f.charCodeAt(d)===10&&++d,++m,y=d;return}w.comments&&(de=f.slice(E+D,d),k.end={line:m,column:d-y},W("Line",de,E,d,k))}function ee(){var D,E,k,X;for(w.comments&&(D=d-2,E={start:{line:m,column:d-y-2}});d<g;)if(k=f.charCodeAt(d),N(k))k===13&&f.charCodeAt(d+1)===10&&++d,++m,++d,y=d,d>=g&&j({},o.UnexpectedToken,"ILLEGAL");else if(k===42){if(f.charCodeAt(d+1)===47){++d,++d,w.comments&&(X=f.slice(D+2,d-2),E.end={line:m,column:d-y},W("Block",X,D,d,E));return}++d}else++d;j({},o.UnexpectedToken,"ILLEGAL")}function Q(){var D,E;for(E=d===0;d<g;)if(D=f.charCodeAt(d),I(D))++d;else if(N(D))++d,D===13&&f.charCodeAt(d)===10&&++d,++m,y=d,E=!0;else if(D===47)if(D=f.charCodeAt(d+1),D===47)++d,++d,re(2),E=!0;else if(D===42)++d,++d,ee();else break;else if(E&&D===45)if(f.charCodeAt(d+1)===45&&f.charCodeAt(d+2)===62)d+=3,re(3);else break;else if(D===60)if(f.slice(d+1,d+4)==="!--")++d,++d,++d,++d,re(4);else break;else break}function le(D){var E,k,X,de=0;for(k=D==="u"?4:2,E=0;E<k;++E)if(d<g&&O(f[d]))X=f[d++],de=de*16+"0123456789abcdef".indexOf(X.toLowerCase());else return"";return String.fromCharCode(de)}function me(){var D,E;for(D=f.charCodeAt(d++),E=String.fromCharCode(D),D===92&&(f.charCodeAt(d)!==117&&j({},o.UnexpectedToken,"ILLEGAL"),++d,D=le("u"),(!D||D==="\\"||!G(D.charCodeAt(0)))&&j({},o.UnexpectedToken,"ILLEGAL"),E=D);d<g&&(D=f.charCodeAt(d),!!L(D));)++d,E+=String.fromCharCode(D),D===92&&(E=E.substr(0,E.length-1),f.charCodeAt(d)!==117&&j({},o.UnexpectedToken,"ILLEGAL"),++d,D=le("u"),(!D||D==="\\"||!L(D.charCodeAt(0)))&&j({},o.UnexpectedToken,"ILLEGAL"),E+=D);return E}function Se(){var D,E;for(D=d++;d<g;){if(E=f.charCodeAt(d),E===92)return d=D,me();if(L(E))++d;else break}return f.slice(D,d)}function be(){var D,E,k;return D=d,E=f.charCodeAt(d)===92?me():Se(),E.length===1?k=r.Identifier:z(E)?k=r.Keyword:E==="null"?k=r.NullLiteral:E==="true"||E==="false"?k=r.BooleanLiteral:k=r.Identifier,{type:k,value:E,lineNumber:m,lineStart:y,start:D,end:d}}function Ne(){var D=d,E=f.charCodeAt(d),k,X=f[d],de,Fe,ot;switch(E){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++d,w.tokenize&&(E===40?w.openParenToken=w.tokens.length:E===123&&(w.openCurlyToken=w.tokens.length)),{type:r.Punctuator,value:String.fromCharCode(E),lineNumber:m,lineStart:y,start:D,end:d};default:if(k=f.charCodeAt(d+1),k===61)switch(E){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return d+=2,{type:r.Punctuator,value:String.fromCharCode(E)+String.fromCharCode(k),lineNumber:m,lineStart:y,start:D,end:d};case 33:case 61:return d+=2,f.charCodeAt(d)===61&&++d,{type:r.Punctuator,value:f.slice(D,d),lineNumber:m,lineStart:y,start:D,end:d}}}if(ot=f.substr(d,4),ot===">>>=")return d+=4,{type:r.Punctuator,value:ot,lineNumber:m,lineStart:y,start:D,end:d};if(Fe=ot.substr(0,3),Fe===">>>"||Fe==="<<="||Fe===">>=")return d+=3,{type:r.Punctuator,value:Fe,lineNumber:m,lineStart:y,start:D,end:d};if(de=Fe.substr(0,2),X===de[1]&&"+-<>&|".indexOf(X)>=0||de==="=>")return d+=2,{type:r.Punctuator,value:de,lineNumber:m,lineStart:y,start:D,end:d};if("<>=!+-*%&|^/".indexOf(X)>=0)return++d,{type:r.Punctuator,value:X,lineNumber:m,lineStart:y,start:D,end:d};j({},o.UnexpectedToken,"ILLEGAL")}function je(D){for(var E="";d<g&&O(f[d]);)E+=f[d++];return E.length===0&&j({},o.UnexpectedToken,"ILLEGAL"),G(f.charCodeAt(d))&&j({},o.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt("0x"+E,16),lineNumber:m,lineStart:y,start:D,end:d}}function Me(D){for(var E="0"+f[d++];d<g&&P(f[d]);)E+=f[d++];return(G(f.charCodeAt(d))||S(f.charCodeAt(d)))&&j({},o.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt(E,8),octal:!0,lineNumber:m,lineStart:y,start:D,end:d}}function it(){var D,E;for(D=d+1;D<g;++D){if(E=f[D],E==="8"||E==="9")return!1;if(!P(E))return!0}return!0}function qe(){var D,E,k;if(k=f[d],B(S(k.charCodeAt(0))||k===".","Numeric literal must start with a decimal digit or a decimal point"),E=d,D="",k!=="."){if(D=f[d++],k=f[d],D==="0"){if(k==="x"||k==="X")return++d,je(E);if(P(k)&&it())return Me(E)}for(;S(f.charCodeAt(d));)D+=f[d++];k=f[d]}if(k==="."){for(D+=f[d++];S(f.charCodeAt(d));)D+=f[d++];k=f[d]}if(k==="e"||k==="E")if(D+=f[d++],k=f[d],(k==="+"||k==="-")&&(D+=f[d++]),S(f.charCodeAt(d)))for(;S(f.charCodeAt(d));)D+=f[d++];else j({},o.UnexpectedToken,"ILLEGAL");return G(f.charCodeAt(d))&&j({},o.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseFloat(D),lineNumber:m,lineStart:y,start:E,end:d}}function Te(){var D="",E,k,X,de,Fe,ot,Dt=!1,Ht,ar;for(Ht=m,ar=y,E=f[d],B(E==="'"||E==='"',"String literal must starts with a quote"),k=d,++d;d<g;)if(X=f[d++],X===E){E="";break}else if(X==="\\")if(X=f[d++],!X||!N(X.charCodeAt(0)))switch(X){case"u":case"x":ot=d,Fe=le(X),Fe?D+=Fe:(d=ot,D+=X);break;case"n":D+=`
`;break;case"r":D+="\r";break;case"t":D+="	";break;case"b":D+="\b";break;case"f":D+="\f";break;case"v":D+="\v";break;default:P(X)?(de="01234567".indexOf(X),de!==0&&(Dt=!0),d<g&&P(f[d])&&(Dt=!0,de=de*8+"01234567".indexOf(f[d++]),"0123".indexOf(X)>=0&&d<g&&P(f[d])&&(de=de*8+"01234567".indexOf(f[d++]))),D+=String.fromCharCode(de)):D+=X;break}else++m,X==="\r"&&f[d]===`
`&&++d,y=d;else{if(N(X.charCodeAt(0)))break;D+=X}return E!==""&&j({},o.UnexpectedToken,"ILLEGAL"),{type:r.StringLiteral,value:D,octal:Dt,startLineNumber:Ht,startLineStart:ar,lineNumber:m,lineStart:y,start:k,end:d}}function Re(D,E){var k;try{k=new RegExp(D,E)}catch{j({},o.InvalidRegExp)}return k}function lt(){var D,E,k,X,de;for(D=f[d],B(D==="/","Regular expression literal must start with a slash"),E=f[d++],k=!1,X=!1;d<g;)if(D=f[d++],E+=D,D==="\\")D=f[d++],N(D.charCodeAt(0))&&j({},o.UnterminatedRegExp),E+=D;else if(N(D.charCodeAt(0)))j({},o.UnterminatedRegExp);else if(k)D==="]"&&(k=!1);else if(D==="/"){X=!0;break}else D==="["&&(k=!0);return X||j({},o.UnterminatedRegExp),de=E.substr(1,E.length-2),{value:de,literal:E}}function et(){var D,E,k,X;for(E="",k="";d<g&&(D=f[d],!!L(D.charCodeAt(0)));)if(++d,D==="\\"&&d<g)if(D=f[d],D==="u"){if(++d,X=d,D=le("u"),D)for(k+=D,E+="\\u";X<d;++X)E+=f[X];else d=X,k+="u",E+="\\u";Z({},o.UnexpectedToken,"ILLEGAL")}else E+="\\",Z({},o.UnexpectedToken,"ILLEGAL");else k+=D,E+=D;return{value:k,literal:E}}function ut(){var D,E,k,X;return b=null,Q(),D=d,E=lt(),k=et(),X=Re(E.value,k.value),w.tokenize?{type:r.RegularExpression,value:X,lineNumber:m,lineStart:y,start:D,end:d}:{literal:E.literal+k.literal,value:X,start:D,end:d}}function tt(){var D,E,k,X;return Q(),D=d,E={start:{line:m,column:d-y}},k=ut(),E.end={line:m,column:d-y},w.tokenize||(w.tokens.length>0&&(X=w.tokens[w.tokens.length-1],X.range[0]===D&&X.type==="Punctuator"&&(X.value==="/"||X.value==="/=")&&w.tokens.pop()),w.tokens.push({type:"RegularExpression",value:k.literal,range:[D,d],loc:E})),k}function rt(D){return D.type===r.Identifier||D.type===r.Keyword||D.type===r.BooleanLiteral||D.type===r.NullLiteral}function ze(){var D,E;if(D=w.tokens[w.tokens.length-1],!D)return tt();if(D.type==="Punctuator"){if(D.value==="]")return Ne();if(D.value===")")return E=w.tokens[w.openParenToken-1],E&&E.type==="Keyword"&&(E.value==="if"||E.value==="while"||E.value==="for"||E.value==="with")?tt():Ne();if(D.value==="}"){if(w.tokens[w.openCurlyToken-3]&&w.tokens[w.openCurlyToken-3].type==="Keyword"){if(E=w.tokens[w.openCurlyToken-4],!E)return Ne()}else if(w.tokens[w.openCurlyToken-4]&&w.tokens[w.openCurlyToken-4].type==="Keyword"){if(E=w.tokens[w.openCurlyToken-5],!E)return tt()}else return Ne();return u.indexOf(E.value)>=0?Ne():tt()}return tt()}return D.type==="Keyword"&&D.value!=="this"?tt():Ne()}function We(){var D;return Q(),d>=g?{type:r.EOF,lineNumber:m,lineStart:y,start:d,end:d}:(D=f.charCodeAt(d),G(D)?be():D===40||D===41||D===59?Ne():D===39||D===34?Te():D===46?S(f.charCodeAt(d+1))?qe():Ne():S(D)?qe():w.tokenize&&D===47?ze():Ne())}function Ae(){var D,E,k;return Q(),D={start:{line:m,column:d-y}},E=We(),D.end={line:m,column:d-y},E.type!==r.EOF&&(k=f.slice(E.start,E.end),w.tokens.push({type:n[E.type],value:k,range:[E.start,E.end],loc:D})),E}function we(){var D;return D=b,d=D.end,m=D.lineNumber,y=D.lineStart,b=typeof w.tokens<"u"?Ae():We(),d=D.end,m=D.lineNumber,y=D.lineStart,D}function yt(){var D,E,k;D=d,E=m,k=y,b=typeof w.tokens<"u"?Ae():We(),d=D,m=E,y=k}function Tt(D,E){this.line=D,this.column=E}function zt(D,E,k,X){this.start=new Tt(D,E),this.end=new Tt(k,X)}p={name:"SyntaxTree",processComment:function(D){var E,k;if(!(D.type===a.Program&&D.body.length>0)){for(w.trailingComments.length>0?w.trailingComments[0].range[0]>=D.range[1]?(k=w.trailingComments,w.trailingComments=[]):w.trailingComments.length=0:w.bottomRightStack.length>0&&w.bottomRightStack[w.bottomRightStack.length-1].trailingComments&&w.bottomRightStack[w.bottomRightStack.length-1].trailingComments[0].range[0]>=D.range[1]&&(k=w.bottomRightStack[w.bottomRightStack.length-1].trailingComments,delete w.bottomRightStack[w.bottomRightStack.length-1].trailingComments);w.bottomRightStack.length>0&&w.bottomRightStack[w.bottomRightStack.length-1].range[0]>=D.range[0];)E=w.bottomRightStack.pop();E?E.leadingComments&&E.leadingComments[E.leadingComments.length-1].range[1]<=D.range[0]&&(D.leadingComments=E.leadingComments,delete E.leadingComments):w.leadingComments.length>0&&w.leadingComments[w.leadingComments.length-1].range[1]<=D.range[0]&&(D.leadingComments=w.leadingComments,w.leadingComments=[]),k&&(D.trailingComments=k),w.bottomRightStack.push(D)}},markEnd:function(D,E){return w.range&&(D.range=[E.start,d]),w.loc&&(D.loc=new zt(E.startLineNumber===void 0?E.lineNumber:E.startLineNumber,E.start-(E.startLineStart===void 0?E.lineStart:E.startLineStart),m,d-y),this.postProcess(D)),w.attachComment&&this.processComment(D),D},postProcess:function(D){return w.source&&(D.loc.source=w.source),D},createArrayExpression:function(D){return{type:a.ArrayExpression,elements:D}},createAssignmentExpression:function(D,E,k){return{type:a.AssignmentExpression,operator:D,left:E,right:k}},createBinaryExpression:function(D,E,k){var X=D==="||"||D==="&&"?a.LogicalExpression:a.BinaryExpression;return{type:X,operator:D,left:E,right:k}},createBlockStatement:function(D){return{type:a.BlockStatement,body:D}},createBreakStatement:function(D){return{type:a.BreakStatement,label:D}},createCallExpression:function(D,E){return{type:a.CallExpression,callee:D,arguments:E}},createCatchClause:function(D,E){return{type:a.CatchClause,param:D,body:E}},createConditionalExpression:function(D,E,k){return{type:a.ConditionalExpression,test:D,consequent:E,alternate:k}},createContinueStatement:function(D){return{type:a.ContinueStatement,label:D}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(D,E){return{type:a.DoWhileStatement,body:D,test:E}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(D){return{type:a.ExpressionStatement,expression:D}},createForStatement:function(D,E,k,X){return{type:a.ForStatement,init:D,test:E,update:k,body:X}},createForInStatement:function(D,E,k){return{type:a.ForInStatement,left:D,right:E,body:k,each:!1}},createFunctionDeclaration:function(D,E,k,X){return{type:a.FunctionDeclaration,id:D,params:E,defaults:k,body:X,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(D,E,k,X){return{type:a.FunctionExpression,id:D,params:E,defaults:k,body:X,rest:null,generator:!1,expression:!1}},createIdentifier:function(D){return{type:a.Identifier,name:D}},createIfStatement:function(D,E,k){return{type:a.IfStatement,test:D,consequent:E,alternate:k}},createLabeledStatement:function(D,E){return{type:a.LabeledStatement,label:D,body:E}},createLiteral:function(D){return{type:a.Literal,value:D.value,raw:f.slice(D.start,D.end)}},createMemberExpression:function(D,E,k){return{type:a.MemberExpression,computed:D==="[",object:E,property:k}},createNewExpression:function(D,E){return{type:a.NewExpression,callee:D,arguments:E}},createObjectExpression:function(D){return{type:a.ObjectExpression,properties:D}},createPostfixExpression:function(D,E){return{type:a.UpdateExpression,operator:D,argument:E,prefix:!1}},createProgram:function(D){return{type:a.Program,body:D}},createProperty:function(D,E,k){return{type:a.Property,key:E,value:k,kind:D}},createReturnStatement:function(D){return{type:a.ReturnStatement,argument:D}},createSequenceExpression:function(D){return{type:a.SequenceExpression,expressions:D}},createSwitchCase:function(D,E){return{type:a.SwitchCase,test:D,consequent:E}},createSwitchStatement:function(D,E){return{type:a.SwitchStatement,discriminant:D,cases:E}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(D){return{type:a.ThrowStatement,argument:D}},createTryStatement:function(D,E,k,X){return{type:a.TryStatement,block:D,guardedHandlers:E,handlers:k,finalizer:X}},createUnaryExpression:function(D,E){return D==="++"||D==="--"?{type:a.UpdateExpression,operator:D,argument:E,prefix:!0}:{type:a.UnaryExpression,operator:D,argument:E,prefix:!0}},createVariableDeclaration:function(D,E){return{type:a.VariableDeclaration,declarations:D,kind:E}},createVariableDeclarator:function(D,E){return{type:a.VariableDeclarator,id:D,init:E}},createWhileStatement:function(D,E){return{type:a.WhileStatement,test:D,body:E}},createWithStatement:function(D,E){return{type:a.WithStatement,object:D,body:E}}};function R(){var D,E,k,X;return D=d,E=m,k=y,Q(),X=m!==E,d=D,m=E,y=k,X}function j(D,E){var k,X=Array.prototype.slice.call(arguments,2),de=E.replace(/%(\d)/g,function(Fe,ot){return B(ot<X.length,"Message reference must be in range"),X[ot]});throw typeof D.lineNumber=="number"?(k=new Error("Line "+D.lineNumber+": "+de),k.index=D.start,k.lineNumber=D.lineNumber,k.column=D.start-y+1):(k=new Error("Line "+m+": "+de),k.index=d,k.lineNumber=m,k.column=d-y+1),k.description=de,k}function Z(){try{j.apply(null,arguments)}catch(D){if(w.errors)w.errors.push(D);else throw D}}function fe(D){if(D.type===r.EOF&&j(D,o.UnexpectedEOS),D.type===r.NumericLiteral&&j(D,o.UnexpectedNumber),D.type===r.StringLiteral&&j(D,o.UnexpectedString),D.type===r.Identifier&&j(D,o.UnexpectedIdentifier),D.type===r.Keyword){if(q(D.value))j(D,o.UnexpectedReserved);else if(c&&$(D.value)){Z(D,o.StrictReservedWord);return}j(D,o.UnexpectedToken,D.value)}j(D,o.UnexpectedToken,D.value)}function ne(D){var E=we();(E.type!==r.Punctuator||E.value!==D)&&fe(E)}function pe(D){var E=we();(E.type!==r.Keyword||E.value!==D)&&fe(E)}function ue(D){return b.type===r.Punctuator&&b.value===D}function ce(D){return b.type===r.Keyword&&b.value===D}function ye(){var D;return b.type!==r.Punctuator?!1:(D=b.value,D==="="||D==="*="||D==="/="||D==="%="||D==="+="||D==="-="||D==="<<="||D===">>="||D===">>>="||D==="&="||D==="^="||D==="|=")}function Oe(){var D,E=d,k=m,X=y,de=b;if(f.charCodeAt(d)===59||ue(";")){we();return}if(D=m,Q(),m!==D){d=E,m=k,y=X,b=de;return}b.type!==r.EOF&&!ue("}")&&fe(b)}function Xe(D){return D.type===a.Identifier||D.type===a.MemberExpression}function Ee(){var D=[],E;for(E=b,ne("[");!ue("]");)ue(",")?(we(),D.push(null)):(D.push(wr()),ue("]")||ne(","));return we(),_.markEnd(_.createArrayExpression(D),E)}function Ut(D,E){var k,X,de;return k=c,de=b,X=xi(),E&&c&&H(D[0].name)&&Z(E,o.StrictParamName),c=k,_.markEnd(_.createFunctionExpression(null,D,[],X),de)}function Ft(){var D,E;return E=b,D=we(),D.type===r.StringLiteral||D.type===r.NumericLiteral?(c&&D.octal&&Z(D,o.StrictOctalLiteral),_.markEnd(_.createLiteral(D),E)):_.markEnd(_.createIdentifier(D.value),E)}function tr(){var D,E,k,X,de,Fe;if(D=b,Fe=b,D.type===r.Identifier)return k=Ft(),D.value==="get"&&!ue(":")?(E=Ft(),ne("("),ne(")"),X=Ut([]),_.markEnd(_.createProperty("get",E,X),Fe)):D.value==="set"&&!ue(":")?(E=Ft(),ne("("),D=b,D.type!==r.Identifier?(ne(")"),Z(D,o.UnexpectedToken,D.value),X=Ut([])):(de=[un()],ne(")"),X=Ut(de,D)),_.markEnd(_.createProperty("set",E,X),Fe)):(ne(":"),X=wr(),_.markEnd(_.createProperty("init",k,X),Fe));if(D.type===r.EOF||D.type===r.Punctuator)fe(D);else return E=Ft(),ne(":"),X=wr(),_.markEnd(_.createProperty("init",E,X),Fe)}function Yt(){var D=[],E,k,X,de,Fe={},ot=String,Dt;for(Dt=b,ne("{");!ue("}");)E=tr(),E.key.type===a.Identifier?k=E.key.name:k=ot(E.key.value),de=E.kind==="init"?l.Data:E.kind==="get"?l.Get:l.Set,X="$"+k,Object.prototype.hasOwnProperty.call(Fe,X)?(Fe[X]===l.Data?c&&de===l.Data?Z({},o.StrictDuplicateProperty):de!==l.Data&&Z({},o.AccessorDataProperty):de===l.Data?Z({},o.AccessorDataProperty):Fe[X]&de&&Z({},o.AccessorGetSet),Fe[X]|=de):Fe[X]=de,D.push(E),ue("}")||ne(",");return ne("}"),_.markEnd(_.createObjectExpression(D),Dt)}function gr(){var D;return ne("("),D=rr(),ne(")"),D}function Zt(){var D,E,k,X;if(ue("("))return gr();if(ue("["))return Ee();if(ue("{"))return Yt();if(D=b.type,X=b,D===r.Identifier)k=_.createIdentifier(we().value);else if(D===r.StringLiteral||D===r.NumericLiteral)c&&b.octal&&Z(b,o.StrictOctalLiteral),k=_.createLiteral(we());else if(D===r.Keyword){if(ce("function"))return Ti();ce("this")?(we(),k=_.createThisExpression()):fe(we())}else D===r.BooleanLiteral?(E=we(),E.value=E.value==="true",k=_.createLiteral(E)):D===r.NullLiteral?(E=we(),E.value=null,k=_.createLiteral(E)):ue("/")||ue("/=")?(typeof w.tokens<"u"?k=_.createLiteral(tt()):k=_.createLiteral(ut()),yt()):fe(we());return _.markEnd(k,X)}function mr(){var D=[];if(ne("("),!ue(")"))for(;d<g&&(D.push(wr()),!ue(")"));)ne(",");return ne(")"),D}function lr(){var D,E;return E=b,D=we(),rt(D)||fe(D),_.markEnd(_.createIdentifier(D.value),E)}function fr(){return ne("."),lr()}function nn(){var D;return ne("["),D=rr(),ne("]"),D}function hr(){var D,E,k;return k=b,pe("new"),D=Gn(),E=ue("(")?mr():[],_.markEnd(_.createNewExpression(D,E),k)}function An(){var D,E,k,X,de=C.allowIn;for(X=b,C.allowIn=!0,D=ce("new")?hr():Zt();;){if(ue("."))k=fr(),D=_.createMemberExpression(".",D,k);else if(ue("("))E=mr(),D=_.createCallExpression(D,E);else if(ue("["))k=nn(),D=_.createMemberExpression("[",D,k);else break;_.markEnd(D,X)}return C.allowIn=de,D}function Gn(){var D,E,k;for(B(C.allowIn,"callee of new expression always allow in keyword."),k=b,D=ce("new")?hr():Zt();ue(".")||ue("[");)ue("[")?(E=nn(),D=_.createMemberExpression("[",D,E)):(E=fr(),D=_.createMemberExpression(".",D,E)),_.markEnd(D,k);return D}function In(){var D,E,k=b;return D=An(),b.type===r.Punctuator&&(ue("++")||ue("--"))&&!R()&&(c&&D.type===a.Identifier&&H(D.name)&&Z({},o.StrictLHSPostfix),Xe(D)||Z({},o.InvalidLHSInAssignment),E=we(),D=_.markEnd(_.createPostfixExpression(E.value,D),k)),D}function Nn(){var D,E,k;return b.type!==r.Punctuator&&b.type!==r.Keyword?E=In():ue("++")||ue("--")?(k=b,D=we(),E=Nn(),c&&E.type===a.Identifier&&H(E.name)&&Z({},o.StrictLHSPrefix),Xe(E)||Z({},o.InvalidLHSInAssignment),E=_.createUnaryExpression(D.value,E),E=_.markEnd(E,k)):ue("+")||ue("-")||ue("~")||ue("!")?(k=b,D=we(),E=Nn(),E=_.createUnaryExpression(D.value,E),E=_.markEnd(E,k)):ce("delete")||ce("void")||ce("typeof")?(k=b,D=we(),E=Nn(),E=_.createUnaryExpression(D.value,E),E=_.markEnd(E,k),c&&E.operator==="delete"&&E.argument.type===a.Identifier&&Z({},o.StrictDelete)):E=In(),E}function Hi(D,E){var k=0;if(D.type!==r.Punctuator&&D.type!==r.Keyword)return 0;switch(D.value){case"||":k=1;break;case"&&":k=2;break;case"|":k=3;break;case"^":k=4;break;case"&":k=5;break;case"==":case"!=":case"===":case"!==":k=6;break;case"<":case">":case"<=":case">=":case"instanceof":k=7;break;case"in":k=E?7:0;break;case"<<":case">>":case">>>":k=8;break;case"+":case"-":k=9;break;case"*":case"/":case"%":k=11;break}return k}function Mi(){var D,E,k,X,de,Fe,ot,Dt,Ht,ar;if(D=b,Ht=Nn(),X=b,de=Hi(X,C.allowIn),de===0)return Ht;for(X.prec=de,we(),E=[D,b],ot=Nn(),Fe=[Ht,X,ot];(de=Hi(b,C.allowIn))>0;){for(;Fe.length>2&&de<=Fe[Fe.length-2].prec;)ot=Fe.pop(),Dt=Fe.pop().value,Ht=Fe.pop(),k=_.createBinaryExpression(Dt,Ht,ot),E.pop(),D=E[E.length-1],_.markEnd(k,D),Fe.push(k);X=we(),X.prec=de,Fe.push(X),E.push(b),k=Nn(),Fe.push(k)}for(ar=Fe.length-1,k=Fe[ar],E.pop();ar>1;)k=_.createBinaryExpression(Fe[ar-1].value,Fe[ar-2],k),ar-=2,D=E.pop(),_.markEnd(k,D);return k}function bu(){var D,E,k,X,de;return de=b,D=Mi(),ue("?")&&(we(),E=C.allowIn,C.allowIn=!0,k=wr(),C.allowIn=E,ne(":"),X=wr(),D=_.createConditionalExpression(D,k,X),_.markEnd(D,de)),D}function wr(){var D,E,k,X,de;return D=b,de=b,X=E=bu(),ye()&&(Xe(E)||Z({},o.InvalidLHSInAssignment),c&&E.type===a.Identifier&&H(E.name)&&Z(D,o.StrictLHSAssignment),D=we(),k=wr(),X=_.markEnd(_.createAssignmentExpression(D.value,E,k),de)),X}function rr(){var D,E=b;if(D=wr(),ue(",")){for(D=_.createSequenceExpression([D]);d<g&&ue(",");)we(),D.expressions.push(wr());_.markEnd(D,E)}return D}function yu(){for(var D=[],E;d<g&&!(ue("}")||(E=wn(),typeof E>"u"));)D.push(E);return D}function si(){var D,E;return E=b,ne("{"),D=yu(),ne("}"),_.markEnd(_.createBlockStatement(D),E)}function un(){var D,E;return E=b,D=we(),D.type!==r.Identifier&&fe(D),_.markEnd(_.createIdentifier(D.value),E)}function Kn(D){var E=null,k,X;return X=b,k=un(),c&&H(k.name)&&Z({},o.StrictVarName),D==="const"?(ne("="),E=wr()):ue("=")&&(we(),E=wr()),_.markEnd(_.createVariableDeclarator(k,E),X)}function Pi(D){var E=[];do{if(E.push(Kn(D)),!ue(","))break;we()}while(d<g);return E}function Au(){var D;return pe("var"),D=Pi(),Oe(),_.createVariableDeclaration(D,"var")}function wu(D){var E,k;return k=b,pe(D),E=Pi(D),Oe(),_.markEnd(_.createVariableDeclaration(E,D),k)}function Gi(){return ne(";"),_.createEmptyStatement()}function Eu(){var D=rr();return Oe(),_.createExpressionStatement(D)}function Cu(){var D,E,k;return pe("if"),ne("("),D=rr(),ne(")"),E=Ir(),ce("else")?(we(),k=Ir()):k=null,_.createIfStatement(D,E,k)}function Fu(){var D,E,k;return pe("do"),k=C.inIteration,C.inIteration=!0,D=Ir(),C.inIteration=k,pe("while"),ne("("),E=rr(),ne(")"),ue(";")&&we(),_.createDoWhileStatement(D,E)}function Su(){var D,E,k;return pe("while"),ne("("),D=rr(),ne(")"),k=C.inIteration,C.inIteration=!0,E=Ir(),C.inIteration=k,_.createWhileStatement(D,E)}function Bu(){var D,E,k;return k=b,D=we(),E=Pi(),_.markEnd(_.createVariableDeclaration(E,D.value),k)}function Ou(){var D,E,k,X,de,Fe,ot,Dt=C.allowIn;return D=E=k=null,pe("for"),ne("("),ue(";")?we():(ce("var")||ce("let")?(C.allowIn=!1,D=Bu(),C.allowIn=Dt,D.declarations.length===1&&ce("in")&&(we(),X=D,de=rr(),D=null)):(C.allowIn=!1,D=rr(),C.allowIn=Dt,ce("in")&&(Xe(D)||Z({},o.InvalidLHSInForIn),we(),X=D,de=rr(),D=null)),typeof X>"u"&&ne(";")),typeof X>"u"&&(ue(";")||(E=rr()),ne(";"),ue(")")||(k=rr())),ne(")"),ot=C.inIteration,C.inIteration=!0,Fe=Ir(),C.inIteration=ot,typeof X>"u"?_.createForStatement(D,E,k,Fe):_.createForInStatement(X,de,Fe)}function oi(){var D=null,E;return pe("continue"),f.charCodeAt(d)===59?(we(),C.inIteration||j({},o.IllegalContinue),_.createContinueStatement(null)):R()?(C.inIteration||j({},o.IllegalContinue),_.createContinueStatement(null)):(b.type===r.Identifier&&(D=un(),E="$"+D.name,Object.prototype.hasOwnProperty.call(C.labelSet,E)||j({},o.UnknownLabel,D.name)),Oe(),D===null&&!C.inIteration&&j({},o.IllegalContinue),_.createContinueStatement(D))}function Mu(){var D=null,E;return pe("break"),f.charCodeAt(d)===59?(we(),C.inIteration||C.inSwitch||j({},o.IllegalBreak),_.createBreakStatement(null)):R()?(C.inIteration||C.inSwitch||j({},o.IllegalBreak),_.createBreakStatement(null)):(b.type===r.Identifier&&(D=un(),E="$"+D.name,Object.prototype.hasOwnProperty.call(C.labelSet,E)||j({},o.UnknownLabel,D.name)),Oe(),D===null&&!(C.inIteration||C.inSwitch)&&j({},o.IllegalBreak),_.createBreakStatement(D))}function li(){var D=null;return pe("return"),C.inFunctionBody||Z({},o.IllegalReturn),f.charCodeAt(d)===32&&G(f.charCodeAt(d+1))?(D=rr(),Oe(),_.createReturnStatement(D)):R()?_.createReturnStatement(null):(ue(";")||!ue("}")&&b.type!==r.EOF&&(D=rr()),Oe(),_.createReturnStatement(D))}function Pu(){var D,E;return c&&(Q(),Z({},o.StrictModeWith)),pe("with"),ne("("),D=rr(),ne(")"),E=Ir(),_.createWithStatement(D,E)}function xu(){var D,E=[],k,X;for(X=b,ce("default")?(we(),D=null):(pe("case"),D=rr()),ne(":");d<g&&!(ue("}")||ce("default")||ce("case"));)k=Ir(),E.push(k);return _.markEnd(_.createSwitchCase(D,E),X)}function Tu(){var D,E,k,X,de;if(pe("switch"),ne("("),D=rr(),ne(")"),ne("{"),E=[],ue("}"))return we(),_.createSwitchStatement(D,E);for(X=C.inSwitch,C.inSwitch=!0,de=!1;d<g&&!ue("}");)k=xu(),k.test===null&&(de&&j({},o.MultipleDefaultsInSwitch),de=!0),E.push(k);return C.inSwitch=X,ne("}"),_.createSwitchStatement(D,E)}function Ki(){var D;return pe("throw"),R()&&j({},o.NewlineAfterThrow),D=rr(),Oe(),_.createThrowStatement(D)}function kn(){var D,E,k;return k=b,pe("catch"),ne("("),ue(")")&&fe(b),D=un(),c&&H(D.name)&&Z({},o.StrictCatchVariable),ne(")"),E=si(),_.markEnd(_.createCatchClause(D,E),k)}function _r(){var D,E=[],k=null;return pe("try"),D=si(),ce("catch")&&E.push(kn()),ce("finally")&&(we(),k=si()),E.length===0&&!k&&j({},o.NoCatchOrFinally),_.createTryStatement(D,[],E,k)}function ur(){return pe("debugger"),Oe(),_.createDebuggerStatement()}function Ir(){var D=b.type,E,k,X,de;if(D===r.EOF&&fe(b),D===r.Punctuator&&b.value==="{")return si();if(de=b,D===r.Punctuator)switch(b.value){case";":return _.markEnd(Gi(),de);case"(":return _.markEnd(Eu(),de)}if(D===r.Keyword)switch(b.value){case"break":return _.markEnd(Mu(),de);case"continue":return _.markEnd(oi(),de);case"debugger":return _.markEnd(ur(),de);case"do":return _.markEnd(Fu(),de);case"for":return _.markEnd(Ou(),de);case"function":return _.markEnd(Rn(),de);case"if":return _.markEnd(Cu(),de);case"return":return _.markEnd(li(),de);case"switch":return _.markEnd(Tu(),de);case"throw":return _.markEnd(Ki(),de);case"try":return _.markEnd(_r(),de);case"var":return _.markEnd(Au(),de);case"while":return _.markEnd(Su(),de);case"with":return _.markEnd(Pu(),de)}return E=rr(),E.type===a.Identifier&&ue(":")?(we(),X="$"+E.name,Object.prototype.hasOwnProperty.call(C.labelSet,X)&&j({},o.Redeclaration,"Label",E.name),C.labelSet[X]=!0,k=Ir(),delete C.labelSet[X],_.markEnd(_.createLabeledStatement(E,k),de)):(Oe(),_.markEnd(_.createExpressionStatement(E),de))}function xi(){var D,E=[],k,X,de,Fe,ot,Dt,Ht,ar;for(ar=b,ne("{");d<g&&!(b.type!==r.StringLiteral||(k=b,D=wn(),E.push(D),D.expression.type!==a.Literal));)X=f.slice(k.start+1,k.end-1),X==="use strict"?(c=!0,de&&Z(de,o.StrictOctalLiteral)):!de&&k.octal&&(de=k);for(Fe=C.labelSet,ot=C.inIteration,Dt=C.inSwitch,Ht=C.inFunctionBody,C.labelSet={},C.inIteration=!1,C.inSwitch=!1,C.inFunctionBody=!0;d<g&&!(ue("}")||(D=wn(),typeof D>"u"));)E.push(D);return ne("}"),C.labelSet=Fe,C.inIteration=ot,C.inSwitch=Dt,C.inFunctionBody=Ht,_.markEnd(_.createBlockStatement(E),ar)}function Yn(D){var E,k=[],X,de,Fe,ot,Dt;if(ne("("),!ue(")"))for(Fe={};d<g&&(X=b,E=un(),ot="$"+X.value,c?(H(X.value)&&(de=X,Dt=o.StrictParamName),Object.prototype.hasOwnProperty.call(Fe,ot)&&(de=X,Dt=o.StrictParamDupe)):D||(H(X.value)?(D=X,Dt=o.StrictParamName):$(X.value)?(D=X,Dt=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(Fe,ot)&&(D=X,Dt=o.StrictParamDupe)),k.push(E),Fe[ot]=!0,!ue(")"));)ne(",");return ne(")"),{params:k,stricted:de,firstRestricted:D,message:Dt}}function Rn(){var D,E=[],k,X,de,Fe,ot,Dt,Ht,ar;return ar=b,pe("function"),X=b,D=un(),c?H(X.value)&&Z(X,o.StrictFunctionName):H(X.value)?(ot=X,Dt=o.StrictFunctionName):$(X.value)&&(ot=X,Dt=o.StrictReservedWord),Fe=Yn(ot),E=Fe.params,de=Fe.stricted,ot=Fe.firstRestricted,Fe.message&&(Dt=Fe.message),Ht=c,k=xi(),c&&ot&&j(ot,Dt),c&&de&&Z(de,Dt),c=Ht,_.markEnd(_.createFunctionDeclaration(D,E,[],k),ar)}function Ti(){var D,E=null,k,X,de,Fe,ot=[],Dt,Ht,ar;return ar=b,pe("function"),ue("(")||(D=b,E=un(),c?H(D.value)&&Z(D,o.StrictFunctionName):H(D.value)?(X=D,de=o.StrictFunctionName):$(D.value)&&(X=D,de=o.StrictReservedWord)),Fe=Yn(X),ot=Fe.params,k=Fe.stricted,X=Fe.firstRestricted,Fe.message&&(de=Fe.message),Ht=c,Dt=xi(),c&&X&&j(X,de),c&&k&&Z(k,de),c=Ht,_.markEnd(_.createFunctionExpression(E,ot,[],Dt),ar)}function wn(){if(b.type===r.Keyword)switch(b.value){case"const":case"let":return wu(b.value);case"function":return Rn();default:return Ir()}if(b.type!==r.EOF)return Ir()}function an(){for(var D,E=[],k,X,de;d<g&&(k=b,!(k.type!==r.StringLiteral||(D=wn(),E.push(D),D.expression.type!==a.Literal)));)X=f.slice(k.start+1,k.end-1),X==="use strict"?(c=!0,de&&Z(de,o.StrictOctalLiteral)):!de&&k.octal&&(de=k);for(;d<g&&(D=wn(),!(typeof D>"u"));)E.push(D);return E}function Gs(){var D,E;return Q(),yt(),E=b,c=!1,D=an(),_.markEnd(_.createProgram(D),E)}function Iu(){var D,E,k,X=[];for(D=0;D<w.tokens.length;++D)E=w.tokens[D],k={type:E.type,value:E.value},w.range&&(k.range=E.range),w.loc&&(k.loc=E.loc),X.push(k);w.tokens=X}function Yi(D,E){var k,X,de;k=String,typeof D!="string"&&!(D instanceof String)&&(D=k(D)),_=p,f=D,d=0,m=f.length>0?1:0,y=0,g=f.length,b=null,C={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},w={},E=E||{},E.tokens=!0,w.tokens=[],w.tokenize=!0,w.openParenToken=-1,w.openCurlyToken=-1,w.range=typeof E.range=="boolean"&&E.range,w.loc=typeof E.loc=="boolean"&&E.loc,typeof E.comment=="boolean"&&E.comment&&(w.comments=[]),typeof E.tolerant=="boolean"&&E.tolerant&&(w.errors=[]);try{if(yt(),b.type===r.EOF)return w.tokens;for(X=we();b.type!==r.EOF;)try{X=we()}catch(Fe){if(X=b,w.errors){w.errors.push(Fe);break}else throw Fe}Iu(),de=w.tokens,typeof w.comments<"u"&&(de.comments=w.comments),typeof w.errors<"u"&&(de.errors=w.errors)}catch(Fe){throw Fe}finally{w={}}return de}function ua(D,E){var k,X;X=String,typeof D!="string"&&!(D instanceof String)&&(D=X(D)),_=p,f=D,d=0,m=f.length>0?1:0,y=0,g=f.length,b=null,C={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},w={},typeof E<"u"&&(w.range=typeof E.range=="boolean"&&E.range,w.loc=typeof E.loc=="boolean"&&E.loc,w.attachComment=typeof E.attachComment=="boolean"&&E.attachComment,w.loc&&E.source!==null&&E.source!==void 0&&(w.source=X(E.source)),typeof E.tokens=="boolean"&&E.tokens&&(w.tokens=[]),typeof E.comment=="boolean"&&E.comment&&(w.comments=[]),typeof E.tolerant=="boolean"&&E.tolerant&&(w.errors=[]),w.attachComment&&(w.range=!0,w.comments=[],w.bottomRightStack=[],w.trailingComments=[],w.leadingComments=[]));try{k=Gs(),typeof w.comments<"u"&&(k.comments=w.comments),typeof w.tokens<"u"&&(Iu(),k.tokens=w.tokens),typeof w.errors<"u"&&(k.errors=w.errors)}catch(de){throw de}finally{w={}}return k}t.version="1.2.5",t.tokenize=Yi,t.parse=ua,t.Syntax=function(){var D,E={};typeof Object.create=="function"&&(E=Object.create(null));for(D in a)a.hasOwnProperty(D)&&(E[D]=a[D]);return typeof Object.freeze=="function"&&Object.freeze(E),E}()})})(Ep);var Z2=Ep,D0=yp,$2=0;function X2(e,t,r){this.name=e,this.lvalue=t,this.rvalue=r,this.count=0}function J2(e,t,r,n){this.body=e,this.args=t,this.thisVars=r,this.localVars=n}function Q2(e){if(e==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?e in window:typeof cr<"u"?e in cr:typeof self<"u"?e in self:!1}function eC(e){for(var t=e.body[0].expression.callee.params,r=new Array(t.length),n=0;n<t.length;++n)r[n]=t[n].name;return r}function tC(e){for(var t=["(",e,")()"].join(""),r=Z2.parse(t,{range:!0}),n="_inline_"+$2+++"_",u=eC(r),a=new Array(u.length),l=0;l<u.length;++l)a[l]=new X2([n,"arg",l,"_"].join(""),!1,!1);for(var o=new Array(t.length),l=0,h=t.length;l<h;++l)o[l]=t.charAt(l);var p=[],f=[];function c(B){var S=n+B.replace(/\_/g,"__");return p.push(S),S}function d(B){var S="this_"+B.replace(/\_/g,"__");return f.push(S),S}function m(B,S){for(var O=B.range[0],P=B.range[1],I=O+1;I<P;++I)o[I]="";o[O]=S}function y(B){return"'"+B.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function g(B){return o.slice(B.range[0],B.range[1]).join("")}var _=1,b=2;function C(B){return B.parent.type==="AssignmentExpression"&&B.parent.left===B?B.parent.operator==="="?_:_|b:B.parent.type==="UpdateExpression"?_|b:b}(function B(S,O){if(S.parent=O,S.type==="MemberExpression")S.computed?(B(S.object,S),B(S.property,S)):S.object.type==="ThisExpression"?m(S,d(S.property.name)):B(S.object,S);else{if(S.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(S.type==="Identifier"){var P=S.name,I=u.indexOf(P);if(I>=0){var N=a[I],G=C(S);G&_&&(N.lvalue=!0),G&b&&(N.rvalue=!0),++N.count,m(S,N.name)}else Q2(P)||m(S,c(P))}else if(S.type==="Literal")typeof S.value=="string"&&m(S,y(S.value));else{if(S.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var L=Object.keys(S),q=0,$=L.length;q<$;++q)if(L[q]!=="parent"){var H=S[L[q]];if(H)if(H instanceof Array)for(var z=0;z<H.length;++z)H[z]&&typeof H[z].type=="string"&&B(H[z],S);else typeof H.type=="string"&&B(H,S)}}}})(r.body[0].expression.callee.body,void 0),D0(p),D0(f);var w=new J2(g(r.body[0].expression.callee.body),a,f,p);return w}var rC=tC,ol=rC,nC=pf,Ka=["args","body"],iC=["pre","post","printCode","funcName","blockSize"];function uC(e){for(var t in e)Ka.indexOf(t)<0&&iC.indexOf(t)<0&&console.warn("cwise: Unknown argument '"+t+"' passed to expression compiler");for(var r=0;r<Ka.length;++r)if(!e[Ka[r]])throw new Error("cwise: Missing argument: "+Ka[r]);return nC({args:e.args,pre:ol(e.pre||function(){}),body:ol(e.body),post:ol(e.post||function(){}),debug:!!e.printCode,funcName:e.funcName||e.body.name||"cwise",blockSize:e.blockSize||64})}var Vs=uC,aC=Y2,sC=Vs,oC=sC({args:["array","scalar","index"],body:function(t,r,n){var u=r,a;for(a=0;a<n.length-1;++a)u=u[n[a]];u[n[n.length-1]]=t}}),lC=function(t){var r=aC(t.shape);return oC(t,r),r},hs={},fC={get exports(){return hs},set exports(e){hs=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(l,o){for(var h=new Float64Array(l*o),p=0;p<h.length;p++)h[p]=a()*1e-4;return(0,n.default)(h,[l,o])};var r=Du,n=u(r);function u(l){return l&&l.__esModule?l:{default:l}}function a(){var l=2*Math.random()-1,o=2*Math.random()-1,h=l*l+o*o;return h==0||h>1?a():l*Math.sqrt(-2*Math.log(h)/h)}e.exports=t.default})(fC,hs);var ra={},cC={get exports(){return ra},set exports(e){ra=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(c,d){var m=c.shape[0],y=(0,n.default)(new Float64Array(m*m),[m,m]);switch(d){case"euclidean":for(var g=0;g<m;g++)for(var _=g+1;_<m;_++){var b=o(c.pick(g,null),c.pick(_,null));y.set(g,_,b),y.set(_,g,b)}break;case"manhattan":for(var g=0;g<m;g++)for(var _=g+1;_<m;_++){var b=h(c.pick(g,null),c.pick(_,null));y.set(g,_,b),y.set(_,g,b)}break;case"jaccard":for(var g=0;g<m;g++)for(var _=g+1;_<m;_++){var b=p(c.pick(g,null),c.pick(_,null));y.set(g,_,b),y.set(_,g,b)}break;case"dice":for(var g=0;g<m;g++)for(var _=g+1;_<m;_++){var b=f(c.pick(g,null),c.pick(_,null));y.set(g,_,b),y.set(_,g,b)}break}return y};var r=Du,n=l(r),u=Vs,a=l(u);function l(c){return c&&c.__esModule?c:{default:c}}var o=(0,a.default)({args:["array","array"],pre:function(d,m){this.sum=0},body:function(d,m){var y=d-m;this.sum+=y*y},post:function(d,m){return Math.sqrt(this.sum)}}),h=(0,a.default)({args:["array","array"],pre:function(d,m){this.sum=0},body:function(d,m){this.sum+=Math.abs(d-m)},post:function(d,m){return this.sum}}),p=(0,a.default)({args:["array","array"],pre:function(d,m){this.tf=0,this.tt=0},body:function(d,m){var y=Math.round(d),g=Math.round(m);this.tf+=+(y!=g),this.tt+=+(y==1&&g==1)},post:function(d,m){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),f=(0,a.default)({args:["array","array"],pre:function(d,m){this.tf=0,this.tt=0},body:function(d,m){var y=Math.round(d),g=Math.round(m);this.tf+=+(y!=g),this.tt+=+(y==1&&g==1)},post:function(d,m){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});e.exports=t.default})(cC,ra);var ds={},hC={get exports(){return ds},set exports(e){ds=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(f,c){for(var d=100,m=f.shape[0],y=(0,n.default)(new Float64Array(m*m),[m,m]),g=(0,n.default)(new Float64Array(m*m),[m,m]),_=void 0,b=void 0,C=1/0,w=Math.log(c),B=void 0,S=void 0,O=void 0,P=void 0,I=0;I<m;I++){_=1,b=-1/0,C=1/0;for(var N=0;N<d;N++){for(var G=0;G<m;G++)y.set(I,G,Math.exp(-f.get(I,G)*_));y.set(I,I,0),O=0;for(var G=0;G<m;G++)O+=y.get(I,G);O==0&&(O=o),P=0;for(var G=0;G<m;G++)y.set(I,G,y.get(I,G)/O),P+=f.get(I,G)*y.get(I,G);if(S=Math.log(O)+_*P,B=S-w,Math.abs(B)<=p)break;B>0?(b=_,C==1/0?_=_*2:_=(_+C)/2):(C=_,b==-1/0?_=_/2:_=(_+b)/2)}}a.default.add(g,y,y.transpose(1,0));var L=Math.max(a.default.sum(g),h);return a.default.divseq(g,L),a.default.maxseq(g,h),g};var r=Du,n=l(r),u=Us,a=l(u);function l(f){return f&&f.__esModule?f:{default:f}}var o=1e-7,h=Number.EPSILON||2220446049250313e-31,p=1e-5;e.exports=t.default})(hC,ds);var ps={},dC={get exports(){return ps},set exports(e){ps=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(m,y,g){var _=m.shape[0],b=m.shape[1],C=(0,n.default)(new Float64Array(_*_),[_,_]),w=(0,p.default)(m,"euclidean");d(w);var B=(g+1)/-2;a.default.powseq(a.default.divseq(a.default.addseq(w,1),g),B);for(var S=0;S<_;S++)w.set(S,S,0);var O=Math.max(a.default.sum(w),c);a.default.divs(C,w,O),a.default.maxseq(C,c);var P=(0,n.default)(new Float64Array(_*_),[_,_]),I=(0,n.default)(new Float64Array(_*_),[_,_]);a.default.div(P,y,C),a.default.logeq(P),a.default.assign(I,y);var N=a.default.sum(a.default.muleq(P,I)),G=(0,n.default)(new Float64Array(m.size),m.shape),L=(0,n.default)(new Float64Array(_*_),[_,_]);a.default.sub(L,y,C),a.default.muleq(L,w);for(var S=0;S<_;S++)for(var q=0;q<b;q++){var $=(0,n.default)(new Float64Array(m.shape[0]),[m.shape[0]]);a.default.assign($,m.pick(null,q)),a.default.addseq(a.default.negeq($),m.get(S,q)),a.default.muleq($,L.pick(S,null)),G.set(S,q,a.default.sum($))}var H=2*(g+1)/g;return a.default.mulseq(G,H),[N,G]};var r=Du,n=f(r),u=Us,a=f(u),l=Vs,o=f(l),h=ra,p=f(h);function f(m){return m&&m.__esModule?m:{default:m}}var c=Number.EPSILON||2220446049250313e-31,d=(0,o.default)({args:["array"],body:function(y){}});e.exports=t.default})(dC,ps);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function $(H,z){var W=[],re=!0,ee=!1,Q=void 0;try{for(var le=H[Symbol.iterator](),me;!(re=(me=le.next()).done)&&(W.push(me.value),!(z&&W.length===z));re=!0);}catch(Se){ee=!0,Q=Se}finally{try{!re&&le.return&&le.return()}finally{if(ee)throw Q}}return W}return function(H,z){if(Array.isArray(H))return H;if(Symbol.iterator in Object(H))return $(H,z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function $(H,z){for(var W=0;W<z.length;W++){var re=z[W];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(H,re.key,re)}}return function(H,z,W){return z&&$(H.prototype,z),W&&$(H,W),H}}(),u=fs,a=Du,l=P(a),o=Us,h=P(o),p=H2,f=P(p),c=lC,d=P(c),m=Vs,y=P(m),g=hs,_=P(g),b=ra,C=P(b),w=ds,B=P(w),S=ps,O=P(S);function P($){return $&&$.__esModule?$:{default:$}}function I($){if(Array.isArray($)){for(var H=0,z=Array($.length);H<$.length;H++)z[H]=$[H];return z}else return Array.from($)}function N($,H){if(!($ instanceof H))throw new TypeError("Cannot call a class as a function")}function G($,H){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:$}function L($,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);$.prototype=Object.create(H&&H.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf($,H):$.__proto__=H)}var q=function($){L(H,$);function H(z){N(this,H);var W=G(this,Object.getPrototypeOf(H).call(this));return z=z||{},W.dim=z.dim||2,W.perplexity=z.perplexity||30,W.earlyExaggeration=z.earlyExaggeration||4,W.learningRate=z.learningRate||1e3,W.nIter=z.nIter||1e3,W.metric=z.metric||"euclidean",W.barneshut=z.barneshut||!1,W.inputData=null,W.outputEmbedding=null,W}return n(H,[{key:"init",value:function(W){W=W||{};var re=W.data||[],ee=W.type||"dense";if(ee==="dense")this.inputData=(0,f.default)(re);else if(ee==="sparse"){for(var Q=[],le=1,me=function(lt){var et=Math.max.apply(null,re.map(function(ut){return ut[lt]}))+1;Q.push(et),le*=et},Se=0;Se<re[0].length;Se++)me(Se);this.inputData=(0,l.default)(new Float64Array(le),Q);var be=!0,Ne=!1,je=void 0;try{for(var Me=re[Symbol.iterator](),it;!(be=(it=Me.next()).done);be=!0){var qe,Te=it.value;(qe=this.inputData).set.apply(qe,I(Te).concat([1]))}}catch(Re){Ne=!0,je=Re}finally{try{!be&&Me.return&&Me.return()}finally{if(Ne)throw je}}}else throw new Error("input data type must be dense or sparse");this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,C.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,B.default)(this.distances,this.perplexity);var W=Number.MAX_VALUE,re=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),h.default.mulseq(this.P,this.earlyExaggeration);var ee=this._gradDesc(re,50,.5,0,0),Q=r(ee,2);W=Q[0],re=Q[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var le=this._gradDesc(re+1,100,.8,0,0),me=r(le,2);W=me[0],re=me[1],this.emit("progressStatus","Final optimization with momentum 0.8"),h.default.divseq(this.P,this.earlyExaggeration);var Se=this._gradDesc(re+1,this.nIter,.8,1e-6,1e-6),be=r(Se,2);return W=be[0],re=be[1],this.emit("progressStatus","Optimization end"),[W,re]}},{key:"rerun",value:function(){this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim);var W=this.run(),re=r(W,2),ee=re[0],Q=re[1];return[ee,Q]}},{key:"getOutput",value:function(){return(0,d.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var W=(0,l.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),re=(0,l.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),ee=0;ee<this.outputEmbedding.shape[1];ee++){var Q=h.default.sup(h.default.abs(re,this.outputEmbedding.pick(null,ee)));h.default.divs(W.pick(null,ee),this.outputEmbedding.pick(null,ee),Q)}return(0,d.default)(W)}},{key:"_gradDesc",value:function(W,re,ee){for(var Q=arguments.length<=3||arguments[3]===void 0?1e-6:arguments[3],le=arguments.length<=4||arguments[4]===void 0?1e-6:arguments[4],me=30,Se=(0,l.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),be=new Float64Array(this.outputEmbedding.size),Ne=0;Ne<be.length;Ne++)be[Ne]=1;var je=(0,l.default)(be,this.outputEmbedding.shape),Me=Number.MAX_VALUE,it=Number.MAX_VALUE,qe=0,Te=(0,y.default)({args:["array"],pre:function(yt){this.sum=0},body:function(yt){this.sum+=yt*yt},post:function(yt){return Math.sqrt(this.sum)}}),Re=(0,y.default)({args:["array","array","array"],body:function(yt,Tt,zt){}}),lt=void 0;for(lt=W;lt<re;lt++){var et=(0,O.default)(this.outputEmbedding,this.P,this.alpha),ut=r(et,2),tt=ut[0],rt=ut[1],ze=Math.abs(tt-Me);Me=tt;var We=Te(rt);if(this.emit("progressIter",[lt,Me,We]),Me<it)it=Me,qe=lt;else if(lt-qe>me)break;if(Q>=We||le>=ze)break;Re(je,Se,rt),h.default.muleq(rt,je);var Ae=(0,l.default)(new Float64Array(rt.size),rt.shape);h.default.muls(Ae,rt,this.learningRate),h.default.mulseq(Se,ee),h.default.subeq(Se,Ae),h.default.addeq(this.outputEmbedding,Se),this.emit("progressData",this.getOutputScaled())}return[Me,lt]}}]),H}(u.EventEmitter);t.default=q,e.exports=t.default})(o2,ls);const pC=of(ls);var Kl={},vC={get exports(){return Kl},set exports(e){Kl=e}},vs={},gC={get exports(){return vs},set exports(e){vs=e}},b0;function mC(){return b0||(b0=1,function(e){function t(r,n,u,a){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,u,a)}t.prototype.run=function(r,n,u,a){this._init(r,n,u,a);for(var l=0;l<this._datasetLength;l++)if(this._visited[l]!==1){this._visited[l]=1;var o=this._regionQuery(l);if(o.length<this.minPts)this.noise.push(l);else{var h=this.clusters.length;this.clusters.push([]),this._addToCluster(l,h),this._expandCluster(h,o)}}return this.clusters},t.prototype._init=function(r,n,u,a){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),u&&(this.minPts=u),a&&(this.distance=a)},t.prototype._expandCluster=function(r,n){for(var u=0;u<n.length;u++){var a=n[u];if(this._visited[a]!==1){this._visited[a]=1;var l=this._regionQuery(a);l.length>=this.minPts&&(n=this._mergeArrays(n,l))}this._assigned[a]!==1&&this._addToCluster(a,r)}},t.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1},t.prototype._regionQuery=function(r){for(var n=[],u=0;u<this._datasetLength;u++){var a=this.distance(this.dataset[r],this.dataset[u]);a<this.epsilon&&n.push(u)}return n},t.prototype._mergeArrays=function(r,n){for(var u=n.length,a=0;a<u;a++){var l=n[a];r.indexOf(l)<0&&r.push(l)}return r},t.prototype._euclideanDistance=function(r,n){for(var u=0,a=Math.min(r.length,n.length);a--;)u+=(r[a]-n[a])*(r[a]-n[a]);return Math.sqrt(u)},e.exports&&(e.exports=t)}(gC)),vs}var gs={},_C={get exports(){return gs},set exports(e){gs=e}},y0;function DC(){return y0||(y0=1,function(e){function t(r,n,u){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,u)}t.prototype.init=function(r,n,u){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof u<"u"&&(this.distance=u)},t.prototype.run=function(r,n){this.init(r,n);for(var u=this.dataset.length,a=0;a<this.k;a++)this.centroids[a]=this.randomCentroid();for(var l=!0;l;){l=this.assign();for(var o=0;o<this.k;o++){for(var h=new Array(d),p=0,f=0;f<d;f++)h[f]=0;for(var c=0;c<u;c++){var d=this.dataset[c].length;if(o===this.assignments[c]){for(var f=0;f<d;f++)h[f]+=this.dataset[c][f];p++}}if(p>0){for(var f=0;f<d;f++)h[f]/=p;this.centroids[o]=h}else this.centroids[o]=this.randomCentroid(),l=!0}}return this.getClusters()},t.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,u;do u=Math.round(Math.random()*r),n=this.dataset[u];while(this.centroids.indexOf(n)>=0);return n},t.prototype.assign=function(){for(var r=!1,n=this.dataset.length,u,a=0;a<n;a++)u=this.argmin(this.dataset[a],this.centroids,this.distance),u!=this.assignments[a]&&(this.assignments[a]=u,r=!0);return r},t.prototype.getClusters=function(){for(var r=new Array(this.k),n,u=0;u<this.assignments.length;u++)n=this.assignments[u],typeof r[n]>"u"&&(r[n]=[]),r[n].push(u);return r},t.prototype.argmin=function(r,n,u){for(var a=Number.MAX_VALUE,l=0,o=n.length,h,p=0;p<o;p++)h=u(r,n[p]),h<a&&(a=h,l=p);return l},t.prototype.distance=function(r,n){for(var u=0,a=Math.min(r.length,n.length);a--;){var l=r[a]-n[a];u+=l*l}return Math.sqrt(u)},e.exports&&(e.exports=t)}(_C)),gs}var ms={},bC={get exports(){return ms},set exports(e){ms=e}},_s={},yC={get exports(){return _s},set exports(e){_s=e}},A0;function Cp(){return A0||(A0=1,function(e){function t(r,n,u){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,u)}t.prototype.insert=function(r,n){for(var u=this._queue.length,a=u;a--;){var l=this._priorities[a];this._sorting==="desc"?n>l&&(u=a):n<l&&(u=a)}this._insertAt(r,n,u)},t.prototype.remove=function(r){for(var n=this._queue.length;n--;){var u=this._queue[n];if(r===u){this._queue.splice(n,1),this._priorities.splice(n,1);break}}},t.prototype.forEach=function(r){this._queue.forEach(r)},t.prototype.getElements=function(){return this._queue},t.prototype.getElementPriority=function(r){return this._priorities[r]},t.prototype.getPriorities=function(){return this._priorities},t.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,u=this._queue.length;n<u;n++)r.push([this._queue[n],this._priorities[n]]);return r},t.prototype._init=function(r,n,u){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var a=0;a<r.length;a++)this.insert(r[a],n[a])}u&&(this._sorting=u)},t.prototype._insertAt=function(r,n,u){this._queue.length===u?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(u,0,r),this._priorities.splice(u,0,n))},e.exports&&(e.exports=t)}(yC)),_s}var w0;function AC(){return w0||(w0=1,function(e){if(e.exports)var t=Cp();function r(n,u,a,l){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,u,a,l)}r.prototype.run=function(n,u,a,l){this._init(n,u,a,l);for(var o=0,h=this.dataset.length;o<h;o++)if(this._processed[o]!==1){this._processed[o]=1,this.clusters.push([o]);var p=this.clusters.length-1;this._orderedList.push(o);var f=new t(null,null,"asc"),c=this._regionQuery(o);this._distanceToCore(o)!==void 0&&(this._updateQueue(o,c,f),this._expandCluster(p,f))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var n=[],u=0,a=this._orderedList.length;u<a;u++){var l=this._orderedList[u],o=this._reachability[l];n.push([l,o])}return n},r.prototype._init=function(n,u,a,l){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}u&&(this.epsilon=u),a&&(this.minPts=a),l&&(this.distance=l)},r.prototype._updateQueue=function(n,u,a){var l=this;this._coreDistance=this._distanceToCore(n),u.forEach(function(o){if(l._processed[o]===void 0){var h=l.distance(l.dataset[n],l.dataset[o]),p=Math.max(l._coreDistance,h);l._reachability[o]===void 0?(l._reachability[o]=p,a.insert(o,p)):p<l._reachability[o]&&(l._reachability[o]=p,a.remove(o),a.insert(o,p))}})},r.prototype._expandCluster=function(n,u){for(var a=u.getElements(),l=0,o=a.length;l<o;l++){var h=a[l];if(this._processed[h]===void 0){var p=this._regionQuery(h);this._processed[h]=1,this.clusters[n].push(h),this._orderedList.push(h),this._distanceToCore(h)!==void 0&&(this._updateQueue(h,p,u),this._expandCluster(n,u))}}},r.prototype._distanceToCore=function(n){for(var u=this.epsilon,a=0;a<u;a++){var l=this._regionQuery(n,a);if(l.length>=this.minPts)return a}},r.prototype._regionQuery=function(n,u){u=u||this.epsilon;for(var a=[],l=0,o=this.dataset.length;l<o;l++)this.distance(this.dataset[n],this.dataset[l])<u&&a.push(l);return a},r.prototype._euclideanDistance=function(n,u){for(var a=0,l=Math.min(n.length,u.length);l--;)a+=(n[l]-u[l])*(n[l]-u[l]);return Math.sqrt(a)},e.exports&&(e.exports=r)}(bC)),ms}(function(e){e.exports&&(e.exports={DBSCAN:mC(),KMEANS:DC(),OPTICS:AC(),PriorityQueue:Cp()})})(vC);var Ds={},wC={get exports(){return Ds},set exports(e){Ds=e}};(function(e){var t=parseInt(Number.MAX_SAFE_INTEGER/2)||4503599627370496,r=0;function n(){this.C=null,this.row_covered=[],this.col_covered=[],this.n=0,this.Z0_r=0,this.Z0_c=0,this.marked=null,this.path=null}n.prototype.pad_matrix=function(o,h){h=h||r;var p=0,f=o.length,c;for(c=0;c<f;++c)o[c].length>p&&(p=o[c].length);f=p>f?p:f;var d=[];for(c=0;c<f;++c){for(var m=o[c]||[],y=m.slice();f>y.length;)y.push(h);d.push(y)}return d},n.prototype.compute=function(o,h){h=h||{},h.padValue=h.padValue||r,this.C=this.pad_matrix(o,h.padValue),this.n=this.C.length,this.original_length=o.length,this.original_width=o[0].length;for(var p=[];p.length<this.n;)p.push(!1);this.row_covered=p.slice(),this.col_covered=p.slice(),this.Z0_r=0,this.Z0_c=0,this.path=this.__make_matrix(this.n*2,0),this.marked=this.__make_matrix(this.n,0);for(var f=1,c={1:this.__step1,2:this.__step2,3:this.__step3,4:this.__step4,5:this.__step5,6:this.__step6};;){var d=c[f];if(!d)break;f=d.apply(this)}for(var m=[],y=0;y<this.original_length;++y)for(var g=0;g<this.original_width;++g)this.marked[y][g]==1&&m.push([y,g]);return m},n.prototype.__make_matrix=function(o,h){for(var p=[],f=0;f<o;++f){p[f]=[];for(var c=0;c<o;++c)p[f][c]=h}return p},n.prototype.__step1=function(){for(var o=0;o<this.n;++o)for(var h=Math.min.apply(Math,this.C[o]),p=0;p<this.n;++p)this.C[o][p]-=h;return 2},n.prototype.__step2=function(){for(var o=0;o<this.n;++o)for(var h=0;h<this.n;++h)if(this.C[o][h]===0&&!this.col_covered[h]&&!this.row_covered[o]){this.marked[o][h]=1,this.col_covered[h]=!0,this.row_covered[o]=!0;break}return this.__clear_covers(),3},n.prototype.__step3=function(){for(var o=0,h=0;h<this.n;++h)for(var p=0;p<this.n;++p)this.marked[h][p]==1&&this.col_covered[p]==!1&&(this.col_covered[p]=!0,++o);return o>=this.n?7:4},n.prototype.__step4=function(){for(var o=!1,h=-1,p=-1,f=-1;!o;){var c=this.__find_a_zero();if(h=c[0],p=c[1],h<0)return 6;if(this.marked[h][p]=2,f=this.__find_star_in_row(h),f>=0)p=f,this.row_covered[h]=!0,this.col_covered[p]=!1;else return this.Z0_r=h,this.Z0_c=p,5}},n.prototype.__step5=function(){var o=0;this.path[o][0]=this.Z0_r,this.path[o][1]=this.Z0_c;for(var h=!1;!h;){var p=this.__find_star_in_col(this.path[o][1]);if(p>=0?(o++,this.path[o][0]=p,this.path[o][1]=this.path[o-1][1]):h=!0,!h){var f=this.__find_prime_in_row(this.path[o][0]);o++,this.path[o][0]=this.path[o-1][0],this.path[o][1]=f}}return this.__convert_path(this.path,o),this.__clear_covers(),this.__erase_primes(),3},n.prototype.__step6=function(){for(var o=this.__find_smallest(),h=0;h<this.n;++h)for(var p=0;p<this.n;++p)this.row_covered[h]&&(this.C[h][p]+=o),this.col_covered[p]||(this.C[h][p]-=o);return 4},n.prototype.__find_smallest=function(){for(var o=t,h=0;h<this.n;++h)for(var p=0;p<this.n;++p)!this.row_covered[h]&&!this.col_covered[p]&&o>this.C[h][p]&&(o=this.C[h][p]);return o},n.prototype.__find_a_zero=function(){for(var o=0;o<this.n;++o)for(var h=0;h<this.n;++h)if(this.C[o][h]===0&&!this.row_covered[o]&&!this.col_covered[h])return[o,h];return[-1,-1]},n.prototype.__find_star_in_row=function(o){for(var h=0;h<this.n;++h)if(this.marked[o][h]==1)return h;return-1},n.prototype.__find_star_in_col=function(o){for(var h=0;h<this.n;++h)if(this.marked[h][o]==1)return h;return-1},n.prototype.__find_prime_in_row=function(o){for(var h=0;h<this.n;++h)if(this.marked[o][h]==2)return h;return-1},n.prototype.__convert_path=function(o,h){for(var p=0;p<=h;++p)this.marked[o[p][0]][o[p][1]]=this.marked[o[p][0]][o[p][1]]==1?0:1},n.prototype.__clear_covers=function(){for(var o=0;o<this.n;++o)this.row_covered[o]=!1,this.col_covered[o]=!1},n.prototype.__erase_primes=function(){for(var o=0;o<this.n;++o)for(var h=0;h<this.n;++h)this.marked[o][h]==2&&(this.marked[o][h]=0)};function u(o,h){var p,f;if(!h){var c=-1/0;for(p=0;p<o.length;++p)for(f=0;f<o[p].length;++f)o[p][f]>c&&(c=o[p][f]);h=function(y){return c-y}}var d=[];for(p=0;p<o.length;++p){var m=o[p];for(d[p]=[],f=0;f<m.length;++f)d[p][f]=h(o[p][f])}return d}function a(o){var h=[],p,f;for(p=0;p<o.length;++p)for(f=0;f<o[p].length;++f){var c=String(o[p][f]).length;(!h[f]||c>=h[f])&&(h[f]=c)}var d="";for(p=0;p<o.length;++p){for(f=0;f<o[p].length;++f){for(var m=String(o[p][f]);m.length<h[f];)m=" "+m;d+=m,f!=o[p].length-1&&(d+=" ")}p!=o[p].length-1&&(d+=`
`)}return d}function l(o,h){var p=new n;return p.compute(o,h)}l.version="1.2.2",l.format_matrix=a,l.make_cost_matrix=u,l.Munkres=n,e.exports&&(e.exports=l)})(wC);const EC=Ds,CC=Kb({__proto__:null,default:EC},[Ds]);function E0(e,t,r){const n=e.slice();return n[31]=t[r][0],n[32]=t[r][1],n}function C0(e){let t=[],r=new Map,n,u,a,l=Object.entries(e[4].weightedPrompts);const o=h=>h[31];for(let h=0;h<l.length;h+=1){let p=E0(e,l,h),f=o(p);r.set(f,t[h]=S0(f,p))}return u=new na({props:{xy:e[7],radius:e[1],color:"rgba(136,157,191, 1)",handleMouseDown:e[19]}}),{c(){for(let h=0;h<t.length;h+=1)t[h].c();n=Kt(),pt(u.$$.fragment)},l(h){for(let p=0;p<t.length;p+=1)t[p].l(h);n=Kt(),vt(u.$$.fragment,h)},m(h,p){for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(h,p);Ce(h,n,p),gt(u,h,p),a=!0},p(h,p){p[0]&221&&(l=Object.entries(h[4].weightedPrompts),_n(),t=Si(t,p,o,1,h,l,r,n.parentNode,Sd,S0,n,E0),Dn());const f={};p[0]&128&&(f.xy=h[7]),p[0]&2&&(f.radius=h[1]),p[0]&32&&(f.handleMouseDown=h[19]),u.$set(f)},i(h){if(!a){for(let p=0;p<l.length;p+=1)xe(t[p]);xe(u.$$.fragment,h),a=!0}},o(h){for(let p=0;p<t.length;p+=1)Ue(t[p]);Ue(u.$$.fragment,h),a=!1},d(h){for(let p=0;p<t.length;p+=1)t[p].d(h);h&&V(n),mt(u,h)}}}function F0(e){let t,r;return t=new fp({props:{p1:e[6][e[31]].embedXY,p2:e[7]}}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,u){gt(t,n,u),r=!0},p(n,u){const a={};u[0]&80&&(a.p1=n[6][n[31]].embedXY),u[0]&128&&(a.p2=n[7]),t.$set(a)},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function S0(e,t){let r,n,u,a,l,o=t[32].embedActive&&F0(t);return u=new na({props:{xy:t[6][t[31]].embedXY,radius:t[0],color:"rgba(136,157,191, 1)"}}),a=new ks({props:{xy:[t[6][t[31]].embedXY[0]-rn(t[2],t[32].text.length,t[3])[0]/2,t[6][t[31]].embedXY[1]+t[0]],color:`rgba(255,255,255,${xr(t[32].embedWeight)}`,wh:rn(t[2],t[32].text.length,t[3]),fontSize:t[3],text:t[32].text}}),{key:e,first:null,c(){r=Kt(),o&&o.c(),n=Kt(),pt(u.$$.fragment),pt(a.$$.fragment),this.h()},l(h){r=Kt(),o&&o.l(h),n=Kt(),vt(u.$$.fragment,h),vt(a.$$.fragment,h),this.h()},h(){this.first=r},m(h,p){Ce(h,r,p),o&&o.m(h,p),Ce(h,n,p),gt(u,h,p),gt(a,h,p),l=!0},p(h,p){t=h,t[32].embedActive?o?(o.p(t,p),p[0]&16&&xe(o,1)):(o=F0(t),o.c(),xe(o,1),o.m(n.parentNode,n)):o&&(_n(),Ue(o,1,1,()=>{o=null}),Dn());const f={};p[0]&80&&(f.xy=t[6][t[31]].embedXY),p[0]&1&&(f.radius=t[0]),u.$set(f);const c={};p[0]&93&&(c.xy=[t[6][t[31]].embedXY[0]-rn(t[2],t[32].text.length,t[3])[0]/2,t[6][t[31]].embedXY[1]+t[0]]),p[0]&16&&(c.color=`rgba(255,255,255,${xr(t[32].embedWeight)}`),p[0]&28&&(c.wh=rn(t[2],t[32].text.length,t[3])),p[0]&8&&(c.fontSize=t[3]),p[0]&16&&(c.text=t[32].text),a.$set(c)},i(h){l||(xe(o),xe(u.$$.fragment,h),xe(a.$$.fragment,h),l=!0)},o(h){Ue(o),Ue(u.$$.fragment,h),Ue(a.$$.fragment,h),l=!1},d(h){h&&V(r),o&&o.d(h),h&&V(n),mt(u,h),mt(a,h)}}}function FC(e){let t,r=Object.entries(e[4].weightedPrompts).length>0&&Object.entries(e[6]||{}).length>0,n,u,a,l=r&&C0(e);return{c(){t=Et("svg"),l&&l.c(),this.h()},l(o){t=Ct(o,"svg",{id:!0,class:!0});var h=ie(t);l&&l.l(h),h.forEach(V),this.h()},h(){T(t,"id","svg"),T(t,"class","w-full h-full")},m(o,h){Ce(o,t,h),l&&l.m(t,null),n=!0,u||(a=[ke(t,"mousemove",e[9]),ke(t,"mouseup",e[10]),ke(t,"dblclick",e[8])],u=!0)},p(o,h){h[0]&80&&(r=Object.entries(o[4].weightedPrompts).length>0&&Object.entries(o[6]||{}).length>0),r?l?(l.p(o,h),h[0]&80&&xe(l,1)):(l=C0(o),l.c(),xe(l,1),l.m(t,null)):l&&(_n(),Ue(l,1,1,()=>{l=null}),Dn())},i(o){n||(xe(l),n=!0)},o(o){Ue(l),n=!1},d(o){o&&V(t),l&&l.d(),u=!1,Ur(a)}}}function SC(e,t,r){let n,u,a,l,o;Bt(e,yn,ee=>r(4,o=ee));let{center:h=[100,100]}=t,{dimensions:p=[100,100]}=t,{pointRadius:f=4}=t,{markerRadius:c=10}=t,{textWidth:d=150}=t,{fontSize:m=12}=t,{innerPad:y=100}=t,g=!1,_=null,b=p,C=[0,0];function w(){return{"00":[C[0],C[1]],"01":[C[0],C[1]+b[1]],11:[C[0]+b[0],C[1]+b[1]],10:[C[0]+b[0],C[1]]}}function B(ee,Q){return ee.map(le=>Q.map(me=>Xa(le,me)))}function S(ee,Q){if(ee.length!==Q.length)throw new Error("Both sets should have the same number of points");const le=B(ee,Q),me=CC(le);return console.log(me),me?me.map(([Se,be])=>({ids:[Se,be],points:[ee[Se],Q[be]]})):null}function O(ee){const Q=ee.reduce((le,me)=>Hr(le,me),[0,0]);return gn(Q,1/ee.length)}function P(ee){const Q=w();switch(ee){case 2:return[gn(Hr(Q["00"],Q["01"]),.5),gn(Hr(Q[10],Q[11]),.5)];case 4:return[Q["00"],Q["01"],Q[11],Q[10]];case 6:return[gn(Hr(Q["00"],Q["01"]),.5),gn(Hr(Q[10],Q[11]),.5),Q["00"],Q["01"],Q[11],Q[10]];case 8:return[gn(Hr(Q["00"],Q["01"]),.5),gn(Hr(Q[10],Q[11]),.5),Q["00"],Q["01"],Q[11],Q[10],gn(Hr(Q["00"],Q[10]),.5),gn(Hr(Q["01"],Q[11]),.5)];default:return null}}function I(ee){o.embeddings&&o.scaledEmbedMappings&&(W(),q(n,u,a,b,ee))}function N(ee,Q){ee&&Q&&(W(),q(n,u,a,b,l))}function G(ee,Q){q(n,ee,Q,b,l)}function L(ee){o.embeddings&&o.scaledEmbedMappings&&(W(),q(n,u,a,ee,l))}function q(ee,Q,le,me,Se){if(!_)return;let be={...o.weightedPrompts},Ne=0;Object.values(_).forEach(qe=>{Object.values(_).forEach(Te=>{const Re=Xa(qe.embedXY,Te.embedXY);Re>Ne&&(Ne=Re)})});const je=Object.entries(_).reduce((qe,[Te,Re])=>{const lt=Xa(ee,Re.embedXY);return qe[Te]=lt,qe},{}),Me=(qe,Te)=>{const Re=qe?Math.round(Math.pow(1-Te/Ne,le)*100)/100:0;return Re<0?0:Re},it=(qe,Te)=>{const Re=qe?Math.round((1-Te/Ne)*100)/100:0;return Re<0?0:Re};Object.entries(je).sort((qe,Te)=>qe[1]-Te[1]).forEach(([qe,Te],Re)=>{if(!be[qe])return;const lt=Re<Se;be[qe]={...be[qe],embedWeight:Q?Me(lt,Te):it(lt,Te),embedActive:lt}}),Ot.update({...o,embedMarker:n,weightedPrompts:be})}function $(ee){const Q=zi(ee,svg);r(7,n=Q),q(n,u,a,b,l)}function H(ee){if(g){const Q=zi(ee,svg);r(7,n=Q),q(n,u,a,b,l)}}function z(ee){r(5,g=!1)}function W(){const Q=Object.keys(o.scaledEmbedMappings).reduce((me,Se,be)=>(me[Se]={embedXY:[C[0]+b[0]*o.scaledEmbedMappings[be][0],C[1]+b[1]*o.scaledEmbedMappings[be][1]]},me),{}),le=me=>{if(!me.length)return h;const Se=me.map(be=>Q[be].embedXY);return O(Se)};if(o.embedClusters){const me=o.embedClusters,Se=o.embedClusterSets[me];let be=Se.map(Me=>le(Me));const Ne=P(me),je=S(be,Ne);je&&je.forEach(Me=>{const it=Me.ids[0],qe=Me.points[1];Se[it].forEach(Te=>{Q[Te].embedXY=O([Q[Te].embedXY,qe])})})}r(6,_=Q)}const re=()=>r(5,g=!0);return e.$$set=ee=>{"center"in ee&&r(11,h=ee.center),"dimensions"in ee&&r(12,p=ee.dimensions),"pointRadius"in ee&&r(0,f=ee.pointRadius),"markerRadius"in ee&&r(1,c=ee.markerRadius),"textWidth"in ee&&r(2,d=ee.textWidth),"fontSize"in ee&&r(3,m=ee.fontSize),"innerPad"in ee&&r(13,y=ee.innerPad)},e.$$.update=()=>{if(e.$$.dirty[0]&2064&&r(7,n=o.embedMarker||h),e.$$.dirty[0]&16&&r(18,u=o.embedExponentialScaling),e.$$.dirty[0]&16&&r(17,a=o.embedWeightScaling),e.$$.dirty[0]&16&&r(16,l=o.embedPromptLimit||Object.keys(o.weightedPrompts).length),e.$$.dirty[0]&393216&&G(u,a),e.$$.dirty[0]&16&&N(o.embeddings,o.scaledEmbedMappings),e.$$.dirty[0]&45056){const ee=Math.min(...p),Q=p[0]===ee,le=p[1]===ee;r(15,C=[Math.max(Q?0:(p[0]-ee)/2,y),Math.max(le?0:(p[1]-ee)/2,y)]),r(14,b=[p[0]-2*C[0],p[1]-2*C[1]])}e.$$.dirty[0]&16384&&L(b),e.$$.dirty[0]&65536&&I(l)},[f,c,d,m,o,g,_,n,$,H,z,h,p,y,b,C,l,a,u,re]}class BC extends kt{constructor(t){super(),Rt(this,t,SC,FC,Lt,{center:11,dimensions:12,pointRadius:0,markerRadius:1,textWidth:2,fontSize:3,innerPad:13},null,[-1,-1])}}var Yl={},Fp={},bs={},OC={get exports(){return bs},set exports(e){bs=e}},ys={},MC={get exports(){return ys},set exports(e){ys=e}},Sp=function(t,r){return function(){for(var u=new Array(arguments.length),a=0;a<u.length;a++)u[a]=arguments[a];return t.apply(r,u)}},PC=Sp,Oi=Object.prototype.toString;function vf(e){return Array.isArray(e)}function Zl(e){return typeof e>"u"}function xC(e){return e!==null&&!Zl(e)&&e.constructor!==null&&!Zl(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Bp(e){return Oi.call(e)==="[object ArrayBuffer]"}function TC(e){return Oi.call(e)==="[object FormData]"}function IC(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Bp(e.buffer),t}function NC(e){return typeof e=="string"}function kC(e){return typeof e=="number"}function Op(e){return e!==null&&typeof e=="object"}function Qa(e){if(Oi.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function RC(e){return Oi.call(e)==="[object Date]"}function LC(e){return Oi.call(e)==="[object File]"}function UC(e){return Oi.call(e)==="[object Blob]"}function Mp(e){return Oi.call(e)==="[object Function]"}function VC(e){return Op(e)&&Mp(e.pipe)}function jC(e){return Oi.call(e)==="[object URLSearchParams]"}function qC(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function zC(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function gf(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),vf(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&t.call(null,e[u],u,e)}function $l(){var e={};function t(u,a){Qa(e[a])&&Qa(u)?e[a]=$l(e[a],u):Qa(u)?e[a]=$l({},u):vf(u)?e[a]=u.slice():e[a]=u}for(var r=0,n=arguments.length;r<n;r++)gf(arguments[r],t);return e}function WC(e,t,r){return gf(t,function(u,a){r&&typeof u=="function"?e[a]=PC(u,r):e[a]=u}),e}function HC(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Kr={isArray:vf,isArrayBuffer:Bp,isBuffer:xC,isFormData:TC,isArrayBufferView:IC,isString:NC,isNumber:kC,isObject:Op,isPlainObject:Qa,isUndefined:Zl,isDate:RC,isFile:LC,isBlob:UC,isFunction:Mp,isStream:VC,isURLSearchParams:jC,isStandardBrowserEnv:zC,forEach:gf,merge:$l,extend:WC,trim:qC,stripBOM:HC},lu=Kr;function B0(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Pp=function(t,r,n){if(!r)return t;var u;if(n)u=n(r);else if(lu.isURLSearchParams(r))u=r.toString();else{var a=[];lu.forEach(r,function(h,p){h===null||typeof h>"u"||(lu.isArray(h)?p=p+"[]":h=[h],lu.forEach(h,function(c){lu.isDate(c)?c=c.toISOString():lu.isObject(c)&&(c=JSON.stringify(c)),a.push(B0(p)+"="+B0(c))}))}),u=a.join("&")}if(u){var l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+u}return t},GC=Kr;function js(){this.handlers=[]}js.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};js.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};js.prototype.forEach=function(t){GC.forEach(this.handlers,function(n){n!==null&&t(n)})};var KC=js,YC=Kr,ZC=function(t,r){YC.forEach(t,function(u,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(t[r]=u,delete t[a])})},xp=function(t,r,n,u,a){return t.config=r,n&&(t.code=n),t.request=u,t.response=a,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},Tp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ll,O0;function Ip(){if(O0)return ll;O0=1;var e=xp;return ll=function(r,n,u,a,l){var o=new Error(r);return e(o,n,u,a,l)},ll}var fl,M0;function $C(){if(M0)return fl;M0=1;var e=Ip();return fl=function(r,n,u){var a=u.config.validateStatus;!u.status||!a||a(u.status)?r(u):n(e("Request failed with status code "+u.status,u.config,null,u.request,u))},fl}var cl,P0;function XC(){if(P0)return cl;P0=1;var e=Kr;return cl=e.isStandardBrowserEnv()?function(){return{write:function(n,u,a,l,o,h){var p=[];p.push(n+"="+encodeURIComponent(u)),e.isNumber(a)&&p.push("expires="+new Date(a).toGMTString()),e.isString(l)&&p.push("path="+l),e.isString(o)&&p.push("domain="+o),h===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var u=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cl}var hl,x0;function JC(){return x0||(x0=1,hl=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}),hl}var dl,T0;function QC(){return T0||(T0=1,dl=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}),dl}var pl,I0;function eF(){if(I0)return pl;I0=1;var e=JC(),t=QC();return pl=function(n,u){return n&&!e(u)?t(n,u):u},pl}var vl,N0;function tF(){if(N0)return vl;N0=1;var e=Kr,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return vl=function(n){var u={},a,l,o;return n&&e.forEach(n.split(`
`),function(p){if(o=p.indexOf(":"),a=e.trim(p.substr(0,o)).toLowerCase(),l=e.trim(p.substr(o+1)),a){if(u[a]&&t.indexOf(a)>=0)return;a==="set-cookie"?u[a]=(u[a]?u[a]:[]).concat([l]):u[a]=u[a]?u[a]+", "+l:l}}),u},vl}var gl,k0;function rF(){if(k0)return gl;k0=1;var e=Kr;return gl=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),u;function a(l){var o=l;return r&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return u=a(window.location.href),function(o){var h=e.isString(o)?a(o):o;return h.protocol===u.protocol&&h.host===u.host}}():function(){return function(){return!0}}(),gl}var ml,R0;function qs(){if(R0)return ml;R0=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,ml=e,ml}var _l,L0;function U0(){if(L0)return _l;L0=1;var e=Kr,t=$C(),r=XC(),n=Pp,u=eF(),a=tF(),l=rF(),o=Ip(),h=Tp,p=qs();return _l=function(c){return new Promise(function(m,y){var g=c.data,_=c.headers,b=c.responseType,C;function w(){c.cancelToken&&c.cancelToken.unsubscribe(C),c.signal&&c.signal.removeEventListener("abort",C)}e.isFormData(g)&&delete _["Content-Type"];var B=new XMLHttpRequest;if(c.auth){var S=c.auth.username||"",O=c.auth.password?unescape(encodeURIComponent(c.auth.password)):"";_.Authorization="Basic "+btoa(S+":"+O)}var P=u(c.baseURL,c.url);B.open(c.method.toUpperCase(),n(P,c.params,c.paramsSerializer),!0),B.timeout=c.timeout;function I(){if(B){var G="getAllResponseHeaders"in B?a(B.getAllResponseHeaders()):null,L=!b||b==="text"||b==="json"?B.responseText:B.response,q={data:L,status:B.status,statusText:B.statusText,headers:G,config:c,request:B};t(function(H){m(H),w()},function(H){y(H),w()},q),B=null}}if("onloadend"in B?B.onloadend=I:B.onreadystatechange=function(){!B||B.readyState!==4||B.status===0&&!(B.responseURL&&B.responseURL.indexOf("file:")===0)||setTimeout(I)},B.onabort=function(){B&&(y(o("Request aborted",c,"ECONNABORTED",B)),B=null)},B.onerror=function(){y(o("Network Error",c,null,B)),B=null},B.ontimeout=function(){var L=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded",q=c.transitional||h;c.timeoutErrorMessage&&(L=c.timeoutErrorMessage),y(o(L,c,q.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",B)),B=null},e.isStandardBrowserEnv()){var N=(c.withCredentials||l(P))&&c.xsrfCookieName?r.read(c.xsrfCookieName):void 0;N&&(_[c.xsrfHeaderName]=N)}"setRequestHeader"in B&&e.forEach(_,function(L,q){typeof g>"u"&&q.toLowerCase()==="content-type"?delete _[q]:B.setRequestHeader(q,L)}),e.isUndefined(c.withCredentials)||(B.withCredentials=!!c.withCredentials),b&&b!=="json"&&(B.responseType=c.responseType),typeof c.onDownloadProgress=="function"&&B.addEventListener("progress",c.onDownloadProgress),typeof c.onUploadProgress=="function"&&B.upload&&B.upload.addEventListener("progress",c.onUploadProgress),(c.cancelToken||c.signal)&&(C=function(G){B&&(y(!G||G&&G.type?new p("canceled"):G),B.abort(),B=null)},c.cancelToken&&c.cancelToken.subscribe(C),c.signal&&(c.signal.aborted?C():c.signal.addEventListener("abort",C))),g||(g=null),B.send(g)})},_l}var Br=Kr,V0=ZC,nF=xp,iF=Tp,uF={"Content-Type":"application/x-www-form-urlencoded"};function j0(e,t){!Br.isUndefined(e)&&Br.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function aF(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=U0()),e}function sF(e,t,r){if(Br.isString(e))try{return(t||JSON.parse)(e),Br.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var zs={transitional:iF,adapter:aF(),transformRequest:[function(t,r){return V0(r,"Accept"),V0(r,"Content-Type"),Br.isFormData(t)||Br.isArrayBuffer(t)||Br.isBuffer(t)||Br.isStream(t)||Br.isFile(t)||Br.isBlob(t)?t:Br.isArrayBufferView(t)?t.buffer:Br.isURLSearchParams(t)?(j0(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Br.isObject(t)||r&&r["Content-Type"]==="application/json"?(j0(r,"application/json"),sF(t)):t}],transformResponse:[function(t){var r=this.transitional||zs.transitional,n=r&&r.silentJSONParsing,u=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||u&&Br.isString(t)&&t.length)try{return JSON.parse(t)}catch(l){if(a)throw l.name==="SyntaxError"?nF(l,this,"E_JSON_PARSE"):l}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Br.forEach(["delete","get","head"],function(t){zs.headers[t]={}});Br.forEach(["post","put","patch"],function(t){zs.headers[t]=Br.merge(uF)});var mf=zs,oF=Kr,lF=mf,fF=function(t,r,n){var u=this||lF;return oF.forEach(n,function(l){t=l.call(u,t,r)}),t},Dl,q0;function Np(){return q0||(q0=1,Dl=function(t){return!!(t&&t.__CANCEL__)}),Dl}var z0=Kr,bl=fF,cF=Np(),hF=mf,dF=qs();function yl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new dF("canceled")}var pF=function(t){yl(t),t.headers=t.headers||{},t.data=bl.call(t,t.data,t.headers,t.transformRequest),t.headers=z0.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),z0.forEach(["delete","get","head","post","put","patch","common"],function(u){delete t.headers[u]});var r=t.adapter||hF.adapter;return r(t).then(function(u){return yl(t),u.data=bl.call(t,u.data,u.headers,t.transformResponse),u},function(u){return cF(u)||(yl(t),u&&u.response&&(u.response.data=bl.call(t,u.response.data,u.response.headers,t.transformResponse))),Promise.reject(u)})},tn=Kr,kp=function(t,r){r=r||{};var n={};function u(f,c){return tn.isPlainObject(f)&&tn.isPlainObject(c)?tn.merge(f,c):tn.isPlainObject(c)?tn.merge({},c):tn.isArray(c)?c.slice():c}function a(f){if(tn.isUndefined(r[f])){if(!tn.isUndefined(t[f]))return u(void 0,t[f])}else return u(t[f],r[f])}function l(f){if(!tn.isUndefined(r[f]))return u(void 0,r[f])}function o(f){if(tn.isUndefined(r[f])){if(!tn.isUndefined(t[f]))return u(void 0,t[f])}else return u(void 0,r[f])}function h(f){if(f in r)return u(t[f],r[f]);if(f in t)return u(void 0,t[f])}var p={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:h};return tn.forEach(Object.keys(t).concat(Object.keys(r)),function(c){var d=p[c]||a,m=d(c);tn.isUndefined(m)&&d!==h||(n[c]=m)}),n},Al,W0;function Rp(){return W0||(W0=1,Al={version:"0.26.1"}),Al}var vF=Rp().version,_f={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){_f[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var H0={};_f.transitional=function(t,r,n){function u(a,l){return"[Axios v"+vF+"] Transitional option '"+a+"'"+l+(n?". "+n:"")}return function(a,l,o){if(t===!1)throw new Error(u(l," has been removed"+(r?" in "+r:"")));return r&&!H0[l]&&(H0[l]=!0,console.warn(u(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,l,o):!0}};function gF(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),u=n.length;u-- >0;){var a=n[u],l=t[a];if(l){var o=e[a],h=o===void 0||l(o,a,e);if(h!==!0)throw new TypeError("option "+a+" must be "+h);continue}if(r!==!0)throw Error("Unknown option "+a)}}var mF={assertOptions:gF,validators:_f},Lp=Kr,_F=Pp,G0=KC,K0=pF,Ws=kp,Up=mF,fu=Up.validators;function ia(e){this.defaults=e,this.interceptors={request:new G0,response:new G0}}ia.prototype.request=function(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Ws(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Up.assertOptions(n,{silentJSONParsing:fu.transitional(fu.boolean),forcedJSONParsing:fu.transitional(fu.boolean),clarifyTimeoutError:fu.transitional(fu.boolean)},!1);var u=[],a=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(a=a&&m.synchronous,u.unshift(m.fulfilled,m.rejected))});var l=[];this.interceptors.response.forEach(function(m){l.push(m.fulfilled,m.rejected)});var o;if(!a){var h=[K0,void 0];for(Array.prototype.unshift.apply(h,u),h=h.concat(l),o=Promise.resolve(r);h.length;)o=o.then(h.shift(),h.shift());return o}for(var p=r;u.length;){var f=u.shift(),c=u.shift();try{p=f(p)}catch(d){c(d);break}}try{o=K0(p)}catch(d){return Promise.reject(d)}for(;l.length;)o=o.then(l.shift(),l.shift());return o};ia.prototype.getUri=function(t){return t=Ws(this.defaults,t),_F(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};Lp.forEach(["delete","get","head","options"],function(t){ia.prototype[t]=function(r,n){return this.request(Ws(n||{},{method:t,url:r,data:(n||{}).data}))}});Lp.forEach(["post","put","patch"],function(t){ia.prototype[t]=function(r,n,u){return this.request(Ws(u||{},{method:t,url:r,data:n}))}});var DF=ia,wl,Y0;function bF(){if(Y0)return wl;Y0=1;var e=qs();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(l){n=l});var u=this;this.promise.then(function(a){if(u._listeners){var l,o=u._listeners.length;for(l=0;l<o;l++)u._listeners[l](a);u._listeners=null}}),this.promise.then=function(a){var l,o=new Promise(function(h){u.subscribe(h),l=h}).then(a);return o.cancel=function(){u.unsubscribe(l)},o},r(function(l){u.reason||(u.reason=new e(l),n(u.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},t.prototype.unsubscribe=function(n){if(this._listeners){var u=this._listeners.indexOf(n);u!==-1&&this._listeners.splice(u,1)}},t.source=function(){var n,u=new t(function(l){n=l});return{token:u,cancel:n}},wl=t,wl}var El,Z0;function yF(){return Z0||(Z0=1,El=function(t){return function(n){return t.apply(null,n)}}),El}var Cl,$0;function AF(){if($0)return Cl;$0=1;var e=Kr;return Cl=function(r){return e.isObject(r)&&r.isAxiosError===!0},Cl}var X0=Kr,wF=Sp,es=DF,EF=kp,CF=mf;function Vp(e){var t=new es(e),r=wF(es.prototype.request,t);return X0.extend(r,es.prototype,t),X0.extend(r,t),r.create=function(u){return Vp(EF(e,u))},r}var Hn=Vp(CF);Hn.Axios=es;Hn.Cancel=qs();Hn.CancelToken=bF();Hn.isCancel=Np();Hn.VERSION=Rp().version;Hn.all=function(t){return Promise.all(t)};Hn.spread=yF();Hn.isAxiosError=AF();MC.exports=Hn;ys.default=Hn;(function(e){e.exports=ys})(OC);var ir={},Df={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RequiredError=e.BaseAPI=e.COLLECTION_FORMATS=e.BASE_PATH=void 0;const t=bs;e.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),e.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class r{constructor(a,l=e.BASE_PATH,o=t.default){this.basePath=l,this.axios=o,a&&(this.configuration=a,this.basePath=a.basePath||this.basePath)}}e.BaseAPI=r;class n extends Error{constructor(a,l){super(l),this.field=a,this.name="RequiredError"}}e.RequiredError=n})(Df);var bf=cr&&cr.__awaiter||function(e,t,r,n){function u(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(f){try{p(n.next(f))}catch(c){l(c)}}function h(f){try{p(n.throw(f))}catch(c){l(c)}}function p(f){f.done?a(f.value):u(f.value).then(o,h)}p((n=n.apply(e,t||[])).next())})};Object.defineProperty(ir,"__esModule",{value:!0});ir.createRequestFunction=ir.toPathString=ir.serializeDataIfNeeded=ir.setSearchParams=ir.setOAuthToObject=ir.setBearerAuthToObject=ir.setBasicAuthToObject=ir.setApiKeyToObject=ir.assertParamExists=ir.DUMMY_BASE_URL=void 0;const FF=Df;ir.DUMMY_BASE_URL="https://example.com";ir.assertParamExists=function(e,t,r){if(r==null)throw new FF.RequiredError(t,`Required parameter ${t} was null or undefined when calling ${e}.`)};ir.setApiKeyToObject=function(e,t,r){return bf(this,void 0,void 0,function*(){if(r&&r.apiKey){const n=typeof r.apiKey=="function"?yield r.apiKey(t):yield r.apiKey;e[t]=n}})};ir.setBasicAuthToObject=function(e,t){t&&(t.username||t.password)&&(e.auth={username:t.username,password:t.password})};ir.setBearerAuthToObject=function(e,t){return bf(this,void 0,void 0,function*(){if(t&&t.accessToken){const r=typeof t.accessToken=="function"?yield t.accessToken():yield t.accessToken;e.Authorization="Bearer "+r}})};ir.setOAuthToObject=function(e,t,r,n){return bf(this,void 0,void 0,function*(){if(n&&n.accessToken){const u=typeof n.accessToken=="function"?yield n.accessToken(t,r):yield n.accessToken;e.Authorization="Bearer "+u}})};function Xl(e,t,r=""){t!=null&&(typeof t=="object"?Array.isArray(t)?t.forEach(n=>Xl(e,n,r)):Object.keys(t).forEach(n=>Xl(e,t[n],`${r}${r!==""?".":""}${n}`)):e.has(r)?e.append(r,t):e.set(r,t))}ir.setSearchParams=function(e,...t){const r=new URLSearchParams(e.search);Xl(r,t),e.search=r.toString()};ir.serializeDataIfNeeded=function(e,t,r){const n=typeof e!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(t.headers["Content-Type"]):n)?JSON.stringify(e!==void 0?e:{}):e||""};ir.toPathString=function(e){return e.pathname+e.search+e.hash};ir.createRequestFunction=function(e,t,r,n){return(u=t,a=r)=>{const l=Object.assign(Object.assign({},e.options),{url:((n==null?void 0:n.basePath)||a)+e.url});return u.request(l)}};(function(e){var t=cr&&cr.__awaiter||function(l,o,h,p){function f(c){return c instanceof h?c:new h(function(d){d(c)})}return new(h||(h=Promise))(function(c,d){function m(_){try{g(p.next(_))}catch(b){d(b)}}function y(_){try{g(p.throw(_))}catch(b){d(b)}}function g(_){_.done?c(_.value):f(_.value).then(m,y)}g((p=p.apply(l,o||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.OpenAIApi=e.OpenAIApiFactory=e.OpenAIApiFp=e.OpenAIApiAxiosParamCreator=e.CreateImageRequestResponseFormatEnum=e.CreateImageRequestSizeEnum=e.ChatCompletionResponseMessageRoleEnum=e.ChatCompletionRequestMessageRoleEnum=void 0;const r=bs,n=ir,u=Df;e.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},e.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},e.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},e.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},e.OpenAIApiAxiosParamCreator=function(l){return{cancelFineTune:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("cancelFineTune","fineTuneId",o);const p="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),h),m={},y={};n.setSearchParams(f,y);let g=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),h.headers),{url:n.toPathString(f),options:d}}),createAnswer:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createAnswer","createAnswerRequest",o);const p="/answers",f=new URL(p,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),h),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),h.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createChatCompletion:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createChatCompletion","createChatCompletionRequest",o);const p="/chat/completions",f=new URL(p,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),h),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),h.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createClassification:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createClassification","createClassificationRequest",o);const p="/classifications",f=new URL(p,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),h),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),h.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createCompletion:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createCompletion","createCompletionRequest",o);const p="/completions",f=new URL(p,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),h),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),h.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createEdit:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createEdit","createEditRequest",o);const p="/edits",f=new URL(p,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),h),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),h.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createEmbedding:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createEmbedding","createEmbeddingRequest",o);const p="/embeddings",f=new URL(p,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),h),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),h.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createFile:(o,h,p={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createFile","file",o),n.assertParamExists("createFile","purpose",h);const f="/files",c=new URL(f,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const m=Object.assign(Object.assign({method:"POST"},d),p),y={},g={},_=new(l&&l.formDataCtor||FormData);o!==void 0&&_.append("file",o),h!==void 0&&_.append("purpose",h),y["Content-Type"]="multipart/form-data",n.setSearchParams(c,g);let b=d&&d.headers?d.headers:{};return m.headers=Object.assign(Object.assign(Object.assign(Object.assign({},y),_.getHeaders()),b),p.headers),m.data=_,{url:n.toPathString(c),options:m}}),createFineTune:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createFineTune","createFineTuneRequest",o);const p="/fine-tunes",f=new URL(p,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),h),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),h.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createImage:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createImage","createImageRequest",o);const p="/images/generations",f=new URL(p,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),h),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),h.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createImageEdit:(o,h,p,f,c,d,m,y={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createImageEdit","image",o),n.assertParamExists("createImageEdit","prompt",h);const g="/images/edits",_=new URL(g,n.DUMMY_BASE_URL);let b;l&&(b=l.baseOptions);const C=Object.assign(Object.assign({method:"POST"},b),y),w={},B={},S=new(l&&l.formDataCtor||FormData);o!==void 0&&S.append("image",o),p!==void 0&&S.append("mask",p),h!==void 0&&S.append("prompt",h),f!==void 0&&S.append("n",f),c!==void 0&&S.append("size",c),d!==void 0&&S.append("response_format",d),m!==void 0&&S.append("user",m),w["Content-Type"]="multipart/form-data",n.setSearchParams(_,B);let O=b&&b.headers?b.headers:{};return C.headers=Object.assign(Object.assign(Object.assign(Object.assign({},w),S.getHeaders()),O),y.headers),C.data=S,{url:n.toPathString(_),options:C}}),createImageVariation:(o,h,p,f,c,d={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createImageVariation","image",o);const m="/images/variations",y=new URL(m,n.DUMMY_BASE_URL);let g;l&&(g=l.baseOptions);const _=Object.assign(Object.assign({method:"POST"},g),d),b={},C={},w=new(l&&l.formDataCtor||FormData);o!==void 0&&w.append("image",o),h!==void 0&&w.append("n",h),p!==void 0&&w.append("size",p),f!==void 0&&w.append("response_format",f),c!==void 0&&w.append("user",c),b["Content-Type"]="multipart/form-data",n.setSearchParams(y,C);let B=g&&g.headers?g.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),w.getHeaders()),B),d.headers),_.data=w,{url:n.toPathString(y),options:_}}),createModeration:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createModeration","createModerationRequest",o);const p="/moderations",f=new URL(p,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),h),m={},y={};m["Content-Type"]="application/json",n.setSearchParams(f,y);let g=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),h.headers),d.data=n.serializeDataIfNeeded(o,d,l),{url:n.toPathString(f),options:d}}),createSearch:(o,h,p={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createSearch","engineId",o),n.assertParamExists("createSearch","createSearchRequest",h);const f="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(o))),c=new URL(f,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const m=Object.assign(Object.assign({method:"POST"},d),p),y={},g={};y["Content-Type"]="application/json",n.setSearchParams(c,g);let _=d&&d.headers?d.headers:{};return m.headers=Object.assign(Object.assign(Object.assign({},y),_),p.headers),m.data=n.serializeDataIfNeeded(h,m,l),{url:n.toPathString(c),options:m}}),createTranscription:(o,h,p,f,c,d,m={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createTranscription","file",o),n.assertParamExists("createTranscription","model",h);const y="/audio/transcriptions",g=new URL(y,n.DUMMY_BASE_URL);let _;l&&(_=l.baseOptions);const b=Object.assign(Object.assign({method:"POST"},_),m),C={},w={},B=new(l&&l.formDataCtor||FormData);o!==void 0&&B.append("file",o),h!==void 0&&B.append("model",h),p!==void 0&&B.append("prompt",p),f!==void 0&&B.append("response_format",f),c!==void 0&&B.append("temperature",c),d!==void 0&&B.append("language",d),C["Content-Type"]="multipart/form-data",n.setSearchParams(g,w);let S=_&&_.headers?_.headers:{};return b.headers=Object.assign(Object.assign(Object.assign(Object.assign({},C),B.getHeaders()),S),m.headers),b.data=B,{url:n.toPathString(g),options:b}}),createTranslation:(o,h,p,f,c,d={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createTranslation","file",o),n.assertParamExists("createTranslation","model",h);const m="/audio/translations",y=new URL(m,n.DUMMY_BASE_URL);let g;l&&(g=l.baseOptions);const _=Object.assign(Object.assign({method:"POST"},g),d),b={},C={},w=new(l&&l.formDataCtor||FormData);o!==void 0&&w.append("file",o),h!==void 0&&w.append("model",h),p!==void 0&&w.append("prompt",p),f!==void 0&&w.append("response_format",f),c!==void 0&&w.append("temperature",c),b["Content-Type"]="multipart/form-data",n.setSearchParams(y,C);let B=g&&g.headers?g.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),w.getHeaders()),B),d.headers),_.data=w,{url:n.toPathString(y),options:_}}),deleteFile:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("deleteFile","fileId",o);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},c),h),m={},y={};n.setSearchParams(f,y);let g=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),h.headers),{url:n.toPathString(f),options:d}}),deleteModel:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("deleteModel","model",o);const p="/models/{model}".replace("{model}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},c),h),m={},y={};n.setSearchParams(f,y);let g=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),h.headers),{url:n.toPathString(f),options:d}}),downloadFile:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("downloadFile","fileId",o);const p="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const d=Object.assign(Object.assign({method:"GET"},c),h),m={},y={};n.setSearchParams(f,y);let g=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),h.headers),{url:n.toPathString(f),options:d}}),listEngines:(o={})=>t(this,void 0,void 0,function*(){const h="/engines",p=new URL(h,n.DUMMY_BASE_URL);let f;l&&(f=l.baseOptions);const c=Object.assign(Object.assign({method:"GET"},f),o),d={},m={};n.setSearchParams(p,m);let y=f&&f.headers?f.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},d),y),o.headers),{url:n.toPathString(p),options:c}}),listFiles:(o={})=>t(this,void 0,void 0,function*(){const h="/files",p=new URL(h,n.DUMMY_BASE_URL);let f;l&&(f=l.baseOptions);const c=Object.assign(Object.assign({method:"GET"},f),o),d={},m={};n.setSearchParams(p,m);let y=f&&f.headers?f.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},d),y),o.headers),{url:n.toPathString(p),options:c}}),listFineTuneEvents:(o,h,p={})=>t(this,void 0,void 0,function*(){n.assertParamExists("listFineTuneEvents","fineTuneId",o);const f="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(o))),c=new URL(f,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const m=Object.assign(Object.assign({method:"GET"},d),p),y={},g={};h!==void 0&&(g.stream=h),n.setSearchParams(c,g);let _=d&&d.headers?d.headers:{};return m.headers=Object.assign(Object.assign(Object.assign({},y),_),p.headers),{url:n.toPathString(c),options:m}}),listFineTunes:(o={})=>t(this,void 0,void 0,function*(){const h="/fine-tunes",p=new URL(h,n.DUMMY_BASE_URL);let f;l&&(f=l.baseOptions);const c=Object.assign(Object.assign({method:"GET"},f),o),d={},m={};n.setSearchParams(p,m);let y=f&&f.headers?f.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},d),y),o.headers),{url:n.toPathString(p),options:c}}),listModels:(o={})=>t(this,void 0,void 0,function*(){const h="/models",p=new URL(h,n.DUMMY_BASE_URL);let f;l&&(f=l.baseOptions);const c=Object.assign(Object.assign({method:"GET"},f),o),d={},m={};n.setSearchParams(p,m);let y=f&&f.headers?f.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},d),y),o.headers),{url:n.toPathString(p),options:c}}),retrieveEngine:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("retrieveEngine","engineId",o);const p="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const d=Object.assign(Object.assign({method:"GET"},c),h),m={},y={};n.setSearchParams(f,y);let g=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),h.headers),{url:n.toPathString(f),options:d}}),retrieveFile:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("retrieveFile","fileId",o);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const d=Object.assign(Object.assign({method:"GET"},c),h),m={},y={};n.setSearchParams(f,y);let g=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),h.headers),{url:n.toPathString(f),options:d}}),retrieveFineTune:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("retrieveFineTune","fineTuneId",o);const p="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const d=Object.assign(Object.assign({method:"GET"},c),h),m={},y={};n.setSearchParams(f,y);let g=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),h.headers),{url:n.toPathString(f),options:d}}),retrieveModel:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("retrieveModel","model",o);const p="/models/{model}".replace("{model}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const d=Object.assign(Object.assign({method:"GET"},c),h),m={},y={};n.setSearchParams(f,y);let g=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},m),g),h.headers),{url:n.toPathString(f),options:d}})}},e.OpenAIApiFp=function(l){const o=e.OpenAIApiAxiosParamCreator(l);return{cancelFineTune(h,p){return t(this,void 0,void 0,function*(){const f=yield o.cancelFineTune(h,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createAnswer(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createAnswer(h,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createChatCompletion(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createChatCompletion(h,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createClassification(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createClassification(h,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createCompletion(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createCompletion(h,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createEdit(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createEdit(h,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createEmbedding(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createEmbedding(h,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createFile(h,p,f){return t(this,void 0,void 0,function*(){const c=yield o.createFile(h,p,f);return n.createRequestFunction(c,r.default,u.BASE_PATH,l)})},createFineTune(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createFineTune(h,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createImage(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createImage(h,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createImageEdit(h,p,f,c,d,m,y,g){return t(this,void 0,void 0,function*(){const _=yield o.createImageEdit(h,p,f,c,d,m,y,g);return n.createRequestFunction(_,r.default,u.BASE_PATH,l)})},createImageVariation(h,p,f,c,d,m){return t(this,void 0,void 0,function*(){const y=yield o.createImageVariation(h,p,f,c,d,m);return n.createRequestFunction(y,r.default,u.BASE_PATH,l)})},createModeration(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createModeration(h,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},createSearch(h,p,f){return t(this,void 0,void 0,function*(){const c=yield o.createSearch(h,p,f);return n.createRequestFunction(c,r.default,u.BASE_PATH,l)})},createTranscription(h,p,f,c,d,m,y){return t(this,void 0,void 0,function*(){const g=yield o.createTranscription(h,p,f,c,d,m,y);return n.createRequestFunction(g,r.default,u.BASE_PATH,l)})},createTranslation(h,p,f,c,d,m){return t(this,void 0,void 0,function*(){const y=yield o.createTranslation(h,p,f,c,d,m);return n.createRequestFunction(y,r.default,u.BASE_PATH,l)})},deleteFile(h,p){return t(this,void 0,void 0,function*(){const f=yield o.deleteFile(h,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},deleteModel(h,p){return t(this,void 0,void 0,function*(){const f=yield o.deleteModel(h,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},downloadFile(h,p){return t(this,void 0,void 0,function*(){const f=yield o.downloadFile(h,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},listEngines(h){return t(this,void 0,void 0,function*(){const p=yield o.listEngines(h);return n.createRequestFunction(p,r.default,u.BASE_PATH,l)})},listFiles(h){return t(this,void 0,void 0,function*(){const p=yield o.listFiles(h);return n.createRequestFunction(p,r.default,u.BASE_PATH,l)})},listFineTuneEvents(h,p,f){return t(this,void 0,void 0,function*(){const c=yield o.listFineTuneEvents(h,p,f);return n.createRequestFunction(c,r.default,u.BASE_PATH,l)})},listFineTunes(h){return t(this,void 0,void 0,function*(){const p=yield o.listFineTunes(h);return n.createRequestFunction(p,r.default,u.BASE_PATH,l)})},listModels(h){return t(this,void 0,void 0,function*(){const p=yield o.listModels(h);return n.createRequestFunction(p,r.default,u.BASE_PATH,l)})},retrieveEngine(h,p){return t(this,void 0,void 0,function*(){const f=yield o.retrieveEngine(h,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},retrieveFile(h,p){return t(this,void 0,void 0,function*(){const f=yield o.retrieveFile(h,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},retrieveFineTune(h,p){return t(this,void 0,void 0,function*(){const f=yield o.retrieveFineTune(h,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})},retrieveModel(h,p){return t(this,void 0,void 0,function*(){const f=yield o.retrieveModel(h,p);return n.createRequestFunction(f,r.default,u.BASE_PATH,l)})}}},e.OpenAIApiFactory=function(l,o,h){const p=e.OpenAIApiFp(l);return{cancelFineTune(f,c){return p.cancelFineTune(f,c).then(d=>d(h,o))},createAnswer(f,c){return p.createAnswer(f,c).then(d=>d(h,o))},createChatCompletion(f,c){return p.createChatCompletion(f,c).then(d=>d(h,o))},createClassification(f,c){return p.createClassification(f,c).then(d=>d(h,o))},createCompletion(f,c){return p.createCompletion(f,c).then(d=>d(h,o))},createEdit(f,c){return p.createEdit(f,c).then(d=>d(h,o))},createEmbedding(f,c){return p.createEmbedding(f,c).then(d=>d(h,o))},createFile(f,c,d){return p.createFile(f,c,d).then(m=>m(h,o))},createFineTune(f,c){return p.createFineTune(f,c).then(d=>d(h,o))},createImage(f,c){return p.createImage(f,c).then(d=>d(h,o))},createImageEdit(f,c,d,m,y,g,_,b){return p.createImageEdit(f,c,d,m,y,g,_,b).then(C=>C(h,o))},createImageVariation(f,c,d,m,y,g){return p.createImageVariation(f,c,d,m,y,g).then(_=>_(h,o))},createModeration(f,c){return p.createModeration(f,c).then(d=>d(h,o))},createSearch(f,c,d){return p.createSearch(f,c,d).then(m=>m(h,o))},createTranscription(f,c,d,m,y,g,_){return p.createTranscription(f,c,d,m,y,g,_).then(b=>b(h,o))},createTranslation(f,c,d,m,y,g){return p.createTranslation(f,c,d,m,y,g).then(_=>_(h,o))},deleteFile(f,c){return p.deleteFile(f,c).then(d=>d(h,o))},deleteModel(f,c){return p.deleteModel(f,c).then(d=>d(h,o))},downloadFile(f,c){return p.downloadFile(f,c).then(d=>d(h,o))},listEngines(f){return p.listEngines(f).then(c=>c(h,o))},listFiles(f){return p.listFiles(f).then(c=>c(h,o))},listFineTuneEvents(f,c,d){return p.listFineTuneEvents(f,c,d).then(m=>m(h,o))},listFineTunes(f){return p.listFineTunes(f).then(c=>c(h,o))},listModels(f){return p.listModels(f).then(c=>c(h,o))},retrieveEngine(f,c){return p.retrieveEngine(f,c).then(d=>d(h,o))},retrieveFile(f,c){return p.retrieveFile(f,c).then(d=>d(h,o))},retrieveFineTune(f,c){return p.retrieveFineTune(f,c).then(d=>d(h,o))},retrieveModel(f,c){return p.retrieveModel(f,c).then(d=>d(h,o))}}};class a extends u.BaseAPI{cancelFineTune(o,h){return e.OpenAIApiFp(this.configuration).cancelFineTune(o,h).then(p=>p(this.axios,this.basePath))}createAnswer(o,h){return e.OpenAIApiFp(this.configuration).createAnswer(o,h).then(p=>p(this.axios,this.basePath))}createChatCompletion(o,h){return e.OpenAIApiFp(this.configuration).createChatCompletion(o,h).then(p=>p(this.axios,this.basePath))}createClassification(o,h){return e.OpenAIApiFp(this.configuration).createClassification(o,h).then(p=>p(this.axios,this.basePath))}createCompletion(o,h){return e.OpenAIApiFp(this.configuration).createCompletion(o,h).then(p=>p(this.axios,this.basePath))}createEdit(o,h){return e.OpenAIApiFp(this.configuration).createEdit(o,h).then(p=>p(this.axios,this.basePath))}createEmbedding(o,h){return e.OpenAIApiFp(this.configuration).createEmbedding(o,h).then(p=>p(this.axios,this.basePath))}createFile(o,h,p){return e.OpenAIApiFp(this.configuration).createFile(o,h,p).then(f=>f(this.axios,this.basePath))}createFineTune(o,h){return e.OpenAIApiFp(this.configuration).createFineTune(o,h).then(p=>p(this.axios,this.basePath))}createImage(o,h){return e.OpenAIApiFp(this.configuration).createImage(o,h).then(p=>p(this.axios,this.basePath))}createImageEdit(o,h,p,f,c,d,m,y){return e.OpenAIApiFp(this.configuration).createImageEdit(o,h,p,f,c,d,m,y).then(g=>g(this.axios,this.basePath))}createImageVariation(o,h,p,f,c,d){return e.OpenAIApiFp(this.configuration).createImageVariation(o,h,p,f,c,d).then(m=>m(this.axios,this.basePath))}createModeration(o,h){return e.OpenAIApiFp(this.configuration).createModeration(o,h).then(p=>p(this.axios,this.basePath))}createSearch(o,h,p){return e.OpenAIApiFp(this.configuration).createSearch(o,h,p).then(f=>f(this.axios,this.basePath))}createTranscription(o,h,p,f,c,d,m){return e.OpenAIApiFp(this.configuration).createTranscription(o,h,p,f,c,d,m).then(y=>y(this.axios,this.basePath))}createTranslation(o,h,p,f,c,d){return e.OpenAIApiFp(this.configuration).createTranslation(o,h,p,f,c,d).then(m=>m(this.axios,this.basePath))}deleteFile(o,h){return e.OpenAIApiFp(this.configuration).deleteFile(o,h).then(p=>p(this.axios,this.basePath))}deleteModel(o,h){return e.OpenAIApiFp(this.configuration).deleteModel(o,h).then(p=>p(this.axios,this.basePath))}downloadFile(o,h){return e.OpenAIApiFp(this.configuration).downloadFile(o,h).then(p=>p(this.axios,this.basePath))}listEngines(o){return e.OpenAIApiFp(this.configuration).listEngines(o).then(h=>h(this.axios,this.basePath))}listFiles(o){return e.OpenAIApiFp(this.configuration).listFiles(o).then(h=>h(this.axios,this.basePath))}listFineTuneEvents(o,h,p){return e.OpenAIApiFp(this.configuration).listFineTuneEvents(o,h,p).then(f=>f(this.axios,this.basePath))}listFineTunes(o){return e.OpenAIApiFp(this.configuration).listFineTunes(o).then(h=>h(this.axios,this.basePath))}listModels(o){return e.OpenAIApiFp(this.configuration).listModels(o).then(h=>h(this.axios,this.basePath))}retrieveEngine(o,h){return e.OpenAIApiFp(this.configuration).retrieveEngine(o,h).then(p=>p(this.axios,this.basePath))}retrieveFile(o,h){return e.OpenAIApiFp(this.configuration).retrieveFile(o,h).then(p=>p(this.axios,this.basePath))}retrieveFineTune(o,h){return e.OpenAIApiFp(this.configuration).retrieveFineTune(o,h).then(p=>p(this.axios,this.basePath))}retrieveModel(o,h){return e.OpenAIApiFp(this.configuration).retrieveModel(o,h).then(p=>p(this.axios,this.basePath))}}e.OpenAIApi=a})(Fp);var Hs={};const SF="openai",BF="3.2.1",OF="Node.js library for the OpenAI API",MF={type:"git",url:"git@github.com:openai/openai-node.git"},PF=["openai","open","ai","gpt-3","gpt3"],xF="OpenAI",TF="MIT",IF="./dist/index.js",NF="./dist/index.d.ts",kF={build:"tsc --outDir dist/"},RF={axios:"^0.26.0","form-data":"^4.0.0"},LF={"@types/node":"^12.11.5",typescript:"^3.6.4"},UF={name:SF,version:BF,description:OF,repository:MF,keywords:PF,author:xF,license:TF,main:IF,types:NF,scripts:kF,dependencies:RF,devDependencies:LF};var Fl,J0;function VF(){return J0||(J0=1,Fl=typeof self=="object"?self.FormData:window.FormData),Fl}Object.defineProperty(Hs,"__esModule",{value:!0});Hs.Configuration=void 0;const jF=UF;class qF{constructor(t={}){this.apiKey=t.apiKey,this.organization=t.organization,this.username=t.username,this.password=t.password,this.accessToken=t.accessToken,this.basePath=t.basePath,this.baseOptions=t.baseOptions,this.formDataCtor=t.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${jF.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=VF())}isJsonMime(t){const r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return t!==null&&(r.test(t)||t.toLowerCase()==="application/json-patch+json")}}Hs.Configuration=qF;(function(e){var t=cr&&cr.__createBinding||(Object.create?function(n,u,a,l){l===void 0&&(l=a),Object.defineProperty(n,l,{enumerable:!0,get:function(){return u[a]}})}:function(n,u,a,l){l===void 0&&(l=a),n[l]=u[a]}),r=cr&&cr.__exportStar||function(n,u){for(var a in n)a!=="default"&&!u.hasOwnProperty(a)&&t(u,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Fp,e),r(Hs,e)})(Yl);function yf(e){const t=new Yl.Configuration({apiKey:e});return new Yl.OpenAIApi(t)}async function zF(e,t,r="text-davinci-003"){return await e.createCompletion({model:r,prompt:t,temperature:.8,max_tokens:250})}async function WF(e,t,r="gpt-3.5-turbo"){return await e.createChatCompletion({model:r,messages:[{role:"user",content:t}],temperature:.8,max_tokens:250})}async function HF(e,t,r="text-embedding-ada-002"){return await e.createEmbedding({model:r,input:t})}async function GF(e){return await e.listModels()}const Sl="preferredEmbeddingModelStore";function KF(){const e=Tn(""),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&localStorage[Sl]||""),{subscribe:t,update:a=>{!a||!u||(localStorage[Sl]=a,r(a))},get:()=>qt(e),delete:()=>{u&&(delete localStorage[Sl],r(""))}}}const Jl=KF(),jp=xn(Jl,e=>qt(Jl)),Bl="oKeyStore";function YF(){const e=Tn(""),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&localStorage[Bl]||""),{subscribe:t,update:a=>{!a||!u||(localStorage[Bl]=a,r(a))},get:()=>qt(e),delete:()=>{u&&(delete localStorage[Bl],r(""))}}}const As=YF(),Af=xn(As,e=>qt(As));function ZF(e){let t,r,n,u={ctx:e,current:null,token:null,hasCatch:!0,pending:QF,then:JF,catch:XF,value:25,error:26,blocks:[,,,]};return Ei(r=e[6],u),{c(){t=Kt(),u.block.c()},l(a){t=Kt(),u.block.l(a)},m(a,l){Ce(a,t,l),u.block.m(a,u.anchor=l),u.mount=()=>t.parentNode,u.anchor=t,n=!0},p(a,l){e=a,u.ctx=e,l&64&&r!==(r=e[6])&&Ei(r,u)||Bs(u,e,l)},i(a){n||(xe(u.block),n=!0)},o(a){for(let l=0;l<3;l+=1){const o=u.blocks[l];Ue(o)}n=!1},d(a){a&&V(t),u.block.d(a),u.token=null,u=null}}}function $F(e){let t,r,n,u,a;return{c(){t=se("div"),r=se("div"),n=se("div"),u=se("p"),a=Ze("Set OpenAI key in settings to use embedding map."),this.h()},l(l){t=oe(l,"DIV",{class:!0});var o=ie(t);r=oe(o,"DIV",{class:!0});var h=ie(r);n=oe(h,"DIV",{class:!0});var p=ie(n);u=oe(p,"P",{class:!0});var f=ie(u);a=$e(f,"Set OpenAI key in settings to use embedding map."),f.forEach(V),p.forEach(V),h.forEach(V),o.forEach(V),this.h()},h(){T(u,"class","text-center text-lg"),T(n,"class","h-20 w-52"),T(r,"class","flex flex-col justify-center"),T(t,"class","w-full h-full flex justify-center")},m(l,o){Ce(l,t,o),Y(t,r),Y(r,n),Y(n,u),Y(u,a)},p:Ie,i:Ie,o:Ie,d(l){l&&V(t)}}}function XF(e){let t,r=e[26].message+"",n;return{c(){t=se("p"),n=Ze(r),this.h()},l(u){t=oe(u,"P",{style:!0});var a=ie(t);n=$e(a,r),a.forEach(V),this.h()},h(){Qt(t,"color","red")},m(u,a){Ce(u,t,a),Y(t,n)},p(u,a){a&64&&r!==(r=u[26].message+"")&&Pn(n,r)},i:Ie,o:Ie,d(u){u&&V(t)}}}function JF(e){let t,r,n,u,a,l,o,h,p,f,c,d,m,y,g,_,b,C,w,B,S,O,P,I,N,G,L,q,$,H,z,W,re,ee,Q,le,me,Se,be,Ne,je,Me,it,qe,Te,Re,lt,et,ut,tt;r=new BC({props:{dimensions:e[3],center:e[8]}});let rt=e[4].embedExponentialScaling&&Q0(e);return{c(){t=se("div"),pt(r.$$.fragment),u=Ge(),a=se("div"),l=se("div"),o=se("label"),h=se("span"),p=Ze("Exponential Scaling"),f=Ge(),c=se("input"),m=Ge(),rt&&rt.c(),y=Ge(),g=se("div"),_=se("label"),b=se("span"),C=Ze("# Prompts"),w=Ge(),B=se("input"),S=Ge(),O=se("div"),P=se("div"),I=se("label"),N=se("span"),G=Ze("Clusters"),L=Ge(),q=se("div"),$=se("button"),H=Ze("0"),W=Ge(),re=se("button"),ee=Ze("2"),Q=Ge(),le=se("button"),me=Ze("4"),Se=Ge(),be=se("button"),Ne=Ze("6"),je=Ge(),Me=se("button"),it=Ze("8"),qe=Ge(),Te=se("div"),Re=se("button"),lt=Ze("Shuffle"),this.h()},l(ze){t=oe(ze,"DIV",{class:!0});var We=ie(t);vt(r.$$.fragment,We),We.forEach(V),u=Ke(ze),a=oe(ze,"DIV",{class:!0});var Ae=ie(a);l=oe(Ae,"DIV",{class:!0});var we=ie(l);o=oe(we,"LABEL",{class:!0});var yt=ie(o);h=oe(yt,"SPAN",{class:!0});var Tt=ie(h);p=$e(Tt,"Exponential Scaling"),Tt.forEach(V),yt.forEach(V),f=Ke(we),c=oe(we,"INPUT",{type:!0,class:!0}),we.forEach(V),m=Ke(Ae),rt&&rt.l(Ae),y=Ke(Ae),g=oe(Ae,"DIV",{class:!0});var zt=ie(g);_=oe(zt,"LABEL",{class:!0});var R=ie(_);b=oe(R,"SPAN",{class:!0});var j=ie(b);C=$e(j,"# Prompts"),j.forEach(V),R.forEach(V),w=Ke(zt),B=oe(zt,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),zt.forEach(V),S=Ke(Ae),O=oe(Ae,"DIV",{class:!0});var Z=ie(O);P=oe(Z,"DIV",{class:!0});var fe=ie(P);I=oe(fe,"LABEL",{class:!0});var ne=ie(I);N=oe(ne,"SPAN",{class:!0});var pe=ie(N);G=$e(pe,"Clusters"),pe.forEach(V),ne.forEach(V),L=Ke(fe),q=oe(fe,"DIV",{class:!0});var ue=ie(q);$=oe(ue,"BUTTON",{class:!0});var ce=ie($);H=$e(ce,"0"),ce.forEach(V),W=Ke(ue),re=oe(ue,"BUTTON",{class:!0});var ye=ie(re);ee=$e(ye,"2"),ye.forEach(V),Q=Ke(ue),le=oe(ue,"BUTTON",{class:!0});var Oe=ie(le);me=$e(Oe,"4"),Oe.forEach(V),Se=Ke(ue),be=oe(ue,"BUTTON",{class:!0});var Xe=ie(be);Ne=$e(Xe,"6"),Xe.forEach(V),je=Ke(ue),Me=oe(ue,"BUTTON",{class:!0});var Ee=ie(Me);it=$e(Ee,"8"),Ee.forEach(V),ue.forEach(V),fe.forEach(V),Z.forEach(V),qe=Ke(Ae),Te=oe(Ae,"DIV",{class:!0});var Ut=ie(Te);Re=oe(Ut,"BUTTON",{class:!0});var Ft=ie(Re);lt=$e(Ft,"Shuffle"),Ft.forEach(V),Ut.forEach(V),Ae.forEach(V),this.h()},h(){T(t,"class","w-full h-full"),Fs(()=>e[15].call(t)),T(h,"class","label-text"),T(o,"class","label"),T(c,"type","checkbox"),T(c,"class","toggle toggle-sm"),c.checked=d=e[4].embedExponentialScaling,T(l,"class","min-w-max px-2"),T(b,"class","label-text"),T(_,"class","label"),B.value=e[9],T(B,"type","range"),T(B,"min","1"),T(B,"max",e[2]),T(B,"step","1"),T(B,"class","range range-sm"),T(g,"class","w-full px-2"),T(N,"class","label-text"),T(I,"class","label pb-1 m-0"),T($,"class",z=(e[4].embedClusters||0)===0?"btn btn-xs btn-active":"btn btn-xs"),T(re,"class","btn btn-xs"),jt(re,"btn-active",e[4].embedClusters===2),jt(re,"btn-disabled",Object.keys(e[4].embeddings).length<2),T(le,"class","btn btn-xs"),jt(le,"btn-active",e[4].embedClusters===4),jt(le,"btn-disabled",Object.keys(e[4].embeddings).length<4),T(be,"class","btn btn-xs"),jt(be,"btn-active",e[4].embedClusters===6),jt(be,"btn-disabled",Object.keys(e[4].embeddings).length<6),T(Me,"class","btn btn-xs"),jt(Me,"btn-active",e[4].embedClusters===8),jt(Me,"btn-disabled",Object.keys(e[4].embeddings).length<8),T(q,"class","btn-group btn-group-horizontal p-0"),T(P,"class",""),T(O,"class",""),T(Re,"class","btn btn-xs btn-primary"),T(Te,"class","w-32 px-2 pb-1 flex flex-col justify-end"),T(a,"class","px-2 py-4 pb-0 flex")},m(ze,We){Ce(ze,t,We),gt(r,t,null),n=Ss(t,e[15].bind(t)),Ce(ze,u,We),Ce(ze,a,We),Y(a,l),Y(l,o),Y(o,h),Y(h,p),Y(l,f),Y(l,c),Y(a,m),rt&&rt.m(a,null),Y(a,y),Y(a,g),Y(g,_),Y(_,b),Y(b,C),Y(g,w),Y(g,B),Y(a,S),Y(a,O),Y(O,P),Y(P,I),Y(I,N),Y(N,G),Y(P,L),Y(P,q),Y(q,$),Y($,H),Y(q,W),Y(q,re),Y(re,ee),Y(q,Q),Y(q,le),Y(le,me),Y(q,Se),Y(q,be),Y(be,Ne),Y(q,je),Y(q,Me),Y(Me,it),Y(a,qe),Y(a,Te),Y(Te,Re),Y(Re,lt),et=!0,ut||(tt=[ke(c,"change",e[11]),ke(B,"change",e[10]),ke($,"click",e[16]),ke(re,"click",e[17]),ke(le,"click",e[18]),ke(be,"click",e[19]),ke(Me,"click",e[20]),ke(Re,"click",e[14])],ut=!0)},p(ze,We){const Ae={};We&8&&(Ae.dimensions=ze[3]),We&256&&(Ae.center=ze[8]),r.$set(Ae),(!et||We&16&&d!==(d=ze[4].embedExponentialScaling))&&(c.checked=d),ze[4].embedExponentialScaling?rt?rt.p(ze,We):(rt=Q0(ze),rt.c(),rt.m(a,y)):rt&&(rt.d(1),rt=null),(!et||We&512)&&(B.value=ze[9]),(!et||We&4)&&T(B,"max",ze[2]),(!et||We&16&&z!==(z=(ze[4].embedClusters||0)===0?"btn btn-xs btn-active":"btn btn-xs"))&&T($,"class",z),(!et||We&16)&&jt(re,"btn-active",ze[4].embedClusters===2),(!et||We&16)&&jt(re,"btn-disabled",Object.keys(ze[4].embeddings).length<2),(!et||We&16)&&jt(le,"btn-active",ze[4].embedClusters===4),(!et||We&16)&&jt(le,"btn-disabled",Object.keys(ze[4].embeddings).length<4),(!et||We&16)&&jt(be,"btn-active",ze[4].embedClusters===6),(!et||We&16)&&jt(be,"btn-disabled",Object.keys(ze[4].embeddings).length<6),(!et||We&16)&&jt(Me,"btn-active",ze[4].embedClusters===8),(!et||We&16)&&jt(Me,"btn-disabled",Object.keys(ze[4].embeddings).length<8)},i(ze){et||(xe(r.$$.fragment,ze),et=!0)},o(ze){Ue(r.$$.fragment,ze),et=!1},d(ze){ze&&V(t),mt(r),n(),ze&&V(u),ze&&V(a),rt&&rt.d(),ut=!1,Ur(tt)}}}function Q0(e){let t,r,n,u,a,l,o,h,p;return{c(){t=se("div"),r=se("label"),n=se("span"),u=Ze("Scaling Power"),a=Ge(),l=se("input"),this.h()},l(f){t=oe(f,"DIV",{class:!0});var c=ie(t);r=oe(c,"LABEL",{class:!0});var d=ie(r);n=oe(d,"SPAN",{class:!0});var m=ie(n);u=$e(m,"Scaling Power"),m.forEach(V),d.forEach(V),a=Ke(c),l=oe(c,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),c.forEach(V),this.h()},h(){T(n,"class","label-text"),T(r,"class","label"),l.value=o=e[4].embedWeightScaling,T(l,"type","range"),T(l,"min","0.5"),T(l,"max","3"),T(l,"step","0.1"),T(l,"class","range range-sm"),T(t,"class","w-full px-2")},m(f,c){Ce(f,t,c),Y(t,r),Y(r,n),Y(n,u),Y(t,a),Y(t,l),h||(p=ke(l,"change",e[12]),h=!0)},p(f,c){c&16&&o!==(o=f[4].embedWeightScaling)&&(l.value=o)},d(f){f&&V(t),h=!1,p()}}}function QF(e){let t,r,n,u,a,l;return{c(){t=se("div"),r=se("div"),n=se("div"),u=se("progress"),this.h()},l(o){t=oe(o,"DIV",{class:!0});var h=ie(t);r=oe(h,"DIV",{class:!0});var p=ie(r);n=oe(p,"DIV",{class:!0});var f=ie(n);u=oe(f,"PROGRESS",{class:!0,max:!0}),ie(u).forEach(V),f.forEach(V),p.forEach(V),h.forEach(V),this.h()},h(){T(u,"class","progress progress-primary w-56"),u.value=a=Object.keys(e[7]).length,T(u,"max",l=Object.keys(e[4].weightedPrompts).length),T(n,"class","h-20 w-52"),T(r,"class","flex flex-col justify-center"),T(t,"class","w-full h-full flex justify-center")},m(o,h){Ce(o,t,h),Y(t,r),Y(r,n),Y(n,u)},p(o,h){h&128&&a!==(a=Object.keys(o[7]).length)&&(u.value=a),h&16&&l!==(l=Object.keys(o[4].weightedPrompts).length)&&T(u,"max",l)},i:Ie,o:Ie,d(o){o&&V(t)}}}function e3(e){let t,r,n,u;const a=[$F,ZF],l=[];function o(h,p){return h[5]?1:0}return t=o(e),r=l[t]=a[t](e),{c(){r.c(),n=Kt()},l(h){r.l(h),n=Kt()},m(h,p){l[t].m(h,p),Ce(h,n,p),u=!0},p(h,[p]){let f=t;t=o(h),t===f?l[t].p(h,p):(_n(),Ue(l[f],1,1,()=>{l[f]=null}),Dn(),r=l[t],r?r.p(h,p):(r=l[t]=a[t](h),r.c()),xe(r,1),r.m(n.parentNode,n))},i(h){u||(xe(r),u=!0)},o(h){Ue(r),u=!1},d(h){l[t].d(h),h&&V(n)}}}function t3(e){return e<2?0:e<4?2:e<6?4:e<8?6:8}function r3(e){return!e.embeddings||!e.embedClusterSets||Object.entries(e.embeddings).length!==Object.entries(e.weightedPrompts).length||(e.lastPromptChange||0)>(e.lastEmbeddingChange||0)}function n3(e,t,r){let n,u,a,l,o,h,p;Bt(e,yn,q=>r(4,o=q)),Bt(e,jp,q=>r(21,h=q)),Bt(e,Af,q=>r(5,p=q));let f=0,c=0,d=null,m={};function y(q){q.target.value>0&&q.target.value<=n&&Ot.update({...o,embedPromptLimit:q.target.value})}function g(q){Ot.update({...o,embedExponentialScaling:!o.embedExponentialScaling})}function _(q){Ot.update({...o,embedWeightScaling:q.target.value})}function b(q){Ot.update({...o,embedClusters:q})}function C(q){let $=new pC({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:5e3,metric:"euclidean"});const H=Object.keys(q),z=Object.values(q);$.init({data:z,type:"dense"}),$.run();let re=$.getOutputScaled().map(([Q,le])=>[(Q+1)/2,(le+1)/2]);return H.reduce((Q,le,me)=>(Q[le]=re[me],Q),{})}function w(q,$){return new Kl.KMEANS().run(q,$)}async function B(){Ot.update({...o,scaledEmbedMappings:C(o.embeddings)})}async function S(){if(console.log("fetching embeddings"),!p||!o.weightedPrompts)return;const q=Object.entries(o.weightedPrompts).map(([le,me])=>[le,me.text]),$=yf(p);r(7,m={});for(let le of q){const me=await HF($,le[1],h);r(7,m[le[0]]=me.data.data[0].embedding,m)}let H=Object.entries(m).sort((le,me)=>le[0]-me[0]);const z=le=>new Array(le).fill(null).map(()=>[]);console.log("clustering embeddings");const W=H.length>=2?w(H.map(le=>le[1]),2):[H.map(le=>le[0])];console.log("set of 2 complete");const re=H.length>=4?w(H.map(le=>le[1]),4):W;console.log("set of 4 complete");const ee=H.length>=6?w(H.map(le=>le[1]),6):re;console.log("set of 6 complete");const Q=H.length>=8?w(H.map(le=>le[1]),8):ee;console.log("set of 8 complete"),Ot.update({...o,embeddings:m,embedClusterSets:{2:[...W,...z(2-W.length)],4:[...re,...z(4-re.length)],6:[...ee,...z(6-ee.length)],8:[...Q,...z(8-Q.length)]},lastEmbeddingChange:Date.now(),scaledEmbedMappings:C(m)}),console.log("embeddings complete")}function O(){f=this.clientWidth,c=this.clientHeight,r(0,f),r(1,c)}const P=()=>b(0),I=()=>b(2),N=()=>b(4),G=()=>b(6),L=()=>b(8);return e.$$.update=()=>{e.$$.dirty&16&&r(2,n=Object.keys(o.weightedPrompts||{}).length),e.$$.dirty&20&&r(9,u=o.embedPromptLimit||n),e.$$.dirty&3&&r(3,a=[f||250,c||250]),e.$$.dirty&8&&r(8,l=Rs(a)),e.$$.dirty&16&&o.embeddings&&Object.keys(o.embeddings).length<o.embedClusters&&b(t3(Object.keys(o.embeddings).length)),e.$$.dirty&48&&p&&r3(o)&&r(6,d=S())},[f,c,n,a,o,p,d,m,l,u,y,g,_,b,B,O,P,I,N,G,L]}class i3 extends kt{constructor(t){super(),Rt(this,t,n3,e3,Lt,{})}}const Ya="zeroPromptHandlingStore";function u3(){const e=Tn(!1),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&localStorage[Ya]?JSON.parse(localStorage[Ya]):!1),{subscribe:t,update:a=>{u&&(localStorage[Ya]=JSON.stringify(!!a),r(!!a))},get:()=>qt(e),delete:()=>{u&&(delete localStorage[Ya],r(!1))}}}const Ql=u3(),qp=xn(Ql,e=>qt(Ql));function ed(e,t,r){const n=e.slice();return n[4]=t[r][0],n[5]=t[r][1],n}function td(e,t){let r,n=t[5].text+"",u,a,l,o=ai(t[0],t[4])+"",h,p,f;return{key:e,first:null,c(){r=se("span"),u=Ze(n),a=Ze("::"),l=se("b"),h=Ze(o),p=Ge(),this.h()},l(c){r=oe(c,"SPAN",{style:!0});var d=ie(r);u=$e(d,n),a=$e(d,"::"),l=oe(d,"B",{});var m=ie(l);h=$e(m,o),p=Ke(m),m.forEach(V),d.forEach(V),this.h()},h(){T(r,"style",f=`color: rgba(255,255,255,${Math.max(.25,r0(t[0],t[4]))});`),this.first=r},m(c,d){Ce(c,r,d),Y(r,u),Y(r,a),Y(r,l),Y(l,h),Y(l,p)},p(c,d){t=c,d&3&&n!==(n=t[5].text+"")&&Pn(u,n),d&3&&o!==(o=ai(t[0],t[4])+"")&&Pn(h,o),d&3&&f!==(f=`color: rgba(255,255,255,${Math.max(.25,r0(t[0],t[4]))});`)&&T(r,"style",f)},d(c){c&&V(r)}}}function a3(e){let t,r,n=[],u=new Map,a,l,o=Object.entries(e[0].weightedPrompts).filter(e[3]);const h=p=>p[4];for(let p=0;p<o.length;p+=1){let f=ed(e,o,p),c=h(f);u.set(c,n[p]=td(c,f))}return{c(){t=se("div"),r=se("p");for(let p=0;p<n.length;p+=1)n[p].c();this.h()},l(p){t=oe(p,"DIV",{class:!0});var f=ie(t);r=oe(f,"P",{class:!0});var c=ie(r);for(let d=0;d<n.length;d+=1)n[d].l(c);c.forEach(V),f.forEach(V),this.h()},h(){T(r,"class","text-sm select-none"),T(t,"class","normal-case font-light text-left cursor-copy bg-slate-900 rounded-md p-4 w-full h-32 overflow-y-auto hover:bg-slate-800 active:bg-slate-950")},m(p,f){Ce(p,t,f),Y(t,r);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(r,null);a||(l=ke(t,"click",e[2]),a=!0)},p(p,[f]){f&3&&(o=Object.entries(p[0].weightedPrompts).filter(p[3]),n=Si(n,f,h,1,p,o,u,r,_u,td,null,ed))},i:Ie,o:Ie,d(p){p&&V(t);for(let f=0;f<n.length;f+=1)n[f].d();a=!1,l()}}}function s3(e,t,r){let n,u;Bt(e,yn,o=>r(0,n=o)),Bt(e,qp,o=>r(1,u=o));function a(){const o=Object.entries(n.weightedPrompts).filter(h=>u||ai(n,h[0])).map(([h,p])=>`${p.text}::${ai(n,h)}`).join(" ");navigator.clipboard.writeText(o)}return[n,u,a,o=>u||ai(n,o[0])]}class o3 extends kt{constructor(t){super(),Rt(this,t,s3,a3,Lt,{})}}function l3(e){let t,r,n,u;return{c(){t=Et("svg"),r=Et("rect"),n=Et("rect"),u=Et("rect"),this.h()},l(a){t=Ct(a,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var l=ie(t);r=Ct(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),ie(r).forEach(V),n=Ct(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),ie(n).forEach(V),u=Ct(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),ie(u).forEach(V),l.forEach(V),this.h()},h(){T(r,"x","5"),T(r,"y","12"),T(r,"width","40"),T(r,"height","4"),T(r,"fill","rgba(255,255,255, 0.7)"),T(n,"x","5"),T(n,"y","23"),T(n,"width","30"),T(n,"height","4"),T(n,"fill","rgba(255,255,255, 0.7)"),T(u,"x","5"),T(u,"y","34"),T(u,"width","35"),T(u,"height","4"),T(u,"fill","rgba(255,255,255, 0.7)"),T(t,"xmlns","http://www.w3.org/2000/svg"),T(t,"fill","rgba(255,255,255, 0.7)"),T(t,"class","h-6 w-6"),T(t,"viewBox","0 0 50 50")},m(a,l){Ce(a,t,l),Y(t,r),Y(t,n),Y(t,u)},p:Ie,i:Ie,o:Ie,d(a){a&&V(t)}}}class f3 extends kt{constructor(t){super(),Rt(this,t,null,l3,Lt,{})}}function c3(e){let t,r,n;return{c(){t=Et("svg"),r=Et("circle"),n=Et("circle"),this.h()},l(u){t=Ct(u,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var a=ie(t);r=Ct(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),ie(r).forEach(V),n=Ct(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),ie(n).forEach(V),a.forEach(V),this.h()},h(){T(r,"cx","25"),T(r,"cy","25"),T(r,"r","20"),T(r,"stroke","rgba(255,255,255, 0.7)"),T(r,"stroke-width","2"),T(r,"fill","none"),T(n,"cx","25"),T(n,"cy","25"),T(n,"r","2"),T(n,"stroke","rgba(255,255,255, 0.7)"),T(n,"stroke-width","1"),T(n,"fill","rgba(255,255,255, 0.7)"),T(t,"xmlns","http://www.w3.org/2000/svg"),T(t,"fill","rgba(255,255,255, 0.7)"),T(t,"class","h-6 w-6"),T(t,"viewBox","0 0 50 50")},m(u,a){Ce(u,t,a),Y(t,r),Y(t,n)},p:Ie,i:Ie,o:Ie,d(u){u&&V(t)}}}class h3 extends kt{constructor(t){super(),Rt(this,t,null,c3,Lt,{})}}function d3(e){let t,r,n,u,a,l;return{c(){t=Et("svg"),r=Et("circle"),n=Et("circle"),u=Et("circle"),a=Et("circle"),l=Et("circle"),this.h()},l(o){t=Ct(o,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var h=ie(t);r=Ct(h,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),ie(r).forEach(V),n=Ct(h,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),ie(n).forEach(V),u=Ct(h,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),ie(u).forEach(V),a=Ct(h,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),ie(a).forEach(V),l=Ct(h,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),ie(l).forEach(V),h.forEach(V),this.h()},h(){T(r,"cx","20"),T(r,"cy","80"),T(r,"r","5"),T(r,"fill","rgba(255,255,255, 0.7)"),T(n,"cx","40"),T(n,"cy","40"),T(n,"r","5"),T(n,"fill","rgba(255,255,255, 0.7)"),T(u,"cx","70"),T(u,"cy","20"),T(u,"r","5"),T(u,"fill","rgba(255,255,255, 0.7)"),T(a,"cx","80"),T(a,"cy","60"),T(a,"r","5"),T(a,"fill","rgba(255,255,255, 0.7)"),T(l,"cx","60"),T(l,"cy","75"),T(l,"r","5"),T(l,"fill","rgba(255,255,255, 0.7)"),T(t,"xmlns","http://www.w3.org/2000/svg"),T(t,"fill","rgba(255,255,255, 0.7)"),T(t,"class","h-6 w-6"),T(t,"viewBox","0 0 100 100")},m(o,h){Ce(o,t,h),Y(t,r),Y(t,n),Y(t,u),Y(t,a),Y(t,l)},p:Ie,i:Ie,o:Ie,d(o){o&&V(t)}}}class p3 extends kt{constructor(t){super(),Rt(this,t,null,d3,Lt,{})}}function v3(e){let t,r,n,u;return{c(){t=Et("svg"),r=Et("path"),n=Et("path"),u=Et("path"),this.h()},l(a){t=Ct(a,"svg",{xmlns:!0,class:!0,viewBox:!0});var l=ie(t);r=Ct(l,"path",{d:!0,fill:!0}),ie(r).forEach(V),n=Ct(l,"path",{d:!0,fill:!0}),ie(n).forEach(V),u=Ct(l,"path",{d:!0,fill:!0}),ie(u).forEach(V),l.forEach(V),this.h()},h(){T(r,"d","M50 50 L50 10 A40 40 0 0 1 90 50 z"),T(r,"fill","rgba(255,255,255, 0.7)"),T(n,"d","M50 50 L90 50 A40 40 0 0 1 50 90 z"),T(n,"fill","rgba(255,255,255, 0.3)"),T(u,"d","M50 50 L50 90 A40 40 0 0 1 10 50 z"),T(u,"fill","rgba(255,255,255, 0.9)"),T(t,"xmlns","http://www.w3.org/2000/svg"),T(t,"class","h-6 w-6"),T(t,"viewBox","0 0 100 100")},m(a,l){Ce(a,t,l),Y(t,r),Y(t,n),Y(t,u)},p:Ie,i:Ie,o:Ie,d(a){a&&V(t)}}}class g3 extends kt{constructor(t){super(),Rt(this,t,null,v3,Lt,{})}}function m3(e){let t,r;return t=new i3({}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,u){gt(t,n,u),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function _3(e){let t,r;return t=new zE({}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,u){gt(t,n,u),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function D3(e){let t,r;return t=new s2({}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,u){gt(t,n,u),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function b3(e){let t,r;return t=new XE({}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,u){gt(t,n,u),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function y3(e){let t,r,n,u,a,l,o,h,p,f,c,d,m,y,g,_,b,C,w,B,S,O,P;a=new f3({}),h=new g3({}),c=new h3({}),y=new p3({});const I=[b3,D3,_3,m3],N=[];function G(L,q){return L[0].weightMode==="bars"?0:L[0].weightMode==="pie"?1:L[0].weightMode==="circle"?2:L[0].weightMode==="embed"?3:-1}return~(_=G(e))&&(b=N[_]=I[_](e)),B=new o3({}),{c(){t=se("div"),r=se("div"),n=se("div"),u=se("button"),pt(a.$$.fragment),l=Ge(),o=se("button"),pt(h.$$.fragment),p=Ge(),f=se("button"),pt(c.$$.fragment),d=Ge(),m=se("button"),pt(y.$$.fragment),g=Ge(),b&&b.c(),C=Ge(),w=se("div"),pt(B.$$.fragment),this.h()},l(L){t=oe(L,"DIV",{class:!0});var q=ie(t);r=oe(q,"DIV",{class:!0});var $=ie(r);n=oe($,"DIV",{class:!0});var H=ie(n);u=oe(H,"BUTTON",{class:!0});var z=ie(u);vt(a.$$.fragment,z),z.forEach(V),l=Ke(H),o=oe(H,"BUTTON",{class:!0});var W=ie(o);vt(h.$$.fragment,W),W.forEach(V),p=Ke(H),f=oe(H,"BUTTON",{class:!0});var re=ie(f);vt(c.$$.fragment,re),re.forEach(V),d=Ke(H),m=oe(H,"BUTTON",{class:!0});var ee=ie(m);vt(y.$$.fragment,ee),ee.forEach(V),H.forEach(V),g=Ke($),b&&b.l($),C=Ke($),w=oe($,"DIV",{class:!0});var Q=ie(w);vt(B.$$.fragment,Q),Q.forEach(V),$.forEach(V),q.forEach(V),this.h()},h(){T(u,"class","btn btn-sm"),jt(u,"btn-active",e[0].weightMode==="bars"),T(o,"class","btn btn-sm"),jt(o,"btn-active",e[0].weightMode==="pie"),T(f,"class","btn btn-sm"),jt(f,"btn-active",e[0].weightMode==="circle"),T(m,"class","btn btn-sm"),jt(m,"btn-active",e[0].weightMode==="embed"),T(n,"class","btn-group btn-group-horizontal w-full flex justify-end p-2"),T(w,"class","h-48 w-full p-4 flex flex-col"),T(r,"class","flex flex-col h-full place-content-between"),T(t,"class","w-full h-full flex flex-col")},m(L,q){Ce(L,t,q),Y(t,r),Y(r,n),Y(n,u),gt(a,u,null),Y(n,l),Y(n,o),gt(h,o,null),Y(n,p),Y(n,f),gt(c,f,null),Y(n,d),Y(n,m),gt(y,m,null),Y(r,g),~_&&N[_].m(r,null),Y(r,C),Y(r,w),gt(B,w,null),S=!0,O||(P=[ke(u,"click",e[2]),ke(o,"click",e[3]),ke(f,"click",e[4]),ke(m,"click",e[5])],O=!0)},p(L,[q]){(!S||q&1)&&jt(u,"btn-active",L[0].weightMode==="bars"),(!S||q&1)&&jt(o,"btn-active",L[0].weightMode==="pie"),(!S||q&1)&&jt(f,"btn-active",L[0].weightMode==="circle"),(!S||q&1)&&jt(m,"btn-active",L[0].weightMode==="embed");let $=_;_=G(L),_!==$&&(b&&(_n(),Ue(N[$],1,1,()=>{N[$]=null}),Dn()),~_?(b=N[_],b||(b=N[_]=I[_](L),b.c()),xe(b,1),b.m(r,C)):b=null)},i(L){S||(xe(a.$$.fragment,L),xe(h.$$.fragment,L),xe(c.$$.fragment,L),xe(y.$$.fragment,L),xe(b),xe(B.$$.fragment,L),S=!0)},o(L){Ue(a.$$.fragment,L),Ue(h.$$.fragment,L),Ue(c.$$.fragment,L),Ue(y.$$.fragment,L),Ue(b),Ue(B.$$.fragment,L),S=!1},d(L){L&&V(t),mt(a),mt(h),mt(c),mt(y),~_&&N[_].d(),mt(B),O=!1,Ur(P)}}}function A3(e,t,r){let n;Bt(e,yn,p=>r(0,n=p));function u(p){const f={...n,weightMode:p};Ot.update(f)}return[n,u,()=>u("bars"),()=>u("pie"),()=>u("circle"),()=>u("embed")]}class w3 extends kt{constructor(t){super(),Rt(this,t,A3,y3,Lt,{})}}var ws={},E3={get exports(){return ws},set exports(e){ws=e}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var r,n="4.17.21",u=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",o="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",p=500,f="__lodash_placeholder__",c=1,d=2,m=4,y=1,g=2,_=1,b=2,C=4,w=8,B=16,S=32,O=64,P=128,I=256,N=512,G=30,L="...",q=800,$=16,H=1,z=2,W=3,re=1/0,ee=9007199254740991,Q=17976931348623157e292,le=0/0,me=4294967295,Se=me-1,be=me>>>1,Ne=[["ary",P],["bind",_],["bindKey",b],["curry",w],["curryRight",B],["flip",N],["partial",S],["partialRight",O],["rearg",I]],je="[object Arguments]",Me="[object Array]",it="[object AsyncFunction]",qe="[object Boolean]",Te="[object Date]",Re="[object DOMException]",lt="[object Error]",et="[object Function]",ut="[object GeneratorFunction]",tt="[object Map]",rt="[object Number]",ze="[object Null]",We="[object Object]",Ae="[object Promise]",we="[object Proxy]",yt="[object RegExp]",Tt="[object Set]",zt="[object String]",R="[object Symbol]",j="[object Undefined]",Z="[object WeakMap]",fe="[object WeakSet]",ne="[object ArrayBuffer]",pe="[object DataView]",ue="[object Float32Array]",ce="[object Float64Array]",ye="[object Int8Array]",Oe="[object Int16Array]",Xe="[object Int32Array]",Ee="[object Uint8Array]",Ut="[object Uint8ClampedArray]",Ft="[object Uint16Array]",tr="[object Uint32Array]",Yt=/\b__p \+= '';/g,gr=/\b(__p \+=) '' \+/g,Zt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mr=/&(?:amp|lt|gt|quot|#39);/g,lr=/[&<>"']/g,fr=RegExp(mr.source),nn=RegExp(lr.source),hr=/<%-([\s\S]+?)%>/g,An=/<%([\s\S]+?)%>/g,Gn=/<%=([\s\S]+?)%>/g,In=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nn=/^\w*$/,Hi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mi=/[\\^$.*+?()[\]{}|]/g,bu=RegExp(Mi.source),wr=/^\s+/,rr=/\s/,yu=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,si=/\{\n\/\* \[wrapped with (.+)\] \*/,un=/,? & /,Kn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pi=/[()=,{}\[\]\/\s]/,Au=/\\(\\)?/g,wu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gi=/\w*$/,Eu=/^[-+]0x[0-9a-f]+$/i,Cu=/^0b[01]+$/i,Fu=/^\[object .+?Constructor\]$/,Su=/^0o[0-7]+$/i,Bu=/^(?:0|[1-9]\d*)$/,Ou=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,oi=/($^)/,Mu=/['\n\r\u2028\u2029\\]/g,li="\\ud800-\\udfff",Pu="\\u0300-\\u036f",xu="\\ufe20-\\ufe2f",Tu="\\u20d0-\\u20ff",Ki=Pu+xu+Tu,kn="\\u2700-\\u27bf",_r="a-z\\xdf-\\xf6\\xf8-\\xff",ur="\\xac\\xb1\\xd7\\xf7",Ir="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xi="\\u2000-\\u206f",Yn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Rn="A-Z\\xc0-\\xd6\\xd8-\\xde",Ti="\\ufe0e\\ufe0f",wn=ur+Ir+xi+Yn,an="[']",Gs="["+li+"]",Iu="["+wn+"]",Yi="["+Ki+"]",ua="\\d+",D="["+kn+"]",E="["+_r+"]",k="[^"+li+wn+ua+kn+_r+Rn+"]",X="\\ud83c[\\udffb-\\udfff]",de="(?:"+Yi+"|"+X+")",Fe="[^"+li+"]",ot="(?:\\ud83c[\\udde6-\\uddff]){2}",Dt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ht="["+Rn+"]",ar="\\u200d",wf="(?:"+E+"|"+k+")",Zp="(?:"+Ht+"|"+k+")",Ef="(?:"+an+"(?:d|ll|m|re|s|t|ve))?",Cf="(?:"+an+"(?:D|LL|M|RE|S|T|VE))?",Ff=de+"?",Sf="["+Ti+"]?",$p="(?:"+ar+"(?:"+[Fe,ot,Dt].join("|")+")"+Sf+Ff+")*",Xp="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Jp="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Bf=Sf+Ff+$p,Qp="(?:"+[D,ot,Dt].join("|")+")"+Bf,e1="(?:"+[Fe+Yi+"?",Yi,ot,Dt,Gs].join("|")+")",t1=RegExp(an,"g"),r1=RegExp(Yi,"g"),Ks=RegExp(X+"(?="+X+")|"+e1+Bf,"g"),n1=RegExp([Ht+"?"+E+"+"+Ef+"(?="+[Iu,Ht,"$"].join("|")+")",Zp+"+"+Cf+"(?="+[Iu,Ht+wf,"$"].join("|")+")",Ht+"?"+wf+"+"+Ef,Ht+"+"+Cf,Jp,Xp,ua,Qp].join("|"),"g"),i1=RegExp("["+ar+li+Ki+Ti+"]"),u1=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,a1=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],s1=-1,Wt={};Wt[ue]=Wt[ce]=Wt[ye]=Wt[Oe]=Wt[Xe]=Wt[Ee]=Wt[Ut]=Wt[Ft]=Wt[tr]=!0,Wt[je]=Wt[Me]=Wt[ne]=Wt[qe]=Wt[pe]=Wt[Te]=Wt[lt]=Wt[et]=Wt[tt]=Wt[rt]=Wt[We]=Wt[yt]=Wt[Tt]=Wt[zt]=Wt[Z]=!1;var Vt={};Vt[je]=Vt[Me]=Vt[ne]=Vt[pe]=Vt[qe]=Vt[Te]=Vt[ue]=Vt[ce]=Vt[ye]=Vt[Oe]=Vt[Xe]=Vt[tt]=Vt[rt]=Vt[We]=Vt[yt]=Vt[Tt]=Vt[zt]=Vt[R]=Vt[Ee]=Vt[Ut]=Vt[Ft]=Vt[tr]=!0,Vt[lt]=Vt[et]=Vt[Z]=!1;var o1={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},l1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},f1={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},c1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},h1=parseFloat,d1=parseInt,Of=typeof cr=="object"&&cr&&cr.Object===Object&&cr,p1=typeof self=="object"&&self&&self.Object===Object&&self,Er=Of||p1||Function("return this")(),Ys=t&&!t.nodeType&&t,Ii=Ys&&!0&&e&&!e.nodeType&&e,Mf=Ii&&Ii.exports===Ys,Zs=Mf&&Of.process,sn=function(){try{var J=Ii&&Ii.require&&Ii.require("util").types;return J||Zs&&Zs.binding&&Zs.binding("util")}catch{}}(),Pf=sn&&sn.isArrayBuffer,xf=sn&&sn.isDate,Tf=sn&&sn.isMap,If=sn&&sn.isRegExp,Nf=sn&&sn.isSet,kf=sn&&sn.isTypedArray;function Yr(J,he,ae){switch(ae.length){case 0:return J.call(he);case 1:return J.call(he,ae[0]);case 2:return J.call(he,ae[0],ae[1]);case 3:return J.call(he,ae[0],ae[1],ae[2])}return J.apply(he,ae)}function v1(J,he,ae,Pe){for(var at=-1,At=J==null?0:J.length;++at<At;){var dr=J[at];he(Pe,dr,ae(dr),J)}return Pe}function on(J,he){for(var ae=-1,Pe=J==null?0:J.length;++ae<Pe&&he(J[ae],ae,J)!==!1;);return J}function g1(J,he){for(var ae=J==null?0:J.length;ae--&&he(J[ae],ae,J)!==!1;);return J}function Rf(J,he){for(var ae=-1,Pe=J==null?0:J.length;++ae<Pe;)if(!he(J[ae],ae,J))return!1;return!0}function fi(J,he){for(var ae=-1,Pe=J==null?0:J.length,at=0,At=[];++ae<Pe;){var dr=J[ae];he(dr,ae,J)&&(At[at++]=dr)}return At}function aa(J,he){var ae=J==null?0:J.length;return!!ae&&Zi(J,he,0)>-1}function $s(J,he,ae){for(var Pe=-1,at=J==null?0:J.length;++Pe<at;)if(ae(he,J[Pe]))return!0;return!1}function Gt(J,he){for(var ae=-1,Pe=J==null?0:J.length,at=Array(Pe);++ae<Pe;)at[ae]=he(J[ae],ae,J);return at}function ci(J,he){for(var ae=-1,Pe=he.length,at=J.length;++ae<Pe;)J[at+ae]=he[ae];return J}function Xs(J,he,ae,Pe){var at=-1,At=J==null?0:J.length;for(Pe&&At&&(ae=J[++at]);++at<At;)ae=he(ae,J[at],at,J);return ae}function m1(J,he,ae,Pe){var at=J==null?0:J.length;for(Pe&&at&&(ae=J[--at]);at--;)ae=he(ae,J[at],at,J);return ae}function Js(J,he){for(var ae=-1,Pe=J==null?0:J.length;++ae<Pe;)if(he(J[ae],ae,J))return!0;return!1}var _1=Qs("length");function D1(J){return J.split("")}function b1(J){return J.match(Kn)||[]}function Lf(J,he,ae){var Pe;return ae(J,function(at,At,dr){if(he(at,At,dr))return Pe=At,!1}),Pe}function sa(J,he,ae,Pe){for(var at=J.length,At=ae+(Pe?1:-1);Pe?At--:++At<at;)if(he(J[At],At,J))return At;return-1}function Zi(J,he,ae){return he===he?x1(J,he,ae):sa(J,Uf,ae)}function y1(J,he,ae,Pe){for(var at=ae-1,At=J.length;++at<At;)if(Pe(J[at],he))return at;return-1}function Uf(J){return J!==J}function Vf(J,he){var ae=J==null?0:J.length;return ae?to(J,he)/ae:le}function Qs(J){return function(he){return he==null?r:he[J]}}function eo(J){return function(he){return J==null?r:J[he]}}function jf(J,he,ae,Pe,at){return at(J,function(At,dr,It){ae=Pe?(Pe=!1,At):he(ae,At,dr,It)}),ae}function A1(J,he){var ae=J.length;for(J.sort(he);ae--;)J[ae]=J[ae].value;return J}function to(J,he){for(var ae,Pe=-1,at=J.length;++Pe<at;){var At=he(J[Pe]);At!==r&&(ae=ae===r?At:ae+At)}return ae}function ro(J,he){for(var ae=-1,Pe=Array(J);++ae<J;)Pe[ae]=he(ae);return Pe}function w1(J,he){return Gt(he,function(ae){return[ae,J[ae]]})}function qf(J){return J&&J.slice(0,Gf(J)+1).replace(wr,"")}function Zr(J){return function(he){return J(he)}}function no(J,he){return Gt(he,function(ae){return J[ae]})}function Nu(J,he){return J.has(he)}function zf(J,he){for(var ae=-1,Pe=J.length;++ae<Pe&&Zi(he,J[ae],0)>-1;);return ae}function Wf(J,he){for(var ae=J.length;ae--&&Zi(he,J[ae],0)>-1;);return ae}function E1(J,he){for(var ae=J.length,Pe=0;ae--;)J[ae]===he&&++Pe;return Pe}var C1=eo(o1),F1=eo(l1);function S1(J){return"\\"+c1[J]}function B1(J,he){return J==null?r:J[he]}function $i(J){return i1.test(J)}function O1(J){return u1.test(J)}function M1(J){for(var he,ae=[];!(he=J.next()).done;)ae.push(he.value);return ae}function io(J){var he=-1,ae=Array(J.size);return J.forEach(function(Pe,at){ae[++he]=[at,Pe]}),ae}function Hf(J,he){return function(ae){return J(he(ae))}}function hi(J,he){for(var ae=-1,Pe=J.length,at=0,At=[];++ae<Pe;){var dr=J[ae];(dr===he||dr===f)&&(J[ae]=f,At[at++]=ae)}return At}function oa(J){var he=-1,ae=Array(J.size);return J.forEach(function(Pe){ae[++he]=Pe}),ae}function P1(J){var he=-1,ae=Array(J.size);return J.forEach(function(Pe){ae[++he]=[Pe,Pe]}),ae}function x1(J,he,ae){for(var Pe=ae-1,at=J.length;++Pe<at;)if(J[Pe]===he)return Pe;return-1}function T1(J,he,ae){for(var Pe=ae+1;Pe--;)if(J[Pe]===he)return Pe;return Pe}function Xi(J){return $i(J)?N1(J):_1(J)}function En(J){return $i(J)?k1(J):D1(J)}function Gf(J){for(var he=J.length;he--&&rr.test(J.charAt(he)););return he}var I1=eo(f1);function N1(J){for(var he=Ks.lastIndex=0;Ks.test(J);)++he;return he}function k1(J){return J.match(Ks)||[]}function R1(J){return J.match(n1)||[]}var L1=function J(he){he=he==null?Er:Ji.defaults(Er.Object(),he,Ji.pick(Er,a1));var ae=he.Array,Pe=he.Date,at=he.Error,At=he.Function,dr=he.Math,It=he.Object,uo=he.RegExp,U1=he.String,ln=he.TypeError,la=ae.prototype,V1=At.prototype,Qi=It.prototype,fa=he["__core-js_shared__"],ca=V1.toString,St=Qi.hasOwnProperty,j1=0,Kf=function(){var i=/[^.]+$/.exec(fa&&fa.keys&&fa.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),ha=Qi.toString,q1=ca.call(It),z1=Er._,W1=uo("^"+ca.call(St).replace(Mi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),da=Mf?he.Buffer:r,di=he.Symbol,pa=he.Uint8Array,Yf=da?da.allocUnsafe:r,va=Hf(It.getPrototypeOf,It),Zf=It.create,$f=Qi.propertyIsEnumerable,ga=la.splice,Xf=di?di.isConcatSpreadable:r,ku=di?di.iterator:r,Ni=di?di.toStringTag:r,ma=function(){try{var i=Vi(It,"defineProperty");return i({},"",{}),i}catch{}}(),H1=he.clearTimeout!==Er.clearTimeout&&he.clearTimeout,G1=Pe&&Pe.now!==Er.Date.now&&Pe.now,K1=he.setTimeout!==Er.setTimeout&&he.setTimeout,_a=dr.ceil,Da=dr.floor,ao=It.getOwnPropertySymbols,Y1=da?da.isBuffer:r,Jf=he.isFinite,Z1=la.join,$1=Hf(It.keys,It),pr=dr.max,Mr=dr.min,X1=Pe.now,J1=he.parseInt,Qf=dr.random,Q1=la.reverse,so=Vi(he,"DataView"),Ru=Vi(he,"Map"),oo=Vi(he,"Promise"),eu=Vi(he,"Set"),Lu=Vi(he,"WeakMap"),Uu=Vi(It,"create"),ba=Lu&&new Lu,tu={},ev=ji(so),tv=ji(Ru),rv=ji(oo),nv=ji(eu),iv=ji(Lu),ya=di?di.prototype:r,Vu=ya?ya.valueOf:r,ec=ya?ya.toString:r;function M(i){if(nr(i)&&!st(i)&&!(i instanceof _t)){if(i instanceof fn)return i;if(St.call(i,"__wrapped__"))return th(i)}return new fn(i)}var ru=function(){function i(){}return function(s){if(!$t(s))return{};if(Zf)return Zf(s);i.prototype=s;var v=new i;return i.prototype=r,v}}();function Aa(){}function fn(i,s){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=r}M.templateSettings={escape:hr,evaluate:An,interpolate:Gn,variable:"",imports:{_:M}},M.prototype=Aa.prototype,M.prototype.constructor=M,fn.prototype=ru(Aa.prototype),fn.prototype.constructor=fn;function _t(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=me,this.__views__=[]}function uv(){var i=new _t(this.__wrapped__);return i.__actions__=Vr(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=Vr(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=Vr(this.__views__),i}function av(){if(this.__filtered__){var i=new _t(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function sv(){var i=this.__wrapped__.value(),s=this.__dir__,v=st(i),A=s<0,F=v?i.length:0,x=Dg(0,F,this.__views__),U=x.start,K=x.end,te=K-U,ve=A?K:U-1,ge=this.__iteratees__,De=ge.length,Be=0,Le=Mr(te,this.__takeCount__);if(!v||!A&&F==te&&Le==te)return Ec(i,this.__actions__);var Je=[];e:for(;te--&&Be<Le;){ve+=s;for(var ct=-1,Qe=i[ve];++ct<De;){var dt=ge[ct],bt=dt.iteratee,Jr=dt.type,Rr=bt(Qe);if(Jr==z)Qe=Rr;else if(!Rr){if(Jr==H)continue e;break e}}Je[Be++]=Qe}return Je}_t.prototype=ru(Aa.prototype),_t.prototype.constructor=_t;function ki(i){var s=-1,v=i==null?0:i.length;for(this.clear();++s<v;){var A=i[s];this.set(A[0],A[1])}}function ov(){this.__data__=Uu?Uu(null):{},this.size=0}function lv(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s}function fv(i){var s=this.__data__;if(Uu){var v=s[i];return v===h?r:v}return St.call(s,i)?s[i]:r}function cv(i){var s=this.__data__;return Uu?s[i]!==r:St.call(s,i)}function hv(i,s){var v=this.__data__;return this.size+=this.has(i)?0:1,v[i]=Uu&&s===r?h:s,this}ki.prototype.clear=ov,ki.prototype.delete=lv,ki.prototype.get=fv,ki.prototype.has=cv,ki.prototype.set=hv;function Zn(i){var s=-1,v=i==null?0:i.length;for(this.clear();++s<v;){var A=i[s];this.set(A[0],A[1])}}function dv(){this.__data__=[],this.size=0}function pv(i){var s=this.__data__,v=wa(s,i);if(v<0)return!1;var A=s.length-1;return v==A?s.pop():ga.call(s,v,1),--this.size,!0}function vv(i){var s=this.__data__,v=wa(s,i);return v<0?r:s[v][1]}function gv(i){return wa(this.__data__,i)>-1}function mv(i,s){var v=this.__data__,A=wa(v,i);return A<0?(++this.size,v.push([i,s])):v[A][1]=s,this}Zn.prototype.clear=dv,Zn.prototype.delete=pv,Zn.prototype.get=vv,Zn.prototype.has=gv,Zn.prototype.set=mv;function $n(i){var s=-1,v=i==null?0:i.length;for(this.clear();++s<v;){var A=i[s];this.set(A[0],A[1])}}function _v(){this.size=0,this.__data__={hash:new ki,map:new(Ru||Zn),string:new ki}}function Dv(i){var s=Na(this,i).delete(i);return this.size-=s?1:0,s}function bv(i){return Na(this,i).get(i)}function yv(i){return Na(this,i).has(i)}function Av(i,s){var v=Na(this,i),A=v.size;return v.set(i,s),this.size+=v.size==A?0:1,this}$n.prototype.clear=_v,$n.prototype.delete=Dv,$n.prototype.get=bv,$n.prototype.has=yv,$n.prototype.set=Av;function Ri(i){var s=-1,v=i==null?0:i.length;for(this.__data__=new $n;++s<v;)this.add(i[s])}function wv(i){return this.__data__.set(i,h),this}function Ev(i){return this.__data__.has(i)}Ri.prototype.add=Ri.prototype.push=wv,Ri.prototype.has=Ev;function Cn(i){var s=this.__data__=new Zn(i);this.size=s.size}function Cv(){this.__data__=new Zn,this.size=0}function Fv(i){var s=this.__data__,v=s.delete(i);return this.size=s.size,v}function Sv(i){return this.__data__.get(i)}function Bv(i){return this.__data__.has(i)}function Ov(i,s){var v=this.__data__;if(v instanceof Zn){var A=v.__data__;if(!Ru||A.length<u-1)return A.push([i,s]),this.size=++v.size,this;v=this.__data__=new $n(A)}return v.set(i,s),this.size=v.size,this}Cn.prototype.clear=Cv,Cn.prototype.delete=Fv,Cn.prototype.get=Sv,Cn.prototype.has=Bv,Cn.prototype.set=Ov;function tc(i,s){var v=st(i),A=!v&&qi(i),F=!v&&!A&&_i(i),x=!v&&!A&&!F&&au(i),U=v||A||F||x,K=U?ro(i.length,U1):[],te=K.length;for(var ve in i)(s||St.call(i,ve))&&!(U&&(ve=="length"||F&&(ve=="offset"||ve=="parent")||x&&(ve=="buffer"||ve=="byteLength"||ve=="byteOffset")||ei(ve,te)))&&K.push(ve);return K}function rc(i){var s=i.length;return s?i[bo(0,s-1)]:r}function Mv(i,s){return ka(Vr(i),Li(s,0,i.length))}function Pv(i){return ka(Vr(i))}function lo(i,s,v){(v!==r&&!Fn(i[s],v)||v===r&&!(s in i))&&Xn(i,s,v)}function ju(i,s,v){var A=i[s];(!(St.call(i,s)&&Fn(A,v))||v===r&&!(s in i))&&Xn(i,s,v)}function wa(i,s){for(var v=i.length;v--;)if(Fn(i[v][0],s))return v;return-1}function xv(i,s,v,A){return pi(i,function(F,x,U){s(A,F,v(F),U)}),A}function nc(i,s){return i&&Un(s,Dr(s),i)}function Tv(i,s){return i&&Un(s,qr(s),i)}function Xn(i,s,v){s=="__proto__"&&ma?ma(i,s,{configurable:!0,enumerable:!0,value:v,writable:!0}):i[s]=v}function fo(i,s){for(var v=-1,A=s.length,F=ae(A),x=i==null;++v<A;)F[v]=x?r:Ho(i,s[v]);return F}function Li(i,s,v){return i===i&&(v!==r&&(i=i<=v?i:v),s!==r&&(i=i>=s?i:s)),i}function cn(i,s,v,A,F,x){var U,K=s&c,te=s&d,ve=s&m;if(v&&(U=F?v(i,A,F,x):v(i)),U!==r)return U;if(!$t(i))return i;var ge=st(i);if(ge){if(U=yg(i),!K)return Vr(i,U)}else{var De=Pr(i),Be=De==et||De==ut;if(_i(i))return Sc(i,K);if(De==We||De==je||Be&&!F){if(U=te||Be?{}:Gc(i),!K)return te?fg(i,Tv(U,i)):lg(i,nc(U,i))}else{if(!Vt[De])return F?i:{};U=Ag(i,De,K)}}x||(x=new Cn);var Le=x.get(i);if(Le)return Le;x.set(i,U),yh(i)?i.forEach(function(Qe){U.add(cn(Qe,s,v,Qe,i,x))}):Dh(i)&&i.forEach(function(Qe,dt){U.set(dt,cn(Qe,s,v,dt,i,x))});var Je=ve?te?Po:Mo:te?qr:Dr,ct=ge?r:Je(i);return on(ct||i,function(Qe,dt){ct&&(dt=Qe,Qe=i[dt]),ju(U,dt,cn(Qe,s,v,dt,i,x))}),U}function Iv(i){var s=Dr(i);return function(v){return ic(v,i,s)}}function ic(i,s,v){var A=v.length;if(i==null)return!A;for(i=It(i);A--;){var F=v[A],x=s[F],U=i[F];if(U===r&&!(F in i)||!x(U))return!1}return!0}function uc(i,s,v){if(typeof i!="function")throw new ln(l);return Yu(function(){i.apply(r,v)},s)}function qu(i,s,v,A){var F=-1,x=aa,U=!0,K=i.length,te=[],ve=s.length;if(!K)return te;v&&(s=Gt(s,Zr(v))),A?(x=$s,U=!1):s.length>=u&&(x=Nu,U=!1,s=new Ri(s));e:for(;++F<K;){var ge=i[F],De=v==null?ge:v(ge);if(ge=A||ge!==0?ge:0,U&&De===De){for(var Be=ve;Be--;)if(s[Be]===De)continue e;te.push(ge)}else x(s,De,A)||te.push(ge)}return te}var pi=xc(Ln),ac=xc(ho,!0);function Nv(i,s){var v=!0;return pi(i,function(A,F,x){return v=!!s(A,F,x),v}),v}function Ea(i,s,v){for(var A=-1,F=i.length;++A<F;){var x=i[A],U=s(x);if(U!=null&&(K===r?U===U&&!Xr(U):v(U,K)))var K=U,te=x}return te}function kv(i,s,v,A){var F=i.length;for(v=ft(v),v<0&&(v=-v>F?0:F+v),A=A===r||A>F?F:ft(A),A<0&&(A+=F),A=v>A?0:wh(A);v<A;)i[v++]=s;return i}function sc(i,s){var v=[];return pi(i,function(A,F,x){s(A,F,x)&&v.push(A)}),v}function Cr(i,s,v,A,F){var x=-1,U=i.length;for(v||(v=Eg),F||(F=[]);++x<U;){var K=i[x];s>0&&v(K)?s>1?Cr(K,s-1,v,A,F):ci(F,K):A||(F[F.length]=K)}return F}var co=Tc(),oc=Tc(!0);function Ln(i,s){return i&&co(i,s,Dr)}function ho(i,s){return i&&oc(i,s,Dr)}function Ca(i,s){return fi(s,function(v){return ti(i[v])})}function Ui(i,s){s=gi(s,i);for(var v=0,A=s.length;i!=null&&v<A;)i=i[Vn(s[v++])];return v&&v==A?i:r}function lc(i,s,v){var A=s(i);return st(i)?A:ci(A,v(i))}function Nr(i){return i==null?i===r?j:ze:Ni&&Ni in It(i)?_g(i):Pg(i)}function po(i,s){return i>s}function Rv(i,s){return i!=null&&St.call(i,s)}function Lv(i,s){return i!=null&&s in It(i)}function Uv(i,s,v){return i>=Mr(s,v)&&i<pr(s,v)}function vo(i,s,v){for(var A=v?$s:aa,F=i[0].length,x=i.length,U=x,K=ae(x),te=1/0,ve=[];U--;){var ge=i[U];U&&s&&(ge=Gt(ge,Zr(s))),te=Mr(ge.length,te),K[U]=!v&&(s||F>=120&&ge.length>=120)?new Ri(U&&ge):r}ge=i[0];var De=-1,Be=K[0];e:for(;++De<F&&ve.length<te;){var Le=ge[De],Je=s?s(Le):Le;if(Le=v||Le!==0?Le:0,!(Be?Nu(Be,Je):A(ve,Je,v))){for(U=x;--U;){var ct=K[U];if(!(ct?Nu(ct,Je):A(i[U],Je,v)))continue e}Be&&Be.push(Je),ve.push(Le)}}return ve}function Vv(i,s,v,A){return Ln(i,function(F,x,U){s(A,v(F),x,U)}),A}function zu(i,s,v){s=gi(s,i),i=$c(i,s);var A=i==null?i:i[Vn(dn(s))];return A==null?r:Yr(A,i,v)}function fc(i){return nr(i)&&Nr(i)==je}function jv(i){return nr(i)&&Nr(i)==ne}function qv(i){return nr(i)&&Nr(i)==Te}function Wu(i,s,v,A,F){return i===s?!0:i==null||s==null||!nr(i)&&!nr(s)?i!==i&&s!==s:zv(i,s,v,A,Wu,F)}function zv(i,s,v,A,F,x){var U=st(i),K=st(s),te=U?Me:Pr(i),ve=K?Me:Pr(s);te=te==je?We:te,ve=ve==je?We:ve;var ge=te==We,De=ve==We,Be=te==ve;if(Be&&_i(i)){if(!_i(s))return!1;U=!0,ge=!1}if(Be&&!ge)return x||(x=new Cn),U||au(i)?zc(i,s,v,A,F,x):gg(i,s,te,v,A,F,x);if(!(v&y)){var Le=ge&&St.call(i,"__wrapped__"),Je=De&&St.call(s,"__wrapped__");if(Le||Je){var ct=Le?i.value():i,Qe=Je?s.value():s;return x||(x=new Cn),F(ct,Qe,v,A,x)}}return Be?(x||(x=new Cn),mg(i,s,v,A,F,x)):!1}function Wv(i){return nr(i)&&Pr(i)==tt}function go(i,s,v,A){var F=v.length,x=F,U=!A;if(i==null)return!x;for(i=It(i);F--;){var K=v[F];if(U&&K[2]?K[1]!==i[K[0]]:!(K[0]in i))return!1}for(;++F<x;){K=v[F];var te=K[0],ve=i[te],ge=K[1];if(U&&K[2]){if(ve===r&&!(te in i))return!1}else{var De=new Cn;if(A)var Be=A(ve,ge,te,i,s,De);if(!(Be===r?Wu(ge,ve,y|g,A,De):Be))return!1}}return!0}function cc(i){if(!$t(i)||Fg(i))return!1;var s=ti(i)?W1:Fu;return s.test(ji(i))}function Hv(i){return nr(i)&&Nr(i)==yt}function Gv(i){return nr(i)&&Pr(i)==Tt}function Kv(i){return nr(i)&&qa(i.length)&&!!Wt[Nr(i)]}function hc(i){return typeof i=="function"?i:i==null?zr:typeof i=="object"?st(i)?vc(i[0],i[1]):pc(i):Ih(i)}function mo(i){if(!Ku(i))return $1(i);var s=[];for(var v in It(i))St.call(i,v)&&v!="constructor"&&s.push(v);return s}function Yv(i){if(!$t(i))return Mg(i);var s=Ku(i),v=[];for(var A in i)A=="constructor"&&(s||!St.call(i,A))||v.push(A);return v}function _o(i,s){return i<s}function dc(i,s){var v=-1,A=jr(i)?ae(i.length):[];return pi(i,function(F,x,U){A[++v]=s(F,x,U)}),A}function pc(i){var s=To(i);return s.length==1&&s[0][2]?Yc(s[0][0],s[0][1]):function(v){return v===i||go(v,i,s)}}function vc(i,s){return No(i)&&Kc(s)?Yc(Vn(i),s):function(v){var A=Ho(v,i);return A===r&&A===s?Go(v,i):Wu(s,A,y|g)}}function Fa(i,s,v,A,F){i!==s&&co(s,function(x,U){if(F||(F=new Cn),$t(x))Zv(i,s,U,v,Fa,A,F);else{var K=A?A(Ro(i,U),x,U+"",i,s,F):r;K===r&&(K=x),lo(i,U,K)}},qr)}function Zv(i,s,v,A,F,x,U){var K=Ro(i,v),te=Ro(s,v),ve=U.get(te);if(ve){lo(i,v,ve);return}var ge=x?x(K,te,v+"",i,s,U):r,De=ge===r;if(De){var Be=st(te),Le=!Be&&_i(te),Je=!Be&&!Le&&au(te);ge=te,Be||Le||Je?st(K)?ge=K:sr(K)?ge=Vr(K):Le?(De=!1,ge=Sc(te,!0)):Je?(De=!1,ge=Bc(te,!0)):ge=[]:Zu(te)||qi(te)?(ge=K,qi(K)?ge=Eh(K):(!$t(K)||ti(K))&&(ge=Gc(te))):De=!1}De&&(U.set(te,ge),F(ge,te,A,x,U),U.delete(te)),lo(i,v,ge)}function gc(i,s){var v=i.length;if(v)return s+=s<0?v:0,ei(s,v)?i[s]:r}function mc(i,s,v){s.length?s=Gt(s,function(x){return st(x)?function(U){return Ui(U,x.length===1?x[0]:x)}:x}):s=[zr];var A=-1;s=Gt(s,Zr(He()));var F=dc(i,function(x,U,K){var te=Gt(s,function(ve){return ve(x)});return{criteria:te,index:++A,value:x}});return A1(F,function(x,U){return og(x,U,v)})}function $v(i,s){return _c(i,s,function(v,A){return Go(i,A)})}function _c(i,s,v){for(var A=-1,F=s.length,x={};++A<F;){var U=s[A],K=Ui(i,U);v(K,U)&&Hu(x,gi(U,i),K)}return x}function Xv(i){return function(s){return Ui(s,i)}}function Do(i,s,v,A){var F=A?y1:Zi,x=-1,U=s.length,K=i;for(i===s&&(s=Vr(s)),v&&(K=Gt(i,Zr(v)));++x<U;)for(var te=0,ve=s[x],ge=v?v(ve):ve;(te=F(K,ge,te,A))>-1;)K!==i&&ga.call(K,te,1),ga.call(i,te,1);return i}function Dc(i,s){for(var v=i?s.length:0,A=v-1;v--;){var F=s[v];if(v==A||F!==x){var x=F;ei(F)?ga.call(i,F,1):wo(i,F)}}return i}function bo(i,s){return i+Da(Qf()*(s-i+1))}function Jv(i,s,v,A){for(var F=-1,x=pr(_a((s-i)/(v||1)),0),U=ae(x);x--;)U[A?x:++F]=i,i+=v;return U}function yo(i,s){var v="";if(!i||s<1||s>ee)return v;do s%2&&(v+=i),s=Da(s/2),s&&(i+=i);while(s);return v}function ht(i,s){return Lo(Zc(i,s,zr),i+"")}function Qv(i){return rc(su(i))}function eg(i,s){var v=su(i);return ka(v,Li(s,0,v.length))}function Hu(i,s,v,A){if(!$t(i))return i;s=gi(s,i);for(var F=-1,x=s.length,U=x-1,K=i;K!=null&&++F<x;){var te=Vn(s[F]),ve=v;if(te==="__proto__"||te==="constructor"||te==="prototype")return i;if(F!=U){var ge=K[te];ve=A?A(ge,te,K):r,ve===r&&(ve=$t(ge)?ge:ei(s[F+1])?[]:{})}ju(K,te,ve),K=K[te]}return i}var bc=ba?function(i,s){return ba.set(i,s),i}:zr,tg=ma?function(i,s){return ma(i,"toString",{configurable:!0,enumerable:!1,value:Yo(s),writable:!0})}:zr;function rg(i){return ka(su(i))}function hn(i,s,v){var A=-1,F=i.length;s<0&&(s=-s>F?0:F+s),v=v>F?F:v,v<0&&(v+=F),F=s>v?0:v-s>>>0,s>>>=0;for(var x=ae(F);++A<F;)x[A]=i[A+s];return x}function ng(i,s){var v;return pi(i,function(A,F,x){return v=s(A,F,x),!v}),!!v}function Sa(i,s,v){var A=0,F=i==null?A:i.length;if(typeof s=="number"&&s===s&&F<=be){for(;A<F;){var x=A+F>>>1,U=i[x];U!==null&&!Xr(U)&&(v?U<=s:U<s)?A=x+1:F=x}return F}return Ao(i,s,zr,v)}function Ao(i,s,v,A){var F=0,x=i==null?0:i.length;if(x===0)return 0;s=v(s);for(var U=s!==s,K=s===null,te=Xr(s),ve=s===r;F<x;){var ge=Da((F+x)/2),De=v(i[ge]),Be=De!==r,Le=De===null,Je=De===De,ct=Xr(De);if(U)var Qe=A||Je;else ve?Qe=Je&&(A||Be):K?Qe=Je&&Be&&(A||!Le):te?Qe=Je&&Be&&!Le&&(A||!ct):Le||ct?Qe=!1:Qe=A?De<=s:De<s;Qe?F=ge+1:x=ge}return Mr(x,Se)}function yc(i,s){for(var v=-1,A=i.length,F=0,x=[];++v<A;){var U=i[v],K=s?s(U):U;if(!v||!Fn(K,te)){var te=K;x[F++]=U===0?0:U}}return x}function Ac(i){return typeof i=="number"?i:Xr(i)?le:+i}function $r(i){if(typeof i=="string")return i;if(st(i))return Gt(i,$r)+"";if(Xr(i))return ec?ec.call(i):"";var s=i+"";return s=="0"&&1/i==-re?"-0":s}function vi(i,s,v){var A=-1,F=aa,x=i.length,U=!0,K=[],te=K;if(v)U=!1,F=$s;else if(x>=u){var ve=s?null:pg(i);if(ve)return oa(ve);U=!1,F=Nu,te=new Ri}else te=s?[]:K;e:for(;++A<x;){var ge=i[A],De=s?s(ge):ge;if(ge=v||ge!==0?ge:0,U&&De===De){for(var Be=te.length;Be--;)if(te[Be]===De)continue e;s&&te.push(De),K.push(ge)}else F(te,De,v)||(te!==K&&te.push(De),K.push(ge))}return K}function wo(i,s){return s=gi(s,i),i=$c(i,s),i==null||delete i[Vn(dn(s))]}function wc(i,s,v,A){return Hu(i,s,v(Ui(i,s)),A)}function Ba(i,s,v,A){for(var F=i.length,x=A?F:-1;(A?x--:++x<F)&&s(i[x],x,i););return v?hn(i,A?0:x,A?x+1:F):hn(i,A?x+1:0,A?F:x)}function Ec(i,s){var v=i;return v instanceof _t&&(v=v.value()),Xs(s,function(A,F){return F.func.apply(F.thisArg,ci([A],F.args))},v)}function Eo(i,s,v){var A=i.length;if(A<2)return A?vi(i[0]):[];for(var F=-1,x=ae(A);++F<A;)for(var U=i[F],K=-1;++K<A;)K!=F&&(x[F]=qu(x[F]||U,i[K],s,v));return vi(Cr(x,1),s,v)}function Cc(i,s,v){for(var A=-1,F=i.length,x=s.length,U={};++A<F;){var K=A<x?s[A]:r;v(U,i[A],K)}return U}function Co(i){return sr(i)?i:[]}function Fo(i){return typeof i=="function"?i:zr}function gi(i,s){return st(i)?i:No(i,s)?[i]:eh(wt(i))}var ig=ht;function mi(i,s,v){var A=i.length;return v=v===r?A:v,!s&&v>=A?i:hn(i,s,v)}var Fc=H1||function(i){return Er.clearTimeout(i)};function Sc(i,s){if(s)return i.slice();var v=i.length,A=Yf?Yf(v):new i.constructor(v);return i.copy(A),A}function So(i){var s=new i.constructor(i.byteLength);return new pa(s).set(new pa(i)),s}function ug(i,s){var v=s?So(i.buffer):i.buffer;return new i.constructor(v,i.byteOffset,i.byteLength)}function ag(i){var s=new i.constructor(i.source,Gi.exec(i));return s.lastIndex=i.lastIndex,s}function sg(i){return Vu?It(Vu.call(i)):{}}function Bc(i,s){var v=s?So(i.buffer):i.buffer;return new i.constructor(v,i.byteOffset,i.length)}function Oc(i,s){if(i!==s){var v=i!==r,A=i===null,F=i===i,x=Xr(i),U=s!==r,K=s===null,te=s===s,ve=Xr(s);if(!K&&!ve&&!x&&i>s||x&&U&&te&&!K&&!ve||A&&U&&te||!v&&te||!F)return 1;if(!A&&!x&&!ve&&i<s||ve&&v&&F&&!A&&!x||K&&v&&F||!U&&F||!te)return-1}return 0}function og(i,s,v){for(var A=-1,F=i.criteria,x=s.criteria,U=F.length,K=v.length;++A<U;){var te=Oc(F[A],x[A]);if(te){if(A>=K)return te;var ve=v[A];return te*(ve=="desc"?-1:1)}}return i.index-s.index}function Mc(i,s,v,A){for(var F=-1,x=i.length,U=v.length,K=-1,te=s.length,ve=pr(x-U,0),ge=ae(te+ve),De=!A;++K<te;)ge[K]=s[K];for(;++F<U;)(De||F<x)&&(ge[v[F]]=i[F]);for(;ve--;)ge[K++]=i[F++];return ge}function Pc(i,s,v,A){for(var F=-1,x=i.length,U=-1,K=v.length,te=-1,ve=s.length,ge=pr(x-K,0),De=ae(ge+ve),Be=!A;++F<ge;)De[F]=i[F];for(var Le=F;++te<ve;)De[Le+te]=s[te];for(;++U<K;)(Be||F<x)&&(De[Le+v[U]]=i[F++]);return De}function Vr(i,s){var v=-1,A=i.length;for(s||(s=ae(A));++v<A;)s[v]=i[v];return s}function Un(i,s,v,A){var F=!v;v||(v={});for(var x=-1,U=s.length;++x<U;){var K=s[x],te=A?A(v[K],i[K],K,v,i):r;te===r&&(te=i[K]),F?Xn(v,K,te):ju(v,K,te)}return v}function lg(i,s){return Un(i,Io(i),s)}function fg(i,s){return Un(i,Wc(i),s)}function Oa(i,s){return function(v,A){var F=st(v)?v1:xv,x=s?s():{};return F(v,i,He(A,2),x)}}function nu(i){return ht(function(s,v){var A=-1,F=v.length,x=F>1?v[F-1]:r,U=F>2?v[2]:r;for(x=i.length>3&&typeof x=="function"?(F--,x):r,U&&kr(v[0],v[1],U)&&(x=F<3?r:x,F=1),s=It(s);++A<F;){var K=v[A];K&&i(s,K,A,x)}return s})}function xc(i,s){return function(v,A){if(v==null)return v;if(!jr(v))return i(v,A);for(var F=v.length,x=s?F:-1,U=It(v);(s?x--:++x<F)&&A(U[x],x,U)!==!1;);return v}}function Tc(i){return function(s,v,A){for(var F=-1,x=It(s),U=A(s),K=U.length;K--;){var te=U[i?K:++F];if(v(x[te],te,x)===!1)break}return s}}function cg(i,s,v){var A=s&_,F=Gu(i);function x(){var U=this&&this!==Er&&this instanceof x?F:i;return U.apply(A?v:this,arguments)}return x}function Ic(i){return function(s){s=wt(s);var v=$i(s)?En(s):r,A=v?v[0]:s.charAt(0),F=v?mi(v,1).join(""):s.slice(1);return A[i]()+F}}function iu(i){return function(s){return Xs(xh(Ph(s).replace(t1,"")),i,"")}}function Gu(i){return function(){var s=arguments;switch(s.length){case 0:return new i;case 1:return new i(s[0]);case 2:return new i(s[0],s[1]);case 3:return new i(s[0],s[1],s[2]);case 4:return new i(s[0],s[1],s[2],s[3]);case 5:return new i(s[0],s[1],s[2],s[3],s[4]);case 6:return new i(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new i(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var v=ru(i.prototype),A=i.apply(v,s);return $t(A)?A:v}}function hg(i,s,v){var A=Gu(i);function F(){for(var x=arguments.length,U=ae(x),K=x,te=uu(F);K--;)U[K]=arguments[K];var ve=x<3&&U[0]!==te&&U[x-1]!==te?[]:hi(U,te);if(x-=ve.length,x<v)return Uc(i,s,Ma,F.placeholder,r,U,ve,r,r,v-x);var ge=this&&this!==Er&&this instanceof F?A:i;return Yr(ge,this,U)}return F}function Nc(i){return function(s,v,A){var F=It(s);if(!jr(s)){var x=He(v,3);s=Dr(s),v=function(K){return x(F[K],K,F)}}var U=i(s,v,A);return U>-1?F[x?s[U]:U]:r}}function kc(i){return Qn(function(s){var v=s.length,A=v,F=fn.prototype.thru;for(i&&s.reverse();A--;){var x=s[A];if(typeof x!="function")throw new ln(l);if(F&&!U&&Ia(x)=="wrapper")var U=new fn([],!0)}for(A=U?A:v;++A<v;){x=s[A];var K=Ia(x),te=K=="wrapper"?xo(x):r;te&&ko(te[0])&&te[1]==(P|w|S|I)&&!te[4].length&&te[9]==1?U=U[Ia(te[0])].apply(U,te[3]):U=x.length==1&&ko(x)?U[K]():U.thru(x)}return function(){var ve=arguments,ge=ve[0];if(U&&ve.length==1&&st(ge))return U.plant(ge).value();for(var De=0,Be=v?s[De].apply(this,ve):ge;++De<v;)Be=s[De].call(this,Be);return Be}})}function Ma(i,s,v,A,F,x,U,K,te,ve){var ge=s&P,De=s&_,Be=s&b,Le=s&(w|B),Je=s&N,ct=Be?r:Gu(i);function Qe(){for(var dt=arguments.length,bt=ae(dt),Jr=dt;Jr--;)bt[Jr]=arguments[Jr];if(Le)var Rr=uu(Qe),Qr=E1(bt,Rr);if(A&&(bt=Mc(bt,A,F,Le)),x&&(bt=Pc(bt,x,U,Le)),dt-=Qr,Le&&dt<ve){var or=hi(bt,Rr);return Uc(i,s,Ma,Qe.placeholder,v,bt,or,K,te,ve-dt)}var Sn=De?v:this,ni=Be?Sn[i]:i;return dt=bt.length,K?bt=xg(bt,K):Je&&dt>1&&bt.reverse(),ge&&te<dt&&(bt.length=te),this&&this!==Er&&this instanceof Qe&&(ni=ct||Gu(ni)),ni.apply(Sn,bt)}return Qe}function Rc(i,s){return function(v,A){return Vv(v,i,s(A),{})}}function Pa(i,s){return function(v,A){var F;if(v===r&&A===r)return s;if(v!==r&&(F=v),A!==r){if(F===r)return A;typeof v=="string"||typeof A=="string"?(v=$r(v),A=$r(A)):(v=Ac(v),A=Ac(A)),F=i(v,A)}return F}}function Bo(i){return Qn(function(s){return s=Gt(s,Zr(He())),ht(function(v){var A=this;return i(s,function(F){return Yr(F,A,v)})})})}function xa(i,s){s=s===r?" ":$r(s);var v=s.length;if(v<2)return v?yo(s,i):s;var A=yo(s,_a(i/Xi(s)));return $i(s)?mi(En(A),0,i).join(""):A.slice(0,i)}function dg(i,s,v,A){var F=s&_,x=Gu(i);function U(){for(var K=-1,te=arguments.length,ve=-1,ge=A.length,De=ae(ge+te),Be=this&&this!==Er&&this instanceof U?x:i;++ve<ge;)De[ve]=A[ve];for(;te--;)De[ve++]=arguments[++K];return Yr(Be,F?v:this,De)}return U}function Lc(i){return function(s,v,A){return A&&typeof A!="number"&&kr(s,v,A)&&(v=A=r),s=ri(s),v===r?(v=s,s=0):v=ri(v),A=A===r?s<v?1:-1:ri(A),Jv(s,v,A,i)}}function Ta(i){return function(s,v){return typeof s=="string"&&typeof v=="string"||(s=pn(s),v=pn(v)),i(s,v)}}function Uc(i,s,v,A,F,x,U,K,te,ve){var ge=s&w,De=ge?U:r,Be=ge?r:U,Le=ge?x:r,Je=ge?r:x;s|=ge?S:O,s&=~(ge?O:S),s&C||(s&=~(_|b));var ct=[i,s,F,Le,De,Je,Be,K,te,ve],Qe=v.apply(r,ct);return ko(i)&&Xc(Qe,ct),Qe.placeholder=A,Jc(Qe,i,s)}function Oo(i){var s=dr[i];return function(v,A){if(v=pn(v),A=A==null?0:Mr(ft(A),292),A&&Jf(v)){var F=(wt(v)+"e").split("e"),x=s(F[0]+"e"+(+F[1]+A));return F=(wt(x)+"e").split("e"),+(F[0]+"e"+(+F[1]-A))}return s(v)}}var pg=eu&&1/oa(new eu([,-0]))[1]==re?function(i){return new eu(i)}:Xo;function Vc(i){return function(s){var v=Pr(s);return v==tt?io(s):v==Tt?P1(s):w1(s,i(s))}}function Jn(i,s,v,A,F,x,U,K){var te=s&b;if(!te&&typeof i!="function")throw new ln(l);var ve=A?A.length:0;if(ve||(s&=~(S|O),A=F=r),U=U===r?U:pr(ft(U),0),K=K===r?K:ft(K),ve-=F?F.length:0,s&O){var ge=A,De=F;A=F=r}var Be=te?r:xo(i),Le=[i,s,v,A,F,ge,De,x,U,K];if(Be&&Og(Le,Be),i=Le[0],s=Le[1],v=Le[2],A=Le[3],F=Le[4],K=Le[9]=Le[9]===r?te?0:i.length:pr(Le[9]-ve,0),!K&&s&(w|B)&&(s&=~(w|B)),!s||s==_)var Je=cg(i,s,v);else s==w||s==B?Je=hg(i,s,K):(s==S||s==(_|S))&&!F.length?Je=dg(i,s,v,A):Je=Ma.apply(r,Le);var ct=Be?bc:Xc;return Jc(ct(Je,Le),i,s)}function jc(i,s,v,A){return i===r||Fn(i,Qi[v])&&!St.call(A,v)?s:i}function qc(i,s,v,A,F,x){return $t(i)&&$t(s)&&(x.set(s,i),Fa(i,s,r,qc,x),x.delete(s)),i}function vg(i){return Zu(i)?r:i}function zc(i,s,v,A,F,x){var U=v&y,K=i.length,te=s.length;if(K!=te&&!(U&&te>K))return!1;var ve=x.get(i),ge=x.get(s);if(ve&&ge)return ve==s&&ge==i;var De=-1,Be=!0,Le=v&g?new Ri:r;for(x.set(i,s),x.set(s,i);++De<K;){var Je=i[De],ct=s[De];if(A)var Qe=U?A(ct,Je,De,s,i,x):A(Je,ct,De,i,s,x);if(Qe!==r){if(Qe)continue;Be=!1;break}if(Le){if(!Js(s,function(dt,bt){if(!Nu(Le,bt)&&(Je===dt||F(Je,dt,v,A,x)))return Le.push(bt)})){Be=!1;break}}else if(!(Je===ct||F(Je,ct,v,A,x))){Be=!1;break}}return x.delete(i),x.delete(s),Be}function gg(i,s,v,A,F,x,U){switch(v){case pe:if(i.byteLength!=s.byteLength||i.byteOffset!=s.byteOffset)return!1;i=i.buffer,s=s.buffer;case ne:return!(i.byteLength!=s.byteLength||!x(new pa(i),new pa(s)));case qe:case Te:case rt:return Fn(+i,+s);case lt:return i.name==s.name&&i.message==s.message;case yt:case zt:return i==s+"";case tt:var K=io;case Tt:var te=A&y;if(K||(K=oa),i.size!=s.size&&!te)return!1;var ve=U.get(i);if(ve)return ve==s;A|=g,U.set(i,s);var ge=zc(K(i),K(s),A,F,x,U);return U.delete(i),ge;case R:if(Vu)return Vu.call(i)==Vu.call(s)}return!1}function mg(i,s,v,A,F,x){var U=v&y,K=Mo(i),te=K.length,ve=Mo(s),ge=ve.length;if(te!=ge&&!U)return!1;for(var De=te;De--;){var Be=K[De];if(!(U?Be in s:St.call(s,Be)))return!1}var Le=x.get(i),Je=x.get(s);if(Le&&Je)return Le==s&&Je==i;var ct=!0;x.set(i,s),x.set(s,i);for(var Qe=U;++De<te;){Be=K[De];var dt=i[Be],bt=s[Be];if(A)var Jr=U?A(bt,dt,Be,s,i,x):A(dt,bt,Be,i,s,x);if(!(Jr===r?dt===bt||F(dt,bt,v,A,x):Jr)){ct=!1;break}Qe||(Qe=Be=="constructor")}if(ct&&!Qe){var Rr=i.constructor,Qr=s.constructor;Rr!=Qr&&"constructor"in i&&"constructor"in s&&!(typeof Rr=="function"&&Rr instanceof Rr&&typeof Qr=="function"&&Qr instanceof Qr)&&(ct=!1)}return x.delete(i),x.delete(s),ct}function Qn(i){return Lo(Zc(i,r,ih),i+"")}function Mo(i){return lc(i,Dr,Io)}function Po(i){return lc(i,qr,Wc)}var xo=ba?function(i){return ba.get(i)}:Xo;function Ia(i){for(var s=i.name+"",v=tu[s],A=St.call(tu,s)?v.length:0;A--;){var F=v[A],x=F.func;if(x==null||x==i)return F.name}return s}function uu(i){var s=St.call(M,"placeholder")?M:i;return s.placeholder}function He(){var i=M.iteratee||Zo;return i=i===Zo?hc:i,arguments.length?i(arguments[0],arguments[1]):i}function Na(i,s){var v=i.__data__;return Cg(s)?v[typeof s=="string"?"string":"hash"]:v.map}function To(i){for(var s=Dr(i),v=s.length;v--;){var A=s[v],F=i[A];s[v]=[A,F,Kc(F)]}return s}function Vi(i,s){var v=B1(i,s);return cc(v)?v:r}function _g(i){var s=St.call(i,Ni),v=i[Ni];try{i[Ni]=r;var A=!0}catch{}var F=ha.call(i);return A&&(s?i[Ni]=v:delete i[Ni]),F}var Io=ao?function(i){return i==null?[]:(i=It(i),fi(ao(i),function(s){return $f.call(i,s)}))}:Jo,Wc=ao?function(i){for(var s=[];i;)ci(s,Io(i)),i=va(i);return s}:Jo,Pr=Nr;(so&&Pr(new so(new ArrayBuffer(1)))!=pe||Ru&&Pr(new Ru)!=tt||oo&&Pr(oo.resolve())!=Ae||eu&&Pr(new eu)!=Tt||Lu&&Pr(new Lu)!=Z)&&(Pr=function(i){var s=Nr(i),v=s==We?i.constructor:r,A=v?ji(v):"";if(A)switch(A){case ev:return pe;case tv:return tt;case rv:return Ae;case nv:return Tt;case iv:return Z}return s});function Dg(i,s,v){for(var A=-1,F=v.length;++A<F;){var x=v[A],U=x.size;switch(x.type){case"drop":i+=U;break;case"dropRight":s-=U;break;case"take":s=Mr(s,i+U);break;case"takeRight":i=pr(i,s-U);break}}return{start:i,end:s}}function bg(i){var s=i.match(si);return s?s[1].split(un):[]}function Hc(i,s,v){s=gi(s,i);for(var A=-1,F=s.length,x=!1;++A<F;){var U=Vn(s[A]);if(!(x=i!=null&&v(i,U)))break;i=i[U]}return x||++A!=F?x:(F=i==null?0:i.length,!!F&&qa(F)&&ei(U,F)&&(st(i)||qi(i)))}function yg(i){var s=i.length,v=new i.constructor(s);return s&&typeof i[0]=="string"&&St.call(i,"index")&&(v.index=i.index,v.input=i.input),v}function Gc(i){return typeof i.constructor=="function"&&!Ku(i)?ru(va(i)):{}}function Ag(i,s,v){var A=i.constructor;switch(s){case ne:return So(i);case qe:case Te:return new A(+i);case pe:return ug(i,v);case ue:case ce:case ye:case Oe:case Xe:case Ee:case Ut:case Ft:case tr:return Bc(i,v);case tt:return new A;case rt:case zt:return new A(i);case yt:return ag(i);case Tt:return new A;case R:return sg(i)}}function wg(i,s){var v=s.length;if(!v)return i;var A=v-1;return s[A]=(v>1?"& ":"")+s[A],s=s.join(v>2?", ":" "),i.replace(yu,`{
/* [wrapped with `+s+`] */
`)}function Eg(i){return st(i)||qi(i)||!!(Xf&&i&&i[Xf])}function ei(i,s){var v=typeof i;return s=s??ee,!!s&&(v=="number"||v!="symbol"&&Bu.test(i))&&i>-1&&i%1==0&&i<s}function kr(i,s,v){if(!$t(v))return!1;var A=typeof s;return(A=="number"?jr(v)&&ei(s,v.length):A=="string"&&s in v)?Fn(v[s],i):!1}function No(i,s){if(st(i))return!1;var v=typeof i;return v=="number"||v=="symbol"||v=="boolean"||i==null||Xr(i)?!0:Nn.test(i)||!In.test(i)||s!=null&&i in It(s)}function Cg(i){var s=typeof i;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?i!=="__proto__":i===null}function ko(i){var s=Ia(i),v=M[s];if(typeof v!="function"||!(s in _t.prototype))return!1;if(i===v)return!0;var A=xo(v);return!!A&&i===A[0]}function Fg(i){return!!Kf&&Kf in i}var Sg=fa?ti:Qo;function Ku(i){var s=i&&i.constructor,v=typeof s=="function"&&s.prototype||Qi;return i===v}function Kc(i){return i===i&&!$t(i)}function Yc(i,s){return function(v){return v==null?!1:v[i]===s&&(s!==r||i in It(v))}}function Bg(i){var s=Va(i,function(A){return v.size===p&&v.clear(),A}),v=s.cache;return s}function Og(i,s){var v=i[1],A=s[1],F=v|A,x=F<(_|b|P),U=A==P&&v==w||A==P&&v==I&&i[7].length<=s[8]||A==(P|I)&&s[7].length<=s[8]&&v==w;if(!(x||U))return i;A&_&&(i[2]=s[2],F|=v&_?0:C);var K=s[3];if(K){var te=i[3];i[3]=te?Mc(te,K,s[4]):K,i[4]=te?hi(i[3],f):s[4]}return K=s[5],K&&(te=i[5],i[5]=te?Pc(te,K,s[6]):K,i[6]=te?hi(i[5],f):s[6]),K=s[7],K&&(i[7]=K),A&P&&(i[8]=i[8]==null?s[8]:Mr(i[8],s[8])),i[9]==null&&(i[9]=s[9]),i[0]=s[0],i[1]=F,i}function Mg(i){var s=[];if(i!=null)for(var v in It(i))s.push(v);return s}function Pg(i){return ha.call(i)}function Zc(i,s,v){return s=pr(s===r?i.length-1:s,0),function(){for(var A=arguments,F=-1,x=pr(A.length-s,0),U=ae(x);++F<x;)U[F]=A[s+F];F=-1;for(var K=ae(s+1);++F<s;)K[F]=A[F];return K[s]=v(U),Yr(i,this,K)}}function $c(i,s){return s.length<2?i:Ui(i,hn(s,0,-1))}function xg(i,s){for(var v=i.length,A=Mr(s.length,v),F=Vr(i);A--;){var x=s[A];i[A]=ei(x,v)?F[x]:r}return i}function Ro(i,s){if(!(s==="constructor"&&typeof i[s]=="function")&&s!="__proto__")return i[s]}var Xc=Qc(bc),Yu=K1||function(i,s){return Er.setTimeout(i,s)},Lo=Qc(tg);function Jc(i,s,v){var A=s+"";return Lo(i,wg(A,Tg(bg(A),v)))}function Qc(i){var s=0,v=0;return function(){var A=X1(),F=$-(A-v);if(v=A,F>0){if(++s>=q)return arguments[0]}else s=0;return i.apply(r,arguments)}}function ka(i,s){var v=-1,A=i.length,F=A-1;for(s=s===r?A:s;++v<s;){var x=bo(v,F),U=i[x];i[x]=i[v],i[v]=U}return i.length=s,i}var eh=Bg(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(Hi,function(v,A,F,x){s.push(F?x.replace(Au,"$1"):A||v)}),s});function Vn(i){if(typeof i=="string"||Xr(i))return i;var s=i+"";return s=="0"&&1/i==-re?"-0":s}function ji(i){if(i!=null){try{return ca.call(i)}catch{}try{return i+""}catch{}}return""}function Tg(i,s){return on(Ne,function(v){var A="_."+v[0];s&v[1]&&!aa(i,A)&&i.push(A)}),i.sort()}function th(i){if(i instanceof _t)return i.clone();var s=new fn(i.__wrapped__,i.__chain__);return s.__actions__=Vr(i.__actions__),s.__index__=i.__index__,s.__values__=i.__values__,s}function Ig(i,s,v){(v?kr(i,s,v):s===r)?s=1:s=pr(ft(s),0);var A=i==null?0:i.length;if(!A||s<1)return[];for(var F=0,x=0,U=ae(_a(A/s));F<A;)U[x++]=hn(i,F,F+=s);return U}function Ng(i){for(var s=-1,v=i==null?0:i.length,A=0,F=[];++s<v;){var x=i[s];x&&(F[A++]=x)}return F}function kg(){var i=arguments.length;if(!i)return[];for(var s=ae(i-1),v=arguments[0],A=i;A--;)s[A-1]=arguments[A];return ci(st(v)?Vr(v):[v],Cr(s,1))}var Rg=ht(function(i,s){return sr(i)?qu(i,Cr(s,1,sr,!0)):[]}),Lg=ht(function(i,s){var v=dn(s);return sr(v)&&(v=r),sr(i)?qu(i,Cr(s,1,sr,!0),He(v,2)):[]}),Ug=ht(function(i,s){var v=dn(s);return sr(v)&&(v=r),sr(i)?qu(i,Cr(s,1,sr,!0),r,v):[]});function Vg(i,s,v){var A=i==null?0:i.length;return A?(s=v||s===r?1:ft(s),hn(i,s<0?0:s,A)):[]}function jg(i,s,v){var A=i==null?0:i.length;return A?(s=v||s===r?1:ft(s),s=A-s,hn(i,0,s<0?0:s)):[]}function qg(i,s){return i&&i.length?Ba(i,He(s,3),!0,!0):[]}function zg(i,s){return i&&i.length?Ba(i,He(s,3),!0):[]}function Wg(i,s,v,A){var F=i==null?0:i.length;return F?(v&&typeof v!="number"&&kr(i,s,v)&&(v=0,A=F),kv(i,s,v,A)):[]}function rh(i,s,v){var A=i==null?0:i.length;if(!A)return-1;var F=v==null?0:ft(v);return F<0&&(F=pr(A+F,0)),sa(i,He(s,3),F)}function nh(i,s,v){var A=i==null?0:i.length;if(!A)return-1;var F=A-1;return v!==r&&(F=ft(v),F=v<0?pr(A+F,0):Mr(F,A-1)),sa(i,He(s,3),F,!0)}function ih(i){var s=i==null?0:i.length;return s?Cr(i,1):[]}function Hg(i){var s=i==null?0:i.length;return s?Cr(i,re):[]}function Gg(i,s){var v=i==null?0:i.length;return v?(s=s===r?1:ft(s),Cr(i,s)):[]}function Kg(i){for(var s=-1,v=i==null?0:i.length,A={};++s<v;){var F=i[s];A[F[0]]=F[1]}return A}function uh(i){return i&&i.length?i[0]:r}function Yg(i,s,v){var A=i==null?0:i.length;if(!A)return-1;var F=v==null?0:ft(v);return F<0&&(F=pr(A+F,0)),Zi(i,s,F)}function Zg(i){var s=i==null?0:i.length;return s?hn(i,0,-1):[]}var $g=ht(function(i){var s=Gt(i,Co);return s.length&&s[0]===i[0]?vo(s):[]}),Xg=ht(function(i){var s=dn(i),v=Gt(i,Co);return s===dn(v)?s=r:v.pop(),v.length&&v[0]===i[0]?vo(v,He(s,2)):[]}),Jg=ht(function(i){var s=dn(i),v=Gt(i,Co);return s=typeof s=="function"?s:r,s&&v.pop(),v.length&&v[0]===i[0]?vo(v,r,s):[]});function Qg(i,s){return i==null?"":Z1.call(i,s)}function dn(i){var s=i==null?0:i.length;return s?i[s-1]:r}function em(i,s,v){var A=i==null?0:i.length;if(!A)return-1;var F=A;return v!==r&&(F=ft(v),F=F<0?pr(A+F,0):Mr(F,A-1)),s===s?T1(i,s,F):sa(i,Uf,F,!0)}function tm(i,s){return i&&i.length?gc(i,ft(s)):r}var rm=ht(ah);function ah(i,s){return i&&i.length&&s&&s.length?Do(i,s):i}function nm(i,s,v){return i&&i.length&&s&&s.length?Do(i,s,He(v,2)):i}function im(i,s,v){return i&&i.length&&s&&s.length?Do(i,s,r,v):i}var um=Qn(function(i,s){var v=i==null?0:i.length,A=fo(i,s);return Dc(i,Gt(s,function(F){return ei(F,v)?+F:F}).sort(Oc)),A});function am(i,s){var v=[];if(!(i&&i.length))return v;var A=-1,F=[],x=i.length;for(s=He(s,3);++A<x;){var U=i[A];s(U,A,i)&&(v.push(U),F.push(A))}return Dc(i,F),v}function Uo(i){return i==null?i:Q1.call(i)}function sm(i,s,v){var A=i==null?0:i.length;return A?(v&&typeof v!="number"&&kr(i,s,v)?(s=0,v=A):(s=s==null?0:ft(s),v=v===r?A:ft(v)),hn(i,s,v)):[]}function om(i,s){return Sa(i,s)}function lm(i,s,v){return Ao(i,s,He(v,2))}function fm(i,s){var v=i==null?0:i.length;if(v){var A=Sa(i,s);if(A<v&&Fn(i[A],s))return A}return-1}function cm(i,s){return Sa(i,s,!0)}function hm(i,s,v){return Ao(i,s,He(v,2),!0)}function dm(i,s){var v=i==null?0:i.length;if(v){var A=Sa(i,s,!0)-1;if(Fn(i[A],s))return A}return-1}function pm(i){return i&&i.length?yc(i):[]}function vm(i,s){return i&&i.length?yc(i,He(s,2)):[]}function gm(i){var s=i==null?0:i.length;return s?hn(i,1,s):[]}function mm(i,s,v){return i&&i.length?(s=v||s===r?1:ft(s),hn(i,0,s<0?0:s)):[]}function _m(i,s,v){var A=i==null?0:i.length;return A?(s=v||s===r?1:ft(s),s=A-s,hn(i,s<0?0:s,A)):[]}function Dm(i,s){return i&&i.length?Ba(i,He(s,3),!1,!0):[]}function bm(i,s){return i&&i.length?Ba(i,He(s,3)):[]}var ym=ht(function(i){return vi(Cr(i,1,sr,!0))}),Am=ht(function(i){var s=dn(i);return sr(s)&&(s=r),vi(Cr(i,1,sr,!0),He(s,2))}),wm=ht(function(i){var s=dn(i);return s=typeof s=="function"?s:r,vi(Cr(i,1,sr,!0),r,s)});function Em(i){return i&&i.length?vi(i):[]}function Cm(i,s){return i&&i.length?vi(i,He(s,2)):[]}function Fm(i,s){return s=typeof s=="function"?s:r,i&&i.length?vi(i,r,s):[]}function Vo(i){if(!(i&&i.length))return[];var s=0;return i=fi(i,function(v){if(sr(v))return s=pr(v.length,s),!0}),ro(s,function(v){return Gt(i,Qs(v))})}function sh(i,s){if(!(i&&i.length))return[];var v=Vo(i);return s==null?v:Gt(v,function(A){return Yr(s,r,A)})}var Sm=ht(function(i,s){return sr(i)?qu(i,s):[]}),Bm=ht(function(i){return Eo(fi(i,sr))}),Om=ht(function(i){var s=dn(i);return sr(s)&&(s=r),Eo(fi(i,sr),He(s,2))}),Mm=ht(function(i){var s=dn(i);return s=typeof s=="function"?s:r,Eo(fi(i,sr),r,s)}),Pm=ht(Vo);function xm(i,s){return Cc(i||[],s||[],ju)}function Tm(i,s){return Cc(i||[],s||[],Hu)}var Im=ht(function(i){var s=i.length,v=s>1?i[s-1]:r;return v=typeof v=="function"?(i.pop(),v):r,sh(i,v)});function oh(i){var s=M(i);return s.__chain__=!0,s}function Nm(i,s){return s(i),i}function Ra(i,s){return s(i)}var km=Qn(function(i){var s=i.length,v=s?i[0]:0,A=this.__wrapped__,F=function(x){return fo(x,i)};return s>1||this.__actions__.length||!(A instanceof _t)||!ei(v)?this.thru(F):(A=A.slice(v,+v+(s?1:0)),A.__actions__.push({func:Ra,args:[F],thisArg:r}),new fn(A,this.__chain__).thru(function(x){return s&&!x.length&&x.push(r),x}))});function Rm(){return oh(this)}function Lm(){return new fn(this.value(),this.__chain__)}function Um(){this.__values__===r&&(this.__values__=Ah(this.value()));var i=this.__index__>=this.__values__.length,s=i?r:this.__values__[this.__index__++];return{done:i,value:s}}function Vm(){return this}function jm(i){for(var s,v=this;v instanceof Aa;){var A=th(v);A.__index__=0,A.__values__=r,s?F.__wrapped__=A:s=A;var F=A;v=v.__wrapped__}return F.__wrapped__=i,s}function qm(){var i=this.__wrapped__;if(i instanceof _t){var s=i;return this.__actions__.length&&(s=new _t(this)),s=s.reverse(),s.__actions__.push({func:Ra,args:[Uo],thisArg:r}),new fn(s,this.__chain__)}return this.thru(Uo)}function zm(){return Ec(this.__wrapped__,this.__actions__)}var Wm=Oa(function(i,s,v){St.call(i,v)?++i[v]:Xn(i,v,1)});function Hm(i,s,v){var A=st(i)?Rf:Nv;return v&&kr(i,s,v)&&(s=r),A(i,He(s,3))}function Gm(i,s){var v=st(i)?fi:sc;return v(i,He(s,3))}var Km=Nc(rh),Ym=Nc(nh);function Zm(i,s){return Cr(La(i,s),1)}function $m(i,s){return Cr(La(i,s),re)}function Xm(i,s,v){return v=v===r?1:ft(v),Cr(La(i,s),v)}function lh(i,s){var v=st(i)?on:pi;return v(i,He(s,3))}function fh(i,s){var v=st(i)?g1:ac;return v(i,He(s,3))}var Jm=Oa(function(i,s,v){St.call(i,v)?i[v].push(s):Xn(i,v,[s])});function Qm(i,s,v,A){i=jr(i)?i:su(i),v=v&&!A?ft(v):0;var F=i.length;return v<0&&(v=pr(F+v,0)),za(i)?v<=F&&i.indexOf(s,v)>-1:!!F&&Zi(i,s,v)>-1}var e_=ht(function(i,s,v){var A=-1,F=typeof s=="function",x=jr(i)?ae(i.length):[];return pi(i,function(U){x[++A]=F?Yr(s,U,v):zu(U,s,v)}),x}),t_=Oa(function(i,s,v){Xn(i,v,s)});function La(i,s){var v=st(i)?Gt:dc;return v(i,He(s,3))}function r_(i,s,v,A){return i==null?[]:(st(s)||(s=s==null?[]:[s]),v=A?r:v,st(v)||(v=v==null?[]:[v]),mc(i,s,v))}var n_=Oa(function(i,s,v){i[v?0:1].push(s)},function(){return[[],[]]});function i_(i,s,v){var A=st(i)?Xs:jf,F=arguments.length<3;return A(i,He(s,4),v,F,pi)}function u_(i,s,v){var A=st(i)?m1:jf,F=arguments.length<3;return A(i,He(s,4),v,F,ac)}function a_(i,s){var v=st(i)?fi:sc;return v(i,ja(He(s,3)))}function s_(i){var s=st(i)?rc:Qv;return s(i)}function o_(i,s,v){(v?kr(i,s,v):s===r)?s=1:s=ft(s);var A=st(i)?Mv:eg;return A(i,s)}function l_(i){var s=st(i)?Pv:rg;return s(i)}function f_(i){if(i==null)return 0;if(jr(i))return za(i)?Xi(i):i.length;var s=Pr(i);return s==tt||s==Tt?i.size:mo(i).length}function c_(i,s,v){var A=st(i)?Js:ng;return v&&kr(i,s,v)&&(s=r),A(i,He(s,3))}var h_=ht(function(i,s){if(i==null)return[];var v=s.length;return v>1&&kr(i,s[0],s[1])?s=[]:v>2&&kr(s[0],s[1],s[2])&&(s=[s[0]]),mc(i,Cr(s,1),[])}),Ua=G1||function(){return Er.Date.now()};function d_(i,s){if(typeof s!="function")throw new ln(l);return i=ft(i),function(){if(--i<1)return s.apply(this,arguments)}}function ch(i,s,v){return s=v?r:s,s=i&&s==null?i.length:s,Jn(i,P,r,r,r,r,s)}function hh(i,s){var v;if(typeof s!="function")throw new ln(l);return i=ft(i),function(){return--i>0&&(v=s.apply(this,arguments)),i<=1&&(s=r),v}}var jo=ht(function(i,s,v){var A=_;if(v.length){var F=hi(v,uu(jo));A|=S}return Jn(i,A,s,v,F)}),dh=ht(function(i,s,v){var A=_|b;if(v.length){var F=hi(v,uu(dh));A|=S}return Jn(s,A,i,v,F)});function ph(i,s,v){s=v?r:s;var A=Jn(i,w,r,r,r,r,r,s);return A.placeholder=ph.placeholder,A}function vh(i,s,v){s=v?r:s;var A=Jn(i,B,r,r,r,r,r,s);return A.placeholder=vh.placeholder,A}function gh(i,s,v){var A,F,x,U,K,te,ve=0,ge=!1,De=!1,Be=!0;if(typeof i!="function")throw new ln(l);s=pn(s)||0,$t(v)&&(ge=!!v.leading,De="maxWait"in v,x=De?pr(pn(v.maxWait)||0,s):x,Be="trailing"in v?!!v.trailing:Be);function Le(or){var Sn=A,ni=F;return A=F=r,ve=or,U=i.apply(ni,Sn),U}function Je(or){return ve=or,K=Yu(dt,s),ge?Le(or):U}function ct(or){var Sn=or-te,ni=or-ve,Nh=s-Sn;return De?Mr(Nh,x-ni):Nh}function Qe(or){var Sn=or-te,ni=or-ve;return te===r||Sn>=s||Sn<0||De&&ni>=x}function dt(){var or=Ua();if(Qe(or))return bt(or);K=Yu(dt,ct(or))}function bt(or){return K=r,Be&&A?Le(or):(A=F=r,U)}function Jr(){K!==r&&Fc(K),ve=0,A=te=F=K=r}function Rr(){return K===r?U:bt(Ua())}function Qr(){var or=Ua(),Sn=Qe(or);if(A=arguments,F=this,te=or,Sn){if(K===r)return Je(te);if(De)return Fc(K),K=Yu(dt,s),Le(te)}return K===r&&(K=Yu(dt,s)),U}return Qr.cancel=Jr,Qr.flush=Rr,Qr}var p_=ht(function(i,s){return uc(i,1,s)}),v_=ht(function(i,s,v){return uc(i,pn(s)||0,v)});function g_(i){return Jn(i,N)}function Va(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new ln(l);var v=function(){var A=arguments,F=s?s.apply(this,A):A[0],x=v.cache;if(x.has(F))return x.get(F);var U=i.apply(this,A);return v.cache=x.set(F,U)||x,U};return v.cache=new(Va.Cache||$n),v}Va.Cache=$n;function ja(i){if(typeof i!="function")throw new ln(l);return function(){var s=arguments;switch(s.length){case 0:return!i.call(this);case 1:return!i.call(this,s[0]);case 2:return!i.call(this,s[0],s[1]);case 3:return!i.call(this,s[0],s[1],s[2])}return!i.apply(this,s)}}function m_(i){return hh(2,i)}var __=ig(function(i,s){s=s.length==1&&st(s[0])?Gt(s[0],Zr(He())):Gt(Cr(s,1),Zr(He()));var v=s.length;return ht(function(A){for(var F=-1,x=Mr(A.length,v);++F<x;)A[F]=s[F].call(this,A[F]);return Yr(i,this,A)})}),qo=ht(function(i,s){var v=hi(s,uu(qo));return Jn(i,S,r,s,v)}),mh=ht(function(i,s){var v=hi(s,uu(mh));return Jn(i,O,r,s,v)}),D_=Qn(function(i,s){return Jn(i,I,r,r,r,s)});function b_(i,s){if(typeof i!="function")throw new ln(l);return s=s===r?s:ft(s),ht(i,s)}function y_(i,s){if(typeof i!="function")throw new ln(l);return s=s==null?0:pr(ft(s),0),ht(function(v){var A=v[s],F=mi(v,0,s);return A&&ci(F,A),Yr(i,this,F)})}function A_(i,s,v){var A=!0,F=!0;if(typeof i!="function")throw new ln(l);return $t(v)&&(A="leading"in v?!!v.leading:A,F="trailing"in v?!!v.trailing:F),gh(i,s,{leading:A,maxWait:s,trailing:F})}function w_(i){return ch(i,1)}function E_(i,s){return qo(Fo(s),i)}function C_(){if(!arguments.length)return[];var i=arguments[0];return st(i)?i:[i]}function F_(i){return cn(i,m)}function S_(i,s){return s=typeof s=="function"?s:r,cn(i,m,s)}function B_(i){return cn(i,c|m)}function O_(i,s){return s=typeof s=="function"?s:r,cn(i,c|m,s)}function M_(i,s){return s==null||ic(i,s,Dr(s))}function Fn(i,s){return i===s||i!==i&&s!==s}var P_=Ta(po),x_=Ta(function(i,s){return i>=s}),qi=fc(function(){return arguments}())?fc:function(i){return nr(i)&&St.call(i,"callee")&&!$f.call(i,"callee")},st=ae.isArray,T_=Pf?Zr(Pf):jv;function jr(i){return i!=null&&qa(i.length)&&!ti(i)}function sr(i){return nr(i)&&jr(i)}function I_(i){return i===!0||i===!1||nr(i)&&Nr(i)==qe}var _i=Y1||Qo,N_=xf?Zr(xf):qv;function k_(i){return nr(i)&&i.nodeType===1&&!Zu(i)}function R_(i){if(i==null)return!0;if(jr(i)&&(st(i)||typeof i=="string"||typeof i.splice=="function"||_i(i)||au(i)||qi(i)))return!i.length;var s=Pr(i);if(s==tt||s==Tt)return!i.size;if(Ku(i))return!mo(i).length;for(var v in i)if(St.call(i,v))return!1;return!0}function L_(i,s){return Wu(i,s)}function U_(i,s,v){v=typeof v=="function"?v:r;var A=v?v(i,s):r;return A===r?Wu(i,s,r,v):!!A}function zo(i){if(!nr(i))return!1;var s=Nr(i);return s==lt||s==Re||typeof i.message=="string"&&typeof i.name=="string"&&!Zu(i)}function V_(i){return typeof i=="number"&&Jf(i)}function ti(i){if(!$t(i))return!1;var s=Nr(i);return s==et||s==ut||s==it||s==we}function _h(i){return typeof i=="number"&&i==ft(i)}function qa(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=ee}function $t(i){var s=typeof i;return i!=null&&(s=="object"||s=="function")}function nr(i){return i!=null&&typeof i=="object"}var Dh=Tf?Zr(Tf):Wv;function j_(i,s){return i===s||go(i,s,To(s))}function q_(i,s,v){return v=typeof v=="function"?v:r,go(i,s,To(s),v)}function z_(i){return bh(i)&&i!=+i}function W_(i){if(Sg(i))throw new at(a);return cc(i)}function H_(i){return i===null}function G_(i){return i==null}function bh(i){return typeof i=="number"||nr(i)&&Nr(i)==rt}function Zu(i){if(!nr(i)||Nr(i)!=We)return!1;var s=va(i);if(s===null)return!0;var v=St.call(s,"constructor")&&s.constructor;return typeof v=="function"&&v instanceof v&&ca.call(v)==q1}var Wo=If?Zr(If):Hv;function K_(i){return _h(i)&&i>=-ee&&i<=ee}var yh=Nf?Zr(Nf):Gv;function za(i){return typeof i=="string"||!st(i)&&nr(i)&&Nr(i)==zt}function Xr(i){return typeof i=="symbol"||nr(i)&&Nr(i)==R}var au=kf?Zr(kf):Kv;function Y_(i){return i===r}function Z_(i){return nr(i)&&Pr(i)==Z}function $_(i){return nr(i)&&Nr(i)==fe}var X_=Ta(_o),J_=Ta(function(i,s){return i<=s});function Ah(i){if(!i)return[];if(jr(i))return za(i)?En(i):Vr(i);if(ku&&i[ku])return M1(i[ku]());var s=Pr(i),v=s==tt?io:s==Tt?oa:su;return v(i)}function ri(i){if(!i)return i===0?i:0;if(i=pn(i),i===re||i===-re){var s=i<0?-1:1;return s*Q}return i===i?i:0}function ft(i){var s=ri(i),v=s%1;return s===s?v?s-v:s:0}function wh(i){return i?Li(ft(i),0,me):0}function pn(i){if(typeof i=="number")return i;if(Xr(i))return le;if($t(i)){var s=typeof i.valueOf=="function"?i.valueOf():i;i=$t(s)?s+"":s}if(typeof i!="string")return i===0?i:+i;i=qf(i);var v=Cu.test(i);return v||Su.test(i)?d1(i.slice(2),v?2:8):Eu.test(i)?le:+i}function Eh(i){return Un(i,qr(i))}function Q_(i){return i?Li(ft(i),-ee,ee):i===0?i:0}function wt(i){return i==null?"":$r(i)}var eD=nu(function(i,s){if(Ku(s)||jr(s)){Un(s,Dr(s),i);return}for(var v in s)St.call(s,v)&&ju(i,v,s[v])}),Ch=nu(function(i,s){Un(s,qr(s),i)}),Wa=nu(function(i,s,v,A){Un(s,qr(s),i,A)}),tD=nu(function(i,s,v,A){Un(s,Dr(s),i,A)}),rD=Qn(fo);function nD(i,s){var v=ru(i);return s==null?v:nc(v,s)}var iD=ht(function(i,s){i=It(i);var v=-1,A=s.length,F=A>2?s[2]:r;for(F&&kr(s[0],s[1],F)&&(A=1);++v<A;)for(var x=s[v],U=qr(x),K=-1,te=U.length;++K<te;){var ve=U[K],ge=i[ve];(ge===r||Fn(ge,Qi[ve])&&!St.call(i,ve))&&(i[ve]=x[ve])}return i}),uD=ht(function(i){return i.push(r,qc),Yr(Fh,r,i)});function aD(i,s){return Lf(i,He(s,3),Ln)}function sD(i,s){return Lf(i,He(s,3),ho)}function oD(i,s){return i==null?i:co(i,He(s,3),qr)}function lD(i,s){return i==null?i:oc(i,He(s,3),qr)}function fD(i,s){return i&&Ln(i,He(s,3))}function cD(i,s){return i&&ho(i,He(s,3))}function hD(i){return i==null?[]:Ca(i,Dr(i))}function dD(i){return i==null?[]:Ca(i,qr(i))}function Ho(i,s,v){var A=i==null?r:Ui(i,s);return A===r?v:A}function pD(i,s){return i!=null&&Hc(i,s,Rv)}function Go(i,s){return i!=null&&Hc(i,s,Lv)}var vD=Rc(function(i,s,v){s!=null&&typeof s.toString!="function"&&(s=ha.call(s)),i[s]=v},Yo(zr)),gD=Rc(function(i,s,v){s!=null&&typeof s.toString!="function"&&(s=ha.call(s)),St.call(i,s)?i[s].push(v):i[s]=[v]},He),mD=ht(zu);function Dr(i){return jr(i)?tc(i):mo(i)}function qr(i){return jr(i)?tc(i,!0):Yv(i)}function _D(i,s){var v={};return s=He(s,3),Ln(i,function(A,F,x){Xn(v,s(A,F,x),A)}),v}function DD(i,s){var v={};return s=He(s,3),Ln(i,function(A,F,x){Xn(v,F,s(A,F,x))}),v}var bD=nu(function(i,s,v){Fa(i,s,v)}),Fh=nu(function(i,s,v,A){Fa(i,s,v,A)}),yD=Qn(function(i,s){var v={};if(i==null)return v;var A=!1;s=Gt(s,function(x){return x=gi(x,i),A||(A=x.length>1),x}),Un(i,Po(i),v),A&&(v=cn(v,c|d|m,vg));for(var F=s.length;F--;)wo(v,s[F]);return v});function AD(i,s){return Sh(i,ja(He(s)))}var wD=Qn(function(i,s){return i==null?{}:$v(i,s)});function Sh(i,s){if(i==null)return{};var v=Gt(Po(i),function(A){return[A]});return s=He(s),_c(i,v,function(A,F){return s(A,F[0])})}function ED(i,s,v){s=gi(s,i);var A=-1,F=s.length;for(F||(F=1,i=r);++A<F;){var x=i==null?r:i[Vn(s[A])];x===r&&(A=F,x=v),i=ti(x)?x.call(i):x}return i}function CD(i,s,v){return i==null?i:Hu(i,s,v)}function FD(i,s,v,A){return A=typeof A=="function"?A:r,i==null?i:Hu(i,s,v,A)}var Bh=Vc(Dr),Oh=Vc(qr);function SD(i,s,v){var A=st(i),F=A||_i(i)||au(i);if(s=He(s,4),v==null){var x=i&&i.constructor;F?v=A?new x:[]:$t(i)?v=ti(x)?ru(va(i)):{}:v={}}return(F?on:Ln)(i,function(U,K,te){return s(v,U,K,te)}),v}function BD(i,s){return i==null?!0:wo(i,s)}function OD(i,s,v){return i==null?i:wc(i,s,Fo(v))}function MD(i,s,v,A){return A=typeof A=="function"?A:r,i==null?i:wc(i,s,Fo(v),A)}function su(i){return i==null?[]:no(i,Dr(i))}function PD(i){return i==null?[]:no(i,qr(i))}function xD(i,s,v){return v===r&&(v=s,s=r),v!==r&&(v=pn(v),v=v===v?v:0),s!==r&&(s=pn(s),s=s===s?s:0),Li(pn(i),s,v)}function TD(i,s,v){return s=ri(s),v===r?(v=s,s=0):v=ri(v),i=pn(i),Uv(i,s,v)}function ID(i,s,v){if(v&&typeof v!="boolean"&&kr(i,s,v)&&(s=v=r),v===r&&(typeof s=="boolean"?(v=s,s=r):typeof i=="boolean"&&(v=i,i=r)),i===r&&s===r?(i=0,s=1):(i=ri(i),s===r?(s=i,i=0):s=ri(s)),i>s){var A=i;i=s,s=A}if(v||i%1||s%1){var F=Qf();return Mr(i+F*(s-i+h1("1e-"+((F+"").length-1))),s)}return bo(i,s)}var ND=iu(function(i,s,v){return s=s.toLowerCase(),i+(v?Mh(s):s)});function Mh(i){return Ko(wt(i).toLowerCase())}function Ph(i){return i=wt(i),i&&i.replace(Ou,C1).replace(r1,"")}function kD(i,s,v){i=wt(i),s=$r(s);var A=i.length;v=v===r?A:Li(ft(v),0,A);var F=v;return v-=s.length,v>=0&&i.slice(v,F)==s}function RD(i){return i=wt(i),i&&nn.test(i)?i.replace(lr,F1):i}function LD(i){return i=wt(i),i&&bu.test(i)?i.replace(Mi,"\\$&"):i}var UD=iu(function(i,s,v){return i+(v?"-":"")+s.toLowerCase()}),VD=iu(function(i,s,v){return i+(v?" ":"")+s.toLowerCase()}),jD=Ic("toLowerCase");function qD(i,s,v){i=wt(i),s=ft(s);var A=s?Xi(i):0;if(!s||A>=s)return i;var F=(s-A)/2;return xa(Da(F),v)+i+xa(_a(F),v)}function zD(i,s,v){i=wt(i),s=ft(s);var A=s?Xi(i):0;return s&&A<s?i+xa(s-A,v):i}function WD(i,s,v){i=wt(i),s=ft(s);var A=s?Xi(i):0;return s&&A<s?xa(s-A,v)+i:i}function HD(i,s,v){return v||s==null?s=0:s&&(s=+s),J1(wt(i).replace(wr,""),s||0)}function GD(i,s,v){return(v?kr(i,s,v):s===r)?s=1:s=ft(s),yo(wt(i),s)}function KD(){var i=arguments,s=wt(i[0]);return i.length<3?s:s.replace(i[1],i[2])}var YD=iu(function(i,s,v){return i+(v?"_":"")+s.toLowerCase()});function ZD(i,s,v){return v&&typeof v!="number"&&kr(i,s,v)&&(s=v=r),v=v===r?me:v>>>0,v?(i=wt(i),i&&(typeof s=="string"||s!=null&&!Wo(s))&&(s=$r(s),!s&&$i(i))?mi(En(i),0,v):i.split(s,v)):[]}var $D=iu(function(i,s,v){return i+(v?" ":"")+Ko(s)});function XD(i,s,v){return i=wt(i),v=v==null?0:Li(ft(v),0,i.length),s=$r(s),i.slice(v,v+s.length)==s}function JD(i,s,v){var A=M.templateSettings;v&&kr(i,s,v)&&(s=r),i=wt(i),s=Wa({},s,A,jc);var F=Wa({},s.imports,A.imports,jc),x=Dr(F),U=no(F,x),K,te,ve=0,ge=s.interpolate||oi,De="__p += '",Be=uo((s.escape||oi).source+"|"+ge.source+"|"+(ge===Gn?wu:oi).source+"|"+(s.evaluate||oi).source+"|$","g"),Le="//# sourceURL="+(St.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++s1+"]")+`
`;i.replace(Be,function(Qe,dt,bt,Jr,Rr,Qr){return bt||(bt=Jr),De+=i.slice(ve,Qr).replace(Mu,S1),dt&&(K=!0,De+=`' +
__e(`+dt+`) +
'`),Rr&&(te=!0,De+=`';
`+Rr+`;
__p += '`),bt&&(De+=`' +
((__t = (`+bt+`)) == null ? '' : __t) +
'`),ve=Qr+Qe.length,Qe}),De+=`';
`;var Je=St.call(s,"variable")&&s.variable;if(!Je)De=`with (obj) {
`+De+`
}
`;else if(Pi.test(Je))throw new at(o);De=(te?De.replace(Yt,""):De).replace(gr,"$1").replace(Zt,"$1;"),De="function("+(Je||"obj")+`) {
`+(Je?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(K?", __e = _.escape":"")+(te?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+De+`return __p
}`;var ct=Th(function(){return At(x,Le+"return "+De).apply(r,U)});if(ct.source=De,zo(ct))throw ct;return ct}function QD(i){return wt(i).toLowerCase()}function eb(i){return wt(i).toUpperCase()}function tb(i,s,v){if(i=wt(i),i&&(v||s===r))return qf(i);if(!i||!(s=$r(s)))return i;var A=En(i),F=En(s),x=zf(A,F),U=Wf(A,F)+1;return mi(A,x,U).join("")}function rb(i,s,v){if(i=wt(i),i&&(v||s===r))return i.slice(0,Gf(i)+1);if(!i||!(s=$r(s)))return i;var A=En(i),F=Wf(A,En(s))+1;return mi(A,0,F).join("")}function nb(i,s,v){if(i=wt(i),i&&(v||s===r))return i.replace(wr,"");if(!i||!(s=$r(s)))return i;var A=En(i),F=zf(A,En(s));return mi(A,F).join("")}function ib(i,s){var v=G,A=L;if($t(s)){var F="separator"in s?s.separator:F;v="length"in s?ft(s.length):v,A="omission"in s?$r(s.omission):A}i=wt(i);var x=i.length;if($i(i)){var U=En(i);x=U.length}if(v>=x)return i;var K=v-Xi(A);if(K<1)return A;var te=U?mi(U,0,K).join(""):i.slice(0,K);if(F===r)return te+A;if(U&&(K+=te.length-K),Wo(F)){if(i.slice(K).search(F)){var ve,ge=te;for(F.global||(F=uo(F.source,wt(Gi.exec(F))+"g")),F.lastIndex=0;ve=F.exec(ge);)var De=ve.index;te=te.slice(0,De===r?K:De)}}else if(i.indexOf($r(F),K)!=K){var Be=te.lastIndexOf(F);Be>-1&&(te=te.slice(0,Be))}return te+A}function ub(i){return i=wt(i),i&&fr.test(i)?i.replace(mr,I1):i}var ab=iu(function(i,s,v){return i+(v?" ":"")+s.toUpperCase()}),Ko=Ic("toUpperCase");function xh(i,s,v){return i=wt(i),s=v?r:s,s===r?O1(i)?R1(i):b1(i):i.match(s)||[]}var Th=ht(function(i,s){try{return Yr(i,r,s)}catch(v){return zo(v)?v:new at(v)}}),sb=Qn(function(i,s){return on(s,function(v){v=Vn(v),Xn(i,v,jo(i[v],i))}),i});function ob(i){var s=i==null?0:i.length,v=He();return i=s?Gt(i,function(A){if(typeof A[1]!="function")throw new ln(l);return[v(A[0]),A[1]]}):[],ht(function(A){for(var F=-1;++F<s;){var x=i[F];if(Yr(x[0],this,A))return Yr(x[1],this,A)}})}function lb(i){return Iv(cn(i,c))}function Yo(i){return function(){return i}}function fb(i,s){return i==null||i!==i?s:i}var cb=kc(),hb=kc(!0);function zr(i){return i}function Zo(i){return hc(typeof i=="function"?i:cn(i,c))}function db(i){return pc(cn(i,c))}function pb(i,s){return vc(i,cn(s,c))}var vb=ht(function(i,s){return function(v){return zu(v,i,s)}}),gb=ht(function(i,s){return function(v){return zu(i,v,s)}});function $o(i,s,v){var A=Dr(s),F=Ca(s,A);v==null&&!($t(s)&&(F.length||!A.length))&&(v=s,s=i,i=this,F=Ca(s,Dr(s)));var x=!($t(v)&&"chain"in v)||!!v.chain,U=ti(i);return on(F,function(K){var te=s[K];i[K]=te,U&&(i.prototype[K]=function(){var ve=this.__chain__;if(x||ve){var ge=i(this.__wrapped__),De=ge.__actions__=Vr(this.__actions__);return De.push({func:te,args:arguments,thisArg:i}),ge.__chain__=ve,ge}return te.apply(i,ci([this.value()],arguments))})}),i}function mb(){return Er._===this&&(Er._=z1),this}function Xo(){}function _b(i){return i=ft(i),ht(function(s){return gc(s,i)})}var Db=Bo(Gt),bb=Bo(Rf),yb=Bo(Js);function Ih(i){return No(i)?Qs(Vn(i)):Xv(i)}function Ab(i){return function(s){return i==null?r:Ui(i,s)}}var wb=Lc(),Eb=Lc(!0);function Jo(){return[]}function Qo(){return!1}function Cb(){return{}}function Fb(){return""}function Sb(){return!0}function Bb(i,s){if(i=ft(i),i<1||i>ee)return[];var v=me,A=Mr(i,me);s=He(s),i-=me;for(var F=ro(A,s);++v<i;)s(v);return F}function Ob(i){return st(i)?Gt(i,Vn):Xr(i)?[i]:Vr(eh(wt(i)))}function Mb(i){var s=++j1;return wt(i)+s}var Pb=Pa(function(i,s){return i+s},0),xb=Oo("ceil"),Tb=Pa(function(i,s){return i/s},1),Ib=Oo("floor");function Nb(i){return i&&i.length?Ea(i,zr,po):r}function kb(i,s){return i&&i.length?Ea(i,He(s,2),po):r}function Rb(i){return Vf(i,zr)}function Lb(i,s){return Vf(i,He(s,2))}function Ub(i){return i&&i.length?Ea(i,zr,_o):r}function Vb(i,s){return i&&i.length?Ea(i,He(s,2),_o):r}var jb=Pa(function(i,s){return i*s},1),qb=Oo("round"),zb=Pa(function(i,s){return i-s},0);function Wb(i){return i&&i.length?to(i,zr):0}function Hb(i,s){return i&&i.length?to(i,He(s,2)):0}return M.after=d_,M.ary=ch,M.assign=eD,M.assignIn=Ch,M.assignInWith=Wa,M.assignWith=tD,M.at=rD,M.before=hh,M.bind=jo,M.bindAll=sb,M.bindKey=dh,M.castArray=C_,M.chain=oh,M.chunk=Ig,M.compact=Ng,M.concat=kg,M.cond=ob,M.conforms=lb,M.constant=Yo,M.countBy=Wm,M.create=nD,M.curry=ph,M.curryRight=vh,M.debounce=gh,M.defaults=iD,M.defaultsDeep=uD,M.defer=p_,M.delay=v_,M.difference=Rg,M.differenceBy=Lg,M.differenceWith=Ug,M.drop=Vg,M.dropRight=jg,M.dropRightWhile=qg,M.dropWhile=zg,M.fill=Wg,M.filter=Gm,M.flatMap=Zm,M.flatMapDeep=$m,M.flatMapDepth=Xm,M.flatten=ih,M.flattenDeep=Hg,M.flattenDepth=Gg,M.flip=g_,M.flow=cb,M.flowRight=hb,M.fromPairs=Kg,M.functions=hD,M.functionsIn=dD,M.groupBy=Jm,M.initial=Zg,M.intersection=$g,M.intersectionBy=Xg,M.intersectionWith=Jg,M.invert=vD,M.invertBy=gD,M.invokeMap=e_,M.iteratee=Zo,M.keyBy=t_,M.keys=Dr,M.keysIn=qr,M.map=La,M.mapKeys=_D,M.mapValues=DD,M.matches=db,M.matchesProperty=pb,M.memoize=Va,M.merge=bD,M.mergeWith=Fh,M.method=vb,M.methodOf=gb,M.mixin=$o,M.negate=ja,M.nthArg=_b,M.omit=yD,M.omitBy=AD,M.once=m_,M.orderBy=r_,M.over=Db,M.overArgs=__,M.overEvery=bb,M.overSome=yb,M.partial=qo,M.partialRight=mh,M.partition=n_,M.pick=wD,M.pickBy=Sh,M.property=Ih,M.propertyOf=Ab,M.pull=rm,M.pullAll=ah,M.pullAllBy=nm,M.pullAllWith=im,M.pullAt=um,M.range=wb,M.rangeRight=Eb,M.rearg=D_,M.reject=a_,M.remove=am,M.rest=b_,M.reverse=Uo,M.sampleSize=o_,M.set=CD,M.setWith=FD,M.shuffle=l_,M.slice=sm,M.sortBy=h_,M.sortedUniq=pm,M.sortedUniqBy=vm,M.split=ZD,M.spread=y_,M.tail=gm,M.take=mm,M.takeRight=_m,M.takeRightWhile=Dm,M.takeWhile=bm,M.tap=Nm,M.throttle=A_,M.thru=Ra,M.toArray=Ah,M.toPairs=Bh,M.toPairsIn=Oh,M.toPath=Ob,M.toPlainObject=Eh,M.transform=SD,M.unary=w_,M.union=ym,M.unionBy=Am,M.unionWith=wm,M.uniq=Em,M.uniqBy=Cm,M.uniqWith=Fm,M.unset=BD,M.unzip=Vo,M.unzipWith=sh,M.update=OD,M.updateWith=MD,M.values=su,M.valuesIn=PD,M.without=Sm,M.words=xh,M.wrap=E_,M.xor=Bm,M.xorBy=Om,M.xorWith=Mm,M.zip=Pm,M.zipObject=xm,M.zipObjectDeep=Tm,M.zipWith=Im,M.entries=Bh,M.entriesIn=Oh,M.extend=Ch,M.extendWith=Wa,$o(M,M),M.add=Pb,M.attempt=Th,M.camelCase=ND,M.capitalize=Mh,M.ceil=xb,M.clamp=xD,M.clone=F_,M.cloneDeep=B_,M.cloneDeepWith=O_,M.cloneWith=S_,M.conformsTo=M_,M.deburr=Ph,M.defaultTo=fb,M.divide=Tb,M.endsWith=kD,M.eq=Fn,M.escape=RD,M.escapeRegExp=LD,M.every=Hm,M.find=Km,M.findIndex=rh,M.findKey=aD,M.findLast=Ym,M.findLastIndex=nh,M.findLastKey=sD,M.floor=Ib,M.forEach=lh,M.forEachRight=fh,M.forIn=oD,M.forInRight=lD,M.forOwn=fD,M.forOwnRight=cD,M.get=Ho,M.gt=P_,M.gte=x_,M.has=pD,M.hasIn=Go,M.head=uh,M.identity=zr,M.includes=Qm,M.indexOf=Yg,M.inRange=TD,M.invoke=mD,M.isArguments=qi,M.isArray=st,M.isArrayBuffer=T_,M.isArrayLike=jr,M.isArrayLikeObject=sr,M.isBoolean=I_,M.isBuffer=_i,M.isDate=N_,M.isElement=k_,M.isEmpty=R_,M.isEqual=L_,M.isEqualWith=U_,M.isError=zo,M.isFinite=V_,M.isFunction=ti,M.isInteger=_h,M.isLength=qa,M.isMap=Dh,M.isMatch=j_,M.isMatchWith=q_,M.isNaN=z_,M.isNative=W_,M.isNil=G_,M.isNull=H_,M.isNumber=bh,M.isObject=$t,M.isObjectLike=nr,M.isPlainObject=Zu,M.isRegExp=Wo,M.isSafeInteger=K_,M.isSet=yh,M.isString=za,M.isSymbol=Xr,M.isTypedArray=au,M.isUndefined=Y_,M.isWeakMap=Z_,M.isWeakSet=$_,M.join=Qg,M.kebabCase=UD,M.last=dn,M.lastIndexOf=em,M.lowerCase=VD,M.lowerFirst=jD,M.lt=X_,M.lte=J_,M.max=Nb,M.maxBy=kb,M.mean=Rb,M.meanBy=Lb,M.min=Ub,M.minBy=Vb,M.stubArray=Jo,M.stubFalse=Qo,M.stubObject=Cb,M.stubString=Fb,M.stubTrue=Sb,M.multiply=jb,M.nth=tm,M.noConflict=mb,M.noop=Xo,M.now=Ua,M.pad=qD,M.padEnd=zD,M.padStart=WD,M.parseInt=HD,M.random=ID,M.reduce=i_,M.reduceRight=u_,M.repeat=GD,M.replace=KD,M.result=ED,M.round=qb,M.runInContext=J,M.sample=s_,M.size=f_,M.snakeCase=YD,M.some=c_,M.sortedIndex=om,M.sortedIndexBy=lm,M.sortedIndexOf=fm,M.sortedLastIndex=cm,M.sortedLastIndexBy=hm,M.sortedLastIndexOf=dm,M.startCase=$D,M.startsWith=XD,M.subtract=zb,M.sum=Wb,M.sumBy=Hb,M.template=JD,M.times=Bb,M.toFinite=ri,M.toInteger=ft,M.toLength=wh,M.toLower=QD,M.toNumber=pn,M.toSafeInteger=Q_,M.toString=wt,M.toUpper=eb,M.trim=tb,M.trimEnd=rb,M.trimStart=nb,M.truncate=ib,M.unescape=ub,M.uniqueId=Mb,M.upperCase=ab,M.upperFirst=Ko,M.each=lh,M.eachRight=fh,M.first=uh,$o(M,function(){var i={};return Ln(M,function(s,v){St.call(M.prototype,v)||(i[v]=s)}),i}(),{chain:!1}),M.VERSION=n,on(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){M[i].placeholder=M}),on(["drop","take"],function(i,s){_t.prototype[i]=function(v){v=v===r?1:pr(ft(v),0);var A=this.__filtered__&&!s?new _t(this):this.clone();return A.__filtered__?A.__takeCount__=Mr(v,A.__takeCount__):A.__views__.push({size:Mr(v,me),type:i+(A.__dir__<0?"Right":"")}),A},_t.prototype[i+"Right"]=function(v){return this.reverse()[i](v).reverse()}}),on(["filter","map","takeWhile"],function(i,s){var v=s+1,A=v==H||v==W;_t.prototype[i]=function(F){var x=this.clone();return x.__iteratees__.push({iteratee:He(F,3),type:v}),x.__filtered__=x.__filtered__||A,x}}),on(["head","last"],function(i,s){var v="take"+(s?"Right":"");_t.prototype[i]=function(){return this[v](1).value()[0]}}),on(["initial","tail"],function(i,s){var v="drop"+(s?"":"Right");_t.prototype[i]=function(){return this.__filtered__?new _t(this):this[v](1)}}),_t.prototype.compact=function(){return this.filter(zr)},_t.prototype.find=function(i){return this.filter(i).head()},_t.prototype.findLast=function(i){return this.reverse().find(i)},_t.prototype.invokeMap=ht(function(i,s){return typeof i=="function"?new _t(this):this.map(function(v){return zu(v,i,s)})}),_t.prototype.reject=function(i){return this.filter(ja(He(i)))},_t.prototype.slice=function(i,s){i=ft(i);var v=this;return v.__filtered__&&(i>0||s<0)?new _t(v):(i<0?v=v.takeRight(-i):i&&(v=v.drop(i)),s!==r&&(s=ft(s),v=s<0?v.dropRight(-s):v.take(s-i)),v)},_t.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},_t.prototype.toArray=function(){return this.take(me)},Ln(_t.prototype,function(i,s){var v=/^(?:filter|find|map|reject)|While$/.test(s),A=/^(?:head|last)$/.test(s),F=M[A?"take"+(s=="last"?"Right":""):s],x=A||/^find/.test(s);F&&(M.prototype[s]=function(){var U=this.__wrapped__,K=A?[1]:arguments,te=U instanceof _t,ve=K[0],ge=te||st(U),De=function(dt){var bt=F.apply(M,ci([dt],K));return A&&Be?bt[0]:bt};ge&&v&&typeof ve=="function"&&ve.length!=1&&(te=ge=!1);var Be=this.__chain__,Le=!!this.__actions__.length,Je=x&&!Be,ct=te&&!Le;if(!x&&ge){U=ct?U:new _t(this);var Qe=i.apply(U,K);return Qe.__actions__.push({func:Ra,args:[De],thisArg:r}),new fn(Qe,Be)}return Je&&ct?i.apply(this,K):(Qe=this.thru(De),Je?A?Qe.value()[0]:Qe.value():Qe)})}),on(["pop","push","shift","sort","splice","unshift"],function(i){var s=la[i],v=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",A=/^(?:pop|shift)$/.test(i);M.prototype[i]=function(){var F=arguments;if(A&&!this.__chain__){var x=this.value();return s.apply(st(x)?x:[],F)}return this[v](function(U){return s.apply(st(U)?U:[],F)})}}),Ln(_t.prototype,function(i,s){var v=M[s];if(v){var A=v.name+"";St.call(tu,A)||(tu[A]=[]),tu[A].push({name:s,func:v})}}),tu[Ma(r,b).name]=[{name:"wrapper",func:r}],_t.prototype.clone=uv,_t.prototype.reverse=av,_t.prototype.value=sv,M.prototype.at=km,M.prototype.chain=Rm,M.prototype.commit=Lm,M.prototype.next=Um,M.prototype.plant=jm,M.prototype.reverse=qm,M.prototype.toJSON=M.prototype.valueOf=M.prototype.value=zm,M.prototype.first=M.prototype.head,ku&&(M.prototype[ku]=Vm),M},Ji=L1();Ii?((Ii.exports=Ji)._=Ji,Ys._=Ji):Er._=Ji}).call(cr)})(E3,ws);const C3=ws,Ol="panelModeStore";function F3(){const e=Tn("select"),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&localStorage[Ol]||""),{subscribe:t,update:a=>{!a||!u||(localStorage[Ol]=a,r(a))},get:()=>qt(e),delete:()=>{u&&(delete localStorage[Ol],r("select"))}}}const Wn=F3(),S3=xn(Wn,e=>qt(Wn));function rd(e,t,r){const n=e.slice();return n[7]=t[r][0],n[8]=t[r][1],n}function nd(e,t,r){const n=e.slice();return n[11]=t[r][0],n[12]=t[r][1],n}function id(e){let t=e[12].text+"",r,n,u,a=ai(e[8],e[11])+"",l,o;return{c(){r=Ze(t),n=Ze("::"),u=se("b"),l=Ze(a),o=Ge()},l(h){r=$e(h,t),n=$e(h,"::"),u=oe(h,"B",{});var p=ie(u);l=$e(p,a),p.forEach(V),o=Ke(h)},m(h,p){Ce(h,r,p),Ce(h,n,p),Ce(h,u,p),Y(u,l),Ce(h,o,p)},p(h,p){p&1&&t!==(t=h[12].text+"")&&Pn(r,t),p&1&&a!==(a=ai(h[8],h[11])+"")&&Pn(l,a)},d(h){h&&V(r),h&&V(n),h&&V(u),h&&V(o)}}}function ud(e,t){let r,n,u,a,l,o=Object.entries(t[8].weightedPrompts),h=[];for(let f=0;f<o.length;f+=1)h[f]=id(nd(t,o,f));function p(){return t[5](t[7],t[8])}return{key:e,first:null,c(){r=se("li"),n=se("a");for(let f=0;f<h.length;f+=1)h[f].c();u=Ge(),this.h()},l(f){r=oe(f,"LI",{});var c=ie(r);n=oe(c,"A",{class:!0});var d=ie(n);for(let m=0;m<h.length;m+=1)h[m].l(d);d.forEach(V),u=Ke(c),c.forEach(V),this.h()},h(){T(n,"class","text-xs inline-block"),jt(n,"active",t[1]===t[7]),this.first=r},m(f,c){Ce(f,r,c),Y(r,n);for(let d=0;d<h.length;d+=1)h[d]&&h[d].m(n,null);Y(r,u),a||(l=ke(n,"click",p),a=!0)},p(f,c){if(t=f,c&5){o=Object.entries(t[8].weightedPrompts);let d;for(d=0;d<o.length;d+=1){const m=nd(t,o,d);h[d]?h[d].p(m,c):(h[d]=id(m),h[d].c(),h[d].m(n,null))}for(;d<h.length;d+=1)h[d].d(1);h.length=o.length}c&7&&jt(n,"active",t[1]===t[7])},d(f){f&&V(r),nf(h,f),a=!1,l()}}}function B3(e){let t,r,n,u,a,l=[],o=new Map,h,p,f=e[2](e[0],ad,"desc");const c=d=>d[7];for(let d=0;d<f.length;d+=1){let m=rd(e,f,d),y=c(m);o.set(y,l[d]=ud(y,m))}return{c(){t=se("ul"),r=se("li"),n=se("a"),u=Ze("New +"),a=Ge();for(let d=0;d<l.length;d+=1)l[d].c();this.h()},l(d){t=oe(d,"UL",{class:!0});var m=ie(t);r=oe(m,"LI",{});var y=ie(r);n=oe(y,"A",{class:!0});var g=ie(n);u=$e(g,"New +"),g.forEach(V),y.forEach(V),a=Ke(m);for(let _=0;_<l.length;_+=1)l[_].l(m);m.forEach(V),this.h()},h(){T(n,"class","text-xs inline-block"),T(t,"class","menu h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(d,m){Ce(d,t,m),Y(t,r),Y(r,n),Y(n,u),Y(t,a);for(let y=0;y<l.length;y+=1)l[y]&&l[y].m(t,null);h||(p=ke(n,"click",e[3]),h=!0)},p(d,[m]){m&23&&(f=d[2](d[0],ad,"desc"),l=Si(l,m,c,1,d,f,o,t,_u,ud,null,rd))},i:Ie,o:Ie,d(d){d&&V(t);for(let m=0;m<l.length;m+=1)l[m].d();h=!1,p()}}}const ad=e=>e[1].date;function O3(e,t,r){let n,u,a;Bt(e,yn,f=>r(6,n=f)),Bt(e,bE,f=>r(0,u=f)),Bt(e,op,f=>r(1,a=f));const{orderBy:l}=C3;function o(){ea.delete(),Ot.update(yi({},n.weightMode)),Wn.update("edit")}function h(f,c){ea.update(f),Ot.update({...c}),Wn.update("edit")}return[u,a,l,o,h,(f,c)=>h(f,c)]}class M3 extends kt{constructor(t){super(),Rt(this,t,O3,B3,Lt,{})}}let Za;const P3=new Uint8Array(16);function x3(){if(!Za&&(Za=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Za))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Za(P3)}const Sr=[];for(let e=0;e<256;++e)Sr.push((e+256).toString(16).slice(1));function T3(e,t=0){return(Sr[e[t+0]]+Sr[e[t+1]]+Sr[e[t+2]]+Sr[e[t+3]]+"-"+Sr[e[t+4]]+Sr[e[t+5]]+"-"+Sr[e[t+6]]+Sr[e[t+7]]+"-"+Sr[e[t+8]]+Sr[e[t+9]]+"-"+Sr[e[t+10]]+Sr[e[t+11]]+Sr[e[t+12]]+Sr[e[t+13]]+Sr[e[t+14]]+Sr[e[t+15]]).toLowerCase()}const I3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),sd={randomUUID:I3};function zp(e,t,r){if(sd.randomUUID&&!t&&!e)return sd.randomUUID();e=e||{};const n=e.random||(e.rng||x3)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let u=0;u<16;++u)t[r+u]=n[u];return t}return T3(n)}function N3(e){const t=[],r=/((?:[^:]+|:(?!:))+)(?:::(\d+(?:\.\d+)?))?(?=\s|$)/g;let n;for(;(n=r.exec(e))!==null;){const u=n[1].trim(),a=n[2]?parseFloat(n[2]):1;u&&t.push([u,a])}return t}function Ml(e){if(typeof e!="string")throw new Error("Input must be a string");const t=e.length-1;let r=e;for(;r[t]===",";)r=r.slice(0,t);return r}function Pl(e){if(typeof e!="string")throw new Error("Input must be a string");const t=["-","#","*","","",">","<","+","^","~","(",")","[","]","{","}"];let r=e.trim();for(;t.includes(r[0]);)r=r.slice(1).trim();return/^\d+(\.|\))\s/.test(r)&&(r=r.replace(/^\d+(\.|\))\s/,"")),r}function ef(e){if(e=e.replace(/^\n+|\n+$/g,""),e.includes("::"))return N3(e);if(e.includes(`
`))return e.split(`
`).map(a=>Pl(Ml(a))).filter(a=>a.length>0).map(a=>[a,1]);const t=e.match(/[^.!?]+[.!?]+/g)||[],r=t.length,n=e.split(",").map(a=>Pl(Ml(a))).filter(a=>a.length>0),u=n.length-1;return r>u?t.map(a=>Pl(Ml(a))).filter(a=>a.length>0).map(a=>[a,1]):n.map(a=>[a,1])}function k3(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Wp=k3,R3=typeof cr=="object"&&cr&&cr.Object===Object&&cr,L3=R3,U3=L3,V3=typeof self=="object"&&self&&self.Object===Object&&self,j3=U3||V3||Function("return this")(),Hp=j3,q3=Hp,z3=function(){return q3.Date.now()},W3=z3,H3=/\s/;function G3(e){for(var t=e.length;t--&&H3.test(e.charAt(t)););return t}var K3=G3,Y3=K3,Z3=/^\s+/;function $3(e){return e&&e.slice(0,Y3(e)+1).replace(Z3,"")}var X3=$3,J3=Hp,Q3=J3.Symbol,Gp=Q3,od=Gp,Kp=Object.prototype,eS=Kp.hasOwnProperty,tS=Kp.toString,$u=od?od.toStringTag:void 0;function rS(e){var t=eS.call(e,$u),r=e[$u];try{e[$u]=void 0;var n=!0}catch{}var u=tS.call(e);return n&&(t?e[$u]=r:delete e[$u]),u}var nS=rS,iS=Object.prototype,uS=iS.toString;function aS(e){return uS.call(e)}var sS=aS,ld=Gp,oS=nS,lS=sS,fS="[object Null]",cS="[object Undefined]",fd=ld?ld.toStringTag:void 0;function hS(e){return e==null?e===void 0?cS:fS:fd&&fd in Object(e)?oS(e):lS(e)}var dS=hS;function pS(e){return e!=null&&typeof e=="object"}var vS=pS,gS=dS,mS=vS,_S="[object Symbol]";function DS(e){return typeof e=="symbol"||mS(e)&&gS(e)==_S}var bS=DS,yS=X3,cd=Wp,AS=bS,hd=0/0,wS=/^[-+]0x[0-9a-f]+$/i,ES=/^0b[01]+$/i,CS=/^0o[0-7]+$/i,FS=parseInt;function SS(e){if(typeof e=="number")return e;if(AS(e))return hd;if(cd(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=cd(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=yS(e);var r=ES.test(e);return r||CS.test(e)?FS(e.slice(2),r?2:8):wS.test(e)?hd:+e}var BS=SS,OS=Wp,xl=W3,dd=BS,MS="Expected a function",PS=Math.max,xS=Math.min;function TS(e,t,r){var n,u,a,l,o,h,p=0,f=!1,c=!1,d=!0;if(typeof e!="function")throw new TypeError(MS);t=dd(t)||0,OS(r)&&(f=!!r.leading,c="maxWait"in r,a=c?PS(dd(r.maxWait)||0,t):a,d="trailing"in r?!!r.trailing:d);function m(O){var P=n,I=u;return n=u=void 0,p=O,l=e.apply(I,P),l}function y(O){return p=O,o=setTimeout(b,t),f?m(O):l}function g(O){var P=O-h,I=O-p,N=t-P;return c?xS(N,a-I):N}function _(O){var P=O-h,I=O-p;return h===void 0||P>=t||P<0||c&&I>=a}function b(){var O=xl();if(_(O))return C(O);o=setTimeout(b,g(O))}function C(O){return o=void 0,d&&n?m(O):(n=u=void 0,l)}function w(){o!==void 0&&clearTimeout(o),p=0,n=h=u=o=void 0}function B(){return o===void 0?l:C(xl())}function S(){var O=xl(),P=_(O);if(n=arguments,u=this,h=O,P){if(o===void 0)return y(h);if(c)return clearTimeout(o),o=setTimeout(b,t),m(h)}return o===void 0&&(o=setTimeout(b,t)),l}return S.cancel=w,S.flush=B,S}var pd=TS;function vd(e,t,r){const n=e.slice();return n[13]=t[r].id,n[14]=t[r].text,n}function gd(e,t){let r,n,u,a,l;function o(...h){return t[9](t[13],...h)}return{key:e,first:null,c(){r=se("li"),n=se("input"),this.h()},l(h){r=oe(h,"LI",{class:!0});var p=ie(r);n=oe(p,"INPUT",{type:!0,placeholder:!0,class:!0}),p.forEach(V),this.h()},h(){n.value=u=t[14],T(n,"type","text"),T(n,"placeholder",""),T(n,"class","input input-bordered input-sm w-full"),T(r,"class","p-1"),this.first=r},m(h,p){Ce(h,r,p),Y(r,n),a||(l=ke(n,"input",o),a=!0)},p(h,p){t=h,p&2&&u!==(u=t[14])&&n.value!==u&&(n.value=u)},d(h){h&&V(r),a=!1,l()}}}function IS(e){let t,r,n,u,a,l,o,h,p,f,c,d=[],m=new Map,y,g,_,b,C,w=e[1];const B=S=>S[13];for(let S=0;S<w.length;S+=1){let O=vd(e,w,S),P=B(O);m.set(P,d[S]=gd(P,O))}return{c(){t=se("div"),r=se("button"),n=Ze("Paste"),u=Ge(),a=se("button"),l=Ze("Save"),o=Ge(),h=se("button"),p=Ze("Delete"),f=Ge(),c=se("ul");for(let S=0;S<d.length;S+=1)d[S].c();y=Ge(),g=se("li"),_=se("input"),this.h()},l(S){t=oe(S,"DIV",{class:!0});var O=ie(t);r=oe(O,"BUTTON",{class:!0});var P=ie(r);n=$e(P,"Paste"),P.forEach(V),u=Ke(O),a=oe(O,"BUTTON",{class:!0});var I=ie(a);l=$e(I,"Save"),I.forEach(V),o=Ke(O),h=oe(O,"BUTTON",{class:!0});var N=ie(h);p=$e(N,"Delete"),N.forEach(V),O.forEach(V),f=Ke(S),c=oe(S,"UL",{class:!0});var G=ie(c);for(let q=0;q<d.length;q+=1)d[q].l(G);y=Ke(G),g=oe(G,"LI",{class:!0});var L=ie(g);_=oe(L,"INPUT",{type:!0,placeholder:!0,class:!0}),L.forEach(V),G.forEach(V),this.h()},h(){T(r,"class","btn btn-sm btn-info mx-2"),T(a,"class","btn btn-sm btn-success mx-2"),T(h,"class","btn btn-sm btn-error mx-2"),T(t,"class","flex px-8 py-2 justify-center bg-base-100"),T(_,"type","text"),T(_,"placeholder","Add prompt"),T(_,"class","input input-bordered input-sm w-full italic"),T(g,"class","p-1"),T(c,"class","h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(S,O){Ce(S,t,O),Y(t,r),Y(r,n),Y(t,u),Y(t,a),Y(a,l),Y(t,o),Y(t,h),Y(h,p),Ce(S,f,O),Ce(S,c,O);for(let P=0;P<d.length;P+=1)d[P]&&d[P].m(c,null);Y(c,y),Y(c,g),Y(g,_),wi(_,e[0]),b||(C=[ke(r,"click",e[3]),ke(a,"click",e[2]),ke(h,"click",e[4]),ke(_,"input",e[10]),ke(_,"input",e[11])],b=!0)},p(S,[O]){O&34&&(w=S[1],d=Si(d,O,B,1,S,w,m,c,_u,gd,y,vd)),O&1&&_.value!==S[0]&&wi(_,S[0])},i:Ie,o:Ie,d(S){S&&V(t),S&&V(f),S&&V(c);for(let O=0;O<d.length;O+=1)d[O].d();b=!1,Ur(C)}}}function NS(e,t,r){let n,u,a;Bt(e,yn,_=>r(8,u=_)),Bt(e,op,_=>r(12,a=_));let l="",o=Object.keys(u.weightedPrompts).length;function h(){ta.update(zp(),{...u,date:Date.now()}),Wn.update("select")}function p(){navigator.clipboard.readText().then(_=>{const b=ef(_),C=Math.max(...b.map(([B,S])=>S)),w=b.reduce((B,[S,O],P)=>(B[P]=br(P,S,O,O/C),B),{});Ot.update(yi(w,u.weightMode))})}function f(){a&&ta.delete(a),Wn.update("select"),Ot.delete()}const c=pd((_,b)=>{const C={...u.weightedPrompts},w={...C[_],text:b};C[_]=w,Ot.update({...u,weightedPrompts:C})},500),d=pd(_=>{const b=Object.keys(u.weightedPrompts).length,C={...u.weightedPrompts},w=br(b,_,1);C[b]=w,Ot.update({...u,weightedPrompts:C})},500),m=(_,b)=>c(_,b.target.value);function y(){l=this.value,r(0,l),r(8,u),r(7,o)}const g=_=>d(_.target.value);return e.$$.update=()=>{if(e.$$.dirty&384){const _=Object.keys(u.weightedPrompts).length;_>o&&(r(7,o=_),r(0,l=""))}e.$$.dirty&256&&r(1,n=Object.entries(u.weightedPrompts).map(([_,b])=>({id:_,text:b.text})))},[l,n,h,p,f,c,d,o,u,m,y,g]}class kS extends kt{constructor(t){super(),Rt(this,t,NS,IS,Lt,{})}}const RS=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. The first sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. The middle three sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. The final sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,LS=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 10 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. Four sentences should describe the subject.
    d. Four sentences should describe the scene.
    e. Tow sentences should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,US=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 10 concepts.
    a. Each concept should be 10 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
`,VS=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 20 concepts.
    a. Each concept should be 5 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
3. Do not use hyphens to mark list items.
4. Do not title the list.
`,jS=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. One sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. Two sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. One sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
    f. One sentence should be a poetic concept or feeling. Example: The unfathomable depths of a lover's sigh.
        i. The poetic concept should be intense.
        ii. The poetic concept should be emotional.
        iii. The poetic concept should include abstract words.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`;function qS(){const e=Tn({}),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&Object.keys(localStorage).reduce((a,l)=>{if(l.startsWith("directive")){const o=l.split("_")[1];a[o]=JSON.parse(localStorage[l])}return a},{})||{}),{subscribe:t,update:(a,l)=>{const o=qt(e),p={...o[a]||{},...l};u&&(localStorage[`directive_${a}`]=JSON.stringify(p));const f={...o,[a]:p};r(f)},get:a=>qt(e)[a],delete:a=>{u&&delete localStorage[`directive_${a}`];const l={...qt(e)};delete l[a],r(l)}}}const Es=qS(),zS=xn(Es,e=>Object.entries(qt(Es))),Tl="preferredModelStore";function WS(){const e=Tn(""),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&localStorage[Tl]||""),{subscribe:t,update:a=>{!a||!u||(localStorage[Tl]=a,r(a))},get:()=>qt(e),delete:()=>{u&&(delete localStorage[Tl],r(""))}}}const tf=WS(),Yp=xn(tf,e=>qt(tf)),Il="preferredDirectiveStore";function HS(){const e=Tn(""),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&localStorage[Il]||""),{subscribe:t,update:a=>{!a||!u||(localStorage[Il]=a,r(a))},get:()=>qt(e),delete:()=>{u&&(delete localStorage[Il],r(""))}}}const Cs=HS(),GS=xn(Cs,e=>qt(Cs)),Nl="metaPromptStore";function KS(){const e=Tn(""),{subscribe:t,set:r,update:n}=e,u=typeof window<"u";return r(u&&localStorage[Nl]||""),{subscribe:t,update:a=>{!a||!u||(localStorage[Nl]=a,r(a))},get:()=>qt(e),delete:()=>{u&&(delete localStorage[Nl],r(""))}}}const rf=KS(),YS=xn(rf,e=>qt(rf));function md(e,t,r){const n=e.slice();return n[30]=t[r][0],n[31]=t[r][1],n}function ZS(e){let t,r,n;return{c(){t=se("div"),r=se("p"),n=Ze("Set Open AI Key in settings for GPT generation."),this.h()},l(u){t=oe(u,"DIV",{class:!0});var a=ie(t);r=oe(a,"P",{class:!0});var l=ie(r);n=$e(l,"Set Open AI Key in settings for GPT generation."),l.forEach(V),a.forEach(V),this.h()},h(){T(r,"class","text-center"),T(t,"class","w-full p-2 flex justify-center")},m(u,a){Ce(u,t,a),Y(t,r),Y(r,n)},p:Ie,d(u){u&&V(t)}}}function $S(e){let t,r,n,u,a,l,o,h,p,f,c=[],d=new Map,m,y,g,_,b,C,w,B=Object.entries(e[1]);const S=P=>P[30];for(let P=0;P<B.length;P+=1){let I=md(e,B,P),N=S(I);d.set(N,c[P]=_d(N,I))}let O=e[0]&&Dd(e);return{c(){t=se("div"),r=se("div"),n=se("label"),u=se("span"),a=Ze("Pick a directive for prompt creation"),l=Ge(),o=se("select"),h=se("option"),p=Ze("Pick one");for(let P=0;P<c.length;P+=1)c[P].c();m=se("option"),y=Ze("New"),_=Ge(),O&&O.c(),b=Kt(),this.h()},l(P){t=oe(P,"DIV",{class:!0});var I=ie(t);r=oe(I,"DIV",{class:!0});var N=ie(r);n=oe(N,"LABEL",{class:!0});var G=ie(n);u=oe(G,"SPAN",{class:!0});var L=ie(u);a=$e(L,"Pick a directive for prompt creation"),L.forEach(V),G.forEach(V),l=Ke(N),o=oe(N,"SELECT",{class:!0});var q=ie(o);h=oe(q,"OPTION",{});var $=ie(h);p=$e($,"Pick one"),$.forEach(V);for(let z=0;z<c.length;z+=1)c[z].l(q);m=oe(q,"OPTION",{});var H=ie(m);y=$e(H,"New"),H.forEach(V),q.forEach(V),N.forEach(V),I.forEach(V),_=Ke(P),O&&O.l(P),b=Kt(),this.h()},h(){T(u,"class","label-text"),T(n,"class","label"),h.disabled=!0,h.selected=f=e[0]===null,h.__value="Pick one",h.value=h.__value,m.__value="new",m.value=m.__value,m.selected=g=e[0]==="new",T(o,"class","select select-bordered"),T(r,"class","form-control w-full max-w-xs mb-4"),T(t,"class","flex justify-center")},m(P,I){Ce(P,t,I),Y(t,r),Y(r,n),Y(n,u),Y(u,a),Y(r,l),Y(r,o),Y(o,h),Y(h,p);for(let N=0;N<c.length;N+=1)c[N]&&c[N].m(o,null);Y(o,m),Y(m,y),vu(o,e[0]),Ce(P,_,I),O&&O.m(P,I),Ce(P,b,I),C||(w=ke(o,"change",e[11]),C=!0)},p(P,I){I[0]&3&&f!==(f=P[0]===null)&&(h.selected=f),I[0]&3&&(B=Object.entries(P[1]),c=Si(c,I,S,1,P,B,d,o,_u,_d,m,md)),I[0]&3&&g!==(g=P[0]==="new")&&(m.selected=g),I[0]&3&&vu(o,P[0]),P[0]?O?O.p(P,I):(O=Dd(P),O.c(),O.m(b.parentNode,b)):O&&(O.d(1),O=null)},d(P){P&&V(t);for(let I=0;I<c.length;I+=1)c[I].d();P&&V(_),O&&O.d(P),P&&V(b),C=!1,w()}}}function _d(e,t){let r,n=t[31].name+"",u,a=t[31].builtIn?" (Built-In)":" (User)",l,o,h;return{key:e,first:null,c(){r=se("option"),u=Ze(n),l=Ze(a),this.h()},l(p){r=oe(p,"OPTION",{});var f=ie(r);u=$e(f,n),l=$e(f,a),f.forEach(V),this.h()},h(){r.__value=o=t[30],r.value=r.__value,r.selected=h=t[0]===t[30],this.first=r},m(p,f){Ce(p,r,f),Y(r,u),Y(r,l)},p(p,f){t=p,f[0]&2&&n!==(n=t[31].name+"")&&Pn(u,n),f[0]&2&&a!==(a=t[31].builtIn?" (Built-In)":" (User)")&&Pn(l,a),f[0]&2&&o!==(o=t[30])&&(r.__value=o,r.value=r.__value),f[0]&3&&h!==(h=t[0]===t[30])&&(r.selected=h)},d(p){p&&V(r)}}}function Dd(e){let t,r,n,u,a,l,o,h,p,f,c=!e[6]&&bd(e);function d(g,_){return g[5]?JS:XS}let m=d(e),y=m(e);return{c(){c&&c.c(),t=Ge(),r=se("div"),n=se("textarea"),u=Ge(),a=se("div"),l=se("textarea"),o=Ge(),y.c(),h=Kt(),this.h()},l(g){c&&c.l(g),t=Ke(g),r=oe(g,"DIV",{class:!0});var _=ie(r);n=oe(_,"TEXTAREA",{class:!0,placeholder:!0}),ie(n).forEach(V),_.forEach(V),u=Ke(g),a=oe(g,"DIV",{class:!0});var b=ie(a);l=oe(b,"TEXTAREA",{class:!0,placeholder:!0}),ie(l).forEach(V),b.forEach(V),o=Ke(g),y.l(g),h=Kt(),this.h()},h(){T(n,"class","textarea textarea-bordered w-full h-full"),T(n,"placeholder","GPT Directives"),T(r,"class","w-full p-2 h-1/2"),l.value=e[7],T(l,"class","textarea textarea-bordered w-full h-full"),T(l,"placeholder","Describe the prompt to generate."),T(a,"class","w-full p-2 h-1/5")},m(g,_){c&&c.m(g,_),Ce(g,t,_),Ce(g,r,_),Y(r,n),wi(n,e[4]),Ce(g,u,_),Ce(g,a,_),Y(a,l),Ce(g,o,_),y.m(g,_),Ce(g,h,_),p||(f=[ke(n,"input",e[17]),ke(l,"input",e[18])],p=!0)},p(g,_){g[6]?c&&(c.d(1),c=null):c?c.p(g,_):(c=bd(g),c.c(),c.m(t.parentNode,t)),_[0]&16&&wi(n,g[4]),_[0]&128&&(l.value=g[7]),m===(m=d(g))&&y?y.p(g,_):(y.d(1),y=m(g),y&&(y.c(),y.m(h.parentNode,h)))},d(g){c&&c.d(g),g&&V(t),g&&V(r),g&&V(u),g&&V(a),g&&V(o),y.d(g),g&&V(h),p=!1,Ur(f)}}}function bd(e){let t,r,n,u,a,l,o;return{c(){t=se("div"),r=se("input"),n=Ge(),u=se("button"),a=Ze("Save"),this.h()},l(h){t=oe(h,"DIV",{class:!0});var p=ie(t);r=oe(p,"INPUT",{type:!0,placeholder:!0,class:!0}),n=Ke(p),u=oe(p,"BUTTON",{class:!0});var f=ie(u);a=$e(f,"Save"),f.forEach(V),p.forEach(V),this.h()},h(){T(r,"type","text"),T(r,"placeholder","Name"),T(r,"class","input input-bordered input-sm w-full max-w-xs"),T(u,"class","btn btn-sm btn-primary ml-4"),T(t,"class","w-full p-2 h-12 flex justify-between")},m(h,p){Ce(h,t,p),Y(t,r),wi(r,e[3]),Y(t,n),Y(t,u),Y(u,a),l||(o=[ke(r,"input",e[16]),ke(u,"click",e[9])],l=!0)},p(h,p){p[0]&8&&r.value!==h[3]&&wi(r,h[3])},d(h){h&&V(t),l=!1,Ur(o)}}}function XS(e){let t,r,n={ctx:e,current:null,token:null,hasCatch:!1,pending:t5,then:e5,catch:QS,value:29};return Ei(r=e[2],n),{c(){t=se("div"),n.block.c(),this.h()},l(u){t=oe(u,"DIV",{class:!0});var a=ie(t);n.block.l(a),a.forEach(V),this.h()},h(){T(t,"class","w-full p-2 h-12 flex justify-end")},m(u,a){Ce(u,t,a),n.block.m(t,n.anchor=null),n.mount=()=>t,n.anchor=null},p(u,a){e=u,n.ctx=e,a[0]&4&&r!==(r=e[2])&&Ei(r,n)||Bs(n,e,a)},d(u){u&&V(t),n.block.d(),n.token=null,n=null}}}function JS(e){let t,r,n,u,a,l,o,h={ctx:e,current:null,token:null,hasCatch:!1,pending:i5,then:n5,catch:r5,value:29};return Ei(a=e[2],h),{c(){t=se("div"),r=se("button"),n=Ze("Delete"),u=Ge(),h.block.c(),this.h()},l(p){t=oe(p,"DIV",{class:!0});var f=ie(t);r=oe(f,"BUTTON",{class:!0});var c=ie(r);n=$e(c,"Delete"),c.forEach(V),u=Ke(f),h.block.l(f),f.forEach(V),this.h()},h(){T(r,"class","btn btn-sm btn-error ml-4"),T(t,"class","w-full p-2 h-12 flex justify-between")},m(p,f){Ce(p,t,f),Y(t,r),Y(r,n),Y(t,u),h.block.m(t,h.anchor=null),h.mount=()=>t,h.anchor=null,l||(o=ke(r,"click",e[10]),l=!0)},p(p,f){e=p,h.ctx=e,f[0]&4&&a!==(a=e[2])&&Ei(a,h)||Bs(h,e,f)},d(p){p&&V(t),h.block.d(),h.token=null,h=null,l=!1,o()}}}function QS(e){return{c:Ie,l:Ie,m:Ie,p:Ie,d:Ie}}function e5(e){let t,r,n,u;return{c(){t=se("button"),r=Ze("Generate"),this.h()},l(a){t=oe(a,"BUTTON",{class:!0});var l=ie(t);r=$e(l,"Generate"),l.forEach(V),this.h()},h(){T(t,"class","btn btn-sm btn-primary ml-4")},m(a,l){Ce(a,t,l),Y(t,r),n||(u=ke(t,"click",e[12]),n=!0)},p:Ie,d(a){a&&V(t),n=!1,u()}}}function t5(e){let t,r,n,u;return{c(){t=se("button"),r=Ze("Generating"),this.h()},l(a){t=oe(a,"BUTTON",{class:!0});var l=ie(t);r=$e(l,"Generating"),l.forEach(V),this.h()},h(){T(t,"class","btn btn-sm btn ml-4 disabled")},m(a,l){Ce(a,t,l),Y(t,r),n||(u=ke(t,"click",e[12]),n=!0)},p:Ie,d(a){a&&V(t),n=!1,u()}}}function r5(e){return{c:Ie,l:Ie,m:Ie,p:Ie,d:Ie}}function n5(e){let t,r,n,u;return{c(){t=se("button"),r=Ze("Generate"),this.h()},l(a){t=oe(a,"BUTTON",{class:!0});var l=ie(t);r=$e(l,"Generate"),l.forEach(V),this.h()},h(){T(t,"class","btn btn-sm btn-primary ml-4")},m(a,l){Ce(a,t,l),Y(t,r),n||(u=ke(t,"click",e[12]),n=!0)},p:Ie,d(a){a&&V(t),n=!1,u()}}}function i5(e){let t,r,n,u;return{c(){t=se("button"),r=Ze("Generating"),this.h()},l(a){t=oe(a,"BUTTON",{class:!0});var l=ie(t);r=$e(l,"Generating"),l.forEach(V),this.h()},h(){T(t,"class","btn btn-sm btn ml-4 disabled")},m(a,l){Ce(a,t,l),Y(t,r),n||(u=ke(t,"click",e[12]),n=!0)},p:Ie,d(a){a&&V(t),n=!1,u()}}}function u5(e){let t;function r(a,l){return a[8]?$S:ZS}let u=r(e)(e);return{c(){t=se("div"),u.c(),this.h()},l(a){t=oe(a,"DIV",{class:!0});var l=ie(t);u.l(l),l.forEach(V),this.h()},h(){T(t,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(a,l){Ce(a,t,l),u.m(t,null)},p(a,l){u.p(a,l)},i:Ie,o:Ie,d(a){a&&V(t),u.d()}}}function a5(e,t,r){let n,u,a,l,o,h,p,f,c,d;Bt(e,YS,z=>r(7,o=z)),Bt(e,yn,z=>r(19,h=z)),Bt(e,GS,z=>r(14,p=z)),Bt(e,zS,z=>r(15,f=z)),Bt(e,Yp,z=>r(20,c=z)),Bt(e,Af,z=>r(21,d=z));let m=d,y=c,g=null;const _=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001"];let b={C:{name:"Five Sentences",text:RS,builtIn:!0},D:{name:"Ten Sentences",text:LS,builtIn:!0},E:{name:"Fragments",text:US,builtIn:!0},F:{name:"Concept Shotgun",text:VS,builtIn:!0},G:{name:"Poetic Accents",text:jS,builtIn:!0}},C=null,w="",B="";function S(){const z=C==="new"?zp():C;Es.update(z,{name:w,text:B,builtIn:!1}),C==="new"&&r(0,C=z)}function O(){Es.delete(C),r(0,C=null),r(3,w=""),r(4,B=""),Cs.delete()}function P(z){r(0,C=z),Cs.update(z),z&&z!=="new"?(r(3,w=u[z].name),r(4,B=u[z].text)):z==="new"&&(r(3,w=""),r(4,B=""))}function I(z){P(z.target.value)}function N(z,W){r(2,g=WF(z,W,y||"gpt-3.5-turbo")),g.then(ee=>{console.log(ee),ee.data.choices.forEach((Q,le)=>{const me=ef(Q.message.content);console.log(me);const Se=me.reduce((be,[Ne,je],Me)=>(be[Me]=br(Me,Ne,je),be),{});Ot.update(yi(Se,h.weightMode)),Wn.update("edit")})})}function G(z,W){r(2,g=zF(z,W,y||"text-davinci-003")),g.then(ee=>{console.log(ee),ee.data.choices.forEach((Q,le)=>{const me=ef(Q.text);console.log(me);const Se=me.reduce((be,[Ne,je],Me)=>(be[Me]=br(Me,Ne,je),be),{});Ot.update(yi(Se,h.weightMode)),Wn.update("edit")})})}function L(){if(!m||!B||!o)return;const z=yf(m),W=`${B}

        Using the above rules create a prompt from:
        ${o}
        `;_.includes(y)?G(z,W):N(z,W)}function q(){w=this.value,r(3,w)}function $(){B=this.value,r(4,B)}const H=z=>rf.update(z.target.value);return e.$$.update=()=>{e.$$.dirty[0]&32768&&r(13,n=f.reduce((z,[W,re])=>(z[W]={name:re.name,text:re.text,builtIn:!1},z),{})),e.$$.dirty[0]&8192&&r(1,u=Object.entries({...b,...n}).reduce((z,[W,re])=>(z[W]=re,z),{})),e.$$.dirty[0]&16385&&(C===null&&r(0,C=p),P(C)),e.$$.dirty[0]&3&&r(6,a=C&&C!=="new"&&u[C].builtIn),e.$$.dirty[0]&3&&r(5,l=C&&C!=="new"&&!u[C].builtIn)},[C,u,g,w,B,l,a,o,m,S,O,I,L,n,p,f,q,$,H]}class s5 extends kt{constructor(t){super(),Rt(this,t,a5,u5,Lt,{},null,[-1,-1])}}function yd(e,t,r){const n=e.slice();return n[20]=t[r],n}function Ad(e,t,r){const n=e.slice();return n[20]=t[r],n}function o5(e){return{c:Ie,l:Ie,m:Ie,p:Ie,d:Ie}}function l5(e){let t,r,n=e[0].length>0&&wd(e),u=e[1].length>0&&Cd(e);return{c(){n&&n.c(),t=Ge(),u&&u.c(),r=Kt()},l(a){n&&n.l(a),t=Ke(a),u&&u.l(a),r=Kt()},m(a,l){n&&n.m(a,l),Ce(a,t,l),u&&u.m(a,l),Ce(a,r,l)},p(a,l){a[0].length>0?n?n.p(a,l):(n=wd(a),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null),a[1].length>0?u?u.p(a,l):(u=Cd(a),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},d(a){n&&n.d(a),a&&V(t),u&&u.d(a),a&&V(r)}}}function wd(e){let t,r,n,u,a,l,o,h,p,f,c=[],d=new Map,m,y,g=e[0];const _=b=>b[20];for(let b=0;b<g.length;b+=1){let C=Ad(e,g,b),w=_(C);d.set(w,c[b]=Ed(w,C))}return{c(){t=se("div"),r=se("div"),n=se("label"),u=se("span"),a=Ze("Pick a model to use for model generation"),l=Ge(),o=se("select"),h=se("option"),p=Ze("Pick one");for(let b=0;b<c.length;b+=1)c[b].c();this.h()},l(b){t=oe(b,"DIV",{class:!0});var C=ie(t);r=oe(C,"DIV",{class:!0});var w=ie(r);n=oe(w,"LABEL",{class:!0});var B=ie(n);u=oe(B,"SPAN",{class:!0});var S=ie(u);a=$e(S,"Pick a model to use for model generation"),S.forEach(V),B.forEach(V),l=Ke(w),o=oe(w,"SELECT",{class:!0});var O=ie(o);h=oe(O,"OPTION",{});var P=ie(h);p=$e(P,"Pick one"),P.forEach(V);for(let I=0;I<c.length;I+=1)c[I].l(O);O.forEach(V),w.forEach(V),C.forEach(V),this.h()},h(){T(u,"class","label-text"),T(n,"class","label"),h.disabled=!0,h.selected=f=e[2]===null,h.__value="Pick one",h.value=h.__value,T(o,"class","select select-bordered"),T(r,"class","form-control w-full max-w-xs mb-4"),T(t,"class","flex justify-center")},m(b,C){Ce(b,t,C),Y(t,r),Y(r,n),Y(n,u),Y(u,a),Y(r,l),Y(r,o),Y(o,h),Y(h,p);for(let w=0;w<c.length;w+=1)c[w]&&c[w].m(o,null);vu(o,e[2]),m||(y=ke(o,"change",e[7]),m=!0)},p(b,C){C&5&&f!==(f=b[2]===null)&&(h.selected=f),C&5&&(g=b[0],c=Si(c,C,_,1,b,g,d,o,_u,Ed,null,Ad)),C&5&&vu(o,b[2])},d(b){b&&V(t);for(let C=0;C<c.length;C+=1)c[C].d();m=!1,y()}}}function Ed(e,t){let r,n=t[20]+"",u,a,l;return{key:e,first:null,c(){r=se("option"),u=Ze(n),this.h()},l(o){r=oe(o,"OPTION",{});var h=ie(r);u=$e(h,n),h.forEach(V),this.h()},h(){r.__value=a=t[20],r.value=r.__value,r.selected=l=t[2]===t[20],this.first=r},m(o,h){Ce(o,r,h),Y(r,u)},p(o,h){t=o,h&1&&n!==(n=t[20]+"")&&Pn(u,n),h&1&&a!==(a=t[20])&&(r.__value=a,r.value=r.__value),h&5&&l!==(l=t[2]===t[20])&&(r.selected=l)},d(o){o&&V(r)}}}function Cd(e){let t,r,n,u,a,l,o,h,p,f,c=[],d=new Map,m,y,g=e[1];const _=b=>b[20];for(let b=0;b<g.length;b+=1){let C=yd(e,g,b),w=_(C);d.set(w,c[b]=Fd(w,C))}return{c(){t=se("div"),r=se("div"),n=se("label"),u=se("span"),a=Ze("Pick a model to use for prompt embedding"),l=Ge(),o=se("select"),h=se("option"),p=Ze("Pick one");for(let b=0;b<c.length;b+=1)c[b].c();this.h()},l(b){t=oe(b,"DIV",{class:!0});var C=ie(t);r=oe(C,"DIV",{class:!0});var w=ie(r);n=oe(w,"LABEL",{class:!0});var B=ie(n);u=oe(B,"SPAN",{class:!0});var S=ie(u);a=$e(S,"Pick a model to use for prompt embedding"),S.forEach(V),B.forEach(V),l=Ke(w),o=oe(w,"SELECT",{class:!0});var O=ie(o);h=oe(O,"OPTION",{});var P=ie(h);p=$e(P,"Pick one"),P.forEach(V);for(let I=0;I<c.length;I+=1)c[I].l(O);O.forEach(V),w.forEach(V),C.forEach(V),this.h()},h(){T(u,"class","label-text"),T(n,"class","label"),h.disabled=!0,h.selected=f=e[3]===null,h.__value="Pick one",h.value=h.__value,T(o,"class","select select-bordered"),T(r,"class","form-control w-full max-w-xs mb-4"),T(t,"class","flex justify-center")},m(b,C){Ce(b,t,C),Y(t,r),Y(r,n),Y(n,u),Y(u,a),Y(r,l),Y(r,o),Y(o,h),Y(h,p);for(let w=0;w<c.length;w+=1)c[w]&&c[w].m(o,null);vu(o,e[3]),m||(y=ke(o,"change",e[8]),m=!0)},p(b,C){C&10&&f!==(f=b[3]===null)&&(h.selected=f),C&10&&(g=b[1],c=Si(c,C,_,1,b,g,d,o,_u,Fd,null,yd)),C&10&&vu(o,b[3])},d(b){b&&V(t);for(let C=0;C<c.length;C+=1)c[C].d();m=!1,y()}}}function Fd(e,t){let r,n=t[20]+"",u,a,l;return{key:e,first:null,c(){r=se("option"),u=Ze(n),this.h()},l(o){r=oe(o,"OPTION",{});var h=ie(r);u=$e(h,n),h.forEach(V),this.h()},h(){r.__value=a=t[20],r.value=r.__value,r.selected=l=t[3]===t[20],this.first=r},m(o,h){Ce(o,r,h),Y(r,u)},p(o,h){t=o,h&2&&n!==(n=t[20]+"")&&Pn(u,n),h&2&&a!==(a=t[20])&&(r.__value=a,r.value=r.__value),h&10&&l!==(l=t[3]===t[20])&&(r.selected=l)},d(o){o&&V(r)}}}function f5(e){let t,r,n;return{c(){t=se("div"),r=se("div"),n=se("progress"),this.h()},l(u){t=oe(u,"DIV",{class:!0});var a=ie(t);r=oe(a,"DIV",{class:!0});var l=ie(r);n=oe(l,"PROGRESS",{class:!0}),ie(n).forEach(V),l.forEach(V),a.forEach(V),this.h()},h(){T(n,"class","progress progress-primary w-56"),T(r,"class","form-control w-full flex flex-col max-w-xs"),T(t,"class","py-10 flex justify-center")},m(u,a){Ce(u,t,a),Y(t,r),Y(r,n)},p:Ie,d(u){u&&V(t)}}}function c5(e){let t,r,n,u,a,l,o,h,p,f,c,d,m,y,g,_,b,C,w,B,S,O,P,I,N={ctx:e,current:null,token:null,hasCatch:!1,pending:f5,then:l5,catch:o5,value:19};return Ei(O=e[4],N),{c(){t=se("div"),r=se("div"),n=se("div"),u=se("label"),a=se("span"),l=Ze("Include Prompts With Zero Weight"),o=Ge(),h=se("input"),p=Ge(),f=se("div"),c=se("div"),d=se("label"),m=se("span"),y=Ze("Open AI Key"),g=Ge(),_=se("input"),b=Ge(),C=se("label"),w=se("button"),B=Ze("Clear"),S=Ge(),N.block.c(),this.h()},l(G){t=oe(G,"DIV",{class:!0});var L=ie(t);r=oe(L,"DIV",{class:!0});var q=ie(r);n=oe(q,"DIV",{class:!0});var $=ie(n);u=oe($,"LABEL",{class:!0});var H=ie(u);a=oe(H,"SPAN",{class:!0});var z=ie(a);l=$e(z,"Include Prompts With Zero Weight"),z.forEach(V),H.forEach(V),o=Ke($),h=oe($,"INPUT",{type:!0,class:!0}),$.forEach(V),q.forEach(V),p=Ke(L),f=oe(L,"DIV",{class:!0});var W=ie(f);c=oe(W,"DIV",{class:!0});var re=ie(c);d=oe(re,"LABEL",{class:!0});var ee=ie(d);m=oe(ee,"SPAN",{class:!0});var Q=ie(m);y=$e(Q,"Open AI Key"),Q.forEach(V),ee.forEach(V),g=Ke(re),_=oe(re,"INPUT",{type:!0,placeholder:!0,class:!0}),b=Ke(re),C=oe(re,"LABEL",{class:!0});var le=ie(C);w=oe(le,"BUTTON",{class:!0});var me=ie(w);B=$e(me,"Clear"),me.forEach(V),le.forEach(V),re.forEach(V),W.forEach(V),S=Ke(L),N.block.l(L),L.forEach(V),this.h()},h(){T(a,"class","label-text-alt"),T(u,"class","label"),T(h,"type","checkbox"),T(h,"class","toggle"),h.checked=e[5],T(n,"class","form-control w-full max-w-xs"),T(r,"class","flex justify-center"),T(m,"class","label-text-alt"),T(d,"class","label"),_.value=e[6],T(_,"type","password"),T(_,"placeholder","Open AI Key"),T(_,"class","input input-bordered w-full max-w-xs"),T(w,"class","btn btn-xs btn-error"),T(C,"class","label"),T(c,"class","form-control w-full max-w-xs"),T(f,"class","flex justify-center"),T(t,"class","h-full p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(G,L){Ce(G,t,L),Y(t,r),Y(r,n),Y(n,u),Y(u,a),Y(a,l),Y(n,o),Y(n,h),Y(t,p),Y(t,f),Y(f,c),Y(c,d),Y(d,m),Y(m,y),Y(c,g),Y(c,_),Y(c,b),Y(c,C),Y(C,w),Y(w,B),Y(t,S),N.block.m(t,N.anchor=null),N.mount=()=>t,N.anchor=null,P||(I=[ke(h,"change",e[11]),ke(_,"input",e[9]),ke(w,"click",e[10])],P=!0)},p(G,[L]){e=G,L&32&&(h.checked=e[5]),L&64&&_.value!==e[6]&&(_.value=e[6]),N.ctx=e,L&16&&O!==(O=e[4])&&Ei(O,N)||Bs(N,e,L)},i:Ie,o:Ie,d(G){G&&V(t),N.block.d(),N.token=null,N=null,P=!1,Ur(I)}}}function h5(e,t,r){let n,u,a,l,o;Bt(e,qp,O=>r(5,n=O)),Bt(e,yn,O=>r(13,u=O)),Bt(e,jp,O=>r(14,a=O)),Bt(e,Yp,O=>r(15,l=O)),Bt(e,Af,O=>r(6,o=O));const h=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001","gpt-3.5-turbo","gpt-3.5-turbo-0301"],p=["text-embedding-ada-002"];let f=o,c=[],d=[],m=l,y=a,g=null;async function _(O){if(!O||c.length&&d.length)return;const P=yf(O);r(4,g=GF(P));const I=await g;I.data&&r(0,c=I.data.data.map(({id:N})=>N).filter(N=>h.includes(N))),r(1,d=I.data.data.map(({id:N})=>N).filter(N=>p.includes(N)))}function b(O){r(2,m=O.target.value),tf.update(m)}function C(O){r(3,y=O.target.value),Jl.update(y)}function w(O){const P=O.target.value;As.update(P),P.length===51&&_(P),P.length===0&&B()}function B(){As.delete(),r(12,f=""),r(0,c=[]),r(1,d=[]),u.weightMode==="embed"&&Ot.update({...u,weightMode:"circle"})}function S(){Ql.update(!n)}return e.$$.update=()=>{e.$$.dirty&4096&&_(f)},[c,d,m,y,g,n,o,b,C,w,B,S,f]}class d5 extends kt{constructor(t){super(),Rt(this,t,h5,c5,Lt,{})}}function p5(e){let t,r;return t=new d5({}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,u){gt(t,n,u),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function v5(e){let t,r;return t=new s5({}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,u){gt(t,n,u),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function g5(e){let t,r;return t=new kS({}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,u){gt(t,n,u),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function m5(e){let t,r;return t=new M3({}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,u){gt(t,n,u),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function _5(e){let t,r,n,u,a,l,o,h,p,f,c,d,m,y,g,_,b,C,w,B,S,O,P,I;const N=[m5,g5,v5,p5],G=[];function L(q,$){return q[0]==="select"?0:q[0]==="edit"?1:q[0]==="generate"?2:q[0]==="settings"?3:-1}return~(B=L(e))&&(S=G[B]=N[B](e)),{c(){t=se("div"),r=se("div"),n=se("div"),u=se("button"),a=Ze("Select"),o=Ge(),h=se("button"),p=Ze("Edit"),c=Ge(),d=se("button"),m=Ze("Generate"),g=Ge(),_=se("button"),b=Ze("Settings"),w=Ge(),S&&S.c(),this.h()},l(q){t=oe(q,"DIV",{class:!0});var $=ie(t);r=oe($,"DIV",{class:!0});var H=ie(r);n=oe(H,"DIV",{class:!0});var z=ie(n);u=oe(z,"BUTTON",{class:!0});var W=ie(u);a=$e(W,"Select"),W.forEach(V),o=Ke(z),h=oe(z,"BUTTON",{class:!0});var re=ie(h);p=$e(re,"Edit"),re.forEach(V),c=Ke(z),d=oe(z,"BUTTON",{class:!0});var ee=ie(d);m=$e(ee,"Generate"),ee.forEach(V),g=Ke(z),_=oe(z,"BUTTON",{class:!0});var Q=ie(_);b=$e(Q,"Settings"),Q.forEach(V),z.forEach(V),w=Ke(H),S&&S.l(H),H.forEach(V),$.forEach(V),this.h()},h(){T(u,"class",l=e[0]==="select"?"btn btn-active":"btn"),T(h,"class",f=e[0]==="edit"?"btn btn-active":"btn"),T(d,"class",y=e[0]==="generate"?"btn btn-active":"btn"),T(_,"class",C=e[0]==="settings"?"btn btn-active":"btn"),T(n,"class","btn-group btn-group-vertical sm:btn-group-horizontal bg-base-100 w-full flex justify-center p-2"),T(r,"class","h-screen overflow-y-auto flex flex-col"),T(t,"class","max-w-md w-1/2 h-screen overflow-y-auto")},m(q,$){Ce(q,t,$),Y(t,r),Y(r,n),Y(n,u),Y(u,a),Y(n,o),Y(n,h),Y(h,p),Y(n,c),Y(n,d),Y(d,m),Y(n,g),Y(n,_),Y(_,b),Y(r,w),~B&&G[B].m(r,null),O=!0,P||(I=[ke(u,"click",e[2]),ke(h,"click",e[3]),ke(d,"click",e[4]),ke(_,"click",e[5])],P=!0)},p(q,[$]){(!O||$&1&&l!==(l=q[0]==="select"?"btn btn-active":"btn"))&&T(u,"class",l),(!O||$&1&&f!==(f=q[0]==="edit"?"btn btn-active":"btn"))&&T(h,"class",f),(!O||$&1&&y!==(y=q[0]==="generate"?"btn btn-active":"btn"))&&T(d,"class",y),(!O||$&1&&C!==(C=q[0]==="settings"?"btn btn-active":"btn"))&&T(_,"class",C);let H=B;B=L(q),B!==H&&(S&&(_n(),Ue(G[H],1,1,()=>{G[H]=null}),Dn()),~B?(S=G[B],S||(S=G[B]=N[B](q),S.c()),xe(S,1),S.m(r,null)):S=null)},i(q){O||(xe(S),O=!0)},o(q){Ue(S),O=!1},d(q){q&&V(t),~B&&G[B].d(),P=!1,Ur(I)}}}function D5(e,t,r){let n;Bt(e,S3,p=>r(0,n=p));function u(p){Wn.update(p)}const a=()=>u("select"),l=()=>u("edit"),o=()=>u("generate"),h=()=>u("settings");return e.$$.update=()=>{e.$$.dirty&1&&(n||Wn.update("select"))},[n,u,a,l,o,h]}class b5 extends kt{constructor(t){super(),Rt(this,t,D5,_5,Lt,{})}}function y5(e){let t,r,n,u;return t=new b5({}),n=new w3({}),{c(){pt(t.$$.fragment),r=Ge(),pt(n.$$.fragment)},l(a){vt(t.$$.fragment,a),r=Ke(a),vt(n.$$.fragment,a)},m(a,l){gt(t,a,l),Ce(a,r,l),gt(n,a,l),u=!0},p:Ie,i(a){u||(xe(t.$$.fragment,a),xe(n.$$.fragment,a),u=!0)},o(a){Ue(t.$$.fragment,a),Ue(n.$$.fragment,a),u=!1},d(a){mt(t,a),a&&V(r),mt(n,a)}}}class E5 extends kt{constructor(t){super(),Rt(this,t,null,y5,Lt,{})}}export{E5 as default};
