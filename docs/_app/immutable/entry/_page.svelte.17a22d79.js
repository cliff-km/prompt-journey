import{S as yt,i as wt,s as At,J as dt,K as pt,m as $,h as I,n as O,b as _e,G as R,H as Me,L as Ct,k as Q,y as $e,a as xe,l as ee,z as Ke,c as Ne,M as Pt,A as Ye,N as Fe,g as Ae,d as Se,B as Ze,O as ar,I as ct,p as Yt,q as Ve,r as je,u as rn,v as Nr,f as Rr,e as It,P as Ls,Q as wu,R as oa,T as tn,U as hp,V as fl,W as Kn,X as dp,Y as Bi,Z as Us,_ as Ti,$ as Oi,a0 as By}from"../chunks/index.3ecf25e2.js";import{d as Kr,w as Yr}from"../chunks/index.e812f28f.js";var vt=(t=>(t.Circle="circle",t.Ring="ring",t.Bars="bars",t.Embed="embed",t.Pie="pie",t))(vt||{});function Oy(t){let e,r,n,i;return{c(){e=dt("svg"),r=dt("rect"),n=dt("rect"),i=dt("rect"),this.h()},l(u){e=pt(u,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var o=$(e);r=pt(o,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),$(r).forEach(I),n=pt(o,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),$(n).forEach(I),i=pt(o,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),$(i).forEach(I),o.forEach(I),this.h()},h(){O(r,"x","5"),O(r,"y","12"),O(r,"width","40"),O(r,"height","4"),O(r,"fill","rgba(255,255,255, 0.7)"),O(n,"x","5"),O(n,"y","23"),O(n,"width","30"),O(n,"height","4"),O(n,"fill","rgba(255,255,255, 0.7)"),O(i,"x","5"),O(i,"y","34"),O(i,"width","35"),O(i,"height","4"),O(i,"fill","rgba(255,255,255, 0.7)"),O(e,"xmlns","http://www.w3.org/2000/svg"),O(e,"fill","rgba(255,255,255, 0.7)"),O(e,"class","h-6 w-6"),O(e,"viewBox","0 0 50 50")},m(u,o){_e(u,e,o),R(e,r),R(e,n),R(e,i)},p:Me,i:Me,o:Me,d(u){u&&I(e)}}}class My extends yt{constructor(e){super(),wt(this,e,null,Oy,At,{})}}function Py(t){let e,r;return{c(){e=dt("svg"),r=dt("circle"),this.h()},l(n){e=pt(n,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var i=$(e);r=pt(i,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),$(r).forEach(I),i.forEach(I),this.h()},h(){O(r,"cx","25"),O(r,"cy","25"),O(r,"r","20"),O(r,"fill","rgba(255,255,255, 0.7)"),O(e,"xmlns","http://www.w3.org/2000/svg"),O(e,"fill","rgba(255,255,255, 0.7)"),O(e,"class","h-6 w-6"),O(e,"viewBox","0 0 50 50")},m(n,i){_e(n,e,i),R(e,r)},p:Me,i:Me,o:Me,d(n){n&&I(e)}}}class Ty extends yt{constructor(e){super(),wt(this,e,null,Py,At,{})}}function ky(t){let e,r,n,i,u,o;return{c(){e=dt("svg"),r=dt("circle"),n=dt("circle"),i=dt("circle"),u=dt("circle"),o=dt("circle"),this.h()},l(s){e=pt(s,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var c=$(e);r=pt(c,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),$(r).forEach(I),n=pt(c,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),$(n).forEach(I),i=pt(c,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),$(i).forEach(I),u=pt(c,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),$(u).forEach(I),o=pt(c,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),$(o).forEach(I),c.forEach(I),this.h()},h(){O(r,"cx","20"),O(r,"cy","80"),O(r,"r","5"),O(r,"fill","rgba(255,255,255, 0.7)"),O(n,"cx","40"),O(n,"cy","40"),O(n,"r","5"),O(n,"fill","rgba(255,255,255, 0.7)"),O(i,"cx","70"),O(i,"cy","20"),O(i,"r","5"),O(i,"fill","rgba(255,255,255, 0.7)"),O(u,"cx","80"),O(u,"cy","60"),O(u,"r","5"),O(u,"fill","rgba(255,255,255, 0.7)"),O(o,"cx","60"),O(o,"cy","75"),O(o,"r","5"),O(o,"fill","rgba(255,255,255, 0.7)"),O(e,"xmlns","http://www.w3.org/2000/svg"),O(e,"fill","rgba(255,255,255, 0.7)"),O(e,"class","h-6 w-6"),O(e,"viewBox","0 0 100 100")},m(s,c){_e(s,e,c),R(e,r),R(e,n),R(e,i),R(e,u),R(e,o)},p:Me,i:Me,o:Me,d(s){s&&I(e)}}}class Iy extends yt{constructor(e){super(),wt(this,e,null,ky,At,{})}}const cl="selectedPromptStore";function xy(){const t=Yr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[cl]||""),{subscribe:e,update:u=>{!u||!i||(localStorage[cl]=u,r(u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[cl],r(""))}}}const Ki=xy(),pp=Kr(Ki,t=>Ct(Ki));function Ny(){const t=Yr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((u,o)=>{if(o.startsWith("prompt")){const s=o.split("_")[1];u[s]=JSON.parse(localStorage[o])}return u},{})||{}),{subscribe:e,update:(u,o)=>{const s=Ct(t),p={...s[u]||{},...o};i&&(localStorage[`prompt_${u}`]=JSON.stringify(p));const f={...s,[u]:p};r(f)},get:u=>Ct(t)[u],delete:u=>{i&&delete localStorage[`prompt_${u}`];const o={...Ct(t)};delete o[u],r(o)}}}const na=Ny(),Ry=Kr(na,t=>Object.entries(Ct(na))),Ja="activePromptStore";function Pr(t,e,r,n=1){return{id:t,text:e,barWeight:n,parsedWeight:r}}function s0(){return{0:Pr(0,"Magic potion in a mystical bottle",1),1:Pr(1,"A crystalline decanter",1),2:Pr(2,"An ornate tequila bottle",1),3:Pr(3,"An antique sake bottle",1),4:Pr(4,"A colorful perfume bottle",1),5:Pr(5,"A glass vase full of vibrant flowers",1),6:Pr(6,"A minimalist glass tea kettle",1),7:Pr(7,"Chihuly glass art",1),8:Pr(8,"A fine wine bottle",1),9:Pr(9,"A gourmet vinegar bottle",1),10:Pr(10,"A stunning fishbowl",1),11:Pr(11,"A striking piece of tourmaline",1),12:Pr(12,"A finely cut piece of sapphire",1),13:Pr(13,"Iittala glass art",1)}}function Ci(t,e=vt.Pie){return{weightedPrompts:t||{},weightMode:e,pieAngles:{},ringAngles:{},ringStartAngle:0,ringReverse:!1,ringWeightScaling:2,ringExponentialScaling:!0,circleAngles:{},circleMarker:[270,.33],circleWeightScaling:2,circleExponentialScaling:!0,embeddings:{},embedWeightScaling:2,embedExponentialScaling:!0,embedClusters:0,embedPromptLimit:Object.keys(t).length}}function Ly(){const t=Yr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",u=i&&localStorage[Ja]?JSON.parse(localStorage[Ja]):Ci(s0());return r({...Ci({}),...u}),{subscribe:e,update:o=>{const s=Ki.get();s&&na.update(s,o),!(!o||!i)&&(localStorage[Ja]=JSON.stringify(o),r({...Ci({}),...o}))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[Ja],r(Ci(s0())))}}}const Mt=Ly(),Cr=Kr(Mt,t=>Ct(Mt));function Uy(t){let e,r,n,i,u,o,s,c,p,f,h,d;return n=new My({}),o=new Ty({}),p=new Iy({}),{c(){e=Q("div"),r=Q("button"),$e(n.$$.fragment),i=xe(),u=Q("button"),$e(o.$$.fragment),s=xe(),c=Q("button"),$e(p.$$.fragment),this.h()},l(g){e=ee(g,"DIV",{class:!0});var b=$(e);r=ee(b,"BUTTON",{class:!0});var m=$(r);Ke(n.$$.fragment,m),m.forEach(I),i=Ne(b),u=ee(b,"BUTTON",{class:!0});var _=$(u);Ke(o.$$.fragment,_),_.forEach(I),s=Ne(b),c=ee(b,"BUTTON",{class:!0});var D=$(c);Ke(p.$$.fragment,D),D.forEach(I),b.forEach(I),this.h()},h(){O(r,"class","btn btn-sm"),Pt(r,"btn-active",t[0].weightMode===vt.Bars),O(u,"class","btn btn-sm"),Pt(u,"btn-active",t[0].weightMode===vt.Circle||t[0].weightMode===vt.Pie||t[0].weightMode===vt.Ring),O(c,"class","btn btn-sm"),Pt(c,"btn-active",t[0].weightMode===vt.Embed),O(e,"class","btn-group btn-group-horizontal w-full flex justify-end p-2")},m(g,b){_e(g,e,b),R(e,r),Ye(n,r,null),R(e,i),R(e,u),Ye(o,u,null),R(e,s),R(e,c),Ye(p,c,null),f=!0,h||(d=[Fe(r,"click",t[2]),Fe(u,"click",t[3]),Fe(c,"click",t[4])],h=!0)},p(g,[b]){(!f||b&1)&&Pt(r,"btn-active",g[0].weightMode===vt.Bars),(!f||b&1)&&Pt(u,"btn-active",g[0].weightMode===vt.Circle||g[0].weightMode===vt.Pie||g[0].weightMode===vt.Ring),(!f||b&1)&&Pt(c,"btn-active",g[0].weightMode===vt.Embed)},i(g){f||(Ae(n.$$.fragment,g),Ae(o.$$.fragment,g),Ae(p.$$.fragment,g),f=!0)},o(g){Se(n.$$.fragment,g),Se(o.$$.fragment,g),Se(p.$$.fragment,g),f=!1},d(g){g&&I(e),Ze(n),Ze(o),Ze(p),h=!1,ar(d)}}}function Vy(t,e,r){let n;ct(t,Cr,c=>r(0,n=c));function i(c){const p={...n,weightMode:c};Mt.update(p)}return[n,i,()=>i(vt.Bars),()=>i(vt.Pie),()=>i(vt.Embed)]}class jy extends yt{constructor(e){super(),wt(this,e,Vy,Uy,At,{})}}function qy(t){let e,r,n,i;return{c(){e=dt("svg"),r=dt("path"),n=dt("path"),i=dt("path"),this.h()},l(u){e=pt(u,"svg",{xmlns:!0,class:!0,viewBox:!0});var o=$(e);r=pt(o,"path",{d:!0,fill:!0}),$(r).forEach(I),n=pt(o,"path",{d:!0,fill:!0}),$(n).forEach(I),i=pt(o,"path",{d:!0,fill:!0}),$(i).forEach(I),o.forEach(I),this.h()},h(){O(r,"d","M50 50 L50 10 A40 40 0 0 1 90 50 z"),O(r,"fill","rgba(255,255,255, 0.7)"),O(n,"d","M50 50 L90 50 A40 40 0 0 1 50 90 z"),O(n,"fill","rgba(255,255,255, 0.3)"),O(i,"d","M50 50 L50 90 A40 40 0 0 1 10 50 z"),O(i,"fill","rgba(255,255,255, 0.9)"),O(e,"xmlns","http://www.w3.org/2000/svg"),O(e,"class","h-5 w-5"),O(e,"viewBox","0 0 100 100")},m(u,o){_e(u,e,o),R(e,r),R(e,n),R(e,i)},p:Me,i:Me,o:Me,d(u){u&&I(e)}}}class zy extends yt{constructor(e){super(),wt(this,e,null,qy,At,{})}}function Wy(t){let e,r,n;return{c(){e=dt("svg"),r=dt("circle"),n=dt("circle"),this.h()},l(i){e=pt(i,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var u=$(e);r=pt(u,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),$(r).forEach(I),n=pt(u,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),$(n).forEach(I),u.forEach(I),this.h()},h(){O(r,"cx","25"),O(r,"cy","25"),O(r,"r","20"),O(r,"stroke","rgba(255,255,255, 0.7)"),O(r,"stroke-width","4"),O(r,"fill","none"),O(n,"cx","25"),O(n,"cy","25"),O(n,"r","4"),O(n,"stroke","rgba(255,255,255, 0.7)"),O(n,"stroke-width","1"),O(n,"fill","rgba(255,255,255, 0.7)"),O(e,"xmlns","http://www.w3.org/2000/svg"),O(e,"fill","rgba(255,255,255, 0.7)"),O(e,"class","h-5 w-5"),O(e,"viewBox","0 0 50 50")},m(i,u){_e(i,e,u),R(e,r),R(e,n)},p:Me,i:Me,o:Me,d(i){i&&I(e)}}}class Hy extends yt{constructor(e){super(),wt(this,e,null,Wy,At,{})}}function Gy(t){let e,r,n,i,u;return{c(){e=dt("svg"),r=dt("mask"),n=dt("circle"),i=dt("path"),u=dt("circle"),this.h()},l(o){e=pt(o,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var s=$(e);r=pt(s,"mask",{id:!0});var c=$(r);n=pt(c,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),$(n).forEach(I),i=pt(c,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),$(i).forEach(I),c.forEach(I),u=pt(s,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,mask:!0}),$(u).forEach(I),s.forEach(I),this.h()},h(){O(n,"cx","25"),O(n,"cy","25"),O(n,"r","20"),O(n,"stroke","white"),O(n,"stroke-width","6"),O(n,"fill","none"),O(i,"d","M40,22 L45,27 L50,22"),O(i,"stroke","black"),O(i,"stroke-width","4"),O(i,"fill","none"),O(r,"id","hole"),O(u,"cx","25"),O(u,"cy","25"),O(u,"r","20"),O(u,"stroke","rgba(255,255,255, 0.7)"),O(u,"stroke-width","4"),O(u,"fill","none"),O(u,"mask","url(#hole)"),O(e,"xmlns","http://www.w3.org/2000/svg"),O(e,"fill","rgba(255,255,255, 0.7)"),O(e,"class","h-5 w-5"),O(e,"viewBox","0 0 50 50")},m(o,s){_e(o,e,s),R(e,r),R(r,n),R(r,i),R(e,u)},p:Me,i:Me,o:Me,d(o){o&&I(e)}}}class $y extends yt{constructor(e){super(),wt(this,e,null,Gy,At,{})}}function Ky(t){let e,r,n,i,u,o,s,c,p,f,h,d;return n=new zy({}),o=new Hy({}),p=new $y({}),{c(){e=Q("div"),r=Q("button"),$e(n.$$.fragment),i=xe(),u=Q("button"),$e(o.$$.fragment),s=xe(),c=Q("button"),$e(p.$$.fragment),this.h()},l(g){e=ee(g,"DIV",{class:!0});var b=$(e);r=ee(b,"BUTTON",{class:!0});var m=$(r);Ke(n.$$.fragment,m),m.forEach(I),i=Ne(b),u=ee(b,"BUTTON",{class:!0});var _=$(u);Ke(o.$$.fragment,_),_.forEach(I),s=Ne(b),c=ee(b,"BUTTON",{class:!0});var D=$(c);Ke(p.$$.fragment,D),D.forEach(I),b.forEach(I),this.h()},h(){O(r,"class","btn btn-xs"),Pt(r,"btn-active",t[0].weightMode===vt.Pie),O(u,"class","btn btn-xs"),Pt(u,"btn-active",t[0].weightMode===vt.Circle),O(c,"class","btn btn-xs"),Pt(c,"btn-active",t[0].weightMode===vt.Ring),O(e,"class","btn-group btn-group-horizontal w-full flex justify-center p-1")},m(g,b){_e(g,e,b),R(e,r),Ye(n,r,null),R(e,i),R(e,u),Ye(o,u,null),R(e,s),R(e,c),Ye(p,c,null),f=!0,h||(d=[Fe(r,"click",t[2]),Fe(u,"click",t[3]),Fe(c,"click",t[4])],h=!0)},p(g,[b]){(!f||b&1)&&Pt(r,"btn-active",g[0].weightMode===vt.Pie),(!f||b&1)&&Pt(u,"btn-active",g[0].weightMode===vt.Circle),(!f||b&1)&&Pt(c,"btn-active",g[0].weightMode===vt.Ring)},i(g){f||(Ae(n.$$.fragment,g),Ae(o.$$.fragment,g),Ae(p.$$.fragment,g),f=!0)},o(g){Se(n.$$.fragment,g),Se(o.$$.fragment,g),Se(p.$$.fragment,g),f=!1},d(g){g&&I(e),Ze(n),Ze(o),Ze(p),h=!1,ar(d)}}}function Yy(t,e,r){let n;ct(t,Cr,c=>r(0,n=c));function i(c){const p={...n,weightMode:c};Mt.update(p)}return[n,i,()=>i(vt.Pie),()=>i(vt.Circle),()=>i(vt.Ring)]}class Zy extends yt{constructor(e){super(),wt(this,e,Yy,Ky,At,{})}}function $l(){return $l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$l.apply(this,arguments)}var gp={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function tr(t){return typeof t=="number"}function Fn(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function vp(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function mp(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function _p(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Hn(t){return typeof t=="string"}var Qt=Array.isArray;function $r(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function fs(t){return Array.isArray(t)||$r(t)}function Xy(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Jy(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Qy(t){return t&&t.constructor.prototype.isRange===!0||!1}function yf(t){return t&&t.constructor.prototype.isIndex===!0||!1}function ew(t){return typeof t=="boolean"}function tw(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function rw(t){return t&&t.constructor.prototype.isHelp===!0||!1}function nw(t){return typeof t=="function"}function iw(t){return t instanceof Date}function uw(t){return t instanceof RegExp}function aw(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!vp(t)&&!mp(t))}function sw(t){return t===null}function wf(t){return t===void 0}function ow(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function lw(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function fw(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function cw(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function hw(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function dw(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function pw(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function gw(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function vw(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function mw(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function _w(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function Dw(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function bw(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function yw(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function ww(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Aw(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ew(t){return t&&t.constructor.prototype.isChain===!0||!1}function ra(t){var e=typeof t;return e==="object"?t===null?"null":Fn(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function wr(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return wr(r)});if(t instanceof Date)return new Date(t.valueOf());if(Fn(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return Cw(t,wr)}function Cw(t,e){var r={};for(var n in t)ia(t,n)&&(r[n]=e(t[n]));return r}function Fw(t,e){for(var r in e)ia(e,r)&&(t[r]=e[r]);return t}function cs(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!cs(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!cs(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function ia(t,e){return t&&Object.hasOwnProperty.call(t,e)}function Sw(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],u=t[i];u!==void 0&&(r[i]=u)}return r}var Bw=["Matrix","Array"],Ow=["number","BigNumber","Fraction"],Vs=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(gp)};$l(Vs,gp,{MATRIX_OPTIONS:Bw,NUMBER_OPTIONS:Ow});function In(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Mw(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,o=!1,s;return{s:function(){r=r.call(t)},n:function(){var p=r.next();return u=p.done,p},e:function(p){o=!0,s=p},f:function(){try{!u&&r.return!=null&&r.return()}finally{if(o)throw s}}}}function Mw(t,e){if(t){if(typeof t=="string")return o0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o0(t,e)}}function o0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vu(t){return vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vu(t)}function l0(){return!0}function En(){return!1}function du(){}var f0="Argument is not a typed-function.";function Dp(){function t(j){return vu(j)==="object"&&j!==null&&j.constructor===Object}var e=[{name:"number",test:function(H){return typeof H=="number"}},{name:"string",test:function(H){return typeof H=="string"}},{name:"boolean",test:function(H){return typeof H=="boolean"}},{name:"Function",test:function(H){return typeof H=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(H){return H instanceof Date}},{name:"RegExp",test:function(H){return H instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(H){return H===null}},{name:"undefined",test:function(H){return H===void 0}}],r={name:"any",test:l0,isAny:!0},n,i,u=0,o={createCount:0};function s(j){var H=n.get(j);if(H)return H;var te='Unknown type "'+j+'"',fe=j.toLowerCase(),ae,he=In(i),se;try{for(he.s();!(se=he.n()).done;)if(ae=se.value,ae.toLowerCase()===fe){te+='. Did you mean "'+ae+'" ?';break}}catch(ce){he.e(ce)}finally{he.f()}throw new TypeError(te)}function c(j){for(var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",te=H?s(H).index:i.length,fe=[],ae=0;ae<j.length;++ae){if(!j[ae]||typeof j[ae].name!="string"||typeof j[ae].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var he=j[ae].name;if(n.has(he))throw new TypeError('Duplicate type name "'+he+'"');fe.push(he),n.set(he,{name:he,test:j[ae].test,isAny:j[ae].isAny,index:te+ae,conversionsTo:[]})}var se=i.slice(te);i=i.slice(0,te).concat(fe).concat(se);for(var ce=te+fe.length;ce<i.length;++ce)n.get(i[ce]).index=ce}function p(){n=new Map,i=[],u=0,c([r],!1)}p(),c(e);function f(){var j,H=In(i),te;try{for(H.s();!(te=H.n()).done;)j=te.value,n.get(j).conversionsTo=[]}catch(fe){H.e(fe)}finally{H.f()}u=0}function h(j){var H=i.filter(function(te){var fe=n.get(te);return!fe.isAny&&fe.test(j)});return H.length?H:["any"]}function d(j){return j&&typeof j=="function"&&"_typedFunctionData"in j}function g(j,H,te){if(!d(j))throw new TypeError(f0);var fe=te&&te.exact,ae=Array.isArray(H)?H.join(","):H,he=S(ae),se=_(he);if(!fe||se in j.signatures){var ce=j._typedFunctionData.signatureMap.get(se);if(ce)return ce}var we=he.length,Re;if(fe){Re=[];var rt;for(rt in j.signatures)Re.push(j._typedFunctionData.signatureMap.get(rt))}else Re=j._typedFunctionData.signatures;for(var Be=0;Be<we;++Be){var zt=he[Be],xt=[],rr=void 0,Zt=In(Re),_r;try{for(Zt.s();!(_r=Zt.n()).done;){rr=_r.value;var Xt=T(rr.params,Be);if(!(!Xt||zt.restParam&&!Xt.restParam)){if(!Xt.hasAny){var Dr=function(){var pr=A(Xt);if(zt.types.some(function(Bn){return!pr.has(Bn.name)}))return"continue"}();if(Dr==="continue")continue}xt.push(rr)}}}catch(pr){Zt.e(pr)}finally{Zt.f()}if(Re=xt,Re.length===0)break}var cr,hr=In(Re),dn;try{for(hr.s();!(dn=hr.n()).done;)if(cr=dn.value,cr.params.length<=we)return cr}catch(pr){hr.e(pr)}finally{hr.f()}throw new TypeError("Signature not found (signature: "+(j.name||"unnamed")+"("+_(he,", ")+"))")}function b(j,H,te){return g(j,H,te).implementation}function m(j,H){var te=s(H);if(te.test(j))return j;var fe=te.conversionsTo;if(fe.length===0)throw new Error("There are no conversions to "+H+" defined.");for(var ae=0;ae<fe.length;ae++){var he=s(fe[ae].from);if(he.test(j))return fe[ae].convert(j)}throw new Error("Cannot convert "+j+" to "+H)}function _(j){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return j.map(function(te){return te.name}).join(H)}function D(j){var H=j.indexOf("...")===0,te=H?j.length>3?j.slice(3):"any":j,fe=te.split("|").map(function(ce){return s(ce.trim())}),ae=!1,he=H?"...":"",se=fe.map(function(ce){return ae=ce.isAny||ae,he+=ce.name+"|",{name:ce.name,typeIndex:ce.index,test:ce.test,isAny:ce.isAny,conversion:null,conversionIndex:-1}});return{types:se,name:he.slice(0,-1),hasAny:ae,hasConversion:!1,restParam:H}}function C(j){var H=j.types.map(function(se){return se.name}),te=J(H),fe=j.hasAny,ae=j.name,he=te.map(function(se){var ce=s(se.from);return fe=ce.isAny||fe,ae+="|"+se.from,{name:se.from,typeIndex:ce.index,test:ce.test,isAny:ce.isAny,conversion:se,conversionIndex:se.index}});return{types:j.types.concat(he),name:ae,hasAny:fe,hasConversion:he.length>0,restParam:j.restParam}}function A(j){return j.typeSet||(j.typeSet=new Set,j.types.forEach(function(H){return j.typeSet.add(H.name)})),j.typeSet}function S(j){var H=[];if(typeof j!="string")throw new TypeError("Signatures must be strings");var te=j.trim();if(te==="")return H;for(var fe=te.split(","),ae=0;ae<fe.length;++ae){var he=D(fe[ae].trim());if(he.restParam&&ae!==fe.length-1)throw new SyntaxError('Unexpected rest parameter "'+fe[ae]+'": only allowed for the last parameter');if(he.types.length===0)return null;H.push(he)}return H}function E(j){var H=Ue(j);return H?H.restParam:!1}function B(j){if(!j||j.types.length===0)return l0;if(j.types.length===1)return s(j.types[0].name).test;if(j.types.length===2){var H=s(j.types[0].name).test,te=s(j.types[1].name).test;return function(he){return H(he)||te(he)}}else{var fe=j.types.map(function(ae){return s(ae.name).test});return function(he){for(var se=0;se<fe.length;se++)if(fe[se](he))return!0;return!1}}}function P(j){var H,te,fe;if(E(j)){H=He(j).map(B);var ae=H.length,he=B(Ue(j)),se=function(we){for(var Re=ae;Re<we.length;Re++)if(!he(we[Re]))return!1;return!0};return function(we){for(var Re=0;Re<H.length;Re++)if(!H[Re](we[Re]))return!1;return se(we)&&we.length>=ae+1}}else return j.length===0?function(we){return we.length===0}:j.length===1?(te=B(j[0]),function(we){return te(we[0])&&we.length===1}):j.length===2?(te=B(j[0]),fe=B(j[1]),function(we){return te(we[0])&&fe(we[1])&&we.length===2}):(H=j.map(B),function(we){for(var Re=0;Re<H.length;Re++)if(!H[Re](we[Re]))return!1;return we.length===H.length})}function T(j,H){return H<j.length?j[H]:E(j)?Ue(j):null}function N(j,H){var te=T(j,H);return te?A(te):new Set}function G(j){return j.conversion===null||j.conversion===void 0}function re(j,H){var te=new Set;return j.forEach(function(fe){var ae=N(fe.params,H),he,se=In(ae),ce;try{for(se.s();!(ce=se.n()).done;)he=ce.value,te.add(he)}catch(we){se.e(we)}finally{se.f()}}),te.has("any")?["any"]:Array.from(te)}function z(j,H,te){var fe,ae,he=j||"unnamed",se=te,ce,we=function(){var Zt=[];if(se.forEach(function(Xt){var Dr=T(Xt.params,ce),cr=B(Dr);(ce<Xt.params.length||E(Xt.params))&&cr(H[ce])&&Zt.push(Xt)}),Zt.length===0){if(ae=re(se,ce),ae.length>0){var _r=h(H[ce]);return fe=new TypeError("Unexpected type of argument in function "+he+" (expected: "+ae.join(" or ")+", actual: "+_r.join(" | ")+", index: "+ce+")"),fe.data={category:"wrongType",fn:he,index:ce,actual:_r,expected:ae},{v:fe}}}else se=Zt};for(ce=0;ce<H.length;ce++){var Re=we();if(vu(Re)==="object")return Re.v}var rt=se.map(function(rr){return E(rr.params)?1/0:rr.params.length});if(H.length<Math.min.apply(null,rt))return ae=re(se,ce),fe=new TypeError("Too few arguments in function "+he+" (expected: "+ae.join(" or ")+", index: "+H.length+")"),fe.data={category:"tooFewArgs",fn:he,index:H.length,expected:ae},fe;var Be=Math.max.apply(null,rt);if(H.length>Be)return fe=new TypeError("Too many arguments in function "+he+" (expected: "+Be+", actual: "+H.length+")"),fe.data={category:"tooManyArgs",fn:he,index:H.length,expectedLength:Be},fe;for(var zt=[],xt=0;xt<H.length;++xt)zt.push(h(H[xt]).join("|"));return fe=new TypeError('Arguments of type "'+zt.join(", ")+'" do not match any of the defined signatures of function '+he+"."),fe.data={category:"mismatch",actual:zt},fe}function Y(j){for(var H=i.length+1,te=0;te<j.types.length;te++)G(j.types[te])&&(H=Math.min(H,j.types[te].typeIndex));return H}function V(j){for(var H=u+1,te=0;te<j.types.length;te++)G(j.types[te])||(H=Math.min(H,j.types[te].conversionIndex));return H}function U(j,H){if(j.hasAny){if(!H.hasAny)return 1}else if(H.hasAny)return-1;if(j.restParam){if(!H.restParam)return 1}else if(H.restParam)return-1;if(j.hasConversion){if(!H.hasConversion)return 1}else if(H.hasConversion)return-1;var te=Y(j)-Y(H);if(te<0)return-1;if(te>0)return 1;var fe=V(j)-V(H);return fe<0?-1:fe>0?1:0}function q(j,H){var te=j.params,fe=H.params,ae=Ue(te),he=Ue(fe),se=E(te),ce=E(fe);if(se&&ae.hasAny){if(!ce||!he.hasAny)return 1}else if(ce&&he.hasAny)return-1;var we=0,Re=0,rt,Be=In(te),zt;try{for(Be.s();!(zt=Be.n()).done;)rt=zt.value,rt.hasAny&&++we,rt.hasConversion&&++Re}catch(Ln){Be.e(Ln)}finally{Be.f()}var xt=0,rr=0,Zt=In(fe),_r;try{for(Zt.s();!(_r=Zt.n()).done;)rt=_r.value,rt.hasAny&&++xt,rt.hasConversion&&++rr}catch(Ln){Zt.e(Ln)}finally{Zt.f()}if(we!==xt)return we-xt;if(se&&ae.hasConversion){if(!ce||!he.hasConversion)return 1}else if(ce&&he.hasConversion)return-1;if(Re!==rr)return Re-rr;if(se){if(!ce)return 1}else if(ce)return-1;var Xt=(te.length-fe.length)*(se?-1:1);if(Xt!==0)return Xt;for(var Dr=[],cr=0,hr=0;hr<te.length;++hr){var dn=U(te[hr],fe[hr]);Dr.push(dn),cr+=dn}if(cr!==0)return cr;for(var pr,Bn=0,Zn=Dr;Bn<Zn.length;Bn++)if(pr=Zn[Bn],pr!==0)return pr;return 0}function J(j){if(j.length===0)return[];var H=j.map(s);j.length>1&&H.sort(function(we,Re){return we.index-Re.index});var te=H[0].conversionsTo;if(j.length===1)return te;te=te.concat([]);for(var fe=new Set(j),ae=1;ae<H.length;++ae){var he=void 0,se=In(H[ae].conversionsTo),ce;try{for(se.s();!(ce=se.n()).done;)he=ce.value,fe.has(he.from)||(te.push(he),fe.add(he.from))}catch(we){se.e(we)}finally{se.f()}}return te}function Z(j,H){var te=H;if(j.some(function(ce){return ce.hasConversion})){var fe=E(j),ae=j.map(X);te=function(){for(var we=[],Re=fe?arguments.length-1:arguments.length,rt=0;rt<Re;rt++)we[rt]=ae[rt](arguments[rt]);return fe&&(we[Re]=arguments[Re].map(ae[Re])),H.apply(this,we)}}var he=te;if(E(j)){var se=j.length-1;he=function(){return te.apply(this,ze(arguments,0,se).concat([ze(arguments,se)]))}}return he}function X(j){var H,te,fe,ae,he=[],se=[];switch(j.types.forEach(function(ce){ce.conversion&&(he.push(s(ce.conversion.from).test),se.push(ce.conversion.convert))}),se.length){case 0:return function(we){return we};case 1:return H=he[0],fe=se[0],function(we){return H(we)?fe(we):we};case 2:return H=he[0],te=he[1],fe=se[0],ae=se[1],function(we){return H(we)?fe(we):te(we)?ae(we):we};default:return function(we){for(var Re=0;Re<se.length;Re++)if(he[Re](we))return se[Re](we);return we}}}function le(j){function H(te,fe,ae){if(fe<te.length){var he=te[fe],se=[];if(he.restParam){var ce=he.types.filter(G);ce.length<he.types.length&&se.push({types:ce,name:"..."+ce.map(function(we){return we.name}).join("|"),hasAny:ce.some(function(we){return we.isAny}),hasConversion:!1,restParam:!0}),se.push(he)}else se=he.types.map(function(we){return{types:[we],name:we.name,hasAny:we.isAny,hasConversion:we.conversion,restParam:!1}});return ut(se,function(we){return H(te,fe+1,ae.concat([we]))})}else return[ae]}return H(j,0,[])}function ge(j,H){for(var te=Math.max(j.length,H.length),fe=0;fe<te;fe++){var ae=N(j,fe),he=N(H,fe),se=!1,ce=void 0,we=In(he),Re;try{for(we.s();!(Re=we.n()).done;)if(ce=Re.value,ae.has(ce)){se=!0;break}}catch(rr){we.e(rr)}finally{we.f()}if(!se)return!1}var rt=j.length,Be=H.length,zt=E(j),xt=E(H);return zt?xt?rt===Be:Be>=rt:xt?rt>=Be:rt===Be}function Ee(j){return j.map(function(H){return Je(H)?st(H.referToSelf.callback):Xe(H)?at(H.referTo.references,H.referTo.callback):H})}function ye(j,H,te){var fe=[],ae,he=In(j),se;try{for(he.s();!(se=he.n()).done;){ae=se.value;var ce=te[ae];if(typeof ce!="number")throw new TypeError('No definition for referenced signature "'+ae+'"');if(ce=H[ce],typeof ce!="function")return!1;fe.push(ce)}}catch(we){he.e(we)}finally{he.f()}return fe}function Oe(j,H,te){for(var fe=Ee(j),ae=new Array(fe.length).fill(!1),he=!0;he;){he=!1;for(var se=!0,ce=0;ce<fe.length;++ce)if(!ae[ce]){var we=fe[ce];if(Je(we))fe[ce]=we.referToSelf.callback(te),fe[ce].referToSelf=we.referToSelf,ae[ce]=!0,se=!1;else if(Xe(we)){var Re=ye(we.referTo.references,fe,H);Re?(fe[ce]=we.referTo.callback.apply(this,Re),fe[ce].referTo=we.referTo,ae[ce]=!0,se=!1):he=!0}}if(se&&he)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return fe}function qe(j){var H=/\bthis(\(|\.signatures\b)/;Object.keys(j).forEach(function(te){var fe=j[te];if(H.test(fe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Ie(j,H){if(o.createCount++,Object.keys(H).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&qe(H);var te=[],fe=[],ae={},he=[],se,ce=function(){if(!Object.prototype.hasOwnProperty.call(H,se))return"continue";var sr=S(se);if(!sr)return"continue";te.forEach(function(gn){if(ge(gn,sr))throw new TypeError('Conflicting signatures "'+_(gn)+'" and "'+_(sr)+'".')}),te.push(sr);var qr=fe.length;fe.push(H[se]);var Ri=sr.map(C),Jn=void 0,jn=In(le(Ri)),Li;try{for(jn.s();!(Li=jn.n()).done;){Jn=Li.value;var On=_(Jn);he.push({params:Jn,name:On,fn:qr}),Jn.every(function(gn){return!gn.hasConversion})&&(ae[On]=qr)}}catch(gn){jn.e(gn)}finally{jn.f()}};for(se in H)var we=ce();he.sort(q);var Re=Oe(fe,ae,Vn),rt;for(rt in ae)Object.prototype.hasOwnProperty.call(ae,rt)&&(ae[rt]=Re[ae[rt]]);for(var Be=[],zt=new Map,xt=0,rr=he;xt<rr.length;xt++)rt=rr[xt],zt.has(rt.name)||(rt.fn=Re[rt.fn],Be.push(rt),zt.set(rt.name,rt));for(var Zt=Be[0]&&Be[0].params.length<=2&&!E(Be[0].params),_r=Be[1]&&Be[1].params.length<=2&&!E(Be[1].params),Xt=Be[2]&&Be[2].params.length<=2&&!E(Be[2].params),Dr=Be[3]&&Be[3].params.length<=2&&!E(Be[3].params),cr=Be[4]&&Be[4].params.length<=2&&!E(Be[4].params),hr=Be[5]&&Be[5].params.length<=2&&!E(Be[5].params),dn=Zt&&_r&&Xt&&Dr&&cr&&hr,pr=0;pr<Be.length;++pr)Be[pr].test=P(Be[pr].params);for(var Bn=Zt?B(Be[0].params[0]):En,Zn=_r?B(Be[1].params[0]):En,Ln=Xt?B(Be[2].params[0]):En,Un=Dr?B(Be[3].params[0]):En,Zi=cr?B(Be[4].params[0]):En,xi=hr?B(Be[5].params[0]):En,Cu=Zt?B(Be[0].params[1]):En,Fr=_r?B(Be[1].params[1]):En,nr=Xt?B(Be[2].params[1]):En,Fu=Dr?B(Be[3].params[1]):En,ci=cr?B(Be[4].params[1]):En,pn=hr?B(Be[5].params[1]):En,Xn=0;Xn<Be.length;++Xn)Be[Xn].implementation=Z(Be[Xn].params,Be[Xn].fn);var Ni=Zt?Be[0].implementation:du,Su=_r?Be[1].implementation:du,Bu=Xt?Be[2].implementation:du,Xi=Dr?Be[3].implementation:du,Ou=cr?Be[4].implementation:du,Mu=hr?Be[5].implementation:du,Pu=Zt?Be[0].params.length:-1,Tu=_r?Be[1].params.length:-1,ku=Xt?Be[2].params.length:-1,Iu=Dr?Be[3].params.length:-1,hi=cr?Be[4].params.length:-1,xu=hr?Be[5].params.length:-1,di=dn?6:0,Nu=Be.length,Ru=Be.map(function(br){return br.test}),Lu=Be.map(function(br){return br.implementation}),Ji=function(){for(var sr=di;sr<Nu;sr++)if(Ru[sr](arguments))return Lu[sr].apply(this,arguments);return o.onMismatch(j,arguments,Be)};function Vn(br,sr){return arguments.length===Pu&&Bn(br)&&Cu(sr)?Ni.apply(this,arguments):arguments.length===Tu&&Zn(br)&&Fr(sr)?Su.apply(this,arguments):arguments.length===ku&&Ln(br)&&nr(sr)?Bu.apply(this,arguments):arguments.length===Iu&&Un(br)&&Fu(sr)?Xi.apply(this,arguments):arguments.length===hi&&Zi(br)&&ci(sr)?Ou.apply(this,arguments):arguments.length===xu&&xi(br)&&pn(sr)?Mu.apply(this,arguments):Ji.apply(this,arguments)}try{Object.defineProperty(Vn,"name",{value:j})}catch{}return Vn.signatures=ae,Vn._typedFunctionData={signatures:Be,signatureMap:zt},Vn}function tt(j,H,te){throw z(j,H,te)}function He(j){return ze(j,0,j.length-1)}function Ue(j){return j[j.length-1]}function ze(j,H,te){return Array.prototype.slice.call(j,H,te)}function mt(j,H){for(var te=0;te<j.length;te++)if(H(j[te]))return j[te]}function ut(j,H){return Array.prototype.concat.apply([],j.map(H))}function lt(){var j=He(arguments).map(function(te){return _(S(te))}),H=Ue(arguments);if(typeof H!="function")throw new TypeError("Callback function expected as last argument");return at(j,H)}function at(j,H){return{referTo:{references:j,callback:H}}}function st(j){if(typeof j!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:j}}}function Xe(j){return j&&vu(j.referTo)==="object"&&Array.isArray(j.referTo.references)&&typeof j.referTo.callback=="function"}function Je(j){return j&&vu(j.referToSelf)==="object"&&typeof j.referToSelf.callback=="function"}function Ce(j,H){if(!j)return H;if(H&&H!==j){var te=new Error("Function names do not match (expected: "+j+", actual: "+H+")");throw te.data={actual:H,expected:j},te}return j}function Te(j){var H;for(var te in j)Object.prototype.hasOwnProperty.call(j,te)&&(d(j[te])||typeof j[te].signature=="string")&&(H=Ce(H,j[te].name));return H}function Ot(j,H){var te;for(te in H)if(Object.prototype.hasOwnProperty.call(H,te)){if(te in j&&H[te]!==j[te]){var fe=new Error('Signature "'+te+'" is defined twice');throw fe.data={signature:te,sourceFunction:H[te],destFunction:j[te]},fe}j[te]=H[te]}}var Vt=o;o=function(H){for(var te=typeof H=="string",fe=te?1:0,ae=te?H:"",he={},se=fe;se<arguments.length;++se){var ce=arguments[se],we={},Re=void 0;if(typeof ce=="function"?(Re=ce.name,typeof ce.signature=="string"?we[ce.signature]=ce:d(ce)&&(we=ce.signatures)):t(ce)&&(we=ce,te||(Re=Te(ce))),Object.keys(we).length===0){var rt=new TypeError("Argument to 'typed' at index "+se+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw rt.data={index:se,argument:ce},rt}te||(ae=Ce(ae,Re)),Ot(he,we)}return Ie(ae||"",he)},o.create=Dp,o.createCount=Vt.createCount,o.onMismatch=tt,o.throwMismatchError=tt,o.createError=z,o.clear=p,o.clearConversions=f,o.addTypes=c,o._findType=s,o.referTo=lt,o.referToSelf=st,o.convert=m,o.findSignature=g,o.find=b,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function(j,H){var te="any";H!==!1&&n.has("Object")&&(te="Object"),o.addTypes([j],te)};function Ht(j){if(!j||typeof j.from!="string"||typeof j.to!="string"||typeof j.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(j.to===j.from)throw new SyntaxError('Illegal to define conversion from "'+j.from+'" to itself.')}return o.addConversion=function(j){Ht(j);var H=s(j.to);if(H.conversionsTo.every(function(te){return te.from!==j.from}))H.conversionsTo.push({from:j.from,convert:j.convert,index:u++});else throw new Error('There is already a conversion from "'+j.from+'" to "'+H.name+'"')},o.addConversions=function(j){j.forEach(o.addConversion)},o.removeConversion=function(j){Ht(j);var H=s(j.to),te=mt(H.conversionsTo,function(ae){return ae.from===j.from});if(!te)throw new Error("Attempt to remove nonexistent conversion from "+j.from+" to "+j.to);if(te.convert!==j.convert)throw new Error("Conversion to remove does not match existing conversion");var fe=H.conversionsTo.indexOf(te);H.conversionsTo.splice(fe,1)},o.resolve=function(j,H){if(!d(j))throw new TypeError(f0);for(var te=j._typedFunctionData.signatures,fe=0;fe<te.length;++fe)if(te[fe].test(H))return te[fe];return null},o}const c0=Dp();function Ar(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function hl(t,e,r){var n={2:"0b",8:"0o",16:"0x"},i=n[e],u="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Ar(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Ar(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),u="i".concat(r)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(i).concat(t.toString(e)).concat(u)}function Kl(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",n,i;if(e&&(e.notation&&(r=e.notation),tr(e)?n=e:tr(e.precision)&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Tw(t,n);case"exponential":return bp(t,n);case"engineering":return Pw(t,n);case"bin":return hl(t,2,i);case"oct":return hl(t,8,i);case"hex":return hl(t,16,i);case"auto":return kw(t,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var u=arguments[2],o=arguments[4];return u!=="."?u+o:o});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function js(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),u=n.indexOf(".");i+=u!==-1?u-1:n.length-1;var o=n.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return o.length===0&&(o.push(0),i++),{sign:r,coefficients:o,exponent:i}}function Pw(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=js(t),n=qs(r,e),i=n.exponent,u=n.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(tr(e))for(;e>u.length||i-o+1>u.length;)u.push(0);else for(var s=Math.abs(i-o)-(u.length-1),c=0;c<s;c++)u.push(0);for(var p=Math.abs(i-o),f=1;p>0;)f++,p--;var h=u.slice(f).join(""),d=tr(e)&&h.length||h.match(/[1-9]/)?"."+h:"",g=u.slice(0,f).join("")+d+"e"+(i>=0?"+":"")+o.toString();return n.sign+g}function Tw(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=js(t),n=typeof e=="number"?qs(r,r.exponent+1+e):r,i=n.coefficients,u=n.exponent+1,o=u+(e||0);return i.length<o&&(i=i.concat(_u(o-i.length))),u<0&&(i=_u(-u+1).concat(i),u=1),u<i.length&&i.splice(u,0,u===0?"0.":"."),n.sign+i.join("")}function bp(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=js(t),n=e?qs(r,e):r,i=n.coefficients,u=n.exponent;i.length<e&&(i=i.concat(_u(e-i.length)));var o=i.shift();return n.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(u>=0?"+":"")+u}function kw(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=r&&r.lowerExp!==void 0?r.lowerExp:-3,i=r&&r.upperExp!==void 0?r.upperExp:5,u=js(t),o=e?qs(u,e):u;if(o.exponent<n||o.exponent>=i)return bp(t,e);var s=o.coefficients,c=o.exponent;s.length<e&&(s=s.concat(_u(e-s.length))),s=s.concat(_u(c-s.length+1+(s.length<e?e-s.length:0))),s=_u(-c).concat(s);var p=c>0?c:0;return p<s.length-1&&s.splice(p+1,0,"."),o.sign+s.join("")}function qs(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var u=e-1;for(n[u]++;n[u]===10;)n.pop(),u===0&&(n.unshift(0),r.exponent++,u++),u--,n[u]++}}return r}function _u(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function Iw(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var xw=Number.EPSILON||2220446049250313e-31;function hs(t,e,r){if(r==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var n=Math.abs(t-e);return n<xw?!0:n<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}function dl(t,e,r){var n=t.constructor,i=new n(2),u="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Ar(r))throw new Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),u="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(u);case 8:return"".concat(t.toOctal()).concat(u);case 16:return"".concat(t.toHexadecimal()).concat(u);default:throw new Error("Base ".concat(e," not supported "))}}function Nw(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",n,i;if(e!==void 0&&(e.notation&&(r=e.notation),typeof e=="number"?n=e:e.precision&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Lw(t,n);case"exponential":return h0(t,n);case"engineering":return Rw(t,n);case"bin":return dl(t,2,i);case"oct":return dl(t,8,i);case"hex":return dl(t,16,i);case"auto":{var u=e&&e.lowerExp!==void 0?e.lowerExp:-3,o=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var s,c=t.toSignificantDigits(n),p=c.e;return p>=u&&p<o?s=c.toFixed():s=h0(t,n),s.replace(/((\.\d*?)(0+))($|e)/,function(){var f=arguments[2],h=arguments[4];return f!=="."?f+h:h})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Rw(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),u=i.toPrecision(e);return u.indexOf("e")!==-1&&(u=i.toString()),u+"e"+(r>=0?"+":"")+n.toString()}function h0(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function Lw(t,e){return t.toFixed(e)}function en(t,e){var r=Uw(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function Uw(t,e){if(typeof t=="number")return Kl(t,e);if(Fn(t))return Nw(t,e);if(Vw(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return yp(t,e);if(Hn(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>'"'+n+'": '+en(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function yp(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=yp(t[i],e);return r+="]",r}else return en(t,e)}function Vw(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function Rt(t,e,r){if(!(this instanceof Rt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Rt.prototype=new RangeError;Rt.prototype.constructor=RangeError;Rt.prototype.name="DimensionError";Rt.prototype.isDimensionError=!0;function Yi(t,e,r){if(!(this instanceof Yi))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Yi.prototype=new RangeError;Yi.prototype.constructor=RangeError;Yi.prototype.name="IndexError";Yi.prototype.isIndexError=!0;function Mi(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function wp(t,e,r){var n,i=t.length;if(i!==e[r])throw new Rt(i,e[r]);if(r<e.length-1){var u=r+1;for(n=0;n<i;n++){var o=t[n];if(!Array.isArray(o))throw new Rt(e.length-1,e.length,"<");wp(t[n],e,u)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new Rt(e.length+1,e.length,">")}function d0(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new Rt(t.length,0)}else wp(t,e,0)}function er(t,e){if(!tr(t)||!Ar(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Yi(t,e)}function p0(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!tr(i)||!Ar(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+en(e)+")")});var n=r!==void 0?r:0;return Yl(t,e,0,n),t}function Yl(t,e,r,n){var i,u,o=t.length,s=e[r],c=Math.min(o,s);if(t.length=s,r<e.length-1){var p=r+1;for(i=0;i<c;i++)u=t[i],Array.isArray(u)||(u=[u],t[i]=u),Yl(u,e,p,n);for(i=c;i<s;i++)u=[],t[i]=u,Yl(u,e,p,n)}else{for(i=0;i<c;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=c;i<s;i++)t[i]=n}}function jw(t,e){var r=zw(t),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Rt(0,n,"!=");e=Af(e,n);var i=Ap(e);if(n!==i)throw new Rt(i,n,"!=");try{return qw(r,e)}catch(u){throw u instanceof Rt?new Rt(i,n,"!="):u}}function Af(t,e){var r=Ap(t),n=t.slice(),i=-1,u=t.indexOf(i),o=t.indexOf(i,u+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var s=u>=0,c=e%r===0;if(s)if(c)n[u]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function Ap(t){return t.reduce((e,r)=>e*r,1)}function qw(t,e){for(var r=t,n,i=e.length-1;i>0;i--){var u=e[i];n=[];for(var o=r.length/u,s=0;s<o;s++)n.push(r.slice(s*u,(s+1)*u));r=n}return r}function Ep(t,e,r,n){var i=n||Mi(t);if(r)for(var u=0;u<r;u++)t=[t],i.unshift(1);for(t=Cp(t,e,0);i.length<e;)i.push(1);return t}function Cp(t,e,r){var n,i;if(Array.isArray(t)){var u=r+1;for(n=0,i=t.length;n<i;n++)t[n]=Cp(t[n],e,u)}else for(var o=r;o<e;o++)t=[t];return t}function zw(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function r(n){Array.isArray(n)?n.forEach(r):e.push(n)}),e}function ds(t,e){for(var r,n=0,i=0;i<t.length;i++){var u=t[i],o=Array.isArray(u);if(i===0&&o&&(n=u.length),o&&u.length!==n)return;var s=o?ds(u,e):e(u);if(r===void 0)r=s;else if(r!==s)return"mixed"}return r}function Ut(t,e,r,n){function i(u){var o=Sw(u,e.map(Gw));return Ww(t,e,u),r(o)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Ww(t,e,r){var n=e.filter(u=>!Hw(u)).every(u=>r[u]!==void 0);if(!n){var i=e.filter(u=>r[u]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(u=>'"'.concat(u,'"')).join(", "),"."))}}function Hw(t){return t&&t[0]==="?"}function Gw(t){return t&&t[0]==="?"?t.slice(1):t}function $w(t,e){if(Sp(t)&&Fp(t,e))return t[e];throw typeof t[e]=="function"&&Zw(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Kw(t,e,r){if(Sp(t)&&Fp(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function Yw(t,e){return e in t}function Fp(t,e){return!t||typeof t!="object"?!1:ia(Xw,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Zw(t,e){return t==null||typeof t[e]!="function"||ia(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:ia(Jw,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Sp(t){return typeof t=="object"&&t&&t.constructor===Object}var Xw={length:!0,name:!0},Jw={toString:!0,valueOf:!0,toLocaleString:!0};class Qw{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return $w(this.wrappedObject,e)}set(e,r){return Kw(this.wrappedObject,e,r),this}has(e){return Yw(this.wrappedObject,e)}}function e2(t){return t?t instanceof Map||t instanceof Qw||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var Bp=function(){return Bp=c0.create,c0},t2=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],r2=Ut("typed",t2,function(e){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:u}=e,o=Bp();return o.clear(),o.addTypes([{name:"number",test:tr},{name:"Complex",test:vp},{name:"BigNumber",test:Fn},{name:"Fraction",test:mp},{name:"Unit",test:_p},{name:"identifier",test:s=>Hn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(s)},{name:"string",test:Hn},{name:"Chain",test:Ew},{name:"Array",test:Qt},{name:"Matrix",test:$r},{name:"DenseMatrix",test:Xy},{name:"SparseMatrix",test:Jy},{name:"Range",test:Qy},{name:"Index",test:yf},{name:"boolean",test:ew},{name:"ResultSet",test:tw},{name:"Help",test:rw},{name:"function",test:nw},{name:"Date",test:iw},{name:"RegExp",test:uw},{name:"null",test:sw},{name:"undefined",test:wf},{name:"AccessorNode",test:ow},{name:"ArrayNode",test:lw},{name:"AssignmentNode",test:fw},{name:"BlockNode",test:cw},{name:"ConditionalNode",test:hw},{name:"ConstantNode",test:dw},{name:"FunctionNode",test:gw},{name:"FunctionAssignmentNode",test:pw},{name:"IndexNode",test:vw},{name:"Node",test:mw},{name:"ObjectNode",test:_w},{name:"OperatorNode",test:Dw},{name:"ParenthesisNode",test:bw},{name:"RangeNode",test:yw},{name:"RelationalNode",test:ww},{name:"SymbolNode",test:Aw},{name:"Map",test:e2},{name:"Object",test:aw}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(c){if(r||pl(c),Iw(c)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+c+"). Use function bignumber(x) to convert to BigNumber.");return new r(c)}},{from:"number",to:"Complex",convert:function(c){return n||Qa(c),new n(c,0)}},{from:"BigNumber",to:"Complex",convert:function(c){return n||Qa(c),new n(c.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(c){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(c){return n||Qa(c),new n(c.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(c){u||gl(c);var p=new u(c);if(p.valueOf()!==c)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+c+"). Use function fraction(x) to convert to Fraction.");return p}},{from:"string",to:"number",convert:function(c){var p=Number(c);if(isNaN(p))throw new Error('Cannot convert "'+c+'" to a number');return p}},{from:"string",to:"BigNumber",convert:function(c){r||pl(c);try{return new r(c)}catch{throw new Error('Cannot convert "'+c+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(c){u||gl(c);try{return new u(c)}catch{throw new Error('Cannot convert "'+c+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(c){n||Qa(c);try{return new n(c)}catch{throw new Error('Cannot convert "'+c+'" to Complex')}}},{from:"boolean",to:"number",convert:function(c){return+c}},{from:"boolean",to:"BigNumber",convert:function(c){return r||pl(c),new r(+c)}},{from:"boolean",to:"Fraction",convert:function(c){return u||gl(c),new u(+c)}},{from:"boolean",to:"string",convert:function(c){return String(c)}},{from:"Array",to:"Matrix",convert:function(c){return i||n2(),new i(c)}},{from:"Matrix",to:"Array",convert:function(c){return c.valueOf()}}]),o.onMismatch=(s,c,p)=>{var f=o.createError(s,c,p);if(["wrongType","mismatch"].includes(f.data.category)&&c.length===1&&fs(c[0])&&p.some(d=>!d.params.includes(","))){var h=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw h.data=f.data,h}throw f},o.onMismatch=(s,c,p)=>{var f=o.createError(s,c,p);if(["wrongType","mismatch"].includes(f.data.category)&&c.length===1&&fs(c[0])&&p.some(d=>!d.params.includes(","))){var h=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw h.data=f.data,h}throw f},o});function pl(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Qa(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function n2(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function gl(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var mu=9e15,ki=1e9,Zl="0123456789abcdef",ps="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",gs="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Xl={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-mu,maxE:mu,crypto:!1},Op,li,ot=!0,zs="[DecimalError] ",Pi=zs+"Invalid argument: ",Mp=zs+"Precision limit exceeded",Pp=zs+"crypto unavailable",Tp="[object Decimal]",jr=Math.floor,mr=Math.pow,i2=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,u2=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,a2=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,kp=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Rn=1e7,et=7,s2=9007199254740991,o2=ps.length-1,Jl=gs.length-1,De={toStringTag:Tp};De.absoluteValue=De.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Ge(t)};De.ceil=function(){return Ge(new this.constructor(this),this.e+1,2)};De.clampedTo=De.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Pi+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};De.comparedTo=De.cmp=function(t){var e,r,n,i,u=this,o=u.d,s=(t=new u.constructor(t)).d,c=u.s,p=t.s;if(!o||!s)return!c||!p?NaN:c!==p?c:o===s?0:!o^c<0?1:-1;if(!o[0]||!s[0])return o[0]?c:s[0]?-p:0;if(c!==p)return c;if(u.e!==t.e)return u.e>t.e^c<0?1:-1;for(n=o.length,i=s.length,e=0,r=n<i?n:i;e<r;++e)if(o[e]!==s[e])return o[e]>s[e]^c<0?1:-1;return n===i?0:n>i^c<0?1:-1};De.cosine=De.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+et,n.rounding=1,r=l2(n,Lp(n,r)),n.precision=t,n.rounding=e,Ge(li==2||li==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};De.cubeRoot=De.cbrt=function(){var t,e,r,n,i,u,o,s,c,p,f=this,h=f.constructor;if(!f.isFinite()||f.isZero())return new h(f);for(ot=!1,u=f.s*mr(f.s*f,1/3),!u||Math.abs(u)==1/0?(r=Ir(f.d),t=f.e,(u=(t-r.length+1)%3)&&(r+=u==1||u==-2?"0":"00"),u=mr(r,1/3),t=jr((t+1)/3)-(t%3==(t<0?-1:2)),u==1/0?r="5e"+t:(r=u.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new h(r),n.s=f.s):n=new h(u.toString()),o=(t=h.precision)+3;;)if(s=n,c=s.times(s).times(s),p=c.plus(f),n=qt(p.plus(f).times(s),p.plus(c),o+2,1),Ir(s.d).slice(0,o)===(r=Ir(n.d)).slice(0,o))if(r=r.slice(o-3,o+1),r=="9999"||!i&&r=="4999"){if(!i&&(Ge(s,t+1,0),s.times(s).times(s).eq(f))){n=s;break}o+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Ge(n,t+1,1),e=!n.times(n).times(n).eq(f));break}return ot=!0,Ge(n,t,h.rounding,e)};De.decimalPlaces=De.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-jr(this.e/et))*et,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};De.dividedBy=De.div=function(t){return qt(this,new this.constructor(t))};De.dividedToIntegerBy=De.divToInt=function(t){var e=this,r=e.constructor;return Ge(qt(e,new r(t),0,1,1),r.precision,r.rounding)};De.equals=De.eq=function(t){return this.cmp(t)===0};De.floor=function(){return Ge(new this.constructor(this),this.e+1,3)};De.greaterThan=De.gt=function(t){return this.cmp(t)>0};De.greaterThanOrEqualTo=De.gte=function(t){var e=this.cmp(t);return e==1||e===0};De.hyperbolicCosine=De.cosh=function(){var t,e,r,n,i,u=this,o=u.constructor,s=new o(1);if(!u.isFinite())return new o(u.s?1/0:NaN);if(u.isZero())return s;r=o.precision,n=o.rounding,o.precision=r+Math.max(u.e,u.sd())+4,o.rounding=1,i=u.d.length,i<32?(t=Math.ceil(i/3),e=(1/Hs(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),u=bu(o,1,u.times(e),new o(1),!0);for(var c,p=t,f=new o(8);p--;)c=u.times(u),u=s.minus(c.times(f.minus(c.times(f))));return Ge(u,o.precision=r,o.rounding=n,!0)};De.hyperbolicSine=De.sinh=function(){var t,e,r,n,i=this,u=i.constructor;if(!i.isFinite()||i.isZero())return new u(i);if(e=u.precision,r=u.rounding,u.precision=e+Math.max(i.e,i.sd())+4,u.rounding=1,n=i.d.length,n<3)i=bu(u,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/Hs(5,t)),i=bu(u,2,i,i,!0);for(var o,s=new u(5),c=new u(16),p=new u(20);t--;)o=i.times(i),i=i.times(s.plus(o.times(c.times(o).plus(p))))}return u.precision=e,u.rounding=r,Ge(i,e,r,!0)};De.hyperbolicTangent=De.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,qt(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};De.inverseCosine=De.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),i=r.precision,u=r.rounding;return n!==-1?n===0?e.isNeg()?xn(r,i,u):new r(0):new r(NaN):e.isZero()?xn(r,i+4,u).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),t=xn(r,i+4,u).times(.5),r.precision=i,r.rounding=u,t.minus(e))};De.inverseHyperbolicCosine=De.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,ot=!1,r=r.times(r).minus(1).sqrt().plus(r),ot=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};De.inverseHyperbolicSine=De.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,ot=!1,r=r.times(r).plus(1).sqrt().plus(r),ot=!0,n.precision=t,n.rounding=e,r.ln())};De.inverseHyperbolicTangent=De.atanh=function(){var t,e,r,n,i=this,u=i.constructor;return i.isFinite()?i.e>=0?new u(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=u.precision,e=u.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?Ge(new u(i),t,e,!0):(u.precision=r=n-i.e,i=qt(i.plus(1),new u(1).minus(i),r+t,1),u.precision=t+4,u.rounding=1,i=i.ln(),u.precision=t,u.rounding=e,i.times(.5))):new u(NaN)};De.inverseSine=De.asin=function(){var t,e,r,n,i=this,u=i.constructor;return i.isZero()?new u(i):(e=i.abs().cmp(1),r=u.precision,n=u.rounding,e!==-1?e===0?(t=xn(u,r+4,n).times(.5),t.s=i.s,t):new u(NaN):(u.precision=r+6,u.rounding=1,i=i.div(new u(1).minus(i.times(i)).sqrt().plus(1)).atan(),u.precision=r,u.rounding=n,i.times(2)))};De.inverseTangent=De.atan=function(){var t,e,r,n,i,u,o,s,c,p=this,f=p.constructor,h=f.precision,d=f.rounding;if(p.isFinite()){if(p.isZero())return new f(p);if(p.abs().eq(1)&&h+4<=Jl)return o=xn(f,h+4,d).times(.25),o.s=p.s,o}else{if(!p.s)return new f(NaN);if(h+4<=Jl)return o=xn(f,h+4,d).times(.5),o.s=p.s,o}for(f.precision=s=h+10,f.rounding=1,r=Math.min(28,s/et+2|0),t=r;t;--t)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(ot=!1,e=Math.ceil(s/et),n=1,c=p.times(p),o=new f(p),i=p;t!==-1;)if(i=i.times(c),u=o.minus(i.div(n+=2)),i=i.times(c),o=u.plus(i.div(n+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===u.d[t]&&t--;);return r&&(o=o.times(2<<r-1)),ot=!0,Ge(o,f.precision=h,f.rounding=d,!0)};De.isFinite=function(){return!!this.d};De.isInteger=De.isInt=function(){return!!this.d&&jr(this.e/et)>this.d.length-2};De.isNaN=function(){return!this.s};De.isNegative=De.isNeg=function(){return this.s<0};De.isPositive=De.isPos=function(){return this.s>0};De.isZero=function(){return!!this.d&&this.d[0]===0};De.lessThan=De.lt=function(t){return this.cmp(t)<0};De.lessThanOrEqualTo=De.lte=function(t){return this.cmp(t)<1};De.logarithm=De.log=function(t){var e,r,n,i,u,o,s,c,p=this,f=p.constructor,h=f.precision,d=f.rounding,g=5;if(t==null)t=new f(10),e=!0;else{if(t=new f(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new f(NaN);e=t.eq(10)}if(r=p.d,p.s<0||!r||!r[0]||p.eq(1))return new f(r&&!r[0]?-1/0:p.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)u=!0;else{for(i=r[0];i%10===0;)i/=10;u=i!==1}if(ot=!1,s=h+g,o=Fi(p,s),n=e?vs(f,s+10):Fi(t,s),c=qt(o,n,s,1),ua(c.d,i=h,d))do if(s+=10,o=Fi(p,s),n=e?vs(f,s+10):Fi(t,s),c=qt(o,n,s,1),!u){+Ir(c.d).slice(i+1,i+15)+1==1e14&&(c=Ge(c,h+1,0));break}while(ua(c.d,i+=10,d));return ot=!0,Ge(c,h,d)};De.minus=De.sub=function(t){var e,r,n,i,u,o,s,c,p,f,h,d,g=this,b=g.constructor;if(t=new b(t),!g.d||!t.d)return!g.s||!t.s?t=new b(NaN):g.d?t.s=-t.s:t=new b(t.d||g.s!==t.s?g:NaN),t;if(g.s!=t.s)return t.s=-t.s,g.plus(t);if(p=g.d,d=t.d,s=b.precision,c=b.rounding,!p[0]||!d[0]){if(d[0])t.s=-t.s;else if(p[0])t=new b(g);else return new b(c===3?-0:0);return ot?Ge(t,s,c):t}if(r=jr(t.e/et),f=jr(g.e/et),p=p.slice(),u=f-r,u){for(h=u<0,h?(e=p,u=-u,o=d.length):(e=d,r=f,o=p.length),n=Math.max(Math.ceil(s/et),o)+2,u>n&&(u=n,e.length=1),e.reverse(),n=u;n--;)e.push(0);e.reverse()}else{for(n=p.length,o=d.length,h=n<o,h&&(o=n),n=0;n<o;n++)if(p[n]!=d[n]){h=p[n]<d[n];break}u=0}for(h&&(e=p,p=d,d=e,t.s=-t.s),o=p.length,n=d.length-o;n>0;--n)p[o++]=0;for(n=d.length;n>u;){if(p[--n]<d[n]){for(i=n;i&&p[--i]===0;)p[i]=Rn-1;--p[i],p[n]+=Rn}p[n]-=d[n]}for(;p[--o]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=Ws(p,r),ot?Ge(t,s,c):t):new b(c===3?-0:0)};De.modulo=De.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?Ge(new n(r),n.precision,n.rounding):(ot=!1,n.modulo==9?(e=qt(r,t.abs(),0,3,1),e.s*=t.s):e=qt(r,t,0,n.modulo,1),e=e.times(t),ot=!0,r.minus(e))};De.naturalExponential=De.exp=function(){return Ql(this)};De.naturalLogarithm=De.ln=function(){return Fi(this)};De.negated=De.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Ge(t)};De.plus=De.add=function(t){var e,r,n,i,u,o,s,c,p,f,h=this,d=h.constructor;if(t=new d(t),!h.d||!t.d)return!h.s||!t.s?t=new d(NaN):h.d||(t=new d(t.d||h.s===t.s?h:NaN)),t;if(h.s!=t.s)return t.s=-t.s,h.minus(t);if(p=h.d,f=t.d,s=d.precision,c=d.rounding,!p[0]||!f[0])return f[0]||(t=new d(h)),ot?Ge(t,s,c):t;if(u=jr(h.e/et),n=jr(t.e/et),p=p.slice(),i=u-n,i){for(i<0?(r=p,i=-i,o=f.length):(r=f,n=u,o=p.length),u=Math.ceil(s/et),o=u>o?u+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=p.length,i=f.length,o-i<0&&(i=o,r=f,f=p,p=r),e=0;i;)e=(p[--i]=p[i]+f[i]+e)/Rn|0,p[i]%=Rn;for(e&&(p.unshift(e),++n),o=p.length;p[--o]==0;)p.pop();return t.d=p,t.e=Ws(p,n),ot?Ge(t,s,c):t};De.precision=De.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Pi+t);return r.d?(e=Ip(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};De.round=function(){var t=this,e=t.constructor;return Ge(new e(t),t.e+1,e.rounding)};De.sine=De.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+et,n.rounding=1,r=c2(n,Lp(n,r)),n.precision=t,n.rounding=e,Ge(li>2?r.neg():r,t,e,!0)):new n(NaN)};De.squareRoot=De.sqrt=function(){var t,e,r,n,i,u,o=this,s=o.d,c=o.e,p=o.s,f=o.constructor;if(p!==1||!s||!s[0])return new f(!p||p<0&&(!s||s[0])?NaN:s?o:1/0);for(ot=!1,p=Math.sqrt(+o),p==0||p==1/0?(e=Ir(s),(e.length+c)%2==0&&(e+="0"),p=Math.sqrt(e),c=jr((c+1)/2)-(c<0||c%2),p==1/0?e="5e"+c:(e=p.toExponential(),e=e.slice(0,e.indexOf("e")+1)+c),n=new f(e)):n=new f(p.toString()),r=(c=f.precision)+3;;)if(u=n,n=u.plus(qt(o,u,r+2,1)).times(.5),Ir(u.d).slice(0,r)===(e=Ir(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(Ge(u,c+1,0),u.times(u).eq(o))){n=u;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ge(n,c+1,1),t=!n.times(n).eq(o));break}return ot=!0,Ge(n,c,f.rounding,t)};De.tangent=De.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=qt(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,Ge(li==2||li==4?r.neg():r,t,e,!0)):new n(NaN)};De.times=De.mul=function(t){var e,r,n,i,u,o,s,c,p,f=this,h=f.constructor,d=f.d,g=(t=new h(t)).d;if(t.s*=f.s,!d||!d[0]||!g||!g[0])return new h(!t.s||d&&!d[0]&&!g||g&&!g[0]&&!d?NaN:!d||!g?t.s/0:t.s*0);for(r=jr(f.e/et)+jr(t.e/et),c=d.length,p=g.length,c<p&&(u=d,d=g,g=u,o=c,c=p,p=o),u=[],o=c+p,n=o;n--;)u.push(0);for(n=p;--n>=0;){for(e=0,i=c+n;i>n;)s=u[i]+g[n]*d[i-n-1]+e,u[i--]=s%Rn|0,e=s/Rn|0;u[i]=(u[i]+e)%Rn|0}for(;!u[--o];)u.pop();return e?++r:u.shift(),t.d=u,t.e=Ws(u,r),ot?Ge(t,h.precision,h.rounding):t};De.toBinary=function(t,e){return Ef(this,2,t,e)};De.toDecimalPlaces=De.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(nn(t,0,ki),e===void 0?e=n.rounding:nn(e,0,8),Ge(r,t+r.e+1,e))};De.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Gn(n,!0):(nn(t,0,ki),e===void 0?e=i.rounding:nn(e,0,8),n=Ge(new i(n),t+1,e),r=Gn(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};De.toFixed=function(t,e){var r,n,i=this,u=i.constructor;return t===void 0?r=Gn(i):(nn(t,0,ki),e===void 0?e=u.rounding:nn(e,0,8),n=Ge(new u(i),t+i.e+1,e),r=Gn(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};De.toFraction=function(t){var e,r,n,i,u,o,s,c,p,f,h,d,g=this,b=g.d,m=g.constructor;if(!b)return new m(g);if(p=r=new m(1),n=c=new m(0),e=new m(n),u=e.e=Ip(b)-g.e-1,o=u%et,e.d[0]=mr(10,o<0?et+o:o),t==null)t=u>0?e:p;else{if(s=new m(t),!s.isInt()||s.lt(p))throw Error(Pi+s);t=s.gt(e)?u>0?e:p:s}for(ot=!1,s=new m(Ir(b)),f=m.precision,m.precision=u=b.length*et*2;h=qt(s,e,0,1,1),i=r.plus(h.times(n)),i.cmp(t)!=1;)r=n,n=i,i=p,p=c.plus(h.times(i)),c=i,i=e,e=s.minus(h.times(i)),s=i;return i=qt(t.minus(r),n,0,1,1),c=c.plus(i.times(p)),r=r.plus(i.times(n)),c.s=p.s=g.s,d=qt(p,n,u,1).minus(g).abs().cmp(qt(c,r,u,1).minus(g).abs())<1?[p,n]:[c,r],m.precision=f,ot=!0,d};De.toHexadecimal=De.toHex=function(t,e){return Ef(this,16,t,e)};De.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:nn(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(ot=!1,r=qt(r,t,0,e,1).times(t),ot=!0,Ge(r)):(t.s=r.s,r=t),r};De.toNumber=function(){return+this};De.toOctal=function(t,e){return Ef(this,8,t,e)};De.toPower=De.pow=function(t){var e,r,n,i,u,o,s=this,c=s.constructor,p=+(t=new c(t));if(!s.d||!t.d||!s.d[0]||!t.d[0])return new c(mr(+s,p));if(s=new c(s),s.eq(1))return s;if(n=c.precision,u=c.rounding,t.eq(1))return Ge(s,n,u);if(e=jr(t.e/et),e>=t.d.length-1&&(r=p<0?-p:p)<=s2)return i=xp(c,s,r,n),t.s<0?new c(1).div(i):Ge(i,n,u);if(o=s.s,o<0){if(e<t.d.length-1)return new c(NaN);if(t.d[e]&1||(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return r=mr(+s,p),e=r==0||!isFinite(r)?jr(p*(Math.log("0."+Ir(s.d))/Math.LN10+s.e+1)):new c(r+"").e,e>c.maxE+1||e<c.minE-1?new c(e>0?o/0:0):(ot=!1,c.rounding=s.s=1,r=Math.min(12,(e+"").length),i=Ql(t.times(Fi(s,n+r)),n),i.d&&(i=Ge(i,n+5,1),ua(i.d,n,u)&&(e=n+10,i=Ge(Ql(t.times(Fi(s,e+r)),e),e+5,1),+Ir(i.d).slice(n+1,n+15)+1==1e14&&(i=Ge(i,n+1,0)))),i.s=o,ot=!0,c.rounding=u,Ge(i,n,u))};De.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Gn(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(nn(t,1,ki),e===void 0?e=i.rounding:nn(e,0,8),n=Ge(new i(n),t,e),r=Gn(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};De.toSignificantDigits=De.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(nn(t,1,ki),e===void 0?e=n.rounding:nn(e,0,8)),Ge(new n(r),t,e)};De.toString=function(){var t=this,e=t.constructor,r=Gn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};De.truncated=De.trunc=function(){return Ge(new this.constructor(this),this.e+1,1)};De.valueOf=De.toJSON=function(){var t=this,e=t.constructor,r=Gn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function Ir(t){var e,r,n,i=t.length-1,u="",o=t[0];if(i>0){for(u+=o,e=1;e<i;e++)n=t[e]+"",r=et-n.length,r&&(u+=Ai(r)),u+=n;o=t[e],n=o+"",r=et-n.length,r&&(u+=Ai(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return u+o}function nn(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Pi+t)}function ua(t,e,r,n){var i,u,o,s;for(u=t[0];u>=10;u/=10)--e;return--e<0?(e+=et,i=0):(i=Math.ceil((e+1)/et),e%=et),u=mr(10,et-e),s=t[i]%u|0,n==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=r<4&&s==99999||r>3&&s==49999||s==5e4||s==0):o=(r<4&&s+1==u||r>3&&s+1==u/2)&&(t[i+1]/u/100|0)==mr(10,e-2)-1||(s==u/2||s==0)&&(t[i+1]/u/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(n||r<4)&&s==9999||!n&&r>3&&s==4999):o=((n||r<4)&&s+1==u||!n&&r>3&&s+1==u/2)&&(t[i+1]/u/1e3|0)==mr(10,e-3)-1,o}function us(t,e,r){for(var n,i=[0],u,o=0,s=t.length;o<s;){for(u=i.length;u--;)i[u]*=e;for(i[0]+=Zl.indexOf(t.charAt(o++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function l2(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/Hs(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=bu(t,1,e.times(i),new t(1));for(var u=r;u--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=r,e}var qt=function(){function t(n,i,u){var o,s=0,c=n.length;for(n=n.slice();c--;)o=n[c]*i+s,n[c]=o%u|0,s=o/u|0;return s&&n.unshift(s),n}function e(n,i,u,o){var s,c;if(u!=o)c=u>o?1:-1;else for(s=c=0;s<u;s++)if(n[s]!=i[s]){c=n[s]>i[s]?1:-1;break}return c}function r(n,i,u,o){for(var s=0;u--;)n[u]-=s,s=n[u]<i[u]?1:0,n[u]=s*o+n[u]-i[u];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,u,o,s,c){var p,f,h,d,g,b,m,_,D,C,A,S,E,B,P,T,N,G,re,z,Y=n.constructor,V=n.s==i.s?1:-1,U=n.d,q=i.d;if(!U||!U[0]||!q||!q[0])return new Y(!n.s||!i.s||(U?q&&U[0]==q[0]:!q)?NaN:U&&U[0]==0||!q?V*0:V/0);for(c?(g=1,f=n.e-i.e):(c=Rn,g=et,f=jr(n.e/g)-jr(i.e/g)),re=q.length,N=U.length,D=new Y(V),C=D.d=[],h=0;q[h]==(U[h]||0);h++);if(q[h]>(U[h]||0)&&f--,u==null?(B=u=Y.precision,o=Y.rounding):s?B=u+(n.e-i.e)+1:B=u,B<0)C.push(1),b=!0;else{if(B=B/g+2|0,h=0,re==1){for(d=0,q=q[0],B++;(h<N||d)&&B--;h++)P=d*c+(U[h]||0),C[h]=P/q|0,d=P%q|0;b=d||h<N}else{for(d=c/(q[0]+1)|0,d>1&&(q=t(q,d,c),U=t(U,d,c),re=q.length,N=U.length),T=re,A=U.slice(0,re),S=A.length;S<re;)A[S++]=0;z=q.slice(),z.unshift(0),G=q[0],q[1]>=c/2&&++G;do d=0,p=e(q,A,re,S),p<0?(E=A[0],re!=S&&(E=E*c+(A[1]||0)),d=E/G|0,d>1?(d>=c&&(d=c-1),m=t(q,d,c),_=m.length,S=A.length,p=e(m,A,_,S),p==1&&(d--,r(m,re<_?z:q,_,c))):(d==0&&(p=d=1),m=q.slice()),_=m.length,_<S&&m.unshift(0),r(A,m,S,c),p==-1&&(S=A.length,p=e(q,A,re,S),p<1&&(d++,r(A,re<S?z:q,S,c))),S=A.length):p===0&&(d++,A=[0]),C[h++]=d,p&&A[0]?A[S++]=U[T]||0:(A=[U[T]],S=1);while((T++<N||A[0]!==void 0)&&B--);b=A[0]!==void 0}C[0]||C.shift()}if(g==1)D.e=f,Op=b;else{for(h=1,d=C[0];d>=10;d/=10)h++;D.e=h+f*g-1,Ge(D,s?u+D.e+1:u,o,b)}return D}}();function Ge(t,e,r,n){var i,u,o,s,c,p,f,h,d,g=t.constructor;e:if(e!=null){if(h=t.d,!h)return t;for(i=1,s=h[0];s>=10;s/=10)i++;if(u=e-i,u<0)u+=et,o=e,f=h[d=0],c=f/mr(10,i-o-1)%10|0;else if(d=Math.ceil((u+1)/et),s=h.length,d>=s)if(n){for(;s++<=d;)h.push(0);f=c=0,i=1,u%=et,o=u-et+1}else break e;else{for(f=s=h[d],i=1;s>=10;s/=10)i++;u%=et,o=u-et+i,c=o<0?0:f/mr(10,i-o-1)%10|0}if(n=n||e<0||h[d+1]!==void 0||(o<0?f:f%mr(10,i-o-1)),p=r<4?(c||n)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||n||r==6&&(u>0?o>0?f/mr(10,i-o):0:h[d-1])%10&1||r==(t.s<0?8:7)),e<1||!h[0])return h.length=0,p?(e-=t.e+1,h[0]=mr(10,(et-e%et)%et),t.e=-e||0):h[0]=t.e=0,t;if(u==0?(h.length=d,s=1,d--):(h.length=d+1,s=mr(10,et-u),h[d]=o>0?(f/mr(10,i-o)%mr(10,o)|0)*s:0),p)for(;;)if(d==0){for(u=1,o=h[0];o>=10;o/=10)u++;for(o=h[0]+=s,s=1;o>=10;o/=10)s++;u!=s&&(t.e++,h[0]==Rn&&(h[0]=1));break}else{if(h[d]+=s,h[d]!=Rn)break;h[d--]=0,s=1}for(u=h.length;h[--u]===0;)h.pop()}return ot&&(t.e>g.maxE?(t.d=null,t.e=NaN):t.e<g.minE&&(t.e=0,t.d=[0])),t}function Gn(t,e,r){if(!t.isFinite())return Rp(t);var n,i=t.e,u=Ir(t.d),o=u.length;return e?(r&&(n=r-o)>0?u=u.charAt(0)+"."+u.slice(1)+Ai(n):o>1&&(u=u.charAt(0)+"."+u.slice(1)),u=u+(t.e<0?"e":"e+")+t.e):i<0?(u="0."+Ai(-i-1)+u,r&&(n=r-o)>0&&(u+=Ai(n))):i>=o?(u+=Ai(i+1-o),r&&(n=r-i-1)>0&&(u=u+"."+Ai(n))):((n=i+1)<o&&(u=u.slice(0,n)+"."+u.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(u+="."),u+=Ai(n))),u}function Ws(t,e){var r=t[0];for(e*=et;r>=10;r/=10)e++;return e}function vs(t,e,r){if(e>o2)throw ot=!0,r&&(t.precision=r),Error(Mp);return Ge(new t(ps),e,1,!0)}function xn(t,e,r){if(e>Jl)throw Error(Mp);return Ge(new t(gs),e,r,!0)}function Ip(t){var e=t.length-1,r=e*et+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function Ai(t){for(var e="";t--;)e+="0";return e}function xp(t,e,r,n){var i,u=new t(1),o=Math.ceil(n/et+4);for(ot=!1;;){if(r%2&&(u=u.times(e),v0(u.d,o)&&(i=!0)),r=jr(r/2),r===0){r=u.d.length-1,i&&u.d[r]===0&&++u.d[r];break}e=e.times(e),v0(e.d,o)}return ot=!0,u}function g0(t){return t.d[t.d.length-1]&1}function Np(t,e,r){for(var n,i=new t(e[0]),u=0;++u<e.length;)if(n=new t(e[u]),n.s)i[r](n)&&(i=n);else{i=n;break}return i}function Ql(t,e){var r,n,i,u,o,s,c,p=0,f=0,h=0,d=t.constructor,g=d.rounding,b=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(ot=!1,c=b):c=e,s=new d(.03125);t.e>-2;)t=t.times(s),h+=5;for(n=Math.log(mr(2,h))/Math.LN10*2+5|0,c+=n,r=u=o=new d(1),d.precision=c;;){if(u=Ge(u.times(t),c,1),r=r.times(++f),s=o.plus(qt(u,r,c,1)),Ir(s.d).slice(0,c)===Ir(o.d).slice(0,c)){for(i=h;i--;)o=Ge(o.times(o),c,1);if(e==null)if(p<3&&ua(o.d,c-n,g,p))d.precision=c+=10,r=u=s=new d(1),f=0,p++;else return Ge(o,d.precision=b,g,ot=!0);else return d.precision=b,o}o=s}}function Fi(t,e){var r,n,i,u,o,s,c,p,f,h,d,g=1,b=10,m=t,_=m.d,D=m.constructor,C=D.rounding,A=D.precision;if(m.s<0||!_||!_[0]||!m.e&&_[0]==1&&_.length==1)return new D(_&&!_[0]?-1/0:m.s!=1?NaN:_?0:m);if(e==null?(ot=!1,f=A):f=e,D.precision=f+=b,r=Ir(_),n=r.charAt(0),Math.abs(u=m.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(t),r=Ir(m.d),n=r.charAt(0),g++;u=m.e,n>1?(m=new D("0."+r),u++):m=new D(n+"."+r.slice(1))}else return p=vs(D,f+2,A).times(u+""),m=Fi(new D(n+"."+r.slice(1)),f-b).plus(p),D.precision=A,e==null?Ge(m,A,C,ot=!0):m;for(h=m,c=o=m=qt(m.minus(1),m.plus(1),f,1),d=Ge(m.times(m),f,1),i=3;;){if(o=Ge(o.times(d),f,1),p=c.plus(qt(o,new D(i),f,1)),Ir(p.d).slice(0,f)===Ir(c.d).slice(0,f))if(c=c.times(2),u!==0&&(c=c.plus(vs(D,f+2,A).times(u+""))),c=qt(c,new D(g),f,1),e==null)if(ua(c.d,f-b,C,s))D.precision=f+=b,p=o=m=qt(h.minus(1),h.plus(1),f,1),d=Ge(m.times(m),f,1),i=s=1;else return Ge(c,D.precision=A,C,ot=!0);else return D.precision=A,c;c=p,i+=2}}function Rp(t){return String(t.s*t.s/0)}function ef(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%et,r<0&&(n+=et),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=et;n<i;)t.d.push(+e.slice(n,n+=et));e=e.slice(n),n=et-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),ot&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function f2(t,e){var r,n,i,u,o,s,c,p,f;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),kp.test(e))return ef(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(u2.test(e))r=16,e=e.toLowerCase();else if(i2.test(e))r=2;else if(a2.test(e))r=8;else throw Error(Pi+e);for(u=e.search(/p/i),u>0?(c=+e.slice(u+1),e=e.substring(2,u)):e=e.slice(2),u=e.indexOf("."),o=u>=0,n=t.constructor,o&&(e=e.replace(".",""),s=e.length,u=s-u,i=xp(n,new n(r),u,u*2)),p=us(e,r,Rn),f=p.length-1,u=f;p[u]===0;--u)p.pop();return u<0?new n(t.s*0):(t.e=Ws(p,f),t.d=p,ot=!1,o&&(t=qt(t,i,s*4)),c&&(t=t.times(Math.abs(c)<54?mr(2,c):yu.pow(2,c))),ot=!0,t)}function c2(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:bu(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/Hs(5,r)),e=bu(t,2,e,e);for(var i,u=new t(5),o=new t(16),s=new t(20);r--;)i=e.times(e),e=e.times(u.plus(i.times(o.times(i).minus(s))));return e}function bu(t,e,r,n,i){var u,o,s,c,p=t.precision,f=Math.ceil(p/et);for(ot=!1,c=r.times(r),s=new t(n);;){if(o=qt(s.times(c),new t(e++*e++),p,1),s=i?n.plus(o):n.minus(o),n=qt(o.times(c),new t(e++*e++),p,1),o=s.plus(n),o.d[f]!==void 0){for(u=f;o.d[u]===s.d[u]&&u--;);if(u==-1)break}u=s,s=n,n=o,o=u}return ot=!0,o.d.length=f+1,o}function Hs(t,e){for(var r=t;--e;)r*=t;return r}function Lp(t,e){var r,n=e.s<0,i=xn(t,t.precision,1),u=i.times(.5);if(e=e.abs(),e.lte(u))return li=n?4:1,e;if(r=e.divToInt(i),r.isZero())li=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(u))return li=g0(r)?n?2:3:n?4:1,e;li=g0(r)?n?1:4:n?3:2}return e.minus(i).abs()}function Ef(t,e,r,n){var i,u,o,s,c,p,f,h,d,g=t.constructor,b=r!==void 0;if(b?(nn(r,1,ki),n===void 0?n=g.rounding:nn(n,0,8)):(r=g.precision,n=g.rounding),!t.isFinite())f=Rp(t);else{for(f=Gn(t),o=f.indexOf("."),b?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,o>=0&&(f=f.replace(".",""),d=new g(1),d.e=f.length-o,d.d=us(Gn(d),10,i),d.e=d.d.length),h=us(f,10,i),u=c=h.length;h[--c]==0;)h.pop();if(!h[0])f=b?"0p+0":"0";else{if(o<0?u--:(t=new g(t),t.d=h,t.e=u,t=qt(t,d,r,n,0,i),h=t.d,u=t.e,p=Op),o=h[r],s=i/2,p=p||h[r+1]!==void 0,p=n<4?(o!==void 0||p)&&(n===0||n===(t.s<0?3:2)):o>s||o===s&&(n===4||p||n===6&&h[r-1]&1||n===(t.s<0?8:7)),h.length=r,p)for(;++h[--r]>i-1;)h[r]=0,r||(++u,h.unshift(1));for(c=h.length;!h[c-1];--c);for(o=0,f="";o<c;o++)f+=Zl.charAt(h[o]);if(b){if(c>1)if(e==16||e==8){for(o=e==16?4:3,--c;c%o;c++)f+="0";for(h=us(f,i,e),c=h.length;!h[c-1];--c);for(o=1,f="1.";o<c;o++)f+=Zl.charAt(h[o])}else f=f.charAt(0)+"."+f.slice(1);f=f+(u<0?"p":"p+")+u}else if(u<0){for(;++u;)f="0"+f;f="0."+f}else if(++u>c)for(u-=c;u--;)f+="0";else u<c&&(f=f.slice(0,u)+"."+f.slice(u))}f=(e==16?"0x":e==2?"0b":e==8?"0o":"")+f}return t.s<0?"-"+f:f}function v0(t,e){if(t.length>e)return t.length=e,!0}function h2(t){return new this(t).abs()}function d2(t){return new this(t).acos()}function p2(t){return new this(t).acosh()}function g2(t,e){return new this(t).plus(e)}function v2(t){return new this(t).asin()}function m2(t){return new this(t).asinh()}function _2(t){return new this(t).atan()}function D2(t){return new this(t).atanh()}function b2(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,u=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=xn(this,u,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?xn(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=xn(this,u,1).times(.5),r.s=t.s):e.s<0?(this.precision=u,this.rounding=1,r=this.atan(qt(t,e,u,1)),e=xn(this,u,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(qt(t,e,u,1)),r}function y2(t){return new this(t).cbrt()}function w2(t){return Ge(t=new this(t),t.e+1,2)}function A2(t,e,r){return new this(t).clamp(e,r)}function E2(t){if(!t||typeof t!="object")throw Error(zs+"Object expected");var e,r,n,i=t.defaults===!0,u=["precision",1,ki,"rounding",0,8,"toExpNeg",-mu,0,"toExpPos",0,mu,"maxE",0,mu,"minE",-mu,0,"modulo",0,9];for(e=0;e<u.length;e+=3)if(r=u[e],i&&(this[r]=Xl[r]),(n=t[r])!==void 0)if(jr(n)===n&&n>=u[e+1]&&n<=u[e+2])this[r]=n;else throw Error(Pi+r+": "+n);if(r="crypto",i&&(this[r]=Xl[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Pp);else this[r]=!1;else throw Error(Pi+r+": "+n);return this}function C2(t){return new this(t).cos()}function F2(t){return new this(t).cosh()}function Up(t){var e,r,n;function i(u){var o,s,c,p=this;if(!(p instanceof i))return new i(u);if(p.constructor=i,m0(u)){p.s=u.s,ot?!u.d||u.e>i.maxE?(p.e=NaN,p.d=null):u.e<i.minE?(p.e=0,p.d=[0]):(p.e=u.e,p.d=u.d.slice()):(p.e=u.e,p.d=u.d?u.d.slice():u.d);return}if(c=typeof u,c==="number"){if(u===0){p.s=1/u<0?-1:1,p.e=0,p.d=[0];return}if(u<0?(u=-u,p.s=-1):p.s=1,u===~~u&&u<1e7){for(o=0,s=u;s>=10;s/=10)o++;ot?o>i.maxE?(p.e=NaN,p.d=null):o<i.minE?(p.e=0,p.d=[0]):(p.e=o,p.d=[u]):(p.e=o,p.d=[u]);return}else if(u*0!==0){u||(p.s=NaN),p.e=NaN,p.d=null;return}return ef(p,u.toString())}else if(c!=="string")throw Error(Pi+u);return(s=u.charCodeAt(0))===45?(u=u.slice(1),p.s=-1):(s===43&&(u=u.slice(1)),p.s=1),kp.test(u)?ef(p,u):f2(p,u)}if(i.prototype=De,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=E2,i.clone=Up,i.isDecimal=m0,i.abs=h2,i.acos=d2,i.acosh=p2,i.add=g2,i.asin=v2,i.asinh=m2,i.atan=_2,i.atanh=D2,i.atan2=b2,i.cbrt=y2,i.ceil=w2,i.clamp=A2,i.cos=C2,i.cosh=F2,i.div=S2,i.exp=B2,i.floor=O2,i.hypot=M2,i.ln=P2,i.log=T2,i.log10=I2,i.log2=k2,i.max=x2,i.min=N2,i.mod=R2,i.mul=L2,i.pow=U2,i.random=V2,i.round=j2,i.sign=q2,i.sin=z2,i.sinh=W2,i.sqrt=H2,i.sub=G2,i.sum=$2,i.tan=K2,i.tanh=Y2,i.trunc=Z2,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function S2(t,e){return new this(t).div(e)}function B2(t){return new this(t).exp()}function O2(t){return Ge(t=new this(t),t.e+1,3)}function M2(){var t,e,r=new this(0);for(ot=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return ot=!0,new this(1/0);r=e}return ot=!0,r.sqrt()}function m0(t){return t instanceof yu||t&&t.toStringTag===Tp||!1}function P2(t){return new this(t).ln()}function T2(t,e){return new this(t).log(e)}function k2(t){return new this(t).log(2)}function I2(t){return new this(t).log(10)}function x2(){return Np(this,arguments,"lt")}function N2(){return Np(this,arguments,"gt")}function R2(t,e){return new this(t).mod(e)}function L2(t,e){return new this(t).mul(e)}function U2(t,e){return new this(t).pow(e)}function V2(t){var e,r,n,i,u=0,o=new this(1),s=[];if(t===void 0?t=this.precision:nn(t,1,ki),n=Math.ceil(t/et),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));u<n;)i=e[u],i>=429e7?e[u]=crypto.getRandomValues(new Uint32Array(1))[0]:s[u++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);u<n;)i=e[u]+(e[u+1]<<8)+(e[u+2]<<16)+((e[u+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,u):(s.push(i%1e7),u+=4);u=n/4}else throw Error(Pp);else for(;u<n;)s[u++]=Math.random()*1e7|0;for(n=s[--u],t%=et,n&&t&&(i=mr(10,et-t),s[u]=(n/i|0)*i);s[u]===0;u--)s.pop();if(u<0)r=0,s=[0];else{for(r=-1;s[0]===0;r-=et)s.shift();for(n=1,i=s[0];i>=10;i/=10)n++;n<et&&(r-=et-n)}return o.e=r,o.d=s,o}function j2(t){return Ge(t=new this(t),t.e+1,this.rounding)}function q2(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function z2(t){return new this(t).sin()}function W2(t){return new this(t).sinh()}function H2(t){return new this(t).sqrt()}function G2(t,e){return new this(t).sub(e)}function $2(){var t=0,e=arguments,r=new this(e[t]);for(ot=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return ot=!0,Ge(r,this.precision,this.rounding)}function K2(t){return new this(t).tan()}function Y2(t){return new this(t).tanh()}function Z2(t){return Ge(t=new this(t),t.e+1,1)}De[Symbol.for("nodejs.util.inspect.custom")]=De.toString;De[Symbol.toStringTag]="Decimal";var yu=De.constructor=Up(Xl);ps=new yu(ps);gs=new yu(gs);var X2="BigNumber",J2=["?on","config"],Q2=Ut(X2,J2,t=>{var{on:e,config:r}=t,n=yu.clone({precision:r.precision,modulo:yu.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,u){i.precision!==u.precision&&n.config({precision:i.precision})}),n},{isClass:!0}),dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tf={},eA={get exports(){return tf},set exports(t){tf=t}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=Math.cosh||function(h){return Math.abs(h)<1e-9?1-h:(Math.exp(h)+Math.exp(-h))*.5},i=Math.sinh||function(h){return Math.abs(h)<1e-9?h:(Math.exp(h)-Math.exp(-h))*.5},u=function(h){var d=Math.PI/4;if(-d>h||h>d)return Math.cos(h)-1;var g=h*h;return g*(g*(g*(g*(g*(g*(g*(g/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(h,d){var g=Math.abs(h),b=Math.abs(d);return g<3e3&&b<3e3?Math.sqrt(g*g+b*b):(g<b?(g=b,b=h/d):b=d/h,g*Math.sqrt(1+b*b))},s=function(){throw SyntaxError("Invalid Param")};function c(h,d){var g=Math.abs(h),b=Math.abs(d);return h===0?Math.log(b):d===0?Math.log(g):g<3e3&&b<3e3?Math.log(h*h+d*d)*.5:(h=h/2,d=d/2,.5*Math.log(h*h+d*d)+Math.LN2)}var p=function(h,d){var g={re:0,im:0};if(h==null)g.re=g.im=0;else if(d!==void 0)g.re=h,g.im=d;else switch(typeof h){case"object":if("im"in h&&"re"in h)g.re=h.re,g.im=h.im;else if("abs"in h&&"arg"in h){if(!Number.isFinite(h.abs)&&Number.isFinite(h.arg))return f.INFINITY;g.re=h.abs*Math.cos(h.arg),g.im=h.abs*Math.sin(h.arg)}else if("r"in h&&"phi"in h){if(!Number.isFinite(h.r)&&Number.isFinite(h.phi))return f.INFINITY;g.re=h.r*Math.cos(h.phi),g.im=h.r*Math.sin(h.phi)}else h.length===2?(g.re=h[0],g.im=h[1]):s();break;case"string":g.im=g.re=0;var b=h.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),m=1,_=0;b===null&&s();for(var D=0;D<b.length;D++){var C=b[D];C===" "||C==="	"||C===`
`||(C==="+"?m++:C==="-"?_++:C==="i"||C==="I"?(m+_===0&&s(),b[D+1]!==" "&&!isNaN(b[D+1])?(g.im+=parseFloat((_%2?"-":"")+b[D+1]),D++):g.im+=parseFloat((_%2?"-":"")+"1"),m=_=0):((m+_===0||isNaN(C))&&s(),b[D+1]==="i"||b[D+1]==="I"?(g.im+=parseFloat((_%2?"-":"")+C),D++):g.re+=parseFloat((_%2?"-":"")+C),m=_=0))}m+_>0&&s();break;case"number":g.im=0,g.re=h;break;default:s()}return isNaN(g.re)||isNaN(g.im),g};function f(h,d){if(!(this instanceof f))return new f(h,d);var g=p(h,d);this.re=g.re,this.im=g.im}f.prototype={re:0,im:0,sign:function(){var h=this.abs();return new f(this.re/h,this.im/h)},add:function(h,d){var g=new f(h,d);return this.isInfinite()&&g.isInfinite()?f.NAN:this.isInfinite()||g.isInfinite()?f.INFINITY:new f(this.re+g.re,this.im+g.im)},sub:function(h,d){var g=new f(h,d);return this.isInfinite()&&g.isInfinite()?f.NAN:this.isInfinite()||g.isInfinite()?f.INFINITY:new f(this.re-g.re,this.im-g.im)},mul:function(h,d){var g=new f(h,d);return this.isInfinite()&&g.isZero()||this.isZero()&&g.isInfinite()?f.NAN:this.isInfinite()||g.isInfinite()?f.INFINITY:g.im===0&&this.im===0?new f(this.re*g.re,0):new f(this.re*g.re-this.im*g.im,this.re*g.im+this.im*g.re)},div:function(h,d){var g=new f(h,d);if(this.isZero()&&g.isZero()||this.isInfinite()&&g.isInfinite())return f.NAN;if(this.isInfinite()||g.isZero())return f.INFINITY;if(this.isZero()||g.isInfinite())return f.ZERO;h=this.re,d=this.im;var b=g.re,m=g.im,_,D;return m===0?new f(h/b,d/b):Math.abs(b)<Math.abs(m)?(D=b/m,_=b*D+m,new f((h*D+d)/_,(d*D-h)/_)):(D=m/b,_=m*D+b,new f((h+d*D)/_,(d-h*D)/_))},pow:function(h,d){var g=new f(h,d);if(h=this.re,d=this.im,g.isZero())return f.ONE;if(g.im===0){if(d===0&&h>0)return new f(Math.pow(h,g.re),0);if(h===0)switch((g.re%4+4)%4){case 0:return new f(Math.pow(d,g.re),0);case 1:return new f(0,Math.pow(d,g.re));case 2:return new f(-Math.pow(d,g.re),0);case 3:return new f(0,-Math.pow(d,g.re))}}if(h===0&&d===0&&g.re>0&&g.im>=0)return f.ZERO;var b=Math.atan2(d,h),m=c(h,d);return h=Math.exp(g.re*m-g.im*b),d=g.im*m+g.re*b,new f(h*Math.cos(d),h*Math.sin(d))},sqrt:function(){var h=this.re,d=this.im,g=this.abs(),b,m;if(h>=0){if(d===0)return new f(Math.sqrt(h),0);b=.5*Math.sqrt(2*(g+h))}else b=Math.abs(d)/Math.sqrt(2*(g-h));return h<=0?m=.5*Math.sqrt(2*(g-h)):m=Math.abs(d)/Math.sqrt(2*(g+h)),new f(b,d<0?-m:m)},exp:function(){var h=Math.exp(this.re);return this.im,new f(h*Math.cos(this.im),h*Math.sin(this.im))},expm1:function(){var h=this.re,d=this.im;return new f(Math.expm1(h)*Math.cos(d)+u(d),Math.exp(h)*Math.sin(d))},log:function(){var h=this.re,d=this.im;return new f(c(h,d),Math.atan2(d,h))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var h=this.re,d=this.im;return new f(Math.sin(h)*n(d),Math.cos(h)*i(d))},cos:function(){var h=this.re,d=this.im;return new f(Math.cos(h)*n(d),-Math.sin(h)*i(d))},tan:function(){var h=2*this.re,d=2*this.im,g=Math.cos(h)+n(d);return new f(Math.sin(h)/g,i(d)/g)},cot:function(){var h=2*this.re,d=2*this.im,g=Math.cos(h)-n(d);return new f(-Math.sin(h)/g,i(d)/g)},sec:function(){var h=this.re,d=this.im,g=.5*n(2*d)+.5*Math.cos(2*h);return new f(Math.cos(h)*n(d)/g,Math.sin(h)*i(d)/g)},csc:function(){var h=this.re,d=this.im,g=.5*n(2*d)-.5*Math.cos(2*h);return new f(Math.sin(h)*n(d)/g,-Math.cos(h)*i(d)/g)},asin:function(){var h=this.re,d=this.im,g=new f(d*d-h*h+1,-2*h*d).sqrt(),b=new f(g.re-d,g.im+h).log();return new f(b.im,-b.re)},acos:function(){var h=this.re,d=this.im,g=new f(d*d-h*h+1,-2*h*d).sqrt(),b=new f(g.re-d,g.im+h).log();return new f(Math.PI/2-b.im,b.re)},atan:function(){var h=this.re,d=this.im;if(h===0){if(d===1)return new f(0,1/0);if(d===-1)return new f(0,-1/0)}var g=h*h+(1-d)*(1-d),b=new f((1-d*d-h*h)/g,-2*h/g).log();return new f(-.5*b.im,.5*b.re)},acot:function(){var h=this.re,d=this.im;if(d===0)return new f(Math.atan2(1,h),0);var g=h*h+d*d;return g!==0?new f(h/g,-d/g).atan():new f(h!==0?h/0:0,d!==0?-d/0:0).atan()},asec:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new f(0,1/0);var g=h*h+d*d;return g!==0?new f(h/g,-d/g).acos():new f(h!==0?h/0:0,d!==0?-d/0:0).acos()},acsc:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new f(Math.PI/2,1/0);var g=h*h+d*d;return g!==0?new f(h/g,-d/g).asin():new f(h!==0?h/0:0,d!==0?-d/0:0).asin()},sinh:function(){var h=this.re,d=this.im;return new f(i(h)*Math.cos(d),n(h)*Math.sin(d))},cosh:function(){var h=this.re,d=this.im;return new f(n(h)*Math.cos(d),i(h)*Math.sin(d))},tanh:function(){var h=2*this.re,d=2*this.im,g=n(h)+Math.cos(d);return new f(i(h)/g,Math.sin(d)/g)},coth:function(){var h=2*this.re,d=2*this.im,g=n(h)-Math.cos(d);return new f(i(h)/g,-Math.sin(d)/g)},csch:function(){var h=this.re,d=this.im,g=Math.cos(2*d)-n(2*h);return new f(-2*i(h)*Math.cos(d)/g,2*n(h)*Math.sin(d)/g)},sech:function(){var h=this.re,d=this.im,g=Math.cos(2*d)+n(2*h);return new f(2*n(h)*Math.cos(d)/g,-2*i(h)*Math.sin(d)/g)},asinh:function(){var h=this.im;this.im=-this.re,this.re=h;var d=this.asin();return this.re=-this.im,this.im=h,h=d.re,d.re=-d.im,d.im=h,d},acosh:function(){var h=this.acos();if(h.im<=0){var d=h.re;h.re=-h.im,h.im=d}else{var d=h.im;h.im=-h.re,h.re=d}return h},atanh:function(){var h=this.re,d=this.im,g=h>1&&d===0,b=1-h,m=1+h,_=b*b+d*d,D=_!==0?new f((m*b-d*d)/_,(d*b+m*d)/_):new f(h!==-1?h/0:0,d!==0?d/0:0),C=D.re;return D.re=c(D.re,D.im)/2,D.im=Math.atan2(D.im,C)/2,g&&(D.im=-D.im),D},acoth:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new f(0,Math.PI/2);var g=h*h+d*d;return g!==0?new f(h/g,-d/g).atanh():new f(h!==0?h/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var h=this.re,d=this.im;if(d===0)return new f(h!==0?Math.log(h+Math.sqrt(h*h+1)):1/0,0);var g=h*h+d*d;return g!==0?new f(h/g,-d/g).asinh():new f(h!==0?h/0:0,d!==0?-d/0:0).asinh()},asech:function(){var h=this.re,d=this.im;if(this.isZero())return f.INFINITY;var g=h*h+d*d;return g!==0?new f(h/g,-d/g).acosh():new f(h!==0?h/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return f.INFINITY;if(this.isInfinite())return f.ZERO;var h=this.re,d=this.im,g=h*h+d*d;return new f(h/g,-d/g)},conjugate:function(){return new f(this.re,-this.im)},neg:function(){return new f(-this.re,-this.im)},ceil:function(h){return h=Math.pow(10,h||0),new f(Math.ceil(this.re*h)/h,Math.ceil(this.im*h)/h)},floor:function(h){return h=Math.pow(10,h||0),new f(Math.floor(this.re*h)/h,Math.floor(this.im*h)/h)},round:function(h){return h=Math.pow(10,h||0),new f(Math.round(this.re*h)/h,Math.round(this.im*h)/h)},equals:function(h,d){var g=new f(h,d);return Math.abs(g.re-this.re)<=f.EPSILON&&Math.abs(g.im-this.im)<=f.EPSILON},clone:function(){return new f(this.re,this.im)},toString:function(){var h=this.re,d=this.im,g="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(h)<f.EPSILON&&(h=0),Math.abs(d)<f.EPSILON&&(d=0),d===0?g+h:(h!==0?(g+=h,g+=" ",d<0?(d=-d,g+="-"):g+="+",g+=" "):d<0&&(d=-d,g+="-"),d!==1&&(g+=d),g+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},f.ZERO=new f(0,0),f.ONE=new f(1,0),f.I=new f(0,1),f.PI=new f(Math.PI,0),f.E=new f(Math.E,0),f.INFINITY=new f(1/0,1/0),f.NAN=new f(NaN,NaN),f.EPSILON=1e-15,Object.defineProperty(f,"__esModule",{value:!0}),f.default=f,f.Complex=f,t.exports=f})()})(eA);const Or=Cf(tf);var tA="Complex",rA=[],nA=Ut(tA,rA,()=>(Object.defineProperty(Or,"name",{value:"Complex"}),Or.prototype.constructor=Or,Or.prototype.type="Complex",Or.prototype.isComplex=!0,Or.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Or.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Or.prototype.format=function(t){var e="",r=this.im,n=this.re,i=Kl(this.re,t),u=Kl(this.im,t),o=tr(t)?t:t?t.precision:null;if(o!==null){var s=Math.pow(10,-o);Math.abs(n/r)<s&&(n=0),Math.abs(r/n)<s&&(r=0)}return r===0?e=i:n===0?r===1?e="i":r===-1?e="-i":e=u+"i":r<0?r===-1?e=i+" - i":e=i+" - "+u.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+u+"i",e},Or.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Or(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(tr(r)){if(_p(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),tr(n))return new Or({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Or.prototype.valueOf=Or.prototype.toString,Or.fromJSON=function(t){return new Or(t)},Or.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Or),{isClass:!0}),rf={},iA={get exports(){return rf},set exports(t){rf=t}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=2e3,i={s:1,n:0,d:1};function u(b,m){if(isNaN(b=parseInt(b,10)))throw g.InvalidParameter;return b*m}function o(b,m){if(m===0)throw g.DivisionByZero;var _=Object.create(g.prototype);_.s=b<0?-1:1,b=b<0?-b:b;var D=d(b,m);return _.n=b/D,_.d=m/D,_}function s(b){for(var m={},_=b,D=2,C=4;C<=_;){for(;_%D===0;)_/=D,m[D]=(m[D]||0)+1;C+=1+2*D++}return _!==b?_>1&&(m[_]=(m[_]||0)+1):m[b]=(m[b]||0)+1,m}var c=function(b,m){var _=0,D=1,C=1,A=0,S=0,E=0,B=1,P=1,T=0,N=1,G=1,re=1,z=1e7,Y;if(b!=null)if(m!==void 0){if(_=b,D=m,C=_*D,_%1!==0||D%1!==0)throw g.NonIntegerParameter}else switch(typeof b){case"object":{if("d"in b&&"n"in b)_=b.n,D=b.d,"s"in b&&(_*=b.s);else if(0 in b)_=b[0],1 in b&&(D=b[1]);else throw g.InvalidParameter;C=_*D;break}case"number":{if(b<0&&(C=b,b=-b),b%1===0)_=b;else if(b>0){for(b>=1&&(P=Math.pow(10,Math.floor(1+Math.log(b)/Math.LN10)),b/=P);N<=z&&re<=z;)if(Y=(T+G)/(N+re),b===Y){N+re<=z?(_=T+G,D=N+re):re>N?(_=G,D=re):(_=T,D=N);break}else b>Y?(T+=G,N+=re):(G+=T,re+=N),N>z?(_=G,D=re):(_=T,D=N);_*=P}else(isNaN(b)||isNaN(m))&&(D=_=NaN);break}case"string":{if(N=b.match(/\d+|./g),N===null)throw g.InvalidParameter;if(N[T]==="-"?(C=-1,T++):N[T]==="+"&&T++,N.length===T+1?S=u(N[T++],C):N[T+1]==="."||N[T]==="."?(N[T]!=="."&&(A=u(N[T++],C)),T++,(T+1===N.length||N[T+1]==="("&&N[T+3]===")"||N[T+1]==="'"&&N[T+3]==="'")&&(S=u(N[T],C),B=Math.pow(10,N[T].length),T++),(N[T]==="("&&N[T+2]===")"||N[T]==="'"&&N[T+2]==="'")&&(E=u(N[T+1],C),P=Math.pow(10,N[T+1].length)-1,T+=3)):N[T+1]==="/"||N[T+1]===":"?(S=u(N[T],C),B=u(N[T+2],1),T+=3):N[T+3]==="/"&&N[T+1]===" "&&(A=u(N[T],C),S=u(N[T+2],C),B=u(N[T+4],1),T+=5),N.length<=T){D=B*P,C=_=E+D*A+P*S;break}}default:throw g.InvalidParameter}if(D===0)throw g.DivisionByZero;i.s=C<0?-1:1,i.n=Math.abs(_),i.d=Math.abs(D)};function p(b,m,_){for(var D=1;m>0;b=b*b%_,m>>=1)m&1&&(D=D*b%_);return D}function f(b,m){for(;m%2===0;m/=2);for(;m%5===0;m/=5);if(m===1)return 0;for(var _=10%m,D=1;_!==1;D++)if(_=_*10%m,D>n)return 0;return D}function h(b,m,_){for(var D=1,C=p(10,_,m),A=0;A<300;A++){if(D===C)return A;D=D*10%m,C=C*10%m}return 0}function d(b,m){if(!b)return m;if(!m)return b;for(;;){if(b%=m,!b)return m;if(m%=b,!m)return b}}function g(b,m){if(c(b,m),this instanceof g)b=d(i.d,i.n),this.s=i.s,this.n=i.n/b,this.d=i.d/b;else return o(i.s*i.n,i.d)}g.DivisionByZero=new Error("Division by Zero"),g.InvalidParameter=new Error("Invalid argument"),g.NonIntegerParameter=new Error("Parameters must be integer"),g.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(b,m){return c(b,m),o(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(b,m){return c(b,m),o(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(b,m){return c(b,m),o(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(b,m){return c(b,m),o(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(b,m){if(isNaN(this.n)||isNaN(this.d))return new g(NaN);if(b===void 0)return o(this.s*this.n%this.d,1);if(c(b,m),i.n===0&&this.d===0)throw g.DivisionByZero;return o(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(b,m){return c(b,m),o(d(i.n,this.n)*d(i.d,this.d),i.d*this.d)},lcm:function(b,m){return c(b,m),i.n===0&&this.n===0?o(0,1):o(i.n*this.n,d(i.n,this.n)*d(i.d,this.d))},ceil:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.ceil(b*this.s*this.n/this.d),b)},floor:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.floor(b*this.s*this.n/this.d),b)},round:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.round(b*this.s*this.n/this.d),b)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(b,m){if(c(b,m),i.d===1)return i.s<0?o(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):o(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var _=s(this.n),D=s(this.d),C=1,A=1;for(var S in _)if(S!=="1"){if(S==="0"){C=0;break}if(_[S]*=i.n,_[S]%i.d===0)_[S]/=i.d;else return null;C*=Math.pow(S,_[S])}for(var S in D)if(S!=="1"){if(D[S]*=i.n,D[S]%i.d===0)D[S]/=i.d;else return null;A*=Math.pow(S,D[S])}return i.s<0?o(A,C):o(C,A)},equals:function(b,m){return c(b,m),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(b,m){c(b,m);var _=this.s*this.n*i.d-i.s*i.n*this.d;return(0<_)-(_<0)},simplify:function(b){if(isNaN(this.n)||isNaN(this.d))return this;b=b||.001;for(var m=this.abs(),_=m.toContinued(),D=1;D<_.length;D++){for(var C=o(_[D-1],1),A=D-2;A>=0;A--)C=C.inverse().add(_[A]);if(C.sub(m).abs().valueOf()<b)return C.mul(this.s)}return this},divisible:function(b,m){return c(b,m),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(b){var m,_="",D=this.n,C=this.d;return this.s<0&&(_+="-"),C===1?_+=D:(b&&(m=Math.floor(D/C))>0&&(_+=m,_+=" ",D%=C),_+=D,_+="/",_+=C),_},toLatex:function(b){var m,_="",D=this.n,C=this.d;return this.s<0&&(_+="-"),C===1?_+=D:(b&&(m=Math.floor(D/C))>0&&(_+=m,D%=C),_+="\\frac{",_+=D,_+="}{",_+=C,_+="}"),_},toContinued:function(){var b,m=this.n,_=this.d,D=[];if(isNaN(m)||isNaN(_))return D;do D.push(Math.floor(m/_)),b=m%_,m=_,_=b;while(m!==1);return D},toString:function(b){var m=this.n,_=this.d;if(isNaN(m)||isNaN(_))return"NaN";b=b||15;var D=f(m,_),C=h(m,_,D),A=this.s<0?"-":"";if(A+=m/_|0,m%=_,m*=10,m&&(A+="."),D){for(var S=C;S--;)A+=m/_|0,m%=_,m*=10;A+="(";for(var S=D;S--;)A+=m/_|0,m%=_,m*=10;A+=")"}else for(var S=b;m&&S--;)A+=m/_|0,m%=_,m*=10;return A}},Object.defineProperty(g,"__esModule",{value:!0}),g.default=g,g.Fraction=g,t.exports=g})()})(iA);const oi=Cf(rf);var uA="Fraction",aA=[],sA=Ut(uA,aA,()=>(Object.defineProperty(oi,"name",{value:"Fraction"}),oi.prototype.constructor=oi,oi.prototype.type="Fraction",oi.prototype.isFraction=!0,oi.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},oi.fromJSON=function(t){return new oi(t)},oi),{isClass:!0}),oA="Matrix",lA=[],fA=Ut(oA,lA,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function Vp(t){return Object.keys(t.signatures||{}).reduce(function(e,r){var n=(r.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var cA="DenseMatrix",hA=["Matrix"],dA=Ut(cA,hA,t=>{var{Matrix:e}=t;function r(f,h){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(h&&!Hn(h))throw new Error("Invalid datatype: "+h);if($r(f))f.type==="DenseMatrix"?(this._data=wr(f._data),this._size=wr(f._size),this._datatype=h||f._datatype):(this._data=f.toArray(),this._size=f.size(),this._datatype=h||f._datatype);else if(f&&Qt(f.data)&&Qt(f.size))this._data=f.data,this._size=f.size,d0(this._data,this._size),this._datatype=h||f.datatype;else if(Qt(f))this._data=p(f),this._size=Mi(this._data),d0(this._data,this._size),this._datatype=h;else{if(f)throw new TypeError("Unsupported type of data ("+ra(f)+")");this._data=[],this._size=[0],this._datatype=h}}r.prototype=new e,r.prototype.createDenseMatrix=function(f,h){return new r(f,h)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return ds(this._data,ra)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(f,h){return new r(f,h)},r.prototype.subset=function(f,h,d){switch(arguments.length){case 1:return n(this,f);case 2:case 3:return u(this,f,h,d);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(f){if(!Qt(f))throw new TypeError("Array expected");if(f.length!==this._size.length)throw new Rt(f.length,this._size.length);for(var h=0;h<f.length;h++)er(f[h],this._size[h]);for(var d=this._data,g=0,b=f.length;g<b;g++){var m=f[g];er(m,d.length),d=d[m]}return d},r.prototype.set=function(f,h,d){if(!Qt(f))throw new TypeError("Array expected");if(f.length<this._size.length)throw new Rt(f.length,this._size.length,"<");var g,b,m,_=f.map(function(C){return C+1});c(this,_,d);var D=this._data;for(g=0,b=f.length-1;g<b;g++)m=f[g],er(m,D.length),D=D[m];return m=f[f.length-1],er(m,D.length),D[m]=h,this};function n(f,h){if(!yf(h))throw new TypeError("Invalid index");var d=h.isScalar();if(d)return f.get(h.min());var g=h.size();if(g.length!==f._size.length)throw new Rt(g.length,f._size.length);for(var b=h.min(),m=h.max(),_=0,D=f._size.length;_<D;_++)er(b[_],f._size[_]),er(m[_],f._size[_]);return new r(i(f._data,h,g.length,0),f._datatype)}function i(f,h,d,g){var b=g===d-1,m=h.dimension(g);return b?m.map(function(_){return er(_,f.length),f[_]}).valueOf():m.map(function(_){er(_,f.length);var D=f[_];return i(D,h,d,g+1)}).valueOf()}function u(f,h,d,g){if(!h||h.isIndex!==!0)throw new TypeError("Invalid index");var b=h.size(),m=h.isScalar(),_;if($r(d)?(_=d.size(),d=d.valueOf()):_=Mi(d),m){if(_.length!==0)throw new TypeError("Scalar expected");f.set(h.min(),d,g)}else{if(b.length<f._size.length)throw new Rt(b.length,f._size.length,"<");if(_.length<b.length){for(var D=0,C=0;b[D]===1&&_[D]===1;)D++;for(;b[D]===1;)C++,D++;d=Ep(d,b.length,C,_)}if(!cs(b,_))throw new Rt(b,_,">");var A=h.max().map(function(B){return B+1});c(f,A,g);var S=b.length,E=0;o(f._data,h,d,S,E)}return f}function o(f,h,d,g,b){var m=b===g-1,_=h.dimension(b);m?_.forEach(function(D,C){er(D),f[D]=d[C[0]]}):_.forEach(function(D,C){er(D),o(f[D],h,d[C[0]],g,b+1)})}r.prototype.resize=function(f,h,d){if(!fs(f))throw new TypeError("Array or Matrix expected");var g=f.valueOf().map(m=>Array.isArray(m)&&m.length===1?m[0]:m),b=d?this.clone():this;return s(b,g,h)};function s(f,h,d){if(h.length===0){for(var g=f._data;Qt(g);)g=g[0];return g}return f._size=h.slice(0),f._data=p0(f._data,f._size,d),f}r.prototype.reshape=function(f,h){var d=h?this.clone():this;d._data=jw(d._data,f);var g=d._size.reduce((b,m)=>b*m);return d._size=Af(f,g),d};function c(f,h,d){for(var g=f._size.slice(0),b=!1;g.length<h.length;)g.push(0),b=!0;for(var m=0,_=h.length;m<_;m++)h[m]>g[m]&&(g[m]=h[m],b=!0);b&&s(f,g,d)}r.prototype.clone=function(){var f=new r({data:wr(this._data),size:wr(this._size),datatype:this._datatype});return f},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(f){var h=this,d=Vp(f),g=function _(D,C){return Qt(D)?D.map(function(A,S){return _(A,C.concat(S))}):d===1?f(D):d===2?f(D,C):f(D,C,h)},b=g(this._data,[]),m=this._datatype!==void 0?ds(b,ra):void 0;return new r(b,m)},r.prototype.forEach=function(f){var h=this,d=function g(b,m){Qt(b)?b.forEach(function(_,D){g(_,m.concat(D))}):f(b,m,h)};d(this._data,[])},r.prototype[Symbol.iterator]=function*(){var f=function*h(d,g){if(Qt(d))for(var b=0;b<d.length;b++)yield*h(d[b],g.concat(b));else yield{value:d,index:g}};yield*f(this._data,[])},r.prototype.rows=function(){var f=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var g of d)f.push(new r([g],this._datatype));return f},r.prototype.columns=function(){var f=this,h=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var g=this._data,b=function(D){var C=g.map(A=>[A[D]]);h.push(new r(C,f._datatype))},m=0;m<d[1];m++)b(m);return h},r.prototype.toArray=function(){return wr(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(f){return en(this._data,f)},r.prototype.toString=function(){return en(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(f){if(f){if(Fn(f)&&(f=f.toNumber()),!tr(f)||!Ar(f))throw new TypeError("The parameter k must be an integer number")}else f=0;for(var h=f>0?f:0,d=f<0?-f:0,g=this._size[0],b=this._size[1],m=Math.min(g-d,b-h),_=[],D=0;D<m;D++)_[D]=this._data[D+d][D+h];return new r({data:_,size:[m],datatype:this._datatype})},r.diagonal=function(f,h,d,g){if(!Qt(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(P){if(Fn(P)&&(P=P.toNumber()),!tr(P)||!Ar(P)||P<1)throw new Error("Size values must be positive integers");return P}),d){if(Fn(d)&&(d=d.toNumber()),!tr(d)||!Ar(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var b=d>0?d:0,m=d<0?-d:0,_=f[0],D=f[1],C=Math.min(_-m,D-b),A;if(Qt(h)){if(h.length!==C)throw new Error("Invalid value array length");A=function(T){return h[T]}}else if($r(h)){var S=h.size();if(S.length!==1||S[0]!==C)throw new Error("Invalid matrix length");A=function(T){return h.get([T])}}else A=function(){return h};g||(g=Fn(A(0))?A(0).mul(0):0);var E=[];if(f.length>0){E=p0(E,f,g);for(var B=0;B<C;B++)E[B+m][B+b]=A(B)}return new r({data:E,size:[_,D]})},r.fromJSON=function(f){return new r(f)},r.prototype.swapRows=function(f,h){if(!tr(f)||!Ar(f)||!tr(h)||!Ar(h))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return er(f,this._size[0]),er(h,this._size[0]),r._swapRows(f,h,this._data),this},r._swapRows=function(f,h,d){var g=d[f];d[f]=d[h],d[h]=g};function p(f){for(var h=0,d=f.length;h<d;h++){var g=f[h];Qt(g)?f[h]=p(g):g&&g.isMatrix===!0&&(f[h]=p(g.valueOf()))}return f}return r},{isClass:!0});function Ff(t,e,r){return t&&typeof t.map=="function"?t.map(function(n){return Ff(n,e)}):e(t)}var _0="isInteger",pA=["typed"],gA=Ut(_0,pA,t=>{var{typed:e}=t;return e(_0,{number:Ar,BigNumber:function(n){return n.isInt()},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":e.referToSelf(r=>n=>Ff(n,r))})}),jp="number, number";function qp(t,e){return t+e}qp.signature=jp;function zp(t,e){return t*e}zp.signature=jp;function vA(t,e,r){if(r==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return n.lte(i.times(r))}return!1}function mA(t,e,r){return hs(t.re,e.re,r)&&hs(t.im,e.im,r)}var _A=Ut("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),ms="equalScalar",DA=["typed","config"],bA=Ut(ms,DA,t=>{var{typed:e,config:r}=t,n=_A({typed:e});return e(ms,{"boolean, boolean":function(u,o){return u===o},"number, number":function(u,o){return hs(u,o,r.epsilon)},"BigNumber, BigNumber":function(u,o){return u.eq(o)||vA(u,o,r.epsilon)},"Fraction, Fraction":function(u,o){return u.equals(o)},"Complex, Complex":function(u,o){return mA(u,o,r.epsilon)}},n)});Ut(ms,["typed","config"],t=>{var{typed:e,config:r}=t;return e(ms,{"number, number":function(i,u){return hs(i,u,r.epsilon)}})});var yA="SparseMatrix",wA=["typed","equalScalar","Matrix"],AA=Ut(yA,wA,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(m,_){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(_&&!Hn(_))throw new Error("Invalid datatype: "+_);if($r(m))u(this,m,_);else if(m&&Qt(m.index)&&Qt(m.ptr)&&Qt(m.size))this._values=m.values,this._index=m.index,this._ptr=m.ptr,this._size=m.size,this._datatype=_||m.datatype;else if(Qt(m))o(this,m,_);else{if(m)throw new TypeError("Unsupported type of data ("+ra(m)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=_}}function u(m,_,D){_.type==="SparseMatrix"?(m._values=_._values?wr(_._values):void 0,m._index=wr(_._index),m._ptr=wr(_._ptr),m._size=wr(_._size),m._datatype=D||_._datatype):o(m,_.valueOf(),D||_._datatype)}function o(m,_,D){m._values=[],m._index=[],m._ptr=[],m._datatype=D;var C=_.length,A=0,S=r,E=0;if(Hn(D)&&(S=e.find(r,[D,D])||r,E=e.convert(0,D)),C>0){var B=0;do{m._ptr.push(m._index.length);for(var P=0;P<C;P++){var T=_[P];if(Qt(T)){if(B===0&&A<T.length&&(A=T.length),B<T.length){var N=T[B];S(N,E)||(m._values.push(N),m._index.push(P))}}else B===0&&A<1&&(A=1),S(T,E)||(m._values.push(T),m._index.push(P))}B++}while(B<A)}m._ptr.push(m._index.length),m._size=[C,A]}i.prototype=new n,i.prototype.createSparseMatrix=function(m,_){return new i(m,_)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return ds(this._values,ra)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(m,_){return new i(m,_)},i.prototype.density=function(){var m=this._size[0],_=this._size[1];return m!==0&&_!==0?this._index.length/(m*_):0},i.prototype.subset=function(m,_,D){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,m);case 2:case 3:return c(this,m,_,D);default:throw new SyntaxError("Wrong number of arguments")}};function s(m,_){if(!yf(_))throw new TypeError("Invalid index");var D=_.isScalar();if(D)return m.get(_.min());var C=_.size();if(C.length!==m._size.length)throw new Rt(C.length,m._size.length);var A,S,E,B,P=_.min(),T=_.max();for(A=0,S=m._size.length;A<S;A++)er(P[A],m._size[A]),er(T[A],m._size[A]);var N=m._values,G=m._index,re=m._ptr,z=_.dimension(0),Y=_.dimension(1),V=[],U=[];z.forEach(function(X,le){U[X]=le[0],V[X]=!0});var q=N?[]:void 0,J=[],Z=[];return Y.forEach(function(X){for(Z.push(J.length),E=re[X],B=re[X+1];E<B;E++)A=G[E],V[A]===!0&&(J.push(U[A]),q&&q.push(N[E]))}),Z.push(J.length),new i({values:q,index:J,ptr:Z,size:C,datatype:m._datatype})}function c(m,_,D,C){if(!_||_.isIndex!==!0)throw new TypeError("Invalid index");var A=_.size(),S=_.isScalar(),E;if($r(D)?(E=D.size(),D=D.toArray()):E=Mi(D),S){if(E.length!==0)throw new TypeError("Scalar expected");m.set(_.min(),D,C)}else{if(A.length!==1&&A.length!==2)throw new Rt(A.length,m._size.length,"<");if(E.length<A.length){for(var B=0,P=0;A[B]===1&&E[B]===1;)B++;for(;A[B]===1;)P++,B++;D=Ep(D,A.length,P,E)}if(!cs(A,E))throw new Rt(A,E,">");if(A.length===1){var T=_.dimension(0);T.forEach(function(re,z){er(re),m.set([re,0],D[z[0]],C)})}else{var N=_.dimension(0),G=_.dimension(1);N.forEach(function(re,z){er(re),G.forEach(function(Y,V){er(Y),m.set([re,Y],D[z[0]][V[0]],C)})})}}return m}i.prototype.get=function(m){if(!Qt(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new Rt(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var _=m[0],D=m[1];er(_,this._size[0]),er(D,this._size[1]);var C=p(_,this._ptr[D],this._ptr[D+1],this._index);return C<this._ptr[D+1]&&this._index[C]===_?this._values[C]:0},i.prototype.set=function(m,_,D){if(!Qt(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new Rt(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var C=m[0],A=m[1],S=this._size[0],E=this._size[1],B=r,P=0;Hn(this._datatype)&&(B=e.find(r,[this._datatype,this._datatype])||r,P=e.convert(0,this._datatype)),(C>S-1||A>E-1)&&(d(this,Math.max(C+1,S),Math.max(A+1,E),D),S=this._size[0],E=this._size[1]),er(C,S),er(A,E);var T=p(C,this._ptr[A],this._ptr[A+1],this._index);return T<this._ptr[A+1]&&this._index[T]===C?B(_,P)?f(T,A,this._values,this._index,this._ptr):this._values[T]=_:B(_,P)||h(T,C,A,_,this._values,this._index,this._ptr),this};function p(m,_,D,C){if(D-_===0)return D;for(var A=_;A<D;A++)if(C[A]===m)return A;return _}function f(m,_,D,C,A){D.splice(m,1),C.splice(m,1);for(var S=_+1;S<A.length;S++)A[S]--}function h(m,_,D,C,A,S,E){A.splice(m,0,C),S.splice(m,0,_);for(var B=D+1;B<E.length;B++)E[B]++}i.prototype.resize=function(m,_,D){if(!fs(m))throw new TypeError("Array or Matrix expected");var C=m.valueOf().map(S=>Array.isArray(S)&&S.length===1?S[0]:S);if(C.length!==2)throw new Error("Only two dimensions matrix are supported");C.forEach(function(S){if(!tr(S)||!Ar(S)||S<0)throw new TypeError("Invalid size, must contain positive integers (size: "+en(C)+")")});var A=D?this.clone():this;return d(A,C[0],C[1],_)};function d(m,_,D,C){var A=C||0,S=r,E=0;Hn(m._datatype)&&(S=e.find(r,[m._datatype,m._datatype])||r,E=e.convert(0,m._datatype),A=e.convert(A,m._datatype));var B=!S(A,E),P=m._size[0],T=m._size[1],N,G,re;if(D>T){for(G=T;G<D;G++)if(m._ptr[G]=m._values.length,B)for(N=0;N<P;N++)m._values.push(A),m._index.push(N);m._ptr[D]=m._values.length}else D<T&&(m._ptr.splice(D+1,T-D),m._values.splice(m._ptr[D],m._values.length),m._index.splice(m._ptr[D],m._index.length));if(T=D,_>P){if(B){var z=0;for(G=0;G<T;G++){m._ptr[G]=m._ptr[G]+z,re=m._ptr[G+1]+z;var Y=0;for(N=P;N<_;N++,Y++)m._values.splice(re+Y,0,A),m._index.splice(re+Y,0,N),z++}m._ptr[T]=m._values.length}}else if(_<P){var V=0;for(G=0;G<T;G++){m._ptr[G]=m._ptr[G]-V;var U=m._ptr[G],q=m._ptr[G+1]-V;for(re=U;re<q;re++)N=m._index[re],N>_-1&&(m._values.splice(re,1),m._index.splice(re,1),V++)}m._ptr[G]=m._values.length}return m._size[0]=_,m._size[1]=D,m}i.prototype.reshape=function(m,_){if(!Qt(m))throw new TypeError("Array expected");if(m.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");m.forEach(function(X){if(!tr(X)||!Ar(X)||X<=-2||X===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+en(m)+")")});var D=this._size[0]*this._size[1];m=Af(m,D);var C=m[0]*m[1];if(D!==C)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var A=_?this.clone():this;if(this._size[0]===m[0]&&this._size[1]===m[1])return A;for(var S=[],E=0;E<A._ptr.length;E++)for(var B=0;B<A._ptr[E+1]-A._ptr[E];B++)S.push(E);for(var P=A._values.slice(),T=A._index.slice(),N=0;N<A._index.length;N++){var G=T[N],re=S[N],z=G*A._size[1]+re;S[N]=z%m[1],T[N]=Math.floor(z/m[1])}A._values.length=0,A._index.length=0,A._ptr.length=m[1]+1,A._size=m.slice();for(var Y=0;Y<A._ptr.length;Y++)A._ptr[Y]=0;for(var V=0;V<P.length;V++){var U=T[V],q=S[V],J=P[V],Z=p(U,A._ptr[q],A._ptr[q+1],A._index);h(Z,U,q,J,A._values,A._index,A._ptr)}return A},i.prototype.clone=function(){var m=new i({values:this._values?wr(this._values):void 0,index:wr(this._index),ptr:wr(this._ptr),size:wr(this._size),datatype:this._datatype});return m},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(m,_){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var D=this,C=this._size[0],A=this._size[1],S=Vp(m),E=function(P,T,N){return S===1?m(P):S===2?m(P,[T,N]):m(P,[T,N],D)};return g(this,0,C-1,0,A-1,E,_)};function g(m,_,D,C,A,S,E){var B=[],P=[],T=[],N=r,G=0;Hn(m._datatype)&&(N=e.find(r,[m._datatype,m._datatype])||r,G=e.convert(0,m._datatype));for(var re=function(ye,Oe,qe){ye=S(ye,Oe,qe),N(ye,G)||(B.push(ye),P.push(Oe))},z=C;z<=A;z++){T.push(B.length);var Y=m._ptr[z],V=m._ptr[z+1];if(E)for(var U=Y;U<V;U++){var q=m._index[U];q>=_&&q<=D&&re(m._values[U],q-_,z-C)}else{for(var J={},Z=Y;Z<V;Z++){var X=m._index[Z];J[X]=m._values[Z]}for(var le=_;le<=D;le++){var ge=le in J?J[le]:0;re(ge,le-_,z-C)}}}return T.push(B.length),new i({values:B,index:P,ptr:T,size:[D-_+1,A-C+1]})}i.prototype.forEach=function(m,_){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var D=this,C=this._size[0],A=this._size[1],S=0;S<A;S++){var E=this._ptr[S],B=this._ptr[S+1];if(_)for(var P=E;P<B;P++){var T=this._index[P];m(this._values[P],[T,S],D)}else{for(var N={},G=E;G<B;G++){var re=this._index[G];N[re]=this._values[G]}for(var z=0;z<C;z++){var Y=z in N?N[z]:0;m(Y,[z,S],D)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var m=this._size[1],_=0;_<m;_++)for(var D=this._ptr[_],C=this._ptr[_+1],A=D;A<C;A++){var S=this._index[A];yield{value:this._values[A],index:[S,_]}}},i.prototype.toArray=function(){return b(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return b(this._values,this._index,this._ptr,this._size,!1)};function b(m,_,D,C,A){var S=C[0],E=C[1],B=[],P,T;for(P=0;P<S;P++)for(B[P]=[],T=0;T<E;T++)B[P][T]=0;for(T=0;T<E;T++)for(var N=D[T],G=D[T+1],re=N;re<G;re++)P=_[re],B[P][T]=m?A?wr(m[re]):m[re]:1;return B}return i.prototype.format=function(m){for(var _=this._size[0],D=this._size[1],C=this.density(),A="Sparse Matrix ["+en(_,m)+" x "+en(D,m)+"] density: "+en(C,m)+`
`,S=0;S<D;S++)for(var E=this._ptr[S],B=this._ptr[S+1],P=E;P<B;P++){var T=this._index[P];A+=`
    (`+en(T,m)+", "+en(S,m)+") ==> "+(this._values?en(this._values[P],m):"X")}return A},i.prototype.toString=function(){return en(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(m){if(m){if(Fn(m)&&(m=m.toNumber()),!tr(m)||!Ar(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var _=m>0?m:0,D=m<0?-m:0,C=this._size[0],A=this._size[1],S=Math.min(C-D,A-_),E=[],B=[],P=[];P[0]=0;for(var T=_;T<A&&E.length<S;T++)for(var N=this._ptr[T],G=this._ptr[T+1],re=N;re<G;re++){var z=this._index[re];if(z===T-_+D){E.push(this._values[re]),B[E.length-1]=z-D;break}}return P.push(E.length),new i({values:E,index:B,ptr:P,size:[S,1]})},i.fromJSON=function(m){return new i(m)},i.diagonal=function(m,_,D,C,A){if(!Qt(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(X){if(Fn(X)&&(X=X.toNumber()),!tr(X)||!Ar(X)||X<1)throw new Error("Size values must be positive integers");return X}),D){if(Fn(D)&&(D=D.toNumber()),!tr(D)||!Ar(D))throw new TypeError("The parameter k must be an integer number")}else D=0;var S=r,E=0;Hn(A)&&(S=e.find(r,[A,A])||r,E=e.convert(0,A));var B=D>0?D:0,P=D<0?-D:0,T=m[0],N=m[1],G=Math.min(T-P,N-B),re;if(Qt(_)){if(_.length!==G)throw new Error("Invalid value array length");re=function(le){return _[le]}}else if($r(_)){var z=_.size();if(z.length!==1||z[0]!==G)throw new Error("Invalid matrix length");re=function(le){return _.get([le])}}else re=function(){return _};for(var Y=[],V=[],U=[],q=0;q<N;q++){U.push(Y.length);var J=q-B;if(J>=0&&J<G){var Z=re(J);S(Z,E)||(V.push(J+P),Y.push(Z))}}return U.push(Y.length),new i({values:Y,index:V,ptr:U,size:[T,N]})},i.prototype.swapRows=function(m,_){if(!tr(m)||!Ar(m)||!tr(_)||!Ar(_))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return er(m,this._size[0]),er(_,this._size[0]),i._swapRows(m,_,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(m,_,D,C,A){for(var S=C[m],E=C[m+1],B=S;B<E;B++)A(D[B],_[B])},i._swapRows=function(m,_,D,C,A,S){for(var E=0;E<D;E++){var B=S[E],P=S[E+1],T=p(m,B,P,A),N=p(_,B,P,A);if(T<P&&N<P&&A[T]===m&&A[N]===_){if(C){var G=C[T];C[T]=C[N],C[N]=G}continue}if(T<P&&A[T]===m&&(N>=P||A[N]!==_)){var re=C?C[T]:void 0;A.splice(N,0,_),C&&C.splice(N,0,re),A.splice(N<=T?T+1:T,1),C&&C.splice(N<=T?T+1:T,1);continue}if(N<P&&A[N]===_&&(T>=P||A[T]!==m)){var z=C?C[N]:void 0;A.splice(T,0,m),C&&C.splice(T,0,z),A.splice(T<=N?N+1:N,1),C&&C.splice(T<=N?N+1:N,1)}}},i},{isClass:!0}),D0="matrix",EA=["typed","Matrix","DenseMatrix","SparseMatrix"],CA=Ut(D0,EA,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(D0,{"":function(){return u([])},string:function(s){return u([],s)},"string, string":function(s,c){return u([],s,c)},Array:function(s){return u(s)},Matrix:function(s){return u(s,s.storage())},"Array | Matrix, string":u,"Array | Matrix, string, string":u});function u(o,s,c){if(s==="dense"||s==="default"||s===void 0)return new n(o,c);if(s==="sparse")return new i(o,c);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),b0="addScalar",FA=["typed"],SA=Ut(b0,FA,t=>{var{typed:e}=t;return e(b0,{"number, number":qp,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var u=n.clone();return u.value=e.find(r,[u.valueType(),i.valueType()])(u.value,i.value),u.fixPrefix=!1,u})})}),BA="matAlgo11xS0s",OA=["typed","equalScalar"],MA=Ut(BA,OA,t=>{var{typed:e,equalScalar:r}=t;return function(i,u,o,s){var c=i._values,p=i._index,f=i._ptr,h=i._size,d=i._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=h[0],b=h[1],m,_=r,D=0,C=o;typeof d=="string"&&(m=d,_=e.find(r,[m,m]),D=e.convert(0,m),u=e.convert(u,m),C=e.find(o,[m,m]));for(var A=[],S=[],E=[],B=0;B<b;B++){E[B]=S.length;for(var P=f[B],T=f[B+1],N=P;N<T;N++){var G=p[N],re=s?C(u,c[N]):C(c[N],u);_(re,D)||(S.push(G),A.push(re))}}return E[b]=S.length,i.createSparseMatrix({values:A,index:S,ptr:E,size:[g,b],datatype:m})}}),PA="matAlgo14xDs",TA=["typed"],Wp=Ut(PA,TA,t=>{var{typed:e}=t;return function(i,u,o,s){var c=i._data,p=i._size,f=i._datatype,h,d=o;typeof f=="string"&&(h=f,u=e.convert(u,h),d=e.find(o,[h,h]));var g=p.length>0?r(d,0,p,p[0],c,u,s):[];return i.createDenseMatrix({data:g,size:wr(p),datatype:h})};function r(n,i,u,o,s,c,p){var f=[];if(i===u.length-1)for(var h=0;h<o;h++)f[h]=p?n(c,s[h]):n(s[h],c);else for(var d=0;d<o;d++)f[d]=r(n,i+1,u,u[i+1],s[d],c,p);return f}}),kA="matAlgo01xDSid",IA=["typed"],xA=Ut(kA,IA,t=>{var{typed:e}=t;return function(n,i,u,o){var s=n._data,c=n._size,p=n._datatype,f=i._values,h=i._index,d=i._ptr,g=i._size,b=i._datatype;if(c.length!==g.length)throw new Rt(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=c[0],_=c[1],D=typeof p=="string"&&p===b?p:void 0,C=D?e.find(u,[D,D]):u,A,S,E=[];for(A=0;A<m;A++)E[A]=[];var B=[],P=[];for(S=0;S<_;S++){for(var T=S+1,N=d[S],G=d[S+1],re=N;re<G;re++)A=h[re],B[A]=o?C(f[re],s[A][S]):C(s[A][S],f[re]),P[A]=T;for(A=0;A<m;A++)P[A]===T?E[A][S]=B[A]:E[A][S]=s[A][S]}return n.createDenseMatrix({data:E,size:[m,_],datatype:D})}}),NA="matAlgo04xSidSid",RA=["typed","equalScalar"],LA=Ut(NA,RA,t=>{var{typed:e,equalScalar:r}=t;return function(i,u,o){var s=i._values,c=i._index,p=i._ptr,f=i._size,h=i._datatype,d=u._values,g=u._index,b=u._ptr,m=u._size,_=u._datatype;if(f.length!==m.length)throw new Rt(f.length,m.length);if(f[0]!==m[0]||f[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+m+")");var D=f[0],C=f[1],A,S=r,E=0,B=o;typeof h=="string"&&h===_&&(A=h,S=e.find(r,[A,A]),E=e.convert(0,A),B=e.find(o,[A,A]));var P=s&&d?[]:void 0,T=[],N=[],G=s&&d?[]:void 0,re=s&&d?[]:void 0,z=[],Y=[],V,U,q,J,Z;for(U=0;U<C;U++){N[U]=T.length;var X=U+1;for(J=p[U],Z=p[U+1],q=J;q<Z;q++)V=c[q],T.push(V),z[V]=X,G&&(G[V]=s[q]);for(J=b[U],Z=b[U+1],q=J;q<Z;q++)if(V=g[q],z[V]===X){if(G){var le=B(G[V],d[q]);S(le,E)?z[V]=null:G[V]=le}}else T.push(V),Y[V]=X,re&&(re[V]=d[q]);if(G&&re)for(q=N[U];q<T.length;)V=T[q],z[V]===X?(P[q]=G[V],q++):Y[V]===X?(P[q]=re[V],q++):T.splice(q,1)}return N[C]=T.length,i.createSparseMatrix({values:P,index:T,ptr:N,size:[D,C],datatype:A})}}),UA="matAlgo10xSids",VA=["typed","DenseMatrix"],jA=Ut(UA,VA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,u,o,s){var c=i._values,p=i._index,f=i._ptr,h=i._size,d=i._datatype;if(!c)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=h[0],b=h[1],m,_=o;typeof d=="string"&&(m=d,u=e.convert(u,m),_=e.find(o,[m,m]));for(var D=[],C=[],A=[],S=0;S<b;S++){for(var E=S+1,B=f[S],P=f[S+1],T=B;T<P;T++){var N=p[T];C[N]=c[T],A[N]=E}for(var G=0;G<g;G++)S===0&&(D[G]=[]),A[G]===E?D[G][S]=s?_(u,C[G]):_(C[G],u):D[G][S]=u}return new r({data:D,size:[g,b],datatype:m})}}),qA="matAlgo13xDD",zA=["typed"],WA=Ut(qA,zA,t=>{var{typed:e}=t;return function(i,u,o){var s=i._data,c=i._size,p=i._datatype,f=u._data,h=u._size,d=u._datatype,g=[];if(c.length!==h.length)throw new Rt(c.length,h.length);for(var b=0;b<c.length;b++){if(c[b]!==h[b])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+h+")");g[b]=c[b]}var m,_=o;typeof p=="string"&&p===d&&(m=p,_=e.find(o,[m,m]));var D=g.length>0?r(_,0,g,g[0],s,f):[];return i.createDenseMatrix({data:D,size:g,datatype:m})};function r(n,i,u,o,s,c){var p=[];if(i===u.length-1)for(var f=0;f<o;f++)p[f]=n(s[f],c[f]);else for(var h=0;h<o;h++)p[h]=r(n,i+1,u,u[i+1],s[h],c[h]);return p}}),HA="broadcast",GA=["concat"],$A=Ut(HA,GA,t=>{var{concat:e}=t;return function(u,o){var s=Math.max(u._size.length,o._size.length);if(u._size.length===o._size.length&&u._size.every((_,D)=>_===o._size[D]))return[u,o];for(var c=r(u._size,s,0),p=r(o._size,s,0),f=[],h=0;h<s;h++)f[h]=Math.max(c[h],p[h]);for(var d=0;d<s;d++)i(c,f,d),i(p,f,d);var g=u.clone(),b=o.clone();g._size.length<s?g.reshape(r(g._size,s,1)):b._size.length<s&&b.reshape(r(b._size,s,1));for(var m=0;m<s;m++)g._size[m]<f[m]&&(g=n(g,f[m],m)),b._size[m]<f[m]&&(b=n(b,f[m],m));return[g,b]};function r(u,o,s){return[...Array(o-u.length).fill(s),...u]}function n(u,o,s){return e(...Array(o).fill(u),s)}function i(u,o,s){if(u[s]<o[s]&u[s]>1)throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(u,") not possible to broadcast dimension ").concat(s," with size ").concat(u[s]," to size ").concat(o[s]))}}),KA="matrixAlgorithmSuite",YA=["typed","matrix","concat"],ZA=Ut(KA,YA,t=>{var{typed:e,matrix:r,concat:n}=t,i=WA({typed:e}),u=Wp({typed:e}),o=$A({concat:n});return function(c){var p=c.elop,f=c.SD||c.DS,h;p?(h={"DenseMatrix, DenseMatrix":(m,_)=>i(...o(m,_),p),"Array, Array":(m,_)=>i(...o(r(m),r(_)),p).valueOf(),"Array, DenseMatrix":(m,_)=>i(...o(r(m),_),p),"DenseMatrix, Array":(m,_)=>i(...o(m,r(_)),p)},c.SS&&(h["SparseMatrix, SparseMatrix"]=(m,_)=>c.SS(...o(m,_),p,!1)),c.DS&&(h["DenseMatrix, SparseMatrix"]=(m,_)=>c.DS(...o(m,_),p,!1),h["Array, SparseMatrix"]=(m,_)=>c.DS(...o(r(m),_),p,!1)),f&&(h["SparseMatrix, DenseMatrix"]=(m,_)=>f(...o(_,m),p,!0),h["SparseMatrix, Array"]=(m,_)=>f(...o(r(_),m),p,!0))):(h={"DenseMatrix, DenseMatrix":e.referToSelf(m=>(_,D)=>i(...o(_,D),m)),"Array, Array":e.referToSelf(m=>(_,D)=>i(...o(r(_),r(D)),m).valueOf()),"Array, DenseMatrix":e.referToSelf(m=>(_,D)=>i(...o(r(_),D),m)),"DenseMatrix, Array":e.referToSelf(m=>(_,D)=>i(...o(_,r(D)),m))},c.SS&&(h["SparseMatrix, SparseMatrix"]=e.referToSelf(m=>(_,D)=>c.SS(...o(_,D),m,!1))),c.DS&&(h["DenseMatrix, SparseMatrix"]=e.referToSelf(m=>(_,D)=>c.DS(...o(_,D),m,!1)),h["Array, SparseMatrix"]=e.referToSelf(m=>(_,D)=>c.DS(...o(r(_),D),m,!1))),f&&(h["SparseMatrix, DenseMatrix"]=e.referToSelf(m=>(_,D)=>f(...o(D,_),m,!0)),h["SparseMatrix, Array"]=e.referToSelf(m=>(_,D)=>f(...o(r(D),_),m,!0))));var d=c.scalar||"any",g=c.Ds||c.Ss;g&&(p?(h["DenseMatrix,"+d]=(m,_)=>u(m,_,p,!1),h[d+", DenseMatrix"]=(m,_)=>u(_,m,p,!0),h["Array,"+d]=(m,_)=>u(r(m),_,p,!1).valueOf(),h[d+", Array"]=(m,_)=>u(r(_),m,p,!0).valueOf()):(h["DenseMatrix,"+d]=e.referToSelf(m=>(_,D)=>u(_,D,m,!1)),h[d+", DenseMatrix"]=e.referToSelf(m=>(_,D)=>u(D,_,m,!0)),h["Array,"+d]=e.referToSelf(m=>(_,D)=>u(r(_),D,m,!1).valueOf()),h[d+", Array"]=e.referToSelf(m=>(_,D)=>u(r(D),_,m,!0).valueOf())));var b=c.sS!==void 0?c.sS:c.Ss;return p?(c.Ss&&(h["SparseMatrix,"+d]=(m,_)=>c.Ss(m,_,p,!1)),b&&(h[d+", SparseMatrix"]=(m,_)=>b(_,m,p,!0))):(c.Ss&&(h["SparseMatrix,"+d]=e.referToSelf(m=>(_,D)=>c.Ss(_,D,m,!1))),b&&(h[d+", SparseMatrix"]=e.referToSelf(m=>(_,D)=>b(D,_,m,!0)))),p&&p.signatures&&Fw(h,p.signatures),h}}),XA="multiplyScalar",JA=["typed"],QA=Ut(XA,JA,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":zp,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),y0="multiply",eE=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],tE=Ut(y0,eE,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:u,dot:o}=t,s=MA({typed:e,equalScalar:u}),c=Wp({typed:e});function p(E,B){switch(E.length){case 1:switch(B.length){case 1:if(E[0]!==B[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(E[0]!==B[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+E[0]+") must match Matrix rows ("+B[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+B.length+" dimensions)")}break;case 2:switch(B.length){case 1:if(E[1]!==B[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+E[1]+") must match Vector length ("+B[0]+")");break;case 2:if(E[1]!==B[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+E[1]+") must match Matrix B rows ("+B[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+B.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+E.length+" dimensions)")}}function f(E,B,P){if(P===0)throw new Error("Cannot multiply two empty vectors");return o(E,B)}function h(E,B){if(B.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(E,B)}function d(E,B){var P=E._data,T=E._size,N=E._datatype,G=B._data,re=B._size,z=B._datatype,Y=T[0],V=re[1],U,q=n,J=i;N&&z&&N===z&&typeof N=="string"&&(U=N,q=e.find(n,[U,U]),J=e.find(i,[U,U]));for(var Z=[],X=0;X<V;X++){for(var le=J(P[0],G[0][X]),ge=1;ge<Y;ge++)le=q(le,J(P[ge],G[ge][X]));Z[X]=le}return E.createDenseMatrix({data:Z,size:[V],datatype:U})}var g=e("_multiplyMatrixVector",{"DenseMatrix, any":m,"SparseMatrix, any":C}),b=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":_,"DenseMatrix, SparseMatrix":D,"SparseMatrix, DenseMatrix":A,"SparseMatrix, SparseMatrix":S});function m(E,B){var P=E._data,T=E._size,N=E._datatype,G=B._data,re=B._datatype,z=T[0],Y=T[1],V,U=n,q=i;N&&re&&N===re&&typeof N=="string"&&(V=N,U=e.find(n,[V,V]),q=e.find(i,[V,V]));for(var J=[],Z=0;Z<z;Z++){for(var X=P[Z],le=q(X[0],G[0]),ge=1;ge<Y;ge++)le=U(le,q(X[ge],G[ge]));J[Z]=le}return E.createDenseMatrix({data:J,size:[z],datatype:V})}function _(E,B){var P=E._data,T=E._size,N=E._datatype,G=B._data,re=B._size,z=B._datatype,Y=T[0],V=T[1],U=re[1],q,J=n,Z=i;N&&z&&N===z&&typeof N=="string"&&(q=N,J=e.find(n,[q,q]),Z=e.find(i,[q,q]));for(var X=[],le=0;le<Y;le++){var ge=P[le];X[le]=[];for(var Ee=0;Ee<U;Ee++){for(var ye=Z(ge[0],G[0][Ee]),Oe=1;Oe<V;Oe++)ye=J(ye,Z(ge[Oe],G[Oe][Ee]));X[le][Ee]=ye}}return E.createDenseMatrix({data:X,size:[Y,U],datatype:q})}function D(E,B){var P=E._data,T=E._size,N=E._datatype,G=B._values,re=B._index,z=B._ptr,Y=B._size,V=B._datatype;if(!G)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var U=T[0],q=Y[1],J,Z=n,X=i,le=u,ge=0;N&&V&&N===V&&typeof N=="string"&&(J=N,Z=e.find(n,[J,J]),X=e.find(i,[J,J]),le=e.find(u,[J,J]),ge=e.convert(0,J));for(var Ee=[],ye=[],Oe=[],qe=B.createSparseMatrix({values:Ee,index:ye,ptr:Oe,size:[U,q],datatype:J}),Ie=0;Ie<q;Ie++){Oe[Ie]=ye.length;var tt=z[Ie],He=z[Ie+1];if(He>tt)for(var Ue=0,ze=0;ze<U;ze++){for(var mt=ze+1,ut=void 0,lt=tt;lt<He;lt++){var at=re[lt];Ue!==mt?(ut=X(P[ze][at],G[lt]),Ue=mt):ut=Z(ut,X(P[ze][at],G[lt]))}Ue===mt&&!le(ut,ge)&&(ye.push(ze),Ee.push(ut))}}return Oe[q]=ye.length,qe}function C(E,B){var P=E._values,T=E._index,N=E._ptr,G=E._datatype;if(!P)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var re=B._data,z=B._datatype,Y=E._size[0],V=B._size[0],U=[],q=[],J=[],Z,X=n,le=i,ge=u,Ee=0;G&&z&&G===z&&typeof G=="string"&&(Z=G,X=e.find(n,[Z,Z]),le=e.find(i,[Z,Z]),ge=e.find(u,[Z,Z]),Ee=e.convert(0,Z));var ye=[],Oe=[];J[0]=0;for(var qe=0;qe<V;qe++){var Ie=re[qe];if(!ge(Ie,Ee))for(var tt=N[qe],He=N[qe+1],Ue=tt;Ue<He;Ue++){var ze=T[Ue];Oe[ze]?ye[ze]=X(ye[ze],le(Ie,P[Ue])):(Oe[ze]=!0,q.push(ze),ye[ze]=le(Ie,P[Ue]))}}for(var mt=q.length,ut=0;ut<mt;ut++){var lt=q[ut];U[ut]=ye[lt]}return J[1]=q.length,E.createSparseMatrix({values:U,index:q,ptr:J,size:[Y,1],datatype:Z})}function A(E,B){var P=E._values,T=E._index,N=E._ptr,G=E._datatype;if(!P)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var re=B._data,z=B._datatype,Y=E._size[0],V=B._size[0],U=B._size[1],q,J=n,Z=i,X=u,le=0;G&&z&&G===z&&typeof G=="string"&&(q=G,J=e.find(n,[q,q]),Z=e.find(i,[q,q]),X=e.find(u,[q,q]),le=e.convert(0,q));for(var ge=[],Ee=[],ye=[],Oe=E.createSparseMatrix({values:ge,index:Ee,ptr:ye,size:[Y,U],datatype:q}),qe=[],Ie=[],tt=0;tt<U;tt++){ye[tt]=Ee.length;for(var He=tt+1,Ue=0;Ue<V;Ue++){var ze=re[Ue][tt];if(!X(ze,le))for(var mt=N[Ue],ut=N[Ue+1],lt=mt;lt<ut;lt++){var at=T[lt];Ie[at]!==He?(Ie[at]=He,Ee.push(at),qe[at]=Z(ze,P[lt])):qe[at]=J(qe[at],Z(ze,P[lt]))}}for(var st=ye[tt],Xe=Ee.length,Je=st;Je<Xe;Je++){var Ce=Ee[Je];ge[Je]=qe[Ce]}}return ye[U]=Ee.length,Oe}function S(E,B){var P=E._values,T=E._index,N=E._ptr,G=E._datatype,re=B._values,z=B._index,Y=B._ptr,V=B._datatype,U=E._size[0],q=B._size[1],J=P&&re,Z,X=n,le=i;G&&V&&G===V&&typeof G=="string"&&(Z=G,X=e.find(n,[Z,Z]),le=e.find(i,[Z,Z]));for(var ge=J?[]:void 0,Ee=[],ye=[],Oe=E.createSparseMatrix({values:ge,index:Ee,ptr:ye,size:[U,q],datatype:Z}),qe=J?[]:void 0,Ie=[],tt,He,Ue,ze,mt,ut,lt,at,st=0;st<q;st++){ye[st]=Ee.length;var Xe=st+1;for(mt=Y[st],ut=Y[st+1],ze=mt;ze<ut;ze++)if(at=z[ze],J)for(He=N[at],Ue=N[at+1],tt=He;tt<Ue;tt++)lt=T[tt],Ie[lt]!==Xe?(Ie[lt]=Xe,Ee.push(lt),qe[lt]=le(re[ze],P[tt])):qe[lt]=X(qe[lt],le(re[ze],P[tt]));else for(He=N[at],Ue=N[at+1],tt=He;tt<Ue;tt++)lt=T[tt],Ie[lt]!==Xe&&(Ie[lt]=Xe,Ee.push(lt));if(J)for(var Je=ye[st],Ce=Ee.length,Te=Je;Te<Ce;Te++){var Ot=Ee[Te];ge[Te]=qe[Ot]}}return ye[q]=Ee.length,Oe}return e(y0,i,{"Array, Array":e.referTo("Matrix, Matrix",E=>(B,P)=>{p(Mi(B),Mi(P));var T=E(r(B),r(P));return $r(T)?T.valueOf():T}),"Matrix, Matrix":function(B,P){var T=B.size(),N=P.size();return p(T,N),T.length===1?N.length===1?f(B,P,T[0]):h(B,P):N.length===1?g(B,P):b(B,P)},"Matrix, Array":e.referTo("Matrix,Matrix",E=>(B,P)=>E(B,r(P))),"Array, Matrix":e.referToSelf(E=>(B,P)=>E(r(B,P.storage()),P)),"SparseMatrix, any":function(B,P){return s(B,P,i,!1)},"DenseMatrix, any":function(B,P){return c(B,P,i,!1)},"any, SparseMatrix":function(B,P){return s(P,B,i,!0)},"any, DenseMatrix":function(B,P){return c(P,B,i,!0)},"Array, any":function(B,P){return c(r(B),P,i,!1).valueOf()},"any, Array":function(B,P){return c(r(P),B,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(E=>(B,P,T)=>{for(var N=E(B,P),G=0;G<T.length;G++)N=E(N,T[G]);return N})})}),w0="conj",rE=["typed"],nE=Ut(w0,rE,t=>{var{typed:e}=t;return e(w0,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":e.referToSelf(r=>n=>Ff(n,r))})}),A0="concat",iE=["typed","matrix","isInteger"],uE=Ut(A0,iE,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(A0,{"...Array | Matrix | number | BigNumber":function(u){var o,s=u.length,c=-1,p,f=!1,h=[];for(o=0;o<s;o++){var d=u[o];if($r(d)&&(f=!0),tr(d)||Fn(d)){if(o!==s-1)throw new Error("Dimension must be specified as last argument");if(p=c,c=d.valueOf(),!n(c))throw new TypeError("Integer number expected for dimension");if(c<0||o>0&&c>p)throw new Yi(c,p+1)}else{var g=wr(d).valueOf(),b=Mi(g);if(h[o]=g,p=c,c=b.length-1,o>0&&c!==p)throw new Rt(p+1,c+1)}}if(h.length===0)throw new SyntaxError("At least one matrix expected");for(var m=h.shift();h.length;)m=Hp(m,h.shift(),c,0);return f?r(m):m},"...string":function(u){return u.join("")}})});function Hp(t,e,r,n){if(n<r){if(t.length!==e.length)throw new Rt(t.length,e.length);for(var i=[],u=0;u<t.length;u++)i[u]=Hp(t[u],e[u],r,n+1);return i}else return t.concat(e)}function aE(){throw new Error('No "matrix" implementation available')}var E0="size",sE=["typed","config","?matrix"],oE=Ut(E0,sE,t=>{var{typed:e,config:r,matrix:n}=t;return e(E0,{Matrix:function(u){return u.create(u.size())},Array:Mi,string:function(u){return r.matrix==="Array"?[u.length]:n([u.length])},"number | Complex | BigNumber | Unit | boolean | null":function(u){return r.matrix==="Array"?[]:n?n([]):aE()}})}),C0="add",lE=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],fE=Ut(C0,lE,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:u,SparseMatrix:o,concat:s}=t,c=xA({typed:e}),p=LA({typed:e,equalScalar:i}),f=jA({typed:e,DenseMatrix:u}),h=ZA({typed:e,matrix:r,concat:s});return e(C0,{"any, any":n,"any, any, ...any":e.referToSelf(d=>(g,b,m)=>{for(var _=d(g,b),D=0;D<m.length;D++)_=d(_,m[D]);return _})},h({elop:n,DS:c,SS:p,Ss:f}))}),F0="dot",cE=["typed","addScalar","multiplyScalar","conj","size"],hE=Ut(F0,cE,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:u}=t;return e(F0,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":c});function o(f,h){var d=p(f),g=p(h),b,m;if(d.length===1)b=d[0];else if(d.length===2&&d[1]===1)b=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(g.length===1)m=g[0];else if(g.length===2&&g[1]===1)m=g[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+g.join(", ")+")");if(b!==m)throw new RangeError("Vectors must have equal length ("+b+" != "+m+")");if(b===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return b}function s(f,h){var d=o(f,h),g=$r(f)?f._data:f,b=$r(f)?f._datatype:void 0,m=$r(h)?h._data:h,_=$r(h)?h._datatype:void 0,D=p(f).length===2,C=p(h).length===2,A=r,S=n;if(b&&_&&b===_&&typeof b=="string"){var E=b;A=e.find(r,[E,E]),S=e.find(n,[E,E])}if(!D&&!C){for(var B=S(i(g[0]),m[0]),P=1;P<d;P++)B=A(B,S(i(g[P]),m[P]));return B}if(!D&&C){for(var T=S(i(g[0]),m[0][0]),N=1;N<d;N++)T=A(T,S(i(g[N]),m[N][0]));return T}if(D&&!C){for(var G=S(i(g[0][0]),m[0]),re=1;re<d;re++)G=A(G,S(i(g[re][0]),m[re]));return G}if(D&&C){for(var z=S(i(g[0][0]),m[0][0]),Y=1;Y<d;Y++)z=A(z,S(i(g[Y][0]),m[Y][0]));return z}}function c(f,h){o(f,h);for(var d=f._index,g=f._values,b=h._index,m=h._values,_=0,D=r,C=n,A=0,S=0;A<d.length&&S<b.length;){var E=d[A],B=b[S];if(E<B){A++;continue}if(E>B){S++;continue}E===B&&(_=D(_,C(g[A],m[S])),A++,S++)}return _}function p(f){return $r(f)?f.size():u(f)}}),dE=Q2({config:Vs}),pE=nA({}),gE=sA({}),Sf=fA({}),Bf=dA({Matrix:Sf}),Sn=r2({BigNumber:dE,Complex:pE,DenseMatrix:Bf,Fraction:gE}),Of=SA({typed:Sn}),vE=nE({typed:Sn}),Mf=bA({config:Vs,typed:Sn}),mE=gA({typed:Sn}),Gp=QA({typed:Sn}),$p=AA({Matrix:Sf,equalScalar:Mf,typed:Sn}),Gs=CA({DenseMatrix:Bf,Matrix:Sf,SparseMatrix:$p,typed:Sn}),_E=oE({matrix:Gs,config:Vs,typed:Sn}),DE=uE({isInteger:mE,matrix:Gs,typed:Sn}),Gr=fE({DenseMatrix:Bf,SparseMatrix:$p,addScalar:Of,concat:DE,equalScalar:Mf,matrix:Gs,typed:Sn}),bE=hE({addScalar:Of,conj:vE,multiplyScalar:Gp,size:_E,typed:Sn}),Cn=tE({addScalar:Of,dot:bE,equalScalar:Mf,matrix:Gs,multiplyScalar:Gp,typed:Sn});function yE(t){let e,r,n;return{c(){e=dt("circle"),this.h()},l(i){e=pt(i,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),$(e).forEach(I),this.h()},h(){O(e,"cx",r=t[0][0]),O(e,"cy",n=t[0][1]),O(e,"r",t[1]),O(e,"stroke",t[3]),O(e,"stroke-width",t[2]),Yt(e,"fill","rgba(0,0,0,0)")},m(i,u){_e(i,e,u)},p(i,[u]){u&1&&r!==(r=i[0][0])&&O(e,"cx",r),u&1&&n!==(n=i[0][1])&&O(e,"cy",n),u&2&&O(e,"r",i[1]),u&8&&O(e,"stroke",i[3]),u&4&&O(e,"stroke-width",i[2])},i:Me,o:Me,d(i){i&&I(e)}}}function wE(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:u=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,u=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,u,o]}class Pf extends yt{constructor(e){super(),wt(this,e,wE,yE,At,{xy:0,radius:1,stroke:2,color:3})}}function AE(t){let e,r,n,i,u;return{c(){e=dt("circle"),this.h()},l(o){e=pt(o,"circle",{cx:!0,cy:!0,r:!0}),$(e).forEach(I),this.h()},h(){O(e,"cx",r=t[0][0]),O(e,"cy",n=t[0][1]),O(e,"r",t[1]),Yt(e,"fill",t[2])},m(o,s){_e(o,e,s),i||(u=[Fe(e,"mouseover",t[3]),Fe(e,"mouseout",t[4]),Fe(e,"mousedown",t[5])],i=!0)},p(o,[s]){s&1&&r!==(r=o[0][0])&&O(e,"cx",r),s&1&&n!==(n=o[0][1])&&O(e,"cy",n),s&2&&O(e,"r",o[1]),s&4&&Yt(e,"fill",o[2])},i:Me,o:Me,d(o){o&&I(e),i=!1,ar(u)}}}function EE(t,e,r){let{xy:n=[100,100]}=e,{radius:i=5}=e,{color:u="black"}=e,{hoverColor:o="white"}=e,{handleMouseDown:s=d=>{}}=e,c=u;function p(){r(2,c=o)}function f(){r(2,c=u)}function h(d){s(d)}return t.$$set=d=>{"xy"in d&&r(0,n=d.xy),"radius"in d&&r(1,i=d.radius),"color"in d&&r(6,u=d.color),"hoverColor"in d&&r(7,o=d.hoverColor),"handleMouseDown"in d&&r(8,s=d.handleMouseDown)},[n,i,c,p,f,h,u,o,s]}class Au extends yt{constructor(e){super(),wt(this,e,EE,AE,At,{xy:0,radius:1,color:6,hoverColor:7,handleMouseDown:8})}}function CE(t){let e,r,n,i,u;return{c(){e=dt("line"),this.h()},l(o){e=pt(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-dasharray":!0,"stroke-width":!0}),$(e).forEach(I),this.h()},h(){O(e,"x1",r=t[0][0]),O(e,"y1",n=t[0][1]),O(e,"x2",i=t[1][0]),O(e,"y2",u=t[1][1]),O(e,"stroke",t[3]),O(e,"stroke-dasharray","10,10"),O(e,"stroke-width",t[2])},m(o,s){_e(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&O(e,"x1",r),s&1&&n!==(n=o[0][1])&&O(e,"y1",n),s&2&&i!==(i=o[1][0])&&O(e,"x2",i),s&2&&u!==(u=o[1][1])&&O(e,"y2",u),s&8&&O(e,"stroke",o[3]),s&4&&O(e,"stroke-width",o[2])},i:Me,o:Me,d(o){o&&I(e)}}}function FE(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:u=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,u=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,u,o]}class Kp extends yt{constructor(e){super(),wt(this,e,FE,CE,At,{p1:0,p2:1,stroke:2,color:3})}}function SE(t){let e,r,n,i,u,o,s,c;return{c(){e=dt("foreignObject"),r=Q("div"),n=Q("p"),i=Ve(t[2]),this.h()},l(p){e=pt(p,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var f=$(e);r=ee(f,"DIV",{class:!0});var h=$(r);n=ee(h,"P",{});var d=$(n);i=je(d,t[2]),d.forEach(I),h.forEach(I),f.forEach(I),this.h()},h(){Yt(n,"color",t[3]),Yt(n,"user-select","none"),Yt(n,"margin","0"),Yt(n,"pointer-events","none"),Yt(n,"text-align",t[4]),Yt(n,"font-size",`${t[5]}px`),Yt(n,"font-family","sans-serif"),Yt(n,"font-style","italic"),O(r,"class","h-full flex flex-col justify-center"),O(e,"x",u=t[0][0]),O(e,"y",o=t[0][1]),O(e,"width",s=t[1][0]),O(e,"height",c=t[1][1])},m(p,f){_e(p,e,f),R(e,r),R(r,n),R(n,i)},p(p,[f]){f&4&&rn(i,p[2]),f&8&&Yt(n,"color",p[3]),f&16&&Yt(n,"text-align",p[4]),f&32&&Yt(n,"font-size",`${p[5]}px`),f&1&&u!==(u=p[0][0])&&O(e,"x",u),f&1&&o!==(o=p[0][1])&&O(e,"y",o),f&2&&s!==(s=p[1][0])&&O(e,"width",s),f&2&&c!==(c=p[1][1])&&O(e,"height",c)},i:Me,o:Me,d(p){p&&I(e)}}}function BE(t,e,r){let{xy:n=[100,100]}=e,{wh:i=[100,100]}=e,{text:u=""}=e,{color:o="rgba(96,117,151, 1)"}=e,{textAlign:s="center"}=e,{fontSize:c=12}=e;return t.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,i=p.wh),"text"in p&&r(2,u=p.text),"color"in p&&r(3,o=p.color),"textAlign"in p&&r(4,s=p.textAlign),"fontSize"in p&&r(5,c=p.fontSize)},[n,i,u,o,s,c]}class la extends yt{constructor(e){super(),wt(this,e,BE,SE,At,{xy:0,wh:1,text:2,color:3,textAlign:4,fontSize:5})}}function OE(t){let e,r,n,i,u,o,s,c,p,f,h;return{c(){e=dt("circle"),i=xe(),u=dt("foreignObject"),o=Q("p"),s=Ve(t[4]),this.h()},l(d){e=pt(d,"circle",{cx:!0,cy:!0,r:!0}),$(e).forEach(I),i=Ne(d),u=pt(d,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var g=$(u);o=ee(g,"P",{style:!0,class:!0});var b=$(o);s=je(b,t[4]),b.forEach(I),g.forEach(I),this.h()},h(){O(e,"cx",r=t[0][0]),O(e,"cy",n=t[0][1]),O(e,"r",t[1]),Yt(e,"fill",t[3]),Yt(o,"color",t[2]),Yt(o,"user-select","none"),Yt(o,"margin","0"),O(o,"class","heavy svelte-6if1p2"),O(u,"x",c=t[0][0]-t[1]),O(u,"y",p=t[0][1]-t[1]),O(u,"width",f=t[1]*2),O(u,"height",h=t[1]*2)},m(d,g){_e(d,e,g),_e(d,i,g),_e(d,u,g),R(u,o),R(o,s)},p(d,[g]){g&1&&r!==(r=d[0][0])&&O(e,"cx",r),g&1&&n!==(n=d[0][1])&&O(e,"cy",n),g&2&&O(e,"r",d[1]),g&8&&Yt(e,"fill",d[3]),g&16&&rn(s,d[4]),g&4&&Yt(o,"color",d[2]),g&3&&c!==(c=d[0][0]-d[1])&&O(u,"x",c),g&3&&p!==(p=d[0][1]-d[1])&&O(u,"y",p),g&2&&f!==(f=d[1]*2)&&O(u,"width",f),g&2&&h!==(h=d[1]*2)&&O(u,"height",h)},i:Me,o:Me,d(d){d&&I(e),d&&I(i),d&&I(u)}}}function ME(t,e,r){let{xy:n=[100,100]}=e,{radius:i=25}=e,{textColor:u="rgba(96,117,151, 1)"}=e,{bgColor:o="black"}=e,{weight:s=""}=e;return t.$$set=c=>{"xy"in c&&r(0,n=c.xy),"radius"in c&&r(1,i=c.radius),"textColor"in c&&r(2,u=c.textColor),"bgColor"in c&&r(3,o=c.bgColor),"weight"in c&&r(4,s=c.weight)},[n,i,u,o,s]}class PE extends yt{constructor(e){super(),wt(this,e,ME,OE,At,{xy:0,radius:1,textColor:2,bgColor:3,weight:4})}}function Nn(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],u=360+Math.atan2(i,n)*180/Math.PI,o=Math.sqrt(n*n+i*i);return[u%360,o/r]}function kr(t,e,r){const n=e[0]%360*Math.PI/180,i=[r*e[1]*Math.cos(n),r*e[1]*Math.sin(n)];return Gr(t,i)}function aa(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],u=Math.sqrt(n*n+i*i),o=r/u,s=e[0]+n*o,c=e[1]+i*o;return[s,c]}function TE(t,e,r){const n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)<r}function Tf(t,e){const r=e%360*Math.PI/180;let n,i;const u=Math.cos(r),o=Math.sin(r);return n=(t[0]+5)*-1.2*u,i=(t[1]+5)*-1.2*o,n-=t[0],i-=t[1],[n,i]}function Vr(t){return t<0?360+-1*(Math.abs(t)%360):t>360?t%360:t}function kE(t){return Math.round(t*100)}function Er(t){return Math.round(Math.max(1-Math.pow(1-t,2),.25)*100)/100}function $s(t){let e="parsedWeight";switch(t){case vt.Circle:e="circleWeight";break;case vt.Bars:e="barWeight";break;case vt.Embed:e="embedWeight";break;case vt.Pie:e="pieWeight";break;case vt.Ring:e="ringWeight";break}return e}function IE(t){const e=t.weightMode,r=$s(e);return t.weightedPrompts?Math.max(...Object.values(t.weightedPrompts).map(n=>n[r])):0}function xE(t){const e=t.weightMode,r=$s(e);return t.weightedPrompts?Object.values(t.weightedPrompts).reduce((n,i)=>n+i[r],0):0}function S0(t,e){const r=t.weightMode,n=$s(r);return t.weightedPrompts[e]?t.weightedPrompts[e][n]/IE(t):0}function Si(t,e){const r=t.weightMode,n=$s(r);if(!t.weightedPrompts[e])return 0;const i=t.weightedPrompts[e][n];return kE((i||0)/xE(t))}function NE(t,e,r){const u=r*.6,o=Math.floor(t/u);return Math.ceil(e/o)*r*1.2}function xr(t,e,r){const n=NE(t,e,r)+10;return[t,n]}function as(t,e){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function fa(t){return Cn(t,.5)}function fi(t){const e=t.currentTarget;if(!e)throw new Error("No SVG element found");var r=e.createSVGPoint();r.x=t.clientX,r.y=t.clientY;const n=e.getScreenCTM();if(!n)throw new Error("No DOM Matrix found");const i=r.matrixTransform(n.inverse());return[i.x,i.y]}function B0(t,e,r){const n=t.slice();return n[18]=e[r][0],n[19]=e[r][1],n}function O0(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,u;e=new Pf({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),s=[];for(let f=0;f<o.length;f+=1)s[f]=M0(B0(t,o,f));const c=f=>Se(s[f],1,1,()=>{s[f]=null});let p=n&&P0(t);return{c(){$e(e.$$.fragment);for(let f=0;f<s.length;f+=1)s[f].c();r=It(),p&&p.c(),i=It()},l(f){Ke(e.$$.fragment,f);for(let h=0;h<s.length;h+=1)s[h].l(f);r=It(),p&&p.l(f),i=It()},m(f,h){Ye(e,f,h);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(f,h);_e(f,r,h),p&&p.m(f,h),_e(f,i,h),u=!0},p(f,h){const d={};if(h&1&&(d.xy=f[0]),h&2&&(d.radius=f[1]),e.$set(d),h&895){o=Object.entries(f[5].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=B0(f,o,g);s[g]?(s[g].p(b,h),Ae(s[g],1)):(s[g]=M0(b),s[g].c(),Ae(s[g],1),s[g].m(r.parentNode,r))}for(Nr(),g=o.length;g<s.length;g+=1)c(g);Rr()}h&32&&(n=Object.entries(f[5].weightedPrompts).length>0),n?p?(p.p(f,h),h&32&&Ae(p,1)):(p=P0(f),p.c(),Ae(p,1),p.m(i.parentNode,i)):p&&(Nr(),Se(p,1,1,()=>{p=null}),Rr())},i(f){if(!u){Ae(e.$$.fragment,f);for(let h=0;h<o.length;h+=1)Ae(s[h]);Ae(p),u=!0}},o(f){Se(e.$$.fragment,f),s=s.filter(Boolean);for(let h=0;h<s.length;h+=1)Se(s[h]);Se(p),u=!1},d(f){Ze(e,f),Ls(s,f),f&&I(r),p&&p.d(f),f&&I(i)}}}function M0(t){let e,r,n,i,u;e=new Kp({props:{p1:kr(t[0],t[5].circleMarker,t[1]),p2:t[6][t[18]].xy}});function o(){return t[12](t[18])}return r=new Au({props:{xy:t[6][t[18]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:o}}),n=new la({props:{xy:t[9](t[6][t[18]].xy,xr(t[3],t[19].text.length,t[4])),color:`rgba(255,255,255,${Er(t[6][t[18]].unitWeight)}`,wh:xr(t[3],t[19].text.length,t[4]),fontSize:t[4],text:t[19].text}}),i=new PE({props:{xy:Cn(Gr(kr(t[0],t[5].circleMarker,t[1]),t[6][t[18]].xy),.5),weight:Si(t[5],t[18]),radius:15,textColor:`rgba(255,255,255,${Er(t[6][t[18]].unitWeight)}`,bgColor:"rgb(8, 11, 22)"}}),{c(){$e(e.$$.fragment),$e(r.$$.fragment),$e(n.$$.fragment),$e(i.$$.fragment)},l(s){Ke(e.$$.fragment,s),Ke(r.$$.fragment,s),Ke(n.$$.fragment,s),Ke(i.$$.fragment,s)},m(s,c){Ye(e,s,c),Ye(r,s,c),Ye(n,s,c),Ye(i,s,c),u=!0},p(s,c){t=s;const p={};c&35&&(p.p1=kr(t[0],t[5].circleMarker,t[1])),c&96&&(p.p2=t[6][t[18]].xy),e.$set(p);const f={};c&96&&(f.xy=t[6][t[18]].xy),c&4&&(f.radius=t[2]),c&32&&(f.handleMouseDown=o),r.$set(f);const h={};c&120&&(h.xy=t[9](t[6][t[18]].xy,xr(t[3],t[19].text.length,t[4]))),c&96&&(h.color=`rgba(255,255,255,${Er(t[6][t[18]].unitWeight)}`),c&56&&(h.wh=xr(t[3],t[19].text.length,t[4])),c&16&&(h.fontSize=t[4]),c&32&&(h.text=t[19].text),n.$set(h);const d={};c&99&&(d.xy=Cn(Gr(kr(t[0],t[5].circleMarker,t[1]),t[6][t[18]].xy),.5)),c&32&&(d.weight=Si(t[5],t[18])),c&96&&(d.textColor=`rgba(255,255,255,${Er(t[6][t[18]].unitWeight)}`),i.$set(d)},i(s){u||(Ae(e.$$.fragment,s),Ae(r.$$.fragment,s),Ae(n.$$.fragment,s),Ae(i.$$.fragment,s),u=!0)},o(s){Se(e.$$.fragment,s),Se(r.$$.fragment,s),Se(n.$$.fragment,s),Se(i.$$.fragment,s),u=!1},d(s){Ze(e,s),Ze(r,s),Ze(n,s),Ze(i,s)}}}function P0(t){let e,r;return e=new Au({props:{xy:kr(t[0],t[5].circleMarker,t[1]),radius:10,color:"rgba(136,157,191, 1)",handleMouseDown:t[13]}}),{c(){$e(e.$$.fragment)},l(n){Ke(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},p(n,i){const u={};i&35&&(u.xy=kr(n[0],n[5].circleMarker,n[1])),e.$set(u)},i(n){r||(Ae(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function RE(t){let e,r,n,i,u=t[6]&&t[5].weightedPrompts&&O0(t);return{c(){e=dt("svg"),u&&u.c(),this.h()},l(o){e=pt(o,"svg",{id:!0,class:!0});var s=$(e);u&&u.l(s),s.forEach(I),this.h()},h(){O(e,"id","svg"),O(e,"class","w-full h-full")},m(o,s){_e(o,e,s),u&&u.m(e,null),r=!0,n||(i=[Fe(e,"mousemove",t[10]),Fe(e,"mouseup",t[7]),Fe(e,"dblclick",t[11])],n=!0)},p(o,[s]){o[6]&&o[5].weightedPrompts?u?(u.p(o,s),s&96&&Ae(u,1)):(u=O0(o),u.c(),Ae(u,1),u.m(e,null)):u&&(Nr(),Se(u,1,1,()=>{u=null}),Rr())},i(o){r||(Ae(u),r=!0)},o(o){Se(u),r=!1},d(o){o&&I(e),u&&u.d(),n=!1,ar(i)}}}function T0(t,e){return t?Object.entries(t).reduce((r,[n,i],u)=>{const o=r[n]||u*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function LE(t,e,r){let n,i;ct(t,Cr,E=>r(5,i=E));let{center:u=[450,450]}=e,{radius:o=250}=e,{pointRadius:s=10}=e,{textWidth:c=150}=e,{fontSize:p=13}=e,f=[0,0],h=null;function d(E){h=null}function g(E){h=E}function b(E,B){let P=Nn(E,u,o)[0]-180;P<0&&(P+=360);const T=Tf(fa(B),P);return Gr(E,T)}function m(E){const B=TE(E,u,o)?Nn(E,u,o):Nn(aa(E,u,o),u,o);r(6,n=C(i.weightedPrompts,u,o,i.circleWeightScaling,i.circleExponentialScaling,B,i.circleAngles))}function _(E){if(f=fi(E),h==="main")m(f);else if(h){const B={...i.weightedPrompts[h]},P=aa(f,u,o),T=Nn(P,u,o)[0],N={...i.circleAngles};N[B.id]=T;const G={...i.weightedPrompts};G[h]=B,r(6,n=C(G,u,o,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,N))}}function D(E){f=fi(E),m(f)}function C(E,B,P,T,N,G,re){if(!E||!B||!P||!T||!G)return null;let z=Object.entries(E).reduce((U,[q,J])=>(U[q]={xy:kr(B,[re[q],1],P)},U),{});z=Object.entries(z).reduce((U,[q,J])=>(U[q]={...U[q],distance:as(J.xy,kr(B,G,P))},U),z);const Y=Object.values(z).reduce((U,q)=>U+q.distance,0);z=Object.entries(z).reduce((U,[q,J])=>(U[q]={...U[q],unitDistance:Math.round(J.distance/Y*100)/100},U),z),z=Object.entries(z).reduce((U,[q,J])=>(U[q]={...U[q],invertedUnitDistance:Math.round((1-J.unitDistance)*100)/100},U),z),z=Object.entries(z).reduce((U,[q,J])=>(N?U[q]={...U[q],unitWeight:Math.round(Math.pow(1-J.distance/(2*P),T)*100)/100}:U[q]={...U[q],unitWeight:Math.round((1-J.distance/(2*P))*100)/100},U),z);const V={...E};return Object.entries(z).forEach(([U,q])=>{V[U].circleWeight=q.unitWeight}),Mt.update({...i,circleMarker:G,weightedPrompts:V,circleAngles:re}),z}const A=E=>g(E),S=()=>g("main");return t.$$set=E=>{"center"in E&&r(0,u=E.center),"radius"in E&&r(1,o=E.radius),"pointRadius"in E&&r(2,s=E.pointRadius),"textWidth"in E&&r(3,c=E.textWidth),"fontSize"in E&&r(4,p=E.fontSize)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(i.circleAngles).length!==Object.keys(i.weightedPrompts).length&&Mt.update({...i,circleAngles:T0(i.weightedPrompts,{})}),t.$$.dirty&35&&r(6,n=C(i.weightedPrompts,u,o,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,i.circleAngles||T0(i.weightedPrompts,{})))},[u,o,s,c,p,i,n,d,g,b,_,D,A,S]}class UE extends yt{constructor(e){super(),wt(this,e,LE,RE,At,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function k0(t){let e,r,n,i,u,o,s,c;return{c(){e=Q("div"),r=Q("label"),n=Q("span"),i=Ve("Scaling Power"),u=xe(),o=Q("input"),this.h()},l(p){e=ee(p,"DIV",{class:!0});var f=$(e);r=ee(f,"LABEL",{class:!0});var h=$(r);n=ee(h,"SPAN",{class:!0});var d=$(n);i=je(d,"Scaling Power"),d.forEach(I),h.forEach(I),u=Ne(f),o=ee(f,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),f.forEach(I),this.h()},h(){O(n,"class","label-text"),O(r,"class","label"),O(o,"type","range"),O(o,"min","0.5"),O(o,"max","3"),O(o,"step","0.1"),O(o,"class","range range-xs"),O(e,"class","w-full px-2")},m(p,f){_e(p,e,f),R(e,r),R(r,n),R(n,i),R(e,u),R(e,o),tn(o,t[0]),s||(c=[Fe(o,"change",t[6]),Fe(o,"input",t[6])],s=!0)},p(p,f){f&1&&tn(o,p[0])},d(p){p&&I(e),s=!1,ar(c)}}}function VE(t){let e,r,n,i,u,o,s,c,p,f,h,d,g,b,m;r=new UE({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let _=t[1]&&k0(t);return{c(){e=Q("div"),$e(r.$$.fragment),i=xe(),u=Q("div"),o=Q("div"),s=Q("label"),c=Q("span"),p=Ve("Exponential Scaling"),f=xe(),h=Q("input"),d=xe(),_&&_.c(),this.h()},l(D){e=ee(D,"DIV",{class:!0});var C=$(e);Ke(r.$$.fragment,C),C.forEach(I),i=Ne(D),u=ee(D,"DIV",{class:!0});var A=$(u);o=ee(A,"DIV",{class:!0});var S=$(o);s=ee(S,"LABEL",{class:!0});var E=$(s);c=ee(E,"SPAN",{class:!0});var B=$(c);p=je(B,"Exponential Scaling"),B.forEach(I),E.forEach(I),f=Ne(S),h=ee(S,"INPUT",{type:!0,class:!0}),S.forEach(I),d=Ne(A),_&&_.l(A),A.forEach(I),this.h()},h(){O(e,"class","w-full h-full"),wu(()=>t[4].call(e)),O(c,"class","label-text"),O(s,"class","label"),O(h,"type","checkbox"),O(h,"class","toggle toggle-xs"),O(o,"class","w-52 px-2"),O(u,"class","px-2 py-4 pb-0 flex")},m(D,C){_e(D,e,C),Ye(r,e,null),n=oa(e,t[4].bind(e)),_e(D,i,C),_e(D,u,C),R(u,o),R(o,s),R(s,c),R(c,p),R(o,f),R(o,h),h.checked=t[1],R(u,d),_&&_.m(u,null),g=!0,b||(m=Fe(h,"change",t[5]),b=!0)},p(D,[C]){const A={};C&12&&(A.center=[Math.round(D[2]/2),Math.round(D[3]/2)]),C&12&&(A.radius=Math.round(Math.min(D[2],D[3])/2)-150),r.$set(A),C&2&&(h.checked=D[1]),D[1]?_?_.p(D,C):(_=k0(D),_.c(),_.m(u,null)):_&&(_.d(1),_=null)},i(D){g||(Ae(r.$$.fragment,D),g=!0)},o(D){Se(r.$$.fragment,D),g=!1},d(D){D&&I(e),Ze(r),n(),D&&I(i),D&&I(u),_&&_.d(),b=!1,m()}}}function jE(t,e,r){let n;ct(t,Cr,h=>r(7,n=h));let i,u,o=n.circleWeightScaling||2,s=wf(n.circleExponentialScaling)?!0:n.circleExponentialScaling;function c(){i=this.clientWidth,u=this.clientHeight,r(2,i),r(3,u)}function p(){s=this.checked,r(1,s)}function f(){o=hp(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&Mt.update({...Mt.get(),circleExponentialScaling:s,circleWeightScaling:o})},[o,s,i,u,c,p,f]}class qE extends yt{constructor(e){super(),wt(this,e,jE,VE,At,{})}}function zE(t){let e,r,n,i,u,o,s;return{c(){e=dt("rect"),this.h()},l(c){e=pt(c,"rect",{x:!0,y:!0,width:!0,height:!0}),$(e).forEach(I),this.h()},h(){O(e,"x",r=t[0][0]),O(e,"y",n=t[0][1]),O(e,"width",i=Math.max(t[1][0],0)),O(e,"height",u=Math.max(t[1][1],0)),Yt(e,"fill",t[2])},m(c,p){_e(c,e,p),o||(s=[Fe(e,"mouseover",function(){fl(t[4])&&t[4].apply(this,arguments)}),Fe(e,"mouseout",function(){fl(t[5])&&t[5].apply(this,arguments)}),Fe(e,"mousedown",function(){fl(t[3])&&t[3].apply(this,arguments)})],o=!0)},p(c,[p]){t=c,p&1&&r!==(r=t[0][0])&&O(e,"x",r),p&1&&n!==(n=t[0][1])&&O(e,"y",n),p&2&&i!==(i=Math.max(t[1][0],0))&&O(e,"width",i),p&2&&u!==(u=Math.max(t[1][1],0))&&O(e,"height",u),p&4&&Yt(e,"fill",t[2])},i:Me,o:Me,d(c){c&&I(e),o=!1,ar(s)}}}function WE(t,e,r){let{xy:n=[500,500]}=e,{wh:i=[100,100]}=e,{color:u="rgba(46,67,101, 0.4)"}=e,{handleMouseDown:o=p=>{}}=e,{handleMouseOver:s=p=>{}}=e,{handleMouseOut:c=p=>{}}=e;return t.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,i=p.wh),"color"in p&&r(2,u=p.color),"handleMouseDown"in p&&r(3,o=p.handleMouseDown),"handleMouseOver"in p&&r(4,s=p.handleMouseOver),"handleMouseOut"in p&&r(5,c=p.handleMouseOut)},[n,i,u,o,s,c]}class vl extends yt{constructor(e){super(),wt(this,e,WE,zE,At,{xy:0,wh:1,color:2,handleMouseDown:3,handleMouseOver:4,handleMouseOut:5})}}function I0(t,e,r){const n=t.slice();return n[51]=e[r][0],n[52]=e[r][1],n[53]=e[r][2],n}function x0(t,e){let r,n,i,u,o,s;n=new la({props:{xy:[e[3][0]+e[0],e[3][1]+e[52]*e[4]+e[52]],color:`rgba(255,255,255,${Er(e[53].barWeight/e[12]||0)})`,wh:e[5][e[51]],text:e[53].text,textAlign:"right",fontSize:e[1]}});function c(...d){return e[39](e[51],...d)}i=new vl({props:{color:e[13](0),handleMouseOver:c,handleMouseOut:e[40],xy:[e[10],e[3][1]+e[52]*e[4]+e[52]],wh:[e[11],e[4]-2]}});function p(...d){return e[41](e[51],...d)}u=new vl({props:{color:e[8]===e[51]||e[7]===e[51]||e[9]===e[51]?e[13](Er((e[53].barWeight||0)/e[12]+.15)):e[13](Er(e[53].barWeight||0)),handleMouseOver:p,handleMouseOut:e[42],xy:[e[10],e[3][1]+e[52]*e[4]+e[52]],wh:[(e[53].barWeight||0)*e[11],e[4]-2]}});function f(...d){return e[43](e[51],...d)}function h(...d){return e[45](e[51],...d)}return o=new vl({props:{color:e[9]===e[51]?e[15]:e[14],handleMouseOver:f,handleMouseOut:e[44],handleMouseDown:h,xy:[e[10]+(e[53].barWeight||0)*e[11],e[3][1]+e[52]*e[4]+e[52]],wh:[e[2],e[4]-2]}}),{key:t,first:null,c(){r=It(),$e(n.$$.fragment),$e(i.$$.fragment),$e(u.$$.fragment),$e(o.$$.fragment),this.h()},l(d){r=It(),Ke(n.$$.fragment,d),Ke(i.$$.fragment,d),Ke(u.$$.fragment,d),Ke(o.$$.fragment,d),this.h()},h(){this.first=r},m(d,g){_e(d,r,g),Ye(n,d,g),Ye(i,d,g),Ye(u,d,g),Ye(o,d,g),s=!0},p(d,g){e=d;const b={};g[0]&89&&(b.xy=[e[3][0]+e[0],e[3][1]+e[52]*e[4]+e[52]]),g[0]&4160&&(b.color=`rgba(255,255,255,${Er(e[53].barWeight/e[12]||0)})`),g[0]&96&&(b.wh=e[5][e[51]]),g[0]&64&&(b.text=e[53].text),g[0]&2&&(b.fontSize=e[1]),n.$set(b);const m={};g[0]&64&&(m.handleMouseOver=c),g[0]&1112&&(m.xy=[e[10],e[3][1]+e[52]*e[4]+e[52]]),g[0]&2064&&(m.wh=[e[11],e[4]-2]),i.$set(m);const _={};g[0]&5056&&(_.color=e[8]===e[51]||e[7]===e[51]||e[9]===e[51]?e[13](Er((e[53].barWeight||0)/e[12]+.15)):e[13](Er(e[53].barWeight||0))),g[0]&64&&(_.handleMouseOver=p),g[0]&1112&&(_.xy=[e[10],e[3][1]+e[52]*e[4]+e[52]]),g[0]&2128&&(_.wh=[(e[53].barWeight||0)*e[11],e[4]-2]),u.$set(_);const D={};g[0]&576&&(D.color=e[9]===e[51]?e[15]:e[14]),g[0]&64&&(D.handleMouseOver=f),g[0]&64&&(D.handleMouseDown=h),g[0]&3160&&(D.xy=[e[10]+(e[53].barWeight||0)*e[11],e[3][1]+e[52]*e[4]+e[52]]),g[0]&20&&(D.wh=[e[2],e[4]-2]),o.$set(D)},i(d){s||(Ae(n.$$.fragment,d),Ae(i.$$.fragment,d),Ae(u.$$.fragment,d),Ae(o.$$.fragment,d),s=!0)},o(d){Se(n.$$.fragment,d),Se(i.$$.fragment,d),Se(u.$$.fragment,d),Se(o.$$.fragment,d),s=!1},d(d){d&&I(r),Ze(n,d),Ze(i,d),Ze(u,d),Ze(o,d)}}}function HE(t){let e,r=[],n=new Map,i,u,o,s=t[6];const c=p=>p[51];for(let p=0;p<s.length;p+=1){let f=I0(t,s,p),h=c(f);n.set(h,r[p]=x0(h,f))}return{c(){e=dt("svg");for(let p=0;p<r.length;p+=1)r[p].c();this.h()},l(p){e=pt(p,"svg",{id:!0,class:!0});var f=$(e);for(let h=0;h<r.length;h+=1)r[h].l(f);f.forEach(I),this.h()},h(){O(e,"id","svg"),O(e,"class","w-full h-full")},m(p,f){_e(p,e,f);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(e,null);i=!0,u||(o=[Fe(e,"mousemove",t[25]),Fe(e,"mouseup",t[24]),Fe(e,"dblclick",t[23])],u=!0)},p(p,f){f[0]&8388607&&(s=p[6],Nr(),r=Kn(r,f,c,1,p,s,n,e,dp,x0,null,I0),Rr())},i(p){if(!i){for(let f=0;f<s.length;f+=1)Ae(r[f]);i=!0}},o(p){for(let f=0;f<r.length;f+=1)Se(r[f]);i=!1},d(p){p&&I(e);for(let f=0;f<r.length;f+=1)r[f].d();u=!1,ar(o)}}}function GE(t,e,r){let n,i,u,o,s,c,p,f,h,d,g,b,m;ct(t,Cr,Ce=>r(38,m=Ce));let{center:_=[0,0]}=e,{dimensions:D=[100,100]}=e,{maxWidth:C=1e3}=e,{pointRadius:A=10}=e,{textWidth:S=250}=e,{horizontalPad:E=20}=e,{verticalPad:B=2}=e,{textBarPad:P=10}=e,{fontSize:T=13}=e,{handleWidth:N=20}=e,G=Ce=>`rgba(46,67,101, ${Ce})`,re=Ce=>`rgba(76,97,131, ${Ce})`,z=null,Y=null,V=null,U=re(.3),q=re(.8),J=null,Z=null,X=null;function le(Ce){r(8,Y=Ce)}function ge(Ce){r(7,z=Ce)}function Ee(Ce){r(9,V=Ce)}function ye(){r(8,Y=null)}function Oe(){r(7,z=null)}function qe(){r(9,V=null)}function Ie(Ce){J=Ce}function tt(Ce){let Te=J!==null?J:Y!==null?Y:V!==null?V:z!==null?z:null;if(Te===null)return;const Ot=fi(Ce);Ue(Te,Ot)}function He(){J=null,Z&&clearInterval(Z),Z=null,X=null}function Ue(Ce,Te){let Vt=Math.min(d,Math.max(0,Te[0]-g))/d,Ht={...m.weightedPrompts},j={...Ht[Ce]};j.barWeight=Vt,Ht[Ce]=j,Mt.update({...m,weightedPrompts:Ht})}function ze(Ce){let Te=J;if(Te===null)return;const Ot=fi(Ce);if(Ue(Te,Ot),J!==null){let Vt=g+d+N,Ht=g;Ot[0]>Vt&&!Z?(X=Date.now(),Z=setInterval(()=>{if(!X||Date.now()-X<1e3)return;let j={...m.weightedPrompts};const H=Object.entries(j).reduce((te,[fe,ae])=>{const he=parseInt(fe);return he!==J?te[he]={...ae,barWeight:Math.max(0,(ae.barWeight||0)-.01)}:te[he]={...ae,barWeight:Math.min(1,(ae.barWeight||0)+.01)},te},{});Mt.update({...m,weightedPrompts:H})},100)):Ot[0]<Ht&&!Z?(X=Date.now(),Z=setInterval(()=>{if(!X||Date.now()-X<1e3)return;let j={...m.weightedPrompts};const H=Object.entries(j).reduce((te,[fe,ae])=>{const he=parseInt(fe);return he!==J?te[he]={...ae,barWeight:Math.min(1,(ae.barWeight||0)+.01)}:te[he]={...ae,barWeight:Math.max(0,(ae.barWeight||0)-.01)},te},{});Mt.update({...m,weightedPrompts:H})},100)):Ot[0]<Vt&&Ot[0]>Ht&&Z&&(clearInterval(Z),Z=null,X=null)}}const mt=(Ce,Te)=>ge(Ce),ut=Ce=>Oe(),lt=(Ce,Te)=>le(Ce),at=Ce=>ye(),st=(Ce,Te)=>Ee(Ce),Xe=Ce=>qe(),Je=(Ce,Te)=>Ie(Ce);return t.$$set=Ce=>{"center"in Ce&&r(26,_=Ce.center),"dimensions"in Ce&&r(27,D=Ce.dimensions),"maxWidth"in Ce&&r(28,C=Ce.maxWidth),"pointRadius"in Ce&&r(29,A=Ce.pointRadius),"textWidth"in Ce&&r(30,S=Ce.textWidth),"horizontalPad"in Ce&&r(0,E=Ce.horizontalPad),"verticalPad"in Ce&&r(31,B=Ce.verticalPad),"textBarPad"in Ce&&r(32,P=Ce.textBarPad),"fontSize"in Ce&&r(1,T=Ce.fontSize),"handleWidth"in Ce&&r(2,N=Ce.handleWidth)},t.$$.update=()=>{t.$$.dirty[1]&128&&r(6,n=Object.entries(m.weightedPrompts).map(([Ce,Te],Ot)=>[parseInt(Ce),Ot,Te])),t.$$.dirty[1]&128&&r(36,i=Object.keys(m.weightedPrompts).length),t.$$.dirty[0]&134217728&&r(35,u=[D[0]-50,D[1]-50]),t.$$.dirty[0]&1073741890&&r(5,o=n.reduce((Ce,[Te,Ot,Vt])=>{const[Ht,j]=xr(S,Vt.text.length,T);return Ce[Te]=[Ht,j],Ce},{})),t.$$.dirty[0]&32&&r(37,s=Math.max(...Object.values(o).map(([Ce,Te])=>Te))),t.$$.dirty[1]&112&&r(4,c=Math.min(u[1]/i,s)),t.$$.dirty[0]&16|t.$$.dirty[1]&33&&r(34,p=c*i+B*Math.max(i-1,0)),t.$$.dirty[0]&268435456|t.$$.dirty[1]&16&&r(33,f=Math.min(u[0],C)),t.$$.dirty[0]&67108864|t.$$.dirty[1]&12&&r(3,h=[_[0]-f/2,_[1]-p/2]),t.$$.dirty[0]&1073741829|t.$$.dirty[1]&6&&r(11,d=f-P-S-2*E-N),t.$$.dirty[0]&1073741833|t.$$.dirty[1]&2&&r(10,g=h[0]+P+S+E),t.$$.dirty[1]&128&&r(12,b=Math.max(...Object.values(m.weightedPrompts).map(Ce=>Ce.barWeight||0)))},[E,T,N,h,c,o,n,z,Y,V,g,d,b,G,U,q,le,ge,Ee,ye,Oe,qe,Ie,tt,He,ze,_,D,C,A,S,B,P,f,p,u,i,s,m,mt,ut,lt,at,st,Xe,Je]}class $E extends yt{constructor(e){super(),wt(this,e,GE,HE,At,{center:26,dimensions:27,maxWidth:28,pointRadius:29,textWidth:30,horizontalPad:0,verticalPad:31,textBarPad:32,fontSize:1,handleWidth:2},null,[-1,-1])}}function KE(t){let e,r,n,i;return r=new $E({props:{dimensions:t[2],center:t[3]}}),{c(){e=Q("div"),$e(r.$$.fragment),this.h()},l(u){e=ee(u,"DIV",{class:!0});var o=$(e);Ke(r.$$.fragment,o),o.forEach(I),this.h()},h(){O(e,"class","w-full h-full pt-10"),wu(()=>t[4].call(e))},m(u,o){_e(u,e,o),Ye(r,e,null),n=oa(e,t[4].bind(e)),i=!0},p(u,[o]){const s={};o&4&&(s.dimensions=u[2]),o&8&&(s.center=u[3]),r.$set(s)},i(u){i||(Ae(r.$$.fragment,u),i=!0)},o(u){Se(r.$$.fragment,u),i=!1},d(u){u&&I(e),Ze(r),n()}}}function YE(t,e,r){let n,i,u,o;function s(){u=this.clientWidth,o=this.clientHeight,r(0,u),r(1,o)}return t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[u||0,o||0]),t.$$.dirty&4&&r(3,i=fa(n))},[u,o,n,i,s]}class ZE extends yt{constructor(e){super(),wt(this,e,YE,KE,At,{})}}function XE(t){let e,r,n,i,u;return{c(){e=dt("line"),this.h()},l(o){e=pt(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),$(e).forEach(I),this.h()},h(){O(e,"x1",r=t[0][0]),O(e,"y1",n=t[0][1]),O(e,"x2",i=t[1][0]),O(e,"y2",u=t[1][1]),O(e,"stroke",t[3]),O(e,"stroke-width",t[2])},m(o,s){_e(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&O(e,"x1",r),s&1&&n!==(n=o[0][1])&&O(e,"y1",n),s&2&&i!==(i=o[1][0])&&O(e,"x2",i),s&2&&u!==(u=o[1][1])&&O(e,"y2",u),s&8&&O(e,"stroke",o[3]),s&4&&O(e,"stroke-width",o[2])},i:Me,o:Me,d(o){o&&I(e)}}}function JE(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:u=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,u=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,u,o]}class QE extends yt{constructor(e){super(),wt(this,e,JE,XE,At,{p1:0,p2:1,stroke:2,color:3})}}function N0(t,e,r){const n=t.slice();return n[26]=e[r][0],n[27]=e[r][1],n}function R0(t){let e,r,n;e=new Pf({props:{xy:t[0],radius:t[1]}});let i=Object.entries(t[5].weightedPrompts),u=[];for(let s=0;s<i.length;s+=1)u[s]=L0(N0(t,i,s));const o=s=>Se(u[s],1,1,()=>{u[s]=null});return{c(){$e(e.$$.fragment);for(let s=0;s<u.length;s+=1)u[s].c();r=It()},l(s){Ke(e.$$.fragment,s);for(let c=0;c<u.length;c+=1)u[c].l(s);r=It()},m(s,c){Ye(e,s,c);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(s,c);_e(s,r,c),n=!0},p(s,c){const p={};if(c&1&&(p.xy=s[0]),c&2&&(p.radius=s[1]),e.$set(p),c&6015){i=Object.entries(s[5].weightedPrompts);let f;for(f=0;f<i.length;f+=1){const h=N0(s,i,f);u[f]?(u[f].p(h,c),Ae(u[f],1)):(u[f]=L0(h),u[f].c(),Ae(u[f],1),u[f].m(r.parentNode,r))}for(Nr(),f=i.length;f<u.length;f+=1)o(f);Rr()}},i(s){if(!n){Ae(e.$$.fragment,s);for(let c=0;c<i.length;c+=1)Ae(u[c]);n=!0}},o(s){Se(e.$$.fragment,s),u=u.filter(Boolean);for(let c=0;c<u.length;c+=1)Se(u[c]);n=!1},d(s){Ze(e,s),Ls(u,s),s&&I(r)}}}function L0(t){let e,r,n,i,u,o,s,c,p;e=new QE({props:{p1:t[0],p2:t[6][t[26]].xy}});function f(...g){return t[13](t[26],...g)}function h(...g){return t[14](t[26],...g)}function d(){return t[15](t[26])}return u=new Au({props:{xy:t[6][t[26]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:d}}),o=new la({props:{xy:t[9](t[6][t[26]].textXY,xr(t[3],t[27].text.length,t[4])),color:`rgba(255,255,255,${Er(t[6][t[26]].unitWeight)}`,wh:xr(t[3],t[27].text.length,t[4]),fontSize:t[4],text:t[27].text}}),{c(){$e(e.$$.fragment),r=dt("path"),$e(u.$$.fragment),$e(o.$$.fragment),this.h()},l(g){Ke(e.$$.fragment,g),r=pt(g,"path",{d:!0,fill:!0}),$(r).forEach(I),Ke(u.$$.fragment,g),Ke(o.$$.fragment,g),this.h()},h(){O(r,"d",n=U0(t[0],t[1],t[6][t[26]].angle,t[6][t[26]].angle+t[6][t[26]].angleDiff)),O(r,"fill",i=`rgba(26,47,91,${Er(t[6][t[26]].unitWeight)/4}`)},m(g,b){Ye(e,g,b),_e(g,r,b),Ye(u,g,b),Ye(o,g,b),s=!0,c||(p=[Fe(r,"mousewheel",f),Fe(r,"mousedown",h)],c=!0)},p(g,b){t=g;const m={};b&1&&(m.p1=t[0]),b&96&&(m.p2=t[6][t[26]].xy),e.$set(m),(!s||b&99&&n!==(n=U0(t[0],t[1],t[6][t[26]].angle,t[6][t[26]].angle+t[6][t[26]].angleDiff)))&&O(r,"d",n),(!s||b&96&&i!==(i=`rgba(26,47,91,${Er(t[6][t[26]].unitWeight)/4}`))&&O(r,"fill",i);const _={};b&96&&(_.xy=t[6][t[26]].xy),b&4&&(_.radius=t[2]),b&32&&(_.handleMouseDown=d),u.$set(_);const D={};b&120&&(D.xy=t[9](t[6][t[26]].textXY,xr(t[3],t[27].text.length,t[4]))),b&96&&(D.color=`rgba(255,255,255,${Er(t[6][t[26]].unitWeight)}`),b&56&&(D.wh=xr(t[3],t[27].text.length,t[4])),b&16&&(D.fontSize=t[4]),b&32&&(D.text=t[27].text),o.$set(D)},i(g){s||(Ae(e.$$.fragment,g),Ae(u.$$.fragment,g),Ae(o.$$.fragment,g),s=!0)},o(g){Se(e.$$.fragment,g),Se(u.$$.fragment,g),Se(o.$$.fragment,g),s=!1},d(g){Ze(e,g),g&&I(r),Ze(u,g),Ze(o,g),c=!1,ar(p)}}}function eC(t){let e,r,n,i,u=t[6]&&t[5].weightedPrompts&&R0(t);return{c(){e=dt("svg"),u&&u.c(),this.h()},l(o){e=pt(o,"svg",{id:!0,class:!0});var s=$(e);u&&u.l(s),s.forEach(I),this.h()},h(){O(e,"id","svg"),O(e,"class","w-full h-full")},m(o,s){_e(o,e,s),u&&u.m(e,null),r=!0,n||(i=[Fe(e,"mousemove",t[11]),Fe(e,"mouseup",t[7])],n=!0)},p(o,[s]){o[6]&&o[5].weightedPrompts?u?(u.p(o,s),s&96&&Ae(u,1)):(u=R0(o),u.c(),Ae(u,1),u.m(e,null)):u&&(Nr(),Se(u,1,1,()=>{u=null}),Rr())},i(o){r||(Ae(u),r=!0)},o(o){Se(u),r=!1},d(o){o&&I(e),u&&u.d(),n=!1,ar(i)}}}function tC(t,e){if(t.length!==e.length)return!1;const r=t.length;let n=-1;for(let i=0;i<r;i++)if(e[i]===t[0]){n=i;break}if(n===-1)return!1;for(let i=0;i<r;i++)if(t[i]!==e[(i+n)%r])return!1;return!0}function U0(t,e,r,n){const i=t[0]+e*Math.cos(r*Math.PI/180),u=t[1]+e*Math.sin(r*Math.PI/180),o=t[0]+e*Math.cos(n*Math.PI/180),s=t[1]+e*Math.sin(n*Math.PI/180),c=n-r<=180?"0":"1";return`M${t[0]},${t[1]} L${i},${u} A${e},${e} 0 ${c} 1 ${o},${s} Z`}function rC(t,e,r){let n,i;ct(t,Cr,z=>r(5,i=z));let{center:u=[450,450]}=e,{radius:o=250}=e,{pointRadius:s=10}=e,{textWidth:c=150}=e,{fontSize:p=13}=e,f=[0,0],h=null,d={},g=null,b;function m(z){g=null,b=null,h=null,d={}}function _(z){g=z}function D(z,Y){let V=Nn(z,u,o)[0]-180;V<0&&(V+=360);const U=Tf(fa(Y),V);return Gr(z,U)}function C(z,Y){return z?Object.entries(z).reduce((V,[U,q],J)=>{const Z=V[U]||J*(360/Object.keys(z).length)-90;return V[U]=Vr(Z),V},Y):null}function A(z,Y){b=Y}function S(z){const Y=b,V={...i.pieAngles},U=Object.entries(V).sort((Oe,qe)=>Vr(Oe[1])-Vr(qe[1])).map(Oe=>Oe[0]),q=U.indexOf(Y),J=q+1===U.length?0:q+1,Z=U[J];d[Y]||(d[Y]=V[Y]),d[Z]||(d[Z]=V[Z]);const le=Nn(z,u,o)[0]-h,ge={...V};ge[Y]=Vr(le+d[Y]),ge[Z]=Vr(le+d[Z]);const Ee=Object.entries(ge).sort((Oe,qe)=>Vr(Oe[1])-Vr(qe[1])).map(Oe=>Oe[0]);tC(U,Ee)&&r(6,n=T(i.weightedPrompts,u,o,ge))}function E(z){const Y={...i.weightedPrompts[g]},V=aa(z,u,o),U=Vr(Nn(V,u,o)[0]),q={...i.pieAngles};q[Y.id]=U;const J={...i.weightedPrompts};J[g]=Y,r(6,n=T(J,u,o,q))}function B(z){z.preventDefault(),f=fi(z),g?E(f):b?S(f):h=Nn(f,u,o)[0]}function P(z,Y){z.preventDefault();const V={...i.pieAngles},U=Object.entries(V).sort((X,le)=>Vr(X[1])-Vr(le[1])).map(X=>X[0]),q=U.indexOf(Y),J=q+1===U.length?0:q+1,Z=U[J];V[Y]=Vr(V[Y]-z.deltaY/100),V[Z]=Vr(V[Z]+z.deltaY/100),r(6,n=T(i.weightedPrompts,u,o,V))}function T(z,Y,V,U){if(!z||!Y||!V)return null;const q=Object.entries(z).sort((ge,Ee)=>Vr(U[ge[0]])-Vr(U[Ee[0]])),J=q.map((ge,Ee)=>{const ye=Ee+1===q.length?0:Ee+1,Oe=U[q[ye][0]]-U[q[Ee][0]];return Oe<0?[ge[0],360+Oe]:[ge[0],Oe]}),Z=Math.max(...J.map(ge=>ge[1])),X=J.reduce((ge,[Ee,ye])=>{({...z[Ee]});const Oe=U[Ee],qe=kr(Y,[Oe,1],V),Ie=kr(Y,[Oe+.5*ye,1],V),tt=ye/Z;return ge[Ee]={xy:qe,textXY:Ie,angle:Oe,angleDiff:ye,unitWeight:tt},ge},{}),le={...z};return Object.entries(X).forEach(([ge,Ee])=>{le[ge].pieWeight=Ee.unitWeight}),Mt.update({...i,weightedPrompts:le,pieAngles:U}),X}const N=(z,Y)=>P(Y,z),G=(z,Y)=>A(Y,z),re=z=>_(z);return t.$$set=z=>{"center"in z&&r(0,u=z.center),"radius"in z&&r(1,o=z.radius),"pointRadius"in z&&r(2,s=z.pointRadius),"textWidth"in z&&r(3,c=z.textWidth),"fontSize"in z&&r(4,p=z.fontSize)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(i.pieAngles||{}).length!==Object.keys(i.weightedPrompts).length&&Mt.update({...i,pieAngles:C(i.weightedPrompts,{})}),t.$$.dirty&35&&r(6,n=T(i.weightedPrompts,u,o,i.pieAngles||C(i.weightedPrompts,{})))},[u,o,s,c,p,i,n,m,_,D,A,B,P,N,G,re]}class nC extends yt{constructor(e){super(),wt(this,e,rC,eC,At,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function iC(t){let e,r,n,i;return r=new nC({props:{center:[Math.round(t[0]/2),Math.round(t[1]/2)],radius:Math.round(Math.min(t[0],t[1])/2)-150}}),{c(){e=Q("div"),$e(r.$$.fragment),this.h()},l(u){e=ee(u,"DIV",{class:!0});var o=$(e);Ke(r.$$.fragment,o),o.forEach(I),this.h()},h(){O(e,"class","w-full h-full"),wu(()=>t[2].call(e))},m(u,o){_e(u,e,o),Ye(r,e,null),n=oa(e,t[2].bind(e)),i=!0},p(u,[o]){const s={};o&3&&(s.center=[Math.round(u[0]/2),Math.round(u[1]/2)]),o&3&&(s.radius=Math.round(Math.min(u[0],u[1])/2)-150),r.$set(s)},i(u){i||(Ae(r.$$.fragment,u),i=!0)},o(u){Se(r.$$.fragment,u),i=!1},d(u){u&&I(e),Ze(r),n()}}}function uC(t,e,r){let n,i;function u(){n=this.clientWidth,i=this.clientHeight,r(0,n),r(1,i)}return[n,i,u]}class aC extends yt{constructor(e){super(),wt(this,e,uC,iC,At,{})}}var _s={},sC={get exports(){return _s},set exports(t){_s=t}},Ds={},oC={get exports(){return Ds},set exports(t){Ds=t}},Du=typeof Reflect=="object"?Reflect:null,V0=Du&&typeof Du.apply=="function"?Du.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},ss;Du&&typeof Du.ownKeys=="function"?ss=Du.ownKeys:Object.getOwnPropertySymbols?ss=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ss=function(e){return Object.getOwnPropertyNames(e)};function lC(t){console&&console.warn&&console.warn(t)}var Yp=Number.isNaN||function(e){return e!==e};function Lt(){Lt.init.call(this)}oC.exports=Lt;Ds.once=dC;Lt.EventEmitter=Lt;Lt.prototype._events=void 0;Lt.prototype._eventsCount=0;Lt.prototype._maxListeners=void 0;var j0=10;function Ks(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Lt,"defaultMaxListeners",{enumerable:!0,get:function(){return j0},set:function(t){if(typeof t!="number"||t<0||Yp(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");j0=t}});Lt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Lt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Yp(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Zp(t){return t._maxListeners===void 0?Lt.defaultMaxListeners:t._maxListeners}Lt.prototype.getMaxListeners=function(){return Zp(this)};Lt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",u=this._events;if(u!==void 0)i=i&&u.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var c=u[e];if(c===void 0)return!1;if(typeof c=="function")V0(c,this,r);else for(var p=c.length,f=t1(c,p),n=0;n<p;++n)V0(f[n],this,r);return!0};function Xp(t,e,r,n){var i,u,o;if(Ks(r),u=t._events,u===void 0?(u=t._events=Object.create(null),t._eventsCount=0):(u.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),u=t._events),o=u[e]),o===void 0)o=u[e]=r,++t._eventsCount;else if(typeof o=="function"?o=u[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Zp(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=o.length,lC(s)}return t}Lt.prototype.addListener=function(e,r){return Xp(this,e,r,!1)};Lt.prototype.on=Lt.prototype.addListener;Lt.prototype.prependListener=function(e,r){return Xp(this,e,r,!0)};function fC(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Jp(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=fC.bind(n);return i.listener=r,n.wrapFn=i,i}Lt.prototype.once=function(e,r){return Ks(r),this.on(e,Jp(this,e,r)),this};Lt.prototype.prependOnceListener=function(e,r){return Ks(r),this.prependListener(e,Jp(this,e,r)),this};Lt.prototype.removeListener=function(e,r){var n,i,u,o,s;if(Ks(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(u=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){s=n[o].listener,u=o;break}if(u<0)return this;u===0?n.shift():cC(n,u),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this};Lt.prototype.off=Lt.prototype.removeListener;Lt.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var u=Object.keys(n),o;for(i=0;i<u.length;++i)o=u[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function Qp(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?hC(i):t1(i,i.length)}Lt.prototype.listeners=function(e){return Qp(this,e,!0)};Lt.prototype.rawListeners=function(e){return Qp(this,e,!1)};Lt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):e1.call(t,e)};Lt.prototype.listenerCount=e1;function e1(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Lt.prototype.eventNames=function(){return this._eventsCount>0?ss(this._events):[]};function t1(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function cC(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function hC(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function dC(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,u),n(o)}function u(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}r1(t,e,u,{once:!0}),e!=="error"&&pC(t,i,{once:!0})})}function pC(t,e,r){typeof t.on=="function"&&r1(t,"error",e,r)}function r1(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(u){n.once&&t.removeEventListener(e,i),r(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}function gC(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}var vC=gC;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var mC=function(t){return t!=null&&(n1(t)||_C(t)||!!t._isBuffer)};function n1(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function _C(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&n1(t.slice(0,0))}var DC=vC,bC=mC,yC=typeof Float64Array<"u";function wC(t,e){return t[0]-e[0]}function AC(){var t=this.stride,e=new Array(t.length),r;for(r=0;r<e.length;++r)e[r]=[Math.abs(t[r]),r];e.sort(wC);var n=new Array(e.length);for(r=0;r<n.length;++r)n[r]=e[r][1];return n}function EC(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n=t==="generic";if(e===-1){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",m=new Function(i);return m()}else if(e===0){var i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",m=new Function("TrivialArray",i);return m(bs[t][0])}var i=["'use strict'"],u=DC(e),o=u.map(function(_){return"i"+_}),s="this.offset+"+u.map(function(_){return"this.stride["+_+"]*i"+_}).join("+"),c=u.map(function(_){return"b"+_}).join(","),p=u.map(function(_){return"c"+_}).join(",");i.push("function "+r+"(a,"+c+","+p+",d){this.data=a","this.shape=["+c+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+u.map(function(_){return"this.shape["+_+"]"}).join("*"),"}})"),e===1?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+r+"_order(){"),e===2?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+o.join(",")+",v){"),n?i.push("return this.data.set("+s+",v)}"):i.push("return this.data["+s+"]=v}"),i.push("proto.get=function "+r+"_get("+o.join(",")+"){"),n?i.push("return this.data.get("+s+")}"):i.push("return this.data["+s+"]}"),i.push("proto.index=function "+r+"_index(",o.join(),"){return "+s+"}"),i.push("proto.hi=function "+r+"_hi("+o.join(",")+"){return new "+r+"(this.data,"+u.map(function(_){return["(typeof i",_,"!=='number'||i",_,"<0)?this.shape[",_,"]:i",_,"|0"].join("")}).join(",")+","+u.map(function(_){return"this.stride["+_+"]"}).join(",")+",this.offset)}");var f=u.map(function(_){return"a"+_+"=this.shape["+_+"]"}),h=u.map(function(_){return"c"+_+"=this.stride["+_+"]"});i.push("proto.lo=function "+r+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+f.join(",")+","+h.join(","));for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");i.push("return new "+r+"(this.data,"+u.map(function(_){return"a"+_}).join(",")+","+u.map(function(_){return"c"+_}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+o.join(",")+"){var "+u.map(function(_){return"a"+_+"=this.shape["+_+"]"}).join(",")+","+u.map(function(_){return"b"+_+"=this.stride["+_+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");i.push("return new "+r+"(this.data,"+u.map(function(_){return"a"+_}).join(",")+","+u.map(function(_){return"b"+_}).join(",")+",c)}");for(var g=new Array(e),b=new Array(e),d=0;d<e;++d)g[d]="a[i"+d+"]",b[d]="b[i"+d+"]";i.push("proto.transpose=function "+r+"_transpose("+o+"){"+o.map(function(_,D){return _+"=("+_+"===undefined?"+D+":"+_+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+b.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+o+"){var a=[],b=[],c=this.offset");for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+u.map(function(_){return"shape["+_+"]"}).join(",")+","+u.map(function(_){return"stride["+_+"]"}).join(",")+",offset)}");var m=new Function("CTOR_LIST","ORDER",i.join(`
`));return m(bs[t],AC)}function CC(t){if(bC(t))return"buffer";if(yC)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var bs={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function FC(t,e,r,n){if(t===void 0){var p=bs.array[0];return p([])}else typeof t=="number"&&(t=[t]);e===void 0&&(e=[t.length]);var i=e.length;if(r===void 0){r=new Array(i);for(var u=i-1,o=1;u>=0;--u)r[u]=o,o*=e[u]}if(n===void 0){n=0;for(var u=0;u<i;++u)r[u]<0&&(n-=(e[u]-1)*r[u])}for(var s=CC(t),c=bs[s];c.length<=i+1;)c.push(EC(s,c.length-1));var p=c[i+1];return p(t,e,r,n)}var Eu=FC,Ys={};function SC(t,e){for(var r=1,n=t.length,i=t[0],u=t[0],o=1;o<n;++o)if(u=i,i=t[o],e(i,u)){if(o===r){r++;continue}t[r++]=i}return t.length=r,t}function BC(t){for(var e=1,r=t.length,n=t[0],i=t[0],u=1;u<r;++u,i=n)if(i=n,n=t[u],n!==i){if(u===e){e++;continue}t[e++]=n}return t.length=e,t}function OC(t,e,r){return t.length===0?t:e?(r||t.sort(e),SC(t,e)):(r||t.sort(),BC(t))}var i1=OC,MC=i1;function u1(t,e,r){var n=t.length,i=e.arrayArgs.length,u=e.indexArgs.length>0,o=[],s=[],c=0,p=0,f,h;for(f=0;f<n;++f)s.push(["i",f,"=0"].join(""));for(h=0;h<i;++h)for(f=0;f<n;++f)p=c,c=t[f],f===0?s.push(["d",h,"s",f,"=t",h,"p",c].join("")):s.push(["d",h,"s",f,"=(t",h,"p",c,"-s",p,"*t",h,"p",p,")"].join(""));for(s.length>0&&o.push("var "+s.join(",")),f=n-1;f>=0;--f)c=t[f],o.push(["for(i",f,"=0;i",f,"<s",c,";++i",f,"){"].join(""));for(o.push(r),f=0;f<n;++f){for(p=c,c=t[f],h=0;h<i;++h)o.push(["p",h,"+=d",h,"s",f].join(""));u&&(f>0&&o.push(["index[",p,"]-=s",p].join("")),o.push(["++index[",c,"]"].join(""))),o.push("}")}return o.join(`
`)}function PC(t,e,r,n){for(var i=e.length,u=r.arrayArgs.length,o=r.blockSize,s=r.indexArgs.length>0,c=[],p=0;p<u;++p)c.push(["var offset",p,"=p",p].join(""));for(var p=t;p<i;++p)c.push(["for(var j"+p+"=SS[",e[p],"]|0;j",p,">0;){"].join("")),c.push(["if(j",p,"<",o,"){"].join("")),c.push(["s",e[p],"=j",p].join("")),c.push(["j",p,"=0"].join("")),c.push(["}else{s",e[p],"=",o].join("")),c.push(["j",p,"-=",o,"}"].join("")),s&&c.push(["index[",e[p],"]=j",p].join(""));for(var p=0;p<u;++p){for(var f=["offset"+p],h=t;h<i;++h)f.push(["j",h,"*t",p,"p",e[h]].join(""));c.push(["p",p,"=(",f.join("+"),")"].join(""))}c.push(u1(e,r,n));for(var p=t;p<i;++p)c.push("}");return c.join(`
`)}function TC(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}function ml(t,e,r){for(var n=t.body,i=[],u=[],o=0;o<t.args.length;++o){var s=t.args[o];if(!(s.count<=0)){var c=new RegExp(s.name,"g"),p="",f=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var h=e.offsetArgIndex.indexOf(o),d=e.offsetArgs[h];f=d.array,p="+q"+h;case"array":p="p"+f+p;var g="l"+o,b="a"+f;if(e.arrayBlockIndices[f]===0)s.count===1?r[f]==="generic"?s.lvalue?(i.push(["var ",g,"=",b,".get(",p,")"].join("")),n=n.replace(c,g),u.push([b,".set(",p,",",g,")"].join(""))):n=n.replace(c,[b,".get(",p,")"].join("")):n=n.replace(c,[b,"[",p,"]"].join("")):r[f]==="generic"?(i.push(["var ",g,"=",b,".get(",p,")"].join("")),n=n.replace(c,g),s.lvalue&&u.push([b,".set(",p,",",g,")"].join(""))):(i.push(["var ",g,"=",b,"[",p,"]"].join("")),n=n.replace(c,g),s.lvalue&&u.push([b,"[",p,"]=",g].join("")));else{for(var m=[s.name],_=[p],D=0;D<Math.abs(e.arrayBlockIndices[f]);D++)m.push("\\s*\\[([^\\]]+)\\]"),_.push("$"+(D+1)+"*t"+f+"b"+D);if(c=new RegExp(m.join(""),"g"),p=_.join("+"),r[f]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(c,[b,"[",p,"]"].join(""))}break;case"scalar":n=n.replace(c,"Y"+e.scalarArgs.indexOf(o));break;case"index":n=n.replace(c,"index");break;case"shape":n=n.replace(c,"shape");break}}}return[i.join(`
`),n,u.join(`
`)].join(`
`).trim()}function kC(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],u=i.match(/\d+/);u?u=u[0]:u="",i.charAt(0)===0?e[n]="u"+i.charAt(1)+u:e[n]=i.charAt(0)+u,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}function IC(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,n=new Array(t.arrayArgs.length),i=new Array(t.arrayArgs.length),u=0;u<t.arrayArgs.length;++u)i[u]=e[2*u],n[u]=e[2*u+1];for(var o=[],s=[],c=[],p=[],f=[],u=0;u<t.arrayArgs.length;++u){t.arrayBlockIndices[u]<0?(c.push(0),p.push(r),o.push(r),s.push(r+t.arrayBlockIndices[u])):(c.push(t.arrayBlockIndices[u]),p.push(t.arrayBlockIndices[u]+r),o.push(0),s.push(t.arrayBlockIndices[u]));for(var h=[],d=0;d<n[u].length;d++)c[u]<=n[u][d]&&n[u][d]<p[u]&&h.push(n[u][d]-c[u]);f.push(h)}for(var g=["SS"],b=["'use strict'"],m=[],d=0;d<r;++d)m.push(["s",d,"=SS[",d,"]"].join(""));for(var u=0;u<t.arrayArgs.length;++u){g.push("a"+u),g.push("t"+u),g.push("p"+u);for(var d=0;d<r;++d)m.push(["t",u,"p",d,"=t",u,"[",c[u]+d,"]"].join(""));for(var d=0;d<Math.abs(t.arrayBlockIndices[u]);++d)m.push(["t",u,"b",d,"=t",u,"[",o[u]+d,"]"].join(""))}for(var u=0;u<t.scalarArgs.length;++u)g.push("Y"+u);if(t.shapeArgs.length>0&&m.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var _=new Array(r),u=0;u<r;++u)_[u]="0";m.push(["index=[",_.join(","),"]"].join(""))}for(var u=0;u<t.offsetArgs.length;++u){for(var D=t.offsetArgs[u],C=[],d=0;d<D.offset.length;++d)D.offset[d]!==0&&(D.offset[d]===1?C.push(["t",D.array,"p",d].join("")):C.push([D.offset[d],"*t",D.array,"p",d].join("")));C.length===0?m.push("q"+u+"=0"):m.push(["q",u,"=",C.join("+")].join(""))}var A=MC([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));m=m.concat(A),m.length>0&&b.push("var "+m.join(","));for(var u=0;u<t.arrayArgs.length;++u)b.push("p"+u+"|=0");t.pre.body.length>3&&b.push(ml(t.pre,t,i));var S=ml(t.body,t,i),E=TC(f);E<r?b.push(PC(E,f[0],t,S)):b.push(u1(f[0],t,S)),t.post.body.length>3&&b.push(ml(t.post,t,i)),t.debug&&console.log("-----Generated cwise routine for ",e,`:
`+b.join(`
`)+`
----------`);var B=[t.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",E,kC(i)].join(""),P=new Function(["function ",B,"(",g.join(","),"){",b.join(`
`),"} return ",B].join(""));return P()}var xC=IC,NC=xC;function RC(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var i=[],u=[],o=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],s=[],c=[],p=0;p<t.arrayArgs.length;++p){var f=t.arrayArgs[p];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),i.push("t"+f),i.push("r"+f),u.push("t"+f),u.push("r"+f+".join()"),o.push("array"+f+".data"),o.push("array"+f+".stride"),o.push("array"+f+".offset|0"),p>0&&(s.push("array"+t.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[p]))),c.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[p])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var p=0;p<t.scalarArgs.length;++p)o.push("scalar"+t.scalarArgs[p]);r.push(["type=[",u.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",o.join(","),")}"].join("")),t.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var h=new Function("compile",e.join(`
`));return h(NC.bind(void 0,t))}var LC=RC,UC=LC;function VC(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function jC(t){var e=new VC;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var n=0;n<r.length;++n){var i=r[n];if(i==="array"||typeof i=="object"&&i.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(i==="scalar")e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if(i==="index"){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(i==="shape"){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof i=="object"&&i.offset)e.argTypes[n]="offset",e.offsetArgs.push({array:i.array,offset:i.offset}),e.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+r[n])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,UC(e)}var kf=jC;(function(t){var e=kf,r={body:"",args:[],thisVars:[],localVars:[]};function n(d){if(!d)return r;for(var g=0;g<d.args.length;++g){var b=d.args[g];g===0?d.args[g]={name:b,lvalue:!0,rvalue:!!d.rvalue,count:d.count||1}:d.args[g]={name:b,lvalue:!1,rvalue:!0,count:1}}return d.thisVars||(d.thisVars=[]),d.localVars||(d.localVars=[]),d}function i(d){return e({args:d.args,pre:n(d.pre),body:n(d.body),post:n(d.proc),funcName:d.funcName})}function u(d){for(var g=[],b=0;b<d.args.length;++b)g.push("a"+b);var m=new Function("P",["return function ",d.funcName,"_ndarrayops(",g.join(","),") {P(",g.join(","),");return a0}"].join(""));return m(i(d))}var o={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var d in o){var g=o[d];t[d]=u({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:d}),t[d+"eq"]=u({args:["array","array"],body:{args:["a","b"],body:"a"+g+"=b"},rvalue:!0,funcName:d+"eq"}),t[d+"s"]=u({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:d+"s"}),t[d+"seq"]=u({args:["array","scalar"],body:{args:["a","s"],body:"a"+g+"=s"},rvalue:!0,funcName:d+"seq"})}})();var s={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var d in s){var g=s[d];t[d]=u({args:["array","array"],body:{args:["a","b"],body:"a="+g+"b"},funcName:d}),t[d+"eq"]=u({args:["array"],body:{args:["a"],body:"a="+g+"a"},rvalue:!0,count:2,funcName:d+"eq"})}})();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var d in c){var g=c[d];t[d]=u({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:d}),t[d+"s"]=u({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:d+"s"}),t[d+"eq"]=u({args:["array","array"],body:{args:["a","b"],body:"a=a"+g+"b"},rvalue:!0,count:2,funcName:d+"eq"}),t[d+"seq"]=u({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+g+"s"},rvalue:!0,count:2,funcName:d+"seq"})}})();var p=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var d=0;d<p.length;++d){var g=p[d];t[g]=u({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:g}),t[g+"eq"]=u({args:["array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"})}})();var f=["max","min","atan2","pow"];(function(){for(var d=0;d<f.length;++d){var g=f[d];t[g]=u({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g}),t[g+"s"]=u({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g+"s"}),t[g+"eq"]=u({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"}),t[g+"seq"]=u({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"seq"})}})();var h=["atan2","pow"];(function(){for(var d=0;d<h.length;++d){var g=h[d];t[g+"op"]=u({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"op"}),t[g+"ops"]=u({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"ops"}),t[g+"opeq"]=u({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opeq"}),t[g+"opseq"]=u({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opseq"})}})(),t.any=e({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=e({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=u({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=u({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=u({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=e({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(Ys);var qC=kf({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64}),q0=Eu,zC=qC,WC=function(e,r){for(var n=[],i=e,u=1;Array.isArray(i);)n.push(i.length),u*=i.length,i=i[0];return n.length===0?q0():(r||(r=q0(new Float64Array(u),n)),zC(r,e),r)};function a1(t,e,r){var n=t[r]|0;if(n<=0)return[];var i=new Array(n),u;if(r===t.length-1)for(u=0;u<n;++u)i[u]=e;else for(u=0;u<n;++u)i[u]=a1(t,e,r+1);return i}function HC(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function GC(t,e){switch(typeof e>"u"&&(e=0),typeof t){case"number":if(t>0)return HC(t|0,e);break;case"object":if(typeof t.length=="number")return a1(t,e,0);break}return[]}var $C=GC,s1={};(function(t){(function(e,r){r(t)})(dr,function(e){var r,n,i,u,o,s,c,p,f,h,d,g,b,m,_,D,C,A;r={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},n={},n[r.BooleanLiteral]="Boolean",n[r.EOF]="<end>",n[r.Identifier]="Identifier",n[r.Keyword]="Keyword",n[r.NullLiteral]="Null",n[r.NumericLiteral]="Numeric",n[r.Punctuator]="Punctuator",n[r.StringLiteral]="String",n[r.RegularExpression]="RegularExpression",i=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],u={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},o={Data:1,Get:2,Set:4},s={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},c={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function S(y,F){if(!y)throw new Error("ASSERT: "+F)}function E(y){return y>=48&&y<=57}function B(y){return"0123456789abcdefABCDEF".indexOf(y)>=0}function P(y){return"01234567".indexOf(y)>=0}function T(y){return y===32||y===9||y===11||y===12||y===160||y>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(y)>=0}function N(y){return y===10||y===13||y===8232||y===8233}function G(y){return y===36||y===95||y>=65&&y<=90||y>=97&&y<=122||y===92||y>=128&&c.NonAsciiIdentifierStart.test(String.fromCharCode(y))}function re(y){return y===36||y===95||y>=65&&y<=90||y>=97&&y<=122||y>=48&&y<=57||y===92||y>=128&&c.NonAsciiIdentifierPart.test(String.fromCharCode(y))}function z(y){switch(y){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function Y(y){switch(y){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function V(y){return y==="eval"||y==="arguments"}function U(y){if(h&&Y(y))return!0;switch(y.length){case 2:return y==="if"||y==="in"||y==="do";case 3:return y==="var"||y==="for"||y==="new"||y==="try"||y==="let";case 4:return y==="this"||y==="else"||y==="case"||y==="void"||y==="with"||y==="enum";case 5:return y==="while"||y==="break"||y==="catch"||y==="throw"||y==="const"||y==="yield"||y==="class"||y==="super";case 6:return y==="return"||y==="typeof"||y==="delete"||y==="switch"||y==="export"||y==="import";case 7:return y==="default"||y==="finally"||y==="extends";case 8:return y==="function"||y==="continue"||y==="debugger";case 10:return y==="instanceof";default:return!1}}function q(y,F,L,ne,pe){var Pe;S(typeof L=="number","Comment must have valid position"),!(C.lastCommentStart>=L)&&(C.lastCommentStart=L,Pe={type:y,value:F},A.range&&(Pe.range=[L,ne]),A.loc&&(Pe.loc=pe),A.comments.push(Pe),A.attachComment&&(A.leadingComments.push(Pe),A.trailingComments.push(Pe)))}function J(y){var F,L,ne,pe;for(F=d-y,L={start:{line:g,column:d-b-y}};d<m;)if(ne=f.charCodeAt(d),++d,N(ne)){A.comments&&(pe=f.slice(F+y,d-1),L.end={line:g,column:d-b-1},q("Line",pe,F,d-1,L)),ne===13&&f.charCodeAt(d)===10&&++d,++g,b=d;return}A.comments&&(pe=f.slice(F+y,d),L.end={line:g,column:d-b},q("Line",pe,F,d,L))}function Z(){var y,F,L,ne;for(A.comments&&(y=d-2,F={start:{line:g,column:d-b-2}});d<m;)if(L=f.charCodeAt(d),N(L))L===13&&f.charCodeAt(d+1)===10&&++d,++g,++d,b=d,d>=m&&H({},s.UnexpectedToken,"ILLEGAL");else if(L===42){if(f.charCodeAt(d+1)===47){++d,++d,A.comments&&(ne=f.slice(y+2,d-2),F.end={line:g,column:d-b},q("Block",ne,y,d,F));return}++d}else++d;H({},s.UnexpectedToken,"ILLEGAL")}function X(){var y,F;for(F=d===0;d<m;)if(y=f.charCodeAt(d),T(y))++d;else if(N(y))++d,y===13&&f.charCodeAt(d)===10&&++d,++g,b=d,F=!0;else if(y===47)if(y=f.charCodeAt(d+1),y===47)++d,++d,J(2),F=!0;else if(y===42)++d,++d,Z();else break;else if(F&&y===45)if(f.charCodeAt(d+1)===45&&f.charCodeAt(d+2)===62)d+=3,J(3);else break;else if(y===60)if(f.slice(d+1,d+4)==="!--")++d,++d,++d,++d,J(4);else break;else break}function le(y){var F,L,ne,pe=0;for(L=y==="u"?4:2,F=0;F<L;++F)if(d<m&&B(f[d]))ne=f[d++],pe=pe*16+"0123456789abcdef".indexOf(ne.toLowerCase());else return"";return String.fromCharCode(pe)}function ge(){var y,F;for(y=f.charCodeAt(d++),F=String.fromCharCode(y),y===92&&(f.charCodeAt(d)!==117&&H({},s.UnexpectedToken,"ILLEGAL"),++d,y=le("u"),(!y||y==="\\"||!G(y.charCodeAt(0)))&&H({},s.UnexpectedToken,"ILLEGAL"),F=y);d<m&&(y=f.charCodeAt(d),!!re(y));)++d,F+=String.fromCharCode(y),y===92&&(F=F.substr(0,F.length-1),f.charCodeAt(d)!==117&&H({},s.UnexpectedToken,"ILLEGAL"),++d,y=le("u"),(!y||y==="\\"||!re(y.charCodeAt(0)))&&H({},s.UnexpectedToken,"ILLEGAL"),F+=y);return F}function Ee(){var y,F;for(y=d++;d<m;){if(F=f.charCodeAt(d),F===92)return d=y,ge();if(re(F))++d;else break}return f.slice(y,d)}function ye(){var y,F,L;return y=d,F=f.charCodeAt(d)===92?ge():Ee(),F.length===1?L=r.Identifier:U(F)?L=r.Keyword:F==="null"?L=r.NullLiteral:F==="true"||F==="false"?L=r.BooleanLiteral:L=r.Identifier,{type:L,value:F,lineNumber:g,lineStart:b,start:y,end:d}}function Oe(){var y=d,F=f.charCodeAt(d),L,ne=f[d],pe,Pe,gt;switch(F){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++d,A.tokenize&&(F===40?A.openParenToken=A.tokens.length:F===123&&(A.openCurlyToken=A.tokens.length)),{type:r.Punctuator,value:String.fromCharCode(F),lineNumber:g,lineStart:b,start:y,end:d};default:if(L=f.charCodeAt(d+1),L===61)switch(F){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return d+=2,{type:r.Punctuator,value:String.fromCharCode(F)+String.fromCharCode(L),lineNumber:g,lineStart:b,start:y,end:d};case 33:case 61:return d+=2,f.charCodeAt(d)===61&&++d,{type:r.Punctuator,value:f.slice(y,d),lineNumber:g,lineStart:b,start:y,end:d}}}if(gt=f.substr(d,4),gt===">>>=")return d+=4,{type:r.Punctuator,value:gt,lineNumber:g,lineStart:b,start:y,end:d};if(Pe=gt.substr(0,3),Pe===">>>"||Pe==="<<="||Pe===">>=")return d+=3,{type:r.Punctuator,value:Pe,lineNumber:g,lineStart:b,start:y,end:d};if(pe=Pe.substr(0,2),ne===pe[1]&&"+-<>&|".indexOf(ne)>=0||pe==="=>")return d+=2,{type:r.Punctuator,value:pe,lineNumber:g,lineStart:b,start:y,end:d};if("<>=!+-*%&|^/".indexOf(ne)>=0)return++d,{type:r.Punctuator,value:ne,lineNumber:g,lineStart:b,start:y,end:d};H({},s.UnexpectedToken,"ILLEGAL")}function qe(y){for(var F="";d<m&&B(f[d]);)F+=f[d++];return F.length===0&&H({},s.UnexpectedToken,"ILLEGAL"),G(f.charCodeAt(d))&&H({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt("0x"+F,16),lineNumber:g,lineStart:b,start:y,end:d}}function Ie(y){for(var F="0"+f[d++];d<m&&P(f[d]);)F+=f[d++];return(G(f.charCodeAt(d))||E(f.charCodeAt(d)))&&H({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt(F,8),octal:!0,lineNumber:g,lineStart:b,start:y,end:d}}function tt(){var y,F;for(y=d+1;y<m;++y){if(F=f[y],F==="8"||F==="9")return!1;if(!P(F))return!0}return!0}function He(){var y,F,L;if(L=f[d],S(E(L.charCodeAt(0))||L===".","Numeric literal must start with a decimal digit or a decimal point"),F=d,y="",L!=="."){if(y=f[d++],L=f[d],y==="0"){if(L==="x"||L==="X")return++d,qe(F);if(P(L)&&tt())return Ie(F)}for(;E(f.charCodeAt(d));)y+=f[d++];L=f[d]}if(L==="."){for(y+=f[d++];E(f.charCodeAt(d));)y+=f[d++];L=f[d]}if(L==="e"||L==="E")if(y+=f[d++],L=f[d],(L==="+"||L==="-")&&(y+=f[d++]),E(f.charCodeAt(d)))for(;E(f.charCodeAt(d));)y+=f[d++];else H({},s.UnexpectedToken,"ILLEGAL");return G(f.charCodeAt(d))&&H({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseFloat(y),lineNumber:g,lineStart:b,start:F,end:d}}function Ue(){var y="",F,L,ne,pe,Pe,gt,St=!1,$t,or;for($t=g,or=b,F=f[d],S(F==="'"||F==='"',"String literal must starts with a quote"),L=d,++d;d<m;)if(ne=f[d++],ne===F){F="";break}else if(ne==="\\")if(ne=f[d++],!ne||!N(ne.charCodeAt(0)))switch(ne){case"u":case"x":gt=d,Pe=le(ne),Pe?y+=Pe:(d=gt,y+=ne);break;case"n":y+=`
`;break;case"r":y+="\r";break;case"t":y+="	";break;case"b":y+="\b";break;case"f":y+="\f";break;case"v":y+="\v";break;default:P(ne)?(pe="01234567".indexOf(ne),pe!==0&&(St=!0),d<m&&P(f[d])&&(St=!0,pe=pe*8+"01234567".indexOf(f[d++]),"0123".indexOf(ne)>=0&&d<m&&P(f[d])&&(pe=pe*8+"01234567".indexOf(f[d++]))),y+=String.fromCharCode(pe)):y+=ne;break}else++g,ne==="\r"&&f[d]===`
`&&++d,b=d;else{if(N(ne.charCodeAt(0)))break;y+=ne}return F!==""&&H({},s.UnexpectedToken,"ILLEGAL"),{type:r.StringLiteral,value:y,octal:St,startLineNumber:$t,startLineStart:or,lineNumber:g,lineStart:b,start:L,end:d}}function ze(y,F){var L;try{L=new RegExp(y,F)}catch{H({},s.InvalidRegExp)}return L}function mt(){var y,F,L,ne,pe;for(y=f[d],S(y==="/","Regular expression literal must start with a slash"),F=f[d++],L=!1,ne=!1;d<m;)if(y=f[d++],F+=y,y==="\\")y=f[d++],N(y.charCodeAt(0))&&H({},s.UnterminatedRegExp),F+=y;else if(N(y.charCodeAt(0)))H({},s.UnterminatedRegExp);else if(L)y==="]"&&(L=!1);else if(y==="/"){ne=!0;break}else y==="["&&(L=!0);return ne||H({},s.UnterminatedRegExp),pe=F.substr(1,F.length-2),{value:pe,literal:F}}function ut(){var y,F,L,ne;for(F="",L="";d<m&&(y=f[d],!!re(y.charCodeAt(0)));)if(++d,y==="\\"&&d<m)if(y=f[d],y==="u"){if(++d,ne=d,y=le("u"),y)for(L+=y,F+="\\u";ne<d;++ne)F+=f[ne];else d=ne,L+="u",F+="\\u";te({},s.UnexpectedToken,"ILLEGAL")}else F+="\\",te({},s.UnexpectedToken,"ILLEGAL");else L+=y,F+=y;return{value:L,literal:F}}function lt(){var y,F,L,ne;return D=null,X(),y=d,F=mt(),L=ut(),ne=ze(F.value,L.value),A.tokenize?{type:r.RegularExpression,value:ne,lineNumber:g,lineStart:b,start:y,end:d}:{literal:F.literal+L.literal,value:ne,start:y,end:d}}function at(){var y,F,L,ne;return X(),y=d,F={start:{line:g,column:d-b}},L=lt(),F.end={line:g,column:d-b},A.tokenize||(A.tokens.length>0&&(ne=A.tokens[A.tokens.length-1],ne.range[0]===y&&ne.type==="Punctuator"&&(ne.value==="/"||ne.value==="/=")&&A.tokens.pop()),A.tokens.push({type:"RegularExpression",value:L.literal,range:[y,d],loc:F})),L}function st(y){return y.type===r.Identifier||y.type===r.Keyword||y.type===r.BooleanLiteral||y.type===r.NullLiteral}function Xe(){var y,F;if(y=A.tokens[A.tokens.length-1],!y)return at();if(y.type==="Punctuator"){if(y.value==="]")return Oe();if(y.value===")")return F=A.tokens[A.openParenToken-1],F&&F.type==="Keyword"&&(F.value==="if"||F.value==="while"||F.value==="for"||F.value==="with")?at():Oe();if(y.value==="}"){if(A.tokens[A.openCurlyToken-3]&&A.tokens[A.openCurlyToken-3].type==="Keyword"){if(F=A.tokens[A.openCurlyToken-4],!F)return Oe()}else if(A.tokens[A.openCurlyToken-4]&&A.tokens[A.openCurlyToken-4].type==="Keyword"){if(F=A.tokens[A.openCurlyToken-5],!F)return at()}else return Oe();return i.indexOf(F.value)>=0?Oe():at()}return at()}return y.type==="Keyword"&&y.value!=="this"?at():Oe()}function Je(){var y;return X(),d>=m?{type:r.EOF,lineNumber:g,lineStart:b,start:d,end:d}:(y=f.charCodeAt(d),G(y)?ye():y===40||y===41||y===59?Oe():y===39||y===34?Ue():y===46?E(f.charCodeAt(d+1))?He():Oe():E(y)?He():A.tokenize&&y===47?Xe():Oe())}function Ce(){var y,F,L;return X(),y={start:{line:g,column:d-b}},F=Je(),y.end={line:g,column:d-b},F.type!==r.EOF&&(L=f.slice(F.start,F.end),A.tokens.push({type:n[F.type],value:L,range:[F.start,F.end],loc:y})),F}function Te(){var y;return y=D,d=y.end,g=y.lineNumber,b=y.lineStart,D=typeof A.tokens<"u"?Ce():Je(),d=y.end,g=y.lineNumber,b=y.lineStart,y}function Ot(){var y,F,L;y=d,F=g,L=b,D=typeof A.tokens<"u"?Ce():Je(),d=y,g=F,b=L}function Vt(y,F){this.line=y,this.column=F}function Ht(y,F,L,ne){this.start=new Vt(y,F),this.end=new Vt(L,ne)}p={name:"SyntaxTree",processComment:function(y){var F,L;if(!(y.type===u.Program&&y.body.length>0)){for(A.trailingComments.length>0?A.trailingComments[0].range[0]>=y.range[1]?(L=A.trailingComments,A.trailingComments=[]):A.trailingComments.length=0:A.bottomRightStack.length>0&&A.bottomRightStack[A.bottomRightStack.length-1].trailingComments&&A.bottomRightStack[A.bottomRightStack.length-1].trailingComments[0].range[0]>=y.range[1]&&(L=A.bottomRightStack[A.bottomRightStack.length-1].trailingComments,delete A.bottomRightStack[A.bottomRightStack.length-1].trailingComments);A.bottomRightStack.length>0&&A.bottomRightStack[A.bottomRightStack.length-1].range[0]>=y.range[0];)F=A.bottomRightStack.pop();F?F.leadingComments&&F.leadingComments[F.leadingComments.length-1].range[1]<=y.range[0]&&(y.leadingComments=F.leadingComments,delete F.leadingComments):A.leadingComments.length>0&&A.leadingComments[A.leadingComments.length-1].range[1]<=y.range[0]&&(y.leadingComments=A.leadingComments,A.leadingComments=[]),L&&(y.trailingComments=L),A.bottomRightStack.push(y)}},markEnd:function(y,F){return A.range&&(y.range=[F.start,d]),A.loc&&(y.loc=new Ht(F.startLineNumber===void 0?F.lineNumber:F.startLineNumber,F.start-(F.startLineStart===void 0?F.lineStart:F.startLineStart),g,d-b),this.postProcess(y)),A.attachComment&&this.processComment(y),y},postProcess:function(y){return A.source&&(y.loc.source=A.source),y},createArrayExpression:function(y){return{type:u.ArrayExpression,elements:y}},createAssignmentExpression:function(y,F,L){return{type:u.AssignmentExpression,operator:y,left:F,right:L}},createBinaryExpression:function(y,F,L){var ne=y==="||"||y==="&&"?u.LogicalExpression:u.BinaryExpression;return{type:ne,operator:y,left:F,right:L}},createBlockStatement:function(y){return{type:u.BlockStatement,body:y}},createBreakStatement:function(y){return{type:u.BreakStatement,label:y}},createCallExpression:function(y,F){return{type:u.CallExpression,callee:y,arguments:F}},createCatchClause:function(y,F){return{type:u.CatchClause,param:y,body:F}},createConditionalExpression:function(y,F,L){return{type:u.ConditionalExpression,test:y,consequent:F,alternate:L}},createContinueStatement:function(y){return{type:u.ContinueStatement,label:y}},createDebuggerStatement:function(){return{type:u.DebuggerStatement}},createDoWhileStatement:function(y,F){return{type:u.DoWhileStatement,body:y,test:F}},createEmptyStatement:function(){return{type:u.EmptyStatement}},createExpressionStatement:function(y){return{type:u.ExpressionStatement,expression:y}},createForStatement:function(y,F,L,ne){return{type:u.ForStatement,init:y,test:F,update:L,body:ne}},createForInStatement:function(y,F,L){return{type:u.ForInStatement,left:y,right:F,body:L,each:!1}},createFunctionDeclaration:function(y,F,L,ne){return{type:u.FunctionDeclaration,id:y,params:F,defaults:L,body:ne,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(y,F,L,ne){return{type:u.FunctionExpression,id:y,params:F,defaults:L,body:ne,rest:null,generator:!1,expression:!1}},createIdentifier:function(y){return{type:u.Identifier,name:y}},createIfStatement:function(y,F,L){return{type:u.IfStatement,test:y,consequent:F,alternate:L}},createLabeledStatement:function(y,F){return{type:u.LabeledStatement,label:y,body:F}},createLiteral:function(y){return{type:u.Literal,value:y.value,raw:f.slice(y.start,y.end)}},createMemberExpression:function(y,F,L){return{type:u.MemberExpression,computed:y==="[",object:F,property:L}},createNewExpression:function(y,F){return{type:u.NewExpression,callee:y,arguments:F}},createObjectExpression:function(y){return{type:u.ObjectExpression,properties:y}},createPostfixExpression:function(y,F){return{type:u.UpdateExpression,operator:y,argument:F,prefix:!1}},createProgram:function(y){return{type:u.Program,body:y}},createProperty:function(y,F,L){return{type:u.Property,key:F,value:L,kind:y}},createReturnStatement:function(y){return{type:u.ReturnStatement,argument:y}},createSequenceExpression:function(y){return{type:u.SequenceExpression,expressions:y}},createSwitchCase:function(y,F){return{type:u.SwitchCase,test:y,consequent:F}},createSwitchStatement:function(y,F){return{type:u.SwitchStatement,discriminant:y,cases:F}},createThisExpression:function(){return{type:u.ThisExpression}},createThrowStatement:function(y){return{type:u.ThrowStatement,argument:y}},createTryStatement:function(y,F,L,ne){return{type:u.TryStatement,block:y,guardedHandlers:F,handlers:L,finalizer:ne}},createUnaryExpression:function(y,F){return y==="++"||y==="--"?{type:u.UpdateExpression,operator:y,argument:F,prefix:!0}:{type:u.UnaryExpression,operator:y,argument:F,prefix:!0}},createVariableDeclaration:function(y,F){return{type:u.VariableDeclaration,declarations:y,kind:F}},createVariableDeclarator:function(y,F){return{type:u.VariableDeclarator,id:y,init:F}},createWhileStatement:function(y,F){return{type:u.WhileStatement,test:y,body:F}},createWithStatement:function(y,F){return{type:u.WithStatement,object:y,body:F}}};function j(){var y,F,L,ne;return y=d,F=g,L=b,X(),ne=g!==F,d=y,g=F,b=L,ne}function H(y,F){var L,ne=Array.prototype.slice.call(arguments,2),pe=F.replace(/%(\d)/g,function(Pe,gt){return S(gt<ne.length,"Message reference must be in range"),ne[gt]});throw typeof y.lineNumber=="number"?(L=new Error("Line "+y.lineNumber+": "+pe),L.index=y.start,L.lineNumber=y.lineNumber,L.column=y.start-b+1):(L=new Error("Line "+g+": "+pe),L.index=d,L.lineNumber=g,L.column=d-b+1),L.description=pe,L}function te(){try{H.apply(null,arguments)}catch(y){if(A.errors)A.errors.push(y);else throw y}}function fe(y){if(y.type===r.EOF&&H(y,s.UnexpectedEOS),y.type===r.NumericLiteral&&H(y,s.UnexpectedNumber),y.type===r.StringLiteral&&H(y,s.UnexpectedString),y.type===r.Identifier&&H(y,s.UnexpectedIdentifier),y.type===r.Keyword){if(z(y.value))H(y,s.UnexpectedReserved);else if(h&&Y(y.value)){te(y,s.StrictReservedWord);return}H(y,s.UnexpectedToken,y.value)}H(y,s.UnexpectedToken,y.value)}function ae(y){var F=Te();(F.type!==r.Punctuator||F.value!==y)&&fe(F)}function he(y){var F=Te();(F.type!==r.Keyword||F.value!==y)&&fe(F)}function se(y){return D.type===r.Punctuator&&D.value===y}function ce(y){return D.type===r.Keyword&&D.value===y}function we(){var y;return D.type!==r.Punctuator?!1:(y=D.value,y==="="||y==="*="||y==="/="||y==="%="||y==="+="||y==="-="||y==="<<="||y===">>="||y===">>>="||y==="&="||y==="^="||y==="|=")}function Re(){var y,F=d,L=g,ne=b,pe=D;if(f.charCodeAt(d)===59||se(";")){Te();return}if(y=g,X(),g!==y){d=F,g=L,b=ne,D=pe;return}D.type!==r.EOF&&!se("}")&&fe(D)}function rt(y){return y.type===u.Identifier||y.type===u.MemberExpression}function Be(){var y=[],F;for(F=D,ae("[");!se("]");)se(",")?(Te(),y.push(null)):(y.push(Fr()),se("]")||ae(","));return Te(),_.markEnd(_.createArrayExpression(y),F)}function zt(y,F){var L,ne,pe;return L=h,pe=D,ne=Ri(),F&&h&&V(y[0].name)&&te(F,s.StrictParamName),h=L,_.markEnd(_.createFunctionExpression(null,y,[],ne),pe)}function xt(){var y,F;return F=D,y=Te(),y.type===r.StringLiteral||y.type===r.NumericLiteral?(h&&y.octal&&te(y,s.StrictOctalLiteral),_.markEnd(_.createLiteral(y),F)):_.markEnd(_.createIdentifier(y.value),F)}function rr(){var y,F,L,ne,pe,Pe;if(y=D,Pe=D,y.type===r.Identifier)return L=xt(),y.value==="get"&&!se(":")?(F=xt(),ae("("),ae(")"),ne=zt([]),_.markEnd(_.createProperty("get",F,ne),Pe)):y.value==="set"&&!se(":")?(F=xt(),ae("("),y=D,y.type!==r.Identifier?(ae(")"),te(y,s.UnexpectedToken,y.value),ne=zt([])):(pe=[pn()],ae(")"),ne=zt(pe,y)),_.markEnd(_.createProperty("set",F,ne),Pe)):(ae(":"),ne=Fr(),_.markEnd(_.createProperty("init",L,ne),Pe));if(y.type===r.EOF||y.type===r.Punctuator)fe(y);else return F=xt(),ae(":"),ne=Fr(),_.markEnd(_.createProperty("init",F,ne),Pe)}function Zt(){var y=[],F,L,ne,pe,Pe={},gt=String,St;for(St=D,ae("{");!se("}");)F=rr(),F.key.type===u.Identifier?L=F.key.name:L=gt(F.key.value),pe=F.kind==="init"?o.Data:F.kind==="get"?o.Get:o.Set,ne="$"+L,Object.prototype.hasOwnProperty.call(Pe,ne)?(Pe[ne]===o.Data?h&&pe===o.Data?te({},s.StrictDuplicateProperty):pe!==o.Data&&te({},s.AccessorDataProperty):pe===o.Data?te({},s.AccessorDataProperty):Pe[ne]&pe&&te({},s.AccessorGetSet),Pe[ne]|=pe):Pe[ne]=pe,y.push(F),se("}")||ae(",");return ae("}"),_.markEnd(_.createObjectExpression(y),St)}function _r(){var y;return ae("("),y=nr(),ae(")"),y}function Xt(){var y,F,L,ne;if(se("("))return _r();if(se("["))return Be();if(se("{"))return Zt();if(y=D.type,ne=D,y===r.Identifier)L=_.createIdentifier(Te().value);else if(y===r.StringLiteral||y===r.NumericLiteral)h&&D.octal&&te(D,s.StrictOctalLiteral),L=_.createLiteral(Te());else if(y===r.Keyword){if(ce("function"))return Li();ce("this")?(Te(),L=_.createThisExpression()):fe(Te())}else y===r.BooleanLiteral?(F=Te(),F.value=F.value==="true",L=_.createLiteral(F)):y===r.NullLiteral?(F=Te(),F.value=null,L=_.createLiteral(F)):se("/")||se("/=")?(typeof A.tokens<"u"?L=_.createLiteral(at()):L=_.createLiteral(lt()),Ot()):fe(Te());return _.markEnd(L,ne)}function Dr(){var y=[];if(ae("("),!se(")"))for(;d<m&&(y.push(Fr()),!se(")"));)ae(",");return ae(")"),y}function cr(){var y,F;return F=D,y=Te(),st(y)||fe(y),_.markEnd(_.createIdentifier(y.value),F)}function hr(){return ae("."),cr()}function dn(){var y;return ae("["),y=nr(),ae("]"),y}function pr(){var y,F,L;return L=D,he("new"),y=Zn(),F=se("(")?Dr():[],_.markEnd(_.createNewExpression(y,F),L)}function Bn(){var y,F,L,ne,pe=C.allowIn;for(ne=D,C.allowIn=!0,y=ce("new")?pr():Xt();;){if(se("."))L=hr(),y=_.createMemberExpression(".",y,L);else if(se("("))F=Dr(),y=_.createCallExpression(y,F);else if(se("["))L=dn(),y=_.createMemberExpression("[",y,L);else break;_.markEnd(y,ne)}return C.allowIn=pe,y}function Zn(){var y,F,L;for(S(C.allowIn,"callee of new expression always allow in keyword."),L=D,y=ce("new")?pr():Xt();se(".")||se("[");)se("[")?(F=dn(),y=_.createMemberExpression("[",y,F)):(F=hr(),y=_.createMemberExpression(".",y,F)),_.markEnd(y,L);return y}function Ln(){var y,F,L=D;return y=Bn(),D.type===r.Punctuator&&(se("++")||se("--"))&&!j()&&(h&&y.type===u.Identifier&&V(y.name)&&te({},s.StrictLHSPostfix),rt(y)||te({},s.InvalidLHSInAssignment),F=Te(),y=_.markEnd(_.createPostfixExpression(F.value,y),L)),y}function Un(){var y,F,L;return D.type!==r.Punctuator&&D.type!==r.Keyword?F=Ln():se("++")||se("--")?(L=D,y=Te(),F=Un(),h&&F.type===u.Identifier&&V(F.name)&&te({},s.StrictLHSPrefix),rt(F)||te({},s.InvalidLHSInAssignment),F=_.createUnaryExpression(y.value,F),F=_.markEnd(F,L)):se("+")||se("-")||se("~")||se("!")?(L=D,y=Te(),F=Un(),F=_.createUnaryExpression(y.value,F),F=_.markEnd(F,L)):ce("delete")||ce("void")||ce("typeof")?(L=D,y=Te(),F=Un(),F=_.createUnaryExpression(y.value,F),F=_.markEnd(F,L),h&&F.operator==="delete"&&F.argument.type===u.Identifier&&te({},s.StrictDelete)):F=Ln(),F}function Zi(y,F){var L=0;if(y.type!==r.Punctuator&&y.type!==r.Keyword)return 0;switch(y.value){case"||":L=1;break;case"&&":L=2;break;case"|":L=3;break;case"^":L=4;break;case"&":L=5;break;case"==":case"!=":case"===":case"!==":L=6;break;case"<":case">":case"<=":case">=":case"instanceof":L=7;break;case"in":L=F?7:0;break;case"<<":case">>":case">>>":L=8;break;case"+":case"-":L=9;break;case"*":case"/":case"%":L=11;break}return L}function xi(){var y,F,L,ne,pe,Pe,gt,St,$t,or;if(y=D,$t=Un(),ne=D,pe=Zi(ne,C.allowIn),pe===0)return $t;for(ne.prec=pe,Te(),F=[y,D],gt=Un(),Pe=[$t,ne,gt];(pe=Zi(D,C.allowIn))>0;){for(;Pe.length>2&&pe<=Pe[Pe.length-2].prec;)gt=Pe.pop(),St=Pe.pop().value,$t=Pe.pop(),L=_.createBinaryExpression(St,$t,gt),F.pop(),y=F[F.length-1],_.markEnd(L,y),Pe.push(L);ne=Te(),ne.prec=pe,Pe.push(ne),F.push(D),L=Un(),Pe.push(L)}for(or=Pe.length-1,L=Pe[or],F.pop();or>1;)L=_.createBinaryExpression(Pe[or-1].value,Pe[or-2],L),or-=2,y=F.pop(),_.markEnd(L,y);return L}function Cu(){var y,F,L,ne,pe;return pe=D,y=xi(),se("?")&&(Te(),F=C.allowIn,C.allowIn=!0,L=Fr(),C.allowIn=F,ae(":"),ne=Fr(),y=_.createConditionalExpression(y,L,ne),_.markEnd(y,pe)),y}function Fr(){var y,F,L,ne,pe;return y=D,pe=D,ne=F=Cu(),we()&&(rt(F)||te({},s.InvalidLHSInAssignment),h&&F.type===u.Identifier&&V(F.name)&&te(y,s.StrictLHSAssignment),y=Te(),L=Fr(),ne=_.markEnd(_.createAssignmentExpression(y.value,F,L),pe)),ne}function nr(){var y,F=D;if(y=Fr(),se(",")){for(y=_.createSequenceExpression([y]);d<m&&se(",");)Te(),y.expressions.push(Fr());_.markEnd(y,F)}return y}function Fu(){for(var y=[],F;d<m&&!(se("}")||(F=On(),typeof F>"u"));)y.push(F);return y}function ci(){var y,F;return F=D,ae("{"),y=Fu(),ae("}"),_.markEnd(_.createBlockStatement(y),F)}function pn(){var y,F;return F=D,y=Te(),y.type!==r.Identifier&&fe(y),_.markEnd(_.createIdentifier(y.value),F)}function Xn(y){var F=null,L,ne;return ne=D,L=pn(),h&&V(L.name)&&te({},s.StrictVarName),y==="const"?(ae("="),F=Fr()):se("=")&&(Te(),F=Fr()),_.markEnd(_.createVariableDeclarator(L,F),ne)}function Ni(y){var F=[];do{if(F.push(Xn(y)),!se(","))break;Te()}while(d<m);return F}function Su(){var y;return he("var"),y=Ni(),Re(),_.createVariableDeclaration(y,"var")}function Bu(y){var F,L;return L=D,he(y),F=Ni(y),Re(),_.markEnd(_.createVariableDeclaration(F,y),L)}function Xi(){return ae(";"),_.createEmptyStatement()}function Ou(){var y=nr();return Re(),_.createExpressionStatement(y)}function Mu(){var y,F,L;return he("if"),ae("("),y=nr(),ae(")"),F=qr(),ce("else")?(Te(),L=qr()):L=null,_.createIfStatement(y,F,L)}function Pu(){var y,F,L;return he("do"),L=C.inIteration,C.inIteration=!0,y=qr(),C.inIteration=L,he("while"),ae("("),F=nr(),ae(")"),se(";")&&Te(),_.createDoWhileStatement(y,F)}function Tu(){var y,F,L;return he("while"),ae("("),y=nr(),ae(")"),L=C.inIteration,C.inIteration=!0,F=qr(),C.inIteration=L,_.createWhileStatement(y,F)}function ku(){var y,F,L;return L=D,y=Te(),F=Ni(),_.markEnd(_.createVariableDeclaration(F,y.value),L)}function Iu(){var y,F,L,ne,pe,Pe,gt,St=C.allowIn;return y=F=L=null,he("for"),ae("("),se(";")?Te():(ce("var")||ce("let")?(C.allowIn=!1,y=ku(),C.allowIn=St,y.declarations.length===1&&ce("in")&&(Te(),ne=y,pe=nr(),y=null)):(C.allowIn=!1,y=nr(),C.allowIn=St,ce("in")&&(rt(y)||te({},s.InvalidLHSInForIn),Te(),ne=y,pe=nr(),y=null)),typeof ne>"u"&&ae(";")),typeof ne>"u"&&(se(";")||(F=nr()),ae(";"),se(")")||(L=nr())),ae(")"),gt=C.inIteration,C.inIteration=!0,Pe=qr(),C.inIteration=gt,typeof ne>"u"?_.createForStatement(y,F,L,Pe):_.createForInStatement(ne,pe,Pe)}function hi(){var y=null,F;return he("continue"),f.charCodeAt(d)===59?(Te(),C.inIteration||H({},s.IllegalContinue),_.createContinueStatement(null)):j()?(C.inIteration||H({},s.IllegalContinue),_.createContinueStatement(null)):(D.type===r.Identifier&&(y=pn(),F="$"+y.name,Object.prototype.hasOwnProperty.call(C.labelSet,F)||H({},s.UnknownLabel,y.name)),Re(),y===null&&!C.inIteration&&H({},s.IllegalContinue),_.createContinueStatement(y))}function xu(){var y=null,F;return he("break"),f.charCodeAt(d)===59?(Te(),C.inIteration||C.inSwitch||H({},s.IllegalBreak),_.createBreakStatement(null)):j()?(C.inIteration||C.inSwitch||H({},s.IllegalBreak),_.createBreakStatement(null)):(D.type===r.Identifier&&(y=pn(),F="$"+y.name,Object.prototype.hasOwnProperty.call(C.labelSet,F)||H({},s.UnknownLabel,y.name)),Re(),y===null&&!(C.inIteration||C.inSwitch)&&H({},s.IllegalBreak),_.createBreakStatement(y))}function di(){var y=null;return he("return"),C.inFunctionBody||te({},s.IllegalReturn),f.charCodeAt(d)===32&&G(f.charCodeAt(d+1))?(y=nr(),Re(),_.createReturnStatement(y)):j()?_.createReturnStatement(null):(se(";")||!se("}")&&D.type!==r.EOF&&(y=nr()),Re(),_.createReturnStatement(y))}function Nu(){var y,F;return h&&(X(),te({},s.StrictModeWith)),he("with"),ae("("),y=nr(),ae(")"),F=qr(),_.createWithStatement(y,F)}function Ru(){var y,F=[],L,ne;for(ne=D,ce("default")?(Te(),y=null):(he("case"),y=nr()),ae(":");d<m&&!(se("}")||ce("default")||ce("case"));)L=qr(),F.push(L);return _.markEnd(_.createSwitchCase(y,F),ne)}function Lu(){var y,F,L,ne,pe;if(he("switch"),ae("("),y=nr(),ae(")"),ae("{"),F=[],se("}"))return Te(),_.createSwitchStatement(y,F);for(ne=C.inSwitch,C.inSwitch=!0,pe=!1;d<m&&!se("}");)L=Ru(),L.test===null&&(pe&&H({},s.MultipleDefaultsInSwitch),pe=!0),F.push(L);return C.inSwitch=ne,ae("}"),_.createSwitchStatement(y,F)}function Ji(){var y;return he("throw"),j()&&H({},s.NewlineAfterThrow),y=nr(),Re(),_.createThrowStatement(y)}function Vn(){var y,F,L;return L=D,he("catch"),ae("("),se(")")&&fe(D),y=pn(),h&&V(y.name)&&te({},s.StrictCatchVariable),ae(")"),F=ci(),_.markEnd(_.createCatchClause(y,F),L)}function br(){var y,F=[],L=null;return he("try"),y=ci(),ce("catch")&&F.push(Vn()),ce("finally")&&(Te(),L=ci()),F.length===0&&!L&&H({},s.NoCatchOrFinally),_.createTryStatement(y,[],F,L)}function sr(){return he("debugger"),Re(),_.createDebuggerStatement()}function qr(){var y=D.type,F,L,ne,pe;if(y===r.EOF&&fe(D),y===r.Punctuator&&D.value==="{")return ci();if(pe=D,y===r.Punctuator)switch(D.value){case";":return _.markEnd(Xi(),pe);case"(":return _.markEnd(Ou(),pe)}if(y===r.Keyword)switch(D.value){case"break":return _.markEnd(xu(),pe);case"continue":return _.markEnd(hi(),pe);case"debugger":return _.markEnd(sr(),pe);case"do":return _.markEnd(Pu(),pe);case"for":return _.markEnd(Iu(),pe);case"function":return _.markEnd(jn(),pe);case"if":return _.markEnd(Mu(),pe);case"return":return _.markEnd(di(),pe);case"switch":return _.markEnd(Lu(),pe);case"throw":return _.markEnd(Ji(),pe);case"try":return _.markEnd(br(),pe);case"var":return _.markEnd(Su(),pe);case"while":return _.markEnd(Tu(),pe);case"with":return _.markEnd(Nu(),pe)}return F=nr(),F.type===u.Identifier&&se(":")?(Te(),ne="$"+F.name,Object.prototype.hasOwnProperty.call(C.labelSet,ne)&&H({},s.Redeclaration,"Label",F.name),C.labelSet[ne]=!0,L=qr(),delete C.labelSet[ne],_.markEnd(_.createLabeledStatement(F,L),pe)):(Re(),_.markEnd(_.createExpressionStatement(F),pe))}function Ri(){var y,F=[],L,ne,pe,Pe,gt,St,$t,or;for(or=D,ae("{");d<m&&!(D.type!==r.StringLiteral||(L=D,y=On(),F.push(y),y.expression.type!==u.Literal));)ne=f.slice(L.start+1,L.end-1),ne==="use strict"?(h=!0,pe&&te(pe,s.StrictOctalLiteral)):!pe&&L.octal&&(pe=L);for(Pe=C.labelSet,gt=C.inIteration,St=C.inSwitch,$t=C.inFunctionBody,C.labelSet={},C.inIteration=!1,C.inSwitch=!1,C.inFunctionBody=!0;d<m&&!(se("}")||(y=On(),typeof y>"u"));)F.push(y);return ae("}"),C.labelSet=Pe,C.inIteration=gt,C.inSwitch=St,C.inFunctionBody=$t,_.markEnd(_.createBlockStatement(F),or)}function Jn(y){var F,L=[],ne,pe,Pe,gt,St;if(ae("("),!se(")"))for(Pe={};d<m&&(ne=D,F=pn(),gt="$"+ne.value,h?(V(ne.value)&&(pe=ne,St=s.StrictParamName),Object.prototype.hasOwnProperty.call(Pe,gt)&&(pe=ne,St=s.StrictParamDupe)):y||(V(ne.value)?(y=ne,St=s.StrictParamName):Y(ne.value)?(y=ne,St=s.StrictReservedWord):Object.prototype.hasOwnProperty.call(Pe,gt)&&(y=ne,St=s.StrictParamDupe)),L.push(F),Pe[gt]=!0,!se(")"));)ae(",");return ae(")"),{params:L,stricted:pe,firstRestricted:y,message:St}}function jn(){var y,F=[],L,ne,pe,Pe,gt,St,$t,or;return or=D,he("function"),ne=D,y=pn(),h?V(ne.value)&&te(ne,s.StrictFunctionName):V(ne.value)?(gt=ne,St=s.StrictFunctionName):Y(ne.value)&&(gt=ne,St=s.StrictReservedWord),Pe=Jn(gt),F=Pe.params,pe=Pe.stricted,gt=Pe.firstRestricted,Pe.message&&(St=Pe.message),$t=h,L=Ri(),h&&gt&&H(gt,St),h&&pe&&te(pe,St),h=$t,_.markEnd(_.createFunctionDeclaration(y,F,[],L),or)}function Li(){var y,F=null,L,ne,pe,Pe,gt=[],St,$t,or;return or=D,he("function"),se("(")||(y=D,F=pn(),h?V(y.value)&&te(y,s.StrictFunctionName):V(y.value)?(ne=y,pe=s.StrictFunctionName):Y(y.value)&&(ne=y,pe=s.StrictReservedWord)),Pe=Jn(ne),gt=Pe.params,L=Pe.stricted,ne=Pe.firstRestricted,Pe.message&&(pe=Pe.message),$t=h,St=Ri(),h&&ne&&H(ne,pe),h&&L&&te(L,pe),h=$t,_.markEnd(_.createFunctionExpression(F,gt,[],St),or)}function On(){if(D.type===r.Keyword)switch(D.value){case"const":case"let":return Bu(D.value);case"function":return jn();default:return qr()}if(D.type!==r.EOF)return qr()}function gn(){for(var y,F=[],L,ne,pe;d<m&&(L=D,!(L.type!==r.StringLiteral||(y=On(),F.push(y),y.expression.type!==u.Literal)));)ne=f.slice(L.start+1,L.end-1),ne==="use strict"?(h=!0,pe&&te(pe,s.StrictOctalLiteral)):!pe&&L.octal&&(pe=L);for(;d<m&&(y=On(),!(typeof y>"u"));)F.push(y);return F}function ro(){var y,F;return X(),Ot(),F=D,h=!1,y=gn(),_.markEnd(_.createProgram(y),F)}function Uu(){var y,F,L,ne=[];for(y=0;y<A.tokens.length;++y)F=A.tokens[y],L={type:F.type,value:F.value},A.range&&(L.range=F.range),A.loc&&(L.loc=F.loc),ne.push(L);A.tokens=ne}function Qi(y,F){var L,ne,pe;L=String,typeof y!="string"&&!(y instanceof String)&&(y=L(y)),_=p,f=y,d=0,g=f.length>0?1:0,b=0,m=f.length,D=null,C={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},A={},F=F||{},F.tokens=!0,A.tokens=[],A.tokenize=!0,A.openParenToken=-1,A.openCurlyToken=-1,A.range=typeof F.range=="boolean"&&F.range,A.loc=typeof F.loc=="boolean"&&F.loc,typeof F.comment=="boolean"&&F.comment&&(A.comments=[]),typeof F.tolerant=="boolean"&&F.tolerant&&(A.errors=[]);try{if(Ot(),D.type===r.EOF)return A.tokens;for(ne=Te();D.type!==r.EOF;)try{ne=Te()}catch(Pe){if(ne=D,A.errors){A.errors.push(Pe);break}else throw Pe}Uu(),pe=A.tokens,typeof A.comments<"u"&&(pe.comments=A.comments),typeof A.errors<"u"&&(pe.errors=A.errors)}catch(Pe){throw Pe}finally{A={}}return pe}function ha(y,F){var L,ne;ne=String,typeof y!="string"&&!(y instanceof String)&&(y=ne(y)),_=p,f=y,d=0,g=f.length>0?1:0,b=0,m=f.length,D=null,C={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},A={},typeof F<"u"&&(A.range=typeof F.range=="boolean"&&F.range,A.loc=typeof F.loc=="boolean"&&F.loc,A.attachComment=typeof F.attachComment=="boolean"&&F.attachComment,A.loc&&F.source!==null&&F.source!==void 0&&(A.source=ne(F.source)),typeof F.tokens=="boolean"&&F.tokens&&(A.tokens=[]),typeof F.comment=="boolean"&&F.comment&&(A.comments=[]),typeof F.tolerant=="boolean"&&F.tolerant&&(A.errors=[]),A.attachComment&&(A.range=!0,A.comments=[],A.bottomRightStack=[],A.trailingComments=[],A.leadingComments=[]));try{L=ro(),typeof A.comments<"u"&&(L.comments=A.comments),typeof A.tokens<"u"&&(Uu(),L.tokens=A.tokens),typeof A.errors<"u"&&(L.errors=A.errors)}catch(pe){throw pe}finally{A={}}return L}e.version="1.2.5",e.tokenize=Qi,e.parse=ha,e.Syntax=function(){var y,F={};typeof Object.create=="function"&&(F=Object.create(null));for(y in u)u.hasOwnProperty(y)&&(F[y]=u[y]);return typeof Object.freeze=="function"&&Object.freeze(F),F}()})})(s1);var KC=s1,z0=i1,YC=0;function ZC(t,e,r){this.name=t,this.lvalue=e,this.rvalue=r,this.count=0}function XC(t,e,r,n){this.body=t,this.args=e,this.thisVars=r,this.localVars=n}function JC(t){if(t==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?t in window:typeof dr<"u"?t in dr:typeof self<"u"?t in self:!1}function QC(t){for(var e=t.body[0].expression.callee.params,r=new Array(e.length),n=0;n<e.length;++n)r[n]=e[n].name;return r}function eF(t){for(var e=["(",t,")()"].join(""),r=KC.parse(e,{range:!0}),n="_inline_"+YC+++"_",i=QC(r),u=new Array(i.length),o=0;o<i.length;++o)u[o]=new ZC([n,"arg",o,"_"].join(""),!1,!1);for(var s=new Array(e.length),o=0,c=e.length;o<c;++o)s[o]=e.charAt(o);var p=[],f=[];function h(S){var E=n+S.replace(/\_/g,"__");return p.push(E),E}function d(S){var E="this_"+S.replace(/\_/g,"__");return f.push(E),E}function g(S,E){for(var B=S.range[0],P=S.range[1],T=B+1;T<P;++T)s[T]="";s[B]=E}function b(S){return"'"+S.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function m(S){return s.slice(S.range[0],S.range[1]).join("")}var _=1,D=2;function C(S){return S.parent.type==="AssignmentExpression"&&S.parent.left===S?S.parent.operator==="="?_:_|D:S.parent.type==="UpdateExpression"?_|D:D}(function S(E,B){if(E.parent=B,E.type==="MemberExpression")E.computed?(S(E.object,E),S(E.property,E)):E.object.type==="ThisExpression"?g(E,d(E.property.name)):S(E.object,E);else{if(E.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(E.type==="Identifier"){var P=E.name,T=i.indexOf(P);if(T>=0){var N=u[T],G=C(E);G&_&&(N.lvalue=!0),G&D&&(N.rvalue=!0),++N.count,g(E,N.name)}else JC(P)||g(E,h(P))}else if(E.type==="Literal")typeof E.value=="string"&&g(E,b(E.value));else{if(E.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var re=Object.keys(E),z=0,Y=re.length;z<Y;++z)if(re[z]!=="parent"){var V=E[re[z]];if(V)if(V instanceof Array)for(var U=0;U<V.length;++U)V[U]&&typeof V[U].type=="string"&&S(V[U],E);else typeof V.type=="string"&&S(V,E)}}}})(r.body[0].expression.callee.body,void 0),z0(p),z0(f);var A=new XC(m(r.body[0].expression.callee.body),u,f,p);return A}var tF=eF,_l=tF,rF=kf,es=["args","body"],nF=["pre","post","printCode","funcName","blockSize"];function iF(t){for(var e in t)es.indexOf(e)<0&&nF.indexOf(e)<0&&console.warn("cwise: Unknown argument '"+e+"' passed to expression compiler");for(var r=0;r<es.length;++r)if(!t[es[r]])throw new Error("cwise: Missing argument: "+es[r]);return rF({args:t.args,pre:_l(t.pre||function(){}),body:_l(t.body),post:_l(t.post||function(){}),debug:!!t.printCode,funcName:t.funcName||t.body.name||"cwise",blockSize:t.blockSize||64})}var Zs=iF,uF=$C,aF=Zs,sF=aF({args:["array","scalar","index"],body:function(e,r,n){var i=r,u;for(u=0;u<n.length-1;++u)i=i[n[u]];i[n[n.length-1]]=e}}),oF=function(e){var r=uF(e.shape);return sF(e,r),r},ys={},lF={get exports(){return ys},set exports(t){ys=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(o,s){for(var c=new Float64Array(o*s),p=0;p<c.length;p++)c[p]=u()*1e-4;return(0,n.default)(c,[o,s])};var r=Eu,n=i(r);function i(o){return o&&o.__esModule?o:{default:o}}function u(){var o=2*Math.random()-1,s=2*Math.random()-1,c=o*o+s*s;return c==0||c>1?u():o*Math.sqrt(-2*Math.log(c)/c)}t.exports=e.default})(lF,ys);var sa={},fF={get exports(){return sa},set exports(t){sa=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(h,d){var g=h.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]);switch(d){case"euclidean":for(var m=0;m<g;m++)for(var _=m+1;_<g;_++){var D=s(h.pick(m,null),h.pick(_,null));b.set(m,_,D),b.set(_,m,D)}break;case"manhattan":for(var m=0;m<g;m++)for(var _=m+1;_<g;_++){var D=c(h.pick(m,null),h.pick(_,null));b.set(m,_,D),b.set(_,m,D)}break;case"jaccard":for(var m=0;m<g;m++)for(var _=m+1;_<g;_++){var D=p(h.pick(m,null),h.pick(_,null));b.set(m,_,D),b.set(_,m,D)}break;case"dice":for(var m=0;m<g;m++)for(var _=m+1;_<g;_++){var D=f(h.pick(m,null),h.pick(_,null));b.set(m,_,D),b.set(_,m,D)}break}return b};var r=Eu,n=o(r),i=Zs,u=o(i);function o(h){return h&&h.__esModule?h:{default:h}}var s=(0,u.default)({args:["array","array"],pre:function(d,g){this.sum=0},body:function(d,g){var b=d-g;this.sum+=b*b},post:function(d,g){return Math.sqrt(this.sum)}}),c=(0,u.default)({args:["array","array"],pre:function(d,g){this.sum=0},body:function(d,g){this.sum+=Math.abs(d-g)},post:function(d,g){return this.sum}}),p=(0,u.default)({args:["array","array"],pre:function(d,g){this.tf=0,this.tt=0},body:function(d,g){var b=Math.round(d),m=Math.round(g);this.tf+=+(b!=m),this.tt+=+(b==1&&m==1)},post:function(d,g){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),f=(0,u.default)({args:["array","array"],pre:function(d,g){this.tf=0,this.tt=0},body:function(d,g){var b=Math.round(d),m=Math.round(g);this.tf+=+(b!=m),this.tt+=+(b==1&&m==1)},post:function(d,g){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});t.exports=e.default})(fF,sa);var ws={},cF={get exports(){return ws},set exports(t){ws=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(f,h){for(var d=100,g=f.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]),m=(0,n.default)(new Float64Array(g*g),[g,g]),_=void 0,D=void 0,C=1/0,A=Math.log(h),S=void 0,E=void 0,B=void 0,P=void 0,T=0;T<g;T++){_=1,D=-1/0,C=1/0;for(var N=0;N<d;N++){for(var G=0;G<g;G++)b.set(T,G,Math.exp(-f.get(T,G)*_));b.set(T,T,0),B=0;for(var G=0;G<g;G++)B+=b.get(T,G);B==0&&(B=s),P=0;for(var G=0;G<g;G++)b.set(T,G,b.get(T,G)/B),P+=f.get(T,G)*b.get(T,G);if(E=Math.log(B)+_*P,S=E-A,Math.abs(S)<=p)break;S>0?(D=_,C==1/0?_=_*2:_=(_+C)/2):(C=_,D==-1/0?_=_/2:_=(_+D)/2)}}u.default.add(m,b,b.transpose(1,0));var re=Math.max(u.default.sum(m),c);return u.default.divseq(m,re),u.default.maxseq(m,c),m};var r=Eu,n=o(r),i=Ys,u=o(i);function o(f){return f&&f.__esModule?f:{default:f}}var s=1e-7,c=Number.EPSILON||2220446049250313e-31,p=1e-5;t.exports=e.default})(cF,ws);var As={},hF={get exports(){return As},set exports(t){As=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(g,b,m){var _=g.shape[0],D=g.shape[1],C=(0,n.default)(new Float64Array(_*_),[_,_]),A=(0,p.default)(g,"euclidean");d(A);var S=(m+1)/-2;u.default.powseq(u.default.divseq(u.default.addseq(A,1),m),S);for(var E=0;E<_;E++)A.set(E,E,0);var B=Math.max(u.default.sum(A),h);u.default.divs(C,A,B),u.default.maxseq(C,h);var P=(0,n.default)(new Float64Array(_*_),[_,_]),T=(0,n.default)(new Float64Array(_*_),[_,_]);u.default.div(P,b,C),u.default.logeq(P),u.default.assign(T,b);var N=u.default.sum(u.default.muleq(P,T)),G=(0,n.default)(new Float64Array(g.size),g.shape),re=(0,n.default)(new Float64Array(_*_),[_,_]);u.default.sub(re,b,C),u.default.muleq(re,A);for(var E=0;E<_;E++)for(var z=0;z<D;z++){var Y=(0,n.default)(new Float64Array(g.shape[0]),[g.shape[0]]);u.default.assign(Y,g.pick(null,z)),u.default.addseq(u.default.negeq(Y),g.get(E,z)),u.default.muleq(Y,re.pick(E,null)),G.set(E,z,u.default.sum(Y))}var V=2*(m+1)/m;return u.default.mulseq(G,V),[N,G]};var r=Eu,n=f(r),i=Ys,u=f(i),o=Zs,s=f(o),c=sa,p=f(c);function f(g){return g&&g.__esModule?g:{default:g}}var h=Number.EPSILON||2220446049250313e-31,d=(0,s.default)({args:["array"],body:function(b){}});t.exports=e.default})(hF,As);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function Y(V,U){var q=[],J=!0,Z=!1,X=void 0;try{for(var le=V[Symbol.iterator](),ge;!(J=(ge=le.next()).done)&&(q.push(ge.value),!(U&&q.length===U));J=!0);}catch(Ee){Z=!0,X=Ee}finally{try{!J&&le.return&&le.return()}finally{if(Z)throw X}}return q}return function(V,U){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return Y(V,U);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function Y(V,U){for(var q=0;q<U.length;q++){var J=U[q];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(V,J.key,J)}}return function(V,U,q){return U&&Y(V.prototype,U),q&&Y(V,q),V}}(),i=Ds,u=Eu,o=P(u),s=Ys,c=P(s),p=WC,f=P(p),h=oF,d=P(h),g=Zs,b=P(g),m=ys,_=P(m),D=sa,C=P(D),A=ws,S=P(A),E=As,B=P(E);function P(Y){return Y&&Y.__esModule?Y:{default:Y}}function T(Y){if(Array.isArray(Y)){for(var V=0,U=Array(Y.length);V<Y.length;V++)U[V]=Y[V];return U}else return Array.from(Y)}function N(Y,V){if(!(Y instanceof V))throw new TypeError("Cannot call a class as a function")}function G(Y,V){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:Y}function re(Y,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);Y.prototype=Object.create(V&&V.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,V):Y.__proto__=V)}var z=function(Y){re(V,Y);function V(U){N(this,V);var q=G(this,Object.getPrototypeOf(V).call(this));return U=U||{},q.dim=U.dim||2,q.perplexity=U.perplexity||30,q.earlyExaggeration=U.earlyExaggeration||4,q.learningRate=U.learningRate||1e3,q.nIter=U.nIter||1e3,q.metric=U.metric||"euclidean",q.barneshut=U.barneshut||!1,q.inputData=null,q.outputEmbedding=null,q}return n(V,[{key:"init",value:function(q){q=q||{};var J=q.data||[],Z=q.type||"dense";if(Z==="dense")this.inputData=(0,f.default)(J);else if(Z==="sparse"){for(var X=[],le=1,ge=function(mt){var ut=Math.max.apply(null,J.map(function(lt){return lt[mt]}))+1;X.push(ut),le*=ut},Ee=0;Ee<J[0].length;Ee++)ge(Ee);this.inputData=(0,o.default)(new Float64Array(le),X);var ye=!0,Oe=!1,qe=void 0;try{for(var Ie=J[Symbol.iterator](),tt;!(ye=(tt=Ie.next()).done);ye=!0){var He,Ue=tt.value;(He=this.inputData).set.apply(He,T(Ue).concat([1]))}}catch(ze){Oe=!0,qe=ze}finally{try{!ye&&Ie.return&&Ie.return()}finally{if(Oe)throw qe}}}else throw new Error("input data type must be dense or sparse");this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,C.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,S.default)(this.distances,this.perplexity);var q=Number.MAX_VALUE,J=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),c.default.mulseq(this.P,this.earlyExaggeration);var Z=this._gradDesc(J,50,.5,0,0),X=r(Z,2);q=X[0],J=X[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var le=this._gradDesc(J+1,100,.8,0,0),ge=r(le,2);q=ge[0],J=ge[1],this.emit("progressStatus","Final optimization with momentum 0.8"),c.default.divseq(this.P,this.earlyExaggeration);var Ee=this._gradDesc(J+1,this.nIter,.8,1e-6,1e-6),ye=r(Ee,2);return q=ye[0],J=ye[1],this.emit("progressStatus","Optimization end"),[q,J]}},{key:"rerun",value:function(){this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim);var q=this.run(),J=r(q,2),Z=J[0],X=J[1];return[Z,X]}},{key:"getOutput",value:function(){return(0,d.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var q=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),J=(0,o.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),Z=0;Z<this.outputEmbedding.shape[1];Z++){var X=c.default.sup(c.default.abs(J,this.outputEmbedding.pick(null,Z)));c.default.divs(q.pick(null,Z),this.outputEmbedding.pick(null,Z),X)}return(0,d.default)(q)}},{key:"_gradDesc",value:function(q,J,Z){for(var X=arguments.length<=3||arguments[3]===void 0?1e-6:arguments[3],le=arguments.length<=4||arguments[4]===void 0?1e-6:arguments[4],ge=30,Ee=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),ye=new Float64Array(this.outputEmbedding.size),Oe=0;Oe<ye.length;Oe++)ye[Oe]=1;var qe=(0,o.default)(ye,this.outputEmbedding.shape),Ie=Number.MAX_VALUE,tt=Number.MAX_VALUE,He=0,Ue=(0,b.default)({args:["array"],pre:function(Ot){this.sum=0},body:function(Ot){this.sum+=Ot*Ot},post:function(Ot){return Math.sqrt(this.sum)}}),ze=(0,b.default)({args:["array","array","array"],body:function(Ot,Vt,Ht){}}),mt=void 0;for(mt=q;mt<J;mt++){var ut=(0,B.default)(this.outputEmbedding,this.P,this.alpha),lt=r(ut,2),at=lt[0],st=lt[1],Xe=Math.abs(at-Ie);Ie=at;var Je=Ue(st);if(this.emit("progressIter",[mt,Ie,Je]),Ie<tt)tt=Ie,He=mt;else if(mt-He>ge)break;if(X>=Je||le>=Xe)break;ze(qe,Ee,st),c.default.muleq(st,qe);var Ce=(0,o.default)(new Float64Array(st.size),st.shape);c.default.muls(Ce,st,this.learningRate),c.default.mulseq(Ee,Z),c.default.subeq(Ee,Ce),c.default.addeq(this.outputEmbedding,Ee),this.emit("progressData",this.getOutputScaled())}return[Ie,mt]}}]),V}(i.EventEmitter);e.default=z,t.exports=e.default})(sC,_s);const dF=Cf(_s);var nf={},pF={get exports(){return nf},set exports(t){nf=t}},Es={},gF={get exports(){return Es},set exports(t){Es=t}},W0;function vF(){return W0||(W0=1,function(t){function e(r,n,i,u){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,i,u)}e.prototype.run=function(r,n,i,u){this._init(r,n,i,u);for(var o=0;o<this._datasetLength;o++)if(this._visited[o]!==1){this._visited[o]=1;var s=this._regionQuery(o);if(s.length<this.minPts)this.noise.push(o);else{var c=this.clusters.length;this.clusters.push([]),this._addToCluster(o,c),this._expandCluster(c,s)}}return this.clusters},e.prototype._init=function(r,n,i,u){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),i&&(this.minPts=i),u&&(this.distance=u)},e.prototype._expandCluster=function(r,n){for(var i=0;i<n.length;i++){var u=n[i];if(this._visited[u]!==1){this._visited[u]=1;var o=this._regionQuery(u);o.length>=this.minPts&&(n=this._mergeArrays(n,o))}this._assigned[u]!==1&&this._addToCluster(u,r)}},e.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1},e.prototype._regionQuery=function(r){for(var n=[],i=0;i<this._datasetLength;i++){var u=this.distance(this.dataset[r],this.dataset[i]);u<this.epsilon&&n.push(i)}return n},e.prototype._mergeArrays=function(r,n){for(var i=n.length,u=0;u<i;u++){var o=n[u];r.indexOf(o)<0&&r.push(o)}return r},e.prototype._euclideanDistance=function(r,n){for(var i=0,u=Math.min(r.length,n.length);u--;)i+=(r[u]-n[u])*(r[u]-n[u]);return Math.sqrt(i)},t.exports&&(t.exports=e)}(gF)),Es}var Cs={},mF={get exports(){return Cs},set exports(t){Cs=t}},H0;function _F(){return H0||(H0=1,function(t){function e(r,n,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,i)}e.prototype.init=function(r,n,i){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof i<"u"&&(this.distance=i)},e.prototype.run=function(r,n){this.init(r,n);for(var i=this.dataset.length,u=0;u<this.k;u++)this.centroids[u]=this.randomCentroid();for(var o=!0;o;){o=this.assign();for(var s=0;s<this.k;s++){for(var c=new Array(d),p=0,f=0;f<d;f++)c[f]=0;for(var h=0;h<i;h++){var d=this.dataset[h].length;if(s===this.assignments[h]){for(var f=0;f<d;f++)c[f]+=this.dataset[h][f];p++}}if(p>0){for(var f=0;f<d;f++)c[f]/=p;this.centroids[s]=c}else this.centroids[s]=this.randomCentroid(),o=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,i;do i=Math.round(Math.random()*r),n=this.dataset[i];while(this.centroids.indexOf(n)>=0);return n},e.prototype.assign=function(){for(var r=!1,n=this.dataset.length,i,u=0;u<n;u++)i=this.argmin(this.dataset[u],this.centroids,this.distance),i!=this.assignments[u]&&(this.assignments[u]=i,r=!0);return r},e.prototype.getClusters=function(){for(var r=new Array(this.k),n,i=0;i<this.assignments.length;i++)n=this.assignments[i],typeof r[n]>"u"&&(r[n]=[]),r[n].push(i);return r},e.prototype.argmin=function(r,n,i){for(var u=Number.MAX_VALUE,o=0,s=n.length,c,p=0;p<s;p++)c=i(r,n[p]),c<u&&(u=c,o=p);return o},e.prototype.distance=function(r,n){for(var i=0,u=Math.min(r.length,n.length);u--;){var o=r[u]-n[u];i+=o*o}return Math.sqrt(i)},t.exports&&(t.exports=e)}(mF)),Cs}var Fs={},DF={get exports(){return Fs},set exports(t){Fs=t}},Ss={},bF={get exports(){return Ss},set exports(t){Ss=t}},G0;function o1(){return G0||(G0=1,function(t){function e(r,n,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,i)}e.prototype.insert=function(r,n){for(var i=this._queue.length,u=i;u--;){var o=this._priorities[u];this._sorting==="desc"?n>o&&(i=u):n<o&&(i=u)}this._insertAt(r,n,i)},e.prototype.remove=function(r){for(var n=this._queue.length;n--;){var i=this._queue[n];if(r===i){this._queue.splice(n,1),this._priorities.splice(n,1);break}}},e.prototype.forEach=function(r){this._queue.forEach(r)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(r){return this._priorities[r]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,i=this._queue.length;n<i;n++)r.push([this._queue[n],this._priorities[n]]);return r},e.prototype._init=function(r,n,i){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var u=0;u<r.length;u++)this.insert(r[u],n[u])}i&&(this._sorting=i)},e.prototype._insertAt=function(r,n,i){this._queue.length===i?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(i,0,r),this._priorities.splice(i,0,n))},t.exports&&(t.exports=e)}(bF)),Ss}var $0;function yF(){return $0||($0=1,function(t){if(t.exports)var e=o1();function r(n,i,u,o){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,i,u,o)}r.prototype.run=function(n,i,u,o){this._init(n,i,u,o);for(var s=0,c=this.dataset.length;s<c;s++)if(this._processed[s]!==1){this._processed[s]=1,this.clusters.push([s]);var p=this.clusters.length-1;this._orderedList.push(s);var f=new e(null,null,"asc"),h=this._regionQuery(s);this._distanceToCore(s)!==void 0&&(this._updateQueue(s,h,f),this._expandCluster(p,f))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var n=[],i=0,u=this._orderedList.length;i<u;i++){var o=this._orderedList[i],s=this._reachability[o];n.push([o,s])}return n},r.prototype._init=function(n,i,u,o){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}i&&(this.epsilon=i),u&&(this.minPts=u),o&&(this.distance=o)},r.prototype._updateQueue=function(n,i,u){var o=this;this._coreDistance=this._distanceToCore(n),i.forEach(function(s){if(o._processed[s]===void 0){var c=o.distance(o.dataset[n],o.dataset[s]),p=Math.max(o._coreDistance,c);o._reachability[s]===void 0?(o._reachability[s]=p,u.insert(s,p)):p<o._reachability[s]&&(o._reachability[s]=p,u.remove(s),u.insert(s,p))}})},r.prototype._expandCluster=function(n,i){for(var u=i.getElements(),o=0,s=u.length;o<s;o++){var c=u[o];if(this._processed[c]===void 0){var p=this._regionQuery(c);this._processed[c]=1,this.clusters[n].push(c),this._orderedList.push(c),this._distanceToCore(c)!==void 0&&(this._updateQueue(c,p,i),this._expandCluster(n,i))}}},r.prototype._distanceToCore=function(n){for(var i=this.epsilon,u=0;u<i;u++){var o=this._regionQuery(n,u);if(o.length>=this.minPts)return u}},r.prototype._regionQuery=function(n,i){i=i||this.epsilon;for(var u=[],o=0,s=this.dataset.length;o<s;o++)this.distance(this.dataset[n],this.dataset[o])<i&&u.push(o);return u},r.prototype._euclideanDistance=function(n,i){for(var u=0,o=Math.min(n.length,i.length);o--;)u+=(n[o]-i[o])*(n[o]-i[o]);return Math.sqrt(u)},t.exports&&(t.exports=r)}(DF)),Fs}(function(t){t.exports&&(t.exports={DBSCAN:vF(),KMEANS:_F(),OPTICS:yF(),PriorityQueue:o1()})})(pF);var uf={},wF={get exports(){return uf},set exports(t){uf=t}};(function(t){var e=parseInt(Number.MAX_SAFE_INTEGER/2)||4503599627370496,r=0;function n(){this.C=null,this.row_covered=[],this.col_covered=[],this.n=0,this.Z0_r=0,this.Z0_c=0,this.marked=null,this.path=null}n.prototype.pad_matrix=function(s,c){c=c||r;var p=0,f=s.length,h;for(h=0;h<f;++h)s[h].length>p&&(p=s[h].length);f=p>f?p:f;var d=[];for(h=0;h<f;++h){for(var g=s[h]||[],b=g.slice();f>b.length;)b.push(c);d.push(b)}return d},n.prototype.compute=function(s,c){c=c||{},c.padValue=c.padValue||r,this.C=this.pad_matrix(s,c.padValue),this.n=this.C.length,this.original_length=s.length,this.original_width=s[0].length;for(var p=[];p.length<this.n;)p.push(!1);this.row_covered=p.slice(),this.col_covered=p.slice(),this.Z0_r=0,this.Z0_c=0,this.path=this.__make_matrix(this.n*2,0),this.marked=this.__make_matrix(this.n,0);for(var f=1,h={1:this.__step1,2:this.__step2,3:this.__step3,4:this.__step4,5:this.__step5,6:this.__step6};;){var d=h[f];if(!d)break;f=d.apply(this)}for(var g=[],b=0;b<this.original_length;++b)for(var m=0;m<this.original_width;++m)this.marked[b][m]==1&&g.push([b,m]);return g},n.prototype.__make_matrix=function(s,c){for(var p=[],f=0;f<s;++f){p[f]=[];for(var h=0;h<s;++h)p[f][h]=c}return p},n.prototype.__step1=function(){for(var s=0;s<this.n;++s)for(var c=Math.min.apply(Math,this.C[s]),p=0;p<this.n;++p)this.C[s][p]-=c;return 2},n.prototype.__step2=function(){for(var s=0;s<this.n;++s)for(var c=0;c<this.n;++c)if(this.C[s][c]===0&&!this.col_covered[c]&&!this.row_covered[s]){this.marked[s][c]=1,this.col_covered[c]=!0,this.row_covered[s]=!0;break}return this.__clear_covers(),3},n.prototype.__step3=function(){for(var s=0,c=0;c<this.n;++c)for(var p=0;p<this.n;++p)this.marked[c][p]==1&&this.col_covered[p]==!1&&(this.col_covered[p]=!0,++s);return s>=this.n?7:4},n.prototype.__step4=function(){for(var s=!1,c=-1,p=-1,f=-1;!s;){var h=this.__find_a_zero();if(c=h[0],p=h[1],c<0)return 6;if(this.marked[c][p]=2,f=this.__find_star_in_row(c),f>=0)p=f,this.row_covered[c]=!0,this.col_covered[p]=!1;else return this.Z0_r=c,this.Z0_c=p,5}},n.prototype.__step5=function(){var s=0;this.path[s][0]=this.Z0_r,this.path[s][1]=this.Z0_c;for(var c=!1;!c;){var p=this.__find_star_in_col(this.path[s][1]);if(p>=0?(s++,this.path[s][0]=p,this.path[s][1]=this.path[s-1][1]):c=!0,!c){var f=this.__find_prime_in_row(this.path[s][0]);s++,this.path[s][0]=this.path[s-1][0],this.path[s][1]=f}}return this.__convert_path(this.path,s),this.__clear_covers(),this.__erase_primes(),3},n.prototype.__step6=function(){for(var s=this.__find_smallest(),c=0;c<this.n;++c)for(var p=0;p<this.n;++p)this.row_covered[c]&&(this.C[c][p]+=s),this.col_covered[p]||(this.C[c][p]-=s);return 4},n.prototype.__find_smallest=function(){for(var s=e,c=0;c<this.n;++c)for(var p=0;p<this.n;++p)!this.row_covered[c]&&!this.col_covered[p]&&s>this.C[c][p]&&(s=this.C[c][p]);return s},n.prototype.__find_a_zero=function(){for(var s=0;s<this.n;++s)for(var c=0;c<this.n;++c)if(this.C[s][c]===0&&!this.row_covered[s]&&!this.col_covered[c])return[s,c];return[-1,-1]},n.prototype.__find_star_in_row=function(s){for(var c=0;c<this.n;++c)if(this.marked[s][c]==1)return c;return-1},n.prototype.__find_star_in_col=function(s){for(var c=0;c<this.n;++c)if(this.marked[c][s]==1)return c;return-1},n.prototype.__find_prime_in_row=function(s){for(var c=0;c<this.n;++c)if(this.marked[s][c]==2)return c;return-1},n.prototype.__convert_path=function(s,c){for(var p=0;p<=c;++p)this.marked[s[p][0]][s[p][1]]=this.marked[s[p][0]][s[p][1]]==1?0:1},n.prototype.__clear_covers=function(){for(var s=0;s<this.n;++s)this.row_covered[s]=!1,this.col_covered[s]=!1},n.prototype.__erase_primes=function(){for(var s=0;s<this.n;++s)for(var c=0;c<this.n;++c)this.marked[s][c]==2&&(this.marked[s][c]=0)};function i(s,c){var p,f;if(!c){var h=-1/0;for(p=0;p<s.length;++p)for(f=0;f<s[p].length;++f)s[p][f]>h&&(h=s[p][f]);c=function(b){return h-b}}var d=[];for(p=0;p<s.length;++p){var g=s[p];for(d[p]=[],f=0;f<g.length;++f)d[p][f]=c(s[p][f])}return d}function u(s){var c=[],p,f;for(p=0;p<s.length;++p)for(f=0;f<s[p].length;++f){var h=String(s[p][f]).length;(!c[f]||h>=c[f])&&(c[f]=h)}var d="";for(p=0;p<s.length;++p){for(f=0;f<s[p].length;++f){for(var g=String(s[p][f]);g.length<c[f];)g=" "+g;d+=g,f!=s[p].length-1&&(d+=" ")}p!=s[p].length-1&&(d+=`
`)}return d}function o(s,c){var p=new n;return p.compute(s,c)}o.version="1.2.2",o.format_matrix=u,o.make_cost_matrix=i,o.Munkres=n,t.exports&&(t.exports=o)})(wF);const AF=uf;function K0(t,e,r){const n=t.slice();return n[31]=e[r][0],n[32]=e[r][1],n}function Y0(t){let e=[],r=new Map,n,i,u,o=Object.entries(t[4].weightedPrompts);const s=c=>c[31];for(let c=0;c<o.length;c+=1){let p=K0(t,o,c),f=s(p);r.set(f,e[c]=X0(f,p))}return i=new Au({props:{xy:t[7],radius:t[1],color:"rgba(136,157,191, 1)",handleMouseDown:t[19]}}),{c(){for(let c=0;c<e.length;c+=1)e[c].c();n=It(),$e(i.$$.fragment)},l(c){for(let p=0;p<e.length;p+=1)e[p].l(c);n=It(),Ke(i.$$.fragment,c)},m(c,p){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(c,p);_e(c,n,p),Ye(i,c,p),u=!0},p(c,p){p[0]&221&&(o=Object.entries(c[4].weightedPrompts),Nr(),e=Kn(e,p,s,1,c,o,r,n.parentNode,dp,X0,n,K0),Rr());const f={};p[0]&128&&(f.xy=c[7]),p[0]&2&&(f.radius=c[1]),p[0]&32&&(f.handleMouseDown=c[19]),i.$set(f)},i(c){if(!u){for(let p=0;p<o.length;p+=1)Ae(e[p]);Ae(i.$$.fragment,c),u=!0}},o(c){for(let p=0;p<e.length;p+=1)Se(e[p]);Se(i.$$.fragment,c),u=!1},d(c){for(let p=0;p<e.length;p+=1)e[p].d(c);c&&I(n),Ze(i,c)}}}function Z0(t){let e,r;return e=new Kp({props:{p1:t[6][t[31]].embedXY,p2:t[7]}}),{c(){$e(e.$$.fragment)},l(n){Ke(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},p(n,i){const u={};i[0]&80&&(u.p1=n[6][n[31]].embedXY),i[0]&128&&(u.p2=n[7]),e.$set(u)},i(n){r||(Ae(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function X0(t,e){let r,n,i,u,o,s=e[32].embedActive&&Z0(e);return i=new Au({props:{xy:e[6][e[31]].embedXY,radius:e[0],color:"rgba(136,157,191, 1)"}}),u=new la({props:{xy:[e[6][e[31]].embedXY[0]-xr(e[2],e[32].text.length,e[3])[0]/2,e[6][e[31]].embedXY[1]+e[0]],color:`rgba(255,255,255,${Er(e[32].embedWeight)}`,wh:xr(e[2],e[32].text.length,e[3]),fontSize:e[3],text:e[32].text}}),{key:t,first:null,c(){r=It(),s&&s.c(),n=It(),$e(i.$$.fragment),$e(u.$$.fragment),this.h()},l(c){r=It(),s&&s.l(c),n=It(),Ke(i.$$.fragment,c),Ke(u.$$.fragment,c),this.h()},h(){this.first=r},m(c,p){_e(c,r,p),s&&s.m(c,p),_e(c,n,p),Ye(i,c,p),Ye(u,c,p),o=!0},p(c,p){e=c,e[32].embedActive?s?(s.p(e,p),p[0]&16&&Ae(s,1)):(s=Z0(e),s.c(),Ae(s,1),s.m(n.parentNode,n)):s&&(Nr(),Se(s,1,1,()=>{s=null}),Rr());const f={};p[0]&80&&(f.xy=e[6][e[31]].embedXY),p[0]&1&&(f.radius=e[0]),i.$set(f);const h={};p[0]&93&&(h.xy=[e[6][e[31]].embedXY[0]-xr(e[2],e[32].text.length,e[3])[0]/2,e[6][e[31]].embedXY[1]+e[0]]),p[0]&16&&(h.color=`rgba(255,255,255,${Er(e[32].embedWeight)}`),p[0]&28&&(h.wh=xr(e[2],e[32].text.length,e[3])),p[0]&8&&(h.fontSize=e[3]),p[0]&16&&(h.text=e[32].text),u.$set(h)},i(c){o||(Ae(s),Ae(i.$$.fragment,c),Ae(u.$$.fragment,c),o=!0)},o(c){Se(s),Se(i.$$.fragment,c),Se(u.$$.fragment,c),o=!1},d(c){c&&I(r),s&&s.d(c),c&&I(n),Ze(i,c),Ze(u,c)}}}function EF(t){let e,r=Object.entries(t[4].weightedPrompts).length>0&&Object.entries(t[6]||{}).length>0,n,i,u,o=r&&Y0(t);return{c(){e=dt("svg"),o&&o.c(),this.h()},l(s){e=pt(s,"svg",{id:!0,class:!0});var c=$(e);o&&o.l(c),c.forEach(I),this.h()},h(){O(e,"id","svg"),O(e,"class","w-full h-full")},m(s,c){_e(s,e,c),o&&o.m(e,null),n=!0,i||(u=[Fe(e,"mousemove",t[9]),Fe(e,"mouseup",t[10]),Fe(e,"dblclick",t[8])],i=!0)},p(s,c){c[0]&80&&(r=Object.entries(s[4].weightedPrompts).length>0&&Object.entries(s[6]||{}).length>0),r?o?(o.p(s,c),c[0]&80&&Ae(o,1)):(o=Y0(s),o.c(),Ae(o,1),o.m(e,null)):o&&(Nr(),Se(o,1,1,()=>{o=null}),Rr())},i(s){n||(Ae(o),n=!0)},o(s){Se(o),n=!1},d(s){s&&I(e),o&&o.d(),i=!1,ar(u)}}}function CF(t,e,r){let n,i,u,o,s;ct(t,Cr,Z=>r(4,s=Z));let{center:c=[100,100]}=e,{dimensions:p=[100,100]}=e,{pointRadius:f=4}=e,{markerRadius:h=10}=e,{textWidth:d=150}=e,{fontSize:g=12}=e,{innerPad:b=100}=e,m=!1,_=null,D=p,C=[0,0];function A(){return{"00":[C[0],C[1]],"01":[C[0],C[1]+D[1]],11:[C[0]+D[0],C[1]+D[1]],10:[C[0]+D[0],C[1]]}}function S(Z,X){return Z.map(le=>X.map(ge=>as(le,ge)))}function E(Z,X){if(Z.length!==X.length)throw new Error("Both sets should have the same number of points");const le=S(Z,X),ge=AF(le);return ge?ge.map(([Ee,ye])=>({ids:[Ee,ye],points:[Z[Ee],X[ye]]})):null}function B(Z){const X=Z.reduce((le,ge)=>Gr(le,ge),[0,0]);return Cn(X,1/Z.length)}function P(Z){const X=A();switch(Z){case 2:return[Cn(Gr(X["00"],X["01"]),.5),Cn(Gr(X[10],X[11]),.5)];case 4:return[X["00"],X["01"],X[11],X[10]];case 6:return[Cn(Gr(X["00"],X["01"]),.5),Cn(Gr(X[10],X[11]),.5),X["00"],X["01"],X[11],X[10]];case 8:return[Cn(Gr(X["00"],X["01"]),.5),Cn(Gr(X[10],X[11]),.5),X["00"],X["01"],X[11],X[10],Cn(Gr(X["00"],X[10]),.5),Cn(Gr(X["01"],X[11]),.5)];default:return null}}function T(Z){s.embeddings&&s.scaledEmbedMappings&&(q(),z(n,i,u,D,Z))}function N(Z,X){Z&&X&&(q(),z(n,i,u,D,o))}function G(Z,X){z(n,Z,X,D,o)}function re(Z){s.embeddings&&s.scaledEmbedMappings&&(q(),z(n,i,u,Z,o))}function z(Z,X,le,ge,Ee){if(!_)return;let ye={...s.weightedPrompts},Oe=0;Object.values(_).forEach(He=>{Object.values(_).forEach(Ue=>{const ze=as(He.embedXY,Ue.embedXY);ze>Oe&&(Oe=ze)})});const qe=Object.entries(_).reduce((He,[Ue,ze])=>{const mt=as(Z,ze.embedXY);return He[Ue]=mt,He},{}),Ie=(He,Ue)=>{const ze=He?Math.round(Math.pow(1-Ue/Oe,le)*100)/100:0;return ze<0?0:ze},tt=(He,Ue)=>{const ze=He?Math.round((1-Ue/Oe)*100)/100:0;return ze<0?0:ze};Object.entries(qe).sort((He,Ue)=>He[1]-Ue[1]).forEach(([He,Ue],ze)=>{if(!ye[He])return;const mt=ze<Ee;ye[He]={...ye[He],embedWeight:X?Ie(mt,Ue):tt(mt,Ue),embedActive:mt}}),Mt.update({...s,embedMarker:n,weightedPrompts:ye})}function Y(Z){const X=fi(Z,svg);r(7,n=X),z(n,i,u,D,o)}function V(Z){if(m){const X=fi(Z,svg);r(7,n=X),z(n,i,u,D,o)}}function U(Z){r(5,m=!1)}function q(){const X=Object.keys(s.scaledEmbedMappings).reduce((ge,Ee,ye)=>(ge[Ee]={embedXY:[C[0]+D[0]*s.scaledEmbedMappings[ye][0],C[1]+D[1]*s.scaledEmbedMappings[ye][1]]},ge),{}),le=ge=>{if(!ge.length)return c;const Ee=ge.map(ye=>X[ye].embedXY);return B(Ee)};if(s.embedClusters){const ge=s.embedClusters,Ee=s.embedClusterSets[ge];let ye=Ee.map(Ie=>le(Ie));const Oe=P(ge),qe=E(ye,Oe);qe&&qe.forEach(Ie=>{const tt=Ie.ids[0],He=Ie.points[1];Ee[tt].forEach(Ue=>{X[Ue].embedXY=B([X[Ue].embedXY,He])})})}r(6,_=X)}const J=()=>r(5,m=!0);return t.$$set=Z=>{"center"in Z&&r(11,c=Z.center),"dimensions"in Z&&r(12,p=Z.dimensions),"pointRadius"in Z&&r(0,f=Z.pointRadius),"markerRadius"in Z&&r(1,h=Z.markerRadius),"textWidth"in Z&&r(2,d=Z.textWidth),"fontSize"in Z&&r(3,g=Z.fontSize),"innerPad"in Z&&r(13,b=Z.innerPad)},t.$$.update=()=>{if(t.$$.dirty[0]&2064&&r(7,n=s.embedMarker||c),t.$$.dirty[0]&16&&r(18,i=s.embedExponentialScaling),t.$$.dirty[0]&16&&r(17,u=s.embedWeightScaling),t.$$.dirty[0]&16&&r(16,o=s.embedPromptLimit||Object.keys(s.weightedPrompts).length),t.$$.dirty[0]&393216&&G(i,u),t.$$.dirty[0]&16&&N(s.embeddings,s.scaledEmbedMappings),t.$$.dirty[0]&45056){const Z=Math.min(...p),X=p[0]===Z,le=p[1]===Z;r(15,C=[Math.max(X?0:(p[0]-Z)/2,b),Math.max(le?0:(p[1]-Z)/2,b)]),r(14,D=[p[0]-2*C[0],p[1]-2*C[1]])}t.$$.dirty[0]&16384&&re(D),t.$$.dirty[0]&65536&&T(o)},[f,h,d,g,s,m,_,n,Y,V,U,c,p,b,D,C,o,u,i,J]}class FF extends yt{constructor(e){super(),wt(this,e,CF,EF,At,{center:11,dimensions:12,pointRadius:0,markerRadius:1,textWidth:2,fontSize:3,innerPad:13},null,[-1,-1])}}var af={},l1={},Bs={},SF={get exports(){return Bs},set exports(t){Bs=t}},Os={},BF={get exports(){return Os},set exports(t){Os=t}},f1=function(e,r){return function(){for(var i=new Array(arguments.length),u=0;u<i.length;u++)i[u]=arguments[u];return e.apply(r,i)}},OF=f1,Ii=Object.prototype.toString;function If(t){return Array.isArray(t)}function sf(t){return typeof t>"u"}function MF(t){return t!==null&&!sf(t)&&t.constructor!==null&&!sf(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function c1(t){return Ii.call(t)==="[object ArrayBuffer]"}function PF(t){return Ii.call(t)==="[object FormData]"}function TF(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&c1(t.buffer),e}function kF(t){return typeof t=="string"}function IF(t){return typeof t=="number"}function h1(t){return t!==null&&typeof t=="object"}function os(t){if(Ii.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function xF(t){return Ii.call(t)==="[object Date]"}function NF(t){return Ii.call(t)==="[object File]"}function RF(t){return Ii.call(t)==="[object Blob]"}function d1(t){return Ii.call(t)==="[object Function]"}function LF(t){return h1(t)&&d1(t.pipe)}function UF(t){return Ii.call(t)==="[object URLSearchParams]"}function VF(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function jF(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function xf(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),If(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function of(){var t={};function e(i,u){os(t[u])&&os(i)?t[u]=of(t[u],i):os(i)?t[u]=of({},i):If(i)?t[u]=i.slice():t[u]=i}for(var r=0,n=arguments.length;r<n;r++)xf(arguments[r],e);return t}function qF(t,e,r){return xf(e,function(i,u){r&&typeof i=="function"?t[u]=OF(i,r):t[u]=i}),t}function zF(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var un={isArray:If,isArrayBuffer:c1,isBuffer:MF,isFormData:PF,isArrayBufferView:TF,isString:kF,isNumber:IF,isObject:h1,isPlainObject:os,isUndefined:sf,isDate:xF,isFile:NF,isBlob:RF,isFunction:d1,isStream:LF,isURLSearchParams:UF,isStandardBrowserEnv:jF,forEach:xf,merge:of,extend:qF,trim:VF,stripBOM:zF},pu=un;function J0(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var p1=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(pu.isURLSearchParams(r))i=r.toString();else{var u=[];pu.forEach(r,function(c,p){c===null||typeof c>"u"||(pu.isArray(c)?p=p+"[]":c=[c],pu.forEach(c,function(h){pu.isDate(h)?h=h.toISOString():pu.isObject(h)&&(h=JSON.stringify(h)),u.push(J0(p)+"="+J0(h))}))}),i=u.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},WF=un;function Xs(){this.handlers=[]}Xs.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};Xs.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Xs.prototype.forEach=function(e){WF.forEach(this.handlers,function(n){n!==null&&e(n)})};var HF=Xs,GF=un,$F=function(e,r){GF.forEach(e,function(i,u){u!==r&&u.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[u])})},g1=function(e,r,n,i,u){return e.config=r,n&&(e.code=n),e.request=i,e.response=u,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},v1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Dl,Q0;function m1(){if(Q0)return Dl;Q0=1;var t=g1;return Dl=function(r,n,i,u,o){var s=new Error(r);return t(s,n,i,u,o)},Dl}var bl,ed;function KF(){if(ed)return bl;ed=1;var t=m1();return bl=function(r,n,i){var u=i.config.validateStatus;!i.status||!u||u(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},bl}var yl,td;function YF(){if(td)return yl;td=1;var t=un;return yl=t.isStandardBrowserEnv()?function(){return{write:function(n,i,u,o,s,c){var p=[];p.push(n+"="+encodeURIComponent(i)),t.isNumber(u)&&p.push("expires="+new Date(u).toGMTString()),t.isString(o)&&p.push("path="+o),t.isString(s)&&p.push("domain="+s),c===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),yl}var wl,rd;function ZF(){return rd||(rd=1,wl=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),wl}var Al,nd;function XF(){return nd||(nd=1,Al=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Al}var El,id;function JF(){if(id)return El;id=1;var t=ZF(),e=XF();return El=function(n,i){return n&&!t(i)?e(n,i):i},El}var Cl,ud;function QF(){if(ud)return Cl;ud=1;var t=un,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Cl=function(n){var i={},u,o,s;return n&&t.forEach(n.split(`
`),function(p){if(s=p.indexOf(":"),u=t.trim(p.substr(0,s)).toLowerCase(),o=t.trim(p.substr(s+1)),u){if(i[u]&&e.indexOf(u)>=0)return;u==="set-cookie"?i[u]=(i[u]?i[u]:[]).concat([o]):i[u]=i[u]?i[u]+", "+o:o}}),i},Cl}var Fl,ad;function e3(){if(ad)return Fl;ad=1;var t=un;return Fl=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function u(o){var s=o;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=u(window.location.href),function(s){var c=t.isString(s)?u(s):s;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}(),Fl}var Sl,sd;function Js(){if(sd)return Sl;sd=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Sl=t,Sl}var Bl,od;function ld(){if(od)return Bl;od=1;var t=un,e=KF(),r=YF(),n=p1,i=JF(),u=QF(),o=e3(),s=m1(),c=v1,p=Js();return Bl=function(h){return new Promise(function(g,b){var m=h.data,_=h.headers,D=h.responseType,C;function A(){h.cancelToken&&h.cancelToken.unsubscribe(C),h.signal&&h.signal.removeEventListener("abort",C)}t.isFormData(m)&&delete _["Content-Type"];var S=new XMLHttpRequest;if(h.auth){var E=h.auth.username||"",B=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";_.Authorization="Basic "+btoa(E+":"+B)}var P=i(h.baseURL,h.url);S.open(h.method.toUpperCase(),n(P,h.params,h.paramsSerializer),!0),S.timeout=h.timeout;function T(){if(S){var G="getAllResponseHeaders"in S?u(S.getAllResponseHeaders()):null,re=!D||D==="text"||D==="json"?S.responseText:S.response,z={data:re,status:S.status,statusText:S.statusText,headers:G,config:h,request:S};e(function(V){g(V),A()},function(V){b(V),A()},z),S=null}}if("onloadend"in S?S.onloadend=T:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(T)},S.onabort=function(){S&&(b(s("Request aborted",h,"ECONNABORTED",S)),S=null)},S.onerror=function(){b(s("Network Error",h,null,S)),S=null},S.ontimeout=function(){var re=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",z=h.transitional||c;h.timeoutErrorMessage&&(re=h.timeoutErrorMessage),b(s(re,h,z.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",S)),S=null},t.isStandardBrowserEnv()){var N=(h.withCredentials||o(P))&&h.xsrfCookieName?r.read(h.xsrfCookieName):void 0;N&&(_[h.xsrfHeaderName]=N)}"setRequestHeader"in S&&t.forEach(_,function(re,z){typeof m>"u"&&z.toLowerCase()==="content-type"?delete _[z]:S.setRequestHeader(z,re)}),t.isUndefined(h.withCredentials)||(S.withCredentials=!!h.withCredentials),D&&D!=="json"&&(S.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&S.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&S.upload&&S.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(C=function(G){S&&(b(!G||G&&G.type?new p("canceled"):G),S.abort(),S=null)},h.cancelToken&&h.cancelToken.subscribe(C),h.signal&&(h.signal.aborted?C():h.signal.addEventListener("abort",C))),m||(m=null),S.send(m)})},Bl}var Tr=un,fd=$F,t3=g1,r3=v1,n3={"Content-Type":"application/x-www-form-urlencoded"};function cd(t,e){!Tr.isUndefined(t)&&Tr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function i3(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=ld()),t}function u3(t,e,r){if(Tr.isString(t))try{return(e||JSON.parse)(t),Tr.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Qs={transitional:r3,adapter:i3(),transformRequest:[function(e,r){return fd(r,"Accept"),fd(r,"Content-Type"),Tr.isFormData(e)||Tr.isArrayBuffer(e)||Tr.isBuffer(e)||Tr.isStream(e)||Tr.isFile(e)||Tr.isBlob(e)?e:Tr.isArrayBufferView(e)?e.buffer:Tr.isURLSearchParams(e)?(cd(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Tr.isObject(e)||r&&r["Content-Type"]==="application/json"?(cd(r,"application/json"),u3(e)):e}],transformResponse:[function(e){var r=this.transitional||Qs.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,u=!n&&this.responseType==="json";if(u||i&&Tr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(u)throw o.name==="SyntaxError"?t3(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Tr.forEach(["delete","get","head"],function(e){Qs.headers[e]={}});Tr.forEach(["post","put","patch"],function(e){Qs.headers[e]=Tr.merge(n3)});var Nf=Qs,a3=un,s3=Nf,o3=function(e,r,n){var i=this||s3;return a3.forEach(n,function(o){e=o.call(i,e,r)}),e},Ol,hd;function _1(){return hd||(hd=1,Ol=function(e){return!!(e&&e.__CANCEL__)}),Ol}var dd=un,Ml=o3,l3=_1(),f3=Nf,c3=Js();function Pl(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new c3("canceled")}var h3=function(e){Pl(e),e.headers=e.headers||{},e.data=Ml.call(e,e.data,e.headers,e.transformRequest),e.headers=dd.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),dd.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||f3.adapter;return r(e).then(function(i){return Pl(e),i.data=Ml.call(e,i.data,i.headers,e.transformResponse),i},function(i){return l3(i)||(Pl(e),i&&i.response&&(i.response.data=Ml.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},hn=un,D1=function(e,r){r=r||{};var n={};function i(f,h){return hn.isPlainObject(f)&&hn.isPlainObject(h)?hn.merge(f,h):hn.isPlainObject(h)?hn.merge({},h):hn.isArray(h)?h.slice():h}function u(f){if(hn.isUndefined(r[f])){if(!hn.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function o(f){if(!hn.isUndefined(r[f]))return i(void 0,r[f])}function s(f){if(hn.isUndefined(r[f])){if(!hn.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function c(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var p={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return hn.forEach(Object.keys(e).concat(Object.keys(r)),function(h){var d=p[h]||u,g=d(h);hn.isUndefined(g)&&d!==c||(n[h]=g)}),n},Tl,pd;function b1(){return pd||(pd=1,Tl={version:"0.26.1"}),Tl}var d3=b1().version,Rf={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Rf[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var gd={};Rf.transitional=function(e,r,n){function i(u,o){return"[Axios v"+d3+"] Transitional option '"+u+"'"+o+(n?". "+n:"")}return function(u,o,s){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!gd[o]&&(gd[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(u,o,s):!0}};function p3(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var u=n[i],o=e[u];if(o){var s=t[u],c=s===void 0||o(s,u,t);if(c!==!0)throw new TypeError("option "+u+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+u)}}var g3={assertOptions:p3,validators:Rf},y1=un,v3=p1,vd=HF,md=h3,eo=D1,w1=g3,gu=w1.validators;function ca(t){this.defaults=t,this.interceptors={request:new vd,response:new vd}}ca.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=eo(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&w1.assertOptions(n,{silentJSONParsing:gu.transitional(gu.boolean),forcedJSONParsing:gu.transitional(gu.boolean),clarifyTimeoutError:gu.transitional(gu.boolean)},!1);var i=[],u=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(u=u&&g.synchronous,i.unshift(g.fulfilled,g.rejected))});var o=[];this.interceptors.response.forEach(function(g){o.push(g.fulfilled,g.rejected)});var s;if(!u){var c=[md,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(o),s=Promise.resolve(r);c.length;)s=s.then(c.shift(),c.shift());return s}for(var p=r;i.length;){var f=i.shift(),h=i.shift();try{p=f(p)}catch(d){h(d);break}}try{s=md(p)}catch(d){return Promise.reject(d)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};ca.prototype.getUri=function(e){return e=eo(this.defaults,e),v3(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};y1.forEach(["delete","get","head","options"],function(e){ca.prototype[e]=function(r,n){return this.request(eo(n||{},{method:e,url:r,data:(n||{}).data}))}});y1.forEach(["post","put","patch"],function(e){ca.prototype[e]=function(r,n,i){return this.request(eo(i||{},{method:e,url:r,data:n}))}});var m3=ca,kl,_d;function _3(){if(_d)return kl;_d=1;var t=Js();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(u){if(i._listeners){var o,s=i._listeners.length;for(o=0;o<s;o++)i._listeners[o](u);i._listeners=null}}),this.promise.then=function(u){var o,s=new Promise(function(c){i.subscribe(c),o=c}).then(u);return s.cancel=function(){i.unsubscribe(o)},s},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},kl=e,kl}var Il,Dd;function D3(){return Dd||(Dd=1,Il=function(e){return function(n){return e.apply(null,n)}}),Il}var xl,bd;function b3(){if(bd)return xl;bd=1;var t=un;return xl=function(r){return t.isObject(r)&&r.isAxiosError===!0},xl}var yd=un,y3=f1,ls=m3,w3=D1,A3=Nf;function A1(t){var e=new ls(t),r=y3(ls.prototype.request,e);return yd.extend(r,ls.prototype,e),yd.extend(r,e),r.create=function(i){return A1(w3(t,i))},r}var Yn=A1(A3);Yn.Axios=ls;Yn.Cancel=Js();Yn.CancelToken=_3();Yn.isCancel=_1();Yn.VERSION=b1().version;Yn.all=function(e){return Promise.all(e)};Yn.spread=D3();Yn.isAxiosError=b3();BF.exports=Yn;Os.default=Yn;(function(t){t.exports=Os})(SF);var ur={},Lf={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RequiredError=t.BaseAPI=t.COLLECTION_FORMATS=t.BASE_PATH=void 0;const e=Bs;t.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class r{constructor(u,o=t.BASE_PATH,s=e.default){this.basePath=o,this.axios=s,u&&(this.configuration=u,this.basePath=u.basePath||this.basePath)}}t.BaseAPI=r;class n extends Error{constructor(u,o){super(o),this.field=u,this.name="RequiredError"}}t.RequiredError=n})(Lf);var Uf=dr&&dr.__awaiter||function(t,e,r,n){function i(u){return u instanceof r?u:new r(function(o){o(u)})}return new(r||(r=Promise))(function(u,o){function s(f){try{p(n.next(f))}catch(h){o(h)}}function c(f){try{p(n.throw(f))}catch(h){o(h)}}function p(f){f.done?u(f.value):i(f.value).then(s,c)}p((n=n.apply(t,e||[])).next())})};Object.defineProperty(ur,"__esModule",{value:!0});ur.createRequestFunction=ur.toPathString=ur.serializeDataIfNeeded=ur.setSearchParams=ur.setOAuthToObject=ur.setBearerAuthToObject=ur.setBasicAuthToObject=ur.setApiKeyToObject=ur.assertParamExists=ur.DUMMY_BASE_URL=void 0;const E3=Lf;ur.DUMMY_BASE_URL="https://example.com";ur.assertParamExists=function(t,e,r){if(r==null)throw new E3.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};ur.setApiKeyToObject=function(t,e,r){return Uf(this,void 0,void 0,function*(){if(r&&r.apiKey){const n=typeof r.apiKey=="function"?yield r.apiKey(e):yield r.apiKey;t[e]=n}})};ur.setBasicAuthToObject=function(t,e){e&&(e.username||e.password)&&(t.auth={username:e.username,password:e.password})};ur.setBearerAuthToObject=function(t,e){return Uf(this,void 0,void 0,function*(){if(e&&e.accessToken){const r=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;t.Authorization="Bearer "+r}})};ur.setOAuthToObject=function(t,e,r,n){return Uf(this,void 0,void 0,function*(){if(n&&n.accessToken){const i=typeof n.accessToken=="function"?yield n.accessToken(e,r):yield n.accessToken;t.Authorization="Bearer "+i}})};function lf(t,e,r=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(n=>lf(t,n,r)):Object.keys(e).forEach(n=>lf(t,e[n],`${r}${r!==""?".":""}${n}`)):t.has(r)?t.append(r,e):t.set(r,e))}ur.setSearchParams=function(t,...e){const r=new URLSearchParams(t.search);lf(r,e),t.search=r.toString()};ur.serializeDataIfNeeded=function(t,e,r){const n=typeof t!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(t!==void 0?t:{}):t||""};ur.toPathString=function(t){return t.pathname+t.search+t.hash};ur.createRequestFunction=function(t,e,r,n){return(i=e,u=r)=>{const o=Object.assign(Object.assign({},t.options),{url:((n==null?void 0:n.basePath)||u)+t.url});return i.request(o)}};(function(t){var e=dr&&dr.__awaiter||function(o,s,c,p){function f(h){return h instanceof c?h:new c(function(d){d(h)})}return new(c||(c=Promise))(function(h,d){function g(_){try{m(p.next(_))}catch(D){d(D)}}function b(_){try{m(p.throw(_))}catch(D){d(D)}}function m(_){_.done?h(_.value):f(_.value).then(g,b)}m((p=p.apply(o,s||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIApi=t.OpenAIApiFactory=t.OpenAIApiFp=t.OpenAIApiAxiosParamCreator=t.CreateImageRequestResponseFormatEnum=t.CreateImageRequestSizeEnum=t.ChatCompletionResponseMessageRoleEnum=t.ChatCompletionRequestMessageRoleEnum=void 0;const r=Bs,n=ur,i=Lf;t.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},t.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},t.OpenAIApiAxiosParamCreator=function(o){return{cancelFineTune:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("cancelFineTune","fineTuneId",s);const p="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),{url:n.toPathString(f),options:d}}),createAnswer:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createAnswer","createAnswerRequest",s);const p="/answers",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createChatCompletion:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createChatCompletion","createChatCompletionRequest",s);const p="/chat/completions",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createClassification:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createClassification","createClassificationRequest",s);const p="/classifications",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createCompletion:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createCompletion","createCompletionRequest",s);const p="/completions",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createEdit:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEdit","createEditRequest",s);const p="/edits",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createEmbedding:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEmbedding","createEmbeddingRequest",s);const p="/embeddings",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createFile:(s,c,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFile","file",s),n.assertParamExists("createFile","purpose",c);const f="/files",h=new URL(f,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},d),p),b={},m={},_=new(o&&o.formDataCtor||FormData);s!==void 0&&_.append("file",s),c!==void 0&&_.append("purpose",c),b["Content-Type"]="multipart/form-data",n.setSearchParams(h,m);let D=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),_.getHeaders()),D),p.headers),g.data=_,{url:n.toPathString(h),options:g}}),createFineTune:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFineTune","createFineTuneRequest",s);const p="/fine-tunes",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createImage:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImage","createImageRequest",s);const p="/images/generations",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createImageEdit:(s,c,p,f,h,d,g,b={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageEdit","image",s),n.assertParamExists("createImageEdit","prompt",c);const m="/images/edits",_=new URL(m,n.DUMMY_BASE_URL);let D;o&&(D=o.baseOptions);const C=Object.assign(Object.assign({method:"POST"},D),b),A={},S={},E=new(o&&o.formDataCtor||FormData);s!==void 0&&E.append("image",s),p!==void 0&&E.append("mask",p),c!==void 0&&E.append("prompt",c),f!==void 0&&E.append("n",f),h!==void 0&&E.append("size",h),d!==void 0&&E.append("response_format",d),g!==void 0&&E.append("user",g),A["Content-Type"]="multipart/form-data",n.setSearchParams(_,S);let B=D&&D.headers?D.headers:{};return C.headers=Object.assign(Object.assign(Object.assign(Object.assign({},A),E.getHeaders()),B),b.headers),C.data=E,{url:n.toPathString(_),options:C}}),createImageVariation:(s,c,p,f,h,d={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageVariation","image",s);const g="/images/variations",b=new URL(g,n.DUMMY_BASE_URL);let m;o&&(m=o.baseOptions);const _=Object.assign(Object.assign({method:"POST"},m),d),D={},C={},A=new(o&&o.formDataCtor||FormData);s!==void 0&&A.append("image",s),c!==void 0&&A.append("n",c),p!==void 0&&A.append("size",p),f!==void 0&&A.append("response_format",f),h!==void 0&&A.append("user",h),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,C);let S=m&&m.headers?m.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),A.getHeaders()),S),d.headers),_.data=A,{url:n.toPathString(b),options:_}}),createModeration:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createModeration","createModerationRequest",s);const p="/moderations",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),c),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createSearch:(s,c,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createSearch","engineId",s),n.assertParamExists("createSearch","createSearchRequest",c);const f="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(s))),h=new URL(f,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},d),p),b={},m={};b["Content-Type"]="application/json",n.setSearchParams(h,m);let _=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),_),p.headers),g.data=n.serializeDataIfNeeded(c,g,o),{url:n.toPathString(h),options:g}}),createTranscription:(s,c,p,f,h,d,g={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranscription","file",s),n.assertParamExists("createTranscription","model",c);const b="/audio/transcriptions",m=new URL(b,n.DUMMY_BASE_URL);let _;o&&(_=o.baseOptions);const D=Object.assign(Object.assign({method:"POST"},_),g),C={},A={},S=new(o&&o.formDataCtor||FormData);s!==void 0&&S.append("file",s),c!==void 0&&S.append("model",c),p!==void 0&&S.append("prompt",p),f!==void 0&&S.append("response_format",f),h!==void 0&&S.append("temperature",h),d!==void 0&&S.append("language",d),C["Content-Type"]="multipart/form-data",n.setSearchParams(m,A);let E=_&&_.headers?_.headers:{};return D.headers=Object.assign(Object.assign(Object.assign(Object.assign({},C),S.getHeaders()),E),g.headers),D.data=S,{url:n.toPathString(m),options:D}}),createTranslation:(s,c,p,f,h,d={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranslation","file",s),n.assertParamExists("createTranslation","model",c);const g="/audio/translations",b=new URL(g,n.DUMMY_BASE_URL);let m;o&&(m=o.baseOptions);const _=Object.assign(Object.assign({method:"POST"},m),d),D={},C={},A=new(o&&o.formDataCtor||FormData);s!==void 0&&A.append("file",s),c!==void 0&&A.append("model",c),p!==void 0&&A.append("prompt",p),f!==void 0&&A.append("response_format",f),h!==void 0&&A.append("temperature",h),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,C);let S=m&&m.headers?m.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),A.getHeaders()),S),d.headers),_.data=A,{url:n.toPathString(b),options:_}}),deleteFile:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteFile","fileId",s);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},h),c),g={},b={};n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),{url:n.toPathString(f),options:d}}),deleteModel:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteModel","model",s);const p="/models/{model}".replace("{model}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},h),c),g={},b={};n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),{url:n.toPathString(f),options:d}}),downloadFile:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("downloadFile","fileId",s);const p="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),c),g={},b={};n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),{url:n.toPathString(f),options:d}}),listEngines:(s={})=>e(this,void 0,void 0,function*(){const c="/engines",p=new URL(c,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),s),d={},g={};n.setSearchParams(p,g);let b=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:h}}),listFiles:(s={})=>e(this,void 0,void 0,function*(){const c="/files",p=new URL(c,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),s),d={},g={};n.setSearchParams(p,g);let b=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:h}}),listFineTuneEvents:(s,c,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("listFineTuneEvents","fineTuneId",s);const f="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(s))),h=new URL(f,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"GET"},d),p),b={},m={};c!==void 0&&(m.stream=c),n.setSearchParams(h,m);let _=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),_),p.headers),{url:n.toPathString(h),options:g}}),listFineTunes:(s={})=>e(this,void 0,void 0,function*(){const c="/fine-tunes",p=new URL(c,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),s),d={},g={};n.setSearchParams(p,g);let b=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:h}}),listModels:(s={})=>e(this,void 0,void 0,function*(){const c="/models",p=new URL(c,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),s),d={},g={};n.setSearchParams(p,g);let b=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:h}}),retrieveEngine:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveEngine","engineId",s);const p="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),c),g={},b={};n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),{url:n.toPathString(f),options:d}}),retrieveFile:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFile","fileId",s);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),c),g={},b={};n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),{url:n.toPathString(f),options:d}}),retrieveFineTune:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFineTune","fineTuneId",s);const p="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),c),g={},b={};n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),{url:n.toPathString(f),options:d}}),retrieveModel:(s,c={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveModel","model",s);const p="/models/{model}".replace("{model}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),c),g={},b={};n.setSearchParams(f,b);let m=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),m),c.headers),{url:n.toPathString(f),options:d}})}},t.OpenAIApiFp=function(o){const s=t.OpenAIApiAxiosParamCreator(o);return{cancelFineTune(c,p){return e(this,void 0,void 0,function*(){const f=yield s.cancelFineTune(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createAnswer(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createAnswer(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createChatCompletion(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createChatCompletion(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createClassification(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createClassification(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createCompletion(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createCompletion(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createEdit(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createEdit(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createEmbedding(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createEmbedding(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createFile(c,p,f){return e(this,void 0,void 0,function*(){const h=yield s.createFile(c,p,f);return n.createRequestFunction(h,r.default,i.BASE_PATH,o)})},createFineTune(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createFineTune(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createImage(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createImage(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createImageEdit(c,p,f,h,d,g,b,m){return e(this,void 0,void 0,function*(){const _=yield s.createImageEdit(c,p,f,h,d,g,b,m);return n.createRequestFunction(_,r.default,i.BASE_PATH,o)})},createImageVariation(c,p,f,h,d,g){return e(this,void 0,void 0,function*(){const b=yield s.createImageVariation(c,p,f,h,d,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},createModeration(c,p){return e(this,void 0,void 0,function*(){const f=yield s.createModeration(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createSearch(c,p,f){return e(this,void 0,void 0,function*(){const h=yield s.createSearch(c,p,f);return n.createRequestFunction(h,r.default,i.BASE_PATH,o)})},createTranscription(c,p,f,h,d,g,b){return e(this,void 0,void 0,function*(){const m=yield s.createTranscription(c,p,f,h,d,g,b);return n.createRequestFunction(m,r.default,i.BASE_PATH,o)})},createTranslation(c,p,f,h,d,g){return e(this,void 0,void 0,function*(){const b=yield s.createTranslation(c,p,f,h,d,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},deleteFile(c,p){return e(this,void 0,void 0,function*(){const f=yield s.deleteFile(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},deleteModel(c,p){return e(this,void 0,void 0,function*(){const f=yield s.deleteModel(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},downloadFile(c,p){return e(this,void 0,void 0,function*(){const f=yield s.downloadFile(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},listEngines(c){return e(this,void 0,void 0,function*(){const p=yield s.listEngines(c);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listFiles(c){return e(this,void 0,void 0,function*(){const p=yield s.listFiles(c);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listFineTuneEvents(c,p,f){return e(this,void 0,void 0,function*(){const h=yield s.listFineTuneEvents(c,p,f);return n.createRequestFunction(h,r.default,i.BASE_PATH,o)})},listFineTunes(c){return e(this,void 0,void 0,function*(){const p=yield s.listFineTunes(c);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listModels(c){return e(this,void 0,void 0,function*(){const p=yield s.listModels(c);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},retrieveEngine(c,p){return e(this,void 0,void 0,function*(){const f=yield s.retrieveEngine(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},retrieveFile(c,p){return e(this,void 0,void 0,function*(){const f=yield s.retrieveFile(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},retrieveFineTune(c,p){return e(this,void 0,void 0,function*(){const f=yield s.retrieveFineTune(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},retrieveModel(c,p){return e(this,void 0,void 0,function*(){const f=yield s.retrieveModel(c,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})}}},t.OpenAIApiFactory=function(o,s,c){const p=t.OpenAIApiFp(o);return{cancelFineTune(f,h){return p.cancelFineTune(f,h).then(d=>d(c,s))},createAnswer(f,h){return p.createAnswer(f,h).then(d=>d(c,s))},createChatCompletion(f,h){return p.createChatCompletion(f,h).then(d=>d(c,s))},createClassification(f,h){return p.createClassification(f,h).then(d=>d(c,s))},createCompletion(f,h){return p.createCompletion(f,h).then(d=>d(c,s))},createEdit(f,h){return p.createEdit(f,h).then(d=>d(c,s))},createEmbedding(f,h){return p.createEmbedding(f,h).then(d=>d(c,s))},createFile(f,h,d){return p.createFile(f,h,d).then(g=>g(c,s))},createFineTune(f,h){return p.createFineTune(f,h).then(d=>d(c,s))},createImage(f,h){return p.createImage(f,h).then(d=>d(c,s))},createImageEdit(f,h,d,g,b,m,_,D){return p.createImageEdit(f,h,d,g,b,m,_,D).then(C=>C(c,s))},createImageVariation(f,h,d,g,b,m){return p.createImageVariation(f,h,d,g,b,m).then(_=>_(c,s))},createModeration(f,h){return p.createModeration(f,h).then(d=>d(c,s))},createSearch(f,h,d){return p.createSearch(f,h,d).then(g=>g(c,s))},createTranscription(f,h,d,g,b,m,_){return p.createTranscription(f,h,d,g,b,m,_).then(D=>D(c,s))},createTranslation(f,h,d,g,b,m){return p.createTranslation(f,h,d,g,b,m).then(_=>_(c,s))},deleteFile(f,h){return p.deleteFile(f,h).then(d=>d(c,s))},deleteModel(f,h){return p.deleteModel(f,h).then(d=>d(c,s))},downloadFile(f,h){return p.downloadFile(f,h).then(d=>d(c,s))},listEngines(f){return p.listEngines(f).then(h=>h(c,s))},listFiles(f){return p.listFiles(f).then(h=>h(c,s))},listFineTuneEvents(f,h,d){return p.listFineTuneEvents(f,h,d).then(g=>g(c,s))},listFineTunes(f){return p.listFineTunes(f).then(h=>h(c,s))},listModels(f){return p.listModels(f).then(h=>h(c,s))},retrieveEngine(f,h){return p.retrieveEngine(f,h).then(d=>d(c,s))},retrieveFile(f,h){return p.retrieveFile(f,h).then(d=>d(c,s))},retrieveFineTune(f,h){return p.retrieveFineTune(f,h).then(d=>d(c,s))},retrieveModel(f,h){return p.retrieveModel(f,h).then(d=>d(c,s))}}};class u extends i.BaseAPI{cancelFineTune(s,c){return t.OpenAIApiFp(this.configuration).cancelFineTune(s,c).then(p=>p(this.axios,this.basePath))}createAnswer(s,c){return t.OpenAIApiFp(this.configuration).createAnswer(s,c).then(p=>p(this.axios,this.basePath))}createChatCompletion(s,c){return t.OpenAIApiFp(this.configuration).createChatCompletion(s,c).then(p=>p(this.axios,this.basePath))}createClassification(s,c){return t.OpenAIApiFp(this.configuration).createClassification(s,c).then(p=>p(this.axios,this.basePath))}createCompletion(s,c){return t.OpenAIApiFp(this.configuration).createCompletion(s,c).then(p=>p(this.axios,this.basePath))}createEdit(s,c){return t.OpenAIApiFp(this.configuration).createEdit(s,c).then(p=>p(this.axios,this.basePath))}createEmbedding(s,c){return t.OpenAIApiFp(this.configuration).createEmbedding(s,c).then(p=>p(this.axios,this.basePath))}createFile(s,c,p){return t.OpenAIApiFp(this.configuration).createFile(s,c,p).then(f=>f(this.axios,this.basePath))}createFineTune(s,c){return t.OpenAIApiFp(this.configuration).createFineTune(s,c).then(p=>p(this.axios,this.basePath))}createImage(s,c){return t.OpenAIApiFp(this.configuration).createImage(s,c).then(p=>p(this.axios,this.basePath))}createImageEdit(s,c,p,f,h,d,g,b){return t.OpenAIApiFp(this.configuration).createImageEdit(s,c,p,f,h,d,g,b).then(m=>m(this.axios,this.basePath))}createImageVariation(s,c,p,f,h,d){return t.OpenAIApiFp(this.configuration).createImageVariation(s,c,p,f,h,d).then(g=>g(this.axios,this.basePath))}createModeration(s,c){return t.OpenAIApiFp(this.configuration).createModeration(s,c).then(p=>p(this.axios,this.basePath))}createSearch(s,c,p){return t.OpenAIApiFp(this.configuration).createSearch(s,c,p).then(f=>f(this.axios,this.basePath))}createTranscription(s,c,p,f,h,d,g){return t.OpenAIApiFp(this.configuration).createTranscription(s,c,p,f,h,d,g).then(b=>b(this.axios,this.basePath))}createTranslation(s,c,p,f,h,d){return t.OpenAIApiFp(this.configuration).createTranslation(s,c,p,f,h,d).then(g=>g(this.axios,this.basePath))}deleteFile(s,c){return t.OpenAIApiFp(this.configuration).deleteFile(s,c).then(p=>p(this.axios,this.basePath))}deleteModel(s,c){return t.OpenAIApiFp(this.configuration).deleteModel(s,c).then(p=>p(this.axios,this.basePath))}downloadFile(s,c){return t.OpenAIApiFp(this.configuration).downloadFile(s,c).then(p=>p(this.axios,this.basePath))}listEngines(s){return t.OpenAIApiFp(this.configuration).listEngines(s).then(c=>c(this.axios,this.basePath))}listFiles(s){return t.OpenAIApiFp(this.configuration).listFiles(s).then(c=>c(this.axios,this.basePath))}listFineTuneEvents(s,c,p){return t.OpenAIApiFp(this.configuration).listFineTuneEvents(s,c,p).then(f=>f(this.axios,this.basePath))}listFineTunes(s){return t.OpenAIApiFp(this.configuration).listFineTunes(s).then(c=>c(this.axios,this.basePath))}listModels(s){return t.OpenAIApiFp(this.configuration).listModels(s).then(c=>c(this.axios,this.basePath))}retrieveEngine(s,c){return t.OpenAIApiFp(this.configuration).retrieveEngine(s,c).then(p=>p(this.axios,this.basePath))}retrieveFile(s,c){return t.OpenAIApiFp(this.configuration).retrieveFile(s,c).then(p=>p(this.axios,this.basePath))}retrieveFineTune(s,c){return t.OpenAIApiFp(this.configuration).retrieveFineTune(s,c).then(p=>p(this.axios,this.basePath))}retrieveModel(s,c){return t.OpenAIApiFp(this.configuration).retrieveModel(s,c).then(p=>p(this.axios,this.basePath))}}t.OpenAIApi=u})(l1);var to={};const C3="openai",F3="3.2.1",S3="Node.js library for the OpenAI API",B3={type:"git",url:"git@github.com:openai/openai-node.git"},O3=["openai","open","ai","gpt-3","gpt3"],M3="OpenAI",P3="MIT",T3="./dist/index.js",k3="./dist/index.d.ts",I3={build:"tsc --outDir dist/"},x3={axios:"^0.26.0","form-data":"^4.0.0"},N3={"@types/node":"^12.11.5",typescript:"^3.6.4"},R3={name:C3,version:F3,description:S3,repository:B3,keywords:O3,author:M3,license:P3,main:T3,types:k3,scripts:I3,dependencies:x3,devDependencies:N3};var Nl,wd;function L3(){return wd||(wd=1,Nl=typeof self=="object"?self.FormData:window.FormData),Nl}Object.defineProperty(to,"__esModule",{value:!0});to.Configuration=void 0;const U3=R3;class V3{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${U3.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=L3())}isJsonMime(e){const r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(r.test(e)||e.toLowerCase()==="application/json-patch+json")}}to.Configuration=V3;(function(t){var e=dr&&dr.__createBinding||(Object.create?function(n,i,u,o){o===void 0&&(o=u),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[u]}})}:function(n,i,u,o){o===void 0&&(o=u),n[o]=i[u]}),r=dr&&dr.__exportStar||function(n,i){for(var u in n)u!=="default"&&!i.hasOwnProperty(u)&&e(i,n,u)};Object.defineProperty(t,"__esModule",{value:!0}),r(l1,t),r(to,t)})(af);function Vf(t){const e=new af.Configuration({apiKey:t});return new af.OpenAIApi(e)}async function j3(t,e,r="text-davinci-003"){return await t.createCompletion({model:r,prompt:e,temperature:.8,max_tokens:250})}async function q3(t,e,r="gpt-3.5-turbo"){return await t.createChatCompletion({model:r,messages:[{role:"user",content:e}],temperature:.8,max_tokens:250})}async function z3(t,e,r="text-embedding-ada-002"){return await t.createEmbedding({model:r,input:e})}async function W3(t){return await t.listModels()}const Rl="preferredEmbeddingModelStore";function H3(){const t=Yr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Rl]||""),{subscribe:e,update:u=>{!u||!i||(localStorage[Rl]=u,r(u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[Rl],r(""))}}}const ff=H3(),E1=Kr(ff,t=>Ct(ff)),Ll="oKeyStore";function G3(){const t=Yr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Ll]||""),{subscribe:e,update:u=>{!u||!i||(localStorage[Ll]=u,r(u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[Ll],r(""))}}}const Ms=G3(),jf=Kr(Ms,t=>Ct(Ms));function $3(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!0,pending:X3,then:Z3,catch:Y3,value:25,error:26,blocks:[,,,]};return Bi(r=t[6],i),{c(){e=It(),i.block.c()},l(u){e=It(),i.block.l(u)},m(u,o){_e(u,e,o),i.block.m(u,i.anchor=o),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(u,o){t=u,i.ctx=t,o&64&&r!==(r=t[6])&&Bi(r,i)||Us(i,t,o)},i(u){n||(Ae(i.block),n=!0)},o(u){for(let o=0;o<3;o+=1){const s=i.blocks[o];Se(s)}n=!1},d(u){u&&I(e),i.block.d(u),i.token=null,i=null}}}function K3(t){let e,r,n,i,u;return{c(){e=Q("div"),r=Q("div"),n=Q("div"),i=Q("p"),u=Ve("Set OpenAI key in settings to use embedding map."),this.h()},l(o){e=ee(o,"DIV",{class:!0});var s=$(e);r=ee(s,"DIV",{class:!0});var c=$(r);n=ee(c,"DIV",{class:!0});var p=$(n);i=ee(p,"P",{class:!0});var f=$(i);u=je(f,"Set OpenAI key in settings to use embedding map."),f.forEach(I),p.forEach(I),c.forEach(I),s.forEach(I),this.h()},h(){O(i,"class","text-center text-lg"),O(n,"class","h-20 w-52"),O(r,"class","flex flex-col justify-center"),O(e,"class","w-full h-full flex justify-center")},m(o,s){_e(o,e,s),R(e,r),R(r,n),R(n,i),R(i,u)},p:Me,i:Me,o:Me,d(o){o&&I(e)}}}function Y3(t){let e,r=t[26].message+"",n;return{c(){e=Q("p"),n=Ve(r),this.h()},l(i){e=ee(i,"P",{style:!0});var u=$(e);n=je(u,r),u.forEach(I),this.h()},h(){Yt(e,"color","red")},m(i,u){_e(i,e,u),R(e,n)},p(i,u){u&64&&r!==(r=i[26].message+"")&&rn(n,r)},i:Me,o:Me,d(i){i&&I(e)}}}function Z3(t){let e,r,n,i,u,o,s,c,p,f,h,d,g,b,m,_,D,C,A,S,E,B,P,T,N,G,re,z,Y,V,U,q,J,Z,X,le,ge,Ee,ye,Oe,qe,Ie,tt,He,Ue,ze,mt,ut,lt,at;r=new FF({props:{dimensions:t[3],center:t[8]}});let st=t[4].embedExponentialScaling&&Ad(t);return{c(){e=Q("div"),$e(r.$$.fragment),i=xe(),u=Q("div"),o=Q("div"),s=Q("label"),c=Q("span"),p=Ve("Exponential Scaling"),f=xe(),h=Q("input"),g=xe(),st&&st.c(),b=xe(),m=Q("div"),_=Q("label"),D=Q("span"),C=Ve("# Prompts"),A=xe(),S=Q("input"),E=xe(),B=Q("div"),P=Q("div"),T=Q("label"),N=Q("span"),G=Ve("Clusters"),re=xe(),z=Q("div"),Y=Q("button"),V=Ve("0"),q=xe(),J=Q("button"),Z=Ve("2"),X=xe(),le=Q("button"),ge=Ve("4"),Ee=xe(),ye=Q("button"),Oe=Ve("6"),qe=xe(),Ie=Q("button"),tt=Ve("8"),He=xe(),Ue=Q("div"),ze=Q("button"),mt=Ve("Shuffle"),this.h()},l(Xe){e=ee(Xe,"DIV",{class:!0});var Je=$(e);Ke(r.$$.fragment,Je),Je.forEach(I),i=Ne(Xe),u=ee(Xe,"DIV",{class:!0});var Ce=$(u);o=ee(Ce,"DIV",{class:!0});var Te=$(o);s=ee(Te,"LABEL",{class:!0});var Ot=$(s);c=ee(Ot,"SPAN",{class:!0});var Vt=$(c);p=je(Vt,"Exponential Scaling"),Vt.forEach(I),Ot.forEach(I),f=Ne(Te),h=ee(Te,"INPUT",{type:!0,class:!0}),Te.forEach(I),g=Ne(Ce),st&&st.l(Ce),b=Ne(Ce),m=ee(Ce,"DIV",{class:!0});var Ht=$(m);_=ee(Ht,"LABEL",{class:!0});var j=$(_);D=ee(j,"SPAN",{class:!0});var H=$(D);C=je(H,"# Prompts"),H.forEach(I),j.forEach(I),A=Ne(Ht),S=ee(Ht,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Ht.forEach(I),E=Ne(Ce),B=ee(Ce,"DIV",{class:!0});var te=$(B);P=ee(te,"DIV",{class:!0});var fe=$(P);T=ee(fe,"LABEL",{class:!0});var ae=$(T);N=ee(ae,"SPAN",{class:!0});var he=$(N);G=je(he,"Clusters"),he.forEach(I),ae.forEach(I),re=Ne(fe),z=ee(fe,"DIV",{class:!0});var se=$(z);Y=ee(se,"BUTTON",{class:!0});var ce=$(Y);V=je(ce,"0"),ce.forEach(I),q=Ne(se),J=ee(se,"BUTTON",{class:!0});var we=$(J);Z=je(we,"2"),we.forEach(I),X=Ne(se),le=ee(se,"BUTTON",{class:!0});var Re=$(le);ge=je(Re,"4"),Re.forEach(I),Ee=Ne(se),ye=ee(se,"BUTTON",{class:!0});var rt=$(ye);Oe=je(rt,"6"),rt.forEach(I),qe=Ne(se),Ie=ee(se,"BUTTON",{class:!0});var Be=$(Ie);tt=je(Be,"8"),Be.forEach(I),se.forEach(I),fe.forEach(I),te.forEach(I),He=Ne(Ce),Ue=ee(Ce,"DIV",{class:!0});var zt=$(Ue);ze=ee(zt,"BUTTON",{class:!0});var xt=$(ze);mt=je(xt,"Shuffle"),xt.forEach(I),zt.forEach(I),Ce.forEach(I),this.h()},h(){O(e,"class","w-full h-full"),wu(()=>t[15].call(e)),O(c,"class","label-text"),O(s,"class","label"),O(h,"type","checkbox"),O(h,"class","toggle toggle-sm"),h.checked=d=t[4].embedExponentialScaling,O(o,"class","min-w-max px-2"),O(D,"class","label-text"),O(_,"class","label"),S.value=t[9],O(S,"type","range"),O(S,"min","1"),O(S,"max",t[2]),O(S,"step","1"),O(S,"class","range range-sm"),O(m,"class","w-full px-2"),O(N,"class","label-text"),O(T,"class","label pb-1 m-0"),O(Y,"class",U=(t[4].embedClusters||0)===0?"btn btn-xs btn-active":"btn btn-xs"),O(J,"class","btn btn-xs"),Pt(J,"btn-active",t[4].embedClusters===2),Pt(J,"btn-disabled",Object.keys(t[4].embeddings).length<2),O(le,"class","btn btn-xs"),Pt(le,"btn-active",t[4].embedClusters===4),Pt(le,"btn-disabled",Object.keys(t[4].embeddings).length<4),O(ye,"class","btn btn-xs"),Pt(ye,"btn-active",t[4].embedClusters===6),Pt(ye,"btn-disabled",Object.keys(t[4].embeddings).length<6),O(Ie,"class","btn btn-xs"),Pt(Ie,"btn-active",t[4].embedClusters===8),Pt(Ie,"btn-disabled",Object.keys(t[4].embeddings).length<8),O(z,"class","btn-group btn-group-horizontal p-0"),O(P,"class",""),O(B,"class",""),O(ze,"class","btn btn-xs btn-primary"),O(Ue,"class","w-32 px-2 pb-1 flex flex-col justify-end"),O(u,"class","px-2 py-4 pb-0 flex")},m(Xe,Je){_e(Xe,e,Je),Ye(r,e,null),n=oa(e,t[15].bind(e)),_e(Xe,i,Je),_e(Xe,u,Je),R(u,o),R(o,s),R(s,c),R(c,p),R(o,f),R(o,h),R(u,g),st&&st.m(u,null),R(u,b),R(u,m),R(m,_),R(_,D),R(D,C),R(m,A),R(m,S),R(u,E),R(u,B),R(B,P),R(P,T),R(T,N),R(N,G),R(P,re),R(P,z),R(z,Y),R(Y,V),R(z,q),R(z,J),R(J,Z),R(z,X),R(z,le),R(le,ge),R(z,Ee),R(z,ye),R(ye,Oe),R(z,qe),R(z,Ie),R(Ie,tt),R(u,He),R(u,Ue),R(Ue,ze),R(ze,mt),ut=!0,lt||(at=[Fe(h,"change",t[11]),Fe(S,"change",t[10]),Fe(Y,"click",t[16]),Fe(J,"click",t[17]),Fe(le,"click",t[18]),Fe(ye,"click",t[19]),Fe(Ie,"click",t[20]),Fe(ze,"click",t[14])],lt=!0)},p(Xe,Je){const Ce={};Je&8&&(Ce.dimensions=Xe[3]),Je&256&&(Ce.center=Xe[8]),r.$set(Ce),(!ut||Je&16&&d!==(d=Xe[4].embedExponentialScaling))&&(h.checked=d),Xe[4].embedExponentialScaling?st?st.p(Xe,Je):(st=Ad(Xe),st.c(),st.m(u,b)):st&&(st.d(1),st=null),(!ut||Je&512)&&(S.value=Xe[9]),(!ut||Je&4)&&O(S,"max",Xe[2]),(!ut||Je&16&&U!==(U=(Xe[4].embedClusters||0)===0?"btn btn-xs btn-active":"btn btn-xs"))&&O(Y,"class",U),(!ut||Je&16)&&Pt(J,"btn-active",Xe[4].embedClusters===2),(!ut||Je&16)&&Pt(J,"btn-disabled",Object.keys(Xe[4].embeddings).length<2),(!ut||Je&16)&&Pt(le,"btn-active",Xe[4].embedClusters===4),(!ut||Je&16)&&Pt(le,"btn-disabled",Object.keys(Xe[4].embeddings).length<4),(!ut||Je&16)&&Pt(ye,"btn-active",Xe[4].embedClusters===6),(!ut||Je&16)&&Pt(ye,"btn-disabled",Object.keys(Xe[4].embeddings).length<6),(!ut||Je&16)&&Pt(Ie,"btn-active",Xe[4].embedClusters===8),(!ut||Je&16)&&Pt(Ie,"btn-disabled",Object.keys(Xe[4].embeddings).length<8)},i(Xe){ut||(Ae(r.$$.fragment,Xe),ut=!0)},o(Xe){Se(r.$$.fragment,Xe),ut=!1},d(Xe){Xe&&I(e),Ze(r),n(),Xe&&I(i),Xe&&I(u),st&&st.d(),lt=!1,ar(at)}}}function Ad(t){let e,r,n,i,u,o,s,c,p;return{c(){e=Q("div"),r=Q("label"),n=Q("span"),i=Ve("Scaling Power"),u=xe(),o=Q("input"),this.h()},l(f){e=ee(f,"DIV",{class:!0});var h=$(e);r=ee(h,"LABEL",{class:!0});var d=$(r);n=ee(d,"SPAN",{class:!0});var g=$(n);i=je(g,"Scaling Power"),g.forEach(I),d.forEach(I),u=Ne(h),o=ee(h,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),h.forEach(I),this.h()},h(){O(n,"class","label-text"),O(r,"class","label"),o.value=s=t[4].embedWeightScaling,O(o,"type","range"),O(o,"min","0.5"),O(o,"max","3"),O(o,"step","0.1"),O(o,"class","range range-sm"),O(e,"class","w-full px-2")},m(f,h){_e(f,e,h),R(e,r),R(r,n),R(n,i),R(e,u),R(e,o),c||(p=Fe(o,"change",t[12]),c=!0)},p(f,h){h&16&&s!==(s=f[4].embedWeightScaling)&&(o.value=s)},d(f){f&&I(e),c=!1,p()}}}function X3(t){let e,r,n,i,u,o;return{c(){e=Q("div"),r=Q("div"),n=Q("div"),i=Q("progress"),this.h()},l(s){e=ee(s,"DIV",{class:!0});var c=$(e);r=ee(c,"DIV",{class:!0});var p=$(r);n=ee(p,"DIV",{class:!0});var f=$(n);i=ee(f,"PROGRESS",{class:!0,max:!0}),$(i).forEach(I),f.forEach(I),p.forEach(I),c.forEach(I),this.h()},h(){O(i,"class","progress progress-primary w-56"),i.value=u=Object.keys(t[7]).length,O(i,"max",o=Object.keys(t[4].weightedPrompts).length),O(n,"class","h-20 w-52"),O(r,"class","flex flex-col justify-center"),O(e,"class","w-full h-full flex justify-center")},m(s,c){_e(s,e,c),R(e,r),R(r,n),R(n,i)},p(s,c){c&128&&u!==(u=Object.keys(s[7]).length)&&(i.value=u),c&16&&o!==(o=Object.keys(s[4].weightedPrompts).length)&&O(i,"max",o)},i:Me,o:Me,d(s){s&&I(e)}}}function J3(t){let e,r,n,i;const u=[K3,$3],o=[];function s(c,p){return c[5]?1:0}return e=s(t),r=o[e]=u[e](t),{c(){r.c(),n=It()},l(c){r.l(c),n=It()},m(c,p){o[e].m(c,p),_e(c,n,p),i=!0},p(c,[p]){let f=e;e=s(c),e===f?o[e].p(c,p):(Nr(),Se(o[f],1,1,()=>{o[f]=null}),Rr(),r=o[e],r?r.p(c,p):(r=o[e]=u[e](c),r.c()),Ae(r,1),r.m(n.parentNode,n))},i(c){i||(Ae(r),i=!0)},o(c){Se(r),i=!1},d(c){o[e].d(c),c&&I(n)}}}function Q3(t){return t<2?0:t<4?2:t<6?4:t<8?6:8}function eS(t){return!t.embeddings||!t.embedClusterSets||Object.entries(t.embeddings).length!==Object.entries(t.weightedPrompts).length||(t.lastPromptChange||0)>(t.lastEmbeddingChange||0)}function tS(t,e,r){let n,i,u,o,s,c,p;ct(t,Cr,z=>r(4,s=z)),ct(t,E1,z=>r(21,c=z)),ct(t,jf,z=>r(5,p=z));let f=0,h=0,d=null,g={};function b(z){const{target:Y}=z;if(!Y)return;const V=Y;if(!V.value)return;const U=parseInt(V.value);U>0&&U<=n&&Mt.update({...s,embedPromptLimit:U})}function m(){Mt.update({...s,embedExponentialScaling:!s.embedExponentialScaling})}function _(z){const{target:Y}=z;if(!Y)return;const V=Y;if(!V.value)return;const U=parseInt(V.value);Mt.update({...s,embedWeightScaling:U})}function D(z){[0,2,4,6,8].indexOf(z)!==-1&&Mt.update({...s,embedClusters:z})}function C(z){let Y=new dF({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:5e3,metric:"euclidean"});const V=Object.keys(z),U=Object.values(z);Y.init({data:U,type:"dense"}),Y.run();let J=Y.getOutputScaled().map(([X,le])=>[(X+1)/2,(le+1)/2]);return V.reduce((X,le,ge)=>(X[le]=J[ge],X),{})}function A(z,Y){return new nf.KMEANS().run(z,Y)}async function S(){Mt.update({...s,scaledEmbedMappings:C(s.embeddings)})}async function E(){if(console.log("fetching embeddings"),!p||!s.weightedPrompts)return;const z=Object.entries(s.weightedPrompts).map(([le,ge])=>[le,ge.text]),Y=Vf(p);r(7,g={});for(let le of z){const ge=await z3(Y,le[1],c);r(7,g[le[0]]=ge.data.data[0].embedding,g)}let V=Object.entries(g).sort((le,ge)=>le[0]-ge[0]);const U=le=>new Array(le).fill(null).map(()=>[]);console.log("clustering embeddings");const q=V.length>=2?A(V.map(le=>le[1]),2):[V.map(le=>le[0])];console.log("set of 2 complete");const J=V.length>=4?A(V.map(le=>le[1]),4):q;console.log("set of 4 complete");const Z=V.length>=6?A(V.map(le=>le[1]),6):J;console.log("set of 6 complete");const X=V.length>=8?A(V.map(le=>le[1]),8):Z;console.log("set of 8 complete"),Mt.update({...s,embeddings:g,embedClusterSets:{2:[...q,...U(2-q.length)],4:[...J,...U(4-J.length)],6:[...Z,...U(6-Z.length)],8:[...X,...U(8-X.length)]},lastEmbeddingChange:Date.now(),scaledEmbedMappings:C(g)}),console.log("embeddings complete")}function B(){f=this.clientWidth,h=this.clientHeight,r(0,f),r(1,h)}const P=()=>D(0),T=()=>D(2),N=()=>D(4),G=()=>D(6),re=()=>D(8);return t.$$.update=()=>{t.$$.dirty&16&&r(2,n=Object.keys(s.weightedPrompts||{}).length),t.$$.dirty&20&&r(9,i=s.embedPromptLimit||n),t.$$.dirty&3&&r(3,u=[f||250,h||250]),t.$$.dirty&8&&r(8,o=fa(u)),t.$$.dirty&16&&s.embeddings&&Object.keys(s.embeddings).length<s.embedClusters&&D(Q3(Object.keys(s.embeddings).length)),t.$$.dirty&48&&p&&eS(s)&&r(6,d=E())},[f,h,n,u,s,p,d,g,o,i,b,m,_,D,S,B,P,T,N,G,re]}class rS extends yt{constructor(e){super(),wt(this,e,tS,J3,At,{})}}const ts="showZeroPrompts";function nS(){const t=Yr(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[ts]?JSON.parse(localStorage[ts]):!1),{subscribe:e,update:u=>{i&&(localStorage[ts]=JSON.stringify(!!u),r(!!u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[ts],r(!1))}}}const cf=nS(),qf=Kr(cf,t=>Ct(cf)),rs="useWeightOrdering";function iS(){const t=Yr(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[rs]?JSON.parse(localStorage[rs]):!1),{subscribe:e,update:u=>{i&&(localStorage[rs]=JSON.stringify(!!u),r(!!u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[rs],r(!1))}}}const hf=iS(),zf=Kr(hf,t=>Ct(hf));var df=function(t,e){return df=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},df(t,e)};function Wf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}df(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var pf,Hf=function(){function t(){}return t._xfnv1a=function(e){for(var r=2166136261,n=0;n<e.length;n++)r=Math.imul(r^e.charCodeAt(n),16777619);return function(){return r+=r<<13,r^=r>>>7,r+=r<<3,r^=r>>>17,(r+=r<<5)>>>0}},t}(),uS=function(t){function e(r){var n=t.call(this)||this;return n.a=e._xfnv1a(r)(),n}return Wf(e,t),e.prototype.next=function(){var r=this.a+=1831565813;return r=Math.imul(r^r>>>15,1|r),(((r^=r+Math.imul(r^r>>>7,61|r))^r>>>14)>>>0)/4294967296},e}(Hf),aS=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Wf(e,t),e.prototype.next=function(){this.a>>>=0,this.b>>>=0,this.c>>>=0,this.d>>>=0;var r=this.a+this.b|0;return this.a=this.b^this.b>>>9,this.b=this.c+(this.c<<3)|0,this.c=this.c<<21|this.c>>>11,this.d=this.d+1|0,r=r+this.d|0,this.c=this.c+r|0,(r>>>0)/4294967296},e}(Hf),sS=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Wf(e,t),e.prototype.next=function(){var r=this.b<<9,n=5*this.a;return n=n<<7|9*(n>>>25),this.c^=this.a,this.d^=this.b,this.b^=this.c,this.a^=this.d,this.c^=r,this.d=this.d<<11|this.d>>>21,(n>>>0)/4294967296},e}(Hf);(function(t){t.sfc32="sfc32",t.mulberry32="mulberry32",t.xoshiro128ss="xoshiro128ss"})(pf||(pf={}));var oS=function(){function t(e,r){r===void 0&&(r=pf.sfc32),this.str=e,this.prng=r,this.generator=this._initializeGenerator()}return t.prototype.next=function(){return this.generator.next()},t.prototype._initializeGenerator=function(){if(function(r){return r===null}(e=this.str)||function(r){return r===void 0}(e))return this.wrap();var e;switch(this.prng){case"sfc32":return new aS(this.str);case"mulberry32":return new uS(this.str);case"xoshiro128ss":return new sS(this.str);default:return this.wrap()}},t.prototype.wrap=function(){return{next:function(){return Math.random()}}},t}();const Ul="slotSet";function lS(){const t=Yr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((u,o)=>{if(o.startsWith(Ul)){const s=o.split("_")[1];u[s]=JSON.parse(localStorage[o])}return u},{})||{}),{subscribe:e,update:(u,o)=>{const s=Ct(t),p={...s[u]||{},...o};i&&(localStorage[`${Ul}_${u}`]=JSON.stringify(p));const f={...s,[u]:p};r(f)},get:u=>Ct(t)[u],getAll:()=>Ct(t),delete:u=>{i&&delete localStorage[`${Ul}_${u}`];const o={...Ct(t)};delete o[u],r(o)}}}const Ei=lS(),fS=Kr(Ei,t=>Ct(Ei));function Ed(){return(Math.random()*1e6).toFixed(0)}function cS(){const t=Yr(Ed()),{subscribe:e,set:r}=t;return{subscribe:e,get:()=>Ct(t),shuffle:()=>{r(Ed())}}}const gf=cS(),Gf=Kr(gf,t=>Ct(gf));function Ps(t){let e=t.replace(/\s+/g,"_");return e=e.toUpperCase(),"$"+e}function Cd(t){const e=t.length>0&&t.length<32,r=/^[a-zA-Z0-9 ]+$/.test(t),n=/^[a-zA-Z]/.test(t),i=/[a-zA-Z0-9]$/.test(t);return e&&r&&n&&i}function hS(){const t=Ei.getAll();return Object.values(t).reduce((r,n)=>{const i=Ps(n.name);return i&&(r[i]=[...n.values]),r},{})}function dS(t,e){const r=new oS(e);return Object.entries(t).reduce((i,[u,o])=>(i[u]=[...o].sort(()=>r.next()-.5),i),{})}function Ts(t,e){let r=dS(hS(),e),n=t;for(const[i,u]of Object.entries(r)){if(u.length===0)continue;let o=0;for(;n.includes(i);)o>=u.length&&(o=0),n=n.replace(i,u[o]),o++}return n}function pS(t){const e=[],r=/((?:[^:]+|:(?!:))+)(?:::(\d+(?:\.\d+)?))?(?=\s|$)/g;let n;for(;(n=r.exec(t))!==null;){const i=n[1].trim(),u=n[2]?parseFloat(n[2]):1;i&&e.push([i,u])}return e}function Vl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=t.length-1;let r=t;for(;r[e]===",";)r=r.slice(0,e);return r}function jl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=["-","#","*","•","◦",">","<","+","^","~","(",")","[","]","{","}"];let r=t.trim();for(;e.includes(r[0]);)r=r.slice(1).trim();return/^\d+(\.|\))\s/.test(r)&&(r=r.replace(/^\d+(\.|\))\s/,"")),r}function vf(t){if(t=t.replace(/^\n+|\n+$/g,""),t.includes("::"))return pS(t);if(t.includes(`
`))return t.split(`
`).map(u=>jl(Vl(u))).filter(u=>u.length>0).map(u=>[u,1]);const e=t.match(/[^.!?]+[.!?]+/g)||[],r=e.length,n=t.split(",").map(u=>jl(Vl(u))).filter(u=>u.length>0),i=n.length-1;return r>i?e.map(u=>jl(Vl(u))).filter(u=>u.length>0).map(u=>[u,1]):n.map(u=>[u,1])}function ks(t,e,r){let n=Object.entries(t.weightedPrompts);return e&&(n=n.sort((i,u)=>Si(t,parseInt(u[0]))-Si(t,parseInt(i[0])))),r||(n=n.filter(i=>r||Si(t,parseInt(i[0])))),n}function gS(t){return t.trim().endsWith(".")}function vS(t){let e="",r=[];return t.forEach((n,i)=>{gS(n)?(r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+". ",r=[]),e+=n+" "):r.push(n.trim())}),r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+"."),e.trim()}function mf(t,e,r,n,i){if(r)return ks(t,n,i).map(([o,s],c)=>`${Ts(s.text,`${e}${o}${c}`)}::${Si(t,parseInt(o))}`).join(" ");const u=ks(t,n,i).map(([o,s],c)=>Ts(s.text,`${e}${o}${c}`));return vS(u)}function Fd(t,e,r){const n=t.slice();return n[4]=e[r][0],n[5]=e[r][1],n[7]=r,n}function Sd(t,e){let r,n=Ts(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"",i,u,o,s=Si(e[0],parseInt(e[4]))+"",c,p,f;return{key:t,first:null,c(){r=Q("span"),i=Ve(n),u=Ve("::"),o=Q("b"),c=Ve(s),p=xe(),this.h()},l(h){r=ee(h,"SPAN",{style:!0});var d=$(r);i=je(d,n),u=je(d,"::"),o=ee(d,"B",{});var g=$(o);c=je(g,s),p=Ne(g),g.forEach(I),d.forEach(I),this.h()},h(){O(r,"style",f=`color: rgba(255,255,255,${Math.max(.25,S0(e[0],parseInt(e[4])))});`),this.first=r},m(h,d){_e(h,r,d),R(r,i),R(r,u),R(r,o),R(o,c),R(o,p)},p(h,d){e=h,d&15&&n!==(n=Ts(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"")&&rn(i,n),d&7&&s!==(s=Si(e[0],parseInt(e[4]))+"")&&rn(c,s),d&7&&f!==(f=`color: rgba(255,255,255,${Math.max(.25,S0(e[0],parseInt(e[4])))});`)&&O(r,"style",f)},d(h){h&&I(r)}}}function mS(t){let e,r,n=[],i=new Map,u=ks(t[0],t[1],t[2]);const o=s=>s[4];for(let s=0;s<u.length;s+=1){let c=Fd(t,u,s),p=o(c);i.set(p,n[s]=Sd(p,c))}return{c(){e=Q("div"),r=Q("p");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=ee(s,"DIV",{class:!0});var c=$(e);r=ee(c,"P",{class:!0});var p=$(r);for(let f=0;f<n.length;f+=1)n[f].l(p);p.forEach(I),c.forEach(I),this.h()},h(){O(r,"class","text-sm select-none"),O(e,"class","overflow-y-auto h-full")},m(s,c){_e(s,e,c),R(e,r);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(r,null)},p(s,[c]){c&15&&(u=ks(s[0],s[1],s[2]),n=Kn(n,c,o,1,s,u,i,r,Ti,Sd,null,Fd))},i:Me,o:Me,d(s){s&&I(e);for(let c=0;c<n.length;c+=1)n[c].d()}}}function _S(t,e,r){let n,i,u,o;return ct(t,Cr,s=>r(0,n=s)),ct(t,zf,s=>r(1,i=s)),ct(t,qf,s=>r(2,u=s)),ct(t,Gf,s=>r(3,o=s)),[n,i,u,o]}class DS extends yt{constructor(e){super(),wt(this,e,_S,mS,At,{})}}const ns="outputMultiPrompt";function bS(){const t=Yr(!0),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[ns]?JSON.parse(localStorage[ns]):!1),{subscribe:e,update:u=>{i&&(localStorage[ns]=JSON.stringify(!!u),r(!!u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[ns],r(!0))}}}const _f=bS(),C1=Kr(_f,t=>Ct(_f));function yS(t){let e,r,n,i=mf(t[0],t[1],t[2],t[3],t[4])+"",u;return{c(){e=Q("div"),r=Q("p"),n=Q("span"),u=Ve(i),this.h()},l(o){e=ee(o,"DIV",{class:!0});var s=$(e);r=ee(s,"P",{class:!0});var c=$(r);n=ee(c,"SPAN",{style:!0});var p=$(n);u=je(p,i),p.forEach(I),c.forEach(I),s.forEach(I),this.h()},h(){O(n,"style","color: rgba(255,255,255,0.75});"),O(r,"class","text-sm select-none"),O(e,"class","overflow-y-auto h-full")},m(o,s){_e(o,e,s),R(e,r),R(r,n),R(n,u)},p(o,[s]){s&31&&i!==(i=mf(o[0],o[1],o[2],o[3],o[4])+"")&&rn(u,i)},i:Me,o:Me,d(o){o&&I(e)}}}function wS(t,e,r){let n,i,u,o,s;return ct(t,Cr,c=>r(0,n=c)),ct(t,Gf,c=>r(1,i=c)),ct(t,C1,c=>r(2,u=c)),ct(t,zf,c=>r(3,o=c)),ct(t,qf,c=>r(4,s=c)),[n,i,u,o,s]}class AS extends yt{constructor(e){super(),wt(this,e,wS,yS,At,{})}}function ES(t){let e,r;return e=new AS({}),{c(){$e(e.$$.fragment)},l(n){Ke(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(Ae(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function CS(t){let e,r;return e=new DS({}),{c(){$e(e.$$.fragment)},l(n){Ke(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(Ae(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function FS(t){let e,r,n,i,u,o,s,c,p,f,h=t[2]?"Multi":"Single",d,g,b,m,_,D,C,A,S,E,B,P,T,N,G,re,z,Y;const V=[CS,ES],U=[];function q(J,Z){return J[2]?0:1}return r=q(t),n=U[r]=V[r](t),{c(){e=Q("div"),n.c(),i=xe(),u=Q("div"),o=Q("div"),s=Q("input"),c=xe(),p=Q("label"),f=Q("span"),d=Ve(h),g=xe(),b=Q("div"),m=Q("input"),_=xe(),D=Q("label"),C=Q("span"),A=Ve("Use Weight Ordering"),S=xe(),E=Q("div"),B=Q("input"),P=xe(),T=Q("label"),N=Q("span"),G=Ve("Include Zero Weights"),this.h()},l(J){e=ee(J,"DIV",{class:!0});var Z=$(e);n.l(Z),Z.forEach(I),i=Ne(J),u=ee(J,"DIV",{class:!0});var X=$(u);o=ee(X,"DIV",{class:!0});var le=$(o);s=ee(le,"INPUT",{type:!0,class:!0}),c=Ne(le),p=ee(le,"LABEL",{class:!0});var ge=$(p);f=ee(ge,"SPAN",{class:!0});var Ee=$(f);d=je(Ee,h),Ee.forEach(I),ge.forEach(I),le.forEach(I),g=Ne(X),b=ee(X,"DIV",{class:!0});var ye=$(b);m=ee(ye,"INPUT",{type:!0,class:!0}),_=Ne(ye),D=ee(ye,"LABEL",{class:!0});var Oe=$(D);C=ee(Oe,"SPAN",{class:!0});var qe=$(C);A=je(qe,"Use Weight Ordering"),qe.forEach(I),Oe.forEach(I),ye.forEach(I),S=Ne(X),E=ee(X,"DIV",{class:!0});var Ie=$(E);B=ee(Ie,"INPUT",{type:!0,class:!0}),P=Ne(Ie),T=ee(Ie,"LABEL",{class:!0});var tt=$(T);N=ee(tt,"SPAN",{class:!0});var He=$(N);G=je(He,"Include Zero Weights"),He.forEach(I),tt.forEach(I),Ie.forEach(I),X.forEach(I),this.h()},h(){O(e,"class","normal-case font-light text-left cursor-copy bg-slate-900 rounded-t-md rounded-br-md p-4 w-full h-28 active:bg-slate-950 hover:bg-slate-800"),s.checked=t[2],O(s,"type","checkbox"),O(s,"class","toggle toggle-sm mt-2 mr-2"),O(f,"class","label-text"),O(p,"class","label w-10"),O(o,"class","mx-2 flex"),m.checked=t[1],O(m,"type","checkbox"),O(m,"class","toggle toggle-sm mt-2 mr-2"),O(C,"class","label-text"),O(D,"class","label"),O(b,"class","mx-2 flex"),B.checked=t[0],O(B,"type","checkbox"),O(B,"class","toggle toggle-sm mt-2 mr-2"),O(N,"class","label-text"),O(T,"class","label"),O(E,"class","mx-2 flex"),O(u,"class","w-full rounded-b-md flex pl-2 justify-start bg-slate-900")},m(J,Z){_e(J,e,Z),U[r].m(e,null),_e(J,i,Z),_e(J,u,Z),R(u,o),R(o,s),R(o,c),R(o,p),R(p,f),R(f,d),R(u,g),R(u,b),R(b,m),R(b,_),R(b,D),R(D,C),R(C,A),R(u,S),R(u,E),R(E,B),R(E,P),R(E,T),R(T,N),R(N,G),re=!0,z||(Y=[Fe(e,"click",t[3]),Fe(s,"change",t[4]),Fe(m,"change",t[5]),Fe(B,"change",t[6])],z=!0)},p(J,[Z]){let X=r;r=q(J),r!==X&&(Nr(),Se(U[X],1,1,()=>{U[X]=null}),Rr(),n=U[r],n||(n=U[r]=V[r](J),n.c()),Ae(n,1),n.m(e,null)),(!re||Z&4)&&(s.checked=J[2]),(!re||Z&4)&&h!==(h=J[2]?"Multi":"Single")&&rn(d,h),(!re||Z&2)&&(m.checked=J[1]),(!re||Z&1)&&(B.checked=J[0])},i(J){re||(Ae(n),re=!0)},o(J){Se(n),re=!1},d(J){J&&I(e),U[r].d(),J&&I(i),J&&I(u),z=!1,ar(Y)}}}function SS(t,e,r){let n,i,u,o,s;ct(t,qf,d=>r(0,n=d)),ct(t,zf,d=>r(1,i=d)),ct(t,C1,d=>r(2,u=d)),ct(t,Gf,d=>r(7,o=d)),ct(t,Cr,d=>r(8,s=d));function c(){const d=mf(s,o,u,i,n);navigator.clipboard.writeText(d),gf.shuffle()}function p(){_f.update(!u)}function f(){hf.update(!i)}function h(){cf.update(!n)}return[n,i,u,c,p,f,h]}class BS extends yt{constructor(e){super(),wt(this,e,SS,FS,At,{})}}function OS(t){let e,r,n,i;return{c(){e=dt("g"),r=dt("circle"),this.h()},l(u){e=pt(u,"g",{});var o=$(e);r=pt(o,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),$(r).forEach(I),o.forEach(I),this.h()},h(){O(r,"cx",n=t[0][0]),O(r,"cy",i=t[0][1]),O(r,"r",t[1]),O(r,"stroke",t[3]),O(r,"stroke-width",t[2]),Yt(r,"fill","rgba(0,0,0,0)")},m(u,o){_e(u,e,o),R(e,r)},p(u,[o]){o&1&&n!==(n=u[0][0])&&O(r,"cx",n),o&1&&i!==(i=u[0][1])&&O(r,"cy",i),o&2&&O(r,"r",u[1]),o&8&&O(r,"stroke",u[3]),o&4&&O(r,"stroke-width",u[2])},i:Me,o:Me,d(u){u&&I(e)}}}function MS(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:u=20}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,u=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,u,o]}class PS extends yt{constructor(e){super(),wt(this,e,MS,OS,At,{xy:0,radius:1,stroke:2,color:3})}}function TS(t){let e,r,n,i,u;return{c(){e=dt("polygon"),this.h()},l(o){e=pt(o,"polygon",{points:!0,"stroke-width":!0,fill:!0,transform:!0}),$(e).forEach(I),this.h()},h(){O(e,"points",r=`${t[7][0]},${t[7][1]} ${t[9][0]},${t[9][1]} ${t[8][0]},${t[8][1]} ${t[6][0]},${t[6][1]} ${t[4][0]},${t[4][1]} ${t[5][0]},${t[5][1]}`),O(e,"stroke-width",4),O(e,"fill",t[3]),O(e,"transform",n=`rotate(${t[1].toFixed(2)} ${t[0][0]} ${t[0][1]}) rotate(${t[2]?"180":"0"} ${(t[7][0]+t[6][0])/2} ${(t[7][1]+t[6][1])/2})`)},m(o,s){_e(o,e,s),i||(u=[Fe(e,"mouseover",t[10]),Fe(e,"mouseout",t[11]),Fe(e,"mousedown",t[12])],i=!0)},p(o,[s]){s&1008&&r!==(r=`${o[7][0]},${o[7][1]} ${o[9][0]},${o[9][1]} ${o[8][0]},${o[8][1]} ${o[6][0]},${o[6][1]} ${o[4][0]},${o[4][1]} ${o[5][0]},${o[5][1]}`)&&O(e,"points",r),s&8&&O(e,"fill",o[3]),s&199&&n!==(n=`rotate(${o[1].toFixed(2)} ${o[0][0]} ${o[0][1]}) rotate(${o[2]?"180":"0"} ${(o[7][0]+o[6][0])/2} ${(o[7][1]+o[6][1])/2})`)&&O(e,"transform",n)},i:Me,o:Me,d(o){o&&I(e),i=!1,ar(u)}}}function kS(t,e,r){let n,i,u,o,s,c,{xy:p=[500,500]}=e,{radius:f=400}=e,{stroke:h=20}=e,{color:d="rgba(46,67,101, 0.4)"}=e,{hoverColor:g="white"}=e,{angle:b=0}=e,{handleMouseDown:m=E=>{}}=e,{reverse:_=!1}=e,D=d;function C(){r(3,D=g)}function A(){r(3,D=d)}function S(E){m(E)}return t.$$set=E=>{"xy"in E&&r(0,p=E.xy),"radius"in E&&r(13,f=E.radius),"stroke"in E&&r(14,h=E.stroke),"color"in E&&r(15,d=E.color),"hoverColor"in E&&r(16,g=E.hoverColor),"angle"in E&&r(1,b=E.angle),"handleMouseDown"in E&&r(17,m=E.handleMouseDown),"reverse"in E&&r(2,_=E.reverse)},t.$$.update=()=>{t.$$.dirty&24577&&r(9,n=kr(p,[-4,1],f-h/2)),t.$$.dirty&24577&&r(8,i=kr(p,[1,1],f-h/2)),t.$$.dirty&8193&&r(7,u=kr(p,[0,1],f)),t.$$.dirty&8193&&r(6,o=kr(p,[4,1],f)),t.$$.dirty&24577&&r(5,s=kr(p,[-3,1],f+h/2)),t.$$.dirty&24577&&r(4,c=kr(p,[1,1],f+h/2))},[p,b,_,D,c,s,o,u,i,n,C,A,S,f,h,d,g,m]}class IS extends yt{constructor(e){super(),wt(this,e,kS,TS,At,{xy:0,radius:13,stroke:14,color:15,hoverColor:16,angle:1,handleMouseDown:17,reverse:2})}}function Bd(t,e,r){const n=t.slice();return n[19]=e[r][0],n[20]=e[r][1],n}function Od(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,u;e=new Pf({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),s=[];for(let f=0;f<o.length;f+=1)s[f]=Md(Bd(t,o,f));const c=f=>Se(s[f],1,1,()=>{s[f]=null});let p=n&&Pd(t);return{c(){$e(e.$$.fragment);for(let f=0;f<s.length;f+=1)s[f].c();r=It(),p&&p.c(),i=It()},l(f){Ke(e.$$.fragment,f);for(let h=0;h<s.length;h+=1)s[h].l(f);r=It(),p&&p.l(f),i=It()},m(f,h){Ye(e,f,h);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(f,h);_e(f,r,h),p&&p.m(f,h),_e(f,i,h),u=!0},p(f,h){const d={};if(h&1&&(d.xy=f[0]),h&2&&(d.radius=f[1]),e.$set(d),h&1660){o=Object.entries(f[5].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=Bd(f,o,g);s[g]?(s[g].p(b,h),Ae(s[g],1)):(s[g]=Md(b),s[g].c(),Ae(s[g],1),s[g].m(r.parentNode,r))}for(Nr(),g=o.length;g<s.length;g+=1)c(g);Rr()}h&32&&(n=Object.entries(f[5].weightedPrompts).length>0),n?p?(p.p(f,h),h&32&&Ae(p,1)):(p=Pd(f),p.c(),Ae(p,1),p.m(i.parentNode,i)):p&&(Nr(),Se(p,1,1,()=>{p=null}),Rr())},i(f){if(!u){Ae(e.$$.fragment,f);for(let h=0;h<o.length;h+=1)Ae(s[h]);Ae(p),u=!0}},o(f){Se(e.$$.fragment,f),s=s.filter(Boolean);for(let h=0;h<s.length;h+=1)Se(s[h]);Se(p),u=!1},d(f){Ze(e,f),Ls(s,f),f&&I(r),p&&p.d(f),f&&I(i)}}}function Md(t){let e,r,n;e=new la({props:{xy:t[10](t[6][t[19]].xy,xr(t[3],t[20].text.length,t[4])),color:`rgba(255,255,255,${Er(t[6][t[19]].unitWeight)}`,wh:xr(t[3],t[20].text.length,t[4]),fontSize:t[4],text:t[20].text}});function i(){return t[13](t[19])}return r=new Au({props:{xy:t[6][t[19]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:i}}),{c(){$e(e.$$.fragment),$e(r.$$.fragment)},l(u){Ke(e.$$.fragment,u),Ke(r.$$.fragment,u)},m(u,o){Ye(e,u,o),Ye(r,u,o),n=!0},p(u,o){t=u;const s={};o&120&&(s.xy=t[10](t[6][t[19]].xy,xr(t[3],t[20].text.length,t[4]))),o&96&&(s.color=`rgba(255,255,255,${Er(t[6][t[19]].unitWeight)}`),o&56&&(s.wh=xr(t[3],t[20].text.length,t[4])),o&16&&(s.fontSize=t[4]),o&32&&(s.text=t[20].text),e.$set(s);const c={};o&96&&(c.xy=t[6][t[19]].xy),o&4&&(c.radius=t[2]),o&32&&(c.handleMouseDown=i),r.$set(c)},i(u){n||(Ae(e.$$.fragment,u),Ae(r.$$.fragment,u),n=!0)},o(u){Se(e.$$.fragment,u),Se(r.$$.fragment,u),n=!1},d(u){Ze(e,u),Ze(r,u)}}}function Pd(t){let e,r,n;return e=new PS({props:{xy:t[0],radius:t[7],stroke:30}}),r=new IS({props:{reverse:t[5].ringReverse,xy:t[0],radius:t[7],stroke:30,angle:t[5].ringStartAngle,color:"rgba(136,157,191, 1)",handleMouseDown:t[14]}}),{c(){$e(e.$$.fragment),$e(r.$$.fragment)},l(i){Ke(e.$$.fragment,i),Ke(r.$$.fragment,i)},m(i,u){Ye(e,i,u),Ye(r,i,u),n=!0},p(i,u){const o={};u&1&&(o.xy=i[0]),u&128&&(o.radius=i[7]),e.$set(o);const s={};u&32&&(s.reverse=i[5].ringReverse),u&1&&(s.xy=i[0]),u&128&&(s.radius=i[7]),u&32&&(s.angle=i[5].ringStartAngle),r.$set(s)},i(i){n||(Ae(e.$$.fragment,i),Ae(r.$$.fragment,i),n=!0)},o(i){Se(e.$$.fragment,i),Se(r.$$.fragment,i),n=!1},d(i){Ze(e,i),Ze(r,i)}}}function xS(t){let e,r,n,i,u=t[6]&&t[5].weightedPrompts&&Od(t);return{c(){e=dt("svg"),u&&u.c(),this.h()},l(o){e=pt(o,"svg",{id:!0,class:!0});var s=$(e);u&&u.l(s),s.forEach(I),this.h()},h(){O(e,"id","svg"),O(e,"class","w-full h-full")},m(o,s){_e(o,e,s),u&&u.m(e,null),r=!0,n||(i=[Fe(e,"mousemove",t[11]),Fe(e,"mouseup",t[8]),Fe(e,"dblclick",t[12])],n=!0)},p(o,[s]){o[6]&&o[5].weightedPrompts?u?(u.p(o,s),s&96&&Ae(u,1)):(u=Od(o),u.c(),Ae(u,1),u.m(e,null)):u&&(Nr(),Se(u,1,1,()=>{u=null}),Rr())},i(o){r||(Ae(u),r=!0)},o(o){Se(u),r=!1},d(o){o&&I(e),u&&u.d(),n=!1,ar(i)}}}function Td(t,e){return t?Object.entries(t).reduce((r,[n,i],u)=>{const o=r[n]||u*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function NS(t,e,r){let n,i,u;ct(t,Cr,B=>r(5,u=B));let{center:o=[450,450]}=e,{radius:s=250}=e,{pointRadius:c=10}=e,{textWidth:p=150}=e,{fontSize:f=13}=e,h=[0,0],d=null;function g(B){d=null}function b(B){d=B}function m(B,P){let T=Nn(B,o,s)[0]-180;T<0&&(T+=360);const N=Tf(fa(P),T);return Gr(B,N)}function _(B){console.log(s,n);const P=Vr(Nn(aa(B,o,n),o,n)[0]);r(6,i=A(u.weightedPrompts,o,s,u.ringWeightScaling,u.ringExponentialScaling,P,u.ringAngles))}function D(B){if(h=fi(B),d==="main")_(h);else if(d){const P={...u.weightedPrompts[d]},T=aa(h,o,s),N=Nn(T,o,s)[0],G={...u.ringAngles};G[P.id]=N;const re={...u.weightedPrompts};re[d]=P,r(6,i=A(re,o,s,u.ringWeightScaling,u.ringExponentialScaling,u.ringStartAngle,G))}}function C(B){h=fi(B),_(h)}function A(B,P,T,N,G,re,z){if(!B||!P||!T||!N)return null;let Y=Object.entries(B).reduce((U,[q,J])=>{const X=u.ringReverse?re-z[q]:z[q]-re,le=Vr(X),ge=Math.pow(1-le/360,G?N:1);return U[q]={angleDifference:le,xy:kr(P,[z[q],1],T),unitWeight:ge},U},{});const V={...B};return Object.entries(Y).forEach(([U,q])=>{V[U].ringWeight=q.unitWeight}),Mt.update({...u,ringStartAngle:re,weightedPrompts:V,ringAngles:z}),Y}const S=B=>b(B),E=()=>b("main");return t.$$set=B=>{"center"in B&&r(0,o=B.center),"radius"in B&&r(1,s=B.radius),"pointRadius"in B&&r(2,c=B.pointRadius),"textWidth"in B&&r(3,p=B.textWidth),"fontSize"in B&&r(4,f=B.fontSize)},t.$$.update=()=>{t.$$.dirty&2&&r(7,n=s-30),t.$$.dirty&32&&Object.keys(u.ringAngles).length!==Object.keys(u.weightedPrompts).length&&Mt.update({...u,ringAngles:Td(u.weightedPrompts,{})}),t.$$.dirty&35&&r(6,i=A(u.weightedPrompts,o,s,u.ringWeightScaling,u.ringExponentialScaling,u.ringStartAngle,u.ringAngles||Td(u.weightedPrompts,{})))},[o,s,c,p,f,u,i,n,g,b,m,D,C,S,E]}class RS extends yt{constructor(e){super(),wt(this,e,NS,xS,At,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function kd(t){let e,r,n,i,u,o,s,c;return{c(){e=Q("div"),r=Q("label"),n=Q("span"),i=Ve("Scaling Power"),u=xe(),o=Q("input"),this.h()},l(p){e=ee(p,"DIV",{class:!0});var f=$(e);r=ee(f,"LABEL",{class:!0});var h=$(r);n=ee(h,"SPAN",{class:!0});var d=$(n);i=je(d,"Scaling Power"),d.forEach(I),h.forEach(I),u=Ne(f),o=ee(f,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),f.forEach(I),this.h()},h(){O(n,"class","label-text"),O(r,"class","label"),O(o,"type","range"),O(o,"min","0.5"),O(o,"max","5"),O(o,"step","0.1"),O(o,"class","range range-xs"),O(e,"class","w-full px-2")},m(p,f){_e(p,e,f),R(e,r),R(r,n),R(n,i),R(e,u),R(e,o),tn(o,t[0]),s||(c=[Fe(o,"change",t[7]),Fe(o,"input",t[7])],s=!0)},p(p,f){f&1&&tn(o,p[0])},d(p){p&&I(e),s=!1,ar(c)}}}function LS(t){let e,r,n,i,u,o,s,c,p,f,h,d,g,b,m,_,D,C,A;r=new RS({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let S=t[1]&&kd(t);return{c(){e=Q("div"),$e(r.$$.fragment),i=xe(),u=Q("div"),o=Q("div"),s=Q("label"),c=Q("span"),p=Ve("Exponential Scaling"),f=xe(),h=Q("input"),d=xe(),S&&S.c(),g=xe(),b=Q("div"),m=Q("button"),_=Ve("Reverse"),this.h()},l(E){e=ee(E,"DIV",{class:!0});var B=$(e);Ke(r.$$.fragment,B),B.forEach(I),i=Ne(E),u=ee(E,"DIV",{class:!0});var P=$(u);o=ee(P,"DIV",{class:!0});var T=$(o);s=ee(T,"LABEL",{class:!0});var N=$(s);c=ee(N,"SPAN",{class:!0});var G=$(c);p=je(G,"Exponential Scaling"),G.forEach(I),N.forEach(I),f=Ne(T),h=ee(T,"INPUT",{type:!0,class:!0}),T.forEach(I),d=Ne(P),S&&S.l(P),g=Ne(P),b=ee(P,"DIV",{class:!0});var re=$(b);m=ee(re,"BUTTON",{class:!0});var z=$(m);_=je(z,"Reverse"),z.forEach(I),re.forEach(I),P.forEach(I),this.h()},h(){O(e,"class","w-full h-full"),wu(()=>t[5].call(e)),O(c,"class","label-text"),O(s,"class","label"),O(h,"type","checkbox"),O(h,"class","toggle toggle-xs"),O(o,"class","w-52 px-2"),O(m,"class","btn btn-xs btn-primary"),O(b,"class","w-32 px-2 pb-1 flex flex-col justify-end"),O(u,"class","px-2 py-4 pb-0 flex")},m(E,B){_e(E,e,B),Ye(r,e,null),n=oa(e,t[5].bind(e)),_e(E,i,B),_e(E,u,B),R(u,o),R(o,s),R(s,c),R(c,p),R(o,f),R(o,h),h.checked=t[1],R(u,d),S&&S.m(u,null),R(u,g),R(u,b),R(b,m),R(m,_),D=!0,C||(A=[Fe(h,"change",t[6]),Fe(m,"click",t[4])],C=!0)},p(E,[B]){const P={};B&12&&(P.center=[Math.round(E[2]/2),Math.round(E[3]/2)]),B&12&&(P.radius=Math.round(Math.min(E[2],E[3])/2)-150),r.$set(P),B&2&&(h.checked=E[1]),E[1]?S?S.p(E,B):(S=kd(E),S.c(),S.m(u,g)):S&&(S.d(1),S=null)},i(E){D||(Ae(r.$$.fragment,E),D=!0)},o(E){Se(r.$$.fragment,E),D=!1},d(E){E&&I(e),Ze(r),n(),E&&I(i),E&&I(u),S&&S.d(),C=!1,ar(A)}}}function US(t,e,r){let n;ct(t,Cr,d=>r(8,n=d));let i,u,o=n.ringWeightScaling||2,s=wf(n.ringExponentialScaling)?!0:n.ringExponentialScaling;function c(){Mt.update({...Mt.get(),ringReverse:!n.ringReverse})}function p(){i=this.clientWidth,u=this.clientHeight,r(2,i),r(3,u)}function f(){s=this.checked,r(1,s)}function h(){o=hp(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&Mt.update({...Mt.get(),ringExponentialScaling:s,ringWeightScaling:o})},[o,s,i,u,c,p,f,h]}class VS extends yt{constructor(e){super(),wt(this,e,US,LS,At,{})}}function Id(t){let e,r;return e=new Zy({}),{c(){$e(e.$$.fragment)},l(n){Ke(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(Ae(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function jS(t){let e,r;return e=new rS({}),{c(){$e(e.$$.fragment)},l(n){Ke(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(Ae(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function qS(t){let e,r;return e=new VS({}),{c(){$e(e.$$.fragment)},l(n){Ke(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(Ae(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function zS(t){let e,r;return e=new qE({}),{c(){$e(e.$$.fragment)},l(n){Ke(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(Ae(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function WS(t){let e,r;return e=new aC({}),{c(){$e(e.$$.fragment)},l(n){Ke(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(Ae(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function HS(t){let e,r;return e=new ZE({}),{c(){$e(e.$$.fragment)},l(n){Ke(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(Ae(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function GS(t){let e,r,n,i,u,o,s,c,p,f,h,d;i=new jy({});let g=(t[0].weightMode===vt.Circle||t[0].weightMode===vt.Pie||t[0].weightMode===vt.Ring)&&Id();const b=[HS,WS,zS,qS,jS],m=[];function _(D,C){return D[0].weightMode===vt.Bars?0:D[0].weightMode===vt.Pie?1:D[0].weightMode===vt.Circle?2:D[0].weightMode===vt.Ring?3:D[0].weightMode===vt.Embed?4:-1}return~(s=_(t))&&(c=m[s]=b[s](t)),h=new BS({}),{c(){e=Q("div"),r=Q("div"),n=Q("div"),$e(i.$$.fragment),u=xe(),g&&g.c(),o=xe(),c&&c.c(),p=xe(),f=Q("div"),$e(h.$$.fragment),this.h()},l(D){e=ee(D,"DIV",{class:!0});var C=$(e);r=ee(C,"DIV",{class:!0});var A=$(r);n=ee(A,"DIV",{class:!0});var S=$(n);Ke(i.$$.fragment,S),u=Ne(S),g&&g.l(S),S.forEach(I),o=Ne(A),c&&c.l(A),p=Ne(A),f=ee(A,"DIV",{class:!0});var E=$(f);Ke(h.$$.fragment,E),E.forEach(I),A.forEach(I),C.forEach(I),this.h()},h(){O(n,"class","absolute top-0 right-0 z-10"),O(f,"class","h-48 w-full p-4 flex flex-col"),O(r,"class","flex flex-col h-full place-content-between"),O(e,"class","relative w-full h-full flex flex-col")},m(D,C){_e(D,e,C),R(e,r),R(r,n),Ye(i,n,null),R(n,u),g&&g.m(n,null),R(r,o),~s&&m[s].m(r,null),R(r,p),R(r,f),Ye(h,f,null),d=!0},p(D,[C]){D[0].weightMode===vt.Circle||D[0].weightMode===vt.Pie||D[0].weightMode===vt.Ring?g?C&1&&Ae(g,1):(g=Id(),g.c(),Ae(g,1),g.m(n,null)):g&&(Nr(),Se(g,1,1,()=>{g=null}),Rr());let A=s;s=_(D),s!==A&&(c&&(Nr(),Se(m[A],1,1,()=>{m[A]=null}),Rr()),~s?(c=m[s],c||(c=m[s]=b[s](D),c.c()),Ae(c,1),c.m(r,p)):c=null)},i(D){d||(Ae(i.$$.fragment,D),Ae(g),Ae(c),Ae(h.$$.fragment,D),d=!0)},o(D){Se(i.$$.fragment,D),Se(g),Se(c),Se(h.$$.fragment,D),d=!1},d(D){D&&I(e),Ze(i),g&&g.d(),~s&&m[s].d(),Ze(h)}}}function $S(t,e,r){let n;return ct(t,Cr,i=>r(0,n=i)),[n]}class KS extends yt{constructor(e){super(),wt(this,e,$S,GS,At,{})}}var Is={},YS={get exports(){return Is},set exports(t){Is=t}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var r,n="4.17.21",i=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",s="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",p=500,f="__lodash_placeholder__",h=1,d=2,g=4,b=1,m=2,_=1,D=2,C=4,A=8,S=16,E=32,B=64,P=128,T=256,N=512,G=30,re="...",z=800,Y=16,V=1,U=2,q=3,J=1/0,Z=9007199254740991,X=17976931348623157e292,le=0/0,ge=4294967295,Ee=ge-1,ye=ge>>>1,Oe=[["ary",P],["bind",_],["bindKey",D],["curry",A],["curryRight",S],["flip",N],["partial",E],["partialRight",B],["rearg",T]],qe="[object Arguments]",Ie="[object Array]",tt="[object AsyncFunction]",He="[object Boolean]",Ue="[object Date]",ze="[object DOMException]",mt="[object Error]",ut="[object Function]",lt="[object GeneratorFunction]",at="[object Map]",st="[object Number]",Xe="[object Null]",Je="[object Object]",Ce="[object Promise]",Te="[object Proxy]",Ot="[object RegExp]",Vt="[object Set]",Ht="[object String]",j="[object Symbol]",H="[object Undefined]",te="[object WeakMap]",fe="[object WeakSet]",ae="[object ArrayBuffer]",he="[object DataView]",se="[object Float32Array]",ce="[object Float64Array]",we="[object Int8Array]",Re="[object Int16Array]",rt="[object Int32Array]",Be="[object Uint8Array]",zt="[object Uint8ClampedArray]",xt="[object Uint16Array]",rr="[object Uint32Array]",Zt=/\b__p \+= '';/g,_r=/\b(__p \+=) '' \+/g,Xt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Dr=/&(?:amp|lt|gt|quot|#39);/g,cr=/[&<>"']/g,hr=RegExp(Dr.source),dn=RegExp(cr.source),pr=/<%-([\s\S]+?)%>/g,Bn=/<%([\s\S]+?)%>/g,Zn=/<%=([\s\S]+?)%>/g,Ln=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Un=/^\w*$/,Zi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xi=/[\\^$.*+?()[\]{}|]/g,Cu=RegExp(xi.source),Fr=/^\s+/,nr=/\s/,Fu=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ci=/\{\n\/\* \[wrapped with (.+)\] \*/,pn=/,? & /,Xn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ni=/[()=,{}\[\]\/\s]/,Su=/\\(\\)?/g,Bu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xi=/\w*$/,Ou=/^[-+]0x[0-9a-f]+$/i,Mu=/^0b[01]+$/i,Pu=/^\[object .+?Constructor\]$/,Tu=/^0o[0-7]+$/i,ku=/^(?:0|[1-9]\d*)$/,Iu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,hi=/($^)/,xu=/['\n\r\u2028\u2029\\]/g,di="\\ud800-\\udfff",Nu="\\u0300-\\u036f",Ru="\\ufe20-\\ufe2f",Lu="\\u20d0-\\u20ff",Ji=Nu+Ru+Lu,Vn="\\u2700-\\u27bf",br="a-z\\xdf-\\xf6\\xf8-\\xff",sr="\\xac\\xb1\\xd7\\xf7",qr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ri="\\u2000-\\u206f",Jn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jn="A-Z\\xc0-\\xd6\\xd8-\\xde",Li="\\ufe0e\\ufe0f",On=sr+qr+Ri+Jn,gn="['’]",ro="["+di+"]",Uu="["+On+"]",Qi="["+Ji+"]",ha="\\d+",y="["+Vn+"]",F="["+br+"]",L="[^"+di+On+ha+Vn+br+jn+"]",ne="\\ud83c[\\udffb-\\udfff]",pe="(?:"+Qi+"|"+ne+")",Pe="[^"+di+"]",gt="(?:\\ud83c[\\udde6-\\uddff]){2}",St="[\\ud800-\\udbff][\\udc00-\\udfff]",$t="["+jn+"]",or="\\u200d",Kf="(?:"+F+"|"+L+")",P1="(?:"+$t+"|"+L+")",Yf="(?:"+gn+"(?:d|ll|m|re|s|t|ve))?",Zf="(?:"+gn+"(?:D|LL|M|RE|S|T|VE))?",Xf=pe+"?",Jf="["+Li+"]?",T1="(?:"+or+"(?:"+[Pe,gt,St].join("|")+")"+Jf+Xf+")*",k1="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",I1="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qf=Jf+Xf+T1,x1="(?:"+[y,gt,St].join("|")+")"+Qf,N1="(?:"+[Pe+Qi+"?",Qi,gt,St,ro].join("|")+")",R1=RegExp(gn,"g"),L1=RegExp(Qi,"g"),no=RegExp(ne+"(?="+ne+")|"+N1+Qf,"g"),U1=RegExp([$t+"?"+F+"+"+Yf+"(?="+[Uu,$t,"$"].join("|")+")",P1+"+"+Zf+"(?="+[Uu,$t+Kf,"$"].join("|")+")",$t+"?"+Kf+"+"+Yf,$t+"+"+Zf,I1,k1,ha,x1].join("|"),"g"),V1=RegExp("["+or+di+Ji+Li+"]"),j1=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,q1=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],z1=-1,Gt={};Gt[se]=Gt[ce]=Gt[we]=Gt[Re]=Gt[rt]=Gt[Be]=Gt[zt]=Gt[xt]=Gt[rr]=!0,Gt[qe]=Gt[Ie]=Gt[ae]=Gt[He]=Gt[he]=Gt[Ue]=Gt[mt]=Gt[ut]=Gt[at]=Gt[st]=Gt[Je]=Gt[Ot]=Gt[Vt]=Gt[Ht]=Gt[te]=!1;var Wt={};Wt[qe]=Wt[Ie]=Wt[ae]=Wt[he]=Wt[He]=Wt[Ue]=Wt[se]=Wt[ce]=Wt[we]=Wt[Re]=Wt[rt]=Wt[at]=Wt[st]=Wt[Je]=Wt[Ot]=Wt[Vt]=Wt[Ht]=Wt[j]=Wt[Be]=Wt[zt]=Wt[xt]=Wt[rr]=!0,Wt[mt]=Wt[ut]=Wt[te]=!1;var W1={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},H1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},G1={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},$1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},K1=parseFloat,Y1=parseInt,ec=typeof dr=="object"&&dr&&dr.Object===Object&&dr,Z1=typeof self=="object"&&self&&self.Object===Object&&self,Sr=ec||Z1||Function("return this")(),io=e&&!e.nodeType&&e,Ui=io&&!0&&t&&!t.nodeType&&t,tc=Ui&&Ui.exports===io,uo=tc&&ec.process,vn=function(){try{var ie=Ui&&Ui.require&&Ui.require("util").types;return ie||uo&&uo.binding&&uo.binding("util")}catch{}}(),rc=vn&&vn.isArrayBuffer,nc=vn&&vn.isDate,ic=vn&&vn.isMap,uc=vn&&vn.isRegExp,ac=vn&&vn.isSet,sc=vn&&vn.isTypedArray;function an(ie,de,oe){switch(oe.length){case 0:return ie.call(de);case 1:return ie.call(de,oe[0]);case 2:return ie.call(de,oe[0],oe[1]);case 3:return ie.call(de,oe[0],oe[1],oe[2])}return ie.apply(de,oe)}function X1(ie,de,oe,Le){for(var ft=-1,Tt=ie==null?0:ie.length;++ft<Tt;){var gr=ie[ft];de(Le,gr,oe(gr),ie)}return Le}function mn(ie,de){for(var oe=-1,Le=ie==null?0:ie.length;++oe<Le&&de(ie[oe],oe,ie)!==!1;);return ie}function J1(ie,de){for(var oe=ie==null?0:ie.length;oe--&&de(ie[oe],oe,ie)!==!1;);return ie}function oc(ie,de){for(var oe=-1,Le=ie==null?0:ie.length;++oe<Le;)if(!de(ie[oe],oe,ie))return!1;return!0}function pi(ie,de){for(var oe=-1,Le=ie==null?0:ie.length,ft=0,Tt=[];++oe<Le;){var gr=ie[oe];de(gr,oe,ie)&&(Tt[ft++]=gr)}return Tt}function da(ie,de){var oe=ie==null?0:ie.length;return!!oe&&eu(ie,de,0)>-1}function ao(ie,de,oe){for(var Le=-1,ft=ie==null?0:ie.length;++Le<ft;)if(oe(de,ie[Le]))return!0;return!1}function Kt(ie,de){for(var oe=-1,Le=ie==null?0:ie.length,ft=Array(Le);++oe<Le;)ft[oe]=de(ie[oe],oe,ie);return ft}function gi(ie,de){for(var oe=-1,Le=de.length,ft=ie.length;++oe<Le;)ie[ft+oe]=de[oe];return ie}function so(ie,de,oe,Le){var ft=-1,Tt=ie==null?0:ie.length;for(Le&&Tt&&(oe=ie[++ft]);++ft<Tt;)oe=de(oe,ie[ft],ft,ie);return oe}function Q1(ie,de,oe,Le){var ft=ie==null?0:ie.length;for(Le&&ft&&(oe=ie[--ft]);ft--;)oe=de(oe,ie[ft],ft,ie);return oe}function oo(ie,de){for(var oe=-1,Le=ie==null?0:ie.length;++oe<Le;)if(de(ie[oe],oe,ie))return!0;return!1}var eg=lo("length");function tg(ie){return ie.split("")}function rg(ie){return ie.match(Xn)||[]}function lc(ie,de,oe){var Le;return oe(ie,function(ft,Tt,gr){if(de(ft,Tt,gr))return Le=Tt,!1}),Le}function pa(ie,de,oe,Le){for(var ft=ie.length,Tt=oe+(Le?1:-1);Le?Tt--:++Tt<ft;)if(de(ie[Tt],Tt,ie))return Tt;return-1}function eu(ie,de,oe){return de===de?pg(ie,de,oe):pa(ie,fc,oe)}function ng(ie,de,oe,Le){for(var ft=oe-1,Tt=ie.length;++ft<Tt;)if(Le(ie[ft],de))return ft;return-1}function fc(ie){return ie!==ie}function cc(ie,de){var oe=ie==null?0:ie.length;return oe?co(ie,de)/oe:le}function lo(ie){return function(de){return de==null?r:de[ie]}}function fo(ie){return function(de){return ie==null?r:ie[de]}}function hc(ie,de,oe,Le,ft){return ft(ie,function(Tt,gr,jt){oe=Le?(Le=!1,Tt):de(oe,Tt,gr,jt)}),oe}function ig(ie,de){var oe=ie.length;for(ie.sort(de);oe--;)ie[oe]=ie[oe].value;return ie}function co(ie,de){for(var oe,Le=-1,ft=ie.length;++Le<ft;){var Tt=de(ie[Le]);Tt!==r&&(oe=oe===r?Tt:oe+Tt)}return oe}function ho(ie,de){for(var oe=-1,Le=Array(ie);++oe<ie;)Le[oe]=de(oe);return Le}function ug(ie,de){return Kt(de,function(oe){return[oe,ie[oe]]})}function dc(ie){return ie&&ie.slice(0,mc(ie)+1).replace(Fr,"")}function sn(ie){return function(de){return ie(de)}}function po(ie,de){return Kt(de,function(oe){return ie[oe]})}function Vu(ie,de){return ie.has(de)}function pc(ie,de){for(var oe=-1,Le=ie.length;++oe<Le&&eu(de,ie[oe],0)>-1;);return oe}function gc(ie,de){for(var oe=ie.length;oe--&&eu(de,ie[oe],0)>-1;);return oe}function ag(ie,de){for(var oe=ie.length,Le=0;oe--;)ie[oe]===de&&++Le;return Le}var sg=fo(W1),og=fo(H1);function lg(ie){return"\\"+$1[ie]}function fg(ie,de){return ie==null?r:ie[de]}function tu(ie){return V1.test(ie)}function cg(ie){return j1.test(ie)}function hg(ie){for(var de,oe=[];!(de=ie.next()).done;)oe.push(de.value);return oe}function go(ie){var de=-1,oe=Array(ie.size);return ie.forEach(function(Le,ft){oe[++de]=[ft,Le]}),oe}function vc(ie,de){return function(oe){return ie(de(oe))}}function vi(ie,de){for(var oe=-1,Le=ie.length,ft=0,Tt=[];++oe<Le;){var gr=ie[oe];(gr===de||gr===f)&&(ie[oe]=f,Tt[ft++]=oe)}return Tt}function ga(ie){var de=-1,oe=Array(ie.size);return ie.forEach(function(Le){oe[++de]=Le}),oe}function dg(ie){var de=-1,oe=Array(ie.size);return ie.forEach(function(Le){oe[++de]=[Le,Le]}),oe}function pg(ie,de,oe){for(var Le=oe-1,ft=ie.length;++Le<ft;)if(ie[Le]===de)return Le;return-1}function gg(ie,de,oe){for(var Le=oe+1;Le--;)if(ie[Le]===de)return Le;return Le}function ru(ie){return tu(ie)?mg(ie):eg(ie)}function Mn(ie){return tu(ie)?_g(ie):tg(ie)}function mc(ie){for(var de=ie.length;de--&&nr.test(ie.charAt(de)););return de}var vg=fo(G1);function mg(ie){for(var de=no.lastIndex=0;no.test(ie);)++de;return de}function _g(ie){return ie.match(no)||[]}function Dg(ie){return ie.match(U1)||[]}var bg=function ie(de){de=de==null?Sr:nu.defaults(Sr.Object(),de,nu.pick(Sr,q1));var oe=de.Array,Le=de.Date,ft=de.Error,Tt=de.Function,gr=de.Math,jt=de.Object,vo=de.RegExp,yg=de.String,_n=de.TypeError,va=oe.prototype,wg=Tt.prototype,iu=jt.prototype,ma=de["__core-js_shared__"],_a=wg.toString,Nt=iu.hasOwnProperty,Ag=0,_c=function(){var a=/[^.]+$/.exec(ma&&ma.keys&&ma.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Da=iu.toString,Eg=_a.call(jt),Cg=Sr._,Fg=vo("^"+_a.call(Nt).replace(xi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ba=tc?de.Buffer:r,mi=de.Symbol,ya=de.Uint8Array,Dc=ba?ba.allocUnsafe:r,wa=vc(jt.getPrototypeOf,jt),bc=jt.create,yc=iu.propertyIsEnumerable,Aa=va.splice,wc=mi?mi.isConcatSpreadable:r,ju=mi?mi.iterator:r,Vi=mi?mi.toStringTag:r,Ea=function(){try{var a=Hi(jt,"defineProperty");return a({},"",{}),a}catch{}}(),Sg=de.clearTimeout!==Sr.clearTimeout&&de.clearTimeout,Bg=Le&&Le.now!==Sr.Date.now&&Le.now,Og=de.setTimeout!==Sr.setTimeout&&de.setTimeout,Ca=gr.ceil,Fa=gr.floor,mo=jt.getOwnPropertySymbols,Mg=ba?ba.isBuffer:r,Ac=de.isFinite,Pg=va.join,Tg=vc(jt.keys,jt),vr=gr.max,Lr=gr.min,kg=Le.now,Ig=de.parseInt,Ec=gr.random,xg=va.reverse,_o=Hi(de,"DataView"),qu=Hi(de,"Map"),Do=Hi(de,"Promise"),uu=Hi(de,"Set"),zu=Hi(de,"WeakMap"),Wu=Hi(jt,"create"),Sa=zu&&new zu,au={},Ng=Gi(_o),Rg=Gi(qu),Lg=Gi(Do),Ug=Gi(uu),Vg=Gi(zu),Ba=mi?mi.prototype:r,Hu=Ba?Ba.valueOf:r,Cc=Ba?Ba.toString:r;function k(a){if(ir(a)&&!ht(a)&&!(a instanceof Ft)){if(a instanceof Dn)return a;if(Nt.call(a,"__wrapped__"))return Fh(a)}return new Dn(a)}var su=function(){function a(){}return function(l){if(!Jt(l))return{};if(bc)return bc(l);a.prototype=l;var v=new a;return a.prototype=r,v}}();function Oa(){}function Dn(a,l){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=r}k.templateSettings={escape:pr,evaluate:Bn,interpolate:Zn,variable:"",imports:{_:k}},k.prototype=Oa.prototype,k.prototype.constructor=k,Dn.prototype=su(Oa.prototype),Dn.prototype.constructor=Dn;function Ft(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ge,this.__views__=[]}function jg(){var a=new Ft(this.__wrapped__);return a.__actions__=Zr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Zr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Zr(this.__views__),a}function qg(){if(this.__filtered__){var a=new Ft(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function zg(){var a=this.__wrapped__.value(),l=this.__dir__,v=ht(a),w=l<0,M=v?a.length:0,x=tm(0,M,this.__views__),W=x.start,K=x.end,ue=K-W,ve=w?K:W-1,me=this.__iteratees__,be=me.length,ke=0,We=Lr(ue,this.__takeCount__);if(!v||!w&&M==ue&&We==ue)return Yc(a,this.__actions__);var nt=[];e:for(;ue--&&ke<We;){ve+=l;for(var Dt=-1,it=a[ve];++Dt<be;){var Et=me[Dt],Bt=Et.iteratee,fn=Et.type,Hr=Bt(it);if(fn==U)it=Hr;else if(!Hr){if(fn==V)continue e;break e}}nt[ke++]=it}return nt}Ft.prototype=su(Oa.prototype),Ft.prototype.constructor=Ft;function ji(a){var l=-1,v=a==null?0:a.length;for(this.clear();++l<v;){var w=a[l];this.set(w[0],w[1])}}function Wg(){this.__data__=Wu?Wu(null):{},this.size=0}function Hg(a){var l=this.has(a)&&delete this.__data__[a];return this.size-=l?1:0,l}function Gg(a){var l=this.__data__;if(Wu){var v=l[a];return v===c?r:v}return Nt.call(l,a)?l[a]:r}function $g(a){var l=this.__data__;return Wu?l[a]!==r:Nt.call(l,a)}function Kg(a,l){var v=this.__data__;return this.size+=this.has(a)?0:1,v[a]=Wu&&l===r?c:l,this}ji.prototype.clear=Wg,ji.prototype.delete=Hg,ji.prototype.get=Gg,ji.prototype.has=$g,ji.prototype.set=Kg;function Qn(a){var l=-1,v=a==null?0:a.length;for(this.clear();++l<v;){var w=a[l];this.set(w[0],w[1])}}function Yg(){this.__data__=[],this.size=0}function Zg(a){var l=this.__data__,v=Ma(l,a);if(v<0)return!1;var w=l.length-1;return v==w?l.pop():Aa.call(l,v,1),--this.size,!0}function Xg(a){var l=this.__data__,v=Ma(l,a);return v<0?r:l[v][1]}function Jg(a){return Ma(this.__data__,a)>-1}function Qg(a,l){var v=this.__data__,w=Ma(v,a);return w<0?(++this.size,v.push([a,l])):v[w][1]=l,this}Qn.prototype.clear=Yg,Qn.prototype.delete=Zg,Qn.prototype.get=Xg,Qn.prototype.has=Jg,Qn.prototype.set=Qg;function ei(a){var l=-1,v=a==null?0:a.length;for(this.clear();++l<v;){var w=a[l];this.set(w[0],w[1])}}function ev(){this.size=0,this.__data__={hash:new ji,map:new(qu||Qn),string:new ji}}function tv(a){var l=qa(this,a).delete(a);return this.size-=l?1:0,l}function rv(a){return qa(this,a).get(a)}function nv(a){return qa(this,a).has(a)}function iv(a,l){var v=qa(this,a),w=v.size;return v.set(a,l),this.size+=v.size==w?0:1,this}ei.prototype.clear=ev,ei.prototype.delete=tv,ei.prototype.get=rv,ei.prototype.has=nv,ei.prototype.set=iv;function qi(a){var l=-1,v=a==null?0:a.length;for(this.__data__=new ei;++l<v;)this.add(a[l])}function uv(a){return this.__data__.set(a,c),this}function av(a){return this.__data__.has(a)}qi.prototype.add=qi.prototype.push=uv,qi.prototype.has=av;function Pn(a){var l=this.__data__=new Qn(a);this.size=l.size}function sv(){this.__data__=new Qn,this.size=0}function ov(a){var l=this.__data__,v=l.delete(a);return this.size=l.size,v}function lv(a){return this.__data__.get(a)}function fv(a){return this.__data__.has(a)}function cv(a,l){var v=this.__data__;if(v instanceof Qn){var w=v.__data__;if(!qu||w.length<i-1)return w.push([a,l]),this.size=++v.size,this;v=this.__data__=new ei(w)}return v.set(a,l),this.size=v.size,this}Pn.prototype.clear=sv,Pn.prototype.delete=ov,Pn.prototype.get=lv,Pn.prototype.has=fv,Pn.prototype.set=cv;function Fc(a,l){var v=ht(a),w=!v&&$i(a),M=!v&&!w&&wi(a),x=!v&&!w&&!M&&cu(a),W=v||w||M||x,K=W?ho(a.length,yg):[],ue=K.length;for(var ve in a)(l||Nt.call(a,ve))&&!(W&&(ve=="length"||M&&(ve=="offset"||ve=="parent")||x&&(ve=="buffer"||ve=="byteLength"||ve=="byteOffset")||ii(ve,ue)))&&K.push(ve);return K}function Sc(a){var l=a.length;return l?a[Mo(0,l-1)]:r}function hv(a,l){return za(Zr(a),zi(l,0,a.length))}function dv(a){return za(Zr(a))}function bo(a,l,v){(v!==r&&!Tn(a[l],v)||v===r&&!(l in a))&&ti(a,l,v)}function Gu(a,l,v){var w=a[l];(!(Nt.call(a,l)&&Tn(w,v))||v===r&&!(l in a))&&ti(a,l,v)}function Ma(a,l){for(var v=a.length;v--;)if(Tn(a[v][0],l))return v;return-1}function pv(a,l,v,w){return _i(a,function(M,x,W){l(w,M,v(M),W)}),w}function Bc(a,l){return a&&zn(l,yr(l),a)}function gv(a,l){return a&&zn(l,Jr(l),a)}function ti(a,l,v){l=="__proto__"&&Ea?Ea(a,l,{configurable:!0,enumerable:!0,value:v,writable:!0}):a[l]=v}function yo(a,l){for(var v=-1,w=l.length,M=oe(w),x=a==null;++v<w;)M[v]=x?r:tl(a,l[v]);return M}function zi(a,l,v){return a===a&&(v!==r&&(a=a<=v?a:v),l!==r&&(a=a>=l?a:l)),a}function bn(a,l,v,w,M,x){var W,K=l&h,ue=l&d,ve=l&g;if(v&&(W=M?v(a,w,M,x):v(a)),W!==r)return W;if(!Jt(a))return a;var me=ht(a);if(me){if(W=nm(a),!K)return Zr(a,W)}else{var be=Ur(a),ke=be==ut||be==lt;if(wi(a))return Jc(a,K);if(be==Je||be==qe||ke&&!M){if(W=ue||ke?{}:mh(a),!K)return ue?Gv(a,gv(W,a)):Hv(a,Bc(W,a))}else{if(!Wt[be])return M?a:{};W=im(a,be,K)}}x||(x=new Pn);var We=x.get(a);if(We)return We;x.set(a,W),Gh(a)?a.forEach(function(it){W.add(bn(it,l,v,it,a,x))}):Wh(a)&&a.forEach(function(it,Et){W.set(Et,bn(it,l,v,Et,a,x))});var nt=ve?ue?jo:Vo:ue?Jr:yr,Dt=me?r:nt(a);return mn(Dt||a,function(it,Et){Dt&&(Et=it,it=a[Et]),Gu(W,Et,bn(it,l,v,Et,a,x))}),W}function vv(a){var l=yr(a);return function(v){return Oc(v,a,l)}}function Oc(a,l,v){var w=v.length;if(a==null)return!w;for(a=jt(a);w--;){var M=v[w],x=l[M],W=a[M];if(W===r&&!(M in a)||!x(W))return!1}return!0}function Mc(a,l,v){if(typeof a!="function")throw new _n(o);return Qu(function(){a.apply(r,v)},l)}function $u(a,l,v,w){var M=-1,x=da,W=!0,K=a.length,ue=[],ve=l.length;if(!K)return ue;v&&(l=Kt(l,sn(v))),w?(x=ao,W=!1):l.length>=i&&(x=Vu,W=!1,l=new qi(l));e:for(;++M<K;){var me=a[M],be=v==null?me:v(me);if(me=w||me!==0?me:0,W&&be===be){for(var ke=ve;ke--;)if(l[ke]===be)continue e;ue.push(me)}else x(l,be,w)||ue.push(me)}return ue}var _i=nh(qn),Pc=nh(Ao,!0);function mv(a,l){var v=!0;return _i(a,function(w,M,x){return v=!!l(w,M,x),v}),v}function Pa(a,l,v){for(var w=-1,M=a.length;++w<M;){var x=a[w],W=l(x);if(W!=null&&(K===r?W===W&&!ln(W):v(W,K)))var K=W,ue=x}return ue}function _v(a,l,v,w){var M=a.length;for(v=_t(v),v<0&&(v=-v>M?0:M+v),w=w===r||w>M?M:_t(w),w<0&&(w+=M),w=v>w?0:Kh(w);v<w;)a[v++]=l;return a}function Tc(a,l){var v=[];return _i(a,function(w,M,x){l(w,M,x)&&v.push(w)}),v}function Br(a,l,v,w,M){var x=-1,W=a.length;for(v||(v=am),M||(M=[]);++x<W;){var K=a[x];l>0&&v(K)?l>1?Br(K,l-1,v,w,M):gi(M,K):w||(M[M.length]=K)}return M}var wo=ih(),kc=ih(!0);function qn(a,l){return a&&wo(a,l,yr)}function Ao(a,l){return a&&kc(a,l,yr)}function Ta(a,l){return pi(l,function(v){return ui(a[v])})}function Wi(a,l){l=bi(l,a);for(var v=0,w=l.length;a!=null&&v<w;)a=a[Wn(l[v++])];return v&&v==w?a:r}function Ic(a,l,v){var w=l(a);return ht(a)?w:gi(w,v(a))}function zr(a){return a==null?a===r?H:Xe:Vi&&Vi in jt(a)?em(a):dm(a)}function Eo(a,l){return a>l}function Dv(a,l){return a!=null&&Nt.call(a,l)}function bv(a,l){return a!=null&&l in jt(a)}function yv(a,l,v){return a>=Lr(l,v)&&a<vr(l,v)}function Co(a,l,v){for(var w=v?ao:da,M=a[0].length,x=a.length,W=x,K=oe(x),ue=1/0,ve=[];W--;){var me=a[W];W&&l&&(me=Kt(me,sn(l))),ue=Lr(me.length,ue),K[W]=!v&&(l||M>=120&&me.length>=120)?new qi(W&&me):r}me=a[0];var be=-1,ke=K[0];e:for(;++be<M&&ve.length<ue;){var We=me[be],nt=l?l(We):We;if(We=v||We!==0?We:0,!(ke?Vu(ke,nt):w(ve,nt,v))){for(W=x;--W;){var Dt=K[W];if(!(Dt?Vu(Dt,nt):w(a[W],nt,v)))continue e}ke&&ke.push(nt),ve.push(We)}}return ve}function wv(a,l,v,w){return qn(a,function(M,x,W){l(w,v(M),x,W)}),w}function Ku(a,l,v){l=bi(l,a),a=yh(a,l);var w=a==null?a:a[Wn(wn(l))];return w==null?r:an(w,a,v)}function xc(a){return ir(a)&&zr(a)==qe}function Av(a){return ir(a)&&zr(a)==ae}function Ev(a){return ir(a)&&zr(a)==Ue}function Yu(a,l,v,w,M){return a===l?!0:a==null||l==null||!ir(a)&&!ir(l)?a!==a&&l!==l:Cv(a,l,v,w,Yu,M)}function Cv(a,l,v,w,M,x){var W=ht(a),K=ht(l),ue=W?Ie:Ur(a),ve=K?Ie:Ur(l);ue=ue==qe?Je:ue,ve=ve==qe?Je:ve;var me=ue==Je,be=ve==Je,ke=ue==ve;if(ke&&wi(a)){if(!wi(l))return!1;W=!0,me=!1}if(ke&&!me)return x||(x=new Pn),W||cu(a)?ph(a,l,v,w,M,x):Jv(a,l,ue,v,w,M,x);if(!(v&b)){var We=me&&Nt.call(a,"__wrapped__"),nt=be&&Nt.call(l,"__wrapped__");if(We||nt){var Dt=We?a.value():a,it=nt?l.value():l;return x||(x=new Pn),M(Dt,it,v,w,x)}}return ke?(x||(x=new Pn),Qv(a,l,v,w,M,x)):!1}function Fv(a){return ir(a)&&Ur(a)==at}function Fo(a,l,v,w){var M=v.length,x=M,W=!w;if(a==null)return!x;for(a=jt(a);M--;){var K=v[M];if(W&&K[2]?K[1]!==a[K[0]]:!(K[0]in a))return!1}for(;++M<x;){K=v[M];var ue=K[0],ve=a[ue],me=K[1];if(W&&K[2]){if(ve===r&&!(ue in a))return!1}else{var be=new Pn;if(w)var ke=w(ve,me,ue,a,l,be);if(!(ke===r?Yu(me,ve,b|m,w,be):ke))return!1}}return!0}function Nc(a){if(!Jt(a)||om(a))return!1;var l=ui(a)?Fg:Pu;return l.test(Gi(a))}function Sv(a){return ir(a)&&zr(a)==Ot}function Bv(a){return ir(a)&&Ur(a)==Vt}function Ov(a){return ir(a)&&Ya(a.length)&&!!Gt[zr(a)]}function Rc(a){return typeof a=="function"?a:a==null?Qr:typeof a=="object"?ht(a)?Vc(a[0],a[1]):Uc(a):u0(a)}function So(a){if(!Ju(a))return Tg(a);var l=[];for(var v in jt(a))Nt.call(a,v)&&v!="constructor"&&l.push(v);return l}function Mv(a){if(!Jt(a))return hm(a);var l=Ju(a),v=[];for(var w in a)w=="constructor"&&(l||!Nt.call(a,w))||v.push(w);return v}function Bo(a,l){return a<l}function Lc(a,l){var v=-1,w=Xr(a)?oe(a.length):[];return _i(a,function(M,x,W){w[++v]=l(M,x,W)}),w}function Uc(a){var l=zo(a);return l.length==1&&l[0][2]?Dh(l[0][0],l[0][1]):function(v){return v===a||Fo(v,a,l)}}function Vc(a,l){return Ho(a)&&_h(l)?Dh(Wn(a),l):function(v){var w=tl(v,a);return w===r&&w===l?rl(v,a):Yu(l,w,b|m)}}function ka(a,l,v,w,M){a!==l&&wo(l,function(x,W){if(M||(M=new Pn),Jt(x))Pv(a,l,W,v,ka,w,M);else{var K=w?w($o(a,W),x,W+"",a,l,M):r;K===r&&(K=x),bo(a,W,K)}},Jr)}function Pv(a,l,v,w,M,x,W){var K=$o(a,v),ue=$o(l,v),ve=W.get(ue);if(ve){bo(a,v,ve);return}var me=x?x(K,ue,v+"",a,l,W):r,be=me===r;if(be){var ke=ht(ue),We=!ke&&wi(ue),nt=!ke&&!We&&cu(ue);me=ue,ke||We||nt?ht(K)?me=K:lr(K)?me=Zr(K):We?(be=!1,me=Jc(ue,!0)):nt?(be=!1,me=Qc(ue,!0)):me=[]:ea(ue)||$i(ue)?(me=K,$i(K)?me=Yh(K):(!Jt(K)||ui(K))&&(me=mh(ue))):be=!1}be&&(W.set(ue,me),M(me,ue,w,x,W),W.delete(ue)),bo(a,v,me)}function jc(a,l){var v=a.length;if(v)return l+=l<0?v:0,ii(l,v)?a[l]:r}function qc(a,l,v){l.length?l=Kt(l,function(x){return ht(x)?function(W){return Wi(W,x.length===1?x[0]:x)}:x}):l=[Qr];var w=-1;l=Kt(l,sn(Qe()));var M=Lc(a,function(x,W,K){var ue=Kt(l,function(ve){return ve(x)});return{criteria:ue,index:++w,value:x}});return ig(M,function(x,W){return Wv(x,W,v)})}function Tv(a,l){return zc(a,l,function(v,w){return rl(a,w)})}function zc(a,l,v){for(var w=-1,M=l.length,x={};++w<M;){var W=l[w],K=Wi(a,W);v(K,W)&&Zu(x,bi(W,a),K)}return x}function kv(a){return function(l){return Wi(l,a)}}function Oo(a,l,v,w){var M=w?ng:eu,x=-1,W=l.length,K=a;for(a===l&&(l=Zr(l)),v&&(K=Kt(a,sn(v)));++x<W;)for(var ue=0,ve=l[x],me=v?v(ve):ve;(ue=M(K,me,ue,w))>-1;)K!==a&&Aa.call(K,ue,1),Aa.call(a,ue,1);return a}function Wc(a,l){for(var v=a?l.length:0,w=v-1;v--;){var M=l[v];if(v==w||M!==x){var x=M;ii(M)?Aa.call(a,M,1):ko(a,M)}}return a}function Mo(a,l){return a+Fa(Ec()*(l-a+1))}function Iv(a,l,v,w){for(var M=-1,x=vr(Ca((l-a)/(v||1)),0),W=oe(x);x--;)W[w?x:++M]=a,a+=v;return W}function Po(a,l){var v="";if(!a||l<1||l>Z)return v;do l%2&&(v+=a),l=Fa(l/2),l&&(a+=a);while(l);return v}function bt(a,l){return Ko(bh(a,l,Qr),a+"")}function xv(a){return Sc(hu(a))}function Nv(a,l){var v=hu(a);return za(v,zi(l,0,v.length))}function Zu(a,l,v,w){if(!Jt(a))return a;l=bi(l,a);for(var M=-1,x=l.length,W=x-1,K=a;K!=null&&++M<x;){var ue=Wn(l[M]),ve=v;if(ue==="__proto__"||ue==="constructor"||ue==="prototype")return a;if(M!=W){var me=K[ue];ve=w?w(me,ue,K):r,ve===r&&(ve=Jt(me)?me:ii(l[M+1])?[]:{})}Gu(K,ue,ve),K=K[ue]}return a}var Hc=Sa?function(a,l){return Sa.set(a,l),a}:Qr,Rv=Ea?function(a,l){return Ea(a,"toString",{configurable:!0,enumerable:!1,value:il(l),writable:!0})}:Qr;function Lv(a){return za(hu(a))}function yn(a,l,v){var w=-1,M=a.length;l<0&&(l=-l>M?0:M+l),v=v>M?M:v,v<0&&(v+=M),M=l>v?0:v-l>>>0,l>>>=0;for(var x=oe(M);++w<M;)x[w]=a[w+l];return x}function Uv(a,l){var v;return _i(a,function(w,M,x){return v=l(w,M,x),!v}),!!v}function Ia(a,l,v){var w=0,M=a==null?w:a.length;if(typeof l=="number"&&l===l&&M<=ye){for(;w<M;){var x=w+M>>>1,W=a[x];W!==null&&!ln(W)&&(v?W<=l:W<l)?w=x+1:M=x}return M}return To(a,l,Qr,v)}function To(a,l,v,w){var M=0,x=a==null?0:a.length;if(x===0)return 0;l=v(l);for(var W=l!==l,K=l===null,ue=ln(l),ve=l===r;M<x;){var me=Fa((M+x)/2),be=v(a[me]),ke=be!==r,We=be===null,nt=be===be,Dt=ln(be);if(W)var it=w||nt;else ve?it=nt&&(w||ke):K?it=nt&&ke&&(w||!We):ue?it=nt&&ke&&!We&&(w||!Dt):We||Dt?it=!1:it=w?be<=l:be<l;it?M=me+1:x=me}return Lr(x,Ee)}function Gc(a,l){for(var v=-1,w=a.length,M=0,x=[];++v<w;){var W=a[v],K=l?l(W):W;if(!v||!Tn(K,ue)){var ue=K;x[M++]=W===0?0:W}}return x}function $c(a){return typeof a=="number"?a:ln(a)?le:+a}function on(a){if(typeof a=="string")return a;if(ht(a))return Kt(a,on)+"";if(ln(a))return Cc?Cc.call(a):"";var l=a+"";return l=="0"&&1/a==-J?"-0":l}function Di(a,l,v){var w=-1,M=da,x=a.length,W=!0,K=[],ue=K;if(v)W=!1,M=ao;else if(x>=i){var ve=l?null:Zv(a);if(ve)return ga(ve);W=!1,M=Vu,ue=new qi}else ue=l?[]:K;e:for(;++w<x;){var me=a[w],be=l?l(me):me;if(me=v||me!==0?me:0,W&&be===be){for(var ke=ue.length;ke--;)if(ue[ke]===be)continue e;l&&ue.push(be),K.push(me)}else M(ue,be,v)||(ue!==K&&ue.push(be),K.push(me))}return K}function ko(a,l){return l=bi(l,a),a=yh(a,l),a==null||delete a[Wn(wn(l))]}function Kc(a,l,v,w){return Zu(a,l,v(Wi(a,l)),w)}function xa(a,l,v,w){for(var M=a.length,x=w?M:-1;(w?x--:++x<M)&&l(a[x],x,a););return v?yn(a,w?0:x,w?x+1:M):yn(a,w?x+1:0,w?M:x)}function Yc(a,l){var v=a;return v instanceof Ft&&(v=v.value()),so(l,function(w,M){return M.func.apply(M.thisArg,gi([w],M.args))},v)}function Io(a,l,v){var w=a.length;if(w<2)return w?Di(a[0]):[];for(var M=-1,x=oe(w);++M<w;)for(var W=a[M],K=-1;++K<w;)K!=M&&(x[M]=$u(x[M]||W,a[K],l,v));return Di(Br(x,1),l,v)}function Zc(a,l,v){for(var w=-1,M=a.length,x=l.length,W={};++w<M;){var K=w<x?l[w]:r;v(W,a[w],K)}return W}function xo(a){return lr(a)?a:[]}function No(a){return typeof a=="function"?a:Qr}function bi(a,l){return ht(a)?a:Ho(a,l)?[a]:Ch(kt(a))}var Vv=bt;function yi(a,l,v){var w=a.length;return v=v===r?w:v,!l&&v>=w?a:yn(a,l,v)}var Xc=Sg||function(a){return Sr.clearTimeout(a)};function Jc(a,l){if(l)return a.slice();var v=a.length,w=Dc?Dc(v):new a.constructor(v);return a.copy(w),w}function Ro(a){var l=new a.constructor(a.byteLength);return new ya(l).set(new ya(a)),l}function jv(a,l){var v=l?Ro(a.buffer):a.buffer;return new a.constructor(v,a.byteOffset,a.byteLength)}function qv(a){var l=new a.constructor(a.source,Xi.exec(a));return l.lastIndex=a.lastIndex,l}function zv(a){return Hu?jt(Hu.call(a)):{}}function Qc(a,l){var v=l?Ro(a.buffer):a.buffer;return new a.constructor(v,a.byteOffset,a.length)}function eh(a,l){if(a!==l){var v=a!==r,w=a===null,M=a===a,x=ln(a),W=l!==r,K=l===null,ue=l===l,ve=ln(l);if(!K&&!ve&&!x&&a>l||x&&W&&ue&&!K&&!ve||w&&W&&ue||!v&&ue||!M)return 1;if(!w&&!x&&!ve&&a<l||ve&&v&&M&&!w&&!x||K&&v&&M||!W&&M||!ue)return-1}return 0}function Wv(a,l,v){for(var w=-1,M=a.criteria,x=l.criteria,W=M.length,K=v.length;++w<W;){var ue=eh(M[w],x[w]);if(ue){if(w>=K)return ue;var ve=v[w];return ue*(ve=="desc"?-1:1)}}return a.index-l.index}function th(a,l,v,w){for(var M=-1,x=a.length,W=v.length,K=-1,ue=l.length,ve=vr(x-W,0),me=oe(ue+ve),be=!w;++K<ue;)me[K]=l[K];for(;++M<W;)(be||M<x)&&(me[v[M]]=a[M]);for(;ve--;)me[K++]=a[M++];return me}function rh(a,l,v,w){for(var M=-1,x=a.length,W=-1,K=v.length,ue=-1,ve=l.length,me=vr(x-K,0),be=oe(me+ve),ke=!w;++M<me;)be[M]=a[M];for(var We=M;++ue<ve;)be[We+ue]=l[ue];for(;++W<K;)(ke||M<x)&&(be[We+v[W]]=a[M++]);return be}function Zr(a,l){var v=-1,w=a.length;for(l||(l=oe(w));++v<w;)l[v]=a[v];return l}function zn(a,l,v,w){var M=!v;v||(v={});for(var x=-1,W=l.length;++x<W;){var K=l[x],ue=w?w(v[K],a[K],K,v,a):r;ue===r&&(ue=a[K]),M?ti(v,K,ue):Gu(v,K,ue)}return v}function Hv(a,l){return zn(a,Wo(a),l)}function Gv(a,l){return zn(a,gh(a),l)}function Na(a,l){return function(v,w){var M=ht(v)?X1:pv,x=l?l():{};return M(v,a,Qe(w,2),x)}}function ou(a){return bt(function(l,v){var w=-1,M=v.length,x=M>1?v[M-1]:r,W=M>2?v[2]:r;for(x=a.length>3&&typeof x=="function"?(M--,x):r,W&&Wr(v[0],v[1],W)&&(x=M<3?r:x,M=1),l=jt(l);++w<M;){var K=v[w];K&&a(l,K,w,x)}return l})}function nh(a,l){return function(v,w){if(v==null)return v;if(!Xr(v))return a(v,w);for(var M=v.length,x=l?M:-1,W=jt(v);(l?x--:++x<M)&&w(W[x],x,W)!==!1;);return v}}function ih(a){return function(l,v,w){for(var M=-1,x=jt(l),W=w(l),K=W.length;K--;){var ue=W[a?K:++M];if(v(x[ue],ue,x)===!1)break}return l}}function $v(a,l,v){var w=l&_,M=Xu(a);function x(){var W=this&&this!==Sr&&this instanceof x?M:a;return W.apply(w?v:this,arguments)}return x}function uh(a){return function(l){l=kt(l);var v=tu(l)?Mn(l):r,w=v?v[0]:l.charAt(0),M=v?yi(v,1).join(""):l.slice(1);return w[a]()+M}}function lu(a){return function(l){return so(n0(r0(l).replace(R1,"")),a,"")}}function Xu(a){return function(){var l=arguments;switch(l.length){case 0:return new a;case 1:return new a(l[0]);case 2:return new a(l[0],l[1]);case 3:return new a(l[0],l[1],l[2]);case 4:return new a(l[0],l[1],l[2],l[3]);case 5:return new a(l[0],l[1],l[2],l[3],l[4]);case 6:return new a(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new a(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var v=su(a.prototype),w=a.apply(v,l);return Jt(w)?w:v}}function Kv(a,l,v){var w=Xu(a);function M(){for(var x=arguments.length,W=oe(x),K=x,ue=fu(M);K--;)W[K]=arguments[K];var ve=x<3&&W[0]!==ue&&W[x-1]!==ue?[]:vi(W,ue);if(x-=ve.length,x<v)return fh(a,l,Ra,M.placeholder,r,W,ve,r,r,v-x);var me=this&&this!==Sr&&this instanceof M?w:a;return an(me,this,W)}return M}function ah(a){return function(l,v,w){var M=jt(l);if(!Xr(l)){var x=Qe(v,3);l=yr(l),v=function(K){return x(M[K],K,M)}}var W=a(l,v,w);return W>-1?M[x?l[W]:W]:r}}function sh(a){return ni(function(l){var v=l.length,w=v,M=Dn.prototype.thru;for(a&&l.reverse();w--;){var x=l[w];if(typeof x!="function")throw new _n(o);if(M&&!W&&ja(x)=="wrapper")var W=new Dn([],!0)}for(w=W?w:v;++w<v;){x=l[w];var K=ja(x),ue=K=="wrapper"?qo(x):r;ue&&Go(ue[0])&&ue[1]==(P|A|E|T)&&!ue[4].length&&ue[9]==1?W=W[ja(ue[0])].apply(W,ue[3]):W=x.length==1&&Go(x)?W[K]():W.thru(x)}return function(){var ve=arguments,me=ve[0];if(W&&ve.length==1&&ht(me))return W.plant(me).value();for(var be=0,ke=v?l[be].apply(this,ve):me;++be<v;)ke=l[be].call(this,ke);return ke}})}function Ra(a,l,v,w,M,x,W,K,ue,ve){var me=l&P,be=l&_,ke=l&D,We=l&(A|S),nt=l&N,Dt=ke?r:Xu(a);function it(){for(var Et=arguments.length,Bt=oe(Et),fn=Et;fn--;)Bt[fn]=arguments[fn];if(We)var Hr=fu(it),cn=ag(Bt,Hr);if(w&&(Bt=th(Bt,w,M,We)),x&&(Bt=rh(Bt,x,W,We)),Et-=cn,We&&Et<ve){var fr=vi(Bt,Hr);return fh(a,l,Ra,it.placeholder,v,Bt,fr,K,ue,ve-Et)}var kn=be?v:this,si=ke?kn[a]:a;return Et=Bt.length,K?Bt=pm(Bt,K):nt&&Et>1&&Bt.reverse(),me&&ue<Et&&(Bt.length=ue),this&&this!==Sr&&this instanceof it&&(si=Dt||Xu(si)),si.apply(kn,Bt)}return it}function oh(a,l){return function(v,w){return wv(v,a,l(w),{})}}function La(a,l){return function(v,w){var M;if(v===r&&w===r)return l;if(v!==r&&(M=v),w!==r){if(M===r)return w;typeof v=="string"||typeof w=="string"?(v=on(v),w=on(w)):(v=$c(v),w=$c(w)),M=a(v,w)}return M}}function Lo(a){return ni(function(l){return l=Kt(l,sn(Qe())),bt(function(v){var w=this;return a(l,function(M){return an(M,w,v)})})})}function Ua(a,l){l=l===r?" ":on(l);var v=l.length;if(v<2)return v?Po(l,a):l;var w=Po(l,Ca(a/ru(l)));return tu(l)?yi(Mn(w),0,a).join(""):w.slice(0,a)}function Yv(a,l,v,w){var M=l&_,x=Xu(a);function W(){for(var K=-1,ue=arguments.length,ve=-1,me=w.length,be=oe(me+ue),ke=this&&this!==Sr&&this instanceof W?x:a;++ve<me;)be[ve]=w[ve];for(;ue--;)be[ve++]=arguments[++K];return an(ke,M?v:this,be)}return W}function lh(a){return function(l,v,w){return w&&typeof w!="number"&&Wr(l,v,w)&&(v=w=r),l=ai(l),v===r?(v=l,l=0):v=ai(v),w=w===r?l<v?1:-1:ai(w),Iv(l,v,w,a)}}function Va(a){return function(l,v){return typeof l=="string"&&typeof v=="string"||(l=An(l),v=An(v)),a(l,v)}}function fh(a,l,v,w,M,x,W,K,ue,ve){var me=l&A,be=me?W:r,ke=me?r:W,We=me?x:r,nt=me?r:x;l|=me?E:B,l&=~(me?B:E),l&C||(l&=~(_|D));var Dt=[a,l,M,We,be,nt,ke,K,ue,ve],it=v.apply(r,Dt);return Go(a)&&wh(it,Dt),it.placeholder=w,Ah(it,a,l)}function Uo(a){var l=gr[a];return function(v,w){if(v=An(v),w=w==null?0:Lr(_t(w),292),w&&Ac(v)){var M=(kt(v)+"e").split("e"),x=l(M[0]+"e"+(+M[1]+w));return M=(kt(x)+"e").split("e"),+(M[0]+"e"+(+M[1]-w))}return l(v)}}var Zv=uu&&1/ga(new uu([,-0]))[1]==J?function(a){return new uu(a)}:sl;function ch(a){return function(l){var v=Ur(l);return v==at?go(l):v==Vt?dg(l):ug(l,a(l))}}function ri(a,l,v,w,M,x,W,K){var ue=l&D;if(!ue&&typeof a!="function")throw new _n(o);var ve=w?w.length:0;if(ve||(l&=~(E|B),w=M=r),W=W===r?W:vr(_t(W),0),K=K===r?K:_t(K),ve-=M?M.length:0,l&B){var me=w,be=M;w=M=r}var ke=ue?r:qo(a),We=[a,l,v,w,M,me,be,x,W,K];if(ke&&cm(We,ke),a=We[0],l=We[1],v=We[2],w=We[3],M=We[4],K=We[9]=We[9]===r?ue?0:a.length:vr(We[9]-ve,0),!K&&l&(A|S)&&(l&=~(A|S)),!l||l==_)var nt=$v(a,l,v);else l==A||l==S?nt=Kv(a,l,K):(l==E||l==(_|E))&&!M.length?nt=Yv(a,l,v,w):nt=Ra.apply(r,We);var Dt=ke?Hc:wh;return Ah(Dt(nt,We),a,l)}function hh(a,l,v,w){return a===r||Tn(a,iu[v])&&!Nt.call(w,v)?l:a}function dh(a,l,v,w,M,x){return Jt(a)&&Jt(l)&&(x.set(l,a),ka(a,l,r,dh,x),x.delete(l)),a}function Xv(a){return ea(a)?r:a}function ph(a,l,v,w,M,x){var W=v&b,K=a.length,ue=l.length;if(K!=ue&&!(W&&ue>K))return!1;var ve=x.get(a),me=x.get(l);if(ve&&me)return ve==l&&me==a;var be=-1,ke=!0,We=v&m?new qi:r;for(x.set(a,l),x.set(l,a);++be<K;){var nt=a[be],Dt=l[be];if(w)var it=W?w(Dt,nt,be,l,a,x):w(nt,Dt,be,a,l,x);if(it!==r){if(it)continue;ke=!1;break}if(We){if(!oo(l,function(Et,Bt){if(!Vu(We,Bt)&&(nt===Et||M(nt,Et,v,w,x)))return We.push(Bt)})){ke=!1;break}}else if(!(nt===Dt||M(nt,Dt,v,w,x))){ke=!1;break}}return x.delete(a),x.delete(l),ke}function Jv(a,l,v,w,M,x,W){switch(v){case he:if(a.byteLength!=l.byteLength||a.byteOffset!=l.byteOffset)return!1;a=a.buffer,l=l.buffer;case ae:return!(a.byteLength!=l.byteLength||!x(new ya(a),new ya(l)));case He:case Ue:case st:return Tn(+a,+l);case mt:return a.name==l.name&&a.message==l.message;case Ot:case Ht:return a==l+"";case at:var K=go;case Vt:var ue=w&b;if(K||(K=ga),a.size!=l.size&&!ue)return!1;var ve=W.get(a);if(ve)return ve==l;w|=m,W.set(a,l);var me=ph(K(a),K(l),w,M,x,W);return W.delete(a),me;case j:if(Hu)return Hu.call(a)==Hu.call(l)}return!1}function Qv(a,l,v,w,M,x){var W=v&b,K=Vo(a),ue=K.length,ve=Vo(l),me=ve.length;if(ue!=me&&!W)return!1;for(var be=ue;be--;){var ke=K[be];if(!(W?ke in l:Nt.call(l,ke)))return!1}var We=x.get(a),nt=x.get(l);if(We&&nt)return We==l&&nt==a;var Dt=!0;x.set(a,l),x.set(l,a);for(var it=W;++be<ue;){ke=K[be];var Et=a[ke],Bt=l[ke];if(w)var fn=W?w(Bt,Et,ke,l,a,x):w(Et,Bt,ke,a,l,x);if(!(fn===r?Et===Bt||M(Et,Bt,v,w,x):fn)){Dt=!1;break}it||(it=ke=="constructor")}if(Dt&&!it){var Hr=a.constructor,cn=l.constructor;Hr!=cn&&"constructor"in a&&"constructor"in l&&!(typeof Hr=="function"&&Hr instanceof Hr&&typeof cn=="function"&&cn instanceof cn)&&(Dt=!1)}return x.delete(a),x.delete(l),Dt}function ni(a){return Ko(bh(a,r,Oh),a+"")}function Vo(a){return Ic(a,yr,Wo)}function jo(a){return Ic(a,Jr,gh)}var qo=Sa?function(a){return Sa.get(a)}:sl;function ja(a){for(var l=a.name+"",v=au[l],w=Nt.call(au,l)?v.length:0;w--;){var M=v[w],x=M.func;if(x==null||x==a)return M.name}return l}function fu(a){var l=Nt.call(k,"placeholder")?k:a;return l.placeholder}function Qe(){var a=k.iteratee||ul;return a=a===ul?Rc:a,arguments.length?a(arguments[0],arguments[1]):a}function qa(a,l){var v=a.__data__;return sm(l)?v[typeof l=="string"?"string":"hash"]:v.map}function zo(a){for(var l=yr(a),v=l.length;v--;){var w=l[v],M=a[w];l[v]=[w,M,_h(M)]}return l}function Hi(a,l){var v=fg(a,l);return Nc(v)?v:r}function em(a){var l=Nt.call(a,Vi),v=a[Vi];try{a[Vi]=r;var w=!0}catch{}var M=Da.call(a);return w&&(l?a[Vi]=v:delete a[Vi]),M}var Wo=mo?function(a){return a==null?[]:(a=jt(a),pi(mo(a),function(l){return yc.call(a,l)}))}:ol,gh=mo?function(a){for(var l=[];a;)gi(l,Wo(a)),a=wa(a);return l}:ol,Ur=zr;(_o&&Ur(new _o(new ArrayBuffer(1)))!=he||qu&&Ur(new qu)!=at||Do&&Ur(Do.resolve())!=Ce||uu&&Ur(new uu)!=Vt||zu&&Ur(new zu)!=te)&&(Ur=function(a){var l=zr(a),v=l==Je?a.constructor:r,w=v?Gi(v):"";if(w)switch(w){case Ng:return he;case Rg:return at;case Lg:return Ce;case Ug:return Vt;case Vg:return te}return l});function tm(a,l,v){for(var w=-1,M=v.length;++w<M;){var x=v[w],W=x.size;switch(x.type){case"drop":a+=W;break;case"dropRight":l-=W;break;case"take":l=Lr(l,a+W);break;case"takeRight":a=vr(a,l-W);break}}return{start:a,end:l}}function rm(a){var l=a.match(ci);return l?l[1].split(pn):[]}function vh(a,l,v){l=bi(l,a);for(var w=-1,M=l.length,x=!1;++w<M;){var W=Wn(l[w]);if(!(x=a!=null&&v(a,W)))break;a=a[W]}return x||++w!=M?x:(M=a==null?0:a.length,!!M&&Ya(M)&&ii(W,M)&&(ht(a)||$i(a)))}function nm(a){var l=a.length,v=new a.constructor(l);return l&&typeof a[0]=="string"&&Nt.call(a,"index")&&(v.index=a.index,v.input=a.input),v}function mh(a){return typeof a.constructor=="function"&&!Ju(a)?su(wa(a)):{}}function im(a,l,v){var w=a.constructor;switch(l){case ae:return Ro(a);case He:case Ue:return new w(+a);case he:return jv(a,v);case se:case ce:case we:case Re:case rt:case Be:case zt:case xt:case rr:return Qc(a,v);case at:return new w;case st:case Ht:return new w(a);case Ot:return qv(a);case Vt:return new w;case j:return zv(a)}}function um(a,l){var v=l.length;if(!v)return a;var w=v-1;return l[w]=(v>1?"& ":"")+l[w],l=l.join(v>2?", ":" "),a.replace(Fu,`{
/* [wrapped with `+l+`] */
`)}function am(a){return ht(a)||$i(a)||!!(wc&&a&&a[wc])}function ii(a,l){var v=typeof a;return l=l??Z,!!l&&(v=="number"||v!="symbol"&&ku.test(a))&&a>-1&&a%1==0&&a<l}function Wr(a,l,v){if(!Jt(v))return!1;var w=typeof l;return(w=="number"?Xr(v)&&ii(l,v.length):w=="string"&&l in v)?Tn(v[l],a):!1}function Ho(a,l){if(ht(a))return!1;var v=typeof a;return v=="number"||v=="symbol"||v=="boolean"||a==null||ln(a)?!0:Un.test(a)||!Ln.test(a)||l!=null&&a in jt(l)}function sm(a){var l=typeof a;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?a!=="__proto__":a===null}function Go(a){var l=ja(a),v=k[l];if(typeof v!="function"||!(l in Ft.prototype))return!1;if(a===v)return!0;var w=qo(v);return!!w&&a===w[0]}function om(a){return!!_c&&_c in a}var lm=ma?ui:ll;function Ju(a){var l=a&&a.constructor,v=typeof l=="function"&&l.prototype||iu;return a===v}function _h(a){return a===a&&!Jt(a)}function Dh(a,l){return function(v){return v==null?!1:v[a]===l&&(l!==r||a in jt(v))}}function fm(a){var l=$a(a,function(w){return v.size===p&&v.clear(),w}),v=l.cache;return l}function cm(a,l){var v=a[1],w=l[1],M=v|w,x=M<(_|D|P),W=w==P&&v==A||w==P&&v==T&&a[7].length<=l[8]||w==(P|T)&&l[7].length<=l[8]&&v==A;if(!(x||W))return a;w&_&&(a[2]=l[2],M|=v&_?0:C);var K=l[3];if(K){var ue=a[3];a[3]=ue?th(ue,K,l[4]):K,a[4]=ue?vi(a[3],f):l[4]}return K=l[5],K&&(ue=a[5],a[5]=ue?rh(ue,K,l[6]):K,a[6]=ue?vi(a[5],f):l[6]),K=l[7],K&&(a[7]=K),w&P&&(a[8]=a[8]==null?l[8]:Lr(a[8],l[8])),a[9]==null&&(a[9]=l[9]),a[0]=l[0],a[1]=M,a}function hm(a){var l=[];if(a!=null)for(var v in jt(a))l.push(v);return l}function dm(a){return Da.call(a)}function bh(a,l,v){return l=vr(l===r?a.length-1:l,0),function(){for(var w=arguments,M=-1,x=vr(w.length-l,0),W=oe(x);++M<x;)W[M]=w[l+M];M=-1;for(var K=oe(l+1);++M<l;)K[M]=w[M];return K[l]=v(W),an(a,this,K)}}function yh(a,l){return l.length<2?a:Wi(a,yn(l,0,-1))}function pm(a,l){for(var v=a.length,w=Lr(l.length,v),M=Zr(a);w--;){var x=l[w];a[w]=ii(x,v)?M[x]:r}return a}function $o(a,l){if(!(l==="constructor"&&typeof a[l]=="function")&&l!="__proto__")return a[l]}var wh=Eh(Hc),Qu=Og||function(a,l){return Sr.setTimeout(a,l)},Ko=Eh(Rv);function Ah(a,l,v){var w=l+"";return Ko(a,um(w,gm(rm(w),v)))}function Eh(a){var l=0,v=0;return function(){var w=kg(),M=Y-(w-v);if(v=w,M>0){if(++l>=z)return arguments[0]}else l=0;return a.apply(r,arguments)}}function za(a,l){var v=-1,w=a.length,M=w-1;for(l=l===r?w:l;++v<l;){var x=Mo(v,M),W=a[x];a[x]=a[v],a[v]=W}return a.length=l,a}var Ch=fm(function(a){var l=[];return a.charCodeAt(0)===46&&l.push(""),a.replace(Zi,function(v,w,M,x){l.push(M?x.replace(Su,"$1"):w||v)}),l});function Wn(a){if(typeof a=="string"||ln(a))return a;var l=a+"";return l=="0"&&1/a==-J?"-0":l}function Gi(a){if(a!=null){try{return _a.call(a)}catch{}try{return a+""}catch{}}return""}function gm(a,l){return mn(Oe,function(v){var w="_."+v[0];l&v[1]&&!da(a,w)&&a.push(w)}),a.sort()}function Fh(a){if(a instanceof Ft)return a.clone();var l=new Dn(a.__wrapped__,a.__chain__);return l.__actions__=Zr(a.__actions__),l.__index__=a.__index__,l.__values__=a.__values__,l}function vm(a,l,v){(v?Wr(a,l,v):l===r)?l=1:l=vr(_t(l),0);var w=a==null?0:a.length;if(!w||l<1)return[];for(var M=0,x=0,W=oe(Ca(w/l));M<w;)W[x++]=yn(a,M,M+=l);return W}function mm(a){for(var l=-1,v=a==null?0:a.length,w=0,M=[];++l<v;){var x=a[l];x&&(M[w++]=x)}return M}function _m(){var a=arguments.length;if(!a)return[];for(var l=oe(a-1),v=arguments[0],w=a;w--;)l[w-1]=arguments[w];return gi(ht(v)?Zr(v):[v],Br(l,1))}var Dm=bt(function(a,l){return lr(a)?$u(a,Br(l,1,lr,!0)):[]}),bm=bt(function(a,l){var v=wn(l);return lr(v)&&(v=r),lr(a)?$u(a,Br(l,1,lr,!0),Qe(v,2)):[]}),ym=bt(function(a,l){var v=wn(l);return lr(v)&&(v=r),lr(a)?$u(a,Br(l,1,lr,!0),r,v):[]});function wm(a,l,v){var w=a==null?0:a.length;return w?(l=v||l===r?1:_t(l),yn(a,l<0?0:l,w)):[]}function Am(a,l,v){var w=a==null?0:a.length;return w?(l=v||l===r?1:_t(l),l=w-l,yn(a,0,l<0?0:l)):[]}function Em(a,l){return a&&a.length?xa(a,Qe(l,3),!0,!0):[]}function Cm(a,l){return a&&a.length?xa(a,Qe(l,3),!0):[]}function Fm(a,l,v,w){var M=a==null?0:a.length;return M?(v&&typeof v!="number"&&Wr(a,l,v)&&(v=0,w=M),_v(a,l,v,w)):[]}function Sh(a,l,v){var w=a==null?0:a.length;if(!w)return-1;var M=v==null?0:_t(v);return M<0&&(M=vr(w+M,0)),pa(a,Qe(l,3),M)}function Bh(a,l,v){var w=a==null?0:a.length;if(!w)return-1;var M=w-1;return v!==r&&(M=_t(v),M=v<0?vr(w+M,0):Lr(M,w-1)),pa(a,Qe(l,3),M,!0)}function Oh(a){var l=a==null?0:a.length;return l?Br(a,1):[]}function Sm(a){var l=a==null?0:a.length;return l?Br(a,J):[]}function Bm(a,l){var v=a==null?0:a.length;return v?(l=l===r?1:_t(l),Br(a,l)):[]}function Om(a){for(var l=-1,v=a==null?0:a.length,w={};++l<v;){var M=a[l];w[M[0]]=M[1]}return w}function Mh(a){return a&&a.length?a[0]:r}function Mm(a,l,v){var w=a==null?0:a.length;if(!w)return-1;var M=v==null?0:_t(v);return M<0&&(M=vr(w+M,0)),eu(a,l,M)}function Pm(a){var l=a==null?0:a.length;return l?yn(a,0,-1):[]}var Tm=bt(function(a){var l=Kt(a,xo);return l.length&&l[0]===a[0]?Co(l):[]}),km=bt(function(a){var l=wn(a),v=Kt(a,xo);return l===wn(v)?l=r:v.pop(),v.length&&v[0]===a[0]?Co(v,Qe(l,2)):[]}),Im=bt(function(a){var l=wn(a),v=Kt(a,xo);return l=typeof l=="function"?l:r,l&&v.pop(),v.length&&v[0]===a[0]?Co(v,r,l):[]});function xm(a,l){return a==null?"":Pg.call(a,l)}function wn(a){var l=a==null?0:a.length;return l?a[l-1]:r}function Nm(a,l,v){var w=a==null?0:a.length;if(!w)return-1;var M=w;return v!==r&&(M=_t(v),M=M<0?vr(w+M,0):Lr(M,w-1)),l===l?gg(a,l,M):pa(a,fc,M,!0)}function Rm(a,l){return a&&a.length?jc(a,_t(l)):r}var Lm=bt(Ph);function Ph(a,l){return a&&a.length&&l&&l.length?Oo(a,l):a}function Um(a,l,v){return a&&a.length&&l&&l.length?Oo(a,l,Qe(v,2)):a}function Vm(a,l,v){return a&&a.length&&l&&l.length?Oo(a,l,r,v):a}var jm=ni(function(a,l){var v=a==null?0:a.length,w=yo(a,l);return Wc(a,Kt(l,function(M){return ii(M,v)?+M:M}).sort(eh)),w});function qm(a,l){var v=[];if(!(a&&a.length))return v;var w=-1,M=[],x=a.length;for(l=Qe(l,3);++w<x;){var W=a[w];l(W,w,a)&&(v.push(W),M.push(w))}return Wc(a,M),v}function Yo(a){return a==null?a:xg.call(a)}function zm(a,l,v){var w=a==null?0:a.length;return w?(v&&typeof v!="number"&&Wr(a,l,v)?(l=0,v=w):(l=l==null?0:_t(l),v=v===r?w:_t(v)),yn(a,l,v)):[]}function Wm(a,l){return Ia(a,l)}function Hm(a,l,v){return To(a,l,Qe(v,2))}function Gm(a,l){var v=a==null?0:a.length;if(v){var w=Ia(a,l);if(w<v&&Tn(a[w],l))return w}return-1}function $m(a,l){return Ia(a,l,!0)}function Km(a,l,v){return To(a,l,Qe(v,2),!0)}function Ym(a,l){var v=a==null?0:a.length;if(v){var w=Ia(a,l,!0)-1;if(Tn(a[w],l))return w}return-1}function Zm(a){return a&&a.length?Gc(a):[]}function Xm(a,l){return a&&a.length?Gc(a,Qe(l,2)):[]}function Jm(a){var l=a==null?0:a.length;return l?yn(a,1,l):[]}function Qm(a,l,v){return a&&a.length?(l=v||l===r?1:_t(l),yn(a,0,l<0?0:l)):[]}function e_(a,l,v){var w=a==null?0:a.length;return w?(l=v||l===r?1:_t(l),l=w-l,yn(a,l<0?0:l,w)):[]}function t_(a,l){return a&&a.length?xa(a,Qe(l,3),!1,!0):[]}function r_(a,l){return a&&a.length?xa(a,Qe(l,3)):[]}var n_=bt(function(a){return Di(Br(a,1,lr,!0))}),i_=bt(function(a){var l=wn(a);return lr(l)&&(l=r),Di(Br(a,1,lr,!0),Qe(l,2))}),u_=bt(function(a){var l=wn(a);return l=typeof l=="function"?l:r,Di(Br(a,1,lr,!0),r,l)});function a_(a){return a&&a.length?Di(a):[]}function s_(a,l){return a&&a.length?Di(a,Qe(l,2)):[]}function o_(a,l){return l=typeof l=="function"?l:r,a&&a.length?Di(a,r,l):[]}function Zo(a){if(!(a&&a.length))return[];var l=0;return a=pi(a,function(v){if(lr(v))return l=vr(v.length,l),!0}),ho(l,function(v){return Kt(a,lo(v))})}function Th(a,l){if(!(a&&a.length))return[];var v=Zo(a);return l==null?v:Kt(v,function(w){return an(l,r,w)})}var l_=bt(function(a,l){return lr(a)?$u(a,l):[]}),f_=bt(function(a){return Io(pi(a,lr))}),c_=bt(function(a){var l=wn(a);return lr(l)&&(l=r),Io(pi(a,lr),Qe(l,2))}),h_=bt(function(a){var l=wn(a);return l=typeof l=="function"?l:r,Io(pi(a,lr),r,l)}),d_=bt(Zo);function p_(a,l){return Zc(a||[],l||[],Gu)}function g_(a,l){return Zc(a||[],l||[],Zu)}var v_=bt(function(a){var l=a.length,v=l>1?a[l-1]:r;return v=typeof v=="function"?(a.pop(),v):r,Th(a,v)});function kh(a){var l=k(a);return l.__chain__=!0,l}function m_(a,l){return l(a),a}function Wa(a,l){return l(a)}var __=ni(function(a){var l=a.length,v=l?a[0]:0,w=this.__wrapped__,M=function(x){return yo(x,a)};return l>1||this.__actions__.length||!(w instanceof Ft)||!ii(v)?this.thru(M):(w=w.slice(v,+v+(l?1:0)),w.__actions__.push({func:Wa,args:[M],thisArg:r}),new Dn(w,this.__chain__).thru(function(x){return l&&!x.length&&x.push(r),x}))});function D_(){return kh(this)}function b_(){return new Dn(this.value(),this.__chain__)}function y_(){this.__values__===r&&(this.__values__=$h(this.value()));var a=this.__index__>=this.__values__.length,l=a?r:this.__values__[this.__index__++];return{done:a,value:l}}function w_(){return this}function A_(a){for(var l,v=this;v instanceof Oa;){var w=Fh(v);w.__index__=0,w.__values__=r,l?M.__wrapped__=w:l=w;var M=w;v=v.__wrapped__}return M.__wrapped__=a,l}function E_(){var a=this.__wrapped__;if(a instanceof Ft){var l=a;return this.__actions__.length&&(l=new Ft(this)),l=l.reverse(),l.__actions__.push({func:Wa,args:[Yo],thisArg:r}),new Dn(l,this.__chain__)}return this.thru(Yo)}function C_(){return Yc(this.__wrapped__,this.__actions__)}var F_=Na(function(a,l,v){Nt.call(a,v)?++a[v]:ti(a,v,1)});function S_(a,l,v){var w=ht(a)?oc:mv;return v&&Wr(a,l,v)&&(l=r),w(a,Qe(l,3))}function B_(a,l){var v=ht(a)?pi:Tc;return v(a,Qe(l,3))}var O_=ah(Sh),M_=ah(Bh);function P_(a,l){return Br(Ha(a,l),1)}function T_(a,l){return Br(Ha(a,l),J)}function k_(a,l,v){return v=v===r?1:_t(v),Br(Ha(a,l),v)}function Ih(a,l){var v=ht(a)?mn:_i;return v(a,Qe(l,3))}function xh(a,l){var v=ht(a)?J1:Pc;return v(a,Qe(l,3))}var I_=Na(function(a,l,v){Nt.call(a,v)?a[v].push(l):ti(a,v,[l])});function x_(a,l,v,w){a=Xr(a)?a:hu(a),v=v&&!w?_t(v):0;var M=a.length;return v<0&&(v=vr(M+v,0)),Za(a)?v<=M&&a.indexOf(l,v)>-1:!!M&&eu(a,l,v)>-1}var N_=bt(function(a,l,v){var w=-1,M=typeof l=="function",x=Xr(a)?oe(a.length):[];return _i(a,function(W){x[++w]=M?an(l,W,v):Ku(W,l,v)}),x}),R_=Na(function(a,l,v){ti(a,v,l)});function Ha(a,l){var v=ht(a)?Kt:Lc;return v(a,Qe(l,3))}function L_(a,l,v,w){return a==null?[]:(ht(l)||(l=l==null?[]:[l]),v=w?r:v,ht(v)||(v=v==null?[]:[v]),qc(a,l,v))}var U_=Na(function(a,l,v){a[v?0:1].push(l)},function(){return[[],[]]});function V_(a,l,v){var w=ht(a)?so:hc,M=arguments.length<3;return w(a,Qe(l,4),v,M,_i)}function j_(a,l,v){var w=ht(a)?Q1:hc,M=arguments.length<3;return w(a,Qe(l,4),v,M,Pc)}function q_(a,l){var v=ht(a)?pi:Tc;return v(a,Ka(Qe(l,3)))}function z_(a){var l=ht(a)?Sc:xv;return l(a)}function W_(a,l,v){(v?Wr(a,l,v):l===r)?l=1:l=_t(l);var w=ht(a)?hv:Nv;return w(a,l)}function H_(a){var l=ht(a)?dv:Lv;return l(a)}function G_(a){if(a==null)return 0;if(Xr(a))return Za(a)?ru(a):a.length;var l=Ur(a);return l==at||l==Vt?a.size:So(a).length}function $_(a,l,v){var w=ht(a)?oo:Uv;return v&&Wr(a,l,v)&&(l=r),w(a,Qe(l,3))}var K_=bt(function(a,l){if(a==null)return[];var v=l.length;return v>1&&Wr(a,l[0],l[1])?l=[]:v>2&&Wr(l[0],l[1],l[2])&&(l=[l[0]]),qc(a,Br(l,1),[])}),Ga=Bg||function(){return Sr.Date.now()};function Y_(a,l){if(typeof l!="function")throw new _n(o);return a=_t(a),function(){if(--a<1)return l.apply(this,arguments)}}function Nh(a,l,v){return l=v?r:l,l=a&&l==null?a.length:l,ri(a,P,r,r,r,r,l)}function Rh(a,l){var v;if(typeof l!="function")throw new _n(o);return a=_t(a),function(){return--a>0&&(v=l.apply(this,arguments)),a<=1&&(l=r),v}}var Xo=bt(function(a,l,v){var w=_;if(v.length){var M=vi(v,fu(Xo));w|=E}return ri(a,w,l,v,M)}),Lh=bt(function(a,l,v){var w=_|D;if(v.length){var M=vi(v,fu(Lh));w|=E}return ri(l,w,a,v,M)});function Uh(a,l,v){l=v?r:l;var w=ri(a,A,r,r,r,r,r,l);return w.placeholder=Uh.placeholder,w}function Vh(a,l,v){l=v?r:l;var w=ri(a,S,r,r,r,r,r,l);return w.placeholder=Vh.placeholder,w}function jh(a,l,v){var w,M,x,W,K,ue,ve=0,me=!1,be=!1,ke=!0;if(typeof a!="function")throw new _n(o);l=An(l)||0,Jt(v)&&(me=!!v.leading,be="maxWait"in v,x=be?vr(An(v.maxWait)||0,l):x,ke="trailing"in v?!!v.trailing:ke);function We(fr){var kn=w,si=M;return w=M=r,ve=fr,W=a.apply(si,kn),W}function nt(fr){return ve=fr,K=Qu(Et,l),me?We(fr):W}function Dt(fr){var kn=fr-ue,si=fr-ve,a0=l-kn;return be?Lr(a0,x-si):a0}function it(fr){var kn=fr-ue,si=fr-ve;return ue===r||kn>=l||kn<0||be&&si>=x}function Et(){var fr=Ga();if(it(fr))return Bt(fr);K=Qu(Et,Dt(fr))}function Bt(fr){return K=r,ke&&w?We(fr):(w=M=r,W)}function fn(){K!==r&&Xc(K),ve=0,w=ue=M=K=r}function Hr(){return K===r?W:Bt(Ga())}function cn(){var fr=Ga(),kn=it(fr);if(w=arguments,M=this,ue=fr,kn){if(K===r)return nt(ue);if(be)return Xc(K),K=Qu(Et,l),We(ue)}return K===r&&(K=Qu(Et,l)),W}return cn.cancel=fn,cn.flush=Hr,cn}var Z_=bt(function(a,l){return Mc(a,1,l)}),X_=bt(function(a,l,v){return Mc(a,An(l)||0,v)});function J_(a){return ri(a,N)}function $a(a,l){if(typeof a!="function"||l!=null&&typeof l!="function")throw new _n(o);var v=function(){var w=arguments,M=l?l.apply(this,w):w[0],x=v.cache;if(x.has(M))return x.get(M);var W=a.apply(this,w);return v.cache=x.set(M,W)||x,W};return v.cache=new($a.Cache||ei),v}$a.Cache=ei;function Ka(a){if(typeof a!="function")throw new _n(o);return function(){var l=arguments;switch(l.length){case 0:return!a.call(this);case 1:return!a.call(this,l[0]);case 2:return!a.call(this,l[0],l[1]);case 3:return!a.call(this,l[0],l[1],l[2])}return!a.apply(this,l)}}function Q_(a){return Rh(2,a)}var eD=Vv(function(a,l){l=l.length==1&&ht(l[0])?Kt(l[0],sn(Qe())):Kt(Br(l,1),sn(Qe()));var v=l.length;return bt(function(w){for(var M=-1,x=Lr(w.length,v);++M<x;)w[M]=l[M].call(this,w[M]);return an(a,this,w)})}),Jo=bt(function(a,l){var v=vi(l,fu(Jo));return ri(a,E,r,l,v)}),qh=bt(function(a,l){var v=vi(l,fu(qh));return ri(a,B,r,l,v)}),tD=ni(function(a,l){return ri(a,T,r,r,r,l)});function rD(a,l){if(typeof a!="function")throw new _n(o);return l=l===r?l:_t(l),bt(a,l)}function nD(a,l){if(typeof a!="function")throw new _n(o);return l=l==null?0:vr(_t(l),0),bt(function(v){var w=v[l],M=yi(v,0,l);return w&&gi(M,w),an(a,this,M)})}function iD(a,l,v){var w=!0,M=!0;if(typeof a!="function")throw new _n(o);return Jt(v)&&(w="leading"in v?!!v.leading:w,M="trailing"in v?!!v.trailing:M),jh(a,l,{leading:w,maxWait:l,trailing:M})}function uD(a){return Nh(a,1)}function aD(a,l){return Jo(No(l),a)}function sD(){if(!arguments.length)return[];var a=arguments[0];return ht(a)?a:[a]}function oD(a){return bn(a,g)}function lD(a,l){return l=typeof l=="function"?l:r,bn(a,g,l)}function fD(a){return bn(a,h|g)}function cD(a,l){return l=typeof l=="function"?l:r,bn(a,h|g,l)}function hD(a,l){return l==null||Oc(a,l,yr(l))}function Tn(a,l){return a===l||a!==a&&l!==l}var dD=Va(Eo),pD=Va(function(a,l){return a>=l}),$i=xc(function(){return arguments}())?xc:function(a){return ir(a)&&Nt.call(a,"callee")&&!yc.call(a,"callee")},ht=oe.isArray,gD=rc?sn(rc):Av;function Xr(a){return a!=null&&Ya(a.length)&&!ui(a)}function lr(a){return ir(a)&&Xr(a)}function vD(a){return a===!0||a===!1||ir(a)&&zr(a)==He}var wi=Mg||ll,mD=nc?sn(nc):Ev;function _D(a){return ir(a)&&a.nodeType===1&&!ea(a)}function DD(a){if(a==null)return!0;if(Xr(a)&&(ht(a)||typeof a=="string"||typeof a.splice=="function"||wi(a)||cu(a)||$i(a)))return!a.length;var l=Ur(a);if(l==at||l==Vt)return!a.size;if(Ju(a))return!So(a).length;for(var v in a)if(Nt.call(a,v))return!1;return!0}function bD(a,l){return Yu(a,l)}function yD(a,l,v){v=typeof v=="function"?v:r;var w=v?v(a,l):r;return w===r?Yu(a,l,r,v):!!w}function Qo(a){if(!ir(a))return!1;var l=zr(a);return l==mt||l==ze||typeof a.message=="string"&&typeof a.name=="string"&&!ea(a)}function wD(a){return typeof a=="number"&&Ac(a)}function ui(a){if(!Jt(a))return!1;var l=zr(a);return l==ut||l==lt||l==tt||l==Te}function zh(a){return typeof a=="number"&&a==_t(a)}function Ya(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Z}function Jt(a){var l=typeof a;return a!=null&&(l=="object"||l=="function")}function ir(a){return a!=null&&typeof a=="object"}var Wh=ic?sn(ic):Fv;function AD(a,l){return a===l||Fo(a,l,zo(l))}function ED(a,l,v){return v=typeof v=="function"?v:r,Fo(a,l,zo(l),v)}function CD(a){return Hh(a)&&a!=+a}function FD(a){if(lm(a))throw new ft(u);return Nc(a)}function SD(a){return a===null}function BD(a){return a==null}function Hh(a){return typeof a=="number"||ir(a)&&zr(a)==st}function ea(a){if(!ir(a)||zr(a)!=Je)return!1;var l=wa(a);if(l===null)return!0;var v=Nt.call(l,"constructor")&&l.constructor;return typeof v=="function"&&v instanceof v&&_a.call(v)==Eg}var el=uc?sn(uc):Sv;function OD(a){return zh(a)&&a>=-Z&&a<=Z}var Gh=ac?sn(ac):Bv;function Za(a){return typeof a=="string"||!ht(a)&&ir(a)&&zr(a)==Ht}function ln(a){return typeof a=="symbol"||ir(a)&&zr(a)==j}var cu=sc?sn(sc):Ov;function MD(a){return a===r}function PD(a){return ir(a)&&Ur(a)==te}function TD(a){return ir(a)&&zr(a)==fe}var kD=Va(Bo),ID=Va(function(a,l){return a<=l});function $h(a){if(!a)return[];if(Xr(a))return Za(a)?Mn(a):Zr(a);if(ju&&a[ju])return hg(a[ju]());var l=Ur(a),v=l==at?go:l==Vt?ga:hu;return v(a)}function ai(a){if(!a)return a===0?a:0;if(a=An(a),a===J||a===-J){var l=a<0?-1:1;return l*X}return a===a?a:0}function _t(a){var l=ai(a),v=l%1;return l===l?v?l-v:l:0}function Kh(a){return a?zi(_t(a),0,ge):0}function An(a){if(typeof a=="number")return a;if(ln(a))return le;if(Jt(a)){var l=typeof a.valueOf=="function"?a.valueOf():a;a=Jt(l)?l+"":l}if(typeof a!="string")return a===0?a:+a;a=dc(a);var v=Mu.test(a);return v||Tu.test(a)?Y1(a.slice(2),v?2:8):Ou.test(a)?le:+a}function Yh(a){return zn(a,Jr(a))}function xD(a){return a?zi(_t(a),-Z,Z):a===0?a:0}function kt(a){return a==null?"":on(a)}var ND=ou(function(a,l){if(Ju(l)||Xr(l)){zn(l,yr(l),a);return}for(var v in l)Nt.call(l,v)&&Gu(a,v,l[v])}),Zh=ou(function(a,l){zn(l,Jr(l),a)}),Xa=ou(function(a,l,v,w){zn(l,Jr(l),a,w)}),RD=ou(function(a,l,v,w){zn(l,yr(l),a,w)}),LD=ni(yo);function UD(a,l){var v=su(a);return l==null?v:Bc(v,l)}var VD=bt(function(a,l){a=jt(a);var v=-1,w=l.length,M=w>2?l[2]:r;for(M&&Wr(l[0],l[1],M)&&(w=1);++v<w;)for(var x=l[v],W=Jr(x),K=-1,ue=W.length;++K<ue;){var ve=W[K],me=a[ve];(me===r||Tn(me,iu[ve])&&!Nt.call(a,ve))&&(a[ve]=x[ve])}return a}),jD=bt(function(a){return a.push(r,dh),an(Xh,r,a)});function qD(a,l){return lc(a,Qe(l,3),qn)}function zD(a,l){return lc(a,Qe(l,3),Ao)}function WD(a,l){return a==null?a:wo(a,Qe(l,3),Jr)}function HD(a,l){return a==null?a:kc(a,Qe(l,3),Jr)}function GD(a,l){return a&&qn(a,Qe(l,3))}function $D(a,l){return a&&Ao(a,Qe(l,3))}function KD(a){return a==null?[]:Ta(a,yr(a))}function YD(a){return a==null?[]:Ta(a,Jr(a))}function tl(a,l,v){var w=a==null?r:Wi(a,l);return w===r?v:w}function ZD(a,l){return a!=null&&vh(a,l,Dv)}function rl(a,l){return a!=null&&vh(a,l,bv)}var XD=oh(function(a,l,v){l!=null&&typeof l.toString!="function"&&(l=Da.call(l)),a[l]=v},il(Qr)),JD=oh(function(a,l,v){l!=null&&typeof l.toString!="function"&&(l=Da.call(l)),Nt.call(a,l)?a[l].push(v):a[l]=[v]},Qe),QD=bt(Ku);function yr(a){return Xr(a)?Fc(a):So(a)}function Jr(a){return Xr(a)?Fc(a,!0):Mv(a)}function eb(a,l){var v={};return l=Qe(l,3),qn(a,function(w,M,x){ti(v,l(w,M,x),w)}),v}function tb(a,l){var v={};return l=Qe(l,3),qn(a,function(w,M,x){ti(v,M,l(w,M,x))}),v}var rb=ou(function(a,l,v){ka(a,l,v)}),Xh=ou(function(a,l,v,w){ka(a,l,v,w)}),nb=ni(function(a,l){var v={};if(a==null)return v;var w=!1;l=Kt(l,function(x){return x=bi(x,a),w||(w=x.length>1),x}),zn(a,jo(a),v),w&&(v=bn(v,h|d|g,Xv));for(var M=l.length;M--;)ko(v,l[M]);return v});function ib(a,l){return Jh(a,Ka(Qe(l)))}var ub=ni(function(a,l){return a==null?{}:Tv(a,l)});function Jh(a,l){if(a==null)return{};var v=Kt(jo(a),function(w){return[w]});return l=Qe(l),zc(a,v,function(w,M){return l(w,M[0])})}function ab(a,l,v){l=bi(l,a);var w=-1,M=l.length;for(M||(M=1,a=r);++w<M;){var x=a==null?r:a[Wn(l[w])];x===r&&(w=M,x=v),a=ui(x)?x.call(a):x}return a}function sb(a,l,v){return a==null?a:Zu(a,l,v)}function ob(a,l,v,w){return w=typeof w=="function"?w:r,a==null?a:Zu(a,l,v,w)}var Qh=ch(yr),e0=ch(Jr);function lb(a,l,v){var w=ht(a),M=w||wi(a)||cu(a);if(l=Qe(l,4),v==null){var x=a&&a.constructor;M?v=w?new x:[]:Jt(a)?v=ui(x)?su(wa(a)):{}:v={}}return(M?mn:qn)(a,function(W,K,ue){return l(v,W,K,ue)}),v}function fb(a,l){return a==null?!0:ko(a,l)}function cb(a,l,v){return a==null?a:Kc(a,l,No(v))}function hb(a,l,v,w){return w=typeof w=="function"?w:r,a==null?a:Kc(a,l,No(v),w)}function hu(a){return a==null?[]:po(a,yr(a))}function db(a){return a==null?[]:po(a,Jr(a))}function pb(a,l,v){return v===r&&(v=l,l=r),v!==r&&(v=An(v),v=v===v?v:0),l!==r&&(l=An(l),l=l===l?l:0),zi(An(a),l,v)}function gb(a,l,v){return l=ai(l),v===r?(v=l,l=0):v=ai(v),a=An(a),yv(a,l,v)}function vb(a,l,v){if(v&&typeof v!="boolean"&&Wr(a,l,v)&&(l=v=r),v===r&&(typeof l=="boolean"?(v=l,l=r):typeof a=="boolean"&&(v=a,a=r)),a===r&&l===r?(a=0,l=1):(a=ai(a),l===r?(l=a,a=0):l=ai(l)),a>l){var w=a;a=l,l=w}if(v||a%1||l%1){var M=Ec();return Lr(a+M*(l-a+K1("1e-"+((M+"").length-1))),l)}return Mo(a,l)}var mb=lu(function(a,l,v){return l=l.toLowerCase(),a+(v?t0(l):l)});function t0(a){return nl(kt(a).toLowerCase())}function r0(a){return a=kt(a),a&&a.replace(Iu,sg).replace(L1,"")}function _b(a,l,v){a=kt(a),l=on(l);var w=a.length;v=v===r?w:zi(_t(v),0,w);var M=v;return v-=l.length,v>=0&&a.slice(v,M)==l}function Db(a){return a=kt(a),a&&dn.test(a)?a.replace(cr,og):a}function bb(a){return a=kt(a),a&&Cu.test(a)?a.replace(xi,"\\$&"):a}var yb=lu(function(a,l,v){return a+(v?"-":"")+l.toLowerCase()}),wb=lu(function(a,l,v){return a+(v?" ":"")+l.toLowerCase()}),Ab=uh("toLowerCase");function Eb(a,l,v){a=kt(a),l=_t(l);var w=l?ru(a):0;if(!l||w>=l)return a;var M=(l-w)/2;return Ua(Fa(M),v)+a+Ua(Ca(M),v)}function Cb(a,l,v){a=kt(a),l=_t(l);var w=l?ru(a):0;return l&&w<l?a+Ua(l-w,v):a}function Fb(a,l,v){a=kt(a),l=_t(l);var w=l?ru(a):0;return l&&w<l?Ua(l-w,v)+a:a}function Sb(a,l,v){return v||l==null?l=0:l&&(l=+l),Ig(kt(a).replace(Fr,""),l||0)}function Bb(a,l,v){return(v?Wr(a,l,v):l===r)?l=1:l=_t(l),Po(kt(a),l)}function Ob(){var a=arguments,l=kt(a[0]);return a.length<3?l:l.replace(a[1],a[2])}var Mb=lu(function(a,l,v){return a+(v?"_":"")+l.toLowerCase()});function Pb(a,l,v){return v&&typeof v!="number"&&Wr(a,l,v)&&(l=v=r),v=v===r?ge:v>>>0,v?(a=kt(a),a&&(typeof l=="string"||l!=null&&!el(l))&&(l=on(l),!l&&tu(a))?yi(Mn(a),0,v):a.split(l,v)):[]}var Tb=lu(function(a,l,v){return a+(v?" ":"")+nl(l)});function kb(a,l,v){return a=kt(a),v=v==null?0:zi(_t(v),0,a.length),l=on(l),a.slice(v,v+l.length)==l}function Ib(a,l,v){var w=k.templateSettings;v&&Wr(a,l,v)&&(l=r),a=kt(a),l=Xa({},l,w,hh);var M=Xa({},l.imports,w.imports,hh),x=yr(M),W=po(M,x),K,ue,ve=0,me=l.interpolate||hi,be="__p += '",ke=vo((l.escape||hi).source+"|"+me.source+"|"+(me===Zn?Bu:hi).source+"|"+(l.evaluate||hi).source+"|$","g"),We="//# sourceURL="+(Nt.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++z1+"]")+`
`;a.replace(ke,function(it,Et,Bt,fn,Hr,cn){return Bt||(Bt=fn),be+=a.slice(ve,cn).replace(xu,lg),Et&&(K=!0,be+=`' +
__e(`+Et+`) +
'`),Hr&&(ue=!0,be+=`';
`+Hr+`;
__p += '`),Bt&&(be+=`' +
((__t = (`+Bt+`)) == null ? '' : __t) +
'`),ve=cn+it.length,it}),be+=`';
`;var nt=Nt.call(l,"variable")&&l.variable;if(!nt)be=`with (obj) {
`+be+`
}
`;else if(Ni.test(nt))throw new ft(s);be=(ue?be.replace(Zt,""):be).replace(_r,"$1").replace(Xt,"$1;"),be="function("+(nt||"obj")+`) {
`+(nt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(K?", __e = _.escape":"")+(ue?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+be+`return __p
}`;var Dt=i0(function(){return Tt(x,We+"return "+be).apply(r,W)});if(Dt.source=be,Qo(Dt))throw Dt;return Dt}function xb(a){return kt(a).toLowerCase()}function Nb(a){return kt(a).toUpperCase()}function Rb(a,l,v){if(a=kt(a),a&&(v||l===r))return dc(a);if(!a||!(l=on(l)))return a;var w=Mn(a),M=Mn(l),x=pc(w,M),W=gc(w,M)+1;return yi(w,x,W).join("")}function Lb(a,l,v){if(a=kt(a),a&&(v||l===r))return a.slice(0,mc(a)+1);if(!a||!(l=on(l)))return a;var w=Mn(a),M=gc(w,Mn(l))+1;return yi(w,0,M).join("")}function Ub(a,l,v){if(a=kt(a),a&&(v||l===r))return a.replace(Fr,"");if(!a||!(l=on(l)))return a;var w=Mn(a),M=pc(w,Mn(l));return yi(w,M).join("")}function Vb(a,l){var v=G,w=re;if(Jt(l)){var M="separator"in l?l.separator:M;v="length"in l?_t(l.length):v,w="omission"in l?on(l.omission):w}a=kt(a);var x=a.length;if(tu(a)){var W=Mn(a);x=W.length}if(v>=x)return a;var K=v-ru(w);if(K<1)return w;var ue=W?yi(W,0,K).join(""):a.slice(0,K);if(M===r)return ue+w;if(W&&(K+=ue.length-K),el(M)){if(a.slice(K).search(M)){var ve,me=ue;for(M.global||(M=vo(M.source,kt(Xi.exec(M))+"g")),M.lastIndex=0;ve=M.exec(me);)var be=ve.index;ue=ue.slice(0,be===r?K:be)}}else if(a.indexOf(on(M),K)!=K){var ke=ue.lastIndexOf(M);ke>-1&&(ue=ue.slice(0,ke))}return ue+w}function jb(a){return a=kt(a),a&&hr.test(a)?a.replace(Dr,vg):a}var qb=lu(function(a,l,v){return a+(v?" ":"")+l.toUpperCase()}),nl=uh("toUpperCase");function n0(a,l,v){return a=kt(a),l=v?r:l,l===r?cg(a)?Dg(a):rg(a):a.match(l)||[]}var i0=bt(function(a,l){try{return an(a,r,l)}catch(v){return Qo(v)?v:new ft(v)}}),zb=ni(function(a,l){return mn(l,function(v){v=Wn(v),ti(a,v,Xo(a[v],a))}),a});function Wb(a){var l=a==null?0:a.length,v=Qe();return a=l?Kt(a,function(w){if(typeof w[1]!="function")throw new _n(o);return[v(w[0]),w[1]]}):[],bt(function(w){for(var M=-1;++M<l;){var x=a[M];if(an(x[0],this,w))return an(x[1],this,w)}})}function Hb(a){return vv(bn(a,h))}function il(a){return function(){return a}}function Gb(a,l){return a==null||a!==a?l:a}var $b=sh(),Kb=sh(!0);function Qr(a){return a}function ul(a){return Rc(typeof a=="function"?a:bn(a,h))}function Yb(a){return Uc(bn(a,h))}function Zb(a,l){return Vc(a,bn(l,h))}var Xb=bt(function(a,l){return function(v){return Ku(v,a,l)}}),Jb=bt(function(a,l){return function(v){return Ku(a,v,l)}});function al(a,l,v){var w=yr(l),M=Ta(l,w);v==null&&!(Jt(l)&&(M.length||!w.length))&&(v=l,l=a,a=this,M=Ta(l,yr(l)));var x=!(Jt(v)&&"chain"in v)||!!v.chain,W=ui(a);return mn(M,function(K){var ue=l[K];a[K]=ue,W&&(a.prototype[K]=function(){var ve=this.__chain__;if(x||ve){var me=a(this.__wrapped__),be=me.__actions__=Zr(this.__actions__);return be.push({func:ue,args:arguments,thisArg:a}),me.__chain__=ve,me}return ue.apply(a,gi([this.value()],arguments))})}),a}function Qb(){return Sr._===this&&(Sr._=Cg),this}function sl(){}function ey(a){return a=_t(a),bt(function(l){return jc(l,a)})}var ty=Lo(Kt),ry=Lo(oc),ny=Lo(oo);function u0(a){return Ho(a)?lo(Wn(a)):kv(a)}function iy(a){return function(l){return a==null?r:Wi(a,l)}}var uy=lh(),ay=lh(!0);function ol(){return[]}function ll(){return!1}function sy(){return{}}function oy(){return""}function ly(){return!0}function fy(a,l){if(a=_t(a),a<1||a>Z)return[];var v=ge,w=Lr(a,ge);l=Qe(l),a-=ge;for(var M=ho(w,l);++v<a;)l(v);return M}function cy(a){return ht(a)?Kt(a,Wn):ln(a)?[a]:Zr(Ch(kt(a)))}function hy(a){var l=++Ag;return kt(a)+l}var dy=La(function(a,l){return a+l},0),py=Uo("ceil"),gy=La(function(a,l){return a/l},1),vy=Uo("floor");function my(a){return a&&a.length?Pa(a,Qr,Eo):r}function _y(a,l){return a&&a.length?Pa(a,Qe(l,2),Eo):r}function Dy(a){return cc(a,Qr)}function by(a,l){return cc(a,Qe(l,2))}function yy(a){return a&&a.length?Pa(a,Qr,Bo):r}function wy(a,l){return a&&a.length?Pa(a,Qe(l,2),Bo):r}var Ay=La(function(a,l){return a*l},1),Ey=Uo("round"),Cy=La(function(a,l){return a-l},0);function Fy(a){return a&&a.length?co(a,Qr):0}function Sy(a,l){return a&&a.length?co(a,Qe(l,2)):0}return k.after=Y_,k.ary=Nh,k.assign=ND,k.assignIn=Zh,k.assignInWith=Xa,k.assignWith=RD,k.at=LD,k.before=Rh,k.bind=Xo,k.bindAll=zb,k.bindKey=Lh,k.castArray=sD,k.chain=kh,k.chunk=vm,k.compact=mm,k.concat=_m,k.cond=Wb,k.conforms=Hb,k.constant=il,k.countBy=F_,k.create=UD,k.curry=Uh,k.curryRight=Vh,k.debounce=jh,k.defaults=VD,k.defaultsDeep=jD,k.defer=Z_,k.delay=X_,k.difference=Dm,k.differenceBy=bm,k.differenceWith=ym,k.drop=wm,k.dropRight=Am,k.dropRightWhile=Em,k.dropWhile=Cm,k.fill=Fm,k.filter=B_,k.flatMap=P_,k.flatMapDeep=T_,k.flatMapDepth=k_,k.flatten=Oh,k.flattenDeep=Sm,k.flattenDepth=Bm,k.flip=J_,k.flow=$b,k.flowRight=Kb,k.fromPairs=Om,k.functions=KD,k.functionsIn=YD,k.groupBy=I_,k.initial=Pm,k.intersection=Tm,k.intersectionBy=km,k.intersectionWith=Im,k.invert=XD,k.invertBy=JD,k.invokeMap=N_,k.iteratee=ul,k.keyBy=R_,k.keys=yr,k.keysIn=Jr,k.map=Ha,k.mapKeys=eb,k.mapValues=tb,k.matches=Yb,k.matchesProperty=Zb,k.memoize=$a,k.merge=rb,k.mergeWith=Xh,k.method=Xb,k.methodOf=Jb,k.mixin=al,k.negate=Ka,k.nthArg=ey,k.omit=nb,k.omitBy=ib,k.once=Q_,k.orderBy=L_,k.over=ty,k.overArgs=eD,k.overEvery=ry,k.overSome=ny,k.partial=Jo,k.partialRight=qh,k.partition=U_,k.pick=ub,k.pickBy=Jh,k.property=u0,k.propertyOf=iy,k.pull=Lm,k.pullAll=Ph,k.pullAllBy=Um,k.pullAllWith=Vm,k.pullAt=jm,k.range=uy,k.rangeRight=ay,k.rearg=tD,k.reject=q_,k.remove=qm,k.rest=rD,k.reverse=Yo,k.sampleSize=W_,k.set=sb,k.setWith=ob,k.shuffle=H_,k.slice=zm,k.sortBy=K_,k.sortedUniq=Zm,k.sortedUniqBy=Xm,k.split=Pb,k.spread=nD,k.tail=Jm,k.take=Qm,k.takeRight=e_,k.takeRightWhile=t_,k.takeWhile=r_,k.tap=m_,k.throttle=iD,k.thru=Wa,k.toArray=$h,k.toPairs=Qh,k.toPairsIn=e0,k.toPath=cy,k.toPlainObject=Yh,k.transform=lb,k.unary=uD,k.union=n_,k.unionBy=i_,k.unionWith=u_,k.uniq=a_,k.uniqBy=s_,k.uniqWith=o_,k.unset=fb,k.unzip=Zo,k.unzipWith=Th,k.update=cb,k.updateWith=hb,k.values=hu,k.valuesIn=db,k.without=l_,k.words=n0,k.wrap=aD,k.xor=f_,k.xorBy=c_,k.xorWith=h_,k.zip=d_,k.zipObject=p_,k.zipObjectDeep=g_,k.zipWith=v_,k.entries=Qh,k.entriesIn=e0,k.extend=Zh,k.extendWith=Xa,al(k,k),k.add=dy,k.attempt=i0,k.camelCase=mb,k.capitalize=t0,k.ceil=py,k.clamp=pb,k.clone=oD,k.cloneDeep=fD,k.cloneDeepWith=cD,k.cloneWith=lD,k.conformsTo=hD,k.deburr=r0,k.defaultTo=Gb,k.divide=gy,k.endsWith=_b,k.eq=Tn,k.escape=Db,k.escapeRegExp=bb,k.every=S_,k.find=O_,k.findIndex=Sh,k.findKey=qD,k.findLast=M_,k.findLastIndex=Bh,k.findLastKey=zD,k.floor=vy,k.forEach=Ih,k.forEachRight=xh,k.forIn=WD,k.forInRight=HD,k.forOwn=GD,k.forOwnRight=$D,k.get=tl,k.gt=dD,k.gte=pD,k.has=ZD,k.hasIn=rl,k.head=Mh,k.identity=Qr,k.includes=x_,k.indexOf=Mm,k.inRange=gb,k.invoke=QD,k.isArguments=$i,k.isArray=ht,k.isArrayBuffer=gD,k.isArrayLike=Xr,k.isArrayLikeObject=lr,k.isBoolean=vD,k.isBuffer=wi,k.isDate=mD,k.isElement=_D,k.isEmpty=DD,k.isEqual=bD,k.isEqualWith=yD,k.isError=Qo,k.isFinite=wD,k.isFunction=ui,k.isInteger=zh,k.isLength=Ya,k.isMap=Wh,k.isMatch=AD,k.isMatchWith=ED,k.isNaN=CD,k.isNative=FD,k.isNil=BD,k.isNull=SD,k.isNumber=Hh,k.isObject=Jt,k.isObjectLike=ir,k.isPlainObject=ea,k.isRegExp=el,k.isSafeInteger=OD,k.isSet=Gh,k.isString=Za,k.isSymbol=ln,k.isTypedArray=cu,k.isUndefined=MD,k.isWeakMap=PD,k.isWeakSet=TD,k.join=xm,k.kebabCase=yb,k.last=wn,k.lastIndexOf=Nm,k.lowerCase=wb,k.lowerFirst=Ab,k.lt=kD,k.lte=ID,k.max=my,k.maxBy=_y,k.mean=Dy,k.meanBy=by,k.min=yy,k.minBy=wy,k.stubArray=ol,k.stubFalse=ll,k.stubObject=sy,k.stubString=oy,k.stubTrue=ly,k.multiply=Ay,k.nth=Rm,k.noConflict=Qb,k.noop=sl,k.now=Ga,k.pad=Eb,k.padEnd=Cb,k.padStart=Fb,k.parseInt=Sb,k.random=vb,k.reduce=V_,k.reduceRight=j_,k.repeat=Bb,k.replace=Ob,k.result=ab,k.round=Ey,k.runInContext=ie,k.sample=z_,k.size=G_,k.snakeCase=Mb,k.some=$_,k.sortedIndex=Wm,k.sortedIndexBy=Hm,k.sortedIndexOf=Gm,k.sortedLastIndex=$m,k.sortedLastIndexBy=Km,k.sortedLastIndexOf=Ym,k.startCase=Tb,k.startsWith=kb,k.subtract=Cy,k.sum=Fy,k.sumBy=Sy,k.template=Ib,k.times=fy,k.toFinite=ai,k.toInteger=_t,k.toLength=Kh,k.toLower=xb,k.toNumber=An,k.toSafeInteger=xD,k.toString=kt,k.toUpper=Nb,k.trim=Rb,k.trimEnd=Lb,k.trimStart=Ub,k.truncate=Vb,k.unescape=jb,k.uniqueId=hy,k.upperCase=qb,k.upperFirst=nl,k.each=Ih,k.eachRight=xh,k.first=Mh,al(k,function(){var a={};return qn(k,function(l,v){Nt.call(k.prototype,v)||(a[v]=l)}),a}(),{chain:!1}),k.VERSION=n,mn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){k[a].placeholder=k}),mn(["drop","take"],function(a,l){Ft.prototype[a]=function(v){v=v===r?1:vr(_t(v),0);var w=this.__filtered__&&!l?new Ft(this):this.clone();return w.__filtered__?w.__takeCount__=Lr(v,w.__takeCount__):w.__views__.push({size:Lr(v,ge),type:a+(w.__dir__<0?"Right":"")}),w},Ft.prototype[a+"Right"]=function(v){return this.reverse()[a](v).reverse()}}),mn(["filter","map","takeWhile"],function(a,l){var v=l+1,w=v==V||v==q;Ft.prototype[a]=function(M){var x=this.clone();return x.__iteratees__.push({iteratee:Qe(M,3),type:v}),x.__filtered__=x.__filtered__||w,x}}),mn(["head","last"],function(a,l){var v="take"+(l?"Right":"");Ft.prototype[a]=function(){return this[v](1).value()[0]}}),mn(["initial","tail"],function(a,l){var v="drop"+(l?"":"Right");Ft.prototype[a]=function(){return this.__filtered__?new Ft(this):this[v](1)}}),Ft.prototype.compact=function(){return this.filter(Qr)},Ft.prototype.find=function(a){return this.filter(a).head()},Ft.prototype.findLast=function(a){return this.reverse().find(a)},Ft.prototype.invokeMap=bt(function(a,l){return typeof a=="function"?new Ft(this):this.map(function(v){return Ku(v,a,l)})}),Ft.prototype.reject=function(a){return this.filter(Ka(Qe(a)))},Ft.prototype.slice=function(a,l){a=_t(a);var v=this;return v.__filtered__&&(a>0||l<0)?new Ft(v):(a<0?v=v.takeRight(-a):a&&(v=v.drop(a)),l!==r&&(l=_t(l),v=l<0?v.dropRight(-l):v.take(l-a)),v)},Ft.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Ft.prototype.toArray=function(){return this.take(ge)},qn(Ft.prototype,function(a,l){var v=/^(?:filter|find|map|reject)|While$/.test(l),w=/^(?:head|last)$/.test(l),M=k[w?"take"+(l=="last"?"Right":""):l],x=w||/^find/.test(l);M&&(k.prototype[l]=function(){var W=this.__wrapped__,K=w?[1]:arguments,ue=W instanceof Ft,ve=K[0],me=ue||ht(W),be=function(Et){var Bt=M.apply(k,gi([Et],K));return w&&ke?Bt[0]:Bt};me&&v&&typeof ve=="function"&&ve.length!=1&&(ue=me=!1);var ke=this.__chain__,We=!!this.__actions__.length,nt=x&&!ke,Dt=ue&&!We;if(!x&&me){W=Dt?W:new Ft(this);var it=a.apply(W,K);return it.__actions__.push({func:Wa,args:[be],thisArg:r}),new Dn(it,ke)}return nt&&Dt?a.apply(this,K):(it=this.thru(be),nt?w?it.value()[0]:it.value():it)})}),mn(["pop","push","shift","sort","splice","unshift"],function(a){var l=va[a],v=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",w=/^(?:pop|shift)$/.test(a);k.prototype[a]=function(){var M=arguments;if(w&&!this.__chain__){var x=this.value();return l.apply(ht(x)?x:[],M)}return this[v](function(W){return l.apply(ht(W)?W:[],M)})}}),qn(Ft.prototype,function(a,l){var v=k[l];if(v){var w=v.name+"";Nt.call(au,w)||(au[w]=[]),au[w].push({name:l,func:v})}}),au[Ra(r,D).name]=[{name:"wrapper",func:r}],Ft.prototype.clone=jg,Ft.prototype.reverse=qg,Ft.prototype.value=zg,k.prototype.at=__,k.prototype.chain=D_,k.prototype.commit=b_,k.prototype.next=y_,k.prototype.plant=A_,k.prototype.reverse=E_,k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=C_,k.prototype.first=k.prototype.head,ju&&(k.prototype[ju]=w_),k},nu=bg();Ui?((Ui.exports=nu)._=nu,io._=nu):Sr._=nu}).call(dr)})(YS,Is);const ZS=Is,ql="panelModeStore";function XS(){const t=Yr("select"),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[ql]||""),{subscribe:e,update:u=>{!u||!i||(localStorage[ql]=u,r(u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[ql],r("select"))}}}const $n=XS(),JS=Kr($n,t=>Ct($n));function xd(t,e,r){const n=t.slice();return n[7]=e[r][0],n[8]=e[r][1],n}function Nd(t,e,r){const n=t.slice();return n[11]=e[r][0],n[12]=e[r][1],n}function Rd(t){let e=t[12].text+"",r,n,i,u;return{c(){r=Ve(e),n=Q("b"),i=Ve("::"),u=xe()},l(o){r=je(o,e),n=ee(o,"B",{});var s=$(n);i=je(s,"::"),s.forEach(I),u=Ne(o)},m(o,s){_e(o,r,s),_e(o,n,s),R(n,i),_e(o,u,s)},p(o,s){s&1&&e!==(e=o[12].text+"")&&rn(r,e)},d(o){o&&I(r),o&&I(n),o&&I(u)}}}function Ld(t,e){let r,n,i,u,o,s=Object.entries(e[8].weightedPrompts),c=[];for(let f=0;f<s.length;f+=1)c[f]=Rd(Nd(e,s,f));function p(){return e[5](e[7],e[8])}return{key:t,first:null,c(){r=Q("li"),n=Q("a");for(let f=0;f<c.length;f+=1)c[f].c();i=xe(),this.h()},l(f){r=ee(f,"LI",{});var h=$(r);n=ee(h,"A",{class:!0});var d=$(n);for(let g=0;g<c.length;g+=1)c[g].l(d);d.forEach(I),i=Ne(h),h.forEach(I),this.h()},h(){O(n,"class","text-xs inline-block"),Pt(n,"active",e[1]===e[7]),this.first=r},m(f,h){_e(f,r,h),R(r,n);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(n,null);R(r,i),u||(o=Fe(n,"click",p),u=!0)},p(f,h){if(e=f,h&5){s=Object.entries(e[8].weightedPrompts);let d;for(d=0;d<s.length;d+=1){const g=Nd(e,s,d);c[d]?c[d].p(g,h):(c[d]=Rd(g),c[d].c(),c[d].m(n,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=s.length}h&7&&Pt(n,"active",e[1]===e[7])},d(f){f&&I(r),Ls(c,f),u=!1,o()}}}function QS(t){let e,r,n,i,u,o=[],s=new Map,c,p,f=t[2](t[0],Ud,"desc");const h=d=>d[7];for(let d=0;d<f.length;d+=1){let g=xd(t,f,d),b=h(g);s.set(b,o[d]=Ld(b,g))}return{c(){e=Q("ul"),r=Q("li"),n=Q("a"),i=Ve("New +"),u=xe();for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=ee(d,"UL",{class:!0});var g=$(e);r=ee(g,"LI",{});var b=$(r);n=ee(b,"A",{class:!0});var m=$(n);i=je(m,"New +"),m.forEach(I),b.forEach(I),u=Ne(g);for(let _=0;_<o.length;_+=1)o[_].l(g);g.forEach(I),this.h()},h(){O(n,"class","text-xs inline-block"),O(e,"class","menu h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(d,g){_e(d,e,g),R(e,r),R(r,n),R(n,i),R(e,u);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(e,null);c||(p=Fe(n,"click",t[3]),c=!0)},p(d,[g]){g&23&&(f=d[2](d[0],Ud,"desc"),o=Kn(o,g,h,1,d,f,s,e,Ti,Ld,null,xd))},i:Me,o:Me,d(d){d&&I(e);for(let g=0;g<o.length;g+=1)o[g].d();c=!1,p()}}}const Ud=t=>t[1].date;function e5(t,e,r){let n,i,u;ct(t,Cr,f=>r(6,n=f)),ct(t,Ry,f=>r(0,i=f)),ct(t,pp,f=>r(1,u=f));const{orderBy:o}=ZS;function s(){Ki.delete(),Mt.update(Ci({},n.weightMode)),$n.update("edit")}function c(f,h){Ki.update(f),Mt.update({...h}),$n.update("edit")}return[i,u,o,s,c,(f,h)=>c(f,h)]}class t5 extends yt{constructor(e){super(),wt(this,e,e5,QS,At,{})}}let is;const r5=new Uint8Array(16);function n5(){if(!is&&(is=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!is))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return is(r5)}const Mr=[];for(let t=0;t<256;++t)Mr.push((t+256).toString(16).slice(1));function i5(t,e=0){return(Mr[t[e+0]]+Mr[t[e+1]]+Mr[t[e+2]]+Mr[t[e+3]]+"-"+Mr[t[e+4]]+Mr[t[e+5]]+"-"+Mr[t[e+6]]+Mr[t[e+7]]+"-"+Mr[t[e+8]]+Mr[t[e+9]]+"-"+Mr[t[e+10]]+Mr[t[e+11]]+Mr[t[e+12]]+Mr[t[e+13]]+Mr[t[e+14]]+Mr[t[e+15]]).toLowerCase()}const u5=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Vd={randomUUID:u5};function $f(t,e,r){if(Vd.randomUUID&&!e&&!t)return Vd.randomUUID();t=t||{};const n=t.random||(t.rng||n5)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return i5(n)}function a5(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var F1=a5,s5=typeof dr=="object"&&dr&&dr.Object===Object&&dr,o5=s5,l5=o5,f5=typeof self=="object"&&self&&self.Object===Object&&self,c5=l5||f5||Function("return this")(),S1=c5,h5=S1,d5=function(){return h5.Date.now()},p5=d5,g5=/\s/;function v5(t){for(var e=t.length;e--&&g5.test(t.charAt(e)););return e}var m5=v5,_5=m5,D5=/^\s+/;function b5(t){return t&&t.slice(0,_5(t)+1).replace(D5,"")}var y5=b5,w5=S1,A5=w5.Symbol,B1=A5,jd=B1,O1=Object.prototype,E5=O1.hasOwnProperty,C5=O1.toString,ta=jd?jd.toStringTag:void 0;function F5(t){var e=E5.call(t,ta),r=t[ta];try{t[ta]=void 0;var n=!0}catch{}var i=C5.call(t);return n&&(e?t[ta]=r:delete t[ta]),i}var S5=F5,B5=Object.prototype,O5=B5.toString;function M5(t){return O5.call(t)}var P5=M5,qd=B1,T5=S5,k5=P5,I5="[object Null]",x5="[object Undefined]",zd=qd?qd.toStringTag:void 0;function N5(t){return t==null?t===void 0?x5:I5:zd&&zd in Object(t)?T5(t):k5(t)}var R5=N5;function L5(t){return t!=null&&typeof t=="object"}var U5=L5,V5=R5,j5=U5,q5="[object Symbol]";function z5(t){return typeof t=="symbol"||j5(t)&&V5(t)==q5}var W5=z5,H5=y5,Wd=F1,G5=W5,Hd=0/0,$5=/^[-+]0x[0-9a-f]+$/i,K5=/^0b[01]+$/i,Y5=/^0o[0-7]+$/i,Z5=parseInt;function X5(t){if(typeof t=="number")return t;if(G5(t))return Hd;if(Wd(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Wd(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=H5(t);var r=K5.test(t);return r||Y5.test(t)?Z5(t.slice(2),r?2:8):$5.test(t)?Hd:+t}var J5=X5,Q5=F1,zl=p5,Gd=J5,e8="Expected a function",t8=Math.max,r8=Math.min;function n8(t,e,r){var n,i,u,o,s,c,p=0,f=!1,h=!1,d=!0;if(typeof t!="function")throw new TypeError(e8);e=Gd(e)||0,Q5(r)&&(f=!!r.leading,h="maxWait"in r,u=h?t8(Gd(r.maxWait)||0,e):u,d="trailing"in r?!!r.trailing:d);function g(B){var P=n,T=i;return n=i=void 0,p=B,o=t.apply(T,P),o}function b(B){return p=B,s=setTimeout(D,e),f?g(B):o}function m(B){var P=B-c,T=B-p,N=e-P;return h?r8(N,u-T):N}function _(B){var P=B-c,T=B-p;return c===void 0||P>=e||P<0||h&&T>=u}function D(){var B=zl();if(_(B))return C(B);s=setTimeout(D,m(B))}function C(B){return s=void 0,d&&n?g(B):(n=i=void 0,o)}function A(){s!==void 0&&clearTimeout(s),p=0,n=c=i=s=void 0}function S(){return s===void 0?o:C(zl())}function E(){var B=zl(),P=_(B);if(n=arguments,i=this,c=B,P){if(s===void 0)return b(c);if(h)return clearTimeout(s),s=setTimeout(D,e),g(c)}return s===void 0&&(s=setTimeout(D,e)),o}return E.cancel=A,E.flush=S,E}var xs=n8;function $d(t,e,r){const n=t.slice();return n[14]=e[r].id,n[15]=e[r].text,n}function Kd(t,e){let r,n,i,u,o;function s(...c){return e[9](e[14],...c)}return{key:t,first:null,c(){r=Q("li"),n=Q("input"),this.h()},l(c){r=ee(c,"LI",{class:!0});var p=$(r);n=ee(p,"INPUT",{type:!0,placeholder:!0,class:!0}),p.forEach(I),this.h()},h(){n.value=i=e[15],O(n,"type","text"),O(n,"placeholder",""),O(n,"class","input input-bordered input-sm w-full"),O(r,"class","p-1"),this.first=r},m(c,p){_e(c,r,p),R(r,n),u||(o=Fe(n,"input",s),u=!0)},p(c,p){e=c,p&2&&i!==(i=e[15])&&n.value!==i&&(n.value=i)},d(c){c&&I(r),u=!1,o()}}}function i8(t){let e,r,n,i,u,o,s,c,p,f,h,d=[],g=new Map,b,m,_,D,C,A=t[1];const S=E=>E[14];for(let E=0;E<A.length;E+=1){let B=$d(t,A,E),P=S(B);g.set(P,d[E]=Kd(P,B))}return{c(){e=Q("div"),r=Q("button"),n=Ve("Paste"),i=xe(),u=Q("button"),o=Ve("Save"),s=xe(),c=Q("button"),p=Ve("Delete"),f=xe(),h=Q("ul");for(let E=0;E<d.length;E+=1)d[E].c();b=xe(),m=Q("li"),_=Q("input"),this.h()},l(E){e=ee(E,"DIV",{class:!0});var B=$(e);r=ee(B,"BUTTON",{class:!0});var P=$(r);n=je(P,"Paste"),P.forEach(I),i=Ne(B),u=ee(B,"BUTTON",{class:!0});var T=$(u);o=je(T,"Save"),T.forEach(I),s=Ne(B),c=ee(B,"BUTTON",{class:!0});var N=$(c);p=je(N,"Delete"),N.forEach(I),B.forEach(I),f=Ne(E),h=ee(E,"UL",{class:!0});var G=$(h);for(let z=0;z<d.length;z+=1)d[z].l(G);b=Ne(G),m=ee(G,"LI",{class:!0});var re=$(m);_=ee(re,"INPUT",{type:!0,placeholder:!0,class:!0}),re.forEach(I),G.forEach(I),this.h()},h(){O(r,"class","btn btn-sm btn-info mx-2"),O(u,"class","btn btn-sm btn-success mx-2"),O(c,"class","btn btn-sm btn-error mx-2"),O(e,"class","flex px-8 py-2 justify-center bg-base-100"),O(_,"type","text"),O(_,"placeholder","Add prompt"),O(_,"class","input input-bordered input-sm w-full italic"),O(m,"class","p-1"),O(h,"class","h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(E,B){_e(E,e,B),R(e,r),R(r,n),R(e,i),R(e,u),R(u,o),R(e,s),R(e,c),R(c,p),_e(E,f,B),_e(E,h,B);for(let P=0;P<d.length;P+=1)d[P]&&d[P].m(h,null);R(h,b),R(h,m),R(m,_),tn(_,t[0]),D||(C=[Fe(r,"click",t[3]),Fe(u,"click",t[2]),Fe(c,"click",t[4]),Fe(_,"input",t[10]),Fe(_,"input",t[11])],D=!0)},p(E,[B]){B&34&&(A=E[1],d=Kn(d,B,S,1,E,A,g,h,Ti,Kd,b,$d)),B&1&&_.value!==E[0]&&tn(_,E[0])},i:Me,o:Me,d(E){E&&I(e),E&&I(f),E&&I(h);for(let B=0;B<d.length;B+=1)d[B].d();D=!1,ar(C)}}}function u8(t,e,r){let n,i,u;ct(t,Cr,D=>r(8,i=D)),ct(t,pp,D=>r(12,u=D));let o="",s=Object.keys(i.weightedPrompts).length;function c(){na.update($f(),{...i,date:Date.now()}),$n.update("select")}function p(){navigator.clipboard.readText().then(D=>{const C=vf(D);f(C)})}function f(D){const C=Math.max(...D.map(([S,E])=>E)),A=D.reduce((S,[E,B],P)=>(S[P]=Pr(P,E,B,B/C),S),{});Ki.delete(),Mt.update(Ci(A,i.weightMode)),r(0,o="")}function h(){u&&na.delete(u),Ki.delete(),Mt.delete(),$n.update("select")}const d=xs((D,C)=>{let A={...i.weightedPrompts};if(!C){const B=Object.entries(i.weightedPrompts).filter(([P])=>P!==D).map(([P,T])=>[T.text,T.parsedWeight]);return f(B)}const S={...A[D],text:C};A[D]=S,Mt.update({...i,weightedPrompts:A})},1e3),g=xs(D=>{const C=Object.entries(i.weightedPrompts).map(([A,S])=>[S.text,S.parsedWeight]);return C.push([D,1]),f(C)},1e3),b=(D,C)=>d(D,C.target.value);function m(){o=this.value,r(0,o),r(8,i),r(7,s)}const _=D=>g(D.target.value);return t.$$.update=()=>{if(t.$$.dirty&384){const D=Object.keys(i.weightedPrompts).length;D>s&&(r(7,s=D),r(0,o=""))}t.$$.dirty&256&&r(1,n=Object.entries(i.weightedPrompts).map(([D,C])=>({id:D,text:C.text})))},[o,n,c,p,h,d,g,s,i,b,m,_]}class a8 extends yt{constructor(e){super(),wt(this,e,u8,i8,At,{})}}const s8=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. The first sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. The middle three sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. The final sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,o8=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 10 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. Four sentences should describe the subject.
    d. Four sentences should describe the scene.
    e. Tow sentences should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,l8=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 10 concepts.
    a. Each concept should be 10 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
`,f8=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 20 concepts.
    a. Each concept should be 5 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
3. Do not use hyphens to mark list items.
4. Do not title the list.
`,c8=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. One sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. Two sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. One sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
    f. One sentence should be a poetic concept or feeling. Example: The unfathomable depths of a lover's sigh.
        i. The poetic concept should be intense.
        ii. The poetic concept should be emotional.
        iii. The poetic concept should include abstract words.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`;function h8(){const t=Yr({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((u,o)=>{if(o.startsWith("directive")){const s=o.split("_")[1];u[s]=JSON.parse(localStorage[o])}return u},{})||{}),{subscribe:e,update:(u,o)=>{const s=Ct(t),p={...s[u]||{},...o};i&&(localStorage[`directive_${u}`]=JSON.stringify(p));const f={...s,[u]:p};r(f)},get:u=>Ct(t)[u],delete:u=>{i&&delete localStorage[`directive_${u}`];const o={...Ct(t)};delete o[u],r(o)}}}const Ns=h8(),d8=Kr(Ns,t=>Object.entries(Ct(Ns))),Wl="preferredModelStore";function p8(){const t=Yr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Wl]||""),{subscribe:e,update:u=>{!u||!i||(localStorage[Wl]=u,r(u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[Wl],r(""))}}}const Df=p8(),M1=Kr(Df,t=>Ct(Df)),Hl="preferredDirectiveStore";function g8(){const t=Yr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Hl]||""),{subscribe:e,update:u=>{!u||!i||(localStorage[Hl]=u,r(u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[Hl],r(""))}}}const Rs=g8(),v8=Kr(Rs,t=>Ct(Rs)),Gl="metaPromptStore";function m8(){const t=Yr(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Gl]||""),{subscribe:e,update:u=>{!u||!i||(localStorage[Gl]=u,r(u))},get:()=>Ct(t),delete:()=>{i&&(delete localStorage[Gl],r(""))}}}const bf=m8(),_8=Kr(bf,t=>Ct(bf));function Yd(t,e,r){const n=t.slice();return n[30]=e[r][0],n[31]=e[r][1],n}function D8(t){let e,r,n;return{c(){e=Q("div"),r=Q("p"),n=Ve("Set Open AI Key in settings for GPT generation."),this.h()},l(i){e=ee(i,"DIV",{class:!0});var u=$(e);r=ee(u,"P",{class:!0});var o=$(r);n=je(o,"Set Open AI Key in settings for GPT generation."),o.forEach(I),u.forEach(I),this.h()},h(){O(r,"class","text-center"),O(e,"class","w-full p-2 flex justify-center")},m(i,u){_e(i,e,u),R(e,r),R(r,n)},p:Me,d(i){i&&I(e)}}}function b8(t){let e,r,n,i,u,o,s,c,p,f,h=[],d=new Map,g,b,m,_,D,C,A,S=Object.entries(t[1]);const E=P=>P[30];for(let P=0;P<S.length;P+=1){let T=Yd(t,S,P),N=E(T);d.set(N,h[P]=Zd(N,T))}let B=t[0]&&Xd(t);return{c(){e=Q("div"),r=Q("div"),n=Q("label"),i=Q("span"),u=Ve("Pick a directive for prompt creation"),o=xe(),s=Q("select"),c=Q("option"),p=Ve("Pick one");for(let P=0;P<h.length;P+=1)h[P].c();g=Q("option"),b=Ve("New"),_=xe(),B&&B.c(),D=It(),this.h()},l(P){e=ee(P,"DIV",{class:!0});var T=$(e);r=ee(T,"DIV",{class:!0});var N=$(r);n=ee(N,"LABEL",{class:!0});var G=$(n);i=ee(G,"SPAN",{class:!0});var re=$(i);u=je(re,"Pick a directive for prompt creation"),re.forEach(I),G.forEach(I),o=Ne(N),s=ee(N,"SELECT",{class:!0});var z=$(s);c=ee(z,"OPTION",{});var Y=$(c);p=je(Y,"Pick one"),Y.forEach(I);for(let U=0;U<h.length;U+=1)h[U].l(z);g=ee(z,"OPTION",{});var V=$(g);b=je(V,"New"),V.forEach(I),z.forEach(I),N.forEach(I),T.forEach(I),_=Ne(P),B&&B.l(P),D=It(),this.h()},h(){O(i,"class","label-text"),O(n,"class","label"),c.disabled=!0,c.selected=f=t[0]===null,c.__value="Pick one",c.value=c.__value,g.__value="new",g.value=g.__value,g.selected=m=t[0]==="new",O(s,"class","select select-bordered"),O(r,"class","form-control w-full max-w-xs mb-4"),O(e,"class","flex justify-center")},m(P,T){_e(P,e,T),R(e,r),R(r,n),R(n,i),R(i,u),R(r,o),R(r,s),R(s,c),R(c,p);for(let N=0;N<h.length;N+=1)h[N]&&h[N].m(s,null);R(s,g),R(g,b),Oi(s,t[0]),_e(P,_,T),B&&B.m(P,T),_e(P,D,T),C||(A=Fe(s,"change",t[11]),C=!0)},p(P,T){T[0]&3&&f!==(f=P[0]===null)&&(c.selected=f),T[0]&3&&(S=Object.entries(P[1]),h=Kn(h,T,E,1,P,S,d,s,Ti,Zd,g,Yd)),T[0]&3&&m!==(m=P[0]==="new")&&(g.selected=m),T[0]&3&&Oi(s,P[0]),P[0]?B?B.p(P,T):(B=Xd(P),B.c(),B.m(D.parentNode,D)):B&&(B.d(1),B=null)},d(P){P&&I(e);for(let T=0;T<h.length;T+=1)h[T].d();P&&I(_),B&&B.d(P),P&&I(D),C=!1,A()}}}function Zd(t,e){let r,n=e[31].name+"",i,u=e[31].builtIn?" (Built-In)":" (User)",o,s,c;return{key:t,first:null,c(){r=Q("option"),i=Ve(n),o=Ve(u),this.h()},l(p){r=ee(p,"OPTION",{});var f=$(r);i=je(f,n),o=je(f,u),f.forEach(I),this.h()},h(){r.__value=s=e[30],r.value=r.__value,r.selected=c=e[0]===e[30],this.first=r},m(p,f){_e(p,r,f),R(r,i),R(r,o)},p(p,f){e=p,f[0]&2&&n!==(n=e[31].name+"")&&rn(i,n),f[0]&2&&u!==(u=e[31].builtIn?" (Built-In)":" (User)")&&rn(o,u),f[0]&2&&s!==(s=e[30])&&(r.__value=s,r.value=r.__value),f[0]&3&&c!==(c=e[0]===e[30])&&(r.selected=c)},d(p){p&&I(r)}}}function Xd(t){let e,r,n,i,u,o,s,c,p,f,h=!t[6]&&Jd(t);function d(m,_){return m[5]?w8:y8}let g=d(t),b=g(t);return{c(){h&&h.c(),e=xe(),r=Q("div"),n=Q("textarea"),i=xe(),u=Q("div"),o=Q("textarea"),s=xe(),b.c(),c=It(),this.h()},l(m){h&&h.l(m),e=Ne(m),r=ee(m,"DIV",{class:!0});var _=$(r);n=ee(_,"TEXTAREA",{class:!0,placeholder:!0}),$(n).forEach(I),_.forEach(I),i=Ne(m),u=ee(m,"DIV",{class:!0});var D=$(u);o=ee(D,"TEXTAREA",{class:!0,placeholder:!0}),$(o).forEach(I),D.forEach(I),s=Ne(m),b.l(m),c=It(),this.h()},h(){O(n,"class","textarea textarea-bordered w-full h-full"),O(n,"placeholder","GPT Directives"),O(r,"class","w-full p-2 h-1/2"),o.value=t[7],O(o,"class","textarea textarea-bordered w-full h-full"),O(o,"placeholder","Describe the prompt to generate."),O(u,"class","w-full p-2 h-1/5")},m(m,_){h&&h.m(m,_),_e(m,e,_),_e(m,r,_),R(r,n),tn(n,t[4]),_e(m,i,_),_e(m,u,_),R(u,o),_e(m,s,_),b.m(m,_),_e(m,c,_),p||(f=[Fe(n,"input",t[17]),Fe(o,"input",t[18])],p=!0)},p(m,_){m[6]?h&&(h.d(1),h=null):h?h.p(m,_):(h=Jd(m),h.c(),h.m(e.parentNode,e)),_[0]&16&&tn(n,m[4]),_[0]&128&&(o.value=m[7]),g===(g=d(m))&&b?b.p(m,_):(b.d(1),b=g(m),b&&(b.c(),b.m(c.parentNode,c)))},d(m){h&&h.d(m),m&&I(e),m&&I(r),m&&I(i),m&&I(u),m&&I(s),b.d(m),m&&I(c),p=!1,ar(f)}}}function Jd(t){let e,r,n,i,u,o,s;return{c(){e=Q("div"),r=Q("input"),n=xe(),i=Q("button"),u=Ve("Save"),this.h()},l(c){e=ee(c,"DIV",{class:!0});var p=$(e);r=ee(p,"INPUT",{type:!0,placeholder:!0,class:!0}),n=Ne(p),i=ee(p,"BUTTON",{class:!0});var f=$(i);u=je(f,"Save"),f.forEach(I),p.forEach(I),this.h()},h(){O(r,"type","text"),O(r,"placeholder","Name"),O(r,"class","input input-bordered input-sm w-full max-w-xs"),O(i,"class","btn btn-sm btn-primary ml-4"),O(e,"class","w-full p-2 h-12 flex justify-between")},m(c,p){_e(c,e,p),R(e,r),tn(r,t[3]),R(e,n),R(e,i),R(i,u),o||(s=[Fe(r,"input",t[16]),Fe(i,"click",t[9])],o=!0)},p(c,p){p[0]&8&&r.value!==c[3]&&tn(r,c[3])},d(c){c&&I(e),o=!1,ar(s)}}}function y8(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!1,pending:C8,then:E8,catch:A8,value:29};return Bi(r=t[2],n),{c(){e=Q("div"),n.block.c(),this.h()},l(i){e=ee(i,"DIV",{class:!0});var u=$(e);n.block.l(u),u.forEach(I),this.h()},h(){O(e,"class","w-full p-2 h-12 flex justify-end")},m(i,u){_e(i,e,u),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(i,u){t=i,n.ctx=t,u[0]&4&&r!==(r=t[2])&&Bi(r,n)||Us(n,t,u)},d(i){i&&I(e),n.block.d(),n.token=null,n=null}}}function w8(t){let e,r,n,i,u,o,s,c={ctx:t,current:null,token:null,hasCatch:!1,pending:B8,then:S8,catch:F8,value:29};return Bi(u=t[2],c),{c(){e=Q("div"),r=Q("button"),n=Ve("Delete"),i=xe(),c.block.c(),this.h()},l(p){e=ee(p,"DIV",{class:!0});var f=$(e);r=ee(f,"BUTTON",{class:!0});var h=$(r);n=je(h,"Delete"),h.forEach(I),i=Ne(f),c.block.l(f),f.forEach(I),this.h()},h(){O(r,"class","btn btn-sm btn-error ml-4"),O(e,"class","w-full p-2 h-12 flex justify-between")},m(p,f){_e(p,e,f),R(e,r),R(r,n),R(e,i),c.block.m(e,c.anchor=null),c.mount=()=>e,c.anchor=null,o||(s=Fe(r,"click",t[10]),o=!0)},p(p,f){t=p,c.ctx=t,f[0]&4&&u!==(u=t[2])&&Bi(u,c)||Us(c,t,f)},d(p){p&&I(e),c.block.d(),c.token=null,c=null,o=!1,s()}}}function A8(t){return{c:Me,l:Me,m:Me,p:Me,d:Me}}function E8(t){let e,r,n,i;return{c(){e=Q("button"),r=Ve("Generate"),this.h()},l(u){e=ee(u,"BUTTON",{class:!0});var o=$(e);r=je(o,"Generate"),o.forEach(I),this.h()},h(){O(e,"class","btn btn-sm btn-primary ml-4")},m(u,o){_e(u,e,o),R(e,r),n||(i=Fe(e,"click",t[12]),n=!0)},p:Me,d(u){u&&I(e),n=!1,i()}}}function C8(t){let e,r,n,i;return{c(){e=Q("button"),r=Ve("Generating"),this.h()},l(u){e=ee(u,"BUTTON",{class:!0});var o=$(e);r=je(o,"Generating"),o.forEach(I),this.h()},h(){O(e,"class","btn btn-sm btn ml-4 disabled")},m(u,o){_e(u,e,o),R(e,r),n||(i=Fe(e,"click",t[12]),n=!0)},p:Me,d(u){u&&I(e),n=!1,i()}}}function F8(t){return{c:Me,l:Me,m:Me,p:Me,d:Me}}function S8(t){let e,r,n,i;return{c(){e=Q("button"),r=Ve("Generate"),this.h()},l(u){e=ee(u,"BUTTON",{class:!0});var o=$(e);r=je(o,"Generate"),o.forEach(I),this.h()},h(){O(e,"class","btn btn-sm btn-primary ml-4")},m(u,o){_e(u,e,o),R(e,r),n||(i=Fe(e,"click",t[12]),n=!0)},p:Me,d(u){u&&I(e),n=!1,i()}}}function B8(t){let e,r,n,i;return{c(){e=Q("button"),r=Ve("Generating"),this.h()},l(u){e=ee(u,"BUTTON",{class:!0});var o=$(e);r=je(o,"Generating"),o.forEach(I),this.h()},h(){O(e,"class","btn btn-sm btn ml-4 disabled")},m(u,o){_e(u,e,o),R(e,r),n||(i=Fe(e,"click",t[12]),n=!0)},p:Me,d(u){u&&I(e),n=!1,i()}}}function O8(t){let e;function r(u,o){return u[8]?b8:D8}let i=r(t)(t);return{c(){e=Q("div"),i.c(),this.h()},l(u){e=ee(u,"DIV",{class:!0});var o=$(e);i.l(o),o.forEach(I),this.h()},h(){O(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(u,o){_e(u,e,o),i.m(e,null)},p(u,o){i.p(u,o)},i:Me,o:Me,d(u){u&&I(e),i.d()}}}function M8(t,e,r){let n,i,u,o,s,c,p,f,h,d;ct(t,_8,U=>r(7,s=U)),ct(t,Cr,U=>r(19,c=U)),ct(t,v8,U=>r(14,p=U)),ct(t,d8,U=>r(15,f=U)),ct(t,M1,U=>r(20,h=U)),ct(t,jf,U=>r(21,d=U));let g=d,b=h,m=null;const _=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001"];let D={C:{name:"Five Sentences",text:s8,builtIn:!0},D:{name:"Ten Sentences",text:o8,builtIn:!0},E:{name:"Fragments",text:l8,builtIn:!0},F:{name:"Concept Shotgun",text:f8,builtIn:!0},G:{name:"Poetic Accents",text:c8,builtIn:!0}},C=null,A="",S="";function E(){const U=C==="new"?$f():C;Ns.update(U,{name:A,text:S,builtIn:!1}),C==="new"&&r(0,C=U)}function B(){Ns.delete(C),r(0,C=null),r(3,A=""),r(4,S=""),Rs.delete()}function P(U){r(0,C=U),Rs.update(U),U&&U!=="new"?(r(3,A=i[U].name),r(4,S=i[U].text)):U==="new"&&(r(3,A=""),r(4,S=""))}function T(U){P(U.target.value)}function N(U,q){r(2,m=q3(U,q,b||"gpt-3.5-turbo")),m.then(Z=>{console.log(Z),Z.data.choices.forEach((X,le)=>{const ge=vf(X.message.content);console.log(ge);const Ee=ge.reduce((ye,[Oe,qe],Ie)=>(ye[Ie]=Pr(Ie,Oe,qe),ye),{});Mt.update(Ci(Ee,c.weightMode)),$n.update("edit")})})}function G(U,q){r(2,m=j3(U,q,b||"text-davinci-003")),m.then(Z=>{console.log(Z),Z.data.choices.forEach((X,le)=>{const ge=vf(X.text);console.log(ge);const Ee=ge.reduce((ye,[Oe,qe],Ie)=>(ye[Ie]=Pr(Ie,Oe,qe),ye),{});Mt.update(Ci(Ee,c.weightMode)),$n.update("edit")})})}function re(){if(!g||!S||!s)return;const U=Vf(g),q=`${S}

        Using the above rules create a prompt from:
        ${s}
        `;_.includes(b)?G(U,q):N(U,q)}function z(){A=this.value,r(3,A)}function Y(){S=this.value,r(4,S)}const V=U=>bf.update(U.target.value);return t.$$.update=()=>{t.$$.dirty[0]&32768&&r(13,n=f.reduce((U,[q,J])=>(U[q]={name:J.name,text:J.text,builtIn:!1},U),{})),t.$$.dirty[0]&8192&&r(1,i=Object.entries({...D,...n}).reduce((U,[q,J])=>(U[q]=J,U),{})),t.$$.dirty[0]&16385&&(C===null&&r(0,C=p),P(C)),t.$$.dirty[0]&3&&r(6,u=C&&C!=="new"&&i[C].builtIn),t.$$.dirty[0]&3&&r(5,o=C&&C!=="new"&&!i[C].builtIn)},[C,i,m,A,S,o,u,s,g,E,B,T,re,n,p,f,z,Y,V]}class P8 extends yt{constructor(e){super(),wt(this,e,M8,O8,At,{},null,[-1,-1])}}function Qd(t,e,r){const n=t.slice();return n[18]=e[r],n}function ep(t,e,r){const n=t.slice();return n[18]=e[r],n}function T8(t){return{c:Me,l:Me,m:Me,p:Me,d:Me}}function k8(t){let e,r,n=t[0].length>0&&tp(t),i=t[1].length>0&&np(t);return{c(){n&&n.c(),e=xe(),i&&i.c(),r=It()},l(u){n&&n.l(u),e=Ne(u),i&&i.l(u),r=It()},m(u,o){n&&n.m(u,o),_e(u,e,o),i&&i.m(u,o),_e(u,r,o)},p(u,o){u[0].length>0?n?n.p(u,o):(n=tp(u),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),u[1].length>0?i?i.p(u,o):(i=np(u),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(u){n&&n.d(u),u&&I(e),i&&i.d(u),u&&I(r)}}}function tp(t){let e,r,n,i,u,o,s,c,p,f,h=[],d=new Map,g,b,m=t[0];const _=D=>D[18];for(let D=0;D<m.length;D+=1){let C=ep(t,m,D),A=_(C);d.set(A,h[D]=rp(A,C))}return{c(){e=Q("div"),r=Q("div"),n=Q("label"),i=Q("span"),u=Ve("Pick a model to use for model generation"),o=xe(),s=Q("select"),c=Q("option"),p=Ve("Pick one");for(let D=0;D<h.length;D+=1)h[D].c();this.h()},l(D){e=ee(D,"DIV",{class:!0});var C=$(e);r=ee(C,"DIV",{class:!0});var A=$(r);n=ee(A,"LABEL",{class:!0});var S=$(n);i=ee(S,"SPAN",{class:!0});var E=$(i);u=je(E,"Pick a model to use for model generation"),E.forEach(I),S.forEach(I),o=Ne(A),s=ee(A,"SELECT",{class:!0});var B=$(s);c=ee(B,"OPTION",{});var P=$(c);p=je(P,"Pick one"),P.forEach(I);for(let T=0;T<h.length;T+=1)h[T].l(B);B.forEach(I),A.forEach(I),C.forEach(I),this.h()},h(){O(i,"class","label-text"),O(n,"class","label"),c.disabled=!0,c.selected=f=t[2]===null,c.__value="Pick one",c.value=c.__value,O(s,"class","select select-bordered"),O(r,"class","form-control w-full max-w-xs mb-4"),O(e,"class","flex justify-center")},m(D,C){_e(D,e,C),R(e,r),R(r,n),R(n,i),R(i,u),R(r,o),R(r,s),R(s,c),R(c,p);for(let A=0;A<h.length;A+=1)h[A]&&h[A].m(s,null);Oi(s,t[2]),g||(b=Fe(s,"change",t[6]),g=!0)},p(D,C){C&5&&f!==(f=D[2]===null)&&(c.selected=f),C&5&&(m=D[0],h=Kn(h,C,_,1,D,m,d,s,Ti,rp,null,ep)),C&5&&Oi(s,D[2])},d(D){D&&I(e);for(let C=0;C<h.length;C+=1)h[C].d();g=!1,b()}}}function rp(t,e){let r,n=e[18]+"",i,u,o;return{key:t,first:null,c(){r=Q("option"),i=Ve(n),this.h()},l(s){r=ee(s,"OPTION",{});var c=$(r);i=je(c,n),c.forEach(I),this.h()},h(){r.__value=u=e[18],r.value=r.__value,r.selected=o=e[2]===e[18],this.first=r},m(s,c){_e(s,r,c),R(r,i)},p(s,c){e=s,c&1&&n!==(n=e[18]+"")&&rn(i,n),c&1&&u!==(u=e[18])&&(r.__value=u,r.value=r.__value),c&5&&o!==(o=e[2]===e[18])&&(r.selected=o)},d(s){s&&I(r)}}}function np(t){let e,r,n,i,u,o,s,c,p,f,h=[],d=new Map,g,b,m=t[1];const _=D=>D[18];for(let D=0;D<m.length;D+=1){let C=Qd(t,m,D),A=_(C);d.set(A,h[D]=ip(A,C))}return{c(){e=Q("div"),r=Q("div"),n=Q("label"),i=Q("span"),u=Ve("Pick a model to use for prompt embedding"),o=xe(),s=Q("select"),c=Q("option"),p=Ve("Pick one");for(let D=0;D<h.length;D+=1)h[D].c();this.h()},l(D){e=ee(D,"DIV",{class:!0});var C=$(e);r=ee(C,"DIV",{class:!0});var A=$(r);n=ee(A,"LABEL",{class:!0});var S=$(n);i=ee(S,"SPAN",{class:!0});var E=$(i);u=je(E,"Pick a model to use for prompt embedding"),E.forEach(I),S.forEach(I),o=Ne(A),s=ee(A,"SELECT",{class:!0});var B=$(s);c=ee(B,"OPTION",{});var P=$(c);p=je(P,"Pick one"),P.forEach(I);for(let T=0;T<h.length;T+=1)h[T].l(B);B.forEach(I),A.forEach(I),C.forEach(I),this.h()},h(){O(i,"class","label-text"),O(n,"class","label"),c.disabled=!0,c.selected=f=t[3]===null,c.__value="Pick one",c.value=c.__value,O(s,"class","select select-bordered"),O(r,"class","form-control w-full max-w-xs mb-4"),O(e,"class","flex justify-center")},m(D,C){_e(D,e,C),R(e,r),R(r,n),R(n,i),R(i,u),R(r,o),R(r,s),R(s,c),R(c,p);for(let A=0;A<h.length;A+=1)h[A]&&h[A].m(s,null);Oi(s,t[3]),g||(b=Fe(s,"change",t[7]),g=!0)},p(D,C){C&10&&f!==(f=D[3]===null)&&(c.selected=f),C&10&&(m=D[1],h=Kn(h,C,_,1,D,m,d,s,Ti,ip,null,Qd)),C&10&&Oi(s,D[3])},d(D){D&&I(e);for(let C=0;C<h.length;C+=1)h[C].d();g=!1,b()}}}function ip(t,e){let r,n=e[18]+"",i,u,o;return{key:t,first:null,c(){r=Q("option"),i=Ve(n),this.h()},l(s){r=ee(s,"OPTION",{});var c=$(r);i=je(c,n),c.forEach(I),this.h()},h(){r.__value=u=e[18],r.value=r.__value,r.selected=o=e[3]===e[18],this.first=r},m(s,c){_e(s,r,c),R(r,i)},p(s,c){e=s,c&2&&n!==(n=e[18]+"")&&rn(i,n),c&2&&u!==(u=e[18])&&(r.__value=u,r.value=r.__value),c&10&&o!==(o=e[3]===e[18])&&(r.selected=o)},d(s){s&&I(r)}}}function I8(t){let e,r,n;return{c(){e=Q("div"),r=Q("div"),n=Q("progress"),this.h()},l(i){e=ee(i,"DIV",{class:!0});var u=$(e);r=ee(u,"DIV",{class:!0});var o=$(r);n=ee(o,"PROGRESS",{class:!0}),$(n).forEach(I),o.forEach(I),u.forEach(I),this.h()},h(){O(n,"class","progress progress-primary w-56"),O(r,"class","form-control w-full flex flex-col max-w-xs"),O(e,"class","py-10 flex justify-center")},m(i,u){_e(i,e,u),R(e,r),R(r,n)},p:Me,d(i){i&&I(e)}}}function x8(t){let e,r,n,i,u,o,s,c,p,f,h,d,g,b,m,_,D={ctx:t,current:null,token:null,hasCatch:!1,pending:I8,then:k8,catch:T8,value:17};return Bi(b=t[4],D),{c(){e=Q("div"),r=Q("div"),n=Q("div"),i=Q("label"),u=Q("span"),o=Ve("Open AI Key"),s=xe(),c=Q("input"),p=xe(),f=Q("label"),h=Q("button"),d=Ve("Clear"),g=xe(),D.block.c(),this.h()},l(C){e=ee(C,"DIV",{class:!0});var A=$(e);r=ee(A,"DIV",{class:!0});var S=$(r);n=ee(S,"DIV",{class:!0});var E=$(n);i=ee(E,"LABEL",{class:!0});var B=$(i);u=ee(B,"SPAN",{class:!0});var P=$(u);o=je(P,"Open AI Key"),P.forEach(I),B.forEach(I),s=Ne(E),c=ee(E,"INPUT",{type:!0,placeholder:!0,class:!0}),p=Ne(E),f=ee(E,"LABEL",{class:!0});var T=$(f);h=ee(T,"BUTTON",{class:!0});var N=$(h);d=je(N,"Clear"),N.forEach(I),T.forEach(I),E.forEach(I),S.forEach(I),g=Ne(A),D.block.l(A),A.forEach(I),this.h()},h(){O(u,"class","label-text-alt"),O(i,"class","label"),c.value=t[5],O(c,"type","password"),O(c,"placeholder","Open AI Key"),O(c,"class","input input-bordered w-full max-w-xs"),O(h,"class","btn btn-xs btn-error"),O(f,"class","label"),O(n,"class","form-control w-full max-w-xs"),O(r,"class","flex justify-center"),O(e,"class","h-full p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(C,A){_e(C,e,A),R(e,r),R(r,n),R(n,i),R(i,u),R(u,o),R(n,s),R(n,c),R(n,p),R(n,f),R(f,h),R(h,d),R(e,g),D.block.m(e,D.anchor=null),D.mount=()=>e,D.anchor=null,m||(_=[Fe(c,"input",t[8]),Fe(h,"click",t[9])],m=!0)},p(C,[A]){t=C,A&32&&c.value!==t[5]&&(c.value=t[5]),D.ctx=t,A&16&&b!==(b=t[4])&&Bi(b,D)||Us(D,t,A)},i:Me,o:Me,d(C){C&&I(e),D.block.d(),D.token=null,D=null,m=!1,ar(_)}}}function N8(t,e,r){let n,i,u,o;ct(t,Cr,S=>r(11,n=S)),ct(t,E1,S=>r(12,i=S)),ct(t,M1,S=>r(13,u=S)),ct(t,jf,S=>r(5,o=S));const s=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001","gpt-3.5-turbo","gpt-3.5-turbo-0301"],c=["text-embedding-ada-002"];let p=o,f=[],h=[],d=u,g=i,b=null;async function m(S){if(!S||f.length&&h.length)return;const E=Vf(S);r(4,b=W3(E));const B=await b;B.data&&r(0,f=B.data.data.map(({id:P})=>P).filter(P=>s.includes(P))),r(1,h=B.data.data.map(({id:P})=>P).filter(P=>c.includes(P)))}function _(S){r(2,d=S.target.value),Df.update(d)}function D(S){r(3,g=S.target.value),ff.update(g)}function C(S){const E=S.target.value;Ms.update(E),E.length===51&&m(E),E.length===0&&A()}function A(){Ms.delete(),r(10,p=""),r(0,f=[]),r(1,h=[]),n.weightMode===vt.Embed&&Mt.update({...n,weightMode:vt.Circle})}return t.$$.update=()=>{t.$$.dirty&1024&&m(p)},[f,h,d,g,b,o,_,D,C,A,p]}class R8 extends yt{constructor(e){super(),wt(this,e,N8,x8,At,{})}}function L8(t){let e,r;return{c(){e=dt("svg"),r=dt("path"),this.h()},l(n){e=pt(n,"svg",{xmlns:!0,class:!0,viewBox:!0});var i=$(e);r=pt(i,"path",{fill:!0,d:!0}),$(r).forEach(I),i.forEach(I),this.h()},h(){O(r,"fill","rgba(255,255,255, 0.7)"),O(r,"d","M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"),O(e,"xmlns","http://www.w3.org/2000/svg"),O(e,"class","h-4 w-4"),O(e,"viewBox","0 0 24 24")},m(n,i){_e(n,e,i),R(e,r)},p:Me,i:Me,o:Me,d(n){n&&I(e)}}}class U8 extends yt{constructor(e){super(),wt(this,e,null,L8,At,{})}}function up(t,e,r){const n=t.slice();return n[17]=e[r],n[19]=r,n}function ap(t,e,r){const n=t.slice();return n[20]=e[r][0],n[21]=e[r][1],n}function sp(t,e){let r,n=e[21].name+"",i,u,o;return{key:t,first:null,c(){r=Q("option"),i=Ve(n),this.h()},l(s){r=ee(s,"OPTION",{});var c=$(r);i=je(c,n),c.forEach(I),this.h()},h(){r.__value=u=e[20],r.value=r.__value,r.selected=o=e[0]===e[20],this.first=r},m(s,c){_e(s,r,c),R(r,i)},p(s,c){e=s,c&16&&n!==(n=e[21].name+"")&&rn(i,n),c&16&&u!==(u=e[20])&&(r.__value=u,r.value=r.__value),c&17&&o!==(o=e[0]===e[20])&&(r.selected=o)},d(s){s&&I(r)}}}function op(t){let e,r,n,i,u,o,s,c,p,f=Ps(t[1])+"",h,d,g=(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1]),b,m,_,D,C,A,S,E,B,P,T,N,G,re,z=g&&lp(),Y=t[3]&&fp(t);return{c(){e=Q("div"),r=Q("div"),n=Q("input"),i=xe(),u=Q("div"),o=Q("label"),s=Q("span"),c=Ve("Alias: "),p=Q("b"),h=Ve(f),d=xe(),z&&z.c(),b=xe(),m=Q("button"),_=Ve("Save"),D=xe(),C=Q("ul"),Y&&Y.c(),A=xe(),S=Q("li"),E=Q("input"),B=xe(),P=Q("div"),T=Q("button"),N=Ve("Delete"),this.h()},l(V){e=ee(V,"DIV",{class:!0});var U=$(e);r=ee(U,"DIV",{class:!0});var q=$(r);n=ee(q,"INPUT",{type:!0,placeholder:!0,class:!0}),i=Ne(q),u=ee(q,"DIV",{class:!0,"data-tip":!0});var J=$(u);o=ee(J,"LABEL",{class:!0});var Z=$(o);s=ee(Z,"SPAN",{class:!0});var X=$(s);c=je(X,"Alias: "),p=ee(X,"B",{class:!0});var le=$(p);h=je(le,f),le.forEach(I),X.forEach(I),Z.forEach(I),J.forEach(I),d=Ne(q),z&&z.l(q),q.forEach(I),b=Ne(U),m=ee(U,"BUTTON",{class:!0});var ge=$(m);_=je(ge,"Save"),ge.forEach(I),U.forEach(I),D=Ne(V),C=ee(V,"UL",{class:!0});var Ee=$(C);Y&&Y.l(Ee),A=Ne(Ee),S=ee(Ee,"LI",{class:!0});var ye=$(S);E=ee(ye,"INPUT",{type:!0,placeholder:!0,class:!0}),ye.forEach(I),Ee.forEach(I),B=Ne(V),P=ee(V,"DIV",{class:!0});var Oe=$(P);T=ee(Oe,"BUTTON",{class:!0});var qe=$(T);N=je(qe,"Delete"),qe.forEach(I),Oe.forEach(I),this.h()},h(){O(n,"type","text"),O(n,"placeholder","Name"),O(n,"class","input input-bordered input-sm w-full max-w-xs"),O(p,"class","text-white cursor-copy"),O(s,"class","label-text"),O(o,"class","label"),O(u,"class","tooltip tooltip-primary tooltip-bottom"),O(u,"data-tip","Use in prompts to get random slot."),O(r,"class","flex flex-col w-full pr-2 "),O(m,"class","btn btn-sm btn-primary"),Pt(m,"btn-disabled",!Cd(t[1])||(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1])),O(e,"class","w-full p-2 flex justify-between"),O(E,"type","text"),O(E,"placeholder","Add slot"),O(E,"class","input input-bordered input-sm w-full italic"),O(S,"class","p-1"),O(C,"class","px-4 py-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block"),O(T,"class","btn btn-sm btn-error ml-4"),O(P,"class","w-full p-2 h-12 flex justify-between")},m(V,U){_e(V,e,U),R(e,r),R(r,n),tn(n,t[1]),R(r,i),R(r,u),R(u,o),R(o,s),R(s,c),R(s,p),R(p,h),R(r,d),z&&z.m(r,null),R(e,b),R(e,m),R(m,_),_e(V,D,U),_e(V,C,U),Y&&Y.m(C,null),R(C,A),R(C,S),R(S,E),tn(E,t[2]),_e(V,B,U),_e(V,P,U),R(P,T),R(T,N),G||(re=[Fe(n,"input",t[11]),Fe(p,"click",t[12]),Fe(m,"click",t[6]),Fe(E,"input",t[14]),Fe(E,"input",t[15]),Fe(T,"click",t[7])],G=!0)},p(V,U){U&2&&n.value!==V[1]&&tn(n,V[1]),U&2&&f!==(f=Ps(V[1])+"")&&rn(h,f),U&11&&(g=(V[0]==="new"||V[3]&&V[3].name!==V[1])&&!V[5](V[1])),g?z||(z=lp(),z.c(),z.m(r,null)):z&&(z.d(1),z=null),U&43&&Pt(m,"btn-disabled",!Cd(V[1])||(V[0]==="new"||V[3]&&V[3].name!==V[1])&&!V[5](V[1])),V[3]?Y?Y.p(V,U):(Y=fp(V),Y.c(),Y.m(C,A)):Y&&(Y.d(1),Y=null),U&4&&E.value!==V[2]&&tn(E,V[2])},d(V){V&&I(e),z&&z.d(),V&&I(D),V&&I(C),Y&&Y.d(),V&&I(B),V&&I(P),G=!1,ar(re)}}}function lp(t){let e,r,n;return{c(){e=Q("label"),r=Q("span"),n=Ve("Name In Use"),this.h()},l(i){e=ee(i,"LABEL",{class:!0});var u=$(e);r=ee(u,"SPAN",{class:!0});var o=$(r);n=je(o,"Name In Use"),o.forEach(I),u.forEach(I),this.h()},h(){O(r,"class","label-text text-orange-300"),O(e,"class","label")},m(i,u){_e(i,e,u),R(e,r),R(r,n)},d(i){i&&I(e)}}}function fp(t){let e=[],r=new Map,n,i=t[3].values;const u=o=>o[19];for(let o=0;o<i.length;o+=1){let s=up(t,i,o),c=u(s);r.set(c,e[o]=cp(c,s))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();n=It()},l(o){for(let s=0;s<e.length;s+=1)e[s].l(o);n=It()},m(o,s){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(o,s);_e(o,n,s)},p(o,s){s&264&&(i=o[3].values,e=Kn(e,s,u,1,o,i,r,n.parentNode,Ti,cp,n,up))},d(o){for(let s=0;s<e.length;s+=1)e[s].d(o);o&&I(n)}}}function cp(t,e){let r,n,i,u,o,s;function c(...p){return e[13](e[19],...p)}return{key:t,first:null,c(){r=Q("li"),n=Q("input"),u=xe(),this.h()},l(p){r=ee(p,"LI",{class:!0});var f=$(r);n=ee(f,"INPUT",{type:!0,placeholder:!0,class:!0}),u=Ne(f),f.forEach(I),this.h()},h(){n.value=i=e[17],O(n,"type","text"),O(n,"placeholder",""),O(n,"class","input input-bordered input-sm w-full"),O(r,"class","p-1"),this.first=r},m(p,f){_e(p,r,f),R(r,n),R(r,u),o||(s=Fe(n,"input",c),o=!0)},p(p,f){e=p,f&8&&i!==(i=e[17])&&n.value!==i&&(n.value=i)},d(p){p&&I(r),o=!1,s()}}}function V8(t){let e,r,n,i,u,o,s,c,p,f,h,d=[],g=new Map,b,m,_,D,C,A,S=Object.entries(t[4]);const E=P=>P[20];for(let P=0;P<S.length;P+=1){let T=ap(t,S,P),N=E(T);g.set(N,d[P]=sp(N,T))}let B=t[0]&&op(t);return{c(){e=Q("div"),r=Q("div"),n=Q("div"),i=Q("label"),u=Q("span"),o=Ve("Edit Slots"),s=xe(),c=Q("select"),p=Q("option"),f=Ve("Pick one");for(let P=0;P<d.length;P+=1)d[P].c();b=Q("option"),m=Ve("New"),D=xe(),B&&B.c(),this.h()},l(P){e=ee(P,"DIV",{class:!0});var T=$(e);r=ee(T,"DIV",{class:!0});var N=$(r);n=ee(N,"DIV",{class:!0});var G=$(n);i=ee(G,"LABEL",{class:!0});var re=$(i);u=ee(re,"SPAN",{class:!0});var z=$(u);o=je(z,"Edit Slots"),z.forEach(I),re.forEach(I),s=Ne(G),c=ee(G,"SELECT",{class:!0});var Y=$(c);p=ee(Y,"OPTION",{});var V=$(p);f=je(V,"Pick one"),V.forEach(I);for(let q=0;q<d.length;q+=1)d[q].l(Y);b=ee(Y,"OPTION",{});var U=$(b);m=je(U,"New"),U.forEach(I),Y.forEach(I),G.forEach(I),N.forEach(I),D=Ne(T),B&&B.l(T),T.forEach(I),this.h()},h(){O(u,"class","label-text"),O(i,"class","label"),p.disabled=!0,p.selected=h=t[0]===null,p.__value="Pick one",p.value=p.__value,b.__value="new",b.value=b.__value,b.selected=_=t[0]==="new",O(c,"class","select select-bordered"),t[0]===void 0&&wu(()=>t[10].call(c)),O(n,"class","form-control w-full max-w-xs mb-4"),O(r,"class","flex justify-center"),O(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(P,T){_e(P,e,T),R(e,r),R(r,n),R(n,i),R(i,u),R(u,o),R(n,s),R(n,c),R(c,p),R(p,f);for(let N=0;N<d.length;N+=1)d[N]&&d[N].m(c,null);R(c,b),R(b,m),Oi(c,t[0],!0),R(e,D),B&&B.m(e,null),C||(A=Fe(c,"change",t[10]),C=!0)},p(P,[T]){T&17&&h!==(h=P[0]===null)&&(p.selected=h),T&17&&(S=Object.entries(P[4]),d=Kn(d,T,E,1,P,S,g,c,Ti,sp,b,ap)),T&17&&_!==(_=P[0]==="new")&&(b.selected=_),T&17&&Oi(c,P[0]),P[0]?B?B.p(P,T):(B=op(P),B.c(),B.m(e,null)):B&&(B.d(1),B=null)},i:Me,o:Me,d(P){P&&I(e);for(let T=0;T<d.length;T+=1)d[T].d();B&&B.d(),C=!1,A()}}}function j8(t,e,r){let n;ct(t,fS,S=>r(4,n=S));let i=null,u="",o="",s=null;function c(S){r(3,s=S&&S!=="new"?{...n[S]}:S==="new"?{name:"New Slot Set",values:[]}:null),r(1,u=s?s.name:"")}function p(S){return Object.values(n).every(B=>B.name!==S)}function f(){if(s)if(i&&i!=="new")Ei.update(i,{...s,name:u});else{if(!p()){alert("Name already in use");return}const E=$f();Ei.update(E,{...s,name:u}),r(0,i=E)}}function h(){Ei.delete(i),r(1,u=""),r(2,o=""),r(0,i=null),r(3,s=null)}const d=xs((S,E)=>{if(!s||!i)return;const B=[...s.values];E.length===0?B.splice(S,1):B[S]=E,r(3,s.values=B,s),i!=="new"&&Ei.update(i,s)},1e3),g=xs(S=>{if(!s||!i)return;const E=[...s.values];S.length>0&&(E.push(S),r(3,s.values=E,s),r(2,o=""),i!=="new"&&Ei.update(i,s))},1e3);function b(){i=By(this),r(0,i)}function m(){u=this.value,r(1,u)}const _=()=>navigator.clipboard.writeText(Ps(u)),D=(S,E)=>d(S,E.target.value);function C(){o=this.value,r(2,o)}const A=S=>g(S.target.value);return t.$$.update=()=>{t.$$.dirty&1&&c(i)},[i,u,o,s,n,p,f,h,d,g,b,m,_,D,C,A]}class q8 extends yt{constructor(e){super(),wt(this,e,j8,V8,At,{})}}function z8(t){let e,r;return e=new R8({}),{c(){$e(e.$$.fragment)},l(n){Ke(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(Ae(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function W8(t){let e,r;return e=new q8({}),{c(){$e(e.$$.fragment)},l(n){Ke(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(Ae(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function H8(t){let e,r;return e=new P8({}),{c(){$e(e.$$.fragment)},l(n){Ke(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(Ae(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function G8(t){let e,r;return e=new a8({}),{c(){$e(e.$$.fragment)},l(n){Ke(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(Ae(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function $8(t){let e,r;return e=new t5({}),{c(){$e(e.$$.fragment)},l(n){Ke(e.$$.fragment,n)},m(n,i){Ye(e,n,i),r=!0},i(n){r||(Ae(e.$$.fragment,n),r=!0)},o(n){Se(e.$$.fragment,n),r=!1},d(n){Ze(e,n)}}}function K8(t){let e,r,n,i,u,o,s,c,p,f,h,d,g,b,m,_,D,C,A,S,E,B,P,T,N,G,re,z;E=new U8({});const Y=[$8,G8,H8,W8,z8],V=[];function U(q,J){return q[0]==="select"?0:q[0]==="edit"?1:q[0]==="generate"?2:q[0]==="slots"?3:q[0]==="settings"?4:-1}return~(T=U(t))&&(N=V[T]=Y[T](t)),{c(){e=Q("div"),r=Q("div"),n=Q("div"),i=Q("button"),u=Ve("Select"),s=xe(),c=Q("button"),p=Ve("Edit"),h=xe(),d=Q("button"),g=Ve("Generate"),m=xe(),_=Q("button"),D=Ve("Slots"),A=xe(),S=Q("button"),$e(E.$$.fragment),P=xe(),N&&N.c(),this.h()},l(q){e=ee(q,"DIV",{class:!0});var J=$(e);r=ee(J,"DIV",{class:!0});var Z=$(r);n=ee(Z,"DIV",{class:!0});var X=$(n);i=ee(X,"BUTTON",{class:!0});var le=$(i);u=je(le,"Select"),le.forEach(I),s=Ne(X),c=ee(X,"BUTTON",{class:!0});var ge=$(c);p=je(ge,"Edit"),ge.forEach(I),h=Ne(X),d=ee(X,"BUTTON",{class:!0});var Ee=$(d);g=je(Ee,"Generate"),Ee.forEach(I),m=Ne(X),_=ee(X,"BUTTON",{class:!0});var ye=$(_);D=je(ye,"Slots"),ye.forEach(I),A=Ne(X),S=ee(X,"BUTTON",{class:!0});var Oe=$(S);Ke(E.$$.fragment,Oe),Oe.forEach(I),X.forEach(I),P=Ne(Z),N&&N.l(Z),Z.forEach(I),J.forEach(I),this.h()},h(){O(i,"class",o=t[0]==="select"?"btn btn-active":"btn"),O(c,"class",f=t[0]==="edit"?"btn btn-active":"btn"),O(d,"class",b=t[0]==="generate"?"btn btn-active":"btn"),O(_,"class",C=t[0]==="slots"?"btn btn-active":"btn"),O(S,"class",B=t[0]==="settings"?"btn btn-active":"btn"),O(n,"class","btn-group btn-group-vertical sm:btn-group-horizontal bg-base-100 w-full flex justify-center p-2"),O(r,"class","h-screen overflow-y-auto flex flex-col"),O(e,"class","max-w-md w-1/2 h-screen overflow-y-auto")},m(q,J){_e(q,e,J),R(e,r),R(r,n),R(n,i),R(i,u),R(n,s),R(n,c),R(c,p),R(n,h),R(n,d),R(d,g),R(n,m),R(n,_),R(_,D),R(n,A),R(n,S),Ye(E,S,null),R(r,P),~T&&V[T].m(r,null),G=!0,re||(z=[Fe(i,"click",t[2]),Fe(c,"click",t[3]),Fe(d,"click",t[4]),Fe(_,"click",t[5]),Fe(S,"click",t[6])],re=!0)},p(q,[J]){(!G||J&1&&o!==(o=q[0]==="select"?"btn btn-active":"btn"))&&O(i,"class",o),(!G||J&1&&f!==(f=q[0]==="edit"?"btn btn-active":"btn"))&&O(c,"class",f),(!G||J&1&&b!==(b=q[0]==="generate"?"btn btn-active":"btn"))&&O(d,"class",b),(!G||J&1&&C!==(C=q[0]==="slots"?"btn btn-active":"btn"))&&O(_,"class",C),(!G||J&1&&B!==(B=q[0]==="settings"?"btn btn-active":"btn"))&&O(S,"class",B);let Z=T;T=U(q),T!==Z&&(N&&(Nr(),Se(V[Z],1,1,()=>{V[Z]=null}),Rr()),~T?(N=V[T],N||(N=V[T]=Y[T](q),N.c()),Ae(N,1),N.m(r,null)):N=null)},i(q){G||(Ae(E.$$.fragment,q),Ae(N),G=!0)},o(q){Se(E.$$.fragment,q),Se(N),G=!1},d(q){q&&I(e),Ze(E),~T&&V[T].d(),re=!1,ar(z)}}}function Y8(t,e,r){let n;ct(t,JS,f=>r(0,n=f));function i(f){$n.update(f)}const u=()=>i("select"),o=()=>i("edit"),s=()=>i("generate"),c=()=>i("slots"),p=()=>i("settings");return t.$$.update=()=>{t.$$.dirty&1&&(n||$n.update("select"))},[n,i,u,o,s,c,p]}class Z8 extends yt{constructor(e){super(),wt(this,e,Y8,K8,At,{})}}function X8(t){let e,r,n,i;return e=new Z8({}),n=new KS({}),{c(){$e(e.$$.fragment),r=xe(),$e(n.$$.fragment)},l(u){Ke(e.$$.fragment,u),r=Ne(u),Ke(n.$$.fragment,u)},m(u,o){Ye(e,u,o),_e(u,r,o),Ye(n,u,o),i=!0},p:Me,i(u){i||(Ae(e.$$.fragment,u),Ae(n.$$.fragment,u),i=!0)},o(u){Se(e.$$.fragment,u),Se(n.$$.fragment,u),i=!1},d(u){Ze(e,u),u&&I(r),Ze(n,u)}}}class e6 extends yt{constructor(e){super(),wt(this,e,null,X8,At,{})}}export{e6 as default};
