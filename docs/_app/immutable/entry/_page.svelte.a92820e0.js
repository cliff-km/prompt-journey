import{J as Ft,S as Xe,i as et,s as tt,k as W,q as Ce,a as Ee,l as H,m as j,r as Fe,h as O,c as Ae,n as B,K as st,b as se,G as T,L as De,H as Pe,M as qt,I as $e,N as gt,O as vt,y as Ve,z as je,A as ze,g as ce,d as me,B as qe,p as Ot,u as zt,P as E0,C as bu,v as sr,f as or,D as Du,E as yu,F as wu,e as St,Q as Eu,R as Un,T as Zn,U as Ni,V as Ma,W as nn,X as Lp,Y as oy,Z as ly,_ as Fa,$ as Bs,a0 as Rp,a1 as Up,o as fy,a2 as ki,a3 as cy}from"../chunks/index.f38d4254.js";import{w as er,d as Au}from"../chunks/index.4c6e4564.js";var pt=(t=>(t.Circle="circle",t.Ring="ring",t.Bars="bars",t.Embed="embed",t.Pie="pie",t.Random="random",t))(pt||{}),Dr=(t=>(t.Build="build",t.Concept="concept",t.History="history",t))(Dr||{}),Os=(t=>(t.List="list",t.Map="map",t))(Os||{});const Il="appStage";function hy(){const t=er(Dr.Build),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Il]||Dr.Build),{subscribe:e,update:a=>{!a||!i||(localStorage[Il]=a,r(a))},get:()=>Ft(t),delete:()=>{i&&(delete localStorage[Il],r(Dr.Build))}}}const mf=hy();function dy(t){let e,r,n,i,a,o,s,l,p,f,c;return{c(){e=W("div"),r=W("button"),n=Ce("Build"),i=Ee(),a=W("button"),o=Ce("Concept"),s=Ee(),l=W("button"),p=Ce("History"),this.h()},l(d){e=H(d,"DIV",{class:!0});var g=j(e);r=H(g,"BUTTON",{class:!0});var b=j(r);n=Fe(b,"Build"),b.forEach(O),i=Ae(g),a=H(g,"BUTTON",{class:!0});var v=j(a);o=Fe(v,"Concept"),v.forEach(O),s=Ae(g),l=H(g,"BUTTON",{class:!0});var m=j(l);p=Fe(m,"History"),m.forEach(O),g.forEach(O),this.h()},h(){B(r,"class","btn btn-sm"),st(r,"btn-active",t[0]===Dr.Build),B(a,"class","btn btn-sm"),st(a,"btn-active",t[0]===Dr.Concept),B(l,"class","btn btn-sm"),st(l,"btn-active",t[0]===Dr.History),B(e,"class","btn-group btn-group-horizontal p-2")},m(d,g){se(d,e,g),T(e,r),T(r,n),T(e,i),T(e,a),T(a,o),T(e,s),T(e,l),T(l,p),f||(c=[De(r,"click",t[2]),De(a,"click",t[3]),De(l,"click",t[4])],f=!0)},p(d,[g]){g&1&&st(r,"btn-active",d[0]===Dr.Build),g&1&&st(a,"btn-active",d[0]===Dr.Concept),g&1&&st(l,"btn-active",d[0]===Dr.History)},i:Pe,o:Pe,d(d){d&&O(e),f=!1,qt(c)}}}function py(t,e,r){let n;$e(t,mf,l=>r(0,n=l));function i(l){mf.update(l)}return[n,i,()=>i(Dr.Build),()=>i(Dr.Concept),()=>i(Dr.History)]}class gy extends Xe{constructor(e){super(),et(this,e,py,dy,tt,{})}}function vy(t){let e,r;return{c(){e=gt("svg"),r=gt("circle"),this.h()},l(n){e=vt(n,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var i=j(e);r=vt(i,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),j(r).forEach(O),i.forEach(O),this.h()},h(){B(r,"cx","25"),B(r,"cy","25"),B(r,"r","20"),B(r,"fill","rgba(255,255,255, 0.7)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-6 w-6"),B(e,"viewBox","0 0 50 50")},m(n,i){se(n,e,i),T(e,r)},p:Pe,i:Pe,o:Pe,d(n){n&&O(e)}}}class my extends Xe{constructor(e){super(),et(this,e,null,vy,tt,{})}}function _y(t){let e,r,n,i,a,o;return{c(){e=gt("svg"),r=gt("circle"),n=gt("circle"),i=gt("circle"),a=gt("circle"),o=gt("circle"),this.h()},l(s){e=vt(s,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var l=j(e);r=vt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),j(r).forEach(O),n=vt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),j(n).forEach(O),i=vt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),j(i).forEach(O),a=vt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),j(a).forEach(O),o=vt(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),j(o).forEach(O),l.forEach(O),this.h()},h(){B(r,"cx","20"),B(r,"cy","80"),B(r,"r","5"),B(r,"fill","rgba(255,255,255, 0.7)"),B(n,"cx","40"),B(n,"cy","40"),B(n,"r","5"),B(n,"fill","rgba(255,255,255, 0.7)"),B(i,"cx","70"),B(i,"cy","20"),B(i,"r","5"),B(i,"fill","rgba(255,255,255, 0.7)"),B(a,"cx","80"),B(a,"cy","60"),B(a,"r","5"),B(a,"fill","rgba(255,255,255, 0.7)"),B(o,"cx","60"),B(o,"cy","75"),B(o,"r","5"),B(o,"fill","rgba(255,255,255, 0.7)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-6 w-6"),B(e,"viewBox","0 0 100 100")},m(s,l){se(s,e,l),T(e,r),T(e,n),T(e,i),T(e,a),T(e,o)},p:Pe,i:Pe,o:Pe,d(s){s&&O(e)}}}class by extends Xe{constructor(e){super(),et(this,e,null,_y,tt,{})}}const xl="selectedPrompt";function Dy(){const t=er(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[xl]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[xl]=a,r(a))},get:()=>Ft(t),delete:()=>{i&&(delete localStorage[xl],r(""))}}}const Xi=Dy();function yy(){const t=er({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith("prompt_")){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=Ft(t),p={...s[a]||{},...o};i&&(localStorage[`prompt_${a}`]=JSON.stringify(p));const f={...s,[a]:p};r(f)},get:a=>Ft(t)[a],delete:a=>{i&&delete localStorage[`prompt_${a}`];const o={...Ft(t)};delete o[a],r(o)}}}const du=yy(),wy=Au(du,t=>Object.entries(Ft(du))),ps="activePrompt";function Ir(t,e,r,n=1){return{id:t,text:e,barWeight:n,parsedWeight:r,randomWeight:Math.random()}}function A0(){return{0:Ir(0,"Magic potion in a mystical bottle",1),1:Ir(1,"A crystalline decanter",1),2:Ir(2,"An ornate tequila bottle",1),3:Ir(3,"An antique sake bottle",1),4:Ir(4,"A colorful perfume bottle",1),5:Ir(5,"A glass vase full of vibrant flowers",1),6:Ir(6,"A minimalist glass tea kettle",1),7:Ir(7,"Chihuly glass art",1),8:Ir(8,"A fine wine bottle",1),9:Ir(9,"A gourmet vinegar bottle",1),10:Ir(10,"A stunning fishbowl",1),11:Ir(11,"A striking piece of tourmaline",1),12:Ir(12,"A finely cut piece of sapphire",1),13:Ir(13,"Iittala glass art",1)}}function Bi(t,e=pt.Pie){return{weightedPrompts:t||{},weightMode:e,pieAngles:{},ringAngles:{},ringStartAngle:0,ringReverse:!1,ringWeightScaling:2,ringExponentialScaling:!0,circleAngles:{},circleMarker:[270,.33],circleWeightScaling:2,circleExponentialScaling:!0,embedWeightScaling:2,embedExponentialScaling:!0,embedClusters:0,embedPromptLimit:Object.keys(t).length,randomPromptLimit:Object.keys(t).length}}function Ey(){const t=er({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",a=i&&localStorage[ps]?JSON.parse(localStorage[ps]):Bi(A0());return r({...Bi({}),...a}),{subscribe:e,update:o=>{const s=Xi.get();s&&du.update(s,o),!(!o||!i)&&(localStorage[ps]=JSON.stringify(o),r({...Bi({}),...o}))},get:()=>Ft(t),delete:()=>{i&&(delete localStorage[ps],r(Bi(A0())))}}}const it=Ey();function Ay(t){let e,r,n,i;return{c(){e=gt("svg"),r=gt("path"),n=gt("path"),i=gt("path"),this.h()},l(a){e=vt(a,"svg",{class:!0,fill:!0,viewBox:!0,version:!0,xmlns:!0});var o=j(e);r=vt(o,"path",{d:!0}),j(r).forEach(O),n=vt(o,"path",{d:!0}),j(n).forEach(O),i=vt(o,"path",{d:!0}),j(i).forEach(O),o.forEach(O),this.h()},h(){B(r,"d","M341.333333 385.706667c-11.946667 0-22.186667-4.266667-30.72-12.8-7.970133-7.970133-11.946667-17.92-11.946666-29.866667s3.976533-22.186667 11.946666-30.72c8.533333-7.953067 18.773333-11.946667 30.72-11.946667s21.896533 3.976533 29.866667 11.946667c8.533333 8.533333 12.8 18.773333 12.8 30.72s-4.266667 21.896533-12.8 29.866667c-7.970133 8.533333-17.92 12.8-29.866667 12.8z m128-213.333334c11.946667 0 21.896533 3.976533 29.866667 11.946667 8.533333 8.533333 12.8 18.773333 12.8 30.72s-4.266667 21.896533-12.8 29.866667c-7.970133 8.533333-17.92 12.8-29.866667 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.970133-11.946667-17.92-11.946666-29.866667s3.976533-22.186667 11.946666-30.72c8.533333-7.970133 18.773333-11.946667 30.72-11.946667zM243.2 500.906667c-7.970133 8.533333-17.92 12.8-29.866667 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.970133-11.946667-17.92-11.946666-29.866667s3.976533-22.186667 11.946666-30.72c8.533333-7.953067 18.773333-11.946667 30.72-11.946667s21.896533 3.976533 29.866667 11.946667c8.533333 8.533333 12.8 18.773333 12.8 30.72s-4.266667 21.896533-12.8 29.866667z"),B(n,"d","M512 954.026667c-27.0336-0.682667-50.176-10.683733-69.239467-29.730134-19.3024-19.3536-30.429867-42.666667-33.0752-69.2736L409.6 616.106667H170.666667c-27.0336-0.682667-50.176-10.683733-69.239467-29.730134-19.285333-19.319467-30.4128-42.615467-33.0752-69.256533L68.266667 169.813333c2.082133-27.562667 12.629333-50.414933 31.4368-69.239466 19.626667-19.626667 43.3664-29.917867 70.536533-30.583467h344.302933c27.016533 0.682667 50.158933 10.666667 69.239467 29.730133 19.643733 19.626667 29.934933 43.349333 30.6176 70.519467V407.893333h241.493333c27.050667 0.7168 50.176 10.7008 69.239467 29.7472 19.6096 19.626667 29.917867 43.3664 30.600533 70.519467V854.186667c-2.065067 27.5456-12.612267 50.397867-31.453866 69.256533-19.643733 19.626667-43.3664 29.917867-70.536534 30.600533H512z m-68.266667-354.986667V853.333333c1.792 17.152 9.403733 33.041067 23.176534 46.848 12.817067 12.817067 27.716267 19.268267 45.5168 19.712H853.333333c17.937067-0.443733 33.399467-7.202133 46.813867-20.599466 13.073067-13.090133 20.1216-28.279467 21.504-46.421334L921.6 508.586667c-0.443733-17.954133-7.202133-33.399467-20.599467-46.813867-12.834133-12.817067-27.733333-19.285333-45.550933-19.7632L512 442.026667c-17.937067 0.4608-33.399467 7.202133-46.830933 20.616533-13.056 13.073067-20.087467 28.245333-21.486934 46.404267L443.733333 599.04zM123.8528 124.706133c-13.073067 13.073067-20.104533 28.2624-21.504 46.421334L102.4 515.413333c1.792 17.169067 9.403733 33.058133 23.159467 46.813867 12.817067 12.834133 27.733333 19.285333 45.533866 19.729067H409.6v-74.24c2.082133-27.562667 12.629333-50.414933 31.4368-69.239467 19.643733-19.6096 43.3664-29.9008 70.519467-30.583467h68.693333V170.666667c-0.443733-17.954133-7.202133-33.399467-20.599467-46.813867-12.834133-12.8512-27.733333-19.3024-45.5168-19.746133H170.666667c-17.954133 0.443733-33.399467 7.185067-46.813867 20.599466z"),B(i,"d","M840.533333 522.24c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.9872-7.953067-11.946667-17.92-11.946667-29.866667s3.959467-22.203733 11.946667-30.737067c8.533333-7.970133 18.773333-11.963733 30.72-11.963733s21.896533 4.027733 29.866666 11.9808z m0 128c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.9872-7.953067-11.946667-17.92-11.946667-29.866667s3.959467-22.203733 11.946667-30.737067c8.533333-7.970133 18.773333-11.9296 30.72-11.9296s21.896533 3.9936 29.866666 11.946667z m-60.586666 128c8.533333-7.953067 18.773333-11.9296 30.72-11.9296s21.896533 3.976533 29.866666 11.9296c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.9872-7.953067-11.946667-17.92-11.946667-29.866667s3.959467-22.186667 11.946667-30.72zM597.333333 552.96c0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.953067-11.946667-17.92-11.946667-29.866667s3.976533-22.203733 11.946667-30.737067c8.533333-7.970133 18.773333-11.963733 30.72-11.963733s21.896533 3.9936 29.866666 11.963733c8.533333 8.5504 12.8 18.7904 12.8 30.737067z m-73.386666 225.28c8.533333-7.953067 18.773333-11.9296 30.72-11.9296s21.896533 3.976533 29.866666 11.9296c8.533333 8.533333 12.8 18.773333 12.8 30.72 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.953067-11.946667-17.92-11.946667-29.866667s3.976533-22.186667 11.946667-30.72z m-11.946667-97.28c0-11.946667 3.976533-22.203733 11.946667-30.737067 8.533333-7.970133 18.773333-11.9296 30.72-11.9296s21.896533 3.959467 29.866666 11.9296c8.533333 8.5504 12.8 18.7904 12.8 30.737067 0 11.9296-4.266667 21.896533-12.8 29.866667-7.970133 8.533333-17.92 12.8-29.866666 12.8s-22.186667-4.266667-30.72-12.8c-7.970133-7.953067-11.946667-17.92-11.946667-29.866667z"),B(e,"class","h-5 w-5"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"viewBox","0 0 1024 1024"),B(e,"version","1.1"),B(e,"xmlns","http://www.w3.org/2000/svg")},m(a,o){se(a,e,o),T(e,r),T(e,n),T(e,i)},p:Pe,i:Pe,o:Pe,d(a){a&&O(e)}}}class Cy extends Xe{constructor(e){super(),et(this,e,null,Ay,tt,{})}}function Fy(t){let e,r,n,i,a,o,s,l,p,f,c,d;return n=new Cy({}),o=new my({}),p=new by({}),{c(){e=W("div"),r=W("button"),Ve(n.$$.fragment),i=Ee(),a=W("button"),Ve(o.$$.fragment),s=Ee(),l=W("button"),Ve(p.$$.fragment),this.h()},l(g){e=H(g,"DIV",{class:!0});var b=j(e);r=H(b,"BUTTON",{class:!0});var v=j(r);je(n.$$.fragment,v),v.forEach(O),i=Ae(b),a=H(b,"BUTTON",{class:!0});var m=j(a);je(o.$$.fragment,m),m.forEach(O),s=Ae(b),l=H(b,"BUTTON",{class:!0});var D=j(l);je(p.$$.fragment,D),D.forEach(O),b.forEach(O),this.h()},h(){B(r,"class","btn btn-sm"),st(r,"btn-active",t[0].weightMode===pt.Random),B(a,"class","btn btn-sm"),st(a,"btn-active",t[0].weightMode===pt.Circle||t[0].weightMode===pt.Pie||t[0].weightMode===pt.Ring),B(l,"class","btn btn-sm"),st(l,"btn-active",t[0].weightMode===pt.Embed),B(e,"class","btn-group btn-group-horizontal w-full flex justify-end p-2")},m(g,b){se(g,e,b),T(e,r),ze(n,r,null),T(e,i),T(e,a),ze(o,a,null),T(e,s),T(e,l),ze(p,l,null),f=!0,c||(d=[De(r,"click",t[2]),De(a,"click",t[3]),De(l,"click",t[4])],c=!0)},p(g,[b]){(!f||b&1)&&st(r,"btn-active",g[0].weightMode===pt.Random),(!f||b&1)&&st(a,"btn-active",g[0].weightMode===pt.Circle||g[0].weightMode===pt.Pie||g[0].weightMode===pt.Ring),(!f||b&1)&&st(l,"btn-active",g[0].weightMode===pt.Embed)},i(g){f||(ce(n.$$.fragment,g),ce(o.$$.fragment,g),ce(p.$$.fragment,g),f=!0)},o(g){me(n.$$.fragment,g),me(o.$$.fragment,g),me(p.$$.fragment,g),f=!1},d(g){g&&O(e),qe(n),qe(o),qe(p),c=!1,qt(d)}}}function Sy(t,e,r){let n;$e(t,it,l=>r(0,n=l));function i(l){const p={...n,weightMode:l};it.update(p)}return[n,i,()=>i(pt.Random),()=>i(pt.Pie),()=>i(pt.Embed)]}class By extends Xe{constructor(e){super(),et(this,e,Sy,Fy,tt,{})}}function Oy(t){let e,r,n,i;return{c(){e=gt("svg"),r=gt("path"),n=gt("path"),i=gt("path"),this.h()},l(a){e=vt(a,"svg",{xmlns:!0,class:!0,viewBox:!0});var o=j(e);r=vt(o,"path",{d:!0,fill:!0}),j(r).forEach(O),n=vt(o,"path",{d:!0,fill:!0}),j(n).forEach(O),i=vt(o,"path",{d:!0,fill:!0}),j(i).forEach(O),o.forEach(O),this.h()},h(){B(r,"d","M50 50 L50 10 A40 40 0 0 1 90 50 z"),B(r,"fill","rgba(255,255,255, 0.7)"),B(n,"d","M50 50 L90 50 A40 40 0 0 1 50 90 z"),B(n,"fill","rgba(255,255,255, 0.3)"),B(i,"d","M50 50 L50 90 A40 40 0 0 1 10 50 z"),B(i,"fill","rgba(255,255,255, 0.9)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"class","h-5 w-5"),B(e,"viewBox","0 0 100 100")},m(a,o){se(a,e,o),T(e,r),T(e,n),T(e,i)},p:Pe,i:Pe,o:Pe,d(a){a&&O(e)}}}class My extends Xe{constructor(e){super(),et(this,e,null,Oy,tt,{})}}function Py(t){let e,r,n;return{c(){e=gt("svg"),r=gt("circle"),n=gt("circle"),this.h()},l(i){e=vt(i,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var a=j(e);r=vt(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),j(r).forEach(O),n=vt(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),j(n).forEach(O),a.forEach(O),this.h()},h(){B(r,"cx","25"),B(r,"cy","25"),B(r,"r","20"),B(r,"stroke","rgba(255,255,255, 0.7)"),B(r,"stroke-width","4"),B(r,"fill","none"),B(n,"cx","25"),B(n,"cy","25"),B(n,"r","4"),B(n,"stroke","rgba(255,255,255, 0.7)"),B(n,"stroke-width","1"),B(n,"fill","rgba(255,255,255, 0.7)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-5 w-5"),B(e,"viewBox","0 0 50 50")},m(i,a){se(i,e,a),T(e,r),T(e,n)},p:Pe,i:Pe,o:Pe,d(i){i&&O(e)}}}class ky extends Xe{constructor(e){super(),et(this,e,null,Py,tt,{})}}function Ty(t){let e,r,n,i,a;return{c(){e=gt("svg"),r=gt("mask"),n=gt("circle"),i=gt("path"),a=gt("circle"),this.h()},l(o){e=vt(o,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var s=j(e);r=vt(s,"mask",{id:!0});var l=j(r);n=vt(l,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),j(n).forEach(O),i=vt(l,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),j(i).forEach(O),l.forEach(O),a=vt(s,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,mask:!0}),j(a).forEach(O),s.forEach(O),this.h()},h(){B(n,"cx","25"),B(n,"cy","25"),B(n,"r","20"),B(n,"stroke","white"),B(n,"stroke-width","6"),B(n,"fill","none"),B(i,"d","M40,22 L45,27 L50,22"),B(i,"stroke","black"),B(i,"stroke-width","4"),B(i,"fill","none"),B(r,"id","hole"),B(a,"cx","25"),B(a,"cy","25"),B(a,"r","20"),B(a,"stroke","rgba(255,255,255, 0.7)"),B(a,"stroke-width","4"),B(a,"fill","none"),B(a,"mask","url(#hole)"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"fill","rgba(255,255,255, 0.7)"),B(e,"class","h-5 w-5"),B(e,"viewBox","0 0 50 50")},m(o,s){se(o,e,s),T(e,r),T(r,n),T(r,i),T(e,a)},p:Pe,i:Pe,o:Pe,d(o){o&&O(e)}}}class Iy extends Xe{constructor(e){super(),et(this,e,null,Ty,tt,{})}}function xy(t){let e,r,n,i,a,o,s,l,p,f,c,d;return n=new My({}),o=new ky({}),p=new Iy({}),{c(){e=W("div"),r=W("button"),Ve(n.$$.fragment),i=Ee(),a=W("button"),Ve(o.$$.fragment),s=Ee(),l=W("button"),Ve(p.$$.fragment),this.h()},l(g){e=H(g,"DIV",{class:!0});var b=j(e);r=H(b,"BUTTON",{class:!0});var v=j(r);je(n.$$.fragment,v),v.forEach(O),i=Ae(b),a=H(b,"BUTTON",{class:!0});var m=j(a);je(o.$$.fragment,m),m.forEach(O),s=Ae(b),l=H(b,"BUTTON",{class:!0});var D=j(l);je(p.$$.fragment,D),D.forEach(O),b.forEach(O),this.h()},h(){B(r,"class","btn btn-xs"),st(r,"btn-active",t[0].weightMode===pt.Pie),B(a,"class","btn btn-xs"),st(a,"btn-active",t[0].weightMode===pt.Circle),B(l,"class","btn btn-xs"),st(l,"btn-active",t[0].weightMode===pt.Ring),B(e,"class","btn-group btn-group-horizontal w-full flex justify-center p-1")},m(g,b){se(g,e,b),T(e,r),ze(n,r,null),T(e,i),T(e,a),ze(o,a,null),T(e,s),T(e,l),ze(p,l,null),f=!0,c||(d=[De(r,"click",t[2]),De(a,"click",t[3]),De(l,"click",t[4])],c=!0)},p(g,[b]){(!f||b&1)&&st(r,"btn-active",g[0].weightMode===pt.Pie),(!f||b&1)&&st(a,"btn-active",g[0].weightMode===pt.Circle),(!f||b&1)&&st(l,"btn-active",g[0].weightMode===pt.Ring)},i(g){f||(ce(n.$$.fragment,g),ce(o.$$.fragment,g),ce(p.$$.fragment,g),f=!0)},o(g){me(n.$$.fragment,g),me(o.$$.fragment,g),me(p.$$.fragment,g),f=!1},d(g){g&&O(e),qe(n),qe(o),qe(p),c=!1,qt(d)}}}function Ny(t,e,r){let n;$e(t,it,l=>r(0,n=l));function i(l){const p={...n,weightMode:l};it.update(p)}return[n,i,()=>i(pt.Pie),()=>i(pt.Circle),()=>i(pt.Ring)]}class Ly extends Xe{constructor(e){super(),et(this,e,Ny,xy,tt,{})}}function _f(){return _f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_f.apply(this,arguments)}var Vp={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function Xt(t){return typeof t=="number"}function Bn(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function jp(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function zp(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function qp(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Gn(t){return typeof t=="string"}var Jt=Array.isArray;function Yr(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Ms(t){return Array.isArray(t)||Yr(t)}function Ry(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Uy(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Vy(t){return t&&t.constructor.prototype.isRange===!0||!1}function Wf(t){return t&&t.constructor.prototype.isIndex===!0||!1}function jy(t){return typeof t=="boolean"}function zy(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function qy(t){return t&&t.constructor.prototype.isHelp===!0||!1}function Wy(t){return typeof t=="function"}function Hy(t){return t instanceof Date}function $y(t){return t instanceof RegExp}function Gy(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!jp(t)&&!zp(t))}function Ky(t){return t===null}function Hf(t){return t===void 0}function Yy(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Zy(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function Jy(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Qy(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function Xy(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function ew(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function tw(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function rw(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function nw(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function iw(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function aw(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function uw(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function sw(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function ow(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function lw(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function fw(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function cw(t){return t&&t.constructor.prototype.isChain===!0||!1}function hu(t){var e=typeof t;return e==="object"?t===null?"null":Bn(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Sr(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return Sr(r)});if(t instanceof Date)return new Date(t.valueOf());if(Bn(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return hw(t,Sr)}function hw(t,e){var r={};for(var n in t)pu(t,n)&&(r[n]=e(t[n]));return r}function dw(t,e){for(var r in e)pu(e,r)&&(t[r]=e[r]);return t}function Ps(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!Ps(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!Ps(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function pu(t,e){return t&&Object.hasOwnProperty.call(t,e)}function pw(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],a=t[i];a!==void 0&&(r[i]=a)}return r}var gw=["Matrix","Array"],vw=["number","BigNumber","Fraction"],ao=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Vp)};_f(ao,Vp,{MATRIX_OPTIONS:gw,NUMBER_OPTIONS:vw});function xn(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=mw(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){r=r.call(t)},n:function(){var p=r.next();return a=p.done,p},e:function(p){o=!0,s=p},f:function(){try{!a&&r.return!=null&&r.return()}finally{if(o)throw s}}}}function mw(t,e){if(t){if(typeof t=="string")return C0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C0(t,e)}}function C0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wa(t){return wa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wa(t)}function F0(){return!0}function Sn(){return!1}function _a(){}var S0="Argument is not a typed-function.";function Wp(){function t(G){return wa(G)==="object"&&G!==null&&G.constructor===Object}var e=[{name:"number",test:function(Y){return typeof Y=="number"}},{name:"string",test:function(Y){return typeof Y=="string"}},{name:"boolean",test:function(Y){return typeof Y=="boolean"}},{name:"Function",test:function(Y){return typeof Y=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(Y){return Y instanceof Date}},{name:"RegExp",test:function(Y){return Y instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(Y){return Y===null}},{name:"undefined",test:function(Y){return Y===void 0}}],r={name:"any",test:F0,isAny:!0},n,i,a=0,o={createCount:0};function s(G){var Y=n.get(G);if(Y)return Y;var ie='Unknown type "'+G+'"',de=G.toLowerCase(),ue,ve=xn(i),le;try{for(ve.s();!(le=ve.n()).done;)if(ue=le.value,ue.toLowerCase()===de){ie+='. Did you mean "'+ue+'" ?';break}}catch(he){ve.e(he)}finally{ve.f()}throw new TypeError(ie)}function l(G){for(var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",ie=Y?s(Y).index:i.length,de=[],ue=0;ue<G.length;++ue){if(!G[ue]||typeof G[ue].name!="string"||typeof G[ue].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var ve=G[ue].name;if(n.has(ve))throw new TypeError('Duplicate type name "'+ve+'"');de.push(ve),n.set(ve,{name:ve,test:G[ue].test,isAny:G[ue].isAny,index:ie+ue,conversionsTo:[]})}var le=i.slice(ie);i=i.slice(0,ie).concat(de).concat(le);for(var he=ie+de.length;he<i.length;++he)n.get(i[he]).index=he}function p(){n=new Map,i=[],a=0,l([r],!1)}p(),l(e);function f(){var G,Y=xn(i),ie;try{for(Y.s();!(ie=Y.n()).done;)G=ie.value,n.get(G).conversionsTo=[]}catch(de){Y.e(de)}finally{Y.f()}a=0}function c(G){var Y=i.filter(function(ie){var de=n.get(ie);return!de.isAny&&de.test(G)});return Y.length?Y:["any"]}function d(G){return G&&typeof G=="function"&&"_typedFunctionData"in G}function g(G,Y,ie){if(!d(G))throw new TypeError(S0);var de=ie&&ie.exact,ue=Array.isArray(Y)?Y.join(","):Y,ve=C(ue),le=m(ve);if(!de||le in G.signatures){var he=G._typedFunctionData.signatureMap.get(le);if(he)return he}var Me=ve.length,We;if(de){We=[];var ft;for(ft in G.signatures)We.push(G._typedFunctionData.signatureMap.get(ft))}else We=G._typedFunctionData.signatures;for(var Ie=0;Ie<Me;++Ie){var Gt=ve[Ie],Ut=[],nr=void 0,Kt=xn(We),Er;try{for(Kt.s();!(Er=Kt.n()).done;){nr=Er.value;var Yt=A(nr.params,Ie);if(!(!Yt||Gt.restParam&&!Yt.restParam)){if(!Yt.hasAny){var Ar=function(){var vr=w(Yt);if(Gt.types.some(function(On){return!vr.has(On.name)}))return"continue"}();if(Ar==="continue")continue}Ut.push(nr)}}}catch(vr){Kt.e(vr)}finally{Kt.f()}if(We=Ut,We.length===0)break}var dr,pr=xn(We),vn;try{for(pr.s();!(vn=pr.n()).done;)if(dr=vn.value,dr.params.length<=Me)return dr}catch(vr){pr.e(vr)}finally{pr.f()}throw new TypeError("Signature not found (signature: "+(G.name||"unnamed")+"("+m(ve,", ")+"))")}function b(G,Y,ie){return g(G,Y,ie).implementation}function v(G,Y){var ie=s(Y);if(ie.test(G))return G;var de=ie.conversionsTo;if(de.length===0)throw new Error("There are no conversions to "+Y+" defined.");for(var ue=0;ue<de.length;ue++){var ve=s(de[ue].from);if(ve.test(G))return de[ue].convert(G)}throw new Error("Cannot convert "+G+" to "+Y)}function m(G){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return G.map(function(ie){return ie.name}).join(Y)}function D(G){var Y=G.indexOf("...")===0,ie=Y?G.length>3?G.slice(3):"any":G,de=ie.split("|").map(function(he){return s(he.trim())}),ue=!1,ve=Y?"...":"",le=de.map(function(he){return ue=he.isAny||ue,ve+=he.name+"|",{name:he.name,typeIndex:he.index,test:he.test,isAny:he.isAny,conversion:null,conversionIndex:-1}});return{types:le,name:ve.slice(0,-1),hasAny:ue,hasConversion:!1,restParam:Y}}function S(G){var Y=G.types.map(function(le){return le.name}),ie=Q(Y),de=G.hasAny,ue=G.name,ve=ie.map(function(le){var he=s(le.from);return de=he.isAny||de,ue+="|"+le.from,{name:le.from,typeIndex:he.index,test:he.test,isAny:he.isAny,conversion:le,conversionIndex:le.index}});return{types:G.types.concat(ve),name:ue,hasAny:de,hasConversion:ve.length>0,restParam:G.restParam}}function w(G){return G.typeSet||(G.typeSet=new Set,G.types.forEach(function(Y){return G.typeSet.add(Y.name)})),G.typeSet}function C(G){var Y=[];if(typeof G!="string")throw new TypeError("Signatures must be strings");var ie=G.trim();if(ie==="")return Y;for(var de=ie.split(","),ue=0;ue<de.length;++ue){var ve=D(de[ue].trim());if(ve.restParam&&ue!==de.length-1)throw new SyntaxError('Unexpected rest parameter "'+de[ue]+'": only allowed for the last parameter');if(ve.types.length===0)return null;Y.push(ve)}return Y}function F(G){var Y=Qe(G);return Y?Y.restParam:!1}function M(G){if(!G||G.types.length===0)return F0;if(G.types.length===1)return s(G.types[0].name).test;if(G.types.length===2){var Y=s(G.types[0].name).test,ie=s(G.types[1].name).test;return function(ve){return Y(ve)||ie(ve)}}else{var de=G.types.map(function(ue){return s(ue.name).test});return function(ve){for(var le=0;le<de.length;le++)if(de[le](ve))return!0;return!1}}}function P(G){var Y,ie,de;if(F(G)){Y=Ye(G).map(M);var ue=Y.length,ve=M(Qe(G)),le=function(Me){for(var We=ue;We<Me.length;We++)if(!ve(Me[We]))return!1;return!0};return function(Me){for(var We=0;We<Y.length;We++)if(!Y[We](Me[We]))return!1;return le(Me)&&Me.length>=ue+1}}else return G.length===0?function(Me){return Me.length===0}:G.length===1?(ie=M(G[0]),function(Me){return ie(Me[0])&&Me.length===1}):G.length===2?(ie=M(G[0]),de=M(G[1]),function(Me){return ie(Me[0])&&de(Me[1])&&Me.length===2}):(Y=G.map(M),function(Me){for(var We=0;We<Y.length;We++)if(!Y[We](Me[We]))return!1;return Me.length===Y.length})}function A(G,Y){return Y<G.length?G[Y]:F(G)?Qe(G):null}function x(G,Y){var ie=A(G,Y);return ie?w(ie):new Set}function R(G){return G.conversion===null||G.conversion===void 0}function Z(G,Y){var ie=new Set;return G.forEach(function(de){var ue=x(de.params,Y),ve,le=xn(ue),he;try{for(le.s();!(he=le.n()).done;)ve=he.value,ie.add(ve)}catch(Me){le.e(Me)}finally{le.f()}}),ie.has("any")?["any"]:Array.from(ie)}function K(G,Y,ie){var de,ue,ve=G||"unnamed",le=ie,he,Me=function(){var Kt=[];if(le.forEach(function(Yt){var Ar=A(Yt.params,he),dr=M(Ar);(he<Yt.params.length||F(Yt.params))&&dr(Y[he])&&Kt.push(Yt)}),Kt.length===0){if(ue=Z(le,he),ue.length>0){var Er=c(Y[he]);return de=new TypeError("Unexpected type of argument in function "+ve+" (expected: "+ue.join(" or ")+", actual: "+Er.join(" | ")+", index: "+he+")"),de.data={category:"wrongType",fn:ve,index:he,actual:Er,expected:ue},{v:de}}}else le=Kt};for(he=0;he<Y.length;he++){var We=Me();if(wa(We)==="object")return We.v}var ft=le.map(function(nr){return F(nr.params)?1/0:nr.params.length});if(Y.length<Math.min.apply(null,ft))return ue=Z(le,he),de=new TypeError("Too few arguments in function "+ve+" (expected: "+ue.join(" or ")+", index: "+Y.length+")"),de.data={category:"tooFewArgs",fn:ve,index:Y.length,expected:ue},de;var Ie=Math.max.apply(null,ft);if(Y.length>Ie)return de=new TypeError("Too many arguments in function "+ve+" (expected: "+Ie+", actual: "+Y.length+")"),de.data={category:"tooManyArgs",fn:ve,index:Y.length,expectedLength:Ie},de;for(var Gt=[],Ut=0;Ut<Y.length;++Ut)Gt.push(c(Y[Ut]).join("|"));return de=new TypeError('Arguments of type "'+Gt.join(", ")+'" do not match any of the defined signatures of function '+ve+"."),de.data={category:"mismatch",actual:Gt},de}function L(G){for(var Y=i.length+1,ie=0;ie<G.types.length;ie++)R(G.types[ie])&&(Y=Math.min(Y,G.types[ie].typeIndex));return Y}function V(G){for(var Y=a+1,ie=0;ie<G.types.length;ie++)R(G.types[ie])||(Y=Math.min(Y,G.types[ie].conversionIndex));return Y}function q(G,Y){if(G.hasAny){if(!Y.hasAny)return 1}else if(Y.hasAny)return-1;if(G.restParam){if(!Y.restParam)return 1}else if(Y.restParam)return-1;if(G.hasConversion){if(!Y.hasConversion)return 1}else if(Y.hasConversion)return-1;var ie=L(G)-L(Y);if(ie<0)return-1;if(ie>0)return 1;var de=V(G)-V(Y);return de<0?-1:de>0?1:0}function z(G,Y){var ie=G.params,de=Y.params,ue=Qe(ie),ve=Qe(de),le=F(ie),he=F(de);if(le&&ue.hasAny){if(!he||!ve.hasAny)return 1}else if(he&&ve.hasAny)return-1;var Me=0,We=0,ft,Ie=xn(ie),Gt;try{for(Ie.s();!(Gt=Ie.n()).done;)ft=Gt.value,ft.hasAny&&++Me,ft.hasConversion&&++We}catch(Vn){Ie.e(Vn)}finally{Ie.f()}var Ut=0,nr=0,Kt=xn(de),Er;try{for(Kt.s();!(Er=Kt.n()).done;)ft=Er.value,ft.hasAny&&++Ut,ft.hasConversion&&++nr}catch(Vn){Kt.e(Vn)}finally{Kt.f()}if(Me!==Ut)return Me-Ut;if(le&&ue.hasConversion){if(!he||!ve.hasConversion)return 1}else if(he&&ve.hasConversion)return-1;if(We!==nr)return We-nr;if(le){if(!he)return 1}else if(he)return-1;var Yt=(ie.length-de.length)*(le?-1:1);if(Yt!==0)return Yt;for(var Ar=[],dr=0,pr=0;pr<ie.length;++pr){var vn=q(ie[pr],de[pr]);Ar.push(vn),dr+=vn}if(dr!==0)return dr;for(var vr,On=0,Qn=Ar;On<Qn.length;On++)if(vr=Qn[On],vr!==0)return vr;return 0}function Q(G){if(G.length===0)return[];var Y=G.map(s);G.length>1&&Y.sort(function(Me,We){return Me.index-We.index});var ie=Y[0].conversionsTo;if(G.length===1)return ie;ie=ie.concat([]);for(var de=new Set(G),ue=1;ue<Y.length;++ue){var ve=void 0,le=xn(Y[ue].conversionsTo),he;try{for(le.s();!(he=le.n()).done;)ve=he.value,de.has(ve.from)||(ie.push(ve),de.add(ve.from))}catch(Me){le.e(Me)}finally{le.f()}}return ie}function X(G,Y){var ie=Y;if(G.some(function(he){return he.hasConversion})){var de=F(G),ue=G.map(te);ie=function(){for(var Me=[],We=de?arguments.length-1:arguments.length,ft=0;ft<We;ft++)Me[ft]=ue[ft](arguments[ft]);return de&&(Me[We]=arguments[We].map(ue[We])),Y.apply(this,Me)}}var ve=ie;if(F(G)){var le=G.length-1;ve=function(){return ie.apply(this,Je(arguments,0,le).concat([Je(arguments,le)]))}}return ve}function te(G){var Y,ie,de,ue,ve=[],le=[];switch(G.types.forEach(function(he){he.conversion&&(ve.push(s(he.conversion.from).test),le.push(he.conversion.convert))}),le.length){case 0:return function(Me){return Me};case 1:return Y=ve[0],de=le[0],function(Me){return Y(Me)?de(Me):Me};case 2:return Y=ve[0],ie=ve[1],de=le[0],ue=le[1],function(Me){return Y(Me)?de(Me):ie(Me)?ue(Me):Me};default:return function(Me){for(var We=0;We<le.length;We++)if(ve[We](Me))return le[We](Me);return Me}}}function oe(G){function Y(ie,de,ue){if(de<ie.length){var ve=ie[de],le=[];if(ve.restParam){var he=ve.types.filter(R);he.length<ve.types.length&&le.push({types:he,name:"..."+he.map(function(Me){return Me.name}).join("|"),hasAny:he.some(function(Me){return Me.isAny}),hasConversion:!1,restParam:!0}),le.push(ve)}else le=ve.types.map(function(Me){return{types:[Me],name:Me.name,hasAny:Me.isAny,hasConversion:Me.conversion,restParam:!1}});return bt(le,function(Me){return Y(ie,de+1,ue.concat([Me]))})}else return[ue]}return Y(G,0,[])}function _e(G,Y){for(var ie=Math.max(G.length,Y.length),de=0;de<ie;de++){var ue=x(G,de),ve=x(Y,de),le=!1,he=void 0,Me=xn(ve),We;try{for(Me.s();!(We=Me.n()).done;)if(he=We.value,ue.has(he)){le=!0;break}}catch(nr){Me.e(nr)}finally{Me.f()}if(!le)return!1}var ft=G.length,Ie=Y.length,Gt=F(G),Ut=F(Y);return Gt?Ut?ft===Ie:Ie>=ft:Ut?ft>=Ie:ft===Ie}function be(G){return G.map(function(Y){return Mt(Y)?kt(Y.referToSelf.callback):yr(Y)?lt(Y.referTo.references,Y.referTo.callback):Y})}function Be(G,Y,ie){var de=[],ue,ve=xn(G),le;try{for(ve.s();!(le=ve.n()).done;){ue=le.value;var he=ie[ue];if(typeof he!="number")throw new TypeError('No definition for referenced signature "'+ue+'"');if(he=Y[he],typeof he!="function")return!1;de.push(he)}}catch(Me){ve.e(Me)}finally{ve.f()}return de}function ke(G,Y,ie){for(var de=be(G),ue=new Array(de.length).fill(!1),ve=!0;ve;){ve=!1;for(var le=!0,he=0;he<de.length;++he)if(!ue[he]){var Me=de[he];if(Mt(Me))de[he]=Me.referToSelf.callback(ie),de[he].referToSelf=Me.referToSelf,ue[he]=!0,le=!1;else if(yr(Me)){var We=Be(Me.referTo.references,de,Y);We?(de[he]=Me.referTo.callback.apply(this,We),de[he].referTo=Me.referTo,ue[he]=!0,le=!1):ve=!0}}if(le&&ve)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return de}function Te(G){var Y=/\bthis(\(|\.signatures\b)/;Object.keys(G).forEach(function(ie){var de=G[ie];if(Y.test(de.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Le(G,Y){if(o.createCount++,Object.keys(Y).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&Te(Y);var ie=[],de=[],ue={},ve=[],le,he=function(){if(!Object.prototype.hasOwnProperty.call(Y,le))return"continue";var lr=C(le);if(!lr)return"continue";ie.forEach(function(_n){if(_e(_n,lr))throw new TypeError('Conflicting signatures "'+m(_n)+'" and "'+m(lr)+'".')}),ie.push(lr);var Hr=de.length;de.push(Y[le]);var ji=lr.map(S),ei=void 0,qn=xn(oe(ji)),zi;try{for(qn.s();!(zi=qn.n()).done;){ei=zi.value;var Mn=m(ei);ve.push({params:ei,name:Mn,fn:Hr}),ei.every(function(_n){return!_n.hasConversion})&&(ue[Mn]=Hr)}}catch(_n){qn.e(_n)}finally{qn.f()}};for(le in Y)var Me=he();ve.sort(z);var We=ke(de,ue,zn),ft;for(ft in ue)Object.prototype.hasOwnProperty.call(ue,ft)&&(ue[ft]=We[ue[ft]]);for(var Ie=[],Gt=new Map,Ut=0,nr=ve;Ut<nr.length;Ut++)ft=nr[Ut],Gt.has(ft.name)||(ft.fn=We[ft.fn],Ie.push(ft),Gt.set(ft.name,ft));for(var Kt=Ie[0]&&Ie[0].params.length<=2&&!F(Ie[0].params),Er=Ie[1]&&Ie[1].params.length<=2&&!F(Ie[1].params),Yt=Ie[2]&&Ie[2].params.length<=2&&!F(Ie[2].params),Ar=Ie[3]&&Ie[3].params.length<=2&&!F(Ie[3].params),dr=Ie[4]&&Ie[4].params.length<=2&&!F(Ie[4].params),pr=Ie[5]&&Ie[5].params.length<=2&&!F(Ie[5].params),vn=Kt&&Er&&Yt&&Ar&&dr&&pr,vr=0;vr<Ie.length;++vr)Ie[vr].test=P(Ie[vr].params);for(var On=Kt?M(Ie[0].params[0]):Sn,Qn=Er?M(Ie[1].params[0]):Sn,Vn=Yt?M(Ie[2].params[0]):Sn,jn=Ar?M(Ie[3].params[0]):Sn,ta=dr?M(Ie[4].params[0]):Sn,Ui=pr?M(Ie[5].params[0]):Sn,Ia=Kt?M(Ie[0].params[1]):Sn,Or=Er?M(Ie[1].params[1]):Sn,ir=Yt?M(Ie[2].params[1]):Sn,xa=Ar?M(Ie[3].params[1]):Sn,gi=dr?M(Ie[4].params[1]):Sn,mn=pr?M(Ie[5].params[1]):Sn,Xn=0;Xn<Ie.length;++Xn)Ie[Xn].implementation=X(Ie[Xn].params,Ie[Xn].fn);var Vi=Kt?Ie[0].implementation:_a,Na=Er?Ie[1].implementation:_a,La=Yt?Ie[2].implementation:_a,ra=Ar?Ie[3].implementation:_a,Ra=dr?Ie[4].implementation:_a,Ua=pr?Ie[5].implementation:_a,Va=Kt?Ie[0].params.length:-1,ja=Er?Ie[1].params.length:-1,za=Yt?Ie[2].params.length:-1,qa=Ar?Ie[3].params.length:-1,vi=dr?Ie[4].params.length:-1,Wa=pr?Ie[5].params.length:-1,mi=vn?6:0,Ha=Ie.length,$a=Ie.map(function(Cr){return Cr.test}),Ga=Ie.map(function(Cr){return Cr.implementation}),na=function(){for(var lr=mi;lr<Ha;lr++)if($a[lr](arguments))return Ga[lr].apply(this,arguments);return o.onMismatch(G,arguments,Ie)};function zn(Cr,lr){return arguments.length===Va&&On(Cr)&&Ia(lr)?Vi.apply(this,arguments):arguments.length===ja&&Qn(Cr)&&Or(lr)?Na.apply(this,arguments):arguments.length===za&&Vn(Cr)&&ir(lr)?La.apply(this,arguments):arguments.length===qa&&jn(Cr)&&xa(lr)?ra.apply(this,arguments):arguments.length===vi&&ta(Cr)&&gi(lr)?Ra.apply(this,arguments):arguments.length===Wa&&Ui(Cr)&&mn(lr)?Ua.apply(this,arguments):na.apply(this,arguments)}try{Object.defineProperty(zn,"name",{value:G})}catch{}return zn.signatures=ue,zn._typedFunctionData={signatures:Ie,signatureMap:Gt},zn}function Ne(G,Y,ie){throw K(G,Y,ie)}function Ye(G){return Je(G,0,G.length-1)}function Qe(G){return G[G.length-1]}function Je(G,Y,ie){return Array.prototype.slice.call(G,Y,ie)}function ot(G,Y){for(var ie=0;ie<G.length;ie++)if(Y(G[ie]))return G[ie]}function bt(G,Y){return Array.prototype.concat.apply([],G.map(Y))}function Ue(){var G=Ye(arguments).map(function(ie){return m(C(ie))}),Y=Qe(arguments);if(typeof Y!="function")throw new TypeError("Callback function expected as last argument");return lt(G,Y)}function lt(G,Y){return{referTo:{references:G,callback:Y}}}function kt(G){if(typeof G!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:G}}}function yr(G){return G&&wa(G.referTo)==="object"&&Array.isArray(G.referTo.references)&&typeof G.referTo.callback=="function"}function Mt(G){return G&&wa(G.referToSelf)==="object"&&typeof G.referToSelf.callback=="function"}function wr(G,Y){if(!G)return Y;if(Y&&Y!==G){var ie=new Error("Function names do not match (expected: "+G+", actual: "+Y+")");throw ie.data={actual:Y,expected:G},ie}return G}function Ke(G){var Y;for(var ie in G)Object.prototype.hasOwnProperty.call(G,ie)&&(d(G[ie])||typeof G[ie].signature=="string")&&(Y=wr(Y,G[ie].name));return Y}function tr(G,Y){var ie;for(ie in Y)if(Object.prototype.hasOwnProperty.call(Y,ie)){if(ie in G&&Y[ie]!==G[ie]){var de=new Error('Signature "'+ie+'" is defined twice');throw de.data={signature:ie,sourceFunction:Y[ie],destFunction:G[ie]},de}G[ie]=Y[ie]}}var rr=o;o=function(Y){for(var ie=typeof Y=="string",de=ie?1:0,ue=ie?Y:"",ve={},le=de;le<arguments.length;++le){var he=arguments[le],Me={},We=void 0;if(typeof he=="function"?(We=he.name,typeof he.signature=="string"?Me[he.signature]=he:d(he)&&(Me=he.signatures)):t(he)&&(Me=he,ie||(We=Ke(he))),Object.keys(Me).length===0){var ft=new TypeError("Argument to 'typed' at index "+le+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw ft.data={index:le,argument:he},ft}ie||(ue=wr(ue,We)),tr(ve,Me)}return Le(ue||"",ve)},o.create=Wp,o.createCount=rr.createCount,o.onMismatch=Ne,o.throwMismatchError=Ne,o.createError=K,o.clear=p,o.clearConversions=f,o.addTypes=l,o._findType=s,o.referTo=Ue,o.referToSelf=kt,o.convert=v,o.findSignature=g,o.find=b,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function(G,Y){var ie="any";Y!==!1&&n.has("Object")&&(ie="Object"),o.addTypes([G],ie)};function Jr(G){if(!G||typeof G.from!="string"||typeof G.to!="string"||typeof G.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(G.to===G.from)throw new SyntaxError('Illegal to define conversion from "'+G.from+'" to itself.')}return o.addConversion=function(G){Jr(G);var Y=s(G.to);if(Y.conversionsTo.every(function(ie){return ie.from!==G.from}))Y.conversionsTo.push({from:G.from,convert:G.convert,index:a++});else throw new Error('There is already a conversion from "'+G.from+'" to "'+Y.name+'"')},o.addConversions=function(G){G.forEach(o.addConversion)},o.removeConversion=function(G){Jr(G);var Y=s(G.to),ie=ot(Y.conversionsTo,function(ue){return ue.from===G.from});if(!ie)throw new Error("Attempt to remove nonexistent conversion from "+G.from+" to "+G.to);if(ie.convert!==G.convert)throw new Error("Conversion to remove does not match existing conversion");var de=Y.conversionsTo.indexOf(ie);Y.conversionsTo.splice(de,1)},o.resolve=function(G,Y){if(!d(G))throw new TypeError(S0);for(var ie=G._typedFunctionData.signatures,de=0;de<ie.length;++de)if(ie[de].test(Y))return ie[de];return null},o}const B0=Wp();function Br(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function Nl(t,e,r){var n={2:"0b",8:"0o",16:"0x"},i=n[e],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Br(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Br(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),a="i".concat(r)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(i).concat(t.toString(e)).concat(a)}function bf(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",n,i;if(e&&(e.notation&&(r=e.notation),Xt(e)?n=e:Xt(e.precision)&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return bw(t,n);case"exponential":return Hp(t,n);case"engineering":return _w(t,n);case"bin":return Nl(t,2,i);case"oct":return Nl(t,8,i);case"hex":return Nl(t,16,i);case"auto":return Dw(t,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],o=arguments[4];return a!=="."?a+o:o});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function uo(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),a=n.indexOf(".");i+=a!==-1?a-1:n.length-1;var o=n.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return o.length===0&&(o.push(0),i++),{sign:r,coefficients:o,exponent:i}}function _w(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=uo(t),n=so(r,e),i=n.exponent,a=n.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(Xt(e))for(;e>a.length||i-o+1>a.length;)a.push(0);else for(var s=Math.abs(i-o)-(a.length-1),l=0;l<s;l++)a.push(0);for(var p=Math.abs(i-o),f=1;p>0;)f++,p--;var c=a.slice(f).join(""),d=Xt(e)&&c.length||c.match(/[1-9]/)?"."+c:"",g=a.slice(0,f).join("")+d+"e"+(i>=0?"+":"")+o.toString();return n.sign+g}function bw(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=uo(t),n=typeof e=="number"?so(r,r.exponent+1+e):r,i=n.coefficients,a=n.exponent+1,o=a+(e||0);return i.length<o&&(i=i.concat(Aa(o-i.length))),a<0&&(i=Aa(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),n.sign+i.join("")}function Hp(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=uo(t),n=e?so(r,e):r,i=n.coefficients,a=n.exponent;i.length<e&&(i=i.concat(Aa(e-i.length)));var o=i.shift();return n.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function Dw(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=r&&r.lowerExp!==void 0?r.lowerExp:-3,i=r&&r.upperExp!==void 0?r.upperExp:5,a=uo(t),o=e?so(a,e):a;if(o.exponent<n||o.exponent>=i)return Hp(t,e);var s=o.coefficients,l=o.exponent;s.length<e&&(s=s.concat(Aa(e-s.length))),s=s.concat(Aa(l-s.length+1+(s.length<e?e-s.length:0))),s=Aa(-l).concat(s);var p=l>0?l:0;return p<s.length-1&&s.splice(p+1,0,"."),o.sign+s.join("")}function so(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var a=e-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),r.exponent++,a++),a--,n[a]++}}return r}function Aa(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function yw(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var ww=Number.EPSILON||2220446049250313e-31;function ks(t,e,r){if(r==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var n=Math.abs(t-e);return n<ww?!0:n<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}function Ll(t,e,r){var n=t.constructor,i=new n(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Br(r))throw new Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),a="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function Ew(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",n,i;if(e!==void 0&&(e.notation&&(r=e.notation),typeof e=="number"?n=e:e.precision&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Cw(t,n);case"exponential":return O0(t,n);case"engineering":return Aw(t,n);case"bin":return Ll(t,2,i);case"oct":return Ll(t,8,i);case"hex":return Ll(t,16,i);case"auto":{var a=e&&e.lowerExp!==void 0?e.lowerExp:-3,o=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var s,l=t.toSignificantDigits(n),p=l.e;return p>=a&&p<o?s=l.toFixed():s=O0(t,n),s.replace(/((\.\d*?)(0+))($|e)/,function(){var f=arguments[2],c=arguments[4];return f!=="."?f+c:c})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Aw(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),a=i.toPrecision(e);return a.indexOf("e")!==-1&&(a=i.toString()),a+"e"+(r>=0?"+":"")+n.toString()}function O0(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function Cw(t,e){return t.toFixed(e)}function rn(t,e){var r=Fw(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function Fw(t,e){if(typeof t=="number")return bf(t,e);if(Bn(t))return Ew(t,e);if(Sw(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return $p(t,e);if(Gn(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>'"'+n+'": '+rn(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function $p(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=$p(t[i],e);return r+="]",r}else return rn(t,e)}function Sw(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function It(t,e,r){if(!(this instanceof It))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}It.prototype=new RangeError;It.prototype.constructor=RangeError;It.prototype.name="DimensionError";It.prototype.isDimensionError=!0;function ea(t,e,r){if(!(this instanceof ea))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}ea.prototype=new RangeError;ea.prototype.constructor=RangeError;ea.prototype.name="IndexError";ea.prototype.isIndexError=!0;function Ti(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function Gp(t,e,r){var n,i=t.length;if(i!==e[r])throw new It(i,e[r]);if(r<e.length-1){var a=r+1;for(n=0;n<i;n++){var o=t[n];if(!Array.isArray(o))throw new It(e.length-1,e.length,"<");Gp(t[n],e,a)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new It(e.length+1,e.length,">")}function M0(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new It(t.length,0)}else Gp(t,e,0)}function Qt(t,e){if(!Xt(t)||!Br(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new ea(t,e)}function P0(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!Xt(i)||!Br(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+rn(e)+")")});var n=r!==void 0?r:0;return Df(t,e,0,n),t}function Df(t,e,r,n){var i,a,o=t.length,s=e[r],l=Math.min(o,s);if(t.length=s,r<e.length-1){var p=r+1;for(i=0;i<l;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),Df(a,e,p,n);for(i=l;i<s;i++)a=[],t[i]=a,Df(a,e,p,n)}else{for(i=0;i<l;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=l;i<s;i++)t[i]=n}}function Bw(t,e){var r=Mw(t),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new It(0,n,"!=");e=$f(e,n);var i=Kp(e);if(n!==i)throw new It(i,n,"!=");try{return Ow(r,e)}catch(a){throw a instanceof It?new It(i,n,"!="):a}}function $f(t,e){var r=Kp(t),n=t.slice(),i=-1,a=t.indexOf(i),o=t.indexOf(i,a+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var s=a>=0,l=e%r===0;if(s)if(l)n[a]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function Kp(t){return t.reduce((e,r)=>e*r,1)}function Ow(t,e){for(var r=t,n,i=e.length-1;i>0;i--){var a=e[i];n=[];for(var o=r.length/a,s=0;s<o;s++)n.push(r.slice(s*a,(s+1)*a));r=n}return r}function Yp(t,e,r,n){var i=n||Ti(t);if(r)for(var a=0;a<r;a++)t=[t],i.unshift(1);for(t=Zp(t,e,0);i.length<e;)i.push(1);return t}function Zp(t,e,r){var n,i;if(Array.isArray(t)){var a=r+1;for(n=0,i=t.length;n<i;n++)t[n]=Zp(t[n],e,a)}else for(var o=r;o<e;o++)t=[t];return t}function Mw(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function r(n){Array.isArray(n)?n.forEach(r):e.push(n)}),e}function Ts(t,e){for(var r,n=0,i=0;i<t.length;i++){var a=t[i],o=Array.isArray(a);if(i===0&&o&&(n=a.length),o&&a.length!==n)return;var s=o?Ts(a,e):e(a);if(r===void 0)r=s;else if(r!==s)return"mixed"}return r}function Bt(t,e,r,n){function i(a){var o=pw(a,e.map(Tw));return Pw(t,e,a),r(o)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function Pw(t,e,r){var n=e.filter(a=>!kw(a)).every(a=>r[a]!==void 0);if(!n){var i=e.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function kw(t){return t&&t[0]==="?"}function Tw(t){return t&&t[0]==="?"?t.slice(1):t}function Iw(t,e){if(Qp(t)&&Jp(t,e))return t[e];throw typeof t[e]=="function"&&Lw(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function xw(t,e,r){if(Qp(t)&&Jp(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function Nw(t,e){return e in t}function Jp(t,e){return!t||typeof t!="object"?!1:pu(Rw,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Lw(t,e){return t==null||typeof t[e]!="function"||pu(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:pu(Uw,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Qp(t){return typeof t=="object"&&t&&t.constructor===Object}var Rw={length:!0,name:!0},Uw={toString:!0,valueOf:!0,toLocaleString:!0};class Vw{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return Iw(this.wrappedObject,e)}set(e,r){return xw(this.wrappedObject,e,r),this}has(e){return Nw(this.wrappedObject,e)}}function jw(t){return t?t instanceof Map||t instanceof Vw||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var Xp=function(){return Xp=B0.create,B0},zw=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],qw=Bt("typed",zw,function(e){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:a}=e,o=Xp();return o.clear(),o.addTypes([{name:"number",test:Xt},{name:"Complex",test:jp},{name:"BigNumber",test:Bn},{name:"Fraction",test:zp},{name:"Unit",test:qp},{name:"identifier",test:s=>Gn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(s)},{name:"string",test:Gn},{name:"Chain",test:cw},{name:"Array",test:Jt},{name:"Matrix",test:Yr},{name:"DenseMatrix",test:Ry},{name:"SparseMatrix",test:Uy},{name:"Range",test:Vy},{name:"Index",test:Wf},{name:"boolean",test:jy},{name:"ResultSet",test:zy},{name:"Help",test:qy},{name:"function",test:Wy},{name:"Date",test:Hy},{name:"RegExp",test:$y},{name:"null",test:Ky},{name:"undefined",test:Hf},{name:"AccessorNode",test:Yy},{name:"ArrayNode",test:Zy},{name:"AssignmentNode",test:Jy},{name:"BlockNode",test:Qy},{name:"ConditionalNode",test:Xy},{name:"ConstantNode",test:ew},{name:"FunctionNode",test:rw},{name:"FunctionAssignmentNode",test:tw},{name:"IndexNode",test:nw},{name:"Node",test:iw},{name:"ObjectNode",test:aw},{name:"OperatorNode",test:uw},{name:"ParenthesisNode",test:sw},{name:"RangeNode",test:ow},{name:"RelationalNode",test:lw},{name:"SymbolNode",test:fw},{name:"Map",test:jw},{name:"Object",test:Gy}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(r||Rl(l),yw(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new r(l)}},{from:"number",to:"Complex",convert:function(l){return n||gs(l),new n(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return n||gs(l),new n(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return n||gs(l),new n(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){a||Ul(l);var p=new a(l);if(p.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return p}},{from:"string",to:"number",convert:function(l){var p=Number(l);if(isNaN(p))throw new Error('Cannot convert "'+l+'" to a number');return p}},{from:"string",to:"BigNumber",convert:function(l){r||Rl(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){a||Ul(l);try{return new a(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){n||gs(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return r||Rl(l),new r(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return a||Ul(l),new a(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||Ww(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),o.onMismatch=(s,l,p)=>{var f=o.createError(s,l,p);if(["wrongType","mismatch"].includes(f.data.category)&&l.length===1&&Ms(l[0])&&p.some(d=>!d.params.includes(","))){var c=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw c.data=f.data,c}throw f},o.onMismatch=(s,l,p)=>{var f=o.createError(s,l,p);if(["wrongType","mismatch"].includes(f.data.category)&&l.length===1&&Ms(l[0])&&p.some(d=>!d.params.includes(","))){var c=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw c.data=f.data,c}throw f},o});function Rl(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function gs(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function Ww(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Ul(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Ea=9e15,Li=1e9,yf="0123456789abcdef",Is="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",xs="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",wf={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ea,maxE:Ea,crypto:!1},e1,hi,ct=!0,oo="[DecimalError] ",Ii=oo+"Invalid argument: ",t1=oo+"Precision limit exceeded",r1=oo+"crypto unavailable",n1="[object Decimal]",Wr=Math.floor,br=Math.pow,Hw=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,$w=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Gw=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,i1=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Rn=1e7,nt=7,Kw=9007199254740991,Yw=Is.length-1,Ef=xs.length-1,Se={toStringTag:n1};Se.absoluteValue=Se.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Ze(t)};Se.ceil=function(){return Ze(new this.constructor(this),this.e+1,2)};Se.clampedTo=Se.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Ii+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};Se.comparedTo=Se.cmp=function(t){var e,r,n,i,a=this,o=a.d,s=(t=new a.constructor(t)).d,l=a.s,p=t.s;if(!o||!s)return!l||!p?NaN:l!==p?l:o===s?0:!o^l<0?1:-1;if(!o[0]||!s[0])return o[0]?l:s[0]?-p:0;if(l!==p)return l;if(a.e!==t.e)return a.e>t.e^l<0?1:-1;for(n=o.length,i=s.length,e=0,r=n<i?n:i;e<r;++e)if(o[e]!==s[e])return o[e]>s[e]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1};Se.cosine=Se.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+nt,n.rounding=1,r=Zw(n,l1(n,r)),n.precision=t,n.rounding=e,Ze(hi==2||hi==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};Se.cubeRoot=Se.cbrt=function(){var t,e,r,n,i,a,o,s,l,p,f=this,c=f.constructor;if(!f.isFinite()||f.isZero())return new c(f);for(ct=!1,a=f.s*br(f.s*f,1/3),!a||Math.abs(a)==1/0?(r=Rr(f.d),t=f.e,(a=(t-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=br(r,1/3),t=Wr((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?r="5e"+t:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new c(r),n.s=f.s):n=new c(a.toString()),o=(t=c.precision)+3;;)if(s=n,l=s.times(s).times(s),p=l.plus(f),n=Rt(p.plus(f).times(s),p.plus(l),o+2,1),Rr(s.d).slice(0,o)===(r=Rr(n.d)).slice(0,o))if(r=r.slice(o-3,o+1),r=="9999"||!i&&r=="4999"){if(!i&&(Ze(s,t+1,0),s.times(s).times(s).eq(f))){n=s;break}o+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Ze(n,t+1,1),e=!n.times(n).times(n).eq(f));break}return ct=!0,Ze(n,t,c.rounding,e)};Se.decimalPlaces=Se.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-Wr(this.e/nt))*nt,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};Se.dividedBy=Se.div=function(t){return Rt(this,new this.constructor(t))};Se.dividedToIntegerBy=Se.divToInt=function(t){var e=this,r=e.constructor;return Ze(Rt(e,new r(t),0,1,1),r.precision,r.rounding)};Se.equals=Se.eq=function(t){return this.cmp(t)===0};Se.floor=function(){return Ze(new this.constructor(this),this.e+1,3)};Se.greaterThan=Se.gt=function(t){return this.cmp(t)>0};Se.greaterThanOrEqualTo=Se.gte=function(t){var e=this.cmp(t);return e==1||e===0};Se.hyperbolicCosine=Se.cosh=function(){var t,e,r,n,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;r=o.precision,n=o.rounding,o.precision=r+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/fo(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=Sa(o,1,a.times(e),new o(1),!0);for(var l,p=t,f=new o(8);p--;)l=a.times(a),a=s.minus(l.times(f.minus(l.times(f))));return Ze(a,o.precision=r,o.rounding=n,!0)};Se.hyperbolicSine=Se.sinh=function(){var t,e,r,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,r=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=Sa(a,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/fo(5,t)),i=Sa(a,2,i,i,!0);for(var o,s=new a(5),l=new a(16),p=new a(20);t--;)o=i.times(i),i=i.times(s.plus(o.times(l.times(o).plus(p))))}return a.precision=e,a.rounding=r,Ze(i,e,r,!0)};Se.hyperbolicTangent=Se.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,Rt(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};Se.inverseCosine=Se.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),i=r.precision,a=r.rounding;return n!==-1?n===0?e.isNeg()?Nn(r,i,a):new r(0):new r(NaN):e.isZero()?Nn(r,i+4,a).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),t=Nn(r,i+4,a).times(.5),r.precision=i,r.rounding=a,t.minus(e))};Se.inverseHyperbolicCosine=Se.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,ct=!1,r=r.times(r).minus(1).sqrt().plus(r),ct=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};Se.inverseHyperbolicSine=Se.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,ct=!1,r=r.times(r).plus(1).sqrt().plus(r),ct=!0,n.precision=t,n.rounding=e,r.ln())};Se.inverseHyperbolicTangent=Se.atanh=function(){var t,e,r,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?Ze(new a(i),t,e,!0):(a.precision=r=n-i.e,i=Rt(i.plus(1),new a(1).minus(i),r+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};Se.inverseSine=Se.asin=function(){var t,e,r,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),r=a.precision,n=a.rounding,e!==-1?e===0?(t=Nn(a,r+4,n).times(.5),t.s=i.s,t):new a(NaN):(a.precision=r+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,i.times(2)))};Se.inverseTangent=Se.atan=function(){var t,e,r,n,i,a,o,s,l,p=this,f=p.constructor,c=f.precision,d=f.rounding;if(p.isFinite()){if(p.isZero())return new f(p);if(p.abs().eq(1)&&c+4<=Ef)return o=Nn(f,c+4,d).times(.25),o.s=p.s,o}else{if(!p.s)return new f(NaN);if(c+4<=Ef)return o=Nn(f,c+4,d).times(.5),o.s=p.s,o}for(f.precision=s=c+10,f.rounding=1,r=Math.min(28,s/nt+2|0),t=r;t;--t)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(ct=!1,e=Math.ceil(s/nt),n=1,l=p.times(p),o=new f(p),i=p;t!==-1;)if(i=i.times(l),a=o.minus(i.div(n+=2)),i=i.times(l),o=a.plus(i.div(n+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return r&&(o=o.times(2<<r-1)),ct=!0,Ze(o,f.precision=c,f.rounding=d,!0)};Se.isFinite=function(){return!!this.d};Se.isInteger=Se.isInt=function(){return!!this.d&&Wr(this.e/nt)>this.d.length-2};Se.isNaN=function(){return!this.s};Se.isNegative=Se.isNeg=function(){return this.s<0};Se.isPositive=Se.isPos=function(){return this.s>0};Se.isZero=function(){return!!this.d&&this.d[0]===0};Se.lessThan=Se.lt=function(t){return this.cmp(t)<0};Se.lessThanOrEqualTo=Se.lte=function(t){return this.cmp(t)<1};Se.logarithm=Se.log=function(t){var e,r,n,i,a,o,s,l,p=this,f=p.constructor,c=f.precision,d=f.rounding,g=5;if(t==null)t=new f(10),e=!0;else{if(t=new f(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new f(NaN);e=t.eq(10)}if(r=p.d,p.s<0||!r||!r[0]||p.eq(1))return new f(r&&!r[0]?-1/0:p.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)a=!0;else{for(i=r[0];i%10===0;)i/=10;a=i!==1}if(ct=!1,s=c+g,o=Oi(p,s),n=e?Ns(f,s+10):Oi(t,s),l=Rt(o,n,s,1),gu(l.d,i=c,d))do if(s+=10,o=Oi(p,s),n=e?Ns(f,s+10):Oi(t,s),l=Rt(o,n,s,1),!a){+Rr(l.d).slice(i+1,i+15)+1==1e14&&(l=Ze(l,c+1,0));break}while(gu(l.d,i+=10,d));return ct=!0,Ze(l,c,d)};Se.minus=Se.sub=function(t){var e,r,n,i,a,o,s,l,p,f,c,d,g=this,b=g.constructor;if(t=new b(t),!g.d||!t.d)return!g.s||!t.s?t=new b(NaN):g.d?t.s=-t.s:t=new b(t.d||g.s!==t.s?g:NaN),t;if(g.s!=t.s)return t.s=-t.s,g.plus(t);if(p=g.d,d=t.d,s=b.precision,l=b.rounding,!p[0]||!d[0]){if(d[0])t.s=-t.s;else if(p[0])t=new b(g);else return new b(l===3?-0:0);return ct?Ze(t,s,l):t}if(r=Wr(t.e/nt),f=Wr(g.e/nt),p=p.slice(),a=f-r,a){for(c=a<0,c?(e=p,a=-a,o=d.length):(e=d,r=f,o=p.length),n=Math.max(Math.ceil(s/nt),o)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=p.length,o=d.length,c=n<o,c&&(o=n),n=0;n<o;n++)if(p[n]!=d[n]){c=p[n]<d[n];break}a=0}for(c&&(e=p,p=d,d=e,t.s=-t.s),o=p.length,n=d.length-o;n>0;--n)p[o++]=0;for(n=d.length;n>a;){if(p[--n]<d[n]){for(i=n;i&&p[--i]===0;)p[i]=Rn-1;--p[i],p[n]+=Rn}p[n]-=d[n]}for(;p[--o]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=lo(p,r),ct?Ze(t,s,l):t):new b(l===3?-0:0)};Se.modulo=Se.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?Ze(new n(r),n.precision,n.rounding):(ct=!1,n.modulo==9?(e=Rt(r,t.abs(),0,3,1),e.s*=t.s):e=Rt(r,t,0,n.modulo,1),e=e.times(t),ct=!0,r.minus(e))};Se.naturalExponential=Se.exp=function(){return Af(this)};Se.naturalLogarithm=Se.ln=function(){return Oi(this)};Se.negated=Se.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Ze(t)};Se.plus=Se.add=function(t){var e,r,n,i,a,o,s,l,p,f,c=this,d=c.constructor;if(t=new d(t),!c.d||!t.d)return!c.s||!t.s?t=new d(NaN):c.d||(t=new d(t.d||c.s===t.s?c:NaN)),t;if(c.s!=t.s)return t.s=-t.s,c.minus(t);if(p=c.d,f=t.d,s=d.precision,l=d.rounding,!p[0]||!f[0])return f[0]||(t=new d(c)),ct?Ze(t,s,l):t;if(a=Wr(c.e/nt),n=Wr(t.e/nt),p=p.slice(),i=a-n,i){for(i<0?(r=p,i=-i,o=f.length):(r=f,n=a,o=p.length),a=Math.ceil(s/nt),o=a>o?a+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=p.length,i=f.length,o-i<0&&(i=o,r=f,f=p,p=r),e=0;i;)e=(p[--i]=p[i]+f[i]+e)/Rn|0,p[i]%=Rn;for(e&&(p.unshift(e),++n),o=p.length;p[--o]==0;)p.pop();return t.d=p,t.e=lo(p,n),ct?Ze(t,s,l):t};Se.precision=Se.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ii+t);return r.d?(e=a1(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};Se.round=function(){var t=this,e=t.constructor;return Ze(new e(t),t.e+1,e.rounding)};Se.sine=Se.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+nt,n.rounding=1,r=Qw(n,l1(n,r)),n.precision=t,n.rounding=e,Ze(hi>2?r.neg():r,t,e,!0)):new n(NaN)};Se.squareRoot=Se.sqrt=function(){var t,e,r,n,i,a,o=this,s=o.d,l=o.e,p=o.s,f=o.constructor;if(p!==1||!s||!s[0])return new f(!p||p<0&&(!s||s[0])?NaN:s?o:1/0);for(ct=!1,p=Math.sqrt(+o),p==0||p==1/0?(e=Rr(s),(e.length+l)%2==0&&(e+="0"),p=Math.sqrt(e),l=Wr((l+1)/2)-(l<0||l%2),p==1/0?e="5e"+l:(e=p.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new f(e)):n=new f(p.toString()),r=(l=f.precision)+3;;)if(a=n,n=a.plus(Rt(o,a,r+2,1)).times(.5),Rr(a.d).slice(0,r)===(e=Rr(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(Ze(a,l+1,0),a.times(a).eq(o))){n=a;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ze(n,l+1,1),t=!n.times(n).eq(o));break}return ct=!0,Ze(n,l,f.rounding,t)};Se.tangent=Se.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=Rt(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,Ze(hi==2||hi==4?r.neg():r,t,e,!0)):new n(NaN)};Se.times=Se.mul=function(t){var e,r,n,i,a,o,s,l,p,f=this,c=f.constructor,d=f.d,g=(t=new c(t)).d;if(t.s*=f.s,!d||!d[0]||!g||!g[0])return new c(!t.s||d&&!d[0]&&!g||g&&!g[0]&&!d?NaN:!d||!g?t.s/0:t.s*0);for(r=Wr(f.e/nt)+Wr(t.e/nt),l=d.length,p=g.length,l<p&&(a=d,d=g,g=a,o=l,l=p,p=o),a=[],o=l+p,n=o;n--;)a.push(0);for(n=p;--n>=0;){for(e=0,i=l+n;i>n;)s=a[i]+g[n]*d[i-n-1]+e,a[i--]=s%Rn|0,e=s/Rn|0;a[i]=(a[i]+e)%Rn|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=lo(a,r),ct?Ze(t,c.precision,c.rounding):t};Se.toBinary=function(t,e){return Gf(this,2,t,e)};Se.toDecimalPlaces=Se.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(un(t,0,Li),e===void 0?e=n.rounding:un(e,0,8),Ze(r,t+r.e+1,e))};Se.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Yn(n,!0):(un(t,0,Li),e===void 0?e=i.rounding:un(e,0,8),n=Ze(new i(n),t+1,e),r=Yn(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};Se.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?r=Yn(i):(un(t,0,Li),e===void 0?e=a.rounding:un(e,0,8),n=Ze(new a(i),t+i.e+1,e),r=Yn(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};Se.toFraction=function(t){var e,r,n,i,a,o,s,l,p,f,c,d,g=this,b=g.d,v=g.constructor;if(!b)return new v(g);if(p=r=new v(1),n=l=new v(0),e=new v(n),a=e.e=a1(b)-g.e-1,o=a%nt,e.d[0]=br(10,o<0?nt+o:o),t==null)t=a>0?e:p;else{if(s=new v(t),!s.isInt()||s.lt(p))throw Error(Ii+s);t=s.gt(e)?a>0?e:p:s}for(ct=!1,s=new v(Rr(b)),f=v.precision,v.precision=a=b.length*nt*2;c=Rt(s,e,0,1,1),i=r.plus(c.times(n)),i.cmp(t)!=1;)r=n,n=i,i=p,p=l.plus(c.times(i)),l=i,i=e,e=s.minus(c.times(i)),s=i;return i=Rt(t.minus(r),n,0,1,1),l=l.plus(i.times(p)),r=r.plus(i.times(n)),l.s=p.s=g.s,d=Rt(p,n,a,1).minus(g).abs().cmp(Rt(l,r,a,1).minus(g).abs())<1?[p,n]:[l,r],v.precision=f,ct=!0,d};Se.toHexadecimal=Se.toHex=function(t,e){return Gf(this,16,t,e)};Se.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:un(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(ct=!1,r=Rt(r,t,0,e,1).times(t),ct=!0,Ze(r)):(t.s=r.s,r=t),r};Se.toNumber=function(){return+this};Se.toOctal=function(t,e){return Gf(this,8,t,e)};Se.toPower=Se.pow=function(t){var e,r,n,i,a,o,s=this,l=s.constructor,p=+(t=new l(t));if(!s.d||!t.d||!s.d[0]||!t.d[0])return new l(br(+s,p));if(s=new l(s),s.eq(1))return s;if(n=l.precision,a=l.rounding,t.eq(1))return Ze(s,n,a);if(e=Wr(t.e/nt),e>=t.d.length-1&&(r=p<0?-p:p)<=Kw)return i=u1(l,s,r,n),t.s<0?new l(1).div(i):Ze(i,n,a);if(o=s.s,o<0){if(e<t.d.length-1)return new l(NaN);if(t.d[e]&1||(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return r=br(+s,p),e=r==0||!isFinite(r)?Wr(p*(Math.log("0."+Rr(s.d))/Math.LN10+s.e+1)):new l(r+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?o/0:0):(ct=!1,l.rounding=s.s=1,r=Math.min(12,(e+"").length),i=Af(t.times(Oi(s,n+r)),n),i.d&&(i=Ze(i,n+5,1),gu(i.d,n,a)&&(e=n+10,i=Ze(Af(t.times(Oi(s,e+r)),e),e+5,1),+Rr(i.d).slice(n+1,n+15)+1==1e14&&(i=Ze(i,n+1,0)))),i.s=o,ct=!0,l.rounding=a,Ze(i,n,a))};Se.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Yn(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(un(t,1,Li),e===void 0?e=i.rounding:un(e,0,8),n=Ze(new i(n),t,e),r=Yn(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};Se.toSignificantDigits=Se.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(un(t,1,Li),e===void 0?e=n.rounding:un(e,0,8)),Ze(new n(r),t,e)};Se.toString=function(){var t=this,e=t.constructor,r=Yn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};Se.truncated=Se.trunc=function(){return Ze(new this.constructor(this),this.e+1,1)};Se.valueOf=Se.toJSON=function(){var t=this,e=t.constructor,r=Yn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function Rr(t){var e,r,n,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)n=t[e]+"",r=nt-n.length,r&&(a+=Si(r)),a+=n;o=t[e],n=o+"",r=nt-n.length,r&&(a+=Si(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function un(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Ii+t)}function gu(t,e,r,n){var i,a,o,s;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=nt,i=0):(i=Math.ceil((e+1)/nt),e%=nt),a=br(10,nt-e),s=t[i]%a|0,n==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=r<4&&s==99999||r>3&&s==49999||s==5e4||s==0):o=(r<4&&s+1==a||r>3&&s+1==a/2)&&(t[i+1]/a/100|0)==br(10,e-2)-1||(s==a/2||s==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(n||r<4)&&s==9999||!n&&r>3&&s==4999):o=((n||r<4)&&s+1==a||!n&&r>3&&s+1==a/2)&&(t[i+1]/a/1e3|0)==br(10,e-3)-1,o}function As(t,e,r){for(var n,i=[0],a,o=0,s=t.length;o<s;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=yf.indexOf(t.charAt(o++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function Zw(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/fo(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=Sa(t,1,e.times(i),new t(1));for(var a=r;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=r,e}var Rt=function(){function t(n,i,a){var o,s=0,l=n.length;for(n=n.slice();l--;)o=n[l]*i+s,n[l]=o%a|0,s=o/a|0;return s&&n.unshift(s),n}function e(n,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(n[s]!=i[s]){l=n[s]>i[s]?1:-1;break}return l}function r(n,i,a,o){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*o+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o,s,l){var p,f,c,d,g,b,v,m,D,S,w,C,F,M,P,A,x,R,Z,K,L=n.constructor,V=n.s==i.s?1:-1,q=n.d,z=i.d;if(!q||!q[0]||!z||!z[0])return new L(!n.s||!i.s||(q?z&&q[0]==z[0]:!z)?NaN:q&&q[0]==0||!z?V*0:V/0);for(l?(g=1,f=n.e-i.e):(l=Rn,g=nt,f=Wr(n.e/g)-Wr(i.e/g)),Z=z.length,x=q.length,D=new L(V),S=D.d=[],c=0;z[c]==(q[c]||0);c++);if(z[c]>(q[c]||0)&&f--,a==null?(M=a=L.precision,o=L.rounding):s?M=a+(n.e-i.e)+1:M=a,M<0)S.push(1),b=!0;else{if(M=M/g+2|0,c=0,Z==1){for(d=0,z=z[0],M++;(c<x||d)&&M--;c++)P=d*l+(q[c]||0),S[c]=P/z|0,d=P%z|0;b=d||c<x}else{for(d=l/(z[0]+1)|0,d>1&&(z=t(z,d,l),q=t(q,d,l),Z=z.length,x=q.length),A=Z,w=q.slice(0,Z),C=w.length;C<Z;)w[C++]=0;K=z.slice(),K.unshift(0),R=z[0],z[1]>=l/2&&++R;do d=0,p=e(z,w,Z,C),p<0?(F=w[0],Z!=C&&(F=F*l+(w[1]||0)),d=F/R|0,d>1?(d>=l&&(d=l-1),v=t(z,d,l),m=v.length,C=w.length,p=e(v,w,m,C),p==1&&(d--,r(v,Z<m?K:z,m,l))):(d==0&&(p=d=1),v=z.slice()),m=v.length,m<C&&v.unshift(0),r(w,v,C,l),p==-1&&(C=w.length,p=e(z,w,Z,C),p<1&&(d++,r(w,Z<C?K:z,C,l))),C=w.length):p===0&&(d++,w=[0]),S[c++]=d,p&&w[0]?w[C++]=q[A]||0:(w=[q[A]],C=1);while((A++<x||w[0]!==void 0)&&M--);b=w[0]!==void 0}S[0]||S.shift()}if(g==1)D.e=f,e1=b;else{for(c=1,d=S[0];d>=10;d/=10)c++;D.e=c+f*g-1,Ze(D,s?a+D.e+1:a,o,b)}return D}}();function Ze(t,e,r,n){var i,a,o,s,l,p,f,c,d,g=t.constructor;e:if(e!=null){if(c=t.d,!c)return t;for(i=1,s=c[0];s>=10;s/=10)i++;if(a=e-i,a<0)a+=nt,o=e,f=c[d=0],l=f/br(10,i-o-1)%10|0;else if(d=Math.ceil((a+1)/nt),s=c.length,d>=s)if(n){for(;s++<=d;)c.push(0);f=l=0,i=1,a%=nt,o=a-nt+1}else break e;else{for(f=s=c[d],i=1;s>=10;s/=10)i++;a%=nt,o=a-nt+i,l=o<0?0:f/br(10,i-o-1)%10|0}if(n=n||e<0||c[d+1]!==void 0||(o<0?f:f%br(10,i-o-1)),p=r<4?(l||n)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||n||r==6&&(a>0?o>0?f/br(10,i-o):0:c[d-1])%10&1||r==(t.s<0?8:7)),e<1||!c[0])return c.length=0,p?(e-=t.e+1,c[0]=br(10,(nt-e%nt)%nt),t.e=-e||0):c[0]=t.e=0,t;if(a==0?(c.length=d,s=1,d--):(c.length=d+1,s=br(10,nt-a),c[d]=o>0?(f/br(10,i-o)%br(10,o)|0)*s:0),p)for(;;)if(d==0){for(a=1,o=c[0];o>=10;o/=10)a++;for(o=c[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(t.e++,c[0]==Rn&&(c[0]=1));break}else{if(c[d]+=s,c[d]!=Rn)break;c[d--]=0,s=1}for(a=c.length;c[--a]===0;)c.pop()}return ct&&(t.e>g.maxE?(t.d=null,t.e=NaN):t.e<g.minE&&(t.e=0,t.d=[0])),t}function Yn(t,e,r){if(!t.isFinite())return o1(t);var n,i=t.e,a=Rr(t.d),o=a.length;return e?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+Si(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+Si(-i-1)+a,r&&(n=r-o)>0&&(a+=Si(n))):i>=o?(a+=Si(i+1-o),r&&(n=r-i-1)>0&&(a=a+"."+Si(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(a+="."),a+=Si(n))),a}function lo(t,e){var r=t[0];for(e*=nt;r>=10;r/=10)e++;return e}function Ns(t,e,r){if(e>Yw)throw ct=!0,r&&(t.precision=r),Error(t1);return Ze(new t(Is),e,1,!0)}function Nn(t,e,r){if(e>Ef)throw Error(t1);return Ze(new t(xs),e,r,!0)}function a1(t){var e=t.length-1,r=e*nt+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function Si(t){for(var e="";t--;)e+="0";return e}function u1(t,e,r,n){var i,a=new t(1),o=Math.ceil(n/nt+4);for(ct=!1;;){if(r%2&&(a=a.times(e),T0(a.d,o)&&(i=!0)),r=Wr(r/2),r===0){r=a.d.length-1,i&&a.d[r]===0&&++a.d[r];break}e=e.times(e),T0(e.d,o)}return ct=!0,a}function k0(t){return t.d[t.d.length-1]&1}function s1(t,e,r){for(var n,i=new t(e[0]),a=0;++a<e.length;)if(n=new t(e[a]),n.s)i[r](n)&&(i=n);else{i=n;break}return i}function Af(t,e){var r,n,i,a,o,s,l,p=0,f=0,c=0,d=t.constructor,g=d.rounding,b=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(ct=!1,l=b):l=e,s=new d(.03125);t.e>-2;)t=t.times(s),c+=5;for(n=Math.log(br(2,c))/Math.LN10*2+5|0,l+=n,r=a=o=new d(1),d.precision=l;;){if(a=Ze(a.times(t),l,1),r=r.times(++f),s=o.plus(Rt(a,r,l,1)),Rr(s.d).slice(0,l)===Rr(o.d).slice(0,l)){for(i=c;i--;)o=Ze(o.times(o),l,1);if(e==null)if(p<3&&gu(o.d,l-n,g,p))d.precision=l+=10,r=a=s=new d(1),f=0,p++;else return Ze(o,d.precision=b,g,ct=!0);else return d.precision=b,o}o=s}}function Oi(t,e){var r,n,i,a,o,s,l,p,f,c,d,g=1,b=10,v=t,m=v.d,D=v.constructor,S=D.rounding,w=D.precision;if(v.s<0||!m||!m[0]||!v.e&&m[0]==1&&m.length==1)return new D(m&&!m[0]?-1/0:v.s!=1?NaN:m?0:v);if(e==null?(ct=!1,f=w):f=e,D.precision=f+=b,r=Rr(m),n=r.charAt(0),Math.abs(a=v.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(t),r=Rr(v.d),n=r.charAt(0),g++;a=v.e,n>1?(v=new D("0."+r),a++):v=new D(n+"."+r.slice(1))}else return p=Ns(D,f+2,w).times(a+""),v=Oi(new D(n+"."+r.slice(1)),f-b).plus(p),D.precision=w,e==null?Ze(v,w,S,ct=!0):v;for(c=v,l=o=v=Rt(v.minus(1),v.plus(1),f,1),d=Ze(v.times(v),f,1),i=3;;){if(o=Ze(o.times(d),f,1),p=l.plus(Rt(o,new D(i),f,1)),Rr(p.d).slice(0,f)===Rr(l.d).slice(0,f))if(l=l.times(2),a!==0&&(l=l.plus(Ns(D,f+2,w).times(a+""))),l=Rt(l,new D(g),f,1),e==null)if(gu(l.d,f-b,S,s))D.precision=f+=b,p=o=v=Rt(c.minus(1),c.plus(1),f,1),d=Ze(v.times(v),f,1),i=s=1;else return Ze(l,D.precision=w,S,ct=!0);else return D.precision=w,l;l=p,i+=2}}function o1(t){return String(t.s*t.s/0)}function Cf(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%nt,r<0&&(n+=nt),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=nt;n<i;)t.d.push(+e.slice(n,n+=nt));e=e.slice(n),n=nt-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),ct&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Jw(t,e){var r,n,i,a,o,s,l,p,f;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),i1.test(e))return Cf(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if($w.test(e))r=16,e=e.toLowerCase();else if(Hw.test(e))r=2;else if(Gw.test(e))r=8;else throw Error(Ii+e);for(a=e.search(/p/i),a>0?(l=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,n=t.constructor,o&&(e=e.replace(".",""),s=e.length,a=s-a,i=u1(n,new n(r),a,a*2)),p=As(e,r,Rn),f=p.length-1,a=f;p[a]===0;--a)p.pop();return a<0?new n(t.s*0):(t.e=lo(p,f),t.d=p,ct=!1,o&&(t=Rt(t,i,s*4)),l&&(t=t.times(Math.abs(l)<54?br(2,l):Ba.pow(2,l))),ct=!0,t)}function Qw(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:Sa(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/fo(5,r)),e=Sa(t,2,e,e);for(var i,a=new t(5),o=new t(16),s=new t(20);r--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(s))));return e}function Sa(t,e,r,n,i){var a,o,s,l,p=t.precision,f=Math.ceil(p/nt);for(ct=!1,l=r.times(r),s=new t(n);;){if(o=Rt(s.times(l),new t(e++*e++),p,1),s=i?n.plus(o):n.minus(o),n=Rt(o.times(l),new t(e++*e++),p,1),o=s.plus(n),o.d[f]!==void 0){for(a=f;o.d[a]===s.d[a]&&a--;);if(a==-1)break}a=s,s=n,n=o,o=a}return ct=!0,o.d.length=f+1,o}function fo(t,e){for(var r=t;--e;)r*=t;return r}function l1(t,e){var r,n=e.s<0,i=Nn(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return hi=n?4:1,e;if(r=e.divToInt(i),r.isZero())hi=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(a))return hi=k0(r)?n?2:3:n?4:1,e;hi=k0(r)?n?1:4:n?3:2}return e.minus(i).abs()}function Gf(t,e,r,n){var i,a,o,s,l,p,f,c,d,g=t.constructor,b=r!==void 0;if(b?(un(r,1,Li),n===void 0?n=g.rounding:un(n,0,8)):(r=g.precision,n=g.rounding),!t.isFinite())f=o1(t);else{for(f=Yn(t),o=f.indexOf("."),b?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,o>=0&&(f=f.replace(".",""),d=new g(1),d.e=f.length-o,d.d=As(Yn(d),10,i),d.e=d.d.length),c=As(f,10,i),a=l=c.length;c[--l]==0;)c.pop();if(!c[0])f=b?"0p+0":"0";else{if(o<0?a--:(t=new g(t),t.d=c,t.e=a,t=Rt(t,d,r,n,0,i),c=t.d,a=t.e,p=e1),o=c[r],s=i/2,p=p||c[r+1]!==void 0,p=n<4?(o!==void 0||p)&&(n===0||n===(t.s<0?3:2)):o>s||o===s&&(n===4||p||n===6&&c[r-1]&1||n===(t.s<0?8:7)),c.length=r,p)for(;++c[--r]>i-1;)c[r]=0,r||(++a,c.unshift(1));for(l=c.length;!c[l-1];--l);for(o=0,f="";o<l;o++)f+=yf.charAt(c[o]);if(b){if(l>1)if(e==16||e==8){for(o=e==16?4:3,--l;l%o;l++)f+="0";for(c=As(f,i,e),l=c.length;!c[l-1];--l);for(o=1,f="1.";o<l;o++)f+=yf.charAt(c[o])}else f=f.charAt(0)+"."+f.slice(1);f=f+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)f="0"+f;f="0."+f}else if(++a>l)for(a-=l;a--;)f+="0";else a<l&&(f=f.slice(0,a)+"."+f.slice(a))}f=(e==16?"0x":e==2?"0b":e==8?"0o":"")+f}return t.s<0?"-"+f:f}function T0(t,e){if(t.length>e)return t.length=e,!0}function Xw(t){return new this(t).abs()}function eE(t){return new this(t).acos()}function tE(t){return new this(t).acosh()}function rE(t,e){return new this(t).plus(e)}function nE(t){return new this(t).asin()}function iE(t){return new this(t).asinh()}function aE(t){return new this(t).atan()}function uE(t){return new this(t).atanh()}function sE(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,a=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=Nn(this,a,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?Nn(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=Nn(this,a,1).times(.5),r.s=t.s):e.s<0?(this.precision=a,this.rounding=1,r=this.atan(Rt(t,e,a,1)),e=Nn(this,a,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(Rt(t,e,a,1)),r}function oE(t){return new this(t).cbrt()}function lE(t){return Ze(t=new this(t),t.e+1,2)}function fE(t,e,r){return new this(t).clamp(e,r)}function cE(t){if(!t||typeof t!="object")throw Error(oo+"Object expected");var e,r,n,i=t.defaults===!0,a=["precision",1,Li,"rounding",0,8,"toExpNeg",-Ea,0,"toExpPos",0,Ea,"maxE",0,Ea,"minE",-Ea,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(r=a[e],i&&(this[r]=wf[r]),(n=t[r])!==void 0)if(Wr(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Ii+r+": "+n);if(r="crypto",i&&(this[r]=wf[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(r1);else this[r]=!1;else throw Error(Ii+r+": "+n);return this}function hE(t){return new this(t).cos()}function dE(t){return new this(t).cosh()}function f1(t){var e,r,n;function i(a){var o,s,l,p=this;if(!(p instanceof i))return new i(a);if(p.constructor=i,I0(a)){p.s=a.s,ct?!a.d||a.e>i.maxE?(p.e=NaN,p.d=null):a.e<i.minE?(p.e=0,p.d=[0]):(p.e=a.e,p.d=a.d.slice()):(p.e=a.e,p.d=a.d?a.d.slice():a.d);return}if(l=typeof a,l==="number"){if(a===0){p.s=1/a<0?-1:1,p.e=0,p.d=[0];return}if(a<0?(a=-a,p.s=-1):p.s=1,a===~~a&&a<1e7){for(o=0,s=a;s>=10;s/=10)o++;ct?o>i.maxE?(p.e=NaN,p.d=null):o<i.minE?(p.e=0,p.d=[0]):(p.e=o,p.d=[a]):(p.e=o,p.d=[a]);return}else if(a*0!==0){a||(p.s=NaN),p.e=NaN,p.d=null;return}return Cf(p,a.toString())}else if(l!=="string")throw Error(Ii+a);return(s=a.charCodeAt(0))===45?(a=a.slice(1),p.s=-1):(s===43&&(a=a.slice(1)),p.s=1),i1.test(a)?Cf(p,a):Jw(p,a)}if(i.prototype=Se,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=cE,i.clone=f1,i.isDecimal=I0,i.abs=Xw,i.acos=eE,i.acosh=tE,i.add=rE,i.asin=nE,i.asinh=iE,i.atan=aE,i.atanh=uE,i.atan2=sE,i.cbrt=oE,i.ceil=lE,i.clamp=fE,i.cos=hE,i.cosh=dE,i.div=pE,i.exp=gE,i.floor=vE,i.hypot=mE,i.ln=_E,i.log=bE,i.log10=yE,i.log2=DE,i.max=wE,i.min=EE,i.mod=AE,i.mul=CE,i.pow=FE,i.random=SE,i.round=BE,i.sign=OE,i.sin=ME,i.sinh=PE,i.sqrt=kE,i.sub=TE,i.sum=IE,i.tan=xE,i.tanh=NE,i.trunc=LE,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function pE(t,e){return new this(t).div(e)}function gE(t){return new this(t).exp()}function vE(t){return Ze(t=new this(t),t.e+1,3)}function mE(){var t,e,r=new this(0);for(ct=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return ct=!0,new this(1/0);r=e}return ct=!0,r.sqrt()}function I0(t){return t instanceof Ba||t&&t.toStringTag===n1||!1}function _E(t){return new this(t).ln()}function bE(t,e){return new this(t).log(e)}function DE(t){return new this(t).log(2)}function yE(t){return new this(t).log(10)}function wE(){return s1(this,arguments,"lt")}function EE(){return s1(this,arguments,"gt")}function AE(t,e){return new this(t).mod(e)}function CE(t,e){return new this(t).mul(e)}function FE(t,e){return new this(t).pow(e)}function SE(t){var e,r,n,i,a=0,o=new this(1),s=[];if(t===void 0?t=this.precision:un(t,1,Li),n=Math.ceil(t/nt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(s.push(i%1e7),a+=4);a=n/4}else throw Error(r1);else for(;a<n;)s[a++]=Math.random()*1e7|0;for(n=s[--a],t%=nt,n&&t&&(i=br(10,nt-t),s[a]=(n/i|0)*i);s[a]===0;a--)s.pop();if(a<0)r=0,s=[0];else{for(r=-1;s[0]===0;r-=nt)s.shift();for(n=1,i=s[0];i>=10;i/=10)n++;n<nt&&(r-=nt-n)}return o.e=r,o.d=s,o}function BE(t){return Ze(t=new this(t),t.e+1,this.rounding)}function OE(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function ME(t){return new this(t).sin()}function PE(t){return new this(t).sinh()}function kE(t){return new this(t).sqrt()}function TE(t,e){return new this(t).sub(e)}function IE(){var t=0,e=arguments,r=new this(e[t]);for(ct=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return ct=!0,Ze(r,this.precision,this.rounding)}function xE(t){return new this(t).tan()}function NE(t){return new this(t).tanh()}function LE(t){return Ze(t=new this(t),t.e+1,1)}Se[Symbol.for("nodejs.util.inspect.custom")]=Se.toString;Se[Symbol.toStringTag]="Decimal";var Ba=Se.constructor=f1(wf);Is=new Ba(Is);xs=new Ba(xs);var RE="BigNumber",UE=["?on","config"],VE=Bt(RE,UE,t=>{var{on:e,config:r}=t,n=Ba.clone({precision:r.precision,modulo:Ba.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&n.config({precision:i.precision})}),n},{isClass:!0}),gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ff={},jE={get exports(){return Ff},set exports(t){Ff=t}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=Math.cosh||function(c){return Math.abs(c)<1e-9?1-c:(Math.exp(c)+Math.exp(-c))*.5},i=Math.sinh||function(c){return Math.abs(c)<1e-9?c:(Math.exp(c)-Math.exp(-c))*.5},a=function(c){var d=Math.PI/4;if(-d>c||c>d)return Math.cos(c)-1;var g=c*c;return g*(g*(g*(g*(g*(g*(g*(g/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(c,d){var g=Math.abs(c),b=Math.abs(d);return g<3e3&&b<3e3?Math.sqrt(g*g+b*b):(g<b?(g=b,b=c/d):b=d/c,g*Math.sqrt(1+b*b))},s=function(){throw SyntaxError("Invalid Param")};function l(c,d){var g=Math.abs(c),b=Math.abs(d);return c===0?Math.log(b):d===0?Math.log(g):g<3e3&&b<3e3?Math.log(c*c+d*d)*.5:(c=c/2,d=d/2,.5*Math.log(c*c+d*d)+Math.LN2)}var p=function(c,d){var g={re:0,im:0};if(c==null)g.re=g.im=0;else if(d!==void 0)g.re=c,g.im=d;else switch(typeof c){case"object":if("im"in c&&"re"in c)g.re=c.re,g.im=c.im;else if("abs"in c&&"arg"in c){if(!Number.isFinite(c.abs)&&Number.isFinite(c.arg))return f.INFINITY;g.re=c.abs*Math.cos(c.arg),g.im=c.abs*Math.sin(c.arg)}else if("r"in c&&"phi"in c){if(!Number.isFinite(c.r)&&Number.isFinite(c.phi))return f.INFINITY;g.re=c.r*Math.cos(c.phi),g.im=c.r*Math.sin(c.phi)}else c.length===2?(g.re=c[0],g.im=c[1]):s();break;case"string":g.im=g.re=0;var b=c.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,m=0;b===null&&s();for(var D=0;D<b.length;D++){var S=b[D];S===" "||S==="	"||S===`
`||(S==="+"?v++:S==="-"?m++:S==="i"||S==="I"?(v+m===0&&s(),b[D+1]!==" "&&!isNaN(b[D+1])?(g.im+=parseFloat((m%2?"-":"")+b[D+1]),D++):g.im+=parseFloat((m%2?"-":"")+"1"),v=m=0):((v+m===0||isNaN(S))&&s(),b[D+1]==="i"||b[D+1]==="I"?(g.im+=parseFloat((m%2?"-":"")+S),D++):g.re+=parseFloat((m%2?"-":"")+S),v=m=0))}v+m>0&&s();break;case"number":g.im=0,g.re=c;break;default:s()}return isNaN(g.re)||isNaN(g.im),g};function f(c,d){if(!(this instanceof f))return new f(c,d);var g=p(c,d);this.re=g.re,this.im=g.im}f.prototype={re:0,im:0,sign:function(){var c=this.abs();return new f(this.re/c,this.im/c)},add:function(c,d){var g=new f(c,d);return this.isInfinite()&&g.isInfinite()?f.NAN:this.isInfinite()||g.isInfinite()?f.INFINITY:new f(this.re+g.re,this.im+g.im)},sub:function(c,d){var g=new f(c,d);return this.isInfinite()&&g.isInfinite()?f.NAN:this.isInfinite()||g.isInfinite()?f.INFINITY:new f(this.re-g.re,this.im-g.im)},mul:function(c,d){var g=new f(c,d);return this.isInfinite()&&g.isZero()||this.isZero()&&g.isInfinite()?f.NAN:this.isInfinite()||g.isInfinite()?f.INFINITY:g.im===0&&this.im===0?new f(this.re*g.re,0):new f(this.re*g.re-this.im*g.im,this.re*g.im+this.im*g.re)},div:function(c,d){var g=new f(c,d);if(this.isZero()&&g.isZero()||this.isInfinite()&&g.isInfinite())return f.NAN;if(this.isInfinite()||g.isZero())return f.INFINITY;if(this.isZero()||g.isInfinite())return f.ZERO;c=this.re,d=this.im;var b=g.re,v=g.im,m,D;return v===0?new f(c/b,d/b):Math.abs(b)<Math.abs(v)?(D=b/v,m=b*D+v,new f((c*D+d)/m,(d*D-c)/m)):(D=v/b,m=v*D+b,new f((c+d*D)/m,(d-c*D)/m))},pow:function(c,d){var g=new f(c,d);if(c=this.re,d=this.im,g.isZero())return f.ONE;if(g.im===0){if(d===0&&c>0)return new f(Math.pow(c,g.re),0);if(c===0)switch((g.re%4+4)%4){case 0:return new f(Math.pow(d,g.re),0);case 1:return new f(0,Math.pow(d,g.re));case 2:return new f(-Math.pow(d,g.re),0);case 3:return new f(0,-Math.pow(d,g.re))}}if(c===0&&d===0&&g.re>0&&g.im>=0)return f.ZERO;var b=Math.atan2(d,c),v=l(c,d);return c=Math.exp(g.re*v-g.im*b),d=g.im*v+g.re*b,new f(c*Math.cos(d),c*Math.sin(d))},sqrt:function(){var c=this.re,d=this.im,g=this.abs(),b,v;if(c>=0){if(d===0)return new f(Math.sqrt(c),0);b=.5*Math.sqrt(2*(g+c))}else b=Math.abs(d)/Math.sqrt(2*(g-c));return c<=0?v=.5*Math.sqrt(2*(g-c)):v=Math.abs(d)/Math.sqrt(2*(g+c)),new f(b,d<0?-v:v)},exp:function(){var c=Math.exp(this.re);return this.im,new f(c*Math.cos(this.im),c*Math.sin(this.im))},expm1:function(){var c=this.re,d=this.im;return new f(Math.expm1(c)*Math.cos(d)+a(d),Math.exp(c)*Math.sin(d))},log:function(){var c=this.re,d=this.im;return new f(l(c,d),Math.atan2(d,c))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var c=this.re,d=this.im;return new f(Math.sin(c)*n(d),Math.cos(c)*i(d))},cos:function(){var c=this.re,d=this.im;return new f(Math.cos(c)*n(d),-Math.sin(c)*i(d))},tan:function(){var c=2*this.re,d=2*this.im,g=Math.cos(c)+n(d);return new f(Math.sin(c)/g,i(d)/g)},cot:function(){var c=2*this.re,d=2*this.im,g=Math.cos(c)-n(d);return new f(-Math.sin(c)/g,i(d)/g)},sec:function(){var c=this.re,d=this.im,g=.5*n(2*d)+.5*Math.cos(2*c);return new f(Math.cos(c)*n(d)/g,Math.sin(c)*i(d)/g)},csc:function(){var c=this.re,d=this.im,g=.5*n(2*d)-.5*Math.cos(2*c);return new f(Math.sin(c)*n(d)/g,-Math.cos(c)*i(d)/g)},asin:function(){var c=this.re,d=this.im,g=new f(d*d-c*c+1,-2*c*d).sqrt(),b=new f(g.re-d,g.im+c).log();return new f(b.im,-b.re)},acos:function(){var c=this.re,d=this.im,g=new f(d*d-c*c+1,-2*c*d).sqrt(),b=new f(g.re-d,g.im+c).log();return new f(Math.PI/2-b.im,b.re)},atan:function(){var c=this.re,d=this.im;if(c===0){if(d===1)return new f(0,1/0);if(d===-1)return new f(0,-1/0)}var g=c*c+(1-d)*(1-d),b=new f((1-d*d-c*c)/g,-2*c/g).log();return new f(-.5*b.im,.5*b.re)},acot:function(){var c=this.re,d=this.im;if(d===0)return new f(Math.atan2(1,c),0);var g=c*c+d*d;return g!==0?new f(c/g,-d/g).atan():new f(c!==0?c/0:0,d!==0?-d/0:0).atan()},asec:function(){var c=this.re,d=this.im;if(c===0&&d===0)return new f(0,1/0);var g=c*c+d*d;return g!==0?new f(c/g,-d/g).acos():new f(c!==0?c/0:0,d!==0?-d/0:0).acos()},acsc:function(){var c=this.re,d=this.im;if(c===0&&d===0)return new f(Math.PI/2,1/0);var g=c*c+d*d;return g!==0?new f(c/g,-d/g).asin():new f(c!==0?c/0:0,d!==0?-d/0:0).asin()},sinh:function(){var c=this.re,d=this.im;return new f(i(c)*Math.cos(d),n(c)*Math.sin(d))},cosh:function(){var c=this.re,d=this.im;return new f(n(c)*Math.cos(d),i(c)*Math.sin(d))},tanh:function(){var c=2*this.re,d=2*this.im,g=n(c)+Math.cos(d);return new f(i(c)/g,Math.sin(d)/g)},coth:function(){var c=2*this.re,d=2*this.im,g=n(c)-Math.cos(d);return new f(i(c)/g,-Math.sin(d)/g)},csch:function(){var c=this.re,d=this.im,g=Math.cos(2*d)-n(2*c);return new f(-2*i(c)*Math.cos(d)/g,2*n(c)*Math.sin(d)/g)},sech:function(){var c=this.re,d=this.im,g=Math.cos(2*d)+n(2*c);return new f(2*n(c)*Math.cos(d)/g,-2*i(c)*Math.sin(d)/g)},asinh:function(){var c=this.im;this.im=-this.re,this.re=c;var d=this.asin();return this.re=-this.im,this.im=c,c=d.re,d.re=-d.im,d.im=c,d},acosh:function(){var c=this.acos();if(c.im<=0){var d=c.re;c.re=-c.im,c.im=d}else{var d=c.im;c.im=-c.re,c.re=d}return c},atanh:function(){var c=this.re,d=this.im,g=c>1&&d===0,b=1-c,v=1+c,m=b*b+d*d,D=m!==0?new f((v*b-d*d)/m,(d*b+v*d)/m):new f(c!==-1?c/0:0,d!==0?d/0:0),S=D.re;return D.re=l(D.re,D.im)/2,D.im=Math.atan2(D.im,S)/2,g&&(D.im=-D.im),D},acoth:function(){var c=this.re,d=this.im;if(c===0&&d===0)return new f(0,Math.PI/2);var g=c*c+d*d;return g!==0?new f(c/g,-d/g).atanh():new f(c!==0?c/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var c=this.re,d=this.im;if(d===0)return new f(c!==0?Math.log(c+Math.sqrt(c*c+1)):1/0,0);var g=c*c+d*d;return g!==0?new f(c/g,-d/g).asinh():new f(c!==0?c/0:0,d!==0?-d/0:0).asinh()},asech:function(){var c=this.re,d=this.im;if(this.isZero())return f.INFINITY;var g=c*c+d*d;return g!==0?new f(c/g,-d/g).acosh():new f(c!==0?c/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return f.INFINITY;if(this.isInfinite())return f.ZERO;var c=this.re,d=this.im,g=c*c+d*d;return new f(c/g,-d/g)},conjugate:function(){return new f(this.re,-this.im)},neg:function(){return new f(-this.re,-this.im)},ceil:function(c){return c=Math.pow(10,c||0),new f(Math.ceil(this.re*c)/c,Math.ceil(this.im*c)/c)},floor:function(c){return c=Math.pow(10,c||0),new f(Math.floor(this.re*c)/c,Math.floor(this.im*c)/c)},round:function(c){return c=Math.pow(10,c||0),new f(Math.round(this.re*c)/c,Math.round(this.im*c)/c)},equals:function(c,d){var g=new f(c,d);return Math.abs(g.re-this.re)<=f.EPSILON&&Math.abs(g.im-this.im)<=f.EPSILON},clone:function(){return new f(this.re,this.im)},toString:function(){var c=this.re,d=this.im,g="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(c)<f.EPSILON&&(c=0),Math.abs(d)<f.EPSILON&&(d=0),d===0?g+c:(c!==0?(g+=c,g+=" ",d<0?(d=-d,g+="-"):g+="+",g+=" "):d<0&&(d=-d,g+="-"),d!==1&&(g+=d),g+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},f.ZERO=new f(0,0),f.ONE=new f(1,0),f.I=new f(0,1),f.PI=new f(Math.PI,0),f.E=new f(Math.E,0),f.INFINITY=new f(1/0,1/0),f.NAN=new f(NaN,NaN),f.EPSILON=1e-15,Object.defineProperty(f,"__esModule",{value:!0}),f.default=f,f.Complex=f,t.exports=f})()})(jE);const kr=Kf(Ff);var zE="Complex",qE=[],WE=Bt(zE,qE,()=>(Object.defineProperty(kr,"name",{value:"Complex"}),kr.prototype.constructor=kr,kr.prototype.type="Complex",kr.prototype.isComplex=!0,kr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},kr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},kr.prototype.format=function(t){var e="",r=this.im,n=this.re,i=bf(this.re,t),a=bf(this.im,t),o=Xt(t)?t:t?t.precision:null;if(o!==null){var s=Math.pow(10,-o);Math.abs(n/r)<s&&(n=0),Math.abs(r/n)<s&&(r=0)}return r===0?e=i:n===0?r===1?e="i":r===-1?e="-i":e=a+"i":r<0?r===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+a+"i",e},kr.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return kr(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(Xt(r)){if(qp(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),Xt(n))return new kr({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},kr.prototype.valueOf=kr.prototype.toString,kr.fromJSON=function(t){return new kr(t)},kr.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},kr),{isClass:!0}),Sf={},HE={get exports(){return Sf},set exports(t){Sf=t}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=2e3,i={s:1,n:0,d:1};function a(b,v){if(isNaN(b=parseInt(b,10)))throw g.InvalidParameter;return b*v}function o(b,v){if(v===0)throw g.DivisionByZero;var m=Object.create(g.prototype);m.s=b<0?-1:1,b=b<0?-b:b;var D=d(b,v);return m.n=b/D,m.d=v/D,m}function s(b){for(var v={},m=b,D=2,S=4;S<=m;){for(;m%D===0;)m/=D,v[D]=(v[D]||0)+1;S+=1+2*D++}return m!==b?m>1&&(v[m]=(v[m]||0)+1):v[b]=(v[b]||0)+1,v}var l=function(b,v){var m=0,D=1,S=1,w=0,C=0,F=0,M=1,P=1,A=0,x=1,R=1,Z=1,K=1e7,L;if(b!=null)if(v!==void 0){if(m=b,D=v,S=m*D,m%1!==0||D%1!==0)throw g.NonIntegerParameter}else switch(typeof b){case"object":{if("d"in b&&"n"in b)m=b.n,D=b.d,"s"in b&&(m*=b.s);else if(0 in b)m=b[0],1 in b&&(D=b[1]);else throw g.InvalidParameter;S=m*D;break}case"number":{if(b<0&&(S=b,b=-b),b%1===0)m=b;else if(b>0){for(b>=1&&(P=Math.pow(10,Math.floor(1+Math.log(b)/Math.LN10)),b/=P);x<=K&&Z<=K;)if(L=(A+R)/(x+Z),b===L){x+Z<=K?(m=A+R,D=x+Z):Z>x?(m=R,D=Z):(m=A,D=x);break}else b>L?(A+=R,x+=Z):(R+=A,Z+=x),x>K?(m=R,D=Z):(m=A,D=x);m*=P}else(isNaN(b)||isNaN(v))&&(D=m=NaN);break}case"string":{if(x=b.match(/\d+|./g),x===null)throw g.InvalidParameter;if(x[A]==="-"?(S=-1,A++):x[A]==="+"&&A++,x.length===A+1?C=a(x[A++],S):x[A+1]==="."||x[A]==="."?(x[A]!=="."&&(w=a(x[A++],S)),A++,(A+1===x.length||x[A+1]==="("&&x[A+3]===")"||x[A+1]==="'"&&x[A+3]==="'")&&(C=a(x[A],S),M=Math.pow(10,x[A].length),A++),(x[A]==="("&&x[A+2]===")"||x[A]==="'"&&x[A+2]==="'")&&(F=a(x[A+1],S),P=Math.pow(10,x[A+1].length)-1,A+=3)):x[A+1]==="/"||x[A+1]===":"?(C=a(x[A],S),M=a(x[A+2],1),A+=3):x[A+3]==="/"&&x[A+1]===" "&&(w=a(x[A],S),C=a(x[A+2],S),M=a(x[A+4],1),A+=5),x.length<=A){D=M*P,S=m=F+D*w+P*C;break}}default:throw g.InvalidParameter}if(D===0)throw g.DivisionByZero;i.s=S<0?-1:1,i.n=Math.abs(m),i.d=Math.abs(D)};function p(b,v,m){for(var D=1;v>0;b=b*b%m,v>>=1)v&1&&(D=D*b%m);return D}function f(b,v){for(;v%2===0;v/=2);for(;v%5===0;v/=5);if(v===1)return 0;for(var m=10%v,D=1;m!==1;D++)if(m=m*10%v,D>n)return 0;return D}function c(b,v,m){for(var D=1,S=p(10,m,v),w=0;w<300;w++){if(D===S)return w;D=D*10%v,S=S*10%v}return 0}function d(b,v){if(!b)return v;if(!v)return b;for(;;){if(b%=v,!b)return v;if(v%=b,!v)return b}}function g(b,v){if(l(b,v),this instanceof g)b=d(i.d,i.n),this.s=i.s,this.n=i.n/b,this.d=i.d/b;else return o(i.s*i.n,i.d)}g.DivisionByZero=new Error("Division by Zero"),g.InvalidParameter=new Error("Invalid argument"),g.NonIntegerParameter=new Error("Parameters must be integer"),g.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(b,v){return l(b,v),o(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(b,v){return l(b,v),o(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(b,v){return l(b,v),o(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(b,v){return l(b,v),o(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(b,v){if(isNaN(this.n)||isNaN(this.d))return new g(NaN);if(b===void 0)return o(this.s*this.n%this.d,1);if(l(b,v),i.n===0&&this.d===0)throw g.DivisionByZero;return o(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(b,v){return l(b,v),o(d(i.n,this.n)*d(i.d,this.d),i.d*this.d)},lcm:function(b,v){return l(b,v),i.n===0&&this.n===0?o(0,1):o(i.n*this.n,d(i.n,this.n)*d(i.d,this.d))},ceil:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.ceil(b*this.s*this.n/this.d),b)},floor:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.floor(b*this.s*this.n/this.d),b)},round:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.round(b*this.s*this.n/this.d),b)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(b,v){if(l(b,v),i.d===1)return i.s<0?o(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):o(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var m=s(this.n),D=s(this.d),S=1,w=1;for(var C in m)if(C!=="1"){if(C==="0"){S=0;break}if(m[C]*=i.n,m[C]%i.d===0)m[C]/=i.d;else return null;S*=Math.pow(C,m[C])}for(var C in D)if(C!=="1"){if(D[C]*=i.n,D[C]%i.d===0)D[C]/=i.d;else return null;w*=Math.pow(C,D[C])}return i.s<0?o(w,S):o(S,w)},equals:function(b,v){return l(b,v),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(b,v){l(b,v);var m=this.s*this.n*i.d-i.s*i.n*this.d;return(0<m)-(m<0)},simplify:function(b){if(isNaN(this.n)||isNaN(this.d))return this;b=b||.001;for(var v=this.abs(),m=v.toContinued(),D=1;D<m.length;D++){for(var S=o(m[D-1],1),w=D-2;w>=0;w--)S=S.inverse().add(m[w]);if(S.sub(v).abs().valueOf()<b)return S.mul(this.s)}return this},divisible:function(b,v){return l(b,v),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(b){var v,m="",D=this.n,S=this.d;return this.s<0&&(m+="-"),S===1?m+=D:(b&&(v=Math.floor(D/S))>0&&(m+=v,m+=" ",D%=S),m+=D,m+="/",m+=S),m},toLatex:function(b){var v,m="",D=this.n,S=this.d;return this.s<0&&(m+="-"),S===1?m+=D:(b&&(v=Math.floor(D/S))>0&&(m+=v,D%=S),m+="\\frac{",m+=D,m+="}{",m+=S,m+="}"),m},toContinued:function(){var b,v=this.n,m=this.d,D=[];if(isNaN(v)||isNaN(m))return D;do D.push(Math.floor(v/m)),b=v%m,v=m,m=b;while(v!==1);return D},toString:function(b){var v=this.n,m=this.d;if(isNaN(v)||isNaN(m))return"NaN";b=b||15;var D=f(v,m),S=c(v,m,D),w=this.s<0?"-":"";if(w+=v/m|0,v%=m,v*=10,v&&(w+="."),D){for(var C=S;C--;)w+=v/m|0,v%=m,v*=10;w+="(";for(var C=D;C--;)w+=v/m|0,v%=m,v*=10;w+=")"}else for(var C=b;v&&C--;)w+=v/m|0,v%=m,v*=10;return w}},Object.defineProperty(g,"__esModule",{value:!0}),g.default=g,g.Fraction=g,t.exports=g})()})(HE);const fi=Kf(Sf);var $E="Fraction",GE=[],KE=Bt($E,GE,()=>(Object.defineProperty(fi,"name",{value:"Fraction"}),fi.prototype.constructor=fi,fi.prototype.type="Fraction",fi.prototype.isFraction=!0,fi.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},fi.fromJSON=function(t){return new fi(t)},fi),{isClass:!0}),YE="Matrix",ZE=[],JE=Bt(YE,ZE,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function c1(t){return Object.keys(t.signatures||{}).reduce(function(e,r){var n=(r.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var QE="DenseMatrix",XE=["Matrix"],eA=Bt(QE,XE,t=>{var{Matrix:e}=t;function r(f,c){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(c&&!Gn(c))throw new Error("Invalid datatype: "+c);if(Yr(f))f.type==="DenseMatrix"?(this._data=Sr(f._data),this._size=Sr(f._size),this._datatype=c||f._datatype):(this._data=f.toArray(),this._size=f.size(),this._datatype=c||f._datatype);else if(f&&Jt(f.data)&&Jt(f.size))this._data=f.data,this._size=f.size,M0(this._data,this._size),this._datatype=c||f.datatype;else if(Jt(f))this._data=p(f),this._size=Ti(this._data),M0(this._data,this._size),this._datatype=c;else{if(f)throw new TypeError("Unsupported type of data ("+hu(f)+")");this._data=[],this._size=[0],this._datatype=c}}r.prototype=new e,r.prototype.createDenseMatrix=function(f,c){return new r(f,c)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return Ts(this._data,hu)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(f,c){return new r(f,c)},r.prototype.subset=function(f,c,d){switch(arguments.length){case 1:return n(this,f);case 2:case 3:return a(this,f,c,d);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(f){if(!Jt(f))throw new TypeError("Array expected");if(f.length!==this._size.length)throw new It(f.length,this._size.length);for(var c=0;c<f.length;c++)Qt(f[c],this._size[c]);for(var d=this._data,g=0,b=f.length;g<b;g++){var v=f[g];Qt(v,d.length),d=d[v]}return d},r.prototype.set=function(f,c,d){if(!Jt(f))throw new TypeError("Array expected");if(f.length<this._size.length)throw new It(f.length,this._size.length,"<");var g,b,v,m=f.map(function(S){return S+1});l(this,m,d);var D=this._data;for(g=0,b=f.length-1;g<b;g++)v=f[g],Qt(v,D.length),D=D[v];return v=f[f.length-1],Qt(v,D.length),D[v]=c,this};function n(f,c){if(!Wf(c))throw new TypeError("Invalid index");var d=c.isScalar();if(d)return f.get(c.min());var g=c.size();if(g.length!==f._size.length)throw new It(g.length,f._size.length);for(var b=c.min(),v=c.max(),m=0,D=f._size.length;m<D;m++)Qt(b[m],f._size[m]),Qt(v[m],f._size[m]);return new r(i(f._data,c,g.length,0),f._datatype)}function i(f,c,d,g){var b=g===d-1,v=c.dimension(g);return b?v.map(function(m){return Qt(m,f.length),f[m]}).valueOf():v.map(function(m){Qt(m,f.length);var D=f[m];return i(D,c,d,g+1)}).valueOf()}function a(f,c,d,g){if(!c||c.isIndex!==!0)throw new TypeError("Invalid index");var b=c.size(),v=c.isScalar(),m;if(Yr(d)?(m=d.size(),d=d.valueOf()):m=Ti(d),v){if(m.length!==0)throw new TypeError("Scalar expected");f.set(c.min(),d,g)}else{if(b.length<f._size.length)throw new It(b.length,f._size.length,"<");if(m.length<b.length){for(var D=0,S=0;b[D]===1&&m[D]===1;)D++;for(;b[D]===1;)S++,D++;d=Yp(d,b.length,S,m)}if(!Ps(b,m))throw new It(b,m,">");var w=c.max().map(function(M){return M+1});l(f,w,g);var C=b.length,F=0;o(f._data,c,d,C,F)}return f}function o(f,c,d,g,b){var v=b===g-1,m=c.dimension(b);v?m.forEach(function(D,S){Qt(D),f[D]=d[S[0]]}):m.forEach(function(D,S){Qt(D),o(f[D],c,d[S[0]],g,b+1)})}r.prototype.resize=function(f,c,d){if(!Ms(f))throw new TypeError("Array or Matrix expected");var g=f.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),b=d?this.clone():this;return s(b,g,c)};function s(f,c,d){if(c.length===0){for(var g=f._data;Jt(g);)g=g[0];return g}return f._size=c.slice(0),f._data=P0(f._data,f._size,d),f}r.prototype.reshape=function(f,c){var d=c?this.clone():this;d._data=Bw(d._data,f);var g=d._size.reduce((b,v)=>b*v);return d._size=$f(f,g),d};function l(f,c,d){for(var g=f._size.slice(0),b=!1;g.length<c.length;)g.push(0),b=!0;for(var v=0,m=c.length;v<m;v++)c[v]>g[v]&&(g[v]=c[v],b=!0);b&&s(f,g,d)}r.prototype.clone=function(){var f=new r({data:Sr(this._data),size:Sr(this._size),datatype:this._datatype});return f},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(f){var c=this,d=c1(f),g=function m(D,S){return Jt(D)?D.map(function(w,C){return m(w,S.concat(C))}):d===1?f(D):d===2?f(D,S):f(D,S,c)},b=g(this._data,[]),v=this._datatype!==void 0?Ts(b,hu):void 0;return new r(b,v)},r.prototype.forEach=function(f){var c=this,d=function g(b,v){Jt(b)?b.forEach(function(m,D){g(m,v.concat(D))}):f(b,v,c)};d(this._data,[])},r.prototype[Symbol.iterator]=function*(){var f=function*c(d,g){if(Jt(d))for(var b=0;b<d.length;b++)yield*c(d[b],g.concat(b));else yield{value:d,index:g}};yield*f(this._data,[])},r.prototype.rows=function(){var f=[],c=this.size();if(c.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var g of d)f.push(new r([g],this._datatype));return f},r.prototype.columns=function(){var f=this,c=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var g=this._data,b=function(D){var S=g.map(w=>[w[D]]);c.push(new r(S,f._datatype))},v=0;v<d[1];v++)b(v);return c},r.prototype.toArray=function(){return Sr(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(f){return rn(this._data,f)},r.prototype.toString=function(){return rn(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(f){if(f){if(Bn(f)&&(f=f.toNumber()),!Xt(f)||!Br(f))throw new TypeError("The parameter k must be an integer number")}else f=0;for(var c=f>0?f:0,d=f<0?-f:0,g=this._size[0],b=this._size[1],v=Math.min(g-d,b-c),m=[],D=0;D<v;D++)m[D]=this._data[D+d][D+c];return new r({data:m,size:[v],datatype:this._datatype})},r.diagonal=function(f,c,d,g){if(!Jt(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(P){if(Bn(P)&&(P=P.toNumber()),!Xt(P)||!Br(P)||P<1)throw new Error("Size values must be positive integers");return P}),d){if(Bn(d)&&(d=d.toNumber()),!Xt(d)||!Br(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var b=d>0?d:0,v=d<0?-d:0,m=f[0],D=f[1],S=Math.min(m-v,D-b),w;if(Jt(c)){if(c.length!==S)throw new Error("Invalid value array length");w=function(A){return c[A]}}else if(Yr(c)){var C=c.size();if(C.length!==1||C[0]!==S)throw new Error("Invalid matrix length");w=function(A){return c.get([A])}}else w=function(){return c};g||(g=Bn(w(0))?w(0).mul(0):0);var F=[];if(f.length>0){F=P0(F,f,g);for(var M=0;M<S;M++)F[M+v][M+b]=w(M)}return new r({data:F,size:[m,D]})},r.fromJSON=function(f){return new r(f)},r.prototype.swapRows=function(f,c){if(!Xt(f)||!Br(f)||!Xt(c)||!Br(c))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Qt(f,this._size[0]),Qt(c,this._size[0]),r._swapRows(f,c,this._data),this},r._swapRows=function(f,c,d){var g=d[f];d[f]=d[c],d[c]=g};function p(f){for(var c=0,d=f.length;c<d;c++){var g=f[c];Jt(g)?f[c]=p(g):g&&g.isMatrix===!0&&(f[c]=p(g.valueOf()))}return f}return r},{isClass:!0});function co(t,e,r){return t&&typeof t.map=="function"?t.map(function(n){return co(n,e)}):e(t)}var x0="isInteger",tA=["typed"],rA=Bt(x0,tA,t=>{var{typed:e}=t;return e(x0,{number:Br,BigNumber:function(n){return n.isInt()},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":e.referToSelf(r=>n=>co(n,r))})}),nA="number",h1="number, number";function d1(t,e){return t+e}d1.signature=h1;function p1(t,e){return t*e}p1.signature=h1;function g1(t){return-t}g1.signature=nA;function iA(t,e,r){if(r==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return n.lte(i.times(r))}return!1}function aA(t,e,r){return ks(t.re,e.re,r)&&ks(t.im,e.im,r)}var uA=Bt("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),Ls="equalScalar",sA=["typed","config"],oA=Bt(Ls,sA,t=>{var{typed:e,config:r}=t,n=uA({typed:e});return e(Ls,{"boolean, boolean":function(a,o){return a===o},"number, number":function(a,o){return ks(a,o,r.epsilon)},"BigNumber, BigNumber":function(a,o){return a.eq(o)||iA(a,o,r.epsilon)},"Fraction, Fraction":function(a,o){return a.equals(o)},"Complex, Complex":function(a,o){return aA(a,o,r.epsilon)}},n)});Bt(Ls,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Ls,{"number, number":function(i,a){return ks(i,a,r.epsilon)}})});var lA="SparseMatrix",fA=["typed","equalScalar","Matrix"],cA=Bt(lA,fA,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(v,m){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!Gn(m))throw new Error("Invalid datatype: "+m);if(Yr(v))a(this,v,m);else if(v&&Jt(v.index)&&Jt(v.ptr)&&Jt(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=m||v.datatype;else if(Jt(v))o(this,v,m);else{if(v)throw new TypeError("Unsupported type of data ("+hu(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=m}}function a(v,m,D){m.type==="SparseMatrix"?(v._values=m._values?Sr(m._values):void 0,v._index=Sr(m._index),v._ptr=Sr(m._ptr),v._size=Sr(m._size),v._datatype=D||m._datatype):o(v,m.valueOf(),D||m._datatype)}function o(v,m,D){v._values=[],v._index=[],v._ptr=[],v._datatype=D;var S=m.length,w=0,C=r,F=0;if(Gn(D)&&(C=e.find(r,[D,D])||r,F=e.convert(0,D)),S>0){var M=0;do{v._ptr.push(v._index.length);for(var P=0;P<S;P++){var A=m[P];if(Jt(A)){if(M===0&&w<A.length&&(w=A.length),M<A.length){var x=A[M];C(x,F)||(v._values.push(x),v._index.push(P))}}else M===0&&w<1&&(w=1),C(A,F)||(v._values.push(A),v._index.push(P))}M++}while(M<w)}v._ptr.push(v._index.length),v._size=[S,w]}i.prototype=new n,i.prototype.createSparseMatrix=function(v,m){return new i(v,m)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Ts(this._values,hu)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(v,m){return new i(v,m)},i.prototype.density=function(){var v=this._size[0],m=this._size[1];return v!==0&&m!==0?this._index.length/(v*m):0},i.prototype.subset=function(v,m,D){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,v);case 2:case 3:return l(this,v,m,D);default:throw new SyntaxError("Wrong number of arguments")}};function s(v,m){if(!Wf(m))throw new TypeError("Invalid index");var D=m.isScalar();if(D)return v.get(m.min());var S=m.size();if(S.length!==v._size.length)throw new It(S.length,v._size.length);var w,C,F,M,P=m.min(),A=m.max();for(w=0,C=v._size.length;w<C;w++)Qt(P[w],v._size[w]),Qt(A[w],v._size[w]);var x=v._values,R=v._index,Z=v._ptr,K=m.dimension(0),L=m.dimension(1),V=[],q=[];K.forEach(function(te,oe){q[te]=oe[0],V[te]=!0});var z=x?[]:void 0,Q=[],X=[];return L.forEach(function(te){for(X.push(Q.length),F=Z[te],M=Z[te+1];F<M;F++)w=R[F],V[w]===!0&&(Q.push(q[w]),z&&z.push(x[F]))}),X.push(Q.length),new i({values:z,index:Q,ptr:X,size:S,datatype:v._datatype})}function l(v,m,D,S){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var w=m.size(),C=m.isScalar(),F;if(Yr(D)?(F=D.size(),D=D.toArray()):F=Ti(D),C){if(F.length!==0)throw new TypeError("Scalar expected");v.set(m.min(),D,S)}else{if(w.length!==1&&w.length!==2)throw new It(w.length,v._size.length,"<");if(F.length<w.length){for(var M=0,P=0;w[M]===1&&F[M]===1;)M++;for(;w[M]===1;)P++,M++;D=Yp(D,w.length,P,F)}if(!Ps(w,F))throw new It(w,F,">");if(w.length===1){var A=m.dimension(0);A.forEach(function(Z,K){Qt(Z),v.set([Z,0],D[K[0]],S)})}else{var x=m.dimension(0),R=m.dimension(1);x.forEach(function(Z,K){Qt(Z),R.forEach(function(L,V){Qt(L),v.set([Z,L],D[K[0]][V[0]],S)})})}}return v}i.prototype.get=function(v){if(!Jt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new It(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var m=v[0],D=v[1];Qt(m,this._size[0]),Qt(D,this._size[1]);var S=p(m,this._ptr[D],this._ptr[D+1],this._index);return S<this._ptr[D+1]&&this._index[S]===m?this._values[S]:0},i.prototype.set=function(v,m,D){if(!Jt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new It(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var S=v[0],w=v[1],C=this._size[0],F=this._size[1],M=r,P=0;Gn(this._datatype)&&(M=e.find(r,[this._datatype,this._datatype])||r,P=e.convert(0,this._datatype)),(S>C-1||w>F-1)&&(d(this,Math.max(S+1,C),Math.max(w+1,F),D),C=this._size[0],F=this._size[1]),Qt(S,C),Qt(w,F);var A=p(S,this._ptr[w],this._ptr[w+1],this._index);return A<this._ptr[w+1]&&this._index[A]===S?M(m,P)?f(A,w,this._values,this._index,this._ptr):this._values[A]=m:M(m,P)||c(A,S,w,m,this._values,this._index,this._ptr),this};function p(v,m,D,S){if(D-m===0)return D;for(var w=m;w<D;w++)if(S[w]===v)return w;return m}function f(v,m,D,S,w){D.splice(v,1),S.splice(v,1);for(var C=m+1;C<w.length;C++)w[C]--}function c(v,m,D,S,w,C,F){w.splice(v,0,S),C.splice(v,0,m);for(var M=D+1;M<F.length;M++)F[M]++}i.prototype.resize=function(v,m,D){if(!Ms(v))throw new TypeError("Array or Matrix expected");var S=v.valueOf().map(C=>Array.isArray(C)&&C.length===1?C[0]:C);if(S.length!==2)throw new Error("Only two dimensions matrix are supported");S.forEach(function(C){if(!Xt(C)||!Br(C)||C<0)throw new TypeError("Invalid size, must contain positive integers (size: "+rn(S)+")")});var w=D?this.clone():this;return d(w,S[0],S[1],m)};function d(v,m,D,S){var w=S||0,C=r,F=0;Gn(v._datatype)&&(C=e.find(r,[v._datatype,v._datatype])||r,F=e.convert(0,v._datatype),w=e.convert(w,v._datatype));var M=!C(w,F),P=v._size[0],A=v._size[1],x,R,Z;if(D>A){for(R=A;R<D;R++)if(v._ptr[R]=v._values.length,M)for(x=0;x<P;x++)v._values.push(w),v._index.push(x);v._ptr[D]=v._values.length}else D<A&&(v._ptr.splice(D+1,A-D),v._values.splice(v._ptr[D],v._values.length),v._index.splice(v._ptr[D],v._index.length));if(A=D,m>P){if(M){var K=0;for(R=0;R<A;R++){v._ptr[R]=v._ptr[R]+K,Z=v._ptr[R+1]+K;var L=0;for(x=P;x<m;x++,L++)v._values.splice(Z+L,0,w),v._index.splice(Z+L,0,x),K++}v._ptr[A]=v._values.length}}else if(m<P){var V=0;for(R=0;R<A;R++){v._ptr[R]=v._ptr[R]-V;var q=v._ptr[R],z=v._ptr[R+1]-V;for(Z=q;Z<z;Z++)x=v._index[Z],x>m-1&&(v._values.splice(Z,1),v._index.splice(Z,1),V++)}v._ptr[R]=v._values.length}return v._size[0]=m,v._size[1]=D,v}i.prototype.reshape=function(v,m){if(!Jt(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(te){if(!Xt(te)||!Br(te)||te<=-2||te===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+rn(v)+")")});var D=this._size[0]*this._size[1];v=$f(v,D);var S=v[0]*v[1];if(D!==S)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=m?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return w;for(var C=[],F=0;F<w._ptr.length;F++)for(var M=0;M<w._ptr[F+1]-w._ptr[F];M++)C.push(F);for(var P=w._values.slice(),A=w._index.slice(),x=0;x<w._index.length;x++){var R=A[x],Z=C[x],K=R*w._size[1]+Z;C[x]=K%v[1],A[x]=Math.floor(K/v[1])}w._values.length=0,w._index.length=0,w._ptr.length=v[1]+1,w._size=v.slice();for(var L=0;L<w._ptr.length;L++)w._ptr[L]=0;for(var V=0;V<P.length;V++){var q=A[V],z=C[V],Q=P[V],X=p(q,w._ptr[z],w._ptr[z+1],w._index);c(X,q,z,Q,w._values,w._index,w._ptr)}return w},i.prototype.clone=function(){var v=new i({values:this._values?Sr(this._values):void 0,index:Sr(this._index),ptr:Sr(this._ptr),size:Sr(this._size),datatype:this._datatype});return v},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(v,m){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var D=this,S=this._size[0],w=this._size[1],C=c1(v),F=function(P,A,x){return C===1?v(P):C===2?v(P,[A,x]):v(P,[A,x],D)};return g(this,0,S-1,0,w-1,F,m)};function g(v,m,D,S,w,C,F){var M=[],P=[],A=[],x=r,R=0;Gn(v._datatype)&&(x=e.find(r,[v._datatype,v._datatype])||r,R=e.convert(0,v._datatype));for(var Z=function(Be,ke,Te){Be=C(Be,ke,Te),x(Be,R)||(M.push(Be),P.push(ke))},K=S;K<=w;K++){A.push(M.length);var L=v._ptr[K],V=v._ptr[K+1];if(F)for(var q=L;q<V;q++){var z=v._index[q];z>=m&&z<=D&&Z(v._values[q],z-m,K-S)}else{for(var Q={},X=L;X<V;X++){var te=v._index[X];Q[te]=v._values[X]}for(var oe=m;oe<=D;oe++){var _e=oe in Q?Q[oe]:0;Z(_e,oe-m,K-S)}}}return A.push(M.length),new i({values:M,index:P,ptr:A,size:[D-m+1,w-S+1]})}i.prototype.forEach=function(v,m){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var D=this,S=this._size[0],w=this._size[1],C=0;C<w;C++){var F=this._ptr[C],M=this._ptr[C+1];if(m)for(var P=F;P<M;P++){var A=this._index[P];v(this._values[P],[A,C],D)}else{for(var x={},R=F;R<M;R++){var Z=this._index[R];x[Z]=this._values[R]}for(var K=0;K<S;K++){var L=K in x?x[K]:0;v(L,[K,C],D)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],m=0;m<v;m++)for(var D=this._ptr[m],S=this._ptr[m+1],w=D;w<S;w++){var C=this._index[w];yield{value:this._values[w],index:[C,m]}}},i.prototype.toArray=function(){return b(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return b(this._values,this._index,this._ptr,this._size,!1)};function b(v,m,D,S,w){var C=S[0],F=S[1],M=[],P,A;for(P=0;P<C;P++)for(M[P]=[],A=0;A<F;A++)M[P][A]=0;for(A=0;A<F;A++)for(var x=D[A],R=D[A+1],Z=x;Z<R;Z++)P=m[Z],M[P][A]=v?w?Sr(v[Z]):v[Z]:1;return M}return i.prototype.format=function(v){for(var m=this._size[0],D=this._size[1],S=this.density(),w="Sparse Matrix ["+rn(m,v)+" x "+rn(D,v)+"] density: "+rn(S,v)+`
`,C=0;C<D;C++)for(var F=this._ptr[C],M=this._ptr[C+1],P=F;P<M;P++){var A=this._index[P];w+=`
    (`+rn(A,v)+", "+rn(C,v)+") ==> "+(this._values?rn(this._values[P],v):"X")}return w},i.prototype.toString=function(){return rn(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(v){if(v){if(Bn(v)&&(v=v.toNumber()),!Xt(v)||!Br(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var m=v>0?v:0,D=v<0?-v:0,S=this._size[0],w=this._size[1],C=Math.min(S-D,w-m),F=[],M=[],P=[];P[0]=0;for(var A=m;A<w&&F.length<C;A++)for(var x=this._ptr[A],R=this._ptr[A+1],Z=x;Z<R;Z++){var K=this._index[Z];if(K===A-m+D){F.push(this._values[Z]),M[F.length-1]=K-D;break}}return P.push(F.length),new i({values:F,index:M,ptr:P,size:[C,1]})},i.fromJSON=function(v){return new i(v)},i.diagonal=function(v,m,D,S,w){if(!Jt(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(te){if(Bn(te)&&(te=te.toNumber()),!Xt(te)||!Br(te)||te<1)throw new Error("Size values must be positive integers");return te}),D){if(Bn(D)&&(D=D.toNumber()),!Xt(D)||!Br(D))throw new TypeError("The parameter k must be an integer number")}else D=0;var C=r,F=0;Gn(w)&&(C=e.find(r,[w,w])||r,F=e.convert(0,w));var M=D>0?D:0,P=D<0?-D:0,A=v[0],x=v[1],R=Math.min(A-P,x-M),Z;if(Jt(m)){if(m.length!==R)throw new Error("Invalid value array length");Z=function(oe){return m[oe]}}else if(Yr(m)){var K=m.size();if(K.length!==1||K[0]!==R)throw new Error("Invalid matrix length");Z=function(oe){return m.get([oe])}}else Z=function(){return m};for(var L=[],V=[],q=[],z=0;z<x;z++){q.push(L.length);var Q=z-M;if(Q>=0&&Q<R){var X=Z(Q);C(X,F)||(V.push(Q+P),L.push(X))}}return q.push(L.length),new i({values:L,index:V,ptr:q,size:[A,x]})},i.prototype.swapRows=function(v,m){if(!Xt(v)||!Br(v)||!Xt(m)||!Br(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Qt(v,this._size[0]),Qt(m,this._size[0]),i._swapRows(v,m,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(v,m,D,S,w){for(var C=S[v],F=S[v+1],M=C;M<F;M++)w(D[M],m[M])},i._swapRows=function(v,m,D,S,w,C){for(var F=0;F<D;F++){var M=C[F],P=C[F+1],A=p(v,M,P,w),x=p(m,M,P,w);if(A<P&&x<P&&w[A]===v&&w[x]===m){if(S){var R=S[A];S[A]=S[x],S[x]=R}continue}if(A<P&&w[A]===v&&(x>=P||w[x]!==m)){var Z=S?S[A]:void 0;w.splice(x,0,m),S&&S.splice(x,0,Z),w.splice(x<=A?A+1:A,1),S&&S.splice(x<=A?A+1:A,1);continue}if(x<P&&w[x]===m&&(A>=P||w[A]!==v)){var K=S?S[x]:void 0;w.splice(A,0,v),S&&S.splice(A,0,K),w.splice(A<=x?x+1:x,1),S&&S.splice(A<=x?x+1:x,1)}}},i},{isClass:!0}),N0="matrix",hA=["typed","Matrix","DenseMatrix","SparseMatrix"],dA=Bt(N0,hA,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(N0,{"":function(){return a([])},string:function(s){return a([],s)},"string, string":function(s,l){return a([],s,l)},Array:function(s){return a(s)},Matrix:function(s){return a(s,s.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(o,s,l){if(s==="dense"||s==="default"||s===void 0)return new n(o,l);if(s==="sparse")return new i(o,l);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),L0="unaryMinus",pA=["typed"],gA=Bt(L0,pA,t=>{var{typed:e}=t;return e(L0,{number:g1,"Complex | BigNumber | Fraction":r=>r.neg(),Unit:e.referToSelf(r=>n=>{var i=n.clone();return i.value=e.find(r,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(r=>n=>co(n,r))})}),R0="addScalar",vA=["typed"],mA=Bt(R0,vA,t=>{var{typed:e}=t;return e(R0,{"number, number":d1,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),_A="matAlgo11xS0s",bA=["typed","equalScalar"],DA=Bt(_A,bA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o,s){var l=i._values,p=i._index,f=i._ptr,c=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=c[0],b=c[1],v,m=r,D=0,S=o;typeof d=="string"&&(v=d,m=e.find(r,[v,v]),D=e.convert(0,v),a=e.convert(a,v),S=e.find(o,[v,v]));for(var w=[],C=[],F=[],M=0;M<b;M++){F[M]=C.length;for(var P=f[M],A=f[M+1],x=P;x<A;x++){var R=p[x],Z=s?S(a,l[x]):S(l[x],a);m(Z,D)||(C.push(R),w.push(Z))}}return F[b]=C.length,i.createSparseMatrix({values:w,index:C,ptr:F,size:[g,b],datatype:v})}}),yA="matAlgo12xSfs",wA=["typed","DenseMatrix"],EA=Bt(yA,wA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,o,s){var l=i._values,p=i._index,f=i._ptr,c=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=c[0],b=c[1],v,m=o;typeof d=="string"&&(v=d,a=e.convert(a,v),m=e.find(o,[v,v]));for(var D=[],S=[],w=[],C=0;C<b;C++){for(var F=C+1,M=f[C],P=f[C+1],A=M;A<P;A++){var x=p[A];S[x]=l[A],w[x]=F}for(var R=0;R<g;R++)C===0&&(D[R]=[]),w[R]===F?D[R][C]=s?m(a,S[R]):m(S[R],a):D[R][C]=s?m(a,0):m(0,a)}return new r({data:D,size:[g,b],datatype:v})}}),AA="matAlgo14xDs",CA=["typed"],v1=Bt(AA,CA,t=>{var{typed:e}=t;return function(i,a,o,s){var l=i._data,p=i._size,f=i._datatype,c,d=o;typeof f=="string"&&(c=f,a=e.convert(a,c),d=e.find(o,[c,c]));var g=p.length>0?r(d,0,p,p[0],l,a,s):[];return i.createDenseMatrix({data:g,size:Sr(p),datatype:c})};function r(n,i,a,o,s,l,p){var f=[];if(i===a.length-1)for(var c=0;c<o;c++)f[c]=p?n(l,s[c]):n(s[c],l);else for(var d=0;d<o;d++)f[d]=r(n,i+1,a,a[i+1],s[d],l,p);return f}}),FA="matAlgo01xDSid",SA=["typed"],m1=Bt(FA,SA,t=>{var{typed:e}=t;return function(n,i,a,o){var s=n._data,l=n._size,p=n._datatype,f=i._values,c=i._index,d=i._ptr,g=i._size,b=i._datatype;if(l.length!==g.length)throw new It(l.length,g.length);if(l[0]!==g[0]||l[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+g+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],m=l[1],D=typeof p=="string"&&p===b?p:void 0,S=D?e.find(a,[D,D]):a,w,C,F=[];for(w=0;w<v;w++)F[w]=[];var M=[],P=[];for(C=0;C<m;C++){for(var A=C+1,x=d[C],R=d[C+1],Z=x;Z<R;Z++)w=c[Z],M[w]=o?S(f[Z],s[w][C]):S(s[w][C],f[Z]),P[w]=A;for(w=0;w<v;w++)P[w]===A?F[w][C]=M[w]:F[w][C]=s[w][C]}return n.createDenseMatrix({data:F,size:[v,m],datatype:D})}}),BA="matAlgo04xSidSid",OA=["typed","equalScalar"],MA=Bt(BA,OA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,l=i._index,p=i._ptr,f=i._size,c=i._datatype,d=a._values,g=a._index,b=a._ptr,v=a._size,m=a._datatype;if(f.length!==v.length)throw new It(f.length,v.length);if(f[0]!==v[0]||f[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+v+")");var D=f[0],S=f[1],w,C=r,F=0,M=o;typeof c=="string"&&c===m&&(w=c,C=e.find(r,[w,w]),F=e.convert(0,w),M=e.find(o,[w,w]));var P=s&&d?[]:void 0,A=[],x=[],R=s&&d?[]:void 0,Z=s&&d?[]:void 0,K=[],L=[],V,q,z,Q,X;for(q=0;q<S;q++){x[q]=A.length;var te=q+1;for(Q=p[q],X=p[q+1],z=Q;z<X;z++)V=l[z],A.push(V),K[V]=te,R&&(R[V]=s[z]);for(Q=b[q],X=b[q+1],z=Q;z<X;z++)if(V=g[z],K[V]===te){if(R){var oe=M(R[V],d[z]);C(oe,F)?K[V]=null:R[V]=oe}}else A.push(V),L[V]=te,Z&&(Z[V]=d[z]);if(R&&Z)for(z=x[q];z<A.length;)V=A[z],K[V]===te?(P[z]=R[V],z++):L[V]===te?(P[z]=Z[V],z++):A.splice(z,1)}return x[S]=A.length,i.createSparseMatrix({values:P,index:A,ptr:x,size:[D,S],datatype:w})}}),PA="matAlgo10xSids",kA=["typed","DenseMatrix"],_1=Bt(PA,kA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,o,s){var l=i._values,p=i._index,f=i._ptr,c=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=c[0],b=c[1],v,m=o;typeof d=="string"&&(v=d,a=e.convert(a,v),m=e.find(o,[v,v]));for(var D=[],S=[],w=[],C=0;C<b;C++){for(var F=C+1,M=f[C],P=f[C+1],A=M;A<P;A++){var x=p[A];S[x]=l[A],w[x]=F}for(var R=0;R<g;R++)C===0&&(D[R]=[]),w[R]===F?D[R][C]=s?m(a,S[R]):m(S[R],a):D[R][C]=a}return new r({data:D,size:[g,b],datatype:v})}}),TA="matAlgo13xDD",IA=["typed"],xA=Bt(TA,IA,t=>{var{typed:e}=t;return function(i,a,o){var s=i._data,l=i._size,p=i._datatype,f=a._data,c=a._size,d=a._datatype,g=[];if(l.length!==c.length)throw new It(l.length,c.length);for(var b=0;b<l.length;b++){if(l[b]!==c[b])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");g[b]=l[b]}var v,m=o;typeof p=="string"&&p===d&&(v=p,m=e.find(o,[v,v]));var D=g.length>0?r(m,0,g,g[0],s,f):[];return i.createDenseMatrix({data:D,size:g,datatype:v})};function r(n,i,a,o,s,l){var p=[];if(i===a.length-1)for(var f=0;f<o;f++)p[f]=n(s[f],l[f]);else for(var c=0;c<o;c++)p[c]=r(n,i+1,a,a[i+1],s[c],l[c]);return p}}),NA="broadcast",LA=["concat"],RA=Bt(NA,LA,t=>{var{concat:e}=t;return function(a,o){var s=Math.max(a._size.length,o._size.length);if(a._size.length===o._size.length&&a._size.every((m,D)=>m===o._size[D]))return[a,o];for(var l=r(a._size,s,0),p=r(o._size,s,0),f=[],c=0;c<s;c++)f[c]=Math.max(l[c],p[c]);for(var d=0;d<s;d++)i(l,f,d),i(p,f,d);var g=a.clone(),b=o.clone();g._size.length<s?g.reshape(r(g._size,s,1)):b._size.length<s&&b.reshape(r(b._size,s,1));for(var v=0;v<s;v++)g._size[v]<f[v]&&(g=n(g,f[v],v)),b._size[v]<f[v]&&(b=n(b,f[v],v));return[g,b]};function r(a,o,s){return[...Array(o-a.length).fill(s),...a]}function n(a,o,s){return e(...Array(o).fill(a),s)}function i(a,o,s){if(a[s]<o[s]&a[s]>1)throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(a,") not possible to broadcast dimension ").concat(s," with size ").concat(a[s]," to size ").concat(o[s]))}}),UA="matrixAlgorithmSuite",VA=["typed","matrix","concat"],b1=Bt(UA,VA,t=>{var{typed:e,matrix:r,concat:n}=t,i=xA({typed:e}),a=v1({typed:e}),o=RA({concat:n});return function(l){var p=l.elop,f=l.SD||l.DS,c;p?(c={"DenseMatrix, DenseMatrix":(v,m)=>i(...o(v,m),p),"Array, Array":(v,m)=>i(...o(r(v),r(m)),p).valueOf(),"Array, DenseMatrix":(v,m)=>i(...o(r(v),m),p),"DenseMatrix, Array":(v,m)=>i(...o(v,r(m)),p)},l.SS&&(c["SparseMatrix, SparseMatrix"]=(v,m)=>l.SS(...o(v,m),p,!1)),l.DS&&(c["DenseMatrix, SparseMatrix"]=(v,m)=>l.DS(...o(v,m),p,!1),c["Array, SparseMatrix"]=(v,m)=>l.DS(...o(r(v),m),p,!1)),f&&(c["SparseMatrix, DenseMatrix"]=(v,m)=>f(...o(m,v),p,!0),c["SparseMatrix, Array"]=(v,m)=>f(...o(r(m),v),p,!0))):(c={"DenseMatrix, DenseMatrix":e.referToSelf(v=>(m,D)=>i(...o(m,D),v)),"Array, Array":e.referToSelf(v=>(m,D)=>i(...o(r(m),r(D)),v).valueOf()),"Array, DenseMatrix":e.referToSelf(v=>(m,D)=>i(...o(r(m),D),v)),"DenseMatrix, Array":e.referToSelf(v=>(m,D)=>i(...o(m,r(D)),v))},l.SS&&(c["SparseMatrix, SparseMatrix"]=e.referToSelf(v=>(m,D)=>l.SS(...o(m,D),v,!1))),l.DS&&(c["DenseMatrix, SparseMatrix"]=e.referToSelf(v=>(m,D)=>l.DS(...o(m,D),v,!1)),c["Array, SparseMatrix"]=e.referToSelf(v=>(m,D)=>l.DS(...o(r(m),D),v,!1))),f&&(c["SparseMatrix, DenseMatrix"]=e.referToSelf(v=>(m,D)=>f(...o(D,m),v,!0)),c["SparseMatrix, Array"]=e.referToSelf(v=>(m,D)=>f(...o(r(D),m),v,!0))));var d=l.scalar||"any",g=l.Ds||l.Ss;g&&(p?(c["DenseMatrix,"+d]=(v,m)=>a(v,m,p,!1),c[d+", DenseMatrix"]=(v,m)=>a(m,v,p,!0),c["Array,"+d]=(v,m)=>a(r(v),m,p,!1).valueOf(),c[d+", Array"]=(v,m)=>a(r(m),v,p,!0).valueOf()):(c["DenseMatrix,"+d]=e.referToSelf(v=>(m,D)=>a(m,D,v,!1)),c[d+", DenseMatrix"]=e.referToSelf(v=>(m,D)=>a(D,m,v,!0)),c["Array,"+d]=e.referToSelf(v=>(m,D)=>a(r(m),D,v,!1).valueOf()),c[d+", Array"]=e.referToSelf(v=>(m,D)=>a(r(D),m,v,!0).valueOf())));var b=l.sS!==void 0?l.sS:l.Ss;return p?(l.Ss&&(c["SparseMatrix,"+d]=(v,m)=>l.Ss(v,m,p,!1)),b&&(c[d+", SparseMatrix"]=(v,m)=>b(m,v,p,!0))):(l.Ss&&(c["SparseMatrix,"+d]=e.referToSelf(v=>(m,D)=>l.Ss(m,D,v,!1))),b&&(c[d+", SparseMatrix"]=e.referToSelf(v=>(m,D)=>b(D,m,v,!0)))),p&&p.signatures&&dw(c,p.signatures),c}}),jA="matAlgo03xDSf",zA=["typed"],qA=Bt(jA,zA,t=>{var{typed:e}=t;return function(n,i,a,o){var s=n._data,l=n._size,p=n._datatype,f=i._values,c=i._index,d=i._ptr,g=i._size,b=i._datatype;if(l.length!==g.length)throw new It(l.length,g.length);if(l[0]!==g[0]||l[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+g+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],m=l[1],D,S=0,w=a;typeof p=="string"&&p===b&&(D=p,S=e.convert(0,D),w=e.find(a,[D,D]));for(var C=[],F=0;F<v;F++)C[F]=[];for(var M=[],P=[],A=0;A<m;A++){for(var x=A+1,R=d[A],Z=d[A+1],K=R;K<Z;K++){var L=c[K];M[L]=o?w(f[K],s[L][A]):w(s[L][A],f[K]),P[L]=x}for(var V=0;V<v;V++)P[V]===x?C[V][A]=M[V]:C[V][A]=o?w(S,s[V][A]):w(s[V][A],S)}return n.createDenseMatrix({data:C,size:[v,m],datatype:D})}}),WA="matAlgo05xSfSf",HA=["typed","equalScalar"],$A=Bt(WA,HA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,l=i._index,p=i._ptr,f=i._size,c=i._datatype,d=a._values,g=a._index,b=a._ptr,v=a._size,m=a._datatype;if(f.length!==v.length)throw new It(f.length,v.length);if(f[0]!==v[0]||f[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+v+")");var D=f[0],S=f[1],w,C=r,F=0,M=o;typeof c=="string"&&c===m&&(w=c,C=e.find(r,[w,w]),F=e.convert(0,w),M=e.find(o,[w,w]));var P=s&&d?[]:void 0,A=[],x=[],R=P?[]:void 0,Z=P?[]:void 0,K=[],L=[],V,q,z,Q;for(q=0;q<S;q++){x[q]=A.length;var X=q+1;for(z=p[q],Q=p[q+1];z<Q;z++)V=l[z],A.push(V),K[V]=X,R&&(R[V]=s[z]);for(z=b[q],Q=b[q+1];z<Q;z++)V=g[z],K[V]!==X&&A.push(V),L[V]=X,Z&&(Z[V]=d[z]);if(P)for(z=x[q];z<A.length;){V=A[z];var te=K[V],oe=L[V];if(te===X||oe===X){var _e=te===X?R[V]:F,be=oe===X?Z[V]:F,Be=M(_e,be);C(Be,F)?A.splice(z,1):(P.push(Be),z++)}}}return x[S]=A.length,i.createSparseMatrix({values:P,index:A,ptr:x,size:[D,S],datatype:w})}}),GA="multiplyScalar",KA=["typed"],YA=Bt(GA,KA,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":p1,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),U0="multiply",ZA=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],JA=Bt(U0,ZA,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:a,dot:o}=t,s=DA({typed:e,equalScalar:a}),l=v1({typed:e});function p(F,M){switch(F.length){case 1:switch(M.length){case 1:if(F[0]!==M[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(F[0]!==M[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+F[0]+") must match Matrix rows ("+M[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+M.length+" dimensions)")}break;case 2:switch(M.length){case 1:if(F[1]!==M[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+F[1]+") must match Vector length ("+M[0]+")");break;case 2:if(F[1]!==M[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+F[1]+") must match Matrix B rows ("+M[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+M.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+F.length+" dimensions)")}}function f(F,M,P){if(P===0)throw new Error("Cannot multiply two empty vectors");return o(F,M)}function c(F,M){if(M.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(F,M)}function d(F,M){var P=F._data,A=F._size,x=F._datatype,R=M._data,Z=M._size,K=M._datatype,L=A[0],V=Z[1],q,z=n,Q=i;x&&K&&x===K&&typeof x=="string"&&(q=x,z=e.find(n,[q,q]),Q=e.find(i,[q,q]));for(var X=[],te=0;te<V;te++){for(var oe=Q(P[0],R[0][te]),_e=1;_e<L;_e++)oe=z(oe,Q(P[_e],R[_e][te]));X[te]=oe}return F.createDenseMatrix({data:X,size:[V],datatype:q})}var g=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":S}),b=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":m,"DenseMatrix, SparseMatrix":D,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":C});function v(F,M){var P=F._data,A=F._size,x=F._datatype,R=M._data,Z=M._datatype,K=A[0],L=A[1],V,q=n,z=i;x&&Z&&x===Z&&typeof x=="string"&&(V=x,q=e.find(n,[V,V]),z=e.find(i,[V,V]));for(var Q=[],X=0;X<K;X++){for(var te=P[X],oe=z(te[0],R[0]),_e=1;_e<L;_e++)oe=q(oe,z(te[_e],R[_e]));Q[X]=oe}return F.createDenseMatrix({data:Q,size:[K],datatype:V})}function m(F,M){var P=F._data,A=F._size,x=F._datatype,R=M._data,Z=M._size,K=M._datatype,L=A[0],V=A[1],q=Z[1],z,Q=n,X=i;x&&K&&x===K&&typeof x=="string"&&(z=x,Q=e.find(n,[z,z]),X=e.find(i,[z,z]));for(var te=[],oe=0;oe<L;oe++){var _e=P[oe];te[oe]=[];for(var be=0;be<q;be++){for(var Be=X(_e[0],R[0][be]),ke=1;ke<V;ke++)Be=Q(Be,X(_e[ke],R[ke][be]));te[oe][be]=Be}}return F.createDenseMatrix({data:te,size:[L,q],datatype:z})}function D(F,M){var P=F._data,A=F._size,x=F._datatype,R=M._values,Z=M._index,K=M._ptr,L=M._size,V=M._datatype;if(!R)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var q=A[0],z=L[1],Q,X=n,te=i,oe=a,_e=0;x&&V&&x===V&&typeof x=="string"&&(Q=x,X=e.find(n,[Q,Q]),te=e.find(i,[Q,Q]),oe=e.find(a,[Q,Q]),_e=e.convert(0,Q));for(var be=[],Be=[],ke=[],Te=M.createSparseMatrix({values:be,index:Be,ptr:ke,size:[q,z],datatype:Q}),Le=0;Le<z;Le++){ke[Le]=Be.length;var Ne=K[Le],Ye=K[Le+1];if(Ye>Ne)for(var Qe=0,Je=0;Je<q;Je++){for(var ot=Je+1,bt=void 0,Ue=Ne;Ue<Ye;Ue++){var lt=Z[Ue];Qe!==ot?(bt=te(P[Je][lt],R[Ue]),Qe=ot):bt=X(bt,te(P[Je][lt],R[Ue]))}Qe===ot&&!oe(bt,_e)&&(Be.push(Je),be.push(bt))}}return ke[z]=Be.length,Te}function S(F,M){var P=F._values,A=F._index,x=F._ptr,R=F._datatype;if(!P)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var Z=M._data,K=M._datatype,L=F._size[0],V=M._size[0],q=[],z=[],Q=[],X,te=n,oe=i,_e=a,be=0;R&&K&&R===K&&typeof R=="string"&&(X=R,te=e.find(n,[X,X]),oe=e.find(i,[X,X]),_e=e.find(a,[X,X]),be=e.convert(0,X));var Be=[],ke=[];Q[0]=0;for(var Te=0;Te<V;Te++){var Le=Z[Te];if(!_e(Le,be))for(var Ne=x[Te],Ye=x[Te+1],Qe=Ne;Qe<Ye;Qe++){var Je=A[Qe];ke[Je]?Be[Je]=te(Be[Je],oe(Le,P[Qe])):(ke[Je]=!0,z.push(Je),Be[Je]=oe(Le,P[Qe]))}}for(var ot=z.length,bt=0;bt<ot;bt++){var Ue=z[bt];q[bt]=Be[Ue]}return Q[1]=z.length,F.createSparseMatrix({values:q,index:z,ptr:Q,size:[L,1],datatype:X})}function w(F,M){var P=F._values,A=F._index,x=F._ptr,R=F._datatype;if(!P)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var Z=M._data,K=M._datatype,L=F._size[0],V=M._size[0],q=M._size[1],z,Q=n,X=i,te=a,oe=0;R&&K&&R===K&&typeof R=="string"&&(z=R,Q=e.find(n,[z,z]),X=e.find(i,[z,z]),te=e.find(a,[z,z]),oe=e.convert(0,z));for(var _e=[],be=[],Be=[],ke=F.createSparseMatrix({values:_e,index:be,ptr:Be,size:[L,q],datatype:z}),Te=[],Le=[],Ne=0;Ne<q;Ne++){Be[Ne]=be.length;for(var Ye=Ne+1,Qe=0;Qe<V;Qe++){var Je=Z[Qe][Ne];if(!te(Je,oe))for(var ot=x[Qe],bt=x[Qe+1],Ue=ot;Ue<bt;Ue++){var lt=A[Ue];Le[lt]!==Ye?(Le[lt]=Ye,be.push(lt),Te[lt]=X(Je,P[Ue])):Te[lt]=Q(Te[lt],X(Je,P[Ue]))}}for(var kt=Be[Ne],yr=be.length,Mt=kt;Mt<yr;Mt++){var wr=be[Mt];_e[Mt]=Te[wr]}}return Be[q]=be.length,ke}function C(F,M){var P=F._values,A=F._index,x=F._ptr,R=F._datatype,Z=M._values,K=M._index,L=M._ptr,V=M._datatype,q=F._size[0],z=M._size[1],Q=P&&Z,X,te=n,oe=i;R&&V&&R===V&&typeof R=="string"&&(X=R,te=e.find(n,[X,X]),oe=e.find(i,[X,X]));for(var _e=Q?[]:void 0,be=[],Be=[],ke=F.createSparseMatrix({values:_e,index:be,ptr:Be,size:[q,z],datatype:X}),Te=Q?[]:void 0,Le=[],Ne,Ye,Qe,Je,ot,bt,Ue,lt,kt=0;kt<z;kt++){Be[kt]=be.length;var yr=kt+1;for(ot=L[kt],bt=L[kt+1],Je=ot;Je<bt;Je++)if(lt=K[Je],Q)for(Ye=x[lt],Qe=x[lt+1],Ne=Ye;Ne<Qe;Ne++)Ue=A[Ne],Le[Ue]!==yr?(Le[Ue]=yr,be.push(Ue),Te[Ue]=oe(Z[Je],P[Ne])):Te[Ue]=te(Te[Ue],oe(Z[Je],P[Ne]));else for(Ye=x[lt],Qe=x[lt+1],Ne=Ye;Ne<Qe;Ne++)Ue=A[Ne],Le[Ue]!==yr&&(Le[Ue]=yr,be.push(Ue));if(Q)for(var Mt=Be[kt],wr=be.length,Ke=Mt;Ke<wr;Ke++){var tr=be[Ke];_e[Ke]=Te[tr]}}return Be[z]=be.length,ke}return e(U0,i,{"Array, Array":e.referTo("Matrix, Matrix",F=>(M,P)=>{p(Ti(M),Ti(P));var A=F(r(M),r(P));return Yr(A)?A.valueOf():A}),"Matrix, Matrix":function(M,P){var A=M.size(),x=P.size();return p(A,x),A.length===1?x.length===1?f(M,P,A[0]):c(M,P):x.length===1?g(M,P):b(M,P)},"Matrix, Array":e.referTo("Matrix,Matrix",F=>(M,P)=>F(M,r(P))),"Array, Matrix":e.referToSelf(F=>(M,P)=>F(r(M,P.storage()),P)),"SparseMatrix, any":function(M,P){return s(M,P,i,!1)},"DenseMatrix, any":function(M,P){return l(M,P,i,!1)},"any, SparseMatrix":function(M,P){return s(P,M,i,!0)},"any, DenseMatrix":function(M,P){return l(P,M,i,!0)},"Array, any":function(M,P){return l(r(M),P,i,!1).valueOf()},"any, Array":function(M,P){return l(r(P),M,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(F=>(M,P,A)=>{for(var x=F(M,P),R=0;R<A.length;R++)x=F(x,A[R]);return x})})}),V0="subtract",QA=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix","concat"],XA=Bt(V0,QA,t=>{var{typed:e,matrix:r,equalScalar:n,addScalar:i,unaryMinus:a,DenseMatrix:o,concat:s}=t,l=m1({typed:e}),p=qA({typed:e}),f=$A({typed:e,equalScalar:n}),c=_1({typed:e,DenseMatrix:o}),d=EA({typed:e,DenseMatrix:o}),g=b1({typed:e,matrix:r,concat:s});return e(V0,{"number, number":(b,v)=>b-v,"Complex, Complex":(b,v)=>b.sub(v),"BigNumber, BigNumber":(b,v)=>b.minus(v),"Fraction, Fraction":(b,v)=>b.sub(v),"Unit, Unit":e.referToSelf(b=>(v,m)=>{if(v.value===null)throw new Error("Parameter x contains a unit with undefined value");if(m.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!v.equalBase(m))throw new Error("Units do not match");var D=v.clone();return D.value=e.find(b,[D.valueType(),m.valueType()])(D.value,m.value),D.fixPrefix=!1,D})},g({SS:f,DS:l,SD:p,Ss:d,sS:c}))}),j0="conj",e3=["typed"],t3=Bt(j0,e3,t=>{var{typed:e}=t;return e(j0,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":e.referToSelf(r=>n=>co(n,r))})}),z0="concat",r3=["typed","matrix","isInteger"],n3=Bt(z0,r3,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(z0,{"...Array | Matrix | number | BigNumber":function(a){var o,s=a.length,l=-1,p,f=!1,c=[];for(o=0;o<s;o++){var d=a[o];if(Yr(d)&&(f=!0),Xt(d)||Bn(d)){if(o!==s-1)throw new Error("Dimension must be specified as last argument");if(p=l,l=d.valueOf(),!n(l))throw new TypeError("Integer number expected for dimension");if(l<0||o>0&&l>p)throw new ea(l,p+1)}else{var g=Sr(d).valueOf(),b=Ti(g);if(c[o]=g,p=l,l=b.length-1,o>0&&l!==p)throw new It(p+1,l+1)}}if(c.length===0)throw new SyntaxError("At least one matrix expected");for(var v=c.shift();c.length;)v=D1(v,c.shift(),l,0);return f?r(v):v},"...string":function(a){return a.join("")}})});function D1(t,e,r,n){if(n<r){if(t.length!==e.length)throw new It(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=D1(t[a],e[a],r,n+1);return i}else return t.concat(e)}function i3(){throw new Error('No "matrix" implementation available')}var q0="size",a3=["typed","config","?matrix"],u3=Bt(q0,a3,t=>{var{typed:e,config:r,matrix:n}=t;return e(q0,{Matrix:function(a){return a.create(a.size())},Array:Ti,string:function(a){return r.matrix==="Array"?[a.length]:n([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return r.matrix==="Array"?[]:n?n([]):i3()}})}),W0="add",s3=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],o3=Bt(W0,s3,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:a,SparseMatrix:o,concat:s}=t,l=m1({typed:e}),p=MA({typed:e,equalScalar:i}),f=_1({typed:e,DenseMatrix:a}),c=b1({typed:e,matrix:r,concat:s});return e(W0,{"any, any":n,"any, any, ...any":e.referToSelf(d=>(g,b,v)=>{for(var m=d(g,b),D=0;D<v.length;D++)m=d(m,v[D]);return m})},c({elop:n,DS:l,SS:p,Ss:f}))}),H0="dot",l3=["typed","addScalar","multiplyScalar","conj","size"],f3=Bt(H0,l3,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:a}=t;return e(H0,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":l});function o(f,c){var d=p(f),g=p(c),b,v;if(d.length===1)b=d[0];else if(d.length===2&&d[1]===1)b=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(g.length===1)v=g[0];else if(g.length===2&&g[1]===1)v=g[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+g.join(", ")+")");if(b!==v)throw new RangeError("Vectors must have equal length ("+b+" != "+v+")");if(b===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return b}function s(f,c){var d=o(f,c),g=Yr(f)?f._data:f,b=Yr(f)?f._datatype:void 0,v=Yr(c)?c._data:c,m=Yr(c)?c._datatype:void 0,D=p(f).length===2,S=p(c).length===2,w=r,C=n;if(b&&m&&b===m&&typeof b=="string"){var F=b;w=e.find(r,[F,F]),C=e.find(n,[F,F])}if(!D&&!S){for(var M=C(i(g[0]),v[0]),P=1;P<d;P++)M=w(M,C(i(g[P]),v[P]));return M}if(!D&&S){for(var A=C(i(g[0]),v[0][0]),x=1;x<d;x++)A=w(A,C(i(g[x]),v[x][0]));return A}if(D&&!S){for(var R=C(i(g[0][0]),v[0]),Z=1;Z<d;Z++)R=w(R,C(i(g[Z][0]),v[Z]));return R}if(D&&S){for(var K=C(i(g[0][0]),v[0][0]),L=1;L<d;L++)K=w(K,C(i(g[L][0]),v[L][0]));return K}}function l(f,c){o(f,c);for(var d=f._index,g=f._values,b=c._index,v=c._values,m=0,D=r,S=n,w=0,C=0;w<d.length&&C<b.length;){var F=d[w],M=b[C];if(F<M){w++;continue}if(F>M){C++;continue}F===M&&(m=D(m,S(g[w],v[C])),w++,C++)}return m}function p(f){return Yr(f)?f.size():a(f)}}),c3=VE({config:ao}),h3=WE({}),d3=KE({}),Yf=JE({}),ho=eA({Matrix:Yf}),sn=qw({BigNumber:c3,Complex:h3,DenseMatrix:ho,Fraction:d3}),po=mA({typed:sn}),p3=t3({typed:sn}),go=oA({config:ao,typed:sn}),g3=rA({typed:sn}),y1=YA({typed:sn}),w1=cA({Matrix:Yf,equalScalar:go,typed:sn}),v3=gA({typed:sn}),Cu=dA({DenseMatrix:ho,Matrix:Yf,SparseMatrix:w1,typed:sn}),m3=u3({matrix:Cu,config:ao,typed:sn}),E1=n3({isInteger:g3,matrix:Cu,typed:sn}),Nr=o3({DenseMatrix:ho,SparseMatrix:w1,addScalar:po,concat:E1,equalScalar:go,matrix:Cu,typed:sn}),_3=f3({addScalar:po,conj:p3,multiplyScalar:y1,size:m3,typed:sn}),zr=JA({addScalar:po,dot:_3,equalScalar:go,matrix:Cu,multiplyScalar:y1,typed:sn}),vs=XA({DenseMatrix:ho,addScalar:po,concat:E1,equalScalar:go,matrix:Cu,typed:sn,unaryMinus:v3});function b3(t){let e,r,n;return{c(){e=gt("circle"),this.h()},l(i){e=vt(i,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),j(e).forEach(O),this.h()},h(){B(e,"cx",r=t[0][0]),B(e,"cy",n=t[0][1]),B(e,"r",t[1]),B(e,"stroke",t[3]),B(e,"stroke-width",t[2]),Ot(e,"fill","rgba(0,0,0,0)")},m(i,a){se(i,e,a)},p(i,[a]){a&1&&r!==(r=i[0][0])&&B(e,"cx",r),a&1&&n!==(n=i[0][1])&&B(e,"cy",n),a&2&&B(e,"r",i[1]),a&8&&B(e,"stroke",i[3]),a&4&&B(e,"stroke-width",i[2])},i:Pe,o:Pe,d(i){i&&O(e)}}}function D3(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class Zf extends Xe{constructor(e){super(),et(this,e,D3,b3,tt,{xy:0,radius:1,stroke:2,color:3})}}function y3(t){let e,r,n,i,a;return{c(){e=gt("circle"),this.h()},l(o){e=vt(o,"circle",{cx:!0,cy:!0,r:!0}),j(e).forEach(O),this.h()},h(){B(e,"cx",r=t[0][0]),B(e,"cy",n=t[0][1]),B(e,"r",t[1]),Ot(e,"fill",t[2])},m(o,s){se(o,e,s),i||(a=[De(e,"mouseover",t[3]),De(e,"mouseout",t[4]),De(e,"mousedown",t[5]),De(e,"touchstart",t[5])],i=!0)},p(o,[s]){s&1&&r!==(r=o[0][0])&&B(e,"cx",r),s&1&&n!==(n=o[0][1])&&B(e,"cy",n),s&2&&B(e,"r",o[1]),s&4&&Ot(e,"fill",o[2])},i:Pe,o:Pe,d(o){o&&O(e),i=!1,qt(a)}}}function w3(t,e,r){let{xy:n=[100,100]}=e,{radius:i=5}=e,{color:a="black"}=e,{hoverColor:o="white"}=e,{handleMouseDown:s=d=>{}}=e,l=a;function p(){r(2,l=o)}function f(){r(2,l=a)}function c(d){s(d)}return t.$$set=d=>{"xy"in d&&r(0,n=d.xy),"radius"in d&&r(1,i=d.radius),"color"in d&&r(6,a=d.color),"hoverColor"in d&&r(7,o=d.hoverColor),"handleMouseDown"in d&&r(8,s=d.handleMouseDown)},[n,i,l,p,f,c,a,o,s]}class Pa extends Xe{constructor(e){super(),et(this,e,w3,y3,tt,{xy:0,radius:1,color:6,hoverColor:7,handleMouseDown:8})}}function E3(t){let e,r,n,i,a;return{c(){e=gt("line"),this.h()},l(o){e=vt(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-dasharray":!0,"stroke-width":!0}),j(e).forEach(O),this.h()},h(){B(e,"x1",r=t[0][0]),B(e,"y1",n=t[0][1]),B(e,"x2",i=t[1][0]),B(e,"y2",a=t[1][1]),B(e,"stroke",t[3]),B(e,"stroke-dasharray","10,10"),B(e,"stroke-width",t[2])},m(o,s){se(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&B(e,"x1",r),s&1&&n!==(n=o[0][1])&&B(e,"y1",n),s&2&&i!==(i=o[1][0])&&B(e,"x2",i),s&2&&a!==(a=o[1][1])&&B(e,"y2",a),s&8&&B(e,"stroke",o[3]),s&4&&B(e,"stroke-width",o[2])},i:Pe,o:Pe,d(o){o&&O(e)}}}function A3(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class A1 extends Xe{constructor(e){super(),et(this,e,A3,E3,tt,{p1:0,p2:1,stroke:2,color:3})}}function C3(t){let e,r;return{c(){e=W("p"),r=Ce(t[2]),this.h()},l(n){e=H(n,"P",{});var i=j(e);r=Fe(i,t[2]),i.forEach(O),this.h()},h(){Ot(e,"color",t[3]),Ot(e,"user-select","none"),Ot(e,"margin","0"),Ot(e,"pointer-events","none"),Ot(e,"text-align",t[4]),Ot(e,"font-size",`${t[5]}px`),Ot(e,"font-family","sans-serif"),Ot(e,"font-style","italic")},m(n,i){se(n,e,i),T(e,r)},p(n,i){i&4&&zt(r,n[2]),i&8&&Ot(e,"color",n[3]),i&16&&Ot(e,"text-align",n[4]),i&32&&Ot(e,"font-size",`${n[5]}px`)},d(n){n&&O(e)}}}function F3(t){let e,r;return{c(){e=W("img"),this.h()},l(n){e=H(n,"IMG",{src:!0}),this.h()},h(){E0(e.src,r=t[2])||B(e,"src",r),Ot(e,"user-select","none"),Ot(e,"width","100%"),Ot(e,"height","100%"),Ot(e,"object-fit","contain")},m(n,i){se(n,e,i)},p(n,i){i&4&&!E0(e.src,r=n[2])&&B(e,"src",r)},d(n){n&&O(e)}}}function S3(t){let e,r,n,i,a,o,s;function l(c,d){return d&4&&(n=null),n==null&&(n=!!c[2].startsWith("http")),n?F3:C3}let p=l(t,-1),f=p(t);return{c(){e=gt("foreignObject"),r=W("div"),f.c(),this.h()},l(c){e=vt(c,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var d=j(e);r=H(d,"DIV",{class:!0});var g=j(r);f.l(g),g.forEach(O),d.forEach(O),this.h()},h(){B(r,"class","h-full flex flex-col justify-center"),B(e,"x",i=t[0][0]),B(e,"y",a=t[0][1]),B(e,"width",o=t[1][0]),B(e,"height",s=t[1][1])},m(c,d){se(c,e,d),T(e,r),f.m(r,null)},p(c,[d]){p===(p=l(c,d))&&f?f.p(c,d):(f.d(1),f=p(c),f&&(f.c(),f.m(r,null))),d&1&&i!==(i=c[0][0])&&B(e,"x",i),d&1&&a!==(a=c[0][1])&&B(e,"y",a),d&2&&o!==(o=c[1][0])&&B(e,"width",o),d&2&&s!==(s=c[1][1])&&B(e,"height",s)},i:Pe,o:Pe,d(c){c&&O(e),f.d()}}}function B3(t,e,r){let{xy:n=[100,100]}=e,{wh:i=[100,100]}=e,{text:a=""}=e,{color:o="rgba(96,117,151, 1)"}=e,{textAlign:s="center"}=e,{fontSize:l=12}=e;return t.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,i=p.wh),"text"in p&&r(2,a=p.text),"color"in p&&r(3,o=p.color),"textAlign"in p&&r(4,s=p.textAlign),"fontSize"in p&&r(5,l=p.fontSize)},[n,i,a,o,s,l]}class vo extends Xe{constructor(e){super(),et(this,e,B3,S3,tt,{xy:0,wh:1,text:2,color:3,textAlign:4,fontSize:5})}}function O3(t){let e,r,n,i,a,o,s,l,p,f,c;return{c(){e=gt("circle"),i=Ee(),a=gt("foreignObject"),o=W("p"),s=Ce(t[4]),this.h()},l(d){e=vt(d,"circle",{cx:!0,cy:!0,r:!0}),j(e).forEach(O),i=Ae(d),a=vt(d,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var g=j(a);o=H(g,"P",{style:!0,class:!0});var b=j(o);s=Fe(b,t[4]),b.forEach(O),g.forEach(O),this.h()},h(){B(e,"cx",r=t[0][0]),B(e,"cy",n=t[0][1]),B(e,"r",t[1]),Ot(e,"fill",t[3]),Ot(o,"color",t[2]),Ot(o,"user-select","none"),Ot(o,"margin","0"),B(o,"class","heavy svelte-6if1p2"),B(a,"x",l=t[0][0]-t[1]),B(a,"y",p=t[0][1]-t[1]),B(a,"width",f=t[1]*2),B(a,"height",c=t[1]*2)},m(d,g){se(d,e,g),se(d,i,g),se(d,a,g),T(a,o),T(o,s)},p(d,[g]){g&1&&r!==(r=d[0][0])&&B(e,"cx",r),g&1&&n!==(n=d[0][1])&&B(e,"cy",n),g&2&&B(e,"r",d[1]),g&8&&Ot(e,"fill",d[3]),g&16&&zt(s,d[4]),g&4&&Ot(o,"color",d[2]),g&3&&l!==(l=d[0][0]-d[1])&&B(a,"x",l),g&3&&p!==(p=d[0][1]-d[1])&&B(a,"y",p),g&2&&f!==(f=d[1]*2)&&B(a,"width",f),g&2&&c!==(c=d[1]*2)&&B(a,"height",c)},i:Pe,o:Pe,d(d){d&&O(e),d&&O(i),d&&O(a)}}}function M3(t,e,r){let{xy:n=[100,100]}=e,{radius:i=25}=e,{textColor:a="rgba(96,117,151, 1)"}=e,{bgColor:o="black"}=e,{weight:s=""}=e;return t.$$set=l=>{"xy"in l&&r(0,n=l.xy),"radius"in l&&r(1,i=l.radius),"textColor"in l&&r(2,a=l.textColor),"bgColor"in l&&r(3,o=l.bgColor),"weight"in l&&r(4,s=l.weight)},[n,i,a,o,s]}class P3 extends Xe{constructor(e){super(),et(this,e,M3,O3,tt,{xy:0,radius:1,textColor:2,bgColor:3,weight:4})}}function Ln(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=360+Math.atan2(i,n)*180/Math.PI,o=Math.sqrt(n*n+i*i);return[a%360,o/r]}function Lr(t,e,r){const n=e[0]%360*Math.PI/180,i=[r*e[1]*Math.cos(n),r*e[1]*Math.sin(n)];return Nr(t,i)}function vu(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=Math.sqrt(n*n+i*i),o=r/a,s=e[0]+n*o,l=e[1]+i*o;return[s,l]}function k3(t,e,r){const n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)<r}function Jf(t,e){const r=e%360*Math.PI/180;let n,i;const a=Math.cos(r),o=Math.sin(r);return n=(t[0]+5)*-1.2*a,i=(t[1]+5)*-1.2*o,n-=t[0],i-=t[1],[n,i]}function jr(t){return t<0?360+-1*(Math.abs(t)%360):t>360?t%360:t}function T3(t){return Math.round(t*100)}function an(t){return Math.round(Math.max(1-Math.pow(1-t,2),.25)*100)/100}function mo(t){let e="parsedWeight";switch(t){case pt.Circle:e="circleWeight";break;case pt.Bars:e="barWeight";break;case pt.Embed:e="embedWeight";break;case pt.Pie:e="pieWeight";break;case pt.Ring:e="ringWeight";break;case pt.Random:e="randomWeight";break}return e}function I3(t){const e=t.weightMode,r=mo(e);return t.weightedPrompts?Math.max(...Object.values(t.weightedPrompts).map(n=>n[r])):0}function x3(t){const e=t.weightMode,r=mo(e);return t.weightedPrompts?Object.values(t.weightedPrompts).reduce((n,i)=>n+i[r],0):0}function $0(t,e){const r=t.weightMode,n=mo(r);return t.weightedPrompts[e]?t.weightedPrompts[e][n]/I3(t):0}function Kn(t,e){const r=t.weightMode,n=mo(r);if(!t.weightedPrompts[e])return 0;const i=t.weightedPrompts[e][n];return T3((i||0)/x3(t))}function N3(t,e,r){const a=r*.6,o=Math.floor(t/a);return Math.ceil(e/o)*r*1.2}function qr(t,e,r){const n=N3(t,e,r)+10;return[t,n]}function $t(t){let e=t;if(t.length>40){const r=t.split(",");r.length>1?e=r[0]+"...":e=t.slice(0,20)+"..."}return e}function Oa(t,e){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function ka(t){return zr(t,.5)}function Pi(t){const e=t.currentTarget;if(!e)throw new Error("No SVG element found");var r=e.createSVGPoint();t instanceof TouchEvent?(r.x=t.touches[0].clientX,r.y=t.touches[0].clientY):(r.x=t.clientX,r.y=t.clientY);const n=e.getScreenCTM();if(!n)throw new Error("No DOM Matrix found");const i=r.matrixTransform(n.inverse());return[i.x,i.y]}function Rs(t){const e=t.reduce((r,n)=>Nr(r,n),[0,0]);return zr(e,1/t.length)}function G0(t,e,r){const n=t.slice();return n[20]=e[r][0],n[21]=e[r][1],n}function K0(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,a;e=new Zf({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),s=[];for(let f=0;f<o.length;f+=1)s[f]=Y0(G0(t,o,f));const l=f=>me(s[f],1,1,()=>{s[f]=null});let p=n&&Z0(t);return{c(){Ve(e.$$.fragment);for(let f=0;f<s.length;f+=1)s[f].c();r=St(),p&&p.c(),i=St()},l(f){je(e.$$.fragment,f);for(let c=0;c<s.length;c+=1)s[c].l(f);r=St(),p&&p.l(f),i=St()},m(f,c){ze(e,f,c);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(f,c);se(f,r,c),p&&p.m(f,c),se(f,i,c),a=!0},p(f,c){const d={};if(c&1&&(d.xy=f[0]),c&2&&(d.radius=f[1]),e.$set(d),c&895){o=Object.entries(f[5].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=G0(f,o,g);s[g]?(s[g].p(b,c),ce(s[g],1)):(s[g]=Y0(b),s[g].c(),ce(s[g],1),s[g].m(r.parentNode,r))}for(sr(),g=o.length;g<s.length;g+=1)l(g);or()}c&32&&(n=Object.entries(f[5].weightedPrompts).length>0),n?p?(p.p(f,c),c&32&&ce(p,1)):(p=Z0(f),p.c(),ce(p,1),p.m(i.parentNode,i)):p&&(sr(),me(p,1,1,()=>{p=null}),or())},i(f){if(!a){ce(e.$$.fragment,f);for(let c=0;c<o.length;c+=1)ce(s[c]);ce(p),a=!0}},o(f){me(e.$$.fragment,f),s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)me(s[c]);me(p),a=!1},d(f){qe(e,f),Eu(s,f),f&&O(r),p&&p.d(f),f&&O(i)}}}function Y0(t){let e,r,n,i,a;e=new A1({props:{p1:Lr(t[0],t[5].circleMarker,t[1]),p2:t[6][t[20]].xy}});function o(){return t[14](t[20])}return r=new Pa({props:{xy:t[6][t[20]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:o}}),n=new vo({props:{xy:t[9](t[6][t[20]].xy,qr(t[3],$t(t[21].text).length,t[4])),color:`rgba(255,255,255,${an(t[6][t[20]].unitWeight)}`,wh:qr(t[3],$t(t[21].text).length,t[4]),fontSize:t[4],text:$t(t[21].text)}}),i=new P3({props:{xy:zr(Nr(Lr(t[0],t[5].circleMarker,t[1]),t[6][t[20]].xy),.5),weight:Kn(t[5],t[20]),radius:15,textColor:`rgba(255,255,255,${an(t[6][t[20]].unitWeight)}`,bgColor:"rgb(8, 11, 22)"}}),{c(){Ve(e.$$.fragment),Ve(r.$$.fragment),Ve(n.$$.fragment),Ve(i.$$.fragment)},l(s){je(e.$$.fragment,s),je(r.$$.fragment,s),je(n.$$.fragment,s),je(i.$$.fragment,s)},m(s,l){ze(e,s,l),ze(r,s,l),ze(n,s,l),ze(i,s,l),a=!0},p(s,l){t=s;const p={};l&35&&(p.p1=Lr(t[0],t[5].circleMarker,t[1])),l&96&&(p.p2=t[6][t[20]].xy),e.$set(p);const f={};l&96&&(f.xy=t[6][t[20]].xy),l&4&&(f.radius=t[2]),l&32&&(f.handleMouseDown=o),r.$set(f);const c={};l&120&&(c.xy=t[9](t[6][t[20]].xy,qr(t[3],$t(t[21].text).length,t[4]))),l&96&&(c.color=`rgba(255,255,255,${an(t[6][t[20]].unitWeight)}`),l&56&&(c.wh=qr(t[3],$t(t[21].text).length,t[4])),l&16&&(c.fontSize=t[4]),l&32&&(c.text=$t(t[21].text)),n.$set(c);const d={};l&99&&(d.xy=zr(Nr(Lr(t[0],t[5].circleMarker,t[1]),t[6][t[20]].xy),.5)),l&32&&(d.weight=Kn(t[5],t[20])),l&96&&(d.textColor=`rgba(255,255,255,${an(t[6][t[20]].unitWeight)}`),i.$set(d)},i(s){a||(ce(e.$$.fragment,s),ce(r.$$.fragment,s),ce(n.$$.fragment,s),ce(i.$$.fragment,s),a=!0)},o(s){me(e.$$.fragment,s),me(r.$$.fragment,s),me(n.$$.fragment,s),me(i.$$.fragment,s),a=!1},d(s){qe(e,s),qe(r,s),qe(n,s),qe(i,s)}}}function Z0(t){let e,r;return e=new Pa({props:{xy:Lr(t[0],t[5].circleMarker,t[1]),radius:10,color:"rgba(136,157,191, 1)",handleMouseDown:t[15]}}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p(n,i){const a={};i&35&&(a.xy=Lr(n[0],n[5].circleMarker,n[1])),e.$set(a)},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function L3(t){let e,r,n,i,a,o=t[6]&&t[5].weightedPrompts&&K0(t);const s=t[13].default,l=bu(s,t,t[12],null);return{c(){e=gt("svg"),o&&o.c(),r=Ee(),l&&l.c(),this.h()},l(p){e=vt(p,"svg",{id:!0,class:!0});var f=j(e);o&&o.l(f),f.forEach(O),r=Ae(p),l&&l.l(p),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(p,f){se(p,e,f),o&&o.m(e,null),se(p,r,f),l&&l.m(p,f),n=!0,i||(a=[De(e,"mousemove",t[10]),De(e,"touchmove",t[10]),De(e,"mouseup",t[7]),De(e,"touchend",t[7]),De(e,"dblclick",t[11])],i=!0)},p(p,[f]){p[6]&&p[5].weightedPrompts?o?(o.p(p,f),f&96&&ce(o,1)):(o=K0(p),o.c(),ce(o,1),o.m(e,null)):o&&(sr(),me(o,1,1,()=>{o=null}),or()),l&&l.p&&(!n||f&4096)&&Du(l,s,p,p[12],n?wu(s,p[12],f,null):yu(p[12]),null)},i(p){n||(ce(o),ce(l,p),n=!0)},o(p){me(o),me(l,p),n=!1},d(p){p&&O(e),o&&o.d(),p&&O(r),l&&l.d(p),i=!1,qt(a)}}}function J0(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const o=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function R3(t,e,r){let n,i;$e(t,it,P=>r(5,i=P));let{$$slots:a={},$$scope:o}=e,{center:s=[450,450]}=e,{radius:l=250}=e,{pointRadius:p=10}=e,{textWidth:f=150}=e,{fontSize:c=13}=e,d=[0,0],g=null;function b(P){g=null}function v(P){g=P}function m(P,A){let x=Ln(P,s,l)[0]-180;x<0&&(x+=360);const R=Jf(ka(A),x);return Nr(P,R)}function D(P){const A=k3(P,s,l)?Ln(P,s,l):Ln(vu(P,s,l),s,l);r(6,n=C(i.weightedPrompts,s,l,i.circleWeightScaling,i.circleExponentialScaling,A,i.circleAngles))}function S(P){if(d=Pi(P),g==="main")D(d);else if(g){const A={...i.weightedPrompts[g]},x=vu(d,s,l),R=Ln(x,s,l)[0],Z={...i.circleAngles};Z[A.id]=R;const K={...i.weightedPrompts};K[g]=A,r(6,n=C(K,s,l,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,Z))}}function w(P){d=Pi(P),D(d)}function C(P,A,x,R,Z,K,L){if(!P||!A||!x||!R||!K)return null;let V=Object.entries(P).reduce((Q,[X,te])=>(Q[X]={xy:Lr(A,[L[X],1],x)},Q),{});V=Object.entries(V).reduce((Q,[X,te])=>(Q[X]={...Q[X],distance:Oa(te.xy,Lr(A,K,x))},Q),V);const q=Object.values(V).reduce((Q,X)=>Q+X.distance,0);V=Object.entries(V).reduce((Q,[X,te])=>(Q[X]={...Q[X],unitDistance:Math.round(te.distance/q*100)/100},Q),V),V=Object.entries(V).reduce((Q,[X,te])=>(Q[X]={...Q[X],invertedUnitDistance:Math.round((1-te.unitDistance)*100)/100},Q),V),V=Object.entries(V).reduce((Q,[X,te])=>(Z?Q[X]={...Q[X],unitWeight:Math.round(Math.pow(1-te.distance/(2*x),R)*100)/100}:Q[X]={...Q[X],unitWeight:Math.round((1-te.distance/(2*x))*100)/100},Q),V);const z={...P};return Object.entries(V).forEach(([Q,X])=>{z[Q].circleWeight=X.unitWeight}),it.update({...i,circleMarker:K,weightedPrompts:z,circleAngles:L}),V}const F=P=>v(P),M=()=>v("main");return t.$$set=P=>{"center"in P&&r(0,s=P.center),"radius"in P&&r(1,l=P.radius),"pointRadius"in P&&r(2,p=P.pointRadius),"textWidth"in P&&r(3,f=P.textWidth),"fontSize"in P&&r(4,c=P.fontSize),"$$scope"in P&&r(12,o=P.$$scope)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(i.circleAngles).length!==Object.keys(i.weightedPrompts).length&&it.update({...i,circleAngles:J0(i.weightedPrompts,{})}),t.$$.dirty&35&&r(6,n=C(i.weightedPrompts,s,l,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,i.circleAngles||J0(i.weightedPrompts,{})))},[s,l,p,f,c,i,n,b,v,m,S,w,o,a,F,M]}class U3 extends Xe{constructor(e){super(),et(this,e,R3,L3,tt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}let ms;const V3=new Uint8Array(16);function j3(){if(!ms&&(ms=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ms))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ms(V3)}const Tr=[];for(let t=0;t<256;++t)Tr.push((t+256).toString(16).slice(1));function z3(t,e=0){return(Tr[t[e+0]]+Tr[t[e+1]]+Tr[t[e+2]]+Tr[t[e+3]]+"-"+Tr[t[e+4]]+Tr[t[e+5]]+"-"+Tr[t[e+6]]+Tr[t[e+7]]+"-"+Tr[t[e+8]]+Tr[t[e+9]]+"-"+Tr[t[e+10]]+Tr[t[e+11]]+Tr[t[e+12]]+Tr[t[e+13]]+Tr[t[e+14]]+Tr[t[e+15]]).toLowerCase()}const q3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Q0={randomUUID:q3};function _o(t,e,r){if(Q0.randomUUID&&!e&&!t)return Q0.randomUUID();t=t||{};const n=t.random||(t.rng||j3)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return z3(n)}const _s="showZeroPrompts";function W3(){const t=er(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[_s]?JSON.parse(localStorage[_s]):!1),{subscribe:e,update:a=>{i&&(localStorage[_s]=JSON.stringify(!!a),r(!!a))},get:()=>Ft(t),delete:()=>{i&&(delete localStorage[_s],r(!1))}}}const Us=W3(),bs="useWeightOrdering";function H3(){const t=er(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[bs]?JSON.parse(localStorage[bs]):!1),{subscribe:e,update:a=>{i&&(localStorage[bs]=JSON.stringify(!!a),r(!!a))},get:()=>Ft(t),delete:()=>{i&&(delete localStorage[bs],r(!1))}}}const Bf=H3(),Qf=Au(Bf,t=>Ft(Bf));var Of=function(t,e){return Of=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Of(t,e)};function Xf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Of(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Mf,ec=function(){function t(){}return t._xfnv1a=function(e){for(var r=2166136261,n=0;n<e.length;n++)r=Math.imul(r^e.charCodeAt(n),16777619);return function(){return r+=r<<13,r^=r>>>7,r+=r<<3,r^=r>>>17,(r+=r<<5)>>>0}},t}(),$3=function(t){function e(r){var n=t.call(this)||this;return n.a=e._xfnv1a(r)(),n}return Xf(e,t),e.prototype.next=function(){var r=this.a+=1831565813;return r=Math.imul(r^r>>>15,1|r),(((r^=r+Math.imul(r^r>>>7,61|r))^r>>>14)>>>0)/4294967296},e}(ec),G3=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Xf(e,t),e.prototype.next=function(){this.a>>>=0,this.b>>>=0,this.c>>>=0,this.d>>>=0;var r=this.a+this.b|0;return this.a=this.b^this.b>>>9,this.b=this.c+(this.c<<3)|0,this.c=this.c<<21|this.c>>>11,this.d=this.d+1|0,r=r+this.d|0,this.c=this.c+r|0,(r>>>0)/4294967296},e}(ec),K3=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Xf(e,t),e.prototype.next=function(){var r=this.b<<9,n=5*this.a;return n=n<<7|9*(n>>>25),this.c^=this.a,this.d^=this.b,this.b^=this.c,this.a^=this.d,this.c^=r,this.d=this.d<<11|this.d>>>21,(n>>>0)/4294967296},e}(ec);(function(t){t.sfc32="sfc32",t.mulberry32="mulberry32",t.xoshiro128ss="xoshiro128ss"})(Mf||(Mf={}));var Y3=function(){function t(e,r){r===void 0&&(r=Mf.sfc32),this.str=e,this.prng=r,this.generator=this._initializeGenerator()}return t.prototype.next=function(){return this.generator.next()},t.prototype._initializeGenerator=function(){if(function(r){return r===null}(e=this.str)||function(r){return r===void 0}(e))return this.wrap();var e;switch(this.prng){case"sfc32":return new G3(this.str);case"mulberry32":return new $3(this.str);case"xoshiro128ss":return new K3(this.str);default:return this.wrap()}},t.prototype.wrap=function(){return{next:function(){return Math.random()}}},t}();const Vl="slotSet";function Z3(){const t=er({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith(Vl)){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=Ft(t),p={...s[a]||{},...o};i&&(localStorage[`${Vl}_${a}`]=JSON.stringify(p));const f={...s,[a]:p};r(f)},get:a=>Ft(t)[a],getAll:()=>Ft(t),delete:a=>{i&&delete localStorage[`${Vl}_${a}`];const o={...Ft(t)};delete o[a],r(o)}}}const Qi=Z3();function X0(){return(Math.random()*1e6).toFixed(0)}function J3(){const t=er(X0()),{subscribe:e,set:r}=t;return{subscribe:e,get:()=>Ft(t),shuffle:()=>{r(X0())}}}const xi=J3();function Vs(t){let e=t.replace(/\s+/g,"_");return e=e.toUpperCase(),"$"+e}function ed(t){const e=t.length>0&&t.length<32,r=/^[a-zA-Z0-9 ]+$/.test(t),n=/^[a-zA-Z]/.test(t),i=/[a-zA-Z0-9]$/.test(t);return e&&r&&n&&i}function Q3(){const t=Qi.getAll();return Object.values(t).reduce((r,n)=>{const i=Vs(n.name);return i&&(r[i]=[...n.values]),r},{})}function X3(t,e){const r=new Y3(e);return Object.entries(t).reduce((i,[a,o])=>(i[a]=[...o].sort(()=>r.next()-.5),i),{})}function mu(t,e){let r=X3(Q3(),e),n=t;for(const[i,a]of Object.entries(r)){if(a.length===0)continue;let o=0;for(;n.includes(i);)o>=a.length&&(o=0),n=n.replace(i,a[o]),o++}return n}function e6(t){const e=[],r=/((?:[^:]+|:(?!:))+)(?:::(\d+(?:\.\d+)?))?(?=\s|$)/g;let n;for(;(n=r.exec(t))!==null;){const i=n[1].trim(),a=n[2]?parseFloat(n[2]):1;i&&e.push([i,a])}return e}function jl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=t.length-1;let r=t;for(;r[e]===",";)r=r.slice(0,e);return r}function zl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=["-","#","*","","",">","<","+","^","~","(",")","[","]","{","}"];let r=t.trim();for(;e.includes(r[0]);)r=r.slice(1).trim();return/^\d+(\.|\))\s/.test(r)&&(r=r.replace(/^\d+(\.|\))\s/,"")),r}function js(t){if(t=t.replace(/^\n+|\n+$/g,""),t.includes("::"))return e6(t);if(t.includes(`
`))return t.split(`
`).map(a=>zl(jl(a))).filter(a=>a.length>0).map(a=>[a,1]);const e=t.match(/[^.!?]+[.!?]+/g)||[],r=e.length,n=t.split(",").map(a=>zl(jl(a))).filter(a=>a.length>0),i=n.length-1;return r>i?e.map(a=>zl(jl(a))).filter(a=>a.length>0).map(a=>[a,1]):n.map(a=>[a,1])}function zs(t,e,r){let n=Object.entries(t.weightedPrompts);return e&&(n=n.sort((i,a)=>Kn(t,parseInt(a[0]))-Kn(t,parseInt(i[0])))),r||(n=n.filter(i=>r||Kn(t,parseInt(i[0])))),n}function t6(t){return t.trim().endsWith(".")}function r6(t){let e="",r=[];return t.forEach((n,i)=>{t6(n)?(r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+". ",r=[]),e+=n+" "):r.push(n.trim())}),r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+"."),e.trim()}function Pf(t,e,r,n,i){if(r)return zs(t,n,i).map(([o,s],l)=>`${mu(s.text,`${e}${o}${l}`)}::${Kn(t,parseInt(o))}`).join(" ");const a=zs(t,n,i).map(([o,s],l)=>mu(s.text,`${e}${o}${l}`));return r6(a)}function td(t,e,r){const n=t.slice();return n[4]=e[r][0],n[5]=e[r][1],n[7]=r,n}function rd(t,e){let r,n=mu(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"",i,a,o,s=Kn(e[0],parseInt(e[4]))+"",l,p,f;return{key:t,first:null,c(){r=W("span"),i=Ce(n),a=Ce("::"),o=W("b"),l=Ce(s),p=Ee(),this.h()},l(c){r=H(c,"SPAN",{style:!0});var d=j(r);i=Fe(d,n),a=Fe(d,"::"),o=H(d,"B",{});var g=j(o);l=Fe(g,s),p=Ae(g),g.forEach(O),d.forEach(O),this.h()},h(){B(r,"style",f=`color: rgba(255,255,255,${Math.max(.25,$0(e[0],parseInt(e[4])))});`),this.first=r},m(c,d){se(c,r,d),T(r,i),T(r,a),T(r,o),T(o,l),T(o,p)},p(c,d){e=c,d&15&&n!==(n=mu(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"")&&zt(i,n),d&7&&s!==(s=Kn(e[0],parseInt(e[4]))+"")&&zt(l,s),d&7&&f!==(f=`color: rgba(255,255,255,${Math.max(.25,$0(e[0],parseInt(e[4])))});`)&&B(r,"style",f)},d(c){c&&O(r)}}}function n6(t){let e,r,n=[],i=new Map,a=zs(t[0],t[1],t[2]);const o=s=>s[4];for(let s=0;s<a.length;s+=1){let l=td(t,a,s),p=o(l);i.set(p,n[s]=rd(p,l))}return{c(){e=W("div"),r=W("p");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=H(s,"DIV",{class:!0});var l=j(e);r=H(l,"P",{class:!0});var p=j(r);for(let f=0;f<n.length;f+=1)n[f].l(p);p.forEach(O),l.forEach(O),this.h()},h(){B(r,"class","text-sm select-none"),B(e,"class","overflow-y-auto h-full")},m(s,l){se(s,e,l),T(e,r);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(r,null)},p(s,[l]){l&15&&(a=zs(s[0],s[1],s[2]),n=Un(n,l,o,1,s,a,i,r,Zn,rd,null,td))},i:Pe,o:Pe,d(s){s&&O(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function i6(t,e,r){let n,i,a,o;return $e(t,it,s=>r(0,n=s)),$e(t,Qf,s=>r(1,i=s)),$e(t,Us,s=>r(2,a=s)),$e(t,xi,s=>r(3,o=s)),[n,i,a,o]}class a6 extends Xe{constructor(e){super(),et(this,e,i6,n6,tt,{})}}const Ds="outputMultiPrompt";function u6(){const t=er(!0),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Ds]?JSON.parse(localStorage[Ds]):!1),{subscribe:e,update:a=>{i&&(localStorage[Ds]=JSON.stringify(!!a),r(!!a))},get:()=>Ft(t),delete:()=>{i&&(delete localStorage[Ds],r(!0))}}}const kf=u6();function s6(t){let e,r,n,i=Pf(t[0],t[1],t[2],t[3],t[4])+"",a;return{c(){e=W("div"),r=W("p"),n=W("span"),a=Ce(i),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=j(e);r=H(s,"P",{class:!0});var l=j(r);n=H(l,"SPAN",{style:!0});var p=j(n);a=Fe(p,i),p.forEach(O),l.forEach(O),s.forEach(O),this.h()},h(){B(n,"style","color: rgba(255,255,255,0.75});"),B(r,"class","text-sm select-none"),B(e,"class","overflow-y-auto h-full")},m(o,s){se(o,e,s),T(e,r),T(r,n),T(n,a)},p(o,[s]){s&31&&i!==(i=Pf(o[0],o[1],o[2],o[3],o[4])+"")&&zt(a,i)},i:Pe,o:Pe,d(o){o&&O(e)}}}function o6(t,e,r){let n,i,a,o,s;return $e(t,it,l=>r(0,n=l)),$e(t,xi,l=>r(1,i=l)),$e(t,kf,l=>r(2,a=l)),$e(t,Qf,l=>r(3,o=l)),$e(t,Us,l=>r(4,s=l)),[n,i,a,o,s]}class l6 extends Xe{constructor(e){super(),et(this,e,o6,s6,tt,{})}}const fu="promptHistory";function f6(){const t=er([]),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",a=(i&&JSON.parse(localStorage[fu]||"[]")||[]).map(o=>({...o,date:new Date(o.date)}));return r(a),{subscribe:e,add:o=>{if(!o||!i)return;const l=[...Ft(t),o];localStorage[fu]=JSON.stringify(l),r(l)},update:o=>{!o||!i||(localStorage[fu]=o,r(o))},get:()=>Ft(t),remove:o=>{if(!i)return;const l=Ft(t).filter(p=>p.id!==o);localStorage[fu]=JSON.stringify(l),r(l)},delete:()=>{i&&(delete localStorage[fu],r([]))}}}const tc=f6();function c6(t){let e,r;return e=new l6({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function h6(t){let e,r;return e=new a6({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function d6(t){let e,r,n,i,a,o,s,l,p,f,c,d=t[2]?"Multi":"Single",g,b,v,m,D,S,w,C,F,M,P,A,x,R,Z,K,L,V;const q=[h6,c6],z=[];function Q(X,te){return X[2]?0:1}return n=Q(t),i=z[n]=q[n](t),{c(){e=W("div"),r=W("div"),i.c(),a=Ee(),o=W("div"),s=W("div"),l=W("input"),p=Ee(),f=W("label"),c=W("span"),g=Ce(d),b=Ee(),v=W("div"),m=W("input"),D=Ee(),S=W("label"),w=W("span"),C=Ce("Use Weight Ordering"),F=Ee(),M=W("div"),P=W("input"),A=Ee(),x=W("label"),R=W("span"),Z=Ce("Include Zero Weights"),this.h()},l(X){e=H(X,"DIV",{class:!0});var te=j(e);r=H(te,"DIV",{class:!0});var oe=j(r);i.l(oe),oe.forEach(O),a=Ae(te),o=H(te,"DIV",{class:!0});var _e=j(o);s=H(_e,"DIV",{class:!0});var be=j(s);l=H(be,"INPUT",{type:!0,class:!0}),p=Ae(be),f=H(be,"LABEL",{class:!0});var Be=j(f);c=H(Be,"SPAN",{class:!0});var ke=j(c);g=Fe(ke,d),ke.forEach(O),Be.forEach(O),be.forEach(O),b=Ae(_e),v=H(_e,"DIV",{class:!0});var Te=j(v);m=H(Te,"INPUT",{type:!0,class:!0}),D=Ae(Te),S=H(Te,"LABEL",{class:!0});var Le=j(S);w=H(Le,"SPAN",{class:!0});var Ne=j(w);C=Fe(Ne,"Use Weight Ordering"),Ne.forEach(O),Le.forEach(O),Te.forEach(O),F=Ae(_e),M=H(_e,"DIV",{class:!0});var Ye=j(M);P=H(Ye,"INPUT",{type:!0,class:!0}),A=Ae(Ye),x=H(Ye,"LABEL",{class:!0});var Qe=j(x);R=H(Qe,"SPAN",{class:!0});var Je=j(R);Z=Fe(Je,"Include Zero Weights"),Je.forEach(O),Qe.forEach(O),Ye.forEach(O),_e.forEach(O),te.forEach(O),this.h()},h(){B(r,"class","normal-case font-light text-left cursor-copy bg-slate-900 rounded-t-md rounded-br-md p-4 w-full h-28 active:bg-slate-950 hover:bg-slate-800"),l.checked=t[2],B(l,"type","checkbox"),B(l,"class","toggle toggle-sm mt-2 mr-2"),B(c,"class","label-text"),B(f,"class","label w-10"),B(s,"class","mx-2 flex"),m.checked=t[1],B(m,"type","checkbox"),B(m,"class","toggle toggle-sm mt-2 mr-2"),B(w,"class","label-text"),B(S,"class","label"),B(v,"class","mx-2 flex"),P.checked=t[0],B(P,"type","checkbox"),B(P,"class","toggle toggle-sm mt-2 mr-2"),B(R,"class","label-text"),B(x,"class","label"),B(M,"class","mx-2 flex"),B(o,"class","w-full rounded-b-md flex pl-2 justify-start bg-slate-900"),B(e,"class","h-48 p-4")},m(X,te){se(X,e,te),T(e,r),z[n].m(r,null),T(e,a),T(e,o),T(o,s),T(s,l),T(s,p),T(s,f),T(f,c),T(c,g),T(o,b),T(o,v),T(v,m),T(v,D),T(v,S),T(S,w),T(w,C),T(o,F),T(o,M),T(M,P),T(M,A),T(M,x),T(x,R),T(R,Z),K=!0,L||(V=[De(r,"click",t[3]),De(l,"change",t[4]),De(m,"change",t[5]),De(P,"change",t[6])],L=!0)},p(X,[te]){let oe=n;n=Q(X),n!==oe&&(sr(),me(z[oe],1,1,()=>{z[oe]=null}),or(),i=z[n],i||(i=z[n]=q[n](X),i.c()),ce(i,1),i.m(r,null)),(!K||te&4)&&(l.checked=X[2]),(!K||te&4)&&d!==(d=X[2]?"Multi":"Single")&&zt(g,d),(!K||te&2)&&(m.checked=X[1]),(!K||te&1)&&(P.checked=X[0])},i(X){K||(ce(i),K=!0)},o(X){me(i),K=!1},d(X){X&&O(e),z[n].d(),L=!1,qt(V)}}}function p6(t,e,r){let n,i,a,o,s;$e(t,Us,d=>r(0,n=d)),$e(t,Qf,d=>r(1,i=d)),$e(t,kf,d=>r(2,a=d)),$e(t,xi,d=>r(7,o=d)),$e(t,it,d=>r(8,s=d));function l(){const d=Pf(s,o,a,i,n);navigator.clipboard.writeText(d),xi.shuffle(),tc.add({id:_o(),prompt:d,date:new Date})}function p(){kf.update(!a)}function f(){Bf.update(!i)}function c(){Us.update(!n)}return[n,i,a,l,p,f,c]}class Fu extends Xe{constructor(e){super(),et(this,e,p6,d6,tt,{})}}function nd(t){let e,r,n,i,a,o,s,l;return{c(){e=W("div"),r=W("label"),n=W("span"),i=Ce("Scaling Power"),a=Ee(),o=W("input"),this.h()},l(p){e=H(p,"DIV",{class:!0});var f=j(e);r=H(f,"LABEL",{class:!0});var c=j(r);n=H(c,"SPAN",{class:!0});var d=j(n);i=Fe(d,"Scaling Power"),d.forEach(O),c.forEach(O),a=Ae(f),o=H(f,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),f.forEach(O),this.h()},h(){B(n,"class","label-text"),B(r,"class","label"),B(o,"type","range"),B(o,"min","0.5"),B(o,"max","3"),B(o,"step","0.1"),B(o,"class","range range-xs"),B(e,"class","w-full px-2")},m(p,f){se(p,e,f),T(e,r),T(r,n),T(n,i),T(e,a),T(e,o),nn(o,t[0]),s||(l=[De(o,"change",t[6]),De(o,"input",t[6])],s=!0)},p(p,f){f&1&&nn(o,p[0])},d(p){p&&O(e),s=!1,qt(l)}}}function g6(t){let e,r,n,i,a,o,s,l,p,f,c,d,g,b,v,m,D;r=new U3({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let S=t[1]&&nd(t);return b=new Fu({}),{c(){e=W("div"),Ve(r.$$.fragment),i=Ee(),a=W("div"),o=W("div"),s=W("label"),l=W("span"),p=Ce("Exponential Scaling"),f=Ee(),c=W("input"),d=Ee(),S&&S.c(),g=Ee(),Ve(b.$$.fragment),this.h()},l(w){e=H(w,"DIV",{class:!0});var C=j(e);je(r.$$.fragment,C),C.forEach(O),i=Ae(w),a=H(w,"DIV",{class:!0});var F=j(a);o=H(F,"DIV",{class:!0});var M=j(o);s=H(M,"LABEL",{class:!0});var P=j(s);l=H(P,"SPAN",{class:!0});var A=j(l);p=Fe(A,"Exponential Scaling"),A.forEach(O),P.forEach(O),f=Ae(M),c=H(M,"INPUT",{type:!0,class:!0}),M.forEach(O),d=Ae(F),S&&S.l(F),F.forEach(O),g=Ae(w),je(b.$$.fragment,w),this.h()},h(){B(e,"class","w-full h-full"),Ni(()=>t[4].call(e)),B(l,"class","label-text"),B(s,"class","label"),B(c,"type","checkbox"),B(c,"class","toggle toggle-xs"),B(o,"class","w-52 px-2"),B(a,"class","px-2 py-4 pb-0 flex")},m(w,C){se(w,e,C),ze(r,e,null),n=Ma(e,t[4].bind(e)),se(w,i,C),se(w,a,C),T(a,o),T(o,s),T(s,l),T(l,p),T(o,f),T(o,c),c.checked=t[1],T(a,d),S&&S.m(a,null),se(w,g,C),ze(b,w,C),v=!0,m||(D=De(c,"change",t[5]),m=!0)},p(w,[C]){const F={};C&12&&(F.center=[Math.round(w[2]/2),Math.round(w[3]/2)]),C&12&&(F.radius=Math.round(Math.min(w[2],w[3])/2)-150),r.$set(F),C&2&&(c.checked=w[1]),w[1]?S?S.p(w,C):(S=nd(w),S.c(),S.m(a,null)):S&&(S.d(1),S=null)},i(w){v||(ce(r.$$.fragment,w),ce(b.$$.fragment,w),v=!0)},o(w){me(r.$$.fragment,w),me(b.$$.fragment,w),v=!1},d(w){w&&O(e),qe(r),n(),w&&O(i),w&&O(a),S&&S.d(),w&&O(g),qe(b,w),m=!1,D()}}}function v6(t,e,r){let n;$e(t,it,c=>r(7,n=c));let i,a,o=n.circleWeightScaling||2,s=Hf(n.circleExponentialScaling)?!0:n.circleExponentialScaling;function l(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function p(){s=this.checked,r(1,s)}function f(){o=Lp(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&it.update({...it.get(),circleExponentialScaling:s,circleWeightScaling:o})},[o,s,i,a,l,p,f]}class m6 extends Xe{constructor(e){super(),et(this,e,v6,g6,tt,{})}}function _6(t){let e,r,n,i,a;return{c(){e=gt("line"),this.h()},l(o){e=vt(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),j(e).forEach(O),this.h()},h(){B(e,"x1",r=t[0][0]),B(e,"y1",n=t[0][1]),B(e,"x2",i=t[1][0]),B(e,"y2",a=t[1][1]),B(e,"stroke",t[3]),B(e,"stroke-width",t[2])},m(o,s){se(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&B(e,"x1",r),s&1&&n!==(n=o[0][1])&&B(e,"y1",n),s&2&&i!==(i=o[1][0])&&B(e,"x2",i),s&2&&a!==(a=o[1][1])&&B(e,"y2",a),s&8&&B(e,"stroke",o[3]),s&4&&B(e,"stroke-width",o[2])},i:Pe,o:Pe,d(o){o&&O(e)}}}function b6(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class D6 extends Xe{constructor(e){super(),et(this,e,b6,_6,tt,{p1:0,p2:1,stroke:2,color:3})}}function id(t,e,r){const n=t.slice();return n[29]=e[r][0],n[30]=e[r][1],n}function ad(t){let e,r,n;e=new Zf({props:{xy:t[0],radius:t[1]}});let i=Object.entries(t[5].weightedPrompts),a=[];for(let s=0;s<i.length;s+=1)a[s]=ud(id(t,i,s));const o=s=>me(a[s],1,1,()=>{a[s]=null});return{c(){Ve(e.$$.fragment);for(let s=0;s<a.length;s+=1)a[s].c();r=St()},l(s){je(e.$$.fragment,s);for(let l=0;l<a.length;l+=1)a[l].l(s);r=St()},m(s,l){ze(e,s,l);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,l);se(s,r,l),n=!0},p(s,l){const p={};if(l[0]&1&&(p.xy=s[0]),l[0]&2&&(p.radius=s[1]),e.$set(p),l[0]&6015){i=Object.entries(s[5].weightedPrompts);let f;for(f=0;f<i.length;f+=1){const c=id(s,i,f);a[f]?(a[f].p(c,l),ce(a[f],1)):(a[f]=ud(c),a[f].c(),ce(a[f],1),a[f].m(r.parentNode,r))}for(sr(),f=i.length;f<a.length;f+=1)o(f);or()}},i(s){if(!n){ce(e.$$.fragment,s);for(let l=0;l<i.length;l+=1)ce(a[l]);n=!0}},o(s){me(e.$$.fragment,s),a=a.filter(Boolean);for(let l=0;l<a.length;l+=1)me(a[l]);n=!1},d(s){qe(e,s),Eu(a,s),s&&O(r)}}}function ud(t){let e,r,n,i,a,o,s,l,p;e=new D6({props:{p1:t[0],p2:t[6][t[29]].xy}});function f(...b){return t[15](t[29],...b)}function c(...b){return t[16](t[29],...b)}function d(...b){return t[17](t[29],...b)}function g(){return t[18](t[29])}return a=new Pa({props:{xy:t[6][t[29]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:g}}),o=new vo({props:{xy:t[9](t[6][t[29]].textXY,qr(t[3],$t(t[30].text).length,t[4])),color:`rgba(255,255,255,${an(t[6][t[29]].unitWeight)}`,wh:qr(t[3],$t(t[30].text).length,t[4]),fontSize:t[4],text:$t(t[30].text)}}),{c(){Ve(e.$$.fragment),r=gt("path"),Ve(a.$$.fragment),Ve(o.$$.fragment),this.h()},l(b){je(e.$$.fragment,b),r=vt(b,"path",{d:!0,fill:!0}),j(r).forEach(O),je(a.$$.fragment,b),je(o.$$.fragment,b),this.h()},h(){B(r,"d",n=sd(t[0],t[1],t[6][t[29]].angle,t[6][t[29]].angle+t[6][t[29]].angleDiff)),B(r,"fill",i=`rgba(26,47,91,${an(t[6][t[29]].unitWeight)/4}`)},m(b,v){ze(e,b,v),se(b,r,v),ze(a,b,v),ze(o,b,v),s=!0,l||(p=[De(r,"mousewheel",f),De(r,"touchstart",c),De(r,"mousedown",d)],l=!0)},p(b,v){t=b;const m={};v[0]&1&&(m.p1=t[0]),v[0]&96&&(m.p2=t[6][t[29]].xy),e.$set(m),(!s||v[0]&99&&n!==(n=sd(t[0],t[1],t[6][t[29]].angle,t[6][t[29]].angle+t[6][t[29]].angleDiff)))&&B(r,"d",n),(!s||v[0]&96&&i!==(i=`rgba(26,47,91,${an(t[6][t[29]].unitWeight)/4}`))&&B(r,"fill",i);const D={};v[0]&96&&(D.xy=t[6][t[29]].xy),v[0]&4&&(D.radius=t[2]),v[0]&32&&(D.handleMouseDown=g),a.$set(D);const S={};v[0]&120&&(S.xy=t[9](t[6][t[29]].textXY,qr(t[3],$t(t[30].text).length,t[4]))),v[0]&96&&(S.color=`rgba(255,255,255,${an(t[6][t[29]].unitWeight)}`),v[0]&56&&(S.wh=qr(t[3],$t(t[30].text).length,t[4])),v[0]&16&&(S.fontSize=t[4]),v[0]&32&&(S.text=$t(t[30].text)),o.$set(S)},i(b){s||(ce(e.$$.fragment,b),ce(a.$$.fragment,b),ce(o.$$.fragment,b),s=!0)},o(b){me(e.$$.fragment,b),me(a.$$.fragment,b),me(o.$$.fragment,b),s=!1},d(b){qe(e,b),b&&O(r),qe(a,b),qe(o,b),l=!1,qt(p)}}}function y6(t){let e,r,n,i,a,o=t[6]&&t[5].weightedPrompts&&ad(t);const s=t[14].default,l=bu(s,t,t[13],null);return{c(){e=gt("svg"),o&&o.c(),r=Ee(),l&&l.c(),this.h()},l(p){e=vt(p,"svg",{id:!0,class:!0});var f=j(e);o&&o.l(f),f.forEach(O),r=Ae(p),l&&l.l(p),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(p,f){se(p,e,f),o&&o.m(e,null),se(p,r,f),l&&l.m(p,f),n=!0,i||(a=[De(e,"mousemove",t[11]),De(e,"touchmove",t[11]),De(e,"mouseup",t[7]),De(e,"touchend",t[7])],i=!0)},p(p,f){p[6]&&p[5].weightedPrompts?o?(o.p(p,f),f[0]&96&&ce(o,1)):(o=ad(p),o.c(),ce(o,1),o.m(e,null)):o&&(sr(),me(o,1,1,()=>{o=null}),or()),l&&l.p&&(!n||f[0]&8192)&&Du(l,s,p,p[13],n?wu(s,p[13],f,null):yu(p[13]),null)},i(p){n||(ce(o),ce(l,p),n=!0)},o(p){me(o),me(l,p),n=!1},d(p){p&&O(e),o&&o.d(),p&&O(r),l&&l.d(p),i=!1,qt(a)}}}function w6(t,e){if(t.length!==e.length)return!1;const r=t.length;let n=-1;for(let i=0;i<r;i++)if(e[i]===t[0]){n=i;break}if(n===-1)return!1;for(let i=0;i<r;i++)if(t[i]!==e[(i+n)%r])return!1;return!0}function sd(t,e,r,n){const i=t[0]+e*Math.cos(r*Math.PI/180),a=t[1]+e*Math.sin(r*Math.PI/180),o=t[0]+e*Math.cos(n*Math.PI/180),s=t[1]+e*Math.sin(n*Math.PI/180),l=n-r<=180?"0":"1";return`M${t[0]},${t[1]} L${i},${a} A${e},${e} 0 ${l} 1 ${o},${s} Z`}function E6(t,e,r){let n,i;$e(t,it,q=>r(5,i=q));let{$$slots:a={},$$scope:o}=e,{center:s=[450,450]}=e,{radius:l=250}=e,{pointRadius:p=10}=e,{textWidth:f=150}=e,{fontSize:c=13}=e,d=[0,0],g=null,b={},v=null,m;function D(q){v=null,m=null,g=null,b={}}function S(q){v=q}function w(q,z){let Q=Ln(q,s,l)[0]-180;Q<0&&(Q+=360);const X=Jf(ka(z),Q);return Nr(q,X)}function C(q,z){return q?Object.entries(q).reduce((Q,[X,te],oe)=>{const _e=Q[X]||oe*(360/Object.keys(q).length)-90;return Q[X]=jr(_e),Q},z):null}function F(q,z){m=z}function M(q){const z=m,Q={...i.pieAngles},X=Object.entries(Q).sort((Ne,Ye)=>jr(Ne[1])-jr(Ye[1])).map(Ne=>Ne[0]),te=X.indexOf(z),oe=te+1===X.length?0:te+1,_e=X[oe];b[z]||(b[z]=Q[z]),b[_e]||(b[_e]=Q[_e]);const Be=Ln(q,s,l)[0]-g,ke={...Q};ke[z]=jr(Be+b[z]),ke[_e]=jr(Be+b[_e]);const Te=Object.entries(ke).sort((Ne,Ye)=>jr(Ne[1])-jr(Ye[1])).map(Ne=>Ne[0]);w6(X,Te)&&r(6,n=R(i.weightedPrompts,s,l,ke))}function P(q){const z={...i.weightedPrompts[v]},Q=vu(q,s,l),X=jr(Ln(Q,s,l)[0]),te={...i.pieAngles};te[z.id]=X;const oe={...i.weightedPrompts};oe[v]=z,r(6,n=R(oe,s,l,te))}function A(q){q.preventDefault(),d=Pi(q),v?P(d):m?M(d):g=Ln(d,s,l)[0]}function x(q,z){q.preventDefault();const Q={...i.pieAngles},X=Object.entries(Q).sort((be,Be)=>jr(be[1])-jr(Be[1])).map(be=>be[0]),te=X.indexOf(z),oe=te+1===X.length?0:te+1,_e=X[oe];Q[z]=jr(Q[z]-q.deltaY/100),Q[_e]=jr(Q[_e]+q.deltaY/100),r(6,n=R(i.weightedPrompts,s,l,Q))}function R(q,z,Q,X){if(!q||!z||!Q)return null;const te=Object.entries(q).sort((ke,Te)=>jr(X[ke[0]])-jr(X[Te[0]])),oe=te.map((ke,Te)=>{const Le=Te+1===te.length?0:Te+1,Ne=X[te[Le][0]]-X[te[Te][0]];return Ne<0?[ke[0],360+Ne]:[ke[0],Ne]}),_e=Math.max(...oe.map(ke=>ke[1])),be=oe.reduce((ke,[Te,Le])=>{({...q[Te]});const Ne=X[Te],Ye=Lr(z,[Ne,1],Q),Qe=Lr(z,[Ne+.5*Le,1],Q),Je=Le/_e;return ke[Te]={xy:Ye,textXY:Qe,angle:Ne,angleDiff:Le,unitWeight:Je},ke},{}),Be={...q};return Object.entries(be).forEach(([ke,Te])=>{Be[ke].pieWeight=Te.unitWeight}),it.update({...i,weightedPrompts:Be,pieAngles:X}),be}const Z=(q,z)=>x(z,q),K=(q,z)=>F(z,q),L=(q,z)=>F(z,q),V=q=>S(q);return t.$$set=q=>{"center"in q&&r(0,s=q.center),"radius"in q&&r(1,l=q.radius),"pointRadius"in q&&r(2,p=q.pointRadius),"textWidth"in q&&r(3,f=q.textWidth),"fontSize"in q&&r(4,c=q.fontSize),"$$scope"in q&&r(13,o=q.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&32&&Object.keys(i.pieAngles||{}).length!==Object.keys(i.weightedPrompts).length&&it.update({...i,pieAngles:C(i.weightedPrompts,{})}),t.$$.dirty[0]&35&&r(6,n=R(i.weightedPrompts,s,l,i.pieAngles||C(i.weightedPrompts,{})))},[s,l,p,f,c,i,n,D,S,w,F,A,x,o,a,Z,K,L,V]}class A6 extends Xe{constructor(e){super(),et(this,e,E6,y6,tt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4},null,[-1,-1])}}function C6(t){let e,r,n,i,a,o;return r=new A6({props:{center:[Math.round(t[0]/2),Math.round(t[1]/2)],radius:Math.round(Math.min(t[0],t[1])/2)-150}}),a=new Fu({}),{c(){e=W("div"),Ve(r.$$.fragment),i=Ee(),Ve(a.$$.fragment),this.h()},l(s){e=H(s,"DIV",{class:!0});var l=j(e);je(r.$$.fragment,l),l.forEach(O),i=Ae(s),je(a.$$.fragment,s),this.h()},h(){B(e,"class","w-full h-full"),Ni(()=>t[2].call(e))},m(s,l){se(s,e,l),ze(r,e,null),n=Ma(e,t[2].bind(e)),se(s,i,l),ze(a,s,l),o=!0},p(s,[l]){const p={};l&3&&(p.center=[Math.round(s[0]/2),Math.round(s[1]/2)]),l&3&&(p.radius=Math.round(Math.min(s[0],s[1])/2)-150),r.$set(p)},i(s){o||(ce(r.$$.fragment,s),ce(a.$$.fragment,s),o=!0)},o(s){me(r.$$.fragment,s),me(a.$$.fragment,s),o=!1},d(s){s&&O(e),qe(r),n(),s&&O(i),qe(a,s)}}}function F6(t,e,r){let n,i;function a(){n=this.clientWidth,i=this.clientHeight,r(0,n),r(1,i)}return[n,i,a]}class S6 extends Xe{constructor(e){super(),et(this,e,F6,C6,tt,{})}}const{window:B6}=oy;function od(t,e,r){const n=t.slice();return n[26]=e[r][0],n[27]=e[r][1],n}function ld(t){let e=[],r=new Map,n,i,a,o=Object.entries(t[1]);const s=l=>l[26];for(let l=0;l<o.length;l+=1){let p=od(t,o,l),f=s(p);r.set(f,e[l]=cd(f,p))}return i=new Pa({props:{xy:t[17](t[0],t[6],t[10],t[9],!0),radius:t[3],color:"rgba(136,157,191, 1)",handleMouseDown:t[22]}}),{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=St(),Ve(i.$$.fragment)},l(l){for(let p=0;p<e.length;p+=1)e[p].l(l);n=St(),je(i.$$.fragment,l)},m(l,p){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(l,p);se(l,n,p),ze(i,l,p),a=!0},p(l,p){p&132983&&(o=Object.entries(l[1]),sr(),e=Un(e,p,s,1,l,o,r,n.parentNode,ly,cd,n,od),or());const f={};p&1601&&(f.xy=l[17](l[0],l[6],l[10],l[9],!0)),p&8&&(f.radius=l[3]),p&128&&(f.handleMouseDown=l[22]),i.$set(f)},i(l){if(!a){for(let p=0;p<o.length;p+=1)ce(e[p]);ce(i.$$.fragment,l),a=!0}},o(l){for(let p=0;p<e.length;p+=1)me(e[p]);me(i.$$.fragment,l),a=!1},d(l){for(let p=0;p<e.length;p+=1)e[p].d(l);l&&O(n),qe(i,l)}}}function fd(t){let e,r;return e=new A1({props:{p1:t[17](t[27].xy,t[6],t[10],t[9],!0),p2:t[17](t[0],t[6],t[10],t[9],!0)}}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p(n,i){const a={};i&1602&&(a.p1=n[17](n[27].xy,n[6],n[10],n[9],!0)),i&1601&&(a.p2=n[17](n[0],n[6],n[10],n[9],!0)),e.$set(a)},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function cd(t,e){let r,n,i,a,o,s=e[27].connected&&fd(e);return i=new Pa({props:{xy:e[17](e[27].xy,e[6],e[10],e[9],!0),radius:e[2],color:"rgba(136,157,191, 1)"}}),a=new vo({props:{xy:[(e[27].xy[0]*e[8][0]+e[6][0])*e[9]+e[10][0]-qr(e[4],$t(e[27].text).length,e[5])[0]/2,(e[27].xy[1]*e[8][1]+e[6][1])*e[9]+e[10][1]+e[2]],color:`rgba(255,255,255,${e[27].opacity}`,wh:qr(e[4],$t(e[27].text).length,e[5]),fontSize:e[5],text:$t(e[27].text)}}),{key:t,first:null,c(){r=St(),s&&s.c(),n=St(),Ve(i.$$.fragment),Ve(a.$$.fragment),this.h()},l(l){r=St(),s&&s.l(l),n=St(),je(i.$$.fragment,l),je(a.$$.fragment,l),this.h()},h(){this.first=r},m(l,p){se(l,r,p),s&&s.m(l,p),se(l,n,p),ze(i,l,p),ze(a,l,p),o=!0},p(l,p){e=l,e[27].connected?s?(s.p(e,p),p&2&&ce(s,1)):(s=fd(e),s.c(),ce(s,1),s.m(n.parentNode,n)):s&&(sr(),me(s,1,1,()=>{s=null}),or());const f={};p&1602&&(f.xy=e[17](e[27].xy,e[6],e[10],e[9],!0)),p&4&&(f.radius=e[2]),i.$set(f);const c={};p&1910&&(c.xy=[(e[27].xy[0]*e[8][0]+e[6][0])*e[9]+e[10][0]-qr(e[4],$t(e[27].text).length,e[5])[0]/2,(e[27].xy[1]*e[8][1]+e[6][1])*e[9]+e[10][1]+e[2]]),p&2&&(c.color=`rgba(255,255,255,${e[27].opacity}`),p&50&&(c.wh=qr(e[4],$t(e[27].text).length,e[5])),p&32&&(c.fontSize=e[5]),p&2&&(c.text=$t(e[27].text)),a.$set(c)},i(l){o||(ce(s),ce(i.$$.fragment,l),ce(a.$$.fragment,l),o=!0)},o(l){me(s),me(i.$$.fragment,l),me(a.$$.fragment,l),o=!1},d(l){l&&O(r),s&&s.d(l),l&&O(n),qe(i,l),qe(a,l)}}}function O6(t){let e,r,n=Object.entries(t[1]).length>0,i,a,o,s=n&&ld(t);return{c(){e=W("div"),r=gt("svg"),s&&s.c(),this.h()},l(l){e=H(l,"DIV",{class:!0});var p=j(e);r=vt(p,"svg",{id:!0,class:!0});var f=j(r);s&&s.l(f),f.forEach(O),p.forEach(O),this.h()},h(){B(r,"id","svg"),B(r,"class","w-full h-full outline-none"),B(e,"class","w-full h-full")},m(l,p){se(l,e,p),T(e,r),s&&s.m(r,null),i=!0,a||(o=[De(B6,"keydown",t[16]),De(r,"mousewheel",t[15]),De(r,"mousemove",t[13]),De(r,"touchmove",t[13]),De(r,"mouseup",t[14]),De(r,"touchend",t[14]),De(r,"dblclick",t[12]),De(r,"focusin",t[23]),De(r,"focusout",t[24])],a=!0)},p(l,[p]){p&2&&(n=Object.entries(l[1]).length>0),n?s?(s.p(l,p),p&2&&ce(s,1)):(s=ld(l),s.c(),ce(s,1),s.m(r,null)):s&&(sr(),me(s,1,1,()=>{s=null}),or())},i(l){i||(ce(s),i=!0)},o(l){me(s),i=!1},d(l){l&&O(e),s&&s.d(),a=!1,qt(o)}}}function M6(t){var e=!1;return t.deltaY?t.deltaY===t.deltaY*-3&&(e=!0):t.deltaMode===0&&(e=!0),e}function P6(t,e,r){let{onMarkerMove:n=L=>{}}=e,{dataPoints:i}=e,{center:a=[100,100]}=e,{dimensions:o=[100,100]}=e,{pointRadius:s=4}=e,{markerRadius:l=10}=e,{textWidth:p=150}=e,{fontSize:f=12}=e,{innerPad:c=100}=e,{markerLocation:d=[.5,.5]}=e,g=!1,b=o,v=[0,0],m=1,D=[0,0],S=!0;function w(L){const V=Pi(L);r(0,d=A(zr(vs(V,D),1/m))),n(d)}function C(L){if(g){const V=Pi(L);r(0,d=A(zr(vs(V,D),1/m))),n(d)}}function F(L){r(7,g=!1)}function M(L){L.preventDefault();const V=M6(L),q=Pi(L),z=zr(vs(q,D),1/m);r(9,m=Math.min(Math.max(m+(V?-1:1)*L.deltaY*-.01,.5),20)),r(10,D=[q[0]-z[0]*m,q[1]-z[1]*m])}function P(L){S&&(L=L||window.event,L.key==="ArrowUp"||L.key==="w"?r(10,D[1]+=10,D):L.key=="ArrowDown"||L.key=="s"?r(10,D[1]-=10,D):L.key=="ArrowLeft"||L.key=="a"?r(10,D[0]+=10,D):(L.key=="ArrowRight"||L.key=="d")&&r(10,D[0]-=10,D))}function A(L){let V=vs(L,v);return[V[0]/b[0],V[1]/b[1]]}function x(L,V,q,z,Q=!1){let X=L;return Q&&(X=Nr(V,[L[0]*b[0],L[1]*b[1]])),Nr(zr(X,z),q)}const R=()=>r(7,g=!0),Z=()=>r(11,S=!0),K=()=>r(11,S=!1);return t.$$set=L=>{"onMarkerMove"in L&&r(18,n=L.onMarkerMove),"dataPoints"in L&&r(1,i=L.dataPoints),"center"in L&&r(19,a=L.center),"dimensions"in L&&r(20,o=L.dimensions),"pointRadius"in L&&r(2,s=L.pointRadius),"markerRadius"in L&&r(3,l=L.markerRadius),"textWidth"in L&&r(4,p=L.textWidth),"fontSize"in L&&r(5,f=L.fontSize),"innerPad"in L&&r(21,c=L.innerPad),"markerLocation"in L&&r(0,d=L.markerLocation)},t.$$.update=()=>{if(t.$$.dirty&3145792){const L=Math.min(...o),V=o[0]===L,q=o[1]===L;r(6,v=[Math.max(V?0:(o[0]-L)/2,c),Math.max(q?0:(o[1]-L)/2,c)]),r(8,b=[o[0]-2*v[0],o[1]-2*v[1]])}},[d,i,s,l,p,f,v,g,b,m,D,S,w,C,F,M,P,x,n,a,o,c,R,Z,K]}class C1 extends Xe{constructor(e){super(),et(this,e,P6,O6,tt,{onMarkerMove:18,dataPoints:1,center:19,dimensions:20,pointRadius:2,markerRadius:3,textWidth:4,fontSize:5,innerPad:21,markerLocation:0})}}function hd(t){let e,r,n,i,a,o,s,l;return{c(){e=W("div"),r=W("label"),n=W("span"),i=Ce("Scaling Power"),a=Ee(),o=W("input"),this.h()},l(p){e=H(p,"DIV",{class:!0});var f=j(e);r=H(f,"LABEL",{class:!0});var c=j(r);n=H(c,"SPAN",{class:!0});var d=j(n);i=Fe(d,"Scaling Power"),d.forEach(O),c.forEach(O),a=Ae(f),o=H(f,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),f.forEach(O),this.h()},h(){B(n,"class","label-text"),B(r,"class","label"),o.value=t[2],B(o,"type","range"),B(o,"min","0.5"),B(o,"max","3"),B(o,"step","0.1"),B(o,"class","range range-sm"),B(e,"class","w-full px-2")},m(p,f){se(p,e,f),T(e,r),T(r,n),T(n,i),T(e,a),T(e,o),s||(l=De(o,"change",t[11]),s=!0)},p(p,f){f&4&&(o.value=p[2])},d(p){p&&O(e),s=!1,l()}}}function k6(t){let e,r,n,i,a,o,s,l,p,f,c,d,g,b,v,m,D,S,w,C,F,M,P,A,x,R,Z,K,L,V,q,z,Q,X,te,oe,_e,be,Be,ke,Te,Le,Ne,Ye,Qe,Je,ot=t[0]&&hd(t);return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=Ce("Exponential Scaling"),o=Ee(),s=W("input"),l=Ee(),ot&&ot.c(),p=Ee(),f=W("div"),c=W("label"),d=W("span"),g=Ce(t[4]),b=Ce("/"),v=Ce(t[5]),m=Ce(" Prompts"),D=Ee(),S=W("input"),w=Ee(),C=W("div"),F=W("div"),M=W("label"),P=W("span"),A=Ce("Clusters"),x=Ee(),R=W("div"),Z=W("button"),K=Ce("0"),L=Ee(),V=W("button"),q=Ce("2"),z=Ee(),Q=W("button"),X=Ce("4"),te=Ee(),oe=W("button"),_e=Ce("6"),be=Ee(),Be=W("button"),ke=Ce("8"),Te=Ee(),Le=W("div"),Ne=W("button"),Ye=Ce("Shuffle"),this.h()},l(bt){e=H(bt,"DIV",{class:!0});var Ue=j(e);r=H(Ue,"DIV",{class:!0});var lt=j(r);n=H(lt,"LABEL",{class:!0});var kt=j(n);i=H(kt,"SPAN",{class:!0});var yr=j(i);a=Fe(yr,"Exponential Scaling"),yr.forEach(O),kt.forEach(O),o=Ae(lt),s=H(lt,"INPUT",{type:!0,class:!0}),lt.forEach(O),l=Ae(Ue),ot&&ot.l(Ue),p=Ae(Ue),f=H(Ue,"DIV",{class:!0});var Mt=j(f);c=H(Mt,"LABEL",{class:!0});var wr=j(c);d=H(wr,"SPAN",{class:!0});var Ke=j(d);g=Fe(Ke,t[4]),b=Fe(Ke,"/"),v=Fe(Ke,t[5]),m=Fe(Ke," Prompts"),Ke.forEach(O),wr.forEach(O),D=Ae(Mt),S=H(Mt,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Mt.forEach(O),w=Ae(Ue),C=H(Ue,"DIV",{class:!0});var tr=j(C);F=H(tr,"DIV",{class:!0});var rr=j(F);M=H(rr,"LABEL",{class:!0});var Jr=j(M);P=H(Jr,"SPAN",{class:!0});var G=j(P);A=Fe(G,"Clusters"),G.forEach(O),Jr.forEach(O),x=Ae(rr),R=H(rr,"DIV",{class:!0});var Y=j(R);Z=H(Y,"BUTTON",{class:!0});var ie=j(Z);K=Fe(ie,"0"),ie.forEach(O),L=Ae(Y),V=H(Y,"BUTTON",{class:!0});var de=j(V);q=Fe(de,"2"),de.forEach(O),z=Ae(Y),Q=H(Y,"BUTTON",{class:!0});var ue=j(Q);X=Fe(ue,"4"),ue.forEach(O),te=Ae(Y),oe=H(Y,"BUTTON",{class:!0});var ve=j(oe);_e=Fe(ve,"6"),ve.forEach(O),be=Ae(Y),Be=H(Y,"BUTTON",{class:!0});var le=j(Be);ke=Fe(le,"8"),le.forEach(O),Y.forEach(O),rr.forEach(O),tr.forEach(O),Te=Ae(Ue),Le=H(Ue,"DIV",{class:!0});var he=j(Le);Ne=H(he,"BUTTON",{class:!0});var Me=j(Ne);Ye=Fe(Me,"Shuffle"),Me.forEach(O),he.forEach(O),Ue.forEach(O),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),B(s,"type","checkbox"),B(s,"class","toggle toggle-sm"),s.checked=t[0],B(r,"class","min-w-max px-2"),B(d,"class","label-text"),B(c,"class","label"),S.value=t[4],B(S,"type","range"),B(S,"min","1"),B(S,"max",t[5]),B(S,"step","1"),B(S,"class","range range-sm"),B(f,"class","w-full px-2"),B(P,"class","label-text"),B(M,"class","label pb-1 m-0"),B(Z,"class","btn btn-xs"),st(Z,"btn-active",t[7]===0),B(V,"class","btn btn-xs"),st(V,"btn-active",t[7]===2),st(V,"btn-disabled",t[9]<2),B(Q,"class","btn btn-xs"),st(Q,"btn-active",t[7]===4),st(Q,"btn-disabled",t[9]<4),B(oe,"class","btn btn-xs"),st(oe,"btn-active",t[7]===6),st(oe,"btn-disabled",t[9]<6),B(Be,"class","btn btn-xs"),st(Be,"btn-active",t[7]===8),st(Be,"btn-disabled",t[9]<8),B(R,"class","btn-group btn-group-horizontal p-0"),B(F,"class",""),B(C,"class",""),B(Ne,"class","btn btn-xs btn-primary"),B(Le,"class","w-32 px-2 pb-1 flex flex-col justify-end"),B(e,"class","px-2 py-4 pb-0 flex")},m(bt,Ue){se(bt,e,Ue),T(e,r),T(r,n),T(n,i),T(i,a),T(r,o),T(r,s),T(e,l),ot&&ot.m(e,null),T(e,p),T(e,f),T(f,c),T(c,d),T(d,g),T(d,b),T(d,v),T(d,m),T(f,D),T(f,S),T(e,w),T(e,C),T(C,F),T(F,M),T(M,P),T(P,A),T(F,x),T(F,R),T(R,Z),T(Z,K),T(R,L),T(R,V),T(V,q),T(R,z),T(R,Q),T(Q,X),T(R,te),T(R,oe),T(oe,_e),T(R,be),T(R,Be),T(Be,ke),T(e,Te),T(e,Le),T(Le,Ne),T(Ne,Ye),Qe||(Je=[De(s,"change",function(){Fa(t[1])&&t[1].apply(this,arguments)}),De(S,"change",t[12]),De(Z,"click",t[13]),De(V,"click",t[14]),De(Q,"click",t[15]),De(oe,"click",t[16]),De(Be,"click",t[17]),De(Ne,"click",function(){Fa(t[10])&&t[10].apply(this,arguments)})],Qe=!0)},p(bt,[Ue]){t=bt,Ue&1&&(s.checked=t[0]),t[0]?ot?ot.p(t,Ue):(ot=hd(t),ot.c(),ot.m(e,p)):ot&&(ot.d(1),ot=null),Ue&16&&zt(g,t[4]),Ue&32&&zt(v,t[5]),Ue&16&&(S.value=t[4]),Ue&32&&B(S,"max",t[5]),Ue&128&&st(Z,"btn-active",t[7]===0),Ue&128&&st(V,"btn-active",t[7]===2),Ue&512&&st(V,"btn-disabled",t[9]<2),Ue&128&&st(Q,"btn-active",t[7]===4),Ue&512&&st(Q,"btn-disabled",t[9]<4),Ue&128&&st(oe,"btn-active",t[7]===6),Ue&512&&st(oe,"btn-disabled",t[9]<6),Ue&128&&st(Be,"btn-active",t[7]===8),Ue&512&&st(Be,"btn-disabled",t[9]<8)},i:Pe,o:Pe,d(bt){bt&&O(e),ot&&ot.d(),Qe=!1,qt(Je)}}}function T6(t,e,r){let{useExponentialScaling:n=!1}=e,{toggleExponentialScaling:i=()=>{}}=e,{exponentialScaling:a=2}=e,{setExponentialScaling:o=()=>{}}=e,{connectionLimit:s=1}=e,{maxConnectionLimit:l=1}=e,{setConnectionLimit:p=()=>{}}=e,{clusterCount:f=0}=e,{setClusterCount:c=()=>{}}=e,{maxClusterCount:d=0}=e,{onShuffle:g=()=>{}}=e;const b=F=>o(parseFloat(F.target.value)),v=F=>p(parseInt(F.target.value)),m=()=>c(0),D=()=>c(2),S=()=>c(4),w=()=>c(6),C=()=>c(8);return t.$$set=F=>{"useExponentialScaling"in F&&r(0,n=F.useExponentialScaling),"toggleExponentialScaling"in F&&r(1,i=F.toggleExponentialScaling),"exponentialScaling"in F&&r(2,a=F.exponentialScaling),"setExponentialScaling"in F&&r(3,o=F.setExponentialScaling),"connectionLimit"in F&&r(4,s=F.connectionLimit),"maxConnectionLimit"in F&&r(5,l=F.maxConnectionLimit),"setConnectionLimit"in F&&r(6,p=F.setConnectionLimit),"clusterCount"in F&&r(7,f=F.clusterCount),"setClusterCount"in F&&r(8,c=F.setClusterCount),"maxClusterCount"in F&&r(9,d=F.maxClusterCount),"onShuffle"in F&&r(10,g=F.onShuffle)},[n,i,a,o,s,l,p,f,c,d,g,b,v,m,D,S,w,C]}class F1 extends Xe{constructor(e){super(),et(this,e,T6,k6,tt,{useExponentialScaling:0,toggleExponentialScaling:1,exponentialScaling:2,setExponentialScaling:3,connectionLimit:4,maxConnectionLimit:5,setConnectionLimit:6,clusterCount:7,setClusterCount:8,maxClusterCount:9,onShuffle:10})}}const Tf=er({});var If={},I6={get exports(){return If},set exports(t){If=t}},qs={},x6={get exports(){return qs},set exports(t){qs=t}},dd;function N6(){return dd||(dd=1,function(t){function e(r,n,i,a){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,i,a)}e.prototype.run=function(r,n,i,a){this._init(r,n,i,a);for(var o=0;o<this._datasetLength;o++)if(this._visited[o]!==1){this._visited[o]=1;var s=this._regionQuery(o);if(s.length<this.minPts)this.noise.push(o);else{var l=this.clusters.length;this.clusters.push([]),this._addToCluster(o,l),this._expandCluster(l,s)}}return this.clusters},e.prototype._init=function(r,n,i,a){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),i&&(this.minPts=i),a&&(this.distance=a)},e.prototype._expandCluster=function(r,n){for(var i=0;i<n.length;i++){var a=n[i];if(this._visited[a]!==1){this._visited[a]=1;var o=this._regionQuery(a);o.length>=this.minPts&&(n=this._mergeArrays(n,o))}this._assigned[a]!==1&&this._addToCluster(a,r)}},e.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1},e.prototype._regionQuery=function(r){for(var n=[],i=0;i<this._datasetLength;i++){var a=this.distance(this.dataset[r],this.dataset[i]);a<this.epsilon&&n.push(i)}return n},e.prototype._mergeArrays=function(r,n){for(var i=n.length,a=0;a<i;a++){var o=n[a];r.indexOf(o)<0&&r.push(o)}return r},e.prototype._euclideanDistance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;)i+=(r[a]-n[a])*(r[a]-n[a]);return Math.sqrt(i)},t.exports&&(t.exports=e)}(x6)),qs}var Ws={},L6={get exports(){return Ws},set exports(t){Ws=t}},pd;function R6(){return pd||(pd=1,function(t){function e(r,n,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,i)}e.prototype.init=function(r,n,i){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof i<"u"&&(this.distance=i)},e.prototype.run=function(r,n){this.init(r,n);for(var i=this.dataset.length,a=0;a<this.k;a++)this.centroids[a]=this.randomCentroid();for(var o=!0;o;){o=this.assign();for(var s=0;s<this.k;s++){for(var l=new Array(d),p=0,f=0;f<d;f++)l[f]=0;for(var c=0;c<i;c++){var d=this.dataset[c].length;if(s===this.assignments[c]){for(var f=0;f<d;f++)l[f]+=this.dataset[c][f];p++}}if(p>0){for(var f=0;f<d;f++)l[f]/=p;this.centroids[s]=l}else this.centroids[s]=this.randomCentroid(),o=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,i;do i=Math.round(Math.random()*r),n=this.dataset[i];while(this.centroids.indexOf(n)>=0);return n},e.prototype.assign=function(){for(var r=!1,n=this.dataset.length,i,a=0;a<n;a++)i=this.argmin(this.dataset[a],this.centroids,this.distance),i!=this.assignments[a]&&(this.assignments[a]=i,r=!0);return r},e.prototype.getClusters=function(){for(var r=new Array(this.k),n,i=0;i<this.assignments.length;i++)n=this.assignments[i],typeof r[n]>"u"&&(r[n]=[]),r[n].push(i);return r},e.prototype.argmin=function(r,n,i){for(var a=Number.MAX_VALUE,o=0,s=n.length,l,p=0;p<s;p++)l=i(r,n[p]),l<a&&(a=l,o=p);return o},e.prototype.distance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;){var o=r[a]-n[a];i+=o*o}return Math.sqrt(i)},t.exports&&(t.exports=e)}(L6)),Ws}var Hs={},U6={get exports(){return Hs},set exports(t){Hs=t}},$s={},V6={get exports(){return $s},set exports(t){$s=t}},gd;function S1(){return gd||(gd=1,function(t){function e(r,n,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,i)}e.prototype.insert=function(r,n){for(var i=this._queue.length,a=i;a--;){var o=this._priorities[a];this._sorting==="desc"?n>o&&(i=a):n<o&&(i=a)}this._insertAt(r,n,i)},e.prototype.remove=function(r){for(var n=this._queue.length;n--;){var i=this._queue[n];if(r===i){this._queue.splice(n,1),this._priorities.splice(n,1);break}}},e.prototype.forEach=function(r){this._queue.forEach(r)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(r){return this._priorities[r]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,i=this._queue.length;n<i;n++)r.push([this._queue[n],this._priorities[n]]);return r},e.prototype._init=function(r,n,i){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var a=0;a<r.length;a++)this.insert(r[a],n[a])}i&&(this._sorting=i)},e.prototype._insertAt=function(r,n,i){this._queue.length===i?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(i,0,r),this._priorities.splice(i,0,n))},t.exports&&(t.exports=e)}(V6)),$s}var vd;function j6(){return vd||(vd=1,function(t){if(t.exports)var e=S1();function r(n,i,a,o){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,i,a,o)}r.prototype.run=function(n,i,a,o){this._init(n,i,a,o);for(var s=0,l=this.dataset.length;s<l;s++)if(this._processed[s]!==1){this._processed[s]=1,this.clusters.push([s]);var p=this.clusters.length-1;this._orderedList.push(s);var f=new e(null,null,"asc"),c=this._regionQuery(s);this._distanceToCore(s)!==void 0&&(this._updateQueue(s,c,f),this._expandCluster(p,f))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var n=[],i=0,a=this._orderedList.length;i<a;i++){var o=this._orderedList[i],s=this._reachability[o];n.push([o,s])}return n},r.prototype._init=function(n,i,a,o){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}i&&(this.epsilon=i),a&&(this.minPts=a),o&&(this.distance=o)},r.prototype._updateQueue=function(n,i,a){var o=this;this._coreDistance=this._distanceToCore(n),i.forEach(function(s){if(o._processed[s]===void 0){var l=o.distance(o.dataset[n],o.dataset[s]),p=Math.max(o._coreDistance,l);o._reachability[s]===void 0?(o._reachability[s]=p,a.insert(s,p)):p<o._reachability[s]&&(o._reachability[s]=p,a.remove(s),a.insert(s,p))}})},r.prototype._expandCluster=function(n,i){for(var a=i.getElements(),o=0,s=a.length;o<s;o++){var l=a[o];if(this._processed[l]===void 0){var p=this._regionQuery(l);this._processed[l]=1,this.clusters[n].push(l),this._orderedList.push(l),this._distanceToCore(l)!==void 0&&(this._updateQueue(l,p,i),this._expandCluster(n,i))}}},r.prototype._distanceToCore=function(n){for(var i=this.epsilon,a=0;a<i;a++){var o=this._regionQuery(n,a);if(o.length>=this.minPts)return a}},r.prototype._regionQuery=function(n,i){i=i||this.epsilon;for(var a=[],o=0,s=this.dataset.length;o<s;o++)this.distance(this.dataset[n],this.dataset[o])<i&&a.push(o);return a},r.prototype._euclideanDistance=function(n,i){for(var a=0,o=Math.min(n.length,i.length);o--;)a+=(n[o]-i[o])*(n[o]-i[o]);return Math.sqrt(a)},t.exports&&(t.exports=r)}(U6)),Hs}(function(t){t.exports&&(t.exports={DBSCAN:N6(),KMEANS:R6(),OPTICS:j6(),PriorityQueue:S1()})})(I6);var Gs={},z6={get exports(){return Gs},set exports(t){Gs=t}},Ks={},q6={get exports(){return Ks},set exports(t){Ks=t}},Ca=typeof Reflect=="object"?Reflect:null,md=Ca&&typeof Ca.apply=="function"?Ca.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Cs;Ca&&typeof Ca.ownKeys=="function"?Cs=Ca.ownKeys:Object.getOwnPropertySymbols?Cs=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Cs=function(e){return Object.getOwnPropertyNames(e)};function W6(t){console&&console.warn&&console.warn(t)}var B1=Number.isNaN||function(e){return e!==e};function Nt(){Nt.init.call(this)}q6.exports=Nt;Ks.once=K6;Nt.EventEmitter=Nt;Nt.prototype._events=void 0;Nt.prototype._eventsCount=0;Nt.prototype._maxListeners=void 0;var _d=10;function bo(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Nt,"defaultMaxListeners",{enumerable:!0,get:function(){return _d},set:function(t){if(typeof t!="number"||t<0||B1(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");_d=t}});Nt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Nt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||B1(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function O1(t){return t._maxListeners===void 0?Nt.defaultMaxListeners:t._maxListeners}Nt.prototype.getMaxListeners=function(){return O1(this)};Nt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[e];if(l===void 0)return!1;if(typeof l=="function")md(l,this,r);else for(var p=l.length,f=I1(l,p),n=0;n<p;++n)md(f[n],this,r);return!0};function M1(t,e,r,n){var i,a,o;if(bo(r),a=t._events,a===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),o=a[e]),o===void 0)o=a[e]=r,++t._eventsCount;else if(typeof o=="function"?o=a[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=O1(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=o.length,W6(s)}return t}Nt.prototype.addListener=function(e,r){return M1(this,e,r,!1)};Nt.prototype.on=Nt.prototype.addListener;Nt.prototype.prependListener=function(e,r){return M1(this,e,r,!0)};function H6(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function P1(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=H6.bind(n);return i.listener=r,n.wrapFn=i,i}Nt.prototype.once=function(e,r){return bo(r),this.on(e,P1(this,e,r)),this};Nt.prototype.prependOnceListener=function(e,r){return bo(r),this.prependListener(e,P1(this,e,r)),this};Nt.prototype.removeListener=function(e,r){var n,i,a,o,s;if(bo(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){s=n[o].listener,a=o;break}if(a<0)return this;a===0?n.shift():$6(n,a),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this};Nt.prototype.off=Nt.prototype.removeListener;Nt.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var a=Object.keys(n),o;for(i=0;i<a.length;++i)o=a[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function k1(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?G6(i):I1(i,i.length)}Nt.prototype.listeners=function(e){return k1(this,e,!0)};Nt.prototype.rawListeners=function(e){return k1(this,e,!1)};Nt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):T1.call(t,e)};Nt.prototype.listenerCount=T1;function T1(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Nt.prototype.eventNames=function(){return this._eventsCount>0?Cs(this._events):[]};function I1(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function $6(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function G6(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function K6(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,a),n(o)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}x1(t,e,a,{once:!0}),e!=="error"&&Y6(t,i,{once:!0})})}function Y6(t,e,r){typeof t.on=="function"&&x1(t,"error",e,r)}function x1(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(a){n.once&&t.removeEventListener(e,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}function Z6(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}var J6=Z6;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Q6=function(t){return t!=null&&(N1(t)||X6(t)||!!t._isBuffer)};function N1(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function X6(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&N1(t.slice(0,0))}var eC=J6,tC=Q6,rC=typeof Float64Array<"u";function nC(t,e){return t[0]-e[0]}function iC(){var t=this.stride,e=new Array(t.length),r;for(r=0;r<e.length;++r)e[r]=[Math.abs(t[r]),r];e.sort(nC);var n=new Array(e.length);for(r=0;r<n.length;++r)n[r]=e[r][1];return n}function aC(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n=t==="generic";if(e===-1){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",v=new Function(i);return v()}else if(e===0){var i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",v=new Function("TrivialArray",i);return v(Ys[t][0])}var i=["'use strict'"],a=eC(e),o=a.map(function(m){return"i"+m}),s="this.offset+"+a.map(function(m){return"this.stride["+m+"]*i"+m}).join("+"),l=a.map(function(m){return"b"+m}).join(","),p=a.map(function(m){return"c"+m}).join(",");i.push("function "+r+"(a,"+l+","+p+",d){this.data=a","this.shape=["+l+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(m){return"this.shape["+m+"]"}).join("*"),"}})"),e===1?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+r+"_order(){"),e===2?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+o.join(",")+",v){"),n?i.push("return this.data.set("+s+",v)}"):i.push("return this.data["+s+"]=v}"),i.push("proto.get=function "+r+"_get("+o.join(",")+"){"),n?i.push("return this.data.get("+s+")}"):i.push("return this.data["+s+"]}"),i.push("proto.index=function "+r+"_index(",o.join(),"){return "+s+"}"),i.push("proto.hi=function "+r+"_hi("+o.join(",")+"){return new "+r+"(this.data,"+a.map(function(m){return["(typeof i",m,"!=='number'||i",m,"<0)?this.shape[",m,"]:i",m,"|0"].join("")}).join(",")+","+a.map(function(m){return"this.stride["+m+"]"}).join(",")+",this.offset)}");var f=a.map(function(m){return"a"+m+"=this.shape["+m+"]"}),c=a.map(function(m){return"c"+m+"=this.stride["+m+"]"});i.push("proto.lo=function "+r+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+f.join(",")+","+c.join(","));for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");i.push("return new "+r+"(this.data,"+a.map(function(m){return"a"+m}).join(",")+","+a.map(function(m){return"c"+m}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+o.join(",")+"){var "+a.map(function(m){return"a"+m+"=this.shape["+m+"]"}).join(",")+","+a.map(function(m){return"b"+m+"=this.stride["+m+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");i.push("return new "+r+"(this.data,"+a.map(function(m){return"a"+m}).join(",")+","+a.map(function(m){return"b"+m}).join(",")+",c)}");for(var g=new Array(e),b=new Array(e),d=0;d<e;++d)g[d]="a[i"+d+"]",b[d]="b[i"+d+"]";i.push("proto.transpose=function "+r+"_transpose("+o+"){"+o.map(function(m,D){return m+"=("+m+"===undefined?"+D+":"+m+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+b.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+o+"){var a=[],b=[],c=this.offset");for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(m){return"shape["+m+"]"}).join(",")+","+a.map(function(m){return"stride["+m+"]"}).join(",")+",offset)}");var v=new Function("CTOR_LIST","ORDER",i.join(`
`));return v(Ys[t],iC)}function uC(t){if(tC(t))return"buffer";if(rC)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var Ys={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function sC(t,e,r,n){if(t===void 0){var p=Ys.array[0];return p([])}else typeof t=="number"&&(t=[t]);e===void 0&&(e=[t.length]);var i=e.length;if(r===void 0){r=new Array(i);for(var a=i-1,o=1;a>=0;--a)r[a]=o,o*=e[a]}if(n===void 0){n=0;for(var a=0;a<i;++a)r[a]<0&&(n-=(e[a]-1)*r[a])}for(var s=uC(t),l=Ys[s];l.length<=i+1;)l.push(aC(s,l.length-1));var p=l[i+1];return p(t,e,r,n)}var Ta=sC,Do={};function oC(t,e){for(var r=1,n=t.length,i=t[0],a=t[0],o=1;o<n;++o)if(a=i,i=t[o],e(i,a)){if(o===r){r++;continue}t[r++]=i}return t.length=r,t}function lC(t){for(var e=1,r=t.length,n=t[0],i=t[0],a=1;a<r;++a,i=n)if(i=n,n=t[a],n!==i){if(a===e){e++;continue}t[e++]=n}return t.length=e,t}function fC(t,e,r){return t.length===0?t:e?(r||t.sort(e),oC(t,e)):(r||t.sort(),lC(t))}var L1=fC,cC=L1;function R1(t,e,r){var n=t.length,i=e.arrayArgs.length,a=e.indexArgs.length>0,o=[],s=[],l=0,p=0,f,c;for(f=0;f<n;++f)s.push(["i",f,"=0"].join(""));for(c=0;c<i;++c)for(f=0;f<n;++f)p=l,l=t[f],f===0?s.push(["d",c,"s",f,"=t",c,"p",l].join("")):s.push(["d",c,"s",f,"=(t",c,"p",l,"-s",p,"*t",c,"p",p,")"].join(""));for(s.length>0&&o.push("var "+s.join(",")),f=n-1;f>=0;--f)l=t[f],o.push(["for(i",f,"=0;i",f,"<s",l,";++i",f,"){"].join(""));for(o.push(r),f=0;f<n;++f){for(p=l,l=t[f],c=0;c<i;++c)o.push(["p",c,"+=d",c,"s",f].join(""));a&&(f>0&&o.push(["index[",p,"]-=s",p].join("")),o.push(["++index[",l,"]"].join(""))),o.push("}")}return o.join(`
`)}function hC(t,e,r,n){for(var i=e.length,a=r.arrayArgs.length,o=r.blockSize,s=r.indexArgs.length>0,l=[],p=0;p<a;++p)l.push(["var offset",p,"=p",p].join(""));for(var p=t;p<i;++p)l.push(["for(var j"+p+"=SS[",e[p],"]|0;j",p,">0;){"].join("")),l.push(["if(j",p,"<",o,"){"].join("")),l.push(["s",e[p],"=j",p].join("")),l.push(["j",p,"=0"].join("")),l.push(["}else{s",e[p],"=",o].join("")),l.push(["j",p,"-=",o,"}"].join("")),s&&l.push(["index[",e[p],"]=j",p].join(""));for(var p=0;p<a;++p){for(var f=["offset"+p],c=t;c<i;++c)f.push(["j",c,"*t",p,"p",e[c]].join(""));l.push(["p",p,"=(",f.join("+"),")"].join(""))}l.push(R1(e,r,n));for(var p=t;p<i;++p)l.push("}");return l.join(`
`)}function dC(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}function ql(t,e,r){for(var n=t.body,i=[],a=[],o=0;o<t.args.length;++o){var s=t.args[o];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),p="",f=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var c=e.offsetArgIndex.indexOf(o),d=e.offsetArgs[c];f=d.array,p="+q"+c;case"array":p="p"+f+p;var g="l"+o,b="a"+f;if(e.arrayBlockIndices[f]===0)s.count===1?r[f]==="generic"?s.lvalue?(i.push(["var ",g,"=",b,".get(",p,")"].join("")),n=n.replace(l,g),a.push([b,".set(",p,",",g,")"].join(""))):n=n.replace(l,[b,".get(",p,")"].join("")):n=n.replace(l,[b,"[",p,"]"].join("")):r[f]==="generic"?(i.push(["var ",g,"=",b,".get(",p,")"].join("")),n=n.replace(l,g),s.lvalue&&a.push([b,".set(",p,",",g,")"].join(""))):(i.push(["var ",g,"=",b,"[",p,"]"].join("")),n=n.replace(l,g),s.lvalue&&a.push([b,"[",p,"]=",g].join("")));else{for(var v=[s.name],m=[p],D=0;D<Math.abs(e.arrayBlockIndices[f]);D++)v.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(D+1)+"*t"+f+"b"+D);if(l=new RegExp(v.join(""),"g"),p=m.join("+"),r[f]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(l,[b,"[",p,"]"].join(""))}break;case"scalar":n=n.replace(l,"Y"+e.scalarArgs.indexOf(o));break;case"index":n=n.replace(l,"index");break;case"shape":n=n.replace(l,"shape");break}}}return[i.join(`
`),n,a.join(`
`)].join(`
`).trim()}function pC(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],a=i.match(/\d+/);a?a=a[0]:a="",i.charAt(0)===0?e[n]="u"+i.charAt(1)+a:e[n]=i.charAt(0)+a,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}function gC(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,n=new Array(t.arrayArgs.length),i=new Array(t.arrayArgs.length),a=0;a<t.arrayArgs.length;++a)i[a]=e[2*a],n[a]=e[2*a+1];for(var o=[],s=[],l=[],p=[],f=[],a=0;a<t.arrayArgs.length;++a){t.arrayBlockIndices[a]<0?(l.push(0),p.push(r),o.push(r),s.push(r+t.arrayBlockIndices[a])):(l.push(t.arrayBlockIndices[a]),p.push(t.arrayBlockIndices[a]+r),o.push(0),s.push(t.arrayBlockIndices[a]));for(var c=[],d=0;d<n[a].length;d++)l[a]<=n[a][d]&&n[a][d]<p[a]&&c.push(n[a][d]-l[a]);f.push(c)}for(var g=["SS"],b=["'use strict'"],v=[],d=0;d<r;++d)v.push(["s",d,"=SS[",d,"]"].join(""));for(var a=0;a<t.arrayArgs.length;++a){g.push("a"+a),g.push("t"+a),g.push("p"+a);for(var d=0;d<r;++d)v.push(["t",a,"p",d,"=t",a,"[",l[a]+d,"]"].join(""));for(var d=0;d<Math.abs(t.arrayBlockIndices[a]);++d)v.push(["t",a,"b",d,"=t",a,"[",o[a]+d,"]"].join(""))}for(var a=0;a<t.scalarArgs.length;++a)g.push("Y"+a);if(t.shapeArgs.length>0&&v.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var m=new Array(r),a=0;a<r;++a)m[a]="0";v.push(["index=[",m.join(","),"]"].join(""))}for(var a=0;a<t.offsetArgs.length;++a){for(var D=t.offsetArgs[a],S=[],d=0;d<D.offset.length;++d)D.offset[d]!==0&&(D.offset[d]===1?S.push(["t",D.array,"p",d].join("")):S.push([D.offset[d],"*t",D.array,"p",d].join("")));S.length===0?v.push("q"+a+"=0"):v.push(["q",a,"=",S.join("+")].join(""))}var w=cC([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));v=v.concat(w),v.length>0&&b.push("var "+v.join(","));for(var a=0;a<t.arrayArgs.length;++a)b.push("p"+a+"|=0");t.pre.body.length>3&&b.push(ql(t.pre,t,i));var C=ql(t.body,t,i),F=dC(f);F<r?b.push(hC(F,f[0],t,C)):b.push(R1(f[0],t,C)),t.post.body.length>3&&b.push(ql(t.post,t,i)),t.debug&&console.log("-----Generated cwise routine for ",e,`:
`+b.join(`
`)+`
----------`);var M=[t.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",F,pC(i)].join(""),P=new Function(["function ",M,"(",g.join(","),"){",b.join(`
`),"} return ",M].join(""));return P()}var vC=gC,mC=vC;function _C(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var i=[],a=[],o=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],s=[],l=[],p=0;p<t.arrayArgs.length;++p){var f=t.arrayArgs[p];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),i.push("t"+f),i.push("r"+f),a.push("t"+f),a.push("r"+f+".join()"),o.push("array"+f+".data"),o.push("array"+f+".stride"),o.push("array"+f+".offset|0"),p>0&&(s.push("array"+t.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[p]))),l.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[p])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var p=0;p<t.scalarArgs.length;++p)o.push("scalar"+t.scalarArgs[p]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",o.join(","),")}"].join("")),t.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var c=new Function("compile",e.join(`
`));return c(mC.bind(void 0,t))}var bC=_C,DC=bC;function yC(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function wC(t){var e=new yC;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var n=0;n<r.length;++n){var i=r[n];if(i==="array"||typeof i=="object"&&i.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(i==="scalar")e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if(i==="index"){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(i==="shape"){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof i=="object"&&i.offset)e.argTypes[n]="offset",e.offsetArgs.push({array:i.array,offset:i.offset}),e.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+r[n])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,DC(e)}var rc=wC;(function(t){var e=rc,r={body:"",args:[],thisVars:[],localVars:[]};function n(d){if(!d)return r;for(var g=0;g<d.args.length;++g){var b=d.args[g];g===0?d.args[g]={name:b,lvalue:!0,rvalue:!!d.rvalue,count:d.count||1}:d.args[g]={name:b,lvalue:!1,rvalue:!0,count:1}}return d.thisVars||(d.thisVars=[]),d.localVars||(d.localVars=[]),d}function i(d){return e({args:d.args,pre:n(d.pre),body:n(d.body),post:n(d.proc),funcName:d.funcName})}function a(d){for(var g=[],b=0;b<d.args.length;++b)g.push("a"+b);var v=new Function("P",["return function ",d.funcName,"_ndarrayops(",g.join(","),") {P(",g.join(","),");return a0}"].join(""));return v(i(d))}var o={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var d in o){var g=o[d];t[d]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:d}),t[d+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+g+"=b"},rvalue:!0,funcName:d+"eq"}),t[d+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:d+"s"}),t[d+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+g+"=s"},rvalue:!0,funcName:d+"seq"})}})();var s={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var d in s){var g=s[d];t[d]=a({args:["array","array"],body:{args:["a","b"],body:"a="+g+"b"},funcName:d}),t[d+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+g+"a"},rvalue:!0,count:2,funcName:d+"eq"})}})();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var d in l){var g=l[d];t[d]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:d}),t[d+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:d+"s"}),t[d+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+g+"b"},rvalue:!0,count:2,funcName:d+"eq"}),t[d+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+g+"s"},rvalue:!0,count:2,funcName:d+"seq"})}})();var p=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var d=0;d<p.length;++d){var g=p[d];t[g]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:g}),t[g+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"})}})();var f=["max","min","atan2","pow"];(function(){for(var d=0;d<f.length;++d){var g=f[d];t[g]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g}),t[g+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g+"s"}),t[g+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"}),t[g+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"seq"})}})();var c=["atan2","pow"];(function(){for(var d=0;d<c.length;++d){var g=c[d];t[g+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"op"}),t[g+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"ops"}),t[g+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opeq"}),t[g+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opseq"})}})(),t.any=e({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=e({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=e({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(Do);var EC=rc({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64}),bd=Ta,AC=EC,CC=function(e,r){for(var n=[],i=e,a=1;Array.isArray(i);)n.push(i.length),a*=i.length,i=i[0];return n.length===0?bd():(r||(r=bd(new Float64Array(a),n)),AC(r,e),r)};function U1(t,e,r){var n=t[r]|0;if(n<=0)return[];var i=new Array(n),a;if(r===t.length-1)for(a=0;a<n;++a)i[a]=e;else for(a=0;a<n;++a)i[a]=U1(t,e,r+1);return i}function FC(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function SC(t,e){switch(typeof e>"u"&&(e=0),typeof t){case"number":if(t>0)return FC(t|0,e);break;case"object":if(typeof t.length=="number")return U1(t,e,0);break}return[]}var BC=SC,V1={};(function(t){(function(e,r){r(t)})(gr,function(e){var r,n,i,a,o,s,l,p,f,c,d,g,b,v,m,D,S,w;r={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},n={},n[r.BooleanLiteral]="Boolean",n[r.EOF]="<end>",n[r.Identifier]="Identifier",n[r.Keyword]="Keyword",n[r.NullLiteral]="Null",n[r.NumericLiteral]="Numeric",n[r.Punctuator]="Punctuator",n[r.StringLiteral]="String",n[r.RegularExpression]="RegularExpression",i=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},o={Data:1,Get:2,Set:4},s={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},l={NonAsciiIdentifierStart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")};function C(y,k){if(!y)throw new Error("ASSERT: "+k)}function F(y){return y>=48&&y<=57}function M(y){return"0123456789abcdefABCDEF".indexOf(y)>=0}function P(y){return"01234567".indexOf(y)>=0}function A(y){return y===32||y===9||y===11||y===12||y===160||y>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(y)>=0}function x(y){return y===10||y===13||y===8232||y===8233}function R(y){return y===36||y===95||y>=65&&y<=90||y>=97&&y<=122||y===92||y>=128&&l.NonAsciiIdentifierStart.test(String.fromCharCode(y))}function Z(y){return y===36||y===95||y>=65&&y<=90||y>=97&&y<=122||y>=48&&y<=57||y===92||y>=128&&l.NonAsciiIdentifierPart.test(String.fromCharCode(y))}function K(y){switch(y){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function L(y){switch(y){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function V(y){return y==="eval"||y==="arguments"}function q(y){if(c&&L(y))return!0;switch(y.length){case 2:return y==="if"||y==="in"||y==="do";case 3:return y==="var"||y==="for"||y==="new"||y==="try"||y==="let";case 4:return y==="this"||y==="else"||y==="case"||y==="void"||y==="with"||y==="enum";case 5:return y==="while"||y==="break"||y==="catch"||y==="throw"||y==="const"||y==="yield"||y==="class"||y==="super";case 6:return y==="return"||y==="typeof"||y==="delete"||y==="switch"||y==="export"||y==="import";case 7:return y==="default"||y==="finally"||y==="extends";case 8:return y==="function"||y==="continue"||y==="debugger";case 10:return y==="instanceof";default:return!1}}function z(y,k,$,re,ge){var xe;C(typeof $=="number","Comment must have valid position"),!(S.lastCommentStart>=$)&&(S.lastCommentStart=$,xe={type:y,value:k},w.range&&(xe.range=[$,re]),w.loc&&(xe.loc=ge),w.comments.push(xe),w.attachComment&&(w.leadingComments.push(xe),w.trailingComments.push(xe)))}function Q(y){var k,$,re,ge;for(k=d-y,$={start:{line:g,column:d-b-y}};d<v;)if(re=f.charCodeAt(d),++d,x(re)){w.comments&&(ge=f.slice(k+y,d-1),$.end={line:g,column:d-b-1},z("Line",ge,k,d-1,$)),re===13&&f.charCodeAt(d)===10&&++d,++g,b=d;return}w.comments&&(ge=f.slice(k+y,d),$.end={line:g,column:d-b},z("Line",ge,k,d,$))}function X(){var y,k,$,re;for(w.comments&&(y=d-2,k={start:{line:g,column:d-b-2}});d<v;)if($=f.charCodeAt(d),x($))$===13&&f.charCodeAt(d+1)===10&&++d,++g,++d,b=d,d>=v&&Y({},s.UnexpectedToken,"ILLEGAL");else if($===42){if(f.charCodeAt(d+1)===47){++d,++d,w.comments&&(re=f.slice(y+2,d-2),k.end={line:g,column:d-b},z("Block",re,y,d,k));return}++d}else++d;Y({},s.UnexpectedToken,"ILLEGAL")}function te(){var y,k;for(k=d===0;d<v;)if(y=f.charCodeAt(d),A(y))++d;else if(x(y))++d,y===13&&f.charCodeAt(d)===10&&++d,++g,b=d,k=!0;else if(y===47)if(y=f.charCodeAt(d+1),y===47)++d,++d,Q(2),k=!0;else if(y===42)++d,++d,X();else break;else if(k&&y===45)if(f.charCodeAt(d+1)===45&&f.charCodeAt(d+2)===62)d+=3,Q(3);else break;else if(y===60)if(f.slice(d+1,d+4)==="!--")++d,++d,++d,++d,Q(4);else break;else break}function oe(y){var k,$,re,ge=0;for($=y==="u"?4:2,k=0;k<$;++k)if(d<v&&M(f[d]))re=f[d++],ge=ge*16+"0123456789abcdef".indexOf(re.toLowerCase());else return"";return String.fromCharCode(ge)}function _e(){var y,k;for(y=f.charCodeAt(d++),k=String.fromCharCode(y),y===92&&(f.charCodeAt(d)!==117&&Y({},s.UnexpectedToken,"ILLEGAL"),++d,y=oe("u"),(!y||y==="\\"||!R(y.charCodeAt(0)))&&Y({},s.UnexpectedToken,"ILLEGAL"),k=y);d<v&&(y=f.charCodeAt(d),!!Z(y));)++d,k+=String.fromCharCode(y),y===92&&(k=k.substr(0,k.length-1),f.charCodeAt(d)!==117&&Y({},s.UnexpectedToken,"ILLEGAL"),++d,y=oe("u"),(!y||y==="\\"||!Z(y.charCodeAt(0)))&&Y({},s.UnexpectedToken,"ILLEGAL"),k+=y);return k}function be(){var y,k;for(y=d++;d<v;){if(k=f.charCodeAt(d),k===92)return d=y,_e();if(Z(k))++d;else break}return f.slice(y,d)}function Be(){var y,k,$;return y=d,k=f.charCodeAt(d)===92?_e():be(),k.length===1?$=r.Identifier:q(k)?$=r.Keyword:k==="null"?$=r.NullLiteral:k==="true"||k==="false"?$=r.BooleanLiteral:$=r.Identifier,{type:$,value:k,lineNumber:g,lineStart:b,start:y,end:d}}function ke(){var y=d,k=f.charCodeAt(d),$,re=f[d],ge,xe,mt;switch(k){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++d,w.tokenize&&(k===40?w.openParenToken=w.tokens.length:k===123&&(w.openCurlyToken=w.tokens.length)),{type:r.Punctuator,value:String.fromCharCode(k),lineNumber:g,lineStart:b,start:y,end:d};default:if($=f.charCodeAt(d+1),$===61)switch(k){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return d+=2,{type:r.Punctuator,value:String.fromCharCode(k)+String.fromCharCode($),lineNumber:g,lineStart:b,start:y,end:d};case 33:case 61:return d+=2,f.charCodeAt(d)===61&&++d,{type:r.Punctuator,value:f.slice(y,d),lineNumber:g,lineStart:b,start:y,end:d}}}if(mt=f.substr(d,4),mt===">>>=")return d+=4,{type:r.Punctuator,value:mt,lineNumber:g,lineStart:b,start:y,end:d};if(xe=mt.substr(0,3),xe===">>>"||xe==="<<="||xe===">>=")return d+=3,{type:r.Punctuator,value:xe,lineNumber:g,lineStart:b,start:y,end:d};if(ge=xe.substr(0,2),re===ge[1]&&"+-<>&|".indexOf(re)>=0||ge==="=>")return d+=2,{type:r.Punctuator,value:ge,lineNumber:g,lineStart:b,start:y,end:d};if("<>=!+-*%&|^/".indexOf(re)>=0)return++d,{type:r.Punctuator,value:re,lineNumber:g,lineStart:b,start:y,end:d};Y({},s.UnexpectedToken,"ILLEGAL")}function Te(y){for(var k="";d<v&&M(f[d]);)k+=f[d++];return k.length===0&&Y({},s.UnexpectedToken,"ILLEGAL"),R(f.charCodeAt(d))&&Y({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt("0x"+k,16),lineNumber:g,lineStart:b,start:y,end:d}}function Le(y){for(var k="0"+f[d++];d<v&&P(f[d]);)k+=f[d++];return(R(f.charCodeAt(d))||F(f.charCodeAt(d)))&&Y({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt(k,8),octal:!0,lineNumber:g,lineStart:b,start:y,end:d}}function Ne(){var y,k;for(y=d+1;y<v;++y){if(k=f[y],k==="8"||k==="9")return!1;if(!P(k))return!0}return!0}function Ye(){var y,k,$;if($=f[d],C(F($.charCodeAt(0))||$===".","Numeric literal must start with a decimal digit or a decimal point"),k=d,y="",$!=="."){if(y=f[d++],$=f[d],y==="0"){if($==="x"||$==="X")return++d,Te(k);if(P($)&&Ne())return Le(k)}for(;F(f.charCodeAt(d));)y+=f[d++];$=f[d]}if($==="."){for(y+=f[d++];F(f.charCodeAt(d));)y+=f[d++];$=f[d]}if($==="e"||$==="E")if(y+=f[d++],$=f[d],($==="+"||$==="-")&&(y+=f[d++]),F(f.charCodeAt(d)))for(;F(f.charCodeAt(d));)y+=f[d++];else Y({},s.UnexpectedToken,"ILLEGAL");return R(f.charCodeAt(d))&&Y({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseFloat(y),lineNumber:g,lineStart:b,start:k,end:d}}function Qe(){var y="",k,$,re,ge,xe,mt,At=!1,Wt,fr;for(Wt=g,fr=b,k=f[d],C(k==="'"||k==='"',"String literal must starts with a quote"),$=d,++d;d<v;)if(re=f[d++],re===k){k="";break}else if(re==="\\")if(re=f[d++],!re||!x(re.charCodeAt(0)))switch(re){case"u":case"x":mt=d,xe=oe(re),xe?y+=xe:(d=mt,y+=re);break;case"n":y+=`
`;break;case"r":y+="\r";break;case"t":y+="	";break;case"b":y+="\b";break;case"f":y+="\f";break;case"v":y+="\v";break;default:P(re)?(ge="01234567".indexOf(re),ge!==0&&(At=!0),d<v&&P(f[d])&&(At=!0,ge=ge*8+"01234567".indexOf(f[d++]),"0123".indexOf(re)>=0&&d<v&&P(f[d])&&(ge=ge*8+"01234567".indexOf(f[d++]))),y+=String.fromCharCode(ge)):y+=re;break}else++g,re==="\r"&&f[d]===`
`&&++d,b=d;else{if(x(re.charCodeAt(0)))break;y+=re}return k!==""&&Y({},s.UnexpectedToken,"ILLEGAL"),{type:r.StringLiteral,value:y,octal:At,startLineNumber:Wt,startLineStart:fr,lineNumber:g,lineStart:b,start:$,end:d}}function Je(y,k){var $;try{$=new RegExp(y,k)}catch{Y({},s.InvalidRegExp)}return $}function ot(){var y,k,$,re,ge;for(y=f[d],C(y==="/","Regular expression literal must start with a slash"),k=f[d++],$=!1,re=!1;d<v;)if(y=f[d++],k+=y,y==="\\")y=f[d++],x(y.charCodeAt(0))&&Y({},s.UnterminatedRegExp),k+=y;else if(x(y.charCodeAt(0)))Y({},s.UnterminatedRegExp);else if($)y==="]"&&($=!1);else if(y==="/"){re=!0;break}else y==="["&&($=!0);return re||Y({},s.UnterminatedRegExp),ge=k.substr(1,k.length-2),{value:ge,literal:k}}function bt(){var y,k,$,re;for(k="",$="";d<v&&(y=f[d],!!Z(y.charCodeAt(0)));)if(++d,y==="\\"&&d<v)if(y=f[d],y==="u"){if(++d,re=d,y=oe("u"),y)for($+=y,k+="\\u";re<d;++re)k+=f[re];else d=re,$+="u",k+="\\u";ie({},s.UnexpectedToken,"ILLEGAL")}else k+="\\",ie({},s.UnexpectedToken,"ILLEGAL");else $+=y,k+=y;return{value:$,literal:k}}function Ue(){var y,k,$,re;return D=null,te(),y=d,k=ot(),$=bt(),re=Je(k.value,$.value),w.tokenize?{type:r.RegularExpression,value:re,lineNumber:g,lineStart:b,start:y,end:d}:{literal:k.literal+$.literal,value:re,start:y,end:d}}function lt(){var y,k,$,re;return te(),y=d,k={start:{line:g,column:d-b}},$=Ue(),k.end={line:g,column:d-b},w.tokenize||(w.tokens.length>0&&(re=w.tokens[w.tokens.length-1],re.range[0]===y&&re.type==="Punctuator"&&(re.value==="/"||re.value==="/=")&&w.tokens.pop()),w.tokens.push({type:"RegularExpression",value:$.literal,range:[y,d],loc:k})),$}function kt(y){return y.type===r.Identifier||y.type===r.Keyword||y.type===r.BooleanLiteral||y.type===r.NullLiteral}function yr(){var y,k;if(y=w.tokens[w.tokens.length-1],!y)return lt();if(y.type==="Punctuator"){if(y.value==="]")return ke();if(y.value===")")return k=w.tokens[w.openParenToken-1],k&&k.type==="Keyword"&&(k.value==="if"||k.value==="while"||k.value==="for"||k.value==="with")?lt():ke();if(y.value==="}"){if(w.tokens[w.openCurlyToken-3]&&w.tokens[w.openCurlyToken-3].type==="Keyword"){if(k=w.tokens[w.openCurlyToken-4],!k)return ke()}else if(w.tokens[w.openCurlyToken-4]&&w.tokens[w.openCurlyToken-4].type==="Keyword"){if(k=w.tokens[w.openCurlyToken-5],!k)return lt()}else return ke();return i.indexOf(k.value)>=0?ke():lt()}return lt()}return y.type==="Keyword"&&y.value!=="this"?lt():ke()}function Mt(){var y;return te(),d>=v?{type:r.EOF,lineNumber:g,lineStart:b,start:d,end:d}:(y=f.charCodeAt(d),R(y)?Be():y===40||y===41||y===59?ke():y===39||y===34?Qe():y===46?F(f.charCodeAt(d+1))?Ye():ke():F(y)?Ye():w.tokenize&&y===47?yr():ke())}function wr(){var y,k,$;return te(),y={start:{line:g,column:d-b}},k=Mt(),y.end={line:g,column:d-b},k.type!==r.EOF&&($=f.slice(k.start,k.end),w.tokens.push({type:n[k.type],value:$,range:[k.start,k.end],loc:y})),k}function Ke(){var y;return y=D,d=y.end,g=y.lineNumber,b=y.lineStart,D=typeof w.tokens<"u"?wr():Mt(),d=y.end,g=y.lineNumber,b=y.lineStart,y}function tr(){var y,k,$;y=d,k=g,$=b,D=typeof w.tokens<"u"?wr():Mt(),d=y,g=k,b=$}function rr(y,k){this.line=y,this.column=k}function Jr(y,k,$,re){this.start=new rr(y,k),this.end=new rr($,re)}p={name:"SyntaxTree",processComment:function(y){var k,$;if(!(y.type===a.Program&&y.body.length>0)){for(w.trailingComments.length>0?w.trailingComments[0].range[0]>=y.range[1]?($=w.trailingComments,w.trailingComments=[]):w.trailingComments.length=0:w.bottomRightStack.length>0&&w.bottomRightStack[w.bottomRightStack.length-1].trailingComments&&w.bottomRightStack[w.bottomRightStack.length-1].trailingComments[0].range[0]>=y.range[1]&&($=w.bottomRightStack[w.bottomRightStack.length-1].trailingComments,delete w.bottomRightStack[w.bottomRightStack.length-1].trailingComments);w.bottomRightStack.length>0&&w.bottomRightStack[w.bottomRightStack.length-1].range[0]>=y.range[0];)k=w.bottomRightStack.pop();k?k.leadingComments&&k.leadingComments[k.leadingComments.length-1].range[1]<=y.range[0]&&(y.leadingComments=k.leadingComments,delete k.leadingComments):w.leadingComments.length>0&&w.leadingComments[w.leadingComments.length-1].range[1]<=y.range[0]&&(y.leadingComments=w.leadingComments,w.leadingComments=[]),$&&(y.trailingComments=$),w.bottomRightStack.push(y)}},markEnd:function(y,k){return w.range&&(y.range=[k.start,d]),w.loc&&(y.loc=new Jr(k.startLineNumber===void 0?k.lineNumber:k.startLineNumber,k.start-(k.startLineStart===void 0?k.lineStart:k.startLineStart),g,d-b),this.postProcess(y)),w.attachComment&&this.processComment(y),y},postProcess:function(y){return w.source&&(y.loc.source=w.source),y},createArrayExpression:function(y){return{type:a.ArrayExpression,elements:y}},createAssignmentExpression:function(y,k,$){return{type:a.AssignmentExpression,operator:y,left:k,right:$}},createBinaryExpression:function(y,k,$){var re=y==="||"||y==="&&"?a.LogicalExpression:a.BinaryExpression;return{type:re,operator:y,left:k,right:$}},createBlockStatement:function(y){return{type:a.BlockStatement,body:y}},createBreakStatement:function(y){return{type:a.BreakStatement,label:y}},createCallExpression:function(y,k){return{type:a.CallExpression,callee:y,arguments:k}},createCatchClause:function(y,k){return{type:a.CatchClause,param:y,body:k}},createConditionalExpression:function(y,k,$){return{type:a.ConditionalExpression,test:y,consequent:k,alternate:$}},createContinueStatement:function(y){return{type:a.ContinueStatement,label:y}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(y,k){return{type:a.DoWhileStatement,body:y,test:k}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(y){return{type:a.ExpressionStatement,expression:y}},createForStatement:function(y,k,$,re){return{type:a.ForStatement,init:y,test:k,update:$,body:re}},createForInStatement:function(y,k,$){return{type:a.ForInStatement,left:y,right:k,body:$,each:!1}},createFunctionDeclaration:function(y,k,$,re){return{type:a.FunctionDeclaration,id:y,params:k,defaults:$,body:re,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(y,k,$,re){return{type:a.FunctionExpression,id:y,params:k,defaults:$,body:re,rest:null,generator:!1,expression:!1}},createIdentifier:function(y){return{type:a.Identifier,name:y}},createIfStatement:function(y,k,$){return{type:a.IfStatement,test:y,consequent:k,alternate:$}},createLabeledStatement:function(y,k){return{type:a.LabeledStatement,label:y,body:k}},createLiteral:function(y){return{type:a.Literal,value:y.value,raw:f.slice(y.start,y.end)}},createMemberExpression:function(y,k,$){return{type:a.MemberExpression,computed:y==="[",object:k,property:$}},createNewExpression:function(y,k){return{type:a.NewExpression,callee:y,arguments:k}},createObjectExpression:function(y){return{type:a.ObjectExpression,properties:y}},createPostfixExpression:function(y,k){return{type:a.UpdateExpression,operator:y,argument:k,prefix:!1}},createProgram:function(y){return{type:a.Program,body:y}},createProperty:function(y,k,$){return{type:a.Property,key:k,value:$,kind:y}},createReturnStatement:function(y){return{type:a.ReturnStatement,argument:y}},createSequenceExpression:function(y){return{type:a.SequenceExpression,expressions:y}},createSwitchCase:function(y,k){return{type:a.SwitchCase,test:y,consequent:k}},createSwitchStatement:function(y,k){return{type:a.SwitchStatement,discriminant:y,cases:k}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(y){return{type:a.ThrowStatement,argument:y}},createTryStatement:function(y,k,$,re){return{type:a.TryStatement,block:y,guardedHandlers:k,handlers:$,finalizer:re}},createUnaryExpression:function(y,k){return y==="++"||y==="--"?{type:a.UpdateExpression,operator:y,argument:k,prefix:!0}:{type:a.UnaryExpression,operator:y,argument:k,prefix:!0}},createVariableDeclaration:function(y,k){return{type:a.VariableDeclaration,declarations:y,kind:k}},createVariableDeclarator:function(y,k){return{type:a.VariableDeclarator,id:y,init:k}},createWhileStatement:function(y,k){return{type:a.WhileStatement,test:y,body:k}},createWithStatement:function(y,k){return{type:a.WithStatement,object:y,body:k}}};function G(){var y,k,$,re;return y=d,k=g,$=b,te(),re=g!==k,d=y,g=k,b=$,re}function Y(y,k){var $,re=Array.prototype.slice.call(arguments,2),ge=k.replace(/%(\d)/g,function(xe,mt){return C(mt<re.length,"Message reference must be in range"),re[mt]});throw typeof y.lineNumber=="number"?($=new Error("Line "+y.lineNumber+": "+ge),$.index=y.start,$.lineNumber=y.lineNumber,$.column=y.start-b+1):($=new Error("Line "+g+": "+ge),$.index=d,$.lineNumber=g,$.column=d-b+1),$.description=ge,$}function ie(){try{Y.apply(null,arguments)}catch(y){if(w.errors)w.errors.push(y);else throw y}}function de(y){if(y.type===r.EOF&&Y(y,s.UnexpectedEOS),y.type===r.NumericLiteral&&Y(y,s.UnexpectedNumber),y.type===r.StringLiteral&&Y(y,s.UnexpectedString),y.type===r.Identifier&&Y(y,s.UnexpectedIdentifier),y.type===r.Keyword){if(K(y.value))Y(y,s.UnexpectedReserved);else if(c&&L(y.value)){ie(y,s.StrictReservedWord);return}Y(y,s.UnexpectedToken,y.value)}Y(y,s.UnexpectedToken,y.value)}function ue(y){var k=Ke();(k.type!==r.Punctuator||k.value!==y)&&de(k)}function ve(y){var k=Ke();(k.type!==r.Keyword||k.value!==y)&&de(k)}function le(y){return D.type===r.Punctuator&&D.value===y}function he(y){return D.type===r.Keyword&&D.value===y}function Me(){var y;return D.type!==r.Punctuator?!1:(y=D.value,y==="="||y==="*="||y==="/="||y==="%="||y==="+="||y==="-="||y==="<<="||y===">>="||y===">>>="||y==="&="||y==="^="||y==="|=")}function We(){var y,k=d,$=g,re=b,ge=D;if(f.charCodeAt(d)===59||le(";")){Ke();return}if(y=g,te(),g!==y){d=k,g=$,b=re,D=ge;return}D.type!==r.EOF&&!le("}")&&de(D)}function ft(y){return y.type===a.Identifier||y.type===a.MemberExpression}function Ie(){var y=[],k;for(k=D,ue("[");!le("]");)le(",")?(Ke(),y.push(null)):(y.push(Or()),le("]")||ue(","));return Ke(),m.markEnd(m.createArrayExpression(y),k)}function Gt(y,k){var $,re,ge;return $=c,ge=D,re=ji(),k&&c&&V(y[0].name)&&ie(k,s.StrictParamName),c=$,m.markEnd(m.createFunctionExpression(null,y,[],re),ge)}function Ut(){var y,k;return k=D,y=Ke(),y.type===r.StringLiteral||y.type===r.NumericLiteral?(c&&y.octal&&ie(y,s.StrictOctalLiteral),m.markEnd(m.createLiteral(y),k)):m.markEnd(m.createIdentifier(y.value),k)}function nr(){var y,k,$,re,ge,xe;if(y=D,xe=D,y.type===r.Identifier)return $=Ut(),y.value==="get"&&!le(":")?(k=Ut(),ue("("),ue(")"),re=Gt([]),m.markEnd(m.createProperty("get",k,re),xe)):y.value==="set"&&!le(":")?(k=Ut(),ue("("),y=D,y.type!==r.Identifier?(ue(")"),ie(y,s.UnexpectedToken,y.value),re=Gt([])):(ge=[mn()],ue(")"),re=Gt(ge,y)),m.markEnd(m.createProperty("set",k,re),xe)):(ue(":"),re=Or(),m.markEnd(m.createProperty("init",$,re),xe));if(y.type===r.EOF||y.type===r.Punctuator)de(y);else return k=Ut(),ue(":"),re=Or(),m.markEnd(m.createProperty("init",k,re),xe)}function Kt(){var y=[],k,$,re,ge,xe={},mt=String,At;for(At=D,ue("{");!le("}");)k=nr(),k.key.type===a.Identifier?$=k.key.name:$=mt(k.key.value),ge=k.kind==="init"?o.Data:k.kind==="get"?o.Get:o.Set,re="$"+$,Object.prototype.hasOwnProperty.call(xe,re)?(xe[re]===o.Data?c&&ge===o.Data?ie({},s.StrictDuplicateProperty):ge!==o.Data&&ie({},s.AccessorDataProperty):ge===o.Data?ie({},s.AccessorDataProperty):xe[re]&ge&&ie({},s.AccessorGetSet),xe[re]|=ge):xe[re]=ge,y.push(k),le("}")||ue(",");return ue("}"),m.markEnd(m.createObjectExpression(y),At)}function Er(){var y;return ue("("),y=ir(),ue(")"),y}function Yt(){var y,k,$,re;if(le("("))return Er();if(le("["))return Ie();if(le("{"))return Kt();if(y=D.type,re=D,y===r.Identifier)$=m.createIdentifier(Ke().value);else if(y===r.StringLiteral||y===r.NumericLiteral)c&&D.octal&&ie(D,s.StrictOctalLiteral),$=m.createLiteral(Ke());else if(y===r.Keyword){if(he("function"))return zi();he("this")?(Ke(),$=m.createThisExpression()):de(Ke())}else y===r.BooleanLiteral?(k=Ke(),k.value=k.value==="true",$=m.createLiteral(k)):y===r.NullLiteral?(k=Ke(),k.value=null,$=m.createLiteral(k)):le("/")||le("/=")?(typeof w.tokens<"u"?$=m.createLiteral(lt()):$=m.createLiteral(Ue()),tr()):de(Ke());return m.markEnd($,re)}function Ar(){var y=[];if(ue("("),!le(")"))for(;d<v&&(y.push(Or()),!le(")"));)ue(",");return ue(")"),y}function dr(){var y,k;return k=D,y=Ke(),kt(y)||de(y),m.markEnd(m.createIdentifier(y.value),k)}function pr(){return ue("."),dr()}function vn(){var y;return ue("["),y=ir(),ue("]"),y}function vr(){var y,k,$;return $=D,ve("new"),y=Qn(),k=le("(")?Ar():[],m.markEnd(m.createNewExpression(y,k),$)}function On(){var y,k,$,re,ge=S.allowIn;for(re=D,S.allowIn=!0,y=he("new")?vr():Yt();;){if(le("."))$=pr(),y=m.createMemberExpression(".",y,$);else if(le("("))k=Ar(),y=m.createCallExpression(y,k);else if(le("["))$=vn(),y=m.createMemberExpression("[",y,$);else break;m.markEnd(y,re)}return S.allowIn=ge,y}function Qn(){var y,k,$;for(C(S.allowIn,"callee of new expression always allow in keyword."),$=D,y=he("new")?vr():Yt();le(".")||le("[");)le("[")?(k=vn(),y=m.createMemberExpression("[",y,k)):(k=pr(),y=m.createMemberExpression(".",y,k)),m.markEnd(y,$);return y}function Vn(){var y,k,$=D;return y=On(),D.type===r.Punctuator&&(le("++")||le("--"))&&!G()&&(c&&y.type===a.Identifier&&V(y.name)&&ie({},s.StrictLHSPostfix),ft(y)||ie({},s.InvalidLHSInAssignment),k=Ke(),y=m.markEnd(m.createPostfixExpression(k.value,y),$)),y}function jn(){var y,k,$;return D.type!==r.Punctuator&&D.type!==r.Keyword?k=Vn():le("++")||le("--")?($=D,y=Ke(),k=jn(),c&&k.type===a.Identifier&&V(k.name)&&ie({},s.StrictLHSPrefix),ft(k)||ie({},s.InvalidLHSInAssignment),k=m.createUnaryExpression(y.value,k),k=m.markEnd(k,$)):le("+")||le("-")||le("~")||le("!")?($=D,y=Ke(),k=jn(),k=m.createUnaryExpression(y.value,k),k=m.markEnd(k,$)):he("delete")||he("void")||he("typeof")?($=D,y=Ke(),k=jn(),k=m.createUnaryExpression(y.value,k),k=m.markEnd(k,$),c&&k.operator==="delete"&&k.argument.type===a.Identifier&&ie({},s.StrictDelete)):k=Vn(),k}function ta(y,k){var $=0;if(y.type!==r.Punctuator&&y.type!==r.Keyword)return 0;switch(y.value){case"||":$=1;break;case"&&":$=2;break;case"|":$=3;break;case"^":$=4;break;case"&":$=5;break;case"==":case"!=":case"===":case"!==":$=6;break;case"<":case">":case"<=":case">=":case"instanceof":$=7;break;case"in":$=k?7:0;break;case"<<":case">>":case">>>":$=8;break;case"+":case"-":$=9;break;case"*":case"/":case"%":$=11;break}return $}function Ui(){var y,k,$,re,ge,xe,mt,At,Wt,fr;if(y=D,Wt=jn(),re=D,ge=ta(re,S.allowIn),ge===0)return Wt;for(re.prec=ge,Ke(),k=[y,D],mt=jn(),xe=[Wt,re,mt];(ge=ta(D,S.allowIn))>0;){for(;xe.length>2&&ge<=xe[xe.length-2].prec;)mt=xe.pop(),At=xe.pop().value,Wt=xe.pop(),$=m.createBinaryExpression(At,Wt,mt),k.pop(),y=k[k.length-1],m.markEnd($,y),xe.push($);re=Ke(),re.prec=ge,xe.push(re),k.push(D),$=jn(),xe.push($)}for(fr=xe.length-1,$=xe[fr],k.pop();fr>1;)$=m.createBinaryExpression(xe[fr-1].value,xe[fr-2],$),fr-=2,y=k.pop(),m.markEnd($,y);return $}function Ia(){var y,k,$,re,ge;return ge=D,y=Ui(),le("?")&&(Ke(),k=S.allowIn,S.allowIn=!0,$=Or(),S.allowIn=k,ue(":"),re=Or(),y=m.createConditionalExpression(y,$,re),m.markEnd(y,ge)),y}function Or(){var y,k,$,re,ge;return y=D,ge=D,re=k=Ia(),Me()&&(ft(k)||ie({},s.InvalidLHSInAssignment),c&&k.type===a.Identifier&&V(k.name)&&ie(y,s.StrictLHSAssignment),y=Ke(),$=Or(),re=m.markEnd(m.createAssignmentExpression(y.value,k,$),ge)),re}function ir(){var y,k=D;if(y=Or(),le(",")){for(y=m.createSequenceExpression([y]);d<v&&le(",");)Ke(),y.expressions.push(Or());m.markEnd(y,k)}return y}function xa(){for(var y=[],k;d<v&&!(le("}")||(k=Mn(),typeof k>"u"));)y.push(k);return y}function gi(){var y,k;return k=D,ue("{"),y=xa(),ue("}"),m.markEnd(m.createBlockStatement(y),k)}function mn(){var y,k;return k=D,y=Ke(),y.type!==r.Identifier&&de(y),m.markEnd(m.createIdentifier(y.value),k)}function Xn(y){var k=null,$,re;return re=D,$=mn(),c&&V($.name)&&ie({},s.StrictVarName),y==="const"?(ue("="),k=Or()):le("=")&&(Ke(),k=Or()),m.markEnd(m.createVariableDeclarator($,k),re)}function Vi(y){var k=[];do{if(k.push(Xn(y)),!le(","))break;Ke()}while(d<v);return k}function Na(){var y;return ve("var"),y=Vi(),We(),m.createVariableDeclaration(y,"var")}function La(y){var k,$;return $=D,ve(y),k=Vi(y),We(),m.markEnd(m.createVariableDeclaration(k,y),$)}function ra(){return ue(";"),m.createEmptyStatement()}function Ra(){var y=ir();return We(),m.createExpressionStatement(y)}function Ua(){var y,k,$;return ve("if"),ue("("),y=ir(),ue(")"),k=Hr(),he("else")?(Ke(),$=Hr()):$=null,m.createIfStatement(y,k,$)}function Va(){var y,k,$;return ve("do"),$=S.inIteration,S.inIteration=!0,y=Hr(),S.inIteration=$,ve("while"),ue("("),k=ir(),ue(")"),le(";")&&Ke(),m.createDoWhileStatement(y,k)}function ja(){var y,k,$;return ve("while"),ue("("),y=ir(),ue(")"),$=S.inIteration,S.inIteration=!0,k=Hr(),S.inIteration=$,m.createWhileStatement(y,k)}function za(){var y,k,$;return $=D,y=Ke(),k=Vi(),m.markEnd(m.createVariableDeclaration(k,y.value),$)}function qa(){var y,k,$,re,ge,xe,mt,At=S.allowIn;return y=k=$=null,ve("for"),ue("("),le(";")?Ke():(he("var")||he("let")?(S.allowIn=!1,y=za(),S.allowIn=At,y.declarations.length===1&&he("in")&&(Ke(),re=y,ge=ir(),y=null)):(S.allowIn=!1,y=ir(),S.allowIn=At,he("in")&&(ft(y)||ie({},s.InvalidLHSInForIn),Ke(),re=y,ge=ir(),y=null)),typeof re>"u"&&ue(";")),typeof re>"u"&&(le(";")||(k=ir()),ue(";"),le(")")||($=ir())),ue(")"),mt=S.inIteration,S.inIteration=!0,xe=Hr(),S.inIteration=mt,typeof re>"u"?m.createForStatement(y,k,$,xe):m.createForInStatement(re,ge,xe)}function vi(){var y=null,k;return ve("continue"),f.charCodeAt(d)===59?(Ke(),S.inIteration||Y({},s.IllegalContinue),m.createContinueStatement(null)):G()?(S.inIteration||Y({},s.IllegalContinue),m.createContinueStatement(null)):(D.type===r.Identifier&&(y=mn(),k="$"+y.name,Object.prototype.hasOwnProperty.call(S.labelSet,k)||Y({},s.UnknownLabel,y.name)),We(),y===null&&!S.inIteration&&Y({},s.IllegalContinue),m.createContinueStatement(y))}function Wa(){var y=null,k;return ve("break"),f.charCodeAt(d)===59?(Ke(),S.inIteration||S.inSwitch||Y({},s.IllegalBreak),m.createBreakStatement(null)):G()?(S.inIteration||S.inSwitch||Y({},s.IllegalBreak),m.createBreakStatement(null)):(D.type===r.Identifier&&(y=mn(),k="$"+y.name,Object.prototype.hasOwnProperty.call(S.labelSet,k)||Y({},s.UnknownLabel,y.name)),We(),y===null&&!(S.inIteration||S.inSwitch)&&Y({},s.IllegalBreak),m.createBreakStatement(y))}function mi(){var y=null;return ve("return"),S.inFunctionBody||ie({},s.IllegalReturn),f.charCodeAt(d)===32&&R(f.charCodeAt(d+1))?(y=ir(),We(),m.createReturnStatement(y)):G()?m.createReturnStatement(null):(le(";")||!le("}")&&D.type!==r.EOF&&(y=ir()),We(),m.createReturnStatement(y))}function Ha(){var y,k;return c&&(te(),ie({},s.StrictModeWith)),ve("with"),ue("("),y=ir(),ue(")"),k=Hr(),m.createWithStatement(y,k)}function $a(){var y,k=[],$,re;for(re=D,he("default")?(Ke(),y=null):(ve("case"),y=ir()),ue(":");d<v&&!(le("}")||he("default")||he("case"));)$=Hr(),k.push($);return m.markEnd(m.createSwitchCase(y,k),re)}function Ga(){var y,k,$,re,ge;if(ve("switch"),ue("("),y=ir(),ue(")"),ue("{"),k=[],le("}"))return Ke(),m.createSwitchStatement(y,k);for(re=S.inSwitch,S.inSwitch=!0,ge=!1;d<v&&!le("}");)$=$a(),$.test===null&&(ge&&Y({},s.MultipleDefaultsInSwitch),ge=!0),k.push($);return S.inSwitch=re,ue("}"),m.createSwitchStatement(y,k)}function na(){var y;return ve("throw"),G()&&Y({},s.NewlineAfterThrow),y=ir(),We(),m.createThrowStatement(y)}function zn(){var y,k,$;return $=D,ve("catch"),ue("("),le(")")&&de(D),y=mn(),c&&V(y.name)&&ie({},s.StrictCatchVariable),ue(")"),k=gi(),m.markEnd(m.createCatchClause(y,k),$)}function Cr(){var y,k=[],$=null;return ve("try"),y=gi(),he("catch")&&k.push(zn()),he("finally")&&(Ke(),$=gi()),k.length===0&&!$&&Y({},s.NoCatchOrFinally),m.createTryStatement(y,[],k,$)}function lr(){return ve("debugger"),We(),m.createDebuggerStatement()}function Hr(){var y=D.type,k,$,re,ge;if(y===r.EOF&&de(D),y===r.Punctuator&&D.value==="{")return gi();if(ge=D,y===r.Punctuator)switch(D.value){case";":return m.markEnd(ra(),ge);case"(":return m.markEnd(Ra(),ge)}if(y===r.Keyword)switch(D.value){case"break":return m.markEnd(Wa(),ge);case"continue":return m.markEnd(vi(),ge);case"debugger":return m.markEnd(lr(),ge);case"do":return m.markEnd(Va(),ge);case"for":return m.markEnd(qa(),ge);case"function":return m.markEnd(qn(),ge);case"if":return m.markEnd(Ua(),ge);case"return":return m.markEnd(mi(),ge);case"switch":return m.markEnd(Ga(),ge);case"throw":return m.markEnd(na(),ge);case"try":return m.markEnd(Cr(),ge);case"var":return m.markEnd(Na(),ge);case"while":return m.markEnd(ja(),ge);case"with":return m.markEnd(Ha(),ge)}return k=ir(),k.type===a.Identifier&&le(":")?(Ke(),re="$"+k.name,Object.prototype.hasOwnProperty.call(S.labelSet,re)&&Y({},s.Redeclaration,"Label",k.name),S.labelSet[re]=!0,$=Hr(),delete S.labelSet[re],m.markEnd(m.createLabeledStatement(k,$),ge)):(We(),m.markEnd(m.createExpressionStatement(k),ge))}function ji(){var y,k=[],$,re,ge,xe,mt,At,Wt,fr;for(fr=D,ue("{");d<v&&!(D.type!==r.StringLiteral||($=D,y=Mn(),k.push(y),y.expression.type!==a.Literal));)re=f.slice($.start+1,$.end-1),re==="use strict"?(c=!0,ge&&ie(ge,s.StrictOctalLiteral)):!ge&&$.octal&&(ge=$);for(xe=S.labelSet,mt=S.inIteration,At=S.inSwitch,Wt=S.inFunctionBody,S.labelSet={},S.inIteration=!1,S.inSwitch=!1,S.inFunctionBody=!0;d<v&&!(le("}")||(y=Mn(),typeof y>"u"));)k.push(y);return ue("}"),S.labelSet=xe,S.inIteration=mt,S.inSwitch=At,S.inFunctionBody=Wt,m.markEnd(m.createBlockStatement(k),fr)}function ei(y){var k,$=[],re,ge,xe,mt,At;if(ue("("),!le(")"))for(xe={};d<v&&(re=D,k=mn(),mt="$"+re.value,c?(V(re.value)&&(ge=re,At=s.StrictParamName),Object.prototype.hasOwnProperty.call(xe,mt)&&(ge=re,At=s.StrictParamDupe)):y||(V(re.value)?(y=re,At=s.StrictParamName):L(re.value)?(y=re,At=s.StrictReservedWord):Object.prototype.hasOwnProperty.call(xe,mt)&&(y=re,At=s.StrictParamDupe)),$.push(k),xe[mt]=!0,!le(")"));)ue(",");return ue(")"),{params:$,stricted:ge,firstRestricted:y,message:At}}function qn(){var y,k=[],$,re,ge,xe,mt,At,Wt,fr;return fr=D,ve("function"),re=D,y=mn(),c?V(re.value)&&ie(re,s.StrictFunctionName):V(re.value)?(mt=re,At=s.StrictFunctionName):L(re.value)&&(mt=re,At=s.StrictReservedWord),xe=ei(mt),k=xe.params,ge=xe.stricted,mt=xe.firstRestricted,xe.message&&(At=xe.message),Wt=c,$=ji(),c&&mt&&Y(mt,At),c&&ge&&ie(ge,At),c=Wt,m.markEnd(m.createFunctionDeclaration(y,k,[],$),fr)}function zi(){var y,k=null,$,re,ge,xe,mt=[],At,Wt,fr;return fr=D,ve("function"),le("(")||(y=D,k=mn(),c?V(y.value)&&ie(y,s.StrictFunctionName):V(y.value)?(re=y,ge=s.StrictFunctionName):L(y.value)&&(re=y,ge=s.StrictReservedWord)),xe=ei(re),mt=xe.params,$=xe.stricted,re=xe.firstRestricted,xe.message&&(ge=xe.message),Wt=c,At=ji(),c&&re&&Y(re,ge),c&&$&&ie($,ge),c=Wt,m.markEnd(m.createFunctionExpression(k,mt,[],At),fr)}function Mn(){if(D.type===r.Keyword)switch(D.value){case"const":case"let":return La(D.value);case"function":return qn();default:return Hr()}if(D.type!==r.EOF)return Hr()}function _n(){for(var y,k=[],$,re,ge;d<v&&($=D,!($.type!==r.StringLiteral||(y=Mn(),k.push(y),y.expression.type!==a.Literal)));)re=f.slice($.start+1,$.end-1),re==="use strict"?(c=!0,ge&&ie(ge,s.StrictOctalLiteral)):!ge&&$.octal&&(ge=$);for(;d<v&&(y=Mn(),!(typeof y>"u"));)k.push(y);return k}function So(){var y,k;return te(),tr(),k=D,c=!1,y=_n(),m.markEnd(m.createProgram(y),k)}function Ka(){var y,k,$,re=[];for(y=0;y<w.tokens.length;++y)k=w.tokens[y],$={type:k.type,value:k.value},w.range&&($.range=k.range),w.loc&&($.loc=k.loc),re.push($);w.tokens=re}function ia(y,k){var $,re,ge;$=String,typeof y!="string"&&!(y instanceof String)&&(y=$(y)),m=p,f=y,d=0,g=f.length>0?1:0,b=0,v=f.length,D=null,S={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},w={},k=k||{},k.tokens=!0,w.tokens=[],w.tokenize=!0,w.openParenToken=-1,w.openCurlyToken=-1,w.range=typeof k.range=="boolean"&&k.range,w.loc=typeof k.loc=="boolean"&&k.loc,typeof k.comment=="boolean"&&k.comment&&(w.comments=[]),typeof k.tolerant=="boolean"&&k.tolerant&&(w.errors=[]);try{if(tr(),D.type===r.EOF)return w.tokens;for(re=Ke();D.type!==r.EOF;)try{re=Ke()}catch(xe){if(re=D,w.errors){w.errors.push(xe);break}else throw xe}Ka(),ge=w.tokens,typeof w.comments<"u"&&(ge.comments=w.comments),typeof w.errors<"u"&&(ge.errors=w.errors)}catch(xe){throw xe}finally{w={}}return ge}function Bu(y,k){var $,re;re=String,typeof y!="string"&&!(y instanceof String)&&(y=re(y)),m=p,f=y,d=0,g=f.length>0?1:0,b=0,v=f.length,D=null,S={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},w={},typeof k<"u"&&(w.range=typeof k.range=="boolean"&&k.range,w.loc=typeof k.loc=="boolean"&&k.loc,w.attachComment=typeof k.attachComment=="boolean"&&k.attachComment,w.loc&&k.source!==null&&k.source!==void 0&&(w.source=re(k.source)),typeof k.tokens=="boolean"&&k.tokens&&(w.tokens=[]),typeof k.comment=="boolean"&&k.comment&&(w.comments=[]),typeof k.tolerant=="boolean"&&k.tolerant&&(w.errors=[]),w.attachComment&&(w.range=!0,w.comments=[],w.bottomRightStack=[],w.trailingComments=[],w.leadingComments=[]));try{$=So(),typeof w.comments<"u"&&($.comments=w.comments),typeof w.tokens<"u"&&(Ka(),$.tokens=w.tokens),typeof w.errors<"u"&&($.errors=w.errors)}catch(ge){throw ge}finally{w={}}return $}e.version="1.2.5",e.tokenize=ia,e.parse=Bu,e.Syntax=function(){var y,k={};typeof Object.create=="function"&&(k=Object.create(null));for(y in a)a.hasOwnProperty(y)&&(k[y]=a[y]);return typeof Object.freeze=="function"&&Object.freeze(k),k}()})})(V1);var OC=V1,Dd=L1,MC=0;function PC(t,e,r){this.name=t,this.lvalue=e,this.rvalue=r,this.count=0}function kC(t,e,r,n){this.body=t,this.args=e,this.thisVars=r,this.localVars=n}function TC(t){if(t==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?t in window:typeof gr<"u"?t in gr:typeof self<"u"?t in self:!1}function IC(t){for(var e=t.body[0].expression.callee.params,r=new Array(e.length),n=0;n<e.length;++n)r[n]=e[n].name;return r}function xC(t){for(var e=["(",t,")()"].join(""),r=OC.parse(e,{range:!0}),n="_inline_"+MC+++"_",i=IC(r),a=new Array(i.length),o=0;o<i.length;++o)a[o]=new PC([n,"arg",o,"_"].join(""),!1,!1);for(var s=new Array(e.length),o=0,l=e.length;o<l;++o)s[o]=e.charAt(o);var p=[],f=[];function c(C){var F=n+C.replace(/\_/g,"__");return p.push(F),F}function d(C){var F="this_"+C.replace(/\_/g,"__");return f.push(F),F}function g(C,F){for(var M=C.range[0],P=C.range[1],A=M+1;A<P;++A)s[A]="";s[M]=F}function b(C){return"'"+C.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function v(C){return s.slice(C.range[0],C.range[1]).join("")}var m=1,D=2;function S(C){return C.parent.type==="AssignmentExpression"&&C.parent.left===C?C.parent.operator==="="?m:m|D:C.parent.type==="UpdateExpression"?m|D:D}(function C(F,M){if(F.parent=M,F.type==="MemberExpression")F.computed?(C(F.object,F),C(F.property,F)):F.object.type==="ThisExpression"?g(F,d(F.property.name)):C(F.object,F);else{if(F.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(F.type==="Identifier"){var P=F.name,A=i.indexOf(P);if(A>=0){var x=a[A],R=S(F);R&m&&(x.lvalue=!0),R&D&&(x.rvalue=!0),++x.count,g(F,x.name)}else TC(P)||g(F,c(P))}else if(F.type==="Literal")typeof F.value=="string"&&g(F,b(F.value));else{if(F.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var Z=Object.keys(F),K=0,L=Z.length;K<L;++K)if(Z[K]!=="parent"){var V=F[Z[K]];if(V)if(V instanceof Array)for(var q=0;q<V.length;++q)V[q]&&typeof V[q].type=="string"&&C(V[q],F);else typeof V.type=="string"&&C(V,F)}}}})(r.body[0].expression.callee.body,void 0),Dd(p),Dd(f);var w=new kC(v(r.body[0].expression.callee.body),a,f,p);return w}var NC=xC,Wl=NC,LC=rc,ys=["args","body"],RC=["pre","post","printCode","funcName","blockSize"];function UC(t){for(var e in t)ys.indexOf(e)<0&&RC.indexOf(e)<0&&console.warn("cwise: Unknown argument '"+e+"' passed to expression compiler");for(var r=0;r<ys.length;++r)if(!t[ys[r]])throw new Error("cwise: Missing argument: "+ys[r]);return LC({args:t.args,pre:Wl(t.pre||function(){}),body:Wl(t.body),post:Wl(t.post||function(){}),debug:!!t.printCode,funcName:t.funcName||t.body.name||"cwise",blockSize:t.blockSize||64})}var yo=UC,VC=BC,jC=yo,zC=jC({args:["array","scalar","index"],body:function(e,r,n){var i=r,a;for(a=0;a<n.length-1;++a)i=i[n[a]];i[n[n.length-1]]=e}}),qC=function(e){var r=VC(e.shape);return zC(e,r),r},Zs={},WC={get exports(){return Zs},set exports(t){Zs=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(o,s){for(var l=new Float64Array(o*s),p=0;p<l.length;p++)l[p]=a()*1e-4;return(0,n.default)(l,[o,s])};var r=Ta,n=i(r);function i(o){return o&&o.__esModule?o:{default:o}}function a(){var o=2*Math.random()-1,s=2*Math.random()-1,l=o*o+s*s;return l==0||l>1?a():o*Math.sqrt(-2*Math.log(l)/l)}t.exports=e.default})(WC,Zs);var _u={},HC={get exports(){return _u},set exports(t){_u=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(c,d){var g=c.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]);switch(d){case"euclidean":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=s(c.pick(v,null),c.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break;case"manhattan":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=l(c.pick(v,null),c.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break;case"jaccard":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=p(c.pick(v,null),c.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break;case"dice":for(var v=0;v<g;v++)for(var m=v+1;m<g;m++){var D=f(c.pick(v,null),c.pick(m,null));b.set(v,m,D),b.set(m,v,D)}break}return b};var r=Ta,n=o(r),i=yo,a=o(i);function o(c){return c&&c.__esModule?c:{default:c}}var s=(0,a.default)({args:["array","array"],pre:function(d,g){this.sum=0},body:function(d,g){var b=d-g;this.sum+=b*b},post:function(d,g){return Math.sqrt(this.sum)}}),l=(0,a.default)({args:["array","array"],pre:function(d,g){this.sum=0},body:function(d,g){this.sum+=Math.abs(d-g)},post:function(d,g){return this.sum}}),p=(0,a.default)({args:["array","array"],pre:function(d,g){this.tf=0,this.tt=0},body:function(d,g){var b=Math.round(d),v=Math.round(g);this.tf+=+(b!=v),this.tt+=+(b==1&&v==1)},post:function(d,g){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),f=(0,a.default)({args:["array","array"],pre:function(d,g){this.tf=0,this.tt=0},body:function(d,g){var b=Math.round(d),v=Math.round(g);this.tf+=+(b!=v),this.tt+=+(b==1&&v==1)},post:function(d,g){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});t.exports=e.default})(HC,_u);var Js={},$C={get exports(){return Js},set exports(t){Js=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(f,c){for(var d=100,g=f.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]),v=(0,n.default)(new Float64Array(g*g),[g,g]),m=void 0,D=void 0,S=1/0,w=Math.log(c),C=void 0,F=void 0,M=void 0,P=void 0,A=0;A<g;A++){m=1,D=-1/0,S=1/0;for(var x=0;x<d;x++){for(var R=0;R<g;R++)b.set(A,R,Math.exp(-f.get(A,R)*m));b.set(A,A,0),M=0;for(var R=0;R<g;R++)M+=b.get(A,R);M==0&&(M=s),P=0;for(var R=0;R<g;R++)b.set(A,R,b.get(A,R)/M),P+=f.get(A,R)*b.get(A,R);if(F=Math.log(M)+m*P,C=F-w,Math.abs(C)<=p)break;C>0?(D=m,S==1/0?m=m*2:m=(m+S)/2):(S=m,D==-1/0?m=m/2:m=(m+D)/2)}}a.default.add(v,b,b.transpose(1,0));var Z=Math.max(a.default.sum(v),l);return a.default.divseq(v,Z),a.default.maxseq(v,l),v};var r=Ta,n=o(r),i=Do,a=o(i);function o(f){return f&&f.__esModule?f:{default:f}}var s=1e-7,l=Number.EPSILON||2220446049250313e-31,p=1e-5;t.exports=e.default})($C,Js);var Qs={},GC={get exports(){return Qs},set exports(t){Qs=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(g,b,v){var m=g.shape[0],D=g.shape[1],S=(0,n.default)(new Float64Array(m*m),[m,m]),w=(0,p.default)(g,"euclidean");d(w);var C=(v+1)/-2;a.default.powseq(a.default.divseq(a.default.addseq(w,1),v),C);for(var F=0;F<m;F++)w.set(F,F,0);var M=Math.max(a.default.sum(w),c);a.default.divs(S,w,M),a.default.maxseq(S,c);var P=(0,n.default)(new Float64Array(m*m),[m,m]),A=(0,n.default)(new Float64Array(m*m),[m,m]);a.default.div(P,b,S),a.default.logeq(P),a.default.assign(A,b);var x=a.default.sum(a.default.muleq(P,A)),R=(0,n.default)(new Float64Array(g.size),g.shape),Z=(0,n.default)(new Float64Array(m*m),[m,m]);a.default.sub(Z,b,S),a.default.muleq(Z,w);for(var F=0;F<m;F++)for(var K=0;K<D;K++){var L=(0,n.default)(new Float64Array(g.shape[0]),[g.shape[0]]);a.default.assign(L,g.pick(null,K)),a.default.addseq(a.default.negeq(L),g.get(F,K)),a.default.muleq(L,Z.pick(F,null)),R.set(F,K,a.default.sum(L))}var V=2*(v+1)/v;return a.default.mulseq(R,V),[x,R]};var r=Ta,n=f(r),i=Do,a=f(i),o=yo,s=f(o),l=_u,p=f(l);function f(g){return g&&g.__esModule?g:{default:g}}var c=Number.EPSILON||2220446049250313e-31,d=(0,s.default)({args:["array"],body:function(b){}});t.exports=e.default})(GC,Qs);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function L(V,q){var z=[],Q=!0,X=!1,te=void 0;try{for(var oe=V[Symbol.iterator](),_e;!(Q=(_e=oe.next()).done)&&(z.push(_e.value),!(q&&z.length===q));Q=!0);}catch(be){X=!0,te=be}finally{try{!Q&&oe.return&&oe.return()}finally{if(X)throw te}}return z}return function(V,q){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return L(V,q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function L(V,q){for(var z=0;z<q.length;z++){var Q=q[z];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(V,Q.key,Q)}}return function(V,q,z){return q&&L(V.prototype,q),z&&L(V,z),V}}(),i=Ks,a=Ta,o=P(a),s=Do,l=P(s),p=CC,f=P(p),c=qC,d=P(c),g=yo,b=P(g),v=Zs,m=P(v),D=_u,S=P(D),w=Js,C=P(w),F=Qs,M=P(F);function P(L){return L&&L.__esModule?L:{default:L}}function A(L){if(Array.isArray(L)){for(var V=0,q=Array(L.length);V<L.length;V++)q[V]=L[V];return q}else return Array.from(L)}function x(L,V){if(!(L instanceof V))throw new TypeError("Cannot call a class as a function")}function R(L,V){if(!L)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:L}function Z(L,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);L.prototype=Object.create(V&&V.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(L,V):L.__proto__=V)}var K=function(L){Z(V,L);function V(q){x(this,V);var z=R(this,Object.getPrototypeOf(V).call(this));return q=q||{},z.dim=q.dim||2,z.perplexity=q.perplexity||30,z.earlyExaggeration=q.earlyExaggeration||4,z.learningRate=q.learningRate||1e3,z.nIter=q.nIter||1e3,z.metric=q.metric||"euclidean",z.barneshut=q.barneshut||!1,z.inputData=null,z.outputEmbedding=null,z}return n(V,[{key:"init",value:function(z){z=z||{};var Q=z.data||[],X=z.type||"dense";if(X==="dense")this.inputData=(0,f.default)(Q);else if(X==="sparse"){for(var te=[],oe=1,_e=function(ot){var bt=Math.max.apply(null,Q.map(function(Ue){return Ue[ot]}))+1;te.push(bt),oe*=bt},be=0;be<Q[0].length;be++)_e(be);this.inputData=(0,o.default)(new Float64Array(oe),te);var Be=!0,ke=!1,Te=void 0;try{for(var Le=Q[Symbol.iterator](),Ne;!(Be=(Ne=Le.next()).done);Be=!0){var Ye,Qe=Ne.value;(Ye=this.inputData).set.apply(Ye,A(Qe).concat([1]))}}catch(Je){ke=!0,Te=Je}finally{try{!Be&&Le.return&&Le.return()}finally{if(ke)throw Te}}}else throw new Error("input data type must be dense or sparse");this.outputEmbedding=(0,m.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,S.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,C.default)(this.distances,this.perplexity);var z=Number.MAX_VALUE,Q=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),l.default.mulseq(this.P,this.earlyExaggeration);var X=this._gradDesc(Q,50,.5,0,0),te=r(X,2);z=te[0],Q=te[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var oe=this._gradDesc(Q+1,100,.8,0,0),_e=r(oe,2);z=_e[0],Q=_e[1],this.emit("progressStatus","Final optimization with momentum 0.8"),l.default.divseq(this.P,this.earlyExaggeration);var be=this._gradDesc(Q+1,this.nIter,.8,1e-6,1e-6),Be=r(be,2);return z=Be[0],Q=Be[1],this.emit("progressStatus","Optimization end"),[z,Q]}},{key:"rerun",value:function(){this.outputEmbedding=(0,m.default)(this.inputData.shape[0],this.dim);var z=this.run(),Q=r(z,2),X=Q[0],te=Q[1];return[X,te]}},{key:"getOutput",value:function(){return(0,d.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var z=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),Q=(0,o.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),X=0;X<this.outputEmbedding.shape[1];X++){var te=l.default.sup(l.default.abs(Q,this.outputEmbedding.pick(null,X)));l.default.divs(z.pick(null,X),this.outputEmbedding.pick(null,X),te)}return(0,d.default)(z)}},{key:"_gradDesc",value:function(z,Q,X){for(var te=arguments.length<=3||arguments[3]===void 0?1e-6:arguments[3],oe=arguments.length<=4||arguments[4]===void 0?1e-6:arguments[4],_e=30,be=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),Be=new Float64Array(this.outputEmbedding.size),ke=0;ke<Be.length;ke++)Be[ke]=1;var Te=(0,o.default)(Be,this.outputEmbedding.shape),Le=Number.MAX_VALUE,Ne=Number.MAX_VALUE,Ye=0,Qe=(0,b.default)({args:["array"],pre:function(tr){this.sum=0},body:function(tr){this.sum+=tr*tr},post:function(tr){return Math.sqrt(this.sum)}}),Je=(0,b.default)({args:["array","array","array"],body:function(tr,rr,Jr){}}),ot=void 0;for(ot=z;ot<Q;ot++){var bt=(0,M.default)(this.outputEmbedding,this.P,this.alpha),Ue=r(bt,2),lt=Ue[0],kt=Ue[1],yr=Math.abs(lt-Le);Le=lt;var Mt=Qe(kt);if(this.emit("progressIter",[ot,Le,Mt]),Le<Ne)Ne=Le,Ye=ot;else if(ot-Ye>_e)break;if(te>=Mt||oe>=yr)break;Je(Te,be,kt),l.default.muleq(kt,Te);var wr=(0,o.default)(new Float64Array(kt.size),kt.shape);l.default.muls(wr,kt,this.learningRate),l.default.mulseq(be,X),l.default.subeq(be,wr),l.default.addeq(this.outputEmbedding,be),this.emit("progressData",this.getOutputScaled())}return[Le,ot]}}]),V}(i.EventEmitter);e.default=K,t.exports=e.default})(z6,Gs);const KC=Kf(Gs);var xf={},YC={get exports(){return xf},set exports(t){xf=t}};(function(t){var e=parseInt(Number.MAX_SAFE_INTEGER/2)||4503599627370496,r=0;function n(){this.C=null,this.row_covered=[],this.col_covered=[],this.n=0,this.Z0_r=0,this.Z0_c=0,this.marked=null,this.path=null}n.prototype.pad_matrix=function(s,l){l=l||r;var p=0,f=s.length,c;for(c=0;c<f;++c)s[c].length>p&&(p=s[c].length);f=p>f?p:f;var d=[];for(c=0;c<f;++c){for(var g=s[c]||[],b=g.slice();f>b.length;)b.push(l);d.push(b)}return d},n.prototype.compute=function(s,l){l=l||{},l.padValue=l.padValue||r,this.C=this.pad_matrix(s,l.padValue),this.n=this.C.length,this.original_length=s.length,this.original_width=s[0].length;for(var p=[];p.length<this.n;)p.push(!1);this.row_covered=p.slice(),this.col_covered=p.slice(),this.Z0_r=0,this.Z0_c=0,this.path=this.__make_matrix(this.n*2,0),this.marked=this.__make_matrix(this.n,0);for(var f=1,c={1:this.__step1,2:this.__step2,3:this.__step3,4:this.__step4,5:this.__step5,6:this.__step6};;){var d=c[f];if(!d)break;f=d.apply(this)}for(var g=[],b=0;b<this.original_length;++b)for(var v=0;v<this.original_width;++v)this.marked[b][v]==1&&g.push([b,v]);return g},n.prototype.__make_matrix=function(s,l){for(var p=[],f=0;f<s;++f){p[f]=[];for(var c=0;c<s;++c)p[f][c]=l}return p},n.prototype.__step1=function(){for(var s=0;s<this.n;++s)for(var l=Math.min.apply(Math,this.C[s]),p=0;p<this.n;++p)this.C[s][p]-=l;return 2},n.prototype.__step2=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)if(this.C[s][l]===0&&!this.col_covered[l]&&!this.row_covered[s]){this.marked[s][l]=1,this.col_covered[l]=!0,this.row_covered[s]=!0;break}return this.__clear_covers(),3},n.prototype.__step3=function(){for(var s=0,l=0;l<this.n;++l)for(var p=0;p<this.n;++p)this.marked[l][p]==1&&this.col_covered[p]==!1&&(this.col_covered[p]=!0,++s);return s>=this.n?7:4},n.prototype.__step4=function(){for(var s=!1,l=-1,p=-1,f=-1;!s;){var c=this.__find_a_zero();if(l=c[0],p=c[1],l<0)return 6;if(this.marked[l][p]=2,f=this.__find_star_in_row(l),f>=0)p=f,this.row_covered[l]=!0,this.col_covered[p]=!1;else return this.Z0_r=l,this.Z0_c=p,5}},n.prototype.__step5=function(){var s=0;this.path[s][0]=this.Z0_r,this.path[s][1]=this.Z0_c;for(var l=!1;!l;){var p=this.__find_star_in_col(this.path[s][1]);if(p>=0?(s++,this.path[s][0]=p,this.path[s][1]=this.path[s-1][1]):l=!0,!l){var f=this.__find_prime_in_row(this.path[s][0]);s++,this.path[s][0]=this.path[s-1][0],this.path[s][1]=f}}return this.__convert_path(this.path,s),this.__clear_covers(),this.__erase_primes(),3},n.prototype.__step6=function(){for(var s=this.__find_smallest(),l=0;l<this.n;++l)for(var p=0;p<this.n;++p)this.row_covered[l]&&(this.C[l][p]+=s),this.col_covered[p]||(this.C[l][p]-=s);return 4},n.prototype.__find_smallest=function(){for(var s=e,l=0;l<this.n;++l)for(var p=0;p<this.n;++p)!this.row_covered[l]&&!this.col_covered[p]&&s>this.C[l][p]&&(s=this.C[l][p]);return s},n.prototype.__find_a_zero=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)if(this.C[s][l]===0&&!this.row_covered[s]&&!this.col_covered[l])return[s,l];return[-1,-1]},n.prototype.__find_star_in_row=function(s){for(var l=0;l<this.n;++l)if(this.marked[s][l]==1)return l;return-1},n.prototype.__find_star_in_col=function(s){for(var l=0;l<this.n;++l)if(this.marked[l][s]==1)return l;return-1},n.prototype.__find_prime_in_row=function(s){for(var l=0;l<this.n;++l)if(this.marked[s][l]==2)return l;return-1},n.prototype.__convert_path=function(s,l){for(var p=0;p<=l;++p)this.marked[s[p][0]][s[p][1]]=this.marked[s[p][0]][s[p][1]]==1?0:1},n.prototype.__clear_covers=function(){for(var s=0;s<this.n;++s)this.row_covered[s]=!1,this.col_covered[s]=!1},n.prototype.__erase_primes=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)this.marked[s][l]==2&&(this.marked[s][l]=0)};function i(s,l){var p,f;if(!l){var c=-1/0;for(p=0;p<s.length;++p)for(f=0;f<s[p].length;++f)s[p][f]>c&&(c=s[p][f]);l=function(b){return c-b}}var d=[];for(p=0;p<s.length;++p){var g=s[p];for(d[p]=[],f=0;f<g.length;++f)d[p][f]=l(s[p][f])}return d}function a(s){var l=[],p,f;for(p=0;p<s.length;++p)for(f=0;f<s[p].length;++f){var c=String(s[p][f]).length;(!l[f]||c>=l[f])&&(l[f]=c)}var d="";for(p=0;p<s.length;++p){for(f=0;f<s[p].length;++f){for(var g=String(s[p][f]);g.length<l[f];)g=" "+g;d+=g,f!=s[p].length-1&&(d+=" ")}p!=s[p].length-1&&(d+=`
`)}return d}function o(s,l){var p=new n;return p.compute(s,l)}o.version="1.2.2",o.format_matrix=a,o.make_cost_matrix=i,o.Munkres=n,t.exports&&(t.exports=o)})(YC);const ZC=xf;function j1(t){return t<2?0:t<4?2:t<6?4:t<8?6:8}function Mi(t,e){return new If.KMEANS().run(t,e)}function JC(t,e){return t.map(r=>e.map(n=>Oa(r,n)))}function z1(t){switch(t){case 2:return[zr(Nr([0,0],[0,1]),.5),zr(Nr([1,0],[1,1]),.5)];case 4:return[[0,0],[0,1],[1,1],[1,0]];case 6:return[zr(Nr([0,0],[0,1]),.5),zr(Nr([1,0],[1,1]),.5),[0,0],[0,1],[1,1],[1,0]];case 8:return[zr(Nr([0,0],[0,1]),.5),zr(Nr([1,0],[1,1]),.5),[0,0],[0,1],[1,1],[1,0],zr(Nr([0,0],[1,0]),.5),zr(Nr([0,1],[1,1]),.5)];default:return[]}}function q1(t,e){if(t.length!==e.length)throw new Error("Both sets should have the same number of points");const r=JC(t,e),n=ZC(r);return n?n.map(([i,a])=>({ids:[i,a],points:[t[i],e[a]]})):null}function nc(t){let e=new KC({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:5e3,metric:"euclidean"});const r=Object.keys(t),n=Object.values(t);e.init({data:n,type:"dense"}),e.run();let a=e.getOutputScaled().map(([s,l])=>[(s+1)/2,(l+1)/2]);return r.reduce((s,l,p)=>(s[l]=a[p],s),{})}function QC(t){let e,r,n,i,a,o,s;r=new C1({props:{center:t[6],dimensions:t[2],onMarkerMove:t[7],dataPoints:t[4]}}),a=new F1({props:{useExponentialScaling:t[3].embedExponentialScaling,toggleExponentialScaling:t[9],exponentialScaling:t[3].embedWeightScaling,setExponentialScaling:t[10],connectionLimit:t[3].embedPromptLimit||t[5],setConnectionLimit:t[8],maxConnectionLimit:t[5],clusterCount:t[3].embedClusters||0,setClusterCount:t[11],maxClusterCount:t[5],onShuffle:t[12]}});const l=t[18].default,p=bu(l,t,t[17],null);return{c(){e=W("div"),Ve(r.$$.fragment),i=Ee(),Ve(a.$$.fragment),o=Ee(),p&&p.c(),this.h()},l(f){e=H(f,"DIV",{class:!0});var c=j(e);je(r.$$.fragment,c),c.forEach(O),i=Ae(f),je(a.$$.fragment,f),o=Ae(f),p&&p.l(f),this.h()},h(){B(e,"class","w-full h-full"),Ni(()=>t[19].call(e))},m(f,c){se(f,e,c),ze(r,e,null),n=Ma(e,t[19].bind(e)),se(f,i,c),ze(a,f,c),se(f,o,c),p&&p.m(f,c),s=!0},p(f,[c]){const d={};c&64&&(d.center=f[6]),c&4&&(d.dimensions=f[2]),c&16&&(d.dataPoints=f[4]),r.$set(d);const g={};c&8&&(g.useExponentialScaling=f[3].embedExponentialScaling),c&8&&(g.exponentialScaling=f[3].embedWeightScaling),c&40&&(g.connectionLimit=f[3].embedPromptLimit||f[5]),c&32&&(g.maxConnectionLimit=f[5]),c&8&&(g.clusterCount=f[3].embedClusters||0),c&32&&(g.maxClusterCount=f[5]),a.$set(g),p&&p.p&&(!s||c&131072)&&Du(p,l,f,f[17],s?wu(l,f[17],c,null):yu(f[17]),null)},i(f){s||(ce(r.$$.fragment,f),ce(a.$$.fragment,f),ce(p,f),s=!0)},o(f){me(r.$$.fragment,f),me(a.$$.fragment,f),me(p,f),s=!1},d(f){f&&O(e),qe(r),n(),f&&O(i),qe(a,f),f&&O(o),p&&p.d(f)}}}function XC(t,e,r){let n,i,a,o,s,l,p,f,c;$e(t,Tf,L=>r(16,f=L)),$e(t,it,L=>r(3,c=L));let{$$slots:d={},$$scope:g}=e,b=0,v=0,m={};function D(L){f&&c.scaledEmbedMappings&&(F(),C(o,l,p,L))}function S(L,V){L&&V&&(F(),C(o,l,p,s))}function w(L,V){C(o,L,V,s)}function C(L,V,q,z){if(!m)return;let Q={...c.weightedPrompts},X=0;Object.values(m).forEach(be=>{Object.values(m).forEach(Be=>{const ke=Oa(be.xy,Be.xy);ke>X&&(X=ke)})});const te=Object.entries(m).reduce((be,[Be,ke])=>{const Te=Oa(L,ke.xy);return be[parseInt(Be)]=Te,be},{}),oe=(be,Be)=>{const ke=be?Math.round(Math.pow(1-Be/X,q)*100)/100:0;return ke<0?0:ke},_e=(be,Be)=>{const ke=be?Math.round((1-Be/X)*100)/100:0;return ke<0?0:ke};Object.entries(te).sort((be,Be)=>be[1]-Be[1]).forEach(([be,Be],ke)=>{if(!Q[parseInt(be)])return;const Te=ke<z,Le=V?oe(Te,Be):_e(Te,Be);Q[parseInt(be)]={...Q[parseInt(be)],embedWeight:Le},r(4,m[parseInt(be)].opacity=an(Le),m),r(4,m[parseInt(be)].connected=Te,m)}),it.update({...c,embedMarker:o,weightedPrompts:Q})}function F(){if(!f||!c.scaledEmbedMappings)return;const L=Object.keys(c.scaledEmbedMappings),V=z=>{if(!z.length)return i;const Q=z.map(X=>q[X].xy);return Rs(Q)},q=L.reduce((z,Q,X)=>(z[Q]={xy:c.scaledEmbedMappings[X],text:c.weightedPrompts[X].text,connected:!0,opacity:1},z),{});if(c.embedClusters&&c.embedClusterSets){const z=c.embedClusters,Q=c.embedClusterSets[z];let X=Q.map(_e=>V(_e));const te=z1(z),oe=q1(X,te);oe&&oe.forEach(_e=>{const be=_e.ids[0],Be=_e.points[1];Q[be].forEach(ke=>{q[ke].xy=Rs([q[ke].xy,Be])})})}r(4,m=q)}function M(L){o=L,C(o,l,p,s)}function P(L){L>0&&L<=a&&it.update({...c,embedPromptLimit:L})}function A(){it.update({...c,embedExponentialScaling:!c.embedExponentialScaling})}function x(L){it.update({...c,embedWeightScaling:L})}function R(L){[0,2,4,6,8].indexOf(L)!==-1&&it.update({...c,embedClusters:L})}async function Z(){it.update({...c,scaledEmbedMappings:nc(f)})}function K(){b=this.clientWidth,v=this.clientHeight,r(0,b),r(1,v)}return t.$$set=L=>{"$$scope"in L&&r(17,g=L.$$scope)},t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[b||250,v||250]),t.$$.dirty&4&&r(6,i=ka(n)),t.$$.dirty&8&&r(5,a=Object.keys(c.weightedPrompts||{}).length),t.$$.dirty&8&&(o=c.embedMarker||[.5,.5]),t.$$.dirty&8&&r(13,s=c.embedPromptLimit||Object.keys(c.weightedPrompts).length),t.$$.dirty&8&&r(15,l=c.embedExponentialScaling),t.$$.dirty&8&&r(14,p=c.embedWeightScaling),t.$$.dirty&65544&&f&&Object.keys(f).length<c.embedClusters&&R(j1(Object.keys(f).length)),t.$$.dirty&49152&&w(l,p),t.$$.dirty&65544&&S(f,c.scaledEmbedMappings),t.$$.dirty&8192&&D(s)},[b,v,n,c,m,a,i,M,P,A,x,R,Z,s,p,l,f,g,d,K]}class eF extends Xe{constructor(e){super(),et(this,e,XC,QC,tt,{})}}const Hl="oKey";function tF(){const t=er(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Hl]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[Hl]=a,r(a))},get:()=>Ft(t),delete:()=>{i&&(delete localStorage[Hl],r(""))}}}const di=tF(),yd="concept";function rF(){const t=er({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith(yd+"_")){const s=o.split(/_(.*)/s)[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{if(!a||!i)return;const s=Ft(t);s[a]=o,r(s)},cache:a=>{if(!i)return;const o=Ft(t),s=Object.values(it.get().weightedPrompts).map(l=>l.text);Object.entries(o).sort(([l,p],[f,c])=>s.includes(l)&&!s.includes(f)?-1:!s.includes(l)&&s.includes(f)?1:0).forEach(([l,p],f)=>{f<=a?localStorage[`concept_${l}`]=JSON.stringify(p):delete localStorage[`concept_${l}`]})},get:()=>Ft(t),remove:a=>{if(!a||!i)return;const o=Ft(t);delete o[a],delete localStorage[`concept_${a}`],r(o)},delete:()=>{i&&(delete localStorage[yd],r({}))}}}const Zr=rF(),nF=Au(Zr,t=>Object.entries(t).reduce((e,[r,n])=>(n&&(e[r]=n),e),{})),ci=er({});function iF(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!0,pending:oF,then:sF,catch:uF,value:7,error:8,blocks:[,,,]};return Bs(r=t[2],i),{c(){e=St(),i.block.c()},l(a){e=St(),i.block.l(a)},m(a,o){se(a,e,o),i.block.m(a,i.anchor=o),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(a,o){t=a,i.ctx=t,o&4&&r!==(r=t[2])&&Bs(r,i)||Rp(i,t,o)},i(a){n||(ce(i.block),n=!0)},o(a){for(let o=0;o<3;o+=1){const s=i.blocks[o];me(s)}n=!1},d(a){a&&O(e),i.block.d(a),i.token=null,i=null}}}function aF(t){let e,r,n,i,a;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("p"),a=Ce("Set OpenAI key in settings to use embedding map."),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=j(e);r=H(s,"DIV",{class:!0});var l=j(r);n=H(l,"DIV",{class:!0});var p=j(n);i=H(p,"P",{class:!0});var f=j(i);a=Fe(f,"Set OpenAI key in settings to use embedding map."),f.forEach(O),p.forEach(O),l.forEach(O),s.forEach(O),this.h()},h(){B(i,"class","text-center text-lg"),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(o,s){se(o,e,s),T(e,r),T(r,n),T(n,i),T(i,a)},p:Pe,i:Pe,o:Pe,d(o){o&&O(e)}}}function uF(t){let e,r=t[8].message+"",n;return{c(){e=W("p"),n=Ce(r),this.h()},l(i){e=H(i,"P",{style:!0});var a=j(e);n=Fe(a,r),a.forEach(O),this.h()},h(){Ot(e,"color","red")},m(i,a){se(i,e,a),T(e,n)},p(i,a){a&4&&r!==(r=i[8].message+"")&&zt(n,r)},i:Pe,o:Pe,d(i){i&&O(e)}}}function sF(t){let e,r;return e=new eF({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p:Pe,i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function oF(t){let e,r,n,i,a,o,s,l,p;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("p"),a=Ce("Fetching embeddings. This may take a while..."),o=Ee(),s=W("progress"),this.h()},l(f){e=H(f,"DIV",{class:!0});var c=j(e);r=H(c,"DIV",{class:!0});var d=j(r);n=H(d,"DIV",{class:!0});var g=j(n);i=H(g,"P",{class:!0});var b=j(i);a=Fe(b,"Fetching embeddings. This may take a while..."),b.forEach(O),o=Ae(g),s=H(g,"PROGRESS",{class:!0,max:!0}),j(s).forEach(O),g.forEach(O),d.forEach(O),c.forEach(O),this.h()},h(){B(i,"class","text-center text-sm"),B(s,"class","progress progress-primary w-56"),s.value=l=Object.keys(t[3]).length,B(s,"max",p=Object.keys(t[0].weightedPrompts).length),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(f,c){se(f,e,c),T(e,r),T(r,n),T(n,i),T(i,a),T(n,o),T(n,s)},p(f,c){c&8&&l!==(l=Object.keys(f[3]).length)&&(s.value=l),c&1&&p!==(p=Object.keys(f[0].weightedPrompts).length)&&B(s,"max",p)},i:Pe,o:Pe,d(f){f&&O(e)}}}function lF(t){let e,r,n,i,a;const o=[aF,iF],s=[];function l(p,f){return p[1]?1:0}return e=l(t),r=s[e]=o[e](t),i=new Fu({}),{c(){r.c(),n=Ee(),Ve(i.$$.fragment)},l(p){r.l(p),n=Ae(p),je(i.$$.fragment,p)},m(p,f){s[e].m(p,f),se(p,n,f),ze(i,p,f),a=!0},p(p,[f]){let c=e;e=l(p),e===c?s[e].p(p,f):(sr(),me(s[c],1,1,()=>{s[c]=null}),or(),r=s[e],r?r.p(p,f):(r=s[e]=o[e](p),r.c()),ce(r,1),r.m(n.parentNode,n))},i(p){a||(ce(r),ce(i.$$.fragment,p),a=!0)},o(p){me(r),me(i.$$.fragment,p),a=!1},d(p){s[e].d(p),p&&O(n),qe(i,p)}}}function fF(t,e){return e?t.embedClusterSets?Object.entries(e).length!==Object.entries(t.weightedPrompts).length?(console.log("embeddings length mismatch",Object.entries(e).length,Object.entries(t.weightedPrompts).length),!0):(t.lastPromptChange||0)>(t.lastEmbeddingChange||0)?(console.log("prompt change after embedding change"),!0):!1:(console.log("no active cluster sets"),!0):(console.log("no active embeddings"),!0)}function cF(t,e,r){let n,i,a;$e(t,it,f=>r(0,n=f)),$e(t,di,f=>r(1,i=f)),$e(t,Tf,f=>r(4,a=f));let o=null,s={};async function l(f){return console.log("waiting for embeddings"),new Promise((c,d)=>{r(3,s={});const g=()=>{b(),f.every(D=>s[D]!==void 0)?c(s):setTimeout(g,100)},b=()=>{f.forEach(m=>{const D=Zr.get()[m];D&&r(3,s[m]=D,s)})};b(),f.filter(m=>!s[m]).forEach(m=>{ci.update(D=>(D[m]=!1,D))}),g()})}async function p(){if(console.log("fetching embeddings"),!i||!n.weightedPrompts)return;const f=Object.entries(n.weightedPrompts).map(([w,C])=>[w,C.text]),c=f.map(w=>w[1]);console.log("fetching embedding for",c),r(2,o=l(c)),await o;const d={};f.forEach(([w,C])=>{d[parseInt(w)]=s[C]});let g=Object.entries(d).sort((w,C)=>parseInt(w[0])-parseInt(C[0]));const b=w=>new Array(w).fill(null).map(()=>[]);console.log("clustering embeddings");const v=g.length>=2?Mi(g.map(w=>w[1]),2):[g.map(w=>w[0])];console.log("set of 2 complete");const m=g.length>=4?Mi(g.map(w=>w[1]),4):v;console.log("set of 4 complete");const D=g.length>=6?Mi(g.map(w=>w[1]),6):m;console.log("set of 6 complete");const S=g.length>=8?Mi(g.map(w=>w[1]),8):D;console.log("set of 8 complete"),it.update({...n,embedClusterSets:{2:[...v,...b(2-v.length)],4:[...m,...b(4-m.length)],6:[...D,...b(6-D.length)],8:[...S,...b(8-S.length)]},lastEmbeddingChange:Date.now(),scaledEmbedMappings:nc(d)}),Tf.set(d),console.log("embeddings complete")}return t.$$.update=()=>{t.$$.dirty&19&&i&&fF(n,a)&&(console.log("Embeddings require update"),p())},[n,i,o,s,a]}class hF extends Xe{constructor(e){super(),et(this,e,cF,lF,tt,{})}}function dF(t){let e,r,n,i;return{c(){e=gt("g"),r=gt("circle"),this.h()},l(a){e=vt(a,"g",{});var o=j(e);r=vt(o,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),j(r).forEach(O),o.forEach(O),this.h()},h(){B(r,"cx",n=t[0][0]),B(r,"cy",i=t[0][1]),B(r,"r",t[1]),B(r,"stroke",t[3]),B(r,"stroke-width",t[2]),Ot(r,"fill","rgba(0,0,0,0)")},m(a,o){se(a,e,o),T(e,r)},p(a,[o]){o&1&&n!==(n=a[0][0])&&B(r,"cx",n),o&1&&i!==(i=a[0][1])&&B(r,"cy",i),o&2&&B(r,"r",a[1]),o&8&&B(r,"stroke",a[3]),o&4&&B(r,"stroke-width",a[2])},i:Pe,o:Pe,d(a){a&&O(e)}}}function pF(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=20}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class gF extends Xe{constructor(e){super(),et(this,e,pF,dF,tt,{xy:0,radius:1,stroke:2,color:3})}}function vF(t){let e,r,n,i,a;return{c(){e=gt("polygon"),this.h()},l(o){e=vt(o,"polygon",{points:!0,"stroke-width":!0,fill:!0,transform:!0}),j(e).forEach(O),this.h()},h(){B(e,"points",r=`${t[7][0]},${t[7][1]} ${t[9][0]},${t[9][1]} ${t[8][0]},${t[8][1]} ${t[6][0]},${t[6][1]} ${t[4][0]},${t[4][1]} ${t[5][0]},${t[5][1]}`),B(e,"stroke-width",4),B(e,"fill",t[3]),B(e,"transform",n=`rotate(${t[1].toFixed(2)} ${t[0][0]} ${t[0][1]}) rotate(${t[2]?"180":"0"} ${(t[7][0]+t[6][0])/2} ${(t[7][1]+t[6][1])/2})`)},m(o,s){se(o,e,s),i||(a=[De(e,"mouseover",t[10]),De(e,"mouseout",t[11]),De(e,"mousedown",t[12]),De(e,"touchstart",t[12])],i=!0)},p(o,[s]){s&1008&&r!==(r=`${o[7][0]},${o[7][1]} ${o[9][0]},${o[9][1]} ${o[8][0]},${o[8][1]} ${o[6][0]},${o[6][1]} ${o[4][0]},${o[4][1]} ${o[5][0]},${o[5][1]}`)&&B(e,"points",r),s&8&&B(e,"fill",o[3]),s&199&&n!==(n=`rotate(${o[1].toFixed(2)} ${o[0][0]} ${o[0][1]}) rotate(${o[2]?"180":"0"} ${(o[7][0]+o[6][0])/2} ${(o[7][1]+o[6][1])/2})`)&&B(e,"transform",n)},i:Pe,o:Pe,d(o){o&&O(e),i=!1,qt(a)}}}function mF(t,e,r){let n,i,a,o,s,l,{xy:p=[500,500]}=e,{radius:f=400}=e,{stroke:c=20}=e,{color:d="rgba(46,67,101, 0.4)"}=e,{hoverColor:g="white"}=e,{angle:b=0}=e,{handleMouseDown:v=F=>{}}=e,{reverse:m=!1}=e,D=d;function S(){r(3,D=g)}function w(){r(3,D=d)}function C(F){v(F)}return t.$$set=F=>{"xy"in F&&r(0,p=F.xy),"radius"in F&&r(13,f=F.radius),"stroke"in F&&r(14,c=F.stroke),"color"in F&&r(15,d=F.color),"hoverColor"in F&&r(16,g=F.hoverColor),"angle"in F&&r(1,b=F.angle),"handleMouseDown"in F&&r(17,v=F.handleMouseDown),"reverse"in F&&r(2,m=F.reverse)},t.$$.update=()=>{t.$$.dirty&24577&&r(9,n=Lr(p,[-4,1],f-c/2)),t.$$.dirty&24577&&r(8,i=Lr(p,[1,1],f-c/2)),t.$$.dirty&8193&&r(7,a=Lr(p,[0,1],f)),t.$$.dirty&8193&&r(6,o=Lr(p,[4,1],f)),t.$$.dirty&24577&&r(5,s=Lr(p,[-3,1],f+c/2)),t.$$.dirty&24577&&r(4,l=Lr(p,[1,1],f+c/2))},[p,b,m,D,l,s,o,a,i,n,S,w,C,f,c,d,g,v]}class _F extends Xe{constructor(e){super(),et(this,e,mF,vF,tt,{xy:0,radius:13,stroke:14,color:15,hoverColor:16,angle:1,handleMouseDown:17,reverse:2})}}function wd(t,e,r){const n=t.slice();return n[21]=e[r][0],n[22]=e[r][1],n}function Ed(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,a;e=new Zf({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),s=[];for(let f=0;f<o.length;f+=1)s[f]=Ad(wd(t,o,f));const l=f=>me(s[f],1,1,()=>{s[f]=null});let p=n&&Cd(t);return{c(){Ve(e.$$.fragment);for(let f=0;f<s.length;f+=1)s[f].c();r=St(),p&&p.c(),i=St()},l(f){je(e.$$.fragment,f);for(let c=0;c<s.length;c+=1)s[c].l(f);r=St(),p&&p.l(f),i=St()},m(f,c){ze(e,f,c);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(f,c);se(f,r,c),p&&p.m(f,c),se(f,i,c),a=!0},p(f,c){const d={};if(c&1&&(d.xy=f[0]),c&2&&(d.radius=f[1]),e.$set(d),c&1660){o=Object.entries(f[5].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=wd(f,o,g);s[g]?(s[g].p(b,c),ce(s[g],1)):(s[g]=Ad(b),s[g].c(),ce(s[g],1),s[g].m(r.parentNode,r))}for(sr(),g=o.length;g<s.length;g+=1)l(g);or()}c&32&&(n=Object.entries(f[5].weightedPrompts).length>0),n?p?(p.p(f,c),c&32&&ce(p,1)):(p=Cd(f),p.c(),ce(p,1),p.m(i.parentNode,i)):p&&(sr(),me(p,1,1,()=>{p=null}),or())},i(f){if(!a){ce(e.$$.fragment,f);for(let c=0;c<o.length;c+=1)ce(s[c]);ce(p),a=!0}},o(f){me(e.$$.fragment,f),s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)me(s[c]);me(p),a=!1},d(f){qe(e,f),Eu(s,f),f&&O(r),p&&p.d(f),f&&O(i)}}}function Ad(t){let e,r,n;e=new vo({props:{xy:t[10](t[6][t[21]].xy,qr(t[3],$t(t[22].text).length,t[4])),color:`rgba(255,255,255,${an(t[6][t[21]].unitWeight)}`,wh:qr(t[3],$t(t[22].text).length,t[4]),fontSize:t[4],text:$t(t[22].text)}});function i(){return t[15](t[21])}return r=new Pa({props:{xy:t[6][t[21]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:i}}),{c(){Ve(e.$$.fragment),Ve(r.$$.fragment)},l(a){je(e.$$.fragment,a),je(r.$$.fragment,a)},m(a,o){ze(e,a,o),ze(r,a,o),n=!0},p(a,o){t=a;const s={};o&120&&(s.xy=t[10](t[6][t[21]].xy,qr(t[3],$t(t[22].text).length,t[4]))),o&96&&(s.color=`rgba(255,255,255,${an(t[6][t[21]].unitWeight)}`),o&56&&(s.wh=qr(t[3],$t(t[22].text).length,t[4])),o&16&&(s.fontSize=t[4]),o&32&&(s.text=$t(t[22].text)),e.$set(s);const l={};o&96&&(l.xy=t[6][t[21]].xy),o&4&&(l.radius=t[2]),o&32&&(l.handleMouseDown=i),r.$set(l)},i(a){n||(ce(e.$$.fragment,a),ce(r.$$.fragment,a),n=!0)},o(a){me(e.$$.fragment,a),me(r.$$.fragment,a),n=!1},d(a){qe(e,a),qe(r,a)}}}function Cd(t){let e,r,n;return e=new gF({props:{xy:t[0],radius:t[7],stroke:30}}),r=new _F({props:{reverse:t[5].ringReverse,xy:t[0],radius:t[7],stroke:30,angle:t[5].ringStartAngle,color:"rgba(136,157,191, 1)",handleMouseDown:t[16]}}),{c(){Ve(e.$$.fragment),Ve(r.$$.fragment)},l(i){je(e.$$.fragment,i),je(r.$$.fragment,i)},m(i,a){ze(e,i,a),ze(r,i,a),n=!0},p(i,a){const o={};a&1&&(o.xy=i[0]),a&128&&(o.radius=i[7]),e.$set(o);const s={};a&32&&(s.reverse=i[5].ringReverse),a&1&&(s.xy=i[0]),a&128&&(s.radius=i[7]),a&32&&(s.angle=i[5].ringStartAngle),r.$set(s)},i(i){n||(ce(e.$$.fragment,i),ce(r.$$.fragment,i),n=!0)},o(i){me(e.$$.fragment,i),me(r.$$.fragment,i),n=!1},d(i){qe(e,i),qe(r,i)}}}function bF(t){let e,r,n,i,a,o=t[6]&&t[5].weightedPrompts&&Ed(t);const s=t[14].default,l=bu(s,t,t[13],null);return{c(){e=gt("svg"),o&&o.c(),r=Ee(),l&&l.c(),this.h()},l(p){e=vt(p,"svg",{id:!0,class:!0});var f=j(e);o&&o.l(f),f.forEach(O),r=Ae(p),l&&l.l(p),this.h()},h(){B(e,"id","svg"),B(e,"class","w-full h-full")},m(p,f){se(p,e,f),o&&o.m(e,null),se(p,r,f),l&&l.m(p,f),n=!0,i||(a=[De(e,"mousemove",t[11]),De(e,"touchmove",t[11]),De(e,"mouseup",t[8]),De(e,"touchend",t[8]),De(e,"dblclick",t[12])],i=!0)},p(p,[f]){p[6]&&p[5].weightedPrompts?o?(o.p(p,f),f&96&&ce(o,1)):(o=Ed(p),o.c(),ce(o,1),o.m(e,null)):o&&(sr(),me(o,1,1,()=>{o=null}),or()),l&&l.p&&(!n||f&8192)&&Du(l,s,p,p[13],n?wu(s,p[13],f,null):yu(p[13]),null)},i(p){n||(ce(o),ce(l,p),n=!0)},o(p){me(o),me(l,p),n=!1},d(p){p&&O(e),o&&o.d(),p&&O(r),l&&l.d(p),i=!1,qt(a)}}}function Fd(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const o=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function DF(t,e,r){let n,i,a;$e(t,it,A=>r(5,a=A));let{$$slots:o={},$$scope:s}=e,{center:l=[450,450]}=e,{radius:p=250}=e,{pointRadius:f=10}=e,{textWidth:c=150}=e,{fontSize:d=13}=e,g=[0,0],b=null;function v(A){b=null}function m(A){b=A}function D(A,x){let R=Ln(A,l,p)[0]-180;R<0&&(R+=360);const Z=Jf(ka(x),R);return Nr(A,Z)}function S(A){console.log(p,n);const x=jr(Ln(vu(A,l,n),l,n)[0]);r(6,i=F(a.weightedPrompts,l,p,a.ringWeightScaling,a.ringExponentialScaling,x,a.ringAngles))}function w(A){if(g=Pi(A),b==="main")S(g);else if(b){const x={...a.weightedPrompts[b]},R=vu(g,l,p),Z=Ln(R,l,p)[0],K={...a.ringAngles};K[x.id]=Z;const L={...a.weightedPrompts};L[b]=x,r(6,i=F(L,l,p,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,K))}}function C(A){g=Pi(A),S(g)}function F(A,x,R,Z,K,L,V){if(!A||!x||!R||!Z)return null;let q=Object.entries(A).reduce((Q,[X,te])=>{const _e=a.ringReverse?L-V[X]:V[X]-L,be=jr(_e),Be=Math.pow(1-be/360,K?Z:1);return Q[X]={angleDifference:be,xy:Lr(x,[V[X],1],R),unitWeight:Be},Q},{});const z={...A};return Object.entries(q).forEach(([Q,X])=>{z[Q].ringWeight=X.unitWeight}),it.update({...a,ringStartAngle:L,weightedPrompts:z,ringAngles:V}),q}const M=A=>m(A),P=()=>m("main");return t.$$set=A=>{"center"in A&&r(0,l=A.center),"radius"in A&&r(1,p=A.radius),"pointRadius"in A&&r(2,f=A.pointRadius),"textWidth"in A&&r(3,c=A.textWidth),"fontSize"in A&&r(4,d=A.fontSize),"$$scope"in A&&r(13,s=A.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&r(7,n=p-30),t.$$.dirty&32&&Object.keys(a.ringAngles).length!==Object.keys(a.weightedPrompts).length&&it.update({...a,ringAngles:Fd(a.weightedPrompts,{})}),t.$$.dirty&35&&r(6,i=F(a.weightedPrompts,l,p,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,a.ringAngles||Fd(a.weightedPrompts,{})))},[l,p,f,c,d,a,i,n,v,m,D,w,C,s,o,M,P]}class yF extends Xe{constructor(e){super(),et(this,e,DF,bF,tt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function Sd(t){let e,r,n,i,a,o,s,l;return{c(){e=W("div"),r=W("label"),n=W("span"),i=Ce("Scaling Power"),a=Ee(),o=W("input"),this.h()},l(p){e=H(p,"DIV",{class:!0});var f=j(e);r=H(f,"LABEL",{class:!0});var c=j(r);n=H(c,"SPAN",{class:!0});var d=j(n);i=Fe(d,"Scaling Power"),d.forEach(O),c.forEach(O),a=Ae(f),o=H(f,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),f.forEach(O),this.h()},h(){B(n,"class","label-text"),B(r,"class","label"),B(o,"type","range"),B(o,"min","0.5"),B(o,"max","5"),B(o,"step","0.1"),B(o,"class","range range-xs"),B(e,"class","w-full px-2")},m(p,f){se(p,e,f),T(e,r),T(r,n),T(n,i),T(e,a),T(e,o),nn(o,t[0]),s||(l=[De(o,"change",t[7]),De(o,"input",t[7])],s=!0)},p(p,f){f&1&&nn(o,p[0])},d(p){p&&O(e),s=!1,qt(l)}}}function wF(t){let e,r,n,i,a,o,s,l,p,f,c,d,g,b,v,m,D,S,w,C,F;r=new yF({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let M=t[1]&&Sd(t);return S=new Fu({}),{c(){e=W("div"),Ve(r.$$.fragment),i=Ee(),a=W("div"),o=W("div"),s=W("label"),l=W("span"),p=Ce("Exponential Scaling"),f=Ee(),c=W("input"),d=Ee(),M&&M.c(),g=Ee(),b=W("div"),v=W("button"),m=Ce("Reverse"),D=Ee(),Ve(S.$$.fragment),this.h()},l(P){e=H(P,"DIV",{class:!0});var A=j(e);je(r.$$.fragment,A),A.forEach(O),i=Ae(P),a=H(P,"DIV",{class:!0});var x=j(a);o=H(x,"DIV",{class:!0});var R=j(o);s=H(R,"LABEL",{class:!0});var Z=j(s);l=H(Z,"SPAN",{class:!0});var K=j(l);p=Fe(K,"Exponential Scaling"),K.forEach(O),Z.forEach(O),f=Ae(R),c=H(R,"INPUT",{type:!0,class:!0}),R.forEach(O),d=Ae(x),M&&M.l(x),g=Ae(x),b=H(x,"DIV",{class:!0});var L=j(b);v=H(L,"BUTTON",{class:!0});var V=j(v);m=Fe(V,"Reverse"),V.forEach(O),L.forEach(O),x.forEach(O),D=Ae(P),je(S.$$.fragment,P),this.h()},h(){B(e,"class","w-full h-full"),Ni(()=>t[5].call(e)),B(l,"class","label-text"),B(s,"class","label"),B(c,"type","checkbox"),B(c,"class","toggle toggle-xs"),B(o,"class","w-52 px-2"),B(v,"class","btn btn-xs btn-primary"),B(b,"class","w-32 px-2 pb-1 flex flex-col justify-end"),B(a,"class","px-2 py-4 pb-0 flex")},m(P,A){se(P,e,A),ze(r,e,null),n=Ma(e,t[5].bind(e)),se(P,i,A),se(P,a,A),T(a,o),T(o,s),T(s,l),T(l,p),T(o,f),T(o,c),c.checked=t[1],T(a,d),M&&M.m(a,null),T(a,g),T(a,b),T(b,v),T(v,m),se(P,D,A),ze(S,P,A),w=!0,C||(F=[De(c,"change",t[6]),De(v,"click",t[4])],C=!0)},p(P,[A]){const x={};A&12&&(x.center=[Math.round(P[2]/2),Math.round(P[3]/2)]),A&12&&(x.radius=Math.round(Math.min(P[2],P[3])/2)-150),r.$set(x),A&2&&(c.checked=P[1]),P[1]?M?M.p(P,A):(M=Sd(P),M.c(),M.m(a,g)):M&&(M.d(1),M=null)},i(P){w||(ce(r.$$.fragment,P),ce(S.$$.fragment,P),w=!0)},o(P){me(r.$$.fragment,P),me(S.$$.fragment,P),w=!1},d(P){P&&O(e),qe(r),n(),P&&O(i),P&&O(a),M&&M.d(),P&&O(D),qe(S,P),C=!1,qt(F)}}}function EF(t,e,r){let n;$e(t,it,d=>r(8,n=d));let i,a,o=n.ringWeightScaling||2,s=Hf(n.ringExponentialScaling)?!0:n.ringExponentialScaling;function l(){it.update({...it.get(),ringReverse:!n.ringReverse})}function p(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function f(){s=this.checked,r(1,s)}function c(){o=Lp(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&it.update({...it.get(),ringExponentialScaling:s,ringWeightScaling:o})},[o,s,i,a,l,p,f,c]}class AF extends Xe{constructor(e){super(),et(this,e,EF,wF,tt,{})}}function Bd(t,e,r){const n=t.slice();return n[21]=e[r][0],n[22]=e[r][1],n}function Od(t){let e,r,n=t[0][t[21]][2].text+"",i,a,o=Kn(t[1],t[21])+"",s,l,p;return{c(){e=W("div"),r=W("p"),i=Ce(n),a=Ce(":"),s=Ce(o),p=Ee(),this.h()},l(f){e=H(f,"DIV",{class:!0});var c=j(e);r=H(c,"P",{style:!0});var d=j(r);i=Fe(d,n),a=Fe(d,":"),s=Fe(d,o),d.forEach(O),p=Ae(c),c.forEach(O),this.h()},h(){B(r,"style",l=`color: rgba(255,255,255, ${an(t[22])});`),B(e,"class","hover:bg-slate-800 rounded-md p-2 text-xs")},m(f,c){se(f,e,c),T(e,r),T(r,i),T(r,a),T(r,s),T(e,p)},p(f,c){c&5&&n!==(n=f[0][f[21]][2].text+"")&&zt(i,n),c&6&&o!==(o=Kn(f[1],f[21])+"")&&zt(s,o),c&4&&l!==(l=`color: rgba(255,255,255, ${an(f[22])});`)&&B(r,"style",l)},d(f){f&&O(e)}}}function CF(t){let e,r,n,i,a,o,s,l=(t[1].randomPromptLimit||t[3]())+"",p,f,c=t[3]()+"",d,g,b,v,m,D,S,w,C,F,M,P,A,x=t[2],R=[];for(let L=0;L<x.length;L+=1)R[L]=Od(Bd(t,x,L));const Z=t[18].default,K=bu(Z,t,t[17],null);return{c(){e=W("div"),r=W("div");for(let L=0;L<R.length;L+=1)R[L].c();n=Ee(),i=W("div"),a=W("div"),o=W("label"),s=W("span"),p=Ce(l),f=Ce("/"),d=Ce(c),g=Ce(" Prompts"),b=Ee(),v=W("input"),D=Ee(),S=W("div"),w=W("button"),C=Ce("Shuffle"),F=Ee(),K&&K.c(),this.h()},l(L){e=H(L,"DIV",{class:!0});var V=j(e);r=H(V,"DIV",{class:!0});var q=j(r);for(let be=0;be<R.length;be+=1)R[be].l(q);q.forEach(O),n=Ae(V),i=H(V,"DIV",{class:!0});var z=j(i);a=H(z,"DIV",{class:!0});var Q=j(a);o=H(Q,"LABEL",{class:!0});var X=j(o);s=H(X,"SPAN",{class:!0});var te=j(s);p=Fe(te,l),f=Fe(te,"/"),d=Fe(te,c),g=Fe(te," Prompts"),te.forEach(O),X.forEach(O),b=Ae(Q),v=H(Q,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Q.forEach(O),D=Ae(z),S=H(z,"DIV",{class:!0});var oe=j(S);w=H(oe,"BUTTON",{class:!0});var _e=j(w);C=Fe(_e,"Shuffle"),_e.forEach(O),oe.forEach(O),z.forEach(O),F=Ae(V),K&&K.l(V),V.forEach(O),this.h()},h(){B(r,"class","p-4 w-full h-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-y-auto"),B(s,"class","label-text"),B(o,"class","label"),v.value=m=t[1].randomPromptLimit||t[3](),B(v,"type","range"),B(v,"min","1"),B(v,"max",t[3]()),B(v,"step","1"),B(v,"class","range range-sm"),B(a,"class","w-full px-2"),B(w,"class","btn btn-xs btn-primary"),B(S,"class","w-32 px-2 pb-1 flex flex-col justify-end"),B(i,"class","px-2 py-4 pb-0 flex"),B(e,"class","w-full h-full flex flex-col")},m(L,V){se(L,e,V),T(e,r);for(let q=0;q<R.length;q+=1)R[q]&&R[q].m(r,null);T(e,n),T(e,i),T(i,a),T(a,o),T(o,s),T(s,p),T(s,f),T(s,d),T(s,g),T(a,b),T(a,v),T(i,D),T(i,S),T(S,w),T(w,C),T(e,F),K&&K.m(e,null),M=!0,P||(A=[De(v,"change",t[19]),De(w,"click",t[5])],P=!0)},p(L,[V]){if(V&7){x=L[2];let q;for(q=0;q<x.length;q+=1){const z=Bd(L,x,q);R[q]?R[q].p(z,V):(R[q]=Od(z),R[q].c(),R[q].m(r,null))}for(;q<R.length;q+=1)R[q].d(1);R.length=x.length}(!M||V&2)&&l!==(l=(L[1].randomPromptLimit||L[3]())+"")&&zt(p,l),(!M||V&2&&m!==(m=L[1].randomPromptLimit||L[3]()))&&(v.value=m),K&&K.p&&(!M||V&131072)&&Du(K,Z,L,L[17],M?wu(Z,L[17],V,null):yu(L[17]),null)},i(L){M||(ce(K,L),M=!0)},o(L){me(K,L),M=!1},d(L){L&&O(e),Eu(R,L),K&&K.d(L),P=!1,qt(A)}}}function FF(t,e,r){let n,i,a,o;$e(t,it,A=>r(1,o=A));let{$$slots:s={},$$scope:l}=e,{center:p=[0,0]}=e,{dimensions:f=[100,100]}=e,{maxWidth:c=1e3}=e,{pointRadius:d=10}=e,{textWidth:g=250}=e,{horizontalPad:b=20}=e,{verticalPad:v=2}=e,{textBarPad:m=10}=e,{fontSize:D=13}=e,{handleWidth:S=20}=e;function w(){return Object.keys(o.weightedPrompts).length}const C=xi.subscribe(()=>{M()});Up(()=>{C()});function F(A){it.update({...o,randomPromptLimit:A}),M()}function M(){const A=Object.entries(o.weightedPrompts).sort((x,R)=>Math.random()-.5).reduce((x,[R,Z],K)=>(x[R]={...Z,randomWeight:K<(o.randomPromptLimit||w())?Math.random():0},x),{});it.update({...o,weightedPrompts:A})}const P=A=>F(parseInt(A.target.value));return t.$$set=A=>{"center"in A&&r(6,p=A.center),"dimensions"in A&&r(7,f=A.dimensions),"maxWidth"in A&&r(8,c=A.maxWidth),"pointRadius"in A&&r(9,d=A.pointRadius),"textWidth"in A&&r(10,g=A.textWidth),"horizontalPad"in A&&r(11,b=A.horizontalPad),"verticalPad"in A&&r(12,v=A.verticalPad),"textBarPad"in A&&r(13,m=A.textBarPad),"fontSize"in A&&r(14,D=A.fontSize),"handleWidth"in A&&r(15,S=A.handleWidth),"$$scope"in A&&r(17,l=A.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&r(0,n=Object.entries(o.weightedPrompts).map(([A,x],R)=>[parseInt(A),R,x])),t.$$.dirty&1&&r(16,i=n.map(([A,x,R])=>[A,R.randomWeight||0])),t.$$.dirty&65536&&r(2,a=i.sort((A,x)=>x[1]-A[1]))},[n,o,a,w,F,M,p,f,c,d,g,b,v,m,D,S,i,l,s,P]}class SF extends Xe{constructor(e){super(),et(this,e,FF,CF,tt,{center:6,dimensions:7,maxWidth:8,pointRadius:9,textWidth:10,horizontalPad:11,verticalPad:12,textBarPad:13,fontSize:14,handleWidth:15})}}function BF(t){let e,r;return e=new Fu({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function OF(t){let e,r,n,i;return r=new SF({props:{dimensions:t[2],center:t[3],$$slots:{default:[BF]},$$scope:{ctx:t}}}),{c(){e=W("div"),Ve(r.$$.fragment),this.h()},l(a){e=H(a,"DIV",{class:!0});var o=j(e);je(r.$$.fragment,o),o.forEach(O),this.h()},h(){B(e,"class","w-full h-full pt-10"),Ni(()=>t[4].call(e))},m(a,o){se(a,e,o),ze(r,e,null),n=Ma(e,t[4].bind(e)),i=!0},p(a,[o]){const s={};o&4&&(s.dimensions=a[2]),o&8&&(s.center=a[3]),o&32&&(s.$$scope={dirty:o,ctx:a}),r.$set(s)},i(a){i||(ce(r.$$.fragment,a),i=!0)},o(a){me(r.$$.fragment,a),i=!1},d(a){a&&O(e),qe(r),n()}}}function MF(t,e,r){let n,i,a,o;function s(){a=this.clientWidth,o=this.clientHeight,r(0,a),r(1,o)}return t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[a||0,o||0]),t.$$.dirty&4&&r(3,i=ka(n))},[a,o,n,i,s]}class PF extends Xe{constructor(e){super(),et(this,e,MF,OF,tt,{})}}function kF(t){let e,r;return e=new hF({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function TF(t){let e,r;return e=new AF({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function IF(t){let e,r;return e=new m6({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function xF(t){let e,r;return e=new S6({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function NF(t){let e,r;return e=new PF({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function LF(t){let e,r,n,i;const a=[NF,xF,IF,TF,kF],o=[];function s(l,p){return l[0].weightMode===pt.Random?0:l[0].weightMode===pt.Pie?1:l[0].weightMode===pt.Circle?2:l[0].weightMode===pt.Ring?3:l[0].weightMode===pt.Embed?4:-1}return~(r=s(t))&&(n=o[r]=a[r](t)),{c(){e=W("div"),n&&n.c(),this.h()},l(l){e=H(l,"DIV",{class:!0});var p=j(e);n&&n.l(p),p.forEach(O),this.h()},h(){B(e,"class","w-full h-full flex flex-col")},m(l,p){se(l,e,p),~r&&o[r].m(e,null),i=!0},p(l,[p]){let f=r;r=s(l),r!==f&&(n&&(sr(),me(o[f],1,1,()=>{o[f]=null}),or()),~r?(n=o[r],n||(n=o[r]=a[r](l),n.c()),ce(n,1),n.m(e,null)):n=null)},i(l){i||(ce(n),i=!0)},o(l){me(n),i=!1},d(l){l&&O(e),~r&&o[r].d()}}}function RF(t,e,r){let n;return $e(t,it,i=>r(0,n=i)),[n]}class UF extends Xe{constructor(e){super(),et(this,e,RF,LF,tt,{})}}function VF(t){let e,r,n,i,a="<<",o,s,l="<",p,f,c,d,g,b=">",v,m,D=">>",S,w,C,F,M,P,A,x,R,Z,K,L,V,q,z,Q,X;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("button"),o=Ce(a),s=W("button"),p=Ce(l),f=Ee(),c=W("button"),d=Ce(t[1]),g=W("button"),v=Ce(b),m=W("button"),S=Ce(D),w=Ee(),C=W("div"),F=W("label"),M=Ce("Page Size"),P=Ee(),A=W("select"),x=W("option"),R=Ce("10"),Z=W("option"),K=Ce("25"),L=W("option"),V=Ce("50"),q=W("option"),z=Ce("100"),this.h()},l(te){e=H(te,"DIV",{class:!0});var oe=j(e);r=H(oe,"DIV",{class:!0});var _e=j(r);n=H(_e,"DIV",{class:!0});var be=j(n);i=H(be,"BUTTON",{class:!0});var Be=j(i);o=Fe(Be,a),Be.forEach(O),s=H(be,"BUTTON",{class:!0});var ke=j(s);p=Fe(ke,l),ke.forEach(O),f=Ae(be),c=H(be,"BUTTON",{class:!0});var Te=j(c);d=Fe(Te,t[1]),Te.forEach(O),g=H(be,"BUTTON",{class:!0});var Le=j(g);v=Fe(Le,b),Le.forEach(O),m=H(be,"BUTTON",{class:!0});var Ne=j(m);S=Fe(Ne,D),Ne.forEach(O),be.forEach(O),_e.forEach(O),w=Ae(oe),C=H(oe,"DIV",{class:!0});var Ye=j(C);F=H(Ye,"LABEL",{for:!0,class:!0});var Qe=j(F);M=Fe(Qe,"Page Size"),Qe.forEach(O),P=Ae(Ye),A=H(Ye,"SELECT",{class:!0});var Je=j(A);x=H(Je,"OPTION",{});var ot=j(x);R=Fe(ot,"10"),ot.forEach(O),Z=H(Je,"OPTION",{});var bt=j(Z);K=Fe(bt,"25"),bt.forEach(O),L=H(Je,"OPTION",{});var Ue=j(L);V=Fe(Ue,"50"),Ue.forEach(O),q=H(Je,"OPTION",{});var lt=j(q);z=Fe(lt,"100"),lt.forEach(O),Je.forEach(O),Ye.forEach(O),oe.forEach(O),this.h()},h(){B(i,"class","btn"),st(i,"btn-disabled",t[1]===1),B(s,"class","btn"),st(s,"btn-disabled",t[1]===1),B(c,"class","btn"),st(c,"btn-disabled",t[0]===0),B(g,"class","btn"),st(g,"btn-disabled",t[0]===0||t[1]===t[0]),B(m,"class","btn"),st(m,"btn-disabled",t[0]===0||t[1]===t[0]),B(n,"class","btn-group"),B(r,"class","flex justify-start"),B(F,"for","page-size"),B(F,"class","p-2 text-md min-w-xs"),x.__value=10,x.value=x.__value,Z.__value=25,Z.value=Z.__value,L.__value=50,L.value=L.__value,q.__value=100,q.value=q.__value,B(A,"class","select max-w-xs"),B(C,"class","flex"),B(e,"class","w-full flex justify-between p-4")},m(te,oe){se(te,e,oe),T(e,r),T(r,n),T(n,i),T(i,o),T(n,s),T(s,p),T(n,f),T(n,c),T(c,d),T(n,g),T(g,v),T(n,m),T(m,S),T(e,w),T(e,C),T(C,F),T(F,M),T(C,P),T(C,A),T(A,x),T(x,R),T(A,Z),T(Z,K),T(A,L),T(L,V),T(A,q),T(q,z),Q||(X=[De(i,"click",t[5]),De(s,"click",t[6]),De(c,"click",t[7]),De(g,"click",t[8]),De(m,"click",t[9]),De(A,"change",t[10])],Q=!0)},p(te,[oe]){oe&2&&st(i,"btn-disabled",te[1]===1),oe&2&&st(s,"btn-disabled",te[1]===1),oe&2&&zt(d,te[1]),oe&1&&st(c,"btn-disabled",te[0]===0),oe&3&&st(g,"btn-disabled",te[0]===0||te[1]===te[0]),oe&3&&st(m,"btn-disabled",te[0]===0||te[1]===te[0])},i:Pe,o:Pe,d(te){te&&O(e),Q=!1,qt(X)}}}function jF(t,e,r){let{total:n}=e,{current:i}=e,{size:a}=e,{onChange:o}=e,{onResize:s}=e;const l=()=>o(1),p=()=>o(i-1),f=()=>o(i),c=()=>o(i+1),d=()=>o(n),g=b=>s(b.target.value);return t.$$set=b=>{"total"in b&&r(0,n=b.total),"current"in b&&r(1,i=b.current),"size"in b&&r(4,a=b.size),"onChange"in b&&r(2,o=b.onChange),"onResize"in b&&r(3,s=b.onResize)},[n,i,o,s,a,l,p,f,c,d,g]}class W1 extends Xe{constructor(e){super(),et(this,e,jF,VF,tt,{total:0,current:1,size:4,onChange:2,onResize:3})}}function Md(t,e,r){const n=t.slice();return n[7]=e[r],n[9]=r,n}function Pd(t,e){let r,n,i=e[7].date.toDateString()+"",a,o,s,l,p=e[7].prompt+"",f,c,d,g;function b(){return e[6](e[7])}return{key:t,first:null,c(){r=W("tr"),n=W("td"),a=Ce(i),o=Ee(),s=W("td"),l=W("span"),f=Ce(p),c=Ee(),this.h()},l(v){r=H(v,"TR",{});var m=j(r);n=H(m,"TD",{style:!0,class:!0});var D=j(n);a=Fe(D,i),D.forEach(O),o=Ae(m),s=H(m,"TD",{style:!0,class:!0});var S=j(s);l=H(S,"SPAN",{});var w=j(l);f=Fe(w,p),w.forEach(O),S.forEach(O),c=Ae(m),m.forEach(O),this.h()},h(){Ot(n,"max-width","10rem"),Ot(n,"width","20rem"),B(n,"class","whitespace-nowrap"),Ot(s,"max-width","20px"),B(s,"class","cursor-copy text-ellipsis whitespace-nowrap overflow-hidden select-none hover:text-white"),this.first=r},m(v,m){se(v,r,m),T(r,n),T(n,a),T(r,o),T(r,s),T(s,l),T(l,f),T(r,c),d||(g=De(s,"click",b),d=!0)},p(v,m){e=v,m&8&&i!==(i=e[7].date.toDateString()+"")&&zt(a,i),m&8&&p!==(p=e[7].prompt+"")&&zt(f,p)},d(v){v&&O(r),d=!1,g()}}}function zF(t){let e,r,n,i,a,o,s,l,p,f,c,d,g,b=[],v=new Map,m;e=new W1({props:{total:Math.ceil(t[2].length/t[1]),current:t[0],size:t[1],onChange:t[4],onResize:t[5]}});let D=t[3];const S=w=>w[9];for(let w=0;w<D.length;w+=1){let C=Md(t,D,w),F=S(C);v.set(F,b[w]=Pd(F,C))}return{c(){Ve(e.$$.fragment),r=Ee(),n=W("div"),i=W("table"),a=W("thead"),o=W("tr"),s=W("th"),l=Ce("Date"),p=Ee(),f=W("th"),c=Ce("Prompt"),d=Ee(),g=W("tbody");for(let w=0;w<b.length;w+=1)b[w].c();this.h()},l(w){je(e.$$.fragment,w),r=Ae(w),n=H(w,"DIV",{class:!0});var C=j(n);i=H(C,"TABLE",{class:!0});var F=j(i);a=H(F,"THEAD",{});var M=j(a);o=H(M,"TR",{});var P=j(o);s=H(P,"TH",{});var A=j(s);l=Fe(A,"Date"),A.forEach(O),p=Ae(P),f=H(P,"TH",{});var x=j(f);c=Fe(x,"Prompt"),x.forEach(O),P.forEach(O),M.forEach(O),d=Ae(F),g=H(F,"TBODY",{});var R=j(g);for(let Z=0;Z<b.length;Z+=1)b[Z].l(R);R.forEach(O),F.forEach(O),C.forEach(O),this.h()},h(){B(i,"class","table w-full"),B(n,"class","w-full px-4 overflow-y-auto")},m(w,C){ze(e,w,C),se(w,r,C),se(w,n,C),T(n,i),T(i,a),T(a,o),T(o,s),T(s,l),T(o,p),T(o,f),T(f,c),T(i,d),T(i,g);for(let F=0;F<b.length;F+=1)b[F]&&b[F].m(g,null);m=!0},p(w,[C]){const F={};C&6&&(F.total=Math.ceil(w[2].length/w[1])),C&1&&(F.current=w[0]),C&2&&(F.size=w[1]),e.$set(F),C&8&&(D=w[3],b=Un(b,C,S,1,w,D,v,g,Zn,Pd,null,Md))},i(w){m||(ce(e.$$.fragment,w),m=!0)},o(w){me(e.$$.fragment,w),m=!1},d(w){qe(e,w),w&&O(r),w&&O(n);for(let C=0;C<b.length;C+=1)b[C].d()}}}function qF(t){navigator.clipboard.writeText(t)}function WF(t,e,r){let n;$e(t,tc,f=>r(2,n=f));let i=1,a=10,o=[];function s(f){r(0,i=f)}function l(f){r(0,i=1),r(1,a=f)}const p=f=>qF(f.prompt);return t.$$.update=()=>{t.$$.dirty&7&&r(3,o=n.slice((i-1)*a,i*a))},[i,a,n,o,s,l,p]}class HF extends Xe{constructor(e){super(),et(this,e,WF,zF,tt,{})}}const $F=er(Os.List);function GF(t){let e,r,n,i,a,o;return r=new C1({props:{center:t[9],dimensions:t[7],onMarkerMove:t[10],dataPoints:t[8]}}),a=new F1({props:{useExponentialScaling:t[3],toggleExponentialScaling:t[12],exponentialScaling:t[4],setExponentialScaling:t[13],connectionLimit:t[2],setConnectionLimit:t[11],maxConnectionLimit:t[6],clusterCount:t[5],setClusterCount:t[14],maxClusterCount:t[6],onShuffle:t[15]}}),{c(){e=W("div"),Ve(r.$$.fragment),i=Ee(),Ve(a.$$.fragment),this.h()},l(s){e=H(s,"DIV",{class:!0});var l=j(e);je(r.$$.fragment,l),l.forEach(O),i=Ae(s),je(a.$$.fragment,s),this.h()},h(){B(e,"class","w-full h-full"),Ni(()=>t[18].call(e))},m(s,l){se(s,e,l),ze(r,e,null),n=Ma(e,t[18].bind(e)),se(s,i,l),ze(a,s,l),o=!0},p(s,[l]){const p={};l&512&&(p.center=s[9]),l&128&&(p.dimensions=s[7]),l&256&&(p.dataPoints=s[8]),r.$set(p);const f={};l&8&&(f.useExponentialScaling=s[3]),l&16&&(f.exponentialScaling=s[4]),l&4&&(f.connectionLimit=s[2]),l&64&&(f.maxConnectionLimit=s[6]),l&32&&(f.clusterCount=s[5]),l&64&&(f.maxClusterCount=s[6]),a.$set(f)},i(s){o||(ce(r.$$.fragment,s),ce(a.$$.fragment,s),o=!0)},o(s){me(r.$$.fragment,s),me(a.$$.fragment,s),o=!1},d(s){s&&O(e),qe(r),n(),s&&O(i),qe(a,s)}}}function KF(t,e,r){let n,i,a,o;$e(t,nF,q=>r(17,o=q));let s=0,l=0,p={},f=[.5,.5],c=10,d=!1,g=2,b=0,v,m={},D={};function S(q){o&&v?(P(),F(f,d,g,q)):console.log("no concepts or mappings")}function w(q,z){q&&z?(P(),F(f,d,g,c)):console.log("no concepts or mappings")}function C(q,z){F(f,q,z,c)}function F(q,z,Q,X){if(console.log("recomputing weights"),!p)return;let te=0;const oe={...m};Object.values(p).forEach(Te=>{Object.values(p).forEach(Le=>{const Ne=Oa(Te.xy,Le.xy);Ne>te&&(te=Ne)})});const _e=Object.entries(p).reduce((Te,[Le,Ne])=>{const Ye=Oa(q,Ne.xy);return Te[Le]=Ye,Te},{}),be=(Te,Le)=>{const Ne=Te?Math.round(Math.pow(1-Le/te,Q)*100)/100:0;return Ne<0?0:Ne},Be=(Te,Le)=>{const Ne=Te?Math.round((1-Le/te)*100)/100:0;return Ne<0?0:Ne},ke={...p};Object.entries(_e).sort((Te,Le)=>Te[1]-Le[1]).forEach(([Te,Le],Ne)=>{if(!o[Te])return;const Ye=Ne<X,Qe=z?be(Ye,Le):Be(Ye,Le);oe[Te]=Qe;const Je={...ke[Te]};Je.opacity=an(Qe),Je.connected=Ye,ke[Te]=Je}),console.log("weights updated"),m=oe,r(8,p=ke)}function M(){let q=Object.entries(o);const z=_e=>new Array(_e).fill(null).map(()=>[]);console.log("clustering embeddings");const Q=q.length>=2?Mi(q.map(_e=>_e[1]),2):[q.map(_e=>_e[0])];console.log("set of 2 complete");const X=q.length>=4?Mi(q.map(_e=>_e[1]),4):Q;console.log("set of 4 complete");const te=q.length>=6?Mi(q.map(_e=>_e[1]),6):X;console.log("set of 6 complete");const oe=q.length>=8?Mi(q.map(_e=>_e[1]),8):te;return console.log("set of 8 complete"),{2:[...Q,...z(2-Q.length)],4:[...X,...z(4-X.length)],6:[...te,...z(6-te.length)],8:[...oe,...z(8-oe.length)]}}function P(){if(console.log("updating data points"),!o||!v)return;const q=Object.keys(v),z=X=>{if(!X.length)return i;const te=X.map(oe=>Q[oe].xy);return Rs(te)},Q=q.reduce((X,te,oe)=>(X[te]={xy:v[te],text:te,connected:!0,opacity:1},X),{});if(D=M(),b&&D){const X=b,te=D[X];let oe=te.map(Be=>z(Be));const _e=z1(X),be=q1(oe,_e);be&&be.forEach(Be=>{const ke=Be.ids[0],Te=Be.points[1];te[ke].forEach(Le=>{Q[Le].xy=Rs([Q[Le].xy,Te])})})}r(8,p=Q)}function A(q){f=q,F(f,d,g,c)}function x(q){q>0&&q<=a&&r(2,c=Math.round(q))}function R(){r(3,d=!d)}function Z(q){r(4,g=q)}function K(q){[0,2,4,6,8].indexOf(q)!==-1&&r(5,b=q)}async function L(){r(16,v=nc(o))}fy(()=>{L()});function V(){s=this.clientWidth,l=this.clientHeight,r(0,s),r(1,l)}return t.$$.update=()=>{t.$$.dirty&3&&r(7,n=[s||250,l||250]),t.$$.dirty&128&&r(9,i=ka(n)),t.$$.dirty&131072&&r(6,a=Object.keys(o).length),t.$$.dirty&131168&&o&&a<b&&K(j1(a)),t.$$.dirty&24&&C(d,g),t.$$.dirty&196608&&w(o,v),t.$$.dirty&4&&S(c)},[s,l,c,d,g,b,a,n,p,i,A,x,R,Z,K,L,v,o,V]}class YF extends Xe{constructor(e){super(),et(this,e,KF,GF,tt,{})}}function ZF(t){let e,r;return e=new YF({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p:Pe,i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function JF(t){let e,r,n,i,a,o;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("progress"),this.h()},l(s){e=H(s,"DIV",{class:!0});var l=j(e);r=H(l,"DIV",{class:!0});var p=j(r);n=H(p,"DIV",{class:!0});var f=j(n);i=H(f,"PROGRESS",{class:!0,max:!0}),j(i).forEach(O),f.forEach(O),p.forEach(O),l.forEach(O),this.h()},h(){B(i,"class","progress progress-primary w-56"),i.value=a=Object.keys(t[2]).length-Object.keys(t[1]).length,B(i,"max",o=Object.keys(t[2]).length),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(s,l){se(s,e,l),T(e,r),T(r,n),T(n,i)},p(s,l){l&6&&a!==(a=Object.keys(s[2]).length-Object.keys(s[1]).length)&&(i.value=a),l&4&&o!==(o=Object.keys(s[2]).length)&&B(i,"max",o)},i:Pe,o:Pe,d(s){s&&O(e)}}}function QF(t){let e,r,n,i,a;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("p"),a=Ce("Set OpenAI key in settings to use concept map."),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=j(e);r=H(s,"DIV",{class:!0});var l=j(r);n=H(l,"DIV",{class:!0});var p=j(n);i=H(p,"P",{class:!0});var f=j(i);a=Fe(f,"Set OpenAI key in settings to use concept map."),f.forEach(O),p.forEach(O),l.forEach(O),s.forEach(O),this.h()},h(){B(i,"class","text-center text-lg"),B(n,"class","h-20 w-52"),B(r,"class","flex flex-col justify-center"),B(e,"class","w-full h-full flex justify-center")},m(o,s){se(o,e,s),T(e,r),T(r,n),T(n,i),T(i,a)},p:Pe,i:Pe,o:Pe,d(o){o&&O(e)}}}function XF(t){let e,r,n,i,a;const o=[QF,JF,ZF],s=[];function l(p,f){return f&2&&(e=null),p[0]?(e==null&&(e=Object.keys(p[1]).length>0),e?1:2):0}return r=l(t,-1),n=s[r]=o[r](t),{c(){n.c(),i=St()},l(p){n.l(p),i=St()},m(p,f){s[r].m(p,f),se(p,i,f),a=!0},p(p,[f]){let c=r;r=l(p,f),r===c?s[r].p(p,f):(sr(),me(s[c],1,1,()=>{s[c]=null}),or(),n=s[r],n?n.p(p,f):(n=s[r]=o[r](p),n.c()),ce(n,1),n.m(i.parentNode,i))},i(p){a||(ce(n),a=!0)},o(p){me(n),a=!1},d(p){s[r].d(p),p&&O(i)}}}function e5(t,e,r){let n,i,a;return $e(t,di,o=>r(0,n=o)),$e(t,ci,o=>r(1,i=o)),$e(t,Zr,o=>r(2,a=o)),[n,i,a]}class t5 extends Xe{constructor(e){super(),et(this,e,e5,XF,tt,{})}}function r5(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var H1=r5,n5=typeof gr=="object"&&gr&&gr.Object===Object&&gr,i5=n5,a5=i5,u5=typeof self=="object"&&self&&self.Object===Object&&self,s5=a5||u5||Function("return this")(),$1=s5,o5=$1,l5=function(){return o5.Date.now()},f5=l5,c5=/\s/;function h5(t){for(var e=t.length;e--&&c5.test(t.charAt(e)););return e}var d5=h5,p5=d5,g5=/^\s+/;function v5(t){return t&&t.slice(0,p5(t)+1).replace(g5,"")}var m5=v5,_5=$1,b5=_5.Symbol,G1=b5,kd=G1,K1=Object.prototype,D5=K1.hasOwnProperty,y5=K1.toString,cu=kd?kd.toStringTag:void 0;function w5(t){var e=D5.call(t,cu),r=t[cu];try{t[cu]=void 0;var n=!0}catch{}var i=y5.call(t);return n&&(e?t[cu]=r:delete t[cu]),i}var E5=w5,A5=Object.prototype,C5=A5.toString;function F5(t){return C5.call(t)}var S5=F5,Td=G1,B5=E5,O5=S5,M5="[object Null]",P5="[object Undefined]",Id=Td?Td.toStringTag:void 0;function k5(t){return t==null?t===void 0?P5:M5:Id&&Id in Object(t)?B5(t):O5(t)}var T5=k5;function I5(t){return t!=null&&typeof t=="object"}var x5=I5,N5=T5,L5=x5,R5="[object Symbol]";function U5(t){return typeof t=="symbol"||L5(t)&&N5(t)==R5}var V5=U5,j5=m5,xd=H1,z5=V5,Nd=0/0,q5=/^[-+]0x[0-9a-f]+$/i,W5=/^0b[01]+$/i,H5=/^0o[0-7]+$/i,$5=parseInt;function G5(t){if(typeof t=="number")return t;if(z5(t))return Nd;if(xd(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=xd(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=j5(t);var r=W5.test(t);return r||H5.test(t)?$5(t.slice(2),r?2:8):q5.test(t)?Nd:+t}var K5=G5,Y5=H1,$l=f5,Ld=K5,Z5="Expected a function",J5=Math.max,Q5=Math.min;function X5(t,e,r){var n,i,a,o,s,l,p=0,f=!1,c=!1,d=!0;if(typeof t!="function")throw new TypeError(Z5);e=Ld(e)||0,Y5(r)&&(f=!!r.leading,c="maxWait"in r,a=c?J5(Ld(r.maxWait)||0,e):a,d="trailing"in r?!!r.trailing:d);function g(M){var P=n,A=i;return n=i=void 0,p=M,o=t.apply(A,P),o}function b(M){return p=M,s=setTimeout(D,e),f?g(M):o}function v(M){var P=M-l,A=M-p,x=e-P;return c?Q5(x,a-A):x}function m(M){var P=M-l,A=M-p;return l===void 0||P>=e||P<0||c&&A>=a}function D(){var M=$l();if(m(M))return S(M);s=setTimeout(D,v(M))}function S(M){return s=void 0,d&&n?g(M):(n=i=void 0,o)}function w(){s!==void 0&&clearTimeout(s),p=0,n=l=i=s=void 0}function C(){return s===void 0?o:S($l())}function F(){var M=$l(),P=m(M);if(n=arguments,i=this,l=M,P){if(s===void 0)return b(l);if(c)return clearTimeout(s),s=setTimeout(D,e),g(l)}return s===void 0&&(s=setTimeout(D,e)),o}return F.cancel=w,F.flush=C,F}var Xs=X5;function Rd(t,e,r){const n=t.slice();return n[13]=e[r],n[15]=r,n}function Ud(t,e){let r,n,i=e[13]+"",a,o,s,l,p,f,c,d,g;function b(){return e[10](e[13])}function v(){return e[12](e[13])}return{key:t,first:null,c(){r=W("tr"),n=W("td"),a=Ce(i),o=Ee(),s=W("td"),l=W("button"),p=gt("svg"),f=gt("path"),c=Ee(),this.h()},l(m){r=H(m,"TR",{});var D=j(r);n=H(D,"TD",{style:!0,class:!0});var S=j(n);a=Fe(S,i),S.forEach(O),o=Ae(D),s=H(D,"TD",{style:!0,class:!0});var w=j(s);l=H(w,"BUTTON",{class:!0});var C=j(l);p=vt(C,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var F=j(p);f=vt(F,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),j(f).forEach(O),F.forEach(O),C.forEach(O),w.forEach(O),c=Ae(D),D.forEach(O),this.h()},h(){Ot(n,"max-width","20px"),B(n,"class","text-ellipsis cursor-copy whitespace-nowrap overflow-hidden select-none hover:text-white"),B(f,"stroke-linecap","round"),B(f,"stroke-linejoin","round"),B(f,"stroke-width","2"),B(f,"d","M6 18L18 6M6 6l12 12"),B(p,"xmlns","http://www.w3.org/2000/svg"),B(p,"class","h-6 w-6"),B(p,"fill","none"),B(p,"viewBox","0 0 24 24"),B(p,"stroke","red"),B(l,"class","btn btn-sm btn-circle btn-outline"),Ot(s,"max-width","4rem"),Ot(s,"width","4rem"),B(s,"class",""),this.first=r},m(m,D){se(m,r,D),T(r,n),T(n,a),T(r,o),T(r,s),T(s,l),T(l,p),T(p,f),T(r,c),d||(g=[De(n,"click",b),De(n,"change",e[11]),De(s,"click",v)],d=!0)},p(m,D){e=m,D&4&&i!==(i=e[13]+"")&&zt(a,i)},d(m){m&&O(r),d=!1,qt(g)}}}function eS(t){let e,r,n,i,a,o,s,l,p,f,c,d,g=[],b=new Map,v,m,D;e=new W1({props:{total:t[3],current:t[0],size:t[1],onChange:t[5],onResize:t[6]}});let S=t[2];const w=C=>C[15];for(let C=0;C<S.length;C+=1){let F=Rd(t,S,C),M=w(F);b.set(M,g[C]=Ud(M,F))}return{c(){Ve(e.$$.fragment),r=Ee(),n=W("div"),i=W("table"),a=W("thead"),o=W("tr"),s=W("th"),l=Ce("Concept"),p=Ee(),f=W("th"),c=Ee(),d=W("tbody");for(let C=0;C<g.length;C+=1)g[C].c();this.h()},l(C){je(e.$$.fragment,C),r=Ae(C),n=H(C,"DIV",{class:!0});var F=j(n);i=H(F,"TABLE",{class:!0});var M=j(i);a=H(M,"THEAD",{});var P=j(a);o=H(P,"TR",{});var A=j(o);s=H(A,"TH",{});var x=j(s);l=Fe(x,"Concept"),x.forEach(O),p=Ae(A),f=H(A,"TH",{}),j(f).forEach(O),A.forEach(O),P.forEach(O),c=Ae(M),d=H(M,"TBODY",{});var R=j(d);for(let Z=0;Z<g.length;Z+=1)g[Z].l(R);R.forEach(O),M.forEach(O),F.forEach(O),this.h()},h(){B(i,"class","table w-full"),B(n,"class","w-full px-4 overflow-y-auto")},m(C,F){ze(e,C,F),se(C,r,F),se(C,n,F),T(n,i),T(i,a),T(a,o),T(o,s),T(s,l),T(o,p),T(o,f),T(i,c),T(i,d);for(let M=0;M<g.length;M+=1)g[M]&&g[M].m(d,null);v=!0,m||(D=De(n,"paste",t[4]),m=!0)},p(C,[F]){const M={};F&8&&(M.total=C[3]),F&1&&(M.current=C[0]),F&2&&(M.size=C[1]),e.$set(M),F&132&&(S=C[2],g=Un(g,F,w,1,C,S,b,d,Zn,Ud,null,Rd))},i(C){v||(ce(e.$$.fragment,C),v=!0)},o(C){me(e.$$.fragment,C),v=!1},d(C){qe(e,C),C&&O(r),C&&O(n);for(let F=0;F<g.length;F+=1)g[F].d();m=!1,D()}}}function tS(t){navigator.clipboard.writeText(t)}function rS(t,e,r){let n,i,a,o;$e(t,Zr,m=>r(9,o=m));let s=1,l=10;function p(){console.log("pasted"),navigator.clipboard.readText().then(m=>{const D=js(m).map(w=>w[0]),S=o;D.forEach(w=>{S[w]||ci.update(C=>(C[w]=!1,C))})})}function f(m){r(0,s=m)}function c(m){r(0,s=1),r(1,l=m)}const d=Xs(m=>{ci.update(D=>(D[m]=!1,D))},500),g=m=>tS(m),b=m=>d(m.target.value),v=m=>Zr.remove(m);return t.$$.update=()=>{t.$$.dirty&512&&r(8,n=Object.keys(o)),t.$$.dirty&258&&r(3,i=Math.ceil(n.length/l)),t.$$.dirty&259&&r(2,a=Array.from(n).sort().slice((s-1)*l,s*l))},[s,l,a,i,p,f,c,d,n,o,g,b,v]}class nS extends Xe{constructor(e){super(),et(this,e,rS,eS,tt,{})}}function iS(t){let e,r;return e=new t5({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function aS(t){let e,r;return e=new nS({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function uS(t){let e,r,n,i;const a=[aS,iS],o=[];function s(l,p){return l[0]===Os.List?0:l[0]===Os.Map?1:-1}return~(e=s(t))&&(r=o[e]=a[e](t)),{c(){r&&r.c(),n=St()},l(l){r&&r.l(l),n=St()},m(l,p){~e&&o[e].m(l,p),se(l,n,p),i=!0},p(l,[p]){let f=e;e=s(l),e!==f&&(r&&(sr(),me(o[f],1,1,()=>{o[f]=null}),or()),~e?(r=o[e],r||(r=o[e]=a[e](l),r.c()),ce(r,1),r.m(n.parentNode,n)):r=null)},i(l){i||(ce(r),i=!0)},o(l){me(r),i=!1},d(l){~e&&o[e].d(l),l&&O(n)}}}function sS(t,e,r){let n;return $e(t,$F,i=>r(0,n=i)),[n]}class oS extends Xe{constructor(e){super(),et(this,e,sS,uS,tt,{})}}var Nf={},Y1={},eo={},lS={get exports(){return eo},set exports(t){eo=t}},to={},fS={get exports(){return to},set exports(t){to=t}},Z1=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}},cS=Z1,Ri=Object.prototype.toString;function ic(t){return Array.isArray(t)}function Lf(t){return typeof t>"u"}function hS(t){return t!==null&&!Lf(t)&&t.constructor!==null&&!Lf(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function J1(t){return Ri.call(t)==="[object ArrayBuffer]"}function dS(t){return Ri.call(t)==="[object FormData]"}function pS(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&J1(t.buffer),e}function gS(t){return typeof t=="string"}function vS(t){return typeof t=="number"}function Q1(t){return t!==null&&typeof t=="object"}function Fs(t){if(Ri.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function mS(t){return Ri.call(t)==="[object Date]"}function _S(t){return Ri.call(t)==="[object File]"}function bS(t){return Ri.call(t)==="[object Blob]"}function X1(t){return Ri.call(t)==="[object Function]"}function DS(t){return Q1(t)&&X1(t.pipe)}function yS(t){return Ri.call(t)==="[object URLSearchParams]"}function wS(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function ES(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function ac(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),ic(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Rf(){var t={};function e(i,a){Fs(t[a])&&Fs(i)?t[a]=Rf(t[a],i):Fs(i)?t[a]=Rf({},i):ic(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)ac(arguments[r],e);return t}function AS(t,e,r){return ac(e,function(i,a){r&&typeof i=="function"?t[a]=cS(i,r):t[a]=i}),t}function CS(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var on={isArray:ic,isArrayBuffer:J1,isBuffer:hS,isFormData:dS,isArrayBufferView:pS,isString:gS,isNumber:vS,isObject:Q1,isPlainObject:Fs,isUndefined:Lf,isDate:mS,isFile:_S,isBlob:bS,isFunction:X1,isStream:DS,isURLSearchParams:yS,isStandardBrowserEnv:ES,forEach:ac,merge:Rf,extend:AS,trim:wS,stripBOM:CS},ba=on;function Vd(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var eg=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(ba.isURLSearchParams(r))i=r.toString();else{var a=[];ba.forEach(r,function(l,p){l===null||typeof l>"u"||(ba.isArray(l)?p=p+"[]":l=[l],ba.forEach(l,function(c){ba.isDate(c)?c=c.toISOString():ba.isObject(c)&&(c=JSON.stringify(c)),a.push(Vd(p)+"="+Vd(c))}))}),i=a.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},FS=on;function wo(){this.handlers=[]}wo.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};wo.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};wo.prototype.forEach=function(e){FS.forEach(this.handlers,function(n){n!==null&&e(n)})};var SS=wo,BS=on,OS=function(e,r){BS.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})},tg=function(e,r,n,i,a){return e.config=r,n&&(e.code=n),e.request=i,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},rg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Gl,jd;function ng(){if(jd)return Gl;jd=1;var t=tg;return Gl=function(r,n,i,a,o){var s=new Error(r);return t(s,n,i,a,o)},Gl}var Kl,zd;function MS(){if(zd)return Kl;zd=1;var t=ng();return Kl=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},Kl}var Yl,qd;function PS(){if(qd)return Yl;qd=1;var t=on;return Yl=t.isStandardBrowserEnv()?function(){return{write:function(n,i,a,o,s,l){var p=[];p.push(n+"="+encodeURIComponent(i)),t.isNumber(a)&&p.push("expires="+new Date(a).toGMTString()),t.isString(o)&&p.push("path="+o),t.isString(s)&&p.push("domain="+s),l===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Yl}var Zl,Wd;function kS(){return Wd||(Wd=1,Zl=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),Zl}var Jl,Hd;function TS(){return Hd||(Hd=1,Jl=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Jl}var Ql,$d;function IS(){if($d)return Ql;$d=1;var t=kS(),e=TS();return Ql=function(n,i){return n&&!t(i)?e(n,i):i},Ql}var Xl,Gd;function xS(){if(Gd)return Xl;Gd=1;var t=on,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Xl=function(n){var i={},a,o,s;return n&&t.forEach(n.split(`
`),function(p){if(s=p.indexOf(":"),a=t.trim(p.substr(0,s)).toLowerCase(),o=t.trim(p.substr(s+1)),a){if(i[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([o]):i[a]=i[a]?i[a]+", "+o:o}}),i},Xl}var ef,Kd;function NS(){if(Kd)return ef;Kd=1;var t=on;return ef=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(o){var s=o;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(s){var l=t.isString(s)?a(s):s;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),ef}var tf,Yd;function Eo(){if(Yd)return tf;Yd=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,tf=t,tf}var rf,Zd;function Jd(){if(Zd)return rf;Zd=1;var t=on,e=MS(),r=PS(),n=eg,i=IS(),a=xS(),o=NS(),s=ng(),l=rg,p=Eo();return rf=function(c){return new Promise(function(g,b){var v=c.data,m=c.headers,D=c.responseType,S;function w(){c.cancelToken&&c.cancelToken.unsubscribe(S),c.signal&&c.signal.removeEventListener("abort",S)}t.isFormData(v)&&delete m["Content-Type"];var C=new XMLHttpRequest;if(c.auth){var F=c.auth.username||"",M=c.auth.password?unescape(encodeURIComponent(c.auth.password)):"";m.Authorization="Basic "+btoa(F+":"+M)}var P=i(c.baseURL,c.url);C.open(c.method.toUpperCase(),n(P,c.params,c.paramsSerializer),!0),C.timeout=c.timeout;function A(){if(C){var R="getAllResponseHeaders"in C?a(C.getAllResponseHeaders()):null,Z=!D||D==="text"||D==="json"?C.responseText:C.response,K={data:Z,status:C.status,statusText:C.statusText,headers:R,config:c,request:C};e(function(V){g(V),w()},function(V){b(V),w()},K),C=null}}if("onloadend"in C?C.onloadend=A:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(A)},C.onabort=function(){C&&(b(s("Request aborted",c,"ECONNABORTED",C)),C=null)},C.onerror=function(){b(s("Network Error",c,null,C)),C=null},C.ontimeout=function(){var Z=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded",K=c.transitional||l;c.timeoutErrorMessage&&(Z=c.timeoutErrorMessage),b(s(Z,c,K.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",C)),C=null},t.isStandardBrowserEnv()){var x=(c.withCredentials||o(P))&&c.xsrfCookieName?r.read(c.xsrfCookieName):void 0;x&&(m[c.xsrfHeaderName]=x)}"setRequestHeader"in C&&t.forEach(m,function(Z,K){typeof v>"u"&&K.toLowerCase()==="content-type"?delete m[K]:C.setRequestHeader(K,Z)}),t.isUndefined(c.withCredentials)||(C.withCredentials=!!c.withCredentials),D&&D!=="json"&&(C.responseType=c.responseType),typeof c.onDownloadProgress=="function"&&C.addEventListener("progress",c.onDownloadProgress),typeof c.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",c.onUploadProgress),(c.cancelToken||c.signal)&&(S=function(R){C&&(b(!R||R&&R.type?new p("canceled"):R),C.abort(),C=null)},c.cancelToken&&c.cancelToken.subscribe(S),c.signal&&(c.signal.aborted?S():c.signal.addEventListener("abort",S))),v||(v=null),C.send(v)})},rf}var xr=on,Qd=OS,LS=tg,RS=rg,US={"Content-Type":"application/x-www-form-urlencoded"};function Xd(t,e){!xr.isUndefined(t)&&xr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function VS(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Jd()),t}function jS(t,e,r){if(xr.isString(t))try{return(e||JSON.parse)(t),xr.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Ao={transitional:RS,adapter:VS(),transformRequest:[function(e,r){return Qd(r,"Accept"),Qd(r,"Content-Type"),xr.isFormData(e)||xr.isArrayBuffer(e)||xr.isBuffer(e)||xr.isStream(e)||xr.isFile(e)||xr.isBlob(e)?e:xr.isArrayBufferView(e)?e.buffer:xr.isURLSearchParams(e)?(Xd(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):xr.isObject(e)||r&&r["Content-Type"]==="application/json"?(Xd(r,"application/json"),jS(e)):e}],transformResponse:[function(e){var r=this.transitional||Ao.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&xr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?LS(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};xr.forEach(["delete","get","head"],function(e){Ao.headers[e]={}});xr.forEach(["post","put","patch"],function(e){Ao.headers[e]=xr.merge(US)});var uc=Ao,zS=on,qS=uc,WS=function(e,r,n){var i=this||qS;return zS.forEach(n,function(o){e=o.call(i,e,r)}),e},nf,ep;function ig(){return ep||(ep=1,nf=function(e){return!!(e&&e.__CANCEL__)}),nf}var tp=on,af=WS,HS=ig(),$S=uc,GS=Eo();function uf(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new GS("canceled")}var KS=function(e){uf(e),e.headers=e.headers||{},e.data=af.call(e,e.data,e.headers,e.transformRequest),e.headers=tp.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),tp.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||$S.adapter;return r(e).then(function(i){return uf(e),i.data=af.call(e,i.data,i.headers,e.transformResponse),i},function(i){return HS(i)||(uf(e),i&&i.response&&(i.response.data=af.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},gn=on,ag=function(e,r){r=r||{};var n={};function i(f,c){return gn.isPlainObject(f)&&gn.isPlainObject(c)?gn.merge(f,c):gn.isPlainObject(c)?gn.merge({},c):gn.isArray(c)?c.slice():c}function a(f){if(gn.isUndefined(r[f])){if(!gn.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function o(f){if(!gn.isUndefined(r[f]))return i(void 0,r[f])}function s(f){if(gn.isUndefined(r[f])){if(!gn.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function l(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var p={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l};return gn.forEach(Object.keys(e).concat(Object.keys(r)),function(c){var d=p[c]||a,g=d(c);gn.isUndefined(g)&&d!==l||(n[c]=g)}),n},sf,rp;function ug(){return rp||(rp=1,sf={version:"0.26.1"}),sf}var YS=ug().version,sc={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){sc[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var np={};sc.transitional=function(e,r,n){function i(a,o){return"[Axios v"+YS+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,s){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!np[o]&&(np[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,s):!0}};function ZS(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],o=e[a];if(o){var s=t[a],l=s===void 0||o(s,a,t);if(l!==!0)throw new TypeError("option "+a+" must be "+l);continue}if(r!==!0)throw Error("Unknown option "+a)}}var JS={assertOptions:ZS,validators:sc},sg=on,QS=eg,ip=SS,ap=KS,Co=ag,og=JS,Da=og.validators;function Su(t){this.defaults=t,this.interceptors={request:new ip,response:new ip}}Su.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Co(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&og.assertOptions(n,{silentJSONParsing:Da.transitional(Da.boolean),forcedJSONParsing:Da.transitional(Da.boolean),clarifyTimeoutError:Da.transitional(Da.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(a=a&&g.synchronous,i.unshift(g.fulfilled,g.rejected))});var o=[];this.interceptors.response.forEach(function(g){o.push(g.fulfilled,g.rejected)});var s;if(!a){var l=[ap,void 0];for(Array.prototype.unshift.apply(l,i),l=l.concat(o),s=Promise.resolve(r);l.length;)s=s.then(l.shift(),l.shift());return s}for(var p=r;i.length;){var f=i.shift(),c=i.shift();try{p=f(p)}catch(d){c(d);break}}try{s=ap(p)}catch(d){return Promise.reject(d)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};Su.prototype.getUri=function(e){return e=Co(this.defaults,e),QS(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};sg.forEach(["delete","get","head","options"],function(e){Su.prototype[e]=function(r,n){return this.request(Co(n||{},{method:e,url:r,data:(n||{}).data}))}});sg.forEach(["post","put","patch"],function(e){Su.prototype[e]=function(r,n,i){return this.request(Co(i||{},{method:e,url:r,data:n}))}});var XS=Su,of,up;function e8(){if(up)return of;up=1;var t=Eo();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(a){if(i._listeners){var o,s=i._listeners.length;for(o=0;o<s;o++)i._listeners[o](a);i._listeners=null}}),this.promise.then=function(a){var o,s=new Promise(function(l){i.subscribe(l),o=l}).then(a);return s.cancel=function(){i.unsubscribe(o)},s},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},of=e,of}var lf,sp;function t8(){return sp||(sp=1,lf=function(e){return function(n){return e.apply(null,n)}}),lf}var ff,op;function r8(){if(op)return ff;op=1;var t=on;return ff=function(r){return t.isObject(r)&&r.isAxiosError===!0},ff}var lp=on,n8=Z1,Ss=XS,i8=ag,a8=uc;function lg(t){var e=new Ss(t),r=n8(Ss.prototype.request,e);return lp.extend(r,Ss.prototype,e),lp.extend(r,e),r.create=function(i){return lg(i8(t,i))},r}var Jn=lg(a8);Jn.Axios=Ss;Jn.Cancel=Eo();Jn.CancelToken=e8();Jn.isCancel=ig();Jn.VERSION=ug().version;Jn.all=function(e){return Promise.all(e)};Jn.spread=t8();Jn.isAxiosError=r8();fS.exports=Jn;to.default=Jn;(function(t){t.exports=to})(lS);var ur={},oc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RequiredError=t.BaseAPI=t.COLLECTION_FORMATS=t.BASE_PATH=void 0;const e=eo;t.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class r{constructor(a,o=t.BASE_PATH,s=e.default){this.basePath=o,this.axios=s,a&&(this.configuration=a,this.basePath=a.basePath||this.basePath)}}t.BaseAPI=r;class n extends Error{constructor(a,o){super(o),this.field=a,this.name="RequiredError"}}t.RequiredError=n})(oc);var lc=gr&&gr.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(f){try{p(n.next(f))}catch(c){o(c)}}function l(f){try{p(n.throw(f))}catch(c){o(c)}}function p(f){f.done?a(f.value):i(f.value).then(s,l)}p((n=n.apply(t,e||[])).next())})};Object.defineProperty(ur,"__esModule",{value:!0});ur.createRequestFunction=ur.toPathString=ur.serializeDataIfNeeded=ur.setSearchParams=ur.setOAuthToObject=ur.setBearerAuthToObject=ur.setBasicAuthToObject=ur.setApiKeyToObject=ur.assertParamExists=ur.DUMMY_BASE_URL=void 0;const u8=oc;ur.DUMMY_BASE_URL="https://example.com";ur.assertParamExists=function(t,e,r){if(r==null)throw new u8.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};ur.setApiKeyToObject=function(t,e,r){return lc(this,void 0,void 0,function*(){if(r&&r.apiKey){const n=typeof r.apiKey=="function"?yield r.apiKey(e):yield r.apiKey;t[e]=n}})};ur.setBasicAuthToObject=function(t,e){e&&(e.username||e.password)&&(t.auth={username:e.username,password:e.password})};ur.setBearerAuthToObject=function(t,e){return lc(this,void 0,void 0,function*(){if(e&&e.accessToken){const r=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;t.Authorization="Bearer "+r}})};ur.setOAuthToObject=function(t,e,r,n){return lc(this,void 0,void 0,function*(){if(n&&n.accessToken){const i=typeof n.accessToken=="function"?yield n.accessToken(e,r):yield n.accessToken;t.Authorization="Bearer "+i}})};function Uf(t,e,r=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(n=>Uf(t,n,r)):Object.keys(e).forEach(n=>Uf(t,e[n],`${r}${r!==""?".":""}${n}`)):t.has(r)?t.append(r,e):t.set(r,e))}ur.setSearchParams=function(t,...e){const r=new URLSearchParams(t.search);Uf(r,e),t.search=r.toString()};ur.serializeDataIfNeeded=function(t,e,r){const n=typeof t!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(t!==void 0?t:{}):t||""};ur.toPathString=function(t){return t.pathname+t.search+t.hash};ur.createRequestFunction=function(t,e,r,n){return(i=e,a=r)=>{const o=Object.assign(Object.assign({},t.options),{url:((n==null?void 0:n.basePath)||a)+t.url});return i.request(o)}};(function(t){var e=gr&&gr.__awaiter||function(o,s,l,p){function f(c){return c instanceof l?c:new l(function(d){d(c)})}return new(l||(l=Promise))(function(c,d){function g(m){try{v(p.next(m))}catch(D){d(D)}}function b(m){try{v(p.throw(m))}catch(D){d(D)}}function v(m){m.done?c(m.value):f(m.value).then(g,b)}v((p=p.apply(o,s||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIApi=t.OpenAIApiFactory=t.OpenAIApiFp=t.OpenAIApiAxiosParamCreator=t.CreateImageRequestResponseFormatEnum=t.CreateImageRequestSizeEnum=t.ChatCompletionResponseMessageRoleEnum=t.ChatCompletionRequestMessageRoleEnum=void 0;const r=eo,n=ur,i=oc;t.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},t.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},t.OpenAIApiAxiosParamCreator=function(o){return{cancelFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("cancelFineTune","fineTuneId",s);const p="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),l),g={},b={};n.setSearchParams(f,b);let v=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(f),options:d}}),createAnswer:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createAnswer","createAnswerRequest",s);const p="/answers",f=new URL(p,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createChatCompletion:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createChatCompletion","createChatCompletionRequest",s);const p="/chat/completions",f=new URL(p,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createClassification:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createClassification","createClassificationRequest",s);const p="/classifications",f=new URL(p,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createCompletion:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createCompletion","createCompletionRequest",s);const p="/completions",f=new URL(p,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createEdit:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEdit","createEditRequest",s);const p="/edits",f=new URL(p,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createEmbedding:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEmbedding","createEmbeddingRequest",s);const p="/embeddings",f=new URL(p,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createFile:(s,l,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFile","file",s),n.assertParamExists("createFile","purpose",l);const f="/files",c=new URL(f,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},d),p),b={},v={},m=new(o&&o.formDataCtor||FormData);s!==void 0&&m.append("file",s),l!==void 0&&m.append("purpose",l),b["Content-Type"]="multipart/form-data",n.setSearchParams(c,v);let D=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),m.getHeaders()),D),p.headers),g.data=m,{url:n.toPathString(c),options:g}}),createFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFineTune","createFineTuneRequest",s);const p="/fine-tunes",f=new URL(p,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createImage:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImage","createImageRequest",s);const p="/images/generations",f=new URL(p,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createImageEdit:(s,l,p,f,c,d,g,b={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageEdit","image",s),n.assertParamExists("createImageEdit","prompt",l);const v="/images/edits",m=new URL(v,n.DUMMY_BASE_URL);let D;o&&(D=o.baseOptions);const S=Object.assign(Object.assign({method:"POST"},D),b),w={},C={},F=new(o&&o.formDataCtor||FormData);s!==void 0&&F.append("image",s),p!==void 0&&F.append("mask",p),l!==void 0&&F.append("prompt",l),f!==void 0&&F.append("n",f),c!==void 0&&F.append("size",c),d!==void 0&&F.append("response_format",d),g!==void 0&&F.append("user",g),w["Content-Type"]="multipart/form-data",n.setSearchParams(m,C);let M=D&&D.headers?D.headers:{};return S.headers=Object.assign(Object.assign(Object.assign(Object.assign({},w),F.getHeaders()),M),b.headers),S.data=F,{url:n.toPathString(m),options:S}}),createImageVariation:(s,l,p,f,c,d={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageVariation","image",s);const g="/images/variations",b=new URL(g,n.DUMMY_BASE_URL);let v;o&&(v=o.baseOptions);const m=Object.assign(Object.assign({method:"POST"},v),d),D={},S={},w=new(o&&o.formDataCtor||FormData);s!==void 0&&w.append("image",s),l!==void 0&&w.append("n",l),p!==void 0&&w.append("size",p),f!==void 0&&w.append("response_format",f),c!==void 0&&w.append("user",c),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,S);let C=v&&v.headers?v.headers:{};return m.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),w.getHeaders()),C),d.headers),m.data=w,{url:n.toPathString(b),options:m}}),createModeration:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createModeration","createModerationRequest",s);const p="/moderations",f=new URL(p,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},c),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createSearch:(s,l,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createSearch","engineId",s),n.assertParamExists("createSearch","createSearchRequest",l);const f="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(s))),c=new URL(f,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},d),p),b={},v={};b["Content-Type"]="application/json",n.setSearchParams(c,v);let m=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),m),p.headers),g.data=n.serializeDataIfNeeded(l,g,o),{url:n.toPathString(c),options:g}}),createTranscription:(s,l,p,f,c,d,g={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranscription","file",s),n.assertParamExists("createTranscription","model",l);const b="/audio/transcriptions",v=new URL(b,n.DUMMY_BASE_URL);let m;o&&(m=o.baseOptions);const D=Object.assign(Object.assign({method:"POST"},m),g),S={},w={},C=new(o&&o.formDataCtor||FormData);s!==void 0&&C.append("file",s),l!==void 0&&C.append("model",l),p!==void 0&&C.append("prompt",p),f!==void 0&&C.append("response_format",f),c!==void 0&&C.append("temperature",c),d!==void 0&&C.append("language",d),S["Content-Type"]="multipart/form-data",n.setSearchParams(v,w);let F=m&&m.headers?m.headers:{};return D.headers=Object.assign(Object.assign(Object.assign(Object.assign({},S),C.getHeaders()),F),g.headers),D.data=C,{url:n.toPathString(v),options:D}}),createTranslation:(s,l,p,f,c,d={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranslation","file",s),n.assertParamExists("createTranslation","model",l);const g="/audio/translations",b=new URL(g,n.DUMMY_BASE_URL);let v;o&&(v=o.baseOptions);const m=Object.assign(Object.assign({method:"POST"},v),d),D={},S={},w=new(o&&o.formDataCtor||FormData);s!==void 0&&w.append("file",s),l!==void 0&&w.append("model",l),p!==void 0&&w.append("prompt",p),f!==void 0&&w.append("response_format",f),c!==void 0&&w.append("temperature",c),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,S);let C=v&&v.headers?v.headers:{};return m.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),w.getHeaders()),C),d.headers),m.data=w,{url:n.toPathString(b),options:m}}),deleteFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteFile","fileId",s);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},c),l),g={},b={};n.setSearchParams(f,b);let v=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(f),options:d}}),deleteModel:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteModel","model",s);const p="/models/{model}".replace("{model}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},c),l),g={},b={};n.setSearchParams(f,b);let v=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(f),options:d}}),downloadFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("downloadFile","fileId",s);const p="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},c),l),g={},b={};n.setSearchParams(f,b);let v=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(f),options:d}}),listEngines:(s={})=>e(this,void 0,void 0,function*(){const l="/engines",p=new URL(l,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const c=Object.assign(Object.assign({method:"GET"},f),s),d={},g={};n.setSearchParams(p,g);let b=f&&f.headers?f.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:c}}),listFiles:(s={})=>e(this,void 0,void 0,function*(){const l="/files",p=new URL(l,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const c=Object.assign(Object.assign({method:"GET"},f),s),d={},g={};n.setSearchParams(p,g);let b=f&&f.headers?f.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:c}}),listFineTuneEvents:(s,l,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("listFineTuneEvents","fineTuneId",s);const f="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(s))),c=new URL(f,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"GET"},d),p),b={},v={};l!==void 0&&(v.stream=l),n.setSearchParams(c,v);let m=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),m),p.headers),{url:n.toPathString(c),options:g}}),listFineTunes:(s={})=>e(this,void 0,void 0,function*(){const l="/fine-tunes",p=new URL(l,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const c=Object.assign(Object.assign({method:"GET"},f),s),d={},g={};n.setSearchParams(p,g);let b=f&&f.headers?f.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:c}}),listModels:(s={})=>e(this,void 0,void 0,function*(){const l="/models",p=new URL(l,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const c=Object.assign(Object.assign({method:"GET"},f),s),d={},g={};n.setSearchParams(p,g);let b=f&&f.headers?f.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:c}}),retrieveEngine:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveEngine","engineId",s);const p="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},c),l),g={},b={};n.setSearchParams(f,b);let v=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(f),options:d}}),retrieveFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFile","fileId",s);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},c),l),g={},b={};n.setSearchParams(f,b);let v=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(f),options:d}}),retrieveFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFineTune","fineTuneId",s);const p="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},c),l),g={},b={};n.setSearchParams(f,b);let v=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(f),options:d}}),retrieveModel:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveModel","model",s);const p="/models/{model}".replace("{model}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let c;o&&(c=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},c),l),g={},b={};n.setSearchParams(f,b);let v=c&&c.headers?c.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(f),options:d}})}},t.OpenAIApiFp=function(o){const s=t.OpenAIApiAxiosParamCreator(o);return{cancelFineTune(l,p){return e(this,void 0,void 0,function*(){const f=yield s.cancelFineTune(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createAnswer(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createAnswer(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createChatCompletion(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createChatCompletion(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createClassification(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createClassification(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createCompletion(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createCompletion(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createEdit(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createEdit(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createEmbedding(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createEmbedding(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createFile(l,p,f){return e(this,void 0,void 0,function*(){const c=yield s.createFile(l,p,f);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createFineTune(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createFineTune(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createImage(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createImage(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createImageEdit(l,p,f,c,d,g,b,v){return e(this,void 0,void 0,function*(){const m=yield s.createImageEdit(l,p,f,c,d,g,b,v);return n.createRequestFunction(m,r.default,i.BASE_PATH,o)})},createImageVariation(l,p,f,c,d,g){return e(this,void 0,void 0,function*(){const b=yield s.createImageVariation(l,p,f,c,d,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},createModeration(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createModeration(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createSearch(l,p,f){return e(this,void 0,void 0,function*(){const c=yield s.createSearch(l,p,f);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},createTranscription(l,p,f,c,d,g,b){return e(this,void 0,void 0,function*(){const v=yield s.createTranscription(l,p,f,c,d,g,b);return n.createRequestFunction(v,r.default,i.BASE_PATH,o)})},createTranslation(l,p,f,c,d,g){return e(this,void 0,void 0,function*(){const b=yield s.createTranslation(l,p,f,c,d,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},deleteFile(l,p){return e(this,void 0,void 0,function*(){const f=yield s.deleteFile(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},deleteModel(l,p){return e(this,void 0,void 0,function*(){const f=yield s.deleteModel(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},downloadFile(l,p){return e(this,void 0,void 0,function*(){const f=yield s.downloadFile(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},listEngines(l){return e(this,void 0,void 0,function*(){const p=yield s.listEngines(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listFiles(l){return e(this,void 0,void 0,function*(){const p=yield s.listFiles(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listFineTuneEvents(l,p,f){return e(this,void 0,void 0,function*(){const c=yield s.listFineTuneEvents(l,p,f);return n.createRequestFunction(c,r.default,i.BASE_PATH,o)})},listFineTunes(l){return e(this,void 0,void 0,function*(){const p=yield s.listFineTunes(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listModels(l){return e(this,void 0,void 0,function*(){const p=yield s.listModels(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},retrieveEngine(l,p){return e(this,void 0,void 0,function*(){const f=yield s.retrieveEngine(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},retrieveFile(l,p){return e(this,void 0,void 0,function*(){const f=yield s.retrieveFile(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},retrieveFineTune(l,p){return e(this,void 0,void 0,function*(){const f=yield s.retrieveFineTune(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},retrieveModel(l,p){return e(this,void 0,void 0,function*(){const f=yield s.retrieveModel(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})}}},t.OpenAIApiFactory=function(o,s,l){const p=t.OpenAIApiFp(o);return{cancelFineTune(f,c){return p.cancelFineTune(f,c).then(d=>d(l,s))},createAnswer(f,c){return p.createAnswer(f,c).then(d=>d(l,s))},createChatCompletion(f,c){return p.createChatCompletion(f,c).then(d=>d(l,s))},createClassification(f,c){return p.createClassification(f,c).then(d=>d(l,s))},createCompletion(f,c){return p.createCompletion(f,c).then(d=>d(l,s))},createEdit(f,c){return p.createEdit(f,c).then(d=>d(l,s))},createEmbedding(f,c){return p.createEmbedding(f,c).then(d=>d(l,s))},createFile(f,c,d){return p.createFile(f,c,d).then(g=>g(l,s))},createFineTune(f,c){return p.createFineTune(f,c).then(d=>d(l,s))},createImage(f,c){return p.createImage(f,c).then(d=>d(l,s))},createImageEdit(f,c,d,g,b,v,m,D){return p.createImageEdit(f,c,d,g,b,v,m,D).then(S=>S(l,s))},createImageVariation(f,c,d,g,b,v){return p.createImageVariation(f,c,d,g,b,v).then(m=>m(l,s))},createModeration(f,c){return p.createModeration(f,c).then(d=>d(l,s))},createSearch(f,c,d){return p.createSearch(f,c,d).then(g=>g(l,s))},createTranscription(f,c,d,g,b,v,m){return p.createTranscription(f,c,d,g,b,v,m).then(D=>D(l,s))},createTranslation(f,c,d,g,b,v){return p.createTranslation(f,c,d,g,b,v).then(m=>m(l,s))},deleteFile(f,c){return p.deleteFile(f,c).then(d=>d(l,s))},deleteModel(f,c){return p.deleteModel(f,c).then(d=>d(l,s))},downloadFile(f,c){return p.downloadFile(f,c).then(d=>d(l,s))},listEngines(f){return p.listEngines(f).then(c=>c(l,s))},listFiles(f){return p.listFiles(f).then(c=>c(l,s))},listFineTuneEvents(f,c,d){return p.listFineTuneEvents(f,c,d).then(g=>g(l,s))},listFineTunes(f){return p.listFineTunes(f).then(c=>c(l,s))},listModels(f){return p.listModels(f).then(c=>c(l,s))},retrieveEngine(f,c){return p.retrieveEngine(f,c).then(d=>d(l,s))},retrieveFile(f,c){return p.retrieveFile(f,c).then(d=>d(l,s))},retrieveFineTune(f,c){return p.retrieveFineTune(f,c).then(d=>d(l,s))},retrieveModel(f,c){return p.retrieveModel(f,c).then(d=>d(l,s))}}};class a extends i.BaseAPI{cancelFineTune(s,l){return t.OpenAIApiFp(this.configuration).cancelFineTune(s,l).then(p=>p(this.axios,this.basePath))}createAnswer(s,l){return t.OpenAIApiFp(this.configuration).createAnswer(s,l).then(p=>p(this.axios,this.basePath))}createChatCompletion(s,l){return t.OpenAIApiFp(this.configuration).createChatCompletion(s,l).then(p=>p(this.axios,this.basePath))}createClassification(s,l){return t.OpenAIApiFp(this.configuration).createClassification(s,l).then(p=>p(this.axios,this.basePath))}createCompletion(s,l){return t.OpenAIApiFp(this.configuration).createCompletion(s,l).then(p=>p(this.axios,this.basePath))}createEdit(s,l){return t.OpenAIApiFp(this.configuration).createEdit(s,l).then(p=>p(this.axios,this.basePath))}createEmbedding(s,l){return t.OpenAIApiFp(this.configuration).createEmbedding(s,l).then(p=>p(this.axios,this.basePath))}createFile(s,l,p){return t.OpenAIApiFp(this.configuration).createFile(s,l,p).then(f=>f(this.axios,this.basePath))}createFineTune(s,l){return t.OpenAIApiFp(this.configuration).createFineTune(s,l).then(p=>p(this.axios,this.basePath))}createImage(s,l){return t.OpenAIApiFp(this.configuration).createImage(s,l).then(p=>p(this.axios,this.basePath))}createImageEdit(s,l,p,f,c,d,g,b){return t.OpenAIApiFp(this.configuration).createImageEdit(s,l,p,f,c,d,g,b).then(v=>v(this.axios,this.basePath))}createImageVariation(s,l,p,f,c,d){return t.OpenAIApiFp(this.configuration).createImageVariation(s,l,p,f,c,d).then(g=>g(this.axios,this.basePath))}createModeration(s,l){return t.OpenAIApiFp(this.configuration).createModeration(s,l).then(p=>p(this.axios,this.basePath))}createSearch(s,l,p){return t.OpenAIApiFp(this.configuration).createSearch(s,l,p).then(f=>f(this.axios,this.basePath))}createTranscription(s,l,p,f,c,d,g){return t.OpenAIApiFp(this.configuration).createTranscription(s,l,p,f,c,d,g).then(b=>b(this.axios,this.basePath))}createTranslation(s,l,p,f,c,d){return t.OpenAIApiFp(this.configuration).createTranslation(s,l,p,f,c,d).then(g=>g(this.axios,this.basePath))}deleteFile(s,l){return t.OpenAIApiFp(this.configuration).deleteFile(s,l).then(p=>p(this.axios,this.basePath))}deleteModel(s,l){return t.OpenAIApiFp(this.configuration).deleteModel(s,l).then(p=>p(this.axios,this.basePath))}downloadFile(s,l){return t.OpenAIApiFp(this.configuration).downloadFile(s,l).then(p=>p(this.axios,this.basePath))}listEngines(s){return t.OpenAIApiFp(this.configuration).listEngines(s).then(l=>l(this.axios,this.basePath))}listFiles(s){return t.OpenAIApiFp(this.configuration).listFiles(s).then(l=>l(this.axios,this.basePath))}listFineTuneEvents(s,l,p){return t.OpenAIApiFp(this.configuration).listFineTuneEvents(s,l,p).then(f=>f(this.axios,this.basePath))}listFineTunes(s){return t.OpenAIApiFp(this.configuration).listFineTunes(s).then(l=>l(this.axios,this.basePath))}listModels(s){return t.OpenAIApiFp(this.configuration).listModels(s).then(l=>l(this.axios,this.basePath))}retrieveEngine(s,l){return t.OpenAIApiFp(this.configuration).retrieveEngine(s,l).then(p=>p(this.axios,this.basePath))}retrieveFile(s,l){return t.OpenAIApiFp(this.configuration).retrieveFile(s,l).then(p=>p(this.axios,this.basePath))}retrieveFineTune(s,l){return t.OpenAIApiFp(this.configuration).retrieveFineTune(s,l).then(p=>p(this.axios,this.basePath))}retrieveModel(s,l){return t.OpenAIApiFp(this.configuration).retrieveModel(s,l).then(p=>p(this.axios,this.basePath))}}t.OpenAIApi=a})(Y1);var Fo={};const s8="openai",o8="3.2.1",l8="Node.js library for the OpenAI API",f8={type:"git",url:"git@github.com:openai/openai-node.git"},c8=["openai","open","ai","gpt-3","gpt3"],h8="OpenAI",d8="MIT",p8="./dist/index.js",g8="./dist/index.d.ts",v8={build:"tsc --outDir dist/"},m8={axios:"^0.26.0","form-data":"^4.0.0"},_8={"@types/node":"^12.11.5",typescript:"^3.6.4"},b8={name:s8,version:o8,description:l8,repository:f8,keywords:c8,author:h8,license:d8,main:p8,types:g8,scripts:v8,dependencies:m8,devDependencies:_8};var cf,fp;function D8(){return fp||(fp=1,cf=typeof self=="object"?self.FormData:window.FormData),cf}Object.defineProperty(Fo,"__esModule",{value:!0});Fo.Configuration=void 0;const y8=b8;class w8{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${y8.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=D8())}isJsonMime(e){const r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(r.test(e)||e.toLowerCase()==="application/json-patch+json")}}Fo.Configuration=w8;(function(t){var e=gr&&gr.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=gr&&gr.__exportStar||function(n,i){for(var a in n)a!=="default"&&!i.hasOwnProperty(a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(Y1,t),r(Fo,t)})(Nf);function ro(t){const e=new Nf.Configuration({apiKey:t});return new Nf.OpenAIApi(e)}async function E8(t,e,r="text-davinci-003"){return await t.createCompletion({model:r,prompt:e,temperature:.8,max_tokens:250})}async function A8(t,e,r="gpt-3.5-turbo"){return await t.createChatCompletion({model:r,messages:[{role:"user",content:e}],temperature:.8,max_tokens:250})}async function C8(t,e,r="text-embedding-ada-002"){return await t.createEmbedding({model:r,input:e})}async function F8(t){return await t.listModels()}const hf="preferredEmbeddingModel";function S8(){const t=er(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[hf]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[hf]=a,r(a))},get:()=>Ft(t),delete:()=>{i&&(delete localStorage[hf],r(""))}}}const Vf=S8();async function B8(t){const e=ro(di.get());return(await C8(e,t,Vf.get()||"text-embedding-ada-002")).data.data[0].embedding}const ws="cacheSize";function O8(){const t=er(50),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[ws]?parseInt(localStorage[ws]):50),{subscribe:e,update:a=>{i&&(localStorage[ws]=JSON.stringify(a),r(a))},get:()=>Ft(t),delete:()=>{i&&(delete localStorage[ws],r(50))}}}const jf=O8();function M8(t){let e,r,n,i;return{c(){e=W("div"),r=W("div"),n=W("p"),i=Ce("Some features require OpenAI Key"),this.h()},l(a){e=H(a,"DIV",{class:!0});var o=j(e);r=H(o,"DIV",{class:!0});var s=j(r);n=H(s,"P",{class:!0});var l=j(n);i=Fe(l,"Some features require OpenAI Key"),l.forEach(O),s.forEach(O),o.forEach(O),this.h()},h(){B(n,"class","text-xs"),B(r,"class","flex flex-col justify-start mr-5"),B(e,"class","w-full flex justify-center p-4")},m(a,o){se(a,e,o),T(e,r),T(r,n),T(n,i)},d(a){a&&O(e)}}}function P8(t){let e,r,n,i,a,o,s;return{c(){e=W("div"),r=W("div"),n=W("progress"),i=Ee(),a=W("div"),o=W("p"),s=Ce("Embedding..."),this.h()},l(l){e=H(l,"DIV",{class:!0});var p=j(e);r=H(p,"DIV",{class:!0});var f=j(r);n=H(f,"PROGRESS",{class:!0}),j(n).forEach(O),f.forEach(O),i=Ae(p),a=H(p,"DIV",{class:!0});var c=j(a);o=H(c,"P",{class:!0});var d=j(o);s=Fe(d,"Embedding..."),d.forEach(O),c.forEach(O),p.forEach(O),this.h()},h(){B(n,"class","progress progress-primary w-20"),B(r,"class","flex flex-col justify-start mr-5"),B(o,"class","text-xs"),B(a,"class","flex flex-col justify-start mr-5"),B(e,"class","w-full flex justify-center p-4")},m(l,p){se(l,e,p),T(e,r),T(r,n),T(e,i),T(e,a),T(a,o),T(o,s)},d(l){l&&O(e)}}}function k8(t){let e;function r(a,o){if(a[0])return P8;if(!a[1])return M8}let n=r(t),i=n&&n(t);return{c(){i&&i.c(),e=St()},l(a){i&&i.l(a),e=St()},m(a,o){i&&i.m(a,o),se(a,e,o)},p(a,[o]){n!==(n=r(a))&&(i&&i.d(1),i=n&&n(a),i&&(i.c(),i.m(e.parentNode,e)))},i:Pe,o:Pe,d(a){i&&i.d(a),a&&O(e)}}}function T8(t,e,r){let n,i,a;$e(t,ci,c=>r(2,n=c)),$e(t,jf,c=>r(3,i=c)),$e(t,di,c=>r(1,a=c));let o=!1;function s(){return Object.keys(n).length}const l=Zr.subscribe(c=>{const d=Object.entries(c).filter(([g,b])=>!b);a&&d.length>0&&d.forEach(([g,b])=>{ci.update(v=>(v[g]=!1,v))})}),p=ci.subscribe(c=>{!!(di.get()&&s()>0&&!o)&&(r(0,o=!0),f())});function f(){console.log("start embedding");const c=Object.keys(n)[0];ci.update(d=>(d[c]=!0,d)),B8(c).then(d=>{Zr.update(c,d),Zr.cache(i);const g={...n};delete g[c],ci.set(g),s()>0?f():r(0,o=!1)})}return Up(()=>{l(),p()}),[o,a]}class I8 extends Xe{constructor(e){super(),et(this,e,T8,k8,tt,{})}}function x8(t,e,r){return $e(t,Zr,n=>r(0,n)),[]}class N8 extends Xe{constructor(e){super(),et(this,e,x8,null,tt,{})}}function L8(t){let e,r,n,i,a;return{c(){e=W("div"),r=W("button"),n=Ce("Delete History"),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=j(e);r=H(s,"BUTTON",{class:!0});var l=j(r);n=Fe(l,"Delete History"),l.forEach(O),s.forEach(O),this.h()},h(){B(r,"class","btn btn-sm btn-error"),B(e,"class","flex justify-end p-2")},m(o,s){se(o,e,s),T(e,r),T(r,n),i||(a=De(r,"click",t[0]),i=!0)},p:Pe,i:Pe,o:Pe,d(o){o&&O(e),i=!1,a()}}}function R8(t){function e(){tc.delete()}return[e]}class U8 extends Xe{constructor(e){super(),et(this,e,R8,L8,tt,{})}}function V8(t){let e,r;return e=new U8({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p:Pe,i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function j8(t){let e,r;return e=new N8({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p:Pe,i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function z8(t){let e,r,n,i;r=new By({});let a=(t[1].weightMode===pt.Circle||t[1].weightMode===pt.Pie||t[1].weightMode===pt.Ring)&&cp();return{c(){e=W("div"),Ve(r.$$.fragment),n=Ee(),a&&a.c()},l(o){e=H(o,"DIV",{});var s=j(e);je(r.$$.fragment,s),n=Ae(s),a&&a.l(s),s.forEach(O)},m(o,s){se(o,e,s),ze(r,e,null),T(e,n),a&&a.m(e,null),i=!0},p(o,s){o[1].weightMode===pt.Circle||o[1].weightMode===pt.Pie||o[1].weightMode===pt.Ring?a?s&2&&ce(a,1):(a=cp(),a.c(),ce(a,1),a.m(e,null)):a&&(sr(),me(a,1,1,()=>{a=null}),or())},i(o){i||(ce(r.$$.fragment,o),ce(a),i=!0)},o(o){me(r.$$.fragment,o),me(a),i=!1},d(o){o&&O(e),qe(r),a&&a.d()}}}function cp(t){let e,r;return e=new Ly({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function q8(t){let e,r,n;return r=new HF({}),{c(){e=W("div"),Ve(r.$$.fragment),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=j(e);je(r.$$.fragment,a),a.forEach(O),this.h()},h(){B(e,"class","flex flex-col h-full mt-10 overflow-hidden")},m(i,a){se(i,e,a),ze(r,e,null),n=!0},i(i){n||(ce(r.$$.fragment,i),n=!0)},o(i){me(r.$$.fragment,i),n=!1},d(i){i&&O(e),qe(r)}}}function W8(t){let e,r,n;return r=new oS({}),{c(){e=W("div"),Ve(r.$$.fragment),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=j(e);je(r.$$.fragment,a),a.forEach(O),this.h()},h(){B(e,"class","flex flex-col h-full mt-10 overflow-hidden")},m(i,a){se(i,e,a),ze(r,e,null),n=!0},i(i){n||(ce(r.$$.fragment,i),n=!0)},o(i){me(r.$$.fragment,i),n=!1},d(i){i&&O(e),qe(r)}}}function H8(t){let e,r,n;return r=new UF({}),{c(){e=W("div"),Ve(r.$$.fragment),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=j(e);je(r.$$.fragment,a),a.forEach(O),this.h()},h(){B(e,"class","flex flex-col h-full place-content-between")},m(i,a){se(i,e,a),ze(r,e,null),n=!0},i(i){n||(ce(r.$$.fragment,i),n=!0)},o(i){me(r.$$.fragment,i),n=!1},d(i){i&&O(e),qe(r)}}}function $8(t){let e,r,n,i,a,o,s,l,p,f,c,d,g;i=new gy({}),o=new I8({});const b=[z8,j8,V8],v=[];function m(C,F){return C[0]===Dr.Build?0:C[0]===Dr.Concept?1:C[0]===Dr.History?2:-1}~(l=m(t))&&(p=v[l]=b[l](t));const D=[H8,W8,q8],S=[];function w(C,F){return C[0]===Dr.Build?0:C[0]===Dr.Concept?1:C[0]===Dr.History?2:-1}return~(c=w(t))&&(d=S[c]=D[c](t)),{c(){e=W("div"),r=W("div"),n=W("div"),Ve(i.$$.fragment),a=Ee(),Ve(o.$$.fragment),s=Ee(),p&&p.c(),f=Ee(),d&&d.c(),this.h()},l(C){e=H(C,"DIV",{class:!0});var F=j(e);r=H(F,"DIV",{class:!0});var M=j(r);n=H(M,"DIV",{class:!0});var P=j(n);je(i.$$.fragment,P),a=Ae(P),je(o.$$.fragment,P),s=Ae(P),p&&p.l(P),P.forEach(O),M.forEach(O),f=Ae(F),d&&d.l(F),F.forEach(O),this.h()},h(){B(n,"class","w-full flex justify-between"),B(r,"class","w-full absolute top-0 z-10"),B(e,"class","relative w-full h-screen flex flex-col")},m(C,F){se(C,e,F),T(e,r),T(r,n),ze(i,n,null),T(n,a),ze(o,n,null),T(n,s),~l&&v[l].m(n,null),T(e,f),~c&&S[c].m(e,null),g=!0},p(C,[F]){let M=l;l=m(C),l===M?~l&&v[l].p(C,F):(p&&(sr(),me(v[M],1,1,()=>{v[M]=null}),or()),~l?(p=v[l],p?p.p(C,F):(p=v[l]=b[l](C),p.c()),ce(p,1),p.m(n,null)):p=null);let P=c;c=w(C),c!==P&&(d&&(sr(),me(S[P],1,1,()=>{S[P]=null}),or()),~c?(d=S[c],d||(d=S[c]=D[c](C),d.c()),ce(d,1),d.m(e,null)):d=null)},i(C){g||(ce(i.$$.fragment,C),ce(o.$$.fragment,C),ce(p),ce(d),g=!0)},o(C){me(i.$$.fragment,C),me(o.$$.fragment,C),me(p),me(d),g=!1},d(C){C&&O(e),qe(i),qe(o),~l&&v[l].d(),~c&&S[c].d()}}}function G8(t,e,r){let n,i;return $e(t,mf,a=>r(0,n=a)),$e(t,it,a=>r(1,i=a)),[n,i]}class K8 extends Xe{constructor(e){super(),et(this,e,G8,$8,tt,{})}}var no={},Y8={get exports(){return no},set exports(t){no=t}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var r,n="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",s="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",p=500,f="__lodash_placeholder__",c=1,d=2,g=4,b=1,v=2,m=1,D=2,S=4,w=8,C=16,F=32,M=64,P=128,A=256,x=512,R=30,Z="...",K=800,L=16,V=1,q=2,z=3,Q=1/0,X=9007199254740991,te=17976931348623157e292,oe=0/0,_e=4294967295,be=_e-1,Be=_e>>>1,ke=[["ary",P],["bind",m],["bindKey",D],["curry",w],["curryRight",C],["flip",x],["partial",F],["partialRight",M],["rearg",A]],Te="[object Arguments]",Le="[object Array]",Ne="[object AsyncFunction]",Ye="[object Boolean]",Qe="[object Date]",Je="[object DOMException]",ot="[object Error]",bt="[object Function]",Ue="[object GeneratorFunction]",lt="[object Map]",kt="[object Number]",yr="[object Null]",Mt="[object Object]",wr="[object Promise]",Ke="[object Proxy]",tr="[object RegExp]",rr="[object Set]",Jr="[object String]",G="[object Symbol]",Y="[object Undefined]",ie="[object WeakMap]",de="[object WeakSet]",ue="[object ArrayBuffer]",ve="[object DataView]",le="[object Float32Array]",he="[object Float64Array]",Me="[object Int8Array]",We="[object Int16Array]",ft="[object Int32Array]",Ie="[object Uint8Array]",Gt="[object Uint8ClampedArray]",Ut="[object Uint16Array]",nr="[object Uint32Array]",Kt=/\b__p \+= '';/g,Er=/\b(__p \+=) '' \+/g,Yt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ar=/&(?:amp|lt|gt|quot|#39);/g,dr=/[&<>"']/g,pr=RegExp(Ar.source),vn=RegExp(dr.source),vr=/<%-([\s\S]+?)%>/g,On=/<%([\s\S]+?)%>/g,Qn=/<%=([\s\S]+?)%>/g,Vn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jn=/^\w*$/,ta=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ui=/[\\^$.*+?()[\]{}|]/g,Ia=RegExp(Ui.source),Or=/^\s+/,ir=/\s/,xa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gi=/\{\n\/\* \[wrapped with (.+)\] \*/,mn=/,? & /,Xn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Vi=/[()=,{}\[\]\/\s]/,Na=/\\(\\)?/g,La=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ra=/\w*$/,Ra=/^[-+]0x[0-9a-f]+$/i,Ua=/^0b[01]+$/i,Va=/^\[object .+?Constructor\]$/,ja=/^0o[0-7]+$/i,za=/^(?:0|[1-9]\d*)$/,qa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vi=/($^)/,Wa=/['\n\r\u2028\u2029\\]/g,mi="\\ud800-\\udfff",Ha="\\u0300-\\u036f",$a="\\ufe20-\\ufe2f",Ga="\\u20d0-\\u20ff",na=Ha+$a+Ga,zn="\\u2700-\\u27bf",Cr="a-z\\xdf-\\xf6\\xf8-\\xff",lr="\\xac\\xb1\\xd7\\xf7",Hr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ji="\\u2000-\\u206f",ei=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qn="A-Z\\xc0-\\xd6\\xd8-\\xde",zi="\\ufe0e\\ufe0f",Mn=lr+Hr+ji+ei,_n="[']",So="["+mi+"]",Ka="["+Mn+"]",ia="["+na+"]",Bu="\\d+",y="["+zn+"]",k="["+Cr+"]",$="[^"+mi+Mn+Bu+zn+Cr+qn+"]",re="\\ud83c[\\udffb-\\udfff]",ge="(?:"+ia+"|"+re+")",xe="[^"+mi+"]",mt="(?:\\ud83c[\\udde6-\\uddff]){2}",At="[\\ud800-\\udbff][\\udc00-\\udfff]",Wt="["+qn+"]",fr="\\u200d",fc="(?:"+k+"|"+$+")",cg="(?:"+Wt+"|"+$+")",cc="(?:"+_n+"(?:d|ll|m|re|s|t|ve))?",hc="(?:"+_n+"(?:D|LL|M|RE|S|T|VE))?",dc=ge+"?",pc="["+zi+"]?",hg="(?:"+fr+"(?:"+[xe,mt,At].join("|")+")"+pc+dc+")*",dg="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",pg="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",gc=pc+dc+hg,gg="(?:"+[y,mt,At].join("|")+")"+gc,vg="(?:"+[xe+ia+"?",ia,mt,At,So].join("|")+")",mg=RegExp(_n,"g"),_g=RegExp(ia,"g"),Bo=RegExp(re+"(?="+re+")|"+vg+gc,"g"),bg=RegExp([Wt+"?"+k+"+"+cc+"(?="+[Ka,Wt,"$"].join("|")+")",cg+"+"+hc+"(?="+[Ka,Wt+fc,"$"].join("|")+")",Wt+"?"+fc+"+"+cc,Wt+"+"+hc,pg,dg,Bu,gg].join("|"),"g"),Dg=RegExp("["+fr+mi+na+zi+"]"),yg=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wg=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Eg=-1,jt={};jt[le]=jt[he]=jt[Me]=jt[We]=jt[ft]=jt[Ie]=jt[Gt]=jt[Ut]=jt[nr]=!0,jt[Te]=jt[Le]=jt[ue]=jt[Ye]=jt[ve]=jt[Qe]=jt[ot]=jt[bt]=jt[lt]=jt[kt]=jt[Mt]=jt[tr]=jt[rr]=jt[Jr]=jt[ie]=!1;var Vt={};Vt[Te]=Vt[Le]=Vt[ue]=Vt[ve]=Vt[Ye]=Vt[Qe]=Vt[le]=Vt[he]=Vt[Me]=Vt[We]=Vt[ft]=Vt[lt]=Vt[kt]=Vt[Mt]=Vt[tr]=Vt[rr]=Vt[Jr]=Vt[G]=Vt[Ie]=Vt[Gt]=Vt[Ut]=Vt[nr]=!0,Vt[ot]=Vt[bt]=Vt[ie]=!1;var Ag={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Cg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Fg={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Sg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bg=parseFloat,Og=parseInt,vc=typeof gr=="object"&&gr&&gr.Object===Object&&gr,Mg=typeof self=="object"&&self&&self.Object===Object&&self,Mr=vc||Mg||Function("return this")(),Oo=e&&!e.nodeType&&e,qi=Oo&&!0&&t&&!t.nodeType&&t,mc=qi&&qi.exports===Oo,Mo=mc&&vc.process,bn=function(){try{var ne=qi&&qi.require&&qi.require("util").types;return ne||Mo&&Mo.binding&&Mo.binding("util")}catch{}}(),_c=bn&&bn.isArrayBuffer,bc=bn&&bn.isDate,Dc=bn&&bn.isMap,yc=bn&&bn.isRegExp,wc=bn&&bn.isSet,Ec=bn&&bn.isTypedArray;function ln(ne,pe,fe){switch(fe.length){case 0:return ne.call(pe);case 1:return ne.call(pe,fe[0]);case 2:return ne.call(pe,fe[0],fe[1]);case 3:return ne.call(pe,fe[0],fe[1],fe[2])}return ne.apply(pe,fe)}function Pg(ne,pe,fe,He){for(var ht=-1,Pt=ne==null?0:ne.length;++ht<Pt;){var mr=ne[ht];pe(He,mr,fe(mr),ne)}return He}function Dn(ne,pe){for(var fe=-1,He=ne==null?0:ne.length;++fe<He&&pe(ne[fe],fe,ne)!==!1;);return ne}function kg(ne,pe){for(var fe=ne==null?0:ne.length;fe--&&pe(ne[fe],fe,ne)!==!1;);return ne}function Ac(ne,pe){for(var fe=-1,He=ne==null?0:ne.length;++fe<He;)if(!pe(ne[fe],fe,ne))return!1;return!0}function _i(ne,pe){for(var fe=-1,He=ne==null?0:ne.length,ht=0,Pt=[];++fe<He;){var mr=ne[fe];pe(mr,fe,ne)&&(Pt[ht++]=mr)}return Pt}function Ou(ne,pe){var fe=ne==null?0:ne.length;return!!fe&&aa(ne,pe,0)>-1}function Po(ne,pe,fe){for(var He=-1,ht=ne==null?0:ne.length;++He<ht;)if(fe(pe,ne[He]))return!0;return!1}function Ht(ne,pe){for(var fe=-1,He=ne==null?0:ne.length,ht=Array(He);++fe<He;)ht[fe]=pe(ne[fe],fe,ne);return ht}function bi(ne,pe){for(var fe=-1,He=pe.length,ht=ne.length;++fe<He;)ne[ht+fe]=pe[fe];return ne}function ko(ne,pe,fe,He){var ht=-1,Pt=ne==null?0:ne.length;for(He&&Pt&&(fe=ne[++ht]);++ht<Pt;)fe=pe(fe,ne[ht],ht,ne);return fe}function Tg(ne,pe,fe,He){var ht=ne==null?0:ne.length;for(He&&ht&&(fe=ne[--ht]);ht--;)fe=pe(fe,ne[ht],ht,ne);return fe}function To(ne,pe){for(var fe=-1,He=ne==null?0:ne.length;++fe<He;)if(pe(ne[fe],fe,ne))return!0;return!1}var Ig=Io("length");function xg(ne){return ne.split("")}function Ng(ne){return ne.match(Xn)||[]}function Cc(ne,pe,fe){var He;return fe(ne,function(ht,Pt,mr){if(pe(ht,Pt,mr))return He=Pt,!1}),He}function Mu(ne,pe,fe,He){for(var ht=ne.length,Pt=fe+(He?1:-1);He?Pt--:++Pt<ht;)if(pe(ne[Pt],Pt,ne))return Pt;return-1}function aa(ne,pe,fe){return pe===pe?Kg(ne,pe,fe):Mu(ne,Fc,fe)}function Lg(ne,pe,fe,He){for(var ht=fe-1,Pt=ne.length;++ht<Pt;)if(He(ne[ht],pe))return ht;return-1}function Fc(ne){return ne!==ne}function Sc(ne,pe){var fe=ne==null?0:ne.length;return fe?No(ne,pe)/fe:oe}function Io(ne){return function(pe){return pe==null?r:pe[ne]}}function xo(ne){return function(pe){return ne==null?r:ne[pe]}}function Bc(ne,pe,fe,He,ht){return ht(ne,function(Pt,mr,Lt){fe=He?(He=!1,Pt):pe(fe,Pt,mr,Lt)}),fe}function Rg(ne,pe){var fe=ne.length;for(ne.sort(pe);fe--;)ne[fe]=ne[fe].value;return ne}function No(ne,pe){for(var fe,He=-1,ht=ne.length;++He<ht;){var Pt=pe(ne[He]);Pt!==r&&(fe=fe===r?Pt:fe+Pt)}return fe}function Lo(ne,pe){for(var fe=-1,He=Array(ne);++fe<ne;)He[fe]=pe(fe);return He}function Ug(ne,pe){return Ht(pe,function(fe){return[fe,ne[fe]]})}function Oc(ne){return ne&&ne.slice(0,Tc(ne)+1).replace(Or,"")}function fn(ne){return function(pe){return ne(pe)}}function Ro(ne,pe){return Ht(pe,function(fe){return ne[fe]})}function Ya(ne,pe){return ne.has(pe)}function Mc(ne,pe){for(var fe=-1,He=ne.length;++fe<He&&aa(pe,ne[fe],0)>-1;);return fe}function Pc(ne,pe){for(var fe=ne.length;fe--&&aa(pe,ne[fe],0)>-1;);return fe}function Vg(ne,pe){for(var fe=ne.length,He=0;fe--;)ne[fe]===pe&&++He;return He}var jg=xo(Ag),zg=xo(Cg);function qg(ne){return"\\"+Sg[ne]}function Wg(ne,pe){return ne==null?r:ne[pe]}function ua(ne){return Dg.test(ne)}function Hg(ne){return yg.test(ne)}function $g(ne){for(var pe,fe=[];!(pe=ne.next()).done;)fe.push(pe.value);return fe}function Uo(ne){var pe=-1,fe=Array(ne.size);return ne.forEach(function(He,ht){fe[++pe]=[ht,He]}),fe}function kc(ne,pe){return function(fe){return ne(pe(fe))}}function Di(ne,pe){for(var fe=-1,He=ne.length,ht=0,Pt=[];++fe<He;){var mr=ne[fe];(mr===pe||mr===f)&&(ne[fe]=f,Pt[ht++]=fe)}return Pt}function Pu(ne){var pe=-1,fe=Array(ne.size);return ne.forEach(function(He){fe[++pe]=He}),fe}function Gg(ne){var pe=-1,fe=Array(ne.size);return ne.forEach(function(He){fe[++pe]=[He,He]}),fe}function Kg(ne,pe,fe){for(var He=fe-1,ht=ne.length;++He<ht;)if(ne[He]===pe)return He;return-1}function Yg(ne,pe,fe){for(var He=fe+1;He--;)if(ne[He]===pe)return He;return He}function sa(ne){return ua(ne)?Jg(ne):Ig(ne)}function Pn(ne){return ua(ne)?Qg(ne):xg(ne)}function Tc(ne){for(var pe=ne.length;pe--&&ir.test(ne.charAt(pe)););return pe}var Zg=xo(Fg);function Jg(ne){for(var pe=Bo.lastIndex=0;Bo.test(ne);)++pe;return pe}function Qg(ne){return ne.match(Bo)||[]}function Xg(ne){return ne.match(bg)||[]}var ev=function ne(pe){pe=pe==null?Mr:oa.defaults(Mr.Object(),pe,oa.pick(Mr,wg));var fe=pe.Array,He=pe.Date,ht=pe.Error,Pt=pe.Function,mr=pe.Math,Lt=pe.Object,Vo=pe.RegExp,tv=pe.String,yn=pe.TypeError,ku=fe.prototype,rv=Pt.prototype,la=Lt.prototype,Tu=pe["__core-js_shared__"],Iu=rv.toString,xt=la.hasOwnProperty,nv=0,Ic=function(){var u=/[^.]+$/.exec(Tu&&Tu.keys&&Tu.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),xu=la.toString,iv=Iu.call(Lt),av=Mr._,uv=Vo("^"+Iu.call(xt).replace(Ui,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nu=mc?pe.Buffer:r,yi=pe.Symbol,Lu=pe.Uint8Array,xc=Nu?Nu.allocUnsafe:r,Ru=kc(Lt.getPrototypeOf,Lt),Nc=Lt.create,Lc=la.propertyIsEnumerable,Uu=ku.splice,Rc=yi?yi.isConcatSpreadable:r,Za=yi?yi.iterator:r,Wi=yi?yi.toStringTag:r,Vu=function(){try{var u=Yi(Lt,"defineProperty");return u({},"",{}),u}catch{}}(),sv=pe.clearTimeout!==Mr.clearTimeout&&pe.clearTimeout,ov=He&&He.now!==Mr.Date.now&&He.now,lv=pe.setTimeout!==Mr.setTimeout&&pe.setTimeout,ju=mr.ceil,zu=mr.floor,jo=Lt.getOwnPropertySymbols,fv=Nu?Nu.isBuffer:r,Uc=pe.isFinite,cv=ku.join,hv=kc(Lt.keys,Lt),_r=mr.max,Ur=mr.min,dv=He.now,pv=pe.parseInt,Vc=mr.random,gv=ku.reverse,zo=Yi(pe,"DataView"),Ja=Yi(pe,"Map"),qo=Yi(pe,"Promise"),fa=Yi(pe,"Set"),Qa=Yi(pe,"WeakMap"),Xa=Yi(Lt,"create"),qu=Qa&&new Qa,ca={},vv=Zi(zo),mv=Zi(Ja),_v=Zi(qo),bv=Zi(fa),Dv=Zi(Qa),Wu=yi?yi.prototype:r,eu=Wu?Wu.valueOf:r,jc=Wu?Wu.toString:r;function N(u){if(ar(u)&&!dt(u)&&!(u instanceof Et)){if(u instanceof wn)return u;if(xt.call(u,"__wrapped__"))return zh(u)}return new wn(u)}var ha=function(){function u(){}return function(h){if(!Zt(h))return{};if(Nc)return Nc(h);u.prototype=h;var _=new u;return u.prototype=r,_}}();function Hu(){}function wn(u,h){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=r}N.templateSettings={escape:vr,evaluate:On,interpolate:Qn,variable:"",imports:{_:N}},N.prototype=Hu.prototype,N.prototype.constructor=N,wn.prototype=ha(Hu.prototype),wn.prototype.constructor=wn;function Et(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}function yv(){var u=new Et(this.__wrapped__);return u.__actions__=Qr(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Qr(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Qr(this.__views__),u}function wv(){if(this.__filtered__){var u=new Et(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function Ev(){var u=this.__wrapped__.value(),h=this.__dir__,_=dt(u),E=h<0,I=_?u.length:0,U=xm(0,I,this.__views__),J=U.start,ee=U.end,ae=ee-J,ye=E?ee:J-1,we=this.__iteratees__,Oe=we.length,Re=0,Ge=Ur(ae,this.__takeCount__);if(!_||!E&&I==ae&&Ge==ae)return ch(u,this.__actions__);var at=[];e:for(;ae--&&Re<Ge;){ye+=h;for(var Dt=-1,ut=u[ye];++Dt<Oe;){var wt=we[Dt],Ct=wt.iteratee,dn=wt.type,Kr=Ct(ut);if(dn==q)ut=Kr;else if(!Kr){if(dn==V)continue e;break e}}at[Re++]=ut}return at}Et.prototype=ha(Hu.prototype),Et.prototype.constructor=Et;function Hi(u){var h=-1,_=u==null?0:u.length;for(this.clear();++h<_;){var E=u[h];this.set(E[0],E[1])}}function Av(){this.__data__=Xa?Xa(null):{},this.size=0}function Cv(u){var h=this.has(u)&&delete this.__data__[u];return this.size-=h?1:0,h}function Fv(u){var h=this.__data__;if(Xa){var _=h[u];return _===l?r:_}return xt.call(h,u)?h[u]:r}function Sv(u){var h=this.__data__;return Xa?h[u]!==r:xt.call(h,u)}function Bv(u,h){var _=this.__data__;return this.size+=this.has(u)?0:1,_[u]=Xa&&h===r?l:h,this}Hi.prototype.clear=Av,Hi.prototype.delete=Cv,Hi.prototype.get=Fv,Hi.prototype.has=Sv,Hi.prototype.set=Bv;function ti(u){var h=-1,_=u==null?0:u.length;for(this.clear();++h<_;){var E=u[h];this.set(E[0],E[1])}}function Ov(){this.__data__=[],this.size=0}function Mv(u){var h=this.__data__,_=$u(h,u);if(_<0)return!1;var E=h.length-1;return _==E?h.pop():Uu.call(h,_,1),--this.size,!0}function Pv(u){var h=this.__data__,_=$u(h,u);return _<0?r:h[_][1]}function kv(u){return $u(this.__data__,u)>-1}function Tv(u,h){var _=this.__data__,E=$u(_,u);return E<0?(++this.size,_.push([u,h])):_[E][1]=h,this}ti.prototype.clear=Ov,ti.prototype.delete=Mv,ti.prototype.get=Pv,ti.prototype.has=kv,ti.prototype.set=Tv;function ri(u){var h=-1,_=u==null?0:u.length;for(this.clear();++h<_;){var E=u[h];this.set(E[0],E[1])}}function Iv(){this.size=0,this.__data__={hash:new Hi,map:new(Ja||ti),string:new Hi}}function xv(u){var h=is(this,u).delete(u);return this.size-=h?1:0,h}function Nv(u){return is(this,u).get(u)}function Lv(u){return is(this,u).has(u)}function Rv(u,h){var _=is(this,u),E=_.size;return _.set(u,h),this.size+=_.size==E?0:1,this}ri.prototype.clear=Iv,ri.prototype.delete=xv,ri.prototype.get=Nv,ri.prototype.has=Lv,ri.prototype.set=Rv;function $i(u){var h=-1,_=u==null?0:u.length;for(this.__data__=new ri;++h<_;)this.add(u[h])}function Uv(u){return this.__data__.set(u,l),this}function Vv(u){return this.__data__.has(u)}$i.prototype.add=$i.prototype.push=Uv,$i.prototype.has=Vv;function kn(u){var h=this.__data__=new ti(u);this.size=h.size}function jv(){this.__data__=new ti,this.size=0}function zv(u){var h=this.__data__,_=h.delete(u);return this.size=h.size,_}function qv(u){return this.__data__.get(u)}function Wv(u){return this.__data__.has(u)}function Hv(u,h){var _=this.__data__;if(_ instanceof ti){var E=_.__data__;if(!Ja||E.length<i-1)return E.push([u,h]),this.size=++_.size,this;_=this.__data__=new ri(E)}return _.set(u,h),this.size=_.size,this}kn.prototype.clear=jv,kn.prototype.delete=zv,kn.prototype.get=qv,kn.prototype.has=Wv,kn.prototype.set=Hv;function zc(u,h){var _=dt(u),E=!_&&Ji(u),I=!_&&!E&&Fi(u),U=!_&&!E&&!I&&va(u),J=_||E||I||U,ee=J?Lo(u.length,tv):[],ae=ee.length;for(var ye in u)(h||xt.call(u,ye))&&!(J&&(ye=="length"||I&&(ye=="offset"||ye=="parent")||U&&(ye=="buffer"||ye=="byteLength"||ye=="byteOffset")||ui(ye,ae)))&&ee.push(ye);return ee}function qc(u){var h=u.length;return h?u[el(0,h-1)]:r}function $v(u,h){return as(Qr(u),Gi(h,0,u.length))}function Gv(u){return as(Qr(u))}function Wo(u,h,_){(_!==r&&!Tn(u[h],_)||_===r&&!(h in u))&&ni(u,h,_)}function tu(u,h,_){var E=u[h];(!(xt.call(u,h)&&Tn(E,_))||_===r&&!(h in u))&&ni(u,h,_)}function $u(u,h){for(var _=u.length;_--;)if(Tn(u[_][0],h))return _;return-1}function Kv(u,h,_,E){return wi(u,function(I,U,J){h(E,I,_(I),J)}),E}function Wc(u,h){return u&&Hn(h,Fr(h),u)}function Yv(u,h){return u&&Hn(h,en(h),u)}function ni(u,h,_){h=="__proto__"&&Vu?Vu(u,h,{configurable:!0,enumerable:!0,value:_,writable:!0}):u[h]=_}function Ho(u,h){for(var _=-1,E=h.length,I=fe(E),U=u==null;++_<E;)I[_]=U?r:Cl(u,h[_]);return I}function Gi(u,h,_){return u===u&&(_!==r&&(u=u<=_?u:_),h!==r&&(u=u>=h?u:h)),u}function En(u,h,_,E,I,U){var J,ee=h&c,ae=h&d,ye=h&g;if(_&&(J=I?_(u,E,I,U):_(u)),J!==r)return J;if(!Zt(u))return u;var we=dt(u);if(we){if(J=Lm(u),!ee)return Qr(u,J)}else{var Oe=Vr(u),Re=Oe==bt||Oe==Ue;if(Fi(u))return ph(u,ee);if(Oe==Mt||Oe==Te||Re&&!I){if(J=ae||Re?{}:Th(u),!ee)return ae?Fm(u,Yv(J,u)):Cm(u,Wc(J,u))}else{if(!Vt[Oe])return I?u:{};J=Rm(u,Oe,ee)}}U||(U=new kn);var Ge=U.get(u);if(Ge)return Ge;U.set(u,J),o0(u)?u.forEach(function(ut){J.add(En(ut,h,_,ut,u,U))}):u0(u)&&u.forEach(function(ut,wt){J.set(wt,En(ut,h,_,wt,u,U))});var at=ye?ae?cl:fl:ae?en:Fr,Dt=we?r:at(u);return Dn(Dt||u,function(ut,wt){Dt&&(wt=ut,ut=u[wt]),tu(J,wt,En(ut,h,_,wt,u,U))}),J}function Zv(u){var h=Fr(u);return function(_){return Hc(_,u,h)}}function Hc(u,h,_){var E=_.length;if(u==null)return!E;for(u=Lt(u);E--;){var I=_[E],U=h[I],J=u[I];if(J===r&&!(I in u)||!U(J))return!1}return!0}function $c(u,h,_){if(typeof u!="function")throw new yn(o);return ou(function(){u.apply(r,_)},h)}function ru(u,h,_,E){var I=-1,U=Ou,J=!0,ee=u.length,ae=[],ye=h.length;if(!ee)return ae;_&&(h=Ht(h,fn(_))),E?(U=Po,J=!1):h.length>=i&&(U=Ya,J=!1,h=new $i(h));e:for(;++I<ee;){var we=u[I],Oe=_==null?we:_(we);if(we=E||we!==0?we:0,J&&Oe===Oe){for(var Re=ye;Re--;)if(h[Re]===Oe)continue e;ae.push(we)}else U(h,Oe,E)||ae.push(we)}return ae}var wi=bh(Wn),Gc=bh(Go,!0);function Jv(u,h){var _=!0;return wi(u,function(E,I,U){return _=!!h(E,I,U),_}),_}function Gu(u,h,_){for(var E=-1,I=u.length;++E<I;){var U=u[E],J=h(U);if(J!=null&&(ee===r?J===J&&!hn(J):_(J,ee)))var ee=J,ae=U}return ae}function Qv(u,h,_,E){var I=u.length;for(_=_t(_),_<0&&(_=-_>I?0:I+_),E=E===r||E>I?I:_t(E),E<0&&(E+=I),E=_>E?0:f0(E);_<E;)u[_++]=h;return u}function Kc(u,h){var _=[];return wi(u,function(E,I,U){h(E,I,U)&&_.push(E)}),_}function Pr(u,h,_,E,I){var U=-1,J=u.length;for(_||(_=Vm),I||(I=[]);++U<J;){var ee=u[U];h>0&&_(ee)?h>1?Pr(ee,h-1,_,E,I):bi(I,ee):E||(I[I.length]=ee)}return I}var $o=Dh(),Yc=Dh(!0);function Wn(u,h){return u&&$o(u,h,Fr)}function Go(u,h){return u&&Yc(u,h,Fr)}function Ku(u,h){return _i(h,function(_){return si(u[_])})}function Ki(u,h){h=Ai(h,u);for(var _=0,E=h.length;u!=null&&_<E;)u=u[$n(h[_++])];return _&&_==E?u:r}function Zc(u,h,_){var E=h(u);return dt(u)?E:bi(E,_(u))}function $r(u){return u==null?u===r?Y:yr:Wi&&Wi in Lt(u)?Im(u):Gm(u)}function Ko(u,h){return u>h}function Xv(u,h){return u!=null&&xt.call(u,h)}function em(u,h){return u!=null&&h in Lt(u)}function tm(u,h,_){return u>=Ur(h,_)&&u<_r(h,_)}function Yo(u,h,_){for(var E=_?Po:Ou,I=u[0].length,U=u.length,J=U,ee=fe(U),ae=1/0,ye=[];J--;){var we=u[J];J&&h&&(we=Ht(we,fn(h))),ae=Ur(we.length,ae),ee[J]=!_&&(h||I>=120&&we.length>=120)?new $i(J&&we):r}we=u[0];var Oe=-1,Re=ee[0];e:for(;++Oe<I&&ye.length<ae;){var Ge=we[Oe],at=h?h(Ge):Ge;if(Ge=_||Ge!==0?Ge:0,!(Re?Ya(Re,at):E(ye,at,_))){for(J=U;--J;){var Dt=ee[J];if(!(Dt?Ya(Dt,at):E(u[J],at,_)))continue e}Re&&Re.push(at),ye.push(Ge)}}return ye}function rm(u,h,_,E){return Wn(u,function(I,U,J){h(E,_(I),U,J)}),E}function nu(u,h,_){h=Ai(h,u),u=Lh(u,h);var E=u==null?u:u[$n(Cn(h))];return E==null?r:ln(E,u,_)}function Jc(u){return ar(u)&&$r(u)==Te}function nm(u){return ar(u)&&$r(u)==ue}function im(u){return ar(u)&&$r(u)==Qe}function iu(u,h,_,E,I){return u===h?!0:u==null||h==null||!ar(u)&&!ar(h)?u!==u&&h!==h:am(u,h,_,E,iu,I)}function am(u,h,_,E,I,U){var J=dt(u),ee=dt(h),ae=J?Le:Vr(u),ye=ee?Le:Vr(h);ae=ae==Te?Mt:ae,ye=ye==Te?Mt:ye;var we=ae==Mt,Oe=ye==Mt,Re=ae==ye;if(Re&&Fi(u)){if(!Fi(h))return!1;J=!0,we=!1}if(Re&&!we)return U||(U=new kn),J||va(u)?Mh(u,h,_,E,I,U):km(u,h,ae,_,E,I,U);if(!(_&b)){var Ge=we&&xt.call(u,"__wrapped__"),at=Oe&&xt.call(h,"__wrapped__");if(Ge||at){var Dt=Ge?u.value():u,ut=at?h.value():h;return U||(U=new kn),I(Dt,ut,_,E,U)}}return Re?(U||(U=new kn),Tm(u,h,_,E,I,U)):!1}function um(u){return ar(u)&&Vr(u)==lt}function Zo(u,h,_,E){var I=_.length,U=I,J=!E;if(u==null)return!U;for(u=Lt(u);I--;){var ee=_[I];if(J&&ee[2]?ee[1]!==u[ee[0]]:!(ee[0]in u))return!1}for(;++I<U;){ee=_[I];var ae=ee[0],ye=u[ae],we=ee[1];if(J&&ee[2]){if(ye===r&&!(ae in u))return!1}else{var Oe=new kn;if(E)var Re=E(ye,we,ae,u,h,Oe);if(!(Re===r?iu(we,ye,b|v,E,Oe):Re))return!1}}return!0}function Qc(u){if(!Zt(u)||zm(u))return!1;var h=si(u)?uv:Va;return h.test(Zi(u))}function sm(u){return ar(u)&&$r(u)==tr}function om(u){return ar(u)&&Vr(u)==rr}function lm(u){return ar(u)&&cs(u.length)&&!!jt[$r(u)]}function Xc(u){return typeof u=="function"?u:u==null?tn:typeof u=="object"?dt(u)?rh(u[0],u[1]):th(u):y0(u)}function Jo(u){if(!su(u))return hv(u);var h=[];for(var _ in Lt(u))xt.call(u,_)&&_!="constructor"&&h.push(_);return h}function fm(u){if(!Zt(u))return $m(u);var h=su(u),_=[];for(var E in u)E=="constructor"&&(h||!xt.call(u,E))||_.push(E);return _}function Qo(u,h){return u<h}function eh(u,h){var _=-1,E=Xr(u)?fe(u.length):[];return wi(u,function(I,U,J){E[++_]=h(I,U,J)}),E}function th(u){var h=dl(u);return h.length==1&&h[0][2]?xh(h[0][0],h[0][1]):function(_){return _===u||Zo(_,u,h)}}function rh(u,h){return gl(u)&&Ih(h)?xh($n(u),h):function(_){var E=Cl(_,u);return E===r&&E===h?Fl(_,u):iu(h,E,b|v)}}function Yu(u,h,_,E,I){u!==h&&$o(h,function(U,J){if(I||(I=new kn),Zt(U))cm(u,h,J,_,Yu,E,I);else{var ee=E?E(ml(u,J),U,J+"",u,h,I):r;ee===r&&(ee=U),Wo(u,J,ee)}},en)}function cm(u,h,_,E,I,U,J){var ee=ml(u,_),ae=ml(h,_),ye=J.get(ae);if(ye){Wo(u,_,ye);return}var we=U?U(ee,ae,_+"",u,h,J):r,Oe=we===r;if(Oe){var Re=dt(ae),Ge=!Re&&Fi(ae),at=!Re&&!Ge&&va(ae);we=ae,Re||Ge||at?dt(ee)?we=ee:cr(ee)?we=Qr(ee):Ge?(Oe=!1,we=ph(ae,!0)):at?(Oe=!1,we=gh(ae,!0)):we=[]:lu(ae)||Ji(ae)?(we=ee,Ji(ee)?we=c0(ee):(!Zt(ee)||si(ee))&&(we=Th(ae))):Oe=!1}Oe&&(J.set(ae,we),I(we,ae,E,U,J),J.delete(ae)),Wo(u,_,we)}function nh(u,h){var _=u.length;if(_)return h+=h<0?_:0,ui(h,_)?u[h]:r}function ih(u,h,_){h.length?h=Ht(h,function(U){return dt(U)?function(J){return Ki(J,U.length===1?U[0]:U)}:U}):h=[tn];var E=-1;h=Ht(h,fn(rt()));var I=eh(u,function(U,J,ee){var ae=Ht(h,function(ye){return ye(U)});return{criteria:ae,index:++E,value:U}});return Rg(I,function(U,J){return Am(U,J,_)})}function hm(u,h){return ah(u,h,function(_,E){return Fl(u,E)})}function ah(u,h,_){for(var E=-1,I=h.length,U={};++E<I;){var J=h[E],ee=Ki(u,J);_(ee,J)&&au(U,Ai(J,u),ee)}return U}function dm(u){return function(h){return Ki(h,u)}}function Xo(u,h,_,E){var I=E?Lg:aa,U=-1,J=h.length,ee=u;for(u===h&&(h=Qr(h)),_&&(ee=Ht(u,fn(_)));++U<J;)for(var ae=0,ye=h[U],we=_?_(ye):ye;(ae=I(ee,we,ae,E))>-1;)ee!==u&&Uu.call(ee,ae,1),Uu.call(u,ae,1);return u}function uh(u,h){for(var _=u?h.length:0,E=_-1;_--;){var I=h[_];if(_==E||I!==U){var U=I;ui(I)?Uu.call(u,I,1):nl(u,I)}}return u}function el(u,h){return u+zu(Vc()*(h-u+1))}function pm(u,h,_,E){for(var I=-1,U=_r(ju((h-u)/(_||1)),0),J=fe(U);U--;)J[E?U:++I]=u,u+=_;return J}function tl(u,h){var _="";if(!u||h<1||h>X)return _;do h%2&&(_+=u),h=zu(h/2),h&&(u+=u);while(h);return _}function yt(u,h){return _l(Nh(u,h,tn),u+"")}function gm(u){return qc(ma(u))}function vm(u,h){var _=ma(u);return as(_,Gi(h,0,_.length))}function au(u,h,_,E){if(!Zt(u))return u;h=Ai(h,u);for(var I=-1,U=h.length,J=U-1,ee=u;ee!=null&&++I<U;){var ae=$n(h[I]),ye=_;if(ae==="__proto__"||ae==="constructor"||ae==="prototype")return u;if(I!=J){var we=ee[ae];ye=E?E(we,ae,ee):r,ye===r&&(ye=Zt(we)?we:ui(h[I+1])?[]:{})}tu(ee,ae,ye),ee=ee[ae]}return u}var sh=qu?function(u,h){return qu.set(u,h),u}:tn,mm=Vu?function(u,h){return Vu(u,"toString",{configurable:!0,enumerable:!1,value:Bl(h),writable:!0})}:tn;function _m(u){return as(ma(u))}function An(u,h,_){var E=-1,I=u.length;h<0&&(h=-h>I?0:I+h),_=_>I?I:_,_<0&&(_+=I),I=h>_?0:_-h>>>0,h>>>=0;for(var U=fe(I);++E<I;)U[E]=u[E+h];return U}function bm(u,h){var _;return wi(u,function(E,I,U){return _=h(E,I,U),!_}),!!_}function Zu(u,h,_){var E=0,I=u==null?E:u.length;if(typeof h=="number"&&h===h&&I<=Be){for(;E<I;){var U=E+I>>>1,J=u[U];J!==null&&!hn(J)&&(_?J<=h:J<h)?E=U+1:I=U}return I}return rl(u,h,tn,_)}function rl(u,h,_,E){var I=0,U=u==null?0:u.length;if(U===0)return 0;h=_(h);for(var J=h!==h,ee=h===null,ae=hn(h),ye=h===r;I<U;){var we=zu((I+U)/2),Oe=_(u[we]),Re=Oe!==r,Ge=Oe===null,at=Oe===Oe,Dt=hn(Oe);if(J)var ut=E||at;else ye?ut=at&&(E||Re):ee?ut=at&&Re&&(E||!Ge):ae?ut=at&&Re&&!Ge&&(E||!Dt):Ge||Dt?ut=!1:ut=E?Oe<=h:Oe<h;ut?I=we+1:U=we}return Ur(U,be)}function oh(u,h){for(var _=-1,E=u.length,I=0,U=[];++_<E;){var J=u[_],ee=h?h(J):J;if(!_||!Tn(ee,ae)){var ae=ee;U[I++]=J===0?0:J}}return U}function lh(u){return typeof u=="number"?u:hn(u)?oe:+u}function cn(u){if(typeof u=="string")return u;if(dt(u))return Ht(u,cn)+"";if(hn(u))return jc?jc.call(u):"";var h=u+"";return h=="0"&&1/u==-Q?"-0":h}function Ei(u,h,_){var E=-1,I=Ou,U=u.length,J=!0,ee=[],ae=ee;if(_)J=!1,I=Po;else if(U>=i){var ye=h?null:Mm(u);if(ye)return Pu(ye);J=!1,I=Ya,ae=new $i}else ae=h?[]:ee;e:for(;++E<U;){var we=u[E],Oe=h?h(we):we;if(we=_||we!==0?we:0,J&&Oe===Oe){for(var Re=ae.length;Re--;)if(ae[Re]===Oe)continue e;h&&ae.push(Oe),ee.push(we)}else I(ae,Oe,_)||(ae!==ee&&ae.push(Oe),ee.push(we))}return ee}function nl(u,h){return h=Ai(h,u),u=Lh(u,h),u==null||delete u[$n(Cn(h))]}function fh(u,h,_,E){return au(u,h,_(Ki(u,h)),E)}function Ju(u,h,_,E){for(var I=u.length,U=E?I:-1;(E?U--:++U<I)&&h(u[U],U,u););return _?An(u,E?0:U,E?U+1:I):An(u,E?U+1:0,E?I:U)}function ch(u,h){var _=u;return _ instanceof Et&&(_=_.value()),ko(h,function(E,I){return I.func.apply(I.thisArg,bi([E],I.args))},_)}function il(u,h,_){var E=u.length;if(E<2)return E?Ei(u[0]):[];for(var I=-1,U=fe(E);++I<E;)for(var J=u[I],ee=-1;++ee<E;)ee!=I&&(U[I]=ru(U[I]||J,u[ee],h,_));return Ei(Pr(U,1),h,_)}function hh(u,h,_){for(var E=-1,I=u.length,U=h.length,J={};++E<I;){var ee=E<U?h[E]:r;_(J,u[E],ee)}return J}function al(u){return cr(u)?u:[]}function ul(u){return typeof u=="function"?u:tn}function Ai(u,h){return dt(u)?u:gl(u,h)?[u]:jh(Tt(u))}var Dm=yt;function Ci(u,h,_){var E=u.length;return _=_===r?E:_,!h&&_>=E?u:An(u,h,_)}var dh=sv||function(u){return Mr.clearTimeout(u)};function ph(u,h){if(h)return u.slice();var _=u.length,E=xc?xc(_):new u.constructor(_);return u.copy(E),E}function sl(u){var h=new u.constructor(u.byteLength);return new Lu(h).set(new Lu(u)),h}function ym(u,h){var _=h?sl(u.buffer):u.buffer;return new u.constructor(_,u.byteOffset,u.byteLength)}function wm(u){var h=new u.constructor(u.source,ra.exec(u));return h.lastIndex=u.lastIndex,h}function Em(u){return eu?Lt(eu.call(u)):{}}function gh(u,h){var _=h?sl(u.buffer):u.buffer;return new u.constructor(_,u.byteOffset,u.length)}function vh(u,h){if(u!==h){var _=u!==r,E=u===null,I=u===u,U=hn(u),J=h!==r,ee=h===null,ae=h===h,ye=hn(h);if(!ee&&!ye&&!U&&u>h||U&&J&&ae&&!ee&&!ye||E&&J&&ae||!_&&ae||!I)return 1;if(!E&&!U&&!ye&&u<h||ye&&_&&I&&!E&&!U||ee&&_&&I||!J&&I||!ae)return-1}return 0}function Am(u,h,_){for(var E=-1,I=u.criteria,U=h.criteria,J=I.length,ee=_.length;++E<J;){var ae=vh(I[E],U[E]);if(ae){if(E>=ee)return ae;var ye=_[E];return ae*(ye=="desc"?-1:1)}}return u.index-h.index}function mh(u,h,_,E){for(var I=-1,U=u.length,J=_.length,ee=-1,ae=h.length,ye=_r(U-J,0),we=fe(ae+ye),Oe=!E;++ee<ae;)we[ee]=h[ee];for(;++I<J;)(Oe||I<U)&&(we[_[I]]=u[I]);for(;ye--;)we[ee++]=u[I++];return we}function _h(u,h,_,E){for(var I=-1,U=u.length,J=-1,ee=_.length,ae=-1,ye=h.length,we=_r(U-ee,0),Oe=fe(we+ye),Re=!E;++I<we;)Oe[I]=u[I];for(var Ge=I;++ae<ye;)Oe[Ge+ae]=h[ae];for(;++J<ee;)(Re||I<U)&&(Oe[Ge+_[J]]=u[I++]);return Oe}function Qr(u,h){var _=-1,E=u.length;for(h||(h=fe(E));++_<E;)h[_]=u[_];return h}function Hn(u,h,_,E){var I=!_;_||(_={});for(var U=-1,J=h.length;++U<J;){var ee=h[U],ae=E?E(_[ee],u[ee],ee,_,u):r;ae===r&&(ae=u[ee]),I?ni(_,ee,ae):tu(_,ee,ae)}return _}function Cm(u,h){return Hn(u,pl(u),h)}function Fm(u,h){return Hn(u,Ph(u),h)}function Qu(u,h){return function(_,E){var I=dt(_)?Pg:Kv,U=h?h():{};return I(_,u,rt(E,2),U)}}function da(u){return yt(function(h,_){var E=-1,I=_.length,U=I>1?_[I-1]:r,J=I>2?_[2]:r;for(U=u.length>3&&typeof U=="function"?(I--,U):r,J&&Gr(_[0],_[1],J)&&(U=I<3?r:U,I=1),h=Lt(h);++E<I;){var ee=_[E];ee&&u(h,ee,E,U)}return h})}function bh(u,h){return function(_,E){if(_==null)return _;if(!Xr(_))return u(_,E);for(var I=_.length,U=h?I:-1,J=Lt(_);(h?U--:++U<I)&&E(J[U],U,J)!==!1;);return _}}function Dh(u){return function(h,_,E){for(var I=-1,U=Lt(h),J=E(h),ee=J.length;ee--;){var ae=J[u?ee:++I];if(_(U[ae],ae,U)===!1)break}return h}}function Sm(u,h,_){var E=h&m,I=uu(u);function U(){var J=this&&this!==Mr&&this instanceof U?I:u;return J.apply(E?_:this,arguments)}return U}function yh(u){return function(h){h=Tt(h);var _=ua(h)?Pn(h):r,E=_?_[0]:h.charAt(0),I=_?Ci(_,1).join(""):h.slice(1);return E[u]()+I}}function pa(u){return function(h){return ko(b0(_0(h).replace(mg,"")),u,"")}}function uu(u){return function(){var h=arguments;switch(h.length){case 0:return new u;case 1:return new u(h[0]);case 2:return new u(h[0],h[1]);case 3:return new u(h[0],h[1],h[2]);case 4:return new u(h[0],h[1],h[2],h[3]);case 5:return new u(h[0],h[1],h[2],h[3],h[4]);case 6:return new u(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new u(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var _=ha(u.prototype),E=u.apply(_,h);return Zt(E)?E:_}}function Bm(u,h,_){var E=uu(u);function I(){for(var U=arguments.length,J=fe(U),ee=U,ae=ga(I);ee--;)J[ee]=arguments[ee];var ye=U<3&&J[0]!==ae&&J[U-1]!==ae?[]:Di(J,ae);if(U-=ye.length,U<_)return Fh(u,h,Xu,I.placeholder,r,J,ye,r,r,_-U);var we=this&&this!==Mr&&this instanceof I?E:u;return ln(we,this,J)}return I}function wh(u){return function(h,_,E){var I=Lt(h);if(!Xr(h)){var U=rt(_,3);h=Fr(h),_=function(ee){return U(I[ee],ee,I)}}var J=u(h,_,E);return J>-1?I[U?h[J]:J]:r}}function Eh(u){return ai(function(h){var _=h.length,E=_,I=wn.prototype.thru;for(u&&h.reverse();E--;){var U=h[E];if(typeof U!="function")throw new yn(o);if(I&&!J&&ns(U)=="wrapper")var J=new wn([],!0)}for(E=J?E:_;++E<_;){U=h[E];var ee=ns(U),ae=ee=="wrapper"?hl(U):r;ae&&vl(ae[0])&&ae[1]==(P|w|F|A)&&!ae[4].length&&ae[9]==1?J=J[ns(ae[0])].apply(J,ae[3]):J=U.length==1&&vl(U)?J[ee]():J.thru(U)}return function(){var ye=arguments,we=ye[0];if(J&&ye.length==1&&dt(we))return J.plant(we).value();for(var Oe=0,Re=_?h[Oe].apply(this,ye):we;++Oe<_;)Re=h[Oe].call(this,Re);return Re}})}function Xu(u,h,_,E,I,U,J,ee,ae,ye){var we=h&P,Oe=h&m,Re=h&D,Ge=h&(w|C),at=h&x,Dt=Re?r:uu(u);function ut(){for(var wt=arguments.length,Ct=fe(wt),dn=wt;dn--;)Ct[dn]=arguments[dn];if(Ge)var Kr=ga(ut),pn=Vg(Ct,Kr);if(E&&(Ct=mh(Ct,E,I,Ge)),U&&(Ct=_h(Ct,U,J,Ge)),wt-=pn,Ge&&wt<ye){var hr=Di(Ct,Kr);return Fh(u,h,Xu,ut.placeholder,_,Ct,hr,ee,ae,ye-wt)}var In=Oe?_:this,li=Re?In[u]:u;return wt=Ct.length,ee?Ct=Km(Ct,ee):at&&wt>1&&Ct.reverse(),we&&ae<wt&&(Ct.length=ae),this&&this!==Mr&&this instanceof ut&&(li=Dt||uu(li)),li.apply(In,Ct)}return ut}function Ah(u,h){return function(_,E){return rm(_,u,h(E),{})}}function es(u,h){return function(_,E){var I;if(_===r&&E===r)return h;if(_!==r&&(I=_),E!==r){if(I===r)return E;typeof _=="string"||typeof E=="string"?(_=cn(_),E=cn(E)):(_=lh(_),E=lh(E)),I=u(_,E)}return I}}function ol(u){return ai(function(h){return h=Ht(h,fn(rt())),yt(function(_){var E=this;return u(h,function(I){return ln(I,E,_)})})})}function ts(u,h){h=h===r?" ":cn(h);var _=h.length;if(_<2)return _?tl(h,u):h;var E=tl(h,ju(u/sa(h)));return ua(h)?Ci(Pn(E),0,u).join(""):E.slice(0,u)}function Om(u,h,_,E){var I=h&m,U=uu(u);function J(){for(var ee=-1,ae=arguments.length,ye=-1,we=E.length,Oe=fe(we+ae),Re=this&&this!==Mr&&this instanceof J?U:u;++ye<we;)Oe[ye]=E[ye];for(;ae--;)Oe[ye++]=arguments[++ee];return ln(Re,I?_:this,Oe)}return J}function Ch(u){return function(h,_,E){return E&&typeof E!="number"&&Gr(h,_,E)&&(_=E=r),h=oi(h),_===r?(_=h,h=0):_=oi(_),E=E===r?h<_?1:-1:oi(E),pm(h,_,E,u)}}function rs(u){return function(h,_){return typeof h=="string"&&typeof _=="string"||(h=Fn(h),_=Fn(_)),u(h,_)}}function Fh(u,h,_,E,I,U,J,ee,ae,ye){var we=h&w,Oe=we?J:r,Re=we?r:J,Ge=we?U:r,at=we?r:U;h|=we?F:M,h&=~(we?M:F),h&S||(h&=~(m|D));var Dt=[u,h,I,Ge,Oe,at,Re,ee,ae,ye],ut=_.apply(r,Dt);return vl(u)&&Rh(ut,Dt),ut.placeholder=E,Uh(ut,u,h)}function ll(u){var h=mr[u];return function(_,E){if(_=Fn(_),E=E==null?0:Ur(_t(E),292),E&&Uc(_)){var I=(Tt(_)+"e").split("e"),U=h(I[0]+"e"+(+I[1]+E));return I=(Tt(U)+"e").split("e"),+(I[0]+"e"+(+I[1]-E))}return h(_)}}var Mm=fa&&1/Pu(new fa([,-0]))[1]==Q?function(u){return new fa(u)}:Pl;function Sh(u){return function(h){var _=Vr(h);return _==lt?Uo(h):_==rr?Gg(h):Ug(h,u(h))}}function ii(u,h,_,E,I,U,J,ee){var ae=h&D;if(!ae&&typeof u!="function")throw new yn(o);var ye=E?E.length:0;if(ye||(h&=~(F|M),E=I=r),J=J===r?J:_r(_t(J),0),ee=ee===r?ee:_t(ee),ye-=I?I.length:0,h&M){var we=E,Oe=I;E=I=r}var Re=ae?r:hl(u),Ge=[u,h,_,E,I,we,Oe,U,J,ee];if(Re&&Hm(Ge,Re),u=Ge[0],h=Ge[1],_=Ge[2],E=Ge[3],I=Ge[4],ee=Ge[9]=Ge[9]===r?ae?0:u.length:_r(Ge[9]-ye,0),!ee&&h&(w|C)&&(h&=~(w|C)),!h||h==m)var at=Sm(u,h,_);else h==w||h==C?at=Bm(u,h,ee):(h==F||h==(m|F))&&!I.length?at=Om(u,h,_,E):at=Xu.apply(r,Ge);var Dt=Re?sh:Rh;return Uh(Dt(at,Ge),u,h)}function Bh(u,h,_,E){return u===r||Tn(u,la[_])&&!xt.call(E,_)?h:u}function Oh(u,h,_,E,I,U){return Zt(u)&&Zt(h)&&(U.set(h,u),Yu(u,h,r,Oh,U),U.delete(h)),u}function Pm(u){return lu(u)?r:u}function Mh(u,h,_,E,I,U){var J=_&b,ee=u.length,ae=h.length;if(ee!=ae&&!(J&&ae>ee))return!1;var ye=U.get(u),we=U.get(h);if(ye&&we)return ye==h&&we==u;var Oe=-1,Re=!0,Ge=_&v?new $i:r;for(U.set(u,h),U.set(h,u);++Oe<ee;){var at=u[Oe],Dt=h[Oe];if(E)var ut=J?E(Dt,at,Oe,h,u,U):E(at,Dt,Oe,u,h,U);if(ut!==r){if(ut)continue;Re=!1;break}if(Ge){if(!To(h,function(wt,Ct){if(!Ya(Ge,Ct)&&(at===wt||I(at,wt,_,E,U)))return Ge.push(Ct)})){Re=!1;break}}else if(!(at===Dt||I(at,Dt,_,E,U))){Re=!1;break}}return U.delete(u),U.delete(h),Re}function km(u,h,_,E,I,U,J){switch(_){case ve:if(u.byteLength!=h.byteLength||u.byteOffset!=h.byteOffset)return!1;u=u.buffer,h=h.buffer;case ue:return!(u.byteLength!=h.byteLength||!U(new Lu(u),new Lu(h)));case Ye:case Qe:case kt:return Tn(+u,+h);case ot:return u.name==h.name&&u.message==h.message;case tr:case Jr:return u==h+"";case lt:var ee=Uo;case rr:var ae=E&b;if(ee||(ee=Pu),u.size!=h.size&&!ae)return!1;var ye=J.get(u);if(ye)return ye==h;E|=v,J.set(u,h);var we=Mh(ee(u),ee(h),E,I,U,J);return J.delete(u),we;case G:if(eu)return eu.call(u)==eu.call(h)}return!1}function Tm(u,h,_,E,I,U){var J=_&b,ee=fl(u),ae=ee.length,ye=fl(h),we=ye.length;if(ae!=we&&!J)return!1;for(var Oe=ae;Oe--;){var Re=ee[Oe];if(!(J?Re in h:xt.call(h,Re)))return!1}var Ge=U.get(u),at=U.get(h);if(Ge&&at)return Ge==h&&at==u;var Dt=!0;U.set(u,h),U.set(h,u);for(var ut=J;++Oe<ae;){Re=ee[Oe];var wt=u[Re],Ct=h[Re];if(E)var dn=J?E(Ct,wt,Re,h,u,U):E(wt,Ct,Re,u,h,U);if(!(dn===r?wt===Ct||I(wt,Ct,_,E,U):dn)){Dt=!1;break}ut||(ut=Re=="constructor")}if(Dt&&!ut){var Kr=u.constructor,pn=h.constructor;Kr!=pn&&"constructor"in u&&"constructor"in h&&!(typeof Kr=="function"&&Kr instanceof Kr&&typeof pn=="function"&&pn instanceof pn)&&(Dt=!1)}return U.delete(u),U.delete(h),Dt}function ai(u){return _l(Nh(u,r,Hh),u+"")}function fl(u){return Zc(u,Fr,pl)}function cl(u){return Zc(u,en,Ph)}var hl=qu?function(u){return qu.get(u)}:Pl;function ns(u){for(var h=u.name+"",_=ca[h],E=xt.call(ca,h)?_.length:0;E--;){var I=_[E],U=I.func;if(U==null||U==u)return I.name}return h}function ga(u){var h=xt.call(N,"placeholder")?N:u;return h.placeholder}function rt(){var u=N.iteratee||Ol;return u=u===Ol?Xc:u,arguments.length?u(arguments[0],arguments[1]):u}function is(u,h){var _=u.__data__;return jm(h)?_[typeof h=="string"?"string":"hash"]:_.map}function dl(u){for(var h=Fr(u),_=h.length;_--;){var E=h[_],I=u[E];h[_]=[E,I,Ih(I)]}return h}function Yi(u,h){var _=Wg(u,h);return Qc(_)?_:r}function Im(u){var h=xt.call(u,Wi),_=u[Wi];try{u[Wi]=r;var E=!0}catch{}var I=xu.call(u);return E&&(h?u[Wi]=_:delete u[Wi]),I}var pl=jo?function(u){return u==null?[]:(u=Lt(u),_i(jo(u),function(h){return Lc.call(u,h)}))}:kl,Ph=jo?function(u){for(var h=[];u;)bi(h,pl(u)),u=Ru(u);return h}:kl,Vr=$r;(zo&&Vr(new zo(new ArrayBuffer(1)))!=ve||Ja&&Vr(new Ja)!=lt||qo&&Vr(qo.resolve())!=wr||fa&&Vr(new fa)!=rr||Qa&&Vr(new Qa)!=ie)&&(Vr=function(u){var h=$r(u),_=h==Mt?u.constructor:r,E=_?Zi(_):"";if(E)switch(E){case vv:return ve;case mv:return lt;case _v:return wr;case bv:return rr;case Dv:return ie}return h});function xm(u,h,_){for(var E=-1,I=_.length;++E<I;){var U=_[E],J=U.size;switch(U.type){case"drop":u+=J;break;case"dropRight":h-=J;break;case"take":h=Ur(h,u+J);break;case"takeRight":u=_r(u,h-J);break}}return{start:u,end:h}}function Nm(u){var h=u.match(gi);return h?h[1].split(mn):[]}function kh(u,h,_){h=Ai(h,u);for(var E=-1,I=h.length,U=!1;++E<I;){var J=$n(h[E]);if(!(U=u!=null&&_(u,J)))break;u=u[J]}return U||++E!=I?U:(I=u==null?0:u.length,!!I&&cs(I)&&ui(J,I)&&(dt(u)||Ji(u)))}function Lm(u){var h=u.length,_=new u.constructor(h);return h&&typeof u[0]=="string"&&xt.call(u,"index")&&(_.index=u.index,_.input=u.input),_}function Th(u){return typeof u.constructor=="function"&&!su(u)?ha(Ru(u)):{}}function Rm(u,h,_){var E=u.constructor;switch(h){case ue:return sl(u);case Ye:case Qe:return new E(+u);case ve:return ym(u,_);case le:case he:case Me:case We:case ft:case Ie:case Gt:case Ut:case nr:return gh(u,_);case lt:return new E;case kt:case Jr:return new E(u);case tr:return wm(u);case rr:return new E;case G:return Em(u)}}function Um(u,h){var _=h.length;if(!_)return u;var E=_-1;return h[E]=(_>1?"& ":"")+h[E],h=h.join(_>2?", ":" "),u.replace(xa,`{
/* [wrapped with `+h+`] */
`)}function Vm(u){return dt(u)||Ji(u)||!!(Rc&&u&&u[Rc])}function ui(u,h){var _=typeof u;return h=h??X,!!h&&(_=="number"||_!="symbol"&&za.test(u))&&u>-1&&u%1==0&&u<h}function Gr(u,h,_){if(!Zt(_))return!1;var E=typeof h;return(E=="number"?Xr(_)&&ui(h,_.length):E=="string"&&h in _)?Tn(_[h],u):!1}function gl(u,h){if(dt(u))return!1;var _=typeof u;return _=="number"||_=="symbol"||_=="boolean"||u==null||hn(u)?!0:jn.test(u)||!Vn.test(u)||h!=null&&u in Lt(h)}function jm(u){var h=typeof u;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?u!=="__proto__":u===null}function vl(u){var h=ns(u),_=N[h];if(typeof _!="function"||!(h in Et.prototype))return!1;if(u===_)return!0;var E=hl(_);return!!E&&u===E[0]}function zm(u){return!!Ic&&Ic in u}var qm=Tu?si:Tl;function su(u){var h=u&&u.constructor,_=typeof h=="function"&&h.prototype||la;return u===_}function Ih(u){return u===u&&!Zt(u)}function xh(u,h){return function(_){return _==null?!1:_[u]===h&&(h!==r||u in Lt(_))}}function Wm(u){var h=ls(u,function(E){return _.size===p&&_.clear(),E}),_=h.cache;return h}function Hm(u,h){var _=u[1],E=h[1],I=_|E,U=I<(m|D|P),J=E==P&&_==w||E==P&&_==A&&u[7].length<=h[8]||E==(P|A)&&h[7].length<=h[8]&&_==w;if(!(U||J))return u;E&m&&(u[2]=h[2],I|=_&m?0:S);var ee=h[3];if(ee){var ae=u[3];u[3]=ae?mh(ae,ee,h[4]):ee,u[4]=ae?Di(u[3],f):h[4]}return ee=h[5],ee&&(ae=u[5],u[5]=ae?_h(ae,ee,h[6]):ee,u[6]=ae?Di(u[5],f):h[6]),ee=h[7],ee&&(u[7]=ee),E&P&&(u[8]=u[8]==null?h[8]:Ur(u[8],h[8])),u[9]==null&&(u[9]=h[9]),u[0]=h[0],u[1]=I,u}function $m(u){var h=[];if(u!=null)for(var _ in Lt(u))h.push(_);return h}function Gm(u){return xu.call(u)}function Nh(u,h,_){return h=_r(h===r?u.length-1:h,0),function(){for(var E=arguments,I=-1,U=_r(E.length-h,0),J=fe(U);++I<U;)J[I]=E[h+I];I=-1;for(var ee=fe(h+1);++I<h;)ee[I]=E[I];return ee[h]=_(J),ln(u,this,ee)}}function Lh(u,h){return h.length<2?u:Ki(u,An(h,0,-1))}function Km(u,h){for(var _=u.length,E=Ur(h.length,_),I=Qr(u);E--;){var U=h[E];u[E]=ui(U,_)?I[U]:r}return u}function ml(u,h){if(!(h==="constructor"&&typeof u[h]=="function")&&h!="__proto__")return u[h]}var Rh=Vh(sh),ou=lv||function(u,h){return Mr.setTimeout(u,h)},_l=Vh(mm);function Uh(u,h,_){var E=h+"";return _l(u,Um(E,Ym(Nm(E),_)))}function Vh(u){var h=0,_=0;return function(){var E=dv(),I=L-(E-_);if(_=E,I>0){if(++h>=K)return arguments[0]}else h=0;return u.apply(r,arguments)}}function as(u,h){var _=-1,E=u.length,I=E-1;for(h=h===r?E:h;++_<h;){var U=el(_,I),J=u[U];u[U]=u[_],u[_]=J}return u.length=h,u}var jh=Wm(function(u){var h=[];return u.charCodeAt(0)===46&&h.push(""),u.replace(ta,function(_,E,I,U){h.push(I?U.replace(Na,"$1"):E||_)}),h});function $n(u){if(typeof u=="string"||hn(u))return u;var h=u+"";return h=="0"&&1/u==-Q?"-0":h}function Zi(u){if(u!=null){try{return Iu.call(u)}catch{}try{return u+""}catch{}}return""}function Ym(u,h){return Dn(ke,function(_){var E="_."+_[0];h&_[1]&&!Ou(u,E)&&u.push(E)}),u.sort()}function zh(u){if(u instanceof Et)return u.clone();var h=new wn(u.__wrapped__,u.__chain__);return h.__actions__=Qr(u.__actions__),h.__index__=u.__index__,h.__values__=u.__values__,h}function Zm(u,h,_){(_?Gr(u,h,_):h===r)?h=1:h=_r(_t(h),0);var E=u==null?0:u.length;if(!E||h<1)return[];for(var I=0,U=0,J=fe(ju(E/h));I<E;)J[U++]=An(u,I,I+=h);return J}function Jm(u){for(var h=-1,_=u==null?0:u.length,E=0,I=[];++h<_;){var U=u[h];U&&(I[E++]=U)}return I}function Qm(){var u=arguments.length;if(!u)return[];for(var h=fe(u-1),_=arguments[0],E=u;E--;)h[E-1]=arguments[E];return bi(dt(_)?Qr(_):[_],Pr(h,1))}var Xm=yt(function(u,h){return cr(u)?ru(u,Pr(h,1,cr,!0)):[]}),e_=yt(function(u,h){var _=Cn(h);return cr(_)&&(_=r),cr(u)?ru(u,Pr(h,1,cr,!0),rt(_,2)):[]}),t_=yt(function(u,h){var _=Cn(h);return cr(_)&&(_=r),cr(u)?ru(u,Pr(h,1,cr,!0),r,_):[]});function r_(u,h,_){var E=u==null?0:u.length;return E?(h=_||h===r?1:_t(h),An(u,h<0?0:h,E)):[]}function n_(u,h,_){var E=u==null?0:u.length;return E?(h=_||h===r?1:_t(h),h=E-h,An(u,0,h<0?0:h)):[]}function i_(u,h){return u&&u.length?Ju(u,rt(h,3),!0,!0):[]}function a_(u,h){return u&&u.length?Ju(u,rt(h,3),!0):[]}function u_(u,h,_,E){var I=u==null?0:u.length;return I?(_&&typeof _!="number"&&Gr(u,h,_)&&(_=0,E=I),Qv(u,h,_,E)):[]}function qh(u,h,_){var E=u==null?0:u.length;if(!E)return-1;var I=_==null?0:_t(_);return I<0&&(I=_r(E+I,0)),Mu(u,rt(h,3),I)}function Wh(u,h,_){var E=u==null?0:u.length;if(!E)return-1;var I=E-1;return _!==r&&(I=_t(_),I=_<0?_r(E+I,0):Ur(I,E-1)),Mu(u,rt(h,3),I,!0)}function Hh(u){var h=u==null?0:u.length;return h?Pr(u,1):[]}function s_(u){var h=u==null?0:u.length;return h?Pr(u,Q):[]}function o_(u,h){var _=u==null?0:u.length;return _?(h=h===r?1:_t(h),Pr(u,h)):[]}function l_(u){for(var h=-1,_=u==null?0:u.length,E={};++h<_;){var I=u[h];E[I[0]]=I[1]}return E}function $h(u){return u&&u.length?u[0]:r}function f_(u,h,_){var E=u==null?0:u.length;if(!E)return-1;var I=_==null?0:_t(_);return I<0&&(I=_r(E+I,0)),aa(u,h,I)}function c_(u){var h=u==null?0:u.length;return h?An(u,0,-1):[]}var h_=yt(function(u){var h=Ht(u,al);return h.length&&h[0]===u[0]?Yo(h):[]}),d_=yt(function(u){var h=Cn(u),_=Ht(u,al);return h===Cn(_)?h=r:_.pop(),_.length&&_[0]===u[0]?Yo(_,rt(h,2)):[]}),p_=yt(function(u){var h=Cn(u),_=Ht(u,al);return h=typeof h=="function"?h:r,h&&_.pop(),_.length&&_[0]===u[0]?Yo(_,r,h):[]});function g_(u,h){return u==null?"":cv.call(u,h)}function Cn(u){var h=u==null?0:u.length;return h?u[h-1]:r}function v_(u,h,_){var E=u==null?0:u.length;if(!E)return-1;var I=E;return _!==r&&(I=_t(_),I=I<0?_r(E+I,0):Ur(I,E-1)),h===h?Yg(u,h,I):Mu(u,Fc,I,!0)}function m_(u,h){return u&&u.length?nh(u,_t(h)):r}var __=yt(Gh);function Gh(u,h){return u&&u.length&&h&&h.length?Xo(u,h):u}function b_(u,h,_){return u&&u.length&&h&&h.length?Xo(u,h,rt(_,2)):u}function D_(u,h,_){return u&&u.length&&h&&h.length?Xo(u,h,r,_):u}var y_=ai(function(u,h){var _=u==null?0:u.length,E=Ho(u,h);return uh(u,Ht(h,function(I){return ui(I,_)?+I:I}).sort(vh)),E});function w_(u,h){var _=[];if(!(u&&u.length))return _;var E=-1,I=[],U=u.length;for(h=rt(h,3);++E<U;){var J=u[E];h(J,E,u)&&(_.push(J),I.push(E))}return uh(u,I),_}function bl(u){return u==null?u:gv.call(u)}function E_(u,h,_){var E=u==null?0:u.length;return E?(_&&typeof _!="number"&&Gr(u,h,_)?(h=0,_=E):(h=h==null?0:_t(h),_=_===r?E:_t(_)),An(u,h,_)):[]}function A_(u,h){return Zu(u,h)}function C_(u,h,_){return rl(u,h,rt(_,2))}function F_(u,h){var _=u==null?0:u.length;if(_){var E=Zu(u,h);if(E<_&&Tn(u[E],h))return E}return-1}function S_(u,h){return Zu(u,h,!0)}function B_(u,h,_){return rl(u,h,rt(_,2),!0)}function O_(u,h){var _=u==null?0:u.length;if(_){var E=Zu(u,h,!0)-1;if(Tn(u[E],h))return E}return-1}function M_(u){return u&&u.length?oh(u):[]}function P_(u,h){return u&&u.length?oh(u,rt(h,2)):[]}function k_(u){var h=u==null?0:u.length;return h?An(u,1,h):[]}function T_(u,h,_){return u&&u.length?(h=_||h===r?1:_t(h),An(u,0,h<0?0:h)):[]}function I_(u,h,_){var E=u==null?0:u.length;return E?(h=_||h===r?1:_t(h),h=E-h,An(u,h<0?0:h,E)):[]}function x_(u,h){return u&&u.length?Ju(u,rt(h,3),!1,!0):[]}function N_(u,h){return u&&u.length?Ju(u,rt(h,3)):[]}var L_=yt(function(u){return Ei(Pr(u,1,cr,!0))}),R_=yt(function(u){var h=Cn(u);return cr(h)&&(h=r),Ei(Pr(u,1,cr,!0),rt(h,2))}),U_=yt(function(u){var h=Cn(u);return h=typeof h=="function"?h:r,Ei(Pr(u,1,cr,!0),r,h)});function V_(u){return u&&u.length?Ei(u):[]}function j_(u,h){return u&&u.length?Ei(u,rt(h,2)):[]}function z_(u,h){return h=typeof h=="function"?h:r,u&&u.length?Ei(u,r,h):[]}function Dl(u){if(!(u&&u.length))return[];var h=0;return u=_i(u,function(_){if(cr(_))return h=_r(_.length,h),!0}),Lo(h,function(_){return Ht(u,Io(_))})}function Kh(u,h){if(!(u&&u.length))return[];var _=Dl(u);return h==null?_:Ht(_,function(E){return ln(h,r,E)})}var q_=yt(function(u,h){return cr(u)?ru(u,h):[]}),W_=yt(function(u){return il(_i(u,cr))}),H_=yt(function(u){var h=Cn(u);return cr(h)&&(h=r),il(_i(u,cr),rt(h,2))}),$_=yt(function(u){var h=Cn(u);return h=typeof h=="function"?h:r,il(_i(u,cr),r,h)}),G_=yt(Dl);function K_(u,h){return hh(u||[],h||[],tu)}function Y_(u,h){return hh(u||[],h||[],au)}var Z_=yt(function(u){var h=u.length,_=h>1?u[h-1]:r;return _=typeof _=="function"?(u.pop(),_):r,Kh(u,_)});function Yh(u){var h=N(u);return h.__chain__=!0,h}function J_(u,h){return h(u),u}function us(u,h){return h(u)}var Q_=ai(function(u){var h=u.length,_=h?u[0]:0,E=this.__wrapped__,I=function(U){return Ho(U,u)};return h>1||this.__actions__.length||!(E instanceof Et)||!ui(_)?this.thru(I):(E=E.slice(_,+_+(h?1:0)),E.__actions__.push({func:us,args:[I],thisArg:r}),new wn(E,this.__chain__).thru(function(U){return h&&!U.length&&U.push(r),U}))});function X_(){return Yh(this)}function e2(){return new wn(this.value(),this.__chain__)}function t2(){this.__values__===r&&(this.__values__=l0(this.value()));var u=this.__index__>=this.__values__.length,h=u?r:this.__values__[this.__index__++];return{done:u,value:h}}function r2(){return this}function n2(u){for(var h,_=this;_ instanceof Hu;){var E=zh(_);E.__index__=0,E.__values__=r,h?I.__wrapped__=E:h=E;var I=E;_=_.__wrapped__}return I.__wrapped__=u,h}function i2(){var u=this.__wrapped__;if(u instanceof Et){var h=u;return this.__actions__.length&&(h=new Et(this)),h=h.reverse(),h.__actions__.push({func:us,args:[bl],thisArg:r}),new wn(h,this.__chain__)}return this.thru(bl)}function a2(){return ch(this.__wrapped__,this.__actions__)}var u2=Qu(function(u,h,_){xt.call(u,_)?++u[_]:ni(u,_,1)});function s2(u,h,_){var E=dt(u)?Ac:Jv;return _&&Gr(u,h,_)&&(h=r),E(u,rt(h,3))}function o2(u,h){var _=dt(u)?_i:Kc;return _(u,rt(h,3))}var l2=wh(qh),f2=wh(Wh);function c2(u,h){return Pr(ss(u,h),1)}function h2(u,h){return Pr(ss(u,h),Q)}function d2(u,h,_){return _=_===r?1:_t(_),Pr(ss(u,h),_)}function Zh(u,h){var _=dt(u)?Dn:wi;return _(u,rt(h,3))}function Jh(u,h){var _=dt(u)?kg:Gc;return _(u,rt(h,3))}var p2=Qu(function(u,h,_){xt.call(u,_)?u[_].push(h):ni(u,_,[h])});function g2(u,h,_,E){u=Xr(u)?u:ma(u),_=_&&!E?_t(_):0;var I=u.length;return _<0&&(_=_r(I+_,0)),hs(u)?_<=I&&u.indexOf(h,_)>-1:!!I&&aa(u,h,_)>-1}var v2=yt(function(u,h,_){var E=-1,I=typeof h=="function",U=Xr(u)?fe(u.length):[];return wi(u,function(J){U[++E]=I?ln(h,J,_):nu(J,h,_)}),U}),m2=Qu(function(u,h,_){ni(u,_,h)});function ss(u,h){var _=dt(u)?Ht:eh;return _(u,rt(h,3))}function _2(u,h,_,E){return u==null?[]:(dt(h)||(h=h==null?[]:[h]),_=E?r:_,dt(_)||(_=_==null?[]:[_]),ih(u,h,_))}var b2=Qu(function(u,h,_){u[_?0:1].push(h)},function(){return[[],[]]});function D2(u,h,_){var E=dt(u)?ko:Bc,I=arguments.length<3;return E(u,rt(h,4),_,I,wi)}function y2(u,h,_){var E=dt(u)?Tg:Bc,I=arguments.length<3;return E(u,rt(h,4),_,I,Gc)}function w2(u,h){var _=dt(u)?_i:Kc;return _(u,fs(rt(h,3)))}function E2(u){var h=dt(u)?qc:gm;return h(u)}function A2(u,h,_){(_?Gr(u,h,_):h===r)?h=1:h=_t(h);var E=dt(u)?$v:vm;return E(u,h)}function C2(u){var h=dt(u)?Gv:_m;return h(u)}function F2(u){if(u==null)return 0;if(Xr(u))return hs(u)?sa(u):u.length;var h=Vr(u);return h==lt||h==rr?u.size:Jo(u).length}function S2(u,h,_){var E=dt(u)?To:bm;return _&&Gr(u,h,_)&&(h=r),E(u,rt(h,3))}var B2=yt(function(u,h){if(u==null)return[];var _=h.length;return _>1&&Gr(u,h[0],h[1])?h=[]:_>2&&Gr(h[0],h[1],h[2])&&(h=[h[0]]),ih(u,Pr(h,1),[])}),os=ov||function(){return Mr.Date.now()};function O2(u,h){if(typeof h!="function")throw new yn(o);return u=_t(u),function(){if(--u<1)return h.apply(this,arguments)}}function Qh(u,h,_){return h=_?r:h,h=u&&h==null?u.length:h,ii(u,P,r,r,r,r,h)}function Xh(u,h){var _;if(typeof h!="function")throw new yn(o);return u=_t(u),function(){return--u>0&&(_=h.apply(this,arguments)),u<=1&&(h=r),_}}var yl=yt(function(u,h,_){var E=m;if(_.length){var I=Di(_,ga(yl));E|=F}return ii(u,E,h,_,I)}),e0=yt(function(u,h,_){var E=m|D;if(_.length){var I=Di(_,ga(e0));E|=F}return ii(h,E,u,_,I)});function t0(u,h,_){h=_?r:h;var E=ii(u,w,r,r,r,r,r,h);return E.placeholder=t0.placeholder,E}function r0(u,h,_){h=_?r:h;var E=ii(u,C,r,r,r,r,r,h);return E.placeholder=r0.placeholder,E}function n0(u,h,_){var E,I,U,J,ee,ae,ye=0,we=!1,Oe=!1,Re=!0;if(typeof u!="function")throw new yn(o);h=Fn(h)||0,Zt(_)&&(we=!!_.leading,Oe="maxWait"in _,U=Oe?_r(Fn(_.maxWait)||0,h):U,Re="trailing"in _?!!_.trailing:Re);function Ge(hr){var In=E,li=I;return E=I=r,ye=hr,J=u.apply(li,In),J}function at(hr){return ye=hr,ee=ou(wt,h),we?Ge(hr):J}function Dt(hr){var In=hr-ae,li=hr-ye,w0=h-In;return Oe?Ur(w0,U-li):w0}function ut(hr){var In=hr-ae,li=hr-ye;return ae===r||In>=h||In<0||Oe&&li>=U}function wt(){var hr=os();if(ut(hr))return Ct(hr);ee=ou(wt,Dt(hr))}function Ct(hr){return ee=r,Re&&E?Ge(hr):(E=I=r,J)}function dn(){ee!==r&&dh(ee),ye=0,E=ae=I=ee=r}function Kr(){return ee===r?J:Ct(os())}function pn(){var hr=os(),In=ut(hr);if(E=arguments,I=this,ae=hr,In){if(ee===r)return at(ae);if(Oe)return dh(ee),ee=ou(wt,h),Ge(ae)}return ee===r&&(ee=ou(wt,h)),J}return pn.cancel=dn,pn.flush=Kr,pn}var M2=yt(function(u,h){return $c(u,1,h)}),P2=yt(function(u,h,_){return $c(u,Fn(h)||0,_)});function k2(u){return ii(u,x)}function ls(u,h){if(typeof u!="function"||h!=null&&typeof h!="function")throw new yn(o);var _=function(){var E=arguments,I=h?h.apply(this,E):E[0],U=_.cache;if(U.has(I))return U.get(I);var J=u.apply(this,E);return _.cache=U.set(I,J)||U,J};return _.cache=new(ls.Cache||ri),_}ls.Cache=ri;function fs(u){if(typeof u!="function")throw new yn(o);return function(){var h=arguments;switch(h.length){case 0:return!u.call(this);case 1:return!u.call(this,h[0]);case 2:return!u.call(this,h[0],h[1]);case 3:return!u.call(this,h[0],h[1],h[2])}return!u.apply(this,h)}}function T2(u){return Xh(2,u)}var I2=Dm(function(u,h){h=h.length==1&&dt(h[0])?Ht(h[0],fn(rt())):Ht(Pr(h,1),fn(rt()));var _=h.length;return yt(function(E){for(var I=-1,U=Ur(E.length,_);++I<U;)E[I]=h[I].call(this,E[I]);return ln(u,this,E)})}),wl=yt(function(u,h){var _=Di(h,ga(wl));return ii(u,F,r,h,_)}),i0=yt(function(u,h){var _=Di(h,ga(i0));return ii(u,M,r,h,_)}),x2=ai(function(u,h){return ii(u,A,r,r,r,h)});function N2(u,h){if(typeof u!="function")throw new yn(o);return h=h===r?h:_t(h),yt(u,h)}function L2(u,h){if(typeof u!="function")throw new yn(o);return h=h==null?0:_r(_t(h),0),yt(function(_){var E=_[h],I=Ci(_,0,h);return E&&bi(I,E),ln(u,this,I)})}function R2(u,h,_){var E=!0,I=!0;if(typeof u!="function")throw new yn(o);return Zt(_)&&(E="leading"in _?!!_.leading:E,I="trailing"in _?!!_.trailing:I),n0(u,h,{leading:E,maxWait:h,trailing:I})}function U2(u){return Qh(u,1)}function V2(u,h){return wl(ul(h),u)}function j2(){if(!arguments.length)return[];var u=arguments[0];return dt(u)?u:[u]}function z2(u){return En(u,g)}function q2(u,h){return h=typeof h=="function"?h:r,En(u,g,h)}function W2(u){return En(u,c|g)}function H2(u,h){return h=typeof h=="function"?h:r,En(u,c|g,h)}function $2(u,h){return h==null||Hc(u,h,Fr(h))}function Tn(u,h){return u===h||u!==u&&h!==h}var G2=rs(Ko),K2=rs(function(u,h){return u>=h}),Ji=Jc(function(){return arguments}())?Jc:function(u){return ar(u)&&xt.call(u,"callee")&&!Lc.call(u,"callee")},dt=fe.isArray,Y2=_c?fn(_c):nm;function Xr(u){return u!=null&&cs(u.length)&&!si(u)}function cr(u){return ar(u)&&Xr(u)}function Z2(u){return u===!0||u===!1||ar(u)&&$r(u)==Ye}var Fi=fv||Tl,J2=bc?fn(bc):im;function Q2(u){return ar(u)&&u.nodeType===1&&!lu(u)}function X2(u){if(u==null)return!0;if(Xr(u)&&(dt(u)||typeof u=="string"||typeof u.splice=="function"||Fi(u)||va(u)||Ji(u)))return!u.length;var h=Vr(u);if(h==lt||h==rr)return!u.size;if(su(u))return!Jo(u).length;for(var _ in u)if(xt.call(u,_))return!1;return!0}function eb(u,h){return iu(u,h)}function tb(u,h,_){_=typeof _=="function"?_:r;var E=_?_(u,h):r;return E===r?iu(u,h,r,_):!!E}function El(u){if(!ar(u))return!1;var h=$r(u);return h==ot||h==Je||typeof u.message=="string"&&typeof u.name=="string"&&!lu(u)}function rb(u){return typeof u=="number"&&Uc(u)}function si(u){if(!Zt(u))return!1;var h=$r(u);return h==bt||h==Ue||h==Ne||h==Ke}function a0(u){return typeof u=="number"&&u==_t(u)}function cs(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=X}function Zt(u){var h=typeof u;return u!=null&&(h=="object"||h=="function")}function ar(u){return u!=null&&typeof u=="object"}var u0=Dc?fn(Dc):um;function nb(u,h){return u===h||Zo(u,h,dl(h))}function ib(u,h,_){return _=typeof _=="function"?_:r,Zo(u,h,dl(h),_)}function ab(u){return s0(u)&&u!=+u}function ub(u){if(qm(u))throw new ht(a);return Qc(u)}function sb(u){return u===null}function ob(u){return u==null}function s0(u){return typeof u=="number"||ar(u)&&$r(u)==kt}function lu(u){if(!ar(u)||$r(u)!=Mt)return!1;var h=Ru(u);if(h===null)return!0;var _=xt.call(h,"constructor")&&h.constructor;return typeof _=="function"&&_ instanceof _&&Iu.call(_)==iv}var Al=yc?fn(yc):sm;function lb(u){return a0(u)&&u>=-X&&u<=X}var o0=wc?fn(wc):om;function hs(u){return typeof u=="string"||!dt(u)&&ar(u)&&$r(u)==Jr}function hn(u){return typeof u=="symbol"||ar(u)&&$r(u)==G}var va=Ec?fn(Ec):lm;function fb(u){return u===r}function cb(u){return ar(u)&&Vr(u)==ie}function hb(u){return ar(u)&&$r(u)==de}var db=rs(Qo),pb=rs(function(u,h){return u<=h});function l0(u){if(!u)return[];if(Xr(u))return hs(u)?Pn(u):Qr(u);if(Za&&u[Za])return $g(u[Za]());var h=Vr(u),_=h==lt?Uo:h==rr?Pu:ma;return _(u)}function oi(u){if(!u)return u===0?u:0;if(u=Fn(u),u===Q||u===-Q){var h=u<0?-1:1;return h*te}return u===u?u:0}function _t(u){var h=oi(u),_=h%1;return h===h?_?h-_:h:0}function f0(u){return u?Gi(_t(u),0,_e):0}function Fn(u){if(typeof u=="number")return u;if(hn(u))return oe;if(Zt(u)){var h=typeof u.valueOf=="function"?u.valueOf():u;u=Zt(h)?h+"":h}if(typeof u!="string")return u===0?u:+u;u=Oc(u);var _=Ua.test(u);return _||ja.test(u)?Og(u.slice(2),_?2:8):Ra.test(u)?oe:+u}function c0(u){return Hn(u,en(u))}function gb(u){return u?Gi(_t(u),-X,X):u===0?u:0}function Tt(u){return u==null?"":cn(u)}var vb=da(function(u,h){if(su(h)||Xr(h)){Hn(h,Fr(h),u);return}for(var _ in h)xt.call(h,_)&&tu(u,_,h[_])}),h0=da(function(u,h){Hn(h,en(h),u)}),ds=da(function(u,h,_,E){Hn(h,en(h),u,E)}),mb=da(function(u,h,_,E){Hn(h,Fr(h),u,E)}),_b=ai(Ho);function bb(u,h){var _=ha(u);return h==null?_:Wc(_,h)}var Db=yt(function(u,h){u=Lt(u);var _=-1,E=h.length,I=E>2?h[2]:r;for(I&&Gr(h[0],h[1],I)&&(E=1);++_<E;)for(var U=h[_],J=en(U),ee=-1,ae=J.length;++ee<ae;){var ye=J[ee],we=u[ye];(we===r||Tn(we,la[ye])&&!xt.call(u,ye))&&(u[ye]=U[ye])}return u}),yb=yt(function(u){return u.push(r,Oh),ln(d0,r,u)});function wb(u,h){return Cc(u,rt(h,3),Wn)}function Eb(u,h){return Cc(u,rt(h,3),Go)}function Ab(u,h){return u==null?u:$o(u,rt(h,3),en)}function Cb(u,h){return u==null?u:Yc(u,rt(h,3),en)}function Fb(u,h){return u&&Wn(u,rt(h,3))}function Sb(u,h){return u&&Go(u,rt(h,3))}function Bb(u){return u==null?[]:Ku(u,Fr(u))}function Ob(u){return u==null?[]:Ku(u,en(u))}function Cl(u,h,_){var E=u==null?r:Ki(u,h);return E===r?_:E}function Mb(u,h){return u!=null&&kh(u,h,Xv)}function Fl(u,h){return u!=null&&kh(u,h,em)}var Pb=Ah(function(u,h,_){h!=null&&typeof h.toString!="function"&&(h=xu.call(h)),u[h]=_},Bl(tn)),kb=Ah(function(u,h,_){h!=null&&typeof h.toString!="function"&&(h=xu.call(h)),xt.call(u,h)?u[h].push(_):u[h]=[_]},rt),Tb=yt(nu);function Fr(u){return Xr(u)?zc(u):Jo(u)}function en(u){return Xr(u)?zc(u,!0):fm(u)}function Ib(u,h){var _={};return h=rt(h,3),Wn(u,function(E,I,U){ni(_,h(E,I,U),E)}),_}function xb(u,h){var _={};return h=rt(h,3),Wn(u,function(E,I,U){ni(_,I,h(E,I,U))}),_}var Nb=da(function(u,h,_){Yu(u,h,_)}),d0=da(function(u,h,_,E){Yu(u,h,_,E)}),Lb=ai(function(u,h){var _={};if(u==null)return _;var E=!1;h=Ht(h,function(U){return U=Ai(U,u),E||(E=U.length>1),U}),Hn(u,cl(u),_),E&&(_=En(_,c|d|g,Pm));for(var I=h.length;I--;)nl(_,h[I]);return _});function Rb(u,h){return p0(u,fs(rt(h)))}var Ub=ai(function(u,h){return u==null?{}:hm(u,h)});function p0(u,h){if(u==null)return{};var _=Ht(cl(u),function(E){return[E]});return h=rt(h),ah(u,_,function(E,I){return h(E,I[0])})}function Vb(u,h,_){h=Ai(h,u);var E=-1,I=h.length;for(I||(I=1,u=r);++E<I;){var U=u==null?r:u[$n(h[E])];U===r&&(E=I,U=_),u=si(U)?U.call(u):U}return u}function jb(u,h,_){return u==null?u:au(u,h,_)}function zb(u,h,_,E){return E=typeof E=="function"?E:r,u==null?u:au(u,h,_,E)}var g0=Sh(Fr),v0=Sh(en);function qb(u,h,_){var E=dt(u),I=E||Fi(u)||va(u);if(h=rt(h,4),_==null){var U=u&&u.constructor;I?_=E?new U:[]:Zt(u)?_=si(U)?ha(Ru(u)):{}:_={}}return(I?Dn:Wn)(u,function(J,ee,ae){return h(_,J,ee,ae)}),_}function Wb(u,h){return u==null?!0:nl(u,h)}function Hb(u,h,_){return u==null?u:fh(u,h,ul(_))}function $b(u,h,_,E){return E=typeof E=="function"?E:r,u==null?u:fh(u,h,ul(_),E)}function ma(u){return u==null?[]:Ro(u,Fr(u))}function Gb(u){return u==null?[]:Ro(u,en(u))}function Kb(u,h,_){return _===r&&(_=h,h=r),_!==r&&(_=Fn(_),_=_===_?_:0),h!==r&&(h=Fn(h),h=h===h?h:0),Gi(Fn(u),h,_)}function Yb(u,h,_){return h=oi(h),_===r?(_=h,h=0):_=oi(_),u=Fn(u),tm(u,h,_)}function Zb(u,h,_){if(_&&typeof _!="boolean"&&Gr(u,h,_)&&(h=_=r),_===r&&(typeof h=="boolean"?(_=h,h=r):typeof u=="boolean"&&(_=u,u=r)),u===r&&h===r?(u=0,h=1):(u=oi(u),h===r?(h=u,u=0):h=oi(h)),u>h){var E=u;u=h,h=E}if(_||u%1||h%1){var I=Vc();return Ur(u+I*(h-u+Bg("1e-"+((I+"").length-1))),h)}return el(u,h)}var Jb=pa(function(u,h,_){return h=h.toLowerCase(),u+(_?m0(h):h)});function m0(u){return Sl(Tt(u).toLowerCase())}function _0(u){return u=Tt(u),u&&u.replace(qa,jg).replace(_g,"")}function Qb(u,h,_){u=Tt(u),h=cn(h);var E=u.length;_=_===r?E:Gi(_t(_),0,E);var I=_;return _-=h.length,_>=0&&u.slice(_,I)==h}function Xb(u){return u=Tt(u),u&&vn.test(u)?u.replace(dr,zg):u}function eD(u){return u=Tt(u),u&&Ia.test(u)?u.replace(Ui,"\\$&"):u}var tD=pa(function(u,h,_){return u+(_?"-":"")+h.toLowerCase()}),rD=pa(function(u,h,_){return u+(_?" ":"")+h.toLowerCase()}),nD=yh("toLowerCase");function iD(u,h,_){u=Tt(u),h=_t(h);var E=h?sa(u):0;if(!h||E>=h)return u;var I=(h-E)/2;return ts(zu(I),_)+u+ts(ju(I),_)}function aD(u,h,_){u=Tt(u),h=_t(h);var E=h?sa(u):0;return h&&E<h?u+ts(h-E,_):u}function uD(u,h,_){u=Tt(u),h=_t(h);var E=h?sa(u):0;return h&&E<h?ts(h-E,_)+u:u}function sD(u,h,_){return _||h==null?h=0:h&&(h=+h),pv(Tt(u).replace(Or,""),h||0)}function oD(u,h,_){return(_?Gr(u,h,_):h===r)?h=1:h=_t(h),tl(Tt(u),h)}function lD(){var u=arguments,h=Tt(u[0]);return u.length<3?h:h.replace(u[1],u[2])}var fD=pa(function(u,h,_){return u+(_?"_":"")+h.toLowerCase()});function cD(u,h,_){return _&&typeof _!="number"&&Gr(u,h,_)&&(h=_=r),_=_===r?_e:_>>>0,_?(u=Tt(u),u&&(typeof h=="string"||h!=null&&!Al(h))&&(h=cn(h),!h&&ua(u))?Ci(Pn(u),0,_):u.split(h,_)):[]}var hD=pa(function(u,h,_){return u+(_?" ":"")+Sl(h)});function dD(u,h,_){return u=Tt(u),_=_==null?0:Gi(_t(_),0,u.length),h=cn(h),u.slice(_,_+h.length)==h}function pD(u,h,_){var E=N.templateSettings;_&&Gr(u,h,_)&&(h=r),u=Tt(u),h=ds({},h,E,Bh);var I=ds({},h.imports,E.imports,Bh),U=Fr(I),J=Ro(I,U),ee,ae,ye=0,we=h.interpolate||vi,Oe="__p += '",Re=Vo((h.escape||vi).source+"|"+we.source+"|"+(we===Qn?La:vi).source+"|"+(h.evaluate||vi).source+"|$","g"),Ge="//# sourceURL="+(xt.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Eg+"]")+`
`;u.replace(Re,function(ut,wt,Ct,dn,Kr,pn){return Ct||(Ct=dn),Oe+=u.slice(ye,pn).replace(Wa,qg),wt&&(ee=!0,Oe+=`' +
__e(`+wt+`) +
'`),Kr&&(ae=!0,Oe+=`';
`+Kr+`;
__p += '`),Ct&&(Oe+=`' +
((__t = (`+Ct+`)) == null ? '' : __t) +
'`),ye=pn+ut.length,ut}),Oe+=`';
`;var at=xt.call(h,"variable")&&h.variable;if(!at)Oe=`with (obj) {
`+Oe+`
}
`;else if(Vi.test(at))throw new ht(s);Oe=(ae?Oe.replace(Kt,""):Oe).replace(Er,"$1").replace(Yt,"$1;"),Oe="function("+(at||"obj")+`) {
`+(at?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ee?", __e = _.escape":"")+(ae?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Oe+`return __p
}`;var Dt=D0(function(){return Pt(U,Ge+"return "+Oe).apply(r,J)});if(Dt.source=Oe,El(Dt))throw Dt;return Dt}function gD(u){return Tt(u).toLowerCase()}function vD(u){return Tt(u).toUpperCase()}function mD(u,h,_){if(u=Tt(u),u&&(_||h===r))return Oc(u);if(!u||!(h=cn(h)))return u;var E=Pn(u),I=Pn(h),U=Mc(E,I),J=Pc(E,I)+1;return Ci(E,U,J).join("")}function _D(u,h,_){if(u=Tt(u),u&&(_||h===r))return u.slice(0,Tc(u)+1);if(!u||!(h=cn(h)))return u;var E=Pn(u),I=Pc(E,Pn(h))+1;return Ci(E,0,I).join("")}function bD(u,h,_){if(u=Tt(u),u&&(_||h===r))return u.replace(Or,"");if(!u||!(h=cn(h)))return u;var E=Pn(u),I=Mc(E,Pn(h));return Ci(E,I).join("")}function DD(u,h){var _=R,E=Z;if(Zt(h)){var I="separator"in h?h.separator:I;_="length"in h?_t(h.length):_,E="omission"in h?cn(h.omission):E}u=Tt(u);var U=u.length;if(ua(u)){var J=Pn(u);U=J.length}if(_>=U)return u;var ee=_-sa(E);if(ee<1)return E;var ae=J?Ci(J,0,ee).join(""):u.slice(0,ee);if(I===r)return ae+E;if(J&&(ee+=ae.length-ee),Al(I)){if(u.slice(ee).search(I)){var ye,we=ae;for(I.global||(I=Vo(I.source,Tt(ra.exec(I))+"g")),I.lastIndex=0;ye=I.exec(we);)var Oe=ye.index;ae=ae.slice(0,Oe===r?ee:Oe)}}else if(u.indexOf(cn(I),ee)!=ee){var Re=ae.lastIndexOf(I);Re>-1&&(ae=ae.slice(0,Re))}return ae+E}function yD(u){return u=Tt(u),u&&pr.test(u)?u.replace(Ar,Zg):u}var wD=pa(function(u,h,_){return u+(_?" ":"")+h.toUpperCase()}),Sl=yh("toUpperCase");function b0(u,h,_){return u=Tt(u),h=_?r:h,h===r?Hg(u)?Xg(u):Ng(u):u.match(h)||[]}var D0=yt(function(u,h){try{return ln(u,r,h)}catch(_){return El(_)?_:new ht(_)}}),ED=ai(function(u,h){return Dn(h,function(_){_=$n(_),ni(u,_,yl(u[_],u))}),u});function AD(u){var h=u==null?0:u.length,_=rt();return u=h?Ht(u,function(E){if(typeof E[1]!="function")throw new yn(o);return[_(E[0]),E[1]]}):[],yt(function(E){for(var I=-1;++I<h;){var U=u[I];if(ln(U[0],this,E))return ln(U[1],this,E)}})}function CD(u){return Zv(En(u,c))}function Bl(u){return function(){return u}}function FD(u,h){return u==null||u!==u?h:u}var SD=Eh(),BD=Eh(!0);function tn(u){return u}function Ol(u){return Xc(typeof u=="function"?u:En(u,c))}function OD(u){return th(En(u,c))}function MD(u,h){return rh(u,En(h,c))}var PD=yt(function(u,h){return function(_){return nu(_,u,h)}}),kD=yt(function(u,h){return function(_){return nu(u,_,h)}});function Ml(u,h,_){var E=Fr(h),I=Ku(h,E);_==null&&!(Zt(h)&&(I.length||!E.length))&&(_=h,h=u,u=this,I=Ku(h,Fr(h)));var U=!(Zt(_)&&"chain"in _)||!!_.chain,J=si(u);return Dn(I,function(ee){var ae=h[ee];u[ee]=ae,J&&(u.prototype[ee]=function(){var ye=this.__chain__;if(U||ye){var we=u(this.__wrapped__),Oe=we.__actions__=Qr(this.__actions__);return Oe.push({func:ae,args:arguments,thisArg:u}),we.__chain__=ye,we}return ae.apply(u,bi([this.value()],arguments))})}),u}function TD(){return Mr._===this&&(Mr._=av),this}function Pl(){}function ID(u){return u=_t(u),yt(function(h){return nh(h,u)})}var xD=ol(Ht),ND=ol(Ac),LD=ol(To);function y0(u){return gl(u)?Io($n(u)):dm(u)}function RD(u){return function(h){return u==null?r:Ki(u,h)}}var UD=Ch(),VD=Ch(!0);function kl(){return[]}function Tl(){return!1}function jD(){return{}}function zD(){return""}function qD(){return!0}function WD(u,h){if(u=_t(u),u<1||u>X)return[];var _=_e,E=Ur(u,_e);h=rt(h),u-=_e;for(var I=Lo(E,h);++_<u;)h(_);return I}function HD(u){return dt(u)?Ht(u,$n):hn(u)?[u]:Qr(jh(Tt(u)))}function $D(u){var h=++nv;return Tt(u)+h}var GD=es(function(u,h){return u+h},0),KD=ll("ceil"),YD=es(function(u,h){return u/h},1),ZD=ll("floor");function JD(u){return u&&u.length?Gu(u,tn,Ko):r}function QD(u,h){return u&&u.length?Gu(u,rt(h,2),Ko):r}function XD(u){return Sc(u,tn)}function ey(u,h){return Sc(u,rt(h,2))}function ty(u){return u&&u.length?Gu(u,tn,Qo):r}function ry(u,h){return u&&u.length?Gu(u,rt(h,2),Qo):r}var ny=es(function(u,h){return u*h},1),iy=ll("round"),ay=es(function(u,h){return u-h},0);function uy(u){return u&&u.length?No(u,tn):0}function sy(u,h){return u&&u.length?No(u,rt(h,2)):0}return N.after=O2,N.ary=Qh,N.assign=vb,N.assignIn=h0,N.assignInWith=ds,N.assignWith=mb,N.at=_b,N.before=Xh,N.bind=yl,N.bindAll=ED,N.bindKey=e0,N.castArray=j2,N.chain=Yh,N.chunk=Zm,N.compact=Jm,N.concat=Qm,N.cond=AD,N.conforms=CD,N.constant=Bl,N.countBy=u2,N.create=bb,N.curry=t0,N.curryRight=r0,N.debounce=n0,N.defaults=Db,N.defaultsDeep=yb,N.defer=M2,N.delay=P2,N.difference=Xm,N.differenceBy=e_,N.differenceWith=t_,N.drop=r_,N.dropRight=n_,N.dropRightWhile=i_,N.dropWhile=a_,N.fill=u_,N.filter=o2,N.flatMap=c2,N.flatMapDeep=h2,N.flatMapDepth=d2,N.flatten=Hh,N.flattenDeep=s_,N.flattenDepth=o_,N.flip=k2,N.flow=SD,N.flowRight=BD,N.fromPairs=l_,N.functions=Bb,N.functionsIn=Ob,N.groupBy=p2,N.initial=c_,N.intersection=h_,N.intersectionBy=d_,N.intersectionWith=p_,N.invert=Pb,N.invertBy=kb,N.invokeMap=v2,N.iteratee=Ol,N.keyBy=m2,N.keys=Fr,N.keysIn=en,N.map=ss,N.mapKeys=Ib,N.mapValues=xb,N.matches=OD,N.matchesProperty=MD,N.memoize=ls,N.merge=Nb,N.mergeWith=d0,N.method=PD,N.methodOf=kD,N.mixin=Ml,N.negate=fs,N.nthArg=ID,N.omit=Lb,N.omitBy=Rb,N.once=T2,N.orderBy=_2,N.over=xD,N.overArgs=I2,N.overEvery=ND,N.overSome=LD,N.partial=wl,N.partialRight=i0,N.partition=b2,N.pick=Ub,N.pickBy=p0,N.property=y0,N.propertyOf=RD,N.pull=__,N.pullAll=Gh,N.pullAllBy=b_,N.pullAllWith=D_,N.pullAt=y_,N.range=UD,N.rangeRight=VD,N.rearg=x2,N.reject=w2,N.remove=w_,N.rest=N2,N.reverse=bl,N.sampleSize=A2,N.set=jb,N.setWith=zb,N.shuffle=C2,N.slice=E_,N.sortBy=B2,N.sortedUniq=M_,N.sortedUniqBy=P_,N.split=cD,N.spread=L2,N.tail=k_,N.take=T_,N.takeRight=I_,N.takeRightWhile=x_,N.takeWhile=N_,N.tap=J_,N.throttle=R2,N.thru=us,N.toArray=l0,N.toPairs=g0,N.toPairsIn=v0,N.toPath=HD,N.toPlainObject=c0,N.transform=qb,N.unary=U2,N.union=L_,N.unionBy=R_,N.unionWith=U_,N.uniq=V_,N.uniqBy=j_,N.uniqWith=z_,N.unset=Wb,N.unzip=Dl,N.unzipWith=Kh,N.update=Hb,N.updateWith=$b,N.values=ma,N.valuesIn=Gb,N.without=q_,N.words=b0,N.wrap=V2,N.xor=W_,N.xorBy=H_,N.xorWith=$_,N.zip=G_,N.zipObject=K_,N.zipObjectDeep=Y_,N.zipWith=Z_,N.entries=g0,N.entriesIn=v0,N.extend=h0,N.extendWith=ds,Ml(N,N),N.add=GD,N.attempt=D0,N.camelCase=Jb,N.capitalize=m0,N.ceil=KD,N.clamp=Kb,N.clone=z2,N.cloneDeep=W2,N.cloneDeepWith=H2,N.cloneWith=q2,N.conformsTo=$2,N.deburr=_0,N.defaultTo=FD,N.divide=YD,N.endsWith=Qb,N.eq=Tn,N.escape=Xb,N.escapeRegExp=eD,N.every=s2,N.find=l2,N.findIndex=qh,N.findKey=wb,N.findLast=f2,N.findLastIndex=Wh,N.findLastKey=Eb,N.floor=ZD,N.forEach=Zh,N.forEachRight=Jh,N.forIn=Ab,N.forInRight=Cb,N.forOwn=Fb,N.forOwnRight=Sb,N.get=Cl,N.gt=G2,N.gte=K2,N.has=Mb,N.hasIn=Fl,N.head=$h,N.identity=tn,N.includes=g2,N.indexOf=f_,N.inRange=Yb,N.invoke=Tb,N.isArguments=Ji,N.isArray=dt,N.isArrayBuffer=Y2,N.isArrayLike=Xr,N.isArrayLikeObject=cr,N.isBoolean=Z2,N.isBuffer=Fi,N.isDate=J2,N.isElement=Q2,N.isEmpty=X2,N.isEqual=eb,N.isEqualWith=tb,N.isError=El,N.isFinite=rb,N.isFunction=si,N.isInteger=a0,N.isLength=cs,N.isMap=u0,N.isMatch=nb,N.isMatchWith=ib,N.isNaN=ab,N.isNative=ub,N.isNil=ob,N.isNull=sb,N.isNumber=s0,N.isObject=Zt,N.isObjectLike=ar,N.isPlainObject=lu,N.isRegExp=Al,N.isSafeInteger=lb,N.isSet=o0,N.isString=hs,N.isSymbol=hn,N.isTypedArray=va,N.isUndefined=fb,N.isWeakMap=cb,N.isWeakSet=hb,N.join=g_,N.kebabCase=tD,N.last=Cn,N.lastIndexOf=v_,N.lowerCase=rD,N.lowerFirst=nD,N.lt=db,N.lte=pb,N.max=JD,N.maxBy=QD,N.mean=XD,N.meanBy=ey,N.min=ty,N.minBy=ry,N.stubArray=kl,N.stubFalse=Tl,N.stubObject=jD,N.stubString=zD,N.stubTrue=qD,N.multiply=ny,N.nth=m_,N.noConflict=TD,N.noop=Pl,N.now=os,N.pad=iD,N.padEnd=aD,N.padStart=uD,N.parseInt=sD,N.random=Zb,N.reduce=D2,N.reduceRight=y2,N.repeat=oD,N.replace=lD,N.result=Vb,N.round=iy,N.runInContext=ne,N.sample=E2,N.size=F2,N.snakeCase=fD,N.some=S2,N.sortedIndex=A_,N.sortedIndexBy=C_,N.sortedIndexOf=F_,N.sortedLastIndex=S_,N.sortedLastIndexBy=B_,N.sortedLastIndexOf=O_,N.startCase=hD,N.startsWith=dD,N.subtract=ay,N.sum=uy,N.sumBy=sy,N.template=pD,N.times=WD,N.toFinite=oi,N.toInteger=_t,N.toLength=f0,N.toLower=gD,N.toNumber=Fn,N.toSafeInteger=gb,N.toString=Tt,N.toUpper=vD,N.trim=mD,N.trimEnd=_D,N.trimStart=bD,N.truncate=DD,N.unescape=yD,N.uniqueId=$D,N.upperCase=wD,N.upperFirst=Sl,N.each=Zh,N.eachRight=Jh,N.first=$h,Ml(N,function(){var u={};return Wn(N,function(h,_){xt.call(N.prototype,_)||(u[_]=h)}),u}(),{chain:!1}),N.VERSION=n,Dn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){N[u].placeholder=N}),Dn(["drop","take"],function(u,h){Et.prototype[u]=function(_){_=_===r?1:_r(_t(_),0);var E=this.__filtered__&&!h?new Et(this):this.clone();return E.__filtered__?E.__takeCount__=Ur(_,E.__takeCount__):E.__views__.push({size:Ur(_,_e),type:u+(E.__dir__<0?"Right":"")}),E},Et.prototype[u+"Right"]=function(_){return this.reverse()[u](_).reverse()}}),Dn(["filter","map","takeWhile"],function(u,h){var _=h+1,E=_==V||_==z;Et.prototype[u]=function(I){var U=this.clone();return U.__iteratees__.push({iteratee:rt(I,3),type:_}),U.__filtered__=U.__filtered__||E,U}}),Dn(["head","last"],function(u,h){var _="take"+(h?"Right":"");Et.prototype[u]=function(){return this[_](1).value()[0]}}),Dn(["initial","tail"],function(u,h){var _="drop"+(h?"":"Right");Et.prototype[u]=function(){return this.__filtered__?new Et(this):this[_](1)}}),Et.prototype.compact=function(){return this.filter(tn)},Et.prototype.find=function(u){return this.filter(u).head()},Et.prototype.findLast=function(u){return this.reverse().find(u)},Et.prototype.invokeMap=yt(function(u,h){return typeof u=="function"?new Et(this):this.map(function(_){return nu(_,u,h)})}),Et.prototype.reject=function(u){return this.filter(fs(rt(u)))},Et.prototype.slice=function(u,h){u=_t(u);var _=this;return _.__filtered__&&(u>0||h<0)?new Et(_):(u<0?_=_.takeRight(-u):u&&(_=_.drop(u)),h!==r&&(h=_t(h),_=h<0?_.dropRight(-h):_.take(h-u)),_)},Et.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},Et.prototype.toArray=function(){return this.take(_e)},Wn(Et.prototype,function(u,h){var _=/^(?:filter|find|map|reject)|While$/.test(h),E=/^(?:head|last)$/.test(h),I=N[E?"take"+(h=="last"?"Right":""):h],U=E||/^find/.test(h);I&&(N.prototype[h]=function(){var J=this.__wrapped__,ee=E?[1]:arguments,ae=J instanceof Et,ye=ee[0],we=ae||dt(J),Oe=function(wt){var Ct=I.apply(N,bi([wt],ee));return E&&Re?Ct[0]:Ct};we&&_&&typeof ye=="function"&&ye.length!=1&&(ae=we=!1);var Re=this.__chain__,Ge=!!this.__actions__.length,at=U&&!Re,Dt=ae&&!Ge;if(!U&&we){J=Dt?J:new Et(this);var ut=u.apply(J,ee);return ut.__actions__.push({func:us,args:[Oe],thisArg:r}),new wn(ut,Re)}return at&&Dt?u.apply(this,ee):(ut=this.thru(Oe),at?E?ut.value()[0]:ut.value():ut)})}),Dn(["pop","push","shift","sort","splice","unshift"],function(u){var h=ku[u],_=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",E=/^(?:pop|shift)$/.test(u);N.prototype[u]=function(){var I=arguments;if(E&&!this.__chain__){var U=this.value();return h.apply(dt(U)?U:[],I)}return this[_](function(J){return h.apply(dt(J)?J:[],I)})}}),Wn(Et.prototype,function(u,h){var _=N[h];if(_){var E=_.name+"";xt.call(ca,E)||(ca[E]=[]),ca[E].push({name:h,func:_})}}),ca[Xu(r,D).name]=[{name:"wrapper",func:r}],Et.prototype.clone=yv,Et.prototype.reverse=wv,Et.prototype.value=Ev,N.prototype.at=Q_,N.prototype.chain=X_,N.prototype.commit=e2,N.prototype.next=t2,N.prototype.plant=n2,N.prototype.reverse=i2,N.prototype.toJSON=N.prototype.valueOf=N.prototype.value=a2,N.prototype.first=N.prototype.head,Za&&(N.prototype[Za]=r2),N},oa=ev();qi?((qi.exports=oa)._=oa,Oo._=oa):Mr._=oa}).call(gr)})(Y8,no);const Z8=no,df="panelMode";function J8(){const t=er("select"),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[df]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[df]=a,r(a))},get:()=>Ft(t),delete:()=>{i&&(delete localStorage[df],r("select"))}}}const pi=J8();function hp(t,e,r){const n=t.slice();return n[7]=e[r][0],n[8]=e[r][1],n}function dp(t,e,r){const n=t.slice();return n[11]=e[r][0],n[12]=e[r][1],n}function pp(t){let e=t[12].text+"",r,n,i,a;return{c(){r=Ce(e),n=W("b"),i=Ce("::"),a=Ee()},l(o){r=Fe(o,e),n=H(o,"B",{});var s=j(n);i=Fe(s,"::"),s.forEach(O),a=Ae(o)},m(o,s){se(o,r,s),se(o,n,s),T(n,i),se(o,a,s)},p(o,s){s&1&&e!==(e=o[12].text+"")&&zt(r,e)},d(o){o&&O(r),o&&O(n),o&&O(a)}}}function gp(t,e){let r,n,i,a,o,s=Object.entries(e[8].weightedPrompts),l=[];for(let f=0;f<s.length;f+=1)l[f]=pp(dp(e,s,f));function p(){return e[5](e[7],e[8])}return{key:t,first:null,c(){r=W("li"),n=W("a");for(let f=0;f<l.length;f+=1)l[f].c();i=Ee(),this.h()},l(f){r=H(f,"LI",{});var c=j(r);n=H(c,"A",{class:!0});var d=j(n);for(let g=0;g<l.length;g+=1)l[g].l(d);d.forEach(O),i=Ae(c),c.forEach(O),this.h()},h(){B(n,"class","text-xs inline-block"),st(n,"active",e[1]===e[7]),this.first=r},m(f,c){se(f,r,c),T(r,n);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(n,null);T(r,i),a||(o=De(n,"click",p),a=!0)},p(f,c){if(e=f,c&5){s=Object.entries(e[8].weightedPrompts);let d;for(d=0;d<s.length;d+=1){const g=dp(e,s,d);l[d]?l[d].p(g,c):(l[d]=pp(g),l[d].c(),l[d].m(n,null))}for(;d<l.length;d+=1)l[d].d(1);l.length=s.length}c&7&&st(n,"active",e[1]===e[7])},d(f){f&&O(r),Eu(l,f),a=!1,o()}}}function Q8(t){let e,r,n,i,a,o=[],s=new Map,l,p,f=t[2](t[0],vp,"desc");const c=d=>d[7];for(let d=0;d<f.length;d+=1){let g=hp(t,f,d),b=c(g);s.set(b,o[d]=gp(b,g))}return{c(){e=W("ul"),r=W("li"),n=W("a"),i=Ce("New +"),a=Ee();for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=H(d,"UL",{class:!0});var g=j(e);r=H(g,"LI",{});var b=j(r);n=H(b,"A",{class:!0});var v=j(n);i=Fe(v,"New +"),v.forEach(O),b.forEach(O),a=Ae(g);for(let m=0;m<o.length;m+=1)o[m].l(g);g.forEach(O),this.h()},h(){B(n,"class","text-xs inline-block"),B(e,"class","menu h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(d,g){se(d,e,g),T(e,r),T(r,n),T(n,i),T(e,a);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(e,null);l||(p=De(n,"click",t[3]),l=!0)},p(d,[g]){g&23&&(f=d[2](d[0],vp,"desc"),o=Un(o,g,c,1,d,f,s,e,Zn,gp,null,hp))},i:Pe,o:Pe,d(d){d&&O(e);for(let g=0;g<o.length;g+=1)o[g].d();l=!1,p()}}}const vp=t=>t[1].date;function X8(t,e,r){let n,i,a;$e(t,it,f=>r(6,n=f)),$e(t,wy,f=>r(0,i=f)),$e(t,Xi,f=>r(1,a=f));const{orderBy:o}=Z8;function s(){Xi.delete(),it.update(Bi({},n.weightMode)),pi.update("edit")}function l(f,c){Xi.update(f),it.update({...c}),pi.update("edit")}return[i,a,o,s,l,(f,c)=>l(f,c)]}class e7 extends Xe{constructor(e){super(),et(this,e,X8,Q8,tt,{})}}function mp(t,e,r){const n=t.slice();return n[21]=e[r].id,n[22]=e[r].text,n}function _p(t,e){let r,n,i,a,o;function s(...p){return e[10](e[21],...p)}function l(...p){return e[11](e[21],...p)}return{key:t,first:null,c(){r=W("li"),n=W("input"),this.h()},l(p){r=H(p,"LI",{class:!0});var f=j(r);n=H(f,"INPUT",{type:!0,placeholder:!0,class:!0}),f.forEach(O),this.h()},h(){n.value=i=e[22],B(n,"type","text"),B(n,"placeholder",""),B(n,"class","input input-bordered input-sm w-full"),B(r,"class","p-1"),this.first=r},m(p,f){se(p,r,f),T(r,n),a||(o=[De(n,"input",s),De(n,"keydown",l),De(n,"keyup",e[12])],a=!0)},p(p,f){e=p,f&4&&i!==(i=e[22])&&n.value!==i&&(n.value=i)},d(p){p&&O(r),a=!1,qt(o)}}}function t7(t){let e,r,n,i,a,o,s,l,p,f,c,d=[],g=new Map,b,v,m,D,S,w,C,F,M,P,A,x,R=t[2];const Z=K=>K[21];for(let K=0;K<R.length;K+=1){let L=mp(t,R,K),V=Z(L);g.set(V,d[K]=_p(V,L))}return{c(){e=W("div"),r=W("button"),n=Ce("Paste"),i=Ee(),a=W("button"),o=Ce("Save"),s=Ee(),l=W("button"),p=Ce("Delete"),f=Ee(),c=W("ul");for(let K=0;K<d.length;K+=1)d[K].c();b=Ee(),v=W("li"),m=W("input"),D=Ee(),S=W("div"),w=W("p"),C=Ce("Shift+Enter to add a line"),F=Ee(),M=W("p"),P=Ce("Bksp to remove an empty line"),this.h()},l(K){e=H(K,"DIV",{class:!0});var L=j(e);r=H(L,"BUTTON",{class:!0});var V=j(r);n=Fe(V,"Paste"),V.forEach(O),i=Ae(L),a=H(L,"BUTTON",{class:!0});var q=j(a);o=Fe(q,"Save"),q.forEach(O),s=Ae(L),l=H(L,"BUTTON",{class:!0});var z=j(l);p=Fe(z,"Delete"),z.forEach(O),L.forEach(O),f=Ae(K),c=H(K,"UL",{class:!0});var Q=j(c);for(let be=0;be<d.length;be+=1)d[be].l(Q);b=Ae(Q),v=H(Q,"LI",{class:!0});var X=j(v);m=H(X,"INPUT",{type:!0,placeholder:!0,class:!0}),X.forEach(O),Q.forEach(O),D=Ae(K),S=H(K,"DIV",{class:!0});var te=j(S);w=H(te,"P",{});var oe=j(w);C=Fe(oe,"Shift+Enter to add a line"),oe.forEach(O),F=Ae(te),M=H(te,"P",{});var _e=j(M);P=Fe(_e,"Bksp to remove an empty line"),_e.forEach(O),te.forEach(O),this.h()},h(){B(r,"class","btn btn-sm btn-info mx-2"),B(a,"class","btn btn-sm btn-success mx-2"),B(l,"class","btn btn-sm btn-error mx-2"),B(e,"class","flex px-8 py-2 justify-center bg-base-100"),B(m,"type","text"),B(m,"placeholder","Add prompt"),B(m,"class","input input-bordered input-sm w-full italic"),B(v,"class","p-1"),B(c,"class","h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block"),B(S,"class","w-full justify-end bg-base-100 p-2 text-xs select-none")},m(K,L){se(K,e,L),T(e,r),T(r,n),T(e,i),T(e,a),T(a,o),T(e,s),T(e,l),T(l,p),se(K,f,L),se(K,c,L);for(let V=0;V<d.length;V+=1)d[V]&&d[V].m(c,null);T(c,b),T(c,v),T(v,m),nn(m,t[0]),se(K,D,L),se(K,S,L),T(S,w),T(w,C),T(S,F),T(S,M),T(M,P),A||(x=[De(r,"click",t[4]),De(a,"click",t[3]),De(l,"click",t[5]),De(m,"input",t[13]),De(m,"keydown",t[14])],A=!0)},p(K,[L]){L&198&&(R=K[2],d=Un(d,L,Z,1,K,R,g,c,Zn,_p,b,mp)),L&1&&m.value!==K[0]&&nn(m,K[0])},i:Pe,o:Pe,d(K){K&&O(e),K&&O(f),K&&O(c);for(let L=0;L<d.length;L+=1)d[L].d();K&&O(D),K&&O(S),A=!1,qt(x)}}}function r7(t,e,r){let n,i,a,o;$e(t,it,A=>r(9,i=A)),$e(t,Xi,A=>r(15,a=A)),$e(t,Zr,A=>r(16,o=A));let s="",l=Object.keys(i.weightedPrompts).length,p=!1;function f(){du.update(_o(),{...i,date:Date.now()}),pi.update("select")}function c(){navigator.clipboard.readText().then(A=>{const x=js(A),R=Object.values(i.weightedPrompts).map(Z=>[Z.text,Z.parsedWeight]);d([...R,...x])})}function d(A){const x=Math.max(...A.map(([Z,K])=>K)),R=A.reduce((Z,[K,L],V)=>(Z[V]=Ir(V,K,L,L/x),o[K]||Zr.update(K,null),Z),{});Xi.delete(),it.update(Bi(R,i.weightMode)),r(0,s="")}function g(){a&&du.delete(a),Xi.delete(),it.delete(),pi.update("select")}function b(A){console.log("remove",A);const R=Object.entries(i.weightedPrompts).filter(([Z])=>Z!==A).map(([Z,K])=>[K.text,K.parsedWeight]);return d(R)}function v(A,x){console.log("change",A);let R={...i.weightedPrompts};const Z={...R[A],text:x};R[A]=Z,it.update({...i,weightedPrompts:R})}const m=Xs(v,500);function D(A){console.log("new",A);const x=Object.entries(i.weightedPrompts).map(([R,Z])=>[Z.text,Z.parsedWeight]);return x.push([A,1]),d(x)}function S(A,x=null){const R=A.key,Z=A.target.value;if(R==="Shift"){r(1,p=!0);return}if(x!==null){if(R==="Enter"&&Z!==""?v(x,Z):R==="Backspace"&&Z===""&&b(x),R==="Enter"&&p){const L=Object.entries(i.weightedPrompts).map(([q,z])=>[z.text,z.parsedWeight]),V=parseInt(x)+1;return console.log("adding prompt at",x+1),L.splice(V,0,["",1]),d(L)}}else R==="Enter"&&Z!==""&&D(Z)}const w=(A,x)=>m(A,x.target.value),C=(A,x)=>S(x,A),F=A=>{A.key==="Shift"&&r(1,p=!1)};function M(){s=this.value,r(0,s),r(9,i),r(8,l)}const P=A=>S(A);return t.$$.update=()=>{if(t.$$.dirty&768){const A=Object.keys(i.weightedPrompts).length;A>l&&(r(8,l=A),r(0,s=""))}t.$$.dirty&512&&r(2,n=Object.entries(i.weightedPrompts).map(([A,x])=>({id:A,text:x.text})))},[s,p,n,f,c,g,m,S,l,i,w,C,F,M,P]}class n7 extends Xe{constructor(e){super(),et(this,e,r7,t7,tt,{})}}const i7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. The first sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. The middle three sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. The final sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,a7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 10 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. Four sentences should describe the subject.
    d. Four sentences should describe the scene.
    e. Tow sentences should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,u7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 10 concepts.
    a. Each concept should be 10 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
`,s7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 20 concepts.
    a. Each concept should be 5 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
3. Do not use hyphens to mark list items.
4. Do not title the list.
`,o7=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. One sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. Two sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. One sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
    f. One sentence should be a poetic concept or feeling. Example: The unfathomable depths of a lover's sigh.
        i. The poetic concept should be intense.
        ii. The poetic concept should be emotional.
        iii. The poetic concept should include abstract words.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`;function l7(){const t=er({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith("directive")){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=Ft(t),p={...s[a]||{},...o};i&&(localStorage[`directive_${a}`]=JSON.stringify(p));const f={...s,[a]:p};r(f)},get:a=>Ft(t)[a],delete:a=>{i&&delete localStorage[`directive_${a}`];const o={...Ft(t)};delete o[a],r(o)}}}const io=l7(),f7=Au(io,t=>Object.entries(Ft(io))),pf="preferredDirective";function c7(){const t=er(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[pf]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[pf]=a,r(a))},get:()=>Ft(t),delete:()=>{i&&(delete localStorage[pf],r(""))}}}const Es=c7(),gf="metaPrompt";function h7(){const t=er(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[gf]||""),{subscribe:e,update:a=>{i&&(localStorage[gf]=a,r(a))},get:()=>Ft(t),delete:()=>{i&&(delete localStorage[gf],r(""))}}}const zf=h7(),ya=er("");function bp(t,e,r){const n=t.slice();return n[21]=e[r][0],n[22]=e[r][1],n}function Dp(t,e){let r,n=e[22].name+"",i,a=e[22].builtIn?" (Built-In)":" (User)",o,s,l;return{key:t,first:null,c(){r=W("option"),i=Ce(n),o=Ce(a),this.h()},l(p){r=H(p,"OPTION",{});var f=j(r);i=Fe(f,n),o=Fe(f,a),f.forEach(O),this.h()},h(){r.__value=s=e[21],r.value=r.__value,r.selected=l=e[3]===e[21],this.first=r},m(p,f){se(p,r,f),T(r,i),T(r,o)},p(p,f){e=p,f&16&&n!==(n=e[22].name+"")&&zt(i,n),f&16&&a!==(a=e[22].builtIn?" (Built-In)":" (User)")&&zt(o,a),f&16&&s!==(s=e[21])&&(r.__value=s,r.value=r.__value),f&24&&l!==(l=e[3]===e[21])&&(r.selected=l)},d(p){p&&O(r)}}}function yp(t){let e,r,n,i,a,o,s,l,p,f,c,d,g,b,v=!t[7]&&wp(t),m=t[6]&&Ep(t);function D(C,F){return C[1]?p7:d7}let S=D(t),w=S(t);return{c(){v&&v.c(),e=Ee(),r=W("div"),n=W("textarea"),i=Ee(),a=W("div"),o=W("textarea"),s=Ee(),l=W("div"),m&&m.c(),p=Ee(),f=W("button"),c=Ce("Preview"),d=Ee(),w.c(),this.h()},l(C){v&&v.l(C),e=Ae(C),r=H(C,"DIV",{class:!0});var F=j(r);n=H(F,"TEXTAREA",{class:!0,placeholder:!0}),j(n).forEach(O),F.forEach(O),i=Ae(C),a=H(C,"DIV",{class:!0});var M=j(a);o=H(M,"TEXTAREA",{class:!0,placeholder:!0}),j(o).forEach(O),M.forEach(O),s=Ae(C),l=H(C,"DIV",{class:!0});var P=j(l);m&&m.l(P),p=Ae(P),f=H(P,"BUTTON",{class:!0});var A=j(f);c=Fe(A,"Preview"),A.forEach(O),d=Ae(P),w.l(P),P.forEach(O),this.h()},h(){B(n,"class","font-mono text-xs textarea textarea-bordered w-full h-full resize-none"),B(n,"placeholder","GPT Directives"),B(r,"class","w-full p-2 h-1/2"),o.value=t[9],B(o,"class","textarea textarea-bordered w-full h-full resize-none"),B(o,"placeholder","Describe the prompt to generate."),B(a,"class","w-full p-2 h-1/5"),B(f,"class","btn btn-sm btn btn-info"),B(l,"class","w-full p-2 h-12 flex justify-between")},m(C,F){v&&v.m(C,F),se(C,e,F),se(C,r,F),T(r,n),nn(n,t[8]),se(C,i,F),se(C,a,F),T(a,o),se(C,s,F),se(C,l,F),m&&m.m(l,null),T(l,p),T(l,f),T(f,c),T(l,d),w.m(l,null),g||(b=[De(n,"input",t[17]),De(o,"input",t[18]),De(f,"click",function(){Fa(t[0])&&t[0].apply(this,arguments)})],g=!0)},p(C,F){t=C,t[7]?v&&(v.d(1),v=null):v?v.p(t,F):(v=wp(t),v.c(),v.m(e.parentNode,e)),F&256&&nn(n,t[8]),F&512&&(o.value=t[9]),t[6]?m?m.p(t,F):(m=Ep(t),m.c(),m.m(l,p)):m&&(m.d(1),m=null),S===(S=D(t))&&w?w.p(t,F):(w.d(1),w=S(t),w&&(w.c(),w.m(l,null)))},d(C){v&&v.d(C),C&&O(e),C&&O(r),C&&O(i),C&&O(a),C&&O(s),C&&O(l),m&&m.d(),w.d(),g=!1,qt(b)}}}function wp(t){let e,r,n,i,a,o,s;return{c(){e=W("div"),r=W("input"),n=Ee(),i=W("button"),a=Ce("Save"),this.h()},l(l){e=H(l,"DIV",{class:!0});var p=j(e);r=H(p,"INPUT",{type:!0,placeholder:!0,class:!0}),n=Ae(p),i=H(p,"BUTTON",{class:!0});var f=j(i);a=Fe(f,"Save"),f.forEach(O),p.forEach(O),this.h()},h(){B(r,"type","text"),B(r,"placeholder","Name"),B(r,"class","input input-bordered input-sm w-full max-w-xs"),B(i,"class","btn btn-sm btn-primary ml-4"),B(e,"class","w-full p-2 h-12 flex justify-between")},m(l,p){se(l,e,p),T(e,r),nn(r,t[5]),T(e,n),T(e,i),T(i,a),o||(s=[De(r,"input",t[16]),De(i,"click",t[10])],o=!0)},p(l,p){p&32&&r.value!==l[5]&&nn(r,l[5])},d(l){l&&O(e),o=!1,qt(s)}}}function Ep(t){let e,r,n,i;return{c(){e=W("button"),r=Ce("Delete"),this.h()},l(a){e=H(a,"BUTTON",{class:!0});var o=j(e);r=Fe(o,"Delete"),o.forEach(O),this.h()},h(){B(e,"class","btn btn-sm btn-error")},m(a,o){se(a,e,o),T(e,r),n||(i=De(e,"click",t[11]),n=!0)},p:Pe,d(a){a&&O(e),n=!1,i()}}}function d7(t){let e,r,n,i;return{c(){e=W("button"),r=Ce("Generate"),this.h()},l(a){e=H(a,"BUTTON",{class:!0});var o=j(e);r=Fe(o,"Generate"),o.forEach(O),this.h()},h(){B(e,"class","btn btn-sm btn-primary")},m(a,o){se(a,e,o),T(e,r),n||(i=De(e,"click",function(){Fa(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(a,o){t=a},d(a){a&&O(e),n=!1,i()}}}function p7(t){let e,r;return{c(){e=W("button"),r=Ce("Generating"),this.h()},l(n){e=H(n,"BUTTON",{class:!0});var i=j(e);r=Fe(i,"Generating"),i.forEach(O),this.h()},h(){B(e,"class","btn btn-sm btn disabled")},m(n,i){se(n,e,i),T(e,r)},p:Pe,d(n){n&&O(e)}}}function g7(t){let e,r,n,i,a,o,s,l,p,f,c=[],d=new Map,g,b,v,m,D,S,w,C=Object.entries(t[4]);const F=P=>P[21];for(let P=0;P<C.length;P+=1){let A=bp(t,C,P),x=F(A);d.set(x,c[P]=Dp(x,A))}let M=t[3]&&yp(t);return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=Ce("Pick a directive for prompt creation"),o=Ee(),s=W("select"),l=W("option"),p=Ce("Pick one");for(let P=0;P<c.length;P+=1)c[P].c();g=W("option"),b=Ce("New"),m=Ee(),M&&M.c(),D=St(),this.h()},l(P){e=H(P,"DIV",{class:!0});var A=j(e);r=H(A,"DIV",{class:!0});var x=j(r);n=H(x,"LABEL",{class:!0});var R=j(n);i=H(R,"SPAN",{class:!0});var Z=j(i);a=Fe(Z,"Pick a directive for prompt creation"),Z.forEach(O),R.forEach(O),o=Ae(x),s=H(x,"SELECT",{class:!0});var K=j(s);l=H(K,"OPTION",{});var L=j(l);p=Fe(L,"Pick one"),L.forEach(O);for(let q=0;q<c.length;q+=1)c[q].l(K);g=H(K,"OPTION",{});var V=j(g);b=Fe(V,"New"),V.forEach(O),K.forEach(O),x.forEach(O),A.forEach(O),m=Ae(P),M&&M.l(P),D=St(),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),l.disabled=!0,l.selected=f=t[3]===null,l.__value="Pick one",l.value=l.__value,g.__value="new",g.value=g.__value,g.selected=v=t[3]==="new",B(s,"class","select select-bordered"),B(r,"class","form-control w-full max-w-xs mb-4"),B(e,"class","flex justify-center")},m(P,A){se(P,e,A),T(e,r),T(r,n),T(n,i),T(i,a),T(r,o),T(r,s),T(s,l),T(l,p);for(let x=0;x<c.length;x+=1)c[x]&&c[x].m(s,null);T(s,g),T(g,b),ki(s,t[3]),se(P,m,A),M&&M.m(P,A),se(P,D,A),S||(w=De(s,"change",t[12]),S=!0)},p(P,[A]){A&24&&f!==(f=P[3]===null)&&(l.selected=f),A&24&&(C=Object.entries(P[4]),c=Un(c,A,F,1,P,C,d,s,Zn,Dp,g,bp)),A&24&&v!==(v=P[3]==="new")&&(g.selected=v),A&24&&ki(s,P[3]),P[3]?M?M.p(P,A):(M=yp(P),M.c(),M.m(D.parentNode,D)):M&&(M.d(1),M=null)},i:Pe,o:Pe,d(P){P&&O(e);for(let A=0;A<c.length;A+=1)c[A].d();P&&O(m),M&&M.d(P),P&&O(D),S=!1,w()}}}function v7(t,e,r){let n,i,a,o,s,l,p,f;$e(t,ya,A=>r(8,s=A)),$e(t,Es,A=>r(14,l=A)),$e(t,f7,A=>r(15,p=A)),$e(t,zf,A=>r(9,f=A));let{togglePreview:c=()=>{}}=e,{isGenerating:d=!1}=e,{handleGeneratePrompt:g=()=>{}}=e,b={C:{name:"Five Sentences",text:i7,builtIn:!0},D:{name:"Ten Sentences",text:a7,builtIn:!0},E:{name:"Fragments",text:u7,builtIn:!0},F:{name:"Concept Shotgun",text:s7,builtIn:!0},G:{name:"Poetic Accents",text:o7,builtIn:!0}},v=null,m="";function D(){const A=v==="new"?_o():v;io.update(A,{name:m,text:s,builtIn:!1}),v==="new"&&(r(3,v=A),Es.update(A))}function S(){io.delete(v),r(3,v=null),r(5,m=""),ya.set(""),Es.delete()}function w(A){r(3,v=A),Es.update(A),A&&A!=="new"?(r(5,m=i[A].name),ya.set(i[A].text)):A==="new"&&(r(5,m=""),ya.set(""))}function C(A){w(A.target.value)}function F(){m=this.value,r(5,m)}function M(){s=this.value,ya.set(s)}const P=A=>zf.update(A.target.value);return t.$$set=A=>{"togglePreview"in A&&r(0,c=A.togglePreview),"isGenerating"in A&&r(1,d=A.isGenerating),"handleGeneratePrompt"in A&&r(2,g=A.handleGeneratePrompt)},t.$$.update=()=>{t.$$.dirty&32768&&r(13,n=p.reduce((A,[x,R])=>(A[x]={name:R.name,text:R.text,builtIn:!1},A),{})),t.$$.dirty&8192&&r(4,i=Object.entries({...b,...n}).reduce((A,[x,R])=>(A[x]=R,A),{})),t.$$.dirty&16392&&v===null&&l&&(r(3,v=l),w(v)),t.$$.dirty&24&&r(7,a=v&&v!=="new"&&i[v].builtIn),t.$$.dirty&24&&r(6,o=v&&v!=="new"&&!i[v].builtIn)},[c,d,g,v,i,m,o,a,s,f,D,S,C,n,l,p,F,M,P]}class m7 extends Xe{constructor(e){super(),et(this,e,v7,g7,tt,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}function _7(t,e){return`${t}

Use the following text to generate output based on the instructions above:

${e}`}const fg=Au([ya,zf,xi],t=>mu(_7(t[0],t[1]),t[2]));function b7(t){let e,r,n,i;return{c(){e=W("button"),r=Ce("Generate"),this.h()},l(a){e=H(a,"BUTTON",{class:!0});var o=j(e);r=Fe(o,"Generate"),o.forEach(O),this.h()},h(){B(e,"class","btn btn-sm btn-primary")},m(a,o){se(a,e,o),T(e,r),n||(i=De(e,"click",function(){Fa(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(a,o){t=a},d(a){a&&O(e),n=!1,i()}}}function D7(t){let e,r;return{c(){e=W("button"),r=Ce("Generating"),this.h()},l(n){e=H(n,"BUTTON",{class:!0});var i=j(e);r=Fe(i,"Generating"),i.forEach(O),this.h()},h(){B(e,"class","btn btn-sm btn disabled")},m(n,i){se(n,e,i),T(e,r)},p:Pe,d(n){n&&O(e)}}}function y7(t){let e,r,n,i,a,o,s,l,p,f;function c(b,v){return b[1]?D7:b7}let d=c(t),g=d(t);return{c(){e=W("div"),r=W("p"),n=Ce(t[3]),i=Ee(),a=W("div"),o=W("button"),s=Ce("Back"),l=Ee(),g.c(),this.h()},l(b){e=H(b,"DIV",{class:!0});var v=j(e);r=H(v,"P",{class:!0});var m=j(r);n=Fe(m,t[3]),m.forEach(O),v.forEach(O),i=Ae(b),a=H(b,"DIV",{class:!0});var D=j(a);o=H(D,"BUTTON",{class:!0});var S=j(o);s=Fe(S,"Back"),S.forEach(O),l=Ae(D),g.l(D),D.forEach(O),this.h()},h(){B(r,"class","font-mono text-xs whitespace-pre-wrap"),B(e,"class","p-4 overflow-y-auto"),B(o,"class","btn btn-sm btn btn-info"),B(a,"class","w-full p-2 h-12 flex justify-between")},m(b,v){se(b,e,v),T(e,r),T(r,n),se(b,i,v),se(b,a,v),T(a,o),T(o,s),T(a,l),g.m(a,null),p||(f=De(o,"click",function(){Fa(t[0])&&t[0].apply(this,arguments)}),p=!0)},p(b,[v]){t=b,v&8&&zt(n,t[3]),d===(d=c(t))&&g?g.p(t,v):(g.d(1),g=d(t),g&&(g.c(),g.m(a,null)))},i:Pe,o:Pe,d(b){b&&O(e),b&&O(i),b&&O(a),g.d(),p=!1,f()}}}function w7(t,e,r){let n;$e(t,fg,s=>r(3,n=s));let{togglePreview:i=()=>{}}=e,{isGenerating:a=!1}=e,{handleGeneratePrompt:o=()=>{}}=e;return t.$$set=s=>{"togglePreview"in s&&r(0,i=s.togglePreview),"isGenerating"in s&&r(1,a=s.isGenerating),"handleGeneratePrompt"in s&&r(2,o=s.handleGeneratePrompt)},[i,a,o,n]}class E7 extends Xe{constructor(e){super(),et(this,e,w7,y7,tt,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}const vf="preferredModel";function A7(){const t=er(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[vf]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[vf]=a,r(a))},get:()=>Ft(t),delete:()=>{i&&(delete localStorage[vf],r(""))}}}const qf=A7();function C7(t){let e,r,n;return{c(){e=W("div"),r=W("p"),n=Ce("Set Open AI Key in settings for GPT generation."),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=j(e);r=H(a,"P",{class:!0});var o=j(r);n=Fe(o,"Set Open AI Key in settings for GPT generation."),o.forEach(O),a.forEach(O),this.h()},h(){B(r,"class","text-center"),B(e,"class","w-full p-2 flex justify-center")},m(i,a){se(i,e,a),T(e,r),T(r,n)},p:Pe,i:Pe,o:Pe,d(i){i&&O(e)}}}function F7(t){let e,r,n,i;const a=[B7,S7],o=[];function s(l,p){return l[1]?0:1}return e=s(t),r=o[e]=a[e](t),{c(){r.c(),n=St()},l(l){r.l(l),n=St()},m(l,p){o[e].m(l,p),se(l,n,p),i=!0},p(l,p){let f=e;e=s(l),e===f?o[e].p(l,p):(sr(),me(o[f],1,1,()=>{o[f]=null}),or(),r=o[e],r?r.p(l,p):(r=o[e]=a[e](l),r.c()),ce(r,1),r.m(n.parentNode,n))},i(l){i||(ce(r),i=!0)},o(l){me(r),i=!1},d(l){o[e].d(l),l&&O(n)}}}function S7(t){let e,r;return e=new m7({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p(n,i){const a={};i&1&&(a.isGenerating=n[0]),e.$set(a)},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function B7(t){let e,r;return e=new E7({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},p(n,i){const a={};i&1&&(a.isGenerating=n[0]),e.$set(a)},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function O7(t){let e,r,n,i;const a=[F7,C7],o=[];function s(l,p){return l[2]?0:1}return r=s(t),n=o[r]=a[r](t),{c(){e=W("div"),n.c(),this.h()},l(l){e=H(l,"DIV",{class:!0});var p=j(e);n.l(p),p.forEach(O),this.h()},h(){B(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(l,p){se(l,e,p),o[r].m(e,null),i=!0},p(l,[p]){n.p(l,p)},i(l){i||(ce(n),i=!0)},o(l){me(n),i=!1},d(l){l&&O(e),o[r].d()}}}function M7(t,e,r){let n,i,a,o,s,l;$e(t,fg,D=>r(7,i=D)),$e(t,it,D=>r(8,a=D)),$e(t,Zr,D=>r(9,o=D)),$e(t,qf,D=>r(5,s=D)),$e(t,di,D=>r(10,l=D));const p=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001"];let f=!1,c=l,d=!1;function g(D,S){const w=ro(D),C=n||"gpt-3.5-turbo";r(0,f=!0),A8(w,S,C).then(F=>{console.log(F),F.data.choices.forEach((M,P)=>{const A=js(M.message.content);console.log(A);const x=A.reduce((R,[Z,K],L)=>(R[L]=Ir(L,Z,K),o[Z]||Zr.update(Z,null),R),{});it.update(Bi(x,a.weightMode)),pi.update("edit"),xi.shuffle()})}).finally(()=>{r(0,f=!1)})}function b(D,S){const w=ro(D),C=n||"text-davinci-003";r(0,f=!0),E8(w,S,C).then(F=>{console.log(F),F.data.choices.forEach((M,P)=>{const A=js(M.text);console.log(A);const x=A.reduce((R,[Z,K],L)=>(R[L]=Ir(L,Z,K),o[Z]||Zr.update(Z,null),R),{});it.update(Bi(x,a.weightMode)),pi.update("edit"),xi.shuffle()})}).finally(()=>{r(0,f=!1)})}function v(){c&&(p.includes(n)?b(c,i):g(c,i))}function m(){console.log(i),r(1,d=!d)}return t.$$.update=()=>{t.$$.dirty&32&&(n=s||null)},[f,d,c,v,m,s]}class P7 extends Xe{constructor(e){super(),et(this,e,M7,O7,tt,{})}}function Ap(t,e,r){const n=t.slice();return n[20]=e[r],n}function Cp(t,e,r){const n=t.slice();return n[20]=e[r],n}function k7(t){return{c:Pe,l:Pe,m:Pe,p:Pe,d:Pe}}function T7(t){let e,r,n,i,a,o,s,l,p,f,c,d,g,b=t[0].length>0&&Fp(t),v=t[1].length>0&&Bp(t);return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=Ce("Embed Cache Size: "),o=Ce(t[6]),s=Ee(),l=W("input"),p=Ee(),b&&b.c(),f=Ee(),v&&v.c(),c=St(),this.h()},l(m){e=H(m,"DIV",{class:!0});var D=j(e);r=H(D,"DIV",{class:!0});var S=j(r);n=H(S,"LABEL",{class:!0});var w=j(n);i=H(w,"SPAN",{class:!0});var C=j(i);a=Fe(C,"Embed Cache Size: "),o=Fe(C,t[6]),C.forEach(O),w.forEach(O),s=Ae(S),l=H(S,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),S.forEach(O),D.forEach(O),p=Ae(m),b&&b.l(m),f=Ae(m),v&&v.l(m),c=St(),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),l.value=t[6],B(l,"type","range"),B(l,"min","0"),B(l,"max",150),B(l,"step","1"),B(l,"class","range range-sm"),B(r,"class","px-10 w-full"),B(e,"class","flex justify-center")},m(m,D){se(m,e,D),T(e,r),T(r,n),T(n,i),T(i,a),T(i,o),T(r,s),T(r,l),se(m,p,D),b&&b.m(m,D),se(m,f,D),v&&v.m(m,D),se(m,c,D),d||(g=De(l,"change",t[12]),d=!0)},p(m,D){D&64&&zt(o,m[6]),D&64&&(l.value=m[6]),m[0].length>0?b?b.p(m,D):(b=Fp(m),b.c(),b.m(f.parentNode,f)):b&&(b.d(1),b=null),m[1].length>0?v?v.p(m,D):(v=Bp(m),v.c(),v.m(c.parentNode,c)):v&&(v.d(1),v=null)},d(m){m&&O(e),m&&O(p),b&&b.d(m),m&&O(f),v&&v.d(m),m&&O(c),d=!1,g()}}}function Fp(t){let e,r,n,i,a,o,s,l,p,f,c=[],d=new Map,g,b,v=t[0];const m=D=>D[20];for(let D=0;D<v.length;D+=1){let S=Cp(t,v,D),w=m(S);d.set(w,c[D]=Sp(w,S))}return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=Ce("Pick a model to use for model generation"),o=Ee(),s=W("select"),l=W("option"),p=Ce("Pick one");for(let D=0;D<c.length;D+=1)c[D].c();this.h()},l(D){e=H(D,"DIV",{class:!0});var S=j(e);r=H(S,"DIV",{class:!0});var w=j(r);n=H(w,"LABEL",{class:!0});var C=j(n);i=H(C,"SPAN",{class:!0});var F=j(i);a=Fe(F,"Pick a model to use for model generation"),F.forEach(O),C.forEach(O),o=Ae(w),s=H(w,"SELECT",{class:!0});var M=j(s);l=H(M,"OPTION",{});var P=j(l);p=Fe(P,"Pick one"),P.forEach(O);for(let A=0;A<c.length;A+=1)c[A].l(M);M.forEach(O),w.forEach(O),S.forEach(O),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),l.disabled=!0,l.selected=f=t[2]===null,l.__value="Pick one",l.value=l.__value,B(s,"class","select select-bordered"),B(r,"class","form-control w-full max-w-xs mb-4"),B(e,"class","flex justify-center")},m(D,S){se(D,e,S),T(e,r),T(r,n),T(n,i),T(i,a),T(r,o),T(r,s),T(s,l),T(l,p);for(let w=0;w<c.length;w+=1)c[w]&&c[w].m(s,null);ki(s,t[2]),g||(b=De(s,"change",t[7]),g=!0)},p(D,S){S&5&&f!==(f=D[2]===null)&&(l.selected=f),S&5&&(v=D[0],c=Un(c,S,m,1,D,v,d,s,Zn,Sp,null,Cp)),S&5&&ki(s,D[2])},d(D){D&&O(e);for(let S=0;S<c.length;S+=1)c[S].d();g=!1,b()}}}function Sp(t,e){let r,n=e[20]+"",i,a,o;return{key:t,first:null,c(){r=W("option"),i=Ce(n),this.h()},l(s){r=H(s,"OPTION",{});var l=j(r);i=Fe(l,n),l.forEach(O),this.h()},h(){r.__value=a=e[20],r.value=r.__value,r.selected=o=e[2]===e[20],this.first=r},m(s,l){se(s,r,l),T(r,i)},p(s,l){e=s,l&1&&n!==(n=e[20]+"")&&zt(i,n),l&1&&a!==(a=e[20])&&(r.__value=a,r.value=r.__value),l&5&&o!==(o=e[2]===e[20])&&(r.selected=o)},d(s){s&&O(r)}}}function Bp(t){let e,r,n,i,a,o,s,l,p,f,c=[],d=new Map,g,b,v=t[1];const m=D=>D[20];for(let D=0;D<v.length;D+=1){let S=Ap(t,v,D),w=m(S);d.set(w,c[D]=Op(w,S))}return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=Ce("Pick a model to use for prompt embedding"),o=Ee(),s=W("select"),l=W("option"),p=Ce("Pick one");for(let D=0;D<c.length;D+=1)c[D].c();this.h()},l(D){e=H(D,"DIV",{class:!0});var S=j(e);r=H(S,"DIV",{class:!0});var w=j(r);n=H(w,"LABEL",{class:!0});var C=j(n);i=H(C,"SPAN",{class:!0});var F=j(i);a=Fe(F,"Pick a model to use for prompt embedding"),F.forEach(O),C.forEach(O),o=Ae(w),s=H(w,"SELECT",{class:!0});var M=j(s);l=H(M,"OPTION",{});var P=j(l);p=Fe(P,"Pick one"),P.forEach(O);for(let A=0;A<c.length;A+=1)c[A].l(M);M.forEach(O),w.forEach(O),S.forEach(O),this.h()},h(){B(i,"class","label-text"),B(n,"class","label"),l.disabled=!0,l.selected=f=t[3]===null,l.__value="Pick one",l.value=l.__value,B(s,"class","select select-bordered"),B(r,"class","form-control w-full max-w-xs mb-4"),B(e,"class","flex justify-center")},m(D,S){se(D,e,S),T(e,r),T(r,n),T(n,i),T(i,a),T(r,o),T(r,s),T(s,l),T(l,p);for(let w=0;w<c.length;w+=1)c[w]&&c[w].m(s,null);ki(s,t[3]),g||(b=De(s,"change",t[8]),g=!0)},p(D,S){S&10&&f!==(f=D[3]===null)&&(l.selected=f),S&10&&(v=D[1],c=Un(c,S,m,1,D,v,d,s,Zn,Op,null,Ap)),S&10&&ki(s,D[3])},d(D){D&&O(e);for(let S=0;S<c.length;S+=1)c[S].d();g=!1,b()}}}function Op(t,e){let r,n=e[20]+"",i,a,o;return{key:t,first:null,c(){r=W("option"),i=Ce(n),this.h()},l(s){r=H(s,"OPTION",{});var l=j(r);i=Fe(l,n),l.forEach(O),this.h()},h(){r.__value=a=e[20],r.value=r.__value,r.selected=o=e[3]===e[20],this.first=r},m(s,l){se(s,r,l),T(r,i)},p(s,l){e=s,l&2&&n!==(n=e[20]+"")&&zt(i,n),l&2&&a!==(a=e[20])&&(r.__value=a,r.value=r.__value),l&10&&o!==(o=e[3]===e[20])&&(r.selected=o)},d(s){s&&O(r)}}}function I7(t){let e,r,n;return{c(){e=W("div"),r=W("div"),n=W("progress"),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=j(e);r=H(a,"DIV",{class:!0});var o=j(r);n=H(o,"PROGRESS",{class:!0}),j(n).forEach(O),o.forEach(O),a.forEach(O),this.h()},h(){B(n,"class","progress progress-primary w-56"),B(r,"class","form-control w-full flex flex-col max-w-xs"),B(e,"class","py-10 flex justify-center")},m(i,a){se(i,e,a),T(e,r),T(r,n)},p:Pe,d(i){i&&O(e)}}}function x7(t){let e,r,n,i,a,o,s,l,p,f,c,d,g,b,v,m,D={ctx:t,current:null,token:null,hasCatch:!1,pending:I7,then:T7,catch:k7,value:19};return Bs(b=t[4],D),{c(){e=W("div"),r=W("div"),n=W("div"),i=W("label"),a=W("span"),o=Ce("Open AI Key"),s=Ee(),l=W("input"),p=Ee(),f=W("label"),c=W("button"),d=Ce("Clear"),g=Ee(),D.block.c(),this.h()},l(S){e=H(S,"DIV",{class:!0});var w=j(e);r=H(w,"DIV",{class:!0});var C=j(r);n=H(C,"DIV",{class:!0});var F=j(n);i=H(F,"LABEL",{class:!0});var M=j(i);a=H(M,"SPAN",{class:!0});var P=j(a);o=Fe(P,"Open AI Key"),P.forEach(O),M.forEach(O),s=Ae(F),l=H(F,"INPUT",{type:!0,placeholder:!0,class:!0}),p=Ae(F),f=H(F,"LABEL",{class:!0});var A=j(f);c=H(A,"BUTTON",{class:!0});var x=j(c);d=Fe(x,"Clear"),x.forEach(O),A.forEach(O),F.forEach(O),C.forEach(O),g=Ae(w),D.block.l(w),w.forEach(O),this.h()},h(){B(a,"class","label-text-alt"),B(i,"class","label"),l.value=t[5],B(l,"type","password"),B(l,"placeholder","Open AI Key"),B(l,"class","input input-bordered w-full max-w-xs"),B(c,"class","btn btn-xs btn-error"),B(f,"class","label"),B(n,"class","form-control w-full max-w-xs"),B(r,"class","flex justify-center"),B(e,"class","h-full p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(S,w){se(S,e,w),T(e,r),T(r,n),T(n,i),T(i,a),T(a,o),T(n,s),T(n,l),T(n,p),T(n,f),T(f,c),T(c,d),T(e,g),D.block.m(e,D.anchor=null),D.mount=()=>e,D.anchor=null,v||(m=[De(l,"input",t[9]),De(c,"click",t[10])],v=!0)},p(S,[w]){t=S,w&32&&l.value!==t[5]&&(l.value=t[5]),D.ctx=t,w&16&&b!==(b=t[4])&&Bs(b,D)||Rp(D,t,w)},i:Pe,o:Pe,d(S){S&&O(e),D.block.d(),D.token=null,D=null,v=!1,qt(m)}}}function N7(t,e,r){let n,i,a,o,s;$e(t,it,M=>r(13,n=M)),$e(t,Vf,M=>r(14,i=M)),$e(t,qf,M=>r(15,a=M)),$e(t,di,M=>r(5,o=M)),$e(t,jf,M=>r(6,s=M));const l=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001","gpt-3.5-turbo","gpt-3.5-turbo-0301"],p=["text-embedding-ada-002"];let f=o,c=[],d=[],g=a,b=i,v=null;async function m(M){if(!M||c.length&&d.length)return;const P=ro(M);r(4,v=F8(P));const A=await v;A.data&&r(0,c=A.data.data.map(({id:x})=>x).filter(x=>l.includes(x))),r(1,d=A.data.data.map(({id:x})=>x).filter(x=>p.includes(x)))}function D(M){r(2,g=M.target.value),qf.update(g)}function S(M){r(3,b=M.target.value),Vf.update(b)}function w(M){const P=M.target.value;di.update(P),P.length===51&&m(P),P.length===0&&C()}function C(){di.delete(),r(11,f=""),r(0,c=[]),r(1,d=[]),n.weightMode===pt.Embed&&it.update({...n,weightMode:pt.Circle})}const F=M=>{jf.update(parseInt(M.target.value)),Zr.cache(s)};return t.$$.update=()=>{t.$$.dirty&2048&&m(f)},[c,d,g,b,v,o,s,D,S,w,C,f,F]}class L7 extends Xe{constructor(e){super(),et(this,e,N7,x7,tt,{})}}function R7(t){let e,r;return{c(){e=gt("svg"),r=gt("path"),this.h()},l(n){e=vt(n,"svg",{xmlns:!0,class:!0,viewBox:!0});var i=j(e);r=vt(i,"path",{fill:!0,d:!0}),j(r).forEach(O),i.forEach(O),this.h()},h(){B(r,"fill","rgba(255,255,255, 0.7)"),B(r,"d","M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"),B(e,"xmlns","http://www.w3.org/2000/svg"),B(e,"class","h-4 w-4"),B(e,"viewBox","0 0 24 24")},m(n,i){se(n,e,i),T(e,r)},p:Pe,i:Pe,o:Pe,d(n){n&&O(e)}}}class U7 extends Xe{constructor(e){super(),et(this,e,null,R7,tt,{})}}function Mp(t,e,r){const n=t.slice();return n[17]=e[r],n[19]=r,n}function Pp(t,e,r){const n=t.slice();return n[20]=e[r][0],n[21]=e[r][1],n}function kp(t,e){let r,n=e[21].name+"",i,a,o;return{key:t,first:null,c(){r=W("option"),i=Ce(n),this.h()},l(s){r=H(s,"OPTION",{});var l=j(r);i=Fe(l,n),l.forEach(O),this.h()},h(){r.__value=a=e[20],r.value=r.__value,r.selected=o=e[0]===e[20],this.first=r},m(s,l){se(s,r,l),T(r,i)},p(s,l){e=s,l&16&&n!==(n=e[21].name+"")&&zt(i,n),l&16&&a!==(a=e[20])&&(r.__value=a,r.value=r.__value),l&17&&o!==(o=e[0]===e[20])&&(r.selected=o)},d(s){s&&O(r)}}}function Tp(t){let e,r,n,i,a,o,s,l,p,f=Vs(t[1])+"",c,d,g=(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1]),b,v,m,D,S,w,C,F,M,P,A,x,R,Z,K=g&&Ip(),L=t[3]&&xp(t);return{c(){e=W("div"),r=W("div"),n=W("input"),i=Ee(),a=W("div"),o=W("label"),s=W("span"),l=Ce("Alias: "),p=W("b"),c=Ce(f),d=Ee(),K&&K.c(),b=Ee(),v=W("button"),m=Ce("Save"),D=Ee(),S=W("ul"),L&&L.c(),w=Ee(),C=W("li"),F=W("input"),M=Ee(),P=W("div"),A=W("button"),x=Ce("Delete"),this.h()},l(V){e=H(V,"DIV",{class:!0});var q=j(e);r=H(q,"DIV",{class:!0});var z=j(r);n=H(z,"INPUT",{type:!0,placeholder:!0,class:!0}),i=Ae(z),a=H(z,"DIV",{class:!0,"data-tip":!0});var Q=j(a);o=H(Q,"LABEL",{class:!0});var X=j(o);s=H(X,"SPAN",{class:!0});var te=j(s);l=Fe(te,"Alias: "),p=H(te,"B",{class:!0});var oe=j(p);c=Fe(oe,f),oe.forEach(O),te.forEach(O),X.forEach(O),Q.forEach(O),d=Ae(z),K&&K.l(z),z.forEach(O),b=Ae(q),v=H(q,"BUTTON",{class:!0});var _e=j(v);m=Fe(_e,"Save"),_e.forEach(O),q.forEach(O),D=Ae(V),S=H(V,"UL",{class:!0});var be=j(S);L&&L.l(be),w=Ae(be),C=H(be,"LI",{class:!0});var Be=j(C);F=H(Be,"INPUT",{type:!0,placeholder:!0,class:!0}),Be.forEach(O),be.forEach(O),M=Ae(V),P=H(V,"DIV",{class:!0});var ke=j(P);A=H(ke,"BUTTON",{class:!0});var Te=j(A);x=Fe(Te,"Delete"),Te.forEach(O),ke.forEach(O),this.h()},h(){B(n,"type","text"),B(n,"placeholder","Name"),B(n,"class","input input-bordered input-sm w-full max-w-xs"),B(p,"class","text-white cursor-copy"),B(s,"class","label-text"),B(o,"class","label"),B(a,"class","tooltip tooltip-primary tooltip-bottom"),B(a,"data-tip","Use in prompts or directives to get random slot."),B(r,"class","flex flex-col w-full pr-2 "),B(v,"class","btn btn-sm btn-primary"),st(v,"btn-disabled",!ed(t[1])||(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1])),B(e,"class","w-full p-2 flex justify-between"),B(F,"type","text"),B(F,"placeholder","Add slot"),B(F,"class","input input-bordered input-sm w-full italic"),B(C,"class","p-1"),B(S,"class","px-4 py-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block"),B(A,"class","btn btn-sm btn-error ml-4"),B(P,"class","w-full p-2 h-12 flex justify-between")},m(V,q){se(V,e,q),T(e,r),T(r,n),nn(n,t[1]),T(r,i),T(r,a),T(a,o),T(o,s),T(s,l),T(s,p),T(p,c),T(r,d),K&&K.m(r,null),T(e,b),T(e,v),T(v,m),se(V,D,q),se(V,S,q),L&&L.m(S,null),T(S,w),T(S,C),T(C,F),nn(F,t[2]),se(V,M,q),se(V,P,q),T(P,A),T(A,x),R||(Z=[De(n,"input",t[11]),De(p,"click",t[12]),De(v,"click",t[6]),De(F,"input",t[14]),De(F,"input",t[15]),De(A,"click",t[7])],R=!0)},p(V,q){q&2&&n.value!==V[1]&&nn(n,V[1]),q&2&&f!==(f=Vs(V[1])+"")&&zt(c,f),q&11&&(g=(V[0]==="new"||V[3]&&V[3].name!==V[1])&&!V[5](V[1])),g?K||(K=Ip(),K.c(),K.m(r,null)):K&&(K.d(1),K=null),q&43&&st(v,"btn-disabled",!ed(V[1])||(V[0]==="new"||V[3]&&V[3].name!==V[1])&&!V[5](V[1])),V[3]?L?L.p(V,q):(L=xp(V),L.c(),L.m(S,w)):L&&(L.d(1),L=null),q&4&&F.value!==V[2]&&nn(F,V[2])},d(V){V&&O(e),K&&K.d(),V&&O(D),V&&O(S),L&&L.d(),V&&O(M),V&&O(P),R=!1,qt(Z)}}}function Ip(t){let e,r,n;return{c(){e=W("label"),r=W("span"),n=Ce("Name In Use"),this.h()},l(i){e=H(i,"LABEL",{class:!0});var a=j(e);r=H(a,"SPAN",{class:!0});var o=j(r);n=Fe(o,"Name In Use"),o.forEach(O),a.forEach(O),this.h()},h(){B(r,"class","label-text text-orange-300"),B(e,"class","label")},m(i,a){se(i,e,a),T(e,r),T(r,n)},d(i){i&&O(e)}}}function xp(t){let e=[],r=new Map,n,i=t[3].values;const a=o=>o[19];for(let o=0;o<i.length;o+=1){let s=Mp(t,i,o),l=a(s);r.set(l,e[o]=Np(l,s))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();n=St()},l(o){for(let s=0;s<e.length;s+=1)e[s].l(o);n=St()},m(o,s){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(o,s);se(o,n,s)},p(o,s){s&264&&(i=o[3].values,e=Un(e,s,a,1,o,i,r,n.parentNode,Zn,Np,n,Mp))},d(o){for(let s=0;s<e.length;s+=1)e[s].d(o);o&&O(n)}}}function Np(t,e){let r,n,i,a,o,s;function l(...p){return e[13](e[19],...p)}return{key:t,first:null,c(){r=W("li"),n=W("input"),a=Ee(),this.h()},l(p){r=H(p,"LI",{class:!0});var f=j(r);n=H(f,"INPUT",{type:!0,placeholder:!0,class:!0}),a=Ae(f),f.forEach(O),this.h()},h(){n.value=i=e[17],B(n,"type","text"),B(n,"placeholder",""),B(n,"class","input input-bordered input-sm w-full"),B(r,"class","p-1"),this.first=r},m(p,f){se(p,r,f),T(r,n),T(r,a),o||(s=De(n,"input",l),o=!0)},p(p,f){e=p,f&8&&i!==(i=e[17])&&n.value!==i&&(n.value=i)},d(p){p&&O(r),o=!1,s()}}}function V7(t){let e,r,n,i,a,o,s,l,p,f,c,d=[],g=new Map,b,v,m,D,S,w,C=Object.entries(t[4]);const F=P=>P[20];for(let P=0;P<C.length;P+=1){let A=Pp(t,C,P),x=F(A);g.set(x,d[P]=kp(x,A))}let M=t[0]&&Tp(t);return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("label"),a=W("span"),o=Ce("Edit Slots"),s=Ee(),l=W("select"),p=W("option"),f=Ce("Pick one");for(let P=0;P<d.length;P+=1)d[P].c();b=W("option"),v=Ce("New"),D=Ee(),M&&M.c(),this.h()},l(P){e=H(P,"DIV",{class:!0});var A=j(e);r=H(A,"DIV",{class:!0});var x=j(r);n=H(x,"DIV",{class:!0});var R=j(n);i=H(R,"LABEL",{class:!0});var Z=j(i);a=H(Z,"SPAN",{class:!0});var K=j(a);o=Fe(K,"Edit Slots"),K.forEach(O),Z.forEach(O),s=Ae(R),l=H(R,"SELECT",{class:!0});var L=j(l);p=H(L,"OPTION",{});var V=j(p);f=Fe(V,"Pick one"),V.forEach(O);for(let z=0;z<d.length;z+=1)d[z].l(L);b=H(L,"OPTION",{});var q=j(b);v=Fe(q,"New"),q.forEach(O),L.forEach(O),R.forEach(O),x.forEach(O),D=Ae(A),M&&M.l(A),A.forEach(O),this.h()},h(){B(a,"class","label-text"),B(i,"class","label"),p.disabled=!0,p.selected=c=t[0]===null,p.__value="Pick one",p.value=p.__value,b.__value="new",b.value=b.__value,b.selected=m=t[0]==="new",B(l,"class","select select-bordered"),t[0]===void 0&&Ni(()=>t[10].call(l)),B(n,"class","form-control w-full max-w-xs mb-4"),B(r,"class","flex justify-center"),B(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(P,A){se(P,e,A),T(e,r),T(r,n),T(n,i),T(i,a),T(a,o),T(n,s),T(n,l),T(l,p),T(p,f);for(let x=0;x<d.length;x+=1)d[x]&&d[x].m(l,null);T(l,b),T(b,v),ki(l,t[0],!0),T(e,D),M&&M.m(e,null),S||(w=De(l,"change",t[10]),S=!0)},p(P,[A]){A&17&&c!==(c=P[0]===null)&&(p.selected=c),A&17&&(C=Object.entries(P[4]),d=Un(d,A,F,1,P,C,g,l,Zn,kp,b,Pp)),A&17&&m!==(m=P[0]==="new")&&(b.selected=m),A&17&&ki(l,P[0]),P[0]?M?M.p(P,A):(M=Tp(P),M.c(),M.m(e,null)):M&&(M.d(1),M=null)},i:Pe,o:Pe,d(P){P&&O(e);for(let A=0;A<d.length;A+=1)d[A].d();M&&M.d(),S=!1,w()}}}function j7(t,e,r){let n;$e(t,Qi,C=>r(4,n=C));let i=null,a="",o="",s=null;function l(C){r(3,s=C&&C!=="new"?{...n[C]}:C==="new"?{name:"New Slot Set",values:[]}:null),r(1,a=s?s.name:"")}function p(C){return Object.values(n).every(M=>M.name!==C)}function f(){if(s)if(i&&i!=="new")Qi.update(i,{...s,name:a});else{if(!p()){alert("Name already in use");return}const F=_o();Qi.update(F,{...s,name:a}),r(0,i=F)}}function c(){Qi.delete(i),r(1,a=""),r(2,o=""),r(0,i=null),r(3,s=null)}const d=Xs((C,F)=>{if(!s||!i)return;const M=[...s.values];F.length===0?M.splice(C,1):M[C]=F,r(3,s.values=M,s),i!=="new"&&Qi.update(i,s)},1e3),g=Xs(C=>{if(!s||!i)return;const F=[...s.values];C.length>0&&(F.push(C),r(3,s.values=F,s),r(2,o=""),i!=="new"&&Qi.update(i,s))},1e3);function b(){i=cy(this),r(0,i)}function v(){a=this.value,r(1,a)}const m=()=>navigator.clipboard.writeText(Vs(a)),D=(C,F)=>d(C,F.target.value);function S(){o=this.value,r(2,o)}const w=C=>g(C.target.value);return t.$$.update=()=>{t.$$.dirty&1&&l(i)},[i,a,o,s,n,p,f,c,d,g,b,v,m,D,S,w]}class z7 extends Xe{constructor(e){super(),et(this,e,j7,V7,tt,{})}}function q7(t){let e,r;return e=new L7({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function W7(t){let e,r;return e=new z7({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function H7(t){let e,r;return e=new P7({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function $7(t){let e,r;return e=new n7({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function G7(t){let e,r;return e=new e7({}),{c(){Ve(e.$$.fragment)},l(n){je(e.$$.fragment,n)},m(n,i){ze(e,n,i),r=!0},i(n){r||(ce(e.$$.fragment,n),r=!0)},o(n){me(e.$$.fragment,n),r=!1},d(n){qe(e,n)}}}function K7(t){let e,r,n,i,a,o,s,l,p,f,c,d,g,b,v,m,D,S,w,C,F,M,P,A,x,R,Z,K;F=new U7({});const L=[G7,$7,H7,W7,q7],V=[];function q(z,Q){return z[0]==="select"?0:z[0]==="edit"?1:z[0]==="generate"?2:z[0]==="slots"?3:z[0]==="settings"?4:-1}return~(A=q(t))&&(x=V[A]=L[A](t)),{c(){e=W("div"),r=W("div"),n=W("div"),i=W("button"),a=Ce("Select"),s=Ee(),l=W("button"),p=Ce("Edit"),c=Ee(),d=W("button"),g=Ce("Generate"),v=Ee(),m=W("button"),D=Ce("Slots"),w=Ee(),C=W("button"),Ve(F.$$.fragment),P=Ee(),x&&x.c(),this.h()},l(z){e=H(z,"DIV",{class:!0});var Q=j(e);r=H(Q,"DIV",{class:!0});var X=j(r);n=H(X,"DIV",{class:!0});var te=j(n);i=H(te,"BUTTON",{class:!0});var oe=j(i);a=Fe(oe,"Select"),oe.forEach(O),s=Ae(te),l=H(te,"BUTTON",{class:!0});var _e=j(l);p=Fe(_e,"Edit"),_e.forEach(O),c=Ae(te),d=H(te,"BUTTON",{class:!0});var be=j(d);g=Fe(be,"Generate"),be.forEach(O),v=Ae(te),m=H(te,"BUTTON",{class:!0});var Be=j(m);D=Fe(Be,"Slots"),Be.forEach(O),w=Ae(te),C=H(te,"BUTTON",{class:!0});var ke=j(C);je(F.$$.fragment,ke),ke.forEach(O),te.forEach(O),P=Ae(X),x&&x.l(X),X.forEach(O),Q.forEach(O),this.h()},h(){B(i,"class",o=t[0]==="select"?"btn btn-active":"btn"),B(l,"class",f=t[0]==="edit"?"btn btn-active":"btn"),B(d,"class",b=t[0]==="generate"?"btn btn-active":"btn"),B(m,"class",S=t[0]==="slots"?"btn btn-active":"btn"),B(C,"class",M=t[0]==="settings"?"btn btn-active":"btn"),B(n,"class","btn-group btn-group-vertical sm:btn-group-horizontal bg-base-100 w-full flex justify-center p-2"),B(r,"class","h-screen overflow-y-auto flex flex-col"),B(e,"class","max-w-md w-1/2 h-screen")},m(z,Q){se(z,e,Q),T(e,r),T(r,n),T(n,i),T(i,a),T(n,s),T(n,l),T(l,p),T(n,c),T(n,d),T(d,g),T(n,v),T(n,m),T(m,D),T(n,w),T(n,C),ze(F,C,null),T(r,P),~A&&V[A].m(r,null),R=!0,Z||(K=[De(i,"click",t[2]),De(l,"click",t[3]),De(d,"click",t[4]),De(m,"click",t[5]),De(C,"click",t[6])],Z=!0)},p(z,[Q]){(!R||Q&1&&o!==(o=z[0]==="select"?"btn btn-active":"btn"))&&B(i,"class",o),(!R||Q&1&&f!==(f=z[0]==="edit"?"btn btn-active":"btn"))&&B(l,"class",f),(!R||Q&1&&b!==(b=z[0]==="generate"?"btn btn-active":"btn"))&&B(d,"class",b),(!R||Q&1&&S!==(S=z[0]==="slots"?"btn btn-active":"btn"))&&B(m,"class",S),(!R||Q&1&&M!==(M=z[0]==="settings"?"btn btn-active":"btn"))&&B(C,"class",M);let X=A;A=q(z),A!==X&&(x&&(sr(),me(V[X],1,1,()=>{V[X]=null}),or()),~A?(x=V[A],x||(x=V[A]=L[A](z),x.c()),ce(x,1),x.m(r,null)):x=null)},i(z){R||(ce(F.$$.fragment,z),ce(x),R=!0)},o(z){me(F.$$.fragment,z),me(x),R=!1},d(z){z&&O(e),qe(F),~A&&V[A].d(),Z=!1,qt(K)}}}function Y7(t,e,r){let n;$e(t,pi,f=>r(0,n=f));function i(f){pi.update(f)}const a=()=>i("select"),o=()=>i("edit"),s=()=>i("generate"),l=()=>i("slots"),p=()=>i("settings");return t.$$.update=()=>{t.$$.dirty&1&&(n||pi.update("select"))},[n,i,a,o,s,l,p]}class Z7 extends Xe{constructor(e){super(),et(this,e,Y7,K7,tt,{})}}function J7(t){let e,r;return{c(){e=W("p"),r=Ce("Loading..."),this.h()},l(n){e=H(n,"P",{class:!0});var i=j(e);r=Fe(i,"Loading..."),i.forEach(O),this.h()},h(){B(e,"class","text-lg")},m(n,i){se(n,e,i),T(e,r)},i:Pe,o:Pe,d(n){n&&O(e)}}}function Q7(t){let e,r;return{c(){e=W("p"),r=Ce("This tool is not optimized for small screens or mobile devices."),this.h()},l(n){e=H(n,"P",{class:!0});var i=j(e);r=Fe(i,"This tool is not optimized for small screens or mobile devices."),i.forEach(O),this.h()},h(){B(e,"class","text-lg")},m(n,i){se(n,e,i),T(e,r)},i:Pe,o:Pe,d(n){n&&O(e)}}}function X7(t){let e,r,n,i;return e=new Z7({}),n=new K8({}),{c(){Ve(e.$$.fragment),r=Ee(),Ve(n.$$.fragment)},l(a){je(e.$$.fragment,a),r=Ae(a),je(n.$$.fragment,a)},m(a,o){ze(e,a,o),se(a,r,o),ze(n,a,o),i=!0},i(a){i||(ce(e.$$.fragment,a),ce(n.$$.fragment,a),i=!0)},o(a){me(e.$$.fragment,a),me(n.$$.fragment,a),i=!1},d(a){qe(e,a),a&&O(r),qe(n,a)}}}function e4(t){let e,r,n,i,a,o;Ni(t[2]);const s=[X7,Q7,J7],l=[];function p(f,c){return f[0]&&f[1]&&f[0]>1024&&f[1]>800?0:f[0]&&f[1]?1:2}return e=p(t),r=l[e]=s[e](t),{c(){r.c(),n=St()},l(f){r.l(f),n=St()},m(f,c){l[e].m(f,c),se(f,n,c),i=!0,a||(o=De(window,"resize",t[2]),a=!0)},p(f,[c]){let d=e;e=p(f),e!==d&&(sr(),me(l[d],1,1,()=>{l[d]=null}),or(),r=l[e],r||(r=l[e]=s[e](f),r.c()),ce(r,1),r.m(n.parentNode,n))},i(f){i||(ce(r),i=!0)},o(f){me(r),i=!1},d(f){l[e].d(f),f&&O(n),a=!1,o()}}}function t4(t,e,r){let n=null,i=null;function a(){r(0,n=window.innerWidth),r(1,i=window.innerHeight)}return[n,i,a]}class i4 extends Xe{constructor(e){super(),et(this,e,t4,e4,tt,{})}}export{i4 as default};
