import{J as zt,S as Rt,i as Lt,s as Ut,K as Ct,L as Ft,m as ie,h as V,n as T,p as er,b as Ee,H as Ie,M as ke,N as Vr,k as se,q as Ze,l as oe,r as $e,G as Y,u as xn,a as Ge,c as Ke,g as xe,v as Dn,d as Ue,f as bn,I as Ot,y as pt,e as Yt,z as vt,A as gt,B as mt,O as af,P as Fs,Q as Ss,R as Ei,T as Kb,U as el,V as Bi,W as Bd,X as Ci,Y as Bs,Z as qt,_ as ba,$ as ga}from"../chunks/index.98d4e505.js";import{d as Tn,w as In}from"../chunks/index.29baef3a.js";var At=(e=>(e.Circle="circle",e.Bars="bars",e.Embed="embed",e.Pie="pie",e))(At||{});function kl(){return kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kl.apply(this,arguments)}var Od={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function tr(e){return typeof e=="number"}function _n(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function Md(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function Pd(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function xd(e){return e&&e.constructor.prototype.isUnit===!0||!1}function qn(e){return typeof e=="string"}var Jt=Array.isArray;function Ur(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function rs(e){return Array.isArray(e)||Ur(e)}function Yb(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function Zb(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function $b(e){return e&&e.constructor.prototype.isRange===!0||!1}function uf(e){return e&&e.constructor.prototype.isIndex===!0||!1}function Xb(e){return typeof e=="boolean"}function Jb(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function Qb(e){return e&&e.constructor.prototype.isHelp===!0||!1}function ey(e){return typeof e=="function"}function ty(e){return e instanceof Date}function ry(e){return e instanceof RegExp}function ny(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!Md(e)&&!Pd(e))}function iy(e){return e===null}function Td(e){return e===void 0}function ay(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function uy(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function sy(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function oy(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function ly(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function fy(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function cy(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function hy(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function dy(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function py(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function vy(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function gy(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function my(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function _y(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function Dy(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function by(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function yy(e){return e&&e.constructor.prototype.isChain===!0||!1}function Qa(e){var t=typeof e;return t==="object"?e===null?"null":_n(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function yr(e){var t=typeof e;if(t==="number"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(r){return yr(r)});if(e instanceof Date)return new Date(e.valueOf());if(_n(e))return e;if(e instanceof RegExp)throw new TypeError("Cannot clone "+e);return Ay(e,yr)}function Ay(e,t){var r={};for(var n in e)eu(e,n)&&(r[n]=t(e[n]));return r}function wy(e,t){for(var r in t)eu(t,r)&&(e[r]=t[r]);return e}function ns(e,t){var r,n,a;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(n=0,a=e.length;n<a;n++)if(!ns(e[n],t[n]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(r in e)if(!(r in t)||!ns(e[r],t[r]))return!1;for(r in t)if(!(r in e))return!1;return!0}else return e===t}}function eu(e,t){return e&&Object.hasOwnProperty.call(e,t)}function Ey(e,t){for(var r={},n=0;n<t.length;n++){var a=t[n],u=e[a];u!==void 0&&(r[a]=u)}return r}var Cy=["Matrix","Array"],Fy=["number","BigNumber","Fraction"],Os=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Od)};kl(Os,Od,{MATRIX_OPTIONS:Cy,NUMBER_OPTIONS:Fy});function On(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Sy(e))||t&&e&&typeof e.length=="number"){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(p){throw p},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,l=!1,o;return{s:function(){r=r.call(e)},n:function(){var p=r.next();return u=p.done,p},e:function(p){l=!0,o=p},f:function(){try{!u&&r.return!=null&&r.return()}finally{if(l)throw o}}}}function Sy(e,t){if(e){if(typeof e=="string")return Rh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rh(e,t)}}function Rh(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ha(e){return ha=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ha(e)}function Lh(){return!0}function gn(){return!1}function la(){}var Uh="Argument is not a typed-function.";function Id(){function e(R){return ha(R)==="object"&&R!==null&&R.constructor===Object}var t=[{name:"number",test:function(j){return typeof j=="number"}},{name:"string",test:function(j){return typeof j=="string"}},{name:"boolean",test:function(j){return typeof j=="boolean"}},{name:"Function",test:function(j){return typeof j=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(j){return j instanceof Date}},{name:"RegExp",test:function(j){return j instanceof RegExp}},{name:"Object",test:e},{name:"null",test:function(j){return j===null}},{name:"undefined",test:function(j){return j===void 0}}],r={name:"any",test:Lh,isAny:!0},n,a,u=0,l={createCount:0};function o(R){var j=n.get(R);if(j)return j;var $='Unknown type "'+R+'"',fe=R.toLowerCase(),ne,he=On(a),ae;try{for(he.s();!(ae=he.n()).done;)if(ne=ae.value,ne.toLowerCase()===fe){$+='. Did you mean "'+ne+'" ?';break}}catch(ce){he.e(ce)}finally{he.f()}throw new TypeError($)}function h(R){for(var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",$=j?o(j).index:a.length,fe=[],ne=0;ne<R.length;++ne){if(!R[ne]||typeof R[ne].name!="string"||typeof R[ne].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var he=R[ne].name;if(n.has(he))throw new TypeError('Duplicate type name "'+he+'"');fe.push(he),n.set(he,{name:he,test:R[ne].test,isAny:R[ne].isAny,index:$+ne,conversionsTo:[]})}var ae=a.slice($);a=a.slice(0,$).concat(fe).concat(ae);for(var ce=$+fe.length;ce<a.length;++ce)n.get(a[ce]).index=ce}function p(){n=new Map,a=[],u=0,h([r],!1)}p(),h(t);function f(){var R,j=On(a),$;try{for(j.s();!($=j.n()).done;)R=$.value,n.get(R).conversionsTo=[]}catch(fe){j.e(fe)}finally{j.f()}u=0}function d(R){var j=a.filter(function($){var fe=n.get($);return!fe.isAny&&fe.test(R)});return j.length?j:["any"]}function c(R){return R&&typeof R=="function"&&"_typedFunctionData"in R}function g(R,j,$){if(!c(R))throw new TypeError(Uh);var fe=$&&$.exact,ne=Array.isArray(j)?j.join(","):j,he=O(ne),ae=_(he);if(!fe||ae in R.signatures){var ce=R._typedFunctionData.signatureMap.get(ae);if(ce)return ce}var ye=he.length,Oe;if(fe){Oe=[];var Xe;for(Xe in R.signatures)Oe.push(R._typedFunctionData.signatureMap.get(Xe))}else Oe=R._typedFunctionData.signatures;for(var we=0;we<ye;++we){var Vt=he[we],St=[],rr=void 0,Zt=On(Oe),mr;try{for(Zt.s();!(mr=Zt.n()).done;){rr=mr.value;var $t=I(rr.params,we);if(!(!$t||Vt.restParam&&!$t.restParam)){if(!$t.hasAny){var _r=function(){var dr=w($t);if(Vt.types.some(function(wn){return!dr.has(wn.name)}))return"continue"}();if(_r==="continue")continue}St.push(rr)}}}catch(dr){Zt.e(dr)}finally{Zt.f()}if(Oe=St,Oe.length===0)break}var fr,cr=On(Oe),an;try{for(cr.s();!(an=cr.n()).done;)if(fr=an.value,fr.params.length<=ye)return fr}catch(dr){cr.e(dr)}finally{cr.f()}throw new TypeError("Signature not found (signature: "+(R.name||"unnamed")+"("+_(he,", ")+"))")}function y(R,j,$){return g(R,j,$).implementation}function m(R,j){var $=o(j);if($.test(R))return R;var fe=$.conversionsTo;if(fe.length===0)throw new Error("There are no conversions to "+j+" defined.");for(var ne=0;ne<fe.length;ne++){var he=o(fe[ne].from);if(he.test(R))return fe[ne].convert(R)}throw new Error("Cannot convert "+R+" to "+j)}function _(R){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return R.map(function($){return $.name}).join(j)}function b(R){var j=R.indexOf("...")===0,$=j?R.length>3?R.slice(3):"any":R,fe=$.split("|").map(function(ce){return o(ce.trim())}),ne=!1,he=j?"...":"",ae=fe.map(function(ce){return ne=ce.isAny||ne,he+=ce.name+"|",{name:ce.name,typeIndex:ce.index,test:ce.test,isAny:ce.isAny,conversion:null,conversionIndex:-1}});return{types:ae,name:he.slice(0,-1),hasAny:ne,hasConversion:!1,restParam:j}}function C(R){var j=R.types.map(function(ae){return ae.name}),$=re(j),fe=R.hasAny,ne=R.name,he=$.map(function(ae){var ce=o(ae.from);return fe=ce.isAny||fe,ne+="|"+ae.from,{name:ae.from,typeIndex:ce.index,test:ce.test,isAny:ce.isAny,conversion:ae,conversionIndex:ae.index}});return{types:R.types.concat(he),name:ne,hasAny:fe,hasConversion:he.length>0,restParam:R.restParam}}function w(R){return R.typeSet||(R.typeSet=new Set,R.types.forEach(function(j){return R.typeSet.add(j.name)})),R.typeSet}function O(R){var j=[];if(typeof R!="string")throw new TypeError("Signatures must be strings");var $=R.trim();if($==="")return j;for(var fe=$.split(","),ne=0;ne<fe.length;++ne){var he=b(fe[ne].trim());if(he.restParam&&ne!==fe.length-1)throw new SyntaxError('Unexpected rest parameter "'+fe[ne]+'": only allowed for the last parameter');if(he.types.length===0)return null;j.push(he)}return j}function S(R){var j=Te(R);return j?j.restParam:!1}function B(R){if(!R||R.types.length===0)return Lh;if(R.types.length===1)return o(R.types[0].name).test;if(R.types.length===2){var j=o(R.types[0].name).test,$=o(R.types[1].name).test;return function(he){return j(he)||$(he)}}else{var fe=R.types.map(function(ne){return o(ne.name).test});return function(he){for(var ae=0;ae<fe.length;ae++)if(fe[ae](he))return!0;return!1}}}function P(R){var j,$,fe;if(S(R)){j=qe(R).map(B);var ne=j.length,he=B(Te(R)),ae=function(ye){for(var Oe=ne;Oe<ye.length;Oe++)if(!he(ye[Oe]))return!1;return!0};return function(ye){for(var Oe=0;Oe<j.length;Oe++)if(!j[Oe](ye[Oe]))return!1;return ae(ye)&&ye.length>=ne+1}}else return R.length===0?function(ye){return ye.length===0}:R.length===1?($=B(R[0]),function(ye){return $(ye[0])&&ye.length===1}):R.length===2?($=B(R[0]),fe=B(R[1]),function(ye){return $(ye[0])&&fe(ye[1])&&ye.length===2}):(j=R.map(B),function(ye){for(var Oe=0;Oe<j.length;Oe++)if(!j[Oe](ye[Oe]))return!1;return ye.length===j.length})}function I(R,j){return j<R.length?R[j]:S(R)?Te(R):null}function N(R,j){var $=I(R,j);return $?w($):new Set}function G(R){return R.conversion===null||R.conversion===void 0}function L(R,j){var $=new Set;return R.forEach(function(fe){var ne=N(fe.params,j),he,ae=On(ne),ce;try{for(ae.s();!(ce=ae.n()).done;)he=ce.value,$.add(he)}catch(ye){ae.e(ye)}finally{ae.f()}}),$.has("any")?["any"]:Array.from($)}function q(R,j,$){var fe,ne,he=R||"unnamed",ae=$,ce,ye=function(){var Zt=[];if(ae.forEach(function($t){var _r=I($t.params,ce),fr=B(_r);(ce<$t.params.length||S($t.params))&&fr(j[ce])&&Zt.push($t)}),Zt.length===0){if(ne=L(ae,ce),ne.length>0){var mr=d(j[ce]);return fe=new TypeError("Unexpected type of argument in function "+he+" (expected: "+ne.join(" or ")+", actual: "+mr.join(" | ")+", index: "+ce+")"),fe.data={category:"wrongType",fn:he,index:ce,actual:mr,expected:ne},{v:fe}}}else ae=Zt};for(ce=0;ce<j.length;ce++){var Oe=ye();if(ha(Oe)==="object")return Oe.v}var Xe=ae.map(function(rr){return S(rr.params)?1/0:rr.params.length});if(j.length<Math.min.apply(null,Xe))return ne=L(ae,ce),fe=new TypeError("Too few arguments in function "+he+" (expected: "+ne.join(" or ")+", index: "+j.length+")"),fe.data={category:"tooFewArgs",fn:he,index:j.length,expected:ne},fe;var we=Math.max.apply(null,Xe);if(j.length>we)return fe=new TypeError("Too many arguments in function "+he+" (expected: "+we+", actual: "+j.length+")"),fe.data={category:"tooManyArgs",fn:he,index:j.length,expectedLength:we},fe;for(var Vt=[],St=0;St<j.length;++St)Vt.push(d(j[St]).join("|"));return fe=new TypeError('Arguments of type "'+Vt.join(", ")+'" do not match any of the defined signatures of function '+he+"."),fe.data={category:"mismatch",actual:Vt},fe}function Z(R){for(var j=a.length+1,$=0;$<R.types.length;$++)G(R.types[$])&&(j=Math.min(j,R.types[$].typeIndex));return j}function W(R){for(var j=u+1,$=0;$<R.types.length;$++)G(R.types[$])||(j=Math.min(j,R.types[$].conversionIndex));return j}function z(R,j){if(R.hasAny){if(!j.hasAny)return 1}else if(j.hasAny)return-1;if(R.restParam){if(!j.restParam)return 1}else if(j.restParam)return-1;if(R.hasConversion){if(!j.hasConversion)return 1}else if(j.hasConversion)return-1;var $=Z(R)-Z(j);if($<0)return-1;if($>0)return 1;var fe=W(R)-W(j);return fe<0?-1:fe>0?1:0}function H(R,j){var $=R.params,fe=j.params,ne=Te($),he=Te(fe),ae=S($),ce=S(fe);if(ae&&ne.hasAny){if(!ce||!he.hasAny)return 1}else if(ce&&he.hasAny)return-1;var ye=0,Oe=0,Xe,we=On($),Vt;try{for(we.s();!(Vt=we.n()).done;)Xe=Vt.value,Xe.hasAny&&++ye,Xe.hasConversion&&++Oe}catch(Nn){we.e(Nn)}finally{we.f()}var St=0,rr=0,Zt=On(fe),mr;try{for(Zt.s();!(mr=Zt.n()).done;)Xe=mr.value,Xe.hasAny&&++St,Xe.hasConversion&&++rr}catch(Nn){Zt.e(Nn)}finally{Zt.f()}if(ye!==St)return ye-St;if(ae&&ne.hasConversion){if(!ce||!he.hasConversion)return 1}else if(ce&&he.hasConversion)return-1;if(Oe!==rr)return Oe-rr;if(ae){if(!ce)return 1}else if(ce)return-1;var $t=($.length-fe.length)*(ae?-1:1);if($t!==0)return $t;for(var _r=[],fr=0,cr=0;cr<$.length;++cr){var an=z($[cr],fe[cr]);_r.push(an),fr+=an}if(fr!==0)return fr;for(var dr,wn=0,Kn=_r;wn<Kn.length;wn++)if(dr=Kn[wn],dr!==0)return dr;return 0}function re(R){if(R.length===0)return[];var j=R.map(o);R.length>1&&j.sort(function(ye,Oe){return ye.index-Oe.index});var $=j[0].conversionsTo;if(R.length===1)return $;$=$.concat([]);for(var fe=new Set(R),ne=1;ne<j.length;++ne){var he=void 0,ae=On(j[ne].conversionsTo),ce;try{for(ae.s();!(ce=ae.n()).done;)he=ce.value,fe.has(he.from)||($.push(he),fe.add(he.from))}catch(ye){ae.e(ye)}finally{ae.f()}}return $}function ee(R,j){var $=j;if(R.some(function(ce){return ce.hasConversion})){var fe=S(R),ne=R.map(Q);$=function(){for(var ye=[],Oe=fe?arguments.length-1:arguments.length,Xe=0;Xe<Oe;Xe++)ye[Xe]=ne[Xe](arguments[Xe]);return fe&&(ye[Oe]=arguments[Oe].map(ne[Oe])),j.apply(this,ye)}}var he=$;if(S(R)){var ae=R.length-1;he=function(){return $.apply(this,Re(arguments,0,ae).concat([Re(arguments,ae)]))}}return he}function Q(R){var j,$,fe,ne,he=[],ae=[];switch(R.types.forEach(function(ce){ce.conversion&&(he.push(o(ce.conversion.from).test),ae.push(ce.conversion.convert))}),ae.length){case 0:return function(ye){return ye};case 1:return j=he[0],fe=ae[0],function(ye){return j(ye)?fe(ye):ye};case 2:return j=he[0],$=he[1],fe=ae[0],ne=ae[1],function(ye){return j(ye)?fe(ye):$(ye)?ne(ye):ye};default:return function(ye){for(var Oe=0;Oe<ae.length;Oe++)if(he[Oe](ye))return ae[Oe](ye);return ye}}}function le(R){function j($,fe,ne){if(fe<$.length){var he=$[fe],ae=[];if(he.restParam){var ce=he.types.filter(G);ce.length<he.types.length&&ae.push({types:ce,name:"..."+ce.map(function(ye){return ye.name}).join("|"),hasAny:ce.some(function(ye){return ye.isAny}),hasConversion:!1,restParam:!0}),ae.push(he)}else ae=he.types.map(function(ye){return{types:[ye],name:ye.name,hasAny:ye.isAny,hasConversion:ye.conversion,restParam:!1}});return et(ae,function(ye){return j($,fe+1,ne.concat([ye]))})}else return[ne]}return j(R,0,[])}function me(R,j){for(var $=Math.max(R.length,j.length),fe=0;fe<$;fe++){var ne=N(R,fe),he=N(j,fe),ae=!1,ce=void 0,ye=On(he),Oe;try{for(ye.s();!(Oe=ye.n()).done;)if(ce=Oe.value,ne.has(ce)){ae=!0;break}}catch(rr){ye.e(rr)}finally{ye.f()}if(!ae)return!1}var Xe=R.length,we=j.length,Vt=S(R),St=S(j);return Vt?St?Xe===we:we>=Xe:St?Xe>=we:Xe===we}function Fe(R){return R.map(function(j){return We(j)?rt(j.referToSelf.callback):ze(j)?tt(j.referTo.references,j.referTo.callback):j})}function be(R,j,$){var fe=[],ne,he=On(R),ae;try{for(he.s();!(ae=he.n()).done;){ne=ae.value;var ce=$[ne];if(typeof ce!="number")throw new TypeError('No definition for referenced signature "'+ne+'"');if(ce=j[ce],typeof ce!="function")return!1;fe.push(ce)}}catch(ye){he.e(ye)}finally{he.f()}return fe}function Ne(R,j,$){for(var fe=Fe(R),ne=new Array(fe.length).fill(!1),he=!0;he;){he=!1;for(var ae=!0,ce=0;ce<fe.length;++ce)if(!ne[ce]){var ye=fe[ce];if(We(ye))fe[ce]=ye.referToSelf.callback($),fe[ce].referToSelf=ye.referToSelf,ne[ce]=!0,ae=!1;else if(ze(ye)){var Oe=be(ye.referTo.references,fe,j);Oe?(fe[ce]=ye.referTo.callback.apply(this,Oe),fe[ce].referTo=ye.referTo,ne[ce]=!0,ae=!1):he=!0}}if(ae&&he)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return fe}function je(R){var j=/\bthis(\(|\.signatures\b)/;Object.keys(R).forEach(function($){var fe=R[$];if(j.test(fe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Me(R,j){if(l.createCount++,Object.keys(j).length===0)throw new SyntaxError("No signatures provided");l.warnAgainstDeprecatedThis&&je(j);var $=[],fe=[],ne={},he=[],ae,ce=function(){if(!Object.prototype.hasOwnProperty.call(j,ae))return"continue";var ur=O(ae);if(!ur)return"continue";$.forEach(function(sn){if(me(sn,ur))throw new TypeError('Conflicting signatures "'+_(sn)+'" and "'+_(ur)+'".')}),$.push(ur);var Nr=fe.length;fe.push(j[ae]);var Ti=ur.map(C),Zn=void 0,Ln=On(le(Ti)),Ii;try{for(Ln.s();!(Ii=Ln.n()).done;){Zn=Ii.value;var En=_(Zn);he.push({params:Zn,name:En,fn:Nr}),Zn.every(function(sn){return!sn.hasConversion})&&(ne[En]=Nr)}}catch(sn){Ln.e(sn)}finally{Ln.f()}};for(ae in j)var ye=ce();he.sort(H);var Oe=Ne(fe,ne,Rn),Xe;for(Xe in ne)Object.prototype.hasOwnProperty.call(ne,Xe)&&(ne[Xe]=Oe[ne[Xe]]);for(var we=[],Vt=new Map,St=0,rr=he;St<rr.length;St++)Xe=rr[St],Vt.has(Xe.name)||(Xe.fn=Oe[Xe.fn],we.push(Xe),Vt.set(Xe.name,Xe));for(var Zt=we[0]&&we[0].params.length<=2&&!S(we[0].params),mr=we[1]&&we[1].params.length<=2&&!S(we[1].params),$t=we[2]&&we[2].params.length<=2&&!S(we[2].params),_r=we[3]&&we[3].params.length<=2&&!S(we[3].params),fr=we[4]&&we[4].params.length<=2&&!S(we[4].params),cr=we[5]&&we[5].params.length<=2&&!S(we[5].params),an=Zt&&mr&&$t&&_r&&fr&&cr,dr=0;dr<we.length;++dr)we[dr].test=P(we[dr].params);for(var wn=Zt?B(we[0].params[0]):gn,Kn=mr?B(we[1].params[0]):gn,Nn=$t?B(we[2].params[0]):gn,kn=_r?B(we[3].params[0]):gn,Gi=fr?B(we[4].params[0]):gn,Pi=cr?B(we[5].params[0]):gn,Aa=Zt?B(we[0].params[1]):gn,wr=mr?B(we[1].params[1]):gn,nr=$t?B(we[2].params[1]):gn,wa=_r?B(we[3].params[1]):gn,oi=fr?B(we[4].params[1]):gn,un=cr?B(we[5].params[1]):gn,Yn=0;Yn<we.length;++Yn)we[Yn].implementation=ee(we[Yn].params,we[Yn].fn);var xi=Zt?we[0].implementation:la,Ea=mr?we[1].implementation:la,Ca=$t?we[2].implementation:la,Ki=_r?we[3].implementation:la,Fa=fr?we[4].implementation:la,Sa=cr?we[5].implementation:la,Ba=Zt?we[0].params.length:-1,Oa=mr?we[1].params.length:-1,Ma=$t?we[2].params.length:-1,Pa=_r?we[3].params.length:-1,li=fr?we[4].params.length:-1,xa=cr?we[5].params.length:-1,fi=an?6:0,Ta=we.length,Ia=we.map(function(Dr){return Dr.test}),Na=we.map(function(Dr){return Dr.implementation}),Yi=function(){for(var ur=fi;ur<Ta;ur++)if(Ia[ur](arguments))return Na[ur].apply(this,arguments);return l.onMismatch(R,arguments,we)};function Rn(Dr,ur){return arguments.length===Ba&&wn(Dr)&&Aa(ur)?xi.apply(this,arguments):arguments.length===Oa&&Kn(Dr)&&wr(ur)?Ea.apply(this,arguments):arguments.length===Ma&&Nn(Dr)&&nr(ur)?Ca.apply(this,arguments):arguments.length===Pa&&kn(Dr)&&wa(ur)?Ki.apply(this,arguments):arguments.length===li&&Gi(Dr)&&oi(ur)?Fa.apply(this,arguments):arguments.length===xa&&Pi(Dr)&&un(ur)?Sa.apply(this,arguments):Yi.apply(this,arguments)}try{Object.defineProperty(Rn,"name",{value:R})}catch{}return Rn.signatures=ne,Rn._typedFunctionData={signatures:we,signatureMap:Vt},Rn}function it(R,j,$){throw q(R,j,$)}function qe(R){return Re(R,0,R.length-1)}function Te(R){return R[R.length-1]}function Re(R,j,$){return Array.prototype.slice.call(R,j,$)}function lt(R,j){for(var $=0;$<R.length;$++)if(j(R[$]))return R[$]}function et(R,j){return Array.prototype.concat.apply([],R.map(j))}function at(){var R=qe(arguments).map(function($){return _(O($))}),j=Te(arguments);if(typeof j!="function")throw new TypeError("Callback function expected as last argument");return tt(R,j)}function tt(R,j){return{referTo:{references:R,callback:j}}}function rt(R){if(typeof R!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:R}}}function ze(R){return R&&ha(R.referTo)==="object"&&Array.isArray(R.referTo.references)&&typeof R.referTo.callback=="function"}function We(R){return R&&ha(R.referToSelf)==="object"&&typeof R.referToSelf.callback=="function"}function Ae(R,j){if(!R)return j;if(j&&j!==R){var $=new Error("Function names do not match (expected: "+R+", actual: "+j+")");throw $.data={actual:j,expected:R},$}return R}function Se(R){var j;for(var $ in R)Object.prototype.hasOwnProperty.call(R,$)&&(c(R[$])||typeof R[$].signature=="string")&&(j=Ae(j,R[$].name));return j}function yt(R,j){var $;for($ in j)if(Object.prototype.hasOwnProperty.call(j,$)){if($ in R&&j[$]!==R[$]){var fe=new Error('Signature "'+$+'" is defined twice');throw fe.data={signature:$,sourceFunction:j[$],destFunction:R[$]},fe}R[$]=j[$]}}var Tt=l;l=function(j){for(var $=typeof j=="string",fe=$?1:0,ne=$?j:"",he={},ae=fe;ae<arguments.length;++ae){var ce=arguments[ae],ye={},Oe=void 0;if(typeof ce=="function"?(Oe=ce.name,typeof ce.signature=="string"?ye[ce.signature]=ce:c(ce)&&(ye=ce.signatures)):e(ce)&&(ye=ce,$||(Oe=Se(ce))),Object.keys(ye).length===0){var Xe=new TypeError("Argument to 'typed' at index "+ae+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Xe.data={index:ae,argument:ce},Xe}$||(ne=Ae(ne,Oe)),yt(he,ye)}return Me(ne||"",he)},l.create=Id,l.createCount=Tt.createCount,l.onMismatch=it,l.throwMismatchError=it,l.createError=q,l.clear=p,l.clearConversions=f,l.addTypes=h,l._findType=o,l.referTo=at,l.referToSelf=rt,l.convert=m,l.findSignature=g,l.find=y,l.isTypedFunction=c,l.warnAgainstDeprecatedThis=!0,l.addType=function(R,j){var $="any";j!==!1&&n.has("Object")&&($="Object"),l.addTypes([R],$)};function Wt(R){if(!R||typeof R.from!="string"||typeof R.to!="string"||typeof R.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(R.to===R.from)throw new SyntaxError('Illegal to define conversion from "'+R.from+'" to itself.')}return l.addConversion=function(R){Wt(R);var j=o(R.to);if(j.conversionsTo.every(function($){return $.from!==R.from}))j.conversionsTo.push({from:R.from,convert:R.convert,index:u++});else throw new Error('There is already a conversion from "'+R.from+'" to "'+j.name+'"')},l.addConversions=function(R){R.forEach(l.addConversion)},l.removeConversion=function(R){Wt(R);var j=o(R.to),$=lt(j.conversionsTo,function(ne){return ne.from===R.from});if(!$)throw new Error("Attempt to remove nonexistent conversion from "+R.from+" to "+R.to);if($.convert!==R.convert)throw new Error("Conversion to remove does not match existing conversion");var fe=j.conversionsTo.indexOf($);j.conversionsTo.splice(fe,1)},l.resolve=function(R,j){if(!c(R))throw new TypeError(Uh);for(var $=R._typedFunctionData.signatures,fe=0;fe<$.length;++fe)if($[fe].test(j))return $[fe];return null},l}const Vh=Id();function Ar(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}function tl(e,t,r){var n={2:"0b",8:"0o",16:"0x"},a=n[t],u="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Ar(r))throw new Error("size must be an integer");if(e>2**(r-1)-1||e<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Ar(e))throw new Error("Value must be an integer");e<0&&(e=e+2**r),u="i".concat(r)}var l="";return e<0&&(e=-e,l="-"),"".concat(l).concat(a).concat(e.toString(t)).concat(u)}function Rl(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var r="auto",n,a;if(t&&(t.notation&&(r=t.notation),tr(t)?n=t:tr(t.precision)&&(n=t.precision),t.wordSize&&(a=t.wordSize,typeof a!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Oy(e,n);case"exponential":return Nd(e,n);case"engineering":return By(e,n);case"bin":return tl(e,2,a);case"oct":return tl(e,8,a);case"hex":return tl(e,16,a);case"auto":return My(e,n,t&&t).replace(/((\.\d*?)(0+))($|e)/,function(){var u=arguments[2],l=arguments[4];return u!=="."?u+l:l});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Ms(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var r=t[1],n=t[2],a=parseFloat(t[4]||"0"),u=n.indexOf(".");a+=u!==-1?u-1:n.length-1;var l=n.replace(".","").replace(/^0*/,function(o){return a-=o.length,""}).replace(/0*$/,"").split("").map(function(o){return parseInt(o)});return l.length===0&&(l.push(0),a++),{sign:r,coefficients:l,exponent:a}}function By(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=Ms(e),n=Ps(r,t),a=n.exponent,u=n.coefficients,l=a%3===0?a:a<0?a-3-a%3:a-a%3;if(tr(t))for(;t>u.length||a-l+1>u.length;)u.push(0);else for(var o=Math.abs(a-l)-(u.length-1),h=0;h<o;h++)u.push(0);for(var p=Math.abs(a-l),f=1;p>0;)f++,p--;var d=u.slice(f).join(""),c=tr(t)&&d.length||d.match(/[1-9]/)?"."+d:"",g=u.slice(0,f).join("")+c+"e"+(a>=0?"+":"")+l.toString();return n.sign+g}function Oy(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=Ms(e),n=typeof t=="number"?Ps(r,r.exponent+1+t):r,a=n.coefficients,u=n.exponent+1,l=u+(t||0);return a.length<l&&(a=a.concat(pa(l-a.length))),u<0&&(a=pa(-u+1).concat(a),u=1),u<a.length&&a.splice(u,0,u===0?"0.":"."),n.sign+a.join("")}function Nd(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=Ms(e),n=t?Ps(r,t):r,a=n.coefficients,u=n.exponent;a.length<t&&(a=a.concat(pa(t-a.length)));var l=a.shift();return n.sign+l+(a.length>0?"."+a.join(""):"")+"e"+(u>=0?"+":"")+u}function My(e,t,r){if(isNaN(e)||!isFinite(e))return String(e);var n=r&&r.lowerExp!==void 0?r.lowerExp:-3,a=r&&r.upperExp!==void 0?r.upperExp:5,u=Ms(e),l=t?Ps(u,t):u;if(l.exponent<n||l.exponent>=a)return Nd(e,t);var o=l.coefficients,h=l.exponent;o.length<t&&(o=o.concat(pa(t-o.length))),o=o.concat(pa(h-o.length+1+(o.length<t?t-o.length:0))),o=pa(-h).concat(o);var p=h>0?h:0;return p<o.length-1&&o.splice(p+1,0,"."),l.sign+o.join("")}function Ps(e,t){for(var r={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},n=r.coefficients;t<=0;)n.unshift(0),r.exponent++,t++;if(n.length>t){var a=n.splice(t,n.length-t);if(a[0]>=5){var u=t-1;for(n[u]++;n[u]===10;)n.pop(),u===0&&(n.unshift(0),r.exponent++,u++),u--,n[u]++}}return r}function pa(e){for(var t=[],r=0;r<e;r++)t.push(0);return t}function Py(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var xy=Number.EPSILON||2220446049250313e-31;function is(e,t,r){if(r==null)return e===t;if(e===t)return!0;if(isNaN(e)||isNaN(t))return!1;if(isFinite(e)&&isFinite(t)){var n=Math.abs(e-t);return n<xy?!0:n<=Math.max(Math.abs(e),Math.abs(t))*r}return!1}function rl(e,t,r){var n=e.constructor,a=new n(2),u="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Ar(r))throw new Error("size must be an integer");if(e.greaterThan(a.pow(r-1).sub(1))||e.lessThan(a.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(a.pow(r))),u="i".concat(r)}switch(t){case 2:return"".concat(e.toBinary()).concat(u);case 8:return"".concat(e.toOctal()).concat(u);case 16:return"".concat(e.toHexadecimal()).concat(u);default:throw new Error("Base ".concat(t," not supported "))}}function Ty(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var r="auto",n,a;if(t!==void 0&&(t.notation&&(r=t.notation),typeof t=="number"?n=t:t.precision&&(n=t.precision),t.wordSize&&(a=t.wordSize,typeof a!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return Ny(e,n);case"exponential":return jh(e,n);case"engineering":return Iy(e,n);case"bin":return rl(e,2,a);case"oct":return rl(e,8,a);case"hex":return rl(e,16,a);case"auto":{var u=t&&t.lowerExp!==void 0?t.lowerExp:-3,l=t&&t.upperExp!==void 0?t.upperExp:5;if(e.isZero())return"0";var o,h=e.toSignificantDigits(n),p=h.e;return p>=u&&p<l?o=h.toFixed():o=jh(e,n),o.replace(/((\.\d*?)(0+))($|e)/,function(){var f=arguments[2],d=arguments[4];return f!=="."?f+d:d})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Iy(e,t){var r=e.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,a=e.mul(Math.pow(10,-n)),u=a.toPrecision(t);return u.indexOf("e")!==-1&&(u=a.toString()),u+"e"+(r>=0?"+":"")+n.toString()}function jh(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function Ny(e,t){return e.toFixed(t)}function Gr(e,t){var r=ky(e,t);return t&&typeof t=="object"&&"truncate"in t&&r.length>t.truncate?r.substring(0,t.truncate-3)+"...":r}function ky(e,t){if(typeof e=="number")return Rl(e,t);if(_n(e))return Ty(e,t);if(Ry(e))return!t||t.fraction!=="decimal"?e.s*e.n+"/"+e.d:e.toString();if(Array.isArray(e))return kd(e,t);if(qn(e))return'"'+e+'"';if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var r=Object.keys(e).map(n=>'"'+n+'": '+Gr(e[n],t));return"{"+r.join(", ")+"}"}return String(e)}function kd(e,t){if(Array.isArray(e)){for(var r="[",n=e.length,a=0;a<n;a++)a!==0&&(r+=", "),r+=kd(e[a],t);return r+="]",r}else return Gr(e,t)}function Ry(e){return e&&typeof e=="object"&&typeof e.s=="number"&&typeof e.n=="number"&&typeof e.d=="number"||!1}function Mt(e,t,r){if(!(this instanceof Mt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}Mt.prototype=new RangeError;Mt.prototype.constructor=RangeError;Mt.prototype.name="DimensionError";Mt.prototype.isDimensionError=!0;function Hi(e,t,r){if(!(this instanceof Hi))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Hi.prototype=new RangeError;Hi.prototype.constructor=RangeError;Hi.prototype.name="IndexError";Hi.prototype.isIndexError=!0;function Fi(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function Rd(e,t,r){var n,a=e.length;if(a!==t[r])throw new Mt(a,t[r]);if(r<t.length-1){var u=r+1;for(n=0;n<a;n++){var l=e[n];if(!Array.isArray(l))throw new Mt(t.length-1,t.length,"<");Rd(e[n],t,u)}}else for(n=0;n<a;n++)if(Array.isArray(e[n]))throw new Mt(t.length+1,t.length,">")}function qh(e,t){var r=t.length===0;if(r){if(Array.isArray(e))throw new Mt(e.length,0)}else Rd(e,t,0)}function Qt(e,t){if(!tr(e)||!Ar(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new Hi(e,t)}function zh(e,t,r){if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(a){if(!tr(a)||!Ar(a)||a<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Gr(t)+")")});var n=r!==void 0?r:0;return Ll(e,t,0,n),e}function Ll(e,t,r,n){var a,u,l=e.length,o=t[r],h=Math.min(l,o);if(e.length=o,r<t.length-1){var p=r+1;for(a=0;a<h;a++)u=e[a],Array.isArray(u)||(u=[u],e[a]=u),Ll(u,t,p,n);for(a=h;a<o;a++)u=[],e[a]=u,Ll(u,t,p,n)}else{for(a=0;a<h;a++)for(;Array.isArray(e[a]);)e[a]=e[a][0];for(a=h;a<o;a++)e[a]=n}}function Ly(e,t){var r=Vy(e),n=r.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Mt(0,n,"!=");t=sf(t,n);var a=Ld(t);if(n!==a)throw new Mt(a,n,"!=");try{return Uy(r,t)}catch(u){throw u instanceof Mt?new Mt(a,n,"!="):u}}function sf(e,t){var r=Ld(e),n=e.slice(),a=-1,u=e.indexOf(a),l=e.indexOf(a,u+1)>=0;if(l)throw new Error("More than one wildcard in sizes");var o=u>=0,h=t%r===0;if(o)if(h)n[u]=-t/r;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-r);return n}function Ld(e){return e.reduce((t,r)=>t*r,1)}function Uy(e,t){for(var r=e,n,a=t.length-1;a>0;a--){var u=t[a];n=[];for(var l=r.length/u,o=0;o<l;o++)n.push(r.slice(o*u,(o+1)*u));r=n}return r}function Ud(e,t,r,n){var a=n||Fi(e);if(r)for(var u=0;u<r;u++)e=[e],a.unshift(1);for(e=Vd(e,t,0);a.length<t;)a.push(1);return e}function Vd(e,t,r){var n,a;if(Array.isArray(e)){var u=r+1;for(n=0,a=e.length;n<a;n++)e[n]=Vd(e[n],t,u)}else for(var l=r;l<t;l++)e=[e];return e}function Vy(e){if(!Array.isArray(e))return e;var t=[];return e.forEach(function r(n){Array.isArray(n)?n.forEach(r):t.push(n)}),t}function as(e,t){for(var r,n=0,a=0;a<e.length;a++){var u=e[a],l=Array.isArray(u);if(a===0&&l&&(n=u.length),l&&u.length!==n)return;var o=l?as(u,t):t(u);if(r===void 0)r=o;else if(r!==o)return"mixed"}return r}function xt(e,t,r,n){function a(u){var l=Ey(u,t.map(zy));return jy(e,t,u),r(l)}return a.isFactory=!0,a.fn=e,a.dependencies=t.slice().sort(),n&&(a.meta=n),a}function jy(e,t,r){var n=t.filter(u=>!qy(u)).every(u=>r[u]!==void 0);if(!n){var a=t.filter(u=>r[u]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(a.map(u=>'"'.concat(u,'"')).join(", "),"."))}}function qy(e){return e&&e[0]==="?"}function zy(e){return e&&e[0]==="?"?e.slice(1):e}function Wy(e,t){if(qd(e)&&jd(e,t))return e[t];throw typeof e[t]=="function"&&Ky(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function Hy(e,t,r){if(qd(e)&&jd(e,t))return e[t]=r,r;throw new Error('No access to property "'+t+'"')}function Gy(e,t){return t in e}function jd(e,t){return!e||typeof e!="object"?!1:eu(Yy,t)?!0:!(t in Object.prototype||t in Function.prototype)}function Ky(e,t){return e==null||typeof e[t]!="function"||eu(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:eu(Zy,t)?!0:!(t in Object.prototype||t in Function.prototype)}function qd(e){return typeof e=="object"&&e&&e.constructor===Object}var Yy={length:!0,name:!0},Zy={toString:!0,valueOf:!0,toLocaleString:!0};class $y{constructor(t){this.wrappedObject=t}keys(){return Object.keys(this.wrappedObject)}get(t){return Wy(this.wrappedObject,t)}set(t,r){return Hy(this.wrappedObject,t,r),this}has(t){return Gy(this.wrappedObject,t)}}function Xy(e){return e?e instanceof Map||e instanceof $y||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}var zd=function(){return zd=Vh.create,Vh},Jy=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Qy=xt("typed",Jy,function(t){var{BigNumber:r,Complex:n,DenseMatrix:a,Fraction:u}=t,l=zd();return l.clear(),l.addTypes([{name:"number",test:tr},{name:"Complex",test:Md},{name:"BigNumber",test:_n},{name:"Fraction",test:Pd},{name:"Unit",test:xd},{name:"identifier",test:o=>qn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(o)},{name:"string",test:qn},{name:"Chain",test:yy},{name:"Array",test:Jt},{name:"Matrix",test:Ur},{name:"DenseMatrix",test:Yb},{name:"SparseMatrix",test:Zb},{name:"Range",test:$b},{name:"Index",test:uf},{name:"boolean",test:Xb},{name:"ResultSet",test:Jb},{name:"Help",test:Qb},{name:"function",test:ey},{name:"Date",test:ty},{name:"RegExp",test:ry},{name:"null",test:iy},{name:"undefined",test:Td},{name:"AccessorNode",test:ay},{name:"ArrayNode",test:uy},{name:"AssignmentNode",test:sy},{name:"BlockNode",test:oy},{name:"ConditionalNode",test:ly},{name:"ConstantNode",test:fy},{name:"FunctionNode",test:hy},{name:"FunctionAssignmentNode",test:cy},{name:"IndexNode",test:dy},{name:"Node",test:py},{name:"ObjectNode",test:vy},{name:"OperatorNode",test:gy},{name:"ParenthesisNode",test:my},{name:"RangeNode",test:_y},{name:"RelationalNode",test:Dy},{name:"SymbolNode",test:by},{name:"Map",test:Xy},{name:"Object",test:ny}]),l.addConversions([{from:"number",to:"BigNumber",convert:function(h){if(r||nl(h),Py(h)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+h+"). Use function bignumber(x) to convert to BigNumber.");return new r(h)}},{from:"number",to:"Complex",convert:function(h){return n||Gu(h),new n(h,0)}},{from:"BigNumber",to:"Complex",convert:function(h){return n||Gu(h),new n(h.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(h){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(h){return n||Gu(h),new n(h.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(h){u||il(h);var p=new u(h);if(p.valueOf()!==h)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+h+"). Use function fraction(x) to convert to Fraction.");return p}},{from:"string",to:"number",convert:function(h){var p=Number(h);if(isNaN(p))throw new Error('Cannot convert "'+h+'" to a number');return p}},{from:"string",to:"BigNumber",convert:function(h){r||nl(h);try{return new r(h)}catch{throw new Error('Cannot convert "'+h+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(h){u||il(h);try{return new u(h)}catch{throw new Error('Cannot convert "'+h+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(h){n||Gu(h);try{return new n(h)}catch{throw new Error('Cannot convert "'+h+'" to Complex')}}},{from:"boolean",to:"number",convert:function(h){return+h}},{from:"boolean",to:"BigNumber",convert:function(h){return r||nl(h),new r(+h)}},{from:"boolean",to:"Fraction",convert:function(h){return u||il(h),new u(+h)}},{from:"boolean",to:"string",convert:function(h){return String(h)}},{from:"Array",to:"Matrix",convert:function(h){return a||eA(),new a(h)}},{from:"Matrix",to:"Array",convert:function(h){return h.valueOf()}}]),l.onMismatch=(o,h,p)=>{var f=l.createError(o,h,p);if(["wrongType","mismatch"].includes(f.data.category)&&h.length===1&&rs(h[0])&&p.some(c=>!c.params.includes(","))){var d=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw d.data=f.data,d}throw f},l.onMismatch=(o,h,p)=>{var f=l.createError(o,h,p);if(["wrongType","mismatch"].includes(f.data.category)&&h.length===1&&rs(h[0])&&p.some(c=>!c.params.includes(","))){var d=new TypeError("Function '".concat(o,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(o,")'."));throw d.data=f.data,d}throw f},l});function nl(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function Gu(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function eA(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function il(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var da=9e15,Oi=1e9,Ul="0123456789abcdef",us="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",ss="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Vl={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-da,maxE:da,crypto:!1},Wd,ui,nt=!0,xs="[DecimalError] ",Si=xs+"Invalid argument: ",Hd=xs+"Precision limit exceeded",Gd=xs+"crypto unavailable",Kd="[object Decimal]",Ir=Math.floor,gr=Math.pow,tA=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,rA=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,nA=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Yd=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Pn=1e7,Ye=7,iA=9007199254740991,aA=us.length-1,jl=ss.length-1,_e={toStringTag:Kd};_e.absoluteValue=_e.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),Ve(e)};_e.ceil=function(){return Ve(new this.constructor(this),this.e+1,2)};_e.clampedTo=_e.clamp=function(e,t){var r,n=this,a=n.constructor;if(e=new a(e),t=new a(t),!e.s||!t.s)return new a(NaN);if(e.gt(t))throw Error(Si+t);return r=n.cmp(e),r<0?e:n.cmp(t)>0?t:new a(n)};_e.comparedTo=_e.cmp=function(e){var t,r,n,a,u=this,l=u.d,o=(e=new u.constructor(e)).d,h=u.s,p=e.s;if(!l||!o)return!h||!p?NaN:h!==p?h:l===o?0:!l^h<0?1:-1;if(!l[0]||!o[0])return l[0]?h:o[0]?-p:0;if(h!==p)return h;if(u.e!==e.e)return u.e>e.e^h<0?1:-1;for(n=l.length,a=o.length,t=0,r=n<a?n:a;t<r;++t)if(l[t]!==o[t])return l[t]>o[t]^h<0?1:-1;return n===a?0:n>a^h<0?1:-1};_e.cosine=_e.cos=function(){var e,t,r=this,n=r.constructor;return r.d?r.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+Ye,n.rounding=1,r=uA(n,Qd(n,r)),n.precision=e,n.rounding=t,Ve(ui==2||ui==3?r.neg():r,e,t,!0)):new n(1):new n(NaN)};_e.cubeRoot=_e.cbrt=function(){var e,t,r,n,a,u,l,o,h,p,f=this,d=f.constructor;if(!f.isFinite()||f.isZero())return new d(f);for(nt=!1,u=f.s*gr(f.s*f,1/3),!u||Math.abs(u)==1/0?(r=Mr(f.d),e=f.e,(u=(e-r.length+1)%3)&&(r+=u==1||u==-2?"0":"00"),u=gr(r,1/3),e=Ir((e+1)/3)-(e%3==(e<0?-1:2)),u==1/0?r="5e"+e:(r=u.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),n=new d(r),n.s=f.s):n=new d(u.toString()),l=(e=d.precision)+3;;)if(o=n,h=o.times(o).times(o),p=h.plus(f),n=kt(p.plus(f).times(o),p.plus(h),l+2,1),Mr(o.d).slice(0,l)===(r=Mr(n.d)).slice(0,l))if(r=r.slice(l-3,l+1),r=="9999"||!a&&r=="4999"){if(!a&&(Ve(o,e+1,0),o.times(o).times(o).eq(f))){n=o;break}l+=4,a=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Ve(n,e+1,1),t=!n.times(n).times(n).eq(f));break}return nt=!0,Ve(n,e,d.rounding,t)};_e.decimalPlaces=_e.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-Ir(this.e/Ye))*Ye,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};_e.dividedBy=_e.div=function(e){return kt(this,new this.constructor(e))};_e.dividedToIntegerBy=_e.divToInt=function(e){var t=this,r=t.constructor;return Ve(kt(t,new r(e),0,1,1),r.precision,r.rounding)};_e.equals=_e.eq=function(e){return this.cmp(e)===0};_e.floor=function(){return Ve(new this.constructor(this),this.e+1,3)};_e.greaterThan=_e.gt=function(e){return this.cmp(e)>0};_e.greaterThanOrEqualTo=_e.gte=function(e){var t=this.cmp(e);return t==1||t===0};_e.hyperbolicCosine=_e.cosh=function(){var e,t,r,n,a,u=this,l=u.constructor,o=new l(1);if(!u.isFinite())return new l(u.s?1/0:NaN);if(u.isZero())return o;r=l.precision,n=l.rounding,l.precision=r+Math.max(u.e,u.sd())+4,l.rounding=1,a=u.d.length,a<32?(e=Math.ceil(a/3),t=(1/Is(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),u=ma(l,1,u.times(t),new l(1),!0);for(var h,p=e,f=new l(8);p--;)h=u.times(u),u=o.minus(h.times(f.minus(h.times(f))));return Ve(u,l.precision=r,l.rounding=n,!0)};_e.hyperbolicSine=_e.sinh=function(){var e,t,r,n,a=this,u=a.constructor;if(!a.isFinite()||a.isZero())return new u(a);if(t=u.precision,r=u.rounding,u.precision=t+Math.max(a.e,a.sd())+4,u.rounding=1,n=a.d.length,n<3)a=ma(u,2,a,a,!0);else{e=1.4*Math.sqrt(n),e=e>16?16:e|0,a=a.times(1/Is(5,e)),a=ma(u,2,a,a,!0);for(var l,o=new u(5),h=new u(16),p=new u(20);e--;)l=a.times(a),a=a.times(o.plus(l.times(h.times(l).plus(p))))}return u.precision=t,u.rounding=r,Ve(a,t,r,!0)};_e.hyperbolicTangent=_e.tanh=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,kt(r.sinh(),r.cosh(),n.precision=e,n.rounding=t)):new n(r.s)};_e.inverseCosine=_e.acos=function(){var e,t=this,r=t.constructor,n=t.abs().cmp(1),a=r.precision,u=r.rounding;return n!==-1?n===0?t.isNeg()?Mn(r,a,u):new r(0):new r(NaN):t.isZero()?Mn(r,a+4,u).times(.5):(r.precision=a+6,r.rounding=1,t=t.asin(),e=Mn(r,a+4,u).times(.5),r.precision=a,r.rounding=u,e.minus(t))};_e.inverseHyperbolicCosine=_e.acosh=function(){var e,t,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,nt=!1,r=r.times(r).minus(1).sqrt().plus(r),nt=!0,n.precision=e,n.rounding=t,r.ln()):new n(r)};_e.inverseHyperbolicSine=_e.asinh=function(){var e,t,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,nt=!1,r=r.times(r).plus(1).sqrt().plus(r),nt=!0,n.precision=e,n.rounding=t,r.ln())};_e.inverseHyperbolicTangent=_e.atanh=function(){var e,t,r,n,a=this,u=a.constructor;return a.isFinite()?a.e>=0?new u(a.abs().eq(1)?a.s/0:a.isZero()?a:NaN):(e=u.precision,t=u.rounding,n=a.sd(),Math.max(n,e)<2*-a.e-1?Ve(new u(a),e,t,!0):(u.precision=r=n-a.e,a=kt(a.plus(1),new u(1).minus(a),r+e,1),u.precision=e+4,u.rounding=1,a=a.ln(),u.precision=e,u.rounding=t,a.times(.5))):new u(NaN)};_e.inverseSine=_e.asin=function(){var e,t,r,n,a=this,u=a.constructor;return a.isZero()?new u(a):(t=a.abs().cmp(1),r=u.precision,n=u.rounding,t!==-1?t===0?(e=Mn(u,r+4,n).times(.5),e.s=a.s,e):new u(NaN):(u.precision=r+6,u.rounding=1,a=a.div(new u(1).minus(a.times(a)).sqrt().plus(1)).atan(),u.precision=r,u.rounding=n,a.times(2)))};_e.inverseTangent=_e.atan=function(){var e,t,r,n,a,u,l,o,h,p=this,f=p.constructor,d=f.precision,c=f.rounding;if(p.isFinite()){if(p.isZero())return new f(p);if(p.abs().eq(1)&&d+4<=jl)return l=Mn(f,d+4,c).times(.25),l.s=p.s,l}else{if(!p.s)return new f(NaN);if(d+4<=jl)return l=Mn(f,d+4,c).times(.5),l.s=p.s,l}for(f.precision=o=d+10,f.rounding=1,r=Math.min(28,o/Ye+2|0),e=r;e;--e)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(nt=!1,t=Math.ceil(o/Ye),n=1,h=p.times(p),l=new f(p),a=p;e!==-1;)if(a=a.times(h),u=l.minus(a.div(n+=2)),a=a.times(h),l=u.plus(a.div(n+=2)),l.d[t]!==void 0)for(e=t;l.d[e]===u.d[e]&&e--;);return r&&(l=l.times(2<<r-1)),nt=!0,Ve(l,f.precision=d,f.rounding=c,!0)};_e.isFinite=function(){return!!this.d};_e.isInteger=_e.isInt=function(){return!!this.d&&Ir(this.e/Ye)>this.d.length-2};_e.isNaN=function(){return!this.s};_e.isNegative=_e.isNeg=function(){return this.s<0};_e.isPositive=_e.isPos=function(){return this.s>0};_e.isZero=function(){return!!this.d&&this.d[0]===0};_e.lessThan=_e.lt=function(e){return this.cmp(e)<0};_e.lessThanOrEqualTo=_e.lte=function(e){return this.cmp(e)<1};_e.logarithm=_e.log=function(e){var t,r,n,a,u,l,o,h,p=this,f=p.constructor,d=f.precision,c=f.rounding,g=5;if(e==null)e=new f(10),t=!0;else{if(e=new f(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new f(NaN);t=e.eq(10)}if(r=p.d,p.s<0||!r||!r[0]||p.eq(1))return new f(r&&!r[0]?-1/0:p.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)u=!0;else{for(a=r[0];a%10===0;)a/=10;u=a!==1}if(nt=!1,o=d+g,l=yi(p,o),n=t?os(f,o+10):yi(e,o),h=kt(l,n,o,1),tu(h.d,a=d,c))do if(o+=10,l=yi(p,o),n=t?os(f,o+10):yi(e,o),h=kt(l,n,o,1),!u){+Mr(h.d).slice(a+1,a+15)+1==1e14&&(h=Ve(h,d+1,0));break}while(tu(h.d,a+=10,c));return nt=!0,Ve(h,d,c)};_e.minus=_e.sub=function(e){var t,r,n,a,u,l,o,h,p,f,d,c,g=this,y=g.constructor;if(e=new y(e),!g.d||!e.d)return!g.s||!e.s?e=new y(NaN):g.d?e.s=-e.s:e=new y(e.d||g.s!==e.s?g:NaN),e;if(g.s!=e.s)return e.s=-e.s,g.plus(e);if(p=g.d,c=e.d,o=y.precision,h=y.rounding,!p[0]||!c[0]){if(c[0])e.s=-e.s;else if(p[0])e=new y(g);else return new y(h===3?-0:0);return nt?Ve(e,o,h):e}if(r=Ir(e.e/Ye),f=Ir(g.e/Ye),p=p.slice(),u=f-r,u){for(d=u<0,d?(t=p,u=-u,l=c.length):(t=c,r=f,l=p.length),n=Math.max(Math.ceil(o/Ye),l)+2,u>n&&(u=n,t.length=1),t.reverse(),n=u;n--;)t.push(0);t.reverse()}else{for(n=p.length,l=c.length,d=n<l,d&&(l=n),n=0;n<l;n++)if(p[n]!=c[n]){d=p[n]<c[n];break}u=0}for(d&&(t=p,p=c,c=t,e.s=-e.s),l=p.length,n=c.length-l;n>0;--n)p[l++]=0;for(n=c.length;n>u;){if(p[--n]<c[n]){for(a=n;a&&p[--a]===0;)p[a]=Pn-1;--p[a],p[n]+=Pn}p[n]-=c[n]}for(;p[--l]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(e.d=p,e.e=Ts(p,r),nt?Ve(e,o,h):e):new y(h===3?-0:0)};_e.modulo=_e.mod=function(e){var t,r=this,n=r.constructor;return e=new n(e),!r.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||r.d&&!r.d[0]?Ve(new n(r),n.precision,n.rounding):(nt=!1,n.modulo==9?(t=kt(r,e.abs(),0,3,1),t.s*=e.s):t=kt(r,e,0,n.modulo,1),t=t.times(e),nt=!0,r.minus(t))};_e.naturalExponential=_e.exp=function(){return ql(this)};_e.naturalLogarithm=_e.ln=function(){return yi(this)};_e.negated=_e.neg=function(){var e=new this.constructor(this);return e.s=-e.s,Ve(e)};_e.plus=_e.add=function(e){var t,r,n,a,u,l,o,h,p,f,d=this,c=d.constructor;if(e=new c(e),!d.d||!e.d)return!d.s||!e.s?e=new c(NaN):d.d||(e=new c(e.d||d.s===e.s?d:NaN)),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(p=d.d,f=e.d,o=c.precision,h=c.rounding,!p[0]||!f[0])return f[0]||(e=new c(d)),nt?Ve(e,o,h):e;if(u=Ir(d.e/Ye),n=Ir(e.e/Ye),p=p.slice(),a=u-n,a){for(a<0?(r=p,a=-a,l=f.length):(r=f,n=u,l=p.length),u=Math.ceil(o/Ye),l=u>l?u+1:l+1,a>l&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(l=p.length,a=f.length,l-a<0&&(a=l,r=f,f=p,p=r),t=0;a;)t=(p[--a]=p[a]+f[a]+t)/Pn|0,p[a]%=Pn;for(t&&(p.unshift(t),++n),l=p.length;p[--l]==0;)p.pop();return e.d=p,e.e=Ts(p,n),nt?Ve(e,o,h):e};_e.precision=_e.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Si+e);return r.d?(t=Zd(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};_e.round=function(){var e=this,t=e.constructor;return Ve(new t(e),e.e+1,t.rounding)};_e.sine=_e.sin=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+Ye,n.rounding=1,r=oA(n,Qd(n,r)),n.precision=e,n.rounding=t,Ve(ui>2?r.neg():r,e,t,!0)):new n(NaN)};_e.squareRoot=_e.sqrt=function(){var e,t,r,n,a,u,l=this,o=l.d,h=l.e,p=l.s,f=l.constructor;if(p!==1||!o||!o[0])return new f(!p||p<0&&(!o||o[0])?NaN:o?l:1/0);for(nt=!1,p=Math.sqrt(+l),p==0||p==1/0?(t=Mr(o),(t.length+h)%2==0&&(t+="0"),p=Math.sqrt(t),h=Ir((h+1)/2)-(h<0||h%2),p==1/0?t="5e"+h:(t=p.toExponential(),t=t.slice(0,t.indexOf("e")+1)+h),n=new f(t)):n=new f(p.toString()),r=(h=f.precision)+3;;)if(u=n,n=u.plus(kt(l,u,r+2,1)).times(.5),Mr(u.d).slice(0,r)===(t=Mr(n.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!a&&t=="4999"){if(!a&&(Ve(u,h+1,0),u.times(u).eq(l))){n=u;break}r+=4,a=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Ve(n,h+1,1),e=!n.times(n).eq(l));break}return nt=!0,Ve(n,h,f.rounding,e)};_e.tangent=_e.tan=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,r=r.sin(),r.s=1,r=kt(r,new n(1).minus(r.times(r)).sqrt(),e+10,0),n.precision=e,n.rounding=t,Ve(ui==2||ui==4?r.neg():r,e,t,!0)):new n(NaN)};_e.times=_e.mul=function(e){var t,r,n,a,u,l,o,h,p,f=this,d=f.constructor,c=f.d,g=(e=new d(e)).d;if(e.s*=f.s,!c||!c[0]||!g||!g[0])return new d(!e.s||c&&!c[0]&&!g||g&&!g[0]&&!c?NaN:!c||!g?e.s/0:e.s*0);for(r=Ir(f.e/Ye)+Ir(e.e/Ye),h=c.length,p=g.length,h<p&&(u=c,c=g,g=u,l=h,h=p,p=l),u=[],l=h+p,n=l;n--;)u.push(0);for(n=p;--n>=0;){for(t=0,a=h+n;a>n;)o=u[a]+g[n]*c[a-n-1]+t,u[a--]=o%Pn|0,t=o/Pn|0;u[a]=(u[a]+t)%Pn|0}for(;!u[--l];)u.pop();return t?++r:u.shift(),e.d=u,e.e=Ts(u,r),nt?Ve(e,d.precision,d.rounding):e};_e.toBinary=function(e,t){return of(this,2,e,t)};_e.toDecimalPlaces=_e.toDP=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Yr(e,0,Oi),t===void 0?t=n.rounding:Yr(t,0,8),Ve(r,e+r.e+1,t))};_e.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Wn(n,!0):(Yr(e,0,Oi),t===void 0?t=a.rounding:Yr(t,0,8),n=Ve(new a(n),e+1,t),r=Wn(n,!0,e+1)),n.isNeg()&&!n.isZero()?"-"+r:r};_e.toFixed=function(e,t){var r,n,a=this,u=a.constructor;return e===void 0?r=Wn(a):(Yr(e,0,Oi),t===void 0?t=u.rounding:Yr(t,0,8),n=Ve(new u(a),e+a.e+1,t),r=Wn(n,!1,e+n.e+1)),a.isNeg()&&!a.isZero()?"-"+r:r};_e.toFraction=function(e){var t,r,n,a,u,l,o,h,p,f,d,c,g=this,y=g.d,m=g.constructor;if(!y)return new m(g);if(p=r=new m(1),n=h=new m(0),t=new m(n),u=t.e=Zd(y)-g.e-1,l=u%Ye,t.d[0]=gr(10,l<0?Ye+l:l),e==null)e=u>0?t:p;else{if(o=new m(e),!o.isInt()||o.lt(p))throw Error(Si+o);e=o.gt(t)?u>0?t:p:o}for(nt=!1,o=new m(Mr(y)),f=m.precision,m.precision=u=y.length*Ye*2;d=kt(o,t,0,1,1),a=r.plus(d.times(n)),a.cmp(e)!=1;)r=n,n=a,a=p,p=h.plus(d.times(a)),h=a,a=t,t=o.minus(d.times(a)),o=a;return a=kt(e.minus(r),n,0,1,1),h=h.plus(a.times(p)),r=r.plus(a.times(n)),h.s=p.s=g.s,c=kt(p,n,u,1).minus(g).abs().cmp(kt(h,r,u,1).minus(g).abs())<1?[p,n]:[h,r],m.precision=f,nt=!0,c};_e.toHexadecimal=_e.toHex=function(e,t){return of(this,16,e,t)};_e.toNearest=function(e,t){var r=this,n=r.constructor;if(r=new n(r),e==null){if(!r.d)return r;e=new n(1),t=n.rounding}else{if(e=new n(e),t===void 0?t=n.rounding:Yr(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(nt=!1,r=kt(r,e,0,t,1).times(e),nt=!0,Ve(r)):(e.s=r.s,r=e),r};_e.toNumber=function(){return+this};_e.toOctal=function(e,t){return of(this,8,e,t)};_e.toPower=_e.pow=function(e){var t,r,n,a,u,l,o=this,h=o.constructor,p=+(e=new h(e));if(!o.d||!e.d||!o.d[0]||!e.d[0])return new h(gr(+o,p));if(o=new h(o),o.eq(1))return o;if(n=h.precision,u=h.rounding,e.eq(1))return Ve(o,n,u);if(t=Ir(e.e/Ye),t>=e.d.length-1&&(r=p<0?-p:p)<=iA)return a=$d(h,o,r,n),e.s<0?new h(1).div(a):Ve(a,n,u);if(l=o.s,l<0){if(t<e.d.length-1)return new h(NaN);if(e.d[t]&1||(l=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=l,o}return r=gr(+o,p),t=r==0||!isFinite(r)?Ir(p*(Math.log("0."+Mr(o.d))/Math.LN10+o.e+1)):new h(r+"").e,t>h.maxE+1||t<h.minE-1?new h(t>0?l/0:0):(nt=!1,h.rounding=o.s=1,r=Math.min(12,(t+"").length),a=ql(e.times(yi(o,n+r)),n),a.d&&(a=Ve(a,n+5,1),tu(a.d,n,u)&&(t=n+10,a=Ve(ql(e.times(yi(o,t+r)),t),t+5,1),+Mr(a.d).slice(n+1,n+15)+1==1e14&&(a=Ve(a,n+1,0)))),a.s=l,nt=!0,h.rounding=u,Ve(a,n,u))};_e.toPrecision=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Wn(n,n.e<=a.toExpNeg||n.e>=a.toExpPos):(Yr(e,1,Oi),t===void 0?t=a.rounding:Yr(t,0,8),n=Ve(new a(n),e,t),r=Wn(n,e<=n.e||n.e<=a.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+r:r};_e.toSignificantDigits=_e.toSD=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Yr(e,1,Oi),t===void 0?t=n.rounding:Yr(t,0,8)),Ve(new n(r),e,t)};_e.toString=function(){var e=this,t=e.constructor,r=Wn(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};_e.truncated=_e.trunc=function(){return Ve(new this.constructor(this),this.e+1,1)};_e.valueOf=_e.toJSON=function(){var e=this,t=e.constructor,r=Wn(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function Mr(e){var t,r,n,a=e.length-1,u="",l=e[0];if(a>0){for(u+=l,t=1;t<a;t++)n=e[t]+"",r=Ye-n.length,r&&(u+=bi(r)),u+=n;l=e[t],n=l+"",r=Ye-n.length,r&&(u+=bi(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return u+l}function Yr(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Si+e)}function tu(e,t,r,n){var a,u,l,o;for(u=e[0];u>=10;u/=10)--t;return--t<0?(t+=Ye,a=0):(a=Math.ceil((t+1)/Ye),t%=Ye),u=gr(10,Ye-t),o=e[a]%u|0,n==null?t<3?(t==0?o=o/100|0:t==1&&(o=o/10|0),l=r<4&&o==99999||r>3&&o==49999||o==5e4||o==0):l=(r<4&&o+1==u||r>3&&o+1==u/2)&&(e[a+1]/u/100|0)==gr(10,t-2)-1||(o==u/2||o==0)&&(e[a+1]/u/100|0)==0:t<4?(t==0?o=o/1e3|0:t==1?o=o/100|0:t==2&&(o=o/10|0),l=(n||r<4)&&o==9999||!n&&r>3&&o==4999):l=((n||r<4)&&o+1==u||!n&&r>3&&o+1==u/2)&&(e[a+1]/u/1e3|0)==gr(10,t-3)-1,l}function Xu(e,t,r){for(var n,a=[0],u,l=0,o=e.length;l<o;){for(u=a.length;u--;)a[u]*=t;for(a[0]+=Ul.indexOf(e.charAt(l++)),n=0;n<a.length;n++)a[n]>r-1&&(a[n+1]===void 0&&(a[n+1]=0),a[n+1]+=a[n]/r|0,a[n]%=r)}return a.reverse()}function uA(e,t){var r,n,a;if(t.isZero())return t;n=t.d.length,n<32?(r=Math.ceil(n/3),a=(1/Is(4,r)).toString()):(r=16,a="2.3283064365386962890625e-10"),e.precision+=r,t=ma(e,1,t.times(a),new e(1));for(var u=r;u--;){var l=t.times(t);t=l.times(l).minus(l).times(8).plus(1)}return e.precision-=r,t}var kt=function(){function e(n,a,u){var l,o=0,h=n.length;for(n=n.slice();h--;)l=n[h]*a+o,n[h]=l%u|0,o=l/u|0;return o&&n.unshift(o),n}function t(n,a,u,l){var o,h;if(u!=l)h=u>l?1:-1;else for(o=h=0;o<u;o++)if(n[o]!=a[o]){h=n[o]>a[o]?1:-1;break}return h}function r(n,a,u,l){for(var o=0;u--;)n[u]-=o,o=n[u]<a[u]?1:0,n[u]=o*l+n[u]-a[u];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,u,l,o,h){var p,f,d,c,g,y,m,_,b,C,w,O,S,B,P,I,N,G,L,q,Z=n.constructor,W=n.s==a.s?1:-1,z=n.d,H=a.d;if(!z||!z[0]||!H||!H[0])return new Z(!n.s||!a.s||(z?H&&z[0]==H[0]:!H)?NaN:z&&z[0]==0||!H?W*0:W/0);for(h?(g=1,f=n.e-a.e):(h=Pn,g=Ye,f=Ir(n.e/g)-Ir(a.e/g)),L=H.length,N=z.length,b=new Z(W),C=b.d=[],d=0;H[d]==(z[d]||0);d++);if(H[d]>(z[d]||0)&&f--,u==null?(B=u=Z.precision,l=Z.rounding):o?B=u+(n.e-a.e)+1:B=u,B<0)C.push(1),y=!0;else{if(B=B/g+2|0,d=0,L==1){for(c=0,H=H[0],B++;(d<N||c)&&B--;d++)P=c*h+(z[d]||0),C[d]=P/H|0,c=P%H|0;y=c||d<N}else{for(c=h/(H[0]+1)|0,c>1&&(H=e(H,c,h),z=e(z,c,h),L=H.length,N=z.length),I=L,w=z.slice(0,L),O=w.length;O<L;)w[O++]=0;q=H.slice(),q.unshift(0),G=H[0],H[1]>=h/2&&++G;do c=0,p=t(H,w,L,O),p<0?(S=w[0],L!=O&&(S=S*h+(w[1]||0)),c=S/G|0,c>1?(c>=h&&(c=h-1),m=e(H,c,h),_=m.length,O=w.length,p=t(m,w,_,O),p==1&&(c--,r(m,L<_?q:H,_,h))):(c==0&&(p=c=1),m=H.slice()),_=m.length,_<O&&m.unshift(0),r(w,m,O,h),p==-1&&(O=w.length,p=t(H,w,L,O),p<1&&(c++,r(w,L<O?q:H,O,h))),O=w.length):p===0&&(c++,w=[0]),C[d++]=c,p&&w[0]?w[O++]=z[I]||0:(w=[z[I]],O=1);while((I++<N||w[0]!==void 0)&&B--);y=w[0]!==void 0}C[0]||C.shift()}if(g==1)b.e=f,Wd=y;else{for(d=1,c=C[0];c>=10;c/=10)d++;b.e=d+f*g-1,Ve(b,o?u+b.e+1:u,l,y)}return b}}();function Ve(e,t,r,n){var a,u,l,o,h,p,f,d,c,g=e.constructor;e:if(t!=null){if(d=e.d,!d)return e;for(a=1,o=d[0];o>=10;o/=10)a++;if(u=t-a,u<0)u+=Ye,l=t,f=d[c=0],h=f/gr(10,a-l-1)%10|0;else if(c=Math.ceil((u+1)/Ye),o=d.length,c>=o)if(n){for(;o++<=c;)d.push(0);f=h=0,a=1,u%=Ye,l=u-Ye+1}else break e;else{for(f=o=d[c],a=1;o>=10;o/=10)a++;u%=Ye,l=u-Ye+a,h=l<0?0:f/gr(10,a-l-1)%10|0}if(n=n||t<0||d[c+1]!==void 0||(l<0?f:f%gr(10,a-l-1)),p=r<4?(h||n)&&(r==0||r==(e.s<0?3:2)):h>5||h==5&&(r==4||n||r==6&&(u>0?l>0?f/gr(10,a-l):0:d[c-1])%10&1||r==(e.s<0?8:7)),t<1||!d[0])return d.length=0,p?(t-=e.e+1,d[0]=gr(10,(Ye-t%Ye)%Ye),e.e=-t||0):d[0]=e.e=0,e;if(u==0?(d.length=c,o=1,c--):(d.length=c+1,o=gr(10,Ye-u),d[c]=l>0?(f/gr(10,a-l)%gr(10,l)|0)*o:0),p)for(;;)if(c==0){for(u=1,l=d[0];l>=10;l/=10)u++;for(l=d[0]+=o,o=1;l>=10;l/=10)o++;u!=o&&(e.e++,d[0]==Pn&&(d[0]=1));break}else{if(d[c]+=o,d[c]!=Pn)break;d[c--]=0,o=1}for(u=d.length;d[--u]===0;)d.pop()}return nt&&(e.e>g.maxE?(e.d=null,e.e=NaN):e.e<g.minE&&(e.e=0,e.d=[0])),e}function Wn(e,t,r){if(!e.isFinite())return Jd(e);var n,a=e.e,u=Mr(e.d),l=u.length;return t?(r&&(n=r-l)>0?u=u.charAt(0)+"."+u.slice(1)+bi(n):l>1&&(u=u.charAt(0)+"."+u.slice(1)),u=u+(e.e<0?"e":"e+")+e.e):a<0?(u="0."+bi(-a-1)+u,r&&(n=r-l)>0&&(u+=bi(n))):a>=l?(u+=bi(a+1-l),r&&(n=r-a-1)>0&&(u=u+"."+bi(n))):((n=a+1)<l&&(u=u.slice(0,n)+"."+u.slice(n)),r&&(n=r-l)>0&&(a+1===l&&(u+="."),u+=bi(n))),u}function Ts(e,t){var r=e[0];for(t*=Ye;r>=10;r/=10)t++;return t}function os(e,t,r){if(t>aA)throw nt=!0,r&&(e.precision=r),Error(Hd);return Ve(new e(us),t,1,!0)}function Mn(e,t,r){if(t>jl)throw Error(Hd);return Ve(new e(ss),t,r,!0)}function Zd(e){var t=e.length-1,r=t*Ye+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function bi(e){for(var t="";e--;)t+="0";return t}function $d(e,t,r,n){var a,u=new e(1),l=Math.ceil(n/Ye+4);for(nt=!1;;){if(r%2&&(u=u.times(t),Hh(u.d,l)&&(a=!0)),r=Ir(r/2),r===0){r=u.d.length-1,a&&u.d[r]===0&&++u.d[r];break}t=t.times(t),Hh(t.d,l)}return nt=!0,u}function Wh(e){return e.d[e.d.length-1]&1}function Xd(e,t,r){for(var n,a=new e(t[0]),u=0;++u<t.length;)if(n=new e(t[u]),n.s)a[r](n)&&(a=n);else{a=n;break}return a}function ql(e,t){var r,n,a,u,l,o,h,p=0,f=0,d=0,c=e.constructor,g=c.rounding,y=c.precision;if(!e.d||!e.d[0]||e.e>17)return new c(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(t==null?(nt=!1,h=y):h=t,o=new c(.03125);e.e>-2;)e=e.times(o),d+=5;for(n=Math.log(gr(2,d))/Math.LN10*2+5|0,h+=n,r=u=l=new c(1),c.precision=h;;){if(u=Ve(u.times(e),h,1),r=r.times(++f),o=l.plus(kt(u,r,h,1)),Mr(o.d).slice(0,h)===Mr(l.d).slice(0,h)){for(a=d;a--;)l=Ve(l.times(l),h,1);if(t==null)if(p<3&&tu(l.d,h-n,g,p))c.precision=h+=10,r=u=o=new c(1),f=0,p++;else return Ve(l,c.precision=y,g,nt=!0);else return c.precision=y,l}l=o}}function yi(e,t){var r,n,a,u,l,o,h,p,f,d,c,g=1,y=10,m=e,_=m.d,b=m.constructor,C=b.rounding,w=b.precision;if(m.s<0||!_||!_[0]||!m.e&&_[0]==1&&_.length==1)return new b(_&&!_[0]?-1/0:m.s!=1?NaN:_?0:m);if(t==null?(nt=!1,f=w):f=t,b.precision=f+=y,r=Mr(_),n=r.charAt(0),Math.abs(u=m.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=Mr(m.d),n=r.charAt(0),g++;u=m.e,n>1?(m=new b("0."+r),u++):m=new b(n+"."+r.slice(1))}else return p=os(b,f+2,w).times(u+""),m=yi(new b(n+"."+r.slice(1)),f-y).plus(p),b.precision=w,t==null?Ve(m,w,C,nt=!0):m;for(d=m,h=l=m=kt(m.minus(1),m.plus(1),f,1),c=Ve(m.times(m),f,1),a=3;;){if(l=Ve(l.times(c),f,1),p=h.plus(kt(l,new b(a),f,1)),Mr(p.d).slice(0,f)===Mr(h.d).slice(0,f))if(h=h.times(2),u!==0&&(h=h.plus(os(b,f+2,w).times(u+""))),h=kt(h,new b(g),f,1),t==null)if(tu(h.d,f-y,C,o))b.precision=f+=y,p=l=m=kt(d.minus(1),d.plus(1),f,1),c=Ve(m.times(m),f,1),a=o=1;else return Ve(h,b.precision=w,C,nt=!0);else return b.precision=w,h;h=p,a+=2}}function Jd(e){return String(e.s*e.s/0)}function zl(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;n++);for(a=t.length;t.charCodeAt(a-1)===48;--a);if(t=t.slice(n,a),t){if(a-=n,e.e=r=r-n-1,e.d=[],n=(r+1)%Ye,r<0&&(n+=Ye),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Ye;n<a;)e.d.push(+t.slice(n,n+=Ye));t=t.slice(n),n=Ye-t.length}else n-=a;for(;n--;)t+="0";e.d.push(+t),nt&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function sA(e,t){var r,n,a,u,l,o,h,p,f;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),Yd.test(t))return zl(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(rA.test(t))r=16,t=t.toLowerCase();else if(tA.test(t))r=2;else if(nA.test(t))r=8;else throw Error(Si+t);for(u=t.search(/p/i),u>0?(h=+t.slice(u+1),t=t.substring(2,u)):t=t.slice(2),u=t.indexOf("."),l=u>=0,n=e.constructor,l&&(t=t.replace(".",""),o=t.length,u=o-u,a=$d(n,new n(r),u,u*2)),p=Xu(t,r,Pn),f=p.length-1,u=f;p[u]===0;--u)p.pop();return u<0?new n(e.s*0):(e.e=Ts(p,f),e.d=p,nt=!1,l&&(e=kt(e,a,o*4)),h&&(e=e.times(Math.abs(h)<54?gr(2,h):_a.pow(2,h))),nt=!0,e)}function oA(e,t){var r,n=t.d.length;if(n<3)return t.isZero()?t:ma(e,2,t,t);r=1.4*Math.sqrt(n),r=r>16?16:r|0,t=t.times(1/Is(5,r)),t=ma(e,2,t,t);for(var a,u=new e(5),l=new e(16),o=new e(20);r--;)a=t.times(t),t=t.times(u.plus(a.times(l.times(a).minus(o))));return t}function ma(e,t,r,n,a){var u,l,o,h,p=e.precision,f=Math.ceil(p/Ye);for(nt=!1,h=r.times(r),o=new e(n);;){if(l=kt(o.times(h),new e(t++*t++),p,1),o=a?n.plus(l):n.minus(l),n=kt(l.times(h),new e(t++*t++),p,1),l=o.plus(n),l.d[f]!==void 0){for(u=f;l.d[u]===o.d[u]&&u--;);if(u==-1)break}u=o,o=n,n=l,l=u}return nt=!0,l.d.length=f+1,l}function Is(e,t){for(var r=e;--t;)r*=e;return r}function Qd(e,t){var r,n=t.s<0,a=Mn(e,e.precision,1),u=a.times(.5);if(t=t.abs(),t.lte(u))return ui=n?4:1,t;if(r=t.divToInt(a),r.isZero())ui=n?3:2;else{if(t=t.minus(r.times(a)),t.lte(u))return ui=Wh(r)?n?2:3:n?4:1,t;ui=Wh(r)?n?1:4:n?3:2}return t.minus(a).abs()}function of(e,t,r,n){var a,u,l,o,h,p,f,d,c,g=e.constructor,y=r!==void 0;if(y?(Yr(r,1,Oi),n===void 0?n=g.rounding:Yr(n,0,8)):(r=g.precision,n=g.rounding),!e.isFinite())f=Jd(e);else{for(f=Wn(e),l=f.indexOf("."),y?(a=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):a=t,l>=0&&(f=f.replace(".",""),c=new g(1),c.e=f.length-l,c.d=Xu(Wn(c),10,a),c.e=c.d.length),d=Xu(f,10,a),u=h=d.length;d[--h]==0;)d.pop();if(!d[0])f=y?"0p+0":"0";else{if(l<0?u--:(e=new g(e),e.d=d,e.e=u,e=kt(e,c,r,n,0,a),d=e.d,u=e.e,p=Wd),l=d[r],o=a/2,p=p||d[r+1]!==void 0,p=n<4?(l!==void 0||p)&&(n===0||n===(e.s<0?3:2)):l>o||l===o&&(n===4||p||n===6&&d[r-1]&1||n===(e.s<0?8:7)),d.length=r,p)for(;++d[--r]>a-1;)d[r]=0,r||(++u,d.unshift(1));for(h=d.length;!d[h-1];--h);for(l=0,f="";l<h;l++)f+=Ul.charAt(d[l]);if(y){if(h>1)if(t==16||t==8){for(l=t==16?4:3,--h;h%l;h++)f+="0";for(d=Xu(f,a,t),h=d.length;!d[h-1];--h);for(l=1,f="1.";l<h;l++)f+=Ul.charAt(d[l])}else f=f.charAt(0)+"."+f.slice(1);f=f+(u<0?"p":"p+")+u}else if(u<0){for(;++u;)f="0"+f;f="0."+f}else if(++u>h)for(u-=h;u--;)f+="0";else u<h&&(f=f.slice(0,u)+"."+f.slice(u))}f=(t==16?"0x":t==2?"0b":t==8?"0o":"")+f}return e.s<0?"-"+f:f}function Hh(e,t){if(e.length>t)return e.length=t,!0}function lA(e){return new this(e).abs()}function fA(e){return new this(e).acos()}function cA(e){return new this(e).acosh()}function hA(e,t){return new this(e).plus(t)}function dA(e){return new this(e).asin()}function pA(e){return new this(e).asinh()}function vA(e){return new this(e).atan()}function gA(e){return new this(e).atanh()}function mA(e,t){e=new this(e),t=new this(t);var r,n=this.precision,a=this.rounding,u=n+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=Mn(this,u,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?Mn(this,n,a):new this(0),r.s=e.s):!e.d||t.isZero()?(r=Mn(this,u,1).times(.5),r.s=e.s):t.s<0?(this.precision=u,this.rounding=1,r=this.atan(kt(e,t,u,1)),t=Mn(this,u,1),this.precision=n,this.rounding=a,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(kt(e,t,u,1)),r}function _A(e){return new this(e).cbrt()}function DA(e){return Ve(e=new this(e),e.e+1,2)}function bA(e,t,r){return new this(e).clamp(t,r)}function yA(e){if(!e||typeof e!="object")throw Error(xs+"Object expected");var t,r,n,a=e.defaults===!0,u=["precision",1,Oi,"rounding",0,8,"toExpNeg",-da,0,"toExpPos",0,da,"maxE",0,da,"minE",-da,0,"modulo",0,9];for(t=0;t<u.length;t+=3)if(r=u[t],a&&(this[r]=Vl[r]),(n=e[r])!==void 0)if(Ir(n)===n&&n>=u[t+1]&&n<=u[t+2])this[r]=n;else throw Error(Si+r+": "+n);if(r="crypto",a&&(this[r]=Vl[r]),(n=e[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Gd);else this[r]=!1;else throw Error(Si+r+": "+n);return this}function AA(e){return new this(e).cos()}function wA(e){return new this(e).cosh()}function ep(e){var t,r,n;function a(u){var l,o,h,p=this;if(!(p instanceof a))return new a(u);if(p.constructor=a,Gh(u)){p.s=u.s,nt?!u.d||u.e>a.maxE?(p.e=NaN,p.d=null):u.e<a.minE?(p.e=0,p.d=[0]):(p.e=u.e,p.d=u.d.slice()):(p.e=u.e,p.d=u.d?u.d.slice():u.d);return}if(h=typeof u,h==="number"){if(u===0){p.s=1/u<0?-1:1,p.e=0,p.d=[0];return}if(u<0?(u=-u,p.s=-1):p.s=1,u===~~u&&u<1e7){for(l=0,o=u;o>=10;o/=10)l++;nt?l>a.maxE?(p.e=NaN,p.d=null):l<a.minE?(p.e=0,p.d=[0]):(p.e=l,p.d=[u]):(p.e=l,p.d=[u]);return}else if(u*0!==0){u||(p.s=NaN),p.e=NaN,p.d=null;return}return zl(p,u.toString())}else if(h!=="string")throw Error(Si+u);return(o=u.charCodeAt(0))===45?(u=u.slice(1),p.s=-1):(o===43&&(u=u.slice(1)),p.s=1),Yd.test(u)?zl(p,u):sA(p,u)}if(a.prototype=_e,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=yA,a.clone=ep,a.isDecimal=Gh,a.abs=lA,a.acos=fA,a.acosh=cA,a.add=hA,a.asin=dA,a.asinh=pA,a.atan=vA,a.atanh=gA,a.atan2=mA,a.cbrt=_A,a.ceil=DA,a.clamp=bA,a.cos=AA,a.cosh=wA,a.div=EA,a.exp=CA,a.floor=FA,a.hypot=SA,a.ln=BA,a.log=OA,a.log10=PA,a.log2=MA,a.max=xA,a.min=TA,a.mod=IA,a.mul=NA,a.pow=kA,a.random=RA,a.round=LA,a.sign=UA,a.sin=VA,a.sinh=jA,a.sqrt=qA,a.sub=zA,a.sum=WA,a.tan=HA,a.tanh=GA,a.trunc=KA,e===void 0&&(e={}),e&&e.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function EA(e,t){return new this(e).div(t)}function CA(e){return new this(e).exp()}function FA(e){return Ve(e=new this(e),e.e+1,3)}function SA(){var e,t,r=new this(0);for(nt=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return nt=!0,new this(1/0);r=t}return nt=!0,r.sqrt()}function Gh(e){return e instanceof _a||e&&e.toStringTag===Kd||!1}function BA(e){return new this(e).ln()}function OA(e,t){return new this(e).log(t)}function MA(e){return new this(e).log(2)}function PA(e){return new this(e).log(10)}function xA(){return Xd(this,arguments,"lt")}function TA(){return Xd(this,arguments,"gt")}function IA(e,t){return new this(e).mod(t)}function NA(e,t){return new this(e).mul(t)}function kA(e,t){return new this(e).pow(t)}function RA(e){var t,r,n,a,u=0,l=new this(1),o=[];if(e===void 0?e=this.precision:Yr(e,1,Oi),n=Math.ceil(e/Ye),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));u<n;)a=t[u],a>=429e7?t[u]=crypto.getRandomValues(new Uint32Array(1))[0]:o[u++]=a%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(n*=4);u<n;)a=t[u]+(t[u+1]<<8)+(t[u+2]<<16)+((t[u+3]&127)<<24),a>=214e7?crypto.randomBytes(4).copy(t,u):(o.push(a%1e7),u+=4);u=n/4}else throw Error(Gd);else for(;u<n;)o[u++]=Math.random()*1e7|0;for(n=o[--u],e%=Ye,n&&e&&(a=gr(10,Ye-e),o[u]=(n/a|0)*a);o[u]===0;u--)o.pop();if(u<0)r=0,o=[0];else{for(r=-1;o[0]===0;r-=Ye)o.shift();for(n=1,a=o[0];a>=10;a/=10)n++;n<Ye&&(r-=Ye-n)}return l.e=r,l.d=o,l}function LA(e){return Ve(e=new this(e),e.e+1,this.rounding)}function UA(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function VA(e){return new this(e).sin()}function jA(e){return new this(e).sinh()}function qA(e){return new this(e).sqrt()}function zA(e,t){return new this(e).sub(t)}function WA(){var e=0,t=arguments,r=new this(t[e]);for(nt=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return nt=!0,Ve(r,this.precision,this.rounding)}function HA(e){return new this(e).tan()}function GA(e){return new this(e).tanh()}function KA(e){return Ve(e=new this(e),e.e+1,1)}_e[Symbol.for("nodejs.util.inspect.custom")]=_e.toString;_e[Symbol.toStringTag]="Decimal";var _a=_e.constructor=ep(Vl);us=new _a(us);ss=new _a(ss);var YA="BigNumber",ZA=["?on","config"],$A=xt(YA,ZA,e=>{var{on:t,config:r}=e,n=_a.clone({precision:r.precision,modulo:_a.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(a){return new n(a.value)},t&&t("config",function(a,u){a.precision!==u.precision&&n.config({precision:a.precision})}),n},{isClass:!0}),hr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wl={},XA={get exports(){return Wl},set exports(e){Wl=e}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,t){(function(r){var n=Math.cosh||function(d){return Math.abs(d)<1e-9?1-d:(Math.exp(d)+Math.exp(-d))*.5},a=Math.sinh||function(d){return Math.abs(d)<1e-9?d:(Math.exp(d)-Math.exp(-d))*.5},u=function(d){var c=Math.PI/4;if(-c>d||d>c)return Math.cos(d)-1;var g=d*d;return g*(g*(g*(g*(g*(g*(g*(g/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},l=function(d,c){var g=Math.abs(d),y=Math.abs(c);return g<3e3&&y<3e3?Math.sqrt(g*g+y*y):(g<y?(g=y,y=d/c):y=c/d,g*Math.sqrt(1+y*y))},o=function(){throw SyntaxError("Invalid Param")};function h(d,c){var g=Math.abs(d),y=Math.abs(c);return d===0?Math.log(y):c===0?Math.log(g):g<3e3&&y<3e3?Math.log(d*d+c*c)*.5:(d=d/2,c=c/2,.5*Math.log(d*d+c*c)+Math.LN2)}var p=function(d,c){var g={re:0,im:0};if(d==null)g.re=g.im=0;else if(c!==void 0)g.re=d,g.im=c;else switch(typeof d){case"object":if("im"in d&&"re"in d)g.re=d.re,g.im=d.im;else if("abs"in d&&"arg"in d){if(!Number.isFinite(d.abs)&&Number.isFinite(d.arg))return f.INFINITY;g.re=d.abs*Math.cos(d.arg),g.im=d.abs*Math.sin(d.arg)}else if("r"in d&&"phi"in d){if(!Number.isFinite(d.r)&&Number.isFinite(d.phi))return f.INFINITY;g.re=d.r*Math.cos(d.phi),g.im=d.r*Math.sin(d.phi)}else d.length===2?(g.re=d[0],g.im=d[1]):o();break;case"string":g.im=g.re=0;var y=d.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),m=1,_=0;y===null&&o();for(var b=0;b<y.length;b++){var C=y[b];C===" "||C==="	"||C===`
`||(C==="+"?m++:C==="-"?_++:C==="i"||C==="I"?(m+_===0&&o(),y[b+1]!==" "&&!isNaN(y[b+1])?(g.im+=parseFloat((_%2?"-":"")+y[b+1]),b++):g.im+=parseFloat((_%2?"-":"")+"1"),m=_=0):((m+_===0||isNaN(C))&&o(),y[b+1]==="i"||y[b+1]==="I"?(g.im+=parseFloat((_%2?"-":"")+C),b++):g.re+=parseFloat((_%2?"-":"")+C),m=_=0))}m+_>0&&o();break;case"number":g.im=0,g.re=d;break;default:o()}return isNaN(g.re)||isNaN(g.im),g};function f(d,c){if(!(this instanceof f))return new f(d,c);var g=p(d,c);this.re=g.re,this.im=g.im}f.prototype={re:0,im:0,sign:function(){var d=this.abs();return new f(this.re/d,this.im/d)},add:function(d,c){var g=new f(d,c);return this.isInfinite()&&g.isInfinite()?f.NAN:this.isInfinite()||g.isInfinite()?f.INFINITY:new f(this.re+g.re,this.im+g.im)},sub:function(d,c){var g=new f(d,c);return this.isInfinite()&&g.isInfinite()?f.NAN:this.isInfinite()||g.isInfinite()?f.INFINITY:new f(this.re-g.re,this.im-g.im)},mul:function(d,c){var g=new f(d,c);return this.isInfinite()&&g.isZero()||this.isZero()&&g.isInfinite()?f.NAN:this.isInfinite()||g.isInfinite()?f.INFINITY:g.im===0&&this.im===0?new f(this.re*g.re,0):new f(this.re*g.re-this.im*g.im,this.re*g.im+this.im*g.re)},div:function(d,c){var g=new f(d,c);if(this.isZero()&&g.isZero()||this.isInfinite()&&g.isInfinite())return f.NAN;if(this.isInfinite()||g.isZero())return f.INFINITY;if(this.isZero()||g.isInfinite())return f.ZERO;d=this.re,c=this.im;var y=g.re,m=g.im,_,b;return m===0?new f(d/y,c/y):Math.abs(y)<Math.abs(m)?(b=y/m,_=y*b+m,new f((d*b+c)/_,(c*b-d)/_)):(b=m/y,_=m*b+y,new f((d+c*b)/_,(c-d*b)/_))},pow:function(d,c){var g=new f(d,c);if(d=this.re,c=this.im,g.isZero())return f.ONE;if(g.im===0){if(c===0&&d>0)return new f(Math.pow(d,g.re),0);if(d===0)switch((g.re%4+4)%4){case 0:return new f(Math.pow(c,g.re),0);case 1:return new f(0,Math.pow(c,g.re));case 2:return new f(-Math.pow(c,g.re),0);case 3:return new f(0,-Math.pow(c,g.re))}}if(d===0&&c===0&&g.re>0&&g.im>=0)return f.ZERO;var y=Math.atan2(c,d),m=h(d,c);return d=Math.exp(g.re*m-g.im*y),c=g.im*m+g.re*y,new f(d*Math.cos(c),d*Math.sin(c))},sqrt:function(){var d=this.re,c=this.im,g=this.abs(),y,m;if(d>=0){if(c===0)return new f(Math.sqrt(d),0);y=.5*Math.sqrt(2*(g+d))}else y=Math.abs(c)/Math.sqrt(2*(g-d));return d<=0?m=.5*Math.sqrt(2*(g-d)):m=Math.abs(c)/Math.sqrt(2*(g+d)),new f(y,c<0?-m:m)},exp:function(){var d=Math.exp(this.re);return this.im,new f(d*Math.cos(this.im),d*Math.sin(this.im))},expm1:function(){var d=this.re,c=this.im;return new f(Math.expm1(d)*Math.cos(c)+u(c),Math.exp(d)*Math.sin(c))},log:function(){var d=this.re,c=this.im;return new f(h(d,c),Math.atan2(c,d))},abs:function(){return l(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var d=this.re,c=this.im;return new f(Math.sin(d)*n(c),Math.cos(d)*a(c))},cos:function(){var d=this.re,c=this.im;return new f(Math.cos(d)*n(c),-Math.sin(d)*a(c))},tan:function(){var d=2*this.re,c=2*this.im,g=Math.cos(d)+n(c);return new f(Math.sin(d)/g,a(c)/g)},cot:function(){var d=2*this.re,c=2*this.im,g=Math.cos(d)-n(c);return new f(-Math.sin(d)/g,a(c)/g)},sec:function(){var d=this.re,c=this.im,g=.5*n(2*c)+.5*Math.cos(2*d);return new f(Math.cos(d)*n(c)/g,Math.sin(d)*a(c)/g)},csc:function(){var d=this.re,c=this.im,g=.5*n(2*c)-.5*Math.cos(2*d);return new f(Math.sin(d)*n(c)/g,-Math.cos(d)*a(c)/g)},asin:function(){var d=this.re,c=this.im,g=new f(c*c-d*d+1,-2*d*c).sqrt(),y=new f(g.re-c,g.im+d).log();return new f(y.im,-y.re)},acos:function(){var d=this.re,c=this.im,g=new f(c*c-d*d+1,-2*d*c).sqrt(),y=new f(g.re-c,g.im+d).log();return new f(Math.PI/2-y.im,y.re)},atan:function(){var d=this.re,c=this.im;if(d===0){if(c===1)return new f(0,1/0);if(c===-1)return new f(0,-1/0)}var g=d*d+(1-c)*(1-c),y=new f((1-c*c-d*d)/g,-2*d/g).log();return new f(-.5*y.im,.5*y.re)},acot:function(){var d=this.re,c=this.im;if(c===0)return new f(Math.atan2(1,d),0);var g=d*d+c*c;return g!==0?new f(d/g,-c/g).atan():new f(d!==0?d/0:0,c!==0?-c/0:0).atan()},asec:function(){var d=this.re,c=this.im;if(d===0&&c===0)return new f(0,1/0);var g=d*d+c*c;return g!==0?new f(d/g,-c/g).acos():new f(d!==0?d/0:0,c!==0?-c/0:0).acos()},acsc:function(){var d=this.re,c=this.im;if(d===0&&c===0)return new f(Math.PI/2,1/0);var g=d*d+c*c;return g!==0?new f(d/g,-c/g).asin():new f(d!==0?d/0:0,c!==0?-c/0:0).asin()},sinh:function(){var d=this.re,c=this.im;return new f(a(d)*Math.cos(c),n(d)*Math.sin(c))},cosh:function(){var d=this.re,c=this.im;return new f(n(d)*Math.cos(c),a(d)*Math.sin(c))},tanh:function(){var d=2*this.re,c=2*this.im,g=n(d)+Math.cos(c);return new f(a(d)/g,Math.sin(c)/g)},coth:function(){var d=2*this.re,c=2*this.im,g=n(d)-Math.cos(c);return new f(a(d)/g,-Math.sin(c)/g)},csch:function(){var d=this.re,c=this.im,g=Math.cos(2*c)-n(2*d);return new f(-2*a(d)*Math.cos(c)/g,2*n(d)*Math.sin(c)/g)},sech:function(){var d=this.re,c=this.im,g=Math.cos(2*c)+n(2*d);return new f(2*n(d)*Math.cos(c)/g,-2*a(d)*Math.sin(c)/g)},asinh:function(){var d=this.im;this.im=-this.re,this.re=d;var c=this.asin();return this.re=-this.im,this.im=d,d=c.re,c.re=-c.im,c.im=d,c},acosh:function(){var d=this.acos();if(d.im<=0){var c=d.re;d.re=-d.im,d.im=c}else{var c=d.im;d.im=-d.re,d.re=c}return d},atanh:function(){var d=this.re,c=this.im,g=d>1&&c===0,y=1-d,m=1+d,_=y*y+c*c,b=_!==0?new f((m*y-c*c)/_,(c*y+m*c)/_):new f(d!==-1?d/0:0,c!==0?c/0:0),C=b.re;return b.re=h(b.re,b.im)/2,b.im=Math.atan2(b.im,C)/2,g&&(b.im=-b.im),b},acoth:function(){var d=this.re,c=this.im;if(d===0&&c===0)return new f(0,Math.PI/2);var g=d*d+c*c;return g!==0?new f(d/g,-c/g).atanh():new f(d!==0?d/0:0,c!==0?-c/0:0).atanh()},acsch:function(){var d=this.re,c=this.im;if(c===0)return new f(d!==0?Math.log(d+Math.sqrt(d*d+1)):1/0,0);var g=d*d+c*c;return g!==0?new f(d/g,-c/g).asinh():new f(d!==0?d/0:0,c!==0?-c/0:0).asinh()},asech:function(){var d=this.re,c=this.im;if(this.isZero())return f.INFINITY;var g=d*d+c*c;return g!==0?new f(d/g,-c/g).acosh():new f(d!==0?d/0:0,c!==0?-c/0:0).acosh()},inverse:function(){if(this.isZero())return f.INFINITY;if(this.isInfinite())return f.ZERO;var d=this.re,c=this.im,g=d*d+c*c;return new f(d/g,-c/g)},conjugate:function(){return new f(this.re,-this.im)},neg:function(){return new f(-this.re,-this.im)},ceil:function(d){return d=Math.pow(10,d||0),new f(Math.ceil(this.re*d)/d,Math.ceil(this.im*d)/d)},floor:function(d){return d=Math.pow(10,d||0),new f(Math.floor(this.re*d)/d,Math.floor(this.im*d)/d)},round:function(d){return d=Math.pow(10,d||0),new f(Math.round(this.re*d)/d,Math.round(this.im*d)/d)},equals:function(d,c){var g=new f(d,c);return Math.abs(g.re-this.re)<=f.EPSILON&&Math.abs(g.im-this.im)<=f.EPSILON},clone:function(){return new f(this.re,this.im)},toString:function(){var d=this.re,c=this.im,g="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(d)<f.EPSILON&&(d=0),Math.abs(c)<f.EPSILON&&(c=0),c===0?g+d:(d!==0?(g+=d,g+=" ",c<0?(c=-c,g+="-"):g+="+",g+=" "):c<0&&(c=-c,g+="-"),c!==1&&(g+=c),g+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},f.ZERO=new f(0,0),f.ONE=new f(1,0),f.I=new f(0,1),f.PI=new f(Math.PI,0),f.E=new f(Math.E,0),f.INFINITY=new f(1/0,1/0),f.NAN=new f(NaN,NaN),f.EPSILON=1e-15,Object.defineProperty(f,"__esModule",{value:!0}),f.default=f,f.Complex=f,e.exports=f})()})(XA);const Fr=lf(Wl);var JA="Complex",QA=[],ew=xt(JA,QA,()=>(Object.defineProperty(Fr,"name",{value:"Complex"}),Fr.prototype.constructor=Fr,Fr.prototype.type="Complex",Fr.prototype.isComplex=!0,Fr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Fr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Fr.prototype.format=function(e){var t="",r=this.im,n=this.re,a=Rl(this.re,e),u=Rl(this.im,e),l=tr(e)?e:e?e.precision:null;if(l!==null){var o=Math.pow(10,-l);Math.abs(n/r)<o&&(n=0),Math.abs(r/n)<o&&(r=0)}return r===0?t=a:n===0?r===1?t="i":r===-1?t="-i":t=u+"i":r<0?r===-1?t=a+" - i":t=a+" - "+u.substring(1)+"i":r===1?t=a+" + i":t=a+" + "+u+"i",t},Fr.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return Fr(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(tr(r)){if(xd(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),tr(n))return new Fr({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Fr.prototype.valueOf=Fr.prototype.toString,Fr.fromJSON=function(e){return new Fr(e)},Fr.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},Fr),{isClass:!0}),Hl={},tw={get exports(){return Hl},set exports(e){Hl=e}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(e,t){(function(r){var n=2e3,a={s:1,n:0,d:1};function u(y,m){if(isNaN(y=parseInt(y,10)))throw g.InvalidParameter;return y*m}function l(y,m){if(m===0)throw g.DivisionByZero;var _=Object.create(g.prototype);_.s=y<0?-1:1,y=y<0?-y:y;var b=c(y,m);return _.n=y/b,_.d=m/b,_}function o(y){for(var m={},_=y,b=2,C=4;C<=_;){for(;_%b===0;)_/=b,m[b]=(m[b]||0)+1;C+=1+2*b++}return _!==y?_>1&&(m[_]=(m[_]||0)+1):m[y]=(m[y]||0)+1,m}var h=function(y,m){var _=0,b=1,C=1,w=0,O=0,S=0,B=1,P=1,I=0,N=1,G=1,L=1,q=1e7,Z;if(y!=null)if(m!==void 0){if(_=y,b=m,C=_*b,_%1!==0||b%1!==0)throw g.NonIntegerParameter}else switch(typeof y){case"object":{if("d"in y&&"n"in y)_=y.n,b=y.d,"s"in y&&(_*=y.s);else if(0 in y)_=y[0],1 in y&&(b=y[1]);else throw g.InvalidParameter;C=_*b;break}case"number":{if(y<0&&(C=y,y=-y),y%1===0)_=y;else if(y>0){for(y>=1&&(P=Math.pow(10,Math.floor(1+Math.log(y)/Math.LN10)),y/=P);N<=q&&L<=q;)if(Z=(I+G)/(N+L),y===Z){N+L<=q?(_=I+G,b=N+L):L>N?(_=G,b=L):(_=I,b=N);break}else y>Z?(I+=G,N+=L):(G+=I,L+=N),N>q?(_=G,b=L):(_=I,b=N);_*=P}else(isNaN(y)||isNaN(m))&&(b=_=NaN);break}case"string":{if(N=y.match(/\d+|./g),N===null)throw g.InvalidParameter;if(N[I]==="-"?(C=-1,I++):N[I]==="+"&&I++,N.length===I+1?O=u(N[I++],C):N[I+1]==="."||N[I]==="."?(N[I]!=="."&&(w=u(N[I++],C)),I++,(I+1===N.length||N[I+1]==="("&&N[I+3]===")"||N[I+1]==="'"&&N[I+3]==="'")&&(O=u(N[I],C),B=Math.pow(10,N[I].length),I++),(N[I]==="("&&N[I+2]===")"||N[I]==="'"&&N[I+2]==="'")&&(S=u(N[I+1],C),P=Math.pow(10,N[I+1].length)-1,I+=3)):N[I+1]==="/"||N[I+1]===":"?(O=u(N[I],C),B=u(N[I+2],1),I+=3):N[I+3]==="/"&&N[I+1]===" "&&(w=u(N[I],C),O=u(N[I+2],C),B=u(N[I+4],1),I+=5),N.length<=I){b=B*P,C=_=S+b*w+P*O;break}}default:throw g.InvalidParameter}if(b===0)throw g.DivisionByZero;a.s=C<0?-1:1,a.n=Math.abs(_),a.d=Math.abs(b)};function p(y,m,_){for(var b=1;m>0;y=y*y%_,m>>=1)m&1&&(b=b*y%_);return b}function f(y,m){for(;m%2===0;m/=2);for(;m%5===0;m/=5);if(m===1)return 0;for(var _=10%m,b=1;_!==1;b++)if(_=_*10%m,b>n)return 0;return b}function d(y,m,_){for(var b=1,C=p(10,_,m),w=0;w<300;w++){if(b===C)return w;b=b*10%m,C=C*10%m}return 0}function c(y,m){if(!y)return m;if(!m)return y;for(;;){if(y%=m,!y)return m;if(m%=y,!m)return y}}function g(y,m){if(h(y,m),this instanceof g)y=c(a.d,a.n),this.s=a.s,this.n=a.n/y,this.d=a.d/y;else return l(a.s*a.n,a.d)}g.DivisionByZero=new Error("Division by Zero"),g.InvalidParameter=new Error("Invalid argument"),g.NonIntegerParameter=new Error("Parameters must be integer"),g.prototype={s:1,n:0,d:1,abs:function(){return l(this.n,this.d)},neg:function(){return l(-this.s*this.n,this.d)},add:function(y,m){return h(y,m),l(this.s*this.n*a.d+a.s*this.d*a.n,this.d*a.d)},sub:function(y,m){return h(y,m),l(this.s*this.n*a.d-a.s*this.d*a.n,this.d*a.d)},mul:function(y,m){return h(y,m),l(this.s*a.s*this.n*a.n,this.d*a.d)},div:function(y,m){return h(y,m),l(this.s*a.s*this.n*a.d,this.d*a.n)},clone:function(){return l(this.s*this.n,this.d)},mod:function(y,m){if(isNaN(this.n)||isNaN(this.d))return new g(NaN);if(y===void 0)return l(this.s*this.n%this.d,1);if(h(y,m),a.n===0&&this.d===0)throw g.DivisionByZero;return l(this.s*(a.d*this.n)%(a.n*this.d),a.d*this.d)},gcd:function(y,m){return h(y,m),l(c(a.n,this.n)*c(a.d,this.d),a.d*this.d)},lcm:function(y,m){return h(y,m),a.n===0&&this.n===0?l(0,1):l(a.n*this.n,c(a.n,this.n)*c(a.d,this.d))},ceil:function(y){return y=Math.pow(10,y||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):l(Math.ceil(y*this.s*this.n/this.d),y)},floor:function(y){return y=Math.pow(10,y||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):l(Math.floor(y*this.s*this.n/this.d),y)},round:function(y){return y=Math.pow(10,y||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):l(Math.round(y*this.s*this.n/this.d),y)},inverse:function(){return l(this.s*this.d,this.n)},pow:function(y,m){if(h(y,m),a.d===1)return a.s<0?l(Math.pow(this.s*this.d,a.n),Math.pow(this.n,a.n)):l(Math.pow(this.s*this.n,a.n),Math.pow(this.d,a.n));if(this.s<0)return null;var _=o(this.n),b=o(this.d),C=1,w=1;for(var O in _)if(O!=="1"){if(O==="0"){C=0;break}if(_[O]*=a.n,_[O]%a.d===0)_[O]/=a.d;else return null;C*=Math.pow(O,_[O])}for(var O in b)if(O!=="1"){if(b[O]*=a.n,b[O]%a.d===0)b[O]/=a.d;else return null;w*=Math.pow(O,b[O])}return a.s<0?l(w,C):l(C,w)},equals:function(y,m){return h(y,m),this.s*this.n*a.d===a.s*a.n*this.d},compare:function(y,m){h(y,m);var _=this.s*this.n*a.d-a.s*a.n*this.d;return(0<_)-(_<0)},simplify:function(y){if(isNaN(this.n)||isNaN(this.d))return this;y=y||.001;for(var m=this.abs(),_=m.toContinued(),b=1;b<_.length;b++){for(var C=l(_[b-1],1),w=b-2;w>=0;w--)C=C.inverse().add(_[w]);if(C.sub(m).abs().valueOf()<y)return C.mul(this.s)}return this},divisible:function(y,m){return h(y,m),!(!(a.n*this.d)||this.n*a.d%(a.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(y){var m,_="",b=this.n,C=this.d;return this.s<0&&(_+="-"),C===1?_+=b:(y&&(m=Math.floor(b/C))>0&&(_+=m,_+=" ",b%=C),_+=b,_+="/",_+=C),_},toLatex:function(y){var m,_="",b=this.n,C=this.d;return this.s<0&&(_+="-"),C===1?_+=b:(y&&(m=Math.floor(b/C))>0&&(_+=m,b%=C),_+="\\frac{",_+=b,_+="}{",_+=C,_+="}"),_},toContinued:function(){var y,m=this.n,_=this.d,b=[];if(isNaN(m)||isNaN(_))return b;do b.push(Math.floor(m/_)),y=m%_,m=_,_=y;while(m!==1);return b},toString:function(y){var m=this.n,_=this.d;if(isNaN(m)||isNaN(_))return"NaN";y=y||15;var b=f(m,_),C=d(m,_,b),w=this.s<0?"-":"";if(w+=m/_|0,m%=_,m*=10,m&&(w+="."),b){for(var O=C;O--;)w+=m/_|0,m%=_,m*=10;w+="(";for(var O=b;O--;)w+=m/_|0,m%=_,m*=10;w+=")"}else for(var O=y;m&&O--;)w+=m/_|0,m%=_,m*=10;return w}},Object.defineProperty(g,"__esModule",{value:!0}),g.default=g,g.Fraction=g,e.exports=g})()})(tw);const ai=lf(Hl);var rw="Fraction",nw=[],iw=xt(rw,nw,()=>(Object.defineProperty(ai,"name",{value:"Fraction"}),ai.prototype.constructor=ai,ai.prototype.type="Fraction",ai.prototype.isFraction=!0,ai.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},ai.fromJSON=function(e){return new ai(e)},ai),{isClass:!0}),aw="Matrix",uw=[],sw=xt(aw,uw,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,r){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,r,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,r){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,r){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,r){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function tp(e){return Object.keys(e.signatures||{}).reduce(function(t,r){var n=(r.match(/,/g)||[]).length+1;return Math.max(t,n)},-1)}var ow="DenseMatrix",lw=["Matrix"],fw=xt(ow,lw,e=>{var{Matrix:t}=e;function r(f,d){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(d&&!qn(d))throw new Error("Invalid datatype: "+d);if(Ur(f))f.type==="DenseMatrix"?(this._data=yr(f._data),this._size=yr(f._size),this._datatype=d||f._datatype):(this._data=f.toArray(),this._size=f.size(),this._datatype=d||f._datatype);else if(f&&Jt(f.data)&&Jt(f.size))this._data=f.data,this._size=f.size,qh(this._data,this._size),this._datatype=d||f.datatype;else if(Jt(f))this._data=p(f),this._size=Fi(this._data),qh(this._data,this._size),this._datatype=d;else{if(f)throw new TypeError("Unsupported type of data ("+Qa(f)+")");this._data=[],this._size=[0],this._datatype=d}}r.prototype=new t,r.prototype.createDenseMatrix=function(f,d){return new r(f,d)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return as(this._data,Qa)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(f,d){return new r(f,d)},r.prototype.subset=function(f,d,c){switch(arguments.length){case 1:return n(this,f);case 2:case 3:return u(this,f,d,c);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(f){if(!Jt(f))throw new TypeError("Array expected");if(f.length!==this._size.length)throw new Mt(f.length,this._size.length);for(var d=0;d<f.length;d++)Qt(f[d],this._size[d]);for(var c=this._data,g=0,y=f.length;g<y;g++){var m=f[g];Qt(m,c.length),c=c[m]}return c},r.prototype.set=function(f,d,c){if(!Jt(f))throw new TypeError("Array expected");if(f.length<this._size.length)throw new Mt(f.length,this._size.length,"<");var g,y,m,_=f.map(function(C){return C+1});h(this,_,c);var b=this._data;for(g=0,y=f.length-1;g<y;g++)m=f[g],Qt(m,b.length),b=b[m];return m=f[f.length-1],Qt(m,b.length),b[m]=d,this};function n(f,d){if(!uf(d))throw new TypeError("Invalid index");var c=d.isScalar();if(c)return f.get(d.min());var g=d.size();if(g.length!==f._size.length)throw new Mt(g.length,f._size.length);for(var y=d.min(),m=d.max(),_=0,b=f._size.length;_<b;_++)Qt(y[_],f._size[_]),Qt(m[_],f._size[_]);return new r(a(f._data,d,g.length,0),f._datatype)}function a(f,d,c,g){var y=g===c-1,m=d.dimension(g);return y?m.map(function(_){return Qt(_,f.length),f[_]}).valueOf():m.map(function(_){Qt(_,f.length);var b=f[_];return a(b,d,c,g+1)}).valueOf()}function u(f,d,c,g){if(!d||d.isIndex!==!0)throw new TypeError("Invalid index");var y=d.size(),m=d.isScalar(),_;if(Ur(c)?(_=c.size(),c=c.valueOf()):_=Fi(c),m){if(_.length!==0)throw new TypeError("Scalar expected");f.set(d.min(),c,g)}else{if(y.length<f._size.length)throw new Mt(y.length,f._size.length,"<");if(_.length<y.length){for(var b=0,C=0;y[b]===1&&_[b]===1;)b++;for(;y[b]===1;)C++,b++;c=Ud(c,y.length,C,_)}if(!ns(y,_))throw new Mt(y,_,">");var w=d.max().map(function(B){return B+1});h(f,w,g);var O=y.length,S=0;l(f._data,d,c,O,S)}return f}function l(f,d,c,g,y){var m=y===g-1,_=d.dimension(y);m?_.forEach(function(b,C){Qt(b),f[b]=c[C[0]]}):_.forEach(function(b,C){Qt(b),l(f[b],d,c[C[0]],g,y+1)})}r.prototype.resize=function(f,d,c){if(!rs(f))throw new TypeError("Array or Matrix expected");var g=f.valueOf().map(m=>Array.isArray(m)&&m.length===1?m[0]:m),y=c?this.clone():this;return o(y,g,d)};function o(f,d,c){if(d.length===0){for(var g=f._data;Jt(g);)g=g[0];return g}return f._size=d.slice(0),f._data=zh(f._data,f._size,c),f}r.prototype.reshape=function(f,d){var c=d?this.clone():this;c._data=Ly(c._data,f);var g=c._size.reduce((y,m)=>y*m);return c._size=sf(f,g),c};function h(f,d,c){for(var g=f._size.slice(0),y=!1;g.length<d.length;)g.push(0),y=!0;for(var m=0,_=d.length;m<_;m++)d[m]>g[m]&&(g[m]=d[m],y=!0);y&&o(f,g,c)}r.prototype.clone=function(){var f=new r({data:yr(this._data),size:yr(this._size),datatype:this._datatype});return f},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(f){var d=this,c=tp(f),g=function _(b,C){return Jt(b)?b.map(function(w,O){return _(w,C.concat(O))}):c===1?f(b):c===2?f(b,C):f(b,C,d)},y=g(this._data,[]),m=this._datatype!==void 0?as(y,Qa):void 0;return new r(y,m)},r.prototype.forEach=function(f){var d=this,c=function g(y,m){Jt(y)?y.forEach(function(_,b){g(_,m.concat(b))}):f(y,m,d)};c(this._data,[])},r.prototype[Symbol.iterator]=function*(){var f=function*d(c,g){if(Jt(c))for(var y=0;y<c.length;y++)yield*d(c[y],g.concat(y));else yield{value:c,index:g}};yield*f(this._data,[])},r.prototype.rows=function(){var f=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var c=this._data;for(var g of c)f.push(new r([g],this._datatype));return f},r.prototype.columns=function(){var f=this,d=[],c=this.size();if(c.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var g=this._data,y=function(b){var C=g.map(w=>[w[b]]);d.push(new r(C,f._datatype))},m=0;m<c[1];m++)y(m);return d},r.prototype.toArray=function(){return yr(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(f){return Gr(this._data,f)},r.prototype.toString=function(){return Gr(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(f){if(f){if(_n(f)&&(f=f.toNumber()),!tr(f)||!Ar(f))throw new TypeError("The parameter k must be an integer number")}else f=0;for(var d=f>0?f:0,c=f<0?-f:0,g=this._size[0],y=this._size[1],m=Math.min(g-c,y-d),_=[],b=0;b<m;b++)_[b]=this._data[b+c][b+d];return new r({data:_,size:[m],datatype:this._datatype})},r.diagonal=function(f,d,c,g){if(!Jt(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(P){if(_n(P)&&(P=P.toNumber()),!tr(P)||!Ar(P)||P<1)throw new Error("Size values must be positive integers");return P}),c){if(_n(c)&&(c=c.toNumber()),!tr(c)||!Ar(c))throw new TypeError("The parameter k must be an integer number")}else c=0;var y=c>0?c:0,m=c<0?-c:0,_=f[0],b=f[1],C=Math.min(_-m,b-y),w;if(Jt(d)){if(d.length!==C)throw new Error("Invalid value array length");w=function(I){return d[I]}}else if(Ur(d)){var O=d.size();if(O.length!==1||O[0]!==C)throw new Error("Invalid matrix length");w=function(I){return d.get([I])}}else w=function(){return d};g||(g=_n(w(0))?w(0).mul(0):0);var S=[];if(f.length>0){S=zh(S,f,g);for(var B=0;B<C;B++)S[B+m][B+y]=w(B)}return new r({data:S,size:[_,b]})},r.fromJSON=function(f){return new r(f)},r.prototype.swapRows=function(f,d){if(!tr(f)||!Ar(f)||!tr(d)||!Ar(d))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Qt(f,this._size[0]),Qt(d,this._size[0]),r._swapRows(f,d,this._data),this},r._swapRows=function(f,d,c){var g=c[f];c[f]=c[d],c[d]=g};function p(f){for(var d=0,c=f.length;d<c;d++){var g=f[d];Jt(g)?f[d]=p(g):g&&g.isMatrix===!0&&(f[d]=p(g.valueOf()))}return f}return r},{isClass:!0});function ff(e,t,r){return e&&typeof e.map=="function"?e.map(function(n){return ff(n,t)}):t(e)}var Kh="isInteger",cw=["typed"],hw=xt(Kh,cw,e=>{var{typed:t}=e;return t(Kh,{number:Ar,BigNumber:function(n){return n.isInt()},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":t.referToSelf(r=>n=>ff(n,r))})}),rp="number, number";function np(e,t){return e+t}np.signature=rp;function ip(e,t){return e*t}ip.signature=rp;function dw(e,t,r){if(r==null)return e.eq(t);if(e.eq(t))return!0;if(e.isNaN()||t.isNaN())return!1;if(e.isFinite()&&t.isFinite()){var n=e.minus(t).abs();if(n.isZero())return!0;var a=e.constructor.max(e.abs(),t.abs());return n.lte(a.times(r))}return!1}function pw(e,t,r){return is(e.re,t.re,r)&&is(e.im,t.im,r)}var vw=xt("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(r=>(n,a)=>{if(!n.equalBase(a))throw new Error("Cannot compare units with different base");return t.find(r,[n.valueType(),a.valueType()])(n.value,a.value)})}}),ls="equalScalar",gw=["typed","config"],mw=xt(ls,gw,e=>{var{typed:t,config:r}=e,n=vw({typed:t});return t(ls,{"boolean, boolean":function(u,l){return u===l},"number, number":function(u,l){return is(u,l,r.epsilon)},"BigNumber, BigNumber":function(u,l){return u.eq(l)||dw(u,l,r.epsilon)},"Fraction, Fraction":function(u,l){return u.equals(l)},"Complex, Complex":function(u,l){return pw(u,l,r.epsilon)}},n)});xt(ls,["typed","config"],e=>{var{typed:t,config:r}=e;return t(ls,{"number, number":function(a,u){return is(a,u,r.epsilon)}})});var _w="SparseMatrix",Dw=["typed","equalScalar","Matrix"],bw=xt(_w,Dw,e=>{var{typed:t,equalScalar:r,Matrix:n}=e;function a(m,_){if(!(this instanceof a))throw new SyntaxError("Constructor must be called with the new operator");if(_&&!qn(_))throw new Error("Invalid datatype: "+_);if(Ur(m))u(this,m,_);else if(m&&Jt(m.index)&&Jt(m.ptr)&&Jt(m.size))this._values=m.values,this._index=m.index,this._ptr=m.ptr,this._size=m.size,this._datatype=_||m.datatype;else if(Jt(m))l(this,m,_);else{if(m)throw new TypeError("Unsupported type of data ("+Qa(m)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=_}}function u(m,_,b){_.type==="SparseMatrix"?(m._values=_._values?yr(_._values):void 0,m._index=yr(_._index),m._ptr=yr(_._ptr),m._size=yr(_._size),m._datatype=b||_._datatype):l(m,_.valueOf(),b||_._datatype)}function l(m,_,b){m._values=[],m._index=[],m._ptr=[],m._datatype=b;var C=_.length,w=0,O=r,S=0;if(qn(b)&&(O=t.find(r,[b,b])||r,S=t.convert(0,b)),C>0){var B=0;do{m._ptr.push(m._index.length);for(var P=0;P<C;P++){var I=_[P];if(Jt(I)){if(B===0&&w<I.length&&(w=I.length),B<I.length){var N=I[B];O(N,S)||(m._values.push(N),m._index.push(P))}}else B===0&&w<1&&(w=1),O(I,S)||(m._values.push(I),m._index.push(P))}B++}while(B<w)}m._ptr.push(m._index.length),m._size=[C,w]}a.prototype=new n,a.prototype.createSparseMatrix=function(m,_){return new a(m,_)},Object.defineProperty(a,"name",{value:"SparseMatrix"}),a.prototype.constructor=a,a.prototype.type="SparseMatrix",a.prototype.isSparseMatrix=!0,a.prototype.getDataType=function(){return as(this._values,Qa)},a.prototype.storage=function(){return"sparse"},a.prototype.datatype=function(){return this._datatype},a.prototype.create=function(m,_){return new a(m,_)},a.prototype.density=function(){var m=this._size[0],_=this._size[1];return m!==0&&_!==0?this._index.length/(m*_):0},a.prototype.subset=function(m,_,b){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return o(this,m);case 2:case 3:return h(this,m,_,b);default:throw new SyntaxError("Wrong number of arguments")}};function o(m,_){if(!uf(_))throw new TypeError("Invalid index");var b=_.isScalar();if(b)return m.get(_.min());var C=_.size();if(C.length!==m._size.length)throw new Mt(C.length,m._size.length);var w,O,S,B,P=_.min(),I=_.max();for(w=0,O=m._size.length;w<O;w++)Qt(P[w],m._size[w]),Qt(I[w],m._size[w]);var N=m._values,G=m._index,L=m._ptr,q=_.dimension(0),Z=_.dimension(1),W=[],z=[];q.forEach(function(Q,le){z[Q]=le[0],W[Q]=!0});var H=N?[]:void 0,re=[],ee=[];return Z.forEach(function(Q){for(ee.push(re.length),S=L[Q],B=L[Q+1];S<B;S++)w=G[S],W[w]===!0&&(re.push(z[w]),H&&H.push(N[S]))}),ee.push(re.length),new a({values:H,index:re,ptr:ee,size:C,datatype:m._datatype})}function h(m,_,b,C){if(!_||_.isIndex!==!0)throw new TypeError("Invalid index");var w=_.size(),O=_.isScalar(),S;if(Ur(b)?(S=b.size(),b=b.toArray()):S=Fi(b),O){if(S.length!==0)throw new TypeError("Scalar expected");m.set(_.min(),b,C)}else{if(w.length!==1&&w.length!==2)throw new Mt(w.length,m._size.length,"<");if(S.length<w.length){for(var B=0,P=0;w[B]===1&&S[B]===1;)B++;for(;w[B]===1;)P++,B++;b=Ud(b,w.length,P,S)}if(!ns(w,S))throw new Mt(w,S,">");if(w.length===1){var I=_.dimension(0);I.forEach(function(L,q){Qt(L),m.set([L,0],b[q[0]],C)})}else{var N=_.dimension(0),G=_.dimension(1);N.forEach(function(L,q){Qt(L),G.forEach(function(Z,W){Qt(Z),m.set([L,Z],b[q[0]][W[0]],C)})})}}return m}a.prototype.get=function(m){if(!Jt(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new Mt(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var _=m[0],b=m[1];Qt(_,this._size[0]),Qt(b,this._size[1]);var C=p(_,this._ptr[b],this._ptr[b+1],this._index);return C<this._ptr[b+1]&&this._index[C]===_?this._values[C]:0},a.prototype.set=function(m,_,b){if(!Jt(m))throw new TypeError("Array expected");if(m.length!==this._size.length)throw new Mt(m.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var C=m[0],w=m[1],O=this._size[0],S=this._size[1],B=r,P=0;qn(this._datatype)&&(B=t.find(r,[this._datatype,this._datatype])||r,P=t.convert(0,this._datatype)),(C>O-1||w>S-1)&&(c(this,Math.max(C+1,O),Math.max(w+1,S),b),O=this._size[0],S=this._size[1]),Qt(C,O),Qt(w,S);var I=p(C,this._ptr[w],this._ptr[w+1],this._index);return I<this._ptr[w+1]&&this._index[I]===C?B(_,P)?f(I,w,this._values,this._index,this._ptr):this._values[I]=_:B(_,P)||d(I,C,w,_,this._values,this._index,this._ptr),this};function p(m,_,b,C){if(b-_===0)return b;for(var w=_;w<b;w++)if(C[w]===m)return w;return _}function f(m,_,b,C,w){b.splice(m,1),C.splice(m,1);for(var O=_+1;O<w.length;O++)w[O]--}function d(m,_,b,C,w,O,S){w.splice(m,0,C),O.splice(m,0,_);for(var B=b+1;B<S.length;B++)S[B]++}a.prototype.resize=function(m,_,b){if(!rs(m))throw new TypeError("Array or Matrix expected");var C=m.valueOf().map(O=>Array.isArray(O)&&O.length===1?O[0]:O);if(C.length!==2)throw new Error("Only two dimensions matrix are supported");C.forEach(function(O){if(!tr(O)||!Ar(O)||O<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Gr(C)+")")});var w=b?this.clone():this;return c(w,C[0],C[1],_)};function c(m,_,b,C){var w=C||0,O=r,S=0;qn(m._datatype)&&(O=t.find(r,[m._datatype,m._datatype])||r,S=t.convert(0,m._datatype),w=t.convert(w,m._datatype));var B=!O(w,S),P=m._size[0],I=m._size[1],N,G,L;if(b>I){for(G=I;G<b;G++)if(m._ptr[G]=m._values.length,B)for(N=0;N<P;N++)m._values.push(w),m._index.push(N);m._ptr[b]=m._values.length}else b<I&&(m._ptr.splice(b+1,I-b),m._values.splice(m._ptr[b],m._values.length),m._index.splice(m._ptr[b],m._index.length));if(I=b,_>P){if(B){var q=0;for(G=0;G<I;G++){m._ptr[G]=m._ptr[G]+q,L=m._ptr[G+1]+q;var Z=0;for(N=P;N<_;N++,Z++)m._values.splice(L+Z,0,w),m._index.splice(L+Z,0,N),q++}m._ptr[I]=m._values.length}}else if(_<P){var W=0;for(G=0;G<I;G++){m._ptr[G]=m._ptr[G]-W;var z=m._ptr[G],H=m._ptr[G+1]-W;for(L=z;L<H;L++)N=m._index[L],N>_-1&&(m._values.splice(L,1),m._index.splice(L,1),W++)}m._ptr[G]=m._values.length}return m._size[0]=_,m._size[1]=b,m}a.prototype.reshape=function(m,_){if(!Jt(m))throw new TypeError("Array expected");if(m.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");m.forEach(function(Q){if(!tr(Q)||!Ar(Q)||Q<=-2||Q===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Gr(m)+")")});var b=this._size[0]*this._size[1];m=sf(m,b);var C=m[0]*m[1];if(b!==C)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=_?this.clone():this;if(this._size[0]===m[0]&&this._size[1]===m[1])return w;for(var O=[],S=0;S<w._ptr.length;S++)for(var B=0;B<w._ptr[S+1]-w._ptr[S];B++)O.push(S);for(var P=w._values.slice(),I=w._index.slice(),N=0;N<w._index.length;N++){var G=I[N],L=O[N],q=G*w._size[1]+L;O[N]=q%m[1],I[N]=Math.floor(q/m[1])}w._values.length=0,w._index.length=0,w._ptr.length=m[1]+1,w._size=m.slice();for(var Z=0;Z<w._ptr.length;Z++)w._ptr[Z]=0;for(var W=0;W<P.length;W++){var z=I[W],H=O[W],re=P[W],ee=p(z,w._ptr[H],w._ptr[H+1],w._index);d(ee,z,H,re,w._values,w._index,w._ptr)}return w},a.prototype.clone=function(){var m=new a({values:this._values?yr(this._values):void 0,index:yr(this._index),ptr:yr(this._ptr),size:yr(this._size),datatype:this._datatype});return m},a.prototype.size=function(){return this._size.slice(0)},a.prototype.map=function(m,_){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var b=this,C=this._size[0],w=this._size[1],O=tp(m),S=function(P,I,N){return O===1?m(P):O===2?m(P,[I,N]):m(P,[I,N],b)};return g(this,0,C-1,0,w-1,S,_)};function g(m,_,b,C,w,O,S){var B=[],P=[],I=[],N=r,G=0;qn(m._datatype)&&(N=t.find(r,[m._datatype,m._datatype])||r,G=t.convert(0,m._datatype));for(var L=function(be,Ne,je){be=O(be,Ne,je),N(be,G)||(B.push(be),P.push(Ne))},q=C;q<=w;q++){I.push(B.length);var Z=m._ptr[q],W=m._ptr[q+1];if(S)for(var z=Z;z<W;z++){var H=m._index[z];H>=_&&H<=b&&L(m._values[z],H-_,q-C)}else{for(var re={},ee=Z;ee<W;ee++){var Q=m._index[ee];re[Q]=m._values[ee]}for(var le=_;le<=b;le++){var me=le in re?re[le]:0;L(me,le-_,q-C)}}}return I.push(B.length),new a({values:B,index:P,ptr:I,size:[b-_+1,w-C+1]})}a.prototype.forEach=function(m,_){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var b=this,C=this._size[0],w=this._size[1],O=0;O<w;O++){var S=this._ptr[O],B=this._ptr[O+1];if(_)for(var P=S;P<B;P++){var I=this._index[P];m(this._values[P],[I,O],b)}else{for(var N={},G=S;G<B;G++){var L=this._index[G];N[L]=this._values[G]}for(var q=0;q<C;q++){var Z=q in N?N[q]:0;m(Z,[q,O],b)}}}},a.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var m=this._size[1],_=0;_<m;_++)for(var b=this._ptr[_],C=this._ptr[_+1],w=b;w<C;w++){var O=this._index[w];yield{value:this._values[w],index:[O,_]}}},a.prototype.toArray=function(){return y(this._values,this._index,this._ptr,this._size,!0)},a.prototype.valueOf=function(){return y(this._values,this._index,this._ptr,this._size,!1)};function y(m,_,b,C,w){var O=C[0],S=C[1],B=[],P,I;for(P=0;P<O;P++)for(B[P]=[],I=0;I<S;I++)B[P][I]=0;for(I=0;I<S;I++)for(var N=b[I],G=b[I+1],L=N;L<G;L++)P=_[L],B[P][I]=m?w?yr(m[L]):m[L]:1;return B}return a.prototype.format=function(m){for(var _=this._size[0],b=this._size[1],C=this.density(),w="Sparse Matrix ["+Gr(_,m)+" x "+Gr(b,m)+"] density: "+Gr(C,m)+`
`,O=0;O<b;O++)for(var S=this._ptr[O],B=this._ptr[O+1],P=S;P<B;P++){var I=this._index[P];w+=`
    (`+Gr(I,m)+", "+Gr(O,m)+") ==> "+(this._values?Gr(this._values[P],m):"X")}return w},a.prototype.toString=function(){return Gr(this.toArray())},a.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},a.prototype.diagonal=function(m){if(m){if(_n(m)&&(m=m.toNumber()),!tr(m)||!Ar(m))throw new TypeError("The parameter k must be an integer number")}else m=0;var _=m>0?m:0,b=m<0?-m:0,C=this._size[0],w=this._size[1],O=Math.min(C-b,w-_),S=[],B=[],P=[];P[0]=0;for(var I=_;I<w&&S.length<O;I++)for(var N=this._ptr[I],G=this._ptr[I+1],L=N;L<G;L++){var q=this._index[L];if(q===I-_+b){S.push(this._values[L]),B[S.length-1]=q-b;break}}return P.push(S.length),new a({values:S,index:B,ptr:P,size:[O,1]})},a.fromJSON=function(m){return new a(m)},a.diagonal=function(m,_,b,C,w){if(!Jt(m))throw new TypeError("Array expected, size parameter");if(m.length!==2)throw new Error("Only two dimensions matrix are supported");if(m=m.map(function(Q){if(_n(Q)&&(Q=Q.toNumber()),!tr(Q)||!Ar(Q)||Q<1)throw new Error("Size values must be positive integers");return Q}),b){if(_n(b)&&(b=b.toNumber()),!tr(b)||!Ar(b))throw new TypeError("The parameter k must be an integer number")}else b=0;var O=r,S=0;qn(w)&&(O=t.find(r,[w,w])||r,S=t.convert(0,w));var B=b>0?b:0,P=b<0?-b:0,I=m[0],N=m[1],G=Math.min(I-P,N-B),L;if(Jt(_)){if(_.length!==G)throw new Error("Invalid value array length");L=function(le){return _[le]}}else if(Ur(_)){var q=_.size();if(q.length!==1||q[0]!==G)throw new Error("Invalid matrix length");L=function(le){return _.get([le])}}else L=function(){return _};for(var Z=[],W=[],z=[],H=0;H<N;H++){z.push(Z.length);var re=H-B;if(re>=0&&re<G){var ee=L(re);O(ee,S)||(W.push(re+P),Z.push(ee))}}return z.push(Z.length),new a({values:Z,index:W,ptr:z,size:[I,N]})},a.prototype.swapRows=function(m,_){if(!tr(m)||!Ar(m)||!tr(_)||!Ar(_))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Qt(m,this._size[0]),Qt(_,this._size[0]),a._swapRows(m,_,this._size[1],this._values,this._index,this._ptr),this},a._forEachRow=function(m,_,b,C,w){for(var O=C[m],S=C[m+1],B=O;B<S;B++)w(b[B],_[B])},a._swapRows=function(m,_,b,C,w,O){for(var S=0;S<b;S++){var B=O[S],P=O[S+1],I=p(m,B,P,w),N=p(_,B,P,w);if(I<P&&N<P&&w[I]===m&&w[N]===_){if(C){var G=C[I];C[I]=C[N],C[N]=G}continue}if(I<P&&w[I]===m&&(N>=P||w[N]!==_)){var L=C?C[I]:void 0;w.splice(N,0,_),C&&C.splice(N,0,L),w.splice(N<=I?I+1:I,1),C&&C.splice(N<=I?I+1:I,1);continue}if(N<P&&w[N]===_&&(I>=P||w[I]!==m)){var q=C?C[N]:void 0;w.splice(I,0,m),C&&C.splice(I,0,q),w.splice(I<=N?N+1:N,1),C&&C.splice(I<=N?N+1:N,1)}}},a},{isClass:!0}),Yh="matrix",yw=["typed","Matrix","DenseMatrix","SparseMatrix"],Aw=xt(Yh,yw,e=>{var{typed:t,Matrix:r,DenseMatrix:n,SparseMatrix:a}=e;return t(Yh,{"":function(){return u([])},string:function(o){return u([],o)},"string, string":function(o,h){return u([],o,h)},Array:function(o){return u(o)},Matrix:function(o){return u(o,o.storage())},"Array | Matrix, string":u,"Array | Matrix, string, string":u});function u(l,o,h){if(o==="dense"||o==="default"||o===void 0)return new n(l,h);if(o==="sparse")return new a(l,h);throw new TypeError("Unknown matrix type "+JSON.stringify(o)+".")}}),Zh="addScalar",ww=["typed"],Ew=xt(Zh,ww,e=>{var{typed:t}=e;return t(Zh,{"number, number":np,"Complex, Complex":function(n,a){return n.add(a)},"BigNumber, BigNumber":function(n,a){return n.plus(a)},"Fraction, Fraction":function(n,a){return n.add(a)},"Unit, Unit":t.referToSelf(r=>(n,a)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(a.value===null||a.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(a))throw new Error("Units do not match");var u=n.clone();return u.value=t.find(r,[u.valueType(),a.valueType()])(u.value,a.value),u.fixPrefix=!1,u})})}),Cw="matAlgo11xS0s",Fw=["typed","equalScalar"],Sw=xt(Cw,Fw,e=>{var{typed:t,equalScalar:r}=e;return function(a,u,l,o){var h=a._values,p=a._index,f=a._ptr,d=a._size,c=a._datatype;if(!h)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=d[0],y=d[1],m,_=r,b=0,C=l;typeof c=="string"&&(m=c,_=t.find(r,[m,m]),b=t.convert(0,m),u=t.convert(u,m),C=t.find(l,[m,m]));for(var w=[],O=[],S=[],B=0;B<y;B++){S[B]=O.length;for(var P=f[B],I=f[B+1],N=P;N<I;N++){var G=p[N],L=o?C(u,h[N]):C(h[N],u);_(L,b)||(O.push(G),w.push(L))}}return S[y]=O.length,a.createSparseMatrix({values:w,index:O,ptr:S,size:[g,y],datatype:m})}}),Bw="matAlgo14xDs",Ow=["typed"],ap=xt(Bw,Ow,e=>{var{typed:t}=e;return function(a,u,l,o){var h=a._data,p=a._size,f=a._datatype,d,c=l;typeof f=="string"&&(d=f,u=t.convert(u,d),c=t.find(l,[d,d]));var g=p.length>0?r(c,0,p,p[0],h,u,o):[];return a.createDenseMatrix({data:g,size:yr(p),datatype:d})};function r(n,a,u,l,o,h,p){var f=[];if(a===u.length-1)for(var d=0;d<l;d++)f[d]=p?n(h,o[d]):n(o[d],h);else for(var c=0;c<l;c++)f[c]=r(n,a+1,u,u[a+1],o[c],h,p);return f}}),Mw="matAlgo01xDSid",Pw=["typed"],xw=xt(Mw,Pw,e=>{var{typed:t}=e;return function(n,a,u,l){var o=n._data,h=n._size,p=n._datatype,f=a._values,d=a._index,c=a._ptr,g=a._size,y=a._datatype;if(h.length!==g.length)throw new Mt(h.length,g.length);if(h[0]!==g[0]||h[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+g+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var m=h[0],_=h[1],b=typeof p=="string"&&p===y?p:void 0,C=b?t.find(u,[b,b]):u,w,O,S=[];for(w=0;w<m;w++)S[w]=[];var B=[],P=[];for(O=0;O<_;O++){for(var I=O+1,N=c[O],G=c[O+1],L=N;L<G;L++)w=d[L],B[w]=l?C(f[L],o[w][O]):C(o[w][O],f[L]),P[w]=I;for(w=0;w<m;w++)P[w]===I?S[w][O]=B[w]:S[w][O]=o[w][O]}return n.createDenseMatrix({data:S,size:[m,_],datatype:b})}}),Tw="matAlgo04xSidSid",Iw=["typed","equalScalar"],Nw=xt(Tw,Iw,e=>{var{typed:t,equalScalar:r}=e;return function(a,u,l){var o=a._values,h=a._index,p=a._ptr,f=a._size,d=a._datatype,c=u._values,g=u._index,y=u._ptr,m=u._size,_=u._datatype;if(f.length!==m.length)throw new Mt(f.length,m.length);if(f[0]!==m[0]||f[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+m+")");var b=f[0],C=f[1],w,O=r,S=0,B=l;typeof d=="string"&&d===_&&(w=d,O=t.find(r,[w,w]),S=t.convert(0,w),B=t.find(l,[w,w]));var P=o&&c?[]:void 0,I=[],N=[],G=o&&c?[]:void 0,L=o&&c?[]:void 0,q=[],Z=[],W,z,H,re,ee;for(z=0;z<C;z++){N[z]=I.length;var Q=z+1;for(re=p[z],ee=p[z+1],H=re;H<ee;H++)W=h[H],I.push(W),q[W]=Q,G&&(G[W]=o[H]);for(re=y[z],ee=y[z+1],H=re;H<ee;H++)if(W=g[H],q[W]===Q){if(G){var le=B(G[W],c[H]);O(le,S)?q[W]=null:G[W]=le}}else I.push(W),Z[W]=Q,L&&(L[W]=c[H]);if(G&&L)for(H=N[z];H<I.length;)W=I[H],q[W]===Q?(P[H]=G[W],H++):Z[W]===Q?(P[H]=L[W],H++):I.splice(H,1)}return N[C]=I.length,a.createSparseMatrix({values:P,index:I,ptr:N,size:[b,C],datatype:w})}}),kw="matAlgo10xSids",Rw=["typed","DenseMatrix"],Lw=xt(kw,Rw,e=>{var{typed:t,DenseMatrix:r}=e;return function(a,u,l,o){var h=a._values,p=a._index,f=a._ptr,d=a._size,c=a._datatype;if(!h)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=d[0],y=d[1],m,_=l;typeof c=="string"&&(m=c,u=t.convert(u,m),_=t.find(l,[m,m]));for(var b=[],C=[],w=[],O=0;O<y;O++){for(var S=O+1,B=f[O],P=f[O+1],I=B;I<P;I++){var N=p[I];C[N]=h[I],w[N]=S}for(var G=0;G<g;G++)O===0&&(b[G]=[]),w[G]===S?b[G][O]=o?_(u,C[G]):_(C[G],u):b[G][O]=u}return new r({data:b,size:[g,y],datatype:m})}}),Uw="matAlgo13xDD",Vw=["typed"],jw=xt(Uw,Vw,e=>{var{typed:t}=e;return function(a,u,l){var o=a._data,h=a._size,p=a._datatype,f=u._data,d=u._size,c=u._datatype,g=[];if(h.length!==d.length)throw new Mt(h.length,d.length);for(var y=0;y<h.length;y++){if(h[y]!==d[y])throw new RangeError("Dimension mismatch. Matrix A ("+h+") must match Matrix B ("+d+")");g[y]=h[y]}var m,_=l;typeof p=="string"&&p===c&&(m=p,_=t.find(l,[m,m]));var b=g.length>0?r(_,0,g,g[0],o,f):[];return a.createDenseMatrix({data:b,size:g,datatype:m})};function r(n,a,u,l,o,h){var p=[];if(a===u.length-1)for(var f=0;f<l;f++)p[f]=n(o[f],h[f]);else for(var d=0;d<l;d++)p[d]=r(n,a+1,u,u[a+1],o[d],h[d]);return p}}),qw="broadcast",zw=["concat"],Ww=xt(qw,zw,e=>{var{concat:t}=e;return function(u,l){var o=Math.max(u._size.length,l._size.length);if(u._size.length===l._size.length&&u._size.every((_,b)=>_===l._size[b]))return[u,l];for(var h=r(u._size,o,0),p=r(l._size,o,0),f=[],d=0;d<o;d++)f[d]=Math.max(h[d],p[d]);for(var c=0;c<o;c++)a(h,f,c),a(p,f,c);var g=u.clone(),y=l.clone();g._size.length<o?g.reshape(r(g._size,o,1)):y._size.length<o&&y.reshape(r(y._size,o,1));for(var m=0;m<o;m++)g._size[m]<f[m]&&(g=n(g,f[m],m)),y._size[m]<f[m]&&(y=n(y,f[m],m));return[g,y]};function r(u,l,o){return[...Array(l-u.length).fill(o),...u]}function n(u,l,o){return t(...Array(l).fill(u),o)}function a(u,l,o){if(u[o]<l[o]&u[o]>1)throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(u,") not possible to broadcast dimension ").concat(o," with size ").concat(u[o]," to size ").concat(l[o]))}}),Hw="matrixAlgorithmSuite",Gw=["typed","matrix","concat"],Kw=xt(Hw,Gw,e=>{var{typed:t,matrix:r,concat:n}=e,a=jw({typed:t}),u=ap({typed:t}),l=Ww({concat:n});return function(h){var p=h.elop,f=h.SD||h.DS,d;p?(d={"DenseMatrix, DenseMatrix":(m,_)=>a(...l(m,_),p),"Array, Array":(m,_)=>a(...l(r(m),r(_)),p).valueOf(),"Array, DenseMatrix":(m,_)=>a(...l(r(m),_),p),"DenseMatrix, Array":(m,_)=>a(...l(m,r(_)),p)},h.SS&&(d["SparseMatrix, SparseMatrix"]=(m,_)=>h.SS(...l(m,_),p,!1)),h.DS&&(d["DenseMatrix, SparseMatrix"]=(m,_)=>h.DS(...l(m,_),p,!1),d["Array, SparseMatrix"]=(m,_)=>h.DS(...l(r(m),_),p,!1)),f&&(d["SparseMatrix, DenseMatrix"]=(m,_)=>f(...l(_,m),p,!0),d["SparseMatrix, Array"]=(m,_)=>f(...l(r(_),m),p,!0))):(d={"DenseMatrix, DenseMatrix":t.referToSelf(m=>(_,b)=>a(...l(_,b),m)),"Array, Array":t.referToSelf(m=>(_,b)=>a(...l(r(_),r(b)),m).valueOf()),"Array, DenseMatrix":t.referToSelf(m=>(_,b)=>a(...l(r(_),b),m)),"DenseMatrix, Array":t.referToSelf(m=>(_,b)=>a(...l(_,r(b)),m))},h.SS&&(d["SparseMatrix, SparseMatrix"]=t.referToSelf(m=>(_,b)=>h.SS(...l(_,b),m,!1))),h.DS&&(d["DenseMatrix, SparseMatrix"]=t.referToSelf(m=>(_,b)=>h.DS(...l(_,b),m,!1)),d["Array, SparseMatrix"]=t.referToSelf(m=>(_,b)=>h.DS(...l(r(_),b),m,!1))),f&&(d["SparseMatrix, DenseMatrix"]=t.referToSelf(m=>(_,b)=>f(...l(b,_),m,!0)),d["SparseMatrix, Array"]=t.referToSelf(m=>(_,b)=>f(...l(r(b),_),m,!0))));var c=h.scalar||"any",g=h.Ds||h.Ss;g&&(p?(d["DenseMatrix,"+c]=(m,_)=>u(m,_,p,!1),d[c+", DenseMatrix"]=(m,_)=>u(_,m,p,!0),d["Array,"+c]=(m,_)=>u(r(m),_,p,!1).valueOf(),d[c+", Array"]=(m,_)=>u(r(_),m,p,!0).valueOf()):(d["DenseMatrix,"+c]=t.referToSelf(m=>(_,b)=>u(_,b,m,!1)),d[c+", DenseMatrix"]=t.referToSelf(m=>(_,b)=>u(b,_,m,!0)),d["Array,"+c]=t.referToSelf(m=>(_,b)=>u(r(_),b,m,!1).valueOf()),d[c+", Array"]=t.referToSelf(m=>(_,b)=>u(r(b),_,m,!0).valueOf())));var y=h.sS!==void 0?h.sS:h.Ss;return p?(h.Ss&&(d["SparseMatrix,"+c]=(m,_)=>h.Ss(m,_,p,!1)),y&&(d[c+", SparseMatrix"]=(m,_)=>y(_,m,p,!0))):(h.Ss&&(d["SparseMatrix,"+c]=t.referToSelf(m=>(_,b)=>h.Ss(_,b,m,!1))),y&&(d[c+", SparseMatrix"]=t.referToSelf(m=>(_,b)=>y(b,_,m,!0)))),p&&p.signatures&&wy(d,p.signatures),d}}),Yw="multiplyScalar",Zw=["typed"],$w=xt(Yw,Zw,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":ip,"Complex, Complex":function(n,a){return n.mul(a)},"BigNumber, BigNumber":function(n,a){return n.times(a)},"Fraction, Fraction":function(n,a){return n.mul(a)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),$h="multiply",Xw=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Jw=xt($h,Xw,e=>{var{typed:t,matrix:r,addScalar:n,multiplyScalar:a,equalScalar:u,dot:l}=e,o=Sw({typed:t,equalScalar:u}),h=ap({typed:t});function p(S,B){switch(S.length){case 1:switch(B.length){case 1:if(S[0]!==B[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(S[0]!==B[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+S[0]+") must match Matrix rows ("+B[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+B.length+" dimensions)")}break;case 2:switch(B.length){case 1:if(S[1]!==B[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+S[1]+") must match Vector length ("+B[0]+")");break;case 2:if(S[1]!==B[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+S[1]+") must match Matrix B rows ("+B[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+B.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+S.length+" dimensions)")}}function f(S,B,P){if(P===0)throw new Error("Cannot multiply two empty vectors");return l(S,B)}function d(S,B){if(B.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return c(S,B)}function c(S,B){var P=S._data,I=S._size,N=S._datatype,G=B._data,L=B._size,q=B._datatype,Z=I[0],W=L[1],z,H=n,re=a;N&&q&&N===q&&typeof N=="string"&&(z=N,H=t.find(n,[z,z]),re=t.find(a,[z,z]));for(var ee=[],Q=0;Q<W;Q++){for(var le=re(P[0],G[0][Q]),me=1;me<Z;me++)le=H(le,re(P[me],G[me][Q]));ee[Q]=le}return S.createDenseMatrix({data:ee,size:[W],datatype:z})}var g=t("_multiplyMatrixVector",{"DenseMatrix, any":m,"SparseMatrix, any":C}),y=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":_,"DenseMatrix, SparseMatrix":b,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":O});function m(S,B){var P=S._data,I=S._size,N=S._datatype,G=B._data,L=B._datatype,q=I[0],Z=I[1],W,z=n,H=a;N&&L&&N===L&&typeof N=="string"&&(W=N,z=t.find(n,[W,W]),H=t.find(a,[W,W]));for(var re=[],ee=0;ee<q;ee++){for(var Q=P[ee],le=H(Q[0],G[0]),me=1;me<Z;me++)le=z(le,H(Q[me],G[me]));re[ee]=le}return S.createDenseMatrix({data:re,size:[q],datatype:W})}function _(S,B){var P=S._data,I=S._size,N=S._datatype,G=B._data,L=B._size,q=B._datatype,Z=I[0],W=I[1],z=L[1],H,re=n,ee=a;N&&q&&N===q&&typeof N=="string"&&(H=N,re=t.find(n,[H,H]),ee=t.find(a,[H,H]));for(var Q=[],le=0;le<Z;le++){var me=P[le];Q[le]=[];for(var Fe=0;Fe<z;Fe++){for(var be=ee(me[0],G[0][Fe]),Ne=1;Ne<W;Ne++)be=re(be,ee(me[Ne],G[Ne][Fe]));Q[le][Fe]=be}}return S.createDenseMatrix({data:Q,size:[Z,z],datatype:H})}function b(S,B){var P=S._data,I=S._size,N=S._datatype,G=B._values,L=B._index,q=B._ptr,Z=B._size,W=B._datatype;if(!G)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var z=I[0],H=Z[1],re,ee=n,Q=a,le=u,me=0;N&&W&&N===W&&typeof N=="string"&&(re=N,ee=t.find(n,[re,re]),Q=t.find(a,[re,re]),le=t.find(u,[re,re]),me=t.convert(0,re));for(var Fe=[],be=[],Ne=[],je=B.createSparseMatrix({values:Fe,index:be,ptr:Ne,size:[z,H],datatype:re}),Me=0;Me<H;Me++){Ne[Me]=be.length;var it=q[Me],qe=q[Me+1];if(qe>it)for(var Te=0,Re=0;Re<z;Re++){for(var lt=Re+1,et=void 0,at=it;at<qe;at++){var tt=L[at];Te!==lt?(et=Q(P[Re][tt],G[at]),Te=lt):et=ee(et,Q(P[Re][tt],G[at]))}Te===lt&&!le(et,me)&&(be.push(Re),Fe.push(et))}}return Ne[H]=be.length,je}function C(S,B){var P=S._values,I=S._index,N=S._ptr,G=S._datatype;if(!P)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var L=B._data,q=B._datatype,Z=S._size[0],W=B._size[0],z=[],H=[],re=[],ee,Q=n,le=a,me=u,Fe=0;G&&q&&G===q&&typeof G=="string"&&(ee=G,Q=t.find(n,[ee,ee]),le=t.find(a,[ee,ee]),me=t.find(u,[ee,ee]),Fe=t.convert(0,ee));var be=[],Ne=[];re[0]=0;for(var je=0;je<W;je++){var Me=L[je];if(!me(Me,Fe))for(var it=N[je],qe=N[je+1],Te=it;Te<qe;Te++){var Re=I[Te];Ne[Re]?be[Re]=Q(be[Re],le(Me,P[Te])):(Ne[Re]=!0,H.push(Re),be[Re]=le(Me,P[Te]))}}for(var lt=H.length,et=0;et<lt;et++){var at=H[et];z[et]=be[at]}return re[1]=H.length,S.createSparseMatrix({values:z,index:H,ptr:re,size:[Z,1],datatype:ee})}function w(S,B){var P=S._values,I=S._index,N=S._ptr,G=S._datatype;if(!P)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var L=B._data,q=B._datatype,Z=S._size[0],W=B._size[0],z=B._size[1],H,re=n,ee=a,Q=u,le=0;G&&q&&G===q&&typeof G=="string"&&(H=G,re=t.find(n,[H,H]),ee=t.find(a,[H,H]),Q=t.find(u,[H,H]),le=t.convert(0,H));for(var me=[],Fe=[],be=[],Ne=S.createSparseMatrix({values:me,index:Fe,ptr:be,size:[Z,z],datatype:H}),je=[],Me=[],it=0;it<z;it++){be[it]=Fe.length;for(var qe=it+1,Te=0;Te<W;Te++){var Re=L[Te][it];if(!Q(Re,le))for(var lt=N[Te],et=N[Te+1],at=lt;at<et;at++){var tt=I[at];Me[tt]!==qe?(Me[tt]=qe,Fe.push(tt),je[tt]=ee(Re,P[at])):je[tt]=re(je[tt],ee(Re,P[at]))}}for(var rt=be[it],ze=Fe.length,We=rt;We<ze;We++){var Ae=Fe[We];me[We]=je[Ae]}}return be[z]=Fe.length,Ne}function O(S,B){var P=S._values,I=S._index,N=S._ptr,G=S._datatype,L=B._values,q=B._index,Z=B._ptr,W=B._datatype,z=S._size[0],H=B._size[1],re=P&&L,ee,Q=n,le=a;G&&W&&G===W&&typeof G=="string"&&(ee=G,Q=t.find(n,[ee,ee]),le=t.find(a,[ee,ee]));for(var me=re?[]:void 0,Fe=[],be=[],Ne=S.createSparseMatrix({values:me,index:Fe,ptr:be,size:[z,H],datatype:ee}),je=re?[]:void 0,Me=[],it,qe,Te,Re,lt,et,at,tt,rt=0;rt<H;rt++){be[rt]=Fe.length;var ze=rt+1;for(lt=Z[rt],et=Z[rt+1],Re=lt;Re<et;Re++)if(tt=q[Re],re)for(qe=N[tt],Te=N[tt+1],it=qe;it<Te;it++)at=I[it],Me[at]!==ze?(Me[at]=ze,Fe.push(at),je[at]=le(L[Re],P[it])):je[at]=Q(je[at],le(L[Re],P[it]));else for(qe=N[tt],Te=N[tt+1],it=qe;it<Te;it++)at=I[it],Me[at]!==ze&&(Me[at]=ze,Fe.push(at));if(re)for(var We=be[rt],Ae=Fe.length,Se=We;Se<Ae;Se++){var yt=Fe[Se];me[Se]=je[yt]}}return be[H]=Fe.length,Ne}return t($h,a,{"Array, Array":t.referTo("Matrix, Matrix",S=>(B,P)=>{p(Fi(B),Fi(P));var I=S(r(B),r(P));return Ur(I)?I.valueOf():I}),"Matrix, Matrix":function(B,P){var I=B.size(),N=P.size();return p(I,N),I.length===1?N.length===1?f(B,P,I[0]):d(B,P):N.length===1?g(B,P):y(B,P)},"Matrix, Array":t.referTo("Matrix,Matrix",S=>(B,P)=>S(B,r(P))),"Array, Matrix":t.referToSelf(S=>(B,P)=>S(r(B,P.storage()),P)),"SparseMatrix, any":function(B,P){return o(B,P,a,!1)},"DenseMatrix, any":function(B,P){return h(B,P,a,!1)},"any, SparseMatrix":function(B,P){return o(P,B,a,!0)},"any, DenseMatrix":function(B,P){return h(P,B,a,!0)},"Array, any":function(B,P){return h(r(B),P,a,!1).valueOf()},"any, Array":function(B,P){return h(r(P),B,a,!0).valueOf()},"any, any":a,"any, any, ...any":t.referToSelf(S=>(B,P,I)=>{for(var N=S(B,P),G=0;G<I.length;G++)N=S(N,I[G]);return N})})}),Xh="conj",Qw=["typed"],eE=xt(Xh,Qw,e=>{var{typed:t}=e;return t(Xh,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":t.referToSelf(r=>n=>ff(n,r))})}),Jh="concat",tE=["typed","matrix","isInteger"],rE=xt(Jh,tE,e=>{var{typed:t,matrix:r,isInteger:n}=e;return t(Jh,{"...Array | Matrix | number | BigNumber":function(u){var l,o=u.length,h=-1,p,f=!1,d=[];for(l=0;l<o;l++){var c=u[l];if(Ur(c)&&(f=!0),tr(c)||_n(c)){if(l!==o-1)throw new Error("Dimension must be specified as last argument");if(p=h,h=c.valueOf(),!n(h))throw new TypeError("Integer number expected for dimension");if(h<0||l>0&&h>p)throw new Hi(h,p+1)}else{var g=yr(c).valueOf(),y=Fi(g);if(d[l]=g,p=h,h=y.length-1,l>0&&h!==p)throw new Mt(p+1,h+1)}}if(d.length===0)throw new SyntaxError("At least one matrix expected");for(var m=d.shift();d.length;)m=up(m,d.shift(),h,0);return f?r(m):m},"...string":function(u){return u.join("")}})});function up(e,t,r,n){if(n<r){if(e.length!==t.length)throw new Mt(e.length,t.length);for(var a=[],u=0;u<e.length;u++)a[u]=up(e[u],t[u],r,n+1);return a}else return e.concat(t)}function nE(){throw new Error('No "matrix" implementation available')}var Qh="size",iE=["typed","config","?matrix"],aE=xt(Qh,iE,e=>{var{typed:t,config:r,matrix:n}=e;return t(Qh,{Matrix:function(u){return u.create(u.size())},Array:Fi,string:function(u){return r.matrix==="Array"?[u.length]:n([u.length])},"number | Complex | BigNumber | Unit | boolean | null":function(u){return r.matrix==="Array"?[]:n?n([]):nE()}})}),e0="add",uE=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],sE=xt(e0,uE,e=>{var{typed:t,matrix:r,addScalar:n,equalScalar:a,DenseMatrix:u,SparseMatrix:l,concat:o}=e,h=xw({typed:t}),p=Nw({typed:t,equalScalar:a}),f=Lw({typed:t,DenseMatrix:u}),d=Kw({typed:t,matrix:r,concat:o});return t(e0,{"any, any":n,"any, any, ...any":t.referToSelf(c=>(g,y,m)=>{for(var _=c(g,y),b=0;b<m.length;b++)_=c(_,m[b]);return _})},d({elop:n,DS:h,SS:p,Ss:f}))}),t0="dot",oE=["typed","addScalar","multiplyScalar","conj","size"],lE=xt(t0,oE,e=>{var{typed:t,addScalar:r,multiplyScalar:n,conj:a,size:u}=e;return t(t0,{"Array | DenseMatrix, Array | DenseMatrix":o,"SparseMatrix, SparseMatrix":h});function l(f,d){var c=p(f),g=p(d),y,m;if(c.length===1)y=c[0];else if(c.length===2&&c[1]===1)y=c[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+c.join(", ")+")");if(g.length===1)m=g[0];else if(g.length===2&&g[1]===1)m=g[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+g.join(", ")+")");if(y!==m)throw new RangeError("Vectors must have equal length ("+y+" != "+m+")");if(y===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return y}function o(f,d){var c=l(f,d),g=Ur(f)?f._data:f,y=Ur(f)?f._datatype:void 0,m=Ur(d)?d._data:d,_=Ur(d)?d._datatype:void 0,b=p(f).length===2,C=p(d).length===2,w=r,O=n;if(y&&_&&y===_&&typeof y=="string"){var S=y;w=t.find(r,[S,S]),O=t.find(n,[S,S])}if(!b&&!C){for(var B=O(a(g[0]),m[0]),P=1;P<c;P++)B=w(B,O(a(g[P]),m[P]));return B}if(!b&&C){for(var I=O(a(g[0]),m[0][0]),N=1;N<c;N++)I=w(I,O(a(g[N]),m[N][0]));return I}if(b&&!C){for(var G=O(a(g[0][0]),m[0]),L=1;L<c;L++)G=w(G,O(a(g[L][0]),m[L]));return G}if(b&&C){for(var q=O(a(g[0][0]),m[0][0]),Z=1;Z<c;Z++)q=w(q,O(a(g[Z][0]),m[Z][0]));return q}}function h(f,d){l(f,d);for(var c=f._index,g=f._values,y=d._index,m=d._values,_=0,b=r,C=n,w=0,O=0;w<c.length&&O<y.length;){var S=c[w],B=y[O];if(S<B){w++;continue}if(S>B){O++;continue}S===B&&(_=b(_,C(g[w],m[O])),w++,O++)}return _}function p(f){return Ur(f)?f.size():u(f)}}),fE=$A({config:Os}),cE=ew({}),hE=iw({}),cf=sw({}),hf=fw({Matrix:cf}),yn=Qy({BigNumber:fE,Complex:cE,DenseMatrix:hf,Fraction:hE}),df=Ew({typed:yn}),dE=eE({typed:yn}),pf=mw({config:Os,typed:yn}),pE=hw({typed:yn}),sp=$w({typed:yn}),op=bw({Matrix:cf,equalScalar:pf,typed:yn}),Ns=Aw({DenseMatrix:hf,Matrix:cf,SparseMatrix:op,typed:yn}),vE=aE({matrix:Ns,config:Os,typed:yn}),gE=rE({isInteger:pE,matrix:Ns,typed:yn}),Kr=sE({DenseMatrix:hf,SparseMatrix:op,addScalar:df,concat:gE,equalScalar:pf,matrix:Ns,typed:yn}),mE=lE({addScalar:df,conj:dE,multiplyScalar:sp,size:vE,typed:yn}),mn=Jw({addScalar:df,dot:mE,equalScalar:pf,matrix:Ns,multiplyScalar:sp,typed:yn});const al="selectedPromptStore";function _E(){const e=In(""),{subscribe:t,set:r,update:n}=e,a=typeof window<"u";return r(a&&localStorage[al]||""),{subscribe:t,update:u=>{!u||!a||(localStorage[al]=u,r(u))},get:()=>zt(e),delete:()=>{a&&(delete localStorage[al],r(""))}}}const Da=_E(),lp=Tn(Da,e=>zt(Da));function DE(){const e=In({}),{subscribe:t,set:r,update:n}=e,a=typeof window<"u";return r(a&&Object.keys(localStorage).reduce((u,l)=>{if(l.startsWith("prompt")){const o=l.split("_")[1];u[o]=JSON.parse(localStorage[l])}return u},{})||{}),{subscribe:t,update:(u,l)=>{const o=zt(e),p={...o[u]||{},...l};a&&(localStorage[`prompt_${u}`]=JSON.stringify(p));const f={...o,[u]:p};r(f)},get:u=>zt(e)[u],delete:u=>{a&&delete localStorage[`prompt_${u}`];const l={...zt(e)};delete l[u],r(l)}}}const ru=DE(),bE=Tn(ru,e=>Object.entries(zt(ru))),Ku="activePromptStore";function Br(e,t,r,n=1){return{id:e,text:t,barWeight:n,parsedWeight:r}}function r0(){return{0:Br(0,"Magic potion in a mystical bottle",1),1:Br(1,"A crystalline decanter",1),2:Br(2,"An ornate tequila bottle",1),3:Br(3,"An antique sake bottle",1),4:Br(4,"A colorful perfume bottle",1),5:Br(5,"A glass vase full of vibrant flowers",1),6:Br(6,"A minimalist glass tea kettle",1),7:Br(7,"Chihuly glass art",1),8:Br(8,"A fine wine bottle",1),9:Br(9,"A gourmet vinegar bottle",1),10:Br(10,"A stunning fishbowl",1),11:Br(11,"A striking piece of tourmaline",1),12:Br(12,"A finely cut piece of sapphire",1),13:Br(13,"Iittala glass art",1)}}function Ai(e,t=At.Pie){return{weightedPrompts:e||{},weightMode:t,pieAngles:{},circleAngles:{},circleMarker:[270,.33],circleWeightScaling:2,circleExponentialScaling:!0,embedExponentialScaling:!0,embedWeightScaling:2,embedClusters:0,embedPromptLimit:Object.keys(e).length}}function yE(){const e=In({}),{subscribe:t,set:r,update:n}=e,a=typeof window<"u",u=a&&localStorage[Ku]?JSON.parse(localStorage[Ku]):Ai(r0());return r({...Ai({}),...u}),{subscribe:t,update:l=>{const o=Da.get();o&&ru.update(o,l),!(!l||!a)&&(localStorage[Ku]=JSON.stringify(l),r({...Ai({}),...l}))},get:()=>zt(e),delete:()=>{a&&(delete localStorage[Ku],r(Ai(r0())))}}}const Nt=yE(),An=Tn(Nt,e=>zt(Nt));function AE(e){let t,r,n;return{c(){t=Ct("circle"),this.h()},l(a){t=Ft(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),ie(t).forEach(V),this.h()},h(){T(t,"cx",r=e[0][0]),T(t,"cy",n=e[0][1]),T(t,"r",e[1]),T(t,"stroke",e[3]),T(t,"stroke-width",e[2]),er(t,"fill","rgba(0,0,0,0)")},m(a,u){Ee(a,t,u)},p(a,[u]){u&1&&r!==(r=a[0][0])&&T(t,"cx",r),u&1&&n!==(n=a[0][1])&&T(t,"cy",n),u&2&&T(t,"r",a[1]),u&8&&T(t,"stroke",a[3]),u&4&&T(t,"stroke-width",a[2])},i:Ie,o:Ie,d(a){a&&V(t)}}}function wE(e,t,r){let{xy:n=[500,500]}=t,{radius:a=400}=t,{stroke:u=2}=t,{color:l="rgba(46,67,101, 0.4)"}=t;return e.$$set=o=>{"xy"in o&&r(0,n=o.xy),"radius"in o&&r(1,a=o.radius),"stroke"in o&&r(2,u=o.stroke),"color"in o&&r(3,l=o.color)},[n,a,u,l]}class fp extends Rt{constructor(t){super(),Lt(this,t,wE,AE,Ut,{xy:0,radius:1,stroke:2,color:3})}}function EE(e){let t,r,n,a,u;return{c(){t=Ct("circle"),this.h()},l(l){t=Ft(l,"circle",{cx:!0,cy:!0,r:!0}),ie(t).forEach(V),this.h()},h(){T(t,"cx",r=e[0][0]),T(t,"cy",n=e[0][1]),T(t,"r",e[1]),er(t,"fill",e[2])},m(l,o){Ee(l,t,o),a||(u=[ke(t,"mouseover",e[3]),ke(t,"mouseout",e[4]),ke(t,"mousedown",e[5])],a=!0)},p(l,[o]){o&1&&r!==(r=l[0][0])&&T(t,"cx",r),o&1&&n!==(n=l[0][1])&&T(t,"cy",n),o&2&&T(t,"r",l[1]),o&4&&er(t,"fill",l[2])},i:Ie,o:Ie,d(l){l&&V(t),a=!1,Vr(u)}}}function CE(e,t,r){let{xy:n=[100,100]}=t,{radius:a=5}=t,{color:u="black"}=t,{hoverColor:l="white"}=t,{handleMouseDown:o=c=>{}}=t,h=u;function p(){r(2,h=l)}function f(){r(2,h=u)}function d(c){o(c)}return e.$$set=c=>{"xy"in c&&r(0,n=c.xy),"radius"in c&&r(1,a=c.radius),"color"in c&&r(6,u=c.color),"hoverColor"in c&&r(7,l=c.hoverColor),"handleMouseDown"in c&&r(8,o=c.handleMouseDown)},[n,a,h,p,f,d,u,l,o]}class iu extends Rt{constructor(t){super(),Lt(this,t,CE,EE,Ut,{xy:0,radius:1,color:6,hoverColor:7,handleMouseDown:8})}}function FE(e){let t,r,n,a,u;return{c(){t=Ct("line"),this.h()},l(l){t=Ft(l,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-dasharray":!0,"stroke-width":!0}),ie(t).forEach(V),this.h()},h(){T(t,"x1",r=e[0][0]),T(t,"y1",n=e[0][1]),T(t,"x2",a=e[1][0]),T(t,"y2",u=e[1][1]),T(t,"stroke",e[3]),T(t,"stroke-dasharray","10,10"),T(t,"stroke-width",e[2])},m(l,o){Ee(l,t,o)},p(l,[o]){o&1&&r!==(r=l[0][0])&&T(t,"x1",r),o&1&&n!==(n=l[0][1])&&T(t,"y1",n),o&2&&a!==(a=l[1][0])&&T(t,"x2",a),o&2&&u!==(u=l[1][1])&&T(t,"y2",u),o&8&&T(t,"stroke",l[3]),o&4&&T(t,"stroke-width",l[2])},i:Ie,o:Ie,d(l){l&&V(t)}}}function SE(e,t,r){let{p1:n=[100,100]}=t,{p2:a=[100,100]}=t,{stroke:u=2}=t,{color:l="rgba(46,67,101, 0.4)"}=t;return e.$$set=o=>{"p1"in o&&r(0,n=o.p1),"p2"in o&&r(1,a=o.p2),"stroke"in o&&r(2,u=o.stroke),"color"in o&&r(3,l=o.color)},[n,a,u,l]}class cp extends Rt{constructor(t){super(),Lt(this,t,SE,FE,Ut,{p1:0,p2:1,stroke:2,color:3})}}function BE(e){let t,r,n,a,u,l,o,h;return{c(){t=Ct("foreignObject"),r=se("div"),n=se("p"),a=Ze(e[2]),this.h()},l(p){t=Ft(p,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var f=ie(t);r=oe(f,"DIV",{class:!0});var d=ie(r);n=oe(d,"P",{});var c=ie(n);a=$e(c,e[2]),c.forEach(V),d.forEach(V),f.forEach(V),this.h()},h(){er(n,"color",e[3]),er(n,"user-select","none"),er(n,"margin","0"),er(n,"pointer-events","none"),er(n,"text-align",e[4]),er(n,"font-size",`${e[5]}px`),er(n,"font-family","sans-serif"),er(n,"font-style","italic"),T(r,"class","h-full flex flex-col justify-center"),T(t,"x",u=e[0][0]),T(t,"y",l=e[0][1]),T(t,"width",o=e[1][0]),T(t,"height",h=e[1][1])},m(p,f){Ee(p,t,f),Y(t,r),Y(r,n),Y(n,a)},p(p,[f]){f&4&&xn(a,p[2]),f&8&&er(n,"color",p[3]),f&16&&er(n,"text-align",p[4]),f&32&&er(n,"font-size",`${p[5]}px`),f&1&&u!==(u=p[0][0])&&T(t,"x",u),f&1&&l!==(l=p[0][1])&&T(t,"y",l),f&2&&o!==(o=p[1][0])&&T(t,"width",o),f&2&&h!==(h=p[1][1])&&T(t,"height",h)},i:Ie,o:Ie,d(p){p&&V(t)}}}function OE(e,t,r){let{xy:n=[100,100]}=t,{wh:a=[100,100]}=t,{text:u=""}=t,{color:l="rgba(96,117,151, 1)"}=t,{textAlign:o="center"}=t,{fontSize:h=12}=t;return e.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,a=p.wh),"text"in p&&r(2,u=p.text),"color"in p&&r(3,l=p.color),"textAlign"in p&&r(4,o=p.textAlign),"fontSize"in p&&r(5,h=p.fontSize)},[n,a,u,l,o,h]}class ks extends Rt{constructor(t){super(),Lt(this,t,OE,BE,Ut,{xy:0,wh:1,text:2,color:3,textAlign:4,fontSize:5})}}function ME(e){let t,r,n,a,u,l,o,h,p,f,d;return{c(){t=Ct("circle"),a=Ge(),u=Ct("foreignObject"),l=se("p"),o=Ze(e[4]),this.h()},l(c){t=Ft(c,"circle",{cx:!0,cy:!0,r:!0}),ie(t).forEach(V),a=Ke(c),u=Ft(c,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var g=ie(u);l=oe(g,"P",{style:!0,class:!0});var y=ie(l);o=$e(y,e[4]),y.forEach(V),g.forEach(V),this.h()},h(){T(t,"cx",r=e[0][0]),T(t,"cy",n=e[0][1]),T(t,"r",e[1]),er(t,"fill",e[3]),er(l,"color",e[2]),er(l,"user-select","none"),er(l,"margin","0"),T(l,"class","heavy svelte-6if1p2"),T(u,"x",h=e[0][0]-e[1]),T(u,"y",p=e[0][1]-e[1]),T(u,"width",f=e[1]*2),T(u,"height",d=e[1]*2)},m(c,g){Ee(c,t,g),Ee(c,a,g),Ee(c,u,g),Y(u,l),Y(l,o)},p(c,[g]){g&1&&r!==(r=c[0][0])&&T(t,"cx",r),g&1&&n!==(n=c[0][1])&&T(t,"cy",n),g&2&&T(t,"r",c[1]),g&8&&er(t,"fill",c[3]),g&16&&xn(o,c[4]),g&4&&er(l,"color",c[2]),g&3&&h!==(h=c[0][0]-c[1])&&T(u,"x",h),g&3&&p!==(p=c[0][1]-c[1])&&T(u,"y",p),g&2&&f!==(f=c[1]*2)&&T(u,"width",f),g&2&&d!==(d=c[1]*2)&&T(u,"height",d)},i:Ie,o:Ie,d(c){c&&V(t),c&&V(a),c&&V(u)}}}function PE(e,t,r){let{xy:n=[100,100]}=t,{radius:a=25}=t,{textColor:u="rgba(96,117,151, 1)"}=t,{bgColor:l="black"}=t,{weight:o=""}=t;return e.$$set=h=>{"xy"in h&&r(0,n=h.xy),"radius"in h&&r(1,a=h.radius),"textColor"in h&&r(2,u=h.textColor),"bgColor"in h&&r(3,l=h.bgColor),"weight"in h&&r(4,o=h.weight)},[n,a,u,l,o]}class xE extends Rt{constructor(t){super(),Lt(this,t,PE,ME,Ut,{xy:0,radius:1,textColor:2,bgColor:3,weight:4})}}function wi(e,t,r){const n=e[0]-t[0],a=e[1]-t[1],u=360+Math.atan2(a,n)*180/Math.PI,l=Math.sqrt(n*n+a*a);return[u%360,l/r]}function zn(e,t,r){const n=t[0]%360*Math.PI/180,a=[r*t[1]*Math.cos(n),r*t[1]*Math.sin(n)];return Kr(e,a)}function Gl(e,t,r){const n=e[0]-t[0],a=e[1]-t[1],u=Math.sqrt(n*n+a*a),l=r/u,o=t[0]+n*l,h=t[1]+a*l;return[o,h]}function TE(e,t,r){const n=e[0]-t[0],a=e[1]-t[1];return Math.sqrt(n*n+a*a)<r}function hp(e,t){const r=t%360*Math.PI/180;let n,a;const u=Math.cos(r),l=Math.sin(r);return n=(e[0]+5)*-1.2*u,a=(e[1]+5)*-1.2*l,n-=e[0],a-=e[1],[n,a]}function IE(e){return Math.round(e*100)}function Tr(e){return Math.round(Math.max(1-Math.pow(1-e,2),.25)*100)/100}function NE(e){const t=e.weightMode;let r="parsedWeight";switch(t){case At.Circle:r="circleWeight";break;case At.Bars:r="barWeight";break;case At.Embed:r="embedWeight";break;case At.Pie:r="pieWeight";break}return e.weightedPrompts?Math.max(...Object.values(e.weightedPrompts).map(n=>n[r])):0}function kE(e){const t=e.weightMode;let r="parsedWeight";switch(t){case At.Circle:r="circleWeight";break;case At.Bars:r="barWeight";break;case At.Embed:r="embedWeight";break;case At.Pie:r="pieWeight";break}return e.weightedPrompts?Object.values(e.weightedPrompts).reduce((n,a)=>n+a[r],0):0}function n0(e,t){const r=e.weightMode;let n="parsedWeight";switch(r){case At.Circle:n="circleWeight";break;case At.Bars:n="barWeight";break;case At.Embed:n="embedWeight";break;case At.Pie:n="pieWeight";break}return e.weightedPrompts[t]?e.weightedPrompts[t][n]/NE(e):0}function si(e,t){const r=e.weightMode;let n="parsedWeight";switch(r){case"circle":n="circleWeight";break;case"bars":n="barWeight";break;case"embed":n="embedWeight";break;case"pie":n="pieWeight";break}if(!e.weightedPrompts[t])return 0;const a=e.weightedPrompts[t][n];return IE((a||0)/kE(e))}function RE(e,t,r){const u=r*.6,l=Math.floor(e/u);return Math.ceil(t/l)*r*1.2}function nn(e,t,r){const n=RE(e,t,r)+10;return[e,n]}function Ju(e,t){const r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function Rs(e){return mn(e,.5)}function Wi(e){const t=e.currentTarget;if(!t)throw new Error("No SVG element found");var r=t.createSVGPoint();r.x=e.clientX,r.y=e.clientY;const n=t.getScreenCTM();if(!n)throw new Error("No DOM Matrix found");const a=r.matrixTransform(n.inverse());return[a.x,a.y]}function i0(e,t,r){const n=e.slice();return n[18]=t[r][0],n[19]=t[r][1],n}function a0(e){let t,r,n=Object.entries(e[5].weightedPrompts).length>0,a,u;t=new fp({props:{xy:e[0],radius:e[1]}});let l=Object.entries(e[5].weightedPrompts),o=[];for(let f=0;f<l.length;f+=1)o[f]=u0(i0(e,l,f));const h=f=>Ue(o[f],1,1,()=>{o[f]=null});let p=n&&s0(e);return{c(){pt(t.$$.fragment);for(let f=0;f<o.length;f+=1)o[f].c();r=Yt(),p&&p.c(),a=Yt()},l(f){vt(t.$$.fragment,f);for(let d=0;d<o.length;d+=1)o[d].l(f);r=Yt(),p&&p.l(f),a=Yt()},m(f,d){gt(t,f,d);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(f,d);Ee(f,r,d),p&&p.m(f,d),Ee(f,a,d),u=!0},p(f,d){const c={};if(d&1&&(c.xy=f[0]),d&2&&(c.radius=f[1]),t.$set(c),d&895){l=Object.entries(f[5].weightedPrompts);let g;for(g=0;g<l.length;g+=1){const y=i0(f,l,g);o[g]?(o[g].p(y,d),xe(o[g],1)):(o[g]=u0(y),o[g].c(),xe(o[g],1),o[g].m(r.parentNode,r))}for(Dn(),g=l.length;g<o.length;g+=1)h(g);bn()}d&32&&(n=Object.entries(f[5].weightedPrompts).length>0),n?p?(p.p(f,d),d&32&&xe(p,1)):(p=s0(f),p.c(),xe(p,1),p.m(a.parentNode,a)):p&&(Dn(),Ue(p,1,1,()=>{p=null}),bn())},i(f){if(!u){xe(t.$$.fragment,f);for(let d=0;d<l.length;d+=1)xe(o[d]);xe(p),u=!0}},o(f){Ue(t.$$.fragment,f),o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)Ue(o[d]);Ue(p),u=!1},d(f){mt(t,f),af(o,f),f&&V(r),p&&p.d(f),f&&V(a)}}}function u0(e){let t,r,n,a,u;t=new cp({props:{p1:zn(e[0],e[5].circleMarker,e[1]),p2:e[6][e[18]].xy}});function l(){return e[12](e[18])}return r=new iu({props:{xy:e[6][e[18]].xy,radius:e[2],color:"rgba(76,97,141, 1)",handleMouseDown:l}}),n=new ks({props:{xy:e[9](e[6][e[18]].xy,nn(e[3],e[19].text.length,e[4])),color:`rgba(255,255,255,${Tr(e[6][e[18]].unitWeight)}`,wh:nn(e[3],e[19].text.length,e[4]),fontSize:e[4],text:e[19].text}}),a=new xE({props:{xy:mn(Kr(zn(e[0],e[5].circleMarker,e[1]),e[6][e[18]].xy),.5),weight:si(e[5],e[18]),radius:15,textColor:`rgba(255,255,255,${Tr(e[6][e[18]].unitWeight)}`,bgColor:"rgb(8, 11, 22)"}}),{c(){pt(t.$$.fragment),pt(r.$$.fragment),pt(n.$$.fragment),pt(a.$$.fragment)},l(o){vt(t.$$.fragment,o),vt(r.$$.fragment,o),vt(n.$$.fragment,o),vt(a.$$.fragment,o)},m(o,h){gt(t,o,h),gt(r,o,h),gt(n,o,h),gt(a,o,h),u=!0},p(o,h){e=o;const p={};h&35&&(p.p1=zn(e[0],e[5].circleMarker,e[1])),h&96&&(p.p2=e[6][e[18]].xy),t.$set(p);const f={};h&96&&(f.xy=e[6][e[18]].xy),h&4&&(f.radius=e[2]),h&32&&(f.handleMouseDown=l),r.$set(f);const d={};h&120&&(d.xy=e[9](e[6][e[18]].xy,nn(e[3],e[19].text.length,e[4]))),h&96&&(d.color=`rgba(255,255,255,${Tr(e[6][e[18]].unitWeight)}`),h&56&&(d.wh=nn(e[3],e[19].text.length,e[4])),h&16&&(d.fontSize=e[4]),h&32&&(d.text=e[19].text),n.$set(d);const c={};h&99&&(c.xy=mn(Kr(zn(e[0],e[5].circleMarker,e[1]),e[6][e[18]].xy),.5)),h&32&&(c.weight=si(e[5],e[18])),h&96&&(c.textColor=`rgba(255,255,255,${Tr(e[6][e[18]].unitWeight)}`),a.$set(c)},i(o){u||(xe(t.$$.fragment,o),xe(r.$$.fragment,o),xe(n.$$.fragment,o),xe(a.$$.fragment,o),u=!0)},o(o){Ue(t.$$.fragment,o),Ue(r.$$.fragment,o),Ue(n.$$.fragment,o),Ue(a.$$.fragment,o),u=!1},d(o){mt(t,o),mt(r,o),mt(n,o),mt(a,o)}}}function s0(e){let t,r;return t=new iu({props:{xy:zn(e[0],e[5].circleMarker,e[1]),radius:10,color:"rgba(136,157,191, 1)",handleMouseDown:e[13]}}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,a){gt(t,n,a),r=!0},p(n,a){const u={};a&35&&(u.xy=zn(n[0],n[5].circleMarker,n[1])),t.$set(u)},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function LE(e){let t,r,n,a,u=e[6]&&e[5].weightedPrompts&&a0(e);return{c(){t=Ct("svg"),u&&u.c(),this.h()},l(l){t=Ft(l,"svg",{id:!0,class:!0});var o=ie(t);u&&u.l(o),o.forEach(V),this.h()},h(){T(t,"id","svg"),T(t,"class","w-full h-full")},m(l,o){Ee(l,t,o),u&&u.m(t,null),r=!0,n||(a=[ke(t,"mousemove",e[10]),ke(t,"mouseup",e[7]),ke(t,"dblclick",e[11])],n=!0)},p(l,[o]){l[6]&&l[5].weightedPrompts?u?(u.p(l,o),o&96&&xe(u,1)):(u=a0(l),u.c(),xe(u,1),u.m(t,null)):u&&(Dn(),Ue(u,1,1,()=>{u=null}),bn())},i(l){r||(xe(u),r=!0)},o(l){Ue(u),r=!1},d(l){l&&V(t),u&&u.d(),n=!1,Vr(a)}}}function o0(e,t){return e?Object.entries(e).reduce((r,[n,a],u)=>{const l=r[n]||u*(360/Object.keys(e).length)-90;return r[n]=l,r},t):null}function UE(e,t,r){let n,a;Ot(e,An,S=>r(5,a=S));let{center:u=[450,450]}=t,{radius:l=250}=t,{pointRadius:o=10}=t,{textWidth:h=150}=t,{fontSize:p=13}=t,f=[0,0],d=null;function c(S){d=null}function g(S){d=S}function y(S,B){let P=wi(S,u,l)[0]-180;P<0&&(P+=360);const I=hp(Rs(B),P);return Kr(S,I)}function m(S){const B=TE(S,u,l)?wi(S,u,l):wi(Gl(S,u,l),u,l);r(6,n=C(a.weightedPrompts,u,l,a.circleWeightScaling,a.circleExponentialScaling,B,a.circleAngles))}function _(S){if(f=Wi(S),d==="main")m(f);else if(d){const B={...a.weightedPrompts[d]},P=Gl(f,u,l),I=wi(P,u,l)[0],N={...a.circleAngles};N[B.id]=I;const G={...a.weightedPrompts};G[d]=B,r(6,n=C(G,u,l,a.circleWeightScaling,a.circleExponentialScaling,a.circleMarker,N))}}function b(S){f=Wi(S),m(f)}function C(S,B,P,I,N,G,L){if(!S||!B||!P||!I||!G)return null;let q=Object.entries(S).reduce((z,[H,re])=>(z[H]={xy:zn(B,[L[H],1],P)},z),{});q=Object.entries(q).reduce((z,[H,re])=>(z[H]={...z[H],distance:Ju(re.xy,zn(B,G,P))},z),q);const Z=Object.values(q).reduce((z,H)=>z+H.distance,0);q=Object.entries(q).reduce((z,[H,re])=>(z[H]={...z[H],unitDistance:Math.round(re.distance/Z*100)/100},z),q),q=Object.entries(q).reduce((z,[H,re])=>(z[H]={...z[H],invertedUnitDistance:Math.round((1-re.unitDistance)*100)/100},z),q),q=Object.entries(q).reduce((z,[H,re])=>(N?z[H]={...z[H],unitWeight:Math.round(Math.pow(1-re.distance/(2*P),I)*100)/100}:z[H]={...z[H],unitWeight:Math.round((1-re.distance/(2*P))*100)/100},z),q);const W={...S};return Object.entries(q).forEach(([z,H])=>{W[z].circleWeight=H.unitWeight}),Nt.update({...a,circleMarker:G,weightedPrompts:W,circleAngles:L}),q}const w=S=>g(S),O=()=>g("main");return e.$$set=S=>{"center"in S&&r(0,u=S.center),"radius"in S&&r(1,l=S.radius),"pointRadius"in S&&r(2,o=S.pointRadius),"textWidth"in S&&r(3,h=S.textWidth),"fontSize"in S&&r(4,p=S.fontSize)},e.$$.update=()=>{e.$$.dirty&32&&Object.keys(a.circleAngles).length!==Object.keys(a.weightedPrompts).length&&Nt.update({...a,circleAngles:o0(a.weightedPrompts,{})}),e.$$.dirty&35&&r(6,n=C(a.weightedPrompts,u,l,a.circleWeightScaling,a.circleExponentialScaling,a.circleMarker,a.circleAngles||o0(a.weightedPrompts,{})))},[u,l,o,h,p,a,n,c,g,y,_,b,w,O]}class VE extends Rt{constructor(t){super(),Lt(this,t,UE,LE,Ut,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function l0(e){let t,r,n,a,u,l,o,h;return{c(){t=se("div"),r=se("label"),n=se("span"),a=Ze("Scaling Power"),u=Ge(),l=se("input"),this.h()},l(p){t=oe(p,"DIV",{class:!0});var f=ie(t);r=oe(f,"LABEL",{class:!0});var d=ie(r);n=oe(d,"SPAN",{class:!0});var c=ie(n);a=$e(c,"Scaling Power"),c.forEach(V),d.forEach(V),u=Ke(f),l=oe(f,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),f.forEach(V),this.h()},h(){T(n,"class","label-text"),T(r,"class","label"),T(l,"type","range"),T(l,"min","0.5"),T(l,"max","3"),T(l,"step","0.1"),T(l,"class","range"),T(t,"class","w-full px-2")},m(p,f){Ee(p,t,f),Y(t,r),Y(r,n),Y(n,a),Y(t,u),Y(t,l),Ei(l,e[0]),o||(h=[ke(l,"change",e[6]),ke(l,"input",e[6])],o=!0)},p(p,f){f&1&&Ei(l,p[0])},d(p){p&&V(t),o=!1,Vr(h)}}}function jE(e){let t,r,n,a,u,l,o,h,p,f,d,c,g,y,m;r=new VE({props:{center:[Math.round(e[2]/2),Math.round(e[3]/2)],radius:Math.round(Math.min(e[2],e[3])/2)-150}});let _=e[1]&&l0(e);return{c(){t=se("div"),pt(r.$$.fragment),a=Ge(),u=se("div"),l=se("div"),o=se("label"),h=se("span"),p=Ze("Exponential Scaling"),f=Ge(),d=se("input"),c=Ge(),_&&_.c(),this.h()},l(b){t=oe(b,"DIV",{class:!0});var C=ie(t);vt(r.$$.fragment,C),C.forEach(V),a=Ke(b),u=oe(b,"DIV",{class:!0});var w=ie(u);l=oe(w,"DIV",{class:!0});var O=ie(l);o=oe(O,"LABEL",{class:!0});var S=ie(o);h=oe(S,"SPAN",{class:!0});var B=ie(h);p=$e(B,"Exponential Scaling"),B.forEach(V),S.forEach(V),f=Ke(O),d=oe(O,"INPUT",{type:!0,class:!0}),O.forEach(V),c=Ke(w),_&&_.l(w),w.forEach(V),this.h()},h(){T(t,"class","w-full h-full"),Fs(()=>e[4].call(t)),T(h,"class","label-text"),T(o,"class","label"),T(d,"type","checkbox"),T(d,"class","toggle"),T(l,"class","w-52 px-2"),T(u,"class","px-2 py-4 pb-0 flex")},m(b,C){Ee(b,t,C),gt(r,t,null),n=Ss(t,e[4].bind(t)),Ee(b,a,C),Ee(b,u,C),Y(u,l),Y(l,o),Y(o,h),Y(h,p),Y(l,f),Y(l,d),d.checked=e[1],Y(u,c),_&&_.m(u,null),g=!0,y||(m=ke(d,"change",e[5]),y=!0)},p(b,[C]){const w={};C&12&&(w.center=[Math.round(b[2]/2),Math.round(b[3]/2)]),C&12&&(w.radius=Math.round(Math.min(b[2],b[3])/2)-150),r.$set(w),C&2&&(d.checked=b[1]),b[1]?_?_.p(b,C):(_=l0(b),_.c(),_.m(u,null)):_&&(_.d(1),_=null)},i(b){g||(xe(r.$$.fragment,b),g=!0)},o(b){Ue(r.$$.fragment,b),g=!1},d(b){b&&V(t),mt(r),n(),b&&V(a),b&&V(u),_&&_.d(),y=!1,m()}}}function qE(e,t,r){let n;Ot(e,An,d=>r(7,n=d));let a,u,l=n.circleWeightScaling||2,o=Td(n.circleExponentialScaling)?!0:n.circleExponentialScaling;function h(){a=this.clientWidth,u=this.clientHeight,r(2,a),r(3,u)}function p(){o=this.checked,r(1,o)}function f(){l=Kb(this.value),r(0,l)}return e.$$.update=()=>{e.$$.dirty&3&&Nt.update({...Nt.get(),circleExponentialScaling:o,circleWeightScaling:l})},[l,o,a,u,h,p,f]}class zE extends Rt{constructor(t){super(),Lt(this,t,qE,jE,Ut,{})}}function WE(e){let t,r,n,a,u,l,o;return{c(){t=Ct("rect"),this.h()},l(h){t=Ft(h,"rect",{x:!0,y:!0,width:!0,height:!0}),ie(t).forEach(V),this.h()},h(){T(t,"x",r=e[0][0]),T(t,"y",n=e[0][1]),T(t,"width",a=Math.max(e[1][0],0)),T(t,"height",u=Math.max(e[1][1],0)),er(t,"fill",e[2])},m(h,p){Ee(h,t,p),l||(o=[ke(t,"mouseover",function(){el(e[4])&&e[4].apply(this,arguments)}),ke(t,"mouseout",function(){el(e[5])&&e[5].apply(this,arguments)}),ke(t,"mousedown",function(){el(e[3])&&e[3].apply(this,arguments)})],l=!0)},p(h,[p]){e=h,p&1&&r!==(r=e[0][0])&&T(t,"x",r),p&1&&n!==(n=e[0][1])&&T(t,"y",n),p&2&&a!==(a=Math.max(e[1][0],0))&&T(t,"width",a),p&2&&u!==(u=Math.max(e[1][1],0))&&T(t,"height",u),p&4&&er(t,"fill",e[2])},i:Ie,o:Ie,d(h){h&&V(t),l=!1,Vr(o)}}}function HE(e,t,r){let{xy:n=[500,500]}=t,{wh:a=[100,100]}=t,{color:u="rgba(46,67,101, 0.4)"}=t,{handleMouseDown:l=p=>{}}=t,{handleMouseOver:o=p=>{}}=t,{handleMouseOut:h=p=>{}}=t;return e.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,a=p.wh),"color"in p&&r(2,u=p.color),"handleMouseDown"in p&&r(3,l=p.handleMouseDown),"handleMouseOver"in p&&r(4,o=p.handleMouseOver),"handleMouseOut"in p&&r(5,h=p.handleMouseOut)},[n,a,u,l,o,h]}class ul extends Rt{constructor(t){super(),Lt(this,t,HE,WE,Ut,{xy:0,wh:1,color:2,handleMouseDown:3,handleMouseOver:4,handleMouseOut:5})}}function f0(e,t,r){const n=e.slice();return n[51]=t[r][0],n[52]=t[r][1],n[53]=t[r][2],n}function c0(e,t){let r,n,a,u,l,o;n=new ks({props:{xy:[t[3][0]+t[0],t[3][1]+t[52]*t[4]+t[52]],color:`rgba(255,255,255,${Tr(t[53].barWeight/t[12]||0)})`,wh:t[5][t[51]],text:t[53].text,textAlign:"right",fontSize:t[1]}});function h(...c){return t[39](t[51],...c)}a=new ul({props:{color:t[13](0),handleMouseOver:h,handleMouseOut:t[40],xy:[t[10],t[3][1]+t[52]*t[4]+t[52]],wh:[t[11],t[4]-2]}});function p(...c){return t[41](t[51],...c)}u=new ul({props:{color:t[8]===t[51]||t[7]===t[51]||t[9]===t[51]?t[13](Tr((t[53].barWeight||0)/t[12]+.15)):t[13](Tr(t[53].barWeight||0)),handleMouseOver:p,handleMouseOut:t[42],xy:[t[10],t[3][1]+t[52]*t[4]+t[52]],wh:[(t[53].barWeight||0)*t[11],t[4]-2]}});function f(...c){return t[43](t[51],...c)}function d(...c){return t[45](t[51],...c)}return l=new ul({props:{color:t[9]===t[51]?t[15]:t[14],handleMouseOver:f,handleMouseOut:t[44],handleMouseDown:d,xy:[t[10]+(t[53].barWeight||0)*t[11],t[3][1]+t[52]*t[4]+t[52]],wh:[t[2],t[4]-2]}}),{key:e,first:null,c(){r=Yt(),pt(n.$$.fragment),pt(a.$$.fragment),pt(u.$$.fragment),pt(l.$$.fragment),this.h()},l(c){r=Yt(),vt(n.$$.fragment,c),vt(a.$$.fragment,c),vt(u.$$.fragment,c),vt(l.$$.fragment,c),this.h()},h(){this.first=r},m(c,g){Ee(c,r,g),gt(n,c,g),gt(a,c,g),gt(u,c,g),gt(l,c,g),o=!0},p(c,g){t=c;const y={};g[0]&89&&(y.xy=[t[3][0]+t[0],t[3][1]+t[52]*t[4]+t[52]]),g[0]&4160&&(y.color=`rgba(255,255,255,${Tr(t[53].barWeight/t[12]||0)})`),g[0]&96&&(y.wh=t[5][t[51]]),g[0]&64&&(y.text=t[53].text),g[0]&2&&(y.fontSize=t[1]),n.$set(y);const m={};g[0]&64&&(m.handleMouseOver=h),g[0]&1112&&(m.xy=[t[10],t[3][1]+t[52]*t[4]+t[52]]),g[0]&2064&&(m.wh=[t[11],t[4]-2]),a.$set(m);const _={};g[0]&5056&&(_.color=t[8]===t[51]||t[7]===t[51]||t[9]===t[51]?t[13](Tr((t[53].barWeight||0)/t[12]+.15)):t[13](Tr(t[53].barWeight||0))),g[0]&64&&(_.handleMouseOver=p),g[0]&1112&&(_.xy=[t[10],t[3][1]+t[52]*t[4]+t[52]]),g[0]&2128&&(_.wh=[(t[53].barWeight||0)*t[11],t[4]-2]),u.$set(_);const b={};g[0]&576&&(b.color=t[9]===t[51]?t[15]:t[14]),g[0]&64&&(b.handleMouseOver=f),g[0]&64&&(b.handleMouseDown=d),g[0]&3160&&(b.xy=[t[10]+(t[53].barWeight||0)*t[11],t[3][1]+t[52]*t[4]+t[52]]),g[0]&20&&(b.wh=[t[2],t[4]-2]),l.$set(b)},i(c){o||(xe(n.$$.fragment,c),xe(a.$$.fragment,c),xe(u.$$.fragment,c),xe(l.$$.fragment,c),o=!0)},o(c){Ue(n.$$.fragment,c),Ue(a.$$.fragment,c),Ue(u.$$.fragment,c),Ue(l.$$.fragment,c),o=!1},d(c){c&&V(r),mt(n,c),mt(a,c),mt(u,c),mt(l,c)}}}function GE(e){let t,r=[],n=new Map,a,u,l,o=e[6];const h=p=>p[51];for(let p=0;p<o.length;p+=1){let f=f0(e,o,p),d=h(f);n.set(d,r[p]=c0(d,f))}return{c(){t=Ct("svg");for(let p=0;p<r.length;p+=1)r[p].c();this.h()},l(p){t=Ft(p,"svg",{id:!0,class:!0});var f=ie(t);for(let d=0;d<r.length;d+=1)r[d].l(f);f.forEach(V),this.h()},h(){T(t,"id","svg"),T(t,"class","w-full h-full")},m(p,f){Ee(p,t,f);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(t,null);a=!0,u||(l=[ke(t,"mousemove",e[25]),ke(t,"mouseup",e[24]),ke(t,"dblclick",e[23])],u=!0)},p(p,f){f[0]&8388607&&(o=p[6],Dn(),r=Bi(r,f,h,1,p,o,n,t,Bd,c0,null,f0),bn())},i(p){if(!a){for(let f=0;f<o.length;f+=1)xe(r[f]);a=!0}},o(p){for(let f=0;f<r.length;f+=1)Ue(r[f]);a=!1},d(p){p&&V(t);for(let f=0;f<r.length;f+=1)r[f].d();u=!1,Vr(l)}}}function KE(e,t,r){let n,a,u,l,o,h,p,f,d,c,g,y,m;Ot(e,An,Ae=>r(38,m=Ae));let{center:_=[0,0]}=t,{dimensions:b=[100,100]}=t,{maxWidth:C=1e3}=t,{pointRadius:w=10}=t,{textWidth:O=250}=t,{horizontalPad:S=20}=t,{verticalPad:B=2}=t,{textBarPad:P=10}=t,{fontSize:I=13}=t,{handleWidth:N=20}=t,G=Ae=>`rgba(46,67,101, ${Ae})`,L=Ae=>`rgba(76,97,131, ${Ae})`,q=null,Z=null,W=null,z=L(.3),H=L(.8),re=null,ee=null,Q=null;function le(Ae){r(8,Z=Ae)}function me(Ae){r(7,q=Ae)}function Fe(Ae){r(9,W=Ae)}function be(){r(8,Z=null)}function Ne(){r(7,q=null)}function je(){r(9,W=null)}function Me(Ae){re=Ae}function it(Ae){let Se=re||Z||W||q;if(!Se)return;const yt=Wi(Ae);Te(Se,yt)}function qe(){re=null,ee&&clearInterval(ee),ee=null,Q=null}function Te(Ae,Se){let Tt=Math.min(c,Math.max(0,Se[0]-g))/c,Wt={...m.weightedPrompts},R={...Wt[Ae]};R.barWeight=Tt,Wt[Ae]=R,Nt.update({...m,weightedPrompts:Wt})}function Re(Ae){let Se=re;if(!Se)return;const yt=Wi(Ae);if(Te(Se,yt),re){let Tt=g+c+N,Wt=g;yt[0]>Tt&&!ee?(Q=Date.now(),ee=setInterval(()=>{if(!Q||Date.now()-Q<1e3)return;let R={...m.weightedPrompts};const j=Object.entries(R).reduce(($,[fe,ne])=>{const he=parseInt(fe);return he!==re?$[he]={...ne,barWeight:Math.max(0,(ne.barWeight||0)-.01)}:$[he]={...ne,barWeight:Math.min(1,(ne.barWeight||0)+.01)},$},{});Nt.update({...m,weightedPrompts:j})},100)):yt[0]<Wt&&!ee?(Q=Date.now(),ee=setInterval(()=>{if(!Q||Date.now()-Q<1e3)return;let R={...m.weightedPrompts};const j=Object.entries(R).reduce(($,[fe,ne])=>{const he=parseInt(fe);return he!==re?$[he]={...ne,barWeight:Math.min(1,(ne.barWeight||0)+.01)}:$[he]={...ne,barWeight:Math.max(0,(ne.barWeight||0)-.01)},$},{});Nt.update({...m,weightedPrompts:j})},100)):yt[0]<Tt&&yt[0]>Wt&&ee&&(clearInterval(ee),ee=null,Q=null)}}const lt=(Ae,Se)=>me(Ae),et=Ae=>Ne(),at=(Ae,Se)=>le(Ae),tt=Ae=>be(),rt=(Ae,Se)=>Fe(Ae),ze=Ae=>je(),We=(Ae,Se)=>Me(Ae);return e.$$set=Ae=>{"center"in Ae&&r(26,_=Ae.center),"dimensions"in Ae&&r(27,b=Ae.dimensions),"maxWidth"in Ae&&r(28,C=Ae.maxWidth),"pointRadius"in Ae&&r(29,w=Ae.pointRadius),"textWidth"in Ae&&r(30,O=Ae.textWidth),"horizontalPad"in Ae&&r(0,S=Ae.horizontalPad),"verticalPad"in Ae&&r(31,B=Ae.verticalPad),"textBarPad"in Ae&&r(32,P=Ae.textBarPad),"fontSize"in Ae&&r(1,I=Ae.fontSize),"handleWidth"in Ae&&r(2,N=Ae.handleWidth)},e.$$.update=()=>{e.$$.dirty[1]&128&&r(6,n=Object.entries(m.weightedPrompts).map(([Ae,Se],yt)=>[parseInt(Ae),yt,Se])),e.$$.dirty[1]&128&&r(36,a=Object.keys(m.weightedPrompts).length),e.$$.dirty[0]&134217728&&r(35,u=[b[0]-50,b[1]-50]),e.$$.dirty[0]&1073741890&&r(5,l=n.reduce((Ae,[Se,yt,Tt])=>{const[Wt,R]=nn(O,Tt.text.length,I);return Ae[Se]=[Wt,R],Ae},{})),e.$$.dirty[0]&32&&r(37,o=Math.max(...Object.values(l).map(([Ae,Se])=>Se))),e.$$.dirty[1]&112&&r(4,h=Math.min(u[1]/a,o)),e.$$.dirty[0]&16|e.$$.dirty[1]&33&&r(34,p=h*a+B*Math.max(a-1,0)),e.$$.dirty[0]&268435456|e.$$.dirty[1]&16&&r(33,f=Math.min(u[0],C)),e.$$.dirty[0]&67108864|e.$$.dirty[1]&12&&r(3,d=[_[0]-f/2,_[1]-p/2]),e.$$.dirty[0]&1073741829|e.$$.dirty[1]&6&&r(11,c=f-P-O-2*S-N),e.$$.dirty[0]&1073741833|e.$$.dirty[1]&2&&r(10,g=d[0]+P+O+S),e.$$.dirty[1]&128&&r(12,y=Math.max(...Object.values(m.weightedPrompts).map(Ae=>Ae.barWeight||0)))},[S,I,N,d,h,l,n,q,Z,W,g,c,y,G,z,H,le,me,Fe,be,Ne,je,Me,it,qe,Re,_,b,C,w,O,B,P,f,p,u,a,o,m,lt,et,at,tt,rt,ze,We]}class YE extends Rt{constructor(t){super(),Lt(this,t,KE,GE,Ut,{center:26,dimensions:27,maxWidth:28,pointRadius:29,textWidth:30,horizontalPad:0,verticalPad:31,textBarPad:32,fontSize:1,handleWidth:2},null,[-1,-1])}}function ZE(e){let t,r,n,a;return r=new YE({props:{dimensions:e[2],center:e[3]}}),{c(){t=se("div"),pt(r.$$.fragment),this.h()},l(u){t=oe(u,"DIV",{class:!0});var l=ie(t);vt(r.$$.fragment,l),l.forEach(V),this.h()},h(){T(t,"class","w-full h-full"),Fs(()=>e[4].call(t))},m(u,l){Ee(u,t,l),gt(r,t,null),n=Ss(t,e[4].bind(t)),a=!0},p(u,[l]){const o={};l&4&&(o.dimensions=u[2]),l&8&&(o.center=u[3]),r.$set(o)},i(u){a||(xe(r.$$.fragment,u),a=!0)},o(u){Ue(r.$$.fragment,u),a=!1},d(u){u&&V(t),mt(r),n()}}}function $E(e,t,r){let n,a,u,l;function o(){u=this.clientWidth,l=this.clientHeight,r(0,u),r(1,l)}return e.$$.update=()=>{e.$$.dirty&3&&r(2,n=[u||0,l||0]),e.$$.dirty&4&&r(3,a=Rs(n))},[u,l,n,a,o]}class XE extends Rt{constructor(t){super(),Lt(this,t,$E,ZE,Ut,{})}}function JE(e){let t,r,n,a,u;return{c(){t=Ct("line"),this.h()},l(l){t=Ft(l,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),ie(t).forEach(V),this.h()},h(){T(t,"x1",r=e[0][0]),T(t,"y1",n=e[0][1]),T(t,"x2",a=e[1][0]),T(t,"y2",u=e[1][1]),T(t,"stroke",e[3]),T(t,"stroke-width",e[2])},m(l,o){Ee(l,t,o)},p(l,[o]){o&1&&r!==(r=l[0][0])&&T(t,"x1",r),o&1&&n!==(n=l[0][1])&&T(t,"y1",n),o&2&&a!==(a=l[1][0])&&T(t,"x2",a),o&2&&u!==(u=l[1][1])&&T(t,"y2",u),o&8&&T(t,"stroke",l[3]),o&4&&T(t,"stroke-width",l[2])},i:Ie,o:Ie,d(l){l&&V(t)}}}function QE(e,t,r){let{p1:n=[100,100]}=t,{p2:a=[100,100]}=t,{stroke:u=2}=t,{color:l="rgba(46,67,101, 0.4)"}=t;return e.$$set=o=>{"p1"in o&&r(0,n=o.p1),"p2"in o&&r(1,a=o.p2),"stroke"in o&&r(2,u=o.stroke),"color"in o&&r(3,l=o.color)},[n,a,u,l]}class e2 extends Rt{constructor(t){super(),Lt(this,t,QE,JE,Ut,{p1:0,p2:1,stroke:2,color:3})}}function h0(e,t,r){const n=e.slice();return n[25]=t[r][0],n[26]=t[r][1],n}function d0(e){let t,r,n;t=new fp({props:{xy:e[0],radius:e[1]}});let a=Object.entries(e[5].weightedPrompts),u=[];for(let o=0;o<a.length;o+=1)u[o]=p0(h0(e,a,o));const l=o=>Ue(u[o],1,1,()=>{u[o]=null});return{c(){pt(t.$$.fragment);for(let o=0;o<u.length;o+=1)u[o].c();r=Yt()},l(o){vt(t.$$.fragment,o);for(let h=0;h<u.length;h+=1)u[h].l(o);r=Yt()},m(o,h){gt(t,o,h);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(o,h);Ee(o,r,h),n=!0},p(o,h){const p={};if(h&1&&(p.xy=o[0]),h&2&&(p.radius=o[1]),t.$set(p),h&6015){a=Object.entries(o[5].weightedPrompts);let f;for(f=0;f<a.length;f+=1){const d=h0(o,a,f);u[f]?(u[f].p(d,h),xe(u[f],1)):(u[f]=p0(d),u[f].c(),xe(u[f],1),u[f].m(r.parentNode,r))}for(Dn(),f=a.length;f<u.length;f+=1)l(f);bn()}},i(o){if(!n){xe(t.$$.fragment,o);for(let h=0;h<a.length;h+=1)xe(u[h]);n=!0}},o(o){Ue(t.$$.fragment,o),u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)Ue(u[h]);n=!1},d(o){mt(t,o),af(u,o),o&&V(r)}}}function p0(e){let t,r,n,a,u,l,o,h,p;t=new e2({props:{p1:e[0],p2:e[6][e[25]].xy}});function f(...g){return e[13](e[25],...g)}function d(...g){return e[14](e[25],...g)}function c(){return e[15](e[25])}return u=new iu({props:{xy:e[6][e[25]].xy,radius:e[2],color:"rgba(76,97,141, 1)",handleMouseDown:c}}),l=new ks({props:{xy:e[9](e[6][e[25]].textXY,nn(e[3],e[26].text.length,e[4])),color:`rgba(255,255,255,${Tr(e[6][e[25]].unitWeight)}`,wh:nn(e[3],e[26].text.length,e[4]),fontSize:e[4],text:e[26].text}}),{c(){pt(t.$$.fragment),r=Ct("path"),pt(u.$$.fragment),pt(l.$$.fragment),this.h()},l(g){vt(t.$$.fragment,g),r=Ft(g,"path",{d:!0,fill:!0}),ie(r).forEach(V),vt(u.$$.fragment,g),vt(l.$$.fragment,g),this.h()},h(){T(r,"d",n=g0(e[0],e[1],e[6][e[25]].angle,e[6][e[25]].angle+e[6][e[25]].angleDiff)),T(r,"fill",a=`rgba(26,47,91,${Tr(e[6][e[25]].unitWeight)/4}`)},m(g,y){gt(t,g,y),Ee(g,r,y),gt(u,g,y),gt(l,g,y),o=!0,h||(p=[ke(r,"mousewheel",f),ke(r,"mousedown",d)],h=!0)},p(g,y){e=g;const m={};y&1&&(m.p1=e[0]),y&96&&(m.p2=e[6][e[25]].xy),t.$set(m),(!o||y&99&&n!==(n=g0(e[0],e[1],e[6][e[25]].angle,e[6][e[25]].angle+e[6][e[25]].angleDiff)))&&T(r,"d",n),(!o||y&96&&a!==(a=`rgba(26,47,91,${Tr(e[6][e[25]].unitWeight)/4}`))&&T(r,"fill",a);const _={};y&96&&(_.xy=e[6][e[25]].xy),y&4&&(_.radius=e[2]),y&32&&(_.handleMouseDown=c),u.$set(_);const b={};y&120&&(b.xy=e[9](e[6][e[25]].textXY,nn(e[3],e[26].text.length,e[4]))),y&96&&(b.color=`rgba(255,255,255,${Tr(e[6][e[25]].unitWeight)}`),y&56&&(b.wh=nn(e[3],e[26].text.length,e[4])),y&16&&(b.fontSize=e[4]),y&32&&(b.text=e[26].text),l.$set(b)},i(g){o||(xe(t.$$.fragment,g),xe(u.$$.fragment,g),xe(l.$$.fragment,g),o=!0)},o(g){Ue(t.$$.fragment,g),Ue(u.$$.fragment,g),Ue(l.$$.fragment,g),o=!1},d(g){mt(t,g),g&&V(r),mt(u,g),mt(l,g),h=!1,Vr(p)}}}function t2(e){let t,r,n,a,u=e[6]&&e[5].weightedPrompts&&d0(e);return{c(){t=Ct("svg"),u&&u.c(),this.h()},l(l){t=Ft(l,"svg",{id:!0,class:!0});var o=ie(t);u&&u.l(o),o.forEach(V),this.h()},h(){T(t,"id","svg"),T(t,"class","w-full h-full")},m(l,o){Ee(l,t,o),u&&u.m(t,null),r=!0,n||(a=[ke(t,"mousemove",e[11]),ke(t,"mouseup",e[7])],n=!0)},p(l,[o]){l[6]&&l[5].weightedPrompts?u?(u.p(l,o),o&96&&xe(u,1)):(u=d0(l),u.c(),xe(u,1),u.m(t,null)):u&&(Dn(),Ue(u,1,1,()=>{u=null}),bn())},i(l){r||(xe(u),r=!0)},o(l){Ue(u),r=!1},d(l){l&&V(t),u&&u.d(),n=!1,Vr(a)}}}function v0(e,t){return e?Object.entries(e).reduce((r,[n,a],u)=>{const l=r[n]||u*(360/Object.keys(e).length)-90;return r[n]=Hr(l),r},t):null}function r2(e,t){if(e.length!==t.length)return!1;const r=e.length;let n=-1;for(let a=0;a<r;a++)if(t[a]===e[0]){n=a;break}if(n===-1)return!1;for(let a=0;a<r;a++)if(e[a]!==t[(a+n)%r])return!1;return!0}function Hr(e){return e<0?360+-1*(Math.abs(e)%360):e>360?e%360:e}function g0(e,t,r,n){const a=e[0]+t*Math.cos(r*Math.PI/180),u=e[1]+t*Math.sin(r*Math.PI/180),l=e[0]+t*Math.cos(n*Math.PI/180),o=e[1]+t*Math.sin(n*Math.PI/180),h=n-r<=180?"0":"1";return`M${e[0]},${e[1]} L${a},${u} A${t},${t} 0 ${h} 1 ${l},${o} Z`}function n2(e,t,r){let n,a;Ot(e,An,L=>r(5,a=L));let{center:u=[450,450]}=t,{radius:l=250}=t,{pointRadius:o=10}=t,{textWidth:h=150}=t,{fontSize:p=13}=t,f=[0,0],d=null,c={},g=null,y;function m(L){g=null,y=null,d=null,c={}}function _(L){g=L}function b(L,q){let Z=wi(L,u,l)[0]-180;Z<0&&(Z+=360);const W=hp(Rs(q),Z);return Kr(L,W)}function C(L,q){y=q}function w(L){const q=y,Z={...a.pieAngles},W=Object.entries(Z).sort((be,Ne)=>Hr(be[1])-Hr(Ne[1])).map(be=>be[0]),z=W.indexOf(q),H=z+1===W.length?0:z+1,re=W[H];c[q]||(c[q]=Z[q]),c[re]||(c[re]=Z[re]);const Q=wi(L,u,l)[0]-d,le={...Z};le[q]=Hr(Q+c[q]),le[re]=Hr(Q+c[re]);const me=Object.entries(le).sort((be,Ne)=>Hr(be[1])-Hr(Ne[1])).map(be=>be[0]);r2(W,me)&&r(6,n=P(a.weightedPrompts,u,l,le))}function O(L){const q={...a.weightedPrompts[g]},Z=Gl(L,u,l),W=Hr(wi(Z,u,l)[0]),z={...a.pieAngles};console.log(z),z[q.id]=W;const H={...a.weightedPrompts};H[g]=q,r(6,n=P(H,u,l,z))}function S(L){L.preventDefault(),f=Wi(L),g?O(f):y?w(f):d=wi(f,u,l)[0]}function B(L,q){L.preventDefault();const Z={...a.pieAngles},W=Object.entries(Z).sort((ee,Q)=>Hr(ee[1])-Hr(Q[1])).map(ee=>ee[0]),z=W.indexOf(q),H=z+1===W.length?0:z+1,re=W[H];Z[q]=Hr(Z[q]-L.deltaY/100),Z[re]=Hr(Z[re]+L.deltaY/100),r(6,n=P(a.weightedPrompts,u,l,Z))}function P(L,q,Z,W){if(!L||!q||!Z)return null;const z=Object.entries(L).sort((le,me)=>Hr(W[le[0]])-Hr(W[me[0]])),H=z.map((le,me)=>{const Fe=me+1===z.length?0:me+1,be=W[z[Fe][0]]-W[z[me][0]];return be<0?[le[0],360+be]:[le[0],be]}),re=Math.max(...H.map(le=>le[1])),ee=H.reduce((le,[me,Fe])=>{({...L[me]});const be=W[me],Ne=zn(q,[be,1],Z),je=zn(q,[be+.5*Fe,1],Z),Me=Fe/re;return le[me]={xy:Ne,textXY:je,angle:be,angleDiff:Fe,unitWeight:Me},le},{}),Q={...L};return Object.entries(ee).forEach(([le,me])=>{Q[le].pieWeight=me.unitWeight}),Nt.update({...a,weightedPrompts:Q,pieAngles:W}),ee}const I=(L,q)=>B(q,L),N=(L,q)=>C(q,L),G=L=>_(L);return e.$$set=L=>{"center"in L&&r(0,u=L.center),"radius"in L&&r(1,l=L.radius),"pointRadius"in L&&r(2,o=L.pointRadius),"textWidth"in L&&r(3,h=L.textWidth),"fontSize"in L&&r(4,p=L.fontSize)},e.$$.update=()=>{e.$$.dirty&32&&Object.keys(a.pieAngles||{}).length!==Object.keys(a.weightedPrompts).length&&Nt.update({...a,pieAngles:v0(a.weightedPrompts,{})}),e.$$.dirty&35&&r(6,n=P(a.weightedPrompts,u,l,a.pieAngles||v0(a.weightedPrompts,{})))},[u,l,o,h,p,a,n,m,_,b,C,S,B,I,N,G]}class i2 extends Rt{constructor(t){super(),Lt(this,t,n2,t2,Ut,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function a2(e){let t,r,n,a;return r=new i2({props:{center:[Math.round(e[0]/2),Math.round(e[1]/2)],radius:Math.round(Math.min(e[0],e[1])/2)-150}}),{c(){t=se("div"),pt(r.$$.fragment),this.h()},l(u){t=oe(u,"DIV",{class:!0});var l=ie(t);vt(r.$$.fragment,l),l.forEach(V),this.h()},h(){T(t,"class","w-full h-full"),Fs(()=>e[2].call(t))},m(u,l){Ee(u,t,l),gt(r,t,null),n=Ss(t,e[2].bind(t)),a=!0},p(u,[l]){const o={};l&3&&(o.center=[Math.round(u[0]/2),Math.round(u[1]/2)]),l&3&&(o.radius=Math.round(Math.min(u[0],u[1])/2)-150),r.$set(o)},i(u){a||(xe(r.$$.fragment,u),a=!0)},o(u){Ue(r.$$.fragment,u),a=!1},d(u){u&&V(t),mt(r),n()}}}function u2(e,t,r){let n,a;function u(){n=this.clientWidth,a=this.clientHeight,r(0,n),r(1,a)}return[n,a,u]}class s2 extends Rt{constructor(t){super(),Lt(this,t,u2,a2,Ut,{})}}var fs={},o2={get exports(){return fs},set exports(e){fs=e}},cs={},l2={get exports(){return cs},set exports(e){cs=e}},va=typeof Reflect=="object"?Reflect:null,m0=va&&typeof va.apply=="function"?va.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},Qu;va&&typeof va.ownKeys=="function"?Qu=va.ownKeys:Object.getOwnPropertySymbols?Qu=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Qu=function(t){return Object.getOwnPropertyNames(t)};function f2(e){console&&console.warn&&console.warn(e)}var dp=Number.isNaN||function(t){return t!==t};function Pt(){Pt.init.call(this)}l2.exports=Pt;cs.once=p2;Pt.EventEmitter=Pt;Pt.prototype._events=void 0;Pt.prototype._eventsCount=0;Pt.prototype._maxListeners=void 0;var _0=10;function Ls(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Pt,"defaultMaxListeners",{enumerable:!0,get:function(){return _0},set:function(e){if(typeof e!="number"||e<0||dp(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");_0=e}});Pt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Pt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||dp(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function pp(e){return e._maxListeners===void 0?Pt.defaultMaxListeners:e._maxListeners}Pt.prototype.getMaxListeners=function(){return pp(this)};Pt.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var a=t==="error",u=this._events;if(u!==void 0)a=a&&u.error===void 0;else if(!a)return!1;if(a){var l;if(r.length>0&&(l=r[0]),l instanceof Error)throw l;var o=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw o.context=l,o}var h=u[t];if(h===void 0)return!1;if(typeof h=="function")m0(h,this,r);else for(var p=h.length,f=Dp(h,p),n=0;n<p;++n)m0(f[n],this,r);return!0};function vp(e,t,r,n){var a,u,l;if(Ls(r),u=e._events,u===void 0?(u=e._events=Object.create(null),e._eventsCount=0):(u.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),u=e._events),l=u[t]),l===void 0)l=u[t]=r,++e._eventsCount;else if(typeof l=="function"?l=u[t]=n?[r,l]:[l,r]:n?l.unshift(r):l.push(r),a=pp(e),a>0&&l.length>a&&!l.warned){l.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=l.length,f2(o)}return e}Pt.prototype.addListener=function(t,r){return vp(this,t,r,!1)};Pt.prototype.on=Pt.prototype.addListener;Pt.prototype.prependListener=function(t,r){return vp(this,t,r,!0)};function c2(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function gp(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=c2.bind(n);return a.listener=r,n.wrapFn=a,a}Pt.prototype.once=function(t,r){return Ls(r),this.on(t,gp(this,t,r)),this};Pt.prototype.prependOnceListener=function(t,r){return Ls(r),this.prependListener(t,gp(this,t,r)),this};Pt.prototype.removeListener=function(t,r){var n,a,u,l,o;if(Ls(r),a=this._events,a===void 0)return this;if(n=a[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(u=-1,l=n.length-1;l>=0;l--)if(n[l]===r||n[l].listener===r){o=n[l].listener,u=l;break}if(u<0)return this;u===0?n.shift():h2(n,u),n.length===1&&(a[t]=n[0]),a.removeListener!==void 0&&this.emit("removeListener",t,o||r)}return this};Pt.prototype.off=Pt.prototype.removeListener;Pt.prototype.removeAllListeners=function(t){var r,n,a;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var u=Object.keys(n),l;for(a=0;a<u.length;++a)l=u[a],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(t,r[a]);return this};function mp(e,t,r){var n=e._events;if(n===void 0)return[];var a=n[t];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?d2(a):Dp(a,a.length)}Pt.prototype.listeners=function(t){return mp(this,t,!0)};Pt.prototype.rawListeners=function(t){return mp(this,t,!1)};Pt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):_p.call(e,t)};Pt.prototype.listenerCount=_p;function _p(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Pt.prototype.eventNames=function(){return this._eventsCount>0?Qu(this._events):[]};function Dp(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function h2(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function d2(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function p2(e,t){return new Promise(function(r,n){function a(l){e.removeListener(t,u),n(l)}function u(){typeof e.removeListener=="function"&&e.removeListener("error",a),r([].slice.call(arguments))}bp(e,t,u,{once:!0}),t!=="error"&&v2(e,a,{once:!0})})}function v2(e,t,r){typeof e.on=="function"&&bp(e,"error",t,r)}function bp(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function a(u){n.once&&e.removeEventListener(t,a),r(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}function g2(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}var m2=g2;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var _2=function(e){return e!=null&&(yp(e)||D2(e)||!!e._isBuffer)};function yp(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function D2(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&yp(e.slice(0,0))}var b2=m2,y2=_2,A2=typeof Float64Array<"u";function w2(e,t){return e[0]-t[0]}function E2(){var e=this.stride,t=new Array(e.length),r;for(r=0;r<t.length;++r)t[r]=[Math.abs(e[r]),r];t.sort(w2);var n=new Array(t.length);for(r=0;r<n.length;++r)n[r]=t[r][1];return n}function C2(e,t){var r=["View",t,"d",e].join("");t<0&&(r="View_Nil"+e);var n=e==="generic";if(t===-1){var a="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",m=new Function(a);return m()}else if(t===0){var a="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",m=new Function("TrivialArray",a);return m(hs[e][0])}var a=["'use strict'"],u=b2(t),l=u.map(function(_){return"i"+_}),o="this.offset+"+u.map(function(_){return"this.stride["+_+"]*i"+_}).join("+"),h=u.map(function(_){return"b"+_}).join(","),p=u.map(function(_){return"c"+_}).join(",");a.push("function "+r+"(a,"+h+","+p+",d){this.data=a","this.shape=["+h+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),a.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+u.map(function(_){return"this.shape["+_+"]"}).join("*"),"}})"),t===1?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),t<4?(a.push("function "+r+"_order(){"),t===2?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):t===3&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+r+"_set("+l.join(",")+",v){"),n?a.push("return this.data.set("+o+",v)}"):a.push("return this.data["+o+"]=v}"),a.push("proto.get=function "+r+"_get("+l.join(",")+"){"),n?a.push("return this.data.get("+o+")}"):a.push("return this.data["+o+"]}"),a.push("proto.index=function "+r+"_index(",l.join(),"){return "+o+"}"),a.push("proto.hi=function "+r+"_hi("+l.join(",")+"){return new "+r+"(this.data,"+u.map(function(_){return["(typeof i",_,"!=='number'||i",_,"<0)?this.shape[",_,"]:i",_,"|0"].join("")}).join(",")+","+u.map(function(_){return"this.stride["+_+"]"}).join(",")+",this.offset)}");var f=u.map(function(_){return"a"+_+"=this.shape["+_+"]"}),d=u.map(function(_){return"c"+_+"=this.stride["+_+"]"});a.push("proto.lo=function "+r+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+f.join(",")+","+d.join(","));for(var c=0;c<t;++c)a.push("if(typeof i"+c+"==='number'&&i"+c+">=0){d=i"+c+"|0;b+=c"+c+"*d;a"+c+"-=d}");a.push("return new "+r+"(this.data,"+u.map(function(_){return"a"+_}).join(",")+","+u.map(function(_){return"c"+_}).join(",")+",b)}"),a.push("proto.step=function "+r+"_step("+l.join(",")+"){var "+u.map(function(_){return"a"+_+"=this.shape["+_+"]"}).join(",")+","+u.map(function(_){return"b"+_+"=this.stride["+_+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var c=0;c<t;++c)a.push("if(typeof i"+c+"==='number'){d=i"+c+"|0;if(d<0){c+=b"+c+"*(a"+c+"-1);a"+c+"=ceil(-a"+c+"/d)}else{a"+c+"=ceil(a"+c+"/d)}b"+c+"*=d}");a.push("return new "+r+"(this.data,"+u.map(function(_){return"a"+_}).join(",")+","+u.map(function(_){return"b"+_}).join(",")+",c)}");for(var g=new Array(t),y=new Array(t),c=0;c<t;++c)g[c]="a[i"+c+"]",y[c]="b[i"+c+"]";a.push("proto.transpose=function "+r+"_transpose("+l+"){"+l.map(function(_,b){return _+"=("+_+"===undefined?"+b+":"+_+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+y.join(",")+",this.offset)}"),a.push("proto.pick=function "+r+"_pick("+l+"){var a=[],b=[],c=this.offset");for(var c=0;c<t;++c)a.push("if(typeof i"+c+"==='number'&&i"+c+">=0){c=(c+this.stride["+c+"]*i"+c+")|0}else{a.push(this.shape["+c+"]);b.push(this.stride["+c+"])}");a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+u.map(function(_){return"shape["+_+"]"}).join(",")+","+u.map(function(_){return"stride["+_+"]"}).join(",")+",offset)}");var m=new Function("CTOR_LIST","ORDER",a.join(`
`));return m(hs[e],E2)}function F2(e){if(y2(e))return"buffer";if(A2)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}var hs={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function S2(e,t,r,n){if(e===void 0){var p=hs.array[0];return p([])}else typeof e=="number"&&(e=[e]);t===void 0&&(t=[e.length]);var a=t.length;if(r===void 0){r=new Array(a);for(var u=a-1,l=1;u>=0;--u)r[u]=l,l*=t[u]}if(n===void 0){n=0;for(var u=0;u<a;++u)r[u]<0&&(n-=(t[u]-1)*r[u])}for(var o=F2(e),h=hs[o];h.length<=a+1;)h.push(C2(o,h.length-1));var p=h[a+1];return p(e,t,r,n)}var ya=S2,Us={};function B2(e,t){for(var r=1,n=e.length,a=e[0],u=e[0],l=1;l<n;++l)if(u=a,a=e[l],t(a,u)){if(l===r){r++;continue}e[r++]=a}return e.length=r,e}function O2(e){for(var t=1,r=e.length,n=e[0],a=e[0],u=1;u<r;++u,a=n)if(a=n,n=e[u],n!==a){if(u===t){t++;continue}e[t++]=n}return e.length=t,e}function M2(e,t,r){return e.length===0?e:t?(r||e.sort(t),B2(e,t)):(r||e.sort(),O2(e))}var Ap=M2,P2=Ap;function wp(e,t,r){var n=e.length,a=t.arrayArgs.length,u=t.indexArgs.length>0,l=[],o=[],h=0,p=0,f,d;for(f=0;f<n;++f)o.push(["i",f,"=0"].join(""));for(d=0;d<a;++d)for(f=0;f<n;++f)p=h,h=e[f],f===0?o.push(["d",d,"s",f,"=t",d,"p",h].join("")):o.push(["d",d,"s",f,"=(t",d,"p",h,"-s",p,"*t",d,"p",p,")"].join(""));for(o.length>0&&l.push("var "+o.join(",")),f=n-1;f>=0;--f)h=e[f],l.push(["for(i",f,"=0;i",f,"<s",h,";++i",f,"){"].join(""));for(l.push(r),f=0;f<n;++f){for(p=h,h=e[f],d=0;d<a;++d)l.push(["p",d,"+=d",d,"s",f].join(""));u&&(f>0&&l.push(["index[",p,"]-=s",p].join("")),l.push(["++index[",h,"]"].join(""))),l.push("}")}return l.join(`
`)}function x2(e,t,r,n){for(var a=t.length,u=r.arrayArgs.length,l=r.blockSize,o=r.indexArgs.length>0,h=[],p=0;p<u;++p)h.push(["var offset",p,"=p",p].join(""));for(var p=e;p<a;++p)h.push(["for(var j"+p+"=SS[",t[p],"]|0;j",p,">0;){"].join("")),h.push(["if(j",p,"<",l,"){"].join("")),h.push(["s",t[p],"=j",p].join("")),h.push(["j",p,"=0"].join("")),h.push(["}else{s",t[p],"=",l].join("")),h.push(["j",p,"-=",l,"}"].join("")),o&&h.push(["index[",t[p],"]=j",p].join(""));for(var p=0;p<u;++p){for(var f=["offset"+p],d=e;d<a;++d)f.push(["j",d,"*t",p,"p",t[d]].join(""));h.push(["p",p,"=(",f.join("+"),")"].join(""))}h.push(wp(t,r,n));for(var p=e;p<a;++p)h.push("}");return h.join(`
`)}function T2(e){for(var t=0,r=e[0].length;t<r;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}function sl(e,t,r){for(var n=e.body,a=[],u=[],l=0;l<e.args.length;++l){var o=e.args[l];if(!(o.count<=0)){var h=new RegExp(o.name,"g"),p="",f=t.arrayArgs.indexOf(l);switch(t.argTypes[l]){case"offset":var d=t.offsetArgIndex.indexOf(l),c=t.offsetArgs[d];f=c.array,p="+q"+d;case"array":p="p"+f+p;var g="l"+l,y="a"+f;if(t.arrayBlockIndices[f]===0)o.count===1?r[f]==="generic"?o.lvalue?(a.push(["var ",g,"=",y,".get(",p,")"].join("")),n=n.replace(h,g),u.push([y,".set(",p,",",g,")"].join(""))):n=n.replace(h,[y,".get(",p,")"].join("")):n=n.replace(h,[y,"[",p,"]"].join("")):r[f]==="generic"?(a.push(["var ",g,"=",y,".get(",p,")"].join("")),n=n.replace(h,g),o.lvalue&&u.push([y,".set(",p,",",g,")"].join(""))):(a.push(["var ",g,"=",y,"[",p,"]"].join("")),n=n.replace(h,g),o.lvalue&&u.push([y,"[",p,"]=",g].join("")));else{for(var m=[o.name],_=[p],b=0;b<Math.abs(t.arrayBlockIndices[f]);b++)m.push("\\s*\\[([^\\]]+)\\]"),_.push("$"+(b+1)+"*t"+f+"b"+b);if(h=new RegExp(m.join(""),"g"),p=_.join("+"),r[f]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(h,[y,"[",p,"]"].join(""))}break;case"scalar":n=n.replace(h,"Y"+t.scalarArgs.indexOf(l));break;case"index":n=n.replace(h,"index");break;case"shape":n=n.replace(h,"shape");break}}}return[a.join(`
`),n,u.join(`
`)].join(`
`).trim()}function I2(e){for(var t=new Array(e.length),r=!0,n=0;n<e.length;++n){var a=e[n],u=a.match(/\d+/);u?u=u[0]:u="",a.charAt(0)===0?t[n]="u"+a.charAt(1)+u:t[n]=a.charAt(0)+u,n>0&&(r=r&&t[n]===t[n-1])}return r?t[0]:t.join("")}function N2(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,n=new Array(e.arrayArgs.length),a=new Array(e.arrayArgs.length),u=0;u<e.arrayArgs.length;++u)a[u]=t[2*u],n[u]=t[2*u+1];for(var l=[],o=[],h=[],p=[],f=[],u=0;u<e.arrayArgs.length;++u){e.arrayBlockIndices[u]<0?(h.push(0),p.push(r),l.push(r),o.push(r+e.arrayBlockIndices[u])):(h.push(e.arrayBlockIndices[u]),p.push(e.arrayBlockIndices[u]+r),l.push(0),o.push(e.arrayBlockIndices[u]));for(var d=[],c=0;c<n[u].length;c++)h[u]<=n[u][c]&&n[u][c]<p[u]&&d.push(n[u][c]-h[u]);f.push(d)}for(var g=["SS"],y=["'use strict'"],m=[],c=0;c<r;++c)m.push(["s",c,"=SS[",c,"]"].join(""));for(var u=0;u<e.arrayArgs.length;++u){g.push("a"+u),g.push("t"+u),g.push("p"+u);for(var c=0;c<r;++c)m.push(["t",u,"p",c,"=t",u,"[",h[u]+c,"]"].join(""));for(var c=0;c<Math.abs(e.arrayBlockIndices[u]);++c)m.push(["t",u,"b",c,"=t",u,"[",l[u]+c,"]"].join(""))}for(var u=0;u<e.scalarArgs.length;++u)g.push("Y"+u);if(e.shapeArgs.length>0&&m.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var _=new Array(r),u=0;u<r;++u)_[u]="0";m.push(["index=[",_.join(","),"]"].join(""))}for(var u=0;u<e.offsetArgs.length;++u){for(var b=e.offsetArgs[u],C=[],c=0;c<b.offset.length;++c)b.offset[c]!==0&&(b.offset[c]===1?C.push(["t",b.array,"p",c].join("")):C.push([b.offset[c],"*t",b.array,"p",c].join("")));C.length===0?m.push("q"+u+"=0"):m.push(["q",u,"=",C.join("+")].join(""))}var w=P2([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));m=m.concat(w),m.length>0&&y.push("var "+m.join(","));for(var u=0;u<e.arrayArgs.length;++u)y.push("p"+u+"|=0");e.pre.body.length>3&&y.push(sl(e.pre,e,a));var O=sl(e.body,e,a),S=T2(f);S<r?y.push(x2(S,f[0],e,O)):y.push(wp(f[0],e,O)),e.post.body.length>3&&y.push(sl(e.post,e,a)),e.debug&&console.log("-----Generated cwise routine for ",t,`:
`+y.join(`
`)+`
----------`);var B=[e.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",S,I2(a)].join(""),P=new Function(["function ",B,"(",g.join(","),"){",y.join(`
`),"} return ",B].join(""));return P()}var k2=N2,R2=k2;function L2(e){var t=["'use strict'","var CACHED={}"],r=[],n=e.funcName+"_cwise_thunk";t.push(["return function ",n,"(",e.shimArgs.join(","),"){"].join(""));for(var a=[],u=[],l=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],o=[],h=[],p=0;p<e.arrayArgs.length;++p){var f=e.arrayArgs[p];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),a.push("t"+f),a.push("r"+f),u.push("t"+f),u.push("r"+f+".join()"),l.push("array"+f+".data"),l.push("array"+f+".stride"),l.push("array"+f+".offset|0"),p>0&&(o.push("array"+e.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[p]))),h.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[p])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+o.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+h.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var p=0;p<e.scalarArgs.length;++p)l.push("scalar"+e.scalarArgs[p]);r.push(["type=[",u.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",l.join(","),")}"].join("")),e.debug&&console.log(`-----Generated thunk:
`+t.join(`
`)+`
----------`);var d=new Function("compile",t.join(`
`));return d(R2.bind(void 0,e))}var U2=L2,V2=U2;function j2(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function q2(e){var t=new j2;t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var n=0;n<r.length;++n){var a=r[n];if(a==="array"||typeof a=="object"&&a.blockIndices){if(t.argTypes[n]="array",t.arrayArgs.push(n),t.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),t.shimArgs.push("array"+n),n<t.pre.args.length&&t.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<t.post.args.length&&t.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(a==="scalar")t.scalarArgs.push(n),t.shimArgs.push("scalar"+n);else if(a==="index"){if(t.indexArgs.push(n),n<t.pre.args.length&&t.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<t.body.args.length&&t.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<t.post.args.length&&t.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(a==="shape"){if(t.shapeArgs.push(n),n<t.pre.args.length&&t.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<t.body.args.length&&t.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<t.post.args.length&&t.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof a=="object"&&a.offset)t.argTypes[n]="offset",t.offsetArgs.push({array:a.array,offset:a.offset}),t.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+r[n])}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,V2(t)}var vf=q2;(function(e){var t=vf,r={body:"",args:[],thisVars:[],localVars:[]};function n(c){if(!c)return r;for(var g=0;g<c.args.length;++g){var y=c.args[g];g===0?c.args[g]={name:y,lvalue:!0,rvalue:!!c.rvalue,count:c.count||1}:c.args[g]={name:y,lvalue:!1,rvalue:!0,count:1}}return c.thisVars||(c.thisVars=[]),c.localVars||(c.localVars=[]),c}function a(c){return t({args:c.args,pre:n(c.pre),body:n(c.body),post:n(c.proc),funcName:c.funcName})}function u(c){for(var g=[],y=0;y<c.args.length;++y)g.push("a"+y);var m=new Function("P",["return function ",c.funcName,"_ndarrayops(",g.join(","),") {P(",g.join(","),");return a0}"].join(""));return m(a(c))}var l={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var c in l){var g=l[c];e[c]=u({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:c}),e[c+"eq"]=u({args:["array","array"],body:{args:["a","b"],body:"a"+g+"=b"},rvalue:!0,funcName:c+"eq"}),e[c+"s"]=u({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:c+"s"}),e[c+"seq"]=u({args:["array","scalar"],body:{args:["a","s"],body:"a"+g+"=s"},rvalue:!0,funcName:c+"seq"})}})();var o={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var c in o){var g=o[c];e[c]=u({args:["array","array"],body:{args:["a","b"],body:"a="+g+"b"},funcName:c}),e[c+"eq"]=u({args:["array"],body:{args:["a"],body:"a="+g+"a"},rvalue:!0,count:2,funcName:c+"eq"})}})();var h={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var c in h){var g=h[c];e[c]=u({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:c}),e[c+"s"]=u({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:c+"s"}),e[c+"eq"]=u({args:["array","array"],body:{args:["a","b"],body:"a=a"+g+"b"},rvalue:!0,count:2,funcName:c+"eq"}),e[c+"seq"]=u({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+g+"s"},rvalue:!0,count:2,funcName:c+"seq"})}})();var p=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var c=0;c<p.length;++c){var g=p[c];e[g]=u({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:g}),e[g+"eq"]=u({args:["array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"})}})();var f=["max","min","atan2","pow"];(function(){for(var c=0;c<f.length;++c){var g=f[c];e[g]=u({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g}),e[g+"s"]=u({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g+"s"}),e[g+"eq"]=u({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"}),e[g+"seq"]=u({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"seq"})}})();var d=["atan2","pow"];(function(){for(var c=0;c<d.length;++c){var g=d[c];e[g+"op"]=u({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"op"}),e[g+"ops"]=u({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"ops"}),e[g+"opeq"]=u({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opeq"}),e[g+"opseq"]=u({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opseq"})}})(),e.any=t({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=t({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=t({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=t({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=t({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=t({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=t({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=u({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=u({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=u({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=t({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(Us);var z2=vf({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64}),D0=ya,W2=z2,H2=function(t,r){for(var n=[],a=t,u=1;Array.isArray(a);)n.push(a.length),u*=a.length,a=a[0];return n.length===0?D0():(r||(r=D0(new Float64Array(u),n)),W2(r,t),r)};function Ep(e,t,r){var n=e[r]|0;if(n<=0)return[];var a=new Array(n),u;if(r===e.length-1)for(u=0;u<n;++u)a[u]=t;else for(u=0;u<n;++u)a[u]=Ep(e,t,r+1);return a}function G2(e,t){var r,n;for(r=new Array(e),n=0;n<e;++n)r[n]=t;return r}function K2(e,t){switch(typeof t>"u"&&(t=0),typeof e){case"number":if(e>0)return G2(e|0,t);break;case"object":if(typeof e.length=="number")return Ep(e,t,0);break}return[]}var Y2=K2,Cp={};(function(e){(function(t,r){r(e)})(hr,function(t){var r,n,a,u,l,o,h,p,f,d,c,g,y,m,_,b,C,w;r={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},n={},n[r.BooleanLiteral]="Boolean",n[r.EOF]="<end>",n[r.Identifier]="Identifier",n[r.Keyword]="Keyword",n[r.NullLiteral]="Null",n[r.NumericLiteral]="Numeric",n[r.Punctuator]="Punctuator",n[r.StringLiteral]="String",n[r.RegularExpression]="RegularExpression",a=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],u={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},l={Data:1,Get:2,Set:4},o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},h={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function O(D,E){if(!D)throw new Error("ASSERT: "+E)}function S(D){return D>=48&&D<=57}function B(D){return"0123456789abcdefABCDEF".indexOf(D)>=0}function P(D){return"01234567".indexOf(D)>=0}function I(D){return D===32||D===9||D===11||D===12||D===160||D>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(D)>=0}function N(D){return D===10||D===13||D===8232||D===8233}function G(D){return D===36||D===95||D>=65&&D<=90||D>=97&&D<=122||D===92||D>=128&&h.NonAsciiIdentifierStart.test(String.fromCharCode(D))}function L(D){return D===36||D===95||D>=65&&D<=90||D>=97&&D<=122||D>=48&&D<=57||D===92||D>=128&&h.NonAsciiIdentifierPart.test(String.fromCharCode(D))}function q(D){switch(D){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function Z(D){switch(D){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function W(D){return D==="eval"||D==="arguments"}function z(D){if(d&&Z(D))return!0;switch(D.length){case 2:return D==="if"||D==="in"||D==="do";case 3:return D==="var"||D==="for"||D==="new"||D==="try"||D==="let";case 4:return D==="this"||D==="else"||D==="case"||D==="void"||D==="with"||D==="enum";case 5:return D==="while"||D==="break"||D==="catch"||D==="throw"||D==="const"||D==="yield"||D==="class"||D==="super";case 6:return D==="return"||D==="typeof"||D==="delete"||D==="switch"||D==="export"||D==="import";case 7:return D==="default"||D==="finally"||D==="extends";case 8:return D==="function"||D==="continue"||D==="debugger";case 10:return D==="instanceof";default:return!1}}function H(D,E,k,X,pe){var Ce;O(typeof k=="number","Comment must have valid position"),!(C.lastCommentStart>=k)&&(C.lastCommentStart=k,Ce={type:D,value:E},w.range&&(Ce.range=[k,X]),w.loc&&(Ce.loc=pe),w.comments.push(Ce),w.attachComment&&(w.leadingComments.push(Ce),w.trailingComments.push(Ce)))}function re(D){var E,k,X,pe;for(E=c-D,k={start:{line:g,column:c-y-D}};c<m;)if(X=f.charCodeAt(c),++c,N(X)){w.comments&&(pe=f.slice(E+D,c-1),k.end={line:g,column:c-y-1},H("Line",pe,E,c-1,k)),X===13&&f.charCodeAt(c)===10&&++c,++g,y=c;return}w.comments&&(pe=f.slice(E+D,c),k.end={line:g,column:c-y},H("Line",pe,E,c,k))}function ee(){var D,E,k,X;for(w.comments&&(D=c-2,E={start:{line:g,column:c-y-2}});c<m;)if(k=f.charCodeAt(c),N(k))k===13&&f.charCodeAt(c+1)===10&&++c,++g,++c,y=c,c>=m&&j({},o.UnexpectedToken,"ILLEGAL");else if(k===42){if(f.charCodeAt(c+1)===47){++c,++c,w.comments&&(X=f.slice(D+2,c-2),E.end={line:g,column:c-y},H("Block",X,D,c,E));return}++c}else++c;j({},o.UnexpectedToken,"ILLEGAL")}function Q(){var D,E;for(E=c===0;c<m;)if(D=f.charCodeAt(c),I(D))++c;else if(N(D))++c,D===13&&f.charCodeAt(c)===10&&++c,++g,y=c,E=!0;else if(D===47)if(D=f.charCodeAt(c+1),D===47)++c,++c,re(2),E=!0;else if(D===42)++c,++c,ee();else break;else if(E&&D===45)if(f.charCodeAt(c+1)===45&&f.charCodeAt(c+2)===62)c+=3,re(3);else break;else if(D===60)if(f.slice(c+1,c+4)==="!--")++c,++c,++c,++c,re(4);else break;else break}function le(D){var E,k,X,pe=0;for(k=D==="u"?4:2,E=0;E<k;++E)if(c<m&&B(f[c]))X=f[c++],pe=pe*16+"0123456789abcdef".indexOf(X.toLowerCase());else return"";return String.fromCharCode(pe)}function me(){var D,E;for(D=f.charCodeAt(c++),E=String.fromCharCode(D),D===92&&(f.charCodeAt(c)!==117&&j({},o.UnexpectedToken,"ILLEGAL"),++c,D=le("u"),(!D||D==="\\"||!G(D.charCodeAt(0)))&&j({},o.UnexpectedToken,"ILLEGAL"),E=D);c<m&&(D=f.charCodeAt(c),!!L(D));)++c,E+=String.fromCharCode(D),D===92&&(E=E.substr(0,E.length-1),f.charCodeAt(c)!==117&&j({},o.UnexpectedToken,"ILLEGAL"),++c,D=le("u"),(!D||D==="\\"||!L(D.charCodeAt(0)))&&j({},o.UnexpectedToken,"ILLEGAL"),E+=D);return E}function Fe(){var D,E;for(D=c++;c<m;){if(E=f.charCodeAt(c),E===92)return c=D,me();if(L(E))++c;else break}return f.slice(D,c)}function be(){var D,E,k;return D=c,E=f.charCodeAt(c)===92?me():Fe(),E.length===1?k=r.Identifier:z(E)?k=r.Keyword:E==="null"?k=r.NullLiteral:E==="true"||E==="false"?k=r.BooleanLiteral:k=r.Identifier,{type:k,value:E,lineNumber:g,lineStart:y,start:D,end:c}}function Ne(){var D=c,E=f.charCodeAt(c),k,X=f[c],pe,Ce,ot;switch(E){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++c,w.tokenize&&(E===40?w.openParenToken=w.tokens.length:E===123&&(w.openCurlyToken=w.tokens.length)),{type:r.Punctuator,value:String.fromCharCode(E),lineNumber:g,lineStart:y,start:D,end:c};default:if(k=f.charCodeAt(c+1),k===61)switch(E){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return c+=2,{type:r.Punctuator,value:String.fromCharCode(E)+String.fromCharCode(k),lineNumber:g,lineStart:y,start:D,end:c};case 33:case 61:return c+=2,f.charCodeAt(c)===61&&++c,{type:r.Punctuator,value:f.slice(D,c),lineNumber:g,lineStart:y,start:D,end:c}}}if(ot=f.substr(c,4),ot===">>>=")return c+=4,{type:r.Punctuator,value:ot,lineNumber:g,lineStart:y,start:D,end:c};if(Ce=ot.substr(0,3),Ce===">>>"||Ce==="<<="||Ce===">>=")return c+=3,{type:r.Punctuator,value:Ce,lineNumber:g,lineStart:y,start:D,end:c};if(pe=Ce.substr(0,2),X===pe[1]&&"+-<>&|".indexOf(X)>=0||pe==="=>")return c+=2,{type:r.Punctuator,value:pe,lineNumber:g,lineStart:y,start:D,end:c};if("<>=!+-*%&|^/".indexOf(X)>=0)return++c,{type:r.Punctuator,value:X,lineNumber:g,lineStart:y,start:D,end:c};j({},o.UnexpectedToken,"ILLEGAL")}function je(D){for(var E="";c<m&&B(f[c]);)E+=f[c++];return E.length===0&&j({},o.UnexpectedToken,"ILLEGAL"),G(f.charCodeAt(c))&&j({},o.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt("0x"+E,16),lineNumber:g,lineStart:y,start:D,end:c}}function Me(D){for(var E="0"+f[c++];c<m&&P(f[c]);)E+=f[c++];return(G(f.charCodeAt(c))||S(f.charCodeAt(c)))&&j({},o.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt(E,8),octal:!0,lineNumber:g,lineStart:y,start:D,end:c}}function it(){var D,E;for(D=c+1;D<m;++D){if(E=f[D],E==="8"||E==="9")return!1;if(!P(E))return!0}return!0}function qe(){var D,E,k;if(k=f[c],O(S(k.charCodeAt(0))||k===".","Numeric literal must start with a decimal digit or a decimal point"),E=c,D="",k!=="."){if(D=f[c++],k=f[c],D==="0"){if(k==="x"||k==="X")return++c,je(E);if(P(k)&&it())return Me(E)}for(;S(f.charCodeAt(c));)D+=f[c++];k=f[c]}if(k==="."){for(D+=f[c++];S(f.charCodeAt(c));)D+=f[c++];k=f[c]}if(k==="e"||k==="E")if(D+=f[c++],k=f[c],(k==="+"||k==="-")&&(D+=f[c++]),S(f.charCodeAt(c)))for(;S(f.charCodeAt(c));)D+=f[c++];else j({},o.UnexpectedToken,"ILLEGAL");return G(f.charCodeAt(c))&&j({},o.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseFloat(D),lineNumber:g,lineStart:y,start:E,end:c}}function Te(){var D="",E,k,X,pe,Ce,ot,Dt=!1,Gt,sr;for(Gt=g,sr=y,E=f[c],O(E==="'"||E==='"',"String literal must starts with a quote"),k=c,++c;c<m;)if(X=f[c++],X===E){E="";break}else if(X==="\\")if(X=f[c++],!X||!N(X.charCodeAt(0)))switch(X){case"u":case"x":ot=c,Ce=le(X),Ce?D+=Ce:(c=ot,D+=X);break;case"n":D+=`
`;break;case"r":D+="\r";break;case"t":D+="	";break;case"b":D+="\b";break;case"f":D+="\f";break;case"v":D+="\v";break;default:P(X)?(pe="01234567".indexOf(X),pe!==0&&(Dt=!0),c<m&&P(f[c])&&(Dt=!0,pe=pe*8+"01234567".indexOf(f[c++]),"0123".indexOf(X)>=0&&c<m&&P(f[c])&&(pe=pe*8+"01234567".indexOf(f[c++]))),D+=String.fromCharCode(pe)):D+=X;break}else++g,X==="\r"&&f[c]===`
`&&++c,y=c;else{if(N(X.charCodeAt(0)))break;D+=X}return E!==""&&j({},o.UnexpectedToken,"ILLEGAL"),{type:r.StringLiteral,value:D,octal:Dt,startLineNumber:Gt,startLineStart:sr,lineNumber:g,lineStart:y,start:k,end:c}}function Re(D,E){var k;try{k=new RegExp(D,E)}catch{j({},o.InvalidRegExp)}return k}function lt(){var D,E,k,X,pe;for(D=f[c],O(D==="/","Regular expression literal must start with a slash"),E=f[c++],k=!1,X=!1;c<m;)if(D=f[c++],E+=D,D==="\\")D=f[c++],N(D.charCodeAt(0))&&j({},o.UnterminatedRegExp),E+=D;else if(N(D.charCodeAt(0)))j({},o.UnterminatedRegExp);else if(k)D==="]"&&(k=!1);else if(D==="/"){X=!0;break}else D==="["&&(k=!0);return X||j({},o.UnterminatedRegExp),pe=E.substr(1,E.length-2),{value:pe,literal:E}}function et(){var D,E,k,X;for(E="",k="";c<m&&(D=f[c],!!L(D.charCodeAt(0)));)if(++c,D==="\\"&&c<m)if(D=f[c],D==="u"){if(++c,X=c,D=le("u"),D)for(k+=D,E+="\\u";X<c;++X)E+=f[X];else c=X,k+="u",E+="\\u";$({},o.UnexpectedToken,"ILLEGAL")}else E+="\\",$({},o.UnexpectedToken,"ILLEGAL");else k+=D,E+=D;return{value:k,literal:E}}function at(){var D,E,k,X;return b=null,Q(),D=c,E=lt(),k=et(),X=Re(E.value,k.value),w.tokenize?{type:r.RegularExpression,value:X,lineNumber:g,lineStart:y,start:D,end:c}:{literal:E.literal+k.literal,value:X,start:D,end:c}}function tt(){var D,E,k,X;return Q(),D=c,E={start:{line:g,column:c-y}},k=at(),E.end={line:g,column:c-y},w.tokenize||(w.tokens.length>0&&(X=w.tokens[w.tokens.length-1],X.range[0]===D&&X.type==="Punctuator"&&(X.value==="/"||X.value==="/=")&&w.tokens.pop()),w.tokens.push({type:"RegularExpression",value:k.literal,range:[D,c],loc:E})),k}function rt(D){return D.type===r.Identifier||D.type===r.Keyword||D.type===r.BooleanLiteral||D.type===r.NullLiteral}function ze(){var D,E;if(D=w.tokens[w.tokens.length-1],!D)return tt();if(D.type==="Punctuator"){if(D.value==="]")return Ne();if(D.value===")")return E=w.tokens[w.openParenToken-1],E&&E.type==="Keyword"&&(E.value==="if"||E.value==="while"||E.value==="for"||E.value==="with")?tt():Ne();if(D.value==="}"){if(w.tokens[w.openCurlyToken-3]&&w.tokens[w.openCurlyToken-3].type==="Keyword"){if(E=w.tokens[w.openCurlyToken-4],!E)return Ne()}else if(w.tokens[w.openCurlyToken-4]&&w.tokens[w.openCurlyToken-4].type==="Keyword"){if(E=w.tokens[w.openCurlyToken-5],!E)return tt()}else return Ne();return a.indexOf(E.value)>=0?Ne():tt()}return tt()}return D.type==="Keyword"&&D.value!=="this"?tt():Ne()}function We(){var D;return Q(),c>=m?{type:r.EOF,lineNumber:g,lineStart:y,start:c,end:c}:(D=f.charCodeAt(c),G(D)?be():D===40||D===41||D===59?Ne():D===39||D===34?Te():D===46?S(f.charCodeAt(c+1))?qe():Ne():S(D)?qe():w.tokenize&&D===47?ze():Ne())}function Ae(){var D,E,k;return Q(),D={start:{line:g,column:c-y}},E=We(),D.end={line:g,column:c-y},E.type!==r.EOF&&(k=f.slice(E.start,E.end),w.tokens.push({type:n[E.type],value:k,range:[E.start,E.end],loc:D})),E}function Se(){var D;return D=b,c=D.end,g=D.lineNumber,y=D.lineStart,b=typeof w.tokens<"u"?Ae():We(),c=D.end,g=D.lineNumber,y=D.lineStart,D}function yt(){var D,E,k;D=c,E=g,k=y,b=typeof w.tokens<"u"?Ae():We(),c=D,g=E,y=k}function Tt(D,E){this.line=D,this.column=E}function Wt(D,E,k,X){this.start=new Tt(D,E),this.end=new Tt(k,X)}p={name:"SyntaxTree",processComment:function(D){var E,k;if(!(D.type===u.Program&&D.body.length>0)){for(w.trailingComments.length>0?w.trailingComments[0].range[0]>=D.range[1]?(k=w.trailingComments,w.trailingComments=[]):w.trailingComments.length=0:w.bottomRightStack.length>0&&w.bottomRightStack[w.bottomRightStack.length-1].trailingComments&&w.bottomRightStack[w.bottomRightStack.length-1].trailingComments[0].range[0]>=D.range[1]&&(k=w.bottomRightStack[w.bottomRightStack.length-1].trailingComments,delete w.bottomRightStack[w.bottomRightStack.length-1].trailingComments);w.bottomRightStack.length>0&&w.bottomRightStack[w.bottomRightStack.length-1].range[0]>=D.range[0];)E=w.bottomRightStack.pop();E?E.leadingComments&&E.leadingComments[E.leadingComments.length-1].range[1]<=D.range[0]&&(D.leadingComments=E.leadingComments,delete E.leadingComments):w.leadingComments.length>0&&w.leadingComments[w.leadingComments.length-1].range[1]<=D.range[0]&&(D.leadingComments=w.leadingComments,w.leadingComments=[]),k&&(D.trailingComments=k),w.bottomRightStack.push(D)}},markEnd:function(D,E){return w.range&&(D.range=[E.start,c]),w.loc&&(D.loc=new Wt(E.startLineNumber===void 0?E.lineNumber:E.startLineNumber,E.start-(E.startLineStart===void 0?E.lineStart:E.startLineStart),g,c-y),this.postProcess(D)),w.attachComment&&this.processComment(D),D},postProcess:function(D){return w.source&&(D.loc.source=w.source),D},createArrayExpression:function(D){return{type:u.ArrayExpression,elements:D}},createAssignmentExpression:function(D,E,k){return{type:u.AssignmentExpression,operator:D,left:E,right:k}},createBinaryExpression:function(D,E,k){var X=D==="||"||D==="&&"?u.LogicalExpression:u.BinaryExpression;return{type:X,operator:D,left:E,right:k}},createBlockStatement:function(D){return{type:u.BlockStatement,body:D}},createBreakStatement:function(D){return{type:u.BreakStatement,label:D}},createCallExpression:function(D,E){return{type:u.CallExpression,callee:D,arguments:E}},createCatchClause:function(D,E){return{type:u.CatchClause,param:D,body:E}},createConditionalExpression:function(D,E,k){return{type:u.ConditionalExpression,test:D,consequent:E,alternate:k}},createContinueStatement:function(D){return{type:u.ContinueStatement,label:D}},createDebuggerStatement:function(){return{type:u.DebuggerStatement}},createDoWhileStatement:function(D,E){return{type:u.DoWhileStatement,body:D,test:E}},createEmptyStatement:function(){return{type:u.EmptyStatement}},createExpressionStatement:function(D){return{type:u.ExpressionStatement,expression:D}},createForStatement:function(D,E,k,X){return{type:u.ForStatement,init:D,test:E,update:k,body:X}},createForInStatement:function(D,E,k){return{type:u.ForInStatement,left:D,right:E,body:k,each:!1}},createFunctionDeclaration:function(D,E,k,X){return{type:u.FunctionDeclaration,id:D,params:E,defaults:k,body:X,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(D,E,k,X){return{type:u.FunctionExpression,id:D,params:E,defaults:k,body:X,rest:null,generator:!1,expression:!1}},createIdentifier:function(D){return{type:u.Identifier,name:D}},createIfStatement:function(D,E,k){return{type:u.IfStatement,test:D,consequent:E,alternate:k}},createLabeledStatement:function(D,E){return{type:u.LabeledStatement,label:D,body:E}},createLiteral:function(D){return{type:u.Literal,value:D.value,raw:f.slice(D.start,D.end)}},createMemberExpression:function(D,E,k){return{type:u.MemberExpression,computed:D==="[",object:E,property:k}},createNewExpression:function(D,E){return{type:u.NewExpression,callee:D,arguments:E}},createObjectExpression:function(D){return{type:u.ObjectExpression,properties:D}},createPostfixExpression:function(D,E){return{type:u.UpdateExpression,operator:D,argument:E,prefix:!1}},createProgram:function(D){return{type:u.Program,body:D}},createProperty:function(D,E,k){return{type:u.Property,key:E,value:k,kind:D}},createReturnStatement:function(D){return{type:u.ReturnStatement,argument:D}},createSequenceExpression:function(D){return{type:u.SequenceExpression,expressions:D}},createSwitchCase:function(D,E){return{type:u.SwitchCase,test:D,consequent:E}},createSwitchStatement:function(D,E){return{type:u.SwitchStatement,discriminant:D,cases:E}},createThisExpression:function(){return{type:u.ThisExpression}},createThrowStatement:function(D){return{type:u.ThrowStatement,argument:D}},createTryStatement:function(D,E,k,X){return{type:u.TryStatement,block:D,guardedHandlers:E,handlers:k,finalizer:X}},createUnaryExpression:function(D,E){return D==="++"||D==="--"?{type:u.UpdateExpression,operator:D,argument:E,prefix:!0}:{type:u.UnaryExpression,operator:D,argument:E,prefix:!0}},createVariableDeclaration:function(D,E){return{type:u.VariableDeclaration,declarations:D,kind:E}},createVariableDeclarator:function(D,E){return{type:u.VariableDeclarator,id:D,init:E}},createWhileStatement:function(D,E){return{type:u.WhileStatement,test:D,body:E}},createWithStatement:function(D,E){return{type:u.WithStatement,object:D,body:E}}};function R(){var D,E,k,X;return D=c,E=g,k=y,Q(),X=g!==E,c=D,g=E,y=k,X}function j(D,E){var k,X=Array.prototype.slice.call(arguments,2),pe=E.replace(/%(\d)/g,function(Ce,ot){return O(ot<X.length,"Message reference must be in range"),X[ot]});throw typeof D.lineNumber=="number"?(k=new Error("Line "+D.lineNumber+": "+pe),k.index=D.start,k.lineNumber=D.lineNumber,k.column=D.start-y+1):(k=new Error("Line "+g+": "+pe),k.index=c,k.lineNumber=g,k.column=c-y+1),k.description=pe,k}function $(){try{j.apply(null,arguments)}catch(D){if(w.errors)w.errors.push(D);else throw D}}function fe(D){if(D.type===r.EOF&&j(D,o.UnexpectedEOS),D.type===r.NumericLiteral&&j(D,o.UnexpectedNumber),D.type===r.StringLiteral&&j(D,o.UnexpectedString),D.type===r.Identifier&&j(D,o.UnexpectedIdentifier),D.type===r.Keyword){if(q(D.value))j(D,o.UnexpectedReserved);else if(d&&Z(D.value)){$(D,o.StrictReservedWord);return}j(D,o.UnexpectedToken,D.value)}j(D,o.UnexpectedToken,D.value)}function ne(D){var E=Se();(E.type!==r.Punctuator||E.value!==D)&&fe(E)}function he(D){var E=Se();(E.type!==r.Keyword||E.value!==D)&&fe(E)}function ae(D){return b.type===r.Punctuator&&b.value===D}function ce(D){return b.type===r.Keyword&&b.value===D}function ye(){var D;return b.type!==r.Punctuator?!1:(D=b.value,D==="="||D==="*="||D==="/="||D==="%="||D==="+="||D==="-="||D==="<<="||D===">>="||D===">>>="||D==="&="||D==="^="||D==="|=")}function Oe(){var D,E=c,k=g,X=y,pe=b;if(f.charCodeAt(c)===59||ae(";")){Se();return}if(D=g,Q(),g!==D){c=E,g=k,y=X,b=pe;return}b.type!==r.EOF&&!ae("}")&&fe(b)}function Xe(D){return D.type===u.Identifier||D.type===u.MemberExpression}function we(){var D=[],E;for(E=b,ne("[");!ae("]");)ae(",")?(Se(),D.push(null)):(D.push(wr()),ae("]")||ne(","));return Se(),_.markEnd(_.createArrayExpression(D),E)}function Vt(D,E){var k,X,pe;return k=d,pe=b,X=Ti(),E&&d&&W(D[0].name)&&$(E,o.StrictParamName),d=k,_.markEnd(_.createFunctionExpression(null,D,[],X),pe)}function St(){var D,E;return E=b,D=Se(),D.type===r.StringLiteral||D.type===r.NumericLiteral?(d&&D.octal&&$(D,o.StrictOctalLiteral),_.markEnd(_.createLiteral(D),E)):_.markEnd(_.createIdentifier(D.value),E)}function rr(){var D,E,k,X,pe,Ce;if(D=b,Ce=b,D.type===r.Identifier)return k=St(),D.value==="get"&&!ae(":")?(E=St(),ne("("),ne(")"),X=Vt([]),_.markEnd(_.createProperty("get",E,X),Ce)):D.value==="set"&&!ae(":")?(E=St(),ne("("),D=b,D.type!==r.Identifier?(ne(")"),$(D,o.UnexpectedToken,D.value),X=Vt([])):(pe=[un()],ne(")"),X=Vt(pe,D)),_.markEnd(_.createProperty("set",E,X),Ce)):(ne(":"),X=wr(),_.markEnd(_.createProperty("init",k,X),Ce));if(D.type===r.EOF||D.type===r.Punctuator)fe(D);else return E=St(),ne(":"),X=wr(),_.markEnd(_.createProperty("init",E,X),Ce)}function Zt(){var D=[],E,k,X,pe,Ce={},ot=String,Dt;for(Dt=b,ne("{");!ae("}");)E=rr(),E.key.type===u.Identifier?k=E.key.name:k=ot(E.key.value),pe=E.kind==="init"?l.Data:E.kind==="get"?l.Get:l.Set,X="$"+k,Object.prototype.hasOwnProperty.call(Ce,X)?(Ce[X]===l.Data?d&&pe===l.Data?$({},o.StrictDuplicateProperty):pe!==l.Data&&$({},o.AccessorDataProperty):pe===l.Data?$({},o.AccessorDataProperty):Ce[X]&pe&&$({},o.AccessorGetSet),Ce[X]|=pe):Ce[X]=pe,D.push(E),ae("}")||ne(",");return ne("}"),_.markEnd(_.createObjectExpression(D),Dt)}function mr(){var D;return ne("("),D=nr(),ne(")"),D}function $t(){var D,E,k,X;if(ae("("))return mr();if(ae("["))return we();if(ae("{"))return Zt();if(D=b.type,X=b,D===r.Identifier)k=_.createIdentifier(Se().value);else if(D===r.StringLiteral||D===r.NumericLiteral)d&&b.octal&&$(b,o.StrictOctalLiteral),k=_.createLiteral(Se());else if(D===r.Keyword){if(ce("function"))return Ii();ce("this")?(Se(),k=_.createThisExpression()):fe(Se())}else D===r.BooleanLiteral?(E=Se(),E.value=E.value==="true",k=_.createLiteral(E)):D===r.NullLiteral?(E=Se(),E.value=null,k=_.createLiteral(E)):ae("/")||ae("/=")?(typeof w.tokens<"u"?k=_.createLiteral(tt()):k=_.createLiteral(at()),yt()):fe(Se());return _.markEnd(k,X)}function _r(){var D=[];if(ne("("),!ae(")"))for(;c<m&&(D.push(wr()),!ae(")"));)ne(",");return ne(")"),D}function fr(){var D,E;return E=b,D=Se(),rt(D)||fe(D),_.markEnd(_.createIdentifier(D.value),E)}function cr(){return ne("."),fr()}function an(){var D;return ne("["),D=nr(),ne("]"),D}function dr(){var D,E,k;return k=b,he("new"),D=Kn(),E=ae("(")?_r():[],_.markEnd(_.createNewExpression(D,E),k)}function wn(){var D,E,k,X,pe=C.allowIn;for(X=b,C.allowIn=!0,D=ce("new")?dr():$t();;){if(ae("."))k=cr(),D=_.createMemberExpression(".",D,k);else if(ae("("))E=_r(),D=_.createCallExpression(D,E);else if(ae("["))k=an(),D=_.createMemberExpression("[",D,k);else break;_.markEnd(D,X)}return C.allowIn=pe,D}function Kn(){var D,E,k;for(O(C.allowIn,"callee of new expression always allow in keyword."),k=b,D=ce("new")?dr():$t();ae(".")||ae("[");)ae("[")?(E=an(),D=_.createMemberExpression("[",D,E)):(E=cr(),D=_.createMemberExpression(".",D,E)),_.markEnd(D,k);return D}function Nn(){var D,E,k=b;return D=wn(),b.type===r.Punctuator&&(ae("++")||ae("--"))&&!R()&&(d&&D.type===u.Identifier&&W(D.name)&&$({},o.StrictLHSPostfix),Xe(D)||$({},o.InvalidLHSInAssignment),E=Se(),D=_.markEnd(_.createPostfixExpression(E.value,D),k)),D}function kn(){var D,E,k;return b.type!==r.Punctuator&&b.type!==r.Keyword?E=Nn():ae("++")||ae("--")?(k=b,D=Se(),E=kn(),d&&E.type===u.Identifier&&W(E.name)&&$({},o.StrictLHSPrefix),Xe(E)||$({},o.InvalidLHSInAssignment),E=_.createUnaryExpression(D.value,E),E=_.markEnd(E,k)):ae("+")||ae("-")||ae("~")||ae("!")?(k=b,D=Se(),E=kn(),E=_.createUnaryExpression(D.value,E),E=_.markEnd(E,k)):ce("delete")||ce("void")||ce("typeof")?(k=b,D=Se(),E=kn(),E=_.createUnaryExpression(D.value,E),E=_.markEnd(E,k),d&&E.operator==="delete"&&E.argument.type===u.Identifier&&$({},o.StrictDelete)):E=Nn(),E}function Gi(D,E){var k=0;if(D.type!==r.Punctuator&&D.type!==r.Keyword)return 0;switch(D.value){case"||":k=1;break;case"&&":k=2;break;case"|":k=3;break;case"^":k=4;break;case"&":k=5;break;case"==":case"!=":case"===":case"!==":k=6;break;case"<":case">":case"<=":case">=":case"instanceof":k=7;break;case"in":k=E?7:0;break;case"<<":case">>":case">>>":k=8;break;case"+":case"-":k=9;break;case"*":case"/":case"%":k=11;break}return k}function Pi(){var D,E,k,X,pe,Ce,ot,Dt,Gt,sr;if(D=b,Gt=kn(),X=b,pe=Gi(X,C.allowIn),pe===0)return Gt;for(X.prec=pe,Se(),E=[D,b],ot=kn(),Ce=[Gt,X,ot];(pe=Gi(b,C.allowIn))>0;){for(;Ce.length>2&&pe<=Ce[Ce.length-2].prec;)ot=Ce.pop(),Dt=Ce.pop().value,Gt=Ce.pop(),k=_.createBinaryExpression(Dt,Gt,ot),E.pop(),D=E[E.length-1],_.markEnd(k,D),Ce.push(k);X=Se(),X.prec=pe,Ce.push(X),E.push(b),k=kn(),Ce.push(k)}for(sr=Ce.length-1,k=Ce[sr],E.pop();sr>1;)k=_.createBinaryExpression(Ce[sr-1].value,Ce[sr-2],k),sr-=2,D=E.pop(),_.markEnd(k,D);return k}function Aa(){var D,E,k,X,pe;return pe=b,D=Pi(),ae("?")&&(Se(),E=C.allowIn,C.allowIn=!0,k=wr(),C.allowIn=E,ne(":"),X=wr(),D=_.createConditionalExpression(D,k,X),_.markEnd(D,pe)),D}function wr(){var D,E,k,X,pe;return D=b,pe=b,X=E=Aa(),ye()&&(Xe(E)||$({},o.InvalidLHSInAssignment),d&&E.type===u.Identifier&&W(E.name)&&$(D,o.StrictLHSAssignment),D=Se(),k=wr(),X=_.markEnd(_.createAssignmentExpression(D.value,E,k),pe)),X}function nr(){var D,E=b;if(D=wr(),ae(",")){for(D=_.createSequenceExpression([D]);c<m&&ae(",");)Se(),D.expressions.push(wr());_.markEnd(D,E)}return D}function wa(){for(var D=[],E;c<m&&!(ae("}")||(E=En(),typeof E>"u"));)D.push(E);return D}function oi(){var D,E;return E=b,ne("{"),D=wa(),ne("}"),_.markEnd(_.createBlockStatement(D),E)}function un(){var D,E;return E=b,D=Se(),D.type!==r.Identifier&&fe(D),_.markEnd(_.createIdentifier(D.value),E)}function Yn(D){var E=null,k,X;return X=b,k=un(),d&&W(k.name)&&$({},o.StrictVarName),D==="const"?(ne("="),E=wr()):ae("=")&&(Se(),E=wr()),_.markEnd(_.createVariableDeclarator(k,E),X)}function xi(D){var E=[];do{if(E.push(Yn(D)),!ae(","))break;Se()}while(c<m);return E}function Ea(){var D;return he("var"),D=xi(),Oe(),_.createVariableDeclaration(D,"var")}function Ca(D){var E,k;return k=b,he(D),E=xi(D),Oe(),_.markEnd(_.createVariableDeclaration(E,D),k)}function Ki(){return ne(";"),_.createEmptyStatement()}function Fa(){var D=nr();return Oe(),_.createExpressionStatement(D)}function Sa(){var D,E,k;return he("if"),ne("("),D=nr(),ne(")"),E=Nr(),ce("else")?(Se(),k=Nr()):k=null,_.createIfStatement(D,E,k)}function Ba(){var D,E,k;return he("do"),k=C.inIteration,C.inIteration=!0,D=Nr(),C.inIteration=k,he("while"),ne("("),E=nr(),ne(")"),ae(";")&&Se(),_.createDoWhileStatement(D,E)}function Oa(){var D,E,k;return he("while"),ne("("),D=nr(),ne(")"),k=C.inIteration,C.inIteration=!0,E=Nr(),C.inIteration=k,_.createWhileStatement(D,E)}function Ma(){var D,E,k;return k=b,D=Se(),E=xi(),_.markEnd(_.createVariableDeclaration(E,D.value),k)}function Pa(){var D,E,k,X,pe,Ce,ot,Dt=C.allowIn;return D=E=k=null,he("for"),ne("("),ae(";")?Se():(ce("var")||ce("let")?(C.allowIn=!1,D=Ma(),C.allowIn=Dt,D.declarations.length===1&&ce("in")&&(Se(),X=D,pe=nr(),D=null)):(C.allowIn=!1,D=nr(),C.allowIn=Dt,ce("in")&&(Xe(D)||$({},o.InvalidLHSInForIn),Se(),X=D,pe=nr(),D=null)),typeof X>"u"&&ne(";")),typeof X>"u"&&(ae(";")||(E=nr()),ne(";"),ae(")")||(k=nr())),ne(")"),ot=C.inIteration,C.inIteration=!0,Ce=Nr(),C.inIteration=ot,typeof X>"u"?_.createForStatement(D,E,k,Ce):_.createForInStatement(X,pe,Ce)}function li(){var D=null,E;return he("continue"),f.charCodeAt(c)===59?(Se(),C.inIteration||j({},o.IllegalContinue),_.createContinueStatement(null)):R()?(C.inIteration||j({},o.IllegalContinue),_.createContinueStatement(null)):(b.type===r.Identifier&&(D=un(),E="$"+D.name,Object.prototype.hasOwnProperty.call(C.labelSet,E)||j({},o.UnknownLabel,D.name)),Oe(),D===null&&!C.inIteration&&j({},o.IllegalContinue),_.createContinueStatement(D))}function xa(){var D=null,E;return he("break"),f.charCodeAt(c)===59?(Se(),C.inIteration||C.inSwitch||j({},o.IllegalBreak),_.createBreakStatement(null)):R()?(C.inIteration||C.inSwitch||j({},o.IllegalBreak),_.createBreakStatement(null)):(b.type===r.Identifier&&(D=un(),E="$"+D.name,Object.prototype.hasOwnProperty.call(C.labelSet,E)||j({},o.UnknownLabel,D.name)),Oe(),D===null&&!(C.inIteration||C.inSwitch)&&j({},o.IllegalBreak),_.createBreakStatement(D))}function fi(){var D=null;return he("return"),C.inFunctionBody||$({},o.IllegalReturn),f.charCodeAt(c)===32&&G(f.charCodeAt(c+1))?(D=nr(),Oe(),_.createReturnStatement(D)):R()?_.createReturnStatement(null):(ae(";")||!ae("}")&&b.type!==r.EOF&&(D=nr()),Oe(),_.createReturnStatement(D))}function Ta(){var D,E;return d&&(Q(),$({},o.StrictModeWith)),he("with"),ne("("),D=nr(),ne(")"),E=Nr(),_.createWithStatement(D,E)}function Ia(){var D,E=[],k,X;for(X=b,ce("default")?(Se(),D=null):(he("case"),D=nr()),ne(":");c<m&&!(ae("}")||ce("default")||ce("case"));)k=Nr(),E.push(k);return _.markEnd(_.createSwitchCase(D,E),X)}function Na(){var D,E,k,X,pe;if(he("switch"),ne("("),D=nr(),ne(")"),ne("{"),E=[],ae("}"))return Se(),_.createSwitchStatement(D,E);for(X=C.inSwitch,C.inSwitch=!0,pe=!1;c<m&&!ae("}");)k=Ia(),k.test===null&&(pe&&j({},o.MultipleDefaultsInSwitch),pe=!0),E.push(k);return C.inSwitch=X,ne("}"),_.createSwitchStatement(D,E)}function Yi(){var D;return he("throw"),R()&&j({},o.NewlineAfterThrow),D=nr(),Oe(),_.createThrowStatement(D)}function Rn(){var D,E,k;return k=b,he("catch"),ne("("),ae(")")&&fe(b),D=un(),d&&W(D.name)&&$({},o.StrictCatchVariable),ne(")"),E=oi(),_.markEnd(_.createCatchClause(D,E),k)}function Dr(){var D,E=[],k=null;return he("try"),D=oi(),ce("catch")&&E.push(Rn()),ce("finally")&&(Se(),k=oi()),E.length===0&&!k&&j({},o.NoCatchOrFinally),_.createTryStatement(D,[],E,k)}function ur(){return he("debugger"),Oe(),_.createDebuggerStatement()}function Nr(){var D=b.type,E,k,X,pe;if(D===r.EOF&&fe(b),D===r.Punctuator&&b.value==="{")return oi();if(pe=b,D===r.Punctuator)switch(b.value){case";":return _.markEnd(Ki(),pe);case"(":return _.markEnd(Fa(),pe)}if(D===r.Keyword)switch(b.value){case"break":return _.markEnd(xa(),pe);case"continue":return _.markEnd(li(),pe);case"debugger":return _.markEnd(ur(),pe);case"do":return _.markEnd(Ba(),pe);case"for":return _.markEnd(Pa(),pe);case"function":return _.markEnd(Ln(),pe);case"if":return _.markEnd(Sa(),pe);case"return":return _.markEnd(fi(),pe);case"switch":return _.markEnd(Na(),pe);case"throw":return _.markEnd(Yi(),pe);case"try":return _.markEnd(Dr(),pe);case"var":return _.markEnd(Ea(),pe);case"while":return _.markEnd(Oa(),pe);case"with":return _.markEnd(Ta(),pe)}return E=nr(),E.type===u.Identifier&&ae(":")?(Se(),X="$"+E.name,Object.prototype.hasOwnProperty.call(C.labelSet,X)&&j({},o.Redeclaration,"Label",E.name),C.labelSet[X]=!0,k=Nr(),delete C.labelSet[X],_.markEnd(_.createLabeledStatement(E,k),pe)):(Oe(),_.markEnd(_.createExpressionStatement(E),pe))}function Ti(){var D,E=[],k,X,pe,Ce,ot,Dt,Gt,sr;for(sr=b,ne("{");c<m&&!(b.type!==r.StringLiteral||(k=b,D=En(),E.push(D),D.expression.type!==u.Literal));)X=f.slice(k.start+1,k.end-1),X==="use strict"?(d=!0,pe&&$(pe,o.StrictOctalLiteral)):!pe&&k.octal&&(pe=k);for(Ce=C.labelSet,ot=C.inIteration,Dt=C.inSwitch,Gt=C.inFunctionBody,C.labelSet={},C.inIteration=!1,C.inSwitch=!1,C.inFunctionBody=!0;c<m&&!(ae("}")||(D=En(),typeof D>"u"));)E.push(D);return ne("}"),C.labelSet=Ce,C.inIteration=ot,C.inSwitch=Dt,C.inFunctionBody=Gt,_.markEnd(_.createBlockStatement(E),sr)}function Zn(D){var E,k=[],X,pe,Ce,ot,Dt;if(ne("("),!ae(")"))for(Ce={};c<m&&(X=b,E=un(),ot="$"+X.value,d?(W(X.value)&&(pe=X,Dt=o.StrictParamName),Object.prototype.hasOwnProperty.call(Ce,ot)&&(pe=X,Dt=o.StrictParamDupe)):D||(W(X.value)?(D=X,Dt=o.StrictParamName):Z(X.value)?(D=X,Dt=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(Ce,ot)&&(D=X,Dt=o.StrictParamDupe)),k.push(E),Ce[ot]=!0,!ae(")"));)ne(",");return ne(")"),{params:k,stricted:pe,firstRestricted:D,message:Dt}}function Ln(){var D,E=[],k,X,pe,Ce,ot,Dt,Gt,sr;return sr=b,he("function"),X=b,D=un(),d?W(X.value)&&$(X,o.StrictFunctionName):W(X.value)?(ot=X,Dt=o.StrictFunctionName):Z(X.value)&&(ot=X,Dt=o.StrictReservedWord),Ce=Zn(ot),E=Ce.params,pe=Ce.stricted,ot=Ce.firstRestricted,Ce.message&&(Dt=Ce.message),Gt=d,k=Ti(),d&&ot&&j(ot,Dt),d&&pe&&$(pe,Dt),d=Gt,_.markEnd(_.createFunctionDeclaration(D,E,[],k),sr)}function Ii(){var D,E=null,k,X,pe,Ce,ot=[],Dt,Gt,sr;return sr=b,he("function"),ae("(")||(D=b,E=un(),d?W(D.value)&&$(D,o.StrictFunctionName):W(D.value)?(X=D,pe=o.StrictFunctionName):Z(D.value)&&(X=D,pe=o.StrictReservedWord)),Ce=Zn(X),ot=Ce.params,k=Ce.stricted,X=Ce.firstRestricted,Ce.message&&(pe=Ce.message),Gt=d,Dt=Ti(),d&&X&&j(X,pe),d&&k&&$(k,pe),d=Gt,_.markEnd(_.createFunctionExpression(E,ot,[],Dt),sr)}function En(){if(b.type===r.Keyword)switch(b.value){case"const":case"let":return Ca(b.value);case"function":return Ln();default:return Nr()}if(b.type!==r.EOF)return Nr()}function sn(){for(var D,E=[],k,X,pe;c<m&&(k=b,!(k.type!==r.StringLiteral||(D=En(),E.push(D),D.expression.type!==u.Literal)));)X=f.slice(k.start+1,k.end-1),X==="use strict"?(d=!0,pe&&$(pe,o.StrictOctalLiteral)):!pe&&k.octal&&(pe=k);for(;c<m&&(D=En(),!(typeof D>"u"));)E.push(D);return E}function Gs(){var D,E;return Q(),yt(),E=b,d=!1,D=sn(),_.markEnd(_.createProgram(D),E)}function ka(){var D,E,k,X=[];for(D=0;D<w.tokens.length;++D)E=w.tokens[D],k={type:E.type,value:E.value},w.range&&(k.range=E.range),w.loc&&(k.loc=E.loc),X.push(k);w.tokens=X}function Zi(D,E){var k,X,pe;k=String,typeof D!="string"&&!(D instanceof String)&&(D=k(D)),_=p,f=D,c=0,g=f.length>0?1:0,y=0,m=f.length,b=null,C={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},w={},E=E||{},E.tokens=!0,w.tokens=[],w.tokenize=!0,w.openParenToken=-1,w.openCurlyToken=-1,w.range=typeof E.range=="boolean"&&E.range,w.loc=typeof E.loc=="boolean"&&E.loc,typeof E.comment=="boolean"&&E.comment&&(w.comments=[]),typeof E.tolerant=="boolean"&&E.tolerant&&(w.errors=[]);try{if(yt(),b.type===r.EOF)return w.tokens;for(X=Se();b.type!==r.EOF;)try{X=Se()}catch(Ce){if(X=b,w.errors){w.errors.push(Ce);break}else throw Ce}ka(),pe=w.tokens,typeof w.comments<"u"&&(pe.comments=w.comments),typeof w.errors<"u"&&(pe.errors=w.errors)}catch(Ce){throw Ce}finally{w={}}return pe}function uu(D,E){var k,X;X=String,typeof D!="string"&&!(D instanceof String)&&(D=X(D)),_=p,f=D,c=0,g=f.length>0?1:0,y=0,m=f.length,b=null,C={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},w={},typeof E<"u"&&(w.range=typeof E.range=="boolean"&&E.range,w.loc=typeof E.loc=="boolean"&&E.loc,w.attachComment=typeof E.attachComment=="boolean"&&E.attachComment,w.loc&&E.source!==null&&E.source!==void 0&&(w.source=X(E.source)),typeof E.tokens=="boolean"&&E.tokens&&(w.tokens=[]),typeof E.comment=="boolean"&&E.comment&&(w.comments=[]),typeof E.tolerant=="boolean"&&E.tolerant&&(w.errors=[]),w.attachComment&&(w.range=!0,w.comments=[],w.bottomRightStack=[],w.trailingComments=[],w.leadingComments=[]));try{k=Gs(),typeof w.comments<"u"&&(k.comments=w.comments),typeof w.tokens<"u"&&(ka(),k.tokens=w.tokens),typeof w.errors<"u"&&(k.errors=w.errors)}catch(pe){throw pe}finally{w={}}return k}t.version="1.2.5",t.tokenize=Zi,t.parse=uu,t.Syntax=function(){var D,E={};typeof Object.create=="function"&&(E=Object.create(null));for(D in u)u.hasOwnProperty(D)&&(E[D]=u[D]);return typeof Object.freeze=="function"&&Object.freeze(E),E}()})})(Cp);var Z2=Cp,b0=Ap,$2=0;function X2(e,t,r){this.name=e,this.lvalue=t,this.rvalue=r,this.count=0}function J2(e,t,r,n){this.body=e,this.args=t,this.thisVars=r,this.localVars=n}function Q2(e){if(e==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?e in window:typeof hr<"u"?e in hr:typeof self<"u"?e in self:!1}function eC(e){for(var t=e.body[0].expression.callee.params,r=new Array(t.length),n=0;n<t.length;++n)r[n]=t[n].name;return r}function tC(e){for(var t=["(",e,")()"].join(""),r=Z2.parse(t,{range:!0}),n="_inline_"+$2+++"_",a=eC(r),u=new Array(a.length),l=0;l<a.length;++l)u[l]=new X2([n,"arg",l,"_"].join(""),!1,!1);for(var o=new Array(t.length),l=0,h=t.length;l<h;++l)o[l]=t.charAt(l);var p=[],f=[];function d(O){var S=n+O.replace(/\_/g,"__");return p.push(S),S}function c(O){var S="this_"+O.replace(/\_/g,"__");return f.push(S),S}function g(O,S){for(var B=O.range[0],P=O.range[1],I=B+1;I<P;++I)o[I]="";o[B]=S}function y(O){return"'"+O.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function m(O){return o.slice(O.range[0],O.range[1]).join("")}var _=1,b=2;function C(O){return O.parent.type==="AssignmentExpression"&&O.parent.left===O?O.parent.operator==="="?_:_|b:O.parent.type==="UpdateExpression"?_|b:b}(function O(S,B){if(S.parent=B,S.type==="MemberExpression")S.computed?(O(S.object,S),O(S.property,S)):S.object.type==="ThisExpression"?g(S,c(S.property.name)):O(S.object,S);else{if(S.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(S.type==="Identifier"){var P=S.name,I=a.indexOf(P);if(I>=0){var N=u[I],G=C(S);G&_&&(N.lvalue=!0),G&b&&(N.rvalue=!0),++N.count,g(S,N.name)}else Q2(P)||g(S,d(P))}else if(S.type==="Literal")typeof S.value=="string"&&g(S,y(S.value));else{if(S.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var L=Object.keys(S),q=0,Z=L.length;q<Z;++q)if(L[q]!=="parent"){var W=S[L[q]];if(W)if(W instanceof Array)for(var z=0;z<W.length;++z)W[z]&&typeof W[z].type=="string"&&O(W[z],S);else typeof W.type=="string"&&O(W,S)}}}})(r.body[0].expression.callee.body,void 0),b0(p),b0(f);var w=new J2(m(r.body[0].expression.callee.body),u,f,p);return w}var rC=tC,ol=rC,nC=vf,Yu=["args","body"],iC=["pre","post","printCode","funcName","blockSize"];function aC(e){for(var t in e)Yu.indexOf(t)<0&&iC.indexOf(t)<0&&console.warn("cwise: Unknown argument '"+t+"' passed to expression compiler");for(var r=0;r<Yu.length;++r)if(!e[Yu[r]])throw new Error("cwise: Missing argument: "+Yu[r]);return nC({args:e.args,pre:ol(e.pre||function(){}),body:ol(e.body),post:ol(e.post||function(){}),debug:!!e.printCode,funcName:e.funcName||e.body.name||"cwise",blockSize:e.blockSize||64})}var Vs=aC,uC=Y2,sC=Vs,oC=sC({args:["array","scalar","index"],body:function(t,r,n){var a=r,u;for(u=0;u<n.length-1;++u)a=a[n[u]];a[n[n.length-1]]=t}}),lC=function(t){var r=uC(t.shape);return oC(t,r),r},ds={},fC={get exports(){return ds},set exports(e){ds=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(l,o){for(var h=new Float64Array(l*o),p=0;p<h.length;p++)h[p]=u()*1e-4;return(0,n.default)(h,[l,o])};var r=ya,n=a(r);function a(l){return l&&l.__esModule?l:{default:l}}function u(){var l=2*Math.random()-1,o=2*Math.random()-1,h=l*l+o*o;return h==0||h>1?u():l*Math.sqrt(-2*Math.log(h)/h)}e.exports=t.default})(fC,ds);var nu={},cC={get exports(){return nu},set exports(e){nu=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(d,c){var g=d.shape[0],y=(0,n.default)(new Float64Array(g*g),[g,g]);switch(c){case"euclidean":for(var m=0;m<g;m++)for(var _=m+1;_<g;_++){var b=o(d.pick(m,null),d.pick(_,null));y.set(m,_,b),y.set(_,m,b)}break;case"manhattan":for(var m=0;m<g;m++)for(var _=m+1;_<g;_++){var b=h(d.pick(m,null),d.pick(_,null));y.set(m,_,b),y.set(_,m,b)}break;case"jaccard":for(var m=0;m<g;m++)for(var _=m+1;_<g;_++){var b=p(d.pick(m,null),d.pick(_,null));y.set(m,_,b),y.set(_,m,b)}break;case"dice":for(var m=0;m<g;m++)for(var _=m+1;_<g;_++){var b=f(d.pick(m,null),d.pick(_,null));y.set(m,_,b),y.set(_,m,b)}break}return y};var r=ya,n=l(r),a=Vs,u=l(a);function l(d){return d&&d.__esModule?d:{default:d}}var o=(0,u.default)({args:["array","array"],pre:function(c,g){this.sum=0},body:function(c,g){var y=c-g;this.sum+=y*y},post:function(c,g){return Math.sqrt(this.sum)}}),h=(0,u.default)({args:["array","array"],pre:function(c,g){this.sum=0},body:function(c,g){this.sum+=Math.abs(c-g)},post:function(c,g){return this.sum}}),p=(0,u.default)({args:["array","array"],pre:function(c,g){this.tf=0,this.tt=0},body:function(c,g){var y=Math.round(c),m=Math.round(g);this.tf+=+(y!=m),this.tt+=+(y==1&&m==1)},post:function(c,g){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),f=(0,u.default)({args:["array","array"],pre:function(c,g){this.tf=0,this.tt=0},body:function(c,g){var y=Math.round(c),m=Math.round(g);this.tf+=+(y!=m),this.tt+=+(y==1&&m==1)},post:function(c,g){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});e.exports=t.default})(cC,nu);var ps={},hC={get exports(){return ps},set exports(e){ps=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(f,d){for(var c=100,g=f.shape[0],y=(0,n.default)(new Float64Array(g*g),[g,g]),m=(0,n.default)(new Float64Array(g*g),[g,g]),_=void 0,b=void 0,C=1/0,w=Math.log(d),O=void 0,S=void 0,B=void 0,P=void 0,I=0;I<g;I++){_=1,b=-1/0,C=1/0;for(var N=0;N<c;N++){for(var G=0;G<g;G++)y.set(I,G,Math.exp(-f.get(I,G)*_));y.set(I,I,0),B=0;for(var G=0;G<g;G++)B+=y.get(I,G);B==0&&(B=o),P=0;for(var G=0;G<g;G++)y.set(I,G,y.get(I,G)/B),P+=f.get(I,G)*y.get(I,G);if(S=Math.log(B)+_*P,O=S-w,Math.abs(O)<=p)break;O>0?(b=_,C==1/0?_=_*2:_=(_+C)/2):(C=_,b==-1/0?_=_/2:_=(_+b)/2)}}u.default.add(m,y,y.transpose(1,0));var L=Math.max(u.default.sum(m),h);return u.default.divseq(m,L),u.default.maxseq(m,h),m};var r=ya,n=l(r),a=Us,u=l(a);function l(f){return f&&f.__esModule?f:{default:f}}var o=1e-7,h=Number.EPSILON||2220446049250313e-31,p=1e-5;e.exports=t.default})(hC,ps);var vs={},dC={get exports(){return vs},set exports(e){vs=e}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(g,y,m){var _=g.shape[0],b=g.shape[1],C=(0,n.default)(new Float64Array(_*_),[_,_]),w=(0,p.default)(g,"euclidean");c(w);var O=(m+1)/-2;u.default.powseq(u.default.divseq(u.default.addseq(w,1),m),O);for(var S=0;S<_;S++)w.set(S,S,0);var B=Math.max(u.default.sum(w),d);u.default.divs(C,w,B),u.default.maxseq(C,d);var P=(0,n.default)(new Float64Array(_*_),[_,_]),I=(0,n.default)(new Float64Array(_*_),[_,_]);u.default.div(P,y,C),u.default.logeq(P),u.default.assign(I,y);var N=u.default.sum(u.default.muleq(P,I)),G=(0,n.default)(new Float64Array(g.size),g.shape),L=(0,n.default)(new Float64Array(_*_),[_,_]);u.default.sub(L,y,C),u.default.muleq(L,w);for(var S=0;S<_;S++)for(var q=0;q<b;q++){var Z=(0,n.default)(new Float64Array(g.shape[0]),[g.shape[0]]);u.default.assign(Z,g.pick(null,q)),u.default.addseq(u.default.negeq(Z),g.get(S,q)),u.default.muleq(Z,L.pick(S,null)),G.set(S,q,u.default.sum(Z))}var W=2*(m+1)/m;return u.default.mulseq(G,W),[N,G]};var r=ya,n=f(r),a=Us,u=f(a),l=Vs,o=f(l),h=nu,p=f(h);function f(g){return g&&g.__esModule?g:{default:g}}var d=Number.EPSILON||2220446049250313e-31,c=(0,o.default)({args:["array"],body:function(y){}});e.exports=t.default})(dC,vs);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function Z(W,z){var H=[],re=!0,ee=!1,Q=void 0;try{for(var le=W[Symbol.iterator](),me;!(re=(me=le.next()).done)&&(H.push(me.value),!(z&&H.length===z));re=!0);}catch(Fe){ee=!0,Q=Fe}finally{try{!re&&le.return&&le.return()}finally{if(ee)throw Q}}return H}return function(W,z){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return Z(W,z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function Z(W,z){for(var H=0;H<z.length;H++){var re=z[H];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(W,re.key,re)}}return function(W,z,H){return z&&Z(W.prototype,z),H&&Z(W,H),W}}(),a=cs,u=ya,l=P(u),o=Us,h=P(o),p=H2,f=P(p),d=lC,c=P(d),g=Vs,y=P(g),m=ds,_=P(m),b=nu,C=P(b),w=ps,O=P(w),S=vs,B=P(S);function P(Z){return Z&&Z.__esModule?Z:{default:Z}}function I(Z){if(Array.isArray(Z)){for(var W=0,z=Array(Z.length);W<Z.length;W++)z[W]=Z[W];return z}else return Array.from(Z)}function N(Z,W){if(!(Z instanceof W))throw new TypeError("Cannot call a class as a function")}function G(Z,W){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:Z}function L(Z,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);Z.prototype=Object.create(W&&W.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,W):Z.__proto__=W)}var q=function(Z){L(W,Z);function W(z){N(this,W);var H=G(this,Object.getPrototypeOf(W).call(this));return z=z||{},H.dim=z.dim||2,H.perplexity=z.perplexity||30,H.earlyExaggeration=z.earlyExaggeration||4,H.learningRate=z.learningRate||1e3,H.nIter=z.nIter||1e3,H.metric=z.metric||"euclidean",H.barneshut=z.barneshut||!1,H.inputData=null,H.outputEmbedding=null,H}return n(W,[{key:"init",value:function(H){H=H||{};var re=H.data||[],ee=H.type||"dense";if(ee==="dense")this.inputData=(0,f.default)(re);else if(ee==="sparse"){for(var Q=[],le=1,me=function(lt){var et=Math.max.apply(null,re.map(function(at){return at[lt]}))+1;Q.push(et),le*=et},Fe=0;Fe<re[0].length;Fe++)me(Fe);this.inputData=(0,l.default)(new Float64Array(le),Q);var be=!0,Ne=!1,je=void 0;try{for(var Me=re[Symbol.iterator](),it;!(be=(it=Me.next()).done);be=!0){var qe,Te=it.value;(qe=this.inputData).set.apply(qe,I(Te).concat([1]))}}catch(Re){Ne=!0,je=Re}finally{try{!be&&Me.return&&Me.return()}finally{if(Ne)throw je}}}else throw new Error("input data type must be dense or sparse");this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,C.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,O.default)(this.distances,this.perplexity);var H=Number.MAX_VALUE,re=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),h.default.mulseq(this.P,this.earlyExaggeration);var ee=this._gradDesc(re,50,.5,0,0),Q=r(ee,2);H=Q[0],re=Q[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var le=this._gradDesc(re+1,100,.8,0,0),me=r(le,2);H=me[0],re=me[1],this.emit("progressStatus","Final optimization with momentum 0.8"),h.default.divseq(this.P,this.earlyExaggeration);var Fe=this._gradDesc(re+1,this.nIter,.8,1e-6,1e-6),be=r(Fe,2);return H=be[0],re=be[1],this.emit("progressStatus","Optimization end"),[H,re]}},{key:"rerun",value:function(){this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim);var H=this.run(),re=r(H,2),ee=re[0],Q=re[1];return[ee,Q]}},{key:"getOutput",value:function(){return(0,c.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var H=(0,l.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),re=(0,l.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),ee=0;ee<this.outputEmbedding.shape[1];ee++){var Q=h.default.sup(h.default.abs(re,this.outputEmbedding.pick(null,ee)));h.default.divs(H.pick(null,ee),this.outputEmbedding.pick(null,ee),Q)}return(0,c.default)(H)}},{key:"_gradDesc",value:function(H,re,ee){for(var Q=arguments.length<=3||arguments[3]===void 0?1e-6:arguments[3],le=arguments.length<=4||arguments[4]===void 0?1e-6:arguments[4],me=30,Fe=(0,l.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),be=new Float64Array(this.outputEmbedding.size),Ne=0;Ne<be.length;Ne++)be[Ne]=1;var je=(0,l.default)(be,this.outputEmbedding.shape),Me=Number.MAX_VALUE,it=Number.MAX_VALUE,qe=0,Te=(0,y.default)({args:["array"],pre:function(yt){this.sum=0},body:function(yt){this.sum+=yt*yt},post:function(yt){return Math.sqrt(this.sum)}}),Re=(0,y.default)({args:["array","array","array"],body:function(yt,Tt,Wt){}}),lt=void 0;for(lt=H;lt<re;lt++){var et=(0,B.default)(this.outputEmbedding,this.P,this.alpha),at=r(et,2),tt=at[0],rt=at[1],ze=Math.abs(tt-Me);Me=tt;var We=Te(rt);if(this.emit("progressIter",[lt,Me,We]),Me<it)it=Me,qe=lt;else if(lt-qe>me)break;if(Q>=We||le>=ze)break;Re(je,Fe,rt),h.default.muleq(rt,je);var Ae=(0,l.default)(new Float64Array(rt.size),rt.shape);h.default.muls(Ae,rt,this.learningRate),h.default.mulseq(Fe,ee),h.default.subeq(Fe,Ae),h.default.addeq(this.outputEmbedding,Fe),this.emit("progressData",this.getOutputScaled())}return[Me,lt]}}]),W}(a.EventEmitter);t.default=q,e.exports=t.default})(o2,fs);const pC=lf(fs);var Kl={},vC={get exports(){return Kl},set exports(e){Kl=e}},gs={},gC={get exports(){return gs},set exports(e){gs=e}},y0;function mC(){return y0||(y0=1,function(e){function t(r,n,a,u){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,a,u)}t.prototype.run=function(r,n,a,u){this._init(r,n,a,u);for(var l=0;l<this._datasetLength;l++)if(this._visited[l]!==1){this._visited[l]=1;var o=this._regionQuery(l);if(o.length<this.minPts)this.noise.push(l);else{var h=this.clusters.length;this.clusters.push([]),this._addToCluster(l,h),this._expandCluster(h,o)}}return this.clusters},t.prototype._init=function(r,n,a,u){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),a&&(this.minPts=a),u&&(this.distance=u)},t.prototype._expandCluster=function(r,n){for(var a=0;a<n.length;a++){var u=n[a];if(this._visited[u]!==1){this._visited[u]=1;var l=this._regionQuery(u);l.length>=this.minPts&&(n=this._mergeArrays(n,l))}this._assigned[u]!==1&&this._addToCluster(u,r)}},t.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1},t.prototype._regionQuery=function(r){for(var n=[],a=0;a<this._datasetLength;a++){var u=this.distance(this.dataset[r],this.dataset[a]);u<this.epsilon&&n.push(a)}return n},t.prototype._mergeArrays=function(r,n){for(var a=n.length,u=0;u<a;u++){var l=n[u];r.indexOf(l)<0&&r.push(l)}return r},t.prototype._euclideanDistance=function(r,n){for(var a=0,u=Math.min(r.length,n.length);u--;)a+=(r[u]-n[u])*(r[u]-n[u]);return Math.sqrt(a)},e.exports&&(e.exports=t)}(gC)),gs}var ms={},_C={get exports(){return ms},set exports(e){ms=e}},A0;function DC(){return A0||(A0=1,function(e){function t(r,n,a){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,a)}t.prototype.init=function(r,n,a){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof a<"u"&&(this.distance=a)},t.prototype.run=function(r,n){this.init(r,n);for(var a=this.dataset.length,u=0;u<this.k;u++)this.centroids[u]=this.randomCentroid();for(var l=!0;l;){l=this.assign();for(var o=0;o<this.k;o++){for(var h=new Array(c),p=0,f=0;f<c;f++)h[f]=0;for(var d=0;d<a;d++){var c=this.dataset[d].length;if(o===this.assignments[d]){for(var f=0;f<c;f++)h[f]+=this.dataset[d][f];p++}}if(p>0){for(var f=0;f<c;f++)h[f]/=p;this.centroids[o]=h}else this.centroids[o]=this.randomCentroid(),l=!0}}return this.getClusters()},t.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,a;do a=Math.round(Math.random()*r),n=this.dataset[a];while(this.centroids.indexOf(n)>=0);return n},t.prototype.assign=function(){for(var r=!1,n=this.dataset.length,a,u=0;u<n;u++)a=this.argmin(this.dataset[u],this.centroids,this.distance),a!=this.assignments[u]&&(this.assignments[u]=a,r=!0);return r},t.prototype.getClusters=function(){for(var r=new Array(this.k),n,a=0;a<this.assignments.length;a++)n=this.assignments[a],typeof r[n]>"u"&&(r[n]=[]),r[n].push(a);return r},t.prototype.argmin=function(r,n,a){for(var u=Number.MAX_VALUE,l=0,o=n.length,h,p=0;p<o;p++)h=a(r,n[p]),h<u&&(u=h,l=p);return l},t.prototype.distance=function(r,n){for(var a=0,u=Math.min(r.length,n.length);u--;){var l=r[u]-n[u];a+=l*l}return Math.sqrt(a)},e.exports&&(e.exports=t)}(_C)),ms}var _s={},bC={get exports(){return _s},set exports(e){_s=e}},Ds={},yC={get exports(){return Ds},set exports(e){Ds=e}},w0;function Fp(){return w0||(w0=1,function(e){function t(r,n,a){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,a)}t.prototype.insert=function(r,n){for(var a=this._queue.length,u=a;u--;){var l=this._priorities[u];this._sorting==="desc"?n>l&&(a=u):n<l&&(a=u)}this._insertAt(r,n,a)},t.prototype.remove=function(r){for(var n=this._queue.length;n--;){var a=this._queue[n];if(r===a){this._queue.splice(n,1),this._priorities.splice(n,1);break}}},t.prototype.forEach=function(r){this._queue.forEach(r)},t.prototype.getElements=function(){return this._queue},t.prototype.getElementPriority=function(r){return this._priorities[r]},t.prototype.getPriorities=function(){return this._priorities},t.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,a=this._queue.length;n<a;n++)r.push([this._queue[n],this._priorities[n]]);return r},t.prototype._init=function(r,n,a){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var u=0;u<r.length;u++)this.insert(r[u],n[u])}a&&(this._sorting=a)},t.prototype._insertAt=function(r,n,a){this._queue.length===a?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(a,0,r),this._priorities.splice(a,0,n))},e.exports&&(e.exports=t)}(yC)),Ds}var E0;function AC(){return E0||(E0=1,function(e){if(e.exports)var t=Fp();function r(n,a,u,l){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,a,u,l)}r.prototype.run=function(n,a,u,l){this._init(n,a,u,l);for(var o=0,h=this.dataset.length;o<h;o++)if(this._processed[o]!==1){this._processed[o]=1,this.clusters.push([o]);var p=this.clusters.length-1;this._orderedList.push(o);var f=new t(null,null,"asc"),d=this._regionQuery(o);this._distanceToCore(o)!==void 0&&(this._updateQueue(o,d,f),this._expandCluster(p,f))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var n=[],a=0,u=this._orderedList.length;a<u;a++){var l=this._orderedList[a],o=this._reachability[l];n.push([l,o])}return n},r.prototype._init=function(n,a,u,l){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}a&&(this.epsilon=a),u&&(this.minPts=u),l&&(this.distance=l)},r.prototype._updateQueue=function(n,a,u){var l=this;this._coreDistance=this._distanceToCore(n),a.forEach(function(o){if(l._processed[o]===void 0){var h=l.distance(l.dataset[n],l.dataset[o]),p=Math.max(l._coreDistance,h);l._reachability[o]===void 0?(l._reachability[o]=p,u.insert(o,p)):p<l._reachability[o]&&(l._reachability[o]=p,u.remove(o),u.insert(o,p))}})},r.prototype._expandCluster=function(n,a){for(var u=a.getElements(),l=0,o=u.length;l<o;l++){var h=u[l];if(this._processed[h]===void 0){var p=this._regionQuery(h);this._processed[h]=1,this.clusters[n].push(h),this._orderedList.push(h),this._distanceToCore(h)!==void 0&&(this._updateQueue(h,p,a),this._expandCluster(n,a))}}},r.prototype._distanceToCore=function(n){for(var a=this.epsilon,u=0;u<a;u++){var l=this._regionQuery(n,u);if(l.length>=this.minPts)return u}},r.prototype._regionQuery=function(n,a){a=a||this.epsilon;for(var u=[],l=0,o=this.dataset.length;l<o;l++)this.distance(this.dataset[n],this.dataset[l])<a&&u.push(l);return u},r.prototype._euclideanDistance=function(n,a){for(var u=0,l=Math.min(n.length,a.length);l--;)u+=(n[l]-a[l])*(n[l]-a[l]);return Math.sqrt(u)},e.exports&&(e.exports=r)}(bC)),_s}(function(e){e.exports&&(e.exports={DBSCAN:mC(),KMEANS:DC(),OPTICS:AC(),PriorityQueue:Fp()})})(vC);var Yl={},wC={get exports(){return Yl},set exports(e){Yl=e}};(function(e){var t=parseInt(Number.MAX_SAFE_INTEGER/2)||4503599627370496,r=0;function n(){this.C=null,this.row_covered=[],this.col_covered=[],this.n=0,this.Z0_r=0,this.Z0_c=0,this.marked=null,this.path=null}n.prototype.pad_matrix=function(o,h){h=h||r;var p=0,f=o.length,d;for(d=0;d<f;++d)o[d].length>p&&(p=o[d].length);f=p>f?p:f;var c=[];for(d=0;d<f;++d){for(var g=o[d]||[],y=g.slice();f>y.length;)y.push(h);c.push(y)}return c},n.prototype.compute=function(o,h){h=h||{},h.padValue=h.padValue||r,this.C=this.pad_matrix(o,h.padValue),this.n=this.C.length,this.original_length=o.length,this.original_width=o[0].length;for(var p=[];p.length<this.n;)p.push(!1);this.row_covered=p.slice(),this.col_covered=p.slice(),this.Z0_r=0,this.Z0_c=0,this.path=this.__make_matrix(this.n*2,0),this.marked=this.__make_matrix(this.n,0);for(var f=1,d={1:this.__step1,2:this.__step2,3:this.__step3,4:this.__step4,5:this.__step5,6:this.__step6};;){var c=d[f];if(!c)break;f=c.apply(this)}for(var g=[],y=0;y<this.original_length;++y)for(var m=0;m<this.original_width;++m)this.marked[y][m]==1&&g.push([y,m]);return g},n.prototype.__make_matrix=function(o,h){for(var p=[],f=0;f<o;++f){p[f]=[];for(var d=0;d<o;++d)p[f][d]=h}return p},n.prototype.__step1=function(){for(var o=0;o<this.n;++o)for(var h=Math.min.apply(Math,this.C[o]),p=0;p<this.n;++p)this.C[o][p]-=h;return 2},n.prototype.__step2=function(){for(var o=0;o<this.n;++o)for(var h=0;h<this.n;++h)if(this.C[o][h]===0&&!this.col_covered[h]&&!this.row_covered[o]){this.marked[o][h]=1,this.col_covered[h]=!0,this.row_covered[o]=!0;break}return this.__clear_covers(),3},n.prototype.__step3=function(){for(var o=0,h=0;h<this.n;++h)for(var p=0;p<this.n;++p)this.marked[h][p]==1&&this.col_covered[p]==!1&&(this.col_covered[p]=!0,++o);return o>=this.n?7:4},n.prototype.__step4=function(){for(var o=!1,h=-1,p=-1,f=-1;!o;){var d=this.__find_a_zero();if(h=d[0],p=d[1],h<0)return 6;if(this.marked[h][p]=2,f=this.__find_star_in_row(h),f>=0)p=f,this.row_covered[h]=!0,this.col_covered[p]=!1;else return this.Z0_r=h,this.Z0_c=p,5}},n.prototype.__step5=function(){var o=0;this.path[o][0]=this.Z0_r,this.path[o][1]=this.Z0_c;for(var h=!1;!h;){var p=this.__find_star_in_col(this.path[o][1]);if(p>=0?(o++,this.path[o][0]=p,this.path[o][1]=this.path[o-1][1]):h=!0,!h){var f=this.__find_prime_in_row(this.path[o][0]);o++,this.path[o][0]=this.path[o-1][0],this.path[o][1]=f}}return this.__convert_path(this.path,o),this.__clear_covers(),this.__erase_primes(),3},n.prototype.__step6=function(){for(var o=this.__find_smallest(),h=0;h<this.n;++h)for(var p=0;p<this.n;++p)this.row_covered[h]&&(this.C[h][p]+=o),this.col_covered[p]||(this.C[h][p]-=o);return 4},n.prototype.__find_smallest=function(){for(var o=t,h=0;h<this.n;++h)for(var p=0;p<this.n;++p)!this.row_covered[h]&&!this.col_covered[p]&&o>this.C[h][p]&&(o=this.C[h][p]);return o},n.prototype.__find_a_zero=function(){for(var o=0;o<this.n;++o)for(var h=0;h<this.n;++h)if(this.C[o][h]===0&&!this.row_covered[o]&&!this.col_covered[h])return[o,h];return[-1,-1]},n.prototype.__find_star_in_row=function(o){for(var h=0;h<this.n;++h)if(this.marked[o][h]==1)return h;return-1},n.prototype.__find_star_in_col=function(o){for(var h=0;h<this.n;++h)if(this.marked[h][o]==1)return h;return-1},n.prototype.__find_prime_in_row=function(o){for(var h=0;h<this.n;++h)if(this.marked[o][h]==2)return h;return-1},n.prototype.__convert_path=function(o,h){for(var p=0;p<=h;++p)this.marked[o[p][0]][o[p][1]]=this.marked[o[p][0]][o[p][1]]==1?0:1},n.prototype.__clear_covers=function(){for(var o=0;o<this.n;++o)this.row_covered[o]=!1,this.col_covered[o]=!1},n.prototype.__erase_primes=function(){for(var o=0;o<this.n;++o)for(var h=0;h<this.n;++h)this.marked[o][h]==2&&(this.marked[o][h]=0)};function a(o,h){var p,f;if(!h){var d=-1/0;for(p=0;p<o.length;++p)for(f=0;f<o[p].length;++f)o[p][f]>d&&(d=o[p][f]);h=function(y){return d-y}}var c=[];for(p=0;p<o.length;++p){var g=o[p];for(c[p]=[],f=0;f<g.length;++f)c[p][f]=h(o[p][f])}return c}function u(o){var h=[],p,f;for(p=0;p<o.length;++p)for(f=0;f<o[p].length;++f){var d=String(o[p][f]).length;(!h[f]||d>=h[f])&&(h[f]=d)}var c="";for(p=0;p<o.length;++p){for(f=0;f<o[p].length;++f){for(var g=String(o[p][f]);g.length<h[f];)g=" "+g;c+=g,f!=o[p].length-1&&(c+=" ")}p!=o[p].length-1&&(c+=`
`)}return c}function l(o,h){var p=new n;return p.compute(o,h)}l.version="1.2.2",l.format_matrix=u,l.make_cost_matrix=a,l.Munkres=n,e.exports&&(e.exports=l)})(wC);const EC=Yl;function C0(e,t,r){const n=e.slice();return n[31]=t[r][0],n[32]=t[r][1],n}function F0(e){let t=[],r=new Map,n,a,u,l=Object.entries(e[4].weightedPrompts);const o=h=>h[31];for(let h=0;h<l.length;h+=1){let p=C0(e,l,h),f=o(p);r.set(f,t[h]=B0(f,p))}return a=new iu({props:{xy:e[7],radius:e[1],color:"rgba(136,157,191, 1)",handleMouseDown:e[19]}}),{c(){for(let h=0;h<t.length;h+=1)t[h].c();n=Yt(),pt(a.$$.fragment)},l(h){for(let p=0;p<t.length;p+=1)t[p].l(h);n=Yt(),vt(a.$$.fragment,h)},m(h,p){for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(h,p);Ee(h,n,p),gt(a,h,p),u=!0},p(h,p){p[0]&221&&(l=Object.entries(h[4].weightedPrompts),Dn(),t=Bi(t,p,o,1,h,l,r,n.parentNode,Bd,B0,n,C0),bn());const f={};p[0]&128&&(f.xy=h[7]),p[0]&2&&(f.radius=h[1]),p[0]&32&&(f.handleMouseDown=h[19]),a.$set(f)},i(h){if(!u){for(let p=0;p<l.length;p+=1)xe(t[p]);xe(a.$$.fragment,h),u=!0}},o(h){for(let p=0;p<t.length;p+=1)Ue(t[p]);Ue(a.$$.fragment,h),u=!1},d(h){for(let p=0;p<t.length;p+=1)t[p].d(h);h&&V(n),mt(a,h)}}}function S0(e){let t,r;return t=new cp({props:{p1:e[6][e[31]].embedXY,p2:e[7]}}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,a){gt(t,n,a),r=!0},p(n,a){const u={};a[0]&80&&(u.p1=n[6][n[31]].embedXY),a[0]&128&&(u.p2=n[7]),t.$set(u)},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function B0(e,t){let r,n,a,u,l,o=t[32].embedActive&&S0(t);return a=new iu({props:{xy:t[6][t[31]].embedXY,radius:t[0],color:"rgba(136,157,191, 1)"}}),u=new ks({props:{xy:[t[6][t[31]].embedXY[0]-nn(t[2],t[32].text.length,t[3])[0]/2,t[6][t[31]].embedXY[1]+t[0]],color:`rgba(255,255,255,${Tr(t[32].embedWeight)}`,wh:nn(t[2],t[32].text.length,t[3]),fontSize:t[3],text:t[32].text}}),{key:e,first:null,c(){r=Yt(),o&&o.c(),n=Yt(),pt(a.$$.fragment),pt(u.$$.fragment),this.h()},l(h){r=Yt(),o&&o.l(h),n=Yt(),vt(a.$$.fragment,h),vt(u.$$.fragment,h),this.h()},h(){this.first=r},m(h,p){Ee(h,r,p),o&&o.m(h,p),Ee(h,n,p),gt(a,h,p),gt(u,h,p),l=!0},p(h,p){t=h,t[32].embedActive?o?(o.p(t,p),p[0]&16&&xe(o,1)):(o=S0(t),o.c(),xe(o,1),o.m(n.parentNode,n)):o&&(Dn(),Ue(o,1,1,()=>{o=null}),bn());const f={};p[0]&80&&(f.xy=t[6][t[31]].embedXY),p[0]&1&&(f.radius=t[0]),a.$set(f);const d={};p[0]&93&&(d.xy=[t[6][t[31]].embedXY[0]-nn(t[2],t[32].text.length,t[3])[0]/2,t[6][t[31]].embedXY[1]+t[0]]),p[0]&16&&(d.color=`rgba(255,255,255,${Tr(t[32].embedWeight)}`),p[0]&28&&(d.wh=nn(t[2],t[32].text.length,t[3])),p[0]&8&&(d.fontSize=t[3]),p[0]&16&&(d.text=t[32].text),u.$set(d)},i(h){l||(xe(o),xe(a.$$.fragment,h),xe(u.$$.fragment,h),l=!0)},o(h){Ue(o),Ue(a.$$.fragment,h),Ue(u.$$.fragment,h),l=!1},d(h){h&&V(r),o&&o.d(h),h&&V(n),mt(a,h),mt(u,h)}}}function CC(e){let t,r=Object.entries(e[4].weightedPrompts).length>0&&Object.entries(e[6]||{}).length>0,n,a,u,l=r&&F0(e);return{c(){t=Ct("svg"),l&&l.c(),this.h()},l(o){t=Ft(o,"svg",{id:!0,class:!0});var h=ie(t);l&&l.l(h),h.forEach(V),this.h()},h(){T(t,"id","svg"),T(t,"class","w-full h-full")},m(o,h){Ee(o,t,h),l&&l.m(t,null),n=!0,a||(u=[ke(t,"mousemove",e[9]),ke(t,"mouseup",e[10]),ke(t,"dblclick",e[8])],a=!0)},p(o,h){h[0]&80&&(r=Object.entries(o[4].weightedPrompts).length>0&&Object.entries(o[6]||{}).length>0),r?l?(l.p(o,h),h[0]&80&&xe(l,1)):(l=F0(o),l.c(),xe(l,1),l.m(t,null)):l&&(Dn(),Ue(l,1,1,()=>{l=null}),bn())},i(o){n||(xe(l),n=!0)},o(o){Ue(l),n=!1},d(o){o&&V(t),l&&l.d(),a=!1,Vr(u)}}}function FC(e,t,r){let n,a,u,l,o;Ot(e,An,ee=>r(4,o=ee));let{center:h=[100,100]}=t,{dimensions:p=[100,100]}=t,{pointRadius:f=4}=t,{markerRadius:d=10}=t,{textWidth:c=150}=t,{fontSize:g=12}=t,{innerPad:y=100}=t,m=!1,_=null,b=p,C=[0,0];function w(){return{"00":[C[0],C[1]],"01":[C[0],C[1]+b[1]],11:[C[0]+b[0],C[1]+b[1]],10:[C[0]+b[0],C[1]]}}function O(ee,Q){return ee.map(le=>Q.map(me=>Ju(le,me)))}function S(ee,Q){if(ee.length!==Q.length)throw new Error("Both sets should have the same number of points");const le=O(ee,Q),me=EC(le);return me?me.map(([Fe,be])=>({ids:[Fe,be],points:[ee[Fe],Q[be]]})):null}function B(ee){const Q=ee.reduce((le,me)=>Kr(le,me),[0,0]);return mn(Q,1/ee.length)}function P(ee){const Q=w();switch(ee){case 2:return[mn(Kr(Q["00"],Q["01"]),.5),mn(Kr(Q[10],Q[11]),.5)];case 4:return[Q["00"],Q["01"],Q[11],Q[10]];case 6:return[mn(Kr(Q["00"],Q["01"]),.5),mn(Kr(Q[10],Q[11]),.5),Q["00"],Q["01"],Q[11],Q[10]];case 8:return[mn(Kr(Q["00"],Q["01"]),.5),mn(Kr(Q[10],Q[11]),.5),Q["00"],Q["01"],Q[11],Q[10],mn(Kr(Q["00"],Q[10]),.5),mn(Kr(Q["01"],Q[11]),.5)];default:return null}}function I(ee){o.embeddings&&o.scaledEmbedMappings&&(H(),q(n,a,u,b,ee))}function N(ee,Q){ee&&Q&&(H(),q(n,a,u,b,l))}function G(ee,Q){q(n,ee,Q,b,l)}function L(ee){o.embeddings&&o.scaledEmbedMappings&&(H(),q(n,a,u,ee,l))}function q(ee,Q,le,me,Fe){if(!_)return;let be={...o.weightedPrompts},Ne=0;Object.values(_).forEach(qe=>{Object.values(_).forEach(Te=>{const Re=Ju(qe.embedXY,Te.embedXY);Re>Ne&&(Ne=Re)})});const je=Object.entries(_).reduce((qe,[Te,Re])=>{const lt=Ju(ee,Re.embedXY);return qe[Te]=lt,qe},{}),Me=(qe,Te)=>{const Re=qe?Math.round(Math.pow(1-Te/Ne,le)*100)/100:0;return Re<0?0:Re},it=(qe,Te)=>{const Re=qe?Math.round((1-Te/Ne)*100)/100:0;return Re<0?0:Re};Object.entries(je).sort((qe,Te)=>qe[1]-Te[1]).forEach(([qe,Te],Re)=>{if(!be[qe])return;const lt=Re<Fe;be[qe]={...be[qe],embedWeight:Q?Me(lt,Te):it(lt,Te),embedActive:lt}}),Nt.update({...o,embedMarker:n,weightedPrompts:be})}function Z(ee){const Q=Wi(ee,svg);r(7,n=Q),q(n,a,u,b,l)}function W(ee){if(m){const Q=Wi(ee,svg);r(7,n=Q),q(n,a,u,b,l)}}function z(ee){r(5,m=!1)}function H(){const Q=Object.keys(o.scaledEmbedMappings).reduce((me,Fe,be)=>(me[Fe]={embedXY:[C[0]+b[0]*o.scaledEmbedMappings[be][0],C[1]+b[1]*o.scaledEmbedMappings[be][1]]},me),{}),le=me=>{if(!me.length)return h;const Fe=me.map(be=>Q[be].embedXY);return B(Fe)};if(o.embedClusters){const me=o.embedClusters,Fe=o.embedClusterSets[me];let be=Fe.map(Me=>le(Me));const Ne=P(me),je=S(be,Ne);je&&je.forEach(Me=>{const it=Me.ids[0],qe=Me.points[1];Fe[it].forEach(Te=>{Q[Te].embedXY=B([Q[Te].embedXY,qe])})})}r(6,_=Q)}const re=()=>r(5,m=!0);return e.$$set=ee=>{"center"in ee&&r(11,h=ee.center),"dimensions"in ee&&r(12,p=ee.dimensions),"pointRadius"in ee&&r(0,f=ee.pointRadius),"markerRadius"in ee&&r(1,d=ee.markerRadius),"textWidth"in ee&&r(2,c=ee.textWidth),"fontSize"in ee&&r(3,g=ee.fontSize),"innerPad"in ee&&r(13,y=ee.innerPad)},e.$$.update=()=>{if(e.$$.dirty[0]&2064&&r(7,n=o.embedMarker||h),e.$$.dirty[0]&16&&r(18,a=o.embedExponentialScaling),e.$$.dirty[0]&16&&r(17,u=o.embedWeightScaling),e.$$.dirty[0]&16&&r(16,l=o.embedPromptLimit||Object.keys(o.weightedPrompts).length),e.$$.dirty[0]&393216&&G(a,u),e.$$.dirty[0]&16&&N(o.embeddings,o.scaledEmbedMappings),e.$$.dirty[0]&45056){const ee=Math.min(...p),Q=p[0]===ee,le=p[1]===ee;r(15,C=[Math.max(Q?0:(p[0]-ee)/2,y),Math.max(le?0:(p[1]-ee)/2,y)]),r(14,b=[p[0]-2*C[0],p[1]-2*C[1]])}e.$$.dirty[0]&16384&&L(b),e.$$.dirty[0]&65536&&I(l)},[f,d,c,g,o,m,_,n,Z,W,z,h,p,y,b,C,l,u,a,re]}class SC extends Rt{constructor(t){super(),Lt(this,t,FC,CC,Ut,{center:11,dimensions:12,pointRadius:0,markerRadius:1,textWidth:2,fontSize:3,innerPad:13},null,[-1,-1])}}var Zl={},Sp={},bs={},BC={get exports(){return bs},set exports(e){bs=e}},ys={},OC={get exports(){return ys},set exports(e){ys=e}},Bp=function(t,r){return function(){for(var a=new Array(arguments.length),u=0;u<a.length;u++)a[u]=arguments[u];return t.apply(r,a)}},MC=Bp,Mi=Object.prototype.toString;function gf(e){return Array.isArray(e)}function $l(e){return typeof e>"u"}function PC(e){return e!==null&&!$l(e)&&e.constructor!==null&&!$l(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Op(e){return Mi.call(e)==="[object ArrayBuffer]"}function xC(e){return Mi.call(e)==="[object FormData]"}function TC(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Op(e.buffer),t}function IC(e){return typeof e=="string"}function NC(e){return typeof e=="number"}function Mp(e){return e!==null&&typeof e=="object"}function es(e){if(Mi.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function kC(e){return Mi.call(e)==="[object Date]"}function RC(e){return Mi.call(e)==="[object File]"}function LC(e){return Mi.call(e)==="[object Blob]"}function Pp(e){return Mi.call(e)==="[object Function]"}function UC(e){return Mp(e)&&Pp(e.pipe)}function VC(e){return Mi.call(e)==="[object URLSearchParams]"}function jC(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function qC(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function mf(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),gf(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}function Xl(){var e={};function t(a,u){es(e[u])&&es(a)?e[u]=Xl(e[u],a):es(a)?e[u]=Xl({},a):gf(a)?e[u]=a.slice():e[u]=a}for(var r=0,n=arguments.length;r<n;r++)mf(arguments[r],t);return e}function zC(e,t,r){return mf(t,function(a,u){r&&typeof a=="function"?e[u]=MC(a,r):e[u]=a}),e}function WC(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Zr={isArray:gf,isArrayBuffer:Op,isBuffer:PC,isFormData:xC,isArrayBufferView:TC,isString:IC,isNumber:NC,isObject:Mp,isPlainObject:es,isUndefined:$l,isDate:kC,isFile:RC,isBlob:LC,isFunction:Pp,isStream:UC,isURLSearchParams:VC,isStandardBrowserEnv:qC,forEach:mf,merge:Xl,extend:zC,trim:jC,stripBOM:WC},fa=Zr;function O0(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var xp=function(t,r,n){if(!r)return t;var a;if(n)a=n(r);else if(fa.isURLSearchParams(r))a=r.toString();else{var u=[];fa.forEach(r,function(h,p){h===null||typeof h>"u"||(fa.isArray(h)?p=p+"[]":h=[h],fa.forEach(h,function(d){fa.isDate(d)?d=d.toISOString():fa.isObject(d)&&(d=JSON.stringify(d)),u.push(O0(p)+"="+O0(d))}))}),a=u.join("&")}if(a){var l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t},HC=Zr;function js(){this.handlers=[]}js.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};js.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};js.prototype.forEach=function(t){HC.forEach(this.handlers,function(n){n!==null&&t(n)})};var GC=js,KC=Zr,YC=function(t,r){KC.forEach(t,function(a,u){u!==r&&u.toUpperCase()===r.toUpperCase()&&(t[r]=a,delete t[u])})},Tp=function(t,r,n,a,u){return t.config=r,n&&(t.code=n),t.request=a,t.response=u,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},Ip={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ll,M0;function Np(){if(M0)return ll;M0=1;var e=Tp;return ll=function(r,n,a,u,l){var o=new Error(r);return e(o,n,a,u,l)},ll}var fl,P0;function ZC(){if(P0)return fl;P0=1;var e=Np();return fl=function(r,n,a){var u=a.config.validateStatus;!a.status||!u||u(a.status)?r(a):n(e("Request failed with status code "+a.status,a.config,null,a.request,a))},fl}var cl,x0;function $C(){if(x0)return cl;x0=1;var e=Zr;return cl=e.isStandardBrowserEnv()?function(){return{write:function(n,a,u,l,o,h){var p=[];p.push(n+"="+encodeURIComponent(a)),e.isNumber(u)&&p.push("expires="+new Date(u).toGMTString()),e.isString(l)&&p.push("path="+l),e.isString(o)&&p.push("domain="+o),h===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var a=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cl}var hl,T0;function XC(){return T0||(T0=1,hl=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}),hl}var dl,I0;function JC(){return I0||(I0=1,dl=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}),dl}var pl,N0;function QC(){if(N0)return pl;N0=1;var e=XC(),t=JC();return pl=function(n,a){return n&&!e(a)?t(n,a):a},pl}var vl,k0;function eF(){if(k0)return vl;k0=1;var e=Zr,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return vl=function(n){var a={},u,l,o;return n&&e.forEach(n.split(`
`),function(p){if(o=p.indexOf(":"),u=e.trim(p.substr(0,o)).toLowerCase(),l=e.trim(p.substr(o+1)),u){if(a[u]&&t.indexOf(u)>=0)return;u==="set-cookie"?a[u]=(a[u]?a[u]:[]).concat([l]):a[u]=a[u]?a[u]+", "+l:l}}),a},vl}var gl,R0;function tF(){if(R0)return gl;R0=1;var e=Zr;return gl=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),a;function u(l){var o=l;return r&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return a=u(window.location.href),function(o){var h=e.isString(o)?u(o):o;return h.protocol===a.protocol&&h.host===a.host}}():function(){return function(){return!0}}(),gl}var ml,L0;function qs(){if(L0)return ml;L0=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,ml=e,ml}var _l,U0;function V0(){if(U0)return _l;U0=1;var e=Zr,t=ZC(),r=$C(),n=xp,a=QC(),u=eF(),l=tF(),o=Np(),h=Ip,p=qs();return _l=function(d){return new Promise(function(g,y){var m=d.data,_=d.headers,b=d.responseType,C;function w(){d.cancelToken&&d.cancelToken.unsubscribe(C),d.signal&&d.signal.removeEventListener("abort",C)}e.isFormData(m)&&delete _["Content-Type"];var O=new XMLHttpRequest;if(d.auth){var S=d.auth.username||"",B=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";_.Authorization="Basic "+btoa(S+":"+B)}var P=a(d.baseURL,d.url);O.open(d.method.toUpperCase(),n(P,d.params,d.paramsSerializer),!0),O.timeout=d.timeout;function I(){if(O){var G="getAllResponseHeaders"in O?u(O.getAllResponseHeaders()):null,L=!b||b==="text"||b==="json"?O.responseText:O.response,q={data:L,status:O.status,statusText:O.statusText,headers:G,config:d,request:O};t(function(W){g(W),w()},function(W){y(W),w()},q),O=null}}if("onloadend"in O?O.onloadend=I:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(I)},O.onabort=function(){O&&(y(o("Request aborted",d,"ECONNABORTED",O)),O=null)},O.onerror=function(){y(o("Network Error",d,null,O)),O=null},O.ontimeout=function(){var L=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",q=d.transitional||h;d.timeoutErrorMessage&&(L=d.timeoutErrorMessage),y(o(L,d,q.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",O)),O=null},e.isStandardBrowserEnv()){var N=(d.withCredentials||l(P))&&d.xsrfCookieName?r.read(d.xsrfCookieName):void 0;N&&(_[d.xsrfHeaderName]=N)}"setRequestHeader"in O&&e.forEach(_,function(L,q){typeof m>"u"&&q.toLowerCase()==="content-type"?delete _[q]:O.setRequestHeader(q,L)}),e.isUndefined(d.withCredentials)||(O.withCredentials=!!d.withCredentials),b&&b!=="json"&&(O.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&O.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&O.upload&&O.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(C=function(G){O&&(y(!G||G&&G.type?new p("canceled"):G),O.abort(),O=null)},d.cancelToken&&d.cancelToken.subscribe(C),d.signal&&(d.signal.aborted?C():d.signal.addEventListener("abort",C))),m||(m=null),O.send(m)})},_l}var Or=Zr,j0=YC,rF=Tp,nF=Ip,iF={"Content-Type":"application/x-www-form-urlencoded"};function q0(e,t){!Or.isUndefined(e)&&Or.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function aF(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=V0()),e}function uF(e,t,r){if(Or.isString(e))try{return(t||JSON.parse)(e),Or.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var zs={transitional:nF,adapter:aF(),transformRequest:[function(t,r){return j0(r,"Accept"),j0(r,"Content-Type"),Or.isFormData(t)||Or.isArrayBuffer(t)||Or.isBuffer(t)||Or.isStream(t)||Or.isFile(t)||Or.isBlob(t)?t:Or.isArrayBufferView(t)?t.buffer:Or.isURLSearchParams(t)?(q0(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Or.isObject(t)||r&&r["Content-Type"]==="application/json"?(q0(r,"application/json"),uF(t)):t}],transformResponse:[function(t){var r=this.transitional||zs.transitional,n=r&&r.silentJSONParsing,a=r&&r.forcedJSONParsing,u=!n&&this.responseType==="json";if(u||a&&Or.isString(t)&&t.length)try{return JSON.parse(t)}catch(l){if(u)throw l.name==="SyntaxError"?rF(l,this,"E_JSON_PARSE"):l}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Or.forEach(["delete","get","head"],function(t){zs.headers[t]={}});Or.forEach(["post","put","patch"],function(t){zs.headers[t]=Or.merge(iF)});var _f=zs,sF=Zr,oF=_f,lF=function(t,r,n){var a=this||oF;return sF.forEach(n,function(l){t=l.call(a,t,r)}),t},Dl,z0;function kp(){return z0||(z0=1,Dl=function(t){return!!(t&&t.__CANCEL__)}),Dl}var W0=Zr,bl=lF,fF=kp(),cF=_f,hF=qs();function yl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hF("canceled")}var dF=function(t){yl(t),t.headers=t.headers||{},t.data=bl.call(t,t.data,t.headers,t.transformRequest),t.headers=W0.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),W0.forEach(["delete","get","head","post","put","patch","common"],function(a){delete t.headers[a]});var r=t.adapter||cF.adapter;return r(t).then(function(a){return yl(t),a.data=bl.call(t,a.data,a.headers,t.transformResponse),a},function(a){return fF(a)||(yl(t),a&&a.response&&(a.response.data=bl.call(t,a.response.data,a.response.headers,t.transformResponse))),Promise.reject(a)})},rn=Zr,Rp=function(t,r){r=r||{};var n={};function a(f,d){return rn.isPlainObject(f)&&rn.isPlainObject(d)?rn.merge(f,d):rn.isPlainObject(d)?rn.merge({},d):rn.isArray(d)?d.slice():d}function u(f){if(rn.isUndefined(r[f])){if(!rn.isUndefined(t[f]))return a(void 0,t[f])}else return a(t[f],r[f])}function l(f){if(!rn.isUndefined(r[f]))return a(void 0,r[f])}function o(f){if(rn.isUndefined(r[f])){if(!rn.isUndefined(t[f]))return a(void 0,t[f])}else return a(void 0,r[f])}function h(f){if(f in r)return a(t[f],r[f]);if(f in t)return a(void 0,t[f])}var p={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:h};return rn.forEach(Object.keys(t).concat(Object.keys(r)),function(d){var c=p[d]||u,g=c(d);rn.isUndefined(g)&&c!==h||(n[d]=g)}),n},Al,H0;function Lp(){return H0||(H0=1,Al={version:"0.26.1"}),Al}var pF=Lp().version,Df={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Df[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var G0={};Df.transitional=function(t,r,n){function a(u,l){return"[Axios v"+pF+"] Transitional option '"+u+"'"+l+(n?". "+n:"")}return function(u,l,o){if(t===!1)throw new Error(a(l," has been removed"+(r?" in "+r:"")));return r&&!G0[l]&&(G0[l]=!0,console.warn(a(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(u,l,o):!0}};function vF(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),a=n.length;a-- >0;){var u=n[a],l=t[u];if(l){var o=e[u],h=o===void 0||l(o,u,e);if(h!==!0)throw new TypeError("option "+u+" must be "+h);continue}if(r!==!0)throw Error("Unknown option "+u)}}var gF={assertOptions:vF,validators:Df},Up=Zr,mF=xp,K0=GC,Y0=dF,Ws=Rp,Vp=gF,ca=Vp.validators;function au(e){this.defaults=e,this.interceptors={request:new K0,response:new K0}}au.prototype.request=function(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Ws(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Vp.assertOptions(n,{silentJSONParsing:ca.transitional(ca.boolean),forcedJSONParsing:ca.transitional(ca.boolean),clarifyTimeoutError:ca.transitional(ca.boolean)},!1);var a=[],u=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(u=u&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});var l=[];this.interceptors.response.forEach(function(g){l.push(g.fulfilled,g.rejected)});var o;if(!u){var h=[Y0,void 0];for(Array.prototype.unshift.apply(h,a),h=h.concat(l),o=Promise.resolve(r);h.length;)o=o.then(h.shift(),h.shift());return o}for(var p=r;a.length;){var f=a.shift(),d=a.shift();try{p=f(p)}catch(c){d(c);break}}try{o=Y0(p)}catch(c){return Promise.reject(c)}for(;l.length;)o=o.then(l.shift(),l.shift());return o};au.prototype.getUri=function(t){return t=Ws(this.defaults,t),mF(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};Up.forEach(["delete","get","head","options"],function(t){au.prototype[t]=function(r,n){return this.request(Ws(n||{},{method:t,url:r,data:(n||{}).data}))}});Up.forEach(["post","put","patch"],function(t){au.prototype[t]=function(r,n,a){return this.request(Ws(a||{},{method:t,url:r,data:n}))}});var _F=au,wl,Z0;function DF(){if(Z0)return wl;Z0=1;var e=qs();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(l){n=l});var a=this;this.promise.then(function(u){if(a._listeners){var l,o=a._listeners.length;for(l=0;l<o;l++)a._listeners[l](u);a._listeners=null}}),this.promise.then=function(u){var l,o=new Promise(function(h){a.subscribe(h),l=h}).then(u);return o.cancel=function(){a.unsubscribe(l)},o},r(function(l){a.reason||(a.reason=new e(l),n(a.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},t.prototype.unsubscribe=function(n){if(this._listeners){var a=this._listeners.indexOf(n);a!==-1&&this._listeners.splice(a,1)}},t.source=function(){var n,a=new t(function(l){n=l});return{token:a,cancel:n}},wl=t,wl}var El,$0;function bF(){return $0||($0=1,El=function(t){return function(n){return t.apply(null,n)}}),El}var Cl,X0;function yF(){if(X0)return Cl;X0=1;var e=Zr;return Cl=function(r){return e.isObject(r)&&r.isAxiosError===!0},Cl}var J0=Zr,AF=Bp,ts=_F,wF=Rp,EF=_f;function jp(e){var t=new ts(e),r=AF(ts.prototype.request,t);return J0.extend(r,ts.prototype,t),J0.extend(r,t),r.create=function(a){return jp(wF(e,a))},r}var Gn=jp(EF);Gn.Axios=ts;Gn.Cancel=qs();Gn.CancelToken=DF();Gn.isCancel=kp();Gn.VERSION=Lp().version;Gn.all=function(t){return Promise.all(t)};Gn.spread=bF();Gn.isAxiosError=yF();OC.exports=Gn;ys.default=Gn;(function(e){e.exports=ys})(BC);var ar={},bf={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RequiredError=e.BaseAPI=e.COLLECTION_FORMATS=e.BASE_PATH=void 0;const t=bs;e.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),e.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class r{constructor(u,l=e.BASE_PATH,o=t.default){this.basePath=l,this.axios=o,u&&(this.configuration=u,this.basePath=u.basePath||this.basePath)}}e.BaseAPI=r;class n extends Error{constructor(u,l){super(l),this.field=u,this.name="RequiredError"}}e.RequiredError=n})(bf);var yf=hr&&hr.__awaiter||function(e,t,r,n){function a(u){return u instanceof r?u:new r(function(l){l(u)})}return new(r||(r=Promise))(function(u,l){function o(f){try{p(n.next(f))}catch(d){l(d)}}function h(f){try{p(n.throw(f))}catch(d){l(d)}}function p(f){f.done?u(f.value):a(f.value).then(o,h)}p((n=n.apply(e,t||[])).next())})};Object.defineProperty(ar,"__esModule",{value:!0});ar.createRequestFunction=ar.toPathString=ar.serializeDataIfNeeded=ar.setSearchParams=ar.setOAuthToObject=ar.setBearerAuthToObject=ar.setBasicAuthToObject=ar.setApiKeyToObject=ar.assertParamExists=ar.DUMMY_BASE_URL=void 0;const CF=bf;ar.DUMMY_BASE_URL="https://example.com";ar.assertParamExists=function(e,t,r){if(r==null)throw new CF.RequiredError(t,`Required parameter ${t} was null or undefined when calling ${e}.`)};ar.setApiKeyToObject=function(e,t,r){return yf(this,void 0,void 0,function*(){if(r&&r.apiKey){const n=typeof r.apiKey=="function"?yield r.apiKey(t):yield r.apiKey;e[t]=n}})};ar.setBasicAuthToObject=function(e,t){t&&(t.username||t.password)&&(e.auth={username:t.username,password:t.password})};ar.setBearerAuthToObject=function(e,t){return yf(this,void 0,void 0,function*(){if(t&&t.accessToken){const r=typeof t.accessToken=="function"?yield t.accessToken():yield t.accessToken;e.Authorization="Bearer "+r}})};ar.setOAuthToObject=function(e,t,r,n){return yf(this,void 0,void 0,function*(){if(n&&n.accessToken){const a=typeof n.accessToken=="function"?yield n.accessToken(t,r):yield n.accessToken;e.Authorization="Bearer "+a}})};function Jl(e,t,r=""){t!=null&&(typeof t=="object"?Array.isArray(t)?t.forEach(n=>Jl(e,n,r)):Object.keys(t).forEach(n=>Jl(e,t[n],`${r}${r!==""?".":""}${n}`)):e.has(r)?e.append(r,t):e.set(r,t))}ar.setSearchParams=function(e,...t){const r=new URLSearchParams(e.search);Jl(r,t),e.search=r.toString()};ar.serializeDataIfNeeded=function(e,t,r){const n=typeof e!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(t.headers["Content-Type"]):n)?JSON.stringify(e!==void 0?e:{}):e||""};ar.toPathString=function(e){return e.pathname+e.search+e.hash};ar.createRequestFunction=function(e,t,r,n){return(a=t,u=r)=>{const l=Object.assign(Object.assign({},e.options),{url:((n==null?void 0:n.basePath)||u)+e.url});return a.request(l)}};(function(e){var t=hr&&hr.__awaiter||function(l,o,h,p){function f(d){return d instanceof h?d:new h(function(c){c(d)})}return new(h||(h=Promise))(function(d,c){function g(_){try{m(p.next(_))}catch(b){c(b)}}function y(_){try{m(p.throw(_))}catch(b){c(b)}}function m(_){_.done?d(_.value):f(_.value).then(g,y)}m((p=p.apply(l,o||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.OpenAIApi=e.OpenAIApiFactory=e.OpenAIApiFp=e.OpenAIApiAxiosParamCreator=e.CreateImageRequestResponseFormatEnum=e.CreateImageRequestSizeEnum=e.ChatCompletionResponseMessageRoleEnum=e.ChatCompletionRequestMessageRoleEnum=void 0;const r=bs,n=ar,a=bf;e.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},e.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},e.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},e.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},e.OpenAIApiAxiosParamCreator=function(l){return{cancelFineTune:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("cancelFineTune","fineTuneId",o);const p="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const c=Object.assign(Object.assign({method:"POST"},d),h),g={},y={};n.setSearchParams(f,y);let m=d&&d.headers?d.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},g),m),h.headers),{url:n.toPathString(f),options:c}}),createAnswer:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createAnswer","createAnswerRequest",o);const p="/answers",f=new URL(p,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const c=Object.assign(Object.assign({method:"POST"},d),h),g={},y={};g["Content-Type"]="application/json",n.setSearchParams(f,y);let m=d&&d.headers?d.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},g),m),h.headers),c.data=n.serializeDataIfNeeded(o,c,l),{url:n.toPathString(f),options:c}}),createChatCompletion:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createChatCompletion","createChatCompletionRequest",o);const p="/chat/completions",f=new URL(p,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const c=Object.assign(Object.assign({method:"POST"},d),h),g={},y={};g["Content-Type"]="application/json",n.setSearchParams(f,y);let m=d&&d.headers?d.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},g),m),h.headers),c.data=n.serializeDataIfNeeded(o,c,l),{url:n.toPathString(f),options:c}}),createClassification:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createClassification","createClassificationRequest",o);const p="/classifications",f=new URL(p,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const c=Object.assign(Object.assign({method:"POST"},d),h),g={},y={};g["Content-Type"]="application/json",n.setSearchParams(f,y);let m=d&&d.headers?d.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},g),m),h.headers),c.data=n.serializeDataIfNeeded(o,c,l),{url:n.toPathString(f),options:c}}),createCompletion:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createCompletion","createCompletionRequest",o);const p="/completions",f=new URL(p,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const c=Object.assign(Object.assign({method:"POST"},d),h),g={},y={};g["Content-Type"]="application/json",n.setSearchParams(f,y);let m=d&&d.headers?d.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},g),m),h.headers),c.data=n.serializeDataIfNeeded(o,c,l),{url:n.toPathString(f),options:c}}),createEdit:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createEdit","createEditRequest",o);const p="/edits",f=new URL(p,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const c=Object.assign(Object.assign({method:"POST"},d),h),g={},y={};g["Content-Type"]="application/json",n.setSearchParams(f,y);let m=d&&d.headers?d.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},g),m),h.headers),c.data=n.serializeDataIfNeeded(o,c,l),{url:n.toPathString(f),options:c}}),createEmbedding:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createEmbedding","createEmbeddingRequest",o);const p="/embeddings",f=new URL(p,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const c=Object.assign(Object.assign({method:"POST"},d),h),g={},y={};g["Content-Type"]="application/json",n.setSearchParams(f,y);let m=d&&d.headers?d.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},g),m),h.headers),c.data=n.serializeDataIfNeeded(o,c,l),{url:n.toPathString(f),options:c}}),createFile:(o,h,p={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createFile","file",o),n.assertParamExists("createFile","purpose",h);const f="/files",d=new URL(f,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const g=Object.assign(Object.assign({method:"POST"},c),p),y={},m={},_=new(l&&l.formDataCtor||FormData);o!==void 0&&_.append("file",o),h!==void 0&&_.append("purpose",h),y["Content-Type"]="multipart/form-data",n.setSearchParams(d,m);let b=c&&c.headers?c.headers:{};return g.headers=Object.assign(Object.assign(Object.assign(Object.assign({},y),_.getHeaders()),b),p.headers),g.data=_,{url:n.toPathString(d),options:g}}),createFineTune:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createFineTune","createFineTuneRequest",o);const p="/fine-tunes",f=new URL(p,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const c=Object.assign(Object.assign({method:"POST"},d),h),g={},y={};g["Content-Type"]="application/json",n.setSearchParams(f,y);let m=d&&d.headers?d.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},g),m),h.headers),c.data=n.serializeDataIfNeeded(o,c,l),{url:n.toPathString(f),options:c}}),createImage:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createImage","createImageRequest",o);const p="/images/generations",f=new URL(p,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const c=Object.assign(Object.assign({method:"POST"},d),h),g={},y={};g["Content-Type"]="application/json",n.setSearchParams(f,y);let m=d&&d.headers?d.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},g),m),h.headers),c.data=n.serializeDataIfNeeded(o,c,l),{url:n.toPathString(f),options:c}}),createImageEdit:(o,h,p,f,d,c,g,y={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createImageEdit","image",o),n.assertParamExists("createImageEdit","prompt",h);const m="/images/edits",_=new URL(m,n.DUMMY_BASE_URL);let b;l&&(b=l.baseOptions);const C=Object.assign(Object.assign({method:"POST"},b),y),w={},O={},S=new(l&&l.formDataCtor||FormData);o!==void 0&&S.append("image",o),p!==void 0&&S.append("mask",p),h!==void 0&&S.append("prompt",h),f!==void 0&&S.append("n",f),d!==void 0&&S.append("size",d),c!==void 0&&S.append("response_format",c),g!==void 0&&S.append("user",g),w["Content-Type"]="multipart/form-data",n.setSearchParams(_,O);let B=b&&b.headers?b.headers:{};return C.headers=Object.assign(Object.assign(Object.assign(Object.assign({},w),S.getHeaders()),B),y.headers),C.data=S,{url:n.toPathString(_),options:C}}),createImageVariation:(o,h,p,f,d,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createImageVariation","image",o);const g="/images/variations",y=new URL(g,n.DUMMY_BASE_URL);let m;l&&(m=l.baseOptions);const _=Object.assign(Object.assign({method:"POST"},m),c),b={},C={},w=new(l&&l.formDataCtor||FormData);o!==void 0&&w.append("image",o),h!==void 0&&w.append("n",h),p!==void 0&&w.append("size",p),f!==void 0&&w.append("response_format",f),d!==void 0&&w.append("user",d),b["Content-Type"]="multipart/form-data",n.setSearchParams(y,C);let O=m&&m.headers?m.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),w.getHeaders()),O),c.headers),_.data=w,{url:n.toPathString(y),options:_}}),createModeration:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createModeration","createModerationRequest",o);const p="/moderations",f=new URL(p,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const c=Object.assign(Object.assign({method:"POST"},d),h),g={},y={};g["Content-Type"]="application/json",n.setSearchParams(f,y);let m=d&&d.headers?d.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},g),m),h.headers),c.data=n.serializeDataIfNeeded(o,c,l),{url:n.toPathString(f),options:c}}),createSearch:(o,h,p={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createSearch","engineId",o),n.assertParamExists("createSearch","createSearchRequest",h);const f="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(o))),d=new URL(f,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const g=Object.assign(Object.assign({method:"POST"},c),p),y={},m={};y["Content-Type"]="application/json",n.setSearchParams(d,m);let _=c&&c.headers?c.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},y),_),p.headers),g.data=n.serializeDataIfNeeded(h,g,l),{url:n.toPathString(d),options:g}}),createTranscription:(o,h,p,f,d,c,g={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createTranscription","file",o),n.assertParamExists("createTranscription","model",h);const y="/audio/transcriptions",m=new URL(y,n.DUMMY_BASE_URL);let _;l&&(_=l.baseOptions);const b=Object.assign(Object.assign({method:"POST"},_),g),C={},w={},O=new(l&&l.formDataCtor||FormData);o!==void 0&&O.append("file",o),h!==void 0&&O.append("model",h),p!==void 0&&O.append("prompt",p),f!==void 0&&O.append("response_format",f),d!==void 0&&O.append("temperature",d),c!==void 0&&O.append("language",c),C["Content-Type"]="multipart/form-data",n.setSearchParams(m,w);let S=_&&_.headers?_.headers:{};return b.headers=Object.assign(Object.assign(Object.assign(Object.assign({},C),O.getHeaders()),S),g.headers),b.data=O,{url:n.toPathString(m),options:b}}),createTranslation:(o,h,p,f,d,c={})=>t(this,void 0,void 0,function*(){n.assertParamExists("createTranslation","file",o),n.assertParamExists("createTranslation","model",h);const g="/audio/translations",y=new URL(g,n.DUMMY_BASE_URL);let m;l&&(m=l.baseOptions);const _=Object.assign(Object.assign({method:"POST"},m),c),b={},C={},w=new(l&&l.formDataCtor||FormData);o!==void 0&&w.append("file",o),h!==void 0&&w.append("model",h),p!==void 0&&w.append("prompt",p),f!==void 0&&w.append("response_format",f),d!==void 0&&w.append("temperature",d),b["Content-Type"]="multipart/form-data",n.setSearchParams(y,C);let O=m&&m.headers?m.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),w.getHeaders()),O),c.headers),_.data=w,{url:n.toPathString(y),options:_}}),deleteFile:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("deleteFile","fileId",o);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const c=Object.assign(Object.assign({method:"DELETE"},d),h),g={},y={};n.setSearchParams(f,y);let m=d&&d.headers?d.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},g),m),h.headers),{url:n.toPathString(f),options:c}}),deleteModel:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("deleteModel","model",o);const p="/models/{model}".replace("{model}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const c=Object.assign(Object.assign({method:"DELETE"},d),h),g={},y={};n.setSearchParams(f,y);let m=d&&d.headers?d.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},g),m),h.headers),{url:n.toPathString(f),options:c}}),downloadFile:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("downloadFile","fileId",o);const p="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const c=Object.assign(Object.assign({method:"GET"},d),h),g={},y={};n.setSearchParams(f,y);let m=d&&d.headers?d.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},g),m),h.headers),{url:n.toPathString(f),options:c}}),listEngines:(o={})=>t(this,void 0,void 0,function*(){const h="/engines",p=new URL(h,n.DUMMY_BASE_URL);let f;l&&(f=l.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),o),c={},g={};n.setSearchParams(p,g);let y=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},c),y),o.headers),{url:n.toPathString(p),options:d}}),listFiles:(o={})=>t(this,void 0,void 0,function*(){const h="/files",p=new URL(h,n.DUMMY_BASE_URL);let f;l&&(f=l.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),o),c={},g={};n.setSearchParams(p,g);let y=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},c),y),o.headers),{url:n.toPathString(p),options:d}}),listFineTuneEvents:(o,h,p={})=>t(this,void 0,void 0,function*(){n.assertParamExists("listFineTuneEvents","fineTuneId",o);const f="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(o))),d=new URL(f,n.DUMMY_BASE_URL);let c;l&&(c=l.baseOptions);const g=Object.assign(Object.assign({method:"GET"},c),p),y={},m={};h!==void 0&&(m.stream=h),n.setSearchParams(d,m);let _=c&&c.headers?c.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},y),_),p.headers),{url:n.toPathString(d),options:g}}),listFineTunes:(o={})=>t(this,void 0,void 0,function*(){const h="/fine-tunes",p=new URL(h,n.DUMMY_BASE_URL);let f;l&&(f=l.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),o),c={},g={};n.setSearchParams(p,g);let y=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},c),y),o.headers),{url:n.toPathString(p),options:d}}),listModels:(o={})=>t(this,void 0,void 0,function*(){const h="/models",p=new URL(h,n.DUMMY_BASE_URL);let f;l&&(f=l.baseOptions);const d=Object.assign(Object.assign({method:"GET"},f),o),c={},g={};n.setSearchParams(p,g);let y=f&&f.headers?f.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},c),y),o.headers),{url:n.toPathString(p),options:d}}),retrieveEngine:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("retrieveEngine","engineId",o);const p="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const c=Object.assign(Object.assign({method:"GET"},d),h),g={},y={};n.setSearchParams(f,y);let m=d&&d.headers?d.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},g),m),h.headers),{url:n.toPathString(f),options:c}}),retrieveFile:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("retrieveFile","fileId",o);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const c=Object.assign(Object.assign({method:"GET"},d),h),g={},y={};n.setSearchParams(f,y);let m=d&&d.headers?d.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},g),m),h.headers),{url:n.toPathString(f),options:c}}),retrieveFineTune:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("retrieveFineTune","fineTuneId",o);const p="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const c=Object.assign(Object.assign({method:"GET"},d),h),g={},y={};n.setSearchParams(f,y);let m=d&&d.headers?d.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},g),m),h.headers),{url:n.toPathString(f),options:c}}),retrieveModel:(o,h={})=>t(this,void 0,void 0,function*(){n.assertParamExists("retrieveModel","model",o);const p="/models/{model}".replace("{model}",encodeURIComponent(String(o))),f=new URL(p,n.DUMMY_BASE_URL);let d;l&&(d=l.baseOptions);const c=Object.assign(Object.assign({method:"GET"},d),h),g={},y={};n.setSearchParams(f,y);let m=d&&d.headers?d.headers:{};return c.headers=Object.assign(Object.assign(Object.assign({},g),m),h.headers),{url:n.toPathString(f),options:c}})}},e.OpenAIApiFp=function(l){const o=e.OpenAIApiAxiosParamCreator(l);return{cancelFineTune(h,p){return t(this,void 0,void 0,function*(){const f=yield o.cancelFineTune(h,p);return n.createRequestFunction(f,r.default,a.BASE_PATH,l)})},createAnswer(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createAnswer(h,p);return n.createRequestFunction(f,r.default,a.BASE_PATH,l)})},createChatCompletion(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createChatCompletion(h,p);return n.createRequestFunction(f,r.default,a.BASE_PATH,l)})},createClassification(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createClassification(h,p);return n.createRequestFunction(f,r.default,a.BASE_PATH,l)})},createCompletion(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createCompletion(h,p);return n.createRequestFunction(f,r.default,a.BASE_PATH,l)})},createEdit(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createEdit(h,p);return n.createRequestFunction(f,r.default,a.BASE_PATH,l)})},createEmbedding(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createEmbedding(h,p);return n.createRequestFunction(f,r.default,a.BASE_PATH,l)})},createFile(h,p,f){return t(this,void 0,void 0,function*(){const d=yield o.createFile(h,p,f);return n.createRequestFunction(d,r.default,a.BASE_PATH,l)})},createFineTune(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createFineTune(h,p);return n.createRequestFunction(f,r.default,a.BASE_PATH,l)})},createImage(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createImage(h,p);return n.createRequestFunction(f,r.default,a.BASE_PATH,l)})},createImageEdit(h,p,f,d,c,g,y,m){return t(this,void 0,void 0,function*(){const _=yield o.createImageEdit(h,p,f,d,c,g,y,m);return n.createRequestFunction(_,r.default,a.BASE_PATH,l)})},createImageVariation(h,p,f,d,c,g){return t(this,void 0,void 0,function*(){const y=yield o.createImageVariation(h,p,f,d,c,g);return n.createRequestFunction(y,r.default,a.BASE_PATH,l)})},createModeration(h,p){return t(this,void 0,void 0,function*(){const f=yield o.createModeration(h,p);return n.createRequestFunction(f,r.default,a.BASE_PATH,l)})},createSearch(h,p,f){return t(this,void 0,void 0,function*(){const d=yield o.createSearch(h,p,f);return n.createRequestFunction(d,r.default,a.BASE_PATH,l)})},createTranscription(h,p,f,d,c,g,y){return t(this,void 0,void 0,function*(){const m=yield o.createTranscription(h,p,f,d,c,g,y);return n.createRequestFunction(m,r.default,a.BASE_PATH,l)})},createTranslation(h,p,f,d,c,g){return t(this,void 0,void 0,function*(){const y=yield o.createTranslation(h,p,f,d,c,g);return n.createRequestFunction(y,r.default,a.BASE_PATH,l)})},deleteFile(h,p){return t(this,void 0,void 0,function*(){const f=yield o.deleteFile(h,p);return n.createRequestFunction(f,r.default,a.BASE_PATH,l)})},deleteModel(h,p){return t(this,void 0,void 0,function*(){const f=yield o.deleteModel(h,p);return n.createRequestFunction(f,r.default,a.BASE_PATH,l)})},downloadFile(h,p){return t(this,void 0,void 0,function*(){const f=yield o.downloadFile(h,p);return n.createRequestFunction(f,r.default,a.BASE_PATH,l)})},listEngines(h){return t(this,void 0,void 0,function*(){const p=yield o.listEngines(h);return n.createRequestFunction(p,r.default,a.BASE_PATH,l)})},listFiles(h){return t(this,void 0,void 0,function*(){const p=yield o.listFiles(h);return n.createRequestFunction(p,r.default,a.BASE_PATH,l)})},listFineTuneEvents(h,p,f){return t(this,void 0,void 0,function*(){const d=yield o.listFineTuneEvents(h,p,f);return n.createRequestFunction(d,r.default,a.BASE_PATH,l)})},listFineTunes(h){return t(this,void 0,void 0,function*(){const p=yield o.listFineTunes(h);return n.createRequestFunction(p,r.default,a.BASE_PATH,l)})},listModels(h){return t(this,void 0,void 0,function*(){const p=yield o.listModels(h);return n.createRequestFunction(p,r.default,a.BASE_PATH,l)})},retrieveEngine(h,p){return t(this,void 0,void 0,function*(){const f=yield o.retrieveEngine(h,p);return n.createRequestFunction(f,r.default,a.BASE_PATH,l)})},retrieveFile(h,p){return t(this,void 0,void 0,function*(){const f=yield o.retrieveFile(h,p);return n.createRequestFunction(f,r.default,a.BASE_PATH,l)})},retrieveFineTune(h,p){return t(this,void 0,void 0,function*(){const f=yield o.retrieveFineTune(h,p);return n.createRequestFunction(f,r.default,a.BASE_PATH,l)})},retrieveModel(h,p){return t(this,void 0,void 0,function*(){const f=yield o.retrieveModel(h,p);return n.createRequestFunction(f,r.default,a.BASE_PATH,l)})}}},e.OpenAIApiFactory=function(l,o,h){const p=e.OpenAIApiFp(l);return{cancelFineTune(f,d){return p.cancelFineTune(f,d).then(c=>c(h,o))},createAnswer(f,d){return p.createAnswer(f,d).then(c=>c(h,o))},createChatCompletion(f,d){return p.createChatCompletion(f,d).then(c=>c(h,o))},createClassification(f,d){return p.createClassification(f,d).then(c=>c(h,o))},createCompletion(f,d){return p.createCompletion(f,d).then(c=>c(h,o))},createEdit(f,d){return p.createEdit(f,d).then(c=>c(h,o))},createEmbedding(f,d){return p.createEmbedding(f,d).then(c=>c(h,o))},createFile(f,d,c){return p.createFile(f,d,c).then(g=>g(h,o))},createFineTune(f,d){return p.createFineTune(f,d).then(c=>c(h,o))},createImage(f,d){return p.createImage(f,d).then(c=>c(h,o))},createImageEdit(f,d,c,g,y,m,_,b){return p.createImageEdit(f,d,c,g,y,m,_,b).then(C=>C(h,o))},createImageVariation(f,d,c,g,y,m){return p.createImageVariation(f,d,c,g,y,m).then(_=>_(h,o))},createModeration(f,d){return p.createModeration(f,d).then(c=>c(h,o))},createSearch(f,d,c){return p.createSearch(f,d,c).then(g=>g(h,o))},createTranscription(f,d,c,g,y,m,_){return p.createTranscription(f,d,c,g,y,m,_).then(b=>b(h,o))},createTranslation(f,d,c,g,y,m){return p.createTranslation(f,d,c,g,y,m).then(_=>_(h,o))},deleteFile(f,d){return p.deleteFile(f,d).then(c=>c(h,o))},deleteModel(f,d){return p.deleteModel(f,d).then(c=>c(h,o))},downloadFile(f,d){return p.downloadFile(f,d).then(c=>c(h,o))},listEngines(f){return p.listEngines(f).then(d=>d(h,o))},listFiles(f){return p.listFiles(f).then(d=>d(h,o))},listFineTuneEvents(f,d,c){return p.listFineTuneEvents(f,d,c).then(g=>g(h,o))},listFineTunes(f){return p.listFineTunes(f).then(d=>d(h,o))},listModels(f){return p.listModels(f).then(d=>d(h,o))},retrieveEngine(f,d){return p.retrieveEngine(f,d).then(c=>c(h,o))},retrieveFile(f,d){return p.retrieveFile(f,d).then(c=>c(h,o))},retrieveFineTune(f,d){return p.retrieveFineTune(f,d).then(c=>c(h,o))},retrieveModel(f,d){return p.retrieveModel(f,d).then(c=>c(h,o))}}};class u extends a.BaseAPI{cancelFineTune(o,h){return e.OpenAIApiFp(this.configuration).cancelFineTune(o,h).then(p=>p(this.axios,this.basePath))}createAnswer(o,h){return e.OpenAIApiFp(this.configuration).createAnswer(o,h).then(p=>p(this.axios,this.basePath))}createChatCompletion(o,h){return e.OpenAIApiFp(this.configuration).createChatCompletion(o,h).then(p=>p(this.axios,this.basePath))}createClassification(o,h){return e.OpenAIApiFp(this.configuration).createClassification(o,h).then(p=>p(this.axios,this.basePath))}createCompletion(o,h){return e.OpenAIApiFp(this.configuration).createCompletion(o,h).then(p=>p(this.axios,this.basePath))}createEdit(o,h){return e.OpenAIApiFp(this.configuration).createEdit(o,h).then(p=>p(this.axios,this.basePath))}createEmbedding(o,h){return e.OpenAIApiFp(this.configuration).createEmbedding(o,h).then(p=>p(this.axios,this.basePath))}createFile(o,h,p){return e.OpenAIApiFp(this.configuration).createFile(o,h,p).then(f=>f(this.axios,this.basePath))}createFineTune(o,h){return e.OpenAIApiFp(this.configuration).createFineTune(o,h).then(p=>p(this.axios,this.basePath))}createImage(o,h){return e.OpenAIApiFp(this.configuration).createImage(o,h).then(p=>p(this.axios,this.basePath))}createImageEdit(o,h,p,f,d,c,g,y){return e.OpenAIApiFp(this.configuration).createImageEdit(o,h,p,f,d,c,g,y).then(m=>m(this.axios,this.basePath))}createImageVariation(o,h,p,f,d,c){return e.OpenAIApiFp(this.configuration).createImageVariation(o,h,p,f,d,c).then(g=>g(this.axios,this.basePath))}createModeration(o,h){return e.OpenAIApiFp(this.configuration).createModeration(o,h).then(p=>p(this.axios,this.basePath))}createSearch(o,h,p){return e.OpenAIApiFp(this.configuration).createSearch(o,h,p).then(f=>f(this.axios,this.basePath))}createTranscription(o,h,p,f,d,c,g){return e.OpenAIApiFp(this.configuration).createTranscription(o,h,p,f,d,c,g).then(y=>y(this.axios,this.basePath))}createTranslation(o,h,p,f,d,c){return e.OpenAIApiFp(this.configuration).createTranslation(o,h,p,f,d,c).then(g=>g(this.axios,this.basePath))}deleteFile(o,h){return e.OpenAIApiFp(this.configuration).deleteFile(o,h).then(p=>p(this.axios,this.basePath))}deleteModel(o,h){return e.OpenAIApiFp(this.configuration).deleteModel(o,h).then(p=>p(this.axios,this.basePath))}downloadFile(o,h){return e.OpenAIApiFp(this.configuration).downloadFile(o,h).then(p=>p(this.axios,this.basePath))}listEngines(o){return e.OpenAIApiFp(this.configuration).listEngines(o).then(h=>h(this.axios,this.basePath))}listFiles(o){return e.OpenAIApiFp(this.configuration).listFiles(o).then(h=>h(this.axios,this.basePath))}listFineTuneEvents(o,h,p){return e.OpenAIApiFp(this.configuration).listFineTuneEvents(o,h,p).then(f=>f(this.axios,this.basePath))}listFineTunes(o){return e.OpenAIApiFp(this.configuration).listFineTunes(o).then(h=>h(this.axios,this.basePath))}listModels(o){return e.OpenAIApiFp(this.configuration).listModels(o).then(h=>h(this.axios,this.basePath))}retrieveEngine(o,h){return e.OpenAIApiFp(this.configuration).retrieveEngine(o,h).then(p=>p(this.axios,this.basePath))}retrieveFile(o,h){return e.OpenAIApiFp(this.configuration).retrieveFile(o,h).then(p=>p(this.axios,this.basePath))}retrieveFineTune(o,h){return e.OpenAIApiFp(this.configuration).retrieveFineTune(o,h).then(p=>p(this.axios,this.basePath))}retrieveModel(o,h){return e.OpenAIApiFp(this.configuration).retrieveModel(o,h).then(p=>p(this.axios,this.basePath))}}e.OpenAIApi=u})(Sp);var Hs={};const FF="openai",SF="3.2.1",BF="Node.js library for the OpenAI API",OF={type:"git",url:"git@github.com:openai/openai-node.git"},MF=["openai","open","ai","gpt-3","gpt3"],PF="OpenAI",xF="MIT",TF="./dist/index.js",IF="./dist/index.d.ts",NF={build:"tsc --outDir dist/"},kF={axios:"^0.26.0","form-data":"^4.0.0"},RF={"@types/node":"^12.11.5",typescript:"^3.6.4"},LF={name:FF,version:SF,description:BF,repository:OF,keywords:MF,author:PF,license:xF,main:TF,types:IF,scripts:NF,dependencies:kF,devDependencies:RF};var Fl,Q0;function UF(){return Q0||(Q0=1,Fl=typeof self=="object"?self.FormData:window.FormData),Fl}Object.defineProperty(Hs,"__esModule",{value:!0});Hs.Configuration=void 0;const VF=LF;class jF{constructor(t={}){this.apiKey=t.apiKey,this.organization=t.organization,this.username=t.username,this.password=t.password,this.accessToken=t.accessToken,this.basePath=t.basePath,this.baseOptions=t.baseOptions,this.formDataCtor=t.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${VF.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=UF())}isJsonMime(t){const r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return t!==null&&(r.test(t)||t.toLowerCase()==="application/json-patch+json")}}Hs.Configuration=jF;(function(e){var t=hr&&hr.__createBinding||(Object.create?function(n,a,u,l){l===void 0&&(l=u),Object.defineProperty(n,l,{enumerable:!0,get:function(){return a[u]}})}:function(n,a,u,l){l===void 0&&(l=u),n[l]=a[u]}),r=hr&&hr.__exportStar||function(n,a){for(var u in n)u!=="default"&&!a.hasOwnProperty(u)&&t(a,n,u)};Object.defineProperty(e,"__esModule",{value:!0}),r(Sp,e),r(Hs,e)})(Zl);function Af(e){const t=new Zl.Configuration({apiKey:e});return new Zl.OpenAIApi(t)}async function qF(e,t,r="text-davinci-003"){return await e.createCompletion({model:r,prompt:t,temperature:.8,max_tokens:250})}async function zF(e,t,r="gpt-3.5-turbo"){return await e.createChatCompletion({model:r,messages:[{role:"user",content:t}],temperature:.8,max_tokens:250})}async function WF(e,t,r="text-embedding-ada-002"){return await e.createEmbedding({model:r,input:t})}async function HF(e){return await e.listModels()}const Sl="preferredEmbeddingModelStore";function GF(){const e=In(""),{subscribe:t,set:r,update:n}=e,a=typeof window<"u";return r(a&&localStorage[Sl]||""),{subscribe:t,update:u=>{!u||!a||(localStorage[Sl]=u,r(u))},get:()=>zt(e),delete:()=>{a&&(delete localStorage[Sl],r(""))}}}const Ql=GF(),qp=Tn(Ql,e=>zt(Ql)),Bl="oKeyStore";function KF(){const e=In(""),{subscribe:t,set:r,update:n}=e,a=typeof window<"u";return r(a&&localStorage[Bl]||""),{subscribe:t,update:u=>{!u||!a||(localStorage[Bl]=u,r(u))},get:()=>zt(e),delete:()=>{a&&(delete localStorage[Bl],r(""))}}}const As=KF(),wf=Tn(As,e=>zt(As));function YF(e){let t,r,n,a={ctx:e,current:null,token:null,hasCatch:!0,pending:JF,then:XF,catch:$F,value:25,error:26,blocks:[,,,]};return Ci(r=e[6],a),{c(){t=Yt(),a.block.c()},l(u){t=Yt(),a.block.l(u)},m(u,l){Ee(u,t,l),a.block.m(u,a.anchor=l),a.mount=()=>t.parentNode,a.anchor=t,n=!0},p(u,l){e=u,a.ctx=e,l&64&&r!==(r=e[6])&&Ci(r,a)||Bs(a,e,l)},i(u){n||(xe(a.block),n=!0)},o(u){for(let l=0;l<3;l+=1){const o=a.blocks[l];Ue(o)}n=!1},d(u){u&&V(t),a.block.d(u),a.token=null,a=null}}}function ZF(e){let t,r,n,a,u;return{c(){t=se("div"),r=se("div"),n=se("div"),a=se("p"),u=Ze("Set OpenAI key in settings to use embedding map."),this.h()},l(l){t=oe(l,"DIV",{class:!0});var o=ie(t);r=oe(o,"DIV",{class:!0});var h=ie(r);n=oe(h,"DIV",{class:!0});var p=ie(n);a=oe(p,"P",{class:!0});var f=ie(a);u=$e(f,"Set OpenAI key in settings to use embedding map."),f.forEach(V),p.forEach(V),h.forEach(V),o.forEach(V),this.h()},h(){T(a,"class","text-center text-lg"),T(n,"class","h-20 w-52"),T(r,"class","flex flex-col justify-center"),T(t,"class","w-full h-full flex justify-center")},m(l,o){Ee(l,t,o),Y(t,r),Y(r,n),Y(n,a),Y(a,u)},p:Ie,i:Ie,o:Ie,d(l){l&&V(t)}}}function $F(e){let t,r=e[26].message+"",n;return{c(){t=se("p"),n=Ze(r),this.h()},l(a){t=oe(a,"P",{style:!0});var u=ie(t);n=$e(u,r),u.forEach(V),this.h()},h(){er(t,"color","red")},m(a,u){Ee(a,t,u),Y(t,n)},p(a,u){u&64&&r!==(r=a[26].message+"")&&xn(n,r)},i:Ie,o:Ie,d(a){a&&V(t)}}}function XF(e){let t,r,n,a,u,l,o,h,p,f,d,c,g,y,m,_,b,C,w,O,S,B,P,I,N,G,L,q,Z,W,z,H,re,ee,Q,le,me,Fe,be,Ne,je,Me,it,qe,Te,Re,lt,et,at,tt;r=new SC({props:{dimensions:e[3],center:e[8]}});let rt=e[4].embedExponentialScaling&&ed(e);return{c(){t=se("div"),pt(r.$$.fragment),a=Ge(),u=se("div"),l=se("div"),o=se("label"),h=se("span"),p=Ze("Exponential Scaling"),f=Ge(),d=se("input"),g=Ge(),rt&&rt.c(),y=Ge(),m=se("div"),_=se("label"),b=se("span"),C=Ze("# Prompts"),w=Ge(),O=se("input"),S=Ge(),B=se("div"),P=se("div"),I=se("label"),N=se("span"),G=Ze("Clusters"),L=Ge(),q=se("div"),Z=se("button"),W=Ze("0"),H=Ge(),re=se("button"),ee=Ze("2"),Q=Ge(),le=se("button"),me=Ze("4"),Fe=Ge(),be=se("button"),Ne=Ze("6"),je=Ge(),Me=se("button"),it=Ze("8"),qe=Ge(),Te=se("div"),Re=se("button"),lt=Ze("Shuffle"),this.h()},l(ze){t=oe(ze,"DIV",{class:!0});var We=ie(t);vt(r.$$.fragment,We),We.forEach(V),a=Ke(ze),u=oe(ze,"DIV",{class:!0});var Ae=ie(u);l=oe(Ae,"DIV",{class:!0});var Se=ie(l);o=oe(Se,"LABEL",{class:!0});var yt=ie(o);h=oe(yt,"SPAN",{class:!0});var Tt=ie(h);p=$e(Tt,"Exponential Scaling"),Tt.forEach(V),yt.forEach(V),f=Ke(Se),d=oe(Se,"INPUT",{type:!0,class:!0}),Se.forEach(V),g=Ke(Ae),rt&&rt.l(Ae),y=Ke(Ae),m=oe(Ae,"DIV",{class:!0});var Wt=ie(m);_=oe(Wt,"LABEL",{class:!0});var R=ie(_);b=oe(R,"SPAN",{class:!0});var j=ie(b);C=$e(j,"# Prompts"),j.forEach(V),R.forEach(V),w=Ke(Wt),O=oe(Wt,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Wt.forEach(V),S=Ke(Ae),B=oe(Ae,"DIV",{class:!0});var $=ie(B);P=oe($,"DIV",{class:!0});var fe=ie(P);I=oe(fe,"LABEL",{class:!0});var ne=ie(I);N=oe(ne,"SPAN",{class:!0});var he=ie(N);G=$e(he,"Clusters"),he.forEach(V),ne.forEach(V),L=Ke(fe),q=oe(fe,"DIV",{class:!0});var ae=ie(q);Z=oe(ae,"BUTTON",{class:!0});var ce=ie(Z);W=$e(ce,"0"),ce.forEach(V),H=Ke(ae),re=oe(ae,"BUTTON",{class:!0});var ye=ie(re);ee=$e(ye,"2"),ye.forEach(V),Q=Ke(ae),le=oe(ae,"BUTTON",{class:!0});var Oe=ie(le);me=$e(Oe,"4"),Oe.forEach(V),Fe=Ke(ae),be=oe(ae,"BUTTON",{class:!0});var Xe=ie(be);Ne=$e(Xe,"6"),Xe.forEach(V),je=Ke(ae),Me=oe(ae,"BUTTON",{class:!0});var we=ie(Me);it=$e(we,"8"),we.forEach(V),ae.forEach(V),fe.forEach(V),$.forEach(V),qe=Ke(Ae),Te=oe(Ae,"DIV",{class:!0});var Vt=ie(Te);Re=oe(Vt,"BUTTON",{class:!0});var St=ie(Re);lt=$e(St,"Shuffle"),St.forEach(V),Vt.forEach(V),Ae.forEach(V),this.h()},h(){T(t,"class","w-full h-full"),Fs(()=>e[15].call(t)),T(h,"class","label-text"),T(o,"class","label"),T(d,"type","checkbox"),T(d,"class","toggle toggle-sm"),d.checked=c=e[4].embedExponentialScaling,T(l,"class","min-w-max px-2"),T(b,"class","label-text"),T(_,"class","label"),O.value=e[9],T(O,"type","range"),T(O,"min","1"),T(O,"max",e[2]),T(O,"step","1"),T(O,"class","range range-sm"),T(m,"class","w-full px-2"),T(N,"class","label-text"),T(I,"class","label pb-1 m-0"),T(Z,"class",z=(e[4].embedClusters||0)===0?"btn btn-xs btn-active":"btn btn-xs"),T(re,"class","btn btn-xs"),qt(re,"btn-active",e[4].embedClusters===2),qt(re,"btn-disabled",Object.keys(e[4].embeddings).length<2),T(le,"class","btn btn-xs"),qt(le,"btn-active",e[4].embedClusters===4),qt(le,"btn-disabled",Object.keys(e[4].embeddings).length<4),T(be,"class","btn btn-xs"),qt(be,"btn-active",e[4].embedClusters===6),qt(be,"btn-disabled",Object.keys(e[4].embeddings).length<6),T(Me,"class","btn btn-xs"),qt(Me,"btn-active",e[4].embedClusters===8),qt(Me,"btn-disabled",Object.keys(e[4].embeddings).length<8),T(q,"class","btn-group btn-group-horizontal p-0"),T(P,"class",""),T(B,"class",""),T(Re,"class","btn btn-xs btn-primary"),T(Te,"class","w-32 px-2 pb-1 flex flex-col justify-end"),T(u,"class","px-2 py-4 pb-0 flex")},m(ze,We){Ee(ze,t,We),gt(r,t,null),n=Ss(t,e[15].bind(t)),Ee(ze,a,We),Ee(ze,u,We),Y(u,l),Y(l,o),Y(o,h),Y(h,p),Y(l,f),Y(l,d),Y(u,g),rt&&rt.m(u,null),Y(u,y),Y(u,m),Y(m,_),Y(_,b),Y(b,C),Y(m,w),Y(m,O),Y(u,S),Y(u,B),Y(B,P),Y(P,I),Y(I,N),Y(N,G),Y(P,L),Y(P,q),Y(q,Z),Y(Z,W),Y(q,H),Y(q,re),Y(re,ee),Y(q,Q),Y(q,le),Y(le,me),Y(q,Fe),Y(q,be),Y(be,Ne),Y(q,je),Y(q,Me),Y(Me,it),Y(u,qe),Y(u,Te),Y(Te,Re),Y(Re,lt),et=!0,at||(tt=[ke(d,"change",e[11]),ke(O,"change",e[10]),ke(Z,"click",e[16]),ke(re,"click",e[17]),ke(le,"click",e[18]),ke(be,"click",e[19]),ke(Me,"click",e[20]),ke(Re,"click",e[14])],at=!0)},p(ze,We){const Ae={};We&8&&(Ae.dimensions=ze[3]),We&256&&(Ae.center=ze[8]),r.$set(Ae),(!et||We&16&&c!==(c=ze[4].embedExponentialScaling))&&(d.checked=c),ze[4].embedExponentialScaling?rt?rt.p(ze,We):(rt=ed(ze),rt.c(),rt.m(u,y)):rt&&(rt.d(1),rt=null),(!et||We&512)&&(O.value=ze[9]),(!et||We&4)&&T(O,"max",ze[2]),(!et||We&16&&z!==(z=(ze[4].embedClusters||0)===0?"btn btn-xs btn-active":"btn btn-xs"))&&T(Z,"class",z),(!et||We&16)&&qt(re,"btn-active",ze[4].embedClusters===2),(!et||We&16)&&qt(re,"btn-disabled",Object.keys(ze[4].embeddings).length<2),(!et||We&16)&&qt(le,"btn-active",ze[4].embedClusters===4),(!et||We&16)&&qt(le,"btn-disabled",Object.keys(ze[4].embeddings).length<4),(!et||We&16)&&qt(be,"btn-active",ze[4].embedClusters===6),(!et||We&16)&&qt(be,"btn-disabled",Object.keys(ze[4].embeddings).length<6),(!et||We&16)&&qt(Me,"btn-active",ze[4].embedClusters===8),(!et||We&16)&&qt(Me,"btn-disabled",Object.keys(ze[4].embeddings).length<8)},i(ze){et||(xe(r.$$.fragment,ze),et=!0)},o(ze){Ue(r.$$.fragment,ze),et=!1},d(ze){ze&&V(t),mt(r),n(),ze&&V(a),ze&&V(u),rt&&rt.d(),at=!1,Vr(tt)}}}function ed(e){let t,r,n,a,u,l,o,h,p;return{c(){t=se("div"),r=se("label"),n=se("span"),a=Ze("Scaling Power"),u=Ge(),l=se("input"),this.h()},l(f){t=oe(f,"DIV",{class:!0});var d=ie(t);r=oe(d,"LABEL",{class:!0});var c=ie(r);n=oe(c,"SPAN",{class:!0});var g=ie(n);a=$e(g,"Scaling Power"),g.forEach(V),c.forEach(V),u=Ke(d),l=oe(d,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),d.forEach(V),this.h()},h(){T(n,"class","label-text"),T(r,"class","label"),l.value=o=e[4].embedWeightScaling,T(l,"type","range"),T(l,"min","0.5"),T(l,"max","3"),T(l,"step","0.1"),T(l,"class","range range-sm"),T(t,"class","w-full px-2")},m(f,d){Ee(f,t,d),Y(t,r),Y(r,n),Y(n,a),Y(t,u),Y(t,l),h||(p=ke(l,"change",e[12]),h=!0)},p(f,d){d&16&&o!==(o=f[4].embedWeightScaling)&&(l.value=o)},d(f){f&&V(t),h=!1,p()}}}function JF(e){let t,r,n,a,u,l;return{c(){t=se("div"),r=se("div"),n=se("div"),a=se("progress"),this.h()},l(o){t=oe(o,"DIV",{class:!0});var h=ie(t);r=oe(h,"DIV",{class:!0});var p=ie(r);n=oe(p,"DIV",{class:!0});var f=ie(n);a=oe(f,"PROGRESS",{class:!0,max:!0}),ie(a).forEach(V),f.forEach(V),p.forEach(V),h.forEach(V),this.h()},h(){T(a,"class","progress progress-primary w-56"),a.value=u=Object.keys(e[7]).length,T(a,"max",l=Object.keys(e[4].weightedPrompts).length),T(n,"class","h-20 w-52"),T(r,"class","flex flex-col justify-center"),T(t,"class","w-full h-full flex justify-center")},m(o,h){Ee(o,t,h),Y(t,r),Y(r,n),Y(n,a)},p(o,h){h&128&&u!==(u=Object.keys(o[7]).length)&&(a.value=u),h&16&&l!==(l=Object.keys(o[4].weightedPrompts).length)&&T(a,"max",l)},i:Ie,o:Ie,d(o){o&&V(t)}}}function QF(e){let t,r,n,a;const u=[ZF,YF],l=[];function o(h,p){return h[5]?1:0}return t=o(e),r=l[t]=u[t](e),{c(){r.c(),n=Yt()},l(h){r.l(h),n=Yt()},m(h,p){l[t].m(h,p),Ee(h,n,p),a=!0},p(h,[p]){let f=t;t=o(h),t===f?l[t].p(h,p):(Dn(),Ue(l[f],1,1,()=>{l[f]=null}),bn(),r=l[t],r?r.p(h,p):(r=l[t]=u[t](h),r.c()),xe(r,1),r.m(n.parentNode,n))},i(h){a||(xe(r),a=!0)},o(h){Ue(r),a=!1},d(h){l[t].d(h),h&&V(n)}}}function e3(e){return e<2?0:e<4?2:e<6?4:e<8?6:8}function t3(e){return!e.embeddings||!e.embedClusterSets||Object.entries(e.embeddings).length!==Object.entries(e.weightedPrompts).length||(e.lastPromptChange||0)>(e.lastEmbeddingChange||0)}function r3(e,t,r){let n,a,u,l,o,h,p;Ot(e,An,q=>r(4,o=q)),Ot(e,qp,q=>r(21,h=q)),Ot(e,wf,q=>r(5,p=q));let f=0,d=0,c=null,g={};function y(q){const{target:Z}=q;if(!Z)return;const W=Z;if(!W.value)return;const z=parseInt(W.value);z>0&&z<=n&&Nt.update({...o,embedPromptLimit:z})}function m(){Nt.update({...o,embedExponentialScaling:!o.embedExponentialScaling})}function _(q){const{target:Z}=q;if(!Z)return;const W=Z;if(!W.value)return;const z=parseInt(W.value);Nt.update({...o,embedWeightScaling:z})}function b(q){[0,2,4,6,8].indexOf(q)!==-1&&Nt.update({...o,embedClusters:q})}function C(q){let Z=new pC({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:5e3,metric:"euclidean"});const W=Object.keys(q),z=Object.values(q);Z.init({data:z,type:"dense"}),Z.run();let re=Z.getOutputScaled().map(([Q,le])=>[(Q+1)/2,(le+1)/2]);return W.reduce((Q,le,me)=>(Q[le]=re[me],Q),{})}function w(q,Z){return new Kl.KMEANS().run(q,Z)}async function O(){Nt.update({...o,scaledEmbedMappings:C(o.embeddings)})}async function S(){if(console.log("fetching embeddings"),!p||!o.weightedPrompts)return;const q=Object.entries(o.weightedPrompts).map(([le,me])=>[le,me.text]),Z=Af(p);r(7,g={});for(let le of q){const me=await WF(Z,le[1],h);r(7,g[le[0]]=me.data.data[0].embedding,g)}let W=Object.entries(g).sort((le,me)=>le[0]-me[0]);const z=le=>new Array(le).fill(null).map(()=>[]);console.log("clustering embeddings");const H=W.length>=2?w(W.map(le=>le[1]),2):[W.map(le=>le[0])];console.log("set of 2 complete");const re=W.length>=4?w(W.map(le=>le[1]),4):H;console.log("set of 4 complete");const ee=W.length>=6?w(W.map(le=>le[1]),6):re;console.log("set of 6 complete");const Q=W.length>=8?w(W.map(le=>le[1]),8):ee;console.log("set of 8 complete"),Nt.update({...o,embeddings:g,embedClusterSets:{2:[...H,...z(2-H.length)],4:[...re,...z(4-re.length)],6:[...ee,...z(6-ee.length)],8:[...Q,...z(8-Q.length)]},lastEmbeddingChange:Date.now(),scaledEmbedMappings:C(g)}),console.log("embeddings complete")}function B(){f=this.clientWidth,d=this.clientHeight,r(0,f),r(1,d)}const P=()=>b(0),I=()=>b(2),N=()=>b(4),G=()=>b(6),L=()=>b(8);return e.$$.update=()=>{e.$$.dirty&16&&r(2,n=Object.keys(o.weightedPrompts||{}).length),e.$$.dirty&20&&r(9,a=o.embedPromptLimit||n),e.$$.dirty&3&&r(3,u=[f||250,d||250]),e.$$.dirty&8&&r(8,l=Rs(u)),e.$$.dirty&16&&o.embeddings&&Object.keys(o.embeddings).length<o.embedClusters&&b(e3(Object.keys(o.embeddings).length)),e.$$.dirty&48&&p&&t3(o)&&r(6,c=S())},[f,d,n,u,o,p,c,g,l,a,y,m,_,b,O,B,P,I,N,G,L]}class n3 extends Rt{constructor(t){super(),Lt(this,t,r3,QF,Ut,{})}}const Zu="zeroPromptHandlingStore";function i3(){const e=In(!1),{subscribe:t,set:r,update:n}=e,a=typeof window<"u";return r(a&&localStorage[Zu]?JSON.parse(localStorage[Zu]):!1),{subscribe:t,update:u=>{a&&(localStorage[Zu]=JSON.stringify(!!u),r(!!u))},get:()=>zt(e),delete:()=>{a&&(delete localStorage[Zu],r(!1))}}}const ef=i3(),zp=Tn(ef,e=>zt(ef));function td(e,t,r){const n=e.slice();return n[4]=t[r][0],n[5]=t[r][1],n}function rd(e,t){let r,n=t[5].text+"",a,u,l,o=si(t[0],parseInt(t[4]))+"",h,p,f;return{key:e,first:null,c(){r=se("span"),a=Ze(n),u=Ze("::"),l=se("b"),h=Ze(o),p=Ge(),this.h()},l(d){r=oe(d,"SPAN",{style:!0});var c=ie(r);a=$e(c,n),u=$e(c,"::"),l=oe(c,"B",{});var g=ie(l);h=$e(g,o),p=Ke(g),g.forEach(V),c.forEach(V),this.h()},h(){T(r,"style",f=`color: rgba(255,255,255,${Math.max(.25,n0(t[0],parseInt(t[4])))});`),this.first=r},m(d,c){Ee(d,r,c),Y(r,a),Y(r,u),Y(r,l),Y(l,h),Y(l,p)},p(d,c){t=d,c&3&&n!==(n=t[5].text+"")&&xn(a,n),c&3&&o!==(o=si(t[0],parseInt(t[4]))+"")&&xn(h,o),c&3&&f!==(f=`color: rgba(255,255,255,${Math.max(.25,n0(t[0],parseInt(t[4])))});`)&&T(r,"style",f)},d(d){d&&V(r)}}}function a3(e){let t,r,n=[],a=new Map,u,l,o=Object.entries(e[0].weightedPrompts).filter(e[3]);const h=p=>p[4];for(let p=0;p<o.length;p+=1){let f=td(e,o,p),d=h(f);a.set(d,n[p]=rd(d,f))}return{c(){t=se("div"),r=se("p");for(let p=0;p<n.length;p+=1)n[p].c();this.h()},l(p){t=oe(p,"DIV",{class:!0});var f=ie(t);r=oe(f,"P",{class:!0});var d=ie(r);for(let c=0;c<n.length;c+=1)n[c].l(d);d.forEach(V),f.forEach(V),this.h()},h(){T(r,"class","text-sm select-none"),T(t,"class","normal-case font-light text-left cursor-copy bg-slate-900 rounded-md p-4 w-full h-32 overflow-y-auto hover:bg-slate-800 active:bg-slate-950")},m(p,f){Ee(p,t,f),Y(t,r);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(r,null);u||(l=ke(t,"click",e[2]),u=!0)},p(p,[f]){f&3&&(o=Object.entries(p[0].weightedPrompts).filter(p[3]),n=Bi(n,f,h,1,p,o,a,r,ba,rd,null,td))},i:Ie,o:Ie,d(p){p&&V(t);for(let f=0;f<n.length;f+=1)n[f].d();u=!1,l()}}}function u3(e,t,r){let n,a;Ot(e,An,o=>r(0,n=o)),Ot(e,zp,o=>r(1,a=o));function u(){const o=Object.entries(n.weightedPrompts).filter(h=>a||si(n,parseInt(h[0]))).map(([h,p])=>`${p.text}::${si(n,parseInt(h))}`).join(" ");navigator.clipboard.writeText(o)}return[n,a,u,o=>a||si(n,parseInt(o[0]))]}class s3 extends Rt{constructor(t){super(),Lt(this,t,u3,a3,Ut,{})}}function o3(e){let t,r,n,a;return{c(){t=Ct("svg"),r=Ct("rect"),n=Ct("rect"),a=Ct("rect"),this.h()},l(u){t=Ft(u,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var l=ie(t);r=Ft(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),ie(r).forEach(V),n=Ft(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),ie(n).forEach(V),a=Ft(l,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),ie(a).forEach(V),l.forEach(V),this.h()},h(){T(r,"x","5"),T(r,"y","12"),T(r,"width","40"),T(r,"height","4"),T(r,"fill","rgba(255,255,255, 0.7)"),T(n,"x","5"),T(n,"y","23"),T(n,"width","30"),T(n,"height","4"),T(n,"fill","rgba(255,255,255, 0.7)"),T(a,"x","5"),T(a,"y","34"),T(a,"width","35"),T(a,"height","4"),T(a,"fill","rgba(255,255,255, 0.7)"),T(t,"xmlns","http://www.w3.org/2000/svg"),T(t,"fill","rgba(255,255,255, 0.7)"),T(t,"class","h-6 w-6"),T(t,"viewBox","0 0 50 50")},m(u,l){Ee(u,t,l),Y(t,r),Y(t,n),Y(t,a)},p:Ie,i:Ie,o:Ie,d(u){u&&V(t)}}}class l3 extends Rt{constructor(t){super(),Lt(this,t,null,o3,Ut,{})}}function f3(e){let t,r,n;return{c(){t=Ct("svg"),r=Ct("circle"),n=Ct("circle"),this.h()},l(a){t=Ft(a,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var u=ie(t);r=Ft(u,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),ie(r).forEach(V),n=Ft(u,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),ie(n).forEach(V),u.forEach(V),this.h()},h(){T(r,"cx","25"),T(r,"cy","25"),T(r,"r","20"),T(r,"stroke","rgba(255,255,255, 0.7)"),T(r,"stroke-width","2"),T(r,"fill","none"),T(n,"cx","25"),T(n,"cy","25"),T(n,"r","2"),T(n,"stroke","rgba(255,255,255, 0.7)"),T(n,"stroke-width","1"),T(n,"fill","rgba(255,255,255, 0.7)"),T(t,"xmlns","http://www.w3.org/2000/svg"),T(t,"fill","rgba(255,255,255, 0.7)"),T(t,"class","h-6 w-6"),T(t,"viewBox","0 0 50 50")},m(a,u){Ee(a,t,u),Y(t,r),Y(t,n)},p:Ie,i:Ie,o:Ie,d(a){a&&V(t)}}}class c3 extends Rt{constructor(t){super(),Lt(this,t,null,f3,Ut,{})}}function h3(e){let t,r,n,a,u,l;return{c(){t=Ct("svg"),r=Ct("circle"),n=Ct("circle"),a=Ct("circle"),u=Ct("circle"),l=Ct("circle"),this.h()},l(o){t=Ft(o,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var h=ie(t);r=Ft(h,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),ie(r).forEach(V),n=Ft(h,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),ie(n).forEach(V),a=Ft(h,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),ie(a).forEach(V),u=Ft(h,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),ie(u).forEach(V),l=Ft(h,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),ie(l).forEach(V),h.forEach(V),this.h()},h(){T(r,"cx","20"),T(r,"cy","80"),T(r,"r","5"),T(r,"fill","rgba(255,255,255, 0.7)"),T(n,"cx","40"),T(n,"cy","40"),T(n,"r","5"),T(n,"fill","rgba(255,255,255, 0.7)"),T(a,"cx","70"),T(a,"cy","20"),T(a,"r","5"),T(a,"fill","rgba(255,255,255, 0.7)"),T(u,"cx","80"),T(u,"cy","60"),T(u,"r","5"),T(u,"fill","rgba(255,255,255, 0.7)"),T(l,"cx","60"),T(l,"cy","75"),T(l,"r","5"),T(l,"fill","rgba(255,255,255, 0.7)"),T(t,"xmlns","http://www.w3.org/2000/svg"),T(t,"fill","rgba(255,255,255, 0.7)"),T(t,"class","h-6 w-6"),T(t,"viewBox","0 0 100 100")},m(o,h){Ee(o,t,h),Y(t,r),Y(t,n),Y(t,a),Y(t,u),Y(t,l)},p:Ie,i:Ie,o:Ie,d(o){o&&V(t)}}}class d3 extends Rt{constructor(t){super(),Lt(this,t,null,h3,Ut,{})}}function p3(e){let t,r,n,a;return{c(){t=Ct("svg"),r=Ct("path"),n=Ct("path"),a=Ct("path"),this.h()},l(u){t=Ft(u,"svg",{xmlns:!0,class:!0,viewBox:!0});var l=ie(t);r=Ft(l,"path",{d:!0,fill:!0}),ie(r).forEach(V),n=Ft(l,"path",{d:!0,fill:!0}),ie(n).forEach(V),a=Ft(l,"path",{d:!0,fill:!0}),ie(a).forEach(V),l.forEach(V),this.h()},h(){T(r,"d","M50 50 L50 10 A40 40 0 0 1 90 50 z"),T(r,"fill","rgba(255,255,255, 0.7)"),T(n,"d","M50 50 L90 50 A40 40 0 0 1 50 90 z"),T(n,"fill","rgba(255,255,255, 0.3)"),T(a,"d","M50 50 L50 90 A40 40 0 0 1 10 50 z"),T(a,"fill","rgba(255,255,255, 0.9)"),T(t,"xmlns","http://www.w3.org/2000/svg"),T(t,"class","h-6 w-6"),T(t,"viewBox","0 0 100 100")},m(u,l){Ee(u,t,l),Y(t,r),Y(t,n),Y(t,a)},p:Ie,i:Ie,o:Ie,d(u){u&&V(t)}}}class v3 extends Rt{constructor(t){super(),Lt(this,t,null,p3,Ut,{})}}function g3(e){let t,r;return t=new n3({}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,a){gt(t,n,a),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function m3(e){let t,r;return t=new zE({}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,a){gt(t,n,a),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function _3(e){let t,r;return t=new s2({}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,a){gt(t,n,a),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function D3(e){let t,r;return t=new XE({}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,a){gt(t,n,a),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function b3(e){let t,r,n,a,u,l,o,h,p,f,d,c,g,y,m,_,b,C,w,O,S,B,P;u=new l3({}),h=new v3({}),d=new c3({}),y=new d3({});const I=[D3,_3,m3,g3],N=[];function G(L,q){return L[0].weightMode===At.Bars?0:L[0].weightMode===At.Pie?1:L[0].weightMode===At.Circle?2:L[0].weightMode===At.Embed?3:-1}return~(_=G(e))&&(b=N[_]=I[_](e)),O=new s3({}),{c(){t=se("div"),r=se("div"),n=se("div"),a=se("button"),pt(u.$$.fragment),l=Ge(),o=se("button"),pt(h.$$.fragment),p=Ge(),f=se("button"),pt(d.$$.fragment),c=Ge(),g=se("button"),pt(y.$$.fragment),m=Ge(),b&&b.c(),C=Ge(),w=se("div"),pt(O.$$.fragment),this.h()},l(L){t=oe(L,"DIV",{class:!0});var q=ie(t);r=oe(q,"DIV",{class:!0});var Z=ie(r);n=oe(Z,"DIV",{class:!0});var W=ie(n);a=oe(W,"BUTTON",{class:!0});var z=ie(a);vt(u.$$.fragment,z),z.forEach(V),l=Ke(W),o=oe(W,"BUTTON",{class:!0});var H=ie(o);vt(h.$$.fragment,H),H.forEach(V),p=Ke(W),f=oe(W,"BUTTON",{class:!0});var re=ie(f);vt(d.$$.fragment,re),re.forEach(V),c=Ke(W),g=oe(W,"BUTTON",{class:!0});var ee=ie(g);vt(y.$$.fragment,ee),ee.forEach(V),W.forEach(V),m=Ke(Z),b&&b.l(Z),C=Ke(Z),w=oe(Z,"DIV",{class:!0});var Q=ie(w);vt(O.$$.fragment,Q),Q.forEach(V),Z.forEach(V),q.forEach(V),this.h()},h(){T(a,"class","btn btn-sm"),qt(a,"btn-active",e[0].weightMode===At.Bars),T(o,"class","btn btn-sm"),qt(o,"btn-active",e[0].weightMode===At.Pie),T(f,"class","btn btn-sm"),qt(f,"btn-active",e[0].weightMode===At.Circle),T(g,"class","btn btn-sm"),qt(g,"btn-active",e[0].weightMode===At.Embed),T(n,"class","btn-group btn-group-horizontal w-full flex justify-end p-2"),T(w,"class","h-48 w-full p-4 flex flex-col"),T(r,"class","flex flex-col h-full place-content-between"),T(t,"class","w-full h-full flex flex-col")},m(L,q){Ee(L,t,q),Y(t,r),Y(r,n),Y(n,a),gt(u,a,null),Y(n,l),Y(n,o),gt(h,o,null),Y(n,p),Y(n,f),gt(d,f,null),Y(n,c),Y(n,g),gt(y,g,null),Y(r,m),~_&&N[_].m(r,null),Y(r,C),Y(r,w),gt(O,w,null),S=!0,B||(P=[ke(a,"click",e[2]),ke(o,"click",e[3]),ke(f,"click",e[4]),ke(g,"click",e[5])],B=!0)},p(L,[q]){(!S||q&1)&&qt(a,"btn-active",L[0].weightMode===At.Bars),(!S||q&1)&&qt(o,"btn-active",L[0].weightMode===At.Pie),(!S||q&1)&&qt(f,"btn-active",L[0].weightMode===At.Circle),(!S||q&1)&&qt(g,"btn-active",L[0].weightMode===At.Embed);let Z=_;_=G(L),_!==Z&&(b&&(Dn(),Ue(N[Z],1,1,()=>{N[Z]=null}),bn()),~_?(b=N[_],b||(b=N[_]=I[_](L),b.c()),xe(b,1),b.m(r,C)):b=null)},i(L){S||(xe(u.$$.fragment,L),xe(h.$$.fragment,L),xe(d.$$.fragment,L),xe(y.$$.fragment,L),xe(b),xe(O.$$.fragment,L),S=!0)},o(L){Ue(u.$$.fragment,L),Ue(h.$$.fragment,L),Ue(d.$$.fragment,L),Ue(y.$$.fragment,L),Ue(b),Ue(O.$$.fragment,L),S=!1},d(L){L&&V(t),mt(u),mt(h),mt(d),mt(y),~_&&N[_].d(),mt(O),B=!1,Vr(P)}}}function y3(e,t,r){let n;Ot(e,An,p=>r(0,n=p));function a(p){const f={...n,weightMode:p};Nt.update(f)}return[n,a,()=>a(At.Bars),()=>a(At.Pie),()=>a(At.Circle),()=>a(At.Embed)]}class A3 extends Rt{constructor(t){super(),Lt(this,t,y3,b3,Ut,{})}}var ws={},w3={get exports(){return ws},set exports(e){ws=e}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var r,n="4.17.21",a=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",o="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",p=500,f="__lodash_placeholder__",d=1,c=2,g=4,y=1,m=2,_=1,b=2,C=4,w=8,O=16,S=32,B=64,P=128,I=256,N=512,G=30,L="...",q=800,Z=16,W=1,z=2,H=3,re=1/0,ee=9007199254740991,Q=17976931348623157e292,le=0/0,me=4294967295,Fe=me-1,be=me>>>1,Ne=[["ary",P],["bind",_],["bindKey",b],["curry",w],["curryRight",O],["flip",N],["partial",S],["partialRight",B],["rearg",I]],je="[object Arguments]",Me="[object Array]",it="[object AsyncFunction]",qe="[object Boolean]",Te="[object Date]",Re="[object DOMException]",lt="[object Error]",et="[object Function]",at="[object GeneratorFunction]",tt="[object Map]",rt="[object Number]",ze="[object Null]",We="[object Object]",Ae="[object Promise]",Se="[object Proxy]",yt="[object RegExp]",Tt="[object Set]",Wt="[object String]",R="[object Symbol]",j="[object Undefined]",$="[object WeakMap]",fe="[object WeakSet]",ne="[object ArrayBuffer]",he="[object DataView]",ae="[object Float32Array]",ce="[object Float64Array]",ye="[object Int8Array]",Oe="[object Int16Array]",Xe="[object Int32Array]",we="[object Uint8Array]",Vt="[object Uint8ClampedArray]",St="[object Uint16Array]",rr="[object Uint32Array]",Zt=/\b__p \+= '';/g,mr=/\b(__p \+=) '' \+/g,$t=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_r=/&(?:amp|lt|gt|quot|#39);/g,fr=/[&<>"']/g,cr=RegExp(_r.source),an=RegExp(fr.source),dr=/<%-([\s\S]+?)%>/g,wn=/<%([\s\S]+?)%>/g,Kn=/<%=([\s\S]+?)%>/g,Nn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kn=/^\w*$/,Gi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pi=/[\\^$.*+?()[\]{}|]/g,Aa=RegExp(Pi.source),wr=/^\s+/,nr=/\s/,wa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,oi=/\{\n\/\* \[wrapped with (.+)\] \*/,un=/,? & /,Yn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xi=/[()=,{}\[\]\/\s]/,Ea=/\\(\\)?/g,Ca=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ki=/\w*$/,Fa=/^[-+]0x[0-9a-f]+$/i,Sa=/^0b[01]+$/i,Ba=/^\[object .+?Constructor\]$/,Oa=/^0o[0-7]+$/i,Ma=/^(?:0|[1-9]\d*)$/,Pa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,li=/($^)/,xa=/['\n\r\u2028\u2029\\]/g,fi="\\ud800-\\udfff",Ta="\\u0300-\\u036f",Ia="\\ufe20-\\ufe2f",Na="\\u20d0-\\u20ff",Yi=Ta+Ia+Na,Rn="\\u2700-\\u27bf",Dr="a-z\\xdf-\\xf6\\xf8-\\xff",ur="\\xac\\xb1\\xd7\\xf7",Nr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ti="\\u2000-\\u206f",Zn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ln="A-Z\\xc0-\\xd6\\xd8-\\xde",Ii="\\ufe0e\\ufe0f",En=ur+Nr+Ti+Zn,sn="['’]",Gs="["+fi+"]",ka="["+En+"]",Zi="["+Yi+"]",uu="\\d+",D="["+Rn+"]",E="["+Dr+"]",k="[^"+fi+En+uu+Rn+Dr+Ln+"]",X="\\ud83c[\\udffb-\\udfff]",pe="(?:"+Zi+"|"+X+")",Ce="[^"+fi+"]",ot="(?:\\ud83c[\\udde6-\\uddff]){2}",Dt="[\\ud800-\\udbff][\\udc00-\\udfff]",Gt="["+Ln+"]",sr="\\u200d",Ef="(?:"+E+"|"+k+")",$p="(?:"+Gt+"|"+k+")",Cf="(?:"+sn+"(?:d|ll|m|re|s|t|ve))?",Ff="(?:"+sn+"(?:D|LL|M|RE|S|T|VE))?",Sf=pe+"?",Bf="["+Ii+"]?",Xp="(?:"+sr+"(?:"+[Ce,ot,Dt].join("|")+")"+Bf+Sf+")*",Jp="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qp="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Of=Bf+Sf+Xp,e1="(?:"+[D,ot,Dt].join("|")+")"+Of,t1="(?:"+[Ce+Zi+"?",Zi,ot,Dt,Gs].join("|")+")",r1=RegExp(sn,"g"),n1=RegExp(Zi,"g"),Ks=RegExp(X+"(?="+X+")|"+t1+Of,"g"),i1=RegExp([Gt+"?"+E+"+"+Cf+"(?="+[ka,Gt,"$"].join("|")+")",$p+"+"+Ff+"(?="+[ka,Gt+Ef,"$"].join("|")+")",Gt+"?"+Ef+"+"+Cf,Gt+"+"+Ff,Qp,Jp,uu,e1].join("|"),"g"),a1=RegExp("["+sr+fi+Yi+Ii+"]"),u1=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,s1=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],o1=-1,Ht={};Ht[ae]=Ht[ce]=Ht[ye]=Ht[Oe]=Ht[Xe]=Ht[we]=Ht[Vt]=Ht[St]=Ht[rr]=!0,Ht[je]=Ht[Me]=Ht[ne]=Ht[qe]=Ht[he]=Ht[Te]=Ht[lt]=Ht[et]=Ht[tt]=Ht[rt]=Ht[We]=Ht[yt]=Ht[Tt]=Ht[Wt]=Ht[$]=!1;var jt={};jt[je]=jt[Me]=jt[ne]=jt[he]=jt[qe]=jt[Te]=jt[ae]=jt[ce]=jt[ye]=jt[Oe]=jt[Xe]=jt[tt]=jt[rt]=jt[We]=jt[yt]=jt[Tt]=jt[Wt]=jt[R]=jt[we]=jt[Vt]=jt[St]=jt[rr]=!0,jt[lt]=jt[et]=jt[$]=!1;var l1={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},f1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c1={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},h1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},d1=parseFloat,p1=parseInt,Mf=typeof hr=="object"&&hr&&hr.Object===Object&&hr,v1=typeof self=="object"&&self&&self.Object===Object&&self,Er=Mf||v1||Function("return this")(),Ys=t&&!t.nodeType&&t,Ni=Ys&&!0&&e&&!e.nodeType&&e,Pf=Ni&&Ni.exports===Ys,Zs=Pf&&Mf.process,on=function(){try{var J=Ni&&Ni.require&&Ni.require("util").types;return J||Zs&&Zs.binding&&Zs.binding("util")}catch{}}(),xf=on&&on.isArrayBuffer,Tf=on&&on.isDate,If=on&&on.isMap,Nf=on&&on.isRegExp,kf=on&&on.isSet,Rf=on&&on.isTypedArray;function $r(J,de,ue){switch(ue.length){case 0:return J.call(de);case 1:return J.call(de,ue[0]);case 2:return J.call(de,ue[0],ue[1]);case 3:return J.call(de,ue[0],ue[1],ue[2])}return J.apply(de,ue)}function g1(J,de,ue,Pe){for(var ut=-1,wt=J==null?0:J.length;++ut<wt;){var pr=J[ut];de(Pe,pr,ue(pr),J)}return Pe}function ln(J,de){for(var ue=-1,Pe=J==null?0:J.length;++ue<Pe&&de(J[ue],ue,J)!==!1;);return J}function m1(J,de){for(var ue=J==null?0:J.length;ue--&&de(J[ue],ue,J)!==!1;);return J}function Lf(J,de){for(var ue=-1,Pe=J==null?0:J.length;++ue<Pe;)if(!de(J[ue],ue,J))return!1;return!0}function ci(J,de){for(var ue=-1,Pe=J==null?0:J.length,ut=0,wt=[];++ue<Pe;){var pr=J[ue];de(pr,ue,J)&&(wt[ut++]=pr)}return wt}function su(J,de){var ue=J==null?0:J.length;return!!ue&&$i(J,de,0)>-1}function $s(J,de,ue){for(var Pe=-1,ut=J==null?0:J.length;++Pe<ut;)if(ue(de,J[Pe]))return!0;return!1}function Kt(J,de){for(var ue=-1,Pe=J==null?0:J.length,ut=Array(Pe);++ue<Pe;)ut[ue]=de(J[ue],ue,J);return ut}function hi(J,de){for(var ue=-1,Pe=de.length,ut=J.length;++ue<Pe;)J[ut+ue]=de[ue];return J}function Xs(J,de,ue,Pe){var ut=-1,wt=J==null?0:J.length;for(Pe&&wt&&(ue=J[++ut]);++ut<wt;)ue=de(ue,J[ut],ut,J);return ue}function _1(J,de,ue,Pe){var ut=J==null?0:J.length;for(Pe&&ut&&(ue=J[--ut]);ut--;)ue=de(ue,J[ut],ut,J);return ue}function Js(J,de){for(var ue=-1,Pe=J==null?0:J.length;++ue<Pe;)if(de(J[ue],ue,J))return!0;return!1}var D1=Qs("length");function b1(J){return J.split("")}function y1(J){return J.match(Yn)||[]}function Uf(J,de,ue){var Pe;return ue(J,function(ut,wt,pr){if(de(ut,wt,pr))return Pe=wt,!1}),Pe}function ou(J,de,ue,Pe){for(var ut=J.length,wt=ue+(Pe?1:-1);Pe?wt--:++wt<ut;)if(de(J[wt],wt,J))return wt;return-1}function $i(J,de,ue){return de===de?T1(J,de,ue):ou(J,Vf,ue)}function A1(J,de,ue,Pe){for(var ut=ue-1,wt=J.length;++ut<wt;)if(Pe(J[ut],de))return ut;return-1}function Vf(J){return J!==J}function jf(J,de){var ue=J==null?0:J.length;return ue?to(J,de)/ue:le}function Qs(J){return function(de){return de==null?r:de[J]}}function eo(J){return function(de){return J==null?r:J[de]}}function qf(J,de,ue,Pe,ut){return ut(J,function(wt,pr,It){ue=Pe?(Pe=!1,wt):de(ue,wt,pr,It)}),ue}function w1(J,de){var ue=J.length;for(J.sort(de);ue--;)J[ue]=J[ue].value;return J}function to(J,de){for(var ue,Pe=-1,ut=J.length;++Pe<ut;){var wt=de(J[Pe]);wt!==r&&(ue=ue===r?wt:ue+wt)}return ue}function ro(J,de){for(var ue=-1,Pe=Array(J);++ue<J;)Pe[ue]=de(ue);return Pe}function E1(J,de){return Kt(de,function(ue){return[ue,J[ue]]})}function zf(J){return J&&J.slice(0,Kf(J)+1).replace(wr,"")}function Xr(J){return function(de){return J(de)}}function no(J,de){return Kt(de,function(ue){return J[ue]})}function Ra(J,de){return J.has(de)}function Wf(J,de){for(var ue=-1,Pe=J.length;++ue<Pe&&$i(de,J[ue],0)>-1;);return ue}function Hf(J,de){for(var ue=J.length;ue--&&$i(de,J[ue],0)>-1;);return ue}function C1(J,de){for(var ue=J.length,Pe=0;ue--;)J[ue]===de&&++Pe;return Pe}var F1=eo(l1),S1=eo(f1);function B1(J){return"\\"+h1[J]}function O1(J,de){return J==null?r:J[de]}function Xi(J){return a1.test(J)}function M1(J){return u1.test(J)}function P1(J){for(var de,ue=[];!(de=J.next()).done;)ue.push(de.value);return ue}function io(J){var de=-1,ue=Array(J.size);return J.forEach(function(Pe,ut){ue[++de]=[ut,Pe]}),ue}function Gf(J,de){return function(ue){return J(de(ue))}}function di(J,de){for(var ue=-1,Pe=J.length,ut=0,wt=[];++ue<Pe;){var pr=J[ue];(pr===de||pr===f)&&(J[ue]=f,wt[ut++]=ue)}return wt}function lu(J){var de=-1,ue=Array(J.size);return J.forEach(function(Pe){ue[++de]=Pe}),ue}function x1(J){var de=-1,ue=Array(J.size);return J.forEach(function(Pe){ue[++de]=[Pe,Pe]}),ue}function T1(J,de,ue){for(var Pe=ue-1,ut=J.length;++Pe<ut;)if(J[Pe]===de)return Pe;return-1}function I1(J,de,ue){for(var Pe=ue+1;Pe--;)if(J[Pe]===de)return Pe;return Pe}function Ji(J){return Xi(J)?k1(J):D1(J)}function Cn(J){return Xi(J)?R1(J):b1(J)}function Kf(J){for(var de=J.length;de--&&nr.test(J.charAt(de)););return de}var N1=eo(c1);function k1(J){for(var de=Ks.lastIndex=0;Ks.test(J);)++de;return de}function R1(J){return J.match(Ks)||[]}function L1(J){return J.match(i1)||[]}var U1=function J(de){de=de==null?Er:Qi.defaults(Er.Object(),de,Qi.pick(Er,s1));var ue=de.Array,Pe=de.Date,ut=de.Error,wt=de.Function,pr=de.Math,It=de.Object,ao=de.RegExp,V1=de.String,fn=de.TypeError,fu=ue.prototype,j1=wt.prototype,ea=It.prototype,cu=de["__core-js_shared__"],hu=j1.toString,Bt=ea.hasOwnProperty,q1=0,Yf=function(){var i=/[^.]+$/.exec(cu&&cu.keys&&cu.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),du=ea.toString,z1=hu.call(It),W1=Er._,H1=ao("^"+hu.call(Bt).replace(Pi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pu=Pf?de.Buffer:r,pi=de.Symbol,vu=de.Uint8Array,Zf=pu?pu.allocUnsafe:r,gu=Gf(It.getPrototypeOf,It),$f=It.create,Xf=ea.propertyIsEnumerable,mu=fu.splice,Jf=pi?pi.isConcatSpreadable:r,La=pi?pi.iterator:r,ki=pi?pi.toStringTag:r,_u=function(){try{var i=ji(It,"defineProperty");return i({},"",{}),i}catch{}}(),G1=de.clearTimeout!==Er.clearTimeout&&de.clearTimeout,K1=Pe&&Pe.now!==Er.Date.now&&Pe.now,Y1=de.setTimeout!==Er.setTimeout&&de.setTimeout,Du=pr.ceil,bu=pr.floor,uo=It.getOwnPropertySymbols,Z1=pu?pu.isBuffer:r,Qf=de.isFinite,$1=fu.join,X1=Gf(It.keys,It),vr=pr.max,Pr=pr.min,J1=Pe.now,Q1=de.parseInt,ec=pr.random,ev=fu.reverse,so=ji(de,"DataView"),Ua=ji(de,"Map"),oo=ji(de,"Promise"),ta=ji(de,"Set"),Va=ji(de,"WeakMap"),ja=ji(It,"create"),yu=Va&&new Va,ra={},tv=qi(so),rv=qi(Ua),nv=qi(oo),iv=qi(ta),av=qi(Va),Au=pi?pi.prototype:r,qa=Au?Au.valueOf:r,tc=Au?Au.toString:r;function M(i){if(ir(i)&&!st(i)&&!(i instanceof _t)){if(i instanceof cn)return i;if(Bt.call(i,"__wrapped__"))return rh(i)}return new cn(i)}var na=function(){function i(){}return function(s){if(!Xt(s))return{};if($f)return $f(s);i.prototype=s;var v=new i;return i.prototype=r,v}}();function wu(){}function cn(i,s){this.__wrapped__=i,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=r}M.templateSettings={escape:dr,evaluate:wn,interpolate:Kn,variable:"",imports:{_:M}},M.prototype=wu.prototype,M.prototype.constructor=M,cn.prototype=na(wu.prototype),cn.prototype.constructor=cn;function _t(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=me,this.__views__=[]}function uv(){var i=new _t(this.__wrapped__);return i.__actions__=jr(this.__actions__),i.__dir__=this.__dir__,i.__filtered__=this.__filtered__,i.__iteratees__=jr(this.__iteratees__),i.__takeCount__=this.__takeCount__,i.__views__=jr(this.__views__),i}function sv(){if(this.__filtered__){var i=new _t(this);i.__dir__=-1,i.__filtered__=!0}else i=this.clone(),i.__dir__*=-1;return i}function ov(){var i=this.__wrapped__.value(),s=this.__dir__,v=st(i),A=s<0,F=v?i.length:0,x=bg(0,F,this.__views__),U=x.start,K=x.end,te=K-U,ve=A?K:U-1,ge=this.__iteratees__,De=ge.length,Be=0,Le=Pr(te,this.__takeCount__);if(!v||!A&&F==te&&Le==te)return Cc(i,this.__actions__);var Je=[];e:for(;te--&&Be<Le;){ve+=s;for(var ct=-1,Qe=i[ve];++ct<De;){var dt=ge[ct],bt=dt.iteratee,en=dt.type,Lr=bt(Qe);if(en==z)Qe=Lr;else if(!Lr){if(en==W)continue e;break e}}Je[Be++]=Qe}return Je}_t.prototype=na(wu.prototype),_t.prototype.constructor=_t;function Ri(i){var s=-1,v=i==null?0:i.length;for(this.clear();++s<v;){var A=i[s];this.set(A[0],A[1])}}function lv(){this.__data__=ja?ja(null):{},this.size=0}function fv(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s}function cv(i){var s=this.__data__;if(ja){var v=s[i];return v===h?r:v}return Bt.call(s,i)?s[i]:r}function hv(i){var s=this.__data__;return ja?s[i]!==r:Bt.call(s,i)}function dv(i,s){var v=this.__data__;return this.size+=this.has(i)?0:1,v[i]=ja&&s===r?h:s,this}Ri.prototype.clear=lv,Ri.prototype.delete=fv,Ri.prototype.get=cv,Ri.prototype.has=hv,Ri.prototype.set=dv;function $n(i){var s=-1,v=i==null?0:i.length;for(this.clear();++s<v;){var A=i[s];this.set(A[0],A[1])}}function pv(){this.__data__=[],this.size=0}function vv(i){var s=this.__data__,v=Eu(s,i);if(v<0)return!1;var A=s.length-1;return v==A?s.pop():mu.call(s,v,1),--this.size,!0}function gv(i){var s=this.__data__,v=Eu(s,i);return v<0?r:s[v][1]}function mv(i){return Eu(this.__data__,i)>-1}function _v(i,s){var v=this.__data__,A=Eu(v,i);return A<0?(++this.size,v.push([i,s])):v[A][1]=s,this}$n.prototype.clear=pv,$n.prototype.delete=vv,$n.prototype.get=gv,$n.prototype.has=mv,$n.prototype.set=_v;function Xn(i){var s=-1,v=i==null?0:i.length;for(this.clear();++s<v;){var A=i[s];this.set(A[0],A[1])}}function Dv(){this.size=0,this.__data__={hash:new Ri,map:new(Ua||$n),string:new Ri}}function bv(i){var s=ku(this,i).delete(i);return this.size-=s?1:0,s}function yv(i){return ku(this,i).get(i)}function Av(i){return ku(this,i).has(i)}function wv(i,s){var v=ku(this,i),A=v.size;return v.set(i,s),this.size+=v.size==A?0:1,this}Xn.prototype.clear=Dv,Xn.prototype.delete=bv,Xn.prototype.get=yv,Xn.prototype.has=Av,Xn.prototype.set=wv;function Li(i){var s=-1,v=i==null?0:i.length;for(this.__data__=new Xn;++s<v;)this.add(i[s])}function Ev(i){return this.__data__.set(i,h),this}function Cv(i){return this.__data__.has(i)}Li.prototype.add=Li.prototype.push=Ev,Li.prototype.has=Cv;function Fn(i){var s=this.__data__=new $n(i);this.size=s.size}function Fv(){this.__data__=new $n,this.size=0}function Sv(i){var s=this.__data__,v=s.delete(i);return this.size=s.size,v}function Bv(i){return this.__data__.get(i)}function Ov(i){return this.__data__.has(i)}function Mv(i,s){var v=this.__data__;if(v instanceof $n){var A=v.__data__;if(!Ua||A.length<a-1)return A.push([i,s]),this.size=++v.size,this;v=this.__data__=new Xn(A)}return v.set(i,s),this.size=v.size,this}Fn.prototype.clear=Fv,Fn.prototype.delete=Sv,Fn.prototype.get=Bv,Fn.prototype.has=Ov,Fn.prototype.set=Mv;function rc(i,s){var v=st(i),A=!v&&zi(i),F=!v&&!A&&Di(i),x=!v&&!A&&!F&&sa(i),U=v||A||F||x,K=U?ro(i.length,V1):[],te=K.length;for(var ve in i)(s||Bt.call(i,ve))&&!(U&&(ve=="length"||F&&(ve=="offset"||ve=="parent")||x&&(ve=="buffer"||ve=="byteLength"||ve=="byteOffset")||ti(ve,te)))&&K.push(ve);return K}function nc(i){var s=i.length;return s?i[bo(0,s-1)]:r}function Pv(i,s){return Ru(jr(i),Ui(s,0,i.length))}function xv(i){return Ru(jr(i))}function lo(i,s,v){(v!==r&&!Sn(i[s],v)||v===r&&!(s in i))&&Jn(i,s,v)}function za(i,s,v){var A=i[s];(!(Bt.call(i,s)&&Sn(A,v))||v===r&&!(s in i))&&Jn(i,s,v)}function Eu(i,s){for(var v=i.length;v--;)if(Sn(i[v][0],s))return v;return-1}function Tv(i,s,v,A){return vi(i,function(F,x,U){s(A,F,v(F),U)}),A}function ic(i,s){return i&&Vn(s,br(s),i)}function Iv(i,s){return i&&Vn(s,zr(s),i)}function Jn(i,s,v){s=="__proto__"&&_u?_u(i,s,{configurable:!0,enumerable:!0,value:v,writable:!0}):i[s]=v}function fo(i,s){for(var v=-1,A=s.length,F=ue(A),x=i==null;++v<A;)F[v]=x?r:Ho(i,s[v]);return F}function Ui(i,s,v){return i===i&&(v!==r&&(i=i<=v?i:v),s!==r&&(i=i>=s?i:s)),i}function hn(i,s,v,A,F,x){var U,K=s&d,te=s&c,ve=s&g;if(v&&(U=F?v(i,A,F,x):v(i)),U!==r)return U;if(!Xt(i))return i;var ge=st(i);if(ge){if(U=Ag(i),!K)return jr(i,U)}else{var De=xr(i),Be=De==et||De==at;if(Di(i))return Bc(i,K);if(De==We||De==je||Be&&!F){if(U=te||Be?{}:Kc(i),!K)return te?cg(i,Iv(U,i)):fg(i,ic(U,i))}else{if(!jt[De])return F?i:{};U=wg(i,De,K)}}x||(x=new Fn);var Le=x.get(i);if(Le)return Le;x.set(i,U),Ah(i)?i.forEach(function(Qe){U.add(hn(Qe,s,v,Qe,i,x))}):bh(i)&&i.forEach(function(Qe,dt){U.set(dt,hn(Qe,s,v,dt,i,x))});var Je=ve?te?Po:Mo:te?zr:br,ct=ge?r:Je(i);return ln(ct||i,function(Qe,dt){ct&&(dt=Qe,Qe=i[dt]),za(U,dt,hn(Qe,s,v,dt,i,x))}),U}function Nv(i){var s=br(i);return function(v){return ac(v,i,s)}}function ac(i,s,v){var A=v.length;if(i==null)return!A;for(i=It(i);A--;){var F=v[A],x=s[F],U=i[F];if(U===r&&!(F in i)||!x(U))return!1}return!0}function uc(i,s,v){if(typeof i!="function")throw new fn(l);return $a(function(){i.apply(r,v)},s)}function Wa(i,s,v,A){var F=-1,x=su,U=!0,K=i.length,te=[],ve=s.length;if(!K)return te;v&&(s=Kt(s,Xr(v))),A?(x=$s,U=!1):s.length>=a&&(x=Ra,U=!1,s=new Li(s));e:for(;++F<K;){var ge=i[F],De=v==null?ge:v(ge);if(ge=A||ge!==0?ge:0,U&&De===De){for(var Be=ve;Be--;)if(s[Be]===De)continue e;te.push(ge)}else x(s,De,A)||te.push(ge)}return te}var vi=Tc(Un),sc=Tc(ho,!0);function kv(i,s){var v=!0;return vi(i,function(A,F,x){return v=!!s(A,F,x),v}),v}function Cu(i,s,v){for(var A=-1,F=i.length;++A<F;){var x=i[A],U=s(x);if(U!=null&&(K===r?U===U&&!Qr(U):v(U,K)))var K=U,te=x}return te}function Rv(i,s,v,A){var F=i.length;for(v=ft(v),v<0&&(v=-v>F?0:F+v),A=A===r||A>F?F:ft(A),A<0&&(A+=F),A=v>A?0:Eh(A);v<A;)i[v++]=s;return i}function oc(i,s){var v=[];return vi(i,function(A,F,x){s(A,F,x)&&v.push(A)}),v}function Cr(i,s,v,A,F){var x=-1,U=i.length;for(v||(v=Cg),F||(F=[]);++x<U;){var K=i[x];s>0&&v(K)?s>1?Cr(K,s-1,v,A,F):hi(F,K):A||(F[F.length]=K)}return F}var co=Ic(),lc=Ic(!0);function Un(i,s){return i&&co(i,s,br)}function ho(i,s){return i&&lc(i,s,br)}function Fu(i,s){return ci(s,function(v){return ri(i[v])})}function Vi(i,s){s=mi(s,i);for(var v=0,A=s.length;i!=null&&v<A;)i=i[jn(s[v++])];return v&&v==A?i:r}function fc(i,s,v){var A=s(i);return st(i)?A:hi(A,v(i))}function kr(i){return i==null?i===r?j:ze:ki&&ki in It(i)?Dg(i):xg(i)}function po(i,s){return i>s}function Lv(i,s){return i!=null&&Bt.call(i,s)}function Uv(i,s){return i!=null&&s in It(i)}function Vv(i,s,v){return i>=Pr(s,v)&&i<vr(s,v)}function vo(i,s,v){for(var A=v?$s:su,F=i[0].length,x=i.length,U=x,K=ue(x),te=1/0,ve=[];U--;){var ge=i[U];U&&s&&(ge=Kt(ge,Xr(s))),te=Pr(ge.length,te),K[U]=!v&&(s||F>=120&&ge.length>=120)?new Li(U&&ge):r}ge=i[0];var De=-1,Be=K[0];e:for(;++De<F&&ve.length<te;){var Le=ge[De],Je=s?s(Le):Le;if(Le=v||Le!==0?Le:0,!(Be?Ra(Be,Je):A(ve,Je,v))){for(U=x;--U;){var ct=K[U];if(!(ct?Ra(ct,Je):A(i[U],Je,v)))continue e}Be&&Be.push(Je),ve.push(Le)}}return ve}function jv(i,s,v,A){return Un(i,function(F,x,U){s(A,v(F),x,U)}),A}function Ha(i,s,v){s=mi(s,i),i=Xc(i,s);var A=i==null?i:i[jn(pn(s))];return A==null?r:$r(A,i,v)}function cc(i){return ir(i)&&kr(i)==je}function qv(i){return ir(i)&&kr(i)==ne}function zv(i){return ir(i)&&kr(i)==Te}function Ga(i,s,v,A,F){return i===s?!0:i==null||s==null||!ir(i)&&!ir(s)?i!==i&&s!==s:Wv(i,s,v,A,Ga,F)}function Wv(i,s,v,A,F,x){var U=st(i),K=st(s),te=U?Me:xr(i),ve=K?Me:xr(s);te=te==je?We:te,ve=ve==je?We:ve;var ge=te==We,De=ve==We,Be=te==ve;if(Be&&Di(i)){if(!Di(s))return!1;U=!0,ge=!1}if(Be&&!ge)return x||(x=new Fn),U||sa(i)?Wc(i,s,v,A,F,x):mg(i,s,te,v,A,F,x);if(!(v&y)){var Le=ge&&Bt.call(i,"__wrapped__"),Je=De&&Bt.call(s,"__wrapped__");if(Le||Je){var ct=Le?i.value():i,Qe=Je?s.value():s;return x||(x=new Fn),F(ct,Qe,v,A,x)}}return Be?(x||(x=new Fn),_g(i,s,v,A,F,x)):!1}function Hv(i){return ir(i)&&xr(i)==tt}function go(i,s,v,A){var F=v.length,x=F,U=!A;if(i==null)return!x;for(i=It(i);F--;){var K=v[F];if(U&&K[2]?K[1]!==i[K[0]]:!(K[0]in i))return!1}for(;++F<x;){K=v[F];var te=K[0],ve=i[te],ge=K[1];if(U&&K[2]){if(ve===r&&!(te in i))return!1}else{var De=new Fn;if(A)var Be=A(ve,ge,te,i,s,De);if(!(Be===r?Ga(ge,ve,y|m,A,De):Be))return!1}}return!0}function hc(i){if(!Xt(i)||Sg(i))return!1;var s=ri(i)?H1:Ba;return s.test(qi(i))}function Gv(i){return ir(i)&&kr(i)==yt}function Kv(i){return ir(i)&&xr(i)==Tt}function Yv(i){return ir(i)&&zu(i.length)&&!!Ht[kr(i)]}function dc(i){return typeof i=="function"?i:i==null?Wr:typeof i=="object"?st(i)?gc(i[0],i[1]):vc(i):Nh(i)}function mo(i){if(!Za(i))return X1(i);var s=[];for(var v in It(i))Bt.call(i,v)&&v!="constructor"&&s.push(v);return s}function Zv(i){if(!Xt(i))return Pg(i);var s=Za(i),v=[];for(var A in i)A=="constructor"&&(s||!Bt.call(i,A))||v.push(A);return v}function _o(i,s){return i<s}function pc(i,s){var v=-1,A=qr(i)?ue(i.length):[];return vi(i,function(F,x,U){A[++v]=s(F,x,U)}),A}function vc(i){var s=To(i);return s.length==1&&s[0][2]?Zc(s[0][0],s[0][1]):function(v){return v===i||go(v,i,s)}}function gc(i,s){return No(i)&&Yc(s)?Zc(jn(i),s):function(v){var A=Ho(v,i);return A===r&&A===s?Go(v,i):Ga(s,A,y|m)}}function Su(i,s,v,A,F){i!==s&&co(s,function(x,U){if(F||(F=new Fn),Xt(x))$v(i,s,U,v,Su,A,F);else{var K=A?A(Ro(i,U),x,U+"",i,s,F):r;K===r&&(K=x),lo(i,U,K)}},zr)}function $v(i,s,v,A,F,x,U){var K=Ro(i,v),te=Ro(s,v),ve=U.get(te);if(ve){lo(i,v,ve);return}var ge=x?x(K,te,v+"",i,s,U):r,De=ge===r;if(De){var Be=st(te),Le=!Be&&Di(te),Je=!Be&&!Le&&sa(te);ge=te,Be||Le||Je?st(K)?ge=K:or(K)?ge=jr(K):Le?(De=!1,ge=Bc(te,!0)):Je?(De=!1,ge=Oc(te,!0)):ge=[]:Xa(te)||zi(te)?(ge=K,zi(K)?ge=Ch(K):(!Xt(K)||ri(K))&&(ge=Kc(te))):De=!1}De&&(U.set(te,ge),F(ge,te,A,x,U),U.delete(te)),lo(i,v,ge)}function mc(i,s){var v=i.length;if(v)return s+=s<0?v:0,ti(s,v)?i[s]:r}function _c(i,s,v){s.length?s=Kt(s,function(x){return st(x)?function(U){return Vi(U,x.length===1?x[0]:x)}:x}):s=[Wr];var A=-1;s=Kt(s,Xr(He()));var F=pc(i,function(x,U,K){var te=Kt(s,function(ve){return ve(x)});return{criteria:te,index:++A,value:x}});return w1(F,function(x,U){return lg(x,U,v)})}function Xv(i,s){return Dc(i,s,function(v,A){return Go(i,A)})}function Dc(i,s,v){for(var A=-1,F=s.length,x={};++A<F;){var U=s[A],K=Vi(i,U);v(K,U)&&Ka(x,mi(U,i),K)}return x}function Jv(i){return function(s){return Vi(s,i)}}function Do(i,s,v,A){var F=A?A1:$i,x=-1,U=s.length,K=i;for(i===s&&(s=jr(s)),v&&(K=Kt(i,Xr(v)));++x<U;)for(var te=0,ve=s[x],ge=v?v(ve):ve;(te=F(K,ge,te,A))>-1;)K!==i&&mu.call(K,te,1),mu.call(i,te,1);return i}function bc(i,s){for(var v=i?s.length:0,A=v-1;v--;){var F=s[v];if(v==A||F!==x){var x=F;ti(F)?mu.call(i,F,1):wo(i,F)}}return i}function bo(i,s){return i+bu(ec()*(s-i+1))}function Qv(i,s,v,A){for(var F=-1,x=vr(Du((s-i)/(v||1)),0),U=ue(x);x--;)U[A?x:++F]=i,i+=v;return U}function yo(i,s){var v="";if(!i||s<1||s>ee)return v;do s%2&&(v+=i),s=bu(s/2),s&&(i+=i);while(s);return v}function ht(i,s){return Lo($c(i,s,Wr),i+"")}function eg(i){return nc(oa(i))}function tg(i,s){var v=oa(i);return Ru(v,Ui(s,0,v.length))}function Ka(i,s,v,A){if(!Xt(i))return i;s=mi(s,i);for(var F=-1,x=s.length,U=x-1,K=i;K!=null&&++F<x;){var te=jn(s[F]),ve=v;if(te==="__proto__"||te==="constructor"||te==="prototype")return i;if(F!=U){var ge=K[te];ve=A?A(ge,te,K):r,ve===r&&(ve=Xt(ge)?ge:ti(s[F+1])?[]:{})}za(K,te,ve),K=K[te]}return i}var yc=yu?function(i,s){return yu.set(i,s),i}:Wr,rg=_u?function(i,s){return _u(i,"toString",{configurable:!0,enumerable:!1,value:Yo(s),writable:!0})}:Wr;function ng(i){return Ru(oa(i))}function dn(i,s,v){var A=-1,F=i.length;s<0&&(s=-s>F?0:F+s),v=v>F?F:v,v<0&&(v+=F),F=s>v?0:v-s>>>0,s>>>=0;for(var x=ue(F);++A<F;)x[A]=i[A+s];return x}function ig(i,s){var v;return vi(i,function(A,F,x){return v=s(A,F,x),!v}),!!v}function Bu(i,s,v){var A=0,F=i==null?A:i.length;if(typeof s=="number"&&s===s&&F<=be){for(;A<F;){var x=A+F>>>1,U=i[x];U!==null&&!Qr(U)&&(v?U<=s:U<s)?A=x+1:F=x}return F}return Ao(i,s,Wr,v)}function Ao(i,s,v,A){var F=0,x=i==null?0:i.length;if(x===0)return 0;s=v(s);for(var U=s!==s,K=s===null,te=Qr(s),ve=s===r;F<x;){var ge=bu((F+x)/2),De=v(i[ge]),Be=De!==r,Le=De===null,Je=De===De,ct=Qr(De);if(U)var Qe=A||Je;else ve?Qe=Je&&(A||Be):K?Qe=Je&&Be&&(A||!Le):te?Qe=Je&&Be&&!Le&&(A||!ct):Le||ct?Qe=!1:Qe=A?De<=s:De<s;Qe?F=ge+1:x=ge}return Pr(x,Fe)}function Ac(i,s){for(var v=-1,A=i.length,F=0,x=[];++v<A;){var U=i[v],K=s?s(U):U;if(!v||!Sn(K,te)){var te=K;x[F++]=U===0?0:U}}return x}function wc(i){return typeof i=="number"?i:Qr(i)?le:+i}function Jr(i){if(typeof i=="string")return i;if(st(i))return Kt(i,Jr)+"";if(Qr(i))return tc?tc.call(i):"";var s=i+"";return s=="0"&&1/i==-re?"-0":s}function gi(i,s,v){var A=-1,F=su,x=i.length,U=!0,K=[],te=K;if(v)U=!1,F=$s;else if(x>=a){var ve=s?null:vg(i);if(ve)return lu(ve);U=!1,F=Ra,te=new Li}else te=s?[]:K;e:for(;++A<x;){var ge=i[A],De=s?s(ge):ge;if(ge=v||ge!==0?ge:0,U&&De===De){for(var Be=te.length;Be--;)if(te[Be]===De)continue e;s&&te.push(De),K.push(ge)}else F(te,De,v)||(te!==K&&te.push(De),K.push(ge))}return K}function wo(i,s){return s=mi(s,i),i=Xc(i,s),i==null||delete i[jn(pn(s))]}function Ec(i,s,v,A){return Ka(i,s,v(Vi(i,s)),A)}function Ou(i,s,v,A){for(var F=i.length,x=A?F:-1;(A?x--:++x<F)&&s(i[x],x,i););return v?dn(i,A?0:x,A?x+1:F):dn(i,A?x+1:0,A?F:x)}function Cc(i,s){var v=i;return v instanceof _t&&(v=v.value()),Xs(s,function(A,F){return F.func.apply(F.thisArg,hi([A],F.args))},v)}function Eo(i,s,v){var A=i.length;if(A<2)return A?gi(i[0]):[];for(var F=-1,x=ue(A);++F<A;)for(var U=i[F],K=-1;++K<A;)K!=F&&(x[F]=Wa(x[F]||U,i[K],s,v));return gi(Cr(x,1),s,v)}function Fc(i,s,v){for(var A=-1,F=i.length,x=s.length,U={};++A<F;){var K=A<x?s[A]:r;v(U,i[A],K)}return U}function Co(i){return or(i)?i:[]}function Fo(i){return typeof i=="function"?i:Wr}function mi(i,s){return st(i)?i:No(i,s)?[i]:th(Et(i))}var ag=ht;function _i(i,s,v){var A=i.length;return v=v===r?A:v,!s&&v>=A?i:dn(i,s,v)}var Sc=G1||function(i){return Er.clearTimeout(i)};function Bc(i,s){if(s)return i.slice();var v=i.length,A=Zf?Zf(v):new i.constructor(v);return i.copy(A),A}function So(i){var s=new i.constructor(i.byteLength);return new vu(s).set(new vu(i)),s}function ug(i,s){var v=s?So(i.buffer):i.buffer;return new i.constructor(v,i.byteOffset,i.byteLength)}function sg(i){var s=new i.constructor(i.source,Ki.exec(i));return s.lastIndex=i.lastIndex,s}function og(i){return qa?It(qa.call(i)):{}}function Oc(i,s){var v=s?So(i.buffer):i.buffer;return new i.constructor(v,i.byteOffset,i.length)}function Mc(i,s){if(i!==s){var v=i!==r,A=i===null,F=i===i,x=Qr(i),U=s!==r,K=s===null,te=s===s,ve=Qr(s);if(!K&&!ve&&!x&&i>s||x&&U&&te&&!K&&!ve||A&&U&&te||!v&&te||!F)return 1;if(!A&&!x&&!ve&&i<s||ve&&v&&F&&!A&&!x||K&&v&&F||!U&&F||!te)return-1}return 0}function lg(i,s,v){for(var A=-1,F=i.criteria,x=s.criteria,U=F.length,K=v.length;++A<U;){var te=Mc(F[A],x[A]);if(te){if(A>=K)return te;var ve=v[A];return te*(ve=="desc"?-1:1)}}return i.index-s.index}function Pc(i,s,v,A){for(var F=-1,x=i.length,U=v.length,K=-1,te=s.length,ve=vr(x-U,0),ge=ue(te+ve),De=!A;++K<te;)ge[K]=s[K];for(;++F<U;)(De||F<x)&&(ge[v[F]]=i[F]);for(;ve--;)ge[K++]=i[F++];return ge}function xc(i,s,v,A){for(var F=-1,x=i.length,U=-1,K=v.length,te=-1,ve=s.length,ge=vr(x-K,0),De=ue(ge+ve),Be=!A;++F<ge;)De[F]=i[F];for(var Le=F;++te<ve;)De[Le+te]=s[te];for(;++U<K;)(Be||F<x)&&(De[Le+v[U]]=i[F++]);return De}function jr(i,s){var v=-1,A=i.length;for(s||(s=ue(A));++v<A;)s[v]=i[v];return s}function Vn(i,s,v,A){var F=!v;v||(v={});for(var x=-1,U=s.length;++x<U;){var K=s[x],te=A?A(v[K],i[K],K,v,i):r;te===r&&(te=i[K]),F?Jn(v,K,te):za(v,K,te)}return v}function fg(i,s){return Vn(i,Io(i),s)}function cg(i,s){return Vn(i,Hc(i),s)}function Mu(i,s){return function(v,A){var F=st(v)?g1:Tv,x=s?s():{};return F(v,i,He(A,2),x)}}function ia(i){return ht(function(s,v){var A=-1,F=v.length,x=F>1?v[F-1]:r,U=F>2?v[2]:r;for(x=i.length>3&&typeof x=="function"?(F--,x):r,U&&Rr(v[0],v[1],U)&&(x=F<3?r:x,F=1),s=It(s);++A<F;){var K=v[A];K&&i(s,K,A,x)}return s})}function Tc(i,s){return function(v,A){if(v==null)return v;if(!qr(v))return i(v,A);for(var F=v.length,x=s?F:-1,U=It(v);(s?x--:++x<F)&&A(U[x],x,U)!==!1;);return v}}function Ic(i){return function(s,v,A){for(var F=-1,x=It(s),U=A(s),K=U.length;K--;){var te=U[i?K:++F];if(v(x[te],te,x)===!1)break}return s}}function hg(i,s,v){var A=s&_,F=Ya(i);function x(){var U=this&&this!==Er&&this instanceof x?F:i;return U.apply(A?v:this,arguments)}return x}function Nc(i){return function(s){s=Et(s);var v=Xi(s)?Cn(s):r,A=v?v[0]:s.charAt(0),F=v?_i(v,1).join(""):s.slice(1);return A[i]()+F}}function aa(i){return function(s){return Xs(Th(xh(s).replace(r1,"")),i,"")}}function Ya(i){return function(){var s=arguments;switch(s.length){case 0:return new i;case 1:return new i(s[0]);case 2:return new i(s[0],s[1]);case 3:return new i(s[0],s[1],s[2]);case 4:return new i(s[0],s[1],s[2],s[3]);case 5:return new i(s[0],s[1],s[2],s[3],s[4]);case 6:return new i(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new i(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var v=na(i.prototype),A=i.apply(v,s);return Xt(A)?A:v}}function dg(i,s,v){var A=Ya(i);function F(){for(var x=arguments.length,U=ue(x),K=x,te=ua(F);K--;)U[K]=arguments[K];var ve=x<3&&U[0]!==te&&U[x-1]!==te?[]:di(U,te);if(x-=ve.length,x<v)return Vc(i,s,Pu,F.placeholder,r,U,ve,r,r,v-x);var ge=this&&this!==Er&&this instanceof F?A:i;return $r(ge,this,U)}return F}function kc(i){return function(s,v,A){var F=It(s);if(!qr(s)){var x=He(v,3);s=br(s),v=function(K){return x(F[K],K,F)}}var U=i(s,v,A);return U>-1?F[x?s[U]:U]:r}}function Rc(i){return ei(function(s){var v=s.length,A=v,F=cn.prototype.thru;for(i&&s.reverse();A--;){var x=s[A];if(typeof x!="function")throw new fn(l);if(F&&!U&&Nu(x)=="wrapper")var U=new cn([],!0)}for(A=U?A:v;++A<v;){x=s[A];var K=Nu(x),te=K=="wrapper"?xo(x):r;te&&ko(te[0])&&te[1]==(P|w|S|I)&&!te[4].length&&te[9]==1?U=U[Nu(te[0])].apply(U,te[3]):U=x.length==1&&ko(x)?U[K]():U.thru(x)}return function(){var ve=arguments,ge=ve[0];if(U&&ve.length==1&&st(ge))return U.plant(ge).value();for(var De=0,Be=v?s[De].apply(this,ve):ge;++De<v;)Be=s[De].call(this,Be);return Be}})}function Pu(i,s,v,A,F,x,U,K,te,ve){var ge=s&P,De=s&_,Be=s&b,Le=s&(w|O),Je=s&N,ct=Be?r:Ya(i);function Qe(){for(var dt=arguments.length,bt=ue(dt),en=dt;en--;)bt[en]=arguments[en];if(Le)var Lr=ua(Qe),tn=C1(bt,Lr);if(A&&(bt=Pc(bt,A,F,Le)),x&&(bt=xc(bt,x,U,Le)),dt-=tn,Le&&dt<ve){var lr=di(bt,Lr);return Vc(i,s,Pu,Qe.placeholder,v,bt,lr,K,te,ve-dt)}var Bn=De?v:this,ii=Be?Bn[i]:i;return dt=bt.length,K?bt=Tg(bt,K):Je&&dt>1&&bt.reverse(),ge&&te<dt&&(bt.length=te),this&&this!==Er&&this instanceof Qe&&(ii=ct||Ya(ii)),ii.apply(Bn,bt)}return Qe}function Lc(i,s){return function(v,A){return jv(v,i,s(A),{})}}function xu(i,s){return function(v,A){var F;if(v===r&&A===r)return s;if(v!==r&&(F=v),A!==r){if(F===r)return A;typeof v=="string"||typeof A=="string"?(v=Jr(v),A=Jr(A)):(v=wc(v),A=wc(A)),F=i(v,A)}return F}}function Bo(i){return ei(function(s){return s=Kt(s,Xr(He())),ht(function(v){var A=this;return i(s,function(F){return $r(F,A,v)})})})}function Tu(i,s){s=s===r?" ":Jr(s);var v=s.length;if(v<2)return v?yo(s,i):s;var A=yo(s,Du(i/Ji(s)));return Xi(s)?_i(Cn(A),0,i).join(""):A.slice(0,i)}function pg(i,s,v,A){var F=s&_,x=Ya(i);function U(){for(var K=-1,te=arguments.length,ve=-1,ge=A.length,De=ue(ge+te),Be=this&&this!==Er&&this instanceof U?x:i;++ve<ge;)De[ve]=A[ve];for(;te--;)De[ve++]=arguments[++K];return $r(Be,F?v:this,De)}return U}function Uc(i){return function(s,v,A){return A&&typeof A!="number"&&Rr(s,v,A)&&(v=A=r),s=ni(s),v===r?(v=s,s=0):v=ni(v),A=A===r?s<v?1:-1:ni(A),Qv(s,v,A,i)}}function Iu(i){return function(s,v){return typeof s=="string"&&typeof v=="string"||(s=vn(s),v=vn(v)),i(s,v)}}function Vc(i,s,v,A,F,x,U,K,te,ve){var ge=s&w,De=ge?U:r,Be=ge?r:U,Le=ge?x:r,Je=ge?r:x;s|=ge?S:B,s&=~(ge?B:S),s&C||(s&=~(_|b));var ct=[i,s,F,Le,De,Je,Be,K,te,ve],Qe=v.apply(r,ct);return ko(i)&&Jc(Qe,ct),Qe.placeholder=A,Qc(Qe,i,s)}function Oo(i){var s=pr[i];return function(v,A){if(v=vn(v),A=A==null?0:Pr(ft(A),292),A&&Qf(v)){var F=(Et(v)+"e").split("e"),x=s(F[0]+"e"+(+F[1]+A));return F=(Et(x)+"e").split("e"),+(F[0]+"e"+(+F[1]-A))}return s(v)}}var vg=ta&&1/lu(new ta([,-0]))[1]==re?function(i){return new ta(i)}:Xo;function jc(i){return function(s){var v=xr(s);return v==tt?io(s):v==Tt?x1(s):E1(s,i(s))}}function Qn(i,s,v,A,F,x,U,K){var te=s&b;if(!te&&typeof i!="function")throw new fn(l);var ve=A?A.length:0;if(ve||(s&=~(S|B),A=F=r),U=U===r?U:vr(ft(U),0),K=K===r?K:ft(K),ve-=F?F.length:0,s&B){var ge=A,De=F;A=F=r}var Be=te?r:xo(i),Le=[i,s,v,A,F,ge,De,x,U,K];if(Be&&Mg(Le,Be),i=Le[0],s=Le[1],v=Le[2],A=Le[3],F=Le[4],K=Le[9]=Le[9]===r?te?0:i.length:vr(Le[9]-ve,0),!K&&s&(w|O)&&(s&=~(w|O)),!s||s==_)var Je=hg(i,s,v);else s==w||s==O?Je=dg(i,s,K):(s==S||s==(_|S))&&!F.length?Je=pg(i,s,v,A):Je=Pu.apply(r,Le);var ct=Be?yc:Jc;return Qc(ct(Je,Le),i,s)}function qc(i,s,v,A){return i===r||Sn(i,ea[v])&&!Bt.call(A,v)?s:i}function zc(i,s,v,A,F,x){return Xt(i)&&Xt(s)&&(x.set(s,i),Su(i,s,r,zc,x),x.delete(s)),i}function gg(i){return Xa(i)?r:i}function Wc(i,s,v,A,F,x){var U=v&y,K=i.length,te=s.length;if(K!=te&&!(U&&te>K))return!1;var ve=x.get(i),ge=x.get(s);if(ve&&ge)return ve==s&&ge==i;var De=-1,Be=!0,Le=v&m?new Li:r;for(x.set(i,s),x.set(s,i);++De<K;){var Je=i[De],ct=s[De];if(A)var Qe=U?A(ct,Je,De,s,i,x):A(Je,ct,De,i,s,x);if(Qe!==r){if(Qe)continue;Be=!1;break}if(Le){if(!Js(s,function(dt,bt){if(!Ra(Le,bt)&&(Je===dt||F(Je,dt,v,A,x)))return Le.push(bt)})){Be=!1;break}}else if(!(Je===ct||F(Je,ct,v,A,x))){Be=!1;break}}return x.delete(i),x.delete(s),Be}function mg(i,s,v,A,F,x,U){switch(v){case he:if(i.byteLength!=s.byteLength||i.byteOffset!=s.byteOffset)return!1;i=i.buffer,s=s.buffer;case ne:return!(i.byteLength!=s.byteLength||!x(new vu(i),new vu(s)));case qe:case Te:case rt:return Sn(+i,+s);case lt:return i.name==s.name&&i.message==s.message;case yt:case Wt:return i==s+"";case tt:var K=io;case Tt:var te=A&y;if(K||(K=lu),i.size!=s.size&&!te)return!1;var ve=U.get(i);if(ve)return ve==s;A|=m,U.set(i,s);var ge=Wc(K(i),K(s),A,F,x,U);return U.delete(i),ge;case R:if(qa)return qa.call(i)==qa.call(s)}return!1}function _g(i,s,v,A,F,x){var U=v&y,K=Mo(i),te=K.length,ve=Mo(s),ge=ve.length;if(te!=ge&&!U)return!1;for(var De=te;De--;){var Be=K[De];if(!(U?Be in s:Bt.call(s,Be)))return!1}var Le=x.get(i),Je=x.get(s);if(Le&&Je)return Le==s&&Je==i;var ct=!0;x.set(i,s),x.set(s,i);for(var Qe=U;++De<te;){Be=K[De];var dt=i[Be],bt=s[Be];if(A)var en=U?A(bt,dt,Be,s,i,x):A(dt,bt,Be,i,s,x);if(!(en===r?dt===bt||F(dt,bt,v,A,x):en)){ct=!1;break}Qe||(Qe=Be=="constructor")}if(ct&&!Qe){var Lr=i.constructor,tn=s.constructor;Lr!=tn&&"constructor"in i&&"constructor"in s&&!(typeof Lr=="function"&&Lr instanceof Lr&&typeof tn=="function"&&tn instanceof tn)&&(ct=!1)}return x.delete(i),x.delete(s),ct}function ei(i){return Lo($c(i,r,ah),i+"")}function Mo(i){return fc(i,br,Io)}function Po(i){return fc(i,zr,Hc)}var xo=yu?function(i){return yu.get(i)}:Xo;function Nu(i){for(var s=i.name+"",v=ra[s],A=Bt.call(ra,s)?v.length:0;A--;){var F=v[A],x=F.func;if(x==null||x==i)return F.name}return s}function ua(i){var s=Bt.call(M,"placeholder")?M:i;return s.placeholder}function He(){var i=M.iteratee||Zo;return i=i===Zo?dc:i,arguments.length?i(arguments[0],arguments[1]):i}function ku(i,s){var v=i.__data__;return Fg(s)?v[typeof s=="string"?"string":"hash"]:v.map}function To(i){for(var s=br(i),v=s.length;v--;){var A=s[v],F=i[A];s[v]=[A,F,Yc(F)]}return s}function ji(i,s){var v=O1(i,s);return hc(v)?v:r}function Dg(i){var s=Bt.call(i,ki),v=i[ki];try{i[ki]=r;var A=!0}catch{}var F=du.call(i);return A&&(s?i[ki]=v:delete i[ki]),F}var Io=uo?function(i){return i==null?[]:(i=It(i),ci(uo(i),function(s){return Xf.call(i,s)}))}:Jo,Hc=uo?function(i){for(var s=[];i;)hi(s,Io(i)),i=gu(i);return s}:Jo,xr=kr;(so&&xr(new so(new ArrayBuffer(1)))!=he||Ua&&xr(new Ua)!=tt||oo&&xr(oo.resolve())!=Ae||ta&&xr(new ta)!=Tt||Va&&xr(new Va)!=$)&&(xr=function(i){var s=kr(i),v=s==We?i.constructor:r,A=v?qi(v):"";if(A)switch(A){case tv:return he;case rv:return tt;case nv:return Ae;case iv:return Tt;case av:return $}return s});function bg(i,s,v){for(var A=-1,F=v.length;++A<F;){var x=v[A],U=x.size;switch(x.type){case"drop":i+=U;break;case"dropRight":s-=U;break;case"take":s=Pr(s,i+U);break;case"takeRight":i=vr(i,s-U);break}}return{start:i,end:s}}function yg(i){var s=i.match(oi);return s?s[1].split(un):[]}function Gc(i,s,v){s=mi(s,i);for(var A=-1,F=s.length,x=!1;++A<F;){var U=jn(s[A]);if(!(x=i!=null&&v(i,U)))break;i=i[U]}return x||++A!=F?x:(F=i==null?0:i.length,!!F&&zu(F)&&ti(U,F)&&(st(i)||zi(i)))}function Ag(i){var s=i.length,v=new i.constructor(s);return s&&typeof i[0]=="string"&&Bt.call(i,"index")&&(v.index=i.index,v.input=i.input),v}function Kc(i){return typeof i.constructor=="function"&&!Za(i)?na(gu(i)):{}}function wg(i,s,v){var A=i.constructor;switch(s){case ne:return So(i);case qe:case Te:return new A(+i);case he:return ug(i,v);case ae:case ce:case ye:case Oe:case Xe:case we:case Vt:case St:case rr:return Oc(i,v);case tt:return new A;case rt:case Wt:return new A(i);case yt:return sg(i);case Tt:return new A;case R:return og(i)}}function Eg(i,s){var v=s.length;if(!v)return i;var A=v-1;return s[A]=(v>1?"& ":"")+s[A],s=s.join(v>2?", ":" "),i.replace(wa,`{
/* [wrapped with `+s+`] */
`)}function Cg(i){return st(i)||zi(i)||!!(Jf&&i&&i[Jf])}function ti(i,s){var v=typeof i;return s=s??ee,!!s&&(v=="number"||v!="symbol"&&Ma.test(i))&&i>-1&&i%1==0&&i<s}function Rr(i,s,v){if(!Xt(v))return!1;var A=typeof s;return(A=="number"?qr(v)&&ti(s,v.length):A=="string"&&s in v)?Sn(v[s],i):!1}function No(i,s){if(st(i))return!1;var v=typeof i;return v=="number"||v=="symbol"||v=="boolean"||i==null||Qr(i)?!0:kn.test(i)||!Nn.test(i)||s!=null&&i in It(s)}function Fg(i){var s=typeof i;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?i!=="__proto__":i===null}function ko(i){var s=Nu(i),v=M[s];if(typeof v!="function"||!(s in _t.prototype))return!1;if(i===v)return!0;var A=xo(v);return!!A&&i===A[0]}function Sg(i){return!!Yf&&Yf in i}var Bg=cu?ri:Qo;function Za(i){var s=i&&i.constructor,v=typeof s=="function"&&s.prototype||ea;return i===v}function Yc(i){return i===i&&!Xt(i)}function Zc(i,s){return function(v){return v==null?!1:v[i]===s&&(s!==r||i in It(v))}}function Og(i){var s=ju(i,function(A){return v.size===p&&v.clear(),A}),v=s.cache;return s}function Mg(i,s){var v=i[1],A=s[1],F=v|A,x=F<(_|b|P),U=A==P&&v==w||A==P&&v==I&&i[7].length<=s[8]||A==(P|I)&&s[7].length<=s[8]&&v==w;if(!(x||U))return i;A&_&&(i[2]=s[2],F|=v&_?0:C);var K=s[3];if(K){var te=i[3];i[3]=te?Pc(te,K,s[4]):K,i[4]=te?di(i[3],f):s[4]}return K=s[5],K&&(te=i[5],i[5]=te?xc(te,K,s[6]):K,i[6]=te?di(i[5],f):s[6]),K=s[7],K&&(i[7]=K),A&P&&(i[8]=i[8]==null?s[8]:Pr(i[8],s[8])),i[9]==null&&(i[9]=s[9]),i[0]=s[0],i[1]=F,i}function Pg(i){var s=[];if(i!=null)for(var v in It(i))s.push(v);return s}function xg(i){return du.call(i)}function $c(i,s,v){return s=vr(s===r?i.length-1:s,0),function(){for(var A=arguments,F=-1,x=vr(A.length-s,0),U=ue(x);++F<x;)U[F]=A[s+F];F=-1;for(var K=ue(s+1);++F<s;)K[F]=A[F];return K[s]=v(U),$r(i,this,K)}}function Xc(i,s){return s.length<2?i:Vi(i,dn(s,0,-1))}function Tg(i,s){for(var v=i.length,A=Pr(s.length,v),F=jr(i);A--;){var x=s[A];i[A]=ti(x,v)?F[x]:r}return i}function Ro(i,s){if(!(s==="constructor"&&typeof i[s]=="function")&&s!="__proto__")return i[s]}var Jc=eh(yc),$a=Y1||function(i,s){return Er.setTimeout(i,s)},Lo=eh(rg);function Qc(i,s,v){var A=s+"";return Lo(i,Eg(A,Ig(yg(A),v)))}function eh(i){var s=0,v=0;return function(){var A=J1(),F=Z-(A-v);if(v=A,F>0){if(++s>=q)return arguments[0]}else s=0;return i.apply(r,arguments)}}function Ru(i,s){var v=-1,A=i.length,F=A-1;for(s=s===r?A:s;++v<s;){var x=bo(v,F),U=i[x];i[x]=i[v],i[v]=U}return i.length=s,i}var th=Og(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(Gi,function(v,A,F,x){s.push(F?x.replace(Ea,"$1"):A||v)}),s});function jn(i){if(typeof i=="string"||Qr(i))return i;var s=i+"";return s=="0"&&1/i==-re?"-0":s}function qi(i){if(i!=null){try{return hu.call(i)}catch{}try{return i+""}catch{}}return""}function Ig(i,s){return ln(Ne,function(v){var A="_."+v[0];s&v[1]&&!su(i,A)&&i.push(A)}),i.sort()}function rh(i){if(i instanceof _t)return i.clone();var s=new cn(i.__wrapped__,i.__chain__);return s.__actions__=jr(i.__actions__),s.__index__=i.__index__,s.__values__=i.__values__,s}function Ng(i,s,v){(v?Rr(i,s,v):s===r)?s=1:s=vr(ft(s),0);var A=i==null?0:i.length;if(!A||s<1)return[];for(var F=0,x=0,U=ue(Du(A/s));F<A;)U[x++]=dn(i,F,F+=s);return U}function kg(i){for(var s=-1,v=i==null?0:i.length,A=0,F=[];++s<v;){var x=i[s];x&&(F[A++]=x)}return F}function Rg(){var i=arguments.length;if(!i)return[];for(var s=ue(i-1),v=arguments[0],A=i;A--;)s[A-1]=arguments[A];return hi(st(v)?jr(v):[v],Cr(s,1))}var Lg=ht(function(i,s){return or(i)?Wa(i,Cr(s,1,or,!0)):[]}),Ug=ht(function(i,s){var v=pn(s);return or(v)&&(v=r),or(i)?Wa(i,Cr(s,1,or,!0),He(v,2)):[]}),Vg=ht(function(i,s){var v=pn(s);return or(v)&&(v=r),or(i)?Wa(i,Cr(s,1,or,!0),r,v):[]});function jg(i,s,v){var A=i==null?0:i.length;return A?(s=v||s===r?1:ft(s),dn(i,s<0?0:s,A)):[]}function qg(i,s,v){var A=i==null?0:i.length;return A?(s=v||s===r?1:ft(s),s=A-s,dn(i,0,s<0?0:s)):[]}function zg(i,s){return i&&i.length?Ou(i,He(s,3),!0,!0):[]}function Wg(i,s){return i&&i.length?Ou(i,He(s,3),!0):[]}function Hg(i,s,v,A){var F=i==null?0:i.length;return F?(v&&typeof v!="number"&&Rr(i,s,v)&&(v=0,A=F),Rv(i,s,v,A)):[]}function nh(i,s,v){var A=i==null?0:i.length;if(!A)return-1;var F=v==null?0:ft(v);return F<0&&(F=vr(A+F,0)),ou(i,He(s,3),F)}function ih(i,s,v){var A=i==null?0:i.length;if(!A)return-1;var F=A-1;return v!==r&&(F=ft(v),F=v<0?vr(A+F,0):Pr(F,A-1)),ou(i,He(s,3),F,!0)}function ah(i){var s=i==null?0:i.length;return s?Cr(i,1):[]}function Gg(i){var s=i==null?0:i.length;return s?Cr(i,re):[]}function Kg(i,s){var v=i==null?0:i.length;return v?(s=s===r?1:ft(s),Cr(i,s)):[]}function Yg(i){for(var s=-1,v=i==null?0:i.length,A={};++s<v;){var F=i[s];A[F[0]]=F[1]}return A}function uh(i){return i&&i.length?i[0]:r}function Zg(i,s,v){var A=i==null?0:i.length;if(!A)return-1;var F=v==null?0:ft(v);return F<0&&(F=vr(A+F,0)),$i(i,s,F)}function $g(i){var s=i==null?0:i.length;return s?dn(i,0,-1):[]}var Xg=ht(function(i){var s=Kt(i,Co);return s.length&&s[0]===i[0]?vo(s):[]}),Jg=ht(function(i){var s=pn(i),v=Kt(i,Co);return s===pn(v)?s=r:v.pop(),v.length&&v[0]===i[0]?vo(v,He(s,2)):[]}),Qg=ht(function(i){var s=pn(i),v=Kt(i,Co);return s=typeof s=="function"?s:r,s&&v.pop(),v.length&&v[0]===i[0]?vo(v,r,s):[]});function em(i,s){return i==null?"":$1.call(i,s)}function pn(i){var s=i==null?0:i.length;return s?i[s-1]:r}function tm(i,s,v){var A=i==null?0:i.length;if(!A)return-1;var F=A;return v!==r&&(F=ft(v),F=F<0?vr(A+F,0):Pr(F,A-1)),s===s?I1(i,s,F):ou(i,Vf,F,!0)}function rm(i,s){return i&&i.length?mc(i,ft(s)):r}var nm=ht(sh);function sh(i,s){return i&&i.length&&s&&s.length?Do(i,s):i}function im(i,s,v){return i&&i.length&&s&&s.length?Do(i,s,He(v,2)):i}function am(i,s,v){return i&&i.length&&s&&s.length?Do(i,s,r,v):i}var um=ei(function(i,s){var v=i==null?0:i.length,A=fo(i,s);return bc(i,Kt(s,function(F){return ti(F,v)?+F:F}).sort(Mc)),A});function sm(i,s){var v=[];if(!(i&&i.length))return v;var A=-1,F=[],x=i.length;for(s=He(s,3);++A<x;){var U=i[A];s(U,A,i)&&(v.push(U),F.push(A))}return bc(i,F),v}function Uo(i){return i==null?i:ev.call(i)}function om(i,s,v){var A=i==null?0:i.length;return A?(v&&typeof v!="number"&&Rr(i,s,v)?(s=0,v=A):(s=s==null?0:ft(s),v=v===r?A:ft(v)),dn(i,s,v)):[]}function lm(i,s){return Bu(i,s)}function fm(i,s,v){return Ao(i,s,He(v,2))}function cm(i,s){var v=i==null?0:i.length;if(v){var A=Bu(i,s);if(A<v&&Sn(i[A],s))return A}return-1}function hm(i,s){return Bu(i,s,!0)}function dm(i,s,v){return Ao(i,s,He(v,2),!0)}function pm(i,s){var v=i==null?0:i.length;if(v){var A=Bu(i,s,!0)-1;if(Sn(i[A],s))return A}return-1}function vm(i){return i&&i.length?Ac(i):[]}function gm(i,s){return i&&i.length?Ac(i,He(s,2)):[]}function mm(i){var s=i==null?0:i.length;return s?dn(i,1,s):[]}function _m(i,s,v){return i&&i.length?(s=v||s===r?1:ft(s),dn(i,0,s<0?0:s)):[]}function Dm(i,s,v){var A=i==null?0:i.length;return A?(s=v||s===r?1:ft(s),s=A-s,dn(i,s<0?0:s,A)):[]}function bm(i,s){return i&&i.length?Ou(i,He(s,3),!1,!0):[]}function ym(i,s){return i&&i.length?Ou(i,He(s,3)):[]}var Am=ht(function(i){return gi(Cr(i,1,or,!0))}),wm=ht(function(i){var s=pn(i);return or(s)&&(s=r),gi(Cr(i,1,or,!0),He(s,2))}),Em=ht(function(i){var s=pn(i);return s=typeof s=="function"?s:r,gi(Cr(i,1,or,!0),r,s)});function Cm(i){return i&&i.length?gi(i):[]}function Fm(i,s){return i&&i.length?gi(i,He(s,2)):[]}function Sm(i,s){return s=typeof s=="function"?s:r,i&&i.length?gi(i,r,s):[]}function Vo(i){if(!(i&&i.length))return[];var s=0;return i=ci(i,function(v){if(or(v))return s=vr(v.length,s),!0}),ro(s,function(v){return Kt(i,Qs(v))})}function oh(i,s){if(!(i&&i.length))return[];var v=Vo(i);return s==null?v:Kt(v,function(A){return $r(s,r,A)})}var Bm=ht(function(i,s){return or(i)?Wa(i,s):[]}),Om=ht(function(i){return Eo(ci(i,or))}),Mm=ht(function(i){var s=pn(i);return or(s)&&(s=r),Eo(ci(i,or),He(s,2))}),Pm=ht(function(i){var s=pn(i);return s=typeof s=="function"?s:r,Eo(ci(i,or),r,s)}),xm=ht(Vo);function Tm(i,s){return Fc(i||[],s||[],za)}function Im(i,s){return Fc(i||[],s||[],Ka)}var Nm=ht(function(i){var s=i.length,v=s>1?i[s-1]:r;return v=typeof v=="function"?(i.pop(),v):r,oh(i,v)});function lh(i){var s=M(i);return s.__chain__=!0,s}function km(i,s){return s(i),i}function Lu(i,s){return s(i)}var Rm=ei(function(i){var s=i.length,v=s?i[0]:0,A=this.__wrapped__,F=function(x){return fo(x,i)};return s>1||this.__actions__.length||!(A instanceof _t)||!ti(v)?this.thru(F):(A=A.slice(v,+v+(s?1:0)),A.__actions__.push({func:Lu,args:[F],thisArg:r}),new cn(A,this.__chain__).thru(function(x){return s&&!x.length&&x.push(r),x}))});function Lm(){return lh(this)}function Um(){return new cn(this.value(),this.__chain__)}function Vm(){this.__values__===r&&(this.__values__=wh(this.value()));var i=this.__index__>=this.__values__.length,s=i?r:this.__values__[this.__index__++];return{done:i,value:s}}function jm(){return this}function qm(i){for(var s,v=this;v instanceof wu;){var A=rh(v);A.__index__=0,A.__values__=r,s?F.__wrapped__=A:s=A;var F=A;v=v.__wrapped__}return F.__wrapped__=i,s}function zm(){var i=this.__wrapped__;if(i instanceof _t){var s=i;return this.__actions__.length&&(s=new _t(this)),s=s.reverse(),s.__actions__.push({func:Lu,args:[Uo],thisArg:r}),new cn(s,this.__chain__)}return this.thru(Uo)}function Wm(){return Cc(this.__wrapped__,this.__actions__)}var Hm=Mu(function(i,s,v){Bt.call(i,v)?++i[v]:Jn(i,v,1)});function Gm(i,s,v){var A=st(i)?Lf:kv;return v&&Rr(i,s,v)&&(s=r),A(i,He(s,3))}function Km(i,s){var v=st(i)?ci:oc;return v(i,He(s,3))}var Ym=kc(nh),Zm=kc(ih);function $m(i,s){return Cr(Uu(i,s),1)}function Xm(i,s){return Cr(Uu(i,s),re)}function Jm(i,s,v){return v=v===r?1:ft(v),Cr(Uu(i,s),v)}function fh(i,s){var v=st(i)?ln:vi;return v(i,He(s,3))}function ch(i,s){var v=st(i)?m1:sc;return v(i,He(s,3))}var Qm=Mu(function(i,s,v){Bt.call(i,v)?i[v].push(s):Jn(i,v,[s])});function e_(i,s,v,A){i=qr(i)?i:oa(i),v=v&&!A?ft(v):0;var F=i.length;return v<0&&(v=vr(F+v,0)),Wu(i)?v<=F&&i.indexOf(s,v)>-1:!!F&&$i(i,s,v)>-1}var t_=ht(function(i,s,v){var A=-1,F=typeof s=="function",x=qr(i)?ue(i.length):[];return vi(i,function(U){x[++A]=F?$r(s,U,v):Ha(U,s,v)}),x}),r_=Mu(function(i,s,v){Jn(i,v,s)});function Uu(i,s){var v=st(i)?Kt:pc;return v(i,He(s,3))}function n_(i,s,v,A){return i==null?[]:(st(s)||(s=s==null?[]:[s]),v=A?r:v,st(v)||(v=v==null?[]:[v]),_c(i,s,v))}var i_=Mu(function(i,s,v){i[v?0:1].push(s)},function(){return[[],[]]});function a_(i,s,v){var A=st(i)?Xs:qf,F=arguments.length<3;return A(i,He(s,4),v,F,vi)}function u_(i,s,v){var A=st(i)?_1:qf,F=arguments.length<3;return A(i,He(s,4),v,F,sc)}function s_(i,s){var v=st(i)?ci:oc;return v(i,qu(He(s,3)))}function o_(i){var s=st(i)?nc:eg;return s(i)}function l_(i,s,v){(v?Rr(i,s,v):s===r)?s=1:s=ft(s);var A=st(i)?Pv:tg;return A(i,s)}function f_(i){var s=st(i)?xv:ng;return s(i)}function c_(i){if(i==null)return 0;if(qr(i))return Wu(i)?Ji(i):i.length;var s=xr(i);return s==tt||s==Tt?i.size:mo(i).length}function h_(i,s,v){var A=st(i)?Js:ig;return v&&Rr(i,s,v)&&(s=r),A(i,He(s,3))}var d_=ht(function(i,s){if(i==null)return[];var v=s.length;return v>1&&Rr(i,s[0],s[1])?s=[]:v>2&&Rr(s[0],s[1],s[2])&&(s=[s[0]]),_c(i,Cr(s,1),[])}),Vu=K1||function(){return Er.Date.now()};function p_(i,s){if(typeof s!="function")throw new fn(l);return i=ft(i),function(){if(--i<1)return s.apply(this,arguments)}}function hh(i,s,v){return s=v?r:s,s=i&&s==null?i.length:s,Qn(i,P,r,r,r,r,s)}function dh(i,s){var v;if(typeof s!="function")throw new fn(l);return i=ft(i),function(){return--i>0&&(v=s.apply(this,arguments)),i<=1&&(s=r),v}}var jo=ht(function(i,s,v){var A=_;if(v.length){var F=di(v,ua(jo));A|=S}return Qn(i,A,s,v,F)}),ph=ht(function(i,s,v){var A=_|b;if(v.length){var F=di(v,ua(ph));A|=S}return Qn(s,A,i,v,F)});function vh(i,s,v){s=v?r:s;var A=Qn(i,w,r,r,r,r,r,s);return A.placeholder=vh.placeholder,A}function gh(i,s,v){s=v?r:s;var A=Qn(i,O,r,r,r,r,r,s);return A.placeholder=gh.placeholder,A}function mh(i,s,v){var A,F,x,U,K,te,ve=0,ge=!1,De=!1,Be=!0;if(typeof i!="function")throw new fn(l);s=vn(s)||0,Xt(v)&&(ge=!!v.leading,De="maxWait"in v,x=De?vr(vn(v.maxWait)||0,s):x,Be="trailing"in v?!!v.trailing:Be);function Le(lr){var Bn=A,ii=F;return A=F=r,ve=lr,U=i.apply(ii,Bn),U}function Je(lr){return ve=lr,K=$a(dt,s),ge?Le(lr):U}function ct(lr){var Bn=lr-te,ii=lr-ve,kh=s-Bn;return De?Pr(kh,x-ii):kh}function Qe(lr){var Bn=lr-te,ii=lr-ve;return te===r||Bn>=s||Bn<0||De&&ii>=x}function dt(){var lr=Vu();if(Qe(lr))return bt(lr);K=$a(dt,ct(lr))}function bt(lr){return K=r,Be&&A?Le(lr):(A=F=r,U)}function en(){K!==r&&Sc(K),ve=0,A=te=F=K=r}function Lr(){return K===r?U:bt(Vu())}function tn(){var lr=Vu(),Bn=Qe(lr);if(A=arguments,F=this,te=lr,Bn){if(K===r)return Je(te);if(De)return Sc(K),K=$a(dt,s),Le(te)}return K===r&&(K=$a(dt,s)),U}return tn.cancel=en,tn.flush=Lr,tn}var v_=ht(function(i,s){return uc(i,1,s)}),g_=ht(function(i,s,v){return uc(i,vn(s)||0,v)});function m_(i){return Qn(i,N)}function ju(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new fn(l);var v=function(){var A=arguments,F=s?s.apply(this,A):A[0],x=v.cache;if(x.has(F))return x.get(F);var U=i.apply(this,A);return v.cache=x.set(F,U)||x,U};return v.cache=new(ju.Cache||Xn),v}ju.Cache=Xn;function qu(i){if(typeof i!="function")throw new fn(l);return function(){var s=arguments;switch(s.length){case 0:return!i.call(this);case 1:return!i.call(this,s[0]);case 2:return!i.call(this,s[0],s[1]);case 3:return!i.call(this,s[0],s[1],s[2])}return!i.apply(this,s)}}function __(i){return dh(2,i)}var D_=ag(function(i,s){s=s.length==1&&st(s[0])?Kt(s[0],Xr(He())):Kt(Cr(s,1),Xr(He()));var v=s.length;return ht(function(A){for(var F=-1,x=Pr(A.length,v);++F<x;)A[F]=s[F].call(this,A[F]);return $r(i,this,A)})}),qo=ht(function(i,s){var v=di(s,ua(qo));return Qn(i,S,r,s,v)}),_h=ht(function(i,s){var v=di(s,ua(_h));return Qn(i,B,r,s,v)}),b_=ei(function(i,s){return Qn(i,I,r,r,r,s)});function y_(i,s){if(typeof i!="function")throw new fn(l);return s=s===r?s:ft(s),ht(i,s)}function A_(i,s){if(typeof i!="function")throw new fn(l);return s=s==null?0:vr(ft(s),0),ht(function(v){var A=v[s],F=_i(v,0,s);return A&&hi(F,A),$r(i,this,F)})}function w_(i,s,v){var A=!0,F=!0;if(typeof i!="function")throw new fn(l);return Xt(v)&&(A="leading"in v?!!v.leading:A,F="trailing"in v?!!v.trailing:F),mh(i,s,{leading:A,maxWait:s,trailing:F})}function E_(i){return hh(i,1)}function C_(i,s){return qo(Fo(s),i)}function F_(){if(!arguments.length)return[];var i=arguments[0];return st(i)?i:[i]}function S_(i){return hn(i,g)}function B_(i,s){return s=typeof s=="function"?s:r,hn(i,g,s)}function O_(i){return hn(i,d|g)}function M_(i,s){return s=typeof s=="function"?s:r,hn(i,d|g,s)}function P_(i,s){return s==null||ac(i,s,br(s))}function Sn(i,s){return i===s||i!==i&&s!==s}var x_=Iu(po),T_=Iu(function(i,s){return i>=s}),zi=cc(function(){return arguments}())?cc:function(i){return ir(i)&&Bt.call(i,"callee")&&!Xf.call(i,"callee")},st=ue.isArray,I_=xf?Xr(xf):qv;function qr(i){return i!=null&&zu(i.length)&&!ri(i)}function or(i){return ir(i)&&qr(i)}function N_(i){return i===!0||i===!1||ir(i)&&kr(i)==qe}var Di=Z1||Qo,k_=Tf?Xr(Tf):zv;function R_(i){return ir(i)&&i.nodeType===1&&!Xa(i)}function L_(i){if(i==null)return!0;if(qr(i)&&(st(i)||typeof i=="string"||typeof i.splice=="function"||Di(i)||sa(i)||zi(i)))return!i.length;var s=xr(i);if(s==tt||s==Tt)return!i.size;if(Za(i))return!mo(i).length;for(var v in i)if(Bt.call(i,v))return!1;return!0}function U_(i,s){return Ga(i,s)}function V_(i,s,v){v=typeof v=="function"?v:r;var A=v?v(i,s):r;return A===r?Ga(i,s,r,v):!!A}function zo(i){if(!ir(i))return!1;var s=kr(i);return s==lt||s==Re||typeof i.message=="string"&&typeof i.name=="string"&&!Xa(i)}function j_(i){return typeof i=="number"&&Qf(i)}function ri(i){if(!Xt(i))return!1;var s=kr(i);return s==et||s==at||s==it||s==Se}function Dh(i){return typeof i=="number"&&i==ft(i)}function zu(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=ee}function Xt(i){var s=typeof i;return i!=null&&(s=="object"||s=="function")}function ir(i){return i!=null&&typeof i=="object"}var bh=If?Xr(If):Hv;function q_(i,s){return i===s||go(i,s,To(s))}function z_(i,s,v){return v=typeof v=="function"?v:r,go(i,s,To(s),v)}function W_(i){return yh(i)&&i!=+i}function H_(i){if(Bg(i))throw new ut(u);return hc(i)}function G_(i){return i===null}function K_(i){return i==null}function yh(i){return typeof i=="number"||ir(i)&&kr(i)==rt}function Xa(i){if(!ir(i)||kr(i)!=We)return!1;var s=gu(i);if(s===null)return!0;var v=Bt.call(s,"constructor")&&s.constructor;return typeof v=="function"&&v instanceof v&&hu.call(v)==z1}var Wo=Nf?Xr(Nf):Gv;function Y_(i){return Dh(i)&&i>=-ee&&i<=ee}var Ah=kf?Xr(kf):Kv;function Wu(i){return typeof i=="string"||!st(i)&&ir(i)&&kr(i)==Wt}function Qr(i){return typeof i=="symbol"||ir(i)&&kr(i)==R}var sa=Rf?Xr(Rf):Yv;function Z_(i){return i===r}function $_(i){return ir(i)&&xr(i)==$}function X_(i){return ir(i)&&kr(i)==fe}var J_=Iu(_o),Q_=Iu(function(i,s){return i<=s});function wh(i){if(!i)return[];if(qr(i))return Wu(i)?Cn(i):jr(i);if(La&&i[La])return P1(i[La]());var s=xr(i),v=s==tt?io:s==Tt?lu:oa;return v(i)}function ni(i){if(!i)return i===0?i:0;if(i=vn(i),i===re||i===-re){var s=i<0?-1:1;return s*Q}return i===i?i:0}function ft(i){var s=ni(i),v=s%1;return s===s?v?s-v:s:0}function Eh(i){return i?Ui(ft(i),0,me):0}function vn(i){if(typeof i=="number")return i;if(Qr(i))return le;if(Xt(i)){var s=typeof i.valueOf=="function"?i.valueOf():i;i=Xt(s)?s+"":s}if(typeof i!="string")return i===0?i:+i;i=zf(i);var v=Sa.test(i);return v||Oa.test(i)?p1(i.slice(2),v?2:8):Fa.test(i)?le:+i}function Ch(i){return Vn(i,zr(i))}function eD(i){return i?Ui(ft(i),-ee,ee):i===0?i:0}function Et(i){return i==null?"":Jr(i)}var tD=ia(function(i,s){if(Za(s)||qr(s)){Vn(s,br(s),i);return}for(var v in s)Bt.call(s,v)&&za(i,v,s[v])}),Fh=ia(function(i,s){Vn(s,zr(s),i)}),Hu=ia(function(i,s,v,A){Vn(s,zr(s),i,A)}),rD=ia(function(i,s,v,A){Vn(s,br(s),i,A)}),nD=ei(fo);function iD(i,s){var v=na(i);return s==null?v:ic(v,s)}var aD=ht(function(i,s){i=It(i);var v=-1,A=s.length,F=A>2?s[2]:r;for(F&&Rr(s[0],s[1],F)&&(A=1);++v<A;)for(var x=s[v],U=zr(x),K=-1,te=U.length;++K<te;){var ve=U[K],ge=i[ve];(ge===r||Sn(ge,ea[ve])&&!Bt.call(i,ve))&&(i[ve]=x[ve])}return i}),uD=ht(function(i){return i.push(r,zc),$r(Sh,r,i)});function sD(i,s){return Uf(i,He(s,3),Un)}function oD(i,s){return Uf(i,He(s,3),ho)}function lD(i,s){return i==null?i:co(i,He(s,3),zr)}function fD(i,s){return i==null?i:lc(i,He(s,3),zr)}function cD(i,s){return i&&Un(i,He(s,3))}function hD(i,s){return i&&ho(i,He(s,3))}function dD(i){return i==null?[]:Fu(i,br(i))}function pD(i){return i==null?[]:Fu(i,zr(i))}function Ho(i,s,v){var A=i==null?r:Vi(i,s);return A===r?v:A}function vD(i,s){return i!=null&&Gc(i,s,Lv)}function Go(i,s){return i!=null&&Gc(i,s,Uv)}var gD=Lc(function(i,s,v){s!=null&&typeof s.toString!="function"&&(s=du.call(s)),i[s]=v},Yo(Wr)),mD=Lc(function(i,s,v){s!=null&&typeof s.toString!="function"&&(s=du.call(s)),Bt.call(i,s)?i[s].push(v):i[s]=[v]},He),_D=ht(Ha);function br(i){return qr(i)?rc(i):mo(i)}function zr(i){return qr(i)?rc(i,!0):Zv(i)}function DD(i,s){var v={};return s=He(s,3),Un(i,function(A,F,x){Jn(v,s(A,F,x),A)}),v}function bD(i,s){var v={};return s=He(s,3),Un(i,function(A,F,x){Jn(v,F,s(A,F,x))}),v}var yD=ia(function(i,s,v){Su(i,s,v)}),Sh=ia(function(i,s,v,A){Su(i,s,v,A)}),AD=ei(function(i,s){var v={};if(i==null)return v;var A=!1;s=Kt(s,function(x){return x=mi(x,i),A||(A=x.length>1),x}),Vn(i,Po(i),v),A&&(v=hn(v,d|c|g,gg));for(var F=s.length;F--;)wo(v,s[F]);return v});function wD(i,s){return Bh(i,qu(He(s)))}var ED=ei(function(i,s){return i==null?{}:Xv(i,s)});function Bh(i,s){if(i==null)return{};var v=Kt(Po(i),function(A){return[A]});return s=He(s),Dc(i,v,function(A,F){return s(A,F[0])})}function CD(i,s,v){s=mi(s,i);var A=-1,F=s.length;for(F||(F=1,i=r);++A<F;){var x=i==null?r:i[jn(s[A])];x===r&&(A=F,x=v),i=ri(x)?x.call(i):x}return i}function FD(i,s,v){return i==null?i:Ka(i,s,v)}function SD(i,s,v,A){return A=typeof A=="function"?A:r,i==null?i:Ka(i,s,v,A)}var Oh=jc(br),Mh=jc(zr);function BD(i,s,v){var A=st(i),F=A||Di(i)||sa(i);if(s=He(s,4),v==null){var x=i&&i.constructor;F?v=A?new x:[]:Xt(i)?v=ri(x)?na(gu(i)):{}:v={}}return(F?ln:Un)(i,function(U,K,te){return s(v,U,K,te)}),v}function OD(i,s){return i==null?!0:wo(i,s)}function MD(i,s,v){return i==null?i:Ec(i,s,Fo(v))}function PD(i,s,v,A){return A=typeof A=="function"?A:r,i==null?i:Ec(i,s,Fo(v),A)}function oa(i){return i==null?[]:no(i,br(i))}function xD(i){return i==null?[]:no(i,zr(i))}function TD(i,s,v){return v===r&&(v=s,s=r),v!==r&&(v=vn(v),v=v===v?v:0),s!==r&&(s=vn(s),s=s===s?s:0),Ui(vn(i),s,v)}function ID(i,s,v){return s=ni(s),v===r?(v=s,s=0):v=ni(v),i=vn(i),Vv(i,s,v)}function ND(i,s,v){if(v&&typeof v!="boolean"&&Rr(i,s,v)&&(s=v=r),v===r&&(typeof s=="boolean"?(v=s,s=r):typeof i=="boolean"&&(v=i,i=r)),i===r&&s===r?(i=0,s=1):(i=ni(i),s===r?(s=i,i=0):s=ni(s)),i>s){var A=i;i=s,s=A}if(v||i%1||s%1){var F=ec();return Pr(i+F*(s-i+d1("1e-"+((F+"").length-1))),s)}return bo(i,s)}var kD=aa(function(i,s,v){return s=s.toLowerCase(),i+(v?Ph(s):s)});function Ph(i){return Ko(Et(i).toLowerCase())}function xh(i){return i=Et(i),i&&i.replace(Pa,F1).replace(n1,"")}function RD(i,s,v){i=Et(i),s=Jr(s);var A=i.length;v=v===r?A:Ui(ft(v),0,A);var F=v;return v-=s.length,v>=0&&i.slice(v,F)==s}function LD(i){return i=Et(i),i&&an.test(i)?i.replace(fr,S1):i}function UD(i){return i=Et(i),i&&Aa.test(i)?i.replace(Pi,"\\$&"):i}var VD=aa(function(i,s,v){return i+(v?"-":"")+s.toLowerCase()}),jD=aa(function(i,s,v){return i+(v?" ":"")+s.toLowerCase()}),qD=Nc("toLowerCase");function zD(i,s,v){i=Et(i),s=ft(s);var A=s?Ji(i):0;if(!s||A>=s)return i;var F=(s-A)/2;return Tu(bu(F),v)+i+Tu(Du(F),v)}function WD(i,s,v){i=Et(i),s=ft(s);var A=s?Ji(i):0;return s&&A<s?i+Tu(s-A,v):i}function HD(i,s,v){i=Et(i),s=ft(s);var A=s?Ji(i):0;return s&&A<s?Tu(s-A,v)+i:i}function GD(i,s,v){return v||s==null?s=0:s&&(s=+s),Q1(Et(i).replace(wr,""),s||0)}function KD(i,s,v){return(v?Rr(i,s,v):s===r)?s=1:s=ft(s),yo(Et(i),s)}function YD(){var i=arguments,s=Et(i[0]);return i.length<3?s:s.replace(i[1],i[2])}var ZD=aa(function(i,s,v){return i+(v?"_":"")+s.toLowerCase()});function $D(i,s,v){return v&&typeof v!="number"&&Rr(i,s,v)&&(s=v=r),v=v===r?me:v>>>0,v?(i=Et(i),i&&(typeof s=="string"||s!=null&&!Wo(s))&&(s=Jr(s),!s&&Xi(i))?_i(Cn(i),0,v):i.split(s,v)):[]}var XD=aa(function(i,s,v){return i+(v?" ":"")+Ko(s)});function JD(i,s,v){return i=Et(i),v=v==null?0:Ui(ft(v),0,i.length),s=Jr(s),i.slice(v,v+s.length)==s}function QD(i,s,v){var A=M.templateSettings;v&&Rr(i,s,v)&&(s=r),i=Et(i),s=Hu({},s,A,qc);var F=Hu({},s.imports,A.imports,qc),x=br(F),U=no(F,x),K,te,ve=0,ge=s.interpolate||li,De="__p += '",Be=ao((s.escape||li).source+"|"+ge.source+"|"+(ge===Kn?Ca:li).source+"|"+(s.evaluate||li).source+"|$","g"),Le="//# sourceURL="+(Bt.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++o1+"]")+`
`;i.replace(Be,function(Qe,dt,bt,en,Lr,tn){return bt||(bt=en),De+=i.slice(ve,tn).replace(xa,B1),dt&&(K=!0,De+=`' +
__e(`+dt+`) +
'`),Lr&&(te=!0,De+=`';
`+Lr+`;
__p += '`),bt&&(De+=`' +
((__t = (`+bt+`)) == null ? '' : __t) +
'`),ve=tn+Qe.length,Qe}),De+=`';
`;var Je=Bt.call(s,"variable")&&s.variable;if(!Je)De=`with (obj) {
`+De+`
}
`;else if(xi.test(Je))throw new ut(o);De=(te?De.replace(Zt,""):De).replace(mr,"$1").replace($t,"$1;"),De="function("+(Je||"obj")+`) {
`+(Je?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(K?", __e = _.escape":"")+(te?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+De+`return __p
}`;var ct=Ih(function(){return wt(x,Le+"return "+De).apply(r,U)});if(ct.source=De,zo(ct))throw ct;return ct}function eb(i){return Et(i).toLowerCase()}function tb(i){return Et(i).toUpperCase()}function rb(i,s,v){if(i=Et(i),i&&(v||s===r))return zf(i);if(!i||!(s=Jr(s)))return i;var A=Cn(i),F=Cn(s),x=Wf(A,F),U=Hf(A,F)+1;return _i(A,x,U).join("")}function nb(i,s,v){if(i=Et(i),i&&(v||s===r))return i.slice(0,Kf(i)+1);if(!i||!(s=Jr(s)))return i;var A=Cn(i),F=Hf(A,Cn(s))+1;return _i(A,0,F).join("")}function ib(i,s,v){if(i=Et(i),i&&(v||s===r))return i.replace(wr,"");if(!i||!(s=Jr(s)))return i;var A=Cn(i),F=Wf(A,Cn(s));return _i(A,F).join("")}function ab(i,s){var v=G,A=L;if(Xt(s)){var F="separator"in s?s.separator:F;v="length"in s?ft(s.length):v,A="omission"in s?Jr(s.omission):A}i=Et(i);var x=i.length;if(Xi(i)){var U=Cn(i);x=U.length}if(v>=x)return i;var K=v-Ji(A);if(K<1)return A;var te=U?_i(U,0,K).join(""):i.slice(0,K);if(F===r)return te+A;if(U&&(K+=te.length-K),Wo(F)){if(i.slice(K).search(F)){var ve,ge=te;for(F.global||(F=ao(F.source,Et(Ki.exec(F))+"g")),F.lastIndex=0;ve=F.exec(ge);)var De=ve.index;te=te.slice(0,De===r?K:De)}}else if(i.indexOf(Jr(F),K)!=K){var Be=te.lastIndexOf(F);Be>-1&&(te=te.slice(0,Be))}return te+A}function ub(i){return i=Et(i),i&&cr.test(i)?i.replace(_r,N1):i}var sb=aa(function(i,s,v){return i+(v?" ":"")+s.toUpperCase()}),Ko=Nc("toUpperCase");function Th(i,s,v){return i=Et(i),s=v?r:s,s===r?M1(i)?L1(i):y1(i):i.match(s)||[]}var Ih=ht(function(i,s){try{return $r(i,r,s)}catch(v){return zo(v)?v:new ut(v)}}),ob=ei(function(i,s){return ln(s,function(v){v=jn(v),Jn(i,v,jo(i[v],i))}),i});function lb(i){var s=i==null?0:i.length,v=He();return i=s?Kt(i,function(A){if(typeof A[1]!="function")throw new fn(l);return[v(A[0]),A[1]]}):[],ht(function(A){for(var F=-1;++F<s;){var x=i[F];if($r(x[0],this,A))return $r(x[1],this,A)}})}function fb(i){return Nv(hn(i,d))}function Yo(i){return function(){return i}}function cb(i,s){return i==null||i!==i?s:i}var hb=Rc(),db=Rc(!0);function Wr(i){return i}function Zo(i){return dc(typeof i=="function"?i:hn(i,d))}function pb(i){return vc(hn(i,d))}function vb(i,s){return gc(i,hn(s,d))}var gb=ht(function(i,s){return function(v){return Ha(v,i,s)}}),mb=ht(function(i,s){return function(v){return Ha(i,v,s)}});function $o(i,s,v){var A=br(s),F=Fu(s,A);v==null&&!(Xt(s)&&(F.length||!A.length))&&(v=s,s=i,i=this,F=Fu(s,br(s)));var x=!(Xt(v)&&"chain"in v)||!!v.chain,U=ri(i);return ln(F,function(K){var te=s[K];i[K]=te,U&&(i.prototype[K]=function(){var ve=this.__chain__;if(x||ve){var ge=i(this.__wrapped__),De=ge.__actions__=jr(this.__actions__);return De.push({func:te,args:arguments,thisArg:i}),ge.__chain__=ve,ge}return te.apply(i,hi([this.value()],arguments))})}),i}function _b(){return Er._===this&&(Er._=W1),this}function Xo(){}function Db(i){return i=ft(i),ht(function(s){return mc(s,i)})}var bb=Bo(Kt),yb=Bo(Lf),Ab=Bo(Js);function Nh(i){return No(i)?Qs(jn(i)):Jv(i)}function wb(i){return function(s){return i==null?r:Vi(i,s)}}var Eb=Uc(),Cb=Uc(!0);function Jo(){return[]}function Qo(){return!1}function Fb(){return{}}function Sb(){return""}function Bb(){return!0}function Ob(i,s){if(i=ft(i),i<1||i>ee)return[];var v=me,A=Pr(i,me);s=He(s),i-=me;for(var F=ro(A,s);++v<i;)s(v);return F}function Mb(i){return st(i)?Kt(i,jn):Qr(i)?[i]:jr(th(Et(i)))}function Pb(i){var s=++q1;return Et(i)+s}var xb=xu(function(i,s){return i+s},0),Tb=Oo("ceil"),Ib=xu(function(i,s){return i/s},1),Nb=Oo("floor");function kb(i){return i&&i.length?Cu(i,Wr,po):r}function Rb(i,s){return i&&i.length?Cu(i,He(s,2),po):r}function Lb(i){return jf(i,Wr)}function Ub(i,s){return jf(i,He(s,2))}function Vb(i){return i&&i.length?Cu(i,Wr,_o):r}function jb(i,s){return i&&i.length?Cu(i,He(s,2),_o):r}var qb=xu(function(i,s){return i*s},1),zb=Oo("round"),Wb=xu(function(i,s){return i-s},0);function Hb(i){return i&&i.length?to(i,Wr):0}function Gb(i,s){return i&&i.length?to(i,He(s,2)):0}return M.after=p_,M.ary=hh,M.assign=tD,M.assignIn=Fh,M.assignInWith=Hu,M.assignWith=rD,M.at=nD,M.before=dh,M.bind=jo,M.bindAll=ob,M.bindKey=ph,M.castArray=F_,M.chain=lh,M.chunk=Ng,M.compact=kg,M.concat=Rg,M.cond=lb,M.conforms=fb,M.constant=Yo,M.countBy=Hm,M.create=iD,M.curry=vh,M.curryRight=gh,M.debounce=mh,M.defaults=aD,M.defaultsDeep=uD,M.defer=v_,M.delay=g_,M.difference=Lg,M.differenceBy=Ug,M.differenceWith=Vg,M.drop=jg,M.dropRight=qg,M.dropRightWhile=zg,M.dropWhile=Wg,M.fill=Hg,M.filter=Km,M.flatMap=$m,M.flatMapDeep=Xm,M.flatMapDepth=Jm,M.flatten=ah,M.flattenDeep=Gg,M.flattenDepth=Kg,M.flip=m_,M.flow=hb,M.flowRight=db,M.fromPairs=Yg,M.functions=dD,M.functionsIn=pD,M.groupBy=Qm,M.initial=$g,M.intersection=Xg,M.intersectionBy=Jg,M.intersectionWith=Qg,M.invert=gD,M.invertBy=mD,M.invokeMap=t_,M.iteratee=Zo,M.keyBy=r_,M.keys=br,M.keysIn=zr,M.map=Uu,M.mapKeys=DD,M.mapValues=bD,M.matches=pb,M.matchesProperty=vb,M.memoize=ju,M.merge=yD,M.mergeWith=Sh,M.method=gb,M.methodOf=mb,M.mixin=$o,M.negate=qu,M.nthArg=Db,M.omit=AD,M.omitBy=wD,M.once=__,M.orderBy=n_,M.over=bb,M.overArgs=D_,M.overEvery=yb,M.overSome=Ab,M.partial=qo,M.partialRight=_h,M.partition=i_,M.pick=ED,M.pickBy=Bh,M.property=Nh,M.propertyOf=wb,M.pull=nm,M.pullAll=sh,M.pullAllBy=im,M.pullAllWith=am,M.pullAt=um,M.range=Eb,M.rangeRight=Cb,M.rearg=b_,M.reject=s_,M.remove=sm,M.rest=y_,M.reverse=Uo,M.sampleSize=l_,M.set=FD,M.setWith=SD,M.shuffle=f_,M.slice=om,M.sortBy=d_,M.sortedUniq=vm,M.sortedUniqBy=gm,M.split=$D,M.spread=A_,M.tail=mm,M.take=_m,M.takeRight=Dm,M.takeRightWhile=bm,M.takeWhile=ym,M.tap=km,M.throttle=w_,M.thru=Lu,M.toArray=wh,M.toPairs=Oh,M.toPairsIn=Mh,M.toPath=Mb,M.toPlainObject=Ch,M.transform=BD,M.unary=E_,M.union=Am,M.unionBy=wm,M.unionWith=Em,M.uniq=Cm,M.uniqBy=Fm,M.uniqWith=Sm,M.unset=OD,M.unzip=Vo,M.unzipWith=oh,M.update=MD,M.updateWith=PD,M.values=oa,M.valuesIn=xD,M.without=Bm,M.words=Th,M.wrap=C_,M.xor=Om,M.xorBy=Mm,M.xorWith=Pm,M.zip=xm,M.zipObject=Tm,M.zipObjectDeep=Im,M.zipWith=Nm,M.entries=Oh,M.entriesIn=Mh,M.extend=Fh,M.extendWith=Hu,$o(M,M),M.add=xb,M.attempt=Ih,M.camelCase=kD,M.capitalize=Ph,M.ceil=Tb,M.clamp=TD,M.clone=S_,M.cloneDeep=O_,M.cloneDeepWith=M_,M.cloneWith=B_,M.conformsTo=P_,M.deburr=xh,M.defaultTo=cb,M.divide=Ib,M.endsWith=RD,M.eq=Sn,M.escape=LD,M.escapeRegExp=UD,M.every=Gm,M.find=Ym,M.findIndex=nh,M.findKey=sD,M.findLast=Zm,M.findLastIndex=ih,M.findLastKey=oD,M.floor=Nb,M.forEach=fh,M.forEachRight=ch,M.forIn=lD,M.forInRight=fD,M.forOwn=cD,M.forOwnRight=hD,M.get=Ho,M.gt=x_,M.gte=T_,M.has=vD,M.hasIn=Go,M.head=uh,M.identity=Wr,M.includes=e_,M.indexOf=Zg,M.inRange=ID,M.invoke=_D,M.isArguments=zi,M.isArray=st,M.isArrayBuffer=I_,M.isArrayLike=qr,M.isArrayLikeObject=or,M.isBoolean=N_,M.isBuffer=Di,M.isDate=k_,M.isElement=R_,M.isEmpty=L_,M.isEqual=U_,M.isEqualWith=V_,M.isError=zo,M.isFinite=j_,M.isFunction=ri,M.isInteger=Dh,M.isLength=zu,M.isMap=bh,M.isMatch=q_,M.isMatchWith=z_,M.isNaN=W_,M.isNative=H_,M.isNil=K_,M.isNull=G_,M.isNumber=yh,M.isObject=Xt,M.isObjectLike=ir,M.isPlainObject=Xa,M.isRegExp=Wo,M.isSafeInteger=Y_,M.isSet=Ah,M.isString=Wu,M.isSymbol=Qr,M.isTypedArray=sa,M.isUndefined=Z_,M.isWeakMap=$_,M.isWeakSet=X_,M.join=em,M.kebabCase=VD,M.last=pn,M.lastIndexOf=tm,M.lowerCase=jD,M.lowerFirst=qD,M.lt=J_,M.lte=Q_,M.max=kb,M.maxBy=Rb,M.mean=Lb,M.meanBy=Ub,M.min=Vb,M.minBy=jb,M.stubArray=Jo,M.stubFalse=Qo,M.stubObject=Fb,M.stubString=Sb,M.stubTrue=Bb,M.multiply=qb,M.nth=rm,M.noConflict=_b,M.noop=Xo,M.now=Vu,M.pad=zD,M.padEnd=WD,M.padStart=HD,M.parseInt=GD,M.random=ND,M.reduce=a_,M.reduceRight=u_,M.repeat=KD,M.replace=YD,M.result=CD,M.round=zb,M.runInContext=J,M.sample=o_,M.size=c_,M.snakeCase=ZD,M.some=h_,M.sortedIndex=lm,M.sortedIndexBy=fm,M.sortedIndexOf=cm,M.sortedLastIndex=hm,M.sortedLastIndexBy=dm,M.sortedLastIndexOf=pm,M.startCase=XD,M.startsWith=JD,M.subtract=Wb,M.sum=Hb,M.sumBy=Gb,M.template=QD,M.times=Ob,M.toFinite=ni,M.toInteger=ft,M.toLength=Eh,M.toLower=eb,M.toNumber=vn,M.toSafeInteger=eD,M.toString=Et,M.toUpper=tb,M.trim=rb,M.trimEnd=nb,M.trimStart=ib,M.truncate=ab,M.unescape=ub,M.uniqueId=Pb,M.upperCase=sb,M.upperFirst=Ko,M.each=fh,M.eachRight=ch,M.first=uh,$o(M,function(){var i={};return Un(M,function(s,v){Bt.call(M.prototype,v)||(i[v]=s)}),i}(),{chain:!1}),M.VERSION=n,ln(["bind","bindKey","curry","curryRight","partial","partialRight"],function(i){M[i].placeholder=M}),ln(["drop","take"],function(i,s){_t.prototype[i]=function(v){v=v===r?1:vr(ft(v),0);var A=this.__filtered__&&!s?new _t(this):this.clone();return A.__filtered__?A.__takeCount__=Pr(v,A.__takeCount__):A.__views__.push({size:Pr(v,me),type:i+(A.__dir__<0?"Right":"")}),A},_t.prototype[i+"Right"]=function(v){return this.reverse()[i](v).reverse()}}),ln(["filter","map","takeWhile"],function(i,s){var v=s+1,A=v==W||v==H;_t.prototype[i]=function(F){var x=this.clone();return x.__iteratees__.push({iteratee:He(F,3),type:v}),x.__filtered__=x.__filtered__||A,x}}),ln(["head","last"],function(i,s){var v="take"+(s?"Right":"");_t.prototype[i]=function(){return this[v](1).value()[0]}}),ln(["initial","tail"],function(i,s){var v="drop"+(s?"":"Right");_t.prototype[i]=function(){return this.__filtered__?new _t(this):this[v](1)}}),_t.prototype.compact=function(){return this.filter(Wr)},_t.prototype.find=function(i){return this.filter(i).head()},_t.prototype.findLast=function(i){return this.reverse().find(i)},_t.prototype.invokeMap=ht(function(i,s){return typeof i=="function"?new _t(this):this.map(function(v){return Ha(v,i,s)})}),_t.prototype.reject=function(i){return this.filter(qu(He(i)))},_t.prototype.slice=function(i,s){i=ft(i);var v=this;return v.__filtered__&&(i>0||s<0)?new _t(v):(i<0?v=v.takeRight(-i):i&&(v=v.drop(i)),s!==r&&(s=ft(s),v=s<0?v.dropRight(-s):v.take(s-i)),v)},_t.prototype.takeRightWhile=function(i){return this.reverse().takeWhile(i).reverse()},_t.prototype.toArray=function(){return this.take(me)},Un(_t.prototype,function(i,s){var v=/^(?:filter|find|map|reject)|While$/.test(s),A=/^(?:head|last)$/.test(s),F=M[A?"take"+(s=="last"?"Right":""):s],x=A||/^find/.test(s);F&&(M.prototype[s]=function(){var U=this.__wrapped__,K=A?[1]:arguments,te=U instanceof _t,ve=K[0],ge=te||st(U),De=function(dt){var bt=F.apply(M,hi([dt],K));return A&&Be?bt[0]:bt};ge&&v&&typeof ve=="function"&&ve.length!=1&&(te=ge=!1);var Be=this.__chain__,Le=!!this.__actions__.length,Je=x&&!Be,ct=te&&!Le;if(!x&&ge){U=ct?U:new _t(this);var Qe=i.apply(U,K);return Qe.__actions__.push({func:Lu,args:[De],thisArg:r}),new cn(Qe,Be)}return Je&&ct?i.apply(this,K):(Qe=this.thru(De),Je?A?Qe.value()[0]:Qe.value():Qe)})}),ln(["pop","push","shift","sort","splice","unshift"],function(i){var s=fu[i],v=/^(?:push|sort|unshift)$/.test(i)?"tap":"thru",A=/^(?:pop|shift)$/.test(i);M.prototype[i]=function(){var F=arguments;if(A&&!this.__chain__){var x=this.value();return s.apply(st(x)?x:[],F)}return this[v](function(U){return s.apply(st(U)?U:[],F)})}}),Un(_t.prototype,function(i,s){var v=M[s];if(v){var A=v.name+"";Bt.call(ra,A)||(ra[A]=[]),ra[A].push({name:s,func:v})}}),ra[Pu(r,b).name]=[{name:"wrapper",func:r}],_t.prototype.clone=uv,_t.prototype.reverse=sv,_t.prototype.value=ov,M.prototype.at=Rm,M.prototype.chain=Lm,M.prototype.commit=Um,M.prototype.next=Vm,M.prototype.plant=qm,M.prototype.reverse=zm,M.prototype.toJSON=M.prototype.valueOf=M.prototype.value=Wm,M.prototype.first=M.prototype.head,La&&(M.prototype[La]=jm),M},Qi=U1();Ni?((Ni.exports=Qi)._=Qi,Ys._=Qi):Er._=Qi}).call(hr)})(w3,ws);const E3=ws,Ol="panelModeStore";function C3(){const e=In("select"),{subscribe:t,set:r,update:n}=e,a=typeof window<"u";return r(a&&localStorage[Ol]||""),{subscribe:t,update:u=>{!u||!a||(localStorage[Ol]=u,r(u))},get:()=>zt(e),delete:()=>{a&&(delete localStorage[Ol],r("select"))}}}const Hn=C3(),F3=Tn(Hn,e=>zt(Hn));function nd(e,t,r){const n=e.slice();return n[7]=t[r][0],n[8]=t[r][1],n}function id(e,t,r){const n=e.slice();return n[11]=t[r][0],n[12]=t[r][1],n}function ad(e){let t=e[12].text+"",r,n,a,u=si(e[8],e[11])+"",l,o;return{c(){r=Ze(t),n=Ze("::"),a=se("b"),l=Ze(u),o=Ge()},l(h){r=$e(h,t),n=$e(h,"::"),a=oe(h,"B",{});var p=ie(a);l=$e(p,u),p.forEach(V),o=Ke(h)},m(h,p){Ee(h,r,p),Ee(h,n,p),Ee(h,a,p),Y(a,l),Ee(h,o,p)},p(h,p){p&1&&t!==(t=h[12].text+"")&&xn(r,t),p&1&&u!==(u=si(h[8],h[11])+"")&&xn(l,u)},d(h){h&&V(r),h&&V(n),h&&V(a),h&&V(o)}}}function ud(e,t){let r,n,a,u,l,o=Object.entries(t[8].weightedPrompts),h=[];for(let f=0;f<o.length;f+=1)h[f]=ad(id(t,o,f));function p(){return t[5](t[7],t[8])}return{key:e,first:null,c(){r=se("li"),n=se("a");for(let f=0;f<h.length;f+=1)h[f].c();a=Ge(),this.h()},l(f){r=oe(f,"LI",{});var d=ie(r);n=oe(d,"A",{class:!0});var c=ie(n);for(let g=0;g<h.length;g+=1)h[g].l(c);c.forEach(V),a=Ke(d),d.forEach(V),this.h()},h(){T(n,"class","text-xs inline-block"),qt(n,"active",t[1]===t[7]),this.first=r},m(f,d){Ee(f,r,d),Y(r,n);for(let c=0;c<h.length;c+=1)h[c]&&h[c].m(n,null);Y(r,a),u||(l=ke(n,"click",p),u=!0)},p(f,d){if(t=f,d&5){o=Object.entries(t[8].weightedPrompts);let c;for(c=0;c<o.length;c+=1){const g=id(t,o,c);h[c]?h[c].p(g,d):(h[c]=ad(g),h[c].c(),h[c].m(n,null))}for(;c<h.length;c+=1)h[c].d(1);h.length=o.length}d&7&&qt(n,"active",t[1]===t[7])},d(f){f&&V(r),af(h,f),u=!1,l()}}}function S3(e){let t,r,n,a,u,l=[],o=new Map,h,p,f=e[2](e[0],sd,"desc");const d=c=>c[7];for(let c=0;c<f.length;c+=1){let g=nd(e,f,c),y=d(g);o.set(y,l[c]=ud(y,g))}return{c(){t=se("ul"),r=se("li"),n=se("a"),a=Ze("New +"),u=Ge();for(let c=0;c<l.length;c+=1)l[c].c();this.h()},l(c){t=oe(c,"UL",{class:!0});var g=ie(t);r=oe(g,"LI",{});var y=ie(r);n=oe(y,"A",{class:!0});var m=ie(n);a=$e(m,"New +"),m.forEach(V),y.forEach(V),u=Ke(g);for(let _=0;_<l.length;_+=1)l[_].l(g);g.forEach(V),this.h()},h(){T(n,"class","text-xs inline-block"),T(t,"class","menu h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(c,g){Ee(c,t,g),Y(t,r),Y(r,n),Y(n,a),Y(t,u);for(let y=0;y<l.length;y+=1)l[y]&&l[y].m(t,null);h||(p=ke(n,"click",e[3]),h=!0)},p(c,[g]){g&23&&(f=c[2](c[0],sd,"desc"),l=Bi(l,g,d,1,c,f,o,t,ba,ud,null,nd))},i:Ie,o:Ie,d(c){c&&V(t);for(let g=0;g<l.length;g+=1)l[g].d();h=!1,p()}}}const sd=e=>e[1].date;function B3(e,t,r){let n,a,u;Ot(e,An,f=>r(6,n=f)),Ot(e,bE,f=>r(0,a=f)),Ot(e,lp,f=>r(1,u=f));const{orderBy:l}=E3;function o(){Da.delete(),Nt.update(Ai({},n.weightMode)),Hn.update("edit")}function h(f,d){Da.update(f),Nt.update({...d}),Hn.update("edit")}return[a,u,l,o,h,(f,d)=>h(f,d)]}class O3 extends Rt{constructor(t){super(),Lt(this,t,B3,S3,Ut,{})}}let $u;const M3=new Uint8Array(16);function P3(){if(!$u&&($u=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$u))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $u(M3)}const Sr=[];for(let e=0;e<256;++e)Sr.push((e+256).toString(16).slice(1));function x3(e,t=0){return(Sr[e[t+0]]+Sr[e[t+1]]+Sr[e[t+2]]+Sr[e[t+3]]+"-"+Sr[e[t+4]]+Sr[e[t+5]]+"-"+Sr[e[t+6]]+Sr[e[t+7]]+"-"+Sr[e[t+8]]+Sr[e[t+9]]+"-"+Sr[e[t+10]]+Sr[e[t+11]]+Sr[e[t+12]]+Sr[e[t+13]]+Sr[e[t+14]]+Sr[e[t+15]]).toLowerCase()}const T3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),od={randomUUID:T3};function Wp(e,t,r){if(od.randomUUID&&!t&&!e)return od.randomUUID();e=e||{};const n=e.random||(e.rng||P3)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let a=0;a<16;++a)t[r+a]=n[a];return t}return x3(n)}function I3(e){const t=[],r=/((?:[^:]+|:(?!:))+)(?:::(\d+(?:\.\d+)?))?(?=\s|$)/g;let n;for(;(n=r.exec(e))!==null;){const a=n[1].trim(),u=n[2]?parseFloat(n[2]):1;a&&t.push([a,u])}return t}function Ml(e){if(typeof e!="string")throw new Error("Input must be a string");const t=e.length-1;let r=e;for(;r[t]===",";)r=r.slice(0,t);return r}function Pl(e){if(typeof e!="string")throw new Error("Input must be a string");const t=["-","#","*","•","◦",">","<","+","^","~","(",")","[","]","{","}"];let r=e.trim();for(;t.includes(r[0]);)r=r.slice(1).trim();return/^\d+(\.|\))\s/.test(r)&&(r=r.replace(/^\d+(\.|\))\s/,"")),r}function tf(e){if(e=e.replace(/^\n+|\n+$/g,""),e.includes("::"))return I3(e);if(e.includes(`
`))return e.split(`
`).map(u=>Pl(Ml(u))).filter(u=>u.length>0).map(u=>[u,1]);const t=e.match(/[^.!?]+[.!?]+/g)||[],r=t.length,n=e.split(",").map(u=>Pl(Ml(u))).filter(u=>u.length>0),a=n.length-1;return r>a?t.map(u=>Pl(Ml(u))).filter(u=>u.length>0).map(u=>[u,1]):n.map(u=>[u,1])}function N3(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Hp=N3,k3=typeof hr=="object"&&hr&&hr.Object===Object&&hr,R3=k3,L3=R3,U3=typeof self=="object"&&self&&self.Object===Object&&self,V3=L3||U3||Function("return this")(),Gp=V3,j3=Gp,q3=function(){return j3.Date.now()},z3=q3,W3=/\s/;function H3(e){for(var t=e.length;t--&&W3.test(e.charAt(t)););return t}var G3=H3,K3=G3,Y3=/^\s+/;function Z3(e){return e&&e.slice(0,K3(e)+1).replace(Y3,"")}var $3=Z3,X3=Gp,J3=X3.Symbol,Kp=J3,ld=Kp,Yp=Object.prototype,Q3=Yp.hasOwnProperty,eS=Yp.toString,Ja=ld?ld.toStringTag:void 0;function tS(e){var t=Q3.call(e,Ja),r=e[Ja];try{e[Ja]=void 0;var n=!0}catch{}var a=eS.call(e);return n&&(t?e[Ja]=r:delete e[Ja]),a}var rS=tS,nS=Object.prototype,iS=nS.toString;function aS(e){return iS.call(e)}var uS=aS,fd=Kp,sS=rS,oS=uS,lS="[object Null]",fS="[object Undefined]",cd=fd?fd.toStringTag:void 0;function cS(e){return e==null?e===void 0?fS:lS:cd&&cd in Object(e)?sS(e):oS(e)}var hS=cS;function dS(e){return e!=null&&typeof e=="object"}var pS=dS,vS=hS,gS=pS,mS="[object Symbol]";function _S(e){return typeof e=="symbol"||gS(e)&&vS(e)==mS}var DS=_S,bS=$3,hd=Hp,yS=DS,dd=0/0,AS=/^[-+]0x[0-9a-f]+$/i,wS=/^0b[01]+$/i,ES=/^0o[0-7]+$/i,CS=parseInt;function FS(e){if(typeof e=="number")return e;if(yS(e))return dd;if(hd(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=hd(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=bS(e);var r=wS.test(e);return r||ES.test(e)?CS(e.slice(2),r?2:8):AS.test(e)?dd:+e}var SS=FS,BS=Hp,xl=z3,pd=SS,OS="Expected a function",MS=Math.max,PS=Math.min;function xS(e,t,r){var n,a,u,l,o,h,p=0,f=!1,d=!1,c=!0;if(typeof e!="function")throw new TypeError(OS);t=pd(t)||0,BS(r)&&(f=!!r.leading,d="maxWait"in r,u=d?MS(pd(r.maxWait)||0,t):u,c="trailing"in r?!!r.trailing:c);function g(B){var P=n,I=a;return n=a=void 0,p=B,l=e.apply(I,P),l}function y(B){return p=B,o=setTimeout(b,t),f?g(B):l}function m(B){var P=B-h,I=B-p,N=t-P;return d?PS(N,u-I):N}function _(B){var P=B-h,I=B-p;return h===void 0||P>=t||P<0||d&&I>=u}function b(){var B=xl();if(_(B))return C(B);o=setTimeout(b,m(B))}function C(B){return o=void 0,c&&n?g(B):(n=a=void 0,l)}function w(){o!==void 0&&clearTimeout(o),p=0,n=h=a=o=void 0}function O(){return o===void 0?l:C(xl())}function S(){var B=xl(),P=_(B);if(n=arguments,a=this,h=B,P){if(o===void 0)return y(h);if(d)return clearTimeout(o),o=setTimeout(b,t),g(h)}return o===void 0&&(o=setTimeout(b,t)),l}return S.cancel=w,S.flush=O,S}var vd=xS;function gd(e,t,r){const n=e.slice();return n[14]=t[r].id,n[15]=t[r].text,n}function md(e,t){let r,n,a,u,l;function o(...h){return t[9](t[14],...h)}return{key:e,first:null,c(){r=se("li"),n=se("input"),this.h()},l(h){r=oe(h,"LI",{class:!0});var p=ie(r);n=oe(p,"INPUT",{type:!0,placeholder:!0,class:!0}),p.forEach(V),this.h()},h(){n.value=a=t[15],T(n,"type","text"),T(n,"placeholder",""),T(n,"class","input input-bordered input-sm w-full"),T(r,"class","p-1"),this.first=r},m(h,p){Ee(h,r,p),Y(r,n),u||(l=ke(n,"input",o),u=!0)},p(h,p){t=h,p&2&&a!==(a=t[15])&&n.value!==a&&(n.value=a)},d(h){h&&V(r),u=!1,l()}}}function TS(e){let t,r,n,a,u,l,o,h,p,f,d,c=[],g=new Map,y,m,_,b,C,w=e[1];const O=S=>S[14];for(let S=0;S<w.length;S+=1){let B=gd(e,w,S),P=O(B);g.set(P,c[S]=md(P,B))}return{c(){t=se("div"),r=se("button"),n=Ze("Paste"),a=Ge(),u=se("button"),l=Ze("Save"),o=Ge(),h=se("button"),p=Ze("Delete"),f=Ge(),d=se("ul");for(let S=0;S<c.length;S+=1)c[S].c();y=Ge(),m=se("li"),_=se("input"),this.h()},l(S){t=oe(S,"DIV",{class:!0});var B=ie(t);r=oe(B,"BUTTON",{class:!0});var P=ie(r);n=$e(P,"Paste"),P.forEach(V),a=Ke(B),u=oe(B,"BUTTON",{class:!0});var I=ie(u);l=$e(I,"Save"),I.forEach(V),o=Ke(B),h=oe(B,"BUTTON",{class:!0});var N=ie(h);p=$e(N,"Delete"),N.forEach(V),B.forEach(V),f=Ke(S),d=oe(S,"UL",{class:!0});var G=ie(d);for(let q=0;q<c.length;q+=1)c[q].l(G);y=Ke(G),m=oe(G,"LI",{class:!0});var L=ie(m);_=oe(L,"INPUT",{type:!0,placeholder:!0,class:!0}),L.forEach(V),G.forEach(V),this.h()},h(){T(r,"class","btn btn-sm btn-info mx-2"),T(u,"class","btn btn-sm btn-success mx-2"),T(h,"class","btn btn-sm btn-error mx-2"),T(t,"class","flex px-8 py-2 justify-center bg-base-100"),T(_,"type","text"),T(_,"placeholder","Add prompt"),T(_,"class","input input-bordered input-sm w-full italic"),T(m,"class","p-1"),T(d,"class","h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(S,B){Ee(S,t,B),Y(t,r),Y(r,n),Y(t,a),Y(t,u),Y(u,l),Y(t,o),Y(t,h),Y(h,p),Ee(S,f,B),Ee(S,d,B);for(let P=0;P<c.length;P+=1)c[P]&&c[P].m(d,null);Y(d,y),Y(d,m),Y(m,_),Ei(_,e[0]),b||(C=[ke(r,"click",e[3]),ke(u,"click",e[2]),ke(h,"click",e[4]),ke(_,"input",e[10]),ke(_,"input",e[11])],b=!0)},p(S,[B]){B&34&&(w=S[1],c=Bi(c,B,O,1,S,w,g,d,ba,md,y,gd)),B&1&&_.value!==S[0]&&Ei(_,S[0])},i:Ie,o:Ie,d(S){S&&V(t),S&&V(f),S&&V(d);for(let B=0;B<c.length;B+=1)c[B].d();b=!1,Vr(C)}}}function IS(e,t,r){let n,a,u;Ot(e,An,b=>r(8,a=b)),Ot(e,lp,b=>r(12,u=b));let l="",o=Object.keys(a.weightedPrompts).length;function h(){ru.update(Wp(),{...a,date:Date.now()}),Hn.update("select")}function p(){navigator.clipboard.readText().then(b=>{const C=tf(b);f(C)})}function f(b){const C=Math.max(...b.map(([O,S])=>S)),w=b.reduce((O,[S,B],P)=>(O[P]=Br(P,S,B,B/C),O),{});Nt.update(Ai(w,a.weightMode)),r(0,l="")}function d(){u&&ru.delete(u),Da.delete(),Nt.delete(),Hn.update("select")}const c=vd((b,C)=>{let w={...a.weightedPrompts};if(!C){const B=Object.entries(a.weightedPrompts).filter(([P])=>P!==b).map(([P,I])=>[I.text,I.parsedWeight]);return f(B)}const O={...w[b],text:C};w[b]=O,Nt.update({...a,weightedPrompts:w})},1e3),g=vd(b=>{const C=Object.entries(a.weightedPrompts).map(([w,O])=>[O.text,O.parsedWeight]);return C.push([b,1]),f(C)},1e3),y=(b,C)=>c(b,C.target.value);function m(){l=this.value,r(0,l),r(8,a),r(7,o)}const _=b=>g(b.target.value);return e.$$.update=()=>{if(e.$$.dirty&384){const b=Object.keys(a.weightedPrompts).length;b>o&&(r(7,o=b),r(0,l=""))}e.$$.dirty&256&&r(1,n=Object.entries(a.weightedPrompts).map(([b,C])=>({id:b,text:C.text})))},[l,n,h,p,d,c,g,o,a,y,m,_]}class NS extends Rt{constructor(t){super(),Lt(this,t,IS,TS,Ut,{})}}const kS=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. The first sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. The middle three sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. The final sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,RS=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 10 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. Four sentences should describe the subject.
    d. Four sentences should describe the scene.
    e. Tow sentences should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,LS=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 10 concepts.
    a. Each concept should be 10 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
`,US=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 20 concepts.
    a. Each concept should be 5 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
3. Do not use hyphens to mark list items.
4. Do not title the list.
`,VS=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. One sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. Two sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. One sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
    f. One sentence should be a poetic concept or feeling. Example: The unfathomable depths of a lover's sigh.
        i. The poetic concept should be intense.
        ii. The poetic concept should be emotional.
        iii. The poetic concept should include abstract words.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`;function jS(){const e=In({}),{subscribe:t,set:r,update:n}=e,a=typeof window<"u";return r(a&&Object.keys(localStorage).reduce((u,l)=>{if(l.startsWith("directive")){const o=l.split("_")[1];u[o]=JSON.parse(localStorage[l])}return u},{})||{}),{subscribe:t,update:(u,l)=>{const o=zt(e),p={...o[u]||{},...l};a&&(localStorage[`directive_${u}`]=JSON.stringify(p));const f={...o,[u]:p};r(f)},get:u=>zt(e)[u],delete:u=>{a&&delete localStorage[`directive_${u}`];const l={...zt(e)};delete l[u],r(l)}}}const Es=jS(),qS=Tn(Es,e=>Object.entries(zt(Es))),Tl="preferredModelStore";function zS(){const e=In(""),{subscribe:t,set:r,update:n}=e,a=typeof window<"u";return r(a&&localStorage[Tl]||""),{subscribe:t,update:u=>{!u||!a||(localStorage[Tl]=u,r(u))},get:()=>zt(e),delete:()=>{a&&(delete localStorage[Tl],r(""))}}}const rf=zS(),Zp=Tn(rf,e=>zt(rf)),Il="preferredDirectiveStore";function WS(){const e=In(""),{subscribe:t,set:r,update:n}=e,a=typeof window<"u";return r(a&&localStorage[Il]||""),{subscribe:t,update:u=>{!u||!a||(localStorage[Il]=u,r(u))},get:()=>zt(e),delete:()=>{a&&(delete localStorage[Il],r(""))}}}const Cs=WS(),HS=Tn(Cs,e=>zt(Cs)),Nl="metaPromptStore";function GS(){const e=In(""),{subscribe:t,set:r,update:n}=e,a=typeof window<"u";return r(a&&localStorage[Nl]||""),{subscribe:t,update:u=>{!u||!a||(localStorage[Nl]=u,r(u))},get:()=>zt(e),delete:()=>{a&&(delete localStorage[Nl],r(""))}}}const nf=GS(),KS=Tn(nf,e=>zt(nf));function _d(e,t,r){const n=e.slice();return n[30]=t[r][0],n[31]=t[r][1],n}function YS(e){let t,r,n;return{c(){t=se("div"),r=se("p"),n=Ze("Set Open AI Key in settings for GPT generation."),this.h()},l(a){t=oe(a,"DIV",{class:!0});var u=ie(t);r=oe(u,"P",{class:!0});var l=ie(r);n=$e(l,"Set Open AI Key in settings for GPT generation."),l.forEach(V),u.forEach(V),this.h()},h(){T(r,"class","text-center"),T(t,"class","w-full p-2 flex justify-center")},m(a,u){Ee(a,t,u),Y(t,r),Y(r,n)},p:Ie,d(a){a&&V(t)}}}function ZS(e){let t,r,n,a,u,l,o,h,p,f,d=[],c=new Map,g,y,m,_,b,C,w,O=Object.entries(e[1]);const S=P=>P[30];for(let P=0;P<O.length;P+=1){let I=_d(e,O,P),N=S(I);c.set(N,d[P]=Dd(N,I))}let B=e[0]&&bd(e);return{c(){t=se("div"),r=se("div"),n=se("label"),a=se("span"),u=Ze("Pick a directive for prompt creation"),l=Ge(),o=se("select"),h=se("option"),p=Ze("Pick one");for(let P=0;P<d.length;P+=1)d[P].c();g=se("option"),y=Ze("New"),_=Ge(),B&&B.c(),b=Yt(),this.h()},l(P){t=oe(P,"DIV",{class:!0});var I=ie(t);r=oe(I,"DIV",{class:!0});var N=ie(r);n=oe(N,"LABEL",{class:!0});var G=ie(n);a=oe(G,"SPAN",{class:!0});var L=ie(a);u=$e(L,"Pick a directive for prompt creation"),L.forEach(V),G.forEach(V),l=Ke(N),o=oe(N,"SELECT",{class:!0});var q=ie(o);h=oe(q,"OPTION",{});var Z=ie(h);p=$e(Z,"Pick one"),Z.forEach(V);for(let z=0;z<d.length;z+=1)d[z].l(q);g=oe(q,"OPTION",{});var W=ie(g);y=$e(W,"New"),W.forEach(V),q.forEach(V),N.forEach(V),I.forEach(V),_=Ke(P),B&&B.l(P),b=Yt(),this.h()},h(){T(a,"class","label-text"),T(n,"class","label"),h.disabled=!0,h.selected=f=e[0]===null,h.__value="Pick one",h.value=h.__value,g.__value="new",g.value=g.__value,g.selected=m=e[0]==="new",T(o,"class","select select-bordered"),T(r,"class","form-control w-full max-w-xs mb-4"),T(t,"class","flex justify-center")},m(P,I){Ee(P,t,I),Y(t,r),Y(r,n),Y(n,a),Y(a,u),Y(r,l),Y(r,o),Y(o,h),Y(h,p);for(let N=0;N<d.length;N+=1)d[N]&&d[N].m(o,null);Y(o,g),Y(g,y),ga(o,e[0]),Ee(P,_,I),B&&B.m(P,I),Ee(P,b,I),C||(w=ke(o,"change",e[11]),C=!0)},p(P,I){I[0]&3&&f!==(f=P[0]===null)&&(h.selected=f),I[0]&3&&(O=Object.entries(P[1]),d=Bi(d,I,S,1,P,O,c,o,ba,Dd,g,_d)),I[0]&3&&m!==(m=P[0]==="new")&&(g.selected=m),I[0]&3&&ga(o,P[0]),P[0]?B?B.p(P,I):(B=bd(P),B.c(),B.m(b.parentNode,b)):B&&(B.d(1),B=null)},d(P){P&&V(t);for(let I=0;I<d.length;I+=1)d[I].d();P&&V(_),B&&B.d(P),P&&V(b),C=!1,w()}}}function Dd(e,t){let r,n=t[31].name+"",a,u=t[31].builtIn?" (Built-In)":" (User)",l,o,h;return{key:e,first:null,c(){r=se("option"),a=Ze(n),l=Ze(u),this.h()},l(p){r=oe(p,"OPTION",{});var f=ie(r);a=$e(f,n),l=$e(f,u),f.forEach(V),this.h()},h(){r.__value=o=t[30],r.value=r.__value,r.selected=h=t[0]===t[30],this.first=r},m(p,f){Ee(p,r,f),Y(r,a),Y(r,l)},p(p,f){t=p,f[0]&2&&n!==(n=t[31].name+"")&&xn(a,n),f[0]&2&&u!==(u=t[31].builtIn?" (Built-In)":" (User)")&&xn(l,u),f[0]&2&&o!==(o=t[30])&&(r.__value=o,r.value=r.__value),f[0]&3&&h!==(h=t[0]===t[30])&&(r.selected=h)},d(p){p&&V(r)}}}function bd(e){let t,r,n,a,u,l,o,h,p,f,d=!e[6]&&yd(e);function c(m,_){return m[5]?XS:$S}let g=c(e),y=g(e);return{c(){d&&d.c(),t=Ge(),r=se("div"),n=se("textarea"),a=Ge(),u=se("div"),l=se("textarea"),o=Ge(),y.c(),h=Yt(),this.h()},l(m){d&&d.l(m),t=Ke(m),r=oe(m,"DIV",{class:!0});var _=ie(r);n=oe(_,"TEXTAREA",{class:!0,placeholder:!0}),ie(n).forEach(V),_.forEach(V),a=Ke(m),u=oe(m,"DIV",{class:!0});var b=ie(u);l=oe(b,"TEXTAREA",{class:!0,placeholder:!0}),ie(l).forEach(V),b.forEach(V),o=Ke(m),y.l(m),h=Yt(),this.h()},h(){T(n,"class","textarea textarea-bordered w-full h-full"),T(n,"placeholder","GPT Directives"),T(r,"class","w-full p-2 h-1/2"),l.value=e[7],T(l,"class","textarea textarea-bordered w-full h-full"),T(l,"placeholder","Describe the prompt to generate."),T(u,"class","w-full p-2 h-1/5")},m(m,_){d&&d.m(m,_),Ee(m,t,_),Ee(m,r,_),Y(r,n),Ei(n,e[4]),Ee(m,a,_),Ee(m,u,_),Y(u,l),Ee(m,o,_),y.m(m,_),Ee(m,h,_),p||(f=[ke(n,"input",e[17]),ke(l,"input",e[18])],p=!0)},p(m,_){m[6]?d&&(d.d(1),d=null):d?d.p(m,_):(d=yd(m),d.c(),d.m(t.parentNode,t)),_[0]&16&&Ei(n,m[4]),_[0]&128&&(l.value=m[7]),g===(g=c(m))&&y?y.p(m,_):(y.d(1),y=g(m),y&&(y.c(),y.m(h.parentNode,h)))},d(m){d&&d.d(m),m&&V(t),m&&V(r),m&&V(a),m&&V(u),m&&V(o),y.d(m),m&&V(h),p=!1,Vr(f)}}}function yd(e){let t,r,n,a,u,l,o;return{c(){t=se("div"),r=se("input"),n=Ge(),a=se("button"),u=Ze("Save"),this.h()},l(h){t=oe(h,"DIV",{class:!0});var p=ie(t);r=oe(p,"INPUT",{type:!0,placeholder:!0,class:!0}),n=Ke(p),a=oe(p,"BUTTON",{class:!0});var f=ie(a);u=$e(f,"Save"),f.forEach(V),p.forEach(V),this.h()},h(){T(r,"type","text"),T(r,"placeholder","Name"),T(r,"class","input input-bordered input-sm w-full max-w-xs"),T(a,"class","btn btn-sm btn-primary ml-4"),T(t,"class","w-full p-2 h-12 flex justify-between")},m(h,p){Ee(h,t,p),Y(t,r),Ei(r,e[3]),Y(t,n),Y(t,a),Y(a,u),l||(o=[ke(r,"input",e[16]),ke(a,"click",e[9])],l=!0)},p(h,p){p[0]&8&&r.value!==h[3]&&Ei(r,h[3])},d(h){h&&V(t),l=!1,Vr(o)}}}function $S(e){let t,r,n={ctx:e,current:null,token:null,hasCatch:!1,pending:e5,then:QS,catch:JS,value:29};return Ci(r=e[2],n),{c(){t=se("div"),n.block.c(),this.h()},l(a){t=oe(a,"DIV",{class:!0});var u=ie(t);n.block.l(u),u.forEach(V),this.h()},h(){T(t,"class","w-full p-2 h-12 flex justify-end")},m(a,u){Ee(a,t,u),n.block.m(t,n.anchor=null),n.mount=()=>t,n.anchor=null},p(a,u){e=a,n.ctx=e,u[0]&4&&r!==(r=e[2])&&Ci(r,n)||Bs(n,e,u)},d(a){a&&V(t),n.block.d(),n.token=null,n=null}}}function XS(e){let t,r,n,a,u,l,o,h={ctx:e,current:null,token:null,hasCatch:!1,pending:n5,then:r5,catch:t5,value:29};return Ci(u=e[2],h),{c(){t=se("div"),r=se("button"),n=Ze("Delete"),a=Ge(),h.block.c(),this.h()},l(p){t=oe(p,"DIV",{class:!0});var f=ie(t);r=oe(f,"BUTTON",{class:!0});var d=ie(r);n=$e(d,"Delete"),d.forEach(V),a=Ke(f),h.block.l(f),f.forEach(V),this.h()},h(){T(r,"class","btn btn-sm btn-error ml-4"),T(t,"class","w-full p-2 h-12 flex justify-between")},m(p,f){Ee(p,t,f),Y(t,r),Y(r,n),Y(t,a),h.block.m(t,h.anchor=null),h.mount=()=>t,h.anchor=null,l||(o=ke(r,"click",e[10]),l=!0)},p(p,f){e=p,h.ctx=e,f[0]&4&&u!==(u=e[2])&&Ci(u,h)||Bs(h,e,f)},d(p){p&&V(t),h.block.d(),h.token=null,h=null,l=!1,o()}}}function JS(e){return{c:Ie,l:Ie,m:Ie,p:Ie,d:Ie}}function QS(e){let t,r,n,a;return{c(){t=se("button"),r=Ze("Generate"),this.h()},l(u){t=oe(u,"BUTTON",{class:!0});var l=ie(t);r=$e(l,"Generate"),l.forEach(V),this.h()},h(){T(t,"class","btn btn-sm btn-primary ml-4")},m(u,l){Ee(u,t,l),Y(t,r),n||(a=ke(t,"click",e[12]),n=!0)},p:Ie,d(u){u&&V(t),n=!1,a()}}}function e5(e){let t,r,n,a;return{c(){t=se("button"),r=Ze("Generating"),this.h()},l(u){t=oe(u,"BUTTON",{class:!0});var l=ie(t);r=$e(l,"Generating"),l.forEach(V),this.h()},h(){T(t,"class","btn btn-sm btn ml-4 disabled")},m(u,l){Ee(u,t,l),Y(t,r),n||(a=ke(t,"click",e[12]),n=!0)},p:Ie,d(u){u&&V(t),n=!1,a()}}}function t5(e){return{c:Ie,l:Ie,m:Ie,p:Ie,d:Ie}}function r5(e){let t,r,n,a;return{c(){t=se("button"),r=Ze("Generate"),this.h()},l(u){t=oe(u,"BUTTON",{class:!0});var l=ie(t);r=$e(l,"Generate"),l.forEach(V),this.h()},h(){T(t,"class","btn btn-sm btn-primary ml-4")},m(u,l){Ee(u,t,l),Y(t,r),n||(a=ke(t,"click",e[12]),n=!0)},p:Ie,d(u){u&&V(t),n=!1,a()}}}function n5(e){let t,r,n,a;return{c(){t=se("button"),r=Ze("Generating"),this.h()},l(u){t=oe(u,"BUTTON",{class:!0});var l=ie(t);r=$e(l,"Generating"),l.forEach(V),this.h()},h(){T(t,"class","btn btn-sm btn ml-4 disabled")},m(u,l){Ee(u,t,l),Y(t,r),n||(a=ke(t,"click",e[12]),n=!0)},p:Ie,d(u){u&&V(t),n=!1,a()}}}function i5(e){let t;function r(u,l){return u[8]?ZS:YS}let a=r(e)(e);return{c(){t=se("div"),a.c(),this.h()},l(u){t=oe(u,"DIV",{class:!0});var l=ie(t);a.l(l),l.forEach(V),this.h()},h(){T(t,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(u,l){Ee(u,t,l),a.m(t,null)},p(u,l){a.p(u,l)},i:Ie,o:Ie,d(u){u&&V(t),a.d()}}}function a5(e,t,r){let n,a,u,l,o,h,p,f,d,c;Ot(e,KS,z=>r(7,o=z)),Ot(e,An,z=>r(19,h=z)),Ot(e,HS,z=>r(14,p=z)),Ot(e,qS,z=>r(15,f=z)),Ot(e,Zp,z=>r(20,d=z)),Ot(e,wf,z=>r(21,c=z));let g=c,y=d,m=null;const _=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001"];let b={C:{name:"Five Sentences",text:kS,builtIn:!0},D:{name:"Ten Sentences",text:RS,builtIn:!0},E:{name:"Fragments",text:LS,builtIn:!0},F:{name:"Concept Shotgun",text:US,builtIn:!0},G:{name:"Poetic Accents",text:VS,builtIn:!0}},C=null,w="",O="";function S(){const z=C==="new"?Wp():C;Es.update(z,{name:w,text:O,builtIn:!1}),C==="new"&&r(0,C=z)}function B(){Es.delete(C),r(0,C=null),r(3,w=""),r(4,O=""),Cs.delete()}function P(z){r(0,C=z),Cs.update(z),z&&z!=="new"?(r(3,w=a[z].name),r(4,O=a[z].text)):z==="new"&&(r(3,w=""),r(4,O=""))}function I(z){P(z.target.value)}function N(z,H){r(2,m=zF(z,H,y||"gpt-3.5-turbo")),m.then(ee=>{console.log(ee),ee.data.choices.forEach((Q,le)=>{const me=tf(Q.message.content);console.log(me);const Fe=me.reduce((be,[Ne,je],Me)=>(be[Me]=Br(Me,Ne,je),be),{});Nt.update(Ai(Fe,h.weightMode)),Hn.update("edit")})})}function G(z,H){r(2,m=qF(z,H,y||"text-davinci-003")),m.then(ee=>{console.log(ee),ee.data.choices.forEach((Q,le)=>{const me=tf(Q.text);console.log(me);const Fe=me.reduce((be,[Ne,je],Me)=>(be[Me]=Br(Me,Ne,je),be),{});Nt.update(Ai(Fe,h.weightMode)),Hn.update("edit")})})}function L(){if(!g||!O||!o)return;const z=Af(g),H=`${O}

        Using the above rules create a prompt from:
        ${o}
        `;_.includes(y)?G(z,H):N(z,H)}function q(){w=this.value,r(3,w)}function Z(){O=this.value,r(4,O)}const W=z=>nf.update(z.target.value);return e.$$.update=()=>{e.$$.dirty[0]&32768&&r(13,n=f.reduce((z,[H,re])=>(z[H]={name:re.name,text:re.text,builtIn:!1},z),{})),e.$$.dirty[0]&8192&&r(1,a=Object.entries({...b,...n}).reduce((z,[H,re])=>(z[H]=re,z),{})),e.$$.dirty[0]&16385&&(C===null&&r(0,C=p),P(C)),e.$$.dirty[0]&3&&r(6,u=C&&C!=="new"&&a[C].builtIn),e.$$.dirty[0]&3&&r(5,l=C&&C!=="new"&&!a[C].builtIn)},[C,a,m,w,O,l,u,o,g,S,B,I,L,n,p,f,q,Z,W]}class u5 extends Rt{constructor(t){super(),Lt(this,t,a5,i5,Ut,{},null,[-1,-1])}}function Ad(e,t,r){const n=e.slice();return n[20]=t[r],n}function wd(e,t,r){const n=e.slice();return n[20]=t[r],n}function s5(e){return{c:Ie,l:Ie,m:Ie,p:Ie,d:Ie}}function o5(e){let t,r,n=e[0].length>0&&Ed(e),a=e[1].length>0&&Fd(e);return{c(){n&&n.c(),t=Ge(),a&&a.c(),r=Yt()},l(u){n&&n.l(u),t=Ke(u),a&&a.l(u),r=Yt()},m(u,l){n&&n.m(u,l),Ee(u,t,l),a&&a.m(u,l),Ee(u,r,l)},p(u,l){u[0].length>0?n?n.p(u,l):(n=Ed(u),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null),u[1].length>0?a?a.p(u,l):(a=Fd(u),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(u){n&&n.d(u),u&&V(t),a&&a.d(u),u&&V(r)}}}function Ed(e){let t,r,n,a,u,l,o,h,p,f,d=[],c=new Map,g,y,m=e[0];const _=b=>b[20];for(let b=0;b<m.length;b+=1){let C=wd(e,m,b),w=_(C);c.set(w,d[b]=Cd(w,C))}return{c(){t=se("div"),r=se("div"),n=se("label"),a=se("span"),u=Ze("Pick a model to use for model generation"),l=Ge(),o=se("select"),h=se("option"),p=Ze("Pick one");for(let b=0;b<d.length;b+=1)d[b].c();this.h()},l(b){t=oe(b,"DIV",{class:!0});var C=ie(t);r=oe(C,"DIV",{class:!0});var w=ie(r);n=oe(w,"LABEL",{class:!0});var O=ie(n);a=oe(O,"SPAN",{class:!0});var S=ie(a);u=$e(S,"Pick a model to use for model generation"),S.forEach(V),O.forEach(V),l=Ke(w),o=oe(w,"SELECT",{class:!0});var B=ie(o);h=oe(B,"OPTION",{});var P=ie(h);p=$e(P,"Pick one"),P.forEach(V);for(let I=0;I<d.length;I+=1)d[I].l(B);B.forEach(V),w.forEach(V),C.forEach(V),this.h()},h(){T(a,"class","label-text"),T(n,"class","label"),h.disabled=!0,h.selected=f=e[2]===null,h.__value="Pick one",h.value=h.__value,T(o,"class","select select-bordered"),T(r,"class","form-control w-full max-w-xs mb-4"),T(t,"class","flex justify-center")},m(b,C){Ee(b,t,C),Y(t,r),Y(r,n),Y(n,a),Y(a,u),Y(r,l),Y(r,o),Y(o,h),Y(h,p);for(let w=0;w<d.length;w+=1)d[w]&&d[w].m(o,null);ga(o,e[2]),g||(y=ke(o,"change",e[7]),g=!0)},p(b,C){C&5&&f!==(f=b[2]===null)&&(h.selected=f),C&5&&(m=b[0],d=Bi(d,C,_,1,b,m,c,o,ba,Cd,null,wd)),C&5&&ga(o,b[2])},d(b){b&&V(t);for(let C=0;C<d.length;C+=1)d[C].d();g=!1,y()}}}function Cd(e,t){let r,n=t[20]+"",a,u,l;return{key:e,first:null,c(){r=se("option"),a=Ze(n),this.h()},l(o){r=oe(o,"OPTION",{});var h=ie(r);a=$e(h,n),h.forEach(V),this.h()},h(){r.__value=u=t[20],r.value=r.__value,r.selected=l=t[2]===t[20],this.first=r},m(o,h){Ee(o,r,h),Y(r,a)},p(o,h){t=o,h&1&&n!==(n=t[20]+"")&&xn(a,n),h&1&&u!==(u=t[20])&&(r.__value=u,r.value=r.__value),h&5&&l!==(l=t[2]===t[20])&&(r.selected=l)},d(o){o&&V(r)}}}function Fd(e){let t,r,n,a,u,l,o,h,p,f,d=[],c=new Map,g,y,m=e[1];const _=b=>b[20];for(let b=0;b<m.length;b+=1){let C=Ad(e,m,b),w=_(C);c.set(w,d[b]=Sd(w,C))}return{c(){t=se("div"),r=se("div"),n=se("label"),a=se("span"),u=Ze("Pick a model to use for prompt embedding"),l=Ge(),o=se("select"),h=se("option"),p=Ze("Pick one");for(let b=0;b<d.length;b+=1)d[b].c();this.h()},l(b){t=oe(b,"DIV",{class:!0});var C=ie(t);r=oe(C,"DIV",{class:!0});var w=ie(r);n=oe(w,"LABEL",{class:!0});var O=ie(n);a=oe(O,"SPAN",{class:!0});var S=ie(a);u=$e(S,"Pick a model to use for prompt embedding"),S.forEach(V),O.forEach(V),l=Ke(w),o=oe(w,"SELECT",{class:!0});var B=ie(o);h=oe(B,"OPTION",{});var P=ie(h);p=$e(P,"Pick one"),P.forEach(V);for(let I=0;I<d.length;I+=1)d[I].l(B);B.forEach(V),w.forEach(V),C.forEach(V),this.h()},h(){T(a,"class","label-text"),T(n,"class","label"),h.disabled=!0,h.selected=f=e[3]===null,h.__value="Pick one",h.value=h.__value,T(o,"class","select select-bordered"),T(r,"class","form-control w-full max-w-xs mb-4"),T(t,"class","flex justify-center")},m(b,C){Ee(b,t,C),Y(t,r),Y(r,n),Y(n,a),Y(a,u),Y(r,l),Y(r,o),Y(o,h),Y(h,p);for(let w=0;w<d.length;w+=1)d[w]&&d[w].m(o,null);ga(o,e[3]),g||(y=ke(o,"change",e[8]),g=!0)},p(b,C){C&10&&f!==(f=b[3]===null)&&(h.selected=f),C&10&&(m=b[1],d=Bi(d,C,_,1,b,m,c,o,ba,Sd,null,Ad)),C&10&&ga(o,b[3])},d(b){b&&V(t);for(let C=0;C<d.length;C+=1)d[C].d();g=!1,y()}}}function Sd(e,t){let r,n=t[20]+"",a,u,l;return{key:e,first:null,c(){r=se("option"),a=Ze(n),this.h()},l(o){r=oe(o,"OPTION",{});var h=ie(r);a=$e(h,n),h.forEach(V),this.h()},h(){r.__value=u=t[20],r.value=r.__value,r.selected=l=t[3]===t[20],this.first=r},m(o,h){Ee(o,r,h),Y(r,a)},p(o,h){t=o,h&2&&n!==(n=t[20]+"")&&xn(a,n),h&2&&u!==(u=t[20])&&(r.__value=u,r.value=r.__value),h&10&&l!==(l=t[3]===t[20])&&(r.selected=l)},d(o){o&&V(r)}}}function l5(e){let t,r,n;return{c(){t=se("div"),r=se("div"),n=se("progress"),this.h()},l(a){t=oe(a,"DIV",{class:!0});var u=ie(t);r=oe(u,"DIV",{class:!0});var l=ie(r);n=oe(l,"PROGRESS",{class:!0}),ie(n).forEach(V),l.forEach(V),u.forEach(V),this.h()},h(){T(n,"class","progress progress-primary w-56"),T(r,"class","form-control w-full flex flex-col max-w-xs"),T(t,"class","py-10 flex justify-center")},m(a,u){Ee(a,t,u),Y(t,r),Y(r,n)},p:Ie,d(a){a&&V(t)}}}function f5(e){let t,r,n,a,u,l,o,h,p,f,d,c,g,y,m,_,b,C,w,O,S,B,P,I,N={ctx:e,current:null,token:null,hasCatch:!1,pending:l5,then:o5,catch:s5,value:19};return Ci(B=e[4],N),{c(){t=se("div"),r=se("div"),n=se("div"),a=se("label"),u=se("span"),l=Ze("Include Prompts With Zero Weight"),o=Ge(),h=se("input"),p=Ge(),f=se("div"),d=se("div"),c=se("label"),g=se("span"),y=Ze("Open AI Key"),m=Ge(),_=se("input"),b=Ge(),C=se("label"),w=se("button"),O=Ze("Clear"),S=Ge(),N.block.c(),this.h()},l(G){t=oe(G,"DIV",{class:!0});var L=ie(t);r=oe(L,"DIV",{class:!0});var q=ie(r);n=oe(q,"DIV",{class:!0});var Z=ie(n);a=oe(Z,"LABEL",{class:!0});var W=ie(a);u=oe(W,"SPAN",{class:!0});var z=ie(u);l=$e(z,"Include Prompts With Zero Weight"),z.forEach(V),W.forEach(V),o=Ke(Z),h=oe(Z,"INPUT",{type:!0,class:!0}),Z.forEach(V),q.forEach(V),p=Ke(L),f=oe(L,"DIV",{class:!0});var H=ie(f);d=oe(H,"DIV",{class:!0});var re=ie(d);c=oe(re,"LABEL",{class:!0});var ee=ie(c);g=oe(ee,"SPAN",{class:!0});var Q=ie(g);y=$e(Q,"Open AI Key"),Q.forEach(V),ee.forEach(V),m=Ke(re),_=oe(re,"INPUT",{type:!0,placeholder:!0,class:!0}),b=Ke(re),C=oe(re,"LABEL",{class:!0});var le=ie(C);w=oe(le,"BUTTON",{class:!0});var me=ie(w);O=$e(me,"Clear"),me.forEach(V),le.forEach(V),re.forEach(V),H.forEach(V),S=Ke(L),N.block.l(L),L.forEach(V),this.h()},h(){T(u,"class","label-text-alt"),T(a,"class","label"),T(h,"type","checkbox"),T(h,"class","toggle"),h.checked=e[5],T(n,"class","form-control w-full max-w-xs"),T(r,"class","flex justify-center"),T(g,"class","label-text-alt"),T(c,"class","label"),_.value=e[6],T(_,"type","password"),T(_,"placeholder","Open AI Key"),T(_,"class","input input-bordered w-full max-w-xs"),T(w,"class","btn btn-xs btn-error"),T(C,"class","label"),T(d,"class","form-control w-full max-w-xs"),T(f,"class","flex justify-center"),T(t,"class","h-full p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(G,L){Ee(G,t,L),Y(t,r),Y(r,n),Y(n,a),Y(a,u),Y(u,l),Y(n,o),Y(n,h),Y(t,p),Y(t,f),Y(f,d),Y(d,c),Y(c,g),Y(g,y),Y(d,m),Y(d,_),Y(d,b),Y(d,C),Y(C,w),Y(w,O),Y(t,S),N.block.m(t,N.anchor=null),N.mount=()=>t,N.anchor=null,P||(I=[ke(h,"change",e[11]),ke(_,"input",e[9]),ke(w,"click",e[10])],P=!0)},p(G,[L]){e=G,L&32&&(h.checked=e[5]),L&64&&_.value!==e[6]&&(_.value=e[6]),N.ctx=e,L&16&&B!==(B=e[4])&&Ci(B,N)||Bs(N,e,L)},i:Ie,o:Ie,d(G){G&&V(t),N.block.d(),N.token=null,N=null,P=!1,Vr(I)}}}function c5(e,t,r){let n,a,u,l,o;Ot(e,zp,B=>r(5,n=B)),Ot(e,An,B=>r(13,a=B)),Ot(e,qp,B=>r(14,u=B)),Ot(e,Zp,B=>r(15,l=B)),Ot(e,wf,B=>r(6,o=B));const h=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001","gpt-3.5-turbo","gpt-3.5-turbo-0301"],p=["text-embedding-ada-002"];let f=o,d=[],c=[],g=l,y=u,m=null;async function _(B){if(!B||d.length&&c.length)return;const P=Af(B);r(4,m=HF(P));const I=await m;I.data&&r(0,d=I.data.data.map(({id:N})=>N).filter(N=>h.includes(N))),r(1,c=I.data.data.map(({id:N})=>N).filter(N=>p.includes(N)))}function b(B){r(2,g=B.target.value),rf.update(g)}function C(B){r(3,y=B.target.value),Ql.update(y)}function w(B){const P=B.target.value;As.update(P),P.length===51&&_(P),P.length===0&&O()}function O(){As.delete(),r(12,f=""),r(0,d=[]),r(1,c=[]),a.weightMode===At.Embed&&Nt.update({...a,weightMode:At.Circle})}function S(){ef.update(!n)}return e.$$.update=()=>{e.$$.dirty&4096&&_(f)},[d,c,g,y,m,n,o,b,C,w,O,S,f]}class h5 extends Rt{constructor(t){super(),Lt(this,t,c5,f5,Ut,{})}}function d5(e){let t,r;return t=new h5({}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,a){gt(t,n,a),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function p5(e){let t,r;return t=new u5({}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,a){gt(t,n,a),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function v5(e){let t,r;return t=new NS({}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,a){gt(t,n,a),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function g5(e){let t,r;return t=new O3({}),{c(){pt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,a){gt(t,n,a),r=!0},i(n){r||(xe(t.$$.fragment,n),r=!0)},o(n){Ue(t.$$.fragment,n),r=!1},d(n){mt(t,n)}}}function m5(e){let t,r,n,a,u,l,o,h,p,f,d,c,g,y,m,_,b,C,w,O,S,B,P,I;const N=[g5,v5,p5,d5],G=[];function L(q,Z){return q[0]==="select"?0:q[0]==="edit"?1:q[0]==="generate"?2:q[0]==="settings"?3:-1}return~(O=L(e))&&(S=G[O]=N[O](e)),{c(){t=se("div"),r=se("div"),n=se("div"),a=se("button"),u=Ze("Select"),o=Ge(),h=se("button"),p=Ze("Edit"),d=Ge(),c=se("button"),g=Ze("Generate"),m=Ge(),_=se("button"),b=Ze("Settings"),w=Ge(),S&&S.c(),this.h()},l(q){t=oe(q,"DIV",{class:!0});var Z=ie(t);r=oe(Z,"DIV",{class:!0});var W=ie(r);n=oe(W,"DIV",{class:!0});var z=ie(n);a=oe(z,"BUTTON",{class:!0});var H=ie(a);u=$e(H,"Select"),H.forEach(V),o=Ke(z),h=oe(z,"BUTTON",{class:!0});var re=ie(h);p=$e(re,"Edit"),re.forEach(V),d=Ke(z),c=oe(z,"BUTTON",{class:!0});var ee=ie(c);g=$e(ee,"Generate"),ee.forEach(V),m=Ke(z),_=oe(z,"BUTTON",{class:!0});var Q=ie(_);b=$e(Q,"Settings"),Q.forEach(V),z.forEach(V),w=Ke(W),S&&S.l(W),W.forEach(V),Z.forEach(V),this.h()},h(){T(a,"class",l=e[0]==="select"?"btn btn-active":"btn"),T(h,"class",f=e[0]==="edit"?"btn btn-active":"btn"),T(c,"class",y=e[0]==="generate"?"btn btn-active":"btn"),T(_,"class",C=e[0]==="settings"?"btn btn-active":"btn"),T(n,"class","btn-group btn-group-vertical sm:btn-group-horizontal bg-base-100 w-full flex justify-center p-2"),T(r,"class","h-screen overflow-y-auto flex flex-col"),T(t,"class","max-w-md w-1/2 h-screen overflow-y-auto")},m(q,Z){Ee(q,t,Z),Y(t,r),Y(r,n),Y(n,a),Y(a,u),Y(n,o),Y(n,h),Y(h,p),Y(n,d),Y(n,c),Y(c,g),Y(n,m),Y(n,_),Y(_,b),Y(r,w),~O&&G[O].m(r,null),B=!0,P||(I=[ke(a,"click",e[2]),ke(h,"click",e[3]),ke(c,"click",e[4]),ke(_,"click",e[5])],P=!0)},p(q,[Z]){(!B||Z&1&&l!==(l=q[0]==="select"?"btn btn-active":"btn"))&&T(a,"class",l),(!B||Z&1&&f!==(f=q[0]==="edit"?"btn btn-active":"btn"))&&T(h,"class",f),(!B||Z&1&&y!==(y=q[0]==="generate"?"btn btn-active":"btn"))&&T(c,"class",y),(!B||Z&1&&C!==(C=q[0]==="settings"?"btn btn-active":"btn"))&&T(_,"class",C);let W=O;O=L(q),O!==W&&(S&&(Dn(),Ue(G[W],1,1,()=>{G[W]=null}),bn()),~O?(S=G[O],S||(S=G[O]=N[O](q),S.c()),xe(S,1),S.m(r,null)):S=null)},i(q){B||(xe(S),B=!0)},o(q){Ue(S),B=!1},d(q){q&&V(t),~O&&G[O].d(),P=!1,Vr(I)}}}function _5(e,t,r){let n;Ot(e,F3,p=>r(0,n=p));function a(p){Hn.update(p)}const u=()=>a("select"),l=()=>a("edit"),o=()=>a("generate"),h=()=>a("settings");return e.$$.update=()=>{e.$$.dirty&1&&(n||Hn.update("select"))},[n,a,u,l,o,h]}class D5 extends Rt{constructor(t){super(),Lt(this,t,_5,m5,Ut,{})}}function b5(e){let t,r,n,a;return t=new D5({}),n=new A3({}),{c(){pt(t.$$.fragment),r=Ge(),pt(n.$$.fragment)},l(u){vt(t.$$.fragment,u),r=Ke(u),vt(n.$$.fragment,u)},m(u,l){gt(t,u,l),Ee(u,r,l),gt(n,u,l),a=!0},p:Ie,i(u){a||(xe(t.$$.fragment,u),xe(n.$$.fragment,u),a=!0)},o(u){Ue(t.$$.fragment,u),Ue(n.$$.fragment,u),a=!1},d(u){mt(t,u),u&&V(r),mt(n,u)}}}class w5 extends Rt{constructor(t){super(),Lt(this,t,null,b5,Ut,{})}}export{w5 as default};
