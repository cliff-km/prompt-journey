import{J as kt,S as Xe,i as et,s as tt,k as W,q as Oe,a as Se,l as H,m as R,r as Me,h as M,c as Be,n as F,K as rt,b as le,G as I,L as ve,H as Ce,M as Wt,I as $e,N as nt,O as it,y as je,z as ze,A as qe,g as he,d as _e,B as We,p as xt,u as wr,v as rr,f as nr,e as wt,P as Xs,Q as Ni,R as Ma,T as nn,U as Mp,V as Kn,W as Bn,X as Pp,Y as rw,Z as Cs,_ as kp,$ as Jn,o as nw,a0 as iw,a1 as ki,a2 as aw}from"../chunks/index.10b19d9d.js";import{w as or,d as yu}from"../chunks/index.34e9b34f.js";var mt=(t=>(t.Circle="circle",t.Ring="ring",t.Bars="bars",t.Embed="embed",t.Pie="pie",t))(mt||{}),yr=(t=>(t.Build="build",t.Concept="concept",t.History="history",t))(yr||{}),$n=(t=>(t.List="list",t.Map="map",t))($n||{});const Bl="appStage";function uw(){const t=or(yr.Build),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Bl]||yr.Build),{subscribe:e,update:a=>{!a||!i||(localStorage[Bl]=a,r(a))},get:()=>kt(t),delete:()=>{i&&(delete localStorage[Bl],r(yr.Build))}}}const hf=uw();function sw(t){let e,r,n,i,a,o,s,l,p,f,h;return{c(){e=W("div"),r=W("button"),n=Oe("Build"),i=Se(),a=W("button"),o=Oe("Concept"),s=Se(),l=W("button"),p=Oe("History"),this.h()},l(d){e=H(d,"DIV",{class:!0});var g=R(e);r=H(g,"BUTTON",{class:!0});var b=R(r);n=Me(b,"Build"),b.forEach(M),i=Be(g),a=H(g,"BUTTON",{class:!0});var v=R(a);o=Me(v,"Concept"),v.forEach(M),s=Be(g),l=H(g,"BUTTON",{class:!0});var _=R(l);p=Me(_,"History"),_.forEach(M),g.forEach(M),this.h()},h(){F(r,"class","btn btn-sm"),rt(r,"btn-active",t[0]===yr.Build),F(a,"class","btn btn-sm"),rt(a,"btn-active",t[0]===yr.Concept),F(l,"class","btn btn-sm"),rt(l,"btn-active",t[0]===yr.History),F(e,"class","btn-group btn-group-horizontal p-2")},m(d,g){le(d,e,g),I(e,r),I(r,n),I(e,i),I(e,a),I(a,o),I(e,s),I(e,l),I(l,p),f||(h=[ve(r,"click",t[2]),ve(a,"click",t[3]),ve(l,"click",t[4])],f=!0)},p(d,[g]){g&1&&rt(r,"btn-active",d[0]===yr.Build),g&1&&rt(a,"btn-active",d[0]===yr.Concept),g&1&&rt(l,"btn-active",d[0]===yr.History)},i:Ce,o:Ce,d(d){d&&M(e),f=!1,Wt(h)}}}function ow(t,e,r){let n;$e(t,hf,l=>r(0,n=l));function i(l){hf.update(l)}return[n,i,()=>i(yr.Build),()=>i(yr.Concept),()=>i(yr.History)]}class lw extends Xe{constructor(e){super(),et(this,e,ow,sw,tt,{})}}function fw(t){let e,r,n,i;return{c(){e=nt("svg"),r=nt("rect"),n=nt("rect"),i=nt("rect"),this.h()},l(a){e=it(a,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var o=R(e);r=it(o,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),R(r).forEach(M),n=it(o,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),R(n).forEach(M),i=it(o,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),R(i).forEach(M),o.forEach(M),this.h()},h(){F(r,"x","5"),F(r,"y","12"),F(r,"width","40"),F(r,"height","4"),F(r,"fill","rgba(255,255,255, 0.7)"),F(n,"x","5"),F(n,"y","23"),F(n,"width","30"),F(n,"height","4"),F(n,"fill","rgba(255,255,255, 0.7)"),F(i,"x","5"),F(i,"y","34"),F(i,"width","35"),F(i,"height","4"),F(i,"fill","rgba(255,255,255, 0.7)"),F(e,"xmlns","http://www.w3.org/2000/svg"),F(e,"fill","rgba(255,255,255, 0.7)"),F(e,"class","h-6 w-6"),F(e,"viewBox","0 0 50 50")},m(a,o){le(a,e,o),I(e,r),I(e,n),I(e,i)},p:Ce,i:Ce,o:Ce,d(a){a&&M(e)}}}class cw extends Xe{constructor(e){super(),et(this,e,null,fw,tt,{})}}function hw(t){let e,r;return{c(){e=nt("svg"),r=nt("circle"),this.h()},l(n){e=it(n,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var i=R(e);r=it(i,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(r).forEach(M),i.forEach(M),this.h()},h(){F(r,"cx","25"),F(r,"cy","25"),F(r,"r","20"),F(r,"fill","rgba(255,255,255, 0.7)"),F(e,"xmlns","http://www.w3.org/2000/svg"),F(e,"fill","rgba(255,255,255, 0.7)"),F(e,"class","h-6 w-6"),F(e,"viewBox","0 0 50 50")},m(n,i){le(n,e,i),I(e,r)},p:Ce,i:Ce,o:Ce,d(n){n&&M(e)}}}class dw extends Xe{constructor(e){super(),et(this,e,null,hw,tt,{})}}function pw(t){let e,r,n,i,a,o;return{c(){e=nt("svg"),r=nt("circle"),n=nt("circle"),i=nt("circle"),a=nt("circle"),o=nt("circle"),this.h()},l(s){e=it(s,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var l=R(e);r=it(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(r).forEach(M),n=it(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(n).forEach(M),i=it(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(i).forEach(M),a=it(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(a).forEach(M),o=it(l,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(o).forEach(M),l.forEach(M),this.h()},h(){F(r,"cx","20"),F(r,"cy","80"),F(r,"r","5"),F(r,"fill","rgba(255,255,255, 0.7)"),F(n,"cx","40"),F(n,"cy","40"),F(n,"r","5"),F(n,"fill","rgba(255,255,255, 0.7)"),F(i,"cx","70"),F(i,"cy","20"),F(i,"r","5"),F(i,"fill","rgba(255,255,255, 0.7)"),F(a,"cx","80"),F(a,"cy","60"),F(a,"r","5"),F(a,"fill","rgba(255,255,255, 0.7)"),F(o,"cx","60"),F(o,"cy","75"),F(o,"r","5"),F(o,"fill","rgba(255,255,255, 0.7)"),F(e,"xmlns","http://www.w3.org/2000/svg"),F(e,"fill","rgba(255,255,255, 0.7)"),F(e,"class","h-6 w-6"),F(e,"viewBox","0 0 100 100")},m(s,l){le(s,e,l),I(e,r),I(e,n),I(e,i),I(e,a),I(e,o)},p:Ce,i:Ce,o:Ce,d(s){s&&M(e)}}}class Tp extends Xe{constructor(e){super(),et(this,e,null,pw,tt,{})}}const Ol="selectedPrompt";function gw(){const t=or(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Ol]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[Ol]=a,r(a))},get:()=>kt(t),delete:()=>{i&&(delete localStorage[Ol],r(""))}}}const Qi=gw();function vw(){const t=or({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith("prompt_")){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=kt(t),p={...s[a]||{},...o};i&&(localStorage[`prompt_${a}`]=JSON.stringify(p));const f={...s,[a]:p};r(f)},get:a=>kt(t)[a],delete:a=>{i&&delete localStorage[`prompt_${a}`];const o={...kt(t)};delete o[a],r(o)}}}const du=vw(),mw=yu(du,t=>Object.entries(kt(du))),cs="activePrompt";function Nr(t,e,r,n=1){return{id:t,text:e,barWeight:n,parsedWeight:r}}function m0(){return{0:Nr(0,"Magic potion in a mystical bottle",1),1:Nr(1,"A crystalline decanter",1),2:Nr(2,"An ornate tequila bottle",1),3:Nr(3,"An antique sake bottle",1),4:Nr(4,"A colorful perfume bottle",1),5:Nr(5,"A glass vase full of vibrant flowers",1),6:Nr(6,"A minimalist glass tea kettle",1),7:Nr(7,"Chihuly glass art",1),8:Nr(8,"A fine wine bottle",1),9:Nr(9,"A gourmet vinegar bottle",1),10:Nr(10,"A stunning fishbowl",1),11:Nr(11,"A striking piece of tourmaline",1),12:Nr(12,"A finely cut piece of sapphire",1),13:Nr(13,"Iittala glass art",1)}}function Bi(t,e=mt.Pie){return{weightedPrompts:t||{},weightMode:e,pieAngles:{},ringAngles:{},ringStartAngle:0,ringReverse:!1,ringWeightScaling:2,ringExponentialScaling:!0,circleAngles:{},circleMarker:[270,.33],circleWeightScaling:2,circleExponentialScaling:!0,embedWeightScaling:2,embedExponentialScaling:!0,embedClusters:0,embedPromptLimit:Object.keys(t).length}}function _w(){const t=or({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",a=i&&localStorage[cs]?JSON.parse(localStorage[cs]):Bi(m0());return r({...Bi({}),...a}),{subscribe:e,update:o=>{const s=Qi.get();s&&du.update(s,o),!(!o||!i)&&(localStorage[cs]=JSON.stringify(o),r({...Bi({}),...o}))},get:()=>kt(t),delete:()=>{i&&(delete localStorage[cs],r(Bi(m0())))}}}const ot=_w();function bw(t){let e,r,n,i,a,o,s,l,p,f,h,d;return n=new cw({}),o=new dw({}),p=new Tp({}),{c(){e=W("div"),r=W("button"),je(n.$$.fragment),i=Se(),a=W("button"),je(o.$$.fragment),s=Se(),l=W("button"),je(p.$$.fragment),this.h()},l(g){e=H(g,"DIV",{class:!0});var b=R(e);r=H(b,"BUTTON",{class:!0});var v=R(r);ze(n.$$.fragment,v),v.forEach(M),i=Be(b),a=H(b,"BUTTON",{class:!0});var _=R(a);ze(o.$$.fragment,_),_.forEach(M),s=Be(b),l=H(b,"BUTTON",{class:!0});var D=R(l);ze(p.$$.fragment,D),D.forEach(M),b.forEach(M),this.h()},h(){F(r,"class","btn btn-sm"),rt(r,"btn-active",t[0].weightMode===mt.Bars),F(a,"class","btn btn-sm"),rt(a,"btn-active",t[0].weightMode===mt.Circle||t[0].weightMode===mt.Pie||t[0].weightMode===mt.Ring),F(l,"class","btn btn-sm"),rt(l,"btn-active",t[0].weightMode===mt.Embed),F(e,"class","btn-group btn-group-horizontal w-full flex justify-end p-2")},m(g,b){le(g,e,b),I(e,r),qe(n,r,null),I(e,i),I(e,a),qe(o,a,null),I(e,s),I(e,l),qe(p,l,null),f=!0,h||(d=[ve(r,"click",t[2]),ve(a,"click",t[3]),ve(l,"click",t[4])],h=!0)},p(g,[b]){(!f||b&1)&&rt(r,"btn-active",g[0].weightMode===mt.Bars),(!f||b&1)&&rt(a,"btn-active",g[0].weightMode===mt.Circle||g[0].weightMode===mt.Pie||g[0].weightMode===mt.Ring),(!f||b&1)&&rt(l,"btn-active",g[0].weightMode===mt.Embed)},i(g){f||(he(n.$$.fragment,g),he(o.$$.fragment,g),he(p.$$.fragment,g),f=!0)},o(g){_e(n.$$.fragment,g),_e(o.$$.fragment,g),_e(p.$$.fragment,g),f=!1},d(g){g&&M(e),We(n),We(o),We(p),h=!1,Wt(d)}}}function Dw(t,e,r){let n;$e(t,ot,l=>r(0,n=l));function i(l){const p={...n,weightMode:l};ot.update(p)}return[n,i,()=>i(mt.Bars),()=>i(mt.Pie),()=>i(mt.Embed)]}class yw extends Xe{constructor(e){super(),et(this,e,Dw,bw,tt,{})}}function ww(t){let e,r,n,i;return{c(){e=nt("svg"),r=nt("path"),n=nt("path"),i=nt("path"),this.h()},l(a){e=it(a,"svg",{xmlns:!0,class:!0,viewBox:!0});var o=R(e);r=it(o,"path",{d:!0,fill:!0}),R(r).forEach(M),n=it(o,"path",{d:!0,fill:!0}),R(n).forEach(M),i=it(o,"path",{d:!0,fill:!0}),R(i).forEach(M),o.forEach(M),this.h()},h(){F(r,"d","M50 50 L50 10 A40 40 0 0 1 90 50 z"),F(r,"fill","rgba(255,255,255, 0.7)"),F(n,"d","M50 50 L90 50 A40 40 0 0 1 50 90 z"),F(n,"fill","rgba(255,255,255, 0.3)"),F(i,"d","M50 50 L50 90 A40 40 0 0 1 10 50 z"),F(i,"fill","rgba(255,255,255, 0.9)"),F(e,"xmlns","http://www.w3.org/2000/svg"),F(e,"class","h-5 w-5"),F(e,"viewBox","0 0 100 100")},m(a,o){le(a,e,o),I(e,r),I(e,n),I(e,i)},p:Ce,i:Ce,o:Ce,d(a){a&&M(e)}}}class Ew extends Xe{constructor(e){super(),et(this,e,null,ww,tt,{})}}function Aw(t){let e,r,n;return{c(){e=nt("svg"),r=nt("circle"),n=nt("circle"),this.h()},l(i){e=it(i,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var a=R(e);r=it(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),R(r).forEach(M),n=it(a,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),R(n).forEach(M),a.forEach(M),this.h()},h(){F(r,"cx","25"),F(r,"cy","25"),F(r,"r","20"),F(r,"stroke","rgba(255,255,255, 0.7)"),F(r,"stroke-width","4"),F(r,"fill","none"),F(n,"cx","25"),F(n,"cy","25"),F(n,"r","4"),F(n,"stroke","rgba(255,255,255, 0.7)"),F(n,"stroke-width","1"),F(n,"fill","rgba(255,255,255, 0.7)"),F(e,"xmlns","http://www.w3.org/2000/svg"),F(e,"fill","rgba(255,255,255, 0.7)"),F(e,"class","h-5 w-5"),F(e,"viewBox","0 0 50 50")},m(i,a){le(i,e,a),I(e,r),I(e,n)},p:Ce,i:Ce,o:Ce,d(i){i&&M(e)}}}class Cw extends Xe{constructor(e){super(),et(this,e,null,Aw,tt,{})}}function Fw(t){let e,r,n,i,a;return{c(){e=nt("svg"),r=nt("mask"),n=nt("circle"),i=nt("path"),a=nt("circle"),this.h()},l(o){e=it(o,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var s=R(e);r=it(s,"mask",{id:!0});var l=R(r);n=it(l,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),R(n).forEach(M),i=it(l,"path",{d:!0,stroke:!0,"stroke-width":!0,fill:!0}),R(i).forEach(M),l.forEach(M),a=it(s,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,mask:!0}),R(a).forEach(M),s.forEach(M),this.h()},h(){F(n,"cx","25"),F(n,"cy","25"),F(n,"r","20"),F(n,"stroke","white"),F(n,"stroke-width","6"),F(n,"fill","none"),F(i,"d","M40,22 L45,27 L50,22"),F(i,"stroke","black"),F(i,"stroke-width","4"),F(i,"fill","none"),F(r,"id","hole"),F(a,"cx","25"),F(a,"cy","25"),F(a,"r","20"),F(a,"stroke","rgba(255,255,255, 0.7)"),F(a,"stroke-width","4"),F(a,"fill","none"),F(a,"mask","url(#hole)"),F(e,"xmlns","http://www.w3.org/2000/svg"),F(e,"fill","rgba(255,255,255, 0.7)"),F(e,"class","h-5 w-5"),F(e,"viewBox","0 0 50 50")},m(o,s){le(o,e,s),I(e,r),I(r,n),I(r,i),I(e,a)},p:Ce,i:Ce,o:Ce,d(o){o&&M(e)}}}class Sw extends Xe{constructor(e){super(),et(this,e,null,Fw,tt,{})}}function Bw(t){let e,r,n,i,a,o,s,l,p,f,h,d;return n=new Ew({}),o=new Cw({}),p=new Sw({}),{c(){e=W("div"),r=W("button"),je(n.$$.fragment),i=Se(),a=W("button"),je(o.$$.fragment),s=Se(),l=W("button"),je(p.$$.fragment),this.h()},l(g){e=H(g,"DIV",{class:!0});var b=R(e);r=H(b,"BUTTON",{class:!0});var v=R(r);ze(n.$$.fragment,v),v.forEach(M),i=Be(b),a=H(b,"BUTTON",{class:!0});var _=R(a);ze(o.$$.fragment,_),_.forEach(M),s=Be(b),l=H(b,"BUTTON",{class:!0});var D=R(l);ze(p.$$.fragment,D),D.forEach(M),b.forEach(M),this.h()},h(){F(r,"class","btn btn-xs"),rt(r,"btn-active",t[0].weightMode===mt.Pie),F(a,"class","btn btn-xs"),rt(a,"btn-active",t[0].weightMode===mt.Circle),F(l,"class","btn btn-xs"),rt(l,"btn-active",t[0].weightMode===mt.Ring),F(e,"class","btn-group btn-group-horizontal w-full flex justify-center p-1")},m(g,b){le(g,e,b),I(e,r),qe(n,r,null),I(e,i),I(e,a),qe(o,a,null),I(e,s),I(e,l),qe(p,l,null),f=!0,h||(d=[ve(r,"click",t[2]),ve(a,"click",t[3]),ve(l,"click",t[4])],h=!0)},p(g,[b]){(!f||b&1)&&rt(r,"btn-active",g[0].weightMode===mt.Pie),(!f||b&1)&&rt(a,"btn-active",g[0].weightMode===mt.Circle),(!f||b&1)&&rt(l,"btn-active",g[0].weightMode===mt.Ring)},i(g){f||(he(n.$$.fragment,g),he(o.$$.fragment,g),he(p.$$.fragment,g),f=!0)},o(g){_e(n.$$.fragment,g),_e(o.$$.fragment,g),_e(p.$$.fragment,g),f=!1},d(g){g&&M(e),We(n),We(o),We(p),h=!1,Wt(d)}}}function Ow(t,e,r){let n;$e(t,ot,l=>r(0,n=l));function i(l){const p={...n,weightMode:l};ot.update(p)}return[n,i,()=>i(mt.Pie),()=>i(mt.Circle),()=>i(mt.Ring)]}class Mw extends Xe{constructor(e){super(),et(this,e,Ow,Bw,tt,{})}}function df(){return df=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},df.apply(this,arguments)}var Ip={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function tr(t){return typeof t=="number"}function Sn(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function Np(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function xp(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Lp(t){return t&&t.constructor.prototype.isUnit===!0||!1}function Gn(t){return typeof t=="string"}var Xt=Array.isArray;function Jr(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function Fs(t){return Array.isArray(t)||Jr(t)}function Pw(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function kw(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function Tw(t){return t&&t.constructor.prototype.isRange===!0||!1}function Rf(t){return t&&t.constructor.prototype.isIndex===!0||!1}function Iw(t){return typeof t=="boolean"}function Nw(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function xw(t){return t&&t.constructor.prototype.isHelp===!0||!1}function Lw(t){return typeof t=="function"}function Rw(t){return t instanceof Date}function Uw(t){return t instanceof RegExp}function Vw(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!Np(t)&&!xp(t))}function jw(t){return t===null}function Uf(t){return t===void 0}function zw(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function qw(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ww(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Hw(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function Gw(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Kw(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function $w(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Yw(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function Zw(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function Jw(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function Qw(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function Xw(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function e2(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function t2(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function r2(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function n2(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function i2(t){return t&&t.constructor.prototype.isChain===!0||!1}function hu(t){var e=typeof t;return e==="object"?t===null?"null":Sn(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Sr(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(r){return Sr(r)});if(t instanceof Date)return new Date(t.valueOf());if(Sn(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return a2(t,Sr)}function a2(t,e){var r={};for(var n in t)pu(t,n)&&(r[n]=e(t[n]));return r}function u2(t,e){for(var r in e)pu(e,r)&&(t[r]=e[r]);return t}function Ss(t,e){var r,n,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;n++)if(!Ss(t[n],e[n]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(r in t)if(!(r in e)||!Ss(t[r],e[r]))return!1;for(r in e)if(!(r in t))return!1;return!0}else return t===e}}function pu(t,e){return t&&Object.hasOwnProperty.call(t,e)}function s2(t,e){for(var r={},n=0;n<e.length;n++){var i=e[n],a=t[i];a!==void 0&&(r[i]=a)}return r}var o2=["Matrix","Array"],l2=["number","BigNumber","Fraction"],eo=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Ip)};df(eo,Ip,{MATRIX_OPTIONS:o2,NUMBER_OPTIONS:l2});function Nn(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=f2(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(p){throw p},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){r=r.call(t)},n:function(){var p=r.next();return a=p.done,p},e:function(p){o=!0,s=p},f:function(){try{!a&&r.return!=null&&r.return()}finally{if(o)throw s}}}}function f2(t,e){if(t){if(typeof t=="string")return _0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _0(t,e)}}function _0(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ea(t){return Ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ea(t)}function b0(){return!0}function Fn(){return!1}function _a(){}var D0="Argument is not a typed-function.";function Rp(){function t(G){return Ea(G)==="object"&&G!==null&&G.constructor===Object}var e=[{name:"number",test:function(Z){return typeof Z=="number"}},{name:"string",test:function(Z){return typeof Z=="string"}},{name:"boolean",test:function(Z){return typeof Z=="boolean"}},{name:"Function",test:function(Z){return typeof Z=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(Z){return Z instanceof Date}},{name:"RegExp",test:function(Z){return Z instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(Z){return Z===null}},{name:"undefined",test:function(Z){return Z===void 0}}],r={name:"any",test:b0,isAny:!0},n,i,a=0,o={createCount:0};function s(G){var Z=n.get(G);if(Z)return Z;var ee='Unknown type "'+G+'"',ce=G.toLowerCase(),ue,de=Nn(i),fe;try{for(de.s();!(fe=de.n()).done;)if(ue=fe.value,ue.toLowerCase()===ce){ee+='. Did you mean "'+ue+'" ?';break}}catch(pe){de.e(pe)}finally{de.f()}throw new TypeError(ee)}function l(G){for(var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",ee=Z?s(Z).index:i.length,ce=[],ue=0;ue<G.length;++ue){if(!G[ue]||typeof G[ue].name!="string"||typeof G[ue].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var de=G[ue].name;if(n.has(de))throw new TypeError('Duplicate type name "'+de+'"');ce.push(de),n.set(de,{name:de,test:G[ue].test,isAny:G[ue].isAny,index:ee+ue,conversionsTo:[]})}var fe=i.slice(ee);i=i.slice(0,ee).concat(ce).concat(fe);for(var pe=ee+ce.length;pe<i.length;++pe)n.get(i[pe]).index=pe}function p(){n=new Map,i=[],a=0,l([r],!1)}p(),l(e);function f(){var G,Z=Nn(i),ee;try{for(Z.s();!(ee=Z.n()).done;)G=ee.value,n.get(G).conversionsTo=[]}catch(ce){Z.e(ce)}finally{Z.f()}a=0}function h(G){var Z=i.filter(function(ee){var ce=n.get(ee);return!ce.isAny&&ce.test(G)});return Z.length?Z:["any"]}function d(G){return G&&typeof G=="function"&&"_typedFunctionData"in G}function g(G,Z,ee){if(!d(G))throw new TypeError(D0);var ce=ee&&ee.exact,ue=Array.isArray(Z)?Z.join(","):Z,de=C(ue),fe=_(de);if(!ce||fe in G.signatures){var pe=G._typedFunctionData.signatureMap.get(fe);if(pe)return pe}var Pe=de.length,He;if(ce){He=[];var ct;for(ct in G.signatures)He.push(G._typedFunctionData.signatureMap.get(ct))}else He=G._typedFunctionData.signatures;for(var Ie=0;Ie<Pe;++Ie){var Yt=de[Ie],zt=[],ir=void 0,Zt=Nn(He),Er;try{for(Zt.s();!(Er=Zt.n()).done;){ir=Er.value;var Jt=O(ir.params,Ie);if(!(!Jt||Yt.restParam&&!Jt.restParam)){if(!Jt.hasAny){var Ar=function(){var mr=w(Jt);if(Yt.types.some(function(On){return!mr.has(On.name)}))return"continue"}();if(Ar==="continue")continue}zt.push(ir)}}}catch(mr){Zt.e(mr)}finally{Zt.f()}if(He=zt,He.length===0)break}var pr,gr=Nn(He),gn;try{for(gr.s();!(gn=gr.n()).done;)if(pr=gn.value,pr.params.length<=Pe)return pr}catch(mr){gr.e(mr)}finally{gr.f()}throw new TypeError("Signature not found (signature: "+(G.name||"unnamed")+"("+_(de,", ")+"))")}function b(G,Z,ee){return g(G,Z,ee).implementation}function v(G,Z){var ee=s(Z);if(ee.test(G))return G;var ce=ee.conversionsTo;if(ce.length===0)throw new Error("There are no conversions to "+Z+" defined.");for(var ue=0;ue<ce.length;ue++){var de=s(ce[ue].from);if(de.test(G))return ce[ue].convert(G)}throw new Error("Cannot convert "+G+" to "+Z)}function _(G){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return G.map(function(ee){return ee.name}).join(Z)}function D(G){var Z=G.indexOf("...")===0,ee=Z?G.length>3?G.slice(3):"any":G,ce=ee.split("|").map(function(pe){return s(pe.trim())}),ue=!1,de=Z?"...":"",fe=ce.map(function(pe){return ue=pe.isAny||ue,de+=pe.name+"|",{name:pe.name,typeIndex:pe.index,test:pe.test,isAny:pe.isAny,conversion:null,conversionIndex:-1}});return{types:fe,name:de.slice(0,-1),hasAny:ue,hasConversion:!1,restParam:Z}}function S(G){var Z=G.types.map(function(fe){return fe.name}),ee=J(Z),ce=G.hasAny,ue=G.name,de=ee.map(function(fe){var pe=s(fe.from);return ce=pe.isAny||ce,ue+="|"+fe.from,{name:fe.from,typeIndex:pe.index,test:pe.test,isAny:pe.isAny,conversion:fe,conversionIndex:fe.index}});return{types:G.types.concat(de),name:ue,hasAny:ce,hasConversion:de.length>0,restParam:G.restParam}}function w(G){return G.typeSet||(G.typeSet=new Set,G.types.forEach(function(Z){return G.typeSet.add(Z.name)})),G.typeSet}function C(G){var Z=[];if(typeof G!="string")throw new TypeError("Signatures must be strings");var ee=G.trim();if(ee==="")return Z;for(var ce=ee.split(","),ue=0;ue<ce.length;++ue){var de=D(ce[ue].trim());if(de.restParam&&ue!==ce.length-1)throw new SyntaxError('Unexpected rest parameter "'+ce[ue]+'": only allowed for the last parameter');if(de.types.length===0)return null;Z.push(de)}return Z}function E(G){var Z=Je(G);return Z?Z.restParam:!1}function B(G){if(!G||G.types.length===0)return b0;if(G.types.length===1)return s(G.types[0].name).test;if(G.types.length===2){var Z=s(G.types[0].name).test,ee=s(G.types[1].name).test;return function(de){return Z(de)||ee(de)}}else{var ce=G.types.map(function(ue){return s(ue.name).test});return function(de){for(var fe=0;fe<ce.length;fe++)if(ce[fe](de))return!0;return!1}}}function k(G){var Z,ee,ce;if(E(G)){Z=Ke(G).map(B);var ue=Z.length,de=B(Je(G)),fe=function(Pe){for(var He=ue;He<Pe.length;He++)if(!de(Pe[He]))return!1;return!0};return function(Pe){for(var He=0;He<Z.length;He++)if(!Z[He](Pe[He]))return!1;return fe(Pe)&&Pe.length>=ue+1}}else return G.length===0?function(Pe){return Pe.length===0}:G.length===1?(ee=B(G[0]),function(Pe){return ee(Pe[0])&&Pe.length===1}):G.length===2?(ee=B(G[0]),ce=B(G[1]),function(Pe){return ee(Pe[0])&&ce(Pe[1])&&Pe.length===2}):(Z=G.map(B),function(Pe){for(var He=0;He<Z.length;He++)if(!Z[He](Pe[He]))return!1;return Pe.length===Z.length})}function O(G,Z){return Z<G.length?G[Z]:E(G)?Je(G):null}function x(G,Z){var ee=O(G,Z);return ee?w(ee):new Set}function K(G){return G.conversion===null||G.conversion===void 0}function $(G,Z){var ee=new Set;return G.forEach(function(ce){var ue=x(ce.params,Z),de,fe=Nn(ue),pe;try{for(fe.s();!(pe=fe.n()).done;)de=pe.value,ee.add(de)}catch(Pe){fe.e(Pe)}finally{fe.f()}}),ee.has("any")?["any"]:Array.from(ee)}function X(G,Z,ee){var ce,ue,de=G||"unnamed",fe=ee,pe,Pe=function(){var Zt=[];if(fe.forEach(function(Jt){var Ar=O(Jt.params,pe),pr=B(Ar);(pe<Jt.params.length||E(Jt.params))&&pr(Z[pe])&&Zt.push(Jt)}),Zt.length===0){if(ue=$(fe,pe),ue.length>0){var Er=h(Z[pe]);return ce=new TypeError("Unexpected type of argument in function "+de+" (expected: "+ue.join(" or ")+", actual: "+Er.join(" | ")+", index: "+pe+")"),ce.data={category:"wrongType",fn:de,index:pe,actual:Er,expected:ue},{v:ce}}}else fe=Zt};for(pe=0;pe<Z.length;pe++){var He=Pe();if(Ea(He)==="object")return He.v}var ct=fe.map(function(ir){return E(ir.params)?1/0:ir.params.length});if(Z.length<Math.min.apply(null,ct))return ue=$(fe,pe),ce=new TypeError("Too few arguments in function "+de+" (expected: "+ue.join(" or ")+", index: "+Z.length+")"),ce.data={category:"tooFewArgs",fn:de,index:Z.length,expected:ue},ce;var Ie=Math.max.apply(null,ct);if(Z.length>Ie)return ce=new TypeError("Too many arguments in function "+de+" (expected: "+Ie+", actual: "+Z.length+")"),ce.data={category:"tooManyArgs",fn:de,index:Z.length,expectedLength:Ie},ce;for(var Yt=[],zt=0;zt<Z.length;++zt)Yt.push(h(Z[zt]).join("|"));return ce=new TypeError('Arguments of type "'+Yt.join(", ")+'" do not match any of the defined signatures of function '+de+"."),ce.data={category:"mismatch",actual:Yt},ce}function j(G){for(var Z=i.length+1,ee=0;ee<G.types.length;ee++)K(G.types[ee])&&(Z=Math.min(Z,G.types[ee].typeIndex));return Z}function U(G){for(var Z=a+1,ee=0;ee<G.types.length;ee++)K(G.types[ee])||(Z=Math.min(Z,G.types[ee].conversionIndex));return Z}function z(G,Z){if(G.hasAny){if(!Z.hasAny)return 1}else if(Z.hasAny)return-1;if(G.restParam){if(!Z.restParam)return 1}else if(Z.restParam)return-1;if(G.hasConversion){if(!Z.hasConversion)return 1}else if(Z.hasConversion)return-1;var ee=j(G)-j(Z);if(ee<0)return-1;if(ee>0)return 1;var ce=U(G)-U(Z);return ce<0?-1:ce>0?1:0}function V(G,Z){var ee=G.params,ce=Z.params,ue=Je(ee),de=Je(ce),fe=E(ee),pe=E(ce);if(fe&&ue.hasAny){if(!pe||!de.hasAny)return 1}else if(pe&&de.hasAny)return-1;var Pe=0,He=0,ct,Ie=Nn(ee),Yt;try{for(Ie.s();!(Yt=Ie.n()).done;)ct=Yt.value,ct.hasAny&&++Pe,ct.hasConversion&&++He}catch(Un){Ie.e(Un)}finally{Ie.f()}var zt=0,ir=0,Zt=Nn(ce),Er;try{for(Zt.s();!(Er=Zt.n()).done;)ct=Er.value,ct.hasAny&&++zt,ct.hasConversion&&++ir}catch(Un){Zt.e(Un)}finally{Zt.f()}if(Pe!==zt)return Pe-zt;if(fe&&ue.hasConversion){if(!pe||!de.hasConversion)return 1}else if(pe&&de.hasConversion)return-1;if(He!==ir)return He-ir;if(fe){if(!pe)return 1}else if(pe)return-1;var Jt=(ee.length-ce.length)*(fe?-1:1);if(Jt!==0)return Jt;for(var Ar=[],pr=0,gr=0;gr<ee.length;++gr){var gn=z(ee[gr],ce[gr]);Ar.push(gn),pr+=gn}if(pr!==0)return pr;for(var mr,On=0,Xn=Ar;On<Xn.length;On++)if(mr=Xn[On],mr!==0)return mr;return 0}function J(G){if(G.length===0)return[];var Z=G.map(s);G.length>1&&Z.sort(function(Pe,He){return Pe.index-He.index});var ee=Z[0].conversionsTo;if(G.length===1)return ee;ee=ee.concat([]);for(var ce=new Set(G),ue=1;ue<Z.length;++ue){var de=void 0,fe=Nn(Z[ue].conversionsTo),pe;try{for(fe.s();!(pe=fe.n()).done;)de=pe.value,ce.has(de.from)||(ee.push(de),ce.add(de.from))}catch(Pe){fe.e(Pe)}finally{fe.f()}}return ee}function ae(G,Z){var ee=Z;if(G.some(function(pe){return pe.hasConversion})){var ce=E(G),ue=G.map(ne);ee=function(){for(var Pe=[],He=ce?arguments.length-1:arguments.length,ct=0;ct<He;ct++)Pe[ct]=ue[ct](arguments[ct]);return ce&&(Pe[He]=arguments[He].map(ue[He])),Z.apply(this,Pe)}}var de=ee;if(E(G)){var fe=G.length-1;de=function(){return ee.apply(this,Le(arguments,0,fe).concat([Le(arguments,fe)]))}}return de}function ne(G){var Z,ee,ce,ue,de=[],fe=[];switch(G.types.forEach(function(pe){pe.conversion&&(de.push(s(pe.conversion.from).test),fe.push(pe.conversion.convert))}),fe.length){case 0:return function(Pe){return Pe};case 1:return Z=de[0],ce=fe[0],function(Pe){return Z(Pe)?ce(Pe):Pe};case 2:return Z=de[0],ee=de[1],ce=fe[0],ue=fe[1],function(Pe){return Z(Pe)?ce(Pe):ee(Pe)?ue(Pe):Pe};default:return function(Pe){for(var He=0;He<fe.length;He++)if(de[He](Pe))return fe[He](Pe);return Pe}}}function se(G){function Z(ee,ce,ue){if(ce<ee.length){var de=ee[ce],fe=[];if(de.restParam){var pe=de.types.filter(K);pe.length<de.types.length&&fe.push({types:pe,name:"..."+pe.map(function(Pe){return Pe.name}).join("|"),hasAny:pe.some(function(Pe){return Pe.isAny}),hasConversion:!1,restParam:!0}),fe.push(de)}else fe=de.types.map(function(Pe){return{types:[Pe],name:Pe.name,hasAny:Pe.isAny,hasConversion:Pe.conversion,restParam:!1}});return Et(fe,function(Pe){return Z(ee,ce+1,ue.concat([Pe]))})}else return[ue]}return Z(G,0,[])}function De(G,Z){for(var ee=Math.max(G.length,Z.length),ce=0;ce<ee;ce++){var ue=x(G,ce),de=x(Z,ce),fe=!1,pe=void 0,Pe=Nn(de),He;try{for(Pe.s();!(He=Pe.n()).done;)if(pe=He.value,ue.has(pe)){fe=!0;break}}catch(ir){Pe.e(ir)}finally{Pe.f()}if(!fe)return!1}var ct=G.length,Ie=Z.length,Yt=E(G),zt=E(Z);return Yt?zt?ct===Ie:Ie>=ct:zt?ct>=Ie:ct===Ie}function we(G){return G.map(function(Z){return Tt(Z)?Pt(Z.referToSelf.callback):dr(Z)?at(Z.referTo.references,Z.referTo.callback):Z})}function Fe(G,Z,ee){var ce=[],ue,de=Nn(G),fe;try{for(de.s();!(fe=de.n()).done;){ue=fe.value;var pe=ee[ue];if(typeof pe!="number")throw new TypeError('No definition for referenced signature "'+ue+'"');if(pe=Z[pe],typeof pe!="function")return!1;ce.push(pe)}}catch(Pe){de.e(Pe)}finally{de.f()}return ce}function xe(G,Z,ee){for(var ce=we(G),ue=new Array(ce.length).fill(!1),de=!0;de;){de=!1;for(var fe=!0,pe=0;pe<ce.length;++pe)if(!ue[pe]){var Pe=ce[pe];if(Tt(Pe))ce[pe]=Pe.referToSelf.callback(ee),ce[pe].referToSelf=Pe.referToSelf,ue[pe]=!0,fe=!1;else if(dr(Pe)){var He=Fe(Pe.referTo.references,ce,Z);He?(ce[pe]=Pe.referTo.callback.apply(this,He),ce[pe].referTo=Pe.referTo,ue[pe]=!0,fe=!1):de=!0}}if(fe&&de)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return ce}function ke(G){var Z=/\bthis(\(|\.signatures\b)/;Object.keys(G).forEach(function(ee){var ce=G[ee];if(Z.test(ce.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Ue(G,Z){if(o.createCount++,Object.keys(Z).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&ke(Z);var ee=[],ce=[],ue={},de=[],fe,pe=function(){if(!Object.prototype.hasOwnProperty.call(Z,fe))return"continue";var lr=C(fe);if(!lr)return"continue";ee.forEach(function(mn){if(De(mn,lr))throw new TypeError('Conflicting signatures "'+_(mn)+'" and "'+_(lr)+'".')}),ee.push(lr);var Kr=ce.length;ce.push(Z[fe]);var Vi=lr.map(S),ti=void 0,zn=Nn(se(Vi)),ji;try{for(zn.s();!(ji=zn.n()).done;){ti=ji.value;var Mn=_(ti);de.push({params:ti,name:Mn,fn:Kr}),ti.every(function(mn){return!mn.hasConversion})&&(ue[Mn]=Kr)}}catch(mn){zn.e(mn)}finally{zn.f()}};for(fe in Z)var Pe=pe();de.sort(V);var He=xe(ce,ue,jn),ct;for(ct in ue)Object.prototype.hasOwnProperty.call(ue,ct)&&(ue[ct]=He[ue[ct]]);for(var Ie=[],Yt=new Map,zt=0,ir=de;zt<ir.length;zt++)ct=ir[zt],Yt.has(ct.name)||(ct.fn=He[ct.fn],Ie.push(ct),Yt.set(ct.name,ct));for(var Zt=Ie[0]&&Ie[0].params.length<=2&&!E(Ie[0].params),Er=Ie[1]&&Ie[1].params.length<=2&&!E(Ie[1].params),Jt=Ie[2]&&Ie[2].params.length<=2&&!E(Ie[2].params),Ar=Ie[3]&&Ie[3].params.length<=2&&!E(Ie[3].params),pr=Ie[4]&&Ie[4].params.length<=2&&!E(Ie[4].params),gr=Ie[5]&&Ie[5].params.length<=2&&!E(Ie[5].params),gn=Zt&&Er&&Jt&&Ar&&pr&&gr,mr=0;mr<Ie.length;++mr)Ie[mr].test=k(Ie[mr].params);for(var On=Zt?B(Ie[0].params[0]):Fn,Xn=Er?B(Ie[1].params[0]):Fn,Un=Jt?B(Ie[2].params[0]):Fn,Vn=Ar?B(Ie[3].params[0]):Fn,ta=pr?B(Ie[4].params[0]):Fn,Ri=gr?B(Ie[5].params[0]):Fn,Ia=Zt?B(Ie[0].params[1]):Fn,Mr=Er?B(Ie[1].params[1]):Fn,ar=Jt?B(Ie[2].params[1]):Fn,Na=Ar?B(Ie[3].params[1]):Fn,gi=pr?B(Ie[4].params[1]):Fn,vn=gr?B(Ie[5].params[1]):Fn,ei=0;ei<Ie.length;++ei)Ie[ei].implementation=ae(Ie[ei].params,Ie[ei].fn);var Ui=Zt?Ie[0].implementation:_a,xa=Er?Ie[1].implementation:_a,La=Jt?Ie[2].implementation:_a,ra=Ar?Ie[3].implementation:_a,Ra=pr?Ie[4].implementation:_a,Ua=gr?Ie[5].implementation:_a,Va=Zt?Ie[0].params.length:-1,ja=Er?Ie[1].params.length:-1,za=Jt?Ie[2].params.length:-1,qa=Ar?Ie[3].params.length:-1,vi=pr?Ie[4].params.length:-1,Wa=gr?Ie[5].params.length:-1,mi=gn?6:0,Ha=Ie.length,Ga=Ie.map(function(Cr){return Cr.test}),Ka=Ie.map(function(Cr){return Cr.implementation}),na=function(){for(var lr=mi;lr<Ha;lr++)if(Ga[lr](arguments))return Ka[lr].apply(this,arguments);return o.onMismatch(G,arguments,Ie)};function jn(Cr,lr){return arguments.length===Va&&On(Cr)&&Ia(lr)?Ui.apply(this,arguments):arguments.length===ja&&Xn(Cr)&&Mr(lr)?xa.apply(this,arguments):arguments.length===za&&Un(Cr)&&ar(lr)?La.apply(this,arguments):arguments.length===qa&&Vn(Cr)&&Na(lr)?ra.apply(this,arguments):arguments.length===vi&&ta(Cr)&&gi(lr)?Ra.apply(this,arguments):arguments.length===Wa&&Ri(Cr)&&vn(lr)?Ua.apply(this,arguments):na.apply(this,arguments)}try{Object.defineProperty(jn,"name",{value:G})}catch{}return jn.signatures=ue,jn._typedFunctionData={signatures:Ie,signatureMap:Yt},jn}function Ye(G,Z,ee){throw X(G,Z,ee)}function Ke(G){return Le(G,0,G.length-1)}function Je(G){return G[G.length-1]}function Le(G,Z,ee){return Array.prototype.slice.call(G,Z,ee)}function Dt(G,Z){for(var ee=0;ee<G.length;ee++)if(Z(G[ee]))return G[ee]}function Et(G,Z){return Array.prototype.concat.apply([],G.map(Z))}function ht(){var G=Ke(arguments).map(function(ee){return _(C(ee))}),Z=Je(arguments);if(typeof Z!="function")throw new TypeError("Callback function expected as last argument");return at(G,Z)}function at(G,Z){return{referTo:{references:G,callback:Z}}}function Pt(G){if(typeof G!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:G}}}function dr(G){return G&&Ea(G.referTo)==="object"&&Array.isArray(G.referTo.references)&&typeof G.referTo.callback=="function"}function Tt(G){return G&&Ea(G.referToSelf)==="object"&&typeof G.referToSelf.callback=="function"}function Te(G,Z){if(!G)return Z;if(Z&&Z!==G){var ee=new Error("Function names do not match (expected: "+G+", actual: "+Z+")");throw ee.data={actual:Z,expected:G},ee}return G}function Ve(G){var Z;for(var ee in G)Object.prototype.hasOwnProperty.call(G,ee)&&(d(G[ee])||typeof G[ee].signature=="string")&&(Z=Te(Z,G[ee].name));return Z}function Ot(G,Z){var ee;for(ee in Z)if(Object.prototype.hasOwnProperty.call(Z,ee)){if(ee in G&&Z[ee]!==G[ee]){var ce=new Error('Signature "'+ee+'" is defined twice');throw ce.data={signature:ee,sourceFunction:Z[ee],destFunction:G[ee]},ce}G[ee]=Z[ee]}}var Ft=o;o=function(Z){for(var ee=typeof Z=="string",ce=ee?1:0,ue=ee?Z:"",de={},fe=ce;fe<arguments.length;++fe){var pe=arguments[fe],Pe={},He=void 0;if(typeof pe=="function"?(He=pe.name,typeof pe.signature=="string"?Pe[pe.signature]=pe:d(pe)&&(Pe=pe.signatures)):t(pe)&&(Pe=pe,ee||(He=Ve(pe))),Object.keys(Pe).length===0){var ct=new TypeError("Argument to 'typed' at index "+fe+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw ct.data={index:fe,argument:pe},ct}ee||(ue=Te(ue,He)),Ot(de,Pe)}return Ue(ue||"",de)},o.create=Rp,o.createCount=Ft.createCount,o.onMismatch=Ye,o.throwMismatchError=Ye,o.createError=X,o.clear=p,o.clearConversions=f,o.addTypes=l,o._findType=s,o.referTo=ht,o.referToSelf=Pt,o.convert=v,o.findSignature=g,o.find=b,o.isTypedFunction=d,o.warnAgainstDeprecatedThis=!0,o.addType=function(G,Z){var ee="any";Z!==!1&&n.has("Object")&&(ee="Object"),o.addTypes([G],ee)};function $t(G){if(!G||typeof G.from!="string"||typeof G.to!="string"||typeof G.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(G.to===G.from)throw new SyntaxError('Illegal to define conversion from "'+G.from+'" to itself.')}return o.addConversion=function(G){$t(G);var Z=s(G.to);if(Z.conversionsTo.every(function(ee){return ee.from!==G.from}))Z.conversionsTo.push({from:G.from,convert:G.convert,index:a++});else throw new Error('There is already a conversion from "'+G.from+'" to "'+Z.name+'"')},o.addConversions=function(G){G.forEach(o.addConversion)},o.removeConversion=function(G){$t(G);var Z=s(G.to),ee=Dt(Z.conversionsTo,function(ue){return ue.from===G.from});if(!ee)throw new Error("Attempt to remove nonexistent conversion from "+G.from+" to "+G.to);if(ee.convert!==G.convert)throw new Error("Conversion to remove does not match existing conversion");var ce=Z.conversionsTo.indexOf(ee);Z.conversionsTo.splice(ce,1)},o.resolve=function(G,Z){if(!d(G))throw new TypeError(D0);for(var ee=G._typedFunctionData.signatures,ce=0;ce<ee.length;++ce)if(ee[ce].test(Z))return ee[ce];return null},o}const y0=Rp();function Br(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function Ml(t,e,r){var n={2:"0b",8:"0o",16:"0x"},i=n[e],a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Br(r))throw new Error("size must be an integer");if(t>2**(r-1)-1||t<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!Br(t))throw new Error("Value must be an integer");t<0&&(t=t+2**r),a="i".concat(r)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(i).concat(t.toString(e)).concat(a)}function pf(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var r="auto",n,i;if(e&&(e.notation&&(r=e.notation),tr(e)?n=e:tr(e.precision)&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return h2(t,n);case"exponential":return Up(t,n);case"engineering":return c2(t,n);case"bin":return Ml(t,2,i);case"oct":return Ml(t,8,i);case"hex":return Ml(t,16,i);case"auto":return d2(t,n,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var a=arguments[2],o=arguments[4];return a!=="."?a+o:o});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function to(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],i=parseFloat(e[4]||"0"),a=n.indexOf(".");i+=a!==-1?a-1:n.length-1;var o=n.replace(".","").replace(/^0*/,function(s){return i-=s.length,""}).replace(/0*$/,"").split("").map(function(s){return parseInt(s)});return o.length===0&&(o.push(0),i++),{sign:r,coefficients:o,exponent:i}}function c2(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=to(t),n=ro(r,e),i=n.exponent,a=n.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(tr(e))for(;e>a.length||i-o+1>a.length;)a.push(0);else for(var s=Math.abs(i-o)-(a.length-1),l=0;l<s;l++)a.push(0);for(var p=Math.abs(i-o),f=1;p>0;)f++,p--;var h=a.slice(f).join(""),d=tr(e)&&h.length||h.match(/[1-9]/)?"."+h:"",g=a.slice(0,f).join("")+d+"e"+(i>=0?"+":"")+o.toString();return n.sign+g}function h2(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=to(t),n=typeof e=="number"?ro(r,r.exponent+1+e):r,i=n.coefficients,a=n.exponent+1,o=a+(e||0);return i.length<o&&(i=i.concat(Ca(o-i.length))),a<0&&(i=Ca(-a+1).concat(i),a=1),a<i.length&&i.splice(a,0,a===0?"0.":"."),n.sign+i.join("")}function Up(t,e){if(isNaN(t)||!isFinite(t))return String(t);var r=to(t),n=e?ro(r,e):r,i=n.coefficients,a=n.exponent;i.length<e&&(i=i.concat(Ca(e-i.length)));var o=i.shift();return n.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function d2(t,e,r){if(isNaN(t)||!isFinite(t))return String(t);var n=r&&r.lowerExp!==void 0?r.lowerExp:-3,i=r&&r.upperExp!==void 0?r.upperExp:5,a=to(t),o=e?ro(a,e):a;if(o.exponent<n||o.exponent>=i)return Up(t,e);var s=o.coefficients,l=o.exponent;s.length<e&&(s=s.concat(Ca(e-s.length))),s=s.concat(Ca(l-s.length+1+(s.length<e?e-s.length:0))),s=Ca(-l).concat(s);var p=l>0?l:0;return p<s.length-1&&s.splice(p+1,0,"."),o.sign+s.join("")}function ro(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var i=n.splice(e,n.length-e);if(i[0]>=5){var a=e-1;for(n[a]++;n[a]===10;)n.pop(),a===0&&(n.unshift(0),r.exponent++,a++),a--,n[a]++}}return r}function Ca(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}function p2(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var g2=Number.EPSILON||2220446049250313e-31;function Bs(t,e,r){if(r==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var n=Math.abs(t-e);return n<g2?!0:n<=Math.max(Math.abs(t),Math.abs(e))*r}return!1}function Pl(t,e,r){var n=t.constructor,i=new n(2),a="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!Br(r))throw new Error("size must be an integer");if(t.greaterThan(i.pow(r-1).sub(1))||t.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(r))),a="i".concat(r)}switch(e){case 2:return"".concat(t.toBinary()).concat(a);case 8:return"".concat(t.toOctal()).concat(a);case 16:return"".concat(t.toHexadecimal()).concat(a);default:throw new Error("Base ".concat(e," not supported "))}}function v2(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var r="auto",n,i;if(e!==void 0&&(e.notation&&(r=e.notation),typeof e=="number"?n=e:e.precision&&(n=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(r){case"fixed":return _2(t,n);case"exponential":return w0(t,n);case"engineering":return m2(t,n);case"bin":return Pl(t,2,i);case"oct":return Pl(t,8,i);case"hex":return Pl(t,16,i);case"auto":{var a=e&&e.lowerExp!==void 0?e.lowerExp:-3,o=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var s,l=t.toSignificantDigits(n),p=l.e;return p>=a&&p<o?s=l.toFixed():s=w0(t,n),s.replace(/((\.\d*?)(0+))($|e)/,function(){var f=arguments[2],h=arguments[4];return f!=="."?f+h:h})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function m2(t,e){var r=t.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=t.mul(Math.pow(10,-n)),a=i.toPrecision(e);return a.indexOf("e")!==-1&&(a=i.toString()),a+"e"+(r>=0?"+":"")+n.toString()}function w0(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function _2(t,e){return t.toFixed(e)}function rn(t,e){var r=b2(t,e);return e&&typeof e=="object"&&"truncate"in e&&r.length>e.truncate?r.substring(0,e.truncate-3)+"...":r}function b2(t,e){if(typeof t=="number")return pf(t,e);if(Sn(t))return v2(t,e);if(D2(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return Vp(t,e);if(Gn(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var r=Object.keys(t).map(n=>'"'+n+'": '+rn(t[n],e));return"{"+r.join(", ")+"}"}return String(t)}function Vp(t,e){if(Array.isArray(t)){for(var r="[",n=t.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=Vp(t[i],e);return r+="]",r}else return rn(t,e)}function D2(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function Lt(t,e,r){if(!(this instanceof Lt))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}Lt.prototype=new RangeError;Lt.prototype.constructor=RangeError;Lt.prototype.name="DimensionError";Lt.prototype.isDimensionError=!0;function ea(t,e,r){if(!(this instanceof ea))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}ea.prototype=new RangeError;ea.prototype.constructor=RangeError;ea.prototype.name="IndexError";ea.prototype.isIndexError=!0;function Ti(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function jp(t,e,r){var n,i=t.length;if(i!==e[r])throw new Lt(i,e[r]);if(r<e.length-1){var a=r+1;for(n=0;n<i;n++){var o=t[n];if(!Array.isArray(o))throw new Lt(e.length-1,e.length,"<");jp(t[n],e,a)}}else for(n=0;n<i;n++)if(Array.isArray(t[n]))throw new Lt(e.length+1,e.length,">")}function E0(t,e){var r=e.length===0;if(r){if(Array.isArray(t))throw new Lt(t.length,0)}else jp(t,e,0)}function er(t,e){if(!tr(t)||!Br(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new ea(t,e)}function A0(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!tr(i)||!Br(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+rn(e)+")")});var n=r!==void 0?r:0;return gf(t,e,0,n),t}function gf(t,e,r,n){var i,a,o=t.length,s=e[r],l=Math.min(o,s);if(t.length=s,r<e.length-1){var p=r+1;for(i=0;i<l;i++)a=t[i],Array.isArray(a)||(a=[a],t[i]=a),gf(a,e,p,n);for(i=l;i<s;i++)a=[],t[i]=a,gf(a,e,p,n)}else{for(i=0;i<l;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=l;i<s;i++)t[i]=n}}function y2(t,e){var r=E2(t),n=r.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Lt(0,n,"!=");e=Vf(e,n);var i=zp(e);if(n!==i)throw new Lt(i,n,"!=");try{return w2(r,e)}catch(a){throw a instanceof Lt?new Lt(i,n,"!="):a}}function Vf(t,e){var r=zp(t),n=t.slice(),i=-1,a=t.indexOf(i),o=t.indexOf(i,a+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var s=a>=0,l=e%r===0;if(s)if(l)n[a]=-e/r;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-r);return n}function zp(t){return t.reduce((e,r)=>e*r,1)}function w2(t,e){for(var r=t,n,i=e.length-1;i>0;i--){var a=e[i];n=[];for(var o=r.length/a,s=0;s<o;s++)n.push(r.slice(s*a,(s+1)*a));r=n}return r}function qp(t,e,r,n){var i=n||Ti(t);if(r)for(var a=0;a<r;a++)t=[t],i.unshift(1);for(t=Wp(t,e,0);i.length<e;)i.push(1);return t}function Wp(t,e,r){var n,i;if(Array.isArray(t)){var a=r+1;for(n=0,i=t.length;n<i;n++)t[n]=Wp(t[n],e,a)}else for(var o=r;o<e;o++)t=[t];return t}function E2(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function r(n){Array.isArray(n)?n.forEach(r):e.push(n)}),e}function Os(t,e){for(var r,n=0,i=0;i<t.length;i++){var a=t[i],o=Array.isArray(a);if(i===0&&o&&(n=a.length),o&&a.length!==n)return;var s=o?Os(a,e):e(a);if(r===void 0)r=s;else if(r!==s)return"mixed"}return r}function Mt(t,e,r,n){function i(a){var o=s2(a,e.map(F2));return A2(t,e,a),r(o)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),n&&(i.meta=n),i}function A2(t,e,r){var n=e.filter(a=>!C2(a)).every(a=>r[a]!==void 0);if(!n){var i=e.filter(a=>r[a]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(a=>'"'.concat(a,'"')).join(", "),"."))}}function C2(t){return t&&t[0]==="?"}function F2(t){return t&&t[0]==="?"?t.slice(1):t}function S2(t,e){if(Gp(t)&&Hp(t,e))return t[e];throw typeof t[e]=="function"&&M2(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function B2(t,e,r){if(Gp(t)&&Hp(t,e))return t[e]=r,r;throw new Error('No access to property "'+e+'"')}function O2(t,e){return e in t}function Hp(t,e){return!t||typeof t!="object"?!1:pu(P2,e)?!0:!(e in Object.prototype||e in Function.prototype)}function M2(t,e){return t==null||typeof t[e]!="function"||pu(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:pu(k2,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Gp(t){return typeof t=="object"&&t&&t.constructor===Object}var P2={length:!0,name:!0},k2={toString:!0,valueOf:!0,toLocaleString:!0};class T2{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return S2(this.wrappedObject,e)}set(e,r){return B2(this.wrappedObject,e,r),this}has(e){return O2(this.wrappedObject,e)}}function I2(t){return t?t instanceof Map||t instanceof T2||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var Kp=function(){return Kp=y0.create,y0},N2=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],x2=Mt("typed",N2,function(e){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:a}=e,o=Kp();return o.clear(),o.addTypes([{name:"number",test:tr},{name:"Complex",test:Np},{name:"BigNumber",test:Sn},{name:"Fraction",test:xp},{name:"Unit",test:Lp},{name:"identifier",test:s=>Gn&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])*$/.test(s)},{name:"string",test:Gn},{name:"Chain",test:i2},{name:"Array",test:Xt},{name:"Matrix",test:Jr},{name:"DenseMatrix",test:Pw},{name:"SparseMatrix",test:kw},{name:"Range",test:Tw},{name:"Index",test:Rf},{name:"boolean",test:Iw},{name:"ResultSet",test:Nw},{name:"Help",test:xw},{name:"function",test:Lw},{name:"Date",test:Rw},{name:"RegExp",test:Uw},{name:"null",test:jw},{name:"undefined",test:Uf},{name:"AccessorNode",test:zw},{name:"ArrayNode",test:qw},{name:"AssignmentNode",test:Ww},{name:"BlockNode",test:Hw},{name:"ConditionalNode",test:Gw},{name:"ConstantNode",test:Kw},{name:"FunctionNode",test:Yw},{name:"FunctionAssignmentNode",test:$w},{name:"IndexNode",test:Zw},{name:"Node",test:Jw},{name:"ObjectNode",test:Qw},{name:"OperatorNode",test:Xw},{name:"ParenthesisNode",test:e2},{name:"RangeNode",test:t2},{name:"RelationalNode",test:r2},{name:"SymbolNode",test:n2},{name:"Map",test:I2},{name:"Object",test:Vw}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(r||kl(l),p2(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new r(l)}},{from:"number",to:"Complex",convert:function(l){return n||hs(l),new n(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return n||hs(l),new n(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return n||hs(l),new n(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){a||Tl(l);var p=new a(l);if(p.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return p}},{from:"string",to:"number",convert:function(l){var p=Number(l);if(isNaN(p))throw new Error('Cannot convert "'+l+'" to a number');return p}},{from:"string",to:"BigNumber",convert:function(l){r||kl(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){a||Tl(l);try{return new a(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){n||hs(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return r||kl(l),new r(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return a||Tl(l),new a(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||L2(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),o.onMismatch=(s,l,p)=>{var f=o.createError(s,l,p);if(["wrongType","mismatch"].includes(f.data.category)&&l.length===1&&Fs(l[0])&&p.some(d=>!d.params.includes(","))){var h=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw h.data=f.data,h}throw f},o.onMismatch=(s,l,p)=>{var f=o.createError(s,l,p);if(["wrongType","mismatch"].includes(f.data.category)&&l.length===1&&Fs(l[0])&&p.some(d=>!d.params.includes(","))){var h=new TypeError("Function '".concat(s,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(s,")'."));throw h.data=f.data,h}throw f},o});function kl(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function hs(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function L2(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function Tl(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Aa=9e15,xi=1e9,vf="0123456789abcdef",Ms="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Ps="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",mf={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Aa,maxE:Aa,crypto:!1},$p,hi,dt=!0,no="[DecimalError] ",Ii=no+"Invalid argument: ",Yp=no+"Precision limit exceeded",Zp=no+"crypto unavailable",Jp="[object Decimal]",Gr=Math.floor,Dr=Math.pow,R2=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,U2=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,V2=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Qp=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Rn=1e7,st=7,j2=9007199254740991,z2=Ms.length-1,_f=Ps.length-1,Ee={toStringTag:Jp};Ee.absoluteValue=Ee.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),Qe(t)};Ee.ceil=function(){return Qe(new this.constructor(this),this.e+1,2)};Ee.clampedTo=Ee.clamp=function(t,e){var r,n=this,i=n.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Ii+e);return r=n.cmp(t),r<0?t:n.cmp(e)>0?e:new i(n)};Ee.comparedTo=Ee.cmp=function(t){var e,r,n,i,a=this,o=a.d,s=(t=new a.constructor(t)).d,l=a.s,p=t.s;if(!o||!s)return!l||!p?NaN:l!==p?l:o===s?0:!o^l<0?1:-1;if(!o[0]||!s[0])return o[0]?l:s[0]?-p:0;if(l!==p)return l;if(a.e!==t.e)return a.e>t.e^l<0?1:-1;for(n=o.length,i=s.length,e=0,r=n<i?n:i;e<r;++e)if(o[e]!==s[e])return o[e]>s[e]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1};Ee.cosine=Ee.cos=function(){var t,e,r=this,n=r.constructor;return r.d?r.d[0]?(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+st,n.rounding=1,r=q2(n,n1(n,r)),n.precision=t,n.rounding=e,Qe(hi==2||hi==3?r.neg():r,t,e,!0)):new n(1):new n(NaN)};Ee.cubeRoot=Ee.cbrt=function(){var t,e,r,n,i,a,o,s,l,p,f=this,h=f.constructor;if(!f.isFinite()||f.isZero())return new h(f);for(dt=!1,a=f.s*Dr(f.s*f,1/3),!a||Math.abs(a)==1/0?(r=Ur(f.d),t=f.e,(a=(t-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=Dr(r,1/3),t=Gr((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?r="5e"+t:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),n=new h(r),n.s=f.s):n=new h(a.toString()),o=(t=h.precision)+3;;)if(s=n,l=s.times(s).times(s),p=l.plus(f),n=jt(p.plus(f).times(s),p.plus(l),o+2,1),Ur(s.d).slice(0,o)===(r=Ur(n.d)).slice(0,o))if(r=r.slice(o-3,o+1),r=="9999"||!i&&r=="4999"){if(!i&&(Qe(s,t+1,0),s.times(s).times(s).eq(f))){n=s;break}o+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Qe(n,t+1,1),e=!n.times(n).times(n).eq(f));break}return dt=!0,Qe(n,t,h.rounding,e)};Ee.decimalPlaces=Ee.dp=function(){var t,e=this.d,r=NaN;if(e){if(t=e.length-1,r=(t-Gr(this.e/st))*st,t=e[t],t)for(;t%10==0;t/=10)r--;r<0&&(r=0)}return r};Ee.dividedBy=Ee.div=function(t){return jt(this,new this.constructor(t))};Ee.dividedToIntegerBy=Ee.divToInt=function(t){var e=this,r=e.constructor;return Qe(jt(e,new r(t),0,1,1),r.precision,r.rounding)};Ee.equals=Ee.eq=function(t){return this.cmp(t)===0};Ee.floor=function(){return Qe(new this.constructor(this),this.e+1,3)};Ee.greaterThan=Ee.gt=function(t){return this.cmp(t)>0};Ee.greaterThanOrEqualTo=Ee.gte=function(t){var e=this.cmp(t);return e==1||e===0};Ee.hyperbolicCosine=Ee.cosh=function(){var t,e,r,n,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;r=o.precision,n=o.rounding,o.precision=r+Math.max(a.e,a.sd())+4,o.rounding=1,i=a.d.length,i<32?(t=Math.ceil(i/3),e=(1/ao(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=Sa(o,1,a.times(e),new o(1),!0);for(var l,p=t,f=new o(8);p--;)l=a.times(a),a=s.minus(l.times(f.minus(l.times(f))));return Qe(a,o.precision=r,o.rounding=n,!0)};Ee.hyperbolicSine=Ee.sinh=function(){var t,e,r,n,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(e=a.precision,r=a.rounding,a.precision=e+Math.max(i.e,i.sd())+4,a.rounding=1,n=i.d.length,n<3)i=Sa(a,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/ao(5,t)),i=Sa(a,2,i,i,!0);for(var o,s=new a(5),l=new a(16),p=new a(20);t--;)o=i.times(i),i=i.times(s.plus(o.times(l.times(o).plus(p))))}return a.precision=e,a.rounding=r,Qe(i,e,r,!0)};Ee.hyperbolicTangent=Ee.tanh=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+7,n.rounding=1,jt(r.sinh(),r.cosh(),n.precision=t,n.rounding=e)):new n(r.s)};Ee.inverseCosine=Ee.acos=function(){var t,e=this,r=e.constructor,n=e.abs().cmp(1),i=r.precision,a=r.rounding;return n!==-1?n===0?e.isNeg()?xn(r,i,a):new r(0):new r(NaN):e.isZero()?xn(r,i+4,a).times(.5):(r.precision=i+6,r.rounding=1,e=e.asin(),t=xn(r,i+4,a).times(.5),r.precision=i,r.rounding=a,t.minus(e))};Ee.inverseHyperbolicCosine=Ee.acosh=function(){var t,e,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(t=n.precision,e=n.rounding,n.precision=t+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,dt=!1,r=r.times(r).minus(1).sqrt().plus(r),dt=!0,n.precision=t,n.rounding=e,r.ln()):new n(r)};Ee.inverseHyperbolicSine=Ee.asinh=function(){var t,e,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,dt=!1,r=r.times(r).plus(1).sqrt().plus(r),dt=!0,n.precision=t,n.rounding=e,r.ln())};Ee.inverseHyperbolicTangent=Ee.atanh=function(){var t,e,r,n,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=a.precision,e=a.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?Qe(new a(i),t,e,!0):(a.precision=r=n-i.e,i=jt(i.plus(1),new a(1).minus(i),r+t,1),a.precision=t+4,a.rounding=1,i=i.ln(),a.precision=t,a.rounding=e,i.times(.5))):new a(NaN)};Ee.inverseSine=Ee.asin=function(){var t,e,r,n,i=this,a=i.constructor;return i.isZero()?new a(i):(e=i.abs().cmp(1),r=a.precision,n=a.rounding,e!==-1?e===0?(t=xn(a,r+4,n).times(.5),t.s=i.s,t):new a(NaN):(a.precision=r+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=n,i.times(2)))};Ee.inverseTangent=Ee.atan=function(){var t,e,r,n,i,a,o,s,l,p=this,f=p.constructor,h=f.precision,d=f.rounding;if(p.isFinite()){if(p.isZero())return new f(p);if(p.abs().eq(1)&&h+4<=_f)return o=xn(f,h+4,d).times(.25),o.s=p.s,o}else{if(!p.s)return new f(NaN);if(h+4<=_f)return o=xn(f,h+4,d).times(.5),o.s=p.s,o}for(f.precision=s=h+10,f.rounding=1,r=Math.min(28,s/st+2|0),t=r;t;--t)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(dt=!1,e=Math.ceil(s/st),n=1,l=p.times(p),o=new f(p),i=p;t!==-1;)if(i=i.times(l),a=o.minus(i.div(n+=2)),i=i.times(l),o=a.plus(i.div(n+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===a.d[t]&&t--;);return r&&(o=o.times(2<<r-1)),dt=!0,Qe(o,f.precision=h,f.rounding=d,!0)};Ee.isFinite=function(){return!!this.d};Ee.isInteger=Ee.isInt=function(){return!!this.d&&Gr(this.e/st)>this.d.length-2};Ee.isNaN=function(){return!this.s};Ee.isNegative=Ee.isNeg=function(){return this.s<0};Ee.isPositive=Ee.isPos=function(){return this.s>0};Ee.isZero=function(){return!!this.d&&this.d[0]===0};Ee.lessThan=Ee.lt=function(t){return this.cmp(t)<0};Ee.lessThanOrEqualTo=Ee.lte=function(t){return this.cmp(t)<1};Ee.logarithm=Ee.log=function(t){var e,r,n,i,a,o,s,l,p=this,f=p.constructor,h=f.precision,d=f.rounding,g=5;if(t==null)t=new f(10),e=!0;else{if(t=new f(t),r=t.d,t.s<0||!r||!r[0]||t.eq(1))return new f(NaN);e=t.eq(10)}if(r=p.d,p.s<0||!r||!r[0]||p.eq(1))return new f(r&&!r[0]?-1/0:p.s!=1?NaN:r?0:1/0);if(e)if(r.length>1)a=!0;else{for(i=r[0];i%10===0;)i/=10;a=i!==1}if(dt=!1,s=h+g,o=Oi(p,s),n=e?ks(f,s+10):Oi(t,s),l=jt(o,n,s,1),gu(l.d,i=h,d))do if(s+=10,o=Oi(p,s),n=e?ks(f,s+10):Oi(t,s),l=jt(o,n,s,1),!a){+Ur(l.d).slice(i+1,i+15)+1==1e14&&(l=Qe(l,h+1,0));break}while(gu(l.d,i+=10,d));return dt=!0,Qe(l,h,d)};Ee.minus=Ee.sub=function(t){var e,r,n,i,a,o,s,l,p,f,h,d,g=this,b=g.constructor;if(t=new b(t),!g.d||!t.d)return!g.s||!t.s?t=new b(NaN):g.d?t.s=-t.s:t=new b(t.d||g.s!==t.s?g:NaN),t;if(g.s!=t.s)return t.s=-t.s,g.plus(t);if(p=g.d,d=t.d,s=b.precision,l=b.rounding,!p[0]||!d[0]){if(d[0])t.s=-t.s;else if(p[0])t=new b(g);else return new b(l===3?-0:0);return dt?Qe(t,s,l):t}if(r=Gr(t.e/st),f=Gr(g.e/st),p=p.slice(),a=f-r,a){for(h=a<0,h?(e=p,a=-a,o=d.length):(e=d,r=f,o=p.length),n=Math.max(Math.ceil(s/st),o)+2,a>n&&(a=n,e.length=1),e.reverse(),n=a;n--;)e.push(0);e.reverse()}else{for(n=p.length,o=d.length,h=n<o,h&&(o=n),n=0;n<o;n++)if(p[n]!=d[n]){h=p[n]<d[n];break}a=0}for(h&&(e=p,p=d,d=e,t.s=-t.s),o=p.length,n=d.length-o;n>0;--n)p[o++]=0;for(n=d.length;n>a;){if(p[--n]<d[n]){for(i=n;i&&p[--i]===0;)p[i]=Rn-1;--p[i],p[n]+=Rn}p[n]-=d[n]}for(;p[--o]===0;)p.pop();for(;p[0]===0;p.shift())--r;return p[0]?(t.d=p,t.e=io(p,r),dt?Qe(t,s,l):t):new b(l===3?-0:0)};Ee.modulo=Ee.mod=function(t){var e,r=this,n=r.constructor;return t=new n(t),!r.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||r.d&&!r.d[0]?Qe(new n(r),n.precision,n.rounding):(dt=!1,n.modulo==9?(e=jt(r,t.abs(),0,3,1),e.s*=t.s):e=jt(r,t,0,n.modulo,1),e=e.times(t),dt=!0,r.minus(e))};Ee.naturalExponential=Ee.exp=function(){return bf(this)};Ee.naturalLogarithm=Ee.ln=function(){return Oi(this)};Ee.negated=Ee.neg=function(){var t=new this.constructor(this);return t.s=-t.s,Qe(t)};Ee.plus=Ee.add=function(t){var e,r,n,i,a,o,s,l,p,f,h=this,d=h.constructor;if(t=new d(t),!h.d||!t.d)return!h.s||!t.s?t=new d(NaN):h.d||(t=new d(t.d||h.s===t.s?h:NaN)),t;if(h.s!=t.s)return t.s=-t.s,h.minus(t);if(p=h.d,f=t.d,s=d.precision,l=d.rounding,!p[0]||!f[0])return f[0]||(t=new d(h)),dt?Qe(t,s,l):t;if(a=Gr(h.e/st),n=Gr(t.e/st),p=p.slice(),i=a-n,i){for(i<0?(r=p,i=-i,o=f.length):(r=f,n=a,o=p.length),a=Math.ceil(s/st),o=a>o?a+1:o+1,i>o&&(i=o,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(o=p.length,i=f.length,o-i<0&&(i=o,r=f,f=p,p=r),e=0;i;)e=(p[--i]=p[i]+f[i]+e)/Rn|0,p[i]%=Rn;for(e&&(p.unshift(e),++n),o=p.length;p[--o]==0;)p.pop();return t.d=p,t.e=io(p,n),dt?Qe(t,s,l):t};Ee.precision=Ee.sd=function(t){var e,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ii+t);return r.d?(e=Xp(r.d),t&&r.e+1>e&&(e=r.e+1)):e=NaN,e};Ee.round=function(){var t=this,e=t.constructor;return Qe(new e(t),t.e+1,e.rounding)};Ee.sine=Ee.sin=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+Math.max(r.e,r.sd())+st,n.rounding=1,r=H2(n,n1(n,r)),n.precision=t,n.rounding=e,Qe(hi>2?r.neg():r,t,e,!0)):new n(NaN)};Ee.squareRoot=Ee.sqrt=function(){var t,e,r,n,i,a,o=this,s=o.d,l=o.e,p=o.s,f=o.constructor;if(p!==1||!s||!s[0])return new f(!p||p<0&&(!s||s[0])?NaN:s?o:1/0);for(dt=!1,p=Math.sqrt(+o),p==0||p==1/0?(e=Ur(s),(e.length+l)%2==0&&(e+="0"),p=Math.sqrt(e),l=Gr((l+1)/2)-(l<0||l%2),p==1/0?e="5e"+l:(e=p.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new f(e)):n=new f(p.toString()),r=(l=f.precision)+3;;)if(a=n,n=a.plus(jt(o,a,r+2,1)).times(.5),Ur(a.d).slice(0,r)===(e=Ur(n.d)).slice(0,r))if(e=e.slice(r-3,r+1),e=="9999"||!i&&e=="4999"){if(!i&&(Qe(a,l+1,0),a.times(a).eq(o))){n=a;break}r+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Qe(n,l+1,1),t=!n.times(n).eq(o));break}return dt=!0,Qe(n,l,f.rounding,t)};Ee.tangent=Ee.tan=function(){var t,e,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(t=n.precision,e=n.rounding,n.precision=t+10,n.rounding=1,r=r.sin(),r.s=1,r=jt(r,new n(1).minus(r.times(r)).sqrt(),t+10,0),n.precision=t,n.rounding=e,Qe(hi==2||hi==4?r.neg():r,t,e,!0)):new n(NaN)};Ee.times=Ee.mul=function(t){var e,r,n,i,a,o,s,l,p,f=this,h=f.constructor,d=f.d,g=(t=new h(t)).d;if(t.s*=f.s,!d||!d[0]||!g||!g[0])return new h(!t.s||d&&!d[0]&&!g||g&&!g[0]&&!d?NaN:!d||!g?t.s/0:t.s*0);for(r=Gr(f.e/st)+Gr(t.e/st),l=d.length,p=g.length,l<p&&(a=d,d=g,g=a,o=l,l=p,p=o),a=[],o=l+p,n=o;n--;)a.push(0);for(n=p;--n>=0;){for(e=0,i=l+n;i>n;)s=a[i]+g[n]*d[i-n-1]+e,a[i--]=s%Rn|0,e=s/Rn|0;a[i]=(a[i]+e)%Rn|0}for(;!a[--o];)a.pop();return e?++r:a.shift(),t.d=a,t.e=io(a,r),dt?Qe(t,h.precision,h.rounding):t};Ee.toBinary=function(t,e){return jf(this,2,t,e)};Ee.toDecimalPlaces=Ee.toDP=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(an(t,0,xi),e===void 0?e=n.rounding:an(e,0,8),Qe(r,t+r.e+1,e))};Ee.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Zn(n,!0):(an(t,0,xi),e===void 0?e=i.rounding:an(e,0,8),n=Qe(new i(n),t+1,e),r=Zn(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+r:r};Ee.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?r=Zn(i):(an(t,0,xi),e===void 0?e=a.rounding:an(e,0,8),n=Qe(new a(i),t+i.e+1,e),r=Zn(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};Ee.toFraction=function(t){var e,r,n,i,a,o,s,l,p,f,h,d,g=this,b=g.d,v=g.constructor;if(!b)return new v(g);if(p=r=new v(1),n=l=new v(0),e=new v(n),a=e.e=Xp(b)-g.e-1,o=a%st,e.d[0]=Dr(10,o<0?st+o:o),t==null)t=a>0?e:p;else{if(s=new v(t),!s.isInt()||s.lt(p))throw Error(Ii+s);t=s.gt(e)?a>0?e:p:s}for(dt=!1,s=new v(Ur(b)),f=v.precision,v.precision=a=b.length*st*2;h=jt(s,e,0,1,1),i=r.plus(h.times(n)),i.cmp(t)!=1;)r=n,n=i,i=p,p=l.plus(h.times(i)),l=i,i=e,e=s.minus(h.times(i)),s=i;return i=jt(t.minus(r),n,0,1,1),l=l.plus(i.times(p)),r=r.plus(i.times(n)),l.s=p.s=g.s,d=jt(p,n,a,1).minus(g).abs().cmp(jt(l,r,a,1).minus(g).abs())<1?[p,n]:[l,r],v.precision=f,dt=!0,d};Ee.toHexadecimal=Ee.toHex=function(t,e){return jf(this,16,t,e)};Ee.toNearest=function(t,e){var r=this,n=r.constructor;if(r=new n(r),t==null){if(!r.d)return r;t=new n(1),e=n.rounding}else{if(t=new n(t),e===void 0?e=n.rounding:an(e,0,8),!r.d)return t.s?r:t;if(!t.d)return t.s&&(t.s=r.s),t}return t.d[0]?(dt=!1,r=jt(r,t,0,e,1).times(t),dt=!0,Qe(r)):(t.s=r.s,r=t),r};Ee.toNumber=function(){return+this};Ee.toOctal=function(t,e){return jf(this,8,t,e)};Ee.toPower=Ee.pow=function(t){var e,r,n,i,a,o,s=this,l=s.constructor,p=+(t=new l(t));if(!s.d||!t.d||!s.d[0]||!t.d[0])return new l(Dr(+s,p));if(s=new l(s),s.eq(1))return s;if(n=l.precision,a=l.rounding,t.eq(1))return Qe(s,n,a);if(e=Gr(t.e/st),e>=t.d.length-1&&(r=p<0?-p:p)<=j2)return i=e1(l,s,r,n),t.s<0?new l(1).div(i):Qe(i,n,a);if(o=s.s,o<0){if(e<t.d.length-1)return new l(NaN);if(t.d[e]&1||(o=1),s.e==0&&s.d[0]==1&&s.d.length==1)return s.s=o,s}return r=Dr(+s,p),e=r==0||!isFinite(r)?Gr(p*(Math.log("0."+Ur(s.d))/Math.LN10+s.e+1)):new l(r+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?o/0:0):(dt=!1,l.rounding=s.s=1,r=Math.min(12,(e+"").length),i=bf(t.times(Oi(s,n+r)),n),i.d&&(i=Qe(i,n+5,1),gu(i.d,n,a)&&(e=n+10,i=Qe(bf(t.times(Oi(s,e+r)),e),e+5,1),+Ur(i.d).slice(n+1,n+15)+1==1e14&&(i=Qe(i,n+1,0)))),i.s=o,dt=!0,l.rounding=a,Qe(i,n,a))};Ee.toPrecision=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Zn(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(an(t,1,xi),e===void 0?e=i.rounding:an(e,0,8),n=Qe(new i(n),t,e),r=Zn(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+r:r};Ee.toSignificantDigits=Ee.toSD=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(an(t,1,xi),e===void 0?e=n.rounding:an(e,0,8)),Qe(new n(r),t,e)};Ee.toString=function(){var t=this,e=t.constructor,r=Zn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+r:r};Ee.truncated=Ee.trunc=function(){return Qe(new this.constructor(this),this.e+1,1)};Ee.valueOf=Ee.toJSON=function(){var t=this,e=t.constructor,r=Zn(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+r:r};function Ur(t){var e,r,n,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)n=t[e]+"",r=st-n.length,r&&(a+=Si(r)),a+=n;o=t[e],n=o+"",r=st-n.length,r&&(a+=Si(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}function an(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Ii+t)}function gu(t,e,r,n){var i,a,o,s;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=st,i=0):(i=Math.ceil((e+1)/st),e%=st),a=Dr(10,st-e),s=t[i]%a|0,n==null?e<3?(e==0?s=s/100|0:e==1&&(s=s/10|0),o=r<4&&s==99999||r>3&&s==49999||s==5e4||s==0):o=(r<4&&s+1==a||r>3&&s+1==a/2)&&(t[i+1]/a/100|0)==Dr(10,e-2)-1||(s==a/2||s==0)&&(t[i+1]/a/100|0)==0:e<4?(e==0?s=s/1e3|0:e==1?s=s/100|0:e==2&&(s=s/10|0),o=(n||r<4)&&s==9999||!n&&r>3&&s==4999):o=((n||r<4)&&s+1==a||!n&&r>3&&s+1==a/2)&&(t[i+1]/a/1e3|0)==Dr(10,e-3)-1,o}function Ds(t,e,r){for(var n,i=[0],a,o=0,s=t.length;o<s;){for(a=i.length;a--;)i[a]*=e;for(i[0]+=vf.indexOf(t.charAt(o++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function q2(t,e){var r,n,i;if(e.isZero())return e;n=e.d.length,n<32?(r=Math.ceil(n/3),i=(1/ao(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),t.precision+=r,e=Sa(t,1,e.times(i),new t(1));for(var a=r;a--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=r,e}var jt=function(){function t(n,i,a){var o,s=0,l=n.length;for(n=n.slice();l--;)o=n[l]*i+s,n[l]=o%a|0,s=o/a|0;return s&&n.unshift(s),n}function e(n,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(n[s]!=i[s]){l=n[s]>i[s]?1:-1;break}return l}function r(n,i,a,o){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*o+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,o,s,l){var p,f,h,d,g,b,v,_,D,S,w,C,E,B,k,O,x,K,$,X,j=n.constructor,U=n.s==i.s?1:-1,z=n.d,V=i.d;if(!z||!z[0]||!V||!V[0])return new j(!n.s||!i.s||(z?V&&z[0]==V[0]:!V)?NaN:z&&z[0]==0||!V?U*0:U/0);for(l?(g=1,f=n.e-i.e):(l=Rn,g=st,f=Gr(n.e/g)-Gr(i.e/g)),$=V.length,x=z.length,D=new j(U),S=D.d=[],h=0;V[h]==(z[h]||0);h++);if(V[h]>(z[h]||0)&&f--,a==null?(B=a=j.precision,o=j.rounding):s?B=a+(n.e-i.e)+1:B=a,B<0)S.push(1),b=!0;else{if(B=B/g+2|0,h=0,$==1){for(d=0,V=V[0],B++;(h<x||d)&&B--;h++)k=d*l+(z[h]||0),S[h]=k/V|0,d=k%V|0;b=d||h<x}else{for(d=l/(V[0]+1)|0,d>1&&(V=t(V,d,l),z=t(z,d,l),$=V.length,x=z.length),O=$,w=z.slice(0,$),C=w.length;C<$;)w[C++]=0;X=V.slice(),X.unshift(0),K=V[0],V[1]>=l/2&&++K;do d=0,p=e(V,w,$,C),p<0?(E=w[0],$!=C&&(E=E*l+(w[1]||0)),d=E/K|0,d>1?(d>=l&&(d=l-1),v=t(V,d,l),_=v.length,C=w.length,p=e(v,w,_,C),p==1&&(d--,r(v,$<_?X:V,_,l))):(d==0&&(p=d=1),v=V.slice()),_=v.length,_<C&&v.unshift(0),r(w,v,C,l),p==-1&&(C=w.length,p=e(V,w,$,C),p<1&&(d++,r(w,$<C?X:V,C,l))),C=w.length):p===0&&(d++,w=[0]),S[h++]=d,p&&w[0]?w[C++]=z[O]||0:(w=[z[O]],C=1);while((O++<x||w[0]!==void 0)&&B--);b=w[0]!==void 0}S[0]||S.shift()}if(g==1)D.e=f,$p=b;else{for(h=1,d=S[0];d>=10;d/=10)h++;D.e=h+f*g-1,Qe(D,s?a+D.e+1:a,o,b)}return D}}();function Qe(t,e,r,n){var i,a,o,s,l,p,f,h,d,g=t.constructor;e:if(e!=null){if(h=t.d,!h)return t;for(i=1,s=h[0];s>=10;s/=10)i++;if(a=e-i,a<0)a+=st,o=e,f=h[d=0],l=f/Dr(10,i-o-1)%10|0;else if(d=Math.ceil((a+1)/st),s=h.length,d>=s)if(n){for(;s++<=d;)h.push(0);f=l=0,i=1,a%=st,o=a-st+1}else break e;else{for(f=s=h[d],i=1;s>=10;s/=10)i++;a%=st,o=a-st+i,l=o<0?0:f/Dr(10,i-o-1)%10|0}if(n=n||e<0||h[d+1]!==void 0||(o<0?f:f%Dr(10,i-o-1)),p=r<4?(l||n)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||n||r==6&&(a>0?o>0?f/Dr(10,i-o):0:h[d-1])%10&1||r==(t.s<0?8:7)),e<1||!h[0])return h.length=0,p?(e-=t.e+1,h[0]=Dr(10,(st-e%st)%st),t.e=-e||0):h[0]=t.e=0,t;if(a==0?(h.length=d,s=1,d--):(h.length=d+1,s=Dr(10,st-a),h[d]=o>0?(f/Dr(10,i-o)%Dr(10,o)|0)*s:0),p)for(;;)if(d==0){for(a=1,o=h[0];o>=10;o/=10)a++;for(o=h[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(t.e++,h[0]==Rn&&(h[0]=1));break}else{if(h[d]+=s,h[d]!=Rn)break;h[d--]=0,s=1}for(a=h.length;h[--a]===0;)h.pop()}return dt&&(t.e>g.maxE?(t.d=null,t.e=NaN):t.e<g.minE&&(t.e=0,t.d=[0])),t}function Zn(t,e,r){if(!t.isFinite())return r1(t);var n,i=t.e,a=Ur(t.d),o=a.length;return e?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+Si(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):i<0?(a="0."+Si(-i-1)+a,r&&(n=r-o)>0&&(a+=Si(n))):i>=o?(a+=Si(i+1-o),r&&(n=r-i-1)>0&&(a=a+"."+Si(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(a+="."),a+=Si(n))),a}function io(t,e){var r=t[0];for(e*=st;r>=10;r/=10)e++;return e}function ks(t,e,r){if(e>z2)throw dt=!0,r&&(t.precision=r),Error(Yp);return Qe(new t(Ms),e,1,!0)}function xn(t,e,r){if(e>_f)throw Error(Yp);return Qe(new t(Ps),e,r,!0)}function Xp(t){var e=t.length-1,r=e*st+1;if(e=t[e],e){for(;e%10==0;e/=10)r--;for(e=t[0];e>=10;e/=10)r++}return r}function Si(t){for(var e="";t--;)e+="0";return e}function e1(t,e,r,n){var i,a=new t(1),o=Math.ceil(n/st+4);for(dt=!1;;){if(r%2&&(a=a.times(e),F0(a.d,o)&&(i=!0)),r=Gr(r/2),r===0){r=a.d.length-1,i&&a.d[r]===0&&++a.d[r];break}e=e.times(e),F0(e.d,o)}return dt=!0,a}function C0(t){return t.d[t.d.length-1]&1}function t1(t,e,r){for(var n,i=new t(e[0]),a=0;++a<e.length;)if(n=new t(e[a]),n.s)i[r](n)&&(i=n);else{i=n;break}return i}function bf(t,e){var r,n,i,a,o,s,l,p=0,f=0,h=0,d=t.constructor,g=d.rounding,b=d.precision;if(!t.d||!t.d[0]||t.e>17)return new d(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(dt=!1,l=b):l=e,s=new d(.03125);t.e>-2;)t=t.times(s),h+=5;for(n=Math.log(Dr(2,h))/Math.LN10*2+5|0,l+=n,r=a=o=new d(1),d.precision=l;;){if(a=Qe(a.times(t),l,1),r=r.times(++f),s=o.plus(jt(a,r,l,1)),Ur(s.d).slice(0,l)===Ur(o.d).slice(0,l)){for(i=h;i--;)o=Qe(o.times(o),l,1);if(e==null)if(p<3&&gu(o.d,l-n,g,p))d.precision=l+=10,r=a=s=new d(1),f=0,p++;else return Qe(o,d.precision=b,g,dt=!0);else return d.precision=b,o}o=s}}function Oi(t,e){var r,n,i,a,o,s,l,p,f,h,d,g=1,b=10,v=t,_=v.d,D=v.constructor,S=D.rounding,w=D.precision;if(v.s<0||!_||!_[0]||!v.e&&_[0]==1&&_.length==1)return new D(_&&!_[0]?-1/0:v.s!=1?NaN:_?0:v);if(e==null?(dt=!1,f=w):f=e,D.precision=f+=b,r=Ur(_),n=r.charAt(0),Math.abs(a=v.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(t),r=Ur(v.d),n=r.charAt(0),g++;a=v.e,n>1?(v=new D("0."+r),a++):v=new D(n+"."+r.slice(1))}else return p=ks(D,f+2,w).times(a+""),v=Oi(new D(n+"."+r.slice(1)),f-b).plus(p),D.precision=w,e==null?Qe(v,w,S,dt=!0):v;for(h=v,l=o=v=jt(v.minus(1),v.plus(1),f,1),d=Qe(v.times(v),f,1),i=3;;){if(o=Qe(o.times(d),f,1),p=l.plus(jt(o,new D(i),f,1)),Ur(p.d).slice(0,f)===Ur(l.d).slice(0,f))if(l=l.times(2),a!==0&&(l=l.plus(ks(D,f+2,w).times(a+""))),l=jt(l,new D(g),f,1),e==null)if(gu(l.d,f-b,S,s))D.precision=f+=b,p=o=v=jt(h.minus(1),h.plus(1),f,1),d=Qe(v.times(v),f,1),i=s=1;else return Qe(l,D.precision=w,S,dt=!0);else return D.precision=w,l;l=p,i+=2}}function r1(t){return String(t.s*t.s/0)}function Df(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,t.e=r=r-n-1,t.d=[],n=(r+1)%st,r<0&&(n+=st),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=st;n<i;)t.d.push(+e.slice(n,n+=st));e=e.slice(n),n=st-e.length}else n-=i;for(;n--;)e+="0";t.d.push(+e),dt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function W2(t,e){var r,n,i,a,o,s,l,p,f;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Qp.test(e))return Df(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(U2.test(e))r=16,e=e.toLowerCase();else if(R2.test(e))r=2;else if(V2.test(e))r=8;else throw Error(Ii+e);for(a=e.search(/p/i),a>0?(l=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),o=a>=0,n=t.constructor,o&&(e=e.replace(".",""),s=e.length,a=s-a,i=e1(n,new n(r),a,a*2)),p=Ds(e,r,Rn),f=p.length-1,a=f;p[a]===0;--a)p.pop();return a<0?new n(t.s*0):(t.e=io(p,f),t.d=p,dt=!1,o&&(t=jt(t,i,s*4)),l&&(t=t.times(Math.abs(l)<54?Dr(2,l):Ba.pow(2,l))),dt=!0,t)}function H2(t,e){var r,n=e.d.length;if(n<3)return e.isZero()?e:Sa(t,2,e,e);r=1.4*Math.sqrt(n),r=r>16?16:r|0,e=e.times(1/ao(5,r)),e=Sa(t,2,e,e);for(var i,a=new t(5),o=new t(16),s=new t(20);r--;)i=e.times(e),e=e.times(a.plus(i.times(o.times(i).minus(s))));return e}function Sa(t,e,r,n,i){var a,o,s,l,p=t.precision,f=Math.ceil(p/st);for(dt=!1,l=r.times(r),s=new t(n);;){if(o=jt(s.times(l),new t(e++*e++),p,1),s=i?n.plus(o):n.minus(o),n=jt(o.times(l),new t(e++*e++),p,1),o=s.plus(n),o.d[f]!==void 0){for(a=f;o.d[a]===s.d[a]&&a--;);if(a==-1)break}a=s,s=n,n=o,o=a}return dt=!0,o.d.length=f+1,o}function ao(t,e){for(var r=t;--e;)r*=t;return r}function n1(t,e){var r,n=e.s<0,i=xn(t,t.precision,1),a=i.times(.5);if(e=e.abs(),e.lte(a))return hi=n?4:1,e;if(r=e.divToInt(i),r.isZero())hi=n?3:2;else{if(e=e.minus(r.times(i)),e.lte(a))return hi=C0(r)?n?2:3:n?4:1,e;hi=C0(r)?n?1:4:n?3:2}return e.minus(i).abs()}function jf(t,e,r,n){var i,a,o,s,l,p,f,h,d,g=t.constructor,b=r!==void 0;if(b?(an(r,1,xi),n===void 0?n=g.rounding:an(n,0,8)):(r=g.precision,n=g.rounding),!t.isFinite())f=r1(t);else{for(f=Zn(t),o=f.indexOf("."),b?(i=2,e==16?r=r*4-3:e==8&&(r=r*3-2)):i=e,o>=0&&(f=f.replace(".",""),d=new g(1),d.e=f.length-o,d.d=Ds(Zn(d),10,i),d.e=d.d.length),h=Ds(f,10,i),a=l=h.length;h[--l]==0;)h.pop();if(!h[0])f=b?"0p+0":"0";else{if(o<0?a--:(t=new g(t),t.d=h,t.e=a,t=jt(t,d,r,n,0,i),h=t.d,a=t.e,p=$p),o=h[r],s=i/2,p=p||h[r+1]!==void 0,p=n<4?(o!==void 0||p)&&(n===0||n===(t.s<0?3:2)):o>s||o===s&&(n===4||p||n===6&&h[r-1]&1||n===(t.s<0?8:7)),h.length=r,p)for(;++h[--r]>i-1;)h[r]=0,r||(++a,h.unshift(1));for(l=h.length;!h[l-1];--l);for(o=0,f="";o<l;o++)f+=vf.charAt(h[o]);if(b){if(l>1)if(e==16||e==8){for(o=e==16?4:3,--l;l%o;l++)f+="0";for(h=Ds(f,i,e),l=h.length;!h[l-1];--l);for(o=1,f="1.";o<l;o++)f+=vf.charAt(h[o])}else f=f.charAt(0)+"."+f.slice(1);f=f+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)f="0"+f;f="0."+f}else if(++a>l)for(a-=l;a--;)f+="0";else a<l&&(f=f.slice(0,a)+"."+f.slice(a))}f=(e==16?"0x":e==2?"0b":e==8?"0o":"")+f}return t.s<0?"-"+f:f}function F0(t,e){if(t.length>e)return t.length=e,!0}function G2(t){return new this(t).abs()}function K2(t){return new this(t).acos()}function $2(t){return new this(t).acosh()}function Y2(t,e){return new this(t).plus(e)}function Z2(t){return new this(t).asin()}function J2(t){return new this(t).asinh()}function Q2(t){return new this(t).atan()}function X2(t){return new this(t).atanh()}function eE(t,e){t=new this(t),e=new this(e);var r,n=this.precision,i=this.rounding,a=n+4;return!t.s||!e.s?r=new this(NaN):!t.d&&!e.d?(r=xn(this,a,1).times(e.s>0?.25:.75),r.s=t.s):!e.d||t.isZero()?(r=e.s<0?xn(this,n,i):new this(0),r.s=t.s):!t.d||e.isZero()?(r=xn(this,a,1).times(.5),r.s=t.s):e.s<0?(this.precision=a,this.rounding=1,r=this.atan(jt(t,e,a,1)),e=xn(this,a,1),this.precision=n,this.rounding=i,r=t.s<0?r.minus(e):r.plus(e)):r=this.atan(jt(t,e,a,1)),r}function tE(t){return new this(t).cbrt()}function rE(t){return Qe(t=new this(t),t.e+1,2)}function nE(t,e,r){return new this(t).clamp(e,r)}function iE(t){if(!t||typeof t!="object")throw Error(no+"Object expected");var e,r,n,i=t.defaults===!0,a=["precision",1,xi,"rounding",0,8,"toExpNeg",-Aa,0,"toExpPos",0,Aa,"maxE",0,Aa,"minE",-Aa,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(r=a[e],i&&(this[r]=mf[r]),(n=t[r])!==void 0)if(Gr(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Ii+r+": "+n);if(r="crypto",i&&(this[r]=mf[r]),(n=t[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(Zp);else this[r]=!1;else throw Error(Ii+r+": "+n);return this}function aE(t){return new this(t).cos()}function uE(t){return new this(t).cosh()}function i1(t){var e,r,n;function i(a){var o,s,l,p=this;if(!(p instanceof i))return new i(a);if(p.constructor=i,S0(a)){p.s=a.s,dt?!a.d||a.e>i.maxE?(p.e=NaN,p.d=null):a.e<i.minE?(p.e=0,p.d=[0]):(p.e=a.e,p.d=a.d.slice()):(p.e=a.e,p.d=a.d?a.d.slice():a.d);return}if(l=typeof a,l==="number"){if(a===0){p.s=1/a<0?-1:1,p.e=0,p.d=[0];return}if(a<0?(a=-a,p.s=-1):p.s=1,a===~~a&&a<1e7){for(o=0,s=a;s>=10;s/=10)o++;dt?o>i.maxE?(p.e=NaN,p.d=null):o<i.minE?(p.e=0,p.d=[0]):(p.e=o,p.d=[a]):(p.e=o,p.d=[a]);return}else if(a*0!==0){a||(p.s=NaN),p.e=NaN,p.d=null;return}return Df(p,a.toString())}else if(l!=="string")throw Error(Ii+a);return(s=a.charCodeAt(0))===45?(a=a.slice(1),p.s=-1):(s===43&&(a=a.slice(1)),p.s=1),Qp.test(a)?Df(p,a):W2(p,a)}if(i.prototype=Ee,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=iE,i.clone=i1,i.isDecimal=S0,i.abs=G2,i.acos=K2,i.acosh=$2,i.add=Y2,i.asin=Z2,i.asinh=J2,i.atan=Q2,i.atanh=X2,i.atan2=eE,i.cbrt=tE,i.ceil=rE,i.clamp=nE,i.cos=aE,i.cosh=uE,i.div=sE,i.exp=oE,i.floor=lE,i.hypot=fE,i.ln=cE,i.log=hE,i.log10=pE,i.log2=dE,i.max=gE,i.min=vE,i.mod=mE,i.mul=_E,i.pow=bE,i.random=DE,i.round=yE,i.sign=wE,i.sin=EE,i.sinh=AE,i.sqrt=CE,i.sub=FE,i.sum=SE,i.tan=BE,i.tanh=OE,i.trunc=ME,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function sE(t,e){return new this(t).div(e)}function oE(t){return new this(t).exp()}function lE(t){return Qe(t=new this(t),t.e+1,3)}function fE(){var t,e,r=new this(0);for(dt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)r.d&&(r=r.plus(e.times(e)));else{if(e.s)return dt=!0,new this(1/0);r=e}return dt=!0,r.sqrt()}function S0(t){return t instanceof Ba||t&&t.toStringTag===Jp||!1}function cE(t){return new this(t).ln()}function hE(t,e){return new this(t).log(e)}function dE(t){return new this(t).log(2)}function pE(t){return new this(t).log(10)}function gE(){return t1(this,arguments,"lt")}function vE(){return t1(this,arguments,"gt")}function mE(t,e){return new this(t).mod(e)}function _E(t,e){return new this(t).mul(e)}function bE(t,e){return new this(t).pow(e)}function DE(t){var e,r,n,i,a=0,o=new this(1),s=[];if(t===void 0?t=this.precision:an(t,1,xi),n=Math.ceil(t/st),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));a<n;)i=e[a],i>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);a<n;)i=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,a):(s.push(i%1e7),a+=4);a=n/4}else throw Error(Zp);else for(;a<n;)s[a++]=Math.random()*1e7|0;for(n=s[--a],t%=st,n&&t&&(i=Dr(10,st-t),s[a]=(n/i|0)*i);s[a]===0;a--)s.pop();if(a<0)r=0,s=[0];else{for(r=-1;s[0]===0;r-=st)s.shift();for(n=1,i=s[0];i>=10;i/=10)n++;n<st&&(r-=st-n)}return o.e=r,o.d=s,o}function yE(t){return Qe(t=new this(t),t.e+1,this.rounding)}function wE(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function EE(t){return new this(t).sin()}function AE(t){return new this(t).sinh()}function CE(t){return new this(t).sqrt()}function FE(t,e){return new this(t).sub(e)}function SE(){var t=0,e=arguments,r=new this(e[t]);for(dt=!1;r.s&&++t<e.length;)r=r.plus(e[t]);return dt=!0,Qe(r,this.precision,this.rounding)}function BE(t){return new this(t).tan()}function OE(t){return new this(t).tanh()}function ME(t){return Qe(t=new this(t),t.e+1,1)}Ee[Symbol.for("nodejs.util.inspect.custom")]=Ee.toString;Ee[Symbol.toStringTag]="Decimal";var Ba=Ee.constructor=i1(mf);Ms=new Ba(Ms);Ps=new Ba(Ps);var PE="BigNumber",kE=["?on","config"],TE=Mt(PE,kE,t=>{var{on:e,config:r}=t,n=Ba.clone({precision:r.precision,modulo:Ba.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},e&&e("config",function(i,a){i.precision!==a.precision&&n.config({precision:i.precision})}),n},{isClass:!0}),vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yf={},IE={get exports(){return yf},set exports(t){yf=t}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=Math.cosh||function(h){return Math.abs(h)<1e-9?1-h:(Math.exp(h)+Math.exp(-h))*.5},i=Math.sinh||function(h){return Math.abs(h)<1e-9?h:(Math.exp(h)-Math.exp(-h))*.5},a=function(h){var d=Math.PI/4;if(-d>h||h>d)return Math.cos(h)-1;var g=h*h;return g*(g*(g*(g*(g*(g*(g*(g/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(h,d){var g=Math.abs(h),b=Math.abs(d);return g<3e3&&b<3e3?Math.sqrt(g*g+b*b):(g<b?(g=b,b=h/d):b=d/h,g*Math.sqrt(1+b*b))},s=function(){throw SyntaxError("Invalid Param")};function l(h,d){var g=Math.abs(h),b=Math.abs(d);return h===0?Math.log(b):d===0?Math.log(g):g<3e3&&b<3e3?Math.log(h*h+d*d)*.5:(h=h/2,d=d/2,.5*Math.log(h*h+d*d)+Math.LN2)}var p=function(h,d){var g={re:0,im:0};if(h==null)g.re=g.im=0;else if(d!==void 0)g.re=h,g.im=d;else switch(typeof h){case"object":if("im"in h&&"re"in h)g.re=h.re,g.im=h.im;else if("abs"in h&&"arg"in h){if(!Number.isFinite(h.abs)&&Number.isFinite(h.arg))return f.INFINITY;g.re=h.abs*Math.cos(h.arg),g.im=h.abs*Math.sin(h.arg)}else if("r"in h&&"phi"in h){if(!Number.isFinite(h.r)&&Number.isFinite(h.phi))return f.INFINITY;g.re=h.r*Math.cos(h.phi),g.im=h.r*Math.sin(h.phi)}else h.length===2?(g.re=h[0],g.im=h[1]):s();break;case"string":g.im=g.re=0;var b=h.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),v=1,_=0;b===null&&s();for(var D=0;D<b.length;D++){var S=b[D];S===" "||S==="	"||S===`
`||(S==="+"?v++:S==="-"?_++:S==="i"||S==="I"?(v+_===0&&s(),b[D+1]!==" "&&!isNaN(b[D+1])?(g.im+=parseFloat((_%2?"-":"")+b[D+1]),D++):g.im+=parseFloat((_%2?"-":"")+"1"),v=_=0):((v+_===0||isNaN(S))&&s(),b[D+1]==="i"||b[D+1]==="I"?(g.im+=parseFloat((_%2?"-":"")+S),D++):g.re+=parseFloat((_%2?"-":"")+S),v=_=0))}v+_>0&&s();break;case"number":g.im=0,g.re=h;break;default:s()}return isNaN(g.re)||isNaN(g.im),g};function f(h,d){if(!(this instanceof f))return new f(h,d);var g=p(h,d);this.re=g.re,this.im=g.im}f.prototype={re:0,im:0,sign:function(){var h=this.abs();return new f(this.re/h,this.im/h)},add:function(h,d){var g=new f(h,d);return this.isInfinite()&&g.isInfinite()?f.NAN:this.isInfinite()||g.isInfinite()?f.INFINITY:new f(this.re+g.re,this.im+g.im)},sub:function(h,d){var g=new f(h,d);return this.isInfinite()&&g.isInfinite()?f.NAN:this.isInfinite()||g.isInfinite()?f.INFINITY:new f(this.re-g.re,this.im-g.im)},mul:function(h,d){var g=new f(h,d);return this.isInfinite()&&g.isZero()||this.isZero()&&g.isInfinite()?f.NAN:this.isInfinite()||g.isInfinite()?f.INFINITY:g.im===0&&this.im===0?new f(this.re*g.re,0):new f(this.re*g.re-this.im*g.im,this.re*g.im+this.im*g.re)},div:function(h,d){var g=new f(h,d);if(this.isZero()&&g.isZero()||this.isInfinite()&&g.isInfinite())return f.NAN;if(this.isInfinite()||g.isZero())return f.INFINITY;if(this.isZero()||g.isInfinite())return f.ZERO;h=this.re,d=this.im;var b=g.re,v=g.im,_,D;return v===0?new f(h/b,d/b):Math.abs(b)<Math.abs(v)?(D=b/v,_=b*D+v,new f((h*D+d)/_,(d*D-h)/_)):(D=v/b,_=v*D+b,new f((h+d*D)/_,(d-h*D)/_))},pow:function(h,d){var g=new f(h,d);if(h=this.re,d=this.im,g.isZero())return f.ONE;if(g.im===0){if(d===0&&h>0)return new f(Math.pow(h,g.re),0);if(h===0)switch((g.re%4+4)%4){case 0:return new f(Math.pow(d,g.re),0);case 1:return new f(0,Math.pow(d,g.re));case 2:return new f(-Math.pow(d,g.re),0);case 3:return new f(0,-Math.pow(d,g.re))}}if(h===0&&d===0&&g.re>0&&g.im>=0)return f.ZERO;var b=Math.atan2(d,h),v=l(h,d);return h=Math.exp(g.re*v-g.im*b),d=g.im*v+g.re*b,new f(h*Math.cos(d),h*Math.sin(d))},sqrt:function(){var h=this.re,d=this.im,g=this.abs(),b,v;if(h>=0){if(d===0)return new f(Math.sqrt(h),0);b=.5*Math.sqrt(2*(g+h))}else b=Math.abs(d)/Math.sqrt(2*(g-h));return h<=0?v=.5*Math.sqrt(2*(g-h)):v=Math.abs(d)/Math.sqrt(2*(g+h)),new f(b,d<0?-v:v)},exp:function(){var h=Math.exp(this.re);return this.im,new f(h*Math.cos(this.im),h*Math.sin(this.im))},expm1:function(){var h=this.re,d=this.im;return new f(Math.expm1(h)*Math.cos(d)+a(d),Math.exp(h)*Math.sin(d))},log:function(){var h=this.re,d=this.im;return new f(l(h,d),Math.atan2(d,h))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var h=this.re,d=this.im;return new f(Math.sin(h)*n(d),Math.cos(h)*i(d))},cos:function(){var h=this.re,d=this.im;return new f(Math.cos(h)*n(d),-Math.sin(h)*i(d))},tan:function(){var h=2*this.re,d=2*this.im,g=Math.cos(h)+n(d);return new f(Math.sin(h)/g,i(d)/g)},cot:function(){var h=2*this.re,d=2*this.im,g=Math.cos(h)-n(d);return new f(-Math.sin(h)/g,i(d)/g)},sec:function(){var h=this.re,d=this.im,g=.5*n(2*d)+.5*Math.cos(2*h);return new f(Math.cos(h)*n(d)/g,Math.sin(h)*i(d)/g)},csc:function(){var h=this.re,d=this.im,g=.5*n(2*d)-.5*Math.cos(2*h);return new f(Math.sin(h)*n(d)/g,-Math.cos(h)*i(d)/g)},asin:function(){var h=this.re,d=this.im,g=new f(d*d-h*h+1,-2*h*d).sqrt(),b=new f(g.re-d,g.im+h).log();return new f(b.im,-b.re)},acos:function(){var h=this.re,d=this.im,g=new f(d*d-h*h+1,-2*h*d).sqrt(),b=new f(g.re-d,g.im+h).log();return new f(Math.PI/2-b.im,b.re)},atan:function(){var h=this.re,d=this.im;if(h===0){if(d===1)return new f(0,1/0);if(d===-1)return new f(0,-1/0)}var g=h*h+(1-d)*(1-d),b=new f((1-d*d-h*h)/g,-2*h/g).log();return new f(-.5*b.im,.5*b.re)},acot:function(){var h=this.re,d=this.im;if(d===0)return new f(Math.atan2(1,h),0);var g=h*h+d*d;return g!==0?new f(h/g,-d/g).atan():new f(h!==0?h/0:0,d!==0?-d/0:0).atan()},asec:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new f(0,1/0);var g=h*h+d*d;return g!==0?new f(h/g,-d/g).acos():new f(h!==0?h/0:0,d!==0?-d/0:0).acos()},acsc:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new f(Math.PI/2,1/0);var g=h*h+d*d;return g!==0?new f(h/g,-d/g).asin():new f(h!==0?h/0:0,d!==0?-d/0:0).asin()},sinh:function(){var h=this.re,d=this.im;return new f(i(h)*Math.cos(d),n(h)*Math.sin(d))},cosh:function(){var h=this.re,d=this.im;return new f(n(h)*Math.cos(d),i(h)*Math.sin(d))},tanh:function(){var h=2*this.re,d=2*this.im,g=n(h)+Math.cos(d);return new f(i(h)/g,Math.sin(d)/g)},coth:function(){var h=2*this.re,d=2*this.im,g=n(h)-Math.cos(d);return new f(i(h)/g,-Math.sin(d)/g)},csch:function(){var h=this.re,d=this.im,g=Math.cos(2*d)-n(2*h);return new f(-2*i(h)*Math.cos(d)/g,2*n(h)*Math.sin(d)/g)},sech:function(){var h=this.re,d=this.im,g=Math.cos(2*d)+n(2*h);return new f(2*n(h)*Math.cos(d)/g,-2*i(h)*Math.sin(d)/g)},asinh:function(){var h=this.im;this.im=-this.re,this.re=h;var d=this.asin();return this.re=-this.im,this.im=h,h=d.re,d.re=-d.im,d.im=h,d},acosh:function(){var h=this.acos();if(h.im<=0){var d=h.re;h.re=-h.im,h.im=d}else{var d=h.im;h.im=-h.re,h.re=d}return h},atanh:function(){var h=this.re,d=this.im,g=h>1&&d===0,b=1-h,v=1+h,_=b*b+d*d,D=_!==0?new f((v*b-d*d)/_,(d*b+v*d)/_):new f(h!==-1?h/0:0,d!==0?d/0:0),S=D.re;return D.re=l(D.re,D.im)/2,D.im=Math.atan2(D.im,S)/2,g&&(D.im=-D.im),D},acoth:function(){var h=this.re,d=this.im;if(h===0&&d===0)return new f(0,Math.PI/2);var g=h*h+d*d;return g!==0?new f(h/g,-d/g).atanh():new f(h!==0?h/0:0,d!==0?-d/0:0).atanh()},acsch:function(){var h=this.re,d=this.im;if(d===0)return new f(h!==0?Math.log(h+Math.sqrt(h*h+1)):1/0,0);var g=h*h+d*d;return g!==0?new f(h/g,-d/g).asinh():new f(h!==0?h/0:0,d!==0?-d/0:0).asinh()},asech:function(){var h=this.re,d=this.im;if(this.isZero())return f.INFINITY;var g=h*h+d*d;return g!==0?new f(h/g,-d/g).acosh():new f(h!==0?h/0:0,d!==0?-d/0:0).acosh()},inverse:function(){if(this.isZero())return f.INFINITY;if(this.isInfinite())return f.ZERO;var h=this.re,d=this.im,g=h*h+d*d;return new f(h/g,-d/g)},conjugate:function(){return new f(this.re,-this.im)},neg:function(){return new f(-this.re,-this.im)},ceil:function(h){return h=Math.pow(10,h||0),new f(Math.ceil(this.re*h)/h,Math.ceil(this.im*h)/h)},floor:function(h){return h=Math.pow(10,h||0),new f(Math.floor(this.re*h)/h,Math.floor(this.im*h)/h)},round:function(h){return h=Math.pow(10,h||0),new f(Math.round(this.re*h)/h,Math.round(this.im*h)/h)},equals:function(h,d){var g=new f(h,d);return Math.abs(g.re-this.re)<=f.EPSILON&&Math.abs(g.im-this.im)<=f.EPSILON},clone:function(){return new f(this.re,this.im)},toString:function(){var h=this.re,d=this.im,g="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(h)<f.EPSILON&&(h=0),Math.abs(d)<f.EPSILON&&(d=0),d===0?g+h:(h!==0?(g+=h,g+=" ",d<0?(d=-d,g+="-"):g+="+",g+=" "):d<0&&(d=-d,g+="-"),d!==1&&(g+=d),g+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},f.ZERO=new f(0,0),f.ONE=new f(1,0),f.I=new f(0,1),f.PI=new f(Math.PI,0),f.E=new f(Math.E,0),f.INFINITY=new f(1/0,1/0),f.NAN=new f(NaN,NaN),f.EPSILON=1e-15,Object.defineProperty(f,"__esModule",{value:!0}),f.default=f,f.Complex=f,t.exports=f})()})(IE);const Tr=zf(yf);var NE="Complex",xE=[],LE=Mt(NE,xE,()=>(Object.defineProperty(Tr,"name",{value:"Complex"}),Tr.prototype.constructor=Tr,Tr.prototype.type="Complex",Tr.prototype.isComplex=!0,Tr.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Tr.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Tr.prototype.format=function(t){var e="",r=this.im,n=this.re,i=pf(this.re,t),a=pf(this.im,t),o=tr(t)?t:t?t.precision:null;if(o!==null){var s=Math.pow(10,-o);Math.abs(n/r)<s&&(n=0),Math.abs(r/n)<s&&(r=0)}return r===0?e=i:n===0?r===1?e="i":r===-1?e="-i":e=a+"i":r<0?r===-1?e=i+" - i":e=i+" - "+a.substring(1)+"i":r===1?e=i+" + i":e=i+" + "+a+"i",e},Tr.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Tr(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(tr(r)){if(Lp(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),tr(n))return new Tr({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Tr.prototype.valueOf=Tr.prototype.toString,Tr.fromJSON=function(t){return new Tr(t)},Tr.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},Tr),{isClass:!0}),wf={},RE={get exports(){return wf},set exports(t){wf=t}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(r){var n=2e3,i={s:1,n:0,d:1};function a(b,v){if(isNaN(b=parseInt(b,10)))throw g.InvalidParameter;return b*v}function o(b,v){if(v===0)throw g.DivisionByZero;var _=Object.create(g.prototype);_.s=b<0?-1:1,b=b<0?-b:b;var D=d(b,v);return _.n=b/D,_.d=v/D,_}function s(b){for(var v={},_=b,D=2,S=4;S<=_;){for(;_%D===0;)_/=D,v[D]=(v[D]||0)+1;S+=1+2*D++}return _!==b?_>1&&(v[_]=(v[_]||0)+1):v[b]=(v[b]||0)+1,v}var l=function(b,v){var _=0,D=1,S=1,w=0,C=0,E=0,B=1,k=1,O=0,x=1,K=1,$=1,X=1e7,j;if(b!=null)if(v!==void 0){if(_=b,D=v,S=_*D,_%1!==0||D%1!==0)throw g.NonIntegerParameter}else switch(typeof b){case"object":{if("d"in b&&"n"in b)_=b.n,D=b.d,"s"in b&&(_*=b.s);else if(0 in b)_=b[0],1 in b&&(D=b[1]);else throw g.InvalidParameter;S=_*D;break}case"number":{if(b<0&&(S=b,b=-b),b%1===0)_=b;else if(b>0){for(b>=1&&(k=Math.pow(10,Math.floor(1+Math.log(b)/Math.LN10)),b/=k);x<=X&&$<=X;)if(j=(O+K)/(x+$),b===j){x+$<=X?(_=O+K,D=x+$):$>x?(_=K,D=$):(_=O,D=x);break}else b>j?(O+=K,x+=$):(K+=O,$+=x),x>X?(_=K,D=$):(_=O,D=x);_*=k}else(isNaN(b)||isNaN(v))&&(D=_=NaN);break}case"string":{if(x=b.match(/\d+|./g),x===null)throw g.InvalidParameter;if(x[O]==="-"?(S=-1,O++):x[O]==="+"&&O++,x.length===O+1?C=a(x[O++],S):x[O+1]==="."||x[O]==="."?(x[O]!=="."&&(w=a(x[O++],S)),O++,(O+1===x.length||x[O+1]==="("&&x[O+3]===")"||x[O+1]==="'"&&x[O+3]==="'")&&(C=a(x[O],S),B=Math.pow(10,x[O].length),O++),(x[O]==="("&&x[O+2]===")"||x[O]==="'"&&x[O+2]==="'")&&(E=a(x[O+1],S),k=Math.pow(10,x[O+1].length)-1,O+=3)):x[O+1]==="/"||x[O+1]===":"?(C=a(x[O],S),B=a(x[O+2],1),O+=3):x[O+3]==="/"&&x[O+1]===" "&&(w=a(x[O],S),C=a(x[O+2],S),B=a(x[O+4],1),O+=5),x.length<=O){D=B*k,S=_=E+D*w+k*C;break}}default:throw g.InvalidParameter}if(D===0)throw g.DivisionByZero;i.s=S<0?-1:1,i.n=Math.abs(_),i.d=Math.abs(D)};function p(b,v,_){for(var D=1;v>0;b=b*b%_,v>>=1)v&1&&(D=D*b%_);return D}function f(b,v){for(;v%2===0;v/=2);for(;v%5===0;v/=5);if(v===1)return 0;for(var _=10%v,D=1;_!==1;D++)if(_=_*10%v,D>n)return 0;return D}function h(b,v,_){for(var D=1,S=p(10,_,v),w=0;w<300;w++){if(D===S)return w;D=D*10%v,S=S*10%v}return 0}function d(b,v){if(!b)return v;if(!v)return b;for(;;){if(b%=v,!b)return v;if(v%=b,!v)return b}}function g(b,v){if(l(b,v),this instanceof g)b=d(i.d,i.n),this.s=i.s,this.n=i.n/b,this.d=i.d/b;else return o(i.s*i.n,i.d)}g.DivisionByZero=new Error("Division by Zero"),g.InvalidParameter=new Error("Invalid argument"),g.NonIntegerParameter=new Error("Parameters must be integer"),g.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(b,v){return l(b,v),o(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(b,v){return l(b,v),o(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(b,v){return l(b,v),o(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(b,v){return l(b,v),o(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(b,v){if(isNaN(this.n)||isNaN(this.d))return new g(NaN);if(b===void 0)return o(this.s*this.n%this.d,1);if(l(b,v),i.n===0&&this.d===0)throw g.DivisionByZero;return o(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(b,v){return l(b,v),o(d(i.n,this.n)*d(i.d,this.d),i.d*this.d)},lcm:function(b,v){return l(b,v),i.n===0&&this.n===0?o(0,1):o(i.n*this.n,d(i.n,this.n)*d(i.d,this.d))},ceil:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.ceil(b*this.s*this.n/this.d),b)},floor:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.floor(b*this.s*this.n/this.d),b)},round:function(b){return b=Math.pow(10,b||0),isNaN(this.n)||isNaN(this.d)?new g(NaN):o(Math.round(b*this.s*this.n/this.d),b)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(b,v){if(l(b,v),i.d===1)return i.s<0?o(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):o(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var _=s(this.n),D=s(this.d),S=1,w=1;for(var C in _)if(C!=="1"){if(C==="0"){S=0;break}if(_[C]*=i.n,_[C]%i.d===0)_[C]/=i.d;else return null;S*=Math.pow(C,_[C])}for(var C in D)if(C!=="1"){if(D[C]*=i.n,D[C]%i.d===0)D[C]/=i.d;else return null;w*=Math.pow(C,D[C])}return i.s<0?o(w,S):o(S,w)},equals:function(b,v){return l(b,v),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(b,v){l(b,v);var _=this.s*this.n*i.d-i.s*i.n*this.d;return(0<_)-(_<0)},simplify:function(b){if(isNaN(this.n)||isNaN(this.d))return this;b=b||.001;for(var v=this.abs(),_=v.toContinued(),D=1;D<_.length;D++){for(var S=o(_[D-1],1),w=D-2;w>=0;w--)S=S.inverse().add(_[w]);if(S.sub(v).abs().valueOf()<b)return S.mul(this.s)}return this},divisible:function(b,v){return l(b,v),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(b){var v,_="",D=this.n,S=this.d;return this.s<0&&(_+="-"),S===1?_+=D:(b&&(v=Math.floor(D/S))>0&&(_+=v,_+=" ",D%=S),_+=D,_+="/",_+=S),_},toLatex:function(b){var v,_="",D=this.n,S=this.d;return this.s<0&&(_+="-"),S===1?_+=D:(b&&(v=Math.floor(D/S))>0&&(_+=v,D%=S),_+="\\frac{",_+=D,_+="}{",_+=S,_+="}"),_},toContinued:function(){var b,v=this.n,_=this.d,D=[];if(isNaN(v)||isNaN(_))return D;do D.push(Math.floor(v/_)),b=v%_,v=_,_=b;while(v!==1);return D},toString:function(b){var v=this.n,_=this.d;if(isNaN(v)||isNaN(_))return"NaN";b=b||15;var D=f(v,_),S=h(v,_,D),w=this.s<0?"-":"";if(w+=v/_|0,v%=_,v*=10,v&&(w+="."),D){for(var C=S;C--;)w+=v/_|0,v%=_,v*=10;w+="(";for(var C=D;C--;)w+=v/_|0,v%=_,v*=10;w+=")"}else for(var C=b;v&&C--;)w+=v/_|0,v%=_,v*=10;return w}},Object.defineProperty(g,"__esModule",{value:!0}),g.default=g,g.Fraction=g,t.exports=g})()})(RE);const ci=zf(wf);var UE="Fraction",VE=[],jE=Mt(UE,VE,()=>(Object.defineProperty(ci,"name",{value:"Fraction"}),ci.prototype.constructor=ci,ci.prototype.type="Fraction",ci.prototype.isFraction=!0,ci.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},ci.fromJSON=function(t){return new ci(t)},ci),{isClass:!0}),zE="Matrix",qE=[],WE=Mt(zE,qE,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,r){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,r,n){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,r){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,r){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,r){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function a1(t){return Object.keys(t.signatures||{}).reduce(function(e,r){var n=(r.match(/,/g)||[]).length+1;return Math.max(e,n)},-1)}var HE="DenseMatrix",GE=["Matrix"],KE=Mt(HE,GE,t=>{var{Matrix:e}=t;function r(f,h){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(h&&!Gn(h))throw new Error("Invalid datatype: "+h);if(Jr(f))f.type==="DenseMatrix"?(this._data=Sr(f._data),this._size=Sr(f._size),this._datatype=h||f._datatype):(this._data=f.toArray(),this._size=f.size(),this._datatype=h||f._datatype);else if(f&&Xt(f.data)&&Xt(f.size))this._data=f.data,this._size=f.size,E0(this._data,this._size),this._datatype=h||f.datatype;else if(Xt(f))this._data=p(f),this._size=Ti(this._data),E0(this._data,this._size),this._datatype=h;else{if(f)throw new TypeError("Unsupported type of data ("+hu(f)+")");this._data=[],this._size=[0],this._datatype=h}}r.prototype=new e,r.prototype.createDenseMatrix=function(f,h){return new r(f,h)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return Os(this._data,hu)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(f,h){return new r(f,h)},r.prototype.subset=function(f,h,d){switch(arguments.length){case 1:return n(this,f);case 2:case 3:return a(this,f,h,d);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(f){if(!Xt(f))throw new TypeError("Array expected");if(f.length!==this._size.length)throw new Lt(f.length,this._size.length);for(var h=0;h<f.length;h++)er(f[h],this._size[h]);for(var d=this._data,g=0,b=f.length;g<b;g++){var v=f[g];er(v,d.length),d=d[v]}return d},r.prototype.set=function(f,h,d){if(!Xt(f))throw new TypeError("Array expected");if(f.length<this._size.length)throw new Lt(f.length,this._size.length,"<");var g,b,v,_=f.map(function(S){return S+1});l(this,_,d);var D=this._data;for(g=0,b=f.length-1;g<b;g++)v=f[g],er(v,D.length),D=D[v];return v=f[f.length-1],er(v,D.length),D[v]=h,this};function n(f,h){if(!Rf(h))throw new TypeError("Invalid index");var d=h.isScalar();if(d)return f.get(h.min());var g=h.size();if(g.length!==f._size.length)throw new Lt(g.length,f._size.length);for(var b=h.min(),v=h.max(),_=0,D=f._size.length;_<D;_++)er(b[_],f._size[_]),er(v[_],f._size[_]);return new r(i(f._data,h,g.length,0),f._datatype)}function i(f,h,d,g){var b=g===d-1,v=h.dimension(g);return b?v.map(function(_){return er(_,f.length),f[_]}).valueOf():v.map(function(_){er(_,f.length);var D=f[_];return i(D,h,d,g+1)}).valueOf()}function a(f,h,d,g){if(!h||h.isIndex!==!0)throw new TypeError("Invalid index");var b=h.size(),v=h.isScalar(),_;if(Jr(d)?(_=d.size(),d=d.valueOf()):_=Ti(d),v){if(_.length!==0)throw new TypeError("Scalar expected");f.set(h.min(),d,g)}else{if(b.length<f._size.length)throw new Lt(b.length,f._size.length,"<");if(_.length<b.length){for(var D=0,S=0;b[D]===1&&_[D]===1;)D++;for(;b[D]===1;)S++,D++;d=qp(d,b.length,S,_)}if(!Ss(b,_))throw new Lt(b,_,">");var w=h.max().map(function(B){return B+1});l(f,w,g);var C=b.length,E=0;o(f._data,h,d,C,E)}return f}function o(f,h,d,g,b){var v=b===g-1,_=h.dimension(b);v?_.forEach(function(D,S){er(D),f[D]=d[S[0]]}):_.forEach(function(D,S){er(D),o(f[D],h,d[S[0]],g,b+1)})}r.prototype.resize=function(f,h,d){if(!Fs(f))throw new TypeError("Array or Matrix expected");var g=f.valueOf().map(v=>Array.isArray(v)&&v.length===1?v[0]:v),b=d?this.clone():this;return s(b,g,h)};function s(f,h,d){if(h.length===0){for(var g=f._data;Xt(g);)g=g[0];return g}return f._size=h.slice(0),f._data=A0(f._data,f._size,d),f}r.prototype.reshape=function(f,h){var d=h?this.clone():this;d._data=y2(d._data,f);var g=d._size.reduce((b,v)=>b*v);return d._size=Vf(f,g),d};function l(f,h,d){for(var g=f._size.slice(0),b=!1;g.length<h.length;)g.push(0),b=!0;for(var v=0,_=h.length;v<_;v++)h[v]>g[v]&&(g[v]=h[v],b=!0);b&&s(f,g,d)}r.prototype.clone=function(){var f=new r({data:Sr(this._data),size:Sr(this._size),datatype:this._datatype});return f},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(f){var h=this,d=a1(f),g=function _(D,S){return Xt(D)?D.map(function(w,C){return _(w,S.concat(C))}):d===1?f(D):d===2?f(D,S):f(D,S,h)},b=g(this._data,[]),v=this._datatype!==void 0?Os(b,hu):void 0;return new r(b,v)},r.prototype.forEach=function(f){var h=this,d=function g(b,v){Xt(b)?b.forEach(function(_,D){g(_,v.concat(D))}):f(b,v,h)};d(this._data,[])},r.prototype[Symbol.iterator]=function*(){var f=function*h(d,g){if(Xt(d))for(var b=0;b<d.length;b++)yield*h(d[b],g.concat(b));else yield{value:d,index:g}};yield*f(this._data,[])},r.prototype.rows=function(){var f=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var d=this._data;for(var g of d)f.push(new r([g],this._datatype));return f},r.prototype.columns=function(){var f=this,h=[],d=this.size();if(d.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var g=this._data,b=function(D){var S=g.map(w=>[w[D]]);h.push(new r(S,f._datatype))},v=0;v<d[1];v++)b(v);return h},r.prototype.toArray=function(){return Sr(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(f){return rn(this._data,f)},r.prototype.toString=function(){return rn(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(f){if(f){if(Sn(f)&&(f=f.toNumber()),!tr(f)||!Br(f))throw new TypeError("The parameter k must be an integer number")}else f=0;for(var h=f>0?f:0,d=f<0?-f:0,g=this._size[0],b=this._size[1],v=Math.min(g-d,b-h),_=[],D=0;D<v;D++)_[D]=this._data[D+d][D+h];return new r({data:_,size:[v],datatype:this._datatype})},r.diagonal=function(f,h,d,g){if(!Xt(f))throw new TypeError("Array expected, size parameter");if(f.length!==2)throw new Error("Only two dimensions matrix are supported");if(f=f.map(function(k){if(Sn(k)&&(k=k.toNumber()),!tr(k)||!Br(k)||k<1)throw new Error("Size values must be positive integers");return k}),d){if(Sn(d)&&(d=d.toNumber()),!tr(d)||!Br(d))throw new TypeError("The parameter k must be an integer number")}else d=0;var b=d>0?d:0,v=d<0?-d:0,_=f[0],D=f[1],S=Math.min(_-v,D-b),w;if(Xt(h)){if(h.length!==S)throw new Error("Invalid value array length");w=function(O){return h[O]}}else if(Jr(h)){var C=h.size();if(C.length!==1||C[0]!==S)throw new Error("Invalid matrix length");w=function(O){return h.get([O])}}else w=function(){return h};g||(g=Sn(w(0))?w(0).mul(0):0);var E=[];if(f.length>0){E=A0(E,f,g);for(var B=0;B<S;B++)E[B+v][B+b]=w(B)}return new r({data:E,size:[_,D]})},r.fromJSON=function(f){return new r(f)},r.prototype.swapRows=function(f,h){if(!tr(f)||!Br(f)||!tr(h)||!Br(h))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return er(f,this._size[0]),er(h,this._size[0]),r._swapRows(f,h,this._data),this},r._swapRows=function(f,h,d){var g=d[f];d[f]=d[h],d[h]=g};function p(f){for(var h=0,d=f.length;h<d;h++){var g=f[h];Xt(g)?f[h]=p(g):g&&g.isMatrix===!0&&(f[h]=p(g.valueOf()))}return f}return r},{isClass:!0});function uo(t,e,r){return t&&typeof t.map=="function"?t.map(function(n){return uo(n,e)}):e(t)}var B0="isInteger",$E=["typed"],YE=Mt(B0,$E,t=>{var{typed:e}=t;return e(B0,{number:Br,BigNumber:function(n){return n.isInt()},Fraction:function(n){return n.d===1&&isFinite(n.n)},"Array | Matrix":e.referToSelf(r=>n=>uo(n,r))})}),ZE="number",u1="number, number";function s1(t,e){return t+e}s1.signature=u1;function o1(t,e){return t*e}o1.signature=u1;function l1(t){return-t}l1.signature=ZE;function JE(t,e,r){if(r==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return n.lte(i.times(r))}return!1}function QE(t,e,r){return Bs(t.re,e.re,r)&&Bs(t.im,e.im,r)}var XE=Mt("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}}),Ts="equalScalar",eA=["typed","config"],tA=Mt(Ts,eA,t=>{var{typed:e,config:r}=t,n=XE({typed:e});return e(Ts,{"boolean, boolean":function(a,o){return a===o},"number, number":function(a,o){return Bs(a,o,r.epsilon)},"BigNumber, BigNumber":function(a,o){return a.eq(o)||JE(a,o,r.epsilon)},"Fraction, Fraction":function(a,o){return a.equals(o)},"Complex, Complex":function(a,o){return QE(a,o,r.epsilon)}},n)});Mt(Ts,["typed","config"],t=>{var{typed:e,config:r}=t;return e(Ts,{"number, number":function(i,a){return Bs(i,a,r.epsilon)}})});var rA="SparseMatrix",nA=["typed","equalScalar","Matrix"],iA=Mt(rA,nA,t=>{var{typed:e,equalScalar:r,Matrix:n}=t;function i(v,_){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(_&&!Gn(_))throw new Error("Invalid datatype: "+_);if(Jr(v))a(this,v,_);else if(v&&Xt(v.index)&&Xt(v.ptr)&&Xt(v.size))this._values=v.values,this._index=v.index,this._ptr=v.ptr,this._size=v.size,this._datatype=_||v.datatype;else if(Xt(v))o(this,v,_);else{if(v)throw new TypeError("Unsupported type of data ("+hu(v)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=_}}function a(v,_,D){_.type==="SparseMatrix"?(v._values=_._values?Sr(_._values):void 0,v._index=Sr(_._index),v._ptr=Sr(_._ptr),v._size=Sr(_._size),v._datatype=D||_._datatype):o(v,_.valueOf(),D||_._datatype)}function o(v,_,D){v._values=[],v._index=[],v._ptr=[],v._datatype=D;var S=_.length,w=0,C=r,E=0;if(Gn(D)&&(C=e.find(r,[D,D])||r,E=e.convert(0,D)),S>0){var B=0;do{v._ptr.push(v._index.length);for(var k=0;k<S;k++){var O=_[k];if(Xt(O)){if(B===0&&w<O.length&&(w=O.length),B<O.length){var x=O[B];C(x,E)||(v._values.push(x),v._index.push(k))}}else B===0&&w<1&&(w=1),C(O,E)||(v._values.push(O),v._index.push(k))}B++}while(B<w)}v._ptr.push(v._index.length),v._size=[S,w]}i.prototype=new n,i.prototype.createSparseMatrix=function(v,_){return new i(v,_)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return Os(this._values,hu)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(v,_){return new i(v,_)},i.prototype.density=function(){var v=this._size[0],_=this._size[1];return v!==0&&_!==0?this._index.length/(v*_):0},i.prototype.subset=function(v,_,D){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return s(this,v);case 2:case 3:return l(this,v,_,D);default:throw new SyntaxError("Wrong number of arguments")}};function s(v,_){if(!Rf(_))throw new TypeError("Invalid index");var D=_.isScalar();if(D)return v.get(_.min());var S=_.size();if(S.length!==v._size.length)throw new Lt(S.length,v._size.length);var w,C,E,B,k=_.min(),O=_.max();for(w=0,C=v._size.length;w<C;w++)er(k[w],v._size[w]),er(O[w],v._size[w]);var x=v._values,K=v._index,$=v._ptr,X=_.dimension(0),j=_.dimension(1),U=[],z=[];X.forEach(function(ne,se){z[ne]=se[0],U[ne]=!0});var V=x?[]:void 0,J=[],ae=[];return j.forEach(function(ne){for(ae.push(J.length),E=$[ne],B=$[ne+1];E<B;E++)w=K[E],U[w]===!0&&(J.push(z[w]),V&&V.push(x[E]))}),ae.push(J.length),new i({values:V,index:J,ptr:ae,size:S,datatype:v._datatype})}function l(v,_,D,S){if(!_||_.isIndex!==!0)throw new TypeError("Invalid index");var w=_.size(),C=_.isScalar(),E;if(Jr(D)?(E=D.size(),D=D.toArray()):E=Ti(D),C){if(E.length!==0)throw new TypeError("Scalar expected");v.set(_.min(),D,S)}else{if(w.length!==1&&w.length!==2)throw new Lt(w.length,v._size.length,"<");if(E.length<w.length){for(var B=0,k=0;w[B]===1&&E[B]===1;)B++;for(;w[B]===1;)k++,B++;D=qp(D,w.length,k,E)}if(!Ss(w,E))throw new Lt(w,E,">");if(w.length===1){var O=_.dimension(0);O.forEach(function($,X){er($),v.set([$,0],D[X[0]],S)})}else{var x=_.dimension(0),K=_.dimension(1);x.forEach(function($,X){er($),K.forEach(function(j,U){er(j),v.set([$,j],D[X[0]][U[0]],S)})})}}return v}i.prototype.get=function(v){if(!Xt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Lt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var _=v[0],D=v[1];er(_,this._size[0]),er(D,this._size[1]);var S=p(_,this._ptr[D],this._ptr[D+1],this._index);return S<this._ptr[D+1]&&this._index[S]===_?this._values[S]:0},i.prototype.set=function(v,_,D){if(!Xt(v))throw new TypeError("Array expected");if(v.length!==this._size.length)throw new Lt(v.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var S=v[0],w=v[1],C=this._size[0],E=this._size[1],B=r,k=0;Gn(this._datatype)&&(B=e.find(r,[this._datatype,this._datatype])||r,k=e.convert(0,this._datatype)),(S>C-1||w>E-1)&&(d(this,Math.max(S+1,C),Math.max(w+1,E),D),C=this._size[0],E=this._size[1]),er(S,C),er(w,E);var O=p(S,this._ptr[w],this._ptr[w+1],this._index);return O<this._ptr[w+1]&&this._index[O]===S?B(_,k)?f(O,w,this._values,this._index,this._ptr):this._values[O]=_:B(_,k)||h(O,S,w,_,this._values,this._index,this._ptr),this};function p(v,_,D,S){if(D-_===0)return D;for(var w=_;w<D;w++)if(S[w]===v)return w;return _}function f(v,_,D,S,w){D.splice(v,1),S.splice(v,1);for(var C=_+1;C<w.length;C++)w[C]--}function h(v,_,D,S,w,C,E){w.splice(v,0,S),C.splice(v,0,_);for(var B=D+1;B<E.length;B++)E[B]++}i.prototype.resize=function(v,_,D){if(!Fs(v))throw new TypeError("Array or Matrix expected");var S=v.valueOf().map(C=>Array.isArray(C)&&C.length===1?C[0]:C);if(S.length!==2)throw new Error("Only two dimensions matrix are supported");S.forEach(function(C){if(!tr(C)||!Br(C)||C<0)throw new TypeError("Invalid size, must contain positive integers (size: "+rn(S)+")")});var w=D?this.clone():this;return d(w,S[0],S[1],_)};function d(v,_,D,S){var w=S||0,C=r,E=0;Gn(v._datatype)&&(C=e.find(r,[v._datatype,v._datatype])||r,E=e.convert(0,v._datatype),w=e.convert(w,v._datatype));var B=!C(w,E),k=v._size[0],O=v._size[1],x,K,$;if(D>O){for(K=O;K<D;K++)if(v._ptr[K]=v._values.length,B)for(x=0;x<k;x++)v._values.push(w),v._index.push(x);v._ptr[D]=v._values.length}else D<O&&(v._ptr.splice(D+1,O-D),v._values.splice(v._ptr[D],v._values.length),v._index.splice(v._ptr[D],v._index.length));if(O=D,_>k){if(B){var X=0;for(K=0;K<O;K++){v._ptr[K]=v._ptr[K]+X,$=v._ptr[K+1]+X;var j=0;for(x=k;x<_;x++,j++)v._values.splice($+j,0,w),v._index.splice($+j,0,x),X++}v._ptr[O]=v._values.length}}else if(_<k){var U=0;for(K=0;K<O;K++){v._ptr[K]=v._ptr[K]-U;var z=v._ptr[K],V=v._ptr[K+1]-U;for($=z;$<V;$++)x=v._index[$],x>_-1&&(v._values.splice($,1),v._index.splice($,1),U++)}v._ptr[K]=v._values.length}return v._size[0]=_,v._size[1]=D,v}i.prototype.reshape=function(v,_){if(!Xt(v))throw new TypeError("Array expected");if(v.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");v.forEach(function(ne){if(!tr(ne)||!Br(ne)||ne<=-2||ne===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+rn(v)+")")});var D=this._size[0]*this._size[1];v=Vf(v,D);var S=v[0]*v[1];if(D!==S)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=_?this.clone():this;if(this._size[0]===v[0]&&this._size[1]===v[1])return w;for(var C=[],E=0;E<w._ptr.length;E++)for(var B=0;B<w._ptr[E+1]-w._ptr[E];B++)C.push(E);for(var k=w._values.slice(),O=w._index.slice(),x=0;x<w._index.length;x++){var K=O[x],$=C[x],X=K*w._size[1]+$;C[x]=X%v[1],O[x]=Math.floor(X/v[1])}w._values.length=0,w._index.length=0,w._ptr.length=v[1]+1,w._size=v.slice();for(var j=0;j<w._ptr.length;j++)w._ptr[j]=0;for(var U=0;U<k.length;U++){var z=O[U],V=C[U],J=k[U],ae=p(z,w._ptr[V],w._ptr[V+1],w._index);h(ae,z,V,J,w._values,w._index,w._ptr)}return w},i.prototype.clone=function(){var v=new i({values:this._values?Sr(this._values):void 0,index:Sr(this._index),ptr:Sr(this._ptr),size:Sr(this._size),datatype:this._datatype});return v},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(v,_){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var D=this,S=this._size[0],w=this._size[1],C=a1(v),E=function(k,O,x){return C===1?v(k):C===2?v(k,[O,x]):v(k,[O,x],D)};return g(this,0,S-1,0,w-1,E,_)};function g(v,_,D,S,w,C,E){var B=[],k=[],O=[],x=r,K=0;Gn(v._datatype)&&(x=e.find(r,[v._datatype,v._datatype])||r,K=e.convert(0,v._datatype));for(var $=function(Fe,xe,ke){Fe=C(Fe,xe,ke),x(Fe,K)||(B.push(Fe),k.push(xe))},X=S;X<=w;X++){O.push(B.length);var j=v._ptr[X],U=v._ptr[X+1];if(E)for(var z=j;z<U;z++){var V=v._index[z];V>=_&&V<=D&&$(v._values[z],V-_,X-S)}else{for(var J={},ae=j;ae<U;ae++){var ne=v._index[ae];J[ne]=v._values[ae]}for(var se=_;se<=D;se++){var De=se in J?J[se]:0;$(De,se-_,X-S)}}}return O.push(B.length),new i({values:B,index:k,ptr:O,size:[D-_+1,w-S+1]})}i.prototype.forEach=function(v,_){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var D=this,S=this._size[0],w=this._size[1],C=0;C<w;C++){var E=this._ptr[C],B=this._ptr[C+1];if(_)for(var k=E;k<B;k++){var O=this._index[k];v(this._values[k],[O,C],D)}else{for(var x={},K=E;K<B;K++){var $=this._index[K];x[$]=this._values[K]}for(var X=0;X<S;X++){var j=X in x?x[X]:0;v(j,[X,C],D)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var v=this._size[1],_=0;_<v;_++)for(var D=this._ptr[_],S=this._ptr[_+1],w=D;w<S;w++){var C=this._index[w];yield{value:this._values[w],index:[C,_]}}},i.prototype.toArray=function(){return b(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return b(this._values,this._index,this._ptr,this._size,!1)};function b(v,_,D,S,w){var C=S[0],E=S[1],B=[],k,O;for(k=0;k<C;k++)for(B[k]=[],O=0;O<E;O++)B[k][O]=0;for(O=0;O<E;O++)for(var x=D[O],K=D[O+1],$=x;$<K;$++)k=_[$],B[k][O]=v?w?Sr(v[$]):v[$]:1;return B}return i.prototype.format=function(v){for(var _=this._size[0],D=this._size[1],S=this.density(),w="Sparse Matrix ["+rn(_,v)+" x "+rn(D,v)+"] density: "+rn(S,v)+`
`,C=0;C<D;C++)for(var E=this._ptr[C],B=this._ptr[C+1],k=E;k<B;k++){var O=this._index[k];w+=`
    (`+rn(O,v)+", "+rn(C,v)+") ==> "+(this._values?rn(this._values[k],v):"X")}return w},i.prototype.toString=function(){return rn(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(v){if(v){if(Sn(v)&&(v=v.toNumber()),!tr(v)||!Br(v))throw new TypeError("The parameter k must be an integer number")}else v=0;var _=v>0?v:0,D=v<0?-v:0,S=this._size[0],w=this._size[1],C=Math.min(S-D,w-_),E=[],B=[],k=[];k[0]=0;for(var O=_;O<w&&E.length<C;O++)for(var x=this._ptr[O],K=this._ptr[O+1],$=x;$<K;$++){var X=this._index[$];if(X===O-_+D){E.push(this._values[$]),B[E.length-1]=X-D;break}}return k.push(E.length),new i({values:E,index:B,ptr:k,size:[C,1]})},i.fromJSON=function(v){return new i(v)},i.diagonal=function(v,_,D,S,w){if(!Xt(v))throw new TypeError("Array expected, size parameter");if(v.length!==2)throw new Error("Only two dimensions matrix are supported");if(v=v.map(function(ne){if(Sn(ne)&&(ne=ne.toNumber()),!tr(ne)||!Br(ne)||ne<1)throw new Error("Size values must be positive integers");return ne}),D){if(Sn(D)&&(D=D.toNumber()),!tr(D)||!Br(D))throw new TypeError("The parameter k must be an integer number")}else D=0;var C=r,E=0;Gn(w)&&(C=e.find(r,[w,w])||r,E=e.convert(0,w));var B=D>0?D:0,k=D<0?-D:0,O=v[0],x=v[1],K=Math.min(O-k,x-B),$;if(Xt(_)){if(_.length!==K)throw new Error("Invalid value array length");$=function(se){return _[se]}}else if(Jr(_)){var X=_.size();if(X.length!==1||X[0]!==K)throw new Error("Invalid matrix length");$=function(se){return _.get([se])}}else $=function(){return _};for(var j=[],U=[],z=[],V=0;V<x;V++){z.push(j.length);var J=V-B;if(J>=0&&J<K){var ae=$(J);C(ae,E)||(U.push(J+k),j.push(ae))}}return z.push(j.length),new i({values:j,index:U,ptr:z,size:[O,x]})},i.prototype.swapRows=function(v,_){if(!tr(v)||!Br(v)||!tr(_)||!Br(_))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return er(v,this._size[0]),er(_,this._size[0]),i._swapRows(v,_,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(v,_,D,S,w){for(var C=S[v],E=S[v+1],B=C;B<E;B++)w(D[B],_[B])},i._swapRows=function(v,_,D,S,w,C){for(var E=0;E<D;E++){var B=C[E],k=C[E+1],O=p(v,B,k,w),x=p(_,B,k,w);if(O<k&&x<k&&w[O]===v&&w[x]===_){if(S){var K=S[O];S[O]=S[x],S[x]=K}continue}if(O<k&&w[O]===v&&(x>=k||w[x]!==_)){var $=S?S[O]:void 0;w.splice(x,0,_),S&&S.splice(x,0,$),w.splice(x<=O?O+1:O,1),S&&S.splice(x<=O?O+1:O,1);continue}if(x<k&&w[x]===_&&(O>=k||w[O]!==v)){var X=S?S[x]:void 0;w.splice(O,0,v),S&&S.splice(O,0,X),w.splice(O<=x?x+1:x,1),S&&S.splice(O<=x?x+1:x,1)}}},i},{isClass:!0}),O0="matrix",aA=["typed","Matrix","DenseMatrix","SparseMatrix"],uA=Mt(O0,aA,t=>{var{typed:e,Matrix:r,DenseMatrix:n,SparseMatrix:i}=t;return e(O0,{"":function(){return a([])},string:function(s){return a([],s)},"string, string":function(s,l){return a([],s,l)},Array:function(s){return a(s)},Matrix:function(s){return a(s,s.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(o,s,l){if(s==="dense"||s==="default"||s===void 0)return new n(o,l);if(s==="sparse")return new i(o,l);throw new TypeError("Unknown matrix type "+JSON.stringify(s)+".")}}),M0="unaryMinus",sA=["typed"],oA=Mt(M0,sA,t=>{var{typed:e}=t;return e(M0,{number:l1,"Complex | BigNumber | Fraction":r=>r.neg(),Unit:e.referToSelf(r=>n=>{var i=n.clone();return i.value=e.find(r,i.valueType())(n.value),i}),"Array | Matrix":e.referToSelf(r=>n=>uo(n,r))})}),P0="addScalar",lA=["typed"],fA=Mt(P0,lA,t=>{var{typed:e}=t;return e(P0,{"number, number":s1,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":e.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var a=n.clone();return a.value=e.find(r,[a.valueType(),i.valueType()])(a.value,i.value),a.fixPrefix=!1,a})})}),cA="matAlgo11xS0s",hA=["typed","equalScalar"],dA=Mt(cA,hA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o,s){var l=i._values,p=i._index,f=i._ptr,h=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=h[0],b=h[1],v,_=r,D=0,S=o;typeof d=="string"&&(v=d,_=e.find(r,[v,v]),D=e.convert(0,v),a=e.convert(a,v),S=e.find(o,[v,v]));for(var w=[],C=[],E=[],B=0;B<b;B++){E[B]=C.length;for(var k=f[B],O=f[B+1],x=k;x<O;x++){var K=p[x],$=s?S(a,l[x]):S(l[x],a);_($,D)||(C.push(K),w.push($))}}return E[b]=C.length,i.createSparseMatrix({values:w,index:C,ptr:E,size:[g,b],datatype:v})}}),pA="matAlgo12xSfs",gA=["typed","DenseMatrix"],vA=Mt(pA,gA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,o,s){var l=i._values,p=i._index,f=i._ptr,h=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=h[0],b=h[1],v,_=o;typeof d=="string"&&(v=d,a=e.convert(a,v),_=e.find(o,[v,v]));for(var D=[],S=[],w=[],C=0;C<b;C++){for(var E=C+1,B=f[C],k=f[C+1],O=B;O<k;O++){var x=p[O];S[x]=l[O],w[x]=E}for(var K=0;K<g;K++)C===0&&(D[K]=[]),w[K]===E?D[K][C]=s?_(a,S[K]):_(S[K],a):D[K][C]=s?_(a,0):_(0,a)}return new r({data:D,size:[g,b],datatype:v})}}),mA="matAlgo14xDs",_A=["typed"],f1=Mt(mA,_A,t=>{var{typed:e}=t;return function(i,a,o,s){var l=i._data,p=i._size,f=i._datatype,h,d=o;typeof f=="string"&&(h=f,a=e.convert(a,h),d=e.find(o,[h,h]));var g=p.length>0?r(d,0,p,p[0],l,a,s):[];return i.createDenseMatrix({data:g,size:Sr(p),datatype:h})};function r(n,i,a,o,s,l,p){var f=[];if(i===a.length-1)for(var h=0;h<o;h++)f[h]=p?n(l,s[h]):n(s[h],l);else for(var d=0;d<o;d++)f[d]=r(n,i+1,a,a[i+1],s[d],l,p);return f}}),bA="matAlgo01xDSid",DA=["typed"],c1=Mt(bA,DA,t=>{var{typed:e}=t;return function(n,i,a,o){var s=n._data,l=n._size,p=n._datatype,f=i._values,h=i._index,d=i._ptr,g=i._size,b=i._datatype;if(l.length!==g.length)throw new Lt(l.length,g.length);if(l[0]!==g[0]||l[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+g+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],_=l[1],D=typeof p=="string"&&p===b?p:void 0,S=D?e.find(a,[D,D]):a,w,C,E=[];for(w=0;w<v;w++)E[w]=[];var B=[],k=[];for(C=0;C<_;C++){for(var O=C+1,x=d[C],K=d[C+1],$=x;$<K;$++)w=h[$],B[w]=o?S(f[$],s[w][C]):S(s[w][C],f[$]),k[w]=O;for(w=0;w<v;w++)k[w]===O?E[w][C]=B[w]:E[w][C]=s[w][C]}return n.createDenseMatrix({data:E,size:[v,_],datatype:D})}}),yA="matAlgo04xSidSid",wA=["typed","equalScalar"],EA=Mt(yA,wA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,l=i._index,p=i._ptr,f=i._size,h=i._datatype,d=a._values,g=a._index,b=a._ptr,v=a._size,_=a._datatype;if(f.length!==v.length)throw new Lt(f.length,v.length);if(f[0]!==v[0]||f[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+v+")");var D=f[0],S=f[1],w,C=r,E=0,B=o;typeof h=="string"&&h===_&&(w=h,C=e.find(r,[w,w]),E=e.convert(0,w),B=e.find(o,[w,w]));var k=s&&d?[]:void 0,O=[],x=[],K=s&&d?[]:void 0,$=s&&d?[]:void 0,X=[],j=[],U,z,V,J,ae;for(z=0;z<S;z++){x[z]=O.length;var ne=z+1;for(J=p[z],ae=p[z+1],V=J;V<ae;V++)U=l[V],O.push(U),X[U]=ne,K&&(K[U]=s[V]);for(J=b[z],ae=b[z+1],V=J;V<ae;V++)if(U=g[V],X[U]===ne){if(K){var se=B(K[U],d[V]);C(se,E)?X[U]=null:K[U]=se}}else O.push(U),j[U]=ne,$&&($[U]=d[V]);if(K&&$)for(V=x[z];V<O.length;)U=O[V],X[U]===ne?(k[V]=K[U],V++):j[U]===ne?(k[V]=$[U],V++):O.splice(V,1)}return x[S]=O.length,i.createSparseMatrix({values:k,index:O,ptr:x,size:[D,S],datatype:w})}}),AA="matAlgo10xSids",CA=["typed","DenseMatrix"],h1=Mt(AA,CA,t=>{var{typed:e,DenseMatrix:r}=t;return function(i,a,o,s){var l=i._values,p=i._index,f=i._ptr,h=i._size,d=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var g=h[0],b=h[1],v,_=o;typeof d=="string"&&(v=d,a=e.convert(a,v),_=e.find(o,[v,v]));for(var D=[],S=[],w=[],C=0;C<b;C++){for(var E=C+1,B=f[C],k=f[C+1],O=B;O<k;O++){var x=p[O];S[x]=l[O],w[x]=E}for(var K=0;K<g;K++)C===0&&(D[K]=[]),w[K]===E?D[K][C]=s?_(a,S[K]):_(S[K],a):D[K][C]=a}return new r({data:D,size:[g,b],datatype:v})}}),FA="matAlgo13xDD",SA=["typed"],BA=Mt(FA,SA,t=>{var{typed:e}=t;return function(i,a,o){var s=i._data,l=i._size,p=i._datatype,f=a._data,h=a._size,d=a._datatype,g=[];if(l.length!==h.length)throw new Lt(l.length,h.length);for(var b=0;b<l.length;b++){if(l[b]!==h[b])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");g[b]=l[b]}var v,_=o;typeof p=="string"&&p===d&&(v=p,_=e.find(o,[v,v]));var D=g.length>0?r(_,0,g,g[0],s,f):[];return i.createDenseMatrix({data:D,size:g,datatype:v})};function r(n,i,a,o,s,l){var p=[];if(i===a.length-1)for(var f=0;f<o;f++)p[f]=n(s[f],l[f]);else for(var h=0;h<o;h++)p[h]=r(n,i+1,a,a[i+1],s[h],l[h]);return p}}),OA="broadcast",MA=["concat"],PA=Mt(OA,MA,t=>{var{concat:e}=t;return function(a,o){var s=Math.max(a._size.length,o._size.length);if(a._size.length===o._size.length&&a._size.every((_,D)=>_===o._size[D]))return[a,o];for(var l=r(a._size,s,0),p=r(o._size,s,0),f=[],h=0;h<s;h++)f[h]=Math.max(l[h],p[h]);for(var d=0;d<s;d++)i(l,f,d),i(p,f,d);var g=a.clone(),b=o.clone();g._size.length<s?g.reshape(r(g._size,s,1)):b._size.length<s&&b.reshape(r(b._size,s,1));for(var v=0;v<s;v++)g._size[v]<f[v]&&(g=n(g,f[v],v)),b._size[v]<f[v]&&(b=n(b,f[v],v));return[g,b]};function r(a,o,s){return[...Array(o-a.length).fill(s),...a]}function n(a,o,s){return e(...Array(o).fill(a),s)}function i(a,o,s){if(a[s]<o[s]&a[s]>1)throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(a,") not possible to broadcast dimension ").concat(s," with size ").concat(a[s]," to size ").concat(o[s]))}}),kA="matrixAlgorithmSuite",TA=["typed","matrix","concat"],d1=Mt(kA,TA,t=>{var{typed:e,matrix:r,concat:n}=t,i=BA({typed:e}),a=f1({typed:e}),o=PA({concat:n});return function(l){var p=l.elop,f=l.SD||l.DS,h;p?(h={"DenseMatrix, DenseMatrix":(v,_)=>i(...o(v,_),p),"Array, Array":(v,_)=>i(...o(r(v),r(_)),p).valueOf(),"Array, DenseMatrix":(v,_)=>i(...o(r(v),_),p),"DenseMatrix, Array":(v,_)=>i(...o(v,r(_)),p)},l.SS&&(h["SparseMatrix, SparseMatrix"]=(v,_)=>l.SS(...o(v,_),p,!1)),l.DS&&(h["DenseMatrix, SparseMatrix"]=(v,_)=>l.DS(...o(v,_),p,!1),h["Array, SparseMatrix"]=(v,_)=>l.DS(...o(r(v),_),p,!1)),f&&(h["SparseMatrix, DenseMatrix"]=(v,_)=>f(...o(_,v),p,!0),h["SparseMatrix, Array"]=(v,_)=>f(...o(r(_),v),p,!0))):(h={"DenseMatrix, DenseMatrix":e.referToSelf(v=>(_,D)=>i(...o(_,D),v)),"Array, Array":e.referToSelf(v=>(_,D)=>i(...o(r(_),r(D)),v).valueOf()),"Array, DenseMatrix":e.referToSelf(v=>(_,D)=>i(...o(r(_),D),v)),"DenseMatrix, Array":e.referToSelf(v=>(_,D)=>i(...o(_,r(D)),v))},l.SS&&(h["SparseMatrix, SparseMatrix"]=e.referToSelf(v=>(_,D)=>l.SS(...o(_,D),v,!1))),l.DS&&(h["DenseMatrix, SparseMatrix"]=e.referToSelf(v=>(_,D)=>l.DS(...o(_,D),v,!1)),h["Array, SparseMatrix"]=e.referToSelf(v=>(_,D)=>l.DS(...o(r(_),D),v,!1))),f&&(h["SparseMatrix, DenseMatrix"]=e.referToSelf(v=>(_,D)=>f(...o(D,_),v,!0)),h["SparseMatrix, Array"]=e.referToSelf(v=>(_,D)=>f(...o(r(D),_),v,!0))));var d=l.scalar||"any",g=l.Ds||l.Ss;g&&(p?(h["DenseMatrix,"+d]=(v,_)=>a(v,_,p,!1),h[d+", DenseMatrix"]=(v,_)=>a(_,v,p,!0),h["Array,"+d]=(v,_)=>a(r(v),_,p,!1).valueOf(),h[d+", Array"]=(v,_)=>a(r(_),v,p,!0).valueOf()):(h["DenseMatrix,"+d]=e.referToSelf(v=>(_,D)=>a(_,D,v,!1)),h[d+", DenseMatrix"]=e.referToSelf(v=>(_,D)=>a(D,_,v,!0)),h["Array,"+d]=e.referToSelf(v=>(_,D)=>a(r(_),D,v,!1).valueOf()),h[d+", Array"]=e.referToSelf(v=>(_,D)=>a(r(D),_,v,!0).valueOf())));var b=l.sS!==void 0?l.sS:l.Ss;return p?(l.Ss&&(h["SparseMatrix,"+d]=(v,_)=>l.Ss(v,_,p,!1)),b&&(h[d+", SparseMatrix"]=(v,_)=>b(_,v,p,!0))):(l.Ss&&(h["SparseMatrix,"+d]=e.referToSelf(v=>(_,D)=>l.Ss(_,D,v,!1))),b&&(h[d+", SparseMatrix"]=e.referToSelf(v=>(_,D)=>b(D,_,v,!0)))),p&&p.signatures&&u2(h,p.signatures),h}}),IA="matAlgo03xDSf",NA=["typed"],xA=Mt(IA,NA,t=>{var{typed:e}=t;return function(n,i,a,o){var s=n._data,l=n._size,p=n._datatype,f=i._values,h=i._index,d=i._ptr,g=i._size,b=i._datatype;if(l.length!==g.length)throw new Lt(l.length,g.length);if(l[0]!==g[0]||l[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+g+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v=l[0],_=l[1],D,S=0,w=a;typeof p=="string"&&p===b&&(D=p,S=e.convert(0,D),w=e.find(a,[D,D]));for(var C=[],E=0;E<v;E++)C[E]=[];for(var B=[],k=[],O=0;O<_;O++){for(var x=O+1,K=d[O],$=d[O+1],X=K;X<$;X++){var j=h[X];B[j]=o?w(f[X],s[j][O]):w(s[j][O],f[X]),k[j]=x}for(var U=0;U<v;U++)k[U]===x?C[U][O]=B[U]:C[U][O]=o?w(S,s[U][O]):w(s[U][O],S)}return n.createDenseMatrix({data:C,size:[v,_],datatype:D})}}),LA="matAlgo05xSfSf",RA=["typed","equalScalar"],UA=Mt(LA,RA,t=>{var{typed:e,equalScalar:r}=t;return function(i,a,o){var s=i._values,l=i._index,p=i._ptr,f=i._size,h=i._datatype,d=a._values,g=a._index,b=a._ptr,v=a._size,_=a._datatype;if(f.length!==v.length)throw new Lt(f.length,v.length);if(f[0]!==v[0]||f[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+v+")");var D=f[0],S=f[1],w,C=r,E=0,B=o;typeof h=="string"&&h===_&&(w=h,C=e.find(r,[w,w]),E=e.convert(0,w),B=e.find(o,[w,w]));var k=s&&d?[]:void 0,O=[],x=[],K=k?[]:void 0,$=k?[]:void 0,X=[],j=[],U,z,V,J;for(z=0;z<S;z++){x[z]=O.length;var ae=z+1;for(V=p[z],J=p[z+1];V<J;V++)U=l[V],O.push(U),X[U]=ae,K&&(K[U]=s[V]);for(V=b[z],J=b[z+1];V<J;V++)U=g[V],X[U]!==ae&&O.push(U),j[U]=ae,$&&($[U]=d[V]);if(k)for(V=x[z];V<O.length;){U=O[V];var ne=X[U],se=j[U];if(ne===ae||se===ae){var De=ne===ae?K[U]:E,we=se===ae?$[U]:E,Fe=B(De,we);C(Fe,E)?O.splice(V,1):(k.push(Fe),V++)}}}return x[S]=O.length,i.createSparseMatrix({values:k,index:O,ptr:x,size:[D,S],datatype:w})}}),VA="multiplyScalar",jA=["typed"],zA=Mt(VA,jA,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":o1,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})}),k0="multiply",qA=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],WA=Mt(k0,qA,t=>{var{typed:e,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:a,dot:o}=t,s=dA({typed:e,equalScalar:a}),l=f1({typed:e});function p(E,B){switch(E.length){case 1:switch(B.length){case 1:if(E[0]!==B[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(E[0]!==B[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+E[0]+") must match Matrix rows ("+B[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+B.length+" dimensions)")}break;case 2:switch(B.length){case 1:if(E[1]!==B[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+E[1]+") must match Vector length ("+B[0]+")");break;case 2:if(E[1]!==B[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+E[1]+") must match Matrix B rows ("+B[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+B.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+E.length+" dimensions)")}}function f(E,B,k){if(k===0)throw new Error("Cannot multiply two empty vectors");return o(E,B)}function h(E,B){if(B.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return d(E,B)}function d(E,B){var k=E._data,O=E._size,x=E._datatype,K=B._data,$=B._size,X=B._datatype,j=O[0],U=$[1],z,V=n,J=i;x&&X&&x===X&&typeof x=="string"&&(z=x,V=e.find(n,[z,z]),J=e.find(i,[z,z]));for(var ae=[],ne=0;ne<U;ne++){for(var se=J(k[0],K[0][ne]),De=1;De<j;De++)se=V(se,J(k[De],K[De][ne]));ae[ne]=se}return E.createDenseMatrix({data:ae,size:[U],datatype:z})}var g=e("_multiplyMatrixVector",{"DenseMatrix, any":v,"SparseMatrix, any":S}),b=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":_,"DenseMatrix, SparseMatrix":D,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":C});function v(E,B){var k=E._data,O=E._size,x=E._datatype,K=B._data,$=B._datatype,X=O[0],j=O[1],U,z=n,V=i;x&&$&&x===$&&typeof x=="string"&&(U=x,z=e.find(n,[U,U]),V=e.find(i,[U,U]));for(var J=[],ae=0;ae<X;ae++){for(var ne=k[ae],se=V(ne[0],K[0]),De=1;De<j;De++)se=z(se,V(ne[De],K[De]));J[ae]=se}return E.createDenseMatrix({data:J,size:[X],datatype:U})}function _(E,B){var k=E._data,O=E._size,x=E._datatype,K=B._data,$=B._size,X=B._datatype,j=O[0],U=O[1],z=$[1],V,J=n,ae=i;x&&X&&x===X&&typeof x=="string"&&(V=x,J=e.find(n,[V,V]),ae=e.find(i,[V,V]));for(var ne=[],se=0;se<j;se++){var De=k[se];ne[se]=[];for(var we=0;we<z;we++){for(var Fe=ae(De[0],K[0][we]),xe=1;xe<U;xe++)Fe=J(Fe,ae(De[xe],K[xe][we]));ne[se][we]=Fe}}return E.createDenseMatrix({data:ne,size:[j,z],datatype:V})}function D(E,B){var k=E._data,O=E._size,x=E._datatype,K=B._values,$=B._index,X=B._ptr,j=B._size,U=B._datatype;if(!K)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var z=O[0],V=j[1],J,ae=n,ne=i,se=a,De=0;x&&U&&x===U&&typeof x=="string"&&(J=x,ae=e.find(n,[J,J]),ne=e.find(i,[J,J]),se=e.find(a,[J,J]),De=e.convert(0,J));for(var we=[],Fe=[],xe=[],ke=B.createSparseMatrix({values:we,index:Fe,ptr:xe,size:[z,V],datatype:J}),Ue=0;Ue<V;Ue++){xe[Ue]=Fe.length;var Ye=X[Ue],Ke=X[Ue+1];if(Ke>Ye)for(var Je=0,Le=0;Le<z;Le++){for(var Dt=Le+1,Et=void 0,ht=Ye;ht<Ke;ht++){var at=$[ht];Je!==Dt?(Et=ne(k[Le][at],K[ht]),Je=Dt):Et=ae(Et,ne(k[Le][at],K[ht]))}Je===Dt&&!se(Et,De)&&(Fe.push(Le),we.push(Et))}}return xe[V]=Fe.length,ke}function S(E,B){var k=E._values,O=E._index,x=E._ptr,K=E._datatype;if(!k)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var $=B._data,X=B._datatype,j=E._size[0],U=B._size[0],z=[],V=[],J=[],ae,ne=n,se=i,De=a,we=0;K&&X&&K===X&&typeof K=="string"&&(ae=K,ne=e.find(n,[ae,ae]),se=e.find(i,[ae,ae]),De=e.find(a,[ae,ae]),we=e.convert(0,ae));var Fe=[],xe=[];J[0]=0;for(var ke=0;ke<U;ke++){var Ue=$[ke];if(!De(Ue,we))for(var Ye=x[ke],Ke=x[ke+1],Je=Ye;Je<Ke;Je++){var Le=O[Je];xe[Le]?Fe[Le]=ne(Fe[Le],se(Ue,k[Je])):(xe[Le]=!0,V.push(Le),Fe[Le]=se(Ue,k[Je]))}}for(var Dt=V.length,Et=0;Et<Dt;Et++){var ht=V[Et];z[Et]=Fe[ht]}return J[1]=V.length,E.createSparseMatrix({values:z,index:V,ptr:J,size:[j,1],datatype:ae})}function w(E,B){var k=E._values,O=E._index,x=E._ptr,K=E._datatype;if(!k)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var $=B._data,X=B._datatype,j=E._size[0],U=B._size[0],z=B._size[1],V,J=n,ae=i,ne=a,se=0;K&&X&&K===X&&typeof K=="string"&&(V=K,J=e.find(n,[V,V]),ae=e.find(i,[V,V]),ne=e.find(a,[V,V]),se=e.convert(0,V));for(var De=[],we=[],Fe=[],xe=E.createSparseMatrix({values:De,index:we,ptr:Fe,size:[j,z],datatype:V}),ke=[],Ue=[],Ye=0;Ye<z;Ye++){Fe[Ye]=we.length;for(var Ke=Ye+1,Je=0;Je<U;Je++){var Le=$[Je][Ye];if(!ne(Le,se))for(var Dt=x[Je],Et=x[Je+1],ht=Dt;ht<Et;ht++){var at=O[ht];Ue[at]!==Ke?(Ue[at]=Ke,we.push(at),ke[at]=ae(Le,k[ht])):ke[at]=J(ke[at],ae(Le,k[ht]))}}for(var Pt=Fe[Ye],dr=we.length,Tt=Pt;Tt<dr;Tt++){var Te=we[Tt];De[Tt]=ke[Te]}}return Fe[z]=we.length,xe}function C(E,B){var k=E._values,O=E._index,x=E._ptr,K=E._datatype,$=B._values,X=B._index,j=B._ptr,U=B._datatype,z=E._size[0],V=B._size[1],J=k&&$,ae,ne=n,se=i;K&&U&&K===U&&typeof K=="string"&&(ae=K,ne=e.find(n,[ae,ae]),se=e.find(i,[ae,ae]));for(var De=J?[]:void 0,we=[],Fe=[],xe=E.createSparseMatrix({values:De,index:we,ptr:Fe,size:[z,V],datatype:ae}),ke=J?[]:void 0,Ue=[],Ye,Ke,Je,Le,Dt,Et,ht,at,Pt=0;Pt<V;Pt++){Fe[Pt]=we.length;var dr=Pt+1;for(Dt=j[Pt],Et=j[Pt+1],Le=Dt;Le<Et;Le++)if(at=X[Le],J)for(Ke=x[at],Je=x[at+1],Ye=Ke;Ye<Je;Ye++)ht=O[Ye],Ue[ht]!==dr?(Ue[ht]=dr,we.push(ht),ke[ht]=se($[Le],k[Ye])):ke[ht]=ne(ke[ht],se($[Le],k[Ye]));else for(Ke=x[at],Je=x[at+1],Ye=Ke;Ye<Je;Ye++)ht=O[Ye],Ue[ht]!==dr&&(Ue[ht]=dr,we.push(ht));if(J)for(var Tt=Fe[Pt],Te=we.length,Ve=Tt;Ve<Te;Ve++){var Ot=we[Ve];De[Ve]=ke[Ot]}}return Fe[V]=we.length,xe}return e(k0,i,{"Array, Array":e.referTo("Matrix, Matrix",E=>(B,k)=>{p(Ti(B),Ti(k));var O=E(r(B),r(k));return Jr(O)?O.valueOf():O}),"Matrix, Matrix":function(B,k){var O=B.size(),x=k.size();return p(O,x),O.length===1?x.length===1?f(B,k,O[0]):h(B,k):x.length===1?g(B,k):b(B,k)},"Matrix, Array":e.referTo("Matrix,Matrix",E=>(B,k)=>E(B,r(k))),"Array, Matrix":e.referToSelf(E=>(B,k)=>E(r(B,k.storage()),k)),"SparseMatrix, any":function(B,k){return s(B,k,i,!1)},"DenseMatrix, any":function(B,k){return l(B,k,i,!1)},"any, SparseMatrix":function(B,k){return s(k,B,i,!0)},"any, DenseMatrix":function(B,k){return l(k,B,i,!0)},"Array, any":function(B,k){return l(r(B),k,i,!1).valueOf()},"any, Array":function(B,k){return l(r(k),B,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(E=>(B,k,O)=>{for(var x=E(B,k),K=0;K<O.length;K++)x=E(x,O[K]);return x})})}),T0="subtract",HA=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix","concat"],GA=Mt(T0,HA,t=>{var{typed:e,matrix:r,equalScalar:n,addScalar:i,unaryMinus:a,DenseMatrix:o,concat:s}=t,l=c1({typed:e}),p=xA({typed:e}),f=UA({typed:e,equalScalar:n}),h=h1({typed:e,DenseMatrix:o}),d=vA({typed:e,DenseMatrix:o}),g=d1({typed:e,matrix:r,concat:s});return e(T0,{"number, number":(b,v)=>b-v,"Complex, Complex":(b,v)=>b.sub(v),"BigNumber, BigNumber":(b,v)=>b.minus(v),"Fraction, Fraction":(b,v)=>b.sub(v),"Unit, Unit":e.referToSelf(b=>(v,_)=>{if(v.value===null)throw new Error("Parameter x contains a unit with undefined value");if(_.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!v.equalBase(_))throw new Error("Units do not match");var D=v.clone();return D.value=e.find(b,[D.valueType(),_.valueType()])(D.value,_.value),D.fixPrefix=!1,D})},g({SS:f,DS:l,SD:p,Ss:d,sS:h}))}),I0="conj",KA=["typed"],$A=Mt(I0,KA,t=>{var{typed:e}=t;return e(I0,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),"Array | Matrix":e.referToSelf(r=>n=>uo(n,r))})}),N0="concat",YA=["typed","matrix","isInteger"],ZA=Mt(N0,YA,t=>{var{typed:e,matrix:r,isInteger:n}=t;return e(N0,{"...Array | Matrix | number | BigNumber":function(a){var o,s=a.length,l=-1,p,f=!1,h=[];for(o=0;o<s;o++){var d=a[o];if(Jr(d)&&(f=!0),tr(d)||Sn(d)){if(o!==s-1)throw new Error("Dimension must be specified as last argument");if(p=l,l=d.valueOf(),!n(l))throw new TypeError("Integer number expected for dimension");if(l<0||o>0&&l>p)throw new ea(l,p+1)}else{var g=Sr(d).valueOf(),b=Ti(g);if(h[o]=g,p=l,l=b.length-1,o>0&&l!==p)throw new Lt(p+1,l+1)}}if(h.length===0)throw new SyntaxError("At least one matrix expected");for(var v=h.shift();h.length;)v=p1(v,h.shift(),l,0);return f?r(v):v},"...string":function(a){return a.join("")}})});function p1(t,e,r,n){if(n<r){if(t.length!==e.length)throw new Lt(t.length,e.length);for(var i=[],a=0;a<t.length;a++)i[a]=p1(t[a],e[a],r,n+1);return i}else return t.concat(e)}function JA(){throw new Error('No "matrix" implementation available')}var x0="size",QA=["typed","config","?matrix"],XA=Mt(x0,QA,t=>{var{typed:e,config:r,matrix:n}=t;return e(x0,{Matrix:function(a){return a.create(a.size())},Array:Ti,string:function(a){return r.matrix==="Array"?[a.length]:n([a.length])},"number | Complex | BigNumber | Unit | boolean | null":function(a){return r.matrix==="Array"?[]:n?n([]):JA()}})}),L0="add",eC=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],tC=Mt(L0,eC,t=>{var{typed:e,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:a,SparseMatrix:o,concat:s}=t,l=c1({typed:e}),p=EA({typed:e,equalScalar:i}),f=h1({typed:e,DenseMatrix:a}),h=d1({typed:e,matrix:r,concat:s});return e(L0,{"any, any":n,"any, any, ...any":e.referToSelf(d=>(g,b,v)=>{for(var _=d(g,b),D=0;D<v.length;D++)_=d(_,v[D]);return _})},h({elop:n,DS:l,SS:p,Ss:f}))}),R0="dot",rC=["typed","addScalar","multiplyScalar","conj","size"],nC=Mt(R0,rC,t=>{var{typed:e,addScalar:r,multiplyScalar:n,conj:i,size:a}=t;return e(R0,{"Array | DenseMatrix, Array | DenseMatrix":s,"SparseMatrix, SparseMatrix":l});function o(f,h){var d=p(f),g=p(h),b,v;if(d.length===1)b=d[0];else if(d.length===2&&d[1]===1)b=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(g.length===1)v=g[0];else if(g.length===2&&g[1]===1)v=g[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+g.join(", ")+")");if(b!==v)throw new RangeError("Vectors must have equal length ("+b+" != "+v+")");if(b===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return b}function s(f,h){var d=o(f,h),g=Jr(f)?f._data:f,b=Jr(f)?f._datatype:void 0,v=Jr(h)?h._data:h,_=Jr(h)?h._datatype:void 0,D=p(f).length===2,S=p(h).length===2,w=r,C=n;if(b&&_&&b===_&&typeof b=="string"){var E=b;w=e.find(r,[E,E]),C=e.find(n,[E,E])}if(!D&&!S){for(var B=C(i(g[0]),v[0]),k=1;k<d;k++)B=w(B,C(i(g[k]),v[k]));return B}if(!D&&S){for(var O=C(i(g[0]),v[0][0]),x=1;x<d;x++)O=w(O,C(i(g[x]),v[x][0]));return O}if(D&&!S){for(var K=C(i(g[0][0]),v[0]),$=1;$<d;$++)K=w(K,C(i(g[$][0]),v[$]));return K}if(D&&S){for(var X=C(i(g[0][0]),v[0][0]),j=1;j<d;j++)X=w(X,C(i(g[j][0]),v[j][0]));return X}}function l(f,h){o(f,h);for(var d=f._index,g=f._values,b=h._index,v=h._values,_=0,D=r,S=n,w=0,C=0;w<d.length&&C<b.length;){var E=d[w],B=b[C];if(E<B){w++;continue}if(E>B){C++;continue}E===B&&(_=D(_,S(g[w],v[C])),w++,C++)}return _}function p(f){return Jr(f)?f.size():a(f)}}),iC=TE({config:eo}),aC=LE({}),uC=jE({}),qf=WE({}),so=KE({Matrix:qf}),un=x2({BigNumber:iC,Complex:aC,DenseMatrix:so,Fraction:uC}),oo=fA({typed:un}),sC=$A({typed:un}),lo=tA({config:eo,typed:un}),oC=YE({typed:un}),g1=zA({typed:un}),v1=iA({Matrix:qf,equalScalar:lo,typed:un}),lC=oA({typed:un}),wu=uA({DenseMatrix:so,Matrix:qf,SparseMatrix:v1,typed:un}),fC=XA({matrix:wu,config:eo,typed:un}),m1=ZA({isInteger:oC,matrix:wu,typed:un}),Lr=tC({DenseMatrix:so,SparseMatrix:v1,addScalar:oo,concat:m1,equalScalar:lo,matrix:wu,typed:un}),cC=nC({addScalar:oo,conj:sC,multiplyScalar:g1,size:fC,typed:un}),Hr=WA({addScalar:oo,dot:cC,equalScalar:lo,matrix:wu,multiplyScalar:g1,typed:un}),ds=GA({DenseMatrix:so,addScalar:oo,concat:m1,equalScalar:lo,matrix:wu,typed:un,unaryMinus:lC});function hC(t){let e,r,n;return{c(){e=nt("circle"),this.h()},l(i){e=it(i,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),R(e).forEach(M),this.h()},h(){F(e,"cx",r=t[0][0]),F(e,"cy",n=t[0][1]),F(e,"r",t[1]),F(e,"stroke",t[3]),F(e,"stroke-width",t[2]),xt(e,"fill","rgba(0,0,0,0)")},m(i,a){le(i,e,a)},p(i,[a]){a&1&&r!==(r=i[0][0])&&F(e,"cx",r),a&1&&n!==(n=i[0][1])&&F(e,"cy",n),a&2&&F(e,"r",i[1]),a&8&&F(e,"stroke",i[3]),a&4&&F(e,"stroke-width",i[2])},i:Ce,o:Ce,d(i){i&&M(e)}}}function dC(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class Wf extends Xe{constructor(e){super(),et(this,e,dC,hC,tt,{xy:0,radius:1,stroke:2,color:3})}}function pC(t){let e,r,n,i,a;return{c(){e=nt("circle"),this.h()},l(o){e=it(o,"circle",{cx:!0,cy:!0,r:!0}),R(e).forEach(M),this.h()},h(){F(e,"cx",r=t[0][0]),F(e,"cy",n=t[0][1]),F(e,"r",t[1]),xt(e,"fill",t[2])},m(o,s){le(o,e,s),i||(a=[ve(e,"mouseover",t[3]),ve(e,"mouseout",t[4]),ve(e,"mousedown",t[5]),ve(e,"touchstart",t[5])],i=!0)},p(o,[s]){s&1&&r!==(r=o[0][0])&&F(e,"cx",r),s&1&&n!==(n=o[0][1])&&F(e,"cy",n),s&2&&F(e,"r",o[1]),s&4&&xt(e,"fill",o[2])},i:Ce,o:Ce,d(o){o&&M(e),i=!1,Wt(a)}}}function gC(t,e,r){let{xy:n=[100,100]}=e,{radius:i=5}=e,{color:a="black"}=e,{hoverColor:o="white"}=e,{handleMouseDown:s=d=>{}}=e,l=a;function p(){r(2,l=o)}function f(){r(2,l=a)}function h(d){s(d)}return t.$$set=d=>{"xy"in d&&r(0,n=d.xy),"radius"in d&&r(1,i=d.radius),"color"in d&&r(6,a=d.color),"hoverColor"in d&&r(7,o=d.hoverColor),"handleMouseDown"in d&&r(8,s=d.handleMouseDown)},[n,i,l,p,f,h,a,o,s]}class Pa extends Xe{constructor(e){super(),et(this,e,gC,pC,tt,{xy:0,radius:1,color:6,hoverColor:7,handleMouseDown:8})}}function vC(t){let e,r,n,i,a;return{c(){e=nt("line"),this.h()},l(o){e=it(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-dasharray":!0,"stroke-width":!0}),R(e).forEach(M),this.h()},h(){F(e,"x1",r=t[0][0]),F(e,"y1",n=t[0][1]),F(e,"x2",i=t[1][0]),F(e,"y2",a=t[1][1]),F(e,"stroke",t[3]),F(e,"stroke-dasharray","10,10"),F(e,"stroke-width",t[2])},m(o,s){le(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&F(e,"x1",r),s&1&&n!==(n=o[0][1])&&F(e,"y1",n),s&2&&i!==(i=o[1][0])&&F(e,"x2",i),s&2&&a!==(a=o[1][1])&&F(e,"y2",a),s&8&&F(e,"stroke",o[3]),s&4&&F(e,"stroke-width",o[2])},i:Ce,o:Ce,d(o){o&&M(e)}}}function mC(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class _1 extends Xe{constructor(e){super(),et(this,e,mC,vC,tt,{p1:0,p2:1,stroke:2,color:3})}}function _C(t){let e,r,n,i,a,o,s,l;return{c(){e=nt("foreignObject"),r=W("div"),n=W("p"),i=Oe(t[2]),this.h()},l(p){e=it(p,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var f=R(e);r=H(f,"DIV",{class:!0});var h=R(r);n=H(h,"P",{});var d=R(n);i=Me(d,t[2]),d.forEach(M),h.forEach(M),f.forEach(M),this.h()},h(){xt(n,"color",t[3]),xt(n,"user-select","none"),xt(n,"margin","0"),xt(n,"pointer-events","none"),xt(n,"text-align",t[4]),xt(n,"font-size",`${t[5]}px`),xt(n,"font-family","sans-serif"),xt(n,"font-style","italic"),F(r,"class","h-full flex flex-col justify-center"),F(e,"x",a=t[0][0]),F(e,"y",o=t[0][1]),F(e,"width",s=t[1][0]),F(e,"height",l=t[1][1])},m(p,f){le(p,e,f),I(e,r),I(r,n),I(n,i)},p(p,[f]){f&4&&wr(i,p[2]),f&8&&xt(n,"color",p[3]),f&16&&xt(n,"text-align",p[4]),f&32&&xt(n,"font-size",`${p[5]}px`),f&1&&a!==(a=p[0][0])&&F(e,"x",a),f&1&&o!==(o=p[0][1])&&F(e,"y",o),f&2&&s!==(s=p[1][0])&&F(e,"width",s),f&2&&l!==(l=p[1][1])&&F(e,"height",l)},i:Ce,o:Ce,d(p){p&&M(e)}}}function bC(t,e,r){let{xy:n=[100,100]}=e,{wh:i=[100,100]}=e,{text:a=""}=e,{color:o="rgba(96,117,151, 1)"}=e,{textAlign:s="center"}=e,{fontSize:l=12}=e;return t.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,i=p.wh),"text"in p&&r(2,a=p.text),"color"in p&&r(3,o=p.color),"textAlign"in p&&r(4,s=p.textAlign),"fontSize"in p&&r(5,l=p.fontSize)},[n,i,a,o,s,l]}class Eu extends Xe{constructor(e){super(),et(this,e,bC,_C,tt,{xy:0,wh:1,text:2,color:3,textAlign:4,fontSize:5})}}function DC(t){let e,r,n,i,a,o,s,l,p,f,h;return{c(){e=nt("circle"),i=Se(),a=nt("foreignObject"),o=W("p"),s=Oe(t[4]),this.h()},l(d){e=it(d,"circle",{cx:!0,cy:!0,r:!0}),R(e).forEach(M),i=Be(d),a=it(d,"foreignObject",{x:!0,y:!0,width:!0,height:!0});var g=R(a);o=H(g,"P",{style:!0,class:!0});var b=R(o);s=Me(b,t[4]),b.forEach(M),g.forEach(M),this.h()},h(){F(e,"cx",r=t[0][0]),F(e,"cy",n=t[0][1]),F(e,"r",t[1]),xt(e,"fill",t[3]),xt(o,"color",t[2]),xt(o,"user-select","none"),xt(o,"margin","0"),F(o,"class","heavy svelte-6if1p2"),F(a,"x",l=t[0][0]-t[1]),F(a,"y",p=t[0][1]-t[1]),F(a,"width",f=t[1]*2),F(a,"height",h=t[1]*2)},m(d,g){le(d,e,g),le(d,i,g),le(d,a,g),I(a,o),I(o,s)},p(d,[g]){g&1&&r!==(r=d[0][0])&&F(e,"cx",r),g&1&&n!==(n=d[0][1])&&F(e,"cy",n),g&2&&F(e,"r",d[1]),g&8&&xt(e,"fill",d[3]),g&16&&wr(s,d[4]),g&4&&xt(o,"color",d[2]),g&3&&l!==(l=d[0][0]-d[1])&&F(a,"x",l),g&3&&p!==(p=d[0][1]-d[1])&&F(a,"y",p),g&2&&f!==(f=d[1]*2)&&F(a,"width",f),g&2&&h!==(h=d[1]*2)&&F(a,"height",h)},i:Ce,o:Ce,d(d){d&&M(e),d&&M(i),d&&M(a)}}}function yC(t,e,r){let{xy:n=[100,100]}=e,{radius:i=25}=e,{textColor:a="rgba(96,117,151, 1)"}=e,{bgColor:o="black"}=e,{weight:s=""}=e;return t.$$set=l=>{"xy"in l&&r(0,n=l.xy),"radius"in l&&r(1,i=l.radius),"textColor"in l&&r(2,a=l.textColor),"bgColor"in l&&r(3,o=l.bgColor),"weight"in l&&r(4,s=l.weight)},[n,i,a,o,s]}class wC extends Xe{constructor(e){super(),et(this,e,yC,DC,tt,{xy:0,radius:1,textColor:2,bgColor:3,weight:4})}}function Ln(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=360+Math.atan2(i,n)*180/Math.PI,o=Math.sqrt(n*n+i*i);return[a%360,o/r]}function Rr(t,e,r){const n=e[0]%360*Math.PI/180,i=[r*e[1]*Math.cos(n),r*e[1]*Math.sin(n)];return Lr(t,i)}function vu(t,e,r){const n=t[0]-e[0],i=t[1]-e[1],a=Math.sqrt(n*n+i*i),o=r/a,s=e[0]+n*o,l=e[1]+i*o;return[s,l]}function EC(t,e,r){const n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)<r}function Hf(t,e){const r=e%360*Math.PI/180;let n,i;const a=Math.cos(r),o=Math.sin(r);return n=(t[0]+5)*-1.2*a,i=(t[1]+5)*-1.2*o,n-=t[0],i-=t[1],[n,i]}function Wr(t){return t<0?360+-1*(Math.abs(t)%360):t>360?t%360:t}function AC(t){return Math.round(t*100)}function Or(t){return Math.round(Math.max(1-Math.pow(1-t,2),.25)*100)/100}function fo(t){let e="parsedWeight";switch(t){case mt.Circle:e="circleWeight";break;case mt.Bars:e="barWeight";break;case mt.Embed:e="embedWeight";break;case mt.Pie:e="pieWeight";break;case mt.Ring:e="ringWeight";break}return e}function CC(t){const e=t.weightMode,r=fo(e);return t.weightedPrompts?Math.max(...Object.values(t.weightedPrompts).map(n=>n[r])):0}function FC(t){const e=t.weightMode,r=fo(e);return t.weightedPrompts?Object.values(t.weightedPrompts).reduce((n,i)=>n+i[r],0):0}function U0(t,e){const r=t.weightMode,n=fo(r);return t.weightedPrompts[e]?t.weightedPrompts[e][n]/CC(t):0}function Pi(t,e){const r=t.weightMode,n=fo(r);if(!t.weightedPrompts[e])return 0;const i=t.weightedPrompts[e][n];return AC((i||0)/FC(t))}function SC(t,e,r){const a=r*.6,o=Math.floor(t/a);return Math.ceil(e/o)*r*1.2}function Vr(t,e,r){const n=SC(t,e,r)+10;return[t,n]}function Oa(t,e){const r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}function ka(t){return Hr(t,.5)}function Yn(t){const e=t.currentTarget;if(!e)throw new Error("No SVG element found");var r=e.createSVGPoint();t instanceof TouchEvent?(r.x=t.touches[0].clientX,r.y=t.touches[0].clientY):(r.x=t.clientX,r.y=t.clientY);const n=e.getScreenCTM();if(!n)throw new Error("No DOM Matrix found");const i=r.matrixTransform(n.inverse());return[i.x,i.y]}function Is(t){const e=t.reduce((r,n)=>Lr(r,n),[0,0]);return Hr(e,1/t.length)}function V0(t,e,r){const n=t.slice();return n[18]=e[r][0],n[19]=e[r][1],n}function j0(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,a;e=new Wf({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),s=[];for(let f=0;f<o.length;f+=1)s[f]=z0(V0(t,o,f));const l=f=>_e(s[f],1,1,()=>{s[f]=null});let p=n&&q0(t);return{c(){je(e.$$.fragment);for(let f=0;f<s.length;f+=1)s[f].c();r=wt(),p&&p.c(),i=wt()},l(f){ze(e.$$.fragment,f);for(let h=0;h<s.length;h+=1)s[h].l(f);r=wt(),p&&p.l(f),i=wt()},m(f,h){qe(e,f,h);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(f,h);le(f,r,h),p&&p.m(f,h),le(f,i,h),a=!0},p(f,h){const d={};if(h&1&&(d.xy=f[0]),h&2&&(d.radius=f[1]),e.$set(d),h&895){o=Object.entries(f[5].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=V0(f,o,g);s[g]?(s[g].p(b,h),he(s[g],1)):(s[g]=z0(b),s[g].c(),he(s[g],1),s[g].m(r.parentNode,r))}for(rr(),g=o.length;g<s.length;g+=1)l(g);nr()}h&32&&(n=Object.entries(f[5].weightedPrompts).length>0),n?p?(p.p(f,h),h&32&&he(p,1)):(p=q0(f),p.c(),he(p,1),p.m(i.parentNode,i)):p&&(rr(),_e(p,1,1,()=>{p=null}),nr())},i(f){if(!a){he(e.$$.fragment,f);for(let h=0;h<o.length;h+=1)he(s[h]);he(p),a=!0}},o(f){_e(e.$$.fragment,f),s=s.filter(Boolean);for(let h=0;h<s.length;h+=1)_e(s[h]);_e(p),a=!1},d(f){We(e,f),Xs(s,f),f&&M(r),p&&p.d(f),f&&M(i)}}}function z0(t){let e,r,n,i,a;e=new _1({props:{p1:Rr(t[0],t[5].circleMarker,t[1]),p2:t[6][t[18]].xy}});function o(){return t[12](t[18])}return r=new Pa({props:{xy:t[6][t[18]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:o}}),n=new Eu({props:{xy:t[9](t[6][t[18]].xy,Vr(t[3],t[19].text.length,t[4])),color:`rgba(255,255,255,${Or(t[6][t[18]].unitWeight)}`,wh:Vr(t[3],t[19].text.length,t[4]),fontSize:t[4],text:t[19].text}}),i=new wC({props:{xy:Hr(Lr(Rr(t[0],t[5].circleMarker,t[1]),t[6][t[18]].xy),.5),weight:Pi(t[5],t[18]),radius:15,textColor:`rgba(255,255,255,${Or(t[6][t[18]].unitWeight)}`,bgColor:"rgb(8, 11, 22)"}}),{c(){je(e.$$.fragment),je(r.$$.fragment),je(n.$$.fragment),je(i.$$.fragment)},l(s){ze(e.$$.fragment,s),ze(r.$$.fragment,s),ze(n.$$.fragment,s),ze(i.$$.fragment,s)},m(s,l){qe(e,s,l),qe(r,s,l),qe(n,s,l),qe(i,s,l),a=!0},p(s,l){t=s;const p={};l&35&&(p.p1=Rr(t[0],t[5].circleMarker,t[1])),l&96&&(p.p2=t[6][t[18]].xy),e.$set(p);const f={};l&96&&(f.xy=t[6][t[18]].xy),l&4&&(f.radius=t[2]),l&32&&(f.handleMouseDown=o),r.$set(f);const h={};l&120&&(h.xy=t[9](t[6][t[18]].xy,Vr(t[3],t[19].text.length,t[4]))),l&96&&(h.color=`rgba(255,255,255,${Or(t[6][t[18]].unitWeight)}`),l&56&&(h.wh=Vr(t[3],t[19].text.length,t[4])),l&16&&(h.fontSize=t[4]),l&32&&(h.text=t[19].text),n.$set(h);const d={};l&99&&(d.xy=Hr(Lr(Rr(t[0],t[5].circleMarker,t[1]),t[6][t[18]].xy),.5)),l&32&&(d.weight=Pi(t[5],t[18])),l&96&&(d.textColor=`rgba(255,255,255,${Or(t[6][t[18]].unitWeight)}`),i.$set(d)},i(s){a||(he(e.$$.fragment,s),he(r.$$.fragment,s),he(n.$$.fragment,s),he(i.$$.fragment,s),a=!0)},o(s){_e(e.$$.fragment,s),_e(r.$$.fragment,s),_e(n.$$.fragment,s),_e(i.$$.fragment,s),a=!1},d(s){We(e,s),We(r,s),We(n,s),We(i,s)}}}function q0(t){let e,r;return e=new Pa({props:{xy:Rr(t[0],t[5].circleMarker,t[1]),radius:10,color:"rgba(136,157,191, 1)",handleMouseDown:t[13]}}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},p(n,i){const a={};i&35&&(a.xy=Rr(n[0],n[5].circleMarker,n[1])),e.$set(a)},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function BC(t){let e,r,n,i,a=t[6]&&t[5].weightedPrompts&&j0(t);return{c(){e=nt("svg"),a&&a.c(),this.h()},l(o){e=it(o,"svg",{id:!0,class:!0});var s=R(e);a&&a.l(s),s.forEach(M),this.h()},h(){F(e,"id","svg"),F(e,"class","w-full h-full")},m(o,s){le(o,e,s),a&&a.m(e,null),r=!0,n||(i=[ve(e,"mousemove",t[10]),ve(e,"touchmove",t[10]),ve(e,"mouseup",t[7]),ve(e,"touchend",t[7]),ve(e,"dblclick",t[11])],n=!0)},p(o,[s]){o[6]&&o[5].weightedPrompts?a?(a.p(o,s),s&96&&he(a,1)):(a=j0(o),a.c(),he(a,1),a.m(e,null)):a&&(rr(),_e(a,1,1,()=>{a=null}),nr())},i(o){r||(he(a),r=!0)},o(o){_e(a),r=!1},d(o){o&&M(e),a&&a.d(),n=!1,Wt(i)}}}function W0(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const o=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function OC(t,e,r){let n,i;$e(t,ot,E=>r(5,i=E));let{center:a=[450,450]}=e,{radius:o=250}=e,{pointRadius:s=10}=e,{textWidth:l=150}=e,{fontSize:p=13}=e,f=[0,0],h=null;function d(E){h=null}function g(E){h=E}function b(E,B){let k=Ln(E,a,o)[0]-180;k<0&&(k+=360);const O=Hf(ka(B),k);return Lr(E,O)}function v(E){const B=EC(E,a,o)?Ln(E,a,o):Ln(vu(E,a,o),a,o);r(6,n=S(i.weightedPrompts,a,o,i.circleWeightScaling,i.circleExponentialScaling,B,i.circleAngles))}function _(E){if(f=Yn(E),h==="main")v(f);else if(h){const B={...i.weightedPrompts[h]},k=vu(f,a,o),O=Ln(k,a,o)[0],x={...i.circleAngles};x[B.id]=O;const K={...i.weightedPrompts};K[h]=B,r(6,n=S(K,a,o,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,x))}}function D(E){f=Yn(E),v(f)}function S(E,B,k,O,x,K,$){if(!E||!B||!k||!O||!K)return null;let X=Object.entries(E).reduce((z,[V,J])=>(z[V]={xy:Rr(B,[$[V],1],k)},z),{});X=Object.entries(X).reduce((z,[V,J])=>(z[V]={...z[V],distance:Oa(J.xy,Rr(B,K,k))},z),X);const j=Object.values(X).reduce((z,V)=>z+V.distance,0);X=Object.entries(X).reduce((z,[V,J])=>(z[V]={...z[V],unitDistance:Math.round(J.distance/j*100)/100},z),X),X=Object.entries(X).reduce((z,[V,J])=>(z[V]={...z[V],invertedUnitDistance:Math.round((1-J.unitDistance)*100)/100},z),X),X=Object.entries(X).reduce((z,[V,J])=>(x?z[V]={...z[V],unitWeight:Math.round(Math.pow(1-J.distance/(2*k),O)*100)/100}:z[V]={...z[V],unitWeight:Math.round((1-J.distance/(2*k))*100)/100},z),X);const U={...E};return Object.entries(X).forEach(([z,V])=>{U[z].circleWeight=V.unitWeight}),ot.update({...i,circleMarker:K,weightedPrompts:U,circleAngles:$}),X}const w=E=>g(E),C=()=>g("main");return t.$$set=E=>{"center"in E&&r(0,a=E.center),"radius"in E&&r(1,o=E.radius),"pointRadius"in E&&r(2,s=E.pointRadius),"textWidth"in E&&r(3,l=E.textWidth),"fontSize"in E&&r(4,p=E.fontSize)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(i.circleAngles).length!==Object.keys(i.weightedPrompts).length&&ot.update({...i,circleAngles:W0(i.weightedPrompts,{})}),t.$$.dirty&35&&r(6,n=S(i.weightedPrompts,a,o,i.circleWeightScaling,i.circleExponentialScaling,i.circleMarker,i.circleAngles||W0(i.weightedPrompts,{})))},[a,o,s,l,p,i,n,d,g,b,_,D,w,C]}class MC extends Xe{constructor(e){super(),et(this,e,OC,BC,tt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function H0(t){let e,r,n,i,a,o,s,l;return{c(){e=W("div"),r=W("label"),n=W("span"),i=Oe("Scaling Power"),a=Se(),o=W("input"),this.h()},l(p){e=H(p,"DIV",{class:!0});var f=R(e);r=H(f,"LABEL",{class:!0});var h=R(r);n=H(h,"SPAN",{class:!0});var d=R(n);i=Me(d,"Scaling Power"),d.forEach(M),h.forEach(M),a=Be(f),o=H(f,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),f.forEach(M),this.h()},h(){F(n,"class","label-text"),F(r,"class","label"),F(o,"type","range"),F(o,"min","0.5"),F(o,"max","3"),F(o,"step","0.1"),F(o,"class","range range-xs"),F(e,"class","w-full px-2")},m(p,f){le(p,e,f),I(e,r),I(r,n),I(n,i),I(e,a),I(e,o),nn(o,t[0]),s||(l=[ve(o,"change",t[6]),ve(o,"input",t[6])],s=!0)},p(p,f){f&1&&nn(o,p[0])},d(p){p&&M(e),s=!1,Wt(l)}}}function PC(t){let e,r,n,i,a,o,s,l,p,f,h,d,g,b,v;r=new MC({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let _=t[1]&&H0(t);return{c(){e=W("div"),je(r.$$.fragment),i=Se(),a=W("div"),o=W("div"),s=W("label"),l=W("span"),p=Oe("Exponential Scaling"),f=Se(),h=W("input"),d=Se(),_&&_.c(),this.h()},l(D){e=H(D,"DIV",{class:!0});var S=R(e);ze(r.$$.fragment,S),S.forEach(M),i=Be(D),a=H(D,"DIV",{class:!0});var w=R(a);o=H(w,"DIV",{class:!0});var C=R(o);s=H(C,"LABEL",{class:!0});var E=R(s);l=H(E,"SPAN",{class:!0});var B=R(l);p=Me(B,"Exponential Scaling"),B.forEach(M),E.forEach(M),f=Be(C),h=H(C,"INPUT",{type:!0,class:!0}),C.forEach(M),d=Be(w),_&&_.l(w),w.forEach(M),this.h()},h(){F(e,"class","w-full h-full"),Ni(()=>t[4].call(e)),F(l,"class","label-text"),F(s,"class","label"),F(h,"type","checkbox"),F(h,"class","toggle toggle-xs"),F(o,"class","w-52 px-2"),F(a,"class","px-2 py-4 pb-0 flex")},m(D,S){le(D,e,S),qe(r,e,null),n=Ma(e,t[4].bind(e)),le(D,i,S),le(D,a,S),I(a,o),I(o,s),I(s,l),I(l,p),I(o,f),I(o,h),h.checked=t[1],I(a,d),_&&_.m(a,null),g=!0,b||(v=ve(h,"change",t[5]),b=!0)},p(D,[S]){const w={};S&12&&(w.center=[Math.round(D[2]/2),Math.round(D[3]/2)]),S&12&&(w.radius=Math.round(Math.min(D[2],D[3])/2)-150),r.$set(w),S&2&&(h.checked=D[1]),D[1]?_?_.p(D,S):(_=H0(D),_.c(),_.m(a,null)):_&&(_.d(1),_=null)},i(D){g||(he(r.$$.fragment,D),g=!0)},o(D){_e(r.$$.fragment,D),g=!1},d(D){D&&M(e),We(r),n(),D&&M(i),D&&M(a),_&&_.d(),b=!1,v()}}}function kC(t,e,r){let n;$e(t,ot,h=>r(7,n=h));let i,a,o=n.circleWeightScaling||2,s=Uf(n.circleExponentialScaling)?!0:n.circleExponentialScaling;function l(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function p(){s=this.checked,r(1,s)}function f(){o=Mp(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&ot.update({...ot.get(),circleExponentialScaling:s,circleWeightScaling:o})},[o,s,i,a,l,p,f]}class TC extends Xe{constructor(e){super(),et(this,e,kC,PC,tt,{})}}function IC(t){let e,r,n,i,a,o,s;return{c(){e=nt("rect"),this.h()},l(l){e=it(l,"rect",{x:!0,y:!0,width:!0,height:!0}),R(e).forEach(M),this.h()},h(){F(e,"x",r=t[0][0]),F(e,"y",n=t[0][1]),F(e,"width",i=Math.max(t[1][0],0)),F(e,"height",a=Math.max(t[1][1],0)),xt(e,"fill",t[2])},m(l,p){le(l,e,p),o||(s=[ve(e,"mouseover",function(){Kn(t[4])&&t[4].apply(this,arguments)}),ve(e,"mouseout",function(){Kn(t[5])&&t[5].apply(this,arguments)}),ve(e,"mousedown",function(){Kn(t[3])&&t[3].apply(this,arguments)}),ve(e,"touchstart",function(){Kn(t[3])&&t[3].apply(this,arguments)})],o=!0)},p(l,[p]){t=l,p&1&&r!==(r=t[0][0])&&F(e,"x",r),p&1&&n!==(n=t[0][1])&&F(e,"y",n),p&2&&i!==(i=Math.max(t[1][0],0))&&F(e,"width",i),p&2&&a!==(a=Math.max(t[1][1],0))&&F(e,"height",a),p&4&&xt(e,"fill",t[2])},i:Ce,o:Ce,d(l){l&&M(e),o=!1,Wt(s)}}}function NC(t,e,r){let{xy:n=[500,500]}=e,{wh:i=[100,100]}=e,{color:a="rgba(46,67,101, 0.4)"}=e,{handleMouseDown:o=p=>{}}=e,{handleMouseOver:s=p=>{}}=e,{handleMouseOut:l=p=>{}}=e;return t.$$set=p=>{"xy"in p&&r(0,n=p.xy),"wh"in p&&r(1,i=p.wh),"color"in p&&r(2,a=p.color),"handleMouseDown"in p&&r(3,o=p.handleMouseDown),"handleMouseOver"in p&&r(4,s=p.handleMouseOver),"handleMouseOut"in p&&r(5,l=p.handleMouseOut)},[n,i,a,o,s,l]}class Il extends Xe{constructor(e){super(),et(this,e,NC,IC,tt,{xy:0,wh:1,color:2,handleMouseDown:3,handleMouseOver:4,handleMouseOut:5})}}function G0(t,e,r){const n=t.slice();return n[51]=e[r][0],n[52]=e[r][1],n[53]=e[r][2],n}function K0(t,e){let r,n,i,a,o,s;n=new Eu({props:{xy:[e[3][0]+e[0],e[3][1]+e[52]*e[4]+e[52]],color:`rgba(255,255,255,${Or(e[53].barWeight/e[12]||0)})`,wh:e[5][e[51]],text:e[53].text,textAlign:"right",fontSize:e[1]}});function l(...d){return e[39](e[51],...d)}i=new Il({props:{color:e[13](0),handleMouseOver:l,handleMouseOut:e[40],xy:[e[10],e[3][1]+e[52]*e[4]+e[52]],wh:[e[11],e[4]-2]}});function p(...d){return e[41](e[51],...d)}a=new Il({props:{color:e[8]===e[51]||e[7]===e[51]||e[9]===e[51]?e[13](Or((e[53].barWeight||0)/e[12]+.15)):e[13](Or(e[53].barWeight||0)),handleMouseOver:p,handleMouseOut:e[42],xy:[e[10],e[3][1]+e[52]*e[4]+e[52]],wh:[(e[53].barWeight||0)*e[11],e[4]-2]}});function f(...d){return e[43](e[51],...d)}function h(...d){return e[45](e[51],...d)}return o=new Il({props:{color:e[9]===e[51]?e[15]:e[14],handleMouseOver:f,handleMouseOut:e[44],handleMouseDown:h,xy:[e[10]+(e[53].barWeight||0)*e[11],e[3][1]+e[52]*e[4]+e[52]],wh:[e[2],e[4]-2]}}),{key:t,first:null,c(){r=wt(),je(n.$$.fragment),je(i.$$.fragment),je(a.$$.fragment),je(o.$$.fragment),this.h()},l(d){r=wt(),ze(n.$$.fragment,d),ze(i.$$.fragment,d),ze(a.$$.fragment,d),ze(o.$$.fragment,d),this.h()},h(){this.first=r},m(d,g){le(d,r,g),qe(n,d,g),qe(i,d,g),qe(a,d,g),qe(o,d,g),s=!0},p(d,g){e=d;const b={};g[0]&89&&(b.xy=[e[3][0]+e[0],e[3][1]+e[52]*e[4]+e[52]]),g[0]&4160&&(b.color=`rgba(255,255,255,${Or(e[53].barWeight/e[12]||0)})`),g[0]&96&&(b.wh=e[5][e[51]]),g[0]&64&&(b.text=e[53].text),g[0]&2&&(b.fontSize=e[1]),n.$set(b);const v={};g[0]&64&&(v.handleMouseOver=l),g[0]&1112&&(v.xy=[e[10],e[3][1]+e[52]*e[4]+e[52]]),g[0]&2064&&(v.wh=[e[11],e[4]-2]),i.$set(v);const _={};g[0]&5056&&(_.color=e[8]===e[51]||e[7]===e[51]||e[9]===e[51]?e[13](Or((e[53].barWeight||0)/e[12]+.15)):e[13](Or(e[53].barWeight||0))),g[0]&64&&(_.handleMouseOver=p),g[0]&1112&&(_.xy=[e[10],e[3][1]+e[52]*e[4]+e[52]]),g[0]&2128&&(_.wh=[(e[53].barWeight||0)*e[11],e[4]-2]),a.$set(_);const D={};g[0]&576&&(D.color=e[9]===e[51]?e[15]:e[14]),g[0]&64&&(D.handleMouseOver=f),g[0]&64&&(D.handleMouseDown=h),g[0]&3160&&(D.xy=[e[10]+(e[53].barWeight||0)*e[11],e[3][1]+e[52]*e[4]+e[52]]),g[0]&20&&(D.wh=[e[2],e[4]-2]),o.$set(D)},i(d){s||(he(n.$$.fragment,d),he(i.$$.fragment,d),he(a.$$.fragment,d),he(o.$$.fragment,d),s=!0)},o(d){_e(n.$$.fragment,d),_e(i.$$.fragment,d),_e(a.$$.fragment,d),_e(o.$$.fragment,d),s=!1},d(d){d&&M(r),We(n,d),We(i,d),We(a,d),We(o,d)}}}function xC(t){let e,r=[],n=new Map,i,a,o,s=t[6];const l=p=>p[51];for(let p=0;p<s.length;p+=1){let f=G0(t,s,p),h=l(f);n.set(h,r[p]=K0(h,f))}return{c(){e=nt("svg");for(let p=0;p<r.length;p+=1)r[p].c();this.h()},l(p){e=it(p,"svg",{id:!0,class:!0});var f=R(e);for(let h=0;h<r.length;h+=1)r[h].l(f);f.forEach(M),this.h()},h(){F(e,"id","svg"),F(e,"class","w-full h-full")},m(p,f){le(p,e,f);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(e,null);i=!0,a||(o=[ve(e,"mousemove",t[25]),ve(e,"mouseup",t[24]),ve(e,"touchend",t[24],{passive:!0}),ve(e,"touchmove",t[25]),ve(e,"dblclick",t[23])],a=!0)},p(p,f){f[0]&8388607&&(s=p[6],rr(),r=Bn(r,f,l,1,p,s,n,e,Pp,K0,null,G0),nr())},i(p){if(!i){for(let f=0;f<s.length;f+=1)he(r[f]);i=!0}},o(p){for(let f=0;f<r.length;f+=1)_e(r[f]);i=!1},d(p){p&&M(e);for(let f=0;f<r.length;f+=1)r[f].d();a=!1,Wt(o)}}}function LC(t,e,r){let n,i,a,o,s,l,p,f,h,d,g,b,v;$e(t,ot,Te=>r(38,v=Te));let{center:_=[0,0]}=e,{dimensions:D=[100,100]}=e,{maxWidth:S=1e3}=e,{pointRadius:w=10}=e,{textWidth:C=250}=e,{horizontalPad:E=20}=e,{verticalPad:B=2}=e,{textBarPad:k=10}=e,{fontSize:O=13}=e,{handleWidth:x=20}=e,K=Te=>`rgba(46,67,101, ${Te})`,$=Te=>`rgba(76,97,131, ${Te})`,X=null,j=null,U=null,z=$(.3),V=$(.8),J=null,ae=null,ne=null;function se(Te){r(8,j=Te)}function De(Te){r(7,X=Te)}function we(Te){r(9,U=Te)}function Fe(){r(8,j=null)}function xe(){r(7,X=null)}function ke(){r(9,U=null)}function Ue(Te){J=Te}function Ye(Te){let Ve=J!==null?J:j!==null?j:U!==null?U:X!==null?X:null;if(Ve===null)return;const Ot=Yn(Te);Je(Ve,Ot)}function Ke(){J=null,ae&&clearInterval(ae),ae=null,ne=null}function Je(Te,Ve){let Ft=Math.min(d,Math.max(0,Ve[0]-g))/d,$t={...v.weightedPrompts},G={...$t[Te]};G.barWeight=Ft,$t[Te]=G,ot.update({...v,weightedPrompts:$t})}function Le(Te){let Ve=J;if(Ve===null)return;const Ot=Yn(Te);if(Je(Ve,Ot),J!==null){let Ft=g+d+x,$t=g;Ot[0]>Ft&&!ae?(ne=Date.now(),ae=setInterval(()=>{if(!ne||Date.now()-ne<1e3)return;let G={...v.weightedPrompts};const Z=Object.entries(G).reduce((ee,[ce,ue])=>{const de=parseInt(ce);return de!==J?ee[de]={...ue,barWeight:Math.max(0,(ue.barWeight||0)-.01)}:ee[de]={...ue,barWeight:Math.min(1,(ue.barWeight||0)+.01)},ee},{});ot.update({...v,weightedPrompts:Z})},100)):Ot[0]<$t&&!ae?(ne=Date.now(),ae=setInterval(()=>{if(!ne||Date.now()-ne<1e3)return;let G={...v.weightedPrompts};const Z=Object.entries(G).reduce((ee,[ce,ue])=>{const de=parseInt(ce);return de!==J?ee[de]={...ue,barWeight:Math.min(1,(ue.barWeight||0)+.01)}:ee[de]={...ue,barWeight:Math.max(0,(ue.barWeight||0)-.01)},ee},{});ot.update({...v,weightedPrompts:Z})},100)):Ot[0]<Ft&&Ot[0]>$t&&ae&&(clearInterval(ae),ae=null,ne=null)}}const Dt=(Te,Ve)=>De(Te),Et=Te=>xe(),ht=(Te,Ve)=>se(Te),at=Te=>Fe(),Pt=(Te,Ve)=>we(Te),dr=Te=>ke(),Tt=(Te,Ve)=>Ue(Te);return t.$$set=Te=>{"center"in Te&&r(26,_=Te.center),"dimensions"in Te&&r(27,D=Te.dimensions),"maxWidth"in Te&&r(28,S=Te.maxWidth),"pointRadius"in Te&&r(29,w=Te.pointRadius),"textWidth"in Te&&r(30,C=Te.textWidth),"horizontalPad"in Te&&r(0,E=Te.horizontalPad),"verticalPad"in Te&&r(31,B=Te.verticalPad),"textBarPad"in Te&&r(32,k=Te.textBarPad),"fontSize"in Te&&r(1,O=Te.fontSize),"handleWidth"in Te&&r(2,x=Te.handleWidth)},t.$$.update=()=>{t.$$.dirty[1]&128&&r(6,n=Object.entries(v.weightedPrompts).map(([Te,Ve],Ot)=>[parseInt(Te),Ot,Ve])),t.$$.dirty[1]&128&&r(36,i=Object.keys(v.weightedPrompts).length),t.$$.dirty[0]&134217728&&r(35,a=[D[0]-50,D[1]-50]),t.$$.dirty[0]&1073741890&&r(5,o=n.reduce((Te,[Ve,Ot,Ft])=>{const[$t,G]=Vr(C,Ft.text.length,O);return Te[Ve]=[$t,G],Te},{})),t.$$.dirty[0]&32&&r(37,s=Math.max(...Object.values(o).map(([Te,Ve])=>Ve))),t.$$.dirty[1]&112&&r(4,l=Math.min(a[1]/i,s)),t.$$.dirty[0]&16|t.$$.dirty[1]&33&&r(34,p=l*i+B*Math.max(i-1,0)),t.$$.dirty[0]&268435456|t.$$.dirty[1]&16&&r(33,f=Math.min(a[0],S)),t.$$.dirty[0]&67108864|t.$$.dirty[1]&12&&r(3,h=[_[0]-f/2,_[1]-p/2]),t.$$.dirty[0]&1073741829|t.$$.dirty[1]&6&&r(11,d=f-k-C-2*E-x),t.$$.dirty[0]&1073741833|t.$$.dirty[1]&2&&r(10,g=h[0]+k+C+E),t.$$.dirty[1]&128&&r(12,b=Math.max(...Object.values(v.weightedPrompts).map(Te=>Te.barWeight||0)))},[E,O,x,h,l,o,n,X,j,U,g,d,b,K,z,V,se,De,we,Fe,xe,ke,Ue,Ye,Ke,Le,_,D,S,w,C,B,k,f,p,a,i,s,v,Dt,Et,ht,at,Pt,dr,Tt]}class RC extends Xe{constructor(e){super(),et(this,e,LC,xC,tt,{center:26,dimensions:27,maxWidth:28,pointRadius:29,textWidth:30,horizontalPad:0,verticalPad:31,textBarPad:32,fontSize:1,handleWidth:2},null,[-1,-1])}}function UC(t){let e,r,n,i;return r=new RC({props:{dimensions:t[2],center:t[3]}}),{c(){e=W("div"),je(r.$$.fragment),this.h()},l(a){e=H(a,"DIV",{class:!0});var o=R(e);ze(r.$$.fragment,o),o.forEach(M),this.h()},h(){F(e,"class","w-full h-full pt-10"),Ni(()=>t[4].call(e))},m(a,o){le(a,e,o),qe(r,e,null),n=Ma(e,t[4].bind(e)),i=!0},p(a,[o]){const s={};o&4&&(s.dimensions=a[2]),o&8&&(s.center=a[3]),r.$set(s)},i(a){i||(he(r.$$.fragment,a),i=!0)},o(a){_e(r.$$.fragment,a),i=!1},d(a){a&&M(e),We(r),n()}}}function VC(t,e,r){let n,i,a,o;function s(){a=this.clientWidth,o=this.clientHeight,r(0,a),r(1,o)}return t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[a||0,o||0]),t.$$.dirty&4&&r(3,i=ka(n))},[a,o,n,i,s]}class jC extends Xe{constructor(e){super(),et(this,e,VC,UC,tt,{})}}function zC(t){let e,r,n,i,a;return{c(){e=nt("line"),this.h()},l(o){e=it(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0}),R(e).forEach(M),this.h()},h(){F(e,"x1",r=t[0][0]),F(e,"y1",n=t[0][1]),F(e,"x2",i=t[1][0]),F(e,"y2",a=t[1][1]),F(e,"stroke",t[3]),F(e,"stroke-width",t[2])},m(o,s){le(o,e,s)},p(o,[s]){s&1&&r!==(r=o[0][0])&&F(e,"x1",r),s&1&&n!==(n=o[0][1])&&F(e,"y1",n),s&2&&i!==(i=o[1][0])&&F(e,"x2",i),s&2&&a!==(a=o[1][1])&&F(e,"y2",a),s&8&&F(e,"stroke",o[3]),s&4&&F(e,"stroke-width",o[2])},i:Ce,o:Ce,d(o){o&&M(e)}}}function qC(t,e,r){let{p1:n=[100,100]}=e,{p2:i=[100,100]}=e,{stroke:a=2}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"p1"in s&&r(0,n=s.p1),"p2"in s&&r(1,i=s.p2),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class WC extends Xe{constructor(e){super(),et(this,e,qC,zC,tt,{p1:0,p2:1,stroke:2,color:3})}}function $0(t,e,r){const n=t.slice();return n[27]=e[r][0],n[28]=e[r][1],n}function Y0(t){let e,r,n;e=new Wf({props:{xy:t[0],radius:t[1]}});let i=Object.entries(t[5].weightedPrompts),a=[];for(let s=0;s<i.length;s+=1)a[s]=Z0($0(t,i,s));const o=s=>_e(a[s],1,1,()=>{a[s]=null});return{c(){je(e.$$.fragment);for(let s=0;s<a.length;s+=1)a[s].c();r=wt()},l(s){ze(e.$$.fragment,s);for(let l=0;l<a.length;l+=1)a[l].l(s);r=wt()},m(s,l){qe(e,s,l);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,l);le(s,r,l),n=!0},p(s,l){const p={};if(l&1&&(p.xy=s[0]),l&2&&(p.radius=s[1]),e.$set(p),l&6015){i=Object.entries(s[5].weightedPrompts);let f;for(f=0;f<i.length;f+=1){const h=$0(s,i,f);a[f]?(a[f].p(h,l),he(a[f],1)):(a[f]=Z0(h),a[f].c(),he(a[f],1),a[f].m(r.parentNode,r))}for(rr(),f=i.length;f<a.length;f+=1)o(f);nr()}},i(s){if(!n){he(e.$$.fragment,s);for(let l=0;l<i.length;l+=1)he(a[l]);n=!0}},o(s){_e(e.$$.fragment,s),a=a.filter(Boolean);for(let l=0;l<a.length;l+=1)_e(a[l]);n=!1},d(s){We(e,s),Xs(a,s),s&&M(r)}}}function Z0(t){let e,r,n,i,a,o,s,l,p;e=new WC({props:{p1:t[0],p2:t[6][t[27]].xy}});function f(...b){return t[13](t[27],...b)}function h(...b){return t[14](t[27],...b)}function d(...b){return t[15](t[27],...b)}function g(){return t[16](t[27])}return a=new Pa({props:{xy:t[6][t[27]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:g}}),o=new Eu({props:{xy:t[9](t[6][t[27]].textXY,Vr(t[3],t[28].text.length,t[4])),color:`rgba(255,255,255,${Or(t[6][t[27]].unitWeight)}`,wh:Vr(t[3],t[28].text.length,t[4]),fontSize:t[4],text:t[28].text}}),{c(){je(e.$$.fragment),r=nt("path"),je(a.$$.fragment),je(o.$$.fragment),this.h()},l(b){ze(e.$$.fragment,b),r=it(b,"path",{d:!0,fill:!0}),R(r).forEach(M),ze(a.$$.fragment,b),ze(o.$$.fragment,b),this.h()},h(){F(r,"d",n=J0(t[0],t[1],t[6][t[27]].angle,t[6][t[27]].angle+t[6][t[27]].angleDiff)),F(r,"fill",i=`rgba(26,47,91,${Or(t[6][t[27]].unitWeight)/4}`)},m(b,v){qe(e,b,v),le(b,r,v),qe(a,b,v),qe(o,b,v),s=!0,l||(p=[ve(r,"mousewheel",f),ve(r,"touchstart",h),ve(r,"mousedown",d)],l=!0)},p(b,v){t=b;const _={};v&1&&(_.p1=t[0]),v&96&&(_.p2=t[6][t[27]].xy),e.$set(_),(!s||v&99&&n!==(n=J0(t[0],t[1],t[6][t[27]].angle,t[6][t[27]].angle+t[6][t[27]].angleDiff)))&&F(r,"d",n),(!s||v&96&&i!==(i=`rgba(26,47,91,${Or(t[6][t[27]].unitWeight)/4}`))&&F(r,"fill",i);const D={};v&96&&(D.xy=t[6][t[27]].xy),v&4&&(D.radius=t[2]),v&32&&(D.handleMouseDown=g),a.$set(D);const S={};v&120&&(S.xy=t[9](t[6][t[27]].textXY,Vr(t[3],t[28].text.length,t[4]))),v&96&&(S.color=`rgba(255,255,255,${Or(t[6][t[27]].unitWeight)}`),v&56&&(S.wh=Vr(t[3],t[28].text.length,t[4])),v&16&&(S.fontSize=t[4]),v&32&&(S.text=t[28].text),o.$set(S)},i(b){s||(he(e.$$.fragment,b),he(a.$$.fragment,b),he(o.$$.fragment,b),s=!0)},o(b){_e(e.$$.fragment,b),_e(a.$$.fragment,b),_e(o.$$.fragment,b),s=!1},d(b){We(e,b),b&&M(r),We(a,b),We(o,b),l=!1,Wt(p)}}}function HC(t){let e,r,n,i,a=t[6]&&t[5].weightedPrompts&&Y0(t);return{c(){e=nt("svg"),a&&a.c(),this.h()},l(o){e=it(o,"svg",{id:!0,class:!0});var s=R(e);a&&a.l(s),s.forEach(M),this.h()},h(){F(e,"id","svg"),F(e,"class","w-full h-full")},m(o,s){le(o,e,s),a&&a.m(e,null),r=!0,n||(i=[ve(e,"mousemove",t[11]),ve(e,"touchmove",t[11]),ve(e,"mouseup",t[7]),ve(e,"touchend",t[7])],n=!0)},p(o,[s]){o[6]&&o[5].weightedPrompts?a?(a.p(o,s),s&96&&he(a,1)):(a=Y0(o),a.c(),he(a,1),a.m(e,null)):a&&(rr(),_e(a,1,1,()=>{a=null}),nr())},i(o){r||(he(a),r=!0)},o(o){_e(a),r=!1},d(o){o&&M(e),a&&a.d(),n=!1,Wt(i)}}}function GC(t,e){if(t.length!==e.length)return!1;const r=t.length;let n=-1;for(let i=0;i<r;i++)if(e[i]===t[0]){n=i;break}if(n===-1)return!1;for(let i=0;i<r;i++)if(t[i]!==e[(i+n)%r])return!1;return!0}function J0(t,e,r,n){const i=t[0]+e*Math.cos(r*Math.PI/180),a=t[1]+e*Math.sin(r*Math.PI/180),o=t[0]+e*Math.cos(n*Math.PI/180),s=t[1]+e*Math.sin(n*Math.PI/180),l=n-r<=180?"0":"1";return`M${t[0]},${t[1]} L${i},${a} A${e},${e} 0 ${l} 1 ${o},${s} Z`}function KC(t,e,r){let n,i;$e(t,ot,j=>r(5,i=j));let{center:a=[450,450]}=e,{radius:o=250}=e,{pointRadius:s=10}=e,{textWidth:l=150}=e,{fontSize:p=13}=e,f=[0,0],h=null,d={},g=null,b;function v(j){g=null,b=null,h=null,d={}}function _(j){g=j}function D(j,U){let z=Ln(j,a,o)[0]-180;z<0&&(z+=360);const V=Hf(ka(U),z);return Lr(j,V)}function S(j,U){return j?Object.entries(j).reduce((z,[V,J],ae)=>{const ne=z[V]||ae*(360/Object.keys(j).length)-90;return z[V]=Wr(ne),z},U):null}function w(j,U){b=U}function C(j){const U=b,z={...i.pieAngles},V=Object.entries(z).sort((ke,Ue)=>Wr(ke[1])-Wr(Ue[1])).map(ke=>ke[0]),J=V.indexOf(U),ae=J+1===V.length?0:J+1,ne=V[ae];d[U]||(d[U]=z[U]),d[ne]||(d[ne]=z[ne]);const De=Ln(j,a,o)[0]-h,we={...z};we[U]=Wr(De+d[U]),we[ne]=Wr(De+d[ne]);const Fe=Object.entries(we).sort((ke,Ue)=>Wr(ke[1])-Wr(Ue[1])).map(ke=>ke[0]);GC(V,Fe)&&r(6,n=O(i.weightedPrompts,a,o,we))}function E(j){const U={...i.weightedPrompts[g]},z=vu(j,a,o),V=Wr(Ln(z,a,o)[0]),J={...i.pieAngles};J[U.id]=V;const ae={...i.weightedPrompts};ae[g]=U,r(6,n=O(ae,a,o,J))}function B(j){j.preventDefault(),f=Yn(j),g?E(f):b?C(f):h=Ln(f,a,o)[0]}function k(j,U){j.preventDefault();const z={...i.pieAngles},V=Object.entries(z).sort((se,De)=>Wr(se[1])-Wr(De[1])).map(se=>se[0]),J=V.indexOf(U),ae=J+1===V.length?0:J+1,ne=V[ae];z[U]=Wr(z[U]-j.deltaY/100),z[ne]=Wr(z[ne]+j.deltaY/100),r(6,n=O(i.weightedPrompts,a,o,z))}function O(j,U,z,V){if(!j||!U||!z)return null;const J=Object.entries(j).sort((we,Fe)=>Wr(V[we[0]])-Wr(V[Fe[0]])),ae=J.map((we,Fe)=>{const xe=Fe+1===J.length?0:Fe+1,ke=V[J[xe][0]]-V[J[Fe][0]];return ke<0?[we[0],360+ke]:[we[0],ke]}),ne=Math.max(...ae.map(we=>we[1])),se=ae.reduce((we,[Fe,xe])=>{({...j[Fe]});const ke=V[Fe],Ue=Rr(U,[ke,1],z),Ye=Rr(U,[ke+.5*xe,1],z),Ke=xe/ne;return we[Fe]={xy:Ue,textXY:Ye,angle:ke,angleDiff:xe,unitWeight:Ke},we},{}),De={...j};return Object.entries(se).forEach(([we,Fe])=>{De[we].pieWeight=Fe.unitWeight}),ot.update({...i,weightedPrompts:De,pieAngles:V}),se}const x=(j,U)=>k(U,j),K=(j,U)=>w(U,j),$=(j,U)=>w(U,j),X=j=>_(j);return t.$$set=j=>{"center"in j&&r(0,a=j.center),"radius"in j&&r(1,o=j.radius),"pointRadius"in j&&r(2,s=j.pointRadius),"textWidth"in j&&r(3,l=j.textWidth),"fontSize"in j&&r(4,p=j.fontSize)},t.$$.update=()=>{t.$$.dirty&32&&Object.keys(i.pieAngles||{}).length!==Object.keys(i.weightedPrompts).length&&ot.update({...i,pieAngles:S(i.weightedPrompts,{})}),t.$$.dirty&35&&r(6,n=O(i.weightedPrompts,a,o,i.pieAngles||S(i.weightedPrompts,{})))},[a,o,s,l,p,i,n,v,_,D,w,B,k,x,K,$,X]}class $C extends Xe{constructor(e){super(),et(this,e,KC,HC,tt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function YC(t){let e,r,n,i;return r=new $C({props:{center:[Math.round(t[0]/2),Math.round(t[1]/2)],radius:Math.round(Math.min(t[0],t[1])/2)-150}}),{c(){e=W("div"),je(r.$$.fragment),this.h()},l(a){e=H(a,"DIV",{class:!0});var o=R(e);ze(r.$$.fragment,o),o.forEach(M),this.h()},h(){F(e,"class","w-full h-full"),Ni(()=>t[2].call(e))},m(a,o){le(a,e,o),qe(r,e,null),n=Ma(e,t[2].bind(e)),i=!0},p(a,[o]){const s={};o&3&&(s.center=[Math.round(a[0]/2),Math.round(a[1]/2)]),o&3&&(s.radius=Math.round(Math.min(a[0],a[1])/2)-150),r.$set(s)},i(a){i||(he(r.$$.fragment,a),i=!0)},o(a){_e(r.$$.fragment,a),i=!1},d(a){a&&M(e),We(r),n()}}}function ZC(t,e,r){let n,i;function a(){n=this.clientWidth,i=this.clientHeight,r(0,n),r(1,i)}return[n,i,a]}class JC extends Xe{constructor(e){super(),et(this,e,ZC,YC,tt,{})}}const{window:QC}=rw;function Q0(t,e,r){const n=t.slice();return n[26]=e[r][0],n[27]=e[r][1],n}function X0(t){let e=[],r=new Map,n,i,a,o=Object.entries(t[1]);const s=l=>l[26];for(let l=0;l<o.length;l+=1){let p=Q0(t,o,l),f=s(p);r.set(f,e[l]=td(f,p))}return i=new Pa({props:{xy:t[17](t[0],t[6],t[10],t[9],!0),radius:t[3],color:"rgba(136,157,191, 1)",handleMouseDown:t[22]}}),{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=wt(),je(i.$$.fragment)},l(l){for(let p=0;p<e.length;p+=1)e[p].l(l);n=wt(),ze(i.$$.fragment,l)},m(l,p){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(l,p);le(l,n,p),qe(i,l,p),a=!0},p(l,p){p&132983&&(o=Object.entries(l[1]),rr(),e=Bn(e,p,s,1,l,o,r,n.parentNode,Pp,td,n,Q0),nr());const f={};p&1601&&(f.xy=l[17](l[0],l[6],l[10],l[9],!0)),p&8&&(f.radius=l[3]),p&128&&(f.handleMouseDown=l[22]),i.$set(f)},i(l){if(!a){for(let p=0;p<o.length;p+=1)he(e[p]);he(i.$$.fragment,l),a=!0}},o(l){for(let p=0;p<e.length;p+=1)_e(e[p]);_e(i.$$.fragment,l),a=!1},d(l){for(let p=0;p<e.length;p+=1)e[p].d(l);l&&M(n),We(i,l)}}}function ed(t){let e,r;return e=new _1({props:{p1:t[17](t[27].xy,t[6],t[10],t[9],!0),p2:t[17](t[0],t[6],t[10],t[9],!0)}}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},p(n,i){const a={};i&1602&&(a.p1=n[17](n[27].xy,n[6],n[10],n[9],!0)),i&1601&&(a.p2=n[17](n[0],n[6],n[10],n[9],!0)),e.$set(a)},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function td(t,e){let r,n,i,a,o,s=e[27].connected&&ed(e);return i=new Pa({props:{xy:e[17](e[27].xy,e[6],e[10],e[9],!0),radius:e[2],color:"rgba(136,157,191, 1)"}}),a=new Eu({props:{xy:[(e[27].xy[0]*e[8][0]+e[6][0])*e[9]+e[10][0]-Vr(e[4],e[27].text.length,e[5])[0]/2,(e[27].xy[1]*e[8][1]+e[6][1])*e[9]+e[10][1]+e[2]],color:`rgba(255,255,255,${e[27].opacity}`,wh:Vr(e[4],e[27].text.length,e[5]),fontSize:e[5],text:e[27].text}}),{key:t,first:null,c(){r=wt(),s&&s.c(),n=wt(),je(i.$$.fragment),je(a.$$.fragment),this.h()},l(l){r=wt(),s&&s.l(l),n=wt(),ze(i.$$.fragment,l),ze(a.$$.fragment,l),this.h()},h(){this.first=r},m(l,p){le(l,r,p),s&&s.m(l,p),le(l,n,p),qe(i,l,p),qe(a,l,p),o=!0},p(l,p){e=l,e[27].connected?s?(s.p(e,p),p&2&&he(s,1)):(s=ed(e),s.c(),he(s,1),s.m(n.parentNode,n)):s&&(rr(),_e(s,1,1,()=>{s=null}),nr());const f={};p&1602&&(f.xy=e[17](e[27].xy,e[6],e[10],e[9],!0)),p&4&&(f.radius=e[2]),i.$set(f);const h={};p&1910&&(h.xy=[(e[27].xy[0]*e[8][0]+e[6][0])*e[9]+e[10][0]-Vr(e[4],e[27].text.length,e[5])[0]/2,(e[27].xy[1]*e[8][1]+e[6][1])*e[9]+e[10][1]+e[2]]),p&2&&(h.color=`rgba(255,255,255,${e[27].opacity}`),p&50&&(h.wh=Vr(e[4],e[27].text.length,e[5])),p&32&&(h.fontSize=e[5]),p&2&&(h.text=e[27].text),a.$set(h)},i(l){o||(he(s),he(i.$$.fragment,l),he(a.$$.fragment,l),o=!0)},o(l){_e(s),_e(i.$$.fragment,l),_e(a.$$.fragment,l),o=!1},d(l){l&&M(r),s&&s.d(l),l&&M(n),We(i,l),We(a,l)}}}function XC(t){let e,r,n=Object.entries(t[1]).length>0,i,a,o,s=n&&X0(t);return{c(){e=W("div"),r=nt("svg"),s&&s.c(),this.h()},l(l){e=H(l,"DIV",{class:!0});var p=R(e);r=it(p,"svg",{id:!0,class:!0});var f=R(r);s&&s.l(f),f.forEach(M),p.forEach(M),this.h()},h(){F(r,"id","svg"),F(r,"class","w-full h-full outline-none"),F(e,"class","w-full h-full")},m(l,p){le(l,e,p),I(e,r),s&&s.m(r,null),i=!0,a||(o=[ve(QC,"keydown",t[16]),ve(r,"mousewheel",t[15]),ve(r,"mousemove",t[13]),ve(r,"touchmove",t[13]),ve(r,"mouseup",t[14]),ve(r,"touchend",t[14]),ve(r,"dblclick",t[12]),ve(r,"focusin",t[23]),ve(r,"focusout",t[24])],a=!0)},p(l,[p]){p&2&&(n=Object.entries(l[1]).length>0),n?s?(s.p(l,p),p&2&&he(s,1)):(s=X0(l),s.c(),he(s,1),s.m(r,null)):s&&(rr(),_e(s,1,1,()=>{s=null}),nr())},i(l){i||(he(s),i=!0)},o(l){_e(s),i=!1},d(l){l&&M(e),s&&s.d(),a=!1,Wt(o)}}}function eF(t){var e=!1;return t.deltaY?t.deltaY===t.deltaY*-3&&(e=!0):t.deltaMode===0&&(e=!0),e}function tF(t,e,r){let{onMarkerMove:n=j=>{}}=e,{dataPoints:i}=e,{center:a=[100,100]}=e,{dimensions:o=[100,100]}=e,{pointRadius:s=4}=e,{markerRadius:l=10}=e,{textWidth:p=150}=e,{fontSize:f=12}=e,{innerPad:h=100}=e,{markerLocation:d=[.5,.5]}=e,g=!1,b=o,v=[0,0],_=1,D=[0,0],S=!0;function w(j){const U=Yn(j);r(0,d=O(Hr(ds(U,D),1/_))),n(d)}function C(j){if(g){const U=Yn(j);r(0,d=O(Hr(ds(U,D),1/_))),n(d)}}function E(j){r(7,g=!1)}function B(j){j.preventDefault();const U=eF(j),z=Yn(j),V=Hr(ds(z,D),1/_);r(9,_=Math.min(Math.max(_+(U?-1:1)*j.deltaY*-.01,.5),20)),r(10,D=[z[0]-V[0]*_,z[1]-V[1]*_])}function k(j){S&&(j=j||window.event,j.key==="ArrowUp"||j.key==="w"?r(10,D[1]+=10,D):j.key=="ArrowDown"||j.key=="s"?r(10,D[1]-=10,D):j.key=="ArrowLeft"||j.key=="a"?r(10,D[0]+=10,D):(j.key=="ArrowRight"||j.key=="d")&&r(10,D[0]-=10,D))}function O(j){let U=ds(j,v);return[U[0]/b[0],U[1]/b[1]]}function x(j,U,z,V,J=!1){let ae=j;return J&&(ae=Lr(U,[j[0]*b[0],j[1]*b[1]])),Lr(Hr(ae,V),z)}const K=()=>r(7,g=!0),$=()=>r(11,S=!0),X=()=>r(11,S=!1);return t.$$set=j=>{"onMarkerMove"in j&&r(18,n=j.onMarkerMove),"dataPoints"in j&&r(1,i=j.dataPoints),"center"in j&&r(19,a=j.center),"dimensions"in j&&r(20,o=j.dimensions),"pointRadius"in j&&r(2,s=j.pointRadius),"markerRadius"in j&&r(3,l=j.markerRadius),"textWidth"in j&&r(4,p=j.textWidth),"fontSize"in j&&r(5,f=j.fontSize),"innerPad"in j&&r(21,h=j.innerPad),"markerLocation"in j&&r(0,d=j.markerLocation)},t.$$.update=()=>{if(t.$$.dirty&3145792){const j=Math.min(...o),U=o[0]===j,z=o[1]===j;r(6,v=[Math.max(U?0:(o[0]-j)/2,h),Math.max(z?0:(o[1]-j)/2,h)]),r(8,b=[o[0]-2*v[0],o[1]-2*v[1]])}},[d,i,s,l,p,f,v,g,b,_,D,S,w,C,E,B,k,x,n,a,o,h,K,$,X]}class b1 extends Xe{constructor(e){super(),et(this,e,tF,XC,tt,{onMarkerMove:18,dataPoints:1,center:19,dimensions:20,pointRadius:2,markerRadius:3,textWidth:4,fontSize:5,innerPad:21,markerLocation:0})}}function rd(t){let e,r,n,i,a,o,s,l;return{c(){e=W("div"),r=W("label"),n=W("span"),i=Oe("Scaling Power"),a=Se(),o=W("input"),this.h()},l(p){e=H(p,"DIV",{class:!0});var f=R(e);r=H(f,"LABEL",{class:!0});var h=R(r);n=H(h,"SPAN",{class:!0});var d=R(n);i=Me(d,"Scaling Power"),d.forEach(M),h.forEach(M),a=Be(f),o=H(f,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),f.forEach(M),this.h()},h(){F(n,"class","label-text"),F(r,"class","label"),o.value=t[2],F(o,"type","range"),F(o,"min","0.5"),F(o,"max","3"),F(o,"step","0.1"),F(o,"class","range range-sm"),F(e,"class","w-full px-2")},m(p,f){le(p,e,f),I(e,r),I(r,n),I(n,i),I(e,a),I(e,o),s||(l=ve(o,"change",t[11]),s=!0)},p(p,f){f&4&&(o.value=p[2])},d(p){p&&M(e),s=!1,l()}}}function rF(t){let e,r,n,i,a,o,s,l,p,f,h,d,g,b,v,_,D,S,w,C,E,B,k,O,x,K,$,X,j,U,z,V,J,ae,ne,se,De,we,Fe,xe,ke,Ue,Ye,Ke=t[0]&&rd(t);return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=Oe("Exponential Scaling"),o=Se(),s=W("input"),l=Se(),Ke&&Ke.c(),p=Se(),f=W("div"),h=W("label"),d=W("span"),g=Oe("# Prompts"),b=Se(),v=W("input"),_=Se(),D=W("div"),S=W("div"),w=W("label"),C=W("span"),E=Oe("Clusters"),B=Se(),k=W("div"),O=W("button"),x=Oe("0"),K=Se(),$=W("button"),X=Oe("2"),j=Se(),U=W("button"),z=Oe("4"),V=Se(),J=W("button"),ae=Oe("6"),ne=Se(),se=W("button"),De=Oe("8"),we=Se(),Fe=W("div"),xe=W("button"),ke=Oe("Shuffle"),this.h()},l(Je){e=H(Je,"DIV",{class:!0});var Le=R(e);r=H(Le,"DIV",{class:!0});var Dt=R(r);n=H(Dt,"LABEL",{class:!0});var Et=R(n);i=H(Et,"SPAN",{class:!0});var ht=R(i);a=Me(ht,"Exponential Scaling"),ht.forEach(M),Et.forEach(M),o=Be(Dt),s=H(Dt,"INPUT",{type:!0,class:!0}),Dt.forEach(M),l=Be(Le),Ke&&Ke.l(Le),p=Be(Le),f=H(Le,"DIV",{class:!0});var at=R(f);h=H(at,"LABEL",{class:!0});var Pt=R(h);d=H(Pt,"SPAN",{class:!0});var dr=R(d);g=Me(dr,"# Prompts"),dr.forEach(M),Pt.forEach(M),b=Be(at),v=H(at,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),at.forEach(M),_=Be(Le),D=H(Le,"DIV",{class:!0});var Tt=R(D);S=H(Tt,"DIV",{class:!0});var Te=R(S);w=H(Te,"LABEL",{class:!0});var Ve=R(w);C=H(Ve,"SPAN",{class:!0});var Ot=R(C);E=Me(Ot,"Clusters"),Ot.forEach(M),Ve.forEach(M),B=Be(Te),k=H(Te,"DIV",{class:!0});var Ft=R(k);O=H(Ft,"BUTTON",{class:!0});var $t=R(O);x=Me($t,"0"),$t.forEach(M),K=Be(Ft),$=H(Ft,"BUTTON",{class:!0});var G=R($);X=Me(G,"2"),G.forEach(M),j=Be(Ft),U=H(Ft,"BUTTON",{class:!0});var Z=R(U);z=Me(Z,"4"),Z.forEach(M),V=Be(Ft),J=H(Ft,"BUTTON",{class:!0});var ee=R(J);ae=Me(ee,"6"),ee.forEach(M),ne=Be(Ft),se=H(Ft,"BUTTON",{class:!0});var ce=R(se);De=Me(ce,"8"),ce.forEach(M),Ft.forEach(M),Te.forEach(M),Tt.forEach(M),we=Be(Le),Fe=H(Le,"DIV",{class:!0});var ue=R(Fe);xe=H(ue,"BUTTON",{class:!0});var de=R(xe);ke=Me(de,"Shuffle"),de.forEach(M),ue.forEach(M),Le.forEach(M),this.h()},h(){F(i,"class","label-text"),F(n,"class","label"),F(s,"type","checkbox"),F(s,"class","toggle toggle-sm"),s.checked=t[0],F(r,"class","min-w-max px-2"),F(d,"class","label-text"),F(h,"class","label"),v.value=t[4],F(v,"type","range"),F(v,"min","1"),F(v,"max",t[5]),F(v,"step","1"),F(v,"class","range range-sm"),F(f,"class","w-full px-2"),F(C,"class","label-text"),F(w,"class","label pb-1 m-0"),F(O,"class","btn btn-xs"),rt(O,"btn-active",t[7]===0),F($,"class","btn btn-xs"),rt($,"btn-active",t[7]===2),rt($,"btn-disabled",t[9]<2),F(U,"class","btn btn-xs"),rt(U,"btn-active",t[7]===4),rt(U,"btn-disabled",t[9]<4),F(J,"class","btn btn-xs"),rt(J,"btn-active",t[7]===6),rt(J,"btn-disabled",t[9]<6),F(se,"class","btn btn-xs"),rt(se,"btn-active",t[7]===8),rt(se,"btn-disabled",t[9]<8),F(k,"class","btn-group btn-group-horizontal p-0"),F(S,"class",""),F(D,"class",""),F(xe,"class","btn btn-xs btn-primary"),F(Fe,"class","w-32 px-2 pb-1 flex flex-col justify-end"),F(e,"class","px-2 py-4 pb-0 flex")},m(Je,Le){le(Je,e,Le),I(e,r),I(r,n),I(n,i),I(i,a),I(r,o),I(r,s),I(e,l),Ke&&Ke.m(e,null),I(e,p),I(e,f),I(f,h),I(h,d),I(d,g),I(f,b),I(f,v),I(e,_),I(e,D),I(D,S),I(S,w),I(w,C),I(C,E),I(S,B),I(S,k),I(k,O),I(O,x),I(k,K),I(k,$),I($,X),I(k,j),I(k,U),I(U,z),I(k,V),I(k,J),I(J,ae),I(k,ne),I(k,se),I(se,De),I(e,we),I(e,Fe),I(Fe,xe),I(xe,ke),Ue||(Ye=[ve(s,"change",function(){Kn(t[1])&&t[1].apply(this,arguments)}),ve(v,"change",t[12]),ve(O,"click",t[13]),ve($,"click",t[14]),ve(U,"click",t[15]),ve(J,"click",t[16]),ve(se,"click",t[17]),ve(xe,"click",function(){Kn(t[10])&&t[10].apply(this,arguments)})],Ue=!0)},p(Je,[Le]){t=Je,Le&1&&(s.checked=t[0]),t[0]?Ke?Ke.p(t,Le):(Ke=rd(t),Ke.c(),Ke.m(e,p)):Ke&&(Ke.d(1),Ke=null),Le&16&&(v.value=t[4]),Le&32&&F(v,"max",t[5]),Le&128&&rt(O,"btn-active",t[7]===0),Le&128&&rt($,"btn-active",t[7]===2),Le&512&&rt($,"btn-disabled",t[9]<2),Le&128&&rt(U,"btn-active",t[7]===4),Le&512&&rt(U,"btn-disabled",t[9]<4),Le&128&&rt(J,"btn-active",t[7]===6),Le&512&&rt(J,"btn-disabled",t[9]<6),Le&128&&rt(se,"btn-active",t[7]===8),Le&512&&rt(se,"btn-disabled",t[9]<8)},i:Ce,o:Ce,d(Je){Je&&M(e),Ke&&Ke.d(),Ue=!1,Wt(Ye)}}}function nF(t,e,r){let{useExponentialScaling:n=!1}=e,{toggleExponentialScaling:i=()=>{}}=e,{exponentialScaling:a=2}=e,{setExponentialScaling:o=()=>{}}=e,{connectionLimit:s=1}=e,{maxConnectionLimit:l=1}=e,{setConnectionLimit:p=()=>{}}=e,{clusterCount:f=0}=e,{setClusterCount:h=()=>{}}=e,{maxClusterCount:d=0}=e,{onShuffle:g=()=>{}}=e;const b=E=>o(parseFloat(E.target.value)),v=E=>p(parseInt(E.target.value)),_=()=>h(0),D=()=>h(2),S=()=>h(4),w=()=>h(6),C=()=>h(8);return t.$$set=E=>{"useExponentialScaling"in E&&r(0,n=E.useExponentialScaling),"toggleExponentialScaling"in E&&r(1,i=E.toggleExponentialScaling),"exponentialScaling"in E&&r(2,a=E.exponentialScaling),"setExponentialScaling"in E&&r(3,o=E.setExponentialScaling),"connectionLimit"in E&&r(4,s=E.connectionLimit),"maxConnectionLimit"in E&&r(5,l=E.maxConnectionLimit),"setConnectionLimit"in E&&r(6,p=E.setConnectionLimit),"clusterCount"in E&&r(7,f=E.clusterCount),"setClusterCount"in E&&r(8,h=E.setClusterCount),"maxClusterCount"in E&&r(9,d=E.maxClusterCount),"onShuffle"in E&&r(10,g=E.onShuffle)},[n,i,a,o,s,l,p,f,h,d,g,b,v,_,D,S,w,C]}class D1 extends Xe{constructor(e){super(),et(this,e,nF,rF,tt,{useExponentialScaling:0,toggleExponentialScaling:1,exponentialScaling:2,setExponentialScaling:3,connectionLimit:4,maxConnectionLimit:5,setConnectionLimit:6,clusterCount:7,setClusterCount:8,maxClusterCount:9,onShuffle:10})}}const Ef=or({});var Af={},iF={get exports(){return Af},set exports(t){Af=t}},Ns={},aF={get exports(){return Ns},set exports(t){Ns=t}},nd;function uF(){return nd||(nd=1,function(t){function e(r,n,i,a){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(r,n,i,a)}e.prototype.run=function(r,n,i,a){this._init(r,n,i,a);for(var o=0;o<this._datasetLength;o++)if(this._visited[o]!==1){this._visited[o]=1;var s=this._regionQuery(o);if(s.length<this.minPts)this.noise.push(o);else{var l=this.clusters.length;this.clusters.push([]),this._addToCluster(o,l),this._expandCluster(l,s)}}return this.clusters},e.prototype._init=function(r,n,i,a){if(r){if(!(r instanceof Array))throw Error("Dataset must be of type array, "+typeof r+" given");this.dataset=r,this.clusters=[],this.noise=[],this._datasetLength=r.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}n&&(this.epsilon=n),i&&(this.minPts=i),a&&(this.distance=a)},e.prototype._expandCluster=function(r,n){for(var i=0;i<n.length;i++){var a=n[i];if(this._visited[a]!==1){this._visited[a]=1;var o=this._regionQuery(a);o.length>=this.minPts&&(n=this._mergeArrays(n,o))}this._assigned[a]!==1&&this._addToCluster(a,r)}},e.prototype._addToCluster=function(r,n){this.clusters[n].push(r),this._assigned[r]=1},e.prototype._regionQuery=function(r){for(var n=[],i=0;i<this._datasetLength;i++){var a=this.distance(this.dataset[r],this.dataset[i]);a<this.epsilon&&n.push(i)}return n},e.prototype._mergeArrays=function(r,n){for(var i=n.length,a=0;a<i;a++){var o=n[a];r.indexOf(o)<0&&r.push(o)}return r},e.prototype._euclideanDistance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;)i+=(r[a]-n[a])*(r[a]-n[a]);return Math.sqrt(i)},t.exports&&(t.exports=e)}(aF)),Ns}var xs={},sF={get exports(){return xs},set exports(t){xs=t}},id;function oF(){return id||(id=1,function(t){function e(r,n,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(r,n,i)}e.prototype.init=function(r,n,i){this.assignments=[],this.centroids=[],typeof r<"u"&&(this.dataset=r),typeof n<"u"&&(this.k=n),typeof i<"u"&&(this.distance=i)},e.prototype.run=function(r,n){this.init(r,n);for(var i=this.dataset.length,a=0;a<this.k;a++)this.centroids[a]=this.randomCentroid();for(var o=!0;o;){o=this.assign();for(var s=0;s<this.k;s++){for(var l=new Array(d),p=0,f=0;f<d;f++)l[f]=0;for(var h=0;h<i;h++){var d=this.dataset[h].length;if(s===this.assignments[h]){for(var f=0;f<d;f++)l[f]+=this.dataset[h][f];p++}}if(p>0){for(var f=0;f<d;f++)l[f]/=p;this.centroids[s]=l}else this.centroids[s]=this.randomCentroid(),o=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var r=this.dataset.length-1,n,i;do i=Math.round(Math.random()*r),n=this.dataset[i];while(this.centroids.indexOf(n)>=0);return n},e.prototype.assign=function(){for(var r=!1,n=this.dataset.length,i,a=0;a<n;a++)i=this.argmin(this.dataset[a],this.centroids,this.distance),i!=this.assignments[a]&&(this.assignments[a]=i,r=!0);return r},e.prototype.getClusters=function(){for(var r=new Array(this.k),n,i=0;i<this.assignments.length;i++)n=this.assignments[i],typeof r[n]>"u"&&(r[n]=[]),r[n].push(i);return r},e.prototype.argmin=function(r,n,i){for(var a=Number.MAX_VALUE,o=0,s=n.length,l,p=0;p<s;p++)l=i(r,n[p]),l<a&&(a=l,o=p);return o},e.prototype.distance=function(r,n){for(var i=0,a=Math.min(r.length,n.length);a--;){var o=r[a]-n[a];i+=o*o}return Math.sqrt(i)},t.exports&&(t.exports=e)}(sF)),xs}var Ls={},lF={get exports(){return Ls},set exports(t){Ls=t}},Rs={},fF={get exports(){return Rs},set exports(t){Rs=t}},ad;function y1(){return ad||(ad=1,function(t){function e(r,n,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(r,n,i)}e.prototype.insert=function(r,n){for(var i=this._queue.length,a=i;a--;){var o=this._priorities[a];this._sorting==="desc"?n>o&&(i=a):n<o&&(i=a)}this._insertAt(r,n,i)},e.prototype.remove=function(r){for(var n=this._queue.length;n--;){var i=this._queue[n];if(r===i){this._queue.splice(n,1),this._priorities.splice(n,1);break}}},e.prototype.forEach=function(r){this._queue.forEach(r)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(r){return this._priorities[r]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var r=[],n=0,i=this._queue.length;n<i;n++)r.push([this._queue[n],this._priorities[n]]);return r},e.prototype._init=function(r,n,i){if(r&&n){if(this._queue=[],this._priorities=[],r.length!==n.length)throw new Error("Arrays must have the same length");for(var a=0;a<r.length;a++)this.insert(r[a],n[a])}i&&(this._sorting=i)},e.prototype._insertAt=function(r,n,i){this._queue.length===i?(this._queue.push(r),this._priorities.push(n)):(this._queue.splice(i,0,r),this._priorities.splice(i,0,n))},t.exports&&(t.exports=e)}(fF)),Rs}var ud;function cF(){return ud||(ud=1,function(t){if(t.exports)var e=y1();function r(n,i,a,o){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(n,i,a,o)}r.prototype.run=function(n,i,a,o){this._init(n,i,a,o);for(var s=0,l=this.dataset.length;s<l;s++)if(this._processed[s]!==1){this._processed[s]=1,this.clusters.push([s]);var p=this.clusters.length-1;this._orderedList.push(s);var f=new e(null,null,"asc"),h=this._regionQuery(s);this._distanceToCore(s)!==void 0&&(this._updateQueue(s,h,f),this._expandCluster(p,f))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var n=[],i=0,a=this._orderedList.length;i<a;i++){var o=this._orderedList[i],s=this._reachability[o];n.push([o,s])}return n},r.prototype._init=function(n,i,a,o){if(n){if(!(n instanceof Array))throw Error("Dataset must be of type array, "+typeof n+" given");this.dataset=n,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}i&&(this.epsilon=i),a&&(this.minPts=a),o&&(this.distance=o)},r.prototype._updateQueue=function(n,i,a){var o=this;this._coreDistance=this._distanceToCore(n),i.forEach(function(s){if(o._processed[s]===void 0){var l=o.distance(o.dataset[n],o.dataset[s]),p=Math.max(o._coreDistance,l);o._reachability[s]===void 0?(o._reachability[s]=p,a.insert(s,p)):p<o._reachability[s]&&(o._reachability[s]=p,a.remove(s),a.insert(s,p))}})},r.prototype._expandCluster=function(n,i){for(var a=i.getElements(),o=0,s=a.length;o<s;o++){var l=a[o];if(this._processed[l]===void 0){var p=this._regionQuery(l);this._processed[l]=1,this.clusters[n].push(l),this._orderedList.push(l),this._distanceToCore(l)!==void 0&&(this._updateQueue(l,p,i),this._expandCluster(n,i))}}},r.prototype._distanceToCore=function(n){for(var i=this.epsilon,a=0;a<i;a++){var o=this._regionQuery(n,a);if(o.length>=this.minPts)return a}},r.prototype._regionQuery=function(n,i){i=i||this.epsilon;for(var a=[],o=0,s=this.dataset.length;o<s;o++)this.distance(this.dataset[n],this.dataset[o])<i&&a.push(o);return a},r.prototype._euclideanDistance=function(n,i){for(var a=0,o=Math.min(n.length,i.length);o--;)a+=(n[o]-i[o])*(n[o]-i[o]);return Math.sqrt(a)},t.exports&&(t.exports=r)}(lF)),Ls}(function(t){t.exports&&(t.exports={DBSCAN:uF(),KMEANS:oF(),OPTICS:cF(),PriorityQueue:y1()})})(iF);var Us={},hF={get exports(){return Us},set exports(t){Us=t}},Vs={},dF={get exports(){return Vs},set exports(t){Vs=t}},Fa=typeof Reflect=="object"?Reflect:null,sd=Fa&&typeof Fa.apply=="function"?Fa.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},ys;Fa&&typeof Fa.ownKeys=="function"?ys=Fa.ownKeys:Object.getOwnPropertySymbols?ys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ys=function(e){return Object.getOwnPropertyNames(e)};function pF(t){console&&console.warn&&console.warn(t)}var w1=Number.isNaN||function(e){return e!==e};function Ut(){Ut.init.call(this)}dF.exports=Ut;Vs.once=_F;Ut.EventEmitter=Ut;Ut.prototype._events=void 0;Ut.prototype._eventsCount=0;Ut.prototype._maxListeners=void 0;var od=10;function co(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Ut,"defaultMaxListeners",{enumerable:!0,get:function(){return od},set:function(t){if(typeof t!="number"||t<0||w1(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");od=t}});Ut.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ut.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||w1(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function E1(t){return t._maxListeners===void 0?Ut.defaultMaxListeners:t._maxListeners}Ut.prototype.getMaxListeners=function(){return E1(this)};Ut.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[e];if(l===void 0)return!1;if(typeof l=="function")sd(l,this,r);else for(var p=l.length,f=B1(l,p),n=0;n<p;++n)sd(f[n],this,r);return!0};function A1(t,e,r,n){var i,a,o;if(co(r),a=t._events,a===void 0?(a=t._events=Object.create(null),t._eventsCount=0):(a.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),o=a[e]),o===void 0)o=a[e]=r,++t._eventsCount;else if(typeof o=="function"?o=a[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=E1(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=o.length,pF(s)}return t}Ut.prototype.addListener=function(e,r){return A1(this,e,r,!1)};Ut.prototype.on=Ut.prototype.addListener;Ut.prototype.prependListener=function(e,r){return A1(this,e,r,!0)};function gF(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function C1(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=gF.bind(n);return i.listener=r,n.wrapFn=i,i}Ut.prototype.once=function(e,r){return co(r),this.on(e,C1(this,e,r)),this};Ut.prototype.prependOnceListener=function(e,r){return co(r),this.prependListener(e,C1(this,e,r)),this};Ut.prototype.removeListener=function(e,r){var n,i,a,o,s;if(co(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){s=n[o].listener,a=o;break}if(a<0)return this;a===0?n.shift():vF(n,a),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this};Ut.prototype.off=Ut.prototype.removeListener;Ut.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var a=Object.keys(n),o;for(i=0;i<a.length;++i)o=a[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function F1(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?mF(i):B1(i,i.length)}Ut.prototype.listeners=function(e){return F1(this,e,!0)};Ut.prototype.rawListeners=function(e){return F1(this,e,!1)};Ut.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):S1.call(t,e)};Ut.prototype.listenerCount=S1;function S1(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Ut.prototype.eventNames=function(){return this._eventsCount>0?ys(this._events):[]};function B1(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function vF(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function mF(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function _F(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,a),n(o)}function a(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}O1(t,e,a,{once:!0}),e!=="error"&&bF(t,i,{once:!0})})}function bF(t,e,r){typeof t.on=="function"&&O1(t,"error",e,r)}function O1(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(a){n.once&&t.removeEventListener(e,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}function DF(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}var yF=DF;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var wF=function(t){return t!=null&&(M1(t)||EF(t)||!!t._isBuffer)};function M1(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function EF(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&M1(t.slice(0,0))}var AF=yF,CF=wF,FF=typeof Float64Array<"u";function SF(t,e){return t[0]-e[0]}function BF(){var t=this.stride,e=new Array(t.length),r;for(r=0;r<e.length;++r)e[r]=[Math.abs(t[r]),r];e.sort(SF);var n=new Array(e.length);for(r=0;r<n.length;++r)n[r]=e[r][1];return n}function OF(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n=t==="generic";if(e===-1){var i="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",v=new Function(i);return v()}else if(e===0){var i="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",v=new Function("TrivialArray",i);return v(js[t][0])}var i=["'use strict'"],a=AF(e),o=a.map(function(_){return"i"+_}),s="this.offset+"+a.map(function(_){return"this.stride["+_+"]*i"+_}).join("+"),l=a.map(function(_){return"b"+_}).join(","),p=a.map(function(_){return"c"+_}).join(",");i.push("function "+r+"(a,"+l+","+p+",d){this.data=a","this.shape=["+l+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),i.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(_){return"this.shape["+_+"]"}).join("*"),"}})"),e===1?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),e<4?(i.push("function "+r+"_order(){"),e===2?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):e===3&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+r+"_set("+o.join(",")+",v){"),n?i.push("return this.data.set("+s+",v)}"):i.push("return this.data["+s+"]=v}"),i.push("proto.get=function "+r+"_get("+o.join(",")+"){"),n?i.push("return this.data.get("+s+")}"):i.push("return this.data["+s+"]}"),i.push("proto.index=function "+r+"_index(",o.join(),"){return "+s+"}"),i.push("proto.hi=function "+r+"_hi("+o.join(",")+"){return new "+r+"(this.data,"+a.map(function(_){return["(typeof i",_,"!=='number'||i",_,"<0)?this.shape[",_,"]:i",_,"|0"].join("")}).join(",")+","+a.map(function(_){return"this.stride["+_+"]"}).join(",")+",this.offset)}");var f=a.map(function(_){return"a"+_+"=this.shape["+_+"]"}),h=a.map(function(_){return"c"+_+"=this.stride["+_+"]"});i.push("proto.lo=function "+r+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+f.join(",")+","+h.join(","));for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'&&i"+d+">=0){d=i"+d+"|0;b+=c"+d+"*d;a"+d+"-=d}");i.push("return new "+r+"(this.data,"+a.map(function(_){return"a"+_}).join(",")+","+a.map(function(_){return"c"+_}).join(",")+",b)}"),i.push("proto.step=function "+r+"_step("+o.join(",")+"){var "+a.map(function(_){return"a"+_+"=this.shape["+_+"]"}).join(",")+","+a.map(function(_){return"b"+_+"=this.stride["+_+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'){d=i"+d+"|0;if(d<0){c+=b"+d+"*(a"+d+"-1);a"+d+"=ceil(-a"+d+"/d)}else{a"+d+"=ceil(a"+d+"/d)}b"+d+"*=d}");i.push("return new "+r+"(this.data,"+a.map(function(_){return"a"+_}).join(",")+","+a.map(function(_){return"b"+_}).join(",")+",c)}");for(var g=new Array(e),b=new Array(e),d=0;d<e;++d)g[d]="a[i"+d+"]",b[d]="b[i"+d+"]";i.push("proto.transpose=function "+r+"_transpose("+o+"){"+o.map(function(_,D){return _+"=("+_+"===undefined?"+D+":"+_+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+b.join(",")+",this.offset)}"),i.push("proto.pick=function "+r+"_pick("+o+"){var a=[],b=[],c=this.offset");for(var d=0;d<e;++d)i.push("if(typeof i"+d+"==='number'&&i"+d+">=0){c=(c+this.stride["+d+"]*i"+d+")|0}else{a.push(this.shape["+d+"]);b.push(this.stride["+d+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(_){return"shape["+_+"]"}).join(",")+","+a.map(function(_){return"stride["+_+"]"}).join(",")+",offset)}");var v=new Function("CTOR_LIST","ORDER",i.join(`
`));return v(js[t],BF)}function MF(t){if(CF(t))return"buffer";if(FF)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}var js={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function PF(t,e,r,n){if(t===void 0){var p=js.array[0];return p([])}else typeof t=="number"&&(t=[t]);e===void 0&&(e=[t.length]);var i=e.length;if(r===void 0){r=new Array(i);for(var a=i-1,o=1;a>=0;--a)r[a]=o,o*=e[a]}if(n===void 0){n=0;for(var a=0;a<i;++a)r[a]<0&&(n-=(e[a]-1)*r[a])}for(var s=MF(t),l=js[s];l.length<=i+1;)l.push(OF(s,l.length-1));var p=l[i+1];return p(t,e,r,n)}var Ta=PF,ho={};function kF(t,e){for(var r=1,n=t.length,i=t[0],a=t[0],o=1;o<n;++o)if(a=i,i=t[o],e(i,a)){if(o===r){r++;continue}t[r++]=i}return t.length=r,t}function TF(t){for(var e=1,r=t.length,n=t[0],i=t[0],a=1;a<r;++a,i=n)if(i=n,n=t[a],n!==i){if(a===e){e++;continue}t[e++]=n}return t.length=e,t}function IF(t,e,r){return t.length===0?t:e?(r||t.sort(e),kF(t,e)):(r||t.sort(),TF(t))}var P1=IF,NF=P1;function k1(t,e,r){var n=t.length,i=e.arrayArgs.length,a=e.indexArgs.length>0,o=[],s=[],l=0,p=0,f,h;for(f=0;f<n;++f)s.push(["i",f,"=0"].join(""));for(h=0;h<i;++h)for(f=0;f<n;++f)p=l,l=t[f],f===0?s.push(["d",h,"s",f,"=t",h,"p",l].join("")):s.push(["d",h,"s",f,"=(t",h,"p",l,"-s",p,"*t",h,"p",p,")"].join(""));for(s.length>0&&o.push("var "+s.join(",")),f=n-1;f>=0;--f)l=t[f],o.push(["for(i",f,"=0;i",f,"<s",l,";++i",f,"){"].join(""));for(o.push(r),f=0;f<n;++f){for(p=l,l=t[f],h=0;h<i;++h)o.push(["p",h,"+=d",h,"s",f].join(""));a&&(f>0&&o.push(["index[",p,"]-=s",p].join("")),o.push(["++index[",l,"]"].join(""))),o.push("}")}return o.join(`
`)}function xF(t,e,r,n){for(var i=e.length,a=r.arrayArgs.length,o=r.blockSize,s=r.indexArgs.length>0,l=[],p=0;p<a;++p)l.push(["var offset",p,"=p",p].join(""));for(var p=t;p<i;++p)l.push(["for(var j"+p+"=SS[",e[p],"]|0;j",p,">0;){"].join("")),l.push(["if(j",p,"<",o,"){"].join("")),l.push(["s",e[p],"=j",p].join("")),l.push(["j",p,"=0"].join("")),l.push(["}else{s",e[p],"=",o].join("")),l.push(["j",p,"-=",o,"}"].join("")),s&&l.push(["index[",e[p],"]=j",p].join(""));for(var p=0;p<a;++p){for(var f=["offset"+p],h=t;h<i;++h)f.push(["j",h,"*t",p,"p",e[h]].join(""));l.push(["p",p,"=(",f.join("+"),")"].join(""))}l.push(k1(e,r,n));for(var p=t;p<i;++p)l.push("}");return l.join(`
`)}function LF(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}function Nl(t,e,r){for(var n=t.body,i=[],a=[],o=0;o<t.args.length;++o){var s=t.args[o];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),p="",f=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var h=e.offsetArgIndex.indexOf(o),d=e.offsetArgs[h];f=d.array,p="+q"+h;case"array":p="p"+f+p;var g="l"+o,b="a"+f;if(e.arrayBlockIndices[f]===0)s.count===1?r[f]==="generic"?s.lvalue?(i.push(["var ",g,"=",b,".get(",p,")"].join("")),n=n.replace(l,g),a.push([b,".set(",p,",",g,")"].join(""))):n=n.replace(l,[b,".get(",p,")"].join("")):n=n.replace(l,[b,"[",p,"]"].join("")):r[f]==="generic"?(i.push(["var ",g,"=",b,".get(",p,")"].join("")),n=n.replace(l,g),s.lvalue&&a.push([b,".set(",p,",",g,")"].join(""))):(i.push(["var ",g,"=",b,"[",p,"]"].join("")),n=n.replace(l,g),s.lvalue&&a.push([b,"[",p,"]=",g].join("")));else{for(var v=[s.name],_=[p],D=0;D<Math.abs(e.arrayBlockIndices[f]);D++)v.push("\\s*\\[([^\\]]+)\\]"),_.push("$"+(D+1)+"*t"+f+"b"+D);if(l=new RegExp(v.join(""),"g"),p=_.join("+"),r[f]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(l,[b,"[",p,"]"].join(""))}break;case"scalar":n=n.replace(l,"Y"+e.scalarArgs.indexOf(o));break;case"index":n=n.replace(l,"index");break;case"shape":n=n.replace(l,"shape");break}}}return[i.join(`
`),n,a.join(`
`)].join(`
`).trim()}function RF(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],a=i.match(/\d+/);a?a=a[0]:a="",i.charAt(0)===0?e[n]="u"+i.charAt(1)+a:e[n]=i.charAt(0)+a,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}function UF(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,n=new Array(t.arrayArgs.length),i=new Array(t.arrayArgs.length),a=0;a<t.arrayArgs.length;++a)i[a]=e[2*a],n[a]=e[2*a+1];for(var o=[],s=[],l=[],p=[],f=[],a=0;a<t.arrayArgs.length;++a){t.arrayBlockIndices[a]<0?(l.push(0),p.push(r),o.push(r),s.push(r+t.arrayBlockIndices[a])):(l.push(t.arrayBlockIndices[a]),p.push(t.arrayBlockIndices[a]+r),o.push(0),s.push(t.arrayBlockIndices[a]));for(var h=[],d=0;d<n[a].length;d++)l[a]<=n[a][d]&&n[a][d]<p[a]&&h.push(n[a][d]-l[a]);f.push(h)}for(var g=["SS"],b=["'use strict'"],v=[],d=0;d<r;++d)v.push(["s",d,"=SS[",d,"]"].join(""));for(var a=0;a<t.arrayArgs.length;++a){g.push("a"+a),g.push("t"+a),g.push("p"+a);for(var d=0;d<r;++d)v.push(["t",a,"p",d,"=t",a,"[",l[a]+d,"]"].join(""));for(var d=0;d<Math.abs(t.arrayBlockIndices[a]);++d)v.push(["t",a,"b",d,"=t",a,"[",o[a]+d,"]"].join(""))}for(var a=0;a<t.scalarArgs.length;++a)g.push("Y"+a);if(t.shapeArgs.length>0&&v.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var _=new Array(r),a=0;a<r;++a)_[a]="0";v.push(["index=[",_.join(","),"]"].join(""))}for(var a=0;a<t.offsetArgs.length;++a){for(var D=t.offsetArgs[a],S=[],d=0;d<D.offset.length;++d)D.offset[d]!==0&&(D.offset[d]===1?S.push(["t",D.array,"p",d].join("")):S.push([D.offset[d],"*t",D.array,"p",d].join("")));S.length===0?v.push("q"+a+"=0"):v.push(["q",a,"=",S.join("+")].join(""))}var w=NF([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));v=v.concat(w),v.length>0&&b.push("var "+v.join(","));for(var a=0;a<t.arrayArgs.length;++a)b.push("p"+a+"|=0");t.pre.body.length>3&&b.push(Nl(t.pre,t,i));var C=Nl(t.body,t,i),E=LF(f);E<r?b.push(xF(E,f[0],t,C)):b.push(k1(f[0],t,C)),t.post.body.length>3&&b.push(Nl(t.post,t,i)),t.debug&&console.log("-----Generated cwise routine for ",e,`:
`+b.join(`
`)+`
----------`);var B=[t.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",E,RF(i)].join(""),k=new Function(["function ",B,"(",g.join(","),"){",b.join(`
`),"} return ",B].join(""));return k()}var VF=UF,jF=VF;function zF(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var i=[],a=[],o=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],s=[],l=[],p=0;p<t.arrayArgs.length;++p){var f=t.arrayArgs[p];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),i.push("t"+f),i.push("r"+f),a.push("t"+f),a.push("r"+f+".join()"),o.push("array"+f+".data"),o.push("array"+f+".stride"),o.push("array"+f+".offset|0"),p>0&&(s.push("array"+t.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[p]))),l.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[p])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var p=0;p<t.scalarArgs.length;++p)o.push("scalar"+t.scalarArgs[p]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",o.join(","),")}"].join("")),t.debug&&console.log(`-----Generated thunk:
`+e.join(`
`)+`
----------`);var h=new Function("compile",e.join(`
`));return h(jF.bind(void 0,t))}var qF=zF,WF=qF;function HF(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function GF(t){var e=new HF;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var n=0;n<r.length;++n){var i=r[n];if(i==="array"||typeof i=="object"&&i.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if(i==="scalar")e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if(i==="index"){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if(i==="shape"){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof i=="object"&&i.offset)e.argTypes[n]="offset",e.offsetArgs.push({array:i.array,offset:i.offset}),e.offsetArgIndex.push(n);else throw new Error("cwise: Unknown argument type "+r[n])}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,WF(e)}var Gf=GF;(function(t){var e=Gf,r={body:"",args:[],thisVars:[],localVars:[]};function n(d){if(!d)return r;for(var g=0;g<d.args.length;++g){var b=d.args[g];g===0?d.args[g]={name:b,lvalue:!0,rvalue:!!d.rvalue,count:d.count||1}:d.args[g]={name:b,lvalue:!1,rvalue:!0,count:1}}return d.thisVars||(d.thisVars=[]),d.localVars||(d.localVars=[]),d}function i(d){return e({args:d.args,pre:n(d.pre),body:n(d.body),post:n(d.proc),funcName:d.funcName})}function a(d){for(var g=[],b=0;b<d.args.length;++b)g.push("a"+b);var v=new Function("P",["return function ",d.funcName,"_ndarrayops(",g.join(","),") {P(",g.join(","),");return a0}"].join(""));return v(i(d))}var o={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var d in o){var g=o[d];t[d]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:d}),t[d+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+g+"=b"},rvalue:!0,funcName:d+"eq"}),t[d+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:d+"s"}),t[d+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+g+"=s"},rvalue:!0,funcName:d+"seq"})}})();var s={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var d in s){var g=s[d];t[d]=a({args:["array","array"],body:{args:["a","b"],body:"a="+g+"b"},funcName:d}),t[d+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+g+"a"},rvalue:!0,count:2,funcName:d+"eq"})}})();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var d in l){var g=l[d];t[d]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+g+"c"},funcName:d}),t[d+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+g+"s"},funcName:d+"s"}),t[d+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+g+"b"},rvalue:!0,count:2,funcName:d+"eq"}),t[d+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+g+"s"},rvalue:!0,count:2,funcName:d+"seq"})}})();var p=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var d=0;d<p.length;++d){var g=p[d];t[g]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:g}),t[g+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"})}})();var f=["max","min","atan2","pow"];(function(){for(var d=0;d<f.length;++d){var g=f[d];t[g]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g}),t[g+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:g+"s"}),t[g+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"}),t[g+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"seq"})}})();var h=["atan2","pow"];(function(){for(var d=0;d<h.length;++d){var g=h[d];t[g+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"op"}),t[g+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:g+"ops"}),t[g+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opeq"}),t[g+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opseq"})}})(),t.any=e({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=e({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=e({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=e({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=e({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=e({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=e({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=e({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(ho);var KF=Gf({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:`{
var _inline_1_v=_inline_1_arg1_,_inline_1_i
for(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {
_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]
}
_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]
}`,args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64}),ld=Ta,$F=KF,YF=function(e,r){for(var n=[],i=e,a=1;Array.isArray(i);)n.push(i.length),a*=i.length,i=i[0];return n.length===0?ld():(r||(r=ld(new Float64Array(a),n)),$F(r,e),r)};function T1(t,e,r){var n=t[r]|0;if(n<=0)return[];var i=new Array(n),a;if(r===t.length-1)for(a=0;a<n;++a)i[a]=e;else for(a=0;a<n;++a)i[a]=T1(t,e,r+1);return i}function ZF(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}function JF(t,e){switch(typeof e>"u"&&(e=0),typeof t){case"number":if(t>0)return ZF(t|0,e);break;case"object":if(typeof t.length=="number")return T1(t,e,0);break}return[]}var QF=JF,I1={};(function(t){(function(e,r){r(t)})(vr,function(e){var r,n,i,a,o,s,l,p,f,h,d,g,b,v,_,D,S,w;r={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},n={},n[r.BooleanLiteral]="Boolean",n[r.EOF]="<end>",n[r.Identifier]="Identifier",n[r.Keyword]="Keyword",n[r.NullLiteral]="Null",n[r.NumericLiteral]="Numeric",n[r.Punctuator]="Punctuator",n[r.StringLiteral]="String",n[r.RegularExpression]="RegularExpression",i=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},o={Data:1,Get:2,Set:4},s={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},l={NonAsciiIdentifierStart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")};function C(y,P){if(!y)throw new Error("ASSERT: "+P)}function E(y){return y>=48&&y<=57}function B(y){return"0123456789abcdefABCDEF".indexOf(y)>=0}function k(y){return"01234567".indexOf(y)>=0}function O(y){return y===32||y===9||y===11||y===12||y===160||y>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(y)>=0}function x(y){return y===10||y===13||y===8232||y===8233}function K(y){return y===36||y===95||y>=65&&y<=90||y>=97&&y<=122||y===92||y>=128&&l.NonAsciiIdentifierStart.test(String.fromCharCode(y))}function $(y){return y===36||y===95||y>=65&&y<=90||y>=97&&y<=122||y>=48&&y<=57||y===92||y>=128&&l.NonAsciiIdentifierPart.test(String.fromCharCode(y))}function X(y){switch(y){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function j(y){switch(y){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function U(y){return y==="eval"||y==="arguments"}function z(y){if(h&&j(y))return!0;switch(y.length){case 2:return y==="if"||y==="in"||y==="do";case 3:return y==="var"||y==="for"||y==="new"||y==="try"||y==="let";case 4:return y==="this"||y==="else"||y==="case"||y==="void"||y==="with"||y==="enum";case 5:return y==="while"||y==="break"||y==="catch"||y==="throw"||y==="const"||y==="yield"||y==="class"||y==="super";case 6:return y==="return"||y==="typeof"||y==="delete"||y==="switch"||y==="export"||y==="import";case 7:return y==="default"||y==="finally"||y==="extends";case 8:return y==="function"||y==="continue"||y==="debugger";case 10:return y==="instanceof";default:return!1}}function V(y,P,q,te,me){var Ne;C(typeof q=="number","Comment must have valid position"),!(S.lastCommentStart>=q)&&(S.lastCommentStart=q,Ne={type:y,value:P},w.range&&(Ne.range=[q,te]),w.loc&&(Ne.loc=me),w.comments.push(Ne),w.attachComment&&(w.leadingComments.push(Ne),w.trailingComments.push(Ne)))}function J(y){var P,q,te,me;for(P=d-y,q={start:{line:g,column:d-b-y}};d<v;)if(te=f.charCodeAt(d),++d,x(te)){w.comments&&(me=f.slice(P+y,d-1),q.end={line:g,column:d-b-1},V("Line",me,P,d-1,q)),te===13&&f.charCodeAt(d)===10&&++d,++g,b=d;return}w.comments&&(me=f.slice(P+y,d),q.end={line:g,column:d-b},V("Line",me,P,d,q))}function ae(){var y,P,q,te;for(w.comments&&(y=d-2,P={start:{line:g,column:d-b-2}});d<v;)if(q=f.charCodeAt(d),x(q))q===13&&f.charCodeAt(d+1)===10&&++d,++g,++d,b=d,d>=v&&Z({},s.UnexpectedToken,"ILLEGAL");else if(q===42){if(f.charCodeAt(d+1)===47){++d,++d,w.comments&&(te=f.slice(y+2,d-2),P.end={line:g,column:d-b},V("Block",te,y,d,P));return}++d}else++d;Z({},s.UnexpectedToken,"ILLEGAL")}function ne(){var y,P;for(P=d===0;d<v;)if(y=f.charCodeAt(d),O(y))++d;else if(x(y))++d,y===13&&f.charCodeAt(d)===10&&++d,++g,b=d,P=!0;else if(y===47)if(y=f.charCodeAt(d+1),y===47)++d,++d,J(2),P=!0;else if(y===42)++d,++d,ae();else break;else if(P&&y===45)if(f.charCodeAt(d+1)===45&&f.charCodeAt(d+2)===62)d+=3,J(3);else break;else if(y===60)if(f.slice(d+1,d+4)==="!--")++d,++d,++d,++d,J(4);else break;else break}function se(y){var P,q,te,me=0;for(q=y==="u"?4:2,P=0;P<q;++P)if(d<v&&B(f[d]))te=f[d++],me=me*16+"0123456789abcdef".indexOf(te.toLowerCase());else return"";return String.fromCharCode(me)}function De(){var y,P;for(y=f.charCodeAt(d++),P=String.fromCharCode(y),y===92&&(f.charCodeAt(d)!==117&&Z({},s.UnexpectedToken,"ILLEGAL"),++d,y=se("u"),(!y||y==="\\"||!K(y.charCodeAt(0)))&&Z({},s.UnexpectedToken,"ILLEGAL"),P=y);d<v&&(y=f.charCodeAt(d),!!$(y));)++d,P+=String.fromCharCode(y),y===92&&(P=P.substr(0,P.length-1),f.charCodeAt(d)!==117&&Z({},s.UnexpectedToken,"ILLEGAL"),++d,y=se("u"),(!y||y==="\\"||!$(y.charCodeAt(0)))&&Z({},s.UnexpectedToken,"ILLEGAL"),P+=y);return P}function we(){var y,P;for(y=d++;d<v;){if(P=f.charCodeAt(d),P===92)return d=y,De();if($(P))++d;else break}return f.slice(y,d)}function Fe(){var y,P,q;return y=d,P=f.charCodeAt(d)===92?De():we(),P.length===1?q=r.Identifier:z(P)?q=r.Keyword:P==="null"?q=r.NullLiteral:P==="true"||P==="false"?q=r.BooleanLiteral:q=r.Identifier,{type:q,value:P,lineNumber:g,lineStart:b,start:y,end:d}}function xe(){var y=d,P=f.charCodeAt(d),q,te=f[d],me,Ne,vt;switch(P){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++d,w.tokenize&&(P===40?w.openParenToken=w.tokens.length:P===123&&(w.openCurlyToken=w.tokens.length)),{type:r.Punctuator,value:String.fromCharCode(P),lineNumber:g,lineStart:b,start:y,end:d};default:if(q=f.charCodeAt(d+1),q===61)switch(P){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return d+=2,{type:r.Punctuator,value:String.fromCharCode(P)+String.fromCharCode(q),lineNumber:g,lineStart:b,start:y,end:d};case 33:case 61:return d+=2,f.charCodeAt(d)===61&&++d,{type:r.Punctuator,value:f.slice(y,d),lineNumber:g,lineStart:b,start:y,end:d}}}if(vt=f.substr(d,4),vt===">>>=")return d+=4,{type:r.Punctuator,value:vt,lineNumber:g,lineStart:b,start:y,end:d};if(Ne=vt.substr(0,3),Ne===">>>"||Ne==="<<="||Ne===">>=")return d+=3,{type:r.Punctuator,value:Ne,lineNumber:g,lineStart:b,start:y,end:d};if(me=Ne.substr(0,2),te===me[1]&&"+-<>&|".indexOf(te)>=0||me==="=>")return d+=2,{type:r.Punctuator,value:me,lineNumber:g,lineStart:b,start:y,end:d};if("<>=!+-*%&|^/".indexOf(te)>=0)return++d,{type:r.Punctuator,value:te,lineNumber:g,lineStart:b,start:y,end:d};Z({},s.UnexpectedToken,"ILLEGAL")}function ke(y){for(var P="";d<v&&B(f[d]);)P+=f[d++];return P.length===0&&Z({},s.UnexpectedToken,"ILLEGAL"),K(f.charCodeAt(d))&&Z({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt("0x"+P,16),lineNumber:g,lineStart:b,start:y,end:d}}function Ue(y){for(var P="0"+f[d++];d<v&&k(f[d]);)P+=f[d++];return(K(f.charCodeAt(d))||E(f.charCodeAt(d)))&&Z({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseInt(P,8),octal:!0,lineNumber:g,lineStart:b,start:y,end:d}}function Ye(){var y,P;for(y=d+1;y<v;++y){if(P=f[y],P==="8"||P==="9")return!1;if(!k(P))return!0}return!0}function Ke(){var y,P,q;if(q=f[d],C(E(q.charCodeAt(0))||q===".","Numeric literal must start with a decimal digit or a decimal point"),P=d,y="",q!=="."){if(y=f[d++],q=f[d],y==="0"){if(q==="x"||q==="X")return++d,ke(P);if(k(q)&&Ye())return Ue(P)}for(;E(f.charCodeAt(d));)y+=f[d++];q=f[d]}if(q==="."){for(y+=f[d++];E(f.charCodeAt(d));)y+=f[d++];q=f[d]}if(q==="e"||q==="E")if(y+=f[d++],q=f[d],(q==="+"||q==="-")&&(y+=f[d++]),E(f.charCodeAt(d)))for(;E(f.charCodeAt(d));)y+=f[d++];else Z({},s.UnexpectedToken,"ILLEGAL");return K(f.charCodeAt(d))&&Z({},s.UnexpectedToken,"ILLEGAL"),{type:r.NumericLiteral,value:parseFloat(y),lineNumber:g,lineStart:b,start:P,end:d}}function Je(){var y="",P,q,te,me,Ne,vt,St=!1,Gt,fr;for(Gt=g,fr=b,P=f[d],C(P==="'"||P==='"',"String literal must starts with a quote"),q=d,++d;d<v;)if(te=f[d++],te===P){P="";break}else if(te==="\\")if(te=f[d++],!te||!x(te.charCodeAt(0)))switch(te){case"u":case"x":vt=d,Ne=se(te),Ne?y+=Ne:(d=vt,y+=te);break;case"n":y+=`
`;break;case"r":y+="\r";break;case"t":y+="	";break;case"b":y+="\b";break;case"f":y+="\f";break;case"v":y+="\v";break;default:k(te)?(me="01234567".indexOf(te),me!==0&&(St=!0),d<v&&k(f[d])&&(St=!0,me=me*8+"01234567".indexOf(f[d++]),"0123".indexOf(te)>=0&&d<v&&k(f[d])&&(me=me*8+"01234567".indexOf(f[d++]))),y+=String.fromCharCode(me)):y+=te;break}else++g,te==="\r"&&f[d]===`
`&&++d,b=d;else{if(x(te.charCodeAt(0)))break;y+=te}return P!==""&&Z({},s.UnexpectedToken,"ILLEGAL"),{type:r.StringLiteral,value:y,octal:St,startLineNumber:Gt,startLineStart:fr,lineNumber:g,lineStart:b,start:q,end:d}}function Le(y,P){var q;try{q=new RegExp(y,P)}catch{Z({},s.InvalidRegExp)}return q}function Dt(){var y,P,q,te,me;for(y=f[d],C(y==="/","Regular expression literal must start with a slash"),P=f[d++],q=!1,te=!1;d<v;)if(y=f[d++],P+=y,y==="\\")y=f[d++],x(y.charCodeAt(0))&&Z({},s.UnterminatedRegExp),P+=y;else if(x(y.charCodeAt(0)))Z({},s.UnterminatedRegExp);else if(q)y==="]"&&(q=!1);else if(y==="/"){te=!0;break}else y==="["&&(q=!0);return te||Z({},s.UnterminatedRegExp),me=P.substr(1,P.length-2),{value:me,literal:P}}function Et(){var y,P,q,te;for(P="",q="";d<v&&(y=f[d],!!$(y.charCodeAt(0)));)if(++d,y==="\\"&&d<v)if(y=f[d],y==="u"){if(++d,te=d,y=se("u"),y)for(q+=y,P+="\\u";te<d;++te)P+=f[te];else d=te,q+="u",P+="\\u";ee({},s.UnexpectedToken,"ILLEGAL")}else P+="\\",ee({},s.UnexpectedToken,"ILLEGAL");else q+=y,P+=y;return{value:q,literal:P}}function ht(){var y,P,q,te;return D=null,ne(),y=d,P=Dt(),q=Et(),te=Le(P.value,q.value),w.tokenize?{type:r.RegularExpression,value:te,lineNumber:g,lineStart:b,start:y,end:d}:{literal:P.literal+q.literal,value:te,start:y,end:d}}function at(){var y,P,q,te;return ne(),y=d,P={start:{line:g,column:d-b}},q=ht(),P.end={line:g,column:d-b},w.tokenize||(w.tokens.length>0&&(te=w.tokens[w.tokens.length-1],te.range[0]===y&&te.type==="Punctuator"&&(te.value==="/"||te.value==="/=")&&w.tokens.pop()),w.tokens.push({type:"RegularExpression",value:q.literal,range:[y,d],loc:P})),q}function Pt(y){return y.type===r.Identifier||y.type===r.Keyword||y.type===r.BooleanLiteral||y.type===r.NullLiteral}function dr(){var y,P;if(y=w.tokens[w.tokens.length-1],!y)return at();if(y.type==="Punctuator"){if(y.value==="]")return xe();if(y.value===")")return P=w.tokens[w.openParenToken-1],P&&P.type==="Keyword"&&(P.value==="if"||P.value==="while"||P.value==="for"||P.value==="with")?at():xe();if(y.value==="}"){if(w.tokens[w.openCurlyToken-3]&&w.tokens[w.openCurlyToken-3].type==="Keyword"){if(P=w.tokens[w.openCurlyToken-4],!P)return xe()}else if(w.tokens[w.openCurlyToken-4]&&w.tokens[w.openCurlyToken-4].type==="Keyword"){if(P=w.tokens[w.openCurlyToken-5],!P)return at()}else return xe();return i.indexOf(P.value)>=0?xe():at()}return at()}return y.type==="Keyword"&&y.value!=="this"?at():xe()}function Tt(){var y;return ne(),d>=v?{type:r.EOF,lineNumber:g,lineStart:b,start:d,end:d}:(y=f.charCodeAt(d),K(y)?Fe():y===40||y===41||y===59?xe():y===39||y===34?Je():y===46?E(f.charCodeAt(d+1))?Ke():xe():E(y)?Ke():w.tokenize&&y===47?dr():xe())}function Te(){var y,P,q;return ne(),y={start:{line:g,column:d-b}},P=Tt(),y.end={line:g,column:d-b},P.type!==r.EOF&&(q=f.slice(P.start,P.end),w.tokens.push({type:n[P.type],value:q,range:[P.start,P.end],loc:y})),P}function Ve(){var y;return y=D,d=y.end,g=y.lineNumber,b=y.lineStart,D=typeof w.tokens<"u"?Te():Tt(),d=y.end,g=y.lineNumber,b=y.lineStart,y}function Ot(){var y,P,q;y=d,P=g,q=b,D=typeof w.tokens<"u"?Te():Tt(),d=y,g=P,b=q}function Ft(y,P){this.line=y,this.column=P}function $t(y,P,q,te){this.start=new Ft(y,P),this.end=new Ft(q,te)}p={name:"SyntaxTree",processComment:function(y){var P,q;if(!(y.type===a.Program&&y.body.length>0)){for(w.trailingComments.length>0?w.trailingComments[0].range[0]>=y.range[1]?(q=w.trailingComments,w.trailingComments=[]):w.trailingComments.length=0:w.bottomRightStack.length>0&&w.bottomRightStack[w.bottomRightStack.length-1].trailingComments&&w.bottomRightStack[w.bottomRightStack.length-1].trailingComments[0].range[0]>=y.range[1]&&(q=w.bottomRightStack[w.bottomRightStack.length-1].trailingComments,delete w.bottomRightStack[w.bottomRightStack.length-1].trailingComments);w.bottomRightStack.length>0&&w.bottomRightStack[w.bottomRightStack.length-1].range[0]>=y.range[0];)P=w.bottomRightStack.pop();P?P.leadingComments&&P.leadingComments[P.leadingComments.length-1].range[1]<=y.range[0]&&(y.leadingComments=P.leadingComments,delete P.leadingComments):w.leadingComments.length>0&&w.leadingComments[w.leadingComments.length-1].range[1]<=y.range[0]&&(y.leadingComments=w.leadingComments,w.leadingComments=[]),q&&(y.trailingComments=q),w.bottomRightStack.push(y)}},markEnd:function(y,P){return w.range&&(y.range=[P.start,d]),w.loc&&(y.loc=new $t(P.startLineNumber===void 0?P.lineNumber:P.startLineNumber,P.start-(P.startLineStart===void 0?P.lineStart:P.startLineStart),g,d-b),this.postProcess(y)),w.attachComment&&this.processComment(y),y},postProcess:function(y){return w.source&&(y.loc.source=w.source),y},createArrayExpression:function(y){return{type:a.ArrayExpression,elements:y}},createAssignmentExpression:function(y,P,q){return{type:a.AssignmentExpression,operator:y,left:P,right:q}},createBinaryExpression:function(y,P,q){var te=y==="||"||y==="&&"?a.LogicalExpression:a.BinaryExpression;return{type:te,operator:y,left:P,right:q}},createBlockStatement:function(y){return{type:a.BlockStatement,body:y}},createBreakStatement:function(y){return{type:a.BreakStatement,label:y}},createCallExpression:function(y,P){return{type:a.CallExpression,callee:y,arguments:P}},createCatchClause:function(y,P){return{type:a.CatchClause,param:y,body:P}},createConditionalExpression:function(y,P,q){return{type:a.ConditionalExpression,test:y,consequent:P,alternate:q}},createContinueStatement:function(y){return{type:a.ContinueStatement,label:y}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(y,P){return{type:a.DoWhileStatement,body:y,test:P}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(y){return{type:a.ExpressionStatement,expression:y}},createForStatement:function(y,P,q,te){return{type:a.ForStatement,init:y,test:P,update:q,body:te}},createForInStatement:function(y,P,q){return{type:a.ForInStatement,left:y,right:P,body:q,each:!1}},createFunctionDeclaration:function(y,P,q,te){return{type:a.FunctionDeclaration,id:y,params:P,defaults:q,body:te,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(y,P,q,te){return{type:a.FunctionExpression,id:y,params:P,defaults:q,body:te,rest:null,generator:!1,expression:!1}},createIdentifier:function(y){return{type:a.Identifier,name:y}},createIfStatement:function(y,P,q){return{type:a.IfStatement,test:y,consequent:P,alternate:q}},createLabeledStatement:function(y,P){return{type:a.LabeledStatement,label:y,body:P}},createLiteral:function(y){return{type:a.Literal,value:y.value,raw:f.slice(y.start,y.end)}},createMemberExpression:function(y,P,q){return{type:a.MemberExpression,computed:y==="[",object:P,property:q}},createNewExpression:function(y,P){return{type:a.NewExpression,callee:y,arguments:P}},createObjectExpression:function(y){return{type:a.ObjectExpression,properties:y}},createPostfixExpression:function(y,P){return{type:a.UpdateExpression,operator:y,argument:P,prefix:!1}},createProgram:function(y){return{type:a.Program,body:y}},createProperty:function(y,P,q){return{type:a.Property,key:P,value:q,kind:y}},createReturnStatement:function(y){return{type:a.ReturnStatement,argument:y}},createSequenceExpression:function(y){return{type:a.SequenceExpression,expressions:y}},createSwitchCase:function(y,P){return{type:a.SwitchCase,test:y,consequent:P}},createSwitchStatement:function(y,P){return{type:a.SwitchStatement,discriminant:y,cases:P}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(y){return{type:a.ThrowStatement,argument:y}},createTryStatement:function(y,P,q,te){return{type:a.TryStatement,block:y,guardedHandlers:P,handlers:q,finalizer:te}},createUnaryExpression:function(y,P){return y==="++"||y==="--"?{type:a.UpdateExpression,operator:y,argument:P,prefix:!0}:{type:a.UnaryExpression,operator:y,argument:P,prefix:!0}},createVariableDeclaration:function(y,P){return{type:a.VariableDeclaration,declarations:y,kind:P}},createVariableDeclarator:function(y,P){return{type:a.VariableDeclarator,id:y,init:P}},createWhileStatement:function(y,P){return{type:a.WhileStatement,test:y,body:P}},createWithStatement:function(y,P){return{type:a.WithStatement,object:y,body:P}}};function G(){var y,P,q,te;return y=d,P=g,q=b,ne(),te=g!==P,d=y,g=P,b=q,te}function Z(y,P){var q,te=Array.prototype.slice.call(arguments,2),me=P.replace(/%(\d)/g,function(Ne,vt){return C(vt<te.length,"Message reference must be in range"),te[vt]});throw typeof y.lineNumber=="number"?(q=new Error("Line "+y.lineNumber+": "+me),q.index=y.start,q.lineNumber=y.lineNumber,q.column=y.start-b+1):(q=new Error("Line "+g+": "+me),q.index=d,q.lineNumber=g,q.column=d-b+1),q.description=me,q}function ee(){try{Z.apply(null,arguments)}catch(y){if(w.errors)w.errors.push(y);else throw y}}function ce(y){if(y.type===r.EOF&&Z(y,s.UnexpectedEOS),y.type===r.NumericLiteral&&Z(y,s.UnexpectedNumber),y.type===r.StringLiteral&&Z(y,s.UnexpectedString),y.type===r.Identifier&&Z(y,s.UnexpectedIdentifier),y.type===r.Keyword){if(X(y.value))Z(y,s.UnexpectedReserved);else if(h&&j(y.value)){ee(y,s.StrictReservedWord);return}Z(y,s.UnexpectedToken,y.value)}Z(y,s.UnexpectedToken,y.value)}function ue(y){var P=Ve();(P.type!==r.Punctuator||P.value!==y)&&ce(P)}function de(y){var P=Ve();(P.type!==r.Keyword||P.value!==y)&&ce(P)}function fe(y){return D.type===r.Punctuator&&D.value===y}function pe(y){return D.type===r.Keyword&&D.value===y}function Pe(){var y;return D.type!==r.Punctuator?!1:(y=D.value,y==="="||y==="*="||y==="/="||y==="%="||y==="+="||y==="-="||y==="<<="||y===">>="||y===">>>="||y==="&="||y==="^="||y==="|=")}function He(){var y,P=d,q=g,te=b,me=D;if(f.charCodeAt(d)===59||fe(";")){Ve();return}if(y=g,ne(),g!==y){d=P,g=q,b=te,D=me;return}D.type!==r.EOF&&!fe("}")&&ce(D)}function ct(y){return y.type===a.Identifier||y.type===a.MemberExpression}function Ie(){var y=[],P;for(P=D,ue("[");!fe("]");)fe(",")?(Ve(),y.push(null)):(y.push(Mr()),fe("]")||ue(","));return Ve(),_.markEnd(_.createArrayExpression(y),P)}function Yt(y,P){var q,te,me;return q=h,me=D,te=Vi(),P&&h&&U(y[0].name)&&ee(P,s.StrictParamName),h=q,_.markEnd(_.createFunctionExpression(null,y,[],te),me)}function zt(){var y,P;return P=D,y=Ve(),y.type===r.StringLiteral||y.type===r.NumericLiteral?(h&&y.octal&&ee(y,s.StrictOctalLiteral),_.markEnd(_.createLiteral(y),P)):_.markEnd(_.createIdentifier(y.value),P)}function ir(){var y,P,q,te,me,Ne;if(y=D,Ne=D,y.type===r.Identifier)return q=zt(),y.value==="get"&&!fe(":")?(P=zt(),ue("("),ue(")"),te=Yt([]),_.markEnd(_.createProperty("get",P,te),Ne)):y.value==="set"&&!fe(":")?(P=zt(),ue("("),y=D,y.type!==r.Identifier?(ue(")"),ee(y,s.UnexpectedToken,y.value),te=Yt([])):(me=[vn()],ue(")"),te=Yt(me,y)),_.markEnd(_.createProperty("set",P,te),Ne)):(ue(":"),te=Mr(),_.markEnd(_.createProperty("init",q,te),Ne));if(y.type===r.EOF||y.type===r.Punctuator)ce(y);else return P=zt(),ue(":"),te=Mr(),_.markEnd(_.createProperty("init",P,te),Ne)}function Zt(){var y=[],P,q,te,me,Ne={},vt=String,St;for(St=D,ue("{");!fe("}");)P=ir(),P.key.type===a.Identifier?q=P.key.name:q=vt(P.key.value),me=P.kind==="init"?o.Data:P.kind==="get"?o.Get:o.Set,te="$"+q,Object.prototype.hasOwnProperty.call(Ne,te)?(Ne[te]===o.Data?h&&me===o.Data?ee({},s.StrictDuplicateProperty):me!==o.Data&&ee({},s.AccessorDataProperty):me===o.Data?ee({},s.AccessorDataProperty):Ne[te]&me&&ee({},s.AccessorGetSet),Ne[te]|=me):Ne[te]=me,y.push(P),fe("}")||ue(",");return ue("}"),_.markEnd(_.createObjectExpression(y),St)}function Er(){var y;return ue("("),y=ar(),ue(")"),y}function Jt(){var y,P,q,te;if(fe("("))return Er();if(fe("["))return Ie();if(fe("{"))return Zt();if(y=D.type,te=D,y===r.Identifier)q=_.createIdentifier(Ve().value);else if(y===r.StringLiteral||y===r.NumericLiteral)h&&D.octal&&ee(D,s.StrictOctalLiteral),q=_.createLiteral(Ve());else if(y===r.Keyword){if(pe("function"))return ji();pe("this")?(Ve(),q=_.createThisExpression()):ce(Ve())}else y===r.BooleanLiteral?(P=Ve(),P.value=P.value==="true",q=_.createLiteral(P)):y===r.NullLiteral?(P=Ve(),P.value=null,q=_.createLiteral(P)):fe("/")||fe("/=")?(typeof w.tokens<"u"?q=_.createLiteral(at()):q=_.createLiteral(ht()),Ot()):ce(Ve());return _.markEnd(q,te)}function Ar(){var y=[];if(ue("("),!fe(")"))for(;d<v&&(y.push(Mr()),!fe(")"));)ue(",");return ue(")"),y}function pr(){var y,P;return P=D,y=Ve(),Pt(y)||ce(y),_.markEnd(_.createIdentifier(y.value),P)}function gr(){return ue("."),pr()}function gn(){var y;return ue("["),y=ar(),ue("]"),y}function mr(){var y,P,q;return q=D,de("new"),y=Xn(),P=fe("(")?Ar():[],_.markEnd(_.createNewExpression(y,P),q)}function On(){var y,P,q,te,me=S.allowIn;for(te=D,S.allowIn=!0,y=pe("new")?mr():Jt();;){if(fe("."))q=gr(),y=_.createMemberExpression(".",y,q);else if(fe("("))P=Ar(),y=_.createCallExpression(y,P);else if(fe("["))q=gn(),y=_.createMemberExpression("[",y,q);else break;_.markEnd(y,te)}return S.allowIn=me,y}function Xn(){var y,P,q;for(C(S.allowIn,"callee of new expression always allow in keyword."),q=D,y=pe("new")?mr():Jt();fe(".")||fe("[");)fe("[")?(P=gn(),y=_.createMemberExpression("[",y,P)):(P=gr(),y=_.createMemberExpression(".",y,P)),_.markEnd(y,q);return y}function Un(){var y,P,q=D;return y=On(),D.type===r.Punctuator&&(fe("++")||fe("--"))&&!G()&&(h&&y.type===a.Identifier&&U(y.name)&&ee({},s.StrictLHSPostfix),ct(y)||ee({},s.InvalidLHSInAssignment),P=Ve(),y=_.markEnd(_.createPostfixExpression(P.value,y),q)),y}function Vn(){var y,P,q;return D.type!==r.Punctuator&&D.type!==r.Keyword?P=Un():fe("++")||fe("--")?(q=D,y=Ve(),P=Vn(),h&&P.type===a.Identifier&&U(P.name)&&ee({},s.StrictLHSPrefix),ct(P)||ee({},s.InvalidLHSInAssignment),P=_.createUnaryExpression(y.value,P),P=_.markEnd(P,q)):fe("+")||fe("-")||fe("~")||fe("!")?(q=D,y=Ve(),P=Vn(),P=_.createUnaryExpression(y.value,P),P=_.markEnd(P,q)):pe("delete")||pe("void")||pe("typeof")?(q=D,y=Ve(),P=Vn(),P=_.createUnaryExpression(y.value,P),P=_.markEnd(P,q),h&&P.operator==="delete"&&P.argument.type===a.Identifier&&ee({},s.StrictDelete)):P=Un(),P}function ta(y,P){var q=0;if(y.type!==r.Punctuator&&y.type!==r.Keyword)return 0;switch(y.value){case"||":q=1;break;case"&&":q=2;break;case"|":q=3;break;case"^":q=4;break;case"&":q=5;break;case"==":case"!=":case"===":case"!==":q=6;break;case"<":case">":case"<=":case">=":case"instanceof":q=7;break;case"in":q=P?7:0;break;case"<<":case">>":case">>>":q=8;break;case"+":case"-":q=9;break;case"*":case"/":case"%":q=11;break}return q}function Ri(){var y,P,q,te,me,Ne,vt,St,Gt,fr;if(y=D,Gt=Vn(),te=D,me=ta(te,S.allowIn),me===0)return Gt;for(te.prec=me,Ve(),P=[y,D],vt=Vn(),Ne=[Gt,te,vt];(me=ta(D,S.allowIn))>0;){for(;Ne.length>2&&me<=Ne[Ne.length-2].prec;)vt=Ne.pop(),St=Ne.pop().value,Gt=Ne.pop(),q=_.createBinaryExpression(St,Gt,vt),P.pop(),y=P[P.length-1],_.markEnd(q,y),Ne.push(q);te=Ve(),te.prec=me,Ne.push(te),P.push(D),q=Vn(),Ne.push(q)}for(fr=Ne.length-1,q=Ne[fr],P.pop();fr>1;)q=_.createBinaryExpression(Ne[fr-1].value,Ne[fr-2],q),fr-=2,y=P.pop(),_.markEnd(q,y);return q}function Ia(){var y,P,q,te,me;return me=D,y=Ri(),fe("?")&&(Ve(),P=S.allowIn,S.allowIn=!0,q=Mr(),S.allowIn=P,ue(":"),te=Mr(),y=_.createConditionalExpression(y,q,te),_.markEnd(y,me)),y}function Mr(){var y,P,q,te,me;return y=D,me=D,te=P=Ia(),Pe()&&(ct(P)||ee({},s.InvalidLHSInAssignment),h&&P.type===a.Identifier&&U(P.name)&&ee(y,s.StrictLHSAssignment),y=Ve(),q=Mr(),te=_.markEnd(_.createAssignmentExpression(y.value,P,q),me)),te}function ar(){var y,P=D;if(y=Mr(),fe(",")){for(y=_.createSequenceExpression([y]);d<v&&fe(",");)Ve(),y.expressions.push(Mr());_.markEnd(y,P)}return y}function Na(){for(var y=[],P;d<v&&!(fe("}")||(P=Mn(),typeof P>"u"));)y.push(P);return y}function gi(){var y,P;return P=D,ue("{"),y=Na(),ue("}"),_.markEnd(_.createBlockStatement(y),P)}function vn(){var y,P;return P=D,y=Ve(),y.type!==r.Identifier&&ce(y),_.markEnd(_.createIdentifier(y.value),P)}function ei(y){var P=null,q,te;return te=D,q=vn(),h&&U(q.name)&&ee({},s.StrictVarName),y==="const"?(ue("="),P=Mr()):fe("=")&&(Ve(),P=Mr()),_.markEnd(_.createVariableDeclarator(q,P),te)}function Ui(y){var P=[];do{if(P.push(ei(y)),!fe(","))break;Ve()}while(d<v);return P}function xa(){var y;return de("var"),y=Ui(),He(),_.createVariableDeclaration(y,"var")}function La(y){var P,q;return q=D,de(y),P=Ui(y),He(),_.markEnd(_.createVariableDeclaration(P,y),q)}function ra(){return ue(";"),_.createEmptyStatement()}function Ra(){var y=ar();return He(),_.createExpressionStatement(y)}function Ua(){var y,P,q;return de("if"),ue("("),y=ar(),ue(")"),P=Kr(),pe("else")?(Ve(),q=Kr()):q=null,_.createIfStatement(y,P,q)}function Va(){var y,P,q;return de("do"),q=S.inIteration,S.inIteration=!0,y=Kr(),S.inIteration=q,de("while"),ue("("),P=ar(),ue(")"),fe(";")&&Ve(),_.createDoWhileStatement(y,P)}function ja(){var y,P,q;return de("while"),ue("("),y=ar(),ue(")"),q=S.inIteration,S.inIteration=!0,P=Kr(),S.inIteration=q,_.createWhileStatement(y,P)}function za(){var y,P,q;return q=D,y=Ve(),P=Ui(),_.markEnd(_.createVariableDeclaration(P,y.value),q)}function qa(){var y,P,q,te,me,Ne,vt,St=S.allowIn;return y=P=q=null,de("for"),ue("("),fe(";")?Ve():(pe("var")||pe("let")?(S.allowIn=!1,y=za(),S.allowIn=St,y.declarations.length===1&&pe("in")&&(Ve(),te=y,me=ar(),y=null)):(S.allowIn=!1,y=ar(),S.allowIn=St,pe("in")&&(ct(y)||ee({},s.InvalidLHSInForIn),Ve(),te=y,me=ar(),y=null)),typeof te>"u"&&ue(";")),typeof te>"u"&&(fe(";")||(P=ar()),ue(";"),fe(")")||(q=ar())),ue(")"),vt=S.inIteration,S.inIteration=!0,Ne=Kr(),S.inIteration=vt,typeof te>"u"?_.createForStatement(y,P,q,Ne):_.createForInStatement(te,me,Ne)}function vi(){var y=null,P;return de("continue"),f.charCodeAt(d)===59?(Ve(),S.inIteration||Z({},s.IllegalContinue),_.createContinueStatement(null)):G()?(S.inIteration||Z({},s.IllegalContinue),_.createContinueStatement(null)):(D.type===r.Identifier&&(y=vn(),P="$"+y.name,Object.prototype.hasOwnProperty.call(S.labelSet,P)||Z({},s.UnknownLabel,y.name)),He(),y===null&&!S.inIteration&&Z({},s.IllegalContinue),_.createContinueStatement(y))}function Wa(){var y=null,P;return de("break"),f.charCodeAt(d)===59?(Ve(),S.inIteration||S.inSwitch||Z({},s.IllegalBreak),_.createBreakStatement(null)):G()?(S.inIteration||S.inSwitch||Z({},s.IllegalBreak),_.createBreakStatement(null)):(D.type===r.Identifier&&(y=vn(),P="$"+y.name,Object.prototype.hasOwnProperty.call(S.labelSet,P)||Z({},s.UnknownLabel,y.name)),He(),y===null&&!(S.inIteration||S.inSwitch)&&Z({},s.IllegalBreak),_.createBreakStatement(y))}function mi(){var y=null;return de("return"),S.inFunctionBody||ee({},s.IllegalReturn),f.charCodeAt(d)===32&&K(f.charCodeAt(d+1))?(y=ar(),He(),_.createReturnStatement(y)):G()?_.createReturnStatement(null):(fe(";")||!fe("}")&&D.type!==r.EOF&&(y=ar()),He(),_.createReturnStatement(y))}function Ha(){var y,P;return h&&(ne(),ee({},s.StrictModeWith)),de("with"),ue("("),y=ar(),ue(")"),P=Kr(),_.createWithStatement(y,P)}function Ga(){var y,P=[],q,te;for(te=D,pe("default")?(Ve(),y=null):(de("case"),y=ar()),ue(":");d<v&&!(fe("}")||pe("default")||pe("case"));)q=Kr(),P.push(q);return _.markEnd(_.createSwitchCase(y,P),te)}function Ka(){var y,P,q,te,me;if(de("switch"),ue("("),y=ar(),ue(")"),ue("{"),P=[],fe("}"))return Ve(),_.createSwitchStatement(y,P);for(te=S.inSwitch,S.inSwitch=!0,me=!1;d<v&&!fe("}");)q=Ga(),q.test===null&&(me&&Z({},s.MultipleDefaultsInSwitch),me=!0),P.push(q);return S.inSwitch=te,ue("}"),_.createSwitchStatement(y,P)}function na(){var y;return de("throw"),G()&&Z({},s.NewlineAfterThrow),y=ar(),He(),_.createThrowStatement(y)}function jn(){var y,P,q;return q=D,de("catch"),ue("("),fe(")")&&ce(D),y=vn(),h&&U(y.name)&&ee({},s.StrictCatchVariable),ue(")"),P=gi(),_.markEnd(_.createCatchClause(y,P),q)}function Cr(){var y,P=[],q=null;return de("try"),y=gi(),pe("catch")&&P.push(jn()),pe("finally")&&(Ve(),q=gi()),P.length===0&&!q&&Z({},s.NoCatchOrFinally),_.createTryStatement(y,[],P,q)}function lr(){return de("debugger"),He(),_.createDebuggerStatement()}function Kr(){var y=D.type,P,q,te,me;if(y===r.EOF&&ce(D),y===r.Punctuator&&D.value==="{")return gi();if(me=D,y===r.Punctuator)switch(D.value){case";":return _.markEnd(ra(),me);case"(":return _.markEnd(Ra(),me)}if(y===r.Keyword)switch(D.value){case"break":return _.markEnd(Wa(),me);case"continue":return _.markEnd(vi(),me);case"debugger":return _.markEnd(lr(),me);case"do":return _.markEnd(Va(),me);case"for":return _.markEnd(qa(),me);case"function":return _.markEnd(zn(),me);case"if":return _.markEnd(Ua(),me);case"return":return _.markEnd(mi(),me);case"switch":return _.markEnd(Ka(),me);case"throw":return _.markEnd(na(),me);case"try":return _.markEnd(Cr(),me);case"var":return _.markEnd(xa(),me);case"while":return _.markEnd(ja(),me);case"with":return _.markEnd(Ha(),me)}return P=ar(),P.type===a.Identifier&&fe(":")?(Ve(),te="$"+P.name,Object.prototype.hasOwnProperty.call(S.labelSet,te)&&Z({},s.Redeclaration,"Label",P.name),S.labelSet[te]=!0,q=Kr(),delete S.labelSet[te],_.markEnd(_.createLabeledStatement(P,q),me)):(He(),_.markEnd(_.createExpressionStatement(P),me))}function Vi(){var y,P=[],q,te,me,Ne,vt,St,Gt,fr;for(fr=D,ue("{");d<v&&!(D.type!==r.StringLiteral||(q=D,y=Mn(),P.push(y),y.expression.type!==a.Literal));)te=f.slice(q.start+1,q.end-1),te==="use strict"?(h=!0,me&&ee(me,s.StrictOctalLiteral)):!me&&q.octal&&(me=q);for(Ne=S.labelSet,vt=S.inIteration,St=S.inSwitch,Gt=S.inFunctionBody,S.labelSet={},S.inIteration=!1,S.inSwitch=!1,S.inFunctionBody=!0;d<v&&!(fe("}")||(y=Mn(),typeof y>"u"));)P.push(y);return ue("}"),S.labelSet=Ne,S.inIteration=vt,S.inSwitch=St,S.inFunctionBody=Gt,_.markEnd(_.createBlockStatement(P),fr)}function ti(y){var P,q=[],te,me,Ne,vt,St;if(ue("("),!fe(")"))for(Ne={};d<v&&(te=D,P=vn(),vt="$"+te.value,h?(U(te.value)&&(me=te,St=s.StrictParamName),Object.prototype.hasOwnProperty.call(Ne,vt)&&(me=te,St=s.StrictParamDupe)):y||(U(te.value)?(y=te,St=s.StrictParamName):j(te.value)?(y=te,St=s.StrictReservedWord):Object.prototype.hasOwnProperty.call(Ne,vt)&&(y=te,St=s.StrictParamDupe)),q.push(P),Ne[vt]=!0,!fe(")"));)ue(",");return ue(")"),{params:q,stricted:me,firstRestricted:y,message:St}}function zn(){var y,P=[],q,te,me,Ne,vt,St,Gt,fr;return fr=D,de("function"),te=D,y=vn(),h?U(te.value)&&ee(te,s.StrictFunctionName):U(te.value)?(vt=te,St=s.StrictFunctionName):j(te.value)&&(vt=te,St=s.StrictReservedWord),Ne=ti(vt),P=Ne.params,me=Ne.stricted,vt=Ne.firstRestricted,Ne.message&&(St=Ne.message),Gt=h,q=Vi(),h&&vt&&Z(vt,St),h&&me&&ee(me,St),h=Gt,_.markEnd(_.createFunctionDeclaration(y,P,[],q),fr)}function ji(){var y,P=null,q,te,me,Ne,vt=[],St,Gt,fr;return fr=D,de("function"),fe("(")||(y=D,P=vn(),h?U(y.value)&&ee(y,s.StrictFunctionName):U(y.value)?(te=y,me=s.StrictFunctionName):j(y.value)&&(te=y,me=s.StrictReservedWord)),Ne=ti(te),vt=Ne.params,q=Ne.stricted,te=Ne.firstRestricted,Ne.message&&(me=Ne.message),Gt=h,St=Vi(),h&&te&&Z(te,me),h&&q&&ee(q,me),h=Gt,_.markEnd(_.createFunctionExpression(P,vt,[],St),fr)}function Mn(){if(D.type===r.Keyword)switch(D.value){case"const":case"let":return La(D.value);case"function":return zn();default:return Kr()}if(D.type!==r.EOF)return Kr()}function mn(){for(var y,P=[],q,te,me;d<v&&(q=D,!(q.type!==r.StringLiteral||(y=Mn(),P.push(y),y.expression.type!==a.Literal)));)te=f.slice(q.start+1,q.end-1),te==="use strict"?(h=!0,me&&ee(me,s.StrictOctalLiteral)):!me&&q.octal&&(me=q);for(;d<v&&(y=Mn(),!(typeof y>"u"));)P.push(y);return P}function yo(){var y,P;return ne(),Ot(),P=D,h=!1,y=mn(),_.markEnd(_.createProgram(y),P)}function $a(){var y,P,q,te=[];for(y=0;y<w.tokens.length;++y)P=w.tokens[y],q={type:P.type,value:P.value},w.range&&(q.range=P.range),w.loc&&(q.loc=P.loc),te.push(q);w.tokens=te}function ia(y,P){var q,te,me;q=String,typeof y!="string"&&!(y instanceof String)&&(y=q(y)),_=p,f=y,d=0,g=f.length>0?1:0,b=0,v=f.length,D=null,S={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},w={},P=P||{},P.tokens=!0,w.tokens=[],w.tokenize=!0,w.openParenToken=-1,w.openCurlyToken=-1,w.range=typeof P.range=="boolean"&&P.range,w.loc=typeof P.loc=="boolean"&&P.loc,typeof P.comment=="boolean"&&P.comment&&(w.comments=[]),typeof P.tolerant=="boolean"&&P.tolerant&&(w.errors=[]);try{if(Ot(),D.type===r.EOF)return w.tokens;for(te=Ve();D.type!==r.EOF;)try{te=Ve()}catch(Ne){if(te=D,w.errors){w.errors.push(Ne);break}else throw Ne}$a(),me=w.tokens,typeof w.comments<"u"&&(me.comments=w.comments),typeof w.errors<"u"&&(me.errors=w.errors)}catch(Ne){throw Ne}finally{w={}}return me}function Cu(y,P){var q,te;te=String,typeof y!="string"&&!(y instanceof String)&&(y=te(y)),_=p,f=y,d=0,g=f.length>0?1:0,b=0,v=f.length,D=null,S={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},w={},typeof P<"u"&&(w.range=typeof P.range=="boolean"&&P.range,w.loc=typeof P.loc=="boolean"&&P.loc,w.attachComment=typeof P.attachComment=="boolean"&&P.attachComment,w.loc&&P.source!==null&&P.source!==void 0&&(w.source=te(P.source)),typeof P.tokens=="boolean"&&P.tokens&&(w.tokens=[]),typeof P.comment=="boolean"&&P.comment&&(w.comments=[]),typeof P.tolerant=="boolean"&&P.tolerant&&(w.errors=[]),w.attachComment&&(w.range=!0,w.comments=[],w.bottomRightStack=[],w.trailingComments=[],w.leadingComments=[]));try{q=yo(),typeof w.comments<"u"&&(q.comments=w.comments),typeof w.tokens<"u"&&($a(),q.tokens=w.tokens),typeof w.errors<"u"&&(q.errors=w.errors)}catch(me){throw me}finally{w={}}return q}e.version="1.2.5",e.tokenize=ia,e.parse=Cu,e.Syntax=function(){var y,P={};typeof Object.create=="function"&&(P=Object.create(null));for(y in a)a.hasOwnProperty(y)&&(P[y]=a[y]);return typeof Object.freeze=="function"&&Object.freeze(P),P}()})})(I1);var XF=I1,fd=P1,e3=0;function t3(t,e,r){this.name=t,this.lvalue=e,this.rvalue=r,this.count=0}function r3(t,e,r,n){this.body=t,this.args=e,this.thisVars=r,this.localVars=n}function n3(t){if(t==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?t in window:typeof vr<"u"?t in vr:typeof self<"u"?t in self:!1}function i3(t){for(var e=t.body[0].expression.callee.params,r=new Array(e.length),n=0;n<e.length;++n)r[n]=e[n].name;return r}function a3(t){for(var e=["(",t,")()"].join(""),r=XF.parse(e,{range:!0}),n="_inline_"+e3+++"_",i=i3(r),a=new Array(i.length),o=0;o<i.length;++o)a[o]=new t3([n,"arg",o,"_"].join(""),!1,!1);for(var s=new Array(e.length),o=0,l=e.length;o<l;++o)s[o]=e.charAt(o);var p=[],f=[];function h(C){var E=n+C.replace(/\_/g,"__");return p.push(E),E}function d(C){var E="this_"+C.replace(/\_/g,"__");return f.push(E),E}function g(C,E){for(var B=C.range[0],k=C.range[1],O=B+1;O<k;++O)s[O]="";s[B]=E}function b(C){return"'"+C.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function v(C){return s.slice(C.range[0],C.range[1]).join("")}var _=1,D=2;function S(C){return C.parent.type==="AssignmentExpression"&&C.parent.left===C?C.parent.operator==="="?_:_|D:C.parent.type==="UpdateExpression"?_|D:D}(function C(E,B){if(E.parent=B,E.type==="MemberExpression")E.computed?(C(E.object,E),C(E.property,E)):E.object.type==="ThisExpression"?g(E,d(E.property.name)):C(E.object,E);else{if(E.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(E.type==="Identifier"){var k=E.name,O=i.indexOf(k);if(O>=0){var x=a[O],K=S(E);K&_&&(x.lvalue=!0),K&D&&(x.rvalue=!0),++x.count,g(E,x.name)}else n3(k)||g(E,h(k))}else if(E.type==="Literal")typeof E.value=="string"&&g(E,b(E.value));else{if(E.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var $=Object.keys(E),X=0,j=$.length;X<j;++X)if($[X]!=="parent"){var U=E[$[X]];if(U)if(U instanceof Array)for(var z=0;z<U.length;++z)U[z]&&typeof U[z].type=="string"&&C(U[z],E);else typeof U.type=="string"&&C(U,E)}}}})(r.body[0].expression.callee.body,void 0),fd(p),fd(f);var w=new r3(v(r.body[0].expression.callee.body),a,f,p);return w}var u3=a3,xl=u3,s3=Gf,ps=["args","body"],o3=["pre","post","printCode","funcName","blockSize"];function l3(t){for(var e in t)ps.indexOf(e)<0&&o3.indexOf(e)<0&&console.warn("cwise: Unknown argument '"+e+"' passed to expression compiler");for(var r=0;r<ps.length;++r)if(!t[ps[r]])throw new Error("cwise: Missing argument: "+ps[r]);return s3({args:t.args,pre:xl(t.pre||function(){}),body:xl(t.body),post:xl(t.post||function(){}),debug:!!t.printCode,funcName:t.funcName||t.body.name||"cwise",blockSize:t.blockSize||64})}var po=l3,f3=QF,c3=po,h3=c3({args:["array","scalar","index"],body:function(e,r,n){var i=r,a;for(a=0;a<n.length-1;++a)i=i[n[a]];i[n[n.length-1]]=e}}),d3=function(e){var r=f3(e.shape);return h3(e,r),r},zs={},p3={get exports(){return zs},set exports(t){zs=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(o,s){for(var l=new Float64Array(o*s),p=0;p<l.length;p++)l[p]=a()*1e-4;return(0,n.default)(l,[o,s])};var r=Ta,n=i(r);function i(o){return o&&o.__esModule?o:{default:o}}function a(){var o=2*Math.random()-1,s=2*Math.random()-1,l=o*o+s*s;return l==0||l>1?a():o*Math.sqrt(-2*Math.log(l)/l)}t.exports=e.default})(p3,zs);var mu={},g3={get exports(){return mu},set exports(t){mu=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(h,d){var g=h.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]);switch(d){case"euclidean":for(var v=0;v<g;v++)for(var _=v+1;_<g;_++){var D=s(h.pick(v,null),h.pick(_,null));b.set(v,_,D),b.set(_,v,D)}break;case"manhattan":for(var v=0;v<g;v++)for(var _=v+1;_<g;_++){var D=l(h.pick(v,null),h.pick(_,null));b.set(v,_,D),b.set(_,v,D)}break;case"jaccard":for(var v=0;v<g;v++)for(var _=v+1;_<g;_++){var D=p(h.pick(v,null),h.pick(_,null));b.set(v,_,D),b.set(_,v,D)}break;case"dice":for(var v=0;v<g;v++)for(var _=v+1;_<g;_++){var D=f(h.pick(v,null),h.pick(_,null));b.set(v,_,D),b.set(_,v,D)}break}return b};var r=Ta,n=o(r),i=po,a=o(i);function o(h){return h&&h.__esModule?h:{default:h}}var s=(0,a.default)({args:["array","array"],pre:function(d,g){this.sum=0},body:function(d,g){var b=d-g;this.sum+=b*b},post:function(d,g){return Math.sqrt(this.sum)}}),l=(0,a.default)({args:["array","array"],pre:function(d,g){this.sum=0},body:function(d,g){this.sum+=Math.abs(d-g)},post:function(d,g){return this.sum}}),p=(0,a.default)({args:["array","array"],pre:function(d,g){this.tf=0,this.tt=0},body:function(d,g){var b=Math.round(d),v=Math.round(g);this.tf+=+(b!=v),this.tt+=+(b==1&&v==1)},post:function(d,g){return this.tf+this.tt===0?1:this.tf/(this.tf+this.tt)}}),f=(0,a.default)({args:["array","array"],pre:function(d,g){this.tf=0,this.tt=0},body:function(d,g){var b=Math.round(d),v=Math.round(g);this.tf+=+(b!=v),this.tt+=+(b==1&&v==1)},post:function(d,g){return this.tf+this.tt===0?1:this.tf/(this.tf+2*this.tt)}});t.exports=e.default})(g3,mu);var qs={},v3={get exports(){return qs},set exports(t){qs=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(f,h){for(var d=100,g=f.shape[0],b=(0,n.default)(new Float64Array(g*g),[g,g]),v=(0,n.default)(new Float64Array(g*g),[g,g]),_=void 0,D=void 0,S=1/0,w=Math.log(h),C=void 0,E=void 0,B=void 0,k=void 0,O=0;O<g;O++){_=1,D=-1/0,S=1/0;for(var x=0;x<d;x++){for(var K=0;K<g;K++)b.set(O,K,Math.exp(-f.get(O,K)*_));b.set(O,O,0),B=0;for(var K=0;K<g;K++)B+=b.get(O,K);B==0&&(B=s),k=0;for(var K=0;K<g;K++)b.set(O,K,b.get(O,K)/B),k+=f.get(O,K)*b.get(O,K);if(E=Math.log(B)+_*k,C=E-w,Math.abs(C)<=p)break;C>0?(D=_,S==1/0?_=_*2:_=(_+S)/2):(S=_,D==-1/0?_=_/2:_=(_+D)/2)}}a.default.add(v,b,b.transpose(1,0));var $=Math.max(a.default.sum(v),l);return a.default.divseq(v,$),a.default.maxseq(v,l),v};var r=Ta,n=o(r),i=ho,a=o(i);function o(f){return f&&f.__esModule?f:{default:f}}var s=1e-7,l=Number.EPSILON||2220446049250313e-31,p=1e-5;t.exports=e.default})(v3,qs);var Ws={},m3={get exports(){return Ws},set exports(t){Ws=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(g,b,v){var _=g.shape[0],D=g.shape[1],S=(0,n.default)(new Float64Array(_*_),[_,_]),w=(0,p.default)(g,"euclidean");d(w);var C=(v+1)/-2;a.default.powseq(a.default.divseq(a.default.addseq(w,1),v),C);for(var E=0;E<_;E++)w.set(E,E,0);var B=Math.max(a.default.sum(w),h);a.default.divs(S,w,B),a.default.maxseq(S,h);var k=(0,n.default)(new Float64Array(_*_),[_,_]),O=(0,n.default)(new Float64Array(_*_),[_,_]);a.default.div(k,b,S),a.default.logeq(k),a.default.assign(O,b);var x=a.default.sum(a.default.muleq(k,O)),K=(0,n.default)(new Float64Array(g.size),g.shape),$=(0,n.default)(new Float64Array(_*_),[_,_]);a.default.sub($,b,S),a.default.muleq($,w);for(var E=0;E<_;E++)for(var X=0;X<D;X++){var j=(0,n.default)(new Float64Array(g.shape[0]),[g.shape[0]]);a.default.assign(j,g.pick(null,X)),a.default.addseq(a.default.negeq(j),g.get(E,X)),a.default.muleq(j,$.pick(E,null)),K.set(E,X,a.default.sum(j))}var U=2*(v+1)/v;return a.default.mulseq(K,U),[x,K]};var r=Ta,n=f(r),i=ho,a=f(i),o=po,s=f(o),l=mu,p=f(l);function f(g){return g&&g.__esModule?g:{default:g}}var h=Number.EPSILON||2220446049250313e-31,d=(0,s.default)({args:["array"],body:function(b){}});t.exports=e.default})(m3,Ws);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function j(U,z){var V=[],J=!0,ae=!1,ne=void 0;try{for(var se=U[Symbol.iterator](),De;!(J=(De=se.next()).done)&&(V.push(De.value),!(z&&V.length===z));J=!0);}catch(we){ae=!0,ne=we}finally{try{!J&&se.return&&se.return()}finally{if(ae)throw ne}}return V}return function(U,z){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return j(U,z);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function j(U,z){for(var V=0;V<z.length;V++){var J=z[V];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(U,J.key,J)}}return function(U,z,V){return z&&j(U.prototype,z),V&&j(U,V),U}}(),i=Vs,a=Ta,o=k(a),s=ho,l=k(s),p=YF,f=k(p),h=d3,d=k(h),g=po,b=k(g),v=zs,_=k(v),D=mu,S=k(D),w=qs,C=k(w),E=Ws,B=k(E);function k(j){return j&&j.__esModule?j:{default:j}}function O(j){if(Array.isArray(j)){for(var U=0,z=Array(j.length);U<j.length;U++)z[U]=j[U];return z}else return Array.from(j)}function x(j,U){if(!(j instanceof U))throw new TypeError("Cannot call a class as a function")}function K(j,U){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:j}function $(j,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);j.prototype=Object.create(U&&U.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(j,U):j.__proto__=U)}var X=function(j){$(U,j);function U(z){x(this,U);var V=K(this,Object.getPrototypeOf(U).call(this));return z=z||{},V.dim=z.dim||2,V.perplexity=z.perplexity||30,V.earlyExaggeration=z.earlyExaggeration||4,V.learningRate=z.learningRate||1e3,V.nIter=z.nIter||1e3,V.metric=z.metric||"euclidean",V.barneshut=z.barneshut||!1,V.inputData=null,V.outputEmbedding=null,V}return n(U,[{key:"init",value:function(V){V=V||{};var J=V.data||[],ae=V.type||"dense";if(ae==="dense")this.inputData=(0,f.default)(J);else if(ae==="sparse"){for(var ne=[],se=1,De=function(Dt){var Et=Math.max.apply(null,J.map(function(ht){return ht[Dt]}))+1;ne.push(Et),se*=Et},we=0;we<J[0].length;we++)De(we);this.inputData=(0,o.default)(new Float64Array(se),ne);var Fe=!0,xe=!1,ke=void 0;try{for(var Ue=J[Symbol.iterator](),Ye;!(Fe=(Ye=Ue.next()).done);Fe=!0){var Ke,Je=Ye.value;(Ke=this.inputData).set.apply(Ke,O(Je).concat([1]))}}catch(Le){xe=!0,ke=Le}finally{try{!Fe&&Ue.return&&Ue.return()}finally{if(xe)throw ke}}}else throw new Error("input data type must be dense or sparse");this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim)}},{key:"run",value:function(){this.emit("progressStatus","Calculating pairwise distances"),this.distances=(0,S.default)(this.inputData,this.metric),this.emit("progressStatus","Calculating joint probabilities"),this.alpha=Math.max(this.dim-1,1),this.P=(0,C.default)(this.distances,this.perplexity);var V=Number.MAX_VALUE,J=0;this.emit("progressStatus","Early exaggeration with momentum 0.5"),l.default.mulseq(this.P,this.earlyExaggeration);var ae=this._gradDesc(J,50,.5,0,0),ne=r(ae,2);V=ne[0],J=ne[1],this.emit("progressStatus","Early exaggeration with momentum 0.8");var se=this._gradDesc(J+1,100,.8,0,0),De=r(se,2);V=De[0],J=De[1],this.emit("progressStatus","Final optimization with momentum 0.8"),l.default.divseq(this.P,this.earlyExaggeration);var we=this._gradDesc(J+1,this.nIter,.8,1e-6,1e-6),Fe=r(we,2);return V=Fe[0],J=Fe[1],this.emit("progressStatus","Optimization end"),[V,J]}},{key:"rerun",value:function(){this.outputEmbedding=(0,_.default)(this.inputData.shape[0],this.dim);var V=this.run(),J=r(V,2),ae=J[0],ne=J[1];return[ae,ne]}},{key:"getOutput",value:function(){return(0,d.default)(this.outputEmbedding)}},{key:"getOutputScaled",value:function(){for(var V=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),J=(0,o.default)(new Float64Array(this.outputEmbedding.shape[0]),[this.outputEmbedding.shape[0]]),ae=0;ae<this.outputEmbedding.shape[1];ae++){var ne=l.default.sup(l.default.abs(J,this.outputEmbedding.pick(null,ae)));l.default.divs(V.pick(null,ae),this.outputEmbedding.pick(null,ae),ne)}return(0,d.default)(V)}},{key:"_gradDesc",value:function(V,J,ae){for(var ne=arguments.length<=3||arguments[3]===void 0?1e-6:arguments[3],se=arguments.length<=4||arguments[4]===void 0?1e-6:arguments[4],De=30,we=(0,o.default)(new Float64Array(this.outputEmbedding.size),this.outputEmbedding.shape),Fe=new Float64Array(this.outputEmbedding.size),xe=0;xe<Fe.length;xe++)Fe[xe]=1;var ke=(0,o.default)(Fe,this.outputEmbedding.shape),Ue=Number.MAX_VALUE,Ye=Number.MAX_VALUE,Ke=0,Je=(0,b.default)({args:["array"],pre:function(Ot){this.sum=0},body:function(Ot){this.sum+=Ot*Ot},post:function(Ot){return Math.sqrt(this.sum)}}),Le=(0,b.default)({args:["array","array","array"],body:function(Ot,Ft,$t){}}),Dt=void 0;for(Dt=V;Dt<J;Dt++){var Et=(0,B.default)(this.outputEmbedding,this.P,this.alpha),ht=r(Et,2),at=ht[0],Pt=ht[1],dr=Math.abs(at-Ue);Ue=at;var Tt=Je(Pt);if(this.emit("progressIter",[Dt,Ue,Tt]),Ue<Ye)Ye=Ue,Ke=Dt;else if(Dt-Ke>De)break;if(ne>=Tt||se>=dr)break;Le(ke,we,Pt),l.default.muleq(Pt,ke);var Te=(0,o.default)(new Float64Array(Pt.size),Pt.shape);l.default.muls(Te,Pt,this.learningRate),l.default.mulseq(we,ae),l.default.subeq(we,Te),l.default.addeq(this.outputEmbedding,we),this.emit("progressData",this.getOutputScaled())}return[Ue,Dt]}}]),U}(i.EventEmitter);e.default=X,t.exports=e.default})(hF,Us);const _3=zf(Us);var Cf={},b3={get exports(){return Cf},set exports(t){Cf=t}};(function(t){var e=parseInt(Number.MAX_SAFE_INTEGER/2)||4503599627370496,r=0;function n(){this.C=null,this.row_covered=[],this.col_covered=[],this.n=0,this.Z0_r=0,this.Z0_c=0,this.marked=null,this.path=null}n.prototype.pad_matrix=function(s,l){l=l||r;var p=0,f=s.length,h;for(h=0;h<f;++h)s[h].length>p&&(p=s[h].length);f=p>f?p:f;var d=[];for(h=0;h<f;++h){for(var g=s[h]||[],b=g.slice();f>b.length;)b.push(l);d.push(b)}return d},n.prototype.compute=function(s,l){l=l||{},l.padValue=l.padValue||r,this.C=this.pad_matrix(s,l.padValue),this.n=this.C.length,this.original_length=s.length,this.original_width=s[0].length;for(var p=[];p.length<this.n;)p.push(!1);this.row_covered=p.slice(),this.col_covered=p.slice(),this.Z0_r=0,this.Z0_c=0,this.path=this.__make_matrix(this.n*2,0),this.marked=this.__make_matrix(this.n,0);for(var f=1,h={1:this.__step1,2:this.__step2,3:this.__step3,4:this.__step4,5:this.__step5,6:this.__step6};;){var d=h[f];if(!d)break;f=d.apply(this)}for(var g=[],b=0;b<this.original_length;++b)for(var v=0;v<this.original_width;++v)this.marked[b][v]==1&&g.push([b,v]);return g},n.prototype.__make_matrix=function(s,l){for(var p=[],f=0;f<s;++f){p[f]=[];for(var h=0;h<s;++h)p[f][h]=l}return p},n.prototype.__step1=function(){for(var s=0;s<this.n;++s)for(var l=Math.min.apply(Math,this.C[s]),p=0;p<this.n;++p)this.C[s][p]-=l;return 2},n.prototype.__step2=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)if(this.C[s][l]===0&&!this.col_covered[l]&&!this.row_covered[s]){this.marked[s][l]=1,this.col_covered[l]=!0,this.row_covered[s]=!0;break}return this.__clear_covers(),3},n.prototype.__step3=function(){for(var s=0,l=0;l<this.n;++l)for(var p=0;p<this.n;++p)this.marked[l][p]==1&&this.col_covered[p]==!1&&(this.col_covered[p]=!0,++s);return s>=this.n?7:4},n.prototype.__step4=function(){for(var s=!1,l=-1,p=-1,f=-1;!s;){var h=this.__find_a_zero();if(l=h[0],p=h[1],l<0)return 6;if(this.marked[l][p]=2,f=this.__find_star_in_row(l),f>=0)p=f,this.row_covered[l]=!0,this.col_covered[p]=!1;else return this.Z0_r=l,this.Z0_c=p,5}},n.prototype.__step5=function(){var s=0;this.path[s][0]=this.Z0_r,this.path[s][1]=this.Z0_c;for(var l=!1;!l;){var p=this.__find_star_in_col(this.path[s][1]);if(p>=0?(s++,this.path[s][0]=p,this.path[s][1]=this.path[s-1][1]):l=!0,!l){var f=this.__find_prime_in_row(this.path[s][0]);s++,this.path[s][0]=this.path[s-1][0],this.path[s][1]=f}}return this.__convert_path(this.path,s),this.__clear_covers(),this.__erase_primes(),3},n.prototype.__step6=function(){for(var s=this.__find_smallest(),l=0;l<this.n;++l)for(var p=0;p<this.n;++p)this.row_covered[l]&&(this.C[l][p]+=s),this.col_covered[p]||(this.C[l][p]-=s);return 4},n.prototype.__find_smallest=function(){for(var s=e,l=0;l<this.n;++l)for(var p=0;p<this.n;++p)!this.row_covered[l]&&!this.col_covered[p]&&s>this.C[l][p]&&(s=this.C[l][p]);return s},n.prototype.__find_a_zero=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)if(this.C[s][l]===0&&!this.row_covered[s]&&!this.col_covered[l])return[s,l];return[-1,-1]},n.prototype.__find_star_in_row=function(s){for(var l=0;l<this.n;++l)if(this.marked[s][l]==1)return l;return-1},n.prototype.__find_star_in_col=function(s){for(var l=0;l<this.n;++l)if(this.marked[l][s]==1)return l;return-1},n.prototype.__find_prime_in_row=function(s){for(var l=0;l<this.n;++l)if(this.marked[s][l]==2)return l;return-1},n.prototype.__convert_path=function(s,l){for(var p=0;p<=l;++p)this.marked[s[p][0]][s[p][1]]=this.marked[s[p][0]][s[p][1]]==1?0:1},n.prototype.__clear_covers=function(){for(var s=0;s<this.n;++s)this.row_covered[s]=!1,this.col_covered[s]=!1},n.prototype.__erase_primes=function(){for(var s=0;s<this.n;++s)for(var l=0;l<this.n;++l)this.marked[s][l]==2&&(this.marked[s][l]=0)};function i(s,l){var p,f;if(!l){var h=-1/0;for(p=0;p<s.length;++p)for(f=0;f<s[p].length;++f)s[p][f]>h&&(h=s[p][f]);l=function(b){return h-b}}var d=[];for(p=0;p<s.length;++p){var g=s[p];for(d[p]=[],f=0;f<g.length;++f)d[p][f]=l(s[p][f])}return d}function a(s){var l=[],p,f;for(p=0;p<s.length;++p)for(f=0;f<s[p].length;++f){var h=String(s[p][f]).length;(!l[f]||h>=l[f])&&(l[f]=h)}var d="";for(p=0;p<s.length;++p){for(f=0;f<s[p].length;++f){for(var g=String(s[p][f]);g.length<l[f];)g=" "+g;d+=g,f!=s[p].length-1&&(d+=" ")}p!=s[p].length-1&&(d+=`
`)}return d}function o(s,l){var p=new n;return p.compute(s,l)}o.version="1.2.2",o.format_matrix=a,o.make_cost_matrix=i,o.Munkres=n,t.exports&&(t.exports=o)})(b3);const D3=Cf;function N1(t){return t<2?0:t<4?2:t<6?4:t<8?6:8}function Mi(t,e){return new Af.KMEANS().run(t,e)}function y3(t,e){return t.map(r=>e.map(n=>Oa(r,n)))}function x1(t){switch(t){case 2:return[Hr(Lr([0,0],[0,1]),.5),Hr(Lr([1,0],[1,1]),.5)];case 4:return[[0,0],[0,1],[1,1],[1,0]];case 6:return[Hr(Lr([0,0],[0,1]),.5),Hr(Lr([1,0],[1,1]),.5),[0,0],[0,1],[1,1],[1,0]];case 8:return[Hr(Lr([0,0],[0,1]),.5),Hr(Lr([1,0],[1,1]),.5),[0,0],[0,1],[1,1],[1,0],Hr(Lr([0,0],[1,0]),.5),Hr(Lr([0,1],[1,1]),.5)];default:return[]}}function L1(t,e){if(t.length!==e.length)throw new Error("Both sets should have the same number of points");const r=y3(t,e),n=D3(r);return n?n.map(([i,a])=>({ids:[i,a],points:[t[i],e[a]]})):null}function Kf(t){let e=new _3({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:5e3,metric:"euclidean"});const r=Object.keys(t),n=Object.values(t);e.init({data:n,type:"dense"}),e.run();let a=e.getOutputScaled().map(([s,l])=>[(s+1)/2,(l+1)/2]);return r.reduce((s,l,p)=>(s[l]=a[p],s),{})}function w3(t){let e,r,n,i,a,o;return r=new b1({props:{center:t[6],dimensions:t[2],onMarkerMove:t[7],dataPoints:t[4]}}),a=new D1({props:{useExponentialScaling:t[3].embedExponentialScaling,toggleExponentialScaling:t[9],exponentialScaling:t[3].embedWeightScaling,setExponentialScaling:t[10],connectionLimit:t[3].embedPromptLimit||t[5],setConnectionLimit:t[8],maxConnectionLimit:t[5],clusterCount:t[3].embedClusters||0,setClusterCount:t[11],maxClusterCount:t[5],onShuffle:t[12]}}),{c(){e=W("div"),je(r.$$.fragment),i=Se(),je(a.$$.fragment),this.h()},l(s){e=H(s,"DIV",{class:!0});var l=R(e);ze(r.$$.fragment,l),l.forEach(M),i=Be(s),ze(a.$$.fragment,s),this.h()},h(){F(e,"class","w-full h-full"),Ni(()=>t[17].call(e))},m(s,l){le(s,e,l),qe(r,e,null),n=Ma(e,t[17].bind(e)),le(s,i,l),qe(a,s,l),o=!0},p(s,[l]){const p={};l&64&&(p.center=s[6]),l&4&&(p.dimensions=s[2]),l&16&&(p.dataPoints=s[4]),r.$set(p);const f={};l&8&&(f.useExponentialScaling=s[3].embedExponentialScaling),l&8&&(f.exponentialScaling=s[3].embedWeightScaling),l&40&&(f.connectionLimit=s[3].embedPromptLimit||s[5]),l&32&&(f.maxConnectionLimit=s[5]),l&8&&(f.clusterCount=s[3].embedClusters||0),l&32&&(f.maxClusterCount=s[5]),a.$set(f)},i(s){o||(he(r.$$.fragment,s),he(a.$$.fragment,s),o=!0)},o(s){_e(r.$$.fragment,s),_e(a.$$.fragment,s),o=!1},d(s){s&&M(e),We(r),n(),s&&M(i),We(a,s)}}}function E3(t,e,r){let n,i,a,o,s,l,p,f,h;$e(t,Ef,$=>r(16,f=$)),$e(t,ot,$=>r(3,h=$));let d=0,g=0,b={};function v($){f&&h.scaledEmbedMappings&&(w(),S(o,l,p,$))}function _($,X){$&&X&&(w(),S(o,l,p,s))}function D($,X){S(o,$,X,s)}function S($,X,j,U){if(!b)return;let z={...h.weightedPrompts},V=0;Object.values(b).forEach(se=>{Object.values(b).forEach(De=>{const we=Oa(se.xy,De.xy);we>V&&(V=we)})});const J=Object.entries(b).reduce((se,[De,we])=>{const Fe=Oa($,we.xy);return se[parseInt(De)]=Fe,se},{}),ae=(se,De)=>{const we=se?Math.round(Math.pow(1-De/V,j)*100)/100:0;return we<0?0:we},ne=(se,De)=>{const we=se?Math.round((1-De/V)*100)/100:0;return we<0?0:we};Object.entries(J).sort((se,De)=>se[1]-De[1]).forEach(([se,De],we)=>{if(!z[parseInt(se)])return;const Fe=we<U,xe=X?ae(Fe,De):ne(Fe,De);z[parseInt(se)]={...z[parseInt(se)],embedWeight:xe},r(4,b[parseInt(se)].opacity=Or(xe),b),r(4,b[parseInt(se)].connected=Fe,b)}),ot.update({...h,embedMarker:o,weightedPrompts:z})}function w(){if(!f||!h.scaledEmbedMappings)return;const $=Object.keys(h.scaledEmbedMappings),X=U=>{if(!U.length)return i;const z=U.map(V=>j[V].xy);return Is(z)},j=$.reduce((U,z,V)=>(U[z]={xy:h.scaledEmbedMappings[V],text:h.weightedPrompts[V].text,connected:!0,opacity:1},U),{});if(h.embedClusters&&h.embedClusterSets){const U=h.embedClusters,z=h.embedClusterSets[U];let V=z.map(ne=>X(ne));const J=x1(U),ae=L1(V,J);ae&&ae.forEach(ne=>{const se=ne.ids[0],De=ne.points[1];z[se].forEach(we=>{j[we].xy=Is([j[we].xy,De])})})}r(4,b=j)}function C($){o=$,S(o,l,p,s)}function E($){$>0&&$<=a&&ot.update({...h,embedPromptLimit:$})}function B(){ot.update({...h,embedExponentialScaling:!h.embedExponentialScaling})}function k($){ot.update({...h,embedWeightScaling:$})}function O($){[0,2,4,6,8].indexOf($)!==-1&&ot.update({...h,embedClusters:$})}async function x(){ot.update({...h,scaledEmbedMappings:Kf(f)})}function K(){d=this.clientWidth,g=this.clientHeight,r(0,d),r(1,g)}return t.$$.update=()=>{t.$$.dirty&3&&r(2,n=[d||250,g||250]),t.$$.dirty&4&&r(6,i=ka(n)),t.$$.dirty&8&&r(5,a=Object.keys(h.weightedPrompts||{}).length),t.$$.dirty&8&&(o=h.embedMarker||[.5,.5]),t.$$.dirty&8&&r(13,s=h.embedPromptLimit||Object.keys(h.weightedPrompts).length),t.$$.dirty&8&&r(15,l=h.embedExponentialScaling),t.$$.dirty&8&&r(14,p=h.embedWeightScaling),t.$$.dirty&65544&&f&&Object.keys(f).length<h.embedClusters&&O(N1(Object.keys(f).length)),t.$$.dirty&49152&&D(l,p),t.$$.dirty&65544&&_(f,h.scaledEmbedMappings),t.$$.dirty&8192&&v(s)},[d,g,n,h,b,a,i,C,E,B,k,O,x,s,p,l,f,K]}class A3 extends Xe{constructor(e){super(),et(this,e,E3,w3,tt,{})}}const Ll="oKey";function C3(){const t=or(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[Ll]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[Ll]=a,r(a))},get:()=>kt(t),delete:()=>{i&&(delete localStorage[Ll],r(""))}}}const di=C3(),cd="concept";function F3(){const t=or({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith(cd+"_")){const s=o.split(/_(.*)/s)[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{if(!a||!i)return;const s=kt(t);s[a]=o,localStorage[`concept_${a}`]=JSON.stringify(o),r(s)},get:()=>kt(t),remove:a=>{if(!a||!i)return;const o=kt(t);delete o[a],delete localStorage[`concept_${a}`],r(o)},delete:()=>{i&&(delete localStorage[cd],r({}))}}}const jr=F3(),S3=yu(jr,t=>Object.entries(t).reduce((e,[r,n])=>(n&&(e[r]=n),e),{}));function B3(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!0,pending:k3,then:P3,catch:M3,value:7,error:8,blocks:[,,,]};return Cs(r=t[2],i),{c(){e=wt(),i.block.c()},l(a){e=wt(),i.block.l(a)},m(a,o){le(a,e,o),i.block.m(a,i.anchor=o),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(a,o){t=a,i.ctx=t,o&4&&r!==(r=t[2])&&Cs(r,i)||kp(i,t,o)},i(a){n||(he(i.block),n=!0)},o(a){for(let o=0;o<3;o+=1){const s=i.blocks[o];_e(s)}n=!1},d(a){a&&M(e),i.block.d(a),i.token=null,i=null}}}function O3(t){let e,r,n,i,a;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("p"),a=Oe("Set OpenAI key in settings to use embedding map."),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=R(e);r=H(s,"DIV",{class:!0});var l=R(r);n=H(l,"DIV",{class:!0});var p=R(n);i=H(p,"P",{class:!0});var f=R(i);a=Me(f,"Set OpenAI key in settings to use embedding map."),f.forEach(M),p.forEach(M),l.forEach(M),s.forEach(M),this.h()},h(){F(i,"class","text-center text-lg"),F(n,"class","h-20 w-52"),F(r,"class","flex flex-col justify-center"),F(e,"class","w-full h-full flex justify-center")},m(o,s){le(o,e,s),I(e,r),I(r,n),I(n,i),I(i,a)},p:Ce,i:Ce,o:Ce,d(o){o&&M(e)}}}function M3(t){let e,r=t[8].message+"",n;return{c(){e=W("p"),n=Oe(r),this.h()},l(i){e=H(i,"P",{style:!0});var a=R(e);n=Me(a,r),a.forEach(M),this.h()},h(){xt(e,"color","red")},m(i,a){le(i,e,a),I(e,n)},p(i,a){a&4&&r!==(r=i[8].message+"")&&wr(n,r)},i:Ce,o:Ce,d(i){i&&M(e)}}}function P3(t){let e,r;return e=new A3({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},p:Ce,i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function k3(t){let e,r,n,i,a,o;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("progress"),this.h()},l(s){e=H(s,"DIV",{class:!0});var l=R(e);r=H(l,"DIV",{class:!0});var p=R(r);n=H(p,"DIV",{class:!0});var f=R(n);i=H(f,"PROGRESS",{class:!0,max:!0}),R(i).forEach(M),f.forEach(M),p.forEach(M),l.forEach(M),this.h()},h(){F(i,"class","progress progress-primary w-56"),i.value=a=Object.keys(t[3]).length,F(i,"max",o=Object.keys(t[0].weightedPrompts).length),F(n,"class","h-20 w-52"),F(r,"class","flex flex-col justify-center"),F(e,"class","w-full h-full flex justify-center")},m(s,l){le(s,e,l),I(e,r),I(r,n),I(n,i)},p(s,l){l&8&&a!==(a=Object.keys(s[3]).length)&&(i.value=a),l&1&&o!==(o=Object.keys(s[0].weightedPrompts).length)&&F(i,"max",o)},i:Ce,o:Ce,d(s){s&&M(e)}}}function T3(t){let e,r,n,i;const a=[O3,B3],o=[];function s(l,p){return l[1]?1:0}return e=s(t),r=o[e]=a[e](t),{c(){r.c(),n=wt()},l(l){r.l(l),n=wt()},m(l,p){o[e].m(l,p),le(l,n,p),i=!0},p(l,[p]){let f=e;e=s(l),e===f?o[e].p(l,p):(rr(),_e(o[f],1,1,()=>{o[f]=null}),nr(),r=o[e],r?r.p(l,p):(r=o[e]=a[e](l),r.c()),he(r,1),r.m(n.parentNode,n))},i(l){i||(he(r),i=!0)},o(l){_e(r),i=!1},d(l){o[e].d(l),l&&M(n)}}}function I3(t,e){return e?t.embedClusterSets?Object.entries(e).length!==Object.entries(t.weightedPrompts).length?(console.log("embeddings length mismatch",Object.entries(e).length,Object.entries(t.weightedPrompts).length),!0):(t.lastPromptChange||0)>(t.lastEmbeddingChange||0)?(console.log("prompt change after embedding change"),!0):!1:(console.log("no active cluster sets"),!0):(console.log("no active embeddings"),!0)}function N3(t,e,r){let n,i,a;$e(t,ot,f=>r(0,n=f)),$e(t,di,f=>r(1,i=f)),$e(t,Ef,f=>r(4,a=f));let o=null,s={};async function l(f){return console.log("waiting for embedding for",f),new Promise((h,d)=>{const g=()=>{const b=jr.get()[f];console.log("embeddingFromConcept",b),b?h(b):b===null?setTimeout(g,500):b===void 0?(console.log("setting embedding to null for",f),jr.update(f,null),setTimeout(g,5e3)):(console.log("not found embedding for",f,b),d(b))};g()})}async function p(){if(console.log("fetching embeddings"),!i||!n.weightedPrompts)return;const f=Object.entries(n.weightedPrompts).map(([D,S])=>[D,S.text]);r(3,s={});for(let D of f){console.log("fetching embedding for",D[1]);const S=await l(D[1]);r(3,s[D[0]]=S,s)}let h=Object.entries(s).sort((D,S)=>D[0]-S[0]);const d=D=>new Array(D).fill(null).map(()=>[]);console.log("clustering embeddings");const g=h.length>=2?Mi(h.map(D=>D[1]),2):[h.map(D=>D[0])];console.log("set of 2 complete");const b=h.length>=4?Mi(h.map(D=>D[1]),4):g;console.log("set of 4 complete");const v=h.length>=6?Mi(h.map(D=>D[1]),6):b;console.log("set of 6 complete");const _=h.length>=8?Mi(h.map(D=>D[1]),8):v;console.log("set of 8 complete"),ot.update({...n,embedClusterSets:{2:[...g,...d(2-g.length)],4:[...b,...d(4-b.length)],6:[...v,...d(6-v.length)],8:[..._,...d(8-_.length)]},lastEmbeddingChange:Date.now(),scaledEmbedMappings:Kf(s)}),Ef.set(s),console.log("embeddings complete")}return t.$$.update=()=>{t.$$.dirty&19&&i&&I3(n,a)&&(console.log("Embeddings require update"),r(2,o=p()))},[n,i,o,s,a]}class x3 extends Xe{constructor(e){super(),et(this,e,N3,T3,tt,{})}}let gs;const L3=new Uint8Array(16);function R3(){if(!gs&&(gs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gs(L3)}const Ir=[];for(let t=0;t<256;++t)Ir.push((t+256).toString(16).slice(1));function U3(t,e=0){return(Ir[t[e+0]]+Ir[t[e+1]]+Ir[t[e+2]]+Ir[t[e+3]]+"-"+Ir[t[e+4]]+Ir[t[e+5]]+"-"+Ir[t[e+6]]+Ir[t[e+7]]+"-"+Ir[t[e+8]]+Ir[t[e+9]]+"-"+Ir[t[e+10]]+Ir[t[e+11]]+Ir[t[e+12]]+Ir[t[e+13]]+Ir[t[e+14]]+Ir[t[e+15]]).toLowerCase()}const V3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),hd={randomUUID:V3};function go(t,e,r){if(hd.randomUUID&&!e&&!t)return hd.randomUUID();t=t||{};const n=t.random||(t.rng||R3)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return U3(n)}const vs="showZeroPrompts";function j3(){const t=or(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[vs]?JSON.parse(localStorage[vs]):!1),{subscribe:e,update:a=>{i&&(localStorage[vs]=JSON.stringify(!!a),r(!!a))},get:()=>kt(t),delete:()=>{i&&(delete localStorage[vs],r(!1))}}}const Hs=j3(),ms="useWeightOrdering";function z3(){const t=or(!1),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[ms]?JSON.parse(localStorage[ms]):!1),{subscribe:e,update:a=>{i&&(localStorage[ms]=JSON.stringify(!!a),r(!!a))},get:()=>kt(t),delete:()=>{i&&(delete localStorage[ms],r(!1))}}}const Ff=z3(),$f=yu(Ff,t=>kt(Ff));var Sf=function(t,e){return Sf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Sf(t,e)};function Yf(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Sf(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Bf,Zf=function(){function t(){}return t._xfnv1a=function(e){for(var r=2166136261,n=0;n<e.length;n++)r=Math.imul(r^e.charCodeAt(n),16777619);return function(){return r+=r<<13,r^=r>>>7,r+=r<<3,r^=r>>>17,(r+=r<<5)>>>0}},t}(),q3=function(t){function e(r){var n=t.call(this)||this;return n.a=e._xfnv1a(r)(),n}return Yf(e,t),e.prototype.next=function(){var r=this.a+=1831565813;return r=Math.imul(r^r>>>15,1|r),(((r^=r+Math.imul(r^r>>>7,61|r))^r>>>14)>>>0)/4294967296},e}(Zf),W3=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Yf(e,t),e.prototype.next=function(){this.a>>>=0,this.b>>>=0,this.c>>>=0,this.d>>>=0;var r=this.a+this.b|0;return this.a=this.b^this.b>>>9,this.b=this.c+(this.c<<3)|0,this.c=this.c<<21|this.c>>>11,this.d=this.d+1|0,r=r+this.d|0,this.c=this.c+r|0,(r>>>0)/4294967296},e}(Zf),H3=function(t){function e(r){var n=t.call(this)||this,i=e._xfnv1a(r);return n.a=i(),n.b=i(),n.c=i(),n.d=i(),n}return Yf(e,t),e.prototype.next=function(){var r=this.b<<9,n=5*this.a;return n=n<<7|9*(n>>>25),this.c^=this.a,this.d^=this.b,this.b^=this.c,this.a^=this.d,this.c^=r,this.d=this.d<<11|this.d>>>21,(n>>>0)/4294967296},e}(Zf);(function(t){t.sfc32="sfc32",t.mulberry32="mulberry32",t.xoshiro128ss="xoshiro128ss"})(Bf||(Bf={}));var G3=function(){function t(e,r){r===void 0&&(r=Bf.sfc32),this.str=e,this.prng=r,this.generator=this._initializeGenerator()}return t.prototype.next=function(){return this.generator.next()},t.prototype._initializeGenerator=function(){if(function(r){return r===null}(e=this.str)||function(r){return r===void 0}(e))return this.wrap();var e;switch(this.prng){case"sfc32":return new W3(this.str);case"mulberry32":return new q3(this.str);case"xoshiro128ss":return new H3(this.str);default:return this.wrap()}},t.prototype.wrap=function(){return{next:function(){return Math.random()}}},t}();const Rl="slotSet";function K3(){const t=or({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith(Rl)){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=kt(t),p={...s[a]||{},...o};i&&(localStorage[`${Rl}_${a}`]=JSON.stringify(p));const f={...s,[a]:p};r(f)},get:a=>kt(t)[a],getAll:()=>kt(t),delete:a=>{i&&delete localStorage[`${Rl}_${a}`];const o={...kt(t)};delete o[a],r(o)}}}const Ji=K3();function dd(){return(Math.random()*1e6).toFixed(0)}function $3(){const t=or(dd()),{subscribe:e,set:r}=t;return{subscribe:e,get:()=>kt(t),shuffle:()=>{r(dd())}}}const Xi=$3();function Gs(t){let e=t.replace(/\s+/g,"_");return e=e.toUpperCase(),"$"+e}function pd(t){const e=t.length>0&&t.length<32,r=/^[a-zA-Z0-9 ]+$/.test(t),n=/^[a-zA-Z]/.test(t),i=/[a-zA-Z0-9]$/.test(t);return e&&r&&n&&i}function Y3(){const t=Ji.getAll();return Object.values(t).reduce((r,n)=>{const i=Gs(n.name);return i&&(r[i]=[...n.values]),r},{})}function Z3(t,e){const r=new G3(e);return Object.entries(t).reduce((i,[a,o])=>(i[a]=[...o].sort(()=>r.next()-.5),i),{})}function _u(t,e){let r=Z3(Y3(),e),n=t;for(const[i,a]of Object.entries(r)){if(a.length===0)continue;let o=0;for(;n.includes(i);)o>=a.length&&(o=0),n=n.replace(i,a[o]),o++}return n}function J3(t){const e=[],r=/((?:[^:]+|:(?!:))+)(?:::(\d+(?:\.\d+)?))?(?=\s|$)/g;let n;for(;(n=r.exec(t))!==null;){const i=n[1].trim(),a=n[2]?parseFloat(n[2]):1;i&&e.push([i,a])}return e}function Ul(t){if(typeof t!="string")throw new Error("Input must be a string");const e=t.length-1;let r=t;for(;r[e]===",";)r=r.slice(0,e);return r}function Vl(t){if(typeof t!="string")throw new Error("Input must be a string");const e=["-","#","*","","",">","<","+","^","~","(",")","[","]","{","}"];let r=t.trim();for(;e.includes(r[0]);)r=r.slice(1).trim();return/^\d+(\.|\))\s/.test(r)&&(r=r.replace(/^\d+(\.|\))\s/,"")),r}function bu(t){if(t=t.replace(/^\n+|\n+$/g,""),t.includes("::"))return J3(t);if(t.includes(`
`))return t.split(`
`).map(a=>Vl(Ul(a))).filter(a=>a.length>0).map(a=>[a,1]);const e=t.match(/[^.!?]+[.!?]+/g)||[],r=e.length,n=t.split(",").map(a=>Vl(Ul(a))).filter(a=>a.length>0),i=n.length-1;return r>i?e.map(a=>Vl(Ul(a))).filter(a=>a.length>0).map(a=>[a,1]):n.map(a=>[a,1])}function Ks(t,e,r){let n=Object.entries(t.weightedPrompts);return e&&(n=n.sort((i,a)=>Pi(t,parseInt(a[0]))-Pi(t,parseInt(i[0])))),r||(n=n.filter(i=>r||Pi(t,parseInt(i[0])))),n}function Q3(t){return t.trim().endsWith(".")}function X3(t){let e="",r=[];return t.forEach((n,i)=>{Q3(n)?(r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+". ",r=[]),e+=n+" "):r.push(n.trim())}),r.length>0&&(e+=r.join(", ").replace(/,*\s*,/g,",")+"."),e.trim()}function Of(t,e,r,n,i){if(r)return Ks(t,n,i).map(([o,s],l)=>`${_u(s.text,`${e}${o}${l}`)}::${Pi(t,parseInt(o))}`).join(" ");const a=Ks(t,n,i).map(([o,s],l)=>_u(s.text,`${e}${o}${l}`));return X3(a)}function gd(t,e,r){const n=t.slice();return n[4]=e[r][0],n[5]=e[r][1],n[7]=r,n}function vd(t,e){let r,n=_u(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"",i,a,o,s=Pi(e[0],parseInt(e[4]))+"",l,p,f;return{key:t,first:null,c(){r=W("span"),i=Oe(n),a=Oe("::"),o=W("b"),l=Oe(s),p=Se(),this.h()},l(h){r=H(h,"SPAN",{style:!0});var d=R(r);i=Me(d,n),a=Me(d,"::"),o=H(d,"B",{});var g=R(o);l=Me(g,s),p=Be(g),g.forEach(M),d.forEach(M),this.h()},h(){F(r,"style",f=`color: rgba(255,255,255,${Math.max(.25,U0(e[0],parseInt(e[4])))});`),this.first=r},m(h,d){le(h,r,d),I(r,i),I(r,a),I(r,o),I(o,l),I(o,p)},p(h,d){e=h,d&15&&n!==(n=_u(e[5].text,`${e[3]}${e[4]}${e[7]}`)+"")&&wr(i,n),d&7&&s!==(s=Pi(e[0],parseInt(e[4]))+"")&&wr(l,s),d&7&&f!==(f=`color: rgba(255,255,255,${Math.max(.25,U0(e[0],parseInt(e[4])))});`)&&F(r,"style",f)},d(h){h&&M(r)}}}function eS(t){let e,r,n=[],i=new Map,a=Ks(t[0],t[1],t[2]);const o=s=>s[4];for(let s=0;s<a.length;s+=1){let l=gd(t,a,s),p=o(l);i.set(p,n[s]=vd(p,l))}return{c(){e=W("div"),r=W("p");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=H(s,"DIV",{class:!0});var l=R(e);r=H(l,"P",{class:!0});var p=R(r);for(let f=0;f<n.length;f+=1)n[f].l(p);p.forEach(M),l.forEach(M),this.h()},h(){F(r,"class","text-sm select-none"),F(e,"class","overflow-y-auto h-full")},m(s,l){le(s,e,l),I(e,r);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(r,null)},p(s,[l]){l&15&&(a=Ks(s[0],s[1],s[2]),n=Bn(n,l,o,1,s,a,i,r,Jn,vd,null,gd))},i:Ce,o:Ce,d(s){s&&M(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function tS(t,e,r){let n,i,a,o;return $e(t,ot,s=>r(0,n=s)),$e(t,$f,s=>r(1,i=s)),$e(t,Hs,s=>r(2,a=s)),$e(t,Xi,s=>r(3,o=s)),[n,i,a,o]}class rS extends Xe{constructor(e){super(),et(this,e,tS,eS,tt,{})}}const _s="outputMultiPrompt";function nS(){const t=or(!0),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[_s]?JSON.parse(localStorage[_s]):!1),{subscribe:e,update:a=>{i&&(localStorage[_s]=JSON.stringify(!!a),r(!!a))},get:()=>kt(t),delete:()=>{i&&(delete localStorage[_s],r(!0))}}}const Mf=nS();function iS(t){let e,r,n,i=Of(t[0],t[1],t[2],t[3],t[4])+"",a;return{c(){e=W("div"),r=W("p"),n=W("span"),a=Oe(i),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=R(e);r=H(s,"P",{class:!0});var l=R(r);n=H(l,"SPAN",{style:!0});var p=R(n);a=Me(p,i),p.forEach(M),l.forEach(M),s.forEach(M),this.h()},h(){F(n,"style","color: rgba(255,255,255,0.75});"),F(r,"class","text-sm select-none"),F(e,"class","overflow-y-auto h-full")},m(o,s){le(o,e,s),I(e,r),I(r,n),I(n,a)},p(o,[s]){s&31&&i!==(i=Of(o[0],o[1],o[2],o[3],o[4])+"")&&wr(a,i)},i:Ce,o:Ce,d(o){o&&M(e)}}}function aS(t,e,r){let n,i,a,o,s;return $e(t,ot,l=>r(0,n=l)),$e(t,Xi,l=>r(1,i=l)),$e(t,Mf,l=>r(2,a=l)),$e(t,$f,l=>r(3,o=l)),$e(t,Hs,l=>r(4,s=l)),[n,i,a,o,s]}class uS extends Xe{constructor(e){super(),et(this,e,aS,iS,tt,{})}}const fu="promptHistory";function sS(){const t=or([]),{subscribe:e,set:r,update:n}=t,i=typeof window<"u",a=(i&&JSON.parse(localStorage[fu]||"[]")||[]).map(o=>({...o,date:new Date(o.date)}));return r(a),{subscribe:e,add:o=>{if(!o||!i)return;const l=[...kt(t),o];localStorage[fu]=JSON.stringify(l),r(l)},update:o=>{!o||!i||(localStorage[fu]=o,r(o))},get:()=>kt(t),remove:o=>{if(!i)return;const l=kt(t).filter(p=>p.id!==o);localStorage[fu]=JSON.stringify(l),r(l)},delete:()=>{i&&(delete localStorage[fu],r([]))}}}const Jf=sS();function oS(t){let e,r;return e=new uS({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function lS(t){let e,r;return e=new rS({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function fS(t){let e,r,n,i,a,o,s,l,p,f,h=t[2]?"Multi":"Single",d,g,b,v,_,D,S,w,C,E,B,k,O,x,K,$,X,j;const U=[lS,oS],z=[];function V(J,ae){return J[2]?0:1}return r=V(t),n=z[r]=U[r](t),{c(){e=W("div"),n.c(),i=Se(),a=W("div"),o=W("div"),s=W("input"),l=Se(),p=W("label"),f=W("span"),d=Oe(h),g=Se(),b=W("div"),v=W("input"),_=Se(),D=W("label"),S=W("span"),w=Oe("Use Weight Ordering"),C=Se(),E=W("div"),B=W("input"),k=Se(),O=W("label"),x=W("span"),K=Oe("Include Zero Weights"),this.h()},l(J){e=H(J,"DIV",{class:!0});var ae=R(e);n.l(ae),ae.forEach(M),i=Be(J),a=H(J,"DIV",{class:!0});var ne=R(a);o=H(ne,"DIV",{class:!0});var se=R(o);s=H(se,"INPUT",{type:!0,class:!0}),l=Be(se),p=H(se,"LABEL",{class:!0});var De=R(p);f=H(De,"SPAN",{class:!0});var we=R(f);d=Me(we,h),we.forEach(M),De.forEach(M),se.forEach(M),g=Be(ne),b=H(ne,"DIV",{class:!0});var Fe=R(b);v=H(Fe,"INPUT",{type:!0,class:!0}),_=Be(Fe),D=H(Fe,"LABEL",{class:!0});var xe=R(D);S=H(xe,"SPAN",{class:!0});var ke=R(S);w=Me(ke,"Use Weight Ordering"),ke.forEach(M),xe.forEach(M),Fe.forEach(M),C=Be(ne),E=H(ne,"DIV",{class:!0});var Ue=R(E);B=H(Ue,"INPUT",{type:!0,class:!0}),k=Be(Ue),O=H(Ue,"LABEL",{class:!0});var Ye=R(O);x=H(Ye,"SPAN",{class:!0});var Ke=R(x);K=Me(Ke,"Include Zero Weights"),Ke.forEach(M),Ye.forEach(M),Ue.forEach(M),ne.forEach(M),this.h()},h(){F(e,"class","normal-case font-light text-left cursor-copy bg-slate-900 rounded-t-md rounded-br-md p-4 w-full h-28 active:bg-slate-950 hover:bg-slate-800"),s.checked=t[2],F(s,"type","checkbox"),F(s,"class","toggle toggle-sm mt-2 mr-2"),F(f,"class","label-text"),F(p,"class","label w-10"),F(o,"class","mx-2 flex"),v.checked=t[1],F(v,"type","checkbox"),F(v,"class","toggle toggle-sm mt-2 mr-2"),F(S,"class","label-text"),F(D,"class","label"),F(b,"class","mx-2 flex"),B.checked=t[0],F(B,"type","checkbox"),F(B,"class","toggle toggle-sm mt-2 mr-2"),F(x,"class","label-text"),F(O,"class","label"),F(E,"class","mx-2 flex"),F(a,"class","w-full rounded-b-md flex pl-2 justify-start bg-slate-900")},m(J,ae){le(J,e,ae),z[r].m(e,null),le(J,i,ae),le(J,a,ae),I(a,o),I(o,s),I(o,l),I(o,p),I(p,f),I(f,d),I(a,g),I(a,b),I(b,v),I(b,_),I(b,D),I(D,S),I(S,w),I(a,C),I(a,E),I(E,B),I(E,k),I(E,O),I(O,x),I(x,K),$=!0,X||(j=[ve(e,"click",t[3]),ve(s,"change",t[4]),ve(v,"change",t[5]),ve(B,"change",t[6])],X=!0)},p(J,[ae]){let ne=r;r=V(J),r!==ne&&(rr(),_e(z[ne],1,1,()=>{z[ne]=null}),nr(),n=z[r],n||(n=z[r]=U[r](J),n.c()),he(n,1),n.m(e,null)),(!$||ae&4)&&(s.checked=J[2]),(!$||ae&4)&&h!==(h=J[2]?"Multi":"Single")&&wr(d,h),(!$||ae&2)&&(v.checked=J[1]),(!$||ae&1)&&(B.checked=J[0])},i(J){$||(he(n),$=!0)},o(J){_e(n),$=!1},d(J){J&&M(e),z[r].d(),J&&M(i),J&&M(a),X=!1,Wt(j)}}}function cS(t,e,r){let n,i,a,o,s;$e(t,Hs,d=>r(0,n=d)),$e(t,$f,d=>r(1,i=d)),$e(t,Mf,d=>r(2,a=d)),$e(t,Xi,d=>r(7,o=d)),$e(t,ot,d=>r(8,s=d));function l(){const d=Of(s,o,a,i,n);navigator.clipboard.writeText(d),Xi.shuffle(),Jf.add({id:go(),prompt:d,date:new Date})}function p(){Mf.update(!a)}function f(){Ff.update(!i)}function h(){Hs.update(!n)}return[n,i,a,l,p,f,h]}class hS extends Xe{constructor(e){super(),et(this,e,cS,fS,tt,{})}}function dS(t){let e,r,n,i;return{c(){e=nt("g"),r=nt("circle"),this.h()},l(a){e=it(a,"g",{});var o=R(e);r=it(o,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),R(r).forEach(M),o.forEach(M),this.h()},h(){F(r,"cx",n=t[0][0]),F(r,"cy",i=t[0][1]),F(r,"r",t[1]),F(r,"stroke",t[3]),F(r,"stroke-width",t[2]),xt(r,"fill","rgba(0,0,0,0)")},m(a,o){le(a,e,o),I(e,r)},p(a,[o]){o&1&&n!==(n=a[0][0])&&F(r,"cx",n),o&1&&i!==(i=a[0][1])&&F(r,"cy",i),o&2&&F(r,"r",a[1]),o&8&&F(r,"stroke",a[3]),o&4&&F(r,"stroke-width",a[2])},i:Ce,o:Ce,d(a){a&&M(e)}}}function pS(t,e,r){let{xy:n=[500,500]}=e,{radius:i=400}=e,{stroke:a=20}=e,{color:o="rgba(46,67,101, 0.4)"}=e;return t.$$set=s=>{"xy"in s&&r(0,n=s.xy),"radius"in s&&r(1,i=s.radius),"stroke"in s&&r(2,a=s.stroke),"color"in s&&r(3,o=s.color)},[n,i,a,o]}class gS extends Xe{constructor(e){super(),et(this,e,pS,dS,tt,{xy:0,radius:1,stroke:2,color:3})}}function vS(t){let e,r,n,i,a;return{c(){e=nt("polygon"),this.h()},l(o){e=it(o,"polygon",{points:!0,"stroke-width":!0,fill:!0,transform:!0}),R(e).forEach(M),this.h()},h(){F(e,"points",r=`${t[7][0]},${t[7][1]} ${t[9][0]},${t[9][1]} ${t[8][0]},${t[8][1]} ${t[6][0]},${t[6][1]} ${t[4][0]},${t[4][1]} ${t[5][0]},${t[5][1]}`),F(e,"stroke-width",4),F(e,"fill",t[3]),F(e,"transform",n=`rotate(${t[1].toFixed(2)} ${t[0][0]} ${t[0][1]}) rotate(${t[2]?"180":"0"} ${(t[7][0]+t[6][0])/2} ${(t[7][1]+t[6][1])/2})`)},m(o,s){le(o,e,s),i||(a=[ve(e,"mouseover",t[10]),ve(e,"mouseout",t[11]),ve(e,"mousedown",t[12]),ve(e,"touchstart",t[12])],i=!0)},p(o,[s]){s&1008&&r!==(r=`${o[7][0]},${o[7][1]} ${o[9][0]},${o[9][1]} ${o[8][0]},${o[8][1]} ${o[6][0]},${o[6][1]} ${o[4][0]},${o[4][1]} ${o[5][0]},${o[5][1]}`)&&F(e,"points",r),s&8&&F(e,"fill",o[3]),s&199&&n!==(n=`rotate(${o[1].toFixed(2)} ${o[0][0]} ${o[0][1]}) rotate(${o[2]?"180":"0"} ${(o[7][0]+o[6][0])/2} ${(o[7][1]+o[6][1])/2})`)&&F(e,"transform",n)},i:Ce,o:Ce,d(o){o&&M(e),i=!1,Wt(a)}}}function mS(t,e,r){let n,i,a,o,s,l,{xy:p=[500,500]}=e,{radius:f=400}=e,{stroke:h=20}=e,{color:d="rgba(46,67,101, 0.4)"}=e,{hoverColor:g="white"}=e,{angle:b=0}=e,{handleMouseDown:v=E=>{}}=e,{reverse:_=!1}=e,D=d;function S(){r(3,D=g)}function w(){r(3,D=d)}function C(E){v(E)}return t.$$set=E=>{"xy"in E&&r(0,p=E.xy),"radius"in E&&r(13,f=E.radius),"stroke"in E&&r(14,h=E.stroke),"color"in E&&r(15,d=E.color),"hoverColor"in E&&r(16,g=E.hoverColor),"angle"in E&&r(1,b=E.angle),"handleMouseDown"in E&&r(17,v=E.handleMouseDown),"reverse"in E&&r(2,_=E.reverse)},t.$$.update=()=>{t.$$.dirty&24577&&r(9,n=Rr(p,[-4,1],f-h/2)),t.$$.dirty&24577&&r(8,i=Rr(p,[1,1],f-h/2)),t.$$.dirty&8193&&r(7,a=Rr(p,[0,1],f)),t.$$.dirty&8193&&r(6,o=Rr(p,[4,1],f)),t.$$.dirty&24577&&r(5,s=Rr(p,[-3,1],f+h/2)),t.$$.dirty&24577&&r(4,l=Rr(p,[1,1],f+h/2))},[p,b,_,D,l,s,o,a,i,n,S,w,C,f,h,d,g,v]}class _S extends Xe{constructor(e){super(),et(this,e,mS,vS,tt,{xy:0,radius:13,stroke:14,color:15,hoverColor:16,angle:1,handleMouseDown:17,reverse:2})}}function md(t,e,r){const n=t.slice();return n[19]=e[r][0],n[20]=e[r][1],n}function _d(t){let e,r,n=Object.entries(t[5].weightedPrompts).length>0,i,a;e=new Wf({props:{xy:t[0],radius:t[1]}});let o=Object.entries(t[5].weightedPrompts),s=[];for(let f=0;f<o.length;f+=1)s[f]=bd(md(t,o,f));const l=f=>_e(s[f],1,1,()=>{s[f]=null});let p=n&&Dd(t);return{c(){je(e.$$.fragment);for(let f=0;f<s.length;f+=1)s[f].c();r=wt(),p&&p.c(),i=wt()},l(f){ze(e.$$.fragment,f);for(let h=0;h<s.length;h+=1)s[h].l(f);r=wt(),p&&p.l(f),i=wt()},m(f,h){qe(e,f,h);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(f,h);le(f,r,h),p&&p.m(f,h),le(f,i,h),a=!0},p(f,h){const d={};if(h&1&&(d.xy=f[0]),h&2&&(d.radius=f[1]),e.$set(d),h&1660){o=Object.entries(f[5].weightedPrompts);let g;for(g=0;g<o.length;g+=1){const b=md(f,o,g);s[g]?(s[g].p(b,h),he(s[g],1)):(s[g]=bd(b),s[g].c(),he(s[g],1),s[g].m(r.parentNode,r))}for(rr(),g=o.length;g<s.length;g+=1)l(g);nr()}h&32&&(n=Object.entries(f[5].weightedPrompts).length>0),n?p?(p.p(f,h),h&32&&he(p,1)):(p=Dd(f),p.c(),he(p,1),p.m(i.parentNode,i)):p&&(rr(),_e(p,1,1,()=>{p=null}),nr())},i(f){if(!a){he(e.$$.fragment,f);for(let h=0;h<o.length;h+=1)he(s[h]);he(p),a=!0}},o(f){_e(e.$$.fragment,f),s=s.filter(Boolean);for(let h=0;h<s.length;h+=1)_e(s[h]);_e(p),a=!1},d(f){We(e,f),Xs(s,f),f&&M(r),p&&p.d(f),f&&M(i)}}}function bd(t){let e,r,n;e=new Eu({props:{xy:t[10](t[6][t[19]].xy,Vr(t[3],t[20].text.length,t[4])),color:`rgba(255,255,255,${Or(t[6][t[19]].unitWeight)}`,wh:Vr(t[3],t[20].text.length,t[4]),fontSize:t[4],text:t[20].text}});function i(){return t[13](t[19])}return r=new Pa({props:{xy:t[6][t[19]].xy,radius:t[2],color:"rgba(76,97,141, 1)",handleMouseDown:i}}),{c(){je(e.$$.fragment),je(r.$$.fragment)},l(a){ze(e.$$.fragment,a),ze(r.$$.fragment,a)},m(a,o){qe(e,a,o),qe(r,a,o),n=!0},p(a,o){t=a;const s={};o&120&&(s.xy=t[10](t[6][t[19]].xy,Vr(t[3],t[20].text.length,t[4]))),o&96&&(s.color=`rgba(255,255,255,${Or(t[6][t[19]].unitWeight)}`),o&56&&(s.wh=Vr(t[3],t[20].text.length,t[4])),o&16&&(s.fontSize=t[4]),o&32&&(s.text=t[20].text),e.$set(s);const l={};o&96&&(l.xy=t[6][t[19]].xy),o&4&&(l.radius=t[2]),o&32&&(l.handleMouseDown=i),r.$set(l)},i(a){n||(he(e.$$.fragment,a),he(r.$$.fragment,a),n=!0)},o(a){_e(e.$$.fragment,a),_e(r.$$.fragment,a),n=!1},d(a){We(e,a),We(r,a)}}}function Dd(t){let e,r,n;return e=new gS({props:{xy:t[0],radius:t[7],stroke:30}}),r=new _S({props:{reverse:t[5].ringReverse,xy:t[0],radius:t[7],stroke:30,angle:t[5].ringStartAngle,color:"rgba(136,157,191, 1)",handleMouseDown:t[14]}}),{c(){je(e.$$.fragment),je(r.$$.fragment)},l(i){ze(e.$$.fragment,i),ze(r.$$.fragment,i)},m(i,a){qe(e,i,a),qe(r,i,a),n=!0},p(i,a){const o={};a&1&&(o.xy=i[0]),a&128&&(o.radius=i[7]),e.$set(o);const s={};a&32&&(s.reverse=i[5].ringReverse),a&1&&(s.xy=i[0]),a&128&&(s.radius=i[7]),a&32&&(s.angle=i[5].ringStartAngle),r.$set(s)},i(i){n||(he(e.$$.fragment,i),he(r.$$.fragment,i),n=!0)},o(i){_e(e.$$.fragment,i),_e(r.$$.fragment,i),n=!1},d(i){We(e,i),We(r,i)}}}function bS(t){let e,r,n,i,a=t[6]&&t[5].weightedPrompts&&_d(t);return{c(){e=nt("svg"),a&&a.c(),this.h()},l(o){e=it(o,"svg",{id:!0,class:!0});var s=R(e);a&&a.l(s),s.forEach(M),this.h()},h(){F(e,"id","svg"),F(e,"class","w-full h-full")},m(o,s){le(o,e,s),a&&a.m(e,null),r=!0,n||(i=[ve(e,"mousemove",t[11]),ve(e,"touchmove",t[11]),ve(e,"mouseup",t[8]),ve(e,"touchend",t[8]),ve(e,"dblclick",t[12])],n=!0)},p(o,[s]){o[6]&&o[5].weightedPrompts?a?(a.p(o,s),s&96&&he(a,1)):(a=_d(o),a.c(),he(a,1),a.m(e,null)):a&&(rr(),_e(a,1,1,()=>{a=null}),nr())},i(o){r||(he(a),r=!0)},o(o){_e(a),r=!1},d(o){o&&M(e),a&&a.d(),n=!1,Wt(i)}}}function yd(t,e){return t?Object.entries(t).reduce((r,[n,i],a)=>{const o=r[n]||a*(360/Object.keys(t).length)-90;return r[n]=o,r},e):null}function DS(t,e,r){let n,i,a;$e(t,ot,B=>r(5,a=B));let{center:o=[450,450]}=e,{radius:s=250}=e,{pointRadius:l=10}=e,{textWidth:p=150}=e,{fontSize:f=13}=e,h=[0,0],d=null;function g(B){d=null}function b(B){d=B}function v(B,k){let O=Ln(B,o,s)[0]-180;O<0&&(O+=360);const x=Hf(ka(k),O);return Lr(B,x)}function _(B){console.log(s,n);const k=Wr(Ln(vu(B,o,n),o,n)[0]);r(6,i=w(a.weightedPrompts,o,s,a.ringWeightScaling,a.ringExponentialScaling,k,a.ringAngles))}function D(B){if(h=Yn(B),d==="main")_(h);else if(d){const k={...a.weightedPrompts[d]},O=vu(h,o,s),x=Ln(O,o,s)[0],K={...a.ringAngles};K[k.id]=x;const $={...a.weightedPrompts};$[d]=k,r(6,i=w($,o,s,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,K))}}function S(B){h=Yn(B),_(h)}function w(B,k,O,x,K,$,X){if(!B||!k||!O||!x)return null;let j=Object.entries(B).reduce((z,[V,J])=>{const ne=a.ringReverse?$-X[V]:X[V]-$,se=Wr(ne),De=Math.pow(1-se/360,K?x:1);return z[V]={angleDifference:se,xy:Rr(k,[X[V],1],O),unitWeight:De},z},{});const U={...B};return Object.entries(j).forEach(([z,V])=>{U[z].ringWeight=V.unitWeight}),ot.update({...a,ringStartAngle:$,weightedPrompts:U,ringAngles:X}),j}const C=B=>b(B),E=()=>b("main");return t.$$set=B=>{"center"in B&&r(0,o=B.center),"radius"in B&&r(1,s=B.radius),"pointRadius"in B&&r(2,l=B.pointRadius),"textWidth"in B&&r(3,p=B.textWidth),"fontSize"in B&&r(4,f=B.fontSize)},t.$$.update=()=>{t.$$.dirty&2&&r(7,n=s-30),t.$$.dirty&32&&Object.keys(a.ringAngles).length!==Object.keys(a.weightedPrompts).length&&ot.update({...a,ringAngles:yd(a.weightedPrompts,{})}),t.$$.dirty&35&&r(6,i=w(a.weightedPrompts,o,s,a.ringWeightScaling,a.ringExponentialScaling,a.ringStartAngle,a.ringAngles||yd(a.weightedPrompts,{})))},[o,s,l,p,f,a,i,n,g,b,v,D,S,C,E]}class yS extends Xe{constructor(e){super(),et(this,e,DS,bS,tt,{center:0,radius:1,pointRadius:2,textWidth:3,fontSize:4})}}function wd(t){let e,r,n,i,a,o,s,l;return{c(){e=W("div"),r=W("label"),n=W("span"),i=Oe("Scaling Power"),a=Se(),o=W("input"),this.h()},l(p){e=H(p,"DIV",{class:!0});var f=R(e);r=H(f,"LABEL",{class:!0});var h=R(r);n=H(h,"SPAN",{class:!0});var d=R(n);i=Me(d,"Scaling Power"),d.forEach(M),h.forEach(M),a=Be(f),o=H(f,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),f.forEach(M),this.h()},h(){F(n,"class","label-text"),F(r,"class","label"),F(o,"type","range"),F(o,"min","0.5"),F(o,"max","5"),F(o,"step","0.1"),F(o,"class","range range-xs"),F(e,"class","w-full px-2")},m(p,f){le(p,e,f),I(e,r),I(r,n),I(n,i),I(e,a),I(e,o),nn(o,t[0]),s||(l=[ve(o,"change",t[7]),ve(o,"input",t[7])],s=!0)},p(p,f){f&1&&nn(o,p[0])},d(p){p&&M(e),s=!1,Wt(l)}}}function wS(t){let e,r,n,i,a,o,s,l,p,f,h,d,g,b,v,_,D,S,w;r=new yS({props:{center:[Math.round(t[2]/2),Math.round(t[3]/2)],radius:Math.round(Math.min(t[2],t[3])/2)-150}});let C=t[1]&&wd(t);return{c(){e=W("div"),je(r.$$.fragment),i=Se(),a=W("div"),o=W("div"),s=W("label"),l=W("span"),p=Oe("Exponential Scaling"),f=Se(),h=W("input"),d=Se(),C&&C.c(),g=Se(),b=W("div"),v=W("button"),_=Oe("Reverse"),this.h()},l(E){e=H(E,"DIV",{class:!0});var B=R(e);ze(r.$$.fragment,B),B.forEach(M),i=Be(E),a=H(E,"DIV",{class:!0});var k=R(a);o=H(k,"DIV",{class:!0});var O=R(o);s=H(O,"LABEL",{class:!0});var x=R(s);l=H(x,"SPAN",{class:!0});var K=R(l);p=Me(K,"Exponential Scaling"),K.forEach(M),x.forEach(M),f=Be(O),h=H(O,"INPUT",{type:!0,class:!0}),O.forEach(M),d=Be(k),C&&C.l(k),g=Be(k),b=H(k,"DIV",{class:!0});var $=R(b);v=H($,"BUTTON",{class:!0});var X=R(v);_=Me(X,"Reverse"),X.forEach(M),$.forEach(M),k.forEach(M),this.h()},h(){F(e,"class","w-full h-full"),Ni(()=>t[5].call(e)),F(l,"class","label-text"),F(s,"class","label"),F(h,"type","checkbox"),F(h,"class","toggle toggle-xs"),F(o,"class","w-52 px-2"),F(v,"class","btn btn-xs btn-primary"),F(b,"class","w-32 px-2 pb-1 flex flex-col justify-end"),F(a,"class","px-2 py-4 pb-0 flex")},m(E,B){le(E,e,B),qe(r,e,null),n=Ma(e,t[5].bind(e)),le(E,i,B),le(E,a,B),I(a,o),I(o,s),I(s,l),I(l,p),I(o,f),I(o,h),h.checked=t[1],I(a,d),C&&C.m(a,null),I(a,g),I(a,b),I(b,v),I(v,_),D=!0,S||(w=[ve(h,"change",t[6]),ve(v,"click",t[4])],S=!0)},p(E,[B]){const k={};B&12&&(k.center=[Math.round(E[2]/2),Math.round(E[3]/2)]),B&12&&(k.radius=Math.round(Math.min(E[2],E[3])/2)-150),r.$set(k),B&2&&(h.checked=E[1]),E[1]?C?C.p(E,B):(C=wd(E),C.c(),C.m(a,g)):C&&(C.d(1),C=null)},i(E){D||(he(r.$$.fragment,E),D=!0)},o(E){_e(r.$$.fragment,E),D=!1},d(E){E&&M(e),We(r),n(),E&&M(i),E&&M(a),C&&C.d(),S=!1,Wt(w)}}}function ES(t,e,r){let n;$e(t,ot,d=>r(8,n=d));let i,a,o=n.ringWeightScaling||2,s=Uf(n.ringExponentialScaling)?!0:n.ringExponentialScaling;function l(){ot.update({...ot.get(),ringReverse:!n.ringReverse})}function p(){i=this.clientWidth,a=this.clientHeight,r(2,i),r(3,a)}function f(){s=this.checked,r(1,s)}function h(){o=Mp(this.value),r(0,o)}return t.$$.update=()=>{t.$$.dirty&3&&ot.update({...ot.get(),ringExponentialScaling:s,ringWeightScaling:o})},[o,s,i,a,l,p,f,h]}class AS extends Xe{constructor(e){super(),et(this,e,ES,wS,tt,{})}}function CS(t){let e,r;return e=new x3({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function FS(t){let e,r;return e=new AS({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function SS(t){let e,r;return e=new TC({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function BS(t){let e,r;return e=new JC({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function OS(t){let e,r;return e=new jC({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function MS(t){let e,r,n,i,a,o;const s=[OS,BS,SS,FS,CS],l=[];function p(f,h){return f[0].weightMode===mt.Bars?0:f[0].weightMode===mt.Pie?1:f[0].weightMode===mt.Circle?2:f[0].weightMode===mt.Ring?3:f[0].weightMode===mt.Embed?4:-1}return~(e=p(t))&&(r=l[e]=s[e](t)),a=new hS({}),{c(){r&&r.c(),n=Se(),i=W("div"),je(a.$$.fragment),this.h()},l(f){r&&r.l(f),n=Be(f),i=H(f,"DIV",{class:!0});var h=R(i);ze(a.$$.fragment,h),h.forEach(M),this.h()},h(){F(i,"class","h-48 w-full p-4 flex flex-col")},m(f,h){~e&&l[e].m(f,h),le(f,n,h),le(f,i,h),qe(a,i,null),o=!0},p(f,[h]){let d=e;e=p(f),e!==d&&(r&&(rr(),_e(l[d],1,1,()=>{l[d]=null}),nr()),~e?(r=l[e],r||(r=l[e]=s[e](f),r.c()),he(r,1),r.m(n.parentNode,n)):r=null)},i(f){o||(he(r),he(a.$$.fragment,f),o=!0)},o(f){_e(r),_e(a.$$.fragment,f),o=!1},d(f){~e&&l[e].d(f),f&&M(n),f&&M(i),We(a)}}}function PS(t,e,r){let n;return $e(t,ot,i=>r(0,n=i)),[n]}class kS extends Xe{constructor(e){super(),et(this,e,PS,MS,tt,{})}}function TS(t){let e,r,n,i,a="<<",o,s,l="<",p,f,h,d,g,b=">",v,_,D=">>",S,w,C,E,B,k,O,x,K,$,X,j,U,z,V,J,ae;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("button"),o=Oe(a),s=W("button"),p=Oe(l),f=Se(),h=W("button"),d=Oe(t[1]),g=W("button"),v=Oe(b),_=W("button"),S=Oe(D),w=Se(),C=W("div"),E=W("label"),B=Oe("Page Size"),k=Se(),O=W("select"),x=W("option"),K=Oe("10"),$=W("option"),X=Oe("25"),j=W("option"),U=Oe("50"),z=W("option"),V=Oe("100"),this.h()},l(ne){e=H(ne,"DIV",{class:!0});var se=R(e);r=H(se,"DIV",{class:!0});var De=R(r);n=H(De,"DIV",{class:!0});var we=R(n);i=H(we,"BUTTON",{class:!0});var Fe=R(i);o=Me(Fe,a),Fe.forEach(M),s=H(we,"BUTTON",{class:!0});var xe=R(s);p=Me(xe,l),xe.forEach(M),f=Be(we),h=H(we,"BUTTON",{class:!0});var ke=R(h);d=Me(ke,t[1]),ke.forEach(M),g=H(we,"BUTTON",{class:!0});var Ue=R(g);v=Me(Ue,b),Ue.forEach(M),_=H(we,"BUTTON",{class:!0});var Ye=R(_);S=Me(Ye,D),Ye.forEach(M),we.forEach(M),De.forEach(M),w=Be(se),C=H(se,"DIV",{class:!0});var Ke=R(C);E=H(Ke,"LABEL",{for:!0,class:!0});var Je=R(E);B=Me(Je,"Page Size"),Je.forEach(M),k=Be(Ke),O=H(Ke,"SELECT",{class:!0});var Le=R(O);x=H(Le,"OPTION",{});var Dt=R(x);K=Me(Dt,"10"),Dt.forEach(M),$=H(Le,"OPTION",{});var Et=R($);X=Me(Et,"25"),Et.forEach(M),j=H(Le,"OPTION",{});var ht=R(j);U=Me(ht,"50"),ht.forEach(M),z=H(Le,"OPTION",{});var at=R(z);V=Me(at,"100"),at.forEach(M),Le.forEach(M),Ke.forEach(M),se.forEach(M),this.h()},h(){F(i,"class","btn"),rt(i,"btn-disabled",t[1]===1),F(s,"class","btn"),rt(s,"btn-disabled",t[1]===1),F(h,"class","btn"),rt(h,"btn-disabled",t[0]===0),F(g,"class","btn"),rt(g,"btn-disabled",t[0]===0||t[1]===t[0]),F(_,"class","btn"),rt(_,"btn-disabled",t[0]===0||t[1]===t[0]),F(n,"class","btn-group"),F(r,"class","flex justify-start"),F(E,"for","page-size"),F(E,"class","p-2 text-md min-w-xs"),x.__value=10,x.value=x.__value,$.__value=25,$.value=$.__value,j.__value=50,j.value=j.__value,z.__value=100,z.value=z.__value,F(O,"class","select max-w-xs"),F(C,"class","flex"),F(e,"class","w-full flex justify-between p-4")},m(ne,se){le(ne,e,se),I(e,r),I(r,n),I(n,i),I(i,o),I(n,s),I(s,p),I(n,f),I(n,h),I(h,d),I(n,g),I(g,v),I(n,_),I(_,S),I(e,w),I(e,C),I(C,E),I(E,B),I(C,k),I(C,O),I(O,x),I(x,K),I(O,$),I($,X),I(O,j),I(j,U),I(O,z),I(z,V),J||(ae=[ve(i,"click",t[5]),ve(s,"click",t[6]),ve(h,"click",t[7]),ve(g,"click",t[8]),ve(_,"click",t[9]),ve(O,"change",t[10])],J=!0)},p(ne,[se]){se&2&&rt(i,"btn-disabled",ne[1]===1),se&2&&rt(s,"btn-disabled",ne[1]===1),se&2&&wr(d,ne[1]),se&1&&rt(h,"btn-disabled",ne[0]===0),se&3&&rt(g,"btn-disabled",ne[0]===0||ne[1]===ne[0]),se&3&&rt(_,"btn-disabled",ne[0]===0||ne[1]===ne[0])},i:Ce,o:Ce,d(ne){ne&&M(e),J=!1,Wt(ae)}}}function IS(t,e,r){let{total:n}=e,{current:i}=e,{size:a}=e,{onChange:o}=e,{onResize:s}=e;const l=()=>o(1),p=()=>o(i-1),f=()=>o(i),h=()=>o(i+1),d=()=>o(n),g=b=>s(b.target.value);return t.$$set=b=>{"total"in b&&r(0,n=b.total),"current"in b&&r(1,i=b.current),"size"in b&&r(4,a=b.size),"onChange"in b&&r(2,o=b.onChange),"onResize"in b&&r(3,s=b.onResize)},[n,i,o,s,a,l,p,f,h,d,g]}class R1 extends Xe{constructor(e){super(),et(this,e,IS,TS,tt,{total:0,current:1,size:4,onChange:2,onResize:3})}}function Ed(t,e,r){const n=t.slice();return n[7]=e[r],n[9]=r,n}function Ad(t,e){let r,n,i=e[7].date.toDateString()+"",a,o,s,l,p=e[7].prompt+"",f,h,d,g;function b(){return e[6](e[7])}return{key:t,first:null,c(){r=W("tr"),n=W("td"),a=Oe(i),o=Se(),s=W("td"),l=W("span"),f=Oe(p),h=Se(),this.h()},l(v){r=H(v,"TR",{});var _=R(r);n=H(_,"TD",{style:!0,class:!0});var D=R(n);a=Me(D,i),D.forEach(M),o=Be(_),s=H(_,"TD",{style:!0,class:!0});var S=R(s);l=H(S,"SPAN",{});var w=R(l);f=Me(w,p),w.forEach(M),S.forEach(M),h=Be(_),_.forEach(M),this.h()},h(){xt(n,"max-width","10rem"),xt(n,"width","20rem"),F(n,"class","whitespace-nowrap"),xt(s,"max-width","20px"),F(s,"class","cursor-copy text-ellipsis whitespace-nowrap overflow-hidden select-none hover:text-white"),this.first=r},m(v,_){le(v,r,_),I(r,n),I(n,a),I(r,o),I(r,s),I(s,l),I(l,f),I(r,h),d||(g=ve(s,"click",b),d=!0)},p(v,_){e=v,_&8&&i!==(i=e[7].date.toDateString()+"")&&wr(a,i),_&8&&p!==(p=e[7].prompt+"")&&wr(f,p)},d(v){v&&M(r),d=!1,g()}}}function NS(t){let e,r,n,i,a,o,s,l,p,f,h,d,g,b=[],v=new Map,_;e=new R1({props:{total:Math.ceil(t[2].length/t[1]),current:t[0],size:t[1],onChange:t[4],onResize:t[5]}});let D=t[3];const S=w=>w[9];for(let w=0;w<D.length;w+=1){let C=Ed(t,D,w),E=S(C);v.set(E,b[w]=Ad(E,C))}return{c(){je(e.$$.fragment),r=Se(),n=W("div"),i=W("table"),a=W("thead"),o=W("tr"),s=W("th"),l=Oe("Date"),p=Se(),f=W("th"),h=Oe("Prompt"),d=Se(),g=W("tbody");for(let w=0;w<b.length;w+=1)b[w].c();this.h()},l(w){ze(e.$$.fragment,w),r=Be(w),n=H(w,"DIV",{class:!0});var C=R(n);i=H(C,"TABLE",{class:!0});var E=R(i);a=H(E,"THEAD",{});var B=R(a);o=H(B,"TR",{});var k=R(o);s=H(k,"TH",{});var O=R(s);l=Me(O,"Date"),O.forEach(M),p=Be(k),f=H(k,"TH",{});var x=R(f);h=Me(x,"Prompt"),x.forEach(M),k.forEach(M),B.forEach(M),d=Be(E),g=H(E,"TBODY",{});var K=R(g);for(let $=0;$<b.length;$+=1)b[$].l(K);K.forEach(M),E.forEach(M),C.forEach(M),this.h()},h(){F(i,"class","table w-full"),F(n,"class","w-full px-4 overflow-y-auto")},m(w,C){qe(e,w,C),le(w,r,C),le(w,n,C),I(n,i),I(i,a),I(a,o),I(o,s),I(s,l),I(o,p),I(o,f),I(f,h),I(i,d),I(i,g);for(let E=0;E<b.length;E+=1)b[E]&&b[E].m(g,null);_=!0},p(w,[C]){const E={};C&6&&(E.total=Math.ceil(w[2].length/w[1])),C&1&&(E.current=w[0]),C&2&&(E.size=w[1]),e.$set(E),C&8&&(D=w[3],b=Bn(b,C,S,1,w,D,v,g,Jn,Ad,null,Ed))},i(w){_||(he(e.$$.fragment,w),_=!0)},o(w){_e(e.$$.fragment,w),_=!1},d(w){We(e,w),w&&M(r),w&&M(n);for(let C=0;C<b.length;C+=1)b[C].d()}}}function xS(t){navigator.clipboard.writeText(t)}function LS(t,e,r){let n;$e(t,Jf,f=>r(2,n=f));let i=1,a=10,o=[];function s(f){r(0,i=f)}function l(f){r(0,i=1),r(1,a=f)}const p=f=>xS(f.prompt);return t.$$.update=()=>{t.$$.dirty&7&&r(3,o=n.slice((i-1)*a,i*a))},[i,a,n,o,s,l,p]}class RS extends Xe{constructor(e){super(),et(this,e,LS,NS,tt,{})}}const ws=or($n.List),ya=or({});function US(t){let e,r,n,i,a,o;return r=new b1({props:{center:t[9],dimensions:t[7],onMarkerMove:t[10],dataPoints:t[8]}}),a=new D1({props:{useExponentialScaling:t[3],toggleExponentialScaling:t[12],exponentialScaling:t[4],setExponentialScaling:t[13],connectionLimit:t[2],setConnectionLimit:t[11],maxConnectionLimit:t[6],clusterCount:t[5],setClusterCount:t[14],maxClusterCount:t[6],onShuffle:t[15]}}),{c(){e=W("div"),je(r.$$.fragment),i=Se(),je(a.$$.fragment),this.h()},l(s){e=H(s,"DIV",{class:!0});var l=R(e);ze(r.$$.fragment,l),l.forEach(M),i=Be(s),ze(a.$$.fragment,s),this.h()},h(){F(e,"class","w-full h-full"),Ni(()=>t[18].call(e))},m(s,l){le(s,e,l),qe(r,e,null),n=Ma(e,t[18].bind(e)),le(s,i,l),qe(a,s,l),o=!0},p(s,[l]){const p={};l&512&&(p.center=s[9]),l&128&&(p.dimensions=s[7]),l&256&&(p.dataPoints=s[8]),r.$set(p);const f={};l&8&&(f.useExponentialScaling=s[3]),l&16&&(f.exponentialScaling=s[4]),l&4&&(f.connectionLimit=s[2]),l&64&&(f.maxConnectionLimit=s[6]),l&32&&(f.clusterCount=s[5]),l&64&&(f.maxClusterCount=s[6]),a.$set(f)},i(s){o||(he(r.$$.fragment,s),he(a.$$.fragment,s),o=!0)},o(s){_e(r.$$.fragment,s),_e(a.$$.fragment,s),o=!1},d(s){s&&M(e),We(r),n(),s&&M(i),We(a,s)}}}function VS(t,e,r){let n,i,a,o;$e(t,S3,z=>r(17,o=z));let s=0,l=0,p={},f=[.5,.5],h=10,d=!1,g=2,b=0,v,_={},D={};function S(z){o&&v?(k(),E(f,d,g,z)):console.log("no concepts or mappings")}function w(z,V){z&&V?(k(),E(f,d,g,h)):console.log("no concepts or mappings")}function C(z,V){E(f,z,V,h)}function E(z,V,J,ae){if(console.log("recomputing weights"),!p)return;let ne=0;const se={..._};Object.values(p).forEach(ke=>{Object.values(p).forEach(Ue=>{const Ye=Oa(ke.xy,Ue.xy);Ye>ne&&(ne=Ye)})});const De=Object.entries(p).reduce((ke,[Ue,Ye])=>{const Ke=Oa(z,Ye.xy);return ke[Ue]=Ke,ke},{}),we=(ke,Ue)=>{const Ye=ke?Math.round(Math.pow(1-Ue/ne,J)*100)/100:0;return Ye<0?0:Ye},Fe=(ke,Ue)=>{const Ye=ke?Math.round((1-Ue/ne)*100)/100:0;return Ye<0?0:Ye},xe={...p};Object.entries(De).sort((ke,Ue)=>ke[1]-Ue[1]).forEach(([ke,Ue],Ye)=>{if(!o[ke])return;const Ke=Ye<ae,Je=V?we(Ke,Ue):Fe(Ke,Ue);se[ke]=Je;const Le={...xe[ke]};Le.opacity=Or(Je),Le.connected=Ke,xe[ke]=Le}),console.log("weights updated"),_=se,r(8,p=xe)}function B(){let z=Object.entries(o);const V=De=>new Array(De).fill(null).map(()=>[]);console.log("clustering embeddings");const J=z.length>=2?Mi(z.map(De=>De[1]),2):[z.map(De=>De[0])];console.log("set of 2 complete");const ae=z.length>=4?Mi(z.map(De=>De[1]),4):J;console.log("set of 4 complete");const ne=z.length>=6?Mi(z.map(De=>De[1]),6):ae;console.log("set of 6 complete");const se=z.length>=8?Mi(z.map(De=>De[1]),8):ne;return console.log("set of 8 complete"),{2:[...J,...V(2-J.length)],4:[...ae,...V(4-ae.length)],6:[...ne,...V(6-ne.length)],8:[...se,...V(8-se.length)]}}function k(){if(console.log("updating data points"),!o||!v)return;const z=Object.keys(v),V=ae=>{if(!ae.length)return i;const ne=ae.map(se=>J[se].xy);return Is(ne)},J=z.reduce((ae,ne,se)=>(ae[ne]={xy:v[ne],text:ne,connected:!0,opacity:1},ae),{});if(D=B(),b&&D){const ae=b,ne=D[ae];let se=ne.map(Fe=>V(Fe));const De=x1(ae),we=L1(se,De);we&&we.forEach(Fe=>{const xe=Fe.ids[0],ke=Fe.points[1];ne[xe].forEach(Ue=>{J[Ue].xy=Is([J[Ue].xy,ke])})})}r(8,p=J)}function O(z){f=z,E(f,d,g,h)}function x(z){z>0&&z<=a&&r(2,h=Math.round(z))}function K(){r(3,d=!d)}function $(z){r(4,g=z)}function X(z){[0,2,4,6,8].indexOf(z)!==-1&&r(5,b=z)}async function j(){r(16,v=Kf(o))}nw(()=>{j()});function U(){s=this.clientWidth,l=this.clientHeight,r(0,s),r(1,l)}return t.$$.update=()=>{t.$$.dirty&3&&r(7,n=[s||250,l||250]),t.$$.dirty&128&&r(9,i=ka(n)),t.$$.dirty&131072&&r(6,a=Object.keys(o).length),t.$$.dirty&131168&&o&&a<b&&X(N1(a)),t.$$.dirty&24&&C(d,g),t.$$.dirty&196608&&w(o,v),t.$$.dirty&4&&S(h)},[s,l,h,d,g,b,a,n,p,i,O,x,K,$,X,j,v,o,U]}class jS extends Xe{constructor(e){super(),et(this,e,VS,US,tt,{})}}function zS(t){let e,r;return e=new jS({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},p:Ce,i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function qS(t){let e,r,n,i,a,o;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("progress"),this.h()},l(s){e=H(s,"DIV",{class:!0});var l=R(e);r=H(l,"DIV",{class:!0});var p=R(r);n=H(p,"DIV",{class:!0});var f=R(n);i=H(f,"PROGRESS",{class:!0,max:!0}),R(i).forEach(M),f.forEach(M),p.forEach(M),l.forEach(M),this.h()},h(){F(i,"class","progress progress-primary w-56"),i.value=a=Object.keys(t[2]).length-Object.keys(t[1]).length,F(i,"max",o=Object.keys(t[2]).length),F(n,"class","h-20 w-52"),F(r,"class","flex flex-col justify-center"),F(e,"class","w-full h-full flex justify-center")},m(s,l){le(s,e,l),I(e,r),I(r,n),I(n,i)},p(s,l){l&6&&a!==(a=Object.keys(s[2]).length-Object.keys(s[1]).length)&&(i.value=a),l&4&&o!==(o=Object.keys(s[2]).length)&&F(i,"max",o)},i:Ce,o:Ce,d(s){s&&M(e)}}}function WS(t){let e,r,n,i,a;return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("p"),a=Oe("Set OpenAI key in settings to use concept map."),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=R(e);r=H(s,"DIV",{class:!0});var l=R(r);n=H(l,"DIV",{class:!0});var p=R(n);i=H(p,"P",{class:!0});var f=R(i);a=Me(f,"Set OpenAI key in settings to use concept map."),f.forEach(M),p.forEach(M),l.forEach(M),s.forEach(M),this.h()},h(){F(i,"class","text-center text-lg"),F(n,"class","h-20 w-52"),F(r,"class","flex flex-col justify-center"),F(e,"class","w-full h-full flex justify-center")},m(o,s){le(o,e,s),I(e,r),I(r,n),I(n,i),I(i,a)},p:Ce,i:Ce,o:Ce,d(o){o&&M(e)}}}function HS(t){let e,r,n,i,a;const o=[WS,qS,zS],s=[];function l(p,f){return f&2&&(e=null),p[0]?(e==null&&(e=Object.keys(p[1]).length>0),e?1:2):0}return r=l(t,-1),n=s[r]=o[r](t),{c(){n.c(),i=wt()},l(p){n.l(p),i=wt()},m(p,f){s[r].m(p,f),le(p,i,f),a=!0},p(p,[f]){let h=r;r=l(p,f),r===h?s[r].p(p,f):(rr(),_e(s[h],1,1,()=>{s[h]=null}),nr(),n=s[r],n?n.p(p,f):(n=s[r]=o[r](p),n.c()),he(n,1),n.m(i.parentNode,i))},i(p){a||(he(n),a=!0)},o(p){_e(n),a=!1},d(p){s[r].d(p),p&&M(i)}}}function GS(t,e,r){let n,i,a;return $e(t,di,o=>r(0,n=o)),$e(t,ya,o=>r(1,i=o)),$e(t,jr,o=>r(2,a=o)),[n,i,a]}class KS extends Xe{constructor(e){super(),et(this,e,GS,HS,tt,{})}}function $S(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var U1=$S,YS=typeof vr=="object"&&vr&&vr.Object===Object&&vr,ZS=YS,JS=ZS,QS=typeof self=="object"&&self&&self.Object===Object&&self,XS=JS||QS||Function("return this")(),V1=XS,e5=V1,t5=function(){return e5.Date.now()},r5=t5,n5=/\s/;function i5(t){for(var e=t.length;e--&&n5.test(t.charAt(e)););return e}var a5=i5,u5=a5,s5=/^\s+/;function o5(t){return t&&t.slice(0,u5(t)+1).replace(s5,"")}var l5=o5,f5=V1,c5=f5.Symbol,j1=c5,Cd=j1,z1=Object.prototype,h5=z1.hasOwnProperty,d5=z1.toString,cu=Cd?Cd.toStringTag:void 0;function p5(t){var e=h5.call(t,cu),r=t[cu];try{t[cu]=void 0;var n=!0}catch{}var i=d5.call(t);return n&&(e?t[cu]=r:delete t[cu]),i}var g5=p5,v5=Object.prototype,m5=v5.toString;function _5(t){return m5.call(t)}var b5=_5,Fd=j1,D5=g5,y5=b5,w5="[object Null]",E5="[object Undefined]",Sd=Fd?Fd.toStringTag:void 0;function A5(t){return t==null?t===void 0?E5:w5:Sd&&Sd in Object(t)?D5(t):y5(t)}var C5=A5;function F5(t){return t!=null&&typeof t=="object"}var S5=F5,B5=C5,O5=S5,M5="[object Symbol]";function P5(t){return typeof t=="symbol"||O5(t)&&B5(t)==M5}var k5=P5,T5=l5,Bd=U1,I5=k5,Od=0/0,N5=/^[-+]0x[0-9a-f]+$/i,x5=/^0b[01]+$/i,L5=/^0o[0-7]+$/i,R5=parseInt;function U5(t){if(typeof t=="number")return t;if(I5(t))return Od;if(Bd(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Bd(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=T5(t);var r=x5.test(t);return r||L5.test(t)?R5(t.slice(2),r?2:8):N5.test(t)?Od:+t}var V5=U5,j5=U1,jl=r5,Md=V5,z5="Expected a function",q5=Math.max,W5=Math.min;function H5(t,e,r){var n,i,a,o,s,l,p=0,f=!1,h=!1,d=!0;if(typeof t!="function")throw new TypeError(z5);e=Md(e)||0,j5(r)&&(f=!!r.leading,h="maxWait"in r,a=h?q5(Md(r.maxWait)||0,e):a,d="trailing"in r?!!r.trailing:d);function g(B){var k=n,O=i;return n=i=void 0,p=B,o=t.apply(O,k),o}function b(B){return p=B,s=setTimeout(D,e),f?g(B):o}function v(B){var k=B-l,O=B-p,x=e-k;return h?W5(x,a-O):x}function _(B){var k=B-l,O=B-p;return l===void 0||k>=e||k<0||h&&O>=a}function D(){var B=jl();if(_(B))return S(B);s=setTimeout(D,v(B))}function S(B){return s=void 0,d&&n?g(B):(n=i=void 0,o)}function w(){s!==void 0&&clearTimeout(s),p=0,n=l=i=s=void 0}function C(){return s===void 0?o:S(jl())}function E(){var B=jl(),k=_(B);if(n=arguments,i=this,l=B,k){if(s===void 0)return b(l);if(h)return clearTimeout(s),s=setTimeout(D,e),g(l)}return s===void 0&&(s=setTimeout(D,e)),o}return E.cancel=w,E.flush=C,E}var Du=H5;function Pd(t,e,r){const n=t.slice();return n[13]=e[r],n[15]=r,n}function kd(t,e){let r,n,i=e[13]+"",a,o,s,l,p,f,h,d,g;function b(){return e[10](e[13])}function v(){return e[12](e[13])}return{key:t,first:null,c(){r=W("tr"),n=W("td"),a=Oe(i),o=Se(),s=W("td"),l=W("button"),p=nt("svg"),f=nt("path"),h=Se(),this.h()},l(_){r=H(_,"TR",{});var D=R(r);n=H(D,"TD",{style:!0,class:!0});var S=R(n);a=Me(S,i),S.forEach(M),o=Be(D),s=H(D,"TD",{style:!0,class:!0});var w=R(s);l=H(w,"BUTTON",{class:!0});var C=R(l);p=it(C,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var E=R(p);f=it(E,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),R(f).forEach(M),E.forEach(M),C.forEach(M),w.forEach(M),h=Be(D),D.forEach(M),this.h()},h(){xt(n,"max-width","20px"),F(n,"class","text-ellipsis cursor-copy whitespace-nowrap overflow-hidden select-none hover:text-white"),F(f,"stroke-linecap","round"),F(f,"stroke-linejoin","round"),F(f,"stroke-width","2"),F(f,"d","M6 18L18 6M6 6l12 12"),F(p,"xmlns","http://www.w3.org/2000/svg"),F(p,"class","h-6 w-6"),F(p,"fill","none"),F(p,"viewBox","0 0 24 24"),F(p,"stroke","red"),F(l,"class","btn btn-sm btn-circle btn-outline"),xt(s,"max-width","4rem"),xt(s,"width","4rem"),F(s,"class",""),this.first=r},m(_,D){le(_,r,D),I(r,n),I(n,a),I(r,o),I(r,s),I(s,l),I(l,p),I(p,f),I(r,h),d||(g=[ve(n,"click",b),ve(n,"change",e[11]),ve(s,"click",v)],d=!0)},p(_,D){e=_,D&4&&i!==(i=e[13]+"")&&wr(a,i)},d(_){_&&M(r),d=!1,Wt(g)}}}function G5(t){let e,r,n,i,a,o,s,l,p,f,h,d,g=[],b=new Map,v,_,D;e=new R1({props:{total:t[3],current:t[0],size:t[1],onChange:t[5],onResize:t[6]}});let S=t[2];const w=C=>C[15];for(let C=0;C<S.length;C+=1){let E=Pd(t,S,C),B=w(E);b.set(B,g[C]=kd(B,E))}return{c(){je(e.$$.fragment),r=Se(),n=W("div"),i=W("table"),a=W("thead"),o=W("tr"),s=W("th"),l=Oe("Concept"),p=Se(),f=W("th"),h=Se(),d=W("tbody");for(let C=0;C<g.length;C+=1)g[C].c();this.h()},l(C){ze(e.$$.fragment,C),r=Be(C),n=H(C,"DIV",{class:!0});var E=R(n);i=H(E,"TABLE",{class:!0});var B=R(i);a=H(B,"THEAD",{});var k=R(a);o=H(k,"TR",{});var O=R(o);s=H(O,"TH",{});var x=R(s);l=Me(x,"Concept"),x.forEach(M),p=Be(O),f=H(O,"TH",{}),R(f).forEach(M),O.forEach(M),k.forEach(M),h=Be(B),d=H(B,"TBODY",{});var K=R(d);for(let $=0;$<g.length;$+=1)g[$].l(K);K.forEach(M),B.forEach(M),E.forEach(M),this.h()},h(){F(i,"class","table w-full"),F(n,"class","w-full px-4 overflow-y-auto")},m(C,E){qe(e,C,E),le(C,r,E),le(C,n,E),I(n,i),I(i,a),I(a,o),I(o,s),I(s,l),I(o,p),I(o,f),I(i,h),I(i,d);for(let B=0;B<g.length;B+=1)g[B]&&g[B].m(d,null);v=!0,_||(D=ve(n,"paste",t[4]),_=!0)},p(C,[E]){const B={};E&8&&(B.total=C[3]),E&1&&(B.current=C[0]),E&2&&(B.size=C[1]),e.$set(B),E&132&&(S=C[2],g=Bn(g,E,w,1,C,S,b,d,Jn,kd,null,Pd))},i(C){v||(he(e.$$.fragment,C),v=!0)},o(C){_e(e.$$.fragment,C),v=!1},d(C){We(e,C),C&&M(r),C&&M(n);for(let E=0;E<g.length;E+=1)g[E].d();_=!1,D()}}}function K5(t){navigator.clipboard.writeText(t)}function $5(t,e,r){let n,i,a,o;$e(t,jr,_=>r(9,o=_));let s=1,l=10;function p(){console.log("pasted"),navigator.clipboard.readText().then(_=>{const D=bu(_).map(w=>w[0]),S=o;D.forEach(w=>{S[w]||jr.update(w,null)})})}function f(_){r(0,s=_)}function h(_){r(0,s=1),r(1,l=_)}const d=Du(_=>{jr.update(_,null)},500),g=_=>K5(_),b=_=>d(_.target.value),v=_=>jr.remove(_);return t.$$.update=()=>{t.$$.dirty&512&&r(8,n=Object.keys(o)),t.$$.dirty&258&&r(3,i=Math.ceil(n.length/l)),t.$$.dirty&259&&r(2,a=Array.from(n).sort().slice((s-1)*l,s*l))},[s,l,a,i,p,f,h,d,n,o,g,b,v]}class Y5 extends Xe{constructor(e){super(),et(this,e,$5,G5,tt,{})}}function Z5(t){let e,r;return e=new KS({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function J5(t){let e,r;return e=new Y5({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function Q5(t){let e,r,n,i;const a=[J5,Z5],o=[];function s(l,p){return l[0]===$n.List?0:l[0]===$n.Map?1:-1}return~(e=s(t))&&(r=o[e]=a[e](t)),{c(){r&&r.c(),n=wt()},l(l){r&&r.l(l),n=wt()},m(l,p){~e&&o[e].m(l,p),le(l,n,p),i=!0},p(l,[p]){let f=e;e=s(l),e!==f&&(r&&(rr(),_e(o[f],1,1,()=>{o[f]=null}),nr()),~e?(r=o[e],r||(r=o[e]=a[e](l),r.c()),he(r,1),r.m(n.parentNode,n)):r=null)},i(l){i||(he(r),i=!0)},o(l){_e(r),i=!1},d(l){~e&&o[e].d(l),l&&M(n)}}}function X5(t,e,r){let n;return $e(t,ws,i=>r(0,n=i)),[n]}class e8 extends Xe{constructor(e){super(),et(this,e,X5,Q5,tt,{})}}var Pf={},q1={},$s={},t8={get exports(){return $s},set exports(t){$s=t}},Ys={},r8={get exports(){return Ys},set exports(t){Ys=t}},W1=function(e,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return e.apply(r,i)}},n8=W1,Li=Object.prototype.toString;function Qf(t){return Array.isArray(t)}function kf(t){return typeof t>"u"}function i8(t){return t!==null&&!kf(t)&&t.constructor!==null&&!kf(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function H1(t){return Li.call(t)==="[object ArrayBuffer]"}function a8(t){return Li.call(t)==="[object FormData]"}function u8(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&H1(t.buffer),e}function s8(t){return typeof t=="string"}function o8(t){return typeof t=="number"}function G1(t){return t!==null&&typeof t=="object"}function Es(t){if(Li.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function l8(t){return Li.call(t)==="[object Date]"}function f8(t){return Li.call(t)==="[object File]"}function c8(t){return Li.call(t)==="[object Blob]"}function K1(t){return Li.call(t)==="[object Function]"}function h8(t){return G1(t)&&K1(t.pipe)}function d8(t){return Li.call(t)==="[object URLSearchParams]"}function p8(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function g8(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Xf(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Qf(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Tf(){var t={};function e(i,a){Es(t[a])&&Es(i)?t[a]=Tf(t[a],i):Es(i)?t[a]=Tf({},i):Qf(i)?t[a]=i.slice():t[a]=i}for(var r=0,n=arguments.length;r<n;r++)Xf(arguments[r],e);return t}function v8(t,e,r){return Xf(e,function(i,a){r&&typeof i=="function"?t[a]=n8(i,r):t[a]=i}),t}function m8(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var sn={isArray:Qf,isArrayBuffer:H1,isBuffer:i8,isFormData:a8,isArrayBufferView:u8,isString:s8,isNumber:o8,isObject:G1,isPlainObject:Es,isUndefined:kf,isDate:l8,isFile:f8,isBlob:c8,isFunction:K1,isStream:h8,isURLSearchParams:d8,isStandardBrowserEnv:g8,forEach:Xf,merge:Tf,extend:v8,trim:p8,stripBOM:m8},ba=sn;function Td(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var $1=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(ba.isURLSearchParams(r))i=r.toString();else{var a=[];ba.forEach(r,function(l,p){l===null||typeof l>"u"||(ba.isArray(l)?p=p+"[]":l=[l],ba.forEach(l,function(h){ba.isDate(h)?h=h.toISOString():ba.isObject(h)&&(h=JSON.stringify(h)),a.push(Td(p)+"="+Td(h))}))}),i=a.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},_8=sn;function vo(){this.handlers=[]}vo.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};vo.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};vo.prototype.forEach=function(e){_8.forEach(this.handlers,function(n){n!==null&&e(n)})};var b8=vo,D8=sn,y8=function(e,r){D8.forEach(e,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[a])})},Y1=function(e,r,n,i,a){return e.config=r,n&&(e.code=n),e.request=i,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Z1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zl,Id;function J1(){if(Id)return zl;Id=1;var t=Y1;return zl=function(r,n,i,a,o){var s=new Error(r);return t(s,n,i,a,o)},zl}var ql,Nd;function w8(){if(Nd)return ql;Nd=1;var t=J1();return ql=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},ql}var Wl,xd;function E8(){if(xd)return Wl;xd=1;var t=sn;return Wl=t.isStandardBrowserEnv()?function(){return{write:function(n,i,a,o,s,l){var p=[];p.push(n+"="+encodeURIComponent(i)),t.isNumber(a)&&p.push("expires="+new Date(a).toGMTString()),t.isString(o)&&p.push("path="+o),t.isString(s)&&p.push("domain="+s),l===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Wl}var Hl,Ld;function A8(){return Ld||(Ld=1,Hl=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),Hl}var Gl,Rd;function C8(){return Rd||(Rd=1,Gl=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),Gl}var Kl,Ud;function F8(){if(Ud)return Kl;Ud=1;var t=A8(),e=C8();return Kl=function(n,i){return n&&!t(i)?e(n,i):i},Kl}var $l,Vd;function S8(){if(Vd)return $l;Vd=1;var t=sn,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return $l=function(n){var i={},a,o,s;return n&&t.forEach(n.split(`
`),function(p){if(s=p.indexOf(":"),a=t.trim(p.substr(0,s)).toLowerCase(),o=t.trim(p.substr(s+1)),a){if(i[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([o]):i[a]=i[a]?i[a]+", "+o:o}}),i},$l}var Yl,jd;function B8(){if(jd)return Yl;jd=1;var t=sn;return Yl=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(o){var s=o;return r&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(s){var l=t.isString(s)?a(s):s;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),Yl}var Zl,zd;function mo(){if(zd)return Zl;zd=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Zl=t,Zl}var Jl,qd;function Wd(){if(qd)return Jl;qd=1;var t=sn,e=w8(),r=E8(),n=$1,i=F8(),a=S8(),o=B8(),s=J1(),l=Z1,p=mo();return Jl=function(h){return new Promise(function(g,b){var v=h.data,_=h.headers,D=h.responseType,S;function w(){h.cancelToken&&h.cancelToken.unsubscribe(S),h.signal&&h.signal.removeEventListener("abort",S)}t.isFormData(v)&&delete _["Content-Type"];var C=new XMLHttpRequest;if(h.auth){var E=h.auth.username||"",B=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";_.Authorization="Basic "+btoa(E+":"+B)}var k=i(h.baseURL,h.url);C.open(h.method.toUpperCase(),n(k,h.params,h.paramsSerializer),!0),C.timeout=h.timeout;function O(){if(C){var K="getAllResponseHeaders"in C?a(C.getAllResponseHeaders()):null,$=!D||D==="text"||D==="json"?C.responseText:C.response,X={data:$,status:C.status,statusText:C.statusText,headers:K,config:h,request:C};e(function(U){g(U),w()},function(U){b(U),w()},X),C=null}}if("onloadend"in C?C.onloadend=O:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(O)},C.onabort=function(){C&&(b(s("Request aborted",h,"ECONNABORTED",C)),C=null)},C.onerror=function(){b(s("Network Error",h,null,C)),C=null},C.ontimeout=function(){var $=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",X=h.transitional||l;h.timeoutErrorMessage&&($=h.timeoutErrorMessage),b(s($,h,X.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",C)),C=null},t.isStandardBrowserEnv()){var x=(h.withCredentials||o(k))&&h.xsrfCookieName?r.read(h.xsrfCookieName):void 0;x&&(_[h.xsrfHeaderName]=x)}"setRequestHeader"in C&&t.forEach(_,function($,X){typeof v>"u"&&X.toLowerCase()==="content-type"?delete _[X]:C.setRequestHeader(X,$)}),t.isUndefined(h.withCredentials)||(C.withCredentials=!!h.withCredentials),D&&D!=="json"&&(C.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&C.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(S=function(K){C&&(b(!K||K&&K.type?new p("canceled"):K),C.abort(),C=null)},h.cancelToken&&h.cancelToken.subscribe(S),h.signal&&(h.signal.aborted?S():h.signal.addEventListener("abort",S))),v||(v=null),C.send(v)})},Jl}var xr=sn,Hd=y8,O8=Y1,M8=Z1,P8={"Content-Type":"application/x-www-form-urlencoded"};function Gd(t,e){!xr.isUndefined(t)&&xr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function k8(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Wd()),t}function T8(t,e,r){if(xr.isString(t))try{return(e||JSON.parse)(t),xr.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var _o={transitional:M8,adapter:k8(),transformRequest:[function(e,r){return Hd(r,"Accept"),Hd(r,"Content-Type"),xr.isFormData(e)||xr.isArrayBuffer(e)||xr.isBuffer(e)||xr.isStream(e)||xr.isFile(e)||xr.isBlob(e)?e:xr.isArrayBufferView(e)?e.buffer:xr.isURLSearchParams(e)?(Gd(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):xr.isObject(e)||r&&r["Content-Type"]==="application/json"?(Gd(r,"application/json"),T8(e)):e}],transformResponse:[function(e){var r=this.transitional||_o.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&xr.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?O8(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};xr.forEach(["delete","get","head"],function(e){_o.headers[e]={}});xr.forEach(["post","put","patch"],function(e){_o.headers[e]=xr.merge(P8)});var ec=_o,I8=sn,N8=ec,x8=function(e,r,n){var i=this||N8;return I8.forEach(n,function(o){e=o.call(i,e,r)}),e},Ql,Kd;function Q1(){return Kd||(Kd=1,Ql=function(e){return!!(e&&e.__CANCEL__)}),Ql}var $d=sn,Xl=x8,L8=Q1(),R8=ec,U8=mo();function ef(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new U8("canceled")}var V8=function(e){ef(e),e.headers=e.headers||{},e.data=Xl.call(e,e.data,e.headers,e.transformRequest),e.headers=$d.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),$d.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||R8.adapter;return r(e).then(function(i){return ef(e),i.data=Xl.call(e,i.data,i.headers,e.transformResponse),i},function(i){return L8(i)||(ef(e),i&&i.response&&(i.response.data=Xl.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},pn=sn,X1=function(e,r){r=r||{};var n={};function i(f,h){return pn.isPlainObject(f)&&pn.isPlainObject(h)?pn.merge(f,h):pn.isPlainObject(h)?pn.merge({},h):pn.isArray(h)?h.slice():h}function a(f){if(pn.isUndefined(r[f])){if(!pn.isUndefined(e[f]))return i(void 0,e[f])}else return i(e[f],r[f])}function o(f){if(!pn.isUndefined(r[f]))return i(void 0,r[f])}function s(f){if(pn.isUndefined(r[f])){if(!pn.isUndefined(e[f]))return i(void 0,e[f])}else return i(void 0,r[f])}function l(f){if(f in r)return i(e[f],r[f]);if(f in e)return i(void 0,e[f])}var p={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l};return pn.forEach(Object.keys(e).concat(Object.keys(r)),function(h){var d=p[h]||a,g=d(h);pn.isUndefined(g)&&d!==l||(n[h]=g)}),n},tf,Yd;function eg(){return Yd||(Yd=1,tf={version:"0.26.1"}),tf}var j8=eg().version,tc={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){tc[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Zd={};tc.transitional=function(e,r,n){function i(a,o){return"[Axios v"+j8+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,s){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!Zd[o]&&(Zd[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,o,s):!0}};function z8(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],o=e[a];if(o){var s=t[a],l=s===void 0||o(s,a,t);if(l!==!0)throw new TypeError("option "+a+" must be "+l);continue}if(r!==!0)throw Error("Unknown option "+a)}}var q8={assertOptions:z8,validators:tc},tg=sn,W8=$1,Jd=b8,Qd=V8,bo=X1,rg=q8,Da=rg.validators;function Au(t){this.defaults=t,this.interceptors={request:new Jd,response:new Jd}}Au.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=bo(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&rg.assertOptions(n,{silentJSONParsing:Da.transitional(Da.boolean),forcedJSONParsing:Da.transitional(Da.boolean),clarifyTimeoutError:Da.transitional(Da.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(a=a&&g.synchronous,i.unshift(g.fulfilled,g.rejected))});var o=[];this.interceptors.response.forEach(function(g){o.push(g.fulfilled,g.rejected)});var s;if(!a){var l=[Qd,void 0];for(Array.prototype.unshift.apply(l,i),l=l.concat(o),s=Promise.resolve(r);l.length;)s=s.then(l.shift(),l.shift());return s}for(var p=r;i.length;){var f=i.shift(),h=i.shift();try{p=f(p)}catch(d){h(d);break}}try{s=Qd(p)}catch(d){return Promise.reject(d)}for(;o.length;)s=s.then(o.shift(),o.shift());return s};Au.prototype.getUri=function(e){return e=bo(this.defaults,e),W8(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};tg.forEach(["delete","get","head","options"],function(e){Au.prototype[e]=function(r,n){return this.request(bo(n||{},{method:e,url:r,data:(n||{}).data}))}});tg.forEach(["post","put","patch"],function(e){Au.prototype[e]=function(r,n,i){return this.request(bo(i||{},{method:e,url:r,data:n}))}});var H8=Au,rf,Xd;function G8(){if(Xd)return rf;Xd=1;var t=mo();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(a){if(i._listeners){var o,s=i._listeners.length;for(o=0;o<s;o++)i._listeners[o](a);i._listeners=null}}),this.promise.then=function(a){var o,s=new Promise(function(l){i.subscribe(l),o=l}).then(a);return s.cancel=function(){i.unsubscribe(o)},s},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},rf=e,rf}var nf,ep;function K8(){return ep||(ep=1,nf=function(e){return function(n){return e.apply(null,n)}}),nf}var af,tp;function $8(){if(tp)return af;tp=1;var t=sn;return af=function(r){return t.isObject(r)&&r.isAxiosError===!0},af}var rp=sn,Y8=W1,As=H8,Z8=X1,J8=ec;function ng(t){var e=new As(t),r=Y8(As.prototype.request,e);return rp.extend(r,As.prototype,e),rp.extend(r,e),r.create=function(i){return ng(Z8(t,i))},r}var Qn=ng(J8);Qn.Axios=As;Qn.Cancel=mo();Qn.CancelToken=G8();Qn.isCancel=Q1();Qn.VERSION=eg().version;Qn.all=function(e){return Promise.all(e)};Qn.spread=K8();Qn.isAxiosError=$8();r8.exports=Qn;Ys.default=Qn;(function(t){t.exports=Ys})(t8);var sr={},rc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RequiredError=t.BaseAPI=t.COLLECTION_FORMATS=t.BASE_PATH=void 0;const e=$s;t.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),t.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class r{constructor(a,o=t.BASE_PATH,s=e.default){this.basePath=o,this.axios=s,a&&(this.configuration=a,this.basePath=a.basePath||this.basePath)}}t.BaseAPI=r;class n extends Error{constructor(a,o){super(o),this.field=a,this.name="RequiredError"}}t.RequiredError=n})(rc);var nc=vr&&vr.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(f){try{p(n.next(f))}catch(h){o(h)}}function l(f){try{p(n.throw(f))}catch(h){o(h)}}function p(f){f.done?a(f.value):i(f.value).then(s,l)}p((n=n.apply(t,e||[])).next())})};Object.defineProperty(sr,"__esModule",{value:!0});sr.createRequestFunction=sr.toPathString=sr.serializeDataIfNeeded=sr.setSearchParams=sr.setOAuthToObject=sr.setBearerAuthToObject=sr.setBasicAuthToObject=sr.setApiKeyToObject=sr.assertParamExists=sr.DUMMY_BASE_URL=void 0;const Q8=rc;sr.DUMMY_BASE_URL="https://example.com";sr.assertParamExists=function(t,e,r){if(r==null)throw new Q8.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${t}.`)};sr.setApiKeyToObject=function(t,e,r){return nc(this,void 0,void 0,function*(){if(r&&r.apiKey){const n=typeof r.apiKey=="function"?yield r.apiKey(e):yield r.apiKey;t[e]=n}})};sr.setBasicAuthToObject=function(t,e){e&&(e.username||e.password)&&(t.auth={username:e.username,password:e.password})};sr.setBearerAuthToObject=function(t,e){return nc(this,void 0,void 0,function*(){if(e&&e.accessToken){const r=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;t.Authorization="Bearer "+r}})};sr.setOAuthToObject=function(t,e,r,n){return nc(this,void 0,void 0,function*(){if(n&&n.accessToken){const i=typeof n.accessToken=="function"?yield n.accessToken(e,r):yield n.accessToken;t.Authorization="Bearer "+i}})};function If(t,e,r=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(n=>If(t,n,r)):Object.keys(e).forEach(n=>If(t,e[n],`${r}${r!==""?".":""}${n}`)):t.has(r)?t.append(r,e):t.set(r,e))}sr.setSearchParams=function(t,...e){const r=new URLSearchParams(t.search);If(r,e),t.search=r.toString()};sr.serializeDataIfNeeded=function(t,e,r){const n=typeof t!="string";return(n&&r&&r.isJsonMime?r.isJsonMime(e.headers["Content-Type"]):n)?JSON.stringify(t!==void 0?t:{}):t||""};sr.toPathString=function(t){return t.pathname+t.search+t.hash};sr.createRequestFunction=function(t,e,r,n){return(i=e,a=r)=>{const o=Object.assign(Object.assign({},t.options),{url:((n==null?void 0:n.basePath)||a)+t.url});return i.request(o)}};(function(t){var e=vr&&vr.__awaiter||function(o,s,l,p){function f(h){return h instanceof l?h:new l(function(d){d(h)})}return new(l||(l=Promise))(function(h,d){function g(_){try{v(p.next(_))}catch(D){d(D)}}function b(_){try{v(p.throw(_))}catch(D){d(D)}}function v(_){_.done?h(_.value):f(_.value).then(g,b)}v((p=p.apply(o,s||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenAIApi=t.OpenAIApiFactory=t.OpenAIApiFp=t.OpenAIApiAxiosParamCreator=t.CreateImageRequestResponseFormatEnum=t.CreateImageRequestSizeEnum=t.ChatCompletionResponseMessageRoleEnum=t.ChatCompletionRequestMessageRoleEnum=void 0;const r=$s,n=sr,i=rc;t.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},t.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},t.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},t.OpenAIApiAxiosParamCreator=function(o){return{cancelFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("cancelFineTune","fineTuneId",s);const p="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),l),g={},b={};n.setSearchParams(f,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(f),options:d}}),createAnswer:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createAnswer","createAnswerRequest",s);const p="/answers",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createChatCompletion:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createChatCompletion","createChatCompletionRequest",s);const p="/chat/completions",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createClassification:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createClassification","createClassificationRequest",s);const p="/classifications",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createCompletion:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createCompletion","createCompletionRequest",s);const p="/completions",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createEdit:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEdit","createEditRequest",s);const p="/edits",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createEmbedding:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createEmbedding","createEmbeddingRequest",s);const p="/embeddings",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createFile:(s,l,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFile","file",s),n.assertParamExists("createFile","purpose",l);const f="/files",h=new URL(f,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},d),p),b={},v={},_=new(o&&o.formDataCtor||FormData);s!==void 0&&_.append("file",s),l!==void 0&&_.append("purpose",l),b["Content-Type"]="multipart/form-data",n.setSearchParams(h,v);let D=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign(Object.assign({},b),_.getHeaders()),D),p.headers),g.data=_,{url:n.toPathString(h),options:g}}),createFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createFineTune","createFineTuneRequest",s);const p="/fine-tunes",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createImage:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImage","createImageRequest",s);const p="/images/generations",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createImageEdit:(s,l,p,f,h,d,g,b={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageEdit","image",s),n.assertParamExists("createImageEdit","prompt",l);const v="/images/edits",_=new URL(v,n.DUMMY_BASE_URL);let D;o&&(D=o.baseOptions);const S=Object.assign(Object.assign({method:"POST"},D),b),w={},C={},E=new(o&&o.formDataCtor||FormData);s!==void 0&&E.append("image",s),p!==void 0&&E.append("mask",p),l!==void 0&&E.append("prompt",l),f!==void 0&&E.append("n",f),h!==void 0&&E.append("size",h),d!==void 0&&E.append("response_format",d),g!==void 0&&E.append("user",g),w["Content-Type"]="multipart/form-data",n.setSearchParams(_,C);let B=D&&D.headers?D.headers:{};return S.headers=Object.assign(Object.assign(Object.assign(Object.assign({},w),E.getHeaders()),B),b.headers),S.data=E,{url:n.toPathString(_),options:S}}),createImageVariation:(s,l,p,f,h,d={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createImageVariation","image",s);const g="/images/variations",b=new URL(g,n.DUMMY_BASE_URL);let v;o&&(v=o.baseOptions);const _=Object.assign(Object.assign({method:"POST"},v),d),D={},S={},w=new(o&&o.formDataCtor||FormData);s!==void 0&&w.append("image",s),l!==void 0&&w.append("n",l),p!==void 0&&w.append("size",p),f!==void 0&&w.append("response_format",f),h!==void 0&&w.append("user",h),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,S);let C=v&&v.headers?v.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),w.getHeaders()),C),d.headers),_.data=w,{url:n.toPathString(b),options:_}}),createModeration:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createModeration","createModerationRequest",s);const p="/moderations",f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"POST"},h),l),g={},b={};g["Content-Type"]="application/json",n.setSearchParams(f,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),d.data=n.serializeDataIfNeeded(s,d,o),{url:n.toPathString(f),options:d}}),createSearch:(s,l,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createSearch","engineId",s),n.assertParamExists("createSearch","createSearchRequest",l);const f="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(s))),h=new URL(f,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"POST"},d),p),b={},v={};b["Content-Type"]="application/json",n.setSearchParams(h,v);let _=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),_),p.headers),g.data=n.serializeDataIfNeeded(l,g,o),{url:n.toPathString(h),options:g}}),createTranscription:(s,l,p,f,h,d,g={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranscription","file",s),n.assertParamExists("createTranscription","model",l);const b="/audio/transcriptions",v=new URL(b,n.DUMMY_BASE_URL);let _;o&&(_=o.baseOptions);const D=Object.assign(Object.assign({method:"POST"},_),g),S={},w={},C=new(o&&o.formDataCtor||FormData);s!==void 0&&C.append("file",s),l!==void 0&&C.append("model",l),p!==void 0&&C.append("prompt",p),f!==void 0&&C.append("response_format",f),h!==void 0&&C.append("temperature",h),d!==void 0&&C.append("language",d),S["Content-Type"]="multipart/form-data",n.setSearchParams(v,w);let E=_&&_.headers?_.headers:{};return D.headers=Object.assign(Object.assign(Object.assign(Object.assign({},S),C.getHeaders()),E),g.headers),D.data=C,{url:n.toPathString(v),options:D}}),createTranslation:(s,l,p,f,h,d={})=>e(this,void 0,void 0,function*(){n.assertParamExists("createTranslation","file",s),n.assertParamExists("createTranslation","model",l);const g="/audio/translations",b=new URL(g,n.DUMMY_BASE_URL);let v;o&&(v=o.baseOptions);const _=Object.assign(Object.assign({method:"POST"},v),d),D={},S={},w=new(o&&o.formDataCtor||FormData);s!==void 0&&w.append("file",s),l!==void 0&&w.append("model",l),p!==void 0&&w.append("prompt",p),f!==void 0&&w.append("response_format",f),h!==void 0&&w.append("temperature",h),D["Content-Type"]="multipart/form-data",n.setSearchParams(b,S);let C=v&&v.headers?v.headers:{};return _.headers=Object.assign(Object.assign(Object.assign(Object.assign({},D),w.getHeaders()),C),d.headers),_.data=w,{url:n.toPathString(b),options:_}}),deleteFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteFile","fileId",s);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},h),l),g={},b={};n.setSearchParams(f,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(f),options:d}}),deleteModel:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("deleteModel","model",s);const p="/models/{model}".replace("{model}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"DELETE"},h),l),g={},b={};n.setSearchParams(f,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(f),options:d}}),downloadFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("downloadFile","fileId",s);const p="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),l),g={},b={};n.setSearchParams(f,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(f),options:d}}),listEngines:(s={})=>e(this,void 0,void 0,function*(){const l="/engines",p=new URL(l,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),s),d={},g={};n.setSearchParams(p,g);let b=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:h}}),listFiles:(s={})=>e(this,void 0,void 0,function*(){const l="/files",p=new URL(l,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),s),d={},g={};n.setSearchParams(p,g);let b=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:h}}),listFineTuneEvents:(s,l,p={})=>e(this,void 0,void 0,function*(){n.assertParamExists("listFineTuneEvents","fineTuneId",s);const f="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(s))),h=new URL(f,n.DUMMY_BASE_URL);let d;o&&(d=o.baseOptions);const g=Object.assign(Object.assign({method:"GET"},d),p),b={},v={};l!==void 0&&(v.stream=l),n.setSearchParams(h,v);let _=d&&d.headers?d.headers:{};return g.headers=Object.assign(Object.assign(Object.assign({},b),_),p.headers),{url:n.toPathString(h),options:g}}),listFineTunes:(s={})=>e(this,void 0,void 0,function*(){const l="/fine-tunes",p=new URL(l,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),s),d={},g={};n.setSearchParams(p,g);let b=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:h}}),listModels:(s={})=>e(this,void 0,void 0,function*(){const l="/models",p=new URL(l,n.DUMMY_BASE_URL);let f;o&&(f=o.baseOptions);const h=Object.assign(Object.assign({method:"GET"},f),s),d={},g={};n.setSearchParams(p,g);let b=f&&f.headers?f.headers:{};return h.headers=Object.assign(Object.assign(Object.assign({},d),b),s.headers),{url:n.toPathString(p),options:h}}),retrieveEngine:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveEngine","engineId",s);const p="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),l),g={},b={};n.setSearchParams(f,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(f),options:d}}),retrieveFile:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFile","fileId",s);const p="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),l),g={},b={};n.setSearchParams(f,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(f),options:d}}),retrieveFineTune:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveFineTune","fineTuneId",s);const p="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),l),g={},b={};n.setSearchParams(f,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(f),options:d}}),retrieveModel:(s,l={})=>e(this,void 0,void 0,function*(){n.assertParamExists("retrieveModel","model",s);const p="/models/{model}".replace("{model}",encodeURIComponent(String(s))),f=new URL(p,n.DUMMY_BASE_URL);let h;o&&(h=o.baseOptions);const d=Object.assign(Object.assign({method:"GET"},h),l),g={},b={};n.setSearchParams(f,b);let v=h&&h.headers?h.headers:{};return d.headers=Object.assign(Object.assign(Object.assign({},g),v),l.headers),{url:n.toPathString(f),options:d}})}},t.OpenAIApiFp=function(o){const s=t.OpenAIApiAxiosParamCreator(o);return{cancelFineTune(l,p){return e(this,void 0,void 0,function*(){const f=yield s.cancelFineTune(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createAnswer(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createAnswer(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createChatCompletion(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createChatCompletion(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createClassification(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createClassification(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createCompletion(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createCompletion(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createEdit(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createEdit(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createEmbedding(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createEmbedding(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createFile(l,p,f){return e(this,void 0,void 0,function*(){const h=yield s.createFile(l,p,f);return n.createRequestFunction(h,r.default,i.BASE_PATH,o)})},createFineTune(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createFineTune(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createImage(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createImage(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createImageEdit(l,p,f,h,d,g,b,v){return e(this,void 0,void 0,function*(){const _=yield s.createImageEdit(l,p,f,h,d,g,b,v);return n.createRequestFunction(_,r.default,i.BASE_PATH,o)})},createImageVariation(l,p,f,h,d,g){return e(this,void 0,void 0,function*(){const b=yield s.createImageVariation(l,p,f,h,d,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},createModeration(l,p){return e(this,void 0,void 0,function*(){const f=yield s.createModeration(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},createSearch(l,p,f){return e(this,void 0,void 0,function*(){const h=yield s.createSearch(l,p,f);return n.createRequestFunction(h,r.default,i.BASE_PATH,o)})},createTranscription(l,p,f,h,d,g,b){return e(this,void 0,void 0,function*(){const v=yield s.createTranscription(l,p,f,h,d,g,b);return n.createRequestFunction(v,r.default,i.BASE_PATH,o)})},createTranslation(l,p,f,h,d,g){return e(this,void 0,void 0,function*(){const b=yield s.createTranslation(l,p,f,h,d,g);return n.createRequestFunction(b,r.default,i.BASE_PATH,o)})},deleteFile(l,p){return e(this,void 0,void 0,function*(){const f=yield s.deleteFile(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},deleteModel(l,p){return e(this,void 0,void 0,function*(){const f=yield s.deleteModel(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},downloadFile(l,p){return e(this,void 0,void 0,function*(){const f=yield s.downloadFile(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},listEngines(l){return e(this,void 0,void 0,function*(){const p=yield s.listEngines(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listFiles(l){return e(this,void 0,void 0,function*(){const p=yield s.listFiles(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listFineTuneEvents(l,p,f){return e(this,void 0,void 0,function*(){const h=yield s.listFineTuneEvents(l,p,f);return n.createRequestFunction(h,r.default,i.BASE_PATH,o)})},listFineTunes(l){return e(this,void 0,void 0,function*(){const p=yield s.listFineTunes(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},listModels(l){return e(this,void 0,void 0,function*(){const p=yield s.listModels(l);return n.createRequestFunction(p,r.default,i.BASE_PATH,o)})},retrieveEngine(l,p){return e(this,void 0,void 0,function*(){const f=yield s.retrieveEngine(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},retrieveFile(l,p){return e(this,void 0,void 0,function*(){const f=yield s.retrieveFile(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},retrieveFineTune(l,p){return e(this,void 0,void 0,function*(){const f=yield s.retrieveFineTune(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})},retrieveModel(l,p){return e(this,void 0,void 0,function*(){const f=yield s.retrieveModel(l,p);return n.createRequestFunction(f,r.default,i.BASE_PATH,o)})}}},t.OpenAIApiFactory=function(o,s,l){const p=t.OpenAIApiFp(o);return{cancelFineTune(f,h){return p.cancelFineTune(f,h).then(d=>d(l,s))},createAnswer(f,h){return p.createAnswer(f,h).then(d=>d(l,s))},createChatCompletion(f,h){return p.createChatCompletion(f,h).then(d=>d(l,s))},createClassification(f,h){return p.createClassification(f,h).then(d=>d(l,s))},createCompletion(f,h){return p.createCompletion(f,h).then(d=>d(l,s))},createEdit(f,h){return p.createEdit(f,h).then(d=>d(l,s))},createEmbedding(f,h){return p.createEmbedding(f,h).then(d=>d(l,s))},createFile(f,h,d){return p.createFile(f,h,d).then(g=>g(l,s))},createFineTune(f,h){return p.createFineTune(f,h).then(d=>d(l,s))},createImage(f,h){return p.createImage(f,h).then(d=>d(l,s))},createImageEdit(f,h,d,g,b,v,_,D){return p.createImageEdit(f,h,d,g,b,v,_,D).then(S=>S(l,s))},createImageVariation(f,h,d,g,b,v){return p.createImageVariation(f,h,d,g,b,v).then(_=>_(l,s))},createModeration(f,h){return p.createModeration(f,h).then(d=>d(l,s))},createSearch(f,h,d){return p.createSearch(f,h,d).then(g=>g(l,s))},createTranscription(f,h,d,g,b,v,_){return p.createTranscription(f,h,d,g,b,v,_).then(D=>D(l,s))},createTranslation(f,h,d,g,b,v){return p.createTranslation(f,h,d,g,b,v).then(_=>_(l,s))},deleteFile(f,h){return p.deleteFile(f,h).then(d=>d(l,s))},deleteModel(f,h){return p.deleteModel(f,h).then(d=>d(l,s))},downloadFile(f,h){return p.downloadFile(f,h).then(d=>d(l,s))},listEngines(f){return p.listEngines(f).then(h=>h(l,s))},listFiles(f){return p.listFiles(f).then(h=>h(l,s))},listFineTuneEvents(f,h,d){return p.listFineTuneEvents(f,h,d).then(g=>g(l,s))},listFineTunes(f){return p.listFineTunes(f).then(h=>h(l,s))},listModels(f){return p.listModels(f).then(h=>h(l,s))},retrieveEngine(f,h){return p.retrieveEngine(f,h).then(d=>d(l,s))},retrieveFile(f,h){return p.retrieveFile(f,h).then(d=>d(l,s))},retrieveFineTune(f,h){return p.retrieveFineTune(f,h).then(d=>d(l,s))},retrieveModel(f,h){return p.retrieveModel(f,h).then(d=>d(l,s))}}};class a extends i.BaseAPI{cancelFineTune(s,l){return t.OpenAIApiFp(this.configuration).cancelFineTune(s,l).then(p=>p(this.axios,this.basePath))}createAnswer(s,l){return t.OpenAIApiFp(this.configuration).createAnswer(s,l).then(p=>p(this.axios,this.basePath))}createChatCompletion(s,l){return t.OpenAIApiFp(this.configuration).createChatCompletion(s,l).then(p=>p(this.axios,this.basePath))}createClassification(s,l){return t.OpenAIApiFp(this.configuration).createClassification(s,l).then(p=>p(this.axios,this.basePath))}createCompletion(s,l){return t.OpenAIApiFp(this.configuration).createCompletion(s,l).then(p=>p(this.axios,this.basePath))}createEdit(s,l){return t.OpenAIApiFp(this.configuration).createEdit(s,l).then(p=>p(this.axios,this.basePath))}createEmbedding(s,l){return t.OpenAIApiFp(this.configuration).createEmbedding(s,l).then(p=>p(this.axios,this.basePath))}createFile(s,l,p){return t.OpenAIApiFp(this.configuration).createFile(s,l,p).then(f=>f(this.axios,this.basePath))}createFineTune(s,l){return t.OpenAIApiFp(this.configuration).createFineTune(s,l).then(p=>p(this.axios,this.basePath))}createImage(s,l){return t.OpenAIApiFp(this.configuration).createImage(s,l).then(p=>p(this.axios,this.basePath))}createImageEdit(s,l,p,f,h,d,g,b){return t.OpenAIApiFp(this.configuration).createImageEdit(s,l,p,f,h,d,g,b).then(v=>v(this.axios,this.basePath))}createImageVariation(s,l,p,f,h,d){return t.OpenAIApiFp(this.configuration).createImageVariation(s,l,p,f,h,d).then(g=>g(this.axios,this.basePath))}createModeration(s,l){return t.OpenAIApiFp(this.configuration).createModeration(s,l).then(p=>p(this.axios,this.basePath))}createSearch(s,l,p){return t.OpenAIApiFp(this.configuration).createSearch(s,l,p).then(f=>f(this.axios,this.basePath))}createTranscription(s,l,p,f,h,d,g){return t.OpenAIApiFp(this.configuration).createTranscription(s,l,p,f,h,d,g).then(b=>b(this.axios,this.basePath))}createTranslation(s,l,p,f,h,d){return t.OpenAIApiFp(this.configuration).createTranslation(s,l,p,f,h,d).then(g=>g(this.axios,this.basePath))}deleteFile(s,l){return t.OpenAIApiFp(this.configuration).deleteFile(s,l).then(p=>p(this.axios,this.basePath))}deleteModel(s,l){return t.OpenAIApiFp(this.configuration).deleteModel(s,l).then(p=>p(this.axios,this.basePath))}downloadFile(s,l){return t.OpenAIApiFp(this.configuration).downloadFile(s,l).then(p=>p(this.axios,this.basePath))}listEngines(s){return t.OpenAIApiFp(this.configuration).listEngines(s).then(l=>l(this.axios,this.basePath))}listFiles(s){return t.OpenAIApiFp(this.configuration).listFiles(s).then(l=>l(this.axios,this.basePath))}listFineTuneEvents(s,l,p){return t.OpenAIApiFp(this.configuration).listFineTuneEvents(s,l,p).then(f=>f(this.axios,this.basePath))}listFineTunes(s){return t.OpenAIApiFp(this.configuration).listFineTunes(s).then(l=>l(this.axios,this.basePath))}listModels(s){return t.OpenAIApiFp(this.configuration).listModels(s).then(l=>l(this.axios,this.basePath))}retrieveEngine(s,l){return t.OpenAIApiFp(this.configuration).retrieveEngine(s,l).then(p=>p(this.axios,this.basePath))}retrieveFile(s,l){return t.OpenAIApiFp(this.configuration).retrieveFile(s,l).then(p=>p(this.axios,this.basePath))}retrieveFineTune(s,l){return t.OpenAIApiFp(this.configuration).retrieveFineTune(s,l).then(p=>p(this.axios,this.basePath))}retrieveModel(s,l){return t.OpenAIApiFp(this.configuration).retrieveModel(s,l).then(p=>p(this.axios,this.basePath))}}t.OpenAIApi=a})(q1);var Do={};const X8="openai",eB="3.2.1",tB="Node.js library for the OpenAI API",rB={type:"git",url:"git@github.com:openai/openai-node.git"},nB=["openai","open","ai","gpt-3","gpt3"],iB="OpenAI",aB="MIT",uB="./dist/index.js",sB="./dist/index.d.ts",oB={build:"tsc --outDir dist/"},lB={axios:"^0.26.0","form-data":"^4.0.0"},fB={"@types/node":"^12.11.5",typescript:"^3.6.4"},cB={name:X8,version:eB,description:tB,repository:rB,keywords:nB,author:iB,license:aB,main:uB,types:sB,scripts:oB,dependencies:lB,devDependencies:fB};var uf,np;function hB(){return np||(np=1,uf=typeof self=="object"?self.FormData:window.FormData),uf}Object.defineProperty(Do,"__esModule",{value:!0});Do.Configuration=void 0;const dB=cB;class pB{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${dB.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=hB())}isJsonMime(e){const r=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(r.test(e)||e.toLowerCase()==="application/json-patch+json")}}Do.Configuration=pB;(function(t){var e=vr&&vr.__createBinding||(Object.create?function(n,i,a,o){o===void 0&&(o=a),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,o){o===void 0&&(o=a),n[o]=i[a]}),r=vr&&vr.__exportStar||function(n,i){for(var a in n)a!=="default"&&!i.hasOwnProperty(a)&&e(i,n,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(q1,t),r(Do,t)})(Pf);function Zs(t){const e=new Pf.Configuration({apiKey:t});return new Pf.OpenAIApi(e)}async function gB(t,e,r="text-davinci-003"){return await t.createCompletion({model:r,prompt:e,temperature:.8,max_tokens:250})}async function vB(t,e,r="gpt-3.5-turbo"){return await t.createChatCompletion({model:r,messages:[{role:"user",content:e}],temperature:.8,max_tokens:250})}async function mB(t,e,r="text-embedding-ada-002"){return await t.createEmbedding({model:r,input:e})}async function _B(t){return await t.listModels()}const sf="preferredEmbeddingModel";function bB(){const t=or(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[sf]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[sf]=a,r(a))},get:()=>kt(t),delete:()=>{i&&(delete localStorage[sf],r(""))}}}const Nf=bB();async function DB(t){const e=Zs(di.get());return(await mB(e,t,Nf.get()||"text-embedding-ada-002")).data.data[0].embedding}function yB(t){let e,r,n,i;return{c(){e=W("div"),r=W("div"),n=W("p"),i=Oe("Some features require OpenAI Key"),this.h()},l(a){e=H(a,"DIV",{class:!0});var o=R(e);r=H(o,"DIV",{class:!0});var s=R(r);n=H(s,"P",{class:!0});var l=R(n);i=Me(l,"Some features require OpenAI Key"),l.forEach(M),s.forEach(M),o.forEach(M),this.h()},h(){F(n,"class","text-xs"),F(r,"class","flex flex-col justify-start mr-5"),F(e,"class","w-full flex justify-center p-4")},m(a,o){le(a,e,o),I(e,r),I(r,n),I(n,i)},d(a){a&&M(e)}}}function wB(t){let e,r,n,i,a,o,s;return{c(){e=W("div"),r=W("div"),n=W("progress"),i=Se(),a=W("div"),o=W("p"),s=Oe("Embedding..."),this.h()},l(l){e=H(l,"DIV",{class:!0});var p=R(e);r=H(p,"DIV",{class:!0});var f=R(r);n=H(f,"PROGRESS",{class:!0}),R(n).forEach(M),f.forEach(M),i=Be(p),a=H(p,"DIV",{class:!0});var h=R(a);o=H(h,"P",{class:!0});var d=R(o);s=Me(d,"Embedding..."),d.forEach(M),h.forEach(M),p.forEach(M),this.h()},h(){F(n,"class","progress progress-primary w-20"),F(r,"class","flex flex-col justify-start mr-5"),F(o,"class","text-xs"),F(a,"class","flex flex-col justify-start mr-5"),F(e,"class","w-full flex justify-center p-4")},m(l,p){le(l,e,p),I(e,r),I(r,n),I(e,i),I(e,a),I(a,o),I(o,s)},d(l){l&&M(e)}}}function EB(t){let e;function r(a,o){if(a[0])return wB;if(!a[1])return yB}let n=r(t),i=n&&n(t);return{c(){i&&i.c(),e=wt()},l(a){i&&i.l(a),e=wt()},m(a,o){i&&i.m(a,o),le(a,e,o)},p(a,[o]){n!==(n=r(a))&&(i&&i.d(1),i=n&&n(a),i&&(i.c(),i.m(e.parentNode,e)))},i:Ce,o:Ce,d(a){i&&i.d(a),a&&M(e)}}}function AB(t,e,r){let n,i;$e(t,ya,f=>r(2,n=f)),$e(t,di,f=>r(1,i=f));let a=!1;function o(){return Object.keys(n).length}const s=jr.subscribe(f=>{const h=Object.entries(f).filter(([d,g])=>!g);i&&h.length>0&&h.forEach(([d,g])=>{ya.update(b=>(b[d]=!1,b))})}),l=ya.subscribe(f=>{!!(di.get()&&o()>0&&!a)&&(r(0,a=!0),p())});function p(){console.log("start embedding");const f=Object.keys(n)[0];ya.update(h=>(h[f]=!0,h)),DB(f).then(h=>{jr.update(f,h);const d={...n};delete d[f],ya.set(d),o()>0?p():r(0,a=!1)})}return iw(()=>{s(),l()}),[a,i]}class CB extends Xe{constructor(e){super(),et(this,e,AB,EB,tt,{})}}function FB(t){let e,r,n,i,a,o,s;return{c(){e=nt("svg"),r=nt("circle"),n=nt("circle"),i=nt("circle"),a=nt("rect"),o=nt("rect"),s=nt("rect"),this.h()},l(l){e=it(l,"svg",{xmlns:!0,fill:!0,class:!0,viewBox:!0});var p=R(e);r=it(p,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(r).forEach(M),n=it(p,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(n).forEach(M),i=it(p,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),R(i).forEach(M),a=it(p,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),R(a).forEach(M),o=it(p,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),R(o).forEach(M),s=it(p,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),R(s).forEach(M),p.forEach(M),this.h()},h(){F(r,"cx","5"),F(r,"cy","14"),F(r,"r","2"),F(r,"fill","rgba(255,255,255, 0.7)"),F(n,"cx","5"),F(n,"cy","25"),F(n,"r","2"),F(n,"fill","rgba(255,255,255, 0.7)"),F(i,"cx","5"),F(i,"cy","36"),F(i,"r","2"),F(i,"fill","rgba(255,255,255, 0.7)"),F(a,"x","10"),F(a,"y","12"),F(a,"width","35"),F(a,"height","4"),F(a,"fill","rgba(255,255,255, 0.7)"),F(o,"x","10"),F(o,"y","23"),F(o,"width","35"),F(o,"height","4"),F(o,"fill","rgba(255,255,255, 0.7)"),F(s,"x","10"),F(s,"y","34"),F(s,"width","35"),F(s,"height","4"),F(s,"fill","rgba(255,255,255, 0.7)"),F(e,"xmlns","http://www.w3.org/2000/svg"),F(e,"fill","rgba(255,255,255, 0.7)"),F(e,"class","h-6 w-6"),F(e,"viewBox","0 0 50 50")},m(l,p){le(l,e,p),I(e,r),I(e,n),I(e,i),I(e,a),I(e,o),I(e,s)},p:Ce,i:Ce,o:Ce,d(l){l&&M(e)}}}class SB extends Xe{constructor(e){super(),et(this,e,null,FB,tt,{})}}function BB(t){let e,r,n,i,a,o,s,l,p,f,h,d,g;return i=new SB({}),s=new Tp({}),{c(){e=W("div"),r=W("div"),n=W("button"),je(i.$$.fragment),a=Se(),o=W("button"),je(s.$$.fragment),l=Se(),p=W("button"),f=Oe("Paste"),this.h()},l(b){e=H(b,"DIV",{class:!0});var v=R(e);r=H(v,"DIV",{class:!0});var _=R(r);n=H(_,"BUTTON",{class:!0});var D=R(n);ze(i.$$.fragment,D),D.forEach(M),a=Be(_),o=H(_,"BUTTON",{class:!0});var S=R(o);ze(s.$$.fragment,S),S.forEach(M),_.forEach(M),l=Be(v),p=H(v,"BUTTON",{class:!0});var w=R(p);f=Me(w,"Paste"),w.forEach(M),v.forEach(M),this.h()},h(){F(n,"class","btn btn-sm"),rt(n,"btn-active",t[0]===$n.List),F(o,"class","btn btn-sm"),rt(o,"btn-active",t[0]===$n.Map),F(r,"class","btn-group btn-group-horizontal w-full flex justify-end"),F(p,"class","btn btn-sm btn-info ml-2"),F(e,"class","flex justify-center p-2")},m(b,v){le(b,e,v),I(e,r),I(r,n),qe(i,n,null),I(r,a),I(r,o),qe(s,o,null),I(e,l),I(e,p),I(p,f),h=!0,d||(g=[ve(n,"click",t[2]),ve(o,"click",t[3]),ve(p,"click",t[1])],d=!0)},p(b,[v]){(!h||v&1)&&rt(n,"btn-active",b[0]===$n.List),(!h||v&1)&&rt(o,"btn-active",b[0]===$n.Map)},i(b){h||(he(i.$$.fragment,b),he(s.$$.fragment,b),h=!0)},o(b){_e(i.$$.fragment,b),_e(s.$$.fragment,b),h=!1},d(b){b&&M(e),We(i),We(s),d=!1,Wt(g)}}}function OB(t,e,r){let n,i;$e(t,jr,l=>r(4,n=l)),$e(t,ws,l=>r(0,i=l));function a(){console.log("pasted"),navigator.clipboard.readText().then(l=>{const p=bu(l).map(h=>h[0]),f=n;p.forEach(h=>{f[h]||jr.update(h,null)})})}return[i,a,()=>ws.set($n.List),()=>ws.set($n.Map)]}class MB extends Xe{constructor(e){super(),et(this,e,OB,BB,tt,{})}}function PB(t){let e,r,n,i,a;return{c(){e=W("div"),r=W("button"),n=Oe("Delete History"),this.h()},l(o){e=H(o,"DIV",{class:!0});var s=R(e);r=H(s,"BUTTON",{class:!0});var l=R(r);n=Me(l,"Delete History"),l.forEach(M),s.forEach(M),this.h()},h(){F(r,"class","btn btn-sm btn-error"),F(e,"class","flex justify-end p-2")},m(o,s){le(o,e,s),I(e,r),I(r,n),i||(a=ve(r,"click",t[0]),i=!0)},p:Ce,i:Ce,o:Ce,d(o){o&&M(e),i=!1,a()}}}function kB(t){function e(){Jf.delete()}return[e]}class TB extends Xe{constructor(e){super(),et(this,e,kB,PB,tt,{})}}function IB(t){let e,r;return e=new TB({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},p:Ce,i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function NB(t){let e,r;return e=new MB({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},p:Ce,i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function xB(t){let e,r,n,i;r=new yw({});let a=(t[1].weightMode===mt.Circle||t[1].weightMode===mt.Pie||t[1].weightMode===mt.Ring)&&ip();return{c(){e=W("div"),je(r.$$.fragment),n=Se(),a&&a.c()},l(o){e=H(o,"DIV",{});var s=R(e);ze(r.$$.fragment,s),n=Be(s),a&&a.l(s),s.forEach(M)},m(o,s){le(o,e,s),qe(r,e,null),I(e,n),a&&a.m(e,null),i=!0},p(o,s){o[1].weightMode===mt.Circle||o[1].weightMode===mt.Pie||o[1].weightMode===mt.Ring?a?s&2&&he(a,1):(a=ip(),a.c(),he(a,1),a.m(e,null)):a&&(rr(),_e(a,1,1,()=>{a=null}),nr())},i(o){i||(he(r.$$.fragment,o),he(a),i=!0)},o(o){_e(r.$$.fragment,o),_e(a),i=!1},d(o){o&&M(e),We(r),a&&a.d()}}}function ip(t){let e,r;return e=new Mw({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function LB(t){let e,r,n;return r=new RS({}),{c(){e=W("div"),je(r.$$.fragment),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=R(e);ze(r.$$.fragment,a),a.forEach(M),this.h()},h(){F(e,"class","flex flex-col h-full mt-10 overflow-hidden")},m(i,a){le(i,e,a),qe(r,e,null),n=!0},i(i){n||(he(r.$$.fragment,i),n=!0)},o(i){_e(r.$$.fragment,i),n=!1},d(i){i&&M(e),We(r)}}}function RB(t){let e,r,n;return r=new e8({}),{c(){e=W("div"),je(r.$$.fragment),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=R(e);ze(r.$$.fragment,a),a.forEach(M),this.h()},h(){F(e,"class","flex flex-col h-full mt-10 overflow-hidden")},m(i,a){le(i,e,a),qe(r,e,null),n=!0},i(i){n||(he(r.$$.fragment,i),n=!0)},o(i){_e(r.$$.fragment,i),n=!1},d(i){i&&M(e),We(r)}}}function UB(t){let e,r,n;return r=new kS({}),{c(){e=W("div"),je(r.$$.fragment),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=R(e);ze(r.$$.fragment,a),a.forEach(M),this.h()},h(){F(e,"class","flex flex-col h-full place-content-between")},m(i,a){le(i,e,a),qe(r,e,null),n=!0},i(i){n||(he(r.$$.fragment,i),n=!0)},o(i){_e(r.$$.fragment,i),n=!1},d(i){i&&M(e),We(r)}}}function VB(t){let e,r,n,i,a,o,s,l,p,f,h,d,g;i=new lw({}),o=new CB({});const b=[xB,NB,IB],v=[];function _(C,E){return C[0]===yr.Build?0:C[0]===yr.Concept?1:C[0]===yr.History?2:-1}~(l=_(t))&&(p=v[l]=b[l](t));const D=[UB,RB,LB],S=[];function w(C,E){return C[0]===yr.Build?0:C[0]===yr.Concept?1:C[0]===yr.History?2:-1}return~(h=w(t))&&(d=S[h]=D[h](t)),{c(){e=W("div"),r=W("div"),n=W("div"),je(i.$$.fragment),a=Se(),je(o.$$.fragment),s=Se(),p&&p.c(),f=Se(),d&&d.c(),this.h()},l(C){e=H(C,"DIV",{class:!0});var E=R(e);r=H(E,"DIV",{class:!0});var B=R(r);n=H(B,"DIV",{class:!0});var k=R(n);ze(i.$$.fragment,k),a=Be(k),ze(o.$$.fragment,k),s=Be(k),p&&p.l(k),k.forEach(M),B.forEach(M),f=Be(E),d&&d.l(E),E.forEach(M),this.h()},h(){F(n,"class","w-full flex justify-between"),F(r,"class","w-full absolute top-0 z-10"),F(e,"class","relative w-full h-screen flex flex-col")},m(C,E){le(C,e,E),I(e,r),I(r,n),qe(i,n,null),I(n,a),qe(o,n,null),I(n,s),~l&&v[l].m(n,null),I(e,f),~h&&S[h].m(e,null),g=!0},p(C,[E]){let B=l;l=_(C),l===B?~l&&v[l].p(C,E):(p&&(rr(),_e(v[B],1,1,()=>{v[B]=null}),nr()),~l?(p=v[l],p?p.p(C,E):(p=v[l]=b[l](C),p.c()),he(p,1),p.m(n,null)):p=null);let k=h;h=w(C),h!==k&&(d&&(rr(),_e(S[k],1,1,()=>{S[k]=null}),nr()),~h?(d=S[h],d||(d=S[h]=D[h](C),d.c()),he(d,1),d.m(e,null)):d=null)},i(C){g||(he(i.$$.fragment,C),he(o.$$.fragment,C),he(p),he(d),g=!0)},o(C){_e(i.$$.fragment,C),_e(o.$$.fragment,C),_e(p),_e(d),g=!1},d(C){C&&M(e),We(i),We(o),~l&&v[l].d(),~h&&S[h].d()}}}function jB(t,e,r){let n,i;return $e(t,hf,a=>r(0,n=a)),$e(t,ot,a=>r(1,i=a)),[n,i]}class zB extends Xe{constructor(e){super(),et(this,e,jB,VB,tt,{})}}var Js={},qB={get exports(){return Js},set exports(t){Js=t}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(t,e){(function(){var r,n="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",s="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",p=500,f="__lodash_placeholder__",h=1,d=2,g=4,b=1,v=2,_=1,D=2,S=4,w=8,C=16,E=32,B=64,k=128,O=256,x=512,K=30,$="...",X=800,j=16,U=1,z=2,V=3,J=1/0,ae=9007199254740991,ne=17976931348623157e292,se=0/0,De=4294967295,we=De-1,Fe=De>>>1,xe=[["ary",k],["bind",_],["bindKey",D],["curry",w],["curryRight",C],["flip",x],["partial",E],["partialRight",B],["rearg",O]],ke="[object Arguments]",Ue="[object Array]",Ye="[object AsyncFunction]",Ke="[object Boolean]",Je="[object Date]",Le="[object DOMException]",Dt="[object Error]",Et="[object Function]",ht="[object GeneratorFunction]",at="[object Map]",Pt="[object Number]",dr="[object Null]",Tt="[object Object]",Te="[object Promise]",Ve="[object Proxy]",Ot="[object RegExp]",Ft="[object Set]",$t="[object String]",G="[object Symbol]",Z="[object Undefined]",ee="[object WeakMap]",ce="[object WeakSet]",ue="[object ArrayBuffer]",de="[object DataView]",fe="[object Float32Array]",pe="[object Float64Array]",Pe="[object Int8Array]",He="[object Int16Array]",ct="[object Int32Array]",Ie="[object Uint8Array]",Yt="[object Uint8ClampedArray]",zt="[object Uint16Array]",ir="[object Uint32Array]",Zt=/\b__p \+= '';/g,Er=/\b(__p \+=) '' \+/g,Jt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ar=/&(?:amp|lt|gt|quot|#39);/g,pr=/[&<>"']/g,gr=RegExp(Ar.source),gn=RegExp(pr.source),mr=/<%-([\s\S]+?)%>/g,On=/<%([\s\S]+?)%>/g,Xn=/<%=([\s\S]+?)%>/g,Un=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vn=/^\w*$/,ta=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ri=/[\\^$.*+?()[\]{}|]/g,Ia=RegExp(Ri.source),Mr=/^\s+/,ar=/\s/,Na=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gi=/\{\n\/\* \[wrapped with (.+)\] \*/,vn=/,? & /,ei=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ui=/[()=,{}\[\]\/\s]/,xa=/\\(\\)?/g,La=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ra=/\w*$/,Ra=/^[-+]0x[0-9a-f]+$/i,Ua=/^0b[01]+$/i,Va=/^\[object .+?Constructor\]$/,ja=/^0o[0-7]+$/i,za=/^(?:0|[1-9]\d*)$/,qa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vi=/($^)/,Wa=/['\n\r\u2028\u2029\\]/g,mi="\\ud800-\\udfff",Ha="\\u0300-\\u036f",Ga="\\ufe20-\\ufe2f",Ka="\\u20d0-\\u20ff",na=Ha+Ga+Ka,jn="\\u2700-\\u27bf",Cr="a-z\\xdf-\\xf6\\xf8-\\xff",lr="\\xac\\xb1\\xd7\\xf7",Kr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Vi="\\u2000-\\u206f",ti=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zn="A-Z\\xc0-\\xd6\\xd8-\\xde",ji="\\ufe0e\\ufe0f",Mn=lr+Kr+Vi+ti,mn="[']",yo="["+mi+"]",$a="["+Mn+"]",ia="["+na+"]",Cu="\\d+",y="["+jn+"]",P="["+Cr+"]",q="[^"+mi+Mn+Cu+jn+Cr+zn+"]",te="\\ud83c[\\udffb-\\udfff]",me="(?:"+ia+"|"+te+")",Ne="[^"+mi+"]",vt="(?:\\ud83c[\\udde6-\\uddff]){2}",St="[\\ud800-\\udbff][\\udc00-\\udfff]",Gt="["+zn+"]",fr="\\u200d",ic="(?:"+P+"|"+q+")",ag="(?:"+Gt+"|"+q+")",ac="(?:"+mn+"(?:d|ll|m|re|s|t|ve))?",uc="(?:"+mn+"(?:D|LL|M|RE|S|T|VE))?",sc=me+"?",oc="["+ji+"]?",ug="(?:"+fr+"(?:"+[Ne,vt,St].join("|")+")"+oc+sc+")*",sg="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",og="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",lc=oc+sc+ug,lg="(?:"+[y,vt,St].join("|")+")"+lc,fg="(?:"+[Ne+ia+"?",ia,vt,St,yo].join("|")+")",cg=RegExp(mn,"g"),hg=RegExp(ia,"g"),wo=RegExp(te+"(?="+te+")|"+fg+lc,"g"),dg=RegExp([Gt+"?"+P+"+"+ac+"(?="+[$a,Gt,"$"].join("|")+")",ag+"+"+uc+"(?="+[$a,Gt+ic,"$"].join("|")+")",Gt+"?"+ic+"+"+ac,Gt+"+"+uc,og,sg,Cu,lg].join("|"),"g"),pg=RegExp("["+fr+mi+na+ji+"]"),gg=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vg=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],mg=-1,Ht={};Ht[fe]=Ht[pe]=Ht[Pe]=Ht[He]=Ht[ct]=Ht[Ie]=Ht[Yt]=Ht[zt]=Ht[ir]=!0,Ht[ke]=Ht[Ue]=Ht[ue]=Ht[Ke]=Ht[de]=Ht[Je]=Ht[Dt]=Ht[Et]=Ht[at]=Ht[Pt]=Ht[Tt]=Ht[Ot]=Ht[Ft]=Ht[$t]=Ht[ee]=!1;var qt={};qt[ke]=qt[Ue]=qt[ue]=qt[de]=qt[Ke]=qt[Je]=qt[fe]=qt[pe]=qt[Pe]=qt[He]=qt[ct]=qt[at]=qt[Pt]=qt[Tt]=qt[Ot]=qt[Ft]=qt[$t]=qt[G]=qt[Ie]=qt[Yt]=qt[zt]=qt[ir]=!0,qt[Dt]=qt[Et]=qt[ee]=!1;var _g={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},bg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Dg={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},yg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},wg=parseFloat,Eg=parseInt,fc=typeof vr=="object"&&vr&&vr.Object===Object&&vr,Ag=typeof self=="object"&&self&&self.Object===Object&&self,Pr=fc||Ag||Function("return this")(),Eo=e&&!e.nodeType&&e,zi=Eo&&!0&&t&&!t.nodeType&&t,cc=zi&&zi.exports===Eo,Ao=cc&&fc.process,_n=function(){try{var re=zi&&zi.require&&zi.require("util").types;return re||Ao&&Ao.binding&&Ao.binding("util")}catch{}}(),hc=_n&&_n.isArrayBuffer,dc=_n&&_n.isDate,pc=_n&&_n.isMap,gc=_n&&_n.isRegExp,vc=_n&&_n.isSet,mc=_n&&_n.isTypedArray;function on(re,ge,oe){switch(oe.length){case 0:return re.call(ge);case 1:return re.call(ge,oe[0]);case 2:return re.call(ge,oe[0],oe[1]);case 3:return re.call(ge,oe[0],oe[1],oe[2])}return re.apply(ge,oe)}function Cg(re,ge,oe,Ge){for(var pt=-1,It=re==null?0:re.length;++pt<It;){var _r=re[pt];ge(Ge,_r,oe(_r),re)}return Ge}function bn(re,ge){for(var oe=-1,Ge=re==null?0:re.length;++oe<Ge&&ge(re[oe],oe,re)!==!1;);return re}function Fg(re,ge){for(var oe=re==null?0:re.length;oe--&&ge(re[oe],oe,re)!==!1;);return re}function _c(re,ge){for(var oe=-1,Ge=re==null?0:re.length;++oe<Ge;)if(!ge(re[oe],oe,re))return!1;return!0}function _i(re,ge){for(var oe=-1,Ge=re==null?0:re.length,pt=0,It=[];++oe<Ge;){var _r=re[oe];ge(_r,oe,re)&&(It[pt++]=_r)}return It}function Fu(re,ge){var oe=re==null?0:re.length;return!!oe&&aa(re,ge,0)>-1}function Co(re,ge,oe){for(var Ge=-1,pt=re==null?0:re.length;++Ge<pt;)if(oe(ge,re[Ge]))return!0;return!1}function Kt(re,ge){for(var oe=-1,Ge=re==null?0:re.length,pt=Array(Ge);++oe<Ge;)pt[oe]=ge(re[oe],oe,re);return pt}function bi(re,ge){for(var oe=-1,Ge=ge.length,pt=re.length;++oe<Ge;)re[pt+oe]=ge[oe];return re}function Fo(re,ge,oe,Ge){var pt=-1,It=re==null?0:re.length;for(Ge&&It&&(oe=re[++pt]);++pt<It;)oe=ge(oe,re[pt],pt,re);return oe}function Sg(re,ge,oe,Ge){var pt=re==null?0:re.length;for(Ge&&pt&&(oe=re[--pt]);pt--;)oe=ge(oe,re[pt],pt,re);return oe}function So(re,ge){for(var oe=-1,Ge=re==null?0:re.length;++oe<Ge;)if(ge(re[oe],oe,re))return!0;return!1}var Bg=Bo("length");function Og(re){return re.split("")}function Mg(re){return re.match(ei)||[]}function bc(re,ge,oe){var Ge;return oe(re,function(pt,It,_r){if(ge(pt,It,_r))return Ge=It,!1}),Ge}function Su(re,ge,oe,Ge){for(var pt=re.length,It=oe+(Ge?1:-1);Ge?It--:++It<pt;)if(ge(re[It],It,re))return It;return-1}function aa(re,ge,oe){return ge===ge?zg(re,ge,oe):Su(re,Dc,oe)}function Pg(re,ge,oe,Ge){for(var pt=oe-1,It=re.length;++pt<It;)if(Ge(re[pt],ge))return pt;return-1}function Dc(re){return re!==re}function yc(re,ge){var oe=re==null?0:re.length;return oe?Mo(re,ge)/oe:se}function Bo(re){return function(ge){return ge==null?r:ge[re]}}function Oo(re){return function(ge){return re==null?r:re[ge]}}function wc(re,ge,oe,Ge,pt){return pt(re,function(It,_r,Vt){oe=Ge?(Ge=!1,It):ge(oe,It,_r,Vt)}),oe}function kg(re,ge){var oe=re.length;for(re.sort(ge);oe--;)re[oe]=re[oe].value;return re}function Mo(re,ge){for(var oe,Ge=-1,pt=re.length;++Ge<pt;){var It=ge(re[Ge]);It!==r&&(oe=oe===r?It:oe+It)}return oe}function Po(re,ge){for(var oe=-1,Ge=Array(re);++oe<re;)Ge[oe]=ge(oe);return Ge}function Tg(re,ge){return Kt(ge,function(oe){return[oe,re[oe]]})}function Ec(re){return re&&re.slice(0,Sc(re)+1).replace(Mr,"")}function ln(re){return function(ge){return re(ge)}}function ko(re,ge){return Kt(ge,function(oe){return re[oe]})}function Ya(re,ge){return re.has(ge)}function Ac(re,ge){for(var oe=-1,Ge=re.length;++oe<Ge&&aa(ge,re[oe],0)>-1;);return oe}function Cc(re,ge){for(var oe=re.length;oe--&&aa(ge,re[oe],0)>-1;);return oe}function Ig(re,ge){for(var oe=re.length,Ge=0;oe--;)re[oe]===ge&&++Ge;return Ge}var Ng=Oo(_g),xg=Oo(bg);function Lg(re){return"\\"+yg[re]}function Rg(re,ge){return re==null?r:re[ge]}function ua(re){return pg.test(re)}function Ug(re){return gg.test(re)}function Vg(re){for(var ge,oe=[];!(ge=re.next()).done;)oe.push(ge.value);return oe}function To(re){var ge=-1,oe=Array(re.size);return re.forEach(function(Ge,pt){oe[++ge]=[pt,Ge]}),oe}function Fc(re,ge){return function(oe){return re(ge(oe))}}function Di(re,ge){for(var oe=-1,Ge=re.length,pt=0,It=[];++oe<Ge;){var _r=re[oe];(_r===ge||_r===f)&&(re[oe]=f,It[pt++]=oe)}return It}function Bu(re){var ge=-1,oe=Array(re.size);return re.forEach(function(Ge){oe[++ge]=Ge}),oe}function jg(re){var ge=-1,oe=Array(re.size);return re.forEach(function(Ge){oe[++ge]=[Ge,Ge]}),oe}function zg(re,ge,oe){for(var Ge=oe-1,pt=re.length;++Ge<pt;)if(re[Ge]===ge)return Ge;return-1}function qg(re,ge,oe){for(var Ge=oe+1;Ge--;)if(re[Ge]===ge)return Ge;return Ge}function sa(re){return ua(re)?Hg(re):Bg(re)}function Pn(re){return ua(re)?Gg(re):Og(re)}function Sc(re){for(var ge=re.length;ge--&&ar.test(re.charAt(ge)););return ge}var Wg=Oo(Dg);function Hg(re){for(var ge=wo.lastIndex=0;wo.test(re);)++ge;return ge}function Gg(re){return re.match(wo)||[]}function Kg(re){return re.match(dg)||[]}var $g=function re(ge){ge=ge==null?Pr:oa.defaults(Pr.Object(),ge,oa.pick(Pr,vg));var oe=ge.Array,Ge=ge.Date,pt=ge.Error,It=ge.Function,_r=ge.Math,Vt=ge.Object,Io=ge.RegExp,Yg=ge.String,Dn=ge.TypeError,Ou=oe.prototype,Zg=It.prototype,la=Vt.prototype,Mu=ge["__core-js_shared__"],Pu=Zg.toString,Rt=la.hasOwnProperty,Jg=0,Bc=function(){var u=/[^.]+$/.exec(Mu&&Mu.keys&&Mu.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),ku=la.toString,Qg=Pu.call(Vt),Xg=Pr._,ev=Io("^"+Pu.call(Rt).replace(Ri,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tu=cc?ge.Buffer:r,yi=ge.Symbol,Iu=ge.Uint8Array,Oc=Tu?Tu.allocUnsafe:r,Nu=Fc(Vt.getPrototypeOf,Vt),Mc=Vt.create,Pc=la.propertyIsEnumerable,xu=Ou.splice,kc=yi?yi.isConcatSpreadable:r,Za=yi?yi.iterator:r,qi=yi?yi.toStringTag:r,Lu=function(){try{var u=$i(Vt,"defineProperty");return u({},"",{}),u}catch{}}(),tv=ge.clearTimeout!==Pr.clearTimeout&&ge.clearTimeout,rv=Ge&&Ge.now!==Pr.Date.now&&Ge.now,nv=ge.setTimeout!==Pr.setTimeout&&ge.setTimeout,Ru=_r.ceil,Uu=_r.floor,No=Vt.getOwnPropertySymbols,iv=Tu?Tu.isBuffer:r,Tc=ge.isFinite,av=Ou.join,uv=Fc(Vt.keys,Vt),br=_r.max,zr=_r.min,sv=Ge.now,ov=ge.parseInt,Ic=_r.random,lv=Ou.reverse,xo=$i(ge,"DataView"),Ja=$i(ge,"Map"),Lo=$i(ge,"Promise"),fa=$i(ge,"Set"),Qa=$i(ge,"WeakMap"),Xa=$i(Vt,"create"),Vu=Qa&&new Qa,ca={},fv=Yi(xo),cv=Yi(Ja),hv=Yi(Lo),dv=Yi(fa),pv=Yi(Qa),ju=yi?yi.prototype:r,eu=ju?ju.valueOf:r,Nc=ju?ju.toString:r;function N(u){if(ur(u)&&!gt(u)&&!(u instanceof Ct)){if(u instanceof yn)return u;if(Rt.call(u,"__wrapped__"))return xh(u)}return new yn(u)}var ha=function(){function u(){}return function(c){if(!Qt(c))return{};if(Mc)return Mc(c);u.prototype=c;var m=new u;return u.prototype=r,m}}();function zu(){}function yn(u,c){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=r}N.templateSettings={escape:mr,evaluate:On,interpolate:Xn,variable:"",imports:{_:N}},N.prototype=zu.prototype,N.prototype.constructor=N,yn.prototype=ha(zu.prototype),yn.prototype.constructor=yn;function Ct(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=De,this.__views__=[]}function gv(){var u=new Ct(this.__wrapped__);return u.__actions__=Qr(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=Qr(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=Qr(this.__views__),u}function vv(){if(this.__filtered__){var u=new Ct(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function mv(){var u=this.__wrapped__.value(),c=this.__dir__,m=gt(u),A=c<0,T=m?u.length:0,L=Om(0,T,this.__views__),Y=L.start,Q=L.end,ie=Q-Y,be=A?Q:Y-1,ye=this.__iteratees__,Ae=ye.length,Re=0,Ze=zr(ie,this.__takeCount__);if(!m||!A&&T==ie&&Ze==ie)return ah(u,this.__actions__);var lt=[];e:for(;ie--&&Re<Ze;){be+=c;for(var bt=-1,ft=u[be];++bt<Ae;){var At=ye[bt],Bt=At.iteratee,hn=At.type,Zr=Bt(ft);if(hn==z)ft=Zr;else if(!Zr){if(hn==U)continue e;break e}}lt[Re++]=ft}return lt}Ct.prototype=ha(zu.prototype),Ct.prototype.constructor=Ct;function Wi(u){var c=-1,m=u==null?0:u.length;for(this.clear();++c<m;){var A=u[c];this.set(A[0],A[1])}}function _v(){this.__data__=Xa?Xa(null):{},this.size=0}function bv(u){var c=this.has(u)&&delete this.__data__[u];return this.size-=c?1:0,c}function Dv(u){var c=this.__data__;if(Xa){var m=c[u];return m===l?r:m}return Rt.call(c,u)?c[u]:r}function yv(u){var c=this.__data__;return Xa?c[u]!==r:Rt.call(c,u)}function wv(u,c){var m=this.__data__;return this.size+=this.has(u)?0:1,m[u]=Xa&&c===r?l:c,this}Wi.prototype.clear=_v,Wi.prototype.delete=bv,Wi.prototype.get=Dv,Wi.prototype.has=yv,Wi.prototype.set=wv;function ri(u){var c=-1,m=u==null?0:u.length;for(this.clear();++c<m;){var A=u[c];this.set(A[0],A[1])}}function Ev(){this.__data__=[],this.size=0}function Av(u){var c=this.__data__,m=qu(c,u);if(m<0)return!1;var A=c.length-1;return m==A?c.pop():xu.call(c,m,1),--this.size,!0}function Cv(u){var c=this.__data__,m=qu(c,u);return m<0?r:c[m][1]}function Fv(u){return qu(this.__data__,u)>-1}function Sv(u,c){var m=this.__data__,A=qu(m,u);return A<0?(++this.size,m.push([u,c])):m[A][1]=c,this}ri.prototype.clear=Ev,ri.prototype.delete=Av,ri.prototype.get=Cv,ri.prototype.has=Fv,ri.prototype.set=Sv;function ni(u){var c=-1,m=u==null?0:u.length;for(this.clear();++c<m;){var A=u[c];this.set(A[0],A[1])}}function Bv(){this.size=0,this.__data__={hash:new Wi,map:new(Ja||ri),string:new Wi}}function Ov(u){var c=ts(this,u).delete(u);return this.size-=c?1:0,c}function Mv(u){return ts(this,u).get(u)}function Pv(u){return ts(this,u).has(u)}function kv(u,c){var m=ts(this,u),A=m.size;return m.set(u,c),this.size+=m.size==A?0:1,this}ni.prototype.clear=Bv,ni.prototype.delete=Ov,ni.prototype.get=Mv,ni.prototype.has=Pv,ni.prototype.set=kv;function Hi(u){var c=-1,m=u==null?0:u.length;for(this.__data__=new ni;++c<m;)this.add(u[c])}function Tv(u){return this.__data__.set(u,l),this}function Iv(u){return this.__data__.has(u)}Hi.prototype.add=Hi.prototype.push=Tv,Hi.prototype.has=Iv;function kn(u){var c=this.__data__=new ri(u);this.size=c.size}function Nv(){this.__data__=new ri,this.size=0}function xv(u){var c=this.__data__,m=c.delete(u);return this.size=c.size,m}function Lv(u){return this.__data__.get(u)}function Rv(u){return this.__data__.has(u)}function Uv(u,c){var m=this.__data__;if(m instanceof ri){var A=m.__data__;if(!Ja||A.length<i-1)return A.push([u,c]),this.size=++m.size,this;m=this.__data__=new ni(A)}return m.set(u,c),this.size=m.size,this}kn.prototype.clear=Nv,kn.prototype.delete=xv,kn.prototype.get=Lv,kn.prototype.has=Rv,kn.prototype.set=Uv;function xc(u,c){var m=gt(u),A=!m&&Zi(u),T=!m&&!A&&Fi(u),L=!m&&!A&&!T&&va(u),Y=m||A||T||L,Q=Y?Po(u.length,Yg):[],ie=Q.length;for(var be in u)(c||Rt.call(u,be))&&!(Y&&(be=="length"||T&&(be=="offset"||be=="parent")||L&&(be=="buffer"||be=="byteLength"||be=="byteOffset")||si(be,ie)))&&Q.push(be);return Q}function Lc(u){var c=u.length;return c?u[$o(0,c-1)]:r}function Vv(u,c){return rs(Qr(u),Gi(c,0,u.length))}function jv(u){return rs(Qr(u))}function Ro(u,c,m){(m!==r&&!Tn(u[c],m)||m===r&&!(c in u))&&ii(u,c,m)}function tu(u,c,m){var A=u[c];(!(Rt.call(u,c)&&Tn(A,m))||m===r&&!(c in u))&&ii(u,c,m)}function qu(u,c){for(var m=u.length;m--;)if(Tn(u[m][0],c))return m;return-1}function zv(u,c,m,A){return wi(u,function(T,L,Y){c(A,T,m(T),Y)}),A}function Rc(u,c){return u&&Wn(c,Fr(c),u)}function qv(u,c){return u&&Wn(c,en(c),u)}function ii(u,c,m){c=="__proto__"&&Lu?Lu(u,c,{configurable:!0,enumerable:!0,value:m,writable:!0}):u[c]=m}function Uo(u,c){for(var m=-1,A=c.length,T=oe(A),L=u==null;++m<A;)T[m]=L?r:bl(u,c[m]);return T}function Gi(u,c,m){return u===u&&(m!==r&&(u=u<=m?u:m),c!==r&&(u=u>=c?u:c)),u}function wn(u,c,m,A,T,L){var Y,Q=c&h,ie=c&d,be=c&g;if(m&&(Y=T?m(u,A,T,L):m(u)),Y!==r)return Y;if(!Qt(u))return u;var ye=gt(u);if(ye){if(Y=Pm(u),!Q)return Qr(u,Y)}else{var Ae=qr(u),Re=Ae==Et||Ae==ht;if(Fi(u))return oh(u,Q);if(Ae==Tt||Ae==ke||Re&&!T){if(Y=ie||Re?{}:Sh(u),!Q)return ie?Dm(u,qv(Y,u)):bm(u,Rc(Y,u))}else{if(!qt[Ae])return T?u:{};Y=km(u,Ae,Q)}}L||(L=new kn);var Ze=L.get(u);if(Ze)return Ze;L.set(u,Y),r0(u)?u.forEach(function(ft){Y.add(wn(ft,c,m,ft,u,L))}):e0(u)&&u.forEach(function(ft,At){Y.set(At,wn(ft,c,m,At,u,L))});var lt=be?ie?al:il:ie?en:Fr,bt=ye?r:lt(u);return bn(bt||u,function(ft,At){bt&&(At=ft,ft=u[At]),tu(Y,At,wn(ft,c,m,At,u,L))}),Y}function Wv(u){var c=Fr(u);return function(m){return Uc(m,u,c)}}function Uc(u,c,m){var A=m.length;if(u==null)return!A;for(u=Vt(u);A--;){var T=m[A],L=c[T],Y=u[T];if(Y===r&&!(T in u)||!L(Y))return!1}return!0}function Vc(u,c,m){if(typeof u!="function")throw new Dn(o);return ou(function(){u.apply(r,m)},c)}function ru(u,c,m,A){var T=-1,L=Fu,Y=!0,Q=u.length,ie=[],be=c.length;if(!Q)return ie;m&&(c=Kt(c,ln(m))),A?(L=Co,Y=!1):c.length>=i&&(L=Ya,Y=!1,c=new Hi(c));e:for(;++T<Q;){var ye=u[T],Ae=m==null?ye:m(ye);if(ye=A||ye!==0?ye:0,Y&&Ae===Ae){for(var Re=be;Re--;)if(c[Re]===Ae)continue e;ie.push(ye)}else L(c,Ae,A)||ie.push(ye)}return ie}var wi=dh(qn),jc=dh(jo,!0);function Hv(u,c){var m=!0;return wi(u,function(A,T,L){return m=!!c(A,T,L),m}),m}function Wu(u,c,m){for(var A=-1,T=u.length;++A<T;){var L=u[A],Y=c(L);if(Y!=null&&(Q===r?Y===Y&&!cn(Y):m(Y,Q)))var Q=Y,ie=L}return ie}function Gv(u,c,m,A){var T=u.length;for(m=_t(m),m<0&&(m=-m>T?0:T+m),A=A===r||A>T?T:_t(A),A<0&&(A+=T),A=m>A?0:i0(A);m<A;)u[m++]=c;return u}function zc(u,c){var m=[];return wi(u,function(A,T,L){c(A,T,L)&&m.push(A)}),m}function kr(u,c,m,A,T){var L=-1,Y=u.length;for(m||(m=Im),T||(T=[]);++L<Y;){var Q=u[L];c>0&&m(Q)?c>1?kr(Q,c-1,m,A,T):bi(T,Q):A||(T[T.length]=Q)}return T}var Vo=ph(),qc=ph(!0);function qn(u,c){return u&&Vo(u,c,Fr)}function jo(u,c){return u&&qc(u,c,Fr)}function Hu(u,c){return _i(c,function(m){return oi(u[m])})}function Ki(u,c){c=Ai(c,u);for(var m=0,A=c.length;u!=null&&m<A;)u=u[Hn(c[m++])];return m&&m==A?u:r}function Wc(u,c,m){var A=c(u);return gt(u)?A:bi(A,m(u))}function $r(u){return u==null?u===r?Z:dr:qi&&qi in Vt(u)?Bm(u):jm(u)}function zo(u,c){return u>c}function Kv(u,c){return u!=null&&Rt.call(u,c)}function $v(u,c){return u!=null&&c in Vt(u)}function Yv(u,c,m){return u>=zr(c,m)&&u<br(c,m)}function qo(u,c,m){for(var A=m?Co:Fu,T=u[0].length,L=u.length,Y=L,Q=oe(L),ie=1/0,be=[];Y--;){var ye=u[Y];Y&&c&&(ye=Kt(ye,ln(c))),ie=zr(ye.length,ie),Q[Y]=!m&&(c||T>=120&&ye.length>=120)?new Hi(Y&&ye):r}ye=u[0];var Ae=-1,Re=Q[0];e:for(;++Ae<T&&be.length<ie;){var Ze=ye[Ae],lt=c?c(Ze):Ze;if(Ze=m||Ze!==0?Ze:0,!(Re?Ya(Re,lt):A(be,lt,m))){for(Y=L;--Y;){var bt=Q[Y];if(!(bt?Ya(bt,lt):A(u[Y],lt,m)))continue e}Re&&Re.push(lt),be.push(Ze)}}return be}function Zv(u,c,m,A){return qn(u,function(T,L,Y){c(A,m(T),L,Y)}),A}function nu(u,c,m){c=Ai(c,u),u=Ph(u,c);var A=u==null?u:u[Hn(An(c))];return A==null?r:on(A,u,m)}function Hc(u){return ur(u)&&$r(u)==ke}function Jv(u){return ur(u)&&$r(u)==ue}function Qv(u){return ur(u)&&$r(u)==Je}function iu(u,c,m,A,T){return u===c?!0:u==null||c==null||!ur(u)&&!ur(c)?u!==u&&c!==c:Xv(u,c,m,A,iu,T)}function Xv(u,c,m,A,T,L){var Y=gt(u),Q=gt(c),ie=Y?Ue:qr(u),be=Q?Ue:qr(c);ie=ie==ke?Tt:ie,be=be==ke?Tt:be;var ye=ie==Tt,Ae=be==Tt,Re=ie==be;if(Re&&Fi(u)){if(!Fi(c))return!1;Y=!0,ye=!1}if(Re&&!ye)return L||(L=new kn),Y||va(u)?Ah(u,c,m,A,T,L):Fm(u,c,ie,m,A,T,L);if(!(m&b)){var Ze=ye&&Rt.call(u,"__wrapped__"),lt=Ae&&Rt.call(c,"__wrapped__");if(Ze||lt){var bt=Ze?u.value():u,ft=lt?c.value():c;return L||(L=new kn),T(bt,ft,m,A,L)}}return Re?(L||(L=new kn),Sm(u,c,m,A,T,L)):!1}function em(u){return ur(u)&&qr(u)==at}function Wo(u,c,m,A){var T=m.length,L=T,Y=!A;if(u==null)return!L;for(u=Vt(u);T--;){var Q=m[T];if(Y&&Q[2]?Q[1]!==u[Q[0]]:!(Q[0]in u))return!1}for(;++T<L;){Q=m[T];var ie=Q[0],be=u[ie],ye=Q[1];if(Y&&Q[2]){if(be===r&&!(ie in u))return!1}else{var Ae=new kn;if(A)var Re=A(be,ye,ie,u,c,Ae);if(!(Re===r?iu(ye,be,b|v,A,Ae):Re))return!1}}return!0}function Gc(u){if(!Qt(u)||xm(u))return!1;var c=oi(u)?ev:Va;return c.test(Yi(u))}function tm(u){return ur(u)&&$r(u)==Ot}function rm(u){return ur(u)&&qr(u)==Ft}function nm(u){return ur(u)&&os(u.length)&&!!Ht[$r(u)]}function Kc(u){return typeof u=="function"?u:u==null?tn:typeof u=="object"?gt(u)?Zc(u[0],u[1]):Yc(u):g0(u)}function Ho(u){if(!su(u))return uv(u);var c=[];for(var m in Vt(u))Rt.call(u,m)&&m!="constructor"&&c.push(m);return c}function im(u){if(!Qt(u))return Vm(u);var c=su(u),m=[];for(var A in u)A=="constructor"&&(c||!Rt.call(u,A))||m.push(A);return m}function Go(u,c){return u<c}function $c(u,c){var m=-1,A=Xr(u)?oe(u.length):[];return wi(u,function(T,L,Y){A[++m]=c(T,L,Y)}),A}function Yc(u){var c=sl(u);return c.length==1&&c[0][2]?Oh(c[0][0],c[0][1]):function(m){return m===u||Wo(m,u,c)}}function Zc(u,c){return ll(u)&&Bh(c)?Oh(Hn(u),c):function(m){var A=bl(m,u);return A===r&&A===c?Dl(m,u):iu(c,A,b|v)}}function Gu(u,c,m,A,T){u!==c&&Vo(c,function(L,Y){if(T||(T=new kn),Qt(L))am(u,c,Y,m,Gu,A,T);else{var Q=A?A(cl(u,Y),L,Y+"",u,c,T):r;Q===r&&(Q=L),Ro(u,Y,Q)}},en)}function am(u,c,m,A,T,L,Y){var Q=cl(u,m),ie=cl(c,m),be=Y.get(ie);if(be){Ro(u,m,be);return}var ye=L?L(Q,ie,m+"",u,c,Y):r,Ae=ye===r;if(Ae){var Re=gt(ie),Ze=!Re&&Fi(ie),lt=!Re&&!Ze&&va(ie);ye=ie,Re||Ze||lt?gt(Q)?ye=Q:cr(Q)?ye=Qr(Q):Ze?(Ae=!1,ye=oh(ie,!0)):lt?(Ae=!1,ye=lh(ie,!0)):ye=[]:lu(ie)||Zi(ie)?(ye=Q,Zi(Q)?ye=a0(Q):(!Qt(Q)||oi(Q))&&(ye=Sh(ie))):Ae=!1}Ae&&(Y.set(ie,ye),T(ye,ie,A,L,Y),Y.delete(ie)),Ro(u,m,ye)}function Jc(u,c){var m=u.length;if(m)return c+=c<0?m:0,si(c,m)?u[c]:r}function Qc(u,c,m){c.length?c=Kt(c,function(L){return gt(L)?function(Y){return Ki(Y,L.length===1?L[0]:L)}:L}):c=[tn];var A=-1;c=Kt(c,ln(ut()));var T=$c(u,function(L,Y,Q){var ie=Kt(c,function(be){return be(L)});return{criteria:ie,index:++A,value:L}});return kg(T,function(L,Y){return _m(L,Y,m)})}function um(u,c){return Xc(u,c,function(m,A){return Dl(u,A)})}function Xc(u,c,m){for(var A=-1,T=c.length,L={};++A<T;){var Y=c[A],Q=Ki(u,Y);m(Q,Y)&&au(L,Ai(Y,u),Q)}return L}function sm(u){return function(c){return Ki(c,u)}}function Ko(u,c,m,A){var T=A?Pg:aa,L=-1,Y=c.length,Q=u;for(u===c&&(c=Qr(c)),m&&(Q=Kt(u,ln(m)));++L<Y;)for(var ie=0,be=c[L],ye=m?m(be):be;(ie=T(Q,ye,ie,A))>-1;)Q!==u&&xu.call(Q,ie,1),xu.call(u,ie,1);return u}function eh(u,c){for(var m=u?c.length:0,A=m-1;m--;){var T=c[m];if(m==A||T!==L){var L=T;si(T)?xu.call(u,T,1):Jo(u,T)}}return u}function $o(u,c){return u+Uu(Ic()*(c-u+1))}function om(u,c,m,A){for(var T=-1,L=br(Ru((c-u)/(m||1)),0),Y=oe(L);L--;)Y[A?L:++T]=u,u+=m;return Y}function Yo(u,c){var m="";if(!u||c<1||c>ae)return m;do c%2&&(m+=u),c=Uu(c/2),c&&(u+=u);while(c);return m}function yt(u,c){return hl(Mh(u,c,tn),u+"")}function lm(u){return Lc(ma(u))}function fm(u,c){var m=ma(u);return rs(m,Gi(c,0,m.length))}function au(u,c,m,A){if(!Qt(u))return u;c=Ai(c,u);for(var T=-1,L=c.length,Y=L-1,Q=u;Q!=null&&++T<L;){var ie=Hn(c[T]),be=m;if(ie==="__proto__"||ie==="constructor"||ie==="prototype")return u;if(T!=Y){var ye=Q[ie];be=A?A(ye,ie,Q):r,be===r&&(be=Qt(ye)?ye:si(c[T+1])?[]:{})}tu(Q,ie,be),Q=Q[ie]}return u}var th=Vu?function(u,c){return Vu.set(u,c),u}:tn,cm=Lu?function(u,c){return Lu(u,"toString",{configurable:!0,enumerable:!1,value:wl(c),writable:!0})}:tn;function hm(u){return rs(ma(u))}function En(u,c,m){var A=-1,T=u.length;c<0&&(c=-c>T?0:T+c),m=m>T?T:m,m<0&&(m+=T),T=c>m?0:m-c>>>0,c>>>=0;for(var L=oe(T);++A<T;)L[A]=u[A+c];return L}function dm(u,c){var m;return wi(u,function(A,T,L){return m=c(A,T,L),!m}),!!m}function Ku(u,c,m){var A=0,T=u==null?A:u.length;if(typeof c=="number"&&c===c&&T<=Fe){for(;A<T;){var L=A+T>>>1,Y=u[L];Y!==null&&!cn(Y)&&(m?Y<=c:Y<c)?A=L+1:T=L}return T}return Zo(u,c,tn,m)}function Zo(u,c,m,A){var T=0,L=u==null?0:u.length;if(L===0)return 0;c=m(c);for(var Y=c!==c,Q=c===null,ie=cn(c),be=c===r;T<L;){var ye=Uu((T+L)/2),Ae=m(u[ye]),Re=Ae!==r,Ze=Ae===null,lt=Ae===Ae,bt=cn(Ae);if(Y)var ft=A||lt;else be?ft=lt&&(A||Re):Q?ft=lt&&Re&&(A||!Ze):ie?ft=lt&&Re&&!Ze&&(A||!bt):Ze||bt?ft=!1:ft=A?Ae<=c:Ae<c;ft?T=ye+1:L=ye}return zr(L,we)}function rh(u,c){for(var m=-1,A=u.length,T=0,L=[];++m<A;){var Y=u[m],Q=c?c(Y):Y;if(!m||!Tn(Q,ie)){var ie=Q;L[T++]=Y===0?0:Y}}return L}function nh(u){return typeof u=="number"?u:cn(u)?se:+u}function fn(u){if(typeof u=="string")return u;if(gt(u))return Kt(u,fn)+"";if(cn(u))return Nc?Nc.call(u):"";var c=u+"";return c=="0"&&1/u==-J?"-0":c}function Ei(u,c,m){var A=-1,T=Fu,L=u.length,Y=!0,Q=[],ie=Q;if(m)Y=!1,T=Co;else if(L>=i){var be=c?null:Am(u);if(be)return Bu(be);Y=!1,T=Ya,ie=new Hi}else ie=c?[]:Q;e:for(;++A<L;){var ye=u[A],Ae=c?c(ye):ye;if(ye=m||ye!==0?ye:0,Y&&Ae===Ae){for(var Re=ie.length;Re--;)if(ie[Re]===Ae)continue e;c&&ie.push(Ae),Q.push(ye)}else T(ie,Ae,m)||(ie!==Q&&ie.push(Ae),Q.push(ye))}return Q}function Jo(u,c){return c=Ai(c,u),u=Ph(u,c),u==null||delete u[Hn(An(c))]}function ih(u,c,m,A){return au(u,c,m(Ki(u,c)),A)}function $u(u,c,m,A){for(var T=u.length,L=A?T:-1;(A?L--:++L<T)&&c(u[L],L,u););return m?En(u,A?0:L,A?L+1:T):En(u,A?L+1:0,A?T:L)}function ah(u,c){var m=u;return m instanceof Ct&&(m=m.value()),Fo(c,function(A,T){return T.func.apply(T.thisArg,bi([A],T.args))},m)}function Qo(u,c,m){var A=u.length;if(A<2)return A?Ei(u[0]):[];for(var T=-1,L=oe(A);++T<A;)for(var Y=u[T],Q=-1;++Q<A;)Q!=T&&(L[T]=ru(L[T]||Y,u[Q],c,m));return Ei(kr(L,1),c,m)}function uh(u,c,m){for(var A=-1,T=u.length,L=c.length,Y={};++A<T;){var Q=A<L?c[A]:r;m(Y,u[A],Q)}return Y}function Xo(u){return cr(u)?u:[]}function el(u){return typeof u=="function"?u:tn}function Ai(u,c){return gt(u)?u:ll(u,c)?[u]:Nh(Nt(u))}var pm=yt;function Ci(u,c,m){var A=u.length;return m=m===r?A:m,!c&&m>=A?u:En(u,c,m)}var sh=tv||function(u){return Pr.clearTimeout(u)};function oh(u,c){if(c)return u.slice();var m=u.length,A=Oc?Oc(m):new u.constructor(m);return u.copy(A),A}function tl(u){var c=new u.constructor(u.byteLength);return new Iu(c).set(new Iu(u)),c}function gm(u,c){var m=c?tl(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.byteLength)}function vm(u){var c=new u.constructor(u.source,ra.exec(u));return c.lastIndex=u.lastIndex,c}function mm(u){return eu?Vt(eu.call(u)):{}}function lh(u,c){var m=c?tl(u.buffer):u.buffer;return new u.constructor(m,u.byteOffset,u.length)}function fh(u,c){if(u!==c){var m=u!==r,A=u===null,T=u===u,L=cn(u),Y=c!==r,Q=c===null,ie=c===c,be=cn(c);if(!Q&&!be&&!L&&u>c||L&&Y&&ie&&!Q&&!be||A&&Y&&ie||!m&&ie||!T)return 1;if(!A&&!L&&!be&&u<c||be&&m&&T&&!A&&!L||Q&&m&&T||!Y&&T||!ie)return-1}return 0}function _m(u,c,m){for(var A=-1,T=u.criteria,L=c.criteria,Y=T.length,Q=m.length;++A<Y;){var ie=fh(T[A],L[A]);if(ie){if(A>=Q)return ie;var be=m[A];return ie*(be=="desc"?-1:1)}}return u.index-c.index}function ch(u,c,m,A){for(var T=-1,L=u.length,Y=m.length,Q=-1,ie=c.length,be=br(L-Y,0),ye=oe(ie+be),Ae=!A;++Q<ie;)ye[Q]=c[Q];for(;++T<Y;)(Ae||T<L)&&(ye[m[T]]=u[T]);for(;be--;)ye[Q++]=u[T++];return ye}function hh(u,c,m,A){for(var T=-1,L=u.length,Y=-1,Q=m.length,ie=-1,be=c.length,ye=br(L-Q,0),Ae=oe(ye+be),Re=!A;++T<ye;)Ae[T]=u[T];for(var Ze=T;++ie<be;)Ae[Ze+ie]=c[ie];for(;++Y<Q;)(Re||T<L)&&(Ae[Ze+m[Y]]=u[T++]);return Ae}function Qr(u,c){var m=-1,A=u.length;for(c||(c=oe(A));++m<A;)c[m]=u[m];return c}function Wn(u,c,m,A){var T=!m;m||(m={});for(var L=-1,Y=c.length;++L<Y;){var Q=c[L],ie=A?A(m[Q],u[Q],Q,m,u):r;ie===r&&(ie=u[Q]),T?ii(m,Q,ie):tu(m,Q,ie)}return m}function bm(u,c){return Wn(u,ol(u),c)}function Dm(u,c){return Wn(u,Ch(u),c)}function Yu(u,c){return function(m,A){var T=gt(m)?Cg:zv,L=c?c():{};return T(m,u,ut(A,2),L)}}function da(u){return yt(function(c,m){var A=-1,T=m.length,L=T>1?m[T-1]:r,Y=T>2?m[2]:r;for(L=u.length>3&&typeof L=="function"?(T--,L):r,Y&&Yr(m[0],m[1],Y)&&(L=T<3?r:L,T=1),c=Vt(c);++A<T;){var Q=m[A];Q&&u(c,Q,A,L)}return c})}function dh(u,c){return function(m,A){if(m==null)return m;if(!Xr(m))return u(m,A);for(var T=m.length,L=c?T:-1,Y=Vt(m);(c?L--:++L<T)&&A(Y[L],L,Y)!==!1;);return m}}function ph(u){return function(c,m,A){for(var T=-1,L=Vt(c),Y=A(c),Q=Y.length;Q--;){var ie=Y[u?Q:++T];if(m(L[ie],ie,L)===!1)break}return c}}function ym(u,c,m){var A=c&_,T=uu(u);function L(){var Y=this&&this!==Pr&&this instanceof L?T:u;return Y.apply(A?m:this,arguments)}return L}function gh(u){return function(c){c=Nt(c);var m=ua(c)?Pn(c):r,A=m?m[0]:c.charAt(0),T=m?Ci(m,1).join(""):c.slice(1);return A[u]()+T}}function pa(u){return function(c){return Fo(d0(h0(c).replace(cg,"")),u,"")}}function uu(u){return function(){var c=arguments;switch(c.length){case 0:return new u;case 1:return new u(c[0]);case 2:return new u(c[0],c[1]);case 3:return new u(c[0],c[1],c[2]);case 4:return new u(c[0],c[1],c[2],c[3]);case 5:return new u(c[0],c[1],c[2],c[3],c[4]);case 6:return new u(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new u(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var m=ha(u.prototype),A=u.apply(m,c);return Qt(A)?A:m}}function wm(u,c,m){var A=uu(u);function T(){for(var L=arguments.length,Y=oe(L),Q=L,ie=ga(T);Q--;)Y[Q]=arguments[Q];var be=L<3&&Y[0]!==ie&&Y[L-1]!==ie?[]:Di(Y,ie);if(L-=be.length,L<m)return Dh(u,c,Zu,T.placeholder,r,Y,be,r,r,m-L);var ye=this&&this!==Pr&&this instanceof T?A:u;return on(ye,this,Y)}return T}function vh(u){return function(c,m,A){var T=Vt(c);if(!Xr(c)){var L=ut(m,3);c=Fr(c),m=function(Q){return L(T[Q],Q,T)}}var Y=u(c,m,A);return Y>-1?T[L?c[Y]:Y]:r}}function mh(u){return ui(function(c){var m=c.length,A=m,T=yn.prototype.thru;for(u&&c.reverse();A--;){var L=c[A];if(typeof L!="function")throw new Dn(o);if(T&&!Y&&es(L)=="wrapper")var Y=new yn([],!0)}for(A=Y?A:m;++A<m;){L=c[A];var Q=es(L),ie=Q=="wrapper"?ul(L):r;ie&&fl(ie[0])&&ie[1]==(k|w|E|O)&&!ie[4].length&&ie[9]==1?Y=Y[es(ie[0])].apply(Y,ie[3]):Y=L.length==1&&fl(L)?Y[Q]():Y.thru(L)}return function(){var be=arguments,ye=be[0];if(Y&&be.length==1&&gt(ye))return Y.plant(ye).value();for(var Ae=0,Re=m?c[Ae].apply(this,be):ye;++Ae<m;)Re=c[Ae].call(this,Re);return Re}})}function Zu(u,c,m,A,T,L,Y,Q,ie,be){var ye=c&k,Ae=c&_,Re=c&D,Ze=c&(w|C),lt=c&x,bt=Re?r:uu(u);function ft(){for(var At=arguments.length,Bt=oe(At),hn=At;hn--;)Bt[hn]=arguments[hn];if(Ze)var Zr=ga(ft),dn=Ig(Bt,Zr);if(A&&(Bt=ch(Bt,A,T,Ze)),L&&(Bt=hh(Bt,L,Y,Ze)),At-=dn,Ze&&At<be){var hr=Di(Bt,Zr);return Dh(u,c,Zu,ft.placeholder,m,Bt,hr,Q,ie,be-At)}var In=Ae?m:this,fi=Re?In[u]:u;return At=Bt.length,Q?Bt=zm(Bt,Q):lt&&At>1&&Bt.reverse(),ye&&ie<At&&(Bt.length=ie),this&&this!==Pr&&this instanceof ft&&(fi=bt||uu(fi)),fi.apply(In,Bt)}return ft}function _h(u,c){return function(m,A){return Zv(m,u,c(A),{})}}function Ju(u,c){return function(m,A){var T;if(m===r&&A===r)return c;if(m!==r&&(T=m),A!==r){if(T===r)return A;typeof m=="string"||typeof A=="string"?(m=fn(m),A=fn(A)):(m=nh(m),A=nh(A)),T=u(m,A)}return T}}function rl(u){return ui(function(c){return c=Kt(c,ln(ut())),yt(function(m){var A=this;return u(c,function(T){return on(T,A,m)})})})}function Qu(u,c){c=c===r?" ":fn(c);var m=c.length;if(m<2)return m?Yo(c,u):c;var A=Yo(c,Ru(u/sa(c)));return ua(c)?Ci(Pn(A),0,u).join(""):A.slice(0,u)}function Em(u,c,m,A){var T=c&_,L=uu(u);function Y(){for(var Q=-1,ie=arguments.length,be=-1,ye=A.length,Ae=oe(ye+ie),Re=this&&this!==Pr&&this instanceof Y?L:u;++be<ye;)Ae[be]=A[be];for(;ie--;)Ae[be++]=arguments[++Q];return on(Re,T?m:this,Ae)}return Y}function bh(u){return function(c,m,A){return A&&typeof A!="number"&&Yr(c,m,A)&&(m=A=r),c=li(c),m===r?(m=c,c=0):m=li(m),A=A===r?c<m?1:-1:li(A),om(c,m,A,u)}}function Xu(u){return function(c,m){return typeof c=="string"&&typeof m=="string"||(c=Cn(c),m=Cn(m)),u(c,m)}}function Dh(u,c,m,A,T,L,Y,Q,ie,be){var ye=c&w,Ae=ye?Y:r,Re=ye?r:Y,Ze=ye?L:r,lt=ye?r:L;c|=ye?E:B,c&=~(ye?B:E),c&S||(c&=~(_|D));var bt=[u,c,T,Ze,Ae,lt,Re,Q,ie,be],ft=m.apply(r,bt);return fl(u)&&kh(ft,bt),ft.placeholder=A,Th(ft,u,c)}function nl(u){var c=_r[u];return function(m,A){if(m=Cn(m),A=A==null?0:zr(_t(A),292),A&&Tc(m)){var T=(Nt(m)+"e").split("e"),L=c(T[0]+"e"+(+T[1]+A));return T=(Nt(L)+"e").split("e"),+(T[0]+"e"+(+T[1]-A))}return c(m)}}var Am=fa&&1/Bu(new fa([,-0]))[1]==J?function(u){return new fa(u)}:Cl;function yh(u){return function(c){var m=qr(c);return m==at?To(c):m==Ft?jg(c):Tg(c,u(c))}}function ai(u,c,m,A,T,L,Y,Q){var ie=c&D;if(!ie&&typeof u!="function")throw new Dn(o);var be=A?A.length:0;if(be||(c&=~(E|B),A=T=r),Y=Y===r?Y:br(_t(Y),0),Q=Q===r?Q:_t(Q),be-=T?T.length:0,c&B){var ye=A,Ae=T;A=T=r}var Re=ie?r:ul(u),Ze=[u,c,m,A,T,ye,Ae,L,Y,Q];if(Re&&Um(Ze,Re),u=Ze[0],c=Ze[1],m=Ze[2],A=Ze[3],T=Ze[4],Q=Ze[9]=Ze[9]===r?ie?0:u.length:br(Ze[9]-be,0),!Q&&c&(w|C)&&(c&=~(w|C)),!c||c==_)var lt=ym(u,c,m);else c==w||c==C?lt=wm(u,c,Q):(c==E||c==(_|E))&&!T.length?lt=Em(u,c,m,A):lt=Zu.apply(r,Ze);var bt=Re?th:kh;return Th(bt(lt,Ze),u,c)}function wh(u,c,m,A){return u===r||Tn(u,la[m])&&!Rt.call(A,m)?c:u}function Eh(u,c,m,A,T,L){return Qt(u)&&Qt(c)&&(L.set(c,u),Gu(u,c,r,Eh,L),L.delete(c)),u}function Cm(u){return lu(u)?r:u}function Ah(u,c,m,A,T,L){var Y=m&b,Q=u.length,ie=c.length;if(Q!=ie&&!(Y&&ie>Q))return!1;var be=L.get(u),ye=L.get(c);if(be&&ye)return be==c&&ye==u;var Ae=-1,Re=!0,Ze=m&v?new Hi:r;for(L.set(u,c),L.set(c,u);++Ae<Q;){var lt=u[Ae],bt=c[Ae];if(A)var ft=Y?A(bt,lt,Ae,c,u,L):A(lt,bt,Ae,u,c,L);if(ft!==r){if(ft)continue;Re=!1;break}if(Ze){if(!So(c,function(At,Bt){if(!Ya(Ze,Bt)&&(lt===At||T(lt,At,m,A,L)))return Ze.push(Bt)})){Re=!1;break}}else if(!(lt===bt||T(lt,bt,m,A,L))){Re=!1;break}}return L.delete(u),L.delete(c),Re}function Fm(u,c,m,A,T,L,Y){switch(m){case de:if(u.byteLength!=c.byteLength||u.byteOffset!=c.byteOffset)return!1;u=u.buffer,c=c.buffer;case ue:return!(u.byteLength!=c.byteLength||!L(new Iu(u),new Iu(c)));case Ke:case Je:case Pt:return Tn(+u,+c);case Dt:return u.name==c.name&&u.message==c.message;case Ot:case $t:return u==c+"";case at:var Q=To;case Ft:var ie=A&b;if(Q||(Q=Bu),u.size!=c.size&&!ie)return!1;var be=Y.get(u);if(be)return be==c;A|=v,Y.set(u,c);var ye=Ah(Q(u),Q(c),A,T,L,Y);return Y.delete(u),ye;case G:if(eu)return eu.call(u)==eu.call(c)}return!1}function Sm(u,c,m,A,T,L){var Y=m&b,Q=il(u),ie=Q.length,be=il(c),ye=be.length;if(ie!=ye&&!Y)return!1;for(var Ae=ie;Ae--;){var Re=Q[Ae];if(!(Y?Re in c:Rt.call(c,Re)))return!1}var Ze=L.get(u),lt=L.get(c);if(Ze&&lt)return Ze==c&&lt==u;var bt=!0;L.set(u,c),L.set(c,u);for(var ft=Y;++Ae<ie;){Re=Q[Ae];var At=u[Re],Bt=c[Re];if(A)var hn=Y?A(Bt,At,Re,c,u,L):A(At,Bt,Re,u,c,L);if(!(hn===r?At===Bt||T(At,Bt,m,A,L):hn)){bt=!1;break}ft||(ft=Re=="constructor")}if(bt&&!ft){var Zr=u.constructor,dn=c.constructor;Zr!=dn&&"constructor"in u&&"constructor"in c&&!(typeof Zr=="function"&&Zr instanceof Zr&&typeof dn=="function"&&dn instanceof dn)&&(bt=!1)}return L.delete(u),L.delete(c),bt}function ui(u){return hl(Mh(u,r,Uh),u+"")}function il(u){return Wc(u,Fr,ol)}function al(u){return Wc(u,en,Ch)}var ul=Vu?function(u){return Vu.get(u)}:Cl;function es(u){for(var c=u.name+"",m=ca[c],A=Rt.call(ca,c)?m.length:0;A--;){var T=m[A],L=T.func;if(L==null||L==u)return T.name}return c}function ga(u){var c=Rt.call(N,"placeholder")?N:u;return c.placeholder}function ut(){var u=N.iteratee||El;return u=u===El?Kc:u,arguments.length?u(arguments[0],arguments[1]):u}function ts(u,c){var m=u.__data__;return Nm(c)?m[typeof c=="string"?"string":"hash"]:m.map}function sl(u){for(var c=Fr(u),m=c.length;m--;){var A=c[m],T=u[A];c[m]=[A,T,Bh(T)]}return c}function $i(u,c){var m=Rg(u,c);return Gc(m)?m:r}function Bm(u){var c=Rt.call(u,qi),m=u[qi];try{u[qi]=r;var A=!0}catch{}var T=ku.call(u);return A&&(c?u[qi]=m:delete u[qi]),T}var ol=No?function(u){return u==null?[]:(u=Vt(u),_i(No(u),function(c){return Pc.call(u,c)}))}:Fl,Ch=No?function(u){for(var c=[];u;)bi(c,ol(u)),u=Nu(u);return c}:Fl,qr=$r;(xo&&qr(new xo(new ArrayBuffer(1)))!=de||Ja&&qr(new Ja)!=at||Lo&&qr(Lo.resolve())!=Te||fa&&qr(new fa)!=Ft||Qa&&qr(new Qa)!=ee)&&(qr=function(u){var c=$r(u),m=c==Tt?u.constructor:r,A=m?Yi(m):"";if(A)switch(A){case fv:return de;case cv:return at;case hv:return Te;case dv:return Ft;case pv:return ee}return c});function Om(u,c,m){for(var A=-1,T=m.length;++A<T;){var L=m[A],Y=L.size;switch(L.type){case"drop":u+=Y;break;case"dropRight":c-=Y;break;case"take":c=zr(c,u+Y);break;case"takeRight":u=br(u,c-Y);break}}return{start:u,end:c}}function Mm(u){var c=u.match(gi);return c?c[1].split(vn):[]}function Fh(u,c,m){c=Ai(c,u);for(var A=-1,T=c.length,L=!1;++A<T;){var Y=Hn(c[A]);if(!(L=u!=null&&m(u,Y)))break;u=u[Y]}return L||++A!=T?L:(T=u==null?0:u.length,!!T&&os(T)&&si(Y,T)&&(gt(u)||Zi(u)))}function Pm(u){var c=u.length,m=new u.constructor(c);return c&&typeof u[0]=="string"&&Rt.call(u,"index")&&(m.index=u.index,m.input=u.input),m}function Sh(u){return typeof u.constructor=="function"&&!su(u)?ha(Nu(u)):{}}function km(u,c,m){var A=u.constructor;switch(c){case ue:return tl(u);case Ke:case Je:return new A(+u);case de:return gm(u,m);case fe:case pe:case Pe:case He:case ct:case Ie:case Yt:case zt:case ir:return lh(u,m);case at:return new A;case Pt:case $t:return new A(u);case Ot:return vm(u);case Ft:return new A;case G:return mm(u)}}function Tm(u,c){var m=c.length;if(!m)return u;var A=m-1;return c[A]=(m>1?"& ":"")+c[A],c=c.join(m>2?", ":" "),u.replace(Na,`{
/* [wrapped with `+c+`] */
`)}function Im(u){return gt(u)||Zi(u)||!!(kc&&u&&u[kc])}function si(u,c){var m=typeof u;return c=c??ae,!!c&&(m=="number"||m!="symbol"&&za.test(u))&&u>-1&&u%1==0&&u<c}function Yr(u,c,m){if(!Qt(m))return!1;var A=typeof c;return(A=="number"?Xr(m)&&si(c,m.length):A=="string"&&c in m)?Tn(m[c],u):!1}function ll(u,c){if(gt(u))return!1;var m=typeof u;return m=="number"||m=="symbol"||m=="boolean"||u==null||cn(u)?!0:Vn.test(u)||!Un.test(u)||c!=null&&u in Vt(c)}function Nm(u){var c=typeof u;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?u!=="__proto__":u===null}function fl(u){var c=es(u),m=N[c];if(typeof m!="function"||!(c in Ct.prototype))return!1;if(u===m)return!0;var A=ul(m);return!!A&&u===A[0]}function xm(u){return!!Bc&&Bc in u}var Lm=Mu?oi:Sl;function su(u){var c=u&&u.constructor,m=typeof c=="function"&&c.prototype||la;return u===m}function Bh(u){return u===u&&!Qt(u)}function Oh(u,c){return function(m){return m==null?!1:m[u]===c&&(c!==r||u in Vt(m))}}function Rm(u){var c=us(u,function(A){return m.size===p&&m.clear(),A}),m=c.cache;return c}function Um(u,c){var m=u[1],A=c[1],T=m|A,L=T<(_|D|k),Y=A==k&&m==w||A==k&&m==O&&u[7].length<=c[8]||A==(k|O)&&c[7].length<=c[8]&&m==w;if(!(L||Y))return u;A&_&&(u[2]=c[2],T|=m&_?0:S);var Q=c[3];if(Q){var ie=u[3];u[3]=ie?ch(ie,Q,c[4]):Q,u[4]=ie?Di(u[3],f):c[4]}return Q=c[5],Q&&(ie=u[5],u[5]=ie?hh(ie,Q,c[6]):Q,u[6]=ie?Di(u[5],f):c[6]),Q=c[7],Q&&(u[7]=Q),A&k&&(u[8]=u[8]==null?c[8]:zr(u[8],c[8])),u[9]==null&&(u[9]=c[9]),u[0]=c[0],u[1]=T,u}function Vm(u){var c=[];if(u!=null)for(var m in Vt(u))c.push(m);return c}function jm(u){return ku.call(u)}function Mh(u,c,m){return c=br(c===r?u.length-1:c,0),function(){for(var A=arguments,T=-1,L=br(A.length-c,0),Y=oe(L);++T<L;)Y[T]=A[c+T];T=-1;for(var Q=oe(c+1);++T<c;)Q[T]=A[T];return Q[c]=m(Y),on(u,this,Q)}}function Ph(u,c){return c.length<2?u:Ki(u,En(c,0,-1))}function zm(u,c){for(var m=u.length,A=zr(c.length,m),T=Qr(u);A--;){var L=c[A];u[A]=si(L,m)?T[L]:r}return u}function cl(u,c){if(!(c==="constructor"&&typeof u[c]=="function")&&c!="__proto__")return u[c]}var kh=Ih(th),ou=nv||function(u,c){return Pr.setTimeout(u,c)},hl=Ih(cm);function Th(u,c,m){var A=c+"";return hl(u,Tm(A,qm(Mm(A),m)))}function Ih(u){var c=0,m=0;return function(){var A=sv(),T=j-(A-m);if(m=A,T>0){if(++c>=X)return arguments[0]}else c=0;return u.apply(r,arguments)}}function rs(u,c){var m=-1,A=u.length,T=A-1;for(c=c===r?A:c;++m<c;){var L=$o(m,T),Y=u[L];u[L]=u[m],u[m]=Y}return u.length=c,u}var Nh=Rm(function(u){var c=[];return u.charCodeAt(0)===46&&c.push(""),u.replace(ta,function(m,A,T,L){c.push(T?L.replace(xa,"$1"):A||m)}),c});function Hn(u){if(typeof u=="string"||cn(u))return u;var c=u+"";return c=="0"&&1/u==-J?"-0":c}function Yi(u){if(u!=null){try{return Pu.call(u)}catch{}try{return u+""}catch{}}return""}function qm(u,c){return bn(xe,function(m){var A="_."+m[0];c&m[1]&&!Fu(u,A)&&u.push(A)}),u.sort()}function xh(u){if(u instanceof Ct)return u.clone();var c=new yn(u.__wrapped__,u.__chain__);return c.__actions__=Qr(u.__actions__),c.__index__=u.__index__,c.__values__=u.__values__,c}function Wm(u,c,m){(m?Yr(u,c,m):c===r)?c=1:c=br(_t(c),0);var A=u==null?0:u.length;if(!A||c<1)return[];for(var T=0,L=0,Y=oe(Ru(A/c));T<A;)Y[L++]=En(u,T,T+=c);return Y}function Hm(u){for(var c=-1,m=u==null?0:u.length,A=0,T=[];++c<m;){var L=u[c];L&&(T[A++]=L)}return T}function Gm(){var u=arguments.length;if(!u)return[];for(var c=oe(u-1),m=arguments[0],A=u;A--;)c[A-1]=arguments[A];return bi(gt(m)?Qr(m):[m],kr(c,1))}var Km=yt(function(u,c){return cr(u)?ru(u,kr(c,1,cr,!0)):[]}),$m=yt(function(u,c){var m=An(c);return cr(m)&&(m=r),cr(u)?ru(u,kr(c,1,cr,!0),ut(m,2)):[]}),Ym=yt(function(u,c){var m=An(c);return cr(m)&&(m=r),cr(u)?ru(u,kr(c,1,cr,!0),r,m):[]});function Zm(u,c,m){var A=u==null?0:u.length;return A?(c=m||c===r?1:_t(c),En(u,c<0?0:c,A)):[]}function Jm(u,c,m){var A=u==null?0:u.length;return A?(c=m||c===r?1:_t(c),c=A-c,En(u,0,c<0?0:c)):[]}function Qm(u,c){return u&&u.length?$u(u,ut(c,3),!0,!0):[]}function Xm(u,c){return u&&u.length?$u(u,ut(c,3),!0):[]}function e_(u,c,m,A){var T=u==null?0:u.length;return T?(m&&typeof m!="number"&&Yr(u,c,m)&&(m=0,A=T),Gv(u,c,m,A)):[]}function Lh(u,c,m){var A=u==null?0:u.length;if(!A)return-1;var T=m==null?0:_t(m);return T<0&&(T=br(A+T,0)),Su(u,ut(c,3),T)}function Rh(u,c,m){var A=u==null?0:u.length;if(!A)return-1;var T=A-1;return m!==r&&(T=_t(m),T=m<0?br(A+T,0):zr(T,A-1)),Su(u,ut(c,3),T,!0)}function Uh(u){var c=u==null?0:u.length;return c?kr(u,1):[]}function t_(u){var c=u==null?0:u.length;return c?kr(u,J):[]}function r_(u,c){var m=u==null?0:u.length;return m?(c=c===r?1:_t(c),kr(u,c)):[]}function n_(u){for(var c=-1,m=u==null?0:u.length,A={};++c<m;){var T=u[c];A[T[0]]=T[1]}return A}function Vh(u){return u&&u.length?u[0]:r}function i_(u,c,m){var A=u==null?0:u.length;if(!A)return-1;var T=m==null?0:_t(m);return T<0&&(T=br(A+T,0)),aa(u,c,T)}function a_(u){var c=u==null?0:u.length;return c?En(u,0,-1):[]}var u_=yt(function(u){var c=Kt(u,Xo);return c.length&&c[0]===u[0]?qo(c):[]}),s_=yt(function(u){var c=An(u),m=Kt(u,Xo);return c===An(m)?c=r:m.pop(),m.length&&m[0]===u[0]?qo(m,ut(c,2)):[]}),o_=yt(function(u){var c=An(u),m=Kt(u,Xo);return c=typeof c=="function"?c:r,c&&m.pop(),m.length&&m[0]===u[0]?qo(m,r,c):[]});function l_(u,c){return u==null?"":av.call(u,c)}function An(u){var c=u==null?0:u.length;return c?u[c-1]:r}function f_(u,c,m){var A=u==null?0:u.length;if(!A)return-1;var T=A;return m!==r&&(T=_t(m),T=T<0?br(A+T,0):zr(T,A-1)),c===c?qg(u,c,T):Su(u,Dc,T,!0)}function c_(u,c){return u&&u.length?Jc(u,_t(c)):r}var h_=yt(jh);function jh(u,c){return u&&u.length&&c&&c.length?Ko(u,c):u}function d_(u,c,m){return u&&u.length&&c&&c.length?Ko(u,c,ut(m,2)):u}function p_(u,c,m){return u&&u.length&&c&&c.length?Ko(u,c,r,m):u}var g_=ui(function(u,c){var m=u==null?0:u.length,A=Uo(u,c);return eh(u,Kt(c,function(T){return si(T,m)?+T:T}).sort(fh)),A});function v_(u,c){var m=[];if(!(u&&u.length))return m;var A=-1,T=[],L=u.length;for(c=ut(c,3);++A<L;){var Y=u[A];c(Y,A,u)&&(m.push(Y),T.push(A))}return eh(u,T),m}function dl(u){return u==null?u:lv.call(u)}function m_(u,c,m){var A=u==null?0:u.length;return A?(m&&typeof m!="number"&&Yr(u,c,m)?(c=0,m=A):(c=c==null?0:_t(c),m=m===r?A:_t(m)),En(u,c,m)):[]}function __(u,c){return Ku(u,c)}function b_(u,c,m){return Zo(u,c,ut(m,2))}function D_(u,c){var m=u==null?0:u.length;if(m){var A=Ku(u,c);if(A<m&&Tn(u[A],c))return A}return-1}function y_(u,c){return Ku(u,c,!0)}function w_(u,c,m){return Zo(u,c,ut(m,2),!0)}function E_(u,c){var m=u==null?0:u.length;if(m){var A=Ku(u,c,!0)-1;if(Tn(u[A],c))return A}return-1}function A_(u){return u&&u.length?rh(u):[]}function C_(u,c){return u&&u.length?rh(u,ut(c,2)):[]}function F_(u){var c=u==null?0:u.length;return c?En(u,1,c):[]}function S_(u,c,m){return u&&u.length?(c=m||c===r?1:_t(c),En(u,0,c<0?0:c)):[]}function B_(u,c,m){var A=u==null?0:u.length;return A?(c=m||c===r?1:_t(c),c=A-c,En(u,c<0?0:c,A)):[]}function O_(u,c){return u&&u.length?$u(u,ut(c,3),!1,!0):[]}function M_(u,c){return u&&u.length?$u(u,ut(c,3)):[]}var P_=yt(function(u){return Ei(kr(u,1,cr,!0))}),k_=yt(function(u){var c=An(u);return cr(c)&&(c=r),Ei(kr(u,1,cr,!0),ut(c,2))}),T_=yt(function(u){var c=An(u);return c=typeof c=="function"?c:r,Ei(kr(u,1,cr,!0),r,c)});function I_(u){return u&&u.length?Ei(u):[]}function N_(u,c){return u&&u.length?Ei(u,ut(c,2)):[]}function x_(u,c){return c=typeof c=="function"?c:r,u&&u.length?Ei(u,r,c):[]}function pl(u){if(!(u&&u.length))return[];var c=0;return u=_i(u,function(m){if(cr(m))return c=br(m.length,c),!0}),Po(c,function(m){return Kt(u,Bo(m))})}function zh(u,c){if(!(u&&u.length))return[];var m=pl(u);return c==null?m:Kt(m,function(A){return on(c,r,A)})}var L_=yt(function(u,c){return cr(u)?ru(u,c):[]}),R_=yt(function(u){return Qo(_i(u,cr))}),U_=yt(function(u){var c=An(u);return cr(c)&&(c=r),Qo(_i(u,cr),ut(c,2))}),V_=yt(function(u){var c=An(u);return c=typeof c=="function"?c:r,Qo(_i(u,cr),r,c)}),j_=yt(pl);function z_(u,c){return uh(u||[],c||[],tu)}function q_(u,c){return uh(u||[],c||[],au)}var W_=yt(function(u){var c=u.length,m=c>1?u[c-1]:r;return m=typeof m=="function"?(u.pop(),m):r,zh(u,m)});function qh(u){var c=N(u);return c.__chain__=!0,c}function H_(u,c){return c(u),u}function ns(u,c){return c(u)}var G_=ui(function(u){var c=u.length,m=c?u[0]:0,A=this.__wrapped__,T=function(L){return Uo(L,u)};return c>1||this.__actions__.length||!(A instanceof Ct)||!si(m)?this.thru(T):(A=A.slice(m,+m+(c?1:0)),A.__actions__.push({func:ns,args:[T],thisArg:r}),new yn(A,this.__chain__).thru(function(L){return c&&!L.length&&L.push(r),L}))});function K_(){return qh(this)}function $_(){return new yn(this.value(),this.__chain__)}function Y_(){this.__values__===r&&(this.__values__=n0(this.value()));var u=this.__index__>=this.__values__.length,c=u?r:this.__values__[this.__index__++];return{done:u,value:c}}function Z_(){return this}function J_(u){for(var c,m=this;m instanceof zu;){var A=xh(m);A.__index__=0,A.__values__=r,c?T.__wrapped__=A:c=A;var T=A;m=m.__wrapped__}return T.__wrapped__=u,c}function Q_(){var u=this.__wrapped__;if(u instanceof Ct){var c=u;return this.__actions__.length&&(c=new Ct(this)),c=c.reverse(),c.__actions__.push({func:ns,args:[dl],thisArg:r}),new yn(c,this.__chain__)}return this.thru(dl)}function X_(){return ah(this.__wrapped__,this.__actions__)}var eb=Yu(function(u,c,m){Rt.call(u,m)?++u[m]:ii(u,m,1)});function tb(u,c,m){var A=gt(u)?_c:Hv;return m&&Yr(u,c,m)&&(c=r),A(u,ut(c,3))}function rb(u,c){var m=gt(u)?_i:zc;return m(u,ut(c,3))}var nb=vh(Lh),ib=vh(Rh);function ab(u,c){return kr(is(u,c),1)}function ub(u,c){return kr(is(u,c),J)}function sb(u,c,m){return m=m===r?1:_t(m),kr(is(u,c),m)}function Wh(u,c){var m=gt(u)?bn:wi;return m(u,ut(c,3))}function Hh(u,c){var m=gt(u)?Fg:jc;return m(u,ut(c,3))}var ob=Yu(function(u,c,m){Rt.call(u,m)?u[m].push(c):ii(u,m,[c])});function lb(u,c,m,A){u=Xr(u)?u:ma(u),m=m&&!A?_t(m):0;var T=u.length;return m<0&&(m=br(T+m,0)),ls(u)?m<=T&&u.indexOf(c,m)>-1:!!T&&aa(u,c,m)>-1}var fb=yt(function(u,c,m){var A=-1,T=typeof c=="function",L=Xr(u)?oe(u.length):[];return wi(u,function(Y){L[++A]=T?on(c,Y,m):nu(Y,c,m)}),L}),cb=Yu(function(u,c,m){ii(u,m,c)});function is(u,c){var m=gt(u)?Kt:$c;return m(u,ut(c,3))}function hb(u,c,m,A){return u==null?[]:(gt(c)||(c=c==null?[]:[c]),m=A?r:m,gt(m)||(m=m==null?[]:[m]),Qc(u,c,m))}var db=Yu(function(u,c,m){u[m?0:1].push(c)},function(){return[[],[]]});function pb(u,c,m){var A=gt(u)?Fo:wc,T=arguments.length<3;return A(u,ut(c,4),m,T,wi)}function gb(u,c,m){var A=gt(u)?Sg:wc,T=arguments.length<3;return A(u,ut(c,4),m,T,jc)}function vb(u,c){var m=gt(u)?_i:zc;return m(u,ss(ut(c,3)))}function mb(u){var c=gt(u)?Lc:lm;return c(u)}function _b(u,c,m){(m?Yr(u,c,m):c===r)?c=1:c=_t(c);var A=gt(u)?Vv:fm;return A(u,c)}function bb(u){var c=gt(u)?jv:hm;return c(u)}function Db(u){if(u==null)return 0;if(Xr(u))return ls(u)?sa(u):u.length;var c=qr(u);return c==at||c==Ft?u.size:Ho(u).length}function yb(u,c,m){var A=gt(u)?So:dm;return m&&Yr(u,c,m)&&(c=r),A(u,ut(c,3))}var wb=yt(function(u,c){if(u==null)return[];var m=c.length;return m>1&&Yr(u,c[0],c[1])?c=[]:m>2&&Yr(c[0],c[1],c[2])&&(c=[c[0]]),Qc(u,kr(c,1),[])}),as=rv||function(){return Pr.Date.now()};function Eb(u,c){if(typeof c!="function")throw new Dn(o);return u=_t(u),function(){if(--u<1)return c.apply(this,arguments)}}function Gh(u,c,m){return c=m?r:c,c=u&&c==null?u.length:c,ai(u,k,r,r,r,r,c)}function Kh(u,c){var m;if(typeof c!="function")throw new Dn(o);return u=_t(u),function(){return--u>0&&(m=c.apply(this,arguments)),u<=1&&(c=r),m}}var gl=yt(function(u,c,m){var A=_;if(m.length){var T=Di(m,ga(gl));A|=E}return ai(u,A,c,m,T)}),$h=yt(function(u,c,m){var A=_|D;if(m.length){var T=Di(m,ga($h));A|=E}return ai(c,A,u,m,T)});function Yh(u,c,m){c=m?r:c;var A=ai(u,w,r,r,r,r,r,c);return A.placeholder=Yh.placeholder,A}function Zh(u,c,m){c=m?r:c;var A=ai(u,C,r,r,r,r,r,c);return A.placeholder=Zh.placeholder,A}function Jh(u,c,m){var A,T,L,Y,Q,ie,be=0,ye=!1,Ae=!1,Re=!0;if(typeof u!="function")throw new Dn(o);c=Cn(c)||0,Qt(m)&&(ye=!!m.leading,Ae="maxWait"in m,L=Ae?br(Cn(m.maxWait)||0,c):L,Re="trailing"in m?!!m.trailing:Re);function Ze(hr){var In=A,fi=T;return A=T=r,be=hr,Y=u.apply(fi,In),Y}function lt(hr){return be=hr,Q=ou(At,c),ye?Ze(hr):Y}function bt(hr){var In=hr-ie,fi=hr-be,v0=c-In;return Ae?zr(v0,L-fi):v0}function ft(hr){var In=hr-ie,fi=hr-be;return ie===r||In>=c||In<0||Ae&&fi>=L}function At(){var hr=as();if(ft(hr))return Bt(hr);Q=ou(At,bt(hr))}function Bt(hr){return Q=r,Re&&A?Ze(hr):(A=T=r,Y)}function hn(){Q!==r&&sh(Q),be=0,A=ie=T=Q=r}function Zr(){return Q===r?Y:Bt(as())}function dn(){var hr=as(),In=ft(hr);if(A=arguments,T=this,ie=hr,In){if(Q===r)return lt(ie);if(Ae)return sh(Q),Q=ou(At,c),Ze(ie)}return Q===r&&(Q=ou(At,c)),Y}return dn.cancel=hn,dn.flush=Zr,dn}var Ab=yt(function(u,c){return Vc(u,1,c)}),Cb=yt(function(u,c,m){return Vc(u,Cn(c)||0,m)});function Fb(u){return ai(u,x)}function us(u,c){if(typeof u!="function"||c!=null&&typeof c!="function")throw new Dn(o);var m=function(){var A=arguments,T=c?c.apply(this,A):A[0],L=m.cache;if(L.has(T))return L.get(T);var Y=u.apply(this,A);return m.cache=L.set(T,Y)||L,Y};return m.cache=new(us.Cache||ni),m}us.Cache=ni;function ss(u){if(typeof u!="function")throw new Dn(o);return function(){var c=arguments;switch(c.length){case 0:return!u.call(this);case 1:return!u.call(this,c[0]);case 2:return!u.call(this,c[0],c[1]);case 3:return!u.call(this,c[0],c[1],c[2])}return!u.apply(this,c)}}function Sb(u){return Kh(2,u)}var Bb=pm(function(u,c){c=c.length==1&&gt(c[0])?Kt(c[0],ln(ut())):Kt(kr(c,1),ln(ut()));var m=c.length;return yt(function(A){for(var T=-1,L=zr(A.length,m);++T<L;)A[T]=c[T].call(this,A[T]);return on(u,this,A)})}),vl=yt(function(u,c){var m=Di(c,ga(vl));return ai(u,E,r,c,m)}),Qh=yt(function(u,c){var m=Di(c,ga(Qh));return ai(u,B,r,c,m)}),Ob=ui(function(u,c){return ai(u,O,r,r,r,c)});function Mb(u,c){if(typeof u!="function")throw new Dn(o);return c=c===r?c:_t(c),yt(u,c)}function Pb(u,c){if(typeof u!="function")throw new Dn(o);return c=c==null?0:br(_t(c),0),yt(function(m){var A=m[c],T=Ci(m,0,c);return A&&bi(T,A),on(u,this,T)})}function kb(u,c,m){var A=!0,T=!0;if(typeof u!="function")throw new Dn(o);return Qt(m)&&(A="leading"in m?!!m.leading:A,T="trailing"in m?!!m.trailing:T),Jh(u,c,{leading:A,maxWait:c,trailing:T})}function Tb(u){return Gh(u,1)}function Ib(u,c){return vl(el(c),u)}function Nb(){if(!arguments.length)return[];var u=arguments[0];return gt(u)?u:[u]}function xb(u){return wn(u,g)}function Lb(u,c){return c=typeof c=="function"?c:r,wn(u,g,c)}function Rb(u){return wn(u,h|g)}function Ub(u,c){return c=typeof c=="function"?c:r,wn(u,h|g,c)}function Vb(u,c){return c==null||Uc(u,c,Fr(c))}function Tn(u,c){return u===c||u!==u&&c!==c}var jb=Xu(zo),zb=Xu(function(u,c){return u>=c}),Zi=Hc(function(){return arguments}())?Hc:function(u){return ur(u)&&Rt.call(u,"callee")&&!Pc.call(u,"callee")},gt=oe.isArray,qb=hc?ln(hc):Jv;function Xr(u){return u!=null&&os(u.length)&&!oi(u)}function cr(u){return ur(u)&&Xr(u)}function Wb(u){return u===!0||u===!1||ur(u)&&$r(u)==Ke}var Fi=iv||Sl,Hb=dc?ln(dc):Qv;function Gb(u){return ur(u)&&u.nodeType===1&&!lu(u)}function Kb(u){if(u==null)return!0;if(Xr(u)&&(gt(u)||typeof u=="string"||typeof u.splice=="function"||Fi(u)||va(u)||Zi(u)))return!u.length;var c=qr(u);if(c==at||c==Ft)return!u.size;if(su(u))return!Ho(u).length;for(var m in u)if(Rt.call(u,m))return!1;return!0}function $b(u,c){return iu(u,c)}function Yb(u,c,m){m=typeof m=="function"?m:r;var A=m?m(u,c):r;return A===r?iu(u,c,r,m):!!A}function ml(u){if(!ur(u))return!1;var c=$r(u);return c==Dt||c==Le||typeof u.message=="string"&&typeof u.name=="string"&&!lu(u)}function Zb(u){return typeof u=="number"&&Tc(u)}function oi(u){if(!Qt(u))return!1;var c=$r(u);return c==Et||c==ht||c==Ye||c==Ve}function Xh(u){return typeof u=="number"&&u==_t(u)}function os(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=ae}function Qt(u){var c=typeof u;return u!=null&&(c=="object"||c=="function")}function ur(u){return u!=null&&typeof u=="object"}var e0=pc?ln(pc):em;function Jb(u,c){return u===c||Wo(u,c,sl(c))}function Qb(u,c,m){return m=typeof m=="function"?m:r,Wo(u,c,sl(c),m)}function Xb(u){return t0(u)&&u!=+u}function eD(u){if(Lm(u))throw new pt(a);return Gc(u)}function tD(u){return u===null}function rD(u){return u==null}function t0(u){return typeof u=="number"||ur(u)&&$r(u)==Pt}function lu(u){if(!ur(u)||$r(u)!=Tt)return!1;var c=Nu(u);if(c===null)return!0;var m=Rt.call(c,"constructor")&&c.constructor;return typeof m=="function"&&m instanceof m&&Pu.call(m)==Qg}var _l=gc?ln(gc):tm;function nD(u){return Xh(u)&&u>=-ae&&u<=ae}var r0=vc?ln(vc):rm;function ls(u){return typeof u=="string"||!gt(u)&&ur(u)&&$r(u)==$t}function cn(u){return typeof u=="symbol"||ur(u)&&$r(u)==G}var va=mc?ln(mc):nm;function iD(u){return u===r}function aD(u){return ur(u)&&qr(u)==ee}function uD(u){return ur(u)&&$r(u)==ce}var sD=Xu(Go),oD=Xu(function(u,c){return u<=c});function n0(u){if(!u)return[];if(Xr(u))return ls(u)?Pn(u):Qr(u);if(Za&&u[Za])return Vg(u[Za]());var c=qr(u),m=c==at?To:c==Ft?Bu:ma;return m(u)}function li(u){if(!u)return u===0?u:0;if(u=Cn(u),u===J||u===-J){var c=u<0?-1:1;return c*ne}return u===u?u:0}function _t(u){var c=li(u),m=c%1;return c===c?m?c-m:c:0}function i0(u){return u?Gi(_t(u),0,De):0}function Cn(u){if(typeof u=="number")return u;if(cn(u))return se;if(Qt(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=Qt(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=Ec(u);var m=Ua.test(u);return m||ja.test(u)?Eg(u.slice(2),m?2:8):Ra.test(u)?se:+u}function a0(u){return Wn(u,en(u))}function lD(u){return u?Gi(_t(u),-ae,ae):u===0?u:0}function Nt(u){return u==null?"":fn(u)}var fD=da(function(u,c){if(su(c)||Xr(c)){Wn(c,Fr(c),u);return}for(var m in c)Rt.call(c,m)&&tu(u,m,c[m])}),u0=da(function(u,c){Wn(c,en(c),u)}),fs=da(function(u,c,m,A){Wn(c,en(c),u,A)}),cD=da(function(u,c,m,A){Wn(c,Fr(c),u,A)}),hD=ui(Uo);function dD(u,c){var m=ha(u);return c==null?m:Rc(m,c)}var pD=yt(function(u,c){u=Vt(u);var m=-1,A=c.length,T=A>2?c[2]:r;for(T&&Yr(c[0],c[1],T)&&(A=1);++m<A;)for(var L=c[m],Y=en(L),Q=-1,ie=Y.length;++Q<ie;){var be=Y[Q],ye=u[be];(ye===r||Tn(ye,la[be])&&!Rt.call(u,be))&&(u[be]=L[be])}return u}),gD=yt(function(u){return u.push(r,Eh),on(s0,r,u)});function vD(u,c){return bc(u,ut(c,3),qn)}function mD(u,c){return bc(u,ut(c,3),jo)}function _D(u,c){return u==null?u:Vo(u,ut(c,3),en)}function bD(u,c){return u==null?u:qc(u,ut(c,3),en)}function DD(u,c){return u&&qn(u,ut(c,3))}function yD(u,c){return u&&jo(u,ut(c,3))}function wD(u){return u==null?[]:Hu(u,Fr(u))}function ED(u){return u==null?[]:Hu(u,en(u))}function bl(u,c,m){var A=u==null?r:Ki(u,c);return A===r?m:A}function AD(u,c){return u!=null&&Fh(u,c,Kv)}function Dl(u,c){return u!=null&&Fh(u,c,$v)}var CD=_h(function(u,c,m){c!=null&&typeof c.toString!="function"&&(c=ku.call(c)),u[c]=m},wl(tn)),FD=_h(function(u,c,m){c!=null&&typeof c.toString!="function"&&(c=ku.call(c)),Rt.call(u,c)?u[c].push(m):u[c]=[m]},ut),SD=yt(nu);function Fr(u){return Xr(u)?xc(u):Ho(u)}function en(u){return Xr(u)?xc(u,!0):im(u)}function BD(u,c){var m={};return c=ut(c,3),qn(u,function(A,T,L){ii(m,c(A,T,L),A)}),m}function OD(u,c){var m={};return c=ut(c,3),qn(u,function(A,T,L){ii(m,T,c(A,T,L))}),m}var MD=da(function(u,c,m){Gu(u,c,m)}),s0=da(function(u,c,m,A){Gu(u,c,m,A)}),PD=ui(function(u,c){var m={};if(u==null)return m;var A=!1;c=Kt(c,function(L){return L=Ai(L,u),A||(A=L.length>1),L}),Wn(u,al(u),m),A&&(m=wn(m,h|d|g,Cm));for(var T=c.length;T--;)Jo(m,c[T]);return m});function kD(u,c){return o0(u,ss(ut(c)))}var TD=ui(function(u,c){return u==null?{}:um(u,c)});function o0(u,c){if(u==null)return{};var m=Kt(al(u),function(A){return[A]});return c=ut(c),Xc(u,m,function(A,T){return c(A,T[0])})}function ID(u,c,m){c=Ai(c,u);var A=-1,T=c.length;for(T||(T=1,u=r);++A<T;){var L=u==null?r:u[Hn(c[A])];L===r&&(A=T,L=m),u=oi(L)?L.call(u):L}return u}function ND(u,c,m){return u==null?u:au(u,c,m)}function xD(u,c,m,A){return A=typeof A=="function"?A:r,u==null?u:au(u,c,m,A)}var l0=yh(Fr),f0=yh(en);function LD(u,c,m){var A=gt(u),T=A||Fi(u)||va(u);if(c=ut(c,4),m==null){var L=u&&u.constructor;T?m=A?new L:[]:Qt(u)?m=oi(L)?ha(Nu(u)):{}:m={}}return(T?bn:qn)(u,function(Y,Q,ie){return c(m,Y,Q,ie)}),m}function RD(u,c){return u==null?!0:Jo(u,c)}function UD(u,c,m){return u==null?u:ih(u,c,el(m))}function VD(u,c,m,A){return A=typeof A=="function"?A:r,u==null?u:ih(u,c,el(m),A)}function ma(u){return u==null?[]:ko(u,Fr(u))}function jD(u){return u==null?[]:ko(u,en(u))}function zD(u,c,m){return m===r&&(m=c,c=r),m!==r&&(m=Cn(m),m=m===m?m:0),c!==r&&(c=Cn(c),c=c===c?c:0),Gi(Cn(u),c,m)}function qD(u,c,m){return c=li(c),m===r?(m=c,c=0):m=li(m),u=Cn(u),Yv(u,c,m)}function WD(u,c,m){if(m&&typeof m!="boolean"&&Yr(u,c,m)&&(c=m=r),m===r&&(typeof c=="boolean"?(m=c,c=r):typeof u=="boolean"&&(m=u,u=r)),u===r&&c===r?(u=0,c=1):(u=li(u),c===r?(c=u,u=0):c=li(c)),u>c){var A=u;u=c,c=A}if(m||u%1||c%1){var T=Ic();return zr(u+T*(c-u+wg("1e-"+((T+"").length-1))),c)}return $o(u,c)}var HD=pa(function(u,c,m){return c=c.toLowerCase(),u+(m?c0(c):c)});function c0(u){return yl(Nt(u).toLowerCase())}function h0(u){return u=Nt(u),u&&u.replace(qa,Ng).replace(hg,"")}function GD(u,c,m){u=Nt(u),c=fn(c);var A=u.length;m=m===r?A:Gi(_t(m),0,A);var T=m;return m-=c.length,m>=0&&u.slice(m,T)==c}function KD(u){return u=Nt(u),u&&gn.test(u)?u.replace(pr,xg):u}function $D(u){return u=Nt(u),u&&Ia.test(u)?u.replace(Ri,"\\$&"):u}var YD=pa(function(u,c,m){return u+(m?"-":"")+c.toLowerCase()}),ZD=pa(function(u,c,m){return u+(m?" ":"")+c.toLowerCase()}),JD=gh("toLowerCase");function QD(u,c,m){u=Nt(u),c=_t(c);var A=c?sa(u):0;if(!c||A>=c)return u;var T=(c-A)/2;return Qu(Uu(T),m)+u+Qu(Ru(T),m)}function XD(u,c,m){u=Nt(u),c=_t(c);var A=c?sa(u):0;return c&&A<c?u+Qu(c-A,m):u}function ey(u,c,m){u=Nt(u),c=_t(c);var A=c?sa(u):0;return c&&A<c?Qu(c-A,m)+u:u}function ty(u,c,m){return m||c==null?c=0:c&&(c=+c),ov(Nt(u).replace(Mr,""),c||0)}function ry(u,c,m){return(m?Yr(u,c,m):c===r)?c=1:c=_t(c),Yo(Nt(u),c)}function ny(){var u=arguments,c=Nt(u[0]);return u.length<3?c:c.replace(u[1],u[2])}var iy=pa(function(u,c,m){return u+(m?"_":"")+c.toLowerCase()});function ay(u,c,m){return m&&typeof m!="number"&&Yr(u,c,m)&&(c=m=r),m=m===r?De:m>>>0,m?(u=Nt(u),u&&(typeof c=="string"||c!=null&&!_l(c))&&(c=fn(c),!c&&ua(u))?Ci(Pn(u),0,m):u.split(c,m)):[]}var uy=pa(function(u,c,m){return u+(m?" ":"")+yl(c)});function sy(u,c,m){return u=Nt(u),m=m==null?0:Gi(_t(m),0,u.length),c=fn(c),u.slice(m,m+c.length)==c}function oy(u,c,m){var A=N.templateSettings;m&&Yr(u,c,m)&&(c=r),u=Nt(u),c=fs({},c,A,wh);var T=fs({},c.imports,A.imports,wh),L=Fr(T),Y=ko(T,L),Q,ie,be=0,ye=c.interpolate||vi,Ae="__p += '",Re=Io((c.escape||vi).source+"|"+ye.source+"|"+(ye===Xn?La:vi).source+"|"+(c.evaluate||vi).source+"|$","g"),Ze="//# sourceURL="+(Rt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++mg+"]")+`
`;u.replace(Re,function(ft,At,Bt,hn,Zr,dn){return Bt||(Bt=hn),Ae+=u.slice(be,dn).replace(Wa,Lg),At&&(Q=!0,Ae+=`' +
__e(`+At+`) +
'`),Zr&&(ie=!0,Ae+=`';
`+Zr+`;
__p += '`),Bt&&(Ae+=`' +
((__t = (`+Bt+`)) == null ? '' : __t) +
'`),be=dn+ft.length,ft}),Ae+=`';
`;var lt=Rt.call(c,"variable")&&c.variable;if(!lt)Ae=`with (obj) {
`+Ae+`
}
`;else if(Ui.test(lt))throw new pt(s);Ae=(ie?Ae.replace(Zt,""):Ae).replace(Er,"$1").replace(Jt,"$1;"),Ae="function("+(lt||"obj")+`) {
`+(lt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Q?", __e = _.escape":"")+(ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ae+`return __p
}`;var bt=p0(function(){return It(L,Ze+"return "+Ae).apply(r,Y)});if(bt.source=Ae,ml(bt))throw bt;return bt}function ly(u){return Nt(u).toLowerCase()}function fy(u){return Nt(u).toUpperCase()}function cy(u,c,m){if(u=Nt(u),u&&(m||c===r))return Ec(u);if(!u||!(c=fn(c)))return u;var A=Pn(u),T=Pn(c),L=Ac(A,T),Y=Cc(A,T)+1;return Ci(A,L,Y).join("")}function hy(u,c,m){if(u=Nt(u),u&&(m||c===r))return u.slice(0,Sc(u)+1);if(!u||!(c=fn(c)))return u;var A=Pn(u),T=Cc(A,Pn(c))+1;return Ci(A,0,T).join("")}function dy(u,c,m){if(u=Nt(u),u&&(m||c===r))return u.replace(Mr,"");if(!u||!(c=fn(c)))return u;var A=Pn(u),T=Ac(A,Pn(c));return Ci(A,T).join("")}function py(u,c){var m=K,A=$;if(Qt(c)){var T="separator"in c?c.separator:T;m="length"in c?_t(c.length):m,A="omission"in c?fn(c.omission):A}u=Nt(u);var L=u.length;if(ua(u)){var Y=Pn(u);L=Y.length}if(m>=L)return u;var Q=m-sa(A);if(Q<1)return A;var ie=Y?Ci(Y,0,Q).join(""):u.slice(0,Q);if(T===r)return ie+A;if(Y&&(Q+=ie.length-Q),_l(T)){if(u.slice(Q).search(T)){var be,ye=ie;for(T.global||(T=Io(T.source,Nt(ra.exec(T))+"g")),T.lastIndex=0;be=T.exec(ye);)var Ae=be.index;ie=ie.slice(0,Ae===r?Q:Ae)}}else if(u.indexOf(fn(T),Q)!=Q){var Re=ie.lastIndexOf(T);Re>-1&&(ie=ie.slice(0,Re))}return ie+A}function gy(u){return u=Nt(u),u&&gr.test(u)?u.replace(Ar,Wg):u}var vy=pa(function(u,c,m){return u+(m?" ":"")+c.toUpperCase()}),yl=gh("toUpperCase");function d0(u,c,m){return u=Nt(u),c=m?r:c,c===r?Ug(u)?Kg(u):Mg(u):u.match(c)||[]}var p0=yt(function(u,c){try{return on(u,r,c)}catch(m){return ml(m)?m:new pt(m)}}),my=ui(function(u,c){return bn(c,function(m){m=Hn(m),ii(u,m,gl(u[m],u))}),u});function _y(u){var c=u==null?0:u.length,m=ut();return u=c?Kt(u,function(A){if(typeof A[1]!="function")throw new Dn(o);return[m(A[0]),A[1]]}):[],yt(function(A){for(var T=-1;++T<c;){var L=u[T];if(on(L[0],this,A))return on(L[1],this,A)}})}function by(u){return Wv(wn(u,h))}function wl(u){return function(){return u}}function Dy(u,c){return u==null||u!==u?c:u}var yy=mh(),wy=mh(!0);function tn(u){return u}function El(u){return Kc(typeof u=="function"?u:wn(u,h))}function Ey(u){return Yc(wn(u,h))}function Ay(u,c){return Zc(u,wn(c,h))}var Cy=yt(function(u,c){return function(m){return nu(m,u,c)}}),Fy=yt(function(u,c){return function(m){return nu(u,m,c)}});function Al(u,c,m){var A=Fr(c),T=Hu(c,A);m==null&&!(Qt(c)&&(T.length||!A.length))&&(m=c,c=u,u=this,T=Hu(c,Fr(c)));var L=!(Qt(m)&&"chain"in m)||!!m.chain,Y=oi(u);return bn(T,function(Q){var ie=c[Q];u[Q]=ie,Y&&(u.prototype[Q]=function(){var be=this.__chain__;if(L||be){var ye=u(this.__wrapped__),Ae=ye.__actions__=Qr(this.__actions__);return Ae.push({func:ie,args:arguments,thisArg:u}),ye.__chain__=be,ye}return ie.apply(u,bi([this.value()],arguments))})}),u}function Sy(){return Pr._===this&&(Pr._=Xg),this}function Cl(){}function By(u){return u=_t(u),yt(function(c){return Jc(c,u)})}var Oy=rl(Kt),My=rl(_c),Py=rl(So);function g0(u){return ll(u)?Bo(Hn(u)):sm(u)}function ky(u){return function(c){return u==null?r:Ki(u,c)}}var Ty=bh(),Iy=bh(!0);function Fl(){return[]}function Sl(){return!1}function Ny(){return{}}function xy(){return""}function Ly(){return!0}function Ry(u,c){if(u=_t(u),u<1||u>ae)return[];var m=De,A=zr(u,De);c=ut(c),u-=De;for(var T=Po(A,c);++m<u;)c(m);return T}function Uy(u){return gt(u)?Kt(u,Hn):cn(u)?[u]:Qr(Nh(Nt(u)))}function Vy(u){var c=++Jg;return Nt(u)+c}var jy=Ju(function(u,c){return u+c},0),zy=nl("ceil"),qy=Ju(function(u,c){return u/c},1),Wy=nl("floor");function Hy(u){return u&&u.length?Wu(u,tn,zo):r}function Gy(u,c){return u&&u.length?Wu(u,ut(c,2),zo):r}function Ky(u){return yc(u,tn)}function $y(u,c){return yc(u,ut(c,2))}function Yy(u){return u&&u.length?Wu(u,tn,Go):r}function Zy(u,c){return u&&u.length?Wu(u,ut(c,2),Go):r}var Jy=Ju(function(u,c){return u*c},1),Qy=nl("round"),Xy=Ju(function(u,c){return u-c},0);function ew(u){return u&&u.length?Mo(u,tn):0}function tw(u,c){return u&&u.length?Mo(u,ut(c,2)):0}return N.after=Eb,N.ary=Gh,N.assign=fD,N.assignIn=u0,N.assignInWith=fs,N.assignWith=cD,N.at=hD,N.before=Kh,N.bind=gl,N.bindAll=my,N.bindKey=$h,N.castArray=Nb,N.chain=qh,N.chunk=Wm,N.compact=Hm,N.concat=Gm,N.cond=_y,N.conforms=by,N.constant=wl,N.countBy=eb,N.create=dD,N.curry=Yh,N.curryRight=Zh,N.debounce=Jh,N.defaults=pD,N.defaultsDeep=gD,N.defer=Ab,N.delay=Cb,N.difference=Km,N.differenceBy=$m,N.differenceWith=Ym,N.drop=Zm,N.dropRight=Jm,N.dropRightWhile=Qm,N.dropWhile=Xm,N.fill=e_,N.filter=rb,N.flatMap=ab,N.flatMapDeep=ub,N.flatMapDepth=sb,N.flatten=Uh,N.flattenDeep=t_,N.flattenDepth=r_,N.flip=Fb,N.flow=yy,N.flowRight=wy,N.fromPairs=n_,N.functions=wD,N.functionsIn=ED,N.groupBy=ob,N.initial=a_,N.intersection=u_,N.intersectionBy=s_,N.intersectionWith=o_,N.invert=CD,N.invertBy=FD,N.invokeMap=fb,N.iteratee=El,N.keyBy=cb,N.keys=Fr,N.keysIn=en,N.map=is,N.mapKeys=BD,N.mapValues=OD,N.matches=Ey,N.matchesProperty=Ay,N.memoize=us,N.merge=MD,N.mergeWith=s0,N.method=Cy,N.methodOf=Fy,N.mixin=Al,N.negate=ss,N.nthArg=By,N.omit=PD,N.omitBy=kD,N.once=Sb,N.orderBy=hb,N.over=Oy,N.overArgs=Bb,N.overEvery=My,N.overSome=Py,N.partial=vl,N.partialRight=Qh,N.partition=db,N.pick=TD,N.pickBy=o0,N.property=g0,N.propertyOf=ky,N.pull=h_,N.pullAll=jh,N.pullAllBy=d_,N.pullAllWith=p_,N.pullAt=g_,N.range=Ty,N.rangeRight=Iy,N.rearg=Ob,N.reject=vb,N.remove=v_,N.rest=Mb,N.reverse=dl,N.sampleSize=_b,N.set=ND,N.setWith=xD,N.shuffle=bb,N.slice=m_,N.sortBy=wb,N.sortedUniq=A_,N.sortedUniqBy=C_,N.split=ay,N.spread=Pb,N.tail=F_,N.take=S_,N.takeRight=B_,N.takeRightWhile=O_,N.takeWhile=M_,N.tap=H_,N.throttle=kb,N.thru=ns,N.toArray=n0,N.toPairs=l0,N.toPairsIn=f0,N.toPath=Uy,N.toPlainObject=a0,N.transform=LD,N.unary=Tb,N.union=P_,N.unionBy=k_,N.unionWith=T_,N.uniq=I_,N.uniqBy=N_,N.uniqWith=x_,N.unset=RD,N.unzip=pl,N.unzipWith=zh,N.update=UD,N.updateWith=VD,N.values=ma,N.valuesIn=jD,N.without=L_,N.words=d0,N.wrap=Ib,N.xor=R_,N.xorBy=U_,N.xorWith=V_,N.zip=j_,N.zipObject=z_,N.zipObjectDeep=q_,N.zipWith=W_,N.entries=l0,N.entriesIn=f0,N.extend=u0,N.extendWith=fs,Al(N,N),N.add=jy,N.attempt=p0,N.camelCase=HD,N.capitalize=c0,N.ceil=zy,N.clamp=zD,N.clone=xb,N.cloneDeep=Rb,N.cloneDeepWith=Ub,N.cloneWith=Lb,N.conformsTo=Vb,N.deburr=h0,N.defaultTo=Dy,N.divide=qy,N.endsWith=GD,N.eq=Tn,N.escape=KD,N.escapeRegExp=$D,N.every=tb,N.find=nb,N.findIndex=Lh,N.findKey=vD,N.findLast=ib,N.findLastIndex=Rh,N.findLastKey=mD,N.floor=Wy,N.forEach=Wh,N.forEachRight=Hh,N.forIn=_D,N.forInRight=bD,N.forOwn=DD,N.forOwnRight=yD,N.get=bl,N.gt=jb,N.gte=zb,N.has=AD,N.hasIn=Dl,N.head=Vh,N.identity=tn,N.includes=lb,N.indexOf=i_,N.inRange=qD,N.invoke=SD,N.isArguments=Zi,N.isArray=gt,N.isArrayBuffer=qb,N.isArrayLike=Xr,N.isArrayLikeObject=cr,N.isBoolean=Wb,N.isBuffer=Fi,N.isDate=Hb,N.isElement=Gb,N.isEmpty=Kb,N.isEqual=$b,N.isEqualWith=Yb,N.isError=ml,N.isFinite=Zb,N.isFunction=oi,N.isInteger=Xh,N.isLength=os,N.isMap=e0,N.isMatch=Jb,N.isMatchWith=Qb,N.isNaN=Xb,N.isNative=eD,N.isNil=rD,N.isNull=tD,N.isNumber=t0,N.isObject=Qt,N.isObjectLike=ur,N.isPlainObject=lu,N.isRegExp=_l,N.isSafeInteger=nD,N.isSet=r0,N.isString=ls,N.isSymbol=cn,N.isTypedArray=va,N.isUndefined=iD,N.isWeakMap=aD,N.isWeakSet=uD,N.join=l_,N.kebabCase=YD,N.last=An,N.lastIndexOf=f_,N.lowerCase=ZD,N.lowerFirst=JD,N.lt=sD,N.lte=oD,N.max=Hy,N.maxBy=Gy,N.mean=Ky,N.meanBy=$y,N.min=Yy,N.minBy=Zy,N.stubArray=Fl,N.stubFalse=Sl,N.stubObject=Ny,N.stubString=xy,N.stubTrue=Ly,N.multiply=Jy,N.nth=c_,N.noConflict=Sy,N.noop=Cl,N.now=as,N.pad=QD,N.padEnd=XD,N.padStart=ey,N.parseInt=ty,N.random=WD,N.reduce=pb,N.reduceRight=gb,N.repeat=ry,N.replace=ny,N.result=ID,N.round=Qy,N.runInContext=re,N.sample=mb,N.size=Db,N.snakeCase=iy,N.some=yb,N.sortedIndex=__,N.sortedIndexBy=b_,N.sortedIndexOf=D_,N.sortedLastIndex=y_,N.sortedLastIndexBy=w_,N.sortedLastIndexOf=E_,N.startCase=uy,N.startsWith=sy,N.subtract=Xy,N.sum=ew,N.sumBy=tw,N.template=oy,N.times=Ry,N.toFinite=li,N.toInteger=_t,N.toLength=i0,N.toLower=ly,N.toNumber=Cn,N.toSafeInteger=lD,N.toString=Nt,N.toUpper=fy,N.trim=cy,N.trimEnd=hy,N.trimStart=dy,N.truncate=py,N.unescape=gy,N.uniqueId=Vy,N.upperCase=vy,N.upperFirst=yl,N.each=Wh,N.eachRight=Hh,N.first=Vh,Al(N,function(){var u={};return qn(N,function(c,m){Rt.call(N.prototype,m)||(u[m]=c)}),u}(),{chain:!1}),N.VERSION=n,bn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){N[u].placeholder=N}),bn(["drop","take"],function(u,c){Ct.prototype[u]=function(m){m=m===r?1:br(_t(m),0);var A=this.__filtered__&&!c?new Ct(this):this.clone();return A.__filtered__?A.__takeCount__=zr(m,A.__takeCount__):A.__views__.push({size:zr(m,De),type:u+(A.__dir__<0?"Right":"")}),A},Ct.prototype[u+"Right"]=function(m){return this.reverse()[u](m).reverse()}}),bn(["filter","map","takeWhile"],function(u,c){var m=c+1,A=m==U||m==V;Ct.prototype[u]=function(T){var L=this.clone();return L.__iteratees__.push({iteratee:ut(T,3),type:m}),L.__filtered__=L.__filtered__||A,L}}),bn(["head","last"],function(u,c){var m="take"+(c?"Right":"");Ct.prototype[u]=function(){return this[m](1).value()[0]}}),bn(["initial","tail"],function(u,c){var m="drop"+(c?"":"Right");Ct.prototype[u]=function(){return this.__filtered__?new Ct(this):this[m](1)}}),Ct.prototype.compact=function(){return this.filter(tn)},Ct.prototype.find=function(u){return this.filter(u).head()},Ct.prototype.findLast=function(u){return this.reverse().find(u)},Ct.prototype.invokeMap=yt(function(u,c){return typeof u=="function"?new Ct(this):this.map(function(m){return nu(m,u,c)})}),Ct.prototype.reject=function(u){return this.filter(ss(ut(u)))},Ct.prototype.slice=function(u,c){u=_t(u);var m=this;return m.__filtered__&&(u>0||c<0)?new Ct(m):(u<0?m=m.takeRight(-u):u&&(m=m.drop(u)),c!==r&&(c=_t(c),m=c<0?m.dropRight(-c):m.take(c-u)),m)},Ct.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},Ct.prototype.toArray=function(){return this.take(De)},qn(Ct.prototype,function(u,c){var m=/^(?:filter|find|map|reject)|While$/.test(c),A=/^(?:head|last)$/.test(c),T=N[A?"take"+(c=="last"?"Right":""):c],L=A||/^find/.test(c);T&&(N.prototype[c]=function(){var Y=this.__wrapped__,Q=A?[1]:arguments,ie=Y instanceof Ct,be=Q[0],ye=ie||gt(Y),Ae=function(At){var Bt=T.apply(N,bi([At],Q));return A&&Re?Bt[0]:Bt};ye&&m&&typeof be=="function"&&be.length!=1&&(ie=ye=!1);var Re=this.__chain__,Ze=!!this.__actions__.length,lt=L&&!Re,bt=ie&&!Ze;if(!L&&ye){Y=bt?Y:new Ct(this);var ft=u.apply(Y,Q);return ft.__actions__.push({func:ns,args:[Ae],thisArg:r}),new yn(ft,Re)}return lt&&bt?u.apply(this,Q):(ft=this.thru(Ae),lt?A?ft.value()[0]:ft.value():ft)})}),bn(["pop","push","shift","sort","splice","unshift"],function(u){var c=Ou[u],m=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",A=/^(?:pop|shift)$/.test(u);N.prototype[u]=function(){var T=arguments;if(A&&!this.__chain__){var L=this.value();return c.apply(gt(L)?L:[],T)}return this[m](function(Y){return c.apply(gt(Y)?Y:[],T)})}}),qn(Ct.prototype,function(u,c){var m=N[c];if(m){var A=m.name+"";Rt.call(ca,A)||(ca[A]=[]),ca[A].push({name:c,func:m})}}),ca[Zu(r,D).name]=[{name:"wrapper",func:r}],Ct.prototype.clone=gv,Ct.prototype.reverse=vv,Ct.prototype.value=mv,N.prototype.at=G_,N.prototype.chain=K_,N.prototype.commit=$_,N.prototype.next=Y_,N.prototype.plant=J_,N.prototype.reverse=Q_,N.prototype.toJSON=N.prototype.valueOf=N.prototype.value=X_,N.prototype.first=N.prototype.head,Za&&(N.prototype[Za]=Z_),N},oa=$g();zi?((zi.exports=oa)._=oa,Eo._=oa):Pr._=oa}).call(vr)})(qB,Js);const WB=Js,of="panelMode";function HB(){const t=or("select"),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[of]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[of]=a,r(a))},get:()=>kt(t),delete:()=>{i&&(delete localStorage[of],r("select"))}}}const pi=HB();function ap(t,e,r){const n=t.slice();return n[7]=e[r][0],n[8]=e[r][1],n}function up(t,e,r){const n=t.slice();return n[11]=e[r][0],n[12]=e[r][1],n}function sp(t){let e=t[12].text+"",r,n,i,a;return{c(){r=Oe(e),n=W("b"),i=Oe("::"),a=Se()},l(o){r=Me(o,e),n=H(o,"B",{});var s=R(n);i=Me(s,"::"),s.forEach(M),a=Be(o)},m(o,s){le(o,r,s),le(o,n,s),I(n,i),le(o,a,s)},p(o,s){s&1&&e!==(e=o[12].text+"")&&wr(r,e)},d(o){o&&M(r),o&&M(n),o&&M(a)}}}function op(t,e){let r,n,i,a,o,s=Object.entries(e[8].weightedPrompts),l=[];for(let f=0;f<s.length;f+=1)l[f]=sp(up(e,s,f));function p(){return e[5](e[7],e[8])}return{key:t,first:null,c(){r=W("li"),n=W("a");for(let f=0;f<l.length;f+=1)l[f].c();i=Se(),this.h()},l(f){r=H(f,"LI",{});var h=R(r);n=H(h,"A",{class:!0});var d=R(n);for(let g=0;g<l.length;g+=1)l[g].l(d);d.forEach(M),i=Be(h),h.forEach(M),this.h()},h(){F(n,"class","text-xs inline-block"),rt(n,"active",e[1]===e[7]),this.first=r},m(f,h){le(f,r,h),I(r,n);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(n,null);I(r,i),a||(o=ve(n,"click",p),a=!0)},p(f,h){if(e=f,h&5){s=Object.entries(e[8].weightedPrompts);let d;for(d=0;d<s.length;d+=1){const g=up(e,s,d);l[d]?l[d].p(g,h):(l[d]=sp(g),l[d].c(),l[d].m(n,null))}for(;d<l.length;d+=1)l[d].d(1);l.length=s.length}h&7&&rt(n,"active",e[1]===e[7])},d(f){f&&M(r),Xs(l,f),a=!1,o()}}}function GB(t){let e,r,n,i,a,o=[],s=new Map,l,p,f=t[2](t[0],lp,"desc");const h=d=>d[7];for(let d=0;d<f.length;d+=1){let g=ap(t,f,d),b=h(g);s.set(b,o[d]=op(b,g))}return{c(){e=W("ul"),r=W("li"),n=W("a"),i=Oe("New +"),a=Se();for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=H(d,"UL",{class:!0});var g=R(e);r=H(g,"LI",{});var b=R(r);n=H(b,"A",{class:!0});var v=R(n);i=Me(v,"New +"),v.forEach(M),b.forEach(M),a=Be(g);for(let _=0;_<o.length;_+=1)o[_].l(g);g.forEach(M),this.h()},h(){F(n,"class","text-xs inline-block"),F(e,"class","menu h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(d,g){le(d,e,g),I(e,r),I(r,n),I(n,i),I(e,a);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(e,null);l||(p=ve(n,"click",t[3]),l=!0)},p(d,[g]){g&23&&(f=d[2](d[0],lp,"desc"),o=Bn(o,g,h,1,d,f,s,e,Jn,op,null,ap))},i:Ce,o:Ce,d(d){d&&M(e);for(let g=0;g<o.length;g+=1)o[g].d();l=!1,p()}}}const lp=t=>t[1].date;function KB(t,e,r){let n,i,a;$e(t,ot,f=>r(6,n=f)),$e(t,mw,f=>r(0,i=f)),$e(t,Qi,f=>r(1,a=f));const{orderBy:o}=WB;function s(){Qi.delete(),ot.update(Bi({},n.weightMode)),pi.update("edit")}function l(f,h){Qi.update(f),ot.update({...h}),pi.update("edit")}return[i,a,o,s,l,(f,h)=>l(f,h)]}class $B extends Xe{constructor(e){super(),et(this,e,KB,GB,tt,{})}}function fp(t,e,r){const n=t.slice();return n[15]=e[r].id,n[16]=e[r].text,n}function cp(t,e){let r,n,i,a,o;function s(...l){return e[9](e[15],...l)}return{key:t,first:null,c(){r=W("li"),n=W("input"),this.h()},l(l){r=H(l,"LI",{class:!0});var p=R(r);n=H(p,"INPUT",{type:!0,placeholder:!0,class:!0}),p.forEach(M),this.h()},h(){n.value=i=e[16],F(n,"type","text"),F(n,"placeholder",""),F(n,"class","input input-bordered input-sm w-full"),F(r,"class","p-1"),this.first=r},m(l,p){le(l,r,p),I(r,n),a||(o=ve(n,"input",s),a=!0)},p(l,p){e=l,p&2&&i!==(i=e[16])&&n.value!==i&&(n.value=i)},d(l){l&&M(r),a=!1,o()}}}function YB(t){let e,r,n,i,a,o,s,l,p,f,h,d=[],g=new Map,b,v,_,D,S,w=t[1];const C=E=>E[15];for(let E=0;E<w.length;E+=1){let B=fp(t,w,E),k=C(B);g.set(k,d[E]=cp(k,B))}return{c(){e=W("div"),r=W("button"),n=Oe("Paste"),i=Se(),a=W("button"),o=Oe("Save"),s=Se(),l=W("button"),p=Oe("Delete"),f=Se(),h=W("ul");for(let E=0;E<d.length;E+=1)d[E].c();b=Se(),v=W("li"),_=W("input"),this.h()},l(E){e=H(E,"DIV",{class:!0});var B=R(e);r=H(B,"BUTTON",{class:!0});var k=R(r);n=Me(k,"Paste"),k.forEach(M),i=Be(B),a=H(B,"BUTTON",{class:!0});var O=R(a);o=Me(O,"Save"),O.forEach(M),s=Be(B),l=H(B,"BUTTON",{class:!0});var x=R(l);p=Me(x,"Delete"),x.forEach(M),B.forEach(M),f=Be(E),h=H(E,"UL",{class:!0});var K=R(h);for(let X=0;X<d.length;X+=1)d[X].l(K);b=Be(K),v=H(K,"LI",{class:!0});var $=R(v);_=H($,"INPUT",{type:!0,placeholder:!0,class:!0}),$.forEach(M),K.forEach(M),this.h()},h(){F(r,"class","btn btn-sm btn-info mx-2"),F(a,"class","btn btn-sm btn-success mx-2"),F(l,"class","btn btn-sm btn-error mx-2"),F(e,"class","flex px-8 py-2 justify-center bg-base-100"),F(_,"type","text"),F(_,"placeholder","Add prompt"),F(_,"class","input input-bordered input-sm w-full italic"),F(v,"class","p-1"),F(h,"class","h-screen p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(E,B){le(E,e,B),I(e,r),I(r,n),I(e,i),I(e,a),I(a,o),I(e,s),I(e,l),I(l,p),le(E,f,B),le(E,h,B);for(let k=0;k<d.length;k+=1)d[k]&&d[k].m(h,null);I(h,b),I(h,v),I(v,_),nn(_,t[0]),D||(S=[ve(r,"click",t[3]),ve(a,"click",t[2]),ve(l,"click",t[4]),ve(_,"input",t[10]),ve(_,"input",t[11])],D=!0)},p(E,[B]){B&34&&(w=E[1],d=Bn(d,B,C,1,E,w,g,h,Jn,cp,b,fp)),B&1&&_.value!==E[0]&&nn(_,E[0])},i:Ce,o:Ce,d(E){E&&M(e),E&&M(f),E&&M(h);for(let B=0;B<d.length;B+=1)d[B].d();D=!1,Wt(S)}}}function ZB(t,e,r){let n,i,a,o;$e(t,ot,S=>r(8,i=S)),$e(t,Qi,S=>r(12,a=S)),$e(t,jr,S=>r(13,o=S));let s="",l=Object.keys(i.weightedPrompts).length;function p(){du.update(go(),{...i,date:Date.now()}),pi.update("select")}function f(){navigator.clipboard.readText().then(S=>{const w=bu(S);h(w)})}function h(S){const w=Math.max(...S.map(([E,B])=>B)),C=S.reduce((E,[B,k],O)=>(E[O]=Nr(O,B,k,k/w),o[B]||jr.update(B,null),E),{});Qi.delete(),ot.update(Bi(C,i.weightMode)),r(0,s="")}function d(){a&&du.delete(a),Qi.delete(),ot.delete(),pi.update("select")}const g=Du((S,w)=>{let C={...i.weightedPrompts};if(!w){const k=Object.entries(i.weightedPrompts).filter(([O])=>O!==S).map(([O,x])=>[x.text,x.parsedWeight]);return h(k)}const E={...C[S],text:w};C[S]=E,ot.update({...i,weightedPrompts:C})},1e3),b=Du(S=>{const w=Object.entries(i.weightedPrompts).map(([C,E])=>[E.text,E.parsedWeight]);return w.push([S,1]),h(w)},1e3),v=(S,w)=>g(S,w.target.value);function _(){s=this.value,r(0,s),r(8,i),r(7,l)}const D=S=>b(S.target.value);return t.$$.update=()=>{if(t.$$.dirty&384){const S=Object.keys(i.weightedPrompts).length;S>l&&(r(7,l=S),r(0,s=""))}t.$$.dirty&256&&r(1,n=Object.entries(i.weightedPrompts).map(([S,w])=>({id:S,text:w.text})))},[s,n,p,f,d,g,b,l,i,v,_,D]}class JB extends Xe{constructor(e){super(),et(this,e,ZB,YB,tt,{})}}const QB=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. The first sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. The middle three sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. The final sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,XB=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 10 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. Four sentences should describe the subject.
    d. Four sentences should describe the scene.
    e. Tow sentences should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`,e4=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 10 concepts.
    a. Each concept should be 10 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
`,t4=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. Several concepts must include the subject.
3. The prompt should be constructed of 20 concepts.
    a. Each concept should be 5 to 15 words.
    b. Concepts can be lists of comma separated words.
    c. Concepts should not be complete sentences.
    d. Some concepts should describe the subject.
    e. Some concepts should describe the scene.
    f. Some concepts should be stylistic cues.
    g. Some concepts should be descriptions of light and color.
    h. Some concepts should be lists of relevant artists.
4. Use visually descriptive language.
5. The concepts should work together to describe a piece of art.

Format rules:
1. Each concept should be separated by a newline.
2. Do not number or name the concepts.
3. Do not use hyphens to mark list items.
4. Do not title the list.
`,r4=`Prompt Rules:

1. Any stylistic or artistic cues must be included.
2. The prompt should be constructed of 5 sentences.
    a. Each sentence should be 10 to 20 words.
    b. Each sentence should be a complete thought.
    c. One sentence should describe the subject. Example: A graceful woman with a flowing chiffon dress glides through a shimmering koi pond.
    d. Two sentences should describe visual elements of the scene. Example: The water is crystal clear, and you can see colorful koi swimming around.
    e. One sentence should describe the art with artist names and style cues. Example: A dreamy flowerpunk painting by Kilian Eng.
    f. One sentence should be a poetic concept or feeling. Example: The unfathomable depths of a lover's sigh.
        i. The poetic concept should be intense.
        ii. The poetic concept should be emotional.
        iii. The poetic concept should include abstract words.
3. Use visually descriptive language.
4. Each sentences should work together to describe a piece of art.
5. Include descriptions of light and color.

Format rules:
1. Each sentence should be separated by a newline.
`;function n4(){const t=or({}),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&Object.keys(localStorage).reduce((a,o)=>{if(o.startsWith("directive")){const s=o.split("_")[1];a[s]=JSON.parse(localStorage[o])}return a},{})||{}),{subscribe:e,update:(a,o)=>{const s=kt(t),p={...s[a]||{},...o};i&&(localStorage[`directive_${a}`]=JSON.stringify(p));const f={...s,[a]:p};r(f)},get:a=>kt(t)[a],delete:a=>{i&&delete localStorage[`directive_${a}`];const o={...kt(t)};delete o[a],r(o)}}}const Qs=n4(),i4=yu(Qs,t=>Object.entries(kt(Qs))),lf="preferredDirective";function a4(){const t=or(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[lf]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[lf]=a,r(a))},get:()=>kt(t),delete:()=>{i&&(delete localStorage[lf],r(""))}}}const bs=a4(),ff="metaPrompt";function u4(){const t=or(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[ff]||""),{subscribe:e,update:a=>{i&&(localStorage[ff]=a,r(a))},get:()=>kt(t),delete:()=>{i&&(delete localStorage[ff],r(""))}}}const xf=u4(),wa=or("");function hp(t,e,r){const n=t.slice();return n[21]=e[r][0],n[22]=e[r][1],n}function dp(t,e){let r,n=e[22].name+"",i,a=e[22].builtIn?" (Built-In)":" (User)",o,s,l;return{key:t,first:null,c(){r=W("option"),i=Oe(n),o=Oe(a),this.h()},l(p){r=H(p,"OPTION",{});var f=R(r);i=Me(f,n),o=Me(f,a),f.forEach(M),this.h()},h(){r.__value=s=e[21],r.value=r.__value,r.selected=l=e[3]===e[21],this.first=r},m(p,f){le(p,r,f),I(r,i),I(r,o)},p(p,f){e=p,f&16&&n!==(n=e[22].name+"")&&wr(i,n),f&16&&a!==(a=e[22].builtIn?" (Built-In)":" (User)")&&wr(o,a),f&16&&s!==(s=e[21])&&(r.__value=s,r.value=r.__value),f&24&&l!==(l=e[3]===e[21])&&(r.selected=l)},d(p){p&&M(r)}}}function pp(t){let e,r,n,i,a,o,s,l,p,f,h,d,g,b,v=!t[7]&&gp(t),_=t[6]&&vp(t);function D(C,E){return C[1]?o4:s4}let S=D(t),w=S(t);return{c(){v&&v.c(),e=Se(),r=W("div"),n=W("textarea"),i=Se(),a=W("div"),o=W("textarea"),s=Se(),l=W("div"),_&&_.c(),p=Se(),f=W("button"),h=Oe("Preview"),d=Se(),w.c(),this.h()},l(C){v&&v.l(C),e=Be(C),r=H(C,"DIV",{class:!0});var E=R(r);n=H(E,"TEXTAREA",{class:!0,placeholder:!0}),R(n).forEach(M),E.forEach(M),i=Be(C),a=H(C,"DIV",{class:!0});var B=R(a);o=H(B,"TEXTAREA",{class:!0,placeholder:!0}),R(o).forEach(M),B.forEach(M),s=Be(C),l=H(C,"DIV",{class:!0});var k=R(l);_&&_.l(k),p=Be(k),f=H(k,"BUTTON",{class:!0});var O=R(f);h=Me(O,"Preview"),O.forEach(M),d=Be(k),w.l(k),k.forEach(M),this.h()},h(){F(n,"class","font-mono text-xs textarea textarea-bordered w-full h-full resize-none"),F(n,"placeholder","GPT Directives"),F(r,"class","w-full p-2 h-1/2"),o.value=t[9],F(o,"class","textarea textarea-bordered w-full h-full resize-none"),F(o,"placeholder","Describe the prompt to generate."),F(a,"class","w-full p-2 h-1/5"),F(f,"class","btn btn-sm btn btn-info"),F(l,"class","w-full p-2 h-12 flex justify-between")},m(C,E){v&&v.m(C,E),le(C,e,E),le(C,r,E),I(r,n),nn(n,t[8]),le(C,i,E),le(C,a,E),I(a,o),le(C,s,E),le(C,l,E),_&&_.m(l,null),I(l,p),I(l,f),I(f,h),I(l,d),w.m(l,null),g||(b=[ve(n,"input",t[17]),ve(o,"input",t[18]),ve(f,"click",function(){Kn(t[0])&&t[0].apply(this,arguments)})],g=!0)},p(C,E){t=C,t[7]?v&&(v.d(1),v=null):v?v.p(t,E):(v=gp(t),v.c(),v.m(e.parentNode,e)),E&256&&nn(n,t[8]),E&512&&(o.value=t[9]),t[6]?_?_.p(t,E):(_=vp(t),_.c(),_.m(l,p)):_&&(_.d(1),_=null),S===(S=D(t))&&w?w.p(t,E):(w.d(1),w=S(t),w&&(w.c(),w.m(l,null)))},d(C){v&&v.d(C),C&&M(e),C&&M(r),C&&M(i),C&&M(a),C&&M(s),C&&M(l),_&&_.d(),w.d(),g=!1,Wt(b)}}}function gp(t){let e,r,n,i,a,o,s;return{c(){e=W("div"),r=W("input"),n=Se(),i=W("button"),a=Oe("Save"),this.h()},l(l){e=H(l,"DIV",{class:!0});var p=R(e);r=H(p,"INPUT",{type:!0,placeholder:!0,class:!0}),n=Be(p),i=H(p,"BUTTON",{class:!0});var f=R(i);a=Me(f,"Save"),f.forEach(M),p.forEach(M),this.h()},h(){F(r,"type","text"),F(r,"placeholder","Name"),F(r,"class","input input-bordered input-sm w-full max-w-xs"),F(i,"class","btn btn-sm btn-primary ml-4"),F(e,"class","w-full p-2 h-12 flex justify-between")},m(l,p){le(l,e,p),I(e,r),nn(r,t[5]),I(e,n),I(e,i),I(i,a),o||(s=[ve(r,"input",t[16]),ve(i,"click",t[10])],o=!0)},p(l,p){p&32&&r.value!==l[5]&&nn(r,l[5])},d(l){l&&M(e),o=!1,Wt(s)}}}function vp(t){let e,r,n,i;return{c(){e=W("button"),r=Oe("Delete"),this.h()},l(a){e=H(a,"BUTTON",{class:!0});var o=R(e);r=Me(o,"Delete"),o.forEach(M),this.h()},h(){F(e,"class","btn btn-sm btn-error")},m(a,o){le(a,e,o),I(e,r),n||(i=ve(e,"click",t[11]),n=!0)},p:Ce,d(a){a&&M(e),n=!1,i()}}}function s4(t){let e,r,n,i;return{c(){e=W("button"),r=Oe("Generate"),this.h()},l(a){e=H(a,"BUTTON",{class:!0});var o=R(e);r=Me(o,"Generate"),o.forEach(M),this.h()},h(){F(e,"class","btn btn-sm btn-primary")},m(a,o){le(a,e,o),I(e,r),n||(i=ve(e,"click",function(){Kn(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(a,o){t=a},d(a){a&&M(e),n=!1,i()}}}function o4(t){let e,r;return{c(){e=W("button"),r=Oe("Generating"),this.h()},l(n){e=H(n,"BUTTON",{class:!0});var i=R(e);r=Me(i,"Generating"),i.forEach(M),this.h()},h(){F(e,"class","btn btn-sm btn disabled")},m(n,i){le(n,e,i),I(e,r)},p:Ce,d(n){n&&M(e)}}}function l4(t){let e,r,n,i,a,o,s,l,p,f,h=[],d=new Map,g,b,v,_,D,S,w,C=Object.entries(t[4]);const E=k=>k[21];for(let k=0;k<C.length;k+=1){let O=hp(t,C,k),x=E(O);d.set(x,h[k]=dp(x,O))}let B=t[3]&&pp(t);return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=Oe("Pick a directive for prompt creation"),o=Se(),s=W("select"),l=W("option"),p=Oe("Pick one");for(let k=0;k<h.length;k+=1)h[k].c();g=W("option"),b=Oe("New"),_=Se(),B&&B.c(),D=wt(),this.h()},l(k){e=H(k,"DIV",{class:!0});var O=R(e);r=H(O,"DIV",{class:!0});var x=R(r);n=H(x,"LABEL",{class:!0});var K=R(n);i=H(K,"SPAN",{class:!0});var $=R(i);a=Me($,"Pick a directive for prompt creation"),$.forEach(M),K.forEach(M),o=Be(x),s=H(x,"SELECT",{class:!0});var X=R(s);l=H(X,"OPTION",{});var j=R(l);p=Me(j,"Pick one"),j.forEach(M);for(let z=0;z<h.length;z+=1)h[z].l(X);g=H(X,"OPTION",{});var U=R(g);b=Me(U,"New"),U.forEach(M),X.forEach(M),x.forEach(M),O.forEach(M),_=Be(k),B&&B.l(k),D=wt(),this.h()},h(){F(i,"class","label-text"),F(n,"class","label"),l.disabled=!0,l.selected=f=t[3]===null,l.__value="Pick one",l.value=l.__value,g.__value="new",g.value=g.__value,g.selected=v=t[3]==="new",F(s,"class","select select-bordered"),F(r,"class","form-control w-full max-w-xs mb-4"),F(e,"class","flex justify-center")},m(k,O){le(k,e,O),I(e,r),I(r,n),I(n,i),I(i,a),I(r,o),I(r,s),I(s,l),I(l,p);for(let x=0;x<h.length;x+=1)h[x]&&h[x].m(s,null);I(s,g),I(g,b),ki(s,t[3]),le(k,_,O),B&&B.m(k,O),le(k,D,O),S||(w=ve(s,"change",t[12]),S=!0)},p(k,[O]){O&24&&f!==(f=k[3]===null)&&(l.selected=f),O&24&&(C=Object.entries(k[4]),h=Bn(h,O,E,1,k,C,d,s,Jn,dp,g,hp)),O&24&&v!==(v=k[3]==="new")&&(g.selected=v),O&24&&ki(s,k[3]),k[3]?B?B.p(k,O):(B=pp(k),B.c(),B.m(D.parentNode,D)):B&&(B.d(1),B=null)},i:Ce,o:Ce,d(k){k&&M(e);for(let O=0;O<h.length;O+=1)h[O].d();k&&M(_),B&&B.d(k),k&&M(D),S=!1,w()}}}function f4(t,e,r){let n,i,a,o,s,l,p,f;$e(t,wa,O=>r(8,s=O)),$e(t,bs,O=>r(14,l=O)),$e(t,i4,O=>r(15,p=O)),$e(t,xf,O=>r(9,f=O));let{togglePreview:h=()=>{}}=e,{isGenerating:d=!1}=e,{handleGeneratePrompt:g=()=>{}}=e,b={C:{name:"Five Sentences",text:QB,builtIn:!0},D:{name:"Ten Sentences",text:XB,builtIn:!0},E:{name:"Fragments",text:e4,builtIn:!0},F:{name:"Concept Shotgun",text:t4,builtIn:!0},G:{name:"Poetic Accents",text:r4,builtIn:!0}},v=null,_="";function D(){const O=v==="new"?go():v;Qs.update(O,{name:_,text:s,builtIn:!1}),v==="new"&&(r(3,v=O),bs.update(O))}function S(){Qs.delete(v),r(3,v=null),r(5,_=""),wa.set(""),bs.delete()}function w(O){r(3,v=O),bs.update(O),O&&O!=="new"?(r(5,_=i[O].name),wa.set(i[O].text)):O==="new"&&(r(5,_=""),wa.set(""))}function C(O){w(O.target.value)}function E(){_=this.value,r(5,_)}function B(){s=this.value,wa.set(s)}const k=O=>xf.update(O.target.value);return t.$$set=O=>{"togglePreview"in O&&r(0,h=O.togglePreview),"isGenerating"in O&&r(1,d=O.isGenerating),"handleGeneratePrompt"in O&&r(2,g=O.handleGeneratePrompt)},t.$$.update=()=>{t.$$.dirty&32768&&r(13,n=p.reduce((O,[x,K])=>(O[x]={name:K.name,text:K.text,builtIn:!1},O),{})),t.$$.dirty&8192&&r(4,i=Object.entries({...b,...n}).reduce((O,[x,K])=>(O[x]=K,O),{})),t.$$.dirty&16392&&v===null&&l&&(r(3,v=l),w(v)),t.$$.dirty&24&&r(7,a=v&&v!=="new"&&i[v].builtIn),t.$$.dirty&24&&r(6,o=v&&v!=="new"&&!i[v].builtIn)},[h,d,g,v,i,_,o,a,s,f,D,S,C,n,l,p,E,B,k]}class c4 extends Xe{constructor(e){super(),et(this,e,f4,l4,tt,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}function h4(t,e){return`${t}

Use the following text to generate output based on the instructions above:

${e}`}const ig=yu([wa,xf,Xi],t=>_u(h4(t[0],t[1]),t[2]));function d4(t){let e,r,n,i;return{c(){e=W("button"),r=Oe("Generate"),this.h()},l(a){e=H(a,"BUTTON",{class:!0});var o=R(e);r=Me(o,"Generate"),o.forEach(M),this.h()},h(){F(e,"class","btn btn-sm btn-primary")},m(a,o){le(a,e,o),I(e,r),n||(i=ve(e,"click",function(){Kn(t[2])&&t[2].apply(this,arguments)}),n=!0)},p(a,o){t=a},d(a){a&&M(e),n=!1,i()}}}function p4(t){let e,r;return{c(){e=W("button"),r=Oe("Generating"),this.h()},l(n){e=H(n,"BUTTON",{class:!0});var i=R(e);r=Me(i,"Generating"),i.forEach(M),this.h()},h(){F(e,"class","btn btn-sm btn disabled")},m(n,i){le(n,e,i),I(e,r)},p:Ce,d(n){n&&M(e)}}}function g4(t){let e,r,n,i,a,o,s,l,p,f;function h(b,v){return b[1]?p4:d4}let d=h(t),g=d(t);return{c(){e=W("div"),r=W("p"),n=Oe(t[3]),i=Se(),a=W("div"),o=W("button"),s=Oe("Back"),l=Se(),g.c(),this.h()},l(b){e=H(b,"DIV",{class:!0});var v=R(e);r=H(v,"P",{class:!0});var _=R(r);n=Me(_,t[3]),_.forEach(M),v.forEach(M),i=Be(b),a=H(b,"DIV",{class:!0});var D=R(a);o=H(D,"BUTTON",{class:!0});var S=R(o);s=Me(S,"Back"),S.forEach(M),l=Be(D),g.l(D),D.forEach(M),this.h()},h(){F(r,"class","font-mono text-xs whitespace-pre-wrap"),F(e,"class","p-4 overflow-y-auto"),F(o,"class","btn btn-sm btn btn-info"),F(a,"class","w-full p-2 h-12 flex justify-between")},m(b,v){le(b,e,v),I(e,r),I(r,n),le(b,i,v),le(b,a,v),I(a,o),I(o,s),I(a,l),g.m(a,null),p||(f=ve(o,"click",function(){Kn(t[0])&&t[0].apply(this,arguments)}),p=!0)},p(b,[v]){t=b,v&8&&wr(n,t[3]),d===(d=h(t))&&g?g.p(t,v):(g.d(1),g=d(t),g&&(g.c(),g.m(a,null)))},i:Ce,o:Ce,d(b){b&&M(e),b&&M(i),b&&M(a),g.d(),p=!1,f()}}}function v4(t,e,r){let n;$e(t,ig,s=>r(3,n=s));let{togglePreview:i=()=>{}}=e,{isGenerating:a=!1}=e,{handleGeneratePrompt:o=()=>{}}=e;return t.$$set=s=>{"togglePreview"in s&&r(0,i=s.togglePreview),"isGenerating"in s&&r(1,a=s.isGenerating),"handleGeneratePrompt"in s&&r(2,o=s.handleGeneratePrompt)},[i,a,o,n]}class m4 extends Xe{constructor(e){super(),et(this,e,v4,g4,tt,{togglePreview:0,isGenerating:1,handleGeneratePrompt:2})}}const cf="preferredModel";function _4(){const t=or(""),{subscribe:e,set:r,update:n}=t,i=typeof window<"u";return r(i&&localStorage[cf]||""),{subscribe:e,update:a=>{!a||!i||(localStorage[cf]=a,r(a))},get:()=>kt(t),delete:()=>{i&&(delete localStorage[cf],r(""))}}}const Lf=_4();function b4(t){let e,r,n;return{c(){e=W("div"),r=W("p"),n=Oe("Set Open AI Key in settings for GPT generation."),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=R(e);r=H(a,"P",{class:!0});var o=R(r);n=Me(o,"Set Open AI Key in settings for GPT generation."),o.forEach(M),a.forEach(M),this.h()},h(){F(r,"class","text-center"),F(e,"class","w-full p-2 flex justify-center")},m(i,a){le(i,e,a),I(e,r),I(r,n)},p:Ce,i:Ce,o:Ce,d(i){i&&M(e)}}}function D4(t){let e,r,n,i;const a=[w4,y4],o=[];function s(l,p){return l[1]?0:1}return e=s(t),r=o[e]=a[e](t),{c(){r.c(),n=wt()},l(l){r.l(l),n=wt()},m(l,p){o[e].m(l,p),le(l,n,p),i=!0},p(l,p){let f=e;e=s(l),e===f?o[e].p(l,p):(rr(),_e(o[f],1,1,()=>{o[f]=null}),nr(),r=o[e],r?r.p(l,p):(r=o[e]=a[e](l),r.c()),he(r,1),r.m(n.parentNode,n))},i(l){i||(he(r),i=!0)},o(l){_e(r),i=!1},d(l){o[e].d(l),l&&M(n)}}}function y4(t){let e,r;return e=new c4({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},p(n,i){const a={};i&1&&(a.isGenerating=n[0]),e.$set(a)},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function w4(t){let e,r;return e=new m4({props:{togglePreview:t[4],handleGeneratePrompt:t[3],isGenerating:t[0]}}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},p(n,i){const a={};i&1&&(a.isGenerating=n[0]),e.$set(a)},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function E4(t){let e,r,n,i;const a=[D4,b4],o=[];function s(l,p){return l[2]?0:1}return r=s(t),n=o[r]=a[r](t),{c(){e=W("div"),n.c(),this.h()},l(l){e=H(l,"DIV",{class:!0});var p=R(e);n.l(p),p.forEach(M),this.h()},h(){F(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(l,p){le(l,e,p),o[r].m(e,null),i=!0},p(l,[p]){n.p(l,p)},i(l){i||(he(n),i=!0)},o(l){_e(n),i=!1},d(l){l&&M(e),o[r].d()}}}function A4(t,e,r){let n,i,a,o,s,l;$e(t,ig,D=>r(7,i=D)),$e(t,ot,D=>r(8,a=D)),$e(t,jr,D=>r(9,o=D)),$e(t,Lf,D=>r(5,s=D)),$e(t,di,D=>r(10,l=D));const p=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001"];let f=!1,h=l,d=!1;function g(D,S){const w=Zs(D),C=n||"gpt-3.5-turbo";r(0,f=!0),vB(w,S,C).then(E=>{console.log(E),E.data.choices.forEach((B,k)=>{const O=bu(B.message.content);console.log(O);const x=O.reduce((K,[$,X],j)=>(K[j]=Nr(j,$,X),o[$]||jr.update($,null),K),{});ot.update(Bi(x,a.weightMode)),pi.update("edit"),Xi.shuffle()})}).finally(()=>{r(0,f=!1)})}function b(D,S){const w=Zs(D),C=n||"text-davinci-003";r(0,f=!0),gB(w,S,C).then(E=>{console.log(E),E.data.choices.forEach((B,k)=>{const O=bu(B.text);console.log(O);const x=O.reduce((K,[$,X],j)=>(K[j]=Nr(j,$,X),o[$]||jr.update($,null),K),{});ot.update(Bi(x,a.weightMode)),pi.update("edit"),Xi.shuffle()})}).finally(()=>{r(0,f=!1)})}function v(){h&&(p.includes(n)?b(h,i):g(h,i))}function _(){console.log(i),r(1,d=!d)}return t.$$.update=()=>{t.$$.dirty&32&&(n=s||null)},[f,d,h,v,_,s]}class C4 extends Xe{constructor(e){super(),et(this,e,A4,E4,tt,{})}}function mp(t,e,r){const n=t.slice();return n[18]=e[r],n}function _p(t,e,r){const n=t.slice();return n[18]=e[r],n}function F4(t){return{c:Ce,l:Ce,m:Ce,p:Ce,d:Ce}}function S4(t){let e,r,n=t[0].length>0&&bp(t),i=t[1].length>0&&yp(t);return{c(){n&&n.c(),e=Se(),i&&i.c(),r=wt()},l(a){n&&n.l(a),e=Be(a),i&&i.l(a),r=wt()},m(a,o){n&&n.m(a,o),le(a,e,o),i&&i.m(a,o),le(a,r,o)},p(a,o){a[0].length>0?n?n.p(a,o):(n=bp(a),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),a[1].length>0?i?i.p(a,o):(i=yp(a),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(a){n&&n.d(a),a&&M(e),i&&i.d(a),a&&M(r)}}}function bp(t){let e,r,n,i,a,o,s,l,p,f,h=[],d=new Map,g,b,v=t[0];const _=D=>D[18];for(let D=0;D<v.length;D+=1){let S=_p(t,v,D),w=_(S);d.set(w,h[D]=Dp(w,S))}return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=Oe("Pick a model to use for model generation"),o=Se(),s=W("select"),l=W("option"),p=Oe("Pick one");for(let D=0;D<h.length;D+=1)h[D].c();this.h()},l(D){e=H(D,"DIV",{class:!0});var S=R(e);r=H(S,"DIV",{class:!0});var w=R(r);n=H(w,"LABEL",{class:!0});var C=R(n);i=H(C,"SPAN",{class:!0});var E=R(i);a=Me(E,"Pick a model to use for model generation"),E.forEach(M),C.forEach(M),o=Be(w),s=H(w,"SELECT",{class:!0});var B=R(s);l=H(B,"OPTION",{});var k=R(l);p=Me(k,"Pick one"),k.forEach(M);for(let O=0;O<h.length;O+=1)h[O].l(B);B.forEach(M),w.forEach(M),S.forEach(M),this.h()},h(){F(i,"class","label-text"),F(n,"class","label"),l.disabled=!0,l.selected=f=t[2]===null,l.__value="Pick one",l.value=l.__value,F(s,"class","select select-bordered"),F(r,"class","form-control w-full max-w-xs mb-4"),F(e,"class","flex justify-center")},m(D,S){le(D,e,S),I(e,r),I(r,n),I(n,i),I(i,a),I(r,o),I(r,s),I(s,l),I(l,p);for(let w=0;w<h.length;w+=1)h[w]&&h[w].m(s,null);ki(s,t[2]),g||(b=ve(s,"change",t[6]),g=!0)},p(D,S){S&5&&f!==(f=D[2]===null)&&(l.selected=f),S&5&&(v=D[0],h=Bn(h,S,_,1,D,v,d,s,Jn,Dp,null,_p)),S&5&&ki(s,D[2])},d(D){D&&M(e);for(let S=0;S<h.length;S+=1)h[S].d();g=!1,b()}}}function Dp(t,e){let r,n=e[18]+"",i,a,o;return{key:t,first:null,c(){r=W("option"),i=Oe(n),this.h()},l(s){r=H(s,"OPTION",{});var l=R(r);i=Me(l,n),l.forEach(M),this.h()},h(){r.__value=a=e[18],r.value=r.__value,r.selected=o=e[2]===e[18],this.first=r},m(s,l){le(s,r,l),I(r,i)},p(s,l){e=s,l&1&&n!==(n=e[18]+"")&&wr(i,n),l&1&&a!==(a=e[18])&&(r.__value=a,r.value=r.__value),l&5&&o!==(o=e[2]===e[18])&&(r.selected=o)},d(s){s&&M(r)}}}function yp(t){let e,r,n,i,a,o,s,l,p,f,h=[],d=new Map,g,b,v=t[1];const _=D=>D[18];for(let D=0;D<v.length;D+=1){let S=mp(t,v,D),w=_(S);d.set(w,h[D]=wp(w,S))}return{c(){e=W("div"),r=W("div"),n=W("label"),i=W("span"),a=Oe("Pick a model to use for prompt embedding"),o=Se(),s=W("select"),l=W("option"),p=Oe("Pick one");for(let D=0;D<h.length;D+=1)h[D].c();this.h()},l(D){e=H(D,"DIV",{class:!0});var S=R(e);r=H(S,"DIV",{class:!0});var w=R(r);n=H(w,"LABEL",{class:!0});var C=R(n);i=H(C,"SPAN",{class:!0});var E=R(i);a=Me(E,"Pick a model to use for prompt embedding"),E.forEach(M),C.forEach(M),o=Be(w),s=H(w,"SELECT",{class:!0});var B=R(s);l=H(B,"OPTION",{});var k=R(l);p=Me(k,"Pick one"),k.forEach(M);for(let O=0;O<h.length;O+=1)h[O].l(B);B.forEach(M),w.forEach(M),S.forEach(M),this.h()},h(){F(i,"class","label-text"),F(n,"class","label"),l.disabled=!0,l.selected=f=t[3]===null,l.__value="Pick one",l.value=l.__value,F(s,"class","select select-bordered"),F(r,"class","form-control w-full max-w-xs mb-4"),F(e,"class","flex justify-center")},m(D,S){le(D,e,S),I(e,r),I(r,n),I(n,i),I(i,a),I(r,o),I(r,s),I(s,l),I(l,p);for(let w=0;w<h.length;w+=1)h[w]&&h[w].m(s,null);ki(s,t[3]),g||(b=ve(s,"change",t[7]),g=!0)},p(D,S){S&10&&f!==(f=D[3]===null)&&(l.selected=f),S&10&&(v=D[1],h=Bn(h,S,_,1,D,v,d,s,Jn,wp,null,mp)),S&10&&ki(s,D[3])},d(D){D&&M(e);for(let S=0;S<h.length;S+=1)h[S].d();g=!1,b()}}}function wp(t,e){let r,n=e[18]+"",i,a,o;return{key:t,first:null,c(){r=W("option"),i=Oe(n),this.h()},l(s){r=H(s,"OPTION",{});var l=R(r);i=Me(l,n),l.forEach(M),this.h()},h(){r.__value=a=e[18],r.value=r.__value,r.selected=o=e[3]===e[18],this.first=r},m(s,l){le(s,r,l),I(r,i)},p(s,l){e=s,l&2&&n!==(n=e[18]+"")&&wr(i,n),l&2&&a!==(a=e[18])&&(r.__value=a,r.value=r.__value),l&10&&o!==(o=e[3]===e[18])&&(r.selected=o)},d(s){s&&M(r)}}}function B4(t){let e,r,n;return{c(){e=W("div"),r=W("div"),n=W("progress"),this.h()},l(i){e=H(i,"DIV",{class:!0});var a=R(e);r=H(a,"DIV",{class:!0});var o=R(r);n=H(o,"PROGRESS",{class:!0}),R(n).forEach(M),o.forEach(M),a.forEach(M),this.h()},h(){F(n,"class","progress progress-primary w-56"),F(r,"class","form-control w-full flex flex-col max-w-xs"),F(e,"class","py-10 flex justify-center")},m(i,a){le(i,e,a),I(e,r),I(r,n)},p:Ce,d(i){i&&M(e)}}}function O4(t){let e,r,n,i,a,o,s,l,p,f,h,d,g,b,v,_,D={ctx:t,current:null,token:null,hasCatch:!1,pending:B4,then:S4,catch:F4,value:17};return Cs(b=t[4],D),{c(){e=W("div"),r=W("div"),n=W("div"),i=W("label"),a=W("span"),o=Oe("Open AI Key"),s=Se(),l=W("input"),p=Se(),f=W("label"),h=W("button"),d=Oe("Clear"),g=Se(),D.block.c(),this.h()},l(S){e=H(S,"DIV",{class:!0});var w=R(e);r=H(w,"DIV",{class:!0});var C=R(r);n=H(C,"DIV",{class:!0});var E=R(n);i=H(E,"LABEL",{class:!0});var B=R(i);a=H(B,"SPAN",{class:!0});var k=R(a);o=Me(k,"Open AI Key"),k.forEach(M),B.forEach(M),s=Be(E),l=H(E,"INPUT",{type:!0,placeholder:!0,class:!0}),p=Be(E),f=H(E,"LABEL",{class:!0});var O=R(f);h=H(O,"BUTTON",{class:!0});var x=R(h);d=Me(x,"Clear"),x.forEach(M),O.forEach(M),E.forEach(M),C.forEach(M),g=Be(w),D.block.l(w),w.forEach(M),this.h()},h(){F(a,"class","label-text-alt"),F(i,"class","label"),l.value=t[5],F(l,"type","password"),F(l,"placeholder","Open AI Key"),F(l,"class","input input-bordered w-full max-w-xs"),F(h,"class","btn btn-xs btn-error"),F(f,"class","label"),F(n,"class","form-control w-full max-w-xs"),F(r,"class","flex justify-center"),F(e,"class","h-full p-4 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(S,w){le(S,e,w),I(e,r),I(r,n),I(n,i),I(i,a),I(a,o),I(n,s),I(n,l),I(n,p),I(n,f),I(f,h),I(h,d),I(e,g),D.block.m(e,D.anchor=null),D.mount=()=>e,D.anchor=null,v||(_=[ve(l,"input",t[8]),ve(h,"click",t[9])],v=!0)},p(S,[w]){t=S,w&32&&l.value!==t[5]&&(l.value=t[5]),D.ctx=t,w&16&&b!==(b=t[4])&&Cs(b,D)||kp(D,t,w)},i:Ce,o:Ce,d(S){S&&M(e),D.block.d(),D.token=null,D=null,v=!1,Wt(_)}}}function M4(t,e,r){let n,i,a,o;$e(t,ot,C=>r(11,n=C)),$e(t,Nf,C=>r(12,i=C)),$e(t,Lf,C=>r(13,a=C)),$e(t,di,C=>r(5,o=C));const s=["text-davinci-003","text-curie-001","text-babage-001","text-ada-001","gpt-3.5-turbo","gpt-3.5-turbo-0301"],l=["text-embedding-ada-002"];let p=o,f=[],h=[],d=a,g=i,b=null;async function v(C){if(!C||f.length&&h.length)return;const E=Zs(C);r(4,b=_B(E));const B=await b;B.data&&r(0,f=B.data.data.map(({id:k})=>k).filter(k=>s.includes(k))),r(1,h=B.data.data.map(({id:k})=>k).filter(k=>l.includes(k)))}function _(C){r(2,d=C.target.value),Lf.update(d)}function D(C){r(3,g=C.target.value),Nf.update(g)}function S(C){const E=C.target.value;di.update(E),E.length===51&&v(E),E.length===0&&w()}function w(){di.delete(),r(10,p=""),r(0,f=[]),r(1,h=[]),n.weightMode===mt.Embed&&ot.update({...n,weightMode:mt.Circle})}return t.$$.update=()=>{t.$$.dirty&1024&&v(p)},[f,h,d,g,b,o,_,D,S,w,p]}class P4 extends Xe{constructor(e){super(),et(this,e,M4,O4,tt,{})}}function k4(t){let e,r;return{c(){e=nt("svg"),r=nt("path"),this.h()},l(n){e=it(n,"svg",{xmlns:!0,class:!0,viewBox:!0});var i=R(e);r=it(i,"path",{fill:!0,d:!0}),R(r).forEach(M),i.forEach(M),this.h()},h(){F(r,"fill","rgba(255,255,255, 0.7)"),F(r,"d","M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"),F(e,"xmlns","http://www.w3.org/2000/svg"),F(e,"class","h-4 w-4"),F(e,"viewBox","0 0 24 24")},m(n,i){le(n,e,i),I(e,r)},p:Ce,i:Ce,o:Ce,d(n){n&&M(e)}}}class T4 extends Xe{constructor(e){super(),et(this,e,null,k4,tt,{})}}function Ep(t,e,r){const n=t.slice();return n[17]=e[r],n[19]=r,n}function Ap(t,e,r){const n=t.slice();return n[20]=e[r][0],n[21]=e[r][1],n}function Cp(t,e){let r,n=e[21].name+"",i,a,o;return{key:t,first:null,c(){r=W("option"),i=Oe(n),this.h()},l(s){r=H(s,"OPTION",{});var l=R(r);i=Me(l,n),l.forEach(M),this.h()},h(){r.__value=a=e[20],r.value=r.__value,r.selected=o=e[0]===e[20],this.first=r},m(s,l){le(s,r,l),I(r,i)},p(s,l){e=s,l&16&&n!==(n=e[21].name+"")&&wr(i,n),l&16&&a!==(a=e[20])&&(r.__value=a,r.value=r.__value),l&17&&o!==(o=e[0]===e[20])&&(r.selected=o)},d(s){s&&M(r)}}}function Fp(t){let e,r,n,i,a,o,s,l,p,f=Gs(t[1])+"",h,d,g=(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1]),b,v,_,D,S,w,C,E,B,k,O,x,K,$,X=g&&Sp(),j=t[3]&&Bp(t);return{c(){e=W("div"),r=W("div"),n=W("input"),i=Se(),a=W("div"),o=W("label"),s=W("span"),l=Oe("Alias: "),p=W("b"),h=Oe(f),d=Se(),X&&X.c(),b=Se(),v=W("button"),_=Oe("Save"),D=Se(),S=W("ul"),j&&j.c(),w=Se(),C=W("li"),E=W("input"),B=Se(),k=W("div"),O=W("button"),x=Oe("Delete"),this.h()},l(U){e=H(U,"DIV",{class:!0});var z=R(e);r=H(z,"DIV",{class:!0});var V=R(r);n=H(V,"INPUT",{type:!0,placeholder:!0,class:!0}),i=Be(V),a=H(V,"DIV",{class:!0,"data-tip":!0});var J=R(a);o=H(J,"LABEL",{class:!0});var ae=R(o);s=H(ae,"SPAN",{class:!0});var ne=R(s);l=Me(ne,"Alias: "),p=H(ne,"B",{class:!0});var se=R(p);h=Me(se,f),se.forEach(M),ne.forEach(M),ae.forEach(M),J.forEach(M),d=Be(V),X&&X.l(V),V.forEach(M),b=Be(z),v=H(z,"BUTTON",{class:!0});var De=R(v);_=Me(De,"Save"),De.forEach(M),z.forEach(M),D=Be(U),S=H(U,"UL",{class:!0});var we=R(S);j&&j.l(we),w=Be(we),C=H(we,"LI",{class:!0});var Fe=R(C);E=H(Fe,"INPUT",{type:!0,placeholder:!0,class:!0}),Fe.forEach(M),we.forEach(M),B=Be(U),k=H(U,"DIV",{class:!0});var xe=R(k);O=H(xe,"BUTTON",{class:!0});var ke=R(O);x=Me(ke,"Delete"),ke.forEach(M),xe.forEach(M),this.h()},h(){F(n,"type","text"),F(n,"placeholder","Name"),F(n,"class","input input-bordered input-sm w-full max-w-xs"),F(p,"class","text-white cursor-copy"),F(s,"class","label-text"),F(o,"class","label"),F(a,"class","tooltip tooltip-primary tooltip-bottom"),F(a,"data-tip","Use in prompts or directives to get random slot."),F(r,"class","flex flex-col w-full pr-2 "),F(v,"class","btn btn-sm btn-primary"),rt(v,"btn-disabled",!pd(t[1])||(t[0]==="new"||t[3]&&t[3].name!==t[1])&&!t[5](t[1])),F(e,"class","w-full p-2 flex justify-between"),F(E,"type","text"),F(E,"placeholder","Add slot"),F(E,"class","input input-bordered input-sm w-full italic"),F(C,"class","p-1"),F(S,"class","px-4 py-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block"),F(O,"class","btn btn-sm btn-error ml-4"),F(k,"class","w-full p-2 h-12 flex justify-between")},m(U,z){le(U,e,z),I(e,r),I(r,n),nn(n,t[1]),I(r,i),I(r,a),I(a,o),I(o,s),I(s,l),I(s,p),I(p,h),I(r,d),X&&X.m(r,null),I(e,b),I(e,v),I(v,_),le(U,D,z),le(U,S,z),j&&j.m(S,null),I(S,w),I(S,C),I(C,E),nn(E,t[2]),le(U,B,z),le(U,k,z),I(k,O),I(O,x),K||($=[ve(n,"input",t[11]),ve(p,"click",t[12]),ve(v,"click",t[6]),ve(E,"input",t[14]),ve(E,"input",t[15]),ve(O,"click",t[7])],K=!0)},p(U,z){z&2&&n.value!==U[1]&&nn(n,U[1]),z&2&&f!==(f=Gs(U[1])+"")&&wr(h,f),z&11&&(g=(U[0]==="new"||U[3]&&U[3].name!==U[1])&&!U[5](U[1])),g?X||(X=Sp(),X.c(),X.m(r,null)):X&&(X.d(1),X=null),z&43&&rt(v,"btn-disabled",!pd(U[1])||(U[0]==="new"||U[3]&&U[3].name!==U[1])&&!U[5](U[1])),U[3]?j?j.p(U,z):(j=Bp(U),j.c(),j.m(S,w)):j&&(j.d(1),j=null),z&4&&E.value!==U[2]&&nn(E,U[2])},d(U){U&&M(e),X&&X.d(),U&&M(D),U&&M(S),j&&j.d(),U&&M(B),U&&M(k),K=!1,Wt($)}}}function Sp(t){let e,r,n;return{c(){e=W("label"),r=W("span"),n=Oe("Name In Use"),this.h()},l(i){e=H(i,"LABEL",{class:!0});var a=R(e);r=H(a,"SPAN",{class:!0});var o=R(r);n=Me(o,"Name In Use"),o.forEach(M),a.forEach(M),this.h()},h(){F(r,"class","label-text text-orange-300"),F(e,"class","label")},m(i,a){le(i,e,a),I(e,r),I(r,n)},d(i){i&&M(e)}}}function Bp(t){let e=[],r=new Map,n,i=t[3].values;const a=o=>o[19];for(let o=0;o<i.length;o+=1){let s=Ep(t,i,o),l=a(s);r.set(l,e[o]=Op(l,s))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();n=wt()},l(o){for(let s=0;s<e.length;s+=1)e[s].l(o);n=wt()},m(o,s){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(o,s);le(o,n,s)},p(o,s){s&264&&(i=o[3].values,e=Bn(e,s,a,1,o,i,r,n.parentNode,Jn,Op,n,Ep))},d(o){for(let s=0;s<e.length;s+=1)e[s].d(o);o&&M(n)}}}function Op(t,e){let r,n,i,a,o,s;function l(...p){return e[13](e[19],...p)}return{key:t,first:null,c(){r=W("li"),n=W("input"),a=Se(),this.h()},l(p){r=H(p,"LI",{class:!0});var f=R(r);n=H(f,"INPUT",{type:!0,placeholder:!0,class:!0}),a=Be(f),f.forEach(M),this.h()},h(){n.value=i=e[17],F(n,"type","text"),F(n,"placeholder",""),F(n,"class","input input-bordered input-sm w-full"),F(r,"class","p-1"),this.first=r},m(p,f){le(p,r,f),I(r,n),I(r,a),o||(s=ve(n,"input",l),o=!0)},p(p,f){e=p,f&8&&i!==(i=e[17])&&n.value!==i&&(n.value=i)},d(p){p&&M(r),o=!1,s()}}}function I4(t){let e,r,n,i,a,o,s,l,p,f,h,d=[],g=new Map,b,v,_,D,S,w,C=Object.entries(t[4]);const E=k=>k[20];for(let k=0;k<C.length;k+=1){let O=Ap(t,C,k),x=E(O);g.set(x,d[k]=Cp(x,O))}let B=t[0]&&Fp(t);return{c(){e=W("div"),r=W("div"),n=W("div"),i=W("label"),a=W("span"),o=Oe("Edit Slots"),s=Se(),l=W("select"),p=W("option"),f=Oe("Pick one");for(let k=0;k<d.length;k+=1)d[k].c();b=W("option"),v=Oe("New"),D=Se(),B&&B.c(),this.h()},l(k){e=H(k,"DIV",{class:!0});var O=R(e);r=H(O,"DIV",{class:!0});var x=R(r);n=H(x,"DIV",{class:!0});var K=R(n);i=H(K,"LABEL",{class:!0});var $=R(i);a=H($,"SPAN",{class:!0});var X=R(a);o=Me(X,"Edit Slots"),X.forEach(M),$.forEach(M),s=Be(K),l=H(K,"SELECT",{class:!0});var j=R(l);p=H(j,"OPTION",{});var U=R(p);f=Me(U,"Pick one"),U.forEach(M);for(let V=0;V<d.length;V+=1)d[V].l(j);b=H(j,"OPTION",{});var z=R(b);v=Me(z,"New"),z.forEach(M),j.forEach(M),K.forEach(M),x.forEach(M),D=Be(O),B&&B.l(O),O.forEach(M),this.h()},h(){F(a,"class","label-text"),F(i,"class","label"),p.disabled=!0,p.selected=h=t[0]===null,p.__value="Pick one",p.value=p.__value,b.__value="new",b.value=b.__value,b.selected=_=t[0]==="new",F(l,"class","select select-bordered"),t[0]===void 0&&Ni(()=>t[10].call(l)),F(n,"class","form-control w-full max-w-xs mb-4"),F(r,"class","flex justify-center"),F(e,"class","h-full p-2 w-full bg-base-100 overflow-y-auto text-base-content inline-block")},m(k,O){le(k,e,O),I(e,r),I(r,n),I(n,i),I(i,a),I(a,o),I(n,s),I(n,l),I(l,p),I(p,f);for(let x=0;x<d.length;x+=1)d[x]&&d[x].m(l,null);I(l,b),I(b,v),ki(l,t[0],!0),I(e,D),B&&B.m(e,null),S||(w=ve(l,"change",t[10]),S=!0)},p(k,[O]){O&17&&h!==(h=k[0]===null)&&(p.selected=h),O&17&&(C=Object.entries(k[4]),d=Bn(d,O,E,1,k,C,g,l,Jn,Cp,b,Ap)),O&17&&_!==(_=k[0]==="new")&&(b.selected=_),O&17&&ki(l,k[0]),k[0]?B?B.p(k,O):(B=Fp(k),B.c(),B.m(e,null)):B&&(B.d(1),B=null)},i:Ce,o:Ce,d(k){k&&M(e);for(let O=0;O<d.length;O+=1)d[O].d();B&&B.d(),S=!1,w()}}}function N4(t,e,r){let n;$e(t,Ji,C=>r(4,n=C));let i=null,a="",o="",s=null;function l(C){r(3,s=C&&C!=="new"?{...n[C]}:C==="new"?{name:"New Slot Set",values:[]}:null),r(1,a=s?s.name:"")}function p(C){return Object.values(n).every(B=>B.name!==C)}function f(){if(s)if(i&&i!=="new")Ji.update(i,{...s,name:a});else{if(!p()){alert("Name already in use");return}const E=go();Ji.update(E,{...s,name:a}),r(0,i=E)}}function h(){Ji.delete(i),r(1,a=""),r(2,o=""),r(0,i=null),r(3,s=null)}const d=Du((C,E)=>{if(!s||!i)return;const B=[...s.values];E.length===0?B.splice(C,1):B[C]=E,r(3,s.values=B,s),i!=="new"&&Ji.update(i,s)},1e3),g=Du(C=>{if(!s||!i)return;const E=[...s.values];C.length>0&&(E.push(C),r(3,s.values=E,s),r(2,o=""),i!=="new"&&Ji.update(i,s))},1e3);function b(){i=aw(this),r(0,i)}function v(){a=this.value,r(1,a)}const _=()=>navigator.clipboard.writeText(Gs(a)),D=(C,E)=>d(C,E.target.value);function S(){o=this.value,r(2,o)}const w=C=>g(C.target.value);return t.$$.update=()=>{t.$$.dirty&1&&l(i)},[i,a,o,s,n,p,f,h,d,g,b,v,_,D,S,w]}class x4 extends Xe{constructor(e){super(),et(this,e,N4,I4,tt,{})}}function L4(t){let e,r;return e=new P4({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function R4(t){let e,r;return e=new x4({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function U4(t){let e,r;return e=new C4({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function V4(t){let e,r;return e=new JB({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function j4(t){let e,r;return e=new $B({}),{c(){je(e.$$.fragment)},l(n){ze(e.$$.fragment,n)},m(n,i){qe(e,n,i),r=!0},i(n){r||(he(e.$$.fragment,n),r=!0)},o(n){_e(e.$$.fragment,n),r=!1},d(n){We(e,n)}}}function z4(t){let e,r,n,i,a,o,s,l,p,f,h,d,g,b,v,_,D,S,w,C,E,B,k,O,x,K,$,X;E=new T4({});const j=[j4,V4,U4,R4,L4],U=[];function z(V,J){return V[0]==="select"?0:V[0]==="edit"?1:V[0]==="generate"?2:V[0]==="slots"?3:V[0]==="settings"?4:-1}return~(O=z(t))&&(x=U[O]=j[O](t)),{c(){e=W("div"),r=W("div"),n=W("div"),i=W("button"),a=Oe("Select"),s=Se(),l=W("button"),p=Oe("Edit"),h=Se(),d=W("button"),g=Oe("Generate"),v=Se(),_=W("button"),D=Oe("Slots"),w=Se(),C=W("button"),je(E.$$.fragment),k=Se(),x&&x.c(),this.h()},l(V){e=H(V,"DIV",{class:!0});var J=R(e);r=H(J,"DIV",{class:!0});var ae=R(r);n=H(ae,"DIV",{class:!0});var ne=R(n);i=H(ne,"BUTTON",{class:!0});var se=R(i);a=Me(se,"Select"),se.forEach(M),s=Be(ne),l=H(ne,"BUTTON",{class:!0});var De=R(l);p=Me(De,"Edit"),De.forEach(M),h=Be(ne),d=H(ne,"BUTTON",{class:!0});var we=R(d);g=Me(we,"Generate"),we.forEach(M),v=Be(ne),_=H(ne,"BUTTON",{class:!0});var Fe=R(_);D=Me(Fe,"Slots"),Fe.forEach(M),w=Be(ne),C=H(ne,"BUTTON",{class:!0});var xe=R(C);ze(E.$$.fragment,xe),xe.forEach(M),ne.forEach(M),k=Be(ae),x&&x.l(ae),ae.forEach(M),J.forEach(M),this.h()},h(){F(i,"class",o=t[0]==="select"?"btn btn-active":"btn"),F(l,"class",f=t[0]==="edit"?"btn btn-active":"btn"),F(d,"class",b=t[0]==="generate"?"btn btn-active":"btn"),F(_,"class",S=t[0]==="slots"?"btn btn-active":"btn"),F(C,"class",B=t[0]==="settings"?"btn btn-active":"btn"),F(n,"class","btn-group btn-group-vertical sm:btn-group-horizontal bg-base-100 w-full flex justify-center p-2"),F(r,"class","h-screen overflow-y-auto flex flex-col"),F(e,"class","max-w-md w-1/2 h-screen")},m(V,J){le(V,e,J),I(e,r),I(r,n),I(n,i),I(i,a),I(n,s),I(n,l),I(l,p),I(n,h),I(n,d),I(d,g),I(n,v),I(n,_),I(_,D),I(n,w),I(n,C),qe(E,C,null),I(r,k),~O&&U[O].m(r,null),K=!0,$||(X=[ve(i,"click",t[2]),ve(l,"click",t[3]),ve(d,"click",t[4]),ve(_,"click",t[5]),ve(C,"click",t[6])],$=!0)},p(V,[J]){(!K||J&1&&o!==(o=V[0]==="select"?"btn btn-active":"btn"))&&F(i,"class",o),(!K||J&1&&f!==(f=V[0]==="edit"?"btn btn-active":"btn"))&&F(l,"class",f),(!K||J&1&&b!==(b=V[0]==="generate"?"btn btn-active":"btn"))&&F(d,"class",b),(!K||J&1&&S!==(S=V[0]==="slots"?"btn btn-active":"btn"))&&F(_,"class",S),(!K||J&1&&B!==(B=V[0]==="settings"?"btn btn-active":"btn"))&&F(C,"class",B);let ae=O;O=z(V),O!==ae&&(x&&(rr(),_e(U[ae],1,1,()=>{U[ae]=null}),nr()),~O?(x=U[O],x||(x=U[O]=j[O](V),x.c()),he(x,1),x.m(r,null)):x=null)},i(V){K||(he(E.$$.fragment,V),he(x),K=!0)},o(V){_e(E.$$.fragment,V),_e(x),K=!1},d(V){V&&M(e),We(E),~O&&U[O].d(),$=!1,Wt(X)}}}function q4(t,e,r){let n;$e(t,pi,f=>r(0,n=f));function i(f){pi.update(f)}const a=()=>i("select"),o=()=>i("edit"),s=()=>i("generate"),l=()=>i("slots"),p=()=>i("settings");return t.$$.update=()=>{t.$$.dirty&1&&(n||pi.update("select"))},[n,i,a,o,s,l,p]}class W4 extends Xe{constructor(e){super(),et(this,e,q4,z4,tt,{})}}function H4(t){let e,r;return{c(){e=W("p"),r=Oe("Loading..."),this.h()},l(n){e=H(n,"P",{class:!0});var i=R(e);r=Me(i,"Loading..."),i.forEach(M),this.h()},h(){F(e,"class","text-lg")},m(n,i){le(n,e,i),I(e,r)},i:Ce,o:Ce,d(n){n&&M(e)}}}function G4(t){let e,r;return{c(){e=W("p"),r=Oe("This tool is not optimized for small screens or mobile devices."),this.h()},l(n){e=H(n,"P",{class:!0});var i=R(e);r=Me(i,"This tool is not optimized for small screens or mobile devices."),i.forEach(M),this.h()},h(){F(e,"class","text-lg")},m(n,i){le(n,e,i),I(e,r)},i:Ce,o:Ce,d(n){n&&M(e)}}}function K4(t){let e,r,n,i;return e=new W4({}),n=new zB({}),{c(){je(e.$$.fragment),r=Se(),je(n.$$.fragment)},l(a){ze(e.$$.fragment,a),r=Be(a),ze(n.$$.fragment,a)},m(a,o){qe(e,a,o),le(a,r,o),qe(n,a,o),i=!0},i(a){i||(he(e.$$.fragment,a),he(n.$$.fragment,a),i=!0)},o(a){_e(e.$$.fragment,a),_e(n.$$.fragment,a),i=!1},d(a){We(e,a),a&&M(r),We(n,a)}}}function $4(t){let e,r,n,i,a,o;Ni(t[2]);const s=[K4,G4,H4],l=[];function p(f,h){return f[0]&&f[1]&&f[0]>1024&&f[1]>800?0:f[0]&&f[1]?1:2}return e=p(t),r=l[e]=s[e](t),{c(){r.c(),n=wt()},l(f){r.l(f),n=wt()},m(f,h){l[e].m(f,h),le(f,n,h),i=!0,a||(o=ve(window,"resize",t[2]),a=!0)},p(f,[h]){let d=e;e=p(f),e!==d&&(rr(),_e(l[d],1,1,()=>{l[d]=null}),nr(),r=l[e],r||(r=l[e]=s[e](f),r.c()),he(r,1),r.m(n.parentNode,n))},i(f){i||(he(r),i=!0)},o(f){_e(r),i=!1},d(f){l[e].d(f),f&&M(n),a=!1,o()}}}function Y4(t,e,r){let n=null,i=null;function a(){r(0,n=window.innerWidth),r(1,i=window.innerHeight)}return[n,i,a]}class Q4 extends Xe{constructor(e){super(),et(this,e,Y4,$4,tt,{})}}export{Q4 as default};
